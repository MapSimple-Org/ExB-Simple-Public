System.register(["jimu-core/emotion","jimu-core","jimu-ui","jimu-arcgis","jimu-ui/basic/sql-expression-runtime","jimu-theme","widgets/shared-code/common","jimu-layouts/layout-runtime","jimu-core/react"], function(__WEBPACK_DYNAMIC_EXPORT__, __system_context__) {
	var __WEBPACK_EXTERNAL_MODULE__emotion_react_jsx_runtime__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_core__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_ui__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_arcgis__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_ui_basic_sql_expression_runtime__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_theme__ = {};
	var __WEBPACK_EXTERNAL_MODULE_widgets_shared_code_common__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_layouts_layout_runtime__ = {};
	var __WEBPACK_EXTERNAL_MODULE_react__ = {};
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE__emotion_react_jsx_runtime__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_core__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_ui__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_arcgis__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_ui_basic_sql_expression_runtime__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_theme__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_widgets_shared_code_common__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_layouts_layout_runtime__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_react__, "__esModule", { value: true });
	return {
		setters: [
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE__emotion_react_jsx_runtime__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_core__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_ui__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_arcgis__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_ui_basic_sql_expression_runtime__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_theme__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_widgets_shared_code_common__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_layouts_layout_runtime__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_react__[key] = module[key];
				});
			}
		],
		execute: function() {
			__WEBPACK_DYNAMIC_EXPORT__(
/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./jimu-icons/filled/directional/down.tsx":
/*!************************************************!*\
  !*** ./jimu-icons/filled/directional/down.tsx ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DownFilled: () => (/* binding */ DownFilled)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_filled_directional_down_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/filled/directional/down.svg */ "./jimu-icons/svg/filled/directional/down.svg");
/* harmony import */ var _svg_filled_directional_down_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_filled_directional_down_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const DownFilled = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_filled_directional_down_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/filled/directional/right.tsx":
/*!*************************************************!*\
  !*** ./jimu-icons/filled/directional/right.tsx ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   RightFilled: () => (/* binding */ RightFilled)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_filled_directional_right_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/filled/directional/right.svg */ "./jimu-icons/svg/filled/directional/right.svg");
/* harmony import */ var _svg_filled_directional_right_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_filled_directional_right_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const RightFilled = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_filled_directional_right_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/directional/arrow-left.tsx":
/*!********************************************************!*\
  !*** ./jimu-icons/outlined/directional/arrow-left.tsx ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ArrowLeftOutlined: () => (/* binding */ ArrowLeftOutlined)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/directional/arrow-left.svg */ "./jimu-icons/svg/outlined/directional/arrow-left.svg");
/* harmony import */ var _svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const ArrowLeftOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/directional/collapse-all.tsx":
/*!**********************************************************!*\
  !*** ./jimu-icons/outlined/directional/collapse-all.tsx ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CollapseAllOutlined: () => (/* binding */ CollapseAllOutlined)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_directional_collapse_all_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/directional/collapse-all.svg */ "./jimu-icons/svg/outlined/directional/collapse-all.svg");
/* harmony import */ var _svg_outlined_directional_collapse_all_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_directional_collapse_all_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const CollapseAllOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_outlined_directional_collapse_all_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/directional/expand-all.tsx":
/*!********************************************************!*\
  !*** ./jimu-icons/outlined/directional/expand-all.tsx ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ExpandAllOutlined: () => (/* binding */ ExpandAllOutlined)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_directional_expand_all_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/directional/expand-all.svg */ "./jimu-icons/svg/outlined/directional/expand-all.svg");
/* harmony import */ var _svg_outlined_directional_expand_all_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_directional_expand_all_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const ExpandAllOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_outlined_directional_expand_all_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/editor/trash.tsx":
/*!**********************************************!*\
  !*** ./jimu-icons/outlined/editor/trash.tsx ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TrashOutlined: () => (/* binding */ TrashOutlined)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/editor/trash.svg */ "./jimu-icons/svg/outlined/editor/trash.svg");
/* harmony import */ var _svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const TrashOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/suggested/info.tsx":
/*!************************************************!*\
  !*** ./jimu-icons/outlined/suggested/info.tsx ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   InfoOutlined: () => (/* binding */ InfoOutlined)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_suggested_info_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/suggested/info.svg */ "./jimu-icons/svg/outlined/suggested/info.svg");
/* harmony import */ var _svg_outlined_suggested_info_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_suggested_info_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const InfoOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_outlined_suggested_info_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/svg/filled/directional/down.svg":
/*!****************************************************!*\
  !*** ./jimu-icons/svg/filled/directional/down.svg ***!
  \****************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"m14 4-6 8-6-8z\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/filled/directional/right.svg":
/*!*****************************************************!*\
  !*** ./jimu-icons/svg/filled/directional/right.svg ***!
  \*****************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"m4 2 8 6-8 6z\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/application/more-horizontal.svg":
/*!*****************************************************************!*\
  !*** ./jimu-icons/svg/outlined/application/more-horizontal.svg ***!
  \*****************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M2 7a1 1 0 1 0 0 2 1 1 0 0 0 0-2m5 1a1 1 0 1 1 2 0 1 1 0 0 1-2 0m6 0a1 1 0 1 1 2 0 1 1 0 0 1-2 0\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/arrow-left.svg":
/*!************************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/arrow-left.svg ***!
  \************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M15 7.5a.52.52 0 0 1-.516.527H2.976L6.473 11.6a.535.535 0 0 1 0 .746.51.51 0 0 1-.73 0L1 7.5l4.743-4.846a.51.51 0 0 1 .73 0 .535.535 0 0 1 0 .746L2.976 6.973h11.508c.285 0 .516.236.516.527\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/collapse-all.svg":
/*!**************************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/collapse-all.svg ***!
  \**************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M1 3h14v1H1zM9 7h6v1H9zM5.036 6.146a.5.5 0 0 0-.708 0L1.146 9.328a.5.5 0 1 0 .708.708l2.328-2.329V14.5h1V7.707l2.328 2.329a.5.5 0 1 0 .708-.708z\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/expand-all.svg":
/*!************************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/expand-all.svg ***!
  \************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M1 3h14v1H1zM9 7h6v1H9zM4.328 14.354a.5.5 0 0 0 .708 0l3.182-3.182a.5.5 0 1 0-.708-.708l-2.328 2.329V6h-1v6.793l-2.328-2.328a.5.5 0 1 0-.708.707z\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/right.svg":
/*!*******************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/right.svg ***!
  \*******************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M4.653 13.854a.485.485 0 0 1 0-.708L10.24 8 4.653 2.854a.485.485 0 0 1 0-.708.54.54 0 0 1 .738 0l5.956 5.5a.485.485 0 0 1 0 .708l-5.956 5.5a.54.54 0 0 1-.738 0\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/editor/close.svg":
/*!**************************************************!*\
  !*** ./jimu-icons/svg/outlined/editor/close.svg ***!
  \**************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"m8.745 8 6.1 6.1a.527.527 0 1 1-.745.746L8 8.746l-6.1 6.1a.527.527 0 1 1-.746-.746l6.1-6.1-6.1-6.1a.527.527 0 0 1 .746-.746l6.1 6.1 6.1-6.1a.527.527 0 0 1 .746.746z\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/editor/trash.svg":
/*!**************************************************!*\
  !*** ./jimu-icons/svg/outlined/editor/trash.svg ***!
  \**************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M6 6.5a.5.5 0 0 1 1 0v6a.5.5 0 0 1-1 0zM9.5 6a.5.5 0 0 0-.5.5v6a.5.5 0 0 0 1 0v-6a.5.5 0 0 0-.5-.5\"></path><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M11 0H5a1 1 0 0 0-1 1v2H.5a.5.5 0 0 0 0 1h1.6l.81 11.1a1 1 0 0 0 .995.9h8.19a1 1 0 0 0 .995-.9L13.9 4h1.6a.5.5 0 0 0 0-1H12V1a1 1 0 0 0-1-1m0 3V1H5v2zm1.895 1h-9.79l.8 11h8.19z\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/suggested/error.svg":
/*!*****************************************************!*\
  !*** ./jimu-icons/svg/outlined/suggested/error.svg ***!
  \*****************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16m0-1A7 7 0 1 0 8 1a7 7 0 0 0 0 14M8 4a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 4m1 7a1 1 0 1 1-2 0 1 1 0 0 1 2 0\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/suggested/info.svg":
/*!****************************************************!*\
  !*** ./jimu-icons/svg/outlined/suggested/info.svg ***!
  \****************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M8 5.5a1 1 0 1 0 0-2 1 1 0 0 0 0 2M6.5 7.5A.5.5 0 0 1 7 7h1.5v4.5h1a.5.5 0 0 1 0 1h-3a.5.5 0 0 1 0-1h1V8H7a.5.5 0 0 1-.5-.5\"></path><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16m0-1A7 7 0 1 0 8 1a7 7 0 0 0 0 14\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/suggested/warning.svg":
/*!*******************************************************!*\
  !*** ./jimu-icons/svg/outlined/suggested/warning.svg ***!
  \*******************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M8 2.125 14.334 14H1.667zm-.882-.47a1 1 0 0 1 1.765 0l6.333 11.874A1 1 0 0 1 14.334 15H1.667a1 1 0 0 1-.882-1.47zM8 4.874a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0L8.9 5.87a.905.905 0 0 0-.9-.995m1 7a1 1 0 1 1-2 0 1 1 0 0 1 2 0\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./your-extensions/widgets/query-simple/icon.svg":
/*!*******************************************************!*\
  !*** ./your-extensions/widgets/query-simple/icon.svg ***!
  \*******************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 20 20\"><path fill=\"#000\" d=\"M8.5 3A5.5 5.5 0 0 1 14 8.5a5.5 5.5 0 0 1-1.273 3.527l4.053 4.054a.75.75 0 1 1-1.06 1.06l-4.054-4.053a5.5 5.5 0 0 1-3.527 1.273 5.5 5.5 0 1 1 0-11H8.5zm0 1.5h-.361a4 4 0 1 0 0 8 4 4 0 0 0 0-8z\"></path><rect width=\"19\" height=\"19\" x=\".5\" y=\".5\" stroke=\"#000\" rx=\"1.5\"></rect></svg>"

/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/config.ts":
/*!************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/config.ts ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CreateToolType: () => (/* binding */ CreateToolType),
/* harmony export */   FieldsType: () => (/* binding */ FieldsType),
/* harmony export */   ListDirection: () => (/* binding */ ListDirection),
/* harmony export */   PagingType: () => (/* binding */ PagingType),
/* harmony export */   QueryArrangeType: () => (/* binding */ QueryArrangeType),
/* harmony export */   ResultSelectMode: () => (/* binding */ ResultSelectMode),
/* harmony export */   SelectionType: () => (/* binding */ SelectionType),
/* harmony export */   SortDirection: () => (/* binding */ SortDirection),
/* harmony export */   SpatialFilterType: () => (/* binding */ SpatialFilterType),
/* harmony export */   SpatialRelation: () => (/* binding */ SpatialRelation),
/* harmony export */   SymbolType: () => (/* binding */ SymbolType),
/* harmony export */   UnitType: () => (/* binding */ UnitType),
/* harmony export */   mapJSAPISpatialRelToDsSpatialRel: () => (/* binding */ mapJSAPISpatialRelToDsSpatialRel),
/* harmony export */   mapJSAPIUnitToDsUnit: () => (/* binding */ mapJSAPIUnitToDsUnit)
/* harmony export */ });
var CreateToolType;
(function (CreateToolType) {
    CreateToolType["Point"] = "Point";
    CreateToolType["Polyline"] = "Polyline";
    CreateToolType["Polygon"] = "Polygon";
    CreateToolType["Rectangle"] = "Rectangle";
    CreateToolType["Circle"] = "Circle";
})(CreateToolType || (CreateToolType = {}));
var SelectionType;
(function (SelectionType) {
    SelectionType["NewSelection"] = "NEW_SELECTION";
    SelectionType["AddToSelection"] = "ADD_TO_CURRENT_SELECTION";
    SelectionType["RemoveFromSelection"] = "REMOVE_FROM_CURRENT_SELECTION";
    SelectionType["SubsetSelection"] = "SUBSET_FROM_CURRENT_SELECTION";
    SelectionType["SwitchSelection"] = "SWITCH_CURRENT_SELECTION";
})(SelectionType || (SelectionType = {}));
var QueryArrangeType;
(function (QueryArrangeType) {
    QueryArrangeType["Block"] = "BLOCK";
    QueryArrangeType["Inline"] = "INLINE";
    QueryArrangeType["Popper"] = "POPPER";
})(QueryArrangeType || (QueryArrangeType = {}));
var SpatialFilterType;
(function (SpatialFilterType) {
    SpatialFilterType["CurrentMapExtent"] = "CurrentMapExtent";
    SpatialFilterType["InteractiveDrawMode"] = "InteractiveDrawMode";
    SpatialFilterType["None"] = "";
})(SpatialFilterType || (SpatialFilterType = {}));
var SpatialRelation;
(function (SpatialRelation) {
    SpatialRelation["Intersect"] = "intersects";
    SpatialRelation["Contain"] = "contains";
    SpatialRelation["Cross"] = "crosses";
    SpatialRelation["EnvelopeIntersect"] = "envelope-intersects";
    SpatialRelation["IndexIntersect"] = "index-intersects";
    SpatialRelation["Overlap"] = "overlaps";
    SpatialRelation["Touch"] = "touches";
    SpatialRelation["Within"] = "within";
})(SpatialRelation || (SpatialRelation = {}));
const mapJSAPISpatialRelToDsSpatialRel = {
    [SpatialRelation.Intersect]: 'esriSpatialRelIntersects',
    [SpatialRelation.Contain]: 'esriSpatialRelContains',
    [SpatialRelation.Cross]: 'esriSpatialRelCrosses',
    [SpatialRelation.EnvelopeIntersect]: 'esriSpatialRelEnvelopeIntersects',
    [SpatialRelation.IndexIntersect]: 'esriSpatialRelIndexIntersects',
    [SpatialRelation.Overlap]: 'esriSpatialRelOverlaps',
    [SpatialRelation.Touch]: 'esriSpatialRelTouches',
    [SpatialRelation.Within]: 'esriSpatialRelWithin'
};
var UnitType;
(function (UnitType) {
    UnitType["Miles"] = "Miles";
    UnitType["Kilometers"] = "Kilometers";
    UnitType["Feet"] = "Feet";
    UnitType["Meters"] = "Meters";
    UnitType["NauticalMiles"] = "NauticalMiles";
})(UnitType || (UnitType = {}));
const mapJSAPIUnitToDsUnit = {
    [UnitType.Miles]: 'esriSRUnit_StatuteMile',
    [UnitType.Kilometers]: 'esriSRUnit_Kilometer',
    [UnitType.Feet]: 'esriSRUnit_Foot',
    [UnitType.Meters]: 'esriSRUnit_Meter',
    [UnitType.NauticalMiles]: 'esriSRUnit_NauticalMile'
};
var ListDirection;
(function (ListDirection) {
    ListDirection["Horizontal"] = "Horizontal";
    ListDirection["Vertical"] = "Vertical";
})(ListDirection || (ListDirection = {}));
var PagingType;
(function (PagingType) {
    PagingType["MultiPage"] = "MultiPage";
    PagingType["LazyLoad"] = "LazyLoad";
    PagingType["Simple"] = "Simple";
})(PagingType || (PagingType = {}));
var FieldsType;
(function (FieldsType) {
    FieldsType["PopupSetting"] = "PopupSetting";
    FieldsType["SelectAttributes"] = "SelectAttributes";
})(FieldsType || (FieldsType = {}));
var SortDirection;
(function (SortDirection) {
    SortDirection["Asc"] = "Asc";
    SortDirection["Desc"] = "Desc";
})(SortDirection || (SortDirection = {}));
var ResultSelectMode;
(function (ResultSelectMode) {
    ResultSelectMode["Single"] = "Single";
    ResultSelectMode["Multiple"] = "Multiple";
})(ResultSelectMode || (ResultSelectMode = {}));
var SymbolType;
(function (SymbolType) {
    SymbolType["DefaultSymbol"] = "DefaultSymbol";
    SymbolType["CustomSymbol"] = "CustomSymbol";
})(SymbolType || (SymbolType = {}));


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/data-actions/add-to-map-action.tsx":
/*!*************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/data-actions/add-to-map-action.tsx ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createAddToMapAction: () => (/* binding */ createAddToMapAction)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _runtime_selection_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../runtime/selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/**
 * Custom "Add to Map" data action for QuerySimple widget.
 *
 * This action replaces the framework's "Show on Map" action with a custom
 * implementation that uses QuerySimple's selection process (selectRecordsAndPublish).
 * This ensures consistent behavior with query results and proper integration
 * with the widget's "Clear results" functionality.
 */
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_2__.createQuerySimpleDebugLogger)();
/**
 * Creates a custom "Add to Map" data action that uses QuerySimple's selection process.
 *
 * This action replaces the framework's "Show on Map" action and ensures consistent
 * behavior with QuerySimple's query results by using the same selection mechanism.
 *
 * @param widgetId - The widget ID that provides this action
 * @param outputDS - The output data source (used for selection on the origin layer)
 * @param intl - The Intl object for internationalization
 * @param queryItem - Optional query item configuration (for zoomToSelected setting)
 * @param runtimeZoomToSelected - Optional runtime zoom override from the query form
 * @returns A DataAction object that can be used by DataActionList
 */
function createAddToMapAction(widgetId, outputDS, intl, queryItem, runtimeZoomToSelected) {
    return {
        id: `${widgetId}-addToMap`,
        name: 'addToMap',
        label: intl.formatMessage({ id: 'addToMap', defaultMessage: 'Add to map' }),
        // Icon matches the framework's "Show on Map" action for consistency
        icon: (__webpack_require__(/*! ../runtime/assets/icons/show-on-map.svg */ "./your-extensions/widgets/query-simple/src/runtime/assets/icons/show-on-map.svg")["default"]) || __webpack_require__(/*! ../runtime/assets/icons/show-on-map.svg */ "./your-extensions/widgets/query-simple/src/runtime/assets/icons/show-on-map.svg"),
        // Note: Index may not control position if extraActions are always appended after framework actions
        index: -100,
        widgetId,
        intl,
        supportProviderWidget: true,
        /**
         * Determines if this action can process the given data sets.
         * Supports Records level actions with feature data records.
         */
        isSupported: (dataSets, dataLevel, actionWidgetId) => __awaiter(this, void 0, void 0, function* () {
            debugLogger.log('DATA-ACTION', {
                action: 'addToMap-isSupported',
                widgetId,
                actionWidgetId,
                dataLevel,
                dataSetsCount: (dataSets === null || dataSets === void 0 ? void 0 : dataSets.length) || 0,
                hasOutputDS: !!outputDS
            });
            // Only support Records level actions
            if (dataLevel !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataLevel.Records) {
                debugLogger.log('DATA-ACTION', {
                    action: 'addToMap-isSupported',
                    result: false,
                    reason: 'Not Records level'
                });
                return false;
            }
            // Need at least one data set with records
            if (!dataSets || dataSets.length === 0) {
                debugLogger.log('DATA-ACTION', {
                    action: 'addToMap-isSupported',
                    result: false,
                    reason: 'No data sets'
                });
                return false;
            }
            // Check if we have records and output data source
            const hasRecords = dataSets.some(ds => ds.records && ds.records.length > 0);
            const supported = hasRecords && !!outputDS;
            debugLogger.log('DATA-ACTION', {
                action: 'addToMap-isSupported',
                result: supported,
                hasRecords,
                recordsCount: dataSets.reduce((sum, ds) => { var _a; return sum + (((_a = ds.records) === null || _a === void 0 ? void 0 : _a.length) || 0); }, 0)
            });
            return supported;
        }),
        /**
         * Executes the action by selecting records using QuerySimple's selection process.
         */
        onExecute: (dataSets, dataLevel, actionWidgetId) => __awaiter(this, void 0, void 0, function* () {
            debugLogger.log('DATA-ACTION', {
                action: 'addToMap-onExecute',
                widgetId,
                actionWidgetId,
                dataLevel,
                dataSetsCount: (dataSets === null || dataSets === void 0 ? void 0 : dataSets.length) || 0,
                hasOutputDS: !!outputDS
            });
            if (!outputDS || dataLevel !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataLevel.Records) {
                debugLogger.log('DATA-ACTION', {
                    action: 'addToMap-onExecute',
                    result: false,
                    reason: !outputDS ? 'No outputDS' : 'Not Records level'
                });
                return false;
            }
            // Collect all records from all data sets
            const allRecords = [];
            dataSets.forEach(dataSet => {
                if (dataSet.records && dataSet.records.length > 0) {
                    // Filter to only FeatureDataRecord types
                    const featureRecords = dataSet.records.filter((record) => {
                        return record && typeof record.getGeometry === 'function';
                    });
                    allRecords.push(...featureRecords);
                }
            });
            if (allRecords.length === 0) {
                debugLogger.log('DATA-ACTION', {
                    action: 'addToMap-onExecute',
                    result: false,
                    reason: 'No feature records found'
                });
                return false;
            }
            // Get record IDs
            const recordIds = allRecords.map(record => record.getId());
            debugLogger.log('DATA-ACTION', {
                action: 'addToMap-onExecute',
                recordsCount: allRecords.length,
                recordIds: recordIds.slice(0, 10), // Log first 10 IDs
                outputDSId: outputDS.id
            });
            // Use QuerySimple's selection process - selects on origin layer and publishes selection messages
            // This ensures consistent behavior with query results and proper integration with "Clear results"
            try {
                (0,_runtime_selection_utils__WEBPACK_IMPORTED_MODULE_1__.selectRecordsAndPublish)(widgetId, outputDS, recordIds, allRecords, true);
                // Note: Zoom is now handled by the separate "Zoom To" action in the DataActionList
                // Users can click "Zoom To" from the action menu if they want to zoom to selected records
                debugLogger.log('DATA-ACTION', {
                    action: 'addToMap-onExecute',
                    result: true,
                    message: 'Successfully selected records and published selection message'
                });
                return true;
            }
            catch (error) {
                debugLogger.log('DATA-ACTION', {
                    action: 'addToMap-onExecute',
                    result: false,
                    error: error instanceof Error ? error.message : String(error),
                    errorStack: error instanceof Error ? error.stack : undefined
                });
                return false;
            }
        }),
        /**
         * Cleanup method (required by DataAction interface)
         */
        destroy: () => {
            // No cleanup needed
        }
    };
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/data-actions/index.tsx":
/*!*************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/data-actions/index.tsx ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getExtraActions: () => (/* binding */ getExtraActions)
/* harmony export */ });
/* harmony import */ var _add_to_map_action__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./add-to-map-action */ "./your-extensions/widgets/query-simple/src/data-actions/add-to-map-action.tsx");
/* harmony import */ var _zoom_to_action__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./zoom-to-action */ "./your-extensions/widgets/query-simple/src/data-actions/zoom-to-action.tsx");


/**
 * QuerySimple Custom Data Actions
 *
 * Returns custom data actions for the widget.
 * Includes custom "Zoom To" and "Add to Map" actions that use QuerySimple's processes.
 *
 * @param widgetId - The widget ID
 * @param outputDS - The output data source (null/undefined if not available)
 * @param mapView - The map view (null/undefined if not available)
 * @param intl - The Intl object for internationalization
 * @param queryItem - Optional query item configuration
 * @param runtimeZoomToSelected - Optional runtime zoom override from the query form
 * @returns Array of custom DataAction objects (empty if conditions not met)
 */
function getExtraActions(widgetId, outputDS, mapView, intl, queryItem, runtimeZoomToSelected) {
    const actions = [];
    // Add "Zoom To" action if we have mapView and intl
    if (mapView && intl) {
        actions.push((0,_zoom_to_action__WEBPACK_IMPORTED_MODULE_1__.createZoomToAction)(widgetId, mapView, intl));
    }
    // Add "Add to Map" action if we have outputDS and intl
    if (outputDS && intl) {
        actions.push((0,_add_to_map_action__WEBPACK_IMPORTED_MODULE_0__.createAddToMapAction)(widgetId, outputDS, intl, queryItem, runtimeZoomToSelected));
    }
    return actions;
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/data-actions/zoom-to-action.tsx":
/*!**********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/data-actions/zoom-to-action.tsx ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createZoomToAction: () => (/* binding */ createZoomToAction)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/* harmony import */ var _runtime_zoom_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../runtime/zoom-utils */ "./your-extensions/widgets/query-simple/src/runtime/zoom-utils.ts");
/**
 * Custom "Zoom To" data action for QuerySimple widget.
 *
 * This action replaces the framework's "Zoom To" action with a custom
 * implementation that uses QuerySimple's zoom logic (mapView.goTo with padding).
 * This ensures consistent zoom behavior with proper padding.
 */
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__.createQuerySimpleDebugLogger)();
/**
 * Creates a custom "Zoom To" data action that uses QuerySimple's zoom logic.
 *
 * This action replaces the framework's "Zoom To" action and ensures consistent
 * zoom behavior with padding using mapView.goTo().
 *
 * @param widgetId - The widget ID that provides this action
 * @param mapView - The map view to zoom (MapView or SceneView)
 * @param intl - The Intl object for internationalization
 * @returns A DataAction object that can be used by DataActionList
 */
function createZoomToAction(widgetId, mapView, intl) {
    return {
        id: `${widgetId}-zoomTo`,
        name: 'querySimpleZoomTo', // Use unique name to avoid conflict with framework action
        label: intl.formatMessage({ id: 'zoomToSelected', defaultMessage: 'Zoom to selected' }),
        // Use the same icon as the framework's zoom action (from ExB configuration page)
        icon: (__webpack_require__(/*! ../runtime/assets/icons/zoom-to.svg */ "./your-extensions/widgets/query-simple/src/runtime/assets/icons/zoom-to.svg")["default"]) || __webpack_require__(/*! ../runtime/assets/icons/zoom-to.svg */ "./your-extensions/widgets/query-simple/src/runtime/assets/icons/zoom-to.svg"),
        index: -90, // Position before Add to Map (-100)
        widgetId,
        intl,
        supportProviderWidget: true,
        /**
         * Determines if this action can process the given data sets.
         * Supports Records level actions with feature data records.
         */
        isSupported: (dataSets, dataLevel, actionWidgetId) => __awaiter(this, void 0, void 0, function* () {
            debugLogger.log('DATA-ACTION', {
                action: 'zoomTo-isSupported',
                widgetId,
                actionWidgetId,
                dataLevel,
                dataSetsCount: (dataSets === null || dataSets === void 0 ? void 0 : dataSets.length) || 0,
                hasMapView: !!mapView
            });
            // Only support Records level actions
            if (dataLevel !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataLevel.Records) {
                debugLogger.log('DATA-ACTION', {
                    action: 'zoomTo-isSupported',
                    result: false,
                    reason: 'Not Records level'
                });
                return false;
            }
            // Need at least one data set with records and a map view
            if (!dataSets || dataSets.length === 0 || !mapView) {
                debugLogger.log('DATA-ACTION', {
                    action: 'zoomTo-isSupported',
                    result: false,
                    reason: !dataSets || dataSets.length === 0 ? 'No data sets' : 'No mapView'
                });
                return false;
            }
            // Check if we have records
            const hasRecords = dataSets.some(ds => ds.records && ds.records.length > 0);
            debugLogger.log('DATA-ACTION', {
                action: 'zoomTo-isSupported',
                result: hasRecords,
                recordsCount: dataSets.reduce((sum, ds) => { var _a; return sum + (((_a = ds.records) === null || _a === void 0 ? void 0 : _a.length) || 0); }, 0)
            });
            return hasRecords;
        }),
        /**
         * Executes the action by zooming to records using the shared zoom utility.
         */
        onExecute: (dataSets, dataLevel, actionWidgetId) => __awaiter(this, void 0, void 0, function* () {
            debugLogger.log('DATA-ACTION', {
                action: 'zoomTo-onExecute',
                widgetId,
                actionWidgetId,
                dataLevel,
                dataSetsCount: (dataSets === null || dataSets === void 0 ? void 0 : dataSets.length) || 0,
                hasMapView: !!mapView
            });
            if (!mapView || dataLevel !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataLevel.Records) {
                // BUG-GRAPHICS-001: Zoom operations fail when graphics layer is disabled
                if (!mapView) {
                    debugLogger.log('BUG', {
                        bugId: 'BUG-GRAPHICS-001',
                        category: 'GRAPHICS',
                        event: 'zoom-operation-failed-graphics-layer-disabled',
                        widgetId,
                        operation: 'zoom-to-selected-action',
                        dataSetsCount: (dataSets === null || dataSets === void 0 ? void 0 : dataSets.length) || 0,
                        description: 'Zoom to selected action attempted but mapView is unavailable (likely because useGraphicsLayerForHighlight is disabled)',
                        workaround: 'Enable useGraphicsLayerForHighlight in widget settings',
                        targetResolution: 'r019.0'
                    });
                }
                debugLogger.log('DATA-ACTION', {
                    action: 'zoomTo-onExecute',
                    result: false,
                    reason: !mapView ? 'No mapView' : 'Not Records level'
                });
                return false;
            }
            // Collect all records from all data sets
            const allRecords = [];
            dataSets.forEach(dataSet => {
                if (dataSet.records && dataSet.records.length > 0) {
                    // Filter to only FeatureDataRecord types
                    const featureRecords = dataSet.records.filter((record) => {
                        return record && typeof record.getGeometry === 'function';
                    });
                    allRecords.push(...featureRecords);
                }
            });
            if (allRecords.length === 0) {
                debugLogger.log('DATA-ACTION', {
                    action: 'zoomTo-onExecute',
                    result: false,
                    reason: 'No feature records found'
                });
                return false;
            }
            try {
                // Use the shared zoom utility function
                yield (0,_runtime_zoom_utils__WEBPACK_IMPORTED_MODULE_2__.zoomToRecords)(mapView, allRecords);
                debugLogger.log('DATA-ACTION', {
                    action: 'zoomTo-onExecute',
                    result: true,
                    message: 'Successfully zoomed to features',
                    recordsCount: allRecords.length
                });
                return true;
            }
            catch (error) {
                debugLogger.log('DATA-ACTION', {
                    action: 'zoomTo-onExecute',
                    result: false,
                    error: error instanceof Error ? error.message : String(error),
                    errorStack: error instanceof Error ? error.stack : undefined
                });
                return false;
            }
        }),
        /**
         * Cleanup method (required by DataAction interface)
         */
        destroy: () => {
            // No cleanup needed
        }
    };
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/default-query-item.ts":
/*!************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/default-query-item.ts ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DEFAULT_QUERY_ITEM: () => (/* binding */ DEFAULT_QUERY_ITEM)
/* harmony export */ });
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./config */ "./your-extensions/widgets/query-simple/src/config.ts");

const DEFAULT_QUERY_ITEM = {
    icon: null,
    displayLabel: true,
    sqlExprObj: null,
    useAttributeFilter: true,
    useSpatialFilter: true,
    spatialMapWidgetIds: [],
    spatialFilterTypes: [],
    spatialInteractiveCreateToolTypes: [
        _config__WEBPACK_IMPORTED_MODULE_0__.CreateToolType.Point,
        _config__WEBPACK_IMPORTED_MODULE_0__.CreateToolType.Polyline,
        _config__WEBPACK_IMPORTED_MODULE_0__.CreateToolType.Polygon,
        _config__WEBPACK_IMPORTED_MODULE_0__.CreateToolType.Rectangle,
        _config__WEBPACK_IMPORTED_MODULE_0__.CreateToolType.Circle
    ],
    spatialInteractiveEnableBuffer: false,
    spatialInteractiveBufferDistance: 0,
    spatialInteractiveBufferUnit: _config__WEBPACK_IMPORTED_MODULE_0__.UnitType.Meters,
    spatialRelations: [_config__WEBPACK_IMPORTED_MODULE_0__.SpatialRelation.Intersect],
    spatialRelationUseDataSources: [],
    spatialRelationEnableSelectTool: false,
    spatialRelationEnableBuffer: false,
    spatialRelationBufferDistance: 0,
    spatialRelationBufferUnit: _config__WEBPACK_IMPORTED_MODULE_0__.UnitType.Meters,
    resultListDirection: _config__WEBPACK_IMPORTED_MODULE_0__.ListDirection.Vertical,
    resultPagingStyle: _config__WEBPACK_IMPORTED_MODULE_0__.PagingType.MultiPage,
    resultFieldsType: _config__WEBPACK_IMPORTED_MODULE_0__.FieldsType.PopupSetting,
    resultSymbolType: _config__WEBPACK_IMPORTED_MODULE_0__.SymbolType.DefaultSymbol,
    resultCustomSymbol: {
        angle: 0,
        color: [255, 255, 255, 255],
        outline: {
            color: [255, 255, 255, 255],
            style: 'esriSLSSolid',
            type: 'esriSLS',
            width: 1
        },
        size: 6,
        style: 'esriSMSCircle',
        type: 'esriSMS',
        xoffset: 0,
        yoffset: 0
    },
    resultAllowChangeSymbol: false,
    allowExport: false,
    sortOptions: [],
    zoomToSelected: true,
    itemSizeMap: {
        arrangementHorizontalPopper: {
            minSize: { width: 300, height: 300 },
            defaultSize: { width: 360, height: 480 }
        }
    }
};


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/assets/icons/show-on-map.svg":
/*!***************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/assets/icons/show-on-map.svg ***!
  \***************************************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M1 1v14h14V1zm9.082 13c-.005-.037-.113-.274-.122-.309a1.5 1.5 0 0 0 .718-1.267 1.2 1.2 0 0 0-.053-.358c.152-.176.263-.383.326-.607q.046.003.093.003c.3.002.593-.091.836-.266q.06.066.126.124c.42.412.977.654 1.564.68H14v2h-3.918M14 11h-.43a1.46 1.46 0 0 1-.906-.433c-.264-.23-.258-.782-.617-.782-.482 0-.52.677-1.003.677-.219 0-.38-.177-.599-.177-.193 0-.445.102-.445.293v.502c0 .424-.506.508-.506.934 0 .171.184.236.184.41 0 .58-.893.502-.893 1.08 0 .191.215.305.215.486V14H6.375q.087-.243.09-.502c0-.547-1.043-.393-1.207-.72-.407-.813.693-1.022.693-1.673 0-.16-.082-.488-.334-.513-.351-.035-.443.154-.797.154a.406.406 0 0 1-.437-.36c0-.386.308-.566.308-.952 0-.25-.102-.393-.102-.643a.62.62 0 0 1 .59-.643c.323 0 .464.264.618.54a.64.64 0 0 0 .617.308c.49 0 .798-.61.798-.977a.47.47 0 0 1 .437-.488c.347 0 .476.36.824.36.57 0 .55-.756 1.053-1.03.618-.332.438-1.052.36-1.44-.032-.169.29-.5.464-.487.72.05.412-.54.412-.823q0-.073.022-.142c.111-.332.595-.438.595-.836 0-.281-.233-.41-.233-.693a.65.65 0 0 1 .22-.44H14zM2 14V2h8.278c-.013.077-.132.356-.132.44 0 .194.038.387.112.567a1.6 1.6 0 0 0-.422.643 1.4 1.4 0 0 0-.074.442 1.7 1.7 0 0 0-.536.43 1.32 1.32 0 0 0-.32 1.091q.046.205.066.414a2 2 0 0 0-.649.67 1.46 1.46 0 0 0-.674-.166 1.45 1.45 0 0 0-1.383 1.086 1.44 1.44 0 0 0-1.086-.469 1.62 1.62 0 0 0-1.591 1.643c0 .254.113.293.084.574s-.29.535-.29 1.022a1.37 1.37 0 0 0 .984 1.29 1.58 1.58 0 0 0-.003 1.549c.143.286.636.774.534.774z\"></path></svg>"

/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/assets/icons/zoom-to.svg":
/*!***********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/assets/icons/zoom-to.svg ***!
  \***********************************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"currentColor\" fill-rule=\"evenodd\" d=\"M0 10.5V12a1 1 0 0 0 1 1h1.5v-1H1v-1.5zM2.5 1H1a1 1 0 0 0-1 1v1.5h1V2h1.5zM0 8.5h1v-3H0zM4.5 1v1h3V1zm5 0v1H11v1.5h1V2a1 1 0 0 0-1-1zM6.318 13.682a4.5 4.5 0 0 0 5.991.334l1.848 1.848.707-.707-1.847-1.848a4.5 4.5 0 1 0-6.699.373m.707-.707a3.5 3.5 0 1 1 4.95-4.95 3.5 3.5 0 0 1-4.95 4.95M9 13v-2H7v-1h2V8h1v2h2v1h-2v2z\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/buffer-input.tsx":
/*!***************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/buffer-input.tsx ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BufferInput: () => (/* binding */ BufferInput)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _query_task_context__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./query-task-context */ "./your-extensions/widgets/query-simple/src/runtime/query-task-context.tsx");

/** @jsx jsx */





function BufferInput(props) {
    const { distance = 0, unit = _config__WEBPACK_IMPORTED_MODULE_3__.UnitType.Meters, onBufferChange } = props;
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.defaultMessages, _translations_default__WEBPACK_IMPORTED_MODULE_4__["default"]);
    const [d, setD] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(distance);
    const [u, setU] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(unit);
    const queryTaskContext = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useContext(_query_task_context__WEBPACK_IMPORTED_MODULE_5__.QueryTaskContext);
    const resetSymbolRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(queryTaskContext.resetSymbol);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        let changed = false;
        if (distance !== d) {
            setD(distance);
            changed = true;
        }
        if (unit !== u) {
            setU(unit);
            changed = true;
        }
        if (changed) {
            onBufferChange(distance, unit);
        }
        // eslint-disable-next-line react-hooks/exhaustive-deps
    }, [distance, unit]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (queryTaskContext.resetSymbol && queryTaskContext.resetSymbol !== resetSymbolRef.current) {
            resetSymbolRef.current = queryTaskContext.resetSymbol;
            setD(distance);
            setU(unit);
            onBufferChange(distance, unit);
        }
    }, [queryTaskContext.resetSymbol, distance, unit, onBufferChange]);
    const handleDistanceChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((value) => {
        setD(value);
    }, []);
    const handleDistanceAccepted = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((value) => {
        setD(value);
        onBufferChange(value, u);
    }, [onBufferChange, u]);
    const handleBufferUnitChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((e) => {
        setU(e.target.value);
        onBufferChange(d, e.target.value);
    }, [onBufferChange, d]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.NumericInput, { "aria-label": getI18nMessage('theBufferDistance'), className: 'mr-1', value: d, onChange: handleDistanceChange, onAcceptValue: handleDistanceAccepted }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Select, { "aria-label": getI18nMessage('unit'), value: u, onChange: handleBufferUnitChange, children: Object.values(_config__WEBPACK_IMPORTED_MODULE_3__.UnitType).map((value) => ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: value, children: getI18nMessage(`unit_${value}`) }, value))) })] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/components/feature-info.tsx":
/*!**************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/components/feature-info.tsx ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   LoadStatus: () => (/* binding */ LoadStatus),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_icons_filled_directional_right__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-icons/filled/directional/right */ "./jimu-icons/filled/directional/right.tsx");
/* harmony import */ var jimu_icons_filled_directional_down__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jimu-icons/filled/directional/down */ "./jimu-icons/filled/directional/down.tsx");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");

/** @jsx jsx */
// This file is duplicated from '../../../../feature-info/src/runtime/components/feature-info'






const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_6__.createQuerySimpleDebugLogger)();
var LoadStatus;
(function (LoadStatus) {
    LoadStatus["Pending"] = "Pending";
    LoadStatus["Fulfilled"] = "Fulfilled";
    LoadStatus["Rejected"] = "Rejected";
})(LoadStatus || (LoadStatus = {}));
const style = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
  border: 1px solid var(--sys-color-divider-secondary);
  .esri-widget__heading {
    font-size: 0.875rem !important;
    font-weight: 500 !important;
    margin: 0;
    color: var(--sys-color-surface-paper-text);
  }

  .esri-feature__content-element {
    padding: 0;
  }

  .jimu-btn.expanded {
    align-self: flex-start;
  }
  
  // Larger expand/collapse button for better touch targets
  .jimu-btn[aria-label*="expand"],
  .jimu-btn[aria-label*="collapse"] {
    min-width: 32px;
    min-height: 32px;
    padding: 6px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .esri-feature.esri-widget {
    background-color: transparent;
  }
`;
class FeatureInfo extends jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.PureComponent {
    constructor(props) {
        var _a, _b, _c, _d;
        super(props);
        this.toggleExpanded = (e) => {
            e.stopPropagation();
            this.setState({ showContent: !this.state.showContent });
        };
        const { togglable = false, expandByDefault } = this.props;
        const recordId = ((_b = (_a = this.props.graphic) === null || _a === void 0 ? void 0 : _a.attributes) === null || _b === void 0 ? void 0 : _b.OBJECTID) || ((_d = (_c = this.props.graphic) === null || _c === void 0 ? void 0 : _c.attributes) === null || _d === void 0 ? void 0 : _d.objectid) || 'unknown';
        const initialShowContent = !togglable || expandByDefault;
        debugLogger.log('EXPAND-COLLAPSE', {
            event: 'FeatureInfo-constructor',
            recordId,
            togglable,
            expandByDefault,
            initialShowContent,
            timestamp: Date.now()
        });
        this.featureContainer = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.createRef();
        this.state = {
            showContent: initialShowContent,
            loadStatus: LoadStatus.Pending
        };
    }
    componentDidMount() {
        this.createFeature();
    }
    componentDidUpdate(prevProps) {
        var _a, _b, _c, _d, _e, _f, _g, _h;
        if (this.feature) {
            if (prevProps.popupTemplate !== this.props.popupTemplate ||
                prevProps.defaultPopupTemplate !== this.props.defaultPopupTemplate ||
                prevProps.graphic !== this.props.graphic) {
                this.destroyFeature();
                this.createFeature();
            }
            else {
                this.feature.visibleElements = this.getVisibleElements();
            }
        }
        // Sync expandByDefault prop changes (when user clicks Expand All/Collapse All)
        // This ensures all items respect the global expand/collapse state
        if (prevProps.expandByDefault !== this.props.expandByDefault) {
            const { togglable = false, expandByDefault } = this.props;
            const recordId = ((_b = (_a = this.props.graphic) === null || _a === void 0 ? void 0 : _a.attributes) === null || _b === void 0 ? void 0 : _b.OBJECTID) || ((_d = (_c = this.props.graphic) === null || _c === void 0 ? void 0 : _c.attributes) === null || _d === void 0 ? void 0 : _d.objectid) || 'unknown';
            debugLogger.log('EXPAND-COLLAPSE', {
                event: 'expandByDefault-prop-changed',
                recordId,
                prevExpandByDefault: prevProps.expandByDefault,
                newExpandByDefault: expandByDefault,
                togglable,
                currentShowContent: this.state.showContent,
                willUpdateState: togglable,
                timestamp: Date.now()
            });
            if (togglable) {
                this.setState({ showContent: expandByDefault }, () => {
                    debugLogger.log('EXPAND-COLLAPSE', {
                        event: 'FeatureInfo-state-updated',
                        recordId,
                        newShowContent: this.state.showContent,
                        timestamp: Date.now()
                    });
                });
            }
        }
        // Log all componentDidUpdate calls to track remounts
        const recordId = ((_f = (_e = this.props.graphic) === null || _e === void 0 ? void 0 : _e.attributes) === null || _f === void 0 ? void 0 : _f.OBJECTID) || ((_h = (_g = this.props.graphic) === null || _g === void 0 ? void 0 : _g.attributes) === null || _h === void 0 ? void 0 : _h.objectid) || 'unknown';
        if (prevProps.graphic !== this.props.graphic ||
            prevProps.popupTemplate !== this.props.popupTemplate ||
            prevProps.defaultPopupTemplate !== this.props.defaultPopupTemplate) {
            debugLogger.log('EXPAND-COLLAPSE', {
                event: 'FeatureInfo-props-changed-recreate',
                recordId,
                graphicChanged: prevProps.graphic !== this.props.graphic,
                popupTemplateChanged: prevProps.popupTemplate !== this.props.popupTemplate,
                defaultPopupTemplateChanged: prevProps.defaultPopupTemplate !== this.props.defaultPopupTemplate,
                expandByDefault: this.props.expandByDefault,
                currentShowContent: this.state.showContent,
                timestamp: Date.now()
            });
        }
    }
    destroyFeature() {
        this.feature && !this.feature.destroyed && this.feature.destroy();
    }
    getVisibleElements() {
        const { togglable = false } = this.props;
        const { showContent } = this.state;
        const expanded = togglable ? showContent : true;
        return {
            title: true,
            content: {
                fields: expanded,
                text: expanded,
                media: expanded,
                attachments: expanded
            },
            lastEditedInfo: false
        };
    }
    createFeature() {
        let featureModulePromise;
        if (this.Feature) {
            featureModulePromise = Promise.resolve();
        }
        else {
            featureModulePromise = (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.loadArcGISJSAPIModules)([
                'esri/widgets/Feature'
            ]).then(modules => {
                [
                    this.Feature
                ] = modules;
            });
        }
        return featureModulePromise.then(() => {
            var _a, _b, _c, _d;
            // Check if component is still mounted before trying to append
            // This prevents errors when component unmounts during async module loading
            if (!this.featureContainer.current) {
                // Component was unmounted, abort
                return;
            }
            const container = document && document.createElement('div');
            container.className = 'jimu-widget';
            this.featureContainer.current.appendChild(container);
            const originDS = this.props.dataSource.getOriginDataSources();
            const rootDataSource = (_a = originDS === null || originDS === void 0 ? void 0 : originDS[0]) === null || _a === void 0 ? void 0 : _a.getRootDataSource();
            this.destroyFeature();
            const layer = this.props.graphic.layer;
            if (this.props.popupTemplate) {
                this.props.graphic.popupTemplate = this.props.popupTemplate;
            }
            else if (layer) {
                // set popupTemplate with layer's popupTemplate or defaultPopupTemplate
                this.props.graphic.popupTemplate = (_b = layer.popupTemplate) !== null && _b !== void 0 ? _b : this.props.defaultPopupTemplate;
            }
            else {
                this.props.graphic.popupTemplate = this.props.defaultPopupTemplate;
            }
            if (layer && !layer.popupTemplate) {
                layer.popupTemplate = this.props.popupTemplate || this.props.defaultPopupTemplate;
            }
            this.feature = new this.Feature({
                container: container,
                defaultPopupTemplateEnabled: true,
                // @ts-expect-error
                spatialReference: ((_d = (_c = this.props.dataSource) === null || _c === void 0 ? void 0 : _c.layer) === null || _d === void 0 ? void 0 : _d.spatialReference) || null,
                // @ts-expect-error
                map: (rootDataSource === null || rootDataSource === void 0 ? void 0 : rootDataSource.map) || null,
                graphic: this.props.graphic,
                visibleElements: this.getVisibleElements()
            });
        }).then(() => {
            this.setState({ loadStatus: LoadStatus.Fulfilled });
        });
    }
    render() {
        const { togglable = false, intl } = this.props;
        const { showContent } = this.state;
        return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'feature-info-component d-flex align-items-center p-1', css: style, children: [togglable && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_3__.Button, { "aria-label": intl.formatMessage({ id: showContent ? 'collapse' : 'expand' }), className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-outline-inside flex-shrink-0', { expanded: showContent }), variant: 'text', color: 'inherit', icon: true, size: 'sm', onClick: this.toggleExpanded, css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              min-width: 32px;
              min-height: 32px;
              padding: 6px;
              display: flex;
              align-items: center;
              justify-content: center;
            `, children: showContent ? (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_filled_directional_down__WEBPACK_IMPORTED_MODULE_5__.DownFilled, { size: 'm' }) : (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_filled_directional_right__WEBPACK_IMPORTED_MODULE_4__.RightFilled, { size: 'm', autoFlip: true }) })), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'flex-grow-1', ref: this.featureContainer })] }));
    }
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.injectIntl)(FeatureInfo));


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/geometry-from-draw.tsx":
/*!*********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/geometry-from-draw.tsx ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GeometryFromDraw: () => (/* binding */ GeometryFromDraw)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _interactive_draw_tool__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./interactive-draw-tool */ "./your-extensions/widgets/query-simple/src/runtime/interactive-draw-tool.tsx");
/* harmony import */ var _buffer_input__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./buffer-input */ "./your-extensions/widgets/query-simple/src/runtime/buffer-input.tsx");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _query_task_context__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./query-task-context */ "./your-extensions/widgets/query-simple/src/runtime/query-task-context.tsx");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};

/** @jsx jsx */







function GeometryFromDraw(props) {
    const { onGeometryChange, createToolTypes, mapWidgetIds, enableBuffer, bufferDistance, bufferUnit, onBufferChange, widgetId } = props;
    const [jimuMapView, setJimuMapView] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(jimu_ui__WEBPACK_IMPORTED_MODULE_3__.defaultMessages, _translations_default__WEBPACK_IMPORTED_MODULE_6__["default"]);
    const queryTaskContext = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useContext(_query_task_context__WEBPACK_IMPORTED_MODULE_7__.QueryTaskContext);
    const resetSymbolRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(queryTaskContext.resetSymbol);
    const getLayerFunRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const bufferOperatorRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const geodesicBufferOperatorRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const geometryServiceRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const geometryRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const bufferDistanceRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(bufferDistance);
    const bufferUnitRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(bufferUnit);
    const bufferedGraphicRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        if (enableBuffer) {
            // Parent component query-task-spatial-form will reset buffer parameter when filter type changes,
            // so defer the init buffer option in order not to be override by its parent.
            jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.defer(() => {
                onBufferChange(bufferDistance, bufferUnit);
            });
        }
        (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.loadArcGISJSAPIModules)([
            'esri/Graphic'
        ]).then((modules) => {
            const Graphic = modules[0];
            bufferedGraphicRef.current = new Graphic({
                symbol: {
                    type: 'simple-fill',
                    color: [51, 51, 204, 0.5],
                    style: 'solid',
                    outline: {
                        color: [51, 51, 204, 0.8],
                        width: 1
                    }
                }
            });
        });
    });
    const applyBufferEffect = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => __awaiter(this, void 0, void 0, function* () {
        var _a, _b, _c, _d, _e, _f;
        if (!geometryRef.current || !enableBuffer || bufferDistanceRef.current === 0) {
            bufferedGraphicRef.current.geometry = null;
            return;
        }
        // If the end user uses a point or line query geometry, then the negative buffer will not work (same effect as there is no buffer)
        const isPointNegativeBuffer = (((_a = geometryRef.current) === null || _a === void 0 ? void 0 : _a.type) === 'point' || ((_b = geometryRef.current) === null || _b === void 0 ? void 0 : _b.type) === 'multipoint') && bufferDistanceRef.current < 0;
        const isLineNegativeBuffer = ((_c = geometryRef.current) === null || _c === void 0 ? void 0 : _c.type) === 'polyline' && bufferDistanceRef.current < 0;
        if (isPointNegativeBuffer || isLineNegativeBuffer) {
            bufferedGraphicRef.current.geometry = null;
            return;
        }
        const geometry = geometryRef.current;
        // https://developers.arcgis.com/javascript/latest/api-reference/esri-geometry-geometryEngine.html#buffer
        if (((_d = geometry.spatialReference) === null || _d === void 0 ? void 0 : _d.isGeographic) && !geometry.spatialReference.isWGS84) {
            const serviceUrl = jimu_core__WEBPACK_IMPORTED_MODULE_1__.utils.getGeometryService();
            if (!geometryServiceRef.current) {
                const modules = yield (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.loadArcGISJSAPIModules)([
                    'esri/rest/geometryService',
                    'esri/rest/support/BufferParameters'
                ]);
                geometryServiceRef.current = {
                    geometryService: modules[0],
                    bufferParameters: modules[1]
                };
            }
            const { geometryService, bufferParameters: BufferParameters } = geometryServiceRef.current;
            const polygons = yield geometryService.buffer(serviceUrl, new BufferParameters({
                distances: [bufferDistanceRef.current],
                unit: jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.kebabCase(bufferUnitRef.current),
                geodesic: true,
                bufferSpatialReference: geometry.spatialReference,
                outSpatialReference: geometry.spatialReference,
                geometries: [geometry]
            }));
            bufferedGraphicRef.current.geometry = polygons[0];
        }
        else {
            if (((_e = geometry.spatialReference) === null || _e === void 0 ? void 0 : _e.isWGS84) || ((_f = geometry.spatialReference) === null || _f === void 0 ? void 0 : _f.isWebMercator)) {
                if (!geodesicBufferOperatorRef.current) {
                    geodesicBufferOperatorRef.current = yield (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.loadArcGISJSAPIModule)('esri/geometry/operators/geodesicBufferOperator');
                }
                if (!geodesicBufferOperatorRef.current.isLoaded()) {
                    yield geodesicBufferOperatorRef.current.load();
                }
                bufferedGraphicRef.current.geometry = geodesicBufferOperatorRef.current.execute(geometry, bufferDistanceRef.current, {
                    unit: jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.kebabCase(bufferUnitRef.current)
                });
            }
            else {
                if (!bufferOperatorRef.current) {
                    bufferOperatorRef.current = yield (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.loadArcGISJSAPIModule)('esri/geometry/operators/bufferOperator');
                }
                bufferedGraphicRef.current.geometry = bufferOperatorRef.current.execute(geometry, bufferDistanceRef.current, {
                    unit: jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.kebabCase(bufferUnitRef.current)
                });
            }
        }
    }), [enableBuffer]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (queryTaskContext.resetSymbol && queryTaskContext.resetSymbol !== resetSymbolRef.current) {
            resetSymbolRef.current = queryTaskContext.resetSymbol;
            getLayerFunRef.current && getLayerFunRef.current().removeAll();
            onGeometryChange(null);
        }
    }, [queryTaskContext.resetSymbol, onGeometryChange]);
    const handleJimuMapViewChanged = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((jimuMapView) => {
        // clear drawing graphics before switching map view
        const layer = getLayerFunRef.current && getLayerFunRef.current();
        if (layer) {
            layer.removeAll();
            onGeometryChange(null);
        }
        setJimuMapView((jimuMapView === null || jimuMapView === void 0 ? void 0 : jimuMapView.view) != null ? jimuMapView : null);
    }, [onGeometryChange]);
    const handleBufferChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((distance, unit) => {
        bufferDistanceRef.current = distance;
        bufferUnitRef.current = unit;
        applyBufferEffect();
        onBufferChange(distance, unit);
    }, [onBufferChange, applyBufferEffect]);
    const handleDrawEnd = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((graphic, getLayerFun, clearAfterApply) => {
        getLayerFunRef.current = getLayerFun;
        const layer = getLayerFunRef.current && getLayerFunRef.current();
        // it's possible that the geometry is the same as the previous one, only the clearAfterApply is changed.
        if (geometryRef.current !== (graphic === null || graphic === void 0 ? void 0 : graphic.geometry)) {
            geometryRef.current = graphic === null || graphic === void 0 ? void 0 : graphic.geometry;
            applyBufferEffect().then(() => {
                if (bufferedGraphicRef.current.geometry) {
                    layer === null || layer === void 0 ? void 0 : layer.add(bufferedGraphicRef.current);
                }
            });
        }
        onGeometryChange(graphic === null || graphic === void 0 ? void 0 : graphic.geometry, layer, graphic, clearAfterApply);
    }, [onGeometryChange, applyBufferEffect]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [mapWidgetIds === null || mapWidgetIds === void 0 ? void 0 : mapWidgetIds.map((mapWidgetId, x) => ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.JimuMapViewComponent, { useMapWidgetId: mapWidgetId, onActiveViewChange: handleJimuMapViewChanged }, x))), (jimuMapView === null || jimuMapView === void 0 ? void 0 : jimuMapView.view) && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_interactive_draw_tool__WEBPACK_IMPORTED_MODULE_4__.InteractiveDraw, { jimuMapView: jimuMapView, widgetId: widgetId, toolTypes: createToolTypes, onDrawEnd: handleDrawEnd }), enableBuffer && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { role: 'group', className: 'title3', "aria-label": getI18nMessage('theBufferDistance'), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `margin-top: 0.75rem;`, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'text-truncate', children: getI18nMessage('theBufferDistance') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'd-flex mt-1', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_buffer_input__WEBPACK_IMPORTED_MODULE_5__.BufferInput, { distance: bufferDistance, unit: bufferUnit, onBufferChange: handleBufferChange }) })] }))] }))] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/geometry-from-ds.tsx":
/*!*******************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/geometry-from-ds.tsx ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GeometryFromDataSource: () => (/* binding */ GeometryFromDataSource)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _buffer_input__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./buffer-input */ "./your-extensions/widgets/query-simple/src/runtime/buffer-input.tsx");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _query_task_context__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./query-task-context */ "./your-extensions/widgets/query-simple/src/runtime/query-task-context.tsx");

/** @jsx jsx */






const marginStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `margin-top: 0.75rem;`;
function getRuntimeDataSource() {
    const result = {};
    let notEmpty = false;
    const dsMap = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().getDataSources();
    Object.keys(dsMap).forEach(dsId => {
        const ds = dsMap[dsId];
        // only include the ds that has geometry
        if (ds.getGeometryType() != null && !ds.isInAppConfig() && ds.getMainDataSource().id === dsId && !ds.getDataSourceJson().isOutputFromWidget) {
            result[dsId] = ds;
            notEmpty = true;
        }
    });
    return notEmpty ? result : null;
}
function GeometryFromDataSource(props) {
    var _a;
    const { onSelectionChange, useDataSources = [], useRuntimeData, spatialRelations, enableBuffer, bufferDistance, bufferUnit, onBufferChange, onRelationChange } = props;
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.defaultMessages, _translations_default__WEBPACK_IMPORTED_MODULE_5__["default"]);
    const [currentDataSource, setCurrentDataSource] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(useDataSources[0]);
    const [runtimeDataSource, setRuntimeDataSource] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState();
    const [count, setCount] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(0);
    const [currentRelation, setCurrentRelation] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(spatialRelations === null || spatialRelations === void 0 ? void 0 : spatialRelations[0]);
    const queryTaskContext = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useContext(_query_task_context__WEBPACK_IMPORTED_MODULE_6__.QueryTaskContext);
    const resetSymbolRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(queryTaskContext.resetSymbol);
    const translate = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation();
    const spatialRelationOptions = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return Object.entries(_config__WEBPACK_IMPORTED_MODULE_3__.SpatialRelation).map(([key, value]) => ({
            value,
            label: getI18nMessage(`spatialRelation_${key}`)
        }));
    }, [getI18nMessage]);
    const loadedUseDataSources = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const loaded = [];
        useDataSources.forEach((item) => {
            var _a, _b;
            if (((_b = (_a = state.dataSourcesInfo) === null || _a === void 0 ? void 0 : _a[item.mainDataSourceId]) === null || _b === void 0 ? void 0 : _b.instanceStatus) === jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.Created) {
                loaded.push(item.dataSourceId);
            }
        });
        if (loaded.length > 0) {
            return loaded.join(',');
        }
        return '';
    });
    const numOfDs = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        var _a;
        if (!useRuntimeData) {
            return 0;
        }
        return Object.keys((_a = state.dataSourcesInfo) !== null && _a !== void 0 ? _a : {}).filter(dsId => state.dataSourcesInfo[dsId].instanceStatus === jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.Created).length;
    });
    const runtimeDataSources = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        if (numOfDs > 0) {
            return getRuntimeDataSource();
        }
    }, [numOfDs]);
    const numOfRuntimeDs = Object.keys(runtimeDataSources !== null && runtimeDataSources !== void 0 ? runtimeDataSources : {}).length;
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        if ((spatialRelations === null || spatialRelations === void 0 ? void 0 : spatialRelations.length) > 0) {
            onRelationChange(spatialRelations[0]);
        }
        if (enableBuffer) {
            onBufferChange(bufferDistance, bufferUnit);
        }
    });
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (queryTaskContext.resetSymbol && queryTaskContext.resetSymbol !== resetSymbolRef.current) {
            resetSymbolRef.current = queryTaskContext.resetSymbol;
            setCurrentRelation(spatialRelations === null || spatialRelations === void 0 ? void 0 : spatialRelations[0]);
            onRelationChange(spatialRelations === null || spatialRelations === void 0 ? void 0 : spatialRelations[0]);
        }
    }, [queryTaskContext.resetSymbol, onRelationChange, spatialRelations]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (!spatialRelations) {
            setCurrentRelation(null);
        }
        else if (!spatialRelations.includes(currentRelation)) {
            setCurrentRelation(spatialRelations[0]);
            onRelationChange(spatialRelations[0]);
        }
    }, [spatialRelations, currentRelation, onRelationChange]);
    const handleDataSourceChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((dsId) => {
        const ds = useDataSources.find((item) => item.dataSourceId === dsId);
        setCurrentDataSource((0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)(ds));
        setRuntimeDataSource(null);
    }, [useDataSources]);
    const handleRuntimeDataSourceChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((dsId) => {
        const ds = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().getDataSource(dsId);
        setRuntimeDataSource(ds);
        setCurrentDataSource(null);
    }, []);
    const handleDataSourceInfoChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        var _a;
        const ds = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().getDataSource((_a = currentDataSource === null || currentDataSource === void 0 ? void 0 : currentDataSource.dataSourceId) !== null && _a !== void 0 ? _a : runtimeDataSource === null || runtimeDataSource === void 0 ? void 0 : runtimeDataSource.id);
        const records = ds === null || ds === void 0 ? void 0 : ds.getSelectedRecords();
        if ((records === null || records === void 0 ? void 0 : records.length) > 0) {
            const geometries = records.map((record) => record.getJSAPIGeometry());
            onSelectionChange(geometries);
            setCount(records.length);
        }
        else {
            onSelectionChange(null);
            setCount(0);
        }
    }, [currentDataSource === null || currentDataSource === void 0 ? void 0 : currentDataSource.dataSourceId, runtimeDataSource === null || runtimeDataSource === void 0 ? void 0 : runtimeDataSource.id, onSelectionChange]);
    const getLabelOfSpatialRelation = (relation) => {
        return spatialRelationOptions.find(item => item.value === relation).label;
    };
    const handleSpatialRelationChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(e => {
        setCurrentRelation(e.target.value);
        onRelationChange(e.target.value);
    }, [onRelationChange]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: marginStyle, className: 'title3', children: getI18nMessage('chooseFilterLayer') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Select, { "aria-label": getI18nMessage('chooseFilterLayer'), value: (_a = currentDataSource === null || currentDataSource === void 0 ? void 0 : currentDataSource.dataSourceId) !== null && _a !== void 0 ? _a : runtimeDataSource === null || runtimeDataSource === void 0 ? void 0 : runtimeDataSource.id, children: [numOfRuntimeDs > 0 && useDataSources.length > 0 && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Option, { header: true, children: getI18nMessage('preconfigured') }), useDataSources.map((item) => {
                        const ds = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().getDataSource(item.dataSourceId);
                        if (loadedUseDataSources.includes(item.dataSourceId) || (ds === null || ds === void 0 ? void 0 : ds.getLabel())) {
                            return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Option, { value: item.dataSourceId, onClick: () => { handleDataSourceChange(item.dataSourceId); }, children: ds === null || ds === void 0 ? void 0 : ds.getLabel() }, item.dataSourceId));
                        }
                        return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Option, { children: translate('loading') }, item.dataSourceId));
                    }), numOfRuntimeDs > 0 && useDataSources.length > 0 && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Option, { divider: true }), numOfRuntimeDs > 0 && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Option, { header: true, children: getI18nMessage('runtime') }), Object.keys(runtimeDataSources !== null && runtimeDataSources !== void 0 ? runtimeDataSources : {}).map(dsId => {
                        const ds = runtimeDataSources[dsId];
                        return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Option, { value: dsId, onClick: () => { handleRuntimeDataSourceChange(dsId); }, children: ds.getLabel() }, dsId));
                    })] }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'mt-1 font-italic', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `color: var(--sys-color-surface-paper-hint);`, children: getI18nMessage('selectedRecords', { num: count }) }), (spatialRelations === null || spatialRelations === void 0 ? void 0 : spatialRelations.length) > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: marginStyle, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'text-truncate title3 mb-0', children: getI18nMessage('relationship') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Select, { "aria-label": getI18nMessage('relationship'), value: currentRelation, onChange: handleSpatialRelationChange, children: spatialRelations.map((item) => {
                            return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: item, children: getLabelOfSpatialRelation(item) }, item));
                        }) })] })), enableBuffer && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { role: 'group', "aria-label": getI18nMessage('theBufferDistance'), css: marginStyle, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'title3 text-truncate', children: getI18nMessage('theBufferDistance') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'd-flex mt-1', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_buffer_input__WEBPACK_IMPORTED_MODULE_4__.BufferInput, { distance: bufferDistance, unit: bufferUnit, onBufferChange: onBufferChange }) })] })), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceComponent, { useDataSource: currentDataSource, dataSource: runtimeDataSource, onDataSourceInfoChange: handleDataSourceInfoChange }), useDataSources.map((item) => {
                // make sure the datasource is created
                return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceComponent, { useDataSource: item }, item.dataSourceId));
            })] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/geometry-from-map.tsx":
/*!********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/geometry-from-map.tsx ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GeometryFromMap: () => (/* binding */ GeometryFromMap)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");

/** @jsx jsx */


function GeometryFromMap(props) {
    const { onGeometryChange, mapWidgetIds } = props;
    const [jimuMapView, setJimuMapView] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const PolygonRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (jimuMapView === null || jimuMapView === void 0 ? void 0 : jimuMapView.view) {
            let handler;
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.loadArcGISJSAPIModule)('esri/core/reactiveUtils').then((reactiveUtils) => {
                handler = reactiveUtils.watch(() => jimuMapView.view.extent, (extent) => {
                    if (PolygonRef.current) {
                        onGeometryChange(PolygonRef.current.fromExtent(extent));
                    }
                    else {
                        (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.loadArcGISJSAPIModules)(['esri/geometry/Polygon']).then(modules => {
                            PolygonRef.current = modules[0];
                            onGeometryChange(PolygonRef.current.fromExtent(extent));
                        });
                    }
                });
                // set initial extent
                onGeometryChange(jimuMapView.view.extent);
            });
            return () => {
                if (handler) {
                    handler.remove();
                }
            };
        }
    }, [jimuMapView, onGeometryChange]);
    const handleJimuMapViewChanged = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((jimuMapView) => {
        setJimuMapView((jimuMapView === null || jimuMapView === void 0 ? void 0 : jimuMapView.view) != null ? jimuMapView : null);
    }, []);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: mapWidgetIds === null || mapWidgetIds === void 0 ? void 0 : mapWidgetIds.map((mapWidgetId, x) => ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.JimuMapViewComponent, { useMapWidgetId: mapWidgetId, onActiveViewChange: handleJimuMapViewChanged }, x))) }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/graphics-layer-utils.ts":
/*!**********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/graphics-layer-utils.ts ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   addHighlightGraphics: () => (/* binding */ addHighlightGraphics),
/* harmony export */   cleanupGraphicsLayer: () => (/* binding */ cleanupGraphicsLayer),
/* harmony export */   clearGraphicsLayer: () => (/* binding */ clearGraphicsLayer),
/* harmony export */   createOrGetGraphicsLayer: () => (/* binding */ createOrGetGraphicsLayer),
/* harmony export */   getMapViewFromDataSource: () => (/* binding */ getMapViewFromDataSource),
/* harmony export */   removeHighlightGraphics: () => (/* binding */ removeHighlightGraphics)
/* harmony export */ });
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/**
 * Utility functions for managing graphics layer highlighting in QuerySimple widget.
 * Provides highlighting that works independently of layer visibility.
 */
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};


const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__.createQuerySimpleDebugLogger)();
// Global sequence counter for graphics operations to track timing across calls
let operationSequence = 0;
/**
 * Gets the map view from a data source's origin layer.
 * Accesses the view through the FeatureLayer's view property.
 * @param outputDS - The output data source (or any data source)
 * @returns Promise resolving to MapView or SceneView, or null if not available
 */
function getMapViewFromDataSource(outputDS) {
    return __awaiter(this, void 0, void 0, function* () {
        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s;
        const seq = ++operationSequence;
        if (!outputDS) {
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'getMapViewFromDataSource-no-outputDS',
                seq,
                timestamp: Date.now()
            });
            return null;
        }
        try {
            // Get origin data source to access the layer
            const originDataSources = outputDS.getOriginDataSources();
            const originDS = originDataSources === null || originDataSources === void 0 ? void 0 : originDataSources[0];
            if (!originDS) {
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'getMapViewFromDataSource-no-originDS',
                    outputDSId: outputDS.id,
                    timestamp: Date.now()
                });
                return null;
            }
            // Access the FeatureLayer from the data source
            const layer = originDS.layer || ((_b = (_a = originDS).getLayer) === null || _b === void 0 ? void 0 : _b.call(_a));
            if (!layer) {
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'getMapViewFromDataSource-no-layer',
                    originDSId: originDS.id,
                    timestamp: Date.now()
                });
                return null;
            }
            // Log layer properties to understand structure
            const layerKeys = Object.keys(layer).filter(key => !key.startsWith('_') &&
                typeof layer[key] !== 'function').slice(0, 20); // Limit to first 20 properties
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'getMapViewFromDataSource-layer-inspection',
                originDSId: originDS.id,
                layerId: layer.id,
                layerType: layer.type || 'unknown',
                layerKeys: layerKeys,
                hasLayerMap: !!layer.map,
                hasLayerView: !!layer.view,
                hasLayerParent: !!layer.parent,
                layerMapType: layer.map ? typeof layer.map : 'none',
                timestamp: Date.now()
            });
            // Check layer.parent for map/view access (since hasLayerParent is true)
            const parent = layer.parent;
            if (parent) {
                // Log parent properties
                const parentKeys = Object.keys(parent).filter(key => !key.startsWith('_') &&
                    typeof parent[key] !== 'function').slice(0, 20);
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'getMapViewFromDataSource-layer-parent-inspection',
                    originDSId: originDS.id,
                    layerId: layer.id,
                    parentType: parent.type || 'unknown',
                    parentKeys: parentKeys,
                    hasParentMap: !!parent.map,
                    hasParentView: !!parent.view,
                    hasParentViews: !!parent.views,
                    parentViewsLength: ((_c = parent.views) === null || _c === void 0 ? void 0 : _c.length) || 0,
                    hasParentExtent: !!parent.extent,
                    timestamp: Date.now()
                });
                // Try to get view from parent
                if (parent.view) {
                    const view = parent.view;
                    debugLogger.log('GRAPHICS-LAYER', {
                        event: 'getMapViewFromDataSource-success-via-layer-parent-view',
                        originDSId: originDS.id,
                        layerId: layer.id,
                        viewType: view.type || 'unknown',
                        timestamp: Date.now()
                    });
                    return view;
                }
                // Try to get map from parent and then view
                const parentMap = parent.map;
                if (parentMap) {
                    const view = parentMap.view ||
                        ((_e = (_d = parentMap.views) === null || _d === void 0 ? void 0 : _d.getItemAt) === null || _e === void 0 ? void 0 : _e.call(_d, 0)) ||
                        (((_f = parentMap.views) === null || _f === void 0 ? void 0 : _f.length) > 0 ? parentMap.views[0] : null);
                    if (view) {
                        debugLogger.log('GRAPHICS-LAYER', {
                            event: 'getMapViewFromDataSource-success-via-layer-parent-map',
                            originDSId: originDS.id,
                            layerId: layer.id,
                            viewType: view.type || 'unknown',
                            timestamp: Date.now()
                        });
                        return view;
                    }
                }
                // Parent might BE the view (check if it has view-like properties)
                if (parent.type === 'map' || parent.type === 'scene' || parent.extent) {
                    debugLogger.log('GRAPHICS-LAYER', {
                        event: 'getMapViewFromDataSource-success-via-layer-parent-is-view',
                        originDSId: originDS.id,
                        layerId: layer.id,
                        viewType: parent.type || 'unknown',
                        timestamp: Date.now()
                    });
                    return parent;
                }
            }
            // Try multiple approaches to get the view:
            // 1. Layer might have a direct view property
            if (layer.view) {
                const view = layer.view;
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'getMapViewFromDataSource-success-via-layer-view',
                    originDSId: originDS.id,
                    layerId: layer.id,
                    viewType: view.type || 'unknown',
                    timestamp: Date.now()
                });
                return view;
            }
            // 2. Try to get map from layer and then view from map
            const map = layer.map ||
                ((_g = layer.parent) === null || _g === void 0 ? void 0 : _g.map) ||
                layer.__map ||
                layer._map;
            if (map) {
                // Log map properties
                const mapKeys = Object.keys(map).filter(key => !key.startsWith('_') &&
                    typeof map[key] !== 'function').slice(0, 20);
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'getMapViewFromDataSource-map-found',
                    originDSId: originDS.id,
                    layerId: layer.id,
                    mapId: map.id || 'unknown',
                    mapKeys: mapKeys,
                    hasMapView: !!map.view,
                    hasMapViews: !!(map.views),
                    mapViewsLength: ((_h = map.views) === null || _h === void 0 ? void 0 : _h.length) || 0,
                    timestamp: Date.now()
                });
                const view = map.view ||
                    ((_k = (_j = map.views) === null || _j === void 0 ? void 0 : _j.getItemAt) === null || _k === void 0 ? void 0 : _k.call(_j, 0)) ||
                    (((_l = map.views) === null || _l === void 0 ? void 0 : _l.length) > 0 ? map.views[0] : null) ||
                    (map.views && map.views.length > 0 ? map.views.getItemAt(0) : null);
                if (view) {
                    debugLogger.log('GRAPHICS-LAYER', {
                        event: 'getMapViewFromDataSource-success-via-layer-map',
                        originDSId: originDS.id,
                        layerId: layer.id,
                        viewType: view.type || 'unknown',
                        timestamp: Date.now()
                    });
                    return view;
                }
            }
            // 3. Try to get root data source and access map from there
            const rootDS = originDS.getRootDataSource();
            if (rootDS) {
                const rootMap = ((_o = (_m = rootDS).getMap) === null || _o === void 0 ? void 0 : _o.call(_m)) ||
                    rootDS.map ||
                    rootDS.__map ||
                    rootDS._map;
                if (rootMap) {
                    // Log root map properties
                    const rootMapKeys = Object.keys(rootMap).filter(key => !key.startsWith('_') &&
                        typeof rootMap[key] !== 'function').slice(0, 20);
                    debugLogger.log('GRAPHICS-LAYER', {
                        event: 'getMapViewFromDataSource-root-map-found',
                        originDSId: originDS.id,
                        rootDSId: rootDS.id,
                        rootDSType: rootDS.type,
                        rootMapId: rootMap.id || 'unknown',
                        rootMapKeys: rootMapKeys,
                        hasRootMapView: !!rootMap.view,
                        hasRootMapViews: !!(rootMap.views),
                        rootMapViewsLength: ((_p = rootMap.views) === null || _p === void 0 ? void 0 : _p.length) || 0,
                        timestamp: Date.now()
                    });
                    const view = rootMap.view ||
                        ((_r = (_q = rootMap.views) === null || _q === void 0 ? void 0 : _q.getItemAt) === null || _r === void 0 ? void 0 : _r.call(_q, 0)) ||
                        (((_s = rootMap.views) === null || _s === void 0 ? void 0 : _s.length) > 0 ? rootMap.views[0] : null) ||
                        (rootMap.views && rootMap.views.length > 0 ? rootMap.views.getItemAt(0) : null);
                    if (view) {
                        debugLogger.log('GRAPHICS-LAYER', {
                            event: 'getMapViewFromDataSource-success-via-rootDS',
                            originDSId: originDS.id,
                            rootDSId: rootDS.id,
                            viewType: view.type || 'unknown',
                            timestamp: Date.now()
                        });
                        return view;
                    }
                }
                else {
                    // Log root DS properties to see what's available
                    const rootDSKeys = Object.keys(rootDS).filter(key => !key.startsWith('_') &&
                        typeof rootDS[key] !== 'function').slice(0, 20);
                    debugLogger.log('GRAPHICS-LAYER', {
                        event: 'getMapViewFromDataSource-root-ds-inspection',
                        originDSId: originDS.id,
                        rootDSId: rootDS.id,
                        rootDSType: rootDS.type,
                        rootDSKeys: rootDSKeys,
                        hasGetMap: typeof rootDS.getMap === 'function',
                        hasMap: !!rootDS.map,
                        timestamp: Date.now()
                    });
                }
            }
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'getMapViewFromDataSource-no-view',
                originDSId: originDS.id,
                layerId: layer.id,
                hasLayerMap: !!map,
                hasRootDS: !!rootDS,
                timestamp: Date.now()
            });
            return null;
        }
        catch (error) {
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'getMapViewFromDataSource-error',
                error: error instanceof Error ? error.message : String(error),
                errorStack: error instanceof Error ? error.stack : undefined,
                timestamp: Date.now()
            });
            return null;
        }
    });
}
/**
 * Gets the default highlight symbol based on geometry type.
 * Uses the map's actual highlight color from highlightOptions to match standard selection appearance.
 */
function getDefaultHighlightSymbol(geometryType, mapView) {
    // Get default highlight color from view's highlightOptions
    const highlightOptions = (mapView.highlightOptions || {});
    // Extract color - could be array [R,G,B,A] or Color object
    let highlightColor = null;
    if (highlightOptions.color) {
        // If it's a Color object, convert to array
        if (typeof highlightOptions.color === 'object' && 'toRgba' in highlightOptions.color) {
            highlightColor = highlightOptions.color.toRgba();
        }
        // If it's already an array
        else if (Array.isArray(highlightOptions.color)) {
            highlightColor = highlightOptions.color;
        }
    }
    // If no color in highlightOptions, use the ArcGIS documented default: cyan [0, 255, 255]
    if (!highlightColor) {
        highlightColor = [0, 255, 255, 1.0]; // Full opacity default
    }
    // Ensure we have 4 elements [R, G, B, A]
    const baseColor = highlightColor.slice(0, 3);
    const baseAlpha = highlightColor.length >= 4 ? highlightColor[3] : 1.0;
    // Get fill opacity from highlightOptions or use default
    const fillOpacity = highlightOptions.fillOpacity !== undefined
        ? highlightOptions.fillOpacity
        : 0.25; // Default 25% opacity for fill
    const fillColor = [...baseColor, fillOpacity];
    // Get halo opacity or use default - for outlines and lines
    const haloOpacity = highlightOptions.haloOpacity !== undefined
        ? highlightOptions.haloOpacity
        : baseAlpha; // Use the color's alpha if available, otherwise 1.0
    const outlineColor = [...baseColor, haloOpacity];
    // For lines, use full opacity to ensure visibility
    const lineOpacity = highlightOptions.haloOpacity !== undefined
        ? Math.max(highlightOptions.haloOpacity, 0.8) // At least 80% opacity
        : baseAlpha; // Use the color's alpha, or default to 1.0
    const lineColor = [...baseColor, lineOpacity];
    switch (geometryType) {
        case 'point':
        case 'multipoint':
            return {
                type: 'simple-marker',
                color: outlineColor,
                outline: {
                    color: outlineColor,
                    width: 2
                },
                size: 12
            };
        case 'polyline':
            return {
                type: 'simple-line',
                color: lineColor, // Use lineColor with proper opacity
                width: 4 // Increased width for visibility
            };
        case 'polygon':
        case 'multipolygon':
            return {
                type: 'simple-fill',
                color: fillColor,
                outline: {
                    color: outlineColor,
                    width: 2
                }
            };
        default:
            // Fallback to polygon symbol
            return {
                type: 'simple-fill',
                color: fillColor,
                outline: {
                    color: outlineColor,
                    width: 2
                }
            };
    }
}
/**
 * Creates or gets an existing graphics layer for the widget.
 * Uses a unique ID based on widget ID to ensure one layer per widget.
 */
function createOrGetGraphicsLayer(widgetId, mapView) {
    return __awaiter(this, void 0, void 0, function* () {
        const seq = ++operationSequence;
        const layerId = `querysimple-highlight-${widgetId}`;
        try {
            // Check if layer already exists
            const existingLayer = mapView.map.layers.find(layer => layer.id === layerId);
            if (existingLayer) {
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'createOrGetGraphicsLayer-found-existing',
                    seq,
                    widgetId,
                    layerId,
                    timestamp: Date.now()
                });
                return existingLayer;
            }
            // Load GraphicsLayer module
            const [GraphicsLayer] = yield (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_0__.loadArcGISJSAPIModules)(['esri/layers/GraphicsLayer']);
            // Create new graphics layer
            const graphicsLayer = new GraphicsLayer({
                id: layerId,
                title: `QuerySimple Highlights (${widgetId})`,
                listMode: 'hide', // Hide from layer list
                visible: true
            });
            // Add to map
            mapView.map.add(graphicsLayer);
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'createOrGetGraphicsLayer-created',
                seq,
                widgetId,
                layerId,
                timestamp: Date.now()
            });
            return graphicsLayer;
        }
        catch (error) {
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'createOrGetGraphicsLayer-error',
                seq,
                widgetId,
                layerId,
                error: error instanceof Error ? error.message : String(error),
                errorStack: error instanceof Error ? error.stack : undefined,
                timestamp: Date.now()
            });
            return null;
        }
    });
}
/**
 * Adds highlight graphics to the graphics layer using default map highlight color.
 * Note: This function should be called after GraphicsLayer module is loaded.
 */
function addHighlightGraphics(graphicsLayer, records, mapView) {
    return __awaiter(this, void 0, void 0, function* () {
        const seq = ++operationSequence;
        if (!graphicsLayer || !records || records.length === 0) {
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'addHighlightGraphics-skipped',
                seq,
                reason: !graphicsLayer ? 'no-graphics-layer' : 'no-records',
                recordsCount: (records === null || records === void 0 ? void 0 : records.length) || 0,
                timestamp: Date.now()
            });
            return;
        }
        // Log existing state BEFORE adding - verify assumption about duplicates
        const existingGraphicsCount = graphicsLayer.graphics.length;
        const existingRecordIds = [];
        const existingRecordIdSet = new Set();
        graphicsLayer.graphics.forEach(graphic => {
            var _a;
            const recordId = (_a = graphic.attributes) === null || _a === void 0 ? void 0 : _a.recordId;
            if (recordId) {
                existingRecordIds.push(recordId);
                existingRecordIdSet.add(recordId);
            }
        });
        // Log what we're trying to add
        const incomingRecordIds = records.map(r => r.getId());
        debugLogger.log('GRAPHICS-LAYER', {
            event: 'addHighlightGraphics-before-add',
            seq,
            graphicsLayerId: graphicsLayer.id,
            existingGraphicsCount,
            existingRecordIds: existingRecordIds.slice(0, 20), // Limit to first 20 for readability
            existingRecordIdsCount: existingRecordIds.length,
            incomingRecordIds: incomingRecordIds.slice(0, 20), // Limit to first 20
            incomingRecordIdsCount: incomingRecordIds.length,
            duplicateRecordIds: incomingRecordIds.filter(id => existingRecordIdSet.has(id)).slice(0, 20),
            duplicateCount: incomingRecordIds.filter(id => existingRecordIdSet.has(id)).length,
            timestamp: Date.now()
        });
        // Load Graphic module
        const [Graphic] = yield (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_0__.loadArcGISJSAPIModules)(['esri/Graphic']);
        let addedCount = 0;
        let skippedCount = 0;
        let duplicateCount = 0;
        const addedRecordIds = [];
        const skippedRecordIds = [];
        const duplicateRecordIds = [];
        records.forEach(record => {
            try {
                const recordId = record.getId();
                // Check if this record ID already exists in graphics layer
                if (existingRecordIdSet.has(recordId)) {
                    duplicateCount++;
                    duplicateRecordIds.push(recordId);
                    debugLogger.log('GRAPHICS-LAYER', {
                        event: 'addHighlightGraphics-duplicate-detected',
                        seq,
                        recordId,
                        graphicsLayerId: graphicsLayer.id,
                        timestamp: Date.now()
                    });
                    return; // Skip adding duplicate
                }
                const graphic = record.feature;
                if (!graphic || !graphic.geometry) {
                    skippedCount++;
                    skippedRecordIds.push(recordId);
                    return;
                }
                // Get geometry type from graphic
                const geometryType = graphic.geometry.type;
                // Create symbol using default highlight color
                const symbol = getDefaultHighlightSymbol(geometryType, mapView);
                // Create new graphic with highlight symbol
                const highlightGraphic = new Graphic({
                    geometry: graphic.geometry,
                    symbol: symbol,
                    attributes: {
                        recordId: recordId,
                        source: 'querysimple-highlight',
                        widgetId: graphicsLayer.id.replace('querysimple-highlight-', '')
                    }
                });
                graphicsLayer.add(highlightGraphic);
                addedCount++;
                addedRecordIds.push(recordId);
                // Add to tracking set to prevent duplicates within this batch
                existingRecordIdSet.add(recordId);
            }
            catch (error) {
                skippedCount++;
                skippedRecordIds.push(record.getId());
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'addHighlightGraphics-record-error',
                    seq,
                    recordId: record.getId(),
                    error: error instanceof Error ? error.message : String(error),
                    timestamp: Date.now()
                });
            }
        });
        // Log final state AFTER adding
        const finalGraphicsCount = graphicsLayer.graphics.length;
        const finalRecordIds = [];
        graphicsLayer.graphics.forEach(graphic => {
            var _a;
            const recordId = (_a = graphic.attributes) === null || _a === void 0 ? void 0 : _a.recordId;
            if (recordId) {
                finalRecordIds.push(recordId);
            }
        });
        debugLogger.log('GRAPHICS-LAYER', {
            event: 'addHighlightGraphics-complete',
            seq,
            graphicsLayerId: graphicsLayer.id,
            recordsCount: records.length,
            addedCount,
            skippedCount,
            duplicateCount,
            addedRecordIds: addedRecordIds.slice(0, 20), // Limit to first 20
            skippedRecordIds: skippedRecordIds.slice(0, 20),
            duplicateRecordIds: duplicateRecordIds.slice(0, 20),
            existingGraphicsCount,
            finalGraphicsCount,
            expectedFinalCount: existingGraphicsCount + addedCount,
            finalRecordIds: finalRecordIds.slice(0, 20), // Limit to first 20
            finalRecordIdsCount: finalRecordIds.length,
            timestamp: Date.now()
        });
    });
}
/**
 * Removes highlight graphics from the graphics layer by record IDs.
 */
function removeHighlightGraphics(graphicsLayer, recordIds) {
    const seq = ++operationSequence;
    if (!graphicsLayer || !recordIds || recordIds.length === 0) {
        debugLogger.log('GRAPHICS-LAYER', {
            event: 'removeHighlightGraphics-skipped',
            seq,
            reason: !graphicsLayer ? 'no-graphics-layer' : 'no-record-ids',
            recordIdsCount: (recordIds === null || recordIds === void 0 ? void 0 : recordIds.length) || 0,
            timestamp: Date.now()
        });
        return;
    }
    const recordIdSet = new Set(recordIds);
    let removedCount = 0;
    // Find and remove graphics matching record IDs
    const graphicsToRemove = [];
    graphicsLayer.graphics.forEach(graphic => {
        var _a;
        const recordId = (_a = graphic.attributes) === null || _a === void 0 ? void 0 : _a.recordId;
        if (recordId && recordIdSet.has(recordId)) {
            graphicsToRemove.push(graphic);
        }
    });
    graphicsToRemove.forEach(graphic => {
        graphicsLayer.remove(graphic);
        removedCount++;
    });
    debugLogger.log('GRAPHICS-LAYER', {
        event: 'removeHighlightGraphics-complete',
        seq,
        graphicsLayerId: graphicsLayer.id,
        recordIdsCount: recordIds.length,
        removedCount,
        timestamp: Date.now()
    });
}
/**
 * Clears all highlight graphics from the graphics layer.
 */
function clearGraphicsLayer(graphicsLayer) {
    const seq = ++operationSequence;
    if (!graphicsLayer) {
        debugLogger.log('GRAPHICS-LAYER', {
            event: 'clearGraphicsLayer-skipped',
            seq,
            reason: 'no-graphics-layer',
            timestamp: Date.now()
        });
        return;
    }
    const graphicsCount = graphicsLayer.graphics.length;
    graphicsLayer.removeAll();
    debugLogger.log('GRAPHICS-LAYER', {
        event: 'clearGraphicsLayer-complete',
        seq,
        graphicsLayerId: graphicsLayer.id,
        graphicsRemoved: graphicsCount,
        timestamp: Date.now()
    });
}
/**
 * Removes the graphics layer from the map and cleans up references.
 */
function cleanupGraphicsLayer(widgetId, mapView) {
    const seq = ++operationSequence;
    const layerId = `querysimple-highlight-${widgetId}`;
    try {
        const graphicsLayer = mapView.map.layers.find(layer => layer.id === layerId);
        if (graphicsLayer) {
            // Clear all graphics first
            graphicsLayer.removeAll();
            // Remove layer from map
            mapView.map.remove(graphicsLayer);
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'cleanupGraphicsLayer-complete',
                seq,
                widgetId,
                layerId,
                timestamp: Date.now()
            });
        }
        else {
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'cleanupGraphicsLayer-not-found',
                seq,
                widgetId,
                layerId,
                timestamp: Date.now()
            });
        }
    }
    catch (error) {
        debugLogger.log('GRAPHICS-LAYER', {
            event: 'cleanupGraphicsLayer-error',
            seq,
            widgetId,
            layerId,
            error: error instanceof Error ? error.message : String(error),
            errorStack: error instanceof Error ? error.stack : undefined,
            timestamp: Date.now()
        });
    }
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-accumulated-records.ts":
/*!*******************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/hooks/use-accumulated-records.ts ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AccumulatedRecordsManager: () => (/* binding */ AccumulatedRecordsManager)
/* harmony export */ });
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");


const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__.createQuerySimpleDebugLogger)();
/**
 * Utility to manage accumulated records and results mode state.
 *
 * Centralizes accumulated records management logic for the widget.
 * Handles results mode changes, accumulated records updates, and mode reset logic.
 *
 * Part of Chunk 5: Accumulated Records Management extraction.
 *
 * Note: This is a utility class (not a hook) to work with class components.
 */
class AccumulatedRecordsManager {
    constructor() {
        this.resultsMode = _config__WEBPACK_IMPORTED_MODULE_0__.SelectionType.NewSelection;
        this.accumulatedRecords = [];
    }
    /**
     * Sets callbacks for mode change and accumulated records change events.
     *
     * @param callbacks - Callbacks for mode change and accumulated records change
     */
    setCallbacks(callbacks) {
        this.callbacks = callbacks;
    }
    /**
     * Gets the current results mode.
     *
     * @returns Current results mode
     */
    getResultsMode() {
        return this.resultsMode;
    }
    /**
     * Gets the current accumulated records.
     *
     * @returns Current accumulated records array
     */
    getAccumulatedRecords() {
        return this.accumulatedRecords;
    }
    /**
     * Gets the count of accumulated records.
     *
     * @returns Number of accumulated records
     */
    getAccumulatedRecordsCount() {
        return this.accumulatedRecords.length;
    }
    /**
     * Checks if the widget is in accumulation mode (Add to or Remove from).
     *
     * @returns True if in accumulation mode, false otherwise
     */
    isAccumulationMode() {
        return this.resultsMode === _config__WEBPACK_IMPORTED_MODULE_0__.SelectionType.AddToSelection ||
            this.resultsMode === _config__WEBPACK_IMPORTED_MODULE_0__.SelectionType.RemoveFromSelection;
    }
    /**
     * Checks if there are accumulated records.
     *
     * @returns True if accumulated records exist, false otherwise
     */
    hasAccumulatedRecords() {
        return this.accumulatedRecords.length > 0;
    }
    /**
     * Handles results mode change.
     *
     * Updates the results mode and optionally clears accumulated records when switching
     * to "New" mode. Also handles hash parameter consumption when switching to accumulation modes.
     *
     * @param widgetId - Widget ID for logging
     * @param mode - New results mode
     * @param shouldConsumeHash - Whether to consume hash parameter (for deep linking)
     * @param hashShortId - Optional shortId to consume from hash
     * @param removeHashParameter - Optional callback to remove hash parameter
     */
    handleResultsModeChange(widgetId, mode, shouldConsumeHash = false, hashShortId, removeHashParameter) {
        var _a;
        const previousMode = this.resultsMode;
        const currentAccumulatedCount = this.accumulatedRecords.length;
        debugLogger.log('RESULTS-MODE', {
            event: 'handleResultsModeChange-triggered',
            widgetId,
            previousMode,
            newMode: mode,
            currentAccumulatedCount,
            timestamp: Date.now()
        });
        // Consume deep link when switching to accumulation modes
        if (shouldConsumeHash && (mode === _config__WEBPACK_IMPORTED_MODULE_0__.SelectionType.AddToSelection || mode === _config__WEBPACK_IMPORTED_MODULE_0__.SelectionType.RemoveFromSelection)) {
            if (hashShortId && removeHashParameter) {
                debugLogger.log('HASH', {
                    event: 'consuming-hash-on-mode-switch',
                    widgetId,
                    mode,
                    shortId: hashShortId
                });
                removeHashParameter(hashShortId);
            }
        }
        // If switching to "New" mode, clear accumulated records
        if (mode === _config__WEBPACK_IMPORTED_MODULE_0__.SelectionType.NewSelection) {
            debugLogger.log('RESULTS-MODE', {
                event: 'clearing-accumulated-records-on-mode-switch',
                widgetId,
                previousMode
            });
            this.resultsMode = mode;
            this.accumulatedRecords = [];
        }
        else {
            this.resultsMode = mode;
        }
        // Trigger callback
        if ((_a = this.callbacks) === null || _a === void 0 ? void 0 : _a.onModeChange) {
            this.callbacks.onModeChange(this.resultsMode);
        }
        return {
            resultsMode: this.resultsMode,
            accumulatedRecords: this.accumulatedRecords
        };
    }
    /**
     * Handles accumulated records change.
     *
     * Updates the accumulated records array.
     *
     * @param widgetId - Widget ID for logging
     * @param records - New accumulated records array
     */
    handleAccumulatedRecordsChange(widgetId, records) {
        var _a;
        const previousCount = this.accumulatedRecords.length;
        const newCount = records.length;
        debugLogger.log('RESULTS-MODE', {
            event: 'handleAccumulatedRecordsChange-triggered',
            widgetId,
            previousCount,
            newCount,
            timestamp: Date.now()
        });
        this.accumulatedRecords = records;
        // Trigger callback
        if ((_a = this.callbacks) === null || _a === void 0 ? void 0 : _a.onAccumulatedRecordsChange) {
            this.callbacks.onAccumulatedRecordsChange(this.accumulatedRecords);
        }
    }
    /**
     * Resets mode to "New Selection" and clears accumulated records.
     *
     * Called when hash parameters are detected to reset the widget to a clean state.
     *
     * @param widgetId - Widget ID for logging
     * @param currentMode - Current mode before reset
     */
    resetModeOnHashDetection(widgetId, currentMode) {
        if (currentMode !== _config__WEBPACK_IMPORTED_MODULE_0__.SelectionType.NewSelection) {
            debugLogger.log('HASH', {
                event: 'mode-reset-needed-on-hash-detection',
                widgetId,
                currentMode,
                timestamp: Date.now()
            });
            this.resultsMode = _config__WEBPACK_IMPORTED_MODULE_0__.SelectionType.NewSelection;
            this.accumulatedRecords = [];
        }
        return {
            resultsMode: this.resultsMode,
            accumulatedRecords: this.accumulatedRecords
        };
    }
    /**
     * Cleans up the manager.
     *
     * Resets state to initial values.
     */
    cleanup() {
        this.resultsMode = _config__WEBPACK_IMPORTED_MODULE_0__.SelectionType.NewSelection;
        this.accumulatedRecords = [];
        this.callbacks = undefined;
    }
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-event-handling.ts":
/*!**************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/hooks/use-event-handling.ts ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   EventManager: () => (/* binding */ EventManager),
/* harmony export */   OPEN_WIDGET_EVENT: () => (/* binding */ OPEN_WIDGET_EVENT),
/* harmony export */   QUERYSIMPLE_SELECTION_EVENT: () => (/* binding */ QUERYSIMPLE_SELECTION_EVENT),
/* harmony export */   RESTORE_ON_IDENTIFY_CLOSE_EVENT: () => (/* binding */ RESTORE_ON_IDENTIFY_CLOSE_EVENT)
/* harmony export */ });
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");

const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_0__.createQuerySimpleDebugLogger)();
/**
 * Event name constants for QuerySimple widget events.
 */
const QUERYSIMPLE_SELECTION_EVENT = 'querysimple-selection-changed';
const RESTORE_ON_IDENTIFY_CLOSE_EVENT = 'querysimple-restore-on-identify-close';
const OPEN_WIDGET_EVENT = 'helpersimple-open-widget';
/**
 * Utility to manage event listeners and custom event dispatching.
 *
 * Centralizes event handling logic for the widget, including:
 * - Event listener setup/cleanup
 * - Custom event dispatching
 * - Event handler registration
 *
 * Part of Chunk 7: Event Handling extraction.
 *
 * Note: This is a utility class (not a hook) to work with class components.
 */
class EventManager {
    constructor() {
        this.listenersSetup = false;
        /**
         * Bound event handler for OPEN_WIDGET_EVENT.
         */
        this.handleOpenWidgetEventBound = (event) => {
            var _a;
            if ((_a = this.handlers) === null || _a === void 0 ? void 0 : _a.onOpenWidgetEvent) {
                this.handlers.onOpenWidgetEvent(event);
            }
        };
        /**
         * Bound event handler for QUERYSIMPLE_SELECTION_EVENT.
         */
        this.handleSelectionChangeBound = (event) => {
            var _a;
            if ((_a = this.handlers) === null || _a === void 0 ? void 0 : _a.onSelectionChange) {
                this.handlers.onSelectionChange(event);
            }
        };
        /**
         * Bound event handler for RESTORE_ON_IDENTIFY_CLOSE_EVENT.
         */
        this.handleRestoreOnIdentifyCloseBound = (event) => {
            var _a;
            if ((_a = this.handlers) === null || _a === void 0 ? void 0 : _a.onRestoreOnIdentifyClose) {
                this.handlers.onRestoreOnIdentifyClose(event);
            }
        };
    }
    /**
     * Sets event handler callbacks.
     *
     * @param handlers - Event handler callbacks
     */
    setHandlers(handlers) {
        this.handlers = handlers;
    }
    /**
     * Sets up all event listeners.
     *
     * Registers listeners for:
     * - OPEN_WIDGET_EVENT: HelperSimple orchestration
     * - QUERYSIMPLE_SELECTION_EVENT: Selection changes from QueryTaskResult
     * - RESTORE_ON_IDENTIFY_CLOSE_EVENT: Restore selection after identify popup closes
     *
     * @param widgetId - Widget ID for logging
     */
    setup(widgetId) {
        if (this.listenersSetup) {
            debugLogger.log('EVENTS', {
                event: 'event-manager-setup-already-setup',
                widgetId,
                timestamp: Date.now()
            });
            return;
        }
        debugLogger.log('EVENTS', {
            event: 'event-manager-setup-start',
            widgetId,
            timestamp: Date.now()
        });
        // Listen for HelperSimple orchestration events
        window.addEventListener(OPEN_WIDGET_EVENT, this.handleOpenWidgetEventBound);
        // Listen for selection changes from query-result
        window.addEventListener(QUERYSIMPLE_SELECTION_EVENT, this.handleSelectionChangeBound);
        // Listen for restore requests when identify popup closes
        window.addEventListener(RESTORE_ON_IDENTIFY_CLOSE_EVENT, this.handleRestoreOnIdentifyCloseBound);
        this.listenersSetup = true;
        debugLogger.log('EVENTS', {
            event: 'event-manager-setup-complete',
            widgetId,
            listenersRegistered: 3,
            timestamp: Date.now()
        });
    }
    /**
     * Cleans up all event listeners.
     *
     * @param widgetId - Widget ID for logging
     */
    cleanup(widgetId) {
        if (!this.listenersSetup) {
            debugLogger.log('EVENTS', {
                event: 'event-manager-cleanup-not-setup',
                widgetId,
                timestamp: Date.now()
            });
            return;
        }
        debugLogger.log('EVENTS', {
            event: 'event-manager-cleanup-start',
            widgetId,
            timestamp: Date.now()
        });
        window.removeEventListener(OPEN_WIDGET_EVENT, this.handleOpenWidgetEventBound);
        window.removeEventListener(QUERYSIMPLE_SELECTION_EVENT, this.handleSelectionChangeBound);
        window.removeEventListener(RESTORE_ON_IDENTIFY_CLOSE_EVENT, this.handleRestoreOnIdentifyCloseBound);
        this.listenersSetup = false;
        this.handlers = undefined;
        debugLogger.log('EVENTS', {
            event: 'event-manager-cleanup-complete',
            widgetId,
            timestamp: Date.now()
        });
    }
    /**
     * Dispatches a custom event to notify HelperSimple of selection changes.
     *
     * @param widgetId - Widget ID
     * @param recordIds - Array of selected record IDs
     * @param dataSourceId - Optional data source ID
     * @param outputDsId - Output data source ID (required for lastSelection state)
     * @param queryItemConfigId - Query item config ID (required for lastSelection state)
     */
    dispatchSelectionEvent(widgetId, recordIds, dataSourceId, outputDsId, queryItemConfigId) {
        debugLogger.log('EVENTS', {
            event: 'event-manager-dispatch-selection-event',
            widgetId,
            recordIdsCount: recordIds.length,
            dataSourceId,
            outputDsId,
            queryItemConfigId,
            timestamp: Date.now()
        });
        const event = new CustomEvent(QUERYSIMPLE_SELECTION_EVENT, {
            detail: {
                widgetId,
                recordIds,
                dataSourceId,
                outputDsId,
                queryItemConfigId
            },
            bubbles: true,
            cancelable: true
        });
        window.dispatchEvent(event);
        debugLogger.log('EVENTS', {
            event: 'event-manager-selection-event-dispatched',
            widgetId,
            recordIdsCount: recordIds.length,
            timestamp: Date.now()
        });
    }
    /**
     * Checks if event listeners are currently set up.
     *
     * @returns True if listeners are set up, false otherwise
     */
    isSetup() {
        return this.listenersSetup;
    }
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-graphics-layer.ts":
/*!**************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/hooks/use-graphics-layer.ts ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GraphicsLayerManager: () => (/* binding */ GraphicsLayerManager)
/* harmony export */ });
/* harmony import */ var _graphics_layer_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../graphics-layer-utils */ "./your-extensions/widgets/query-simple/src/runtime/graphics-layer-utils.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};


const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__.createQuerySimpleDebugLogger)();
/**
 * Utility to manage graphics layer initialization and cleanup.
 *
 * Centralizes graphics layer management logic for the widget.
 * Handles graphics layer creation, initialization, and cleanup.
 *
 * Part of Chunk 4: Graphics Layer Management extraction.
 *
 * Note: This is a utility class (not a hook) to work with class components.
 */
class GraphicsLayerManager {
    constructor(graphicsLayerRef, mapViewRef) {
        this.graphicsLayerRef = graphicsLayerRef;
        this.mapViewRef = mapViewRef;
    }
    /**
     * Initializes the graphics layer for map highlighting.
     *
     * Creates or retrieves a graphics layer and adds it to the map view.
     *
     * @param widgetId - Widget ID for graphics layer naming
     * @param mapView - The ArcGIS MapView or SceneView instance
     * @param callbacks - Optional callbacks for initialization events
     *
     * @returns Promise resolving to the graphics layer, or null if initialization failed
     */
    initialize(widgetId, mapView, callbacks) {
        return __awaiter(this, void 0, void 0, function* () {
            var _a, _b, _c, _d;
            // Chunk 4: Comparison logging - new implementation
            const newStateBefore = {
                hasGraphicsLayer: !!this.graphicsLayerRef.current,
                graphicsLayerId: ((_a = this.graphicsLayerRef.current) === null || _a === void 0 ? void 0 : _a.id) || null,
                hasMapView: !!this.mapViewRef.current,
                viewType: ((_b = this.mapViewRef.current) === null || _b === void 0 ? void 0 : _b.type) || null
            };
            debugLogger.log('CHUNK-4-COMPARE', {
                event: 'new-implementation-initializeGraphicsLayer-before',
                widgetId,
                newImplementation: {
                    stateBefore: newStateBefore,
                    mapViewType: mapView.type || 'unknown',
                    timestamp: Date.now()
                }
            });
            try {
                // Create or get graphics layer
                const graphicsLayer = yield (0,_graphics_layer_utils__WEBPACK_IMPORTED_MODULE_0__.createOrGetGraphicsLayer)(widgetId, mapView);
                if (!graphicsLayer) {
                    debugLogger.log('CHUNK-4-COMPARE', {
                        event: 'new-implementation-initializeGraphicsLayer-failed',
                        widgetId,
                        newImplementation: {
                            stateBefore: newStateBefore,
                            result: 'failed',
                            reason: 'graphics-layer-creation-failed',
                            timestamp: Date.now()
                        }
                    });
                    return null;
                }
                // Store references
                this.mapViewRef.current = mapView;
                this.graphicsLayerRef.current = graphicsLayer;
                const newStateAfter = {
                    hasGraphicsLayer: !!this.graphicsLayerRef.current,
                    graphicsLayerId: ((_c = this.graphicsLayerRef.current) === null || _c === void 0 ? void 0 : _c.id) || null,
                    hasMapView: !!this.mapViewRef.current,
                    viewType: ((_d = this.mapViewRef.current) === null || _d === void 0 ? void 0 : _d.type) || null
                };
                debugLogger.log('CHUNK-4-COMPARE', {
                    event: 'new-implementation-initializeGraphicsLayer-success',
                    widgetId,
                    newImplementation: {
                        stateBefore: newStateBefore,
                        stateAfter: newStateAfter,
                        result: 'success',
                        graphicsLayerId: graphicsLayer.id,
                        viewType: mapView.type || 'unknown',
                        timestamp: Date.now()
                    }
                });
                // Call callback if provided
                if (callbacks === null || callbacks === void 0 ? void 0 : callbacks.onGraphicsLayerInitialized) {
                    callbacks.onGraphicsLayerInitialized(graphicsLayer);
                }
                return graphicsLayer;
            }
            catch (error) {
                debugLogger.log('CHUNK-4-COMPARE', {
                    event: 'new-implementation-initializeGraphicsLayer-error',
                    widgetId,
                    newImplementation: {
                        stateBefore: newStateBefore,
                        result: 'error',
                        error: error instanceof Error ? error.message : String(error),
                        timestamp: Date.now()
                    }
                });
                return null;
            }
        });
    }
    /**
     * Initializes graphics layer lazily when output data source becomes available.
     *
     * @param widgetId - Widget ID
     * @param config - Widget configuration
     * @param outputDS - The output data source that was created
     * @param mapView - Optional map view (if not provided, uses mapViewRef)
     * @param callbacks - Optional callbacks
     */
    initializeFromOutputDS(widgetId, config, outputDS, mapView, callbacks) {
        return __awaiter(this, void 0, void 0, function* () {
            var _a;
            // Chunk 4: Comparison logging - new implementation
            const newStateBefore = {
                useGraphicsLayerForHighlight: config.useGraphicsLayerForHighlight,
                hasGraphicsLayer: !!this.graphicsLayerRef.current,
                graphicsLayerId: ((_a = this.graphicsLayerRef.current) === null || _a === void 0 ? void 0 : _a.id) || null,
                hasMapView: !!this.mapViewRef.current,
                outputDSId: outputDS.id
            };
            debugLogger.log('CHUNK-4-COMPARE', {
                event: 'new-implementation-initializeGraphicsLayerFromOutputDS-before',
                widgetId,
                newImplementation: {
                    stateBefore: newStateBefore,
                    timestamp: Date.now()
                }
            });
            // Only initialize if enabled and not already initialized
            if (!config.useGraphicsLayerForHighlight || this.graphicsLayerRef.current) {
                debugLogger.log('CHUNK-4-COMPARE', {
                    event: 'new-implementation-initializeGraphicsLayerFromOutputDS-skipped',
                    widgetId,
                    newImplementation: {
                        stateBefore: newStateBefore,
                        result: 'skipped',
                        reason: !config.useGraphicsLayerForHighlight ? 'not-enabled' : 'already-initialized',
                        timestamp: Date.now()
                    }
                });
                return;
            }
            // Use provided map view or get from ref
            const mapViewToUse = mapView || this.mapViewRef.current;
            if (!mapViewToUse) {
                debugLogger.log('CHUNK-4-COMPARE', {
                    event: 'new-implementation-initializeGraphicsLayerFromOutputDS-skipped',
                    widgetId,
                    newImplementation: {
                        stateBefore: newStateBefore,
                        result: 'skipped',
                        reason: 'map-view-not-available-yet',
                        timestamp: Date.now()
                    }
                });
                return;
            }
            // Initialize graphics layer
            yield this.initialize(widgetId, mapViewToUse, callbacks);
        });
    }
    /**
     * Cleans up the graphics layer.
     *
     * Removes the graphics layer from the map view and clears internal references.
     *
     * @param widgetId - Widget ID
     * @param callbacks - Optional callbacks
     */
    cleanup(widgetId, callbacks) {
        var _a, _b, _c, _d;
        // Chunk 4: Comparison logging - new implementation
        const newStateBefore = {
            hasGraphicsLayer: !!this.graphicsLayerRef.current,
            graphicsLayerId: ((_a = this.graphicsLayerRef.current) === null || _a === void 0 ? void 0 : _a.id) || null,
            hasMapView: !!this.mapViewRef.current,
            viewType: ((_b = this.mapViewRef.current) === null || _b === void 0 ? void 0 : _b.type) || null
        };
        debugLogger.log('CHUNK-4-COMPARE', {
            event: 'new-implementation-cleanupGraphicsLayer-before',
            widgetId,
            newImplementation: {
                stateBefore: newStateBefore,
                timestamp: Date.now()
            }
        });
        const mapView = this.mapViewRef.current;
        if (mapView) {
            (0,_graphics_layer_utils__WEBPACK_IMPORTED_MODULE_0__.cleanupGraphicsLayer)(widgetId, mapView);
            this.mapViewRef.current = null;
            this.graphicsLayerRef.current = null;
            const newStateAfter = {
                hasGraphicsLayer: !!this.graphicsLayerRef.current,
                graphicsLayerId: ((_c = this.graphicsLayerRef.current) === null || _c === void 0 ? void 0 : _c.id) || null,
                hasMapView: !!this.mapViewRef.current,
                viewType: ((_d = this.mapViewRef.current) === null || _d === void 0 ? void 0 : _d.type) || null
            };
            debugLogger.log('CHUNK-4-COMPARE', {
                event: 'new-implementation-cleanupGraphicsLayer-complete',
                widgetId,
                newImplementation: {
                    stateBefore: newStateBefore,
                    stateAfter: newStateAfter,
                    result: 'complete',
                    timestamp: Date.now()
                }
            });
            // Call callback if provided
            if (callbacks === null || callbacks === void 0 ? void 0 : callbacks.onGraphicsLayerCleaned) {
                callbacks.onGraphicsLayerCleaned();
            }
        }
        else {
            debugLogger.log('CHUNK-4-COMPARE', {
                event: 'new-implementation-cleanupGraphicsLayer-skipped',
                widgetId,
                newImplementation: {
                    stateBefore: newStateBefore,
                    result: 'skipped',
                    reason: 'no-map-view',
                    timestamp: Date.now()
                }
            });
        }
    }
    /**
     * Clears all graphics from the graphics layer if it exists.
     *
     * @param widgetId - Widget ID for logging
     * @param config - Widget configuration
     */
    clearGraphics(widgetId, config) {
        var _a, _b;
        // Chunk 4: Comparison logging - new implementation
        const graphicsLayer = this.graphicsLayerRef.current;
        const newStateBefore = {
            useGraphicsLayerForHighlight: config.useGraphicsLayerForHighlight,
            hasGraphicsLayer: !!graphicsLayer,
            graphicsLayerId: (graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.id) || null,
            graphicsCount: (graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics.length) || 0
        };
        debugLogger.log('CHUNK-4-COMPARE', {
            event: 'new-implementation-clearGraphicsLayerIfExists-before',
            widgetId,
            newImplementation: {
                stateBefore: newStateBefore,
                timestamp: Date.now()
            }
        });
        if (config.useGraphicsLayerForHighlight && graphicsLayer) {
            const { clearGraphicsLayer } = __webpack_require__(/*! ../graphics-layer-utils */ "./your-extensions/widgets/query-simple/src/runtime/graphics-layer-utils.ts");
            clearGraphicsLayer(graphicsLayer);
            const newStateAfter = {
                useGraphicsLayerForHighlight: config.useGraphicsLayerForHighlight,
                hasGraphicsLayer: !!this.graphicsLayerRef.current,
                graphicsLayerId: ((_a = this.graphicsLayerRef.current) === null || _a === void 0 ? void 0 : _a.id) || null,
                graphicsCount: ((_b = this.graphicsLayerRef.current) === null || _b === void 0 ? void 0 : _b.graphics.length) || 0
            };
            debugLogger.log('CHUNK-4-COMPARE', {
                event: 'new-implementation-clearGraphicsLayerIfExists-complete',
                widgetId,
                newImplementation: {
                    stateBefore: newStateBefore,
                    stateAfter: newStateAfter,
                    result: 'complete',
                    graphicsLayerId: graphicsLayer.id,
                    timestamp: Date.now()
                }
            });
        }
        else {
            debugLogger.log('CHUNK-4-COMPARE', {
                event: 'new-implementation-clearGraphicsLayerIfExists-skipped',
                widgetId,
                newImplementation: {
                    stateBefore: newStateBefore,
                    result: 'skipped',
                    reason: !config.useGraphicsLayerForHighlight ? 'not-enabled' : 'no-graphics-layer',
                    timestamp: Date.now()
                }
            });
        }
    }
    /**
     * Gets the current graphics layer.
     */
    getGraphicsLayer() {
        return this.graphicsLayerRef.current;
    }
    /**
     * Checks if graphics layer should be initialized based on config and current state.
     *
     * @param config - Widget configuration
     * @param mapView - Map view to check
     * @returns true if graphics layer should be initialized
     */
    shouldInitialize(config, mapView) {
        return !!(mapView && config.useGraphicsLayerForHighlight && !this.graphicsLayerRef.current);
    }
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-map-view.ts":
/*!********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/hooks/use-map-view.ts ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MapViewManager: () => (/* binding */ MapViewManager)
/* harmony export */ });
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");

const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_0__.createQuerySimpleDebugLogger)();
/**
 * Utility to manage map view ref and view change handlers.
 *
 * Centralizes map view management logic for the widget.
 * Handles JimuMapView changes and maintains refs for map view access.
 *
 * Part of Chunk 6: Map View Management extraction.
 *
 * Note: This is a utility class (not a hook) to work with class components.
 */
class MapViewManager {
    constructor(mapViewRef) {
        this.jimuMapView = null;
        this.mapViewRef = mapViewRef;
    }
    /**
     * Handles JimuMapView change from JimuMapViewComponent.
     * Updates internal state and calls callbacks.
     */
    handleJimuMapViewChanged(jimuMapView, props, callbacks) {
        var _a;
        const { id } = props;
        debugLogger.log('MAP-EXTENT', {
            event: 'handleJimuMapViewChanged',
            widgetId: id,
            hasJimuMapView: !!jimuMapView,
            hasView: !!(jimuMapView === null || jimuMapView === void 0 ? void 0 : jimuMapView.view),
            viewType: ((_a = jimuMapView === null || jimuMapView === void 0 ? void 0 : jimuMapView.view) === null || _a === void 0 ? void 0 : _a.type) || 'none',
            timestamp: Date.now()
        });
        // Store JimuMapView internally
        this.jimuMapView = jimuMapView;
        // Update map view ref if view is available
        if (jimuMapView === null || jimuMapView === void 0 ? void 0 : jimuMapView.view) {
            this.mapViewRef.current = jimuMapView.view;
        }
        else {
            this.mapViewRef.current = null;
        }
        // Call callback to update widget state
        if (callbacks.onMapViewChange) {
            callbacks.onMapViewChange(jimuMapView);
        }
    }
    /**
     * Gets the current JimuMapView.
     */
    getJimuMapView() {
        return this.jimuMapView;
    }
    /**
     * Gets the current map view from ref.
     */
    getMapView() {
        return this.mapViewRef.current;
    }
    /**
     * Cleans up map view references.
     */
    cleanup() {
        this.mapViewRef.current = null;
        this.jimuMapView = null;
    }
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-selection-restoration.ts":
/*!*********************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/hooks/use-selection-restoration.ts ***!
  \*********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SelectionRestorationManager: () => (/* binding */ SelectionRestorationManager)
/* harmony export */ });
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};


const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__.createQuerySimpleDebugLogger)();
/**
 * Manager class for handling selection state tracking and restoration logic.
 *
 * This class centralizes the logic for:
 * - Section 3.1: Selection State Tracking (handleSelectionChange)
 * - Section 3.2: Panel Open/Close Restoration (addSelectionToMap, clearSelectionFromMap)
 * - Section 3.3: Map Identify Restoration (handleRestoreOnIdentifyClose)
 *
 * Part of Chunk 3: Selection & Restoration extraction.
 *
 * Note: This is a utility class (not a hook) to work with class components.
 */
class SelectionRestorationManager {
    constructor(stateGetter, callbacks) {
        this.widgetId = '';
        this.stateGetter = stateGetter;
        this.callbacks = callbacks;
    }
    /**
     * Sets the widget ID. Should be called once in componentDidMount.
     * @param widgetId - The widget ID
     */
    setWidgetId(widgetId) {
        this.widgetId = widgetId;
    }
    // ============================================================================
    // Section 3.1: Selection State Tracking
    // ============================================================================
    /**
     * Handles selection change events from queries.
     *
     * This method:
     * 1. Ignores events not for this widget
     * 2. Ignores empty selections when panel is closed (to prevent state wipe)
     * 3. Calculates selection count (uses accumulated records in Add/Remove modes)
     * 4. Updates widget state: hasSelection, selectionRecordCount, lastSelection
     * 5. Resets mode to NewSelection if selection is cleared in Remove mode
     *
     * @param event - The selection change event
     */
    handleSelectionChange(event) {
        var _a;
        const customEvent = event;
        // Get current state
        const state = this.stateGetter();
        // ========================================================================
        // 1. Only track if this is for our widget
        // ========================================================================
        if (customEvent.detail.widgetId !== this.widgetId) {
            return;
        }
        // ========================================================================
        // 2. Ignore empty selections when panel is closed
        // ========================================================================
        const hasSelection = customEvent.detail.recordIds && customEvent.detail.recordIds.length > 0;
        if (!state.isPanelVisible && !hasSelection) {
            debugLogger.log('RESTORE', {
                event: 'handleSelectionChange-ignoring-empty-selection-while-panel-closed',
                widgetId: this.widgetId,
                timestamp: Date.now()
            });
            return;
        }
        // ========================================================================
        // 3. Calculate selection count
        // ========================================================================
        // In "Add to" or "Remove from" mode, use accumulated records count
        const isAccumulationMode = state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_0__.SelectionType.AddToSelection ||
            state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_0__.SelectionType.RemoveFromSelection;
        const accumulatedRecordsCount = ((_a = state.accumulatedRecords) === null || _a === void 0 ? void 0 : _a.length) || 0;
        const selectionCount = isAccumulationMode && accumulatedRecordsCount > 0
            ? accumulatedRecordsCount
            : (hasSelection ? customEvent.detail.recordIds.length : 0);
        // ========================================================================
        // 4. Determine if mode should reset
        // ========================================================================
        // If selection is cleared in Remove mode, reset to NewSelection
        const shouldResetMode = !hasSelection &&
            selectionCount === 0 &&
            state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_0__.SelectionType.RemoveFromSelection;
        // ========================================================================
        // 5. Build new state
        // ========================================================================
        const newState = {
            hasSelection: selectionCount > 0,
            selectionRecordCount: selectionCount,
            // Store lastSelection for compatibility
            lastSelection: hasSelection && customEvent.detail.outputDsId && customEvent.detail.queryItemConfigId
                ? {
                    recordIds: customEvent.detail.recordIds,
                    outputDsId: customEvent.detail.outputDsId,
                    queryItemConfigId: customEvent.detail.queryItemConfigId
                }
                : undefined
        };
        // Reset mode if needed
        if (shouldResetMode) {
            newState.resultsMode = _config__WEBPACK_IMPORTED_MODULE_0__.SelectionType.NewSelection;
            newState.accumulatedRecords = []; // Also clear accumulated records
        }
        // ========================================================================
        // 6. Log decision logic
        // ========================================================================
        debugLogger.log('RESTORE', {
            event: 'handleSelectionChange-updating-state',
            widgetId: this.widgetId,
            resultsMode: state.resultsMode,
            isAccumulationMode,
            eventRecordIdsCount: customEvent.detail.recordIds.length,
            hasSelectionFromEvent: hasSelection,
            accumulatedRecordsCountBefore: accumulatedRecordsCount,
            calculatedSelectionCount: selectionCount,
            'will-set-hasSelection': selectionCount > 0,
            'will-set-lastSelection': hasSelection && !!customEvent.detail.outputDsId && !!customEvent.detail.queryItemConfigId,
            'will-reset-mode': shouldResetMode,
            decisionLogic: {
                'isAccumulationMode': isAccumulationMode,
                'accumulatedRecordsCount > 0': accumulatedRecordsCount > 0,
                'use-accumulated-count': isAccumulationMode && accumulatedRecordsCount > 0,
                'use-event-count': !(isAccumulationMode && accumulatedRecordsCount > 0),
                'should-reset-mode': shouldResetMode
            }
        });
        // ========================================================================
        // 7. Update state via callback
        // ========================================================================
        this.callbacks.onStateUpdate(newState);
        // ========================================================================
        // 8. Log state AFTER update
        // ========================================================================
        debugLogger.log('RESTORE', {
            event: 'handleSelectionChange-state-updated',
            widgetId: this.widgetId,
            'new-hasSelection': selectionCount > 0,
            'new-selectionRecordCount': selectionCount,
            'new-lastSelection-recordIds-count': hasSelection && customEvent.detail.outputDsId && customEvent.detail.queryItemConfigId
                ? customEvent.detail.recordIds.length
                : 0,
            'mode-reset': shouldResetMode,
            'new-mode': shouldResetMode ? _config__WEBPACK_IMPORTED_MODULE_0__.SelectionType.NewSelection : state.resultsMode,
            'note': shouldResetMode
                ? 'Mode reset to NewSelection because selection was cleared in Remove mode'
                : 'lastSelection-only-contains-current-query-records-not-all-accumulated-records'
        });
    }
    // ============================================================================
    // Section 3.2: Panel Open/Close Restoration
    // ============================================================================
    /**
     * Restores selection to the map when the widget panel opens.
     *
     * This method:
     * 1. Checks if accumulated records exist (Add/Remove modes)
     * 2. Groups accumulated records by origin data source
     * 3. Calls selectRecordsAndPublish for each origin DS
     * 4. Falls back to lastSelection if no accumulated records
     *
     * @param deps - Runtime dependencies (graphics layer, map view, config)
     */
    addSelectionToMap(deps) {
        return __awaiter(this, void 0, void 0, function* () {
            const state = this.stateGetter();
            const { lastSelection, accumulatedRecords, resultsMode } = state;
            debugLogger.log('RESTORE', {
                event: 'addSelectionToMap-called',
                widgetId: this.widgetId,
                resultsMode,
                hasAccumulatedRecords: !!(accumulatedRecords && accumulatedRecords.length > 0),
                accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0,
                hasLastSelection: !!lastSelection,
                lastSelectionRecordCount: (lastSelection === null || lastSelection === void 0 ? void 0 : lastSelection.recordIds.length) || 0,
                lastSelectionOutputDsId: lastSelection === null || lastSelection === void 0 ? void 0 : lastSelection.outputDsId
            });
            // In Add/Remove modes, use accumulated records for restoration
            const isAccumulationMode = resultsMode === _config__WEBPACK_IMPORTED_MODULE_0__.SelectionType.AddToSelection ||
                resultsMode === _config__WEBPACK_IMPORTED_MODULE_0__.SelectionType.RemoveFromSelection;
            // Check if we should use accumulated records
            if (accumulatedRecords && accumulatedRecords.length > 0) {
                debugLogger.log('RESTORE', {
                    event: 'addSelectionToMap-found-accumulated-records',
                    widgetId: this.widgetId,
                    resultsMode,
                    isAccumulationMode,
                    accumulatedRecordsCount: accumulatedRecords.length,
                    'should-use-accumulated': true
                });
            }
            else {
                debugLogger.log('RESTORE', {
                    event: 'addSelectionToMap-no-accumulated-records',
                    widgetId: this.widgetId,
                    resultsMode,
                    isAccumulationMode,
                    accumulatedRecordsCount: 0,
                    'will-fallback-to-lastSelection': !!lastSelection
                });
            }
            if (isAccumulationMode && accumulatedRecords && accumulatedRecords.length > 0) {
                // Group accumulated records by origin data source
                yield this.restoreAccumulatedRecords(accumulatedRecords, deps);
            }
            else if (!isAccumulationMode && lastSelection && lastSelection.recordIds.length > 0) {
                // Fall back to lastSelection in New mode
                yield this.restoreLastSelection(lastSelection, deps);
            }
            else {
                debugLogger.log('RESTORE', {
                    event: 'addSelectionToMap-no-selection-to-restore',
                    widgetId: this.widgetId,
                    resultsMode,
                    hasAccumulatedRecords: accumulatedRecords && accumulatedRecords.length > 0,
                    hasLastSelection: !!lastSelection
                });
            }
        });
    }
    /**
     * Helper: Restore accumulated records (grouped by origin DS)
     */
    restoreAccumulatedRecords(accumulatedRecords, deps) {
        return __awaiter(this, void 0, void 0, function* () {
            // Lazy-load dependencies
            const { DataSourceManager } = yield Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! jimu-core */ "jimu-core"));
            const { selectRecordsAndPublish } = yield Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ../selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts"));
            const recordsByOriginDS = new Map(); // Map<FeatureLayerDataSource, FeatureDataRecord[]>
            const dsManager = DataSourceManager.getInstance();
            // Group records by origin DS
            accumulatedRecords.forEach((record, index) => {
                var _a, _b, _c, _d, _e, _f;
                const recordId = record.getId();
                let originDS = null;
                // Method 1: Try to get from record.getDataSource()
                const recordDS = (_a = record.getDataSource) === null || _a === void 0 ? void 0 : _a.call(record);
                if (recordDS) {
                    originDS = ((_c = (_b = recordDS.getOriginDataSources) === null || _b === void 0 ? void 0 : _b.call(recordDS)) === null || _c === void 0 ? void 0 : _c[0]) || recordDS;
                    debugLogger.log('RESTORE', {
                        event: 'found-origin-ds-from-record-ds',
                        widgetId: this.widgetId,
                        recordIndex: index,
                        recordId,
                        originDSId: (originDS === null || originDS === void 0 ? void 0 : originDS.id) || 'null',
                        method: 'record.getDataSource()'
                    });
                }
                // Method 2: If that failed, search all data sources for a record with matching ID
                if (!originDS) {
                    const dsMap = dsManager.getDataSources();
                    const allDataSources = Object.values(dsMap);
                    for (const ds of allDataSources) {
                        // Check if this is a FeatureLayerDataSource
                        if (ds && typeof ds.getAllLoadedRecords === 'function') {
                            try {
                                const allRecords = ds.getAllLoadedRecords() || [];
                                const matchingRecord = allRecords.find((r) => r.getId() === recordId);
                                if (matchingRecord) {
                                    originDS = ((_f = (_e = (_d = ds).getOriginDataSources) === null || _e === void 0 ? void 0 : _e.call(_d)) === null || _f === void 0 ? void 0 : _f[0]) || ds;
                                    debugLogger.log('RESTORE', {
                                        event: 'found-origin-ds-via-search',
                                        widgetId: this.widgetId,
                                        recordIndex: index,
                                        recordId,
                                        originDSId: originDS.id,
                                        method: 'searched-all-data-sources',
                                        searchedDSId: ds.id
                                    });
                                    break;
                                }
                            }
                            catch (error) {
                                // Continue searching
                            }
                        }
                    }
                }
                if (originDS) {
                    if (!recordsByOriginDS.has(originDS)) {
                        recordsByOriginDS.set(originDS, []);
                    }
                    recordsByOriginDS.get(originDS).push(record);
                }
                else {
                    debugLogger.log('RESTORE', {
                        event: 'could-not-find-origin-ds-for-record',
                        widgetId: this.widgetId,
                        recordIndex: index,
                        recordId,
                        warning: 'record-will-be-skipped'
                    });
                }
            });
            debugLogger.log('RESTORE', {
                event: 'panel-opened-restoring-accumulated-records',
                widgetId: this.widgetId,
                resultsMode: this.stateGetter().resultsMode,
                accumulatedRecordsCount: accumulatedRecords.length,
                originDSCount: recordsByOriginDS.size
            });
            // Restore selection for each origin data source
            const useGraphicsLayer = deps.config.useGraphicsLayerForHighlight;
            const graphicsLayer = deps.graphicsLayerRef.current || undefined;
            const mapView = deps.mapViewRef.current || undefined;
            for (const [originDS, records] of recordsByOriginDS.entries()) {
                const recordIds = records.map(r => r.getId());
                try {
                    yield selectRecordsAndPublish(this.widgetId, originDS, recordIds, records, true, // alsoPublishToOutputDS
                    useGraphicsLayer, graphicsLayer, mapView);
                    debugLogger.log('RESTORE', {
                        event: 'panel-opened-restored-origin-ds',
                        widgetId: this.widgetId,
                        originDSId: originDS.id,
                        recordCount: records.length,
                        zoomExecuted: false
                    });
                }
                catch (error) {
                    debugLogger.log('RESTORE', {
                        event: 'panel-opened-restore-origin-ds-failed',
                        widgetId: this.widgetId,
                        originDSId: originDS.id,
                        error: error.message
                    });
                }
            }
        });
    }
    /**
     * Helper: Restore lastSelection (New mode)
     */
    restoreLastSelection(lastSelection, deps) {
        return __awaiter(this, void 0, void 0, function* () {
            var _a, _b, _c;
            // Lazy-load dependencies
            const { DataSourceManager } = yield Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! jimu-core */ "jimu-core"));
            const { selectRecordsAndPublish } = yield Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ../selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts"));
            const dsManager = DataSourceManager.getInstance();
            const outputDS = dsManager.getDataSource(lastSelection.outputDsId);
            if (!outputDS) {
                debugLogger.log('RESTORE', {
                    event: 'panel-opened-outputDS-not-found',
                    widgetId: this.widgetId,
                    outputDsId: lastSelection.outputDsId
                });
                return;
            }
            // Get origin DS
            const originDS = ((_c = (_b = (_a = outputDS).getOriginDataSources) === null || _b === void 0 ? void 0 : _b.call(_a)) === null || _c === void 0 ? void 0 : _c[0]) || outputDS;
            // Get records
            const allRecords = outputDS.getAllLoadedRecords() || [];
            const recordsToRestore = allRecords.filter((r) => lastSelection.recordIds.includes(r.getId()));
            debugLogger.log('RESTORE', {
                event: 'panel-opened-restoring-lastSelection',
                widgetId: this.widgetId,
                outputDsId: lastSelection.outputDsId,
                recordIdsCount: lastSelection.recordIds.length,
                recordsFound: recordsToRestore.length
            });
            const useGraphicsLayer = deps.config.useGraphicsLayerForHighlight;
            const graphicsLayer = deps.graphicsLayerRef.current || undefined;
            const mapView = deps.mapViewRef.current || undefined;
            try {
                yield selectRecordsAndPublish(this.widgetId, originDS, lastSelection.recordIds, recordsToRestore, true, useGraphicsLayer, graphicsLayer, mapView);
                debugLogger.log('RESTORE', {
                    event: 'panel-opened-restored-lastSelection',
                    widgetId: this.widgetId,
                    originDSId: originDS.id,
                    recordCount: recordsToRestore.length
                });
            }
            catch (error) {
                debugLogger.log('RESTORE', {
                    event: 'panel-opened-restore-lastSelection-failed',
                    widgetId: this.widgetId,
                    error: error.message
                });
            }
        });
    }
    /**
     * Clears selection from the map when the widget panel closes.
     *
     * This method:
     * 1. Clears graphics layer (if enabled)
     * 2. Groups accumulated records by origin DS (if they exist)
     * 3. Clears selection from each origin DS
     * 4. Falls back to lastSelection if no accumulated records
     *
     * @param deps - Runtime dependencies (graphics layer, map view, config)
     */
    clearSelectionFromMap(deps) {
        return __awaiter(this, void 0, void 0, function* () {
            const state = this.stateGetter();
            const { lastSelection, accumulatedRecords, resultsMode } = state;
            const isAccumulationMode = resultsMode === _config__WEBPACK_IMPORTED_MODULE_0__.SelectionType.AddToSelection ||
                resultsMode === _config__WEBPACK_IMPORTED_MODULE_0__.SelectionType.RemoveFromSelection;
            debugLogger.log('RESTORE', {
                event: 'clearSelectionFromMap-called',
                widgetId: this.widgetId,
                resultsMode,
                isAccumulationMode,
                hasLastSelection: !!lastSelection,
                lastSelectionRecordCount: (lastSelection === null || lastSelection === void 0 ? void 0 : lastSelection.recordIds.length) || 0,
                hasAccumulatedRecords: !!(accumulatedRecords && accumulatedRecords.length > 0),
                accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0,
                selectionRecordCount: state.selectionRecordCount || 0,
                hasSelection: state.hasSelection || false
            });
            // Always clear graphics layer first when panel closes
            if (deps.config.useGraphicsLayerForHighlight && deps.graphicsLayerRef.current) {
                deps.graphicsLayerManager.clearGraphics(this.widgetId, deps.config);
                debugLogger.log('RESTORE', {
                    event: 'panel-closed-graphics-layer-cleared',
                    widgetId: this.widgetId,
                    graphicsLayerId: deps.graphicsLayerRef.current.id
                });
            }
            // Always clear accumulated records if they exist
            debugLogger.log('RESTORE', {
                event: 'clearSelectionFromMap-checking-accumulated-records',
                widgetId: this.widgetId,
                'condition': 'accumulatedRecords && accumulatedRecords.length > 0',
                'condition-result': !!(accumulatedRecords && accumulatedRecords.length > 0),
                accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0
            });
            if (accumulatedRecords && accumulatedRecords.length > 0) {
                yield this.clearAccumulatedRecords(accumulatedRecords, deps);
            }
            else if (lastSelection && lastSelection.recordIds.length > 0) {
                yield this.clearLastSelection(lastSelection, deps);
            }
            else {
                debugLogger.log('RESTORE', {
                    event: 'clearSelectionFromMap-no-selection-to-clear',
                    widgetId: this.widgetId
                });
            }
        });
    }
    /**
     * Helper: Clear accumulated records (grouped by origin DS)
     */
    clearAccumulatedRecords(accumulatedRecords, deps) {
        return __awaiter(this, void 0, void 0, function* () {
            // Lazy-load dependencies
            const { DataSourceManager } = yield Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! jimu-core */ "jimu-core"));
            const { clearSelectionInDataSources } = yield Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ../selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts"));
            const recordsByOriginDS = new Map();
            const dsManager = DataSourceManager.getInstance();
            // Group records by origin DS (same logic as addSelectionToMap)
            accumulatedRecords.forEach((record, index) => {
                var _a, _b, _c, _d, _e, _f;
                const recordId = record.getId();
                let originDS = null;
                // Method 1: Try to get from record.getDataSource()
                const recordDS = (_a = record.getDataSource) === null || _a === void 0 ? void 0 : _a.call(record);
                if (recordDS) {
                    originDS = ((_c = (_b = recordDS.getOriginDataSources) === null || _b === void 0 ? void 0 : _b.call(recordDS)) === null || _c === void 0 ? void 0 : _c[0]) || recordDS;
                    debugLogger.log('RESTORE', {
                        event: 'clear-found-origin-ds-from-record-ds',
                        widgetId: this.widgetId,
                        recordIndex: index,
                        recordId,
                        originDSId: (originDS === null || originDS === void 0 ? void 0 : originDS.id) || 'null'
                    });
                }
                // Method 2: Search all data sources
                if (!originDS) {
                    const dsMap = dsManager.getDataSources();
                    const allDataSources = Object.values(dsMap);
                    for (const ds of allDataSources) {
                        if (ds && typeof ds.getAllLoadedRecords === 'function') {
                            try {
                                const allRecords = ds.getAllLoadedRecords() || [];
                                const matchingRecord = allRecords.find((r) => r.getId() === recordId);
                                if (matchingRecord) {
                                    originDS = ((_f = (_e = (_d = ds).getOriginDataSources) === null || _e === void 0 ? void 0 : _e.call(_d)) === null || _f === void 0 ? void 0 : _f[0]) || ds;
                                    debugLogger.log('RESTORE', {
                                        event: 'clear-found-origin-ds-via-search',
                                        widgetId: this.widgetId,
                                        recordIndex: index,
                                        recordId,
                                        originDSId: originDS.id
                                    });
                                    break;
                                }
                            }
                            catch (error) {
                                // Continue searching
                            }
                        }
                    }
                }
                if (originDS) {
                    if (!recordsByOriginDS.has(originDS)) {
                        recordsByOriginDS.set(originDS, []);
                    }
                    recordsByOriginDS.get(originDS).push(record);
                }
            });
            debugLogger.log('RESTORE', {
                event: 'panel-closed-clearing-accumulated-records',
                widgetId: this.widgetId,
                accumulatedRecordsCount: accumulatedRecords.length,
                originDSCount: recordsByOriginDS.size
            });
            // Clear selection from each origin DS
            const useGraphicsLayer = deps.config.useGraphicsLayerForHighlight;
            const graphicsLayer = deps.graphicsLayerRef.current || undefined;
            for (const [originDS, records] of recordsByOriginDS.entries()) {
                try {
                    // Use clearSelectionInDataSources to properly publish empty selection message
                    // This clears the #data_s=... hash parameter
                    yield clearSelectionInDataSources(this.widgetId, originDS, useGraphicsLayer, graphicsLayer);
                    debugLogger.log('RESTORE', {
                        event: 'panel-closed-cleared-origin-ds',
                        widgetId: this.widgetId,
                        originDSId: originDS.id,
                        recordCount: records.length
                    });
                }
                catch (error) {
                    debugLogger.log('RESTORE', {
                        event: 'panel-closed-clear-origin-ds-failed',
                        widgetId: this.widgetId,
                        originDSId: originDS.id,
                        error: error.message
                    });
                }
            }
        });
    }
    /**
     * Helper: Clear lastSelection (New mode)
     */
    clearLastSelection(lastSelection, deps) {
        return __awaiter(this, void 0, void 0, function* () {
            var _a, _b, _c;
            // Lazy-load dependencies
            const { DataSourceManager } = yield Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! jimu-core */ "jimu-core"));
            const { clearSelectionInDataSources } = yield Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ../selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts"));
            const dsManager = DataSourceManager.getInstance();
            const outputDS = dsManager.getDataSource(lastSelection.outputDsId);
            if (!outputDS) {
                debugLogger.log('RESTORE', {
                    event: 'panel-closed-outputDS-not-found',
                    widgetId: this.widgetId,
                    outputDsId: lastSelection.outputDsId
                });
                return;
            }
            const originDS = ((_c = (_b = (_a = outputDS).getOriginDataSources) === null || _b === void 0 ? void 0 : _b.call(_a)) === null || _c === void 0 ? void 0 : _c[0]) || outputDS;
            debugLogger.log('RESTORE', {
                event: 'panel-closed-clearing-lastSelection',
                widgetId: this.widgetId,
                outputDsId: lastSelection.outputDsId,
                originDSId: originDS.id
            });
            try {
                const useGraphicsLayer = deps.config.useGraphicsLayerForHighlight;
                const graphicsLayer = deps.graphicsLayerRef.current || undefined;
                // Use clearSelectionInDataSources to properly publish empty selection message
                // This clears the #data_s=... hash parameter
                yield clearSelectionInDataSources(this.widgetId, originDS, useGraphicsLayer, graphicsLayer);
                debugLogger.log('RESTORE', {
                    event: 'panel-closed-cleared-lastSelection',
                    widgetId: this.widgetId,
                    originDSId: originDS.id
                });
            }
            catch (error) {
                debugLogger.log('RESTORE', {
                    event: 'panel-closed-clear-lastSelection-failed',
                    widgetId: this.widgetId,
                    error: error.message
                });
            }
        });
    }
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-url-consumption.ts":
/*!***************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/hooks/use-url-consumption.ts ***!
  \***************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   UrlConsumptionManager: () => (/* binding */ UrlConsumptionManager)
/* harmony export */ });
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");


const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__.createQuerySimpleDebugLogger)();
/**
 * Utility to manage URL parameter consumption and deep linking.
 *
 * Handles both Hash fragments (#) and Query Strings (?), with Hash taking priority.
 * Implements atomic consumption to prevent infinite loops.
 *
 * Part of Chunk 1: URL Parameter Consumption extraction.
 *
 * Note: This is a utility class (not a hook) to work with class components.
 */
class UrlConsumptionManager {
    constructor() {
        this.lastProcessedHash = '';
        this.isProcessing = false;
        this.hashChangeHandler = null;
    }
    /**
     * Checks URL for hash and query string parameters matching configured shortIds.
     * Hash parameters take priority over query string parameters.
     */
    checkUrlParameters(props, resultsMode, callbacks) {
        var _a, _b;
        const { config, id } = props;
        const { onInitialValueFound, onModeResetNeeded } = callbacks;
        debugLogger.log('HASH-EXEC', {
            event: 'urlconsumption-checkurlparameters-entry',
            widgetId: id,
            hasQueryItems: !!((_a = config.queryItems) === null || _a === void 0 ? void 0 : _a.length),
            isProcessing: this.isProcessing,
            lastProcessedHash: this.lastProcessedHash,
            currentHash: window.location.hash.substring(1),
            timestamp: Date.now()
        });
        if (!((_b = config.queryItems) === null || _b === void 0 ? void 0 : _b.length)) {
            debugLogger.log('HASH-EXEC', {
                event: 'urlconsumption-exit-no-query-items',
                widgetId: id,
                timestamp: Date.now()
            });
            return;
        }
        // Prevent concurrent processing
        if (this.isProcessing) {
            debugLogger.log('HASH-EXEC', {
                event: 'urlconsumption-exit-already-processing',
                widgetId: id,
                timestamp: Date.now()
            });
            return;
        }
        const shortIds = config.queryItems
            .map(item => item.shortId)
            .filter(sid => sid != null && sid.trim() !== '');
        if (shortIds.length === 0) {
            debugLogger.log('HASH-EXEC', {
                event: 'urlconsumption-exit-no-shortids',
                widgetId: id,
                timestamp: Date.now()
            });
            return;
        }
        const hash = window.location.hash.substring(1);
        const query = window.location.search.substring(1);
        this.isProcessing = true;
        debugLogger.log('HASH-EXEC', {
            event: 'urlconsumption-parsing-params',
            widgetId: id,
            hash,
            query,
            shortIds,
            timestamp: Date.now()
        });
        const hashParams = new URLSearchParams(hash);
        const queryParams = new URLSearchParams(query);
        let foundShortId = null;
        let foundValue = null;
        let foundIn = null;
        // PRIORITY 1: Hash fragments (always win)
        for (const sid of shortIds) {
            if (hashParams.has(sid)) {
                foundShortId = sid;
                foundValue = hashParams.get(sid);
                foundIn = 'hash';
                break;
            }
        }
        // PRIORITY 2: Query string (if no hash match)
        if (!foundShortId) {
            for (const sid of shortIds) {
                if (queryParams.has(sid)) {
                    foundShortId = sid;
                    foundValue = queryParams.get(sid);
                    foundIn = 'query';
                    break;
                }
            }
        }
        debugLogger.log('HASH-EXEC', {
            event: 'urlconsumption-search-complete',
            widgetId: id,
            foundShortId,
            foundValue,
            foundIn,
            hasMatch: !!(foundShortId && foundValue !== null),
            timestamp: Date.now()
        });
        if (foundShortId && foundValue !== null) {
            // Track only the specific shortId parameter (e.g., "pin=2223059013")
            // NOT the entire hash string with data_s and other parameters
            const currentShortIdParam = `${foundShortId}=${foundValue}`;
            debugLogger.log('HASH-EXEC', {
                event: 'urlconsumption-checking-lastprocessedhash',
                widgetId: id,
                currentShortIdParam,
                lastProcessedHash: this.lastProcessedHash,
                willSkip: this.lastProcessedHash === currentShortIdParam,
                timestamp: Date.now()
            });
            // Skip if we've already processed this exact shortId parameter
            if (this.lastProcessedHash === currentShortIdParam) {
                debugLogger.log('HASH-EXEC', {
                    event: 'urlconsumption-exit-hash-already-processed',
                    widgetId: id,
                    currentShortIdParam,
                    lastProcessedHash: this.lastProcessedHash,
                    timestamp: Date.now()
                });
                this.isProcessing = false;
                return;
            }
            // Update lastProcessedHash to track this specific shortId parameter
            this.lastProcessedHash = currentShortIdParam;
            debugLogger.log('HASH', {
                event: 'url-param-detected',
                widgetId: id,
                shortId: foundShortId,
                value: foundValue,
                foundIn,
                timestamp: Date.now()
            });
            // Reset to New mode when hash parameter is detected to avoid bugs with accumulation modes
            if (resultsMode !== _config__WEBPACK_IMPORTED_MODULE_0__.SelectionType.NewSelection && onModeResetNeeded) {
                debugLogger.log('HASH', {
                    event: 'mode-reset-needed-on-hash-detection',
                    widgetId: id,
                    currentMode: resultsMode,
                    timestamp: Date.now()
                });
                onModeResetNeeded();
            }
            debugLogger.log('HASH-EXEC', {
                event: 'urlconsumption-calling-oninitialvaluefound',
                widgetId: id,
                shortId: foundShortId,
                value: foundValue,
                timestamp: Date.now()
            });
            onInitialValueFound({ shortId: foundShortId, value: foundValue });
            debugLogger.log('HASH-EXEC', {
                event: 'urlconsumption-oninitialvaluefound-returned',
                widgetId: id,
                timestamp: Date.now()
            });
        }
        else {
            debugLogger.log('HASH-EXEC', {
                event: 'urlconsumption-no-match-calling-oninitialvaluefound-undefined',
                widgetId: id,
                timestamp: Date.now()
            });
            // No matching parameters found - clear state
            onInitialValueFound(undefined);
        }
        this.isProcessing = false;
        debugLogger.log('HASH-EXEC', {
            event: 'urlconsumption-checkurlparameters-exit',
            widgetId: id,
            timestamp: Date.now()
        });
    }
    /**
     * Removes a hash parameter from the URL.
     * Used when switching to accumulation modes to consume the deep link.
     */
    removeHashParameter(shortId, widgetId) {
        if (!shortId)
            return;
        const hash = window.location.hash.substring(1);
        const urlParams = new URLSearchParams(hash);
        if (urlParams.has(shortId)) {
            urlParams.delete(shortId);
            const newHash = urlParams.toString();
            debugLogger.log('HASH', {
                event: 'removeHashParameter',
                widgetId,
                shortId,
                newHash: newHash ? `#${newHash}` : '(empty)',
                timestamp: Date.now()
            });
            // Update the URL without triggering a reload
            // Always preserve pathname and query string, only update hash
            window.history.replaceState(null, '', window.location.pathname + window.location.search + (newHash ? `#${newHash}` : ''));
            // Reset tracking so it can be processed again if needed
            this.lastProcessedHash = '';
        }
    }
    /**
     * Sets up the manager (no autonomous URL checking).
     * QuerySimple should only process hash parameters when HelperSimple explicitly triggers it
     * via OPEN_WIDGET_EVENT. This ensures HelperSimple remains the orchestrator.
     */
    setup(props, resultsMode, callbacks) {
        // Do NOT automatically check URL parameters
        // Do NOT set up hashchange listener
        // QuerySimple will only process hash when HelperSimple explicitly opens the widget
        // This ensures HelperSimple remains the orchestrator
    }
    /**
     * Cleans up hash change listener.
     */
    cleanup() {
        if (this.hashChangeHandler) {
            window.removeEventListener('hashchange', this.hashChangeHandler);
            this.hashChangeHandler = null;
        }
    }
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-widget-visibility.ts":
/*!*****************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/hooks/use-widget-visibility.ts ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   WidgetVisibilityManager: () => (/* binding */ WidgetVisibilityManager)
/* harmony export */ });
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");

const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_0__.createQuerySimpleDebugLogger)();
/**
 * Custom event name for QuerySimple to notify HelperSimple of widget open/close state.
 */
const QUERYSIMPLE_WIDGET_STATE_EVENT = 'querysimple-widget-state-changed';
/**
 * Utility to manage widget panel visibility detection and HelperSimple notification.
 *
 * Uses IntersectionObserver for efficient DOM-level visibility tracking.
 * Falls back to periodic checking if IntersectionObserver is not available.
 *
 * Part of Chunk 2: Widget Visibility Engine extraction.
 *
 * Note: This is a utility class (not a hook) to work with class components.
 */
class WidgetVisibilityManager {
    constructor() {
        this.visibilityObserver = null;
        this.visibilityCheckInterval = null;
        this.isPanelVisible = false;
        this.widgetElement = null;
    }
    /**
     * Checks if the widget element is currently visible.
     * Fallback method when IntersectionObserver is not available.
     */
    checkVisibility() {
        if (!this.widgetElement)
            return false;
        const element = this.widgetElement;
        const style = window.getComputedStyle(element);
        const rect = element.getBoundingClientRect();
        const isVisible = (style.display !== 'none' &&
            style.visibility !== 'hidden' &&
            style.opacity !== '0' &&
            rect.width > 0 &&
            rect.height > 0 &&
            rect.top < window.innerHeight &&
            rect.bottom > 0 &&
            rect.left < window.innerWidth &&
            rect.right > 0);
        return isVisible;
    }
    /**
     * Notifies HelperSimple of panel visibility state changes.
     */
    notifyHelperSimpleOfPanelState(isVisible, widgetId) {
        const event = new CustomEvent(QUERYSIMPLE_WIDGET_STATE_EVENT, {
            detail: {
                widgetId,
                isOpen: isVisible
            },
            bubbles: true,
            cancelable: true
        });
        window.dispatchEvent(event);
        debugLogger.log('WIDGET-STATE', {
            event: isVisible ? 'panel-opened' : 'panel-closed',
            widgetId,
            isVisible,
            method: 'notifyHelperSimpleOfPanelState',
            timestamp: new Date().toISOString()
        });
    }
    /**
     * Logs visibility state changes and calls callbacks.
     */
    logVisibilityChange(isVisible, method, widgetId, callbacks) {
        debugLogger.log('WIDGET-STATE', {
            event: isVisible ? 'panel-opened' : 'panel-closed',
            widgetId,
            isVisible,
            method,
            timestamp: new Date().toISOString()
        });
        // Notify HelperSimple
        this.notifyHelperSimpleOfPanelState(isVisible, widgetId);
        // Call optional callback
        if (callbacks.onVisibilityChange) {
            callbacks.onVisibilityChange(isVisible);
        }
    }
    /**
     * Sets up visibility detection.
     */
    setup(widgetElement, props, callbacks, onVisibilityStateChange) {
        const { id } = props;
        this.widgetElement = widgetElement;
        // Wait for next tick to ensure element is ready
        setTimeout(() => {
            if (!this.widgetElement) {
                debugLogger.log('WIDGET-STATE', {
                    event: 'visibility-detection-setup-failed',
                    widgetId: id,
                    reason: 'widget-element-not-available'
                });
                return;
            }
            const element = this.widgetElement;
            // Method 1: IntersectionObserver (most efficient)
            if ('IntersectionObserver' in window) {
                this.visibilityObserver = new IntersectionObserver((entries) => {
                    const entry = entries[0];
                    const isVisible = entry.isIntersecting && entry.intersectionRatio > 0;
                    // Only update if state changed
                    if (this.isPanelVisible !== isVisible) {
                        this.isPanelVisible = isVisible;
                        this.logVisibilityChange(isVisible, 'IntersectionObserver', id, callbacks);
                        onVisibilityStateChange(isVisible);
                    }
                }, {
                    threshold: [0, 0.1, 1.0], // Trigger at 0%, 10%, and 100% visibility
                    rootMargin: '0px'
                });
                this.visibilityObserver.observe(element);
                debugLogger.log('WIDGET-STATE', {
                    event: 'visibility-detection-setup',
                    widgetId: id,
                    method: 'IntersectionObserver'
                });
            }
            else {
                // Method 2: Fallback to periodic checking
                this.visibilityCheckInterval = window.setInterval(() => {
                    const isVisible = this.checkVisibility();
                    if (this.isPanelVisible !== isVisible) {
                        this.isPanelVisible = isVisible;
                        this.logVisibilityChange(isVisible, 'periodic-check', id, callbacks);
                        onVisibilityStateChange(isVisible);
                    }
                }, 250); // Check every 250ms
                debugLogger.log('WIDGET-STATE', {
                    event: 'visibility-detection-setup',
                    widgetId: id,
                    method: 'periodic-check'
                });
            }
        }, 100);
    }
    /**
     * Cleans up visibility detection observers/intervals.
     */
    cleanup() {
        // Clean up IntersectionObserver
        if (this.visibilityObserver) {
            this.visibilityObserver.disconnect();
            this.visibilityObserver = null;
        }
        // Clean up interval
        if (this.visibilityCheckInterval !== null) {
            clearInterval(this.visibilityCheckInterval);
            this.visibilityCheckInterval = null;
        }
        this.widgetElement = null;
    }
    /**
     * Gets current visibility state.
     */
    getIsPanelVisible() {
        return this.isPanelVisible;
    }
    /**
     * Notifies HelperSimple on mount.
     */
    notifyMount(widgetId) {
        const openEvent = new CustomEvent(QUERYSIMPLE_WIDGET_STATE_EVENT, {
            detail: {
                widgetId,
                isOpen: true
            },
            bubbles: true,
            cancelable: true
        });
        window.dispatchEvent(openEvent);
        debugLogger.log('WIDGET-STATE', {
            event: 'widget-mounted',
            widgetId,
            timestamp: new Date().toISOString()
        });
    }
    /**
     * Notifies HelperSimple on unmount.
     */
    notifyUnmount(widgetId) {
        const closeEvent = new CustomEvent(QUERYSIMPLE_WIDGET_STATE_EVENT, {
            detail: {
                widgetId,
                isOpen: false
            },
            bubbles: true,
            cancelable: true
        });
        window.dispatchEvent(closeEvent);
        debugLogger.log('WIDGET-STATE', {
            event: 'widget-unmounted',
            widgetId,
            timestamp: new Date().toISOString()
        });
    }
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-zoom-to-records.ts":
/*!***************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/hooks/use-zoom-to-records.ts ***!
  \***************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   useZoomToRecords: () => (/* binding */ useZoomToRecords)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var _zoom_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../zoom-utils */ "./your-extensions/widgets/query-simple/src/runtime/zoom-utils.ts");
/**
 * Hook for zooming to feature records with padding.
 *
 * Wraps the shared zoomToRecords utility function in a React hook.
 */
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};


/**
 * Custom hook that returns a function to zoom to records with padding.
 *
 * @param mapView - The map view to zoom
 * @returns A function that takes records and optional padding, and zooms to them
 */
function useZoomToRecords(mapView) {
    return react__WEBPACK_IMPORTED_MODULE_0__["default"].useCallback((records, options) => __awaiter(this, void 0, void 0, function* () {
        if (!mapView) {
            return;
        }
        yield (0,_zoom_utils__WEBPACK_IMPORTED_MODULE_1__.zoomToRecords)(mapView, records, options);
    }), [mapView]);
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/interactive-draw-tool.tsx":
/*!************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/interactive-draw-tool.tsx ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   InteractiveDraw: () => (/* binding */ InteractiveDraw)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");

/** @jsx jsx */





const sketchToolInfoMap = {
    [_config__WEBPACK_IMPORTED_MODULE_3__.CreateToolType.Point]: { drawToolName: 'point', esriClassName: 'esri-icon-point', toolIndex: 0 },
    [_config__WEBPACK_IMPORTED_MODULE_3__.CreateToolType.Polyline]: { drawToolName: 'polyline', esriClassName: 'esri-icon-polyline', toolIndex: 4 },
    [_config__WEBPACK_IMPORTED_MODULE_3__.CreateToolType.Polygon]: { drawToolName: 'polygon', esriClassName: 'esri-icon-polygon', toolIndex: 2 },
    [_config__WEBPACK_IMPORTED_MODULE_3__.CreateToolType.Rectangle]: {
        drawToolName: 'rectangle',
        esriClassName: 'esri-icon-checkbox-unchecked',
        toolIndex: 1
    },
    [_config__WEBPACK_IMPORTED_MODULE_3__.CreateToolType.Circle]: { drawToolName: 'circle', esriClassName: 'esri-icon-radio-unchecked', toolIndex: 3 }
};
function InteractiveDraw(props) {
    const { toolTypes = [], jimuMapView, onDrawEnd, widgetId } = props;
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_5__["default"]);
    const [mapModule, setMapModule] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const getLayerFunRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const graphicRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const [clearAfterApply, setClearAfterApply] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(false);
    const visibleElements = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return {
            createTools: Object.entries(sketchToolInfoMap).reduce((result, [key, value]) => (Object.assign(Object.assign({}, result), { [value.drawToolName]: toolTypes.includes(key) })), { point: false }),
            selectionTools: {
                'lasso-selection': false,
                'rectangle-selection': false
            },
            settingsMenu: false,
            undoRedoMenu: false,
            deleteButton: true
        };
    }, [toolTypes]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        jimu_core__WEBPACK_IMPORTED_MODULE_1__.moduleLoader.loadModule('jimu-ui/advanced/map').then((result) => {
            setMapModule(result);
        });
    });
    const handleDrawToolCreated = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((jimuDrawToolsRef) => {
        getLayerFunRef.current = jimuDrawToolsRef.getGraphicsLayer;
    }, []);
    const handleDrawStart = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        getLayerFunRef.current && (getLayerFunRef.current)().removeAll();
    }, []);
    const handleDrawEnd = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((graphic) => {
        graphicRef.current = graphic;
        onDrawEnd(graphic, getLayerFunRef.current, clearAfterApply);
    }, [onDrawEnd, clearAfterApply]);
    const handleCleared = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        graphicRef.current = null;
        onDrawEnd(null);
    }, [onDrawEnd]);
    const handleClearSettingChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((e) => {
        if (graphicRef.current) {
            onDrawEnd(graphicRef.current, getLayerFunRef.current, e.target.checked);
        }
        setClearAfterApply(e.target.checked);
    }, [onDrawEnd]);
    const JimuDraw = mapModule === null || mapModule === void 0 ? void 0 : mapModule.JimuDraw;
    if (!JimuDraw) {
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_4__.StatusIndicator, { statusType: widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_4__.EntityStatusType.Loading });
    }
    const isAvailable = Object.keys(visibleElements.createTools).some(toolName => visibleElements.createTools[toolName]);
    if (!isAvailable) {
        return null;
    }
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(JimuDraw, { jimuMapView: jimuMapView, operatorWidgetId: widgetId, disableSymbolSelector: true, drawingOptions: {
                    creationMode: mapModule.JimuDrawCreationMode.Single,
                    updateOnGraphicClick: false,
                    visibleElements: visibleElements
                }, uiOptions: {
                    isHideBorder: true
                }, onJimuDrawCreated: handleDrawToolCreated, onDrawingStarted: handleDrawStart, onDrawingFinished: handleDrawEnd, onDrawingCleared: handleCleared }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("label", { className: 'd-flex align-items-center', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Checkbox, { checked: clearAfterApply, onChange: handleClearSettingChange, className: 'mr-2' }), getI18nMessage('clearDrawing')] })] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/loading-result.tsx":
/*!*****************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/loading-result.tsx ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   LoadingResult: () => (/* binding */ LoadingResult)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_theme__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-theme */ "jimu-theme");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");





const Root = jimu_theme__WEBPACK_IMPORTED_MODULE_3__.styled.div `
  position: absolute;
  top: 0;
  bottom: 0;
  right: 0;
  left: 0;
  z-index: 2;

  .loading-content {
    .loading-tip {
      position: relative;
    }
  }
`;
function LoadingResult() {
    const translate = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_4__["default"]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Root, { children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'loading-content w-100 px-4 d-flex flex-column justify-content-center align-items-center', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { role: 'alert', "aria-live": 'assertive', className: 'text-paper', children: translate('retrieving') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Loading, { className: 'loading-tip mt-8', type: jimu_ui__WEBPACK_IMPORTED_MODULE_2__.LoadingType.Donut })] }) }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-result-item.tsx":
/*!********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-result-item.tsx ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryResultItem: () => (/* binding */ QueryResultItem)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_icons_outlined_editor_trash__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-icons/outlined/editor/trash */ "./jimu-icons/outlined/editor/trash.tsx");
/* harmony import */ var _components_feature_info__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./components/feature-info */ "./your-extensions/widgets/query-simple/src/runtime/components/feature-info.tsx");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");

/** @jsx jsx */






const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_6__.createQuerySimpleDebugLogger)();
const style = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
  overflow: auto;
  flex-flow: row;
  cursor: pointer;
  flex-shrink: 0;
  min-height: 2rem;
  position: relative;
  &.selected {
    outline: 2px solid var(--sys-color-primary-main);
  }
  
  .remove-button {
    position: absolute;
    top: 4px;
    right: 4px;
    z-index: 10;
    opacity: 0.7;
    transition: opacity 0.2s;
    
    &:hover {
      opacity: 1;
    }
    
    // Larger touch target for mobile/accessibility
    min-width: 32px;
    min-height: 32px;
  }
`;
/**
 * QueryResultItem component - displays a single query result record
 * Features:
 * - Clicking the item zooms to the feature on the map
 * - Remove button (trash icon) in upper-right corner to remove record from results
 * - Records are expanded by default to show full feature information
 */
const QueryResultItem = (props) => {
    const { widgetId, data, dataSource, popupTemplate, defaultPopupTemplate, onClick, onRemove, expandByDefault = false } = props;
    const recordId = data.getId();
    // Log when QueryResultItem renders
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        debugLogger.log('EXPAND-COLLAPSE', {
            event: 'QueryResultItem-render',
            recordId,
            expandByDefault,
            timestamp: Date.now()
        });
    }, [recordId, expandByDefault]);
    // Check if this record is currently selected
    const selected = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => { var _a, _b, _c; return (_c = (_b = (_a = state.dataSourcesInfo) === null || _a === void 0 ? void 0 : _a[dataSource.id]) === null || _b === void 0 ? void 0 : _b.selectedIds) === null || _c === void 0 ? void 0 : _c.includes(data.getId()); });
    // Determine if list is displayed vertically (affects FeatureInfo expandability)
    const isVerticalAlign = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const widgetJson = state.appConfig.widgets[widgetId];
        return widgetJson.config.resultListDirection !== _config__WEBPACK_IMPORTED_MODULE_5__.ListDirection.Horizontal;
    });
    // Handle clicking on the result item - zooms to feature on map
    const handleClickResultItem = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((e) => {
        // Don't trigger zoom if clicking the remove button
        if (e.target.closest('.remove-button')) {
            return;
        }
        onClick(data);
    }, [onClick, data]);
    // Handle clicking the remove button - removes record from results and selection
    const handleRemove = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((e) => {
        e.stopPropagation(); // Prevent triggering the item click handler
        e.preventDefault();
        onRemove(data);
    }, [onRemove, data]);
    const onKeyUp = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((evt) => {
        if (evt.key === 'Enter' || evt.key === ' ') {
            evt.preventDefault();
            evt.stopPropagation();
            handleClickResultItem(evt);
        }
    }, [handleClickResultItem]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('query-result-item', { selected }), onClick: handleClickResultItem, onKeyUp: onKeyUp, css: style, role: 'option', "aria-selected": selected, tabIndex: 0, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_feature_info__WEBPACK_IMPORTED_MODULE_4__["default"], { graphic: data.feature, popupTemplate: popupTemplate, defaultPopupTemplate: defaultPopupTemplate, togglable: isVerticalAlign, expandByDefault: expandByDefault, dataSource: dataSource }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { title: "Remove result", placement: "bottom", children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { className: "remove-button", icon: true, size: "sm", variant: "text", color: "inherit", onClick: handleRemove, "aria-label": "Remove result", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
            padding: 6px;
            min-width: 32px;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
          `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_editor_trash__WEBPACK_IMPORTED_MODULE_3__.TrashOutlined, { size: 18 }) }) })] }));
};


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-result.tsx":
/*!***************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-result.tsx ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTaskResult: () => (/* binding */ QueryTaskResult)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _widget_config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./widget-config */ "./your-extensions/widgets/query-simple/src/runtime/widget-config.ts");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _hooks_use_zoom_to_records__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./hooks/use-zoom-to-records */ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-zoom-to-records.ts");
/* harmony import */ var _simple_list__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./simple-list */ "./your-extensions/widgets/query-simple/src/runtime/simple-list.tsx");
/* harmony import */ var _query_utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./query-utils */ "./your-extensions/widgets/query-simple/src/runtime/query-utils.ts");
/* harmony import */ var _default_query_item__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../default-query-item */ "./your-extensions/widgets/query-simple/src/default-query-item.ts");
/* harmony import */ var jimu_icons_outlined_directional_arrow_left__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! jimu-icons/outlined/directional/arrow-left */ "./jimu-icons/outlined/directional/arrow-left.tsx");
/* harmony import */ var jimu_icons_outlined_directional_expand_all__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! jimu-icons/outlined/directional/expand-all */ "./jimu-icons/outlined/directional/expand-all.tsx");
/* harmony import */ var jimu_icons_outlined_directional_collapse_all__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! jimu-icons/outlined/directional/collapse-all */ "./jimu-icons/outlined/directional/collapse-all.tsx");
/* harmony import */ var _data_actions__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../data-actions */ "./your-extensions/widgets/query-simple/src/data-actions/index.tsx");
/* harmony import */ var _selection_utils__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");
/* harmony import */ var _results_management_utils__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./results-management-utils */ "./your-extensions/widgets/query-simple/src/runtime/results-management-utils.ts");
/* harmony import */ var _graphics_layer_utils__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./graphics-layer-utils */ "./your-extensions/widgets/query-simple/src/runtime/graphics-layer-utils.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};

/** @jsx jsx */






// FORCED: Always SimpleList - LazyList and PagingList removed











const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_17__.createQuerySimpleDebugLogger)();

const { iconMap } = (0,_widget_config__WEBPACK_IMPORTED_MODULE_3__.getWidgetRuntimeDataMap)();
/**
 * Custom event name for requesting restoration when identify popup closes.
 */
const RESTORE_ON_IDENTIFY_CLOSE_EVENT = 'querysimple-restore-on-identify-close';
/**
 * Detects if an identify popup is currently visible in the DOM.
 * Uses verified selectors based on Experience Builder's identify popup structure.
 *
 * @returns true if identify popup is detected and visible, false otherwise
 */
function isIdentifyPopupOpen() {
    // Primary selector: .esri-popup with role="dialog"
    const popup = document.querySelector('.esri-popup[role="dialog"]');
    if (!popup) {
        return false;
    }
    // Verify it's visible (not hidden)
    const ariaHidden = popup.getAttribute('aria-hidden');
    if (ariaHidden === 'true') {
        return false;
    }
    // Additional check: verify computed style shows it's visible
    const style = window.getComputedStyle(popup);
    if (style.display === 'none' || style.visibility === 'hidden' || style.opacity === '0') {
        return false;
    }
    // Verify it contains esri-features (identify popup structure)
    const hasFeatures = popup.querySelector('.esri-features');
    if (!hasFeatures) {
        return false;
    }
    return true;
}
const resultStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
  display: flex;
  flex-direction: column;

  .query-result__header {
    color: var(--sys-color-surface-paper-text);
    font-weight: 500;
    font-size: 0.875rem;
    line-height: 1.5;
    border-bottom: 1px solid var(--sys-color-divider-secondary);
    margin-bottom: 6px;
    padding-bottom: 8px;
  }

  .query-result-container {
    flex: 1 1 0;
    display: flex;
    flex-direction: column;
    overflow: auto;
    min-height: 0;
  }

  .query-result-info {
    height: 18px;
  }
`;
function QueryTaskResult(props) {
    var _a, _b;
    const { queryItem, queryParams, resultCount, maxPerPage, records, widgetId, outputDS, runtimeZoomToSelected, onNavBack, resultsMode, accumulatedRecords, onAccumulatedRecordsChange, useGraphicsLayerForHighlight, graphicsLayer, mapView, eventManager, isQuerySwitchInProgressRef } = props;
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_5__["default"]);
    const intl = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.useIntl)();
    const zoomToRecords = (0,_hooks_use_zoom_to_records__WEBPACK_IMPORTED_MODULE_6__.useZoomToRecords)(mapView);
    const [queryData, setQueryData] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const [selectedRecords, setSelectedRecords] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState([]);
    // FIX (r018.94): Removed removedRecordIds state - no longer needed since records stay in sync
    const currentItem = Object.assign({}, _default_query_item__WEBPACK_IMPORTED_MODULE_9__.DEFAULT_QUERY_ITEM, queryItem);
    const [expandAll, setExpandAll] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState((_a = currentItem.resultExpandByDefault) !== null && _a !== void 0 ? _a : false);
    // Track individual item expansion states to maintain state when items are removed
    const [itemExpandStates, setItemExpandStates] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(new Map());
    const backBtnRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(undefined);
    // Track expandAll changes for debugging
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        debugLogger.log('RESULTS-MODE', {
            event: 'expandAll-state-changed',
            widgetId,
            expandAll,
            queryItemConfigId: queryItem.configId,
            timestamp: Date.now()
        });
    }, [expandAll, widgetId, queryItem.configId]);
    // Track if we've already selected these records to prevent re-selection when switching tabs
    const hasSelectedRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(false);
    // Track the last records we selected to detect when new records come in
    const lastSelectedRecordsRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef([]);
    // Track the original query record IDs (not selected IDs) to detect when query results change
    const lastQueryRecordIdsRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef([]);
    // Track the last selected FeatureDataRecords for restoration (if needed)
    const lastSelectedFeatureRecordsRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef([]);
    // FIX (r018.94): Removed removedRecordIds ref - no longer needed
    // Error state for user-facing errors
    const [selectionError, setSelectionError] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const extraActions = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return (0,_data_actions__WEBPACK_IMPORTED_MODULE_13__.getExtraActions)(widgetId, outputDS, mapView, intl, queryItem, runtimeZoomToSelected);
    }, [widgetId, outputDS, mapView, intl, queryItem, runtimeZoomToSelected]);
    const enableDataAction = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        var _a;
        const widgetJson = state.appConfig.widgets[widgetId];
        return (_a = widgetJson.enableDataAction) !== null && _a !== void 0 ? _a : true;
    });
    const pagingTypeInConfig = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const widgetJson = state.appConfig.widgets[widgetId];
        return widgetJson.config.resultPagingStyle;
    });
    const directionTypeInConfig = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const widgetJson = state.appConfig.widgets[widgetId];
        return widgetJson.config.resultListDirection;
    });
    // FORCE SimpleList - ignore config, we're done with lazy loading issues
    const pagingType = _config__WEBPACK_IMPORTED_MODULE_4__.PagingType.Simple;
    const direction = directionTypeInConfig !== null && directionTypeInConfig !== void 0 ? directionTypeInConfig : _config__WEBPACK_IMPORTED_MODULE_4__.ListDirection.Vertical;
    // Group records by origin data source for DataActionList
    // This ensures DataActionList recognizes records even when they come from different queries/origins
    const actionDataSets = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        var _a, _b, _c, _d;
        // Debug: Log what records are available
        debugLogger.log('RESULTS-MODE', {
            event: 'actionDataSets-calculation-start',
            widgetId: widgetId,
            selectedRecordsCount: (selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) || 0,
            queryDataRecordsCount: ((_a = queryData === null || queryData === void 0 ? void 0 : queryData.records) === null || _a === void 0 ? void 0 : _a.length) || 0,
            recordsPropCount: (records === null || records === void 0 ? void 0 : records.length) || 0,
            outputDSId: outputDS === null || outputDS === void 0 ? void 0 : outputDS.id,
            hasSelectedRecords: (selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) > 0,
            hasQueryDataRecords: ((_b = queryData === null || queryData === void 0 ? void 0 : queryData.records) === null || _b === void 0 ? void 0 : _b.length) > 0,
            hasRecordsProp: (records === null || records === void 0 ? void 0 : records.length) > 0
        });
        const isAccumulationMode = resultsMode === _config__WEBPACK_IMPORTED_MODULE_4__.SelectionType.AddToSelection || resultsMode === _config__WEBPACK_IMPORTED_MODULE_4__.SelectionType.RemoveFromSelection;
        // In accumulation modes (Add/Remove), prefer the 'records' prop (the accumulated set)
        // because outputDS.getSelectedRecords() will only return records that match the current query's where clause.
        const recordsToUse = isAccumulationMode
            ? (records || [])
            : ((selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) > 0 ? selectedRecords : (((_c = queryData === null || queryData === void 0 ? void 0 : queryData.records) === null || _c === void 0 ? void 0 : _c.length) > 0 ? queryData.records : (records || [])));
        // If no records, return single DataRecordSet with empty records using outputDS
        if (!recordsToUse || recordsToUse.length === 0) {
            const emptyDataSet = {
                dataSource: outputDS,
                type: 'loaded',
                records: [],
                name: outputDS === null || outputDS === void 0 ? void 0 : outputDS.id,
                label: outputDS === null || outputDS === void 0 ? void 0 : outputDS.getLabel()
            };
            debugLogger.log('RESULTS-MODE', {
                event: 'actionDataSets-empty-records',
                widgetId: widgetId,
                dataSetDataSourceId: (_d = emptyDataSet.dataSource) === null || _d === void 0 ? void 0 : _d.id
            });
            return [emptyDataSet];
        }
        // Group records by their origin data source
        const recordsByOriginDS = new Map();
        recordsToUse.forEach(record => {
            var _a, _b, _c, _d;
            const recordDS = (_b = (_a = record).getDataSource) === null || _b === void 0 ? void 0 : _b.call(_a);
            let originDS = null;
            if (recordDS) {
                originDS = ((_c = recordDS.getOriginDataSources()) === null || _c === void 0 ? void 0 : _c[0]) || recordDS;
            }
            else if (outputDS) {
                // Fallback: use outputDS's origin if record doesn't have dataSource
                originDS = ((_d = outputDS.getOriginDataSources()) === null || _d === void 0 ? void 0 : _d[0]) || outputDS;
            }
            if (originDS) {
                if (!recordsByOriginDS.has(originDS)) {
                    recordsByOriginDS.set(originDS, []);
                }
                recordsByOriginDS.get(originDS).push(record);
            }
        });
        // Create a DataRecordSet for each origin data source
        const dataSets = Array.from(recordsByOriginDS.entries()).map(([originDS, originRecords]) => {
            const dataSet = {
                dataSource: originDS, // Use origin DS, not outputDS
                type: 'selected',
                records: originRecords,
                name: originDS.id,
                label: originDS.getLabel()
            };
            // Add fields if needed (use currentItem's field settings)
            if (currentItem.resultFieldsType === _config__WEBPACK_IMPORTED_MODULE_4__.FieldsType.SelectAttributes && currentItem.resultDisplayFields != null) {
                dataSet.fields = (0,_query_utils__WEBPACK_IMPORTED_MODULE_8__.combineFields)(currentItem.resultDisplayFields, currentItem.resultTitleExpression);
            }
            else if (originDS && 'getPopupInfo' in originDS) {
                // use fields in popup template from origin DS
                const popupInfo = originDS.getPopupInfo();
                if (popupInfo === null || popupInfo === void 0 ? void 0 : popupInfo.fieldInfos) {
                    dataSet.fields = popupInfo.fieldInfos.filter((fieldInfo) => fieldInfo.visible).map((fieldInfo) => fieldInfo.fieldName);
                }
            }
            return dataSet;
        });
        // Debug: Log what the final dataSets contain
        debugLogger.log('RESULTS-MODE', {
            event: 'actionDataSets-final',
            widgetId: widgetId,
            dataSetsCount: dataSets.length,
            totalRecordsCount: recordsToUse.length,
            dataSetsByOrigin: dataSets.map(ds => {
                var _a, _b;
                return ({
                    originDSId: (_a = ds.dataSource) === null || _a === void 0 ? void 0 : _a.id,
                    recordsCount: ((_b = ds.records) === null || _b === void 0 ? void 0 : _b.length) || 0,
                    type: ds.type
                });
            })
        });
        // If we couldn't group by origin (shouldn't happen), fallback to single DataRecordSet with outputDS
        if (dataSets.length === 0 && outputDS) {
            debugLogger.log('RESULTS-MODE', {
                event: 'actionDataSets-fallback-to-outputDS',
                widgetId: widgetId,
                reason: 'could-not-determine-origin-ds'
            });
            return [{
                    dataSource: outputDS,
                    type: recordsToUse.length > 0 ? 'selected' : 'loaded',
                    records: recordsToUse,
                    name: outputDS.id,
                    label: outputDS.getLabel()
                }];
        }
        return dataSets;
    }, [selectedRecords, outputDS, queryData, currentItem, records, widgetId]);
    // FIX (r018.94): Simplified - no filtering needed since records are kept in sync
    // Memoize records to prevent unnecessary re-renders that reset scroll position
    // This ensures the records prop only changes when the actual data changes, not just the array reference
    const filteredRecordsForList = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return (queryData === null || queryData === void 0 ? void 0 : queryData.records) || records || [];
    }, [queryData === null || queryData === void 0 ? void 0 : queryData.records, records]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        // focus the back button when it is rendered
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.focusElementInKeyboardMode)(backBtnRef.current);
    });
    /**
     * Effect hook that runs when new query results arrive.
     * Resets removed records, expand state, and query data for the new results.
     * Also handles auto-selection of records when they first arrive.
     */
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        // Check if these are new records (different from what we last queried)
        // IMPORTANT: Compare against original query results, not selected results
        // This prevents removedRecordIds from being reset when records are removed
        const currentRecordIds = (records === null || records === void 0 ? void 0 : records.map(record => record.getId())) || [];
        const recordsChanged = currentRecordIds.length !== lastQueryRecordIdsRef.current.length ||
            currentRecordIds.some((id, index) => id !== lastQueryRecordIdsRef.current[index]);
        // FIX (r018.94): Simplified - no removedRecordIds tracking needed
        debugLogger.log('RESULTS-MODE', {
            event: 'records-prop-changed',
            widgetId: widgetId,
            recordsCount: (records === null || records === void 0 ? void 0 : records.length) || 0,
            willSetQueryData: records && records.length > 0,
            hasSelectedRef: hasSelectedRef.current,
            recordsChanged: recordsChanged,
            lastQueryRecordIdsCount: lastQueryRecordIdsRef.current.length,
            currentRecordIdsCount: currentRecordIds.length,
            note: 'r018.94: Records stay in sync - no filtering needed',
            timestamp: Date.now()
        });
        // Update the original query record IDs ref
        if (recordsChanged) {
            lastQueryRecordIdsRef.current = currentRecordIds;
            debugLogger.log('RESULTS-MODE', {
                event: 'records-changed-ref-updated',
                widgetId: widgetId,
                newRecordIdsCount: currentRecordIds.length,
                timestamp: Date.now()
            });
        }
        // NOTE: Don't reset expandAll here - it's handled by the queryItem-change useEffect
        // Resetting it here causes the Expand/Collapse button to flip back when records are removed
        setQueryData({
            records,
            page: 1
        });
        // FIX (r018.94): Simplified - no removedRecordIds check needed
        // Only auto-select records if:
        // 1. We have records and outputDS
        // 2. We haven't already selected these records (hasSelectedRef is false)
        // 3. OR the records have actually changed (new query results)
        if (records && records.length > 0 && outputDS &&
            (!hasSelectedRef.current || recordsChanged)) {
            const recordIds = records.map(record => record.getId());
            const fdr = records;
            (() => __awaiter(this, void 0, void 0, function* () {
                try {
                    setSelectionError(null); // Clear previous errors
                    yield (0,_selection_utils__WEBPACK_IMPORTED_MODULE_14__.selectRecordsAndPublish)(widgetId, outputDS, recordIds, fdr, false, useGraphicsLayerForHighlight, graphicsLayer, mapView);
                    hasSelectedRef.current = true; // Mark as selected
                    lastSelectedRecordsRef.current = recordIds; // Store the IDs we selected
                    lastSelectedFeatureRecordsRef.current = fdr; // Store the full records for potential restoration
                    // Notify Widget and HelperSimple of selection change
                    (0,_selection_utils__WEBPACK_IMPORTED_MODULE_14__.dispatchSelectionEvent)(widgetId, recordIds, outputDS, queryItem.configId, eventManager);
                }
                catch (error) {
                    const errorMessage = error instanceof Error ? error.message : 'Failed to select query results';
                    setSelectionError(errorMessage);
                    debugLogger.log('TASK', {
                        event: 'selection-failed-query-result',
                        error: errorMessage,
                        errorStack: error instanceof Error ? error.stack : undefined,
                        recordCount: recordIds.length
                    });
                }
            }))();
        }
        else if (recordsChanged && records && records.length === 0) {
            // If records were cleared, reset the selection flag
            hasSelectedRef.current = false;
            lastSelectedRecordsRef.current = [];
            setSelectionError(null); // Clear errors when clearing records
        }
        else {
            debugLogger.log('RESULTS-MODE', {
                event: 'auto-selection-skipped',
                widgetId: widgetId,
                recordsCount: (records === null || records === void 0 ? void 0 : records.length) || 0,
                hasRecords: !!(records && records.length > 0),
                hasOutputDS: !!outputDS,
                hasSelectedRef: hasSelectedRef.current,
                recordsChanged: recordsChanged,
                timestamp: Date.now()
            });
        }
    }, [records, outputDS, widgetId, queryItem.configId, queryItem.resultExpandByDefault]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        // clear selection when resultSelectMode changed
        if (outputDS) {
            (0,_selection_utils__WEBPACK_IMPORTED_MODULE_14__.clearSelectionInDataSources)(outputDS, useGraphicsLayerForHighlight, graphicsLayer);
            (0,_selection_utils__WEBPACK_IMPORTED_MODULE_14__.publishSelectionMessage)(widgetId, [], outputDS, true);
        }
    }, [queryItem.resultSelectMode, outputDS, widgetId, useGraphicsLayerForHighlight, graphicsLayer]);
    // Update expandAll when queryItem changes (e.g., switching between queries)
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        const newExpandAll = (_a = queryItem.resultExpandByDefault) !== null && _a !== void 0 ? _a : false;
        debugLogger.log('RESULTS-MODE', {
            event: 'expandAll-reset-by-queryItem-change',
            widgetId,
            queryItemConfigId: queryItem.configId,
            resultExpandByDefault: queryItem.resultExpandByDefault,
            newExpandAll,
            timestamp: Date.now()
        });
        setExpandAll(newExpandAll);
        // Reset individual expansion states when query changes
        setItemExpandStates(new Map());
    }, [queryItem.configId]);
    /**
     * Monitor origin data source selection changes to detect when other widgets (like map identify)
     * clear our selections. Enhanced with identify popup detection for testing scenarios.
     * Watches the origin data source's selection state directly via polling.
     */
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        if (!outputDS)
            return;
        const originDS = (_a = outputDS.getOriginDataSources()) === null || _a === void 0 ? void 0 : _a[0];
        if (!originDS)
            return;
        const originDSId = originDS.id;
        let previousSelectedIds = [];
        let identifyPopupWasOpen = false;
        let lastLogTime = 0;
        const LOG_THROTTLE_MS = 1000; // Throttle logs to once per second
        // Initial check
        previousSelectedIds = originDS.getSelectedRecordIds() || [];
        identifyPopupWasOpen = isIdentifyPopupOpen();
        // Watch for selection changes on the origin data source
        const checkSelection = () => {
            const currentSelectedIds = originDS.getSelectedRecordIds() || [];
            const ourExpectedIds = lastSelectedRecordsRef.current;
            const hasOurSelection = ourExpectedIds.length > 0;
            const identifyPopupIsOpen = isIdentifyPopupOpen();
            // Detect if selection was cleared or changed externally
            const wasCleared = previousSelectedIds.length > 0 && currentSelectedIds.length === 0;
            const wasChanged = previousSelectedIds.length > 0 &&
                (currentSelectedIds.length !== previousSelectedIds.length ||
                    !currentSelectedIds.every(id => previousSelectedIds.includes(id)));
            // NEW: Detect if selection was added (went from empty to having records)
            const wasAdded = previousSelectedIds.length === 0 && currentSelectedIds.length > 0;
            // Track identify popup state changes
            const identifyPopupJustOpened = !identifyPopupWasOpen && identifyPopupIsOpen;
            const identifyPopupJustClosed = identifyPopupWasOpen && !identifyPopupIsOpen;
            const identifyPopupStillOpen = identifyPopupWasOpen && identifyPopupIsOpen;
            // Log identify popup state changes
            const now = Date.now();
            if (identifyPopupJustOpened || identifyPopupJustClosed) {
                debugLogger.log('SELECTION', {
                    event: identifyPopupJustOpened ? 'identify-popup-opened' : 'identify-popup-closed',
                    originDSId,
                    ourSelectionCount: ourExpectedIds.length,
                    currentSelectionCount: currentSelectedIds.length,
                    timestamp: new Date().toISOString()
                });
                // If identify popup just closed and selection was cleared, dispatch restore event
                if (identifyPopupJustClosed && wasCleared && hasOurSelection && ourExpectedIds.length > 0) {
                    const restoreEvent = new CustomEvent(RESTORE_ON_IDENTIFY_CLOSE_EVENT, {
                        detail: {
                            widgetId,
                            recordIds: ourExpectedIds,
                            outputDsId: outputDS.id,
                            queryItemConfigId: queryItem.configId
                        },
                        bubbles: true,
                        cancelable: true
                    });
                    window.dispatchEvent(restoreEvent);
                    debugLogger.log('SELECTION', {
                        event: 'identify-popup-closed-restore-requested',
                        widgetId,
                        recordCount: ourExpectedIds.length,
                        outputDsId: outputDS.id,
                        queryItemConfigId: queryItem.configId
                    });
                }
            }
            // Log ALL selection changes (not just when we have our own selection)
            if (wasCleared || wasChanged || wasAdded) {
                // Check if this matches our expected selection
                const matchesOurSelection = hasOurSelection &&
                    ourExpectedIds.length === currentSelectedIds.length &&
                    ourExpectedIds.every(id => currentSelectedIds.includes(id));
                // Determine what would happen (for testing/logging)
                const wouldRestore = wasCleared && identifyPopupIsOpen && hasOurSelection && ourExpectedIds.length > 0;
                // Determine scenario
                let scenario = 'Unknown';
                if (wasAdded && !hasOurSelection) {
                    scenario = 'TEST SCENARIO 4: Another widget selected records (we have no selection)';
                }
                else if (wasChanged && !matchesOurSelection && !hasOurSelection) {
                    scenario = 'TEST SCENARIO 5: Another widget changed selection (we have no selection)';
                }
                else if (wasChanged && !matchesOurSelection && hasOurSelection) {
                    scenario = identifyPopupIsOpen
                        ? 'TEST SCENARIO 2: Query  Identify (selection changed, not cleared)  Would NOT restore'
                        : 'TEST SCENARIO 3: Query  Another QuerySimple widget  Would NOT restore';
                }
                else if (wasCleared && hasOurSelection) {
                    scenario = identifyPopupIsOpen
                        ? 'TEST SCENARIO 1: Query  Identify  Would restore'
                        : 'TEST SCENARIO 3: Query  Another QuerySimple widget (cleared)  Would NOT restore';
                }
                else if (wasAdded && hasOurSelection) {
                    scenario = matchesOurSelection
                        ? 'Our widget selected records'
                        : 'Another widget selected different records';
                }
                // Log detection with identify popup state (throttled)
                if (now - lastLogTime > LOG_THROTTLE_MS) {
                    debugLogger.log('SELECTION', {
                        event: wasCleared ? 'selection-cleared' : wasChanged ? 'selection-changed' : 'selection-added',
                        originDSId,
                        ourExpectedCount: ourExpectedIds.length,
                        previousSelectedCount: previousSelectedIds.length,
                        currentSelectedCount: currentSelectedIds.length,
                        wasCleared,
                        wasChanged,
                        wasAdded,
                        hasOurSelection,
                        matchesOurSelection,
                        identifyPopupIsOpen,
                        identifyPopupJustOpened,
                        identifyPopupStillOpen,
                        identifyPopupJustClosed,
                        wouldRestore,
                        ourExpectedIds: ourExpectedIds.slice(0, 5),
                        previousSelectedIds: previousSelectedIds.slice(0, 5),
                        currentSelectedIds: currentSelectedIds.slice(0, 5),
                        timestamp: new Date().toISOString(),
                        note: wouldRestore
                            ? 'Would restore selection (cleared + identify popup open)'
                            : identifyPopupIsOpen && wasChanged
                                ? 'Identify popup open but selection changed (not cleared) - would not restore'
                                : wasCleared && !identifyPopupIsOpen
                                    ? 'Selection cleared, checking if identify popup opens...'
                                    : wasAdded
                                        ? hasOurSelection && matchesOurSelection
                                            ? 'Our widget selected records'
                                            : hasOurSelection && !matchesOurSelection
                                                ? 'Another widget selected different records'
                                                : 'Selection added (by another widget or external source)'
                                        : 'No identify popup detected - would not restore'
                    });
                    lastLogTime = now;
                }
            }
            previousSelectedIds = [...currentSelectedIds];
            identifyPopupWasOpen = identifyPopupIsOpen;
        };
        // Check periodically (every 500ms)
        const intervalId = setInterval(checkSelection, 500);
        return () => {
            clearInterval(intervalId);
        };
    }, [outputDS]);
    /**
     * Clears all results. Resets local state and delegates to parent's clearResult method.
     */
    const clearResults = () => __awaiter(this, void 0, void 0, function* () {
        // Log hash state before clearing
        const hashBefore = window.location.hash.substring(1);
        const urlParamsBefore = new URLSearchParams(hashBefore);
        const hashParamsBefore = {};
        urlParamsBefore.forEach((value, key) => {
            hashParamsBefore[key] = value;
        });
        debugLogger.log('HASH', {
            event: 'clearResults-called',
            widgetId,
            hashBefore: hashBefore,
            hashParamsBefore: hashParamsBefore,
            hashParamsCount: Object.keys(hashParamsBefore).length,
            timestamp: Date.now()
        });
        // FIX (r018.97): Simplified - just delegate to parent's clearResult
        // Parent handles all cleanup: records, selection, graphics, hash, messages, etc.
        // Local state will be reset when component remounts with fresh results
        yield onNavBack(true);
        // Log hash state after clearing (with delay to catch async updates)
        setTimeout(() => {
            const hashAfter = window.location.hash.substring(1);
            const urlParamsAfter = new URLSearchParams(hashAfter);
            const hashParamsAfter = {};
            urlParamsAfter.forEach((value, key) => {
                hashParamsAfter[key] = value;
            });
            debugLogger.log('HASH', {
                event: 'clearResults-completed',
                widgetId,
                hashBefore: hashBefore,
                hashAfter: hashAfter,
                hashParamsBefore: hashParamsBefore,
                hashParamsAfter: hashParamsAfter,
                hashParamsRemoved: Object.keys(hashParamsBefore).length - Object.keys(hashParamsAfter).length,
                hashParamsCountBefore: Object.keys(hashParamsBefore).length,
                hashParamsCountAfter: Object.keys(hashParamsAfter).length,
                stillHasHashParams: Object.keys(hashParamsAfter).length > 0,
                timestamp: Date.now()
            });
        }, 100);
    });
    const handleRenderDone = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(({ dataItems, pageSize, page }) => {
        // FIX (r018.92): Skip handleRenderDone if a query switch is in progress
        // This prevents handleRenderDone from re-selecting full query results before the query switch
        // logic can clear the graphics layer and re-select only the accumulated records
        if (isQuerySwitchInProgressRef === null || isQuerySwitchInProgressRef === void 0 ? void 0 : isQuerySwitchInProgressRef.current) {
            debugLogger.log('RESULTS-MODE', {
                event: 'handleRenderDone-skipped-query-switch-in-progress',
                widgetId,
                queryItemConfigId: queryItem.configId,
                dataItemsCount: (dataItems === null || dataItems === void 0 ? void 0 : dataItems.length) || 0,
                resultsMode,
                timestamp: Date.now()
            });
            return;
        }
        debugLogger.log('RESULTS-MODE', {
            event: 'handleRenderDone-called',
            widgetId,
            queryItemConfigId: queryItem.configId,
            dataItemsCount: (dataItems === null || dataItems === void 0 ? void 0 : dataItems.length) || 0,
            pageSize,
            page,
            resultsMode,
            accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0,
            timestamp: Date.now()
        });
        // FIX (r018.94): Simplified - no removedRecordIds filtering needed
        // Records prop is already filtered in Add/Remove mode
        // FIX (r018.89): When in Add/Remove mode, also filter to only include accumulated records
        // This prevents handleRenderDone from re-selecting the full query results after a query switch
        let filteredItems = dataItems || [];
        if (resultsMode !== _config__WEBPACK_IMPORTED_MODULE_4__.SelectionType.NEW_SELECTION && accumulatedRecords && accumulatedRecords.length > 0) {
            const accumulatedRecordIds = new Set(accumulatedRecords.map(r => r.getId()));
            const beforeFilterCount = filteredItems.length;
            filteredItems = filteredItems.filter(item => accumulatedRecordIds.has(item.getId()));
            debugLogger.log('RESULTS-MODE', {
                event: 'handleRenderDone-filtered-by-accumulated-records',
                widgetId,
                resultsMode,
                dataItemsCount: (dataItems === null || dataItems === void 0 ? void 0 : dataItems.length) || 0,
                afterAccumulatedFilter: filteredItems.length,
                accumulatedRecordsCount: accumulatedRecords.length,
                filtered: beforeFilterCount - filteredItems.length,
                note: 'r018.94: No removedRecordIds filter - records stay in sync',
                timestamp: Date.now()
            });
        }
        // Check if queryData has actually changed before updating state
        // This prevents unnecessary re-renders that reset scroll position
        const currentRecords = (queryData === null || queryData === void 0 ? void 0 : queryData.records) || [];
        const currentRecordIds = currentRecords.map(r => r.getId()).sort();
        const newRecordIds = filteredItems.map(r => r.getId()).sort();
        const dataChanged = currentRecordIds.length !== newRecordIds.length ||
            !currentRecordIds.every((id, idx) => id === newRecordIds[idx]) ||
            (queryData === null || queryData === void 0 ? void 0 : queryData.pageSize) !== pageSize ||
            (queryData === null || queryData === void 0 ? void 0 : queryData.page) !== page;
        // Only update state if data has actually changed
        if (dataChanged) {
            setQueryData({
                records: filteredItems,
                pageSize,
                page
            });
        }
        // Only select records that are NOT removed
        // IMPORTANT: Only re-select if the selection has actually changed to avoid resetting scroll position
        if (filteredItems && filteredItems.length > 0 && outputDS) {
            const recordIds = filteredItems.map(record => record.getId());
            const fdr = filteredItems;
            // Check what's currently selected to avoid unnecessary re-selection (which resets scroll)
            const currentlySelectedIds = outputDS.getSelectedRecordIds() || [];
            const selectionChanged = currentlySelectedIds.length !== recordIds.length ||
                !recordIds.every(id => currentlySelectedIds.includes(id));
            // Only select if the selection has actually changed
            if (selectionChanged) {
                // r018.78: Use async IIFE to properly await selection and pass graphics parameters
                ;
                (() => __awaiter(this, void 0, void 0, function* () {
                    try {
                        setSelectionError(null); // Clear previous errors
                        yield (0,_selection_utils__WEBPACK_IMPORTED_MODULE_14__.selectRecordsAndPublish)(widgetId, outputDS, recordIds, fdr, false, // alsoPublishToOutputDS
                        useGraphicsLayerForHighlight, graphicsLayer, mapView);
                        debugLogger.log('RESULTS-MODE', {
                            event: 'handleRenderDone-selecting-filtered-records',
                            widgetId: widgetId,
                            dataItemsCount: (dataItems === null || dataItems === void 0 ? void 0 : dataItems.length) || 0,
                            filteredItemsCount: filteredItems.length,
                            selectionChanged: true,
                            currentlySelectedCount: currentlySelectedIds.length,
                            newSelectionCount: recordIds.length,
                            usedGraphicsLayer: useGraphicsLayerForHighlight,
                            note: 'r018.94: No removedRecordIds tracking',
                            timestamp: Date.now()
                        });
                    }
                    catch (error) {
                        const errorMessage = error instanceof Error ? error.message : 'Failed to select query results';
                        setSelectionError(errorMessage);
                        debugLogger.log('TASK', {
                            event: 'selection-failed-handleRenderDone',
                            error: errorMessage,
                            errorStack: error instanceof Error ? error.stack : undefined,
                            recordCount: recordIds.length
                        });
                    }
                }))();
            }
            else {
                debugLogger.log('RESULTS-MODE', {
                    event: 'handleRenderDone-skipping-reselection',
                    widgetId: widgetId,
                    dataItemsCount: (dataItems === null || dataItems === void 0 ? void 0 : dataItems.length) || 0,
                    filteredItemsCount: filteredItems.length,
                    reason: 'selection-unchanged',
                    currentlySelectedCount: currentlySelectedIds.length,
                    note: 'r018.94: No removedRecordIds tracking',
                    timestamp: Date.now()
                });
            }
        }
    }, [outputDS, widgetId, queryData, resultsMode, accumulatedRecords]);
    const handleDataSourceInfoChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        var _a;
        const ds = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().getDataSource(outputDS === null || outputDS === void 0 ? void 0 : outputDS.id);
        const dsRecords = ds === null || ds === void 0 ? void 0 : ds.getSelectedRecords();
        const selectedIds = (_a = ds === null || ds === void 0 ? void 0 : ds.getSelectedRecordIds()) !== null && _a !== void 0 ? _a : [];
        // Capture records prop before using it (to avoid shadowing)
        const recordsProp = records;
        // Debug: Log what handleDataSourceInfoChange sees
        debugLogger.log('RESULTS-MODE', {
            event: 'handleDataSourceInfoChange-fired',
            widgetId: widgetId,
            outputDSId: outputDS === null || outputDS === void 0 ? void 0 : outputDS.id,
            dsId: ds === null || ds === void 0 ? void 0 : ds.id,
            selectedRecordsFromDS: (dsRecords === null || dsRecords === void 0 ? void 0 : dsRecords.length) || 0,
            selectedIdsFromDS: selectedIds.length,
            currentSelectedRecordsState: (selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) || 0,
            recordsPropCount: (recordsProp === null || recordsProp === void 0 ? void 0 : recordsProp.length) || 0,
            note: 'r018.94: No removedRecordIds tracking',
            timestamp: Date.now()
        });
        // If we have records in the prop (accumulated records) but DS shows 0 selected,
        // and we currently have selectedRecords, this is likely a query switch in "Add to" mode
        // where re-selection hasn't happened yet. Don't clear selectedRecords - wait for re-selection.
        if (recordsProp && recordsProp.length > 0 && selectedIds.length === 0 && selectedRecords && selectedRecords.length > 0) {
            debugLogger.log('RESULTS-MODE', {
                event: 'handleDataSourceInfoChange-skipping-clear-during-query-switch',
                widgetId: widgetId,
                reason: 'waiting-for-reselection',
                recordsPropCount: recordsProp.length,
                currentSelectedRecordsCount: selectedRecords.length
            });
            return; // Skip updating - re-selection is coming
        }
        // FIX (r018.94): Simplified - no removedRecordIds filtering needed
        // Records prop is already filtered in Add/Remove mode
        let shouldUpdate = false;
        if (selectedIds.length !== (selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length)) {
            shouldUpdate = true;
        }
        else { // equal length
            shouldUpdate = selectedIds.some(id => {
                const target = selectedRecords.find((item) => item.getId() === id);
                return target == null;
            });
        }
        if (shouldUpdate) {
            debugLogger.log('RESULTS-MODE', {
                event: 'handleDataSourceInfoChange-updating-selectedRecords',
                widgetId: widgetId,
                oldCount: (selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) || 0,
                newCount: (dsRecords === null || dsRecords === void 0 ? void 0 : dsRecords.length) || 0,
                oldSelectedIds: (selectedRecords || []).map(r => r.getId()).slice(0, 5),
                newSelectedIds: selectedIds.slice(0, 5),
                note: 'r018.94: No removedRecordIds filtering',
                timestamp: Date.now()
            });
            setSelectedRecords(dsRecords || []);
        }
        else {
            debugLogger.log('RESULTS-MODE', {
                event: 'handleDataSourceInfoChange-skipping-update',
                widgetId: widgetId,
                reason: 'no-change-detected',
                timestamp: Date.now()
            });
        }
    }, [outputDS === null || outputDS === void 0 ? void 0 : outputDS.id, selectedRecords, widgetId, records]);
    /**
     * Generates the tip message showing how many features are displayed.
     * FIX (r018.94): Simplified - no filtering needed since records stay in sync
     *
     * @returns Formatted string like "Features displayed: 118 / 118"
     */
    const getTipMessage = () => {
        if (queryData && queryData.records) {
            // FIX (r018.94): No filtering needed - queryData.records is already filtered
            const displayedCount = queryData.records.length;
            // FIX (r018.83): Use displayedCount for both numerator and denominator
            // This ensures the count shows "118 / 118" after removing records, not "118 / 121"
            return `${getI18nMessage('featuresDisplayed')}: ${displayedCount} / ${displayedCount}`;
            // removed by dead control flow
{}
            // removed by dead control flow
{}
            // removed by dead control flow
{}
            // removed by dead control flow
{}
            // removed by dead control flow
{}
        }
        return '';
    };
    /**
     * Toggles expand/collapse state for all result items.
     * When toggled, all result items will be expanded or collapsed together.
     * Updates individual item expansion states in the map to maintain state when items are removed.
     */
    const toggleExpandAll = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        setExpandAll(prev => {
            const newValue = !prev;
            debugLogger.log('EXPAND-COLLAPSE', {
                event: 'toggleExpandAll-clicked',
                widgetId,
                previousValue: prev,
                newValue,
                timestamp: Date.now()
            });
            // Update all current items in the map with the new expansion state
            setItemExpandStates(prevMap => {
                const newMap = new Map(prevMap);
                // Get all current record IDs from filtered records
                const allRecordIds = filteredRecordsForList.map(r => r.getId());
                allRecordIds.forEach(id => {
                    newMap.set(id, newValue);
                });
                debugLogger.log('EXPAND-COLLAPSE', {
                    event: 'itemExpandStates-updated',
                    widgetId,
                    newValue,
                    updatedCount: allRecordIds.length,
                    recordIds: allRecordIds.slice(0, 10), // Log first 10 IDs
                    timestamp: Date.now()
                });
                return newMap;
            });
            return newValue;
        });
    }, [widgetId, filteredRecordsForList]);
    const resultUseOutputDataSource = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)({
            dataSourceId: queryItem.outputDataSourceId,
            mainDataSourceId: queryItem.outputDataSourceId
        });
    }, [queryItem === null || queryItem === void 0 ? void 0 : queryItem.outputDataSourceId]);
    const handleEscape = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.focusElementInKeyboardMode)(backBtnRef.current);
    }, []);
    // Keep records selected and zoom to clicked record
    // Records remain selected as long as they're in the results
    // Clicking a record always zooms to it on the map (this behavior is always enabled)
    const toggleSelection = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((data) => {
        var _a, _b;
        // Ensure the clicked record is selected (it should already be, but ensure it)
        const selectedDatas = (_a = outputDS.getSelectedRecords()) !== null && _a !== void 0 ? _a : [];
        const selectedIds = (_b = outputDS.getSelectedRecordIds()) !== null && _b !== void 0 ? _b : [];
        const dataId = data.getId();
        // If this record isn't already selected, add it to the selection
        if (!selectedIds.includes(dataId)) {
            const updatedSelectedDatas = [...selectedDatas, data];
            const recordIds = updatedSelectedDatas.map(record => record.getId());
            // Select records and publish selection message using utility function
            (0,_selection_utils__WEBPACK_IMPORTED_MODULE_14__.selectRecordsAndPublish)(widgetId, outputDS, recordIds, updatedSelectedDatas, true);
        }
        // Zoom to the clicked record with padding (always enabled - user wants to keep this behavior)
        // BUG-GRAPHICS-001: Zoom operations fail when graphics layer is disabled
        if (!mapView && !useGraphicsLayerForHighlight) {
            debugLogger.log('BUG', {
                bugId: 'BUG-GRAPHICS-001',
                category: 'GRAPHICS',
                event: 'zoom-operation-failed-graphics-layer-disabled',
                widgetId,
                operation: 'result-item-click-zoom',
                recordId: data.getId(),
                description: 'Zoom operation attempted on result item click but mapView is unavailable because useGraphicsLayerForHighlight is disabled',
                workaround: 'Enable useGraphicsLayerForHighlight in widget settings',
                targetResolution: 'r019.0'
            });
        }
        zoomToRecords([data]).catch(error => {
            // Silently handle errors - zoom is non-critical
        });
    }, [outputDS, widgetId, zoomToRecords]);
    /**
     * Removes a record from the results and selection.
     * If removing the last record, automatically clears all results
     * by calling the trash can logic (same as clicking Clear button).
     * This ensures the UI doesn't show "Features displayed: 0 / 1" when all results are removed.
     *
     * @param data - The feature data record to remove
     */
    const removeRecord = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((data) => {
        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o;
        const dataId = data.getId();
        const currentExpandAll = expandAll;
        // Log hash state when removing individual record
        const hash = window.location.hash.substring(1);
        const urlParams = new URLSearchParams(hash);
        const hashParams = {};
        urlParams.forEach((value, key) => {
            hashParams[key] = value;
        });
        debugLogger.log('EXPAND-COLLAPSE', {
            event: 'removeRecord-started',
            widgetId,
            removedRecordId: dataId,
            currentExpandAll,
            timestamp: Date.now()
        });
        debugLogger.log('HASH', {
            event: 'removeRecord-called',
            widgetId,
            removedRecordId: dataId,
            hash: hash,
            hashParams: hashParams,
            hashParamsCount: Object.keys(hashParams).length,
            timestamp: Date.now()
        });
        // SURGICAL HASH MODIFICATION: Remove the record ID from hash parameters
        // This makes the hash a precise representation of what should be selected
        const idParamKeys = ['id', 'pin', 'major', 'parcel', 'shortId']; // Common ID parameter names
        let hashModified = false;
        idParamKeys.forEach(paramKey => {
            if (urlParams.has(paramKey)) {
                const currentValue = urlParams.get(paramKey) || '';
                const ids = currentValue.split(',').map(id => id.trim()).filter(id => id);
                // Remove the specific record ID from this parameter
                const filteredIds = ids.filter(id => id !== dataId);
                if (filteredIds.length !== ids.length) {
                    // IDs were removed, update the parameter
                    if (filteredIds.length > 0) {
                        urlParams.set(paramKey, filteredIds.join(','));
                    }
                    else {
                        // No IDs left, remove the parameter entirely
                        urlParams.delete(paramKey);
                    }
                    hashModified = true;
                }
            }
        });
        // FIX (r018.84): SURGICAL HASH MODIFICATION FOR data_s PARAMETER
        // Experience Builder creates a new widget output ID instead of updating the existing one
        // We need to manually update the existing entry to prevent duplication
        if (urlParams.has('data_s')) {
            const dataS = urlParams.get('data_s') || '';
            const decodedDataS = decodeURIComponent(dataS);
            const selections = decodedDataS.split(',');
            // Extract widget number from widgetId (e.g., "widget_12" -> "12")
            const widgetMatch = widgetId.match(/widget_(\d+)/);
            if (widgetMatch) {
                const widgetNumber = widgetMatch[1];
                const widgetPattern = new RegExp(`widget_${widgetNumber}_output_\\d+`);
                // Find and update the selection entry for this widget
                let dataSModified = false;
                const updatedSelections = selections.map(selection => {
                    if (!selection.startsWith('id:')) {
                        return selection;
                    }
                    const idPart = selection.substring(3); // Remove "id:"
                    const colonIndex = idPart.lastIndexOf(':');
                    if (colonIndex === -1) {
                        return selection;
                    }
                    const dsIdPart = idPart.substring(0, colonIndex);
                    const recordIdsPart = idPart.substring(colonIndex + 1);
                    // Check if this matches our widget's output DS pattern
                    let matchesWidget = false;
                    if (dsIdPart.includes('~')) {
                        // Compound format: dataSource_*~widget_XX_output_*
                        const parts = dsIdPart.split('~');
                        matchesWidget = parts.some(part => part.match(widgetPattern));
                    }
                    else {
                        // Simple format: widget_XX_output_*
                        matchesWidget = dsIdPart.match(widgetPattern) !== null;
                    }
                    if (matchesWidget) {
                        // Remove the specific record ID from this entry
                        const recordIds = recordIdsPart.split(',').map(id => id.trim()).filter(id => id);
                        const filteredRecordIds = recordIds.filter(id => id !== dataId);
                        if (filteredRecordIds.length !== recordIds.length) {
                            dataSModified = true;
                            debugLogger.log('HASH', {
                                event: 'data_s-record-removed',
                                widgetId,
                                removedRecordId: dataId,
                                originalRecordCount: recordIds.length,
                                newRecordCount: filteredRecordIds.length,
                                dsIdPart,
                                timestamp: Date.now()
                            });
                            // If no records remain, return empty string (will be filtered out)
                            if (filteredRecordIds.length === 0) {
                                return '';
                            }
                            // Reconstruct the selection with updated record IDs
                            return `id:${dsIdPart}:${filteredRecordIds.join(',')}`;
                        }
                    }
                    return selection;
                }).filter(s => s); // Remove empty strings
                if (dataSModified) {
                    if (updatedSelections.length > 0) {
                        urlParams.set('data_s', encodeURIComponent(updatedSelections.join(',')));
                    }
                    else {
                        // No selections remain, remove data_s entirely
                        urlParams.delete('data_s');
                    }
                    hashModified = true;
                    debugLogger.log('HASH', {
                        event: 'data_s-surgically-modified',
                        widgetId,
                        removedRecordId: dataId,
                        originalSelectionCount: selections.length,
                        newSelectionCount: updatedSelections.length,
                        timestamp: Date.now()
                    });
                }
            }
        }
        if (hashModified) {
            // Update hash surgically
            const newHash = urlParams.toString();
            window.history.replaceState(null, '', `#${newHash}`);
            debugLogger.log('HASH', {
                event: 'hash-surgically-modified-id-removed',
                widgetId,
                removedRecordId: dataId,
                originalHash: hash,
                newHash: newHash,
                timestamp: Date.now()
            });
        }
        // FIX (r018.96): Removed manual removal tracking - no longer needed
        debugLogger.log('RESULTS-MODE', {
            event: 'x-button-removal-updating-accumulated-records',
            widgetId,
            removedRecordId: dataId,
            note: 'r018.96: No manual removal tracking - duplicate detection handles this',
            timestamp: Date.now()
        });
        // Remove from expansion states map
        setItemExpandStates(prevMap => {
            const newMap = new Map(prevMap);
            newMap.delete(dataId);
            debugLogger.log('EXPAND-COLLAPSE', {
                event: 'itemExpandStates-cleaned-up',
                widgetId,
                removedRecordId: dataId,
                remainingCount: newMap.size,
                timestamp: Date.now()
            });
            return newMap;
        });
        // FIX (r018.94): Removed removedRecordIds tracking - queryData now updated directly
        // Update queryData to filter out the removed record
        setQueryData(prevData => {
            if (!prevData)
                return prevData;
            const filteredRecords = prevData.records.filter((record) => record.getId() !== dataId);
            debugLogger.log('RESULTS-MODE', {
                event: 'queryData-updated-after-removal',
                widgetId,
                removedRecordId: dataId,
                recordsCountBefore: prevData.records.length,
                recordsCountAfter: filteredRecords.length,
                timestamp: Date.now()
            });
            // FIX (r018.94): Check if this was the last record - if so, navigate back
            if (filteredRecords.length === 0 && prevData.records.length > 0) {
                debugLogger.log('RESULTS-MODE', {
                    event: 'last-record-removed-navigating-back',
                    widgetId,
                    removedRecordId: dataId,
                    timestamp: Date.now()
                });
                // Use setTimeout to avoid setState during render
                setTimeout(() => onNavBack(true), 0);
            }
            return Object.assign(Object.assign({}, prevData), { records: filteredRecords });
        });
        // FIX (r018.85): DIAGNOSTIC - Graphics count BEFORE removeRecordsFromOriginSelections
        const graphicsCountBeforeOriginRemoval = ((_a = graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics) === null || _a === void 0 ? void 0 : _a.length) || 0;
        const graphicsIdsBeforeOriginRemoval = ((_b = graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics) === null || _b === void 0 ? void 0 : _b.map(g => { var _a; return (_a = g.attributes) === null || _a === void 0 ? void 0 : _a.recordId; }).slice(0, 10)) || [];
        debugLogger.log('RESULTS-MODE', {
            event: 'x-button-removal-BEFORE-removeRecordsFromOriginSelections',
            widgetId,
            removedRecordId: dataId,
            graphicsCountBefore: graphicsCountBeforeOriginRemoval,
            graphicsIdsBefore: graphicsIdsBeforeOriginRemoval,
            willPassGraphicsLayer: false, // FIX: Changed to false to prevent graphics manipulation here
            timestamp: Date.now()
        });
        // ALWAYS remove from origin data source selections (same as Remove mode)
        // This properly removes records from the map selection, handling single or multiple origin sources
        // FIX (r018.85): DON'T pass graphics layer parameters here - let graphics be managed by selection sync
        // The previous behavior (passing graphicsLayer) was causing the count to jump from 124 to 136
        // because graphics were being removed here, then re-added during selection synchronization
        (0,_results_management_utils__WEBPACK_IMPORTED_MODULE_15__.removeRecordsFromOriginSelections)(widgetId, [data], outputDS
        // NOT passing useGraphicsLayerForHighlight or graphicsLayer
        // Graphics will be synced through normal selection flow
        );
        // FIX (r018.85): DIAGNOSTIC - Graphics count AFTER removeRecordsFromOriginSelections
        const graphicsCountAfterOriginRemoval = ((_c = graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics) === null || _c === void 0 ? void 0 : _c.length) || 0;
        const graphicsIdsAfterOriginRemoval = ((_d = graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics) === null || _d === void 0 ? void 0 : _d.map(g => { var _a; return (_a = g.attributes) === null || _a === void 0 ? void 0 : _a.recordId; }).slice(0, 10)) || [];
        debugLogger.log('RESULTS-MODE', {
            event: 'x-button-removal-AFTER-removeRecordsFromOriginSelections',
            widgetId,
            removedRecordId: dataId,
            graphicsCountBefore: graphicsCountBeforeOriginRemoval,
            graphicsCountAfter: graphicsCountAfterOriginRemoval,
            graphicsIdsAfter: graphicsIdsAfterOriginRemoval,
            graphicsChanged: graphicsCountAfterOriginRemoval !== graphicsCountBeforeOriginRemoval,
            graphicsChangedBy: graphicsCountAfterOriginRemoval - graphicsCountBeforeOriginRemoval,
            expected: 'Graphics should NOT change here (no graphics layer params passed)',
            timestamp: Date.now()
        });
        // FIX (r018.91): DIAGNOSTIC - Check why manual graphics removal condition isn't met
        debugLogger.log('RESULTS-MODE', {
            event: 'x-button-removal-checking-manual-graphics-removal-condition',
            widgetId,
            removedRecordId: dataId,
            useGraphicsLayerForHighlight: useGraphicsLayerForHighlight,
            hasGraphicsLayer: !!graphicsLayer,
            graphicsLayerId: graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.id,
            graphicsLayerGraphicsCount: ((_e = graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics) === null || _e === void 0 ? void 0 : _e.length) || 0,
            conditionWillPass: !!(useGraphicsLayerForHighlight && graphicsLayer),
            timestamp: Date.now()
        });
        // FIX (r018.90): Manually remove graphics from layer after removeRecordsFromOriginSelections
        // Since we don't pass graphics layer params to removeRecordsFromOriginSelections (to avoid 
        // the 136 duplicate issue), we need to manually remove the graphic here
        // This is safe now because r018.89 fixed the query switch re-selection issue
        if (useGraphicsLayerForHighlight && graphicsLayer) {
            const graphicsCountBeforeManualRemoval = graphicsLayer.graphics.length;
            debugLogger.log('RESULTS-MODE', {
                event: 'x-button-removal-manual-graphics-sync-start',
                widgetId,
                removedRecordId: dataId,
                graphicsCountBefore: graphicsCountBeforeManualRemoval,
                timestamp: Date.now()
            });
            (0,_graphics_layer_utils__WEBPACK_IMPORTED_MODULE_16__.removeHighlightGraphics)(graphicsLayer, [dataId]);
            const graphicsCountAfterManualRemoval = graphicsLayer.graphics.length;
            debugLogger.log('RESULTS-MODE', {
                event: 'x-button-removal-manual-graphics-sync-complete',
                widgetId,
                removedRecordId: dataId,
                graphicsCountBefore: graphicsCountBeforeManualRemoval,
                graphicsCountAfter: graphicsCountAfterManualRemoval,
                graphicsRemoved: graphicsCountBeforeManualRemoval - graphicsCountAfterManualRemoval,
                expectedRemoved: 1,
                removalMatches: (graphicsCountBeforeManualRemoval - graphicsCountAfterManualRemoval) === 1,
                timestamp: Date.now()
            });
        }
        else {
            // FIX (r018.91): Log when condition is NOT met to understand why
            debugLogger.log('RESULTS-MODE', {
                event: 'x-button-removal-manual-graphics-removal-SKIPPED',
                widgetId,
                removedRecordId: dataId,
                reason: !useGraphicsLayerForHighlight ? 'useGraphicsLayerForHighlight is false' :
                    !graphicsLayer ? 'graphicsLayer is null/undefined' :
                        'unknown',
                useGraphicsLayerForHighlight,
                hasGraphicsLayer: !!graphicsLayer,
                timestamp: Date.now()
            });
        }
        // DIAGNOSTIC LOGGING: Full state BEFORE removal
        const outputDSSelectedBefore = outputDS.getSelectedRecords() || [];
        const outputDSSelectedIdsBefore = outputDSSelectedBefore.map(r => r.getId());
        const accumulatedRecordsIdsBefore = (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.map(r => r.getId())) || [];
        // FIX (r018.81): Detailed graphics attribute inspection to understand why IDs are null
        const graphicsLayerIdsBefore = [];
        const firstFewGraphicsAttrs = [];
        (_f = graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics) === null || _f === void 0 ? void 0 : _f.forEach((g, index) => {
            var _a;
            if (index < 3) {
                // Log first 3 graphics' full attributes for diagnosis
                firstFewGraphicsAttrs.push({
                    index,
                    hasAttributes: !!g.attributes,
                    attributes: g.attributes,
                    attributeKeys: g.attributes ? Object.keys(g.attributes) : []
                });
            }
            graphicsLayerIdsBefore.push(((_a = g.attributes) === null || _a === void 0 ? void 0 : _a.recordId) || null);
        });
        debugLogger.log('RESULTS-MODE', {
            event: 'x-button-removal-before-state',
            widgetId,
            removedRecordId: dataId,
            outputDSSelectedCount: outputDSSelectedBefore.length,
            outputDSSelectedIds: outputDSSelectedIdsBefore,
            accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0,
            accumulatedRecordsIds: accumulatedRecordsIdsBefore,
            graphicsLayerCount: ((_g = graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics) === null || _g === void 0 ? void 0 : _g.length) || 0,
            graphicsLayerIds: graphicsLayerIdsBefore.slice(0, 110),
            firstFewGraphicsAttrs, // NEW: inspect what attributes are actually there
            allSourcesMatch: outputDSSelectedIdsBefore.length === accumulatedRecordsIdsBefore.length &&
                outputDSSelectedIdsBefore.length === graphicsLayerIdsBefore.length &&
                JSON.stringify(outputDSSelectedIdsBefore.sort()) === JSON.stringify(accumulatedRecordsIdsBefore.sort()),
            timestamp: Date.now()
        });
        // Update outputDS selection
        const selectedDatas = (_h = outputDS.getSelectedRecords()) !== null && _h !== void 0 ? _h : [];
        const updatedSelectedDatas = selectedDatas.filter(record => record.getId() !== dataId);
        const recordIds = updatedSelectedDatas.map(record => record.getId());
        // DEBUG: Log state after removal
        debugLogger.log('RESULTS-MODE', {
            event: 'removeRecord-state-after-removal',
            widgetId,
            removedRecordId: dataId,
            outputDSSelectedBeforeRemoval: selectedDatas.length,
            outputDSSelectedAfterRemoval: updatedSelectedDatas.length,
            recordsPropCount: (records === null || records === void 0 ? void 0 : records.length) || 0,
            queryDataRecordsCount: ((_j = queryData === null || queryData === void 0 ? void 0 : queryData.records) === null || _j === void 0 ? void 0 : _j.length) || 0,
            accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0,
            resultsMode,
            note: 'r018.94: Records stay in sync - no removedRecordIds tracking',
            timestamp: Date.now()
        });
        // Update outputDS selection
        if (typeof outputDS.selectRecordsByIds === 'function') {
            outputDS.selectRecordsByIds(recordIds, updatedSelectedDatas);
        }
        // IMPORTANT: Publish custom event so widget can update lastSelection state
        // This ensures restoration restores the correct (updated) count
        const originDS = (_k = outputDS.getOriginDataSources()) === null || _k === void 0 ? void 0 : _k[0];
        const dataSourceId = originDS === null || originDS === void 0 ? void 0 : originDS.id;
        const selectionEvent = new CustomEvent('querysimple-selection-changed', {
            detail: {
                widgetId,
                recordIds, // Updated record IDs (with removed record excluded)
                dataSourceId,
                outputDsId: outputDS.id,
                queryItemConfigId: queryItem.configId
            },
            bubbles: true,
            cancelable: true
        });
        window.dispatchEvent(selectionEvent);
        // DIAGNOSTIC LOGGING: Full state AFTER removal (before sync)
        const outputDSSelectedAfter = outputDS.getSelectedRecords() || [];
        const outputDSSelectedIdsAfter = outputDSSelectedAfter.map(r => r.getId());
        // FIX (r018.81): Detailed graphics attribute inspection to understand why IDs are null
        const graphicsLayerIdsAfter = [];
        const firstFewGraphicsAttrsAfter = [];
        (_l = graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics) === null || _l === void 0 ? void 0 : _l.forEach((g, index) => {
            var _a;
            if (index < 3) {
                // Log first 3 graphics' full attributes for diagnosis
                firstFewGraphicsAttrsAfter.push({
                    index,
                    hasAttributes: !!g.attributes,
                    attributes: g.attributes,
                    attributeKeys: g.attributes ? Object.keys(g.attributes) : []
                });
            }
            graphicsLayerIdsAfter.push(((_a = g.attributes) === null || _a === void 0 ? void 0 : _a.recordId) || null);
        });
        debugLogger.log('RESULTS-MODE', {
            event: 'x-button-removal-after-state-before-sync',
            widgetId,
            removedRecordId: dataId,
            outputDSSelectedCount: outputDSSelectedAfter.length,
            outputDSSelectedIds: outputDSSelectedIdsAfter,
            graphicsLayerCount: ((_m = graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics) === null || _m === void 0 ? void 0 : _m.length) || 0,
            graphicsLayerIds: graphicsLayerIdsAfter.slice(0, 110),
            firstFewGraphicsAttrsAfter, // NEW: inspect what attributes are actually there
            removedFromOutputDS: outputDSSelectedIdsAfter.length < outputDSSelectedIdsBefore.length,
            removedFromGraphics: graphicsLayerIdsAfter.length < graphicsLayerIdsBefore.length,
            timestamp: Date.now()
        });
        // FIX (r018.97): Sync accumulatedRecords in ALL modes for universal tab count tracking
        // accumulatedRecords is now the single source of truth for displayed records across all modes
        // This ensures tab count updates correctly when records are removed in ANY mode (New, Add, Remove)
        if (onAccumulatedRecordsChange) {
            // Get the actual selected records from outputDS (single source of truth)
            // This is called AFTER outputDS.selectRecordsByIds() above, so it reflects the removal
            const actuallySelectedRecords = outputDS.getSelectedRecords() || [];
            // Sync accumulatedRecords with what's actually selected
            // This ensures removed records are immediately excluded from accumulatedRecords
            if (accumulatedRecords && accumulatedRecords.length > 0) {
                // Build a Set of actually selected IDs for fast lookup
                const actuallySelectedIds = new Set(actuallySelectedRecords.map(r => r.getId()));
                // Filter accumulatedRecords to only include records that are actually selected
                const syncedRecords = accumulatedRecords.filter(record => actuallySelectedIds.has(record.getId()));
                const syncedRecordsIds = syncedRecords.map(r => r.getId());
                debugLogger.log('RESULTS-MODE', {
                    event: 'x-button-immediate-sync-with-outputds',
                    widgetId,
                    resultsMode,
                    removedRecordId: dataId,
                    accumulatedRecordsCountBefore: accumulatedRecords.length,
                    accumulatedRecordsIdsBefore: accumulatedRecordsIdsBefore,
                    actuallySelectedCount: actuallySelectedRecords.length,
                    actuallySelectedIds: outputDSSelectedIdsAfter,
                    syncedRecordsCount: syncedRecords.length,
                    syncedRecordsIds: syncedRecordsIds,
                    recordsRemoved: accumulatedRecords.length - syncedRecords.length,
                    removedIds: accumulatedRecordsIdsBefore.filter(id => !syncedRecordsIds.includes(id)),
                    note: 'r018.97: immediate-sync-in-all-modes-for-universal-tab-count',
                    timestamp: Date.now()
                });
                // Update accumulatedRecords to match reality (immediate sync, not lazy)
                onAccumulatedRecordsChange(syncedRecords);
                // DIAGNOSTIC LOGGING: Full state AFTER sync
                debugLogger.log('RESULTS-MODE', {
                    event: 'x-button-removal-after-sync-state',
                    widgetId,
                    removedRecordId: dataId,
                    accumulatedRecordsCountAfter: syncedRecords.length,
                    accumulatedRecordsIdsAfter: syncedRecordsIds,
                    outputDSSelectedCount: outputDSSelectedAfter.length,
                    outputDSSelectedIds: outputDSSelectedIdsAfter,
                    graphicsLayerCount: ((_o = graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics) === null || _o === void 0 ? void 0 : _o.length) || 0,
                    graphicsLayerIds: graphicsLayerIdsAfter,
                    allSourcesMatch: syncedRecordsIds.length === outputDSSelectedIdsAfter.length &&
                        syncedRecordsIds.length === graphicsLayerIdsAfter.length &&
                        JSON.stringify(syncedRecordsIds.sort()) === JSON.stringify(outputDSSelectedIdsAfter.sort()),
                    timestamp: Date.now()
                });
            }
            else if (actuallySelectedRecords.length > 0) {
                // If accumulatedRecords is empty but outputDS has selection, sync it
                debugLogger.log('RESULTS-MODE', {
                    event: 'x-button-syncing-empty-accumulated-with-outputds',
                    widgetId,
                    removedRecordId: dataId,
                    actuallySelectedCount: actuallySelectedRecords.length,
                    note: 'accumulatedRecords-was-empty-syncing-from-outputds',
                    timestamp: Date.now()
                });
                onAccumulatedRecordsChange(actuallySelectedRecords);
            }
            else {
                // Both are empty - ensure accumulatedRecords is empty
                debugLogger.log('RESULTS-MODE', {
                    event: 'x-button-both-empty-syncing',
                    widgetId,
                    removedRecordId: dataId,
                    note: 'both-accumulatedRecords-and-outputds-are-empty',
                    timestamp: Date.now()
                });
                onAccumulatedRecordsChange([]);
            }
        }
        // FIX (r018.96): Removed manual modification flag - no longer needed
        debugLogger.log('RESULTS-MODE', {
            event: 'x-button-removal-complete',
            widgetId,
            removedRecordId: dataId,
            note: 'r018.96: No manual removal tracking needed',
            timestamp: Date.now()
        });
        // FIX (r018.85): FINAL DIAGNOSTIC - Graphics count after entire removal flow
        // This happens AFTER all sync logic, so we can see the final state
        setTimeout(() => {
            var _a, _b;
            const finalGraphicsCount = ((_a = graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics) === null || _a === void 0 ? void 0 : _a.length) || 0;
            const finalGraphicsIds = ((_b = graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics) === null || _b === void 0 ? void 0 : _b.map(g => { var _a; return (_a = g.attributes) === null || _a === void 0 ? void 0 : _a.recordId; })) || [];
            const finalGraphicsIdsSample = finalGraphicsIds.slice(0, 10);
            // Count duplicates in final graphics
            const graphicsIdCounts = new Map();
            finalGraphicsIds.forEach(id => {
                if (id) {
                    graphicsIdCounts.set(id, (graphicsIdCounts.get(id) || 0) + 1);
                }
            });
            const duplicateIds = Array.from(graphicsIdCounts.entries())
                .filter(([_, count]) => count > 1)
                .map(([id, count]) => ({ id, count }));
            debugLogger.log('RESULTS-MODE', {
                event: 'x-button-removal-FINAL-graphics-state',
                widgetId,
                removedRecordId: dataId,
                graphicsCountBeforeEntireFlow: graphicsCountBeforeOriginRemoval,
                graphicsCountAfterEntireFlow: finalGraphicsCount,
                graphicsIdsSample: finalGraphicsIdsSample,
                graphicsChanged: finalGraphicsCount !== graphicsCountBeforeOriginRemoval,
                graphicsChangedBy: finalGraphicsCount - graphicsCountBeforeOriginRemoval,
                expectedChange: -1, // Should remove 1 graphic
                actualChange: finalGraphicsCount - graphicsCountBeforeOriginRemoval,
                changeMatches: (finalGraphicsCount - graphicsCountBeforeOriginRemoval) === -1,
                duplicateGraphicsDetected: duplicateIds.length > 0,
                duplicateGraphics: duplicateIds.slice(0, 5),
                totalDuplicates: duplicateIds.reduce((sum, { count }) => sum + (count - 1), 0),
                note: 'Final state after all removal and sync logic completes',
                timestamp: Date.now()
            });
        }, 100); // Small delay to ensure all async operations complete
        // Note: Hash parameters are preserved but hash-triggered queries are blocked
        // when manual modifications exist (handled in widget's handleOpenWidgetEvent)
        // Log after removeRecord completes to check if expandAll changed
        setTimeout(() => {
            debugLogger.log('RESULTS-MODE', {
                event: 'removeRecord-completed',
                widgetId,
                removedRecordId: dataId,
                expandAllBefore: currentExpandAll,
                expandAllAfter: expandAll,
                expandAllChanged: currentExpandAll !== expandAll,
                expandByDefaultProp: expandAll, // What will be passed to SimpleList
                timestamp: Date.now()
            });
        }, 0);
    }, [outputDS, widgetId, resultCount, onNavBack, resultsMode, accumulatedRecords, onAccumulatedRecordsChange, queryItem.configId, expandAll]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'query-result h-100', css: resultStyle, role: 'listbox', "aria-label": getI18nMessage('results'), children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceComponent, { useDataSource: resultUseOutputDataSource, onDataSourceInfoChange: handleDataSourceInfoChange }), selectionError && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `padding: 0 16px; margin-top: 8px;`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_17__.ErrorMessage, { error: selectionError, onDismiss: () => setSelectionError(null) }) })), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'query-result__header d-flex align-items-center mx-4', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { "aria-label": getI18nMessage('back'), ref: backBtnRef, className: 'p-0 mr-2', size: 'sm', variant: 'text', color: 'inherit', icon: true, onClick: () => { onNavBack(); }, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_directional_arrow_left__WEBPACK_IMPORTED_MODULE_10__.ArrowLeftOutlined, { autoFlip: true }) }), (_b = currentItem.resultsLabel) !== null && _b !== void 0 ? _b : getI18nMessage('results'), ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { title: getI18nMessage('clearResult'), placement: 'bottom', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { className: 'ml-auto', icon: true, size: 'sm', variant: 'text', color: 'inherit', onClick: clearResults, "aria-label": getI18nMessage('clearResult'), children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Icon, { icon: iconMap.toolDelete }) }) }), enableDataAction && outputDS && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `width: 1px; height: 16px; background-color: var(--sys-color-divider-input);` }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.DataActionList, { widgetId: widgetId, dataSets: actionDataSets, listStyle: jimu_ui__WEBPACK_IMPORTED_MODULE_2__.DataActionListStyle.Dropdown, buttonSize: 'sm', buttonType: 'tertiary', extraActions: extraActions })] }))] }))] }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'query-result-container mt-1', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'query-result-info mb-2 px-4 d-flex align-items-center justify-content-between', role: 'alert', "aria-live": 'polite', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { children: getTipMessage() }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'd-flex align-items-center', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { title: expandAll ? getI18nMessage('collapseAll') : getI18nMessage('expandAll'), placement: 'top', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: 'sm', type: 'tertiary', icon: true, onClick: toggleExpandAll, "aria-label": expandAll ? getI18nMessage('collapseAll') : getI18nMessage('expandAll'), children: expandAll ? (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_directional_collapse_all__WEBPACK_IMPORTED_MODULE_12__.CollapseAllOutlined, {}) : (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_directional_expand_all__WEBPACK_IMPORTED_MODULE_11__.ExpandAllOutlined, {}) }) }) })] }), resultCount > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_simple_list__WEBPACK_IMPORTED_MODULE_7__.SimpleList, { widgetId: widgetId, queryItem: queryItem, outputDS: outputDS, records: filteredRecordsForList, direction: direction, onEscape: handleEscape, onSelectChange: toggleSelection, onRemove: removeRecord, expandByDefault: expandAll, itemExpandStates: itemExpandStates, onRenderDone: handleRenderDone }, 'simple'))] })] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-context.tsx":
/*!*********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-context.tsx ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTaskContext: () => (/* binding */ QueryTaskContext)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");

const QueryTaskContext = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createContext({
    resetSymbol: null
});


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-form.tsx":
/*!******************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-form.tsx ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTaskForm: () => (/* binding */ QueryTaskForm)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");
/* harmony import */ var jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-ui/basic/sql-expression-runtime */ "jimu-ui/basic/sql-expression-runtime");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _default_query_item__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../default-query-item */ "./your-extensions/widgets/query-simple/src/default-query-item.ts");
/* harmony import */ var _query_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./query-utils */ "./your-extensions/widgets/query-simple/src/runtime/query-utils.ts");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _query_task_spatial_form__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./query-task-spatial-form */ "./your-extensions/widgets/query-simple/src/runtime/query-task-spatial-form.tsx");
/* harmony import */ var _useAutoHeight__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./useAutoHeight */ "./your-extensions/widgets/query-simple/src/runtime/useAutoHeight.tsx");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/* harmony import */ var _query_task_context__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./query-task-context */ "./your-extensions/widgets/query-simple/src/runtime/query-task-context.tsx");
/* harmony import */ var jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! jimu-icons/outlined/suggested/info */ "./jimu-icons/outlined/suggested/info.tsx");
/* harmony import */ var _selection_utils__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");

/** @jsx jsx */











const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_11__.createQuerySimpleDebugLogger)();



/**
 * Event-Driven Hash Parameter Execution Pattern
 *
 * CRITICAL: This is the ONLY execution path for hash-triggered queries.
 *
 * Flow:
 * 1. Hash value set in state as STRING (e.g., "5568900000")
 * 2. DOM manipulation triggers SqlExpressionRuntime to process the value
 * 3. SqlExpressionRuntime converts string  array format [{value: "...", label: "..."}]
 * 4. handleSqlExprObjChange detects conversion  dispatches QUERYSIMPLE_HASH_VALUE_CONVERTED_EVENT
 * 5. Event listener in query-task.tsx executes query (OR handleSqlExprObjChange calls applyQuery directly)
 *
 * WHY THIS PATTERN EXISTS:
 * - SqlExpressionRuntime ONLY fires onChange when value is converted to array format
 * - Queries REQUIRE array format - executing with string format returns unfiltered results (1000 records)
 * - We MUST wait for conversion before executing queries
 *
 * ANTI-PATTERN TO AVOID:
 * - DO NOT add useEffect hooks that execute queries based on string values
 * - DO NOT execute queries before QUERYSIMPLE_HASH_VALUE_CONVERTED_EVENT is dispatched
 * - DO NOT circumvent the event-driven flow with early execution checks
 *
 * If you need to execute a query, wait for the conversion event or call applyQuery()
 * AFTER handleSqlExprObjChange has detected the conversion and dispatched the event.
 */
const QUERYSIMPLE_HASH_VALUE_CONVERTED_EVENT = 'querysimple-hash-value-converted';
const getFormStyle = (isAutoHeight) => {
    return (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
    flex: 1 1 auto;
    display: flex;
    flex-direction: column;
    min-height: 0;
    .form-title {
      color: var(--sys-color-surface-paper-text);
      font-weight: 500;
      font-size: 0.8125rem;
      line-height: 1.5;
      margin-top: 0 !important;
    }
    .query-form__content {
      flex: 1 1 ${isAutoHeight ? 'auto' : 'auto'};
      max-height: ${isAutoHeight ? '61.8vh' : 'none'};
      overflow: auto;
      padding-bottom: 0;
    }
    .query-form__actions {
      flex-shrink: 0;
      margin-top: 0;
      padding-top: 4px;
    }
  `;
};
function QueryTaskForm(props) {
    var _a, _b, _c, _d;
    const { widgetId, configId, outputDS, spatialFilterEnabled, datasourceReady, onFormSubmit, dataActionFilter, initialInputValue, onHashParameterUsed, queryItemShortId, activeTab, onTabChange } = props;
    const preDataActionFilter = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.usePrevious(dataActionFilter);
    const queryItem = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const widgetJson = state.appConfig.widgets[widgetId];
        return widgetJson.config.queryItems.find(item => item.configId === configId);
    });
    const currentItem = Object.assign({}, _default_query_item__WEBPACK_IMPORTED_MODULE_6__.DEFAULT_QUERY_ITEM, queryItem);
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_8__["default"]);
    const [resetSymbol, setResetSymbol] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    // Runtime zoom preference - initialized with config value, can be overridden by user
    const [runtimeZoomToSelected, setRuntimeZoomToSelected] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState((_a = queryItem === null || queryItem === void 0 ? void 0 : queryItem.zoomToSelected) !== null && _a !== void 0 ? _a : true);
    // Sync runtime zoom preference when query item changes (e.g., switching between queries)
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        setRuntimeZoomToSelected((_a = queryItem === null || queryItem === void 0 ? void 0 : queryItem.zoomToSelected) !== null && _a !== void 0 ? _a : true);
    }, [queryItem === null || queryItem === void 0 ? void 0 : queryItem.zoomToSelected, queryItem === null || queryItem === void 0 ? void 0 : queryItem.configId]);
    // const [dataSource, setDataSource] = React.useState<DataSource>(null)
    const { useAttributeFilter, useSpatialFilter, spatialFilterTypes, sqlExprObj, spatialMapWidgetIds, spatialInteractiveCreateToolTypes, spatialRelationUseDataSources, spatialIncludeRuntimeData, spatialRelations, spatialRelationEnableBuffer, spatialRelationBufferDistance, spatialRelationBufferUnit, spatialInteractiveEnableBuffer, spatialInteractiveBufferDistance, spatialInteractiveBufferUnit, attributeFilterLabel = getI18nMessage('attributeFilter'), spatialFilterLabel = getI18nMessage('spatialFilter'), attributeFilterDesc, spatialFilterDesc } = currentItem;
    const [attributeFilterSqlExprObj, setAttributeFilterSqlExprObj] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(sqlExprObj);
    // Ref to track current SQL expression for synchronous access in applyQuery
    // This ensures hash values are immediately available when Apply is clicked
    const attributeFilterSqlExprObjRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(sqlExprObj);
    const spatialFilterObjRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const spatialRelationRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(_config__WEBPACK_IMPORTED_MODULE_5__.SpatialRelation.Intersect);
    const bufferRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const applyButtonRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const formContentRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const sqlExprRuntimeContainerRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null); // Container for SqlExpressionRuntime DOM manipulation
    const isAutoHeight = (0,_useAutoHeight__WEBPACK_IMPORTED_MODULE_10__.useAutoHeight)();
    const showClauseNumber = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef((0,jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__.getShownClauseNumberByExpression)(sqlExprObj));
    const initialValueSetRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null); // Track which configId we've set the value for
    const lastValueSetRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null); // Track the last value that was set
    const hashTriggeredRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(false); // Track if query was triggered via hash parameter
    const previousConfigIdRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null); // Track previous configId to detect query switches
    const [isTypingValid, setIsTypingValid] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(false);
    // Monitor focus and input events within the query form
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        const handleFocus = (e) => {
            const target = e.target;
            if (target.tagName === 'INPUT') {
                const val = target.value;
                setIsTypingValid((0,_query_utils__WEBPACK_IMPORTED_MODULE_7__.isQueryInputValid)(val));
                debugLogger.log('FORM', {
                    event: 'input-focused',
                    configId,
                    tagName: target.tagName,
                    type: target.type,
                    value: val
                });
            }
        };
        const handleInput = (e) => {
            const target = e.target;
            if (target.tagName === 'INPUT') {
                const val = target.value;
                const isValid = (0,_query_utils__WEBPACK_IMPORTED_MODULE_7__.isQueryInputValid)(val);
                setIsTypingValid(isValid);
                debugLogger.log('FORM', {
                    event: 'input-typing',
                    configId,
                    value: val,
                    isTypingValid: isValid
                });
            }
        };
        const handleFocusOut = (e) => {
            // Small delay to allow state to catch up
            setTimeout(() => {
                setIsTypingValid(false);
            }, 50);
        };
        const container = formContentRef.current;
        if (container) {
            container.addEventListener('focusin', handleFocus);
            container.addEventListener('input', handleInput);
            container.addEventListener('focusout', handleFocusOut);
        }
        return () => {
            if (container) {
                container.removeEventListener('focusin', handleFocus);
                container.removeEventListener('input', handleInput);
                container.removeEventListener('focusout', handleFocusOut);
            }
        };
    }, [configId]);
    // Check if any attribute filter input is valid
    const isInputValid = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        // If the user is currently typing something valid, the form is valid
        if (isTypingValid) {
            debugLogger.log('FORM', {
                event: 'validation-check-instant',
                configId,
                isValid: true
            });
            return true;
        }
        if (!(attributeFilterSqlExprObj === null || attributeFilterSqlExprObj === void 0 ? void 0 : attributeFilterSqlExprObj.parts) || attributeFilterSqlExprObj.parts.length === 0) {
            return true; // If no parts, we assume it's valid (e.g. spatial-only query)
        }
        // Check if at least one SINGLE part has a valid value
        const hasValidValue = attributeFilterSqlExprObj.parts.some(part => {
            var _a, _b, _c, _d;
            // Accessing Immutable structures requires care. If dot notation fails, 
            // the framework components might be using .get() or other methods.
            // We'll be inclusive here: if it's not a SINGLE part, we treat it as valid.
            if (part.type === 'SINGLE') {
                const val = (_a = part.valueOptions) === null || _a === void 0 ? void 0 : _a.value;
                const source = (_b = part.valueOptions) === null || _b === void 0 ? void 0 : _b.source;
                // If the source is NOT 'USER_INPUT', it's likely a list/dropdown (UNIQUE_VALUES, FIELD_VALUE)
                // We also check for part.dataSource which is common for list-based selections
                // We treat these as "List" types which are exempted from the empty-string rule.
                const isList = (source && source !== 'USER_INPUT') || ((_c = part.dataSource) === null || _c === void 0 ? void 0 : _c.source);
                const isValid = (0,_query_utils__WEBPACK_IMPORTED_MODULE_7__.isQueryInputValid)(val, !!isList);
                debugLogger.log('FORM', {
                    event: 'validation-check-detail',
                    configId,
                    partType: part.type,
                    source,
                    hasDataSource: !!part.dataSource,
                    dataSourceSource: (_d = part.dataSource) === null || _d === void 0 ? void 0 : _d.source,
                    isList: !!isList,
                    value: val,
                    isValid
                });
                debugLogger.log('FORM', {
                    event: 'validation-check',
                    configId,
                    partType: part.type,
                    source,
                    isList,
                    value: val,
                    valueType: typeof val,
                    isValid
                });
                return isValid;
            }
            return true;
        });
        return hasValidValue;
    }, [attributeFilterSqlExprObj, configId, isTypingValid]);
    const originDS = outputDS === null || outputDS === void 0 ? void 0 : outputDS.getOriginDataSources()[0];
    // Track configId changes (query switches)
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        debugLogger.log('FORM', {
            event: 'configId-changed',
            configId,
            previousConfigId: initialValueSetRef.current,
            initialInputValue,
            timestamp: Date.now()
        });
    }, [configId, initialInputValue, datasourceReady, outputDS, widgetId, hashTriggeredRef]);
    /**
     * Sets the input value from URL hash parameters when:
     * 1. Datasource is ready
     * 2. We have an initialInputValue from URL hash
     * 3. We haven't already set it for this configId, OR the value has changed
     *
     * Uses both React state updates and DOM manipulation to ensure the value
     * is properly set in SqlExpressionRuntime's internal state.
     */
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x, _y, _z, _0, _1, _2, _3, _4, _5, _6, _7, _8, _9;
        debugLogger.log('FORM', {
            event: 'initialInputValue-prop-received',
            configId,
            initialInputValue,
            datasourceReady,
            hasSqlExprObj: !!sqlExprObj,
            sqlExprObjPartsLength: (_a = sqlExprObj === null || sqlExprObj === void 0 ? void 0 : sqlExprObj.parts) === null || _a === void 0 ? void 0 : _a.length,
            initialValueSetRef: initialValueSetRef.current,
            willProcess: datasourceReady && initialInputValue && ((_b = sqlExprObj === null || sqlExprObj === void 0 ? void 0 : sqlExprObj.parts) === null || _b === void 0 ? void 0 : _b.length) > 0,
            timestamp: Date.now()
        });
        debugLogger.log('HASH-FIRST-LOAD', {
            event: 'form-initialInputValue-received',
            configId,
            initialInputValue,
            datasourceReady,
            hasOutputDS: !!outputDS,
            hasSqlExprObj: !!sqlExprObj,
            sqlExprObjPartsLength: (_c = sqlExprObj === null || sqlExprObj === void 0 ? void 0 : sqlExprObj.parts) === null || _c === void 0 ? void 0 : _c.length,
            initialValueSetRef: initialValueSetRef.current,
            lastValueSetRef: lastValueSetRef.current,
            hashTriggeredRef: hashTriggeredRef.current,
            currentStateValue: (_f = (_e = (_d = attributeFilterSqlExprObj === null || attributeFilterSqlExprObj === void 0 ? void 0 : attributeFilterSqlExprObj.parts) === null || _d === void 0 ? void 0 : _d[0]) === null || _e === void 0 ? void 0 : _e.valueOptions) === null || _f === void 0 ? void 0 : _f.value,
            willProcess: datasourceReady && outputDS && initialInputValue && ((_g = sqlExprObj === null || sqlExprObj === void 0 ? void 0 : sqlExprObj.parts) === null || _g === void 0 ? void 0 : _g.length) > 0,
            timestamp: Date.now()
        });
        // Reset flag if configId changed (switched to different query)
        if (initialValueSetRef.current !== null && initialValueSetRef.current !== configId) {
            initialValueSetRef.current = null;
            lastValueSetRef.current = null;
            hashTriggeredRef.current = false; // Reset hash trigger flag when switching queries
            debugLogger.log('FORM', {
                event: 'hashTriggeredRef-reset',
                configId,
                reason: 'switching-queries',
                timestamp: Date.now()
            });
            setIsTypingValid(false); // Reset typing validation
        }
        // Check if value has changed for the same configId
        const valueChanged = lastValueSetRef.current !== null &&
            lastValueSetRef.current !== initialInputValue &&
            initialValueSetRef.current === configId;
        // DIAGNOSTIC (r018.112): Prove hypothesis about shouldSetValue logic
        debugLogger.log('HASH-EXEC', {
            event: 'form-shouldSetValue-calculation',
            configId,
            initialInputValue,
            CONDITIONS: {
                datasourceReady,
                hasOutputDS: !!outputDS,
                hasInitialInputValue: !!initialInputValue,
                hasSqlExprObjParts: !!(((_h = sqlExprObj === null || sqlExprObj === void 0 ? void 0 : sqlExprObj.parts) === null || _h === void 0 ? void 0 : _h.length) > 0)
            },
            REFS: {
                initialValueSetRef: initialValueSetRef.current,
                lastValueSetRef: lastValueSetRef.current,
                previousConfigIdRef: previousConfigIdRef.current
            },
            LOGIC_BREAKDOWN: {
                'initialValueSetRef !== configId': initialValueSetRef.current !== configId,
                'lastValueSetRef !== null': lastValueSetRef.current !== null,
                'lastValueSetRef !== initialInputValue': lastValueSetRef.current !== initialInputValue,
                'initialValueSetRef === configId': initialValueSetRef.current === configId,
                'valueChanged (all 3 above AND)': valueChanged,
                'FINAL: configId-mismatch OR valueChanged': (initialValueSetRef.current !== configId || valueChanged)
            },
            BREAKDOWN_BASE_CONDITIONS: {
                datasourceReady,
                'has-initialInputValue': !!initialInputValue,
                'has-sqlExprObj-parts': !!(((_j = sqlExprObj === null || sqlExprObj === void 0 ? void 0 : sqlExprObj.parts) === null || _j === void 0 ? void 0 : _j.length) > 0),
                'ref-check': (initialValueSetRef.current !== configId || valueChanged),
                'baseConditions (all 4 AND)': (datasourceReady && initialInputValue && (((_k = sqlExprObj === null || sqlExprObj === void 0 ? void 0 : sqlExprObj.parts) === null || _k === void 0 ? void 0 : _k.length) > 0) && (initialValueSetRef.current !== configId || valueChanged))
            },
            timestamp: Date.now()
        });
        // Set the value if:
        // - We haven't set it for this configId yet, OR
        // - The value has changed for the same configId (hash parameter updated)
        // FIX (r018.112): Differentiate first load from mid-session hash changes
        // First load: Require outputDS to avoid race condition (r018.109)
        // Mid-session: Use old logic that worked before r018.109
        const isFirstLoad = initialValueSetRef.current === null;
        const baseConditions = datasourceReady &&
            initialInputValue &&
            ((_l = sqlExprObj === null || sqlExprObj === void 0 ? void 0 : sqlExprObj.parts) === null || _l === void 0 ? void 0 : _l.length) > 0 &&
            (initialValueSetRef.current !== configId || valueChanged);
        const shouldSetValue = isFirstLoad
            ? (baseConditions && !!outputDS) // First load: strict check (prevents race), !! forces boolean
            : baseConditions; // Mid-session: old logic (works fine)
        // DIAGNOSTIC (r018.112): Log final result
        debugLogger.log('HASH-EXEC', {
            event: 'form-shouldSetValue-result',
            configId,
            initialInputValue,
            isFirstLoad,
            shouldSetValue,
            reason: !shouldSetValue ?
                (!datasourceReady ? 'datasourceReady-false' :
                    !outputDS && isFirstLoad ? 'outputDS-null-on-first-load' :
                        !initialInputValue ? 'initialInputValue-null' :
                            !(((_m = sqlExprObj === null || sqlExprObj === void 0 ? void 0 : sqlExprObj.parts) === null || _m === void 0 ? void 0 : _m.length) > 0) ? 'no-sqlExprObj-parts' :
                                'ref-conditions-not-met') : 'all-conditions-met',
            timestamp: Date.now()
        });
        if (shouldSetValue) {
            // FIX (r018.113): Remove tab switch logic - SqlExpressionRuntime works regardless of active tab
            // Setting value in React state is sufficient; onChange will fire when component processes it
            debugLogger.log('FORM', {
                event: 'hash-value-setting-start',
                configId,
                initialInputValue,
                initialValueSetRef: initialValueSetRef.current,
                valueChanged,
                hashTriggeredRefBefore: hashTriggeredRef.current,
                sqlExprObjPartsLength: (_o = sqlExprObj === null || sqlExprObj === void 0 ? void 0 : sqlExprObj.parts) === null || _o === void 0 ? void 0 : _o.length,
                activeTab,
                timestamp: Date.now()
            });
            debugLogger.log('HASH-FIRST-LOAD', {
                event: 'form-hash-value-setting-start',
                configId,
                initialInputValue,
                initialValueSetRef: initialValueSetRef.current,
                lastValueSetRef: lastValueSetRef.current,
                valueChanged,
                hashTriggeredRefBefore: hashTriggeredRef.current,
                datasourceReady,
                hasOutputDS: !!outputDS,
                sqlExprObjPartsLength: (_p = sqlExprObj === null || sqlExprObj === void 0 ? void 0 : sqlExprObj.parts) === null || _p === void 0 ? void 0 : _p.length,
                activeTab,
                timestamp: Date.now()
            });
            // Set hashTriggeredRef IMMEDIATELY when setting hash value
            // This ensures handleSqlExprObjChange can detect hash-triggered conversions
            hashTriggeredRef.current = true;
            debugLogger.log('FORM', {
                event: 'hashTriggeredRef-set-true',
                configId,
                initialInputValue,
                timestamp: Date.now()
            });
            debugLogger.log('HASH-FIRST-LOAD', {
                event: 'form-hashTriggeredRef-set-true',
                configId,
                initialInputValue,
                hashTriggeredRefAfter: hashTriggeredRef.current,
                timestamp: Date.now()
            });
            const firstPart = sqlExprObj.parts[0];
            // Check if the first part is a SINGLE clause (not a SqlClauseSet)
            if (firstPart && 'type' in firstPart && firstPart.type === 'SINGLE' && 'valueOptions' in firstPart) {
                // Update the expression object with the initial value
                const updated = sqlExprObj.setIn(['parts', '0', 'valueOptions', 'value'], initialInputValue);
                debugLogger.log('FORM', {
                    event: 'hash-value-setting-react-state',
                    configId,
                    initialInputValue,
                    previousStateValue: (_s = (_r = (_q = attributeFilterSqlExprObj === null || attributeFilterSqlExprObj === void 0 ? void 0 : attributeFilterSqlExprObj.parts) === null || _q === void 0 ? void 0 : _q[0]) === null || _r === void 0 ? void 0 : _r.valueOptions) === null || _s === void 0 ? void 0 : _s.value,
                    newStateValue: (_v = (_u = (_t = updated === null || updated === void 0 ? void 0 : updated.parts) === null || _t === void 0 ? void 0 : _t[0]) === null || _u === void 0 ? void 0 : _u.valueOptions) === null || _v === void 0 ? void 0 : _v.value,
                    willCallSetState: true,
                    note: 'Setting value in React state - SqlExpressionRuntime should receive via expression prop'
                });
                setAttributeFilterSqlExprObj(updated);
                // Update ref immediately for synchronous access in applyQuery
                attributeFilterSqlExprObjRef.current = updated;
                debugLogger.log('FORM', {
                    event: 'hash-value-ref-updated',
                    configId,
                    initialInputValue,
                    refValueAfterUpdate: (_z = (_y = (_x = (_w = attributeFilterSqlExprObjRef.current) === null || _w === void 0 ? void 0 : _w.parts) === null || _x === void 0 ? void 0 : _x[0]) === null || _y === void 0 ? void 0 : _y.valueOptions) === null || _z === void 0 ? void 0 : _z.value,
                    timestamp: Date.now()
                });
                // Update clause number for the updated expression
                showClauseNumber.current = (0,jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__.getShownClauseNumberByExpression)(updated);
                // FIX (r018.113): Set tracking refs immediately after setting React state
                // These refs prevent re-setting the same value and track what we've processed
                initialValueSetRef.current = configId;
                lastValueSetRef.current = initialInputValue;
                // FIX (r018.123): MutationObserver will watch for input field and populate it using focus/blur cycle
                // The flow is: setState  SqlExpressionRuntime remounts  MutationObserver detects input[type="text"]  
                // focus  set value  dispatch events  blur  SqlExpressionRuntime.onChange fires naturally 
                // handleSqlExprObjChange detects stringarray conversion  fires QUERYSIMPLE_HASH_VALUE_CONVERTED_EVENT 
                // query-task.tsx event listener executes query (event-driven pattern from r018.108)
                debugLogger.log('FORM', {
                    event: 'hash-value-state-set-awaiting-dom-population',
                    configId,
                    initialInputValue,
                    hashTriggeredRef: hashTriggeredRef.current,
                    note: 'Value set in React state - MutationObserver will populate input[type="text"] using focus/blur cycle',
                    timestamp: Date.now()
                });
            }
        }
        // The sqlExprObj.parts may change but the displaySQL is the same
        if (!sqlExprObj) {
            showClauseNumber.current = 0;
            setAttributeFilterSqlExprObj(null);
            attributeFilterSqlExprObjRef.current = null;
            debugLogger.log('FORM', {
                event: 'sqlExprObj-cleared',
                configId,
                timestamp: Date.now()
            });
        }
        else {
            showClauseNumber.current = (0,jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__.getShownClauseNumberByExpression)(sqlExprObj);
            // Check if we already have a value set (from user input or hash)
            const currentValue = (_2 = (_1 = (_0 = attributeFilterSqlExprObj === null || attributeFilterSqlExprObj === void 0 ? void 0 : attributeFilterSqlExprObj.parts) === null || _0 === void 0 ? void 0 : _0[0]) === null || _1 === void 0 ? void 0 : _1.valueOptions) === null || _2 === void 0 ? void 0 : _2.value;
            const refValue = (_6 = (_5 = (_4 = (_3 = attributeFilterSqlExprObjRef.current) === null || _3 === void 0 ? void 0 : _3.parts) === null || _4 === void 0 ? void 0 : _4[0]) === null || _5 === void 0 ? void 0 : _5.valueOptions) === null || _6 === void 0 ? void 0 : _6.value;
            const baseValue = (_9 = (_8 = (_7 = sqlExprObj === null || sqlExprObj === void 0 ? void 0 : sqlExprObj.parts) === null || _7 === void 0 ? void 0 : _7[0]) === null || _8 === void 0 ? void 0 : _8.valueOptions) === null || _9 === void 0 ? void 0 : _9.value;
            const hasValueSet = currentValue !== undefined && currentValue !== null && currentValue !== '';
            const hasRefValue = refValue !== undefined && refValue !== null && refValue !== '';
            const configIdChanged = previousConfigIdRef.current !== null && previousConfigIdRef.current !== configId;
            const hashWasProcessed = initialValueSetRef.current === configId;
            // FIX (r018.115): Preserve hash-set values even after cleanup clears initialInputValue
            // Check both state AND ref for value presence (ref updates before state in same render)
            // Only update if:
            // 1. We haven't set a value yet (no value in current state OR ref), AND
            // 2. We haven't already processed a hash for this configId, OR
            // 3. configId changed (switching queries - reset to base sqlExprObj)
            // Otherwise, preserve the existing value as a visual record
            if ((!hasValueSet && !hasRefValue && !hashWasProcessed) || configIdChanged) {
                setAttributeFilterSqlExprObj(sqlExprObj);
                attributeFilterSqlExprObjRef.current = sqlExprObj;
                debugLogger.log('FORM', {
                    event: 'sqlExprObj-updated-ref',
                    configId,
                    previousConfigId: previousConfigIdRef.current,
                    initialInputValue,
                    initialValueSetRef: initialValueSetRef.current,
                    hasValueSet,
                    hasRefValue,
                    hashWasProcessed,
                    configIdChanged,
                    previousValue: currentValue,
                    refValue: refValue,
                    newValue: baseValue,
                    reason: configIdChanged ? 'configId-changed-resetting' : 'no-value-set-initializing',
                    timestamp: Date.now()
                });
            }
            else {
                debugLogger.log('FORM', {
                    event: 'sqlExprObj-skipped-ref-update',
                    configId,
                    previousConfigId: previousConfigIdRef.current,
                    initialInputValue,
                    initialValueSetRef: initialValueSetRef.current,
                    hasValueSet,
                    hasRefValue,
                    hashWasProcessed,
                    currentValue,
                    refValue,
                    baseValue,
                    reason: hashWasProcessed ? 'hash-value-already-processed-preserving' :
                        hasRefValue ? 'ref-value-already-set-preserving' :
                            'value-already-set-preserving-as-visual-record',
                    note: 'Skipping update to preserve user-entered or hash-set value as visual record',
                    timestamp: Date.now()
                });
            }
            // Update previousConfigIdRef for next comparison
            previousConfigIdRef.current = configId;
        }
    }, [sqlExprObj, initialInputValue, datasourceReady, outputDS, configId, widgetId, onHashParameterUsed, queryItemShortId, activeTab, onTabChange]);
    // Keep ref in sync with state changes (for SqlExpressionRuntime updates)
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a, _b, _c, _d, _e, _f, _g, _h, _j;
        attributeFilterSqlExprObjRef.current = attributeFilterSqlExprObj;
        // Log when state changes - this is what SqlExpressionRuntime receives via expression prop
        debugLogger.log('FORM', {
            event: 'attributeFilterSqlExprObj-state-changed',
            configId,
            stateValue: (_c = (_b = (_a = attributeFilterSqlExprObj === null || attributeFilterSqlExprObj === void 0 ? void 0 : attributeFilterSqlExprObj.parts) === null || _a === void 0 ? void 0 : _a[0]) === null || _b === void 0 ? void 0 : _b.valueOptions) === null || _c === void 0 ? void 0 : _c.value,
            stateValueType: typeof ((_f = (_e = (_d = attributeFilterSqlExprObj === null || attributeFilterSqlExprObj === void 0 ? void 0 : attributeFilterSqlExprObj.parts) === null || _d === void 0 ? void 0 : _d[0]) === null || _e === void 0 ? void 0 : _e.valueOptions) === null || _f === void 0 ? void 0 : _f.value),
            isArray: Array.isArray((_j = (_h = (_g = attributeFilterSqlExprObj === null || attributeFilterSqlExprObj === void 0 ? void 0 : attributeFilterSqlExprObj.parts) === null || _g === void 0 ? void 0 : _g[0]) === null || _h === void 0 ? void 0 : _h.valueOptions) === null || _j === void 0 ? void 0 : _j.value),
            hashTriggeredRef: hashTriggeredRef.current,
            initialInputValue,
            note: 'React state changed - SqlExpressionRuntime should receive this via expression prop'
        });
    }, [attributeFilterSqlExprObj, configId, initialInputValue]);
    const applyQuery = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p;
        debugLogger.log('HASH-FIRST-LOAD', {
            event: 'form-applyQuery-EXECUTING',
            configId,
            initialInputValue,
            hashTriggeredRef: hashTriggeredRef.current,
            runtimeZoomToSelected,
            willZoom: hashTriggeredRef.current ? true : runtimeZoomToSelected,
            currentValue: (_d = (_c = (_b = (_a = attributeFilterSqlExprObjRef.current) === null || _a === void 0 ? void 0 : _a.parts) === null || _b === void 0 ? void 0 : _b[0]) === null || _c === void 0 ? void 0 : _c.valueOptions) === null || _d === void 0 ? void 0 : _d.value,
            timestamp: Date.now()
        });
        // When the 'apply' button is clicked, it should clear the selection from the previous result list
        (0,_selection_utils__WEBPACK_IMPORTED_MODULE_14__.clearSelectionInDataSources)(outputDS);
        if (outputDS) {
            const originDs = outputDS.getOriginDataSources()[0];
            if (originDs) {
                const dataViewConfig = originDs.getDataViewConfig();
                const maximum = dataViewConfig === null || dataViewConfig === void 0 ? void 0 : dataViewConfig.maximum;
                if (maximum != null && maximum > 0) {
                    jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().updateDataSourceByDataSourceJson(outputDS, outputDS.getDataSourceJson().setIn(['query', 'maximum'], maximum));
                }
            }
        }
        // Force zoom for hash-triggered queries, otherwise use runtime preference
        const zoomToUse = hashTriggeredRef.current ? true : runtimeZoomToSelected;
        // Sanitize user input before submission
        // Read from ref to get the latest value synchronously (including hash values)
        const currentSqlExprObj = attributeFilterSqlExprObjRef.current;
        const currentRefValue = (_g = (_f = (_e = currentSqlExprObj === null || currentSqlExprObj === void 0 ? void 0 : currentSqlExprObj.parts) === null || _e === void 0 ? void 0 : _e[0]) === null || _f === void 0 ? void 0 : _f.valueOptions) === null || _g === void 0 ? void 0 : _g.value;
        debugLogger.log('FORM', {
            event: 'applyQuery-executing',
            configId,
            initialInputValue,
            currentRefValue,
            refHasValue: !!currentRefValue,
            hashTriggered: hashTriggeredRef.current,
            timestamp: Date.now()
        });
        const sanitizedSqlExprObj = (0,_query_utils__WEBPACK_IMPORTED_MODULE_7__.sanitizeSqlExpression)(currentSqlExprObj);
        // Log the sanitized expression to see if value was preserved
        const sanitizedValue = (_k = (_j = (_h = sanitizedSqlExprObj === null || sanitizedSqlExprObj === void 0 ? void 0 : sanitizedSqlExprObj.parts) === null || _h === void 0 ? void 0 : _h[0]) === null || _j === void 0 ? void 0 : _j.valueOptions) === null || _k === void 0 ? void 0 : _k.value;
        debugLogger.log('FORM', {
            event: 'applyQuery-after-sanitize',
            configId,
            currentRefValue,
            sanitizedValue,
            valuesMatch: currentRefValue === sanitizedValue,
            sanitizedValueType: typeof sanitizedValue,
            currentRefValueType: typeof currentRefValue,
            isArrayCurrent: Array.isArray(currentRefValue),
            isArraySanitized: Array.isArray(sanitizedValue),
            timestamp: Date.now()
        });
        let rel = spatialRelationRef.current;
        if (((_l = spatialFilterObjRef.current) === null || _l === void 0 ? void 0 : _l.geometry) && rel == null) {
            rel = _config__WEBPACK_IMPORTED_MODULE_5__.SpatialRelation.Intersect;
        }
        debugLogger.log('HASH-FIRST-LOAD', {
            event: 'form-about-to-call-onFormSubmit',
            configId,
            initialInputValue,
            sanitizedValue,
            hasSpatialGeometryArray: Array.isArray((_m = spatialFilterObjRef.current) === null || _m === void 0 ? void 0 : _m.geometry),
            spatialGeometryCount: Array.isArray((_o = spatialFilterObjRef.current) === null || _o === void 0 ? void 0 : _o.geometry) ? spatialFilterObjRef.current.geometry.length : 0,
            zoomToUse,
            timestamp: Date.now()
        });
        if (Array.isArray((_p = spatialFilterObjRef.current) === null || _p === void 0 ? void 0 : _p.geometry)) {
            if (spatialFilterObjRef.current.geometry.length === 1) {
                debugLogger.log('HASH-FIRST-LOAD', {
                    event: 'form-calling-onFormSubmit-single-geometry',
                    configId,
                    timestamp: Date.now()
                });
                onFormSubmit(sanitizedSqlExprObj, Object.assign(Object.assign({}, spatialFilterObjRef.current), { geometry: spatialFilterObjRef.current.geometry[0], relation: rel, buffer: bufferRef.current }), zoomToUse);
            }
            else {
                debugLogger.log('HASH-FIRST-LOAD', {
                    event: 'form-calling-onFormSubmit-multiple-geometry-union',
                    configId,
                    timestamp: Date.now()
                });
                (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_3__.loadArcGISJSAPIModules)([
                    'esri/geometry/operators/unionOperator'
                ]).then(modules => {
                    const operator = modules[0];
                    const geometry = operator.executeMany(spatialFilterObjRef.current.geometry);
                    onFormSubmit(sanitizedSqlExprObj, Object.assign(Object.assign({}, spatialFilterObjRef.current), { geometry, relation: rel, buffer: bufferRef.current }), zoomToUse);
                });
            }
        }
        else {
            debugLogger.log('HASH-FIRST-LOAD', {
                event: 'form-calling-onFormSubmit-no-spatial-geometry',
                configId,
                timestamp: Date.now()
            });
            onFormSubmit(sanitizedSqlExprObj, Object.assign(Object.assign({}, spatialFilterObjRef.current), { relation: rel, buffer: bufferRef.current }), zoomToUse);
        }
        // Reset hashTriggeredRef after use
        hashTriggeredRef.current = false;
        debugLogger.log('FORM', {
            event: 'hashTriggeredRef-reset-after-apply',
            configId,
            timestamp: Date.now()
        });
    }, [onFormSubmit, outputDS, runtimeZoomToSelected]);
    const handleKeyDown = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((event) => {
        if (event.key === 'Enter' && datasourceReady && isInputValid) {
            event.preventDefault();
            // Find the active input field
            const activeElement = document.activeElement;
            if (activeElement && activeElement.tagName === 'INPUT' && activeElement.type === 'text') {
                // Force blur to trigger SqlExpressionRuntime's input processing
                activeElement.blur();
                // Wait for blur processing, then click the Apply button
                // This uses the exact same code path as clicking the button manually
                setTimeout(() => {
                    if (applyButtonRef.current && !applyButtonRef.current.disabled) {
                        applyButtonRef.current.click();
                    }
                    else {
                        applyQuery();
                    }
                }, 200);
            }
            else {
                // Not in an input field, safe to apply immediately
                if (applyButtonRef.current && !applyButtonRef.current.disabled) {
                    applyButtonRef.current.click();
                }
                else {
                    applyQuery();
                }
            }
        }
    }, [datasourceReady, applyQuery, isInputValid]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a, _b, _c, _d;
        if (!dataActionFilter)
            return;
        if (dataActionFilter.where !== (preDataActionFilter === null || preDataActionFilter === void 0 ? void 0 : preDataActionFilter.where)) {
            // Log state when dataActionFilter changes (query switch)
            const currentRefValue = (_d = (_c = (_b = (_a = attributeFilterSqlExprObjRef.current) === null || _a === void 0 ? void 0 : _a.parts) === null || _b === void 0 ? void 0 : _b[0]) === null || _c === void 0 ? void 0 : _c.valueOptions) === null || _d === void 0 ? void 0 : _d.value;
            const hasPendingHashValue = initialInputValue &&
                (initialValueSetRef.current !== configId ||
                    currentRefValue !== initialInputValue);
            debugLogger.log('FORM', {
                event: 'dataActionFilter-changed-auto-trigger',
                configId,
                previousWhere: preDataActionFilter === null || preDataActionFilter === void 0 ? void 0 : preDataActionFilter.where,
                newWhere: dataActionFilter.where,
                initialInputValue,
                initialValueSetRef: initialValueSetRef.current,
                currentRefValue,
                hasPendingHashValue,
                willCallApplyQuery: !hasPendingHashValue,
                timestamp: Date.now()
            });
            applyQuery();
        }
    }, [dataActionFilter, preDataActionFilter === null || preDataActionFilter === void 0 ? void 0 : preDataActionFilter.where, applyQuery, initialInputValue, configId]);
    const resetQuery = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        // 1. reset attribute filter
        showClauseNumber.current = (0,jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__.getShownClauseNumberByExpression)(sqlExprObj);
        setAttributeFilterSqlExprObj(sqlExprObj);
        // 2. reset spatial filter
        setResetSymbol(Symbol());
    }, [sqlExprObj]);
    const handleSqlExprObjChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((sqlObj) => {
        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s;
        // LOG AT THE VERY START
        const sqlObjValue = (_c = (_b = (_a = sqlObj === null || sqlObj === void 0 ? void 0 : sqlObj.parts) === null || _a === void 0 ? void 0 : _a[0]) === null || _b === void 0 ? void 0 : _b.valueOptions) === null || _c === void 0 ? void 0 : _c.value;
        const previousRefValue = (_g = (_f = (_e = (_d = attributeFilterSqlExprObjRef.current) === null || _d === void 0 ? void 0 : _d.parts) === null || _e === void 0 ? void 0 : _e[0]) === null || _f === void 0 ? void 0 : _f.valueOptions) === null || _g === void 0 ? void 0 : _g.value;
        const previousStateValue = (_k = (_j = (_h = attributeFilterSqlExprObj === null || attributeFilterSqlExprObj === void 0 ? void 0 : attributeFilterSqlExprObj.parts) === null || _h === void 0 ? void 0 : _h[0]) === null || _j === void 0 ? void 0 : _j.valueOptions) === null || _k === void 0 ? void 0 : _k.value;
        // Check if this is from user typing or prop change
        const isFromUserTyping = typeof previousRefValue === 'string' &&
            typeof sqlObjValue === 'object' &&
            Array.isArray(sqlObjValue) &&
            ((_l = sqlObjValue[0]) === null || _l === void 0 ? void 0 : _l.value) === previousRefValue;
        const isFromPropChange = JSON.stringify(previousStateValue) === JSON.stringify(sqlObjValue);
        debugLogger.log('FORM', {
            event: 'handleSqlExprObjChange-called',
            configId,
            sqlObjExists: !!sqlObj,
            initialInputValue,
            hashTriggeredRef: hashTriggeredRef.current,
            sqlObjValue,
            sqlObjValueType: typeof sqlObjValue,
            sqlObjIsArray: Array.isArray(sqlObjValue),
            previousRefValue,
            previousStateValue,
            isFromUserTyping,
            isFromPropChange,
            triggerSource: isFromUserTyping ? 'user-typing' : (isFromPropChange ? 'prop-change' : 'unknown'),
            timestamp: Date.now()
        });
        debugLogger.log('HASH-FIRST-LOAD', {
            event: 'form-handleSqlExprObjChange-CALLED',
            configId,
            initialInputValue,
            hashTriggeredRef: hashTriggeredRef.current,
            datasourceReady,
            hasOutputDS: !!outputDS,
            sqlObjValue,
            sqlObjValueType: typeof sqlObjValue,
            isArray: Array.isArray(sqlObjValue),
            previousRefValue,
            previousRefValueType: typeof previousRefValue,
            valueChangedFromStringToArray: typeof previousRefValue === 'string' && Array.isArray(sqlObjValue),
            timestamp: Date.now()
        });
        const firstPart = (_m = sqlObj === null || sqlObj === void 0 ? void 0 : sqlObj.parts) === null || _m === void 0 ? void 0 : _m[0];
        const value = (firstPart === null || firstPart === void 0 ? void 0 : firstPart.type) === 'SINGLE' ? (_o = firstPart.valueOptions) === null || _o === void 0 ? void 0 : _o.value : 'not-single';
        debugLogger.log('FORM', {
            event: 'sql-expression-changed',
            configId,
            partsCount: ((_p = sqlObj === null || sqlObj === void 0 ? void 0 : sqlObj.parts) === null || _p === void 0 ? void 0 : _p.length) || 0,
            firstPartValue: value,
            hashTriggeredRefValue: hashTriggeredRef.current,
            initialInputValue: initialInputValue,
            isArrayFormat: Array.isArray(value),
            timestamp: Date.now()
        });
        showClauseNumber.current = (0,jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__.getShownClauseNumberByExpression)(sqlObj);
        setAttributeFilterSqlExprObj(sqlObj);
        // Check if this is a hash-triggered conversion (string -> array)
        // When hash value changes for same configId, SqlExpressionRuntime converts string to array format
        if ((firstPart === null || firstPart === void 0 ? void 0 : firstPart.type) === 'SINGLE' && ((_q = firstPart === null || firstPart === void 0 ? void 0 : firstPart.valueOptions) === null || _q === void 0 ? void 0 : _q.value)) {
            const value = firstPart.valueOptions.value;
            const isArrayFormat = Array.isArray(value);
            const hasInitialValue = initialInputValue && hashTriggeredRef.current;
            debugLogger.log('FORM', {
                event: 'sql-expression-changed-conversion-check',
                configId,
                isArrayFormat,
                hasInitialValue,
                hashTriggeredRefValue: hashTriggeredRef.current,
                initialInputValue,
                valueType: typeof value,
                value: Array.isArray(value) ? value : value,
                timestamp: Date.now()
            });
            debugLogger.log('HASH-FIRST-LOAD', {
                event: 'form-conversion-check',
                configId,
                isArrayFormat,
                hasInitialValue,
                hashTriggeredRef: hashTriggeredRef.current,
                initialInputValue,
                valueType: typeof value,
                isArray: Array.isArray(value),
                arrayLength: Array.isArray(value) ? value.length : 'n/a',
                firstItem: Array.isArray(value) && value.length > 0 ? value[0] : 'n/a',
                willCheckMatch: isArrayFormat && hasInitialValue && initialInputValue,
                timestamp: Date.now()
            });
            // If value converted to array format AND this was hash-triggered, fire event
            if (isArrayFormat && hasInitialValue && initialInputValue) {
                const matchesHashValue = value.length > 0 && ((_r = value[0]) === null || _r === void 0 ? void 0 : _r.value) === initialInputValue;
                debugLogger.log('FORM', {
                    event: 'sql-expression-changed-matches-check',
                    configId,
                    matchesHashValue,
                    initialInputValue,
                    convertedValueFirstItem: (_s = value[0]) === null || _s === void 0 ? void 0 : _s.value,
                    timestamp: Date.now()
                });
                if (matchesHashValue) {
                    debugLogger.log('FORM', {
                        event: 'hash-value-converted-to-array',
                        configId,
                        initialInputValue,
                        convertedValue: value,
                        timestamp: Date.now()
                    });
                    // Fire custom event for query execution to wait on
                    const event = new CustomEvent(QUERYSIMPLE_HASH_VALUE_CONVERTED_EVENT, {
                        detail: {
                            configId,
                            widgetId,
                            initialInputValue,
                            convertedValue: value
                        },
                        bubbles: true
                    });
                    document.dispatchEvent(event);
                    debugLogger.log('FORM', {
                        event: 'hash-value-converted-event-dispatched',
                        configId,
                        widgetId,
                        timestamp: Date.now()
                    });
                    // EXECUTION POINT: Query execution happens HERE after conversion is confirmed
                    // This is the ONLY place where hash-triggered queries should execute
                    // The event QUERYSIMPLE_HASH_VALUE_CONVERTED_EVENT has been dispatched above
                    // This direct call handles the case where conversion happens synchronously
                    // The event listener in query-task.tsx handles the async case
                    debugLogger.log('HASH-FIRST-LOAD', {
                        event: 'form-execution-decision-point',
                        configId,
                        initialInputValue,
                        conditionCheck: {
                            hashTriggeredRef: hashTriggeredRef.current,
                            datasourceReady,
                            hasOutputDS: !!outputDS,
                            allConditionsMet: !!(hashTriggeredRef.current && datasourceReady && outputDS)
                        },
                        willExecute: !!(hashTriggeredRef.current && datasourceReady && outputDS),
                        timestamp: Date.now()
                    });
                    if (hashTriggeredRef.current && datasourceReady && outputDS) {
                        debugLogger.log('FORM', {
                            event: 'hash-value-converted-executing-query-directly',
                            configId,
                            initialInputValue,
                            note: 'Conversion complete - executing query directly via applyQuery (event-driven pattern)',
                            timestamp: Date.now()
                        });
                        debugLogger.log('HASH-FIRST-LOAD', {
                            event: 'form-WILL-EXECUTE-applyQuery',
                            configId,
                            initialInputValue,
                            note: 'All conditions met - calling applyQuery after setTimeout(0)',
                            timestamp: Date.now()
                        });
                        // Use setTimeout to ensure this happens after the current event loop
                        setTimeout(() => {
                            debugLogger.log('HASH-FIRST-LOAD', {
                                event: 'form-applyQuery-CALLED',
                                configId,
                                initialInputValue,
                                timestamp: Date.now()
                            });
                            applyQuery();
                        }, 0);
                    }
                    else {
                        debugLogger.log('HASH-FIRST-LOAD', {
                            event: 'form-execution-SKIPPED',
                            configId,
                            initialInputValue,
                            reason: !hashTriggeredRef.current ? 'hashTriggeredRef is false' :
                                !datasourceReady ? 'datasourceReady is false' :
                                    !outputDS ? 'outputDS is null/undefined' :
                                        'unknown',
                            conditionStates: {
                                hashTriggeredRef: hashTriggeredRef.current,
                                datasourceReady,
                                hasOutputDS: !!outputDS
                            },
                            timestamp: Date.now()
                        });
                    }
                    // FIX (r018.125): Reset flag after conversion detection completes
                    // This allows the next hash change to trigger a new conversion cycle
                    hashTriggeredRef.current = false;
                    debugLogger.log('FORM', {
                        event: 'hash-triggered-ref-reset-after-conversion',
                        configId,
                        initialInputValue,
                        note: 'hashTriggeredRef reset to false after conversion detection complete',
                        timestamp: Date.now()
                    });
                }
            }
        }
    }, [configId, initialInputValue, widgetId, datasourceReady, outputDS, applyQuery]);
    const handleSpatialFilterChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((filter) => {
        spatialFilterObjRef.current = filter;
    }, []);
    const handleRelationChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((rel) => {
        spatialRelationRef.current = rel;
    }, []);
    const handleBufferChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((distance, unit) => {
        bufferRef.current = { distance, unit };
    }, []);
    const showAttributeFilter = useAttributeFilter && sqlExprObj != null;
    const showSpatialFilter = spatialFilterEnabled && useSpatialFilter && (spatialFilterTypes.length > 0 || spatialIncludeRuntimeData || (spatialRelationUseDataSources === null || spatialRelationUseDataSources === void 0 ? void 0 : spatialRelationUseDataSources.length) > 0);
    // Debug logging for form rendering
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        debugLogger.log('FORM', {
            event: 'form-render-check',
            configId,
            datasourceReady,
            useAttributeFilter,
            sqlExprObj: sqlExprObj ? 'exists' : 'null',
            sqlExprObjParts: ((_a = sqlExprObj === null || sqlExprObj === void 0 ? void 0 : sqlExprObj.parts) === null || _a === void 0 ? void 0 : _a.length) || 0,
            showAttributeFilter,
            originDS: originDS ? 'exists' : 'null',
            originDSId: (originDS === null || originDS === void 0 ? void 0 : originDS.id) || 'none',
            showSpatialFilter,
            isAutoHeight,
            outputDS: outputDS ? 'exists' : 'null'
        });
    }, [configId, datasourceReady, useAttributeFilter, sqlExprObj, showAttributeFilter, originDS, showSpatialFilter, isAutoHeight, outputDS]);
    // Log when form content should render
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        if (showAttributeFilter && originDS) {
            debugLogger.log('FORM', {
                event: 'attribute-filter-ready',
                configId,
                originDSId: originDS.id,
                sqlExprObjParts: ((_a = sqlExprObj === null || sqlExprObj === void 0 ? void 0 : sqlExprObj.parts) === null || _a === void 0 ? void 0 : _a.length) || 0,
                attributeFilterLabel,
                note: 'Input field should be visible'
            });
        }
        else {
            debugLogger.log('FORM', {
                event: 'attribute-filter-not-ready',
                configId,
                showAttributeFilter,
                originDS: originDS ? 'exists' : 'null',
                useAttributeFilter,
                sqlExprObj: sqlExprObj ? 'exists' : 'null',
                reason: !showAttributeFilter ? 'showAttributeFilter is false' : 'originDS is null'
            });
        }
    }, [showAttributeFilter, originDS, configId, sqlExprObj, useAttributeFilter, attributeFilterLabel]);
    // Check DOM visibility after render
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        if (formContentRef.current) {
            const computedStyle = window.getComputedStyle(formContentRef.current);
            const rect = formContentRef.current.getBoundingClientRect();
            debugLogger.log('FORM', {
                event: 'form-content-dom-check',
                configId,
                exists: !!formContentRef.current,
                display: computedStyle.display,
                visibility: computedStyle.visibility,
                opacity: computedStyle.opacity,
                height: computedStyle.height,
                maxHeight: computedStyle.maxHeight,
                flex: computedStyle.flex,
                flexBasis: computedStyle.flexBasis,
                rectHeight: rect.height,
                rectWidth: rect.width,
                isVisible: rect.height > 0 && rect.width > 0,
                parentHeight: ((_a = formContentRef.current.parentElement) === null || _a === void 0 ? void 0 : _a.clientHeight) || 0
            });
        }
    }, [configId, showAttributeFilter, originDS]);
    // Log when SqlExpressionRuntime key changes (component remounts) OR expression prop changes
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a, _b, _c;
        const expressionValue = (_c = (_b = (_a = attributeFilterSqlExprObj === null || attributeFilterSqlExprObj === void 0 ? void 0 : attributeFilterSqlExprObj.parts) === null || _a === void 0 ? void 0 : _a[0]) === null || _b === void 0 ? void 0 : _b.valueOptions) === null || _c === void 0 ? void 0 : _c.value;
        const sqlExprRuntimeKey = `${configId}-${expressionValue || 'empty'}`;
        debugLogger.log('FORM', {
            event: 'SqlExpressionRuntime-props-changed',
            configId,
            initialInputValue,
            sqlExprRuntimeKey,
            expressionValue,
            expressionValueType: typeof expressionValue,
            isArray: Array.isArray(expressionValue),
            hashTriggeredRef: hashTriggeredRef.current,
            originDSExists: !!originDS,
            note: 'FIX (r018.123): Key uses configId + expressionValue to remount when value changes, not when initialInputValue clears',
            timestamp: Date.now()
        });
    }, [configId, initialInputValue, attributeFilterSqlExprObj, originDS]);
    // ============================================================================
    // DOM MANIPULATION FOR SqlExpressionRuntime (r018.122-128)
    // ============================================================================
    // 
    //  CRITICAL: DO NOT REMOVE THIS WORKAROUND 
    // 
    // WHY THIS IS NECESSARY:
    // 
    // SqlExpressionRuntime is a "black-box" ExB component that does NOT support
    // programmatic value population via its `expression` prop. This was discovered
    // through extensive testing (r018.108-128):
    // 
    // 1. Setting `expression` prop  Component does NOT populate its text field
    // 2. Changing `expression` prop  Component does NOT fire onChange event
    // 3. Using `key` prop to remount  Component still doesn't populate field
    // 
    // The component ONLY responds to actual DOM user interactions (focus, input, blur).
    // 
    // WHAT WE NEED TO ACHIEVE:
    // 
    // When a hash parameter arrives (e.g., #pin=2223059013), we need to:
    // 1. Populate the SqlExpressionRuntime text field with "2223059013"
    // 2. Trigger SqlExpressionRuntime's onChange handler
    // 3. Allow it to convert string  array format internally
    // 4. Execute the query with the correctly formatted value
    // 
    // THE SOLUTION:
    // 
    // Simulate user interaction by directly manipulating the DOM input field:
    // 
    // 1. MutationObserver watches for input[type="text"] to appear in DOM
    // 2. Double requestAnimationFrame ensures React has attached event handlers
    // 3. focus()  set value  dispatch events  blur()
    // 4. SqlExpressionRuntime.onChange fires naturally
    // 5. Internal stringarray conversion happens
    // 6. Query executes with correct array format
    // 
    // ALTERNATIVES ATTEMPTED (ALL FAILED):
    // 
    // -  Direct applyQuery() call  Wrong format (string instead of array)
    // -  Updating expression prop  Component ignores it
    // -  Key-based remount  Component doesn't populate from prop
    // -  Calling onChange manually  No access to internal state
    // 
    // TIMING REQUIREMENTS:
    // 
    // - MutationObserver: Event-driven detection when input appears
    // - Double RAF: Ensures React commit phase completes (handlers attached)
    // - focus/blur cycle: Triggers SqlExpressionRuntime's internal logic
    // 
    // MAINTENANCE NOTES:
    // 
    // - This workaround is REQUIRED for hash parameter execution
    // - If Esri updates SqlExpressionRuntime to support programmatic population, 
    //   this can be removed
    // - Tested extensively in r018.108-128 (see CURRENT_WORK.md)
    // - Debug switch: FORM (query-task-form events)
    // 
    // See: SQLEXPRESSION_RUNTIME_DOM_WORKAROUND.md for full details
    // 
    // ============================================================================
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (!sqlExprRuntimeContainerRef.current || !originDS)
            return;
        // FIX (r018.124): Simplify - use initialInputValue (the hash parameter) directly
        // The old working code checked against initialInputValue, not expressionValue
        // This useEffect now depends on initialInputValue, so it re-runs for each hash change
        if (initialInputValue && hashTriggeredRef.current) {
            const container = sqlExprRuntimeContainerRef.current;
            debugLogger.log('FORM', {
                event: 'hash-dom-population-attempt',
                configId,
                initialInputValue,
                hasContainer: !!container,
                hashTriggeredRef: hashTriggeredRef.current,
                timestamp: Date.now()
            });
            // Function to populate the input field when found
            const populateInputField = (inputField) => {
                const currentValue = inputField.value;
                // FIX (r018.124): Use old working logic - update if empty OR different from initialInputValue
                const shouldUpdate = !currentValue ||
                    currentValue.trim() === '' ||
                    currentValue !== initialInputValue;
                debugLogger.log('FORM', {
                    event: 'hash-dom-input-found',
                    configId,
                    currentValue,
                    targetValue: initialInputValue,
                    shouldUpdate,
                    hashTriggeredRef: hashTriggeredRef.current,
                    inputType: inputField.type,
                    timestamp: Date.now()
                });
                if (shouldUpdate) {
                    // FIX (r018.125): Use double RAF to ensure SqlExpressionRuntime is fully initialized
                    // When MutationObserver finds the input, React may not have finished attaching event handlers
                    // Double RAF waits for browser paint + React commit phase to complete (event-driven, no setTimeout)
                    requestAnimationFrame(() => {
                        requestAnimationFrame(() => {
                            var _a;
                            debugLogger.log('FORM', {
                                event: 'hash-dom-starting-manipulation-after-raf',
                                configId,
                                value: initialInputValue,
                                note: 'Double RAF complete - SqlExpressionRuntime should be fully initialized',
                                timestamp: Date.now()
                            });
                            // Focus the input first (critical for React synthetic events)
                            inputField.focus();
                            debugLogger.log('FORM', {
                                event: 'hash-dom-input-focused',
                                configId,
                                value: initialInputValue,
                                isFocused: document.activeElement === inputField,
                                timestamp: Date.now()
                            });
                            // Set the value
                            inputField.value = String(initialInputValue);
                            debugLogger.log('FORM', {
                                event: 'hash-dom-value-set',
                                configId,
                                value: initialInputValue,
                                inputFieldValueAfter: inputField.value,
                                timestamp: Date.now()
                            });
                            // Dispatch input event with proper properties
                            const inputEvent = new Event('input', { bubbles: true, cancelable: true });
                            Object.defineProperty(inputEvent, 'target', { value: inputField, enumerable: true });
                            inputField.dispatchEvent(inputEvent);
                            // Dispatch change event
                            const changeEvent = new Event('change', { bubbles: true, cancelable: true });
                            Object.defineProperty(changeEvent, 'target', { value: inputField, enumerable: true });
                            inputField.dispatchEvent(changeEvent);
                            // Also use React's native value setter approach
                            const nativeInputValueSetter = (_a = Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype, 'value')) === null || _a === void 0 ? void 0 : _a.set;
                            if (nativeInputValueSetter) {
                                nativeInputValueSetter.call(inputField, String(initialInputValue));
                                const reactEvent = new Event('input', { bubbles: true });
                                inputField.dispatchEvent(reactEvent);
                            }
                            debugLogger.log('FORM', {
                                event: 'hash-dom-events-dispatched',
                                configId,
                                value: initialInputValue,
                                inputEventDispatched: true,
                                changeEventDispatched: true,
                                reactEventDispatched: !!nativeInputValueSetter,
                                timestamp: Date.now()
                            });
                            // Blur to trigger any validation or state updates (critical for SqlExpressionRuntime.onChange)
                            inputField.blur();
                            debugLogger.log('FORM', {
                                event: 'hash-dom-value-populated',
                                configId,
                                value: initialInputValue,
                                note: 'DOM manipulation complete - SqlExpressionRuntime.onChange should fire and detect conversion',
                                timestamp: Date.now()
                            });
                            // FIX (r018.125): Don't reset flag here - blur() is async and triggers onChange
                            // The flag will be reset in handleSqlExprObjChange after conversion is detected
                            // Resetting it here causes onChange to see false and skip the conversion event
                        });
                    });
                }
            };
            // Try to find input field immediately (it might already exist)
            // SqlExpressionRuntime uses input[type="text"], not textarea
            const inputField = container.querySelector('input[type="text"]');
            if (inputField) {
                // Found it immediately - populate it
                debugLogger.log('FORM', {
                    event: 'hash-dom-input-found-immediately',
                    configId,
                    timestamp: Date.now()
                });
                populateInputField(inputField);
            }
            else {
                // Not found yet - use MutationObserver to watch for it (event-driven, no timers)
                debugLogger.log('FORM', {
                    event: 'hash-dom-input-not-found-watching',
                    configId,
                    note: 'Setting up MutationObserver to watch for input[type="text"] appearance',
                    timestamp: Date.now()
                });
                const observer = new MutationObserver(() => {
                    const inputField = container.querySelector('input[type="text"]');
                    if (inputField) {
                        debugLogger.log('FORM', {
                            event: 'hash-dom-input-appeared',
                            configId,
                            note: 'MutationObserver detected input[type="text"] in DOM',
                            timestamp: Date.now()
                        });
                        populateInputField(inputField);
                        observer.disconnect(); // Stop watching once we've found and populated it
                        debugLogger.log('FORM', {
                            event: 'hash-dom-observer-disconnected',
                            configId,
                            timestamp: Date.now()
                        });
                    }
                });
                // Watch for any child elements being added to the container
                observer.observe(container, {
                    childList: true, // Watch for children being added/removed
                    subtree: true // Watch the entire subtree
                });
                debugLogger.log('FORM', {
                    event: 'hash-dom-observer-started',
                    configId,
                    timestamp: Date.now()
                });
                // Cleanup: stop watching when component unmounts or dependencies change
                return () => {
                    observer.disconnect();
                    debugLogger.log('FORM', {
                        event: 'hash-dom-observer-cleanup',
                        configId,
                        timestamp: Date.now()
                    });
                };
            }
        }
    }, [attributeFilterSqlExprObj, originDS, configId, initialInputValue]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_context__WEBPACK_IMPORTED_MODULE_12__.QueryTaskContext.Provider, { value: { resetSymbol }, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'query-form', css: getFormStyle(isAutoHeight), children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { ref: formContentRef, className: 'query-form__content', onKeyDown: handleKeyDown, children: [showAttributeFilter && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { role: 'group', className: 'px-4', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `padding-top: 2px;`, "aria-label": attributeFilterLabel, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('form-title d-flex align-items-center', { 'd-none': !attributeFilterLabel && !attributeFilterDesc }), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                margin-top: 0;
                margin-bottom: 4px;
              `, children: [attributeFilterLabel && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'mr-2 title2', children: attributeFilterLabel }), attributeFilterDesc && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { placement: 'bottom', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `white-space: pre-line;`, title: attributeFilterDesc, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: 'sm', icon: true, type: 'tertiary', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_13__.InfoOutlined, { color: 'var(--sys-color-primary-main)', size: 's' }) }) }))] }), originDS && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { ref: sqlExprRuntimeContainerRef, css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `margin: -10px 0px;`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__.SqlExpressionRuntime, { widgetId: widgetId, dataSource: originDS, expression: attributeFilterSqlExprObj, onChange: handleSqlExprObjChange }, `${configId}-${((_d = (_c = (_b = attributeFilterSqlExprObj === null || attributeFilterSqlExprObj === void 0 ? void 0 : attributeFilterSqlExprObj.parts) === null || _b === void 0 ? void 0 : _b[0]) === null || _c === void 0 ? void 0 : _c.valueOptions) === null || _d === void 0 ? void 0 : _d.value) || 'empty'}`) }))] })), showAttributeFilter && showSpatialFilter && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("hr", { className: 'm-4', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `border: none; height: 1px; background-color: var(--sys-color-divider-secondary);` })), showSpatialFilter && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_spatial_form__WEBPACK_IMPORTED_MODULE_9__.QueryTaskSpatialForm, { widgetId: widgetId, label: spatialFilterLabel, desc: spatialFilterDesc, filterTypes: spatialFilterTypes, mapWidgetIds: spatialMapWidgetIds, createToolTypes: spatialInteractiveCreateToolTypes, onFilterChange: handleSpatialFilterChange, onRelationChange: handleRelationChange, onBufferChange: handleBufferChange, spatialRelations: spatialRelations, dsEnableBuffer: spatialRelationEnableBuffer, dsBufferDistance: spatialRelationBufferDistance, dsBufferUnit: spatialRelationBufferUnit, drawEnableBuffer: spatialInteractiveEnableBuffer, drawBufferDistance: spatialInteractiveBufferDistance, drawBufferUnit: spatialInteractiveBufferUnit, useDataSources: spatialRelationUseDataSources, useRuntimeData: spatialIncludeRuntimeData }))] }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'query-form__actions px-4 d-flex align-items-center', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Checkbox, { checked: runtimeZoomToSelected, onChange: (_, checked) => setRuntimeZoomToSelected(checked), className: 'mr-2' }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { className: 'mr-auto', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `font-size: 0.875rem; color: var(--sys-color-text-primary);`, children: getI18nMessage('zoomToSelected') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { ref: applyButtonRef, color: 'primary', className: 'ml-auto', disabled: !datasourceReady || !isInputValid, onClick: applyQuery, children: getI18nMessage('apply') }), (showClauseNumber.current > 0 || showSpatialFilter) && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { className: 'ml-2', onClick: resetQuery, children: getI18nMessage('reset') }))] })] }) }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-label.tsx":
/*!*******************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-label.tsx ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTaskLabel: () => (/* binding */ QueryTaskLabel)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");

/** @jsx jsx */


const textStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
  font-weight: 500;
  font-size: 0.875rem;
`;
function QueryTaskLabel(props) {
    const { icon, name } = props;
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'd-flex align-items-center text-truncate', css: textStyle, children: [icon && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Icon, { className: 'query-task-icon mr-2', icon: icon.svg }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'text-truncate', title: name, children: name })] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-list-inline.tsx":
/*!*************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-list-inline.tsx ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TaskListInline: () => (/* binding */ TaskListInline)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _query_task__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./query-task */ "./your-extensions/widgets/query-simple/src/runtime/query-task.tsx");
/* harmony import */ var _query_task_list__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./query-task-list */ "./your-extensions/widgets/query-simple/src/runtime/query-task-list.tsx");
/* harmony import */ var _query_task_list_popper_wrapper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./query-task-list-popper-wrapper */ "./your-extensions/widgets/query-simple/src/runtime/query-task-list-popper-wrapper.tsx");
/* harmony import */ var _widget_config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./widget-config */ "./your-extensions/widgets/query-simple/src/runtime/widget-config.ts");
/* harmony import */ var _default_query_item__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../default-query-item */ "./your-extensions/widgets/query-simple/src/default-query-item.ts");

/** @jsx jsx */






const { iconMap } = (0,_widget_config__WEBPACK_IMPORTED_MODULE_5__.getWidgetRuntimeDataMap)();
const SPACE = 8;
const style = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
  > div {
    margin-right: 8px;
  }
`;
// show task label and an arrow to the task content
function TaskListInline(props) {
    const { queryItems, widgetId, minSize, defaultSize, defaultPageSize, widgetLabel, wrap = false } = props;
    const containerRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(undefined);
    const containerWidthRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(0);
    const contentWidthRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef({});
    const [numOfExpanded, setNumOfExpanded] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(queryItems.length);
    const [openedPopper, setOpenedPopper] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(-1);
    const resizeObserverRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const adjustContent = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        let total = 0;
        for (let i = 0; i < numOfExpanded; i++) {
            const item = queryItems[i];
            const itemWidth = contentWidthRef.current[item.configId];
            if (itemWidth > 0) {
                total += itemWidth + SPACE;
                if (total >= containerWidthRef.current && numOfExpanded !== i) {
                    setNumOfExpanded(i);
                    return;
                }
            }
            else {
                return; // content width not ready
            }
        }
        setNumOfExpanded(queryItems.length);
    }, [numOfExpanded, queryItems]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (resizeObserverRef.current) {
            resizeObserverRef.current.disconnect();
        }
        // bind with the new event handler
        resizeObserverRef.current = new ResizeObserver(jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.throttle((entries) => {
            const width = Math.round(entries[0].contentRect.width);
            if (containerWidthRef.current !== width) {
                containerWidthRef.current = width;
                adjustContent();
            }
        }, 200));
        resizeObserverRef.current.observe(containerRef.current);
        return () => {
            resizeObserverRef.current.disconnect();
        };
    }, [adjustContent]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        var _a;
        containerWidthRef.current = (_a = containerRef.current) === null || _a === void 0 ? void 0 : _a.clientWidth;
        adjustContent();
    });
    const handleItemWidthChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((index, width) => {
        const queryItem = queryItems[index];
        if (contentWidthRef.current[queryItem.configId] !== width) {
            contentWidthRef.current[queryItem.configId] = width;
            adjustContent();
        }
    }, [queryItems, adjustContent]);
    const handlePopperOpenedChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((index, isOpen) => {
        if (isOpen) {
            setOpenedPopper(index);
        }
        else if (index === openedPopper) {
            // current popper is closed
            setOpenedPopper(-1);
        }
    }, [openedPopper]);
    const [expandedArray, nonExpandedArray] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        const expandedArray = [];
        const nonExpandedArray = [];
        for (let i = 0; i < queryItems.length; i++) {
            if (i < numOfExpanded) {
                expandedArray.push(queryItems[i]);
            }
            else {
                nonExpandedArray.push(queryItems[i]);
            }
        }
        return [expandedArray, nonExpandedArray];
    }, [queryItems, numOfExpanded]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { ref: containerRef, css: style, className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('runtime-query__query-list h-100 d-flex', { 'flex-wrap': wrap, 'align-content-start': wrap }), children: [expandedArray.map((queryItem, index) => {
                var _a;
                const currentItem = Object.assign({}, _default_query_item__WEBPACK_IMPORTED_MODULE_6__.DEFAULT_QUERY_ITEM, queryItem);
                return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list_popper_wrapper__WEBPACK_IMPORTED_MODULE_4__.TaskListPopperWrapper, { id: index, icon: currentItem.icon, buttonType: 'default', label: currentItem.displayLabel ? currentItem.name : undefined, popperTitle: currentItem.name, onWidthChange: handleItemWidthChange, minSize: minSize, defaultSize: defaultSize, onOpenedChange: handlePopperOpenedChange, forceClose: openedPopper >= 0 && openedPopper !== index, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task__WEBPACK_IMPORTED_MODULE_2__.QueryTask, { widgetId: widgetId, index: index, total: 1, isInPopper: true, queryItem: currentItem, wrappedInPopper: true, className: 'pb-4', defaultPageSize: defaultPageSize, initialInputValue: currentItem.shortId === ((_a = props.initialQueryValue) === null || _a === void 0 ? void 0 : _a.shortId) ? props.initialQueryValue.value : undefined, onHashParameterUsed: props.onHashParameterUsed, queryItemShortId: currentItem.shortId }) }, currentItem.configId);
            }), nonExpandedArray.length > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list_popper_wrapper__WEBPACK_IMPORTED_MODULE_4__.TaskListPopperWrapper, { id: expandedArray.length + 1, icon: iconMap.iconMore, minSize: minSize, buttonType: 'default', popperTitle: widgetLabel, defaultSize: defaultSize, onOpenedChange: handlePopperOpenedChange, forceClose: openedPopper >= 0 && openedPopper !== expandedArray.length + 1, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list__WEBPACK_IMPORTED_MODULE_3__.QueryTaskList, { widgetId: widgetId, isInPopper: true, defaultPageSize: defaultPageSize, queryItems: nonExpandedArray, className: 'pb-4', initialQueryValue: props.initialQueryValue, onHashParameterUsed: props.onHashParameterUsed }) }))] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-list-popper-wrapper.tsx":
/*!*********************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-list-popper-wrapper.tsx ***!
  \*********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TaskListPopperWrapper: () => (/* binding */ TaskListPopperWrapper)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _version__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../version */ "./your-extensions/widgets/query-simple/src/version.ts");

/** @jsx jsx */



const shiftOptions = { padding: 1 };
function TaskListPopperWrapper(props) {
    const { id, icon, label, forceClose, onOpenedChange, popperTitle, minSize, defaultSize, onWidthChange, buttonType = 'tertiary', children } = props;
    const iconRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(undefined);
    const widthRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(0);
    const [isOpen, setIsOpen] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(false);
    const [popperVersion, setPopperVersion] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(0);
    const isMobile = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useCheckSmallBrowserSizeMode();
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (forceClose) {
            setIsOpen(false);
        }
    }, [forceClose]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        if (typeof onWidthChange === 'function') {
            widthRef.current = Math.round(iconRef.current.clientWidth);
            onWidthChange(id, widthRef.current);
            const resizeObserver = new ResizeObserver(jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.throttle((entries) => {
                const width = Math.round(entries[0].contentRect.width);
                if (widthRef.current !== width) {
                    widthRef.current = width;
                    onWidthChange(id, width);
                }
            }, 200));
            resizeObserver.observe(iconRef.current);
            return () => {
                resizeObserver.disconnect();
            };
        }
    });
    const togglePopper = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        if (typeof onOpenedChange === 'function') {
            onOpenedChange(id, !isOpen);
        }
        setIsOpen(!isOpen);
        setPopperVersion(popperVersion + 1);
        if (isOpen) {
            setTimeout(() => {
                if ((0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.isKeyboardMode)()) {
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.focusElementInKeyboardMode)(iconRef.current);
                }
            }, 200);
        }
    }, [id, isOpen, popperVersion, onOpenedChange]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'runtime-query__widget-popper', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { title: label, "aria-label": label, icon: true, size: 'sm', variant: buttonType === 'tertiary' ? 'text' : undefined, color: buttonType === 'tertiary' ? 'inherit' : undefined, type: buttonType === 'tertiary' ? undefined : buttonType, ref: iconRef, onClick: togglePopper, children: [icon && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Icon, Object.assign({ size: 16 }, (typeof icon === 'string' ? { icon } : { icon: icon.svg, color: buttonType === 'tertiary' ? undefined : icon.properties.color }))), label && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            word-break: break-word;
            word-wrap: break-word;
            line-height: 1.2;
          `, className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)({ 'ml-2': icon != null }), children: label })] }), isMobile
                ? (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.MobilePanel, { open: isOpen, title: popperTitle, onClose: togglePopper, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              display: flex;
              flex-direction: column;
              height: 100%;
            `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                flex: 1;
                overflow: auto;
                padding-bottom: 1rem; /* Scoped padding to space content from footer */
              `, children: children }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                padding: 4px 12px;
                border-top: 1px solid var(--sys-color-divider-secondary);
                background-color: var(--sys-color-surface-paper);
                flex-shrink: 0;
                text-align: center;
              `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                  font-size: 0.75rem;
                  color: var(--sys-color-text-tertiary);
                  font-weight: 400;
                  letter-spacing: 0.025em;
                  display: inline-flex;
                  align-items: center;
                  gap: 4px;
                `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("svg", { width: "14", height: "14", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                      flex-shrink: 0;
                      opacity: 0.6;
                    `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("polyline", { points: "16 18 22 12 16 6" }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("polyline", { points: "8 6 2 12 8 18" })] }), "QuerySimple by MapSimple", (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                    margin-left: 6px;
                    opacity: 0.5;
                    font-size: 0.7rem;
                  `, children: ["v", _version__WEBPACK_IMPORTED_MODULE_3__.WIDGET_VERSION] })] }) })] }) })
                : (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.FloatingPanel, { className: 'ui-unit-popper ui-unit-popper_k-arrangement-icon flex-grow-1', headerClassName: jimu_ui__WEBPACK_IMPORTED_MODULE_2__.FOCUSABLE_CONTAINER_CLASS, open: isOpen, onHeaderClose: togglePopper, toggle: togglePopper, headerTitle: popperTitle, minSize: minSize, defaultSize: defaultSize, dragBounds: 'body', version: popperVersion, reference: iconRef, placement: 'bottom-start', shiftOptions: shiftOptions, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              display: flex;
              flex-direction: column;
              height: 100%;
            `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                flex: 1;
                overflow: auto;
                padding-bottom: 1rem; /* Scoped padding to space content from footer */
              `, children: children }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                padding: 4px 12px;
                border-top: 1px solid var(--sys-color-divider-secondary);
                background-color: var(--sys-color-surface-paper);
                flex-shrink: 0;
                text-align: center;
              `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                  font-size: 0.75rem;
                  color: var(--sys-color-text-tertiary);
                  font-weight: 400;
                  letter-spacing: 0.025em;
                  display: inline-flex;
                  align-items: center;
                  gap: 4px;
                `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("svg", { width: "14", height: "14", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                      flex-shrink: 0;
                      opacity: 0.6;
                    `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("polyline", { points: "16 18 22 12 16 6" }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("polyline", { points: "8 6 2 12 8 18" })] }), "QuerySimple by MapSimple", (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                    margin-left: 6px;
                    opacity: 0.5;
                    font-size: 0.7rem;
                  `, children: ["v", _version__WEBPACK_IMPORTED_MODULE_3__.WIDGET_VERSION] })] }) })] }) })] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-list.tsx":
/*!******************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-list.tsx ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTaskList: () => (/* binding */ QueryTaskList)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _query_task__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./query-task */ "./your-extensions/widgets/query-simple/src/runtime/query-task.tsx");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");

/** @jsx jsx */





const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_5__.createQuerySimpleDebugLogger)();
// Helper function to sort queries by display order (lower numbers appear first)
// Queries without order maintain their original relative positions
function sortQueryItemsByOrder(queryItems) {
    // Handle null/undefined/empty cases
    if (!queryItems || queryItems.length === 0) {
        return queryItems || (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)([]);
    }
    // Safely convert to regular array for sorting
    // Handle both ImmutableArray (has toArray method) and regular arrays
    const itemsArray = (queryItems && typeof queryItems.toArray === 'function')
        ? queryItems.toArray()
        : (Array.isArray(queryItems) ? queryItems : []);
    const itemsWithIndex = itemsArray.map((item, index) => ({ item, originalIndex: index }));
    itemsWithIndex.sort((a, b) => {
        var _a, _b;
        const orderA = (_a = a.item.order) !== null && _a !== void 0 ? _a : Infinity;
        const orderB = (_b = b.item.order) !== null && _b !== void 0 ? _b : Infinity;
        if (orderA !== orderB) {
            return orderA - orderB;
        }
        // If order is equal (both Infinity or same number), maintain original index order
        return a.originalIndex - b.originalIndex;
    });
    return (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)(itemsWithIndex.map(({ item }) => item));
}
// Helper function to group queries by groupId
const groupQueries = (queryItems) => {
    const groups = {};
    const ungrouped = [];
    const groupOrder = [];
    const groupIndexMap = {};
    // First pass: collect items in regular arrays
    const groupItemsMap = {};
    queryItems.forEach((item, index) => {
        if (item.groupId) {
            if (!groupItemsMap[item.groupId]) {
                groupItemsMap[item.groupId] = [];
                groups[item.groupId] = {
                    items: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)([]),
                    displayName: item.groupDisplayName || item.name || `Group ${item.groupId}`,
                    icon: item.icon
                };
                groupIndexMap[item.groupId] = index;
                groupOrder.push(item.groupId);
            }
            groupItemsMap[item.groupId].push(item);
        }
        else {
            ungrouped.push({ item, index });
        }
    });
    // Second pass: convert regular arrays to ImmutableArrays
    Object.keys(groupItemsMap).forEach(groupId => {
        groups[groupId].items = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)(groupItemsMap[groupId]);
    });
    return { groups, ungrouped, groupOrder };
};
// Helper function to get display name for query in dropdown
// Uses: searchAlias || jimuFieldName || item.name || fallback
const getQueryDisplayName = (item) => {
    var _a, _b, _c;
    // First priority: searchAlias if set
    if (item.searchAlias) {
        return item.searchAlias;
    }
    // Second priority: field name from SQL expression
    const jimuFieldName = (_c = (_b = (_a = item.sqlExprObj) === null || _a === void 0 ? void 0 : _a.parts) === null || _b === void 0 ? void 0 : _b[0]) === null || _c === void 0 ? void 0 : _c.jimuFieldName;
    if (jimuFieldName) {
        return jimuFieldName;
    }
    // Third priority: item name
    if (item.name) {
        return item.name;
    }
    // Fallback
    return 'Query';
};
function QueryTaskList(props) {
    const { queryItems, widgetId, defaultPageSize, isInPopper = false, className = '', initialQueryValue, shouldUseInitialQueryValueForSelection = false, onHashParameterUsed, resultsMode, onResultsModeChange, accumulatedRecords, onAccumulatedRecordsChange, useGraphicsLayerForHighlight, graphicsLayer, mapView, onInitializeGraphicsLayer, onClearGraphicsLayer, activeTab, onTabChange, eventManager } = props;
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_4__["default"]);
    // Log when props are received
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        debugLogger.log('HASH-EXEC', {
            event: 'querytasklist-props-received',
            widgetId,
            props: {
                hasInitialQueryValue: !!initialQueryValue,
                initialQueryValueShortId: initialQueryValue === null || initialQueryValue === void 0 ? void 0 : initialQueryValue.shortId,
                initialQueryValueValue: initialQueryValue === null || initialQueryValue === void 0 ? void 0 : initialQueryValue.value,
                shouldUseInitialQueryValueForSelection
            },
            timestamp: Date.now()
        });
        debugLogger.log('GROUP', {
            event: 'query-task-list-props-received',
            widgetId,
            hasInitialQueryValue: !!initialQueryValue,
            initialQueryValueShortId: initialQueryValue === null || initialQueryValue === void 0 ? void 0 : initialQueryValue.shortId,
            initialQueryValueValue: initialQueryValue === null || initialQueryValue === void 0 ? void 0 : initialQueryValue.value,
            shouldUseInitialQueryValueForSelection,
            timestamp: Date.now()
        });
    }, [initialQueryValue, shouldUseInitialQueryValueForSelection, widgetId]);
    // Sort queries by display order before grouping
    // Handle case where queryItems might be undefined/null or not an ImmutableArray
    const sortedQueryItems = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        if (!queryItems) {
            return (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)([]);
        }
        return sortQueryItemsByOrder(queryItems);
    }, [queryItems]);
    const { groups, ungrouped, groupOrder } = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => groupQueries(sortedQueryItems), [sortedQueryItems]);
    // Only use the prop initialQueryValue when HelperSimple explicitly opens the widget
    // QuerySimple should not autonomously react to initialQueryValue prop changes
    // HelperSimple is the orchestrator and sets shouldUseInitialQueryValueForSelection flag
    const effectiveInitialQueryValue = shouldUseInitialQueryValueForSelection ? initialQueryValue : undefined;
    // Log when effectiveInitialQueryValue is calculated
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        debugLogger.log('HASH-EXEC', {
            event: 'querytasklist-effectiveinitialqueryvalue-calculated',
            widgetId,
            calculation: {
                shouldUseInitialQueryValueForSelection,
                hasInitialQueryValue: !!initialQueryValue,
                effectiveResult: effectiveInitialQueryValue ? 'USE_INITIAL_QUERY_VALUE' : 'UNDEFINED',
                effectiveShortId: effectiveInitialQueryValue === null || effectiveInitialQueryValue === void 0 ? void 0 : effectiveInitialQueryValue.shortId,
                effectiveValue: effectiveInitialQueryValue === null || effectiveInitialQueryValue === void 0 ? void 0 : effectiveInitialQueryValue.value
            },
            timestamp: Date.now()
        });
        debugLogger.log('GROUP', {
            event: 'effectiveInitialQueryValue-calculated',
            widgetId,
            shouldUseInitialQueryValueForSelection,
            hasInitialQueryValue: !!initialQueryValue,
            hasEffectiveInitialQueryValue: !!effectiveInitialQueryValue,
            effectiveShortId: effectiveInitialQueryValue === null || effectiveInitialQueryValue === void 0 ? void 0 : effectiveInitialQueryValue.shortId,
            effectiveValue: effectiveInitialQueryValue === null || effectiveInitialQueryValue === void 0 ? void 0 : effectiveInitialQueryValue.value,
            timestamp: Date.now()
        });
    }, [effectiveInitialQueryValue, shouldUseInitialQueryValueForSelection, initialQueryValue, widgetId]);
    // Find the query item matching the shortId from URL hash
    const matchingQueryIndex = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        const shortId = effectiveInitialQueryValue === null || effectiveInitialQueryValue === void 0 ? void 0 : effectiveInitialQueryValue.shortId;
        debugLogger.log('HASH-FIRST-LOAD', {
            event: 'matchingQueryIndex-calculation-start',
            widgetId,
            hasEffectiveInitialQueryValue: !!effectiveInitialQueryValue,
            shortIdToMatch: shortId,
            sortedQueryItemsCount: (sortedQueryItems === null || sortedQueryItems === void 0 ? void 0 : sortedQueryItems.length) || 0,
            sortedQueryItemsShortIds: sortedQueryItems ? [...sortedQueryItems.map(item => item.shortId)] : [],
            timestamp: Date.now()
        });
        if (!shortId) {
            debugLogger.log('HASH-FIRST-LOAD', {
                event: 'matchingQueryIndex-no-shortid',
                widgetId,
                result: -1,
                reason: 'No shortId in effectiveInitialQueryValue',
                timestamp: Date.now()
            });
            return -1;
        }
        const foundIndex = sortedQueryItems.findIndex(item => item.shortId === shortId);
        debugLogger.log('HASH-FIRST-LOAD', {
            event: 'matchingQueryIndex-calculation-complete',
            widgetId,
            shortIdToMatch: shortId,
            foundIndex,
            matchFound: foundIndex >= 0,
            matchedItem: foundIndex >= 0 ? {
                configId: sortedQueryItems[foundIndex].configId,
                shortId: sortedQueryItems[foundIndex].shortId,
                label: sortedQueryItems[foundIndex].label
            } : null,
            timestamp: Date.now()
        });
        return foundIndex;
    }, [sortedQueryItems, effectiveInitialQueryValue, widgetId]);
    // Determine which group/ungrouped index the matching query is at
    const getQuerySelection = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        var _a;
        debugLogger.log('HASH-FIRST-LOAD', {
            event: 'getQuerySelection-calculation-start',
            widgetId,
            matchingQueryIndex,
            hasMatch: matchingQueryIndex >= 0,
            timestamp: Date.now()
        });
        if (matchingQueryIndex < 0) {
            debugLogger.log('HASH-FIRST-LOAD', {
                event: 'getQuerySelection-no-match',
                widgetId,
                result: null,
                reason: 'matchingQueryIndex is negative',
                timestamp: Date.now()
            });
            return null;
        }
        const item = sortedQueryItems[matchingQueryIndex];
        debugLogger.log('HASH-FIRST-LOAD', {
            event: 'getQuerySelection-matched-item',
            widgetId,
            matchedItem: {
                configId: item.configId,
                shortId: item.shortId,
                label: item.label,
                groupId: item.groupId,
                hasGroup: !!item.groupId
            },
            timestamp: Date.now()
        });
        if (item.groupId) {
            const groupItems = ((_a = groups[item.groupId]) === null || _a === void 0 ? void 0 : _a.items) || (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)([]);
            const indexInGroup = groupItems.findIndex(q => q.configId === item.configId);
            const result = { type: 'group', groupId: item.groupId, index: indexInGroup >= 0 ? indexInGroup : 0 };
            debugLogger.log('GROUP', {
                event: 'hash-query-found-in-group',
                groupId: item.groupId,
                indexInGroup: indexInGroup >= 0 ? indexInGroup : 0,
                queryItemConfigId: item.configId,
                queryItemShortId: item.shortId
            });
            debugLogger.log('HASH-FIRST-LOAD', {
                event: 'getQuerySelection-returning-group',
                widgetId,
                result,
                timestamp: Date.now()
            });
            return result;
        }
        else {
            // Ungrouped query
            const indexInUngrouped = ungrouped.findIndex(({ item: q }) => q.configId === item.configId);
            const result = { type: 'ungrouped', index: indexInUngrouped >= 0 ? indexInUngrouped : 0 };
            debugLogger.log('GROUP', {
                event: 'hash-query-found-ungrouped',
                indexInUngrouped: indexInUngrouped >= 0 ? indexInUngrouped : 0,
                queryItemConfigId: item.configId,
                queryItemShortId: item.shortId
            });
            debugLogger.log('HASH-FIRST-LOAD', {
                event: 'getQuerySelection-returning-ungrouped',
                widgetId,
                result,
                timestamp: Date.now()
            });
            return result;
        }
    }, [matchingQueryIndex, sortedQueryItems, groups, ungrouped, widgetId]);
    // Helper to determine default selection based on display order
    const getDefaultSelection = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        var _a, _b, _c, _d;
        if (getQuerySelection) {
            return getQuerySelection;
        }
        // No hash parameter - determine default based on display order
        // Compare first ungrouped query vs first query in first group
        const firstUngroupedOrder = ungrouped.length > 0 ? ((_a = ungrouped[0].item.order) !== null && _a !== void 0 ? _a : Infinity) : Infinity;
        const firstGroupOrder = groupOrder.length > 0 && ((_c = (_b = groups[groupOrder[0]]) === null || _b === void 0 ? void 0 : _b.items) === null || _c === void 0 ? void 0 : _c.length) > 0
            ? ((_d = groups[groupOrder[0]].items[0].order) !== null && _d !== void 0 ? _d : Infinity)
            : Infinity;
        // Select whichever has lower order (or first if equal)
        if (firstUngroupedOrder < firstGroupOrder) {
            return { type: 'ungrouped', index: 0 };
        }
        else if (firstGroupOrder < Infinity || groupOrder.length > 0) {
            return { type: 'group', groupId: groupOrder[0], index: 0 };
        }
        else if (ungrouped.length > 0) {
            return { type: 'ungrouped', index: 0 };
        }
        return null;
    }, [getQuerySelection, ungrouped, groups, groupOrder]);
    // Track selected query - initialize with matching query if found from URL hash, or default based on display order
    const [selectedGroupId, setSelectedGroupId] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(() => {
        if ((getDefaultSelection === null || getDefaultSelection === void 0 ? void 0 : getDefaultSelection.type) === 'group') {
            debugLogger.log('GROUP', {
                event: 'initial-group-selection',
                groupId: getDefaultSelection.groupId,
                note: getQuerySelection ? 'Hash-matched' : 'Default based on display order'
            });
            return getDefaultSelection.groupId;
        }
        return null;
    });
    const [selectedGroupQueryIndex, setSelectedGroupQueryIndex] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(() => {
        if ((getDefaultSelection === null || getDefaultSelection === void 0 ? void 0 : getDefaultSelection.type) === 'group') {
            debugLogger.log('GROUP', {
                event: 'initial-group-query-index',
                index: getDefaultSelection.index,
                note: getQuerySelection ? 'Hash-matched' : 'Default based on display order'
            });
            return getDefaultSelection.index;
        }
        return 0;
    });
    const [selectedUngroupedIndex, setSelectedUngroupedIndex] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(() => {
        if ((getDefaultSelection === null || getDefaultSelection === void 0 ? void 0 : getDefaultSelection.type) === 'ungrouped') {
            debugLogger.log('GROUP', {
                event: 'initial-ungrouped-index',
                index: getDefaultSelection.index,
                note: getQuerySelection ? 'Hash-matched' : 'Default based on display order'
            });
            return getDefaultSelection.index;
        }
        return 0;
    });
    // Update selection when HelperSimple explicitly opens widget with hash parameter
    // Only react when shouldUseInitialQueryValueForSelection is true (set by HelperSimple)
    // This prevents autonomous query selection when switching queries
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        debugLogger.log('HASH-FIRST-LOAD', {
            event: 'EXECUTION-USEEFFECT-TRIGGERED',
            widgetId,
            criticalConditions: {
                shouldUseInitialQueryValueForSelection,
                hasGetQuerySelection: !!getQuerySelection,
                getQuerySelectionValue: getQuerySelection,
                hasEffectiveInitialQueryValue: !!effectiveInitialQueryValue,
                effectiveInitialQueryValue,
                matchingQueryIndex,
                conditionsMet: shouldUseInitialQueryValueForSelection && !!getQuerySelection,
                WILL_EXECUTE_QUERY: shouldUseInitialQueryValueForSelection && !!getQuerySelection
            },
            timestamp: Date.now()
        });
        debugLogger.log('HASH-EXEC', {
            event: 'querytasklist-selection-useeffect-check',
            widgetId,
            check: {
                shouldUseInitialQueryValueForSelection,
                hasGetQuerySelection: !!getQuerySelection,
                getQuerySelectionType: getQuerySelection === null || getQuerySelection === void 0 ? void 0 : getQuerySelection.type,
                willUpdateSelection: shouldUseInitialQueryValueForSelection && !!getQuerySelection
            },
            timestamp: Date.now()
        });
        debugLogger.log('GROUP', {
            event: 'query-selection-useeffect-check',
            widgetId,
            shouldUseInitialQueryValueForSelection,
            hasGetQuerySelection: !!getQuerySelection,
            getQuerySelectionType: getQuerySelection === null || getQuerySelection === void 0 ? void 0 : getQuerySelection.type,
            willUpdateSelection: shouldUseInitialQueryValueForSelection && !!getQuerySelection,
            timestamp: Date.now()
        });
        if (shouldUseInitialQueryValueForSelection && getQuerySelection) {
            // Hash parameter matched - HelperSimple explicitly opened us with this hash
            debugLogger.log('HASH-EXEC', {
                event: 'querytasklist-selection-useeffect-updating',
                widgetId,
                selectionType: getQuerySelection.type,
                selectionDetails: getQuerySelection.type === 'group'
                    ? { groupId: getQuerySelection.groupId, index: getQuerySelection.index }
                    : { index: getQuerySelection.index },
                timestamp: Date.now()
            });
            if (getQuerySelection.type === 'group') {
                debugLogger.log('GROUP', {
                    event: 'selection-changed-to-group-from-hash',
                    groupId: getQuerySelection.groupId,
                    index: getQuerySelection.index,
                    note: 'HelperSimple explicitly opened widget with hash parameter'
                });
                setSelectedGroupId(getQuerySelection.groupId);
                setSelectedGroupQueryIndex(getQuerySelection.index);
            }
            else {
                debugLogger.log('GROUP', {
                    event: 'selection-changed-to-ungrouped-from-hash',
                    index: getQuerySelection.index,
                    note: 'HelperSimple explicitly opened widget with hash parameter'
                });
                setSelectedGroupId(null);
                setSelectedUngroupedIndex(getQuerySelection.index);
            }
        }
        else {
            debugLogger.log('HASH-FIRST-LOAD', {
                event: 'EXECUTION-SKIPPED',
                widgetId,
                reason: !shouldUseInitialQueryValueForSelection ? 'FLAG_IS_FALSE' : 'NO_QUERY_SELECTION',
                detailedDiagnostic: {
                    shouldUseInitialQueryValueForSelection,
                    hasGetQuerySelection: !!getQuerySelection,
                    getQuerySelectionValue: getQuerySelection,
                    hasEffectiveInitialQueryValue: !!effectiveInitialQueryValue,
                    effectiveInitialQueryValue,
                    matchingQueryIndex,
                    sortedQueryItemsCount: (sortedQueryItems === null || sortedQueryItems === void 0 ? void 0 : sortedQueryItems.length) || 0,
                    possibleCauses: !shouldUseInitialQueryValueForSelection
                        ? ['HelperSimple did not set the flag', 'Widget opened without hash parameter']
                        : ['matchingQueryIndex returned -1', 'shortId did not match any query', 'queryItems not loaded yet']
                },
                timestamp: Date.now()
            });
            debugLogger.log('HASH-EXEC', {
                event: 'querytasklist-selection-useeffect-skipped',
                widgetId,
                reason: !shouldUseInitialQueryValueForSelection ? 'flag-is-false' : 'no-query-selection',
                check: {
                    shouldUseInitialQueryValueForSelection,
                    hasGetQuerySelection: !!getQuerySelection
                },
                timestamp: Date.now()
            });
            debugLogger.log('GROUP', {
                event: 'query-selection-useeffect-skipped',
                widgetId,
                reason: !shouldUseInitialQueryValueForSelection ? 'flag-is-false' : 'no-query-selection',
                shouldUseInitialQueryValueForSelection,
                hasGetQuerySelection: !!getQuerySelection,
                timestamp: Date.now()
            });
        }
    }, [shouldUseInitialQueryValueForSelection, getQuerySelection, widgetId, effectiveInitialQueryValue, matchingQueryIndex, sortedQueryItems]);
    // Get the currently selected query item
    const getSelectedQueryItem = () => {
        // PRIORITY 1: Use current state selection
        // The state is initialized with the hash match (if present) or default order,
        // and updated via useEffect if the hash changes later.
        debugLogger.log('GROUP', {
            event: 'getSelectedQueryItem-state-selection',
            selectedGroupId,
            hasSelectedGroup: selectedGroupId && groups[selectedGroupId],
            selectedGroupQueryIndex,
            selectedUngroupedIndex,
            ungroupedLength: ungrouped.length,
            groupOrderLength: groupOrder.length,
            note: 'Using state selection (hash-aware)'
        });
        // If a group is selected, get query from that group
        if (selectedGroupId && groups[selectedGroupId]) {
            const groupItems = groups[selectedGroupId].items;
            if (groupItems.length > 0) {
                const idx = selectedGroupQueryIndex < groupItems.length ? selectedGroupQueryIndex : 0;
                const selectedItem = groupItems[idx];
                debugLogger.log('GROUP', {
                    event: 'selected-query-from-group',
                    groupId: selectedGroupId,
                    groupQueryIndex: idx,
                    queryItemConfigId: selectedItem.configId,
                    queryDisplayName: getQueryDisplayName(selectedItem)
                });
                return selectedItem;
            }
        }
        // Otherwise, get from ungrouped queries
        if (ungrouped.length > 0) {
            const idx = selectedUngroupedIndex < ungrouped.length ? selectedUngroupedIndex : 0;
            const selectedItem = ungrouped[idx].item;
            debugLogger.log('GROUP', {
                event: 'selected-query-from-ungrouped',
                ungroupedIndex: idx,
                queryItemConfigId: selectedItem.configId,
                queryDisplayName: getQueryDisplayName(selectedItem)
            });
            return selectedItem;
        }
        // Fallback to first query item
        debugLogger.log('GROUP', {
            event: 'selected-query-fallback',
            note: 'No groups or ungrouped queries, using first item'
        });
        return sortedQueryItems[0];
    };
    const selectedQueryItem = getSelectedQueryItem();
    const selectedQueryRealIndex = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return sortedQueryItems.findIndex(q => q.configId === selectedQueryItem.configId);
    }, [sortedQueryItems, selectedQueryItem]);
    // If only one query total, don't show dropdown
    const showDropdown = sortedQueryItems.length > 1 || groupOrder.length > 0;
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: `runtime-query__query-list h-100 ${className}`, css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
      display: flex;
      flex-direction: column;
      .query-selector {
        padding: 16px;
        border-bottom: 1px solid var(--sys-color-divider-secondary);
        display: flex;
        flex-direction: column;
        gap: 8px;
      }
      .query-selector-label {
        font-size: 0.875rem;
        font-weight: 500;
        color: var(--sys-color-text-primary);
        margin-bottom: 4px;
      }
      .query-selector select {
        width: 100%;
      }
      .query-task-container {
        flex: 1;
        overflow: auto;
      }
    `, children: selectedQueryItem && (() => {
            const willPassInitialInputValue = selectedQueryItem.shortId === (effectiveInitialQueryValue === null || effectiveInitialQueryValue === void 0 ? void 0 : effectiveInitialQueryValue.shortId);
            const initialInputValueToPass = willPassInitialInputValue ? effectiveInitialQueryValue === null || effectiveInitialQueryValue === void 0 ? void 0 : effectiveInitialQueryValue.value : undefined;
            debugLogger.log('GROUP', {
                event: 'initialInputValue-being-passed-to-querytask',
                widgetId,
                selectedQueryItemShortId: selectedQueryItem.shortId,
                selectedQueryItemConfigId: selectedQueryItem.configId,
                effectiveInitialQueryValueShortId: effectiveInitialQueryValue === null || effectiveInitialQueryValue === void 0 ? void 0 : effectiveInitialQueryValue.shortId,
                willPassInitialInputValue,
                initialInputValue: initialInputValueToPass,
                timestamp: Date.now()
            });
            return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: `query-task-container ${isInPopper ? jimu_ui__WEBPACK_IMPORTED_MODULE_3__.FOCUSABLE_CONTAINER_CLASS : ''}`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task__WEBPACK_IMPORTED_MODULE_2__.QueryTask, { widgetId: widgetId, index: selectedQueryRealIndex >= 0 ? selectedQueryRealIndex : 0, total: sortedQueryItems.length, queryItem: selectedQueryItem, isInPopper: isInPopper, initialInputValue: initialInputValueToPass, onHashParameterUsed: onHashParameterUsed, queryItems: sortedQueryItems, selectedQueryIndex: selectedUngroupedIndex, onQueryChange: (index) => setSelectedUngroupedIndex(index), 
                    // Grouping props
                    groups: groups, ungrouped: ungrouped, 
                    // Graphics layer props
                    useGraphicsLayerForHighlight: useGraphicsLayerForHighlight, graphicsLayer: graphicsLayer, mapView: mapView, onInitializeGraphicsLayer: onInitializeGraphicsLayer, onClearGraphicsLayer: onClearGraphicsLayer, groupOrder: groupOrder, selectedGroupId: selectedGroupId, selectedGroupQueryIndex: selectedGroupQueryIndex, onGroupChange: (groupId) => setSelectedGroupId(groupId), onGroupQueryChange: (index) => setSelectedGroupQueryIndex(index), onUngroupedChange: (index) => setSelectedUngroupedIndex(index), resultsMode: resultsMode, onResultsModeChange: onResultsModeChange, accumulatedRecords: accumulatedRecords, onAccumulatedRecordsChange: onAccumulatedRecordsChange, activeTab: activeTab, onTabChange: onTabChange, eventManager: eventManager }) }));
        })() }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-spatial-form.tsx":
/*!**************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-spatial-form.tsx ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTaskSpatialForm: () => (/* binding */ QueryTaskSpatialForm)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _geometry_from_ds__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./geometry-from-ds */ "./your-extensions/widgets/query-simple/src/runtime/geometry-from-ds.tsx");
/* harmony import */ var _geometry_from_map__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./geometry-from-map */ "./your-extensions/widgets/query-simple/src/runtime/geometry-from-map.tsx");
/* harmony import */ var _geometry_from_draw__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./geometry-from-draw */ "./your-extensions/widgets/query-simple/src/runtime/geometry-from-draw.tsx");
/* harmony import */ var jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! jimu-icons/outlined/suggested/info */ "./jimu-icons/outlined/suggested/info.tsx");

/** @jsx jsx */








function QueryTaskSpatialForm(props) {
    var _a;
    const { label, desc, filterTypes, mapWidgetIds, onFilterChange, onRelationChange, onBufferChange, useDataSources, spatialRelations, useRuntimeData, dsEnableBuffer, dsBufferDistance, dsBufferUnit, drawEnableBuffer, drawBufferDistance, drawBufferUnit, createToolTypes, widgetId } = props;
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_4__["default"]);
    // used to store the selection of the data source in order to update the filter when option changes
    const selectedGeometriesRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const mapExists = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        if ((mapWidgetIds === null || mapWidgetIds === void 0 ? void 0 : mapWidgetIds.length) > 0) {
            const mapWidgetId = mapWidgetIds[0];
            return state.appConfig.widgets[mapWidgetId] != null;
        }
        return false;
    });
    const canUseMapFilter = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return mapExists && ((filterTypes === null || filterTypes === void 0 ? void 0 : filterTypes.includes(_config__WEBPACK_IMPORTED_MODULE_3__.SpatialFilterType.CurrentMapExtent)) || (filterTypes === null || filterTypes === void 0 ? void 0 : filterTypes.includes(_config__WEBPACK_IMPORTED_MODULE_3__.SpatialFilterType.InteractiveDrawMode)));
    }, [filterTypes, mapExists]);
    const supportedFilterTypes = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        const result = [];
        if ((useDataSources === null || useDataSources === void 0 ? void 0 : useDataSources.length) > 0 || useRuntimeData) {
            result.push({ value: 'data', label: getI18nMessage('featureFromDs') });
        }
        if (canUseMapFilter && (filterTypes === null || filterTypes === void 0 ? void 0 : filterTypes.includes(_config__WEBPACK_IMPORTED_MODULE_3__.SpatialFilterType.CurrentMapExtent))) {
            result.push({ value: 'map', label: getI18nMessage(`spatialFilterType_${_config__WEBPACK_IMPORTED_MODULE_3__.SpatialFilterType.CurrentMapExtent}`) });
        }
        if (canUseMapFilter && (filterTypes === null || filterTypes === void 0 ? void 0 : filterTypes.includes(_config__WEBPACK_IMPORTED_MODULE_3__.SpatialFilterType.InteractiveDrawMode))) {
            result.push({ value: 'draw', label: getI18nMessage(`spatialFilterType_${_config__WEBPACK_IMPORTED_MODULE_3__.SpatialFilterType.InteractiveDrawMode}`) });
        }
        return result;
    }, [canUseMapFilter, useDataSources, useRuntimeData, getI18nMessage, filterTypes]);
    const [currentFilterType, setCurrentFilterType] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState((_a = supportedFilterTypes === null || supportedFilterTypes === void 0 ? void 0 : supportedFilterTypes[0]) === null || _a === void 0 ? void 0 : _a.value);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        // in order to avoid invalid option being selected
        if (currentFilterType !== 'none' && !supportedFilterTypes.find((item) => item.value === currentFilterType)) {
            setCurrentFilterType((_a = supportedFilterTypes === null || supportedFilterTypes === void 0 ? void 0 : supportedFilterTypes[0]) === null || _a === void 0 ? void 0 : _a.value);
        }
    }, [currentFilterType, supportedFilterTypes]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        // clear the relationship and buffer if filter type is not 'data'
        if (currentFilterType === 'map' || currentFilterType === 'draw' || currentFilterType === 'none') {
            onRelationChange(null);
            onBufferChange(0, _config__WEBPACK_IMPORTED_MODULE_3__.UnitType.Meters);
            onFilterChange({ geometry: null });
        }
        // no need to update the filter if the data source has selection since it will be updated in the handleSelectionChange method
        if (currentFilterType === 'data' && selectedGeometriesRef.current == null) {
            onFilterChange({ geometry: null });
        }
    }, [currentFilterType, onRelationChange, onBufferChange, onFilterChange]);
    const handleFilterTypeChanged = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((evt) => { setCurrentFilterType(evt.target.value); }, []);
    const handleGeometryChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((geometry, layer, graphic, clearAfterApply) => {
        onFilterChange({ geometry, graphic, layer, clearAfterApply });
    }, [onFilterChange]);
    const handleSelectionChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((geometries) => {
        selectedGeometriesRef.current = geometries;
        onFilterChange({ geometry: geometries });
    }, [onFilterChange]);
    if (!((useDataSources === null || useDataSources === void 0 ? void 0 : useDataSources.length) > 0 || useRuntimeData || canUseMapFilter)) {
        return null;
    }
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { role: 'group', className: 'px-4 pb-4', "aria-label": label, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('form-title my-2 d-flex align-items-center', { 'd-none': !label && !desc }), children: [label && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'mr-2 title2', children: label }), desc && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { placement: 'bottom', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `white-space: pre-line;`, title: desc, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: 'sm', icon: true, type: 'tertiary', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_8__.InfoOutlined, { color: 'var(--sys-color-primary-main)', size: 's' }) }) }))] }), supportedFilterTypes.length > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'title3', children: getI18nMessage('chooseFilterType') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Select, { "aria-label": getI18nMessage('chooseFilterType'), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `height: 32px;`, value: currentFilterType, onChange: handleFilterTypeChanged, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: 'none', children: "-" }, '-'), supportedFilterTypes.map(item => (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: item.value, children: item.label }, item.value))] })] })), currentFilterType === 'data' && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_geometry_from_ds__WEBPACK_IMPORTED_MODULE_5__.GeometryFromDataSource, { enableBuffer: dsEnableBuffer, bufferDistance: dsBufferDistance, bufferUnit: dsBufferUnit, spatialRelations: spatialRelations, useDataSources: useDataSources, useRuntimeData: useRuntimeData, onSelectionChange: handleSelectionChange, onRelationChange: onRelationChange, onBufferChange: onBufferChange })), currentFilterType === 'map' && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_geometry_from_map__WEBPACK_IMPORTED_MODULE_6__.GeometryFromMap, { mapWidgetIds: mapWidgetIds, createToolTypes: createToolTypes, onGeometryChange: handleGeometryChange })), currentFilterType === 'draw' && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_geometry_from_draw__WEBPACK_IMPORTED_MODULE_7__.GeometryFromDraw, { enableBuffer: drawEnableBuffer, bufferDistance: drawBufferDistance, bufferUnit: drawBufferUnit, mapWidgetIds: mapWidgetIds, widgetId: widgetId, createToolTypes: createToolTypes, onGeometryChange: handleGeometryChange, onBufferChange: onBufferChange }))] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task.tsx":
/*!*************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task.tsx ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTask: () => (/* binding */ QueryTask)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-icons/outlined/suggested/info */ "./jimu-icons/outlined/suggested/info.tsx");
/* harmony import */ var jimu_icons_outlined_editor_trash__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-icons/outlined/editor/trash */ "./jimu-icons/outlined/editor/trash.tsx");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _query_task_form__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./query-task-form */ "./your-extensions/widgets/query-simple/src/runtime/query-task-form.tsx");
/* harmony import */ var _query_result__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./query-result */ "./your-extensions/widgets/query-simple/src/runtime/query-result.tsx");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/* harmony import */ var _query_task_label__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./query-task-label */ "./your-extensions/widgets/query-simple/src/runtime/query-task-label.tsx");
/* harmony import */ var _hooks_use_zoom_to_records__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./hooks/use-zoom-to-records */ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-zoom-to-records.ts");
/* harmony import */ var _default_query_item__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../default-query-item */ "./your-extensions/widgets/query-simple/src/default-query-item.ts");
/* harmony import */ var _query_utils__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./query-utils */ "./your-extensions/widgets/query-simple/src/runtime/query-utils.ts");
/* harmony import */ var _results_management_utils__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./results-management-utils */ "./your-extensions/widgets/query-simple/src/runtime/results-management-utils.ts");
/* harmony import */ var _graphics_layer_utils__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./graphics-layer-utils */ "./your-extensions/widgets/query-simple/src/runtime/graphics-layer-utils.ts");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var jimu_icons_outlined_directional_arrow_left__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! jimu-icons/outlined/directional/arrow-left */ "./jimu-icons/outlined/directional/arrow-left.tsx");
/* harmony import */ var _loading_result__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./loading-result */ "./your-extensions/widgets/query-simple/src/runtime/loading-result.tsx");
/* harmony import */ var _selection_utils__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};

/** @jsx jsx */



















const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_8__.createQuerySimpleDebugLogger)();
// Event fired when SqlExpressionRuntime converts hash value from string to array format
const QUERYSIMPLE_HASH_VALUE_CONVERTED_EVENT = 'querysimple-hash-value-converted';
// Event fired when a hash-triggered query execution completes successfully
// This allows HelperSimple to track which hash parameters have been executed
const QUERYSIMPLE_HASH_QUERY_EXECUTED_EVENT = 'querysimple-hash-query-executed';
// Helper function to get display name for query in dropdown
// Uses: searchAlias || jimuFieldName || item.name || fallback
const getQueryDisplayName = (item) => {
    var _a, _b, _c;
    // First priority: searchAlias if set
    if (item.searchAlias) {
        return item.searchAlias;
    }
    // Second priority: field name from SQL expression
    const jimuFieldName = (_c = (_b = (_a = item.sqlExprObj) === null || _a === void 0 ? void 0 : _a.parts) === null || _b === void 0 ? void 0 : _b[0]) === null || _c === void 0 ? void 0 : _c.jimuFieldName;
    if (jimuFieldName) {
        return jimuFieldName;
    }
    // Third priority: item name
    if (item.name) {
        return item.name;
    }
    // Fallback
    return 'Query';
};
const style = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
  &.wrapped .query-form {
    height: 100%;
  }
  .query-task__content {
    display: flex;
    flex-direction: column;
    width: 100%;
    padding-top: 8px;
    &:has(> .query-form__header > div:not(.d-none)), &:has(> .query-result) {
      padding-top: 16px;
    }
  }
  .query-form__header {
    display: flex;
    &.has-content {
      border-bottom: 1px solid var(--sys-color-divider-secondary);
      margin-bottom: 6px;
      padding-bottom: 8px;
    }
    .nav-action {
      flex: 1 1 0;
      overflow: hidden;
      display: flex;
      .jimu-btn {
        min-width: 26px;
      }
    }
    .result-menu {
      display: flex;
    }
  }
`;
function QueryTask(props) {
    var _a, _b, _c, _d, _e;
    const { queryItem, onNavBack, total, isInPopper = false, wrappedInPopper = false, className = '', index, initialInputValue, onHashParameterUsed, queryItems, selectedQueryIndex, onQueryChange, groups, ungrouped, groupOrder, selectedGroupId, selectedGroupQueryIndex, onGroupChange, onGroupQueryChange, onUngroupedChange, resultsMode, onResultsModeChange, accumulatedRecords, onAccumulatedRecordsChange, useGraphicsLayerForHighlight, graphicsLayer, mapView, onInitializeGraphicsLayer, onClearGraphicsLayer, activeTab: propActiveTab, onTabChange: propOnTabChange, eventManager } = props, otherProps = __rest(props, ["queryItem", "onNavBack", "total", "isInPopper", "wrappedInPopper", "className", "index", "initialInputValue", "onHashParameterUsed", "queryItems", "selectedQueryIndex", "onQueryChange", "groups", "ungrouped", "groupOrder", "selectedGroupId", "selectedGroupQueryIndex", "onGroupChange", "onGroupQueryChange", "onUngroupedChange", "resultsMode", "onResultsModeChange", "accumulatedRecords", "onAccumulatedRecordsChange", "useGraphicsLayerForHighlight", "graphicsLayer", "mapView", "onInitializeGraphicsLayer", "onClearGraphicsLayer", "activeTab", "onTabChange", "eventManager"]);
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_15__["default"]);
    const zoomToRecords = (0,_hooks_use_zoom_to_records__WEBPACK_IMPORTED_MODULE_10__.useZoomToRecords)(mapView);
    const [stage, setStage] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(0); // 0 = form, 1 = results, 2 = loading
    const [internalActiveTab, setInternalActiveTab] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState('query');
    // Log when initialInputValue prop is received
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        debugLogger.log('HASH-EXEC', {
            event: 'querytask-initialinputvalue-prop-received',
            widgetId: props.widgetId,
            queryItemConfigId: props.queryItem.configId,
            queryItemShortId: props.queryItemShortId,
            hasInitialInputValue: !!props.initialInputValue,
            initialInputValue: props.initialInputValue,
            lastTabSwitchHash: lastTabSwitchHashRef.current,
            timestamp: Date.now()
        });
        // FIX (r018.128): Only switch tab ONCE per unique hash value
        // This prevents continuous re-switching that blocks auto-switch to Results tab
        if (props.initialInputValue && lastTabSwitchHashRef.current !== props.initialInputValue) {
            lastTabSwitchHashRef.current = props.initialInputValue;
            debugLogger.log('HASH-EXEC', {
                event: 'querytask-switching-to-query-tab-for-hash',
                widgetId: props.widgetId,
                initialInputValue: props.initialInputValue,
                currentActiveTab: propActiveTab || internalActiveTab,
                note: 'First time seeing this hash value - switching to Query tab',
                timestamp: Date.now()
            });
            if (propOnTabChange) {
                propOnTabChange('query');
            }
            else {
                setInternalActiveTab('query');
            }
        }
        else if (!props.initialInputValue && lastTabSwitchHashRef.current !== null) {
            // Reset ref when hash is cleared (allows same hash to trigger again later)
            debugLogger.log('HASH-EXEC', {
                event: 'querytask-resetting-tab-switch-tracking',
                widgetId: props.widgetId,
                previousHash: lastTabSwitchHashRef.current,
                note: 'Hash cleared - resetting tracking so same hash can trigger again',
                timestamp: Date.now()
            });
            lastTabSwitchHashRef.current = null;
        }
    }, [props.initialInputValue, props.widgetId, props.queryItem.configId, props.queryItemShortId, propOnTabChange, propActiveTab, internalActiveTab]);
    // Controlled tab state: use prop if provided, otherwise internal state
    const activeTab = propActiveTab || internalActiveTab;
    const setActiveTab = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((tab) => {
        if (propOnTabChange) {
            propOnTabChange(tab);
        }
        else {
            setInternalActiveTab(tab);
        }
    }, [propOnTabChange]);
    const [enabled, setEnabled] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(true);
    const [resultCount, setResultCount] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(0);
    // FIX (r018.92): Track when a query switch is in progress to prevent handleRenderDone interference
    const isQuerySwitchInProgressRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(false);
    // Track if we've already selected records for the current query results
    const hasSelectedRecordsRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(false);
    // FIX (r018.128): Track which hash value we last switched tabs for to prevent continuous re-switching
    const lastTabSwitchHashRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    // Track query execution count to force QueryTaskResult remount on new queries
    const queryExecutionKeyRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(0);
    const queryParamRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const recordsRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const [outputDS, setOutputDS] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const [dataSource, setDataSource] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const [spatialFilterEnabled, setSpatialFilterEnabled] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(true);
    const attributeFilterSqlExprObj = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(queryItem.sqlExprObj);
    const spatialFilterObj = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const backBtnRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(undefined);
    const clearResultBtnRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(undefined);
    const [dataActionFilter, setDataActionFilter] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const previousConfigIdRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(queryItem.configId);
    // Track manual tab switches to prevent auto-switch useEffect from interfering
    const manualTabSwitchRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(false);
    // Track when a query was just executed - only auto-switch after query execution completes
    const queryJustExecutedRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(false);
    // Store the last runtime zoom override value from the form for use by Add to Map action
    const lastRuntimeZoomToSelectedRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(undefined);
    // Error states for user-facing errors
    const [selectionError, setSelectionError] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const [zoomError, setZoomError] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    // Store pending query when waiting for hash value conversion
    const pendingHashQueryRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const currentItem = Object.assign({}, _default_query_item__WEBPACK_IMPORTED_MODULE_11__.DEFAULT_QUERY_ITEM, queryItem);
    const { icon, name, displayLabel } = currentItem;
    const dsExists = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_8__.useDataSourceExists)({ widgetId: props.widgetId, useDataSourceId: (_a = currentItem.useDataSource) === null || _a === void 0 ? void 0 : _a.dataSourceId });
    // Debug logging for tab content rendering
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        debugLogger.log('TASK', {
            event: 'query-tab-content-render',
            activeTab,
            enabled,
            dsExists,
            dataSource: dataSource ? 'exists' : 'null',
            queryItemConfigId: queryItem.configId,
            note: 'Query tab content state check'
        });
    }, [activeTab, enabled, dsExists, dataSource, queryItem.configId]);
    // Debug logging for Tab children rendering
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (activeTab === 'query') {
            debugLogger.log('TASK', {
                event: 'query-tab-children-render',
                activeTab,
                queryItemConfigId: queryItem.configId,
                note: 'Query Tab children should be rendering'
            });
        }
    }, [activeTab, queryItem.configId]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        // focus the back button when it is rendered
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.focusElementInKeyboardMode)(backBtnRef.current);
    });
    // Get the pagination style from widget config (MultiPage or LazyLoad/Single-page)
    const pagingTypeInConfig = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const widgetJson = state.appConfig.widgets[props.widgetId];
        return widgetJson.config.resultPagingStyle;
    });
    // Get the initial page size for single-page (LazyLoad) results
    // This allows users to configure how many records are loaded initially when using single-page mode
    // Defaults to 100 if not configured
    const lazyLoadInitialPageSize = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const widgetJson = state.appConfig.widgets[props.widgetId];
        return widgetJson.config.lazyLoadInitialPageSize;
    });
    // Watch for when results are ready and switch to Results tab
    // ONLY auto-switch when a query was just executed and results are loaded
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        // Don't auto-switch if user manually switched tabs
        if (manualTabSwitchRef.current) {
            debugLogger.log('TASK', {
                event: 'auto-switch-skipped',
                reason: 'manual-tab-switch-flag-set',
                widgetId: props.widgetId,
                queryItemConfigId: queryItem.configId,
                activeTab,
                resultCount,
                queryJustExecutedRef: queryJustExecutedRef.current,
                timestamp: Date.now()
            });
            return;
        }
        // FORCED: Always use SimpleList - we're done with lazy loading issues
        // Records are available immediately, so we can switch as soon as resultCount > 0
        const isSimpleList = true;
        // ONLY auto-switch when:
        // 1. A query was just executed (queryJustExecutedRef.current === true)
        // 2. We have results (resultCount > 0)
        // 3. Records are actually loaded:
        //    - For SimpleList: resultCount > 0 is sufficient (records available immediately)
        //    - For LazyLoad: recordsRef.current must have data (wait for lazy loading)
        // 4. We're currently on the query tab (don't switch if already on results)
        const hasRecords = isSimpleList
            ? resultCount > 0
            : (recordsRef.current && recordsRef.current.length > 0);
        debugLogger.log('TASK', {
            event: 'auto-switch-check',
            widgetId: props.widgetId,
            queryItemConfigId: queryItem.configId,
            activeTab,
            resultCount,
            queryJustExecutedRef: queryJustExecutedRef.current,
            isSimpleList,
            pagingTypeInConfig,
            hasRecords,
            recordsRefLength: ((_a = recordsRef.current) === null || _a === void 0 ? void 0 : _a.length) || 0,
            manualTabSwitchRef: manualTabSwitchRef.current,
            willAutoSwitch: queryJustExecutedRef.current && resultCount > 0 && hasRecords && activeTab === 'query',
            timestamp: Date.now()
        });
        if (queryJustExecutedRef.current &&
            resultCount > 0 &&
            hasRecords &&
            activeTab === 'query') {
            debugLogger.log('TASK', {
                event: 'auto-switch-triggered',
                widgetId: props.widgetId,
                queryItemConfigId: queryItem.configId,
                fromTab: activeTab,
                toTab: 'results',
                resultCount,
                timestamp: Date.now()
            });
            setActiveTab('results');
            queryJustExecutedRef.current = false; // Reset after switching
            debugLogger.log('TASK', {
                event: 'auto-switch-completed',
                widgetId: props.widgetId,
                queryItemConfigId: queryItem.configId,
                queryJustExecutedRefReset: queryJustExecutedRef.current,
                timestamp: Date.now()
            });
        }
    }, [resultCount, activeTab, pagingTypeInConfig]);
    // Verify dropdowns are synchronized with hash parameter when present
    // This is especially important for grouped queries where dropdowns need to be synchronized
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a, _b;
        // Only verify if we have a hash parameter
        if (!initialInputValue || !queryItem.shortId) {
            return;
        }
        // Verify the current queryItem matches what we expect from hash parameter
        const expectedShortId = queryItem.shortId;
        const isGroupedQuery = queryItem.groupId !== null && queryItem.groupId !== undefined;
        // Check if dropdowns are correctly set for grouped queries
        if (isGroupedQuery) {
            const expectedGroupId = queryItem.groupId;
            const actualGroupId = selectedGroupId;
            const expectedQueryIndex = selectedGroupQueryIndex;
            if (expectedGroupId !== actualGroupId) {
                debugLogger.log('GROUP', {
                    event: 'dropdown-group-mismatch',
                    expectedGroupId,
                    actualGroupId,
                    queryItemShortId: expectedShortId,
                    warning: 'First dropdown may not be synchronized with hash parameter'
                });
            }
            else if (expectedQueryIndex !== undefined) {
                // Verify the query index within the group matches
                const groupItems = (_a = groups === null || groups === void 0 ? void 0 : groups[expectedGroupId]) === null || _a === void 0 ? void 0 : _a.items;
                if (groupItems && groupItems.length > expectedQueryIndex) {
                    const expectedQueryConfigId = (_b = groupItems[expectedQueryIndex]) === null || _b === void 0 ? void 0 : _b.configId;
                    const actualQueryConfigId = queryItem.configId;
                    if (expectedQueryConfigId !== actualQueryConfigId) {
                        debugLogger.log('GROUP', {
                            event: 'dropdown-query-index-mismatch',
                            expectedQueryConfigId,
                            actualQueryConfigId,
                            expectedQueryIndex,
                            queryItemShortId: expectedShortId,
                            warning: 'Second dropdown may not be synchronized with hash parameter'
                        });
                    }
                    else {
                        debugLogger.log('GROUP', {
                            event: 'dropdowns-synchronized',
                            queryItemShortId: expectedShortId,
                            groupId: expectedGroupId,
                            selectedGroupQueryIndex: expectedQueryIndex,
                            note: 'Dropdowns synchronized with hash parameter'
                        });
                    }
                }
            }
        }
        else {
            // Ungrouped query - verify it's selected
            debugLogger.log('GROUP', {
                event: 'dropdowns-synchronized-ungrouped',
                queryItemShortId: expectedShortId,
                note: 'Ungrouped query dropdown synchronized with hash parameter'
            });
        }
    }, [initialInputValue, queryItem.shortId, queryItem.groupId, queryItem.configId, selectedGroupId, selectedGroupQueryIndex, groups]);
    const useOutputDs = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)({
        dataSourceId: queryItem.outputDataSourceId,
        mainDataSourceId: queryItem.outputDataSourceId
    }), [queryItem.outputDataSourceId]);
    const updateDataSource = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((ds) => {
        var _a, _b;
        const currentDs = ds !== null && ds !== void 0 ? ds : dataSource;
        // should disable spatial filter if the dataSource is an output ds and it already has spatial filter
        if ((_a = currentDs === null || currentDs === void 0 ? void 0 : currentDs.getDataSourceJson()) === null || _a === void 0 ? void 0 : _a.isOutputFromWidget) {
            const qDs = currentDs;
            const qParams = (_b = qDs.getCurrentQueryParams) === null || _b === void 0 ? void 0 : _b.call(qDs);
            if (qParams.geometry != null) {
                setSpatialFilterEnabled(false);
            }
            else {
                setSpatialFilterEnabled(true);
            }
        }
    }, [dataSource]);
    const handleStatusChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((enabled) => {
        setEnabled(enabled);
        updateDataSource();
    }, [updateDataSource]);
    const handleOutputDataSourceInfoChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((info, preInfo) => {
        const outputId = queryItem.outputDataSourceId;
        const filter = (info === null || info === void 0 ? void 0 : info.widgetQueries) ? info.widgetQueries[`setFilter-${outputId}`] : null;
        if (filter == null) { // filter is null means there are incomplete queries, ignore this change
            return;
        }
        const preFilter = (preInfo === null || preInfo === void 0 ? void 0 : preInfo.widgetQueries) ? preInfo.widgetQueries[`setFilter-${outputId}`] : null;
        if ((filter === null || filter === void 0 ? void 0 : filter.where) !== (preFilter === null || preFilter === void 0 ? void 0 : preFilter.where)) {
            setDataActionFilter(filter);
        }
    }, [queryItem.outputDataSourceId]);
    const publishDataClearedMsg = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => __awaiter(this, void 0, void 0, function* () {
        if (!outputDS)
            return;
        const dataRecordSetChangeMessage = new jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataRecordSetChangeMessage(props.widgetId, jimu_core__WEBPACK_IMPORTED_MODULE_1__.RecordSetChangeType.Remove, [outputDS.id]);
        jimu_core__WEBPACK_IMPORTED_MODULE_1__.MessageManager.getInstance().publishMessage(dataRecordSetChangeMessage);
        yield jimu_core__WEBPACK_IMPORTED_MODULE_1__.MessageManager.getInstance().publishMessage(new jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataRecordsSelectionChangeMessage(props.widgetId, [], [outputDS.id]));
    }), [props.widgetId, outputDS]);
    /**
     * Clears all query results from the UI and map.
     * This is the single source of truth for clearing results.
     * It clears the records, resets the result count, clears selection from the map,
     * publishes a cleared message to the map, switches back to the Query tab,
     * and increments the query execution key to force QueryTaskResult to remount with fresh state.
     */
    const clearResult = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((...args_1) => __awaiter(this, [...args_1], void 0, function* (reason = 'unknown') {
        debugLogger.log('TASK', {
            event: 'clearResult-called',
            widgetId: props.widgetId,
            hasOutputDS: !!outputDS,
            reason,
            timestamp: Date.now()
        });
        recordsRef.current = null;
        outputDS === null || outputDS === void 0 ? void 0 : outputDS.setStatus(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.NotReady);
        setResultCount(0);
        // NOTE: Graphics layer clearing is now handled inside clearSelectionInDataSources
        // called below. We ensure this is awaited to prevent race conditions.
        // Clear selection directly from data source using utility function
        try {
            yield (0,_selection_utils__WEBPACK_IMPORTED_MODULE_18__.clearSelectionInDataSources)(props.widgetId, outputDS, useGraphicsLayerForHighlight, graphicsLayer);
            debugLogger.log('TASK', {
                event: 'clearResult-selection-cleared',
                widgetId: props.widgetId,
                timestamp: Date.now()
            });
        }
        catch (error) {
            debugLogger.log('TASK', {
                event: 'clearResult-selection-clear-failed',
                widgetId: props.widgetId,
                error: error instanceof Error ? error.message : String(error),
                timestamp: Date.now()
            });
        }
        // Clear widget-level accumulated records when clearing results
        if (onAccumulatedRecordsChange) {
            onAccumulatedRecordsChange([]);
            debugLogger.log('RESULTS-MODE', {
                event: 'accumulated-records-cleared-on-clear-results',
                widgetId: props.widgetId
            });
        }
        yield publishDataClearedMsg();
        // Switch back to Query tab when clearing results
        setActiveTab('query');
        setStage(0);
        hasSelectedRecordsRef.current = false; // Reset selection flag when clearing
        // Increment query execution key to force QueryTaskResult remount with fresh state
        queryExecutionKeyRef.current += 1;
        // Clear error states when clearing results
        setSelectionError(null);
        setZoomError(null);
        debugLogger.log('TASK', {
            event: 'clearResult-complete',
            widgetId: props.widgetId,
            timestamp: Date.now()
        });
    }), [outputDS, publishDataClearedMsg, props.widgetId, queryItem.configId, onAccumulatedRecordsChange, useGraphicsLayerForHighlight, graphicsLayer]);
    /**
     * Handles data source creation when switching between query items.
     * When a new query item is selected (e.g., switching from Parcel to Major),
     * this clears old results to ensure all cleanup logic runs properly.
     *
     * @param ds - The newly created data source for the selected query item
     */
    const handleDataSourceCreated = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((ds) => __awaiter(this, void 0, void 0, function* () {
        debugLogger.log('TASK', {
            event: 'handleDataSourceCreated-start',
            widgetId: props.widgetId,
            resultsMode,
            timestamp: Date.now()
        });
        // In "Add to" and "Remove from" modes, preserve accumulated records and selection - don't clear
        if ((resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection || resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection)
            && accumulatedRecords && accumulatedRecords.length > 0) {
            debugLogger.log('RESULTS-MODE', {
                event: 'preserving-selection-on-query-switch-handleDataSourceCreated',
                widgetId: props.widgetId,
                resultsMode,
                accumulatedRecordsCount: accumulatedRecords.length
            });
            setDataSource(ds);
            updateDataSource(ds);
            setStage(0);
            setActiveTab('query');
            return; // Skip clearing - preserve selection
        }
        // For "New" mode, clear old results
        debugLogger.log('TASK', {
            event: 'handleDataSourceCreated-clearing-results-for-new-mode',
            widgetId: props.widgetId,
            timestamp: Date.now()
        });
        yield clearResult('handleDataSourceCreated-new-mode');
        setDataSource(ds);
        updateDataSource(ds);
        setStage(0);
        setActiveTab('query'); // Return to Query tab when switching queries
    }), [updateDataSource, clearResult, resultCount, resultsMode, accumulatedRecords, props.widgetId]);
    const handleOutputDataSourceCreated = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((ds) => __awaiter(this, void 0, void 0, function* () {
        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l;
        setOutputDS(ds);
        // Detect query switch for logging
        const isSwitchingQueries = previousConfigIdRef.current !== queryItem.configId;
        const oldConfigId = previousConfigIdRef.current;
        // FIX (r018.93): Set query switch flag IMMEDIATELY when query switch is detected
        // This prevents handleRenderDone from running before the query switch re-selection logic
        // The flag must be set BEFORE any rendering happens that could trigger handleRenderDone
        if (isSwitchingQueries && (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection || resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection)) {
            if (accumulatedRecords && accumulatedRecords.length > 0) {
                isQuerySwitchInProgressRef.current = true;
                debugLogger.log('RESULTS-MODE', {
                    event: 'query-switch-detected-setting-flag-early',
                    widgetId: props.widgetId,
                    oldConfigId,
                    newConfigId: queryItem.configId,
                    resultsMode,
                    accumulatedRecordsCount: accumulatedRecords.length,
                    flagSet: true,
                    timestamp: Date.now()
                });
            }
        }
        // VERIFICATION LOGGING: Track graphics layer state when switching queries
        if (isSwitchingQueries && (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection || resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection)) {
            const graphicsCountBefore = ((_a = graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics) === null || _a === void 0 ? void 0 : _a.length) || 0;
            debugLogger.log('RESULTS-MODE', {
                event: 'handleOutputDataSourceCreated-query-switch-detected',
                widgetId: props.widgetId,
                oldConfigId,
                newConfigId: queryItem.configId,
                resultsMode,
                hasGraphicsLayer: !!graphicsLayer,
                graphicsCountBefore,
                hasAccumulatedRecords: !!(accumulatedRecords && accumulatedRecords.length > 0),
                accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0,
                useGraphicsLayerForHighlight,
                hasOnClearGraphicsLayer: !!onClearGraphicsLayer,
                isQuerySwitchFlagSet: isQuerySwitchInProgressRef.current,
                timestamp: Date.now()
            });
        }
        // CHECK rootDataSource.map to see how framework accesses map view
        try {
            const originDataSources = ds.getOriginDataSources();
            const originDS = originDataSources === null || originDataSources === void 0 ? void 0 : originDataSources[0];
            if (originDS) {
                const rootDS = originDS.getRootDataSource();
                if (rootDS) {
                    // Expose rootDS to window for console inspection
                    ;
                    window.__querySimpleRootDS = rootDS;
                    window.__querySimpleRootDSMap = rootDS.map;
                    window.__querySimpleOriginDS = originDS;
                    debugLogger.log('GRAPHICS-LAYER', {
                        event: 'check-root-datasource-map',
                        widgetId: props.widgetId,
                        outputDSId: ds.id,
                        originDSId: originDS.id,
                        rootDSId: rootDS.id,
                        rootDSType: rootDS.type,
                        hasRootDSMap: !!rootDS.map,
                        rootDSMapType: rootDS.map ? typeof rootDS.map : 'none',
                        rootDSMapId: ((_b = rootDS.map) === null || _b === void 0 ? void 0 : _b.id) || 'none',
                        hasRootDSMapView: !!((_c = rootDS.map) === null || _c === void 0 ? void 0 : _c.view),
                        hasRootDSMapViews: !!((_d = rootDS.map) === null || _d === void 0 ? void 0 : _d.views),
                        rootDSMapViewsLength: ((_f = (_e = rootDS.map) === null || _e === void 0 ? void 0 : _e.views) === null || _f === void 0 ? void 0 : _f.length) || 0,
                        // Log some map properties if it exists
                        rootDSMapKeys: rootDS.map ? Object.keys(rootDS.map).filter(key => !key.startsWith('_') &&
                            typeof rootDS.map[key] !== 'function').slice(0, 20) : [],
                        // Log that objects are available on window for console inspection
                        consoleInspection: 'Check window.__querySimpleRootDS, window.__querySimpleRootDSMap, window.__querySimpleOriginDS',
                        timestamp: Date.now()
                    });
                    // If map exists, check its view
                    const rootMap = rootDS.map;
                    if (rootMap) {
                        const view = rootMap.view ||
                            ((_h = (_g = rootMap.views) === null || _g === void 0 ? void 0 : _g.getItemAt) === null || _h === void 0 ? void 0 : _h.call(_g, 0)) ||
                            (((_j = rootMap.views) === null || _j === void 0 ? void 0 : _j.length) > 0 ? rootMap.views[0] : null);
                        debugLogger.log('GRAPHICS-LAYER', {
                            event: 'check-root-datasource-map-view',
                            widgetId: props.widgetId,
                            hasView: !!view,
                            viewType: (view === null || view === void 0 ? void 0 : view.type) || 'none',
                            viewId: (view === null || view === void 0 ? void 0 : view.id) || 'none',
                            timestamp: Date.now()
                        });
                    }
                }
            }
        }
        catch (error) {
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'check-root-datasource-map-error',
                widgetId: props.widgetId,
                error: error instanceof Error ? error.message : String(error),
                errorStack: error instanceof Error ? error.stack : undefined,
                timestamp: Date.now()
            });
        }
        // Initialize graphics layer lazily if enabled and not already initialized
        if (useGraphicsLayerForHighlight && onInitializeGraphicsLayer) {
            yield onInitializeGraphicsLayer(ds);
            // After initialization, graphicsLayer and mapView props should be updated
            // But since props come from refs, we need to wait for widget re-render
            // For now, use the props that will be updated on next render
        }
        // If in "Add to" or "Remove from" mode and we have accumulated records, re-select them
        // This uses the same logic as after query completion - selectRecordsAndPublish
        // This ensures records are selected both on the map and in the Results tab
        if ((resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection || resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection)
            && accumulatedRecords && accumulatedRecords.length > 0) {
            // FIX (r018.93): Flag is now set earlier (at query switch detection) to prevent timing issues
            // Verify that the flag is already set
            debugLogger.log('RESULTS-MODE', {
                event: 'query-switch-reselection-starting',
                widgetId: props.widgetId,
                resultsMode,
                accumulatedRecordsCount: accumulatedRecords.length,
                isQuerySwitchFlagSet: isQuerySwitchInProgressRef.current,
                note: 'Flag should already be set from query switch detection',
                timestamp: Date.now()
            });
            // VERIFICATION LOGGING: Graphics count before clearing
            const graphicsCountBeforeClear = ((_k = graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics) === null || _k === void 0 ? void 0 : _k.length) || 0;
            // FIX (r018.67): Clear graphics layer when switching queries to prevent stale graphics
            // from previous queries from persisting in the shared graphics layer
            if (useGraphicsLayerForHighlight && graphicsLayer && onClearGraphicsLayer) {
                debugLogger.log('RESULTS-MODE', {
                    event: 'clearing-graphics-layer-before-reselection-on-query-switch',
                    widgetId: props.widgetId,
                    resultsMode,
                    accumulatedRecordsCount: accumulatedRecords.length,
                    graphicsCountBeforeClear,
                    timestamp: Date.now()
                });
                onClearGraphicsLayer();
                // VERIFICATION LOGGING: Graphics count after clearing
                const graphicsCountAfterClear = ((_l = graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics) === null || _l === void 0 ? void 0 : _l.length) || 0;
                debugLogger.log('RESULTS-MODE', {
                    event: 'graphics-layer-cleared-on-query-switch',
                    widgetId: props.widgetId,
                    graphicsCountBeforeClear,
                    graphicsCountAfterClear,
                    cleared: graphicsCountAfterClear === 0,
                    timestamp: Date.now()
                });
            }
            else {
                debugLogger.log('RESULTS-MODE', {
                    event: 'skipping-graphics-layer-clear-on-query-switch',
                    widgetId: props.widgetId,
                    reason: !useGraphicsLayerForHighlight ? 'useGraphicsLayerForHighlight-false' :
                        !graphicsLayer ? 'no-graphicsLayer' :
                            !onClearGraphicsLayer ? 'no-onClearGraphicsLayer' : 'unknown',
                    graphicsCountBeforeClear,
                    timestamp: Date.now()
                });
            }
            // Use a delay to ensure the DS is fully ready and graphics layer props are updated after widget re-render
            // If graphics layer was just initialized, wait a bit longer for props to update
            const delay = (useGraphicsLayerForHighlight && onInitializeGraphicsLayer) ? 200 : 100;
            setTimeout(() => {
                var _a;
                const featureDS = ds;
                if (featureDS && accumulatedRecords && accumulatedRecords.length > 0) {
                    // FIX (r018.96): No filtering needed - accumulatedRecords is already the source of truth
                    // Duplicate detection in mergeResultsIntoAccumulated prevents duplicates
                    const recordsToReselect = accumulatedRecords;
                    // VERIFICATION LOGGING: Show records being reselected
                    debugLogger.log('RESULTS-MODE', {
                        event: 'query-switch-reselecting-accumulated-records',
                        widgetId: props.widgetId,
                        accumulatedRecordsCount: accumulatedRecords.length,
                        recordsToReselectCount: recordsToReselect.length,
                        recordsToReselectIds: recordsToReselect.map(r => r.getId()).slice(0, 10),
                        note: 'r018.96: Using accumulatedRecords directly - no manual removal tracking',
                        timestamp: Date.now()
                    });
                    // Update accumulatedRecords if filtering removed any records
                    if (recordsToReselect.length !== accumulatedRecords.length && onAccumulatedRecordsChange) {
                        debugLogger.log('RESULTS-MODE', {
                            event: 'syncing-accumulated-records-after-filtering-manually-removed',
                            widgetId: props.widgetId,
                            accumulatedRecordsCountBefore: accumulatedRecords.length,
                            accumulatedRecordsCountAfter: recordsToReselect.length,
                            recordsRemoved: accumulatedRecords.length - recordsToReselect.length,
                            note: 'Updating accumulatedRecords to exclude manually removed records',
                            timestamp: Date.now()
                        });
                        onAccumulatedRecordsChange(recordsToReselect);
                    }
                    // Only re-select if we have records to re-select
                    if (recordsToReselect.length > 0) {
                        const recordIds = recordsToReselect.map(record => record.getId());
                        // DIAGNOSTIC LOGGING: What we're about to re-select
                        debugLogger.log('RESULTS-MODE', {
                            event: 'query-switch-before-reselection',
                            widgetId: props.widgetId,
                            recordsToReselectCount: recordsToReselect.length,
                            recordsToReselectIds: recordIds,
                            outputDSId: featureDS.id,
                            graphicsLayerCountBefore: ((_a = graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics) === null || _a === void 0 ? void 0 : _a.length) || 0,
                            timestamp: Date.now()
                        });
                        (() => __awaiter(this, void 0, void 0, function* () {
                            var _a;
                            try {
                                yield (0,_selection_utils__WEBPACK_IMPORTED_MODULE_18__.selectRecordsAndPublish)(props.widgetId, featureDS, recordIds, recordsToReselect, false, useGraphicsLayerForHighlight, graphicsLayer, mapView);
                                // FIX (r018.92): Clear the query switch flag after re-selection completes
                                isQuerySwitchInProgressRef.current = false;
                                debugLogger.log('RESULTS-MODE', {
                                    event: 'query-switch-completed-clearing-in-progress-flag',
                                    widgetId: props.widgetId,
                                    recordsReselected: recordIds.length,
                                    timestamp: Date.now()
                                });
                                // FIX (r018.86): Clean up duplicate widget output entries in data_s hash
                                // When switching queries, Experience Builder creates a new output DS with a new ID
                                // We need to remove all old widget output entries to prevent duplicates
                                const currentOutputDSId = featureDS.id;
                                const hash = window.location.hash.substring(1);
                                const urlParams = new URLSearchParams(hash);
                                if (urlParams.has('data_s')) {
                                    const dataS = urlParams.get('data_s') || '';
                                    const decodedDataS = decodeURIComponent(dataS);
                                    const selections = decodedDataS.split(',');
                                    // Extract widget number from widgetId (e.g., "widget_12" -> "12")
                                    const widgetMatch = props.widgetId.match(/widget_(\d+)/);
                                    if (widgetMatch) {
                                        const widgetNumber = widgetMatch[1];
                                        const widgetPattern = new RegExp(`widget_${widgetNumber}_output_(\\d+)`);
                                        // Find all widget output entries for this widget
                                        const widgetOutputEntries = [];
                                        selections.forEach(selection => {
                                            if (selection.startsWith('id:')) {
                                                const idPart = selection.substring(3);
                                                const colonIndex = idPart.lastIndexOf(':');
                                                if (colonIndex !== -1) {
                                                    const dsIdPart = idPart.substring(0, colonIndex);
                                                    const recordIdsPart = idPart.substring(colonIndex + 1);
                                                    const recordCount = recordIdsPart ? recordIdsPart.split(/[,+]/).filter(id => id).length : 0;
                                                    // Check if this matches our widget's output DS pattern
                                                    let outputIdMatch = null;
                                                    if (dsIdPart.includes('~')) {
                                                        // Compound format: dataSource_*~widget_XX_output_*
                                                        const parts = dsIdPart.split('~');
                                                        for (const part of parts) {
                                                            const match = part.match(widgetPattern);
                                                            if (match) {
                                                                outputIdMatch = match;
                                                                break;
                                                            }
                                                        }
                                                    }
                                                    else {
                                                        // Simple format: widget_XX_output_*
                                                        outputIdMatch = dsIdPart.match(widgetPattern);
                                                    }
                                                    if (outputIdMatch) {
                                                        const fullOutputId = outputIdMatch[0]; // e.g., "widget_12_output_28628683957324497"
                                                        widgetOutputEntries.push({ selection, outputId: fullOutputId, recordCount });
                                                    }
                                                }
                                            }
                                        });
                                        // If we have multiple entries for this widget, keep only the current one
                                        if (widgetOutputEntries.length > 1) {
                                            const currentOutputIdShort = currentOutputDSId.split('-').pop(); // Extract the numeric part
                                            debugLogger.log('HASH', {
                                                event: 'query-switch-multiple-widget-outputs-detected',
                                                widgetId: props.widgetId,
                                                totalWidgetOutputs: widgetOutputEntries.length,
                                                widgetOutputs: widgetOutputEntries.map(e => ({ outputId: e.outputId, recordCount: e.recordCount })),
                                                currentOutputDSId,
                                                currentOutputIdShort,
                                                timestamp: Date.now()
                                            });
                                            // Filter out all old widget output entries
                                            const updatedSelections = selections.filter(selection => {
                                                const matchingEntry = widgetOutputEntries.find(e => e.selection === selection);
                                                if (matchingEntry) {
                                                    // Keep only the entry matching the current output DS
                                                    const keepEntry = matchingEntry.outputId.includes(currentOutputIdShort || '');
                                                    if (!keepEntry) {
                                                        debugLogger.log('HASH', {
                                                            event: 'query-switch-removing-old-widget-output',
                                                            widgetId: props.widgetId,
                                                            removedOutputId: matchingEntry.outputId,
                                                            removedRecordCount: matchingEntry.recordCount,
                                                            currentOutputDSId,
                                                            timestamp: Date.now()
                                                        });
                                                    }
                                                    return keepEntry;
                                                }
                                                return true;
                                            });
                                            if (updatedSelections.length !== selections.length) {
                                                if (updatedSelections.length > 0) {
                                                    urlParams.set('data_s', encodeURIComponent(updatedSelections.join(',')));
                                                }
                                                else {
                                                    urlParams.delete('data_s');
                                                }
                                                window.location.hash = urlParams.toString();
                                                debugLogger.log('HASH', {
                                                    event: 'query-switch-cleaned-duplicate-widget-outputs',
                                                    widgetId: props.widgetId,
                                                    originalSelectionCount: selections.length,
                                                    newSelectionCount: updatedSelections.length,
                                                    entriesRemoved: selections.length - updatedSelections.length,
                                                    keptOutputDSId: currentOutputDSId,
                                                    keptRecordCount: recordsToReselect.length,
                                                    timestamp: Date.now()
                                                });
                                            }
                                        }
                                        else if (widgetOutputEntries.length === 1) {
                                            debugLogger.log('HASH', {
                                                event: 'query-switch-single-widget-output-found',
                                                widgetId: props.widgetId,
                                                outputId: widgetOutputEntries[0].outputId,
                                                recordCount: widgetOutputEntries[0].recordCount,
                                                expectedRecordCount: recordsToReselect.length,
                                                recordCountsMatch: widgetOutputEntries[0].recordCount === recordsToReselect.length,
                                                timestamp: Date.now()
                                            });
                                        }
                                    }
                                }
                                // Update recordsRef so results tab shows accumulated records
                                recordsRef.current = recordsToReselect;
                                setResultCount(recordsToReselect.length);
                                // VERIFICATION LOGGING: Graphics count after re-selection
                                const graphicsCountAfterReselection = ((_a = graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics) === null || _a === void 0 ? void 0 : _a.length) || 0;
                                debugLogger.log('RESULTS-MODE', {
                                    event: 're-selected-accumulated-records-after-query-switch',
                                    widgetId: props.widgetId,
                                    outputDSId: featureDS.id,
                                    recordsCount: recordsToReselect.length,
                                    graphicsCountAfterReselection,
                                    expectedGraphicsCount: recordsToReselect.length,
                                    graphicsMatch: graphicsCountAfterReselection === recordsToReselect.length,
                                    timestamp: Date.now()
                                });
                                // Verify what's actually selected in the DS after a delay
                                setTimeout(() => {
                                    var _a, _b, _c;
                                    const ds = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().getDataSource(featureDS.id);
                                    const selectedInDS = ds === null || ds === void 0 ? void 0 : ds.getSelectedRecords();
                                    const selectedIdsInDS = (_a = ds === null || ds === void 0 ? void 0 : ds.getSelectedRecordIds()) !== null && _a !== void 0 ? _a : [];
                                    const finalGraphicsCount = ((_b = graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics) === null || _b === void 0 ? void 0 : _b.length) || 0;
                                    // r018.78: Use 'recordId' attribute (not OBJECTID/id/FID) - that's how graphics-layer-utils stores them
                                    const finalGraphicsIds = ((_c = graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics) === null || _c === void 0 ? void 0 : _c.map(g => { var _a; return (_a = g.attributes) === null || _a === void 0 ? void 0 : _a.recordId; })) || [];
                                    debugLogger.log('RESULTS-MODE', {
                                        event: 'query-switch-after-reselection-full-state',
                                        widgetId: props.widgetId,
                                        outputDSId: featureDS.id,
                                        expectedCount: recordsToReselect.length,
                                        expectedIds: recordIds,
                                        actualSelectedInDS: (selectedInDS === null || selectedInDS === void 0 ? void 0 : selectedInDS.length) || 0,
                                        actualSelectedIdsInDS: selectedIdsInDS,
                                        finalGraphicsCount,
                                        finalGraphicsIds,
                                        allSourcesMatch: selectedIdsInDS.length === recordsToReselect.length &&
                                            finalGraphicsCount === recordsToReselect.length &&
                                            JSON.stringify(selectedIdsInDS.sort()) === JSON.stringify(recordIds.sort()),
                                        timestamp: Date.now()
                                    });
                                }, 200);
                            }
                            catch (error) {
                                debugLogger.log('RESULTS-MODE', {
                                    event: 're-selection-failed-after-switch',
                                    widgetId: props.widgetId,
                                    error: error instanceof Error ? error.message : 'Unknown error',
                                    errorStack: error instanceof Error ? error.stack : undefined
                                });
                            }
                        }))();
                    }
                    else {
                        // No records to re-select - all were removed
                        recordsRef.current = [];
                        setResultCount(0);
                        debugLogger.log('RESULTS-MODE', {
                            event: 'no-records-to-reselect-all-removed',
                            widgetId: props.widgetId,
                            outputDSId: featureDS.id,
                            accumulatedRecordsCountBefore: accumulatedRecords.length,
                            note: 'all-records-were-removed-no-reselection-needed',
                            timestamp: Date.now()
                        });
                    }
                }
            }, 100);
        }
    }), [resultsMode, accumulatedRecords, props.widgetId, useGraphicsLayerForHighlight, onInitializeGraphicsLayer, graphicsLayer, onClearGraphicsLayer, mapView, queryItem.configId, onAccumulatedRecordsChange]);
    // Clear results when query item changes (e.g., when new hash parameter triggers different query)
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a, _b;
        // Only clear if we're actually switching to a different query (not just re-rendering)
        const isSwitchingQueries = previousConfigIdRef.current !== queryItem.configId;
        // Only clear results when switching queries if we're in "New" mode
        // In "Add to" and "Remove from" modes, we want to preserve accumulated records across query switches
        if (isSwitchingQueries && resultCount > 0 && resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection) {
            // Store the old configId before updating
            const oldConfigId = previousConfigIdRef.current;
            // Update the ref to track the new query
            previousConfigIdRef.current = queryItem.configId;
            debugLogger.log('RESULTS-MODE', {
                event: 'clearing-results-on-query-switch-new-mode',
                widgetId: props.widgetId,
                oldConfigId,
                newConfigId: queryItem.configId,
                resultsMode
            });
            // Clear immediately when switching queries, but wrap in try-catch to handle
            // race conditions with feature info windows that might be rendering
            try {
                clearResult('query-item-switch-new-mode');
            }
            catch (error) {
                // Log for debugging but don't show to user (framework race condition)
                // The error is in framework code (feature-info.tsx), not our code
                // This can happen if feature-info.tsx is trying to appendChild to a DOM element
                // that gets removed when we clear selection
                debugLogger.log('TASK', {
                    event: 'clear-result-race-condition',
                    error: error instanceof Error ? error.message : String(error),
                    note: 'Likely race condition with feature-info.tsx'
                });
                if (true) {
                    console.warn('Error clearing results (likely race condition with feature info):', error);
                }
                // Don't set error state - this is expected in some scenarios
            }
        }
        else if (isSwitchingQueries) {
            // Store the old configId BEFORE updating the ref
            const oldConfigId = previousConfigIdRef.current;
            // DIAGNOSTIC LOGGING: Full state BEFORE sync
            if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection || resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection) {
                if (outputDS && accumulatedRecords && accumulatedRecords.length > 0) {
                    const actuallySelectedRecordsBeforeSync = outputDS.getSelectedRecords() || [];
                    const accumulatedIds = accumulatedRecords.map(r => r.getId());
                    const actuallySelectedIdsBeforeSync = actuallySelectedRecordsBeforeSync.map(r => r.getId());
                    // r018.78: Use 'recordId' attribute - that's how graphics-layer-utils stores them
                    const graphicsLayerIds = ((_a = graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics) === null || _a === void 0 ? void 0 : _a.map(g => { var _a; return (_a = g.attributes) === null || _a === void 0 ? void 0 : _a.recordId; })) || [];
                    debugLogger.log('RESULTS-MODE', {
                        event: 'query-switch-before-sync-full-state',
                        widgetId: props.widgetId,
                        oldConfigId,
                        newConfigId: queryItem.configId,
                        accumulatedRecordsCount: accumulatedRecords.length,
                        accumulatedIds: accumulatedIds,
                        outputDSSelectedCount: actuallySelectedRecordsBeforeSync.length,
                        outputDSSelectedIds: actuallySelectedIdsBeforeSync,
                        graphicsLayerCount: ((_b = graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics) === null || _b === void 0 ? void 0 : _b.length) || 0,
                        graphicsLayerIds: graphicsLayerIds,
                        recordsOutOfSync: accumulatedIds.length !== actuallySelectedIdsBeforeSync.length,
                        idsMatch: JSON.stringify(accumulatedIds.sort()) === JSON.stringify(actuallySelectedIdsBeforeSync.sort()),
                        timestamp: Date.now()
                    });
                }
            }
            // FIX (r018.70): Only sync accumulatedRecords when there are actually selected records that are a subset
            // This prevents clearing accumulatedRecords when switching to empty data sources during query switches
            // Only sync if records were manually removed (actuallySelected < accumulated), not during empty DS switches
            if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection || resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection) {
                if (outputDS && accumulatedRecords && accumulatedRecords.length > 0 && onAccumulatedRecordsChange) {
                    const actuallySelectedRecords = outputDS.getSelectedRecords() || [];
                    if (actuallySelectedRecords.length > 0 && actuallySelectedRecords.length < accumulatedRecords.length) {
                        // Build a Set of actually selected IDs for fast lookup
                        const actuallySelectedIdsSet = new Set(actuallySelectedRecords.map(r => r.getId()));
                        // Filter accumulatedRecords to only include records that are actually selected
                        const syncedRecords = accumulatedRecords.filter(record => actuallySelectedIdsSet.has(record.getId()));
                        const accumulatedIds = accumulatedRecords.map(r => r.getId());
                        const actuallySelectedIds = actuallySelectedRecords.map(r => r.getId());
                        const syncedIds = syncedRecords.map(r => r.getId());
                        const removedIds = accumulatedIds.filter(id => !syncedIds.includes(id));
                        debugLogger.log('RESULTS-MODE', {
                            event: 'syncing-accumulated-records-before-query-switch',
                            widgetId: props.widgetId,
                            oldConfigId,
                            newConfigId: queryItem.configId,
                            accumulatedRecordsCountBefore: accumulatedRecords.length,
                            accumulatedIdsBefore: accumulatedIds,
                            actuallySelectedCount: actuallySelectedRecords.length,
                            actuallySelectedIds: actuallySelectedIds,
                            syncedRecordsCount: syncedRecords.length,
                            syncedIds: syncedIds,
                            recordsRemoved: accumulatedRecords.length - syncedRecords.length,
                            removedIds: removedIds,
                            note: 'immediate-sync-before-query-switch',
                            timestamp: Date.now()
                        });
                        // Update accumulatedRecords to match reality (immediate sync, not lazy)
                        onAccumulatedRecordsChange(syncedRecords);
                        // DIAGNOSTIC LOGGING: Full state AFTER sync
                        debugLogger.log('RESULTS-MODE', {
                            event: 'query-switch-after-sync-full-state',
                            widgetId: props.widgetId,
                            oldConfigId,
                            newConfigId: queryItem.configId,
                            accumulatedRecordsCountAfter: syncedRecords.length,
                            accumulatedIdsAfter: syncedIds,
                            outputDSSelectedCount: actuallySelectedRecords.length,
                            outputDSSelectedIds: actuallySelectedIds,
                            timestamp: Date.now()
                        });
                    }
                    else {
                        debugLogger.log('RESULTS-MODE', {
                            event: 'accumulated-records-already-in-sync-before-query-switch',
                            widgetId: props.widgetId,
                            oldConfigId,
                            newConfigId: queryItem.configId,
                            accumulatedRecordsCount: accumulatedRecords.length,
                            timestamp: Date.now()
                        });
                    }
                }
                debugLogger.log('RESULTS-MODE', {
                    event: 'preserving-accumulated-records-on-query-switch',
                    widgetId: props.widgetId,
                    resultsMode,
                    oldConfigId,
                    newConfigId: queryItem.configId,
                    accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0
                });
            }
            // Update the ref AFTER syncing
            previousConfigIdRef.current = queryItem.configId;
        }
    }, [queryItem.configId, clearResult, resultCount, resultsMode, accumulatedRecords, props.widgetId, outputDS, onAccumulatedRecordsChange]);
    const navToForm = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((...args_1) => __awaiter(this, [...args_1], void 0, function* (clearResults = false) {
        if (clearResults) {
            // Use the centralized clearResult method instead of duplicating logic
            yield clearResult('navToForm-clearResults');
            return;
        }
        // Switch to query tab but don't clear results unless explicitly requested
        // Mark as manual switch to prevent auto-switch useEffect from interfering
        manualTabSwitchRef.current = true;
        setActiveTab('query');
        // Reset the flag after a short delay
        setTimeout(() => {
            manualTabSwitchRef.current = false;
        }, 100);
        // Only change stage if we're clearing results
        // Otherwise, keep stage at 1 (results available) so results persist
        if (!clearResults && resultCount > 0) {
            setStage(1); // Keep results available
        }
        jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.defer(() => {
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.focusElementInKeyboardMode)(backBtnRef.current);
        });
    }), [clearResult, resultCount]);
    /**
     * Handles tab switching between Query and Results tabs.
     * Tab switching preserves results state - results remain visible and selected
     * when switching between tabs. Results are only cleared when explicitly
     * clicking the trash can button or when starting a new query.
     *
     * @param tab - The tab to switch to ('query' | 'results')
     * @param event - Optional mouse event to prevent default behavior
     */
    const handleTabChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((tab, event) => {
        debugLogger.log('TASK', {
            event: 'tab-change',
            tab,
            currentTab: activeTab,
            resultCount,
            eventType: event === null || event === void 0 ? void 0 : event.type
        });
        if (event) {
            event.preventDefault();
            event.stopPropagation();
        }
        // Don't allow switching to results if there are no results
        if (tab === 'results' && resultCount === 0) {
            debugLogger.log('TASK', {
                event: 'tab-change-blocked',
                reason: 'no-results',
                tab,
                resultCount
            });
            return;
        }
        // Mark this as a manual switch to prevent auto-switch useEffect from interfering
        manualTabSwitchRef.current = true;
        setActiveTab(tab);
        // Reset the flag after a short delay to allow the state update to complete
        // This prevents the auto-switch useEffect from immediately switching back
        setTimeout(() => {
            manualTabSwitchRef.current = false;
        }, 100);
        // Don't change stage here - just switch the view
        // Stage should remain at 1 (results available) when switching between tabs
    }, [resultCount, activeTab]);
    /**
     * Internal implementation of handleFormSubmit (without waiting logic)
     * This is called either directly or after hash value conversion
     *
     * @param sqlExpr - The SQL expression for attribute filtering
     * @param spatialFilter - The spatial filter object
     * @param runtimeZoomToSelected - Optional runtime override for zoom-to-selected behavior
     */
    const handleFormSubmitInternal = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((sqlExpr, spatialFilter, runtimeZoomToSelected) => __awaiter(this, void 0, void 0, function* () {
        var _a, _b, _c, _d, _e, _f;
        // Clear previous errors when starting a new query
        setSelectionError(null);
        setZoomError(null);
        debugLogger.log('TASK', {
            event: 'handleFormSubmitInternal-executing',
            widgetId: props.widgetId,
            resultsMode,
            timestamp: Date.now()
        });
        // Store the runtime zoom override for use by Add to Map action
        lastRuntimeZoomToSelectedRef.current = runtimeZoomToSelected;
        attributeFilterSqlExprObj.current = sqlExpr;
        spatialFilterObj.current = spatialFilter;
        // Load the first page
        const featureDS = outputDS;
        // For "Add to" and "Remove from" modes, use widget-level accumulated records
        // These persist across query switches, unlike query-item-level records
        let existingRecordsForMerge = [];
        if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection || resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection) {
            // Robust capture strategy:
            // 1. Try records from props (already merged by parent)
            // 2. Fallback to currently selected records in DS (captured during mode switch)
            const fromProp = accumulatedRecords || [];
            const fromDS = (outputDS === null || outputDS === void 0 ? void 0 : outputDS.getSelectedRecords()) || [];
            // Diagnostic: Capture existing records from both sources
            debugLogger.log('RESULTS-MODE', {
                event: 'capture-existing-records-detailed',
                widgetId: props.widgetId,
                queryItemId: (_a = props.queryItem) === null || _a === void 0 ? void 0 : _a.id,
                fromPropCount: fromProp.length,
                fromPropIds: fromProp.map(r => { var _a; return (_a = r.getId) === null || _a === void 0 ? void 0 : _a.call(r); }).slice(0, 5),
                fromDSCount: fromDS.length,
                fromDSIds: fromDS.map(r => { var _a; return (_a = r.getId) === null || _a === void 0 ? void 0 : _a.call(r); }).slice(0, 5),
                outputDSId: outputDS === null || outputDS === void 0 ? void 0 : outputDS.id,
                resultsMode,
                timestamp: Date.now()
            });
            existingRecordsForMerge = fromProp.length > 0 ? fromProp : fromDS;
            // Diagnostic: Final existing records selected
            debugLogger.log('RESULTS-MODE', {
                event: 'final-existing-records-selected',
                widgetId: props.widgetId,
                finalCount: existingRecordsForMerge.length,
                finalIds: existingRecordsForMerge.map(r => { var _a; return (_a = r.getId) === null || _a === void 0 ? void 0 : _a.call(r); }).slice(0, 5),
                source: fromProp.length > 0 ? 'accumulatedRecords-prop' : 'outputDS-getSelectedRecords',
                timestamp: Date.now()
            });
            debugLogger.log('RESULTS-MODE', {
                event: 'captured-existing-records-diagnostic',
                widgetId: props.widgetId,
                resultsMode,
                fromPropCount: fromProp.length,
                fromDSCount: fromDS.length,
                finalCapturedCount: existingRecordsForMerge.length,
                firstRecordId: ((_c = (_b = existingRecordsForMerge[0]) === null || _b === void 0 ? void 0 : _b.getId) === null || _c === void 0 ? void 0 : _c.call(_b)) || 'none',
                allRecordIds: existingRecordsForMerge.map(r => { var _a; return (_a = r.getId) === null || _a === void 0 ? void 0 : _a.call(r); }).slice(0, 10),
                outputDSId: outputDS.id,
                timestamp: Date.now()
            });
        }
        // For "New" mode, clear old results and graphics layer
        // We call clearResult() directly and AWAIT it to ensure it's finished before query execution starts
        if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection) {
            debugLogger.log('TASK', {
                event: 'handleFormSubmit-clearing-results-for-new-mode',
                widgetId: props.widgetId,
                timestamp: Date.now()
            });
            yield clearResult('handleFormSubmit-new-mode');
        }
        // Set loading stage
        setStage(2);
        // FORCED: Always use SimpleList - fetch ALL records, not just a page
        // Use data source's max record count, or fall back to a large number (10000)
        const maxRecordCount = (_f = (_e = (_d = featureDS).getMaxRecordCount) === null || _e === void 0 ? void 0 : _e.call(_d)) !== null && _f !== void 0 ? _f : 10000;
        let pageSize = maxRecordCount;
        const queryParams = (0,_query_utils__WEBPACK_IMPORTED_MODULE_12__.generateQueryParams)(featureDS, sqlExpr, spatialFilter, currentItem, 1, pageSize);
        queryParamRef.current = queryParams;
        debugLogger.log('TASK', {
            event: 'handleFormSubmit-executing-query',
            widgetId: props.widgetId,
            where: queryParams.where,
            resultsMode,
            timestamp: Date.now()
        });
        // Change output ds status to unloaded before use it to load count/records.
        featureDS.setStatus(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.Unloaded);
        featureDS.setCountStatus(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.Unloaded);
        let queryResultCount = 0; // Capture count from records to use in finally block
        const startTime = performance.now();
        debugLogger.log('TASK', {
            event: 'perf-query-chain-start',
            widgetId: props.widgetId,
            resultsMode,
            where: queryParams.where,
            timestamp: Date.now()
        });
        // PERFORMANCE OPTIMIZATION: Removed redundant executeCountQuery() round-trip.
        // Since we fetch ALL records (pageSize = maxRecordCount), we can just use records.length.
        featureDS.updateQueryParams(queryParamRef.current, props.widgetId);
        const fetchStartTime = performance.now();
        (0,_query_utils__WEBPACK_IMPORTED_MODULE_12__.executeQuery)(props.widgetId, queryItem, featureDS, queryParamRef.current)
            .then((result) => __awaiter(this, void 0, void 0, function* () {
            var _a, _b, _c, _d, _e, _f, _g, _h, _j;
            const fetchDurationMs = Math.round(performance.now() - fetchStartTime);
            const processingStartTime = performance.now();
            queryResultCount = ((_a = result.records) === null || _a === void 0 ? void 0 : _a.length) || 0;
            debugLogger.log('RESULTS-MODE', {
                event: 'query-execution-complete',
                widgetId: props.widgetId,
                resultsMode,
                recordsReturned: queryResultCount,
                fetchDurationMs,
                existingCapturedCount: existingRecordsForMerge.length,
                timestamp: Date.now()
            });
            let recordsToDisplay = result.records || [];
            let dsToUse = outputDS;
            // Handle "Add to" mode: merge new results with widget-level accumulated records
            if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection && result.records && result.records.length > 0) {
                try {
                    // FIX (r018.96): No manual removal filtering needed
                    // Duplicate detection in mergeResultsIntoAccumulated handles preventing duplicates
                    debugLogger.log('RESULTS-MODE', {
                        event: 'add-mode-starting-merge',
                        widgetId: props.widgetId,
                        existingCount: existingRecordsForMerge.length,
                        existingIds: existingRecordsForMerge.map(r => { var _a; return (_a = r.getId) === null || _a === void 0 ? void 0 : _a.call(r); }).slice(0, 5),
                        newRecordsCount: result.records.length,
                        newRecordIds: (_b = result.records) === null || _b === void 0 ? void 0 : _b.slice(0, 5).map((r) => { var _a; return (_a = r.getId) === null || _a === void 0 ? void 0 : _a.call(r); }),
                        note: 'r018.96: No manual removal filtering - duplicate detection handles this',
                        timestamp: Date.now()
                    });
                    // Merge new query results with widget-level accumulated records
                    // mergeResultsIntoAccumulated uses composite keys to prevent duplicates
                    const mergedRecords = (0,_results_management_utils__WEBPACK_IMPORTED_MODULE_13__.mergeResultsIntoAccumulated)(outputDS, // Use outputDS for key generation
                    result.records, existingRecordsForMerge // Use consistently captured records
                    );
                    recordsToDisplay = mergedRecords;
                    // DIAGNOSTIC LOGGING: Records being added to accumulatedRecords
                    const existingIds = existingRecordsForMerge.map(r => r.getId());
                    const newRecordIds = result.records.map(r => r.getId());
                    const mergedIds = mergedRecords.map(r => r.getId());
                    const addedIds = mergedIds.filter(id => !existingIds.includes(id));
                    const duplicateIds = newRecordIds.filter(id => existingIds.includes(id));
                    debugLogger.log('RESULTS-MODE', {
                        event: 'add-mode-merge-complete',
                        widgetId: props.widgetId,
                        existingCount: existingRecordsForMerge.length,
                        existingIds: existingIds.slice(0, 10),
                        newRecordsCount: result.records.length,
                        newRecordIds: newRecordIds.slice(0, 10),
                        mergedRecordsCount: mergedRecords.length,
                        mergedIds: mergedIds.slice(0, 10),
                        addedIds: addedIds.slice(0, 10),
                        duplicateIds: duplicateIds.slice(0, 10),
                        duplicatesSkipped: duplicateIds.length,
                        recordsAdded: addedIds.length,
                        note: 'r018.96: No manual removal filtering - mergeResultsIntoAccumulated handles duplicates',
                        timestamp: Date.now()
                    });
                    // Update widget-level accumulated records so they persist across query switches
                    if (onAccumulatedRecordsChange) {
                        onAccumulatedRecordsChange(mergedRecords);
                    }
                }
                catch (error) {
                    debugLogger.log('RESULTS-MODE', {
                        event: 'add-mode-error',
                        widgetId: props.widgetId,
                        error: error instanceof Error ? error.message : 'Unknown error',
                        errorStack: error instanceof Error ? error.stack : undefined,
                        note: 'r018.96: Falling back to existing records on error',
                        timestamp: Date.now()
                    });
                    // Fall back to existing records on error
                    recordsToDisplay = existingRecordsForMerge;
                }
            }
            else if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection) {
                // Handle "Remove from" mode: remove matching records from widget-level accumulated records
                try {
                    debugLogger.log('RESULTS-MODE', {
                        event: 'remove-mode-starting-merge',
                        widgetId: props.widgetId,
                        existingCount: existingRecordsForMerge.length,
                        removeCount: ((_c = result.records) === null || _c === void 0 ? void 0 : _c.length) || 0
                    });
                    // Check if we have accumulated records to remove from
                    if (existingRecordsForMerge.length === 0) {
                        debugLogger.log('RESULTS-MODE', {
                            event: 'remove-mode-no-accumulated-records',
                            widgetId: props.widgetId,
                            queryRecordsCount: ((_d = result.records) === null || _d === void 0 ? void 0 : _d.length) || 0,
                            note: 'No accumulated records to remove from - no-op'
                        });
                        // No accumulated records, so nothing to remove - show empty results
                        recordsToDisplay = [];
                    }
                    else if (result.records && result.records.length > 0) {
                        // Remove matching records from accumulated records
                        const remainingRecords = (0,_results_management_utils__WEBPACK_IMPORTED_MODULE_13__.removeResultsFromAccumulated)(outputDS, // Use outputDS for key generation
                        result.records, existingRecordsForMerge // Use consistently captured records
                        );
                        recordsToDisplay = remainingRecords;
                        // Update widget-level accumulated records
                        if (onAccumulatedRecordsChange) {
                            onAccumulatedRecordsChange(remainingRecords);
                        }
                        // FIX (r018.86): DIAGNOSTIC - Graphics count BEFORE removeRecordsFromOriginSelections
                        const graphicsCountBeforeRemoveMode = ((_e = graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics) === null || _e === void 0 ? void 0 : _e.length) || 0;
                        const graphicsIdsBeforeRemoveMode = ((_f = graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics) === null || _f === void 0 ? void 0 : _f.map(g => { var _a; return (_a = g.attributes) === null || _a === void 0 ? void 0 : _a.recordId; }).slice(0, 10)) || [];
                        debugLogger.log('RESULTS-MODE', {
                            event: 'remove-mode-BEFORE-removeRecordsFromOriginSelections',
                            widgetId: props.widgetId,
                            recordsToRemoveCount: result.records.length,
                            recordsToRemoveIds: result.records.map(r => r.getId()).slice(0, 10),
                            graphicsCountBefore: graphicsCountBeforeRemoveMode,
                            graphicsIdsBefore: graphicsIdsBeforeRemoveMode,
                            timestamp: Date.now()
                        });
                        // Remove records from origin data source selections (map highlighting)
                        // FIX (r018.86): DON'T pass graphics layer parameters here - let graphics be managed by selection sync
                        // This matches the fix for X button removal (r018.85)
                        // Graphics will be synced through the normal selection flow after this operation
                        (0,_results_management_utils__WEBPACK_IMPORTED_MODULE_13__.removeRecordsFromOriginSelections)(props.widgetId, result.records, outputDS
                        // NOT passing useGraphicsLayerForHighlight or graphicsLayer
                        // Graphics will be synced through normal selection flow
                        );
                        // FIX (r018.104): Manually remove graphics from graphics layer
                        // Similar to X button removal fix (r018.90), we need to explicitly remove graphics
                        // since removeRecordsFromOriginSelections doesn't receive graphics layer params
                        if (useGraphicsLayerForHighlight && graphicsLayer && result.records && result.records.length > 0) {
                            const removedRecordIds = result.records.map(r => r.getId());
                            (0,_graphics_layer_utils__WEBPACK_IMPORTED_MODULE_14__.removeHighlightGraphics)(graphicsLayer, removedRecordIds);
                            debugLogger.log('RESULTS-MODE', {
                                event: 'remove-mode-manual-graphics-removal',
                                widgetId: props.widgetId,
                                graphicsCountBefore: graphicsCountBeforeRemoveMode,
                                graphicsCountAfter: ((_g = graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics) === null || _g === void 0 ? void 0 : _g.length) || 0,
                                removedRecordIdsCount: removedRecordIds.length,
                                removedRecordIds: removedRecordIds.slice(0, 10),
                                timestamp: Date.now()
                            });
                        }
                        // FIX (r018.86): DIAGNOSTIC - Graphics count AFTER removeRecordsFromOriginSelections
                        const graphicsCountAfterRemoveMode = ((_h = graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics) === null || _h === void 0 ? void 0 : _h.length) || 0;
                        const graphicsIdsAfterRemoveMode = ((_j = graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics) === null || _j === void 0 ? void 0 : _j.map(g => { var _a; return (_a = g.attributes) === null || _a === void 0 ? void 0 : _a.recordId; }).slice(0, 10)) || [];
                        debugLogger.log('RESULTS-MODE', {
                            event: 'remove-mode-AFTER-removeRecordsFromOriginSelections',
                            widgetId: props.widgetId,
                            graphicsCountBefore: graphicsCountBeforeRemoveMode,
                            graphicsCountAfter: graphicsCountAfterRemoveMode,
                            graphicsIdsAfter: graphicsIdsAfterRemoveMode,
                            graphicsChanged: graphicsCountAfterRemoveMode !== graphicsCountBeforeRemoveMode,
                            graphicsChangedBy: graphicsCountAfterRemoveMode - graphicsCountBeforeRemoveMode,
                            expected: 'Graphics SHOULD NOW be removed (r018.104 fix)',
                            timestamp: Date.now()
                        });
                        debugLogger.log('RESULTS-MODE', {
                            event: 'remove-mode-complete',
                            widgetId: props.widgetId,
                            existingAccumulatedRecordsCount: existingRecordsForMerge.length,
                            queryRecordsCount: result.records.length,
                            remainingRecordsCount: remainingRecords.length,
                            recordsRemoved: existingRecordsForMerge.length - remainingRecords.length,
                            outputDSId: outputDS.id,
                            widgetLevelRecordsUpdated: true,
                            originSelectionsUpdated: true
                        });
                        // If all records removed, auto-clear (consistent with user expectation)
                        if (remainingRecords.length === 0) {
                            debugLogger.log('RESULTS-MODE', {
                                event: 'remove-mode-all-records-removed',
                                widgetId: props.widgetId,
                                note: 'All accumulated records removed - auto-clearing'
                            });
                            // Clear widget-level accumulated records
                            if (onAccumulatedRecordsChange) {
                                onAccumulatedRecordsChange([]);
                            }
                        }
                    }
                    else {
                        // Query returned no results - nothing to remove
                        debugLogger.log('RESULTS-MODE', {
                            event: 'remove-mode-no-query-results',
                            widgetId: props.widgetId,
                            existingAccumulatedRecordsCount: existingRecordsForMerge.length,
                            note: 'Query returned no results - no records to remove'
                        });
                        // Keep existing accumulated records displayed
                        recordsToDisplay = existingRecordsForMerge;
                    }
                }
                catch (error) {
                    debugLogger.log('RESULTS-MODE', {
                        event: 'remove-mode-error',
                        widgetId: props.widgetId,
                        error: error instanceof Error ? error.message : 'Unknown error',
                        errorStack: error instanceof Error ? error.stack : undefined
                    });
                    // Fall back to showing query results on error
                    recordsToDisplay = result.records || [];
                }
            }
            else if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection) {
                // FIX (r018.97): For "New" mode, populate accumulatedRecords with query results
                // This ensures tab count updates correctly when records are removed in New mode
                if (onAccumulatedRecordsChange && recordsToDisplay && recordsToDisplay.length > 0) {
                    onAccumulatedRecordsChange(recordsToDisplay);
                    debugLogger.log('RESULTS-MODE', {
                        event: 'new-mode-populating-accumulated-records',
                        widgetId: props.widgetId,
                        recordsCount: recordsToDisplay.length,
                        note: 'r018.97: Populate accumulatedRecords in New mode for universal tab count',
                        timestamp: Date.now()
                    });
                }
                else if (onAccumulatedRecordsChange) {
                    // No results - clear accumulatedRecords
                    onAccumulatedRecordsChange([]);
                }
            }
            recordsRef.current = recordsToDisplay;
            // Reset selection flag for new query results
            hasSelectedRecordsRef.current = false;
            // Select records in the output DS
            // For "Add to" mode, select merged records
            // For "Remove from" mode, select remaining records (already updated via removeRecordsFromOriginSelections)
            // For "New" mode, select query results
            if (recordsToDisplay && recordsToDisplay.length > 0 && dsToUse) {
                const recordIdsToSelect = recordsToDisplay.map(record => record.getId());
                // For "Remove from" mode, selection was already updated via removeRecordsFromOriginSelections
                // But we still need to select in the outputDS for widget state consistency
                if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection) {
                    // Selection was already updated in origin DSs via removeRecordsFromOriginSelections
                    // Just update outputDS selection for widget state consistency
                    try {
                        if (typeof dsToUse.selectRecordsByIds === 'function') {
                            dsToUse.selectRecordsByIds(recordIdsToSelect, recordsToDisplay);
                        }
                        hasSelectedRecordsRef.current = true;
                        debugLogger.log('RESULTS-MODE', {
                            event: 'remove-mode-output-ds-selection-updated',
                            widgetId: props.widgetId,
                            recordCount: recordsToDisplay.length
                        });
                    }
                    catch (error) {
                        debugLogger.log('RESULTS-MODE', {
                            event: 'remove-mode-output-ds-selection-error',
                            widgetId: props.widgetId,
                            error: error instanceof Error ? error.message : 'Unknown error'
                        });
                    }
                }
                else {
                    // For "Add to" and "New" modes, select records normally
                    setSelectionError(null) // Clear previous errors
                    ;
                    (() => __awaiter(this, void 0, void 0, function* () {
                        try {
                            yield (0,_selection_utils__WEBPACK_IMPORTED_MODULE_18__.selectRecordsAndPublish)(props.widgetId, dsToUse, recordIdsToSelect, recordsToDisplay, false, useGraphicsLayerForHighlight, graphicsLayer, mapView);
                            hasSelectedRecordsRef.current = true; // Mark as selected
                            // Dispatch custom selection event so Widget state is updated immediately
                            // This is crucial for hash-based execution where QueryTask handles selection
                            (0,_selection_utils__WEBPACK_IMPORTED_MODULE_18__.dispatchSelectionEvent)(props.widgetId, recordIdsToSelect, dsToUse, queryItem.configId, eventManager);
                        }
                        catch (error) {
                            const errorMessage = error instanceof Error ? error.message : 'Failed to select query results';
                            setSelectionError(errorMessage);
                            debugLogger.log('TASK', {
                                event: 'selection-failed',
                                error: errorMessage,
                                errorStack: error instanceof Error ? error.stack : undefined,
                                recordCount: recordIdsToSelect.length
                            });
                        }
                    }))();
                }
            }
            else if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection && recordsToDisplay.length === 0) {
                // All records removed - clear selection
                ;
                (() => __awaiter(this, void 0, void 0, function* () {
                    try {
                        yield (0,_selection_utils__WEBPACK_IMPORTED_MODULE_18__.clearSelectionInDataSources)(props.widgetId, dsToUse, useGraphicsLayerForHighlight, graphicsLayer);
                        hasSelectedRecordsRef.current = false;
                        // Notify Widget that selection is cleared
                        (0,_selection_utils__WEBPACK_IMPORTED_MODULE_18__.dispatchSelectionEvent)(props.widgetId, [], dsToUse, queryItem.configId, eventManager);
                        debugLogger.log('RESULTS-MODE', {
                            event: 'remove-mode-all-records-removed-selection-cleared',
                            widgetId: props.widgetId
                        });
                    }
                    catch (error) {
                        debugLogger.log('RESULTS-MODE', {
                            event: 'remove-mode-clear-selection-error',
                            widgetId: props.widgetId,
                            error: error instanceof Error ? error.message : 'Unknown error'
                        });
                    }
                }))();
            }
            // Mark that query just executed BEFORE updating resultCount
            // This ensures the auto-switch useEffect sees queryJustExecutedRef.current === true
            queryJustExecutedRef.current = true;
            debugLogger.log('TASK', {
                event: 'query-executed-flag-set',
                widgetId: props.widgetId,
                queryItemConfigId: queryItem.configId,
                resultsMode,
                recordsToDisplayCount: recordsToDisplay.length,
                queryResultCount,
                timestamp: Date.now()
            });
            // Update result count FIRST (before any parent callbacks that might cause re-renders)
            // For "Add to" and "Remove from" modes, use accumulated/remaining count
            // For "New" mode, use query count
            const newResultCount = resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection || resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection
                ? recordsToDisplay.length
                : queryResultCount;
            setResultCount(newResultCount);
            // INSTANT UI FIX (The "Spinner Bypass"): 
            // Decouple the "Retrieving results..." spinner from asynchronous actions like zooming. 
            // By calling setStage(1) now, the user sees the result list immediately while 
            // the map animation continues in the background.
            setStage(1);
            debugLogger.log('TASK', {
                event: 'perf-processing-complete',
                widgetId: props.widgetId,
                processingDurationMs: Math.round(performance.now() - processingStartTime),
                totalChainDurationMs: Math.round(performance.now() - startTime),
                newResultCount,
                resultsMode,
                timestamp: Date.now()
            });
            // Zoom to records using shared zoom utility (consistent padding behavior)
            // Use runtime preference if provided, otherwise fall back to config setting (defaults to true)
            const shouldZoom = runtimeZoomToSelected !== undefined
                ? runtimeZoomToSelected
                : (queryItem.zoomToSelected !== false);
            // Use the output DS and merged records
            const recordsForZoom = recordsToDisplay || result.records;
            const dsForZoom = dsToUse || outputDS;
            if (recordsForZoom && recordsForZoom.length > 0 && dsForZoom && shouldZoom) {
                // BUG-GRAPHICS-001: Zoom operations fail when graphics layer is disabled
                if (!mapView && !useGraphicsLayerForHighlight) {
                    debugLogger.log('BUG', {
                        bugId: 'BUG-GRAPHICS-001',
                        category: 'GRAPHICS',
                        event: 'zoom-operation-failed-graphics-layer-disabled',
                        widgetId: props.widgetId,
                        operation: 'query-result-zoom',
                        recordsCount: recordsForZoom.length,
                        description: 'Zoom operation attempted but mapView is unavailable because useGraphicsLayerForHighlight is disabled',
                        workaround: 'Enable useGraphicsLayerForHighlight in widget settings',
                        targetResolution: 'r019.0'
                    });
                }
                try {
                    yield zoomToRecords(recordsForZoom);
                }
                catch (error) {
                    const errorMessage = error instanceof Error ? error.message : 'Failed to zoom to features';
                    setZoomError(errorMessage);
                    debugLogger.log('ZOOM', {
                        event: 'zoom-goTo-error-query',
                        error: errorMessage,
                        errorStack: error instanceof Error ? error.stack : undefined
                    });
                    if (true) {
                        console.error('Error executing zoomToRecords', error);
                    }
                }
            }
            // NOW call onHashParameterUsed AFTER all UI updates and zoom operations complete
            // This prevents the parent re-render from interrupting the promise chain
            // This prevents hash parameters from re-executing when switching queries
            if (initialInputValue && queryItem.shortId && onHashParameterUsed) {
                debugLogger.log('HASH-EXEC', {
                    event: 'querytask-calling-onhashparameterused',
                    widgetId: props.widgetId,
                    queryItemConfigId: props.queryItem.configId,
                    queryItemShortId: queryItem.shortId,
                    initialInputValue,
                    timestamp: Date.now()
                });
                debugLogger.log('TASK', {
                    event: 'hash-query-executed-notifying-parent',
                    widgetId: props.widgetId,
                    queryItemConfigId: queryItem.configId,
                    queryItemShortId: queryItem.shortId,
                    initialInputValue,
                    timestamp: Date.now()
                });
                onHashParameterUsed(queryItem.shortId);
                debugLogger.log('HASH-EXEC', {
                    event: 'querytask-onhashparameterused-called',
                    widgetId: props.widgetId,
                    queryItemConfigId: props.queryItem.configId,
                    queryItemShortId: queryItem.shortId,
                    timestamp: Date.now()
                });
                // Fire event to notify HelperSimple that hash query execution is complete
                // This allows HelperSimple to track which hash parameters have been executed
                // to prevent re-execution when switching queries
                const hashParam = `${queryItem.shortId}=${initialInputValue}`;
                const executedEvent = new CustomEvent(QUERYSIMPLE_HASH_QUERY_EXECUTED_EVENT, {
                    detail: {
                        widgetId: props.widgetId,
                        shortId: queryItem.shortId,
                        value: initialInputValue,
                        hashParam
                    },
                    bubbles: true,
                    cancelable: true
                });
                window.dispatchEvent(executedEvent);
                debugLogger.log('HASH-EXEC', {
                    event: 'querytask-hash-query-executed-event-dispatched',
                    widgetId: props.widgetId,
                    queryItemConfigId: queryItem.configId,
                    queryItemShortId: queryItem.shortId,
                    initialInputValue,
                    hashParam,
                    timestamp: Date.now()
                });
            }
            return Promise.resolve(true);
        }))
            .catch(error => {
            debugLogger.log('TASK', {
                event: 'query-chain-failed-diagnostic',
                widgetId: props.widgetId,
                error: error instanceof Error ? error.message : String(error),
                errorStack: error instanceof Error ? error.stack : undefined,
                timestamp: Date.now()
            });
            setStage(1); // Return to results or form stage even on error
        })
            .finally(() => {
            if ((spatialFilter === null || spatialFilter === void 0 ? void 0 : spatialFilter.layer) && (spatialFilter === null || spatialFilter === void 0 ? void 0 : spatialFilter.clearAfterApply)) {
                spatialFilter.layer.removeAll();
            }
            // setStage(1) // Removed from here; now called in the main chain before background actions
        });
    }), [currentItem, queryItem, props.widgetId, outputDS, publishDataClearedMsg, clearResult, resultsMode, accumulatedRecords, onAccumulatedRecordsChange, onClearGraphicsLayer, mapView, useGraphicsLayerForHighlight, zoomToRecords]);
    // Listen for hash value conversion event and execute pending query
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        const handleHashValueConverted = (event) => {
            var _a, _b, _c, _d, _e, _f, _g;
            debugLogger.log('TASK', {
                event: 'hash-value-converted-event-received',
                widgetId: props.widgetId,
                eventWidgetId: (_a = event.detail) === null || _a === void 0 ? void 0 : _a.widgetId,
                eventConfigId: (_b = event.detail) === null || _b === void 0 ? void 0 : _b.configId,
                matchesWidget: ((_c = event.detail) === null || _c === void 0 ? void 0 : _c.widgetId) === props.widgetId,
                hasPendingQuery: !!pendingHashQueryRef.current,
                timestamp: Date.now()
            });
            // Only process events for this widget
            if (((_d = event.detail) === null || _d === void 0 ? void 0 : _d.widgetId) !== props.widgetId) {
                debugLogger.log('TASK', {
                    event: 'hash-value-converted-event-ignored-wrong-widget',
                    widgetId: props.widgetId,
                    eventWidgetId: (_e = event.detail) === null || _e === void 0 ? void 0 : _e.widgetId,
                    timestamp: Date.now()
                });
                return;
            }
            if (pendingHashQueryRef.current) {
                debugLogger.log('TASK', {
                    event: 'hash-value-converted-executing-pending-query',
                    widgetId: props.widgetId,
                    configId: event.detail.configId,
                    initialInputValue: event.detail.initialInputValue,
                    timestamp: Date.now()
                });
                const { sqlExpr, spatialFilter, runtimeZoomToSelected } = pendingHashQueryRef.current;
                pendingHashQueryRef.current = null;
                // Execute the pending query now that value is converted
                // Use setTimeout to ensure this happens after the current event loop
                setTimeout(() => {
                    handleFormSubmitInternal(sqlExpr, spatialFilter, runtimeZoomToSelected);
                }, 0);
            }
            else {
                // Conversion happened before handleFormSubmit was called
                // applyQuery() is called directly from handleSqlExprObjChange in query-task-form.tsx
                debugLogger.log('TASK', {
                    event: 'hash-value-converted-event-received-no-pending-query',
                    widgetId: props.widgetId,
                    configId: (_f = event.detail) === null || _f === void 0 ? void 0 : _f.configId,
                    initialInputValue: (_g = event.detail) === null || _g === void 0 ? void 0 : _g.initialInputValue,
                    note: 'Conversion happened before handleFormSubmit - applyQuery() called directly from form component',
                    timestamp: Date.now()
                });
            }
        };
        document.addEventListener(QUERYSIMPLE_HASH_VALUE_CONVERTED_EVENT, handleHashValueConverted);
        return () => {
            document.removeEventListener(QUERYSIMPLE_HASH_VALUE_CONVERTED_EVENT, handleHashValueConverted);
        };
    }, [props.widgetId, handleFormSubmitInternal]);
    /**
     * Handles form submission when user clicks "Apply" button.
     * Checks if hash value needs conversion and waits for event if needed.
     *
     * @param sqlExpr - The SQL expression for attribute filtering
     * @param spatialFilter - The spatial filter object
     * @param runtimeZoomToSelected - Optional runtime override for zoom-to-selected behavior
     */
    const handleFormSubmit = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((sqlExpr, spatialFilter, runtimeZoomToSelected) => __awaiter(this, void 0, void 0, function* () {
        var _a, _b, _c;
        // LOG AT THE VERY START - before any checks
        debugLogger.log('TASK', {
            event: 'handleFormSubmit-called',
            widgetId: props.widgetId,
            sqlExprExists: !!sqlExpr,
            firstPartExists: !!((_a = sqlExpr === null || sqlExpr === void 0 ? void 0 : sqlExpr.parts) === null || _a === void 0 ? void 0 : _a[0]),
            timestamp: Date.now()
        });
        // Check if this is a hash-triggered query with unconverted value (string format)
        const firstPart = (_b = sqlExpr === null || sqlExpr === void 0 ? void 0 : sqlExpr.parts) === null || _b === void 0 ? void 0 : _b[0];
        const value = (firstPart === null || firstPart === void 0 ? void 0 : firstPart.type) === 'SINGLE' ? (_c = firstPart.valueOptions) === null || _c === void 0 ? void 0 : _c.value : null;
        const isStringValue = typeof value === 'string' && value.length > 0;
        const isArrayValue = Array.isArray(value) && value.length > 0;
        debugLogger.log('TASK', {
            event: 'handleFormSubmit-checking-conversion',
            widgetId: props.widgetId,
            initialInputValue,
            valueType: typeof value,
            isStringValue,
            isArrayValue,
            value: Array.isArray(value) ? value : value,
            willCheckWaitCondition: isStringValue && !isArrayValue && initialInputValue && value === initialInputValue,
            timestamp: Date.now()
        });
        // If value is string (not converted to array yet), wait for conversion event
        // This happens when hash value changes for same configId
        if (isStringValue && !isArrayValue && initialInputValue && value === initialInputValue) {
            debugLogger.log('TASK', {
                event: 'handleFormSubmit-waiting-for-conversion',
                widgetId: props.widgetId,
                currentValue: value,
                initialInputValue,
                timestamp: Date.now()
            });
            // Store pending query
            pendingHashQueryRef.current = {
                sqlExpr,
                spatialFilter,
                runtimeZoomToSelected
            };
            // Set a timeout to prevent infinite waiting (fallback after 2 seconds)
            setTimeout(() => {
                if (pendingHashQueryRef.current) {
                    debugLogger.log('TASK', {
                        event: 'handleFormSubmit-conversion-timeout-executing-anyway',
                        widgetId: props.widgetId,
                        timestamp: Date.now()
                    });
                    const { sqlExpr, spatialFilter, runtimeZoomToSelected } = pendingHashQueryRef.current;
                    pendingHashQueryRef.current = null;
                    // Execute anyway (fallback)
                    handleFormSubmitInternal(sqlExpr, spatialFilter, runtimeZoomToSelected);
                }
            }, 2000);
            return; // Exit early, will execute when event fires
        }
        debugLogger.log('TASK', {
            event: 'handleFormSubmit-executing-immediately',
            widgetId: props.widgetId,
            reason: isStringValue ? 'not-hash-triggered' : (isArrayValue ? 'already-converted' : 'no-value'),
            valueType: typeof value,
            isStringValue,
            isArrayValue,
            timestamp: Date.now()
        });
        // Value is already converted or not hash-triggered, execute immediately
        handleFormSubmitInternal(sqlExpr, spatialFilter, runtimeZoomToSelected);
    }), [props.widgetId, initialInputValue, handleFormSubmitInternal]);
    const { useAttributeFilter, sqlExprObj, useSpatialFilter, spatialFilterTypes, spatialIncludeRuntimeData, spatialRelationUseDataSources } = currentItem;
    const showAttributeFilter = useAttributeFilter && sqlExprObj != null;
    const showSpatialFilter = spatialFilterEnabled && useSpatialFilter && (spatialFilterTypes.length > 0 || spatialIncludeRuntimeData || (spatialRelationUseDataSources === null || spatialRelationUseDataSources === void 0 ? void 0 : spatialRelationUseDataSources.length) > 0);
    // DETECT SWITCH IN RENDER
    const isSwitchingQueries = previousConfigIdRef.current !== queryItem.configId;
    const isVirtualClearActive = isSwitchingQueries && resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection;
    // FIX (r018.97): Use accumulatedRecords as universal source of truth across ALL modes
    // This ensures tab count updates correctly when records are removed in ANY mode (New, Add, Remove)
    // accumulatedRecords is now synced in all modes (see query-result.tsx r018.97 fix)
    const isAccumulationMode = resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection ||
        resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection;
    // Use these "effective" values for the UI
    // Prefer accumulatedRecords when available (synced in all modes), fallback to recordsRef for initial query results
    const effectiveRecords = isVirtualClearActive ? [] :
        (accumulatedRecords && accumulatedRecords.length > 0) ? accumulatedRecords :
            (recordsRef.current || []);
    // FIX (r018.95): Use effectiveRecords.length to reflect real-time count updates when records are removed
    const effectiveResultCount = isVirtualClearActive ? 0 : effectiveRecords.length;
    // DIAGNOSTIC: Log when we're using accumulatedRecords vs raw records
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        if (effectiveRecords.length > 0 || effectiveResultCount > 0) {
            const usingAccumulated = accumulatedRecords && accumulatedRecords.length > 0;
            debugLogger.log('RESULTS-MODE', {
                event: 'effectiveRecords-calculation',
                widgetId: props.widgetId,
                resultsMode,
                isAccumulationMode,
                usingAccumulated,
                effectiveRecordsCount: effectiveRecords.length,
                effectiveResultCount,
                rawRecordsCount: ((_a = recordsRef.current) === null || _a === void 0 ? void 0 : _a.length) || 0,
                accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0,
                tabCountWillShow: effectiveResultCount,
                note: usingAccumulated ? 'r018.97: Using accumulatedRecords (universal source of truth)' : 'Using raw query records (initial load)',
                timestamp: Date.now()
            });
        }
    }, [effectiveRecords, effectiveResultCount, isAccumulationMode, accumulatedRecords, resultsMode, props.widgetId]);
    // Create a unique key for the current query result set to help E2E tests detect fresh data
    const resultQueryKey = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return `${queryItem.configId}_${Date.now()}`;
    }, [queryItem.configId, resultCount]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('query-task h-100', className, { wrapped: wrappedInPopper }), "data-result-query-key": resultQueryKey, css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
      ${style}
      position: relative;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceComponent, { useDataSource: useOutputDs, onDataSourceCreated: handleOutputDataSourceCreated, onDataSourceInfoChange: handleOutputDataSourceInfoChange }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tabs, { value: activeTab, onChange: (id) => handleTabChange(id), fill: true, type: 'underline', keepMount: true, css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
          flex: 1;
          display: flex;
          flex-direction: column;
          overflow: hidden;
          min-height: 0;
        `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tab, { id: 'query', title: getI18nMessage('queryTab'), children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('query-task__content', {
                                [jimu_ui__WEBPACK_IMPORTED_MODULE_2__.FOCUSABLE_CONTAINER_CLASS]: isInPopper && activeTab === 'query'
                            }), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              flex: 1;
              display: flex;
              flex-direction: column;
              overflow: hidden;
              min-height: 0;
              padding-top: 0 !important;
            `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('query-form__header mx-4 align-items-center', { 'in-popper': isInPopper }), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              display: flex;
              padding: 6px 0;
              padding-top: 8px;
              border-bottom: 1px solid var(--sys-color-divider-secondary);
              flex-shrink: 0;
            `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('nav-action align-items-center', { 'd-none': wrappedInPopper }), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                flex: 1 1 0;
                overflow: hidden;
                display: flex;
                align-items: center;
                gap: 4px;
                .jimu-btn {
                  min-width: 26px;
                }
              `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('p-0 mr-2', { 'd-none': total === 1 || !onNavBack }), size: 'sm', type: 'tertiary', icon: true, onClick: onNavBack, "aria-label": getI18nMessage('back'), ref: backBtnRef, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_directional_arrow_left__WEBPACK_IMPORTED_MODULE_16__.ArrowLeftOutlined, { autoFlip: true }) }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_label__WEBPACK_IMPORTED_MODULE_9__.QueryTaskLabel, { icon: icon, name: displayLabel ? name : '' }), (() => {
                                                    var _a;
                                                    if (!queryItems || queryItems.length <= 1)
                                                        return null;
                                                    // Get current query's origin data source ID
                                                    const currentOriginDSId = (_a = queryItem.useDataSource) === null || _a === void 0 ? void 0 : _a.dataSourceId;
                                                    if (!currentOriginDSId)
                                                        return null;
                                                    // Find all queries from the same origin data source that have shortIds
                                                    const sameLayerQueries = queryItems.filter(item => {
                                                        var _a;
                                                        return ((_a = item.useDataSource) === null || _a === void 0 ? void 0 : _a.dataSourceId) === currentOriginDSId &&
                                                            item.shortId &&
                                                            item.shortId.trim() !== '';
                                                    });
                                                    // Only show info button if there are queries with shortIds
                                                    if (sameLayerQueries.length === 0)
                                                        return null;
                                                    // Build tooltip content
                                                    const queryLines = sameLayerQueries.map(item => {
                                                        const queryName = getQueryDisplayName(item);
                                                        return `${queryName}: #${item.shortId}=value or ?${item.shortId}=value`;
                                                    });
                                                    const tooltipTitle = `This layer can be searched using the shortIds ${sameLayerQueries.map(q => q.shortId).join(' and ')} using #shortId=value or ?shortId=value in the URL.\n\n${queryLines.join('\n')}`;
                                                    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { placement: 'bottom', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `white-space: pre-line;`, title: tooltipTitle, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: 'sm', icon: true, type: 'tertiary', "aria-label": 'Hash parameter search information', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                          flex-shrink: 0;
                        `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_3__.InfoOutlined, { color: 'var(--sys-color-primary-main)', size: 's' }) }) }));
                                                })()] }), effectiveResultCount > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { title: getI18nMessage('clearResult'), placement: 'bottom', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { ref: clearResultBtnRef, size: 'sm', type: 'tertiary', "aria-label": getI18nMessage('clearResult'), icon: true, className: 'ml-auto py-0', onClick: () => { clearResult('user-trash-click'); }, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_editor_trash__WEBPACK_IMPORTED_MODULE_4__.TrashOutlined, {}) }) }))] }), (() => {
                                    // Only show dropdowns if multiple queries exist
                                    if (!queryItems || queryItems.length <= 1) {
                                        return null;
                                    }
                                    // Build flat list of all queries with their display info
                                    // For grouped queries, use group display name (only show once per group)
                                    const queryOptions = [];
                                    // Track which groups we've already added to avoid duplicates
                                    const addedGroups = new Set();
                                    queryItems.forEach((item, idx) => {
                                        var _a, _b, _c;
                                        if (item.groupId) {
                                            // For grouped queries, use group display name (only add once per group)
                                            if (!addedGroups.has(item.groupId)) {
                                                addedGroups.add(item.groupId);
                                                const groupDisplayName = ((_a = groups === null || groups === void 0 ? void 0 : groups[item.groupId]) === null || _a === void 0 ? void 0 : _a.displayName) ||
                                                    ((_c = (_b = groups === null || groups === void 0 ? void 0 : groups[item.groupId]) === null || _b === void 0 ? void 0 : _b.items[0]) === null || _c === void 0 ? void 0 : _c.name) ||
                                                    item.name ||
                                                    `Group ${item.groupId}`;
                                                queryOptions.push({
                                                    configId: item.configId,
                                                    displayName: groupDisplayName,
                                                    groupId: item.groupId,
                                                    index: idx
                                                });
                                            }
                                        }
                                        else {
                                            // Ungrouped query - use item.name for first dropdown (not searchAlias/jimuFieldName)
                                            queryOptions.push({
                                                configId: item.configId,
                                                displayName: item.name || getQueryDisplayName(item),
                                                groupId: null,
                                                index: idx
                                            });
                                        }
                                    });
                                    // Determine currently selected query
                                    const currentQueryItem = queryItem;
                                    const currentQueryGroupId = currentQueryItem.groupId || null;
                                    const isGroupedQuery = currentQueryGroupId !== null;
                                    // Find the option index for the current query
                                    const currentOptionIndex = queryOptions.findIndex(opt => {
                                        if (isGroupedQuery) {
                                            return opt.groupId === currentQueryGroupId;
                                        }
                                        else {
                                            return opt.configId === currentQueryItem.configId;
                                        }
                                    });
                                    debugLogger.log('GROUP', {
                                        event: 'rendering-dropdowns',
                                        totalQueries: queryItems.length,
                                        queryOptionsCount: queryOptions.length,
                                        currentQueryGroupId,
                                        isGroupedQuery,
                                        currentOptionIndex,
                                        selectedGroupId,
                                        selectedGroupQueryIndex,
                                        currentQueryConfigId: currentQueryItem.configId
                                    });
                                    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                    padding: 4px 16px;
                    flex-shrink: 0;
                  `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("label", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                      font-size: 0.875rem;
                      font-weight: 500;
                      color: var(--sys-color-text-primary);
                      margin-bottom: 4px;
                      display: block;
                    `, children: getI18nMessage('searchLayer') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Select, { size: "sm", value: currentOptionIndex >= 0 ? currentOptionIndex : 0, onChange: (e) => __awaiter(this, void 0, void 0, function* () {
                                                            var _a;
                                                            const optionIndex = parseInt(e.target.value);
                                                            const selectedOption = queryOptions[optionIndex];
                                                            debugLogger.log('GROUP', {
                                                                event: 'query-option-selected',
                                                                optionIndex,
                                                                selectedOption,
                                                                isGrouped: selectedOption.groupId !== null
                                                            });
                                                            // START CLEARING IMMEDIATELY IF SWITCHING
                                                            if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection) {
                                                                yield clearResult('dropdown-layer-switch-new-mode');
                                                            }
                                                            if (selectedOption.groupId) {
                                                                // Grouped query selected - set group and first query in group
                                                                if (onGroupChange) {
                                                                    onGroupChange(selectedOption.groupId);
                                                                }
                                                                if (onGroupQueryChange) {
                                                                    onGroupQueryChange(0);
                                                                }
                                                            }
                                                            else {
                                                                // Ungrouped query selected - clear group selection
                                                                if (onGroupChange) {
                                                                    onGroupChange(null);
                                                                }
                                                                if (onUngroupedChange) {
                                                                    // Find the ungrouped index
                                                                    const ungroupedIndex = (_a = ungrouped === null || ungrouped === void 0 ? void 0 : ungrouped.findIndex(({ item }) => item.configId === selectedOption.configId)) !== null && _a !== void 0 ? _a : -1;
                                                                    if (ungroupedIndex >= 0) {
                                                                        onUngroupedChange(ungroupedIndex);
                                                                    }
                                                                    else {
                                                                        // Fallback: use the index from queryItems
                                                                        debugLogger.log('GROUP', {
                                                                            event: 'ungrouped-fallback-to-index',
                                                                            selectedOptionIndex: selectedOption.index
                                                                        });
                                                                        if (onQueryChange) {
                                                                            onQueryChange(selectedOption.index);
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }), children: queryOptions.map((option, idx) => {
                                                            debugLogger.log('GROUP', {
                                                                event: 'rendering-query-option',
                                                                index: idx,
                                                                configId: option.configId,
                                                                displayName: option.displayName,
                                                                groupId: option.groupId
                                                            });
                                                            return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: idx, children: option.displayName }, option.configId));
                                                        }) })] }), isGroupedQuery && currentQueryGroupId && groups && groups[currentQueryGroupId] && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                      padding: 4px 16px;
                      flex-shrink: 0;
                    `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("label", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                        font-size: 0.875rem;
                        font-weight: 500;
                        color: var(--sys-color-text-primary);
                        margin-bottom: 4px;
                        display: block;
                      `, children: "Search Alias" }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Select, { size: "sm", value: selectedGroupQueryIndex !== undefined ? selectedGroupQueryIndex : 0, onChange: (e) => __awaiter(this, void 0, void 0, function* () {
                                                            var _a;
                                                            const newIndex = parseInt(e.target.value);
                                                            debugLogger.log('GROUP', {
                                                                event: 'group-query-selected',
                                                                groupId: currentQueryGroupId,
                                                                groupQueryIndex: newIndex,
                                                                queryItemConfigId: (_a = groups[currentQueryGroupId].items[newIndex]) === null || _a === void 0 ? void 0 : _a.configId,
                                                                queryDisplayName: getQueryDisplayName(groups[currentQueryGroupId].items[newIndex])
                                                            });
                                                            // START CLEARING IMMEDIATELY IF SWITCHING
                                                            if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection) {
                                                                yield clearResult('dropdown-alias-switch-new-mode');
                                                            }
                                                            if (onGroupQueryChange) {
                                                                onGroupQueryChange(newIndex);
                                                            }
                                                        }), children: groups[currentQueryGroupId].items.map((item, idx) => ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: idx, children: getQueryDisplayName(item) }, item.configId))) })] }))] }));
                                })(), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                    padding: 8px 16px;
                    flex-shrink: 0;
                  `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "d-flex align-items-center", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                      gap: 0.5rem;
                      flex-wrap: nowrap;
                    `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "title2", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                        font-size: 0.875rem;
                        font-weight: 500;
                        color: var(--sys-color-text-primary);
                        white-space: nowrap;
                        flex-shrink: 0;
                      `, children: [getI18nMessage('results'), ":"] }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { placement: 'bottom', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `white-space: pre-line;`, title: getI18nMessage('resultsModeDesc'), children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: 'sm', icon: true, type: 'tertiary', "aria-label": getI18nMessage('resultsModeDesc'), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `flex-shrink: 0;`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_3__.InfoOutlined, { color: 'var(--sys-color-primary-main)', size: 's' }) }) }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { role: "radiogroup", "aria-label": getI18nMessage('resultsMode'), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                          display: flex;
                          gap: 4px;
                          align-items: stretch;
                          flex: 1;
                          min-width: 0;
                        `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: "sm", variant: resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection ? 'contained' : 'outlined', color: resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection ? 'primary' : 'default', onClick: () => {
                                                                const newMode = _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection;
                                                                debugLogger.log('RESULTS-MODE', {
                                                                    event: 'button-mode-changed',
                                                                    widgetId: props.widgetId,
                                                                    queryItemConfigId: queryItem.configId,
                                                                    previousMode: resultsMode || _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection,
                                                                    newMode,
                                                                    timestamp: new Date().toISOString()
                                                                });
                                                                if (onResultsModeChange) {
                                                                    onResultsModeChange(newMode);
                                                                }
                                                            }, "aria-pressed": resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection, "aria-label": `${getI18nMessage('createNewResults')}: ${((_b = getI18nMessage('resultsModeDesc').split('\n')[1]) === null || _b === void 0 ? void 0 : _b.trim()) || ''}`, title: getI18nMessage('createNewResults'), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                          flex: 1;
                          font-size: 0.75rem;
                          padding: 4px 8px;
                          min-height: 28px;
                          white-space: nowrap;
                          text-overflow: ellipsis;
                          overflow: hidden;
                        `, children: getI18nMessage('resultsModeNew') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: "sm", variant: resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection ? 'contained' : 'outlined', color: resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection ? 'primary' : 'default', onClick: () => {
                                                                const newMode = _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection;
                                                                const previousMode = resultsMode || _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection;
                                                                debugLogger.log('RESULTS-MODE', {
                                                                    event: 'button-mode-changed',
                                                                    widgetId: props.widgetId,
                                                                    queryItemConfigId: queryItem.configId,
                                                                    previousMode,
                                                                    newMode,
                                                                    timestamp: new Date().toISOString()
                                                                });
                                                                // If switching FROM "New" TO "Add to" mode and we have current results,
                                                                // merge them with existing accumulated records before changing mode
                                                                //
                                                                // SOURCE OF TRUTH ARCHITECTURE (r018.65):
                                                                // - outputDS.getSelectedRecords() is the SINGLE SOURCE OF TRUTH for current selection
                                                                //   It correctly filters out removed records and stays in sync with user actions
                                                                // - effectiveRecords (from recordsRef.current) contains stale query results that may
                                                                //   include removed records, so it should only be used as a fallback when outputDS
                                                                //   has no selection (e.g., during query execution before selection is applied)
                                                                // - This ensures removed records are never accidentally included in accumulatedRecords
                                                                // DEBUG: Log state before capture to verify assumptions
                                                                const effectiveRecordsCount = (effectiveRecords === null || effectiveRecords === void 0 ? void 0 : effectiveRecords.length) || 0;
                                                                const outputDSSelectedRecords = (outputDS === null || outputDS === void 0 ? void 0 : outputDS.getSelectedRecords()) || [];
                                                                const outputDSSelectedCount = outputDSSelectedRecords.length;
                                                                const accumulatedRecordsCount = (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0;
                                                                debugLogger.log('RESULTS-MODE', {
                                                                    event: 'mode-switch-debug-before-capture',
                                                                    widgetId: props.widgetId,
                                                                    previousMode,
                                                                    newMode,
                                                                    effectiveRecordsCount,
                                                                    outputDSSelectedCount,
                                                                    accumulatedRecordsCount,
                                                                    outputDSId: outputDS === null || outputDS === void 0 ? void 0 : outputDS.id,
                                                                    hasEffectiveRecords: effectiveRecords && effectiveRecords.length > 0,
                                                                    hasOutputDSSelected: outputDSSelectedRecords.length > 0,
                                                                    timestamp: Date.now()
                                                                });
                                                                // FIX (r018.65): Use outputDS.getSelectedRecords() as source of truth for mode switching
                                                                // This correctly filters out removed records, unlike effectiveRecords which contains stale data
                                                                // outputDS.getSelectedRecords() is the single source of truth that stays in sync with removals
                                                                const recordsToCapture = outputDSSelectedRecords.length > 0
                                                                    ? outputDSSelectedRecords
                                                                    : (effectiveRecords && effectiveRecords.length > 0
                                                                        ? effectiveRecords
                                                                        : []);
                                                                // DEBUG: Log which source was used
                                                                debugLogger.log('RESULTS-MODE', {
                                                                    event: 'mode-switch-debug-after-capture',
                                                                    widgetId: props.widgetId,
                                                                    recordsToCaptureCount: recordsToCapture.length,
                                                                    source: outputDSSelectedRecords.length > 0 ? 'outputDS.getSelectedRecords()' : (effectiveRecords && effectiveRecords.length > 0 ? 'effectiveRecords' : 'none'),
                                                                    effectiveRecordsCount,
                                                                    outputDSSelectedCount,
                                                                    timestamp: Date.now()
                                                                });
                                                                // DIAGNOSTIC: Check each condition individually (r018.78)
                                                                const conditionCheck = {
                                                                    previousModeIsNew: previousMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection,
                                                                    newModeIsAdd: newMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection,
                                                                    hasRecordsToCapture: recordsToCapture.length > 0,
                                                                    hasOutputDS: !!outputDS,
                                                                    hasOnAccumulatedRecordsChange: !!onAccumulatedRecordsChange,
                                                                    previousMode: previousMode,
                                                                    newMode: newMode,
                                                                    recordsToCaptureLength: recordsToCapture.length
                                                                };
                                                                debugLogger.log('RESULTS-MODE', {
                                                                    event: 'mode-switch-condition-check',
                                                                    widgetId: props.widgetId,
                                                                    conditions: conditionCheck,
                                                                    allConditionsMet: conditionCheck.previousModeIsNew &&
                                                                        conditionCheck.newModeIsAdd &&
                                                                        conditionCheck.hasRecordsToCapture &&
                                                                        conditionCheck.hasOutputDS &&
                                                                        conditionCheck.hasOnAccumulatedRecordsChange,
                                                                    timestamp: Date.now()
                                                                });
                                                                if (previousMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection &&
                                                                    newMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection &&
                                                                    recordsToCapture.length > 0 &&
                                                                    outputDS &&
                                                                    onAccumulatedRecordsChange) {
                                                                    const existingAccumulated = accumulatedRecords || [];
                                                                    // Merge current results with existing accumulated records
                                                                    const mergedRecords = (0,_results_management_utils__WEBPACK_IMPORTED_MODULE_13__.mergeResultsIntoAccumulated)(outputDS, recordsToCapture, existingAccumulated);
                                                                    const existingIds = existingAccumulated.map(r => r.getId());
                                                                    const capturedIds = recordsToCapture.map(r => r.getId());
                                                                    const mergedIds = mergedRecords.map(r => r.getId());
                                                                    const addedIds = mergedIds.filter(id => !existingIds.includes(id));
                                                                    const duplicateIds = capturedIds.filter(id => existingIds.includes(id));
                                                                    debugLogger.log('RESULTS-MODE', {
                                                                        event: 'capturing-current-results-on-mode-switch',
                                                                        widgetId: props.widgetId,
                                                                        previousMode,
                                                                        newMode,
                                                                        capturedRecordsCount: recordsToCapture.length,
                                                                        capturedIds: capturedIds,
                                                                        effectiveRecordsCount,
                                                                        outputDSSelectedCount,
                                                                        existingAccumulatedCount: existingAccumulated.length,
                                                                        existingIds: existingIds,
                                                                        mergedRecordsCount: mergedRecords.length,
                                                                        mergedIds: mergedIds,
                                                                        addedIds: addedIds,
                                                                        duplicateIds: duplicateIds,
                                                                        duplicatesFiltered: duplicateIds.length,
                                                                        sourceUsed: outputDSSelectedRecords.length > 0 ? 'outputDS.getSelectedRecords()' : (effectiveRecords && effectiveRecords.length > 0 ? 'effectiveRecords' : 'none'),
                                                                        note: 'outputDS.getSelectedRecords()-is-source-of-truth-filters-removed-records'
                                                                    });
                                                                    onAccumulatedRecordsChange(mergedRecords);
                                                                }
                                                                else {
                                                                    debugLogger.log('RESULTS-MODE', {
                                                                        event: 'mode-switch-merge-skipped',
                                                                        widgetId: props.widgetId,
                                                                        reason: 'condition-check-failed',
                                                                        conditions: conditionCheck,
                                                                        timestamp: Date.now()
                                                                    });
                                                                }
                                                                if (onResultsModeChange) {
                                                                    onResultsModeChange(newMode);
                                                                }
                                                            }, "aria-pressed": resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection, "aria-label": `${getI18nMessage('addToCurrentResults')}: ${((_c = getI18nMessage('resultsModeDesc').split('\n')[2]) === null || _c === void 0 ? void 0 : _c.trim()) || ''}`, title: getI18nMessage('addToCurrentResults'), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                          flex: 1;
                          font-size: 0.75rem;
                          padding: 4px 8px;
                          min-height: 28px;
                          white-space: nowrap;
                          text-overflow: ellipsis;
                          overflow: hidden;
                        `, children: getI18nMessage('resultsModeAdd') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: "sm", variant: resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection ? 'contained' : 'outlined', color: resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection ? 'primary' : 'default', disabled: !accumulatedRecords || accumulatedRecords.length === 0, onClick: () => {
                                                                const newMode = _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection;
                                                                const previousMode = resultsMode || _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection;
                                                                debugLogger.log('RESULTS-MODE', {
                                                                    event: 'button-mode-changed',
                                                                    widgetId: props.widgetId,
                                                                    queryItemConfigId: queryItem.configId,
                                                                    previousMode,
                                                                    newMode,
                                                                    accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0,
                                                                    timestamp: new Date().toISOString()
                                                                });
                                                                // If switching FROM "New" TO "Remove from" mode and we have current results,
                                                                // merge them with existing accumulated records before changing mode
                                                                // (same pattern as "Add to" mode)
                                                                //
                                                                // SOURCE OF TRUTH ARCHITECTURE (r018.65):
                                                                // - outputDS.getSelectedRecords() is the SINGLE SOURCE OF TRUTH for current selection
                                                                //   It correctly filters out removed records and stays in sync with user actions
                                                                // - effectiveRecords (from recordsRef.current) contains stale query results that may
                                                                //   include removed records, so it should only be used as a fallback when outputDS
                                                                //   has no selection (e.g., during query execution before selection is applied)
                                                                // - This ensures removed records are never accidentally included in accumulatedRecords
                                                                // DEBUG: Log state before capture to verify assumptions
                                                                const effectiveRecordsCountForRemove = (effectiveRecords === null || effectiveRecords === void 0 ? void 0 : effectiveRecords.length) || 0;
                                                                const outputDSSelectedRecordsForRemove = (outputDS === null || outputDS === void 0 ? void 0 : outputDS.getSelectedRecords()) || [];
                                                                const outputDSSelectedCountForRemove = outputDSSelectedRecordsForRemove.length;
                                                                const accumulatedRecordsCountForRemove = (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0;
                                                                debugLogger.log('RESULTS-MODE', {
                                                                    event: 'mode-switch-debug-before-capture-remove',
                                                                    widgetId: props.widgetId,
                                                                    previousMode,
                                                                    newMode,
                                                                    effectiveRecordsCount: effectiveRecordsCountForRemove,
                                                                    outputDSSelectedCount: outputDSSelectedCountForRemove,
                                                                    accumulatedRecordsCount: accumulatedRecordsCountForRemove,
                                                                    outputDSId: outputDS === null || outputDS === void 0 ? void 0 : outputDS.id,
                                                                    hasEffectiveRecords: effectiveRecords && effectiveRecords.length > 0,
                                                                    hasOutputDSSelected: outputDSSelectedRecordsForRemove.length > 0,
                                                                    timestamp: Date.now()
                                                                });
                                                                // FIX (r018.65): Use outputDS.getSelectedRecords() as source of truth for mode switching
                                                                // This correctly filters out removed records, unlike effectiveRecords which contains stale data
                                                                // outputDS.getSelectedRecords() is the single source of truth that stays in sync with removals
                                                                const recordsToCaptureForRemove = outputDSSelectedRecordsForRemove.length > 0
                                                                    ? outputDSSelectedRecordsForRemove
                                                                    : (effectiveRecords && effectiveRecords.length > 0
                                                                        ? effectiveRecords
                                                                        : []);
                                                                // DEBUG: Log which source was used
                                                                debugLogger.log('RESULTS-MODE', {
                                                                    event: 'mode-switch-debug-after-capture-remove',
                                                                    widgetId: props.widgetId,
                                                                    recordsToCaptureCount: recordsToCaptureForRemove.length,
                                                                    source: outputDSSelectedRecordsForRemove.length > 0 ? 'outputDS.getSelectedRecords()' : (effectiveRecords && effectiveRecords.length > 0 ? 'effectiveRecords' : 'none'),
                                                                    effectiveRecordsCount: effectiveRecordsCountForRemove,
                                                                    outputDSSelectedCount: outputDSSelectedCountForRemove,
                                                                    timestamp: Date.now()
                                                                });
                                                                // DIAGNOSTIC: Check each condition individually (r018.78)
                                                                const conditionCheckRemove = {
                                                                    previousModeIsNew: previousMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection,
                                                                    newModeIsRemove: newMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection,
                                                                    hasRecordsToCapture: recordsToCaptureForRemove.length > 0,
                                                                    hasOutputDS: !!outputDS,
                                                                    hasOnAccumulatedRecordsChange: !!onAccumulatedRecordsChange,
                                                                    previousMode: previousMode,
                                                                    newMode: newMode,
                                                                    recordsToCaptureLength: recordsToCaptureForRemove.length
                                                                };
                                                                debugLogger.log('RESULTS-MODE', {
                                                                    event: 'mode-switch-condition-check-remove',
                                                                    widgetId: props.widgetId,
                                                                    conditions: conditionCheckRemove,
                                                                    allConditionsMet: conditionCheckRemove.previousModeIsNew &&
                                                                        conditionCheckRemove.newModeIsRemove &&
                                                                        conditionCheckRemove.hasRecordsToCapture &&
                                                                        conditionCheckRemove.hasOutputDS &&
                                                                        conditionCheckRemove.hasOnAccumulatedRecordsChange,
                                                                    timestamp: Date.now()
                                                                });
                                                                if (previousMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection &&
                                                                    newMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection &&
                                                                    recordsToCaptureForRemove.length > 0 &&
                                                                    outputDS &&
                                                                    onAccumulatedRecordsChange) {
                                                                    const existingAccumulated = accumulatedRecords || [];
                                                                    // Merge current results with existing accumulated records
                                                                    const mergedRecords = (0,_results_management_utils__WEBPACK_IMPORTED_MODULE_13__.mergeResultsIntoAccumulated)(outputDS, recordsToCaptureForRemove, existingAccumulated);
                                                                    debugLogger.log('RESULTS-MODE', {
                                                                        event: 'capturing-current-results-on-mode-switch-to-remove',
                                                                        widgetId: props.widgetId,
                                                                        previousMode,
                                                                        newMode,
                                                                        capturedRecordsCount: recordsToCaptureForRemove.length,
                                                                        effectiveRecordsCount: effectiveRecordsCountForRemove,
                                                                        outputDSSelectedCount: outputDSSelectedCountForRemove,
                                                                        existingAccumulatedCount: existingAccumulated.length,
                                                                        mergedRecordsCount: mergedRecords.length,
                                                                        sourceUsed: outputDSSelectedRecordsForRemove.length > 0 ? 'outputDS.getSelectedRecords()' : (effectiveRecords && effectiveRecords.length > 0 ? 'effectiveRecords' : 'none'),
                                                                        note: 'outputDS.getSelectedRecords()-is-source-of-truth-filters-removed-records'
                                                                    });
                                                                    onAccumulatedRecordsChange(mergedRecords);
                                                                }
                                                                else {
                                                                    debugLogger.log('RESULTS-MODE', {
                                                                        event: 'mode-switch-merge-skipped-remove',
                                                                        widgetId: props.widgetId,
                                                                        reason: 'condition-check-failed',
                                                                        conditions: conditionCheckRemove,
                                                                        timestamp: Date.now()
                                                                    });
                                                                }
                                                                if (onResultsModeChange) {
                                                                    onResultsModeChange(newMode);
                                                                }
                                                            }, "aria-pressed": resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection, "aria-label": `${getI18nMessage('removeFromCurrentResults')}: ${((_d = getI18nMessage('resultsModeDesc').split('\n')[3]) === null || _d === void 0 ? void 0 : _d.trim()) || ''}`, title: (!accumulatedRecords || accumulatedRecords.length === 0)
                                                                ? getI18nMessage('resultsModeDisabledRemove')
                                                                : getI18nMessage('removeFromCurrentResults'), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                          flex: 1;
                          font-size: 0.75rem;
                          padding: 4px 8px;
                          min-height: 28px;
                          white-space: nowrap;
                          text-overflow: ellipsis;
                          overflow: hidden;
                        `, children: getI18nMessage('resultsModeRemove') })] })] }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { id: `results-mode-description-${props.widgetId}`, className: "sr-only", "aria-live": "polite", role: "status", children: resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection
                                                ? getI18nMessage('createNewResults')
                                                : resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection
                                                    ? getI18nMessage('addToCurrentResults')
                                                    : getI18nMessage('removeFromCurrentResults') })] }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              flex: 1;
              display: flex;
              flex-direction: column;
              overflow: hidden;
              min-height: 0;
            `, children: [enabled && dsExists && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                  flex: 1;
                  display: flex;
                  flex-direction: column;
                  min-height: 0;
                  overflow: hidden;
                `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_form__WEBPACK_IMPORTED_MODULE_6__.QueryTaskForm, Object.assign({}, otherProps, { configId: queryItem.configId, outputDS: outputDS, datasourceReady: dataSource != null, spatialFilterEnabled: spatialFilterEnabled, dataActionFilter: dataActionFilter, onFormSubmit: handleFormSubmit, initialInputValue: initialInputValue, onHashParameterUsed: onHashParameterUsed, queryItemShortId: queryItem.shortId, activeTab: activeTab, onTabChange: setActiveTab }), queryItem.configId) })), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_8__.DataSourceTip, { widgetId: props.widgetId, useDataSource: queryItem.useDataSource, showMessage: true, onStatusChange: handleStatusChange, onDataSourceCreated: handleDataSourceCreated })] })] }) }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tab, { id: 'results', title: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { children: [getI18nMessage('resultsTab'), effectiveResultCount > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                  margin-left: 6px;
                  font-size: 0.75rem;
                  opacity: 0.7;
                `, children: ["(", effectiveResultCount, ")"] }))] }), disabled: effectiveResultCount === 0, children: effectiveResultCount > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('query-task__content', {
                                [jimu_ui__WEBPACK_IMPORTED_MODULE_2__.FOCUSABLE_CONTAINER_CLASS]: isInPopper && activeTab === 'results'
                            }), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                flex: 1;
                display: flex;
                flex-direction: column;
                min-height: 0;
                height: 100%;
                padding-top: 0 !important;
              `, onClick: (e) => {
                                // Prevent clicks from bubbling up when Results tab is active
                                if (activeTab === 'results') {
                                    e.stopPropagation();
                                }
                            }, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_result__WEBPACK_IMPORTED_MODULE_7__.QueryTaskResult, { widgetId: props.widgetId, queryItem: queryItem, queryParams: queryParamRef.current, resultCount: effectiveResultCount, maxPerPage: (_e = dataSource === null || dataSource === void 0 ? void 0 : dataSource.getMaxRecordCount) === null || _e === void 0 ? void 0 : _e.call(dataSource), records: effectiveRecords, outputDS: outputDS, runtimeZoomToSelected: lastRuntimeZoomToSelectedRef.current, resultsMode: resultsMode, useGraphicsLayerForHighlight: useGraphicsLayerForHighlight, graphicsLayer: graphicsLayer, mapView: mapView, accumulatedRecords: accumulatedRecords, onAccumulatedRecordsChange: onAccumulatedRecordsChange, eventManager: eventManager, isQuerySwitchInProgressRef: isQuerySwitchInProgressRef, onNavBack: (...args_1) => __awaiter(this, [...args_1], void 0, function* (clearResults = false) {
                                    // Handle navigation from QueryTaskResult
                                    // If clearResults is true, clear everything and go to query tab
                                    // If false, just switch to query tab without clearing
                                    if (clearResults) {
                                        hasSelectedRecordsRef.current = false; // Reset flag when clearing
                                        yield navToForm(true);
                                    }
                                    else {
                                        // Just switch tabs, don't clear results
                                        // Mark as manual switch to prevent auto-switch useEffect from interfering
                                        manualTabSwitchRef.current = true;
                                        setActiveTab('query');
                                        // Reset the flag after a short delay
                                        setTimeout(() => {
                                            manualTabSwitchRef.current = false;
                                        }, 100);
                                    }
                                }) }, `${queryItem.configId}-${queryExecutionKeyRef.current}`) })) })] }), (selectionError || zoomError) && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
          padding: 0 16px;
          margin-top: 8px;
        `, children: [selectionError && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_8__.ErrorMessage, { error: selectionError, onDismiss: () => setSelectionError(null) })), zoomError && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_8__.ErrorMessage, { error: zoomError, onDismiss: () => setZoomError(null) }))] })), stage === 2 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          z-index: 1000;
          background-color: rgba(255, 255, 255, 0.8);
          display: flex;
          align-items: center;
          justify-content: center;
        `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_loading_result__WEBPACK_IMPORTED_MODULE_17__.LoadingResult, {}) }))] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-utils.ts":
/*!*************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-utils.ts ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   combineFields: () => (/* binding */ combineFields),
/* harmony export */   executeCountQuery: () => (/* binding */ executeCountQuery),
/* harmony export */   executeQuery: () => (/* binding */ executeQuery),
/* harmony export */   generateQueryParams: () => (/* binding */ generateQueryParams),
/* harmony export */   getPopupTemplate: () => (/* binding */ getPopupTemplate),
/* harmony export */   isQueryInputValid: () => (/* binding */ isQueryInputValid),
/* harmony export */   sanitizeQueryInput: () => (/* binding */ sanitizeQueryInput),
/* harmony export */   sanitizeSqlExpression: () => (/* binding */ sanitizeSqlExpression)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _shared_code_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../shared-code/common */ "./your-extensions/widgets/shared-code/common.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



const debugLogger = (0,_shared_code_common__WEBPACK_IMPORTED_MODULE_2__.createQuerySimpleDebugLogger)();
function combineFields(resultDisplayFields, resultTitleExpression, idField) {
    const fields = new Set();
    resultDisplayFields === null || resultDisplayFields === void 0 ? void 0 : resultDisplayFields.forEach(item => fields.add(item));
    if (resultTitleExpression) {
        const templates = resultTitleExpression.match(/\{\w*\}/g);
        if ((templates === null || templates === void 0 ? void 0 : templates.length) > 0) {
            templates.forEach(item => fields.add(item.substring(1, item.length - 1)));
        }
    }
    if (idField) {
        fields.add(idField);
    }
    return Array.from(fields);
}
/**
 * Validates user input before query execution.
 * @param input - The raw user input (string, number, etc.)
 * @param isList - Optional flag indicating if the input is from a list/selector (lenient validation)
 * @returns boolean - true if input is valid, false otherwise
 */
function isQueryInputValid(input, isList = false) {
    // If it's a list-based selection (Unique Values, Field Values), 
    // we allow empty/null as it might represent "no filter" or the user 
    // intends to interact with the list.
    if (isList) {
        return true;
    }
    if (input === null || input === undefined) {
        return false;
    }
    // If it's a string, ensure it's not empty or just whitespace
    if (typeof input === 'string') {
        return input.trim() !== '';
    }
    // If it's an array (often used in unique values or multiple selection)
    if (Array.isArray(input)) {
        if (input.length === 0)
            return false;
        // Check if the first item is valid (usually {value: '...', label: '...'})
        const firstItem = input[0];
        if (firstItem && typeof firstItem === 'object' && 'value' in firstItem) {
            return isQueryInputValid(firstItem.value);
        }
        return true;
    }
    // If it's a jimu-core Immutable array
    if (input.asMutable && typeof input.toArray === 'function') {
        const arr = input.toArray();
        if (arr.length === 0)
            return false;
        const firstItem = arr[0];
        if (firstItem && typeof firstItem === 'object' && 'value' in firstItem) {
            return isQueryInputValid(firstItem.value);
        }
        return true;
    }
    // For other types (numbers, dates), if it exists, we count it as valid
    return true;
}
/**
 * Sanitizes user input for query tasks.
 * 1. Strips leading and trailing whitespace.
 * 2. Prevents basic SQL injection by escaping single quotes.
 * 3. Handles empty or whitespace-only strings.
 *
 * @param input - The raw user input string
 * @returns Sanitized string or null if input is empty
 */
function sanitizeQueryInput(input) {
    if (!input || typeof input !== 'string') {
        return null;
    }
    const trimmed = input.trim();
    if (trimmed === '') {
        return null;
    }
    // Basic SQL escaping: replace single quotes with double single quotes
    return trimmed.replace(/'/g, "''");
}
/**
 * Sanitizes all values within an IMSqlExpression object.
 *
 * @param sqlExpr - The raw SQL expression object
 * @returns A new sanitized IMSqlExpression object
 */
function sanitizeSqlExpression(sqlExpr) {
    if (!sqlExpr || !sqlExpr.parts) {
        return sqlExpr;
    }
    let sanitizedExpr = sqlExpr;
    sqlExpr.parts.forEach((part, index) => {
        var _a;
        if (part.type === 'SINGLE' && ((_a = part.valueOptions) === null || _a === void 0 ? void 0 : _a.value) !== undefined) {
            const rawValue = part.valueOptions.value;
            // CASE 1: Simple String
            if (typeof rawValue === 'string') {
                const sanitizedValue = sanitizeQueryInput(rawValue);
                if (sanitizedValue !== rawValue) {
                    sanitizedExpr = sanitizedExpr.setIn(['parts', index, 'valueOptions', 'value'], sanitizedValue);
                }
            }
            // CASE 2: Array of objects (Unique Values / Dropdowns)
            // We must preserve the Immutable structure to avoid "asMutable" errors
            else if (Array.isArray(rawValue) || (rawValue && typeof rawValue.toArray === 'function')) {
                const isImmutable = typeof rawValue.toArray === 'function';
                const arr = isImmutable ? rawValue.toArray() : rawValue;
                let changed = false;
                const sanitizedArr = arr.map(item => {
                    if (item && typeof item === 'object' && 'value' in item && typeof item.value === 'string') {
                        const sanitizedVal = sanitizeQueryInput(item.value);
                        if (sanitizedVal !== item.value) {
                            changed = true;
                            return Object.assign(Object.assign({}, item), { value: sanitizedVal });
                        }
                    }
                    return item;
                });
                if (changed) {
                    // If it was Immutable, we should ideally use Immutable methods to update,
                    // but setIn on the top-level expression with a plain array/object 
                    // usually triggers the framework's auto-conversion.
                    sanitizedExpr = sanitizedExpr.setIn(['parts', index, 'valueOptions', 'value'], sanitizedArr);
                }
            }
        }
    });
    return sanitizedExpr;
}
function getPopupTemplate(outputDS, queryItem) {
    return __awaiter(this, void 0, void 0, function* () {
        var _a;
        const { resultFieldsType, resultDisplayFields, resultTitleExpression = '' } = queryItem;
        const currentOriginDs = outputDS.getOriginDataSources()[0];
        const popupInfo = currentOriginDs.getPopupInfo();
        if (resultFieldsType === _config__WEBPACK_IMPORTED_MODULE_1__.FieldsType.SelectAttributes) {
            let fields;
            if (resultDisplayFields == null) {
                const fieldsInContent = (0,_shared_code_common__WEBPACK_IMPORTED_MODULE_2__.getFieldInfosInPopupContent)(popupInfo);
                if (fieldsInContent.length > 0) {
                    const uniqueFields = new Set(fieldsInContent.map(ele => ele.fieldName));
                    fields = Array.from(uniqueFields);
                }
                else {
                    // return all fields by default
                    const allFieldsSchema = outputDS.getSchema();
                    fields = (allFieldsSchema === null || allFieldsSchema === void 0 ? void 0 : allFieldsSchema.fields) ? Object.values(allFieldsSchema.fields).map(field => field.jimuName) : [];
                }
            }
            else {
                fields = resultDisplayFields.asMutable({ deep: true });
            }
            if (popupInfo) {
                const fieldInfos = [];
                fields.forEach(field => {
                    const fieldInfo = popupInfo.fieldInfos.find(fieldInfo => fieldInfo.fieldName === field);
                    if (fieldInfo) {
                        fieldInfo.visible = true;
                        fieldInfos.push(fieldInfo);
                    }
                    else {
                        fieldInfos.push({
                            fieldName: field,
                            label: field
                        });
                    }
                });
                return {
                    popupTemplate: {
                        fieldInfos,
                        content: [{
                                type: 'fields'
                            }],
                        title: resultTitleExpression
                    }
                };
            }
            return {
                popupTemplate: {
                    fieldInfos: fields.map(field => ({
                        fieldName: field,
                        label: field
                    })),
                    content: [{
                            type: 'fields'
                        }],
                    title: resultTitleExpression
                }
            };
        }
        // the source layer will provide popup info
        let layerObject;
        if (currentOriginDs.layer) {
            layerObject = currentOriginDs.layer;
        }
        else {
            layerObject = yield currentOriginDs.createJSAPILayerByDataSource();
        }
        if (layerObject) {
            yield layerObject.load();
        }
        return { defaultPopupTemplate: ((_a = layerObject === null || layerObject === void 0 ? void 0 : layerObject.associatedLayer) === null || _a === void 0 ? void 0 : _a.defaultPopupTemplate) || (layerObject === null || layerObject === void 0 ? void 0 : layerObject.defaultPopupTemplate) };
    });
}
function generateQueryParams(outputDS, sqlExpr, spatialFilter, queryItem, page, pageSize) {
    var _a, _b, _c, _d, _e;
    const currentQueryDsJson = outputDS.getDataSourceJson();
    const currentOriginDs = outputDS.getOriginDataSources()[0];
    const isLocalDs = currentQueryDsJson === null || currentQueryDsJson === void 0 ? void 0 : currentQueryDsJson.isDataInDataSourceInstance;
    if (isLocalDs) {
        outputDS.setSourceRecords(currentOriginDs.getSourceRecords());
    }
    const { useAttributeFilter, useSpatialFilter, sortOptions, resultFieldsType, resultDisplayFields, resultTitleExpression } = queryItem;
    // DETERMINE MINIMAL FIELDS (The "Field Shredder" Optimization)
    // To achieve performance parity with Web AppBuilder, we must avoid fetching every 
    // column in the database (* or all). We surgically request only the fields 
    // needed for the Title, the Attribute List, and the ID field.
    let outputFields = [];
    if (resultFieldsType === _config__WEBPACK_IMPORTED_MODULE_1__.FieldsType.SelectAttributes && resultDisplayFields) {
        outputFields = combineFields(resultDisplayFields, resultTitleExpression || '', outputDS.getIdField());
    }
    else {
        // Popup mode: Get only visible fields from popup info
        const popupInfo = currentOriginDs.getPopupInfo();
        const fieldNames = Object.values((_a = currentOriginDs.getSchema().fields) !== null && _a !== void 0 ? _a : {}).map(f => f.name);
        const validFieldInfos = (_b = popupInfo === null || popupInfo === void 0 ? void 0 : popupInfo.fieldInfos) === null || _b === void 0 ? void 0 : _b.filter(fieldInfo => fieldInfo.visible !== false && fieldNames.includes(fieldInfo.fieldName));
        outputFields = (validFieldInfos === null || validFieldInfos === void 0 ? void 0 : validFieldInfos.map(fieldInfo => fieldInfo.fieldName)) || [];
        // Always ensure ID field is included
        const idField = outputDS.getIdField();
        if (idField && !outputFields.includes(idField)) {
            outputFields.push(idField);
        }
    }
    const mergedQueryParams = outputDS.mergeQueryParams((_c = currentOriginDs.getCurrentQueryParams()) !== null && _c !== void 0 ? _c : {}, {
        where: (useAttributeFilter && (sqlExpr === null || sqlExpr === void 0 ? void 0 : sqlExpr.sql)) ? jimu_core__WEBPACK_IMPORTED_MODULE_0__.dataSourceUtils.getArcGISSQL(sqlExpr, outputDS).sql : '1=1',
        sqlExpression: (useAttributeFilter && (sqlExpr === null || sqlExpr === void 0 ? void 0 : sqlExpr.sql)) ? sqlExpr : null,
        // FORCE minimal fields here to override any framework "*" or "all"
        outFields: outputFields
    });
    // PERFORMANCE OPTIMIZATION: Universal SQL Optimizer
    // We normalize the user's input to UPPERCASE to ensure case-insensitivity while 
    // unwrapping any LOWER() function around the field name. This allows the database 
    // to use its attribute indexes (SARGable query).
    if (mergedQueryParams.where && mergedQueryParams.where.includes('LOWER(')) {
        const optimizedWhere = mergedQueryParams.where.replace(/LOWER\(([^)]+)\)\s*(=|LIKE)\s*'([^']*)'/gi, (match, field, operator, value) => {
            // Normalize both sides to UPPERCASE. This works for ANY field name.
            // We keep the field name "naked" so the index is used.
            return `${field} ${operator} '${value.toUpperCase()}'`;
        });
        if (optimizedWhere !== mergedQueryParams.where) {
            debugLogger.log('TASK', {
                event: 'sql-optimized',
                original: mergedQueryParams.where,
                optimized: optimizedWhere
            });
            mergedQueryParams.where = optimizedWhere;
        }
    }
    // compose query params for query
    const queryParams = Object.assign({ 
        // url: ds.url,
        returnGeometry: true, 
        /**
         * PERFORMANCE OPTIMIZATION: Force lower precision for all display queries.
         */
        maxAllowableOffset: 0.1, page, 
        // Limit pageSize to a sane default if not provided or too large
        pageSize: (pageSize && pageSize < 1000) ? pageSize : 1000 }, mergedQueryParams);
    // Final override to ensure no "*" leaks through from any merge operation
    if (!queryParams.outFields || queryParams.outFields.includes('*')) {
        queryParams.outFields = outputFields;
    }
    // Diagnostic log: Show exactly WHICH fields are being sent
    debugLogger.log('TASK', {
        event: 'requesting-data',
        fieldsCount: (_d = queryParams.outFields) === null || _d === void 0 ? void 0 : _d.length,
        fields: (_e = queryParams.outFields) === null || _e === void 0 ? void 0 : _e.join(', '),
        pageSize: queryParams.pageSize,
        offset: queryParams.maxAllowableOffset
    });
    if (useSpatialFilter && (spatialFilter === null || spatialFilter === void 0 ? void 0 : spatialFilter.geometry)) {
        const { geometry, relation = _config__WEBPACK_IMPORTED_MODULE_1__.SpatialRelation.Intersect, buffer } = spatialFilter;
        const spatialQueryParams = {
            geometryType: jimu_core__WEBPACK_IMPORTED_MODULE_0__.dataSourceUtils.changeJSAPIGeometryTypeToRestAPIGeometryType(geometry.type),
            geometry: geometry.toJSON(),
            spatialRel: _config__WEBPACK_IMPORTED_MODULE_1__.mapJSAPISpatialRelToDsSpatialRel[relation],
            distance: buffer === null || buffer === void 0 ? void 0 : buffer.distance,
            units: (buffer === null || buffer === void 0 ? void 0 : buffer.unit) ? _config__WEBPACK_IMPORTED_MODULE_1__.mapJSAPIUnitToDsUnit[buffer.unit] : undefined
        };
        Object.assign(queryParams, spatialQueryParams);
    }
    if ((sortOptions === null || sortOptions === void 0 ? void 0 : sortOptions.length) > 0) {
        Object.assign(queryParams, {
            orderByFields: sortOptions.map(item => `${item.jimuFieldName} ${item.order}`)
        });
    }
    return queryParams;
}
function executeCountQuery(widgetId, outputDS, queryParams) {
    return __awaiter(this, void 0, void 0, function* () {
        const result = yield outputDS.loadCount(queryParams, { widgetId, refresh: true });
        return result != null ? result : 0;
    });
}
function executeQuery(widgetId, queryItem, outputDS, queryParams) {
    return __awaiter(this, void 0, void 0, function* () {
        const popupInfo = outputDS.getPopupInfo();
        const layerDefinition = outputDS.getLayerDefinition();
        const getDefaultFieldInfos = () => {
            var _a;
            return [
                { fieldName: (_a = layerDefinition === null || layerDefinition === void 0 ? void 0 : layerDefinition.objectIdField) !== null && _a !== void 0 ? _a : 'objectid', label: 'OBJECTID', tooltip: '', visible: true }
            ];
        };
        const fieldInfos = ((fieldInfos) => (fieldInfos.length ? fieldInfos : getDefaultFieldInfos()))(((popupInfo === null || popupInfo === void 0 ? void 0 : popupInfo.fieldInfos) || []).filter((i) => i.visible));
        // const fields = outputDS.getSchema()?.fields
        // let selectedFieldNames
        // if (queryItem.resultFieldsType === FieldsType.SelectAttributes) {
        //   selectedFieldNames = [].concat(queryItem.resultDisplayFields, queryItem.resultTitleFields)
        // } else {
        //   selectedFieldNames = fieldInfos.map((fieldInfo) => fieldInfo.fieldName)
        // }
        // const selectedFieldJimuNames = fields
        //   ? Object.keys(fields).filter((jimuName) => selectedFieldNames.includes(fields[jimuName].name))
        //   : []
        // outputDS.setSelectedFields(selectedFieldJimuNames)
        const startTime = performance.now();
        let records = yield outputDS.load(queryParams, { widgetId });
        const fetchTime = performance.now() - startTime;
        if (records == null) {
            records = [];
        }
        const originDs = outputDS.getOriginDataSources()[0];
        const layerStartTime = performance.now();
        const layerObject = yield getLayerObject(originDs);
        const layerTime = performance.now() - layerStartTime;
        debugLogger.log('TASK', {
            event: 'query-complete',
            fetchTime: Math.round(fetchTime),
            layerTime: Math.round(layerTime),
            totalTime: Math.round(performance.now() - startTime),
            recordCount: records.length
        });
        records.forEach((record) => {
            const feature = record.feature;
            if (layerObject) {
                feature.sourceLayer = layerObject.associatedLayer || layerObject;
            }
            feature.layer = feature.sourceLayer;
        });
        const queryResult = {
            records,
            fields: fieldInfos.map((fieldInfo) => fieldInfo.fieldName)
        };
        // publish message
        const dataRecordSetChangeMessage = new jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataRecordSetChangeMessage(widgetId, jimu_core__WEBPACK_IMPORTED_MODULE_0__.RecordSetChangeType.CreateUpdate, [{
                records: outputDS.getAllLoadedRecords(),
                fields: queryResult.fields,
                dataSource: outputDS,
                name: outputDS.id,
                label: outputDS.getLabel()
            }]);
        jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageManager.getInstance().publishMessage(dataRecordSetChangeMessage);
        return queryResult;
    });
}
function getLayerObject(dataSource) {
    return __awaiter(this, void 0, void 0, function* () {
        const layerObject = yield dataSource.createJSAPILayerByDataSource();
        // layerObject may be undefined if the data source is added by URL
        if (layerObject) {
            yield layerObject.load();
        }
        return layerObject;
    });
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/results-management-utils.ts":
/*!**************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/results-management-utils.ts ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   clearAccumulatedResults: () => (/* binding */ clearAccumulatedResults),
/* harmony export */   createAccumulatedResultsDataSource: () => (/* binding */ createAccumulatedResultsDataSource),
/* harmony export */   getRecordKey: () => (/* binding */ getRecordKey),
/* harmony export */   mergeResultsIntoAccumulated: () => (/* binding */ mergeResultsIntoAccumulated),
/* harmony export */   removeRecordsFromOriginSelections: () => (/* binding */ removeRecordsFromOriginSelections),
/* harmony export */   removeResultsFromAccumulated: () => (/* binding */ removeResultsFromAccumulated)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/* harmony import */ var _graphics_layer_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./graphics-layer-utils */ "./your-extensions/widgets/query-simple/src/runtime/graphics-layer-utils.ts");
/**
 * Utility functions for managing results accumulation in QuerySimple widget.
 * Handles "Add to" and "Remove from" modes for accumulating query results.
 */
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__.createQuerySimpleDebugLogger)();
/**
 * Generates a composite key for a record that includes both origin data source ID and objectId.
 * This ensures uniqueness across different layers that may have the same objectId.
 *
 * @param record - The feature data record
 * @param outputDS - The output data source containing the record
 * @returns Composite key string: `${originDSId}_${objectId}`
 */
function getRecordKey(record, outputDS) {
    var _a;
    const originDS = (_a = outputDS.getOriginDataSources()) === null || _a === void 0 ? void 0 : _a[0];
    const originDSId = (originDS === null || originDS === void 0 ? void 0 : originDS.id) || outputDS.id; // Fallback to outputDS if no origin
    const objectId = record.getId();
    const key = `${originDSId}_${objectId}`;
    debugLogger.log('RESULTS-MODE', {
        event: 'record-key-generated',
        originDSId,
        objectId,
        key,
        hasOriginDS: !!originDS
    });
    return key;
}
/**
 * Creates an accumulated results data source for storing merged query results.
 * This data source is widget-level and persists across multiple queries.
 *
 * @param widgetId - The widget ID
 * @param originDS - The origin data source to use as the base
 * @returns The created accumulated results data source
 */
function createAccumulatedResultsDataSource(widgetId, originDS) {
    return __awaiter(this, void 0, void 0, function* () {
        const accumulatedDSId = `${widgetId}_accumulated_results`;
        debugLogger.log('RESULTS-MODE', {
            event: 'creating-accumulated-ds',
            widgetId,
            accumulatedDSId,
            originDSId: originDS.id
        });
        // Check if data source already exists
        const dsManager = jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceManager.getInstance();
        let accumulatedDS = dsManager.getDataSource(accumulatedDSId);
        if (accumulatedDS) {
            debugLogger.log('RESULTS-MODE', {
                event: 'accumulated-ds-already-exists',
                accumulatedDSId
            });
            return accumulatedDS;
        }
        // Get origin data source JSON to create output data source
        const originDataSourceJson = originDS.getDataSourceJson();
        // Create output data source JSON similar to how query items create output DS
        const outputDataSourceJson = {
            id: accumulatedDSId,
            label: 'Accumulated Results',
            type: originDataSourceJson === null || originDataSourceJson === void 0 ? void 0 : originDataSourceJson.type,
            geometryType: originDataSourceJson === null || originDataSourceJson === void 0 ? void 0 : originDataSourceJson.geometryType,
            url: originDataSourceJson === null || originDataSourceJson === void 0 ? void 0 : originDataSourceJson.url,
            itemId: originDataSourceJson === null || originDataSourceJson === void 0 ? void 0 : originDataSourceJson.itemId,
            portalUrl: originDataSourceJson === null || originDataSourceJson === void 0 ? void 0 : originDataSourceJson.portalUrl,
            originDataSources: [{
                    dataSourceId: originDS.id,
                    mainDataSourceId: originDS.id,
                    rootDataSourceId: originDS.id
                }],
            layerId: originDataSourceJson === null || originDataSourceJson === void 0 ? void 0 : originDataSourceJson.layerId,
            isDataInDataSourceInstance: originDataSourceJson === null || originDataSourceJson === void 0 ? void 0 : originDataSourceJson.isDataInDataSourceInstance,
            isOutputFromWidget: true
        };
        // Create the data source using DataSourceManager
        // Note: This follows the pattern from setting.tsx for creating output data sources
        accumulatedDS = dsManager.createDataSourceByDataSourceJson(outputDataSourceJson);
        // Set initial status
        accumulatedDS.setStatus(jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceStatus.NotReady);
        accumulatedDS.setCountStatus(jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceStatus.NotReady);
        debugLogger.log('RESULTS-MODE', {
            event: 'accumulated-ds-created',
            accumulatedDSId,
            originDSId: originDS.id,
            status: accumulatedDS.getStatus()
        });
        return accumulatedDS;
    });
}
/**
 * Merges new query results with existing records.
 * Deduplicates records using composite keys (originDSId_objectId).
 *
 * This function merges new records with existing records that were captured
 * before the query executed. The caller is responsible for storing the merged
 * records (typically in recordsRef or state).
 *
 * @param outputDS - The output data source (used for key generation)
 * @param newRecords - New records to merge in
 * @param existingRecords - Existing records captured before query execution (optional, defaults to empty array)
 * @returns Array of all merged records (existing + new unique records)
 */
function mergeResultsIntoAccumulated(outputDS, newRecords, existingRecords = []) {
    debugLogger.log('RESULTS-MODE', {
        event: 'merging-results-start',
        outputDSId: outputDS.id,
        existingRecordsCount: existingRecords.length,
        newRecordsCount: newRecords.length
    });
    // Build Set of existing record keys for fast lookup
    const existingKeys = new Set(existingRecords.map(record => getRecordKey(record, outputDS)));
    debugLogger.log('RESULTS-MODE', {
        event: 'existing-records-check',
        existingRecordsCount: existingRecords.length,
        existingKeysCount: existingKeys.size
    });
    // Filter new records to only include those not already in output DS
    const uniqueNewRecords = newRecords.filter(record => {
        const key = getRecordKey(record, outputDS);
        const isDuplicate = existingKeys.has(key);
        if (isDuplicate) {
            debugLogger.log('RESULTS-MODE', {
                event: 'duplicate-record-skipped',
                key,
                objectId: record.getId()
            });
        }
        return !isDuplicate;
    });
    debugLogger.log('RESULTS-MODE', {
        event: 'deduplication-complete',
        newRecordsCount: newRecords.length,
        uniqueNewRecordsCount: uniqueNewRecords.length,
        duplicatesSkipped: newRecords.length - uniqueNewRecords.length
    });
    // Merge records
    const mergedRecords = [...existingRecords, ...uniqueNewRecords];
    debugLogger.log('RESULTS-MODE', {
        event: 'merge-complete',
        totalRecordsAfterMerge: mergedRecords.length,
        existingCount: existingRecords.length,
        newUniqueCount: uniqueNewRecords.length
    });
    return mergedRecords;
}
/**
 * Removes matching records from widget-level accumulated records.
 * Matches records using composite keys (originDSId_objectId).
 *
 * This function removes records from existing accumulated records that were captured
 * before the query executed. The caller is responsible for storing the remaining
 * records (typically in recordsRef or state).
 *
 * @param outputDS - The output data source (used for key generation)
 * @param recordsToRemove - Records to remove (from query results)
 * @param existingAccumulatedRecords - Existing accumulated records captured before query execution (optional, defaults to empty array)
 * @returns Array of remaining records after removal
 */
function removeResultsFromAccumulated(outputDS, recordsToRemove, existingAccumulatedRecords = []) {
    debugLogger.log('RESULTS-MODE', {
        event: 'removing-results-start',
        outputDSId: outputDS.id,
        recordsToRemoveCount: recordsToRemove.length,
        existingAccumulatedRecordsCount: existingAccumulatedRecords.length
    });
    // If no accumulated records, nothing to remove
    if (existingAccumulatedRecords.length === 0) {
        debugLogger.log('RESULTS-MODE', {
            event: 'no-accumulated-records-to-remove',
            outputDSId: outputDS.id
        });
        return [];
    }
    // If no records to remove, return existing records unchanged
    if (recordsToRemove.length === 0) {
        debugLogger.log('RESULTS-MODE', {
            event: 'no-records-to-remove',
            outputDSId: outputDS.id,
            existingAccumulatedRecordsCount: existingAccumulatedRecords.length
        });
        return existingAccumulatedRecords;
    }
    // Build Set of keys to remove for fast lookup
    const removeKeys = new Set(recordsToRemove.map(record => getRecordKey(record, outputDS)));
    debugLogger.log('RESULTS-MODE', {
        event: 'remove-keys-built',
        existingAccumulatedRecordsCount: existingAccumulatedRecords.length,
        removeKeysCount: removeKeys.size
    });
    // Filter out records that match keys to remove
    const remainingRecords = [];
    const removedRecords = [];
    existingAccumulatedRecords.forEach(record => {
        var _a, _b, _c, _d;
        const key = getRecordKey(record, outputDS);
        const shouldRemove = removeKeys.has(key);
        if (shouldRemove) {
            removedRecords.push(record);
            debugLogger.log('RESULTS-MODE', {
                event: 'record-marked-for-removal',
                key,
                objectId: record.getId(),
                originDSId: ((_d = (_c = (_b = (_a = record.getDataSource) === null || _a === void 0 ? void 0 : _a.call(record)) === null || _b === void 0 ? void 0 : _b.getOriginDataSources()) === null || _c === void 0 ? void 0 : _c[0]) === null || _d === void 0 ? void 0 : _d.id) || 'unknown'
            });
        }
        else {
            remainingRecords.push(record);
        }
    });
    debugLogger.log('RESULTS-MODE', {
        event: 'removal-complete',
        recordsRemoved: removedRecords.length,
        remainingRecordsCount: remainingRecords.length,
        recordsToRemoveCount: recordsToRemove.length,
        matchedRecordsCount: removedRecords.length,
        unmatchedRecordsCount: recordsToRemove.length - removedRecords.length
    });
    return remainingRecords;
}
/**
 * Removes records from origin data source selections.
 * Groups records by their origin data source and updates each origin DS's selection separately.
 * This ensures map selection is updated correctly when records come from multiple origin layers.
 * Also removes graphics from graphics layer if using graphics layer highlighting.
 *
 * @param widgetId - The widget ID for publishing messages
 * @param recordsToRemove - Records to remove from selection
 * @param outputDS - The output data source (used for key generation)
 * @param useGraphicsLayer - Whether to remove graphics from graphics layer (default: false)
 * @param graphicsLayer - Graphics layer instance (required if useGraphicsLayer is true)
 */
function removeRecordsFromOriginSelections(widgetId, recordsToRemove, outputDS, useGraphicsLayer, graphicsLayer) {
    var _a, _b;
    debugLogger.log('RESULTS-MODE', {
        event: 'removing-records-from-origin-selections-start',
        widgetId,
        recordsToRemoveCount: recordsToRemove.length,
        outputDSId: outputDS.id,
        useGraphicsLayer: !!useGraphicsLayer,
        hasGraphicsLayer: !!graphicsLayer
    });
    if (recordsToRemove.length === 0) {
        debugLogger.log('RESULTS-MODE', {
            event: 'no-records-to-remove-from-selection',
            widgetId
        });
        return;
    }
    // Remove from graphics layer if using graphics layer highlighting
    if (useGraphicsLayer && graphicsLayer) {
        const recordIdsToRemove = recordsToRemove.map(record => record.getId());
        // FIX (r018.82): Capture TRUE "before" state BEFORE removing graphics
        const graphicsBeforeRemoval = [];
        const firstFewGraphicsAttrs = [];
        (_a = graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics) === null || _a === void 0 ? void 0 : _a.forEach((g, index) => {
            var _a;
            if (index < 3) {
                firstFewGraphicsAttrs.push({
                    index,
                    hasAttributes: !!g.attributes,
                    attributes: g.attributes,
                    attributeKeys: g.attributes ? Object.keys(g.attributes) : []
                });
            }
            graphicsBeforeRemoval.push(((_a = g.attributes) === null || _a === void 0 ? void 0 : _a.recordId) || null);
        });
        debugLogger.log('RESULTS-MODE', {
            event: 'removing-graphics-TRUE-BEFORE-state',
            widgetId,
            recordIdsToRemove,
            graphicsLayerCountBefore: graphicsLayer.graphics.length,
            graphicsLayerIdsBefore: graphicsBeforeRemoval.slice(0, 110),
            firstFewGraphicsAttrs,
            timestamp: Date.now()
        });
        (0,_graphics_layer_utils__WEBPACK_IMPORTED_MODULE_2__.removeHighlightGraphics)(graphicsLayer, recordIdsToRemove);
        // FIX (r018.82): Capture TRUE "after" state AFTER removing graphics
        const graphicsAfterRemoval = [];
        (_b = graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics) === null || _b === void 0 ? void 0 : _b.forEach((g) => {
            var _a;
            graphicsAfterRemoval.push(((_a = g.attributes) === null || _a === void 0 ? void 0 : _a.recordId) || null);
        });
        debugLogger.log('RESULTS-MODE', {
            event: 'removing-graphics-TRUE-AFTER-state',
            widgetId,
            graphicsLayerCountAfter: graphicsLayer.graphics.length,
            graphicsLayerIdsAfter: graphicsAfterRemoval.slice(0, 110),
            actuallyRemoved: graphicsBeforeRemoval.length - graphicsAfterRemoval.length,
            expectedToRemove: recordIdsToRemove.length,
            removalMatches: (graphicsBeforeRemoval.length - graphicsAfterRemoval.length) === recordIdsToRemove.length,
            timestamp: Date.now()
        });
    }
    // Group records by their origin data source
    const recordsByOriginDS = new Map();
    recordsToRemove.forEach(record => {
        var _a, _b, _c;
        const recordDS = (_a = record.getDataSource) === null || _a === void 0 ? void 0 : _a.call(record);
        let originDS = null;
        if (recordDS) {
            originDS = ((_b = recordDS.getOriginDataSources()) === null || _b === void 0 ? void 0 : _b[0]) || recordDS;
        }
        else {
            // Fallback: try to get origin from outputDS
            originDS = ((_c = outputDS.getOriginDataSources()) === null || _c === void 0 ? void 0 : _c[0]) || null;
        }
        if (originDS) {
            if (!recordsByOriginDS.has(originDS)) {
                recordsByOriginDS.set(originDS, []);
            }
            recordsByOriginDS.get(originDS).push(record);
        }
    });
    debugLogger.log('RESULTS-MODE', {
        event: 'records-grouped-by-origin',
        widgetId,
        originDSCount: recordsByOriginDS.size,
        recordsByOriginDS: Array.from(recordsByOriginDS.entries()).map(([ds, records]) => ({
            originDSId: ds.id,
            recordCount: records.length
        }))
    });
    // For each origin DS, get current selection and remove matching records
    recordsByOriginDS.forEach((recordsToRemoveForOrigin, originDS) => {
        try {
            // Get current selected records from this origin DS
            const currentSelectedRecords = originDS.getSelectedRecords() || [];
            const currentSelectedIds = originDS.getSelectedRecordIds() || [];
            debugLogger.log('RESULTS-MODE', {
                event: 'processing-origin-ds-removal',
                widgetId,
                originDSId: originDS.id,
                currentSelectedCount: currentSelectedRecords.length,
                recordsToRemoveCount: recordsToRemoveForOrigin.length
            });
            // Build Set of IDs to remove for fast lookup
            const idsToRemove = new Set(recordsToRemoveForOrigin.map(record => record.getId()));
            // Filter out records that match IDs to remove
            const remainingRecords = currentSelectedRecords.filter(record => {
                const recordId = record.getId();
                return !idsToRemove.has(recordId);
            });
            const remainingIds = remainingRecords.map(record => record.getId());
            debugLogger.log('RESULTS-MODE', {
                event: 'origin-ds-removal-filtered',
                widgetId,
                originDSId: originDS.id,
                removedCount: currentSelectedRecords.length - remainingRecords.length,
                remainingCount: remainingRecords.length
            });
            // Update selection in origin DS
            if (typeof originDS.selectRecordsByIds === 'function') {
                originDS.selectRecordsByIds(remainingIds, remainingRecords);
            }
            // Publish selection change message for this origin DS
            jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageManager.getInstance().publishMessage(new jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataRecordsSelectionChangeMessage(widgetId, remainingRecords, [originDS.id]));
            debugLogger.log('RESULTS-MODE', {
                event: 'origin-ds-selection-updated',
                widgetId,
                originDSId: originDS.id,
                remainingRecordsCount: remainingRecords.length,
                messagePublished: true
            });
        }
        catch (error) {
            debugLogger.log('RESULTS-MODE', {
                event: 'origin-ds-removal-error',
                widgetId,
                originDSId: originDS.id,
                error: error instanceof Error ? error.message : 'Unknown error',
                errorStack: error instanceof Error ? error.stack : undefined
            });
        }
    });
    debugLogger.log('RESULTS-MODE', {
        event: 'removing-records-from-origin-selections-complete',
        widgetId,
        originDSCount: recordsByOriginDS.size,
        totalRecordsRemoved: recordsToRemove.length
    });
}
/**
 * Clears all records from the accumulated results data source.
 *
 * @param accumulatedDS - The accumulated results data source to clear
 */
function clearAccumulatedResults(accumulatedDS) {
    debugLogger.log('RESULTS-MODE', {
        event: 'clearing-accumulated-results',
        accumulatedDSId: accumulatedDS.id
    });
    // Set status to NotReady to clear records
    accumulatedDS.setStatus(jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceStatus.NotReady);
    accumulatedDS.setCountStatus(jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceStatus.NotReady);
    // Clear any loaded records if possible
    // Note: May need to use DataSourceManager methods depending on ExB API
    debugLogger.log('RESULTS-MODE', {
        event: 'accumulated-results-cleared',
        accumulatedDSId: accumulatedDS.id
    });
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts":
/*!*****************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QUERYSIMPLE_SELECTION_EVENT: () => (/* binding */ QUERYSIMPLE_SELECTION_EVENT),
/* harmony export */   clearSelectionInDataSources: () => (/* binding */ clearSelectionInDataSources),
/* harmony export */   dispatchSelectionEvent: () => (/* binding */ dispatchSelectionEvent),
/* harmony export */   findClearResultsButton: () => (/* binding */ findClearResultsButton),
/* harmony export */   getOriginDataSource: () => (/* binding */ getOriginDataSource),
/* harmony export */   publishSelectionMessage: () => (/* binding */ publishSelectionMessage),
/* harmony export */   selectRecordsAndPublish: () => (/* binding */ selectRecordsAndPublish),
/* harmony export */   selectRecordsInDataSources: () => (/* binding */ selectRecordsInDataSources)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _graphics_layer_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./graphics-layer-utils */ "./your-extensions/widgets/query-simple/src/runtime/graphics-layer-utils.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/**
 * Utility functions for managing feature selection in QuerySimple widget.
 * Consolidates repeated selection logic to follow DRY principles.
 */
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_2__.createQuerySimpleDebugLogger)();
/**
 * Custom event name for QuerySimple to notify Widget of selection changes.
 */
const QUERYSIMPLE_SELECTION_EVENT = 'querysimple-selection-changed';
/**
 * Dispatches a custom selection event to the window so the main Widget can track state.
 *
 * @param widgetId - The widget ID
 * @param recordIds - Array of selected record IDs
 * @param outputDS - The output data source
 * @param queryItemConfigId - The config ID of the query that produced these results
 * @param eventManager - Optional EventManager instance for comparison logging (Chunk 7.1)
 */
function dispatchSelectionEvent(widgetId, recordIds, outputDS, queryItemConfigId, eventManager) {
    const originDS = getOriginDataSource(outputDS);
    const dataSourceId = originDS === null || originDS === void 0 ? void 0 : originDS.id;
    debugLogger.log('TASK', {
        event: 'dispatchSelectionEvent',
        widgetId,
        recordCount: recordIds.length,
        outputDsId: outputDS.id,
        queryItemConfigId
    });
    // Chunk 7: Dispatch selection event via EventManager (r018.59)
    if (eventManager) {
        eventManager.dispatchSelectionEvent(widgetId, recordIds, dataSourceId, outputDS.id, queryItemConfigId);
    }
}
/**
 * Gets the origin data source from an output data source.
 * @param outputDS - The output data source
 * @returns The origin data source, or null if not available
 */
function getOriginDataSource(outputDS) {
    if (!outputDS)
        return null;
    // Try to get origin data sources
    const originDataSources = typeof outputDS.getOriginDataSources === 'function'
        ? outputDS.getOriginDataSources()
        : [];
    if (originDataSources && originDataSources.length > 0) {
        return originDataSources[0];
    }
    // If it doesn't have origin data sources, it might already be an origin data source
    // FeatureLayerDataSource should have a 'layer' property or 'getLayer' method
    if (outputDS.layer || outputDS.getLayer || outputDS.type === 'FeatureLayer') {
        return outputDS;
    }
    return null;
}
/**
 * Selects records in both the origin data source and output data source.
 * This is the standard pattern used throughout the widget for selection.
 * Optionally uses graphics layer for highlighting (independent of layer visibility).
 *
 * @param outputDS - The output data source
 * @param recordIds - Array of record IDs to select
 * @param records - Optional array of FeatureDataRecord objects for proper highlighting
 * @param useGraphicsLayer - Whether to use graphics layer for highlighting (default: false)
 * @param graphicsLayer - Graphics layer instance (required if useGraphicsLayer is true)
 * @param mapView - Map view instance (required if useGraphicsLayer is true)
 */
function selectRecordsInDataSources(outputDS_1, recordIds_1, records_1) {
    return __awaiter(this, arguments, void 0, function* (outputDS, recordIds, records, useGraphicsLayer = false, graphicsLayer, mapView) {
        var _a, _b, _c, _d, _e, _f;
        if (!outputDS)
            return;
        const originDS = getOriginDataSource(outputDS);
        // If using graphics layer, add graphics for highlighting
        if (useGraphicsLayer && graphicsLayer && mapView && records && records.length > 0) {
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'selectRecordsInDataSources-using-graphics-layer',
                recordIdsCount: recordIds.length,
                recordsCount: records.length,
                graphicsLayerId: graphicsLayer.id,
                timestamp: Date.now()
            });
            yield (0,_graphics_layer_utils__WEBPACK_IMPORTED_MODULE_1__.addHighlightGraphics)(graphicsLayer, records, mapView);
            // Still select in data source for state management (but layer selection won't show if layer is off)
            if (originDS && typeof originDS.selectRecordsByIds === 'function') {
                originDS.selectRecordsByIds(recordIds, records);
            }
        }
        else {
            // Original behavior: use layer selection
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'selectRecordsInDataSources-using-layer-selection',
                recordIdsCount: recordIds.length,
                useGraphicsLayer,
                hasGraphicsLayer: !!graphicsLayer,
                hasMapView: !!mapView,
                timestamp: Date.now()
            });
            // Select in origin data source (the actual layer)
            if (originDS && typeof originDS.selectRecordsByIds === 'function') {
                // Log layer state right before selection to see what's available when selection works
                const layer = originDS.layer || ((_b = (_a = originDS).getLayer) === null || _b === void 0 ? void 0 : _b.call(_a));
                if (layer) {
                    debugLogger.log('GRAPHICS-LAYER', {
                        event: 'selectRecordsByIds-layer-state',
                        originDSId: originDS.id,
                        layerId: layer.id,
                        hasLayerMap: !!layer.map,
                        hasLayerView: !!layer.view,
                        hasLayerParent: !!layer.parent,
                        parentType: ((_c = layer.parent) === null || _c === void 0 ? void 0 : _c.type) || 'none',
                        parentHasMap: !!((_d = layer.parent) === null || _d === void 0 ? void 0 : _d.map),
                        parentHasView: !!((_e = layer.parent) === null || _e === void 0 ? void 0 : _e.view),
                        parentHasViews: !!((_f = layer.parent) === null || _f === void 0 ? void 0 : _f.views),
                        timestamp: Date.now()
                    });
                }
                originDS.selectRecordsByIds(recordIds, records);
            }
        }
        // Always update outputDS for widget's internal state
        if (typeof outputDS.selectRecordsByIds === 'function') {
            outputDS.selectRecordsByIds(recordIds, records);
        }
    });
}
/**
 * Clears the `data_s` parameter from the URL hash.
 * Experience Builder automatically adds `data_s` when selections are made,
 * but doesn't remove it when selections are cleared, causing "dirty hash" issues.
 *
 * This function ensures the hash is clean when selections are cleared.
 */
function clearDataSParameterFromHash() {
    const hash = window.location.hash.substring(1);
    if (!hash)
        return;
    const urlParams = new URLSearchParams(hash);
    if (urlParams.has('data_s')) {
        urlParams.delete('data_s');
        const newHash = urlParams.toString();
        debugLogger.log('HASH', {
            event: 'clearDataSParameterFromHash',
            hadDataS: true,
            newHash: newHash ? `#${newHash}` : '(empty)',
            timestamp: Date.now()
        });
        // Update the URL without triggering a reload
        // Always preserve pathname and query string, only update hash
        window.history.replaceState(null, '', window.location.pathname + window.location.search + (newHash ? `#${newHash}` : ''));
    }
}
/**
 * Clears selection in both the origin data source and output data source.
 * Optionally clears graphics layer if using graphics layer mode.
 * Also clears the `data_s` parameter from the URL hash to prevent "dirty hash" issues.
 *
 * @param widgetId - The widget ID (needed to publish message)
 * @param outputDS - The output data source
 * @param useGraphicsLayer - Whether to clear graphics layer (default: false)
 * @param graphicsLayer - Graphics layer instance (required if useGraphicsLayer is true)
 */
function clearSelectionInDataSources(widgetId_1, outputDS_1) {
    return __awaiter(this, arguments, void 0, function* (widgetId, outputDS, useGraphicsLayer = false, graphicsLayer) {
        // Clear graphics layer if using graphics layer mode
        if (useGraphicsLayer && graphicsLayer) {
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'clearSelectionInDataSources-clearing-graphics-layer',
                graphicsLayerId: graphicsLayer.id,
                timestamp: Date.now()
            });
            (0,_graphics_layer_utils__WEBPACK_IMPORTED_MODULE_1__.clearGraphicsLayer)(graphicsLayer);
        }
        // Clear data source selection for state management
        yield selectRecordsInDataSources(outputDS, [], undefined, false);
        // Publish the empty selection message so the Map selection (blue boxes) clears
        if (outputDS) {
            publishSelectionMessage(widgetId, [], outputDS, true);
        }
        // Clear data_s parameter from hash to prevent dirty hash
        // Experience Builder adds data_s when selections are made but doesn't remove it when cleared
        clearDataSParameterFromHash();
    });
}
/**
 * Publishes a selection change message for the given records and data sources.
 *
 * @param widgetId - The widget ID
 * @param records - Array of FeatureDataRecord objects (empty array to clear)
 * @param outputDS - The output data source
 * @param alsoPublishToOutputDS - Whether to also publish a message for outputDS (default: false)
 */
function publishSelectionMessage(widgetId, records, outputDS, alsoPublishToOutputDS = false) {
    if (!outputDS)
        return;
    const originDS = getOriginDataSource(outputDS);
    if (originDS) {
        jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageManager.getInstance().publishMessage(new jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataRecordsSelectionChangeMessage(widgetId, records, [originDS.id]));
    }
    else if (alsoPublishToOutputDS) {
        jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageManager.getInstance().publishMessage(new jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataRecordsSelectionChangeMessage(widgetId, records, [outputDS.id]));
    }
    // Optionally publish to outputDS as well (for some edge cases)
    if (alsoPublishToOutputDS && originDS) {
        jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageManager.getInstance().publishMessage(new jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataRecordsSelectionChangeMessage(widgetId, records, [outputDS.id]));
    }
}
/**
 * Selects records and publishes the selection message in one call.
 * This is the most common pattern - selecting records and notifying the map.
 * Optionally uses graphics layer for highlighting (independent of layer visibility).
 *
 * @param widgetId - The widget ID
 * @param outputDS - The output data source
 * @param recordIds - Array of record IDs to select
 * @param records - Array of FeatureDataRecord objects for proper highlighting
 * @param alsoPublishToOutputDS - Whether to also publish a message for outputDS (default: false)
 * @param useGraphicsLayer - Whether to use graphics layer for highlighting (default: false)
 * @param graphicsLayer - Graphics layer instance (required if useGraphicsLayer is true)
 * @param mapView - Map view instance (required if useGraphicsLayer is true)
 */
function selectRecordsAndPublish(widgetId_1, outputDS_1, recordIds_1, records_1) {
    return __awaiter(this, arguments, void 0, function* (widgetId, outputDS, recordIds, records, alsoPublishToOutputDS = false, useGraphicsLayer = false, graphicsLayer, mapView) {
        yield selectRecordsInDataSources(outputDS, recordIds, records, useGraphicsLayer, graphicsLayer, mapView);
        publishSelectionMessage(widgetId, records, outputDS, alsoPublishToOutputDS);
    });
}
/**
 * Finds the "Clear results" button in the DOM.
 * Used when programmatically triggering the clear action.
 *
 * @returns The clear button element, or null if not found
 */
function findClearResultsButton() {
    // Hardened: Prioritize the one in the results header, fallback to any
    return (document.querySelector('.query-result__header button[aria-label="Clear results"]') ||
        document.querySelector('button[aria-label="Clear results"]'));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/simple-list.tsx":
/*!**************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/simple-list.tsx ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SimpleList: () => (/* binding */ SimpleList)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _query_result_item__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./query-result-item */ "./your-extensions/widgets/query-simple/src/runtime/query-result-item.tsx");
/* harmony import */ var _query_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./query-utils */ "./your-extensions/widgets/query-simple/src/runtime/query-utils.ts");
/* harmony import */ var _useAutoHeight__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./useAutoHeight */ "./your-extensions/widgets/query-simple/src/runtime/useAutoHeight.tsx");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");

/** @jsx jsx */






const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_6__.createQuerySimpleDebugLogger)();
const getStyle = (isAutoHeight) => {
    return (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
    display: flex;
    flex: 1 1 ${isAutoHeight ? 'auto' : 0};
    overflow: auto;
    max-height: ${isAutoHeight ? 'calc(61.8vh - 100px)' : 'none'};

    .query-result-item + .query-result-item {
      margin-left: 0.5rem;
      margin-top: 0;
    }

    &.vertical {
      flex-direction: column;
      .list-items {
        position: relative;
        flex-direction: column;
      }

      .feature-info-component {
        width: 100%;
      }

      .query-result-item + .query-result-item {
        margin-left: 0;
        margin-top: 0.5rem;
      }
    }
    .list-items {
      display: flex;
    }
  `;
};
function SimpleList(props) {
    const { widgetId, outputDS, queryItem, records, direction, onEscape, onSelectChange, onRemove, expandByDefault, itemExpandStates, removedRecordIds, onRenderDone } = props;
    const [popupTemplate, setPopupTemplate] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState();
    const [defaultPopupTemplate, setDefaultPopupTemplate] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState();
    const isAutoHeight = (0,_useAutoHeight__WEBPACK_IMPORTED_MODULE_5__.useAutoHeight)();
    const resultContainerRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    // Filter out removed records
    const filteredRecords = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return (records === null || records === void 0 ? void 0 : records.filter(record => !(removedRecordIds === null || removedRecordIds === void 0 ? void 0 : removedRecordIds.has(record.getId())))) || [];
    }, [records, removedRecordIds]);
    // Notify parent when records are rendered (for auto-switch logic)
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (onRenderDone && filteredRecords.length > 0) {
            debugLogger.log('RESULTS-MODE', {
                event: 'SimpleList-onRenderDone-called',
                widgetId,
                queryItemConfigId: queryItem.configId,
                filteredRecordsCount: filteredRecords.length,
                totalRecordsCount: records.length,
                removedRecordIdsCount: (removedRecordIds === null || removedRecordIds === void 0 ? void 0 : removedRecordIds.size) || 0,
                timestamp: Date.now()
            });
            onRenderDone({ dataItems: filteredRecords });
        }
    }, [filteredRecords, onRenderDone, widgetId, queryItem.configId, records.length, removedRecordIds]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        (0,_query_utils__WEBPACK_IMPORTED_MODULE_4__.getPopupTemplate)(outputDS, queryItem).then(rs => {
            setPopupTemplate(rs.popupTemplate);
            setDefaultPopupTemplate(rs.defaultPopupTemplate);
        });
    }, [outputDS, queryItem]);
    const handleKeyUp = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((evt) => {
        if (evt.key === 'Escape') {
            evt.stopPropagation();
            onEscape();
        }
    }, [onEscape]);
    const handleKeyDown = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((evt) => {
        if (evt.key === ' ') {
            evt.preventDefault();
        }
    }, []);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { onKeyUp: handleKeyUp, onKeyDown: handleKeyDown, className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)({ vertical: direction === _config__WEBPACK_IMPORTED_MODULE_2__.ListDirection.Vertical }), css: getStyle(isAutoHeight), ref: resultContainerRef, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'list-items px-4 py-1', role: 'listbox', children: filteredRecords.map((dataItem) => {
                const recordId = dataItem.getId();
                // Use individual state from map if available, otherwise fall back to expandByDefault
                const individualExpandState = itemExpandStates === null || itemExpandStates === void 0 ? void 0 : itemExpandStates.get(recordId);
                const expandByDefaultValue = individualExpandState !== undefined ? individualExpandState : (expandByDefault !== null && expandByDefault !== void 0 ? expandByDefault : true);
                return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_result_item__WEBPACK_IMPORTED_MODULE_3__.QueryResultItem, { data: dataItem, dataSource: outputDS, widgetId: widgetId, popupTemplate: popupTemplate, defaultPopupTemplate: defaultPopupTemplate, expandByDefault: expandByDefaultValue, onClick: onSelectChange, onRemove: onRemove }, recordId));
            }) }) }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts":
/*!**********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/translations/default.ts ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
    _widgetLabel: 'QuerySimple',
    reset: 'Reset',
    searchLayer: 'Search Layer',
    apply: 'Search',
    noDataAvailable: 'Error in loading data',
    noQueryItem: 'No query',
    newQueryHint: 'Add content by clicking the "{label}" button on the configuration panel',
    attributeFilter: 'Attribute filter',
    spatialFilter: 'Spatial filter',
    spatialFilterType_CurrentMapExtent: 'Current map extent',
    spatialFilterType_InteractiveDrawMode: 'Drawn graphic',
    results: 'Results',
    featuresDisplayed: 'Features displayed',
    clearResult: 'Clear all results',
    checkResult: 'Check results',
    mapMustBeVisible: 'Map must be visible',
    chooseFilterType: 'Choose the filter type',
    chooseGeometryType: 'Choose the geometry type',
    clearDrawing: 'Clear the graphic when applying',
    featureFromDs: 'Selecting features from data source',
    featureFromMap: 'Geometries from a map',
    chooseFilterLayer: 'Choose a filter layer',
    selectedRecords: '{num} records are selected for the filter',
    spatialNotAvailable: 'Spatial filter is not available here.',
    spatialNotAvailableDesc: 'Spatial filter is not supported for a data source that already contains a spatial query.',
    preconfigured: 'Preconfigured',
    runtime: 'Runtime',
    selectLoaded: 'Select loaded',
    retrieving: 'Retrieving query results...',
    zoomToSelected: 'Zoom to selected',
    queryTab: 'Query',
    resultsTab: 'Results',
    expandAll: 'Expand all',
    collapseAll: 'Collapse all',
    addToMap: 'Add to map',
    resultsMode: 'Results mode',
    createNewResults: 'Create new results',
    addToCurrentResults: 'Add to current results',
    removeFromCurrentResults: 'Remove from current results',
    resultsModeDisabledRemove: 'Remove from current results (no accumulated results)',
    resultsModeDesc: 'Controls how query results are combined:\n New: Each query replaces previous results\n Add: New results are added to existing results\n Remove: Matching results are removed from existing results',
    resultsModeNew: 'New',
    resultsModeAdd: 'Add',
    resultsModeRemove: 'Remove'
});


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/useAutoHeight.tsx":
/*!****************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/useAutoHeight.tsx ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   useAutoHeight: () => (/* binding */ useAutoHeight)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var _widget_context__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./widget-context */ "./your-extensions/widgets/query-simple/src/runtime/widget-context.tsx");
/** @jsx jsx */



function useAutoHeight() {
    const layoutInfo = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useContext(_widget_context__WEBPACK_IMPORTED_MODULE_2__.QueryWidgetContext);
    let layoutId;
    let layoutItemId;
    if (layoutInfo.includes(':')) {
        const r = layoutInfo.split(':');
        layoutId = r[0];
        layoutItemId = r[1];
    }
    const isAuto = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        var _a, _b, _c, _d;
        const layoutItem = (_b = (_a = state.appConfig.layouts[layoutId]) === null || _a === void 0 ? void 0 : _a.content) === null || _b === void 0 ? void 0 : _b[layoutItemId];
        return ((_d = (_c = layoutItem === null || layoutItem === void 0 ? void 0 : layoutItem.setting) === null || _c === void 0 ? void 0 : _c.autoProps) === null || _d === void 0 ? void 0 : _d.height) === jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.LayoutItemSizeModes.Auto;
    });
    return isAuto;
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/widget-config.ts":
/*!***************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/widget-config.ts ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getWidgetRuntimeDataMap: () => (/* binding */ getWidgetRuntimeDataMap)
/* harmony export */ });
/* harmony import */ var jimu_icons_svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-icons/svg/outlined/suggested/warning.svg */ "./jimu-icons/svg/outlined/suggested/warning.svg");
/* harmony import */ var jimu_icons_svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-icons/svg/outlined/suggested/error.svg */ "./jimu-icons/svg/outlined/suggested/error.svg");
/* harmony import */ var jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var jimu_icons_svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-icons/svg/outlined/directional/arrow-left.svg */ "./jimu-icons/svg/outlined/directional/arrow-left.svg");
/* harmony import */ var jimu_icons_svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var jimu_icons_svg_outlined_directional_right_svg__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-icons/svg/outlined/directional/right.svg */ "./jimu-icons/svg/outlined/directional/right.svg");
/* harmony import */ var jimu_icons_svg_outlined_directional_right_svg__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_directional_right_svg__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var jimu_icons_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-icons/svg/outlined/editor/trash.svg */ "./jimu-icons/svg/outlined/editor/trash.svg");
/* harmony import */ var jimu_icons_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var jimu_icons_svg_outlined_application_more_horizontal_svg__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jimu-icons/svg/outlined/application/more-horizontal.svg */ "./jimu-icons/svg/outlined/application/more-horizontal.svg");
/* harmony import */ var jimu_icons_svg_outlined_application_more_horizontal_svg__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_application_more_horizontal_svg__WEBPACK_IMPORTED_MODULE_5__);






const getWidgetRuntimeDataMap = () => ({
    iconMap: {
        iconQuery: __webpack_require__(/*! ../../icon.svg */ "./your-extensions/widgets/query-simple/icon.svg"),
        iconWarning: (jimu_icons_svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_0___default()),
        iconError: (jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_1___default()),
        arrowNavBack: (jimu_icons_svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2___default()),
        arrowRight: (jimu_icons_svg_outlined_directional_right_svg__WEBPACK_IMPORTED_MODULE_3___default()),
        toolDelete: (jimu_icons_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_4___default()),
        iconMore: (jimu_icons_svg_outlined_application_more_horizontal_svg__WEBPACK_IMPORTED_MODULE_5___default())
    }
});


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/widget-context.tsx":
/*!*****************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/widget-context.tsx ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryWidgetContext: () => (/* binding */ QueryWidgetContext)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");

const QueryWidgetContext = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createContext(null);


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/zoom-utils.ts":
/*!************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/zoom-utils.ts ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   zoomToRecords: () => (/* binding */ zoomToRecords)
/* harmony export */ });
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/**
 * Shared zoom utilities for QuerySimple widget.
 *
 * Provides pure functions for zooming to feature records that can be used
 * by both React hooks and data actions.
 */
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};

const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_0__.createQuerySimpleDebugLogger)();
const DEFAULT_PADDING = {
    left: 50,
    right: 50,
    top: 50,
    bottom: 50
};
/**
 * Default buffer for single points or overlapping points (in feet).
 * This creates a 600ft x 600ft extent around point features.
 *
 * RATIONALE: 300ft radius provides good context for parcels, addresses,
 * and similar point features without zooming too close or too far.
 */
const DEFAULT_ZERO_AREA_BUFFER_FEET = 300;
/** Conversion factor: feet to meters */
const FEET_TO_METERS = 0.3048;
/**
 * Determines if the spatial reference uses meters (Web Mercator or other metric systems).
 *
 * This is critical for applying the correct buffer distance to zero-area extents.
 * Different coordinate systems use different units:
 * - Web Mercator (3857, 102100): Meters
 * - WGS84 Geographic (4326): Degrees (treated as metric for buffer calculation)
 * - State Plane zones (2225-2284): Feet
 *
 * @param spatialReference - The spatial reference to check
 * @returns true if the spatial reference uses meters, false if feet-based
 */
function isMetricSpatialReference(spatialReference) {
    // Web Mercator (most common): 3857 or 102100
    if (spatialReference.wkid === 3857 || spatialReference.wkid === 102100) {
        return true;
    }
    // WGS84 Geographic (degrees, but treat as metric for buffer calculation)
    if (spatialReference.wkid === 4326) {
        return true;
    }
    // For other spatial references, check the unit property if available
    // Most State Plane zones use feet (WKID 2227-2284, 2285-2287, etc.)
    // But this is a heuristic - ideally we'd check the actual unit
    const wkid = spatialReference.wkid;
    // Common US State Plane zones in feet (partial list)
    // California zones: 2225-2235 (feet), 2229 (feet)
    // This is not exhaustive, but covers common cases
    if (wkid >= 2225 && wkid <= 2284) {
        return false; // Likely feet-based State Plane
    }
    // Default to metric if uncertain
    return true;
}
/**
 * Expands a zero-area extent by a buffer distance.
 * Creates a new extent with the center point buffered by the specified distance.
 *
 * This handles the case where:
 * - A single point feature is selected (extent.width = 0, extent.height = 0)
 * - Multiple overlapping points are selected (union extent still has zero area)
 *
 * Without this expansion, mapView.goTo() would zoom to an unusable scale.
 *
 * @param extent - The zero-area extent to expand
 * @param bufferDistance - The distance to buffer in the spatial reference's units
 * @returns A new extent expanded by the buffer distance in all directions
 */
function expandZeroAreaExtent(extent, bufferDistance) {
    const centerX = (extent.xmin + extent.xmax) / 2;
    const centerY = (extent.ymin + extent.ymax) / 2;
    return extent.clone().set({
        xmin: centerX - bufferDistance,
        xmax: centerX + bufferDistance,
        ymin: centerY - bufferDistance,
        ymax: centerY + bufferDistance
    });
}
/**
 * Pure function to zoom to feature records with padding.
 *
 * Extracts geometries from records, calculates extent, and zooms the map view
 * using mapView.goTo() with configurable padding. Handles both single and
 * multiple geometries by calculating union extent when needed.
 *
 * ZERO-AREA EXTENT HANDLING (r019.23):
 * When zooming to single points or overlapping points, the calculated extent
 * will have zero width/height. This function detects this condition and
 * expands the extent by 300 feet (default) in all directions to provide
 * useful context. The buffer distance is automatically converted to the
 * correct units based on the map's spatial reference:
 * - Web Mercator (3857/102100): Converts 300 feet  ~91.44 meters
 * - State Plane (feet-based): Uses 300 feet directly
 *
 * This approach maintains the extent-based zoom strategy, ensuring the
 * padding from ZoomToRecordsOptions is still respected during mapView.goTo().
 *
 * @param mapView - The map view to zoom
 * @param records - Array of feature data records to zoom to
 * @param options - Optional zoom options including padding and zero-area buffer
 * @returns Promise that resolves when zoom completes
 */
function zoomToRecords(mapView, records, options) {
    return __awaiter(this, void 0, void 0, function* () {
        var _a, _b;
        if (!mapView || !records || records.length === 0) {
            return;
        }
        const padding = (options === null || options === void 0 ? void 0 : options.padding) || DEFAULT_PADDING;
        const zeroAreaBufferFeet = (options === null || options === void 0 ? void 0 : options.zeroAreaBufferFeet) || DEFAULT_ZERO_AREA_BUFFER_FEET;
        try {
            // Extract geometries from records
            const geometries = records
                .map(record => record.getJSAPIGeometry())
                .filter(geom => geom != null);
            if (geometries.length === 0) {
                return;
            }
            let extent = null;
            if (geometries.length === 1) {
                // Single geometry - get its extent
                // Note: Point geometries will have zero-area extents (width=0, height=0)
                // which will be expanded by the zero-area detection logic below
                extent = geometries[0].extent || ((_b = (_a = geometries[0]).getExtent) === null || _b === void 0 ? void 0 : _b.call(_a));
            }
            else {
                // Multiple geometries - calculate union extent
                // Note: Overlapping points will produce a zero-area extent
                // which will be expanded by the zero-area detection logic below
                const extents = geometries
                    .map(geom => { var _a, _b; return geom.extent || ((_b = (_a = geom).getExtent) === null || _b === void 0 ? void 0 : _b.call(_a)); })
                    .filter(e => e != null);
                if (extents.length > 0) {
                    extent = extents[0].clone();
                    for (let i = 1; i < extents.length; i++) {
                        extent = extent.union(extents[i]);
                    }
                }
            }
            if (extent) {
                // Check for zero-area extent (single point or overlapping points)
                // This condition triggers when extent.width === 0 OR extent.height === 0
                const isZeroArea = extent.width === 0 || extent.height === 0;
                if (isZeroArea) {
                    // Determine buffer distance based on spatial reference
                    // Web Mercator uses meters, State Plane typically uses feet
                    const isMetric = isMetricSpatialReference(mapView.spatialReference);
                    const bufferDistance = isMetric
                        ? zeroAreaBufferFeet * FEET_TO_METERS // Convert feet to meters (~91.44m for 300ft)
                        : zeroAreaBufferFeet; // Use feet directly
                    // Expand the extent by the buffer distance in all directions
                    // This creates a square extent centered on the point(s)
                    extent = expandZeroAreaExtent(extent, bufferDistance);
                    debugLogger.log('ZOOM', {
                        event: 'zero-area-extent-expanded',
                        recordsCount: records.length,
                        bufferFeet: zeroAreaBufferFeet,
                        bufferDistance: bufferDistance,
                        spatialReferenceWkid: mapView.spatialReference.wkid,
                        isMetric: isMetric,
                        expandedExtent: {
                            xmin: extent.xmin,
                            xmax: extent.xmax,
                            ymin: extent.ymin,
                            ymax: extent.ymax,
                            width: extent.width,
                            height: extent.height
                        }
                    });
                }
                // Zoom to the extent with padding
                // The padding from options is applied here, in addition to any zero-area expansion
                yield mapView.goTo(extent, { padding });
            }
        }
        catch (error) {
            debugLogger.log('ZOOM', {
                event: 'zoom-goTo-error',
                error: error instanceof Error ? error.message : String(error),
                recordsCount: records.length
            });
            throw error;
        }
    });
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/version-manager.ts":
/*!*********************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/version-manager.ts ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   versionManager: () => (/* binding */ versionManager)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");

class VersionManager extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.BaseVersionManager {
    constructor() {
        super(...arguments);
        this.versions = [{
                version: '1.0.0',
                description: 'The first version.',
                upgrader: (oldConfig) => {
                    return oldConfig;
                }
            }];
    }
}
const versionManager = new VersionManager();


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/version.ts":
/*!*************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/version.ts ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   WIDGET_VERSION: () => (/* binding */ WIDGET_VERSION)
/* harmony export */ });
/**
 * Widget version number.
 * Base version matches Experience Builder version (1.19.0).
 * Release number increments on major changes (001, 002, 003, ...).
 * Minor version increments on smaller fixes between major releases (r015.1, r015.2, ...).
 *
 * To increment:
 * - Major change: Update RELEASE_NUMBER (e.g., 015 -> 016) and reset MINOR_VERSION to 0
 * - Minor fix: Increment MINOR_VERSION (e.g., 1 -> 2) while keeping same RELEASE_NUMBER
 */
const BASE_VERSION = '1.19.0';
const RELEASE_NUMBER = '019'; // Increment on major changes (001, 002, 003, ...)
const MINOR_VERSION = '23'; // Increment on minor fixes between major releases (1, 2, 3, ...)
const WIDGET_VERSION = MINOR_VERSION && Number(MINOR_VERSION) > 0
    ? `${BASE_VERSION}-r${RELEASE_NUMBER}.${MINOR_VERSION}`
    : `${BASE_VERSION}-r${RELEASE_NUMBER}`;


/***/ }),

/***/ "./your-extensions/widgets/shared-code/common.ts":
/*!*******************************************************!*\
  !*** ./your-extensions/widgets/shared-code/common.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DataSourceTip: () => (/* reexport safe */ _common_data_source_tip__WEBPACK_IMPORTED_MODULE_3__.DataSourceTip),
/* harmony export */   DialogPanel: () => (/* reexport safe */ _common_common_components__WEBPACK_IMPORTED_MODULE_0__.DialogPanel),
/* harmony export */   EntityStatusType: () => (/* reexport safe */ _common_common_components__WEBPACK_IMPORTED_MODULE_0__.EntityStatusType),
/* harmony export */   ErrorMessage: () => (/* reexport safe */ _common_common_components__WEBPACK_IMPORTED_MODULE_0__.ErrorMessage),
/* harmony export */   StateHolder: () => (/* reexport safe */ _common_common_components__WEBPACK_IMPORTED_MODULE_0__.StateHolder),
/* harmony export */   StatusIndicator: () => (/* reexport safe */ _common_common_components__WEBPACK_IMPORTED_MODULE_0__.StatusIndicator),
/* harmony export */   createGetI18nMessage: () => (/* reexport safe */ _common_utils__WEBPACK_IMPORTED_MODULE_1__.createGetI18nMessage),
/* harmony export */   createHelperSimpleDebugLogger: () => (/* reexport safe */ _common_debug_logger__WEBPACK_IMPORTED_MODULE_4__.createHelperSimpleDebugLogger),
/* harmony export */   createQuerySimpleDebugLogger: () => (/* reexport safe */ _common_debug_logger__WEBPACK_IMPORTED_MODULE_4__.createQuerySimpleDebugLogger),
/* harmony export */   getFieldInfosInPopupContent: () => (/* reexport safe */ _common_utils__WEBPACK_IMPORTED_MODULE_1__.getFieldInfosInPopupContent),
/* harmony export */   toggleItemInArray: () => (/* reexport safe */ _common_utils__WEBPACK_IMPORTED_MODULE_1__.toggleItemInArray),
/* harmony export */   useDataSourceExists: () => (/* reexport safe */ _common_use_ds_exists__WEBPACK_IMPORTED_MODULE_2__.useDataSourceExists)
/* harmony export */ });
/* harmony import */ var _common_common_components__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./common/common-components */ "./your-extensions/widgets/shared-code/common/common-components.tsx");
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./common/utils */ "./your-extensions/widgets/shared-code/common/utils.tsx");
/* harmony import */ var _common_use_ds_exists__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./common/use-ds-exists */ "./your-extensions/widgets/shared-code/common/use-ds-exists.tsx");
/* harmony import */ var _common_data_source_tip__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./common/data-source-tip */ "./your-extensions/widgets/shared-code/common/data-source-tip.tsx");
/* harmony import */ var _common_debug_logger__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./common/debug-logger */ "./your-extensions/widgets/shared-code/common/debug-logger.ts");
/**
 * Shared common utilities and components for Experience Builder widgets
 *
 * This module exports common functionality that can be shared between
 * query-simple, helper-simple, and other custom widgets.
 *
 * This is the entry point for 'widgets/shared-code/common'
 */







/***/ }),

/***/ "./your-extensions/widgets/shared-code/common/common-components.tsx":
/*!**************************************************************************!*\
  !*** ./your-extensions/widgets/shared-code/common/common-components.tsx ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DialogPanel: () => (/* binding */ DialogPanel),
/* harmony export */   EntityStatusType: () => (/* binding */ EntityStatusType),
/* harmony export */   ErrorMessage: () => (/* binding */ ErrorMessage),
/* harmony export */   StateHolder: () => (/* binding */ StateHolder),
/* harmony export */   StatusIndicator: () => (/* binding */ StatusIndicator)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_theme__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-theme */ "jimu-theme");
/* harmony import */ var jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-icons/svg/outlined/suggested/error.svg */ "./jimu-icons/svg/outlined/suggested/error.svg");
/* harmony import */ var jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_4__);

/** @jsx jsx */




const { useState } = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React;
/**
 * A simple Functional Component storing some States that are commonly used
 */
const StateHolder = (props) => {
    const { initState = {}, children } = props;
    const defaultStateMap = {
        visible: true,
        refContainer: null
    };
    const useStateMap = {
        visible: useState('visible' in initState ? initState.visible : defaultStateMap.visible),
        refContainer: useState('refContainer' in initState ? initState.refContainer : defaultStateMap.refContainer),
        customData: useState(Object.assign({}, initState.customData))
    };
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: children(useStateMap) });
};
/**
 * A dialog popup
 */
const DialogPanel = (0,jimu_theme__WEBPACK_IMPORTED_MODULE_3__.withTheme)((props) => {
    const { theme, panelVisible, setPanelVisible, getI18nMessage, isModal = true, title = getI18nMessage('queryMessage'), bodyContent = '', hasHeader = true, hasFooter = true } = props;
    const toggle = () => { setPanelVisible(false); };
    const getContent = () => (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [hasHeader &&
                (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.PanelHeader, { className: 'py-2', title: title, onClose: toggle }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.ModalBody, { children: bodyContent }), hasFooter &&
                (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.ModalFooter, { children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { onClick: toggle, children: getI18nMessage('ok') }) })] });
    const generalClassName = 'ui-unit-dialog-panel';
    const renderModalContent = () => {
        return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Modal, { className: generalClassName, isOpen: panelVisible, toggle: toggle, backdrop: 'static', children: getContent() }));
    };
    const renderNonModalContent = () => {
        const getStyle = () => (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
      &.ui-unit-dialog-panel.modal-dialog {
        margin: 0;
        width: 100%;
        .modal-content {
          background-color: ${theme.ref.palette.neutral[600]};
          color: ${theme.ref.palette.black};
          font-size: .75rem;
          font-weight: 400;
          border: none;
          .panel-header {
            font-size: .8125rem;
            padding: .625rem;
          }
          .modal-body {
            padding: 0 .625rem .75rem;
            white-space: normal;
          }
        }
      }
    `;
        return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: `${generalClassName} modal-dialog ${panelVisible ? '' : 'collapse'}`, css: getStyle(), children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'modal-content', children: getContent() }) }));
    };
    return isModal ? renderModalContent() : renderNonModalContent();
});
var EntityStatusType;
(function (EntityStatusType) {
    EntityStatusType["None"] = "";
    EntityStatusType["Init"] = "init";
    EntityStatusType["Loading"] = "loading";
    EntityStatusType["Loaded"] = "loaded";
    EntityStatusType["Warning"] = "warning";
    EntityStatusType["Error"] = "error";
})(EntityStatusType || (EntityStatusType = {}));
/**
 * An animatable icon representing status
 */
const StatusIndicator = (0,jimu_theme__WEBPACK_IMPORTED_MODULE_3__.withTheme)((props) => {
    const { theme, className, title, statusType } = props;
    const getStyle = () => {
        var _a, _b, _c, _d;
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
    &.ui-unit-status-indicator {
      display: flex;
      &.ui-unit-status-indicator_status-type-loading {
        &:before {
          @keyframes loading {
            0% {transform: rotate(0deg); };
            100% {transform: rotate(360deg)};
          }
          content: '';
          width: 1rem;
          height: 1rem;
          display: block;
          border: 1px solid ${(_b = (_a = theme === null || theme === void 0 ? void 0 : theme.ref.palette) === null || _a === void 0 ? void 0 : _a.neutral) === null || _b === void 0 ? void 0 : _b[500]};
          border-radius: 50%;
          border-top: 1px solid ${(_d = (_c = theme === null || theme === void 0 ? void 0 : theme.sys.color) === null || _c === void 0 ? void 0 : _c.primary) === null || _d === void 0 ? void 0 : _d.main};
          box-sizing: border-box;
          animation: loading 2s infinite linear;
          margin-right: .25rem;
        }
      }
    }
  `;
    };
    return (statusType &&
        (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: `${className !== null && className !== void 0 ? className : ''} ui-unit-status-indicator ui-unit-status-indicator_status-type-${statusType}`, title: title, css: getStyle() }));
});
/**
 * Simple error message component for displaying user-facing errors.
 * Use DataSourceTip for data source-related errors.
 */
const ErrorMessage = (props) => {
    const { error, className = '', onDismiss } = props;
    if (!error) {
        return null;
    }
    const errorStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
    display: flex;
    align-items: center;
    padding: 0.5rem;
    margin: 0.5rem 0;
    background-color: var(--sys-color-error-light);
    color: var(--sys-color-error-dark);
    border-radius: 4px;
    font-size: 0.875rem;
    gap: 0.5rem;
    
    .error-icon {
      flex-shrink: 0;
    }
    
    .error-text {
      flex: 1;
    }
    
    .error-dismiss {
      flex-shrink: 0;
      cursor: pointer;
      padding: 0.25rem;
      &:hover {
        opacity: 0.7;
      }
    }
  `;
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: `error-message ${className}`, css: errorStyle, role: "alert", children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Icon, { icon: (jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_4___default()), className: "error-icon", size: "sm" }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { className: "error-text", children: error }), onDismiss && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: "sm", type: "tertiary", icon: true, onClick: onDismiss, className: "error-dismiss", "aria-label": "Dismiss error", children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Icon, { icon: (__webpack_require__(/*! jimu-icons/svg/outlined/editor/close.svg */ "./jimu-icons/svg/outlined/editor/close.svg")["default"]), size: "sm" }) }))] }));
};


/***/ }),

/***/ "./your-extensions/widgets/shared-code/common/data-source-tip.tsx":
/*!************************************************************************!*\
  !*** ./your-extensions/widgets/shared-code/common/data-source-tip.tsx ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DataSourceTip: () => (/* binding */ DataSourceTip)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _common_components__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./common-components */ "./your-extensions/widgets/shared-code/common/common-components.tsx");
/* harmony import */ var jimu_icons_svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-icons/svg/outlined/suggested/warning.svg */ "./jimu-icons/svg/outlined/suggested/warning.svg");
/* harmony import */ var jimu_icons_svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jimu-icons/svg/outlined/suggested/error.svg */ "./jimu-icons/svg/outlined/suggested/error.svg");
/* harmony import */ var jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _use_ds_exists__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./use-ds-exists */ "./your-extensions/widgets/shared-code/common/use-ds-exists.tsx");

/** @jsx jsx */






/**
 * Show icon and message if the data source doesn't work.
 * @param props
 * @returns
 */
function DataSourceTip(props) {
    var _a, _b, _c;
    const { widgetId, useDataSource, onStatusChange, onDataSourceCreated, showMessage = false } = props;
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.defaultMessages);
    const dsExists = (0,_use_ds_exists__WEBPACK_IMPORTED_MODULE_6__.useDataSourceExists)({ widgetId, useDataSourceId: useDataSource.dataSourceId });
    const [dsStatus, setDsStatus] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const [dataSource, setDataSource] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const handleDsInfoChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((info) => {
        if (info) {
            const { status, instanceStatus } = info;
            if (instanceStatus === jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.NotCreated) {
                setDsStatus('creating');
                onStatusChange === null || onStatusChange === void 0 ? void 0 : onStatusChange(false);
            }
            else if (instanceStatus === jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.CreateError || status === jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.LoadError) {
                setDsStatus('error');
                onStatusChange === null || onStatusChange === void 0 ? void 0 : onStatusChange(false);
            }
            else if (status === jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.NotReady) {
                setDsStatus('warning');
                onStatusChange === null || onStatusChange === void 0 ? void 0 : onStatusChange(false);
            }
            else {
                setDsStatus(null);
                onStatusChange === null || onStatusChange === void 0 ? void 0 : onStatusChange(true);
            }
        }
    }, [onStatusChange]);
    const handleDsCreated = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((ds) => {
        setDataSource(ds);
        onDataSourceCreated === null || onDataSourceCreated === void 0 ? void 0 : onDataSourceCreated(ds);
    }, [onDataSourceCreated]);
    const handleDsCreateFailed = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        setDataSource(null);
        setDsStatus('error');
        onStatusChange === null || onStatusChange === void 0 ? void 0 : onStatusChange(false);
    }, [onStatusChange]);
    let statusIcon;
    let statusMsg;
    let color;
    if (dsStatus === 'creating') {
        statusIcon = (jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_5___default());
        statusMsg = getI18nMessage('loading');
    }
    else if (!dsExists || dsStatus === 'error') {
        statusIcon = (jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_5___default());
        statusMsg = getI18nMessage('dataSourceCreateError');
        color = 'var(--sys-color-error-main)';
    }
    else if (dsStatus === 'warning') {
        let label = '';
        const originDs = (_a = dataSource === null || dataSource === void 0 ? void 0 : dataSource.getOriginDataSources()) === null || _a === void 0 ? void 0 : _a[0];
        if (originDs) {
            label = originDs.getLabel() || originDs.getDataSourceJson().sourceLabel;
        }
        else if (dataSource) {
            label = dataSource.getLabel() || dataSource.getDataSourceJson().label;
        }
        const widgetId = jimu_core__WEBPACK_IMPORTED_MODULE_1__.appConfigUtils.getWidgetIdByOutputDataSource(useDataSource);
        const appState = ((_b = window === null || window === void 0 ? void 0 : window.jimuConfig) === null || _b === void 0 ? void 0 : _b.isBuilder)
            ? (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.getAppStore)().getState().appStateInBuilder
            : (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.getAppStore)().getState();
        const widgetLabel = (_c = appState.appConfig.widgets[widgetId]) === null || _c === void 0 ? void 0 : _c.label;
        color = 'var(--sys-color-warning-dark)';
        statusIcon = (jimu_icons_svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_4___default());
        statusMsg = getI18nMessage('outputDataIsNotGenerated', {
            outputDsLabel: label !== null && label !== void 0 ? label : '',
            sourceWidgetName: widgetLabel !== null && widgetLabel !== void 0 ? widgetLabel : ''
        });
    }
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [dsExists && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceComponent, { useDataSource: useDataSource, onDataSourceInfoChange: handleDsInfoChange, onDataSourceCreated: handleDsCreated, onCreateDataSourceFailed: handleDsCreateFailed })), dsStatus === 'creating' && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_common_components__WEBPACK_IMPORTED_MODULE_3__.StatusIndicator, { statusType: _common_components__WEBPACK_IMPORTED_MODULE_3__.EntityStatusType.Loading, title: statusMsg }), (!dsExists || dsStatus === 'error' || dsStatus === 'warning') && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'd-flex align-items-center', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { title: statusMsg, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: 'sm', type: 'tertiary', icon: true, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Icon, { icon: statusIcon, color: color }) }) }), showMessage && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'status-message', children: statusMsg })] }))] }));
}


/***/ }),

/***/ "./your-extensions/widgets/shared-code/common/debug-logger.ts":
/*!********************************************************************!*\
  !*** ./your-extensions/widgets/shared-code/common/debug-logger.ts ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createHelperSimpleDebugLogger: () => (/* binding */ createHelperSimpleDebugLogger),
/* harmony export */   createQuerySimpleDebugLogger: () => (/* binding */ createQuerySimpleDebugLogger)
/* harmony export */ });
/**
 * Configurable debug logging utility for Experience Builder widgets
 *
 * Usage:
 * - Add ?debug=all to URL to see all debug logs
 * - Add ?debug=HASH,FORM to see specific feature logs
 * - Add ?debug=false to disable all debug logs
 *
 * Features (QuerySimple):
 * - BUG: Known bugs/issues (always logs, even if debug=false) - Use format: bugId, category, description
 * - HASH: Hash parameter processing
 * - FORM: Query form interactions
 * - TASK: Query task management
 * - ZOOM: Zoom behavior
 * - MAP-EXTENT: Map extent changes
 * - DATA-ACTION: Data action execution (Add to Map, etc.)
 * - GROUP: Query grouping and dropdown selection
 * - SELECTION: Selection detection and identify popup tracking
 * - WIDGET-STATE: Widget lifecycle events (open/close handshake)
 * - RESTORE: Selection restoration when widget opens
 * - RESULTS-MODE: Results management mode selection (Create new, Add to, Remove from)
 * - EXPAND-COLLAPSE: Expand/collapse state management for result items
 * - GRAPHICS-LAYER: Graphics layer highlighting (independent of layer visibility)
 * - EVENTS: Event listener setup/cleanup and custom event dispatching
 *
 * Temporary Migration Features (will be removed after migration complete):
 * - CHUNK-1-COMPARE: Chunk 1 (URL Parameter) comparison logs
 * - CHUNK-1-MISMATCH: Chunk 1 mismatch warnings
 * - CHUNK-2-COMPARE: Chunk 2 (Visibility) comparison logs
 * - CHUNK-2-MISMATCH: Chunk 2 mismatch warnings
 * - CHUNK-3-COMPARE: Chunk 3 (Selection/Restoration) comparison logs
 * - CHUNK-3-DECISION: Chunk 3 decision point logs
 * - CHUNK-3-FALLBACK: Chunk 3 fallback logic logs
 * - CHUNK-4-COMPARE: Chunk 4 (Graphics Layer) comparison logs
 * - CHUNK-5-COMPARE: Chunk 5 (Accumulated Records) comparison logs
 * - CHUNK-6-COMPARE: Chunk 6 (Map View) comparison logs
 * - CHUNK-6-MISMATCH: Chunk 6 mismatch warnings
 *
 * Features (HelperSimple):
 * - HASH: Hash parameter monitoring and widget opening
 * - SELECTION: Selection tracking from QuerySimple
 * - WIDGET-STATE: Widget state handshake (open/close events)
 * - RESTORE: Selection restoration attempts and results
 */
class DebugLogger {
    constructor(options) {
        this.enabledFeatures = new Set();
        this.initialized = false;
        this.widgetName = options.widgetName;
        this.features = options.features;
    }
    initialize() {
        if (this.initialized)
            return;
        // Check URL parameters (both current window and parent for iframes)
        let urlParams = new URLSearchParams(window.location.search);
        let debugValue = urlParams.get('debug');
        // If not found in current window, check parent (needed for ExB iframes)
        if (debugValue === null && window.parent !== window) {
            try {
                urlParams = new URLSearchParams(window.parent.location.search);
                debugValue = urlParams.get('debug');
            }
            catch (e) {
                // Cross-origin restriction might prevent access to parent location
            }
        }
        if (debugValue === 'false') {
            // Explicitly disabled
            this.initialized = true;
            return;
        }
        if (debugValue === 'all') {
            // Enable all features only if explicitly set to 'all'
            this.features.forEach(feature => {
                if (feature !== 'all' && feature !== 'false') {
                    this.enabledFeatures.add(feature);
                }
            });
            console.log(`[${this.widgetName}-DEBUG] Enabled ALL features:`, Array.from(this.enabledFeatures));
        }
        else if (debugValue !== null) {
            // Parse comma-separated feature list
            const requestedFeatures = debugValue.split(',').map(f => f.trim().toUpperCase());
            requestedFeatures.forEach(feature => {
                if (feature.toUpperCase() === 'ALL') {
                    // Enable all features for this widget
                    this.features.forEach(f => {
                        if (f !== 'all' && f !== 'false') {
                            this.enabledFeatures.add(f);
                        }
                    });
                }
                else if (this.features.includes(feature)) {
                    this.enabledFeatures.add(feature);
                }
            });
        }
        this.initialized = true;
    }
    isEnabled(feature) {
        this.initialize();
        // BUG level always enabled, regardless of debug switches (even if debug=false)
        if (feature === 'BUG') {
            return true;
        }
        if (this.enabledFeatures.has('all')) {
            return true;
        }
        return this.enabledFeatures.has(feature);
    }
    log(feature, data) {
        // BUG level always logs, even if debug=false
        if (feature === 'BUG') {
            const logData = Object.assign({ feature: 'BUG', bugId: data.bugId || 'UNKNOWN', category: data.category || 'GENERAL', timestamp: new Date().toISOString() }, data);
            // Use console.warn with emoji format to make bugs stand out
            console.warn(`[${this.widgetName.toUpperCase()}  BUG]`, JSON.stringify(logData, null, 2));
            return;
        }
        // Regular feature logging (existing behavior)
        if (!this.isEnabled(feature)) {
            return;
        }
        const logData = Object.assign({ feature, timestamp: new Date().toISOString() }, data);
        console.log(`[${this.widgetName.toUpperCase()}-${feature}]`, JSON.stringify(logData, null, 2));
    }
    getConfig() {
        this.initialize();
        const urlParams = new URLSearchParams(window.location.search);
        const debugValue = urlParams.get('debug');
        return {
            enabledFeatures: Array.from(this.enabledFeatures),
            debugValue
        };
    }
}
/**
 * Creates a debug logger instance for QuerySimple widget
 */
function createQuerySimpleDebugLogger() {
    return new DebugLogger({
        widgetName: 'QUERYSIMPLE',
        features: [
            'HASH', 'HASH-EXEC', 'HASH-FIRST-LOAD', 'FORM', 'TASK', 'ZOOM', 'MAP-EXTENT', 'DATA-ACTION', 'GROUP',
            'SELECTION', 'WIDGET-STATE', 'RESTORE', 'RESULTS-MODE', 'EXPAND-COLLAPSE', 'GRAPHICS-LAYER', 'EVENTS',
            // Temporary migration features (will be removed after migration complete)
            'CHUNK-1-COMPARE', 'CHUNK-1-MISMATCH', 'CHUNK-2-COMPARE', 'CHUNK-2-MISMATCH', 'CHUNK-3-COMPARE', 'CHUNK-3-DECISION', 'CHUNK-3-FALLBACK',
            'CHUNK-4-COMPARE', 'CHUNK-5-COMPARE', 'CHUNK-6-COMPARE', 'CHUNK-6-MISMATCH'
        ]
    });
}
/**
 * Creates a debug logger instance for HelperSimple widget
 */
function createHelperSimpleDebugLogger() {
    return new DebugLogger({
        widgetName: 'HELPERSIMPLE',
        features: ['HASH', 'HASH-EXEC', 'SELECTION', 'WIDGET-STATE', 'RESTORE']
    });
}


/***/ }),

/***/ "./your-extensions/widgets/shared-code/common/use-ds-exists.tsx":
/*!**********************************************************************!*\
  !*** ./your-extensions/widgets/shared-code/common/use-ds-exists.tsx ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   useDataSourceExists: () => (/* binding */ useDataSourceExists)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");

function useDataSourceExists(props) {
    const { widgetId, useDataSourceId } = props;
    const exists = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        var _a;
        let appConfig;
        if (window.jimuConfig.isBuilder) {
            appConfig = state.appStateInBuilder.appConfig;
        }
        else {
            appConfig = state.appConfig;
        }
        const useDataSources = (_a = appConfig.widgets[widgetId].useDataSources) !== null && _a !== void 0 ? _a : [];
        return useDataSources.some(useDs => useDs.dataSourceId === useDataSourceId);
    });
    return exists;
}


/***/ }),

/***/ "./your-extensions/widgets/shared-code/common/utils.tsx":
/*!**************************************************************!*\
  !*** ./your-extensions/widgets/shared-code/common/utils.tsx ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createGetI18nMessage: () => (/* binding */ createGetI18nMessage),
/* harmony export */   getFieldInfosInPopupContent: () => (/* binding */ getFieldInfosInPopupContent),
/* harmony export */   toggleItemInArray: () => (/* binding */ toggleItemInArray)
/* harmony export */ });
/**
 * Toggle items in an array
 */
const toggleItemInArray = (item, items = []) => items.includes(item) ? items.filter(i => i !== item) : [...items, item];
/**
 * A factory to create a function of getting i18n message
 */
function createGetI18nMessage(options) {
    const { intl, defaultMessages = {} } = options || {};
    const getI18nMessage = (id, options) => {
        const { messages, values } = options || {};
        return intl.formatMessage({ id, defaultMessage: (messages || defaultMessages)[id] }, values);
    };
    return getI18nMessage;
}
function getFieldInfosInPopupContent(popupInfo) {
    var _a;
    const result = [];
    if (((_a = popupInfo === null || popupInfo === void 0 ? void 0 : popupInfo.popupElements) === null || _a === void 0 ? void 0 : _a.length) > 0) {
        popupInfo.popupElements.forEach(element => {
            var _a;
            if (element.type === 'fields' && ((_a = element.fieldInfos) === null || _a === void 0 ? void 0 : _a.length) > 0) {
                result.push(...element.fieldInfos);
            }
        });
    }
    return result;
}


/***/ }),

/***/ "@emotion/react/jsx-runtime":
/*!************************************!*\
  !*** external "jimu-core/emotion" ***!
  \************************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE__emotion_react_jsx_runtime__;

/***/ }),

/***/ "jimu-arcgis":
/*!******************************!*\
  !*** external "jimu-arcgis" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_arcgis__;

/***/ }),

/***/ "jimu-core":
/*!****************************!*\
  !*** external "jimu-core" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_core__;

/***/ }),

/***/ "jimu-layouts/layout-runtime":
/*!**********************************************!*\
  !*** external "jimu-layouts/layout-runtime" ***!
  \**********************************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_layouts_layout_runtime__;

/***/ }),

/***/ "jimu-theme":
/*!*****************************!*\
  !*** external "jimu-theme" ***!
  \*****************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_theme__;

/***/ }),

/***/ "jimu-ui":
/*!**************************!*\
  !*** external "jimu-ui" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_ui__;

/***/ }),

/***/ "jimu-ui/basic/sql-expression-runtime":
/*!*******************************************************!*\
  !*** external "jimu-ui/basic/sql-expression-runtime" ***!
  \*******************************************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_ui_basic_sql_expression_runtime__;

/***/ }),

/***/ "react":
/*!**********************************!*\
  !*** external "jimu-core/react" ***!
  \**********************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_react__;

/***/ }),

/***/ "widgets/shared-code/common":
/*!*********************************************!*\
  !*** external "widgets/shared-code/common" ***!
  \*********************************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_widgets_shared_code_common__;

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/publicPath */
/******/ 	(() => {
/******/ 		__webpack_require__.p = "";
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry needs to be wrapped in an IIFE because it needs to be isolated against other entry modules.
(() => {
/*!******************************************!*\
  !*** ./jimu-core/lib/set-public-path.ts ***!
  \******************************************/
/**
 * Webpack will replace __webpack_public_path__ with __webpack_require__.p to set the public path dynamically.
 * The reason why we can't set the publicPath in webpack config is: we change the publicPath when download.
 * */
__webpack_require__.p = window.jimuConfig.baseUrl;

})();

// This entry needs to be wrapped in an IIFE because it needs to be in strict mode.
(() => {
"use strict";
/*!*********************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/widget.tsx ***!
  \*********************************************************************/
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   __set_webpack_public_path__: () => (/* binding */ __set_webpack_public_path__),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _widget_config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./widget-config */ "./your-extensions/widgets/query-simple/src/runtime/widget-config.ts");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");
/* harmony import */ var _version_manager__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../version-manager */ "./your-extensions/widgets/query-simple/src/version-manager.ts");
/* harmony import */ var _query_task_list__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./query-task-list */ "./your-extensions/widgets/query-simple/src/runtime/query-task-list.tsx");
/* harmony import */ var _query_task_list_inline__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./query-task-list-inline */ "./your-extensions/widgets/query-simple/src/runtime/query-task-list-inline.tsx");
/* harmony import */ var _query_task_list_popper_wrapper__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./query-task-list-popper-wrapper */ "./your-extensions/widgets/query-simple/src/runtime/query-task-list-popper-wrapper.tsx");
/* harmony import */ var _widget_context__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./widget-context */ "./your-extensions/widgets/query-simple/src/runtime/widget-context.tsx");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/* harmony import */ var _version__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../version */ "./your-extensions/widgets/query-simple/src/version.ts");
/* harmony import */ var _hooks_use_url_consumption__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./hooks/use-url-consumption */ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-url-consumption.ts");
/* harmony import */ var _hooks_use_widget_visibility__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./hooks/use-widget-visibility */ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-widget-visibility.ts");
/* harmony import */ var _hooks_use_map_view__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./hooks/use-map-view */ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-map-view.ts");
/* harmony import */ var _hooks_use_graphics_layer__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./hooks/use-graphics-layer */ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-graphics-layer.ts");
/* harmony import */ var _hooks_use_accumulated_records__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./hooks/use-accumulated-records */ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-accumulated-records.ts");
/* harmony import */ var _hooks_use_event_handling__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./hooks/use-event-handling */ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-event-handling.ts");
/* harmony import */ var _hooks_use_selection_restoration__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./hooks/use-selection-restoration */ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-selection-restoration.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};

/** @jsx jsx */













// Chunk 1: URL Parameter Consumption Manager (r018.8)

// Chunk 2: Widget Visibility Engine Manager (r018.13) - Step 2.3: Switch to manager

// Chunk 6: Map View Management Manager (r018.14) - Step 6.1: Add manager without integration

// Chunk 4: Graphics Layer Management Manager (r018.24) - Step 4.2: Parallel execution

// Chunk 5: Accumulated Records Management Manager (r018.26) - Step 5.1: Add manager without integration

// Chunk 7: Event Handling Manager (r018.59) - Step 7.1: Create Event Manager

// Chunk 3: Selection & Restoration Manager (r019.1) - Section 3.1: Selection State Tracking

const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_12__.createQuerySimpleDebugLogger)();
const { iconMap } = (0,_widget_config__WEBPACK_IMPORTED_MODULE_5__.getWidgetRuntimeDataMap)();
// Event constants moved to EventManager (r018.59 - Chunk 7.1)
/**
 * QuerySimple Widget
 *
 * A high-performance query widget for ArcGIS Experience Builder that provides:
 * - Universal SQL optimization for database index usage
 * - Dual-mode deep linking (hash fragments and query strings)
 * - Results accumulation across multiple queries
 * - Selection persistence and restoration
 * - Graphics layer highlighting for map visualization
 *
 * Architecture:
 * This widget follows a "Hook & Shell" pattern where complex logic is extracted into
 * manager classes (UrlConsumptionManager, WidgetVisibilityManager, MapViewManager)
 * to keep the main widget class clean and maintainable.
 *
 * @since 1.19.0-r018.18
 * @see {@link UrlConsumptionManager} for URL parameter handling
 * @see {@link WidgetVisibilityManager} for panel visibility detection
 * @see {@link MapViewManager} for map view reference management
 */
class Widget extends jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.PureComponent {
    constructor() {
        super(...arguments);
        // Chunk 1: URL Parameter Consumption Manager (r018.8)
        this.urlConsumptionManager = new _hooks_use_url_consumption__WEBPACK_IMPORTED_MODULE_14__.UrlConsumptionManager();
        // Chunk 2: Widget Visibility Engine Manager (r018.13) - Step 2.3: Switch to manager
        this.visibilityManager = new _hooks_use_widget_visibility__WEBPACK_IMPORTED_MODULE_15__.WidgetVisibilityManager();
        // Refs must be declared before managers that use them
        this.widgetRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.createRef();
        this.graphicsLayerRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.createRef();
        this.mapViewRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.createRef();
        // Chunk 6: Map View Management Manager (r018.16) - Step 6.3: Switch to manager
        this.mapViewManager = new _hooks_use_map_view__WEBPACK_IMPORTED_MODULE_16__.MapViewManager(this.mapViewRef);
        // Chunk 4: Graphics Layer Management Manager (r018.24) - Step 4.2: Parallel execution
        this.graphicsLayerManager = new _hooks_use_graphics_layer__WEBPACK_IMPORTED_MODULE_17__.GraphicsLayerManager(this.graphicsLayerRef, this.mapViewRef);
        // Chunk 5: Accumulated Records Management Manager (r018.26) - Step 5.1: Add manager without integration
        this.accumulatedRecordsManager = new _hooks_use_accumulated_records__WEBPACK_IMPORTED_MODULE_18__.AccumulatedRecordsManager();
        // Chunk 7: Event Handling Manager (r018.59) - Step 7.1: Create Event Manager
        this.eventManager = new _hooks_use_event_handling__WEBPACK_IMPORTED_MODULE_19__.EventManager();
        // Chunk 3: Selection & Restoration Manager (r019.1) - Section 3.1: Selection State Tracking
        this.selectionRestorationManager = new _hooks_use_selection_restoration__WEBPACK_IMPORTED_MODULE_20__.SelectionRestorationManager(() => this.state, // stateGetter
        {
            onStateUpdate: (newState) => this.setState(newState)
        });
        this.state = {
            resultsMode: _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.NewSelection, // Default mode
            activeTab: 'query'
        };
        /**
         * Handles tab change between "Query" and "Results" tabs.
         *
         * @param activeTab - The tab to switch to ('query' or 'results')
         *
         * @since 1.19.0-r017.0
         */
        this.handleTabChange = (activeTab) => {
            this.setState({ activeTab });
        };
        /**
         * Resets the manual modifications flag when user starts fresh operations.
         * This allows hash-triggered queries to work again after explicit user actions.
         */
        this.resetManualModifications = () => {
            // FIX (r018.96): Removed manuallyRemovedRecordIds tracking - no longer needed
            // Duplicate detection in mergeResultsIntoAccumulated handles preventing duplicates
            const hasManualModifications = this.state.hasManualModifications;
            debugLogger.log('RESULTS-MODE', {
                event: 'reset-manual-modifications-check',
                widgetId: this.props.id,
                hasManualModifications,
                note: 'r018.96: No manuallyRemovedRecordIds tracking',
                timestamp: Date.now()
            });
            if (hasManualModifications) {
                debugLogger.log('RESULTS-MODE', {
                    event: 'resetting-manual-modifications',
                    widgetId: this.props.id,
                    reason: 'user-started-fresh-operation',
                    hadManualModificationsFlag: hasManualModifications,
                    note: 'r018.96: No manuallyRemovedRecordIds to clear',
                    timestamp: Date.now()
                });
            }
        };
        /**
         * Handles HelperSimple's open widget event.
         * QuerySimple should only process hash parameters when HelperSimple explicitly opens the widget.
         * This ensures HelperSimple remains the orchestrator and prevents autonomous hash processing.
         */
        this.handleOpenWidgetEvent = (event) => {
            var _a, _b, _c, _d, _e, _f, _g, _h;
            const { id } = this.props;
            debugLogger.log('HASH-EXEC', {
                event: 'querysimple-handleopenwidgetevent-received',
                widgetId: id,
                eventWidgetId: (_a = event.detail) === null || _a === void 0 ? void 0 : _a.widgetId,
                matches: ((_b = event.detail) === null || _b === void 0 ? void 0 : _b.widgetId) === id,
                currentState: {
                    shouldUseInitialQueryValueForSelection: this.state.shouldUseInitialQueryValueForSelection,
                    hasInitialQueryValue: !!this.state.initialQueryValue,
                    initialQueryValueShortId: (_c = this.state.initialQueryValue) === null || _c === void 0 ? void 0 : _c.shortId,
                    initialQueryValueValue: (_d = this.state.initialQueryValue) === null || _d === void 0 ? void 0 : _d.value,
                    currentUrlHash: window.location.hash.substring(1),
                },
                timestamp: Date.now()
            });
            // With surgical hash modification, the hash already contains only desired record IDs
            // No need to block processing - the hash is now a precise representation of selection intent
            // Only process if this event is for our widget
            if (((_e = event.detail) === null || _e === void 0 ? void 0 : _e.widgetId) !== id) {
                debugLogger.log('HASH-EXEC', {
                    event: 'querysimple-handleopenwidgetevent-ignored-wrong-widget',
                    widgetId: id,
                    eventWidgetId: (_f = event.detail) === null || _f === void 0 ? void 0 : _f.widgetId,
                    timestamp: Date.now()
                });
                return;
            }
            // NOTE: We don't check processed hashes here anymore
            // The check happens in onInitialValueFound after we know which shortId:value pair is being processed
            debugLogger.log('HASH', {
                event: 'open-widget-event-received-from-helpersimple',
                widgetId: id,
                timestamp: Date.now()
            });
            // Set flag to allow query-task-list to use initialQueryValue for selection
            // This ensures we only react to hash parameters when HelperSimple explicitly opens us
            // Using state instead of ref ensures React triggers re-render so query-task-list sees the change
            this.setState({ shouldUseInitialQueryValueForSelection: true }, () => {
                var _a, _b;
                debugLogger.log('HASH-EXEC', {
                    event: 'querysimple-flag-set-true-state-updated',
                    widgetId: id,
                    newState: {
                        shouldUseInitialQueryValueForSelection: this.state.shouldUseInitialQueryValueForSelection,
                        hasInitialQueryValue: !!this.state.initialQueryValue,
                        initialQueryValueShortId: (_a = this.state.initialQueryValue) === null || _a === void 0 ? void 0 : _a.shortId,
                        initialQueryValueValue: (_b = this.state.initialQueryValue) === null || _b === void 0 ? void 0 : _b.value
                    },
                    timestamp: Date.now()
                });
            });
            debugLogger.log('HASH', {
                event: 'shouldUseInitialQueryValueForSelection-flag-set-true',
                widgetId: id,
                flagValue: true,
                timestamp: Date.now()
            });
            // Now check URL parameters - HelperSimple has explicitly opened us
            debugLogger.log('HASH-EXEC', {
                event: 'querysimple-checkurlparameters-starting',
                widgetId: this.props.id,
                currentState: {
                    shouldUseInitialQueryValueForSelection: this.state.shouldUseInitialQueryValueForSelection,
                    hasInitialQueryValue: !!this.state.initialQueryValue,
                    initialQueryValueShortId: (_g = this.state.initialQueryValue) === null || _g === void 0 ? void 0 : _g.shortId,
                    initialQueryValueValue: (_h = this.state.initialQueryValue) === null || _h === void 0 ? void 0 : _h.value
                },
                timestamp: Date.now()
            });
            this.urlConsumptionManager.checkUrlParameters(this.props, this.state.resultsMode, {
                onInitialValueFound: (value) => {
                    var _a, _b, _c, _d, _e, _f, _g, _h;
                    debugLogger.log('HASH-EXEC', {
                        event: 'querysimple-oninitialvaluefound-called',
                        widgetId: this.props.id,
                        hasValue: !!value,
                        valueShortId: value === null || value === void 0 ? void 0 : value.shortId,
                        valueValue: value === null || value === void 0 ? void 0 : value.value,
                        currentState: {
                            shouldUseInitialQueryValueForSelection: this.state.shouldUseInitialQueryValueForSelection,
                            hasInitialQueryValue: !!this.state.initialQueryValue,
                            initialQueryValueShortId: (_a = this.state.initialQueryValue) === null || _a === void 0 ? void 0 : _a.shortId,
                            initialQueryValueValue: (_b = this.state.initialQueryValue) === null || _b === void 0 ? void 0 : _b.value
                        },
                        timestamp: Date.now()
                    });
                    if (value) {
                        // Only update if the value or shortId has changed to avoid unnecessary re-renders
                        const willUpdate = ((_c = this.state.initialQueryValue) === null || _c === void 0 ? void 0 : _c.shortId) !== value.shortId || ((_d = this.state.initialQueryValue) === null || _d === void 0 ? void 0 : _d.value) !== value.value;
                        debugLogger.log('HASH-EXEC', {
                            event: 'querysimple-oninitialvaluefound-will-update',
                            widgetId: this.props.id,
                            willUpdate,
                            previousShortId: (_e = this.state.initialQueryValue) === null || _e === void 0 ? void 0 : _e.shortId,
                            previousValue: (_f = this.state.initialQueryValue) === null || _f === void 0 ? void 0 : _f.value,
                            newShortId: value.shortId,
                            newValue: value.value,
                            timestamp: Date.now()
                        });
                        if (willUpdate) {
                            debugLogger.log('HASH', {
                                event: 'url-param-detected',
                                widgetId: this.props.id,
                                shortId: value.shortId,
                                value: value.value,
                                foundIn: 'manager',
                                triggeredBy: 'helpersimple-open-widget-event',
                                previousShortId: (_g = this.state.initialQueryValue) === null || _g === void 0 ? void 0 : _g.shortId,
                                previousValue: (_h = this.state.initialQueryValue) === null || _h === void 0 ? void 0 : _h.value,
                                timestamp: Date.now()
                            });
                            // Reset to New mode when hash parameter is detected to avoid bugs with accumulation modes
                            // Using AccumulatedRecordsManager (r018.58)
                            const needsModeReset = this.state.resultsMode !== _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.NewSelection;
                            const currentMode = this.state.resultsMode;
                            // Update initialQueryValue state
                            this.setState({
                                initialQueryValue: { shortId: value.shortId, value: value.value }
                            }, () => {
                                var _a, _b;
                                debugLogger.log('HASH-EXEC', {
                                    event: 'querysimple-initialqueryvalue-state-updated',
                                    widgetId: this.props.id,
                                    newState: {
                                        shouldUseInitialQueryValueForSelection: this.state.shouldUseInitialQueryValueForSelection,
                                        hasInitialQueryValue: !!this.state.initialQueryValue,
                                        initialQueryValueShortId: (_a = this.state.initialQueryValue) === null || _a === void 0 ? void 0 : _a.shortId,
                                        initialQueryValueValue: (_b = this.state.initialQueryValue) === null || _b === void 0 ? void 0 : _b.value,
                                        resultsMode: this.state.resultsMode
                                    },
                                    timestamp: Date.now()
                                });
                            });
                            // Reset mode via manager if needed
                            if (needsModeReset) {
                                const resetResult = this.accumulatedRecordsManager.resetModeOnHashDetection(this.props.id, currentMode);
                                // Update widget state from manager's return value
                                this.setState({
                                    resultsMode: resetResult.resultsMode,
                                    accumulatedRecords: resetResult.accumulatedRecords
                                });
                            }
                        }
                    }
                    else {
                        debugLogger.log('HASH-EXEC', {
                            event: 'querysimple-oninitialvaluefound-no-value-clearing',
                            widgetId: this.props.id,
                            hasCurrentInitialQueryValue: !!this.state.initialQueryValue,
                            timestamp: Date.now()
                        });
                        // No matching parameters found - clear state
                        if (this.state.initialQueryValue) {
                            this.setState({ initialQueryValue: undefined });
                        }
                    }
                },
                onModeResetNeeded: () => {
                    // Reset to New mode when hash parameter is detected
                    // Using AccumulatedRecordsManager (r018.58)
                    const currentMode = this.state.resultsMode;
                    const needsReset = currentMode !== _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.NewSelection;
                    if (needsReset) {
                        debugLogger.log('HASH', {
                            event: 'mode-reset-needed-on-hash-detection',
                            widgetId: this.props.id,
                            currentMode,
                            triggeredBy: 'helpersimple-open-widget-event',
                            timestamp: Date.now()
                        });
                        const resetResult = this.accumulatedRecordsManager.resetModeOnHashDetection(this.props.id, currentMode);
                        // Update widget state from manager's return value
                        this.setState({
                            resultsMode: resetResult.resultsMode,
                            accumulatedRecords: resetResult.accumulatedRecords
                        });
                    }
                }
            });
        };
        /**
         * Notifies HelperSimple widget of selection changes via custom event.
         *
         * This method dispatches a custom event that HelperSimple listens to for tracking
         * selection state. Called by QueryTaskResult component when user selects records.
         *
         * @param recordIds - Array of selected record IDs (objectIds from the feature layer)
         * @param dataSourceId - Optional data source ID for the selected records
         *
         * @since 1.19.0-r017.0
         */
        this.notifyHelperSimpleOfSelection = (recordIds, dataSourceId) => {
            const { id } = this.props;
            // Chunk 7: Dispatch selection event via EventManager (r018.59)
            // Note: This call is missing outputDsId and queryItemConfigId, but this method
            // is only used for notifying HelperSimple, not for setting lastSelection state.
            // The actual selection events come from query-task.tsx and query-result.tsx
            // which use dispatchSelectionEvent from selection-utils.ts
            this.eventManager.dispatchSelectionEvent(id, recordIds, dataSourceId);
        };
        /**
         * Handles widget panel visibility changes from WidgetVisibilityManager.
         *
         * This method implements the selection restoration pattern:
         * - When panel opens: Restores selection to map if widget has accumulated records or last selection
         * - When panel closes: Clears selection from map (but preserves widget state for restoration)
         *
         * The restoration logic respects the current results mode:
         * - "Add to" / "Remove from" modes: Uses accumulated records for restoration
         * - "New" mode: Uses lastSelection state for restoration
         *
         * @param isVisible - True if widget panel is visible, false if hidden
         *
         * @since 1.19.0-r018.13 (Chunk 2: Manager implementation)
         * @see {@link WidgetVisibilityManager} for visibility detection implementation
         */
        this.handleVisibilityChange = (isVisible) => {
            var _a, _b, _c, _d;
            if (isVisible) {
                // When panel opens, check if we have selection to restore
                const isAccumulationMode = this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.AddToSelection ||
                    this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection;
                const hasAccumulatedRecords = this.state.accumulatedRecords && this.state.accumulatedRecords.length > 0;
                const hasSelectionState = this.state.hasSelection || false;
                const hasSelectionToRestore = isAccumulationMode
                    ? hasAccumulatedRecords
                    : hasSelectionState;
                debugLogger.log('RESTORE', {
                    event: 'panel-opened-checking-selection',
                    widgetId: this.props.id,
                    resultsMode: this.state.resultsMode,
                    isAccumulationMode,
                    hasSelection: hasSelectionState,
                    hasAccumulatedRecords,
                    accumulatedRecordsCount: ((_a = this.state.accumulatedRecords) === null || _a === void 0 ? void 0 : _a.length) || 0,
                    selectionRecordCount: this.state.selectionRecordCount || 0,
                    hasLastSelection: !!this.state.lastSelection,
                    lastSelectionRecordCount: ((_b = this.state.lastSelection) === null || _b === void 0 ? void 0 : _b.recordIds.length) || 0,
                    hasSelectionToRestore,
                    decisionLogic: {
                        'isAccumulationMode': isAccumulationMode,
                        'hasAccumulatedRecords': hasAccumulatedRecords,
                        'hasSelectionState': hasSelectionState,
                        'calculated-hasSelectionToRestore': hasSelectionToRestore,
                        'will-call-addSelectionToMap': hasSelectionToRestore
                    }
                });
                // Add selection to map if we have one
                if (hasSelectionToRestore) {
                    debugLogger.log('RESTORE', {
                        event: 'panel-opened-calling-addSelectionToMap',
                        widgetId: this.props.id,
                        reason: 'hasSelectionToRestore-is-true'
                    });
                    (() => __awaiter(this, void 0, void 0, function* () {
                        const deps = {
                            graphicsLayerRef: this.graphicsLayerRef,
                            mapViewRef: this.mapViewRef,
                            graphicsLayerManager: this.graphicsLayerManager,
                            config: this.props.config
                        };
                        yield this.selectionRestorationManager.addSelectionToMap(deps);
                    }))();
                }
                else {
                    debugLogger.log('RESTORE', {
                        event: 'panel-opened-skipping-addSelectionToMap',
                        widgetId: this.props.id,
                        reason: 'hasSelectionToRestore-is-false',
                        why: isAccumulationMode
                            ? 'no-accumulated-records'
                            : 'no-hasSelection-state'
                    });
                }
            }
            else {
                // When panel closes, clear selection from map only (keep widget state)
                const isAccumulationMode = this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.AddToSelection ||
                    this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection;
                const hasAccumulatedRecords = this.state.accumulatedRecords && this.state.accumulatedRecords.length > 0;
                const hasSelectionState = this.state.hasSelection || false;
                const hasSelectionToClear = isAccumulationMode
                    ? hasAccumulatedRecords
                    : hasSelectionState;
                debugLogger.log('RESTORE', {
                    event: 'panel-closed-checking-selection',
                    widgetId: this.props.id,
                    resultsMode: this.state.resultsMode,
                    isAccumulationMode,
                    hasSelection: hasSelectionState,
                    hasAccumulatedRecords,
                    accumulatedRecordsCount: ((_c = this.state.accumulatedRecords) === null || _c === void 0 ? void 0 : _c.length) || 0,
                    selectionRecordCount: this.state.selectionRecordCount || 0,
                    hasLastSelection: !!this.state.lastSelection,
                    lastSelectionRecordCount: ((_d = this.state.lastSelection) === null || _d === void 0 ? void 0 : _d.recordIds.length) || 0,
                    hasSelectionToClear,
                    decisionLogic: {
                        'isAccumulationMode': isAccumulationMode,
                        'hasAccumulatedRecords': hasAccumulatedRecords,
                        'hasSelectionState': hasSelectionState,
                        'calculated-hasSelectionToClear': hasSelectionToClear,
                        'will-call-clearSelectionFromMap': hasSelectionToClear
                    }
                });
                if (hasSelectionToClear) {
                    debugLogger.log('RESTORE', {
                        event: 'panel-closed-calling-clearSelectionFromMap',
                        widgetId: this.props.id,
                        reason: 'hasSelectionToClear-is-true'
                    });
                    (() => __awaiter(this, void 0, void 0, function* () {
                        const deps = {
                            graphicsLayerRef: this.graphicsLayerRef,
                            mapViewRef: this.mapViewRef,
                            graphicsLayerManager: this.graphicsLayerManager,
                            config: this.props.config
                        };
                        yield this.selectionRestorationManager.clearSelectionFromMap(deps);
                    }))();
                }
                else {
                    debugLogger.log('RESTORE', {
                        event: 'panel-closed-no-selection-to-clear',
                        widgetId: this.props.id,
                        reason: 'hasSelectionToClear-is-false',
                        why: isAccumulationMode
                            ? 'no-accumulated-records'
                            : 'no-hasSelection-state'
                    });
                }
            }
        };
        /**
         * Handles map view change from JimuMapViewComponent.
         *
         * This method is called by JimuMapViewComponent when the map view becomes available
         * or changes. It delegates to MapViewManager for reference management and initializes
         * the graphics layer if enabled in widget configuration.
         *
         * @param jimuMapView - The JimuMapView instance from JimuMapViewComponent, or null if unavailable
         *
         * @since 1.19.0-r018.18 (Chunk 6: Manager implementation)
         * @see {@link MapViewManager} for map view reference management
         */
        this.handleJimuMapViewChanged = (jimuMapView) => {
            const { id, config } = this.props;
            // Manager implementation (r018.16 - Step 6.3: Switch to manager)
            this.mapViewManager.handleJimuMapViewChanged(jimuMapView, this.props, {
                onMapViewChange: (newJimuMapView) => {
                    // Get map view from manager
                    const newMapView = this.mapViewManager.getMapView();
                    // Chunk 4: Graphics layer initialization (r018.25 - Step 4.3: Remove old implementation)
                    // Initialize graphics layer if map view is available and graphics layer should be initialized
                    if (this.graphicsLayerManager.shouldInitialize(config, newMapView) && newMapView) {
                        // Use void to handle promise without blocking
                        void this.graphicsLayerManager.initialize(id, newMapView, {
                            onGraphicsLayerInitialized: (graphicsLayer) => {
                                // Update state to force re-render and update props
                                this.setState({ graphicsLayerInitialized: true });
                            }
                        });
                    }
                }
            });
        };
        /**
         * Initializes graphics layer lazily when output data source becomes available.
         *
         * This method is called by QueryTask component when an output data source is created.
         * It retrieves the map view from MapViewManager and initializes the graphics layer
         * using GraphicsLayerManager if not already initialized.
         *
         * @param outputDS - The output data source that was created
         *
         * @since 1.19.0-r017.0
         * @see {@link GraphicsLayerManager.initializeFromOutputDS} for graphics layer initialization
         * @see {@link MapViewManager.getMapView} for map view retrieval
         */
        /**
         * Initializes graphics layer lazily when output data source becomes available.
         *
         * This method is called by QueryTask component when an output data source is created.
         * It retrieves the map view from MapViewManager and initializes the graphics layer
         * using GraphicsLayerManager if not already initialized.
         *
         * @param outputDS - The output data source that was created
         *
         * @since 1.19.0-r017.0
         * @see {@link GraphicsLayerManager.initializeFromOutputDS} for graphics layer initialization
         * @see {@link MapViewManager.getMapView} for map view retrieval
         */
        this.initializeGraphicsLayerFromOutputDS = (outputDS) => __awaiter(this, void 0, void 0, function* () {
            const { id, config } = this.props;
            // Chunk 4: Graphics layer initialization (r018.25 - Step 4.3: Remove old implementation)
            // Use map view from manager if available
            const mapView = this.mapViewManager.getMapView() || this.mapViewRef.current;
            yield this.graphicsLayerManager.initializeFromOutputDS(id, config, outputDS, mapView, {
                onGraphicsLayerInitialized: (graphicsLayer) => {
                    this.setState({ graphicsLayerInitialized: true });
                }
            });
        });
        /**
         * Clears all graphics from the graphics layer if it exists.
         *
         * This method is called when clearing results or switching queries in "New" mode
         * to ensure graphics are removed from the map. It does not remove the graphics layer
         * itself, only clears its contents.
         *
         * @since 1.19.0-r017.0
         * @see {@link GraphicsLayerManager.clearGraphics} for graphics clearing logic
         */
        this.clearGraphicsLayerIfExists = () => {
            const { config } = this.props;
            // Chunk 4: Graphics layer clearing (r018.25 - Step 4.3: Remove old implementation)
            this.graphicsLayerManager.clearGraphics(this.props.id, config);
        };
        /**
         * Handles selection change events from QueryTaskResult component.
         *
         * This method updates widget state when records are selected or deselected in the
         * results tab. It respects the current results mode:
         * - "Add to" / "Remove from" modes: Uses accumulated records count for restoration state
         * - "New" mode: Uses event record IDs for restoration state
         *
         * Also handles automatic mode reset: If selection is cleared in "Remove from" mode,
         * the mode is automatically reset to "New" since Remove mode requires selection to function.
         *
         * @param event - Custom event containing selection details (widgetId, recordIds, outputDsId, queryItemConfigId)
         *
         * @since 1.19.0-r017.0
         */
        /**
         * Handles restore request when identify popup closes.
         *
         * This method restores selection to the map after the identify popup closes and
         * selection was cleared. It only restores if the widget panel is currently open
         * (users can't see restored selection if widget is closed).
         *
         * Restoration logic:
         * - "Add to" / "Remove from" modes: Restores all accumulated records grouped by origin data source
         * - "New" mode: Restores lastSelection state
         *
         * @param event - Custom event containing selection details (widgetId, recordIds, outputDsId, queryItemConfigId)
         *
         * @since 1.19.0-r017.0
         * @see {@link RESTORE_ON_IDENTIFY_CLOSE_EVENT} for event name constant
         */
        this.handleRestoreOnIdentifyClose = (event) => {
            var _a, _b, _c;
            const customEvent = event;
            const { id } = this.props;
            // Only handle if this is for our widget
            if (customEvent.detail.widgetId !== id) {
                return;
            }
            // Use manager as source of truth for visibility (r018.13)
            const isWidgetOpen = this.visibilityManager.getIsPanelVisible();
            const isAccumulationMode = this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.AddToSelection ||
                this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection;
            debugLogger.log('RESTORE', {
                event: 'identify-popup-closed-restore-requested',
                widgetId: id,
                isWidgetOpen,
                resultsMode: this.state.resultsMode,
                isAccumulationMode,
                eventRecordIdsCount: customEvent.detail.recordIds.length,
                hasSelection: this.state.hasSelection || false,
                accumulatedRecordsCount: ((_a = this.state.accumulatedRecords) === null || _a === void 0 ? void 0 : _a.length) || 0,
                hasLastSelection: !!this.state.lastSelection,
                lastSelectionRecordCount: ((_b = this.state.lastSelection) === null || _b === void 0 ? void 0 : _b.recordIds.length) || 0,
                outputDsId: customEvent.detail.outputDsId,
                queryItemConfigId: customEvent.detail.queryItemConfigId
            });
            // Only restore if widget is open
            if (!isWidgetOpen) {
                debugLogger.log('RESTORE', {
                    event: 'identify-popup-closed-restore-skipped-widget-closed',
                    widgetId: id,
                    recordCount: customEvent.detail.recordIds.length
                });
                return;
            }
            // HYPOTHESIS: Should always check accumulatedRecords first, regardless of mode
            if (this.state.accumulatedRecords && this.state.accumulatedRecords.length > 0) {
                debugLogger.log('RESTORE', {
                    event: 'identify-popup-closed-found-accumulated-records',
                    widgetId: id,
                    resultsMode: this.state.resultsMode,
                    isAccumulationMode,
                    accumulatedRecordsCount: this.state.accumulatedRecords.length,
                    'should-use-accumulated': true,
                    'current-condition-check': isAccumulationMode,
                    'condition-result': isAccumulationMode
                });
            }
            // In Add/Remove modes, check accumulated records instead of lastSelection
            if (isAccumulationMode) {
                if (!this.state.hasSelection || !this.state.accumulatedRecords || this.state.accumulatedRecords.length === 0) {
                    debugLogger.log('RESTORE', {
                        event: 'identify-popup-closed-restore-skipped-no-accumulated-records',
                        widgetId: id,
                        hasSelection: this.state.hasSelection,
                        accumulatedRecordsCount: ((_c = this.state.accumulatedRecords) === null || _c === void 0 ? void 0 : _c.length) || 0,
                        'hypothesis': 'hasSelection-is-false-or-no-accumulated-records',
                        'maybe-hasSelection-should-be-based-on-accumulated-records': true
                    });
                    return;
                }
                // Restore all accumulated records (grouped by origin DS)
                debugLogger.log('RESTORE', {
                    event: 'identify-popup-closed-restoring-accumulated-records',
                    widgetId: id,
                    accumulatedRecordsCount: this.state.accumulatedRecords.length
                });
                (() => __awaiter(this, void 0, void 0, function* () {
                    const deps = {
                        graphicsLayerRef: this.graphicsLayerRef,
                        mapViewRef: this.mapViewRef,
                        graphicsLayerManager: this.graphicsLayerManager,
                        config: this.props.config
                    };
                    yield this.selectionRestorationManager.addSelectionToMap(deps);
                }))();
                return;
            }
            // HYPOTHESIS: Maybe accumulatedRecords exist but we're not in accumulation mode?
            if (this.state.accumulatedRecords && this.state.accumulatedRecords.length > 0 && !isAccumulationMode) {
                debugLogger.log('RESTORE', {
                    event: 'identify-popup-closed-accumulated-records-exist-but-not-accumulation-mode',
                    widgetId: id,
                    resultsMode: this.state.resultsMode,
                    isAccumulationMode,
                    accumulatedRecordsCount: this.state.accumulatedRecords.length,
                    'hypothesis': 'accumulated-records-exist-but-mode-is-not-add-or-remove',
                    'should-we-still-use-them': 'NEEDS-INVESTIGATION'
                });
            }
            // For "New" mode, use original validation logic
            // Check if we have matching selection state
            if (!this.state.hasSelection || !this.state.lastSelection) {
                debugLogger.log('RESTORE', {
                    event: 'identify-popup-closed-restore-skipped-no-selection',
                    widgetId: id,
                    hasSelection: this.state.hasSelection,
                    hasLastSelection: !!this.state.lastSelection
                });
                return;
            }
            // Verify the outputDsId matches
            if (this.state.lastSelection.outputDsId !== customEvent.detail.outputDsId) {
                debugLogger.log('RESTORE', {
                    event: 'identify-popup-closed-restore-skipped-ds-mismatch',
                    widgetId: id,
                    ourOutputDsId: this.state.lastSelection.outputDsId,
                    requestedOutputDsId: customEvent.detail.outputDsId
                });
                return;
            }
            // Verify the queryItemConfigId matches (optional but good to check)
            if (this.state.lastSelection.queryItemConfigId !== customEvent.detail.queryItemConfigId) {
                debugLogger.log('RESTORE', {
                    event: 'identify-popup-closed-restore-skipped-query-mismatch',
                    widgetId: id,
                    ourQueryItemConfigId: this.state.lastSelection.queryItemConfigId,
                    requestedQueryItemConfigId: customEvent.detail.queryItemConfigId
                });
                return;
            }
            // Restore selection to map (reuse existing method)
            debugLogger.log('RESTORE', {
                event: 'identify-popup-closed-restoring-selection',
                widgetId: id,
                recordCount: customEvent.detail.recordIds.length,
                outputDsId: customEvent.detail.outputDsId
            });
            (() => __awaiter(this, void 0, void 0, function* () {
                const deps = {
                    graphicsLayerRef: this.graphicsLayerRef,
                    mapViewRef: this.mapViewRef,
                    graphicsLayerManager: this.graphicsLayerManager,
                    config: this.props.config
                };
                yield this.selectionRestorationManager.addSelectionToMap(deps);
            }))();
        };
        // ============================================================================
        // r019.18: Removed addSelectionToMapParallel wrapper (27 lines)
        // r019.20: Removed clearSelectionFromMapParallel wrapper (27 lines)
        // All call sites now directly invoke SelectionRestorationManager methods
        // ============================================================================
        // ============================================================================
        // r019.15: Removed old addSelectionToMap implementation (272 lines)
        // Now fully handled by SelectionRestorationManager.addSelectionToMap()
        // ============================================================================
        /**
         * Handles results mode change from the mode dropdown in QueryTask component.
         *
         * This method is called when the user switches between "Create new", "Add to", or
         * "Remove from" modes. It performs the following actions:
         *
         * 1. Consumes hash parameters when switching to accumulation modes (prevents re-triggering)
         * 2. Clears accumulated records when switching to "New" mode
         * 3. Updates widget state with the new mode
         *
         * @param mode - The new selection type mode (NewSelection, AddToSelection, or RemoveFromSelection)
         *
         * @since 1.19.0-r017.0
         */
        this.handleResultsModeChange = (mode) => {
            var _a, _b;
            // Using AccumulatedRecordsManager (r018.58)
            const shouldConsumeHash = (mode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.AddToSelection || mode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection) && !!((_a = this.state.initialQueryValue) === null || _a === void 0 ? void 0 : _a.shortId);
            const result = this.accumulatedRecordsManager.handleResultsModeChange(this.props.id, mode, shouldConsumeHash, (_b = this.state.initialQueryValue) === null || _b === void 0 ? void 0 : _b.shortId, this.removeHashParameter);
            // Reset manual modifications when switching to New Selection mode
            if (mode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.NewSelection && this.state.resultsMode !== _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.NewSelection) {
                this.resetManualModifications();
            }
            // Update widget state from manager's return value
            this.setState({
                resultsMode: result.resultsMode,
                accumulatedRecords: result.accumulatedRecords
            });
        };
        /**
         * Removes a hash parameter from the URL when switching to accumulation modes.
         *
         * This method is called when switching to "Add to" or "Remove from" modes to consume
         * the deep link parameter. This prevents the hash parameter from re-triggering the query
         * when the widget re-renders.
         *
         * The URL is updated using history.replaceState to avoid page reload, and both pathname
         * and query string are preserved (e.g., debug parameters remain intact).
         *
         * @param shortId - The shortId parameter to remove from the URL hash
         *
         * @since 1.19.0-r017.0
         */
        this.removeHashParameter = (shortId) => {
            var _a;
            if (!shortId)
                return;
            const hash = window.location.hash.substring(1);
            const urlParams = new URLSearchParams(hash);
            if (urlParams.has(shortId)) {
                urlParams.delete(shortId);
                const newHash = urlParams.toString();
                debugLogger.log('HASH', {
                    event: 'removeHashParameter',
                    shortId,
                    newHash: newHash ? `#${newHash}` : '(empty)',
                    timestamp: Date.now()
                });
                // Update the URL without triggering a reload
                // Always preserve pathname and query string, only update hash
                window.history.replaceState(null, '', window.location.pathname + window.location.search + (newHash ? `#${newHash}` : ''));
                // Also clear the state so it won't trigger again
                if (((_a = this.state.initialQueryValue) === null || _a === void 0 ? void 0 : _a.shortId) === shortId) {
                    this.setState({ initialQueryValue: undefined });
                }
            }
        };
        this.handleAccumulatedRecordsChange = (records) => {
            // DIAGNOSTIC LOGGING: State change tracking
            const previousRecords = this.state.accumulatedRecords || [];
            const previousIds = previousRecords.map(r => r.getId());
            const newIds = records.map(r => r.getId());
            const addedIds = newIds.filter(id => !previousIds.includes(id));
            const removedIds = previousIds.filter(id => !newIds.includes(id));
            debugLogger.log('RESULTS-MODE', {
                event: 'accumulated-records-state-change',
                widgetId: this.props.id,
                previousCount: previousRecords.length,
                previousIds: previousIds,
                newCount: records.length,
                newIds: newIds,
                addedIds: addedIds,
                removedIds: removedIds,
                resultsMode: this.state.resultsMode,
                timestamp: Date.now()
            });
            // Using AccumulatedRecordsManager (r018.58)
            this.accumulatedRecordsManager.handleAccumulatedRecordsChange(this.props.id, records);
            // If we're in Remove mode and all accumulated records are cleared, reset to NewSelection mode
            // Remove mode requires accumulated records to function, so it should be disabled when records are empty
            const shouldResetMode = records.length === 0 &&
                this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection;
            this.setState(Object.assign({ accumulatedRecords: records }, (shouldResetMode ? {
                resultsMode: _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.NewSelection
            } : {})));
            if (shouldResetMode) {
                debugLogger.log('RESULTS-MODE', {
                    event: 'mode-reset-on-accumulated-records-cleared',
                    widgetId: this.props.id,
                    previousMode: _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection,
                    newMode: _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.NewSelection,
                    reason: 'all-accumulated-records-cleared-in-remove-mode',
                    timestamp: Date.now()
                });
            }
        };
        /**
         * NOTE: No longer needed - we use existing output DS instead of creating new one.
         * Kept for reference but not used.
         */
        this.getOrCreateAccumulatedResultsDS = (originDS) => __awaiter(this, void 0, void 0, function* () {
            // This is no longer used - we merge records into existing output DS
            throw new Error('This method is deprecated - use existing output DS instead');
        });
        // ============================================================================
        // r019.16: Removed old clearSelectionFromMap implementation (355 lines)
        // Now fully handled by SelectionRestorationManager.clearSelectionFromMap()
        // ============================================================================
        /**
         * NOTIFY that a hash parameter has been used.
         * Previously this removed the hash from the URL, but per updated requirements,
         * user-entered hashes should remain in the URL.
         *
         * @param shortId - The shortId parameter that was used
         */
        this.handleHashParameterUsed = (shortId) => {
            var _a, _b;
            const { id } = this.props;
            const { initialQueryValue } = this.state;
            debugLogger.log('HASH-EXEC', {
                event: 'querysimple-handlehashparameterused-called',
                widgetId: id,
                shortId,
                currentState: {
                    shouldUseInitialQueryValueForSelection: this.state.shouldUseInitialQueryValueForSelection,
                    hasInitialQueryValue: !!this.state.initialQueryValue,
                    initialQueryValueShortId: (_a = this.state.initialQueryValue) === null || _a === void 0 ? void 0 : _a.shortId,
                    initialQueryValueValue: (_b = this.state.initialQueryValue) === null || _b === void 0 ? void 0 : _b.value
                },
                timestamp: Date.now()
            });
            // NOTE: Hash parameters are NOT cleared here - they persist in URL
            // Hash parameters are only consumed when switching to accumulation modes (Add/Remove)
            // to prevent re-triggering when the user manually switches modes
            debugLogger.log('HASH', {
                event: 'handleHashParameterUsed-notified',
                widgetId: id,
                shortId: shortId,
                currentInitialQueryValue: initialQueryValue,
                note: 'Hash parameter used but NOT cleared - hash remains in URL per user requirement',
                timestamp: Date.now()
            });
            // ALWAYS clear both hash state values after execution
            // QuerySimple should not remember hash state after HelperSimple-driven execution completes
            // This prevents autonomous re-processing when switching queries
            // Using a single setState ensures atomic update and prevents race conditions
            this.setState({
                shouldUseInitialQueryValueForSelection: false,
                initialQueryValue: undefined
            }, () => {
                var _a, _b;
                debugLogger.log('HASH-EXEC', {
                    event: 'querysimple-handlehashparameterused-state-cleared',
                    widgetId: id,
                    shortId,
                    newState: {
                        shouldUseInitialQueryValueForSelection: this.state.shouldUseInitialQueryValueForSelection,
                        hasInitialQueryValue: !!this.state.initialQueryValue,
                        initialQueryValueShortId: (_a = this.state.initialQueryValue) === null || _a === void 0 ? void 0 : _a.shortId,
                        initialQueryValueValue: (_b = this.state.initialQueryValue) === null || _b === void 0 ? void 0 : _b.value
                    },
                    timestamp: Date.now()
                });
            });
            debugLogger.log('HASH', {
                event: 'shouldUseInitialQueryValueForSelection-flag-cleared',
                widgetId: id,
                shortId: shortId,
                flagValue: false,
                timestamp: Date.now()
            });
        };
    }
    componentDidMount() {
        var _a, _b;
        // Chunk 1: Manager implementation (r018.8 - switched to manager)
        // Setup manager (no autonomous URL checking - HelperSimple orchestrates)
        // NOTE: setup() is a no-op - callbacks are never called
        this.urlConsumptionManager.setup(this.props, this.state.resultsMode, {} // Empty callbacks - setup() is a no-op
        );
        // Listen for HelperSimple's open widget event
        // QuerySimple should only process hash parameters when HelperSimple explicitly opens the widget
        // This ensures HelperSimple remains the orchestrator
        // Note: Event listener setup moved to parallel execution section below (Chunk 7.1)
        debugLogger.log('HASH-EXEC', {
            event: 'querysimple-mounted-event-listener-setup',
            widgetId: this.props.id,
            currentState: {
                shouldUseInitialQueryValueForSelection: this.state.shouldUseInitialQueryValueForSelection,
                hasInitialQueryValue: !!this.state.initialQueryValue,
                initialQueryValueShortId: (_a = this.state.initialQueryValue) === null || _a === void 0 ? void 0 : _a.shortId,
                initialQueryValueValue: (_b = this.state.initialQueryValue) === null || _b === void 0 ? void 0 : _b.value
            },
            timestamp: Date.now()
        });
        // Chunk 2: Manager implementation (r018.13 - Step 2.3: Switch to manager)
        if (this.widgetRef.current) {
            this.visibilityManager.setup(this.widgetRef.current, this.props, {
                onVisibilityChange: (isVisible) => {
                    // Update state
                    this.setState({ isPanelVisible: isVisible });
                    // Handle restoration logic
                    this.handleVisibilityChange(isVisible);
                }
            }, (isVisible) => {
                // Manager's internal state tracking callback
                // (no-op, restoration handled in onVisibilityChange)
            });
            // Notify mount via manager
            this.visibilityManager.notifyMount(this.props.id);
        }
        // Chunk 5: Initialize accumulated records manager state (r018.26 - Step 5.1: Add manager)
        // Sync manager state with widget state
        if (this.state.resultsMode) {
            this.accumulatedRecordsManager.handleResultsModeChange(this.props.id, this.state.resultsMode, false);
        }
        if (this.state.accumulatedRecords && this.state.accumulatedRecords.length > 0) {
            this.accumulatedRecordsManager.handleAccumulatedRecordsChange(this.props.id, this.state.accumulatedRecords);
        }
        // Set up callbacks for manager
        // Set up callbacks for manager (r018.57)
        // Note: Primary state updates come from manager return values in handleResultsModeChange/handleAccumulatedRecordsChange
        // These callbacks serve as backup/verification but shouldn't be needed since we update state directly from return values
        this.accumulatedRecordsManager.setCallbacks({
            onModeChange: (mode) => {
                // State is updated from handleResultsModeChange return value, so this is just a backup
                if (this.state.resultsMode !== mode) {
                    debugLogger.log('RESULTS-MODE', {
                        event: 'callback-onModeChange-state-sync',
                        widgetId: this.props.id,
                        callbackMode: mode,
                        currentStateMode: this.state.resultsMode,
                        note: 'State should already be synced from return value',
                        timestamp: Date.now()
                    });
                    this.setState({ resultsMode: mode });
                }
            },
            onAccumulatedRecordsChange: (records) => {
                var _a;
                // State is updated from handleAccumulatedRecordsChange, so this is just a backup
                const currentCount = ((_a = this.state.accumulatedRecords) === null || _a === void 0 ? void 0 : _a.length) || 0;
                if (currentCount !== records.length) {
                    debugLogger.log('RESULTS-MODE', {
                        event: 'callback-onAccumulatedRecordsChange-state-sync',
                        widgetId: this.props.id,
                        callbackCount: records.length,
                        currentStateCount: currentCount,
                        note: 'State should already be synced from direct update',
                        timestamp: Date.now()
                    });
                    this.setState({ accumulatedRecords: records });
                }
            }
        });
        // Chunk 7: Event handling (r018.59 - Step 7.1: Add manager)
        this.eventManager.setHandlers({
            onOpenWidgetEvent: this.handleOpenWidgetEvent,
            // Chunk 3: Section 3.1 Step 3.1.5 (r019.5): Switch to manager implementation
            onSelectionChange: (event) => this.selectionRestorationManager.handleSelectionChange(event),
            onRestoreOnIdentifyClose: this.handleRestoreOnIdentifyClose
        });
        this.eventManager.setup(this.props.id);
        // Chunk 3: Selection & Restoration Manager (r019.2) - Section 3.1: Initialize widgetId
        this.selectionRestorationManager.setWidgetId(this.props.id);
        // Graphics layer will be initialized when map view becomes available via JimuMapViewComponent
    }
    componentWillUnmount() {
        // Chunk 1: Clean up manager (r018.8)
        this.urlConsumptionManager.cleanup();
        // Chunk 7: Event handling cleanup (r018.59 - Step 7.1: Add manager)
        this.eventManager.cleanup(this.props.id);
        // Chunk 2: Clean up manager (r018.13 - Step 2.3: Switch to manager)
        this.visibilityManager.cleanup();
        this.visibilityManager.notifyUnmount(this.props.id);
        // Chunk 4: Graphics layer cleanup (r018.25 - Step 4.3: Remove old implementation)
        this.graphicsLayerManager.cleanup(this.props.id);
        // Chunk 5: Clean up accumulated records manager (r018.26 - Step 5.1: Add manager)
        this.accumulatedRecordsManager.cleanup();
        debugLogger.log('WIDGET-STATE', {
            event: 'widget-closed',
            widgetId: this.props.id,
            isOpen: false,
            timestamp: new Date().toISOString()
        });
    }
    componentDidUpdate(prevProps) {
        // QuerySimple no longer autonomously checks URL parameters
        // Only HelperSimple can trigger hash parameter processing via OPEN_WIDGET_EVENT
        // This ensures HelperSimple remains the orchestrator
        // Chunk 4: Graphics layer is now required (r018.25 - Step 4.3: Remove config change handling)
        // No need to handle config changes for graphics layer since it's always enabled
    }
    render() {
        var _a, _b, _c, _d, _e, _f, _g, _h, _j;
        const { config, id, icon, label, layoutId, layoutItemId, controllerWidgetId } = this.props;
        const widgetLabel = this.props.intl.formatMessage({
            id: '_widgetLabel',
            defaultMessage: _translations_default__WEBPACK_IMPORTED_MODULE_4__["default"]._widgetLabel
        });
        if (!((_a = config.queryItems) === null || _a === void 0 ? void 0 : _a.length)) {
            return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.WidgetPlaceholder, { icon: iconMap.iconQuery, widgetId: this.props.id, name: widgetLabel });
        }
        if (config.arrangeType === _config__WEBPACK_IMPORTED_MODULE_3__.QueryArrangeType.Popper && !controllerWidgetId) {
            return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_widget_context__WEBPACK_IMPORTED_MODULE_11__.QueryWidgetContext.Provider, { value: `${layoutId}:${layoutItemId}`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list_popper_wrapper__WEBPACK_IMPORTED_MODULE_10__.TaskListPopperWrapper, { id: 0, icon: icon, popperTitle: label, minSize: (_c = (_b = config.sizeMap) === null || _b === void 0 ? void 0 : _b.arrangementIconPopper) === null || _c === void 0 ? void 0 : _c.minSize, defaultSize: (_e = (_d = config.sizeMap) === null || _d === void 0 ? void 0 : _d.arrangementIconPopper) === null || _e === void 0 ? void 0 : _e.defaultSize, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list__WEBPACK_IMPORTED_MODULE_8__.QueryTaskList, { widgetId: id, isInPopper: true, queryItems: config.queryItems, defaultPageSize: config.defaultPageSize, className: 'pb-4', initialQueryValue: this.state.initialQueryValue, shouldUseInitialQueryValueForSelection: this.state.shouldUseInitialQueryValueForSelection, onHashParameterUsed: this.handleHashParameterUsed, resultsMode: this.state.resultsMode, onResultsModeChange: this.handleResultsModeChange, accumulatedRecords: this.state.accumulatedRecords, onAccumulatedRecordsChange: this.handleAccumulatedRecordsChange, useGraphicsLayerForHighlight: config.useGraphicsLayerForHighlight, graphicsLayer: this.graphicsLayerRef.current || undefined, mapView: this.mapViewRef.current || undefined, onInitializeGraphicsLayer: this.initializeGraphicsLayerFromOutputDS, onClearGraphicsLayer: this.clearGraphicsLayerIfExists, activeTab: this.state.activeTab, onTabChange: this.handleTabChange, eventManager: this.eventManager }) }) }));
        }
        if (config.arrangeType === _config__WEBPACK_IMPORTED_MODULE_3__.QueryArrangeType.Inline && !controllerWidgetId) {
            return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_widget_context__WEBPACK_IMPORTED_MODULE_11__.QueryWidgetContext.Provider, { value: `${layoutId}:${layoutItemId}`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list_inline__WEBPACK_IMPORTED_MODULE_9__.TaskListInline, { widgetId: id, widgetLabel: label, wrap: config.arrangeWrap, queryItems: config.queryItems, minSize: (_g = (_f = config.sizeMap) === null || _f === void 0 ? void 0 : _f.arrangementIconPopper) === null || _g === void 0 ? void 0 : _g.minSize, defaultSize: (_j = (_h = config.sizeMap) === null || _h === void 0 ? void 0 : _h.arrangementIconPopper) === null || _j === void 0 ? void 0 : _j.defaultSize, defaultPageSize: config.defaultPageSize, initialQueryValue: this.state.initialQueryValue, onHashParameterUsed: this.handleHashParameterUsed }) }));
        }
        return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Paper, { ref: this.widgetRef, variant: 'flat', className: 'jimu-widget runtime-query', "data-widgetid": id, css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
        display: flex;
        flex-direction: column;
        height: 100%;
      `, children: [config.useGraphicsLayerForHighlight && config.highlightMapWidgetId && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_arcgis__WEBPACK_IMPORTED_MODULE_6__.JimuMapViewComponent, { useMapWidgetId: config.highlightMapWidgetId, onActiveViewChange: this.handleJimuMapViewChanged })), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "widget-header", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
          padding: 6px 16px;
          border-bottom: 1px solid var(--sys-color-divider-secondary);
          background-color: var(--sys-color-surface);
        `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h3", { className: "widget-title", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
            margin: 0;
            font-size: 1rem;
            font-weight: 600;
            color: var(--sys-color-text-primary);
          `, children: label || widgetLabel }) }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
          flex: 1;
          display: flex;
          flex-direction: column;
          overflow: hidden;
        `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
            flex: 1;
            overflow: auto;
          `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_widget_context__WEBPACK_IMPORTED_MODULE_11__.QueryWidgetContext.Provider, { value: `${layoutId}:${layoutItemId}`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list__WEBPACK_IMPORTED_MODULE_8__.QueryTaskList, { widgetId: id, queryItems: config.queryItems, defaultPageSize: config.defaultPageSize, initialQueryValue: this.state.initialQueryValue, shouldUseInitialQueryValueForSelection: this.state.shouldUseInitialQueryValueForSelection, onHashParameterUsed: this.handleHashParameterUsed, resultsMode: this.state.resultsMode, onResultsModeChange: this.handleResultsModeChange, accumulatedRecords: this.state.accumulatedRecords, onAccumulatedRecordsChange: this.handleAccumulatedRecordsChange, useGraphicsLayerForHighlight: config.useGraphicsLayerForHighlight, graphicsLayer: this.graphicsLayerRef.current || undefined, mapView: this.mapViewRef.current || undefined, onInitializeGraphicsLayer: this.initializeGraphicsLayerFromOutputDS, onClearGraphicsLayer: this.clearGraphicsLayerIfExists, activeTab: this.state.activeTab, onTabChange: this.handleTabChange, eventManager: this.eventManager }) }) }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
            padding: 4px 12px;
            border-top: 1px solid var(--sys-color-divider-secondary);
            background-color: var(--sys-color-surface-paper);
            flex-shrink: 0;
            text-align: center;
          `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              font-size: 0.75rem;
              color: var(--sys-color-text-tertiary);
              font-weight: 400;
              letter-spacing: 0.025em;
              display: inline-flex;
              align-items: center;
              gap: 4px;
            `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("svg", { width: "14", height: "14", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                  flex-shrink: 0;
                  opacity: 0.6;
                `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("polyline", { points: "16 18 22 12 16 6" }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("polyline", { points: "8 6 2 12 8 18" })] }), "QuerySimple by MapSimple", (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                margin-left: 6px;
                opacity: 0.5;
                font-size: 0.7rem;
              `, children: ["v", _version__WEBPACK_IMPORTED_MODULE_13__.WIDGET_VERSION] })] }) })] })] }));
    }
}
Widget.versionManager = _version_manager__WEBPACK_IMPORTED_MODULE_7__.versionManager;
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Widget);
function __set_webpack_public_path__(url) { __webpack_require__.p = url; }

})();

/******/ 	return __webpack_exports__;
/******/ })()

			);
		}
	};
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9xdWVyeS1zaW1wbGUvZGlzdC9ydW50aW1lL3dpZGdldC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBNkM7QUFFVTtBQUVoRCxNQUFNLFVBQVUsR0FBRyxDQUFDLEtBQXdCLEVBQUUsRUFBRTtJQUNyRCxNQUFNLEdBQUcsR0FBRyxNQUFNLENBQUMsR0FBRztJQUN0QixNQUFNLEVBQUUsU0FBUyxLQUFnQixLQUFLLEVBQWhCLE1BQU0sVUFBSyxLQUFLLEVBQWhDLGFBQXdCLENBQVE7SUFFdEMsTUFBTSxPQUFPLEdBQUcscURBQVUsQ0FBQywrQkFBK0IsRUFBRSxTQUFTLENBQUM7SUFDdEUsSUFBSSxDQUFDLEdBQUc7UUFBRSxPQUFPLHVGQUFLLFNBQVMsRUFBRSxPQUFPLElBQU0sTUFBYSxFQUFJO0lBQy9ELE9BQU8sZ0VBQUMsR0FBRyxrQkFBQyxTQUFTLEVBQUUsT0FBTyxFQUFFLEdBQUcsRUFBRSx5RUFBRyxJQUFNLE1BQU0sRUFBSTtBQUMxRCxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ1g0QztBQUVXO0FBRWpELE1BQU0sV0FBVyxHQUFHLENBQUMsS0FBd0IsRUFBRSxFQUFFO0lBQ3RELE1BQU0sR0FBRyxHQUFHLE1BQU0sQ0FBQyxHQUFHO0lBQ3RCLE1BQU0sRUFBRSxTQUFTLEtBQWdCLEtBQUssRUFBaEIsTUFBTSxVQUFLLEtBQUssRUFBaEMsYUFBd0IsQ0FBUTtJQUV0QyxNQUFNLE9BQU8sR0FBRyxxREFBVSxDQUFDLCtCQUErQixFQUFFLFNBQVMsQ0FBQztJQUN0RSxJQUFJLENBQUMsR0FBRztRQUFFLE9BQU8sdUZBQUssU0FBUyxFQUFFLE9BQU8sSUFBTSxNQUFhLEVBQUk7SUFDL0QsT0FBTyxnRUFBQyxHQUFHLGtCQUFDLFNBQVMsRUFBRSxPQUFP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RSw4Q0FBRzs7Ozs7O1dBTVosWUFDQywyRUFBTSxHQUFHLEVBQUUsOENBQUc7Ozs7Ozs7O2FBUWIsYUFFQywwRUFDRSxLQUFLLEVBQUMsSUFBSSxFQUNWLE1BQU0sRUFBQyxJQUFJLEVBQ1gsT0FBTyxFQUFDLFdBQVcsRUFDbkIsSUFBSSxFQUFDLE1BQU0sRUFDWCxNQUFNLEVBQUMsY0FBYyxFQUNyQixXQUFXLEVBQUMsR0FBRyxFQUNmLEdBQUcsRUFBRSw4Q0FBRzs7O2lCQUdQLGFBRUQsOEVBQVUsTUFBTSxFQUFDLGtCQUFrQixHQUFFLEVBQ3JDLDhFQUFVLE1BQU0sRUFBQyxlQUFlLEdBQUUsSUFDOUIsOEJBRU4sMkVBQU0sR0FBRyxFQUFFLDhDQUFHOzs7O2VBSWIsa0JBQ0cscURBQWMsSUFDWCxJQUNGLEdBQ0gsSUFDRixJQUNBLENBQ1Q7SUFDSCxDQUFDOztBQWp4Q00scUJBQWMsR0FBRyw0REFBYztpRUFYbkIsTUFBTTtBQWd5Q25CLFNBQVMsMkJBQTJCLENBQUMsR0FBRyxJQUFJLHFCQUF1QixHQUFHLEdBQUcsRUFBQyxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvZmlsbGVkL2RpcmVjdGlvbmFsL2Rvd24udHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL2ZpbGxlZC9kaXJlY3Rpb25hbC9yaWdodC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvb3V0bGluZWQvZGlyZWN0aW9uYWwvYXJyb3ctbGVmdC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvb3V0bGluZWQvZGlyZWN0aW9uYWwvY29sbGFwc2UtYWxsLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9leHBhbmQtYWxsLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9vdXRsaW5lZC9lZGl0b3IvdHJhc2gudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL291dGxpbmVkL3N1Z2dlc3RlZC9pbmZvLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9zdmcvZmlsbGVkL2RpcmVjdGlvbmFsL2Rvd24uc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9maWxsZWQvZGlyZWN0aW9uYWwvcmlnaHQuc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9vdXRsaW5lZC9hcHBsaWNhdGlvbi9tb3JlLWhvcml6b250YWwuc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9hcnJvdy1sZWZ0LnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9zdmcvb3V0bGluZWQvZGlyZWN0aW9uYWwvY29sbGFwc2UtYWxsLnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9zdmcvb3V0bGluZWQvZGlyZWN0aW9uYWwvZXhwYW5kLWFsbC5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2RpcmVjdGlvbmFsL3JpZ2h0LnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9zdmcvb3V0bGluZWQvZWRpdG9yL2Nsb3NlLnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9zdmcvb3V0bGluZWQvZWRpdG9yL3RyYXNoLnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9zdmcvb3V0bGluZWQvc3VnZ2VzdGVkL2Vycm9yLnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9zdmcvb3V0bGluZWQvc3VnZ2VzdGVkL2luZm8uc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9vdXRsaW5lZC9zdWdnZXN0ZWQvd2FybmluZy5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9pY29uLnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9jb25maWcudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvZGF0YS1hY3Rpb25zL2FkZC10by1tYXAtYWN0aW9uLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9kYXRhLWFjdGlvbnMvaW5kZXgudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL2RhdGEtYWN0aW9ucy96b29tLXRvLWFjdGlvbi50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvZGVmYXVsdC1xdWVyeS1pdGVtLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvYXNzZXRzL2ljb25zL3Nob3ctb24tbWFwLnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL2Fzc2V0cy9pY29ucy96b29tLXRvLnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL2J1ZmZlci1pbnB1dC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9jb21wb25lbnRzL2ZlYXR1cmUtaW5mby50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9nZW9tZXRyeS1mcm9tLWRyYXcudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvZ2VvbWV0cnktZnJvbS1kcy50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9nZW9tZXRyeS1mcm9tLW1hcC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9ncmFwaGljcy1sYXllci11dGlscy50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL2hvb2tzL3VzZS1hY2N1bXVsYXRlZC1yZWNvcmRzLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvaG9va3MvdXNlLWV2ZW50LWhhbmRsaW5nLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvaG9va3MvdXNlLWdyYXBoaWNzLWxheWVyLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvaG9va3MvdXNlLW1hcC12aWV3LnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvaG9va3MvdXNlLXNlbGVjdGlvbi1yZXN0b3JhdGlvbi50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL2hvb2tzL3VzZS11cmwtY29uc3VtcHRpb24udHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9ob29rcy91c2Utd2lkZ2V0LXZpc2liaWxpdHkudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9ob29rcy91c2Utem9vbS10by1yZWNvcmRzLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvaW50ZXJhY3RpdmUtZHJhdy10b29sLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL2xvYWRpbmctcmVzdWx0LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL3F1ZXJ5LXJlc3VsdC1pdGVtLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL3F1ZXJ5LXJlc3VsdC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9xdWVyeS10YXNrLWNvbnRleHQudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvcXVlcnktdGFzay1mb3JtLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL3F1ZXJ5LXRhc2stbGFiZWwudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvcXVlcnktdGFzay1saXN0LWlubGluZS50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9xdWVyeS10YXNrLWxpc3QtcG9wcGVyLXdyYXBwZXIudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvcXVlcnktdGFzay1saXN0LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL3F1ZXJ5LXRhc2stc3BhdGlhbC1mb3JtLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL3F1ZXJ5LXRhc2sudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvcXVlcnktdXRpbHMudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9yZXN1bHRzLW1hbmFnZW1lbnQtdXRpbHMudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9zZWxlY3Rpb24tdXRpbHMudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9zaW1wbGUtbGlzdC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS90cmFuc2xhdGlvbnMvZGVmYXVsdC50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL3VzZUF1dG9IZWlnaHQudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvd2lkZ2V0LWNvbmZpZy50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL3dpZGdldC1jb250ZXh0LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL3pvb20tdXRpbHMudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvdmVyc2lvbi1tYW5hZ2VyLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3ZlcnNpb24udHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbi50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uL2NvbW1vbi1jb21wb25lbnRzLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uL2RhdGEtc291cmNlLXRpcC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbi9kZWJ1Zy1sb2dnZXIudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbi91c2UtZHMtZXhpc3RzLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uL3V0aWxzLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50L2V4dGVybmFsIHN5c3RlbSBcImppbXUtY29yZS9lbW90aW9uXCIiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC9leHRlcm5hbCBzeXN0ZW0gXCJqaW11LWFyY2dpc1wiIiwid2VicGFjazovL2V4Yi1jbGllbnQvZXh0ZXJuYWwgc3lzdGVtIFwiamltdS1jb3JlXCIiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC9leHRlcm5hbCBzeXN0ZW0gXCJqaW11LWxheW91dHMvbGF5b3V0LXJ1bnRpbWVcIiIsIndlYnBhY2s6Ly9leGItY2xpZW50L2V4dGVybmFsIHN5c3RlbSBcImppbXUtdGhlbWVcIiIsIndlYnBhY2s6Ly9leGItY2xpZW50L2V4dGVybmFsIHN5c3RlbSBcImppbXUtdWlcIiIsIndlYnBhY2s6Ly9leGItY2xpZW50L2V4dGVybmFsIHN5c3RlbSBcImppbXUtdWkvYmFzaWMvc3FsLWV4cHJlc3Npb24tcnVudGltZVwiIiwid2VicGFjazovL2V4Yi1jbGllbnQvZXh0ZXJuYWwgc3lzdGVtIFwiamltdS1jb3JlL3JlYWN0XCIiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC9leHRlcm5hbCBzeXN0ZW0gXCJ3aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vblwiIiwid2VicGFjazovL2V4Yi1jbGllbnQvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC93ZWJwYWNrL3J1bnRpbWUvY29tcGF0IGdldCBkZWZhdWx0IGV4cG9ydCIsIndlYnBhY2s6Ly9leGItY2xpZW50L3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9leGItY2xpZW50L3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL2V4Yi1jbGllbnQvd2VicGFjay9ydW50aW1lL3B1YmxpY1BhdGgiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtY29yZS9saWIvc2V0LXB1YmxpYy1wYXRoLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvd2lkZ2V0LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSZWFjdCwgY2xhc3NOYW1lcyB9IGZyb20gJ2ppbXUtY29yZSdcclxuaW1wb3J0IHR5cGUgeyBTVkdDb21wb25lbnRQcm9wcyB9IGZyb20gJ2ppbXUtdWknXHJcbmltcG9ydCBzcmMgZnJvbSAnLi4vLi4vc3ZnL2ZpbGxlZC9kaXJlY3Rpb25hbC9kb3duLnN2ZydcclxuXHJcbmV4cG9ydCBjb25zdCBEb3duRmlsbGVkID0gKHByb3BzOiBTVkdDb21wb25lbnRQcm9wcykgPT4ge1xyXG4gIGNvbnN0IFNWRyA9IHdpbmRvdy5TVkdcclxuICBjb25zdCB7IGNsYXNzTmFtZSwgLi4ub3RoZXJzIH0gPSBwcm9wc1xyXG5cclxuICBjb25zdCBjbGFzc2VzID0gY2xhc3NOYW1lcygnamltdS1pY29uIGppbXUtaWNvbi1jb21wb25lbnQnLCBjbGFzc05hbWUpXHJcbiAgaWYgKCFTVkcpIHJldHVybiA8c3ZnIGNsYXNzTmFtZT17Y2xhc3Nlc30gey4uLm90aGVycyBhcyBhbnl9IC8+XHJcbiAgcmV0dXJuIDxTVkcgY2xhc3NOYW1lPXtjbGFzc2VzfSBzcmM9e3NyY30gey4uLm90aGVyc30gLz5cclxufVxyXG4iLCJpbXBvcnQgeyBSZWFjdCwgY2xhc3NOYW1lcyB9IGZyb20gJ2ppbXUtY29yZSdcclxuaW1wb3J0IHR5cGUgeyBTVkdDb21wb25lbnRQcm9wcyB9IGZyb20gJ2ppbXUtdWknXHJcbmltcG9ydCBzcmMgZnJvbSAnLi4vLi4vc3ZnL2ZpbGxlZC9kaXJlY3Rpb25hbC9yaWdodC5zdmcnXHJcblxyXG5leHBvcnQgY29uc3QgUmlnaHRGaWxsZWQgPSAocHJvcHM6IFNWR0NvbXBvbmVudFByb3BzKSA9PiB7XHJcbiAgY29uc3QgU1ZHID0gd2luZG93LlNWR1xyXG4gIGNvbnN0IHsgY2xhc3NOYW1lLCAuLi5vdGhlcnMgfSA9IHByb3BzXHJcblxyXG4gIGNvbnN0IGNsYXNzZXMgPSBjbGFzc05hbWVzKCdqaW11LWljb24gamltdS1pY29uLWNvbXBvbmVudCcsIGNsYXNzTmFtZSlcclxuICBpZiAoIVNWRykgcmV0dXJuIDxzdmcgY2xhc3NOYW1lPXtjbGFzc2VzfSB7Li4ub3RoZXJzIGFzIGFueX0gLz5cclxuICByZXR1cm4gPFNWRyBjbGFzc05hbWU9e2NsYXNzZXN9IHNyYz17c3JjfSB7Li4ub3RoZXJzfSAvPlxyXG59XHJcbiIsImltcG9ydCB7IFJlYWN0LCBjbGFzc05hbWVzIH0gZnJvbSAnamltdS1jb3JlJ1xyXG5pbXBvcnQgdHlwZSB7IFNWR0NvbXBvbmVudFByb3BzIH0gZnJvbSAnamltdS11aSdcclxuaW1wb3J0IHNyYyBmcm9tICcuLi8uLi9zdmcvb3V0bGluZWQvZGlyZWN0aW9uYWwvYXJyb3ctbGVmdC5zdmcnXHJcblxyXG5leHBvcnQgY29uc3QgQXJyb3dMZWZ0T3V0bGluZWQgPSAocHJvcHM6IFNWR0NvbXBvbmVudFByb3BzKSA9PiB7XHJcbiAgY29uc3QgU1ZHID0gd2luZG93LlNWR1xyXG4gIGNvbnN0IHsgY2xhc3NOYW1lLCAuLi5vdGhlcnMgfSA9IHByb3BzXHJcblxyXG4gIGNvbnN0IGNsYXNzZXMgPSBjbGFzc05hbWVzKCdqaW11LWljb24gamltdS1pY29uLWNvbXBvbmVudCcsIGNsYXNzTmFtZSlcclxuICBpZiAoIVNWRykgcmV0dXJuIDxzdmcgY2xhc3NOYW1lPXtjbGFzc2VzfSB7Li4ub3RoZXJzIGFzIGFueX0gLz5cclxuICByZXR1cm4gPFNWRyBjbGFzc05hbWU9e2NsYXNzZXN9IHNyYz17c3JjfSB7Li4ub3RoZXJzfSAvPlxyXG59XHJcbiIsImltcG9ydCB7IFJlYWN0LCBjbGFzc05hbWVzIH0gZnJvbSAnamltdS1jb3JlJ1xyXG5pbXBvcnQgdHlwZSB7IFNWR0NvbXBvbmVudFByb3BzIH0gZnJvbSAnamltdS11aSdcclxuaW1wb3J0IHNyYyBmcm9tICcuLi8uLi9zdmcvb3V0bGluZWQvZGlyZWN0aW9uYWwvY29sbGFwc2UtYWxsLnN2ZydcclxuXHJcbmV4cG9ydCBjb25zdCBDb2xsYXBzZUFsbE91dGxpbmVkID0gKHByb3BzOiBTVkdDb21wb25lbnRQcm9wcykgPT4ge1xyXG4gIGNvbnN0IFNWRyA9IHdpbmRvdy5TVkdcclxuICBjb25zdCB7IGNsYXNzTmFtZSwgLi4ub3RoZXJzIH0gPSBwcm9wc1xyXG5cclxuICBjb25zdCBjbGFzc2VzID0gY2xhc3NOYW1lcygnamltdS1pY29uIGppbXUtaWNvbi1jb21wb25lbnQnLCBjbGFzc05hbWUpXHJcbiAgaWYgKCFTVkcpIHJldHVybiA8c3ZnIGNsYXNzTmFtZT17Y2xhc3Nlc30gey4uLm90aGVycyBhcyBhbnl9IC8+XHJcbiAgcmV0dXJuIDxTVkcgY2xhc3NOYW1lPXtjbGFzc2VzfSBzcmM9e3NyY30gey4uLm90aGVyc30gLz5cclxufVxyXG4iLCJpbXBvcnQgeyBSZWFjdCwgY2xhc3NOYW1lcyB9IGZyb20gJ2ppbXUtY29yZSdcclxuaW1wb3J0IHR5cGUgeyBTVkdDb21wb25lbnRQcm9wcyB9IGZyb20gJ2ppbXUtdWknXHJcbmltcG9ydCBzcmMgZnJvbSAnLi4vLi4vc3ZnL291dGxpbmVkL2RpcmVjdGlvbmFsL2V4cGFuZC1hbGwuc3ZnJ1xyXG5cclxuZXhwb3J0IGNvbnN0IEV4cGFuZEFsbE91dGxpbmVkID0gKHByb3BzOiBTVkdDb21wb25lbnRQcm9wcykgPT4ge1xyXG4gIGNvbnN0IFNWRyA9IHdpbmRvdy5TVkdcclxuICBjb25zdCB7IGNsYXNzTmFtZSwgLi4ub3RoZXJzIH0gPSBwcm9wc1xyXG5cclxuICBjb25zdCBjbGFzc2VzID0gY2xhc3NOYW1lcygnamltdS1pY29uIGppbXUtaWNvbi1jb21wb25lbnQnLCBjbGFzc05hbWUpXHJcbiAgaWYgKCFTVkcpIHJldHVybiA8c3ZnIGNsYXNzTmFtZT17Y2xhc3Nlc30gey4uLm90aGVycyBhcyBhbnl9IC8+XHJcbiAgcmV0dXJuIDxTVkcgY2xhc3NOYW1lPXtjbGFzc2VzfSBzcmM9e3NyY30gey4uLm90aGVyc30gLz5cclxufVxyXG4iLCJpbXBvcnQgeyBSZWFjdCwgY2xhc3NOYW1lcyB9IGZyb20gJ2ppbXUtY29yZSdcclxuaW1wb3J0IHR5cGUgeyBTVkdDb21wb25lbnRQcm9wcyB9IGZyb20gJ2ppbXUtdWknXHJcbmltcG9ydCBzcmMgZnJvbSAnLi4vLi4vc3ZnL291dGxpbmVkL2VkaXRvci90cmFzaC5zdmcnXHJcblxyXG5leHBvcnQgY29uc3QgVHJhc2hPdXRsaW5lZCA9IChwcm9wczogU1ZHQ29tcG9uZW50UHJvcHMpID0+IHtcclxuICBjb25zdCBTVkcgPSB3aW5kb3cuU1ZHXHJcbiAgY29uc3QgeyBjbGFzc05hbWUsIC4uLm90aGVycyB9ID0gcHJvcHNcclxuXHJcbiAgY29uc3QgY2xhc3NlcyA9IGNsYXNzTmFtZXMoJ2ppbXUtaWNvbiBqaW11LWljb24tY29tcG9uZW50JywgY2xhc3NOYW1lKVxyXG4gIGlmICghU1ZHKSByZXR1cm4gPHN2ZyBjbGFzc05hbWU9e2NsYXNzZXN9IHsuLi5vdGhlcnMgYXMgYW55fSAvPlxyXG4gIHJldHVybiA8U1ZHIGNsYXNzTmFtZT17Y2xhc3Nlc30gc3JjPXtzcmN9IHsuLi5vdGhlcnN9IC8+XHJcbn1cclxuIiwiaW1wb3J0IHsgUmVhY3QsIGNsYXNzTmFtZXMgfSBmcm9tICdqaW11LWNvcmUnXHJcbmltcG9ydCB0eXBlIHsgU1ZHQ29tcG9uZW50UHJvcHMgfSBmcm9tICdqaW11LXVpJ1xyXG5pbXBvcnQgc3JjIGZyb20gJy4uLy4uL3N2Zy9vdXRsaW5lZC9zdWdnZXN0ZWQvaW5mby5zdmcnXHJcblxyXG5leHBvcnQgY29uc3QgSW5mb091dGxpbmVkID0gKHByb3BzOiBTVkdDb21wb25lbnRQcm9wcykgPT4ge1xyXG4gIGNvbnN0IFNWRyA9IHdpbmRvdy5TVkdcclxuICBjb25zdCB7IGNsYXNzTmFtZSwgLi4ub3RoZXJzIH0gPSBwcm9wc1xyXG5cclxuICBjb25zdCBjbGFzc2VzID0gY2xhc3NOYW1lcygnamltdS1pY29uIGppbXUtaWNvbi1jb21wb25lbnQnLCBjbGFzc05hbWUpXHJcbiAgaWYgKCFTVkcpIHJldHVybiA8c3ZnIGNsYXNzTmFtZT17Y2xhc3Nlc30gey4uLm90aGVycyBhcyBhbnl9IC8+XHJcbiAgcmV0dXJuIDxTVkcgY2xhc3NOYW1lPXtjbGFzc2VzfSBzcmM9e3NyY30gey4uLm90aGVyc30gLz5cclxufVxyXG4iLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHZpZXdCb3g9XFxcIjAgMCAxNiAxNlxcXCI+PHBhdGggZmlsbD1cXFwiIzAwMFxcXCIgZD1cXFwibTE0IDQtNiA4LTYtOHpcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBkPVxcXCJtNCAyIDggNi04IDZ6XFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHZpZXdCb3g9XFxcIjAgMCAxNiAxNlxcXCI+PHBhdGggZmlsbD1cXFwiIzAwMFxcXCIgZmlsbC1ydWxlPVxcXCJldmVub2RkXFxcIiBkPVxcXCJNMiA3YTEgMSAwIDEgMCAwIDIgMSAxIDAgMCAwIDAtMm01IDFhMSAxIDAgMSAxIDIgMCAxIDEgMCAwIDEtMiAwbTYgMGExIDEgMCAxIDEgMiAwIDEgMSAwIDAgMS0yIDBcXFwiIGNsaXAtcnVsZT1cXFwiZXZlbm9kZFxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGQ9XFxcIk0xNSA3LjVhLjUyLjUyIDAgMCAxLS41MTYuNTI3SDIuOTc2TDYuNDczIDExLjZhLjUzNS41MzUgMCAwIDEgMCAuNzQ2LjUxLjUxIDAgMCAxLS43MyAwTDEgNy41bDQuNzQzLTQuODQ2YS41MS41MSAwIDAgMSAuNzMgMCAuNTM1LjUzNSAwIDAgMSAwIC43NDZMMi45NzYgNi45NzNoMTEuNTA4Yy4yODUgMCAuNTE2LjIzNi41MTYuNTI3XFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHZpZXdCb3g9XFxcIjAgMCAxNiAxNlxcXCI+PHBhdGggZmlsbD1cXFwiIzAwMFxcXCIgZD1cXFwiTTEgM2gxNHYxSDF6TTkgN2g2djFIOXpNNS4wMzYgNi4xNDZhLjUuNSAwIDAgMC0uNzA4IDBMMS4xNDYgOS4zMjhhLjUuNSAwIDEgMCAuNzA4LjcwOGwyLjMyOC0yLjMyOVYxNC41aDFWNy43MDdsMi4zMjggMi4zMjlhLjUuNSAwIDEgMCAuNzA4LS43MDh6XFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHZpZXdCb3g9XFxcIjAgMCAxNiAxNlxcXCI+PHBhdGggZmlsbD1cXFwiIzAwMFxcXCIgZD1cXFwiTTEgM2gxNHYxSDF6TTkgN2g2djFIOXpNNC4zMjggMTQuMzU0YS41LjUgMCAwIDAgLjcwOCAwbDMuMTgyLTMuMTgyYS41LjUgMCAxIDAtLjcwOC0uNzA4bC0yLjMyOCAyLjMyOVY2aC0xdjYuNzkzbC0yLjMyOC0yLjMyOGEuNS41IDAgMSAwLS43MDguNzA3elxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGZpbGwtcnVsZT1cXFwiZXZlbm9kZFxcXCIgZD1cXFwiTTQuNjUzIDEzLjg1NGEuNDg1LjQ4NSAwIDAgMSAwLS43MDhMMTAuMjQgOCA0LjY1MyAyLjg1NGEuNDg1LjQ4NSAwIDAgMSAwLS43MDguNTQuNTQgMCAwIDEgLjczOCAwbDUuOTU2IDUuNWEuNDg1LjQ4NSAwIDAgMSAwIC43MDhsLTUuOTU2IDUuNWEuNTQuNTQgMCAwIDEtLjczOCAwXFxcIiBjbGlwLXJ1bGU9XFxcImV2ZW5vZGRcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBkPVxcXCJtOC43NDUgOCA2LjEgNi4xYS41MjcuNTI3IDAgMSAxLS43NDUuNzQ2TDggOC43NDZsLTYuMSA2LjFhLjUyNy41MjcgMCAxIDEtLjc0Ni0uNzQ2bDYuMS02LjEtNi4xLTYuMWEuNTI3LjUyNyAwIDAgMSAuNzQ2LS43NDZsNi4xIDYuMSA2LjEtNi4xYS41MjcuNTI3IDAgMCAxIC43NDYuNzQ2elxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGQ9XFxcIk02IDYuNWEuNS41IDAgMCAxIDEgMHY2YS41LjUgMCAwIDEtMSAwek05LjUgNmEuNS41IDAgMCAwLS41LjV2NmEuNS41IDAgMCAwIDEgMHYtNmEuNS41IDAgMCAwLS41LS41XFxcIj48L3BhdGg+PHBhdGggZmlsbD1cXFwiIzAwMFxcXCIgZmlsbC1ydWxlPVxcXCJldmVub2RkXFxcIiBkPVxcXCJNMTEgMEg1YTEgMSAwIDAgMC0xIDF2MkguNWEuNS41IDAgMCAwIDAgMWgxLjZsLjgxIDExLjFhMSAxIDAgMCAwIC45OTUuOWg4LjE5YTEgMSAwIDAgMCAuOTk1LS45TDEzLjkgNGgxLjZhLjUuNSAwIDAgMCAwLTFIMTJWMWExIDEgMCAwIDAtMS0xbTAgM1YxSDV2MnptMS44OTUgMWgtOS43OWwuOCAxMWg4LjE5elxcXCIgY2xpcC1ydWxlPVxcXCJldmVub2RkXFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHZpZXdCb3g9XFxcIjAgMCAxNiAxNlxcXCI+PHBhdGggZmlsbD1cXFwiIzAwMFxcXCIgZmlsbC1ydWxlPVxcXCJldmVub2RkXFxcIiBkPVxcXCJNOCAxNkE4IDggMCAxIDEgOCAwYTggOCAwIDAgMSAwIDE2bTAtMUE3IDcgMCAxIDAgOCAxYTcgNyAwIDAgMCAwIDE0TTggNGEuOTA1LjkwNSAwIDAgMC0uOS45OTVsLjM1IDMuNTA3YS41NTIuNTUyIDAgMCAwIDEuMSAwbC4zNS0zLjUwN0EuOTA1LjkwNSAwIDAgMCA4IDRtMSA3YTEgMSAwIDEgMS0yIDAgMSAxIDAgMCAxIDIgMFxcXCIgY2xpcC1ydWxlPVxcXCJldmVub2RkXFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHZpZXdCb3g9XFxcIjAgMCAxNiAxNlxcXCI+PHBhdGggZmlsbD1cXFwiIzAwMFxcXCIgZD1cXFwiTTggNS41YTEgMSAwIDEgMCAwLTIgMSAxIDAgMCAwIDAgMk02LjUgNy41QS41LjUgMCAwIDEgNyA3aDEuNXY0LjVoMWEuNS41IDAgMCAxIDAgMWgtM2EuNS41IDAgMCAxIDAtMWgxVjhIN2EuNS41IDAgMCAxLS41LS41XFxcIj48L3BhdGg+PHBhdGggZmlsbD1cXFwiIzAwMFxcXCIgZmlsbC1ydWxlPVxcXCJldmVub2RkXFxcIiBkPVxcXCJNOCAxNkE4IDggMCAxIDEgOCAwYTggOCAwIDAgMSAwIDE2bTAtMUE3IDcgMCAxIDAgOCAxYTcgNyAwIDAgMCAwIDE0XFxcIiBjbGlwLXJ1bGU9XFxcImV2ZW5vZGRcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBmaWxsLXJ1bGU9XFxcImV2ZW5vZGRcXFwiIGQ9XFxcIk04IDIuMTI1IDE0LjMzNCAxNEgxLjY2N3ptLS44ODItLjQ3YTEgMSAwIDAgMSAxLjc2NSAwbDYuMzMzIDExLjg3NEExIDEgMCAwIDEgMTQuMzM0IDE1SDEuNjY3YTEgMSAwIDAgMS0uODgyLTEuNDd6TTggNC44NzRhLjkwNS45MDUgMCAwIDAtLjkuOTk1bC4zNSAzLjUwN2EuNTUyLjU1MiAwIDAgMCAxLjEgMEw4LjkgNS44N2EuOTA1LjkwNSAwIDAgMC0uOS0uOTk1bTEgN2ExIDEgMCAxIDEtMiAwIDEgMSAwIDAgMSAyIDBcXFwiIGNsaXAtcnVsZT1cXFwiZXZlbm9kZFxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMjAgMjBcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGQ9XFxcIk04LjUgM0E1LjUgNS41IDAgMCAxIDE0IDguNWE1LjUgNS41IDAgMCAxLTEuMjczIDMuNTI3bDQuMDUzIDQuMDU0YS43NS43NSAwIDEgMS0xLjA2IDEuMDZsLTQuMDU0LTQuMDUzYTUuNSA1LjUgMCAwIDEtMy41MjcgMS4yNzMgNS41IDUuNSAwIDEgMSAwLTExSDguNXptMCAxLjVoLS4zNjFhNCA0IDAgMSAwIDAgOCA0IDQgMCAwIDAgMC04elxcXCI+PC9wYXRoPjxyZWN0IHdpZHRoPVxcXCIxOVxcXCIgaGVpZ2h0PVxcXCIxOVxcXCIgeD1cXFwiLjVcXFwiIHk9XFxcIi41XFxcIiBzdHJva2U9XFxcIiMwMDBcXFwiIHJ4PVxcXCIxLjVcXFwiPjwvcmVjdD48L3N2Zz5cIiIsImltcG9ydCB0eXBlIHsgU3BhdGlhbFJlbGF0aW9uc2hpcCwgVW5pdHMgfSBmcm9tICdAZXNyaS9hcmNnaXMtcmVzdC1mZWF0dXJlLXNlcnZpY2UnXG5pbXBvcnQgdHlwZSB7IEltbXV0YWJsZU9iamVjdCwgSW1tdXRhYmxlQXJyYXksIFNxbEV4cHJlc3Npb24sIFVzZURhdGFTb3VyY2UsIEljb25SZXN1bHQsIE9yZGVyQnlPcHRpb24gfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgdHlwZSB7IFNpemUgfSBmcm9tICdqaW11LXVpJ1xuXG5leHBvcnQgZW51bSBDcmVhdGVUb29sVHlwZSB7XG4gIFBvaW50ID0gJ1BvaW50JyxcbiAgUG9seWxpbmUgPSAnUG9seWxpbmUnLFxuICBQb2x5Z29uID0gJ1BvbHlnb24nLFxuICBSZWN0YW5nbGUgPSAnUmVjdGFuZ2xlJyxcbiAgQ2lyY2xlID0gJ0NpcmNsZSdcbn1cblxuZXhwb3J0IGVudW0gU2VsZWN0aW9uVHlwZSB7XG4gIE5ld1NlbGVjdGlvbiA9ICdORVdfU0VMRUNUSU9OJyxcbiAgQWRkVG9TZWxlY3Rpb24gPSAnQUREX1RPX0NVUlJFTlRfU0VMRUNUSU9OJyxcbiAgUmVtb3ZlRnJvbVNlbGVjdGlvbiA9ICdSRU1PVkVfRlJPTV9DVVJSRU5UX1NFTEVDVElPTicsXG4gIFN1YnNldFNlbGVjdGlvbiA9ICdTVUJTRVRfRlJPTV9DVVJSRU5UX1NFTEVDVElPTicsXG4gIFN3aXRjaFNlbGVjdGlvbiA9ICdTV0lUQ0hfQ1VSUkVOVF9TRUxFQ1RJT04nLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEZpZWxkIHtcbiAgbmFtZTogc3RyaW5nXG4gIGFsaWFzPzogc3RyaW5nXG4gIGxhYmVsPzogc3RyaW5nXG59XG5cbmV4cG9ydCBlbnVtIFF1ZXJ5QXJyYW5nZVR5cGUge1xuICBCbG9jayA9ICdCTE9DSycsXG4gIElubGluZSA9ICdJTkxJTkUnLFxuICBQb3BwZXIgPSAnUE9QUEVSJyxcbn1cblxuZXhwb3J0IGVudW0gU3BhdGlhbEZpbHRlclR5cGUge1xuICBDdXJyZW50TWFwRXh0ZW50ID0gJ0N1cnJlbnRNYXBFeHRlbnQnLFxuICBJbnRlcmFjdGl2ZURyYXdNb2RlID0gJ0ludGVyYWN0aXZlRHJhd01vZGUnLFxuICBOb25lID0gJydcbn1cblxuZXhwb3J0IGVudW0gU3BhdGlhbFJlbGF0aW9uIHtcbiAgSW50ZXJzZWN0ID0gJ2ludGVyc2VjdHMnLFxuICBDb250YWluID0gJ2NvbnRhaW5zJyxcbiAgQ3Jvc3MgPSAnY3Jvc3NlcycsXG4gIEVudmVsb3BlSW50ZXJzZWN0ID0gJ2VudmVsb3BlLWludGVyc2VjdHMnLFxuICBJbmRleEludGVyc2VjdCA9ICdpbmRleC1pbnRlcnNlY3RzJyxcbiAgT3ZlcmxhcCA9ICdvdmVybGFwcycsXG4gIFRvdWNoID0gJ3RvdWNoZXMnLFxuICBXaXRoaW4gPSAnd2l0aGluJyxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTcGF0aWFsRmlsdGVyT2JqIHtcbiAgZ2VvbWV0cnk6IGFueVxuICBncmFwaGljPzogX19lc3JpLkdyYXBoaWNcbiAgbGF5ZXI/OiBfX2VzcmkuR3JhcGhpY3NMYXllclxuICBjbGVhckFmdGVyQXBwbHk/OiBib29sZWFuXG4gIHJlbGF0aW9uPzogU3BhdGlhbFJlbGF0aW9uXG4gIGJ1ZmZlcj86IHsgZGlzdGFuY2U6IG51bWJlciwgdW5pdDogVW5pdFR5cGUgfVxufVxuXG5leHBvcnQgY29uc3QgbWFwSlNBUElTcGF0aWFsUmVsVG9Ec1NwYXRpYWxSZWw6IHsgW2tleTogc3RyaW5nXTogU3BhdGlhbFJlbGF0aW9uc2hpcCB9ID0ge1xuICBbU3BhdGlhbFJlbGF0aW9uLkludGVyc2VjdF06ICdlc3JpU3BhdGlhbFJlbEludGVyc2VjdHMnLFxuICBbU3BhdGlhbFJlbGF0aW9uLkNvbnRhaW5dOiAnZXNyaVNwYXRpYWxSZWxDb250YWlucycsXG4gIFtTcGF0aWFsUmVsYXRpb24uQ3Jvc3NdOiAnZXNyaVNwYXRpYWxSZWxDcm9zc2VzJyxcbiAgW1NwYXRpYWxSZWxhdGlvbi5FbnZlbG9wZUludGVyc2VjdF06ICdlc3JpU3BhdGlhbFJlbEVudmVsb3BlSW50ZXJzZWN0cycsXG4gIFtTcGF0aWFsUmVsYXRpb24uSW5kZXhJbnRlcnNlY3RdOiAnZXNyaVNwYXRpYWxSZWxJbmRleEludGVyc2VjdHMnLFxuICBbU3BhdGlhbFJlbGF0aW9uLk92ZXJsYXBdOiAnZXNyaVNwYXRpYWxSZWxPdmVybGFwcycsXG4gIFtTcGF0aWFsUmVsYXRpb24uVG91Y2hdOiAnZXNyaVNwYXRpYWxSZWxUb3VjaGVzJyxcbiAgW1NwYXRpYWxSZWxhdGlvbi5XaXRoaW5dOiAnZXNyaVNwYXRpYWxSZWxXaXRoaW4nXG59XG5cbmV4cG9ydCBlbnVtIFVuaXRUeXBlIHtcbiAgTWlsZXMgPSAnTWlsZXMnLFxuICBLaWxvbWV0ZXJzID0gJ0tpbG9tZXRlcnMnLFxuICBGZWV0ID0gJ0ZlZXQnLFxuICBNZXRlcnMgPSAnTWV0ZXJzJyxcbiAgTmF1dGljYWxNaWxlcyA9ICdOYXV0aWNhbE1pbGVzJyxcbn1cblxuZXhwb3J0IGNvbnN0IG1hcEpTQVBJVW5pdFRvRHNVbml0OiB7IFtrZXk6IHN0cmluZ106IFVuaXRzIH0gPSB7XG4gIFtVbml0VHlwZS5NaWxlc106ICdlc3JpU1JVbml0X1N0YXR1dGVNaWxlJyxcbiAgW1VuaXRUeXBlLktpbG9tZXRlcnNdOiAnZXNyaVNSVW5pdF9LaWxvbWV0ZXInLFxuICBbVW5pdFR5cGUuRmVldF06ICdlc3JpU1JVbml0X0Zvb3QnLFxuICBbVW5pdFR5cGUuTWV0ZXJzXTogJ2VzcmlTUlVuaXRfTWV0ZXInLFxuICBbVW5pdFR5cGUuTmF1dGljYWxNaWxlc106ICdlc3JpU1JVbml0X05hdXRpY2FsTWlsZSdcbn1cblxuZXhwb3J0IGVudW0gTGlzdERpcmVjdGlvbiB7XG4gIEhvcml6b250YWwgPSAnSG9yaXpvbnRhbCcsXG4gIFZlcnRpY2FsID0gJ1ZlcnRpY2FsJyxcbn1cblxuZXhwb3J0IGVudW0gUGFnaW5nVHlwZSB7XG4gIE11bHRpUGFnZSA9ICdNdWx0aVBhZ2UnLFxuICBMYXp5TG9hZCA9ICdMYXp5TG9hZCcsXG4gIFNpbXBsZSA9ICdTaW1wbGUnLCAvLyBSZW5kZXIgYWxsIHJlY29yZHMgYXQgb25jZSwgbm8gbGF6eSBsb2FkaW5nIG9yIHBhZ2luYXRpb25cbn1cblxuZXhwb3J0IGVudW0gRmllbGRzVHlwZSB7XG4gIFBvcHVwU2V0dGluZyA9ICdQb3B1cFNldHRpbmcnLFxuICBTZWxlY3RBdHRyaWJ1dGVzID0gJ1NlbGVjdEF0dHJpYnV0ZXMnLFxufVxuXG5leHBvcnQgZW51bSBTb3J0RGlyZWN0aW9uIHtcbiAgQXNjID0gJ0FzYycsXG4gIERlc2MgPSAnRGVzYycsXG59XG5cbmV4cG9ydCBlbnVtIFJlc3VsdFNlbGVjdE1vZGUge1xuICBTaW5nbGUgPSAnU2luZ2xlJyxcbiAgTXVsdGlwbGUgPSAnTXVsdGlwbGUnLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFNvcnRPcHRpb24ge1xuICBuYW1lOiBzdHJpbmdcbiAgZGlyZWN0aW9uOiBTb3J0RGlyZWN0aW9uXG59XG5cbmV4cG9ydCBlbnVtIFN5bWJvbFR5cGUge1xuICBEZWZhdWx0U3ltYm9sID0gJ0RlZmF1bHRTeW1ib2wnLFxuICBDdXN0b21TeW1ib2wgPSAnQ3VzdG9tU3ltYm9sJyxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBRdWVyeUl0ZW1UeXBlIHtcbiAgY29uZmlnSWQ6IHN0cmluZ1xuICBpY29uPzogSWNvblJlc3VsdFxuICBuYW1lPzogc3RyaW5nXG4gIGRpc3BsYXlMYWJlbD86IGJvb2xlYW5cbiAgdXNlRGF0YVNvdXJjZT86IFVzZURhdGFTb3VyY2VcbiAgb3V0cHV0RGF0YVNvdXJjZUlkPzogc3RyaW5nXG4gIHVzZUF0dHJpYnV0ZUZpbHRlcj86IGJvb2xlYW5cbiAgdXNlU3BhdGlhbEZpbHRlcj86IGJvb2xlYW5cbiAgYXR0cmlidXRlRmlsdGVyTGFiZWw/OiBzdHJpbmdcbiAgc3BhdGlhbEZpbHRlckxhYmVsPzogc3RyaW5nXG4gIGF0dHJpYnV0ZUZpbHRlckRlc2M/OiBzdHJpbmdcbiAgc3BhdGlhbEZpbHRlckRlc2M/OiBzdHJpbmdcbiAgcmVzdWx0c0xhYmVsPzogc3RyaW5nXG4gIHNxbEV4cHJPYmo/OiBTcWxFeHByZXNzaW9uXG4gIHNwYXRpYWxNYXBXaWRnZXRJZHM/OiBzdHJpbmdbXVxuICBzcGF0aWFsRmlsdGVyVHlwZXM/OiBTcGF0aWFsRmlsdGVyVHlwZVtdXG4gIHNwYXRpYWxJbnRlcmFjdGl2ZUNyZWF0ZVRvb2xUeXBlcz86IENyZWF0ZVRvb2xUeXBlW11cbiAgc3BhdGlhbEludGVyYWN0aXZlRW5hYmxlQnVmZmVyPzogYm9vbGVhblxuICBzcGF0aWFsSW50ZXJhY3RpdmVCdWZmZXJEaXN0YW5jZT86IG51bWJlclxuICBzcGF0aWFsSW50ZXJhY3RpdmVCdWZmZXJVbml0PzogVW5pdFR5cGVcbiAgc3BhdGlhbFJlbGF0aW9ucz86IFNwYXRpYWxSZWxhdGlvbltdXG4gIHNwYXRpYWxSZWxhdGlvblVzZURhdGFTb3VyY2VzPzogVXNlRGF0YVNvdXJjZVtdXG4gIHNwYXRpYWxSZWxhdGlvbkVuYWJsZVNlbGVjdFRvb2w/OiBib29sZWFuXG4gIHNwYXRpYWxSZWxhdGlvbkVuYWJsZUJ1ZmZlcj86IGJvb2xlYW5cbiAgc3BhdGlhbFJlbGF0aW9uQnVmZmVyRGlzdGFuY2U/OiBudW1iZXJcbiAgc3BhdGlhbFJlbGF0aW9uQnVmZmVyVW5pdD86IFVuaXRUeXBlXG4gIHNwYXRpYWxJbmNsdWRlUnVudGltZURhdGE/OiBib29sZWFuXG4gIHJlc3VsdExpc3REaXJlY3Rpb24/OiBMaXN0RGlyZWN0aW9uXG4gIHJlc3VsdFBhZ2luZ1N0eWxlPzogUGFnaW5nVHlwZVxuICByZXN1bHRGaWVsZHNUeXBlPzogRmllbGRzVHlwZVxuICByZXN1bHRUaXRsZUZpZWxkcz86IHN0cmluZ1tdXG4gIHJlc3VsdFRpdGxlRXhwcmVzc2lvbj86IHN0cmluZ1xuICByZXN1bHREaXNwbGF5RmllbGRzPzogc3RyaW5nW11cbiAgcmVzdWx0U3ltYm9sVHlwZT86IFN5bWJvbFR5cGVcbiAgcmVzdWx0Q3VzdG9tU3ltYm9sPzogYW55XG4gIHJlc3VsdEFsbG93Q2hhbmdlU3ltYm9sPzogYm9vbGVhblxuICByZXN1bHRFeHBhbmRCeURlZmF1bHQ/OiBib29sZWFuXG4gIHJlc3VsdFNlbGVjdE1vZGU/OiBSZXN1bHRTZWxlY3RNb2RlXG4gIGFsbG93RXhwb3J0PzogYm9vbGVhblxuICBzb3J0T3B0aW9ucz86IE9yZGVyQnlPcHRpb25bXVxuICBpdGVtU2l6ZU1hcD86IHtcbiAgICBhcnJhbmdlbWVudEhvcml6b250YWxQb3BwZXI/OiBTaXplTWFwXG4gIH1cbiAgLy8gR3JvdXBpbmcgZmllbGRzXG4gIGdyb3VwSWQ/OiBzdHJpbmdcbiAgZ3JvdXBEaXNwbGF5TmFtZT86IHN0cmluZ1xuICBzZWFyY2hBbGlhcz86IHN0cmluZ1xuICBzaG9ydElkPzogc3RyaW5nXG4gIHpvb21Ub1NlbGVjdGVkPzogYm9vbGVhblxuICAvLyBEaXNwbGF5IG9yZGVyIChsb3dlciBudW1iZXJzIGFwcGVhciBmaXJzdCwgb3B0aW9uYWwpXG4gIG9yZGVyPzogbnVtYmVyXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2l6ZU1hcCB7XG4gIG1pblNpemU/OiBTaXplXG4gIGRlZmF1bHRTaXplPzogU2l6ZVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFNldHRpbmdDb25maWcge1xuICBxdWVyeUl0ZW1zPzogSW1tdXRhYmxlQXJyYXk8UXVlcnlJdGVtVHlwZT5cbiAgYXJyYW5nZVR5cGU6IFF1ZXJ5QXJyYW5nZVR5cGVcbiAgYXJyYW5nZVdyYXA/OiBib29sZWFuXG4gIHJlc3VsdExpc3REaXJlY3Rpb24/OiBMaXN0RGlyZWN0aW9uXG4gIHJlc3VsdFBhZ2luZ1N0eWxlPzogUGFnaW5nVHlwZVxuICBsYXp5TG9hZEluaXRpYWxQYWdlU2l6ZT86IG51bWJlclxuICB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0OiBib29sZWFuIC8vIFVzZSBncmFwaGljcyBsYXllciBmb3IgaGlnaGxpZ2h0aW5nIChyZXF1aXJlZCAtIGluZGVwZW5kZW50IG9mIGxheWVyIHZpc2liaWxpdHkpXG4gIGhpZ2hsaWdodE1hcFdpZGdldElkPzogc3RyaW5nIC8vIE1hcCB3aWRnZXQgSUQgdG8gdXNlIGZvciBncmFwaGljcyBsYXllciBoaWdobGlnaHRpbmdcbiAgc2l6ZU1hcD86IHtcbiAgICBhcnJhbmdlbWVudEljb25Qb3BwZXI/OiBTaXplTWFwXG4gIH1cbn1cblxuZXhwb3J0IHR5cGUgSU1Db25maWcgPSBJbW11dGFibGVPYmplY3Q8U2V0dGluZ0NvbmZpZz5cblxuXG4iLCIvKipcbiAqIEN1c3RvbSBcIkFkZCB0byBNYXBcIiBkYXRhIGFjdGlvbiBmb3IgUXVlcnlTaW1wbGUgd2lkZ2V0LlxuICogXG4gKiBUaGlzIGFjdGlvbiByZXBsYWNlcyB0aGUgZnJhbWV3b3JrJ3MgXCJTaG93IG9uIE1hcFwiIGFjdGlvbiB3aXRoIGEgY3VzdG9tXG4gKiBpbXBsZW1lbnRhdGlvbiB0aGF0IHVzZXMgUXVlcnlTaW1wbGUncyBzZWxlY3Rpb24gcHJvY2VzcyAoc2VsZWN0UmVjb3Jkc0FuZFB1Ymxpc2gpLlxuICogVGhpcyBlbnN1cmVzIGNvbnNpc3RlbnQgYmVoYXZpb3Igd2l0aCBxdWVyeSByZXN1bHRzIGFuZCBwcm9wZXIgaW50ZWdyYXRpb25cbiAqIHdpdGggdGhlIHdpZGdldCdzIFwiQ2xlYXIgcmVzdWx0c1wiIGZ1bmN0aW9uYWxpdHkuXG4gKi9cblxuaW1wb3J0IHsgdHlwZSBEYXRhUmVjb3JkU2V0LCB0eXBlIERhdGFBY3Rpb24sIERhdGFMZXZlbCwgdHlwZSBJbnRsU2hhcGUsIHR5cGUgRGF0YVNvdXJjZSB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoIH0gZnJvbSAnLi4vcnVudGltZS9zZWxlY3Rpb24tdXRpbHMnXG5pbXBvcnQgeyBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyIH0gZnJvbSAnd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24nXG5cbmNvbnN0IGRlYnVnTG9nZ2VyID0gY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlcigpXG5pbXBvcnQgdHlwZSB7IEZlYXR1cmVEYXRhUmVjb3JkIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHR5cGUgeyBRdWVyeUl0ZW1UeXBlIH0gZnJvbSAnLi4vY29uZmlnJ1xuXG4vKipcbiAqIENyZWF0ZXMgYSBjdXN0b20gXCJBZGQgdG8gTWFwXCIgZGF0YSBhY3Rpb24gdGhhdCB1c2VzIFF1ZXJ5U2ltcGxlJ3Mgc2VsZWN0aW9uIHByb2Nlc3MuXG4gKiBcbiAqIFRoaXMgYWN0aW9uIHJlcGxhY2VzIHRoZSBmcmFtZXdvcmsncyBcIlNob3cgb24gTWFwXCIgYWN0aW9uIGFuZCBlbnN1cmVzIGNvbnNpc3RlbnRcbiAqIGJlaGF2aW9yIHdpdGggUXVlcnlTaW1wbGUncyBxdWVyeSByZXN1bHRzIGJ5IHVzaW5nIHRoZSBzYW1lIHNlbGVjdGlvbiBtZWNoYW5pc20uXG4gKiBcbiAqIEBwYXJhbSB3aWRnZXRJZCAtIFRoZSB3aWRnZXQgSUQgdGhhdCBwcm92aWRlcyB0aGlzIGFjdGlvblxuICogQHBhcmFtIG91dHB1dERTIC0gVGhlIG91dHB1dCBkYXRhIHNvdXJjZSAodXNlZCBmb3Igc2VsZWN0aW9uIG9uIHRoZSBvcmlnaW4gbGF5ZXIpXG4gKiBAcGFyYW0gaW50bCAtIFRoZSBJbnRsIG9iamVjdCBmb3IgaW50ZXJuYXRpb25hbGl6YXRpb25cbiAqIEBwYXJhbSBxdWVyeUl0ZW0gLSBPcHRpb25hbCBxdWVyeSBpdGVtIGNvbmZpZ3VyYXRpb24gKGZvciB6b29tVG9TZWxlY3RlZCBzZXR0aW5nKVxuICogQHBhcmFtIHJ1bnRpbWVab29tVG9TZWxlY3RlZCAtIE9wdGlvbmFsIHJ1bnRpbWUgem9vbSBvdmVycmlkZSBmcm9tIHRoZSBxdWVyeSBmb3JtXG4gKiBAcmV0dXJucyBBIERhdGFBY3Rpb24gb2JqZWN0IHRoYXQgY2FuIGJlIHVzZWQgYnkgRGF0YUFjdGlvbkxpc3RcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUFkZFRvTWFwQWN0aW9uKFxuICB3aWRnZXRJZDogc3RyaW5nLFxuICBvdXRwdXREUzogRGF0YVNvdXJjZSxcbiAgaW50bDogSW50bFNoYXBlLFxuICBxdWVyeUl0ZW0/OiBRdWVyeUl0ZW1UeXBlLFxuICBydW50aW1lWm9vbVRvU2VsZWN0ZWQ/OiBib29sZWFuXG4pOiBEYXRhQWN0aW9uIHtcbiAgcmV0dXJuIHtcbiAgICBpZDogYCR7d2lkZ2V0SWR9LWFkZFRvTWFwYCxcbiAgICBuYW1lOiAnYWRkVG9NYXAnLFxuICAgIGxhYmVsOiBpbnRsLmZvcm1hdE1lc3NhZ2UoeyBpZDogJ2FkZFRvTWFwJywgZGVmYXVsdE1lc3NhZ2U6ICdBZGQgdG8gbWFwJyB9KSxcbiAgICAvLyBJY29uIG1hdGNoZXMgdGhlIGZyYW1ld29yaydzIFwiU2hvdyBvbiBNYXBcIiBhY3Rpb24gZm9yIGNvbnNpc3RlbmN5XG4gICAgaWNvbjogcmVxdWlyZSgnLi4vcnVudGltZS9hc3NldHMvaWNvbnMvc2hvdy1vbi1tYXAuc3ZnJykuZGVmYXVsdCB8fCByZXF1aXJlKCcuLi9ydW50aW1lL2Fzc2V0cy9pY29ucy9zaG93LW9uLW1hcC5zdmcnKSxcbiAgICAvLyBOb3RlOiBJbmRleCBtYXkgbm90IGNvbnRyb2wgcG9zaXRpb24gaWYgZXh0cmFBY3Rpb25zIGFyZSBhbHdheXMgYXBwZW5kZWQgYWZ0ZXIgZnJhbWV3b3JrIGFjdGlvbnNcbiAgICBpbmRleDogLTEwMCxcbiAgICB3aWRnZXRJZCxcbiAgICBpbnRsLFxuICAgIHN1cHBvcnRQcm92aWRlcldpZGdldDogdHJ1ZSxcbiAgICBcbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmVzIGlmIHRoaXMgYWN0aW9uIGNhbiBwcm9jZXNzIHRoZSBnaXZlbiBkYXRhIHNldHMuXG4gICAgICogU3VwcG9ydHMgUmVjb3JkcyBsZXZlbCBhY3Rpb25zIHdpdGggZmVhdHVyZSBkYXRhIHJlY29yZHMuXG4gICAgICovXG4gICAgaXNTdXBwb3J0ZWQ6IGFzeW5jIChkYXRhU2V0czogRGF0YVJlY29yZFNldFtdLCBkYXRhTGV2ZWw6IERhdGFMZXZlbCwgYWN0aW9uV2lkZ2V0SWQ6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4gPT4ge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdEQVRBLUFDVElPTicsIHtcbiAgICAgICAgYWN0aW9uOiAnYWRkVG9NYXAtaXNTdXBwb3J0ZWQnLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgYWN0aW9uV2lkZ2V0SWQsXG4gICAgICAgIGRhdGFMZXZlbCxcbiAgICAgICAgZGF0YVNldHNDb3VudDogZGF0YVNldHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICBoYXNPdXRwdXREUzogISFvdXRwdXREU1xuICAgICAgfSlcbiAgICAgIFxuICAgICAgLy8gT25seSBzdXBwb3J0IFJlY29yZHMgbGV2ZWwgYWN0aW9uc1xuICAgICAgaWYgKGRhdGFMZXZlbCAhPT0gRGF0YUxldmVsLlJlY29yZHMpIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdEQVRBLUFDVElPTicsIHtcbiAgICAgICAgICBhY3Rpb246ICdhZGRUb01hcC1pc1N1cHBvcnRlZCcsXG4gICAgICAgICAgcmVzdWx0OiBmYWxzZSxcbiAgICAgICAgICByZWFzb246ICdOb3QgUmVjb3JkcyBsZXZlbCdcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIE5lZWQgYXQgbGVhc3Qgb25lIGRhdGEgc2V0IHdpdGggcmVjb3Jkc1xuICAgICAgaWYgKCFkYXRhU2V0cyB8fCBkYXRhU2V0cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdEQVRBLUFDVElPTicsIHtcbiAgICAgICAgICBhY3Rpb246ICdhZGRUb01hcC1pc1N1cHBvcnRlZCcsXG4gICAgICAgICAgcmVzdWx0OiBmYWxzZSxcbiAgICAgICAgICByZWFzb246ICdObyBkYXRhIHNldHMnXG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBDaGVjayBpZiB3ZSBoYXZlIHJlY29yZHMgYW5kIG91dHB1dCBkYXRhIHNvdXJjZVxuICAgICAgY29uc3QgaGFzUmVjb3JkcyA9IGRhdGFTZXRzLnNvbWUoZHMgPT4gZHMucmVjb3JkcyAmJiBkcy5yZWNvcmRzLmxlbmd0aCA+IDApXG4gICAgICBjb25zdCBzdXBwb3J0ZWQgPSBoYXNSZWNvcmRzICYmICEhb3V0cHV0RFNcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdEQVRBLUFDVElPTicsIHtcbiAgICAgICAgYWN0aW9uOiAnYWRkVG9NYXAtaXNTdXBwb3J0ZWQnLFxuICAgICAgICByZXN1bHQ6IHN1cHBvcnRlZCxcbiAgICAgICAgaGFzUmVjb3JkcyxcbiAgICAgICAgcmVjb3Jkc0NvdW50OiBkYXRhU2V0cy5yZWR1Y2UoKHN1bSwgZHMpID0+IHN1bSArIChkcy5yZWNvcmRzPy5sZW5ndGggfHwgMCksIDApXG4gICAgICB9KVxuICAgICAgXG4gICAgICByZXR1cm4gc3VwcG9ydGVkXG4gICAgfSxcbiAgICBcbiAgICAvKipcbiAgICAgKiBFeGVjdXRlcyB0aGUgYWN0aW9uIGJ5IHNlbGVjdGluZyByZWNvcmRzIHVzaW5nIFF1ZXJ5U2ltcGxlJ3Mgc2VsZWN0aW9uIHByb2Nlc3MuXG4gICAgICovXG4gICAgb25FeGVjdXRlOiBhc3luYyAoZGF0YVNldHM6IERhdGFSZWNvcmRTZXRbXSwgZGF0YUxldmVsOiBEYXRhTGV2ZWwsIGFjdGlvbldpZGdldElkOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+ID0+IHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnREFUQS1BQ1RJT04nLCB7XG4gICAgICAgIGFjdGlvbjogJ2FkZFRvTWFwLW9uRXhlY3V0ZScsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICBhY3Rpb25XaWRnZXRJZCxcbiAgICAgICAgZGF0YUxldmVsLFxuICAgICAgICBkYXRhU2V0c0NvdW50OiBkYXRhU2V0cz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgIGhhc091dHB1dERTOiAhIW91dHB1dERTXG4gICAgICB9KVxuICAgICAgXG4gICAgICBpZiAoIW91dHB1dERTIHx8IGRhdGFMZXZlbCAhPT0gRGF0YUxldmVsLlJlY29yZHMpIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdEQVRBLUFDVElPTicsIHtcbiAgICAgICAgICBhY3Rpb246ICdhZGRUb01hcC1vbkV4ZWN1dGUnLFxuICAgICAgICAgIHJlc3VsdDogZmFsc2UsXG4gICAgICAgICAgcmVhc29uOiAhb3V0cHV0RFMgPyAnTm8gb3V0cHV0RFMnIDogJ05vdCBSZWNvcmRzIGxldmVsJ1xuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQ29sbGVjdCBhbGwgcmVjb3JkcyBmcm9tIGFsbCBkYXRhIHNldHNcbiAgICAgIGNvbnN0IGFsbFJlY29yZHM6IEZlYXR1cmVEYXRhUmVjb3JkW10gPSBbXVxuICAgICAgZGF0YVNldHMuZm9yRWFjaChkYXRhU2V0ID0+IHtcbiAgICAgICAgaWYgKGRhdGFTZXQucmVjb3JkcyAmJiBkYXRhU2V0LnJlY29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIC8vIEZpbHRlciB0byBvbmx5IEZlYXR1cmVEYXRhUmVjb3JkIHR5cGVzXG4gICAgICAgICAgY29uc3QgZmVhdHVyZVJlY29yZHMgPSBkYXRhU2V0LnJlY29yZHMuZmlsdGVyKFxuICAgICAgICAgICAgKHJlY29yZCk6IHJlY29yZCBpcyBGZWF0dXJlRGF0YVJlY29yZCA9PiB7XG4gICAgICAgICAgICAgIHJldHVybiByZWNvcmQgJiYgdHlwZW9mIChyZWNvcmQgYXMgRmVhdHVyZURhdGFSZWNvcmQpLmdldEdlb21ldHJ5ID09PSAnZnVuY3Rpb24nXG4gICAgICAgICAgICB9XG4gICAgICAgICAgKVxuICAgICAgICAgIGFsbFJlY29yZHMucHVzaCguLi5mZWF0dXJlUmVjb3JkcylcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgaWYgKGFsbFJlY29yZHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnREFUQS1BQ1RJT04nLCB7XG4gICAgICAgICAgYWN0aW9uOiAnYWRkVG9NYXAtb25FeGVjdXRlJyxcbiAgICAgICAgICByZXN1bHQ6IGZhbHNlLFxuICAgICAgICAgIHJlYXNvbjogJ05vIGZlYXR1cmUgcmVjb3JkcyBmb3VuZCdcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIEdldCByZWNvcmQgSURzXG4gICAgICBjb25zdCByZWNvcmRJZHMgPSBhbGxSZWNvcmRzLm1hcChyZWNvcmQgPT4gcmVjb3JkLmdldElkKCkpXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnREFUQS1BQ1RJT04nLCB7XG4gICAgICAgIGFjdGlvbjogJ2FkZFRvTWFwLW9uRXhlY3V0ZScsXG4gICAgICAgIHJlY29yZHNDb3VudDogYWxsUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgIHJlY29yZElkczogcmVjb3JkSWRzLnNsaWNlKDAsIDEwKSwgLy8gTG9nIGZpcnN0IDEwIElEc1xuICAgICAgICBvdXRwdXREU0lkOiBvdXRwdXREUy5pZFxuICAgICAgfSlcbiAgICAgIFxuICAgICAgLy8gVXNlIFF1ZXJ5U2ltcGxlJ3Mgc2VsZWN0aW9uIHByb2Nlc3MgLSBzZWxlY3RzIG9uIG9yaWdpbiBsYXllciBhbmQgcHVibGlzaGVzIHNlbGVjdGlvbiBtZXNzYWdlc1xuICAgICAgLy8gVGhpcyBlbnN1cmVzIGNvbnNpc3RlbnQgYmVoYXZpb3Igd2l0aCBxdWVyeSByZXN1bHRzIGFuZCBwcm9wZXIgaW50ZWdyYXRpb24gd2l0aCBcIkNsZWFyIHJlc3VsdHNcIlxuICAgICAgdHJ5IHtcbiAgICAgICAgc2VsZWN0UmVjb3Jkc0FuZFB1Ymxpc2god2lkZ2V0SWQsIG91dHB1dERTLCByZWNvcmRJZHMsIGFsbFJlY29yZHMsIHRydWUpXG4gICAgICAgIFxuICAgICAgICAvLyBOb3RlOiBab29tIGlzIG5vdyBoYW5kbGVkIGJ5IHRoZSBzZXBhcmF0ZSBcIlpvb20gVG9cIiBhY3Rpb24gaW4gdGhlIERhdGFBY3Rpb25MaXN0XG4gICAgICAgIC8vIFVzZXJzIGNhbiBjbGljayBcIlpvb20gVG9cIiBmcm9tIHRoZSBhY3Rpb24gbWVudSBpZiB0aGV5IHdhbnQgdG8gem9vbSB0byBzZWxlY3RlZCByZWNvcmRzXG4gICAgICAgIFxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0RBVEEtQUNUSU9OJywge1xuICAgICAgICAgIGFjdGlvbjogJ2FkZFRvTWFwLW9uRXhlY3V0ZScsXG4gICAgICAgICAgcmVzdWx0OiB0cnVlLFxuICAgICAgICAgIG1lc3NhZ2U6ICdTdWNjZXNzZnVsbHkgc2VsZWN0ZWQgcmVjb3JkcyBhbmQgcHVibGlzaGVkIHNlbGVjdGlvbiBtZXNzYWdlJ1xuICAgICAgICB9KVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnREFUQS1BQ1RJT04nLCB7XG4gICAgICAgICAgYWN0aW9uOiAnYWRkVG9NYXAtb25FeGVjdXRlJyxcbiAgICAgICAgICByZXN1bHQ6IGZhbHNlLFxuICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvciksXG4gICAgICAgICAgZXJyb3JTdGFjazogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnN0YWNrIDogdW5kZWZpbmVkXG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgIH0sXG4gICAgXG4gICAgLyoqXG4gICAgICogQ2xlYW51cCBtZXRob2QgKHJlcXVpcmVkIGJ5IERhdGFBY3Rpb24gaW50ZXJmYWNlKVxuICAgICAqL1xuICAgIGRlc3Ryb3k6ICgpOiB2b2lkID0+IHtcbiAgICAgIC8vIE5vIGNsZWFudXAgbmVlZGVkXG4gICAgfVxuICB9XG59XG5cbiIsImltcG9ydCB7IHR5cGUgRGF0YVJlY29yZFNldCwgdHlwZSBEYXRhQWN0aW9uLCBEYXRhTGV2ZWwsIHR5cGUgRGF0YVNvdXJjZSwgdHlwZSBJbnRsU2hhcGUgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBjcmVhdGVBZGRUb01hcEFjdGlvbiB9IGZyb20gJy4vYWRkLXRvLW1hcC1hY3Rpb24nXG5pbXBvcnQgeyBjcmVhdGVab29tVG9BY3Rpb24gfSBmcm9tICcuL3pvb20tdG8tYWN0aW9uJ1xuaW1wb3J0IHR5cGUgeyBRdWVyeUl0ZW1UeXBlIH0gZnJvbSAnLi4vY29uZmlnJ1xuXG4vKipcbiAqIFF1ZXJ5U2ltcGxlIEN1c3RvbSBEYXRhIEFjdGlvbnNcbiAqIFxuICogUmV0dXJucyBjdXN0b20gZGF0YSBhY3Rpb25zIGZvciB0aGUgd2lkZ2V0LlxuICogSW5jbHVkZXMgY3VzdG9tIFwiWm9vbSBUb1wiIGFuZCBcIkFkZCB0byBNYXBcIiBhY3Rpb25zIHRoYXQgdXNlIFF1ZXJ5U2ltcGxlJ3MgcHJvY2Vzc2VzLlxuICogXG4gKiBAcGFyYW0gd2lkZ2V0SWQgLSBUaGUgd2lkZ2V0IElEXG4gKiBAcGFyYW0gb3V0cHV0RFMgLSBUaGUgb3V0cHV0IGRhdGEgc291cmNlIChudWxsL3VuZGVmaW5lZCBpZiBub3QgYXZhaWxhYmxlKVxuICogQHBhcmFtIG1hcFZpZXcgLSBUaGUgbWFwIHZpZXcgKG51bGwvdW5kZWZpbmVkIGlmIG5vdCBhdmFpbGFibGUpXG4gKiBAcGFyYW0gaW50bCAtIFRoZSBJbnRsIG9iamVjdCBmb3IgaW50ZXJuYXRpb25hbGl6YXRpb25cbiAqIEBwYXJhbSBxdWVyeUl0ZW0gLSBPcHRpb25hbCBxdWVyeSBpdGVtIGNvbmZpZ3VyYXRpb25cbiAqIEBwYXJhbSBydW50aW1lWm9vbVRvU2VsZWN0ZWQgLSBPcHRpb25hbCBydW50aW1lIHpvb20gb3ZlcnJpZGUgZnJvbSB0aGUgcXVlcnkgZm9ybVxuICogQHJldHVybnMgQXJyYXkgb2YgY3VzdG9tIERhdGFBY3Rpb24gb2JqZWN0cyAoZW1wdHkgaWYgY29uZGl0aW9ucyBub3QgbWV0KVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RXh0cmFBY3Rpb25zKFxuICB3aWRnZXRJZDogc3RyaW5nLFxuICBvdXRwdXREUzogRGF0YVNvdXJjZSB8IG51bGwgfCB1bmRlZmluZWQsXG4gIG1hcFZpZXc6IF9fZXNyaS5NYXBWaWV3IHwgX19lc3JpLlNjZW5lVmlldyB8IHVuZGVmaW5lZCxcbiAgaW50bDogSW50bFNoYXBlLFxuICBxdWVyeUl0ZW0/OiBRdWVyeUl0ZW1UeXBlLFxuICBydW50aW1lWm9vbVRvU2VsZWN0ZWQ/OiBib29sZWFuXG4pOiBEYXRhQWN0aW9uW10ge1xuICBjb25zdCBhY3Rpb25zOiBEYXRhQWN0aW9uW10gPSBbXVxuICBcbiAgLy8gQWRkIFwiWm9vbSBUb1wiIGFjdGlvbiBpZiB3ZSBoYXZlIG1hcFZpZXcgYW5kIGludGxcbiAgaWYgKG1hcFZpZXcgJiYgaW50bCkge1xuICAgIGFjdGlvbnMucHVzaChjcmVhdGVab29tVG9BY3Rpb24od2lkZ2V0SWQsIG1hcFZpZXcsIGludGwpKVxuICB9XG4gIFxuICAvLyBBZGQgXCJBZGQgdG8gTWFwXCIgYWN0aW9uIGlmIHdlIGhhdmUgb3V0cHV0RFMgYW5kIGludGxcbiAgaWYgKG91dHB1dERTICYmIGludGwpIHtcbiAgICBhY3Rpb25zLnB1c2goY3JlYXRlQWRkVG9NYXBBY3Rpb24od2lkZ2V0SWQsIG91dHB1dERTLCBpbnRsLCBxdWVyeUl0ZW0sIHJ1bnRpbWVab29tVG9TZWxlY3RlZCkpXG4gIH1cbiAgXG4gIHJldHVybiBhY3Rpb25zXG59XG5cbiIsIi8qKlxuICogQ3VzdG9tIFwiWm9vbSBUb1wiIGRhdGEgYWN0aW9uIGZvciBRdWVyeVNpbXBsZSB3aWRnZXQuXG4gKiBcbiAqIFRoaXMgYWN0aW9uIHJlcGxhY2VzIHRoZSBmcmFtZXdvcmsncyBcIlpvb20gVG9cIiBhY3Rpb24gd2l0aCBhIGN1c3RvbVxuICogaW1wbGVtZW50YXRpb24gdGhhdCB1c2VzIFF1ZXJ5U2ltcGxlJ3Mgem9vbSBsb2dpYyAobWFwVmlldy5nb1RvIHdpdGggcGFkZGluZykuXG4gKiBUaGlzIGVuc3VyZXMgY29uc2lzdGVudCB6b29tIGJlaGF2aW9yIHdpdGggcHJvcGVyIHBhZGRpbmcuXG4gKi9cblxuaW1wb3J0IHsgdHlwZSBEYXRhUmVjb3JkU2V0LCB0eXBlIERhdGFBY3Rpb24sIERhdGFMZXZlbCwgdHlwZSBJbnRsU2hhcGUgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyIH0gZnJvbSAnd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24nXG5pbXBvcnQgeyB6b29tVG9SZWNvcmRzIH0gZnJvbSAnLi4vcnVudGltZS96b29tLXV0aWxzJ1xuaW1wb3J0IHR5cGUgeyBGZWF0dXJlRGF0YVJlY29yZCB9IGZyb20gJ2ppbXUtY29yZSdcblxuY29uc3QgZGVidWdMb2dnZXIgPSBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyKClcblxuLyoqXG4gKiBDcmVhdGVzIGEgY3VzdG9tIFwiWm9vbSBUb1wiIGRhdGEgYWN0aW9uIHRoYXQgdXNlcyBRdWVyeVNpbXBsZSdzIHpvb20gbG9naWMuXG4gKiBcbiAqIFRoaXMgYWN0aW9uIHJlcGxhY2VzIHRoZSBmcmFtZXdvcmsncyBcIlpvb20gVG9cIiBhY3Rpb24gYW5kIGVuc3VyZXMgY29uc2lzdGVudFxuICogem9vbSBiZWhhdmlvciB3aXRoIHBhZGRpbmcgdXNpbmcgbWFwVmlldy5nb1RvKCkuXG4gKiBcbiAqIEBwYXJhbSB3aWRnZXRJZCAtIFRoZSB3aWRnZXQgSUQgdGhhdCBwcm92aWRlcyB0aGlzIGFjdGlvblxuICogQHBhcmFtIG1hcFZpZXcgLSBUaGUgbWFwIHZpZXcgdG8gem9vbSAoTWFwVmlldyBvciBTY2VuZVZpZXcpXG4gKiBAcGFyYW0gaW50bCAtIFRoZSBJbnRsIG9iamVjdCBmb3IgaW50ZXJuYXRpb25hbGl6YXRpb25cbiAqIEByZXR1cm5zIEEgRGF0YUFjdGlvbiBvYmplY3QgdGhhdCBjYW4gYmUgdXNlZCBieSBEYXRhQWN0aW9uTGlzdFxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlWm9vbVRvQWN0aW9uKFxuICB3aWRnZXRJZDogc3RyaW5nLFxuICBtYXBWaWV3OiBfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXcgfCB1bmRlZmluZWQsXG4gIGludGw6IEludGxTaGFwZVxuKTogRGF0YUFjdGlvbiB7XG4gIHJldHVybiB7XG4gICAgaWQ6IGAke3dpZGdldElkfS16b29tVG9gLFxuICAgIG5hbWU6ICdxdWVyeVNpbXBsZVpvb21UbycsIC8vIFVzZSB1bmlxdWUgbmFtZSB0byBhdm9pZCBjb25mbGljdCB3aXRoIGZyYW1ld29yayBhY3Rpb25cbiAgICBsYWJlbDogaW50bC5mb3JtYXRNZXNzYWdlKHsgaWQ6ICd6b29tVG9TZWxlY3RlZCcsIGRlZmF1bHRNZXNzYWdlOiAnWm9vbSB0byBzZWxlY3RlZCcgfSksXG4gICAgLy8gVXNlIHRoZSBzYW1lIGljb24gYXMgdGhlIGZyYW1ld29yaydzIHpvb20gYWN0aW9uIChmcm9tIEV4QiBjb25maWd1cmF0aW9uIHBhZ2UpXG4gICAgaWNvbjogcmVxdWlyZSgnLi4vcnVudGltZS9hc3NldHMvaWNvbnMvem9vbS10by5zdmcnKS5kZWZhdWx0IHx8IHJlcXVpcmUoJy4uL3J1bnRpbWUvYXNzZXRzL2ljb25zL3pvb20tdG8uc3ZnJyksXG4gICAgaW5kZXg6IC05MCwgLy8gUG9zaXRpb24gYmVmb3JlIEFkZCB0byBNYXAgKC0xMDApXG4gICAgd2lkZ2V0SWQsXG4gICAgaW50bCxcbiAgICBzdXBwb3J0UHJvdmlkZXJXaWRnZXQ6IHRydWUsXG4gICAgXG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lcyBpZiB0aGlzIGFjdGlvbiBjYW4gcHJvY2VzcyB0aGUgZ2l2ZW4gZGF0YSBzZXRzLlxuICAgICAqIFN1cHBvcnRzIFJlY29yZHMgbGV2ZWwgYWN0aW9ucyB3aXRoIGZlYXR1cmUgZGF0YSByZWNvcmRzLlxuICAgICAqL1xuICAgIGlzU3VwcG9ydGVkOiBhc3luYyAoZGF0YVNldHM6IERhdGFSZWNvcmRTZXRbXSwgZGF0YUxldmVsOiBEYXRhTGV2ZWwsIGFjdGlvbldpZGdldElkOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+ID0+IHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnREFUQS1BQ1RJT04nLCB7XG4gICAgICAgIGFjdGlvbjogJ3pvb21Uby1pc1N1cHBvcnRlZCcsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICBhY3Rpb25XaWRnZXRJZCxcbiAgICAgICAgZGF0YUxldmVsLFxuICAgICAgICBkYXRhU2V0c0NvdW50OiBkYXRhU2V0cz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgIGhhc01hcFZpZXc6ICEhbWFwVmlld1xuICAgICAgfSlcbiAgICAgIFxuICAgICAgLy8gT25seSBzdXBwb3J0IFJlY29yZHMgbGV2ZWwgYWN0aW9uc1xuICAgICAgaWYgKGRhdGFMZXZlbCAhPT0gRGF0YUxldmVsLlJlY29yZHMpIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdEQVRBLUFDVElPTicsIHtcbiAgICAgICAgICBhY3Rpb246ICd6b29tVG8taXNTdXBwb3J0ZWQnLFxuICAgICAgICAgIHJlc3VsdDogZmFsc2UsXG4gICAgICAgICAgcmVhc29uOiAnTm90IFJlY29yZHMgbGV2ZWwnXG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBOZWVkIGF0IGxlYXN0IG9uZSBkYXRhIHNldCB3aXRoIHJlY29yZHMgYW5kIGEgbWFwIHZpZXdcbiAgICAgIGlmICghZGF0YVNldHMgfHwgZGF0YVNldHMubGVuZ3RoID09PSAwIHx8ICFtYXBWaWV3KSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnREFUQS1BQ1RJT04nLCB7XG4gICAgICAgICAgYWN0aW9uOiAnem9vbVRvLWlzU3VwcG9ydGVkJyxcbiAgICAgICAgICByZXN1bHQ6IGZhbHNlLFxuICAgICAgICAgIHJlYXNvbjogIWRhdGFTZXRzIHx8IGRhdGFTZXRzLmxlbmd0aCA9PT0gMCA/ICdObyBkYXRhIHNldHMnIDogJ05vIG1hcFZpZXcnXG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBDaGVjayBpZiB3ZSBoYXZlIHJlY29yZHNcbiAgICAgIGNvbnN0IGhhc1JlY29yZHMgPSBkYXRhU2V0cy5zb21lKGRzID0+IGRzLnJlY29yZHMgJiYgZHMucmVjb3Jkcy5sZW5ndGggPiAwKVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0RBVEEtQUNUSU9OJywge1xuICAgICAgICBhY3Rpb246ICd6b29tVG8taXNTdXBwb3J0ZWQnLFxuICAgICAgICByZXN1bHQ6IGhhc1JlY29yZHMsXG4gICAgICAgIHJlY29yZHNDb3VudDogZGF0YVNldHMucmVkdWNlKChzdW0sIGRzKSA9PiBzdW0gKyAoZHMucmVjb3Jkcz8ubGVuZ3RoIHx8IDApLCAwKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgcmV0dXJuIGhhc1JlY29yZHNcbiAgICB9LFxuICAgIFxuICAgIC8qKlxuICAgICAqIEV4ZWN1dGVzIHRoZSBhY3Rpb24gYnkgem9vbWluZyB0byByZWNvcmRzIHVzaW5nIHRoZSBzaGFyZWQgem9vbSB1dGlsaXR5LlxuICAgICAqL1xuICAgIG9uRXhlY3V0ZTogYXN5bmMgKGRhdGFTZXRzOiBEYXRhUmVjb3JkU2V0W10sIGRhdGFMZXZlbDogRGF0YUxldmVsLCBhY3Rpb25XaWRnZXRJZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiA9PiB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0RBVEEtQUNUSU9OJywge1xuICAgICAgICBhY3Rpb246ICd6b29tVG8tb25FeGVjdXRlJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIGFjdGlvbldpZGdldElkLFxuICAgICAgICBkYXRhTGV2ZWwsXG4gICAgICAgIGRhdGFTZXRzQ291bnQ6IGRhdGFTZXRzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgaGFzTWFwVmlldzogISFtYXBWaWV3XG4gICAgICB9KVxuICAgICAgXG4gICAgICBpZiAoIW1hcFZpZXcgfHwgZGF0YUxldmVsICE9PSBEYXRhTGV2ZWwuUmVjb3Jkcykge1xuICAgICAgICAvLyBCVUctR1JBUEhJQ1MtMDAxOiBab29tIG9wZXJhdGlvbnMgZmFpbCB3aGVuIGdyYXBoaWNzIGxheWVyIGlzIGRpc2FibGVkXG4gICAgICAgIGlmICghbWFwVmlldykge1xuICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnQlVHJywge1xuICAgICAgICAgICAgYnVnSWQ6ICdCVUctR1JBUEhJQ1MtMDAxJyxcbiAgICAgICAgICAgIGNhdGVnb3J5OiAnR1JBUEhJQ1MnLFxuICAgICAgICAgICAgZXZlbnQ6ICd6b29tLW9wZXJhdGlvbi1mYWlsZWQtZ3JhcGhpY3MtbGF5ZXItZGlzYWJsZWQnLFxuICAgICAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgICAgICBvcGVyYXRpb246ICd6b29tLXRvLXNlbGVjdGVkLWFjdGlvbicsXG4gICAgICAgICAgICBkYXRhU2V0c0NvdW50OiBkYXRhU2V0cz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogJ1pvb20gdG8gc2VsZWN0ZWQgYWN0aW9uIGF0dGVtcHRlZCBidXQgbWFwVmlldyBpcyB1bmF2YWlsYWJsZSAobGlrZWx5IGJlY2F1c2UgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCBpcyBkaXNhYmxlZCknLFxuICAgICAgICAgICAgd29ya2Fyb3VuZDogJ0VuYWJsZSB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0IGluIHdpZGdldCBzZXR0aW5ncycsXG4gICAgICAgICAgICB0YXJnZXRSZXNvbHV0aW9uOiAncjAxOS4wJ1xuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnREFUQS1BQ1RJT04nLCB7XG4gICAgICAgICAgYWN0aW9uOiAnem9vbVRvLW9uRXhlY3V0ZScsXG4gICAgICAgICAgcmVzdWx0OiBmYWxzZSxcbiAgICAgICAgICByZWFzb246ICFtYXBWaWV3ID8gJ05vIG1hcFZpZXcnIDogJ05vdCBSZWNvcmRzIGxldmVsJ1xuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQ29sbGVjdCBhbGwgcmVjb3JkcyBmcm9tIGFsbCBkYXRhIHNldHNcbiAgICAgIGNvbnN0IGFsbFJlY29yZHM6IEZlYXR1cmVEYXRhUmVjb3JkW10gPSBbXVxuICAgICAgZGF0YVNldHMuZm9yRWFjaChkYXRhU2V0ID0+IHtcbiAgICAgICAgaWYgKGRhdGFTZXQucmVjb3JkcyAmJiBkYXRhU2V0LnJlY29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIC8vIEZpbHRlciB0byBvbmx5IEZlYXR1cmVEYXRhUmVjb3JkIHR5cGVzXG4gICAgICAgICAgY29uc3QgZmVhdHVyZVJlY29yZHMgPSBkYXRhU2V0LnJlY29yZHMuZmlsdGVyKFxuICAgICAgICAgICAgKHJlY29yZCk6IHJlY29yZCBpcyBGZWF0dXJlRGF0YVJlY29yZCA9PiB7XG4gICAgICAgICAgICAgIHJldHVybiByZWNvcmQgJiYgdHlwZW9mIChyZWNvcmQgYXMgRmVhdHVyZURhdGFSZWNvcmQpLmdldEdlb21ldHJ5ID09PSAnZnVuY3Rpb24nXG4gICAgICAgICAgICB9XG4gICAgICAgICAgKVxuICAgICAgICAgIGFsbFJlY29yZHMucHVzaCguLi5mZWF0dXJlUmVjb3JkcylcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgaWYgKGFsbFJlY29yZHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnREFUQS1BQ1RJT04nLCB7XG4gICAgICAgICAgYWN0aW9uOiAnem9vbVRvLW9uRXhlY3V0ZScsXG4gICAgICAgICAgcmVzdWx0OiBmYWxzZSxcbiAgICAgICAgICByZWFzb246ICdObyBmZWF0dXJlIHJlY29yZHMgZm91bmQnXG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgICAgXG4gICAgICB0cnkge1xuICAgICAgICAvLyBVc2UgdGhlIHNoYXJlZCB6b29tIHV0aWxpdHkgZnVuY3Rpb25cbiAgICAgICAgYXdhaXQgem9vbVRvUmVjb3JkcyhtYXBWaWV3LCBhbGxSZWNvcmRzKVxuICAgICAgICBcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdEQVRBLUFDVElPTicsIHtcbiAgICAgICAgICBhY3Rpb246ICd6b29tVG8tb25FeGVjdXRlJyxcbiAgICAgICAgICByZXN1bHQ6IHRydWUsXG4gICAgICAgICAgbWVzc2FnZTogJ1N1Y2Nlc3NmdWxseSB6b29tZWQgdG8gZmVhdHVyZXMnLFxuICAgICAgICAgIHJlY29yZHNDb3VudDogYWxsUmVjb3Jkcy5sZW5ndGhcbiAgICAgICAgfSlcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0RBVEEtQUNUSU9OJywge1xuICAgICAgICAgIGFjdGlvbjogJ3pvb21Uby1vbkV4ZWN1dGUnLFxuICAgICAgICAgIHJlc3VsdDogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSxcbiAgICAgICAgICBlcnJvclN0YWNrOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWRcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgfSxcbiAgICBcbiAgICAvKipcbiAgICAgKiBDbGVhbnVwIG1ldGhvZCAocmVxdWlyZWQgYnkgRGF0YUFjdGlvbiBpbnRlcmZhY2UpXG4gICAgICovXG4gICAgZGVzdHJveTogKCk6IHZvaWQgPT4ge1xuICAgICAgLy8gTm8gY2xlYW51cCBuZWVkZWRcbiAgICB9XG4gIH1cbn1cblxuIiwiaW1wb3J0IHtcbiAgdHlwZSBRdWVyeUl0ZW1UeXBlLFxuICBDcmVhdGVUb29sVHlwZSxcbiAgVW5pdFR5cGUsXG4gIFNwYXRpYWxSZWxhdGlvbixcbiAgTGlzdERpcmVjdGlvbixcbiAgUGFnaW5nVHlwZSxcbiAgRmllbGRzVHlwZSxcbiAgU3ltYm9sVHlwZVxufSBmcm9tICcuL2NvbmZpZydcblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfUVVFUllfSVRFTTogUGFydGlhbDxRdWVyeUl0ZW1UeXBlPiA9IHtcbiAgaWNvbjogbnVsbCxcbiAgZGlzcGxheUxhYmVsOiB0cnVlLFxuICBzcWxFeHByT2JqOiBudWxsLFxuICB1c2VBdHRyaWJ1dGVGaWx0ZXI6IHRydWUsXG4gIHVzZVNwYXRpYWxGaWx0ZXI6IHRydWUsXG4gIHNwYXRpYWxNYXBXaWRnZXRJZHM6IFtdLFxuICBzcGF0aWFsRmlsdGVyVHlwZXM6IFtdLFxuICBzcGF0aWFsSW50ZXJhY3RpdmVDcmVhdGVUb29sVHlwZXM6IFtcbiAgICBDcmVhdGVUb29sVHlwZS5Qb2ludCxcbiAgICBDcmVhdGVUb29sVHlwZS5Qb2x5bGluZSxcbiAgICBDcmVhdGVUb29sVHlwZS5Qb2x5Z29uLFxuICAgIENyZWF0ZVRvb2xUeXBlLlJlY3RhbmdsZSxcbiAgICBDcmVhdGVUb29sVHlwZS5DaXJjbGVcbiAgXSxcbiAgc3BhdGlhbEludGVyYWN0aXZlRW5hYmxlQnVmZmVyOiBmYWxzZSxcbiAgc3BhdGlhbEludGVyYWN0aXZlQnVmZmVyRGlzdGFuY2U6IDAsXG4gIHNwYXRpYWxJbnRlcmFjdGl2ZUJ1ZmZlclVuaXQ6IFVuaXRUeXBlLk1ldGVycyxcbiAgc3BhdGlhbFJlbGF0aW9uczogW1NwYXRpYWxSZWxhdGlvbi5JbnRlcnNlY3RdLFxuICBzcGF0aWFsUmVsYXRpb25Vc2VEYXRhU291cmNlczogW10sXG4gIHNwYXRpYWxSZWxhdGlvbkVuYWJsZVNlbGVjdFRvb2w6IGZhbHNlLFxuICBzcGF0aWFsUmVsYXRpb25FbmFibGVCdWZmZXI6IGZhbHNlLFxuICBzcGF0aWFsUmVsYXRpb25CdWZmZXJEaXN0YW5jZTogMCxcbiAgc3BhdGlhbFJlbGF0aW9uQnVmZmVyVW5pdDogVW5pdFR5cGUuTWV0ZXJzLFxuICByZXN1bHRMaXN0RGlyZWN0aW9uOiBMaXN0RGlyZWN0aW9uLlZlcnRpY2FsLFxuICByZXN1bHRQYWdpbmdTdHlsZTogUGFnaW5nVHlwZS5NdWx0aVBhZ2UsXG4gIHJlc3VsdEZpZWxkc1R5cGU6IEZpZWxkc1R5cGUuUG9wdXBTZXR0aW5nLFxuICByZXN1bHRTeW1ib2xUeXBlOiBTeW1ib2xUeXBlLkRlZmF1bHRTeW1ib2wsXG4gIHJlc3VsdEN1c3RvbVN5bWJvbDoge1xuICAgIGFuZ2xlOiAwLFxuICAgIGNvbG9yOiBbMjU1LCAyNTUsIDI1NSwgMjU1XSxcbiAgICBvdXRsaW5lOiB7XG4gICAgICBjb2xvcjogWzI1NSwgMjU1LCAyNTUsIDI1NV0sXG4gICAgICBzdHlsZTogJ2VzcmlTTFNTb2xpZCcsXG4gICAgICB0eXBlOiAnZXNyaVNMUycsXG4gICAgICB3aWR0aDogMVxuICAgIH0sXG4gICAgc2l6ZTogNixcbiAgICBzdHlsZTogJ2VzcmlTTVNDaXJjbGUnLFxuICAgIHR5cGU6ICdlc3JpU01TJyxcbiAgICB4b2Zmc2V0OiAwLFxuICAgIHlvZmZzZXQ6IDBcbiAgfSxcbiAgcmVzdWx0QWxsb3dDaGFuZ2VTeW1ib2w6IGZhbHNlLFxuICBhbGxvd0V4cG9ydDogZmFsc2UsXG4gIHNvcnRPcHRpb25zOiBbXSxcbiAgem9vbVRvU2VsZWN0ZWQ6IHRydWUsXG4gIGl0ZW1TaXplTWFwOiB7XG4gICAgYXJyYW5nZW1lbnRIb3Jpem9udGFsUG9wcGVyOiB7XG4gICAgICBtaW5TaXplOiB7IHdpZHRoOiAzMDAsIGhlaWdodDogMzAwIH0sXG4gICAgICBkZWZhdWx0U2l6ZTogeyB3aWR0aDogMzYwLCBoZWlnaHQ6IDQ4MCB9XG4gICAgfVxuICB9XG59XG5cblxuIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGQ9XFxcIk0xIDF2MTRoMTRWMXptOS4wODIgMTNjLS4wMDUtLjAzNy0uMTEzLS4yNzQtLjEyMi0uMzA5YTEuNSAxLjUgMCAwIDAgLjcxOC0xLjI2NyAxLjIgMS4yIDAgMCAwLS4wNTMtLjM1OGMuMTUyLS4xNzYuMjYzLS4zODMuMzI2LS42MDdxLjA0Ni4wMDMuMDkzLjAwM2MuMy4wMDIuNTkzLS4wOTEuODM2LS4yNjZxLjA2LjA2Ni4xMjYuMTI0Yy40Mi40MTIuOTc3LjY1NCAxLjU2NC42OEgxNHYyaC0zLjkxOE0xNCAxMWgtLjQzYTEuNDYgMS40NiAwIDAgMS0uOTA2LS40MzNjLS4yNjQtLjIzLS4yNTgtLjc4Mi0uNjE3LS43ODItLjQ4MiAwLS41Mi42NzctMS4wMDMuNjc3LS4yMTkgMC0uMzgtLjE3Ny0uNTk5LS4xNzctLjE5MyAwLS40NDUuMTAyLS40NDUuMjkzdi41MDJjMCAuNDI0LS41MDYuNTA4LS41MDYuOTM0IDAgLjE3MS4xODQuMjM2LjE4NC40MSAwIC41OC0uODkzLjUwMi0uODkzIDEuMDggMCAuMTkxLjIxNS4zMDUuMjE1LjQ4NlYxNEg2LjM3NXEuMDg3LS4yNDMuMDktLjUwMmMwLS41NDctMS4wNDMtLjM5My0xLjIwNy0uNzItLjQwNy0uODEzLjY5My0xLjAyMi42OTMtMS42NzMgMC0uMTYtLjA4Mi0uNDg4LS4zMzQtLjUxMy0uMzUxLS4wMzUtLjQ0My4xNTQtLjc5Ny4xNTRhLjQwNi40MDYgMCAwIDEtLjQzNy0uMzZjMC0uMzg2LjMwOC0uNTY2LjMwOC0uOTUyIDAtLjI1LS4xMDItLjM5My0uMTAyLS42NDNhLjYyLjYyIDAgMCAxIC41OS0uNjQzYy4zMjMgMCAuNDY0LjI2NC42MTguNTRhLjY0LjY0IDAgMCAwIC42MTcuMzA4Yy40OSAwIC43OTgtLjYxLjc5OC0uOTc3YS40Ny40NyAwIDAgMSAuNDM3LS40ODhjLjM0NyAwIC40NzYuMzYuODI0LjM2LjU3IDAgLjU1LS43NTYgMS4wNTMtMS4wMy42MTgtLjMzMi40MzgtMS4wNTIuMzYtMS40NC0uMDMyLS4xNjkuMjktLjUuNDY0LS40ODcuNzIuMDUuNDEyLS41NC40MTItLjgyM3EwLS4wNzMuMDIyLS4xNDJjLjExMS0uMzMyLjU5NS0uNDM4LjU5NS0uODM2IDAtLjI4MS0uMjMzLS40MS0uMjMzLS42OTNhLjY1LjY1IDAgMCAxIC4yMi0uNDRIMTR6TTIgMTRWMmg4LjI3OGMtLjAxMy4wNzctLjEzMi4zNTYtLjEzMi40NCAwIC4xOTQuMDM4LjM4Ny4xMTIuNTY3YTEuNiAxLjYgMCAwIDAtLjQyMi42NDMgMS40IDEuNCAwIDAgMC0uMDc0LjQ0MiAxLjcgMS43IDAgMCAwLS41MzYuNDMgMS4zMiAxLjMyIDAgMCAwLS4zMiAxLjA5MXEuMDQ2LjIwNS4wNjYuNDE0YTIgMiAwIDAgMC0uNjQ5LjY3IDEuNDYgMS40NiAwIDAgMC0uNjc0LS4xNjYgMS40NSAxLjQ1IDAgMCAwLTEuMzgzIDEuMDg2IDEuNDQgMS40NCAwIDAgMC0xLjA4Ni0uNDY5IDEuNjIgMS42MiAwIDAgMC0xLjU5MSAxLjY0M2MwIC4yNTQuMTEzLjI5My4wODQuNTc0cy0uMjkuNTM1LS4yOSAxLjAyMmExLjM3IDEuMzcgMCAwIDAgLjk4NCAxLjI5IDEuNTggMS41OCAwIDAgMC0uMDAzIDEuNTQ5Yy4xNDMuMjg2LjYzNi43NzQuNTM0Ljc3NHpcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBmaWxsPVxcXCJjdXJyZW50Q29sb3JcXFwiIGZpbGwtcnVsZT1cXFwiZXZlbm9kZFxcXCIgZD1cXFwiTTAgMTAuNVYxMmExIDEgMCAwIDAgMSAxaDEuNXYtMUgxdi0xLjV6TTIuNSAxSDFhMSAxIDAgMCAwLTEgMXYxLjVoMVYyaDEuNXpNMCA4LjVoMXYtM0gwek00LjUgMXYxaDNWMXptNSAwdjFIMTF2MS41aDFWMmExIDEgMCAwIDAtMS0xek02LjMxOCAxMy42ODJhNC41IDQuNSAwIDAgMCA1Ljk5MS4zMzRsMS44NDggMS44NDguNzA3LS43MDctMS44NDctMS44NDhhNC41IDQuNSAwIDEgMC02LjY5OS4zNzNtLjcwNy0uNzA3YTMuNSAzLjUgMCAxIDEgNC45NS00Ljk1IDMuNSAzLjUgMCAwIDEtNC45NSA0Ljk1TTkgMTN2LTJIN3YtMWgyVjhoMXYyaDJ2MWgtMnYyelxcXCIgY2xpcC1ydWxlPVxcXCJldmVub2RkXFxcIj48L3BhdGg+PC9zdmc+XCIiLCIvKiogQGpzeCBqc3ggKi9cclxuaW1wb3J0IHtcclxuICBSZWFjdCxcclxuICBqc3gsXHJcbiAgaG9va3NcclxufSBmcm9tICdqaW11LWNvcmUnXHJcbmltcG9ydCB7IFNlbGVjdCwgTnVtZXJpY0lucHV0LCBkZWZhdWx0TWVzc2FnZXMgYXMgamltdVVJTWVzc2FnZXMgfSBmcm9tICdqaW11LXVpJ1xyXG5pbXBvcnQgeyBVbml0VHlwZSB9IGZyb20gJy4uL2NvbmZpZydcclxuaW1wb3J0IGRlZmF1bHRNZXNzYWdlIGZyb20gJy4vdHJhbnNsYXRpb25zL2RlZmF1bHQnXHJcbmltcG9ydCB7IFF1ZXJ5VGFza0NvbnRleHQgfSBmcm9tICcuL3F1ZXJ5LXRhc2stY29udGV4dCdcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUHJvcHMge1xyXG4gIGRpc3RhbmNlOiBudW1iZXJcclxuICB1bml0OiBVbml0VHlwZVxyXG4gIG9uQnVmZmVyQ2hhbmdlOiAoZGlzdGFuY2U6IG51bWJlciwgdW5pdDogVW5pdFR5cGUpID0+IHZvaWRcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIEJ1ZmZlcklucHV0IChwcm9wczogUHJvcHMpIHtcclxuICBjb25zdCB7IGRpc3RhbmNlID0gMCwgdW5pdCA9IFVuaXRUeXBlLk1ldGVycywgb25CdWZmZXJDaGFuZ2UgfSA9IHByb3BzXHJcbiAgY29uc3QgZ2V0STE4bk1lc3NhZ2UgPSBob29rcy51c2VUcmFuc2xhdGlvbihqaW11VUlNZXNzYWdlcywgZGVmYXVsdE1lc3NhZ2UpXHJcbiAgY29uc3QgW2QsIHNldERdID0gUmVhY3QudXNlU3RhdGUoZGlzdGFuY2UpXHJcbiAgY29uc3QgW3UsIHNldFVdID0gUmVhY3QudXNlU3RhdGUodW5pdClcclxuICBjb25zdCBxdWVyeVRhc2tDb250ZXh0ID0gUmVhY3QudXNlQ29udGV4dChRdWVyeVRhc2tDb250ZXh0KVxyXG4gIGNvbnN0IHJlc2V0U3ltYm9sUmVmID0gUmVhY3QudXNlUmVmKHF1ZXJ5VGFza0NvbnRleHQucmVzZXRTeW1ib2wpXHJcblxyXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBsZXQgY2hhbmdlZCA9IGZhbHNlXHJcbiAgICBpZiAoZGlzdGFuY2UgIT09IGQpIHtcclxuICAgICAgc2V0RChkaXN0YW5jZSlcclxuICAgICAgY2hhbmdlZCA9IHRydWVcclxuICAgIH1cclxuICAgIGlmICh1bml0ICE9PSB1KSB7XHJcbiAgICAgIHNldFUodW5pdClcclxuICAgICAgY2hhbmdlZCA9IHRydWVcclxuICAgIH1cclxuICAgIGlmIChjaGFuZ2VkKSB7XHJcbiAgICAgIG9uQnVmZmVyQ2hhbmdlKGRpc3RhbmNlLCB1bml0KVxyXG4gICAgfVxyXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHNcclxuICB9LCBbZGlzdGFuY2UsIHVuaXRdKVxyXG5cclxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgaWYgKHF1ZXJ5VGFza0NvbnRleHQucmVzZXRTeW1ib2wgJiYgcXVlcnlUYXNrQ29udGV4dC5yZXNldFN5bWJvbCAhPT0gcmVzZXRTeW1ib2xSZWYuY3VycmVudCkge1xyXG4gICAgICByZXNldFN5bWJvbFJlZi5jdXJyZW50ID0gcXVlcnlUYXNrQ29udGV4dC5yZXNldFN5bWJvbFxyXG4gICAgICBzZXREKGRpc3RhbmNlKVxyXG4gICAgICBzZXRVKHVuaXQpXHJcbiAgICAgIG9uQnVmZmVyQ2hhbmdlKGRpc3RhbmNlLCB1bml0KVxyXG4gICAgfVxyXG4gIH0sIFtxdWVyeVRhc2tDb250ZXh0LnJlc2V0U3ltYm9sLCBkaXN0YW5jZSwgdW5pdCwgb25CdWZmZXJDaGFuZ2VdKVxyXG5cclxuICBjb25zdCBoYW5kbGVEaXN0YW5jZUNoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKCh2YWx1ZSkgPT4ge1xyXG4gICAgc2V0RCh2YWx1ZSlcclxuICB9LCBbXSlcclxuXHJcbiAgY29uc3QgaGFuZGxlRGlzdGFuY2VBY2NlcHRlZCA9IFJlYWN0LnVzZUNhbGxiYWNrKCh2YWx1ZSkgPT4ge1xyXG4gICAgc2V0RCh2YWx1ZSlcclxuICAgIG9uQnVmZmVyQ2hhbmdlKHZhbHVlLCB1KVxyXG4gIH0sIFtvbkJ1ZmZlckNoYW5nZSwgdV0pXHJcblxyXG4gIGNvbnN0IGhhbmRsZUJ1ZmZlclVuaXRDaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjaygoZSkgPT4ge1xyXG4gICAgc2V0VShlLnRhcmdldC52YWx1ZSlcclxuICAgIG9uQnVmZmVyQ2hhbmdlKGQsIGUudGFyZ2V0LnZhbHVlKVxyXG4gIH0sIFtvbkJ1ZmZlckNoYW5nZSwgZF0pXHJcblxyXG4gIHJldHVybiAoXHJcbiAgICA8UmVhY3QuRnJhZ21lbnQ+XHJcbiAgICAgIDxOdW1lcmljSW5wdXRcclxuICAgICAgICBhcmlhLWxhYmVsPXtnZXRJMThuTWVzc2FnZSgndGhlQnVmZmVyRGlzdGFuY2UnKX1cclxuICAgICAgICBjbGFzc05hbWU9J21yLTEnXHJcbiAgICAgICAgdmFsdWU9e2R9XHJcbiAgICAgICAgb25DaGFuZ2U9e2hhbmRsZURpc3RhbmNlQ2hhbmdlfVxyXG4gICAgICAgIG9uQWNjZXB0VmFsdWU9e2hhbmRsZURpc3RhbmNlQWNjZXB0ZWR9XHJcbiAgICAgIC8+XHJcbiAgICAgIDxTZWxlY3RcclxuICAgICAgICBhcmlhLWxhYmVsPXtnZXRJMThuTWVzc2FnZSgndW5pdCcpfVxyXG4gICAgICAgIHZhbHVlPXt1fVxyXG4gICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVCdWZmZXJVbml0Q2hhbmdlfVxyXG4gICAgICA+XHJcbiAgICAgICAge09iamVjdC52YWx1ZXMoVW5pdFR5cGUpLm1hcCgodmFsdWUpID0+IChcclxuICAgICAgICAgIDxvcHRpb24ga2V5PXt2YWx1ZX0gdmFsdWU9e3ZhbHVlfT5cclxuICAgICAgICAgICAge2dldEkxOG5NZXNzYWdlKGB1bml0XyR7dmFsdWV9YCl9XHJcbiAgICAgICAgICA8L29wdGlvbj5cclxuICAgICAgICApKX1cclxuICAgICAgPC9TZWxlY3Q+XHJcbiAgICA8L1JlYWN0LkZyYWdtZW50PlxyXG4gIClcclxufVxyXG4iLCIvKiogQGpzeCBqc3ggKi9cbi8vIFRoaXMgZmlsZSBpcyBkdXBsaWNhdGVkIGZyb20gJy4uLy4uLy4uLy4uL2ZlYXR1cmUtaW5mby9zcmMvcnVudGltZS9jb21wb25lbnRzL2ZlYXR1cmUtaW5mbydcbmltcG9ydCB7IFJlYWN0LCBjc3MsIGpzeCwgdHlwZSBEYXRhU291cmNlLCBpbmplY3RJbnRsLCB0eXBlIEludGxTaGFwZSwgY2xhc3NOYW1lcyB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IGxvYWRBcmNHSVNKU0FQSU1vZHVsZXMgfSBmcm9tICdqaW11LWFyY2dpcydcbmltcG9ydCB7IEJ1dHRvbiB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQgeyBSaWdodEZpbGxlZCB9IGZyb20gJ2ppbXUtaWNvbnMvZmlsbGVkL2RpcmVjdGlvbmFsL3JpZ2h0J1xuaW1wb3J0IHsgRG93bkZpbGxlZCB9IGZyb20gJ2ppbXUtaWNvbnMvZmlsbGVkL2RpcmVjdGlvbmFsL2Rvd24nXG5pbXBvcnQgeyBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyIH0gZnJvbSAnd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24nXG5cbmNvbnN0IGRlYnVnTG9nZ2VyID0gY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlcigpXG5cbmV4cG9ydCBlbnVtIExvYWRTdGF0dXMge1xuICBQZW5kaW5nID0gJ1BlbmRpbmcnLFxuICBGdWxmaWxsZWQgPSAnRnVsZmlsbGVkJyxcbiAgUmVqZWN0ZWQgPSAnUmVqZWN0ZWQnXG59XG5cbmludGVyZmFjZSBQcm9wcyB7XG4gIGRhdGFTb3VyY2U6IERhdGFTb3VyY2VcbiAgZ3JhcGhpYzogX19lc3JpLkdyYXBoaWNcbiAgcG9wdXBUZW1wbGF0ZTogX19lc3JpLlBvcHVwVGVtcGxhdGVcbiAgZGVmYXVsdFBvcHVwVGVtcGxhdGU6IF9fZXNyaS5Qb3B1cFRlbXBsYXRlXG4gIHRvZ2dsYWJsZT86IGJvb2xlYW5cbiAgZXhwYW5kQnlEZWZhdWx0PzogYm9vbGVhblxufVxuXG5pbnRlcmZhY2UgU3RhdGUge1xuICBsb2FkU3RhdHVzOiBMb2FkU3RhdHVzXG4gIHNob3dDb250ZW50OiBib29sZWFuXG59XG5cbmNvbnN0IHN0eWxlID0gY3NzYFxuICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1zeXMtY29sb3ItZGl2aWRlci1zZWNvbmRhcnkpO1xuICAuZXNyaS13aWRnZXRfX2hlYWRpbmcge1xuICAgIGZvbnQtc2l6ZTogMC44NzVyZW0gIWltcG9ydGFudDtcbiAgICBmb250LXdlaWdodDogNTAwICFpbXBvcnRhbnQ7XG4gICAgbWFyZ2luOiAwO1xuICAgIGNvbG9yOiB2YXIoLS1zeXMtY29sb3Itc3VyZmFjZS1wYXBlci10ZXh0KTtcbiAgfVxuXG4gIC5lc3JpLWZlYXR1cmVfX2NvbnRlbnQtZWxlbWVudCB7XG4gICAgcGFkZGluZzogMDtcbiAgfVxuXG4gIC5qaW11LWJ0bi5leHBhbmRlZCB7XG4gICAgYWxpZ24tc2VsZjogZmxleC1zdGFydDtcbiAgfVxuICBcbiAgLy8gTGFyZ2VyIGV4cGFuZC9jb2xsYXBzZSBidXR0b24gZm9yIGJldHRlciB0b3VjaCB0YXJnZXRzXG4gIC5qaW11LWJ0blthcmlhLWxhYmVsKj1cImV4cGFuZFwiXSxcbiAgLmppbXUtYnRuW2FyaWEtbGFiZWwqPVwiY29sbGFwc2VcIl0ge1xuICAgIG1pbi13aWR0aDogMzJweDtcbiAgICBtaW4taGVpZ2h0OiAzMnB4O1xuICAgIHBhZGRpbmc6IDZweDtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIH1cblxuICAuZXNyaS1mZWF0dXJlLmVzcmktd2lkZ2V0IHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDtcbiAgfVxuYFxuXG5pbnRlcmZhY2UgRXh0cmFQcm9wcyB7XG4gIGludGw6IEludGxTaGFwZVxufVxuXG5jbGFzcyBGZWF0dXJlSW5mbyBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQ8UHJvcHMgJiBFeHRyYVByb3BzLCBTdGF0ZT4ge1xuICBwcml2YXRlIEZlYXR1cmU6IHR5cGVvZiBfX2VzcmkuRmVhdHVyZVxuICBwcml2YXRlIGZlYXR1cmU6IF9fZXNyaS5GZWF0dXJlXG4gIHByaXZhdGUgcmVhZG9ubHkgZmVhdHVyZUNvbnRhaW5lcjogUmVhY3QuUmVmT2JqZWN0PEhUTUxJbnB1dEVsZW1lbnQgfCBudWxsPlxuXG4gIGNvbnN0cnVjdG9yIChwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKVxuICAgIGNvbnN0IHsgdG9nZ2xhYmxlID0gZmFsc2UsIGV4cGFuZEJ5RGVmYXVsdCB9ID0gdGhpcy5wcm9wc1xuICAgIGNvbnN0IHJlY29yZElkID0gdGhpcy5wcm9wcy5ncmFwaGljPy5hdHRyaWJ1dGVzPy5PQkpFQ1RJRCB8fCB0aGlzLnByb3BzLmdyYXBoaWM/LmF0dHJpYnV0ZXM/Lm9iamVjdGlkIHx8ICd1bmtub3duJ1xuICAgIGNvbnN0IGluaXRpYWxTaG93Q29udGVudCA9ICF0b2dnbGFibGUgfHwgZXhwYW5kQnlEZWZhdWx0XG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdFWFBBTkQtQ09MTEFQU0UnLCB7XG4gICAgICBldmVudDogJ0ZlYXR1cmVJbmZvLWNvbnN0cnVjdG9yJyxcbiAgICAgIHJlY29yZElkLFxuICAgICAgdG9nZ2xhYmxlLFxuICAgICAgZXhwYW5kQnlEZWZhdWx0LFxuICAgICAgaW5pdGlhbFNob3dDb250ZW50LFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICB0aGlzLmZlYXR1cmVDb250YWluZXIgPSBSZWFjdC5jcmVhdGVSZWYoKVxuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBzaG93Q29udGVudDogaW5pdGlhbFNob3dDb250ZW50LFxuICAgICAgbG9hZFN0YXR1czogTG9hZFN0YXR1cy5QZW5kaW5nXG4gICAgfVxuICB9XG5cbiAgY29tcG9uZW50RGlkTW91bnQgKCkge1xuICAgIHRoaXMuY3JlYXRlRmVhdHVyZSgpXG4gIH1cblxuICBjb21wb25lbnREaWRVcGRhdGUgKHByZXZQcm9wczogUHJvcHMpIHtcbiAgICBpZiAodGhpcy5mZWF0dXJlKSB7XG4gICAgICBpZiAocHJldlByb3BzLnBvcHVwVGVtcGxhdGUgIT09IHRoaXMucHJvcHMucG9wdXBUZW1wbGF0ZSB8fFxuICAgICAgICBwcmV2UHJvcHMuZGVmYXVsdFBvcHVwVGVtcGxhdGUgIT09IHRoaXMucHJvcHMuZGVmYXVsdFBvcHVwVGVtcGxhdGUgfHxcbiAgICAgICAgcHJldlByb3BzLmdyYXBoaWMgIT09IHRoaXMucHJvcHMuZ3JhcGhpYykge1xuICAgICAgICB0aGlzLmRlc3Ryb3lGZWF0dXJlKClcbiAgICAgICAgdGhpcy5jcmVhdGVGZWF0dXJlKClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZmVhdHVyZS52aXNpYmxlRWxlbWVudHMgPSB0aGlzLmdldFZpc2libGVFbGVtZW50cygpXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIFN5bmMgZXhwYW5kQnlEZWZhdWx0IHByb3AgY2hhbmdlcyAod2hlbiB1c2VyIGNsaWNrcyBFeHBhbmQgQWxsL0NvbGxhcHNlIEFsbClcbiAgICAvLyBUaGlzIGVuc3VyZXMgYWxsIGl0ZW1zIHJlc3BlY3QgdGhlIGdsb2JhbCBleHBhbmQvY29sbGFwc2Ugc3RhdGVcbiAgICBpZiAocHJldlByb3BzLmV4cGFuZEJ5RGVmYXVsdCAhPT0gdGhpcy5wcm9wcy5leHBhbmRCeURlZmF1bHQpIHtcbiAgICAgIGNvbnN0IHsgdG9nZ2xhYmxlID0gZmFsc2UsIGV4cGFuZEJ5RGVmYXVsdCB9ID0gdGhpcy5wcm9wc1xuICAgICAgY29uc3QgcmVjb3JkSWQgPSB0aGlzLnByb3BzLmdyYXBoaWM/LmF0dHJpYnV0ZXM/Lk9CSkVDVElEIHx8IHRoaXMucHJvcHMuZ3JhcGhpYz8uYXR0cmlidXRlcz8ub2JqZWN0aWQgfHwgJ3Vua25vd24nXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRVhQQU5ELUNPTExBUFNFJywge1xuICAgICAgICBldmVudDogJ2V4cGFuZEJ5RGVmYXVsdC1wcm9wLWNoYW5nZWQnLFxuICAgICAgICByZWNvcmRJZCxcbiAgICAgICAgcHJldkV4cGFuZEJ5RGVmYXVsdDogcHJldlByb3BzLmV4cGFuZEJ5RGVmYXVsdCxcbiAgICAgICAgbmV3RXhwYW5kQnlEZWZhdWx0OiBleHBhbmRCeURlZmF1bHQsXG4gICAgICAgIHRvZ2dsYWJsZSxcbiAgICAgICAgY3VycmVudFNob3dDb250ZW50OiB0aGlzLnN0YXRlLnNob3dDb250ZW50LFxuICAgICAgICB3aWxsVXBkYXRlU3RhdGU6IHRvZ2dsYWJsZSxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgXG4gICAgICBpZiAodG9nZ2xhYmxlKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBzaG93Q29udGVudDogZXhwYW5kQnlEZWZhdWx0IH0sICgpID0+IHtcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0VYUEFORC1DT0xMQVBTRScsIHtcbiAgICAgICAgICAgIGV2ZW50OiAnRmVhdHVyZUluZm8tc3RhdGUtdXBkYXRlZCcsXG4gICAgICAgICAgICByZWNvcmRJZCxcbiAgICAgICAgICAgIG5ld1Nob3dDb250ZW50OiB0aGlzLnN0YXRlLnNob3dDb250ZW50LFxuICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gTG9nIGFsbCBjb21wb25lbnREaWRVcGRhdGUgY2FsbHMgdG8gdHJhY2sgcmVtb3VudHNcbiAgICBjb25zdCByZWNvcmRJZCA9IHRoaXMucHJvcHMuZ3JhcGhpYz8uYXR0cmlidXRlcz8uT0JKRUNUSUQgfHwgdGhpcy5wcm9wcy5ncmFwaGljPy5hdHRyaWJ1dGVzPy5vYmplY3RpZCB8fCAndW5rbm93bidcbiAgICBpZiAocHJldlByb3BzLmdyYXBoaWMgIT09IHRoaXMucHJvcHMuZ3JhcGhpYyB8fCBcbiAgICAgICAgcHJldlByb3BzLnBvcHVwVGVtcGxhdGUgIT09IHRoaXMucHJvcHMucG9wdXBUZW1wbGF0ZSB8fFxuICAgICAgICBwcmV2UHJvcHMuZGVmYXVsdFBvcHVwVGVtcGxhdGUgIT09IHRoaXMucHJvcHMuZGVmYXVsdFBvcHVwVGVtcGxhdGUpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRVhQQU5ELUNPTExBUFNFJywge1xuICAgICAgICBldmVudDogJ0ZlYXR1cmVJbmZvLXByb3BzLWNoYW5nZWQtcmVjcmVhdGUnLFxuICAgICAgICByZWNvcmRJZCxcbiAgICAgICAgZ3JhcGhpY0NoYW5nZWQ6IHByZXZQcm9wcy5ncmFwaGljICE9PSB0aGlzLnByb3BzLmdyYXBoaWMsXG4gICAgICAgIHBvcHVwVGVtcGxhdGVDaGFuZ2VkOiBwcmV2UHJvcHMucG9wdXBUZW1wbGF0ZSAhPT0gdGhpcy5wcm9wcy5wb3B1cFRlbXBsYXRlLFxuICAgICAgICBkZWZhdWx0UG9wdXBUZW1wbGF0ZUNoYW5nZWQ6IHByZXZQcm9wcy5kZWZhdWx0UG9wdXBUZW1wbGF0ZSAhPT0gdGhpcy5wcm9wcy5kZWZhdWx0UG9wdXBUZW1wbGF0ZSxcbiAgICAgICAgZXhwYW5kQnlEZWZhdWx0OiB0aGlzLnByb3BzLmV4cGFuZEJ5RGVmYXVsdCxcbiAgICAgICAgY3VycmVudFNob3dDb250ZW50OiB0aGlzLnN0YXRlLnNob3dDb250ZW50LFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgZGVzdHJveUZlYXR1cmUgKCkge1xuICAgIHRoaXMuZmVhdHVyZSAmJiAhdGhpcy5mZWF0dXJlLmRlc3Ryb3llZCAmJiB0aGlzLmZlYXR1cmUuZGVzdHJveSgpXG4gIH1cblxuICBnZXRWaXNpYmxlRWxlbWVudHMgKCkge1xuICAgIGNvbnN0IHsgdG9nZ2xhYmxlID0gZmFsc2UgfSA9IHRoaXMucHJvcHNcbiAgICBjb25zdCB7IHNob3dDb250ZW50IH0gPSB0aGlzLnN0YXRlXG4gICAgY29uc3QgZXhwYW5kZWQgPSB0b2dnbGFibGUgPyBzaG93Q29udGVudCA6IHRydWVcbiAgICByZXR1cm4ge1xuICAgICAgdGl0bGU6IHRydWUsXG4gICAgICBjb250ZW50OiB7XG4gICAgICAgIGZpZWxkczogZXhwYW5kZWQsXG4gICAgICAgIHRleHQ6IGV4cGFuZGVkLFxuICAgICAgICBtZWRpYTogZXhwYW5kZWQsXG4gICAgICAgIGF0dGFjaG1lbnRzOiBleHBhbmRlZFxuICAgICAgfSxcbiAgICAgIGxhc3RFZGl0ZWRJbmZvOiBmYWxzZVxuICAgIH1cbiAgfVxuXG4gIGNyZWF0ZUZlYXR1cmUgKCkge1xuICAgIGxldCBmZWF0dXJlTW9kdWxlUHJvbWlzZVxuICAgIGlmICh0aGlzLkZlYXR1cmUpIHtcbiAgICAgIGZlYXR1cmVNb2R1bGVQcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKClcbiAgICB9IGVsc2Uge1xuICAgICAgZmVhdHVyZU1vZHVsZVByb21pc2UgPSBsb2FkQXJjR0lTSlNBUElNb2R1bGVzKFtcbiAgICAgICAgJ2Vzcmkvd2lkZ2V0cy9GZWF0dXJlJ1xuICAgICAgXSkudGhlbihtb2R1bGVzID0+IHtcbiAgICAgICAgW1xuICAgICAgICAgIHRoaXMuRmVhdHVyZVxuICAgICAgICBdID0gbW9kdWxlc1xuICAgICAgfSlcbiAgICB9XG4gICAgcmV0dXJuIGZlYXR1cmVNb2R1bGVQcm9taXNlLnRoZW4oKCkgPT4ge1xuICAgICAgLy8gQ2hlY2sgaWYgY29tcG9uZW50IGlzIHN0aWxsIG1vdW50ZWQgYmVmb3JlIHRyeWluZyB0byBhcHBlbmRcbiAgICAgIC8vIFRoaXMgcHJldmVudHMgZXJyb3JzIHdoZW4gY29tcG9uZW50IHVubW91bnRzIGR1cmluZyBhc3luYyBtb2R1bGUgbG9hZGluZ1xuICAgICAgaWYgKCF0aGlzLmZlYXR1cmVDb250YWluZXIuY3VycmVudCkge1xuICAgICAgICAvLyBDb21wb25lbnQgd2FzIHVubW91bnRlZCwgYWJvcnRcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50ICYmIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgICBjb250YWluZXIuY2xhc3NOYW1lID0gJ2ppbXUtd2lkZ2V0J1xuICAgICAgdGhpcy5mZWF0dXJlQ29udGFpbmVyLmN1cnJlbnQuYXBwZW5kQ2hpbGQoY29udGFpbmVyKVxuXG4gICAgICBjb25zdCBvcmlnaW5EUyA9IHRoaXMucHJvcHMuZGF0YVNvdXJjZS5nZXRPcmlnaW5EYXRhU291cmNlcygpXG4gICAgICBjb25zdCByb290RGF0YVNvdXJjZSA9IG9yaWdpbkRTPy5bMF0/LmdldFJvb3REYXRhU291cmNlKClcblxuICAgICAgdGhpcy5kZXN0cm95RmVhdHVyZSgpXG4gICAgICBjb25zdCBsYXllciA9IHRoaXMucHJvcHMuZ3JhcGhpYy5sYXllciBhcyBfX2VzcmkuRmVhdHVyZUxheWVyXG4gICAgICBpZiAodGhpcy5wcm9wcy5wb3B1cFRlbXBsYXRlKSB7XG4gICAgICAgIHRoaXMucHJvcHMuZ3JhcGhpYy5wb3B1cFRlbXBsYXRlID0gdGhpcy5wcm9wcy5wb3B1cFRlbXBsYXRlXG4gICAgICB9IGVsc2UgaWYgKGxheWVyKSB7XG4gICAgICAgIC8vIHNldCBwb3B1cFRlbXBsYXRlIHdpdGggbGF5ZXIncyBwb3B1cFRlbXBsYXRlIG9yIGRlZmF1bHRQb3B1cFRlbXBsYXRlXG4gICAgICAgIHRoaXMucHJvcHMuZ3JhcGhpYy5wb3B1cFRlbXBsYXRlID0gbGF5ZXIucG9wdXBUZW1wbGF0ZSA/PyB0aGlzLnByb3BzLmRlZmF1bHRQb3B1cFRlbXBsYXRlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnByb3BzLmdyYXBoaWMucG9wdXBUZW1wbGF0ZSA9IHRoaXMucHJvcHMuZGVmYXVsdFBvcHVwVGVtcGxhdGVcbiAgICAgIH1cbiAgICAgIGlmIChsYXllciAmJiAhbGF5ZXIucG9wdXBUZW1wbGF0ZSkge1xuICAgICAgICBsYXllci5wb3B1cFRlbXBsYXRlID0gdGhpcy5wcm9wcy5wb3B1cFRlbXBsYXRlIHx8IHRoaXMucHJvcHMuZGVmYXVsdFBvcHVwVGVtcGxhdGVcbiAgICAgIH1cbiAgICAgIHRoaXMuZmVhdHVyZSA9IG5ldyB0aGlzLkZlYXR1cmUoe1xuICAgICAgICBjb250YWluZXI6IGNvbnRhaW5lcixcbiAgICAgICAgZGVmYXVsdFBvcHVwVGVtcGxhdGVFbmFibGVkOiB0cnVlLFxuICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yXG4gICAgICAgIHNwYXRpYWxSZWZlcmVuY2U6IHRoaXMucHJvcHMuZGF0YVNvdXJjZT8ubGF5ZXI/LnNwYXRpYWxSZWZlcmVuY2UgfHwgbnVsbCxcbiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvclxuICAgICAgICBtYXA6IHJvb3REYXRhU291cmNlPy5tYXAgfHwgbnVsbCxcbiAgICAgICAgZ3JhcGhpYzogdGhpcy5wcm9wcy5ncmFwaGljLFxuICAgICAgICB2aXNpYmxlRWxlbWVudHM6IHRoaXMuZ2V0VmlzaWJsZUVsZW1lbnRzKClcbiAgICAgIH0pXG4gICAgfSkudGhlbigoKSA9PiB7XG4gICAgICB0aGlzLnNldFN0YXRlKHsgbG9hZFN0YXR1czogTG9hZFN0YXR1cy5GdWxmaWxsZWQgfSlcbiAgICB9KVxuICB9XG5cbiAgdG9nZ2xlRXhwYW5kZWQgPSAoZSkgPT4ge1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKClcbiAgICB0aGlzLnNldFN0YXRlKHsgc2hvd0NvbnRlbnQ6ICF0aGlzLnN0YXRlLnNob3dDb250ZW50IH0pXG4gIH1cblxuICByZW5kZXIgKCkge1xuICAgIGNvbnN0IHsgdG9nZ2xhYmxlID0gZmFsc2UsIGludGwgfSA9IHRoaXMucHJvcHNcbiAgICBjb25zdCB7IHNob3dDb250ZW50IH0gPSB0aGlzLnN0YXRlXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdmZWF0dXJlLWluZm8tY29tcG9uZW50IGQtZmxleCBhbGlnbi1pdGVtcy1jZW50ZXIgcC0xJyBjc3M9e3N0eWxlfT5cbiAgICAgICAge3RvZ2dsYWJsZSAmJiAoXG4gICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgYXJpYS1sYWJlbD17aW50bC5mb3JtYXRNZXNzYWdlKHsgaWQ6IHNob3dDb250ZW50ID8gJ2NvbGxhcHNlJyA6ICdleHBhbmQnIH0pfVxuICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdqaW11LW91dGxpbmUtaW5zaWRlIGZsZXgtc2hyaW5rLTAnLCB7IGV4cGFuZGVkOiBzaG93Q29udGVudCB9KX1cbiAgICAgICAgICAgIHZhcmlhbnQ9J3RleHQnXG4gICAgICAgICAgICBjb2xvcj0naW5oZXJpdCdcbiAgICAgICAgICAgIGljb25cbiAgICAgICAgICAgIHNpemU9J3NtJ1xuICAgICAgICAgICAgb25DbGljaz17dGhpcy50b2dnbGVFeHBhbmRlZH1cbiAgICAgICAgICAgIGNzcz17Y3NzYFxuICAgICAgICAgICAgICBtaW4td2lkdGg6IDMycHg7XG4gICAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDMycHg7XG4gICAgICAgICAgICAgIHBhZGRpbmc6IDZweDtcbiAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgICAgICBgfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIHtzaG93Q29udGVudCA/IDxEb3duRmlsbGVkIHNpemU9J20nLz4gOiA8UmlnaHRGaWxsZWQgc2l6ZT0nbScgYXV0b0ZsaXAvPn1cbiAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgKX1cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J2ZsZXgtZ3Jvdy0xJyByZWY9e3RoaXMuZmVhdHVyZUNvbnRhaW5lcn0gLz5cbiAgICAgIDwvZGl2PlxuICAgIClcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBpbmplY3RJbnRsKEZlYXR1cmVJbmZvKVxuXG5cbiIsIi8qKiBAanN4IGpzeCAqL1xyXG5pbXBvcnQgeyBSZWFjdCwganN4LCBjc3MsIHR5cGUgSW1tdXRhYmxlQXJyYXksIGxvZGFzaCwgbG9hZEFyY0dJU0pTQVBJTW9kdWxlLCB1dGlscywgaG9va3MgfSBmcm9tICdqaW11LWNvcmUnXHJcbmltcG9ydCB7IEppbXVNYXBWaWV3Q29tcG9uZW50LCB0eXBlIEppbXVNYXBWaWV3LCBsb2FkQXJjR0lTSlNBUElNb2R1bGVzIH0gZnJvbSAnamltdS1hcmNnaXMnXHJcbmltcG9ydCB7IGRlZmF1bHRNZXNzYWdlcyBhcyBqaW11VUlNZXNzYWdlcyB9IGZyb20gJ2ppbXUtdWknXHJcbmltcG9ydCB0eXBlIHsgQ3JlYXRlVG9vbFR5cGUsIFVuaXRUeXBlIH0gZnJvbSAnLi4vY29uZmlnJ1xyXG5pbXBvcnQgeyBJbnRlcmFjdGl2ZURyYXcgfSBmcm9tICcuL2ludGVyYWN0aXZlLWRyYXctdG9vbCdcclxuaW1wb3J0IHsgQnVmZmVySW5wdXQgfSBmcm9tICcuL2J1ZmZlci1pbnB1dCdcclxuaW1wb3J0IGRlZmF1bHRNZXNzYWdlIGZyb20gJy4vdHJhbnNsYXRpb25zL2RlZmF1bHQnXHJcbmltcG9ydCB7IFF1ZXJ5VGFza0NvbnRleHQgfSBmcm9tICcuL3F1ZXJ5LXRhc2stY29udGV4dCdcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUHJvcHMge1xyXG4gIG1hcFdpZGdldElkczogSW1tdXRhYmxlQXJyYXk8c3RyaW5nPlxyXG4gIHdpZGdldElkOiBzdHJpbmdcclxuICBjcmVhdGVUb29sVHlwZXM6IEltbXV0YWJsZUFycmF5PENyZWF0ZVRvb2xUeXBlPlxyXG4gIGVuYWJsZUJ1ZmZlcjogYm9vbGVhblxyXG4gIGJ1ZmZlckRpc3RhbmNlOiBudW1iZXJcclxuICBidWZmZXJVbml0OiBVbml0VHlwZVxyXG4gIG9uQnVmZmVyQ2hhbmdlOiAoZGlzdGFuY2U6IG51bWJlciwgdW5pdDogVW5pdFR5cGUpID0+IHZvaWRcclxuICBvbkdlb21ldHJ5Q2hhbmdlOiAoZ2VvbTogX19lc3JpLkdlb21ldHJ5LCBsYXllcj86IF9fZXNyaS5HcmFwaGljc0xheWVyLCBncmFwaGljPzogX19lc3JpLkdyYXBoaWMsIGNsZWFyQWZ0ZXJBcHBseT86IGJvb2xlYW4pID0+IHZvaWRcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIEdlb21ldHJ5RnJvbURyYXcgKHByb3BzOiBQcm9wcykge1xyXG4gIGNvbnN0IHsgb25HZW9tZXRyeUNoYW5nZSwgY3JlYXRlVG9vbFR5cGVzLCBtYXBXaWRnZXRJZHMsIGVuYWJsZUJ1ZmZlciwgYnVmZmVyRGlzdGFuY2UsIGJ1ZmZlclVuaXQsIG9uQnVmZmVyQ2hhbmdlLCB3aWRnZXRJZCB9ID0gcHJvcHNcclxuICBjb25zdCBbamltdU1hcFZpZXcsIHNldEppbXVNYXBWaWV3XSA9IFJlYWN0LnVzZVN0YXRlPEppbXVNYXBWaWV3PihudWxsKVxyXG4gIGNvbnN0IGdldEkxOG5NZXNzYWdlID0gaG9va3MudXNlVHJhbnNsYXRpb24oamltdVVJTWVzc2FnZXMsIGRlZmF1bHRNZXNzYWdlKVxyXG4gIGNvbnN0IHF1ZXJ5VGFza0NvbnRleHQgPSBSZWFjdC51c2VDb250ZXh0KFF1ZXJ5VGFza0NvbnRleHQpXHJcbiAgY29uc3QgcmVzZXRTeW1ib2xSZWYgPSBSZWFjdC51c2VSZWYocXVlcnlUYXNrQ29udGV4dC5yZXNldFN5bWJvbClcclxuICBjb25zdCBnZXRMYXllckZ1blJlZiA9IFJlYWN0LnVzZVJlZjwoKSA9PiBfX2VzcmkuR3JhcGhpY3NMYXllcj4obnVsbClcclxuICBjb25zdCBidWZmZXJPcGVyYXRvclJlZiA9IFJlYWN0LnVzZVJlZjxfX2VzcmkuYnVmZmVyT3BlcmF0b3I+KG51bGwpXHJcbiAgY29uc3QgZ2VvZGVzaWNCdWZmZXJPcGVyYXRvclJlZiA9IFJlYWN0LnVzZVJlZjxfX2VzcmkuZ2VvZGVzaWNCdWZmZXJPcGVyYXRvcj4obnVsbClcclxuICBjb25zdCBnZW9tZXRyeVNlcnZpY2VSZWYgPSBSZWFjdC51c2VSZWY8eyBnZW9tZXRyeVNlcnZpY2U6IF9fZXNyaS5nZW9tZXRyeVNlcnZpY2UsIGJ1ZmZlclBhcmFtZXRlcnM6IHR5cGVvZiBfX2VzcmkuQnVmZmVyUGFyYW1ldGVycyB9PihudWxsKVxyXG4gIGNvbnN0IGdlb21ldHJ5UmVmID0gUmVhY3QudXNlUmVmPF9fZXNyaS5HZW9tZXRyeT4obnVsbClcclxuICBjb25zdCBidWZmZXJEaXN0YW5jZVJlZiA9IFJlYWN0LnVzZVJlZihidWZmZXJEaXN0YW5jZSlcclxuICBjb25zdCBidWZmZXJVbml0UmVmID0gUmVhY3QudXNlUmVmKGJ1ZmZlclVuaXQpXHJcbiAgY29uc3QgYnVmZmVyZWRHcmFwaGljUmVmID0gUmVhY3QudXNlUmVmPF9fZXNyaS5HcmFwaGljPihudWxsKVxyXG5cclxuICBob29rcy51c2VFZmZlY3RPbmNlKCgpID0+IHtcclxuICAgIGlmIChlbmFibGVCdWZmZXIpIHtcclxuICAgICAgLy8gUGFyZW50IGNvbXBvbmVudCBxdWVyeS10YXNrLXNwYXRpYWwtZm9ybSB3aWxsIHJlc2V0IGJ1ZmZlciBwYXJhbWV0ZXIgd2hlbiBmaWx0ZXIgdHlwZSBjaGFuZ2VzLFxyXG4gICAgICAvLyBzbyBkZWZlciB0aGUgaW5pdCBidWZmZXIgb3B0aW9uIGluIG9yZGVyIG5vdCB0byBiZSBvdmVycmlkZSBieSBpdHMgcGFyZW50LlxyXG4gICAgICBsb2Rhc2guZGVmZXIoKCkgPT4ge1xyXG4gICAgICAgIG9uQnVmZmVyQ2hhbmdlKGJ1ZmZlckRpc3RhbmNlLCBidWZmZXJVbml0KVxyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gICAgbG9hZEFyY0dJU0pTQVBJTW9kdWxlcyhbXHJcbiAgICAgICdlc3JpL0dyYXBoaWMnXHJcbiAgICBdKS50aGVuKChtb2R1bGVzKSA9PiB7XHJcbiAgICAgIGNvbnN0IEdyYXBoaWMgPSBtb2R1bGVzWzBdXHJcbiAgICAgIGJ1ZmZlcmVkR3JhcGhpY1JlZi5jdXJyZW50ID0gbmV3IEdyYXBoaWMoe1xyXG4gICAgICAgIHN5bWJvbDoge1xyXG4gICAgICAgICAgdHlwZTogJ3NpbXBsZS1maWxsJyxcclxuICAgICAgICAgIGNvbG9yOiBbNTEsIDUxLCAyMDQsIDAuNV0sXHJcbiAgICAgICAgICBzdHlsZTogJ3NvbGlkJyxcclxuICAgICAgICAgIG91dGxpbmU6IHtcclxuICAgICAgICAgICAgY29sb3I6IFs1MSwgNTEsIDIwNCwgMC44XSxcclxuICAgICAgICAgICAgd2lkdGg6IDFcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICB9KVxyXG4gIH0pXHJcblxyXG4gIGNvbnN0IGFwcGx5QnVmZmVyRWZmZWN0ID0gUmVhY3QudXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xyXG4gICAgaWYgKCFnZW9tZXRyeVJlZi5jdXJyZW50IHx8ICFlbmFibGVCdWZmZXIgfHwgYnVmZmVyRGlzdGFuY2VSZWYuY3VycmVudCA9PT0gMCkge1xyXG4gICAgICBidWZmZXJlZEdyYXBoaWNSZWYuY3VycmVudC5nZW9tZXRyeSA9IG51bGxcclxuICAgICAgcmV0dXJuXHJcbiAgICB9XHJcblxyXG4gICAgLy8gSWYgdGhlIGVuZCB1c2VyIHVzZXMgYSBwb2ludCBvciBsaW5lIHF1ZXJ5IGdlb21ldHJ5LCB0aGVuIHRoZSBuZWdhdGl2ZSBidWZmZXIgd2lsbCBub3Qgd29yayAoc2FtZSBlZmZlY3QgYXMgdGhlcmUgaXMgbm8gYnVmZmVyKVxyXG4gICAgY29uc3QgaXNQb2ludE5lZ2F0aXZlQnVmZmVyID0gKGdlb21ldHJ5UmVmLmN1cnJlbnQ/LnR5cGUgPT09ICdwb2ludCcgfHwgZ2VvbWV0cnlSZWYuY3VycmVudD8udHlwZSA9PT0gJ211bHRpcG9pbnQnKSAmJiBidWZmZXJEaXN0YW5jZVJlZi5jdXJyZW50IDwgMFxyXG4gICAgY29uc3QgaXNMaW5lTmVnYXRpdmVCdWZmZXIgPSBnZW9tZXRyeVJlZi5jdXJyZW50Py50eXBlID09PSAncG9seWxpbmUnICYmIGJ1ZmZlckRpc3RhbmNlUmVmLmN1cnJlbnQgPCAwXHJcbiAgICBpZiAoaXNQb2ludE5lZ2F0aXZlQnVmZmVyIHx8IGlzTGluZU5lZ2F0aXZlQnVmZmVyKSB7XHJcbiAgICAgIGJ1ZmZlcmVkR3JhcGhpY1JlZi5jdXJyZW50Lmdlb21ldHJ5ID0gbnVsbFxyXG4gICAgICByZXR1cm5cclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBnZW9tZXRyeSA9IGdlb21ldHJ5UmVmLmN1cnJlbnRcclxuICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVycy5hcmNnaXMuY29tL2phdmFzY3JpcHQvbGF0ZXN0L2FwaS1yZWZlcmVuY2UvZXNyaS1nZW9tZXRyeS1nZW9tZXRyeUVuZ2luZS5odG1sI2J1ZmZlclxyXG4gICAgaWYgKGdlb21ldHJ5LnNwYXRpYWxSZWZlcmVuY2U/LmlzR2VvZ3JhcGhpYyAmJiAhZ2VvbWV0cnkuc3BhdGlhbFJlZmVyZW5jZS5pc1dHUzg0KSB7XHJcbiAgICAgIGNvbnN0IHNlcnZpY2VVcmwgPSB1dGlscy5nZXRHZW9tZXRyeVNlcnZpY2UoKVxyXG4gICAgICBpZiAoIWdlb21ldHJ5U2VydmljZVJlZi5jdXJyZW50KSB7XHJcbiAgICAgICAgY29uc3QgbW9kdWxlcyA9IGF3YWl0IGxvYWRBcmNHSVNKU0FQSU1vZHVsZXMoW1xyXG4gICAgICAgICAgJ2VzcmkvcmVzdC9nZW9tZXRyeVNlcnZpY2UnLFxyXG4gICAgICAgICAgJ2VzcmkvcmVzdC9zdXBwb3J0L0J1ZmZlclBhcmFtZXRlcnMnXHJcbiAgICAgICAgXSlcclxuICAgICAgICBnZW9tZXRyeVNlcnZpY2VSZWYuY3VycmVudCA9IHtcclxuICAgICAgICAgIGdlb21ldHJ5U2VydmljZTogbW9kdWxlc1swXSxcclxuICAgICAgICAgIGJ1ZmZlclBhcmFtZXRlcnM6IG1vZHVsZXNbMV1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgeyBnZW9tZXRyeVNlcnZpY2UsIGJ1ZmZlclBhcmFtZXRlcnM6IEJ1ZmZlclBhcmFtZXRlcnMgfSA9IGdlb21ldHJ5U2VydmljZVJlZi5jdXJyZW50XHJcbiAgICAgIGNvbnN0IHBvbHlnb25zID0gYXdhaXQgZ2VvbWV0cnlTZXJ2aWNlLmJ1ZmZlcihzZXJ2aWNlVXJsLCBuZXcgQnVmZmVyUGFyYW1ldGVycyh7XHJcbiAgICAgICAgZGlzdGFuY2VzOiBbYnVmZmVyRGlzdGFuY2VSZWYuY3VycmVudF0sXHJcbiAgICAgICAgdW5pdDogbG9kYXNoLmtlYmFiQ2FzZShidWZmZXJVbml0UmVmLmN1cnJlbnQpIGFzIGFueSxcclxuICAgICAgICBnZW9kZXNpYzogdHJ1ZSxcclxuICAgICAgICBidWZmZXJTcGF0aWFsUmVmZXJlbmNlOiBnZW9tZXRyeS5zcGF0aWFsUmVmZXJlbmNlLFxyXG4gICAgICAgIG91dFNwYXRpYWxSZWZlcmVuY2U6IGdlb21ldHJ5LnNwYXRpYWxSZWZlcmVuY2UsXHJcbiAgICAgICAgZ2VvbWV0cmllczogW2dlb21ldHJ5XVxyXG4gICAgICB9KSlcclxuICAgICAgYnVmZmVyZWRHcmFwaGljUmVmLmN1cnJlbnQuZ2VvbWV0cnkgPSBwb2x5Z29uc1swXVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaWYgKGdlb21ldHJ5LnNwYXRpYWxSZWZlcmVuY2U/LmlzV0dTODQgfHwgZ2VvbWV0cnkuc3BhdGlhbFJlZmVyZW5jZT8uaXNXZWJNZXJjYXRvcikge1xyXG4gICAgICAgIGlmICghZ2VvZGVzaWNCdWZmZXJPcGVyYXRvclJlZi5jdXJyZW50KSB7XHJcbiAgICAgICAgICBnZW9kZXNpY0J1ZmZlck9wZXJhdG9yUmVmLmN1cnJlbnQgPSBhd2FpdCBsb2FkQXJjR0lTSlNBUElNb2R1bGUoJ2VzcmkvZ2VvbWV0cnkvb3BlcmF0b3JzL2dlb2Rlc2ljQnVmZmVyT3BlcmF0b3InKVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIWdlb2Rlc2ljQnVmZmVyT3BlcmF0b3JSZWYuY3VycmVudC5pc0xvYWRlZCgpKSB7XHJcbiAgICAgICAgICBhd2FpdCBnZW9kZXNpY0J1ZmZlck9wZXJhdG9yUmVmLmN1cnJlbnQubG9hZCgpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJ1ZmZlcmVkR3JhcGhpY1JlZi5jdXJyZW50Lmdlb21ldHJ5ID0gZ2VvZGVzaWNCdWZmZXJPcGVyYXRvclJlZi5jdXJyZW50LmV4ZWN1dGUoXHJcbiAgICAgICAgICBnZW9tZXRyeSBhcyBfX2VzcmkuR2VvbWV0cnlVbmlvbixcclxuICAgICAgICAgIGJ1ZmZlckRpc3RhbmNlUmVmLmN1cnJlbnQsXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIHVuaXQ6IGxvZGFzaC5rZWJhYkNhc2UoYnVmZmVyVW5pdFJlZi5jdXJyZW50KSBhcyBhbnlcclxuICAgICAgICAgIH1cclxuICAgICAgICApXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKCFidWZmZXJPcGVyYXRvclJlZi5jdXJyZW50KSB7XHJcbiAgICAgICAgICBidWZmZXJPcGVyYXRvclJlZi5jdXJyZW50ID0gYXdhaXQgbG9hZEFyY0dJU0pTQVBJTW9kdWxlKCdlc3JpL2dlb21ldHJ5L29wZXJhdG9ycy9idWZmZXJPcGVyYXRvcicpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJ1ZmZlcmVkR3JhcGhpY1JlZi5jdXJyZW50Lmdlb21ldHJ5ID0gYnVmZmVyT3BlcmF0b3JSZWYuY3VycmVudC5leGVjdXRlKFxyXG4gICAgICAgICAgZ2VvbWV0cnkgYXMgX19lc3JpLkdlb21ldHJ5VW5pb24sXHJcbiAgICAgICAgICBidWZmZXJEaXN0YW5jZVJlZi5jdXJyZW50LFxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICB1bml0OiBsb2Rhc2gua2ViYWJDYXNlKGJ1ZmZlclVuaXRSZWYuY3VycmVudCkgYXMgYW55XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgKVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSwgW2VuYWJsZUJ1ZmZlcl0pXHJcblxyXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpZiAocXVlcnlUYXNrQ29udGV4dC5yZXNldFN5bWJvbCAmJiBxdWVyeVRhc2tDb250ZXh0LnJlc2V0U3ltYm9sICE9PSByZXNldFN5bWJvbFJlZi5jdXJyZW50KSB7XHJcbiAgICAgIHJlc2V0U3ltYm9sUmVmLmN1cnJlbnQgPSBxdWVyeVRhc2tDb250ZXh0LnJlc2V0U3ltYm9sXHJcbiAgICAgIGdldExheWVyRnVuUmVmLmN1cnJlbnQgJiYgZ2V0TGF5ZXJGdW5SZWYuY3VycmVudCgpLnJlbW92ZUFsbCgpXHJcbiAgICAgIG9uR2VvbWV0cnlDaGFuZ2UobnVsbClcclxuICAgIH1cclxuICB9LCBbcXVlcnlUYXNrQ29udGV4dC5yZXNldFN5bWJvbCwgb25HZW9tZXRyeUNoYW5nZV0pXHJcblxyXG4gIGNvbnN0IGhhbmRsZUppbXVNYXBWaWV3Q2hhbmdlZCA9IFJlYWN0LnVzZUNhbGxiYWNrKChqaW11TWFwVmlldzogSmltdU1hcFZpZXcpID0+IHtcclxuICAgIC8vIGNsZWFyIGRyYXdpbmcgZ3JhcGhpY3MgYmVmb3JlIHN3aXRjaGluZyBtYXAgdmlld1xyXG4gICAgY29uc3QgbGF5ZXIgPSBnZXRMYXllckZ1blJlZi5jdXJyZW50ICYmIGdldExheWVyRnVuUmVmLmN1cnJlbnQoKVxyXG4gICAgaWYgKGxheWVyKSB7XHJcbiAgICAgIGxheWVyLnJlbW92ZUFsbCgpXHJcbiAgICAgIG9uR2VvbWV0cnlDaGFuZ2UobnVsbClcclxuICAgIH1cclxuICAgIHNldEppbXVNYXBWaWV3KGppbXVNYXBWaWV3Py52aWV3ICE9IG51bGwgPyBqaW11TWFwVmlldyA6IG51bGwpXHJcbiAgfSwgW29uR2VvbWV0cnlDaGFuZ2VdKVxyXG5cclxuICBjb25zdCBoYW5kbGVCdWZmZXJDaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjaygoZGlzdGFuY2UsIHVuaXQpID0+IHtcclxuICAgIGJ1ZmZlckRpc3RhbmNlUmVmLmN1cnJlbnQgPSBkaXN0YW5jZVxyXG4gICAgYnVmZmVyVW5pdFJlZi5jdXJyZW50ID0gdW5pdFxyXG4gICAgYXBwbHlCdWZmZXJFZmZlY3QoKVxyXG4gICAgb25CdWZmZXJDaGFuZ2UoZGlzdGFuY2UsIHVuaXQpXHJcbiAgfSwgW29uQnVmZmVyQ2hhbmdlLCBhcHBseUJ1ZmZlckVmZmVjdF0pXHJcblxyXG4gIGNvbnN0IGhhbmRsZURyYXdFbmQgPSBSZWFjdC51c2VDYWxsYmFjaygoZ3JhcGhpYywgZ2V0TGF5ZXJGdW4sIGNsZWFyQWZ0ZXJBcHBseSkgPT4ge1xyXG4gICAgZ2V0TGF5ZXJGdW5SZWYuY3VycmVudCA9IGdldExheWVyRnVuXHJcbiAgICBjb25zdCBsYXllciA9IGdldExheWVyRnVuUmVmLmN1cnJlbnQgJiYgZ2V0TGF5ZXJGdW5SZWYuY3VycmVudCgpXHJcbiAgICAvLyBpdCdzIHBvc3NpYmxlIHRoYXQgdGhlIGdlb21ldHJ5IGlzIHRoZSBzYW1lIGFzIHRoZSBwcmV2aW91cyBvbmUsIG9ubHkgdGhlIGNsZWFyQWZ0ZXJBcHBseSBpcyBjaGFuZ2VkLlxyXG4gICAgaWYgKGdlb21ldHJ5UmVmLmN1cnJlbnQgIT09IGdyYXBoaWM/Lmdlb21ldHJ5KSB7XHJcbiAgICAgIGdlb21ldHJ5UmVmLmN1cnJlbnQgPSBncmFwaGljPy5nZW9tZXRyeVxyXG4gICAgICBhcHBseUJ1ZmZlckVmZmVjdCgpLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIGlmIChidWZmZXJlZEdyYXBoaWNSZWYuY3VycmVudC5nZW9tZXRyeSkge1xyXG4gICAgICAgICAgbGF5ZXI/LmFkZChidWZmZXJlZEdyYXBoaWNSZWYuY3VycmVudClcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICB9XHJcbiAgICBvbkdlb21ldHJ5Q2hhbmdlKGdyYXBoaWM/Lmdlb21ldHJ5LCBsYXllciwgZ3JhcGhpYywgY2xlYXJBZnRlckFwcGx5KVxyXG4gIH0sIFtvbkdlb21ldHJ5Q2hhbmdlLCBhcHBseUJ1ZmZlckVmZmVjdF0pXHJcblxyXG4gIHJldHVybiAoXHJcbiAgICA8UmVhY3QuRnJhZ21lbnQ+XHJcbiAgICAgIHtcclxuICAgICAgICBtYXBXaWRnZXRJZHM/Lm1hcCgobWFwV2lkZ2V0SWQsIHgpID0+IChcclxuICAgICAgICAgIDxKaW11TWFwVmlld0NvbXBvbmVudFxyXG4gICAgICAgICAgICBrZXk9e3h9IHVzZU1hcFdpZGdldElkPXttYXBXaWRnZXRJZH0gb25BY3RpdmVWaWV3Q2hhbmdlPXtoYW5kbGVKaW11TWFwVmlld0NoYW5nZWR9XHJcbiAgICAgICAgICAvPlxyXG4gICAgICAgICkpXHJcbiAgICAgIH1cclxuICAgICAge2ppbXVNYXBWaWV3Py52aWV3ICYmIChcclxuICAgICAgICA8UmVhY3QuRnJhZ21lbnQ+XHJcbiAgICAgICAgICA8SW50ZXJhY3RpdmVEcmF3XHJcbiAgICAgICAgICAgIGppbXVNYXBWaWV3PXtqaW11TWFwVmlld31cclxuICAgICAgICAgICAgd2lkZ2V0SWQ9e3dpZGdldElkfVxyXG4gICAgICAgICAgICB0b29sVHlwZXM9e2NyZWF0ZVRvb2xUeXBlc31cclxuICAgICAgICAgICAgb25EcmF3RW5kPXtoYW5kbGVEcmF3RW5kfVxyXG4gICAgICAgICAgLz5cclxuICAgICAgICAgIHtlbmFibGVCdWZmZXIgJiYgKFxyXG4gICAgICAgICAgICA8ZGl2IHJvbGU9J2dyb3VwJyBjbGFzc05hbWU9J3RpdGxlMycgYXJpYS1sYWJlbD17Z2V0STE4bk1lc3NhZ2UoJ3RoZUJ1ZmZlckRpc3RhbmNlJyl9IGNzcz17Y3NzYG1hcmdpbi10b3A6IDAuNzVyZW07YH0+XHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3RleHQtdHJ1bmNhdGUnPntnZXRJMThuTWVzc2FnZSgndGhlQnVmZmVyRGlzdGFuY2UnKX08L2Rpdj5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZC1mbGV4IG10LTEnPlxyXG4gICAgICAgICAgICAgICAgPEJ1ZmZlcklucHV0IGRpc3RhbmNlPXtidWZmZXJEaXN0YW5jZX0gdW5pdD17YnVmZmVyVW5pdH0gb25CdWZmZXJDaGFuZ2U9e2hhbmRsZUJ1ZmZlckNoYW5nZX0vPlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICl9XHJcbiAgICAgICAgPC9SZWFjdC5GcmFnbWVudD5cclxuICAgICAgKX1cclxuICAgIDwvUmVhY3QuRnJhZ21lbnQ+XHJcbiAgKVxyXG59XHJcbiIsIi8qKiBAanN4IGpzeCAqL1xyXG5pbXBvcnQge1xyXG4gIFJlYWN0LFxyXG4gIFJlYWN0UmVkdXgsXHJcbiAganN4LFxyXG4gIGNzcyxcclxuICBJbW11dGFibGUsXHJcbiAgdHlwZSBJbW11dGFibGVBcnJheSxcclxuICB0eXBlIFVzZURhdGFTb3VyY2UsXHJcbiAgdHlwZSBGZWF0dXJlRGF0YVJlY29yZCxcclxuICBEYXRhU291cmNlTWFuYWdlcixcclxuICBEYXRhU291cmNlQ29tcG9uZW50LFxyXG4gIGhvb2tzLFxyXG4gIHR5cGUgRGF0YVNvdXJjZSxcclxuICB0eXBlIElNU3RhdGUsXHJcbiAgRGF0YVNvdXJjZVN0YXR1c1xyXG59IGZyb20gJ2ppbXUtY29yZSdcclxuaW1wb3J0IHsgU2VsZWN0LCBPcHRpb24sIGRlZmF1bHRNZXNzYWdlcyBhcyBqaW11VUlNZXNzYWdlcyB9IGZyb20gJ2ppbXUtdWknXHJcbmltcG9ydCB7IFNwYXRpYWxSZWxhdGlvbiwgdHlwZSBVbml0VHlwZSB9IGZyb20gJy4uL2NvbmZpZydcclxuaW1wb3J0IHsgQnVmZmVySW5wdXQgfSBmcm9tICcuL2J1ZmZlci1pbnB1dCdcclxuaW1wb3J0IGRlZmF1bHRNZXNzYWdlIGZyb20gJy4vdHJhbnNsYXRpb25zL2RlZmF1bHQnXHJcbmltcG9ydCB7IFF1ZXJ5VGFza0NvbnRleHQgfSBmcm9tICcuL3F1ZXJ5LXRhc2stY29udGV4dCdcclxuXHJcbmNvbnN0IG1hcmdpblN0eWxlID0gY3NzYG1hcmdpbi10b3A6IDAuNzVyZW07YFxyXG5leHBvcnQgaW50ZXJmYWNlIFByb3BzIHtcclxuICBzcGF0aWFsUmVsYXRpb25zOiBJbW11dGFibGVBcnJheTxTcGF0aWFsUmVsYXRpb24+XHJcbiAgdXNlRGF0YVNvdXJjZXM6IEltbXV0YWJsZUFycmF5PFVzZURhdGFTb3VyY2U+XHJcbiAgdXNlUnVudGltZURhdGE6IGJvb2xlYW5cclxuICBlbmFibGVCdWZmZXI6IGJvb2xlYW5cclxuICBidWZmZXJEaXN0YW5jZTogbnVtYmVyXHJcbiAgYnVmZmVyVW5pdDogVW5pdFR5cGVcclxuICBvblNlbGVjdGlvbkNoYW5nZTogKGdlb21zOiBfX2VzcmkuR2VvbWV0cnlbXSkgPT4gdm9pZFxyXG4gIG9uUmVsYXRpb25DaGFuZ2U6IChyZWw6IFNwYXRpYWxSZWxhdGlvbikgPT4gdm9pZFxyXG4gIG9uQnVmZmVyQ2hhbmdlOiAoZGlzdGFuY2U6IG51bWJlciwgdW5pdDogVW5pdFR5cGUpID0+IHZvaWRcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0UnVudGltZURhdGFTb3VyY2UgKCk6IHsgW2RzSWQ6IHN0cmluZ106IERhdGFTb3VyY2UgfSB7XHJcbiAgY29uc3QgcmVzdWx0ID0ge31cclxuICBsZXQgbm90RW1wdHkgPSBmYWxzZVxyXG4gIGNvbnN0IGRzTWFwID0gRGF0YVNvdXJjZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5nZXREYXRhU291cmNlcygpXHJcbiAgT2JqZWN0LmtleXMoZHNNYXApLmZvckVhY2goZHNJZCA9PiB7XHJcbiAgICBjb25zdCBkcyA9IGRzTWFwW2RzSWRdXHJcbiAgICAvLyBvbmx5IGluY2x1ZGUgdGhlIGRzIHRoYXQgaGFzIGdlb21ldHJ5XHJcbiAgICBpZiAoZHMuZ2V0R2VvbWV0cnlUeXBlKCkgIT0gbnVsbCAmJiAhZHMuaXNJbkFwcENvbmZpZygpICYmIGRzLmdldE1haW5EYXRhU291cmNlKCkuaWQgPT09IGRzSWQgJiYgIWRzLmdldERhdGFTb3VyY2VKc29uKCkuaXNPdXRwdXRGcm9tV2lkZ2V0KSB7XHJcbiAgICAgIHJlc3VsdFtkc0lkXSA9IGRzXHJcbiAgICAgIG5vdEVtcHR5ID0gdHJ1ZVxyXG4gICAgfVxyXG4gIH0pXHJcblxyXG4gIHJldHVybiBub3RFbXB0eSA/IHJlc3VsdCA6IG51bGxcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIEdlb21ldHJ5RnJvbURhdGFTb3VyY2UgKHByb3BzOiBQcm9wcykge1xyXG4gIGNvbnN0IHsgb25TZWxlY3Rpb25DaGFuZ2UsIHVzZURhdGFTb3VyY2VzID0gW10sIHVzZVJ1bnRpbWVEYXRhLCBzcGF0aWFsUmVsYXRpb25zLCBlbmFibGVCdWZmZXIsIGJ1ZmZlckRpc3RhbmNlLCBidWZmZXJVbml0LCBvbkJ1ZmZlckNoYW5nZSwgb25SZWxhdGlvbkNoYW5nZSB9ID0gcHJvcHNcclxuICBjb25zdCBnZXRJMThuTWVzc2FnZSA9IGhvb2tzLnVzZVRyYW5zbGF0aW9uKGppbXVVSU1lc3NhZ2VzLCBkZWZhdWx0TWVzc2FnZSlcclxuICBjb25zdCBbY3VycmVudERhdGFTb3VyY2UsIHNldEN1cnJlbnREYXRhU291cmNlXSA9IFJlYWN0LnVzZVN0YXRlKHVzZURhdGFTb3VyY2VzWzBdKVxyXG4gIGNvbnN0IFtydW50aW1lRGF0YVNvdXJjZSwgc2V0UnVudGltZURhdGFTb3VyY2VdID0gUmVhY3QudXNlU3RhdGU8RGF0YVNvdXJjZT4oKVxyXG4gIGNvbnN0IFtjb3VudCwgc2V0Q291bnRdID0gUmVhY3QudXNlU3RhdGUoMClcclxuICBjb25zdCBbY3VycmVudFJlbGF0aW9uLCBzZXRDdXJyZW50UmVsYXRpb25dID0gUmVhY3QudXNlU3RhdGUoc3BhdGlhbFJlbGF0aW9ucz8uWzBdKVxyXG4gIGNvbnN0IHF1ZXJ5VGFza0NvbnRleHQgPSBSZWFjdC51c2VDb250ZXh0KFF1ZXJ5VGFza0NvbnRleHQpXHJcbiAgY29uc3QgcmVzZXRTeW1ib2xSZWYgPSBSZWFjdC51c2VSZWYocXVlcnlUYXNrQ29udGV4dC5yZXNldFN5bWJvbClcclxuICBjb25zdCB0cmFuc2xhdGUgPSBob29rcy51c2VUcmFuc2xhdGlvbigpXHJcblxyXG4gIGNvbnN0IHNwYXRpYWxSZWxhdGlvbk9wdGlvbnM6IEFycmF5PHsgdmFsdWU6IHN0cmluZywgbGFiZWw6IHN0cmluZyB9PiA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xyXG4gICAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKFNwYXRpYWxSZWxhdGlvbikubWFwKChba2V5LCB2YWx1ZV0pID0+ICh7XHJcbiAgICAgIHZhbHVlLFxyXG4gICAgICBsYWJlbDogZ2V0STE4bk1lc3NhZ2UoYHNwYXRpYWxSZWxhdGlvbl8ke2tleX1gKVxyXG4gICAgfSkpXHJcbiAgfSwgW2dldEkxOG5NZXNzYWdlXSlcclxuXHJcbiAgY29uc3QgbG9hZGVkVXNlRGF0YVNvdXJjZXMgPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xyXG4gICAgY29uc3QgbG9hZGVkID0gW11cclxuICAgIHVzZURhdGFTb3VyY2VzLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgaWYgKHN0YXRlLmRhdGFTb3VyY2VzSW5mbz8uW2l0ZW0ubWFpbkRhdGFTb3VyY2VJZF0/Lmluc3RhbmNlU3RhdHVzID09PSBEYXRhU291cmNlU3RhdHVzLkNyZWF0ZWQpIHtcclxuICAgICAgICBsb2FkZWQucHVzaChpdGVtLmRhdGFTb3VyY2VJZClcclxuICAgICAgfVxyXG4gICAgfSlcclxuICAgIGlmIChsb2FkZWQubGVuZ3RoID4gMCkge1xyXG4gICAgICByZXR1cm4gbG9hZGVkLmpvaW4oJywnKVxyXG4gICAgfVxyXG4gICAgcmV0dXJuICcnXHJcbiAgfSlcclxuXHJcbiAgY29uc3QgbnVtT2ZEcyA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XHJcbiAgICBpZiAoIXVzZVJ1bnRpbWVEYXRhKSB7XHJcbiAgICAgIHJldHVybiAwXHJcbiAgICB9XHJcbiAgICByZXR1cm4gT2JqZWN0LmtleXMoc3RhdGUuZGF0YVNvdXJjZXNJbmZvID8/IHt9KS5maWx0ZXIoZHNJZCA9PiBzdGF0ZS5kYXRhU291cmNlc0luZm9bZHNJZF0uaW5zdGFuY2VTdGF0dXMgPT09IERhdGFTb3VyY2VTdGF0dXMuQ3JlYXRlZCkubGVuZ3RoXHJcbiAgfSlcclxuXHJcbiAgY29uc3QgcnVudGltZURhdGFTb3VyY2VzID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XHJcbiAgICBpZiAobnVtT2ZEcyA+IDApIHtcclxuICAgICAgcmV0dXJuIGdldFJ1bnRpbWVEYXRhU291cmNlKClcclxuICAgIH1cclxuICB9LCBbbnVtT2ZEc10pXHJcblxyXG4gIGNvbnN0IG51bU9mUnVudGltZURzID0gT2JqZWN0LmtleXMocnVudGltZURhdGFTb3VyY2VzID8/IHt9KS5sZW5ndGhcclxuXHJcbiAgaG9va3MudXNlRWZmZWN0T25jZSgoKSA9PiB7XHJcbiAgICBpZiAoc3BhdGlhbFJlbGF0aW9ucz8ubGVuZ3RoID4gMCkge1xyXG4gICAgICBvblJlbGF0aW9uQ2hhbmdlKHNwYXRpYWxSZWxhdGlvbnNbMF0pXHJcbiAgICB9XHJcbiAgICBpZiAoZW5hYmxlQnVmZmVyKSB7XHJcbiAgICAgIG9uQnVmZmVyQ2hhbmdlKGJ1ZmZlckRpc3RhbmNlLCBidWZmZXJVbml0KVxyXG4gICAgfVxyXG4gIH0pXHJcblxyXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpZiAocXVlcnlUYXNrQ29udGV4dC5yZXNldFN5bWJvbCAmJiBxdWVyeVRhc2tDb250ZXh0LnJlc2V0U3ltYm9sICE9PSByZXNldFN5bWJvbFJlZi5jdXJyZW50KSB7XHJcbiAgICAgIHJlc2V0U3ltYm9sUmVmLmN1cnJlbnQgPSBxdWVyeVRhc2tDb250ZXh0LnJlc2V0U3ltYm9sXHJcbiAgICAgIHNldEN1cnJlbnRSZWxhdGlvbihzcGF0aWFsUmVsYXRpb25zPy5bMF0pXHJcbiAgICAgIG9uUmVsYXRpb25DaGFuZ2Uoc3BhdGlhbFJlbGF0aW9ucz8uWzBdKVxyXG4gICAgfVxyXG4gIH0sIFtxdWVyeVRhc2tDb250ZXh0LnJlc2V0U3ltYm9sLCBvblJlbGF0aW9uQ2hhbmdlLCBzcGF0aWFsUmVsYXRpb25zXSlcclxuXHJcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGlmICghc3BhdGlhbFJlbGF0aW9ucykge1xyXG4gICAgICBzZXRDdXJyZW50UmVsYXRpb24obnVsbClcclxuICAgIH0gZWxzZSBpZiAoIXNwYXRpYWxSZWxhdGlvbnMuaW5jbHVkZXMoY3VycmVudFJlbGF0aW9uKSkge1xyXG4gICAgICBzZXRDdXJyZW50UmVsYXRpb24oc3BhdGlhbFJlbGF0aW9uc1swXSlcclxuICAgICAgb25SZWxhdGlvbkNoYW5nZShzcGF0aWFsUmVsYXRpb25zWzBdKVxyXG4gICAgfVxyXG4gIH0sIFtzcGF0aWFsUmVsYXRpb25zLCBjdXJyZW50UmVsYXRpb24sIG9uUmVsYXRpb25DaGFuZ2VdKVxyXG5cclxuICBjb25zdCBoYW5kbGVEYXRhU291cmNlQ2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soXHJcbiAgICAoZHNJZDogc3RyaW5nKSA9PiB7XHJcbiAgICAgIGNvbnN0IGRzID0gdXNlRGF0YVNvdXJjZXMuZmluZCgoaXRlbSkgPT4gaXRlbS5kYXRhU291cmNlSWQgPT09IGRzSWQpXHJcbiAgICAgIHNldEN1cnJlbnREYXRhU291cmNlKEltbXV0YWJsZShkcykpXHJcbiAgICAgIHNldFJ1bnRpbWVEYXRhU291cmNlKG51bGwpXHJcbiAgICB9LFxyXG4gICAgW3VzZURhdGFTb3VyY2VzXVxyXG4gIClcclxuXHJcbiAgY29uc3QgaGFuZGxlUnVudGltZURhdGFTb3VyY2VDaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjayhcclxuICAgIChkc0lkOiBzdHJpbmcpID0+IHtcclxuICAgICAgY29uc3QgZHMgPSBEYXRhU291cmNlTWFuYWdlci5nZXRJbnN0YW5jZSgpLmdldERhdGFTb3VyY2UoZHNJZClcclxuICAgICAgc2V0UnVudGltZURhdGFTb3VyY2UoZHMpXHJcbiAgICAgIHNldEN1cnJlbnREYXRhU291cmNlKG51bGwpXHJcbiAgICB9LFxyXG4gICAgW11cclxuICApXHJcblxyXG4gIGNvbnN0IGhhbmRsZURhdGFTb3VyY2VJbmZvQ2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soKCkgPT4ge1xyXG4gICAgY29uc3QgZHMgPSBEYXRhU291cmNlTWFuYWdlci5nZXRJbnN0YW5jZSgpLmdldERhdGFTb3VyY2UoY3VycmVudERhdGFTb3VyY2U/LmRhdGFTb3VyY2VJZCA/PyBydW50aW1lRGF0YVNvdXJjZT8uaWQpXHJcbiAgICBjb25zdCByZWNvcmRzID0gZHM/LmdldFNlbGVjdGVkUmVjb3JkcygpIGFzIEZlYXR1cmVEYXRhUmVjb3JkW11cclxuICAgIGlmIChyZWNvcmRzPy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGNvbnN0IGdlb21ldHJpZXMgPSByZWNvcmRzLm1hcCgocmVjb3JkKSA9PiByZWNvcmQuZ2V0SlNBUElHZW9tZXRyeSgpKVxyXG4gICAgICBvblNlbGVjdGlvbkNoYW5nZShnZW9tZXRyaWVzKVxyXG4gICAgICBzZXRDb3VudChyZWNvcmRzLmxlbmd0aClcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIG9uU2VsZWN0aW9uQ2hhbmdlKG51bGwpXHJcbiAgICAgIHNldENvdW50KDApXHJcbiAgICB9XHJcbiAgfSwgW2N1cnJlbnREYXRhU291cmNlPy5kYXRhU291cmNlSWQsIHJ1bnRpbWVEYXRhU291cmNlPy5pZCwgb25TZWxlY3Rpb25DaGFuZ2VdKVxyXG5cclxuICBjb25zdCBnZXRMYWJlbE9mU3BhdGlhbFJlbGF0aW9uID0gKHJlbGF0aW9uOiBzdHJpbmcpOiBzdHJpbmcgPT4ge1xyXG4gICAgcmV0dXJuIHNwYXRpYWxSZWxhdGlvbk9wdGlvbnMuZmluZChpdGVtID0+IGl0ZW0udmFsdWUgPT09IHJlbGF0aW9uKS5sYWJlbFxyXG4gIH1cclxuXHJcbiAgY29uc3QgaGFuZGxlU3BhdGlhbFJlbGF0aW9uQ2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soZSA9PiB7XHJcbiAgICBzZXRDdXJyZW50UmVsYXRpb24oZS50YXJnZXQudmFsdWUpXHJcbiAgICBvblJlbGF0aW9uQ2hhbmdlKGUudGFyZ2V0LnZhbHVlKVxyXG4gIH0sIFtvblJlbGF0aW9uQ2hhbmdlXSlcclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDxkaXY+XHJcbiAgICAgIDxkaXYgY3NzPXttYXJnaW5TdHlsZX0gY2xhc3NOYW1lPSd0aXRsZTMnPntnZXRJMThuTWVzc2FnZSgnY2hvb3NlRmlsdGVyTGF5ZXInKX08L2Rpdj5cclxuICAgICAgPFNlbGVjdFxyXG4gICAgICAgIGFyaWEtbGFiZWw9e2dldEkxOG5NZXNzYWdlKCdjaG9vc2VGaWx0ZXJMYXllcicpfVxyXG4gICAgICAgIHZhbHVlPXtjdXJyZW50RGF0YVNvdXJjZT8uZGF0YVNvdXJjZUlkID8/IHJ1bnRpbWVEYXRhU291cmNlPy5pZH1cclxuICAgICAgPlxyXG4gICAgICAgIHtudW1PZlJ1bnRpbWVEcyA+IDAgJiYgdXNlRGF0YVNvdXJjZXMubGVuZ3RoID4gMCAmJiA8T3B0aW9uIGhlYWRlcj57Z2V0STE4bk1lc3NhZ2UoJ3ByZWNvbmZpZ3VyZWQnKX08L09wdGlvbj59XHJcbiAgICAgICAge3VzZURhdGFTb3VyY2VzLm1hcCgoaXRlbSkgPT4ge1xyXG4gICAgICAgICAgY29uc3QgZHMgPSBEYXRhU291cmNlTWFuYWdlci5nZXRJbnN0YW5jZSgpLmdldERhdGFTb3VyY2UoaXRlbS5kYXRhU291cmNlSWQpXHJcbiAgICAgICAgICBpZiAobG9hZGVkVXNlRGF0YVNvdXJjZXMuaW5jbHVkZXMoaXRlbS5kYXRhU291cmNlSWQpIHx8IGRzPy5nZXRMYWJlbCgpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgPE9wdGlvbiBrZXk9e2l0ZW0uZGF0YVNvdXJjZUlkfSB2YWx1ZT17aXRlbS5kYXRhU291cmNlSWR9IG9uQ2xpY2s9eygpID0+IHsgaGFuZGxlRGF0YVNvdXJjZUNoYW5nZShpdGVtLmRhdGFTb3VyY2VJZCkgfX0+XHJcbiAgICAgICAgICAgICAge2RzPy5nZXRMYWJlbCgpfVxyXG4gICAgICAgICAgICAgIDwvT3B0aW9uPlxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8T3B0aW9uIGtleT17aXRlbS5kYXRhU291cmNlSWR9PlxyXG4gICAgICAgICAgICAgIHt0cmFuc2xhdGUoJ2xvYWRpbmcnKX1cclxuICAgICAgICAgICAgPC9PcHRpb24+XHJcbiAgICAgICAgICApXHJcbiAgICAgICAgfSl9XHJcbiAgICAgICAge251bU9mUnVudGltZURzID4gMCAmJiB1c2VEYXRhU291cmNlcy5sZW5ndGggPiAwICYmIDxPcHRpb24gZGl2aWRlci8+fVxyXG4gICAgICAgIHtudW1PZlJ1bnRpbWVEcyA+IDAgJiYgPE9wdGlvbiBoZWFkZXI+e2dldEkxOG5NZXNzYWdlKCdydW50aW1lJyl9PC9PcHRpb24+fVxyXG4gICAgICAgIHtPYmplY3Qua2V5cyhydW50aW1lRGF0YVNvdXJjZXMgPz8ge30pLm1hcChkc0lkID0+IHtcclxuICAgICAgICAgIGNvbnN0IGRzID0gcnVudGltZURhdGFTb3VyY2VzW2RzSWRdXHJcbiAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8T3B0aW9uIGtleT17ZHNJZH0gdmFsdWU9e2RzSWR9IG9uQ2xpY2s9eygpID0+IHsgaGFuZGxlUnVudGltZURhdGFTb3VyY2VDaGFuZ2UoZHNJZCkgfX0+XHJcbiAgICAgICAgICAgICAge2RzLmdldExhYmVsKCl9XHJcbiAgICAgICAgICAgIDwvT3B0aW9uPlxyXG4gICAgICAgICAgKVxyXG4gICAgICAgIH0pfVxyXG4gICAgICA8L1NlbGVjdD5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9J210LTEgZm9udC1pdGFsaWMnIGNzcz17Y3NzYGNvbG9yOiB2YXIoLS1zeXMtY29sb3Itc3VyZmFjZS1wYXBlci1oaW50KTtgfT57Z2V0STE4bk1lc3NhZ2UoJ3NlbGVjdGVkUmVjb3JkcycsIHsgbnVtOiBjb3VudCB9KX08L2Rpdj5cclxuICAgICAge3NwYXRpYWxSZWxhdGlvbnM/Lmxlbmd0aCA+IDAgJiYgKFxyXG4gICAgICAgIDxkaXYgY3NzPXttYXJnaW5TdHlsZX0+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndGV4dC10cnVuY2F0ZSB0aXRsZTMgbWItMCc+e2dldEkxOG5NZXNzYWdlKCdyZWxhdGlvbnNoaXAnKX08L2Rpdj5cclxuICAgICAgICAgIDxTZWxlY3RcclxuICAgICAgICAgICAgYXJpYS1sYWJlbD17Z2V0STE4bk1lc3NhZ2UoJ3JlbGF0aW9uc2hpcCcpfVxyXG4gICAgICAgICAgICB2YWx1ZT17Y3VycmVudFJlbGF0aW9ufVxyXG4gICAgICAgICAgICBvbkNoYW5nZT17aGFuZGxlU3BhdGlhbFJlbGF0aW9uQ2hhbmdlfVxyXG4gICAgICAgICAgPlxyXG4gICAgICAgICAgICB7c3BhdGlhbFJlbGF0aW9ucy5tYXAoKGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgPG9wdGlvbiBrZXk9e2l0ZW19IHZhbHVlPXtpdGVtfT57Z2V0TGFiZWxPZlNwYXRpYWxSZWxhdGlvbihpdGVtKX08L29wdGlvbj5cclxuICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgIH0pfVxyXG4gICAgICAgICAgPC9TZWxlY3Q+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICl9XHJcbiAgICAgIHtlbmFibGVCdWZmZXIgJiYgKFxyXG4gICAgICAgIDxkaXYgcm9sZT0nZ3JvdXAnIGFyaWEtbGFiZWw9e2dldEkxOG5NZXNzYWdlKCd0aGVCdWZmZXJEaXN0YW5jZScpfSBjc3M9e21hcmdpblN0eWxlfT5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd0aXRsZTMgdGV4dC10cnVuY2F0ZSc+e2dldEkxOG5NZXNzYWdlKCd0aGVCdWZmZXJEaXN0YW5jZScpfTwvZGl2PlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2QtZmxleCBtdC0xJz5cclxuICAgICAgICAgICAgPEJ1ZmZlcklucHV0IGRpc3RhbmNlPXtidWZmZXJEaXN0YW5jZX0gdW5pdD17YnVmZmVyVW5pdH0gb25CdWZmZXJDaGFuZ2U9e29uQnVmZmVyQ2hhbmdlfS8+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgKX1cclxuICAgICAgPERhdGFTb3VyY2VDb21wb25lbnQgdXNlRGF0YVNvdXJjZT17Y3VycmVudERhdGFTb3VyY2V9IGRhdGFTb3VyY2U9e3J1bnRpbWVEYXRhU291cmNlfSBvbkRhdGFTb3VyY2VJbmZvQ2hhbmdlPXtoYW5kbGVEYXRhU291cmNlSW5mb0NoYW5nZX0gLz5cclxuICAgICAge3VzZURhdGFTb3VyY2VzLm1hcCgoaXRlbSkgPT4ge1xyXG4gICAgICAgIC8vIG1ha2Ugc3VyZSB0aGUgZGF0YXNvdXJjZSBpcyBjcmVhdGVkXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgIDxEYXRhU291cmNlQ29tcG9uZW50IGtleT17aXRlbS5kYXRhU291cmNlSWR9IHVzZURhdGFTb3VyY2U9e2l0ZW19Lz5cclxuICAgICAgICApXHJcbiAgICAgIH0pfVxyXG4gICAgPC9kaXY+XHJcbiAgKVxyXG59XHJcbiIsIi8qKiBAanN4IGpzeCAqL1xyXG5pbXBvcnQgeyBSZWFjdCwganN4LCBsb2FkQXJjR0lTSlNBUElNb2R1bGUsIHR5cGUgSW1tdXRhYmxlQXJyYXkgfSBmcm9tICdqaW11LWNvcmUnXHJcbmltcG9ydCB7IEppbXVNYXBWaWV3Q29tcG9uZW50LCB0eXBlIEppbXVNYXBWaWV3LCBsb2FkQXJjR0lTSlNBUElNb2R1bGVzIH0gZnJvbSAnamltdS1hcmNnaXMnXHJcbmltcG9ydCB0eXBlIHsgQ3JlYXRlVG9vbFR5cGUgfSBmcm9tICcuLi9jb25maWcnXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFByb3BzIHtcclxuICBtYXBXaWRnZXRJZHM6IEltbXV0YWJsZUFycmF5PHN0cmluZz5cclxuICBjcmVhdGVUb29sVHlwZXM6IEltbXV0YWJsZUFycmF5PENyZWF0ZVRvb2xUeXBlPlxyXG4gIG9uR2VvbWV0cnlDaGFuZ2U6IChnZW9tOiBfX2VzcmkuR2VvbWV0cnksIGxheWVyPzogX19lc3JpLkdyYXBoaWNzTGF5ZXIsIGdyYXBoaWM/OiBfX2VzcmkuR3JhcGhpYywgY2xlYXJBZnRlckFwcGx5PzogYm9vbGVhbikgPT4gdm9pZFxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gR2VvbWV0cnlGcm9tTWFwIChwcm9wczogUHJvcHMpIHtcclxuICBjb25zdCB7IG9uR2VvbWV0cnlDaGFuZ2UsIG1hcFdpZGdldElkcyB9ID0gcHJvcHNcclxuICBjb25zdCBbamltdU1hcFZpZXcsIHNldEppbXVNYXBWaWV3XSA9IFJlYWN0LnVzZVN0YXRlPEppbXVNYXBWaWV3PihudWxsKVxyXG4gIGNvbnN0IFBvbHlnb25SZWYgPSBSZWFjdC51c2VSZWY8dHlwZW9mIF9fZXNyaS5Qb2x5Z29uPihudWxsKVxyXG5cclxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgaWYgKGppbXVNYXBWaWV3Py52aWV3KSB7XHJcbiAgICAgIGxldCBoYW5kbGVyOiBJSGFuZGxlXHJcbiAgICAgIGxvYWRBcmNHSVNKU0FQSU1vZHVsZSgnZXNyaS9jb3JlL3JlYWN0aXZlVXRpbHMnKS50aGVuKChyZWFjdGl2ZVV0aWxzOiBfX2VzcmkucmVhY3RpdmVVdGlscykgPT4ge1xyXG4gICAgICAgIGhhbmRsZXIgPSByZWFjdGl2ZVV0aWxzLndhdGNoKCgpID0+IGppbXVNYXBWaWV3LnZpZXcuZXh0ZW50LCAoZXh0ZW50OiBfX2VzcmkuRXh0ZW50KSA9PiB7XHJcbiAgICAgICAgICBpZiAoUG9seWdvblJlZi5jdXJyZW50KSB7XHJcbiAgICAgICAgICAgIG9uR2VvbWV0cnlDaGFuZ2UoUG9seWdvblJlZi5jdXJyZW50LmZyb21FeHRlbnQoZXh0ZW50KSlcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGxvYWRBcmNHSVNKU0FQSU1vZHVsZXMoWydlc3JpL2dlb21ldHJ5L1BvbHlnb24nXSkudGhlbihtb2R1bGVzID0+IHtcclxuICAgICAgICAgICAgICBQb2x5Z29uUmVmLmN1cnJlbnQgPSBtb2R1bGVzWzBdXHJcbiAgICAgICAgICAgICAgb25HZW9tZXRyeUNoYW5nZShQb2x5Z29uUmVmLmN1cnJlbnQuZnJvbUV4dGVudChleHRlbnQpKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLy8gc2V0IGluaXRpYWwgZXh0ZW50XHJcbiAgICAgICAgb25HZW9tZXRyeUNoYW5nZShqaW11TWFwVmlldy52aWV3LmV4dGVudClcclxuICAgICAgfSlcclxuICAgICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgICBpZiAoaGFuZGxlcikge1xyXG4gICAgICAgICAgaGFuZGxlci5yZW1vdmUoKVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0sIFtqaW11TWFwVmlldywgb25HZW9tZXRyeUNoYW5nZV0pXHJcblxyXG4gIGNvbnN0IGhhbmRsZUppbXVNYXBWaWV3Q2hhbmdlZCA9IFJlYWN0LnVzZUNhbGxiYWNrKChqaW11TWFwVmlldzogSmltdU1hcFZpZXcpID0+IHtcclxuICAgIHNldEppbXVNYXBWaWV3KGppbXVNYXBWaWV3Py52aWV3ICE9IG51bGwgPyBqaW11TWFwVmlldyA6IG51bGwpXHJcbiAgfSwgW10pXHJcblxyXG4gIHJldHVybiAoXHJcbiAgICA8UmVhY3QuRnJhZ21lbnQ+XHJcbiAgICAgIHtcclxuICAgICAgICBtYXBXaWRnZXRJZHM/Lm1hcCgobWFwV2lkZ2V0SWQsIHgpID0+IChcclxuICAgICAgICAgIDxKaW11TWFwVmlld0NvbXBvbmVudFxyXG4gICAgICAgICAgICBrZXk9e3h9IHVzZU1hcFdpZGdldElkPXttYXBXaWRnZXRJZH0gb25BY3RpdmVWaWV3Q2hhbmdlPXtoYW5kbGVKaW11TWFwVmlld0NoYW5nZWR9XHJcbiAgICAgICAgICAvPlxyXG4gICAgICAgICkpXHJcbiAgICAgIH1cclxuICAgIDwvUmVhY3QuRnJhZ21lbnQ+XHJcbiAgKVxyXG59XHJcbiIsIi8qKlxuICogVXRpbGl0eSBmdW5jdGlvbnMgZm9yIG1hbmFnaW5nIGdyYXBoaWNzIGxheWVyIGhpZ2hsaWdodGluZyBpbiBRdWVyeVNpbXBsZSB3aWRnZXQuXG4gKiBQcm92aWRlcyBoaWdobGlnaHRpbmcgdGhhdCB3b3JrcyBpbmRlcGVuZGVudGx5IG9mIGxheWVyIHZpc2liaWxpdHkuXG4gKi9cblxuaW1wb3J0IHR5cGUgeyBEYXRhU291cmNlLCBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLCBGZWF0dXJlRGF0YVJlY29yZCB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IERhdGFTb3VyY2VNYW5hZ2VyIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgbG9hZEFyY0dJU0pTQVBJTW9kdWxlcyB9IGZyb20gJ2ppbXUtYXJjZ2lzJ1xuaW1wb3J0IHsgY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlciB9IGZyb20gJ3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uJ1xuXG5jb25zdCBkZWJ1Z0xvZ2dlciA9IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIoKVxuXG4vLyBHbG9iYWwgc2VxdWVuY2UgY291bnRlciBmb3IgZ3JhcGhpY3Mgb3BlcmF0aW9ucyB0byB0cmFjayB0aW1pbmcgYWNyb3NzIGNhbGxzXG5sZXQgb3BlcmF0aW9uU2VxdWVuY2UgPSAwXG5cbi8qKlxuICogR2V0cyB0aGUgbWFwIHZpZXcgZnJvbSBhIGRhdGEgc291cmNlJ3Mgb3JpZ2luIGxheWVyLlxuICogQWNjZXNzZXMgdGhlIHZpZXcgdGhyb3VnaCB0aGUgRmVhdHVyZUxheWVyJ3MgdmlldyBwcm9wZXJ0eS5cbiAqIEBwYXJhbSBvdXRwdXREUyAtIFRoZSBvdXRwdXQgZGF0YSBzb3VyY2UgKG9yIGFueSBkYXRhIHNvdXJjZSlcbiAqIEByZXR1cm5zIFByb21pc2UgcmVzb2x2aW5nIHRvIE1hcFZpZXcgb3IgU2NlbmVWaWV3LCBvciBudWxsIGlmIG5vdCBhdmFpbGFibGVcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldE1hcFZpZXdGcm9tRGF0YVNvdXJjZShcbiAgb3V0cHV0RFM6IERhdGFTb3VyY2UgfCBudWxsIHwgdW5kZWZpbmVkXG4pOiBQcm9taXNlPF9fZXNyaS5NYXBWaWV3IHwgX19lc3JpLlNjZW5lVmlldyB8IG51bGw+IHtcbiAgY29uc3Qgc2VxID0gKytvcGVyYXRpb25TZXF1ZW5jZVxuICBpZiAoIW91dHB1dERTKSB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgIGV2ZW50OiAnZ2V0TWFwVmlld0Zyb21EYXRhU291cmNlLW5vLW91dHB1dERTJyxcbiAgICAgIHNlcSxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIHRyeSB7XG4gICAgLy8gR2V0IG9yaWdpbiBkYXRhIHNvdXJjZSB0byBhY2Nlc3MgdGhlIGxheWVyXG4gICAgY29uc3Qgb3JpZ2luRGF0YVNvdXJjZXMgPSBvdXRwdXREUy5nZXRPcmlnaW5EYXRhU291cmNlcygpXG4gICAgY29uc3Qgb3JpZ2luRFMgPSBvcmlnaW5EYXRhU291cmNlcz8uWzBdIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgICBcbiAgICBpZiAoIW9yaWdpbkRTKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgICBldmVudDogJ2dldE1hcFZpZXdGcm9tRGF0YVNvdXJjZS1uby1vcmlnaW5EUycsXG4gICAgICAgIG91dHB1dERTSWQ6IG91dHB1dERTLmlkLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cblxuICAgIC8vIEFjY2VzcyB0aGUgRmVhdHVyZUxheWVyIGZyb20gdGhlIGRhdGEgc291cmNlXG4gICAgY29uc3QgbGF5ZXIgPSAob3JpZ2luRFMgYXMgYW55KS5sYXllciB8fCAob3JpZ2luRFMgYXMgYW55KS5nZXRMYXllcj8uKClcbiAgICBpZiAoIWxheWVyKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgICBldmVudDogJ2dldE1hcFZpZXdGcm9tRGF0YVNvdXJjZS1uby1sYXllcicsXG4gICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cblxuICAgIC8vIExvZyBsYXllciBwcm9wZXJ0aWVzIHRvIHVuZGVyc3RhbmQgc3RydWN0dXJlXG4gICAgY29uc3QgbGF5ZXJLZXlzID0gT2JqZWN0LmtleXMobGF5ZXIpLmZpbHRlcihrZXkgPT4gXG4gICAgICAha2V5LnN0YXJ0c1dpdGgoJ18nKSAmJiBcbiAgICAgIHR5cGVvZiAobGF5ZXIgYXMgYW55KVtrZXldICE9PSAnZnVuY3Rpb24nXG4gICAgKS5zbGljZSgwLCAyMCkgLy8gTGltaXQgdG8gZmlyc3QgMjAgcHJvcGVydGllc1xuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICBldmVudDogJ2dldE1hcFZpZXdGcm9tRGF0YVNvdXJjZS1sYXllci1pbnNwZWN0aW9uJyxcbiAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgbGF5ZXJJZDogbGF5ZXIuaWQsXG4gICAgICBsYXllclR5cGU6IGxheWVyLnR5cGUgfHwgJ3Vua25vd24nLFxuICAgICAgbGF5ZXJLZXlzOiBsYXllcktleXMsXG4gICAgICBoYXNMYXllck1hcDogISEobGF5ZXIgYXMgYW55KS5tYXAsXG4gICAgICBoYXNMYXllclZpZXc6ICEhKGxheWVyIGFzIGFueSkudmlldyxcbiAgICAgIGhhc0xheWVyUGFyZW50OiAhIShsYXllciBhcyBhbnkpLnBhcmVudCxcbiAgICAgIGxheWVyTWFwVHlwZTogKGxheWVyIGFzIGFueSkubWFwID8gdHlwZW9mIChsYXllciBhcyBhbnkpLm1hcCA6ICdub25lJyxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG5cbiAgICAvLyBDaGVjayBsYXllci5wYXJlbnQgZm9yIG1hcC92aWV3IGFjY2VzcyAoc2luY2UgaGFzTGF5ZXJQYXJlbnQgaXMgdHJ1ZSlcbiAgICBjb25zdCBwYXJlbnQgPSAobGF5ZXIgYXMgYW55KS5wYXJlbnRcbiAgICBpZiAocGFyZW50KSB7XG4gICAgICAvLyBMb2cgcGFyZW50IHByb3BlcnRpZXNcbiAgICAgIGNvbnN0IHBhcmVudEtleXMgPSBPYmplY3Qua2V5cyhwYXJlbnQpLmZpbHRlcihrZXkgPT4gXG4gICAgICAgICFrZXkuc3RhcnRzV2l0aCgnXycpICYmIFxuICAgICAgICB0eXBlb2YgKHBhcmVudCBhcyBhbnkpW2tleV0gIT09ICdmdW5jdGlvbidcbiAgICAgICkuc2xpY2UoMCwgMjApXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICAgIGV2ZW50OiAnZ2V0TWFwVmlld0Zyb21EYXRhU291cmNlLWxheWVyLXBhcmVudC1pbnNwZWN0aW9uJyxcbiAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgIGxheWVySWQ6IGxheWVyLmlkLFxuICAgICAgICBwYXJlbnRUeXBlOiBwYXJlbnQudHlwZSB8fCAndW5rbm93bicsXG4gICAgICAgIHBhcmVudEtleXM6IHBhcmVudEtleXMsXG4gICAgICAgIGhhc1BhcmVudE1hcDogISEocGFyZW50IGFzIGFueSkubWFwLFxuICAgICAgICBoYXNQYXJlbnRWaWV3OiAhIShwYXJlbnQgYXMgYW55KS52aWV3LFxuICAgICAgICBoYXNQYXJlbnRWaWV3czogISEocGFyZW50IGFzIGFueSkudmlld3MsXG4gICAgICAgIHBhcmVudFZpZXdzTGVuZ3RoOiAocGFyZW50IGFzIGFueSkudmlld3M/Lmxlbmd0aCB8fCAwLFxuICAgICAgICBoYXNQYXJlbnRFeHRlbnQ6ICEhKHBhcmVudCBhcyBhbnkpLmV4dGVudCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgXG4gICAgICAvLyBUcnkgdG8gZ2V0IHZpZXcgZnJvbSBwYXJlbnRcbiAgICAgIGlmICgocGFyZW50IGFzIGFueSkudmlldykge1xuICAgICAgICBjb25zdCB2aWV3ID0gKHBhcmVudCBhcyBhbnkpLnZpZXcgYXMgX19lc3JpLk1hcFZpZXcgfCBfX2VzcmkuU2NlbmVWaWV3XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICAgICAgZXZlbnQ6ICdnZXRNYXBWaWV3RnJvbURhdGFTb3VyY2Utc3VjY2Vzcy12aWEtbGF5ZXItcGFyZW50LXZpZXcnLFxuICAgICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICAgIGxheWVySWQ6IGxheWVyLmlkLFxuICAgICAgICAgIHZpZXdUeXBlOiB2aWV3LnR5cGUgfHwgJ3Vua25vd24nLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gdmlld1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBUcnkgdG8gZ2V0IG1hcCBmcm9tIHBhcmVudCBhbmQgdGhlbiB2aWV3XG4gICAgICBjb25zdCBwYXJlbnRNYXAgPSAocGFyZW50IGFzIGFueSkubWFwXG4gICAgICBpZiAocGFyZW50TWFwKSB7XG4gICAgICAgIGNvbnN0IHZpZXcgPSBwYXJlbnRNYXAudmlldyB8fCBcbiAgICAgICAgICAgICAgICAgICAgIChwYXJlbnRNYXAudmlld3M/LmdldEl0ZW1BdD8uKDApKSB8fFxuICAgICAgICAgICAgICAgICAgICAgKHBhcmVudE1hcC52aWV3cz8ubGVuZ3RoID4gMCA/IHBhcmVudE1hcC52aWV3c1swXSA6IG51bGwpXG4gICAgICAgIGlmICh2aWV3KSB7XG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgICAgICAgIGV2ZW50OiAnZ2V0TWFwVmlld0Zyb21EYXRhU291cmNlLXN1Y2Nlc3MtdmlhLWxheWVyLXBhcmVudC1tYXAnLFxuICAgICAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgICAgICBsYXllcklkOiBsYXllci5pZCxcbiAgICAgICAgICAgIHZpZXdUeXBlOiB2aWV3LnR5cGUgfHwgJ3Vua25vd24nLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgfSlcbiAgICAgICAgICByZXR1cm4gdmlldyBhcyBfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXdcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBQYXJlbnQgbWlnaHQgQkUgdGhlIHZpZXcgKGNoZWNrIGlmIGl0IGhhcyB2aWV3LWxpa2UgcHJvcGVydGllcylcbiAgICAgIGlmIChwYXJlbnQudHlwZSA9PT0gJ21hcCcgfHwgcGFyZW50LnR5cGUgPT09ICdzY2VuZScgfHwgKHBhcmVudCBhcyBhbnkpLmV4dGVudCkge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgICAgIGV2ZW50OiAnZ2V0TWFwVmlld0Zyb21EYXRhU291cmNlLXN1Y2Nlc3MtdmlhLWxheWVyLXBhcmVudC1pcy12aWV3JyxcbiAgICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgICBsYXllcklkOiBsYXllci5pZCxcbiAgICAgICAgICB2aWV3VHlwZTogcGFyZW50LnR5cGUgfHwgJ3Vua25vd24nLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gcGFyZW50IGFzIF9fZXNyaS5NYXBWaWV3IHwgX19lc3JpLlNjZW5lVmlld1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFRyeSBtdWx0aXBsZSBhcHByb2FjaGVzIHRvIGdldCB0aGUgdmlldzpcbiAgICAvLyAxLiBMYXllciBtaWdodCBoYXZlIGEgZGlyZWN0IHZpZXcgcHJvcGVydHlcbiAgICBpZiAoKGxheWVyIGFzIGFueSkudmlldykge1xuICAgICAgY29uc3QgdmlldyA9IChsYXllciBhcyBhbnkpLnZpZXcgYXMgX19lc3JpLk1hcFZpZXcgfCBfX2VzcmkuU2NlbmVWaWV3XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgICBldmVudDogJ2dldE1hcFZpZXdGcm9tRGF0YVNvdXJjZS1zdWNjZXNzLXZpYS1sYXllci12aWV3JyxcbiAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgIGxheWVySWQ6IGxheWVyLmlkLFxuICAgICAgICB2aWV3VHlwZTogdmlldy50eXBlIHx8ICd1bmtub3duJyxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgcmV0dXJuIHZpZXdcbiAgICB9XG5cbiAgICAvLyAyLiBUcnkgdG8gZ2V0IG1hcCBmcm9tIGxheWVyIGFuZCB0aGVuIHZpZXcgZnJvbSBtYXBcbiAgICBjb25zdCBtYXAgPSAobGF5ZXIgYXMgYW55KS5tYXAgfHwgXG4gICAgICAgICAgICAgICAgKGxheWVyIGFzIGFueSkucGFyZW50Py5tYXAgfHxcbiAgICAgICAgICAgICAgICAobGF5ZXIgYXMgYW55KS5fX21hcCB8fFxuICAgICAgICAgICAgICAgIChsYXllciBhcyBhbnkpLl9tYXBcbiAgICBcbiAgICBpZiAobWFwKSB7XG4gICAgICAvLyBMb2cgbWFwIHByb3BlcnRpZXNcbiAgICAgIGNvbnN0IG1hcEtleXMgPSBPYmplY3Qua2V5cyhtYXApLmZpbHRlcihrZXkgPT4gXG4gICAgICAgICFrZXkuc3RhcnRzV2l0aCgnXycpICYmIFxuICAgICAgICB0eXBlb2YgKG1hcCBhcyBhbnkpW2tleV0gIT09ICdmdW5jdGlvbidcbiAgICAgICkuc2xpY2UoMCwgMjApXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICAgIGV2ZW50OiAnZ2V0TWFwVmlld0Zyb21EYXRhU291cmNlLW1hcC1mb3VuZCcsXG4gICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICBsYXllcklkOiBsYXllci5pZCxcbiAgICAgICAgbWFwSWQ6IG1hcC5pZCB8fCAndW5rbm93bicsXG4gICAgICAgIG1hcEtleXM6IG1hcEtleXMsXG4gICAgICAgIGhhc01hcFZpZXc6ICEhbWFwLnZpZXcsXG4gICAgICAgIGhhc01hcFZpZXdzOiAhIShtYXAudmlld3MpLFxuICAgICAgICBtYXBWaWV3c0xlbmd0aDogbWFwLnZpZXdzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgXG4gICAgICBjb25zdCB2aWV3ID0gbWFwLnZpZXcgfHwgXG4gICAgICAgICAgICAgICAgICAgKG1hcC52aWV3cz8uZ2V0SXRlbUF0Py4oMCkpIHx8XG4gICAgICAgICAgICAgICAgICAgKG1hcC52aWV3cz8ubGVuZ3RoID4gMCA/IG1hcC52aWV3c1swXSA6IG51bGwpIHx8XG4gICAgICAgICAgICAgICAgICAgKG1hcC52aWV3cyAmJiBtYXAudmlld3MubGVuZ3RoID4gMCA/IG1hcC52aWV3cy5nZXRJdGVtQXQoMCkgOiBudWxsKVxuICAgICAgXG4gICAgICBpZiAodmlldykge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgICAgIGV2ZW50OiAnZ2V0TWFwVmlld0Zyb21EYXRhU291cmNlLXN1Y2Nlc3MtdmlhLWxheWVyLW1hcCcsXG4gICAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgICAgbGF5ZXJJZDogbGF5ZXIuaWQsXG4gICAgICAgICAgdmlld1R5cGU6IHZpZXcudHlwZSB8fCAndW5rbm93bicsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiB2aWV3IGFzIF9fZXNyaS5NYXBWaWV3IHwgX19lc3JpLlNjZW5lVmlld1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIDMuIFRyeSB0byBnZXQgcm9vdCBkYXRhIHNvdXJjZSBhbmQgYWNjZXNzIG1hcCBmcm9tIHRoZXJlXG4gICAgY29uc3Qgcm9vdERTID0gb3JpZ2luRFMuZ2V0Um9vdERhdGFTb3VyY2UoKVxuICAgIGlmIChyb290RFMpIHtcbiAgICAgIGNvbnN0IHJvb3RNYXAgPSAocm9vdERTIGFzIGFueSkuZ2V0TWFwPy4oKSB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAocm9vdERTIGFzIGFueSkubWFwIHx8XG4gICAgICAgICAgICAgICAgICAgICAgKHJvb3REUyBhcyBhbnkpLl9fbWFwIHx8XG4gICAgICAgICAgICAgICAgICAgICAgKHJvb3REUyBhcyBhbnkpLl9tYXBcbiAgICAgIFxuICAgICAgaWYgKHJvb3RNYXApIHtcbiAgICAgICAgLy8gTG9nIHJvb3QgbWFwIHByb3BlcnRpZXNcbiAgICAgICAgY29uc3Qgcm9vdE1hcEtleXMgPSBPYmplY3Qua2V5cyhyb290TWFwKS5maWx0ZXIoa2V5ID0+IFxuICAgICAgICAgICFrZXkuc3RhcnRzV2l0aCgnXycpICYmIFxuICAgICAgICAgIHR5cGVvZiAocm9vdE1hcCBhcyBhbnkpW2tleV0gIT09ICdmdW5jdGlvbidcbiAgICAgICAgKS5zbGljZSgwLCAyMClcbiAgICAgICAgXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICAgICAgZXZlbnQ6ICdnZXRNYXBWaWV3RnJvbURhdGFTb3VyY2Utcm9vdC1tYXAtZm91bmQnLFxuICAgICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICAgIHJvb3REU0lkOiByb290RFMuaWQsXG4gICAgICAgICAgcm9vdERTVHlwZTogcm9vdERTLnR5cGUsXG4gICAgICAgICAgcm9vdE1hcElkOiByb290TWFwLmlkIHx8ICd1bmtub3duJyxcbiAgICAgICAgICByb290TWFwS2V5czogcm9vdE1hcEtleXMsXG4gICAgICAgICAgaGFzUm9vdE1hcFZpZXc6ICEhcm9vdE1hcC52aWV3LFxuICAgICAgICAgIGhhc1Jvb3RNYXBWaWV3czogISEocm9vdE1hcC52aWV3cyksXG4gICAgICAgICAgcm9vdE1hcFZpZXdzTGVuZ3RoOiByb290TWFwLnZpZXdzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfSlcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHZpZXcgPSByb290TWFwLnZpZXcgfHwgXG4gICAgICAgICAgICAgICAgICAgICAocm9vdE1hcC52aWV3cz8uZ2V0SXRlbUF0Py4oMCkpIHx8XG4gICAgICAgICAgICAgICAgICAgICAocm9vdE1hcC52aWV3cz8ubGVuZ3RoID4gMCA/IHJvb3RNYXAudmlld3NbMF0gOiBudWxsKSB8fFxuICAgICAgICAgICAgICAgICAgICAgKHJvb3RNYXAudmlld3MgJiYgcm9vdE1hcC52aWV3cy5sZW5ndGggPiAwID8gcm9vdE1hcC52aWV3cy5nZXRJdGVtQXQoMCkgOiBudWxsKVxuICAgICAgICBcbiAgICAgICAgaWYgKHZpZXcpIHtcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgICAgICAgZXZlbnQ6ICdnZXRNYXBWaWV3RnJvbURhdGFTb3VyY2Utc3VjY2Vzcy12aWEtcm9vdERTJyxcbiAgICAgICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICAgICAgcm9vdERTSWQ6IHJvb3REUy5pZCxcbiAgICAgICAgICAgIHZpZXdUeXBlOiB2aWV3LnR5cGUgfHwgJ3Vua25vd24nLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgfSlcbiAgICAgICAgICByZXR1cm4gdmlldyBhcyBfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXdcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gTG9nIHJvb3QgRFMgcHJvcGVydGllcyB0byBzZWUgd2hhdCdzIGF2YWlsYWJsZVxuICAgICAgICBjb25zdCByb290RFNLZXlzID0gT2JqZWN0LmtleXMocm9vdERTKS5maWx0ZXIoa2V5ID0+IFxuICAgICAgICAgICFrZXkuc3RhcnRzV2l0aCgnXycpICYmIFxuICAgICAgICAgIHR5cGVvZiAocm9vdERTIGFzIGFueSlba2V5XSAhPT0gJ2Z1bmN0aW9uJ1xuICAgICAgICApLnNsaWNlKDAsIDIwKVxuICAgICAgICBcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgICAgICBldmVudDogJ2dldE1hcFZpZXdGcm9tRGF0YVNvdXJjZS1yb290LWRzLWluc3BlY3Rpb24nLFxuICAgICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICAgIHJvb3REU0lkOiByb290RFMuaWQsXG4gICAgICAgICAgcm9vdERTVHlwZTogcm9vdERTLnR5cGUsXG4gICAgICAgICAgcm9vdERTS2V5czogcm9vdERTS2V5cyxcbiAgICAgICAgICBoYXNHZXRNYXA6IHR5cGVvZiAocm9vdERTIGFzIGFueSkuZ2V0TWFwID09PSAnZnVuY3Rpb24nLFxuICAgICAgICAgIGhhc01hcDogISEocm9vdERTIGFzIGFueSkubWFwLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cblxuICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICBldmVudDogJ2dldE1hcFZpZXdGcm9tRGF0YVNvdXJjZS1uby12aWV3JyxcbiAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgbGF5ZXJJZDogbGF5ZXIuaWQsXG4gICAgICBoYXNMYXllck1hcDogISFtYXAsXG4gICAgICBoYXNSb290RFM6ICEhcm9vdERTLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICByZXR1cm4gbnVsbFxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICBldmVudDogJ2dldE1hcFZpZXdGcm9tRGF0YVNvdXJjZS1lcnJvcicsXG4gICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpLFxuICAgICAgZXJyb3JTdGFjazogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnN0YWNrIDogdW5kZWZpbmVkLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICByZXR1cm4gbnVsbFxuICB9XG59XG5cbi8qKlxuICogR2V0cyB0aGUgZGVmYXVsdCBoaWdobGlnaHQgc3ltYm9sIGJhc2VkIG9uIGdlb21ldHJ5IHR5cGUuXG4gKiBVc2VzIHRoZSBtYXAncyBhY3R1YWwgaGlnaGxpZ2h0IGNvbG9yIGZyb20gaGlnaGxpZ2h0T3B0aW9ucyB0byBtYXRjaCBzdGFuZGFyZCBzZWxlY3Rpb24gYXBwZWFyYW5jZS5cbiAqL1xuZnVuY3Rpb24gZ2V0RGVmYXVsdEhpZ2hsaWdodFN5bWJvbChcbiAgZ2VvbWV0cnlUeXBlOiBzdHJpbmcsXG4gIG1hcFZpZXc6IF9fZXNyaS5NYXBWaWV3IHwgX19lc3JpLlNjZW5lVmlld1xuKTogX19lc3JpLlN5bWJvbCB7XG4gIC8vIEdldCBkZWZhdWx0IGhpZ2hsaWdodCBjb2xvciBmcm9tIHZpZXcncyBoaWdobGlnaHRPcHRpb25zXG4gIGNvbnN0IGhpZ2hsaWdodE9wdGlvbnMgPSAobWFwVmlldy5oaWdobGlnaHRPcHRpb25zIHx8IHt9KSBhcyBfX2VzcmkuSGlnaGxpZ2h0T3B0aW9uc1xuICBcbiAgLy8gRXh0cmFjdCBjb2xvciAtIGNvdWxkIGJlIGFycmF5IFtSLEcsQixBXSBvciBDb2xvciBvYmplY3RcbiAgbGV0IGhpZ2hsaWdodENvbG9yOiBudW1iZXJbXSB8IG51bGwgPSBudWxsXG4gIFxuICBpZiAoaGlnaGxpZ2h0T3B0aW9ucy5jb2xvcikge1xuICAgIC8vIElmIGl0J3MgYSBDb2xvciBvYmplY3QsIGNvbnZlcnQgdG8gYXJyYXlcbiAgICBpZiAodHlwZW9mIGhpZ2hsaWdodE9wdGlvbnMuY29sb3IgPT09ICdvYmplY3QnICYmICd0b1JnYmEnIGluIGhpZ2hsaWdodE9wdGlvbnMuY29sb3IpIHtcbiAgICAgIGhpZ2hsaWdodENvbG9yID0gKGhpZ2hsaWdodE9wdGlvbnMuY29sb3IgYXMgYW55KS50b1JnYmEoKVxuICAgIH0gXG4gICAgLy8gSWYgaXQncyBhbHJlYWR5IGFuIGFycmF5XG4gICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheShoaWdobGlnaHRPcHRpb25zLmNvbG9yKSkge1xuICAgICAgaGlnaGxpZ2h0Q29sb3IgPSBoaWdobGlnaHRPcHRpb25zLmNvbG9yXG4gICAgfVxuICB9XG4gIFxuICAvLyBJZiBubyBjb2xvciBpbiBoaWdobGlnaHRPcHRpb25zLCB1c2UgdGhlIEFyY0dJUyBkb2N1bWVudGVkIGRlZmF1bHQ6IGN5YW4gWzAsIDI1NSwgMjU1XVxuICBpZiAoIWhpZ2hsaWdodENvbG9yKSB7XG4gICAgaGlnaGxpZ2h0Q29sb3IgPSBbMCwgMjU1LCAyNTUsIDEuMF0gLy8gRnVsbCBvcGFjaXR5IGRlZmF1bHRcbiAgfVxuICBcbiAgLy8gRW5zdXJlIHdlIGhhdmUgNCBlbGVtZW50cyBbUiwgRywgQiwgQV1cbiAgY29uc3QgYmFzZUNvbG9yID0gaGlnaGxpZ2h0Q29sb3Iuc2xpY2UoMCwgMylcbiAgY29uc3QgYmFzZUFscGhhID0gaGlnaGxpZ2h0Q29sb3IubGVuZ3RoID49IDQgPyBoaWdobGlnaHRDb2xvclszXSA6IDEuMFxuICBcbiAgLy8gR2V0IGZpbGwgb3BhY2l0eSBmcm9tIGhpZ2hsaWdodE9wdGlvbnMgb3IgdXNlIGRlZmF1bHRcbiAgY29uc3QgZmlsbE9wYWNpdHkgPSBoaWdobGlnaHRPcHRpb25zLmZpbGxPcGFjaXR5ICE9PSB1bmRlZmluZWQgXG4gICAgPyBoaWdobGlnaHRPcHRpb25zLmZpbGxPcGFjaXR5IFxuICAgIDogMC4yNSAvLyBEZWZhdWx0IDI1JSBvcGFjaXR5IGZvciBmaWxsXG4gIGNvbnN0IGZpbGxDb2xvciA9IFsuLi5iYXNlQ29sb3IsIGZpbGxPcGFjaXR5XVxuICBcbiAgLy8gR2V0IGhhbG8gb3BhY2l0eSBvciB1c2UgZGVmYXVsdCAtIGZvciBvdXRsaW5lcyBhbmQgbGluZXNcbiAgY29uc3QgaGFsb09wYWNpdHkgPSBoaWdobGlnaHRPcHRpb25zLmhhbG9PcGFjaXR5ICE9PSB1bmRlZmluZWRcbiAgICA/IGhpZ2hsaWdodE9wdGlvbnMuaGFsb09wYWNpdHlcbiAgICA6IGJhc2VBbHBoYSAvLyBVc2UgdGhlIGNvbG9yJ3MgYWxwaGEgaWYgYXZhaWxhYmxlLCBvdGhlcndpc2UgMS4wXG4gIGNvbnN0IG91dGxpbmVDb2xvciA9IFsuLi5iYXNlQ29sb3IsIGhhbG9PcGFjaXR5XVxuICBcbiAgLy8gRm9yIGxpbmVzLCB1c2UgZnVsbCBvcGFjaXR5IHRvIGVuc3VyZSB2aXNpYmlsaXR5XG4gIGNvbnN0IGxpbmVPcGFjaXR5ID0gaGlnaGxpZ2h0T3B0aW9ucy5oYWxvT3BhY2l0eSAhPT0gdW5kZWZpbmVkXG4gICAgPyBNYXRoLm1heChoaWdobGlnaHRPcHRpb25zLmhhbG9PcGFjaXR5LCAwLjgpIC8vIEF0IGxlYXN0IDgwJSBvcGFjaXR5XG4gICAgOiBiYXNlQWxwaGEgLy8gVXNlIHRoZSBjb2xvcidzIGFscGhhLCBvciBkZWZhdWx0IHRvIDEuMFxuICBjb25zdCBsaW5lQ29sb3IgPSBbLi4uYmFzZUNvbG9yLCBsaW5lT3BhY2l0eV1cbiAgXG4gIHN3aXRjaCAoZ2VvbWV0cnlUeXBlKSB7XG4gICAgY2FzZSAncG9pbnQnOlxuICAgIGNhc2UgJ211bHRpcG9pbnQnOlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ3NpbXBsZS1tYXJrZXInLFxuICAgICAgICBjb2xvcjogb3V0bGluZUNvbG9yLFxuICAgICAgICBvdXRsaW5lOiB7XG4gICAgICAgICAgY29sb3I6IG91dGxpbmVDb2xvcixcbiAgICAgICAgICB3aWR0aDogMlxuICAgICAgICB9LFxuICAgICAgICBzaXplOiAxMlxuICAgICAgfSBhcyB1bmtub3duIGFzIF9fZXNyaS5TaW1wbGVNYXJrZXJTeW1ib2xcbiAgICAgIFxuICAgIGNhc2UgJ3BvbHlsaW5lJzpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdzaW1wbGUtbGluZScsXG4gICAgICAgIGNvbG9yOiBsaW5lQ29sb3IsIC8vIFVzZSBsaW5lQ29sb3Igd2l0aCBwcm9wZXIgb3BhY2l0eVxuICAgICAgICB3aWR0aDogNCAvLyBJbmNyZWFzZWQgd2lkdGggZm9yIHZpc2liaWxpdHlcbiAgICAgIH0gYXMgdW5rbm93biBhcyBfX2VzcmkuU2ltcGxlTGluZVN5bWJvbFxuICAgICAgXG4gICAgY2FzZSAncG9seWdvbic6XG4gICAgY2FzZSAnbXVsdGlwb2x5Z29uJzpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdzaW1wbGUtZmlsbCcsXG4gICAgICAgIGNvbG9yOiBmaWxsQ29sb3IsXG4gICAgICAgIG91dGxpbmU6IHtcbiAgICAgICAgICBjb2xvcjogb3V0bGluZUNvbG9yLFxuICAgICAgICAgIHdpZHRoOiAyXG4gICAgICAgIH1cbiAgICAgIH0gYXMgdW5rbm93biBhcyBfX2VzcmkuU2ltcGxlRmlsbFN5bWJvbFxuICAgICAgXG4gICAgZGVmYXVsdDpcbiAgICAgIC8vIEZhbGxiYWNrIHRvIHBvbHlnb24gc3ltYm9sXG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnc2ltcGxlLWZpbGwnLFxuICAgICAgICBjb2xvcjogZmlsbENvbG9yLFxuICAgICAgICBvdXRsaW5lOiB7XG4gICAgICAgICAgY29sb3I6IG91dGxpbmVDb2xvcixcbiAgICAgICAgICB3aWR0aDogMlxuICAgICAgICB9XG4gICAgICB9IGFzIHVua25vd24gYXMgX19lc3JpLlNpbXBsZUZpbGxTeW1ib2xcbiAgfVxufVxuXG4vKipcbiAqIENyZWF0ZXMgb3IgZ2V0cyBhbiBleGlzdGluZyBncmFwaGljcyBsYXllciBmb3IgdGhlIHdpZGdldC5cbiAqIFVzZXMgYSB1bmlxdWUgSUQgYmFzZWQgb24gd2lkZ2V0IElEIHRvIGVuc3VyZSBvbmUgbGF5ZXIgcGVyIHdpZGdldC5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZU9yR2V0R3JhcGhpY3NMYXllcihcbiAgd2lkZ2V0SWQ6IHN0cmluZyxcbiAgbWFwVmlldzogX19lc3JpLk1hcFZpZXcgfCBfX2VzcmkuU2NlbmVWaWV3XG4pOiBQcm9taXNlPF9fZXNyaS5HcmFwaGljc0xheWVyIHwgbnVsbD4ge1xuICBjb25zdCBzZXEgPSArK29wZXJhdGlvblNlcXVlbmNlXG4gIGNvbnN0IGxheWVySWQgPSBgcXVlcnlzaW1wbGUtaGlnaGxpZ2h0LSR7d2lkZ2V0SWR9YFxuICBcbiAgdHJ5IHtcbiAgICAvLyBDaGVjayBpZiBsYXllciBhbHJlYWR5IGV4aXN0c1xuICAgIGNvbnN0IGV4aXN0aW5nTGF5ZXIgPSBtYXBWaWV3Lm1hcC5sYXllcnMuZmluZChsYXllciA9PiBsYXllci5pZCA9PT0gbGF5ZXJJZCkgYXMgX19lc3JpLkdyYXBoaWNzTGF5ZXJcbiAgICBpZiAoZXhpc3RpbmdMYXllcikge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgICAgZXZlbnQ6ICdjcmVhdGVPckdldEdyYXBoaWNzTGF5ZXItZm91bmQtZXhpc3RpbmcnLFxuICAgICAgICBzZXEsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICBsYXllcklkLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICByZXR1cm4gZXhpc3RpbmdMYXllclxuICAgIH1cblxuICAgIC8vIExvYWQgR3JhcGhpY3NMYXllciBtb2R1bGVcbiAgICBjb25zdCBbR3JhcGhpY3NMYXllcl0gPSBhd2FpdCBsb2FkQXJjR0lTSlNBUElNb2R1bGVzKFsnZXNyaS9sYXllcnMvR3JhcGhpY3NMYXllciddKVxuICAgIFxuICAgIC8vIENyZWF0ZSBuZXcgZ3JhcGhpY3MgbGF5ZXJcbiAgICBjb25zdCBncmFwaGljc0xheWVyID0gbmV3IEdyYXBoaWNzTGF5ZXIoe1xuICAgICAgaWQ6IGxheWVySWQsXG4gICAgICB0aXRsZTogYFF1ZXJ5U2ltcGxlIEhpZ2hsaWdodHMgKCR7d2lkZ2V0SWR9KWAsXG4gICAgICBsaXN0TW9kZTogJ2hpZGUnLCAvLyBIaWRlIGZyb20gbGF5ZXIgbGlzdFxuICAgICAgdmlzaWJsZTogdHJ1ZVxuICAgIH0pXG4gICAgXG4gICAgLy8gQWRkIHRvIG1hcFxuICAgIG1hcFZpZXcubWFwLmFkZChncmFwaGljc0xheWVyKVxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICBldmVudDogJ2NyZWF0ZU9yR2V0R3JhcGhpY3NMYXllci1jcmVhdGVkJyxcbiAgICAgIHNlcSxcbiAgICAgIHdpZGdldElkLFxuICAgICAgbGF5ZXJJZCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgcmV0dXJuIGdyYXBoaWNzTGF5ZXJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgZXZlbnQ6ICdjcmVhdGVPckdldEdyYXBoaWNzTGF5ZXItZXJyb3InLFxuICAgICAgc2VxLFxuICAgICAgd2lkZ2V0SWQsXG4gICAgICBsYXllcklkLFxuICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSxcbiAgICAgIGVycm9yU3RhY2s6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgcmV0dXJuIG51bGxcbiAgfVxufVxuXG4vKipcbiAqIEFkZHMgaGlnaGxpZ2h0IGdyYXBoaWNzIHRvIHRoZSBncmFwaGljcyBsYXllciB1c2luZyBkZWZhdWx0IG1hcCBoaWdobGlnaHQgY29sb3IuXG4gKiBOb3RlOiBUaGlzIGZ1bmN0aW9uIHNob3VsZCBiZSBjYWxsZWQgYWZ0ZXIgR3JhcGhpY3NMYXllciBtb2R1bGUgaXMgbG9hZGVkLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYWRkSGlnaGxpZ2h0R3JhcGhpY3MoXG4gIGdyYXBoaWNzTGF5ZXI6IF9fZXNyaS5HcmFwaGljc0xheWVyLFxuICByZWNvcmRzOiBGZWF0dXJlRGF0YVJlY29yZFtdLFxuICBtYXBWaWV3OiBfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXdcbik6IFByb21pc2U8dm9pZD4ge1xuICBjb25zdCBzZXEgPSArK29wZXJhdGlvblNlcXVlbmNlXG4gIGlmICghZ3JhcGhpY3NMYXllciB8fCAhcmVjb3JkcyB8fCByZWNvcmRzLmxlbmd0aCA9PT0gMCkge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICBldmVudDogJ2FkZEhpZ2hsaWdodEdyYXBoaWNzLXNraXBwZWQnLFxuICAgICAgc2VxLFxuICAgICAgcmVhc29uOiAhZ3JhcGhpY3NMYXllciA/ICduby1ncmFwaGljcy1sYXllcicgOiAnbm8tcmVjb3JkcycsXG4gICAgICByZWNvcmRzQ291bnQ6IHJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICByZXR1cm5cbiAgfVxuXG4gIC8vIExvZyBleGlzdGluZyBzdGF0ZSBCRUZPUkUgYWRkaW5nIC0gdmVyaWZ5IGFzc3VtcHRpb24gYWJvdXQgZHVwbGljYXRlc1xuICBjb25zdCBleGlzdGluZ0dyYXBoaWNzQ291bnQgPSBncmFwaGljc0xheWVyLmdyYXBoaWNzLmxlbmd0aFxuICBjb25zdCBleGlzdGluZ1JlY29yZElkczogc3RyaW5nW10gPSBbXVxuICBjb25zdCBleGlzdGluZ1JlY29yZElkU2V0ID0gbmV3IFNldDxzdHJpbmc+KClcbiAgXG4gIGdyYXBoaWNzTGF5ZXIuZ3JhcGhpY3MuZm9yRWFjaChncmFwaGljID0+IHtcbiAgICBjb25zdCByZWNvcmRJZCA9IGdyYXBoaWMuYXR0cmlidXRlcz8ucmVjb3JkSWRcbiAgICBpZiAocmVjb3JkSWQpIHtcbiAgICAgIGV4aXN0aW5nUmVjb3JkSWRzLnB1c2gocmVjb3JkSWQpXG4gICAgICBleGlzdGluZ1JlY29yZElkU2V0LmFkZChyZWNvcmRJZClcbiAgICB9XG4gIH0pXG5cbiAgLy8gTG9nIHdoYXQgd2UncmUgdHJ5aW5nIHRvIGFkZFxuICBjb25zdCBpbmNvbWluZ1JlY29yZElkcyA9IHJlY29yZHMubWFwKHIgPT4gci5nZXRJZCgpKVxuXG4gIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgZXZlbnQ6ICdhZGRIaWdobGlnaHRHcmFwaGljcy1iZWZvcmUtYWRkJyxcbiAgICBzZXEsXG4gICAgZ3JhcGhpY3NMYXllcklkOiBncmFwaGljc0xheWVyLmlkLFxuICAgIGV4aXN0aW5nR3JhcGhpY3NDb3VudCxcbiAgICBleGlzdGluZ1JlY29yZElkczogZXhpc3RpbmdSZWNvcmRJZHMuc2xpY2UoMCwgMjApLCAvLyBMaW1pdCB0byBmaXJzdCAyMCBmb3IgcmVhZGFiaWxpdHlcbiAgICBleGlzdGluZ1JlY29yZElkc0NvdW50OiBleGlzdGluZ1JlY29yZElkcy5sZW5ndGgsXG4gICAgaW5jb21pbmdSZWNvcmRJZHM6IGluY29taW5nUmVjb3JkSWRzLnNsaWNlKDAsIDIwKSwgLy8gTGltaXQgdG8gZmlyc3QgMjBcbiAgICBpbmNvbWluZ1JlY29yZElkc0NvdW50OiBpbmNvbWluZ1JlY29yZElkcy5sZW5ndGgsXG4gICAgZHVwbGljYXRlUmVjb3JkSWRzOiBpbmNvbWluZ1JlY29yZElkcy5maWx0ZXIoaWQgPT4gZXhpc3RpbmdSZWNvcmRJZFNldC5oYXMoaWQpKS5zbGljZSgwLCAyMCksXG4gICAgZHVwbGljYXRlQ291bnQ6IGluY29taW5nUmVjb3JkSWRzLmZpbHRlcihpZCA9PiBleGlzdGluZ1JlY29yZElkU2V0LmhhcyhpZCkpLmxlbmd0aCxcbiAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgfSlcblxuICAvLyBMb2FkIEdyYXBoaWMgbW9kdWxlXG4gIGNvbnN0IFtHcmFwaGljXSA9IGF3YWl0IGxvYWRBcmNHSVNKU0FQSU1vZHVsZXMoWydlc3JpL0dyYXBoaWMnXSlcblxuICBsZXQgYWRkZWRDb3VudCA9IDBcbiAgbGV0IHNraXBwZWRDb3VudCA9IDBcbiAgbGV0IGR1cGxpY2F0ZUNvdW50ID0gMFxuICBjb25zdCBhZGRlZFJlY29yZElkczogc3RyaW5nW10gPSBbXVxuICBjb25zdCBza2lwcGVkUmVjb3JkSWRzOiBzdHJpbmdbXSA9IFtdXG4gIGNvbnN0IGR1cGxpY2F0ZVJlY29yZElkczogc3RyaW5nW10gPSBbXVxuXG4gIHJlY29yZHMuZm9yRWFjaChyZWNvcmQgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZWNvcmRJZCA9IHJlY29yZC5nZXRJZCgpXG4gICAgICBcbiAgICAgIC8vIENoZWNrIGlmIHRoaXMgcmVjb3JkIElEIGFscmVhZHkgZXhpc3RzIGluIGdyYXBoaWNzIGxheWVyXG4gICAgICBpZiAoZXhpc3RpbmdSZWNvcmRJZFNldC5oYXMocmVjb3JkSWQpKSB7XG4gICAgICAgIGR1cGxpY2F0ZUNvdW50KytcbiAgICAgICAgZHVwbGljYXRlUmVjb3JkSWRzLnB1c2gocmVjb3JkSWQpXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICAgICAgZXZlbnQ6ICdhZGRIaWdobGlnaHRHcmFwaGljcy1kdXBsaWNhdGUtZGV0ZWN0ZWQnLFxuICAgICAgICAgIHNlcSxcbiAgICAgICAgICByZWNvcmRJZCxcbiAgICAgICAgICBncmFwaGljc0xheWVySWQ6IGdyYXBoaWNzTGF5ZXIuaWQsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiAvLyBTa2lwIGFkZGluZyBkdXBsaWNhdGVcbiAgICAgIH1cblxuICAgICAgY29uc3QgZ3JhcGhpYyA9IHJlY29yZC5mZWF0dXJlIGFzIF9fZXNyaS5HcmFwaGljXG4gICAgICBpZiAoIWdyYXBoaWMgfHwgIWdyYXBoaWMuZ2VvbWV0cnkpIHtcbiAgICAgICAgc2tpcHBlZENvdW50KytcbiAgICAgICAgc2tpcHBlZFJlY29yZElkcy5wdXNoKHJlY29yZElkKVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgLy8gR2V0IGdlb21ldHJ5IHR5cGUgZnJvbSBncmFwaGljXG4gICAgICBjb25zdCBnZW9tZXRyeVR5cGUgPSBncmFwaGljLmdlb21ldHJ5LnR5cGVcblxuICAgICAgLy8gQ3JlYXRlIHN5bWJvbCB1c2luZyBkZWZhdWx0IGhpZ2hsaWdodCBjb2xvclxuICAgICAgY29uc3Qgc3ltYm9sID0gZ2V0RGVmYXVsdEhpZ2hsaWdodFN5bWJvbChnZW9tZXRyeVR5cGUsIG1hcFZpZXcpXG5cbiAgICAgIC8vIENyZWF0ZSBuZXcgZ3JhcGhpYyB3aXRoIGhpZ2hsaWdodCBzeW1ib2xcbiAgICAgIGNvbnN0IGhpZ2hsaWdodEdyYXBoaWMgPSBuZXcgR3JhcGhpYyh7XG4gICAgICAgIGdlb21ldHJ5OiBncmFwaGljLmdlb21ldHJ5LFxuICAgICAgICBzeW1ib2w6IHN5bWJvbCxcbiAgICAgICAgYXR0cmlidXRlczoge1xuICAgICAgICAgIHJlY29yZElkOiByZWNvcmRJZCxcbiAgICAgICAgICBzb3VyY2U6ICdxdWVyeXNpbXBsZS1oaWdobGlnaHQnLFxuICAgICAgICAgIHdpZGdldElkOiBncmFwaGljc0xheWVyLmlkLnJlcGxhY2UoJ3F1ZXJ5c2ltcGxlLWhpZ2hsaWdodC0nLCAnJylcbiAgICAgICAgfVxuICAgICAgfSlcblxuICAgICAgZ3JhcGhpY3NMYXllci5hZGQoaGlnaGxpZ2h0R3JhcGhpYylcbiAgICAgIGFkZGVkQ291bnQrK1xuICAgICAgYWRkZWRSZWNvcmRJZHMucHVzaChyZWNvcmRJZClcbiAgICAgIFxuICAgICAgLy8gQWRkIHRvIHRyYWNraW5nIHNldCB0byBwcmV2ZW50IGR1cGxpY2F0ZXMgd2l0aGluIHRoaXMgYmF0Y2hcbiAgICAgIGV4aXN0aW5nUmVjb3JkSWRTZXQuYWRkKHJlY29yZElkKVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBza2lwcGVkQ291bnQrK1xuICAgICAgc2tpcHBlZFJlY29yZElkcy5wdXNoKHJlY29yZC5nZXRJZCgpKVxuICAgICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgICAgZXZlbnQ6ICdhZGRIaWdobGlnaHRHcmFwaGljcy1yZWNvcmQtZXJyb3InLFxuICAgICAgICBzZXEsXG4gICAgICAgIHJlY29yZElkOiByZWNvcmQuZ2V0SWQoKSxcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgIH1cbiAgfSlcblxuICAvLyBMb2cgZmluYWwgc3RhdGUgQUZURVIgYWRkaW5nXG4gIGNvbnN0IGZpbmFsR3JhcGhpY3NDb3VudCA9IGdyYXBoaWNzTGF5ZXIuZ3JhcGhpY3MubGVuZ3RoXG4gIGNvbnN0IGZpbmFsUmVjb3JkSWRzOiBzdHJpbmdbXSA9IFtdXG4gIGdyYXBoaWNzTGF5ZXIuZ3JhcGhpY3MuZm9yRWFjaChncmFwaGljID0+IHtcbiAgICBjb25zdCByZWNvcmRJZCA9IGdyYXBoaWMuYXR0cmlidXRlcz8ucmVjb3JkSWRcbiAgICBpZiAocmVjb3JkSWQpIHtcbiAgICAgIGZpbmFsUmVjb3JkSWRzLnB1c2gocmVjb3JkSWQpXG4gICAgfVxuICB9KVxuXG4gIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgZXZlbnQ6ICdhZGRIaWdobGlnaHRHcmFwaGljcy1jb21wbGV0ZScsXG4gICAgc2VxLFxuICAgIGdyYXBoaWNzTGF5ZXJJZDogZ3JhcGhpY3NMYXllci5pZCxcbiAgICByZWNvcmRzQ291bnQ6IHJlY29yZHMubGVuZ3RoLFxuICAgIGFkZGVkQ291bnQsXG4gICAgc2tpcHBlZENvdW50LFxuICAgIGR1cGxpY2F0ZUNvdW50LFxuICAgIGFkZGVkUmVjb3JkSWRzOiBhZGRlZFJlY29yZElkcy5zbGljZSgwLCAyMCksIC8vIExpbWl0IHRvIGZpcnN0IDIwXG4gICAgc2tpcHBlZFJlY29yZElkczogc2tpcHBlZFJlY29yZElkcy5zbGljZSgwLCAyMCksXG4gICAgZHVwbGljYXRlUmVjb3JkSWRzOiBkdXBsaWNhdGVSZWNvcmRJZHMuc2xpY2UoMCwgMjApLFxuICAgIGV4aXN0aW5nR3JhcGhpY3NDb3VudCxcbiAgICBmaW5hbEdyYXBoaWNzQ291bnQsXG4gICAgZXhwZWN0ZWRGaW5hbENvdW50OiBleGlzdGluZ0dyYXBoaWNzQ291bnQgKyBhZGRlZENvdW50LFxuICAgIGZpbmFsUmVjb3JkSWRzOiBmaW5hbFJlY29yZElkcy5zbGljZSgwLCAyMCksIC8vIExpbWl0IHRvIGZpcnN0IDIwXG4gICAgZmluYWxSZWNvcmRJZHNDb3VudDogZmluYWxSZWNvcmRJZHMubGVuZ3RoLFxuICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICB9KVxufVxuXG4vKipcbiAqIFJlbW92ZXMgaGlnaGxpZ2h0IGdyYXBoaWNzIGZyb20gdGhlIGdyYXBoaWNzIGxheWVyIGJ5IHJlY29yZCBJRHMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVIaWdobGlnaHRHcmFwaGljcyhcbiAgZ3JhcGhpY3NMYXllcjogX19lc3JpLkdyYXBoaWNzTGF5ZXIsXG4gIHJlY29yZElkczogc3RyaW5nW11cbik6IHZvaWQge1xuICBjb25zdCBzZXEgPSArK29wZXJhdGlvblNlcXVlbmNlXG4gIGlmICghZ3JhcGhpY3NMYXllciB8fCAhcmVjb3JkSWRzIHx8IHJlY29yZElkcy5sZW5ndGggPT09IDApIHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgZXZlbnQ6ICdyZW1vdmVIaWdobGlnaHRHcmFwaGljcy1za2lwcGVkJyxcbiAgICAgIHNlcSxcbiAgICAgIHJlYXNvbjogIWdyYXBoaWNzTGF5ZXIgPyAnbm8tZ3JhcGhpY3MtbGF5ZXInIDogJ25vLXJlY29yZC1pZHMnLFxuICAgICAgcmVjb3JkSWRzQ291bnQ6IHJlY29yZElkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIHJldHVyblxuICB9XG5cbiAgY29uc3QgcmVjb3JkSWRTZXQgPSBuZXcgU2V0KHJlY29yZElkcylcbiAgbGV0IHJlbW92ZWRDb3VudCA9IDBcblxuICAvLyBGaW5kIGFuZCByZW1vdmUgZ3JhcGhpY3MgbWF0Y2hpbmcgcmVjb3JkIElEc1xuICBjb25zdCBncmFwaGljc1RvUmVtb3ZlOiBfX2VzcmkuR3JhcGhpY1tdID0gW11cbiAgZ3JhcGhpY3NMYXllci5ncmFwaGljcy5mb3JFYWNoKGdyYXBoaWMgPT4ge1xuICAgIGNvbnN0IHJlY29yZElkID0gZ3JhcGhpYy5hdHRyaWJ1dGVzPy5yZWNvcmRJZFxuICAgIGlmIChyZWNvcmRJZCAmJiByZWNvcmRJZFNldC5oYXMocmVjb3JkSWQpKSB7XG4gICAgICBncmFwaGljc1RvUmVtb3ZlLnB1c2goZ3JhcGhpYylcbiAgICB9XG4gIH0pXG5cbiAgZ3JhcGhpY3NUb1JlbW92ZS5mb3JFYWNoKGdyYXBoaWMgPT4ge1xuICAgIGdyYXBoaWNzTGF5ZXIucmVtb3ZlKGdyYXBoaWMpXG4gICAgcmVtb3ZlZENvdW50KytcbiAgfSlcblxuICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgIGV2ZW50OiAncmVtb3ZlSGlnaGxpZ2h0R3JhcGhpY3MtY29tcGxldGUnLFxuICAgIHNlcSxcbiAgICBncmFwaGljc0xheWVySWQ6IGdyYXBoaWNzTGF5ZXIuaWQsXG4gICAgcmVjb3JkSWRzQ291bnQ6IHJlY29yZElkcy5sZW5ndGgsXG4gICAgcmVtb3ZlZENvdW50LFxuICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICB9KVxufVxuXG4vKipcbiAqIENsZWFycyBhbGwgaGlnaGxpZ2h0IGdyYXBoaWNzIGZyb20gdGhlIGdyYXBoaWNzIGxheWVyLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xlYXJHcmFwaGljc0xheWVyKGdyYXBoaWNzTGF5ZXI6IF9fZXNyaS5HcmFwaGljc0xheWVyKTogdm9pZCB7XG4gIGNvbnN0IHNlcSA9ICsrb3BlcmF0aW9uU2VxdWVuY2VcbiAgaWYgKCFncmFwaGljc0xheWVyKSB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgIGV2ZW50OiAnY2xlYXJHcmFwaGljc0xheWVyLXNraXBwZWQnLFxuICAgICAgc2VxLFxuICAgICAgcmVhc29uOiAnbm8tZ3JhcGhpY3MtbGF5ZXInLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICByZXR1cm5cbiAgfVxuXG4gIGNvbnN0IGdyYXBoaWNzQ291bnQgPSBncmFwaGljc0xheWVyLmdyYXBoaWNzLmxlbmd0aFxuICBncmFwaGljc0xheWVyLnJlbW92ZUFsbCgpXG5cbiAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICBldmVudDogJ2NsZWFyR3JhcGhpY3NMYXllci1jb21wbGV0ZScsXG4gICAgc2VxLFxuICAgIGdyYXBoaWNzTGF5ZXJJZDogZ3JhcGhpY3NMYXllci5pZCxcbiAgICBncmFwaGljc1JlbW92ZWQ6IGdyYXBoaWNzQ291bnQsXG4gICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gIH0pXG59XG5cbi8qKlxuICogUmVtb3ZlcyB0aGUgZ3JhcGhpY3MgbGF5ZXIgZnJvbSB0aGUgbWFwIGFuZCBjbGVhbnMgdXAgcmVmZXJlbmNlcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsZWFudXBHcmFwaGljc0xheWVyKFxuICB3aWRnZXRJZDogc3RyaW5nLFxuICBtYXBWaWV3OiBfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXdcbik6IHZvaWQge1xuICBjb25zdCBzZXEgPSArK29wZXJhdGlvblNlcXVlbmNlXG4gIGNvbnN0IGxheWVySWQgPSBgcXVlcnlzaW1wbGUtaGlnaGxpZ2h0LSR7d2lkZ2V0SWR9YFxuICBcbiAgdHJ5IHtcbiAgICBjb25zdCBncmFwaGljc0xheWVyID0gbWFwVmlldy5tYXAubGF5ZXJzLmZpbmQobGF5ZXIgPT4gbGF5ZXIuaWQgPT09IGxheWVySWQpIGFzIF9fZXNyaS5HcmFwaGljc0xheWVyXG4gICAgaWYgKGdyYXBoaWNzTGF5ZXIpIHtcbiAgICAgIC8vIENsZWFyIGFsbCBncmFwaGljcyBmaXJzdFxuICAgICAgZ3JhcGhpY3NMYXllci5yZW1vdmVBbGwoKVxuICAgICAgXG4gICAgICAvLyBSZW1vdmUgbGF5ZXIgZnJvbSBtYXBcbiAgICAgIG1hcFZpZXcubWFwLnJlbW92ZShncmFwaGljc0xheWVyKVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgICBldmVudDogJ2NsZWFudXBHcmFwaGljc0xheWVyLWNvbXBsZXRlJyxcbiAgICAgICAgc2VxLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgbGF5ZXJJZCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgICBldmVudDogJ2NsZWFudXBHcmFwaGljc0xheWVyLW5vdC1mb3VuZCcsXG4gICAgICAgIHNlcSxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIGxheWVySWQsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgIGV2ZW50OiAnY2xlYW51cEdyYXBoaWNzTGF5ZXItZXJyb3InLFxuICAgICAgc2VxLFxuICAgICAgd2lkZ2V0SWQsXG4gICAgICBsYXllcklkLFxuICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSxcbiAgICAgIGVycm9yU3RhY2s6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gIH1cbn1cblxuIiwiaW1wb3J0IHsgdHlwZSBGZWF0dXJlRGF0YVJlY29yZCB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IFNlbGVjdGlvblR5cGUgfSBmcm9tICcuLi8uLi9jb25maWcnXG5pbXBvcnQgeyBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyIH0gZnJvbSAnd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24nXG5cbmNvbnN0IGRlYnVnTG9nZ2VyID0gY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlcigpXG5cbmludGVyZmFjZSBBY2N1bXVsYXRlZFJlY29yZHNDYWxsYmFja3Mge1xuICBvbk1vZGVDaGFuZ2U/OiAobW9kZTogU2VsZWN0aW9uVHlwZSkgPT4gdm9pZFxuICBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZT86IChyZWNvcmRzOiBGZWF0dXJlRGF0YVJlY29yZFtdKSA9PiB2b2lkXG59XG5cbi8qKlxuICogVXRpbGl0eSB0byBtYW5hZ2UgYWNjdW11bGF0ZWQgcmVjb3JkcyBhbmQgcmVzdWx0cyBtb2RlIHN0YXRlLlxuICogXG4gKiBDZW50cmFsaXplcyBhY2N1bXVsYXRlZCByZWNvcmRzIG1hbmFnZW1lbnQgbG9naWMgZm9yIHRoZSB3aWRnZXQuXG4gKiBIYW5kbGVzIHJlc3VsdHMgbW9kZSBjaGFuZ2VzLCBhY2N1bXVsYXRlZCByZWNvcmRzIHVwZGF0ZXMsIGFuZCBtb2RlIHJlc2V0IGxvZ2ljLlxuICogXG4gKiBQYXJ0IG9mIENodW5rIDU6IEFjY3VtdWxhdGVkIFJlY29yZHMgTWFuYWdlbWVudCBleHRyYWN0aW9uLlxuICogXG4gKiBOb3RlOiBUaGlzIGlzIGEgdXRpbGl0eSBjbGFzcyAobm90IGEgaG9vaykgdG8gd29yayB3aXRoIGNsYXNzIGNvbXBvbmVudHMuXG4gKi9cbmV4cG9ydCBjbGFzcyBBY2N1bXVsYXRlZFJlY29yZHNNYW5hZ2VyIHtcbiAgcHJpdmF0ZSByZXN1bHRzTW9kZTogU2VsZWN0aW9uVHlwZSA9IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uXG4gIHByaXZhdGUgYWNjdW11bGF0ZWRSZWNvcmRzOiBGZWF0dXJlRGF0YVJlY29yZFtdID0gW11cbiAgcHJpdmF0ZSBjYWxsYmFja3M/OiBBY2N1bXVsYXRlZFJlY29yZHNDYWxsYmFja3NcblxuICAvKipcbiAgICogU2V0cyBjYWxsYmFja3MgZm9yIG1vZGUgY2hhbmdlIGFuZCBhY2N1bXVsYXRlZCByZWNvcmRzIGNoYW5nZSBldmVudHMuXG4gICAqIFxuICAgKiBAcGFyYW0gY2FsbGJhY2tzIC0gQ2FsbGJhY2tzIGZvciBtb2RlIGNoYW5nZSBhbmQgYWNjdW11bGF0ZWQgcmVjb3JkcyBjaGFuZ2VcbiAgICovXG4gIHNldENhbGxiYWNrcyhjYWxsYmFja3M6IEFjY3VtdWxhdGVkUmVjb3Jkc0NhbGxiYWNrcyk6IHZvaWQge1xuICAgIHRoaXMuY2FsbGJhY2tzID0gY2FsbGJhY2tzXG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgY3VycmVudCByZXN1bHRzIG1vZGUuXG4gICAqIFxuICAgKiBAcmV0dXJucyBDdXJyZW50IHJlc3VsdHMgbW9kZVxuICAgKi9cbiAgZ2V0UmVzdWx0c01vZGUoKTogU2VsZWN0aW9uVHlwZSB7XG4gICAgcmV0dXJuIHRoaXMucmVzdWx0c01vZGVcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBjdXJyZW50IGFjY3VtdWxhdGVkIHJlY29yZHMuXG4gICAqIFxuICAgKiBAcmV0dXJucyBDdXJyZW50IGFjY3VtdWxhdGVkIHJlY29yZHMgYXJyYXlcbiAgICovXG4gIGdldEFjY3VtdWxhdGVkUmVjb3JkcygpOiBGZWF0dXJlRGF0YVJlY29yZFtdIHtcbiAgICByZXR1cm4gdGhpcy5hY2N1bXVsYXRlZFJlY29yZHNcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBjb3VudCBvZiBhY2N1bXVsYXRlZCByZWNvcmRzLlxuICAgKiBcbiAgICogQHJldHVybnMgTnVtYmVyIG9mIGFjY3VtdWxhdGVkIHJlY29yZHNcbiAgICovXG4gIGdldEFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aFxuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrcyBpZiB0aGUgd2lkZ2V0IGlzIGluIGFjY3VtdWxhdGlvbiBtb2RlIChBZGQgdG8gb3IgUmVtb3ZlIGZyb20pLlxuICAgKiBcbiAgICogQHJldHVybnMgVHJ1ZSBpZiBpbiBhY2N1bXVsYXRpb24gbW9kZSwgZmFsc2Ugb3RoZXJ3aXNlXG4gICAqL1xuICBpc0FjY3VtdWxhdGlvbk1vZGUoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMucmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb24gfHwgXG4gICAgICAgICAgIHRoaXMucmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvblxuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrcyBpZiB0aGVyZSBhcmUgYWNjdW11bGF0ZWQgcmVjb3Jkcy5cbiAgICogXG4gICAqIEByZXR1cm5zIFRydWUgaWYgYWNjdW11bGF0ZWQgcmVjb3JkcyBleGlzdCwgZmFsc2Ugb3RoZXJ3aXNlXG4gICAqL1xuICBoYXNBY2N1bXVsYXRlZFJlY29yZHMoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDBcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIHJlc3VsdHMgbW9kZSBjaGFuZ2UuXG4gICAqIFxuICAgKiBVcGRhdGVzIHRoZSByZXN1bHRzIG1vZGUgYW5kIG9wdGlvbmFsbHkgY2xlYXJzIGFjY3VtdWxhdGVkIHJlY29yZHMgd2hlbiBzd2l0Y2hpbmdcbiAgICogdG8gXCJOZXdcIiBtb2RlLiBBbHNvIGhhbmRsZXMgaGFzaCBwYXJhbWV0ZXIgY29uc3VtcHRpb24gd2hlbiBzd2l0Y2hpbmcgdG8gYWNjdW11bGF0aW9uIG1vZGVzLlxuICAgKiBcbiAgICogQHBhcmFtIHdpZGdldElkIC0gV2lkZ2V0IElEIGZvciBsb2dnaW5nXG4gICAqIEBwYXJhbSBtb2RlIC0gTmV3IHJlc3VsdHMgbW9kZVxuICAgKiBAcGFyYW0gc2hvdWxkQ29uc3VtZUhhc2ggLSBXaGV0aGVyIHRvIGNvbnN1bWUgaGFzaCBwYXJhbWV0ZXIgKGZvciBkZWVwIGxpbmtpbmcpXG4gICAqIEBwYXJhbSBoYXNoU2hvcnRJZCAtIE9wdGlvbmFsIHNob3J0SWQgdG8gY29uc3VtZSBmcm9tIGhhc2hcbiAgICogQHBhcmFtIHJlbW92ZUhhc2hQYXJhbWV0ZXIgLSBPcHRpb25hbCBjYWxsYmFjayB0byByZW1vdmUgaGFzaCBwYXJhbWV0ZXJcbiAgICovXG4gIGhhbmRsZVJlc3VsdHNNb2RlQ2hhbmdlKFxuICAgIHdpZGdldElkOiBzdHJpbmcsXG4gICAgbW9kZTogU2VsZWN0aW9uVHlwZSxcbiAgICBzaG91bGRDb25zdW1lSGFzaDogYm9vbGVhbiA9IGZhbHNlLFxuICAgIGhhc2hTaG9ydElkPzogc3RyaW5nLFxuICAgIHJlbW92ZUhhc2hQYXJhbWV0ZXI/OiAoc2hvcnRJZDogc3RyaW5nKSA9PiB2b2lkXG4gICk6IHsgcmVzdWx0c01vZGU6IFNlbGVjdGlvblR5cGUsIGFjY3VtdWxhdGVkUmVjb3JkczogRmVhdHVyZURhdGFSZWNvcmRbXSB9IHtcbiAgICBjb25zdCBwcmV2aW91c01vZGUgPSB0aGlzLnJlc3VsdHNNb2RlXG4gICAgY29uc3QgY3VycmVudEFjY3VtdWxhdGVkQ291bnQgPSB0aGlzLmFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGhcblxuICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgZXZlbnQ6ICdoYW5kbGVSZXN1bHRzTW9kZUNoYW5nZS10cmlnZ2VyZWQnLFxuICAgICAgd2lkZ2V0SWQsXG4gICAgICBwcmV2aW91c01vZGUsXG4gICAgICBuZXdNb2RlOiBtb2RlLFxuICAgICAgY3VycmVudEFjY3VtdWxhdGVkQ291bnQsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuXG4gICAgLy8gQ29uc3VtZSBkZWVwIGxpbmsgd2hlbiBzd2l0Y2hpbmcgdG8gYWNjdW11bGF0aW9uIG1vZGVzXG4gICAgaWYgKHNob3VsZENvbnN1bWVIYXNoICYmIChtb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uIHx8IG1vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvbikpIHtcbiAgICAgIGlmIChoYXNoU2hvcnRJZCAmJiByZW1vdmVIYXNoUGFyYW1ldGVyKSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSCcsIHtcbiAgICAgICAgICBldmVudDogJ2NvbnN1bWluZy1oYXNoLW9uLW1vZGUtc3dpdGNoJyxcbiAgICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgICBtb2RlLFxuICAgICAgICAgIHNob3J0SWQ6IGhhc2hTaG9ydElkXG4gICAgICAgIH0pXG4gICAgICAgIHJlbW92ZUhhc2hQYXJhbWV0ZXIoaGFzaFNob3J0SWQpXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gSWYgc3dpdGNoaW5nIHRvIFwiTmV3XCIgbW9kZSwgY2xlYXIgYWNjdW11bGF0ZWQgcmVjb3Jkc1xuICAgIGlmIChtb2RlID09PSBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvbikge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAnY2xlYXJpbmctYWNjdW11bGF0ZWQtcmVjb3Jkcy1vbi1tb2RlLXN3aXRjaCcsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICBwcmV2aW91c01vZGVcbiAgICAgIH0pXG4gICAgICB0aGlzLnJlc3VsdHNNb2RlID0gbW9kZVxuICAgICAgdGhpcy5hY2N1bXVsYXRlZFJlY29yZHMgPSBbXVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJlc3VsdHNNb2RlID0gbW9kZVxuICAgIH1cblxuICAgIC8vIFRyaWdnZXIgY2FsbGJhY2tcbiAgICBpZiAodGhpcy5jYWxsYmFja3M/Lm9uTW9kZUNoYW5nZSkge1xuICAgICAgdGhpcy5jYWxsYmFja3Mub25Nb2RlQ2hhbmdlKHRoaXMucmVzdWx0c01vZGUpXG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHJlc3VsdHNNb2RlOiB0aGlzLnJlc3VsdHNNb2RlLFxuICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzOiB0aGlzLmFjY3VtdWxhdGVkUmVjb3Jkc1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIGFjY3VtdWxhdGVkIHJlY29yZHMgY2hhbmdlLlxuICAgKiBcbiAgICogVXBkYXRlcyB0aGUgYWNjdW11bGF0ZWQgcmVjb3JkcyBhcnJheS5cbiAgICogXG4gICAqIEBwYXJhbSB3aWRnZXRJZCAtIFdpZGdldCBJRCBmb3IgbG9nZ2luZ1xuICAgKiBAcGFyYW0gcmVjb3JkcyAtIE5ldyBhY2N1bXVsYXRlZCByZWNvcmRzIGFycmF5XG4gICAqL1xuICBoYW5kbGVBY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2Uod2lkZ2V0SWQ6IHN0cmluZywgcmVjb3JkczogRmVhdHVyZURhdGFSZWNvcmRbXSk6IHZvaWQge1xuICAgIGNvbnN0IHByZXZpb3VzQ291bnQgPSB0aGlzLmFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGhcbiAgICBjb25zdCBuZXdDb3VudCA9IHJlY29yZHMubGVuZ3RoXG5cbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgIGV2ZW50OiAnaGFuZGxlQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlLXRyaWdnZXJlZCcsXG4gICAgICB3aWRnZXRJZCxcbiAgICAgIHByZXZpb3VzQ291bnQsXG4gICAgICBuZXdDb3VudCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG5cbiAgICB0aGlzLmFjY3VtdWxhdGVkUmVjb3JkcyA9IHJlY29yZHNcblxuICAgIC8vIFRyaWdnZXIgY2FsbGJhY2tcbiAgICBpZiAodGhpcy5jYWxsYmFja3M/Lm9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlKSB7XG4gICAgICB0aGlzLmNhbGxiYWNrcy5vbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZSh0aGlzLmFjY3VtdWxhdGVkUmVjb3JkcylcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVzZXRzIG1vZGUgdG8gXCJOZXcgU2VsZWN0aW9uXCIgYW5kIGNsZWFycyBhY2N1bXVsYXRlZCByZWNvcmRzLlxuICAgKiBcbiAgICogQ2FsbGVkIHdoZW4gaGFzaCBwYXJhbWV0ZXJzIGFyZSBkZXRlY3RlZCB0byByZXNldCB0aGUgd2lkZ2V0IHRvIGEgY2xlYW4gc3RhdGUuXG4gICAqIFxuICAgKiBAcGFyYW0gd2lkZ2V0SWQgLSBXaWRnZXQgSUQgZm9yIGxvZ2dpbmdcbiAgICogQHBhcmFtIGN1cnJlbnRNb2RlIC0gQ3VycmVudCBtb2RlIGJlZm9yZSByZXNldFxuICAgKi9cbiAgcmVzZXRNb2RlT25IYXNoRGV0ZWN0aW9uKHdpZGdldElkOiBzdHJpbmcsIGN1cnJlbnRNb2RlOiBTZWxlY3Rpb25UeXBlKTogeyByZXN1bHRzTW9kZTogU2VsZWN0aW9uVHlwZSwgYWNjdW11bGF0ZWRSZWNvcmRzOiBGZWF0dXJlRGF0YVJlY29yZFtdIH0ge1xuICAgIGlmIChjdXJyZW50TW9kZSAhPT0gU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb24pIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSCcsIHtcbiAgICAgICAgZXZlbnQ6ICdtb2RlLXJlc2V0LW5lZWRlZC1vbi1oYXNoLWRldGVjdGlvbicsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICBjdXJyZW50TW9kZSxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgdGhpcy5yZXN1bHRzTW9kZSA9IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uXG4gICAgICB0aGlzLmFjY3VtdWxhdGVkUmVjb3JkcyA9IFtdXG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHJlc3VsdHNNb2RlOiB0aGlzLnJlc3VsdHNNb2RlLFxuICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzOiB0aGlzLmFjY3VtdWxhdGVkUmVjb3Jkc1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhbnMgdXAgdGhlIG1hbmFnZXIuXG4gICAqIFxuICAgKiBSZXNldHMgc3RhdGUgdG8gaW5pdGlhbCB2YWx1ZXMuXG4gICAqL1xuICBjbGVhbnVwKCk6IHZvaWQge1xuICAgIHRoaXMucmVzdWx0c01vZGUgPSBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvblxuICAgIHRoaXMuYWNjdW11bGF0ZWRSZWNvcmRzID0gW11cbiAgICB0aGlzLmNhbGxiYWNrcyA9IHVuZGVmaW5lZFxuICB9XG59XG5cblxuIiwiaW1wb3J0IHsgY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlciB9IGZyb20gJ3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uJ1xuXG5jb25zdCBkZWJ1Z0xvZ2dlciA9IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIoKVxuXG4vKipcbiAqIEV2ZW50IG5hbWUgY29uc3RhbnRzIGZvciBRdWVyeVNpbXBsZSB3aWRnZXQgZXZlbnRzLlxuICovXG5leHBvcnQgY29uc3QgUVVFUllTSU1QTEVfU0VMRUNUSU9OX0VWRU5UID0gJ3F1ZXJ5c2ltcGxlLXNlbGVjdGlvbi1jaGFuZ2VkJ1xuZXhwb3J0IGNvbnN0IFJFU1RPUkVfT05fSURFTlRJRllfQ0xPU0VfRVZFTlQgPSAncXVlcnlzaW1wbGUtcmVzdG9yZS1vbi1pZGVudGlmeS1jbG9zZSdcbmV4cG9ydCBjb25zdCBPUEVOX1dJREdFVF9FVkVOVCA9ICdoZWxwZXJzaW1wbGUtb3Blbi13aWRnZXQnXG5cbi8qKlxuICogRXZlbnQgaGFuZGxlciBjYWxsYmFja3MgZm9yIEV2ZW50TWFuYWdlci5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBFdmVudEhhbmRsZXJzIHtcbiAgb25PcGVuV2lkZ2V0RXZlbnQ/OiAoZXZlbnQ6IEN1c3RvbUV2ZW50KSA9PiB2b2lkXG4gIG9uU2VsZWN0aW9uQ2hhbmdlPzogKGV2ZW50OiBFdmVudCkgPT4gdm9pZFxuICBvblJlc3RvcmVPbklkZW50aWZ5Q2xvc2U/OiAoZXZlbnQ6IEV2ZW50KSA9PiB2b2lkXG59XG5cbi8qKlxuICogVXRpbGl0eSB0byBtYW5hZ2UgZXZlbnQgbGlzdGVuZXJzIGFuZCBjdXN0b20gZXZlbnQgZGlzcGF0Y2hpbmcuXG4gKiBcbiAqIENlbnRyYWxpemVzIGV2ZW50IGhhbmRsaW5nIGxvZ2ljIGZvciB0aGUgd2lkZ2V0LCBpbmNsdWRpbmc6XG4gKiAtIEV2ZW50IGxpc3RlbmVyIHNldHVwL2NsZWFudXBcbiAqIC0gQ3VzdG9tIGV2ZW50IGRpc3BhdGNoaW5nXG4gKiAtIEV2ZW50IGhhbmRsZXIgcmVnaXN0cmF0aW9uXG4gKiBcbiAqIFBhcnQgb2YgQ2h1bmsgNzogRXZlbnQgSGFuZGxpbmcgZXh0cmFjdGlvbi5cbiAqIFxuICogTm90ZTogVGhpcyBpcyBhIHV0aWxpdHkgY2xhc3MgKG5vdCBhIGhvb2spIHRvIHdvcmsgd2l0aCBjbGFzcyBjb21wb25lbnRzLlxuICovXG5leHBvcnQgY2xhc3MgRXZlbnRNYW5hZ2VyIHtcbiAgcHJpdmF0ZSBoYW5kbGVycz86IEV2ZW50SGFuZGxlcnNcbiAgcHJpdmF0ZSBsaXN0ZW5lcnNTZXR1cDogYm9vbGVhbiA9IGZhbHNlXG5cbiAgLyoqXG4gICAqIFNldHMgZXZlbnQgaGFuZGxlciBjYWxsYmFja3MuXG4gICAqIFxuICAgKiBAcGFyYW0gaGFuZGxlcnMgLSBFdmVudCBoYW5kbGVyIGNhbGxiYWNrc1xuICAgKi9cbiAgc2V0SGFuZGxlcnMoaGFuZGxlcnM6IEV2ZW50SGFuZGxlcnMpOiB2b2lkIHtcbiAgICB0aGlzLmhhbmRsZXJzID0gaGFuZGxlcnNcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHVwIGFsbCBldmVudCBsaXN0ZW5lcnMuXG4gICAqIFxuICAgKiBSZWdpc3RlcnMgbGlzdGVuZXJzIGZvcjpcbiAgICogLSBPUEVOX1dJREdFVF9FVkVOVDogSGVscGVyU2ltcGxlIG9yY2hlc3RyYXRpb25cbiAgICogLSBRVUVSWVNJTVBMRV9TRUxFQ1RJT05fRVZFTlQ6IFNlbGVjdGlvbiBjaGFuZ2VzIGZyb20gUXVlcnlUYXNrUmVzdWx0XG4gICAqIC0gUkVTVE9SRV9PTl9JREVOVElGWV9DTE9TRV9FVkVOVDogUmVzdG9yZSBzZWxlY3Rpb24gYWZ0ZXIgaWRlbnRpZnkgcG9wdXAgY2xvc2VzXG4gICAqIFxuICAgKiBAcGFyYW0gd2lkZ2V0SWQgLSBXaWRnZXQgSUQgZm9yIGxvZ2dpbmdcbiAgICovXG4gIHNldHVwKHdpZGdldElkOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5saXN0ZW5lcnNTZXR1cCkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdFVkVOVFMnLCB7XG4gICAgICAgIGV2ZW50OiAnZXZlbnQtbWFuYWdlci1zZXR1cC1hbHJlYWR5LXNldHVwJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGRlYnVnTG9nZ2VyLmxvZygnRVZFTlRTJywge1xuICAgICAgZXZlbnQ6ICdldmVudC1tYW5hZ2VyLXNldHVwLXN0YXJ0JyxcbiAgICAgIHdpZGdldElkLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcblxuICAgIC8vIExpc3RlbiBmb3IgSGVscGVyU2ltcGxlIG9yY2hlc3RyYXRpb24gZXZlbnRzXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoT1BFTl9XSURHRVRfRVZFTlQsIHRoaXMuaGFuZGxlT3BlbldpZGdldEV2ZW50Qm91bmQpXG4gICAgXG4gICAgLy8gTGlzdGVuIGZvciBzZWxlY3Rpb24gY2hhbmdlcyBmcm9tIHF1ZXJ5LXJlc3VsdFxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFFVRVJZU0lNUExFX1NFTEVDVElPTl9FVkVOVCwgdGhpcy5oYW5kbGVTZWxlY3Rpb25DaGFuZ2VCb3VuZClcbiAgICBcbiAgICAvLyBMaXN0ZW4gZm9yIHJlc3RvcmUgcmVxdWVzdHMgd2hlbiBpZGVudGlmeSBwb3B1cCBjbG9zZXNcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihSRVNUT1JFX09OX0lERU5USUZZX0NMT1NFX0VWRU5ULCB0aGlzLmhhbmRsZVJlc3RvcmVPbklkZW50aWZ5Q2xvc2VCb3VuZClcblxuICAgIHRoaXMubGlzdGVuZXJzU2V0dXAgPSB0cnVlXG5cbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0VWRU5UUycsIHtcbiAgICAgIGV2ZW50OiAnZXZlbnQtbWFuYWdlci1zZXR1cC1jb21wbGV0ZScsXG4gICAgICB3aWRnZXRJZCxcbiAgICAgIGxpc3RlbmVyc1JlZ2lzdGVyZWQ6IDMsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqIENsZWFucyB1cCBhbGwgZXZlbnQgbGlzdGVuZXJzLlxuICAgKiBcbiAgICogQHBhcmFtIHdpZGdldElkIC0gV2lkZ2V0IElEIGZvciBsb2dnaW5nXG4gICAqL1xuICBjbGVhbnVwKHdpZGdldElkOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMubGlzdGVuZXJzU2V0dXApIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRVZFTlRTJywge1xuICAgICAgICBldmVudDogJ2V2ZW50LW1hbmFnZXItY2xlYW51cC1ub3Qtc2V0dXAnLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgZGVidWdMb2dnZXIubG9nKCdFVkVOVFMnLCB7XG4gICAgICBldmVudDogJ2V2ZW50LW1hbmFnZXItY2xlYW51cC1zdGFydCcsXG4gICAgICB3aWRnZXRJZCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG5cbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihPUEVOX1dJREdFVF9FVkVOVCwgdGhpcy5oYW5kbGVPcGVuV2lkZ2V0RXZlbnRCb3VuZClcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihRVUVSWVNJTVBMRV9TRUxFQ1RJT05fRVZFTlQsIHRoaXMuaGFuZGxlU2VsZWN0aW9uQ2hhbmdlQm91bmQpXG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoUkVTVE9SRV9PTl9JREVOVElGWV9DTE9TRV9FVkVOVCwgdGhpcy5oYW5kbGVSZXN0b3JlT25JZGVudGlmeUNsb3NlQm91bmQpXG5cbiAgICB0aGlzLmxpc3RlbmVyc1NldHVwID0gZmFsc2VcbiAgICB0aGlzLmhhbmRsZXJzID0gdW5kZWZpbmVkXG5cbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0VWRU5UUycsIHtcbiAgICAgIGV2ZW50OiAnZXZlbnQtbWFuYWdlci1jbGVhbnVwLWNvbXBsZXRlJyxcbiAgICAgIHdpZGdldElkLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBEaXNwYXRjaGVzIGEgY3VzdG9tIGV2ZW50IHRvIG5vdGlmeSBIZWxwZXJTaW1wbGUgb2Ygc2VsZWN0aW9uIGNoYW5nZXMuXG4gICAqIFxuICAgKiBAcGFyYW0gd2lkZ2V0SWQgLSBXaWRnZXQgSURcbiAgICogQHBhcmFtIHJlY29yZElkcyAtIEFycmF5IG9mIHNlbGVjdGVkIHJlY29yZCBJRHNcbiAgICogQHBhcmFtIGRhdGFTb3VyY2VJZCAtIE9wdGlvbmFsIGRhdGEgc291cmNlIElEXG4gICAqIEBwYXJhbSBvdXRwdXREc0lkIC0gT3V0cHV0IGRhdGEgc291cmNlIElEIChyZXF1aXJlZCBmb3IgbGFzdFNlbGVjdGlvbiBzdGF0ZSlcbiAgICogQHBhcmFtIHF1ZXJ5SXRlbUNvbmZpZ0lkIC0gUXVlcnkgaXRlbSBjb25maWcgSUQgKHJlcXVpcmVkIGZvciBsYXN0U2VsZWN0aW9uIHN0YXRlKVxuICAgKi9cbiAgZGlzcGF0Y2hTZWxlY3Rpb25FdmVudChcbiAgICB3aWRnZXRJZDogc3RyaW5nLCBcbiAgICByZWNvcmRJZHM6IHN0cmluZ1tdLCBcbiAgICBkYXRhU291cmNlSWQ/OiBzdHJpbmcsXG4gICAgb3V0cHV0RHNJZD86IHN0cmluZyxcbiAgICBxdWVyeUl0ZW1Db25maWdJZD86IHN0cmluZ1xuICApOiB2b2lkIHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0VWRU5UUycsIHtcbiAgICAgIGV2ZW50OiAnZXZlbnQtbWFuYWdlci1kaXNwYXRjaC1zZWxlY3Rpb24tZXZlbnQnLFxuICAgICAgd2lkZ2V0SWQsXG4gICAgICByZWNvcmRJZHNDb3VudDogcmVjb3JkSWRzLmxlbmd0aCxcbiAgICAgIGRhdGFTb3VyY2VJZCxcbiAgICAgIG91dHB1dERzSWQsXG4gICAgICBxdWVyeUl0ZW1Db25maWdJZCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG5cbiAgICBjb25zdCBldmVudCA9IG5ldyBDdXN0b21FdmVudChRVUVSWVNJTVBMRV9TRUxFQ1RJT05fRVZFTlQsIHtcbiAgICAgIGRldGFpbDoge1xuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgcmVjb3JkSWRzLFxuICAgICAgICBkYXRhU291cmNlSWQsXG4gICAgICAgIG91dHB1dERzSWQsXG4gICAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkXG4gICAgICB9LFxuICAgICAgYnViYmxlczogdHJ1ZSxcbiAgICAgIGNhbmNlbGFibGU6IHRydWVcbiAgICB9KVxuICAgIFxuICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KGV2ZW50KVxuXG4gICAgZGVidWdMb2dnZXIubG9nKCdFVkVOVFMnLCB7XG4gICAgICBldmVudDogJ2V2ZW50LW1hbmFnZXItc2VsZWN0aW9uLWV2ZW50LWRpc3BhdGNoZWQnLFxuICAgICAgd2lkZ2V0SWQsXG4gICAgICByZWNvcmRJZHNDb3VudDogcmVjb3JkSWRzLmxlbmd0aCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICogQ2hlY2tzIGlmIGV2ZW50IGxpc3RlbmVycyBhcmUgY3VycmVudGx5IHNldCB1cC5cbiAgICogXG4gICAqIEByZXR1cm5zIFRydWUgaWYgbGlzdGVuZXJzIGFyZSBzZXQgdXAsIGZhbHNlIG90aGVyd2lzZVxuICAgKi9cbiAgaXNTZXR1cCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5saXN0ZW5lcnNTZXR1cFxuICB9XG5cbiAgLyoqXG4gICAqIEJvdW5kIGV2ZW50IGhhbmRsZXIgZm9yIE9QRU5fV0lER0VUX0VWRU5ULlxuICAgKi9cbiAgcHJpdmF0ZSBoYW5kbGVPcGVuV2lkZ2V0RXZlbnRCb3VuZCA9IChldmVudDogRXZlbnQpID0+IHtcbiAgICBpZiAodGhpcy5oYW5kbGVycz8ub25PcGVuV2lkZ2V0RXZlbnQpIHtcbiAgICAgIHRoaXMuaGFuZGxlcnMub25PcGVuV2lkZ2V0RXZlbnQoZXZlbnQgYXMgQ3VzdG9tRXZlbnQpXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEJvdW5kIGV2ZW50IGhhbmRsZXIgZm9yIFFVRVJZU0lNUExFX1NFTEVDVElPTl9FVkVOVC5cbiAgICovXG4gIHByaXZhdGUgaGFuZGxlU2VsZWN0aW9uQ2hhbmdlQm91bmQgPSAoZXZlbnQ6IEV2ZW50KSA9PiB7XG4gICAgaWYgKHRoaXMuaGFuZGxlcnM/Lm9uU2VsZWN0aW9uQ2hhbmdlKSB7XG4gICAgICB0aGlzLmhhbmRsZXJzLm9uU2VsZWN0aW9uQ2hhbmdlKGV2ZW50KVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBCb3VuZCBldmVudCBoYW5kbGVyIGZvciBSRVNUT1JFX09OX0lERU5USUZZX0NMT1NFX0VWRU5ULlxuICAgKi9cbiAgcHJpdmF0ZSBoYW5kbGVSZXN0b3JlT25JZGVudGlmeUNsb3NlQm91bmQgPSAoZXZlbnQ6IEV2ZW50KSA9PiB7XG4gICAgaWYgKHRoaXMuaGFuZGxlcnM/Lm9uUmVzdG9yZU9uSWRlbnRpZnlDbG9zZSkge1xuICAgICAgdGhpcy5oYW5kbGVycy5vblJlc3RvcmVPbklkZW50aWZ5Q2xvc2UoZXZlbnQpXG4gICAgfVxuICB9XG59XG5cbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCdcbmltcG9ydCB7IHR5cGUgQWxsV2lkZ2V0UHJvcHMsIHR5cGUgRGF0YVNvdXJjZSB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IHR5cGUgSU1Db25maWcgfSBmcm9tICcuLi8uLi9jb25maWcnXG5pbXBvcnQgeyBjcmVhdGVPckdldEdyYXBoaWNzTGF5ZXIsIGNsZWFudXBHcmFwaGljc0xheWVyIH0gZnJvbSAnLi4vZ3JhcGhpY3MtbGF5ZXItdXRpbHMnXG5pbXBvcnQgeyBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyIH0gZnJvbSAnd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24nXG5cbmNvbnN0IGRlYnVnTG9nZ2VyID0gY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlcigpXG5cbmludGVyZmFjZSBHcmFwaGljc0xheWVyQ2FsbGJhY2tzIHtcbiAgb25HcmFwaGljc0xheWVySW5pdGlhbGl6ZWQ/OiAoZ3JhcGhpY3NMYXllcjogX19lc3JpLkdyYXBoaWNzTGF5ZXIpID0+IHZvaWRcbiAgb25HcmFwaGljc0xheWVyQ2xlYW5lZD86ICgpID0+IHZvaWRcbn1cblxuLyoqXG4gKiBVdGlsaXR5IHRvIG1hbmFnZSBncmFwaGljcyBsYXllciBpbml0aWFsaXphdGlvbiBhbmQgY2xlYW51cC5cbiAqIFxuICogQ2VudHJhbGl6ZXMgZ3JhcGhpY3MgbGF5ZXIgbWFuYWdlbWVudCBsb2dpYyBmb3IgdGhlIHdpZGdldC5cbiAqIEhhbmRsZXMgZ3JhcGhpY3MgbGF5ZXIgY3JlYXRpb24sIGluaXRpYWxpemF0aW9uLCBhbmQgY2xlYW51cC5cbiAqIFxuICogUGFydCBvZiBDaHVuayA0OiBHcmFwaGljcyBMYXllciBNYW5hZ2VtZW50IGV4dHJhY3Rpb24uXG4gKiBcbiAqIE5vdGU6IFRoaXMgaXMgYSB1dGlsaXR5IGNsYXNzIChub3QgYSBob29rKSB0byB3b3JrIHdpdGggY2xhc3MgY29tcG9uZW50cy5cbiAqL1xuZXhwb3J0IGNsYXNzIEdyYXBoaWNzTGF5ZXJNYW5hZ2VyIHtcbiAgcHJpdmF0ZSBncmFwaGljc0xheWVyUmVmOiBSZWFjdC5SZWZPYmplY3Q8X19lc3JpLkdyYXBoaWNzTGF5ZXIgfCBudWxsPlxuICBwcml2YXRlIG1hcFZpZXdSZWY6IFJlYWN0LlJlZk9iamVjdDxfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXcgfCBudWxsPlxuXG4gIGNvbnN0cnVjdG9yKFxuICAgIGdyYXBoaWNzTGF5ZXJSZWY6IFJlYWN0LlJlZk9iamVjdDxfX2VzcmkuR3JhcGhpY3NMYXllciB8IG51bGw+LFxuICAgIG1hcFZpZXdSZWY6IFJlYWN0LlJlZk9iamVjdDxfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXcgfCBudWxsPlxuICApIHtcbiAgICB0aGlzLmdyYXBoaWNzTGF5ZXJSZWYgPSBncmFwaGljc0xheWVyUmVmXG4gICAgdGhpcy5tYXBWaWV3UmVmID0gbWFwVmlld1JlZlxuICB9XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemVzIHRoZSBncmFwaGljcyBsYXllciBmb3IgbWFwIGhpZ2hsaWdodGluZy5cbiAgICogXG4gICAqIENyZWF0ZXMgb3IgcmV0cmlldmVzIGEgZ3JhcGhpY3MgbGF5ZXIgYW5kIGFkZHMgaXQgdG8gdGhlIG1hcCB2aWV3LlxuICAgKiBcbiAgICogQHBhcmFtIHdpZGdldElkIC0gV2lkZ2V0IElEIGZvciBncmFwaGljcyBsYXllciBuYW1pbmdcbiAgICogQHBhcmFtIG1hcFZpZXcgLSBUaGUgQXJjR0lTIE1hcFZpZXcgb3IgU2NlbmVWaWV3IGluc3RhbmNlXG4gICAqIEBwYXJhbSBjYWxsYmFja3MgLSBPcHRpb25hbCBjYWxsYmFja3MgZm9yIGluaXRpYWxpemF0aW9uIGV2ZW50c1xuICAgKiBcbiAgICogQHJldHVybnMgUHJvbWlzZSByZXNvbHZpbmcgdG8gdGhlIGdyYXBoaWNzIGxheWVyLCBvciBudWxsIGlmIGluaXRpYWxpemF0aW9uIGZhaWxlZFxuICAgKi9cbiAgYXN5bmMgaW5pdGlhbGl6ZShcbiAgICB3aWRnZXRJZDogc3RyaW5nLFxuICAgIG1hcFZpZXc6IF9fZXNyaS5NYXBWaWV3IHwgX19lc3JpLlNjZW5lVmlldyxcbiAgICBjYWxsYmFja3M/OiBHcmFwaGljc0xheWVyQ2FsbGJhY2tzXG4gICk6IFByb21pc2U8X19lc3JpLkdyYXBoaWNzTGF5ZXIgfCBudWxsPiB7XG4gICAgLy8gQ2h1bmsgNDogQ29tcGFyaXNvbiBsb2dnaW5nIC0gbmV3IGltcGxlbWVudGF0aW9uXG4gICAgY29uc3QgbmV3U3RhdGVCZWZvcmUgPSB7XG4gICAgICBoYXNHcmFwaGljc0xheWVyOiAhIXRoaXMuZ3JhcGhpY3NMYXllclJlZi5jdXJyZW50LFxuICAgICAgZ3JhcGhpY3NMYXllcklkOiB0aGlzLmdyYXBoaWNzTGF5ZXJSZWYuY3VycmVudD8uaWQgfHwgbnVsbCxcbiAgICAgIGhhc01hcFZpZXc6ICEhdGhpcy5tYXBWaWV3UmVmLmN1cnJlbnQsXG4gICAgICB2aWV3VHlwZTogdGhpcy5tYXBWaWV3UmVmLmN1cnJlbnQ/LnR5cGUgfHwgbnVsbFxuICAgIH1cbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0NIVU5LLTQtQ09NUEFSRScsIHtcbiAgICAgIGV2ZW50OiAnbmV3LWltcGxlbWVudGF0aW9uLWluaXRpYWxpemVHcmFwaGljc0xheWVyLWJlZm9yZScsXG4gICAgICB3aWRnZXRJZCxcbiAgICAgIG5ld0ltcGxlbWVudGF0aW9uOiB7XG4gICAgICAgIHN0YXRlQmVmb3JlOiBuZXdTdGF0ZUJlZm9yZSxcbiAgICAgICAgbWFwVmlld1R5cGU6IG1hcFZpZXcudHlwZSB8fCAndW5rbm93bicsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfVxuICAgIH0pXG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIC8vIENyZWF0ZSBvciBnZXQgZ3JhcGhpY3MgbGF5ZXJcbiAgICAgIGNvbnN0IGdyYXBoaWNzTGF5ZXIgPSBhd2FpdCBjcmVhdGVPckdldEdyYXBoaWNzTGF5ZXIod2lkZ2V0SWQsIG1hcFZpZXcpXG4gICAgICBpZiAoIWdyYXBoaWNzTGF5ZXIpIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdDSFVOSy00LUNPTVBBUkUnLCB7XG4gICAgICAgICAgZXZlbnQ6ICduZXctaW1wbGVtZW50YXRpb24taW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXItZmFpbGVkJyxcbiAgICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgICBuZXdJbXBsZW1lbnRhdGlvbjoge1xuICAgICAgICAgICAgc3RhdGVCZWZvcmU6IG5ld1N0YXRlQmVmb3JlLFxuICAgICAgICAgICAgcmVzdWx0OiAnZmFpbGVkJyxcbiAgICAgICAgICAgIHJlYXNvbjogJ2dyYXBoaWNzLWxheWVyLWNyZWF0aW9uLWZhaWxlZCcsXG4gICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiBudWxsXG4gICAgICB9XG5cbiAgICAgIC8vIFN0b3JlIHJlZmVyZW5jZXNcbiAgICAgIHRoaXMubWFwVmlld1JlZi5jdXJyZW50ID0gbWFwVmlld1xuICAgICAgdGhpcy5ncmFwaGljc0xheWVyUmVmLmN1cnJlbnQgPSBncmFwaGljc0xheWVyXG5cbiAgICAgIGNvbnN0IG5ld1N0YXRlQWZ0ZXIgPSB7XG4gICAgICAgIGhhc0dyYXBoaWNzTGF5ZXI6ICEhdGhpcy5ncmFwaGljc0xheWVyUmVmLmN1cnJlbnQsXG4gICAgICAgIGdyYXBoaWNzTGF5ZXJJZDogdGhpcy5ncmFwaGljc0xheWVyUmVmLmN1cnJlbnQ/LmlkIHx8IG51bGwsXG4gICAgICAgIGhhc01hcFZpZXc6ICEhdGhpcy5tYXBWaWV3UmVmLmN1cnJlbnQsXG4gICAgICAgIHZpZXdUeXBlOiB0aGlzLm1hcFZpZXdSZWYuY3VycmVudD8udHlwZSB8fCBudWxsXG4gICAgICB9XG5cbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnQ0hVTkstNC1DT01QQVJFJywge1xuICAgICAgICBldmVudDogJ25ldy1pbXBsZW1lbnRhdGlvbi1pbml0aWFsaXplR3JhcGhpY3NMYXllci1zdWNjZXNzJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIG5ld0ltcGxlbWVudGF0aW9uOiB7XG4gICAgICAgICAgc3RhdGVCZWZvcmU6IG5ld1N0YXRlQmVmb3JlLFxuICAgICAgICAgIHN0YXRlQWZ0ZXI6IG5ld1N0YXRlQWZ0ZXIsXG4gICAgICAgICAgcmVzdWx0OiAnc3VjY2VzcycsXG4gICAgICAgICAgZ3JhcGhpY3NMYXllcklkOiBncmFwaGljc0xheWVyLmlkLFxuICAgICAgICAgIHZpZXdUeXBlOiBtYXBWaWV3LnR5cGUgfHwgJ3Vua25vd24nLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9XG4gICAgICB9KVxuXG4gICAgICAvLyBDYWxsIGNhbGxiYWNrIGlmIHByb3ZpZGVkXG4gICAgICBpZiAoY2FsbGJhY2tzPy5vbkdyYXBoaWNzTGF5ZXJJbml0aWFsaXplZCkge1xuICAgICAgICBjYWxsYmFja3Mub25HcmFwaGljc0xheWVySW5pdGlhbGl6ZWQoZ3JhcGhpY3NMYXllcilcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGdyYXBoaWNzTGF5ZXJcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdDSFVOSy00LUNPTVBBUkUnLCB7XG4gICAgICAgIGV2ZW50OiAnbmV3LWltcGxlbWVudGF0aW9uLWluaXRpYWxpemVHcmFwaGljc0xheWVyLWVycm9yJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIG5ld0ltcGxlbWVudGF0aW9uOiB7XG4gICAgICAgICAgc3RhdGVCZWZvcmU6IG5ld1N0YXRlQmVmb3JlLFxuICAgICAgICAgIHJlc3VsdDogJ2Vycm9yJyxcbiAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSW5pdGlhbGl6ZXMgZ3JhcGhpY3MgbGF5ZXIgbGF6aWx5IHdoZW4gb3V0cHV0IGRhdGEgc291cmNlIGJlY29tZXMgYXZhaWxhYmxlLlxuICAgKiBcbiAgICogQHBhcmFtIHdpZGdldElkIC0gV2lkZ2V0IElEXG4gICAqIEBwYXJhbSBjb25maWcgLSBXaWRnZXQgY29uZmlndXJhdGlvblxuICAgKiBAcGFyYW0gb3V0cHV0RFMgLSBUaGUgb3V0cHV0IGRhdGEgc291cmNlIHRoYXQgd2FzIGNyZWF0ZWRcbiAgICogQHBhcmFtIG1hcFZpZXcgLSBPcHRpb25hbCBtYXAgdmlldyAoaWYgbm90IHByb3ZpZGVkLCB1c2VzIG1hcFZpZXdSZWYpXG4gICAqIEBwYXJhbSBjYWxsYmFja3MgLSBPcHRpb25hbCBjYWxsYmFja3NcbiAgICovXG4gIGFzeW5jIGluaXRpYWxpemVGcm9tT3V0cHV0RFMoXG4gICAgd2lkZ2V0SWQ6IHN0cmluZyxcbiAgICBjb25maWc6IElNQ29uZmlnLFxuICAgIG91dHB1dERTOiBEYXRhU291cmNlLFxuICAgIG1hcFZpZXc6IF9fZXNyaS5NYXBWaWV3IHwgX19lc3JpLlNjZW5lVmlldyB8IG51bGwsXG4gICAgY2FsbGJhY2tzPzogR3JhcGhpY3NMYXllckNhbGxiYWNrc1xuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvLyBDaHVuayA0OiBDb21wYXJpc29uIGxvZ2dpbmcgLSBuZXcgaW1wbGVtZW50YXRpb25cbiAgICBjb25zdCBuZXdTdGF0ZUJlZm9yZSA9IHtcbiAgICAgIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQ6IGNvbmZpZy51c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0LFxuICAgICAgaGFzR3JhcGhpY3NMYXllcjogISF0aGlzLmdyYXBoaWNzTGF5ZXJSZWYuY3VycmVudCxcbiAgICAgIGdyYXBoaWNzTGF5ZXJJZDogdGhpcy5ncmFwaGljc0xheWVyUmVmLmN1cnJlbnQ/LmlkIHx8IG51bGwsXG4gICAgICBoYXNNYXBWaWV3OiAhIXRoaXMubWFwVmlld1JlZi5jdXJyZW50LFxuICAgICAgb3V0cHV0RFNJZDogb3V0cHV0RFMuaWRcbiAgICB9XG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdDSFVOSy00LUNPTVBBUkUnLCB7XG4gICAgICBldmVudDogJ25ldy1pbXBsZW1lbnRhdGlvbi1pbml0aWFsaXplR3JhcGhpY3NMYXllckZyb21PdXRwdXREUy1iZWZvcmUnLFxuICAgICAgd2lkZ2V0SWQsXG4gICAgICBuZXdJbXBsZW1lbnRhdGlvbjoge1xuICAgICAgICBzdGF0ZUJlZm9yZTogbmV3U3RhdGVCZWZvcmUsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfVxuICAgIH0pXG4gICAgXG4gICAgLy8gT25seSBpbml0aWFsaXplIGlmIGVuYWJsZWQgYW5kIG5vdCBhbHJlYWR5IGluaXRpYWxpemVkXG4gICAgaWYgKCFjb25maWcudXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCB8fCB0aGlzLmdyYXBoaWNzTGF5ZXJSZWYuY3VycmVudCkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdDSFVOSy00LUNPTVBBUkUnLCB7XG4gICAgICAgIGV2ZW50OiAnbmV3LWltcGxlbWVudGF0aW9uLWluaXRpYWxpemVHcmFwaGljc0xheWVyRnJvbU91dHB1dERTLXNraXBwZWQnLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgbmV3SW1wbGVtZW50YXRpb246IHtcbiAgICAgICAgICBzdGF0ZUJlZm9yZTogbmV3U3RhdGVCZWZvcmUsXG4gICAgICAgICAgcmVzdWx0OiAnc2tpcHBlZCcsXG4gICAgICAgICAgcmVhc29uOiAhY29uZmlnLnVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQgPyAnbm90LWVuYWJsZWQnIDogJ2FscmVhZHktaW5pdGlhbGl6ZWQnLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gVXNlIHByb3ZpZGVkIG1hcCB2aWV3IG9yIGdldCBmcm9tIHJlZlxuICAgIGNvbnN0IG1hcFZpZXdUb1VzZSA9IG1hcFZpZXcgfHwgdGhpcy5tYXBWaWV3UmVmLmN1cnJlbnRcbiAgICBpZiAoIW1hcFZpZXdUb1VzZSkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdDSFVOSy00LUNPTVBBUkUnLCB7XG4gICAgICAgIGV2ZW50OiAnbmV3LWltcGxlbWVudGF0aW9uLWluaXRpYWxpemVHcmFwaGljc0xheWVyRnJvbU91dHB1dERTLXNraXBwZWQnLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgbmV3SW1wbGVtZW50YXRpb246IHtcbiAgICAgICAgICBzdGF0ZUJlZm9yZTogbmV3U3RhdGVCZWZvcmUsXG4gICAgICAgICAgcmVzdWx0OiAnc2tpcHBlZCcsXG4gICAgICAgICAgcmVhc29uOiAnbWFwLXZpZXctbm90LWF2YWlsYWJsZS15ZXQnLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gSW5pdGlhbGl6ZSBncmFwaGljcyBsYXllclxuICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZSh3aWRnZXRJZCwgbWFwVmlld1RvVXNlLCBjYWxsYmFja3MpXG4gIH1cblxuICAvKipcbiAgICogQ2xlYW5zIHVwIHRoZSBncmFwaGljcyBsYXllci5cbiAgICogXG4gICAqIFJlbW92ZXMgdGhlIGdyYXBoaWNzIGxheWVyIGZyb20gdGhlIG1hcCB2aWV3IGFuZCBjbGVhcnMgaW50ZXJuYWwgcmVmZXJlbmNlcy5cbiAgICogXG4gICAqIEBwYXJhbSB3aWRnZXRJZCAtIFdpZGdldCBJRFxuICAgKiBAcGFyYW0gY2FsbGJhY2tzIC0gT3B0aW9uYWwgY2FsbGJhY2tzXG4gICAqL1xuICBjbGVhbnVwKFxuICAgIHdpZGdldElkOiBzdHJpbmcsXG4gICAgY2FsbGJhY2tzPzogR3JhcGhpY3NMYXllckNhbGxiYWNrc1xuICApOiB2b2lkIHtcbiAgICAvLyBDaHVuayA0OiBDb21wYXJpc29uIGxvZ2dpbmcgLSBuZXcgaW1wbGVtZW50YXRpb25cbiAgICBjb25zdCBuZXdTdGF0ZUJlZm9yZSA9IHtcbiAgICAgIGhhc0dyYXBoaWNzTGF5ZXI6ICEhdGhpcy5ncmFwaGljc0xheWVyUmVmLmN1cnJlbnQsXG4gICAgICBncmFwaGljc0xheWVySWQ6IHRoaXMuZ3JhcGhpY3NMYXllclJlZi5jdXJyZW50Py5pZCB8fCBudWxsLFxuICAgICAgaGFzTWFwVmlldzogISF0aGlzLm1hcFZpZXdSZWYuY3VycmVudCxcbiAgICAgIHZpZXdUeXBlOiB0aGlzLm1hcFZpZXdSZWYuY3VycmVudD8udHlwZSB8fCBudWxsXG4gICAgfVxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnQ0hVTkstNC1DT01QQVJFJywge1xuICAgICAgZXZlbnQ6ICduZXctaW1wbGVtZW50YXRpb24tY2xlYW51cEdyYXBoaWNzTGF5ZXItYmVmb3JlJyxcbiAgICAgIHdpZGdldElkLFxuICAgICAgbmV3SW1wbGVtZW50YXRpb246IHtcbiAgICAgICAgc3RhdGVCZWZvcmU6IG5ld1N0YXRlQmVmb3JlLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgY29uc3QgbWFwVmlldyA9IHRoaXMubWFwVmlld1JlZi5jdXJyZW50XG4gICAgaWYgKG1hcFZpZXcpIHtcbiAgICAgIGNsZWFudXBHcmFwaGljc0xheWVyKHdpZGdldElkLCBtYXBWaWV3KVxuICAgICAgdGhpcy5tYXBWaWV3UmVmLmN1cnJlbnQgPSBudWxsXG4gICAgICB0aGlzLmdyYXBoaWNzTGF5ZXJSZWYuY3VycmVudCA9IG51bGxcblxuICAgICAgY29uc3QgbmV3U3RhdGVBZnRlciA9IHtcbiAgICAgICAgaGFzR3JhcGhpY3NMYXllcjogISF0aGlzLmdyYXBoaWNzTGF5ZXJSZWYuY3VycmVudCxcbiAgICAgICAgZ3JhcGhpY3NMYXllcklkOiB0aGlzLmdyYXBoaWNzTGF5ZXJSZWYuY3VycmVudD8uaWQgfHwgbnVsbCxcbiAgICAgICAgaGFzTWFwVmlldzogISF0aGlzLm1hcFZpZXdSZWYuY3VycmVudCxcbiAgICAgICAgdmlld1R5cGU6IHRoaXMubWFwVmlld1JlZi5jdXJyZW50Py50eXBlIHx8IG51bGxcbiAgICAgIH1cblxuICAgICAgZGVidWdMb2dnZXIubG9nKCdDSFVOSy00LUNPTVBBUkUnLCB7XG4gICAgICAgIGV2ZW50OiAnbmV3LWltcGxlbWVudGF0aW9uLWNsZWFudXBHcmFwaGljc0xheWVyLWNvbXBsZXRlJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIG5ld0ltcGxlbWVudGF0aW9uOiB7XG4gICAgICAgICAgc3RhdGVCZWZvcmU6IG5ld1N0YXRlQmVmb3JlLFxuICAgICAgICAgIHN0YXRlQWZ0ZXI6IG5ld1N0YXRlQWZ0ZXIsXG4gICAgICAgICAgcmVzdWx0OiAnY29tcGxldGUnLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9XG4gICAgICB9KVxuXG4gICAgICAvLyBDYWxsIGNhbGxiYWNrIGlmIHByb3ZpZGVkXG4gICAgICBpZiAoY2FsbGJhY2tzPy5vbkdyYXBoaWNzTGF5ZXJDbGVhbmVkKSB7XG4gICAgICAgIGNhbGxiYWNrcy5vbkdyYXBoaWNzTGF5ZXJDbGVhbmVkKClcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdDSFVOSy00LUNPTVBBUkUnLCB7XG4gICAgICAgIGV2ZW50OiAnbmV3LWltcGxlbWVudGF0aW9uLWNsZWFudXBHcmFwaGljc0xheWVyLXNraXBwZWQnLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgbmV3SW1wbGVtZW50YXRpb246IHtcbiAgICAgICAgICBzdGF0ZUJlZm9yZTogbmV3U3RhdGVCZWZvcmUsXG4gICAgICAgICAgcmVzdWx0OiAnc2tpcHBlZCcsXG4gICAgICAgICAgcmVhc29uOiAnbm8tbWFwLXZpZXcnLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhcnMgYWxsIGdyYXBoaWNzIGZyb20gdGhlIGdyYXBoaWNzIGxheWVyIGlmIGl0IGV4aXN0cy5cbiAgICogXG4gICAqIEBwYXJhbSB3aWRnZXRJZCAtIFdpZGdldCBJRCBmb3IgbG9nZ2luZ1xuICAgKiBAcGFyYW0gY29uZmlnIC0gV2lkZ2V0IGNvbmZpZ3VyYXRpb25cbiAgICovXG4gIGNsZWFyR3JhcGhpY3Mod2lkZ2V0SWQ6IHN0cmluZywgY29uZmlnOiBJTUNvbmZpZyk6IHZvaWQge1xuICAgIC8vIENodW5rIDQ6IENvbXBhcmlzb24gbG9nZ2luZyAtIG5ldyBpbXBsZW1lbnRhdGlvblxuICAgIGNvbnN0IGdyYXBoaWNzTGF5ZXIgPSB0aGlzLmdyYXBoaWNzTGF5ZXJSZWYuY3VycmVudFxuICAgIGNvbnN0IG5ld1N0YXRlQmVmb3JlID0ge1xuICAgICAgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodDogY29uZmlnLnVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQsXG4gICAgICBoYXNHcmFwaGljc0xheWVyOiAhIWdyYXBoaWNzTGF5ZXIsXG4gICAgICBncmFwaGljc0xheWVySWQ6IGdyYXBoaWNzTGF5ZXI/LmlkIHx8IG51bGwsXG4gICAgICBncmFwaGljc0NvdW50OiBncmFwaGljc0xheWVyPy5ncmFwaGljcy5sZW5ndGggfHwgMFxuICAgIH1cbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0NIVU5LLTQtQ09NUEFSRScsIHtcbiAgICAgIGV2ZW50OiAnbmV3LWltcGxlbWVudGF0aW9uLWNsZWFyR3JhcGhpY3NMYXllcklmRXhpc3RzLWJlZm9yZScsXG4gICAgICB3aWRnZXRJZCxcbiAgICAgIG5ld0ltcGxlbWVudGF0aW9uOiB7XG4gICAgICAgIHN0YXRlQmVmb3JlOiBuZXdTdGF0ZUJlZm9yZSxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9XG4gICAgfSlcbiAgICBcbiAgICBpZiAoY29uZmlnLnVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQgJiYgZ3JhcGhpY3NMYXllcikge1xuICAgICAgY29uc3QgeyBjbGVhckdyYXBoaWNzTGF5ZXIgfSA9IHJlcXVpcmUoJy4uL2dyYXBoaWNzLWxheWVyLXV0aWxzJylcbiAgICAgIGNsZWFyR3JhcGhpY3NMYXllcihncmFwaGljc0xheWVyKVxuICAgICAgXG4gICAgICBjb25zdCBuZXdTdGF0ZUFmdGVyID0ge1xuICAgICAgICB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0OiBjb25maWcudXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCxcbiAgICAgICAgaGFzR3JhcGhpY3NMYXllcjogISF0aGlzLmdyYXBoaWNzTGF5ZXJSZWYuY3VycmVudCxcbiAgICAgICAgZ3JhcGhpY3NMYXllcklkOiB0aGlzLmdyYXBoaWNzTGF5ZXJSZWYuY3VycmVudD8uaWQgfHwgbnVsbCxcbiAgICAgICAgZ3JhcGhpY3NDb3VudDogdGhpcy5ncmFwaGljc0xheWVyUmVmLmN1cnJlbnQ/LmdyYXBoaWNzLmxlbmd0aCB8fCAwXG4gICAgICB9XG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnQ0hVTkstNC1DT01QQVJFJywge1xuICAgICAgICBldmVudDogJ25ldy1pbXBsZW1lbnRhdGlvbi1jbGVhckdyYXBoaWNzTGF5ZXJJZkV4aXN0cy1jb21wbGV0ZScsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICBuZXdJbXBsZW1lbnRhdGlvbjoge1xuICAgICAgICAgIHN0YXRlQmVmb3JlOiBuZXdTdGF0ZUJlZm9yZSxcbiAgICAgICAgICBzdGF0ZUFmdGVyOiBuZXdTdGF0ZUFmdGVyLFxuICAgICAgICAgIHJlc3VsdDogJ2NvbXBsZXRlJyxcbiAgICAgICAgICBncmFwaGljc0xheWVySWQ6IGdyYXBoaWNzTGF5ZXIuaWQsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnQ0hVTkstNC1DT01QQVJFJywge1xuICAgICAgICBldmVudDogJ25ldy1pbXBsZW1lbnRhdGlvbi1jbGVhckdyYXBoaWNzTGF5ZXJJZkV4aXN0cy1za2lwcGVkJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIG5ld0ltcGxlbWVudGF0aW9uOiB7XG4gICAgICAgICAgc3RhdGVCZWZvcmU6IG5ld1N0YXRlQmVmb3JlLFxuICAgICAgICAgIHJlc3VsdDogJ3NraXBwZWQnLFxuICAgICAgICAgIHJlYXNvbjogIWNvbmZpZy51c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0ID8gJ25vdC1lbmFibGVkJyA6ICduby1ncmFwaGljcy1sYXllcicsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGN1cnJlbnQgZ3JhcGhpY3MgbGF5ZXIuXG4gICAqL1xuICBnZXRHcmFwaGljc0xheWVyKCk6IF9fZXNyaS5HcmFwaGljc0xheWVyIHwgbnVsbCB7XG4gICAgcmV0dXJuIHRoaXMuZ3JhcGhpY3NMYXllclJlZi5jdXJyZW50XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2tzIGlmIGdyYXBoaWNzIGxheWVyIHNob3VsZCBiZSBpbml0aWFsaXplZCBiYXNlZCBvbiBjb25maWcgYW5kIGN1cnJlbnQgc3RhdGUuXG4gICAqIFxuICAgKiBAcGFyYW0gY29uZmlnIC0gV2lkZ2V0IGNvbmZpZ3VyYXRpb25cbiAgICogQHBhcmFtIG1hcFZpZXcgLSBNYXAgdmlldyB0byBjaGVja1xuICAgKiBAcmV0dXJucyB0cnVlIGlmIGdyYXBoaWNzIGxheWVyIHNob3VsZCBiZSBpbml0aWFsaXplZFxuICAgKi9cbiAgc2hvdWxkSW5pdGlhbGl6ZShcbiAgICBjb25maWc6IElNQ29uZmlnLFxuICAgIG1hcFZpZXc6IF9fZXNyaS5NYXBWaWV3IHwgX19lc3JpLlNjZW5lVmlldyB8IG51bGxcbiAgKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICEhKG1hcFZpZXcgJiYgY29uZmlnLnVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQgJiYgIXRoaXMuZ3JhcGhpY3NMYXllclJlZi5jdXJyZW50KVxuICB9XG59XG5cbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCdcbmltcG9ydCB7IHR5cGUgQWxsV2lkZ2V0UHJvcHMgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyB0eXBlIElNQ29uZmlnIH0gZnJvbSAnLi4vLi4vY29uZmlnJ1xuaW1wb3J0IHsgdHlwZSBKaW11TWFwVmlldyB9IGZyb20gJ2ppbXUtYXJjZ2lzJ1xuaW1wb3J0IHsgY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlciB9IGZyb20gJ3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uJ1xuXG5jb25zdCBkZWJ1Z0xvZ2dlciA9IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIoKVxuXG5pbnRlcmZhY2UgTWFwVmlld0NhbGxiYWNrcyB7XG4gIG9uTWFwVmlld0NoYW5nZT86IChqaW11TWFwVmlldzogSmltdU1hcFZpZXcgfCBudWxsKSA9PiB2b2lkXG59XG5cbi8qKlxuICogVXRpbGl0eSB0byBtYW5hZ2UgbWFwIHZpZXcgcmVmIGFuZCB2aWV3IGNoYW5nZSBoYW5kbGVycy5cbiAqIFxuICogQ2VudHJhbGl6ZXMgbWFwIHZpZXcgbWFuYWdlbWVudCBsb2dpYyBmb3IgdGhlIHdpZGdldC5cbiAqIEhhbmRsZXMgSmltdU1hcFZpZXcgY2hhbmdlcyBhbmQgbWFpbnRhaW5zIHJlZnMgZm9yIG1hcCB2aWV3IGFjY2Vzcy5cbiAqIFxuICogUGFydCBvZiBDaHVuayA2OiBNYXAgVmlldyBNYW5hZ2VtZW50IGV4dHJhY3Rpb24uXG4gKiBcbiAqIE5vdGU6IFRoaXMgaXMgYSB1dGlsaXR5IGNsYXNzIChub3QgYSBob29rKSB0byB3b3JrIHdpdGggY2xhc3MgY29tcG9uZW50cy5cbiAqL1xuZXhwb3J0IGNsYXNzIE1hcFZpZXdNYW5hZ2VyIHtcbiAgcHJpdmF0ZSBtYXBWaWV3UmVmOiBSZWFjdC5SZWZPYmplY3Q8X19lc3JpLk1hcFZpZXcgfCBfX2VzcmkuU2NlbmVWaWV3IHwgbnVsbD5cbiAgcHJpdmF0ZSBqaW11TWFwVmlldzogSmltdU1hcFZpZXcgfCBudWxsID0gbnVsbFxuXG4gIGNvbnN0cnVjdG9yKG1hcFZpZXdSZWY6IFJlYWN0LlJlZk9iamVjdDxfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXcgfCBudWxsPikge1xuICAgIHRoaXMubWFwVmlld1JlZiA9IG1hcFZpZXdSZWZcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIEppbXVNYXBWaWV3IGNoYW5nZSBmcm9tIEppbXVNYXBWaWV3Q29tcG9uZW50LlxuICAgKiBVcGRhdGVzIGludGVybmFsIHN0YXRlIGFuZCBjYWxscyBjYWxsYmFja3MuXG4gICAqL1xuICBoYW5kbGVKaW11TWFwVmlld0NoYW5nZWQoXG4gICAgamltdU1hcFZpZXc6IEppbXVNYXBWaWV3IHwgbnVsbCxcbiAgICBwcm9wczogQWxsV2lkZ2V0UHJvcHM8SU1Db25maWc+LFxuICAgIGNhbGxiYWNrczogTWFwVmlld0NhbGxiYWNrc1xuICApOiB2b2lkIHtcbiAgICBjb25zdCB7IGlkIH0gPSBwcm9wc1xuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnTUFQLUVYVEVOVCcsIHtcbiAgICAgIGV2ZW50OiAnaGFuZGxlSmltdU1hcFZpZXdDaGFuZ2VkJyxcbiAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgIGhhc0ppbXVNYXBWaWV3OiAhIWppbXVNYXBWaWV3LFxuICAgICAgaGFzVmlldzogISEoamltdU1hcFZpZXc/LnZpZXcpLFxuICAgICAgdmlld1R5cGU6IGppbXVNYXBWaWV3Py52aWV3Py50eXBlIHx8ICdub25lJyxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgLy8gU3RvcmUgSmltdU1hcFZpZXcgaW50ZXJuYWxseVxuICAgIHRoaXMuamltdU1hcFZpZXcgPSBqaW11TWFwVmlld1xuICAgIFxuICAgIC8vIFVwZGF0ZSBtYXAgdmlldyByZWYgaWYgdmlldyBpcyBhdmFpbGFibGVcbiAgICBpZiAoamltdU1hcFZpZXc/LnZpZXcpIHtcbiAgICAgIHRoaXMubWFwVmlld1JlZi5jdXJyZW50ID0gamltdU1hcFZpZXcudmlld1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm1hcFZpZXdSZWYuY3VycmVudCA9IG51bGxcbiAgICB9XG4gICAgXG4gICAgLy8gQ2FsbCBjYWxsYmFjayB0byB1cGRhdGUgd2lkZ2V0IHN0YXRlXG4gICAgaWYgKGNhbGxiYWNrcy5vbk1hcFZpZXdDaGFuZ2UpIHtcbiAgICAgIGNhbGxiYWNrcy5vbk1hcFZpZXdDaGFuZ2UoamltdU1hcFZpZXcpXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGN1cnJlbnQgSmltdU1hcFZpZXcuXG4gICAqL1xuICBnZXRKaW11TWFwVmlldygpOiBKaW11TWFwVmlldyB8IG51bGwge1xuICAgIHJldHVybiB0aGlzLmppbXVNYXBWaWV3XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgY3VycmVudCBtYXAgdmlldyBmcm9tIHJlZi5cbiAgICovXG4gIGdldE1hcFZpZXcoKTogX19lc3JpLk1hcFZpZXcgfCBfX2VzcmkuU2NlbmVWaWV3IHwgbnVsbCB7XG4gICAgcmV0dXJuIHRoaXMubWFwVmlld1JlZi5jdXJyZW50XG4gIH1cblxuICAvKipcbiAgICogQ2xlYW5zIHVwIG1hcCB2aWV3IHJlZmVyZW5jZXMuXG4gICAqL1xuICBjbGVhbnVwKCk6IHZvaWQge1xuICAgIHRoaXMubWFwVmlld1JlZi5jdXJyZW50ID0gbnVsbFxuICAgIHRoaXMuamltdU1hcFZpZXcgPSBudWxsXG4gIH1cbn1cblxuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgU2VsZWN0aW9uVHlwZSB9IGZyb20gJy4uLy4uL2NvbmZpZydcbmltcG9ydCB7IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIgfSBmcm9tICd3aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbidcblxuY29uc3QgZGVidWdMb2dnZXIgPSBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyKClcblxuLyoqXG4gKiBJbnRlcmZhY2UgZm9yIHdpZGdldCBzdGF0ZSB0aGF0IHJlbGF0ZXMgdG8gc2VsZWN0aW9uIGFuZCByZXN0b3JhdGlvbi5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBTZWxlY3Rpb25SZXN0b3JhdGlvblN0YXRlIHtcbiAgaGFzU2VsZWN0aW9uOiBib29sZWFuXG4gIHNlbGVjdGlvblJlY29yZENvdW50OiBudW1iZXJcbiAgbGFzdFNlbGVjdGlvbj86IHtcbiAgICByZWNvcmRJZHM6IHN0cmluZ1tdXG4gICAgb3V0cHV0RHNJZDogc3RyaW5nXG4gICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHN0cmluZ1xuICB9XG4gIHJlc3VsdHNNb2RlOiBTZWxlY3Rpb25UeXBlXG4gIGFjY3VtdWxhdGVkUmVjb3Jkcz86IEFycmF5PHtcbiAgICBjb25maWdJZDogc3RyaW5nXG4gICAgcmVjb3JkOiBhbnkgLy8gRmVhdHVyZURhdGFSZWNvcmRcbiAgfT5cbiAgaXNQYW5lbFZpc2libGU6IGJvb2xlYW5cbn1cblxuLyoqXG4gKiBJbnRlcmZhY2UgZm9yIGNhbGxiYWNrcyB0byB1cGRhdGUgd2lkZ2V0IHN0YXRlLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFNlbGVjdGlvblJlc3RvcmF0aW9uQ2FsbGJhY2tzIHtcbiAgb25TdGF0ZVVwZGF0ZTogKG5ld1N0YXRlOiBQYXJ0aWFsPFNlbGVjdGlvblJlc3RvcmF0aW9uU3RhdGU+KSA9PiB2b2lkXG59XG5cbi8qKlxuICogRGVwZW5kZW5jaWVzIG5lZWRlZCBmb3IgcGFuZWwgcmVzdG9yYXRpb24gbWV0aG9kcy5cbiAqIFRoZXNlIGFyZSB0eXBpY2FsbHkgcGFzc2VkIGF0IHJ1bnRpbWUgd2hlbiBjYWxsaW5nIGFkZFNlbGVjdGlvblRvTWFwL2NsZWFyU2VsZWN0aW9uRnJvbU1hcC5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBSZXN0b3JhdGlvbkRlcGVuZGVuY2llcyB7XG4gIGdyYXBoaWNzTGF5ZXJSZWY6IHsgY3VycmVudDogX19lc3JpLkdyYXBoaWNzTGF5ZXIgfCBudWxsIH1cbiAgbWFwVmlld1JlZjogeyBjdXJyZW50OiBfX2VzcmkuTWFwVmlldyB8IG51bGwgfVxuICBncmFwaGljc0xheWVyTWFuYWdlcjoge1xuICAgIGNsZWFyR3JhcGhpY3M6ICh3aWRnZXRJZDogc3RyaW5nLCBjb25maWc6IGFueSkgPT4gdm9pZFxuICB9XG4gIGNvbmZpZzoge1xuICAgIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQ6IGJvb2xlYW5cbiAgfVxufVxuXG4vKipcbiAqIE1hbmFnZXIgY2xhc3MgZm9yIGhhbmRsaW5nIHNlbGVjdGlvbiBzdGF0ZSB0cmFja2luZyBhbmQgcmVzdG9yYXRpb24gbG9naWMuXG4gKiBcbiAqIFRoaXMgY2xhc3MgY2VudHJhbGl6ZXMgdGhlIGxvZ2ljIGZvcjpcbiAqIC0gU2VjdGlvbiAzLjE6IFNlbGVjdGlvbiBTdGF0ZSBUcmFja2luZyAoaGFuZGxlU2VsZWN0aW9uQ2hhbmdlKVxuICogLSBTZWN0aW9uIDMuMjogUGFuZWwgT3Blbi9DbG9zZSBSZXN0b3JhdGlvbiAoYWRkU2VsZWN0aW9uVG9NYXAsIGNsZWFyU2VsZWN0aW9uRnJvbU1hcClcbiAqIC0gU2VjdGlvbiAzLjM6IE1hcCBJZGVudGlmeSBSZXN0b3JhdGlvbiAoaGFuZGxlUmVzdG9yZU9uSWRlbnRpZnlDbG9zZSlcbiAqIFxuICogUGFydCBvZiBDaHVuayAzOiBTZWxlY3Rpb24gJiBSZXN0b3JhdGlvbiBleHRyYWN0aW9uLlxuICogXG4gKiBOb3RlOiBUaGlzIGlzIGEgdXRpbGl0eSBjbGFzcyAobm90IGEgaG9vaykgdG8gd29yayB3aXRoIGNsYXNzIGNvbXBvbmVudHMuXG4gKi9cbmV4cG9ydCBjbGFzcyBTZWxlY3Rpb25SZXN0b3JhdGlvbk1hbmFnZXIge1xuICBwcml2YXRlIHdpZGdldElkOiBzdHJpbmcgPSAnJ1xuICBwcml2YXRlIHN0YXRlR2V0dGVyOiAoKSA9PiBTZWxlY3Rpb25SZXN0b3JhdGlvblN0YXRlXG4gIHByaXZhdGUgY2FsbGJhY2tzOiBTZWxlY3Rpb25SZXN0b3JhdGlvbkNhbGxiYWNrc1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHN0YXRlR2V0dGVyOiAoKSA9PiBTZWxlY3Rpb25SZXN0b3JhdGlvblN0YXRlLFxuICAgIGNhbGxiYWNrczogU2VsZWN0aW9uUmVzdG9yYXRpb25DYWxsYmFja3NcbiAgKSB7XG4gICAgdGhpcy5zdGF0ZUdldHRlciA9IHN0YXRlR2V0dGVyXG4gICAgdGhpcy5jYWxsYmFja3MgPSBjYWxsYmFja3NcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSB3aWRnZXQgSUQuIFNob3VsZCBiZSBjYWxsZWQgb25jZSBpbiBjb21wb25lbnREaWRNb3VudC5cbiAgICogQHBhcmFtIHdpZGdldElkIC0gVGhlIHdpZGdldCBJRFxuICAgKi9cbiAgc2V0V2lkZ2V0SWQod2lkZ2V0SWQ6IHN0cmluZyk6IHZvaWQge1xuICAgIHRoaXMud2lkZ2V0SWQgPSB3aWRnZXRJZFxuICB9XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAvLyBTZWN0aW9uIDMuMTogU2VsZWN0aW9uIFN0YXRlIFRyYWNraW5nXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICAvKipcbiAgICogSGFuZGxlcyBzZWxlY3Rpb24gY2hhbmdlIGV2ZW50cyBmcm9tIHF1ZXJpZXMuXG4gICAqIFxuICAgKiBUaGlzIG1ldGhvZDpcbiAgICogMS4gSWdub3JlcyBldmVudHMgbm90IGZvciB0aGlzIHdpZGdldFxuICAgKiAyLiBJZ25vcmVzIGVtcHR5IHNlbGVjdGlvbnMgd2hlbiBwYW5lbCBpcyBjbG9zZWQgKHRvIHByZXZlbnQgc3RhdGUgd2lwZSlcbiAgICogMy4gQ2FsY3VsYXRlcyBzZWxlY3Rpb24gY291bnQgKHVzZXMgYWNjdW11bGF0ZWQgcmVjb3JkcyBpbiBBZGQvUmVtb3ZlIG1vZGVzKVxuICAgKiA0LiBVcGRhdGVzIHdpZGdldCBzdGF0ZTogaGFzU2VsZWN0aW9uLCBzZWxlY3Rpb25SZWNvcmRDb3VudCwgbGFzdFNlbGVjdGlvblxuICAgKiA1LiBSZXNldHMgbW9kZSB0byBOZXdTZWxlY3Rpb24gaWYgc2VsZWN0aW9uIGlzIGNsZWFyZWQgaW4gUmVtb3ZlIG1vZGVcbiAgICogXG4gICAqIEBwYXJhbSBldmVudCAtIFRoZSBzZWxlY3Rpb24gY2hhbmdlIGV2ZW50XG4gICAqL1xuICBoYW5kbGVTZWxlY3Rpb25DaGFuZ2UoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgY3VzdG9tRXZlbnQgPSBldmVudCBhcyBDdXN0b21FdmVudDx7IFxuICAgICAgd2lkZ2V0SWQ6IHN0cmluZ1xuICAgICAgcmVjb3JkSWRzOiBzdHJpbmdbXVxuICAgICAgZGF0YVNvdXJjZUlkPzogc3RyaW5nXG4gICAgICBvdXRwdXREc0lkPzogc3RyaW5nXG4gICAgICBxdWVyeUl0ZW1Db25maWdJZD86IHN0cmluZyBcbiAgICB9PlxuXG4gICAgLy8gR2V0IGN1cnJlbnQgc3RhdGVcbiAgICBjb25zdCBzdGF0ZSA9IHRoaXMuc3RhdGVHZXR0ZXIoKVxuXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgLy8gMS4gT25seSB0cmFjayBpZiB0aGlzIGlzIGZvciBvdXIgd2lkZ2V0XG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgaWYgKGN1c3RvbUV2ZW50LmRldGFpbC53aWRnZXRJZCAhPT0gdGhpcy53aWRnZXRJZCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgLy8gMi4gSWdub3JlIGVtcHR5IHNlbGVjdGlvbnMgd2hlbiBwYW5lbCBpcyBjbG9zZWRcbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICBjb25zdCBoYXNTZWxlY3Rpb24gPSBjdXN0b21FdmVudC5kZXRhaWwucmVjb3JkSWRzICYmIGN1c3RvbUV2ZW50LmRldGFpbC5yZWNvcmRJZHMubGVuZ3RoID4gMFxuXG4gICAgaWYgKCFzdGF0ZS5pc1BhbmVsVmlzaWJsZSAmJiAhaGFzU2VsZWN0aW9uKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAnaGFuZGxlU2VsZWN0aW9uQ2hhbmdlLWlnbm9yaW5nLWVtcHR5LXNlbGVjdGlvbi13aGlsZS1wYW5lbC1jbG9zZWQnLFxuICAgICAgICB3aWRnZXRJZDogdGhpcy53aWRnZXRJZCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgLy8gMy4gQ2FsY3VsYXRlIHNlbGVjdGlvbiBjb3VudFxuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgIC8vIEluIFwiQWRkIHRvXCIgb3IgXCJSZW1vdmUgZnJvbVwiIG1vZGUsIHVzZSBhY2N1bXVsYXRlZCByZWNvcmRzIGNvdW50XG4gICAgY29uc3QgaXNBY2N1bXVsYXRpb25Nb2RlID0gc3RhdGUucmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb24gfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUucmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvblxuICAgIGNvbnN0IGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50ID0gc3RhdGUuYWNjdW11bGF0ZWRSZWNvcmRzPy5sZW5ndGggfHwgMFxuICAgIGNvbnN0IHNlbGVjdGlvbkNvdW50ID0gaXNBY2N1bXVsYXRpb25Nb2RlICYmIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50ID4gMFxuICAgICAgPyBhY2N1bXVsYXRlZFJlY29yZHNDb3VudFxuICAgICAgOiAoaGFzU2VsZWN0aW9uID8gY3VzdG9tRXZlbnQuZGV0YWlsLnJlY29yZElkcy5sZW5ndGggOiAwKVxuXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgLy8gNC4gRGV0ZXJtaW5lIGlmIG1vZGUgc2hvdWxkIHJlc2V0XG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgLy8gSWYgc2VsZWN0aW9uIGlzIGNsZWFyZWQgaW4gUmVtb3ZlIG1vZGUsIHJlc2V0IHRvIE5ld1NlbGVjdGlvblxuICAgIGNvbnN0IHNob3VsZFJlc2V0TW9kZSA9ICFoYXNTZWxlY3Rpb24gJiYgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0aW9uQ291bnQgPT09IDAgJiYgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUucmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvblxuXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgLy8gNS4gQnVpbGQgbmV3IHN0YXRlXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgY29uc3QgbmV3U3RhdGU6IFBhcnRpYWw8U2VsZWN0aW9uUmVzdG9yYXRpb25TdGF0ZT4gPSB7XG4gICAgICBoYXNTZWxlY3Rpb246IHNlbGVjdGlvbkNvdW50ID4gMCxcbiAgICAgIHNlbGVjdGlvblJlY29yZENvdW50OiBzZWxlY3Rpb25Db3VudCxcbiAgICAgIC8vIFN0b3JlIGxhc3RTZWxlY3Rpb24gZm9yIGNvbXBhdGliaWxpdHlcbiAgICAgIGxhc3RTZWxlY3Rpb246IGhhc1NlbGVjdGlvbiAmJiBjdXN0b21FdmVudC5kZXRhaWwub3V0cHV0RHNJZCAmJiBjdXN0b21FdmVudC5kZXRhaWwucXVlcnlJdGVtQ29uZmlnSWRcbiAgICAgICAgPyB7XG4gICAgICAgICAgICByZWNvcmRJZHM6IGN1c3RvbUV2ZW50LmRldGFpbC5yZWNvcmRJZHMsXG4gICAgICAgICAgICBvdXRwdXREc0lkOiBjdXN0b21FdmVudC5kZXRhaWwub3V0cHV0RHNJZCxcbiAgICAgICAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBjdXN0b21FdmVudC5kZXRhaWwucXVlcnlJdGVtQ29uZmlnSWRcbiAgICAgICAgICB9XG4gICAgICAgIDogdW5kZWZpbmVkXG4gICAgfVxuXG4gICAgLy8gUmVzZXQgbW9kZSBpZiBuZWVkZWRcbiAgICBpZiAoc2hvdWxkUmVzZXRNb2RlKSB7XG4gICAgICBuZXdTdGF0ZS5yZXN1bHRzTW9kZSA9IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uXG4gICAgICBuZXdTdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHMgPSBbXSAvLyBBbHNvIGNsZWFyIGFjY3VtdWxhdGVkIHJlY29yZHNcbiAgICB9XG5cbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAvLyA2LiBMb2cgZGVjaXNpb24gbG9naWNcbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICBldmVudDogJ2hhbmRsZVNlbGVjdGlvbkNoYW5nZS11cGRhdGluZy1zdGF0ZScsXG4gICAgICB3aWRnZXRJZDogdGhpcy53aWRnZXRJZCxcbiAgICAgIHJlc3VsdHNNb2RlOiBzdGF0ZS5yZXN1bHRzTW9kZSxcbiAgICAgIGlzQWNjdW11bGF0aW9uTW9kZSxcbiAgICAgIGV2ZW50UmVjb3JkSWRzQ291bnQ6IGN1c3RvbUV2ZW50LmRldGFpbC5yZWNvcmRJZHMubGVuZ3RoLFxuICAgICAgaGFzU2VsZWN0aW9uRnJvbUV2ZW50OiBoYXNTZWxlY3Rpb24sXG4gICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudEJlZm9yZTogYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQsXG4gICAgICBjYWxjdWxhdGVkU2VsZWN0aW9uQ291bnQ6IHNlbGVjdGlvbkNvdW50LFxuICAgICAgJ3dpbGwtc2V0LWhhc1NlbGVjdGlvbic6IHNlbGVjdGlvbkNvdW50ID4gMCxcbiAgICAgICd3aWxsLXNldC1sYXN0U2VsZWN0aW9uJzogaGFzU2VsZWN0aW9uICYmICEhY3VzdG9tRXZlbnQuZGV0YWlsLm91dHB1dERzSWQgJiYgISFjdXN0b21FdmVudC5kZXRhaWwucXVlcnlJdGVtQ29uZmlnSWQsXG4gICAgICAnd2lsbC1yZXNldC1tb2RlJzogc2hvdWxkUmVzZXRNb2RlLFxuICAgICAgZGVjaXNpb25Mb2dpYzoge1xuICAgICAgICAnaXNBY2N1bXVsYXRpb25Nb2RlJzogaXNBY2N1bXVsYXRpb25Nb2RlLFxuICAgICAgICAnYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQgPiAwJzogYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQgPiAwLFxuICAgICAgICAndXNlLWFjY3VtdWxhdGVkLWNvdW50JzogaXNBY2N1bXVsYXRpb25Nb2RlICYmIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50ID4gMCxcbiAgICAgICAgJ3VzZS1ldmVudC1jb3VudCc6ICEoaXNBY2N1bXVsYXRpb25Nb2RlICYmIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50ID4gMCksXG4gICAgICAgICdzaG91bGQtcmVzZXQtbW9kZSc6IHNob3VsZFJlc2V0TW9kZVxuICAgICAgfVxuICAgIH0pXG5cbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAvLyA3LiBVcGRhdGUgc3RhdGUgdmlhIGNhbGxiYWNrXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgdGhpcy5jYWxsYmFja3Mub25TdGF0ZVVwZGF0ZShuZXdTdGF0ZSlcblxuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgIC8vIDguIExvZyBzdGF0ZSBBRlRFUiB1cGRhdGVcbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICBldmVudDogJ2hhbmRsZVNlbGVjdGlvbkNoYW5nZS1zdGF0ZS11cGRhdGVkJyxcbiAgICAgIHdpZGdldElkOiB0aGlzLndpZGdldElkLFxuICAgICAgJ25ldy1oYXNTZWxlY3Rpb24nOiBzZWxlY3Rpb25Db3VudCA+IDAsXG4gICAgICAnbmV3LXNlbGVjdGlvblJlY29yZENvdW50Jzogc2VsZWN0aW9uQ291bnQsXG4gICAgICAnbmV3LWxhc3RTZWxlY3Rpb24tcmVjb3JkSWRzLWNvdW50JzogaGFzU2VsZWN0aW9uICYmIGN1c3RvbUV2ZW50LmRldGFpbC5vdXRwdXREc0lkICYmIGN1c3RvbUV2ZW50LmRldGFpbC5xdWVyeUl0ZW1Db25maWdJZFxuICAgICAgICA/IGN1c3RvbUV2ZW50LmRldGFpbC5yZWNvcmRJZHMubGVuZ3RoXG4gICAgICAgIDogMCxcbiAgICAgICdtb2RlLXJlc2V0Jzogc2hvdWxkUmVzZXRNb2RlLFxuICAgICAgJ25ldy1tb2RlJzogc2hvdWxkUmVzZXRNb2RlID8gU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb24gOiBzdGF0ZS5yZXN1bHRzTW9kZSxcbiAgICAgICdub3RlJzogc2hvdWxkUmVzZXRNb2RlIFxuICAgICAgICA/ICdNb2RlIHJlc2V0IHRvIE5ld1NlbGVjdGlvbiBiZWNhdXNlIHNlbGVjdGlvbiB3YXMgY2xlYXJlZCBpbiBSZW1vdmUgbW9kZSdcbiAgICAgICAgOiAnbGFzdFNlbGVjdGlvbi1vbmx5LWNvbnRhaW5zLWN1cnJlbnQtcXVlcnktcmVjb3Jkcy1ub3QtYWxsLWFjY3VtdWxhdGVkLXJlY29yZHMnXG4gICAgfSlcbiAgfVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8gU2VjdGlvbiAzLjI6IFBhbmVsIE9wZW4vQ2xvc2UgUmVzdG9yYXRpb25cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gIC8qKlxuICAgKiBSZXN0b3JlcyBzZWxlY3Rpb24gdG8gdGhlIG1hcCB3aGVuIHRoZSB3aWRnZXQgcGFuZWwgb3BlbnMuXG4gICAqIFxuICAgKiBUaGlzIG1ldGhvZDpcbiAgICogMS4gQ2hlY2tzIGlmIGFjY3VtdWxhdGVkIHJlY29yZHMgZXhpc3QgKEFkZC9SZW1vdmUgbW9kZXMpXG4gICAqIDIuIEdyb3VwcyBhY2N1bXVsYXRlZCByZWNvcmRzIGJ5IG9yaWdpbiBkYXRhIHNvdXJjZVxuICAgKiAzLiBDYWxscyBzZWxlY3RSZWNvcmRzQW5kUHVibGlzaCBmb3IgZWFjaCBvcmlnaW4gRFNcbiAgICogNC4gRmFsbHMgYmFjayB0byBsYXN0U2VsZWN0aW9uIGlmIG5vIGFjY3VtdWxhdGVkIHJlY29yZHNcbiAgICogXG4gICAqIEBwYXJhbSBkZXBzIC0gUnVudGltZSBkZXBlbmRlbmNpZXMgKGdyYXBoaWNzIGxheWVyLCBtYXAgdmlldywgY29uZmlnKVxuICAgKi9cbiAgYXN5bmMgYWRkU2VsZWN0aW9uVG9NYXAoZGVwczogUmVzdG9yYXRpb25EZXBlbmRlbmNpZXMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBzdGF0ZSA9IHRoaXMuc3RhdGVHZXR0ZXIoKVxuICAgIGNvbnN0IHsgbGFzdFNlbGVjdGlvbiwgYWNjdW11bGF0ZWRSZWNvcmRzLCByZXN1bHRzTW9kZSB9ID0gc3RhdGVcblxuICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgIGV2ZW50OiAnYWRkU2VsZWN0aW9uVG9NYXAtY2FsbGVkJyxcbiAgICAgIHdpZGdldElkOiB0aGlzLndpZGdldElkLFxuICAgICAgcmVzdWx0c01vZGUsXG4gICAgICBoYXNBY2N1bXVsYXRlZFJlY29yZHM6ICEhKGFjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCksXG4gICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogYWNjdW11bGF0ZWRSZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgIGhhc0xhc3RTZWxlY3Rpb246ICEhbGFzdFNlbGVjdGlvbixcbiAgICAgIGxhc3RTZWxlY3Rpb25SZWNvcmRDb3VudDogbGFzdFNlbGVjdGlvbj8ucmVjb3JkSWRzLmxlbmd0aCB8fCAwLFxuICAgICAgbGFzdFNlbGVjdGlvbk91dHB1dERzSWQ6IGxhc3RTZWxlY3Rpb24/Lm91dHB1dERzSWRcbiAgICB9KVxuXG4gICAgLy8gSW4gQWRkL1JlbW92ZSBtb2RlcywgdXNlIGFjY3VtdWxhdGVkIHJlY29yZHMgZm9yIHJlc3RvcmF0aW9uXG4gICAgY29uc3QgaXNBY2N1bXVsYXRpb25Nb2RlID0gcmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb24gfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uXG5cbiAgICAvLyBDaGVjayBpZiB3ZSBzaG91bGQgdXNlIGFjY3VtdWxhdGVkIHJlY29yZHNcbiAgICBpZiAoYWNjdW11bGF0ZWRSZWNvcmRzICYmIGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAnYWRkU2VsZWN0aW9uVG9NYXAtZm91bmQtYWNjdW11bGF0ZWQtcmVjb3JkcycsXG4gICAgICAgIHdpZGdldElkOiB0aGlzLndpZGdldElkLFxuICAgICAgICByZXN1bHRzTW9kZSxcbiAgICAgICAgaXNBY2N1bXVsYXRpb25Nb2RlLFxuICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgJ3Nob3VsZC11c2UtYWNjdW11bGF0ZWQnOiB0cnVlXG4gICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAnYWRkU2VsZWN0aW9uVG9NYXAtbm8tYWNjdW11bGF0ZWQtcmVjb3JkcycsXG4gICAgICAgIHdpZGdldElkOiB0aGlzLndpZGdldElkLFxuICAgICAgICByZXN1bHRzTW9kZSxcbiAgICAgICAgaXNBY2N1bXVsYXRpb25Nb2RlLFxuICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogMCxcbiAgICAgICAgJ3dpbGwtZmFsbGJhY2stdG8tbGFzdFNlbGVjdGlvbic6ICEhbGFzdFNlbGVjdGlvblxuICAgICAgfSlcbiAgICB9XG5cbiAgICBpZiAoaXNBY2N1bXVsYXRpb25Nb2RlICYmIGFjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgLy8gR3JvdXAgYWNjdW11bGF0ZWQgcmVjb3JkcyBieSBvcmlnaW4gZGF0YSBzb3VyY2VcbiAgICAgIGF3YWl0IHRoaXMucmVzdG9yZUFjY3VtdWxhdGVkUmVjb3JkcyhhY2N1bXVsYXRlZFJlY29yZHMsIGRlcHMpXG4gICAgfSBlbHNlIGlmICghaXNBY2N1bXVsYXRpb25Nb2RlICYmIGxhc3RTZWxlY3Rpb24gJiYgbGFzdFNlbGVjdGlvbi5yZWNvcmRJZHMubGVuZ3RoID4gMCkge1xuICAgICAgLy8gRmFsbCBiYWNrIHRvIGxhc3RTZWxlY3Rpb24gaW4gTmV3IG1vZGVcbiAgICAgIGF3YWl0IHRoaXMucmVzdG9yZUxhc3RTZWxlY3Rpb24obGFzdFNlbGVjdGlvbiwgZGVwcylcbiAgICB9IGVsc2Uge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ2FkZFNlbGVjdGlvblRvTWFwLW5vLXNlbGVjdGlvbi10by1yZXN0b3JlJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHRoaXMud2lkZ2V0SWQsXG4gICAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgICBoYXNBY2N1bXVsYXRlZFJlY29yZHM6IGFjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCxcbiAgICAgICAgaGFzTGFzdFNlbGVjdGlvbjogISFsYXN0U2VsZWN0aW9uXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBIZWxwZXI6IFJlc3RvcmUgYWNjdW11bGF0ZWQgcmVjb3JkcyAoZ3JvdXBlZCBieSBvcmlnaW4gRFMpXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIHJlc3RvcmVBY2N1bXVsYXRlZFJlY29yZHMoXG4gICAgYWNjdW11bGF0ZWRSZWNvcmRzOiBBcnJheTx7IGNvbmZpZ0lkOiBzdHJpbmcsIHJlY29yZDogYW55IH0+LFxuICAgIGRlcHM6IFJlc3RvcmF0aW9uRGVwZW5kZW5jaWVzXG4gICk6IFByb21pc2U8dm9pZD4ge1xuICAgIC8vIExhenktbG9hZCBkZXBlbmRlbmNpZXNcbiAgICBjb25zdCB7IERhdGFTb3VyY2VNYW5hZ2VyIH0gPSBhd2FpdCBpbXBvcnQoJ2ppbXUtY29yZScpXG4gICAgY29uc3QgeyBzZWxlY3RSZWNvcmRzQW5kUHVibGlzaCB9ID0gYXdhaXQgaW1wb3J0KCcuLi9zZWxlY3Rpb24tdXRpbHMnKVxuXG4gICAgY29uc3QgcmVjb3Jkc0J5T3JpZ2luRFMgPSBuZXcgTWFwPGFueSwgYW55W10+KCkgLy8gTWFwPEZlYXR1cmVMYXllckRhdGFTb3VyY2UsIEZlYXR1cmVEYXRhUmVjb3JkW10+XG4gICAgY29uc3QgZHNNYW5hZ2VyID0gRGF0YVNvdXJjZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKVxuXG4gICAgLy8gR3JvdXAgcmVjb3JkcyBieSBvcmlnaW4gRFNcbiAgICBhY2N1bXVsYXRlZFJlY29yZHMuZm9yRWFjaCgocmVjb3JkLCBpbmRleCkgPT4ge1xuICAgICAgY29uc3QgcmVjb3JkSWQgPSByZWNvcmQuZ2V0SWQoKVxuICAgICAgbGV0IG9yaWdpbkRTOiBhbnkgfCBudWxsID0gbnVsbFxuXG4gICAgICAvLyBNZXRob2QgMTogVHJ5IHRvIGdldCBmcm9tIHJlY29yZC5nZXREYXRhU291cmNlKClcbiAgICAgIGNvbnN0IHJlY29yZERTID0gcmVjb3JkLmdldERhdGFTb3VyY2U/LigpXG4gICAgICBpZiAocmVjb3JkRFMpIHtcbiAgICAgICAgb3JpZ2luRFMgPSByZWNvcmREUy5nZXRPcmlnaW5EYXRhU291cmNlcz8uKCk/LlswXSB8fCByZWNvcmREU1xuXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgICBldmVudDogJ2ZvdW5kLW9yaWdpbi1kcy1mcm9tLXJlY29yZC1kcycsXG4gICAgICAgICAgd2lkZ2V0SWQ6IHRoaXMud2lkZ2V0SWQsXG4gICAgICAgICAgcmVjb3JkSW5kZXg6IGluZGV4LFxuICAgICAgICAgIHJlY29yZElkLFxuICAgICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTPy5pZCB8fCAnbnVsbCcsXG4gICAgICAgICAgbWV0aG9kOiAncmVjb3JkLmdldERhdGFTb3VyY2UoKSdcbiAgICAgICAgfSlcbiAgICAgIH1cblxuICAgICAgLy8gTWV0aG9kIDI6IElmIHRoYXQgZmFpbGVkLCBzZWFyY2ggYWxsIGRhdGEgc291cmNlcyBmb3IgYSByZWNvcmQgd2l0aCBtYXRjaGluZyBJRFxuICAgICAgaWYgKCFvcmlnaW5EUykge1xuICAgICAgICBjb25zdCBkc01hcCA9IGRzTWFuYWdlci5nZXREYXRhU291cmNlcygpXG4gICAgICAgIGNvbnN0IGFsbERhdGFTb3VyY2VzID0gT2JqZWN0LnZhbHVlcyhkc01hcClcblxuICAgICAgICBmb3IgKGNvbnN0IGRzIG9mIGFsbERhdGFTb3VyY2VzKSB7XG4gICAgICAgICAgLy8gQ2hlY2sgaWYgdGhpcyBpcyBhIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgICAgICAgICBpZiAoZHMgJiYgdHlwZW9mIChkcyBhcyBhbnkpLmdldEFsbExvYWRlZFJlY29yZHMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGNvbnN0IGFsbFJlY29yZHMgPSAoZHMgYXMgYW55KS5nZXRBbGxMb2FkZWRSZWNvcmRzKCkgfHwgW11cbiAgICAgICAgICAgICAgY29uc3QgbWF0Y2hpbmdSZWNvcmQgPSBhbGxSZWNvcmRzLmZpbmQoKHI6IGFueSkgPT4gci5nZXRJZCgpID09PSByZWNvcmRJZClcblxuICAgICAgICAgICAgICBpZiAobWF0Y2hpbmdSZWNvcmQpIHtcbiAgICAgICAgICAgICAgICBvcmlnaW5EUyA9IChkcyBhcyBhbnkpLmdldE9yaWdpbkRhdGFTb3VyY2VzPy4oKT8uWzBdIHx8IGRzXG5cbiAgICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgICAgICAgICAgICBldmVudDogJ2ZvdW5kLW9yaWdpbi1kcy12aWEtc2VhcmNoJyxcbiAgICAgICAgICAgICAgICAgIHdpZGdldElkOiB0aGlzLndpZGdldElkLFxuICAgICAgICAgICAgICAgICAgcmVjb3JkSW5kZXg6IGluZGV4LFxuICAgICAgICAgICAgICAgICAgcmVjb3JkSWQsXG4gICAgICAgICAgICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ3NlYXJjaGVkLWFsbC1kYXRhLXNvdXJjZXMnLFxuICAgICAgICAgICAgICAgICAgc2VhcmNoZWREU0lkOiBkcy5pZFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgLy8gQ29udGludWUgc2VhcmNoaW5nXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChvcmlnaW5EUykge1xuICAgICAgICBpZiAoIXJlY29yZHNCeU9yaWdpbkRTLmhhcyhvcmlnaW5EUykpIHtcbiAgICAgICAgICByZWNvcmRzQnlPcmlnaW5EUy5zZXQob3JpZ2luRFMsIFtdKVxuICAgICAgICB9XG4gICAgICAgIHJlY29yZHNCeU9yaWdpbkRTLmdldChvcmlnaW5EUykhLnB1c2gocmVjb3JkKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICAgIGV2ZW50OiAnY291bGQtbm90LWZpbmQtb3JpZ2luLWRzLWZvci1yZWNvcmQnLFxuICAgICAgICAgIHdpZGdldElkOiB0aGlzLndpZGdldElkLFxuICAgICAgICAgIHJlY29yZEluZGV4OiBpbmRleCxcbiAgICAgICAgICByZWNvcmRJZCxcbiAgICAgICAgICB3YXJuaW5nOiAncmVjb3JkLXdpbGwtYmUtc2tpcHBlZCdcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgZXZlbnQ6ICdwYW5lbC1vcGVuZWQtcmVzdG9yaW5nLWFjY3VtdWxhdGVkLXJlY29yZHMnLFxuICAgICAgd2lkZ2V0SWQ6IHRoaXMud2lkZ2V0SWQsXG4gICAgICByZXN1bHRzTW9kZTogdGhpcy5zdGF0ZUdldHRlcigpLnJlc3VsdHNNb2RlLFxuICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGgsXG4gICAgICBvcmlnaW5EU0NvdW50OiByZWNvcmRzQnlPcmlnaW5EUy5zaXplXG4gICAgfSlcblxuICAgIC8vIFJlc3RvcmUgc2VsZWN0aW9uIGZvciBlYWNoIG9yaWdpbiBkYXRhIHNvdXJjZVxuICAgIGNvbnN0IHVzZUdyYXBoaWNzTGF5ZXIgPSBkZXBzLmNvbmZpZy51c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0XG4gICAgY29uc3QgZ3JhcGhpY3NMYXllciA9IGRlcHMuZ3JhcGhpY3NMYXllclJlZi5jdXJyZW50IHx8IHVuZGVmaW5lZFxuICAgIGNvbnN0IG1hcFZpZXcgPSBkZXBzLm1hcFZpZXdSZWYuY3VycmVudCB8fCB1bmRlZmluZWRcblxuICAgIGZvciAoY29uc3QgW29yaWdpbkRTLCByZWNvcmRzXSBvZiByZWNvcmRzQnlPcmlnaW5EUy5lbnRyaWVzKCkpIHtcbiAgICAgIGNvbnN0IHJlY29yZElkcyA9IHJlY29yZHMubWFwKHIgPT4gci5nZXRJZCgpKVxuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgc2VsZWN0UmVjb3Jkc0FuZFB1Ymxpc2goXG4gICAgICAgICAgdGhpcy53aWRnZXRJZCxcbiAgICAgICAgICBvcmlnaW5EUyxcbiAgICAgICAgICByZWNvcmRJZHMsXG4gICAgICAgICAgcmVjb3JkcyxcbiAgICAgICAgICB0cnVlLCAvLyBhbHNvUHVibGlzaFRvT3V0cHV0RFNcbiAgICAgICAgICB1c2VHcmFwaGljc0xheWVyLFxuICAgICAgICAgIGdyYXBoaWNzTGF5ZXIsXG4gICAgICAgICAgbWFwVmlld1xuICAgICAgICApXG5cbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICAgIGV2ZW50OiAncGFuZWwtb3BlbmVkLXJlc3RvcmVkLW9yaWdpbi1kcycsXG4gICAgICAgICAgd2lkZ2V0SWQ6IHRoaXMud2lkZ2V0SWQsXG4gICAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgICAgcmVjb3JkQ291bnQ6IHJlY29yZHMubGVuZ3RoLFxuICAgICAgICAgIHpvb21FeGVjdXRlZDogZmFsc2VcbiAgICAgICAgfSlcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgICBldmVudDogJ3BhbmVsLW9wZW5lZC1yZXN0b3JlLW9yaWdpbi1kcy1mYWlsZWQnLFxuICAgICAgICAgIHdpZGdldElkOiB0aGlzLndpZGdldElkLFxuICAgICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEhlbHBlcjogUmVzdG9yZSBsYXN0U2VsZWN0aW9uIChOZXcgbW9kZSlcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgcmVzdG9yZUxhc3RTZWxlY3Rpb24oXG4gICAgbGFzdFNlbGVjdGlvbjogeyByZWNvcmRJZHM6IHN0cmluZ1tdLCBvdXRwdXREc0lkOiBzdHJpbmcsIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBzdHJpbmcgfSxcbiAgICBkZXBzOiBSZXN0b3JhdGlvbkRlcGVuZGVuY2llc1xuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvLyBMYXp5LWxvYWQgZGVwZW5kZW5jaWVzXG4gICAgY29uc3QgeyBEYXRhU291cmNlTWFuYWdlciB9ID0gYXdhaXQgaW1wb3J0KCdqaW11LWNvcmUnKVxuICAgIGNvbnN0IHsgc2VsZWN0UmVjb3Jkc0FuZFB1Ymxpc2ggfSA9IGF3YWl0IGltcG9ydCgnLi4vc2VsZWN0aW9uLXV0aWxzJylcblxuICAgIGNvbnN0IGRzTWFuYWdlciA9IERhdGFTb3VyY2VNYW5hZ2VyLmdldEluc3RhbmNlKClcbiAgICBjb25zdCBvdXRwdXREUyA9IGRzTWFuYWdlci5nZXREYXRhU291cmNlKGxhc3RTZWxlY3Rpb24ub3V0cHV0RHNJZClcblxuICAgIGlmICghb3V0cHV0RFMpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgZXZlbnQ6ICdwYW5lbC1vcGVuZWQtb3V0cHV0RFMtbm90LWZvdW5kJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHRoaXMud2lkZ2V0SWQsXG4gICAgICAgIG91dHB1dERzSWQ6IGxhc3RTZWxlY3Rpb24ub3V0cHV0RHNJZFxuICAgICAgfSlcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIEdldCBvcmlnaW4gRFNcbiAgICBjb25zdCBvcmlnaW5EUyA9IChvdXRwdXREUyBhcyBhbnkpLmdldE9yaWdpbkRhdGFTb3VyY2VzPy4oKT8uWzBdIHx8IG91dHB1dERTXG5cbiAgICAvLyBHZXQgcmVjb3Jkc1xuICAgIGNvbnN0IGFsbFJlY29yZHMgPSAob3V0cHV0RFMgYXMgYW55KS5nZXRBbGxMb2FkZWRSZWNvcmRzKCkgfHwgW11cbiAgICBjb25zdCByZWNvcmRzVG9SZXN0b3JlID0gYWxsUmVjb3Jkcy5maWx0ZXIoKHI6IGFueSkgPT4gXG4gICAgICBsYXN0U2VsZWN0aW9uLnJlY29yZElkcy5pbmNsdWRlcyhyLmdldElkKCkpXG4gICAgKVxuXG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgZXZlbnQ6ICdwYW5lbC1vcGVuZWQtcmVzdG9yaW5nLWxhc3RTZWxlY3Rpb24nLFxuICAgICAgd2lkZ2V0SWQ6IHRoaXMud2lkZ2V0SWQsXG4gICAgICBvdXRwdXREc0lkOiBsYXN0U2VsZWN0aW9uLm91dHB1dERzSWQsXG4gICAgICByZWNvcmRJZHNDb3VudDogbGFzdFNlbGVjdGlvbi5yZWNvcmRJZHMubGVuZ3RoLFxuICAgICAgcmVjb3Jkc0ZvdW5kOiByZWNvcmRzVG9SZXN0b3JlLmxlbmd0aFxuICAgIH0pXG5cbiAgICBjb25zdCB1c2VHcmFwaGljc0xheWVyID0gZGVwcy5jb25maWcudXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodFxuICAgIGNvbnN0IGdyYXBoaWNzTGF5ZXIgPSBkZXBzLmdyYXBoaWNzTGF5ZXJSZWYuY3VycmVudCB8fCB1bmRlZmluZWRcbiAgICBjb25zdCBtYXBWaWV3ID0gZGVwcy5tYXBWaWV3UmVmLmN1cnJlbnQgfHwgdW5kZWZpbmVkXG5cbiAgICB0cnkge1xuICAgICAgYXdhaXQgc2VsZWN0UmVjb3Jkc0FuZFB1Ymxpc2goXG4gICAgICAgIHRoaXMud2lkZ2V0SWQsXG4gICAgICAgIG9yaWdpbkRTLFxuICAgICAgICBsYXN0U2VsZWN0aW9uLnJlY29yZElkcyxcbiAgICAgICAgcmVjb3Jkc1RvUmVzdG9yZSxcbiAgICAgICAgdHJ1ZSxcbiAgICAgICAgdXNlR3JhcGhpY3NMYXllcixcbiAgICAgICAgZ3JhcGhpY3NMYXllcixcbiAgICAgICAgbWFwVmlld1xuICAgICAgKVxuXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAncGFuZWwtb3BlbmVkLXJlc3RvcmVkLWxhc3RTZWxlY3Rpb24nLFxuICAgICAgICB3aWRnZXRJZDogdGhpcy53aWRnZXRJZCxcbiAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgIHJlY29yZENvdW50OiByZWNvcmRzVG9SZXN0b3JlLmxlbmd0aFxuICAgICAgfSlcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ3BhbmVsLW9wZW5lZC1yZXN0b3JlLWxhc3RTZWxlY3Rpb24tZmFpbGVkJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHRoaXMud2lkZ2V0SWQsXG4gICAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhcnMgc2VsZWN0aW9uIGZyb20gdGhlIG1hcCB3aGVuIHRoZSB3aWRnZXQgcGFuZWwgY2xvc2VzLlxuICAgKiBcbiAgICogVGhpcyBtZXRob2Q6XG4gICAqIDEuIENsZWFycyBncmFwaGljcyBsYXllciAoaWYgZW5hYmxlZClcbiAgICogMi4gR3JvdXBzIGFjY3VtdWxhdGVkIHJlY29yZHMgYnkgb3JpZ2luIERTIChpZiB0aGV5IGV4aXN0KVxuICAgKiAzLiBDbGVhcnMgc2VsZWN0aW9uIGZyb20gZWFjaCBvcmlnaW4gRFNcbiAgICogNC4gRmFsbHMgYmFjayB0byBsYXN0U2VsZWN0aW9uIGlmIG5vIGFjY3VtdWxhdGVkIHJlY29yZHNcbiAgICogXG4gICAqIEBwYXJhbSBkZXBzIC0gUnVudGltZSBkZXBlbmRlbmNpZXMgKGdyYXBoaWNzIGxheWVyLCBtYXAgdmlldywgY29uZmlnKVxuICAgKi9cbiAgYXN5bmMgY2xlYXJTZWxlY3Rpb25Gcm9tTWFwKGRlcHM6IFJlc3RvcmF0aW9uRGVwZW5kZW5jaWVzKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3Qgc3RhdGUgPSB0aGlzLnN0YXRlR2V0dGVyKClcbiAgICBjb25zdCB7IGxhc3RTZWxlY3Rpb24sIGFjY3VtdWxhdGVkUmVjb3JkcywgcmVzdWx0c01vZGUgfSA9IHN0YXRlXG5cbiAgICBjb25zdCBpc0FjY3VtdWxhdGlvbk1vZGUgPSByZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbiB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uXG5cbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICBldmVudDogJ2NsZWFyU2VsZWN0aW9uRnJvbU1hcC1jYWxsZWQnLFxuICAgICAgd2lkZ2V0SWQ6IHRoaXMud2lkZ2V0SWQsXG4gICAgICByZXN1bHRzTW9kZSxcbiAgICAgIGlzQWNjdW11bGF0aW9uTW9kZSxcbiAgICAgIGhhc0xhc3RTZWxlY3Rpb246ICEhbGFzdFNlbGVjdGlvbixcbiAgICAgIGxhc3RTZWxlY3Rpb25SZWNvcmRDb3VudDogbGFzdFNlbGVjdGlvbj8ucmVjb3JkSWRzLmxlbmd0aCB8fCAwLFxuICAgICAgaGFzQWNjdW11bGF0ZWRSZWNvcmRzOiAhIShhY2N1bXVsYXRlZFJlY29yZHMgJiYgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDApLFxuICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGFjY3VtdWxhdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICBzZWxlY3Rpb25SZWNvcmRDb3VudDogc3RhdGUuc2VsZWN0aW9uUmVjb3JkQ291bnQgfHwgMCxcbiAgICAgIGhhc1NlbGVjdGlvbjogc3RhdGUuaGFzU2VsZWN0aW9uIHx8IGZhbHNlXG4gICAgfSlcblxuICAgIC8vIEFsd2F5cyBjbGVhciBncmFwaGljcyBsYXllciBmaXJzdCB3aGVuIHBhbmVsIGNsb3Nlc1xuICAgIGlmIChkZXBzLmNvbmZpZy51c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0ICYmIGRlcHMuZ3JhcGhpY3NMYXllclJlZi5jdXJyZW50KSB7XG4gICAgICBkZXBzLmdyYXBoaWNzTGF5ZXJNYW5hZ2VyLmNsZWFyR3JhcGhpY3ModGhpcy53aWRnZXRJZCwgZGVwcy5jb25maWcpXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAncGFuZWwtY2xvc2VkLWdyYXBoaWNzLWxheWVyLWNsZWFyZWQnLFxuICAgICAgICB3aWRnZXRJZDogdGhpcy53aWRnZXRJZCxcbiAgICAgICAgZ3JhcGhpY3NMYXllcklkOiBkZXBzLmdyYXBoaWNzTGF5ZXJSZWYuY3VycmVudC5pZFxuICAgICAgfSlcbiAgICB9XG5cbiAgICAvLyBBbHdheXMgY2xlYXIgYWNjdW11bGF0ZWQgcmVjb3JkcyBpZiB0aGV5IGV4aXN0XG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgZXZlbnQ6ICdjbGVhclNlbGVjdGlvbkZyb21NYXAtY2hlY2tpbmctYWNjdW11bGF0ZWQtcmVjb3JkcycsXG4gICAgICB3aWRnZXRJZDogdGhpcy53aWRnZXRJZCxcbiAgICAgICdjb25kaXRpb24nOiAnYWNjdW11bGF0ZWRSZWNvcmRzICYmIGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwJyxcbiAgICAgICdjb25kaXRpb24tcmVzdWx0JzogISEoYWNjdW11bGF0ZWRSZWNvcmRzICYmIGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwKSxcbiAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiBhY2N1bXVsYXRlZFJlY29yZHM/Lmxlbmd0aCB8fCAwXG4gICAgfSlcblxuICAgIGlmIChhY2N1bXVsYXRlZFJlY29yZHMgJiYgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgIGF3YWl0IHRoaXMuY2xlYXJBY2N1bXVsYXRlZFJlY29yZHMoYWNjdW11bGF0ZWRSZWNvcmRzLCBkZXBzKVxuICAgIH0gZWxzZSBpZiAobGFzdFNlbGVjdGlvbiAmJiBsYXN0U2VsZWN0aW9uLnJlY29yZElkcy5sZW5ndGggPiAwKSB7XG4gICAgICBhd2FpdCB0aGlzLmNsZWFyTGFzdFNlbGVjdGlvbihsYXN0U2VsZWN0aW9uLCBkZXBzKVxuICAgIH0gZWxzZSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAnY2xlYXJTZWxlY3Rpb25Gcm9tTWFwLW5vLXNlbGVjdGlvbi10by1jbGVhcicsXG4gICAgICAgIHdpZGdldElkOiB0aGlzLndpZGdldElkXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBIZWxwZXI6IENsZWFyIGFjY3VtdWxhdGVkIHJlY29yZHMgKGdyb3VwZWQgYnkgb3JpZ2luIERTKVxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBjbGVhckFjY3VtdWxhdGVkUmVjb3JkcyhcbiAgICBhY2N1bXVsYXRlZFJlY29yZHM6IEFycmF5PHsgY29uZmlnSWQ6IHN0cmluZywgcmVjb3JkOiBhbnkgfT4sXG4gICAgZGVwczogUmVzdG9yYXRpb25EZXBlbmRlbmNpZXNcbiAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy8gTGF6eS1sb2FkIGRlcGVuZGVuY2llc1xuICAgIGNvbnN0IHsgRGF0YVNvdXJjZU1hbmFnZXIgfSA9IGF3YWl0IGltcG9ydCgnamltdS1jb3JlJylcbiAgICBjb25zdCB7IGNsZWFyU2VsZWN0aW9uSW5EYXRhU291cmNlcyB9ID0gYXdhaXQgaW1wb3J0KCcuLi9zZWxlY3Rpb24tdXRpbHMnKVxuXG4gICAgY29uc3QgcmVjb3Jkc0J5T3JpZ2luRFMgPSBuZXcgTWFwPGFueSwgYW55W10+KClcbiAgICBjb25zdCBkc01hbmFnZXIgPSBEYXRhU291cmNlTWFuYWdlci5nZXRJbnN0YW5jZSgpXG5cbiAgICAvLyBHcm91cCByZWNvcmRzIGJ5IG9yaWdpbiBEUyAoc2FtZSBsb2dpYyBhcyBhZGRTZWxlY3Rpb25Ub01hcClcbiAgICBhY2N1bXVsYXRlZFJlY29yZHMuZm9yRWFjaCgocmVjb3JkLCBpbmRleCkgPT4ge1xuICAgICAgY29uc3QgcmVjb3JkSWQgPSByZWNvcmQuZ2V0SWQoKVxuICAgICAgbGV0IG9yaWdpbkRTOiBhbnkgfCBudWxsID0gbnVsbFxuXG4gICAgICAvLyBNZXRob2QgMTogVHJ5IHRvIGdldCBmcm9tIHJlY29yZC5nZXREYXRhU291cmNlKClcbiAgICAgIGNvbnN0IHJlY29yZERTID0gcmVjb3JkLmdldERhdGFTb3VyY2U/LigpXG4gICAgICBpZiAocmVjb3JkRFMpIHtcbiAgICAgICAgb3JpZ2luRFMgPSByZWNvcmREUy5nZXRPcmlnaW5EYXRhU291cmNlcz8uKCk/LlswXSB8fCByZWNvcmREU1xuXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgICBldmVudDogJ2NsZWFyLWZvdW5kLW9yaWdpbi1kcy1mcm9tLXJlY29yZC1kcycsXG4gICAgICAgICAgd2lkZ2V0SWQ6IHRoaXMud2lkZ2V0SWQsXG4gICAgICAgICAgcmVjb3JkSW5kZXg6IGluZGV4LFxuICAgICAgICAgIHJlY29yZElkLFxuICAgICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTPy5pZCB8fCAnbnVsbCdcbiAgICAgICAgfSlcbiAgICAgIH1cblxuICAgICAgLy8gTWV0aG9kIDI6IFNlYXJjaCBhbGwgZGF0YSBzb3VyY2VzXG4gICAgICBpZiAoIW9yaWdpbkRTKSB7XG4gICAgICAgIGNvbnN0IGRzTWFwID0gZHNNYW5hZ2VyLmdldERhdGFTb3VyY2VzKClcbiAgICAgICAgY29uc3QgYWxsRGF0YVNvdXJjZXMgPSBPYmplY3QudmFsdWVzKGRzTWFwKVxuXG4gICAgICAgIGZvciAoY29uc3QgZHMgb2YgYWxsRGF0YVNvdXJjZXMpIHtcbiAgICAgICAgICBpZiAoZHMgJiYgdHlwZW9mIChkcyBhcyBhbnkpLmdldEFsbExvYWRlZFJlY29yZHMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGNvbnN0IGFsbFJlY29yZHMgPSAoZHMgYXMgYW55KS5nZXRBbGxMb2FkZWRSZWNvcmRzKCkgfHwgW11cbiAgICAgICAgICAgICAgY29uc3QgbWF0Y2hpbmdSZWNvcmQgPSBhbGxSZWNvcmRzLmZpbmQoKHI6IGFueSkgPT4gci5nZXRJZCgpID09PSByZWNvcmRJZClcblxuICAgICAgICAgICAgICBpZiAobWF0Y2hpbmdSZWNvcmQpIHtcbiAgICAgICAgICAgICAgICBvcmlnaW5EUyA9IChkcyBhcyBhbnkpLmdldE9yaWdpbkRhdGFTb3VyY2VzPy4oKT8uWzBdIHx8IGRzXG5cbiAgICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgICAgICAgICAgICBldmVudDogJ2NsZWFyLWZvdW5kLW9yaWdpbi1kcy12aWEtc2VhcmNoJyxcbiAgICAgICAgICAgICAgICAgIHdpZGdldElkOiB0aGlzLndpZGdldElkLFxuICAgICAgICAgICAgICAgICAgcmVjb3JkSW5kZXg6IGluZGV4LFxuICAgICAgICAgICAgICAgICAgcmVjb3JkSWQsXG4gICAgICAgICAgICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgLy8gQ29udGludWUgc2VhcmNoaW5nXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChvcmlnaW5EUykge1xuICAgICAgICBpZiAoIXJlY29yZHNCeU9yaWdpbkRTLmhhcyhvcmlnaW5EUykpIHtcbiAgICAgICAgICByZWNvcmRzQnlPcmlnaW5EUy5zZXQob3JpZ2luRFMsIFtdKVxuICAgICAgICB9XG4gICAgICAgIHJlY29yZHNCeU9yaWdpbkRTLmdldChvcmlnaW5EUykhLnB1c2gocmVjb3JkKVxuICAgICAgfVxuICAgIH0pXG5cbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICBldmVudDogJ3BhbmVsLWNsb3NlZC1jbGVhcmluZy1hY2N1bXVsYXRlZC1yZWNvcmRzJyxcbiAgICAgIHdpZGdldElkOiB0aGlzLndpZGdldElkLFxuICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGgsXG4gICAgICBvcmlnaW5EU0NvdW50OiByZWNvcmRzQnlPcmlnaW5EUy5zaXplXG4gICAgfSlcblxuICAgIC8vIENsZWFyIHNlbGVjdGlvbiBmcm9tIGVhY2ggb3JpZ2luIERTXG4gICAgY29uc3QgdXNlR3JhcGhpY3NMYXllciA9IGRlcHMuY29uZmlnLnVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHRcbiAgICBjb25zdCBncmFwaGljc0xheWVyID0gZGVwcy5ncmFwaGljc0xheWVyUmVmLmN1cnJlbnQgfHwgdW5kZWZpbmVkXG5cbiAgICBmb3IgKGNvbnN0IFtvcmlnaW5EUywgcmVjb3Jkc10gb2YgcmVjb3Jkc0J5T3JpZ2luRFMuZW50cmllcygpKSB7XG4gICAgICB0cnkge1xuICAgICAgICAvLyBVc2UgY2xlYXJTZWxlY3Rpb25JbkRhdGFTb3VyY2VzIHRvIHByb3Blcmx5IHB1Ymxpc2ggZW1wdHkgc2VsZWN0aW9uIG1lc3NhZ2VcbiAgICAgICAgLy8gVGhpcyBjbGVhcnMgdGhlICNkYXRhX3M9Li4uIGhhc2ggcGFyYW1ldGVyXG4gICAgICAgIGF3YWl0IGNsZWFyU2VsZWN0aW9uSW5EYXRhU291cmNlcyhcbiAgICAgICAgICB0aGlzLndpZGdldElkLFxuICAgICAgICAgIG9yaWdpbkRTLFxuICAgICAgICAgIHVzZUdyYXBoaWNzTGF5ZXIsXG4gICAgICAgICAgZ3JhcGhpY3NMYXllclxuICAgICAgICApXG5cbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICAgIGV2ZW50OiAncGFuZWwtY2xvc2VkLWNsZWFyZWQtb3JpZ2luLWRzJyxcbiAgICAgICAgICB3aWRnZXRJZDogdGhpcy53aWRnZXRJZCxcbiAgICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgICByZWNvcmRDb3VudDogcmVjb3Jkcy5sZW5ndGhcbiAgICAgICAgfSlcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgICBldmVudDogJ3BhbmVsLWNsb3NlZC1jbGVhci1vcmlnaW4tZHMtZmFpbGVkJyxcbiAgICAgICAgICB3aWRnZXRJZDogdGhpcy53aWRnZXRJZCxcbiAgICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgICBlcnJvcjogZXJyb3IubWVzc2FnZVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBIZWxwZXI6IENsZWFyIGxhc3RTZWxlY3Rpb24gKE5ldyBtb2RlKVxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBjbGVhckxhc3RTZWxlY3Rpb24oXG4gICAgbGFzdFNlbGVjdGlvbjogeyByZWNvcmRJZHM6IHN0cmluZ1tdLCBvdXRwdXREc0lkOiBzdHJpbmcsIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBzdHJpbmcgfSxcbiAgICBkZXBzOiBSZXN0b3JhdGlvbkRlcGVuZGVuY2llc1xuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvLyBMYXp5LWxvYWQgZGVwZW5kZW5jaWVzXG4gICAgY29uc3QgeyBEYXRhU291cmNlTWFuYWdlciB9ID0gYXdhaXQgaW1wb3J0KCdqaW11LWNvcmUnKVxuICAgIGNvbnN0IHsgY2xlYXJTZWxlY3Rpb25JbkRhdGFTb3VyY2VzIH0gPSBhd2FpdCBpbXBvcnQoJy4uL3NlbGVjdGlvbi11dGlscycpXG5cbiAgICBjb25zdCBkc01hbmFnZXIgPSBEYXRhU291cmNlTWFuYWdlci5nZXRJbnN0YW5jZSgpXG4gICAgY29uc3Qgb3V0cHV0RFMgPSBkc01hbmFnZXIuZ2V0RGF0YVNvdXJjZShsYXN0U2VsZWN0aW9uLm91dHB1dERzSWQpXG5cbiAgICBpZiAoIW91dHB1dERTKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAncGFuZWwtY2xvc2VkLW91dHB1dERTLW5vdC1mb3VuZCcsXG4gICAgICAgIHdpZGdldElkOiB0aGlzLndpZGdldElkLFxuICAgICAgICBvdXRwdXREc0lkOiBsYXN0U2VsZWN0aW9uLm91dHB1dERzSWRcbiAgICAgIH0pXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCBvcmlnaW5EUyA9IChvdXRwdXREUyBhcyBhbnkpLmdldE9yaWdpbkRhdGFTb3VyY2VzPy4oKT8uWzBdIHx8IG91dHB1dERTXG5cbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICBldmVudDogJ3BhbmVsLWNsb3NlZC1jbGVhcmluZy1sYXN0U2VsZWN0aW9uJyxcbiAgICAgIHdpZGdldElkOiB0aGlzLndpZGdldElkLFxuICAgICAgb3V0cHV0RHNJZDogbGFzdFNlbGVjdGlvbi5vdXRwdXREc0lkLFxuICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWRcbiAgICB9KVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVzZUdyYXBoaWNzTGF5ZXIgPSBkZXBzLmNvbmZpZy51c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0XG4gICAgICBjb25zdCBncmFwaGljc0xheWVyID0gZGVwcy5ncmFwaGljc0xheWVyUmVmLmN1cnJlbnQgfHwgdW5kZWZpbmVkXG5cbiAgICAgIC8vIFVzZSBjbGVhclNlbGVjdGlvbkluRGF0YVNvdXJjZXMgdG8gcHJvcGVybHkgcHVibGlzaCBlbXB0eSBzZWxlY3Rpb24gbWVzc2FnZVxuICAgICAgLy8gVGhpcyBjbGVhcnMgdGhlICNkYXRhX3M9Li4uIGhhc2ggcGFyYW1ldGVyXG4gICAgICBhd2FpdCBjbGVhclNlbGVjdGlvbkluRGF0YVNvdXJjZXMoXG4gICAgICAgIHRoaXMud2lkZ2V0SWQsXG4gICAgICAgIG9yaWdpbkRTLFxuICAgICAgICB1c2VHcmFwaGljc0xheWVyLFxuICAgICAgICBncmFwaGljc0xheWVyXG4gICAgICApXG5cbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgZXZlbnQ6ICdwYW5lbC1jbG9zZWQtY2xlYXJlZC1sYXN0U2VsZWN0aW9uJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHRoaXMud2lkZ2V0SWQsXG4gICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkXG4gICAgICB9KVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAncGFuZWwtY2xvc2VkLWNsZWFyLWxhc3RTZWxlY3Rpb24tZmFpbGVkJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHRoaXMud2lkZ2V0SWQsXG4gICAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8gU2VjdGlvbiAzLjM6IE1hcCBJZGVudGlmeSBSZXN0b3JhdGlvblxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vIFRPRE86IEltcGxlbWVudCBoYW5kbGVSZXN0b3JlT25JZGVudGlmeUNsb3NlKClcbn1cbiIsImltcG9ydCB7IHR5cGUgQWxsV2lkZ2V0UHJvcHMgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyB0eXBlIElNQ29uZmlnLCBTZWxlY3Rpb25UeXBlIH0gZnJvbSAnLi4vLi4vY29uZmlnJ1xuaW1wb3J0IHsgY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlciB9IGZyb20gJ3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uJ1xuXG5jb25zdCBkZWJ1Z0xvZ2dlciA9IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIoKVxuXG5pbnRlcmZhY2UgVXJsQ29uc3VtcHRpb25DYWxsYmFja3Mge1xuICBvbkluaXRpYWxWYWx1ZUZvdW5kOiAodmFsdWU6IHsgc2hvcnRJZDogc3RyaW5nLCB2YWx1ZTogc3RyaW5nIH0gfCB1bmRlZmluZWQpID0+IHZvaWRcbiAgb25Nb2RlUmVzZXROZWVkZWQ/OiAoKSA9PiB2b2lkXG59XG5cbi8qKlxuICogVXRpbGl0eSB0byBtYW5hZ2UgVVJMIHBhcmFtZXRlciBjb25zdW1wdGlvbiBhbmQgZGVlcCBsaW5raW5nLlxuICogXG4gKiBIYW5kbGVzIGJvdGggSGFzaCBmcmFnbWVudHMgKCMpIGFuZCBRdWVyeSBTdHJpbmdzICg/KSwgd2l0aCBIYXNoIHRha2luZyBwcmlvcml0eS5cbiAqIEltcGxlbWVudHMgYXRvbWljIGNvbnN1bXB0aW9uIHRvIHByZXZlbnQgaW5maW5pdGUgbG9vcHMuXG4gKiBcbiAqIFBhcnQgb2YgQ2h1bmsgMTogVVJMIFBhcmFtZXRlciBDb25zdW1wdGlvbiBleHRyYWN0aW9uLlxuICogXG4gKiBOb3RlOiBUaGlzIGlzIGEgdXRpbGl0eSBjbGFzcyAobm90IGEgaG9vaykgdG8gd29yayB3aXRoIGNsYXNzIGNvbXBvbmVudHMuXG4gKi9cbmV4cG9ydCBjbGFzcyBVcmxDb25zdW1wdGlvbk1hbmFnZXIge1xuICBwcml2YXRlIGxhc3RQcm9jZXNzZWRIYXNoOiBzdHJpbmcgPSAnJ1xuICBwcml2YXRlIGlzUHJvY2Vzc2luZzogYm9vbGVhbiA9IGZhbHNlXG4gIHByaXZhdGUgaGFzaENoYW5nZUhhbmRsZXI6ICgoKSA9PiB2b2lkKSB8IG51bGwgPSBudWxsXG5cbiAgLyoqXG4gICAqIENoZWNrcyBVUkwgZm9yIGhhc2ggYW5kIHF1ZXJ5IHN0cmluZyBwYXJhbWV0ZXJzIG1hdGNoaW5nIGNvbmZpZ3VyZWQgc2hvcnRJZHMuXG4gICAqIEhhc2ggcGFyYW1ldGVycyB0YWtlIHByaW9yaXR5IG92ZXIgcXVlcnkgc3RyaW5nIHBhcmFtZXRlcnMuXG4gICAqL1xuICBjaGVja1VybFBhcmFtZXRlcnMoXG4gICAgcHJvcHM6IEFsbFdpZGdldFByb3BzPElNQ29uZmlnPixcbiAgICByZXN1bHRzTW9kZTogU2VsZWN0aW9uVHlwZSxcbiAgICBjYWxsYmFja3M6IFVybENvbnN1bXB0aW9uQ2FsbGJhY2tzXG4gICk6IHZvaWQge1xuICAgIGNvbnN0IHsgY29uZmlnLCBpZCB9ID0gcHJvcHNcbiAgICBjb25zdCB7IG9uSW5pdGlhbFZhbHVlRm91bmQsIG9uTW9kZVJlc2V0TmVlZGVkIH0gPSBjYWxsYmFja3NcblxuICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSC1FWEVDJywge1xuICAgICAgZXZlbnQ6ICd1cmxjb25zdW1wdGlvbi1jaGVja3VybHBhcmFtZXRlcnMtZW50cnknLFxuICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgaGFzUXVlcnlJdGVtczogISFjb25maWcucXVlcnlJdGVtcz8ubGVuZ3RoLFxuICAgICAgaXNQcm9jZXNzaW5nOiB0aGlzLmlzUHJvY2Vzc2luZyxcbiAgICAgIGxhc3RQcm9jZXNzZWRIYXNoOiB0aGlzLmxhc3RQcm9jZXNzZWRIYXNoLFxuICAgICAgY3VycmVudEhhc2g6IHdpbmRvdy5sb2NhdGlvbi5oYXNoLnN1YnN0cmluZygxKSxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG5cbiAgICBpZiAoIWNvbmZpZy5xdWVyeUl0ZW1zPy5sZW5ndGgpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSC1FWEVDJywge1xuICAgICAgICBldmVudDogJ3VybGNvbnN1bXB0aW9uLWV4aXQtbm8tcXVlcnktaXRlbXMnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIFByZXZlbnQgY29uY3VycmVudCBwcm9jZXNzaW5nXG4gICAgaWYgKHRoaXMuaXNQcm9jZXNzaW5nKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gtRVhFQycsIHtcbiAgICAgICAgZXZlbnQ6ICd1cmxjb25zdW1wdGlvbi1leGl0LWFscmVhZHktcHJvY2Vzc2luZycsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc3Qgc2hvcnRJZHMgPSBjb25maWcucXVlcnlJdGVtc1xuICAgICAgLm1hcChpdGVtID0+IGl0ZW0uc2hvcnRJZClcbiAgICAgIC5maWx0ZXIoc2lkID0+IHNpZCAhPSBudWxsICYmIHNpZC50cmltKCkgIT09ICcnKVxuXG4gICAgaWYgKHNob3J0SWRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNILUVYRUMnLCB7XG4gICAgICAgIGV2ZW50OiAndXJsY29uc3VtcHRpb24tZXhpdC1uby1zaG9ydGlkcycsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc3QgaGFzaCA9IHdpbmRvdy5sb2NhdGlvbi5oYXNoLnN1YnN0cmluZygxKVxuICAgIGNvbnN0IHF1ZXJ5ID0gd2luZG93LmxvY2F0aW9uLnNlYXJjaC5zdWJzdHJpbmcoMSlcbiAgICBcbiAgICB0aGlzLmlzUHJvY2Vzc2luZyA9IHRydWVcblxuICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSC1FWEVDJywge1xuICAgICAgZXZlbnQ6ICd1cmxjb25zdW1wdGlvbi1wYXJzaW5nLXBhcmFtcycsXG4gICAgICB3aWRnZXRJZDogaWQsXG4gICAgICBoYXNoLFxuICAgICAgcXVlcnksXG4gICAgICBzaG9ydElkcyxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG5cbiAgICBjb25zdCBoYXNoUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhoYXNoKVxuICAgIGNvbnN0IHF1ZXJ5UGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhxdWVyeSlcblxuICAgIGxldCBmb3VuZFNob3J0SWQ6IHN0cmluZyB8IG51bGwgPSBudWxsXG4gICAgbGV0IGZvdW5kVmFsdWU6IHN0cmluZyB8IG51bGwgPSBudWxsXG4gICAgbGV0IGZvdW5kSW46ICdoYXNoJyB8ICdxdWVyeScgfCBudWxsID0gbnVsbFxuXG4gICAgLy8gUFJJT1JJVFkgMTogSGFzaCBmcmFnbWVudHMgKGFsd2F5cyB3aW4pXG4gICAgZm9yIChjb25zdCBzaWQgb2Ygc2hvcnRJZHMpIHtcbiAgICAgIGlmIChoYXNoUGFyYW1zLmhhcyhzaWQpKSB7XG4gICAgICAgIGZvdW5kU2hvcnRJZCA9IHNpZFxuICAgICAgICBmb3VuZFZhbHVlID0gaGFzaFBhcmFtcy5nZXQoc2lkKVxuICAgICAgICBmb3VuZEluID0gJ2hhc2gnXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gUFJJT1JJVFkgMjogUXVlcnkgc3RyaW5nIChpZiBubyBoYXNoIG1hdGNoKVxuICAgIGlmICghZm91bmRTaG9ydElkKSB7XG4gICAgICBmb3IgKGNvbnN0IHNpZCBvZiBzaG9ydElkcykge1xuICAgICAgICBpZiAocXVlcnlQYXJhbXMuaGFzKHNpZCkpIHtcbiAgICAgICAgICBmb3VuZFNob3J0SWQgPSBzaWRcbiAgICAgICAgICBmb3VuZFZhbHVlID0gcXVlcnlQYXJhbXMuZ2V0KHNpZClcbiAgICAgICAgICBmb3VuZEluID0gJ3F1ZXJ5J1xuICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gtRVhFQycsIHtcbiAgICAgIGV2ZW50OiAndXJsY29uc3VtcHRpb24tc2VhcmNoLWNvbXBsZXRlJyxcbiAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgIGZvdW5kU2hvcnRJZCxcbiAgICAgIGZvdW5kVmFsdWUsXG4gICAgICBmb3VuZEluLFxuICAgICAgaGFzTWF0Y2g6ICEhKGZvdW5kU2hvcnRJZCAmJiBmb3VuZFZhbHVlICE9PSBudWxsKSxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG5cbiAgICBpZiAoZm91bmRTaG9ydElkICYmIGZvdW5kVmFsdWUgIT09IG51bGwpIHtcbiAgICAgIC8vIFRyYWNrIG9ubHkgdGhlIHNwZWNpZmljIHNob3J0SWQgcGFyYW1ldGVyIChlLmcuLCBcInBpbj0yMjIzMDU5MDEzXCIpXG4gICAgICAvLyBOT1QgdGhlIGVudGlyZSBoYXNoIHN0cmluZyB3aXRoIGRhdGFfcyBhbmQgb3RoZXIgcGFyYW1ldGVyc1xuICAgICAgY29uc3QgY3VycmVudFNob3J0SWRQYXJhbSA9IGAke2ZvdW5kU2hvcnRJZH09JHtmb3VuZFZhbHVlfWBcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNILUVYRUMnLCB7XG4gICAgICAgIGV2ZW50OiAndXJsY29uc3VtcHRpb24tY2hlY2tpbmctbGFzdHByb2Nlc3NlZGhhc2gnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIGN1cnJlbnRTaG9ydElkUGFyYW0sXG4gICAgICAgIGxhc3RQcm9jZXNzZWRIYXNoOiB0aGlzLmxhc3RQcm9jZXNzZWRIYXNoLFxuICAgICAgICB3aWxsU2tpcDogdGhpcy5sYXN0UHJvY2Vzc2VkSGFzaCA9PT0gY3VycmVudFNob3J0SWRQYXJhbSxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgXG4gICAgICAvLyBTa2lwIGlmIHdlJ3ZlIGFscmVhZHkgcHJvY2Vzc2VkIHRoaXMgZXhhY3Qgc2hvcnRJZCBwYXJhbWV0ZXJcbiAgICAgIGlmICh0aGlzLmxhc3RQcm9jZXNzZWRIYXNoID09PSBjdXJyZW50U2hvcnRJZFBhcmFtKSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSC1FWEVDJywge1xuICAgICAgICAgIGV2ZW50OiAndXJsY29uc3VtcHRpb24tZXhpdC1oYXNoLWFscmVhZHktcHJvY2Vzc2VkJyxcbiAgICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgICAgY3VycmVudFNob3J0SWRQYXJhbSxcbiAgICAgICAgICBsYXN0UHJvY2Vzc2VkSGFzaDogdGhpcy5sYXN0UHJvY2Vzc2VkSGFzaCxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfSlcbiAgICAgICAgdGhpcy5pc1Byb2Nlc3NpbmcgPSBmYWxzZVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gVXBkYXRlIGxhc3RQcm9jZXNzZWRIYXNoIHRvIHRyYWNrIHRoaXMgc3BlY2lmaWMgc2hvcnRJZCBwYXJhbWV0ZXJcbiAgICAgIHRoaXMubGFzdFByb2Nlc3NlZEhhc2ggPSBjdXJyZW50U2hvcnRJZFBhcmFtXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gnLCB7XG4gICAgICAgIGV2ZW50OiAndXJsLXBhcmFtLWRldGVjdGVkJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICBzaG9ydElkOiBmb3VuZFNob3J0SWQsXG4gICAgICAgIHZhbHVlOiBmb3VuZFZhbHVlLFxuICAgICAgICBmb3VuZEluLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIC8vIFJlc2V0IHRvIE5ldyBtb2RlIHdoZW4gaGFzaCBwYXJhbWV0ZXIgaXMgZGV0ZWN0ZWQgdG8gYXZvaWQgYnVncyB3aXRoIGFjY3VtdWxhdGlvbiBtb2Rlc1xuICAgICAgaWYgKHJlc3VsdHNNb2RlICE9PSBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvbiAmJiBvbk1vZGVSZXNldE5lZWRlZCkge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gnLCB7XG4gICAgICAgICAgZXZlbnQ6ICdtb2RlLXJlc2V0LW5lZWRlZC1vbi1oYXNoLWRldGVjdGlvbicsXG4gICAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICAgIGN1cnJlbnRNb2RlOiByZXN1bHRzTW9kZSxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfSlcbiAgICAgICAgb25Nb2RlUmVzZXROZWVkZWQoKVxuICAgICAgfVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gtRVhFQycsIHtcbiAgICAgICAgZXZlbnQ6ICd1cmxjb25zdW1wdGlvbi1jYWxsaW5nLW9uaW5pdGlhbHZhbHVlZm91bmQnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIHNob3J0SWQ6IGZvdW5kU2hvcnRJZCxcbiAgICAgICAgdmFsdWU6IGZvdW5kVmFsdWUsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgb25Jbml0aWFsVmFsdWVGb3VuZCh7IHNob3J0SWQ6IGZvdW5kU2hvcnRJZCwgdmFsdWU6IGZvdW5kVmFsdWUgfSlcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNILUVYRUMnLCB7XG4gICAgICAgIGV2ZW50OiAndXJsY29uc3VtcHRpb24tb25pbml0aWFsdmFsdWVmb3VuZC1yZXR1cm5lZCcsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gtRVhFQycsIHtcbiAgICAgICAgZXZlbnQ6ICd1cmxjb25zdW1wdGlvbi1uby1tYXRjaC1jYWxsaW5nLW9uaW5pdGlhbHZhbHVlZm91bmQtdW5kZWZpbmVkJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICAvLyBObyBtYXRjaGluZyBwYXJhbWV0ZXJzIGZvdW5kIC0gY2xlYXIgc3RhdGVcbiAgICAgIG9uSW5pdGlhbFZhbHVlRm91bmQodW5kZWZpbmVkKVxuICAgIH1cbiAgICBcbiAgICB0aGlzLmlzUHJvY2Vzc2luZyA9IGZhbHNlXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdIQVNILUVYRUMnLCB7XG4gICAgICBldmVudDogJ3VybGNvbnN1bXB0aW9uLWNoZWNrdXJscGFyYW1ldGVycy1leGl0JyxcbiAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlcyBhIGhhc2ggcGFyYW1ldGVyIGZyb20gdGhlIFVSTC5cbiAgICogVXNlZCB3aGVuIHN3aXRjaGluZyB0byBhY2N1bXVsYXRpb24gbW9kZXMgdG8gY29uc3VtZSB0aGUgZGVlcCBsaW5rLlxuICAgKi9cbiAgcmVtb3ZlSGFzaFBhcmFtZXRlcihzaG9ydElkOiBzdHJpbmcsIHdpZGdldElkOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBpZiAoIXNob3J0SWQpIHJldHVyblxuICAgIFxuICAgIGNvbnN0IGhhc2ggPSB3aW5kb3cubG9jYXRpb24uaGFzaC5zdWJzdHJpbmcoMSlcbiAgICBjb25zdCB1cmxQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKGhhc2gpXG4gICAgXG4gICAgaWYgKHVybFBhcmFtcy5oYXMoc2hvcnRJZCkpIHtcbiAgICAgIHVybFBhcmFtcy5kZWxldGUoc2hvcnRJZClcbiAgICAgIGNvbnN0IG5ld0hhc2ggPSB1cmxQYXJhbXMudG9TdHJpbmcoKVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gnLCB7XG4gICAgICAgIGV2ZW50OiAncmVtb3ZlSGFzaFBhcmFtZXRlcicsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICBzaG9ydElkLFxuICAgICAgICBuZXdIYXNoOiBuZXdIYXNoID8gYCMke25ld0hhc2h9YCA6ICcoZW1wdHkpJyxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgXG4gICAgICAvLyBVcGRhdGUgdGhlIFVSTCB3aXRob3V0IHRyaWdnZXJpbmcgYSByZWxvYWRcbiAgICAgIC8vIEFsd2F5cyBwcmVzZXJ2ZSBwYXRobmFtZSBhbmQgcXVlcnkgc3RyaW5nLCBvbmx5IHVwZGF0ZSBoYXNoXG4gICAgICB3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUobnVsbCwgJycsIFxuICAgICAgICB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgKyB3aW5kb3cubG9jYXRpb24uc2VhcmNoICsgKG5ld0hhc2ggPyBgIyR7bmV3SGFzaH1gIDogJycpXG4gICAgICApXG4gICAgICBcbiAgICAgIC8vIFJlc2V0IHRyYWNraW5nIHNvIGl0IGNhbiBiZSBwcm9jZXNzZWQgYWdhaW4gaWYgbmVlZGVkXG4gICAgICB0aGlzLmxhc3RQcm9jZXNzZWRIYXNoID0gJydcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB1cCB0aGUgbWFuYWdlciAobm8gYXV0b25vbW91cyBVUkwgY2hlY2tpbmcpLlxuICAgKiBRdWVyeVNpbXBsZSBzaG91bGQgb25seSBwcm9jZXNzIGhhc2ggcGFyYW1ldGVycyB3aGVuIEhlbHBlclNpbXBsZSBleHBsaWNpdGx5IHRyaWdnZXJzIGl0XG4gICAqIHZpYSBPUEVOX1dJREdFVF9FVkVOVC4gVGhpcyBlbnN1cmVzIEhlbHBlclNpbXBsZSByZW1haW5zIHRoZSBvcmNoZXN0cmF0b3IuXG4gICAqL1xuICBzZXR1cChcbiAgICBwcm9wczogQWxsV2lkZ2V0UHJvcHM8SU1Db25maWc+LFxuICAgIHJlc3VsdHNNb2RlOiBTZWxlY3Rpb25UeXBlLFxuICAgIGNhbGxiYWNrczogVXJsQ29uc3VtcHRpb25DYWxsYmFja3NcbiAgKTogdm9pZCB7XG4gICAgLy8gRG8gTk9UIGF1dG9tYXRpY2FsbHkgY2hlY2sgVVJMIHBhcmFtZXRlcnNcbiAgICAvLyBEbyBOT1Qgc2V0IHVwIGhhc2hjaGFuZ2UgbGlzdGVuZXJcbiAgICAvLyBRdWVyeVNpbXBsZSB3aWxsIG9ubHkgcHJvY2VzcyBoYXNoIHdoZW4gSGVscGVyU2ltcGxlIGV4cGxpY2l0bHkgb3BlbnMgdGhlIHdpZGdldFxuICAgIC8vIFRoaXMgZW5zdXJlcyBIZWxwZXJTaW1wbGUgcmVtYWlucyB0aGUgb3JjaGVzdHJhdG9yXG4gIH1cblxuICAvKipcbiAgICogQ2xlYW5zIHVwIGhhc2ggY2hhbmdlIGxpc3RlbmVyLlxuICAgKi9cbiAgY2xlYW51cCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5oYXNoQ2hhbmdlSGFuZGxlcikge1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2hhc2hjaGFuZ2UnLCB0aGlzLmhhc2hDaGFuZ2VIYW5kbGVyKVxuICAgICAgdGhpcy5oYXNoQ2hhbmdlSGFuZGxlciA9IG51bGxcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7IHR5cGUgQWxsV2lkZ2V0UHJvcHMgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyB0eXBlIElNQ29uZmlnIH0gZnJvbSAnLi4vLi4vY29uZmlnJ1xuaW1wb3J0IHsgY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlciB9IGZyb20gJ3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uJ1xuXG5jb25zdCBkZWJ1Z0xvZ2dlciA9IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIoKVxuXG4vKipcbiAqIEN1c3RvbSBldmVudCBuYW1lIGZvciBRdWVyeVNpbXBsZSB0byBub3RpZnkgSGVscGVyU2ltcGxlIG9mIHdpZGdldCBvcGVuL2Nsb3NlIHN0YXRlLlxuICovXG5jb25zdCBRVUVSWVNJTVBMRV9XSURHRVRfU1RBVEVfRVZFTlQgPSAncXVlcnlzaW1wbGUtd2lkZ2V0LXN0YXRlLWNoYW5nZWQnXG5cbmludGVyZmFjZSBWaXNpYmlsaXR5Q2FsbGJhY2tzIHtcbiAgb25WaXNpYmlsaXR5Q2hhbmdlPzogKGlzVmlzaWJsZTogYm9vbGVhbikgPT4gdm9pZFxufVxuXG4vKipcbiAqIFV0aWxpdHkgdG8gbWFuYWdlIHdpZGdldCBwYW5lbCB2aXNpYmlsaXR5IGRldGVjdGlvbiBhbmQgSGVscGVyU2ltcGxlIG5vdGlmaWNhdGlvbi5cbiAqIFxuICogVXNlcyBJbnRlcnNlY3Rpb25PYnNlcnZlciBmb3IgZWZmaWNpZW50IERPTS1sZXZlbCB2aXNpYmlsaXR5IHRyYWNraW5nLlxuICogRmFsbHMgYmFjayB0byBwZXJpb2RpYyBjaGVja2luZyBpZiBJbnRlcnNlY3Rpb25PYnNlcnZlciBpcyBub3QgYXZhaWxhYmxlLlxuICogXG4gKiBQYXJ0IG9mIENodW5rIDI6IFdpZGdldCBWaXNpYmlsaXR5IEVuZ2luZSBleHRyYWN0aW9uLlxuICogXG4gKiBOb3RlOiBUaGlzIGlzIGEgdXRpbGl0eSBjbGFzcyAobm90IGEgaG9vaykgdG8gd29yayB3aXRoIGNsYXNzIGNvbXBvbmVudHMuXG4gKi9cbmV4cG9ydCBjbGFzcyBXaWRnZXRWaXNpYmlsaXR5TWFuYWdlciB7XG4gIHByaXZhdGUgdmlzaWJpbGl0eU9ic2VydmVyOiBJbnRlcnNlY3Rpb25PYnNlcnZlciB8IG51bGwgPSBudWxsXG4gIHByaXZhdGUgdmlzaWJpbGl0eUNoZWNrSW50ZXJ2YWw6IG51bWJlciB8IG51bGwgPSBudWxsXG4gIHByaXZhdGUgaXNQYW5lbFZpc2libGU6IGJvb2xlYW4gPSBmYWxzZVxuICBwcml2YXRlIHdpZGdldEVsZW1lbnQ6IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGxcblxuICAvKipcbiAgICogQ2hlY2tzIGlmIHRoZSB3aWRnZXQgZWxlbWVudCBpcyBjdXJyZW50bHkgdmlzaWJsZS5cbiAgICogRmFsbGJhY2sgbWV0aG9kIHdoZW4gSW50ZXJzZWN0aW9uT2JzZXJ2ZXIgaXMgbm90IGF2YWlsYWJsZS5cbiAgICovXG4gIHByaXZhdGUgY2hlY2tWaXNpYmlsaXR5KCk6IGJvb2xlYW4ge1xuICAgIGlmICghdGhpcy53aWRnZXRFbGVtZW50KSByZXR1cm4gZmFsc2VcbiAgICBcbiAgICBjb25zdCBlbGVtZW50ID0gdGhpcy53aWRnZXRFbGVtZW50XG4gICAgY29uc3Qgc3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KVxuICAgIGNvbnN0IHJlY3QgPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG4gICAgXG4gICAgY29uc3QgaXNWaXNpYmxlID0gKFxuICAgICAgc3R5bGUuZGlzcGxheSAhPT0gJ25vbmUnICYmXG4gICAgICBzdHlsZS52aXNpYmlsaXR5ICE9PSAnaGlkZGVuJyAmJlxuICAgICAgc3R5bGUub3BhY2l0eSAhPT0gJzAnICYmXG4gICAgICByZWN0LndpZHRoID4gMCAmJlxuICAgICAgcmVjdC5oZWlnaHQgPiAwICYmXG4gICAgICByZWN0LnRvcCA8IHdpbmRvdy5pbm5lckhlaWdodCAmJlxuICAgICAgcmVjdC5ib3R0b20gPiAwICYmXG4gICAgICByZWN0LmxlZnQgPCB3aW5kb3cuaW5uZXJXaWR0aCAmJlxuICAgICAgcmVjdC5yaWdodCA+IDBcbiAgICApXG4gICAgXG4gICAgcmV0dXJuIGlzVmlzaWJsZVxuICB9XG5cbiAgLyoqXG4gICAqIE5vdGlmaWVzIEhlbHBlclNpbXBsZSBvZiBwYW5lbCB2aXNpYmlsaXR5IHN0YXRlIGNoYW5nZXMuXG4gICAqL1xuICBwcml2YXRlIG5vdGlmeUhlbHBlclNpbXBsZU9mUGFuZWxTdGF0ZShpc1Zpc2libGU6IGJvb2xlYW4sIHdpZGdldElkOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBjb25zdCBldmVudCA9IG5ldyBDdXN0b21FdmVudChRVUVSWVNJTVBMRV9XSURHRVRfU1RBVEVfRVZFTlQsIHtcbiAgICAgIGRldGFpbDoge1xuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgaXNPcGVuOiBpc1Zpc2libGVcbiAgICAgIH0sXG4gICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgY2FuY2VsYWJsZTogdHJ1ZVxuICAgIH0pXG4gICAgd2luZG93LmRpc3BhdGNoRXZlbnQoZXZlbnQpXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdXSURHRVQtU1RBVEUnLCB7XG4gICAgICBldmVudDogaXNWaXNpYmxlID8gJ3BhbmVsLW9wZW5lZCcgOiAncGFuZWwtY2xvc2VkJyxcbiAgICAgIHdpZGdldElkLFxuICAgICAgaXNWaXNpYmxlLFxuICAgICAgbWV0aG9kOiAnbm90aWZ5SGVscGVyU2ltcGxlT2ZQYW5lbFN0YXRlJyxcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBMb2dzIHZpc2liaWxpdHkgc3RhdGUgY2hhbmdlcyBhbmQgY2FsbHMgY2FsbGJhY2tzLlxuICAgKi9cbiAgcHJpdmF0ZSBsb2dWaXNpYmlsaXR5Q2hhbmdlKFxuICAgIGlzVmlzaWJsZTogYm9vbGVhbixcbiAgICBtZXRob2Q6IHN0cmluZyxcbiAgICB3aWRnZXRJZDogc3RyaW5nLFxuICAgIGNhbGxiYWNrczogVmlzaWJpbGl0eUNhbGxiYWNrc1xuICApOiB2b2lkIHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1dJREdFVC1TVEFURScsIHtcbiAgICAgIGV2ZW50OiBpc1Zpc2libGUgPyAncGFuZWwtb3BlbmVkJyA6ICdwYW5lbC1jbG9zZWQnLFxuICAgICAgd2lkZ2V0SWQsXG4gICAgICBpc1Zpc2libGUsXG4gICAgICBtZXRob2QsXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgIH0pXG4gICAgXG4gICAgLy8gTm90aWZ5IEhlbHBlclNpbXBsZVxuICAgIHRoaXMubm90aWZ5SGVscGVyU2ltcGxlT2ZQYW5lbFN0YXRlKGlzVmlzaWJsZSwgd2lkZ2V0SWQpXG4gICAgXG4gICAgLy8gQ2FsbCBvcHRpb25hbCBjYWxsYmFja1xuICAgIGlmIChjYWxsYmFja3Mub25WaXNpYmlsaXR5Q2hhbmdlKSB7XG4gICAgICBjYWxsYmFja3Mub25WaXNpYmlsaXR5Q2hhbmdlKGlzVmlzaWJsZSlcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB1cCB2aXNpYmlsaXR5IGRldGVjdGlvbi5cbiAgICovXG4gIHNldHVwKFxuICAgIHdpZGdldEVsZW1lbnQ6IEhUTUxFbGVtZW50LFxuICAgIHByb3BzOiBBbGxXaWRnZXRQcm9wczxJTUNvbmZpZz4sXG4gICAgY2FsbGJhY2tzOiBWaXNpYmlsaXR5Q2FsbGJhY2tzLFxuICAgIG9uVmlzaWJpbGl0eVN0YXRlQ2hhbmdlOiAoaXNWaXNpYmxlOiBib29sZWFuKSA9PiB2b2lkXG4gICk6IHZvaWQge1xuICAgIGNvbnN0IHsgaWQgfSA9IHByb3BzXG4gICAgdGhpcy53aWRnZXRFbGVtZW50ID0gd2lkZ2V0RWxlbWVudFxuXG4gICAgLy8gV2FpdCBmb3IgbmV4dCB0aWNrIHRvIGVuc3VyZSBlbGVtZW50IGlzIHJlYWR5XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBpZiAoIXRoaXMud2lkZ2V0RWxlbWVudCkge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1dJREdFVC1TVEFURScsIHtcbiAgICAgICAgICBldmVudDogJ3Zpc2liaWxpdHktZGV0ZWN0aW9uLXNldHVwLWZhaWxlZCcsXG4gICAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICAgIHJlYXNvbjogJ3dpZGdldC1lbGVtZW50LW5vdC1hdmFpbGFibGUnXG4gICAgICAgIH0pXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBjb25zdCBlbGVtZW50ID0gdGhpcy53aWRnZXRFbGVtZW50XG5cbiAgICAgIC8vIE1ldGhvZCAxOiBJbnRlcnNlY3Rpb25PYnNlcnZlciAobW9zdCBlZmZpY2llbnQpXG4gICAgICBpZiAoJ0ludGVyc2VjdGlvbk9ic2VydmVyJyBpbiB3aW5kb3cpIHtcbiAgICAgICAgdGhpcy52aXNpYmlsaXR5T2JzZXJ2ZXIgPSBuZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoXG4gICAgICAgICAgKGVudHJpZXMpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGVudHJ5ID0gZW50cmllc1swXVxuICAgICAgICAgICAgY29uc3QgaXNWaXNpYmxlID0gZW50cnkuaXNJbnRlcnNlY3RpbmcgJiYgZW50cnkuaW50ZXJzZWN0aW9uUmF0aW8gPiAwXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIE9ubHkgdXBkYXRlIGlmIHN0YXRlIGNoYW5nZWRcbiAgICAgICAgICAgIGlmICh0aGlzLmlzUGFuZWxWaXNpYmxlICE9PSBpc1Zpc2libGUpIHtcbiAgICAgICAgICAgICAgdGhpcy5pc1BhbmVsVmlzaWJsZSA9IGlzVmlzaWJsZVxuICAgICAgICAgICAgICB0aGlzLmxvZ1Zpc2liaWxpdHlDaGFuZ2UoaXNWaXNpYmxlLCAnSW50ZXJzZWN0aW9uT2JzZXJ2ZXInLCBpZCwgY2FsbGJhY2tzKVxuICAgICAgICAgICAgICBvblZpc2liaWxpdHlTdGF0ZUNoYW5nZShpc1Zpc2libGUpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICB0aHJlc2hvbGQ6IFswLCAwLjEsIDEuMF0sIC8vIFRyaWdnZXIgYXQgMCUsIDEwJSwgYW5kIDEwMCUgdmlzaWJpbGl0eVxuICAgICAgICAgICAgcm9vdE1hcmdpbjogJzBweCdcbiAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgICAgXG4gICAgICAgIHRoaXMudmlzaWJpbGl0eU9ic2VydmVyLm9ic2VydmUoZWxlbWVudClcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdXSURHRVQtU1RBVEUnLCB7XG4gICAgICAgICAgZXZlbnQ6ICd2aXNpYmlsaXR5LWRldGVjdGlvbi1zZXR1cCcsXG4gICAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICAgIG1ldGhvZDogJ0ludGVyc2VjdGlvbk9ic2VydmVyJ1xuICAgICAgICB9KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gTWV0aG9kIDI6IEZhbGxiYWNrIHRvIHBlcmlvZGljIGNoZWNraW5nXG4gICAgICAgIHRoaXMudmlzaWJpbGl0eUNoZWNrSW50ZXJ2YWwgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IGlzVmlzaWJsZSA9IHRoaXMuY2hlY2tWaXNpYmlsaXR5KClcbiAgICAgICAgICBpZiAodGhpcy5pc1BhbmVsVmlzaWJsZSAhPT0gaXNWaXNpYmxlKSB7XG4gICAgICAgICAgICB0aGlzLmlzUGFuZWxWaXNpYmxlID0gaXNWaXNpYmxlXG4gICAgICAgICAgICB0aGlzLmxvZ1Zpc2liaWxpdHlDaGFuZ2UoaXNWaXNpYmxlLCAncGVyaW9kaWMtY2hlY2snLCBpZCwgY2FsbGJhY2tzKVxuICAgICAgICAgICAgb25WaXNpYmlsaXR5U3RhdGVDaGFuZ2UoaXNWaXNpYmxlKVxuICAgICAgICAgIH1cbiAgICAgICAgfSwgMjUwKSAvLyBDaGVjayBldmVyeSAyNTBtc1xuICAgICAgICBcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdXSURHRVQtU1RBVEUnLCB7XG4gICAgICAgICAgZXZlbnQ6ICd2aXNpYmlsaXR5LWRldGVjdGlvbi1zZXR1cCcsXG4gICAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICAgIG1ldGhvZDogJ3BlcmlvZGljLWNoZWNrJ1xuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0sIDEwMClcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhbnMgdXAgdmlzaWJpbGl0eSBkZXRlY3Rpb24gb2JzZXJ2ZXJzL2ludGVydmFscy5cbiAgICovXG4gIGNsZWFudXAoKTogdm9pZCB7XG4gICAgLy8gQ2xlYW4gdXAgSW50ZXJzZWN0aW9uT2JzZXJ2ZXJcbiAgICBpZiAodGhpcy52aXNpYmlsaXR5T2JzZXJ2ZXIpIHtcbiAgICAgIHRoaXMudmlzaWJpbGl0eU9ic2VydmVyLmRpc2Nvbm5lY3QoKVxuICAgICAgdGhpcy52aXNpYmlsaXR5T2JzZXJ2ZXIgPSBudWxsXG4gICAgfVxuICAgIFxuICAgIC8vIENsZWFuIHVwIGludGVydmFsXG4gICAgaWYgKHRoaXMudmlzaWJpbGl0eUNoZWNrSW50ZXJ2YWwgIT09IG51bGwpIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy52aXNpYmlsaXR5Q2hlY2tJbnRlcnZhbClcbiAgICAgIHRoaXMudmlzaWJpbGl0eUNoZWNrSW50ZXJ2YWwgPSBudWxsXG4gICAgfVxuICAgIFxuICAgIHRoaXMud2lkZ2V0RWxlbWVudCA9IG51bGxcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGN1cnJlbnQgdmlzaWJpbGl0eSBzdGF0ZS5cbiAgICovXG4gIGdldElzUGFuZWxWaXNpYmxlKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmlzUGFuZWxWaXNpYmxlXG4gIH1cblxuICAvKipcbiAgICogTm90aWZpZXMgSGVscGVyU2ltcGxlIG9uIG1vdW50LlxuICAgKi9cbiAgbm90aWZ5TW91bnQod2lkZ2V0SWQ6IHN0cmluZyk6IHZvaWQge1xuICAgIGNvbnN0IG9wZW5FdmVudCA9IG5ldyBDdXN0b21FdmVudChRVUVSWVNJTVBMRV9XSURHRVRfU1RBVEVfRVZFTlQsIHtcbiAgICAgIGRldGFpbDoge1xuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgaXNPcGVuOiB0cnVlXG4gICAgICB9LFxuICAgICAgYnViYmxlczogdHJ1ZSxcbiAgICAgIGNhbmNlbGFibGU6IHRydWVcbiAgICB9KVxuICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KG9wZW5FdmVudClcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1dJREdFVC1TVEFURScsIHtcbiAgICAgIGV2ZW50OiAnd2lkZ2V0LW1vdW50ZWQnLFxuICAgICAgd2lkZ2V0SWQsXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICogTm90aWZpZXMgSGVscGVyU2ltcGxlIG9uIHVubW91bnQuXG4gICAqL1xuICBub3RpZnlVbm1vdW50KHdpZGdldElkOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBjb25zdCBjbG9zZUV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KFFVRVJZU0lNUExFX1dJREdFVF9TVEFURV9FVkVOVCwge1xuICAgICAgZGV0YWlsOiB7XG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICBpc09wZW46IGZhbHNlXG4gICAgICB9LFxuICAgICAgYnViYmxlczogdHJ1ZSxcbiAgICAgIGNhbmNlbGFibGU6IHRydWVcbiAgICB9KVxuICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KGNsb3NlRXZlbnQpXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdXSURHRVQtU1RBVEUnLCB7XG4gICAgICBldmVudDogJ3dpZGdldC11bm1vdW50ZWQnLFxuICAgICAgd2lkZ2V0SWQsXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgIH0pXG4gIH1cbn1cbiIsIi8qKlxuICogSG9vayBmb3Igem9vbWluZyB0byBmZWF0dXJlIHJlY29yZHMgd2l0aCBwYWRkaW5nLlxuICogXG4gKiBXcmFwcyB0aGUgc2hhcmVkIHpvb21Ub1JlY29yZHMgdXRpbGl0eSBmdW5jdGlvbiBpbiBhIFJlYWN0IGhvb2suXG4gKi9cblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHR5cGUgeyBGZWF0dXJlRGF0YVJlY29yZCB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IHpvb21Ub1JlY29yZHMsIHR5cGUgWm9vbVRvUmVjb3Jkc09wdGlvbnMgfSBmcm9tICcuLi96b29tLXV0aWxzJ1xuXG4vKipcbiAqIEN1c3RvbSBob29rIHRoYXQgcmV0dXJucyBhIGZ1bmN0aW9uIHRvIHpvb20gdG8gcmVjb3JkcyB3aXRoIHBhZGRpbmcuXG4gKiBcbiAqIEBwYXJhbSBtYXBWaWV3IC0gVGhlIG1hcCB2aWV3IHRvIHpvb21cbiAqIEByZXR1cm5zIEEgZnVuY3Rpb24gdGhhdCB0YWtlcyByZWNvcmRzIGFuZCBvcHRpb25hbCBwYWRkaW5nLCBhbmQgem9vbXMgdG8gdGhlbVxuICovXG5leHBvcnQgZnVuY3Rpb24gdXNlWm9vbVRvUmVjb3JkcyhcbiAgbWFwVmlldz86IF9fZXNyaS5NYXBWaWV3IHwgX19lc3JpLlNjZW5lVmlld1xuKTogKHJlY29yZHM6IEZlYXR1cmVEYXRhUmVjb3JkW10sIG9wdGlvbnM/OiBab29tVG9SZWNvcmRzT3B0aW9ucykgPT4gUHJvbWlzZTx2b2lkPiB7XG4gIFxuICByZXR1cm4gUmVhY3QudXNlQ2FsbGJhY2soYXN5bmMgKFxuICAgIHJlY29yZHM6IEZlYXR1cmVEYXRhUmVjb3JkW10sXG4gICAgb3B0aW9ucz86IFpvb21Ub1JlY29yZHNPcHRpb25zXG4gICk6IFByb21pc2U8dm9pZD4gPT4ge1xuICAgIGlmICghbWFwVmlldykge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGF3YWl0IHpvb21Ub1JlY29yZHMobWFwVmlldywgcmVjb3Jkcywgb3B0aW9ucylcbiAgfSwgW21hcFZpZXddKVxufVxuXG4vLyBSZS1leHBvcnQgdHlwZXMgZm9yIGNvbnZlbmllbmNlXG5leHBvcnQgdHlwZSB7IFpvb21Ub1JlY29yZHNPcHRpb25zIH0gZnJvbSAnLi4vem9vbS11dGlscydcblxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQgeyBSZWFjdCwganN4LCB0eXBlIEltbXV0YWJsZUFycmF5LCBtb2R1bGVMb2FkZXIsIGhvb2tzIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgQ2hlY2tib3ggfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHR5cGUgeyBKaW11TWFwVmlldyB9IGZyb20gJ2ppbXUtYXJjZ2lzJ1xuaW1wb3J0IHR5cGUgKiBhcyBqaW11TWFwIGZyb20gJ2ppbXUtdWkvYWR2YW5jZWQvbWFwJ1xuaW1wb3J0IHsgQ3JlYXRlVG9vbFR5cGUgfSBmcm9tICcuLi9jb25maWcnXG5pbXBvcnQgeyBFbnRpdHlTdGF0dXNUeXBlLCBTdGF0dXNJbmRpY2F0b3IgfSBmcm9tICd3aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbidcbmltcG9ydCBkZWZhdWx0TWVzc2FnZSBmcm9tICcuL3RyYW5zbGF0aW9ucy9kZWZhdWx0J1xuZXhwb3J0IGludGVyZmFjZSBJbnRlcmFjdGl2ZURyYXdQcm9wcyB7XG4gIGppbXVNYXBWaWV3OiBKaW11TWFwVmlld1xuICB3aWRnZXRJZDogc3RyaW5nXG4gIHRvb2xUeXBlczogSW1tdXRhYmxlQXJyYXk8Q3JlYXRlVG9vbFR5cGU+XG4gIG9uRHJhd0VuZDogKGdyYXBoaWM6IF9fZXNyaS5HcmFwaGljLCBnZXRMYXllckZ1bj8sIGNsZWFyQWZ0ZXJBcHBseT86IGJvb2xlYW4pID0+IHZvaWRcbn1cblxuY29uc3Qgc2tldGNoVG9vbEluZm9NYXAgPSB7XG4gIFtDcmVhdGVUb29sVHlwZS5Qb2ludF06IHsgZHJhd1Rvb2xOYW1lOiAncG9pbnQnLCBlc3JpQ2xhc3NOYW1lOiAnZXNyaS1pY29uLXBvaW50JywgdG9vbEluZGV4OiAwIH0sXG4gIFtDcmVhdGVUb29sVHlwZS5Qb2x5bGluZV06IHsgZHJhd1Rvb2xOYW1lOiAncG9seWxpbmUnLCBlc3JpQ2xhc3NOYW1lOiAnZXNyaS1pY29uLXBvbHlsaW5lJywgdG9vbEluZGV4OiA0IH0sXG4gIFtDcmVhdGVUb29sVHlwZS5Qb2x5Z29uXTogeyBkcmF3VG9vbE5hbWU6ICdwb2x5Z29uJywgZXNyaUNsYXNzTmFtZTogJ2VzcmktaWNvbi1wb2x5Z29uJywgdG9vbEluZGV4OiAyIH0sXG4gIFtDcmVhdGVUb29sVHlwZS5SZWN0YW5nbGVdOiB7XG4gICAgZHJhd1Rvb2xOYW1lOiAncmVjdGFuZ2xlJyxcbiAgICBlc3JpQ2xhc3NOYW1lOiAnZXNyaS1pY29uLWNoZWNrYm94LXVuY2hlY2tlZCcsXG4gICAgdG9vbEluZGV4OiAxXG4gIH0sXG4gIFtDcmVhdGVUb29sVHlwZS5DaXJjbGVdOiB7IGRyYXdUb29sTmFtZTogJ2NpcmNsZScsIGVzcmlDbGFzc05hbWU6ICdlc3JpLWljb24tcmFkaW8tdW5jaGVja2VkJywgdG9vbEluZGV4OiAzIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIEludGVyYWN0aXZlRHJhdyAocHJvcHM6IEludGVyYWN0aXZlRHJhd1Byb3BzKSB7XG4gIGNvbnN0IHsgdG9vbFR5cGVzID0gW10sIGppbXVNYXBWaWV3LCBvbkRyYXdFbmQsIHdpZGdldElkIH0gPSBwcm9wc1xuICBjb25zdCBnZXRJMThuTWVzc2FnZSA9IGhvb2tzLnVzZVRyYW5zbGF0aW9uKGRlZmF1bHRNZXNzYWdlKVxuICBjb25zdCBbbWFwTW9kdWxlLCBzZXRNYXBNb2R1bGVdID0gUmVhY3QudXNlU3RhdGU8dHlwZW9mIGppbXVNYXA+KG51bGwpXG4gIGNvbnN0IGdldExheWVyRnVuUmVmID0gUmVhY3QudXNlUmVmPCgpID0+IF9fZXNyaS5HcmFwaGljc0xheWVyIHwgX19lc3JpLk1hcE5vdGVzTGF5ZXI+KG51bGwpXG4gIGNvbnN0IGdyYXBoaWNSZWYgPSBSZWFjdC51c2VSZWYobnVsbClcbiAgY29uc3QgW2NsZWFyQWZ0ZXJBcHBseSwgc2V0Q2xlYXJBZnRlckFwcGx5XSA9IFJlYWN0LnVzZVN0YXRlKGZhbHNlKVxuXG4gIGNvbnN0IHZpc2libGVFbGVtZW50cyA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICBjcmVhdGVUb29sczogT2JqZWN0LmVudHJpZXMoc2tldGNoVG9vbEluZm9NYXApLnJlZHVjZShcbiAgICAgICAgKHJlc3VsdCwgW2tleSwgdmFsdWVdKSA9PiAoeyAuLi5yZXN1bHQsIFt2YWx1ZS5kcmF3VG9vbE5hbWVdOiB0b29sVHlwZXMuaW5jbHVkZXMoa2V5IGFzIENyZWF0ZVRvb2xUeXBlKSB9KSxcbiAgICAgICAgeyBwb2ludDogZmFsc2UgfVxuICAgICAgKSBhcyBhbnksXG4gICAgICBzZWxlY3Rpb25Ub29sczoge1xuICAgICAgICAnbGFzc28tc2VsZWN0aW9uJzogZmFsc2UsXG4gICAgICAgICdyZWN0YW5nbGUtc2VsZWN0aW9uJzogZmFsc2VcbiAgICAgIH0sXG4gICAgICBzZXR0aW5nc01lbnU6IGZhbHNlLFxuICAgICAgdW5kb1JlZG9NZW51OiBmYWxzZSxcbiAgICAgIGRlbGV0ZUJ1dHRvbjogdHJ1ZVxuICAgIH1cbiAgfSwgW3Rvb2xUeXBlc10pXG5cbiAgaG9va3MudXNlRWZmZWN0T25jZSgoKSA9PiB7XG4gICAgbW9kdWxlTG9hZGVyLmxvYWRNb2R1bGU8dHlwZW9mIGppbXVNYXA+KCdqaW11LXVpL2FkdmFuY2VkL21hcCcpLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgc2V0TWFwTW9kdWxlKHJlc3VsdClcbiAgICB9KVxuICB9KVxuXG4gIGNvbnN0IGhhbmRsZURyYXdUb29sQ3JlYXRlZCA9IFJlYWN0LnVzZUNhbGxiYWNrKChqaW11RHJhd1Rvb2xzUmVmOiBqaW11TWFwLkppbXVEcmF3Q3JlYXRlZERlc2NyaXB0b3IpID0+IHtcbiAgICBnZXRMYXllckZ1blJlZi5jdXJyZW50ID0gamltdURyYXdUb29sc1JlZi5nZXRHcmFwaGljc0xheWVyXG4gIH0sIFtdKVxuXG4gIGNvbnN0IGhhbmRsZURyYXdTdGFydCA9IFJlYWN0LnVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBnZXRMYXllckZ1blJlZi5jdXJyZW50ICYmICgoZ2V0TGF5ZXJGdW5SZWYuY3VycmVudCkoKSBhcyBfX2VzcmkuR3JhcGhpY3NMYXllcikucmVtb3ZlQWxsKClcbiAgfSwgW10pXG5cbiAgY29uc3QgaGFuZGxlRHJhd0VuZCA9IFJlYWN0LnVzZUNhbGxiYWNrKFxuICAgIChncmFwaGljKSA9PiB7XG4gICAgICBncmFwaGljUmVmLmN1cnJlbnQgPSBncmFwaGljXG4gICAgICBvbkRyYXdFbmQoZ3JhcGhpYywgZ2V0TGF5ZXJGdW5SZWYuY3VycmVudCwgY2xlYXJBZnRlckFwcGx5KVxuICAgIH0sXG4gICAgW29uRHJhd0VuZCwgY2xlYXJBZnRlckFwcGx5XVxuICApXG5cbiAgY29uc3QgaGFuZGxlQ2xlYXJlZCA9IFJlYWN0LnVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBncmFwaGljUmVmLmN1cnJlbnQgPSBudWxsXG4gICAgb25EcmF3RW5kKG51bGwpXG4gIH0sIFtvbkRyYXdFbmRdKVxuXG4gIGNvbnN0IGhhbmRsZUNsZWFyU2V0dGluZ0NoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKChlKSA9PiB7XG4gICAgaWYgKGdyYXBoaWNSZWYuY3VycmVudCkge1xuICAgICAgb25EcmF3RW5kKGdyYXBoaWNSZWYuY3VycmVudCwgZ2V0TGF5ZXJGdW5SZWYuY3VycmVudCwgZS50YXJnZXQuY2hlY2tlZClcbiAgICB9XG4gICAgc2V0Q2xlYXJBZnRlckFwcGx5KGUudGFyZ2V0LmNoZWNrZWQpXG4gIH0sIFtvbkRyYXdFbmRdKVxuXG4gIGNvbnN0IEppbXVEcmF3ID0gbWFwTW9kdWxlPy5KaW11RHJhd1xuICBpZiAoIUppbXVEcmF3KSB7XG4gICAgcmV0dXJuIDxTdGF0dXNJbmRpY2F0b3Igc3RhdHVzVHlwZT17RW50aXR5U3RhdHVzVHlwZS5Mb2FkaW5nfSAvPlxuICB9XG4gIGNvbnN0IGlzQXZhaWxhYmxlID0gT2JqZWN0LmtleXModmlzaWJsZUVsZW1lbnRzLmNyZWF0ZVRvb2xzKS5zb21lKHRvb2xOYW1lID0+IHZpc2libGVFbGVtZW50cy5jcmVhdGVUb29sc1t0b29sTmFtZV0pXG4gIGlmICghaXNBdmFpbGFibGUpIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG4gIHJldHVybiAoXG4gICAgPGRpdj5cbiAgICAgIDxKaW11RHJhd1xuICAgICAgICBqaW11TWFwVmlldz17amltdU1hcFZpZXd9XG4gICAgICAgIG9wZXJhdG9yV2lkZ2V0SWQ9e3dpZGdldElkfVxuICAgICAgICBkaXNhYmxlU3ltYm9sU2VsZWN0b3JcbiAgICAgICAgZHJhd2luZ09wdGlvbnM9e3tcbiAgICAgICAgICBjcmVhdGlvbk1vZGU6IG1hcE1vZHVsZS5KaW11RHJhd0NyZWF0aW9uTW9kZS5TaW5nbGUsXG4gICAgICAgICAgdXBkYXRlT25HcmFwaGljQ2xpY2s6IGZhbHNlLFxuICAgICAgICAgIHZpc2libGVFbGVtZW50czogdmlzaWJsZUVsZW1lbnRzXG4gICAgICAgIH19XG4gICAgICAgIHVpT3B0aW9ucz17e1xuICAgICAgICAgIGlzSGlkZUJvcmRlcjogdHJ1ZVxuICAgICAgICB9fVxuICAgICAgICBvbkppbXVEcmF3Q3JlYXRlZD17aGFuZGxlRHJhd1Rvb2xDcmVhdGVkfVxuICAgICAgICBvbkRyYXdpbmdTdGFydGVkPXtoYW5kbGVEcmF3U3RhcnR9XG4gICAgICAgIG9uRHJhd2luZ0ZpbmlzaGVkPXtoYW5kbGVEcmF3RW5kfVxuICAgICAgICBvbkRyYXdpbmdDbGVhcmVkPXtoYW5kbGVDbGVhcmVkfVxuICAgICAgLz5cbiAgICAgIDxsYWJlbCBjbGFzc05hbWU9J2QtZmxleCBhbGlnbi1pdGVtcy1jZW50ZXInPlxuICAgICAgICA8Q2hlY2tib3ggY2hlY2tlZD17Y2xlYXJBZnRlckFwcGx5fSBvbkNoYW5nZT17aGFuZGxlQ2xlYXJTZXR0aW5nQ2hhbmdlfSBjbGFzc05hbWU9J21yLTInIC8+XG4gICAgICAgIHtnZXRJMThuTWVzc2FnZSgnY2xlYXJEcmF3aW5nJyl9XG4gICAgICA8L2xhYmVsPlxuICAgIDwvZGl2PlxuICApXG59XG4iLCJpbXBvcnQgeyBSZWFjdCwgaG9va3MgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBMb2FkaW5nLCBMb2FkaW5nVHlwZSB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQgeyBzdHlsZWQgfSBmcm9tICdqaW11LXRoZW1lJ1xuaW1wb3J0IGRlZmF1bHRNZXNzYWdlIGZyb20gJy4vdHJhbnNsYXRpb25zL2RlZmF1bHQnXG5cbmNvbnN0IFJvb3QgPSBzdHlsZWQuZGl2YFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogMDtcbiAgYm90dG9tOiAwO1xuICByaWdodDogMDtcbiAgbGVmdDogMDtcbiAgei1pbmRleDogMjtcblxuICAubG9hZGluZy1jb250ZW50IHtcbiAgICAubG9hZGluZy10aXAge1xuICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIH1cbiAgfVxuYFxuZXhwb3J0IGZ1bmN0aW9uIExvYWRpbmdSZXN1bHQgKCkge1xuICBjb25zdCB0cmFuc2xhdGUgPSBob29rcy51c2VUcmFuc2xhdGlvbihkZWZhdWx0TWVzc2FnZSlcbiAgcmV0dXJuIChcbiAgICA8Um9vdD5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdsb2FkaW5nLWNvbnRlbnQgdy0xMDAgcHgtNCBkLWZsZXggZmxleC1jb2x1bW4ganVzdGlmeS1jb250ZW50LWNlbnRlciBhbGlnbi1pdGVtcy1jZW50ZXInPlxuICAgICAgICA8ZGl2IHJvbGU9J2FsZXJ0JyBhcmlhLWxpdmU9J2Fzc2VydGl2ZScgY2xhc3NOYW1lPSd0ZXh0LXBhcGVyJz5cbiAgICAgICAgICB7dHJhbnNsYXRlKCdyZXRyaWV2aW5nJyl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8TG9hZGluZyBjbGFzc05hbWU9J2xvYWRpbmctdGlwIG10LTgnIHR5cGU9e0xvYWRpbmdUeXBlLkRvbnV0fS8+XG4gICAgICA8L2Rpdj5cbiAgICA8L1Jvb3Q+XG4gIClcbn1cblxuXG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7XG4gIFJlYWN0LFxuICBSZWFjdFJlZHV4LFxuICBqc3gsXG4gIGNzcyxcbiAgdHlwZSBEYXRhU291cmNlLFxuICB0eXBlIEZlYXR1cmVEYXRhUmVjb3JkLFxuICB0eXBlIElNU3RhdGUsXG4gIGNsYXNzTmFtZXNcbn0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgQnV0dG9uLCBUb29sdGlwIH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB7IFRyYXNoT3V0bGluZWQgfSBmcm9tICdqaW11LWljb25zL291dGxpbmVkL2VkaXRvci90cmFzaCdcbmltcG9ydCBGZWF0dXJlSW5mbyBmcm9tICcuL2NvbXBvbmVudHMvZmVhdHVyZS1pbmZvJ1xuaW1wb3J0IHsgTGlzdERpcmVjdGlvbiB9IGZyb20gJy4uL2NvbmZpZydcbmltcG9ydCB7IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIgfSBmcm9tICd3aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbidcblxuY29uc3QgZGVidWdMb2dnZXIgPSBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyKClcblxuZXhwb3J0IGludGVyZmFjZSBSZXN1bHRJdGVtUHJvcHMge1xuICB3aWRnZXRJZDogc3RyaW5nXG4gIHBvcHVwVGVtcGxhdGU6IGFueVxuICBkZWZhdWx0UG9wdXBUZW1wbGF0ZTogYW55XG4gIGRhdGE6IEZlYXR1cmVEYXRhUmVjb3JkXG4gIGRhdGFTb3VyY2U6IERhdGFTb3VyY2VcbiAgZXhwYW5kQnlEZWZhdWx0OiBib29sZWFuXG4gIG9uQ2xpY2s6IChyZWNvcmQ6IEZlYXR1cmVEYXRhUmVjb3JkKSA9PiB2b2lkXG4gIG9uUmVtb3ZlOiAocmVjb3JkOiBGZWF0dXJlRGF0YVJlY29yZCkgPT4gdm9pZFxufVxuXG5jb25zdCBzdHlsZSA9IGNzc2BcbiAgb3ZlcmZsb3c6IGF1dG87XG4gIGZsZXgtZmxvdzogcm93O1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIGZsZXgtc2hyaW5rOiAwO1xuICBtaW4taGVpZ2h0OiAycmVtO1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICYuc2VsZWN0ZWQge1xuICAgIG91dGxpbmU6IDJweCBzb2xpZCB2YXIoLS1zeXMtY29sb3ItcHJpbWFyeS1tYWluKTtcbiAgfVxuICBcbiAgLnJlbW92ZS1idXR0b24ge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB0b3A6IDRweDtcbiAgICByaWdodDogNHB4O1xuICAgIHotaW5kZXg6IDEwO1xuICAgIG9wYWNpdHk6IDAuNztcbiAgICB0cmFuc2l0aW9uOiBvcGFjaXR5IDAuMnM7XG4gICAgXG4gICAgJjpob3ZlciB7XG4gICAgICBvcGFjaXR5OiAxO1xuICAgIH1cbiAgICBcbiAgICAvLyBMYXJnZXIgdG91Y2ggdGFyZ2V0IGZvciBtb2JpbGUvYWNjZXNzaWJpbGl0eVxuICAgIG1pbi13aWR0aDogMzJweDtcbiAgICBtaW4taGVpZ2h0OiAzMnB4O1xuICB9XG5gXG5cbi8qKlxuICogUXVlcnlSZXN1bHRJdGVtIGNvbXBvbmVudCAtIGRpc3BsYXlzIGEgc2luZ2xlIHF1ZXJ5IHJlc3VsdCByZWNvcmRcbiAqIEZlYXR1cmVzOlxuICogLSBDbGlja2luZyB0aGUgaXRlbSB6b29tcyB0byB0aGUgZmVhdHVyZSBvbiB0aGUgbWFwXG4gKiAtIFJlbW92ZSBidXR0b24gKHRyYXNoIGljb24pIGluIHVwcGVyLXJpZ2h0IGNvcm5lciB0byByZW1vdmUgcmVjb3JkIGZyb20gcmVzdWx0c1xuICogLSBSZWNvcmRzIGFyZSBleHBhbmRlZCBieSBkZWZhdWx0IHRvIHNob3cgZnVsbCBmZWF0dXJlIGluZm9ybWF0aW9uXG4gKi9cbmV4cG9ydCBjb25zdCBRdWVyeVJlc3VsdEl0ZW0gPSAocHJvcHM6IFJlc3VsdEl0ZW1Qcm9wcykgPT4ge1xuICBjb25zdCB7IHdpZGdldElkLCBkYXRhLCBkYXRhU291cmNlLCBwb3B1cFRlbXBsYXRlLCBkZWZhdWx0UG9wdXBUZW1wbGF0ZSwgb25DbGljaywgb25SZW1vdmUsIGV4cGFuZEJ5RGVmYXVsdCA9IGZhbHNlIH0gPSBwcm9wc1xuICBcbiAgY29uc3QgcmVjb3JkSWQgPSBkYXRhLmdldElkKClcbiAgXG4gIC8vIExvZyB3aGVuIFF1ZXJ5UmVzdWx0SXRlbSByZW5kZXJzXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdFWFBBTkQtQ09MTEFQU0UnLCB7XG4gICAgICBldmVudDogJ1F1ZXJ5UmVzdWx0SXRlbS1yZW5kZXInLFxuICAgICAgcmVjb3JkSWQsXG4gICAgICBleHBhbmRCeURlZmF1bHQsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICB9LCBbcmVjb3JkSWQsIGV4cGFuZEJ5RGVmYXVsdF0pXG4gIFxuICAvLyBDaGVjayBpZiB0aGlzIHJlY29yZCBpcyBjdXJyZW50bHkgc2VsZWN0ZWRcbiAgY29uc3Qgc2VsZWN0ZWQgPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT5cbiAgICBzdGF0ZS5kYXRhU291cmNlc0luZm8/LltkYXRhU291cmNlLmlkXT8uc2VsZWN0ZWRJZHM/LmluY2x1ZGVzKGRhdGEuZ2V0SWQoKSlcbiAgKVxuICBcbiAgLy8gRGV0ZXJtaW5lIGlmIGxpc3QgaXMgZGlzcGxheWVkIHZlcnRpY2FsbHkgKGFmZmVjdHMgRmVhdHVyZUluZm8gZXhwYW5kYWJpbGl0eSlcbiAgY29uc3QgaXNWZXJ0aWNhbEFsaWduID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcbiAgICBjb25zdCB3aWRnZXRKc29uID0gc3RhdGUuYXBwQ29uZmlnLndpZGdldHNbd2lkZ2V0SWRdXG4gICAgcmV0dXJuIHdpZGdldEpzb24uY29uZmlnLnJlc3VsdExpc3REaXJlY3Rpb24gIT09IExpc3REaXJlY3Rpb24uSG9yaXpvbnRhbFxuICB9KVxuXG4gIC8vIEhhbmRsZSBjbGlja2luZyBvbiB0aGUgcmVzdWx0IGl0ZW0gLSB6b29tcyB0byBmZWF0dXJlIG9uIG1hcFxuICBjb25zdCBoYW5kbGVDbGlja1Jlc3VsdEl0ZW0gPSBSZWFjdC51c2VDYWxsYmFjaygoZTogUmVhY3QuTW91c2VFdmVudCkgPT4ge1xuICAgIC8vIERvbid0IHRyaWdnZXIgem9vbSBpZiBjbGlja2luZyB0aGUgcmVtb3ZlIGJ1dHRvblxuICAgIGlmICgoZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQpLmNsb3Nlc3QoJy5yZW1vdmUtYnV0dG9uJykpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBvbkNsaWNrKGRhdGEpXG4gIH0sIFtvbkNsaWNrLCBkYXRhXSlcblxuICAvLyBIYW5kbGUgY2xpY2tpbmcgdGhlIHJlbW92ZSBidXR0b24gLSByZW1vdmVzIHJlY29yZCBmcm9tIHJlc3VsdHMgYW5kIHNlbGVjdGlvblxuICBjb25zdCBoYW5kbGVSZW1vdmUgPSBSZWFjdC51c2VDYWxsYmFjaygoZTogUmVhY3QuTW91c2VFdmVudCkgPT4ge1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCkgLy8gUHJldmVudCB0cmlnZ2VyaW5nIHRoZSBpdGVtIGNsaWNrIGhhbmRsZXJcbiAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICBvblJlbW92ZShkYXRhKVxuICB9LCBbb25SZW1vdmUsIGRhdGFdKVxuXG4gIGNvbnN0IG9uS2V5VXAgPSBSZWFjdC51c2VDYWxsYmFjaygoZXZ0KSA9PiB7XG4gICAgaWYgKGV2dC5rZXkgPT09ICdFbnRlcicgfHwgZXZ0LmtleSA9PT0gJyAnKSB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKVxuICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpXG4gICAgICBoYW5kbGVDbGlja1Jlc3VsdEl0ZW0oZXZ0IGFzIGFueSlcbiAgICB9XG4gIH0sIFtoYW5kbGVDbGlja1Jlc3VsdEl0ZW1dKVxuXG4gIHJldHVybiAoXG4gICAgPGRpdlxuICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdxdWVyeS1yZXN1bHQtaXRlbScsIHsgc2VsZWN0ZWQgfSl9XG4gICAgICBvbkNsaWNrPXtoYW5kbGVDbGlja1Jlc3VsdEl0ZW19XG4gICAgICBvbktleVVwPXtvbktleVVwfVxuICAgICAgY3NzPXtzdHlsZX1cbiAgICAgIHJvbGU9J29wdGlvbidcbiAgICAgIGFyaWEtc2VsZWN0ZWQ9e3NlbGVjdGVkfVxuICAgICAgdGFiSW5kZXg9ezB9XG4gICAgPlxuICAgICAgPEZlYXR1cmVJbmZvXG4gICAgICAgIGdyYXBoaWM9e2RhdGEuZmVhdHVyZSBhcyBfX2VzcmkuR3JhcGhpY31cbiAgICAgICAgcG9wdXBUZW1wbGF0ZT17cG9wdXBUZW1wbGF0ZX1cbiAgICAgICAgZGVmYXVsdFBvcHVwVGVtcGxhdGU9e2RlZmF1bHRQb3B1cFRlbXBsYXRlfVxuICAgICAgICB0b2dnbGFibGU9e2lzVmVydGljYWxBbGlnbn1cbiAgICAgICAgZXhwYW5kQnlEZWZhdWx0PXtleHBhbmRCeURlZmF1bHR9XG4gICAgICAgIGRhdGFTb3VyY2U9e2RhdGFTb3VyY2V9XG4gICAgICAvPlxuICAgICAgPFRvb2x0aXAgdGl0bGU9XCJSZW1vdmUgcmVzdWx0XCIgcGxhY2VtZW50PVwiYm90dG9tXCI+XG4gICAgICAgIDxCdXR0b25cbiAgICAgICAgICBjbGFzc05hbWU9XCJyZW1vdmUtYnV0dG9uXCJcbiAgICAgICAgICBpY29uXG4gICAgICAgICAgc2l6ZT1cInNtXCJcbiAgICAgICAgICB2YXJpYW50PVwidGV4dFwiXG4gICAgICAgICAgY29sb3I9XCJpbmhlcml0XCJcbiAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVSZW1vdmV9XG4gICAgICAgICAgYXJpYS1sYWJlbD1cIlJlbW92ZSByZXN1bHRcIlxuICAgICAgICAgIGNzcz17Y3NzYFxuICAgICAgICAgICAgcGFkZGluZzogNnB4O1xuICAgICAgICAgICAgbWluLXdpZHRoOiAzMnB4O1xuICAgICAgICAgICAgd2lkdGg6IDMycHg7XG4gICAgICAgICAgICBoZWlnaHQ6IDMycHg7XG4gICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgICAgIGB9XG4gICAgICAgID5cbiAgICAgICAgICA8VHJhc2hPdXRsaW5lZCBzaXplPXsxOH0gLz5cbiAgICAgICAgPC9CdXR0b24+XG4gICAgICA8L1Rvb2x0aXA+XG4gICAgPC9kaXY+XG4gIClcbn1cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHtcbiAgUmVhY3QsXG4gIGpzeCxcbiAgY3NzLFxuICBSZWFjdFJlZHV4LFxuICB0eXBlIElNU3RhdGUsXG4gIHR5cGUgRGF0YVNvdXJjZSxcbiAgdHlwZSBJbW11dGFibGVPYmplY3QsXG4gIHR5cGUgRGF0YVJlY29yZCxcbiAgdHlwZSBRdWVyeVBhcmFtcyxcbiAgRGF0YVNvdXJjZUNvbXBvbmVudCxcbiAgRGF0YVNvdXJjZU1hbmFnZXIsXG4gIEltbXV0YWJsZSxcbiAgaG9va3MsXG4gIE1lc3NhZ2VNYW5hZ2VyLFxuICBEYXRhUmVjb3Jkc1NlbGVjdGlvbkNoYW5nZU1lc3NhZ2UsXG4gIHR5cGUgRmVhdHVyZURhdGFSZWNvcmQsXG4gIHR5cGUgRGF0YVJlY29yZFNldCxcbiAgdHlwZSBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLFxuICBmb2N1c0VsZW1lbnRJbktleWJvYXJkTW9kZSxcbiAgRGF0YUFjdGlvbk1hbmFnZXIsXG4gIERhdGFMZXZlbCxcbiAgdXNlSW50bFxufSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBCdXR0b24sIEljb24sIFRvb2x0aXAsIERhdGFBY3Rpb25MaXN0LCBEYXRhQWN0aW9uTGlzdFN0eWxlIH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB7IGdldFdpZGdldFJ1bnRpbWVEYXRhTWFwIH0gZnJvbSAnLi93aWRnZXQtY29uZmlnJ1xuaW1wb3J0IHsgdHlwZSBRdWVyeUl0ZW1UeXBlLCBGaWVsZHNUeXBlLCBQYWdpbmdUeXBlLCBMaXN0RGlyZWN0aW9uLCBSZXN1bHRTZWxlY3RNb2RlLCBTZWxlY3Rpb25UeXBlIH0gZnJvbSAnLi4vY29uZmlnJ1xuaW1wb3J0IGRlZmF1bHRNZXNzYWdlIGZyb20gJy4vdHJhbnNsYXRpb25zL2RlZmF1bHQnXG5pbXBvcnQgeyB1c2Vab29tVG9SZWNvcmRzIH0gZnJvbSAnLi9ob29rcy91c2Utem9vbS10by1yZWNvcmRzJ1xuLy8gRk9SQ0VEOiBBbHdheXMgU2ltcGxlTGlzdCAtIExhenlMaXN0IGFuZCBQYWdpbmdMaXN0IHJlbW92ZWRcbmltcG9ydCB7IFNpbXBsZUxpc3QgfSBmcm9tICcuL3NpbXBsZS1saXN0J1xuaW1wb3J0IHsgY29tYmluZUZpZWxkcyB9IGZyb20gJy4vcXVlcnktdXRpbHMnXG5pbXBvcnQgeyBERUZBVUxUX1FVRVJZX0lURU0gfSBmcm9tICcuLi9kZWZhdWx0LXF1ZXJ5LWl0ZW0nXG5pbXBvcnQgeyBBcnJvd0xlZnRPdXRsaW5lZCB9IGZyb20gJ2ppbXUtaWNvbnMvb3V0bGluZWQvZGlyZWN0aW9uYWwvYXJyb3ctbGVmdCdcbmltcG9ydCB7IEV4cGFuZEFsbE91dGxpbmVkIH0gZnJvbSAnamltdS1pY29ucy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9leHBhbmQtYWxsJ1xuaW1wb3J0IHsgQ29sbGFwc2VBbGxPdXRsaW5lZCB9IGZyb20gJ2ppbXUtaWNvbnMvb3V0bGluZWQvZGlyZWN0aW9uYWwvY29sbGFwc2UtYWxsJ1xuaW1wb3J0IHsgZ2V0RXh0cmFBY3Rpb25zIH0gZnJvbSAnLi4vZGF0YS1hY3Rpb25zJ1xuaW1wb3J0IHsgXG4gIHNlbGVjdFJlY29yZHNJbkRhdGFTb3VyY2VzLCBcbiAgY2xlYXJTZWxlY3Rpb25JbkRhdGFTb3VyY2VzLCBcbiAgc2VsZWN0UmVjb3Jkc0FuZFB1Ymxpc2gsXG4gIHB1Ymxpc2hTZWxlY3Rpb25NZXNzYWdlLFxuICBkaXNwYXRjaFNlbGVjdGlvbkV2ZW50IFxufSBmcm9tICcuL3NlbGVjdGlvbi11dGlscydcbmltcG9ydCB7IHJlbW92ZVJlc3VsdHNGcm9tQWNjdW11bGF0ZWQsIHJlbW92ZVJlY29yZHNGcm9tT3JpZ2luU2VsZWN0aW9ucyB9IGZyb20gJy4vcmVzdWx0cy1tYW5hZ2VtZW50LXV0aWxzJ1xuaW1wb3J0IHsgcmVtb3ZlSGlnaGxpZ2h0R3JhcGhpY3MgfSBmcm9tICcuL2dyYXBoaWNzLWxheWVyLXV0aWxzJ1xuaW1wb3J0IHsgY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlciB9IGZyb20gJ3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uJ1xuXG5jb25zdCBkZWJ1Z0xvZ2dlciA9IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIoKVxuaW1wb3J0IHsgRXJyb3JNZXNzYWdlIH0gZnJvbSAnd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24nXG5jb25zdCB7IGljb25NYXAgfSA9IGdldFdpZGdldFJ1bnRpbWVEYXRhTWFwKClcblxuLyoqXG4gKiBDdXN0b20gZXZlbnQgbmFtZSBmb3IgcmVxdWVzdGluZyByZXN0b3JhdGlvbiB3aGVuIGlkZW50aWZ5IHBvcHVwIGNsb3Nlcy5cbiAqL1xuY29uc3QgUkVTVE9SRV9PTl9JREVOVElGWV9DTE9TRV9FVkVOVCA9ICdxdWVyeXNpbXBsZS1yZXN0b3JlLW9uLWlkZW50aWZ5LWNsb3NlJ1xuXG4vKipcbiAqIERldGVjdHMgaWYgYW4gaWRlbnRpZnkgcG9wdXAgaXMgY3VycmVudGx5IHZpc2libGUgaW4gdGhlIERPTS5cbiAqIFVzZXMgdmVyaWZpZWQgc2VsZWN0b3JzIGJhc2VkIG9uIEV4cGVyaWVuY2UgQnVpbGRlcidzIGlkZW50aWZ5IHBvcHVwIHN0cnVjdHVyZS5cbiAqIFxuICogQHJldHVybnMgdHJ1ZSBpZiBpZGVudGlmeSBwb3B1cCBpcyBkZXRlY3RlZCBhbmQgdmlzaWJsZSwgZmFsc2Ugb3RoZXJ3aXNlXG4gKi9cbmZ1bmN0aW9uIGlzSWRlbnRpZnlQb3B1cE9wZW4oKTogYm9vbGVhbiB7XG4gIC8vIFByaW1hcnkgc2VsZWN0b3I6IC5lc3JpLXBvcHVwIHdpdGggcm9sZT1cImRpYWxvZ1wiXG4gIGNvbnN0IHBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVzcmktcG9wdXBbcm9sZT1cImRpYWxvZ1wiXScpXG4gIFxuICBpZiAoIXBvcHVwKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cbiAgXG4gIC8vIFZlcmlmeSBpdCdzIHZpc2libGUgKG5vdCBoaWRkZW4pXG4gIGNvbnN0IGFyaWFIaWRkZW4gPSBwb3B1cC5nZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJylcbiAgaWYgKGFyaWFIaWRkZW4gPT09ICd0cnVlJykge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG4gIFxuICAvLyBBZGRpdGlvbmFsIGNoZWNrOiB2ZXJpZnkgY29tcHV0ZWQgc3R5bGUgc2hvd3MgaXQncyB2aXNpYmxlXG4gIGNvbnN0IHN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUocG9wdXApXG4gIGlmIChzdHlsZS5kaXNwbGF5ID09PSAnbm9uZScgfHwgc3R5bGUudmlzaWJpbGl0eSA9PT0gJ2hpZGRlbicgfHwgc3R5bGUub3BhY2l0eSA9PT0gJzAnKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cbiAgXG4gIC8vIFZlcmlmeSBpdCBjb250YWlucyBlc3JpLWZlYXR1cmVzIChpZGVudGlmeSBwb3B1cCBzdHJ1Y3R1cmUpXG4gIGNvbnN0IGhhc0ZlYXR1cmVzID0gcG9wdXAucXVlcnlTZWxlY3RvcignLmVzcmktZmVhdHVyZXMnKVxuICBpZiAoIWhhc0ZlYXR1cmVzKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cbiAgXG4gIHJldHVybiB0cnVlXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUXVlcnlUYXNrUmVzdWx0UHJvcHMge1xuICB3aWRnZXRJZDogc3RyaW5nXG4gIHJlc3VsdENvdW50OiBudW1iZXJcbiAgbWF4UGVyUGFnZTogbnVtYmVyXG4gIHF1ZXJ5UGFyYW1zOiBRdWVyeVBhcmFtc1xuICBvdXRwdXREUzogRGF0YVNvdXJjZVxuICBxdWVyeUl0ZW06IEltbXV0YWJsZU9iamVjdDxRdWVyeUl0ZW1UeXBlPlxuICByZWNvcmRzOiBEYXRhUmVjb3JkW11cbiAgcnVudGltZVpvb21Ub1NlbGVjdGVkPzogYm9vbGVhblxuICBvbk5hdkJhY2s6IChjbGVhclJlc3VsdHM/OiBib29sZWFuKSA9PiBQcm9taXNlPHZvaWQ+IHwgdm9pZFxuICB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0PzogYm9vbGVhblxuICBncmFwaGljc0xheWVyPzogX19lc3JpLkdyYXBoaWNzTGF5ZXJcbiAgbWFwVmlldz86IF9fZXNyaS5NYXBWaWV3IHwgX19lc3JpLlNjZW5lVmlld1xuICByZXN1bHRzTW9kZT86IFNlbGVjdGlvblR5cGVcbiAgYWNjdW11bGF0ZWRSZWNvcmRzPzogRmVhdHVyZURhdGFSZWNvcmRbXVxuICBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZT86IChyZWNvcmRzOiBGZWF0dXJlRGF0YVJlY29yZFtdKSA9PiB2b2lkXG4gIGV2ZW50TWFuYWdlcj86IGltcG9ydCgnLi9ob29rcy91c2UtZXZlbnQtaGFuZGxpbmcnKS5FdmVudE1hbmFnZXIgIC8vIENodW5rIDcuMTogRXZlbnQgSGFuZGxpbmcgTWFuYWdlclxuICAvLyBGSVggKHIwMTguOTYpOiBSZW1vdmVkIG9uTWFudWFsUmVtb3ZhbCAtIG5vIGxvbmdlciBuZWVkZWRcbiAgLy8gRklYIChyMDE4LjkyKTogRmxhZyB0byB0cmFjayB3aGVuIHF1ZXJ5IHN3aXRjaCBpcyBpbiBwcm9ncmVzc1xuICBpc1F1ZXJ5U3dpdGNoSW5Qcm9ncmVzc1JlZj86IFJlYWN0Lk11dGFibGVSZWZPYmplY3Q8Ym9vbGVhbj5cbn1cblxuY29uc3QgcmVzdWx0U3R5bGUgPSBjc3NgXG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG5cbiAgLnF1ZXJ5LXJlc3VsdF9faGVhZGVyIHtcbiAgICBjb2xvcjogdmFyKC0tc3lzLWNvbG9yLXN1cmZhY2UtcGFwZXItdGV4dCk7XG4gICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICBmb250LXNpemU6IDAuODc1cmVtO1xuICAgIGxpbmUtaGVpZ2h0OiAxLjU7XG4gICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLXN5cy1jb2xvci1kaXZpZGVyLXNlY29uZGFyeSk7XG4gICAgbWFyZ2luLWJvdHRvbTogNnB4O1xuICAgIHBhZGRpbmctYm90dG9tOiA4cHg7XG4gIH1cblxuICAucXVlcnktcmVzdWx0LWNvbnRhaW5lciB7XG4gICAgZmxleDogMSAxIDA7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgIG92ZXJmbG93OiBhdXRvO1xuICAgIG1pbi1oZWlnaHQ6IDA7XG4gIH1cblxuICAucXVlcnktcmVzdWx0LWluZm8ge1xuICAgIGhlaWdodDogMThweDtcbiAgfVxuYFxuXG5leHBvcnQgZnVuY3Rpb24gUXVlcnlUYXNrUmVzdWx0IChwcm9wczogUXVlcnlUYXNrUmVzdWx0UHJvcHMpIHtcbiAgY29uc3QgeyBxdWVyeUl0ZW0sIHF1ZXJ5UGFyYW1zLCByZXN1bHRDb3VudCwgbWF4UGVyUGFnZSwgcmVjb3Jkcywgd2lkZ2V0SWQsIG91dHB1dERTLCBydW50aW1lWm9vbVRvU2VsZWN0ZWQsIG9uTmF2QmFjaywgcmVzdWx0c01vZGUsIGFjY3VtdWxhdGVkUmVjb3Jkcywgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UsIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQsIGdyYXBoaWNzTGF5ZXIsIG1hcFZpZXcsIGV2ZW50TWFuYWdlciwgaXNRdWVyeVN3aXRjaEluUHJvZ3Jlc3NSZWYgfSA9IHByb3BzXG4gIGNvbnN0IGdldEkxOG5NZXNzYWdlID0gaG9va3MudXNlVHJhbnNsYXRpb24oZGVmYXVsdE1lc3NhZ2UpXG4gIGNvbnN0IGludGwgPSB1c2VJbnRsKClcbiAgY29uc3Qgem9vbVRvUmVjb3JkcyA9IHVzZVpvb21Ub1JlY29yZHMobWFwVmlldylcbiAgY29uc3QgW3F1ZXJ5RGF0YSwgc2V0UXVlcnlEYXRhXSA9IFJlYWN0LnVzZVN0YXRlKG51bGwpXG4gIGNvbnN0IFtzZWxlY3RlZFJlY29yZHMsIHNldFNlbGVjdGVkUmVjb3Jkc10gPSBSZWFjdC51c2VTdGF0ZTxEYXRhUmVjb3JkW10+KFtdKVxuICAvLyBGSVggKHIwMTguOTQpOiBSZW1vdmVkIHJlbW92ZWRSZWNvcmRJZHMgc3RhdGUgLSBubyBsb25nZXIgbmVlZGVkIHNpbmNlIHJlY29yZHMgc3RheSBpbiBzeW5jXG4gIFxuICBjb25zdCBjdXJyZW50SXRlbSA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfUVVFUllfSVRFTSwgcXVlcnlJdGVtKVxuICBjb25zdCBbZXhwYW5kQWxsLCBzZXRFeHBhbmRBbGxdID0gUmVhY3QudXNlU3RhdGUoY3VycmVudEl0ZW0ucmVzdWx0RXhwYW5kQnlEZWZhdWx0ID8/IGZhbHNlKVxuICAvLyBUcmFjayBpbmRpdmlkdWFsIGl0ZW0gZXhwYW5zaW9uIHN0YXRlcyB0byBtYWludGFpbiBzdGF0ZSB3aGVuIGl0ZW1zIGFyZSByZW1vdmVkXG4gIGNvbnN0IFtpdGVtRXhwYW5kU3RhdGVzLCBzZXRJdGVtRXhwYW5kU3RhdGVzXSA9IFJlYWN0LnVzZVN0YXRlPE1hcDxzdHJpbmcsIGJvb2xlYW4+PihuZXcgTWFwKCkpXG4gIGNvbnN0IGJhY2tCdG5SZWYgPSBSZWFjdC51c2VSZWY8SFRNTEJ1dHRvbkVsZW1lbnQ+KHVuZGVmaW5lZClcbiAgXG4gIC8vIFRyYWNrIGV4cGFuZEFsbCBjaGFuZ2VzIGZvciBkZWJ1Z2dpbmdcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgIGV2ZW50OiAnZXhwYW5kQWxsLXN0YXRlLWNoYW5nZWQnLFxuICAgICAgd2lkZ2V0SWQsXG4gICAgICBleHBhbmRBbGwsXG4gICAgICBxdWVyeUl0ZW1Db25maWdJZDogcXVlcnlJdGVtLmNvbmZpZ0lkLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgfSwgW2V4cGFuZEFsbCwgd2lkZ2V0SWQsIHF1ZXJ5SXRlbS5jb25maWdJZF0pXG4gIC8vIFRyYWNrIGlmIHdlJ3ZlIGFscmVhZHkgc2VsZWN0ZWQgdGhlc2UgcmVjb3JkcyB0byBwcmV2ZW50IHJlLXNlbGVjdGlvbiB3aGVuIHN3aXRjaGluZyB0YWJzXG4gIGNvbnN0IGhhc1NlbGVjdGVkUmVmID0gUmVhY3QudXNlUmVmKGZhbHNlKVxuICAvLyBUcmFjayB0aGUgbGFzdCByZWNvcmRzIHdlIHNlbGVjdGVkIHRvIGRldGVjdCB3aGVuIG5ldyByZWNvcmRzIGNvbWUgaW5cbiAgY29uc3QgbGFzdFNlbGVjdGVkUmVjb3Jkc1JlZiA9IFJlYWN0LnVzZVJlZjxzdHJpbmdbXT4oW10pXG4gIC8vIFRyYWNrIHRoZSBvcmlnaW5hbCBxdWVyeSByZWNvcmQgSURzIChub3Qgc2VsZWN0ZWQgSURzKSB0byBkZXRlY3Qgd2hlbiBxdWVyeSByZXN1bHRzIGNoYW5nZVxuICBjb25zdCBsYXN0UXVlcnlSZWNvcmRJZHNSZWYgPSBSZWFjdC51c2VSZWY8c3RyaW5nW10+KFtdKVxuICAvLyBUcmFjayB0aGUgbGFzdCBzZWxlY3RlZCBGZWF0dXJlRGF0YVJlY29yZHMgZm9yIHJlc3RvcmF0aW9uIChpZiBuZWVkZWQpXG4gIGNvbnN0IGxhc3RTZWxlY3RlZEZlYXR1cmVSZWNvcmRzUmVmID0gUmVhY3QudXNlUmVmPEZlYXR1cmVEYXRhUmVjb3JkW10+KFtdKVxuICAvLyBGSVggKHIwMTguOTQpOiBSZW1vdmVkIHJlbW92ZWRSZWNvcmRJZHMgcmVmIC0gbm8gbG9uZ2VyIG5lZWRlZFxuICBcbiAgLy8gRXJyb3Igc3RhdGUgZm9yIHVzZXItZmFjaW5nIGVycm9yc1xuICBjb25zdCBbc2VsZWN0aW9uRXJyb3IsIHNldFNlbGVjdGlvbkVycm9yXSA9IFJlYWN0LnVzZVN0YXRlPHN0cmluZz4obnVsbClcblxuICBjb25zdCBleHRyYUFjdGlvbnMgPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICByZXR1cm4gZ2V0RXh0cmFBY3Rpb25zKHdpZGdldElkLCBvdXRwdXREUywgbWFwVmlldywgaW50bCwgcXVlcnlJdGVtLCBydW50aW1lWm9vbVRvU2VsZWN0ZWQpXG4gIH0sIFt3aWRnZXRJZCwgb3V0cHV0RFMsIG1hcFZpZXcsIGludGwsIHF1ZXJ5SXRlbSwgcnVudGltZVpvb21Ub1NlbGVjdGVkXSlcblxuICBjb25zdCBlbmFibGVEYXRhQWN0aW9uID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcbiAgICBjb25zdCB3aWRnZXRKc29uID0gc3RhdGUuYXBwQ29uZmlnLndpZGdldHNbd2lkZ2V0SWRdXG4gICAgcmV0dXJuIHdpZGdldEpzb24uZW5hYmxlRGF0YUFjdGlvbiA/PyB0cnVlXG4gIH0pXG5cbiAgY29uc3QgcGFnaW5nVHlwZUluQ29uZmlnID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcbiAgICBjb25zdCB3aWRnZXRKc29uID0gc3RhdGUuYXBwQ29uZmlnLndpZGdldHNbd2lkZ2V0SWRdXG4gICAgcmV0dXJuIHdpZGdldEpzb24uY29uZmlnLnJlc3VsdFBhZ2luZ1N0eWxlXG4gIH0pXG4gIGNvbnN0IGRpcmVjdGlvblR5cGVJbkNvbmZpZyA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XG4gICAgY29uc3Qgd2lkZ2V0SnNvbiA9IHN0YXRlLmFwcENvbmZpZy53aWRnZXRzW3dpZGdldElkXVxuICAgIHJldHVybiB3aWRnZXRKc29uLmNvbmZpZy5yZXN1bHRMaXN0RGlyZWN0aW9uXG4gIH0pXG4gIC8vIEZPUkNFIFNpbXBsZUxpc3QgLSBpZ25vcmUgY29uZmlnLCB3ZSdyZSBkb25lIHdpdGggbGF6eSBsb2FkaW5nIGlzc3Vlc1xuICBjb25zdCBwYWdpbmdUeXBlID0gUGFnaW5nVHlwZS5TaW1wbGVcbiAgY29uc3QgZGlyZWN0aW9uID0gZGlyZWN0aW9uVHlwZUluQ29uZmlnID8/IExpc3REaXJlY3Rpb24uVmVydGljYWxcblxuICAvLyBHcm91cCByZWNvcmRzIGJ5IG9yaWdpbiBkYXRhIHNvdXJjZSBmb3IgRGF0YUFjdGlvbkxpc3RcbiAgLy8gVGhpcyBlbnN1cmVzIERhdGFBY3Rpb25MaXN0IHJlY29nbml6ZXMgcmVjb3JkcyBldmVuIHdoZW4gdGhleSBjb21lIGZyb20gZGlmZmVyZW50IHF1ZXJpZXMvb3JpZ2luc1xuICBjb25zdCBhY3Rpb25EYXRhU2V0czogRGF0YVJlY29yZFNldFtdID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgLy8gRGVidWc6IExvZyB3aGF0IHJlY29yZHMgYXJlIGF2YWlsYWJsZVxuICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgZXZlbnQ6ICdhY3Rpb25EYXRhU2V0cy1jYWxjdWxhdGlvbi1zdGFydCcsXG4gICAgICB3aWRnZXRJZDogd2lkZ2V0SWQsXG4gICAgICBzZWxlY3RlZFJlY29yZHNDb3VudDogc2VsZWN0ZWRSZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgIHF1ZXJ5RGF0YVJlY29yZHNDb3VudDogcXVlcnlEYXRhPy5yZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgIHJlY29yZHNQcm9wQ291bnQ6IHJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgb3V0cHV0RFNJZDogb3V0cHV0RFM/LmlkLFxuICAgICAgaGFzU2VsZWN0ZWRSZWNvcmRzOiBzZWxlY3RlZFJlY29yZHM/Lmxlbmd0aCA+IDAsXG4gICAgICBoYXNRdWVyeURhdGFSZWNvcmRzOiBxdWVyeURhdGE/LnJlY29yZHM/Lmxlbmd0aCA+IDAsXG4gICAgICBoYXNSZWNvcmRzUHJvcDogcmVjb3Jkcz8ubGVuZ3RoID4gMFxuICAgIH0pXG4gICAgXG4gICAgY29uc3QgaXNBY2N1bXVsYXRpb25Nb2RlID0gcmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb24gfHwgcmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvblxuICAgIFxuICAgIC8vIEluIGFjY3VtdWxhdGlvbiBtb2RlcyAoQWRkL1JlbW92ZSksIHByZWZlciB0aGUgJ3JlY29yZHMnIHByb3AgKHRoZSBhY2N1bXVsYXRlZCBzZXQpXG4gICAgLy8gYmVjYXVzZSBvdXRwdXREUy5nZXRTZWxlY3RlZFJlY29yZHMoKSB3aWxsIG9ubHkgcmV0dXJuIHJlY29yZHMgdGhhdCBtYXRjaCB0aGUgY3VycmVudCBxdWVyeSdzIHdoZXJlIGNsYXVzZS5cbiAgICBjb25zdCByZWNvcmRzVG9Vc2UgPSBpc0FjY3VtdWxhdGlvbk1vZGVcbiAgICAgID8gKHJlY29yZHMgfHwgW10pXG4gICAgICA6IChzZWxlY3RlZFJlY29yZHM/Lmxlbmd0aCA+IDAgPyBzZWxlY3RlZFJlY29yZHMgOiAocXVlcnlEYXRhPy5yZWNvcmRzPy5sZW5ndGggPiAwID8gcXVlcnlEYXRhLnJlY29yZHMgOiAocmVjb3JkcyB8fCBbXSkpKVxuICAgIFxuICAgIC8vIElmIG5vIHJlY29yZHMsIHJldHVybiBzaW5nbGUgRGF0YVJlY29yZFNldCB3aXRoIGVtcHR5IHJlY29yZHMgdXNpbmcgb3V0cHV0RFNcbiAgICBpZiAoIXJlY29yZHNUb1VzZSB8fCByZWNvcmRzVG9Vc2UubGVuZ3RoID09PSAwKSB7XG4gICAgICBjb25zdCBlbXB0eURhdGFTZXQ6IERhdGFSZWNvcmRTZXQgPSB7XG4gICAgICAgIGRhdGFTb3VyY2U6IG91dHB1dERTLFxuICAgICAgICB0eXBlOiAnbG9hZGVkJyxcbiAgICAgICAgcmVjb3JkczogW10sXG4gICAgICAgIG5hbWU6IG91dHB1dERTPy5pZCxcbiAgICAgICAgbGFiZWw6IG91dHB1dERTPy5nZXRMYWJlbCgpXG4gICAgICB9XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdhY3Rpb25EYXRhU2V0cy1lbXB0eS1yZWNvcmRzJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHdpZGdldElkLFxuICAgICAgICBkYXRhU2V0RGF0YVNvdXJjZUlkOiBlbXB0eURhdGFTZXQuZGF0YVNvdXJjZT8uaWRcbiAgICAgIH0pXG4gICAgICByZXR1cm4gW2VtcHR5RGF0YVNldF1cbiAgICB9XG4gICAgXG4gICAgLy8gR3JvdXAgcmVjb3JkcyBieSB0aGVpciBvcmlnaW4gZGF0YSBzb3VyY2VcbiAgICBjb25zdCByZWNvcmRzQnlPcmlnaW5EUyA9IG5ldyBNYXA8RmVhdHVyZUxheWVyRGF0YVNvdXJjZSwgRmVhdHVyZURhdGFSZWNvcmRbXT4oKVxuICAgIFxuICAgIHJlY29yZHNUb1VzZS5mb3JFYWNoKHJlY29yZCA9PiB7XG4gICAgICBjb25zdCByZWNvcmREUyA9IChyZWNvcmQgYXMgRmVhdHVyZURhdGFSZWNvcmQpLmdldERhdGFTb3VyY2U/LigpIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgICAgIGxldCBvcmlnaW5EUzogRmVhdHVyZUxheWVyRGF0YVNvdXJjZSB8IG51bGwgPSBudWxsXG4gICAgICBcbiAgICAgIGlmIChyZWNvcmREUykge1xuICAgICAgICBvcmlnaW5EUyA9IHJlY29yZERTLmdldE9yaWdpbkRhdGFTb3VyY2VzKCk/LlswXSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlIHx8IHJlY29yZERTXG4gICAgICB9IGVsc2UgaWYgKG91dHB1dERTKSB7XG4gICAgICAgIC8vIEZhbGxiYWNrOiB1c2Ugb3V0cHV0RFMncyBvcmlnaW4gaWYgcmVjb3JkIGRvZXNuJ3QgaGF2ZSBkYXRhU291cmNlXG4gICAgICAgIG9yaWdpbkRTID0gb3V0cHV0RFMuZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKT8uWzBdIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2UgfHwgb3V0cHV0RFMgYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAob3JpZ2luRFMpIHtcbiAgICAgICAgaWYgKCFyZWNvcmRzQnlPcmlnaW5EUy5oYXMob3JpZ2luRFMpKSB7XG4gICAgICAgICAgcmVjb3Jkc0J5T3JpZ2luRFMuc2V0KG9yaWdpbkRTLCBbXSlcbiAgICAgICAgfVxuICAgICAgICByZWNvcmRzQnlPcmlnaW5EUy5nZXQob3JpZ2luRFMpLnB1c2gocmVjb3JkIGFzIEZlYXR1cmVEYXRhUmVjb3JkKVxuICAgICAgfVxuICAgIH0pXG4gICAgXG4gICAgLy8gQ3JlYXRlIGEgRGF0YVJlY29yZFNldCBmb3IgZWFjaCBvcmlnaW4gZGF0YSBzb3VyY2VcbiAgICBjb25zdCBkYXRhU2V0czogRGF0YVJlY29yZFNldFtdID0gQXJyYXkuZnJvbShyZWNvcmRzQnlPcmlnaW5EUy5lbnRyaWVzKCkpLm1hcCgoW29yaWdpbkRTLCBvcmlnaW5SZWNvcmRzXSkgPT4ge1xuICAgICAgY29uc3QgZGF0YVNldDogRGF0YVJlY29yZFNldCA9IHtcbiAgICAgICAgZGF0YVNvdXJjZTogb3JpZ2luRFMsIC8vIFVzZSBvcmlnaW4gRFMsIG5vdCBvdXRwdXREU1xuICAgICAgICB0eXBlOiAnc2VsZWN0ZWQnLFxuICAgICAgICByZWNvcmRzOiBvcmlnaW5SZWNvcmRzLFxuICAgICAgICBuYW1lOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgbGFiZWw6IG9yaWdpbkRTLmdldExhYmVsKClcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQWRkIGZpZWxkcyBpZiBuZWVkZWQgKHVzZSBjdXJyZW50SXRlbSdzIGZpZWxkIHNldHRpbmdzKVxuICAgICAgaWYgKGN1cnJlbnRJdGVtLnJlc3VsdEZpZWxkc1R5cGUgPT09IEZpZWxkc1R5cGUuU2VsZWN0QXR0cmlidXRlcyAmJiBjdXJyZW50SXRlbS5yZXN1bHREaXNwbGF5RmllbGRzICE9IG51bGwpIHtcbiAgICAgICAgZGF0YVNldC5maWVsZHMgPSBjb21iaW5lRmllbGRzKGN1cnJlbnRJdGVtLnJlc3VsdERpc3BsYXlGaWVsZHMsIGN1cnJlbnRJdGVtLnJlc3VsdFRpdGxlRXhwcmVzc2lvbilcbiAgICAgIH0gZWxzZSBpZiAob3JpZ2luRFMgJiYgJ2dldFBvcHVwSW5mbycgaW4gb3JpZ2luRFMpIHtcbiAgICAgICAgLy8gdXNlIGZpZWxkcyBpbiBwb3B1cCB0ZW1wbGF0ZSBmcm9tIG9yaWdpbiBEU1xuICAgICAgICBjb25zdCBwb3B1cEluZm8gPSBvcmlnaW5EUy5nZXRQb3B1cEluZm8oKVxuICAgICAgICBpZiAocG9wdXBJbmZvPy5maWVsZEluZm9zKSB7XG4gICAgICAgICAgZGF0YVNldC5maWVsZHMgPSBwb3B1cEluZm8uZmllbGRJbmZvcy5maWx0ZXIoKGZpZWxkSW5mbykgPT4gZmllbGRJbmZvLnZpc2libGUpLm1hcCgoZmllbGRJbmZvKSA9PiBmaWVsZEluZm8uZmllbGROYW1lKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiBkYXRhU2V0XG4gICAgfSlcbiAgICBcbiAgICAvLyBEZWJ1ZzogTG9nIHdoYXQgdGhlIGZpbmFsIGRhdGFTZXRzIGNvbnRhaW5cbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgIGV2ZW50OiAnYWN0aW9uRGF0YVNldHMtZmluYWwnLFxuICAgICAgd2lkZ2V0SWQ6IHdpZGdldElkLFxuICAgICAgZGF0YVNldHNDb3VudDogZGF0YVNldHMubGVuZ3RoLFxuICAgICAgdG90YWxSZWNvcmRzQ291bnQ6IHJlY29yZHNUb1VzZS5sZW5ndGgsXG4gICAgICBkYXRhU2V0c0J5T3JpZ2luOiBkYXRhU2V0cy5tYXAoZHMgPT4gKHtcbiAgICAgICAgb3JpZ2luRFNJZDogZHMuZGF0YVNvdXJjZT8uaWQsXG4gICAgICAgIHJlY29yZHNDb3VudDogZHMucmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgIHR5cGU6IGRzLnR5cGVcbiAgICAgIH0pKVxuICAgIH0pXG4gICAgXG4gICAgLy8gSWYgd2UgY291bGRuJ3QgZ3JvdXAgYnkgb3JpZ2luIChzaG91bGRuJ3QgaGFwcGVuKSwgZmFsbGJhY2sgdG8gc2luZ2xlIERhdGFSZWNvcmRTZXQgd2l0aCBvdXRwdXREU1xuICAgIGlmIChkYXRhU2V0cy5sZW5ndGggPT09IDAgJiYgb3V0cHV0RFMpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ2FjdGlvbkRhdGFTZXRzLWZhbGxiYWNrLXRvLW91dHB1dERTJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHdpZGdldElkLFxuICAgICAgICByZWFzb246ICdjb3VsZC1ub3QtZGV0ZXJtaW5lLW9yaWdpbi1kcydcbiAgICAgIH0pXG4gICAgICByZXR1cm4gW3tcbiAgICAgICAgZGF0YVNvdXJjZTogb3V0cHV0RFMsXG4gICAgICAgIHR5cGU6IHJlY29yZHNUb1VzZS5sZW5ndGggPiAwID8gJ3NlbGVjdGVkJyA6ICdsb2FkZWQnLFxuICAgICAgICByZWNvcmRzOiByZWNvcmRzVG9Vc2UsXG4gICAgICAgIG5hbWU6IG91dHB1dERTLmlkLFxuICAgICAgICBsYWJlbDogb3V0cHV0RFMuZ2V0TGFiZWwoKVxuICAgICAgfV1cbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGRhdGFTZXRzXG4gIH0sIFtzZWxlY3RlZFJlY29yZHMsIG91dHB1dERTLCBxdWVyeURhdGEsIGN1cnJlbnRJdGVtLCByZWNvcmRzLCB3aWRnZXRJZF0pXG5cbiAgLy8gRklYIChyMDE4Ljk0KTogU2ltcGxpZmllZCAtIG5vIGZpbHRlcmluZyBuZWVkZWQgc2luY2UgcmVjb3JkcyBhcmUga2VwdCBpbiBzeW5jXG4gIC8vIE1lbW9pemUgcmVjb3JkcyB0byBwcmV2ZW50IHVubmVjZXNzYXJ5IHJlLXJlbmRlcnMgdGhhdCByZXNldCBzY3JvbGwgcG9zaXRpb25cbiAgLy8gVGhpcyBlbnN1cmVzIHRoZSByZWNvcmRzIHByb3Agb25seSBjaGFuZ2VzIHdoZW4gdGhlIGFjdHVhbCBkYXRhIGNoYW5nZXMsIG5vdCBqdXN0IHRoZSBhcnJheSByZWZlcmVuY2VcbiAgY29uc3QgZmlsdGVyZWRSZWNvcmRzRm9yTGlzdCA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgIHJldHVybiBxdWVyeURhdGE/LnJlY29yZHMgfHwgcmVjb3JkcyB8fCBbXVxuICB9LCBbcXVlcnlEYXRhPy5yZWNvcmRzLCByZWNvcmRzXSlcblxuICBob29rcy51c2VFZmZlY3RPbmNlKCgpID0+IHtcbiAgICAvLyBmb2N1cyB0aGUgYmFjayBidXR0b24gd2hlbiBpdCBpcyByZW5kZXJlZFxuICAgIGZvY3VzRWxlbWVudEluS2V5Ym9hcmRNb2RlKGJhY2tCdG5SZWYuY3VycmVudClcbiAgfSlcblxuICAvKipcbiAgICogRWZmZWN0IGhvb2sgdGhhdCBydW5zIHdoZW4gbmV3IHF1ZXJ5IHJlc3VsdHMgYXJyaXZlLlxuICAgKiBSZXNldHMgcmVtb3ZlZCByZWNvcmRzLCBleHBhbmQgc3RhdGUsIGFuZCBxdWVyeSBkYXRhIGZvciB0aGUgbmV3IHJlc3VsdHMuXG4gICAqIEFsc28gaGFuZGxlcyBhdXRvLXNlbGVjdGlvbiBvZiByZWNvcmRzIHdoZW4gdGhleSBmaXJzdCBhcnJpdmUuXG4gICAqL1xuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIENoZWNrIGlmIHRoZXNlIGFyZSBuZXcgcmVjb3JkcyAoZGlmZmVyZW50IGZyb20gd2hhdCB3ZSBsYXN0IHF1ZXJpZWQpXG4gICAgLy8gSU1QT1JUQU5UOiBDb21wYXJlIGFnYWluc3Qgb3JpZ2luYWwgcXVlcnkgcmVzdWx0cywgbm90IHNlbGVjdGVkIHJlc3VsdHNcbiAgICAvLyBUaGlzIHByZXZlbnRzIHJlbW92ZWRSZWNvcmRJZHMgZnJvbSBiZWluZyByZXNldCB3aGVuIHJlY29yZHMgYXJlIHJlbW92ZWRcbiAgICBjb25zdCBjdXJyZW50UmVjb3JkSWRzID0gcmVjb3Jkcz8ubWFwKHJlY29yZCA9PiByZWNvcmQuZ2V0SWQoKSkgfHwgW11cbiAgICBjb25zdCByZWNvcmRzQ2hhbmdlZCA9IGN1cnJlbnRSZWNvcmRJZHMubGVuZ3RoICE9PSBsYXN0UXVlcnlSZWNvcmRJZHNSZWYuY3VycmVudC5sZW5ndGggfHxcbiAgICAgIGN1cnJlbnRSZWNvcmRJZHMuc29tZSgoaWQsIGluZGV4KSA9PiBpZCAhPT0gbGFzdFF1ZXJ5UmVjb3JkSWRzUmVmLmN1cnJlbnRbaW5kZXhdKVxuICAgIFxuICAgIC8vIEZJWCAocjAxOC45NCk6IFNpbXBsaWZpZWQgLSBubyByZW1vdmVkUmVjb3JkSWRzIHRyYWNraW5nIG5lZWRlZFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgZXZlbnQ6ICdyZWNvcmRzLXByb3AtY2hhbmdlZCcsXG4gICAgICB3aWRnZXRJZDogd2lkZ2V0SWQsXG4gICAgICByZWNvcmRzQ291bnQ6IHJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgd2lsbFNldFF1ZXJ5RGF0YTogcmVjb3JkcyAmJiByZWNvcmRzLmxlbmd0aCA+IDAsXG4gICAgICBoYXNTZWxlY3RlZFJlZjogaGFzU2VsZWN0ZWRSZWYuY3VycmVudCxcbiAgICAgIHJlY29yZHNDaGFuZ2VkOiByZWNvcmRzQ2hhbmdlZCxcbiAgICAgIGxhc3RRdWVyeVJlY29yZElkc0NvdW50OiBsYXN0UXVlcnlSZWNvcmRJZHNSZWYuY3VycmVudC5sZW5ndGgsXG4gICAgICBjdXJyZW50UmVjb3JkSWRzQ291bnQ6IGN1cnJlbnRSZWNvcmRJZHMubGVuZ3RoLFxuICAgICAgbm90ZTogJ3IwMTguOTQ6IFJlY29yZHMgc3RheSBpbiBzeW5jIC0gbm8gZmlsdGVyaW5nIG5lZWRlZCcsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIC8vIFVwZGF0ZSB0aGUgb3JpZ2luYWwgcXVlcnkgcmVjb3JkIElEcyByZWZcbiAgICBpZiAocmVjb3Jkc0NoYW5nZWQpIHtcbiAgICAgIGxhc3RRdWVyeVJlY29yZElkc1JlZi5jdXJyZW50ID0gY3VycmVudFJlY29yZElkc1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAncmVjb3Jkcy1jaGFuZ2VkLXJlZi11cGRhdGVkJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHdpZGdldElkLFxuICAgICAgICBuZXdSZWNvcmRJZHNDb3VudDogY3VycmVudFJlY29yZElkcy5sZW5ndGgsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICB9XG4gICAgXG4gICAgLy8gTk9URTogRG9uJ3QgcmVzZXQgZXhwYW5kQWxsIGhlcmUgLSBpdCdzIGhhbmRsZWQgYnkgdGhlIHF1ZXJ5SXRlbS1jaGFuZ2UgdXNlRWZmZWN0XG4gICAgLy8gUmVzZXR0aW5nIGl0IGhlcmUgY2F1c2VzIHRoZSBFeHBhbmQvQ29sbGFwc2UgYnV0dG9uIHRvIGZsaXAgYmFjayB3aGVuIHJlY29yZHMgYXJlIHJlbW92ZWRcbiAgICBzZXRRdWVyeURhdGEoe1xuICAgICAgcmVjb3JkcyxcbiAgICAgIHBhZ2U6IDFcbiAgICB9KVxuICAgIFxuICAgIC8vIEZJWCAocjAxOC45NCk6IFNpbXBsaWZpZWQgLSBubyByZW1vdmVkUmVjb3JkSWRzIGNoZWNrIG5lZWRlZFxuICAgIC8vIE9ubHkgYXV0by1zZWxlY3QgcmVjb3JkcyBpZjpcbiAgICAvLyAxLiBXZSBoYXZlIHJlY29yZHMgYW5kIG91dHB1dERTXG4gICAgLy8gMi4gV2UgaGF2ZW4ndCBhbHJlYWR5IHNlbGVjdGVkIHRoZXNlIHJlY29yZHMgKGhhc1NlbGVjdGVkUmVmIGlzIGZhbHNlKVxuICAgIC8vIDMuIE9SIHRoZSByZWNvcmRzIGhhdmUgYWN0dWFsbHkgY2hhbmdlZCAobmV3IHF1ZXJ5IHJlc3VsdHMpXG4gICAgaWYgKHJlY29yZHMgJiYgcmVjb3Jkcy5sZW5ndGggPiAwICYmIG91dHB1dERTICYmIFxuICAgICAgICAoIWhhc1NlbGVjdGVkUmVmLmN1cnJlbnQgfHwgcmVjb3Jkc0NoYW5nZWQpKSB7XG4gICAgICBjb25zdCByZWNvcmRJZHMgPSByZWNvcmRzLm1hcChyZWNvcmQgPT4gcmVjb3JkLmdldElkKCkpXG4gICAgICBjb25zdCBmZHIgPSByZWNvcmRzIGFzIEZlYXR1cmVEYXRhUmVjb3JkW11cbiAgICAgIFxuICAgICAgLy8gU2VsZWN0IHJlY29yZHMgYW5kIHB1Ymxpc2ggc2VsZWN0aW9uIG1lc3NhZ2UgdXNpbmcgdXRpbGl0eSBmdW5jdGlvblxuICAgICAgLy8gVXNlIGFzeW5jIElJRkUgc2luY2UgdXNlRWZmZWN0IGNhbid0IGJlIGFzeW5jXG4gICAgICA7KGFzeW5jICgpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBzZXRTZWxlY3Rpb25FcnJvcihudWxsKSAvLyBDbGVhciBwcmV2aW91cyBlcnJvcnNcbiAgICAgICAgICBhd2FpdCBzZWxlY3RSZWNvcmRzQW5kUHVibGlzaChcbiAgICAgICAgICAgIHdpZGdldElkLCBcbiAgICAgICAgICAgIG91dHB1dERTLCBcbiAgICAgICAgICAgIHJlY29yZElkcywgXG4gICAgICAgICAgICBmZHIsIFxuICAgICAgICAgICAgZmFsc2UsIFxuICAgICAgICAgICAgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCwgXG4gICAgICAgICAgICBncmFwaGljc0xheWVyLCBcbiAgICAgICAgICAgIG1hcFZpZXdcbiAgICAgICAgICApXG4gICAgICAgICAgaGFzU2VsZWN0ZWRSZWYuY3VycmVudCA9IHRydWUgLy8gTWFyayBhcyBzZWxlY3RlZFxuICAgICAgICAgIGxhc3RTZWxlY3RlZFJlY29yZHNSZWYuY3VycmVudCA9IHJlY29yZElkcyAvLyBTdG9yZSB0aGUgSURzIHdlIHNlbGVjdGVkXG4gICAgICAgICAgbGFzdFNlbGVjdGVkRmVhdHVyZVJlY29yZHNSZWYuY3VycmVudCA9IGZkciAvLyBTdG9yZSB0aGUgZnVsbCByZWNvcmRzIGZvciBwb3RlbnRpYWwgcmVzdG9yYXRpb25cbiAgICAgICAgICBcbiAgICAgICAgICAvLyBOb3RpZnkgV2lkZ2V0IGFuZCBIZWxwZXJTaW1wbGUgb2Ygc2VsZWN0aW9uIGNoYW5nZVxuICAgICAgICAgIGRpc3BhdGNoU2VsZWN0aW9uRXZlbnQod2lkZ2V0SWQsIHJlY29yZElkcywgb3V0cHV0RFMsIHF1ZXJ5SXRlbS5jb25maWdJZCwgZXZlbnRNYW5hZ2VyKVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0ZhaWxlZCB0byBzZWxlY3QgcXVlcnkgcmVzdWx0cydcbiAgICAgICAgICBzZXRTZWxlY3Rpb25FcnJvcihlcnJvck1lc3NhZ2UpXG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgICAgICAgZXZlbnQ6ICdzZWxlY3Rpb24tZmFpbGVkLXF1ZXJ5LXJlc3VsdCcsXG4gICAgICAgICAgICBlcnJvcjogZXJyb3JNZXNzYWdlLFxuICAgICAgICAgICAgZXJyb3JTdGFjazogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnN0YWNrIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgcmVjb3JkQ291bnQ6IHJlY29yZElkcy5sZW5ndGhcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9KSgpXG4gICAgfSBlbHNlIGlmIChyZWNvcmRzQ2hhbmdlZCAmJiByZWNvcmRzICYmIHJlY29yZHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAvLyBJZiByZWNvcmRzIHdlcmUgY2xlYXJlZCwgcmVzZXQgdGhlIHNlbGVjdGlvbiBmbGFnXG4gICAgICBoYXNTZWxlY3RlZFJlZi5jdXJyZW50ID0gZmFsc2VcbiAgICAgIGxhc3RTZWxlY3RlZFJlY29yZHNSZWYuY3VycmVudCA9IFtdXG4gICAgICBzZXRTZWxlY3Rpb25FcnJvcihudWxsKSAvLyBDbGVhciBlcnJvcnMgd2hlbiBjbGVhcmluZyByZWNvcmRzXG4gICAgfSBlbHNlIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ2F1dG8tc2VsZWN0aW9uLXNraXBwZWQnLFxuICAgICAgICB3aWRnZXRJZDogd2lkZ2V0SWQsXG4gICAgICAgIHJlY29yZHNDb3VudDogcmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgIGhhc1JlY29yZHM6ICEhKHJlY29yZHMgJiYgcmVjb3Jkcy5sZW5ndGggPiAwKSxcbiAgICAgICAgaGFzT3V0cHV0RFM6ICEhb3V0cHV0RFMsXG4gICAgICAgIGhhc1NlbGVjdGVkUmVmOiBoYXNTZWxlY3RlZFJlZi5jdXJyZW50LFxuICAgICAgICByZWNvcmRzQ2hhbmdlZDogcmVjb3Jkc0NoYW5nZWQsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICB9XG4gIH0sIFtyZWNvcmRzLCBvdXRwdXREUywgd2lkZ2V0SWQsIHF1ZXJ5SXRlbS5jb25maWdJZCwgcXVlcnlJdGVtLnJlc3VsdEV4cGFuZEJ5RGVmYXVsdF0pXG5cbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBjbGVhciBzZWxlY3Rpb24gd2hlbiByZXN1bHRTZWxlY3RNb2RlIGNoYW5nZWRcbiAgICBpZiAob3V0cHV0RFMpIHtcbiAgICAgIGNsZWFyU2VsZWN0aW9uSW5EYXRhU291cmNlcyhvdXRwdXREUywgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCwgZ3JhcGhpY3NMYXllcilcbiAgICAgIHB1Ymxpc2hTZWxlY3Rpb25NZXNzYWdlKHdpZGdldElkLCBbXSwgb3V0cHV0RFMsIHRydWUpXG4gICAgfVxuICB9LCBbcXVlcnlJdGVtLnJlc3VsdFNlbGVjdE1vZGUsIG91dHB1dERTLCB3aWRnZXRJZCwgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCwgZ3JhcGhpY3NMYXllcl0pXG5cbiAgLy8gVXBkYXRlIGV4cGFuZEFsbCB3aGVuIHF1ZXJ5SXRlbSBjaGFuZ2VzIChlLmcuLCBzd2l0Y2hpbmcgYmV0d2VlbiBxdWVyaWVzKVxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IG5ld0V4cGFuZEFsbCA9IHF1ZXJ5SXRlbS5yZXN1bHRFeHBhbmRCeURlZmF1bHQgPz8gZmFsc2VcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgIGV2ZW50OiAnZXhwYW5kQWxsLXJlc2V0LWJ5LXF1ZXJ5SXRlbS1jaGFuZ2UnLFxuICAgICAgd2lkZ2V0SWQsXG4gICAgICBxdWVyeUl0ZW1Db25maWdJZDogcXVlcnlJdGVtLmNvbmZpZ0lkLFxuICAgICAgcmVzdWx0RXhwYW5kQnlEZWZhdWx0OiBxdWVyeUl0ZW0ucmVzdWx0RXhwYW5kQnlEZWZhdWx0LFxuICAgICAgbmV3RXhwYW5kQWxsLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBzZXRFeHBhbmRBbGwobmV3RXhwYW5kQWxsKVxuICAgIC8vIFJlc2V0IGluZGl2aWR1YWwgZXhwYW5zaW9uIHN0YXRlcyB3aGVuIHF1ZXJ5IGNoYW5nZXNcbiAgICBzZXRJdGVtRXhwYW5kU3RhdGVzKG5ldyBNYXAoKSlcbiAgfSwgW3F1ZXJ5SXRlbS5jb25maWdJZF0pXG5cbiAgLyoqXG4gICAqIE1vbml0b3Igb3JpZ2luIGRhdGEgc291cmNlIHNlbGVjdGlvbiBjaGFuZ2VzIHRvIGRldGVjdCB3aGVuIG90aGVyIHdpZGdldHMgKGxpa2UgbWFwIGlkZW50aWZ5KVxuICAgKiBjbGVhciBvdXIgc2VsZWN0aW9ucy4gRW5oYW5jZWQgd2l0aCBpZGVudGlmeSBwb3B1cCBkZXRlY3Rpb24gZm9yIHRlc3Rpbmcgc2NlbmFyaW9zLlxuICAgKiBXYXRjaGVzIHRoZSBvcmlnaW4gZGF0YSBzb3VyY2UncyBzZWxlY3Rpb24gc3RhdGUgZGlyZWN0bHkgdmlhIHBvbGxpbmcuXG4gICAqL1xuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghb3V0cHV0RFMpIHJldHVyblxuXG4gICAgY29uc3Qgb3JpZ2luRFMgPSBvdXRwdXREUy5nZXRPcmlnaW5EYXRhU291cmNlcygpPy5bMF0gYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICAgIGlmICghb3JpZ2luRFMpIHJldHVyblxuXG4gICAgY29uc3Qgb3JpZ2luRFNJZCA9IG9yaWdpbkRTLmlkXG4gICAgbGV0IHByZXZpb3VzU2VsZWN0ZWRJZHM6IHN0cmluZ1tdID0gW11cbiAgICBsZXQgaWRlbnRpZnlQb3B1cFdhc09wZW4gPSBmYWxzZVxuICAgIGxldCBsYXN0TG9nVGltZSA9IDBcbiAgICBjb25zdCBMT0dfVEhST1RUTEVfTVMgPSAxMDAwIC8vIFRocm90dGxlIGxvZ3MgdG8gb25jZSBwZXIgc2Vjb25kXG4gICAgXG4gICAgLy8gSW5pdGlhbCBjaGVja1xuICAgIHByZXZpb3VzU2VsZWN0ZWRJZHMgPSBvcmlnaW5EUy5nZXRTZWxlY3RlZFJlY29yZElkcygpIHx8IFtdXG4gICAgaWRlbnRpZnlQb3B1cFdhc09wZW4gPSBpc0lkZW50aWZ5UG9wdXBPcGVuKClcblxuICAgIC8vIFdhdGNoIGZvciBzZWxlY3Rpb24gY2hhbmdlcyBvbiB0aGUgb3JpZ2luIGRhdGEgc291cmNlXG4gICAgY29uc3QgY2hlY2tTZWxlY3Rpb24gPSAoKSA9PiB7XG4gICAgICBjb25zdCBjdXJyZW50U2VsZWN0ZWRJZHMgPSBvcmlnaW5EUy5nZXRTZWxlY3RlZFJlY29yZElkcygpIHx8IFtdXG4gICAgICBjb25zdCBvdXJFeHBlY3RlZElkcyA9IGxhc3RTZWxlY3RlZFJlY29yZHNSZWYuY3VycmVudFxuICAgICAgY29uc3QgaGFzT3VyU2VsZWN0aW9uID0gb3VyRXhwZWN0ZWRJZHMubGVuZ3RoID4gMFxuICAgICAgY29uc3QgaWRlbnRpZnlQb3B1cElzT3BlbiA9IGlzSWRlbnRpZnlQb3B1cE9wZW4oKVxuICAgICAgXG4gICAgICAvLyBEZXRlY3QgaWYgc2VsZWN0aW9uIHdhcyBjbGVhcmVkIG9yIGNoYW5nZWQgZXh0ZXJuYWxseVxuICAgICAgY29uc3Qgd2FzQ2xlYXJlZCA9IHByZXZpb3VzU2VsZWN0ZWRJZHMubGVuZ3RoID4gMCAmJiBjdXJyZW50U2VsZWN0ZWRJZHMubGVuZ3RoID09PSAwXG4gICAgICBjb25zdCB3YXNDaGFuZ2VkID0gcHJldmlvdXNTZWxlY3RlZElkcy5sZW5ndGggPiAwICYmIFxuICAgICAgICAoY3VycmVudFNlbGVjdGVkSWRzLmxlbmd0aCAhPT0gcHJldmlvdXNTZWxlY3RlZElkcy5sZW5ndGggfHxcbiAgICAgICAgICFjdXJyZW50U2VsZWN0ZWRJZHMuZXZlcnkoaWQgPT4gcHJldmlvdXNTZWxlY3RlZElkcy5pbmNsdWRlcyhpZCkpKVxuICAgICAgXG4gICAgICAvLyBORVc6IERldGVjdCBpZiBzZWxlY3Rpb24gd2FzIGFkZGVkICh3ZW50IGZyb20gZW1wdHkgdG8gaGF2aW5nIHJlY29yZHMpXG4gICAgICBjb25zdCB3YXNBZGRlZCA9IHByZXZpb3VzU2VsZWN0ZWRJZHMubGVuZ3RoID09PSAwICYmIGN1cnJlbnRTZWxlY3RlZElkcy5sZW5ndGggPiAwXG4gICAgICBcbiAgICAgIC8vIFRyYWNrIGlkZW50aWZ5IHBvcHVwIHN0YXRlIGNoYW5nZXNcbiAgICAgIGNvbnN0IGlkZW50aWZ5UG9wdXBKdXN0T3BlbmVkID0gIWlkZW50aWZ5UG9wdXBXYXNPcGVuICYmIGlkZW50aWZ5UG9wdXBJc09wZW5cbiAgICAgIGNvbnN0IGlkZW50aWZ5UG9wdXBKdXN0Q2xvc2VkID0gaWRlbnRpZnlQb3B1cFdhc09wZW4gJiYgIWlkZW50aWZ5UG9wdXBJc09wZW5cbiAgICAgIGNvbnN0IGlkZW50aWZ5UG9wdXBTdGlsbE9wZW4gPSBpZGVudGlmeVBvcHVwV2FzT3BlbiAmJiBpZGVudGlmeVBvcHVwSXNPcGVuXG4gICAgICBcbiAgICAgIC8vIExvZyBpZGVudGlmeSBwb3B1cCBzdGF0ZSBjaGFuZ2VzXG4gICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpXG4gICAgICBpZiAoaWRlbnRpZnlQb3B1cEp1c3RPcGVuZWQgfHwgaWRlbnRpZnlQb3B1cEp1c3RDbG9zZWQpIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdTRUxFQ1RJT04nLCB7XG4gICAgICAgICAgZXZlbnQ6IGlkZW50aWZ5UG9wdXBKdXN0T3BlbmVkID8gJ2lkZW50aWZ5LXBvcHVwLW9wZW5lZCcgOiAnaWRlbnRpZnktcG9wdXAtY2xvc2VkJyxcbiAgICAgICAgICBvcmlnaW5EU0lkLFxuICAgICAgICAgIG91clNlbGVjdGlvbkNvdW50OiBvdXJFeHBlY3RlZElkcy5sZW5ndGgsXG4gICAgICAgICAgY3VycmVudFNlbGVjdGlvbkNvdW50OiBjdXJyZW50U2VsZWN0ZWRJZHMubGVuZ3RoLFxuICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgICAgICAvLyBJZiBpZGVudGlmeSBwb3B1cCBqdXN0IGNsb3NlZCBhbmQgc2VsZWN0aW9uIHdhcyBjbGVhcmVkLCBkaXNwYXRjaCByZXN0b3JlIGV2ZW50XG4gICAgICAgIGlmIChpZGVudGlmeVBvcHVwSnVzdENsb3NlZCAmJiB3YXNDbGVhcmVkICYmIGhhc091clNlbGVjdGlvbiAmJiBvdXJFeHBlY3RlZElkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgY29uc3QgcmVzdG9yZUV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KFJFU1RPUkVfT05fSURFTlRJRllfQ0xPU0VfRVZFTlQsIHtcbiAgICAgICAgICAgIGRldGFpbDoge1xuICAgICAgICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgICAgICAgcmVjb3JkSWRzOiBvdXJFeHBlY3RlZElkcyxcbiAgICAgICAgICAgICAgb3V0cHV0RHNJZDogb3V0cHV0RFMuaWQsXG4gICAgICAgICAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBxdWVyeUl0ZW0uY29uZmlnSWRcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgICAgICAgY2FuY2VsYWJsZTogdHJ1ZVxuICAgICAgICAgIH0pXG4gICAgICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQocmVzdG9yZUV2ZW50KVxuICAgICAgICAgIFxuICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnU0VMRUNUSU9OJywge1xuICAgICAgICAgICAgZXZlbnQ6ICdpZGVudGlmeS1wb3B1cC1jbG9zZWQtcmVzdG9yZS1yZXF1ZXN0ZWQnLFxuICAgICAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgICAgICByZWNvcmRDb3VudDogb3VyRXhwZWN0ZWRJZHMubGVuZ3RoLFxuICAgICAgICAgICAgb3V0cHV0RHNJZDogb3V0cHV0RFMuaWQsXG4gICAgICAgICAgICBxdWVyeUl0ZW1Db25maWdJZDogcXVlcnlJdGVtLmNvbmZpZ0lkXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBMb2cgQUxMIHNlbGVjdGlvbiBjaGFuZ2VzIChub3QganVzdCB3aGVuIHdlIGhhdmUgb3VyIG93biBzZWxlY3Rpb24pXG4gICAgICBpZiAod2FzQ2xlYXJlZCB8fCB3YXNDaGFuZ2VkIHx8IHdhc0FkZGVkKSB7XG4gICAgICAgIC8vIENoZWNrIGlmIHRoaXMgbWF0Y2hlcyBvdXIgZXhwZWN0ZWQgc2VsZWN0aW9uXG4gICAgICAgIGNvbnN0IG1hdGNoZXNPdXJTZWxlY3Rpb24gPSBoYXNPdXJTZWxlY3Rpb24gJiYgXG4gICAgICAgICAgb3VyRXhwZWN0ZWRJZHMubGVuZ3RoID09PSBjdXJyZW50U2VsZWN0ZWRJZHMubGVuZ3RoICYmXG4gICAgICAgICAgb3VyRXhwZWN0ZWRJZHMuZXZlcnkoaWQgPT4gY3VycmVudFNlbGVjdGVkSWRzLmluY2x1ZGVzKGlkKSlcbiAgICAgICAgXG4gICAgICAgIC8vIERldGVybWluZSB3aGF0IHdvdWxkIGhhcHBlbiAoZm9yIHRlc3RpbmcvbG9nZ2luZylcbiAgICAgICAgY29uc3Qgd291bGRSZXN0b3JlID0gd2FzQ2xlYXJlZCAmJiBpZGVudGlmeVBvcHVwSXNPcGVuICYmIGhhc091clNlbGVjdGlvbiAmJiBvdXJFeHBlY3RlZElkcy5sZW5ndGggPiAwXG4gICAgICAgIFxuICAgICAgICAvLyBEZXRlcm1pbmUgc2NlbmFyaW9cbiAgICAgICAgbGV0IHNjZW5hcmlvID0gJ1Vua25vd24nXG4gICAgICAgIGlmICh3YXNBZGRlZCAmJiAhaGFzT3VyU2VsZWN0aW9uKSB7XG4gICAgICAgICAgc2NlbmFyaW8gPSAnVEVTVCBTQ0VOQVJJTyA0OiBBbm90aGVyIHdpZGdldCBzZWxlY3RlZCByZWNvcmRzICh3ZSBoYXZlIG5vIHNlbGVjdGlvbiknXG4gICAgICAgIH0gZWxzZSBpZiAod2FzQ2hhbmdlZCAmJiAhbWF0Y2hlc091clNlbGVjdGlvbiAmJiAhaGFzT3VyU2VsZWN0aW9uKSB7XG4gICAgICAgICAgc2NlbmFyaW8gPSAnVEVTVCBTQ0VOQVJJTyA1OiBBbm90aGVyIHdpZGdldCBjaGFuZ2VkIHNlbGVjdGlvbiAod2UgaGF2ZSBubyBzZWxlY3Rpb24pJ1xuICAgICAgICB9IGVsc2UgaWYgKHdhc0NoYW5nZWQgJiYgIW1hdGNoZXNPdXJTZWxlY3Rpb24gJiYgaGFzT3VyU2VsZWN0aW9uKSB7XG4gICAgICAgICAgc2NlbmFyaW8gPSBpZGVudGlmeVBvcHVwSXNPcGVuXG4gICAgICAgICAgICA/ICdURVNUIFNDRU5BUklPIDI6IFF1ZXJ5IOKGkiBJZGVudGlmeSAoc2VsZWN0aW9uIGNoYW5nZWQsIG5vdCBjbGVhcmVkKSDihpIgV291bGQgTk9UIHJlc3RvcmUnXG4gICAgICAgICAgICA6ICdURVNUIFNDRU5BUklPIDM6IFF1ZXJ5IOKGkiBBbm90aGVyIFF1ZXJ5U2ltcGxlIHdpZGdldCDihpIgV291bGQgTk9UIHJlc3RvcmUnXG4gICAgICAgIH0gZWxzZSBpZiAod2FzQ2xlYXJlZCAmJiBoYXNPdXJTZWxlY3Rpb24pIHtcbiAgICAgICAgICBzY2VuYXJpbyA9IGlkZW50aWZ5UG9wdXBJc09wZW5cbiAgICAgICAgICAgID8gJ1RFU1QgU0NFTkFSSU8gMTogUXVlcnkg4oaSIElkZW50aWZ5IOKGkiBXb3VsZCByZXN0b3JlJ1xuICAgICAgICAgICAgOiAnVEVTVCBTQ0VOQVJJTyAzOiBRdWVyeSDihpIgQW5vdGhlciBRdWVyeVNpbXBsZSB3aWRnZXQgKGNsZWFyZWQpIOKGkiBXb3VsZCBOT1QgcmVzdG9yZSdcbiAgICAgICAgfSBlbHNlIGlmICh3YXNBZGRlZCAmJiBoYXNPdXJTZWxlY3Rpb24pIHtcbiAgICAgICAgICBzY2VuYXJpbyA9IG1hdGNoZXNPdXJTZWxlY3Rpb25cbiAgICAgICAgICAgID8gJ091ciB3aWRnZXQgc2VsZWN0ZWQgcmVjb3JkcydcbiAgICAgICAgICAgIDogJ0Fub3RoZXIgd2lkZ2V0IHNlbGVjdGVkIGRpZmZlcmVudCByZWNvcmRzJ1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBMb2cgZGV0ZWN0aW9uIHdpdGggaWRlbnRpZnkgcG9wdXAgc3RhdGUgKHRocm90dGxlZClcbiAgICAgICAgaWYgKG5vdyAtIGxhc3RMb2dUaW1lID4gTE9HX1RIUk9UVExFX01TKSB7XG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdTRUxFQ1RJT04nLCB7XG4gICAgICAgICAgICBldmVudDogd2FzQ2xlYXJlZCA/ICdzZWxlY3Rpb24tY2xlYXJlZCcgOiB3YXNDaGFuZ2VkID8gJ3NlbGVjdGlvbi1jaGFuZ2VkJyA6ICdzZWxlY3Rpb24tYWRkZWQnLFxuICAgICAgICAgICAgb3JpZ2luRFNJZCxcbiAgICAgICAgICAgIG91ckV4cGVjdGVkQ291bnQ6IG91ckV4cGVjdGVkSWRzLmxlbmd0aCxcbiAgICAgICAgICAgIHByZXZpb3VzU2VsZWN0ZWRDb3VudDogcHJldmlvdXNTZWxlY3RlZElkcy5sZW5ndGgsXG4gICAgICAgICAgICBjdXJyZW50U2VsZWN0ZWRDb3VudDogY3VycmVudFNlbGVjdGVkSWRzLmxlbmd0aCxcbiAgICAgICAgICAgIHdhc0NsZWFyZWQsXG4gICAgICAgICAgICB3YXNDaGFuZ2VkLFxuICAgICAgICAgICAgd2FzQWRkZWQsXG4gICAgICAgICAgICBoYXNPdXJTZWxlY3Rpb24sXG4gICAgICAgICAgICBtYXRjaGVzT3VyU2VsZWN0aW9uLFxuICAgICAgICAgICAgaWRlbnRpZnlQb3B1cElzT3BlbixcbiAgICAgICAgICAgIGlkZW50aWZ5UG9wdXBKdXN0T3BlbmVkLFxuICAgICAgICAgICAgaWRlbnRpZnlQb3B1cFN0aWxsT3BlbixcbiAgICAgICAgICAgIGlkZW50aWZ5UG9wdXBKdXN0Q2xvc2VkLFxuICAgICAgICAgICAgd291bGRSZXN0b3JlLFxuICAgICAgICAgICAgb3VyRXhwZWN0ZWRJZHM6IG91ckV4cGVjdGVkSWRzLnNsaWNlKDAsIDUpLFxuICAgICAgICAgICAgcHJldmlvdXNTZWxlY3RlZElkczogcHJldmlvdXNTZWxlY3RlZElkcy5zbGljZSgwLCA1KSxcbiAgICAgICAgICAgIGN1cnJlbnRTZWxlY3RlZElkczogY3VycmVudFNlbGVjdGVkSWRzLnNsaWNlKDAsIDUpLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICBub3RlOiB3b3VsZFJlc3RvcmUgXG4gICAgICAgICAgICAgID8gJ1dvdWxkIHJlc3RvcmUgc2VsZWN0aW9uIChjbGVhcmVkICsgaWRlbnRpZnkgcG9wdXAgb3BlbiknXG4gICAgICAgICAgICAgIDogaWRlbnRpZnlQb3B1cElzT3BlbiAmJiB3YXNDaGFuZ2VkXG4gICAgICAgICAgICAgICAgPyAnSWRlbnRpZnkgcG9wdXAgb3BlbiBidXQgc2VsZWN0aW9uIGNoYW5nZWQgKG5vdCBjbGVhcmVkKSAtIHdvdWxkIG5vdCByZXN0b3JlJ1xuICAgICAgICAgICAgICAgIDogd2FzQ2xlYXJlZCAmJiAhaWRlbnRpZnlQb3B1cElzT3BlblxuICAgICAgICAgICAgICAgICAgPyAnU2VsZWN0aW9uIGNsZWFyZWQsIGNoZWNraW5nIGlmIGlkZW50aWZ5IHBvcHVwIG9wZW5zLi4uJ1xuICAgICAgICAgICAgICAgICAgOiB3YXNBZGRlZFxuICAgICAgICAgICAgICAgICAgICA/IGhhc091clNlbGVjdGlvbiAmJiBtYXRjaGVzT3VyU2VsZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgPyAnT3VyIHdpZGdldCBzZWxlY3RlZCByZWNvcmRzJ1xuICAgICAgICAgICAgICAgICAgICAgIDogaGFzT3VyU2VsZWN0aW9uICYmICFtYXRjaGVzT3VyU2VsZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICA/ICdBbm90aGVyIHdpZGdldCBzZWxlY3RlZCBkaWZmZXJlbnQgcmVjb3JkcydcbiAgICAgICAgICAgICAgICAgICAgICAgIDogJ1NlbGVjdGlvbiBhZGRlZCAoYnkgYW5vdGhlciB3aWRnZXQgb3IgZXh0ZXJuYWwgc291cmNlKSdcbiAgICAgICAgICAgICAgICAgICAgOiAnTm8gaWRlbnRpZnkgcG9wdXAgZGV0ZWN0ZWQgLSB3b3VsZCBub3QgcmVzdG9yZSdcbiAgICAgICAgICB9KVxuICAgICAgICAgIFxuICAgICAgICAgIGxhc3RMb2dUaW1lID0gbm93XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgcHJldmlvdXNTZWxlY3RlZElkcyA9IFsuLi5jdXJyZW50U2VsZWN0ZWRJZHNdXG4gICAgICBpZGVudGlmeVBvcHVwV2FzT3BlbiA9IGlkZW50aWZ5UG9wdXBJc09wZW5cbiAgICB9XG5cbiAgICAvLyBDaGVjayBwZXJpb2RpY2FsbHkgKGV2ZXJ5IDUwMG1zKVxuICAgIGNvbnN0IGludGVydmFsSWQgPSBzZXRJbnRlcnZhbChjaGVja1NlbGVjdGlvbiwgNTAwKVxuICAgIFxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBjbGVhckludGVydmFsKGludGVydmFsSWQpXG4gICAgfVxuICB9LCBbb3V0cHV0RFNdKVxuXG4gIC8qKlxuICAgKiBDbGVhcnMgYWxsIHJlc3VsdHMuIFJlc2V0cyBsb2NhbCBzdGF0ZSBhbmQgZGVsZWdhdGVzIHRvIHBhcmVudCdzIGNsZWFyUmVzdWx0IG1ldGhvZC5cbiAgICovXG4gIGNvbnN0IGNsZWFyUmVzdWx0cyA9IGFzeW5jICgpID0+IHtcbiAgICAvLyBMb2cgaGFzaCBzdGF0ZSBiZWZvcmUgY2xlYXJpbmdcbiAgICBjb25zdCBoYXNoQmVmb3JlID0gd2luZG93LmxvY2F0aW9uLmhhc2guc3Vic3RyaW5nKDEpXG4gICAgY29uc3QgdXJsUGFyYW1zQmVmb3JlID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhoYXNoQmVmb3JlKVxuICAgIGNvbnN0IGhhc2hQYXJhbXNCZWZvcmU6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH0gPSB7fVxuICAgIHVybFBhcmFtc0JlZm9yZS5mb3JFYWNoKCh2YWx1ZSwga2V5KSA9PiB7XG4gICAgICBoYXNoUGFyYW1zQmVmb3JlW2tleV0gPSB2YWx1ZVxuICAgIH0pXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdIQVNIJywge1xuICAgICAgZXZlbnQ6ICdjbGVhclJlc3VsdHMtY2FsbGVkJyxcbiAgICAgIHdpZGdldElkLFxuICAgICAgaGFzaEJlZm9yZTogaGFzaEJlZm9yZSxcbiAgICAgIGhhc2hQYXJhbXNCZWZvcmU6IGhhc2hQYXJhbXNCZWZvcmUsXG4gICAgICBoYXNoUGFyYW1zQ291bnQ6IE9iamVjdC5rZXlzKGhhc2hQYXJhbXNCZWZvcmUpLmxlbmd0aCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgLy8gRklYIChyMDE4Ljk3KTogU2ltcGxpZmllZCAtIGp1c3QgZGVsZWdhdGUgdG8gcGFyZW50J3MgY2xlYXJSZXN1bHRcbiAgICAvLyBQYXJlbnQgaGFuZGxlcyBhbGwgY2xlYW51cDogcmVjb3Jkcywgc2VsZWN0aW9uLCBncmFwaGljcywgaGFzaCwgbWVzc2FnZXMsIGV0Yy5cbiAgICAvLyBMb2NhbCBzdGF0ZSB3aWxsIGJlIHJlc2V0IHdoZW4gY29tcG9uZW50IHJlbW91bnRzIHdpdGggZnJlc2ggcmVzdWx0c1xuICAgIGF3YWl0IG9uTmF2QmFjayh0cnVlKVxuICAgIFxuICAgIC8vIExvZyBoYXNoIHN0YXRlIGFmdGVyIGNsZWFyaW5nICh3aXRoIGRlbGF5IHRvIGNhdGNoIGFzeW5jIHVwZGF0ZXMpXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBjb25zdCBoYXNoQWZ0ZXIgPSB3aW5kb3cubG9jYXRpb24uaGFzaC5zdWJzdHJpbmcoMSlcbiAgICAgIGNvbnN0IHVybFBhcmFtc0FmdGVyID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhoYXNoQWZ0ZXIpXG4gICAgICBjb25zdCBoYXNoUGFyYW1zQWZ0ZXI6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH0gPSB7fVxuICAgICAgdXJsUGFyYW1zQWZ0ZXIuZm9yRWFjaCgodmFsdWUsIGtleSkgPT4ge1xuICAgICAgICBoYXNoUGFyYW1zQWZ0ZXJba2V5XSA9IHZhbHVlXG4gICAgICB9KVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gnLCB7XG4gICAgICAgIGV2ZW50OiAnY2xlYXJSZXN1bHRzLWNvbXBsZXRlZCcsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICBoYXNoQmVmb3JlOiBoYXNoQmVmb3JlLFxuICAgICAgICBoYXNoQWZ0ZXI6IGhhc2hBZnRlcixcbiAgICAgICAgaGFzaFBhcmFtc0JlZm9yZTogaGFzaFBhcmFtc0JlZm9yZSxcbiAgICAgICAgaGFzaFBhcmFtc0FmdGVyOiBoYXNoUGFyYW1zQWZ0ZXIsXG4gICAgICAgIGhhc2hQYXJhbXNSZW1vdmVkOiBPYmplY3Qua2V5cyhoYXNoUGFyYW1zQmVmb3JlKS5sZW5ndGggLSBPYmplY3Qua2V5cyhoYXNoUGFyYW1zQWZ0ZXIpLmxlbmd0aCxcbiAgICAgICAgaGFzaFBhcmFtc0NvdW50QmVmb3JlOiBPYmplY3Qua2V5cyhoYXNoUGFyYW1zQmVmb3JlKS5sZW5ndGgsXG4gICAgICAgIGhhc2hQYXJhbXNDb3VudEFmdGVyOiBPYmplY3Qua2V5cyhoYXNoUGFyYW1zQWZ0ZXIpLmxlbmd0aCxcbiAgICAgICAgc3RpbGxIYXNIYXNoUGFyYW1zOiBPYmplY3Qua2V5cyhoYXNoUGFyYW1zQWZ0ZXIpLmxlbmd0aCA+IDAsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICB9LCAxMDApXG4gIH1cblxuICBjb25zdCBoYW5kbGVSZW5kZXJEb25lID0gUmVhY3QudXNlQ2FsbGJhY2soKHsgZGF0YUl0ZW1zLCBwYWdlU2l6ZSwgcGFnZSB9KSA9PiB7XG4gICAgLy8gRklYIChyMDE4LjkyKTogU2tpcCBoYW5kbGVSZW5kZXJEb25lIGlmIGEgcXVlcnkgc3dpdGNoIGlzIGluIHByb2dyZXNzXG4gICAgLy8gVGhpcyBwcmV2ZW50cyBoYW5kbGVSZW5kZXJEb25lIGZyb20gcmUtc2VsZWN0aW5nIGZ1bGwgcXVlcnkgcmVzdWx0cyBiZWZvcmUgdGhlIHF1ZXJ5IHN3aXRjaFxuICAgIC8vIGxvZ2ljIGNhbiBjbGVhciB0aGUgZ3JhcGhpY3MgbGF5ZXIgYW5kIHJlLXNlbGVjdCBvbmx5IHRoZSBhY2N1bXVsYXRlZCByZWNvcmRzXG4gICAgaWYgKGlzUXVlcnlTd2l0Y2hJblByb2dyZXNzUmVmPy5jdXJyZW50KSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdoYW5kbGVSZW5kZXJEb25lLXNraXBwZWQtcXVlcnktc3dpdGNoLWluLXByb2dyZXNzJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBxdWVyeUl0ZW0uY29uZmlnSWQsXG4gICAgICAgIGRhdGFJdGVtc0NvdW50OiBkYXRhSXRlbXM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICByZXN1bHRzTW9kZSxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgZXZlbnQ6ICdoYW5kbGVSZW5kZXJEb25lLWNhbGxlZCcsXG4gICAgICB3aWRnZXRJZCxcbiAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBxdWVyeUl0ZW0uY29uZmlnSWQsXG4gICAgICBkYXRhSXRlbXNDb3VudDogZGF0YUl0ZW1zPy5sZW5ndGggfHwgMCxcbiAgICAgIHBhZ2VTaXplLFxuICAgICAgcGFnZSxcbiAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGFjY3VtdWxhdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIC8vIEZJWCAocjAxOC45NCk6IFNpbXBsaWZpZWQgLSBubyByZW1vdmVkUmVjb3JkSWRzIGZpbHRlcmluZyBuZWVkZWRcbiAgICAvLyBSZWNvcmRzIHByb3AgaXMgYWxyZWFkeSBmaWx0ZXJlZCBpbiBBZGQvUmVtb3ZlIG1vZGVcbiAgICAvLyBGSVggKHIwMTguODkpOiBXaGVuIGluIEFkZC9SZW1vdmUgbW9kZSwgYWxzbyBmaWx0ZXIgdG8gb25seSBpbmNsdWRlIGFjY3VtdWxhdGVkIHJlY29yZHNcbiAgICAvLyBUaGlzIHByZXZlbnRzIGhhbmRsZVJlbmRlckRvbmUgZnJvbSByZS1zZWxlY3RpbmcgdGhlIGZ1bGwgcXVlcnkgcmVzdWx0cyBhZnRlciBhIHF1ZXJ5IHN3aXRjaFxuICAgIGxldCBmaWx0ZXJlZEl0ZW1zID0gZGF0YUl0ZW1zIHx8IFtdXG4gICAgXG4gICAgaWYgKHJlc3VsdHNNb2RlICE9PSBTZWxlY3Rpb25UeXBlLk5FV19TRUxFQ1RJT04gJiYgYWNjdW11bGF0ZWRSZWNvcmRzICYmIGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBhY2N1bXVsYXRlZFJlY29yZElkcyA9IG5ldyBTZXQoYWNjdW11bGF0ZWRSZWNvcmRzLm1hcChyID0+IHIuZ2V0SWQoKSkpXG4gICAgICBjb25zdCBiZWZvcmVGaWx0ZXJDb3VudCA9IGZpbHRlcmVkSXRlbXMubGVuZ3RoXG4gICAgICBmaWx0ZXJlZEl0ZW1zID0gZmlsdGVyZWRJdGVtcy5maWx0ZXIoaXRlbSA9PiBhY2N1bXVsYXRlZFJlY29yZElkcy5oYXMoaXRlbS5nZXRJZCgpKSlcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAnaGFuZGxlUmVuZGVyRG9uZS1maWx0ZXJlZC1ieS1hY2N1bXVsYXRlZC1yZWNvcmRzJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgICBkYXRhSXRlbXNDb3VudDogZGF0YUl0ZW1zPy5sZW5ndGggfHwgMCxcbiAgICAgICAgYWZ0ZXJBY2N1bXVsYXRlZEZpbHRlcjogZmlsdGVyZWRJdGVtcy5sZW5ndGgsXG4gICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoLFxuICAgICAgICBmaWx0ZXJlZDogYmVmb3JlRmlsdGVyQ291bnQgLSBmaWx0ZXJlZEl0ZW1zLmxlbmd0aCxcbiAgICAgICAgbm90ZTogJ3IwMTguOTQ6IE5vIHJlbW92ZWRSZWNvcmRJZHMgZmlsdGVyIC0gcmVjb3JkcyBzdGF5IGluIHN5bmMnLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgfVxuICAgIFxuICAgIC8vIENoZWNrIGlmIHF1ZXJ5RGF0YSBoYXMgYWN0dWFsbHkgY2hhbmdlZCBiZWZvcmUgdXBkYXRpbmcgc3RhdGVcbiAgICAvLyBUaGlzIHByZXZlbnRzIHVubmVjZXNzYXJ5IHJlLXJlbmRlcnMgdGhhdCByZXNldCBzY3JvbGwgcG9zaXRpb25cbiAgICBjb25zdCBjdXJyZW50UmVjb3JkcyA9IHF1ZXJ5RGF0YT8ucmVjb3JkcyB8fCBbXVxuICAgIGNvbnN0IGN1cnJlbnRSZWNvcmRJZHMgPSBjdXJyZW50UmVjb3Jkcy5tYXAociA9PiByLmdldElkKCkpLnNvcnQoKVxuICAgIGNvbnN0IG5ld1JlY29yZElkcyA9IGZpbHRlcmVkSXRlbXMubWFwKHIgPT4gci5nZXRJZCgpKS5zb3J0KClcbiAgICBjb25zdCBkYXRhQ2hhbmdlZCA9IGN1cnJlbnRSZWNvcmRJZHMubGVuZ3RoICE9PSBuZXdSZWNvcmRJZHMubGVuZ3RoIHx8XG4gICAgICAhY3VycmVudFJlY29yZElkcy5ldmVyeSgoaWQsIGlkeCkgPT4gaWQgPT09IG5ld1JlY29yZElkc1tpZHhdKSB8fFxuICAgICAgcXVlcnlEYXRhPy5wYWdlU2l6ZSAhPT0gcGFnZVNpemUgfHxcbiAgICAgIHF1ZXJ5RGF0YT8ucGFnZSAhPT0gcGFnZVxuICAgIFxuICAgIC8vIE9ubHkgdXBkYXRlIHN0YXRlIGlmIGRhdGEgaGFzIGFjdHVhbGx5IGNoYW5nZWRcbiAgICBpZiAoZGF0YUNoYW5nZWQpIHtcbiAgICAgIHNldFF1ZXJ5RGF0YSh7XG4gICAgICAgIHJlY29yZHM6IGZpbHRlcmVkSXRlbXMsXG4gICAgICAgIHBhZ2VTaXplLFxuICAgICAgICBwYWdlXG4gICAgICB9KVxuICAgIH1cbiAgICBcbiAgICAvLyBPbmx5IHNlbGVjdCByZWNvcmRzIHRoYXQgYXJlIE5PVCByZW1vdmVkXG4gICAgLy8gSU1QT1JUQU5UOiBPbmx5IHJlLXNlbGVjdCBpZiB0aGUgc2VsZWN0aW9uIGhhcyBhY3R1YWxseSBjaGFuZ2VkIHRvIGF2b2lkIHJlc2V0dGluZyBzY3JvbGwgcG9zaXRpb25cbiAgICBpZiAoZmlsdGVyZWRJdGVtcyAmJiBmaWx0ZXJlZEl0ZW1zLmxlbmd0aCA+IDAgJiYgb3V0cHV0RFMpIHtcbiAgICAgIGNvbnN0IHJlY29yZElkcyA9IGZpbHRlcmVkSXRlbXMubWFwKHJlY29yZCA9PiByZWNvcmQuZ2V0SWQoKSlcbiAgICAgIGNvbnN0IGZkciA9IGZpbHRlcmVkSXRlbXMgYXMgRmVhdHVyZURhdGFSZWNvcmRbXVxuICAgICAgXG4gICAgICAvLyBDaGVjayB3aGF0J3MgY3VycmVudGx5IHNlbGVjdGVkIHRvIGF2b2lkIHVubmVjZXNzYXJ5IHJlLXNlbGVjdGlvbiAod2hpY2ggcmVzZXRzIHNjcm9sbClcbiAgICAgIGNvbnN0IGN1cnJlbnRseVNlbGVjdGVkSWRzID0gb3V0cHV0RFMuZ2V0U2VsZWN0ZWRSZWNvcmRJZHMoKSB8fCBbXVxuICAgICAgY29uc3Qgc2VsZWN0aW9uQ2hhbmdlZCA9IGN1cnJlbnRseVNlbGVjdGVkSWRzLmxlbmd0aCAhPT0gcmVjb3JkSWRzLmxlbmd0aCB8fFxuICAgICAgICAhcmVjb3JkSWRzLmV2ZXJ5KGlkID0+IGN1cnJlbnRseVNlbGVjdGVkSWRzLmluY2x1ZGVzKGlkKSlcbiAgICAgIFxuICAgICAgLy8gT25seSBzZWxlY3QgaWYgdGhlIHNlbGVjdGlvbiBoYXMgYWN0dWFsbHkgY2hhbmdlZFxuICAgICAgaWYgKHNlbGVjdGlvbkNoYW5nZWQpIHtcbiAgICAgICAgLy8gcjAxOC43ODogVXNlIGFzeW5jIElJRkUgdG8gcHJvcGVybHkgYXdhaXQgc2VsZWN0aW9uIGFuZCBwYXNzIGdyYXBoaWNzIHBhcmFtZXRlcnNcbiAgICAgICAgOyhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHNldFNlbGVjdGlvbkVycm9yKG51bGwpIC8vIENsZWFyIHByZXZpb3VzIGVycm9yc1xuICAgICAgICAgICAgYXdhaXQgc2VsZWN0UmVjb3Jkc0FuZFB1Ymxpc2goXG4gICAgICAgICAgICAgIHdpZGdldElkLCBcbiAgICAgICAgICAgICAgb3V0cHV0RFMsIFxuICAgICAgICAgICAgICByZWNvcmRJZHMsIFxuICAgICAgICAgICAgICBmZHIsXG4gICAgICAgICAgICAgIGZhbHNlLCAvLyBhbHNvUHVibGlzaFRvT3V0cHV0RFNcbiAgICAgICAgICAgICAgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCxcbiAgICAgICAgICAgICAgZ3JhcGhpY3NMYXllcixcbiAgICAgICAgICAgICAgbWFwVmlld1xuICAgICAgICAgICAgKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgZXZlbnQ6ICdoYW5kbGVSZW5kZXJEb25lLXNlbGVjdGluZy1maWx0ZXJlZC1yZWNvcmRzJyxcbiAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHdpZGdldElkLFxuICAgICAgICAgICAgICBkYXRhSXRlbXNDb3VudDogZGF0YUl0ZW1zPy5sZW5ndGggfHwgMCxcbiAgICAgICAgICAgICAgZmlsdGVyZWRJdGVtc0NvdW50OiBmaWx0ZXJlZEl0ZW1zLmxlbmd0aCxcbiAgICAgICAgICAgICAgc2VsZWN0aW9uQ2hhbmdlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgY3VycmVudGx5U2VsZWN0ZWRDb3VudDogY3VycmVudGx5U2VsZWN0ZWRJZHMubGVuZ3RoLFxuICAgICAgICAgICAgICBuZXdTZWxlY3Rpb25Db3VudDogcmVjb3JkSWRzLmxlbmd0aCxcbiAgICAgICAgICAgICAgdXNlZEdyYXBoaWNzTGF5ZXI6IHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQsXG4gICAgICAgICAgICAgIG5vdGU6ICdyMDE4Ljk0OiBObyByZW1vdmVkUmVjb3JkSWRzIHRyYWNraW5nJyxcbiAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gc2VsZWN0IHF1ZXJ5IHJlc3VsdHMnXG4gICAgICAgICAgICBzZXRTZWxlY3Rpb25FcnJvcihlcnJvck1lc3NhZ2UpXG4gICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICAgICAgICAgIGV2ZW50OiAnc2VsZWN0aW9uLWZhaWxlZC1oYW5kbGVSZW5kZXJEb25lJyxcbiAgICAgICAgICAgICAgZXJyb3I6IGVycm9yTWVzc2FnZSxcbiAgICAgICAgICAgICAgZXJyb3JTdGFjazogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnN0YWNrIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICByZWNvcmRDb3VudDogcmVjb3JkSWRzLmxlbmd0aFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgIH0pKClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgIGV2ZW50OiAnaGFuZGxlUmVuZGVyRG9uZS1za2lwcGluZy1yZXNlbGVjdGlvbicsXG4gICAgICAgICAgd2lkZ2V0SWQ6IHdpZGdldElkLFxuICAgICAgICAgIGRhdGFJdGVtc0NvdW50OiBkYXRhSXRlbXM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICAgIGZpbHRlcmVkSXRlbXNDb3VudDogZmlsdGVyZWRJdGVtcy5sZW5ndGgsXG4gICAgICAgICAgcmVhc29uOiAnc2VsZWN0aW9uLXVuY2hhbmdlZCcsXG4gICAgICAgICAgY3VycmVudGx5U2VsZWN0ZWRDb3VudDogY3VycmVudGx5U2VsZWN0ZWRJZHMubGVuZ3RoLFxuICAgICAgICAgIG5vdGU6ICdyMDE4Ljk0OiBObyByZW1vdmVkUmVjb3JkSWRzIHRyYWNraW5nJyxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG4gIH0sIFtvdXRwdXREUywgd2lkZ2V0SWQsIHF1ZXJ5RGF0YSwgcmVzdWx0c01vZGUsIGFjY3VtdWxhdGVkUmVjb3Jkc10pXG5cbiAgY29uc3QgaGFuZGxlRGF0YVNvdXJjZUluZm9DaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgY29uc3QgZHMgPSBEYXRhU291cmNlTWFuYWdlci5nZXRJbnN0YW5jZSgpLmdldERhdGFTb3VyY2Uob3V0cHV0RFM/LmlkKVxuICAgIGNvbnN0IGRzUmVjb3JkcyA9IGRzPy5nZXRTZWxlY3RlZFJlY29yZHMoKVxuICAgIGNvbnN0IHNlbGVjdGVkSWRzID0gZHM/LmdldFNlbGVjdGVkUmVjb3JkSWRzKCkgPz8gW11cbiAgICBcbiAgICAvLyBDYXB0dXJlIHJlY29yZHMgcHJvcCBiZWZvcmUgdXNpbmcgaXQgKHRvIGF2b2lkIHNoYWRvd2luZylcbiAgICBjb25zdCByZWNvcmRzUHJvcCA9IHJlY29yZHNcbiAgICBcbiAgICAvLyBEZWJ1ZzogTG9nIHdoYXQgaGFuZGxlRGF0YVNvdXJjZUluZm9DaGFuZ2Ugc2Vlc1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgZXZlbnQ6ICdoYW5kbGVEYXRhU291cmNlSW5mb0NoYW5nZS1maXJlZCcsXG4gICAgICB3aWRnZXRJZDogd2lkZ2V0SWQsXG4gICAgICBvdXRwdXREU0lkOiBvdXRwdXREUz8uaWQsXG4gICAgICBkc0lkOiBkcz8uaWQsXG4gICAgICBzZWxlY3RlZFJlY29yZHNGcm9tRFM6IGRzUmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICBzZWxlY3RlZElkc0Zyb21EUzogc2VsZWN0ZWRJZHMubGVuZ3RoLFxuICAgICAgY3VycmVudFNlbGVjdGVkUmVjb3Jkc1N0YXRlOiBzZWxlY3RlZFJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgcmVjb3Jkc1Byb3BDb3VudDogcmVjb3Jkc1Byb3A/Lmxlbmd0aCB8fCAwLFxuICAgICAgbm90ZTogJ3IwMTguOTQ6IE5vIHJlbW92ZWRSZWNvcmRJZHMgdHJhY2tpbmcnLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICAvLyBJZiB3ZSBoYXZlIHJlY29yZHMgaW4gdGhlIHByb3AgKGFjY3VtdWxhdGVkIHJlY29yZHMpIGJ1dCBEUyBzaG93cyAwIHNlbGVjdGVkLFxuICAgIC8vIGFuZCB3ZSBjdXJyZW50bHkgaGF2ZSBzZWxlY3RlZFJlY29yZHMsIHRoaXMgaXMgbGlrZWx5IGEgcXVlcnkgc3dpdGNoIGluIFwiQWRkIHRvXCIgbW9kZVxuICAgIC8vIHdoZXJlIHJlLXNlbGVjdGlvbiBoYXNuJ3QgaGFwcGVuZWQgeWV0LiBEb24ndCBjbGVhciBzZWxlY3RlZFJlY29yZHMgLSB3YWl0IGZvciByZS1zZWxlY3Rpb24uXG4gICAgaWYgKHJlY29yZHNQcm9wICYmIHJlY29yZHNQcm9wLmxlbmd0aCA+IDAgJiYgc2VsZWN0ZWRJZHMubGVuZ3RoID09PSAwICYmIHNlbGVjdGVkUmVjb3JkcyAmJiBzZWxlY3RlZFJlY29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAnaGFuZGxlRGF0YVNvdXJjZUluZm9DaGFuZ2Utc2tpcHBpbmctY2xlYXItZHVyaW5nLXF1ZXJ5LXN3aXRjaCcsXG4gICAgICAgIHdpZGdldElkOiB3aWRnZXRJZCxcbiAgICAgICAgcmVhc29uOiAnd2FpdGluZy1mb3ItcmVzZWxlY3Rpb24nLFxuICAgICAgICByZWNvcmRzUHJvcENvdW50OiByZWNvcmRzUHJvcC5sZW5ndGgsXG4gICAgICAgIGN1cnJlbnRTZWxlY3RlZFJlY29yZHNDb3VudDogc2VsZWN0ZWRSZWNvcmRzLmxlbmd0aFxuICAgICAgfSlcbiAgICAgIHJldHVybiAvLyBTa2lwIHVwZGF0aW5nIC0gcmUtc2VsZWN0aW9uIGlzIGNvbWluZ1xuICAgIH1cbiAgICBcbiAgICAvLyBGSVggKHIwMTguOTQpOiBTaW1wbGlmaWVkIC0gbm8gcmVtb3ZlZFJlY29yZElkcyBmaWx0ZXJpbmcgbmVlZGVkXG4gICAgLy8gUmVjb3JkcyBwcm9wIGlzIGFscmVhZHkgZmlsdGVyZWQgaW4gQWRkL1JlbW92ZSBtb2RlXG4gICAgbGV0IHNob3VsZFVwZGF0ZSA9IGZhbHNlXG4gICAgaWYgKHNlbGVjdGVkSWRzLmxlbmd0aCAhPT0gc2VsZWN0ZWRSZWNvcmRzPy5sZW5ndGgpIHtcbiAgICAgIHNob3VsZFVwZGF0ZSA9IHRydWVcbiAgICB9IGVsc2UgeyAvLyBlcXVhbCBsZW5ndGhcbiAgICAgIHNob3VsZFVwZGF0ZSA9IHNlbGVjdGVkSWRzLnNvbWUoaWQgPT4ge1xuICAgICAgICBjb25zdCB0YXJnZXQgPSBzZWxlY3RlZFJlY29yZHMuZmluZCgoaXRlbSkgPT4gaXRlbS5nZXRJZCgpID09PSBpZClcbiAgICAgICAgcmV0dXJuIHRhcmdldCA9PSBudWxsXG4gICAgICB9KVxuICAgIH1cbiAgICBpZiAoc2hvdWxkVXBkYXRlKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdoYW5kbGVEYXRhU291cmNlSW5mb0NoYW5nZS11cGRhdGluZy1zZWxlY3RlZFJlY29yZHMnLFxuICAgICAgICB3aWRnZXRJZDogd2lkZ2V0SWQsXG4gICAgICAgIG9sZENvdW50OiBzZWxlY3RlZFJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICBuZXdDb3VudDogZHNSZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgb2xkU2VsZWN0ZWRJZHM6IChzZWxlY3RlZFJlY29yZHMgfHwgW10pLm1hcChyID0+IHIuZ2V0SWQoKSkuc2xpY2UoMCwgNSksXG4gICAgICAgIG5ld1NlbGVjdGVkSWRzOiBzZWxlY3RlZElkcy5zbGljZSgwLCA1KSxcbiAgICAgICAgbm90ZTogJ3IwMTguOTQ6IE5vIHJlbW92ZWRSZWNvcmRJZHMgZmlsdGVyaW5nJyxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgc2V0U2VsZWN0ZWRSZWNvcmRzKGRzUmVjb3JkcyB8fCBbXSlcbiAgICB9IGVsc2Uge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAnaGFuZGxlRGF0YVNvdXJjZUluZm9DaGFuZ2Utc2tpcHBpbmctdXBkYXRlJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHdpZGdldElkLFxuICAgICAgICByZWFzb246ICduby1jaGFuZ2UtZGV0ZWN0ZWQnLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgfVxuICB9LCBbb3V0cHV0RFM/LmlkLCBzZWxlY3RlZFJlY29yZHMsIHdpZGdldElkLCByZWNvcmRzXSlcblxuICAvKipcbiAgICogR2VuZXJhdGVzIHRoZSB0aXAgbWVzc2FnZSBzaG93aW5nIGhvdyBtYW55IGZlYXR1cmVzIGFyZSBkaXNwbGF5ZWQuXG4gICAqIEZJWCAocjAxOC45NCk6IFNpbXBsaWZpZWQgLSBubyBmaWx0ZXJpbmcgbmVlZGVkIHNpbmNlIHJlY29yZHMgc3RheSBpbiBzeW5jXG4gICAqIFxuICAgKiBAcmV0dXJucyBGb3JtYXR0ZWQgc3RyaW5nIGxpa2UgXCJGZWF0dXJlcyBkaXNwbGF5ZWQ6IDExOCAvIDExOFwiXG4gICAqL1xuICBjb25zdCBnZXRUaXBNZXNzYWdlID0gKCkgPT4ge1xuICAgIGlmIChxdWVyeURhdGEgJiYgcXVlcnlEYXRhLnJlY29yZHMpIHtcbiAgICAgIC8vIEZJWCAocjAxOC45NCk6IE5vIGZpbHRlcmluZyBuZWVkZWQgLSBxdWVyeURhdGEucmVjb3JkcyBpcyBhbHJlYWR5IGZpbHRlcmVkXG4gICAgICBjb25zdCBkaXNwbGF5ZWRDb3VudCA9IHF1ZXJ5RGF0YS5yZWNvcmRzLmxlbmd0aFxuICAgICAgXG4gICAgICAvLyBGSVggKHIwMTguODMpOiBVc2UgZGlzcGxheWVkQ291bnQgZm9yIGJvdGggbnVtZXJhdG9yIGFuZCBkZW5vbWluYXRvclxuICAgICAgLy8gVGhpcyBlbnN1cmVzIHRoZSBjb3VudCBzaG93cyBcIjExOCAvIDExOFwiIGFmdGVyIHJlbW92aW5nIHJlY29yZHMsIG5vdCBcIjExOCAvIDEyMVwiXG4gICAgICByZXR1cm4gYCR7Z2V0STE4bk1lc3NhZ2UoJ2ZlYXR1cmVzRGlzcGxheWVkJyl9OiAke2Rpc3BsYXllZENvdW50fSAvICR7ZGlzcGxheWVkQ291bnR9YFxuICAgICAgY29uc3QgeyBwYWdlID0gMSwgcGFnZVNpemUgPSBkZWZhdWx0UGFnZVNpemUgfSA9IHF1ZXJ5RGF0YVxuICAgICAgY29uc3QgZnJvbSA9IChwYWdlIC0gMSkgKiBwYWdlU2l6ZSArIDFcbiAgICAgIGNvbnN0IHRvID0gZnJvbSArIHBhZ2VTaXplIC0gMVxuICAgICAgaWYgKHJlc3VsdENvdW50ID4gMCkge1xuICAgICAgICByZXR1cm4gYCR7Z2V0STE4bk1lc3NhZ2UoJ2ZlYXR1cmVzRGlzcGxheWVkJyl9OiAke2Zyb219IC0gJHtNYXRoLm1pbih0bywgZGlzcGxheWVkQ291bnQpfSAvICR7cmVzdWx0Q291bnR9YFxuICAgICAgfVxuICAgICAgcmV0dXJuIGAke2dldEkxOG5NZXNzYWdlKCdmZWF0dXJlc0Rpc3BsYXllZCcpfTogMCAtIDAgLyAwYFxuICAgIH1cbiAgICByZXR1cm4gJydcbiAgfVxuXG4gIC8qKlxuICAgKiBUb2dnbGVzIGV4cGFuZC9jb2xsYXBzZSBzdGF0ZSBmb3IgYWxsIHJlc3VsdCBpdGVtcy5cbiAgICogV2hlbiB0b2dnbGVkLCBhbGwgcmVzdWx0IGl0ZW1zIHdpbGwgYmUgZXhwYW5kZWQgb3IgY29sbGFwc2VkIHRvZ2V0aGVyLlxuICAgKiBVcGRhdGVzIGluZGl2aWR1YWwgaXRlbSBleHBhbnNpb24gc3RhdGVzIGluIHRoZSBtYXAgdG8gbWFpbnRhaW4gc3RhdGUgd2hlbiBpdGVtcyBhcmUgcmVtb3ZlZC5cbiAgICovXG4gIGNvbnN0IHRvZ2dsZUV4cGFuZEFsbCA9IFJlYWN0LnVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBzZXRFeHBhbmRBbGwocHJldiA9PiB7XG4gICAgICBjb25zdCBuZXdWYWx1ZSA9ICFwcmV2XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0VYUEFORC1DT0xMQVBTRScsIHtcbiAgICAgICAgZXZlbnQ6ICd0b2dnbGVFeHBhbmRBbGwtY2xpY2tlZCcsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICBwcmV2aW91c1ZhbHVlOiBwcmV2LFxuICAgICAgICBuZXdWYWx1ZSxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgXG4gICAgICAvLyBVcGRhdGUgYWxsIGN1cnJlbnQgaXRlbXMgaW4gdGhlIG1hcCB3aXRoIHRoZSBuZXcgZXhwYW5zaW9uIHN0YXRlXG4gICAgICBzZXRJdGVtRXhwYW5kU3RhdGVzKHByZXZNYXAgPT4ge1xuICAgICAgICBjb25zdCBuZXdNYXAgPSBuZXcgTWFwKHByZXZNYXApXG4gICAgICAgIC8vIEdldCBhbGwgY3VycmVudCByZWNvcmQgSURzIGZyb20gZmlsdGVyZWQgcmVjb3Jkc1xuICAgICAgICBjb25zdCBhbGxSZWNvcmRJZHMgPSBmaWx0ZXJlZFJlY29yZHNGb3JMaXN0Lm1hcChyID0+IHIuZ2V0SWQoKSlcbiAgICAgICAgYWxsUmVjb3JkSWRzLmZvckVhY2goaWQgPT4ge1xuICAgICAgICAgIG5ld01hcC5zZXQoaWQsIG5ld1ZhbHVlKVxuICAgICAgICB9KVxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0VYUEFORC1DT0xMQVBTRScsIHtcbiAgICAgICAgICBldmVudDogJ2l0ZW1FeHBhbmRTdGF0ZXMtdXBkYXRlZCcsXG4gICAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgICAgbmV3VmFsdWUsXG4gICAgICAgICAgdXBkYXRlZENvdW50OiBhbGxSZWNvcmRJZHMubGVuZ3RoLFxuICAgICAgICAgIHJlY29yZElkczogYWxsUmVjb3JkSWRzLnNsaWNlKDAsIDEwKSwgLy8gTG9nIGZpcnN0IDEwIElEc1xuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gbmV3TWFwXG4gICAgICB9KVxuICAgICAgXG4gICAgICByZXR1cm4gbmV3VmFsdWVcbiAgICB9KVxuICB9LCBbd2lkZ2V0SWQsIGZpbHRlcmVkUmVjb3Jkc0Zvckxpc3RdKVxuXG4gIGNvbnN0IHJlc3VsdFVzZU91dHB1dERhdGFTb3VyY2UgPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICByZXR1cm4gSW1tdXRhYmxlKHtcbiAgICAgIGRhdGFTb3VyY2VJZDogcXVlcnlJdGVtLm91dHB1dERhdGFTb3VyY2VJZCxcbiAgICAgIG1haW5EYXRhU291cmNlSWQ6IHF1ZXJ5SXRlbS5vdXRwdXREYXRhU291cmNlSWRcbiAgICB9KVxuICB9LCBbcXVlcnlJdGVtPy5vdXRwdXREYXRhU291cmNlSWRdKVxuXG4gIGNvbnN0IGhhbmRsZUVzY2FwZSA9IFJlYWN0LnVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBmb2N1c0VsZW1lbnRJbktleWJvYXJkTW9kZShiYWNrQnRuUmVmLmN1cnJlbnQpXG4gIH0sIFtdKVxuXG4gIC8vIEtlZXAgcmVjb3JkcyBzZWxlY3RlZCBhbmQgem9vbSB0byBjbGlja2VkIHJlY29yZFxuICAvLyBSZWNvcmRzIHJlbWFpbiBzZWxlY3RlZCBhcyBsb25nIGFzIHRoZXkncmUgaW4gdGhlIHJlc3VsdHNcbiAgLy8gQ2xpY2tpbmcgYSByZWNvcmQgYWx3YXlzIHpvb21zIHRvIGl0IG9uIHRoZSBtYXAgKHRoaXMgYmVoYXZpb3IgaXMgYWx3YXlzIGVuYWJsZWQpXG4gIGNvbnN0IHRvZ2dsZVNlbGVjdGlvbiA9IFJlYWN0LnVzZUNhbGxiYWNrKChkYXRhOiBGZWF0dXJlRGF0YVJlY29yZCkgPT4ge1xuICAgIC8vIEVuc3VyZSB0aGUgY2xpY2tlZCByZWNvcmQgaXMgc2VsZWN0ZWQgKGl0IHNob3VsZCBhbHJlYWR5IGJlLCBidXQgZW5zdXJlIGl0KVxuICAgIGNvbnN0IHNlbGVjdGVkRGF0YXMgPSBvdXRwdXREUy5nZXRTZWxlY3RlZFJlY29yZHMoKSA/PyBbXVxuICAgIGNvbnN0IHNlbGVjdGVkSWRzID0gb3V0cHV0RFMuZ2V0U2VsZWN0ZWRSZWNvcmRJZHMoKSA/PyBbXVxuICAgIGNvbnN0IGRhdGFJZCA9IGRhdGEuZ2V0SWQoKVxuICAgIFxuICAgIC8vIElmIHRoaXMgcmVjb3JkIGlzbid0IGFscmVhZHkgc2VsZWN0ZWQsIGFkZCBpdCB0byB0aGUgc2VsZWN0aW9uXG4gICAgaWYgKCFzZWxlY3RlZElkcy5pbmNsdWRlcyhkYXRhSWQpKSB7XG4gICAgICBjb25zdCB1cGRhdGVkU2VsZWN0ZWREYXRhcyA9IFsuLi5zZWxlY3RlZERhdGFzLCBkYXRhXVxuICAgICAgY29uc3QgcmVjb3JkSWRzID0gdXBkYXRlZFNlbGVjdGVkRGF0YXMubWFwKHJlY29yZCA9PiByZWNvcmQuZ2V0SWQoKSlcbiAgICAgIFxuICAgICAgLy8gU2VsZWN0IHJlY29yZHMgYW5kIHB1Ymxpc2ggc2VsZWN0aW9uIG1lc3NhZ2UgdXNpbmcgdXRpbGl0eSBmdW5jdGlvblxuICAgICAgc2VsZWN0UmVjb3Jkc0FuZFB1Ymxpc2god2lkZ2V0SWQsIG91dHB1dERTLCByZWNvcmRJZHMsIHVwZGF0ZWRTZWxlY3RlZERhdGFzIGFzIEZlYXR1cmVEYXRhUmVjb3JkW10sIHRydWUpXG4gICAgfVxuICAgIFxuICAgIC8vIFpvb20gdG8gdGhlIGNsaWNrZWQgcmVjb3JkIHdpdGggcGFkZGluZyAoYWx3YXlzIGVuYWJsZWQgLSB1c2VyIHdhbnRzIHRvIGtlZXAgdGhpcyBiZWhhdmlvcilcbiAgICAvLyBCVUctR1JBUEhJQ1MtMDAxOiBab29tIG9wZXJhdGlvbnMgZmFpbCB3aGVuIGdyYXBoaWNzIGxheWVyIGlzIGRpc2FibGVkXG4gICAgaWYgKCFtYXBWaWV3ICYmICF1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0KSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0JVRycsIHtcbiAgICAgICAgYnVnSWQ6ICdCVUctR1JBUEhJQ1MtMDAxJyxcbiAgICAgICAgY2F0ZWdvcnk6ICdHUkFQSElDUycsXG4gICAgICAgIGV2ZW50OiAnem9vbS1vcGVyYXRpb24tZmFpbGVkLWdyYXBoaWNzLWxheWVyLWRpc2FibGVkJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIG9wZXJhdGlvbjogJ3Jlc3VsdC1pdGVtLWNsaWNrLXpvb20nLFxuICAgICAgICByZWNvcmRJZDogZGF0YS5nZXRJZCgpLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ1pvb20gb3BlcmF0aW9uIGF0dGVtcHRlZCBvbiByZXN1bHQgaXRlbSBjbGljayBidXQgbWFwVmlldyBpcyB1bmF2YWlsYWJsZSBiZWNhdXNlIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQgaXMgZGlzYWJsZWQnLFxuICAgICAgICB3b3JrYXJvdW5kOiAnRW5hYmxlIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQgaW4gd2lkZ2V0IHNldHRpbmdzJyxcbiAgICAgICAgdGFyZ2V0UmVzb2x1dGlvbjogJ3IwMTkuMCdcbiAgICAgIH0pXG4gICAgfVxuICAgIFxuICAgIHpvb21Ub1JlY29yZHMoW2RhdGFdKS5jYXRjaChlcnJvciA9PiB7XG4gICAgICAvLyBTaWxlbnRseSBoYW5kbGUgZXJyb3JzIC0gem9vbSBpcyBub24tY3JpdGljYWxcbiAgICB9KVxuICB9LCBbb3V0cHV0RFMsIHdpZGdldElkLCB6b29tVG9SZWNvcmRzXSlcblxuICAvKipcbiAgICogUmVtb3ZlcyBhIHJlY29yZCBmcm9tIHRoZSByZXN1bHRzIGFuZCBzZWxlY3Rpb24uXG4gICAqIElmIHJlbW92aW5nIHRoZSBsYXN0IHJlY29yZCwgYXV0b21hdGljYWxseSBjbGVhcnMgYWxsIHJlc3VsdHNcbiAgICogYnkgY2FsbGluZyB0aGUgdHJhc2ggY2FuIGxvZ2ljIChzYW1lIGFzIGNsaWNraW5nIENsZWFyIGJ1dHRvbikuXG4gICAqIFRoaXMgZW5zdXJlcyB0aGUgVUkgZG9lc24ndCBzaG93IFwiRmVhdHVyZXMgZGlzcGxheWVkOiAwIC8gMVwiIHdoZW4gYWxsIHJlc3VsdHMgYXJlIHJlbW92ZWQuXG4gICAqIFxuICAgKiBAcGFyYW0gZGF0YSAtIFRoZSBmZWF0dXJlIGRhdGEgcmVjb3JkIHRvIHJlbW92ZVxuICAgKi9cbiAgY29uc3QgcmVtb3ZlUmVjb3JkID0gUmVhY3QudXNlQ2FsbGJhY2soKGRhdGE6IEZlYXR1cmVEYXRhUmVjb3JkKSA9PiB7XG4gICAgY29uc3QgZGF0YUlkID0gZGF0YS5nZXRJZCgpXG4gICAgY29uc3QgY3VycmVudEV4cGFuZEFsbCA9IGV4cGFuZEFsbFxuICAgIFxuICAgIC8vIExvZyBoYXNoIHN0YXRlIHdoZW4gcmVtb3ZpbmcgaW5kaXZpZHVhbCByZWNvcmRcbiAgICBjb25zdCBoYXNoID0gd2luZG93LmxvY2F0aW9uLmhhc2guc3Vic3RyaW5nKDEpXG4gICAgY29uc3QgdXJsUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhoYXNoKVxuICAgIGNvbnN0IGhhc2hQYXJhbXM6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH0gPSB7fVxuICAgIHVybFBhcmFtcy5mb3JFYWNoKCh2YWx1ZSwga2V5KSA9PiB7XG4gICAgICBoYXNoUGFyYW1zW2tleV0gPSB2YWx1ZVxuICAgIH0pXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdFWFBBTkQtQ09MTEFQU0UnLCB7XG4gICAgICBldmVudDogJ3JlbW92ZVJlY29yZC1zdGFydGVkJyxcbiAgICAgIHdpZGdldElkLFxuICAgICAgcmVtb3ZlZFJlY29yZElkOiBkYXRhSWQsXG4gICAgICBjdXJyZW50RXhwYW5kQWxsLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gnLCB7XG4gICAgICBldmVudDogJ3JlbW92ZVJlY29yZC1jYWxsZWQnLFxuICAgICAgd2lkZ2V0SWQsXG4gICAgICByZW1vdmVkUmVjb3JkSWQ6IGRhdGFJZCxcbiAgICAgIGhhc2g6IGhhc2gsXG4gICAgICBoYXNoUGFyYW1zOiBoYXNoUGFyYW1zLFxuICAgICAgaGFzaFBhcmFtc0NvdW50OiBPYmplY3Qua2V5cyhoYXNoUGFyYW1zKS5sZW5ndGgsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuXG4gICAgLy8gU1VSR0lDQUwgSEFTSCBNT0RJRklDQVRJT046IFJlbW92ZSB0aGUgcmVjb3JkIElEIGZyb20gaGFzaCBwYXJhbWV0ZXJzXG4gICAgLy8gVGhpcyBtYWtlcyB0aGUgaGFzaCBhIHByZWNpc2UgcmVwcmVzZW50YXRpb24gb2Ygd2hhdCBzaG91bGQgYmUgc2VsZWN0ZWRcbiAgICBjb25zdCBpZFBhcmFtS2V5cyA9IFsnaWQnLCAncGluJywgJ21ham9yJywgJ3BhcmNlbCcsICdzaG9ydElkJ10gLy8gQ29tbW9uIElEIHBhcmFtZXRlciBuYW1lc1xuICAgIGxldCBoYXNoTW9kaWZpZWQgPSBmYWxzZVxuXG4gICAgaWRQYXJhbUtleXMuZm9yRWFjaChwYXJhbUtleSA9PiB7XG4gICAgICBpZiAodXJsUGFyYW1zLmhhcyhwYXJhbUtleSkpIHtcbiAgICAgICAgY29uc3QgY3VycmVudFZhbHVlID0gdXJsUGFyYW1zLmdldChwYXJhbUtleSkgfHwgJydcbiAgICAgICAgY29uc3QgaWRzID0gY3VycmVudFZhbHVlLnNwbGl0KCcsJykubWFwKGlkID0+IGlkLnRyaW0oKSkuZmlsdGVyKGlkID0+IGlkKVxuXG4gICAgICAgIC8vIFJlbW92ZSB0aGUgc3BlY2lmaWMgcmVjb3JkIElEIGZyb20gdGhpcyBwYXJhbWV0ZXJcbiAgICAgICAgY29uc3QgZmlsdGVyZWRJZHMgPSBpZHMuZmlsdGVyKGlkID0+IGlkICE9PSBkYXRhSWQpXG5cbiAgICAgICAgaWYgKGZpbHRlcmVkSWRzLmxlbmd0aCAhPT0gaWRzLmxlbmd0aCkge1xuICAgICAgICAgIC8vIElEcyB3ZXJlIHJlbW92ZWQsIHVwZGF0ZSB0aGUgcGFyYW1ldGVyXG4gICAgICAgICAgaWYgKGZpbHRlcmVkSWRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHVybFBhcmFtcy5zZXQocGFyYW1LZXksIGZpbHRlcmVkSWRzLmpvaW4oJywnKSlcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gTm8gSURzIGxlZnQsIHJlbW92ZSB0aGUgcGFyYW1ldGVyIGVudGlyZWx5XG4gICAgICAgICAgICB1cmxQYXJhbXMuZGVsZXRlKHBhcmFtS2V5KVxuICAgICAgICAgIH1cbiAgICAgICAgICBoYXNoTW9kaWZpZWQgPSB0cnVlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuXG4gICAgLy8gRklYIChyMDE4Ljg0KTogU1VSR0lDQUwgSEFTSCBNT0RJRklDQVRJT04gRk9SIGRhdGFfcyBQQVJBTUVURVJcbiAgICAvLyBFeHBlcmllbmNlIEJ1aWxkZXIgY3JlYXRlcyBhIG5ldyB3aWRnZXQgb3V0cHV0IElEIGluc3RlYWQgb2YgdXBkYXRpbmcgdGhlIGV4aXN0aW5nIG9uZVxuICAgIC8vIFdlIG5lZWQgdG8gbWFudWFsbHkgdXBkYXRlIHRoZSBleGlzdGluZyBlbnRyeSB0byBwcmV2ZW50IGR1cGxpY2F0aW9uXG4gICAgaWYgKHVybFBhcmFtcy5oYXMoJ2RhdGFfcycpKSB7XG4gICAgICBjb25zdCBkYXRhUyA9IHVybFBhcmFtcy5nZXQoJ2RhdGFfcycpIHx8ICcnXG4gICAgICBjb25zdCBkZWNvZGVkRGF0YVMgPSBkZWNvZGVVUklDb21wb25lbnQoZGF0YVMpXG4gICAgICBjb25zdCBzZWxlY3Rpb25zID0gZGVjb2RlZERhdGFTLnNwbGl0KCcsJylcbiAgICAgIFxuICAgICAgLy8gRXh0cmFjdCB3aWRnZXQgbnVtYmVyIGZyb20gd2lkZ2V0SWQgKGUuZy4sIFwid2lkZ2V0XzEyXCIgLT4gXCIxMlwiKVxuICAgICAgY29uc3Qgd2lkZ2V0TWF0Y2ggPSB3aWRnZXRJZC5tYXRjaCgvd2lkZ2V0XyhcXGQrKS8pXG4gICAgICBpZiAod2lkZ2V0TWF0Y2gpIHtcbiAgICAgICAgY29uc3Qgd2lkZ2V0TnVtYmVyID0gd2lkZ2V0TWF0Y2hbMV1cbiAgICAgICAgY29uc3Qgd2lkZ2V0UGF0dGVybiA9IG5ldyBSZWdFeHAoYHdpZGdldF8ke3dpZGdldE51bWJlcn1fb3V0cHV0X1xcXFxkK2ApXG4gICAgICAgIFxuICAgICAgICAvLyBGaW5kIGFuZCB1cGRhdGUgdGhlIHNlbGVjdGlvbiBlbnRyeSBmb3IgdGhpcyB3aWRnZXRcbiAgICAgICAgbGV0IGRhdGFTTW9kaWZpZWQgPSBmYWxzZVxuICAgICAgICBjb25zdCB1cGRhdGVkU2VsZWN0aW9ucyA9IHNlbGVjdGlvbnMubWFwKHNlbGVjdGlvbiA9PiB7XG4gICAgICAgICAgaWYgKCFzZWxlY3Rpb24uc3RhcnRzV2l0aCgnaWQ6JykpIHtcbiAgICAgICAgICAgIHJldHVybiBzZWxlY3Rpb25cbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgY29uc3QgaWRQYXJ0ID0gc2VsZWN0aW9uLnN1YnN0cmluZygzKSAvLyBSZW1vdmUgXCJpZDpcIlxuICAgICAgICAgIGNvbnN0IGNvbG9uSW5kZXggPSBpZFBhcnQubGFzdEluZGV4T2YoJzonKVxuICAgICAgICAgIGlmIChjb2xvbkluZGV4ID09PSAtMSkge1xuICAgICAgICAgICAgcmV0dXJuIHNlbGVjdGlvblxuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICBjb25zdCBkc0lkUGFydCA9IGlkUGFydC5zdWJzdHJpbmcoMCwgY29sb25JbmRleClcbiAgICAgICAgICBjb25zdCByZWNvcmRJZHNQYXJ0ID0gaWRQYXJ0LnN1YnN0cmluZyhjb2xvbkluZGV4ICsgMSlcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBDaGVjayBpZiB0aGlzIG1hdGNoZXMgb3VyIHdpZGdldCdzIG91dHB1dCBEUyBwYXR0ZXJuXG4gICAgICAgICAgbGV0IG1hdGNoZXNXaWRnZXQgPSBmYWxzZVxuICAgICAgICAgIGlmIChkc0lkUGFydC5pbmNsdWRlcygnficpKSB7XG4gICAgICAgICAgICAvLyBDb21wb3VuZCBmb3JtYXQ6IGRhdGFTb3VyY2VfKn53aWRnZXRfWFhfb3V0cHV0XypcbiAgICAgICAgICAgIGNvbnN0IHBhcnRzID0gZHNJZFBhcnQuc3BsaXQoJ34nKVxuICAgICAgICAgICAgbWF0Y2hlc1dpZGdldCA9IHBhcnRzLnNvbWUocGFydCA9PiBwYXJ0Lm1hdGNoKHdpZGdldFBhdHRlcm4pKVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBTaW1wbGUgZm9ybWF0OiB3aWRnZXRfWFhfb3V0cHV0XypcbiAgICAgICAgICAgIG1hdGNoZXNXaWRnZXQgPSBkc0lkUGFydC5tYXRjaCh3aWRnZXRQYXR0ZXJuKSAhPT0gbnVsbFxuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICBpZiAobWF0Y2hlc1dpZGdldCkge1xuICAgICAgICAgICAgLy8gUmVtb3ZlIHRoZSBzcGVjaWZpYyByZWNvcmQgSUQgZnJvbSB0aGlzIGVudHJ5XG4gICAgICAgICAgICBjb25zdCByZWNvcmRJZHMgPSByZWNvcmRJZHNQYXJ0LnNwbGl0KCcsJykubWFwKGlkID0+IGlkLnRyaW0oKSkuZmlsdGVyKGlkID0+IGlkKVxuICAgICAgICAgICAgY29uc3QgZmlsdGVyZWRSZWNvcmRJZHMgPSByZWNvcmRJZHMuZmlsdGVyKGlkID0+IGlkICE9PSBkYXRhSWQpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChmaWx0ZXJlZFJlY29yZElkcy5sZW5ndGggIT09IHJlY29yZElkcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgZGF0YVNNb2RpZmllZCA9IHRydWVcbiAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNIJywge1xuICAgICAgICAgICAgICAgIGV2ZW50OiAnZGF0YV9zLXJlY29yZC1yZW1vdmVkJyxcbiAgICAgICAgICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgICAgICAgICByZW1vdmVkUmVjb3JkSWQ6IGRhdGFJZCxcbiAgICAgICAgICAgICAgICBvcmlnaW5hbFJlY29yZENvdW50OiByZWNvcmRJZHMubGVuZ3RoLFxuICAgICAgICAgICAgICAgIG5ld1JlY29yZENvdW50OiBmaWx0ZXJlZFJlY29yZElkcy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgZHNJZFBhcnQsXG4gICAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBJZiBubyByZWNvcmRzIHJlbWFpbiwgcmV0dXJuIGVtcHR5IHN0cmluZyAod2lsbCBiZSBmaWx0ZXJlZCBvdXQpXG4gICAgICAgICAgICAgIGlmIChmaWx0ZXJlZFJlY29yZElkcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJydcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gUmVjb25zdHJ1Y3QgdGhlIHNlbGVjdGlvbiB3aXRoIHVwZGF0ZWQgcmVjb3JkIElEc1xuICAgICAgICAgICAgICByZXR1cm4gYGlkOiR7ZHNJZFBhcnR9OiR7ZmlsdGVyZWRSZWNvcmRJZHMuam9pbignLCcpfWBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgcmV0dXJuIHNlbGVjdGlvblxuICAgICAgICB9KS5maWx0ZXIocyA9PiBzKSAvLyBSZW1vdmUgZW1wdHkgc3RyaW5nc1xuICAgICAgICBcbiAgICAgICAgaWYgKGRhdGFTTW9kaWZpZWQpIHtcbiAgICAgICAgICBpZiAodXBkYXRlZFNlbGVjdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdXJsUGFyYW1zLnNldCgnZGF0YV9zJywgZW5jb2RlVVJJQ29tcG9uZW50KHVwZGF0ZWRTZWxlY3Rpb25zLmpvaW4oJywnKSkpXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIE5vIHNlbGVjdGlvbnMgcmVtYWluLCByZW1vdmUgZGF0YV9zIGVudGlyZWx5XG4gICAgICAgICAgICB1cmxQYXJhbXMuZGVsZXRlKCdkYXRhX3MnKVxuICAgICAgICAgIH1cbiAgICAgICAgICBoYXNoTW9kaWZpZWQgPSB0cnVlXG4gICAgICAgICAgXG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNIJywge1xuICAgICAgICAgICAgZXZlbnQ6ICdkYXRhX3Mtc3VyZ2ljYWxseS1tb2RpZmllZCcsXG4gICAgICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgICAgIHJlbW92ZWRSZWNvcmRJZDogZGF0YUlkLFxuICAgICAgICAgICAgb3JpZ2luYWxTZWxlY3Rpb25Db3VudDogc2VsZWN0aW9ucy5sZW5ndGgsXG4gICAgICAgICAgICBuZXdTZWxlY3Rpb25Db3VudDogdXBkYXRlZFNlbGVjdGlvbnMubGVuZ3RoLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChoYXNoTW9kaWZpZWQpIHtcbiAgICAgIC8vIFVwZGF0ZSBoYXNoIHN1cmdpY2FsbHlcbiAgICAgIGNvbnN0IG5ld0hhc2ggPSB1cmxQYXJhbXMudG9TdHJpbmcoKVxuICAgICAgd2luZG93Lmhpc3RvcnkucmVwbGFjZVN0YXRlKG51bGwsICcnLCBgIyR7bmV3SGFzaH1gKVxuXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gnLCB7XG4gICAgICAgIGV2ZW50OiAnaGFzaC1zdXJnaWNhbGx5LW1vZGlmaWVkLWlkLXJlbW92ZWQnLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgcmVtb3ZlZFJlY29yZElkOiBkYXRhSWQsXG4gICAgICAgIG9yaWdpbmFsSGFzaDogaGFzaCxcbiAgICAgICAgbmV3SGFzaDogbmV3SGFzaCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgIH1cblxuICAgIC8vIEZJWCAocjAxOC45Nik6IFJlbW92ZWQgbWFudWFsIHJlbW92YWwgdHJhY2tpbmcgLSBubyBsb25nZXIgbmVlZGVkXG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICBldmVudDogJ3gtYnV0dG9uLXJlbW92YWwtdXBkYXRpbmctYWNjdW11bGF0ZWQtcmVjb3JkcycsXG4gICAgICB3aWRnZXRJZCxcbiAgICAgIHJlbW92ZWRSZWNvcmRJZDogZGF0YUlkLFxuICAgICAgbm90ZTogJ3IwMTguOTY6IE5vIG1hbnVhbCByZW1vdmFsIHRyYWNraW5nIC0gZHVwbGljYXRlIGRldGVjdGlvbiBoYW5kbGVzIHRoaXMnLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcblxuICAgIC8vIFJlbW92ZSBmcm9tIGV4cGFuc2lvbiBzdGF0ZXMgbWFwXG4gICAgc2V0SXRlbUV4cGFuZFN0YXRlcyhwcmV2TWFwID0+IHtcbiAgICAgIGNvbnN0IG5ld01hcCA9IG5ldyBNYXAocHJldk1hcClcbiAgICAgIG5ld01hcC5kZWxldGUoZGF0YUlkKVxuICAgICAgZGVidWdMb2dnZXIubG9nKCdFWFBBTkQtQ09MTEFQU0UnLCB7XG4gICAgICAgIGV2ZW50OiAnaXRlbUV4cGFuZFN0YXRlcy1jbGVhbmVkLXVwJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIHJlbW92ZWRSZWNvcmRJZDogZGF0YUlkLFxuICAgICAgICByZW1haW5pbmdDb3VudDogbmV3TWFwLnNpemUsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIHJldHVybiBuZXdNYXBcbiAgICB9KVxuICAgIFxuICAgIC8vIEZJWCAocjAxOC45NCk6IFJlbW92ZWQgcmVtb3ZlZFJlY29yZElkcyB0cmFja2luZyAtIHF1ZXJ5RGF0YSBub3cgdXBkYXRlZCBkaXJlY3RseVxuICAgIC8vIFVwZGF0ZSBxdWVyeURhdGEgdG8gZmlsdGVyIG91dCB0aGUgcmVtb3ZlZCByZWNvcmRcbiAgICBzZXRRdWVyeURhdGEocHJldkRhdGEgPT4ge1xuICAgICAgaWYgKCFwcmV2RGF0YSkgcmV0dXJuIHByZXZEYXRhXG4gICAgICBjb25zdCBmaWx0ZXJlZFJlY29yZHMgPSBwcmV2RGF0YS5yZWNvcmRzLmZpbHRlcigocmVjb3JkOiBEYXRhUmVjb3JkKSA9PiByZWNvcmQuZ2V0SWQoKSAhPT0gZGF0YUlkKVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdxdWVyeURhdGEtdXBkYXRlZC1hZnRlci1yZW1vdmFsJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIHJlbW92ZWRSZWNvcmRJZDogZGF0YUlkLFxuICAgICAgICByZWNvcmRzQ291bnRCZWZvcmU6IHByZXZEYXRhLnJlY29yZHMubGVuZ3RoLFxuICAgICAgICByZWNvcmRzQ291bnRBZnRlcjogZmlsdGVyZWRSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgXG4gICAgICAvLyBGSVggKHIwMTguOTQpOiBDaGVjayBpZiB0aGlzIHdhcyB0aGUgbGFzdCByZWNvcmQgLSBpZiBzbywgbmF2aWdhdGUgYmFja1xuICAgICAgaWYgKGZpbHRlcmVkUmVjb3Jkcy5sZW5ndGggPT09IDAgJiYgcHJldkRhdGEucmVjb3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgIGV2ZW50OiAnbGFzdC1yZWNvcmQtcmVtb3ZlZC1uYXZpZ2F0aW5nLWJhY2snLFxuICAgICAgICAgIHdpZGdldElkLFxuICAgICAgICAgIHJlbW92ZWRSZWNvcmRJZDogZGF0YUlkLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9KVxuICAgICAgICAvLyBVc2Ugc2V0VGltZW91dCB0byBhdm9pZCBzZXRTdGF0ZSBkdXJpbmcgcmVuZGVyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4gb25OYXZCYWNrKHRydWUpLCAwKVxuICAgICAgfVxuICAgICAgXG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5wcmV2RGF0YSxcbiAgICAgICAgcmVjb3JkczogZmlsdGVyZWRSZWNvcmRzXG4gICAgICB9XG4gICAgfSlcbiAgICBcbiAgICAvLyBGSVggKHIwMTguODUpOiBESUFHTk9TVElDIC0gR3JhcGhpY3MgY291bnQgQkVGT1JFIHJlbW92ZVJlY29yZHNGcm9tT3JpZ2luU2VsZWN0aW9uc1xuICAgIGNvbnN0IGdyYXBoaWNzQ291bnRCZWZvcmVPcmlnaW5SZW1vdmFsID0gZ3JhcGhpY3NMYXllcj8uZ3JhcGhpY3M/Lmxlbmd0aCB8fCAwXG4gICAgY29uc3QgZ3JhcGhpY3NJZHNCZWZvcmVPcmlnaW5SZW1vdmFsID0gZ3JhcGhpY3NMYXllcj8uZ3JhcGhpY3M/Lm1hcChnID0+IGcuYXR0cmlidXRlcz8ucmVjb3JkSWQpLnNsaWNlKDAsIDEwKSB8fCBbXVxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgZXZlbnQ6ICd4LWJ1dHRvbi1yZW1vdmFsLUJFRk9SRS1yZW1vdmVSZWNvcmRzRnJvbU9yaWdpblNlbGVjdGlvbnMnLFxuICAgICAgd2lkZ2V0SWQsXG4gICAgICByZW1vdmVkUmVjb3JkSWQ6IGRhdGFJZCxcbiAgICAgIGdyYXBoaWNzQ291bnRCZWZvcmU6IGdyYXBoaWNzQ291bnRCZWZvcmVPcmlnaW5SZW1vdmFsLFxuICAgICAgZ3JhcGhpY3NJZHNCZWZvcmU6IGdyYXBoaWNzSWRzQmVmb3JlT3JpZ2luUmVtb3ZhbCxcbiAgICAgIHdpbGxQYXNzR3JhcGhpY3NMYXllcjogZmFsc2UsIC8vIEZJWDogQ2hhbmdlZCB0byBmYWxzZSB0byBwcmV2ZW50IGdyYXBoaWNzIG1hbmlwdWxhdGlvbiBoZXJlXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIC8vIEFMV0FZUyByZW1vdmUgZnJvbSBvcmlnaW4gZGF0YSBzb3VyY2Ugc2VsZWN0aW9ucyAoc2FtZSBhcyBSZW1vdmUgbW9kZSlcbiAgICAvLyBUaGlzIHByb3Blcmx5IHJlbW92ZXMgcmVjb3JkcyBmcm9tIHRoZSBtYXAgc2VsZWN0aW9uLCBoYW5kbGluZyBzaW5nbGUgb3IgbXVsdGlwbGUgb3JpZ2luIHNvdXJjZXNcbiAgICAvLyBGSVggKHIwMTguODUpOiBET04nVCBwYXNzIGdyYXBoaWNzIGxheWVyIHBhcmFtZXRlcnMgaGVyZSAtIGxldCBncmFwaGljcyBiZSBtYW5hZ2VkIGJ5IHNlbGVjdGlvbiBzeW5jXG4gICAgLy8gVGhlIHByZXZpb3VzIGJlaGF2aW9yIChwYXNzaW5nIGdyYXBoaWNzTGF5ZXIpIHdhcyBjYXVzaW5nIHRoZSBjb3VudCB0byBqdW1wIGZyb20gMTI0IHRvIDEzNlxuICAgIC8vIGJlY2F1c2UgZ3JhcGhpY3Mgd2VyZSBiZWluZyByZW1vdmVkIGhlcmUsIHRoZW4gcmUtYWRkZWQgZHVyaW5nIHNlbGVjdGlvbiBzeW5jaHJvbml6YXRpb25cbiAgICByZW1vdmVSZWNvcmRzRnJvbU9yaWdpblNlbGVjdGlvbnMoXG4gICAgICB3aWRnZXRJZCwgXG4gICAgICBbZGF0YV0sIFxuICAgICAgb3V0cHV0RFMgYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICAgICAgLy8gTk9UIHBhc3NpbmcgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCBvciBncmFwaGljc0xheWVyXG4gICAgICAvLyBHcmFwaGljcyB3aWxsIGJlIHN5bmNlZCB0aHJvdWdoIG5vcm1hbCBzZWxlY3Rpb24gZmxvd1xuICAgIClcbiAgICBcbiAgICAvLyBGSVggKHIwMTguODUpOiBESUFHTk9TVElDIC0gR3JhcGhpY3MgY291bnQgQUZURVIgcmVtb3ZlUmVjb3Jkc0Zyb21PcmlnaW5TZWxlY3Rpb25zXG4gICAgY29uc3QgZ3JhcGhpY3NDb3VudEFmdGVyT3JpZ2luUmVtb3ZhbCA9IGdyYXBoaWNzTGF5ZXI/LmdyYXBoaWNzPy5sZW5ndGggfHwgMFxuICAgIGNvbnN0IGdyYXBoaWNzSWRzQWZ0ZXJPcmlnaW5SZW1vdmFsID0gZ3JhcGhpY3NMYXllcj8uZ3JhcGhpY3M/Lm1hcChnID0+IGcuYXR0cmlidXRlcz8ucmVjb3JkSWQpLnNsaWNlKDAsIDEwKSB8fCBbXVxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgZXZlbnQ6ICd4LWJ1dHRvbi1yZW1vdmFsLUFGVEVSLXJlbW92ZVJlY29yZHNGcm9tT3JpZ2luU2VsZWN0aW9ucycsXG4gICAgICB3aWRnZXRJZCxcbiAgICAgIHJlbW92ZWRSZWNvcmRJZDogZGF0YUlkLFxuICAgICAgZ3JhcGhpY3NDb3VudEJlZm9yZTogZ3JhcGhpY3NDb3VudEJlZm9yZU9yaWdpblJlbW92YWwsXG4gICAgICBncmFwaGljc0NvdW50QWZ0ZXI6IGdyYXBoaWNzQ291bnRBZnRlck9yaWdpblJlbW92YWwsXG4gICAgICBncmFwaGljc0lkc0FmdGVyOiBncmFwaGljc0lkc0FmdGVyT3JpZ2luUmVtb3ZhbCxcbiAgICAgIGdyYXBoaWNzQ2hhbmdlZDogZ3JhcGhpY3NDb3VudEFmdGVyT3JpZ2luUmVtb3ZhbCAhPT0gZ3JhcGhpY3NDb3VudEJlZm9yZU9yaWdpblJlbW92YWwsXG4gICAgICBncmFwaGljc0NoYW5nZWRCeTogZ3JhcGhpY3NDb3VudEFmdGVyT3JpZ2luUmVtb3ZhbCAtIGdyYXBoaWNzQ291bnRCZWZvcmVPcmlnaW5SZW1vdmFsLFxuICAgICAgZXhwZWN0ZWQ6ICdHcmFwaGljcyBzaG91bGQgTk9UIGNoYW5nZSBoZXJlIChubyBncmFwaGljcyBsYXllciBwYXJhbXMgcGFzc2VkKScsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIC8vIEZJWCAocjAxOC45MSk6IERJQUdOT1NUSUMgLSBDaGVjayB3aHkgbWFudWFsIGdyYXBoaWNzIHJlbW92YWwgY29uZGl0aW9uIGlzbid0IG1ldFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgZXZlbnQ6ICd4LWJ1dHRvbi1yZW1vdmFsLWNoZWNraW5nLW1hbnVhbC1ncmFwaGljcy1yZW1vdmFsLWNvbmRpdGlvbicsXG4gICAgICB3aWRnZXRJZCxcbiAgICAgIHJlbW92ZWRSZWNvcmRJZDogZGF0YUlkLFxuICAgICAgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodDogdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCxcbiAgICAgIGhhc0dyYXBoaWNzTGF5ZXI6ICEhZ3JhcGhpY3NMYXllcixcbiAgICAgIGdyYXBoaWNzTGF5ZXJJZDogZ3JhcGhpY3NMYXllcj8uaWQsXG4gICAgICBncmFwaGljc0xheWVyR3JhcGhpY3NDb3VudDogZ3JhcGhpY3NMYXllcj8uZ3JhcGhpY3M/Lmxlbmd0aCB8fCAwLFxuICAgICAgY29uZGl0aW9uV2lsbFBhc3M6ICEhKHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQgJiYgZ3JhcGhpY3NMYXllciksXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIC8vIEZJWCAocjAxOC45MCk6IE1hbnVhbGx5IHJlbW92ZSBncmFwaGljcyBmcm9tIGxheWVyIGFmdGVyIHJlbW92ZVJlY29yZHNGcm9tT3JpZ2luU2VsZWN0aW9uc1xuICAgIC8vIFNpbmNlIHdlIGRvbid0IHBhc3MgZ3JhcGhpY3MgbGF5ZXIgcGFyYW1zIHRvIHJlbW92ZVJlY29yZHNGcm9tT3JpZ2luU2VsZWN0aW9ucyAodG8gYXZvaWQgXG4gICAgLy8gdGhlIDEzNiBkdXBsaWNhdGUgaXNzdWUpLCB3ZSBuZWVkIHRvIG1hbnVhbGx5IHJlbW92ZSB0aGUgZ3JhcGhpYyBoZXJlXG4gICAgLy8gVGhpcyBpcyBzYWZlIG5vdyBiZWNhdXNlIHIwMTguODkgZml4ZWQgdGhlIHF1ZXJ5IHN3aXRjaCByZS1zZWxlY3Rpb24gaXNzdWVcbiAgICBpZiAodXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCAmJiBncmFwaGljc0xheWVyKSB7XG4gICAgICBjb25zdCBncmFwaGljc0NvdW50QmVmb3JlTWFudWFsUmVtb3ZhbCA9IGdyYXBoaWNzTGF5ZXIuZ3JhcGhpY3MubGVuZ3RoXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ3gtYnV0dG9uLXJlbW92YWwtbWFudWFsLWdyYXBoaWNzLXN5bmMtc3RhcnQnLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgcmVtb3ZlZFJlY29yZElkOiBkYXRhSWQsXG4gICAgICAgIGdyYXBoaWNzQ291bnRCZWZvcmU6IGdyYXBoaWNzQ291bnRCZWZvcmVNYW51YWxSZW1vdmFsLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIHJlbW92ZUhpZ2hsaWdodEdyYXBoaWNzKGdyYXBoaWNzTGF5ZXIsIFtkYXRhSWRdKVxuICAgICAgXG4gICAgICBjb25zdCBncmFwaGljc0NvdW50QWZ0ZXJNYW51YWxSZW1vdmFsID0gZ3JhcGhpY3NMYXllci5ncmFwaGljcy5sZW5ndGhcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAneC1idXR0b24tcmVtb3ZhbC1tYW51YWwtZ3JhcGhpY3Mtc3luYy1jb21wbGV0ZScsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICByZW1vdmVkUmVjb3JkSWQ6IGRhdGFJZCxcbiAgICAgICAgZ3JhcGhpY3NDb3VudEJlZm9yZTogZ3JhcGhpY3NDb3VudEJlZm9yZU1hbnVhbFJlbW92YWwsXG4gICAgICAgIGdyYXBoaWNzQ291bnRBZnRlcjogZ3JhcGhpY3NDb3VudEFmdGVyTWFudWFsUmVtb3ZhbCxcbiAgICAgICAgZ3JhcGhpY3NSZW1vdmVkOiBncmFwaGljc0NvdW50QmVmb3JlTWFudWFsUmVtb3ZhbCAtIGdyYXBoaWNzQ291bnRBZnRlck1hbnVhbFJlbW92YWwsXG4gICAgICAgIGV4cGVjdGVkUmVtb3ZlZDogMSxcbiAgICAgICAgcmVtb3ZhbE1hdGNoZXM6IChncmFwaGljc0NvdW50QmVmb3JlTWFudWFsUmVtb3ZhbCAtIGdyYXBoaWNzQ291bnRBZnRlck1hbnVhbFJlbW92YWwpID09PSAxLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEZJWCAocjAxOC45MSk6IExvZyB3aGVuIGNvbmRpdGlvbiBpcyBOT1QgbWV0IHRvIHVuZGVyc3RhbmQgd2h5XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICd4LWJ1dHRvbi1yZW1vdmFsLW1hbnVhbC1ncmFwaGljcy1yZW1vdmFsLVNLSVBQRUQnLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgcmVtb3ZlZFJlY29yZElkOiBkYXRhSWQsXG4gICAgICAgIHJlYXNvbjogIXVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQgPyAndXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCBpcyBmYWxzZScgOlxuICAgICAgICAgICAgICAgICFncmFwaGljc0xheWVyID8gJ2dyYXBoaWNzTGF5ZXIgaXMgbnVsbC91bmRlZmluZWQnIDpcbiAgICAgICAgICAgICAgICAndW5rbm93bicsXG4gICAgICAgIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQsXG4gICAgICAgIGhhc0dyYXBoaWNzTGF5ZXI6ICEhZ3JhcGhpY3NMYXllcixcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgIH1cbiAgICBcbiAgICAvLyBESUFHTk9TVElDIExPR0dJTkc6IEZ1bGwgc3RhdGUgQkVGT1JFIHJlbW92YWxcbiAgICBjb25zdCBvdXRwdXREU1NlbGVjdGVkQmVmb3JlID0gb3V0cHV0RFMuZ2V0U2VsZWN0ZWRSZWNvcmRzKCkgYXMgRmVhdHVyZURhdGFSZWNvcmRbXSB8fCBbXVxuICAgIGNvbnN0IG91dHB1dERTU2VsZWN0ZWRJZHNCZWZvcmUgPSBvdXRwdXREU1NlbGVjdGVkQmVmb3JlLm1hcChyID0+IHIuZ2V0SWQoKSlcbiAgICBjb25zdCBhY2N1bXVsYXRlZFJlY29yZHNJZHNCZWZvcmUgPSBhY2N1bXVsYXRlZFJlY29yZHM/Lm1hcChyID0+IHIuZ2V0SWQoKSkgfHwgW11cbiAgICBcbiAgICAvLyBGSVggKHIwMTguODEpOiBEZXRhaWxlZCBncmFwaGljcyBhdHRyaWJ1dGUgaW5zcGVjdGlvbiB0byB1bmRlcnN0YW5kIHdoeSBJRHMgYXJlIG51bGxcbiAgICBjb25zdCBncmFwaGljc0xheWVySWRzQmVmb3JlOiAoc3RyaW5nIHwgbnVsbClbXSA9IFtdXG4gICAgY29uc3QgZmlyc3RGZXdHcmFwaGljc0F0dHJzOiBhbnlbXSA9IFtdXG4gICAgZ3JhcGhpY3NMYXllcj8uZ3JhcGhpY3M/LmZvckVhY2goKGcsIGluZGV4KSA9PiB7XG4gICAgICBpZiAoaW5kZXggPCAzKSB7XG4gICAgICAgIC8vIExvZyBmaXJzdCAzIGdyYXBoaWNzJyBmdWxsIGF0dHJpYnV0ZXMgZm9yIGRpYWdub3Npc1xuICAgICAgICBmaXJzdEZld0dyYXBoaWNzQXR0cnMucHVzaCh7XG4gICAgICAgICAgaW5kZXgsXG4gICAgICAgICAgaGFzQXR0cmlidXRlczogISFnLmF0dHJpYnV0ZXMsXG4gICAgICAgICAgYXR0cmlidXRlczogZy5hdHRyaWJ1dGVzLFxuICAgICAgICAgIGF0dHJpYnV0ZUtleXM6IGcuYXR0cmlidXRlcyA/IE9iamVjdC5rZXlzKGcuYXR0cmlidXRlcykgOiBbXVxuICAgICAgICB9KVxuICAgICAgfVxuICAgICAgZ3JhcGhpY3NMYXllcklkc0JlZm9yZS5wdXNoKGcuYXR0cmlidXRlcz8ucmVjb3JkSWQgfHwgbnVsbClcbiAgICB9KVxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgZXZlbnQ6ICd4LWJ1dHRvbi1yZW1vdmFsLWJlZm9yZS1zdGF0ZScsXG4gICAgICB3aWRnZXRJZCxcbiAgICAgIHJlbW92ZWRSZWNvcmRJZDogZGF0YUlkLFxuICAgICAgb3V0cHV0RFNTZWxlY3RlZENvdW50OiBvdXRwdXREU1NlbGVjdGVkQmVmb3JlLmxlbmd0aCxcbiAgICAgIG91dHB1dERTU2VsZWN0ZWRJZHM6IG91dHB1dERTU2VsZWN0ZWRJZHNCZWZvcmUsXG4gICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogYWNjdW11bGF0ZWRSZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0lkczogYWNjdW11bGF0ZWRSZWNvcmRzSWRzQmVmb3JlLFxuICAgICAgZ3JhcGhpY3NMYXllckNvdW50OiBncmFwaGljc0xheWVyPy5ncmFwaGljcz8ubGVuZ3RoIHx8IDAsXG4gICAgICBncmFwaGljc0xheWVySWRzOiBncmFwaGljc0xheWVySWRzQmVmb3JlLnNsaWNlKDAsIDExMCksXG4gICAgICBmaXJzdEZld0dyYXBoaWNzQXR0cnMsIC8vIE5FVzogaW5zcGVjdCB3aGF0IGF0dHJpYnV0ZXMgYXJlIGFjdHVhbGx5IHRoZXJlXG4gICAgICBhbGxTb3VyY2VzTWF0Y2g6IG91dHB1dERTU2VsZWN0ZWRJZHNCZWZvcmUubGVuZ3RoID09PSBhY2N1bXVsYXRlZFJlY29yZHNJZHNCZWZvcmUubGVuZ3RoICYmIFxuICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXREU1NlbGVjdGVkSWRzQmVmb3JlLmxlbmd0aCA9PT0gZ3JhcGhpY3NMYXllcklkc0JlZm9yZS5sZW5ndGggJiZcbiAgICAgICAgICAgICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkob3V0cHV0RFNTZWxlY3RlZElkc0JlZm9yZS5zb3J0KCkpID09PSBKU09OLnN0cmluZ2lmeShhY2N1bXVsYXRlZFJlY29yZHNJZHNCZWZvcmUuc29ydCgpKSxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgLy8gVXBkYXRlIG91dHB1dERTIHNlbGVjdGlvblxuICAgIGNvbnN0IHNlbGVjdGVkRGF0YXMgPSBvdXRwdXREUy5nZXRTZWxlY3RlZFJlY29yZHMoKSA/PyBbXVxuICAgIGNvbnN0IHVwZGF0ZWRTZWxlY3RlZERhdGFzID0gc2VsZWN0ZWREYXRhcy5maWx0ZXIocmVjb3JkID0+IHJlY29yZC5nZXRJZCgpICE9PSBkYXRhSWQpXG4gICAgY29uc3QgcmVjb3JkSWRzID0gdXBkYXRlZFNlbGVjdGVkRGF0YXMubWFwKHJlY29yZCA9PiByZWNvcmQuZ2V0SWQoKSlcbiAgICBcbiAgICAvLyBERUJVRzogTG9nIHN0YXRlIGFmdGVyIHJlbW92YWxcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgIGV2ZW50OiAncmVtb3ZlUmVjb3JkLXN0YXRlLWFmdGVyLXJlbW92YWwnLFxuICAgICAgd2lkZ2V0SWQsXG4gICAgICByZW1vdmVkUmVjb3JkSWQ6IGRhdGFJZCxcbiAgICAgIG91dHB1dERTU2VsZWN0ZWRCZWZvcmVSZW1vdmFsOiBzZWxlY3RlZERhdGFzLmxlbmd0aCxcbiAgICAgIG91dHB1dERTU2VsZWN0ZWRBZnRlclJlbW92YWw6IHVwZGF0ZWRTZWxlY3RlZERhdGFzLmxlbmd0aCxcbiAgICAgIHJlY29yZHNQcm9wQ291bnQ6IHJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgcXVlcnlEYXRhUmVjb3Jkc0NvdW50OiBxdWVyeURhdGE/LnJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGFjY3VtdWxhdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICByZXN1bHRzTW9kZSxcbiAgICAgIG5vdGU6ICdyMDE4Ljk0OiBSZWNvcmRzIHN0YXkgaW4gc3luYyAtIG5vIHJlbW92ZWRSZWNvcmRJZHMgdHJhY2tpbmcnLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICAvLyBVcGRhdGUgb3V0cHV0RFMgc2VsZWN0aW9uXG4gICAgaWYgKHR5cGVvZiBvdXRwdXREUy5zZWxlY3RSZWNvcmRzQnlJZHMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIG91dHB1dERTLnNlbGVjdFJlY29yZHNCeUlkcyhyZWNvcmRJZHMsIHVwZGF0ZWRTZWxlY3RlZERhdGFzIGFzIEZlYXR1cmVEYXRhUmVjb3JkW10pXG4gICAgfVxuICAgIFxuICAgIC8vIElNUE9SVEFOVDogUHVibGlzaCBjdXN0b20gZXZlbnQgc28gd2lkZ2V0IGNhbiB1cGRhdGUgbGFzdFNlbGVjdGlvbiBzdGF0ZVxuICAgIC8vIFRoaXMgZW5zdXJlcyByZXN0b3JhdGlvbiByZXN0b3JlcyB0aGUgY29ycmVjdCAodXBkYXRlZCkgY291bnRcbiAgICBjb25zdCBvcmlnaW5EUyA9IChvdXRwdXREUyBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlKS5nZXRPcmlnaW5EYXRhU291cmNlcygpPy5bMF0gYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICAgIGNvbnN0IGRhdGFTb3VyY2VJZCA9IG9yaWdpbkRTPy5pZFxuICAgIGNvbnN0IHNlbGVjdGlvbkV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCdxdWVyeXNpbXBsZS1zZWxlY3Rpb24tY2hhbmdlZCcsIHtcbiAgICAgIGRldGFpbDoge1xuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgcmVjb3JkSWRzLCAvLyBVcGRhdGVkIHJlY29yZCBJRHMgKHdpdGggcmVtb3ZlZCByZWNvcmQgZXhjbHVkZWQpXG4gICAgICAgIGRhdGFTb3VyY2VJZCxcbiAgICAgICAgb3V0cHV0RHNJZDogb3V0cHV0RFMuaWQsXG4gICAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBxdWVyeUl0ZW0uY29uZmlnSWRcbiAgICAgIH0sXG4gICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgY2FuY2VsYWJsZTogdHJ1ZVxuICAgIH0pXG4gICAgd2luZG93LmRpc3BhdGNoRXZlbnQoc2VsZWN0aW9uRXZlbnQpXG4gICAgXG4gICAgLy8gRElBR05PU1RJQyBMT0dHSU5HOiBGdWxsIHN0YXRlIEFGVEVSIHJlbW92YWwgKGJlZm9yZSBzeW5jKVxuICAgIGNvbnN0IG91dHB1dERTU2VsZWN0ZWRBZnRlciA9IG91dHB1dERTLmdldFNlbGVjdGVkUmVjb3JkcygpIGFzIEZlYXR1cmVEYXRhUmVjb3JkW10gfHwgW11cbiAgICBjb25zdCBvdXRwdXREU1NlbGVjdGVkSWRzQWZ0ZXIgPSBvdXRwdXREU1NlbGVjdGVkQWZ0ZXIubWFwKHIgPT4gci5nZXRJZCgpKVxuICAgIFxuICAgIC8vIEZJWCAocjAxOC44MSk6IERldGFpbGVkIGdyYXBoaWNzIGF0dHJpYnV0ZSBpbnNwZWN0aW9uIHRvIHVuZGVyc3RhbmQgd2h5IElEcyBhcmUgbnVsbFxuICAgIGNvbnN0IGdyYXBoaWNzTGF5ZXJJZHNBZnRlcjogKHN0cmluZyB8IG51bGwpW10gPSBbXVxuICAgIGNvbnN0IGZpcnN0RmV3R3JhcGhpY3NBdHRyc0FmdGVyOiBhbnlbXSA9IFtdXG4gICAgZ3JhcGhpY3NMYXllcj8uZ3JhcGhpY3M/LmZvckVhY2goKGcsIGluZGV4KSA9PiB7XG4gICAgICBpZiAoaW5kZXggPCAzKSB7XG4gICAgICAgIC8vIExvZyBmaXJzdCAzIGdyYXBoaWNzJyBmdWxsIGF0dHJpYnV0ZXMgZm9yIGRpYWdub3Npc1xuICAgICAgICBmaXJzdEZld0dyYXBoaWNzQXR0cnNBZnRlci5wdXNoKHtcbiAgICAgICAgICBpbmRleCxcbiAgICAgICAgICBoYXNBdHRyaWJ1dGVzOiAhIWcuYXR0cmlidXRlcyxcbiAgICAgICAgICBhdHRyaWJ1dGVzOiBnLmF0dHJpYnV0ZXMsXG4gICAgICAgICAgYXR0cmlidXRlS2V5czogZy5hdHRyaWJ1dGVzID8gT2JqZWN0LmtleXMoZy5hdHRyaWJ1dGVzKSA6IFtdXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgICBncmFwaGljc0xheWVySWRzQWZ0ZXIucHVzaChnLmF0dHJpYnV0ZXM/LnJlY29yZElkIHx8IG51bGwpXG4gICAgfSlcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgIGV2ZW50OiAneC1idXR0b24tcmVtb3ZhbC1hZnRlci1zdGF0ZS1iZWZvcmUtc3luYycsXG4gICAgICB3aWRnZXRJZCxcbiAgICAgIHJlbW92ZWRSZWNvcmRJZDogZGF0YUlkLFxuICAgICAgb3V0cHV0RFNTZWxlY3RlZENvdW50OiBvdXRwdXREU1NlbGVjdGVkQWZ0ZXIubGVuZ3RoLFxuICAgICAgb3V0cHV0RFNTZWxlY3RlZElkczogb3V0cHV0RFNTZWxlY3RlZElkc0FmdGVyLFxuICAgICAgZ3JhcGhpY3NMYXllckNvdW50OiBncmFwaGljc0xheWVyPy5ncmFwaGljcz8ubGVuZ3RoIHx8IDAsXG4gICAgICBncmFwaGljc0xheWVySWRzOiBncmFwaGljc0xheWVySWRzQWZ0ZXIuc2xpY2UoMCwgMTEwKSxcbiAgICAgIGZpcnN0RmV3R3JhcGhpY3NBdHRyc0FmdGVyLCAvLyBORVc6IGluc3BlY3Qgd2hhdCBhdHRyaWJ1dGVzIGFyZSBhY3R1YWxseSB0aGVyZVxuICAgICAgcmVtb3ZlZEZyb21PdXRwdXREUzogb3V0cHV0RFNTZWxlY3RlZElkc0FmdGVyLmxlbmd0aCA8IG91dHB1dERTU2VsZWN0ZWRJZHNCZWZvcmUubGVuZ3RoLFxuICAgICAgcmVtb3ZlZEZyb21HcmFwaGljczogZ3JhcGhpY3NMYXllcklkc0FmdGVyLmxlbmd0aCA8IGdyYXBoaWNzTGF5ZXJJZHNCZWZvcmUubGVuZ3RoLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICAvLyBGSVggKHIwMTguOTcpOiBTeW5jIGFjY3VtdWxhdGVkUmVjb3JkcyBpbiBBTEwgbW9kZXMgZm9yIHVuaXZlcnNhbCB0YWIgY291bnQgdHJhY2tpbmdcbiAgICAvLyBhY2N1bXVsYXRlZFJlY29yZHMgaXMgbm93IHRoZSBzaW5nbGUgc291cmNlIG9mIHRydXRoIGZvciBkaXNwbGF5ZWQgcmVjb3JkcyBhY3Jvc3MgYWxsIG1vZGVzXG4gICAgLy8gVGhpcyBlbnN1cmVzIHRhYiBjb3VudCB1cGRhdGVzIGNvcnJlY3RseSB3aGVuIHJlY29yZHMgYXJlIHJlbW92ZWQgaW4gQU5ZIG1vZGUgKE5ldywgQWRkLCBSZW1vdmUpXG4gICAgaWYgKG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlKSB7XG4gICAgICAvLyBHZXQgdGhlIGFjdHVhbCBzZWxlY3RlZCByZWNvcmRzIGZyb20gb3V0cHV0RFMgKHNpbmdsZSBzb3VyY2Ugb2YgdHJ1dGgpXG4gICAgICAvLyBUaGlzIGlzIGNhbGxlZCBBRlRFUiBvdXRwdXREUy5zZWxlY3RSZWNvcmRzQnlJZHMoKSBhYm92ZSwgc28gaXQgcmVmbGVjdHMgdGhlIHJlbW92YWxcbiAgICAgIGNvbnN0IGFjdHVhbGx5U2VsZWN0ZWRSZWNvcmRzID0gb3V0cHV0RFMuZ2V0U2VsZWN0ZWRSZWNvcmRzKCkgYXMgRmVhdHVyZURhdGFSZWNvcmRbXSB8fCBbXVxuICAgICAgXG4gICAgICAvLyBTeW5jIGFjY3VtdWxhdGVkUmVjb3JkcyB3aXRoIHdoYXQncyBhY3R1YWxseSBzZWxlY3RlZFxuICAgICAgLy8gVGhpcyBlbnN1cmVzIHJlbW92ZWQgcmVjb3JkcyBhcmUgaW1tZWRpYXRlbHkgZXhjbHVkZWQgZnJvbSBhY2N1bXVsYXRlZFJlY29yZHNcbiAgICAgIGlmIChhY2N1bXVsYXRlZFJlY29yZHMgJiYgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgLy8gQnVpbGQgYSBTZXQgb2YgYWN0dWFsbHkgc2VsZWN0ZWQgSURzIGZvciBmYXN0IGxvb2t1cFxuICAgICAgICBjb25zdCBhY3R1YWxseVNlbGVjdGVkSWRzID0gbmV3IFNldChhY3R1YWxseVNlbGVjdGVkUmVjb3Jkcy5tYXAociA9PiByLmdldElkKCkpKVxuICAgICAgICBcbiAgICAgICAgLy8gRmlsdGVyIGFjY3VtdWxhdGVkUmVjb3JkcyB0byBvbmx5IGluY2x1ZGUgcmVjb3JkcyB0aGF0IGFyZSBhY3R1YWxseSBzZWxlY3RlZFxuICAgICAgICBjb25zdCBzeW5jZWRSZWNvcmRzID0gYWNjdW11bGF0ZWRSZWNvcmRzLmZpbHRlcihyZWNvcmQgPT4gXG4gICAgICAgICAgYWN0dWFsbHlTZWxlY3RlZElkcy5oYXMocmVjb3JkLmdldElkKCkpXG4gICAgICAgIClcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHN5bmNlZFJlY29yZHNJZHMgPSBzeW5jZWRSZWNvcmRzLm1hcChyID0+IHIuZ2V0SWQoKSlcbiAgICAgICAgXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgIGV2ZW50OiAneC1idXR0b24taW1tZWRpYXRlLXN5bmMtd2l0aC1vdXRwdXRkcycsXG4gICAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgICAgcmVzdWx0c01vZGUsXG4gICAgICAgICAgcmVtb3ZlZFJlY29yZElkOiBkYXRhSWQsXG4gICAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnRCZWZvcmU6IGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzSWRzQmVmb3JlOiBhY2N1bXVsYXRlZFJlY29yZHNJZHNCZWZvcmUsXG4gICAgICAgICAgYWN0dWFsbHlTZWxlY3RlZENvdW50OiBhY3R1YWxseVNlbGVjdGVkUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgICAgYWN0dWFsbHlTZWxlY3RlZElkczogb3V0cHV0RFNTZWxlY3RlZElkc0FmdGVyLFxuICAgICAgICAgIHN5bmNlZFJlY29yZHNDb3VudDogc3luY2VkUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgICAgc3luY2VkUmVjb3Jkc0lkczogc3luY2VkUmVjb3Jkc0lkcyxcbiAgICAgICAgICByZWNvcmRzUmVtb3ZlZDogYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCAtIHN5bmNlZFJlY29yZHMubGVuZ3RoLFxuICAgICAgICAgIHJlbW92ZWRJZHM6IGFjY3VtdWxhdGVkUmVjb3Jkc0lkc0JlZm9yZS5maWx0ZXIoaWQgPT4gIXN5bmNlZFJlY29yZHNJZHMuaW5jbHVkZXMoaWQpKSxcbiAgICAgICAgICBub3RlOiAncjAxOC45NzogaW1tZWRpYXRlLXN5bmMtaW4tYWxsLW1vZGVzLWZvci11bml2ZXJzYWwtdGFiLWNvdW50JyxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfSlcbiAgICAgICAgXG4gICAgICAgIC8vIFVwZGF0ZSBhY2N1bXVsYXRlZFJlY29yZHMgdG8gbWF0Y2ggcmVhbGl0eSAoaW1tZWRpYXRlIHN5bmMsIG5vdCBsYXp5KVxuICAgICAgICBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZShzeW5jZWRSZWNvcmRzKVxuICAgICAgICBcbiAgICAgICAgLy8gRElBR05PU1RJQyBMT0dHSU5HOiBGdWxsIHN0YXRlIEFGVEVSIHN5bmNcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgZXZlbnQ6ICd4LWJ1dHRvbi1yZW1vdmFsLWFmdGVyLXN5bmMtc3RhdGUnLFxuICAgICAgICAgIHdpZGdldElkLFxuICAgICAgICAgIHJlbW92ZWRSZWNvcmRJZDogZGF0YUlkLFxuICAgICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50QWZ0ZXI6IHN5bmNlZFJlY29yZHMubGVuZ3RoLFxuICAgICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0lkc0FmdGVyOiBzeW5jZWRSZWNvcmRzSWRzLFxuICAgICAgICAgIG91dHB1dERTU2VsZWN0ZWRDb3VudDogb3V0cHV0RFNTZWxlY3RlZEFmdGVyLmxlbmd0aCxcbiAgICAgICAgICBvdXRwdXREU1NlbGVjdGVkSWRzOiBvdXRwdXREU1NlbGVjdGVkSWRzQWZ0ZXIsXG4gICAgICAgICAgZ3JhcGhpY3NMYXllckNvdW50OiBncmFwaGljc0xheWVyPy5ncmFwaGljcz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgICAgZ3JhcGhpY3NMYXllcklkczogZ3JhcGhpY3NMYXllcklkc0FmdGVyLFxuICAgICAgICAgIGFsbFNvdXJjZXNNYXRjaDogc3luY2VkUmVjb3Jkc0lkcy5sZW5ndGggPT09IG91dHB1dERTU2VsZWN0ZWRJZHNBZnRlci5sZW5ndGggJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHN5bmNlZFJlY29yZHNJZHMubGVuZ3RoID09PSBncmFwaGljc0xheWVySWRzQWZ0ZXIubGVuZ3RoICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBKU09OLnN0cmluZ2lmeShzeW5jZWRSZWNvcmRzSWRzLnNvcnQoKSkgPT09IEpTT04uc3RyaW5naWZ5KG91dHB1dERTU2VsZWN0ZWRJZHNBZnRlci5zb3J0KCkpLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9KVxuICAgICAgfSBlbHNlIGlmIChhY3R1YWxseVNlbGVjdGVkUmVjb3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIC8vIElmIGFjY3VtdWxhdGVkUmVjb3JkcyBpcyBlbXB0eSBidXQgb3V0cHV0RFMgaGFzIHNlbGVjdGlvbiwgc3luYyBpdFxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICBldmVudDogJ3gtYnV0dG9uLXN5bmNpbmctZW1wdHktYWNjdW11bGF0ZWQtd2l0aC1vdXRwdXRkcycsXG4gICAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgICAgcmVtb3ZlZFJlY29yZElkOiBkYXRhSWQsXG4gICAgICAgICAgYWN0dWFsbHlTZWxlY3RlZENvdW50OiBhY3R1YWxseVNlbGVjdGVkUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgICAgbm90ZTogJ2FjY3VtdWxhdGVkUmVjb3Jkcy13YXMtZW1wdHktc3luY2luZy1mcm9tLW91dHB1dGRzJyxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfSlcbiAgICAgICAgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UoYWN0dWFsbHlTZWxlY3RlZFJlY29yZHMpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBCb3RoIGFyZSBlbXB0eSAtIGVuc3VyZSBhY2N1bXVsYXRlZFJlY29yZHMgaXMgZW1wdHlcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgZXZlbnQ6ICd4LWJ1dHRvbi1ib3RoLWVtcHR5LXN5bmNpbmcnLFxuICAgICAgICAgIHdpZGdldElkLFxuICAgICAgICAgIHJlbW92ZWRSZWNvcmRJZDogZGF0YUlkLFxuICAgICAgICAgIG5vdGU6ICdib3RoLWFjY3VtdWxhdGVkUmVjb3Jkcy1hbmQtb3V0cHV0ZHMtYXJlLWVtcHR5JyxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfSlcbiAgICAgICAgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UoW10pXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIEZJWCAocjAxOC45Nik6IFJlbW92ZWQgbWFudWFsIG1vZGlmaWNhdGlvbiBmbGFnIC0gbm8gbG9uZ2VyIG5lZWRlZFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgZXZlbnQ6ICd4LWJ1dHRvbi1yZW1vdmFsLWNvbXBsZXRlJyxcbiAgICAgIHdpZGdldElkLFxuICAgICAgcmVtb3ZlZFJlY29yZElkOiBkYXRhSWQsXG4gICAgICBub3RlOiAncjAxOC45NjogTm8gbWFudWFsIHJlbW92YWwgdHJhY2tpbmcgbmVlZGVkJyxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgLy8gRklYIChyMDE4Ljg1KTogRklOQUwgRElBR05PU1RJQyAtIEdyYXBoaWNzIGNvdW50IGFmdGVyIGVudGlyZSByZW1vdmFsIGZsb3dcbiAgICAvLyBUaGlzIGhhcHBlbnMgQUZURVIgYWxsIHN5bmMgbG9naWMsIHNvIHdlIGNhbiBzZWUgdGhlIGZpbmFsIHN0YXRlXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBjb25zdCBmaW5hbEdyYXBoaWNzQ291bnQgPSBncmFwaGljc0xheWVyPy5ncmFwaGljcz8ubGVuZ3RoIHx8IDBcbiAgICAgIGNvbnN0IGZpbmFsR3JhcGhpY3NJZHMgPSBncmFwaGljc0xheWVyPy5ncmFwaGljcz8ubWFwKGcgPT4gZy5hdHRyaWJ1dGVzPy5yZWNvcmRJZCkgfHwgW11cbiAgICAgIGNvbnN0IGZpbmFsR3JhcGhpY3NJZHNTYW1wbGUgPSBmaW5hbEdyYXBoaWNzSWRzLnNsaWNlKDAsIDEwKVxuICAgICAgXG4gICAgICAvLyBDb3VudCBkdXBsaWNhdGVzIGluIGZpbmFsIGdyYXBoaWNzXG4gICAgICBjb25zdCBncmFwaGljc0lkQ291bnRzID0gbmV3IE1hcDxzdHJpbmcsIG51bWJlcj4oKVxuICAgICAgZmluYWxHcmFwaGljc0lkcy5mb3JFYWNoKGlkID0+IHtcbiAgICAgICAgaWYgKGlkKSB7XG4gICAgICAgICAgZ3JhcGhpY3NJZENvdW50cy5zZXQoaWQsIChncmFwaGljc0lkQ291bnRzLmdldChpZCkgfHwgMCkgKyAxKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgY29uc3QgZHVwbGljYXRlSWRzID0gQXJyYXkuZnJvbShncmFwaGljc0lkQ291bnRzLmVudHJpZXMoKSlcbiAgICAgICAgLmZpbHRlcigoW18sIGNvdW50XSkgPT4gY291bnQgPiAxKVxuICAgICAgICAubWFwKChbaWQsIGNvdW50XSkgPT4gKHsgaWQsIGNvdW50IH0pKVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICd4LWJ1dHRvbi1yZW1vdmFsLUZJTkFMLWdyYXBoaWNzLXN0YXRlJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIHJlbW92ZWRSZWNvcmRJZDogZGF0YUlkLFxuICAgICAgICBncmFwaGljc0NvdW50QmVmb3JlRW50aXJlRmxvdzogZ3JhcGhpY3NDb3VudEJlZm9yZU9yaWdpblJlbW92YWwsXG4gICAgICAgIGdyYXBoaWNzQ291bnRBZnRlckVudGlyZUZsb3c6IGZpbmFsR3JhcGhpY3NDb3VudCxcbiAgICAgICAgZ3JhcGhpY3NJZHNTYW1wbGU6IGZpbmFsR3JhcGhpY3NJZHNTYW1wbGUsXG4gICAgICAgIGdyYXBoaWNzQ2hhbmdlZDogZmluYWxHcmFwaGljc0NvdW50ICE9PSBncmFwaGljc0NvdW50QmVmb3JlT3JpZ2luUmVtb3ZhbCxcbiAgICAgICAgZ3JhcGhpY3NDaGFuZ2VkQnk6IGZpbmFsR3JhcGhpY3NDb3VudCAtIGdyYXBoaWNzQ291bnRCZWZvcmVPcmlnaW5SZW1vdmFsLFxuICAgICAgICBleHBlY3RlZENoYW5nZTogLTEsIC8vIFNob3VsZCByZW1vdmUgMSBncmFwaGljXG4gICAgICAgIGFjdHVhbENoYW5nZTogZmluYWxHcmFwaGljc0NvdW50IC0gZ3JhcGhpY3NDb3VudEJlZm9yZU9yaWdpblJlbW92YWwsXG4gICAgICAgIGNoYW5nZU1hdGNoZXM6IChmaW5hbEdyYXBoaWNzQ291bnQgLSBncmFwaGljc0NvdW50QmVmb3JlT3JpZ2luUmVtb3ZhbCkgPT09IC0xLFxuICAgICAgICBkdXBsaWNhdGVHcmFwaGljc0RldGVjdGVkOiBkdXBsaWNhdGVJZHMubGVuZ3RoID4gMCxcbiAgICAgICAgZHVwbGljYXRlR3JhcGhpY3M6IGR1cGxpY2F0ZUlkcy5zbGljZSgwLCA1KSxcbiAgICAgICAgdG90YWxEdXBsaWNhdGVzOiBkdXBsaWNhdGVJZHMucmVkdWNlKChzdW0sIHsgY291bnQgfSkgPT4gc3VtICsgKGNvdW50IC0gMSksIDApLFxuICAgICAgICBub3RlOiAnRmluYWwgc3RhdGUgYWZ0ZXIgYWxsIHJlbW92YWwgYW5kIHN5bmMgbG9naWMgY29tcGxldGVzJyxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgIH0sIDEwMCkgLy8gU21hbGwgZGVsYXkgdG8gZW5zdXJlIGFsbCBhc3luYyBvcGVyYXRpb25zIGNvbXBsZXRlXG5cbiAgICAvLyBOb3RlOiBIYXNoIHBhcmFtZXRlcnMgYXJlIHByZXNlcnZlZCBidXQgaGFzaC10cmlnZ2VyZWQgcXVlcmllcyBhcmUgYmxvY2tlZFxuICAgIC8vIHdoZW4gbWFudWFsIG1vZGlmaWNhdGlvbnMgZXhpc3QgKGhhbmRsZWQgaW4gd2lkZ2V0J3MgaGFuZGxlT3BlbldpZGdldEV2ZW50KVxuXG4gICAgLy8gTG9nIGFmdGVyIHJlbW92ZVJlY29yZCBjb21wbGV0ZXMgdG8gY2hlY2sgaWYgZXhwYW5kQWxsIGNoYW5nZWRcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ3JlbW92ZVJlY29yZC1jb21wbGV0ZWQnLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgcmVtb3ZlZFJlY29yZElkOiBkYXRhSWQsXG4gICAgICAgIGV4cGFuZEFsbEJlZm9yZTogY3VycmVudEV4cGFuZEFsbCxcbiAgICAgICAgZXhwYW5kQWxsQWZ0ZXI6IGV4cGFuZEFsbCxcbiAgICAgICAgZXhwYW5kQWxsQ2hhbmdlZDogY3VycmVudEV4cGFuZEFsbCAhPT0gZXhwYW5kQWxsLFxuICAgICAgICBleHBhbmRCeURlZmF1bHRQcm9wOiBleHBhbmRBbGwsIC8vIFdoYXQgd2lsbCBiZSBwYXNzZWQgdG8gU2ltcGxlTGlzdFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgfSwgMClcbiAgfSwgW291dHB1dERTLCB3aWRnZXRJZCwgcmVzdWx0Q291bnQsIG9uTmF2QmFjaywgcmVzdWx0c01vZGUsIGFjY3VtdWxhdGVkUmVjb3Jkcywgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UsIHF1ZXJ5SXRlbS5jb25maWdJZCwgZXhwYW5kQWxsXSlcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPSdxdWVyeS1yZXN1bHQgaC0xMDAnIGNzcz17cmVzdWx0U3R5bGV9IHJvbGU9J2xpc3Rib3gnIGFyaWEtbGFiZWw9e2dldEkxOG5NZXNzYWdlKCdyZXN1bHRzJyl9PlxuICAgICAgPERhdGFTb3VyY2VDb21wb25lbnQgdXNlRGF0YVNvdXJjZT17cmVzdWx0VXNlT3V0cHV0RGF0YVNvdXJjZX0gb25EYXRhU291cmNlSW5mb0NoYW5nZT17aGFuZGxlRGF0YVNvdXJjZUluZm9DaGFuZ2V9IC8+XG4gICAgICBcbiAgICAgIHsvKiBFcnJvciBNZXNzYWdlICovfVxuICAgICAge3NlbGVjdGlvbkVycm9yICYmIChcbiAgICAgICAgPGRpdiBjc3M9e2Nzc2BwYWRkaW5nOiAwIDE2cHg7IG1hcmdpbi10b3A6IDhweDtgfT5cbiAgICAgICAgICA8RXJyb3JNZXNzYWdlIFxuICAgICAgICAgICAgZXJyb3I9e3NlbGVjdGlvbkVycm9yfSBcbiAgICAgICAgICAgIG9uRGlzbWlzcz17KCkgPT4gc2V0U2VsZWN0aW9uRXJyb3IobnVsbCl9XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICApfVxuICAgICAgXG4gICAgICA8ZGl2IGNsYXNzTmFtZT0ncXVlcnktcmVzdWx0X19oZWFkZXIgZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlciBteC00Jz5cbiAgICAgICAgPEJ1dHRvbiBhcmlhLWxhYmVsPXtnZXRJMThuTWVzc2FnZSgnYmFjaycpfSByZWY9e2JhY2tCdG5SZWZ9IGNsYXNzTmFtZT0ncC0wIG1yLTInIHNpemU9J3NtJyB2YXJpYW50PSd0ZXh0JyBjb2xvcj0naW5oZXJpdCcgaWNvbiBvbkNsaWNrPXsoKSA9PiB7IG9uTmF2QmFjaygpIH19PlxuICAgICAgICAgIDxBcnJvd0xlZnRPdXRsaW5lZCBhdXRvRmxpcC8+XG4gICAgICAgIDwvQnV0dG9uPlxuICAgICAgICB7Y3VycmVudEl0ZW0ucmVzdWx0c0xhYmVsID8/IGdldEkxOG5NZXNzYWdlKCdyZXN1bHRzJyl9XG4gICAgICAgIHsoXG4gICAgICAgICAgPFJlYWN0LkZyYWdtZW50PlxuICAgICAgICAgICAgPFRvb2x0aXAgdGl0bGU9e2dldEkxOG5NZXNzYWdlKCdjbGVhclJlc3VsdCcpfSBwbGFjZW1lbnQ9J2JvdHRvbSc+XG4gICAgICAgICAgICAgIDxCdXR0b24gY2xhc3NOYW1lPSdtbC1hdXRvJyBpY29uIHNpemU9J3NtJyB2YXJpYW50PSd0ZXh0JyBjb2xvcj0naW5oZXJpdCcgb25DbGljaz17Y2xlYXJSZXN1bHRzfSBhcmlhLWxhYmVsPXtnZXRJMThuTWVzc2FnZSgnY2xlYXJSZXN1bHQnKX0+XG4gICAgICAgICAgICAgICAgPEljb24gaWNvbj17aWNvbk1hcC50b29sRGVsZXRlfSAvPlxuICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICAgIHsvKiBEYXRhIGFjdGlvbnMgZmlsdGVyZWQgdmlhIG1hbmlmZXN0Lmpzb24gZXhjbHVkZURhdGFBY3Rpb25zIC0gU2hvdyBvbiBNYXAsIFNlbGVjdCBMb2FkZWQsIGFuZCBDbGVhciBTZWxlY3Rpb24gYXJlIGV4Y2x1ZGVkLlxuICAgICAgICAgICAgICAgIEN1c3RvbSBcIkFkZCB0byBNYXBcIiBhY3Rpb24gaXMgcHJvdmlkZWQgdmlhIGV4dHJhQWN0aW9ucyBhbmQgdXNlcyBRdWVyeVNpbXBsZSdzIHNlbGVjdGlvbiBwcm9jZXNzLiAqL31cbiAgICAgICAgICAgIHtlbmFibGVEYXRhQWN0aW9uICYmIG91dHB1dERTICYmIChcbiAgICAgICAgICAgICAgPFJlYWN0LkZyYWdtZW50PlxuICAgICAgICAgICAgICAgIDxkaXYgY3NzPXtjc3Ngd2lkdGg6IDFweDsgaGVpZ2h0OiAxNnB4OyBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1zeXMtY29sb3ItZGl2aWRlci1pbnB1dCk7YH0+PC9kaXY+XG4gICAgICAgICAgICAgICAgPERhdGFBY3Rpb25MaXN0XG4gICAgICAgICAgICAgICAgICB3aWRnZXRJZD17d2lkZ2V0SWR9XG4gICAgICAgICAgICAgICAgICBkYXRhU2V0cz17YWN0aW9uRGF0YVNldHN9XG4gICAgICAgICAgICAgICAgICBsaXN0U3R5bGU9e0RhdGFBY3Rpb25MaXN0U3R5bGUuRHJvcGRvd259XG4gICAgICAgICAgICAgICAgICBidXR0b25TaXplPSdzbSdcbiAgICAgICAgICAgICAgICAgIGJ1dHRvblR5cGU9J3RlcnRpYXJ5J1xuICAgICAgICAgICAgICAgICAgZXh0cmFBY3Rpb25zPXtleHRyYUFjdGlvbnN9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9SZWFjdC5GcmFnbWVudD5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC9SZWFjdC5GcmFnbWVudD5cbiAgICAgICAgKX1cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzc05hbWU9J3F1ZXJ5LXJlc3VsdC1jb250YWluZXIgbXQtMSc+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSdxdWVyeS1yZXN1bHQtaW5mbyBtYi0yIHB4LTQgZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNvbnRlbnQtYmV0d2Vlbicgcm9sZT0nYWxlcnQnIGFyaWEtbGl2ZT0ncG9saXRlJz5cbiAgICAgICAgICA8c3Bhbj57Z2V0VGlwTWVzc2FnZSgpfTwvc3Bhbj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlcic+XG4gICAgICAgICAgICA8VG9vbHRpcCB0aXRsZT17ZXhwYW5kQWxsID8gZ2V0STE4bk1lc3NhZ2UoJ2NvbGxhcHNlQWxsJykgOiBnZXRJMThuTWVzc2FnZSgnZXhwYW5kQWxsJyl9IHBsYWNlbWVudD0ndG9wJz5cbiAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgIHNpemU9J3NtJ1xuICAgICAgICAgICAgICAgIHR5cGU9J3RlcnRpYXJ5J1xuICAgICAgICAgICAgICAgIGljb25cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXt0b2dnbGVFeHBhbmRBbGx9XG4gICAgICAgICAgICAgICAgYXJpYS1sYWJlbD17ZXhwYW5kQWxsID8gZ2V0STE4bk1lc3NhZ2UoJ2NvbGxhcHNlQWxsJykgOiBnZXRJMThuTWVzc2FnZSgnZXhwYW5kQWxsJyl9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICB7ZXhwYW5kQWxsID8gPENvbGxhcHNlQWxsT3V0bGluZWQgLz4gOiA8RXhwYW5kQWxsT3V0bGluZWQgLz59XG4gICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgPC9Ub29sdGlwPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgey8qIEZPUkNFRDogQWx3YXlzIFNpbXBsZUxpc3QgLSBMYXp5TG9hZCBhbmQgTXVsdGlQYWdlIHJlbW92ZWQgKi99XG4gICAgICAgIHtyZXN1bHRDb3VudCA+IDAgJiYgKFxuICAgICAgICAgIDxTaW1wbGVMaXN0XG4gICAgICAgICAgICBrZXk9J3NpbXBsZSdcbiAgICAgICAgICAgIHdpZGdldElkPXt3aWRnZXRJZH1cbiAgICAgICAgICAgIHF1ZXJ5SXRlbT17cXVlcnlJdGVtfVxuICAgICAgICAgICAgb3V0cHV0RFM9e291dHB1dERTIGFzIGFueX1cbiAgICAgICAgICAgIHJlY29yZHM9e2ZpbHRlcmVkUmVjb3Jkc0Zvckxpc3R9XG4gICAgICAgICAgICBkaXJlY3Rpb249e2RpcmVjdGlvbn1cbiAgICAgICAgICAgIG9uRXNjYXBlPXtoYW5kbGVFc2NhcGV9XG4gICAgICAgICAgICBvblNlbGVjdENoYW5nZT17dG9nZ2xlU2VsZWN0aW9ufVxuICAgICAgICAgICAgb25SZW1vdmU9e3JlbW92ZVJlY29yZH1cbiAgICAgICAgICAgIGV4cGFuZEJ5RGVmYXVsdD17ZXhwYW5kQWxsfVxuICAgICAgICAgICAgaXRlbUV4cGFuZFN0YXRlcz17aXRlbUV4cGFuZFN0YXRlc31cbiAgICAgICAgICAgIG9uUmVuZGVyRG9uZT17aGFuZGxlUmVuZGVyRG9uZX1cbiAgICAgICAgICAvPlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIClcbn1cbiIsImltcG9ydCB7IFJlYWN0IH0gZnJvbSAnamltdS1jb3JlJ1xuXG5leHBvcnQgY29uc3QgUXVlcnlUYXNrQ29udGV4dCA9IFJlYWN0LmNyZWF0ZUNvbnRleHQ8UXVlcnlUYXNrQ29udGV4dFByb3BzPih7XG4gIHJlc2V0U3ltYm9sOiBudWxsXG59KVxuXG5leHBvcnQgaW50ZXJmYWNlIFF1ZXJ5VGFza0NvbnRleHRQcm9wcyB7XG4gIHJlc2V0U3ltYm9sPzogc3ltYm9sIC8vIHVzZWQgdG8gdHJpZ2dlciByZXNldCBvcGVyYXRpb25cbn1cblxuXG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7XG4gIFJlYWN0LFxuICBqc3gsXG4gIGNzcyxcbiAgY2xhc3NOYW1lcyxcbiAgdHlwZSBEYXRhU291cmNlLFxuICB0eXBlIEltbXV0YWJsZU9iamVjdCxcbiAgdHlwZSBJTVN0YXRlLFxuICB0eXBlIElNU3FsRXhwcmVzc2lvbixcbiAgdHlwZSBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLFxuICBSZWFjdFJlZHV4LFxuICBob29rcyxcbiAgRGF0YVNvdXJjZU1hbmFnZXIsXG4gIHR5cGUgU3FsUXVlcnlQYXJhbXMsXG4gIEltbXV0YWJsZVxufSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBCdXR0b24sIFRvb2x0aXAsIENoZWNrYm94IH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB7IGxvYWRBcmNHSVNKU0FQSU1vZHVsZXMgfSBmcm9tICdqaW11LWFyY2dpcydcbmltcG9ydCB7IFNxbEV4cHJlc3Npb25SdW50aW1lLCBnZXRTaG93bkNsYXVzZU51bWJlckJ5RXhwcmVzc2lvbiB9IGZyb20gJ2ppbXUtdWkvYmFzaWMvc3FsLWV4cHJlc3Npb24tcnVudGltZSdcbmltcG9ydCB7IHR5cGUgUXVlcnlJdGVtVHlwZSwgdHlwZSBTcGF0aWFsRmlsdGVyT2JqLCBTcGF0aWFsUmVsYXRpb24sIHR5cGUgVW5pdFR5cGUgfSBmcm9tICcuLi9jb25maWcnXG5pbXBvcnQgeyBERUZBVUxUX1FVRVJZX0lURU0gfSBmcm9tICcuLi9kZWZhdWx0LXF1ZXJ5LWl0ZW0nXG5pbXBvcnQgeyBzYW5pdGl6ZVNxbEV4cHJlc3Npb24sIGlzUXVlcnlJbnB1dFZhbGlkIH0gZnJvbSAnLi9xdWVyeS11dGlscydcbmltcG9ydCBkZWZhdWx0TWVzc2FnZSBmcm9tICcuL3RyYW5zbGF0aW9ucy9kZWZhdWx0J1xuaW1wb3J0IHsgUXVlcnlUYXNrU3BhdGlhbEZvcm0gfSBmcm9tICcuL3F1ZXJ5LXRhc2stc3BhdGlhbC1mb3JtJ1xuaW1wb3J0IHsgdXNlQXV0b0hlaWdodCB9IGZyb20gJy4vdXNlQXV0b0hlaWdodCdcbmltcG9ydCB7IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIgfSBmcm9tICd3aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbidcblxuY29uc3QgZGVidWdMb2dnZXIgPSBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyKClcblxuaW1wb3J0IHsgUXVlcnlUYXNrQ29udGV4dCB9IGZyb20gJy4vcXVlcnktdGFzay1jb250ZXh0J1xuaW1wb3J0IHsgSW5mb091dGxpbmVkIH0gZnJvbSAnamltdS1pY29ucy9vdXRsaW5lZC9zdWdnZXN0ZWQvaW5mbydcbmltcG9ydCB7IGNsZWFyU2VsZWN0aW9uSW5EYXRhU291cmNlcyB9IGZyb20gJy4vc2VsZWN0aW9uLXV0aWxzJ1xuXG4vKipcbiAqIEV2ZW50LURyaXZlbiBIYXNoIFBhcmFtZXRlciBFeGVjdXRpb24gUGF0dGVyblxuICogXG4gKiBDUklUSUNBTDogVGhpcyBpcyB0aGUgT05MWSBleGVjdXRpb24gcGF0aCBmb3IgaGFzaC10cmlnZ2VyZWQgcXVlcmllcy5cbiAqIFxuICogRmxvdzpcbiAqIDEuIEhhc2ggdmFsdWUgc2V0IGluIHN0YXRlIGFzIFNUUklORyAoZS5nLiwgXCI1NTY4OTAwMDAwXCIpXG4gKiAyLiBET00gbWFuaXB1bGF0aW9uIHRyaWdnZXJzIFNxbEV4cHJlc3Npb25SdW50aW1lIHRvIHByb2Nlc3MgdGhlIHZhbHVlXG4gKiAzLiBTcWxFeHByZXNzaW9uUnVudGltZSBjb252ZXJ0cyBzdHJpbmcg4oaSIGFycmF5IGZvcm1hdCBbe3ZhbHVlOiBcIi4uLlwiLCBsYWJlbDogXCIuLi5cIn1dXG4gKiA0LiBoYW5kbGVTcWxFeHByT2JqQ2hhbmdlIGRldGVjdHMgY29udmVyc2lvbiDihpIgZGlzcGF0Y2hlcyBRVUVSWVNJTVBMRV9IQVNIX1ZBTFVFX0NPTlZFUlRFRF9FVkVOVFxuICogNS4gRXZlbnQgbGlzdGVuZXIgaW4gcXVlcnktdGFzay50c3ggZXhlY3V0ZXMgcXVlcnkgKE9SIGhhbmRsZVNxbEV4cHJPYmpDaGFuZ2UgY2FsbHMgYXBwbHlRdWVyeSBkaXJlY3RseSlcbiAqIFxuICogV0hZIFRISVMgUEFUVEVSTiBFWElTVFM6XG4gKiAtIFNxbEV4cHJlc3Npb25SdW50aW1lIE9OTFkgZmlyZXMgb25DaGFuZ2Ugd2hlbiB2YWx1ZSBpcyBjb252ZXJ0ZWQgdG8gYXJyYXkgZm9ybWF0XG4gKiAtIFF1ZXJpZXMgUkVRVUlSRSBhcnJheSBmb3JtYXQgLSBleGVjdXRpbmcgd2l0aCBzdHJpbmcgZm9ybWF0IHJldHVybnMgdW5maWx0ZXJlZCByZXN1bHRzICgxMDAwIHJlY29yZHMpXG4gKiAtIFdlIE1VU1Qgd2FpdCBmb3IgY29udmVyc2lvbiBiZWZvcmUgZXhlY3V0aW5nIHF1ZXJpZXNcbiAqIFxuICogQU5USS1QQVRURVJOIFRPIEFWT0lEOlxuICogLSBETyBOT1QgYWRkIHVzZUVmZmVjdCBob29rcyB0aGF0IGV4ZWN1dGUgcXVlcmllcyBiYXNlZCBvbiBzdHJpbmcgdmFsdWVzXG4gKiAtIERPIE5PVCBleGVjdXRlIHF1ZXJpZXMgYmVmb3JlIFFVRVJZU0lNUExFX0hBU0hfVkFMVUVfQ09OVkVSVEVEX0VWRU5UIGlzIGRpc3BhdGNoZWRcbiAqIC0gRE8gTk9UIGNpcmN1bXZlbnQgdGhlIGV2ZW50LWRyaXZlbiBmbG93IHdpdGggZWFybHkgZXhlY3V0aW9uIGNoZWNrc1xuICogXG4gKiBJZiB5b3UgbmVlZCB0byBleGVjdXRlIGEgcXVlcnksIHdhaXQgZm9yIHRoZSBjb252ZXJzaW9uIGV2ZW50IG9yIGNhbGwgYXBwbHlRdWVyeSgpXG4gKiBBRlRFUiBoYW5kbGVTcWxFeHByT2JqQ2hhbmdlIGhhcyBkZXRlY3RlZCB0aGUgY29udmVyc2lvbiBhbmQgZGlzcGF0Y2hlZCB0aGUgZXZlbnQuXG4gKi9cbmNvbnN0IFFVRVJZU0lNUExFX0hBU0hfVkFMVUVfQ09OVkVSVEVEX0VWRU5UID0gJ3F1ZXJ5c2ltcGxlLWhhc2gtdmFsdWUtY29udmVydGVkJ1xuXG5leHBvcnQgaW50ZXJmYWNlIFF1ZXJ5VGFza0l0ZW1Qcm9wcyB7XG4gIHdpZGdldElkOiBzdHJpbmdcbiAgY29uZmlnSWQ6IHN0cmluZ1xuICBzcGF0aWFsRmlsdGVyRW5hYmxlZDogYm9vbGVhblxuICBkYXRhc291cmNlUmVhZHk6IGJvb2xlYW5cbiAgb3V0cHV0RFM/OiBEYXRhU291cmNlXG4gIG9uRm9ybVN1Ym1pdDogKHNxbEV4cHJPYmo6IElNU3FsRXhwcmVzc2lvbiwgc3BhdGlhbEZpbHRlcjogU3BhdGlhbEZpbHRlck9iaiwgem9vbVRvU2VsZWN0ZWQ/OiBib29sZWFuKSA9PiB2b2lkXG4gIGRhdGFBY3Rpb25GaWx0ZXI/OiBTcWxRdWVyeVBhcmFtc1xuICBpbml0aWFsSW5wdXRWYWx1ZT86IHN0cmluZ1xuICBvbkhhc2hQYXJhbWV0ZXJVc2VkPzogKHNob3J0SWQ6IHN0cmluZykgPT4gdm9pZFxuICBxdWVyeUl0ZW1TaG9ydElkPzogc3RyaW5nXG4gIGFjdGl2ZVRhYj86ICdxdWVyeScgfCAncmVzdWx0cydcbiAgb25UYWJDaGFuZ2U/OiAodGFiOiAncXVlcnknIHwgJ3Jlc3VsdHMnKSA9PiB2b2lkXG59XG5cbmNvbnN0IGdldEZvcm1TdHlsZSA9IChpc0F1dG9IZWlnaHQ6IGJvb2xlYW4pID0+IHtcbiAgcmV0dXJuIGNzc2BcbiAgICBmbGV4OiAxIDEgYXV0bztcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgbWluLWhlaWdodDogMDtcbiAgICAuZm9ybS10aXRsZSB7XG4gICAgICBjb2xvcjogdmFyKC0tc3lzLWNvbG9yLXN1cmZhY2UtcGFwZXItdGV4dCk7XG4gICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgZm9udC1zaXplOiAwLjgxMjVyZW07XG4gICAgICBsaW5lLWhlaWdodDogMS41O1xuICAgICAgbWFyZ2luLXRvcDogMCAhaW1wb3J0YW50O1xuICAgIH1cbiAgICAucXVlcnktZm9ybV9fY29udGVudCB7XG4gICAgICBmbGV4OiAxIDEgJHtpc0F1dG9IZWlnaHQgPyAnYXV0bycgOiAnYXV0byd9O1xuICAgICAgbWF4LWhlaWdodDogJHtpc0F1dG9IZWlnaHQgPyAnNjEuOHZoJyA6ICdub25lJ307XG4gICAgICBvdmVyZmxvdzogYXV0bztcbiAgICAgIHBhZGRpbmctYm90dG9tOiAwO1xuICAgIH1cbiAgICAucXVlcnktZm9ybV9fYWN0aW9ucyB7XG4gICAgICBmbGV4LXNocmluazogMDtcbiAgICAgIG1hcmdpbi10b3A6IDA7XG4gICAgICBwYWRkaW5nLXRvcDogNHB4O1xuICAgIH1cbiAgYFxufVxuXG5leHBvcnQgZnVuY3Rpb24gUXVlcnlUYXNrRm9ybSAocHJvcHM6IFF1ZXJ5VGFza0l0ZW1Qcm9wcykge1xuICBjb25zdCB7IHdpZGdldElkLCBjb25maWdJZCwgb3V0cHV0RFMsIHNwYXRpYWxGaWx0ZXJFbmFibGVkLCBkYXRhc291cmNlUmVhZHksIG9uRm9ybVN1Ym1pdCwgZGF0YUFjdGlvbkZpbHRlciwgaW5pdGlhbElucHV0VmFsdWUsIG9uSGFzaFBhcmFtZXRlclVzZWQsIHF1ZXJ5SXRlbVNob3J0SWQsIGFjdGl2ZVRhYiwgb25UYWJDaGFuZ2UgfSA9IHByb3BzXG4gIGNvbnN0IHByZURhdGFBY3Rpb25GaWx0ZXIgPSBob29rcy51c2VQcmV2aW91cyhkYXRhQWN0aW9uRmlsdGVyKVxuICBjb25zdCBxdWVyeUl0ZW06IEltbXV0YWJsZU9iamVjdDxRdWVyeUl0ZW1UeXBlPiA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XG4gICAgY29uc3Qgd2lkZ2V0SnNvbiA9IHN0YXRlLmFwcENvbmZpZy53aWRnZXRzW3dpZGdldElkXVxuICAgIHJldHVybiB3aWRnZXRKc29uLmNvbmZpZy5xdWVyeUl0ZW1zLmZpbmQoaXRlbSA9PiBpdGVtLmNvbmZpZ0lkID09PSBjb25maWdJZClcbiAgfSlcbiAgY29uc3QgY3VycmVudEl0ZW0gPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1FVRVJZX0lURU0sIHF1ZXJ5SXRlbSlcbiAgY29uc3QgZ2V0STE4bk1lc3NhZ2UgPSBob29rcy51c2VUcmFuc2xhdGlvbihkZWZhdWx0TWVzc2FnZSlcbiAgY29uc3QgW3Jlc2V0U3ltYm9sLCBzZXRSZXNldFN5bWJvbF0gPSBSZWFjdC51c2VTdGF0ZTxzeW1ib2w+KG51bGwpXG4gIC8vIFJ1bnRpbWUgem9vbSBwcmVmZXJlbmNlIC0gaW5pdGlhbGl6ZWQgd2l0aCBjb25maWcgdmFsdWUsIGNhbiBiZSBvdmVycmlkZGVuIGJ5IHVzZXJcbiAgY29uc3QgW3J1bnRpbWVab29tVG9TZWxlY3RlZCwgc2V0UnVudGltZVpvb21Ub1NlbGVjdGVkXSA9IFJlYWN0LnVzZVN0YXRlPGJvb2xlYW4+KFxuICAgIHF1ZXJ5SXRlbT8uem9vbVRvU2VsZWN0ZWQgPz8gdHJ1ZVxuICApXG5cbiAgLy8gU3luYyBydW50aW1lIHpvb20gcHJlZmVyZW5jZSB3aGVuIHF1ZXJ5IGl0ZW0gY2hhbmdlcyAoZS5nLiwgc3dpdGNoaW5nIGJldHdlZW4gcXVlcmllcylcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBzZXRSdW50aW1lWm9vbVRvU2VsZWN0ZWQocXVlcnlJdGVtPy56b29tVG9TZWxlY3RlZCA/PyB0cnVlKVxuICB9LCBbcXVlcnlJdGVtPy56b29tVG9TZWxlY3RlZCwgcXVlcnlJdGVtPy5jb25maWdJZF0pXG5cbiAgLy8gY29uc3QgW2RhdGFTb3VyY2UsIHNldERhdGFTb3VyY2VdID0gUmVhY3QudXNlU3RhdGU8RGF0YVNvdXJjZT4obnVsbClcbiAgY29uc3Qge1xuICAgIHVzZUF0dHJpYnV0ZUZpbHRlcixcbiAgICB1c2VTcGF0aWFsRmlsdGVyLFxuICAgIHNwYXRpYWxGaWx0ZXJUeXBlcyxcbiAgICBzcWxFeHByT2JqLFxuICAgIHNwYXRpYWxNYXBXaWRnZXRJZHMsXG4gICAgc3BhdGlhbEludGVyYWN0aXZlQ3JlYXRlVG9vbFR5cGVzLFxuICAgIHNwYXRpYWxSZWxhdGlvblVzZURhdGFTb3VyY2VzLFxuICAgIHNwYXRpYWxJbmNsdWRlUnVudGltZURhdGEsXG4gICAgc3BhdGlhbFJlbGF0aW9ucyxcbiAgICBzcGF0aWFsUmVsYXRpb25FbmFibGVCdWZmZXIsXG4gICAgc3BhdGlhbFJlbGF0aW9uQnVmZmVyRGlzdGFuY2UsXG4gICAgc3BhdGlhbFJlbGF0aW9uQnVmZmVyVW5pdCxcbiAgICBzcGF0aWFsSW50ZXJhY3RpdmVFbmFibGVCdWZmZXIsXG4gICAgc3BhdGlhbEludGVyYWN0aXZlQnVmZmVyRGlzdGFuY2UsXG4gICAgc3BhdGlhbEludGVyYWN0aXZlQnVmZmVyVW5pdCxcbiAgICBhdHRyaWJ1dGVGaWx0ZXJMYWJlbCA9IGdldEkxOG5NZXNzYWdlKCdhdHRyaWJ1dGVGaWx0ZXInKSxcbiAgICBzcGF0aWFsRmlsdGVyTGFiZWwgPSBnZXRJMThuTWVzc2FnZSgnc3BhdGlhbEZpbHRlcicpLFxuICAgIGF0dHJpYnV0ZUZpbHRlckRlc2MsXG4gICAgc3BhdGlhbEZpbHRlckRlc2NcbiAgfSA9IGN1cnJlbnRJdGVtXG4gIGNvbnN0IFthdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqLCBzZXRBdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqXSA9IFJlYWN0LnVzZVN0YXRlPElNU3FsRXhwcmVzc2lvbj4oc3FsRXhwck9iailcbiAgLy8gUmVmIHRvIHRyYWNrIGN1cnJlbnQgU1FMIGV4cHJlc3Npb24gZm9yIHN5bmNocm9ub3VzIGFjY2VzcyBpbiBhcHBseVF1ZXJ5XG4gIC8vIFRoaXMgZW5zdXJlcyBoYXNoIHZhbHVlcyBhcmUgaW1tZWRpYXRlbHkgYXZhaWxhYmxlIHdoZW4gQXBwbHkgaXMgY2xpY2tlZFxuICBjb25zdCBhdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqUmVmID0gUmVhY3QudXNlUmVmPElNU3FsRXhwcmVzc2lvbj4oc3FsRXhwck9iailcbiAgY29uc3Qgc3BhdGlhbEZpbHRlck9ialJlZiA9IFJlYWN0LnVzZVJlZjxTcGF0aWFsRmlsdGVyT2JqPihudWxsKVxuICBjb25zdCBzcGF0aWFsUmVsYXRpb25SZWYgPSBSZWFjdC51c2VSZWY8U3BhdGlhbFJlbGF0aW9uPihTcGF0aWFsUmVsYXRpb24uSW50ZXJzZWN0KVxuICBjb25zdCBidWZmZXJSZWYgPSBSZWFjdC51c2VSZWY8eyBkaXN0YW5jZTogbnVtYmVyLCB1bml0OiBVbml0VHlwZSB9PihudWxsKVxuICBjb25zdCBhcHBseUJ1dHRvblJlZiA9IFJlYWN0LnVzZVJlZjxIVE1MQnV0dG9uRWxlbWVudD4obnVsbClcbiAgY29uc3QgZm9ybUNvbnRlbnRSZWYgPSBSZWFjdC51c2VSZWY8SFRNTERpdkVsZW1lbnQ+KG51bGwpXG4gIGNvbnN0IHNxbEV4cHJSdW50aW1lQ29udGFpbmVyUmVmID0gUmVhY3QudXNlUmVmPEhUTUxEaXZFbGVtZW50PihudWxsKSAvLyBDb250YWluZXIgZm9yIFNxbEV4cHJlc3Npb25SdW50aW1lIERPTSBtYW5pcHVsYXRpb25cbiAgY29uc3QgaXNBdXRvSGVpZ2h0ID0gdXNlQXV0b0hlaWdodCgpXG4gIGNvbnN0IHNob3dDbGF1c2VOdW1iZXIgPSBSZWFjdC51c2VSZWYoZ2V0U2hvd25DbGF1c2VOdW1iZXJCeUV4cHJlc3Npb24oc3FsRXhwck9iaikpXG4gIGNvbnN0IGluaXRpYWxWYWx1ZVNldFJlZiA9IFJlYWN0LnVzZVJlZjxzdHJpbmcgfCBudWxsPihudWxsKSAvLyBUcmFjayB3aGljaCBjb25maWdJZCB3ZSd2ZSBzZXQgdGhlIHZhbHVlIGZvclxuICBjb25zdCBsYXN0VmFsdWVTZXRSZWYgPSBSZWFjdC51c2VSZWY8c3RyaW5nIHwgbnVsbD4obnVsbCkgLy8gVHJhY2sgdGhlIGxhc3QgdmFsdWUgdGhhdCB3YXMgc2V0XG4gIGNvbnN0IGhhc2hUcmlnZ2VyZWRSZWYgPSBSZWFjdC51c2VSZWY8Ym9vbGVhbj4oZmFsc2UpIC8vIFRyYWNrIGlmIHF1ZXJ5IHdhcyB0cmlnZ2VyZWQgdmlhIGhhc2ggcGFyYW1ldGVyXG4gIGNvbnN0IHByZXZpb3VzQ29uZmlnSWRSZWYgPSBSZWFjdC51c2VSZWY8c3RyaW5nIHwgbnVsbD4obnVsbCkgLy8gVHJhY2sgcHJldmlvdXMgY29uZmlnSWQgdG8gZGV0ZWN0IHF1ZXJ5IHN3aXRjaGVzXG4gIGNvbnN0IFtpc1R5cGluZ1ZhbGlkLCBzZXRJc1R5cGluZ1ZhbGlkXSA9IFJlYWN0LnVzZVN0YXRlPGJvb2xlYW4+KGZhbHNlKVxuXG4gIC8vIE1vbml0b3IgZm9jdXMgYW5kIGlucHV0IGV2ZW50cyB3aXRoaW4gdGhlIHF1ZXJ5IGZvcm1cbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBoYW5kbGVGb2N1cyA9IChlOiBGb2N1c0V2ZW50KSA9PiB7XG4gICAgICBjb25zdCB0YXJnZXQgPSBlLnRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgICAgaWYgKHRhcmdldC50YWdOYW1lID09PSAnSU5QVVQnKSB7XG4gICAgICAgIGNvbnN0IHZhbCA9ICh0YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWVcbiAgICAgICAgc2V0SXNUeXBpbmdWYWxpZChpc1F1ZXJ5SW5wdXRWYWxpZCh2YWwpKVxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICAgICAgZXZlbnQ6ICdpbnB1dC1mb2N1c2VkJyxcbiAgICAgICAgICBjb25maWdJZCxcbiAgICAgICAgICB0YWdOYW1lOiB0YXJnZXQudGFnTmFtZSxcbiAgICAgICAgICB0eXBlOiAodGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnR5cGUsXG4gICAgICAgICAgdmFsdWU6IHZhbFxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGhhbmRsZUlucHV0ID0gKGU6IEV2ZW50KSA9PiB7XG4gICAgICBjb25zdCB0YXJnZXQgPSBlLnRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgICAgaWYgKHRhcmdldC50YWdOYW1lID09PSAnSU5QVVQnKSB7XG4gICAgICAgIGNvbnN0IHZhbCA9ICh0YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWVcbiAgICAgICAgY29uc3QgaXNWYWxpZCA9IGlzUXVlcnlJbnB1dFZhbGlkKHZhbClcbiAgICAgICAgc2V0SXNUeXBpbmdWYWxpZChpc1ZhbGlkKVxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICAgICAgZXZlbnQ6ICdpbnB1dC10eXBpbmcnLFxuICAgICAgICAgIGNvbmZpZ0lkLFxuICAgICAgICAgIHZhbHVlOiB2YWwsXG4gICAgICAgICAgaXNUeXBpbmdWYWxpZDogaXNWYWxpZFxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGhhbmRsZUZvY3VzT3V0ID0gKGU6IEZvY3VzRXZlbnQpID0+IHtcbiAgICAgIC8vIFNtYWxsIGRlbGF5IHRvIGFsbG93IHN0YXRlIHRvIGNhdGNoIHVwXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgc2V0SXNUeXBpbmdWYWxpZChmYWxzZSlcbiAgICAgIH0sIDUwKVxuICAgIH1cblxuICAgIGNvbnN0IGNvbnRhaW5lciA9IGZvcm1Db250ZW50UmVmLmN1cnJlbnRcbiAgICBpZiAoY29udGFpbmVyKSB7XG4gICAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXNpbicsIGhhbmRsZUZvY3VzKVxuICAgICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgaGFuZGxlSW5wdXQpXG4gICAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXNvdXQnLCBoYW5kbGVGb2N1c091dClcbiAgICB9XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaWYgKGNvbnRhaW5lcikge1xuICAgICAgICBjb250YWluZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignZm9jdXNpbicsIGhhbmRsZUZvY3VzKVxuICAgICAgICBjb250YWluZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBoYW5kbGVJbnB1dClcbiAgICAgICAgY29udGFpbmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2ZvY3Vzb3V0JywgaGFuZGxlRm9jdXNPdXQpXG4gICAgICB9XG4gICAgfVxuICB9LCBbY29uZmlnSWRdKVxuXG4gIC8vIENoZWNrIGlmIGFueSBhdHRyaWJ1dGUgZmlsdGVyIGlucHV0IGlzIHZhbGlkXG4gIGNvbnN0IGlzSW5wdXRWYWxpZCA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgIC8vIElmIHRoZSB1c2VyIGlzIGN1cnJlbnRseSB0eXBpbmcgc29tZXRoaW5nIHZhbGlkLCB0aGUgZm9ybSBpcyB2YWxpZFxuICAgIGlmIChpc1R5cGluZ1ZhbGlkKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICAgIGV2ZW50OiAndmFsaWRhdGlvbi1jaGVjay1pbnN0YW50JyxcbiAgICAgICAgY29uZmlnSWQsXG4gICAgICAgIGlzVmFsaWQ6IHRydWVcbiAgICAgIH0pXG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cblxuICAgIGlmICghYXR0cmlidXRlRmlsdGVyU3FsRXhwck9iaj8ucGFydHMgfHwgYXR0cmlidXRlRmlsdGVyU3FsRXhwck9iai5wYXJ0cy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiB0cnVlIC8vIElmIG5vIHBhcnRzLCB3ZSBhc3N1bWUgaXQncyB2YWxpZCAoZS5nLiBzcGF0aWFsLW9ubHkgcXVlcnkpXG4gICAgfVxuICAgIFxuICAgIC8vIENoZWNrIGlmIGF0IGxlYXN0IG9uZSBTSU5HTEUgcGFydCBoYXMgYSB2YWxpZCB2YWx1ZVxuICAgIGNvbnN0IGhhc1ZhbGlkVmFsdWUgPSBhdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqLnBhcnRzLnNvbWUocGFydCA9PiB7XG4gICAgICAvLyBBY2Nlc3NpbmcgSW1tdXRhYmxlIHN0cnVjdHVyZXMgcmVxdWlyZXMgY2FyZS4gSWYgZG90IG5vdGF0aW9uIGZhaWxzLCBcbiAgICAgIC8vIHRoZSBmcmFtZXdvcmsgY29tcG9uZW50cyBtaWdodCBiZSB1c2luZyAuZ2V0KCkgb3Igb3RoZXIgbWV0aG9kcy5cbiAgICAgIC8vIFdlJ2xsIGJlIGluY2x1c2l2ZSBoZXJlOiBpZiBpdCdzIG5vdCBhIFNJTkdMRSBwYXJ0LCB3ZSB0cmVhdCBpdCBhcyB2YWxpZC5cbiAgICAgIGlmIChwYXJ0LnR5cGUgPT09ICdTSU5HTEUnKSB7XG4gICAgICAgIGNvbnN0IHZhbCA9IHBhcnQudmFsdWVPcHRpb25zPy52YWx1ZVxuICAgICAgICBjb25zdCBzb3VyY2UgPSBwYXJ0LnZhbHVlT3B0aW9ucz8uc291cmNlXG4gICAgICAgIFxuICAgICAgICAvLyBJZiB0aGUgc291cmNlIGlzIE5PVCAnVVNFUl9JTlBVVCcsIGl0J3MgbGlrZWx5IGEgbGlzdC9kcm9wZG93biAoVU5JUVVFX1ZBTFVFUywgRklFTERfVkFMVUUpXG4gICAgICAgIC8vIFdlIGFsc28gY2hlY2sgZm9yIHBhcnQuZGF0YVNvdXJjZSB3aGljaCBpcyBjb21tb24gZm9yIGxpc3QtYmFzZWQgc2VsZWN0aW9uc1xuICAgICAgICAvLyBXZSB0cmVhdCB0aGVzZSBhcyBcIkxpc3RcIiB0eXBlcyB3aGljaCBhcmUgZXhlbXB0ZWQgZnJvbSB0aGUgZW1wdHktc3RyaW5nIHJ1bGUuXG4gICAgICAgIGNvbnN0IGlzTGlzdCA9IChzb3VyY2UgJiYgc291cmNlICE9PSAnVVNFUl9JTlBVVCcpIHx8IChwYXJ0LmRhdGFTb3VyY2U/LnNvdXJjZSlcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGlzVmFsaWQgPSBpc1F1ZXJ5SW5wdXRWYWxpZCh2YWwsICEhaXNMaXN0KVxuICAgICAgICBcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgICAgIGV2ZW50OiAndmFsaWRhdGlvbi1jaGVjay1kZXRhaWwnLFxuICAgICAgICAgIGNvbmZpZ0lkLFxuICAgICAgICAgIHBhcnRUeXBlOiBwYXJ0LnR5cGUsXG4gICAgICAgICAgc291cmNlLFxuICAgICAgICAgIGhhc0RhdGFTb3VyY2U6ICEhcGFydC5kYXRhU291cmNlLFxuICAgICAgICAgIGRhdGFTb3VyY2VTb3VyY2U6IHBhcnQuZGF0YVNvdXJjZT8uc291cmNlLFxuICAgICAgICAgIGlzTGlzdDogISFpc0xpc3QsXG4gICAgICAgICAgdmFsdWU6IHZhbCxcbiAgICAgICAgICBpc1ZhbGlkXG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICAgICAgZXZlbnQ6ICd2YWxpZGF0aW9uLWNoZWNrJyxcbiAgICAgICAgICBjb25maWdJZCxcbiAgICAgICAgICBwYXJ0VHlwZTogcGFydC50eXBlLFxuICAgICAgICAgIHNvdXJjZSxcbiAgICAgICAgICBpc0xpc3QsXG4gICAgICAgICAgdmFsdWU6IHZhbCxcbiAgICAgICAgICB2YWx1ZVR5cGU6IHR5cGVvZiB2YWwsXG4gICAgICAgICAgaXNWYWxpZFxuICAgICAgICB9KVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIGlzVmFsaWRcbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlIFxuICAgIH0pXG5cbiAgICByZXR1cm4gaGFzVmFsaWRWYWx1ZVxuICB9LCBbYXR0cmlidXRlRmlsdGVyU3FsRXhwck9iaiwgY29uZmlnSWQsIGlzVHlwaW5nVmFsaWRdKVxuXG4gIGNvbnN0IG9yaWdpbkRTID0gb3V0cHV0RFM/LmdldE9yaWdpbkRhdGFTb3VyY2VzKClbMF1cblxuICAvLyBUcmFjayBjb25maWdJZCBjaGFuZ2VzIChxdWVyeSBzd2l0Y2hlcylcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICBldmVudDogJ2NvbmZpZ0lkLWNoYW5nZWQnLFxuICAgICAgY29uZmlnSWQsXG4gICAgICBwcmV2aW91c0NvbmZpZ0lkOiBpbml0aWFsVmFsdWVTZXRSZWYuY3VycmVudCxcbiAgICAgIGluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgfSwgW2NvbmZpZ0lkLCBpbml0aWFsSW5wdXRWYWx1ZSwgZGF0YXNvdXJjZVJlYWR5LCBvdXRwdXREUywgd2lkZ2V0SWQsIGhhc2hUcmlnZ2VyZWRSZWZdKVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBpbnB1dCB2YWx1ZSBmcm9tIFVSTCBoYXNoIHBhcmFtZXRlcnMgd2hlbjpcbiAgICogMS4gRGF0YXNvdXJjZSBpcyByZWFkeVxuICAgKiAyLiBXZSBoYXZlIGFuIGluaXRpYWxJbnB1dFZhbHVlIGZyb20gVVJMIGhhc2hcbiAgICogMy4gV2UgaGF2ZW4ndCBhbHJlYWR5IHNldCBpdCBmb3IgdGhpcyBjb25maWdJZCwgT1IgdGhlIHZhbHVlIGhhcyBjaGFuZ2VkXG4gICAqIFxuICAgKiBVc2VzIGJvdGggUmVhY3Qgc3RhdGUgdXBkYXRlcyBhbmQgRE9NIG1hbmlwdWxhdGlvbiB0byBlbnN1cmUgdGhlIHZhbHVlXG4gICAqIGlzIHByb3Blcmx5IHNldCBpbiBTcWxFeHByZXNzaW9uUnVudGltZSdzIGludGVybmFsIHN0YXRlLlxuICAgKi9cbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICBldmVudDogJ2luaXRpYWxJbnB1dFZhbHVlLXByb3AtcmVjZWl2ZWQnLFxuICAgICAgY29uZmlnSWQsXG4gICAgICBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgIGRhdGFzb3VyY2VSZWFkeSxcbiAgICAgIGhhc1NxbEV4cHJPYmo6ICEhc3FsRXhwck9iaixcbiAgICAgIHNxbEV4cHJPYmpQYXJ0c0xlbmd0aDogc3FsRXhwck9iaj8ucGFydHM/Lmxlbmd0aCxcbiAgICAgIGluaXRpYWxWYWx1ZVNldFJlZjogaW5pdGlhbFZhbHVlU2V0UmVmLmN1cnJlbnQsXG4gICAgICB3aWxsUHJvY2VzczogZGF0YXNvdXJjZVJlYWR5ICYmIGluaXRpYWxJbnB1dFZhbHVlICYmIHNxbEV4cHJPYmo/LnBhcnRzPy5sZW5ndGggPiAwLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gtRklSU1QtTE9BRCcsIHtcbiAgICAgIGV2ZW50OiAnZm9ybS1pbml0aWFsSW5wdXRWYWx1ZS1yZWNlaXZlZCcsXG4gICAgICBjb25maWdJZCxcbiAgICAgIGluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgZGF0YXNvdXJjZVJlYWR5LFxuICAgICAgaGFzT3V0cHV0RFM6ICEhb3V0cHV0RFMsXG4gICAgICBoYXNTcWxFeHByT2JqOiAhIXNxbEV4cHJPYmosXG4gICAgICBzcWxFeHByT2JqUGFydHNMZW5ndGg6IHNxbEV4cHJPYmo/LnBhcnRzPy5sZW5ndGgsXG4gICAgICBpbml0aWFsVmFsdWVTZXRSZWY6IGluaXRpYWxWYWx1ZVNldFJlZi5jdXJyZW50LFxuICAgICAgbGFzdFZhbHVlU2V0UmVmOiBsYXN0VmFsdWVTZXRSZWYuY3VycmVudCxcbiAgICAgIGhhc2hUcmlnZ2VyZWRSZWY6IGhhc2hUcmlnZ2VyZWRSZWYuY3VycmVudCxcbiAgICAgIGN1cnJlbnRTdGF0ZVZhbHVlOiBhdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqPy5wYXJ0cz8uWzBdPy52YWx1ZU9wdGlvbnM/LnZhbHVlLFxuICAgICAgd2lsbFByb2Nlc3M6IGRhdGFzb3VyY2VSZWFkeSAmJiBvdXRwdXREUyAmJiBpbml0aWFsSW5wdXRWYWx1ZSAmJiBzcWxFeHByT2JqPy5wYXJ0cz8ubGVuZ3RoID4gMCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgLy8gUmVzZXQgZmxhZyBpZiBjb25maWdJZCBjaGFuZ2VkIChzd2l0Y2hlZCB0byBkaWZmZXJlbnQgcXVlcnkpXG4gICAgaWYgKGluaXRpYWxWYWx1ZVNldFJlZi5jdXJyZW50ICE9PSBudWxsICYmIGluaXRpYWxWYWx1ZVNldFJlZi5jdXJyZW50ICE9PSBjb25maWdJZCkge1xuICAgICAgaW5pdGlhbFZhbHVlU2V0UmVmLmN1cnJlbnQgPSBudWxsXG4gICAgICBsYXN0VmFsdWVTZXRSZWYuY3VycmVudCA9IG51bGxcbiAgICAgIGhhc2hUcmlnZ2VyZWRSZWYuY3VycmVudCA9IGZhbHNlIC8vIFJlc2V0IGhhc2ggdHJpZ2dlciBmbGFnIHdoZW4gc3dpdGNoaW5nIHF1ZXJpZXNcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgICAgZXZlbnQ6ICdoYXNoVHJpZ2dlcmVkUmVmLXJlc2V0JyxcbiAgICAgICAgY29uZmlnSWQsXG4gICAgICAgIHJlYXNvbjogJ3N3aXRjaGluZy1xdWVyaWVzJyxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgc2V0SXNUeXBpbmdWYWxpZChmYWxzZSkgLy8gUmVzZXQgdHlwaW5nIHZhbGlkYXRpb25cbiAgICB9XG4gICAgXG4gICAgLy8gQ2hlY2sgaWYgdmFsdWUgaGFzIGNoYW5nZWQgZm9yIHRoZSBzYW1lIGNvbmZpZ0lkXG4gICAgY29uc3QgdmFsdWVDaGFuZ2VkID0gbGFzdFZhbHVlU2V0UmVmLmN1cnJlbnQgIT09IG51bGwgJiYgXG4gICAgICAgICAgICAgICAgICAgICAgICAgbGFzdFZhbHVlU2V0UmVmLmN1cnJlbnQgIT09IGluaXRpYWxJbnB1dFZhbHVlICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgaW5pdGlhbFZhbHVlU2V0UmVmLmN1cnJlbnQgPT09IGNvbmZpZ0lkXG4gICAgXG4gICAgLy8gRElBR05PU1RJQyAocjAxOC4xMTIpOiBQcm92ZSBoeXBvdGhlc2lzIGFib3V0IHNob3VsZFNldFZhbHVlIGxvZ2ljXG4gICAgZGVidWdMb2dnZXIubG9nKCdIQVNILUVYRUMnLCB7XG4gICAgICBldmVudDogJ2Zvcm0tc2hvdWxkU2V0VmFsdWUtY2FsY3VsYXRpb24nLFxuICAgICAgY29uZmlnSWQsXG4gICAgICBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgIENPTkRJVElPTlM6IHtcbiAgICAgICAgZGF0YXNvdXJjZVJlYWR5LFxuICAgICAgICBoYXNPdXRwdXREUzogISFvdXRwdXREUyxcbiAgICAgICAgaGFzSW5pdGlhbElucHV0VmFsdWU6ICEhaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICAgIGhhc1NxbEV4cHJPYmpQYXJ0czogISEoc3FsRXhwck9iaj8ucGFydHM/Lmxlbmd0aCA+IDApXG4gICAgICB9LFxuICAgICAgUkVGUzoge1xuICAgICAgICBpbml0aWFsVmFsdWVTZXRSZWY6IGluaXRpYWxWYWx1ZVNldFJlZi5jdXJyZW50LFxuICAgICAgICBsYXN0VmFsdWVTZXRSZWY6IGxhc3RWYWx1ZVNldFJlZi5jdXJyZW50LFxuICAgICAgICBwcmV2aW91c0NvbmZpZ0lkUmVmOiBwcmV2aW91c0NvbmZpZ0lkUmVmLmN1cnJlbnRcbiAgICAgIH0sXG4gICAgICBMT0dJQ19CUkVBS0RPV046IHtcbiAgICAgICAgJ2luaXRpYWxWYWx1ZVNldFJlZiAhPT0gY29uZmlnSWQnOiBpbml0aWFsVmFsdWVTZXRSZWYuY3VycmVudCAhPT0gY29uZmlnSWQsXG4gICAgICAgICdsYXN0VmFsdWVTZXRSZWYgIT09IG51bGwnOiBsYXN0VmFsdWVTZXRSZWYuY3VycmVudCAhPT0gbnVsbCxcbiAgICAgICAgJ2xhc3RWYWx1ZVNldFJlZiAhPT0gaW5pdGlhbElucHV0VmFsdWUnOiBsYXN0VmFsdWVTZXRSZWYuY3VycmVudCAhPT0gaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICAgICdpbml0aWFsVmFsdWVTZXRSZWYgPT09IGNvbmZpZ0lkJzogaW5pdGlhbFZhbHVlU2V0UmVmLmN1cnJlbnQgPT09IGNvbmZpZ0lkLFxuICAgICAgICAndmFsdWVDaGFuZ2VkIChhbGwgMyBhYm92ZSBBTkQpJzogdmFsdWVDaGFuZ2VkLFxuICAgICAgICAnRklOQUw6IGNvbmZpZ0lkLW1pc21hdGNoIE9SIHZhbHVlQ2hhbmdlZCc6IChpbml0aWFsVmFsdWVTZXRSZWYuY3VycmVudCAhPT0gY29uZmlnSWQgfHwgdmFsdWVDaGFuZ2VkKVxuICAgICAgfSxcbiAgICAgIEJSRUFLRE9XTl9CQVNFX0NPTkRJVElPTlM6IHtcbiAgICAgICAgZGF0YXNvdXJjZVJlYWR5LFxuICAgICAgICAnaGFzLWluaXRpYWxJbnB1dFZhbHVlJzogISFpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgICAgJ2hhcy1zcWxFeHByT2JqLXBhcnRzJzogISEoc3FsRXhwck9iaj8ucGFydHM/Lmxlbmd0aCA+IDApLFxuICAgICAgICAncmVmLWNoZWNrJzogKGluaXRpYWxWYWx1ZVNldFJlZi5jdXJyZW50ICE9PSBjb25maWdJZCB8fCB2YWx1ZUNoYW5nZWQpLFxuICAgICAgICAnYmFzZUNvbmRpdGlvbnMgKGFsbCA0IEFORCknOiAoZGF0YXNvdXJjZVJlYWR5ICYmIGluaXRpYWxJbnB1dFZhbHVlICYmIChzcWxFeHByT2JqPy5wYXJ0cz8ubGVuZ3RoID4gMCkgJiYgKGluaXRpYWxWYWx1ZVNldFJlZi5jdXJyZW50ICE9PSBjb25maWdJZCB8fCB2YWx1ZUNoYW5nZWQpKVxuICAgICAgfSxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgLy8gU2V0IHRoZSB2YWx1ZSBpZjpcbiAgICAvLyAtIFdlIGhhdmVuJ3Qgc2V0IGl0IGZvciB0aGlzIGNvbmZpZ0lkIHlldCwgT1JcbiAgICAvLyAtIFRoZSB2YWx1ZSBoYXMgY2hhbmdlZCBmb3IgdGhlIHNhbWUgY29uZmlnSWQgKGhhc2ggcGFyYW1ldGVyIHVwZGF0ZWQpXG4gICAgLy8gRklYIChyMDE4LjExMik6IERpZmZlcmVudGlhdGUgZmlyc3QgbG9hZCBmcm9tIG1pZC1zZXNzaW9uIGhhc2ggY2hhbmdlc1xuICAgIC8vIEZpcnN0IGxvYWQ6IFJlcXVpcmUgb3V0cHV0RFMgdG8gYXZvaWQgcmFjZSBjb25kaXRpb24gKHIwMTguMTA5KVxuICAgIC8vIE1pZC1zZXNzaW9uOiBVc2Ugb2xkIGxvZ2ljIHRoYXQgd29ya2VkIGJlZm9yZSByMDE4LjEwOVxuICAgIGNvbnN0IGlzRmlyc3RMb2FkID0gaW5pdGlhbFZhbHVlU2V0UmVmLmN1cnJlbnQgPT09IG51bGxcbiAgICBjb25zdCBiYXNlQ29uZGl0aW9ucyA9IGRhdGFzb3VyY2VSZWFkeSAmJiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaW5pdGlhbElucHV0VmFsdWUgJiYgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNxbEV4cHJPYmo/LnBhcnRzPy5sZW5ndGggPiAwICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgIChpbml0aWFsVmFsdWVTZXRSZWYuY3VycmVudCAhPT0gY29uZmlnSWQgfHwgdmFsdWVDaGFuZ2VkKVxuICAgIFxuICAgIGNvbnN0IHNob3VsZFNldFZhbHVlID0gaXNGaXJzdExvYWQgXG4gICAgICA/IChiYXNlQ29uZGl0aW9ucyAmJiAhIW91dHB1dERTKSAgLy8gRmlyc3QgbG9hZDogc3RyaWN0IGNoZWNrIChwcmV2ZW50cyByYWNlKSwgISEgZm9yY2VzIGJvb2xlYW5cbiAgICAgIDogYmFzZUNvbmRpdGlvbnMgICAgICAgICAgICAgICAgICAgLy8gTWlkLXNlc3Npb246IG9sZCBsb2dpYyAod29ya3MgZmluZSlcbiAgICBcbiAgICAvLyBESUFHTk9TVElDIChyMDE4LjExMik6IExvZyBmaW5hbCByZXN1bHRcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gtRVhFQycsIHtcbiAgICAgIGV2ZW50OiAnZm9ybS1zaG91bGRTZXRWYWx1ZS1yZXN1bHQnLFxuICAgICAgY29uZmlnSWQsXG4gICAgICBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgIGlzRmlyc3RMb2FkLFxuICAgICAgc2hvdWxkU2V0VmFsdWUsXG4gICAgICByZWFzb246ICFzaG91bGRTZXRWYWx1ZSA/IFxuICAgICAgICAoIWRhdGFzb3VyY2VSZWFkeSA/ICdkYXRhc291cmNlUmVhZHktZmFsc2UnIDpcbiAgICAgICAgICFvdXRwdXREUyAmJiBpc0ZpcnN0TG9hZCA/ICdvdXRwdXREUy1udWxsLW9uLWZpcnN0LWxvYWQnIDpcbiAgICAgICAgICFpbml0aWFsSW5wdXRWYWx1ZSA/ICdpbml0aWFsSW5wdXRWYWx1ZS1udWxsJyA6XG4gICAgICAgICAhKHNxbEV4cHJPYmo/LnBhcnRzPy5sZW5ndGggPiAwKSA/ICduby1zcWxFeHByT2JqLXBhcnRzJyA6XG4gICAgICAgICAncmVmLWNvbmRpdGlvbnMtbm90LW1ldCcpIDogJ2FsbC1jb25kaXRpb25zLW1ldCcsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIGlmIChzaG91bGRTZXRWYWx1ZSkge1xuICAgICAgLy8gRklYIChyMDE4LjExMyk6IFJlbW92ZSB0YWIgc3dpdGNoIGxvZ2ljIC0gU3FsRXhwcmVzc2lvblJ1bnRpbWUgd29ya3MgcmVnYXJkbGVzcyBvZiBhY3RpdmUgdGFiXG4gICAgICAvLyBTZXR0aW5nIHZhbHVlIGluIFJlYWN0IHN0YXRlIGlzIHN1ZmZpY2llbnQ7IG9uQ2hhbmdlIHdpbGwgZmlyZSB3aGVuIGNvbXBvbmVudCBwcm9jZXNzZXMgaXRcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgICBldmVudDogJ2hhc2gtdmFsdWUtc2V0dGluZy1zdGFydCcsXG4gICAgICAgIGNvbmZpZ0lkLFxuICAgICAgICBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgICAgaW5pdGlhbFZhbHVlU2V0UmVmOiBpbml0aWFsVmFsdWVTZXRSZWYuY3VycmVudCxcbiAgICAgICAgdmFsdWVDaGFuZ2VkLFxuICAgICAgICBoYXNoVHJpZ2dlcmVkUmVmQmVmb3JlOiBoYXNoVHJpZ2dlcmVkUmVmLmN1cnJlbnQsXG4gICAgICAgIHNxbEV4cHJPYmpQYXJ0c0xlbmd0aDogc3FsRXhwck9iaj8ucGFydHM/Lmxlbmd0aCxcbiAgICAgICAgYWN0aXZlVGFiLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSC1GSVJTVC1MT0FEJywge1xuICAgICAgICBldmVudDogJ2Zvcm0taGFzaC12YWx1ZS1zZXR0aW5nLXN0YXJ0JyxcbiAgICAgICAgY29uZmlnSWQsXG4gICAgICAgIGluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgICBpbml0aWFsVmFsdWVTZXRSZWY6IGluaXRpYWxWYWx1ZVNldFJlZi5jdXJyZW50LFxuICAgICAgICBsYXN0VmFsdWVTZXRSZWY6IGxhc3RWYWx1ZVNldFJlZi5jdXJyZW50LFxuICAgICAgICB2YWx1ZUNoYW5nZWQsXG4gICAgICAgIGhhc2hUcmlnZ2VyZWRSZWZCZWZvcmU6IGhhc2hUcmlnZ2VyZWRSZWYuY3VycmVudCxcbiAgICAgICAgZGF0YXNvdXJjZVJlYWR5LFxuICAgICAgICBoYXNPdXRwdXREUzogISFvdXRwdXREUyxcbiAgICAgICAgc3FsRXhwck9ialBhcnRzTGVuZ3RoOiBzcWxFeHByT2JqPy5wYXJ0cz8ubGVuZ3RoLFxuICAgICAgICBhY3RpdmVUYWIsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgLy8gU2V0IGhhc2hUcmlnZ2VyZWRSZWYgSU1NRURJQVRFTFkgd2hlbiBzZXR0aW5nIGhhc2ggdmFsdWVcbiAgICAgIC8vIFRoaXMgZW5zdXJlcyBoYW5kbGVTcWxFeHByT2JqQ2hhbmdlIGNhbiBkZXRlY3QgaGFzaC10cmlnZ2VyZWQgY29udmVyc2lvbnNcbiAgICAgIGhhc2hUcmlnZ2VyZWRSZWYuY3VycmVudCA9IHRydWVcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgICAgZXZlbnQ6ICdoYXNoVHJpZ2dlcmVkUmVmLXNldC10cnVlJyxcbiAgICAgICAgY29uZmlnSWQsXG4gICAgICAgIGluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSC1GSVJTVC1MT0FEJywge1xuICAgICAgICBldmVudDogJ2Zvcm0taGFzaFRyaWdnZXJlZFJlZi1zZXQtdHJ1ZScsXG4gICAgICAgIGNvbmZpZ0lkLFxuICAgICAgICBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgICAgaGFzaFRyaWdnZXJlZFJlZkFmdGVyOiBoYXNoVHJpZ2dlcmVkUmVmLmN1cnJlbnQsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgY29uc3QgZmlyc3RQYXJ0ID0gc3FsRXhwck9iai5wYXJ0c1swXVxuICAgICAgLy8gQ2hlY2sgaWYgdGhlIGZpcnN0IHBhcnQgaXMgYSBTSU5HTEUgY2xhdXNlIChub3QgYSBTcWxDbGF1c2VTZXQpXG4gICAgICBpZiAoZmlyc3RQYXJ0ICYmICd0eXBlJyBpbiBmaXJzdFBhcnQgJiYgZmlyc3RQYXJ0LnR5cGUgPT09ICdTSU5HTEUnICYmICd2YWx1ZU9wdGlvbnMnIGluIGZpcnN0UGFydCkge1xuICAgICAgICAvLyBVcGRhdGUgdGhlIGV4cHJlc3Npb24gb2JqZWN0IHdpdGggdGhlIGluaXRpYWwgdmFsdWVcbiAgICAgICAgY29uc3QgdXBkYXRlZCA9IHNxbEV4cHJPYmouc2V0SW4oWydwYXJ0cycsICcwJywgJ3ZhbHVlT3B0aW9ucycsICd2YWx1ZSddLCBpbml0aWFsSW5wdXRWYWx1ZSlcbiAgICAgICAgXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgICAgICBldmVudDogJ2hhc2gtdmFsdWUtc2V0dGluZy1yZWFjdC1zdGF0ZScsXG4gICAgICAgICAgY29uZmlnSWQsXG4gICAgICAgICAgaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICAgICAgcHJldmlvdXNTdGF0ZVZhbHVlOiBhdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqPy5wYXJ0cz8uWzBdPy52YWx1ZU9wdGlvbnM/LnZhbHVlLFxuICAgICAgICAgIG5ld1N0YXRlVmFsdWU6IHVwZGF0ZWQ/LnBhcnRzPy5bMF0/LnZhbHVlT3B0aW9ucz8udmFsdWUsXG4gICAgICAgICAgd2lsbENhbGxTZXRTdGF0ZTogdHJ1ZSxcbiAgICAgICAgICBub3RlOiAnU2V0dGluZyB2YWx1ZSBpbiBSZWFjdCBzdGF0ZSAtIFNxbEV4cHJlc3Npb25SdW50aW1lIHNob3VsZCByZWNlaXZlIHZpYSBleHByZXNzaW9uIHByb3AnXG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgICAgICBzZXRBdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqKHVwZGF0ZWQpXG4gICAgICAgIC8vIFVwZGF0ZSByZWYgaW1tZWRpYXRlbHkgZm9yIHN5bmNocm9ub3VzIGFjY2VzcyBpbiBhcHBseVF1ZXJ5XG4gICAgICAgIGF0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmpSZWYuY3VycmVudCA9IHVwZGF0ZWRcbiAgICAgICAgXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgICAgICBldmVudDogJ2hhc2gtdmFsdWUtcmVmLXVwZGF0ZWQnLFxuICAgICAgICAgIGNvbmZpZ0lkLFxuICAgICAgICAgIGluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgICAgIHJlZlZhbHVlQWZ0ZXJVcGRhdGU6IGF0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmpSZWYuY3VycmVudD8ucGFydHM/LlswXT8udmFsdWVPcHRpb25zPy52YWx1ZSxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfSlcbiAgICAgICAgLy8gVXBkYXRlIGNsYXVzZSBudW1iZXIgZm9yIHRoZSB1cGRhdGVkIGV4cHJlc3Npb25cbiAgICAgICAgc2hvd0NsYXVzZU51bWJlci5jdXJyZW50ID0gZ2V0U2hvd25DbGF1c2VOdW1iZXJCeUV4cHJlc3Npb24odXBkYXRlZClcbiAgICAgICAgXG4gICAgICAgIC8vIEZJWCAocjAxOC4xMTMpOiBTZXQgdHJhY2tpbmcgcmVmcyBpbW1lZGlhdGVseSBhZnRlciBzZXR0aW5nIFJlYWN0IHN0YXRlXG4gICAgICAgIC8vIFRoZXNlIHJlZnMgcHJldmVudCByZS1zZXR0aW5nIHRoZSBzYW1lIHZhbHVlIGFuZCB0cmFjayB3aGF0IHdlJ3ZlIHByb2Nlc3NlZFxuICAgICAgICBpbml0aWFsVmFsdWVTZXRSZWYuY3VycmVudCA9IGNvbmZpZ0lkXG4gICAgICAgIGxhc3RWYWx1ZVNldFJlZi5jdXJyZW50ID0gaW5pdGlhbElucHV0VmFsdWVcbiAgICAgICAgXG4gICAgICAgIC8vIEZJWCAocjAxOC4xMjMpOiBNdXRhdGlvbk9ic2VydmVyIHdpbGwgd2F0Y2ggZm9yIGlucHV0IGZpZWxkIGFuZCBwb3B1bGF0ZSBpdCB1c2luZyBmb2N1cy9ibHVyIGN5Y2xlXG4gICAgICAgIC8vIFRoZSBmbG93IGlzOiBzZXRTdGF0ZSDihpIgU3FsRXhwcmVzc2lvblJ1bnRpbWUgcmVtb3VudHMg4oaSIE11dGF0aW9uT2JzZXJ2ZXIgZGV0ZWN0cyBpbnB1dFt0eXBlPVwidGV4dFwiXSDihpIgXG4gICAgICAgIC8vIGZvY3VzIOKGkiBzZXQgdmFsdWUg4oaSIGRpc3BhdGNoIGV2ZW50cyDihpIgYmx1ciDihpIgU3FsRXhwcmVzc2lvblJ1bnRpbWUub25DaGFuZ2UgZmlyZXMgbmF0dXJhbGx5IOKGklxuICAgICAgICAvLyBoYW5kbGVTcWxFeHByT2JqQ2hhbmdlIGRldGVjdHMgc3RyaW5n4oaSYXJyYXkgY29udmVyc2lvbiDihpIgZmlyZXMgUVVFUllTSU1QTEVfSEFTSF9WQUxVRV9DT05WRVJURURfRVZFTlQg4oaSXG4gICAgICAgIC8vIHF1ZXJ5LXRhc2sudHN4IGV2ZW50IGxpc3RlbmVyIGV4ZWN1dGVzIHF1ZXJ5IChldmVudC1kcml2ZW4gcGF0dGVybiBmcm9tIHIwMTguMTA4KVxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICAgICAgZXZlbnQ6ICdoYXNoLXZhbHVlLXN0YXRlLXNldC1hd2FpdGluZy1kb20tcG9wdWxhdGlvbicsXG4gICAgICAgICAgY29uZmlnSWQsXG4gICAgICAgICAgaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICAgICAgaGFzaFRyaWdnZXJlZFJlZjogaGFzaFRyaWdnZXJlZFJlZi5jdXJyZW50LFxuICAgICAgICAgIG5vdGU6ICdWYWx1ZSBzZXQgaW4gUmVhY3Qgc3RhdGUgLSBNdXRhdGlvbk9ic2VydmVyIHdpbGwgcG9wdWxhdGUgaW5wdXRbdHlwZT1cInRleHRcIl0gdXNpbmcgZm9jdXMvYmx1ciBjeWNsZScsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIFRoZSBzcWxFeHByT2JqLnBhcnRzIG1heSBjaGFuZ2UgYnV0IHRoZSBkaXNwbGF5U1FMIGlzIHRoZSBzYW1lXG4gICAgaWYgKCFzcWxFeHByT2JqKSB7XG4gICAgICBzaG93Q2xhdXNlTnVtYmVyLmN1cnJlbnQgPSAwXG4gICAgICBzZXRBdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqKG51bGwpXG4gICAgICBhdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqUmVmLmN1cnJlbnQgPSBudWxsXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgICAgZXZlbnQ6ICdzcWxFeHByT2JqLWNsZWFyZWQnLFxuICAgICAgICBjb25maWdJZCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICBzaG93Q2xhdXNlTnVtYmVyLmN1cnJlbnQgPSBnZXRTaG93bkNsYXVzZU51bWJlckJ5RXhwcmVzc2lvbihzcWxFeHByT2JqKVxuICAgICAgXG4gICAgICAvLyBDaGVjayBpZiB3ZSBhbHJlYWR5IGhhdmUgYSB2YWx1ZSBzZXQgKGZyb20gdXNlciBpbnB1dCBvciBoYXNoKVxuICAgICAgY29uc3QgY3VycmVudFZhbHVlID0gYXR0cmlidXRlRmlsdGVyU3FsRXhwck9iaj8ucGFydHM/LlswXT8udmFsdWVPcHRpb25zPy52YWx1ZVxuICAgICAgY29uc3QgcmVmVmFsdWUgPSBhdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqUmVmLmN1cnJlbnQ/LnBhcnRzPy5bMF0/LnZhbHVlT3B0aW9ucz8udmFsdWVcbiAgICAgIGNvbnN0IGJhc2VWYWx1ZSA9IHNxbEV4cHJPYmo/LnBhcnRzPy5bMF0/LnZhbHVlT3B0aW9ucz8udmFsdWVcbiAgICAgIGNvbnN0IGhhc1ZhbHVlU2V0ID0gY3VycmVudFZhbHVlICE9PSB1bmRlZmluZWQgJiYgY3VycmVudFZhbHVlICE9PSBudWxsICYmIGN1cnJlbnRWYWx1ZSAhPT0gJydcbiAgICAgIGNvbnN0IGhhc1JlZlZhbHVlID0gcmVmVmFsdWUgIT09IHVuZGVmaW5lZCAmJiByZWZWYWx1ZSAhPT0gbnVsbCAmJiByZWZWYWx1ZSAhPT0gJydcbiAgICAgIGNvbnN0IGNvbmZpZ0lkQ2hhbmdlZCA9IHByZXZpb3VzQ29uZmlnSWRSZWYuY3VycmVudCAhPT0gbnVsbCAmJiBwcmV2aW91c0NvbmZpZ0lkUmVmLmN1cnJlbnQgIT09IGNvbmZpZ0lkXG4gICAgICBjb25zdCBoYXNoV2FzUHJvY2Vzc2VkID0gaW5pdGlhbFZhbHVlU2V0UmVmLmN1cnJlbnQgPT09IGNvbmZpZ0lkXG4gICAgICBcbiAgICAgIC8vIEZJWCAocjAxOC4xMTUpOiBQcmVzZXJ2ZSBoYXNoLXNldCB2YWx1ZXMgZXZlbiBhZnRlciBjbGVhbnVwIGNsZWFycyBpbml0aWFsSW5wdXRWYWx1ZVxuICAgICAgLy8gQ2hlY2sgYm90aCBzdGF0ZSBBTkQgcmVmIGZvciB2YWx1ZSBwcmVzZW5jZSAocmVmIHVwZGF0ZXMgYmVmb3JlIHN0YXRlIGluIHNhbWUgcmVuZGVyKVxuICAgICAgLy8gT25seSB1cGRhdGUgaWY6XG4gICAgICAvLyAxLiBXZSBoYXZlbid0IHNldCBhIHZhbHVlIHlldCAobm8gdmFsdWUgaW4gY3VycmVudCBzdGF0ZSBPUiByZWYpLCBBTkRcbiAgICAgIC8vIDIuIFdlIGhhdmVuJ3QgYWxyZWFkeSBwcm9jZXNzZWQgYSBoYXNoIGZvciB0aGlzIGNvbmZpZ0lkLCBPUlxuICAgICAgLy8gMy4gY29uZmlnSWQgY2hhbmdlZCAoc3dpdGNoaW5nIHF1ZXJpZXMgLSByZXNldCB0byBiYXNlIHNxbEV4cHJPYmopXG4gICAgICAvLyBPdGhlcndpc2UsIHByZXNlcnZlIHRoZSBleGlzdGluZyB2YWx1ZSBhcyBhIHZpc3VhbCByZWNvcmRcbiAgICAgIGlmICgoIWhhc1ZhbHVlU2V0ICYmICFoYXNSZWZWYWx1ZSAmJiAhaGFzaFdhc1Byb2Nlc3NlZCkgfHwgY29uZmlnSWRDaGFuZ2VkKSB7XG4gICAgICAgIHNldEF0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmooc3FsRXhwck9iailcbiAgICAgICAgYXR0cmlidXRlRmlsdGVyU3FsRXhwck9ialJlZi5jdXJyZW50ID0gc3FsRXhwck9ialxuICAgICAgICBcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgICAgIGV2ZW50OiAnc3FsRXhwck9iai11cGRhdGVkLXJlZicsXG4gICAgICAgICAgY29uZmlnSWQsXG4gICAgICAgICAgcHJldmlvdXNDb25maWdJZDogcHJldmlvdXNDb25maWdJZFJlZi5jdXJyZW50LFxuICAgICAgICAgIGluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgICAgIGluaXRpYWxWYWx1ZVNldFJlZjogaW5pdGlhbFZhbHVlU2V0UmVmLmN1cnJlbnQsXG4gICAgICAgICAgaGFzVmFsdWVTZXQsXG4gICAgICAgICAgaGFzUmVmVmFsdWUsXG4gICAgICAgICAgaGFzaFdhc1Byb2Nlc3NlZCxcbiAgICAgICAgICBjb25maWdJZENoYW5nZWQsXG4gICAgICAgICAgcHJldmlvdXNWYWx1ZTogY3VycmVudFZhbHVlLFxuICAgICAgICAgIHJlZlZhbHVlOiByZWZWYWx1ZSxcbiAgICAgICAgICBuZXdWYWx1ZTogYmFzZVZhbHVlLFxuICAgICAgICAgIHJlYXNvbjogY29uZmlnSWRDaGFuZ2VkID8gJ2NvbmZpZ0lkLWNoYW5nZWQtcmVzZXR0aW5nJyA6ICduby12YWx1ZS1zZXQtaW5pdGlhbGl6aW5nJyxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgICAgICBldmVudDogJ3NxbEV4cHJPYmotc2tpcHBlZC1yZWYtdXBkYXRlJyxcbiAgICAgICAgICBjb25maWdJZCxcbiAgICAgICAgICBwcmV2aW91c0NvbmZpZ0lkOiBwcmV2aW91c0NvbmZpZ0lkUmVmLmN1cnJlbnQsXG4gICAgICAgICAgaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICAgICAgaW5pdGlhbFZhbHVlU2V0UmVmOiBpbml0aWFsVmFsdWVTZXRSZWYuY3VycmVudCxcbiAgICAgICAgICBoYXNWYWx1ZVNldCxcbiAgICAgICAgICBoYXNSZWZWYWx1ZSxcbiAgICAgICAgICBoYXNoV2FzUHJvY2Vzc2VkLFxuICAgICAgICAgIGN1cnJlbnRWYWx1ZSxcbiAgICAgICAgICByZWZWYWx1ZSxcbiAgICAgICAgICBiYXNlVmFsdWUsXG4gICAgICAgICAgcmVhc29uOiBoYXNoV2FzUHJvY2Vzc2VkID8gJ2hhc2gtdmFsdWUtYWxyZWFkeS1wcm9jZXNzZWQtcHJlc2VydmluZycgOiBcbiAgICAgICAgICAgICAgICAgIGhhc1JlZlZhbHVlID8gJ3JlZi12YWx1ZS1hbHJlYWR5LXNldC1wcmVzZXJ2aW5nJyA6XG4gICAgICAgICAgICAgICAgICAndmFsdWUtYWxyZWFkeS1zZXQtcHJlc2VydmluZy1hcy12aXN1YWwtcmVjb3JkJyxcbiAgICAgICAgICBub3RlOiAnU2tpcHBpbmcgdXBkYXRlIHRvIHByZXNlcnZlIHVzZXItZW50ZXJlZCBvciBoYXNoLXNldCB2YWx1ZSBhcyB2aXN1YWwgcmVjb3JkJyxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gVXBkYXRlIHByZXZpb3VzQ29uZmlnSWRSZWYgZm9yIG5leHQgY29tcGFyaXNvblxuICAgICAgcHJldmlvdXNDb25maWdJZFJlZi5jdXJyZW50ID0gY29uZmlnSWRcbiAgICB9XG4gIH0sIFtzcWxFeHByT2JqLCBpbml0aWFsSW5wdXRWYWx1ZSwgZGF0YXNvdXJjZVJlYWR5LCBvdXRwdXREUywgY29uZmlnSWQsIHdpZGdldElkLCBvbkhhc2hQYXJhbWV0ZXJVc2VkLCBxdWVyeUl0ZW1TaG9ydElkLCBhY3RpdmVUYWIsIG9uVGFiQ2hhbmdlXSlcbiAgXG4gIC8vIEtlZXAgcmVmIGluIHN5bmMgd2l0aCBzdGF0ZSBjaGFuZ2VzIChmb3IgU3FsRXhwcmVzc2lvblJ1bnRpbWUgdXBkYXRlcylcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBhdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqUmVmLmN1cnJlbnQgPSBhdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqXG4gICAgXG4gICAgLy8gTG9nIHdoZW4gc3RhdGUgY2hhbmdlcyAtIHRoaXMgaXMgd2hhdCBTcWxFeHByZXNzaW9uUnVudGltZSByZWNlaXZlcyB2aWEgZXhwcmVzc2lvbiBwcm9wXG4gICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgZXZlbnQ6ICdhdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqLXN0YXRlLWNoYW5nZWQnLFxuICAgICAgY29uZmlnSWQsXG4gICAgICBzdGF0ZVZhbHVlOiBhdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqPy5wYXJ0cz8uWzBdPy52YWx1ZU9wdGlvbnM/LnZhbHVlLFxuICAgICAgc3RhdGVWYWx1ZVR5cGU6IHR5cGVvZiBhdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqPy5wYXJ0cz8uWzBdPy52YWx1ZU9wdGlvbnM/LnZhbHVlLFxuICAgICAgaXNBcnJheTogQXJyYXkuaXNBcnJheShhdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqPy5wYXJ0cz8uWzBdPy52YWx1ZU9wdGlvbnM/LnZhbHVlKSxcbiAgICAgIGhhc2hUcmlnZ2VyZWRSZWY6IGhhc2hUcmlnZ2VyZWRSZWYuY3VycmVudCxcbiAgICAgIGluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgbm90ZTogJ1JlYWN0IHN0YXRlIGNoYW5nZWQgLSBTcWxFeHByZXNzaW9uUnVudGltZSBzaG91bGQgcmVjZWl2ZSB0aGlzIHZpYSBleHByZXNzaW9uIHByb3AnXG4gICAgfSlcbiAgfSwgW2F0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmosIGNvbmZpZ0lkLCBpbml0aWFsSW5wdXRWYWx1ZV0pXG5cbiAgY29uc3QgYXBwbHlRdWVyeSA9IFJlYWN0LnVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gtRklSU1QtTE9BRCcsIHtcbiAgICAgIGV2ZW50OiAnZm9ybS1hcHBseVF1ZXJ5LUVYRUNVVElORycsXG4gICAgICBjb25maWdJZCxcbiAgICAgIGluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgaGFzaFRyaWdnZXJlZFJlZjogaGFzaFRyaWdnZXJlZFJlZi5jdXJyZW50LFxuICAgICAgcnVudGltZVpvb21Ub1NlbGVjdGVkLFxuICAgICAgd2lsbFpvb206IGhhc2hUcmlnZ2VyZWRSZWYuY3VycmVudCA/IHRydWUgOiBydW50aW1lWm9vbVRvU2VsZWN0ZWQsXG4gICAgICBjdXJyZW50VmFsdWU6IGF0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmpSZWYuY3VycmVudD8ucGFydHM/LlswXT8udmFsdWVPcHRpb25zPy52YWx1ZSxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgLy8gV2hlbiB0aGUgJ2FwcGx5JyBidXR0b24gaXMgY2xpY2tlZCwgaXQgc2hvdWxkIGNsZWFyIHRoZSBzZWxlY3Rpb24gZnJvbSB0aGUgcHJldmlvdXMgcmVzdWx0IGxpc3RcbiAgICBjbGVhclNlbGVjdGlvbkluRGF0YVNvdXJjZXMob3V0cHV0RFMpXG5cbiAgICBpZiAob3V0cHV0RFMpIHtcbiAgICAgIGNvbnN0IG9yaWdpbkRzOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlID0gb3V0cHV0RFMuZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKVswXSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gICAgICBpZiAob3JpZ2luRHMpIHtcbiAgICAgICAgY29uc3QgZGF0YVZpZXdDb25maWcgPSBvcmlnaW5Ecy5nZXREYXRhVmlld0NvbmZpZygpXG4gICAgICAgIGNvbnN0IG1heGltdW0gPSBkYXRhVmlld0NvbmZpZz8ubWF4aW11bVxuICAgICAgICBpZiAobWF4aW11bSAhPSBudWxsICYmIG1heGltdW0gPiAwKSB7XG4gICAgICAgICAgRGF0YVNvdXJjZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS51cGRhdGVEYXRhU291cmNlQnlEYXRhU291cmNlSnNvbihcbiAgICAgICAgICAgIG91dHB1dERTLFxuICAgICAgICAgICAgb3V0cHV0RFMuZ2V0RGF0YVNvdXJjZUpzb24oKS5zZXRJbihbJ3F1ZXJ5JywgJ21heGltdW0nXSwgbWF4aW11bSlcbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBGb3JjZSB6b29tIGZvciBoYXNoLXRyaWdnZXJlZCBxdWVyaWVzLCBvdGhlcndpc2UgdXNlIHJ1bnRpbWUgcHJlZmVyZW5jZVxuICAgIGNvbnN0IHpvb21Ub1VzZSA9IGhhc2hUcmlnZ2VyZWRSZWYuY3VycmVudCA/IHRydWUgOiBydW50aW1lWm9vbVRvU2VsZWN0ZWRcblxuICAgIC8vIFNhbml0aXplIHVzZXIgaW5wdXQgYmVmb3JlIHN1Ym1pc3Npb25cbiAgICAvLyBSZWFkIGZyb20gcmVmIHRvIGdldCB0aGUgbGF0ZXN0IHZhbHVlIHN5bmNocm9ub3VzbHkgKGluY2x1ZGluZyBoYXNoIHZhbHVlcylcbiAgICBjb25zdCBjdXJyZW50U3FsRXhwck9iaiA9IGF0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmpSZWYuY3VycmVudFxuICAgIGNvbnN0IGN1cnJlbnRSZWZWYWx1ZSA9IGN1cnJlbnRTcWxFeHByT2JqPy5wYXJ0cz8uWzBdPy52YWx1ZU9wdGlvbnM/LnZhbHVlXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgZXZlbnQ6ICdhcHBseVF1ZXJ5LWV4ZWN1dGluZycsXG4gICAgICBjb25maWdJZCxcbiAgICAgIGluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgY3VycmVudFJlZlZhbHVlLFxuICAgICAgcmVmSGFzVmFsdWU6ICEhY3VycmVudFJlZlZhbHVlLFxuICAgICAgaGFzaFRyaWdnZXJlZDogaGFzaFRyaWdnZXJlZFJlZi5jdXJyZW50LFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICBjb25zdCBzYW5pdGl6ZWRTcWxFeHByT2JqID0gc2FuaXRpemVTcWxFeHByZXNzaW9uKGN1cnJlbnRTcWxFeHByT2JqKVxuICAgIFxuICAgIC8vIExvZyB0aGUgc2FuaXRpemVkIGV4cHJlc3Npb24gdG8gc2VlIGlmIHZhbHVlIHdhcyBwcmVzZXJ2ZWRcbiAgICBjb25zdCBzYW5pdGl6ZWRWYWx1ZSA9IHNhbml0aXplZFNxbEV4cHJPYmo/LnBhcnRzPy5bMF0/LnZhbHVlT3B0aW9ucz8udmFsdWVcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICBldmVudDogJ2FwcGx5UXVlcnktYWZ0ZXItc2FuaXRpemUnLFxuICAgICAgY29uZmlnSWQsXG4gICAgICBjdXJyZW50UmVmVmFsdWUsXG4gICAgICBzYW5pdGl6ZWRWYWx1ZSxcbiAgICAgIHZhbHVlc01hdGNoOiBjdXJyZW50UmVmVmFsdWUgPT09IHNhbml0aXplZFZhbHVlLFxuICAgICAgc2FuaXRpemVkVmFsdWVUeXBlOiB0eXBlb2Ygc2FuaXRpemVkVmFsdWUsXG4gICAgICBjdXJyZW50UmVmVmFsdWVUeXBlOiB0eXBlb2YgY3VycmVudFJlZlZhbHVlLFxuICAgICAgaXNBcnJheUN1cnJlbnQ6IEFycmF5LmlzQXJyYXkoY3VycmVudFJlZlZhbHVlKSxcbiAgICAgIGlzQXJyYXlTYW5pdGl6ZWQ6IEFycmF5LmlzQXJyYXkoc2FuaXRpemVkVmFsdWUpLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcblxuICAgIGxldCByZWwgPSBzcGF0aWFsUmVsYXRpb25SZWYuY3VycmVudFxuICAgIGlmIChzcGF0aWFsRmlsdGVyT2JqUmVmLmN1cnJlbnQ/Lmdlb21ldHJ5ICYmIHJlbCA9PSBudWxsKSB7XG4gICAgICByZWwgPSBTcGF0aWFsUmVsYXRpb24uSW50ZXJzZWN0XG4gICAgfVxuICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSC1GSVJTVC1MT0FEJywge1xuICAgICAgZXZlbnQ6ICdmb3JtLWFib3V0LXRvLWNhbGwtb25Gb3JtU3VibWl0JyxcbiAgICAgIGNvbmZpZ0lkLFxuICAgICAgaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICBzYW5pdGl6ZWRWYWx1ZSxcbiAgICAgIGhhc1NwYXRpYWxHZW9tZXRyeUFycmF5OiBBcnJheS5pc0FycmF5KHNwYXRpYWxGaWx0ZXJPYmpSZWYuY3VycmVudD8uZ2VvbWV0cnkpLFxuICAgICAgc3BhdGlhbEdlb21ldHJ5Q291bnQ6IEFycmF5LmlzQXJyYXkoc3BhdGlhbEZpbHRlck9ialJlZi5jdXJyZW50Py5nZW9tZXRyeSkgPyBzcGF0aWFsRmlsdGVyT2JqUmVmLmN1cnJlbnQuZ2VvbWV0cnkubGVuZ3RoIDogMCxcbiAgICAgIHpvb21Ub1VzZSxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgaWYgKEFycmF5LmlzQXJyYXkoc3BhdGlhbEZpbHRlck9ialJlZi5jdXJyZW50Py5nZW9tZXRyeSkpIHtcbiAgICAgIGlmIChzcGF0aWFsRmlsdGVyT2JqUmVmLmN1cnJlbnQuZ2VvbWV0cnkubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSC1GSVJTVC1MT0FEJywge1xuICAgICAgICAgIGV2ZW50OiAnZm9ybS1jYWxsaW5nLW9uRm9ybVN1Ym1pdC1zaW5nbGUtZ2VvbWV0cnknLFxuICAgICAgICAgIGNvbmZpZ0lkLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9KVxuICAgICAgICBvbkZvcm1TdWJtaXQoc2FuaXRpemVkU3FsRXhwck9iaiwgeyAuLi5zcGF0aWFsRmlsdGVyT2JqUmVmLmN1cnJlbnQsIGdlb21ldHJ5OiBzcGF0aWFsRmlsdGVyT2JqUmVmLmN1cnJlbnQuZ2VvbWV0cnlbMF0sIHJlbGF0aW9uOiByZWwsIGJ1ZmZlcjogYnVmZmVyUmVmLmN1cnJlbnQgfSwgem9vbVRvVXNlKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNILUZJUlNULUxPQUQnLCB7XG4gICAgICAgICAgZXZlbnQ6ICdmb3JtLWNhbGxpbmctb25Gb3JtU3VibWl0LW11bHRpcGxlLWdlb21ldHJ5LXVuaW9uJyxcbiAgICAgICAgICBjb25maWdJZCxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfSlcbiAgICAgICAgbG9hZEFyY0dJU0pTQVBJTW9kdWxlcyhbXG4gICAgICAgICAgJ2VzcmkvZ2VvbWV0cnkvb3BlcmF0b3JzL3VuaW9uT3BlcmF0b3InXG4gICAgICAgIF0pLnRoZW4obW9kdWxlcyA9PiB7XG4gICAgICAgICAgY29uc3Qgb3BlcmF0b3I6ICh0eXBlb2YgX19lc3JpLnVuaW9uT3BlcmF0b3IpID0gbW9kdWxlc1swXVxuICAgICAgICAgIGNvbnN0IGdlb21ldHJ5ID0gb3BlcmF0b3IuZXhlY3V0ZU1hbnkoc3BhdGlhbEZpbHRlck9ialJlZi5jdXJyZW50Lmdlb21ldHJ5KVxuICAgICAgICAgIG9uRm9ybVN1Ym1pdChzYW5pdGl6ZWRTcWxFeHByT2JqLCB7IC4uLnNwYXRpYWxGaWx0ZXJPYmpSZWYuY3VycmVudCwgZ2VvbWV0cnksIHJlbGF0aW9uOiByZWwsIGJ1ZmZlcjogYnVmZmVyUmVmLmN1cnJlbnQgfSwgem9vbVRvVXNlKVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gtRklSU1QtTE9BRCcsIHtcbiAgICAgICAgZXZlbnQ6ICdmb3JtLWNhbGxpbmctb25Gb3JtU3VibWl0LW5vLXNwYXRpYWwtZ2VvbWV0cnknLFxuICAgICAgICBjb25maWdJZCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgb25Gb3JtU3VibWl0KHNhbml0aXplZFNxbEV4cHJPYmosIHsgLi4uc3BhdGlhbEZpbHRlck9ialJlZi5jdXJyZW50LCByZWxhdGlvbjogcmVsLCBidWZmZXI6IGJ1ZmZlclJlZi5jdXJyZW50IH0sIHpvb21Ub1VzZSlcbiAgICB9XG4gICAgXG4gICAgLy8gUmVzZXQgaGFzaFRyaWdnZXJlZFJlZiBhZnRlciB1c2VcbiAgICBoYXNoVHJpZ2dlcmVkUmVmLmN1cnJlbnQgPSBmYWxzZVxuICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgIGV2ZW50OiAnaGFzaFRyaWdnZXJlZFJlZi1yZXNldC1hZnRlci1hcHBseScsXG4gICAgICBjb25maWdJZCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gIH0sIFtvbkZvcm1TdWJtaXQsIG91dHB1dERTLCBydW50aW1lWm9vbVRvU2VsZWN0ZWRdKVxuXG4gIGNvbnN0IGhhbmRsZUtleURvd24gPSBSZWFjdC51c2VDYWxsYmFjaygoZXZlbnQ6IFJlYWN0LktleWJvYXJkRXZlbnQpID0+IHtcbiAgICBpZiAoZXZlbnQua2V5ID09PSAnRW50ZXInICYmIGRhdGFzb3VyY2VSZWFkeSAmJiBpc0lucHV0VmFsaWQpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAgIFxuICAgICAgLy8gRmluZCB0aGUgYWN0aXZlIGlucHV0IGZpZWxkXG4gICAgICBjb25zdCBhY3RpdmVFbGVtZW50ID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudCBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgICBpZiAoYWN0aXZlRWxlbWVudCAmJiBhY3RpdmVFbGVtZW50LnRhZ05hbWUgPT09ICdJTlBVVCcgJiYgYWN0aXZlRWxlbWVudC50eXBlID09PSAndGV4dCcpIHtcbiAgICAgICAgLy8gRm9yY2UgYmx1ciB0byB0cmlnZ2VyIFNxbEV4cHJlc3Npb25SdW50aW1lJ3MgaW5wdXQgcHJvY2Vzc2luZ1xuICAgICAgICBhY3RpdmVFbGVtZW50LmJsdXIoKVxuICAgICAgICBcbiAgICAgICAgLy8gV2FpdCBmb3IgYmx1ciBwcm9jZXNzaW5nLCB0aGVuIGNsaWNrIHRoZSBBcHBseSBidXR0b25cbiAgICAgICAgLy8gVGhpcyB1c2VzIHRoZSBleGFjdCBzYW1lIGNvZGUgcGF0aCBhcyBjbGlja2luZyB0aGUgYnV0dG9uIG1hbnVhbGx5XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIGlmIChhcHBseUJ1dHRvblJlZi5jdXJyZW50ICYmICFhcHBseUJ1dHRvblJlZi5jdXJyZW50LmRpc2FibGVkKSB7XG4gICAgICAgICAgICBhcHBseUJ1dHRvblJlZi5jdXJyZW50LmNsaWNrKClcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXBwbHlRdWVyeSgpXG4gICAgICAgICAgfVxuICAgICAgICB9LCAyMDApXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBOb3QgaW4gYW4gaW5wdXQgZmllbGQsIHNhZmUgdG8gYXBwbHkgaW1tZWRpYXRlbHlcbiAgICAgICAgaWYgKGFwcGx5QnV0dG9uUmVmLmN1cnJlbnQgJiYgIWFwcGx5QnV0dG9uUmVmLmN1cnJlbnQuZGlzYWJsZWQpIHtcbiAgICAgICAgICBhcHBseUJ1dHRvblJlZi5jdXJyZW50LmNsaWNrKClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhcHBseVF1ZXJ5KClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSwgW2RhdGFzb3VyY2VSZWFkeSwgYXBwbHlRdWVyeSwgaXNJbnB1dFZhbGlkXSlcblxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghZGF0YUFjdGlvbkZpbHRlcikgcmV0dXJuXG4gICAgaWYgKGRhdGFBY3Rpb25GaWx0ZXIud2hlcmUgIT09IHByZURhdGFBY3Rpb25GaWx0ZXI/LndoZXJlKSB7XG4gICAgICAvLyBMb2cgc3RhdGUgd2hlbiBkYXRhQWN0aW9uRmlsdGVyIGNoYW5nZXMgKHF1ZXJ5IHN3aXRjaClcbiAgICAgIGNvbnN0IGN1cnJlbnRSZWZWYWx1ZSA9IGF0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmpSZWYuY3VycmVudD8ucGFydHM/LlswXT8udmFsdWVPcHRpb25zPy52YWx1ZVxuICAgICAgY29uc3QgaGFzUGVuZGluZ0hhc2hWYWx1ZSA9IGluaXRpYWxJbnB1dFZhbHVlICYmIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChpbml0aWFsVmFsdWVTZXRSZWYuY3VycmVudCAhPT0gY29uZmlnSWQgfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRSZWZWYWx1ZSAhPT0gaW5pdGlhbElucHV0VmFsdWUpXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgICAgZXZlbnQ6ICdkYXRhQWN0aW9uRmlsdGVyLWNoYW5nZWQtYXV0by10cmlnZ2VyJyxcbiAgICAgICAgY29uZmlnSWQsXG4gICAgICAgIHByZXZpb3VzV2hlcmU6IHByZURhdGFBY3Rpb25GaWx0ZXI/LndoZXJlLFxuICAgICAgICBuZXdXaGVyZTogZGF0YUFjdGlvbkZpbHRlci53aGVyZSxcbiAgICAgICAgaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICAgIGluaXRpYWxWYWx1ZVNldFJlZjogaW5pdGlhbFZhbHVlU2V0UmVmLmN1cnJlbnQsXG4gICAgICAgIGN1cnJlbnRSZWZWYWx1ZSxcbiAgICAgICAgaGFzUGVuZGluZ0hhc2hWYWx1ZSxcbiAgICAgICAgd2lsbENhbGxBcHBseVF1ZXJ5OiAhaGFzUGVuZGluZ0hhc2hWYWx1ZSxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgXG4gICAgICBhcHBseVF1ZXJ5KClcbiAgICB9XG4gIH0sIFtkYXRhQWN0aW9uRmlsdGVyLCBwcmVEYXRhQWN0aW9uRmlsdGVyPy53aGVyZSwgYXBwbHlRdWVyeSwgaW5pdGlhbElucHV0VmFsdWUsIGNvbmZpZ0lkXSlcblxuICBjb25zdCByZXNldFF1ZXJ5ID0gUmVhY3QudXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIC8vIDEuIHJlc2V0IGF0dHJpYnV0ZSBmaWx0ZXJcbiAgICBzaG93Q2xhdXNlTnVtYmVyLmN1cnJlbnQgPSBnZXRTaG93bkNsYXVzZU51bWJlckJ5RXhwcmVzc2lvbihzcWxFeHByT2JqKVxuICAgIHNldEF0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmooc3FsRXhwck9iailcbiAgICAvLyAyLiByZXNldCBzcGF0aWFsIGZpbHRlclxuICAgIHNldFJlc2V0U3ltYm9sKFN5bWJvbCgpKVxuICB9LCBbc3FsRXhwck9ial0pXG5cbiAgY29uc3QgaGFuZGxlU3FsRXhwck9iakNoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKChzcWxPYmo6IElNU3FsRXhwcmVzc2lvbikgPT4ge1xuICAgIC8vIExPRyBBVCBUSEUgVkVSWSBTVEFSVFxuICAgIGNvbnN0IHNxbE9ialZhbHVlID0gc3FsT2JqPy5wYXJ0cz8uWzBdPy52YWx1ZU9wdGlvbnM/LnZhbHVlXG4gICAgY29uc3QgcHJldmlvdXNSZWZWYWx1ZSA9IGF0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmpSZWYuY3VycmVudD8ucGFydHM/LlswXT8udmFsdWVPcHRpb25zPy52YWx1ZVxuICAgIGNvbnN0IHByZXZpb3VzU3RhdGVWYWx1ZSA9IGF0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmo/LnBhcnRzPy5bMF0/LnZhbHVlT3B0aW9ucz8udmFsdWVcbiAgICBcbiAgICAvLyBDaGVjayBpZiB0aGlzIGlzIGZyb20gdXNlciB0eXBpbmcgb3IgcHJvcCBjaGFuZ2VcbiAgICBjb25zdCBpc0Zyb21Vc2VyVHlwaW5nID0gdHlwZW9mIHByZXZpb3VzUmVmVmFsdWUgPT09ICdzdHJpbmcnICYmIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlb2Ygc3FsT2JqVmFsdWUgPT09ICdvYmplY3QnICYmIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBcnJheS5pc0FycmF5KHNxbE9ialZhbHVlKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcWxPYmpWYWx1ZVswXT8udmFsdWUgPT09IHByZXZpb3VzUmVmVmFsdWVcbiAgICBjb25zdCBpc0Zyb21Qcm9wQ2hhbmdlID0gSlNPTi5zdHJpbmdpZnkocHJldmlvdXNTdGF0ZVZhbHVlKSA9PT0gSlNPTi5zdHJpbmdpZnkoc3FsT2JqVmFsdWUpXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgZXZlbnQ6ICdoYW5kbGVTcWxFeHByT2JqQ2hhbmdlLWNhbGxlZCcsXG4gICAgICBjb25maWdJZCxcbiAgICAgIHNxbE9iakV4aXN0czogISFzcWxPYmosXG4gICAgICBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgIGhhc2hUcmlnZ2VyZWRSZWY6IGhhc2hUcmlnZ2VyZWRSZWYuY3VycmVudCxcbiAgICAgIHNxbE9ialZhbHVlLFxuICAgICAgc3FsT2JqVmFsdWVUeXBlOiB0eXBlb2Ygc3FsT2JqVmFsdWUsXG4gICAgICBzcWxPYmpJc0FycmF5OiBBcnJheS5pc0FycmF5KHNxbE9ialZhbHVlKSxcbiAgICAgIHByZXZpb3VzUmVmVmFsdWUsXG4gICAgICBwcmV2aW91c1N0YXRlVmFsdWUsXG4gICAgICBpc0Zyb21Vc2VyVHlwaW5nLFxuICAgICAgaXNGcm9tUHJvcENoYW5nZSxcbiAgICAgIHRyaWdnZXJTb3VyY2U6IGlzRnJvbVVzZXJUeXBpbmcgPyAndXNlci10eXBpbmcnIDogKGlzRnJvbVByb3BDaGFuZ2UgPyAncHJvcC1jaGFuZ2UnIDogJ3Vua25vd24nKSxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdIQVNILUZJUlNULUxPQUQnLCB7XG4gICAgICBldmVudDogJ2Zvcm0taGFuZGxlU3FsRXhwck9iakNoYW5nZS1DQUxMRUQnLFxuICAgICAgY29uZmlnSWQsXG4gICAgICBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgIGhhc2hUcmlnZ2VyZWRSZWY6IGhhc2hUcmlnZ2VyZWRSZWYuY3VycmVudCxcbiAgICAgIGRhdGFzb3VyY2VSZWFkeSxcbiAgICAgIGhhc091dHB1dERTOiAhIW91dHB1dERTLFxuICAgICAgc3FsT2JqVmFsdWUsXG4gICAgICBzcWxPYmpWYWx1ZVR5cGU6IHR5cGVvZiBzcWxPYmpWYWx1ZSxcbiAgICAgIGlzQXJyYXk6IEFycmF5LmlzQXJyYXkoc3FsT2JqVmFsdWUpLFxuICAgICAgcHJldmlvdXNSZWZWYWx1ZSxcbiAgICAgIHByZXZpb3VzUmVmVmFsdWVUeXBlOiB0eXBlb2YgcHJldmlvdXNSZWZWYWx1ZSxcbiAgICAgIHZhbHVlQ2hhbmdlZEZyb21TdHJpbmdUb0FycmF5OiB0eXBlb2YgcHJldmlvdXNSZWZWYWx1ZSA9PT0gJ3N0cmluZycgJiYgQXJyYXkuaXNBcnJheShzcWxPYmpWYWx1ZSksXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIGNvbnN0IGZpcnN0UGFydCA9IHNxbE9iaj8ucGFydHM/LlswXVxuICAgIGNvbnN0IHZhbHVlID0gZmlyc3RQYXJ0Py50eXBlID09PSAnU0lOR0xFJyA/IChmaXJzdFBhcnQgYXMgYW55KS52YWx1ZU9wdGlvbnM/LnZhbHVlIDogJ25vdC1zaW5nbGUnXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgZXZlbnQ6ICdzcWwtZXhwcmVzc2lvbi1jaGFuZ2VkJyxcbiAgICAgIGNvbmZpZ0lkLFxuICAgICAgcGFydHNDb3VudDogc3FsT2JqPy5wYXJ0cz8ubGVuZ3RoIHx8IDAsXG4gICAgICBmaXJzdFBhcnRWYWx1ZTogdmFsdWUsXG4gICAgICBoYXNoVHJpZ2dlcmVkUmVmVmFsdWU6IGhhc2hUcmlnZ2VyZWRSZWYuY3VycmVudCxcbiAgICAgIGluaXRpYWxJbnB1dFZhbHVlOiBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgIGlzQXJyYXlGb3JtYXQ6IEFycmF5LmlzQXJyYXkodmFsdWUpLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICBzaG93Q2xhdXNlTnVtYmVyLmN1cnJlbnQgPSBnZXRTaG93bkNsYXVzZU51bWJlckJ5RXhwcmVzc2lvbihzcWxPYmopXG4gICAgc2V0QXR0cmlidXRlRmlsdGVyU3FsRXhwck9iaihzcWxPYmopXG4gICAgXG4gICAgLy8gQ2hlY2sgaWYgdGhpcyBpcyBhIGhhc2gtdHJpZ2dlcmVkIGNvbnZlcnNpb24gKHN0cmluZyAtPiBhcnJheSlcbiAgICAvLyBXaGVuIGhhc2ggdmFsdWUgY2hhbmdlcyBmb3Igc2FtZSBjb25maWdJZCwgU3FsRXhwcmVzc2lvblJ1bnRpbWUgY29udmVydHMgc3RyaW5nIHRvIGFycmF5IGZvcm1hdFxuICAgIGlmIChmaXJzdFBhcnQ/LnR5cGUgPT09ICdTSU5HTEUnICYmIGZpcnN0UGFydD8udmFsdWVPcHRpb25zPy52YWx1ZSkge1xuICAgICAgY29uc3QgdmFsdWUgPSBmaXJzdFBhcnQudmFsdWVPcHRpb25zLnZhbHVlXG4gICAgICBjb25zdCBpc0FycmF5Rm9ybWF0ID0gQXJyYXkuaXNBcnJheSh2YWx1ZSlcbiAgICAgIGNvbnN0IGhhc0luaXRpYWxWYWx1ZSA9IGluaXRpYWxJbnB1dFZhbHVlICYmIGhhc2hUcmlnZ2VyZWRSZWYuY3VycmVudFxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICAgIGV2ZW50OiAnc3FsLWV4cHJlc3Npb24tY2hhbmdlZC1jb252ZXJzaW9uLWNoZWNrJyxcbiAgICAgICAgY29uZmlnSWQsXG4gICAgICAgIGlzQXJyYXlGb3JtYXQsXG4gICAgICAgIGhhc0luaXRpYWxWYWx1ZSxcbiAgICAgICAgaGFzaFRyaWdnZXJlZFJlZlZhbHVlOiBoYXNoVHJpZ2dlcmVkUmVmLmN1cnJlbnQsXG4gICAgICAgIGluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgICB2YWx1ZVR5cGU6IHR5cGVvZiB2YWx1ZSxcbiAgICAgICAgdmFsdWU6IEFycmF5LmlzQXJyYXkodmFsdWUpID8gdmFsdWUgOiB2YWx1ZSxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gtRklSU1QtTE9BRCcsIHtcbiAgICAgICAgZXZlbnQ6ICdmb3JtLWNvbnZlcnNpb24tY2hlY2snLFxuICAgICAgICBjb25maWdJZCxcbiAgICAgICAgaXNBcnJheUZvcm1hdCxcbiAgICAgICAgaGFzSW5pdGlhbFZhbHVlLFxuICAgICAgICBoYXNoVHJpZ2dlcmVkUmVmOiBoYXNoVHJpZ2dlcmVkUmVmLmN1cnJlbnQsXG4gICAgICAgIGluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgICB2YWx1ZVR5cGU6IHR5cGVvZiB2YWx1ZSxcbiAgICAgICAgaXNBcnJheTogQXJyYXkuaXNBcnJheSh2YWx1ZSksXG4gICAgICAgIGFycmF5TGVuZ3RoOiBBcnJheS5pc0FycmF5KHZhbHVlKSA/IHZhbHVlLmxlbmd0aCA6ICduL2EnLFxuICAgICAgICBmaXJzdEl0ZW06IEFycmF5LmlzQXJyYXkodmFsdWUpICYmIHZhbHVlLmxlbmd0aCA+IDAgPyB2YWx1ZVswXSA6ICduL2EnLFxuICAgICAgICB3aWxsQ2hlY2tNYXRjaDogaXNBcnJheUZvcm1hdCAmJiBoYXNJbml0aWFsVmFsdWUgJiYgaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgLy8gSWYgdmFsdWUgY29udmVydGVkIHRvIGFycmF5IGZvcm1hdCBBTkQgdGhpcyB3YXMgaGFzaC10cmlnZ2VyZWQsIGZpcmUgZXZlbnRcbiAgICAgIGlmIChpc0FycmF5Rm9ybWF0ICYmIGhhc0luaXRpYWxWYWx1ZSAmJiBpbml0aWFsSW5wdXRWYWx1ZSkge1xuICAgICAgICBjb25zdCBtYXRjaGVzSGFzaFZhbHVlID0gdmFsdWUubGVuZ3RoID4gMCAmJiB2YWx1ZVswXT8udmFsdWUgPT09IGluaXRpYWxJbnB1dFZhbHVlXG4gICAgICAgIFxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICAgICAgZXZlbnQ6ICdzcWwtZXhwcmVzc2lvbi1jaGFuZ2VkLW1hdGNoZXMtY2hlY2snLFxuICAgICAgICAgIGNvbmZpZ0lkLFxuICAgICAgICAgIG1hdGNoZXNIYXNoVmFsdWUsXG4gICAgICAgICAgaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICAgICAgY29udmVydGVkVmFsdWVGaXJzdEl0ZW06IHZhbHVlWzBdPy52YWx1ZSxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfSlcbiAgICAgICAgXG4gICAgICAgIGlmIChtYXRjaGVzSGFzaFZhbHVlKSB7XG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgICAgICAgZXZlbnQ6ICdoYXNoLXZhbHVlLWNvbnZlcnRlZC10by1hcnJheScsXG4gICAgICAgICAgICBjb25maWdJZCxcbiAgICAgICAgICAgIGluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgICAgICAgY29udmVydGVkVmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgfSlcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBGaXJlIGN1c3RvbSBldmVudCBmb3IgcXVlcnkgZXhlY3V0aW9uIHRvIHdhaXQgb25cbiAgICAgICAgICBjb25zdCBldmVudCA9IG5ldyBDdXN0b21FdmVudChRVUVSWVNJTVBMRV9IQVNIX1ZBTFVFX0NPTlZFUlRFRF9FVkVOVCwge1xuICAgICAgICAgICAgZGV0YWlsOiB7XG4gICAgICAgICAgICAgIGNvbmZpZ0lkLFxuICAgICAgICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgICAgICAgaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICAgICAgICAgIGNvbnZlcnRlZFZhbHVlOiB2YWx1ZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJ1YmJsZXM6IHRydWVcbiAgICAgICAgICB9KVxuICAgICAgICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQoZXZlbnQpXG4gICAgICAgICAgXG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgICAgICAgZXZlbnQ6ICdoYXNoLXZhbHVlLWNvbnZlcnRlZC1ldmVudC1kaXNwYXRjaGVkJyxcbiAgICAgICAgICAgIGNvbmZpZ0lkLFxuICAgICAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICB9KVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIEVYRUNVVElPTiBQT0lOVDogUXVlcnkgZXhlY3V0aW9uIGhhcHBlbnMgSEVSRSBhZnRlciBjb252ZXJzaW9uIGlzIGNvbmZpcm1lZFxuICAgICAgICAgIC8vIFRoaXMgaXMgdGhlIE9OTFkgcGxhY2Ugd2hlcmUgaGFzaC10cmlnZ2VyZWQgcXVlcmllcyBzaG91bGQgZXhlY3V0ZVxuICAgICAgICAgIC8vIFRoZSBldmVudCBRVUVSWVNJTVBMRV9IQVNIX1ZBTFVFX0NPTlZFUlRFRF9FVkVOVCBoYXMgYmVlbiBkaXNwYXRjaGVkIGFib3ZlXG4gICAgICAgICAgLy8gVGhpcyBkaXJlY3QgY2FsbCBoYW5kbGVzIHRoZSBjYXNlIHdoZXJlIGNvbnZlcnNpb24gaGFwcGVucyBzeW5jaHJvbm91c2x5XG4gICAgICAgICAgLy8gVGhlIGV2ZW50IGxpc3RlbmVyIGluIHF1ZXJ5LXRhc2sudHN4IGhhbmRsZXMgdGhlIGFzeW5jIGNhc2VcbiAgICAgICAgICBcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gtRklSU1QtTE9BRCcsIHtcbiAgICAgICAgICAgIGV2ZW50OiAnZm9ybS1leGVjdXRpb24tZGVjaXNpb24tcG9pbnQnLFxuICAgICAgICAgICAgY29uZmlnSWQsXG4gICAgICAgICAgICBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgICAgICAgIGNvbmRpdGlvbkNoZWNrOiB7XG4gICAgICAgICAgICAgIGhhc2hUcmlnZ2VyZWRSZWY6IGhhc2hUcmlnZ2VyZWRSZWYuY3VycmVudCxcbiAgICAgICAgICAgICAgZGF0YXNvdXJjZVJlYWR5LFxuICAgICAgICAgICAgICBoYXNPdXRwdXREUzogISFvdXRwdXREUyxcbiAgICAgICAgICAgICAgYWxsQ29uZGl0aW9uc01ldDogISEoaGFzaFRyaWdnZXJlZFJlZi5jdXJyZW50ICYmIGRhdGFzb3VyY2VSZWFkeSAmJiBvdXRwdXREUylcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB3aWxsRXhlY3V0ZTogISEoaGFzaFRyaWdnZXJlZFJlZi5jdXJyZW50ICYmIGRhdGFzb3VyY2VSZWFkeSAmJiBvdXRwdXREUyksXG4gICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICB9KVxuICAgICAgICAgIFxuICAgICAgICAgIGlmIChoYXNoVHJpZ2dlcmVkUmVmLmN1cnJlbnQgJiYgZGF0YXNvdXJjZVJlYWR5ICYmIG91dHB1dERTKSB7XG4gICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICAgICAgICAgIGV2ZW50OiAnaGFzaC12YWx1ZS1jb252ZXJ0ZWQtZXhlY3V0aW5nLXF1ZXJ5LWRpcmVjdGx5JyxcbiAgICAgICAgICAgICAgY29uZmlnSWQsXG4gICAgICAgICAgICAgIGluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgICAgICAgICBub3RlOiAnQ29udmVyc2lvbiBjb21wbGV0ZSAtIGV4ZWN1dGluZyBxdWVyeSBkaXJlY3RseSB2aWEgYXBwbHlRdWVyeSAoZXZlbnQtZHJpdmVuIHBhdHRlcm4pJyxcbiAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gtRklSU1QtTE9BRCcsIHtcbiAgICAgICAgICAgICAgZXZlbnQ6ICdmb3JtLVdJTEwtRVhFQ1VURS1hcHBseVF1ZXJ5JyxcbiAgICAgICAgICAgICAgY29uZmlnSWQsXG4gICAgICAgICAgICAgIGluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgICAgICAgICBub3RlOiAnQWxsIGNvbmRpdGlvbnMgbWV0IC0gY2FsbGluZyBhcHBseVF1ZXJ5IGFmdGVyIHNldFRpbWVvdXQoMCknLFxuICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFVzZSBzZXRUaW1lb3V0IHRvIGVuc3VyZSB0aGlzIGhhcHBlbnMgYWZ0ZXIgdGhlIGN1cnJlbnQgZXZlbnQgbG9vcFxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSC1GSVJTVC1MT0FEJywge1xuICAgICAgICAgICAgICAgIGV2ZW50OiAnZm9ybS1hcHBseVF1ZXJ5LUNBTExFRCcsXG4gICAgICAgICAgICAgICAgY29uZmlnSWQsXG4gICAgICAgICAgICAgICAgaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIGFwcGx5UXVlcnkoKVxuICAgICAgICAgICAgfSwgMClcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNILUZJUlNULUxPQUQnLCB7XG4gICAgICAgICAgICAgIGV2ZW50OiAnZm9ybS1leGVjdXRpb24tU0tJUFBFRCcsXG4gICAgICAgICAgICAgIGNvbmZpZ0lkLFxuICAgICAgICAgICAgICBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgICAgICAgICAgcmVhc29uOiAhaGFzaFRyaWdnZXJlZFJlZi5jdXJyZW50ID8gJ2hhc2hUcmlnZ2VyZWRSZWYgaXMgZmFsc2UnIDpcbiAgICAgICAgICAgICAgICAgICAgICAhZGF0YXNvdXJjZVJlYWR5ID8gJ2RhdGFzb3VyY2VSZWFkeSBpcyBmYWxzZScgOlxuICAgICAgICAgICAgICAgICAgICAgICFvdXRwdXREUyA/ICdvdXRwdXREUyBpcyBudWxsL3VuZGVmaW5lZCcgOlxuICAgICAgICAgICAgICAgICAgICAgICd1bmtub3duJyxcbiAgICAgICAgICAgICAgY29uZGl0aW9uU3RhdGVzOiB7XG4gICAgICAgICAgICAgICAgaGFzaFRyaWdnZXJlZFJlZjogaGFzaFRyaWdnZXJlZFJlZi5jdXJyZW50LFxuICAgICAgICAgICAgICAgIGRhdGFzb3VyY2VSZWFkeSxcbiAgICAgICAgICAgICAgICBoYXNPdXRwdXREUzogISFvdXRwdXREU1xuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIEZJWCAocjAxOC4xMjUpOiBSZXNldCBmbGFnIGFmdGVyIGNvbnZlcnNpb24gZGV0ZWN0aW9uIGNvbXBsZXRlc1xuICAgICAgICAgIC8vIFRoaXMgYWxsb3dzIHRoZSBuZXh0IGhhc2ggY2hhbmdlIHRvIHRyaWdnZXIgYSBuZXcgY29udmVyc2lvbiBjeWNsZVxuICAgICAgICAgIGhhc2hUcmlnZ2VyZWRSZWYuY3VycmVudCA9IGZhbHNlXG4gICAgICAgICAgXG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgICAgICAgZXZlbnQ6ICdoYXNoLXRyaWdnZXJlZC1yZWYtcmVzZXQtYWZ0ZXItY29udmVyc2lvbicsXG4gICAgICAgICAgICBjb25maWdJZCxcbiAgICAgICAgICAgIGluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgICAgICAgbm90ZTogJ2hhc2hUcmlnZ2VyZWRSZWYgcmVzZXQgdG8gZmFsc2UgYWZ0ZXIgY29udmVyc2lvbiBkZXRlY3Rpb24gY29tcGxldGUnLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSwgW2NvbmZpZ0lkLCBpbml0aWFsSW5wdXRWYWx1ZSwgd2lkZ2V0SWQsIGRhdGFzb3VyY2VSZWFkeSwgb3V0cHV0RFMsIGFwcGx5UXVlcnldKVxuXG4gIGNvbnN0IGhhbmRsZVNwYXRpYWxGaWx0ZXJDaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjaygoZmlsdGVyOiBTcGF0aWFsRmlsdGVyT2JqKSA9PiB7XG4gICAgc3BhdGlhbEZpbHRlck9ialJlZi5jdXJyZW50ID0gZmlsdGVyXG4gIH0sIFtdKVxuXG4gIGNvbnN0IGhhbmRsZVJlbGF0aW9uQ2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soKHJlbDogU3BhdGlhbFJlbGF0aW9uKSA9PiB7XG4gICAgc3BhdGlhbFJlbGF0aW9uUmVmLmN1cnJlbnQgPSByZWxcbiAgfSwgW10pXG5cbiAgY29uc3QgaGFuZGxlQnVmZmVyQ2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soKGRpc3RhbmNlOiBudW1iZXIsIHVuaXQ6IFVuaXRUeXBlKSA9PiB7XG4gICAgYnVmZmVyUmVmLmN1cnJlbnQgPSB7IGRpc3RhbmNlLCB1bml0IH1cbiAgfSwgW10pXG5cbiAgY29uc3Qgc2hvd0F0dHJpYnV0ZUZpbHRlciA9IHVzZUF0dHJpYnV0ZUZpbHRlciAmJiBzcWxFeHByT2JqICE9IG51bGxcbiAgY29uc3Qgc2hvd1NwYXRpYWxGaWx0ZXIgPSBzcGF0aWFsRmlsdGVyRW5hYmxlZCAmJiB1c2VTcGF0aWFsRmlsdGVyICYmIChzcGF0aWFsRmlsdGVyVHlwZXMubGVuZ3RoID4gMCB8fCBzcGF0aWFsSW5jbHVkZVJ1bnRpbWVEYXRhIHx8IHNwYXRpYWxSZWxhdGlvblVzZURhdGFTb3VyY2VzPy5sZW5ndGggPiAwKVxuXG4gIC8vIERlYnVnIGxvZ2dpbmcgZm9yIGZvcm0gcmVuZGVyaW5nXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgZXZlbnQ6ICdmb3JtLXJlbmRlci1jaGVjaycsXG4gICAgICBjb25maWdJZCxcbiAgICAgIGRhdGFzb3VyY2VSZWFkeSxcbiAgICAgIHVzZUF0dHJpYnV0ZUZpbHRlcixcbiAgICAgIHNxbEV4cHJPYmo6IHNxbEV4cHJPYmogPyAnZXhpc3RzJyA6ICdudWxsJyxcbiAgICAgIHNxbEV4cHJPYmpQYXJ0czogc3FsRXhwck9iaj8ucGFydHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgc2hvd0F0dHJpYnV0ZUZpbHRlcixcbiAgICAgIG9yaWdpbkRTOiBvcmlnaW5EUyA/ICdleGlzdHMnIDogJ251bGwnLFxuICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFM/LmlkIHx8ICdub25lJyxcbiAgICAgIHNob3dTcGF0aWFsRmlsdGVyLFxuICAgICAgaXNBdXRvSGVpZ2h0LFxuICAgICAgb3V0cHV0RFM6IG91dHB1dERTID8gJ2V4aXN0cycgOiAnbnVsbCdcbiAgICB9KVxuICB9LCBbY29uZmlnSWQsIGRhdGFzb3VyY2VSZWFkeSwgdXNlQXR0cmlidXRlRmlsdGVyLCBzcWxFeHByT2JqLCBzaG93QXR0cmlidXRlRmlsdGVyLCBvcmlnaW5EUywgc2hvd1NwYXRpYWxGaWx0ZXIsIGlzQXV0b0hlaWdodCwgb3V0cHV0RFNdKVxuXG4gIC8vIExvZyB3aGVuIGZvcm0gY29udGVudCBzaG91bGQgcmVuZGVyXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHNob3dBdHRyaWJ1dGVGaWx0ZXIgJiYgb3JpZ2luRFMpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgICAgZXZlbnQ6ICdhdHRyaWJ1dGUtZmlsdGVyLXJlYWR5JyxcbiAgICAgICAgY29uZmlnSWQsXG4gICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICBzcWxFeHByT2JqUGFydHM6IHNxbEV4cHJPYmo/LnBhcnRzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgYXR0cmlidXRlRmlsdGVyTGFiZWwsXG4gICAgICAgIG5vdGU6ICdJbnB1dCBmaWVsZCBzaG91bGQgYmUgdmlzaWJsZSdcbiAgICAgIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgICAgZXZlbnQ6ICdhdHRyaWJ1dGUtZmlsdGVyLW5vdC1yZWFkeScsXG4gICAgICAgIGNvbmZpZ0lkLFxuICAgICAgICBzaG93QXR0cmlidXRlRmlsdGVyLFxuICAgICAgICBvcmlnaW5EUzogb3JpZ2luRFMgPyAnZXhpc3RzJyA6ICdudWxsJyxcbiAgICAgICAgdXNlQXR0cmlidXRlRmlsdGVyLFxuICAgICAgICBzcWxFeHByT2JqOiBzcWxFeHByT2JqID8gJ2V4aXN0cycgOiAnbnVsbCcsXG4gICAgICAgIHJlYXNvbjogIXNob3dBdHRyaWJ1dGVGaWx0ZXIgPyAnc2hvd0F0dHJpYnV0ZUZpbHRlciBpcyBmYWxzZScgOiAnb3JpZ2luRFMgaXMgbnVsbCdcbiAgICAgIH0pXG4gICAgfVxuICB9LCBbc2hvd0F0dHJpYnV0ZUZpbHRlciwgb3JpZ2luRFMsIGNvbmZpZ0lkLCBzcWxFeHByT2JqLCB1c2VBdHRyaWJ1dGVGaWx0ZXIsIGF0dHJpYnV0ZUZpbHRlckxhYmVsXSlcblxuICAvLyBDaGVjayBET00gdmlzaWJpbGl0eSBhZnRlciByZW5kZXJcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoZm9ybUNvbnRlbnRSZWYuY3VycmVudCkge1xuICAgICAgY29uc3QgY29tcHV0ZWRTdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGZvcm1Db250ZW50UmVmLmN1cnJlbnQpXG4gICAgICBjb25zdCByZWN0ID0gZm9ybUNvbnRlbnRSZWYuY3VycmVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICAgICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgICBldmVudDogJ2Zvcm0tY29udGVudC1kb20tY2hlY2snLFxuICAgICAgICBjb25maWdJZCxcbiAgICAgICAgZXhpc3RzOiAhIWZvcm1Db250ZW50UmVmLmN1cnJlbnQsXG4gICAgICAgIGRpc3BsYXk6IGNvbXB1dGVkU3R5bGUuZGlzcGxheSxcbiAgICAgICAgdmlzaWJpbGl0eTogY29tcHV0ZWRTdHlsZS52aXNpYmlsaXR5LFxuICAgICAgICBvcGFjaXR5OiBjb21wdXRlZFN0eWxlLm9wYWNpdHksXG4gICAgICAgIGhlaWdodDogY29tcHV0ZWRTdHlsZS5oZWlnaHQsXG4gICAgICAgIG1heEhlaWdodDogY29tcHV0ZWRTdHlsZS5tYXhIZWlnaHQsXG4gICAgICAgIGZsZXg6IGNvbXB1dGVkU3R5bGUuZmxleCxcbiAgICAgICAgZmxleEJhc2lzOiBjb21wdXRlZFN0eWxlLmZsZXhCYXNpcyxcbiAgICAgICAgcmVjdEhlaWdodDogcmVjdC5oZWlnaHQsXG4gICAgICAgIHJlY3RXaWR0aDogcmVjdC53aWR0aCxcbiAgICAgICAgaXNWaXNpYmxlOiByZWN0LmhlaWdodCA+IDAgJiYgcmVjdC53aWR0aCA+IDAsXG4gICAgICAgIHBhcmVudEhlaWdodDogZm9ybUNvbnRlbnRSZWYuY3VycmVudC5wYXJlbnRFbGVtZW50Py5jbGllbnRIZWlnaHQgfHwgMFxuICAgICAgfSlcbiAgICB9XG4gIH0sIFtjb25maWdJZCwgc2hvd0F0dHJpYnV0ZUZpbHRlciwgb3JpZ2luRFNdKVxuXG4gIC8vIExvZyB3aGVuIFNxbEV4cHJlc3Npb25SdW50aW1lIGtleSBjaGFuZ2VzIChjb21wb25lbnQgcmVtb3VudHMpIE9SIGV4cHJlc3Npb24gcHJvcCBjaGFuZ2VzXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgZXhwcmVzc2lvblZhbHVlID0gYXR0cmlidXRlRmlsdGVyU3FsRXhwck9iaj8ucGFydHM/LlswXT8udmFsdWVPcHRpb25zPy52YWx1ZVxuICAgIGNvbnN0IHNxbEV4cHJSdW50aW1lS2V5ID0gYCR7Y29uZmlnSWR9LSR7ZXhwcmVzc2lvblZhbHVlIHx8ICdlbXB0eSd9YFxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgIGV2ZW50OiAnU3FsRXhwcmVzc2lvblJ1bnRpbWUtcHJvcHMtY2hhbmdlZCcsXG4gICAgICBjb25maWdJZCxcbiAgICAgIGluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgc3FsRXhwclJ1bnRpbWVLZXksXG4gICAgICBleHByZXNzaW9uVmFsdWUsXG4gICAgICBleHByZXNzaW9uVmFsdWVUeXBlOiB0eXBlb2YgZXhwcmVzc2lvblZhbHVlLFxuICAgICAgaXNBcnJheTogQXJyYXkuaXNBcnJheShleHByZXNzaW9uVmFsdWUpLFxuICAgICAgaGFzaFRyaWdnZXJlZFJlZjogaGFzaFRyaWdnZXJlZFJlZi5jdXJyZW50LFxuICAgICAgb3JpZ2luRFNFeGlzdHM6ICEhb3JpZ2luRFMsXG4gICAgICBub3RlOiAnRklYIChyMDE4LjEyMyk6IEtleSB1c2VzIGNvbmZpZ0lkICsgZXhwcmVzc2lvblZhbHVlIHRvIHJlbW91bnQgd2hlbiB2YWx1ZSBjaGFuZ2VzLCBub3Qgd2hlbiBpbml0aWFsSW5wdXRWYWx1ZSBjbGVhcnMnLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgfSwgW2NvbmZpZ0lkLCBpbml0aWFsSW5wdXRWYWx1ZSwgYXR0cmlidXRlRmlsdGVyU3FsRXhwck9iaiwgb3JpZ2luRFNdKVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8gRE9NIE1BTklQVUxBVElPTiBGT1IgU3FsRXhwcmVzc2lvblJ1bnRpbWUgKHIwMTguMTIyLTEyOClcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAvLyBcbiAgLy8g4pqg77iPIENSSVRJQ0FMOiBETyBOT1QgUkVNT1ZFIFRISVMgV09SS0FST1VORCDimqDvuI9cbiAgLy8gXG4gIC8vIFdIWSBUSElTIElTIE5FQ0VTU0FSWTpcbiAgLy8gXG4gIC8vIFNxbEV4cHJlc3Npb25SdW50aW1lIGlzIGEgXCJibGFjay1ib3hcIiBFeEIgY29tcG9uZW50IHRoYXQgZG9lcyBOT1Qgc3VwcG9ydFxuICAvLyBwcm9ncmFtbWF0aWMgdmFsdWUgcG9wdWxhdGlvbiB2aWEgaXRzIGBleHByZXNzaW9uYCBwcm9wLiBUaGlzIHdhcyBkaXNjb3ZlcmVkXG4gIC8vIHRocm91Z2ggZXh0ZW5zaXZlIHRlc3RpbmcgKHIwMTguMTA4LTEyOCk6XG4gIC8vIFxuICAvLyAxLiBTZXR0aW5nIGBleHByZXNzaW9uYCBwcm9wIOKGkiBDb21wb25lbnQgZG9lcyBOT1QgcG9wdWxhdGUgaXRzIHRleHQgZmllbGRcbiAgLy8gMi4gQ2hhbmdpbmcgYGV4cHJlc3Npb25gIHByb3Ag4oaSIENvbXBvbmVudCBkb2VzIE5PVCBmaXJlIG9uQ2hhbmdlIGV2ZW50XG4gIC8vIDMuIFVzaW5nIGBrZXlgIHByb3AgdG8gcmVtb3VudCDihpIgQ29tcG9uZW50IHN0aWxsIGRvZXNuJ3QgcG9wdWxhdGUgZmllbGRcbiAgLy8gXG4gIC8vIFRoZSBjb21wb25lbnQgT05MWSByZXNwb25kcyB0byBhY3R1YWwgRE9NIHVzZXIgaW50ZXJhY3Rpb25zIChmb2N1cywgaW5wdXQsIGJsdXIpLlxuICAvLyBcbiAgLy8gV0hBVCBXRSBORUVEIFRPIEFDSElFVkU6XG4gIC8vIFxuICAvLyBXaGVuIGEgaGFzaCBwYXJhbWV0ZXIgYXJyaXZlcyAoZS5nLiwgI3Bpbj0yMjIzMDU5MDEzKSwgd2UgbmVlZCB0bzpcbiAgLy8gMS4gUG9wdWxhdGUgdGhlIFNxbEV4cHJlc3Npb25SdW50aW1lIHRleHQgZmllbGQgd2l0aCBcIjIyMjMwNTkwMTNcIlxuICAvLyAyLiBUcmlnZ2VyIFNxbEV4cHJlc3Npb25SdW50aW1lJ3Mgb25DaGFuZ2UgaGFuZGxlclxuICAvLyAzLiBBbGxvdyBpdCB0byBjb252ZXJ0IHN0cmluZyDihpIgYXJyYXkgZm9ybWF0IGludGVybmFsbHlcbiAgLy8gNC4gRXhlY3V0ZSB0aGUgcXVlcnkgd2l0aCB0aGUgY29ycmVjdGx5IGZvcm1hdHRlZCB2YWx1ZVxuICAvLyBcbiAgLy8gVEhFIFNPTFVUSU9OOlxuICAvLyBcbiAgLy8gU2ltdWxhdGUgdXNlciBpbnRlcmFjdGlvbiBieSBkaXJlY3RseSBtYW5pcHVsYXRpbmcgdGhlIERPTSBpbnB1dCBmaWVsZDpcbiAgLy8gXG4gIC8vIDEuIE11dGF0aW9uT2JzZXJ2ZXIgd2F0Y2hlcyBmb3IgaW5wdXRbdHlwZT1cInRleHRcIl0gdG8gYXBwZWFyIGluIERPTVxuICAvLyAyLiBEb3VibGUgcmVxdWVzdEFuaW1hdGlvbkZyYW1lIGVuc3VyZXMgUmVhY3QgaGFzIGF0dGFjaGVkIGV2ZW50IGhhbmRsZXJzXG4gIC8vIDMuIGZvY3VzKCkg4oaSIHNldCB2YWx1ZSDihpIgZGlzcGF0Y2ggZXZlbnRzIOKGkiBibHVyKClcbiAgLy8gNC4gU3FsRXhwcmVzc2lvblJ1bnRpbWUub25DaGFuZ2UgZmlyZXMgbmF0dXJhbGx5XG4gIC8vIDUuIEludGVybmFsIHN0cmluZ+KGkmFycmF5IGNvbnZlcnNpb24gaGFwcGVuc1xuICAvLyA2LiBRdWVyeSBleGVjdXRlcyB3aXRoIGNvcnJlY3QgYXJyYXkgZm9ybWF0XG4gIC8vIFxuICAvLyBBTFRFUk5BVElWRVMgQVRURU1QVEVEIChBTEwgRkFJTEVEKTpcbiAgLy8gXG4gIC8vIC0g4p2MIERpcmVjdCBhcHBseVF1ZXJ5KCkgY2FsbCDihpIgV3JvbmcgZm9ybWF0IChzdHJpbmcgaW5zdGVhZCBvZiBhcnJheSlcbiAgLy8gLSDinYwgVXBkYXRpbmcgZXhwcmVzc2lvbiBwcm9wIOKGkiBDb21wb25lbnQgaWdub3JlcyBpdFxuICAvLyAtIOKdjCBLZXktYmFzZWQgcmVtb3VudCDihpIgQ29tcG9uZW50IGRvZXNuJ3QgcG9wdWxhdGUgZnJvbSBwcm9wXG4gIC8vIC0g4p2MIENhbGxpbmcgb25DaGFuZ2UgbWFudWFsbHkg4oaSIE5vIGFjY2VzcyB0byBpbnRlcm5hbCBzdGF0ZVxuICAvLyBcbiAgLy8gVElNSU5HIFJFUVVJUkVNRU5UUzpcbiAgLy8gXG4gIC8vIC0gTXV0YXRpb25PYnNlcnZlcjogRXZlbnQtZHJpdmVuIGRldGVjdGlvbiB3aGVuIGlucHV0IGFwcGVhcnNcbiAgLy8gLSBEb3VibGUgUkFGOiBFbnN1cmVzIFJlYWN0IGNvbW1pdCBwaGFzZSBjb21wbGV0ZXMgKGhhbmRsZXJzIGF0dGFjaGVkKVxuICAvLyAtIGZvY3VzL2JsdXIgY3ljbGU6IFRyaWdnZXJzIFNxbEV4cHJlc3Npb25SdW50aW1lJ3MgaW50ZXJuYWwgbG9naWNcbiAgLy8gXG4gIC8vIE1BSU5URU5BTkNFIE5PVEVTOlxuICAvLyBcbiAgLy8gLSBUaGlzIHdvcmthcm91bmQgaXMgUkVRVUlSRUQgZm9yIGhhc2ggcGFyYW1ldGVyIGV4ZWN1dGlvblxuICAvLyAtIElmIEVzcmkgdXBkYXRlcyBTcWxFeHByZXNzaW9uUnVudGltZSB0byBzdXBwb3J0IHByb2dyYW1tYXRpYyBwb3B1bGF0aW9uLCBcbiAgLy8gICB0aGlzIGNhbiBiZSByZW1vdmVkXG4gIC8vIC0gVGVzdGVkIGV4dGVuc2l2ZWx5IGluIHIwMTguMTA4LTEyOCAoc2VlIENVUlJFTlRfV09SSy5tZClcbiAgLy8gLSBEZWJ1ZyBzd2l0Y2g6IEZPUk0gKHF1ZXJ5LXRhc2stZm9ybSBldmVudHMpXG4gIC8vIFxuICAvLyBTZWU6IFNRTEVYUFJFU1NJT05fUlVOVElNRV9ET01fV09SS0FST1VORC5tZCBmb3IgZnVsbCBkZXRhaWxzXG4gIC8vIFxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFzcWxFeHByUnVudGltZUNvbnRhaW5lclJlZi5jdXJyZW50IHx8ICFvcmlnaW5EUykgcmV0dXJuXG4gICAgXG4gICAgLy8gRklYIChyMDE4LjEyNCk6IFNpbXBsaWZ5IC0gdXNlIGluaXRpYWxJbnB1dFZhbHVlICh0aGUgaGFzaCBwYXJhbWV0ZXIpIGRpcmVjdGx5XG4gICAgLy8gVGhlIG9sZCB3b3JraW5nIGNvZGUgY2hlY2tlZCBhZ2FpbnN0IGluaXRpYWxJbnB1dFZhbHVlLCBub3QgZXhwcmVzc2lvblZhbHVlXG4gICAgLy8gVGhpcyB1c2VFZmZlY3Qgbm93IGRlcGVuZHMgb24gaW5pdGlhbElucHV0VmFsdWUsIHNvIGl0IHJlLXJ1bnMgZm9yIGVhY2ggaGFzaCBjaGFuZ2VcbiAgICBpZiAoaW5pdGlhbElucHV0VmFsdWUgJiYgaGFzaFRyaWdnZXJlZFJlZi5jdXJyZW50KSB7XG4gICAgICBjb25zdCBjb250YWluZXIgPSBzcWxFeHByUnVudGltZUNvbnRhaW5lclJlZi5jdXJyZW50XG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgICAgZXZlbnQ6ICdoYXNoLWRvbS1wb3B1bGF0aW9uLWF0dGVtcHQnLFxuICAgICAgICBjb25maWdJZCxcbiAgICAgICAgaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICAgIGhhc0NvbnRhaW5lcjogISFjb250YWluZXIsXG4gICAgICAgIGhhc2hUcmlnZ2VyZWRSZWY6IGhhc2hUcmlnZ2VyZWRSZWYuY3VycmVudCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgXG4gICAgICAvLyBGdW5jdGlvbiB0byBwb3B1bGF0ZSB0aGUgaW5wdXQgZmllbGQgd2hlbiBmb3VuZFxuICAgICAgY29uc3QgcG9wdWxhdGVJbnB1dEZpZWxkID0gKGlucHV0RmllbGQ6IEhUTUxJbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgICAgY29uc3QgY3VycmVudFZhbHVlID0gaW5wdXRGaWVsZC52YWx1ZVxuICAgICAgICBcbiAgICAgICAgLy8gRklYIChyMDE4LjEyNCk6IFVzZSBvbGQgd29ya2luZyBsb2dpYyAtIHVwZGF0ZSBpZiBlbXB0eSBPUiBkaWZmZXJlbnQgZnJvbSBpbml0aWFsSW5wdXRWYWx1ZVxuICAgICAgICBjb25zdCBzaG91bGRVcGRhdGUgPSAhY3VycmVudFZhbHVlIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRWYWx1ZS50cmltKCkgPT09ICcnIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRWYWx1ZSAhPT0gaW5pdGlhbElucHV0VmFsdWVcbiAgICAgICAgXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgICAgICBldmVudDogJ2hhc2gtZG9tLWlucHV0LWZvdW5kJyxcbiAgICAgICAgICBjb25maWdJZCxcbiAgICAgICAgICBjdXJyZW50VmFsdWUsXG4gICAgICAgICAgdGFyZ2V0VmFsdWU6IGluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgICAgIHNob3VsZFVwZGF0ZSxcbiAgICAgICAgICBoYXNoVHJpZ2dlcmVkUmVmOiBoYXNoVHJpZ2dlcmVkUmVmLmN1cnJlbnQsXG4gICAgICAgICAgaW5wdXRUeXBlOiBpbnB1dEZpZWxkLnR5cGUsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgICAgICBpZiAoc2hvdWxkVXBkYXRlKSB7XG4gICAgICAgICAgLy8gRklYIChyMDE4LjEyNSk6IFVzZSBkb3VibGUgUkFGIHRvIGVuc3VyZSBTcWxFeHByZXNzaW9uUnVudGltZSBpcyBmdWxseSBpbml0aWFsaXplZFxuICAgICAgICAgIC8vIFdoZW4gTXV0YXRpb25PYnNlcnZlciBmaW5kcyB0aGUgaW5wdXQsIFJlYWN0IG1heSBub3QgaGF2ZSBmaW5pc2hlZCBhdHRhY2hpbmcgZXZlbnQgaGFuZGxlcnNcbiAgICAgICAgICAvLyBEb3VibGUgUkFGIHdhaXRzIGZvciBicm93c2VyIHBhaW50ICsgUmVhY3QgY29tbWl0IHBoYXNlIHRvIGNvbXBsZXRlIChldmVudC1kcml2ZW4sIG5vIHNldFRpbWVvdXQpXG4gICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgICAgICAgICAgICBldmVudDogJ2hhc2gtZG9tLXN0YXJ0aW5nLW1hbmlwdWxhdGlvbi1hZnRlci1yYWYnLFxuICAgICAgICAgICAgICAgIGNvbmZpZ0lkLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgICAgICAgICAgICBub3RlOiAnRG91YmxlIFJBRiBjb21wbGV0ZSAtIFNxbEV4cHJlc3Npb25SdW50aW1lIHNob3VsZCBiZSBmdWxseSBpbml0aWFsaXplZCcsXG4gICAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBGb2N1cyB0aGUgaW5wdXQgZmlyc3QgKGNyaXRpY2FsIGZvciBSZWFjdCBzeW50aGV0aWMgZXZlbnRzKVxuICAgICAgICAgICAgICBpbnB1dEZpZWxkLmZvY3VzKClcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgICAgICAgICAgICBldmVudDogJ2hhc2gtZG9tLWlucHV0LWZvY3VzZWQnLFxuICAgICAgICAgICAgICAgIGNvbmZpZ0lkLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgICAgICAgICAgICBpc0ZvY3VzZWQ6IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgPT09IGlucHV0RmllbGQsXG4gICAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBTZXQgdGhlIHZhbHVlXG4gICAgICAgICAgICAgIGlucHV0RmllbGQudmFsdWUgPSBTdHJpbmcoaW5pdGlhbElucHV0VmFsdWUpXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICAgICAgICAgICAgZXZlbnQ6ICdoYXNoLWRvbS12YWx1ZS1zZXQnLFxuICAgICAgICAgICAgICAgIGNvbmZpZ0lkLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgICAgICAgICAgICBpbnB1dEZpZWxkVmFsdWVBZnRlcjogaW5wdXRGaWVsZC52YWx1ZSxcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIERpc3BhdGNoIGlucHV0IGV2ZW50IHdpdGggcHJvcGVyIHByb3BlcnRpZXNcbiAgICAgICAgICAgICAgY29uc3QgaW5wdXRFdmVudCA9IG5ldyBFdmVudCgnaW5wdXQnLCB7IGJ1YmJsZXM6IHRydWUsIGNhbmNlbGFibGU6IHRydWUgfSlcbiAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGlucHV0RXZlbnQsICd0YXJnZXQnLCB7IHZhbHVlOiBpbnB1dEZpZWxkLCBlbnVtZXJhYmxlOiB0cnVlIH0pXG4gICAgICAgICAgICAgIGlucHV0RmllbGQuZGlzcGF0Y2hFdmVudChpbnB1dEV2ZW50KVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gRGlzcGF0Y2ggY2hhbmdlIGV2ZW50XG4gICAgICAgICAgICAgIGNvbnN0IGNoYW5nZUV2ZW50ID0gbmV3IEV2ZW50KCdjaGFuZ2UnLCB7IGJ1YmJsZXM6IHRydWUsIGNhbmNlbGFibGU6IHRydWUgfSlcbiAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNoYW5nZUV2ZW50LCAndGFyZ2V0JywgeyB2YWx1ZTogaW5wdXRGaWVsZCwgZW51bWVyYWJsZTogdHJ1ZSB9KVxuICAgICAgICAgICAgICBpbnB1dEZpZWxkLmRpc3BhdGNoRXZlbnQoY2hhbmdlRXZlbnQpXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBBbHNvIHVzZSBSZWFjdCdzIG5hdGl2ZSB2YWx1ZSBzZXR0ZXIgYXBwcm9hY2hcbiAgICAgICAgICAgICAgY29uc3QgbmF0aXZlSW5wdXRWYWx1ZVNldHRlciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iod2luZG93LkhUTUxJbnB1dEVsZW1lbnQucHJvdG90eXBlLCAndmFsdWUnKT8uc2V0XG4gICAgICAgICAgICAgIGlmIChuYXRpdmVJbnB1dFZhbHVlU2V0dGVyKSB7XG4gICAgICAgICAgICAgICAgbmF0aXZlSW5wdXRWYWx1ZVNldHRlci5jYWxsKGlucHV0RmllbGQsIFN0cmluZyhpbml0aWFsSW5wdXRWYWx1ZSkpXG4gICAgICAgICAgICAgICAgY29uc3QgcmVhY3RFdmVudCA9IG5ldyBFdmVudCgnaW5wdXQnLCB7IGJ1YmJsZXM6IHRydWUgfSlcbiAgICAgICAgICAgICAgICBpbnB1dEZpZWxkLmRpc3BhdGNoRXZlbnQocmVhY3RFdmVudClcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgICAgICAgICAgIGV2ZW50OiAnaGFzaC1kb20tZXZlbnRzLWRpc3BhdGNoZWQnLFxuICAgICAgICAgICAgICAgIGNvbmZpZ0lkLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgICAgICAgICAgICBpbnB1dEV2ZW50RGlzcGF0Y2hlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBjaGFuZ2VFdmVudERpc3BhdGNoZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgcmVhY3RFdmVudERpc3BhdGNoZWQ6ICEhbmF0aXZlSW5wdXRWYWx1ZVNldHRlcixcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIEJsdXIgdG8gdHJpZ2dlciBhbnkgdmFsaWRhdGlvbiBvciBzdGF0ZSB1cGRhdGVzIChjcml0aWNhbCBmb3IgU3FsRXhwcmVzc2lvblJ1bnRpbWUub25DaGFuZ2UpXG4gICAgICAgICAgICAgIGlucHV0RmllbGQuYmx1cigpXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICAgICAgICAgICAgZXZlbnQ6ICdoYXNoLWRvbS12YWx1ZS1wb3B1bGF0ZWQnLFxuICAgICAgICAgICAgICAgIGNvbmZpZ0lkLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgICAgICAgICAgICBub3RlOiAnRE9NIG1hbmlwdWxhdGlvbiBjb21wbGV0ZSAtIFNxbEV4cHJlc3Npb25SdW50aW1lLm9uQ2hhbmdlIHNob3VsZCBmaXJlIGFuZCBkZXRlY3QgY29udmVyc2lvbicsXG4gICAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBGSVggKHIwMTguMTI1KTogRG9uJ3QgcmVzZXQgZmxhZyBoZXJlIC0gYmx1cigpIGlzIGFzeW5jIGFuZCB0cmlnZ2VycyBvbkNoYW5nZVxuICAgICAgICAgICAgICAvLyBUaGUgZmxhZyB3aWxsIGJlIHJlc2V0IGluIGhhbmRsZVNxbEV4cHJPYmpDaGFuZ2UgYWZ0ZXIgY29udmVyc2lvbiBpcyBkZXRlY3RlZFxuICAgICAgICAgICAgICAvLyBSZXNldHRpbmcgaXQgaGVyZSBjYXVzZXMgb25DaGFuZ2UgdG8gc2VlIGZhbHNlIGFuZCBza2lwIHRoZSBjb252ZXJzaW9uIGV2ZW50XG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gVHJ5IHRvIGZpbmQgaW5wdXQgZmllbGQgaW1tZWRpYXRlbHkgKGl0IG1pZ2h0IGFscmVhZHkgZXhpc3QpXG4gICAgICAvLyBTcWxFeHByZXNzaW9uUnVudGltZSB1c2VzIGlucHV0W3R5cGU9XCJ0ZXh0XCJdLCBub3QgdGV4dGFyZWFcbiAgICAgIGNvbnN0IGlucHV0RmllbGQgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignaW5wdXRbdHlwZT1cInRleHRcIl0nKSBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgICBcbiAgICAgIGlmIChpbnB1dEZpZWxkKSB7XG4gICAgICAgIC8vIEZvdW5kIGl0IGltbWVkaWF0ZWx5IC0gcG9wdWxhdGUgaXRcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgICAgIGV2ZW50OiAnaGFzaC1kb20taW5wdXQtZm91bmQtaW1tZWRpYXRlbHknLFxuICAgICAgICAgIGNvbmZpZ0lkLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9KVxuICAgICAgICBwb3B1bGF0ZUlucHV0RmllbGQoaW5wdXRGaWVsZClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIE5vdCBmb3VuZCB5ZXQgLSB1c2UgTXV0YXRpb25PYnNlcnZlciB0byB3YXRjaCBmb3IgaXQgKGV2ZW50LWRyaXZlbiwgbm8gdGltZXJzKVxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICAgICAgZXZlbnQ6ICdoYXNoLWRvbS1pbnB1dC1ub3QtZm91bmQtd2F0Y2hpbmcnLFxuICAgICAgICAgIGNvbmZpZ0lkLFxuICAgICAgICAgIG5vdGU6ICdTZXR0aW5nIHVwIE11dGF0aW9uT2JzZXJ2ZXIgdG8gd2F0Y2ggZm9yIGlucHV0W3R5cGU9XCJ0ZXh0XCJdIGFwcGVhcmFuY2UnLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9KVxuICAgICAgICBcbiAgICAgICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigoKSA9PiB7XG4gICAgICAgICAgY29uc3QgaW5wdXRGaWVsZCA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdpbnB1dFt0eXBlPVwidGV4dFwiXScpIGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICAgICAgICBpZiAoaW5wdXRGaWVsZCkge1xuICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgICAgICAgICBldmVudDogJ2hhc2gtZG9tLWlucHV0LWFwcGVhcmVkJyxcbiAgICAgICAgICAgICAgY29uZmlnSWQsXG4gICAgICAgICAgICAgIG5vdGU6ICdNdXRhdGlvbk9ic2VydmVyIGRldGVjdGVkIGlucHV0W3R5cGU9XCJ0ZXh0XCJdIGluIERPTScsXG4gICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcG9wdWxhdGVJbnB1dEZpZWxkKGlucHV0RmllbGQpXG4gICAgICAgICAgICBvYnNlcnZlci5kaXNjb25uZWN0KCkgLy8gU3RvcCB3YXRjaGluZyBvbmNlIHdlJ3ZlIGZvdW5kIGFuZCBwb3B1bGF0ZWQgaXRcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgICAgICAgICBldmVudDogJ2hhc2gtZG9tLW9ic2VydmVyLWRpc2Nvbm5lY3RlZCcsXG4gICAgICAgICAgICAgIGNvbmZpZ0lkLFxuICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICBcbiAgICAgICAgLy8gV2F0Y2ggZm9yIGFueSBjaGlsZCBlbGVtZW50cyBiZWluZyBhZGRlZCB0byB0aGUgY29udGFpbmVyXG4gICAgICAgIG9ic2VydmVyLm9ic2VydmUoY29udGFpbmVyLCB7XG4gICAgICAgICAgY2hpbGRMaXN0OiB0cnVlLCAgLy8gV2F0Y2ggZm9yIGNoaWxkcmVuIGJlaW5nIGFkZGVkL3JlbW92ZWRcbiAgICAgICAgICBzdWJ0cmVlOiB0cnVlICAgICAvLyBXYXRjaCB0aGUgZW50aXJlIHN1YnRyZWVcbiAgICAgICAgfSlcbiAgICAgICAgXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgICAgICBldmVudDogJ2hhc2gtZG9tLW9ic2VydmVyLXN0YXJ0ZWQnLFxuICAgICAgICAgIGNvbmZpZ0lkLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9KVxuICAgICAgICBcbiAgICAgICAgLy8gQ2xlYW51cDogc3RvcCB3YXRjaGluZyB3aGVuIGNvbXBvbmVudCB1bm1vdW50cyBvciBkZXBlbmRlbmNpZXMgY2hhbmdlXG4gICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgb2JzZXJ2ZXIuZGlzY29ubmVjdCgpXG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgICAgICAgZXZlbnQ6ICdoYXNoLWRvbS1vYnNlcnZlci1jbGVhbnVwJyxcbiAgICAgICAgICAgIGNvbmZpZ0lkLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSwgW2F0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmosIG9yaWdpbkRTLCBjb25maWdJZCwgaW5pdGlhbElucHV0VmFsdWVdKVxuXG4gIHJldHVybiAoXG4gICAgPFF1ZXJ5VGFza0NvbnRleHQuUHJvdmlkZXIgdmFsdWU9e3sgcmVzZXRTeW1ib2wgfX0+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT0ncXVlcnktZm9ybScgY3NzPXtnZXRGb3JtU3R5bGUoaXNBdXRvSGVpZ2h0KX0+XG4gICAgICAgIDxkaXYgcmVmPXtmb3JtQ29udGVudFJlZn0gY2xhc3NOYW1lPSdxdWVyeS1mb3JtX19jb250ZW50JyBvbktleURvd249e2hhbmRsZUtleURvd259PlxuICAgICAgICAgIHtzaG93QXR0cmlidXRlRmlsdGVyICYmIChcbiAgICAgICAgICAgIDxkaXYgXG4gICAgICAgICAgICAgIHJvbGU9J2dyb3VwJyBcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPSdweC00JyBcbiAgICAgICAgICAgICAgY3NzPXtjc3NgcGFkZGluZy10b3A6IDJweDtgfVxuICAgICAgICAgICAgICBhcmlhLWxhYmVsPXthdHRyaWJ1dGVGaWx0ZXJMYWJlbH1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ2Zvcm0tdGl0bGUgZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlcicsIHsgJ2Qtbm9uZSc6ICFhdHRyaWJ1dGVGaWx0ZXJMYWJlbCAmJiAhYXR0cmlidXRlRmlsdGVyRGVzYyB9KX0gY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgbWFyZ2luLXRvcDogMDtcbiAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA0cHg7XG4gICAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICAgIHthdHRyaWJ1dGVGaWx0ZXJMYWJlbCAmJiA8ZGl2IGNsYXNzTmFtZT0nbXItMiB0aXRsZTInPnthdHRyaWJ1dGVGaWx0ZXJMYWJlbH08L2Rpdj59XG4gICAgICAgICAgICAgICAge2F0dHJpYnV0ZUZpbHRlckRlc2MgJiYgKFxuICAgICAgICAgICAgICAgICAgPFRvb2x0aXAgcGxhY2VtZW50PSdib3R0b20nIGNzcz17Y3NzYHdoaXRlLXNwYWNlOiBwcmUtbGluZTtgfSB0aXRsZT17YXR0cmlidXRlRmlsdGVyRGVzY30+XG4gICAgICAgICAgICAgICAgICAgIDxCdXR0b24gc2l6ZT0nc20nIGljb24gdHlwZT0ndGVydGlhcnknPjxJbmZvT3V0bGluZWQgY29sb3I9J3ZhcigtLXN5cy1jb2xvci1wcmltYXJ5LW1haW4pJyBzaXplPSdzJy8+PC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICA8L1Rvb2x0aXA+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIHtvcmlnaW5EUyAmJiAoXG4gICAgICAgICAgICAgICAgPGRpdiByZWY9e3NxbEV4cHJSdW50aW1lQ29udGFpbmVyUmVmfSBjc3M9e2Nzc2BtYXJnaW46IC0xMHB4IDBweDtgfT5cbiAgICAgICAgICAgICAgICAgIDxTcWxFeHByZXNzaW9uUnVudGltZVxuICAgICAgICAgICAgICAgICAgICBrZXk9e2Ake2NvbmZpZ0lkfS0ke2F0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmo/LnBhcnRzPy5bMF0/LnZhbHVlT3B0aW9ucz8udmFsdWUgfHwgJ2VtcHR5J31gfVxuICAgICAgICAgICAgICAgICAgICB3aWRnZXRJZD17d2lkZ2V0SWR9XG4gICAgICAgICAgICAgICAgICAgIGRhdGFTb3VyY2U9e29yaWdpbkRTfVxuICAgICAgICAgICAgICAgICAgICBleHByZXNzaW9uPXthdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqfVxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17aGFuZGxlU3FsRXhwck9iakNoYW5nZX1cbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApfVxuICAgICAgICAgIHtzaG93QXR0cmlidXRlRmlsdGVyICYmIHNob3dTcGF0aWFsRmlsdGVyICYmIChcbiAgICAgICAgICAgIDxociBjbGFzc05hbWU9J20tNCcgY3NzPXtjc3NgYm9yZGVyOiBub25lOyBoZWlnaHQ6IDFweDsgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tc3lzLWNvbG9yLWRpdmlkZXItc2Vjb25kYXJ5KTtgfS8+XG4gICAgICAgICAgKX1cbiAgICAgICAgICB7c2hvd1NwYXRpYWxGaWx0ZXIgJiYgKFxuICAgICAgICAgICAgPFF1ZXJ5VGFza1NwYXRpYWxGb3JtXG4gICAgICAgICAgICAgIHdpZGdldElkPXt3aWRnZXRJZH1cbiAgICAgICAgICAgICAgbGFiZWw9e3NwYXRpYWxGaWx0ZXJMYWJlbH1cbiAgICAgICAgICAgICAgZGVzYz17c3BhdGlhbEZpbHRlckRlc2N9XG4gICAgICAgICAgICAgIGZpbHRlclR5cGVzPXtzcGF0aWFsRmlsdGVyVHlwZXN9XG4gICAgICAgICAgICAgIG1hcFdpZGdldElkcz17c3BhdGlhbE1hcFdpZGdldElkc31cbiAgICAgICAgICAgICAgY3JlYXRlVG9vbFR5cGVzPXtzcGF0aWFsSW50ZXJhY3RpdmVDcmVhdGVUb29sVHlwZXN9XG4gICAgICAgICAgICAgIG9uRmlsdGVyQ2hhbmdlPXtoYW5kbGVTcGF0aWFsRmlsdGVyQ2hhbmdlfVxuICAgICAgICAgICAgICBvblJlbGF0aW9uQ2hhbmdlPXtoYW5kbGVSZWxhdGlvbkNoYW5nZX1cbiAgICAgICAgICAgICAgb25CdWZmZXJDaGFuZ2U9e2hhbmRsZUJ1ZmZlckNoYW5nZX1cbiAgICAgICAgICAgICAgc3BhdGlhbFJlbGF0aW9ucz17c3BhdGlhbFJlbGF0aW9uc31cbiAgICAgICAgICAgICAgZHNFbmFibGVCdWZmZXI9e3NwYXRpYWxSZWxhdGlvbkVuYWJsZUJ1ZmZlcn1cbiAgICAgICAgICAgICAgZHNCdWZmZXJEaXN0YW5jZT17c3BhdGlhbFJlbGF0aW9uQnVmZmVyRGlzdGFuY2V9XG4gICAgICAgICAgICAgIGRzQnVmZmVyVW5pdD17c3BhdGlhbFJlbGF0aW9uQnVmZmVyVW5pdH1cbiAgICAgICAgICAgICAgZHJhd0VuYWJsZUJ1ZmZlcj17c3BhdGlhbEludGVyYWN0aXZlRW5hYmxlQnVmZmVyfVxuICAgICAgICAgICAgICBkcmF3QnVmZmVyRGlzdGFuY2U9e3NwYXRpYWxJbnRlcmFjdGl2ZUJ1ZmZlckRpc3RhbmNlfVxuICAgICAgICAgICAgICBkcmF3QnVmZmVyVW5pdD17c3BhdGlhbEludGVyYWN0aXZlQnVmZmVyVW5pdH1cbiAgICAgICAgICAgICAgdXNlRGF0YVNvdXJjZXM9e3NwYXRpYWxSZWxhdGlvblVzZURhdGFTb3VyY2VzfVxuICAgICAgICAgICAgICB1c2VSdW50aW1lRGF0YT17c3BhdGlhbEluY2x1ZGVSdW50aW1lRGF0YX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSdxdWVyeS1mb3JtX19hY3Rpb25zIHB4LTQgZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlcic+XG4gICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICBjaGVja2VkPXtydW50aW1lWm9vbVRvU2VsZWN0ZWR9XG4gICAgICAgICAgICBvbkNoYW5nZT17KF8sIGNoZWNrZWQpID0+IHNldFJ1bnRpbWVab29tVG9TZWxlY3RlZChjaGVja2VkKX1cbiAgICAgICAgICAgIGNsYXNzTmFtZT0nbXItMidcbiAgICAgICAgICAvPlxuICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0nbXItYXV0bycgY3NzPXtjc3NgZm9udC1zaXplOiAwLjg3NXJlbTsgY29sb3I6IHZhcigtLXN5cy1jb2xvci10ZXh0LXByaW1hcnkpO2B9PlxuICAgICAgICAgICAge2dldEkxOG5NZXNzYWdlKCd6b29tVG9TZWxlY3RlZCcpfVxuICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICA8QnV0dG9uIHJlZj17YXBwbHlCdXR0b25SZWZ9IGNvbG9yPSdwcmltYXJ5JyBjbGFzc05hbWU9J21sLWF1dG8nIGRpc2FibGVkPXshZGF0YXNvdXJjZVJlYWR5IHx8ICFpc0lucHV0VmFsaWR9IG9uQ2xpY2s9e2FwcGx5UXVlcnl9PlxuICAgICAgICAgICAge2dldEkxOG5NZXNzYWdlKCdhcHBseScpfVxuICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgIHsoc2hvd0NsYXVzZU51bWJlci5jdXJyZW50ID4gMCB8fCBzaG93U3BhdGlhbEZpbHRlcikgJiYgKFxuICAgICAgICAgICAgPEJ1dHRvbiBjbGFzc05hbWU9J21sLTInIG9uQ2xpY2s9e3Jlc2V0UXVlcnl9PntnZXRJMThuTWVzc2FnZSgncmVzZXQnKX08L0J1dHRvbj5cbiAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvUXVlcnlUYXNrQ29udGV4dC5Qcm92aWRlcj5cbiAgKVxufVxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQgeyBqc3gsIGNzcywgdHlwZSBJY29uUmVzdWx0LCB0eXBlIEltbXV0YWJsZU9iamVjdCB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IEljb24gfSBmcm9tICdqaW11LXVpJ1xuXG5pbnRlcmZhY2UgQ29udGVudFByb3BzIHtcbiAgaWNvbj86IEljb25SZXN1bHQgfCBJbW11dGFibGVPYmplY3Q8SWNvblJlc3VsdD5cbiAgbmFtZTogc3RyaW5nXG59XG5cbmNvbnN0IHRleHRTdHlsZSA9IGNzc2BcbiAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgZm9udC1zaXplOiAwLjg3NXJlbTtcbmBcblxuZXhwb3J0IGZ1bmN0aW9uIFF1ZXJ5VGFza0xhYmVsIChwcm9wczogQ29udGVudFByb3BzKSB7XG4gIGNvbnN0IHsgaWNvbiwgbmFtZSB9ID0gcHJvcHNcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPSdkLWZsZXggYWxpZ24taXRlbXMtY2VudGVyIHRleHQtdHJ1bmNhdGUnIGNzcz17dGV4dFN0eWxlfT5cbiAgICAgIHtpY29uICYmIDxJY29uIGNsYXNzTmFtZT0ncXVlcnktdGFzay1pY29uIG1yLTInIGljb249e2ljb24uc3ZnfSAvPn1cbiAgICAgIDxkaXYgY2xhc3NOYW1lPSd0ZXh0LXRydW5jYXRlJyB0aXRsZT17bmFtZX0+XG4gICAgICAgIHtuYW1lfVxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIClcbn1cblxuXG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7IGpzeCwgY3NzLCBSZWFjdCwgdHlwZSBJbW11dGFibGVBcnJheSwgY2xhc3NOYW1lcywgbG9kYXNoLCBob29rcyB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB0eXBlIHsgU2l6ZSB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQgdHlwZSB7IFF1ZXJ5SXRlbVR5cGUgfSBmcm9tICcuLi9jb25maWcnXG5pbXBvcnQgeyBRdWVyeVRhc2sgfSBmcm9tICcuL3F1ZXJ5LXRhc2snXG5pbXBvcnQgeyBRdWVyeVRhc2tMaXN0IH0gZnJvbSAnLi9xdWVyeS10YXNrLWxpc3QnXG5pbXBvcnQgeyBUYXNrTGlzdFBvcHBlcldyYXBwZXIgfSBmcm9tICcuL3F1ZXJ5LXRhc2stbGlzdC1wb3BwZXItd3JhcHBlcidcbmltcG9ydCB7IGdldFdpZGdldFJ1bnRpbWVEYXRhTWFwIH0gZnJvbSAnLi93aWRnZXQtY29uZmlnJ1xuaW1wb3J0IHsgREVGQVVMVF9RVUVSWV9JVEVNIH0gZnJvbSAnLi4vZGVmYXVsdC1xdWVyeS1pdGVtJ1xuXG5jb25zdCB7IGljb25NYXAgfSA9IGdldFdpZGdldFJ1bnRpbWVEYXRhTWFwKClcblxuZXhwb3J0IGludGVyZmFjZSBRdWVyeVRhc2tMaXN0UHJvcHMge1xuICB3aWRnZXRJZDogc3RyaW5nXG4gIHdpZGdldExhYmVsOiBzdHJpbmdcbiAgd3JhcDogYm9vbGVhblxuICBtaW5TaXplOiBTaXplXG4gIGRlZmF1bHRTaXplOiBTaXplXG4gIHF1ZXJ5SXRlbXM6IEltbXV0YWJsZUFycmF5PFF1ZXJ5SXRlbVR5cGU+XG4gIGRlZmF1bHRQYWdlU2l6ZT86IG51bWJlclxuICBpbml0aWFsUXVlcnlWYWx1ZT86IHsgc2hvcnRJZDogc3RyaW5nLCB2YWx1ZTogc3RyaW5nIH1cbiAgb25IYXNoUGFyYW1ldGVyVXNlZD86IChzaG9ydElkOiBzdHJpbmcpID0+IHZvaWRcbn1cblxuY29uc3QgU1BBQ0UgPSA4XG5cbmNvbnN0IHN0eWxlID0gY3NzYFxuICA+IGRpdiB7XG4gICAgbWFyZ2luLXJpZ2h0OiA4cHg7XG4gIH1cbmBcblxuLy8gc2hvdyB0YXNrIGxhYmVsIGFuZCBhbiBhcnJvdyB0byB0aGUgdGFzayBjb250ZW50XG5leHBvcnQgZnVuY3Rpb24gVGFza0xpc3RJbmxpbmUgKHByb3BzOiBRdWVyeVRhc2tMaXN0UHJvcHMpIHtcbiAgY29uc3QgeyBxdWVyeUl0ZW1zLCB3aWRnZXRJZCwgbWluU2l6ZSwgZGVmYXVsdFNpemUsIGRlZmF1bHRQYWdlU2l6ZSwgd2lkZ2V0TGFiZWwsIHdyYXAgPSBmYWxzZSB9ID0gcHJvcHNcbiAgY29uc3QgY29udGFpbmVyUmVmID0gUmVhY3QudXNlUmVmPEhUTUxEaXZFbGVtZW50Pih1bmRlZmluZWQpXG4gIGNvbnN0IGNvbnRhaW5lcldpZHRoUmVmID0gUmVhY3QudXNlUmVmPG51bWJlcj4oMClcbiAgY29uc3QgY29udGVudFdpZHRoUmVmID0gUmVhY3QudXNlUmVmPHsgW2tleTogc3RyaW5nXTogbnVtYmVyIH0+KHt9KVxuICBjb25zdCBbbnVtT2ZFeHBhbmRlZCwgc2V0TnVtT2ZFeHBhbmRlZF0gPSBSZWFjdC51c2VTdGF0ZShxdWVyeUl0ZW1zLmxlbmd0aClcbiAgY29uc3QgW29wZW5lZFBvcHBlciwgc2V0T3BlbmVkUG9wcGVyXSA9IFJlYWN0LnVzZVN0YXRlKC0xKVxuICBjb25zdCByZXNpemVPYnNlcnZlclJlZiA9IFJlYWN0LnVzZVJlZjxSZXNpemVPYnNlcnZlcj4obnVsbClcblxuICBjb25zdCBhZGp1c3RDb250ZW50ID0gUmVhY3QudXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGxldCB0b3RhbCA9IDBcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bU9mRXhwYW5kZWQ7IGkrKykge1xuICAgICAgY29uc3QgaXRlbSA9IHF1ZXJ5SXRlbXNbaV1cbiAgICAgIGNvbnN0IGl0ZW1XaWR0aCA9IGNvbnRlbnRXaWR0aFJlZi5jdXJyZW50W2l0ZW0uY29uZmlnSWRdXG4gICAgICBpZiAoaXRlbVdpZHRoID4gMCkge1xuICAgICAgICB0b3RhbCArPSBpdGVtV2lkdGggKyBTUEFDRVxuICAgICAgICBpZiAodG90YWwgPj0gY29udGFpbmVyV2lkdGhSZWYuY3VycmVudCAmJiBudW1PZkV4cGFuZGVkICE9PSBpKSB7XG4gICAgICAgICAgc2V0TnVtT2ZFeHBhbmRlZChpKVxuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gLy8gY29udGVudCB3aWR0aCBub3QgcmVhZHlcbiAgICAgIH1cbiAgICB9XG4gICAgc2V0TnVtT2ZFeHBhbmRlZChxdWVyeUl0ZW1zLmxlbmd0aClcbiAgfSwgW251bU9mRXhwYW5kZWQsIHF1ZXJ5SXRlbXNdKVxuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHJlc2l6ZU9ic2VydmVyUmVmLmN1cnJlbnQpIHtcbiAgICAgIHJlc2l6ZU9ic2VydmVyUmVmLmN1cnJlbnQuZGlzY29ubmVjdCgpXG4gICAgfVxuICAgIC8vIGJpbmQgd2l0aCB0aGUgbmV3IGV2ZW50IGhhbmRsZXJcbiAgICByZXNpemVPYnNlcnZlclJlZi5jdXJyZW50ID0gbmV3IFJlc2l6ZU9ic2VydmVyKGxvZGFzaC50aHJvdHRsZSgoZW50cmllcykgPT4ge1xuICAgICAgY29uc3Qgd2lkdGggPSBNYXRoLnJvdW5kKGVudHJpZXNbMF0uY29udGVudFJlY3Qud2lkdGgpXG4gICAgICBpZiAoY29udGFpbmVyV2lkdGhSZWYuY3VycmVudCAhPT0gd2lkdGgpIHtcbiAgICAgICAgY29udGFpbmVyV2lkdGhSZWYuY3VycmVudCA9IHdpZHRoXG4gICAgICAgIGFkanVzdENvbnRlbnQoKVxuICAgICAgfVxuICAgIH0sIDIwMCkpXG4gICAgcmVzaXplT2JzZXJ2ZXJSZWYuY3VycmVudC5vYnNlcnZlKGNvbnRhaW5lclJlZi5jdXJyZW50KVxuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHJlc2l6ZU9ic2VydmVyUmVmLmN1cnJlbnQuZGlzY29ubmVjdCgpXG4gICAgfVxuICB9LCBbYWRqdXN0Q29udGVudF0pXG5cbiAgaG9va3MudXNlRWZmZWN0T25jZSgoKSA9PiB7XG4gICAgY29udGFpbmVyV2lkdGhSZWYuY3VycmVudCA9IGNvbnRhaW5lclJlZi5jdXJyZW50Py5jbGllbnRXaWR0aFxuICAgIGFkanVzdENvbnRlbnQoKVxuICB9KVxuXG4gIGNvbnN0IGhhbmRsZUl0ZW1XaWR0aENoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKChpbmRleDogbnVtYmVyLCB3aWR0aDogbnVtYmVyKSA9PiB7XG4gICAgY29uc3QgcXVlcnlJdGVtID0gcXVlcnlJdGVtc1tpbmRleF1cbiAgICBpZiAoY29udGVudFdpZHRoUmVmLmN1cnJlbnRbcXVlcnlJdGVtLmNvbmZpZ0lkXSAhPT0gd2lkdGgpIHtcbiAgICAgIGNvbnRlbnRXaWR0aFJlZi5jdXJyZW50W3F1ZXJ5SXRlbS5jb25maWdJZF0gPSB3aWR0aFxuICAgICAgYWRqdXN0Q29udGVudCgpXG4gICAgfVxuICB9LCBbcXVlcnlJdGVtcywgYWRqdXN0Q29udGVudF0pXG5cbiAgY29uc3QgaGFuZGxlUG9wcGVyT3BlbmVkQ2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soKGluZGV4OiBudW1iZXIsIGlzT3BlbjogYm9vbGVhbikgPT4ge1xuICAgIGlmIChpc09wZW4pIHtcbiAgICAgIHNldE9wZW5lZFBvcHBlcihpbmRleClcbiAgICB9IGVsc2UgaWYgKGluZGV4ID09PSBvcGVuZWRQb3BwZXIpIHtcbiAgICAgIC8vIGN1cnJlbnQgcG9wcGVyIGlzIGNsb3NlZFxuICAgICAgc2V0T3BlbmVkUG9wcGVyKC0xKVxuICAgIH1cbiAgfSwgW29wZW5lZFBvcHBlcl0pXG5cbiAgY29uc3QgW2V4cGFuZGVkQXJyYXksIG5vbkV4cGFuZGVkQXJyYXldID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgY29uc3QgZXhwYW5kZWRBcnJheSA9IFtdXG4gICAgY29uc3Qgbm9uRXhwYW5kZWRBcnJheSA9IFtdXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBxdWVyeUl0ZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoaSA8IG51bU9mRXhwYW5kZWQpIHtcbiAgICAgICAgZXhwYW5kZWRBcnJheS5wdXNoKHF1ZXJ5SXRlbXNbaV0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBub25FeHBhbmRlZEFycmF5LnB1c2gocXVlcnlJdGVtc1tpXSlcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIFtleHBhbmRlZEFycmF5LCBub25FeHBhbmRlZEFycmF5XVxuICB9LCBbcXVlcnlJdGVtcywgbnVtT2ZFeHBhbmRlZF0pXG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IHJlZj17Y29udGFpbmVyUmVmfSBjc3M9e3N0eWxlfSBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ3J1bnRpbWUtcXVlcnlfX3F1ZXJ5LWxpc3QgaC0xMDAgZC1mbGV4JywgeyAnZmxleC13cmFwJzogd3JhcCwgJ2FsaWduLWNvbnRlbnQtc3RhcnQnOiB3cmFwIH0pfT5cbiAgICAgIHtleHBhbmRlZEFycmF5Lm1hcCgocXVlcnlJdGVtLCBpbmRleCkgPT4ge1xuICAgICAgICBjb25zdCBjdXJyZW50SXRlbSA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfUVVFUllfSVRFTSwgcXVlcnlJdGVtKVxuICAgICAgICByZXR1cm4gPFRhc2tMaXN0UG9wcGVyV3JhcHBlclxuICAgICAgICAgIGlkPXtpbmRleH1cbiAgICAgICAgICBrZXk9e2N1cnJlbnRJdGVtLmNvbmZpZ0lkfVxuICAgICAgICAgIGljb249e2N1cnJlbnRJdGVtLmljb259XG4gICAgICAgICAgYnV0dG9uVHlwZT0nZGVmYXVsdCdcbiAgICAgICAgICBsYWJlbD17Y3VycmVudEl0ZW0uZGlzcGxheUxhYmVsID8gY3VycmVudEl0ZW0ubmFtZSA6IHVuZGVmaW5lZH1cbiAgICAgICAgICBwb3BwZXJUaXRsZT17Y3VycmVudEl0ZW0ubmFtZX1cbiAgICAgICAgICBvbldpZHRoQ2hhbmdlPXtoYW5kbGVJdGVtV2lkdGhDaGFuZ2V9XG4gICAgICAgICAgbWluU2l6ZT17bWluU2l6ZX1cbiAgICAgICAgICBkZWZhdWx0U2l6ZT17ZGVmYXVsdFNpemV9XG4gICAgICAgICAgb25PcGVuZWRDaGFuZ2U9e2hhbmRsZVBvcHBlck9wZW5lZENoYW5nZX1cbiAgICAgICAgICBmb3JjZUNsb3NlPXtvcGVuZWRQb3BwZXIgPj0gMCAmJiBvcGVuZWRQb3BwZXIgIT09IGluZGV4fVxuICAgICAgICA+XG4gICAgICAgICAgPFF1ZXJ5VGFza1xuICAgICAgICAgICAgd2lkZ2V0SWQ9e3dpZGdldElkfVxuICAgICAgICAgICAgaW5kZXg9e2luZGV4fVxuICAgICAgICAgICAgdG90YWw9ezF9XG4gICAgICAgICAgICBpc0luUG9wcGVyXG4gICAgICAgICAgICBxdWVyeUl0ZW09e2N1cnJlbnRJdGVtfVxuICAgICAgICAgICAgd3JhcHBlZEluUG9wcGVyPXt0cnVlfVxuICAgICAgICAgICAgY2xhc3NOYW1lPSdwYi00J1xuICAgICAgICAgICAgZGVmYXVsdFBhZ2VTaXplPXtkZWZhdWx0UGFnZVNpemV9XG4gICAgICAgICAgICBpbml0aWFsSW5wdXRWYWx1ZT17Y3VycmVudEl0ZW0uc2hvcnRJZCA9PT0gcHJvcHMuaW5pdGlhbFF1ZXJ5VmFsdWU/LnNob3J0SWQgPyBwcm9wcy5pbml0aWFsUXVlcnlWYWx1ZS52YWx1ZSA6IHVuZGVmaW5lZH1cbiAgICAgICAgICAgIG9uSGFzaFBhcmFtZXRlclVzZWQ9e3Byb3BzLm9uSGFzaFBhcmFtZXRlclVzZWR9XG4gICAgICAgICAgICBxdWVyeUl0ZW1TaG9ydElkPXtjdXJyZW50SXRlbS5zaG9ydElkfVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvVGFza0xpc3RQb3BwZXJXcmFwcGVyPlxuICAgICAgfSl9XG5cbiAgICAgIHtub25FeHBhbmRlZEFycmF5Lmxlbmd0aCA+IDAgJiYgKFxuICAgICAgICA8VGFza0xpc3RQb3BwZXJXcmFwcGVyXG4gICAgICAgICAgaWQ9e2V4cGFuZGVkQXJyYXkubGVuZ3RoICsgMX1cbiAgICAgICAgICBpY29uPXtpY29uTWFwLmljb25Nb3JlfVxuICAgICAgICAgIG1pblNpemU9e21pblNpemV9XG4gICAgICAgICAgYnV0dG9uVHlwZT0nZGVmYXVsdCdcbiAgICAgICAgICBwb3BwZXJUaXRsZT17d2lkZ2V0TGFiZWx9XG4gICAgICAgICAgZGVmYXVsdFNpemU9e2RlZmF1bHRTaXplfVxuICAgICAgICAgIG9uT3BlbmVkQ2hhbmdlPXtoYW5kbGVQb3BwZXJPcGVuZWRDaGFuZ2V9XG4gICAgICAgICAgZm9yY2VDbG9zZT17b3BlbmVkUG9wcGVyID49IDAgJiYgb3BlbmVkUG9wcGVyICE9PSBleHBhbmRlZEFycmF5Lmxlbmd0aCArIDF9XG4gICAgICAgID5cbiAgICAgICAgICA8UXVlcnlUYXNrTGlzdCB3aWRnZXRJZD17d2lkZ2V0SWR9IGlzSW5Qb3BwZXIgZGVmYXVsdFBhZ2VTaXplPXtkZWZhdWx0UGFnZVNpemV9IHF1ZXJ5SXRlbXM9e25vbkV4cGFuZGVkQXJyYXkgYXMgYW55fSBjbGFzc05hbWU9J3BiLTQnIGluaXRpYWxRdWVyeVZhbHVlPXtwcm9wcy5pbml0aWFsUXVlcnlWYWx1ZX0gb25IYXNoUGFyYW1ldGVyVXNlZD17cHJvcHMub25IYXNoUGFyYW1ldGVyVXNlZH0gLz5cbiAgICAgICAgPC9UYXNrTGlzdFBvcHBlcldyYXBwZXI+XG4gICAgICApfVxuICAgIDwvZGl2PlxuICApXG59XG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7IGpzeCwgY3NzLCBSZWFjdCwgdHlwZSBJY29uUmVzdWx0LCB0eXBlIEltbXV0YWJsZU9iamVjdCwgbG9kYXNoLCBjbGFzc05hbWVzLCBob29rcywgaXNLZXlib2FyZE1vZGUsIGZvY3VzRWxlbWVudEluS2V5Ym9hcmRNb2RlIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgQnV0dG9uLCBJY29uLCBNb2JpbGVQYW5lbCwgdHlwZSBTaXplLCB0eXBlIEJ1dHRvblR5cGUsIEZPQ1VTQUJMRV9DT05UQUlORVJfQ0xBU1MsIEZsb2F0aW5nUGFuZWwsIHR5cGUgU2hpZnRPcHRpb25zIH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB7IFdJREdFVF9WRVJTSU9OIH0gZnJvbSAnLi4vdmVyc2lvbidcblxuZXhwb3J0IGludGVyZmFjZSBUYXNrTGlzdFBvcHBlcldyYXBwZXJQcm9wcyB7XG4gIGlkOiBudW1iZXJcbiAgaWNvbj86IHN0cmluZyB8IEltbXV0YWJsZU9iamVjdDxJY29uUmVzdWx0PlxuICBsYWJlbD86IHN0cmluZ1xuICBmb3JjZUNsb3NlPzogYm9vbGVhblxuICBwb3BwZXJUaXRsZT86IHN0cmluZ1xuICBidXR0b25UeXBlPzogQnV0dG9uVHlwZVxuICBvbldpZHRoQ2hhbmdlPzogKGlkOiBudW1iZXIsIHdpZHRoOiBudW1iZXIpID0+IHZvaWRcbiAgb25PcGVuZWRDaGFuZ2U/OiAoaWQ6IG51bWJlciwgaXNPcGVuOiBib29sZWFuKSA9PiB2b2lkXG4gIG1pblNpemU6IFNpemVcbiAgZGVmYXVsdFNpemU6IFNpemVcbiAgY2hpbGRyZW46IFJlYWN0LlJlYWN0RWxlbWVudDxhbnk+XG59XG5cbmNvbnN0IHNoaWZ0T3B0aW9uczogU2hpZnRPcHRpb25zID0geyBwYWRkaW5nOiAxIH1cblxuZXhwb3J0IGZ1bmN0aW9uIFRhc2tMaXN0UG9wcGVyV3JhcHBlciAocHJvcHM6IFRhc2tMaXN0UG9wcGVyV3JhcHBlclByb3BzKSB7XG4gIGNvbnN0IHsgaWQsIGljb24sIGxhYmVsLCBmb3JjZUNsb3NlLCBvbk9wZW5lZENoYW5nZSwgcG9wcGVyVGl0bGUsIG1pblNpemUsIGRlZmF1bHRTaXplLCBvbldpZHRoQ2hhbmdlLCBidXR0b25UeXBlID0gJ3RlcnRpYXJ5JywgY2hpbGRyZW4gfSA9IHByb3BzXG4gIGNvbnN0IGljb25SZWYgPSBSZWFjdC51c2VSZWY8SFRNTEJ1dHRvbkVsZW1lbnQ+KHVuZGVmaW5lZClcbiAgY29uc3Qgd2lkdGhSZWYgPSBSZWFjdC51c2VSZWYoMClcbiAgY29uc3QgW2lzT3Blbiwgc2V0SXNPcGVuXSA9IFJlYWN0LnVzZVN0YXRlKGZhbHNlKVxuICBjb25zdCBbcG9wcGVyVmVyc2lvbiwgc2V0UG9wcGVyVmVyc2lvbl0gPSBSZWFjdC51c2VTdGF0ZSgwKVxuICBjb25zdCBpc01vYmlsZSA9IGhvb2tzLnVzZUNoZWNrU21hbGxCcm93c2VyU2l6ZU1vZGUoKVxuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGZvcmNlQ2xvc2UpIHtcbiAgICAgIHNldElzT3BlbihmYWxzZSlcbiAgICB9XG4gIH0sIFtmb3JjZUNsb3NlXSlcblxuICBob29rcy51c2VFZmZlY3RPbmNlKCgpID0+IHtcbiAgICBpZiAodHlwZW9mIG9uV2lkdGhDaGFuZ2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHdpZHRoUmVmLmN1cnJlbnQgPSBNYXRoLnJvdW5kKGljb25SZWYuY3VycmVudC5jbGllbnRXaWR0aClcbiAgICAgIG9uV2lkdGhDaGFuZ2UoaWQsIHdpZHRoUmVmLmN1cnJlbnQpXG4gICAgICBjb25zdCByZXNpemVPYnNlcnZlciA9IG5ldyBSZXNpemVPYnNlcnZlcihsb2Rhc2gudGhyb3R0bGUoKGVudHJpZXMpID0+IHtcbiAgICAgICAgY29uc3Qgd2lkdGggPSBNYXRoLnJvdW5kKGVudHJpZXNbMF0uY29udGVudFJlY3Qud2lkdGgpXG4gICAgICAgIGlmICh3aWR0aFJlZi5jdXJyZW50ICE9PSB3aWR0aCkge1xuICAgICAgICAgIHdpZHRoUmVmLmN1cnJlbnQgPSB3aWR0aFxuICAgICAgICAgIG9uV2lkdGhDaGFuZ2UoaWQsIHdpZHRoKVxuICAgICAgICB9XG4gICAgICB9LCAyMDApKVxuICAgICAgcmVzaXplT2JzZXJ2ZXIub2JzZXJ2ZShpY29uUmVmLmN1cnJlbnQpXG5cbiAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgIHJlc2l6ZU9ic2VydmVyLmRpc2Nvbm5lY3QoKVxuICAgICAgfVxuICAgIH1cbiAgfSlcblxuICBjb25zdCB0b2dnbGVQb3BwZXIgPSBSZWFjdC51c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgaWYgKHR5cGVvZiBvbk9wZW5lZENoYW5nZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgb25PcGVuZWRDaGFuZ2UoaWQsICFpc09wZW4pXG4gICAgfVxuICAgIHNldElzT3BlbighaXNPcGVuKVxuICAgIHNldFBvcHBlclZlcnNpb24ocG9wcGVyVmVyc2lvbiArIDEpXG4gICAgaWYgKGlzT3Blbikge1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGlmIChpc0tleWJvYXJkTW9kZSgpKSB7XG4gICAgICAgICAgZm9jdXNFbGVtZW50SW5LZXlib2FyZE1vZGUoaWNvblJlZi5jdXJyZW50KVxuICAgICAgICB9XG4gICAgICB9LCAyMDApXG4gICAgfVxuICB9LCBbaWQsIGlzT3BlbiwgcG9wcGVyVmVyc2lvbiwgb25PcGVuZWRDaGFuZ2VdKVxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9J3J1bnRpbWUtcXVlcnlfX3dpZGdldC1wb3BwZXInPlxuICAgICAgPEJ1dHRvblxuICAgICAgICB0aXRsZT17bGFiZWx9XG4gICAgICAgIGFyaWEtbGFiZWw9e2xhYmVsfVxuICAgICAgICBpY29uIHNpemU9J3NtJ1xuICAgICAgICB2YXJpYW50PXtidXR0b25UeXBlID09PSAndGVydGlhcnknID8gJ3RleHQnIDogdW5kZWZpbmVkfVxuICAgICAgICBjb2xvcj17YnV0dG9uVHlwZSA9PT0gJ3RlcnRpYXJ5JyA/ICdpbmhlcml0JyA6IHVuZGVmaW5lZH1cbiAgICAgICAgdHlwZT17YnV0dG9uVHlwZSA9PT0gJ3RlcnRpYXJ5JyA/IHVuZGVmaW5lZCA6IGJ1dHRvblR5cGV9XG4gICAgICAgIHJlZj17aWNvblJlZn1cbiAgICAgICAgb25DbGljaz17dG9nZ2xlUG9wcGVyfVxuICAgICAgPlxuICAgICAgICB7aWNvbiAmJiA8SWNvblxuICAgICAgICAgIHNpemU9ezE2fVxuICAgICAgICAgIHsuLi4odHlwZW9mIGljb24gPT09ICdzdHJpbmcnID8geyBpY29uIH0gOiB7IGljb246IGljb24uc3ZnLCBjb2xvcjogYnV0dG9uVHlwZSA9PT0gJ3RlcnRpYXJ5JyA/IHVuZGVmaW5lZCA6IGljb24ucHJvcGVydGllcy5jb2xvciB9KX1cbiAgICAgICAgLz59XG4gICAgICAgIHtsYWJlbCAmJiA8ZGl2XG4gICAgICAgICAgY3NzPXtjc3NgXG4gICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICAgICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gICAgICAgICAgICBkaXNwbGF5OiAtd2Via2l0LWJveDtcbiAgICAgICAgICAgIC13ZWJraXQtbGluZS1jbGFtcDogMjtcbiAgICAgICAgICAgIC13ZWJraXQtYm94LW9yaWVudDogdmVydGljYWw7XG4gICAgICAgICAgICB3b3JkLWJyZWFrOiBicmVhay13b3JkO1xuICAgICAgICAgICAgd29yZC13cmFwOiBicmVhay13b3JkO1xuICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEuMjtcbiAgICAgICAgICBgfVxuICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcyh7ICdtbC0yJzogaWNvbiAhPSBudWxsIH0pfT57bGFiZWx9PC9kaXY+fVxuICAgICAgPC9CdXR0b24+XG4gICAgICB7aXNNb2JpbGVcbiAgICAgICAgPyA8TW9iaWxlUGFuZWwgb3Blbj17aXNPcGVufSB0aXRsZT17cG9wcGVyVGl0bGV9IG9uQ2xvc2U9e3RvZ2dsZVBvcHBlcn0+XG4gICAgICAgICAgICA8ZGl2IGNzcz17Y3NzYFxuICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgPGRpdiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICBmbGV4OiAxO1xuICAgICAgICAgICAgICAgIG92ZXJmbG93OiBhdXRvO1xuICAgICAgICAgICAgICAgIHBhZGRpbmctYm90dG9tOiAxcmVtOyAvKiBTY29wZWQgcGFkZGluZyB0byBzcGFjZSBjb250ZW50IGZyb20gZm9vdGVyICovXG4gICAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICAgIHtjaGlsZHJlbn1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIHsvKiBTdGF0aW9uYXJ5IGZvb3RlciAqL31cbiAgICAgICAgICAgICAgPGRpdiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiA0cHggMTJweDtcbiAgICAgICAgICAgICAgICBib3JkZXItdG9wOiAxcHggc29saWQgdmFyKC0tc3lzLWNvbG9yLWRpdmlkZXItc2Vjb25kYXJ5KTtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1zeXMtY29sb3Itc3VyZmFjZS1wYXBlcik7XG4gICAgICAgICAgICAgICAgZmxleC1zaHJpbms6IDA7XG4gICAgICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgICA8c3BhbiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC43NXJlbTtcbiAgICAgICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS1zeXMtY29sb3ItdGV4dC10ZXJ0aWFyeSk7XG4gICAgICAgICAgICAgICAgICBmb250LXdlaWdodDogNDAwO1xuICAgICAgICAgICAgICAgICAgbGV0dGVyLXNwYWNpbmc6IDAuMDI1ZW07XG4gICAgICAgICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtZmxleDtcbiAgICAgICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgICAgICAgICBnYXA6IDRweDtcbiAgICAgICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgICAgIHsvKiBDb2RlL09wZW4gU291cmNlIFN5bWJvbCAqL31cbiAgICAgICAgICAgICAgICAgIDxzdmcgXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoPVwiMTRcIiBcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0PVwiMTRcIiBcbiAgICAgICAgICAgICAgICAgICAgdmlld0JveD1cIjAgMCAyNCAyNFwiIFxuICAgICAgICAgICAgICAgICAgICBmaWxsPVwibm9uZVwiIFxuICAgICAgICAgICAgICAgICAgICBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBcbiAgICAgICAgICAgICAgICAgICAgc3Ryb2tlV2lkdGg9XCIyXCJcbiAgICAgICAgICAgICAgICAgICAgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICAgICAgZmxleC1zaHJpbms6IDA7XG4gICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMC42O1xuICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8cG9seWxpbmUgcG9pbnRzPVwiMTYgMTggMjIgMTIgMTYgNlwiLz5cbiAgICAgICAgICAgICAgICAgICAgPHBvbHlsaW5lIHBvaW50cz1cIjggNiAyIDEyIDggMThcIi8+XG4gICAgICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgICAgICAgIFF1ZXJ5U2ltcGxlIGJ5IE1hcFNpbXBsZVxuICAgICAgICAgICAgICAgICAgPHNwYW4gY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiA2cHg7XG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAuNTtcbiAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjdyZW07XG4gICAgICAgICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgICAgICAgdntXSURHRVRfVkVSU0lPTn1cbiAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9Nb2JpbGVQYW5lbD5cbiAgICAgICAgOiA8RmxvYXRpbmdQYW5lbFxuICAgICAgICAgICAgY2xhc3NOYW1lPSd1aS11bml0LXBvcHBlciB1aS11bml0LXBvcHBlcl9rLWFycmFuZ2VtZW50LWljb24gZmxleC1ncm93LTEnXG4gICAgICAgICAgICBoZWFkZXJDbGFzc05hbWU9e0ZPQ1VTQUJMRV9DT05UQUlORVJfQ0xBU1N9XG4gICAgICAgICAgICBvcGVuPXtpc09wZW59XG4gICAgICAgICAgICBvbkhlYWRlckNsb3NlPXt0b2dnbGVQb3BwZXJ9XG4gICAgICAgICAgICB0b2dnbGU9e3RvZ2dsZVBvcHBlcn1cbiAgICAgICAgICAgIGhlYWRlclRpdGxlPXtwb3BwZXJUaXRsZX1cbiAgICAgICAgICAgIG1pblNpemU9e21pblNpemV9XG4gICAgICAgICAgICBkZWZhdWx0U2l6ZT17ZGVmYXVsdFNpemV9XG4gICAgICAgICAgICBkcmFnQm91bmRzPSdib2R5J1xuICAgICAgICAgICAgdmVyc2lvbj17cG9wcGVyVmVyc2lvbn1cbiAgICAgICAgICAgIHJlZmVyZW5jZT17aWNvblJlZn1cbiAgICAgICAgICAgIHBsYWNlbWVudD0nYm90dG9tLXN0YXJ0J1xuICAgICAgICAgICAgc2hpZnRPcHRpb25zPXtzaGlmdE9wdGlvbnN9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgPGRpdiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgIDxkaXYgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICAgICAgICBvdmVyZmxvdzogYXV0bztcbiAgICAgICAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogMXJlbTsgLyogU2NvcGVkIHBhZGRpbmcgdG8gc3BhY2UgY29udGVudCBmcm9tIGZvb3RlciAqL1xuICAgICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgICB7Y2hpbGRyZW59XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICB7LyogU3RhdGlvbmFyeSBmb290ZXIgKi99XG4gICAgICAgICAgICAgIDxkaXYgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgcGFkZGluZzogNHB4IDEycHg7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkIHZhcigtLXN5cy1jb2xvci1kaXZpZGVyLXNlY29uZGFyeSk7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tc3lzLWNvbG9yLXN1cmZhY2UtcGFwZXIpO1xuICAgICAgICAgICAgICAgIGZsZXgtc2hyaW5rOiAwO1xuICAgICAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAgPHNwYW4gY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICBmb250LXNpemU6IDAuNzVyZW07XG4gICAgICAgICAgICAgICAgICBjb2xvcjogdmFyKC0tc3lzLWNvbG9yLXRleHQtdGVydGlhcnkpO1xuICAgICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDQwMDtcbiAgICAgICAgICAgICAgICAgIGxldHRlci1zcGFjaW5nOiAwLjAyNWVtO1xuICAgICAgICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWZsZXg7XG4gICAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgICAgICAgICAgZ2FwOiA0cHg7XG4gICAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAgICB7LyogQ29kZS9PcGVuIFNvdXJjZSBTeW1ib2wgKi99XG4gICAgICAgICAgICAgICAgICA8c3ZnIFxuICAgICAgICAgICAgICAgICAgICB3aWR0aD1cIjE0XCIgXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodD1cIjE0XCIgXG4gICAgICAgICAgICAgICAgICAgIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBcbiAgICAgICAgICAgICAgICAgICAgZmlsbD1cIm5vbmVcIiBcbiAgICAgICAgICAgICAgICAgICAgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgXG4gICAgICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoPVwiMlwiXG4gICAgICAgICAgICAgICAgICAgIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgICAgICAgIGZsZXgtc2hyaW5rOiAwO1xuICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAuNjtcbiAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPHBvbHlsaW5lIHBvaW50cz1cIjE2IDE4IDIyIDEyIDE2IDZcIi8+XG4gICAgICAgICAgICAgICAgICAgIDxwb2x5bGluZSBwb2ludHM9XCI4IDYgMiAxMiA4IDE4XCIvPlxuICAgICAgICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICAgICAgICBRdWVyeVNpbXBsZSBieSBNYXBTaW1wbGVcbiAgICAgICAgICAgICAgICAgIDxzcGFuIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgICAgICBtYXJnaW4tbGVmdDogNnB4O1xuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjU7XG4gICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC43cmVtO1xuICAgICAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAgICAgIHZ7V0lER0VUX1ZFUlNJT059XG4gICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvRmxvYXRpbmdQYW5lbD5cbiAgICAgIH1cbiAgICA8L2Rpdj5cbiAgKVxufVxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQgeyBqc3gsIGNzcywgUmVhY3QsIHR5cGUgSW1tdXRhYmxlQXJyYXksIEltbXV0YWJsZSwgdHlwZSBJbW11dGFibGVPYmplY3QsIGhvb2tzLCB0eXBlIEZlYXR1cmVMYXllckRhdGFTb3VyY2UsIHR5cGUgRmVhdHVyZURhdGFSZWNvcmQsIHR5cGUgRGF0YVNvdXJjZSB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IFNlbGVjdCB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQgdHlwZSB7IFF1ZXJ5SXRlbVR5cGUsIFNlbGVjdGlvblR5cGUgfSBmcm9tICcuLi9jb25maWcnXG5pbXBvcnQgeyBRdWVyeVRhc2sgfSBmcm9tICcuL3F1ZXJ5LXRhc2snXG5pbXBvcnQgeyBGT0NVU0FCTEVfQ09OVEFJTkVSX0NMQVNTIH0gZnJvbSAnamltdS11aSdcbmltcG9ydCBkZWZhdWx0TWVzc2FnZXMgZnJvbSAnLi90cmFuc2xhdGlvbnMvZGVmYXVsdCdcbmltcG9ydCB7IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIgfSBmcm9tICd3aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbidcbmltcG9ydCB0eXBlIHsgRXZlbnRNYW5hZ2VyIH0gZnJvbSAnLi9ob29rcy91c2UtZXZlbnQtaGFuZGxpbmcnXG5cbmNvbnN0IGRlYnVnTG9nZ2VyID0gY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlcigpXG5cbmV4cG9ydCBpbnRlcmZhY2UgUXVlcnlUYXNrTGlzdFByb3BzIHtcbiAgd2lkZ2V0SWQ6IHN0cmluZ1xuICBxdWVyeUl0ZW1zOiBJbW11dGFibGVBcnJheTxRdWVyeUl0ZW1UeXBlPlxuICBpc0luUG9wcGVyPzogYm9vbGVhblxuICBkZWZhdWx0UGFnZVNpemU/OiBudW1iZXJcbiAgY2xhc3NOYW1lPzogc3RyaW5nXG4gIGluaXRpYWxRdWVyeVZhbHVlPzogeyBzaG9ydElkOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcgfVxuICBzaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbj86IGJvb2xlYW5cbiAgb25IYXNoUGFyYW1ldGVyVXNlZD86IChzaG9ydElkOiBzdHJpbmcpID0+IHZvaWRcbiAgcmVzdWx0c01vZGU/OiBTZWxlY3Rpb25UeXBlXG4gIG9uUmVzdWx0c01vZGVDaGFuZ2U/OiAobW9kZTogU2VsZWN0aW9uVHlwZSkgPT4gdm9pZFxuICBhY2N1bXVsYXRlZFJlY29yZHM/OiBGZWF0dXJlRGF0YVJlY29yZFtdXG4gIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlPzogKHJlY29yZHM6IEZlYXR1cmVEYXRhUmVjb3JkW10pID0+IHZvaWRcbiAgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodD86IGJvb2xlYW5cbiAgZ3JhcGhpY3NMYXllcj86IF9fZXNyaS5HcmFwaGljc0xheWVyXG4gIG1hcFZpZXc/OiBfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXdcbiAgb25Jbml0aWFsaXplR3JhcGhpY3NMYXllcj86IChvdXRwdXREUzogRGF0YVNvdXJjZSkgPT4gUHJvbWlzZTx2b2lkPlxuICBvbkNsZWFyR3JhcGhpY3NMYXllcj86ICgpID0+IHZvaWRcbiAgYWN0aXZlVGFiPzogJ3F1ZXJ5JyB8ICdyZXN1bHRzJ1xuICBvblRhYkNoYW5nZT86ICh0YWI6ICdxdWVyeScgfCAncmVzdWx0cycpID0+IHZvaWRcbiAgZXZlbnRNYW5hZ2VyPzogRXZlbnRNYW5hZ2VyICAvLyBDaHVuayA3LjE6IEV2ZW50IEhhbmRsaW5nIE1hbmFnZXJcbiAgLy8gRklYIChyMDE4Ljk2KTogUmVtb3ZlZCBtYW51YWxseVJlbW92ZWRSZWNvcmRJZHMgYW5kIG9uTWFudWFsUmVtb3ZhbCAtIG5vIGxvbmdlciBuZWVkZWRcbn1cblxuaW50ZXJmYWNlIEdyb3VwZWRRdWVyaWVzIHtcbiAgZ3JvdXBzOiB7IFtncm91cElkOiBzdHJpbmddOiB7IGl0ZW1zOiBJbW11dGFibGVBcnJheTxRdWVyeUl0ZW1UeXBlPiwgZGlzcGxheU5hbWU6IHN0cmluZywgaWNvbj86IGFueSB9IH1cbiAgdW5ncm91cGVkOiBBcnJheTx7IGl0ZW06IEltbXV0YWJsZU9iamVjdDxRdWVyeUl0ZW1UeXBlPiwgaW5kZXg6IG51bWJlciB9PlxuICBncm91cE9yZGVyOiBzdHJpbmdbXVxufVxuXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gc29ydCBxdWVyaWVzIGJ5IGRpc3BsYXkgb3JkZXIgKGxvd2VyIG51bWJlcnMgYXBwZWFyIGZpcnN0KVxuLy8gUXVlcmllcyB3aXRob3V0IG9yZGVyIG1haW50YWluIHRoZWlyIG9yaWdpbmFsIHJlbGF0aXZlIHBvc2l0aW9uc1xuZnVuY3Rpb24gc29ydFF1ZXJ5SXRlbXNCeU9yZGVyKHF1ZXJ5SXRlbXM6IEltbXV0YWJsZUFycmF5PFF1ZXJ5SXRlbVR5cGU+KTogSW1tdXRhYmxlQXJyYXk8UXVlcnlJdGVtVHlwZT4ge1xuICAvLyBIYW5kbGUgbnVsbC91bmRlZmluZWQvZW1wdHkgY2FzZXNcbiAgaWYgKCFxdWVyeUl0ZW1zIHx8IHF1ZXJ5SXRlbXMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIHF1ZXJ5SXRlbXMgfHwgSW1tdXRhYmxlKFtdKVxuICB9XG4gIFxuICAvLyBTYWZlbHkgY29udmVydCB0byByZWd1bGFyIGFycmF5IGZvciBzb3J0aW5nXG4gIC8vIEhhbmRsZSBib3RoIEltbXV0YWJsZUFycmF5IChoYXMgdG9BcnJheSBtZXRob2QpIGFuZCByZWd1bGFyIGFycmF5c1xuICBjb25zdCBpdGVtc0FycmF5ID0gKHF1ZXJ5SXRlbXMgJiYgdHlwZW9mIHF1ZXJ5SXRlbXMudG9BcnJheSA9PT0gJ2Z1bmN0aW9uJykgXG4gICAgPyBxdWVyeUl0ZW1zLnRvQXJyYXkoKSBcbiAgICA6IChBcnJheS5pc0FycmF5KHF1ZXJ5SXRlbXMpID8gcXVlcnlJdGVtcyA6IFtdKVxuICBcbiAgY29uc3QgaXRlbXNXaXRoSW5kZXggPSBpdGVtc0FycmF5Lm1hcCgoaXRlbSwgaW5kZXgpID0+ICh7IGl0ZW0sIG9yaWdpbmFsSW5kZXg6IGluZGV4IH0pKVxuICBpdGVtc1dpdGhJbmRleC5zb3J0KChhLCBiKSA9PiB7XG4gICAgY29uc3Qgb3JkZXJBID0gYS5pdGVtLm9yZGVyID8/IEluZmluaXR5XG4gICAgY29uc3Qgb3JkZXJCID0gYi5pdGVtLm9yZGVyID8/IEluZmluaXR5XG4gICAgaWYgKG9yZGVyQSAhPT0gb3JkZXJCKSB7XG4gICAgICByZXR1cm4gb3JkZXJBIC0gb3JkZXJCXG4gICAgfVxuICAgIC8vIElmIG9yZGVyIGlzIGVxdWFsIChib3RoIEluZmluaXR5IG9yIHNhbWUgbnVtYmVyKSwgbWFpbnRhaW4gb3JpZ2luYWwgaW5kZXggb3JkZXJcbiAgICByZXR1cm4gYS5vcmlnaW5hbEluZGV4IC0gYi5vcmlnaW5hbEluZGV4XG4gIH0pXG4gIHJldHVybiBJbW11dGFibGUoaXRlbXNXaXRoSW5kZXgubWFwKCh7IGl0ZW0gfSkgPT4gaXRlbSkpXG59XG5cbi8vIEhlbHBlciBmdW5jdGlvbiB0byBncm91cCBxdWVyaWVzIGJ5IGdyb3VwSWRcbmNvbnN0IGdyb3VwUXVlcmllcyA9IChxdWVyeUl0ZW1zOiBJbW11dGFibGVBcnJheTxRdWVyeUl0ZW1UeXBlPik6IEdyb3VwZWRRdWVyaWVzID0+IHtcbiAgY29uc3QgZ3JvdXBzOiB7IFtncm91cElkOiBzdHJpbmddOiB7IGl0ZW1zOiBJbW11dGFibGVBcnJheTxRdWVyeUl0ZW1UeXBlPiwgZGlzcGxheU5hbWU6IHN0cmluZywgaWNvbj86IGFueSB9IH0gPSB7fVxuICBjb25zdCB1bmdyb3VwZWQ6IEFycmF5PHsgaXRlbTogSW1tdXRhYmxlT2JqZWN0PFF1ZXJ5SXRlbVR5cGU+LCBpbmRleDogbnVtYmVyIH0+ID0gW11cbiAgY29uc3QgZ3JvdXBPcmRlcjogc3RyaW5nW10gPSBbXVxuICBjb25zdCBncm91cEluZGV4TWFwOiB7IFtncm91cElkOiBzdHJpbmddOiBudW1iZXIgfSA9IHt9XG4gIFxuICAvLyBGaXJzdCBwYXNzOiBjb2xsZWN0IGl0ZW1zIGluIHJlZ3VsYXIgYXJyYXlzXG4gIGNvbnN0IGdyb3VwSXRlbXNNYXA6IHsgW2dyb3VwSWQ6IHN0cmluZ106IFF1ZXJ5SXRlbVR5cGVbXSB9ID0ge31cblxuICBxdWVyeUl0ZW1zLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7XG4gICAgaWYgKGl0ZW0uZ3JvdXBJZCkge1xuICAgICAgaWYgKCFncm91cEl0ZW1zTWFwW2l0ZW0uZ3JvdXBJZF0pIHtcbiAgICAgICAgZ3JvdXBJdGVtc01hcFtpdGVtLmdyb3VwSWRdID0gW11cbiAgICAgICAgZ3JvdXBzW2l0ZW0uZ3JvdXBJZF0gPSB7XG4gICAgICAgICAgaXRlbXM6IEltbXV0YWJsZShbXSksXG4gICAgICAgICAgZGlzcGxheU5hbWU6IGl0ZW0uZ3JvdXBEaXNwbGF5TmFtZSB8fCBpdGVtLm5hbWUgfHwgYEdyb3VwICR7aXRlbS5ncm91cElkfWAsXG4gICAgICAgICAgaWNvbjogaXRlbS5pY29uXG4gICAgICAgIH1cbiAgICAgICAgZ3JvdXBJbmRleE1hcFtpdGVtLmdyb3VwSWRdID0gaW5kZXhcbiAgICAgICAgZ3JvdXBPcmRlci5wdXNoKGl0ZW0uZ3JvdXBJZClcbiAgICAgIH1cbiAgICAgIGdyb3VwSXRlbXNNYXBbaXRlbS5ncm91cElkXS5wdXNoKGl0ZW0pXG4gICAgfSBlbHNlIHtcbiAgICAgIHVuZ3JvdXBlZC5wdXNoKHsgaXRlbSwgaW5kZXggfSlcbiAgICB9XG4gIH0pXG5cbiAgLy8gU2Vjb25kIHBhc3M6IGNvbnZlcnQgcmVndWxhciBhcnJheXMgdG8gSW1tdXRhYmxlQXJyYXlzXG4gIE9iamVjdC5rZXlzKGdyb3VwSXRlbXNNYXApLmZvckVhY2goZ3JvdXBJZCA9PiB7XG4gICAgZ3JvdXBzW2dyb3VwSWRdLml0ZW1zID0gSW1tdXRhYmxlKGdyb3VwSXRlbXNNYXBbZ3JvdXBJZF0pXG4gIH0pXG5cbiAgcmV0dXJuIHsgZ3JvdXBzLCB1bmdyb3VwZWQsIGdyb3VwT3JkZXIgfVxufVxuXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gZ2V0IGRpc3BsYXkgbmFtZSBmb3IgcXVlcnkgaW4gZHJvcGRvd25cbi8vIFVzZXM6IHNlYXJjaEFsaWFzIHx8IGppbXVGaWVsZE5hbWUgfHwgaXRlbS5uYW1lIHx8IGZhbGxiYWNrXG5jb25zdCBnZXRRdWVyeURpc3BsYXlOYW1lID0gKGl0ZW06IEltbXV0YWJsZU9iamVjdDxRdWVyeUl0ZW1UeXBlPik6IHN0cmluZyA9PiB7XG4gIC8vIEZpcnN0IHByaW9yaXR5OiBzZWFyY2hBbGlhcyBpZiBzZXRcbiAgaWYgKGl0ZW0uc2VhcmNoQWxpYXMpIHtcbiAgICByZXR1cm4gaXRlbS5zZWFyY2hBbGlhc1xuICB9XG4gIFxuICAvLyBTZWNvbmQgcHJpb3JpdHk6IGZpZWxkIG5hbWUgZnJvbSBTUUwgZXhwcmVzc2lvblxuICBjb25zdCBqaW11RmllbGROYW1lID0gaXRlbS5zcWxFeHByT2JqPy5wYXJ0cz8uWzBdPy5qaW11RmllbGROYW1lXG4gIGlmIChqaW11RmllbGROYW1lKSB7XG4gICAgcmV0dXJuIGppbXVGaWVsZE5hbWVcbiAgfVxuICBcbiAgLy8gVGhpcmQgcHJpb3JpdHk6IGl0ZW0gbmFtZVxuICBpZiAoaXRlbS5uYW1lKSB7XG4gICAgcmV0dXJuIGl0ZW0ubmFtZVxuICB9XG4gIFxuICAvLyBGYWxsYmFja1xuICByZXR1cm4gJ1F1ZXJ5J1xufVxuXG5leHBvcnQgZnVuY3Rpb24gUXVlcnlUYXNrTGlzdCAocHJvcHM6IFF1ZXJ5VGFza0xpc3RQcm9wcykge1xuICBjb25zdCB7IHF1ZXJ5SXRlbXMsIHdpZGdldElkLCBkZWZhdWx0UGFnZVNpemUsIGlzSW5Qb3BwZXIgPSBmYWxzZSwgY2xhc3NOYW1lID0gJycsIGluaXRpYWxRdWVyeVZhbHVlLCBzaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbiA9IGZhbHNlLCBvbkhhc2hQYXJhbWV0ZXJVc2VkLCByZXN1bHRzTW9kZSwgb25SZXN1bHRzTW9kZUNoYW5nZSwgYWNjdW11bGF0ZWRSZWNvcmRzLCBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZSwgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCwgZ3JhcGhpY3NMYXllciwgbWFwVmlldywgb25Jbml0aWFsaXplR3JhcGhpY3NMYXllciwgb25DbGVhckdyYXBoaWNzTGF5ZXIsIGFjdGl2ZVRhYiwgb25UYWJDaGFuZ2UsIGV2ZW50TWFuYWdlciB9ID0gcHJvcHNcbiAgY29uc3QgZ2V0STE4bk1lc3NhZ2UgPSBob29rcy51c2VUcmFuc2xhdGlvbihkZWZhdWx0TWVzc2FnZXMpXG4gIFxuICAvLyBMb2cgd2hlbiBwcm9wcyBhcmUgcmVjZWl2ZWRcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gtRVhFQycsIHtcbiAgICAgIGV2ZW50OiAncXVlcnl0YXNrbGlzdC1wcm9wcy1yZWNlaXZlZCcsXG4gICAgICB3aWRnZXRJZCxcbiAgICAgIHByb3BzOiB7XG4gICAgICAgIGhhc0luaXRpYWxRdWVyeVZhbHVlOiAhIWluaXRpYWxRdWVyeVZhbHVlLFxuICAgICAgICBpbml0aWFsUXVlcnlWYWx1ZVNob3J0SWQ6IGluaXRpYWxRdWVyeVZhbHVlPy5zaG9ydElkLFxuICAgICAgICBpbml0aWFsUXVlcnlWYWx1ZVZhbHVlOiBpbml0aWFsUXVlcnlWYWx1ZT8udmFsdWUsXG4gICAgICAgIHNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uXG4gICAgICB9LFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgZXZlbnQ6ICdxdWVyeS10YXNrLWxpc3QtcHJvcHMtcmVjZWl2ZWQnLFxuICAgICAgd2lkZ2V0SWQsXG4gICAgICBoYXNJbml0aWFsUXVlcnlWYWx1ZTogISFpbml0aWFsUXVlcnlWYWx1ZSxcbiAgICAgIGluaXRpYWxRdWVyeVZhbHVlU2hvcnRJZDogaW5pdGlhbFF1ZXJ5VmFsdWU/LnNob3J0SWQsXG4gICAgICBpbml0aWFsUXVlcnlWYWx1ZVZhbHVlOiBpbml0aWFsUXVlcnlWYWx1ZT8udmFsdWUsXG4gICAgICBzaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbixcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gIH0sIFtpbml0aWFsUXVlcnlWYWx1ZSwgc2hvdWxkVXNlSW5pdGlhbFF1ZXJ5VmFsdWVGb3JTZWxlY3Rpb24sIHdpZGdldElkXSlcbiAgXG4gIC8vIFNvcnQgcXVlcmllcyBieSBkaXNwbGF5IG9yZGVyIGJlZm9yZSBncm91cGluZ1xuICAvLyBIYW5kbGUgY2FzZSB3aGVyZSBxdWVyeUl0ZW1zIG1pZ2h0IGJlIHVuZGVmaW5lZC9udWxsIG9yIG5vdCBhbiBJbW11dGFibGVBcnJheVxuICBjb25zdCBzb3J0ZWRRdWVyeUl0ZW1zID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgaWYgKCFxdWVyeUl0ZW1zKSB7XG4gICAgICByZXR1cm4gSW1tdXRhYmxlKFtdKVxuICAgIH1cbiAgICByZXR1cm4gc29ydFF1ZXJ5SXRlbXNCeU9yZGVyKHF1ZXJ5SXRlbXMpXG4gIH0sIFtxdWVyeUl0ZW1zXSlcbiAgXG4gIGNvbnN0IHsgZ3JvdXBzLCB1bmdyb3VwZWQsIGdyb3VwT3JkZXIgfSA9IFJlYWN0LnVzZU1lbW8oKCkgPT4gZ3JvdXBRdWVyaWVzKHNvcnRlZFF1ZXJ5SXRlbXMpLCBbc29ydGVkUXVlcnlJdGVtc10pXG4gIFxuICAvLyBPbmx5IHVzZSB0aGUgcHJvcCBpbml0aWFsUXVlcnlWYWx1ZSB3aGVuIEhlbHBlclNpbXBsZSBleHBsaWNpdGx5IG9wZW5zIHRoZSB3aWRnZXRcbiAgLy8gUXVlcnlTaW1wbGUgc2hvdWxkIG5vdCBhdXRvbm9tb3VzbHkgcmVhY3QgdG8gaW5pdGlhbFF1ZXJ5VmFsdWUgcHJvcCBjaGFuZ2VzXG4gIC8vIEhlbHBlclNpbXBsZSBpcyB0aGUgb3JjaGVzdHJhdG9yIGFuZCBzZXRzIHNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uIGZsYWdcbiAgY29uc3QgZWZmZWN0aXZlSW5pdGlhbFF1ZXJ5VmFsdWUgPSBzaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbiA/IGluaXRpYWxRdWVyeVZhbHVlIDogdW5kZWZpbmVkXG4gIFxuICAvLyBMb2cgd2hlbiBlZmZlY3RpdmVJbml0aWFsUXVlcnlWYWx1ZSBpcyBjYWxjdWxhdGVkXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdIQVNILUVYRUMnLCB7XG4gICAgICBldmVudDogJ3F1ZXJ5dGFza2xpc3QtZWZmZWN0aXZlaW5pdGlhbHF1ZXJ5dmFsdWUtY2FsY3VsYXRlZCcsXG4gICAgICB3aWRnZXRJZCxcbiAgICAgIGNhbGN1bGF0aW9uOiB7XG4gICAgICAgIHNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uLFxuICAgICAgICBoYXNJbml0aWFsUXVlcnlWYWx1ZTogISFpbml0aWFsUXVlcnlWYWx1ZSxcbiAgICAgICAgZWZmZWN0aXZlUmVzdWx0OiBlZmZlY3RpdmVJbml0aWFsUXVlcnlWYWx1ZSA/ICdVU0VfSU5JVElBTF9RVUVSWV9WQUxVRScgOiAnVU5ERUZJTkVEJyxcbiAgICAgICAgZWZmZWN0aXZlU2hvcnRJZDogZWZmZWN0aXZlSW5pdGlhbFF1ZXJ5VmFsdWU/LnNob3J0SWQsXG4gICAgICAgIGVmZmVjdGl2ZVZhbHVlOiBlZmZlY3RpdmVJbml0aWFsUXVlcnlWYWx1ZT8udmFsdWVcbiAgICAgIH0sXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICBldmVudDogJ2VmZmVjdGl2ZUluaXRpYWxRdWVyeVZhbHVlLWNhbGN1bGF0ZWQnLFxuICAgICAgd2lkZ2V0SWQsXG4gICAgICBzaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbixcbiAgICAgIGhhc0luaXRpYWxRdWVyeVZhbHVlOiAhIWluaXRpYWxRdWVyeVZhbHVlLFxuICAgICAgaGFzRWZmZWN0aXZlSW5pdGlhbFF1ZXJ5VmFsdWU6ICEhZWZmZWN0aXZlSW5pdGlhbFF1ZXJ5VmFsdWUsXG4gICAgICBlZmZlY3RpdmVTaG9ydElkOiBlZmZlY3RpdmVJbml0aWFsUXVlcnlWYWx1ZT8uc2hvcnRJZCxcbiAgICAgIGVmZmVjdGl2ZVZhbHVlOiBlZmZlY3RpdmVJbml0aWFsUXVlcnlWYWx1ZT8udmFsdWUsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICB9LCBbZWZmZWN0aXZlSW5pdGlhbFF1ZXJ5VmFsdWUsIHNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uLCBpbml0aWFsUXVlcnlWYWx1ZSwgd2lkZ2V0SWRdKVxuXG4gIC8vIEZpbmQgdGhlIHF1ZXJ5IGl0ZW0gbWF0Y2hpbmcgdGhlIHNob3J0SWQgZnJvbSBVUkwgaGFzaFxuICBjb25zdCBtYXRjaGluZ1F1ZXJ5SW5kZXggPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICBjb25zdCBzaG9ydElkID0gZWZmZWN0aXZlSW5pdGlhbFF1ZXJ5VmFsdWU/LnNob3J0SWRcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gtRklSU1QtTE9BRCcsIHtcbiAgICAgIGV2ZW50OiAnbWF0Y2hpbmdRdWVyeUluZGV4LWNhbGN1bGF0aW9uLXN0YXJ0JyxcbiAgICAgIHdpZGdldElkLFxuICAgICAgaGFzRWZmZWN0aXZlSW5pdGlhbFF1ZXJ5VmFsdWU6ICEhZWZmZWN0aXZlSW5pdGlhbFF1ZXJ5VmFsdWUsXG4gICAgICBzaG9ydElkVG9NYXRjaDogc2hvcnRJZCxcbiAgICAgIHNvcnRlZFF1ZXJ5SXRlbXNDb3VudDogc29ydGVkUXVlcnlJdGVtcz8ubGVuZ3RoIHx8IDAsXG4gICAgICBzb3J0ZWRRdWVyeUl0ZW1zU2hvcnRJZHM6IHNvcnRlZFF1ZXJ5SXRlbXMgPyBbLi4uc29ydGVkUXVlcnlJdGVtcy5tYXAoaXRlbSA9PiBpdGVtLnNob3J0SWQpXSA6IFtdLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICBpZiAoIXNob3J0SWQpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSC1GSVJTVC1MT0FEJywge1xuICAgICAgICBldmVudDogJ21hdGNoaW5nUXVlcnlJbmRleC1uby1zaG9ydGlkJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIHJlc3VsdDogLTEsXG4gICAgICAgIHJlYXNvbjogJ05vIHNob3J0SWQgaW4gZWZmZWN0aXZlSW5pdGlhbFF1ZXJ5VmFsdWUnLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICByZXR1cm4gLTFcbiAgICB9XG4gICAgXG4gICAgY29uc3QgZm91bmRJbmRleCA9IHNvcnRlZFF1ZXJ5SXRlbXMuZmluZEluZGV4KGl0ZW0gPT4gaXRlbS5zaG9ydElkID09PSBzaG9ydElkKVxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSC1GSVJTVC1MT0FEJywge1xuICAgICAgZXZlbnQ6ICdtYXRjaGluZ1F1ZXJ5SW5kZXgtY2FsY3VsYXRpb24tY29tcGxldGUnLFxuICAgICAgd2lkZ2V0SWQsXG4gICAgICBzaG9ydElkVG9NYXRjaDogc2hvcnRJZCxcbiAgICAgIGZvdW5kSW5kZXgsXG4gICAgICBtYXRjaEZvdW5kOiBmb3VuZEluZGV4ID49IDAsXG4gICAgICBtYXRjaGVkSXRlbTogZm91bmRJbmRleCA+PSAwID8ge1xuICAgICAgICBjb25maWdJZDogc29ydGVkUXVlcnlJdGVtc1tmb3VuZEluZGV4XS5jb25maWdJZCxcbiAgICAgICAgc2hvcnRJZDogc29ydGVkUXVlcnlJdGVtc1tmb3VuZEluZGV4XS5zaG9ydElkLFxuICAgICAgICBsYWJlbDogc29ydGVkUXVlcnlJdGVtc1tmb3VuZEluZGV4XS5sYWJlbFxuICAgICAgfSA6IG51bGwsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIHJldHVybiBmb3VuZEluZGV4XG4gIH0sIFtzb3J0ZWRRdWVyeUl0ZW1zLCBlZmZlY3RpdmVJbml0aWFsUXVlcnlWYWx1ZSwgd2lkZ2V0SWRdKVxuICBcbiAgLy8gRGV0ZXJtaW5lIHdoaWNoIGdyb3VwL3VuZ3JvdXBlZCBpbmRleCB0aGUgbWF0Y2hpbmcgcXVlcnkgaXMgYXRcbiAgY29uc3QgZ2V0UXVlcnlTZWxlY3Rpb24gPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gtRklSU1QtTE9BRCcsIHtcbiAgICAgIGV2ZW50OiAnZ2V0UXVlcnlTZWxlY3Rpb24tY2FsY3VsYXRpb24tc3RhcnQnLFxuICAgICAgd2lkZ2V0SWQsXG4gICAgICBtYXRjaGluZ1F1ZXJ5SW5kZXgsXG4gICAgICBoYXNNYXRjaDogbWF0Y2hpbmdRdWVyeUluZGV4ID49IDAsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIGlmIChtYXRjaGluZ1F1ZXJ5SW5kZXggPCAwKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gtRklSU1QtTE9BRCcsIHtcbiAgICAgICAgZXZlbnQ6ICdnZXRRdWVyeVNlbGVjdGlvbi1uby1tYXRjaCcsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICByZXN1bHQ6IG51bGwsXG4gICAgICAgIHJlYXNvbjogJ21hdGNoaW5nUXVlcnlJbmRleCBpcyBuZWdhdGl2ZScsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuICAgIFxuICAgIGNvbnN0IGl0ZW0gPSBzb3J0ZWRRdWVyeUl0ZW1zW21hdGNoaW5nUXVlcnlJbmRleF1cbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gtRklSU1QtTE9BRCcsIHtcbiAgICAgIGV2ZW50OiAnZ2V0UXVlcnlTZWxlY3Rpb24tbWF0Y2hlZC1pdGVtJyxcbiAgICAgIHdpZGdldElkLFxuICAgICAgbWF0Y2hlZEl0ZW06IHtcbiAgICAgICAgY29uZmlnSWQ6IGl0ZW0uY29uZmlnSWQsXG4gICAgICAgIHNob3J0SWQ6IGl0ZW0uc2hvcnRJZCxcbiAgICAgICAgbGFiZWw6IGl0ZW0ubGFiZWwsXG4gICAgICAgIGdyb3VwSWQ6IGl0ZW0uZ3JvdXBJZCxcbiAgICAgICAgaGFzR3JvdXA6ICEhaXRlbS5ncm91cElkXG4gICAgICB9LFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBpZiAoaXRlbS5ncm91cElkKSB7XG4gICAgICBjb25zdCBncm91cEl0ZW1zID0gZ3JvdXBzW2l0ZW0uZ3JvdXBJZF0/Lml0ZW1zIHx8IEltbXV0YWJsZShbXSlcbiAgICAgIGNvbnN0IGluZGV4SW5Hcm91cCA9IGdyb3VwSXRlbXMuZmluZEluZGV4KHEgPT4gcS5jb25maWdJZCA9PT0gaXRlbS5jb25maWdJZClcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHsgdHlwZTogJ2dyb3VwJyBhcyBjb25zdCwgZ3JvdXBJZDogaXRlbS5ncm91cElkLCBpbmRleDogaW5kZXhJbkdyb3VwID49IDAgPyBpbmRleEluR3JvdXAgOiAwIH1cbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgZXZlbnQ6ICdoYXNoLXF1ZXJ5LWZvdW5kLWluLWdyb3VwJyxcbiAgICAgICAgZ3JvdXBJZDogaXRlbS5ncm91cElkLFxuICAgICAgICBpbmRleEluR3JvdXA6IGluZGV4SW5Hcm91cCA+PSAwID8gaW5kZXhJbkdyb3VwIDogMCxcbiAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IGl0ZW0uY29uZmlnSWQsXG4gICAgICAgIHF1ZXJ5SXRlbVNob3J0SWQ6IGl0ZW0uc2hvcnRJZFxuICAgICAgfSlcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNILUZJUlNULUxPQUQnLCB7XG4gICAgICAgIGV2ZW50OiAnZ2V0UXVlcnlTZWxlY3Rpb24tcmV0dXJuaW5nLWdyb3VwJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIHJlc3VsdCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgXG4gICAgICByZXR1cm4gcmVzdWx0XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFVuZ3JvdXBlZCBxdWVyeVxuICAgICAgY29uc3QgaW5kZXhJblVuZ3JvdXBlZCA9IHVuZ3JvdXBlZC5maW5kSW5kZXgoKHsgaXRlbTogcSB9KSA9PiBxLmNvbmZpZ0lkID09PSBpdGVtLmNvbmZpZ0lkKVxuICAgICAgY29uc3QgcmVzdWx0ID0geyB0eXBlOiAndW5ncm91cGVkJyBhcyBjb25zdCwgaW5kZXg6IGluZGV4SW5Vbmdyb3VwZWQgPj0gMCA/IGluZGV4SW5Vbmdyb3VwZWQgOiAwIH1cbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgZXZlbnQ6ICdoYXNoLXF1ZXJ5LWZvdW5kLXVuZ3JvdXBlZCcsXG4gICAgICAgIGluZGV4SW5Vbmdyb3VwZWQ6IGluZGV4SW5Vbmdyb3VwZWQgPj0gMCA/IGluZGV4SW5Vbmdyb3VwZWQgOiAwLFxuICAgICAgICBxdWVyeUl0ZW1Db25maWdJZDogaXRlbS5jb25maWdJZCxcbiAgICAgICAgcXVlcnlJdGVtU2hvcnRJZDogaXRlbS5zaG9ydElkXG4gICAgICB9KVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gtRklSU1QtTE9BRCcsIHtcbiAgICAgICAgZXZlbnQ6ICdnZXRRdWVyeVNlbGVjdGlvbi1yZXR1cm5pbmctdW5ncm91cGVkJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIHJlc3VsdCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgXG4gICAgICByZXR1cm4gcmVzdWx0XG4gICAgfVxuICB9LCBbbWF0Y2hpbmdRdWVyeUluZGV4LCBzb3J0ZWRRdWVyeUl0ZW1zLCBncm91cHMsIHVuZ3JvdXBlZCwgd2lkZ2V0SWRdKVxuICBcbiAgLy8gSGVscGVyIHRvIGRldGVybWluZSBkZWZhdWx0IHNlbGVjdGlvbiBiYXNlZCBvbiBkaXNwbGF5IG9yZGVyXG4gIGNvbnN0IGdldERlZmF1bHRTZWxlY3Rpb24gPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICBpZiAoZ2V0UXVlcnlTZWxlY3Rpb24pIHtcbiAgICAgIHJldHVybiBnZXRRdWVyeVNlbGVjdGlvblxuICAgIH1cbiAgICBcbiAgICAvLyBObyBoYXNoIHBhcmFtZXRlciAtIGRldGVybWluZSBkZWZhdWx0IGJhc2VkIG9uIGRpc3BsYXkgb3JkZXJcbiAgICAvLyBDb21wYXJlIGZpcnN0IHVuZ3JvdXBlZCBxdWVyeSB2cyBmaXJzdCBxdWVyeSBpbiBmaXJzdCBncm91cFxuICAgIGNvbnN0IGZpcnN0VW5ncm91cGVkT3JkZXIgPSB1bmdyb3VwZWQubGVuZ3RoID4gMCA/ICh1bmdyb3VwZWRbMF0uaXRlbS5vcmRlciA/PyBJbmZpbml0eSkgOiBJbmZpbml0eVxuICAgIGNvbnN0IGZpcnN0R3JvdXBPcmRlciA9IGdyb3VwT3JkZXIubGVuZ3RoID4gMCAmJiBncm91cHNbZ3JvdXBPcmRlclswXV0/Lml0ZW1zPy5sZW5ndGggPiAwXG4gICAgICA/IChncm91cHNbZ3JvdXBPcmRlclswXV0uaXRlbXNbMF0ub3JkZXIgPz8gSW5maW5pdHkpXG4gICAgICA6IEluZmluaXR5XG4gICAgXG4gICAgLy8gU2VsZWN0IHdoaWNoZXZlciBoYXMgbG93ZXIgb3JkZXIgKG9yIGZpcnN0IGlmIGVxdWFsKVxuICAgIGlmIChmaXJzdFVuZ3JvdXBlZE9yZGVyIDwgZmlyc3RHcm91cE9yZGVyKSB7XG4gICAgICByZXR1cm4geyB0eXBlOiAndW5ncm91cGVkJyBhcyBjb25zdCwgaW5kZXg6IDAgfVxuICAgIH0gZWxzZSBpZiAoZmlyc3RHcm91cE9yZGVyIDwgSW5maW5pdHkgfHwgZ3JvdXBPcmRlci5sZW5ndGggPiAwKSB7XG4gICAgICByZXR1cm4geyB0eXBlOiAnZ3JvdXAnIGFzIGNvbnN0LCBncm91cElkOiBncm91cE9yZGVyWzBdLCBpbmRleDogMCB9XG4gICAgfSBlbHNlIGlmICh1bmdyb3VwZWQubGVuZ3RoID4gMCkge1xuICAgICAgcmV0dXJuIHsgdHlwZTogJ3VuZ3JvdXBlZCcgYXMgY29uc3QsIGluZGV4OiAwIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfSwgW2dldFF1ZXJ5U2VsZWN0aW9uLCB1bmdyb3VwZWQsIGdyb3VwcywgZ3JvdXBPcmRlcl0pXG4gIFxuICAvLyBUcmFjayBzZWxlY3RlZCBxdWVyeSAtIGluaXRpYWxpemUgd2l0aCBtYXRjaGluZyBxdWVyeSBpZiBmb3VuZCBmcm9tIFVSTCBoYXNoLCBvciBkZWZhdWx0IGJhc2VkIG9uIGRpc3BsYXkgb3JkZXJcbiAgY29uc3QgW3NlbGVjdGVkR3JvdXBJZCwgc2V0U2VsZWN0ZWRHcm91cElkXSA9IFJlYWN0LnVzZVN0YXRlPHN0cmluZyB8IG51bGw+KCgpID0+IHtcbiAgICBpZiAoZ2V0RGVmYXVsdFNlbGVjdGlvbj8udHlwZSA9PT0gJ2dyb3VwJykge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgZXZlbnQ6ICdpbml0aWFsLWdyb3VwLXNlbGVjdGlvbicsXG4gICAgICAgIGdyb3VwSWQ6IGdldERlZmF1bHRTZWxlY3Rpb24uZ3JvdXBJZCxcbiAgICAgICAgbm90ZTogZ2V0UXVlcnlTZWxlY3Rpb24gPyAnSGFzaC1tYXRjaGVkJyA6ICdEZWZhdWx0IGJhc2VkIG9uIGRpc3BsYXkgb3JkZXInXG4gICAgICB9KVxuICAgICAgcmV0dXJuIGdldERlZmF1bHRTZWxlY3Rpb24uZ3JvdXBJZFxuICAgIH1cbiAgICByZXR1cm4gbnVsbFxuICB9KVxuICBjb25zdCBbc2VsZWN0ZWRHcm91cFF1ZXJ5SW5kZXgsIHNldFNlbGVjdGVkR3JvdXBRdWVyeUluZGV4XSA9IFJlYWN0LnVzZVN0YXRlKCgpID0+IHtcbiAgICBpZiAoZ2V0RGVmYXVsdFNlbGVjdGlvbj8udHlwZSA9PT0gJ2dyb3VwJykge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgZXZlbnQ6ICdpbml0aWFsLWdyb3VwLXF1ZXJ5LWluZGV4JyxcbiAgICAgICAgaW5kZXg6IGdldERlZmF1bHRTZWxlY3Rpb24uaW5kZXgsXG4gICAgICAgIG5vdGU6IGdldFF1ZXJ5U2VsZWN0aW9uID8gJ0hhc2gtbWF0Y2hlZCcgOiAnRGVmYXVsdCBiYXNlZCBvbiBkaXNwbGF5IG9yZGVyJ1xuICAgICAgfSlcbiAgICAgIHJldHVybiBnZXREZWZhdWx0U2VsZWN0aW9uLmluZGV4XG4gICAgfVxuICAgIHJldHVybiAwXG4gIH0pXG4gIGNvbnN0IFtzZWxlY3RlZFVuZ3JvdXBlZEluZGV4LCBzZXRTZWxlY3RlZFVuZ3JvdXBlZEluZGV4XSA9IFJlYWN0LnVzZVN0YXRlKCgpID0+IHtcbiAgICBpZiAoZ2V0RGVmYXVsdFNlbGVjdGlvbj8udHlwZSA9PT0gJ3VuZ3JvdXBlZCcpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgIGV2ZW50OiAnaW5pdGlhbC11bmdyb3VwZWQtaW5kZXgnLFxuICAgICAgICBpbmRleDogZ2V0RGVmYXVsdFNlbGVjdGlvbi5pbmRleCxcbiAgICAgICAgbm90ZTogZ2V0UXVlcnlTZWxlY3Rpb24gPyAnSGFzaC1tYXRjaGVkJyA6ICdEZWZhdWx0IGJhc2VkIG9uIGRpc3BsYXkgb3JkZXInXG4gICAgICB9KVxuICAgICAgcmV0dXJuIGdldERlZmF1bHRTZWxlY3Rpb24uaW5kZXhcbiAgICB9XG4gICAgcmV0dXJuIDBcbiAgfSlcbiAgXG4gIC8vIFVwZGF0ZSBzZWxlY3Rpb24gd2hlbiBIZWxwZXJTaW1wbGUgZXhwbGljaXRseSBvcGVucyB3aWRnZXQgd2l0aCBoYXNoIHBhcmFtZXRlclxuICAvLyBPbmx5IHJlYWN0IHdoZW4gc2hvdWxkVXNlSW5pdGlhbFF1ZXJ5VmFsdWVGb3JTZWxlY3Rpb24gaXMgdHJ1ZSAoc2V0IGJ5IEhlbHBlclNpbXBsZSlcbiAgLy8gVGhpcyBwcmV2ZW50cyBhdXRvbm9tb3VzIHF1ZXJ5IHNlbGVjdGlvbiB3aGVuIHN3aXRjaGluZyBxdWVyaWVzXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdIQVNILUZJUlNULUxPQUQnLCB7XG4gICAgICBldmVudDogJ0VYRUNVVElPTi1VU0VFRkZFQ1QtVFJJR0dFUkVEJyxcbiAgICAgIHdpZGdldElkLFxuICAgICAgY3JpdGljYWxDb25kaXRpb25zOiB7XG4gICAgICAgIHNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uLFxuICAgICAgICBoYXNHZXRRdWVyeVNlbGVjdGlvbjogISFnZXRRdWVyeVNlbGVjdGlvbixcbiAgICAgICAgZ2V0UXVlcnlTZWxlY3Rpb25WYWx1ZTogZ2V0UXVlcnlTZWxlY3Rpb24sXG4gICAgICAgIGhhc0VmZmVjdGl2ZUluaXRpYWxRdWVyeVZhbHVlOiAhIWVmZmVjdGl2ZUluaXRpYWxRdWVyeVZhbHVlLFxuICAgICAgICBlZmZlY3RpdmVJbml0aWFsUXVlcnlWYWx1ZSxcbiAgICAgICAgbWF0Y2hpbmdRdWVyeUluZGV4LFxuICAgICAgICBjb25kaXRpb25zTWV0OiBzaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbiAmJiAhIWdldFF1ZXJ5U2VsZWN0aW9uLFxuICAgICAgICBXSUxMX0VYRUNVVEVfUVVFUlk6IHNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uICYmICEhZ2V0UXVlcnlTZWxlY3Rpb25cbiAgICAgIH0sXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSC1FWEVDJywge1xuICAgICAgZXZlbnQ6ICdxdWVyeXRhc2tsaXN0LXNlbGVjdGlvbi11c2VlZmZlY3QtY2hlY2snLFxuICAgICAgd2lkZ2V0SWQsXG4gICAgICBjaGVjazoge1xuICAgICAgICBzaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbixcbiAgICAgICAgaGFzR2V0UXVlcnlTZWxlY3Rpb246ICEhZ2V0UXVlcnlTZWxlY3Rpb24sXG4gICAgICAgIGdldFF1ZXJ5U2VsZWN0aW9uVHlwZTogZ2V0UXVlcnlTZWxlY3Rpb24/LnR5cGUsXG4gICAgICAgIHdpbGxVcGRhdGVTZWxlY3Rpb246IHNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uICYmICEhZ2V0UXVlcnlTZWxlY3Rpb25cbiAgICAgIH0sXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICBldmVudDogJ3F1ZXJ5LXNlbGVjdGlvbi11c2VlZmZlY3QtY2hlY2snLFxuICAgICAgd2lkZ2V0SWQsXG4gICAgICBzaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbixcbiAgICAgIGhhc0dldFF1ZXJ5U2VsZWN0aW9uOiAhIWdldFF1ZXJ5U2VsZWN0aW9uLFxuICAgICAgZ2V0UXVlcnlTZWxlY3Rpb25UeXBlOiBnZXRRdWVyeVNlbGVjdGlvbj8udHlwZSxcbiAgICAgIHdpbGxVcGRhdGVTZWxlY3Rpb246IHNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uICYmICEhZ2V0UXVlcnlTZWxlY3Rpb24sXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIGlmIChzaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbiAmJiBnZXRRdWVyeVNlbGVjdGlvbikge1xuICAgICAgLy8gSGFzaCBwYXJhbWV0ZXIgbWF0Y2hlZCAtIEhlbHBlclNpbXBsZSBleHBsaWNpdGx5IG9wZW5lZCB1cyB3aXRoIHRoaXMgaGFzaFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNILUVYRUMnLCB7XG4gICAgICAgIGV2ZW50OiAncXVlcnl0YXNrbGlzdC1zZWxlY3Rpb24tdXNlZWZmZWN0LXVwZGF0aW5nJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIHNlbGVjdGlvblR5cGU6IGdldFF1ZXJ5U2VsZWN0aW9uLnR5cGUsXG4gICAgICAgIHNlbGVjdGlvbkRldGFpbHM6IGdldFF1ZXJ5U2VsZWN0aW9uLnR5cGUgPT09ICdncm91cCcgXG4gICAgICAgICAgPyB7IGdyb3VwSWQ6IGdldFF1ZXJ5U2VsZWN0aW9uLmdyb3VwSWQsIGluZGV4OiBnZXRRdWVyeVNlbGVjdGlvbi5pbmRleCB9XG4gICAgICAgICAgOiB7IGluZGV4OiBnZXRRdWVyeVNlbGVjdGlvbi5pbmRleCB9LFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGlmIChnZXRRdWVyeVNlbGVjdGlvbi50eXBlID09PSAnZ3JvdXAnKSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgICAgZXZlbnQ6ICdzZWxlY3Rpb24tY2hhbmdlZC10by1ncm91cC1mcm9tLWhhc2gnLFxuICAgICAgICAgIGdyb3VwSWQ6IGdldFF1ZXJ5U2VsZWN0aW9uLmdyb3VwSWQsXG4gICAgICAgICAgaW5kZXg6IGdldFF1ZXJ5U2VsZWN0aW9uLmluZGV4LFxuICAgICAgICAgIG5vdGU6ICdIZWxwZXJTaW1wbGUgZXhwbGljaXRseSBvcGVuZWQgd2lkZ2V0IHdpdGggaGFzaCBwYXJhbWV0ZXInXG4gICAgICAgIH0pXG4gICAgICAgIHNldFNlbGVjdGVkR3JvdXBJZChnZXRRdWVyeVNlbGVjdGlvbi5ncm91cElkKVxuICAgICAgICBzZXRTZWxlY3RlZEdyb3VwUXVlcnlJbmRleChnZXRRdWVyeVNlbGVjdGlvbi5pbmRleClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgICAgZXZlbnQ6ICdzZWxlY3Rpb24tY2hhbmdlZC10by11bmdyb3VwZWQtZnJvbS1oYXNoJyxcbiAgICAgICAgICBpbmRleDogZ2V0UXVlcnlTZWxlY3Rpb24uaW5kZXgsXG4gICAgICAgICAgbm90ZTogJ0hlbHBlclNpbXBsZSBleHBsaWNpdGx5IG9wZW5lZCB3aWRnZXQgd2l0aCBoYXNoIHBhcmFtZXRlcidcbiAgICAgICAgfSlcbiAgICAgICAgc2V0U2VsZWN0ZWRHcm91cElkKG51bGwpXG4gICAgICAgIHNldFNlbGVjdGVkVW5ncm91cGVkSW5kZXgoZ2V0UXVlcnlTZWxlY3Rpb24uaW5kZXgpXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSC1GSVJTVC1MT0FEJywge1xuICAgICAgICBldmVudDogJ0VYRUNVVElPTi1TS0lQUEVEJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIHJlYXNvbjogIXNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uID8gJ0ZMQUdfSVNfRkFMU0UnIDogJ05PX1FVRVJZX1NFTEVDVElPTicsXG4gICAgICAgIGRldGFpbGVkRGlhZ25vc3RpYzoge1xuICAgICAgICAgIHNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uLFxuICAgICAgICAgIGhhc0dldFF1ZXJ5U2VsZWN0aW9uOiAhIWdldFF1ZXJ5U2VsZWN0aW9uLFxuICAgICAgICAgIGdldFF1ZXJ5U2VsZWN0aW9uVmFsdWU6IGdldFF1ZXJ5U2VsZWN0aW9uLFxuICAgICAgICAgIGhhc0VmZmVjdGl2ZUluaXRpYWxRdWVyeVZhbHVlOiAhIWVmZmVjdGl2ZUluaXRpYWxRdWVyeVZhbHVlLFxuICAgICAgICAgIGVmZmVjdGl2ZUluaXRpYWxRdWVyeVZhbHVlLFxuICAgICAgICAgIG1hdGNoaW5nUXVlcnlJbmRleCxcbiAgICAgICAgICBzb3J0ZWRRdWVyeUl0ZW1zQ291bnQ6IHNvcnRlZFF1ZXJ5SXRlbXM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICAgIHBvc3NpYmxlQ2F1c2VzOiAhc2hvdWxkVXNlSW5pdGlhbFF1ZXJ5VmFsdWVGb3JTZWxlY3Rpb24gXG4gICAgICAgICAgICA/IFsnSGVscGVyU2ltcGxlIGRpZCBub3Qgc2V0IHRoZSBmbGFnJywgJ1dpZGdldCBvcGVuZWQgd2l0aG91dCBoYXNoIHBhcmFtZXRlciddXG4gICAgICAgICAgICA6IFsnbWF0Y2hpbmdRdWVyeUluZGV4IHJldHVybmVkIC0xJywgJ3Nob3J0SWQgZGlkIG5vdCBtYXRjaCBhbnkgcXVlcnknLCAncXVlcnlJdGVtcyBub3QgbG9hZGVkIHlldCddXG4gICAgICAgIH0sXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNILUVYRUMnLCB7XG4gICAgICAgIGV2ZW50OiAncXVlcnl0YXNrbGlzdC1zZWxlY3Rpb24tdXNlZWZmZWN0LXNraXBwZWQnLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgcmVhc29uOiAhc2hvdWxkVXNlSW5pdGlhbFF1ZXJ5VmFsdWVGb3JTZWxlY3Rpb24gPyAnZmxhZy1pcy1mYWxzZScgOiAnbm8tcXVlcnktc2VsZWN0aW9uJyxcbiAgICAgICAgY2hlY2s6IHtcbiAgICAgICAgICBzaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbixcbiAgICAgICAgICBoYXNHZXRRdWVyeVNlbGVjdGlvbjogISFnZXRRdWVyeVNlbGVjdGlvblxuICAgICAgICB9LFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgIGV2ZW50OiAncXVlcnktc2VsZWN0aW9uLXVzZWVmZmVjdC1za2lwcGVkJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIHJlYXNvbjogIXNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uID8gJ2ZsYWctaXMtZmFsc2UnIDogJ25vLXF1ZXJ5LXNlbGVjdGlvbicsXG4gICAgICAgIHNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uLFxuICAgICAgICBoYXNHZXRRdWVyeVNlbGVjdGlvbjogISFnZXRRdWVyeVNlbGVjdGlvbixcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgIH1cbiAgfSwgW3Nob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uLCBnZXRRdWVyeVNlbGVjdGlvbiwgd2lkZ2V0SWQsIGVmZmVjdGl2ZUluaXRpYWxRdWVyeVZhbHVlLCBtYXRjaGluZ1F1ZXJ5SW5kZXgsIHNvcnRlZFF1ZXJ5SXRlbXNdKVxuICBcbiAgLy8gR2V0IHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgcXVlcnkgaXRlbVxuICBjb25zdCBnZXRTZWxlY3RlZFF1ZXJ5SXRlbSA9ICgpOiBJbW11dGFibGVPYmplY3Q8UXVlcnlJdGVtVHlwZT4gPT4ge1xuICAgIC8vIFBSSU9SSVRZIDE6IFVzZSBjdXJyZW50IHN0YXRlIHNlbGVjdGlvblxuICAgIC8vIFRoZSBzdGF0ZSBpcyBpbml0aWFsaXplZCB3aXRoIHRoZSBoYXNoIG1hdGNoIChpZiBwcmVzZW50KSBvciBkZWZhdWx0IG9yZGVyLFxuICAgIC8vIGFuZCB1cGRhdGVkIHZpYSB1c2VFZmZlY3QgaWYgdGhlIGhhc2ggY2hhbmdlcyBsYXRlci5cbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgZXZlbnQ6ICdnZXRTZWxlY3RlZFF1ZXJ5SXRlbS1zdGF0ZS1zZWxlY3Rpb24nLFxuICAgICAgc2VsZWN0ZWRHcm91cElkLFxuICAgICAgaGFzU2VsZWN0ZWRHcm91cDogc2VsZWN0ZWRHcm91cElkICYmIGdyb3Vwc1tzZWxlY3RlZEdyb3VwSWRdLFxuICAgICAgc2VsZWN0ZWRHcm91cFF1ZXJ5SW5kZXgsXG4gICAgICBzZWxlY3RlZFVuZ3JvdXBlZEluZGV4LFxuICAgICAgdW5ncm91cGVkTGVuZ3RoOiB1bmdyb3VwZWQubGVuZ3RoLFxuICAgICAgZ3JvdXBPcmRlckxlbmd0aDogZ3JvdXBPcmRlci5sZW5ndGgsXG4gICAgICBub3RlOiAnVXNpbmcgc3RhdGUgc2VsZWN0aW9uIChoYXNoLWF3YXJlKSdcbiAgICB9KVxuICAgIFxuICAgIC8vIElmIGEgZ3JvdXAgaXMgc2VsZWN0ZWQsIGdldCBxdWVyeSBmcm9tIHRoYXQgZ3JvdXBcbiAgICBpZiAoc2VsZWN0ZWRHcm91cElkICYmIGdyb3Vwc1tzZWxlY3RlZEdyb3VwSWRdKSB7XG4gICAgICBjb25zdCBncm91cEl0ZW1zID0gZ3JvdXBzW3NlbGVjdGVkR3JvdXBJZF0uaXRlbXNcbiAgICAgIGlmIChncm91cEl0ZW1zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgaWR4ID0gc2VsZWN0ZWRHcm91cFF1ZXJ5SW5kZXggPCBncm91cEl0ZW1zLmxlbmd0aCA/IHNlbGVjdGVkR3JvdXBRdWVyeUluZGV4IDogMFxuICAgICAgICBjb25zdCBzZWxlY3RlZEl0ZW0gPSBncm91cEl0ZW1zW2lkeF1cbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgICBldmVudDogJ3NlbGVjdGVkLXF1ZXJ5LWZyb20tZ3JvdXAnLFxuICAgICAgICAgIGdyb3VwSWQ6IHNlbGVjdGVkR3JvdXBJZCxcbiAgICAgICAgICBncm91cFF1ZXJ5SW5kZXg6IGlkeCxcbiAgICAgICAgICBxdWVyeUl0ZW1Db25maWdJZDogc2VsZWN0ZWRJdGVtLmNvbmZpZ0lkLFxuICAgICAgICAgIHF1ZXJ5RGlzcGxheU5hbWU6IGdldFF1ZXJ5RGlzcGxheU5hbWUoc2VsZWN0ZWRJdGVtKVxuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gc2VsZWN0ZWRJdGVtXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIE90aGVyd2lzZSwgZ2V0IGZyb20gdW5ncm91cGVkIHF1ZXJpZXNcbiAgICBpZiAodW5ncm91cGVkLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IGlkeCA9IHNlbGVjdGVkVW5ncm91cGVkSW5kZXggPCB1bmdyb3VwZWQubGVuZ3RoID8gc2VsZWN0ZWRVbmdyb3VwZWRJbmRleCA6IDBcbiAgICAgIGNvbnN0IHNlbGVjdGVkSXRlbSA9IHVuZ3JvdXBlZFtpZHhdLml0ZW1cbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgIGV2ZW50OiAnc2VsZWN0ZWQtcXVlcnktZnJvbS11bmdyb3VwZWQnLFxuICAgICAgICB1bmdyb3VwZWRJbmRleDogaWR4LFxuICAgICAgICBxdWVyeUl0ZW1Db25maWdJZDogc2VsZWN0ZWRJdGVtLmNvbmZpZ0lkLFxuICAgICAgICBxdWVyeURpc3BsYXlOYW1lOiBnZXRRdWVyeURpc3BsYXlOYW1lKHNlbGVjdGVkSXRlbSlcbiAgICAgIH0pXG4gICAgICByZXR1cm4gc2VsZWN0ZWRJdGVtXG4gICAgfVxuICAgIFxuICAgIC8vIEZhbGxiYWNrIHRvIGZpcnN0IHF1ZXJ5IGl0ZW1cbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgZXZlbnQ6ICdzZWxlY3RlZC1xdWVyeS1mYWxsYmFjaycsXG4gICAgICBub3RlOiAnTm8gZ3JvdXBzIG9yIHVuZ3JvdXBlZCBxdWVyaWVzLCB1c2luZyBmaXJzdCBpdGVtJ1xuICAgIH0pXG4gICAgcmV0dXJuIHNvcnRlZFF1ZXJ5SXRlbXNbMF1cbiAgfVxuICBcbiAgY29uc3Qgc2VsZWN0ZWRRdWVyeUl0ZW0gPSBnZXRTZWxlY3RlZFF1ZXJ5SXRlbSgpXG4gIGNvbnN0IHNlbGVjdGVkUXVlcnlSZWFsSW5kZXggPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICByZXR1cm4gc29ydGVkUXVlcnlJdGVtcy5maW5kSW5kZXgocSA9PiBxLmNvbmZpZ0lkID09PSBzZWxlY3RlZFF1ZXJ5SXRlbS5jb25maWdJZClcbiAgfSwgW3NvcnRlZFF1ZXJ5SXRlbXMsIHNlbGVjdGVkUXVlcnlJdGVtXSlcbiAgXG4gIC8vIElmIG9ubHkgb25lIHF1ZXJ5IHRvdGFsLCBkb24ndCBzaG93IGRyb3Bkb3duXG4gIGNvbnN0IHNob3dEcm9wZG93biA9IHNvcnRlZFF1ZXJ5SXRlbXMubGVuZ3RoID4gMSB8fCBncm91cE9yZGVyLmxlbmd0aCA+IDBcbiAgXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9e2BydW50aW1lLXF1ZXJ5X19xdWVyeS1saXN0IGgtMTAwICR7Y2xhc3NOYW1lfWB9IGNzcz17Y3NzYFxuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAucXVlcnktc2VsZWN0b3Ige1xuICAgICAgICBwYWRkaW5nOiAxNnB4O1xuICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tc3lzLWNvbG9yLWRpdmlkZXItc2Vjb25kYXJ5KTtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgZ2FwOiA4cHg7XG4gICAgICB9XG4gICAgICAucXVlcnktc2VsZWN0b3ItbGFiZWwge1xuICAgICAgICBmb250LXNpemU6IDAuODc1cmVtO1xuICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgICBjb2xvcjogdmFyKC0tc3lzLWNvbG9yLXRleHQtcHJpbWFyeSk7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDRweDtcbiAgICAgIH1cbiAgICAgIC5xdWVyeS1zZWxlY3RvciBzZWxlY3Qge1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgIH1cbiAgICAgIC5xdWVyeS10YXNrLWNvbnRhaW5lciB7XG4gICAgICAgIGZsZXg6IDE7XG4gICAgICAgIG92ZXJmbG93OiBhdXRvO1xuICAgICAgfVxuICAgIGB9PlxuICAgICAgey8qIFNlYXJjaCBMYXllciBkcm9wZG93biBtb3ZlZCB0byBRdWVyeVRhc2sgUXVlcnkgdGFiIGNvbnRlbnQgKi99XG4gICAgICBcbiAgICAgIHsvKiBTaG93IHNlbGVjdGVkIHF1ZXJ5IGZvcm0gZGlyZWN0bHkgYmVsb3cgKi99XG4gICAgICB7c2VsZWN0ZWRRdWVyeUl0ZW0gJiYgKCgpID0+IHtcbiAgICAgICAgY29uc3Qgd2lsbFBhc3NJbml0aWFsSW5wdXRWYWx1ZSA9IHNlbGVjdGVkUXVlcnlJdGVtLnNob3J0SWQgPT09IGVmZmVjdGl2ZUluaXRpYWxRdWVyeVZhbHVlPy5zaG9ydElkXG4gICAgICAgIGNvbnN0IGluaXRpYWxJbnB1dFZhbHVlVG9QYXNzID0gd2lsbFBhc3NJbml0aWFsSW5wdXRWYWx1ZSA/IGVmZmVjdGl2ZUluaXRpYWxRdWVyeVZhbHVlPy52YWx1ZSA6IHVuZGVmaW5lZFxuICAgICAgICBcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgICBldmVudDogJ2luaXRpYWxJbnB1dFZhbHVlLWJlaW5nLXBhc3NlZC10by1xdWVyeXRhc2snLFxuICAgICAgICAgIHdpZGdldElkLFxuICAgICAgICAgIHNlbGVjdGVkUXVlcnlJdGVtU2hvcnRJZDogc2VsZWN0ZWRRdWVyeUl0ZW0uc2hvcnRJZCxcbiAgICAgICAgICBzZWxlY3RlZFF1ZXJ5SXRlbUNvbmZpZ0lkOiBzZWxlY3RlZFF1ZXJ5SXRlbS5jb25maWdJZCxcbiAgICAgICAgICBlZmZlY3RpdmVJbml0aWFsUXVlcnlWYWx1ZVNob3J0SWQ6IGVmZmVjdGl2ZUluaXRpYWxRdWVyeVZhbHVlPy5zaG9ydElkLFxuICAgICAgICAgIHdpbGxQYXNzSW5pdGlhbElucHV0VmFsdWUsXG4gICAgICAgICAgaW5pdGlhbElucHV0VmFsdWU6IGluaXRpYWxJbnB1dFZhbHVlVG9QYXNzLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9KVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YHF1ZXJ5LXRhc2stY29udGFpbmVyICR7aXNJblBvcHBlciA/IEZPQ1VTQUJMRV9DT05UQUlORVJfQ0xBU1MgOiAnJ31gfT5cbiAgICAgICAgICAgIDxRdWVyeVRhc2tcbiAgICAgICAgICAgICAgd2lkZ2V0SWQ9e3dpZGdldElkfVxuICAgICAgICAgICAgICBpbmRleD17c2VsZWN0ZWRRdWVyeVJlYWxJbmRleCA+PSAwID8gc2VsZWN0ZWRRdWVyeVJlYWxJbmRleCA6IDB9XG4gICAgICAgICAgICAgIHRvdGFsPXtzb3J0ZWRRdWVyeUl0ZW1zLmxlbmd0aH1cbiAgICAgICAgICAgICAgcXVlcnlJdGVtPXtzZWxlY3RlZFF1ZXJ5SXRlbX1cbiAgICAgICAgICAgICAgaXNJblBvcHBlcj17aXNJblBvcHBlcn1cbiAgICAgICAgICAgICAgaW5pdGlhbElucHV0VmFsdWU9e2luaXRpYWxJbnB1dFZhbHVlVG9QYXNzfVxuICAgICAgICAgICAgICBvbkhhc2hQYXJhbWV0ZXJVc2VkPXtvbkhhc2hQYXJhbWV0ZXJVc2VkfVxuICAgICAgICAgICAgcXVlcnlJdGVtcz17c29ydGVkUXVlcnlJdGVtc31cbiAgICAgICAgICAgIHNlbGVjdGVkUXVlcnlJbmRleD17c2VsZWN0ZWRVbmdyb3VwZWRJbmRleH1cbiAgICAgICAgICAgIG9uUXVlcnlDaGFuZ2U9eyhpbmRleCkgPT4gc2V0U2VsZWN0ZWRVbmdyb3VwZWRJbmRleChpbmRleCl9XG4gICAgICAgICAgICAvLyBHcm91cGluZyBwcm9wc1xuICAgICAgICAgICAgZ3JvdXBzPXtncm91cHN9XG4gICAgICAgICAgICB1bmdyb3VwZWQ9e3VuZ3JvdXBlZH1cbiAgICAgICAgICAgIC8vIEdyYXBoaWNzIGxheWVyIHByb3BzXG4gICAgICAgICAgICB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0PXt1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0fVxuICAgICAgICAgICAgZ3JhcGhpY3NMYXllcj17Z3JhcGhpY3NMYXllcn1cbiAgICAgICAgICAgIG1hcFZpZXc9e21hcFZpZXd9XG4gICAgICAgICAgICBvbkluaXRpYWxpemVHcmFwaGljc0xheWVyPXtvbkluaXRpYWxpemVHcmFwaGljc0xheWVyfVxuICAgICAgICAgICAgb25DbGVhckdyYXBoaWNzTGF5ZXI9e29uQ2xlYXJHcmFwaGljc0xheWVyfVxuICAgICAgICAgICAgZ3JvdXBPcmRlcj17Z3JvdXBPcmRlcn1cbiAgICAgICAgICAgIHNlbGVjdGVkR3JvdXBJZD17c2VsZWN0ZWRHcm91cElkfVxuICAgICAgICAgICAgc2VsZWN0ZWRHcm91cFF1ZXJ5SW5kZXg9e3NlbGVjdGVkR3JvdXBRdWVyeUluZGV4fVxuICAgICAgICAgICAgb25Hcm91cENoYW5nZT17KGdyb3VwSWQpID0+IHNldFNlbGVjdGVkR3JvdXBJZChncm91cElkKX1cbiAgICAgICAgICAgIG9uR3JvdXBRdWVyeUNoYW5nZT17KGluZGV4KSA9PiBzZXRTZWxlY3RlZEdyb3VwUXVlcnlJbmRleChpbmRleCl9XG4gICAgICAgICAgICBvblVuZ3JvdXBlZENoYW5nZT17KGluZGV4KSA9PiBzZXRTZWxlY3RlZFVuZ3JvdXBlZEluZGV4KGluZGV4KX1cbiAgICAgICAgICAgIHJlc3VsdHNNb2RlPXtyZXN1bHRzTW9kZX1cbiAgICAgICAgICAgIG9uUmVzdWx0c01vZGVDaGFuZ2U9e29uUmVzdWx0c01vZGVDaGFuZ2V9XG4gICAgICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHM9e2FjY3VtdWxhdGVkUmVjb3Jkc31cbiAgICAgICAgICAgIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlPXtvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZX1cbiAgICAgICAgICAgIGFjdGl2ZVRhYj17YWN0aXZlVGFifVxuICAgICAgICAgICAgb25UYWJDaGFuZ2U9e29uVGFiQ2hhbmdlfVxuICAgICAgICAgICAgZXZlbnRNYW5hZ2VyPXtldmVudE1hbmFnZXJ9XG4gICAgICAgICAgICAgIC8vIE5vIG9uTmF2QmFjayAtIG5vIG5hdmlnYXRpb24gbmVlZGVkXG4gICAgICAgICAgICAvPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApXG4gICAgICB9KSgpfVxuICAgIDwvZGl2PlxuICApXG59XG5cblxuXG4iLCIvKiogQGpzeCBqc3ggKi9cclxuaW1wb3J0IHsgUmVhY3QsIFJlYWN0UmVkdXgsIHR5cGUgSU1TdGF0ZSwganN4LCBjc3MsIGNsYXNzTmFtZXMsIHR5cGUgSW1tdXRhYmxlQXJyYXksIHR5cGUgVXNlRGF0YVNvdXJjZSwgaG9va3MgfSBmcm9tICdqaW11LWNvcmUnXHJcbmltcG9ydCB7IFNlbGVjdCwgVG9vbHRpcCwgQnV0dG9uIH0gZnJvbSAnamltdS11aSdcclxuaW1wb3J0IHsgdHlwZSBDcmVhdGVUb29sVHlwZSwgU3BhdGlhbEZpbHRlclR5cGUsIHR5cGUgU3BhdGlhbEZpbHRlck9iaiwgdHlwZSBTcGF0aWFsUmVsYXRpb24sIFVuaXRUeXBlIH0gZnJvbSAnLi4vY29uZmlnJ1xyXG5pbXBvcnQgZGVmYXVsdE1lc3NhZ2UgZnJvbSAnLi90cmFuc2xhdGlvbnMvZGVmYXVsdCdcclxuaW1wb3J0IHsgR2VvbWV0cnlGcm9tRGF0YVNvdXJjZSB9IGZyb20gJy4vZ2VvbWV0cnktZnJvbS1kcydcclxuaW1wb3J0IHsgR2VvbWV0cnlGcm9tTWFwIH0gZnJvbSAnLi9nZW9tZXRyeS1mcm9tLW1hcCdcclxuaW1wb3J0IHsgR2VvbWV0cnlGcm9tRHJhdyB9IGZyb20gJy4vZ2VvbWV0cnktZnJvbS1kcmF3J1xyXG5pbXBvcnQgeyBJbmZvT3V0bGluZWQgfSBmcm9tICdqaW11LWljb25zL291dGxpbmVkL3N1Z2dlc3RlZC9pbmZvJ1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBRdWVyeVRhc2tJdGVtUHJvcHMge1xyXG4gIHdpZGdldElkOiBzdHJpbmdcclxuICBsYWJlbDogc3RyaW5nXHJcbiAgZGVzYzogc3RyaW5nXHJcbiAgZHNFbmFibGVCdWZmZXI6IGJvb2xlYW5cclxuICBkc0J1ZmZlckRpc3RhbmNlOiBudW1iZXJcclxuICBkc0J1ZmZlclVuaXQ6IFVuaXRUeXBlXHJcbiAgZHJhd0VuYWJsZUJ1ZmZlcjogYm9vbGVhblxyXG4gIGRyYXdCdWZmZXJEaXN0YW5jZTogbnVtYmVyXHJcbiAgZHJhd0J1ZmZlclVuaXQ6IFVuaXRUeXBlXHJcbiAgc3BhdGlhbFJlbGF0aW9uczogSW1tdXRhYmxlQXJyYXk8U3BhdGlhbFJlbGF0aW9uPlxyXG4gIHVzZURhdGFTb3VyY2VzOiBJbW11dGFibGVBcnJheTxVc2VEYXRhU291cmNlPlxyXG4gIHVzZVJ1bnRpbWVEYXRhOiBib29sZWFuXHJcbiAgZmlsdGVyVHlwZXM6IEltbXV0YWJsZUFycmF5PFNwYXRpYWxGaWx0ZXJUeXBlPlxyXG4gIG1hcFdpZGdldElkczogSW1tdXRhYmxlQXJyYXk8c3RyaW5nPlxyXG4gIGNyZWF0ZVRvb2xUeXBlczogSW1tdXRhYmxlQXJyYXk8Q3JlYXRlVG9vbFR5cGU+XHJcbiAgb25GaWx0ZXJDaGFuZ2U6IChmaWx0ZXI6IFNwYXRpYWxGaWx0ZXJPYmopID0+IHZvaWRcclxuICBvblJlbGF0aW9uQ2hhbmdlOiAocmVsOiBTcGF0aWFsUmVsYXRpb24pID0+IHZvaWRcclxuICBvbkJ1ZmZlckNoYW5nZTogKGRpc3RhbmNlOiBudW1iZXIsIHVuaXQ6IFVuaXRUeXBlKSA9PiB2b2lkXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBRdWVyeVRhc2tTcGF0aWFsRm9ybSAocHJvcHM6IFF1ZXJ5VGFza0l0ZW1Qcm9wcykge1xyXG4gIGNvbnN0IHtcclxuICAgIGxhYmVsLCBkZXNjLCBmaWx0ZXJUeXBlcywgbWFwV2lkZ2V0SWRzLCBvbkZpbHRlckNoYW5nZSwgb25SZWxhdGlvbkNoYW5nZSwgb25CdWZmZXJDaGFuZ2UsIHVzZURhdGFTb3VyY2VzLCBzcGF0aWFsUmVsYXRpb25zLCB1c2VSdW50aW1lRGF0YSxcclxuICAgIGRzRW5hYmxlQnVmZmVyLCBkc0J1ZmZlckRpc3RhbmNlLCBkc0J1ZmZlclVuaXQsIGRyYXdFbmFibGVCdWZmZXIsIGRyYXdCdWZmZXJEaXN0YW5jZSwgZHJhd0J1ZmZlclVuaXQsIGNyZWF0ZVRvb2xUeXBlcywgd2lkZ2V0SWRcclxuICB9ID0gcHJvcHNcclxuICBjb25zdCBnZXRJMThuTWVzc2FnZSA9IGhvb2tzLnVzZVRyYW5zbGF0aW9uKGRlZmF1bHRNZXNzYWdlKVxyXG4gIC8vIHVzZWQgdG8gc3RvcmUgdGhlIHNlbGVjdGlvbiBvZiB0aGUgZGF0YSBzb3VyY2UgaW4gb3JkZXIgdG8gdXBkYXRlIHRoZSBmaWx0ZXIgd2hlbiBvcHRpb24gY2hhbmdlc1xyXG4gIGNvbnN0IHNlbGVjdGVkR2VvbWV0cmllc1JlZiA9IFJlYWN0LnVzZVJlZjxhbnk+KG51bGwpXHJcbiAgY29uc3QgbWFwRXhpc3RzID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcclxuICAgIGlmIChtYXBXaWRnZXRJZHM/Lmxlbmd0aCA+IDApIHtcclxuICAgICAgY29uc3QgbWFwV2lkZ2V0SWQgPSBtYXBXaWRnZXRJZHNbMF1cclxuICAgICAgcmV0dXJuIHN0YXRlLmFwcENvbmZpZy53aWRnZXRzW21hcFdpZGdldElkXSAhPSBudWxsXHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2VcclxuICB9KVxyXG4gIGNvbnN0IGNhblVzZU1hcEZpbHRlciA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xyXG4gICAgcmV0dXJuIG1hcEV4aXN0cyAmJiAoZmlsdGVyVHlwZXM/LmluY2x1ZGVzKFNwYXRpYWxGaWx0ZXJUeXBlLkN1cnJlbnRNYXBFeHRlbnQpIHx8IGZpbHRlclR5cGVzPy5pbmNsdWRlcyhTcGF0aWFsRmlsdGVyVHlwZS5JbnRlcmFjdGl2ZURyYXdNb2RlKSlcclxuICB9LCBbZmlsdGVyVHlwZXMsIG1hcEV4aXN0c10pXHJcbiAgY29uc3Qgc3VwcG9ydGVkRmlsdGVyVHlwZXMgPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcclxuICAgIGNvbnN0IHJlc3VsdCA9IFtdXHJcbiAgICBpZiAodXNlRGF0YVNvdXJjZXM/Lmxlbmd0aCA+IDAgfHwgdXNlUnVudGltZURhdGEpIHtcclxuICAgICAgcmVzdWx0LnB1c2goeyB2YWx1ZTogJ2RhdGEnLCBsYWJlbDogZ2V0STE4bk1lc3NhZ2UoJ2ZlYXR1cmVGcm9tRHMnKSB9KVxyXG4gICAgfVxyXG4gICAgaWYgKGNhblVzZU1hcEZpbHRlciAmJiBmaWx0ZXJUeXBlcz8uaW5jbHVkZXMoU3BhdGlhbEZpbHRlclR5cGUuQ3VycmVudE1hcEV4dGVudCkpIHtcclxuICAgICAgcmVzdWx0LnB1c2goeyB2YWx1ZTogJ21hcCcsIGxhYmVsOiBnZXRJMThuTWVzc2FnZShgc3BhdGlhbEZpbHRlclR5cGVfJHtTcGF0aWFsRmlsdGVyVHlwZS5DdXJyZW50TWFwRXh0ZW50fWApIH0pXHJcbiAgICB9XHJcbiAgICBpZiAoY2FuVXNlTWFwRmlsdGVyICYmIGZpbHRlclR5cGVzPy5pbmNsdWRlcyhTcGF0aWFsRmlsdGVyVHlwZS5JbnRlcmFjdGl2ZURyYXdNb2RlKSkge1xyXG4gICAgICByZXN1bHQucHVzaCh7IHZhbHVlOiAnZHJhdycsIGxhYmVsOiBnZXRJMThuTWVzc2FnZShgc3BhdGlhbEZpbHRlclR5cGVfJHtTcGF0aWFsRmlsdGVyVHlwZS5JbnRlcmFjdGl2ZURyYXdNb2RlfWApIH0pXHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzdWx0XHJcbiAgfSwgW2NhblVzZU1hcEZpbHRlciwgdXNlRGF0YVNvdXJjZXMsIHVzZVJ1bnRpbWVEYXRhLCBnZXRJMThuTWVzc2FnZSwgZmlsdGVyVHlwZXNdKVxyXG5cclxuICBjb25zdCBbY3VycmVudEZpbHRlclR5cGUsIHNldEN1cnJlbnRGaWx0ZXJUeXBlXSA9IFJlYWN0LnVzZVN0YXRlKHN1cHBvcnRlZEZpbHRlclR5cGVzPy5bMF0/LnZhbHVlKVxyXG5cclxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgLy8gaW4gb3JkZXIgdG8gYXZvaWQgaW52YWxpZCBvcHRpb24gYmVpbmcgc2VsZWN0ZWRcclxuICAgIGlmIChjdXJyZW50RmlsdGVyVHlwZSAhPT0gJ25vbmUnICYmICFzdXBwb3J0ZWRGaWx0ZXJUeXBlcy5maW5kKChpdGVtKSA9PiBpdGVtLnZhbHVlID09PSBjdXJyZW50RmlsdGVyVHlwZSkpIHtcclxuICAgICAgc2V0Q3VycmVudEZpbHRlclR5cGUoc3VwcG9ydGVkRmlsdGVyVHlwZXM/LlswXT8udmFsdWUpXHJcbiAgICB9XHJcbiAgfSwgW2N1cnJlbnRGaWx0ZXJUeXBlLCBzdXBwb3J0ZWRGaWx0ZXJUeXBlc10pXHJcblxyXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICAvLyBjbGVhciB0aGUgcmVsYXRpb25zaGlwIGFuZCBidWZmZXIgaWYgZmlsdGVyIHR5cGUgaXMgbm90ICdkYXRhJ1xyXG4gICAgaWYgKGN1cnJlbnRGaWx0ZXJUeXBlID09PSAnbWFwJyB8fCBjdXJyZW50RmlsdGVyVHlwZSA9PT0gJ2RyYXcnIHx8IGN1cnJlbnRGaWx0ZXJUeXBlID09PSAnbm9uZScpIHtcclxuICAgICAgb25SZWxhdGlvbkNoYW5nZShudWxsKVxyXG4gICAgICBvbkJ1ZmZlckNoYW5nZSgwLCBVbml0VHlwZS5NZXRlcnMpXHJcbiAgICAgIG9uRmlsdGVyQ2hhbmdlKHsgZ2VvbWV0cnk6IG51bGwgfSlcclxuICAgIH1cclxuICAgIC8vIG5vIG5lZWQgdG8gdXBkYXRlIHRoZSBmaWx0ZXIgaWYgdGhlIGRhdGEgc291cmNlIGhhcyBzZWxlY3Rpb24gc2luY2UgaXQgd2lsbCBiZSB1cGRhdGVkIGluIHRoZSBoYW5kbGVTZWxlY3Rpb25DaGFuZ2UgbWV0aG9kXHJcbiAgICBpZiAoY3VycmVudEZpbHRlclR5cGUgPT09ICdkYXRhJyAmJiBzZWxlY3RlZEdlb21ldHJpZXNSZWYuY3VycmVudCA9PSBudWxsKSB7XHJcbiAgICAgIG9uRmlsdGVyQ2hhbmdlKHsgZ2VvbWV0cnk6IG51bGwgfSlcclxuICAgIH1cclxuICB9LCBbY3VycmVudEZpbHRlclR5cGUsIG9uUmVsYXRpb25DaGFuZ2UsIG9uQnVmZmVyQ2hhbmdlLCBvbkZpbHRlckNoYW5nZV0pXHJcblxyXG4gIGNvbnN0IGhhbmRsZUZpbHRlclR5cGVDaGFuZ2VkID0gUmVhY3QudXNlQ2FsbGJhY2soKGV2dCkgPT4geyBzZXRDdXJyZW50RmlsdGVyVHlwZShldnQudGFyZ2V0LnZhbHVlKSB9LCBbXSlcclxuXHJcbiAgY29uc3QgaGFuZGxlR2VvbWV0cnlDaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjaygoZ2VvbWV0cnk6IF9fZXNyaS5HZW9tZXRyeSwgbGF5ZXI/OiBfX2VzcmkuR3JhcGhpY3NMYXllciwgZ3JhcGhpYz86IF9fZXNyaS5HcmFwaGljLCBjbGVhckFmdGVyQXBwbHk/OiBib29sZWFuKSA9PiB7XHJcbiAgICBvbkZpbHRlckNoYW5nZSh7IGdlb21ldHJ5LCBncmFwaGljLCBsYXllciwgY2xlYXJBZnRlckFwcGx5IH0pXHJcbiAgfSwgW29uRmlsdGVyQ2hhbmdlXSlcclxuXHJcbiAgY29uc3QgaGFuZGxlU2VsZWN0aW9uQ2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soKGdlb21ldHJpZXMpID0+IHtcclxuICAgIHNlbGVjdGVkR2VvbWV0cmllc1JlZi5jdXJyZW50ID0gZ2VvbWV0cmllc1xyXG4gICAgb25GaWx0ZXJDaGFuZ2UoeyBnZW9tZXRyeTogZ2VvbWV0cmllcyB9KVxyXG4gIH0sIFtvbkZpbHRlckNoYW5nZV0pXHJcblxyXG4gIGlmICghKHVzZURhdGFTb3VyY2VzPy5sZW5ndGggPiAwIHx8IHVzZVJ1bnRpbWVEYXRhIHx8IGNhblVzZU1hcEZpbHRlcikpIHtcclxuICAgIHJldHVybiBudWxsXHJcbiAgfVxyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPGRpdiByb2xlPSdncm91cCcgY2xhc3NOYW1lPSdweC00IHBiLTQnIGFyaWEtbGFiZWw9e2xhYmVsfT5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ2Zvcm0tdGl0bGUgbXktMiBkLWZsZXggYWxpZ24taXRlbXMtY2VudGVyJywgeyAnZC1ub25lJzogIWxhYmVsICYmICFkZXNjIH0pfT5cclxuICAgICAgICB7bGFiZWwgJiYgPGRpdiBjbGFzc05hbWU9J21yLTIgdGl0bGUyJz57bGFiZWx9PC9kaXY+fVxyXG4gICAgICAgIHtkZXNjICYmIChcclxuICAgICAgICAgIDxUb29sdGlwIHBsYWNlbWVudD0nYm90dG9tJyBjc3M9e2Nzc2B3aGl0ZS1zcGFjZTogcHJlLWxpbmU7YH0gdGl0bGU9e2Rlc2N9PlxyXG4gICAgICAgICAgICA8QnV0dG9uIHNpemU9J3NtJyBpY29uIHR5cGU9J3RlcnRpYXJ5Jz5cclxuICAgICAgICAgICAgICA8SW5mb091dGxpbmVkIGNvbG9yPSd2YXIoLS1zeXMtY29sb3ItcHJpbWFyeS1tYWluKScgc2l6ZT0ncycvPlxyXG4gICAgICAgICAgICA8L0J1dHRvbj5cclxuICAgICAgICAgIDwvVG9vbHRpcD5cclxuICAgICAgICApfVxyXG4gICAgICA8L2Rpdj5cclxuICAgICAge3N1cHBvcnRlZEZpbHRlclR5cGVzLmxlbmd0aCA+IDAgJiYgKFxyXG4gICAgICAgIDxkaXY+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndGl0bGUzJz57Z2V0STE4bk1lc3NhZ2UoJ2Nob29zZUZpbHRlclR5cGUnKX08L2Rpdj5cclxuICAgICAgICAgIDxTZWxlY3RcclxuICAgICAgICAgICAgYXJpYS1sYWJlbD17Z2V0STE4bk1lc3NhZ2UoJ2Nob29zZUZpbHRlclR5cGUnKX1cclxuICAgICAgICAgICAgY3NzPXtjc3NgaGVpZ2h0OiAzMnB4O2B9XHJcbiAgICAgICAgICAgIHZhbHVlPXtjdXJyZW50RmlsdGVyVHlwZX1cclxuICAgICAgICAgICAgb25DaGFuZ2U9e2hhbmRsZUZpbHRlclR5cGVDaGFuZ2VkfVxyXG4gICAgICAgICAgPlxyXG4gICAgICAgICAgICA8b3B0aW9uIGtleT0nLScgdmFsdWU9J25vbmUnPi08L29wdGlvbj5cclxuICAgICAgICAgICAge3N1cHBvcnRlZEZpbHRlclR5cGVzLm1hcChpdGVtID0+IDxvcHRpb24ga2V5PXtpdGVtLnZhbHVlfSB2YWx1ZT17aXRlbS52YWx1ZX0+e2l0ZW0ubGFiZWx9PC9vcHRpb24+KX1cclxuICAgICAgICAgIDwvU2VsZWN0PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICApfVxyXG4gICAgICB7Y3VycmVudEZpbHRlclR5cGUgPT09ICdkYXRhJyAmJiAoXHJcbiAgICAgICAgPEdlb21ldHJ5RnJvbURhdGFTb3VyY2VcclxuICAgICAgICAgIGVuYWJsZUJ1ZmZlcj17ZHNFbmFibGVCdWZmZXJ9XHJcbiAgICAgICAgICBidWZmZXJEaXN0YW5jZT17ZHNCdWZmZXJEaXN0YW5jZX1cclxuICAgICAgICAgIGJ1ZmZlclVuaXQ9e2RzQnVmZmVyVW5pdH1cclxuICAgICAgICAgIHNwYXRpYWxSZWxhdGlvbnM9e3NwYXRpYWxSZWxhdGlvbnN9XHJcbiAgICAgICAgICB1c2VEYXRhU291cmNlcz17dXNlRGF0YVNvdXJjZXN9XHJcbiAgICAgICAgICB1c2VSdW50aW1lRGF0YT17dXNlUnVudGltZURhdGF9XHJcbiAgICAgICAgICBvblNlbGVjdGlvbkNoYW5nZT17aGFuZGxlU2VsZWN0aW9uQ2hhbmdlfVxyXG4gICAgICAgICAgb25SZWxhdGlvbkNoYW5nZT17b25SZWxhdGlvbkNoYW5nZX1cclxuICAgICAgICAgIG9uQnVmZmVyQ2hhbmdlPXtvbkJ1ZmZlckNoYW5nZX1cclxuICAgICAgICAvPlxyXG4gICAgICApfVxyXG4gICAgICB7Y3VycmVudEZpbHRlclR5cGUgPT09ICdtYXAnICYmIChcclxuICAgICAgICA8R2VvbWV0cnlGcm9tTWFwXHJcbiAgICAgICAgICBtYXBXaWRnZXRJZHM9e21hcFdpZGdldElkc31cclxuICAgICAgICAgIGNyZWF0ZVRvb2xUeXBlcz17Y3JlYXRlVG9vbFR5cGVzfVxyXG4gICAgICAgICAgb25HZW9tZXRyeUNoYW5nZT17aGFuZGxlR2VvbWV0cnlDaGFuZ2V9XHJcbiAgICAgICAgLz5cclxuICAgICAgKX1cclxuICAgICAge2N1cnJlbnRGaWx0ZXJUeXBlID09PSAnZHJhdycgJiYgKFxyXG4gICAgICAgIDxHZW9tZXRyeUZyb21EcmF3XHJcbiAgICAgICAgICBlbmFibGVCdWZmZXI9e2RyYXdFbmFibGVCdWZmZXJ9XHJcbiAgICAgICAgICBidWZmZXJEaXN0YW5jZT17ZHJhd0J1ZmZlckRpc3RhbmNlfVxyXG4gICAgICAgICAgYnVmZmVyVW5pdD17ZHJhd0J1ZmZlclVuaXR9XHJcbiAgICAgICAgICBtYXBXaWRnZXRJZHM9e21hcFdpZGdldElkc31cclxuICAgICAgICAgIHdpZGdldElkPXt3aWRnZXRJZH1cclxuICAgICAgICAgIGNyZWF0ZVRvb2xUeXBlcz17Y3JlYXRlVG9vbFR5cGVzfVxyXG4gICAgICAgICAgb25HZW9tZXRyeUNoYW5nZT17aGFuZGxlR2VvbWV0cnlDaGFuZ2V9XHJcbiAgICAgICAgICBvbkJ1ZmZlckNoYW5nZT17b25CdWZmZXJDaGFuZ2V9XHJcbiAgICAgICAgLz5cclxuICAgICAgKX1cclxuICAgIDwvZGl2PlxyXG4gIClcclxufVxyXG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7XG4gIFJlYWN0LFxuICBqc3gsXG4gIGNzcyxcbiAgdHlwZSBJbW11dGFibGVPYmplY3QsXG4gIHR5cGUgSW1tdXRhYmxlQXJyYXksXG4gIHR5cGUgSU1TcWxFeHByZXNzaW9uLFxuICBEYXRhU291cmNlQ29tcG9uZW50LFxuICB0eXBlIERhdGFTb3VyY2UsXG4gIHR5cGUgVXNlRGF0YVNvdXJjZSxcbiAgSW1tdXRhYmxlLFxuICB0eXBlIEZlYXR1cmVMYXllckRhdGFTb3VyY2UsXG4gIGNsYXNzTmFtZXMsXG4gIENPTlNUQU5UUyxcbiAgdHlwZSBEYXRhUmVjb3JkLFxuICB0eXBlIERhdGFSZWNvcmRTZXQsXG4gIHR5cGUgUXVlcnlQYXJhbXMsXG4gIERhdGFTb3VyY2VTdGF0dXMsXG4gIERhdGFSZWNvcmRTZXRDaGFuZ2VNZXNzYWdlLFxuICBEYXRhUmVjb3Jkc1NlbGVjdGlvbkNoYW5nZU1lc3NhZ2UsXG4gIFJlY29yZFNldENoYW5nZVR5cGUsXG4gIE1lc3NhZ2VNYW5hZ2VyLFxuICBNdXRhYmxlU3RvcmVNYW5hZ2VyLFxuICBEYXRhQWN0aW9uTWFuYWdlcixcbiAgRGF0YUxldmVsLFxuICB0eXBlIFF1ZXJpYWJsZURhdGFTb3VyY2UsXG4gIHR5cGUgRmVhdHVyZUxheWVyUXVlcnlQYXJhbXMsXG4gIGhvb2tzLFxuICBsb2Rhc2gsXG4gIERhdGFTb3VyY2VNYW5hZ2VyLFxuICBmb2N1c0VsZW1lbnRJbktleWJvYXJkTW9kZSxcbiAgUmVhY3RSZWR1eCxcbiAgdHlwZSBJTVN0YXRlLFxuICB0eXBlIEZlYXR1cmVEYXRhUmVjb3JkXG59IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IEJ1dHRvbiwgVG9vbHRpcCwgRk9DVVNBQkxFX0NPTlRBSU5FUl9DTEFTUywgVGFicywgVGFiLCBTZWxlY3QgfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHsgSW5mb091dGxpbmVkIH0gZnJvbSAnamltdS1pY29ucy9vdXRsaW5lZC9zdWdnZXN0ZWQvaW5mbydcbmltcG9ydCB7IFRyYXNoT3V0bGluZWQgfSBmcm9tICdqaW11LWljb25zL291dGxpbmVkL2VkaXRvci90cmFzaCdcbmltcG9ydCB7IFBhZ2luZ1R5cGUsIHR5cGUgUXVlcnlJdGVtVHlwZSwgdHlwZSBTcGF0aWFsRmlsdGVyT2JqLCBTZWxlY3Rpb25UeXBlIH0gZnJvbSAnLi4vY29uZmlnJ1xuaW1wb3J0IHsgUXVlcnlUYXNrRm9ybSB9IGZyb20gJy4vcXVlcnktdGFzay1mb3JtJ1xuaW1wb3J0IHsgUXVlcnlUYXNrUmVzdWx0IH0gZnJvbSAnLi9xdWVyeS1yZXN1bHQnXG5pbXBvcnQgeyBEYXRhU291cmNlVGlwLCB1c2VEYXRhU291cmNlRXhpc3RzLCBFcnJvck1lc3NhZ2UgfSBmcm9tICd3aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbidcbmltcG9ydCB7IFF1ZXJ5VGFza0xhYmVsIH0gZnJvbSAnLi9xdWVyeS10YXNrLWxhYmVsJ1xuaW1wb3J0IHsgdXNlWm9vbVRvUmVjb3JkcyB9IGZyb20gJy4vaG9va3MvdXNlLXpvb20tdG8tcmVjb3JkcydcbmltcG9ydCB7IERFRkFVTFRfUVVFUllfSVRFTSB9IGZyb20gJy4uL2RlZmF1bHQtcXVlcnktaXRlbSdcbmltcG9ydCB7IGdlbmVyYXRlUXVlcnlQYXJhbXMsIGV4ZWN1dGVRdWVyeSwgZXhlY3V0ZUNvdW50UXVlcnkgfSBmcm9tICcuL3F1ZXJ5LXV0aWxzJ1xuaW1wb3J0IHsgbWVyZ2VSZXN1bHRzSW50b0FjY3VtdWxhdGVkLCByZW1vdmVSZXN1bHRzRnJvbUFjY3VtdWxhdGVkLCByZW1vdmVSZWNvcmRzRnJvbU9yaWdpblNlbGVjdGlvbnMgfSBmcm9tICcuL3Jlc3VsdHMtbWFuYWdlbWVudC11dGlscydcbmltcG9ydCB7IHJlbW92ZUhpZ2hsaWdodEdyYXBoaWNzIH0gZnJvbSAnLi9ncmFwaGljcy1sYXllci11dGlscydcbmltcG9ydCB7IE1lbnVPdXRsaW5lZCB9IGZyb20gJ2ppbXUtaWNvbnMvb3V0bGluZWQvZWRpdG9yL21lbnUnXG5pbXBvcnQgZGVmYXVsdE1lc3NhZ2UgZnJvbSAnLi90cmFuc2xhdGlvbnMvZGVmYXVsdCdcbmltcG9ydCB7IEFycm93TGVmdE91dGxpbmVkIH0gZnJvbSAnamltdS1pY29ucy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9hcnJvdy1sZWZ0J1xuaW1wb3J0IHsgTG9hZGluZ1Jlc3VsdCB9IGZyb20gJy4vbG9hZGluZy1yZXN1bHQnXG5pbXBvcnQgeyBjbGVhclNlbGVjdGlvbkluRGF0YVNvdXJjZXMsIHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoLCBmaW5kQ2xlYXJSZXN1bHRzQnV0dG9uLCBkaXNwYXRjaFNlbGVjdGlvbkV2ZW50IH0gZnJvbSAnLi9zZWxlY3Rpb24tdXRpbHMnXG5pbXBvcnQgeyBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyIH0gZnJvbSAnd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24nXG5cbmNvbnN0IGRlYnVnTG9nZ2VyID0gY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlcigpXG5cbi8vIEV2ZW50IGZpcmVkIHdoZW4gU3FsRXhwcmVzc2lvblJ1bnRpbWUgY29udmVydHMgaGFzaCB2YWx1ZSBmcm9tIHN0cmluZyB0byBhcnJheSBmb3JtYXRcbmNvbnN0IFFVRVJZU0lNUExFX0hBU0hfVkFMVUVfQ09OVkVSVEVEX0VWRU5UID0gJ3F1ZXJ5c2ltcGxlLWhhc2gtdmFsdWUtY29udmVydGVkJ1xuXG4vLyBFdmVudCBmaXJlZCB3aGVuIGEgaGFzaC10cmlnZ2VyZWQgcXVlcnkgZXhlY3V0aW9uIGNvbXBsZXRlcyBzdWNjZXNzZnVsbHlcbi8vIFRoaXMgYWxsb3dzIEhlbHBlclNpbXBsZSB0byB0cmFjayB3aGljaCBoYXNoIHBhcmFtZXRlcnMgaGF2ZSBiZWVuIGV4ZWN1dGVkXG5jb25zdCBRVUVSWVNJTVBMRV9IQVNIX1FVRVJZX0VYRUNVVEVEX0VWRU5UID0gJ3F1ZXJ5c2ltcGxlLWhhc2gtcXVlcnktZXhlY3V0ZWQnXG5cbmV4cG9ydCBpbnRlcmZhY2UgUXVlcnlUYXNrUHJvcHMge1xuICB3aWRnZXRJZDogc3RyaW5nXG4gIGluZGV4OiBudW1iZXJcbiAgdG90YWw6IG51bWJlclxuICBxdWVyeUl0ZW06IEltbXV0YWJsZU9iamVjdDxRdWVyeUl0ZW1UeXBlPlxuICB3cmFwcGVkSW5Qb3BwZXI/OiBib29sZWFuXG4gIGNsYXNzTmFtZT86IHN0cmluZ1xuICBpc0luUG9wcGVyPzogYm9vbGVhblxuICBvbk5hdkJhY2s/OiAoKSA9PiB2b2lkXG4gIGluaXRpYWxJbnB1dFZhbHVlPzogc3RyaW5nXG4gIG9uSGFzaFBhcmFtZXRlclVzZWQ/OiAoc2hvcnRJZDogc3RyaW5nKSA9PiB2b2lkXG4gIHF1ZXJ5SXRlbVNob3J0SWQ/OiBzdHJpbmdcbiAgLy8gUHJvcHMgZm9yIFNlYXJjaCBMYXllciBkcm9wZG93biAod2hlbiBtdWx0aXBsZSBxdWVyaWVzKVxuICBxdWVyeUl0ZW1zPzogSW1tdXRhYmxlQXJyYXk8UXVlcnlJdGVtVHlwZT5cbiAgc2VsZWN0ZWRRdWVyeUluZGV4PzogbnVtYmVyXG4gIG9uUXVlcnlDaGFuZ2U/OiAoaW5kZXg6IG51bWJlcikgPT4gdm9pZFxuICAvLyBHcm91cGluZyBwcm9wc1xuICBncm91cHM/OiB7IFtncm91cElkOiBzdHJpbmddOiB7IGl0ZW1zOiBJbW11dGFibGVBcnJheTxRdWVyeUl0ZW1UeXBlPiwgZGlzcGxheU5hbWU6IHN0cmluZywgaWNvbj86IGFueSB9IH1cbiAgdW5ncm91cGVkPzogQXJyYXk8eyBpdGVtOiBJbW11dGFibGVPYmplY3Q8UXVlcnlJdGVtVHlwZT4sIGluZGV4OiBudW1iZXIgfT5cbiAgZ3JvdXBPcmRlcj86IHN0cmluZ1tdXG4gIHNlbGVjdGVkR3JvdXBJZD86IHN0cmluZyB8IG51bGxcbiAgc2VsZWN0ZWRHcm91cFF1ZXJ5SW5kZXg/OiBudW1iZXJcbiAgb25Hcm91cENoYW5nZT86IChncm91cElkOiBzdHJpbmcgfCBudWxsKSA9PiB2b2lkXG4gIG9uR3JvdXBRdWVyeUNoYW5nZT86IChpbmRleDogbnVtYmVyKSA9PiB2b2lkXG4gIG9uVW5ncm91cGVkQ2hhbmdlPzogKGluZGV4OiBudW1iZXIpID0+IHZvaWRcbiAgLy8gUmVzdWx0cyBtb2RlIHByb3BzXG4gIHJlc3VsdHNNb2RlPzogU2VsZWN0aW9uVHlwZVxuICBvblJlc3VsdHNNb2RlQ2hhbmdlPzogKG1vZGU6IFNlbGVjdGlvblR5cGUpID0+IHZvaWRcbiAgYWNjdW11bGF0ZWRSZWNvcmRzPzogRmVhdHVyZURhdGFSZWNvcmRbXVxuICBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZT86IChyZWNvcmRzOiBGZWF0dXJlRGF0YVJlY29yZFtdKSA9PiB2b2lkXG4gIC8vIEdyYXBoaWNzIGxheWVyIHByb3BzXG4gIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQ/OiBib29sZWFuXG4gIGdyYXBoaWNzTGF5ZXI/OiBfX2VzcmkuR3JhcGhpY3NMYXllclxuICBtYXBWaWV3PzogX19lc3JpLk1hcFZpZXcgfCBfX2VzcmkuU2NlbmVWaWV3XG4gIG9uSW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXI/OiAob3V0cHV0RFM6IERhdGFTb3VyY2UpID0+IFByb21pc2U8dm9pZD5cbiAgb25DbGVhckdyYXBoaWNzTGF5ZXI/OiAoKSA9PiB2b2lkXG4gIGFjdGl2ZVRhYj86ICdxdWVyeScgfCAncmVzdWx0cydcbiAgb25UYWJDaGFuZ2U/OiAodGFiOiAncXVlcnknIHwgJ3Jlc3VsdHMnKSA9PiB2b2lkXG4gIGV2ZW50TWFuYWdlcj86IGltcG9ydCgnLi9ob29rcy91c2UtZXZlbnQtaGFuZGxpbmcnKS5FdmVudE1hbmFnZXIgIC8vIENodW5rIDcuMTogRXZlbnQgSGFuZGxpbmcgTWFuYWdlclxuICAvLyBGSVggKHIwMTguOTYpOiBSZW1vdmVkIG1hbnVhbGx5UmVtb3ZlZFJlY29yZElkcyBhbmQgb25NYW51YWxSZW1vdmFsIC0gbm8gbG9uZ2VyIG5lZWRlZFxufVxuXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gZ2V0IGRpc3BsYXkgbmFtZSBmb3IgcXVlcnkgaW4gZHJvcGRvd25cbi8vIFVzZXM6IHNlYXJjaEFsaWFzIHx8IGppbXVGaWVsZE5hbWUgfHwgaXRlbS5uYW1lIHx8IGZhbGxiYWNrXG5jb25zdCBnZXRRdWVyeURpc3BsYXlOYW1lID0gKGl0ZW06IEltbXV0YWJsZU9iamVjdDxRdWVyeUl0ZW1UeXBlPik6IHN0cmluZyA9PiB7XG4gIC8vIEZpcnN0IHByaW9yaXR5OiBzZWFyY2hBbGlhcyBpZiBzZXRcbiAgaWYgKGl0ZW0uc2VhcmNoQWxpYXMpIHtcbiAgICByZXR1cm4gaXRlbS5zZWFyY2hBbGlhc1xuICB9XG4gIFxuICAvLyBTZWNvbmQgcHJpb3JpdHk6IGZpZWxkIG5hbWUgZnJvbSBTUUwgZXhwcmVzc2lvblxuICBjb25zdCBqaW11RmllbGROYW1lID0gaXRlbS5zcWxFeHByT2JqPy5wYXJ0cz8uWzBdPy5qaW11RmllbGROYW1lXG4gIGlmIChqaW11RmllbGROYW1lKSB7XG4gICAgcmV0dXJuIGppbXVGaWVsZE5hbWVcbiAgfVxuICBcbiAgLy8gVGhpcmQgcHJpb3JpdHk6IGl0ZW0gbmFtZVxuICBpZiAoaXRlbS5uYW1lKSB7XG4gICAgcmV0dXJuIGl0ZW0ubmFtZVxuICB9XG4gIFxuICAvLyBGYWxsYmFja1xuICByZXR1cm4gJ1F1ZXJ5J1xufVxuXG5jb25zdCBzdHlsZSA9IGNzc2BcbiAgJi53cmFwcGVkIC5xdWVyeS1mb3JtIHtcbiAgICBoZWlnaHQ6IDEwMCU7XG4gIH1cbiAgLnF1ZXJ5LXRhc2tfX2NvbnRlbnQge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBwYWRkaW5nLXRvcDogOHB4O1xuICAgICY6aGFzKD4gLnF1ZXJ5LWZvcm1fX2hlYWRlciA+IGRpdjpub3QoLmQtbm9uZSkpLCAmOmhhcyg+IC5xdWVyeS1yZXN1bHQpIHtcbiAgICAgIHBhZGRpbmctdG9wOiAxNnB4O1xuICAgIH1cbiAgfVxuICAucXVlcnktZm9ybV9faGVhZGVyIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgICYuaGFzLWNvbnRlbnQge1xuICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLXN5cy1jb2xvci1kaXZpZGVyLXNlY29uZGFyeSk7XG4gICAgICBtYXJnaW4tYm90dG9tOiA2cHg7XG4gICAgICBwYWRkaW5nLWJvdHRvbTogOHB4O1xuICAgIH1cbiAgICAubmF2LWFjdGlvbiB7XG4gICAgICBmbGV4OiAxIDEgMDtcbiAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgLmppbXUtYnRuIHtcbiAgICAgICAgbWluLXdpZHRoOiAyNnB4O1xuICAgICAgfVxuICAgIH1cbiAgICAucmVzdWx0LW1lbnUge1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICB9XG4gIH1cbmBcblxuZXhwb3J0IGZ1bmN0aW9uIFF1ZXJ5VGFzayAocHJvcHM6IFF1ZXJ5VGFza1Byb3BzKSB7XG4gIGNvbnN0IHsgcXVlcnlJdGVtLCBvbk5hdkJhY2ssIHRvdGFsLCBpc0luUG9wcGVyID0gZmFsc2UsIHdyYXBwZWRJblBvcHBlciA9IGZhbHNlLCBjbGFzc05hbWUgPSAnJywgaW5kZXgsIGluaXRpYWxJbnB1dFZhbHVlLCBvbkhhc2hQYXJhbWV0ZXJVc2VkLCBxdWVyeUl0ZW1zLCBzZWxlY3RlZFF1ZXJ5SW5kZXgsIG9uUXVlcnlDaGFuZ2UsIGdyb3VwcywgdW5ncm91cGVkLCBncm91cE9yZGVyLCBzZWxlY3RlZEdyb3VwSWQsIHNlbGVjdGVkR3JvdXBRdWVyeUluZGV4LCBvbkdyb3VwQ2hhbmdlLCBvbkdyb3VwUXVlcnlDaGFuZ2UsIG9uVW5ncm91cGVkQ2hhbmdlLCByZXN1bHRzTW9kZSwgb25SZXN1bHRzTW9kZUNoYW5nZSwgYWNjdW11bGF0ZWRSZWNvcmRzLCBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZSwgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCwgZ3JhcGhpY3NMYXllciwgbWFwVmlldywgb25Jbml0aWFsaXplR3JhcGhpY3NMYXllciwgb25DbGVhckdyYXBoaWNzTGF5ZXIsIGFjdGl2ZVRhYjogcHJvcEFjdGl2ZVRhYiwgb25UYWJDaGFuZ2U6IHByb3BPblRhYkNoYW5nZSwgZXZlbnRNYW5hZ2VyLCAuLi5vdGhlclByb3BzIH0gPSBwcm9wc1xuICBjb25zdCBnZXRJMThuTWVzc2FnZSA9IGhvb2tzLnVzZVRyYW5zbGF0aW9uKGRlZmF1bHRNZXNzYWdlKVxuICBjb25zdCB6b29tVG9SZWNvcmRzID0gdXNlWm9vbVRvUmVjb3JkcyhtYXBWaWV3KVxuICBjb25zdCBbc3RhZ2UsIHNldFN0YWdlXSA9IFJlYWN0LnVzZVN0YXRlKDApIC8vIDAgPSBmb3JtLCAxID0gcmVzdWx0cywgMiA9IGxvYWRpbmdcbiAgY29uc3QgW2ludGVybmFsQWN0aXZlVGFiLCBzZXRJbnRlcm5hbEFjdGl2ZVRhYl0gPSBSZWFjdC51c2VTdGF0ZTwncXVlcnknIHwgJ3Jlc3VsdHMnPigncXVlcnknKVxuICBcbiAgLy8gTG9nIHdoZW4gaW5pdGlhbElucHV0VmFsdWUgcHJvcCBpcyByZWNlaXZlZFxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSC1FWEVDJywge1xuICAgICAgZXZlbnQ6ICdxdWVyeXRhc2staW5pdGlhbGlucHV0dmFsdWUtcHJvcC1yZWNlaXZlZCcsXG4gICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICBxdWVyeUl0ZW1Db25maWdJZDogcHJvcHMucXVlcnlJdGVtLmNvbmZpZ0lkLFxuICAgICAgcXVlcnlJdGVtU2hvcnRJZDogcHJvcHMucXVlcnlJdGVtU2hvcnRJZCxcbiAgICAgIGhhc0luaXRpYWxJbnB1dFZhbHVlOiAhIXByb3BzLmluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgaW5pdGlhbElucHV0VmFsdWU6IHByb3BzLmluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgbGFzdFRhYlN3aXRjaEhhc2g6IGxhc3RUYWJTd2l0Y2hIYXNoUmVmLmN1cnJlbnQsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIC8vIEZJWCAocjAxOC4xMjgpOiBPbmx5IHN3aXRjaCB0YWIgT05DRSBwZXIgdW5pcXVlIGhhc2ggdmFsdWVcbiAgICAvLyBUaGlzIHByZXZlbnRzIGNvbnRpbnVvdXMgcmUtc3dpdGNoaW5nIHRoYXQgYmxvY2tzIGF1dG8tc3dpdGNoIHRvIFJlc3VsdHMgdGFiXG4gICAgaWYgKHByb3BzLmluaXRpYWxJbnB1dFZhbHVlICYmIGxhc3RUYWJTd2l0Y2hIYXNoUmVmLmN1cnJlbnQgIT09IHByb3BzLmluaXRpYWxJbnB1dFZhbHVlKSB7XG4gICAgICBsYXN0VGFiU3dpdGNoSGFzaFJlZi5jdXJyZW50ID0gcHJvcHMuaW5pdGlhbElucHV0VmFsdWVcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNILUVYRUMnLCB7XG4gICAgICAgIGV2ZW50OiAncXVlcnl0YXNrLXN3aXRjaGluZy10by1xdWVyeS10YWItZm9yLWhhc2gnLFxuICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgIGluaXRpYWxJbnB1dFZhbHVlOiBwcm9wcy5pbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgICAgY3VycmVudEFjdGl2ZVRhYjogcHJvcEFjdGl2ZVRhYiB8fCBpbnRlcm5hbEFjdGl2ZVRhYixcbiAgICAgICAgbm90ZTogJ0ZpcnN0IHRpbWUgc2VlaW5nIHRoaXMgaGFzaCB2YWx1ZSAtIHN3aXRjaGluZyB0byBRdWVyeSB0YWInLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGlmIChwcm9wT25UYWJDaGFuZ2UpIHtcbiAgICAgICAgcHJvcE9uVGFiQ2hhbmdlKCdxdWVyeScpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZXRJbnRlcm5hbEFjdGl2ZVRhYigncXVlcnknKVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoIXByb3BzLmluaXRpYWxJbnB1dFZhbHVlICYmIGxhc3RUYWJTd2l0Y2hIYXNoUmVmLmN1cnJlbnQgIT09IG51bGwpIHtcbiAgICAgIC8vIFJlc2V0IHJlZiB3aGVuIGhhc2ggaXMgY2xlYXJlZCAoYWxsb3dzIHNhbWUgaGFzaCB0byB0cmlnZ2VyIGFnYWluIGxhdGVyKVxuICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNILUVYRUMnLCB7XG4gICAgICAgIGV2ZW50OiAncXVlcnl0YXNrLXJlc2V0dGluZy10YWItc3dpdGNoLXRyYWNraW5nJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICBwcmV2aW91c0hhc2g6IGxhc3RUYWJTd2l0Y2hIYXNoUmVmLmN1cnJlbnQsXG4gICAgICAgIG5vdGU6ICdIYXNoIGNsZWFyZWQgLSByZXNldHRpbmcgdHJhY2tpbmcgc28gc2FtZSBoYXNoIGNhbiB0cmlnZ2VyIGFnYWluJyxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgbGFzdFRhYlN3aXRjaEhhc2hSZWYuY3VycmVudCA9IG51bGxcbiAgICB9XG4gIH0sIFtwcm9wcy5pbml0aWFsSW5wdXRWYWx1ZSwgcHJvcHMud2lkZ2V0SWQsIHByb3BzLnF1ZXJ5SXRlbS5jb25maWdJZCwgcHJvcHMucXVlcnlJdGVtU2hvcnRJZCwgcHJvcE9uVGFiQ2hhbmdlLCBwcm9wQWN0aXZlVGFiLCBpbnRlcm5hbEFjdGl2ZVRhYl0pXG4gIFxuICAvLyBDb250cm9sbGVkIHRhYiBzdGF0ZTogdXNlIHByb3AgaWYgcHJvdmlkZWQsIG90aGVyd2lzZSBpbnRlcm5hbCBzdGF0ZVxuICBjb25zdCBhY3RpdmVUYWIgPSBwcm9wQWN0aXZlVGFiIHx8IGludGVybmFsQWN0aXZlVGFiXG4gIGNvbnN0IHNldEFjdGl2ZVRhYiA9IFJlYWN0LnVzZUNhbGxiYWNrKCh0YWI6ICdxdWVyeScgfCAncmVzdWx0cycpID0+IHtcbiAgICBpZiAocHJvcE9uVGFiQ2hhbmdlKSB7XG4gICAgICBwcm9wT25UYWJDaGFuZ2UodGFiKVxuICAgIH0gZWxzZSB7XG4gICAgICBzZXRJbnRlcm5hbEFjdGl2ZVRhYih0YWIpXG4gICAgfVxuICB9LCBbcHJvcE9uVGFiQ2hhbmdlXSlcbiAgY29uc3QgW2VuYWJsZWQsIHNldEVuYWJsZWRdID0gUmVhY3QudXNlU3RhdGUodHJ1ZSlcbiAgY29uc3QgW3Jlc3VsdENvdW50LCBzZXRSZXN1bHRDb3VudF0gPSBSZWFjdC51c2VTdGF0ZSgwKVxuICAvLyBGSVggKHIwMTguOTIpOiBUcmFjayB3aGVuIGEgcXVlcnkgc3dpdGNoIGlzIGluIHByb2dyZXNzIHRvIHByZXZlbnQgaGFuZGxlUmVuZGVyRG9uZSBpbnRlcmZlcmVuY2VcbiAgY29uc3QgaXNRdWVyeVN3aXRjaEluUHJvZ3Jlc3NSZWYgPSBSZWFjdC51c2VSZWYoZmFsc2UpXG4gIC8vIFRyYWNrIGlmIHdlJ3ZlIGFscmVhZHkgc2VsZWN0ZWQgcmVjb3JkcyBmb3IgdGhlIGN1cnJlbnQgcXVlcnkgcmVzdWx0c1xuICBjb25zdCBoYXNTZWxlY3RlZFJlY29yZHNSZWYgPSBSZWFjdC51c2VSZWYoZmFsc2UpXG4gIC8vIEZJWCAocjAxOC4xMjgpOiBUcmFjayB3aGljaCBoYXNoIHZhbHVlIHdlIGxhc3Qgc3dpdGNoZWQgdGFicyBmb3IgdG8gcHJldmVudCBjb250aW51b3VzIHJlLXN3aXRjaGluZ1xuICBjb25zdCBsYXN0VGFiU3dpdGNoSGFzaFJlZiA9IFJlYWN0LnVzZVJlZjxzdHJpbmcgfCBudWxsPihudWxsKVxuICAvLyBUcmFjayBxdWVyeSBleGVjdXRpb24gY291bnQgdG8gZm9yY2UgUXVlcnlUYXNrUmVzdWx0IHJlbW91bnQgb24gbmV3IHF1ZXJpZXNcbiAgY29uc3QgcXVlcnlFeGVjdXRpb25LZXlSZWYgPSBSZWFjdC51c2VSZWYoMClcbiAgY29uc3QgcXVlcnlQYXJhbVJlZiA9IFJlYWN0LnVzZVJlZjxRdWVyeVBhcmFtcz4obnVsbClcbiAgY29uc3QgcmVjb3Jkc1JlZiA9IFJlYWN0LnVzZVJlZjxEYXRhUmVjb3JkW10+KG51bGwpXG4gIGNvbnN0IFtvdXRwdXREUywgc2V0T3V0cHV0RFNdID0gUmVhY3QudXNlU3RhdGU8RGF0YVNvdXJjZT4obnVsbClcbiAgY29uc3QgW2RhdGFTb3VyY2UsIHNldERhdGFTb3VyY2VdID0gUmVhY3QudXNlU3RhdGU8RGF0YVNvdXJjZT4obnVsbClcbiAgY29uc3QgW3NwYXRpYWxGaWx0ZXJFbmFibGVkLCBzZXRTcGF0aWFsRmlsdGVyRW5hYmxlZF0gPSBSZWFjdC51c2VTdGF0ZSh0cnVlKVxuICBjb25zdCBhdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqID0gUmVhY3QudXNlUmVmPElNU3FsRXhwcmVzc2lvbj4ocXVlcnlJdGVtLnNxbEV4cHJPYmopXG4gIGNvbnN0IHNwYXRpYWxGaWx0ZXJPYmogPSBSZWFjdC51c2VSZWYobnVsbClcbiAgY29uc3QgYmFja0J0blJlZiA9IFJlYWN0LnVzZVJlZjxIVE1MQnV0dG9uRWxlbWVudD4odW5kZWZpbmVkKVxuICBjb25zdCBjbGVhclJlc3VsdEJ0blJlZiA9IFJlYWN0LnVzZVJlZjxIVE1MQnV0dG9uRWxlbWVudD4odW5kZWZpbmVkKVxuICBjb25zdCBbZGF0YUFjdGlvbkZpbHRlciwgc2V0RGF0YUFjdGlvbkZpbHRlcl0gPSBSZWFjdC51c2VTdGF0ZShudWxsKVxuICBjb25zdCBwcmV2aW91c0NvbmZpZ0lkUmVmID0gUmVhY3QudXNlUmVmPHN0cmluZz4ocXVlcnlJdGVtLmNvbmZpZ0lkKVxuICAvLyBUcmFjayBtYW51YWwgdGFiIHN3aXRjaGVzIHRvIHByZXZlbnQgYXV0by1zd2l0Y2ggdXNlRWZmZWN0IGZyb20gaW50ZXJmZXJpbmdcbiAgY29uc3QgbWFudWFsVGFiU3dpdGNoUmVmID0gUmVhY3QudXNlUmVmKGZhbHNlKVxuICAvLyBUcmFjayB3aGVuIGEgcXVlcnkgd2FzIGp1c3QgZXhlY3V0ZWQgLSBvbmx5IGF1dG8tc3dpdGNoIGFmdGVyIHF1ZXJ5IGV4ZWN1dGlvbiBjb21wbGV0ZXNcbiAgY29uc3QgcXVlcnlKdXN0RXhlY3V0ZWRSZWYgPSBSZWFjdC51c2VSZWYoZmFsc2UpXG4gIC8vIFN0b3JlIHRoZSBsYXN0IHJ1bnRpbWUgem9vbSBvdmVycmlkZSB2YWx1ZSBmcm9tIHRoZSBmb3JtIGZvciB1c2UgYnkgQWRkIHRvIE1hcCBhY3Rpb25cbiAgY29uc3QgbGFzdFJ1bnRpbWVab29tVG9TZWxlY3RlZFJlZiA9IFJlYWN0LnVzZVJlZjxib29sZWFuIHwgdW5kZWZpbmVkPih1bmRlZmluZWQpXG4gIC8vIEVycm9yIHN0YXRlcyBmb3IgdXNlci1mYWNpbmcgZXJyb3JzXG4gIGNvbnN0IFtzZWxlY3Rpb25FcnJvciwgc2V0U2VsZWN0aW9uRXJyb3JdID0gUmVhY3QudXNlU3RhdGU8c3RyaW5nPihudWxsKVxuICBjb25zdCBbem9vbUVycm9yLCBzZXRab29tRXJyb3JdID0gUmVhY3QudXNlU3RhdGU8c3RyaW5nPihudWxsKVxuICAvLyBTdG9yZSBwZW5kaW5nIHF1ZXJ5IHdoZW4gd2FpdGluZyBmb3IgaGFzaCB2YWx1ZSBjb252ZXJzaW9uXG4gIGNvbnN0IHBlbmRpbmdIYXNoUXVlcnlSZWYgPSBSZWFjdC51c2VSZWY8e1xuICAgIHNxbEV4cHI6IElNU3FsRXhwcmVzc2lvblxuICAgIHNwYXRpYWxGaWx0ZXI6IFNwYXRpYWxGaWx0ZXJPYmpcbiAgICBydW50aW1lWm9vbVRvU2VsZWN0ZWQ/OiBib29sZWFuXG4gIH0gfCBudWxsPihudWxsKVxuXG4gIGNvbnN0IGN1cnJlbnRJdGVtID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9RVUVSWV9JVEVNLCBxdWVyeUl0ZW0pXG4gIGNvbnN0IHsgaWNvbiwgbmFtZSwgZGlzcGxheUxhYmVsIH0gPSBjdXJyZW50SXRlbVxuICBjb25zdCBkc0V4aXN0czogYm9vbGVhbiA9IHVzZURhdGFTb3VyY2VFeGlzdHMoeyB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsIHVzZURhdGFTb3VyY2VJZDogY3VycmVudEl0ZW0udXNlRGF0YVNvdXJjZT8uZGF0YVNvdXJjZUlkIH0pXG5cbiAgLy8gRGVidWcgbG9nZ2luZyBmb3IgdGFiIGNvbnRlbnQgcmVuZGVyaW5nXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgZXZlbnQ6ICdxdWVyeS10YWItY29udGVudC1yZW5kZXInLFxuICAgICAgYWN0aXZlVGFiLFxuICAgICAgZW5hYmxlZCxcbiAgICAgIGRzRXhpc3RzLFxuICAgICAgZGF0YVNvdXJjZTogZGF0YVNvdXJjZSA/ICdleGlzdHMnIDogJ251bGwnLFxuICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZCxcbiAgICAgIG5vdGU6ICdRdWVyeSB0YWIgY29udGVudCBzdGF0ZSBjaGVjaydcbiAgICB9KVxuICB9LCBbYWN0aXZlVGFiLCBlbmFibGVkLCBkc0V4aXN0cywgZGF0YVNvdXJjZSwgcXVlcnlJdGVtLmNvbmZpZ0lkXSlcblxuICAvLyBEZWJ1ZyBsb2dnaW5nIGZvciBUYWIgY2hpbGRyZW4gcmVuZGVyaW5nXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGFjdGl2ZVRhYiA9PT0gJ3F1ZXJ5Jykge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgICBldmVudDogJ3F1ZXJ5LXRhYi1jaGlsZHJlbi1yZW5kZXInLFxuICAgICAgICBhY3RpdmVUYWIsXG4gICAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBxdWVyeUl0ZW0uY29uZmlnSWQsXG4gICAgICAgIG5vdGU6ICdRdWVyeSBUYWIgY2hpbGRyZW4gc2hvdWxkIGJlIHJlbmRlcmluZydcbiAgICAgIH0pXG4gICAgfVxuICB9LCBbYWN0aXZlVGFiLCBxdWVyeUl0ZW0uY29uZmlnSWRdKVxuXG4gIGhvb2tzLnVzZUVmZmVjdE9uY2UoKCkgPT4ge1xuICAgIC8vIGZvY3VzIHRoZSBiYWNrIGJ1dHRvbiB3aGVuIGl0IGlzIHJlbmRlcmVkXG4gICAgZm9jdXNFbGVtZW50SW5LZXlib2FyZE1vZGUoYmFja0J0blJlZi5jdXJyZW50KVxuICB9KVxuXG4gIC8vIEdldCB0aGUgcGFnaW5hdGlvbiBzdHlsZSBmcm9tIHdpZGdldCBjb25maWcgKE11bHRpUGFnZSBvciBMYXp5TG9hZC9TaW5nbGUtcGFnZSlcbiAgY29uc3QgcGFnaW5nVHlwZUluQ29uZmlnID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcbiAgICBjb25zdCB3aWRnZXRKc29uID0gc3RhdGUuYXBwQ29uZmlnLndpZGdldHNbcHJvcHMud2lkZ2V0SWRdXG4gICAgcmV0dXJuIHdpZGdldEpzb24uY29uZmlnLnJlc3VsdFBhZ2luZ1N0eWxlXG4gIH0pXG5cbiAgLy8gR2V0IHRoZSBpbml0aWFsIHBhZ2Ugc2l6ZSBmb3Igc2luZ2xlLXBhZ2UgKExhenlMb2FkKSByZXN1bHRzXG4gIC8vIFRoaXMgYWxsb3dzIHVzZXJzIHRvIGNvbmZpZ3VyZSBob3cgbWFueSByZWNvcmRzIGFyZSBsb2FkZWQgaW5pdGlhbGx5IHdoZW4gdXNpbmcgc2luZ2xlLXBhZ2UgbW9kZVxuICAvLyBEZWZhdWx0cyB0byAxMDAgaWYgbm90IGNvbmZpZ3VyZWRcbiAgY29uc3QgbGF6eUxvYWRJbml0aWFsUGFnZVNpemUgPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xuICAgIGNvbnN0IHdpZGdldEpzb24gPSBzdGF0ZS5hcHBDb25maWcud2lkZ2V0c1twcm9wcy53aWRnZXRJZF1cbiAgICByZXR1cm4gd2lkZ2V0SnNvbi5jb25maWcubGF6eUxvYWRJbml0aWFsUGFnZVNpemVcbiAgfSlcblxuXG4gIC8vIFdhdGNoIGZvciB3aGVuIHJlc3VsdHMgYXJlIHJlYWR5IGFuZCBzd2l0Y2ggdG8gUmVzdWx0cyB0YWJcbiAgLy8gT05MWSBhdXRvLXN3aXRjaCB3aGVuIGEgcXVlcnkgd2FzIGp1c3QgZXhlY3V0ZWQgYW5kIHJlc3VsdHMgYXJlIGxvYWRlZFxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIERvbid0IGF1dG8tc3dpdGNoIGlmIHVzZXIgbWFudWFsbHkgc3dpdGNoZWQgdGFic1xuICAgIGlmIChtYW51YWxUYWJTd2l0Y2hSZWYuY3VycmVudCkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgICBldmVudDogJ2F1dG8tc3dpdGNoLXNraXBwZWQnLFxuICAgICAgICByZWFzb246ICdtYW51YWwtdGFiLXN3aXRjaC1mbGFnLXNldCcsXG4gICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZCxcbiAgICAgICAgYWN0aXZlVGFiLFxuICAgICAgICByZXN1bHRDb3VudCxcbiAgICAgICAgcXVlcnlKdXN0RXhlY3V0ZWRSZWY6IHF1ZXJ5SnVzdEV4ZWN1dGVkUmVmLmN1cnJlbnQsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBcbiAgICAvLyBGT1JDRUQ6IEFsd2F5cyB1c2UgU2ltcGxlTGlzdCAtIHdlJ3JlIGRvbmUgd2l0aCBsYXp5IGxvYWRpbmcgaXNzdWVzXG4gICAgLy8gUmVjb3JkcyBhcmUgYXZhaWxhYmxlIGltbWVkaWF0ZWx5LCBzbyB3ZSBjYW4gc3dpdGNoIGFzIHNvb24gYXMgcmVzdWx0Q291bnQgPiAwXG4gICAgY29uc3QgaXNTaW1wbGVMaXN0ID0gdHJ1ZVxuICAgIFxuICAgIC8vIE9OTFkgYXV0by1zd2l0Y2ggd2hlbjpcbiAgICAvLyAxLiBBIHF1ZXJ5IHdhcyBqdXN0IGV4ZWN1dGVkIChxdWVyeUp1c3RFeGVjdXRlZFJlZi5jdXJyZW50ID09PSB0cnVlKVxuICAgIC8vIDIuIFdlIGhhdmUgcmVzdWx0cyAocmVzdWx0Q291bnQgPiAwKVxuICAgIC8vIDMuIFJlY29yZHMgYXJlIGFjdHVhbGx5IGxvYWRlZDpcbiAgICAvLyAgICAtIEZvciBTaW1wbGVMaXN0OiByZXN1bHRDb3VudCA+IDAgaXMgc3VmZmljaWVudCAocmVjb3JkcyBhdmFpbGFibGUgaW1tZWRpYXRlbHkpXG4gICAgLy8gICAgLSBGb3IgTGF6eUxvYWQ6IHJlY29yZHNSZWYuY3VycmVudCBtdXN0IGhhdmUgZGF0YSAod2FpdCBmb3IgbGF6eSBsb2FkaW5nKVxuICAgIC8vIDQuIFdlJ3JlIGN1cnJlbnRseSBvbiB0aGUgcXVlcnkgdGFiIChkb24ndCBzd2l0Y2ggaWYgYWxyZWFkeSBvbiByZXN1bHRzKVxuICAgIGNvbnN0IGhhc1JlY29yZHMgPSBpc1NpbXBsZUxpc3QgXG4gICAgICA/IHJlc3VsdENvdW50ID4gMCBcbiAgICAgIDogKHJlY29yZHNSZWYuY3VycmVudCAmJiByZWNvcmRzUmVmLmN1cnJlbnQubGVuZ3RoID4gMClcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICBldmVudDogJ2F1dG8tc3dpdGNoLWNoZWNrJyxcbiAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBxdWVyeUl0ZW0uY29uZmlnSWQsXG4gICAgICBhY3RpdmVUYWIsXG4gICAgICByZXN1bHRDb3VudCxcbiAgICAgIHF1ZXJ5SnVzdEV4ZWN1dGVkUmVmOiBxdWVyeUp1c3RFeGVjdXRlZFJlZi5jdXJyZW50LFxuICAgICAgaXNTaW1wbGVMaXN0LFxuICAgICAgcGFnaW5nVHlwZUluQ29uZmlnLFxuICAgICAgaGFzUmVjb3JkcyxcbiAgICAgIHJlY29yZHNSZWZMZW5ndGg6IHJlY29yZHNSZWYuY3VycmVudD8ubGVuZ3RoIHx8IDAsXG4gICAgICBtYW51YWxUYWJTd2l0Y2hSZWY6IG1hbnVhbFRhYlN3aXRjaFJlZi5jdXJyZW50LFxuICAgICAgd2lsbEF1dG9Td2l0Y2g6IHF1ZXJ5SnVzdEV4ZWN1dGVkUmVmLmN1cnJlbnQgJiYgcmVzdWx0Q291bnQgPiAwICYmIGhhc1JlY29yZHMgJiYgYWN0aXZlVGFiID09PSAncXVlcnknLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICBpZiAocXVlcnlKdXN0RXhlY3V0ZWRSZWYuY3VycmVudCAmJiBcbiAgICAgICAgcmVzdWx0Q291bnQgPiAwICYmIFxuICAgICAgICBoYXNSZWNvcmRzICYmIFxuICAgICAgICBhY3RpdmVUYWIgPT09ICdxdWVyeScpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgICAgZXZlbnQ6ICdhdXRvLXN3aXRjaC10cmlnZ2VyZWQnLFxuICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBxdWVyeUl0ZW0uY29uZmlnSWQsXG4gICAgICAgIGZyb21UYWI6IGFjdGl2ZVRhYixcbiAgICAgICAgdG9UYWI6ICdyZXN1bHRzJyxcbiAgICAgICAgcmVzdWx0Q291bnQsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIHNldEFjdGl2ZVRhYigncmVzdWx0cycpXG4gICAgICBxdWVyeUp1c3RFeGVjdXRlZFJlZi5jdXJyZW50ID0gZmFsc2UgLy8gUmVzZXQgYWZ0ZXIgc3dpdGNoaW5nXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICAgIGV2ZW50OiAnYXV0by1zd2l0Y2gtY29tcGxldGVkJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICBxdWVyeUl0ZW1Db25maWdJZDogcXVlcnlJdGVtLmNvbmZpZ0lkLFxuICAgICAgICBxdWVyeUp1c3RFeGVjdXRlZFJlZlJlc2V0OiBxdWVyeUp1c3RFeGVjdXRlZFJlZi5jdXJyZW50LFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgfVxuICB9LCBbcmVzdWx0Q291bnQsIGFjdGl2ZVRhYiwgcGFnaW5nVHlwZUluQ29uZmlnXSlcblxuICAvLyBWZXJpZnkgZHJvcGRvd25zIGFyZSBzeW5jaHJvbml6ZWQgd2l0aCBoYXNoIHBhcmFtZXRlciB3aGVuIHByZXNlbnRcbiAgLy8gVGhpcyBpcyBlc3BlY2lhbGx5IGltcG9ydGFudCBmb3IgZ3JvdXBlZCBxdWVyaWVzIHdoZXJlIGRyb3Bkb3ducyBuZWVkIHRvIGJlIHN5bmNocm9uaXplZFxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIE9ubHkgdmVyaWZ5IGlmIHdlIGhhdmUgYSBoYXNoIHBhcmFtZXRlclxuICAgIGlmICghaW5pdGlhbElucHV0VmFsdWUgfHwgIXF1ZXJ5SXRlbS5zaG9ydElkKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgLy8gVmVyaWZ5IHRoZSBjdXJyZW50IHF1ZXJ5SXRlbSBtYXRjaGVzIHdoYXQgd2UgZXhwZWN0IGZyb20gaGFzaCBwYXJhbWV0ZXJcbiAgICBjb25zdCBleHBlY3RlZFNob3J0SWQgPSBxdWVyeUl0ZW0uc2hvcnRJZFxuICAgIGNvbnN0IGlzR3JvdXBlZFF1ZXJ5ID0gcXVlcnlJdGVtLmdyb3VwSWQgIT09IG51bGwgJiYgcXVlcnlJdGVtLmdyb3VwSWQgIT09IHVuZGVmaW5lZFxuICAgIFxuICAgIC8vIENoZWNrIGlmIGRyb3Bkb3ducyBhcmUgY29ycmVjdGx5IHNldCBmb3IgZ3JvdXBlZCBxdWVyaWVzXG4gICAgaWYgKGlzR3JvdXBlZFF1ZXJ5KSB7XG4gICAgICBjb25zdCBleHBlY3RlZEdyb3VwSWQgPSBxdWVyeUl0ZW0uZ3JvdXBJZFxuICAgICAgY29uc3QgYWN0dWFsR3JvdXBJZCA9IHNlbGVjdGVkR3JvdXBJZFxuICAgICAgY29uc3QgZXhwZWN0ZWRRdWVyeUluZGV4ID0gc2VsZWN0ZWRHcm91cFF1ZXJ5SW5kZXhcbiAgICAgIFxuICAgICAgaWYgKGV4cGVjdGVkR3JvdXBJZCAhPT0gYWN0dWFsR3JvdXBJZCkge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgICAgIGV2ZW50OiAnZHJvcGRvd24tZ3JvdXAtbWlzbWF0Y2gnLFxuICAgICAgICAgIGV4cGVjdGVkR3JvdXBJZCxcbiAgICAgICAgICBhY3R1YWxHcm91cElkLFxuICAgICAgICAgIHF1ZXJ5SXRlbVNob3J0SWQ6IGV4cGVjdGVkU2hvcnRJZCxcbiAgICAgICAgICB3YXJuaW5nOiAnRmlyc3QgZHJvcGRvd24gbWF5IG5vdCBiZSBzeW5jaHJvbml6ZWQgd2l0aCBoYXNoIHBhcmFtZXRlcidcbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSBpZiAoZXhwZWN0ZWRRdWVyeUluZGV4ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgLy8gVmVyaWZ5IHRoZSBxdWVyeSBpbmRleCB3aXRoaW4gdGhlIGdyb3VwIG1hdGNoZXNcbiAgICAgICAgY29uc3QgZ3JvdXBJdGVtcyA9IGdyb3Vwcz8uW2V4cGVjdGVkR3JvdXBJZF0/Lml0ZW1zXG4gICAgICAgIGlmIChncm91cEl0ZW1zICYmIGdyb3VwSXRlbXMubGVuZ3RoID4gZXhwZWN0ZWRRdWVyeUluZGV4KSB7XG4gICAgICAgICAgY29uc3QgZXhwZWN0ZWRRdWVyeUNvbmZpZ0lkID0gZ3JvdXBJdGVtc1tleHBlY3RlZFF1ZXJ5SW5kZXhdPy5jb25maWdJZFxuICAgICAgICAgIGNvbnN0IGFjdHVhbFF1ZXJ5Q29uZmlnSWQgPSBxdWVyeUl0ZW0uY29uZmlnSWRcbiAgICAgICAgICBpZiAoZXhwZWN0ZWRRdWVyeUNvbmZpZ0lkICE9PSBhY3R1YWxRdWVyeUNvbmZpZ0lkKSB7XG4gICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgICAgICAgICBldmVudDogJ2Ryb3Bkb3duLXF1ZXJ5LWluZGV4LW1pc21hdGNoJyxcbiAgICAgICAgICAgICAgZXhwZWN0ZWRRdWVyeUNvbmZpZ0lkLFxuICAgICAgICAgICAgICBhY3R1YWxRdWVyeUNvbmZpZ0lkLFxuICAgICAgICAgICAgICBleHBlY3RlZFF1ZXJ5SW5kZXgsXG4gICAgICAgICAgICAgIHF1ZXJ5SXRlbVNob3J0SWQ6IGV4cGVjdGVkU2hvcnRJZCxcbiAgICAgICAgICAgICAgd2FybmluZzogJ1NlY29uZCBkcm9wZG93biBtYXkgbm90IGJlIHN5bmNocm9uaXplZCB3aXRoIGhhc2ggcGFyYW1ldGVyJ1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgICAgICAgZXZlbnQ6ICdkcm9wZG93bnMtc3luY2hyb25pemVkJyxcbiAgICAgICAgICAgICAgcXVlcnlJdGVtU2hvcnRJZDogZXhwZWN0ZWRTaG9ydElkLFxuICAgICAgICAgICAgICBncm91cElkOiBleHBlY3RlZEdyb3VwSWQsXG4gICAgICAgICAgICAgIHNlbGVjdGVkR3JvdXBRdWVyeUluZGV4OiBleHBlY3RlZFF1ZXJ5SW5kZXgsXG4gICAgICAgICAgICAgIG5vdGU6ICdEcm9wZG93bnMgc3luY2hyb25pemVkIHdpdGggaGFzaCBwYXJhbWV0ZXInXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBVbmdyb3VwZWQgcXVlcnkgLSB2ZXJpZnkgaXQncyBzZWxlY3RlZFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgZXZlbnQ6ICdkcm9wZG93bnMtc3luY2hyb25pemVkLXVuZ3JvdXBlZCcsXG4gICAgICAgIHF1ZXJ5SXRlbVNob3J0SWQ6IGV4cGVjdGVkU2hvcnRJZCxcbiAgICAgICAgbm90ZTogJ1VuZ3JvdXBlZCBxdWVyeSBkcm9wZG93biBzeW5jaHJvbml6ZWQgd2l0aCBoYXNoIHBhcmFtZXRlcidcbiAgICAgIH0pXG4gICAgfVxuICB9LCBbaW5pdGlhbElucHV0VmFsdWUsIHF1ZXJ5SXRlbS5zaG9ydElkLCBxdWVyeUl0ZW0uZ3JvdXBJZCwgcXVlcnlJdGVtLmNvbmZpZ0lkLCBzZWxlY3RlZEdyb3VwSWQsIHNlbGVjdGVkR3JvdXBRdWVyeUluZGV4LCBncm91cHNdKVxuXG4gIGNvbnN0IHVzZU91dHB1dERzOiBJbW11dGFibGVPYmplY3Q8VXNlRGF0YVNvdXJjZT4gPSBSZWFjdC51c2VNZW1vKFxuICAgICgpID0+XG4gICAgICBJbW11dGFibGUoe1xuICAgICAgICBkYXRhU291cmNlSWQ6IHF1ZXJ5SXRlbS5vdXRwdXREYXRhU291cmNlSWQsXG4gICAgICAgIG1haW5EYXRhU291cmNlSWQ6IHF1ZXJ5SXRlbS5vdXRwdXREYXRhU291cmNlSWRcbiAgICAgIH0pLFxuICAgIFtxdWVyeUl0ZW0ub3V0cHV0RGF0YVNvdXJjZUlkXVxuICApXG5cbiAgY29uc3QgdXBkYXRlRGF0YVNvdXJjZSA9IFJlYWN0LnVzZUNhbGxiYWNrKChkcz86IERhdGFTb3VyY2UpID0+IHtcbiAgICBjb25zdCBjdXJyZW50RHMgPSBkcyA/PyBkYXRhU291cmNlXG4gICAgLy8gc2hvdWxkIGRpc2FibGUgc3BhdGlhbCBmaWx0ZXIgaWYgdGhlIGRhdGFTb3VyY2UgaXMgYW4gb3V0cHV0IGRzIGFuZCBpdCBhbHJlYWR5IGhhcyBzcGF0aWFsIGZpbHRlclxuICAgIGlmIChjdXJyZW50RHM/LmdldERhdGFTb3VyY2VKc29uKCk/LmlzT3V0cHV0RnJvbVdpZGdldCkge1xuICAgICAgY29uc3QgcURzOiBRdWVyaWFibGVEYXRhU291cmNlID0gY3VycmVudERzIGFzIFF1ZXJpYWJsZURhdGFTb3VyY2VcbiAgICAgIGNvbnN0IHFQYXJhbXMgPSBxRHMuZ2V0Q3VycmVudFF1ZXJ5UGFyYW1zPy4oKSBhcyBGZWF0dXJlTGF5ZXJRdWVyeVBhcmFtc1xuICAgICAgaWYgKHFQYXJhbXMuZ2VvbWV0cnkgIT0gbnVsbCkge1xuICAgICAgICBzZXRTcGF0aWFsRmlsdGVyRW5hYmxlZChmYWxzZSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNldFNwYXRpYWxGaWx0ZXJFbmFibGVkKHRydWUpXG4gICAgICB9XG4gICAgfVxuICB9LCBbZGF0YVNvdXJjZV0pXG5cbiAgY29uc3QgaGFuZGxlU3RhdHVzQ2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soKGVuYWJsZWQ6IGJvb2xlYW4pID0+IHtcbiAgICBzZXRFbmFibGVkKGVuYWJsZWQpXG4gICAgdXBkYXRlRGF0YVNvdXJjZSgpXG4gIH0sIFt1cGRhdGVEYXRhU291cmNlXSlcblxuICBjb25zdCBoYW5kbGVPdXRwdXREYXRhU291cmNlSW5mb0NoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKChpbmZvLCBwcmVJbmZvKSA9PiB7XG4gICAgY29uc3Qgb3V0cHV0SWQgPSBxdWVyeUl0ZW0ub3V0cHV0RGF0YVNvdXJjZUlkXG4gICAgY29uc3QgZmlsdGVyID0gaW5mbz8ud2lkZ2V0UXVlcmllcyA/IGluZm8ud2lkZ2V0UXVlcmllc1tgc2V0RmlsdGVyLSR7b3V0cHV0SWR9YF0gOiBudWxsXG4gICAgaWYgKGZpbHRlciA9PSBudWxsKSB7IC8vIGZpbHRlciBpcyBudWxsIG1lYW5zIHRoZXJlIGFyZSBpbmNvbXBsZXRlIHF1ZXJpZXMsIGlnbm9yZSB0aGlzIGNoYW5nZVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnN0IHByZUZpbHRlciA9IHByZUluZm8/LndpZGdldFF1ZXJpZXMgPyBwcmVJbmZvLndpZGdldFF1ZXJpZXNbYHNldEZpbHRlci0ke291dHB1dElkfWBdIDogbnVsbFxuICAgIGlmIChmaWx0ZXI/LndoZXJlICE9PSBwcmVGaWx0ZXI/LndoZXJlKSB7XG4gICAgICBzZXREYXRhQWN0aW9uRmlsdGVyKGZpbHRlcilcbiAgICB9XG4gIH0sIFtxdWVyeUl0ZW0ub3V0cHV0RGF0YVNvdXJjZUlkXSlcblxuICBjb25zdCBwdWJsaXNoRGF0YUNsZWFyZWRNc2cgPSBSZWFjdC51c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgaWYgKCFvdXRwdXREUykgcmV0dXJuXG4gICAgY29uc3QgZGF0YVJlY29yZFNldENoYW5nZU1lc3NhZ2UgPSBuZXcgRGF0YVJlY29yZFNldENoYW5nZU1lc3NhZ2UocHJvcHMud2lkZ2V0SWQsIFJlY29yZFNldENoYW5nZVR5cGUuUmVtb3ZlLCBbb3V0cHV0RFMuaWRdKVxuICAgIE1lc3NhZ2VNYW5hZ2VyLmdldEluc3RhbmNlKCkucHVibGlzaE1lc3NhZ2UoZGF0YVJlY29yZFNldENoYW5nZU1lc3NhZ2UpXG4gICAgYXdhaXQgTWVzc2FnZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5wdWJsaXNoTWVzc2FnZShuZXcgRGF0YVJlY29yZHNTZWxlY3Rpb25DaGFuZ2VNZXNzYWdlKHByb3BzLndpZGdldElkLCBbXSwgW291dHB1dERTLmlkXSkpXG4gIH0sIFtwcm9wcy53aWRnZXRJZCwgb3V0cHV0RFNdKVxuXG4gIC8qKlxuICAgKiBDbGVhcnMgYWxsIHF1ZXJ5IHJlc3VsdHMgZnJvbSB0aGUgVUkgYW5kIG1hcC5cbiAgICogVGhpcyBpcyB0aGUgc2luZ2xlIHNvdXJjZSBvZiB0cnV0aCBmb3IgY2xlYXJpbmcgcmVzdWx0cy5cbiAgICogSXQgY2xlYXJzIHRoZSByZWNvcmRzLCByZXNldHMgdGhlIHJlc3VsdCBjb3VudCwgY2xlYXJzIHNlbGVjdGlvbiBmcm9tIHRoZSBtYXAsXG4gICAqIHB1Ymxpc2hlcyBhIGNsZWFyZWQgbWVzc2FnZSB0byB0aGUgbWFwLCBzd2l0Y2hlcyBiYWNrIHRvIHRoZSBRdWVyeSB0YWIsXG4gICAqIGFuZCBpbmNyZW1lbnRzIHRoZSBxdWVyeSBleGVjdXRpb24ga2V5IHRvIGZvcmNlIFF1ZXJ5VGFza1Jlc3VsdCB0byByZW1vdW50IHdpdGggZnJlc2ggc3RhdGUuXG4gICAqL1xuICBjb25zdCBjbGVhclJlc3VsdCA9IFJlYWN0LnVzZUNhbGxiYWNrKGFzeW5jIChyZWFzb246IHN0cmluZyA9ICd1bmtub3duJykgPT4ge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgIGV2ZW50OiAnY2xlYXJSZXN1bHQtY2FsbGVkJyxcbiAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgIGhhc091dHB1dERTOiAhIW91dHB1dERTLFxuICAgICAgcmVhc29uLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcblxuICAgIHJlY29yZHNSZWYuY3VycmVudCA9IG51bGxcbiAgICBvdXRwdXREUz8uc2V0U3RhdHVzKERhdGFTb3VyY2VTdGF0dXMuTm90UmVhZHkpXG4gICAgc2V0UmVzdWx0Q291bnQoMClcbiAgICBcbiAgICAvLyBOT1RFOiBHcmFwaGljcyBsYXllciBjbGVhcmluZyBpcyBub3cgaGFuZGxlZCBpbnNpZGUgY2xlYXJTZWxlY3Rpb25JbkRhdGFTb3VyY2VzXG4gICAgLy8gY2FsbGVkIGJlbG93LiBXZSBlbnN1cmUgdGhpcyBpcyBhd2FpdGVkIHRvIHByZXZlbnQgcmFjZSBjb25kaXRpb25zLlxuICAgIFxuICAgIC8vIENsZWFyIHNlbGVjdGlvbiBkaXJlY3RseSBmcm9tIGRhdGEgc291cmNlIHVzaW5nIHV0aWxpdHkgZnVuY3Rpb25cbiAgICB0cnkge1xuICAgICAgYXdhaXQgY2xlYXJTZWxlY3Rpb25JbkRhdGFTb3VyY2VzKHByb3BzLndpZGdldElkLCBvdXRwdXREUywgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCwgZ3JhcGhpY3NMYXllcilcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgICAgZXZlbnQ6ICdjbGVhclJlc3VsdC1zZWxlY3Rpb24tY2xlYXJlZCcsXG4gICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICAgIGV2ZW50OiAnY2xlYXJSZXN1bHQtc2VsZWN0aW9uLWNsZWFyLWZhaWxlZCcsXG4gICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgIH1cbiAgICBcbiAgICAvLyBDbGVhciB3aWRnZXQtbGV2ZWwgYWNjdW11bGF0ZWQgcmVjb3JkcyB3aGVuIGNsZWFyaW5nIHJlc3VsdHNcbiAgICBpZiAob25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UpIHtcbiAgICAgIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlKFtdKVxuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAnYWNjdW11bGF0ZWQtcmVjb3Jkcy1jbGVhcmVkLW9uLWNsZWFyLXJlc3VsdHMnLFxuICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWRcbiAgICAgIH0pXG4gICAgfVxuICAgIFxuICAgIGF3YWl0IHB1Ymxpc2hEYXRhQ2xlYXJlZE1zZygpXG4gICAgLy8gU3dpdGNoIGJhY2sgdG8gUXVlcnkgdGFiIHdoZW4gY2xlYXJpbmcgcmVzdWx0c1xuICAgIHNldEFjdGl2ZVRhYigncXVlcnknKVxuICAgIHNldFN0YWdlKDApXG4gICAgaGFzU2VsZWN0ZWRSZWNvcmRzUmVmLmN1cnJlbnQgPSBmYWxzZSAvLyBSZXNldCBzZWxlY3Rpb24gZmxhZyB3aGVuIGNsZWFyaW5nXG4gICAgLy8gSW5jcmVtZW50IHF1ZXJ5IGV4ZWN1dGlvbiBrZXkgdG8gZm9yY2UgUXVlcnlUYXNrUmVzdWx0IHJlbW91bnQgd2l0aCBmcmVzaCBzdGF0ZVxuICAgIHF1ZXJ5RXhlY3V0aW9uS2V5UmVmLmN1cnJlbnQgKz0gMVxuICAgIC8vIENsZWFyIGVycm9yIHN0YXRlcyB3aGVuIGNsZWFyaW5nIHJlc3VsdHNcbiAgICBzZXRTZWxlY3Rpb25FcnJvcihudWxsKVxuICAgIHNldFpvb21FcnJvcihudWxsKVxuXG4gICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgZXZlbnQ6ICdjbGVhclJlc3VsdC1jb21wbGV0ZScsXG4gICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICB9LCBbb3V0cHV0RFMsIHB1Ymxpc2hEYXRhQ2xlYXJlZE1zZywgcHJvcHMud2lkZ2V0SWQsIHF1ZXJ5SXRlbS5jb25maWdJZCwgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UsIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQsIGdyYXBoaWNzTGF5ZXJdKVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIGRhdGEgc291cmNlIGNyZWF0aW9uIHdoZW4gc3dpdGNoaW5nIGJldHdlZW4gcXVlcnkgaXRlbXMuXG4gICAqIFdoZW4gYSBuZXcgcXVlcnkgaXRlbSBpcyBzZWxlY3RlZCAoZS5nLiwgc3dpdGNoaW5nIGZyb20gUGFyY2VsIHRvIE1ham9yKSxcbiAgICogdGhpcyBjbGVhcnMgb2xkIHJlc3VsdHMgdG8gZW5zdXJlIGFsbCBjbGVhbnVwIGxvZ2ljIHJ1bnMgcHJvcGVybHkuXG4gICAqIFxuICAgKiBAcGFyYW0gZHMgLSBUaGUgbmV3bHkgY3JlYXRlZCBkYXRhIHNvdXJjZSBmb3IgdGhlIHNlbGVjdGVkIHF1ZXJ5IGl0ZW1cbiAgICovXG4gIGNvbnN0IGhhbmRsZURhdGFTb3VyY2VDcmVhdGVkID0gUmVhY3QudXNlQ2FsbGJhY2soYXN5bmMgKGRzOiBEYXRhU291cmNlKSA9PiB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgZXZlbnQ6ICdoYW5kbGVEYXRhU291cmNlQ3JlYXRlZC1zdGFydCcsXG4gICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICByZXN1bHRzTW9kZSxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG5cbiAgICAvLyBJbiBcIkFkZCB0b1wiIGFuZCBcIlJlbW92ZSBmcm9tXCIgbW9kZXMsIHByZXNlcnZlIGFjY3VtdWxhdGVkIHJlY29yZHMgYW5kIHNlbGVjdGlvbiAtIGRvbid0IGNsZWFyXG4gICAgaWYgKChyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbiB8fCByZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uKSBcbiAgICAgICAgJiYgYWNjdW11bGF0ZWRSZWNvcmRzICYmIGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdwcmVzZXJ2aW5nLXNlbGVjdGlvbi1vbi1xdWVyeS1zd2l0Y2gtaGFuZGxlRGF0YVNvdXJjZUNyZWF0ZWQnLFxuICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aFxuICAgICAgfSlcbiAgICAgIFxuICAgICAgc2V0RGF0YVNvdXJjZShkcylcbiAgICAgIHVwZGF0ZURhdGFTb3VyY2UoZHMpXG4gICAgICBzZXRTdGFnZSgwKVxuICAgICAgc2V0QWN0aXZlVGFiKCdxdWVyeScpXG4gICAgICByZXR1cm4gLy8gU2tpcCBjbGVhcmluZyAtIHByZXNlcnZlIHNlbGVjdGlvblxuICAgIH1cbiAgICBcbiAgICAvLyBGb3IgXCJOZXdcIiBtb2RlLCBjbGVhciBvbGQgcmVzdWx0c1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgIGV2ZW50OiAnaGFuZGxlRGF0YVNvdXJjZUNyZWF0ZWQtY2xlYXJpbmctcmVzdWx0cy1mb3ItbmV3LW1vZGUnLFxuICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBhd2FpdCBjbGVhclJlc3VsdCgnaGFuZGxlRGF0YVNvdXJjZUNyZWF0ZWQtbmV3LW1vZGUnKVxuXG4gICAgc2V0RGF0YVNvdXJjZShkcylcbiAgICB1cGRhdGVEYXRhU291cmNlKGRzKVxuICAgIHNldFN0YWdlKDApXG4gICAgc2V0QWN0aXZlVGFiKCdxdWVyeScpIC8vIFJldHVybiB0byBRdWVyeSB0YWIgd2hlbiBzd2l0Y2hpbmcgcXVlcmllc1xuICB9LCBbdXBkYXRlRGF0YVNvdXJjZSwgY2xlYXJSZXN1bHQsIHJlc3VsdENvdW50LCByZXN1bHRzTW9kZSwgYWNjdW11bGF0ZWRSZWNvcmRzLCBwcm9wcy53aWRnZXRJZF0pXG5cbiAgY29uc3QgaGFuZGxlT3V0cHV0RGF0YVNvdXJjZUNyZWF0ZWQgPSBSZWFjdC51c2VDYWxsYmFjayhhc3luYyAoZHM6IERhdGFTb3VyY2UpID0+IHtcbiAgICBzZXRPdXRwdXREUyhkcylcbiAgICBcbiAgICAvLyBEZXRlY3QgcXVlcnkgc3dpdGNoIGZvciBsb2dnaW5nXG4gICAgY29uc3QgaXNTd2l0Y2hpbmdRdWVyaWVzID0gcHJldmlvdXNDb25maWdJZFJlZi5jdXJyZW50ICE9PSBxdWVyeUl0ZW0uY29uZmlnSWRcbiAgICBjb25zdCBvbGRDb25maWdJZCA9IHByZXZpb3VzQ29uZmlnSWRSZWYuY3VycmVudFxuICAgIFxuICAgIC8vIEZJWCAocjAxOC45Myk6IFNldCBxdWVyeSBzd2l0Y2ggZmxhZyBJTU1FRElBVEVMWSB3aGVuIHF1ZXJ5IHN3aXRjaCBpcyBkZXRlY3RlZFxuICAgIC8vIFRoaXMgcHJldmVudHMgaGFuZGxlUmVuZGVyRG9uZSBmcm9tIHJ1bm5pbmcgYmVmb3JlIHRoZSBxdWVyeSBzd2l0Y2ggcmUtc2VsZWN0aW9uIGxvZ2ljXG4gICAgLy8gVGhlIGZsYWcgbXVzdCBiZSBzZXQgQkVGT1JFIGFueSByZW5kZXJpbmcgaGFwcGVucyB0aGF0IGNvdWxkIHRyaWdnZXIgaGFuZGxlUmVuZGVyRG9uZVxuICAgIGlmIChpc1N3aXRjaGluZ1F1ZXJpZXMgJiYgKHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uIHx8IHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb24pKSB7XG4gICAgICBpZiAoYWNjdW11bGF0ZWRSZWNvcmRzICYmIGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGlzUXVlcnlTd2l0Y2hJblByb2dyZXNzUmVmLmN1cnJlbnQgPSB0cnVlXG4gICAgICAgIFxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICBldmVudDogJ3F1ZXJ5LXN3aXRjaC1kZXRlY3RlZC1zZXR0aW5nLWZsYWctZWFybHknLFxuICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICBvbGRDb25maWdJZCxcbiAgICAgICAgICBuZXdDb25maWdJZDogcXVlcnlJdGVtLmNvbmZpZ0lkLFxuICAgICAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoLFxuICAgICAgICAgIGZsYWdTZXQ6IHRydWUsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIFZFUklGSUNBVElPTiBMT0dHSU5HOiBUcmFjayBncmFwaGljcyBsYXllciBzdGF0ZSB3aGVuIHN3aXRjaGluZyBxdWVyaWVzXG4gICAgaWYgKGlzU3dpdGNoaW5nUXVlcmllcyAmJiAocmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb24gfHwgcmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvbikpIHtcbiAgICAgIGNvbnN0IGdyYXBoaWNzQ291bnRCZWZvcmUgPSBncmFwaGljc0xheWVyPy5ncmFwaGljcz8ubGVuZ3RoIHx8IDBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ2hhbmRsZU91dHB1dERhdGFTb3VyY2VDcmVhdGVkLXF1ZXJ5LXN3aXRjaC1kZXRlY3RlZCcsXG4gICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgb2xkQ29uZmlnSWQsXG4gICAgICAgIG5ld0NvbmZpZ0lkOiBxdWVyeUl0ZW0uY29uZmlnSWQsXG4gICAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgICBoYXNHcmFwaGljc0xheWVyOiAhIWdyYXBoaWNzTGF5ZXIsXG4gICAgICAgIGdyYXBoaWNzQ291bnRCZWZvcmUsXG4gICAgICAgIGhhc0FjY3VtdWxhdGVkUmVjb3JkczogISEoYWNjdW11bGF0ZWRSZWNvcmRzICYmIGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwKSxcbiAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGFjY3VtdWxhdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQsXG4gICAgICAgIGhhc09uQ2xlYXJHcmFwaGljc0xheWVyOiAhIW9uQ2xlYXJHcmFwaGljc0xheWVyLFxuICAgICAgICBpc1F1ZXJ5U3dpdGNoRmxhZ1NldDogaXNRdWVyeVN3aXRjaEluUHJvZ3Jlc3NSZWYuY3VycmVudCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgIH1cbiAgICBcbiAgICAvLyBDSEVDSyByb290RGF0YVNvdXJjZS5tYXAgdG8gc2VlIGhvdyBmcmFtZXdvcmsgYWNjZXNzZXMgbWFwIHZpZXdcbiAgICB0cnkge1xuICAgICAgY29uc3Qgb3JpZ2luRGF0YVNvdXJjZXMgPSBkcy5nZXRPcmlnaW5EYXRhU291cmNlcygpXG4gICAgICBjb25zdCBvcmlnaW5EUyA9IG9yaWdpbkRhdGFTb3VyY2VzPy5bMF1cbiAgICAgIGlmIChvcmlnaW5EUykge1xuICAgICAgICBjb25zdCByb290RFMgPSBvcmlnaW5EUy5nZXRSb290RGF0YVNvdXJjZSgpXG4gICAgICAgIGlmIChyb290RFMpIHtcbiAgICAgICAgICAvLyBFeHBvc2Ugcm9vdERTIHRvIHdpbmRvdyBmb3IgY29uc29sZSBpbnNwZWN0aW9uXG4gICAgICAgICAgOyh3aW5kb3cgYXMgYW55KS5fX3F1ZXJ5U2ltcGxlUm9vdERTID0gcm9vdERTXG4gICAgICAgICAgOyh3aW5kb3cgYXMgYW55KS5fX3F1ZXJ5U2ltcGxlUm9vdERTTWFwID0gKHJvb3REUyBhcyBhbnkpLm1hcFxuICAgICAgICAgIDsod2luZG93IGFzIGFueSkuX19xdWVyeVNpbXBsZU9yaWdpbkRTID0gb3JpZ2luRFNcbiAgICAgICAgICBcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgICAgICAgZXZlbnQ6ICdjaGVjay1yb290LWRhdGFzb3VyY2UtbWFwJyxcbiAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgIG91dHB1dERTSWQ6IGRzLmlkLFxuICAgICAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgICAgICByb290RFNJZDogcm9vdERTLmlkLFxuICAgICAgICAgICAgcm9vdERTVHlwZTogcm9vdERTLnR5cGUsXG4gICAgICAgICAgICBoYXNSb290RFNNYXA6ICEhKHJvb3REUyBhcyBhbnkpLm1hcCxcbiAgICAgICAgICAgIHJvb3REU01hcFR5cGU6IChyb290RFMgYXMgYW55KS5tYXAgPyB0eXBlb2YgKHJvb3REUyBhcyBhbnkpLm1hcCA6ICdub25lJyxcbiAgICAgICAgICAgIHJvb3REU01hcElkOiAocm9vdERTIGFzIGFueSkubWFwPy5pZCB8fCAnbm9uZScsXG4gICAgICAgICAgICBoYXNSb290RFNNYXBWaWV3OiAhIShyb290RFMgYXMgYW55KS5tYXA/LnZpZXcsXG4gICAgICAgICAgICBoYXNSb290RFNNYXBWaWV3czogISEocm9vdERTIGFzIGFueSkubWFwPy52aWV3cyxcbiAgICAgICAgICAgIHJvb3REU01hcFZpZXdzTGVuZ3RoOiAocm9vdERTIGFzIGFueSkubWFwPy52aWV3cz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgICAgICAvLyBMb2cgc29tZSBtYXAgcHJvcGVydGllcyBpZiBpdCBleGlzdHNcbiAgICAgICAgICAgIHJvb3REU01hcEtleXM6IChyb290RFMgYXMgYW55KS5tYXAgPyBPYmplY3Qua2V5cygocm9vdERTIGFzIGFueSkubWFwKS5maWx0ZXIoa2V5ID0+IFxuICAgICAgICAgICAgICAha2V5LnN0YXJ0c1dpdGgoJ18nKSAmJiBcbiAgICAgICAgICAgICAgdHlwZW9mIChyb290RFMgYXMgYW55KS5tYXBba2V5XSAhPT0gJ2Z1bmN0aW9uJ1xuICAgICAgICAgICAgKS5zbGljZSgwLCAyMCkgOiBbXSxcbiAgICAgICAgICAgIC8vIExvZyB0aGF0IG9iamVjdHMgYXJlIGF2YWlsYWJsZSBvbiB3aW5kb3cgZm9yIGNvbnNvbGUgaW5zcGVjdGlvblxuICAgICAgICAgICAgY29uc29sZUluc3BlY3Rpb246ICdDaGVjayB3aW5kb3cuX19xdWVyeVNpbXBsZVJvb3REUywgd2luZG93Ll9fcXVlcnlTaW1wbGVSb290RFNNYXAsIHdpbmRvdy5fX3F1ZXJ5U2ltcGxlT3JpZ2luRFMnLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgfSlcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBJZiBtYXAgZXhpc3RzLCBjaGVjayBpdHMgdmlld1xuICAgICAgICAgIGNvbnN0IHJvb3RNYXAgPSAocm9vdERTIGFzIGFueSkubWFwXG4gICAgICAgICAgaWYgKHJvb3RNYXApIHtcbiAgICAgICAgICAgIGNvbnN0IHZpZXcgPSByb290TWFwLnZpZXcgfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgKHJvb3RNYXAudmlld3M/LmdldEl0ZW1BdD8uKDApKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgIChyb290TWFwLnZpZXdzPy5sZW5ndGggPiAwID8gcm9vdE1hcC52aWV3c1swXSA6IG51bGwpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICAgICAgICAgIGV2ZW50OiAnY2hlY2stcm9vdC1kYXRhc291cmNlLW1hcC12aWV3JyxcbiAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICBoYXNWaWV3OiAhIXZpZXcsXG4gICAgICAgICAgICAgIHZpZXdUeXBlOiB2aWV3Py50eXBlIHx8ICdub25lJyxcbiAgICAgICAgICAgICAgdmlld0lkOiB2aWV3Py5pZCB8fCAnbm9uZScsXG4gICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgICAgZXZlbnQ6ICdjaGVjay1yb290LWRhdGFzb3VyY2UtbWFwLWVycm9yJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpLFxuICAgICAgICBlcnJvclN0YWNrOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWQsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICB9XG4gICAgXG4gICAgLy8gSW5pdGlhbGl6ZSBncmFwaGljcyBsYXllciBsYXppbHkgaWYgZW5hYmxlZCBhbmQgbm90IGFscmVhZHkgaW5pdGlhbGl6ZWRcbiAgICBpZiAodXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCAmJiBvbkluaXRpYWxpemVHcmFwaGljc0xheWVyKSB7XG4gICAgICBhd2FpdCBvbkluaXRpYWxpemVHcmFwaGljc0xheWVyKGRzKVxuICAgICAgLy8gQWZ0ZXIgaW5pdGlhbGl6YXRpb24sIGdyYXBoaWNzTGF5ZXIgYW5kIG1hcFZpZXcgcHJvcHMgc2hvdWxkIGJlIHVwZGF0ZWRcbiAgICAgIC8vIEJ1dCBzaW5jZSBwcm9wcyBjb21lIGZyb20gcmVmcywgd2UgbmVlZCB0byB3YWl0IGZvciB3aWRnZXQgcmUtcmVuZGVyXG4gICAgICAvLyBGb3Igbm93LCB1c2UgdGhlIHByb3BzIHRoYXQgd2lsbCBiZSB1cGRhdGVkIG9uIG5leHQgcmVuZGVyXG4gICAgfVxuICAgIFxuICAgIC8vIElmIGluIFwiQWRkIHRvXCIgb3IgXCJSZW1vdmUgZnJvbVwiIG1vZGUgYW5kIHdlIGhhdmUgYWNjdW11bGF0ZWQgcmVjb3JkcywgcmUtc2VsZWN0IHRoZW1cbiAgICAvLyBUaGlzIHVzZXMgdGhlIHNhbWUgbG9naWMgYXMgYWZ0ZXIgcXVlcnkgY29tcGxldGlvbiAtIHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoXG4gICAgLy8gVGhpcyBlbnN1cmVzIHJlY29yZHMgYXJlIHNlbGVjdGVkIGJvdGggb24gdGhlIG1hcCBhbmQgaW4gdGhlIFJlc3VsdHMgdGFiXG4gICAgaWYgKChyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbiB8fCByZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uKSBcbiAgICAgICAgJiYgYWNjdW11bGF0ZWRSZWNvcmRzICYmIGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICBcbiAgICAgIC8vIEZJWCAocjAxOC45Myk6IEZsYWcgaXMgbm93IHNldCBlYXJsaWVyIChhdCBxdWVyeSBzd2l0Y2ggZGV0ZWN0aW9uKSB0byBwcmV2ZW50IHRpbWluZyBpc3N1ZXNcbiAgICAgIC8vIFZlcmlmeSB0aGF0IHRoZSBmbGFnIGlzIGFscmVhZHkgc2V0XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdxdWVyeS1zd2l0Y2gtcmVzZWxlY3Rpb24tc3RhcnRpbmcnLFxuICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgaXNRdWVyeVN3aXRjaEZsYWdTZXQ6IGlzUXVlcnlTd2l0Y2hJblByb2dyZXNzUmVmLmN1cnJlbnQsXG4gICAgICAgIG5vdGU6ICdGbGFnIHNob3VsZCBhbHJlYWR5IGJlIHNldCBmcm9tIHF1ZXJ5IHN3aXRjaCBkZXRlY3Rpb24nLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIC8vIFZFUklGSUNBVElPTiBMT0dHSU5HOiBHcmFwaGljcyBjb3VudCBiZWZvcmUgY2xlYXJpbmdcbiAgICAgIGNvbnN0IGdyYXBoaWNzQ291bnRCZWZvcmVDbGVhciA9IGdyYXBoaWNzTGF5ZXI/LmdyYXBoaWNzPy5sZW5ndGggfHwgMFxuICAgICAgXG4gICAgICAvLyBGSVggKHIwMTguNjcpOiBDbGVhciBncmFwaGljcyBsYXllciB3aGVuIHN3aXRjaGluZyBxdWVyaWVzIHRvIHByZXZlbnQgc3RhbGUgZ3JhcGhpY3NcbiAgICAgIC8vIGZyb20gcHJldmlvdXMgcXVlcmllcyBmcm9tIHBlcnNpc3RpbmcgaW4gdGhlIHNoYXJlZCBncmFwaGljcyBsYXllclxuICAgICAgaWYgKHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQgJiYgZ3JhcGhpY3NMYXllciAmJiBvbkNsZWFyR3JhcGhpY3NMYXllcikge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICBldmVudDogJ2NsZWFyaW5nLWdyYXBoaWNzLWxheWVyLWJlZm9yZS1yZXNlbGVjdGlvbi1vbi1xdWVyeS1zd2l0Y2gnLFxuICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICByZXN1bHRzTW9kZSxcbiAgICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgICBncmFwaGljc0NvdW50QmVmb3JlQ2xlYXIsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH0pXG4gICAgICAgIG9uQ2xlYXJHcmFwaGljc0xheWVyKClcbiAgICAgICAgXG4gICAgICAgIC8vIFZFUklGSUNBVElPTiBMT0dHSU5HOiBHcmFwaGljcyBjb3VudCBhZnRlciBjbGVhcmluZ1xuICAgICAgICBjb25zdCBncmFwaGljc0NvdW50QWZ0ZXJDbGVhciA9IGdyYXBoaWNzTGF5ZXI/LmdyYXBoaWNzPy5sZW5ndGggfHwgMFxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICBldmVudDogJ2dyYXBoaWNzLWxheWVyLWNsZWFyZWQtb24tcXVlcnktc3dpdGNoJyxcbiAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgZ3JhcGhpY3NDb3VudEJlZm9yZUNsZWFyLFxuICAgICAgICAgIGdyYXBoaWNzQ291bnRBZnRlckNsZWFyLFxuICAgICAgICAgIGNsZWFyZWQ6IGdyYXBoaWNzQ291bnRBZnRlckNsZWFyID09PSAwLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgZXZlbnQ6ICdza2lwcGluZy1ncmFwaGljcy1sYXllci1jbGVhci1vbi1xdWVyeS1zd2l0Y2gnLFxuICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICByZWFzb246ICF1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0ID8gJ3VzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQtZmFsc2UnIDogXG4gICAgICAgICAgICAgICAgICAhZ3JhcGhpY3NMYXllciA/ICduby1ncmFwaGljc0xheWVyJyA6IFxuICAgICAgICAgICAgICAgICAgIW9uQ2xlYXJHcmFwaGljc0xheWVyID8gJ25vLW9uQ2xlYXJHcmFwaGljc0xheWVyJyA6ICd1bmtub3duJyxcbiAgICAgICAgICBncmFwaGljc0NvdW50QmVmb3JlQ2xlYXIsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFVzZSBhIGRlbGF5IHRvIGVuc3VyZSB0aGUgRFMgaXMgZnVsbHkgcmVhZHkgYW5kIGdyYXBoaWNzIGxheWVyIHByb3BzIGFyZSB1cGRhdGVkIGFmdGVyIHdpZGdldCByZS1yZW5kZXJcbiAgICAgIC8vIElmIGdyYXBoaWNzIGxheWVyIHdhcyBqdXN0IGluaXRpYWxpemVkLCB3YWl0IGEgYml0IGxvbmdlciBmb3IgcHJvcHMgdG8gdXBkYXRlXG4gICAgICBjb25zdCBkZWxheSA9ICh1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0ICYmIG9uSW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXIpID8gMjAwIDogMTAwXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgY29uc3QgZmVhdHVyZURTID0gZHMgYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICAgICAgICBpZiAoZmVhdHVyZURTICYmIGFjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIC8vIEZJWCAocjAxOC45Nik6IE5vIGZpbHRlcmluZyBuZWVkZWQgLSBhY2N1bXVsYXRlZFJlY29yZHMgaXMgYWxyZWFkeSB0aGUgc291cmNlIG9mIHRydXRoXG4gICAgICAgICAgLy8gRHVwbGljYXRlIGRldGVjdGlvbiBpbiBtZXJnZVJlc3VsdHNJbnRvQWNjdW11bGF0ZWQgcHJldmVudHMgZHVwbGljYXRlc1xuICAgICAgICAgIGNvbnN0IHJlY29yZHNUb1Jlc2VsZWN0ID0gYWNjdW11bGF0ZWRSZWNvcmRzXG4gICAgICAgICAgXG4gICAgICAgICAgLy8gVkVSSUZJQ0FUSU9OIExPR0dJTkc6IFNob3cgcmVjb3JkcyBiZWluZyByZXNlbGVjdGVkXG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICBldmVudDogJ3F1ZXJ5LXN3aXRjaC1yZXNlbGVjdGluZy1hY2N1bXVsYXRlZC1yZWNvcmRzJyxcbiAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoLFxuICAgICAgICAgICAgcmVjb3Jkc1RvUmVzZWxlY3RDb3VudDogcmVjb3Jkc1RvUmVzZWxlY3QubGVuZ3RoLFxuICAgICAgICAgICAgcmVjb3Jkc1RvUmVzZWxlY3RJZHM6IHJlY29yZHNUb1Jlc2VsZWN0Lm1hcChyID0+IHIuZ2V0SWQoKSkuc2xpY2UoMCwgMTApLFxuICAgICAgICAgICAgbm90ZTogJ3IwMTguOTY6IFVzaW5nIGFjY3VtdWxhdGVkUmVjb3JkcyBkaXJlY3RseSAtIG5vIG1hbnVhbCByZW1vdmFsIHRyYWNraW5nJyxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgIH0pXG4gICAgICAgICAgXG4gICAgICAgICAgLy8gVXBkYXRlIGFjY3VtdWxhdGVkUmVjb3JkcyBpZiBmaWx0ZXJpbmcgcmVtb3ZlZCBhbnkgcmVjb3Jkc1xuICAgICAgICAgIGlmIChyZWNvcmRzVG9SZXNlbGVjdC5sZW5ndGggIT09IGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggJiYgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UpIHtcbiAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICBldmVudDogJ3N5bmNpbmctYWNjdW11bGF0ZWQtcmVjb3Jkcy1hZnRlci1maWx0ZXJpbmctbWFudWFsbHktcmVtb3ZlZCcsXG4gICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnRCZWZvcmU6IGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50QWZ0ZXI6IHJlY29yZHNUb1Jlc2VsZWN0Lmxlbmd0aCxcbiAgICAgICAgICAgICAgcmVjb3Jkc1JlbW92ZWQ6IGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggLSByZWNvcmRzVG9SZXNlbGVjdC5sZW5ndGgsXG4gICAgICAgICAgICAgIG5vdGU6ICdVcGRhdGluZyBhY2N1bXVsYXRlZFJlY29yZHMgdG8gZXhjbHVkZSBtYW51YWxseSByZW1vdmVkIHJlY29yZHMnLFxuICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZShyZWNvcmRzVG9SZXNlbGVjdClcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gT25seSByZS1zZWxlY3QgaWYgd2UgaGF2ZSByZWNvcmRzIHRvIHJlLXNlbGVjdFxuICAgICAgICAgIGlmIChyZWNvcmRzVG9SZXNlbGVjdC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCByZWNvcmRJZHMgPSByZWNvcmRzVG9SZXNlbGVjdC5tYXAocmVjb3JkID0+IHJlY29yZC5nZXRJZCgpKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBESUFHTk9TVElDIExPR0dJTkc6IFdoYXQgd2UncmUgYWJvdXQgdG8gcmUtc2VsZWN0XG4gICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgZXZlbnQ6ICdxdWVyeS1zd2l0Y2gtYmVmb3JlLXJlc2VsZWN0aW9uJyxcbiAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICByZWNvcmRzVG9SZXNlbGVjdENvdW50OiByZWNvcmRzVG9SZXNlbGVjdC5sZW5ndGgsXG4gICAgICAgICAgICAgIHJlY29yZHNUb1Jlc2VsZWN0SWRzOiByZWNvcmRJZHMsXG4gICAgICAgICAgICAgIG91dHB1dERTSWQ6IGZlYXR1cmVEUy5pZCxcbiAgICAgICAgICAgICAgZ3JhcGhpY3NMYXllckNvdW50QmVmb3JlOiBncmFwaGljc0xheWVyPy5ncmFwaGljcz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gVXNlIHRoZSBzYW1lIHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoIHRoYXQncyB1c2VkIGFmdGVyIHF1ZXJ5IGNvbXBsZXRpb25cbiAgICAgICAgICAgIC8vIFRoaXMgd2lsbCBzZWxlY3QgcmVjb3JkcyBvbiB0aGUgbWFwIGFuZCB0cmlnZ2VyIGhhbmRsZURhdGFTb3VyY2VJbmZvQ2hhbmdlXG4gICAgICAgICAgICAvLyBpbiBxdWVyeS1yZXN1bHQudHN4IHRvIHVwZGF0ZSBzZWxlY3RlZFJlY29yZHMgc3RhdGUgZm9yIHRoZSBSZXN1bHRzIHRhYlxuICAgICAgICAgICAgLy8gVXNlIGdyYXBoaWNzIGxheWVyIGlmIGVuYWJsZWQgKHByb3BzIHNob3VsZCBiZSB1cGRhdGVkIGFmdGVyIHdpZGdldCByZS1yZW5kZXIpXG4gICAgICAgICAgICA7KGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgIGF3YWl0IHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoKFxuICAgICAgICAgICAgICAgICAgICBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgICAgICAgZmVhdHVyZURTLFxuICAgICAgICAgICAgICAgICAgICByZWNvcmRJZHMsXG4gICAgICAgICAgICAgICAgICAgIHJlY29yZHNUb1Jlc2VsZWN0LFxuICAgICAgICAgICAgICAgICAgICBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCxcbiAgICAgICAgICAgICAgICAgICAgZ3JhcGhpY3NMYXllcixcbiAgICAgICAgICAgICAgICAgICAgbWFwVmlld1xuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgLy8gRklYIChyMDE4LjkyKTogQ2xlYXIgdGhlIHF1ZXJ5IHN3aXRjaCBmbGFnIGFmdGVyIHJlLXNlbGVjdGlvbiBjb21wbGV0ZXNcbiAgICAgICAgICAgICAgICAgIGlzUXVlcnlTd2l0Y2hJblByb2dyZXNzUmVmLmN1cnJlbnQgPSBmYWxzZVxuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdxdWVyeS1zd2l0Y2gtY29tcGxldGVkLWNsZWFyaW5nLWluLXByb2dyZXNzLWZsYWcnLFxuICAgICAgICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgICAgIHJlY29yZHNSZXNlbGVjdGVkOiByZWNvcmRJZHMubGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIC8vIEZJWCAocjAxOC44Nik6IENsZWFuIHVwIGR1cGxpY2F0ZSB3aWRnZXQgb3V0cHV0IGVudHJpZXMgaW4gZGF0YV9zIGhhc2hcbiAgICAgICAgICAgICAgICAgIC8vIFdoZW4gc3dpdGNoaW5nIHF1ZXJpZXMsIEV4cGVyaWVuY2UgQnVpbGRlciBjcmVhdGVzIGEgbmV3IG91dHB1dCBEUyB3aXRoIGEgbmV3IElEXG4gICAgICAgICAgICAgICAgICAvLyBXZSBuZWVkIHRvIHJlbW92ZSBhbGwgb2xkIHdpZGdldCBvdXRwdXQgZW50cmllcyB0byBwcmV2ZW50IGR1cGxpY2F0ZXNcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRPdXRwdXREU0lkID0gZmVhdHVyZURTLmlkXG4gICAgICAgICAgICAgICAgICBjb25zdCBoYXNoID0gd2luZG93LmxvY2F0aW9uLmhhc2guc3Vic3RyaW5nKDEpXG4gICAgICAgICAgICAgICAgICBjb25zdCB1cmxQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKGhhc2gpXG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIGlmICh1cmxQYXJhbXMuaGFzKCdkYXRhX3MnKSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRhUyA9IHVybFBhcmFtcy5nZXQoJ2RhdGFfcycpIHx8ICcnXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlY29kZWREYXRhUyA9IGRlY29kZVVSSUNvbXBvbmVudChkYXRhUylcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0aW9ucyA9IGRlY29kZWREYXRhUy5zcGxpdCgnLCcpXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBFeHRyYWN0IHdpZGdldCBudW1iZXIgZnJvbSB3aWRnZXRJZCAoZS5nLiwgXCJ3aWRnZXRfMTJcIiAtPiBcIjEyXCIpXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHdpZGdldE1hdGNoID0gcHJvcHMud2lkZ2V0SWQubWF0Y2goL3dpZGdldF8oXFxkKykvKVxuICAgICAgICAgICAgICAgICAgICBpZiAod2lkZ2V0TWF0Y2gpIHtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCB3aWRnZXROdW1iZXIgPSB3aWRnZXRNYXRjaFsxXVxuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHdpZGdldFBhdHRlcm4gPSBuZXcgUmVnRXhwKGB3aWRnZXRfJHt3aWRnZXROdW1iZXJ9X291dHB1dF8oXFxcXGQrKWApXG4gICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgLy8gRmluZCBhbGwgd2lkZ2V0IG91dHB1dCBlbnRyaWVzIGZvciB0aGlzIHdpZGdldFxuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHdpZGdldE91dHB1dEVudHJpZXM6IEFycmF5PHtzZWxlY3Rpb246IHN0cmluZywgb3V0cHV0SWQ6IHN0cmluZywgcmVjb3JkQ291bnQ6IG51bWJlcn0+ID0gW11cbiAgICAgICAgICAgICAgICAgICAgICBzZWxlY3Rpb25zLmZvckVhY2goc2VsZWN0aW9uID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3Rpb24uc3RhcnRzV2l0aCgnaWQ6JykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWRQYXJ0ID0gc2VsZWN0aW9uLnN1YnN0cmluZygzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb2xvbkluZGV4ID0gaWRQYXJ0Lmxhc3RJbmRleE9mKCc6JylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbG9uSW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZHNJZFBhcnQgPSBpZFBhcnQuc3Vic3RyaW5nKDAsIGNvbG9uSW5kZXgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVjb3JkSWRzUGFydCA9IGlkUGFydC5zdWJzdHJpbmcoY29sb25JbmRleCArIDEpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVjb3JkQ291bnQgPSByZWNvcmRJZHNQYXJ0ID8gcmVjb3JkSWRzUGFydC5zcGxpdCgvWywrXS8pLmZpbHRlcihpZCA9PiBpZCkubGVuZ3RoIDogMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoaXMgbWF0Y2hlcyBvdXIgd2lkZ2V0J3Mgb3V0cHV0IERTIHBhdHRlcm5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgb3V0cHV0SWRNYXRjaDogUmVnRXhwTWF0Y2hBcnJheSB8IG51bGwgPSBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRzSWRQYXJ0LmluY2x1ZGVzKCd+JykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvbXBvdW5kIGZvcm1hdDogZGF0YVNvdXJjZV8qfndpZGdldF9YWF9vdXRwdXRfKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFydHMgPSBkc0lkUGFydC5zcGxpdCgnficpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHBhcnQgb2YgcGFydHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF0Y2ggPSBwYXJ0Lm1hdGNoKHdpZGdldFBhdHRlcm4pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dElkTWF0Y2ggPSBtYXRjaFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2ltcGxlIGZvcm1hdDogd2lkZ2V0X1hYX291dHB1dF8qXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRJZE1hdGNoID0gZHNJZFBhcnQubWF0Y2god2lkZ2V0UGF0dGVybilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG91dHB1dElkTWF0Y2gpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZ1bGxPdXRwdXRJZCA9IG91dHB1dElkTWF0Y2hbMF0gLy8gZS5nLiwgXCJ3aWRnZXRfMTJfb3V0cHV0XzI4NjI4NjgzOTU3MzI0NDk3XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZGdldE91dHB1dEVudHJpZXMucHVzaCh7IHNlbGVjdGlvbiwgb3V0cHV0SWQ6IGZ1bGxPdXRwdXRJZCwgcmVjb3JkQ291bnQgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHdlIGhhdmUgbXVsdGlwbGUgZW50cmllcyBmb3IgdGhpcyB3aWRnZXQsIGtlZXAgb25seSB0aGUgY3VycmVudCBvbmVcbiAgICAgICAgICAgICAgICAgICAgICBpZiAod2lkZ2V0T3V0cHV0RW50cmllcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50T3V0cHV0SWRTaG9ydCA9IGN1cnJlbnRPdXRwdXREU0lkLnNwbGl0KCctJykucG9wKCkgLy8gRXh0cmFjdCB0aGUgbnVtZXJpYyBwYXJ0XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdxdWVyeS1zd2l0Y2gtbXVsdGlwbGUtd2lkZ2V0LW91dHB1dHMtZGV0ZWN0ZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsV2lkZ2V0T3V0cHV0czogd2lkZ2V0T3V0cHV0RW50cmllcy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHdpZGdldE91dHB1dHM6IHdpZGdldE91dHB1dEVudHJpZXMubWFwKGUgPT4gKHsgb3V0cHV0SWQ6IGUub3V0cHV0SWQsIHJlY29yZENvdW50OiBlLnJlY29yZENvdW50IH0pKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudE91dHB1dERTSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRPdXRwdXRJZFNob3J0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpbHRlciBvdXQgYWxsIG9sZCB3aWRnZXQgb3V0cHV0IGVudHJpZXNcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWRTZWxlY3Rpb25zID0gc2VsZWN0aW9ucy5maWx0ZXIoc2VsZWN0aW9uID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF0Y2hpbmdFbnRyeSA9IHdpZGdldE91dHB1dEVudHJpZXMuZmluZChlID0+IGUuc2VsZWN0aW9uID09PSBzZWxlY3Rpb24pXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaGluZ0VudHJ5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gS2VlcCBvbmx5IHRoZSBlbnRyeSBtYXRjaGluZyB0aGUgY3VycmVudCBvdXRwdXQgRFNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBrZWVwRW50cnkgPSBtYXRjaGluZ0VudHJ5Lm91dHB1dElkLmluY2x1ZGVzKGN1cnJlbnRPdXRwdXRJZFNob3J0IHx8ICcnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgha2VlcEVudHJ5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50OiAncXVlcnktc3dpdGNoLXJlbW92aW5nLW9sZC13aWRnZXQtb3V0cHV0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVkT3V0cHV0SWQ6IG1hdGNoaW5nRW50cnkub3V0cHV0SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZWRSZWNvcmRDb3VudDogbWF0Y2hpbmdFbnRyeS5yZWNvcmRDb3VudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudE91dHB1dERTSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGtlZXBFbnRyeVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodXBkYXRlZFNlbGVjdGlvbnMubGVuZ3RoICE9PSBzZWxlY3Rpb25zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodXBkYXRlZFNlbGVjdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybFBhcmFtcy5zZXQoJ2RhdGFfcycsIGVuY29kZVVSSUNvbXBvbmVudCh1cGRhdGVkU2VsZWN0aW9ucy5qb2luKCcsJykpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybFBhcmFtcy5kZWxldGUoJ2RhdGFfcycpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhhc2ggPSB1cmxQYXJhbXMudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNIJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50OiAncXVlcnktc3dpdGNoLWNsZWFuZWQtZHVwbGljYXRlLXdpZGdldC1vdXRwdXRzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWxTZWxlY3Rpb25Db3VudDogc2VsZWN0aW9ucy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3U2VsZWN0aW9uQ291bnQ6IHVwZGF0ZWRTZWxlY3Rpb25zLmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbnRyaWVzUmVtb3ZlZDogc2VsZWN0aW9ucy5sZW5ndGggLSB1cGRhdGVkU2VsZWN0aW9ucy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2VwdE91dHB1dERTSWQ6IGN1cnJlbnRPdXRwdXREU0lkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtlcHRSZWNvcmRDb3VudDogcmVjb3Jkc1RvUmVzZWxlY3QubGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAod2lkZ2V0T3V0cHV0RW50cmllcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdxdWVyeS1zd2l0Y2gtc2luZ2xlLXdpZGdldC1vdXRwdXQtZm91bmQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dElkOiB3aWRnZXRPdXRwdXRFbnRyaWVzWzBdLm91dHB1dElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICByZWNvcmRDb3VudDogd2lkZ2V0T3V0cHV0RW50cmllc1swXS5yZWNvcmRDb3VudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwZWN0ZWRSZWNvcmRDb3VudDogcmVjb3Jkc1RvUmVzZWxlY3QubGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICAgICAgICByZWNvcmRDb3VudHNNYXRjaDogd2lkZ2V0T3V0cHV0RW50cmllc1swXS5yZWNvcmRDb3VudCA9PT0gcmVjb3Jkc1RvUmVzZWxlY3QubGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgcmVjb3Jkc1JlZiBzbyByZXN1bHRzIHRhYiBzaG93cyBhY2N1bXVsYXRlZCByZWNvcmRzXG4gICAgICAgICAgICAgICAgICByZWNvcmRzUmVmLmN1cnJlbnQgPSByZWNvcmRzVG9SZXNlbGVjdFxuICAgICAgICAgICAgICAgICAgc2V0UmVzdWx0Q291bnQocmVjb3Jkc1RvUmVzZWxlY3QubGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAvLyBWRVJJRklDQVRJT04gTE9HR0lORzogR3JhcGhpY3MgY291bnQgYWZ0ZXIgcmUtc2VsZWN0aW9uXG4gICAgICAgICAgICAgICAgICBjb25zdCBncmFwaGljc0NvdW50QWZ0ZXJSZXNlbGVjdGlvbiA9IGdyYXBoaWNzTGF5ZXI/LmdyYXBoaWNzPy5sZW5ndGggfHwgMFxuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdyZS1zZWxlY3RlZC1hY2N1bXVsYXRlZC1yZWNvcmRzLWFmdGVyLXF1ZXJ5LXN3aXRjaCcsXG4gICAgICAgICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0RFNJZDogZmVhdHVyZURTLmlkLFxuICAgICAgICAgICAgICAgICAgICByZWNvcmRzQ291bnQ6IHJlY29yZHNUb1Jlc2VsZWN0Lmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgZ3JhcGhpY3NDb3VudEFmdGVyUmVzZWxlY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgIGV4cGVjdGVkR3JhcGhpY3NDb3VudDogcmVjb3Jkc1RvUmVzZWxlY3QubGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICBncmFwaGljc01hdGNoOiBncmFwaGljc0NvdW50QWZ0ZXJSZXNlbGVjdGlvbiA9PT0gcmVjb3Jkc1RvUmVzZWxlY3QubGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIC8vIFZlcmlmeSB3aGF0J3MgYWN0dWFsbHkgc2VsZWN0ZWQgaW4gdGhlIERTIGFmdGVyIGEgZGVsYXlcbiAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkcyA9IERhdGFTb3VyY2VNYW5hZ2VyLmdldEluc3RhbmNlKCkuZ2V0RGF0YVNvdXJjZShmZWF0dXJlRFMuaWQpXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkSW5EUyA9IGRzPy5nZXRTZWxlY3RlZFJlY29yZHMoKVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3RlZElkc0luRFMgPSBkcz8uZ2V0U2VsZWN0ZWRSZWNvcmRJZHMoKSA/PyBbXVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBmaW5hbEdyYXBoaWNzQ291bnQgPSBncmFwaGljc0xheWVyPy5ncmFwaGljcz8ubGVuZ3RoIHx8IDBcbiAgICAgICAgICAgICAgICAgICAgLy8gcjAxOC43ODogVXNlICdyZWNvcmRJZCcgYXR0cmlidXRlIChub3QgT0JKRUNUSUQvaWQvRklEKSAtIHRoYXQncyBob3cgZ3JhcGhpY3MtbGF5ZXItdXRpbHMgc3RvcmVzIHRoZW1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmluYWxHcmFwaGljc0lkcyA9IGdyYXBoaWNzTGF5ZXI/LmdyYXBoaWNzPy5tYXAoZyA9PiBnLmF0dHJpYnV0ZXM/LnJlY29yZElkKSB8fCBbXVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdxdWVyeS1zd2l0Y2gtYWZ0ZXItcmVzZWxlY3Rpb24tZnVsbC1zdGF0ZScsXG4gICAgICAgICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICAgICAgICAgIG91dHB1dERTSWQ6IGZlYXR1cmVEUy5pZCxcbiAgICAgICAgICAgICAgICAgICAgICBleHBlY3RlZENvdW50OiByZWNvcmRzVG9SZXNlbGVjdC5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgICAgZXhwZWN0ZWRJZHM6IHJlY29yZElkcyxcbiAgICAgICAgICAgICAgICAgICAgICBhY3R1YWxTZWxlY3RlZEluRFM6IHNlbGVjdGVkSW5EUz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgICAgICAgICAgICAgICAgYWN0dWFsU2VsZWN0ZWRJZHNJbkRTOiBzZWxlY3RlZElkc0luRFMsXG4gICAgICAgICAgICAgICAgICAgICAgZmluYWxHcmFwaGljc0NvdW50LFxuICAgICAgICAgICAgICAgICAgICAgIGZpbmFsR3JhcGhpY3NJZHMsXG4gICAgICAgICAgICAgICAgICAgICAgYWxsU291cmNlc01hdGNoOiBzZWxlY3RlZElkc0luRFMubGVuZ3RoID09PSByZWNvcmRzVG9SZXNlbGVjdC5sZW5ndGggJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsR3JhcGhpY3NDb3VudCA9PT0gcmVjb3Jkc1RvUmVzZWxlY3QubGVuZ3RoICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU09OLnN0cmluZ2lmeShzZWxlY3RlZElkc0luRFMuc29ydCgpKSA9PT0gSlNPTi5zdHJpbmdpZnkocmVjb3JkSWRzLnNvcnQoKSksXG4gICAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICB9LCAyMDApXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICAgICAgICBldmVudDogJ3JlLXNlbGVjdGlvbi1mYWlsZWQtYWZ0ZXItc3dpdGNoJyxcbiAgICAgICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicsXG4gICAgICAgICAgICAgICAgICAgIGVycm9yU3RhY2s6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pKClcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gTm8gcmVjb3JkcyB0byByZS1zZWxlY3QgLSBhbGwgd2VyZSByZW1vdmVkXG4gICAgICAgICAgICByZWNvcmRzUmVmLmN1cnJlbnQgPSBbXVxuICAgICAgICAgICAgc2V0UmVzdWx0Q291bnQoMClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgIGV2ZW50OiAnbm8tcmVjb3Jkcy10by1yZXNlbGVjdC1hbGwtcmVtb3ZlZCcsXG4gICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgb3V0cHV0RFNJZDogZmVhdHVyZURTLmlkLFxuICAgICAgICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudEJlZm9yZTogYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgICAgICAgbm90ZTogJ2FsbC1yZWNvcmRzLXdlcmUtcmVtb3ZlZC1uby1yZXNlbGVjdGlvbi1uZWVkZWQnLFxuICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LCAxMDApXG4gICAgfVxuICB9LCBbcmVzdWx0c01vZGUsIGFjY3VtdWxhdGVkUmVjb3JkcywgcHJvcHMud2lkZ2V0SWQsIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQsIG9uSW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXIsIGdyYXBoaWNzTGF5ZXIsIG9uQ2xlYXJHcmFwaGljc0xheWVyLCBtYXBWaWV3LCBxdWVyeUl0ZW0uY29uZmlnSWQsIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlXSlcblxuICAvLyBDbGVhciByZXN1bHRzIHdoZW4gcXVlcnkgaXRlbSBjaGFuZ2VzIChlLmcuLCB3aGVuIG5ldyBoYXNoIHBhcmFtZXRlciB0cmlnZ2VycyBkaWZmZXJlbnQgcXVlcnkpXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gT25seSBjbGVhciBpZiB3ZSdyZSBhY3R1YWxseSBzd2l0Y2hpbmcgdG8gYSBkaWZmZXJlbnQgcXVlcnkgKG5vdCBqdXN0IHJlLXJlbmRlcmluZylcbiAgICBjb25zdCBpc1N3aXRjaGluZ1F1ZXJpZXMgPSBwcmV2aW91c0NvbmZpZ0lkUmVmLmN1cnJlbnQgIT09IHF1ZXJ5SXRlbS5jb25maWdJZFxuICAgIFxuICAgIC8vIE9ubHkgY2xlYXIgcmVzdWx0cyB3aGVuIHN3aXRjaGluZyBxdWVyaWVzIGlmIHdlJ3JlIGluIFwiTmV3XCIgbW9kZVxuICAgIC8vIEluIFwiQWRkIHRvXCIgYW5kIFwiUmVtb3ZlIGZyb21cIiBtb2Rlcywgd2Ugd2FudCB0byBwcmVzZXJ2ZSBhY2N1bXVsYXRlZCByZWNvcmRzIGFjcm9zcyBxdWVyeSBzd2l0Y2hlc1xuICAgIGlmIChpc1N3aXRjaGluZ1F1ZXJpZXMgJiYgcmVzdWx0Q291bnQgPiAwICYmIHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvbikge1xuICAgICAgLy8gU3RvcmUgdGhlIG9sZCBjb25maWdJZCBiZWZvcmUgdXBkYXRpbmdcbiAgICAgIGNvbnN0IG9sZENvbmZpZ0lkID0gcHJldmlvdXNDb25maWdJZFJlZi5jdXJyZW50XG4gICAgICAvLyBVcGRhdGUgdGhlIHJlZiB0byB0cmFjayB0aGUgbmV3IHF1ZXJ5XG4gICAgICBwcmV2aW91c0NvbmZpZ0lkUmVmLmN1cnJlbnQgPSBxdWVyeUl0ZW0uY29uZmlnSWRcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAnY2xlYXJpbmctcmVzdWx0cy1vbi1xdWVyeS1zd2l0Y2gtbmV3LW1vZGUnLFxuICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgIG9sZENvbmZpZ0lkLFxuICAgICAgICBuZXdDb25maWdJZDogcXVlcnlJdGVtLmNvbmZpZ0lkLFxuICAgICAgICByZXN1bHRzTW9kZVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgLy8gQ2xlYXIgaW1tZWRpYXRlbHkgd2hlbiBzd2l0Y2hpbmcgcXVlcmllcywgYnV0IHdyYXAgaW4gdHJ5LWNhdGNoIHRvIGhhbmRsZVxuICAgICAgLy8gcmFjZSBjb25kaXRpb25zIHdpdGggZmVhdHVyZSBpbmZvIHdpbmRvd3MgdGhhdCBtaWdodCBiZSByZW5kZXJpbmdcbiAgICAgIHRyeSB7XG4gICAgICAgIGNsZWFyUmVzdWx0KCdxdWVyeS1pdGVtLXN3aXRjaC1uZXctbW9kZScpXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAvLyBMb2cgZm9yIGRlYnVnZ2luZyBidXQgZG9uJ3Qgc2hvdyB0byB1c2VyIChmcmFtZXdvcmsgcmFjZSBjb25kaXRpb24pXG4gICAgICAgIC8vIFRoZSBlcnJvciBpcyBpbiBmcmFtZXdvcmsgY29kZSAoZmVhdHVyZS1pbmZvLnRzeCksIG5vdCBvdXIgY29kZVxuICAgICAgICAvLyBUaGlzIGNhbiBoYXBwZW4gaWYgZmVhdHVyZS1pbmZvLnRzeCBpcyB0cnlpbmcgdG8gYXBwZW5kQ2hpbGQgdG8gYSBET00gZWxlbWVudFxuICAgICAgICAvLyB0aGF0IGdldHMgcmVtb3ZlZCB3aGVuIHdlIGNsZWFyIHNlbGVjdGlvblxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICAgICAgZXZlbnQ6ICdjbGVhci1yZXN1bHQtcmFjZS1jb25kaXRpb24nLFxuICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvciksXG4gICAgICAgICAgbm90ZTogJ0xpa2VseSByYWNlIGNvbmRpdGlvbiB3aXRoIGZlYXR1cmUtaW5mby50c3gnXG4gICAgICAgIH0pXG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xuICAgICAgICAgIGNvbnNvbGUud2FybignRXJyb3IgY2xlYXJpbmcgcmVzdWx0cyAobGlrZWx5IHJhY2UgY29uZGl0aW9uIHdpdGggZmVhdHVyZSBpbmZvKTonLCBlcnJvcilcbiAgICAgICAgfVxuICAgICAgICAvLyBEb24ndCBzZXQgZXJyb3Igc3RhdGUgLSB0aGlzIGlzIGV4cGVjdGVkIGluIHNvbWUgc2NlbmFyaW9zXG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChpc1N3aXRjaGluZ1F1ZXJpZXMpIHtcbiAgICAgIC8vIFN0b3JlIHRoZSBvbGQgY29uZmlnSWQgQkVGT1JFIHVwZGF0aW5nIHRoZSByZWZcbiAgICAgIGNvbnN0IG9sZENvbmZpZ0lkID0gcHJldmlvdXNDb25maWdJZFJlZi5jdXJyZW50XG4gICAgICBcbiAgICAgIC8vIERJQUdOT1NUSUMgTE9HR0lORzogRnVsbCBzdGF0ZSBCRUZPUkUgc3luY1xuICAgICAgaWYgKHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uIHx8IHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb24pIHtcbiAgICAgICAgaWYgKG91dHB1dERTICYmIGFjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGNvbnN0IGFjdHVhbGx5U2VsZWN0ZWRSZWNvcmRzQmVmb3JlU3luYyA9IG91dHB1dERTLmdldFNlbGVjdGVkUmVjb3JkcygpIGFzIEZlYXR1cmVEYXRhUmVjb3JkW10gfHwgW11cbiAgICAgICAgICBjb25zdCBhY2N1bXVsYXRlZElkcyA9IGFjY3VtdWxhdGVkUmVjb3Jkcy5tYXAociA9PiByLmdldElkKCkpXG4gICAgICAgICAgY29uc3QgYWN0dWFsbHlTZWxlY3RlZElkc0JlZm9yZVN5bmMgPSBhY3R1YWxseVNlbGVjdGVkUmVjb3Jkc0JlZm9yZVN5bmMubWFwKHIgPT4gci5nZXRJZCgpKVxuICAgICAgICAgIC8vIHIwMTguNzg6IFVzZSAncmVjb3JkSWQnIGF0dHJpYnV0ZSAtIHRoYXQncyBob3cgZ3JhcGhpY3MtbGF5ZXItdXRpbHMgc3RvcmVzIHRoZW1cbiAgICAgICAgICBjb25zdCBncmFwaGljc0xheWVySWRzID0gZ3JhcGhpY3NMYXllcj8uZ3JhcGhpY3M/Lm1hcChnID0+IGcuYXR0cmlidXRlcz8ucmVjb3JkSWQpIHx8IFtdXG4gICAgICAgICAgXG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICBldmVudDogJ3F1ZXJ5LXN3aXRjaC1iZWZvcmUtc3luYy1mdWxsLXN0YXRlJyxcbiAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgIG9sZENvbmZpZ0lkLFxuICAgICAgICAgICAgbmV3Q29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZCxcbiAgICAgICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoLFxuICAgICAgICAgICAgYWNjdW11bGF0ZWRJZHM6IGFjY3VtdWxhdGVkSWRzLFxuICAgICAgICAgICAgb3V0cHV0RFNTZWxlY3RlZENvdW50OiBhY3R1YWxseVNlbGVjdGVkUmVjb3Jkc0JlZm9yZVN5bmMubGVuZ3RoLFxuICAgICAgICAgICAgb3V0cHV0RFNTZWxlY3RlZElkczogYWN0dWFsbHlTZWxlY3RlZElkc0JlZm9yZVN5bmMsXG4gICAgICAgICAgICBncmFwaGljc0xheWVyQ291bnQ6IGdyYXBoaWNzTGF5ZXI/LmdyYXBoaWNzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgICAgIGdyYXBoaWNzTGF5ZXJJZHM6IGdyYXBoaWNzTGF5ZXJJZHMsXG4gICAgICAgICAgICByZWNvcmRzT3V0T2ZTeW5jOiBhY2N1bXVsYXRlZElkcy5sZW5ndGggIT09IGFjdHVhbGx5U2VsZWN0ZWRJZHNCZWZvcmVTeW5jLmxlbmd0aCxcbiAgICAgICAgICAgIGlkc01hdGNoOiBKU09OLnN0cmluZ2lmeShhY2N1bXVsYXRlZElkcy5zb3J0KCkpID09PSBKU09OLnN0cmluZ2lmeShhY3R1YWxseVNlbGVjdGVkSWRzQmVmb3JlU3luYy5zb3J0KCkpLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBGSVggKHIwMTguNzApOiBPbmx5IHN5bmMgYWNjdW11bGF0ZWRSZWNvcmRzIHdoZW4gdGhlcmUgYXJlIGFjdHVhbGx5IHNlbGVjdGVkIHJlY29yZHMgdGhhdCBhcmUgYSBzdWJzZXRcbiAgICAgIC8vIFRoaXMgcHJldmVudHMgY2xlYXJpbmcgYWNjdW11bGF0ZWRSZWNvcmRzIHdoZW4gc3dpdGNoaW5nIHRvIGVtcHR5IGRhdGEgc291cmNlcyBkdXJpbmcgcXVlcnkgc3dpdGNoZXNcbiAgICAgIC8vIE9ubHkgc3luYyBpZiByZWNvcmRzIHdlcmUgbWFudWFsbHkgcmVtb3ZlZCAoYWN0dWFsbHlTZWxlY3RlZCA8IGFjY3VtdWxhdGVkKSwgbm90IGR1cmluZyBlbXB0eSBEUyBzd2l0Y2hlc1xuICAgICAgaWYgKHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uIHx8IHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb24pIHtcbiAgICAgICAgaWYgKG91dHB1dERTICYmIGFjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCAmJiBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZSkge1xuICAgICAgICAgIGNvbnN0IGFjdHVhbGx5U2VsZWN0ZWRSZWNvcmRzID0gb3V0cHV0RFMuZ2V0U2VsZWN0ZWRSZWNvcmRzKCkgYXMgRmVhdHVyZURhdGFSZWNvcmRbXSB8fCBbXVxuICAgICAgICAgIFxuICAgICAgICAgIGlmIChhY3R1YWxseVNlbGVjdGVkUmVjb3Jkcy5sZW5ndGggPiAwICYmIGFjdHVhbGx5U2VsZWN0ZWRSZWNvcmRzLmxlbmd0aCA8IGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIC8vIEJ1aWxkIGEgU2V0IG9mIGFjdHVhbGx5IHNlbGVjdGVkIElEcyBmb3IgZmFzdCBsb29rdXBcbiAgICAgICAgICAgIGNvbnN0IGFjdHVhbGx5U2VsZWN0ZWRJZHNTZXQgPSBuZXcgU2V0KGFjdHVhbGx5U2VsZWN0ZWRSZWNvcmRzLm1hcChyID0+IHIuZ2V0SWQoKSkpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEZpbHRlciBhY2N1bXVsYXRlZFJlY29yZHMgdG8gb25seSBpbmNsdWRlIHJlY29yZHMgdGhhdCBhcmUgYWN0dWFsbHkgc2VsZWN0ZWRcbiAgICAgICAgICAgIGNvbnN0IHN5bmNlZFJlY29yZHMgPSBhY2N1bXVsYXRlZFJlY29yZHMuZmlsdGVyKHJlY29yZCA9PiBcbiAgICAgICAgICAgICAgYWN0dWFsbHlTZWxlY3RlZElkc1NldC5oYXMocmVjb3JkLmdldElkKCkpXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IGFjY3VtdWxhdGVkSWRzID0gYWNjdW11bGF0ZWRSZWNvcmRzLm1hcChyID0+IHIuZ2V0SWQoKSlcbiAgICAgICAgICAgIGNvbnN0IGFjdHVhbGx5U2VsZWN0ZWRJZHMgPSBhY3R1YWxseVNlbGVjdGVkUmVjb3Jkcy5tYXAociA9PiByLmdldElkKCkpXG4gICAgICAgICAgICBjb25zdCBzeW5jZWRJZHMgPSBzeW5jZWRSZWNvcmRzLm1hcChyID0+IHIuZ2V0SWQoKSlcbiAgICAgICAgICAgIGNvbnN0IHJlbW92ZWRJZHMgPSBhY2N1bXVsYXRlZElkcy5maWx0ZXIoaWQgPT4gIXN5bmNlZElkcy5pbmNsdWRlcyhpZCkpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICBldmVudDogJ3N5bmNpbmctYWNjdW11bGF0ZWQtcmVjb3Jkcy1iZWZvcmUtcXVlcnktc3dpdGNoJyxcbiAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICBvbGRDb25maWdJZCxcbiAgICAgICAgICAgICAgbmV3Q29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZCxcbiAgICAgICAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnRCZWZvcmU6IGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgICAgICAgIGFjY3VtdWxhdGVkSWRzQmVmb3JlOiBhY2N1bXVsYXRlZElkcyxcbiAgICAgICAgICAgICAgYWN0dWFsbHlTZWxlY3RlZENvdW50OiBhY3R1YWxseVNlbGVjdGVkUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgICAgICAgIGFjdHVhbGx5U2VsZWN0ZWRJZHM6IGFjdHVhbGx5U2VsZWN0ZWRJZHMsXG4gICAgICAgICAgICAgIHN5bmNlZFJlY29yZHNDb3VudDogc3luY2VkUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgICAgICAgIHN5bmNlZElkczogc3luY2VkSWRzLFxuICAgICAgICAgICAgICByZWNvcmRzUmVtb3ZlZDogYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCAtIHN5bmNlZFJlY29yZHMubGVuZ3RoLFxuICAgICAgICAgICAgICByZW1vdmVkSWRzOiByZW1vdmVkSWRzLFxuICAgICAgICAgICAgICBub3RlOiAnaW1tZWRpYXRlLXN5bmMtYmVmb3JlLXF1ZXJ5LXN3aXRjaCcsXG4gICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gVXBkYXRlIGFjY3VtdWxhdGVkUmVjb3JkcyB0byBtYXRjaCByZWFsaXR5IChpbW1lZGlhdGUgc3luYywgbm90IGxhenkpXG4gICAgICAgICAgICBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZShzeW5jZWRSZWNvcmRzKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBESUFHTk9TVElDIExPR0dJTkc6IEZ1bGwgc3RhdGUgQUZURVIgc3luY1xuICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgIGV2ZW50OiAncXVlcnktc3dpdGNoLWFmdGVyLXN5bmMtZnVsbC1zdGF0ZScsXG4gICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgb2xkQ29uZmlnSWQsXG4gICAgICAgICAgICAgIG5ld0NvbmZpZ0lkOiBxdWVyeUl0ZW0uY29uZmlnSWQsXG4gICAgICAgICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50QWZ0ZXI6IHN5bmNlZFJlY29yZHMubGVuZ3RoLFxuICAgICAgICAgICAgICBhY2N1bXVsYXRlZElkc0FmdGVyOiBzeW5jZWRJZHMsXG4gICAgICAgICAgICAgIG91dHB1dERTU2VsZWN0ZWRDb3VudDogYWN0dWFsbHlTZWxlY3RlZFJlY29yZHMubGVuZ3RoLFxuICAgICAgICAgICAgICBvdXRwdXREU1NlbGVjdGVkSWRzOiBhY3R1YWxseVNlbGVjdGVkSWRzLFxuICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICBldmVudDogJ2FjY3VtdWxhdGVkLXJlY29yZHMtYWxyZWFkeS1pbi1zeW5jLWJlZm9yZS1xdWVyeS1zd2l0Y2gnLFxuICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgIG9sZENvbmZpZ0lkLFxuICAgICAgICAgICAgICBuZXdDb25maWdJZDogcXVlcnlJdGVtLmNvbmZpZ0lkLFxuICAgICAgICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgZXZlbnQ6ICdwcmVzZXJ2aW5nLWFjY3VtdWxhdGVkLXJlY29yZHMtb24tcXVlcnktc3dpdGNoJyxcbiAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgcmVzdWx0c01vZGUsXG4gICAgICAgICAgb2xkQ29uZmlnSWQsXG4gICAgICAgICAgbmV3Q29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZCxcbiAgICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogYWNjdW11bGF0ZWRSZWNvcmRzPy5sZW5ndGggfHwgMFxuICAgICAgICB9KVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBVcGRhdGUgdGhlIHJlZiBBRlRFUiBzeW5jaW5nXG4gICAgICBwcmV2aW91c0NvbmZpZ0lkUmVmLmN1cnJlbnQgPSBxdWVyeUl0ZW0uY29uZmlnSWRcbiAgICB9XG4gIH0sIFtxdWVyeUl0ZW0uY29uZmlnSWQsIGNsZWFyUmVzdWx0LCByZXN1bHRDb3VudCwgcmVzdWx0c01vZGUsIGFjY3VtdWxhdGVkUmVjb3JkcywgcHJvcHMud2lkZ2V0SWQsIG91dHB1dERTLCBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZV0pXG5cbiAgY29uc3QgbmF2VG9Gb3JtID0gUmVhY3QudXNlQ2FsbGJhY2soYXN5bmMgKGNsZWFyUmVzdWx0cyA9IGZhbHNlKSA9PiB7XG4gICAgaWYgKGNsZWFyUmVzdWx0cykge1xuICAgICAgLy8gVXNlIHRoZSBjZW50cmFsaXplZCBjbGVhclJlc3VsdCBtZXRob2QgaW5zdGVhZCBvZiBkdXBsaWNhdGluZyBsb2dpY1xuICAgICAgYXdhaXQgY2xlYXJSZXN1bHQoJ25hdlRvRm9ybS1jbGVhclJlc3VsdHMnKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIC8vIFN3aXRjaCB0byBxdWVyeSB0YWIgYnV0IGRvbid0IGNsZWFyIHJlc3VsdHMgdW5sZXNzIGV4cGxpY2l0bHkgcmVxdWVzdGVkXG4gICAgLy8gTWFyayBhcyBtYW51YWwgc3dpdGNoIHRvIHByZXZlbnQgYXV0by1zd2l0Y2ggdXNlRWZmZWN0IGZyb20gaW50ZXJmZXJpbmdcbiAgICBtYW51YWxUYWJTd2l0Y2hSZWYuY3VycmVudCA9IHRydWVcbiAgICBzZXRBY3RpdmVUYWIoJ3F1ZXJ5JylcbiAgICAvLyBSZXNldCB0aGUgZmxhZyBhZnRlciBhIHNob3J0IGRlbGF5XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBtYW51YWxUYWJTd2l0Y2hSZWYuY3VycmVudCA9IGZhbHNlXG4gICAgfSwgMTAwKVxuICAgIC8vIE9ubHkgY2hhbmdlIHN0YWdlIGlmIHdlJ3JlIGNsZWFyaW5nIHJlc3VsdHNcbiAgICAvLyBPdGhlcndpc2UsIGtlZXAgc3RhZ2UgYXQgMSAocmVzdWx0cyBhdmFpbGFibGUpIHNvIHJlc3VsdHMgcGVyc2lzdFxuICAgIGlmICghY2xlYXJSZXN1bHRzICYmIHJlc3VsdENvdW50ID4gMCkge1xuICAgICAgc2V0U3RhZ2UoMSkgLy8gS2VlcCByZXN1bHRzIGF2YWlsYWJsZVxuICAgIH1cbiAgICBsb2Rhc2guZGVmZXIoKCkgPT4ge1xuICAgICAgZm9jdXNFbGVtZW50SW5LZXlib2FyZE1vZGUoYmFja0J0blJlZi5jdXJyZW50KVxuICAgIH0pXG4gIH0sIFtjbGVhclJlc3VsdCwgcmVzdWx0Q291bnRdKVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIHRhYiBzd2l0Y2hpbmcgYmV0d2VlbiBRdWVyeSBhbmQgUmVzdWx0cyB0YWJzLlxuICAgKiBUYWIgc3dpdGNoaW5nIHByZXNlcnZlcyByZXN1bHRzIHN0YXRlIC0gcmVzdWx0cyByZW1haW4gdmlzaWJsZSBhbmQgc2VsZWN0ZWRcbiAgICogd2hlbiBzd2l0Y2hpbmcgYmV0d2VlbiB0YWJzLiBSZXN1bHRzIGFyZSBvbmx5IGNsZWFyZWQgd2hlbiBleHBsaWNpdGx5XG4gICAqIGNsaWNraW5nIHRoZSB0cmFzaCBjYW4gYnV0dG9uIG9yIHdoZW4gc3RhcnRpbmcgYSBuZXcgcXVlcnkuXG4gICAqIFxuICAgKiBAcGFyYW0gdGFiIC0gVGhlIHRhYiB0byBzd2l0Y2ggdG8gKCdxdWVyeScgfCAncmVzdWx0cycpXG4gICAqIEBwYXJhbSBldmVudCAtIE9wdGlvbmFsIG1vdXNlIGV2ZW50IHRvIHByZXZlbnQgZGVmYXVsdCBiZWhhdmlvclxuICAgKi9cbiAgY29uc3QgaGFuZGxlVGFiQ2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soKHRhYjogJ3F1ZXJ5JyB8ICdyZXN1bHRzJywgZXZlbnQ/OiBSZWFjdC5Nb3VzZUV2ZW50KSA9PiB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgZXZlbnQ6ICd0YWItY2hhbmdlJyxcbiAgICAgIHRhYixcbiAgICAgIGN1cnJlbnRUYWI6IGFjdGl2ZVRhYixcbiAgICAgIHJlc3VsdENvdW50LFxuICAgICAgZXZlbnRUeXBlOiBldmVudD8udHlwZVxuICAgIH0pXG4gICAgXG4gICAgaWYgKGV2ZW50KSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuICAgIH1cbiAgICAvLyBEb24ndCBhbGxvdyBzd2l0Y2hpbmcgdG8gcmVzdWx0cyBpZiB0aGVyZSBhcmUgbm8gcmVzdWx0c1xuICAgIGlmICh0YWIgPT09ICdyZXN1bHRzJyAmJiByZXN1bHRDb3VudCA9PT0gMCkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgICBldmVudDogJ3RhYi1jaGFuZ2UtYmxvY2tlZCcsXG4gICAgICAgIHJlYXNvbjogJ25vLXJlc3VsdHMnLFxuICAgICAgICB0YWIsXG4gICAgICAgIHJlc3VsdENvdW50XG4gICAgICB9KVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIC8vIE1hcmsgdGhpcyBhcyBhIG1hbnVhbCBzd2l0Y2ggdG8gcHJldmVudCBhdXRvLXN3aXRjaCB1c2VFZmZlY3QgZnJvbSBpbnRlcmZlcmluZ1xuICAgIG1hbnVhbFRhYlN3aXRjaFJlZi5jdXJyZW50ID0gdHJ1ZVxuICAgIHNldEFjdGl2ZVRhYih0YWIpXG4gICAgXG4gICAgLy8gUmVzZXQgdGhlIGZsYWcgYWZ0ZXIgYSBzaG9ydCBkZWxheSB0byBhbGxvdyB0aGUgc3RhdGUgdXBkYXRlIHRvIGNvbXBsZXRlXG4gICAgLy8gVGhpcyBwcmV2ZW50cyB0aGUgYXV0by1zd2l0Y2ggdXNlRWZmZWN0IGZyb20gaW1tZWRpYXRlbHkgc3dpdGNoaW5nIGJhY2tcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIG1hbnVhbFRhYlN3aXRjaFJlZi5jdXJyZW50ID0gZmFsc2VcbiAgICB9LCAxMDApXG4gICAgXG4gICAgLy8gRG9uJ3QgY2hhbmdlIHN0YWdlIGhlcmUgLSBqdXN0IHN3aXRjaCB0aGUgdmlld1xuICAgIC8vIFN0YWdlIHNob3VsZCByZW1haW4gYXQgMSAocmVzdWx0cyBhdmFpbGFibGUpIHdoZW4gc3dpdGNoaW5nIGJldHdlZW4gdGFic1xuICB9LCBbcmVzdWx0Q291bnQsIGFjdGl2ZVRhYl0pXG5cbiAgLyoqXG4gICAqIEludGVybmFsIGltcGxlbWVudGF0aW9uIG9mIGhhbmRsZUZvcm1TdWJtaXQgKHdpdGhvdXQgd2FpdGluZyBsb2dpYylcbiAgICogVGhpcyBpcyBjYWxsZWQgZWl0aGVyIGRpcmVjdGx5IG9yIGFmdGVyIGhhc2ggdmFsdWUgY29udmVyc2lvblxuICAgKiBcbiAgICogQHBhcmFtIHNxbEV4cHIgLSBUaGUgU1FMIGV4cHJlc3Npb24gZm9yIGF0dHJpYnV0ZSBmaWx0ZXJpbmdcbiAgICogQHBhcmFtIHNwYXRpYWxGaWx0ZXIgLSBUaGUgc3BhdGlhbCBmaWx0ZXIgb2JqZWN0XG4gICAqIEBwYXJhbSBydW50aW1lWm9vbVRvU2VsZWN0ZWQgLSBPcHRpb25hbCBydW50aW1lIG92ZXJyaWRlIGZvciB6b29tLXRvLXNlbGVjdGVkIGJlaGF2aW9yXG4gICAqL1xuICBjb25zdCBoYW5kbGVGb3JtU3VibWl0SW50ZXJuYWwgPSBSZWFjdC51c2VDYWxsYmFjayhhc3luYyAoc3FsRXhwcjogSU1TcWxFeHByZXNzaW9uLCBzcGF0aWFsRmlsdGVyOiBTcGF0aWFsRmlsdGVyT2JqLCBydW50aW1lWm9vbVRvU2VsZWN0ZWQ/OiBib29sZWFuKSA9PiB7XG4gICAgLy8gQ2xlYXIgcHJldmlvdXMgZXJyb3JzIHdoZW4gc3RhcnRpbmcgYSBuZXcgcXVlcnlcbiAgICBzZXRTZWxlY3Rpb25FcnJvcihudWxsKVxuICAgIHNldFpvb21FcnJvcihudWxsKVxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgIGV2ZW50OiAnaGFuZGxlRm9ybVN1Ym1pdEludGVybmFsLWV4ZWN1dGluZycsXG4gICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICByZXN1bHRzTW9kZSxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG5cbiAgICAvLyBTdG9yZSB0aGUgcnVudGltZSB6b29tIG92ZXJyaWRlIGZvciB1c2UgYnkgQWRkIHRvIE1hcCBhY3Rpb25cbiAgICBsYXN0UnVudGltZVpvb21Ub1NlbGVjdGVkUmVmLmN1cnJlbnQgPSBydW50aW1lWm9vbVRvU2VsZWN0ZWRcbiAgICBcbiAgICBhdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqLmN1cnJlbnQgPSBzcWxFeHByXG4gICAgc3BhdGlhbEZpbHRlck9iai5jdXJyZW50ID0gc3BhdGlhbEZpbHRlclxuICAgIC8vIExvYWQgdGhlIGZpcnN0IHBhZ2VcbiAgICBjb25zdCBmZWF0dXJlRFMgPSBvdXRwdXREUyBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gICAgXG4gICAgLy8gRm9yIFwiQWRkIHRvXCIgYW5kIFwiUmVtb3ZlIGZyb21cIiBtb2RlcywgdXNlIHdpZGdldC1sZXZlbCBhY2N1bXVsYXRlZCByZWNvcmRzXG4gICAgLy8gVGhlc2UgcGVyc2lzdCBhY3Jvc3MgcXVlcnkgc3dpdGNoZXMsIHVubGlrZSBxdWVyeS1pdGVtLWxldmVsIHJlY29yZHNcbiAgICBsZXQgZXhpc3RpbmdSZWNvcmRzRm9yTWVyZ2U6IEZlYXR1cmVEYXRhUmVjb3JkW10gPSBbXVxuICAgIGlmIChyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbiB8fCByZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uKSB7XG4gICAgICAvLyBSb2J1c3QgY2FwdHVyZSBzdHJhdGVneTpcbiAgICAgIC8vIDEuIFRyeSByZWNvcmRzIGZyb20gcHJvcHMgKGFscmVhZHkgbWVyZ2VkIGJ5IHBhcmVudClcbiAgICAgIC8vIDIuIEZhbGxiYWNrIHRvIGN1cnJlbnRseSBzZWxlY3RlZCByZWNvcmRzIGluIERTIChjYXB0dXJlZCBkdXJpbmcgbW9kZSBzd2l0Y2gpXG4gICAgICBjb25zdCBmcm9tUHJvcCA9IGFjY3VtdWxhdGVkUmVjb3JkcyB8fCBbXVxuICAgICAgY29uc3QgZnJvbURTID0gb3V0cHV0RFM/LmdldFNlbGVjdGVkUmVjb3JkcygpIGFzIEZlYXR1cmVEYXRhUmVjb3JkW10gfHwgW11cbiAgICAgIFxuICAgICAgLy8gRGlhZ25vc3RpYzogQ2FwdHVyZSBleGlzdGluZyByZWNvcmRzIGZyb20gYm90aCBzb3VyY2VzXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdjYXB0dXJlLWV4aXN0aW5nLXJlY29yZHMtZGV0YWlsZWQnLFxuICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgIHF1ZXJ5SXRlbUlkOiBwcm9wcy5xdWVyeUl0ZW0/LmlkLFxuICAgICAgICBmcm9tUHJvcENvdW50OiBmcm9tUHJvcC5sZW5ndGgsXG4gICAgICAgIGZyb21Qcm9wSWRzOiBmcm9tUHJvcC5tYXAociA9PiByLmdldElkPy4oKSkuc2xpY2UoMCwgNSksXG4gICAgICAgIGZyb21EU0NvdW50OiBmcm9tRFMubGVuZ3RoLFxuICAgICAgICBmcm9tRFNJZHM6IGZyb21EUy5tYXAociA9PiByLmdldElkPy4oKSkuc2xpY2UoMCwgNSksXG4gICAgICAgIG91dHB1dERTSWQ6IG91dHB1dERTPy5pZCxcbiAgICAgICAgcmVzdWx0c01vZGUsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgZXhpc3RpbmdSZWNvcmRzRm9yTWVyZ2UgPSBmcm9tUHJvcC5sZW5ndGggPiAwID8gZnJvbVByb3AgOiBmcm9tRFNcbiAgICAgIFxuICAgICAgLy8gRGlhZ25vc3RpYzogRmluYWwgZXhpc3RpbmcgcmVjb3JkcyBzZWxlY3RlZFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAnZmluYWwtZXhpc3RpbmctcmVjb3Jkcy1zZWxlY3RlZCcsXG4gICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgZmluYWxDb3VudDogZXhpc3RpbmdSZWNvcmRzRm9yTWVyZ2UubGVuZ3RoLFxuICAgICAgICBmaW5hbElkczogZXhpc3RpbmdSZWNvcmRzRm9yTWVyZ2UubWFwKHIgPT4gci5nZXRJZD8uKCkpLnNsaWNlKDAsIDUpLFxuICAgICAgICBzb3VyY2U6IGZyb21Qcm9wLmxlbmd0aCA+IDAgPyAnYWNjdW11bGF0ZWRSZWNvcmRzLXByb3AnIDogJ291dHB1dERTLWdldFNlbGVjdGVkUmVjb3JkcycsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAnY2FwdHVyZWQtZXhpc3RpbmctcmVjb3Jkcy1kaWFnbm9zdGljJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICByZXN1bHRzTW9kZSxcbiAgICAgICAgZnJvbVByb3BDb3VudDogZnJvbVByb3AubGVuZ3RoLFxuICAgICAgICBmcm9tRFNDb3VudDogZnJvbURTLmxlbmd0aCxcbiAgICAgICAgZmluYWxDYXB0dXJlZENvdW50OiBleGlzdGluZ1JlY29yZHNGb3JNZXJnZS5sZW5ndGgsXG4gICAgICAgIGZpcnN0UmVjb3JkSWQ6IGV4aXN0aW5nUmVjb3Jkc0Zvck1lcmdlWzBdPy5nZXRJZD8uKCkgfHwgJ25vbmUnLFxuICAgICAgICBhbGxSZWNvcmRJZHM6IGV4aXN0aW5nUmVjb3Jkc0Zvck1lcmdlLm1hcChyID0+IHIuZ2V0SWQ/LigpKS5zbGljZSgwLCAxMCksXG4gICAgICAgIG91dHB1dERTSWQ6IG91dHB1dERTLmlkLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgfVxuICAgIFxuICAgIC8vIEZvciBcIk5ld1wiIG1vZGUsIGNsZWFyIG9sZCByZXN1bHRzIGFuZCBncmFwaGljcyBsYXllclxuICAgIC8vIFdlIGNhbGwgY2xlYXJSZXN1bHQoKSBkaXJlY3RseSBhbmQgQVdBSVQgaXQgdG8gZW5zdXJlIGl0J3MgZmluaXNoZWQgYmVmb3JlIHF1ZXJ5IGV4ZWN1dGlvbiBzdGFydHNcbiAgICBpZiAocmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICAgIGV2ZW50OiAnaGFuZGxlRm9ybVN1Ym1pdC1jbGVhcmluZy1yZXN1bHRzLWZvci1uZXctbW9kZScsXG4gICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgYXdhaXQgY2xlYXJSZXN1bHQoJ2hhbmRsZUZvcm1TdWJtaXQtbmV3LW1vZGUnKVxuICAgIH1cbiAgICBcbiAgICAvLyBTZXQgbG9hZGluZyBzdGFnZVxuICAgIHNldFN0YWdlKDIpXG4gICAgXG4gICAgLy8gRk9SQ0VEOiBBbHdheXMgdXNlIFNpbXBsZUxpc3QgLSBmZXRjaCBBTEwgcmVjb3Jkcywgbm90IGp1c3QgYSBwYWdlXG4gICAgLy8gVXNlIGRhdGEgc291cmNlJ3MgbWF4IHJlY29yZCBjb3VudCwgb3IgZmFsbCBiYWNrIHRvIGEgbGFyZ2UgbnVtYmVyICgxMDAwMClcbiAgICBjb25zdCBtYXhSZWNvcmRDb3VudCA9IChmZWF0dXJlRFMgYXMgYW55KS5nZXRNYXhSZWNvcmRDb3VudD8uKCkgPz8gMTAwMDBcbiAgICBsZXQgcGFnZVNpemUgPSBtYXhSZWNvcmRDb3VudFxuICAgIGNvbnN0IHF1ZXJ5UGFyYW1zID0gZ2VuZXJhdGVRdWVyeVBhcmFtcyhmZWF0dXJlRFMsIHNxbEV4cHIsIHNwYXRpYWxGaWx0ZXIsIGN1cnJlbnRJdGVtLCAxLCBwYWdlU2l6ZSlcbiAgICBxdWVyeVBhcmFtUmVmLmN1cnJlbnQgPSBxdWVyeVBhcmFtc1xuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgIGV2ZW50OiAnaGFuZGxlRm9ybVN1Ym1pdC1leGVjdXRpbmctcXVlcnknLFxuICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgd2hlcmU6IHF1ZXJ5UGFyYW1zLndoZXJlLFxuICAgICAgcmVzdWx0c01vZGUsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIC8vIENoYW5nZSBvdXRwdXQgZHMgc3RhdHVzIHRvIHVubG9hZGVkIGJlZm9yZSB1c2UgaXQgdG8gbG9hZCBjb3VudC9yZWNvcmRzLlxuICAgIGZlYXR1cmVEUy5zZXRTdGF0dXMoRGF0YVNvdXJjZVN0YXR1cy5VbmxvYWRlZClcbiAgICBmZWF0dXJlRFMuc2V0Q291bnRTdGF0dXMoRGF0YVNvdXJjZVN0YXR1cy5VbmxvYWRlZClcbiAgICBsZXQgcXVlcnlSZXN1bHRDb3VudCA9IDAgLy8gQ2FwdHVyZSBjb3VudCBmcm9tIHJlY29yZHMgdG8gdXNlIGluIGZpbmFsbHkgYmxvY2tcbiAgICBjb25zdCBzdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKVxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgIGV2ZW50OiAncGVyZi1xdWVyeS1jaGFpbi1zdGFydCcsXG4gICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICByZXN1bHRzTW9kZSxcbiAgICAgIHdoZXJlOiBxdWVyeVBhcmFtcy53aGVyZSxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG5cbiAgICAvLyBQRVJGT1JNQU5DRSBPUFRJTUlaQVRJT046IFJlbW92ZWQgcmVkdW5kYW50IGV4ZWN1dGVDb3VudFF1ZXJ5KCkgcm91bmQtdHJpcC5cbiAgICAvLyBTaW5jZSB3ZSBmZXRjaCBBTEwgcmVjb3JkcyAocGFnZVNpemUgPSBtYXhSZWNvcmRDb3VudCksIHdlIGNhbiBqdXN0IHVzZSByZWNvcmRzLmxlbmd0aC5cbiAgICBmZWF0dXJlRFMudXBkYXRlUXVlcnlQYXJhbXMocXVlcnlQYXJhbVJlZi5jdXJyZW50LCBwcm9wcy53aWRnZXRJZClcbiAgICBcbiAgICBjb25zdCBmZXRjaFN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpXG4gICAgZXhlY3V0ZVF1ZXJ5KHByb3BzLndpZGdldElkLCBxdWVyeUl0ZW0sIGZlYXR1cmVEUywgcXVlcnlQYXJhbVJlZi5jdXJyZW50KVxuICAgICAgLnRoZW4oYXN5bmMgKHJlc3VsdCkgPT4ge1xuICAgICAgICBjb25zdCBmZXRjaER1cmF0aW9uTXMgPSBNYXRoLnJvdW5kKHBlcmZvcm1hbmNlLm5vdygpIC0gZmV0Y2hTdGFydFRpbWUpXG4gICAgICAgIGNvbnN0IHByb2Nlc3NpbmdTdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKVxuICAgICAgICBcbiAgICAgICAgcXVlcnlSZXN1bHRDb3VudCA9IHJlc3VsdC5yZWNvcmRzPy5sZW5ndGggfHwgMFxuICAgICAgICBcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgZXZlbnQ6ICdxdWVyeS1leGVjdXRpb24tY29tcGxldGUnLFxuICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICByZXN1bHRzTW9kZSxcbiAgICAgICAgICByZWNvcmRzUmV0dXJuZWQ6IHF1ZXJ5UmVzdWx0Q291bnQsXG4gICAgICAgICAgZmV0Y2hEdXJhdGlvbk1zLFxuICAgICAgICAgIGV4aXN0aW5nQ2FwdHVyZWRDb3VudDogZXhpc3RpbmdSZWNvcmRzRm9yTWVyZ2UubGVuZ3RoLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9KVxuXG4gICAgICAgIGxldCByZWNvcmRzVG9EaXNwbGF5ID0gcmVzdWx0LnJlY29yZHMgfHwgW11cbiAgICAgICAgbGV0IGRzVG9Vc2UgPSBvdXRwdXREU1xuICAgICAgICBcbiAgICAgICAgLy8gSGFuZGxlIFwiQWRkIHRvXCIgbW9kZTogbWVyZ2UgbmV3IHJlc3VsdHMgd2l0aCB3aWRnZXQtbGV2ZWwgYWNjdW11bGF0ZWQgcmVjb3Jkc1xuICAgICAgICBpZiAocmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb24gJiYgcmVzdWx0LnJlY29yZHMgJiYgcmVzdWx0LnJlY29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBGSVggKHIwMTguOTYpOiBObyBtYW51YWwgcmVtb3ZhbCBmaWx0ZXJpbmcgbmVlZGVkXG4gICAgICAgICAgICAvLyBEdXBsaWNhdGUgZGV0ZWN0aW9uIGluIG1lcmdlUmVzdWx0c0ludG9BY2N1bXVsYXRlZCBoYW5kbGVzIHByZXZlbnRpbmcgZHVwbGljYXRlc1xuICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgIGV2ZW50OiAnYWRkLW1vZGUtc3RhcnRpbmctbWVyZ2UnLFxuICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgIGV4aXN0aW5nQ291bnQ6IGV4aXN0aW5nUmVjb3Jkc0Zvck1lcmdlLmxlbmd0aCxcbiAgICAgICAgICAgICAgZXhpc3RpbmdJZHM6IGV4aXN0aW5nUmVjb3Jkc0Zvck1lcmdlLm1hcChyID0+IHIuZ2V0SWQ/LigpKS5zbGljZSgwLCA1KSxcbiAgICAgICAgICAgICAgbmV3UmVjb3Jkc0NvdW50OiByZXN1bHQucmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgICAgICAgIG5ld1JlY29yZElkczogcmVzdWx0LnJlY29yZHM/LnNsaWNlKDAsIDUpLm1hcCgocjogYW55KSA9PiByLmdldElkPy4oKSksXG4gICAgICAgICAgICAgIG5vdGU6ICdyMDE4Ljk2OiBObyBtYW51YWwgcmVtb3ZhbCBmaWx0ZXJpbmcgLSBkdXBsaWNhdGUgZGV0ZWN0aW9uIGhhbmRsZXMgdGhpcycsXG4gICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgLy8gTWVyZ2UgbmV3IHF1ZXJ5IHJlc3VsdHMgd2l0aCB3aWRnZXQtbGV2ZWwgYWNjdW11bGF0ZWQgcmVjb3Jkc1xuICAgICAgICAgICAgLy8gbWVyZ2VSZXN1bHRzSW50b0FjY3VtdWxhdGVkIHVzZXMgY29tcG9zaXRlIGtleXMgdG8gcHJldmVudCBkdXBsaWNhdGVzXG4gICAgICAgICAgICBjb25zdCBtZXJnZWRSZWNvcmRzID0gbWVyZ2VSZXN1bHRzSW50b0FjY3VtdWxhdGVkKFxuICAgICAgICAgICAgICBvdXRwdXREUyBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLCAvLyBVc2Ugb3V0cHV0RFMgZm9yIGtleSBnZW5lcmF0aW9uXG4gICAgICAgICAgICAgIHJlc3VsdC5yZWNvcmRzIGFzIEZlYXR1cmVEYXRhUmVjb3JkW10sXG4gICAgICAgICAgICAgIGV4aXN0aW5nUmVjb3Jkc0Zvck1lcmdlIC8vIFVzZSBjb25zaXN0ZW50bHkgY2FwdHVyZWQgcmVjb3Jkc1xuICAgICAgICAgICAgKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICByZWNvcmRzVG9EaXNwbGF5ID0gbWVyZ2VkUmVjb3Jkc1xuXG4gICAgICAgICAgICAvLyBESUFHTk9TVElDIExPR0dJTkc6IFJlY29yZHMgYmVpbmcgYWRkZWQgdG8gYWNjdW11bGF0ZWRSZWNvcmRzXG4gICAgICAgICAgICBjb25zdCBleGlzdGluZ0lkcyA9IGV4aXN0aW5nUmVjb3Jkc0Zvck1lcmdlLm1hcChyID0+IHIuZ2V0SWQoKSlcbiAgICAgICAgICAgIGNvbnN0IG5ld1JlY29yZElkcyA9IHJlc3VsdC5yZWNvcmRzLm1hcChyID0+IHIuZ2V0SWQoKSlcbiAgICAgICAgICAgIGNvbnN0IG1lcmdlZElkcyA9IG1lcmdlZFJlY29yZHMubWFwKHIgPT4gci5nZXRJZCgpKVxuICAgICAgICAgICAgY29uc3QgYWRkZWRJZHMgPSBtZXJnZWRJZHMuZmlsdGVyKGlkID0+ICFleGlzdGluZ0lkcy5pbmNsdWRlcyhpZCkpXG4gICAgICAgICAgICBjb25zdCBkdXBsaWNhdGVJZHMgPSBuZXdSZWNvcmRJZHMuZmlsdGVyKGlkID0+IGV4aXN0aW5nSWRzLmluY2x1ZGVzKGlkKSlcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgIGV2ZW50OiAnYWRkLW1vZGUtbWVyZ2UtY29tcGxldGUnLFxuICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgIGV4aXN0aW5nQ291bnQ6IGV4aXN0aW5nUmVjb3Jkc0Zvck1lcmdlLmxlbmd0aCxcbiAgICAgICAgICAgICAgZXhpc3RpbmdJZHM6IGV4aXN0aW5nSWRzLnNsaWNlKDAsIDEwKSxcbiAgICAgICAgICAgICAgbmV3UmVjb3Jkc0NvdW50OiByZXN1bHQucmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgICAgICAgIG5ld1JlY29yZElkczogbmV3UmVjb3JkSWRzLnNsaWNlKDAsIDEwKSxcbiAgICAgICAgICAgICAgbWVyZ2VkUmVjb3Jkc0NvdW50OiBtZXJnZWRSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgICAgICAgbWVyZ2VkSWRzOiBtZXJnZWRJZHMuc2xpY2UoMCwgMTApLFxuICAgICAgICAgICAgICBhZGRlZElkczogYWRkZWRJZHMuc2xpY2UoMCwgMTApLFxuICAgICAgICAgICAgICBkdXBsaWNhdGVJZHM6IGR1cGxpY2F0ZUlkcy5zbGljZSgwLCAxMCksXG4gICAgICAgICAgICAgIGR1cGxpY2F0ZXNTa2lwcGVkOiBkdXBsaWNhdGVJZHMubGVuZ3RoLFxuICAgICAgICAgICAgICByZWNvcmRzQWRkZWQ6IGFkZGVkSWRzLmxlbmd0aCxcbiAgICAgICAgICAgICAgbm90ZTogJ3IwMTguOTY6IE5vIG1hbnVhbCByZW1vdmFsIGZpbHRlcmluZyAtIG1lcmdlUmVzdWx0c0ludG9BY2N1bXVsYXRlZCBoYW5kbGVzIGR1cGxpY2F0ZXMnLFxuICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFVwZGF0ZSB3aWRnZXQtbGV2ZWwgYWNjdW11bGF0ZWQgcmVjb3JkcyBzbyB0aGV5IHBlcnNpc3QgYWNyb3NzIHF1ZXJ5IHN3aXRjaGVzXG4gICAgICAgICAgICBpZiAob25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UpIHtcbiAgICAgICAgICAgICAgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UobWVyZ2VkUmVjb3JkcylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgIGV2ZW50OiAnYWRkLW1vZGUtZXJyb3InLFxuICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJyxcbiAgICAgICAgICAgICAgZXJyb3JTdGFjazogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnN0YWNrIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICBub3RlOiAncjAxOC45NjogRmFsbGluZyBiYWNrIHRvIGV4aXN0aW5nIHJlY29yZHMgb24gZXJyb3InLFxuICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAvLyBGYWxsIGJhY2sgdG8gZXhpc3RpbmcgcmVjb3JkcyBvbiBlcnJvclxuICAgICAgICAgICAgcmVjb3Jkc1RvRGlzcGxheSA9IGV4aXN0aW5nUmVjb3Jkc0Zvck1lcmdlXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb24pIHtcbiAgICAgICAgICAvLyBIYW5kbGUgXCJSZW1vdmUgZnJvbVwiIG1vZGU6IHJlbW92ZSBtYXRjaGluZyByZWNvcmRzIGZyb20gd2lkZ2V0LWxldmVsIGFjY3VtdWxhdGVkIHJlY29yZHNcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgIGV2ZW50OiAncmVtb3ZlLW1vZGUtc3RhcnRpbmctbWVyZ2UnLFxuICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgIGV4aXN0aW5nQ291bnQ6IGV4aXN0aW5nUmVjb3Jkc0Zvck1lcmdlLmxlbmd0aCxcbiAgICAgICAgICAgICAgcmVtb3ZlQ291bnQ6IHJlc3VsdC5yZWNvcmRzPy5sZW5ndGggfHwgMFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHdlIGhhdmUgYWNjdW11bGF0ZWQgcmVjb3JkcyB0byByZW1vdmUgZnJvbVxuICAgICAgICAgICAgaWYgKGV4aXN0aW5nUmVjb3Jkc0Zvck1lcmdlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgICBldmVudDogJ3JlbW92ZS1tb2RlLW5vLWFjY3VtdWxhdGVkLXJlY29yZHMnLFxuICAgICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgICBxdWVyeVJlY29yZHNDb3VudDogcmVzdWx0LnJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICAgICAgICAgIG5vdGU6ICdObyBhY2N1bXVsYXRlZCByZWNvcmRzIHRvIHJlbW92ZSBmcm9tIC0gbm8tb3AnXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIC8vIE5vIGFjY3VtdWxhdGVkIHJlY29yZHMsIHNvIG5vdGhpbmcgdG8gcmVtb3ZlIC0gc2hvdyBlbXB0eSByZXN1bHRzXG4gICAgICAgICAgICAgIHJlY29yZHNUb0Rpc3BsYXkgPSBbXVxuICAgICAgICAgICAgfSBlbHNlIGlmIChyZXN1bHQucmVjb3JkcyAmJiByZXN1bHQucmVjb3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIC8vIFJlbW92ZSBtYXRjaGluZyByZWNvcmRzIGZyb20gYWNjdW11bGF0ZWQgcmVjb3Jkc1xuICAgICAgICAgICAgICBjb25zdCByZW1haW5pbmdSZWNvcmRzID0gcmVtb3ZlUmVzdWx0c0Zyb21BY2N1bXVsYXRlZChcbiAgICAgICAgICAgICAgICBvdXRwdXREUyBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLCAvLyBVc2Ugb3V0cHV0RFMgZm9yIGtleSBnZW5lcmF0aW9uXG4gICAgICAgICAgICAgICAgcmVzdWx0LnJlY29yZHMgYXMgRmVhdHVyZURhdGFSZWNvcmRbXSxcbiAgICAgICAgICAgICAgICBleGlzdGluZ1JlY29yZHNGb3JNZXJnZSAvLyBVc2UgY29uc2lzdGVudGx5IGNhcHR1cmVkIHJlY29yZHNcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgcmVjb3Jkc1RvRGlzcGxheSA9IHJlbWFpbmluZ1JlY29yZHNcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIFVwZGF0ZSB3aWRnZXQtbGV2ZWwgYWNjdW11bGF0ZWQgcmVjb3Jkc1xuICAgICAgICAgICAgICBpZiAob25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZShyZW1haW5pbmdSZWNvcmRzKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBGSVggKHIwMTguODYpOiBESUFHTk9TVElDIC0gR3JhcGhpY3MgY291bnQgQkVGT1JFIHJlbW92ZVJlY29yZHNGcm9tT3JpZ2luU2VsZWN0aW9uc1xuICAgICAgICAgICAgICBjb25zdCBncmFwaGljc0NvdW50QmVmb3JlUmVtb3ZlTW9kZSA9IGdyYXBoaWNzTGF5ZXI/LmdyYXBoaWNzPy5sZW5ndGggfHwgMFxuICAgICAgICAgICAgICBjb25zdCBncmFwaGljc0lkc0JlZm9yZVJlbW92ZU1vZGUgPSBncmFwaGljc0xheWVyPy5ncmFwaGljcz8ubWFwKGcgPT4gZy5hdHRyaWJ1dGVzPy5yZWNvcmRJZCkuc2xpY2UoMCwgMTApIHx8IFtdXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgICBldmVudDogJ3JlbW92ZS1tb2RlLUJFRk9SRS1yZW1vdmVSZWNvcmRzRnJvbU9yaWdpblNlbGVjdGlvbnMnLFxuICAgICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgICByZWNvcmRzVG9SZW1vdmVDb3VudDogcmVzdWx0LnJlY29yZHMubGVuZ3RoLFxuICAgICAgICAgICAgICAgIHJlY29yZHNUb1JlbW92ZUlkczogcmVzdWx0LnJlY29yZHMubWFwKHIgPT4gci5nZXRJZCgpKS5zbGljZSgwLCAxMCksXG4gICAgICAgICAgICAgICAgZ3JhcGhpY3NDb3VudEJlZm9yZTogZ3JhcGhpY3NDb3VudEJlZm9yZVJlbW92ZU1vZGUsXG4gICAgICAgICAgICAgICAgZ3JhcGhpY3NJZHNCZWZvcmU6IGdyYXBoaWNzSWRzQmVmb3JlUmVtb3ZlTW9kZSxcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIFJlbW92ZSByZWNvcmRzIGZyb20gb3JpZ2luIGRhdGEgc291cmNlIHNlbGVjdGlvbnMgKG1hcCBoaWdobGlnaHRpbmcpXG4gICAgICAgICAgICAgIC8vIEZJWCAocjAxOC44Nik6IERPTidUIHBhc3MgZ3JhcGhpY3MgbGF5ZXIgcGFyYW1ldGVycyBoZXJlIC0gbGV0IGdyYXBoaWNzIGJlIG1hbmFnZWQgYnkgc2VsZWN0aW9uIHN5bmNcbiAgICAgICAgICAgICAgLy8gVGhpcyBtYXRjaGVzIHRoZSBmaXggZm9yIFggYnV0dG9uIHJlbW92YWwgKHIwMTguODUpXG4gICAgICAgICAgICAgIC8vIEdyYXBoaWNzIHdpbGwgYmUgc3luY2VkIHRocm91Z2ggdGhlIG5vcm1hbCBzZWxlY3Rpb24gZmxvdyBhZnRlciB0aGlzIG9wZXJhdGlvblxuICAgICAgICAgICAgICByZW1vdmVSZWNvcmRzRnJvbU9yaWdpblNlbGVjdGlvbnMoXG4gICAgICAgICAgICAgICAgcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgcmVzdWx0LnJlY29yZHMgYXMgRmVhdHVyZURhdGFSZWNvcmRbXSxcbiAgICAgICAgICAgICAgICBvdXRwdXREUyBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gICAgICAgICAgICAgICAgLy8gTk9UIHBhc3NpbmcgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCBvciBncmFwaGljc0xheWVyXG4gICAgICAgICAgICAgICAgLy8gR3JhcGhpY3Mgd2lsbCBiZSBzeW5jZWQgdGhyb3VnaCBub3JtYWwgc2VsZWN0aW9uIGZsb3dcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gRklYIChyMDE4LjEwNCk6IE1hbnVhbGx5IHJlbW92ZSBncmFwaGljcyBmcm9tIGdyYXBoaWNzIGxheWVyXG4gICAgICAgICAgICAgIC8vIFNpbWlsYXIgdG8gWCBidXR0b24gcmVtb3ZhbCBmaXggKHIwMTguOTApLCB3ZSBuZWVkIHRvIGV4cGxpY2l0bHkgcmVtb3ZlIGdyYXBoaWNzXG4gICAgICAgICAgICAgIC8vIHNpbmNlIHJlbW92ZVJlY29yZHNGcm9tT3JpZ2luU2VsZWN0aW9ucyBkb2Vzbid0IHJlY2VpdmUgZ3JhcGhpY3MgbGF5ZXIgcGFyYW1zXG4gICAgICAgICAgICAgIGlmICh1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0ICYmIGdyYXBoaWNzTGF5ZXIgJiYgcmVzdWx0LnJlY29yZHMgJiYgcmVzdWx0LnJlY29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlbW92ZWRSZWNvcmRJZHMgPSByZXN1bHQucmVjb3Jkcy5tYXAociA9PiByLmdldElkKCkpXG4gICAgICAgICAgICAgICAgcmVtb3ZlSGlnaGxpZ2h0R3JhcGhpY3MoZ3JhcGhpY3NMYXllciwgcmVtb3ZlZFJlY29yZElkcylcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgICAgIGV2ZW50OiAncmVtb3ZlLW1vZGUtbWFudWFsLWdyYXBoaWNzLXJlbW92YWwnLFxuICAgICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICAgICAgZ3JhcGhpY3NDb3VudEJlZm9yZTogZ3JhcGhpY3NDb3VudEJlZm9yZVJlbW92ZU1vZGUsXG4gICAgICAgICAgICAgICAgICBncmFwaGljc0NvdW50QWZ0ZXI6IGdyYXBoaWNzTGF5ZXI/LmdyYXBoaWNzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgICAgICAgICAgIHJlbW92ZWRSZWNvcmRJZHNDb3VudDogcmVtb3ZlZFJlY29yZElkcy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICByZW1vdmVkUmVjb3JkSWRzOiByZW1vdmVkUmVjb3JkSWRzLnNsaWNlKDAsIDEwKSxcbiAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIEZJWCAocjAxOC44Nik6IERJQUdOT1NUSUMgLSBHcmFwaGljcyBjb3VudCBBRlRFUiByZW1vdmVSZWNvcmRzRnJvbU9yaWdpblNlbGVjdGlvbnNcbiAgICAgICAgICAgICAgY29uc3QgZ3JhcGhpY3NDb3VudEFmdGVyUmVtb3ZlTW9kZSA9IGdyYXBoaWNzTGF5ZXI/LmdyYXBoaWNzPy5sZW5ndGggfHwgMFxuICAgICAgICAgICAgICBjb25zdCBncmFwaGljc0lkc0FmdGVyUmVtb3ZlTW9kZSA9IGdyYXBoaWNzTGF5ZXI/LmdyYXBoaWNzPy5tYXAoZyA9PiBnLmF0dHJpYnV0ZXM/LnJlY29yZElkKS5zbGljZSgwLCAxMCkgfHwgW11cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICAgIGV2ZW50OiAncmVtb3ZlLW1vZGUtQUZURVItcmVtb3ZlUmVjb3Jkc0Zyb21PcmlnaW5TZWxlY3Rpb25zJyxcbiAgICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgZ3JhcGhpY3NDb3VudEJlZm9yZTogZ3JhcGhpY3NDb3VudEJlZm9yZVJlbW92ZU1vZGUsXG4gICAgICAgICAgICAgICAgZ3JhcGhpY3NDb3VudEFmdGVyOiBncmFwaGljc0NvdW50QWZ0ZXJSZW1vdmVNb2RlLFxuICAgICAgICAgICAgICAgIGdyYXBoaWNzSWRzQWZ0ZXI6IGdyYXBoaWNzSWRzQWZ0ZXJSZW1vdmVNb2RlLFxuICAgICAgICAgICAgICAgIGdyYXBoaWNzQ2hhbmdlZDogZ3JhcGhpY3NDb3VudEFmdGVyUmVtb3ZlTW9kZSAhPT0gZ3JhcGhpY3NDb3VudEJlZm9yZVJlbW92ZU1vZGUsXG4gICAgICAgICAgICAgICAgZ3JhcGhpY3NDaGFuZ2VkQnk6IGdyYXBoaWNzQ291bnRBZnRlclJlbW92ZU1vZGUgLSBncmFwaGljc0NvdW50QmVmb3JlUmVtb3ZlTW9kZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogJ0dyYXBoaWNzIFNIT1VMRCBOT1cgYmUgcmVtb3ZlZCAocjAxOC4xMDQgZml4KScsXG4gICAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgICBldmVudDogJ3JlbW92ZS1tb2RlLWNvbXBsZXRlJyxcbiAgICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgZXhpc3RpbmdBY2N1bXVsYXRlZFJlY29yZHNDb3VudDogZXhpc3RpbmdSZWNvcmRzRm9yTWVyZ2UubGVuZ3RoLFxuICAgICAgICAgICAgICAgIHF1ZXJ5UmVjb3Jkc0NvdW50OiByZXN1bHQucmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgcmVtYWluaW5nUmVjb3Jkc0NvdW50OiByZW1haW5pbmdSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgICAgICAgICByZWNvcmRzUmVtb3ZlZDogZXhpc3RpbmdSZWNvcmRzRm9yTWVyZ2UubGVuZ3RoIC0gcmVtYWluaW5nUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgb3V0cHV0RFNJZDogb3V0cHV0RFMuaWQsXG4gICAgICAgICAgICAgICAgd2lkZ2V0TGV2ZWxSZWNvcmRzVXBkYXRlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBvcmlnaW5TZWxlY3Rpb25zVXBkYXRlZDogdHJ1ZVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gSWYgYWxsIHJlY29yZHMgcmVtb3ZlZCwgYXV0by1jbGVhciAoY29uc2lzdGVudCB3aXRoIHVzZXIgZXhwZWN0YXRpb24pXG4gICAgICAgICAgICAgIGlmIChyZW1haW5pbmdSZWNvcmRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdyZW1vdmUtbW9kZS1hbGwtcmVjb3Jkcy1yZW1vdmVkJyxcbiAgICAgICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgICAgIG5vdGU6ICdBbGwgYWNjdW11bGF0ZWQgcmVjb3JkcyByZW1vdmVkIC0gYXV0by1jbGVhcmluZydcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC8vIENsZWFyIHdpZGdldC1sZXZlbCBhY2N1bXVsYXRlZCByZWNvcmRzXG4gICAgICAgICAgICAgICAgaWYgKG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgICBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZShbXSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIC8vIFF1ZXJ5IHJldHVybmVkIG5vIHJlc3VsdHMgLSBub3RoaW5nIHRvIHJlbW92ZVxuICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgICBldmVudDogJ3JlbW92ZS1tb2RlLW5vLXF1ZXJ5LXJlc3VsdHMnLFxuICAgICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgICBleGlzdGluZ0FjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiBleGlzdGluZ1JlY29yZHNGb3JNZXJnZS5sZW5ndGgsXG4gICAgICAgICAgICAgICAgbm90ZTogJ1F1ZXJ5IHJldHVybmVkIG5vIHJlc3VsdHMgLSBubyByZWNvcmRzIHRvIHJlbW92ZSdcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgLy8gS2VlcCBleGlzdGluZyBhY2N1bXVsYXRlZCByZWNvcmRzIGRpc3BsYXllZFxuICAgICAgICAgICAgICByZWNvcmRzVG9EaXNwbGF5ID0gZXhpc3RpbmdSZWNvcmRzRm9yTWVyZ2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgIGV2ZW50OiAncmVtb3ZlLW1vZGUtZXJyb3InLFxuICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJyxcbiAgICAgICAgICAgICAgZXJyb3JTdGFjazogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnN0YWNrIDogdW5kZWZpbmVkXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLy8gRmFsbCBiYWNrIHRvIHNob3dpbmcgcXVlcnkgcmVzdWx0cyBvbiBlcnJvclxuICAgICAgICAgICAgcmVjb3Jkc1RvRGlzcGxheSA9IHJlc3VsdC5yZWNvcmRzIHx8IFtdXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvbikge1xuICAgICAgICAgIC8vIEZJWCAocjAxOC45Nyk6IEZvciBcIk5ld1wiIG1vZGUsIHBvcHVsYXRlIGFjY3VtdWxhdGVkUmVjb3JkcyB3aXRoIHF1ZXJ5IHJlc3VsdHNcbiAgICAgICAgICAvLyBUaGlzIGVuc3VyZXMgdGFiIGNvdW50IHVwZGF0ZXMgY29ycmVjdGx5IHdoZW4gcmVjb3JkcyBhcmUgcmVtb3ZlZCBpbiBOZXcgbW9kZVxuICAgICAgICAgIGlmIChvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZSAmJiByZWNvcmRzVG9EaXNwbGF5ICYmIHJlY29yZHNUb0Rpc3BsYXkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UocmVjb3Jkc1RvRGlzcGxheSBhcyBGZWF0dXJlRGF0YVJlY29yZFtdKVxuICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgIGV2ZW50OiAnbmV3LW1vZGUtcG9wdWxhdGluZy1hY2N1bXVsYXRlZC1yZWNvcmRzJyxcbiAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICByZWNvcmRzQ291bnQ6IHJlY29yZHNUb0Rpc3BsYXkubGVuZ3RoLFxuICAgICAgICAgICAgICBub3RlOiAncjAxOC45NzogUG9wdWxhdGUgYWNjdW11bGF0ZWRSZWNvcmRzIGluIE5ldyBtb2RlIGZvciB1bml2ZXJzYWwgdGFiIGNvdW50JyxcbiAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0gZWxzZSBpZiAob25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UpIHtcbiAgICAgICAgICAgIC8vIE5vIHJlc3VsdHMgLSBjbGVhciBhY2N1bXVsYXRlZFJlY29yZHNcbiAgICAgICAgICAgIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlKFtdKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmVjb3Jkc1JlZi5jdXJyZW50ID0gcmVjb3Jkc1RvRGlzcGxheVxuICAgICAgICAvLyBSZXNldCBzZWxlY3Rpb24gZmxhZyBmb3IgbmV3IHF1ZXJ5IHJlc3VsdHNcbiAgICAgICAgaGFzU2VsZWN0ZWRSZWNvcmRzUmVmLmN1cnJlbnQgPSBmYWxzZVxuICAgICAgICBcbiAgICAgICAgLy8gU2VsZWN0IHJlY29yZHMgaW4gdGhlIG91dHB1dCBEU1xuICAgICAgICAvLyBGb3IgXCJBZGQgdG9cIiBtb2RlLCBzZWxlY3QgbWVyZ2VkIHJlY29yZHNcbiAgICAgICAgLy8gRm9yIFwiUmVtb3ZlIGZyb21cIiBtb2RlLCBzZWxlY3QgcmVtYWluaW5nIHJlY29yZHMgKGFscmVhZHkgdXBkYXRlZCB2aWEgcmVtb3ZlUmVjb3Jkc0Zyb21PcmlnaW5TZWxlY3Rpb25zKVxuICAgICAgICAvLyBGb3IgXCJOZXdcIiBtb2RlLCBzZWxlY3QgcXVlcnkgcmVzdWx0c1xuICAgICAgICBpZiAocmVjb3Jkc1RvRGlzcGxheSAmJiByZWNvcmRzVG9EaXNwbGF5Lmxlbmd0aCA+IDAgJiYgZHNUb1VzZSkge1xuICAgICAgICAgIGNvbnN0IHJlY29yZElkc1RvU2VsZWN0ID0gcmVjb3Jkc1RvRGlzcGxheS5tYXAocmVjb3JkID0+IHJlY29yZC5nZXRJZCgpKVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIEZvciBcIlJlbW92ZSBmcm9tXCIgbW9kZSwgc2VsZWN0aW9uIHdhcyBhbHJlYWR5IHVwZGF0ZWQgdmlhIHJlbW92ZVJlY29yZHNGcm9tT3JpZ2luU2VsZWN0aW9uc1xuICAgICAgICAgIC8vIEJ1dCB3ZSBzdGlsbCBuZWVkIHRvIHNlbGVjdCBpbiB0aGUgb3V0cHV0RFMgZm9yIHdpZGdldCBzdGF0ZSBjb25zaXN0ZW5jeVxuICAgICAgICAgIGlmIChyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uKSB7XG4gICAgICAgICAgICAvLyBTZWxlY3Rpb24gd2FzIGFscmVhZHkgdXBkYXRlZCBpbiBvcmlnaW4gRFNzIHZpYSByZW1vdmVSZWNvcmRzRnJvbU9yaWdpblNlbGVjdGlvbnNcbiAgICAgICAgICAgIC8vIEp1c3QgdXBkYXRlIG91dHB1dERTIHNlbGVjdGlvbiBmb3Igd2lkZ2V0IHN0YXRlIGNvbnNpc3RlbmN5XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBpZiAodHlwZW9mIGRzVG9Vc2Uuc2VsZWN0UmVjb3Jkc0J5SWRzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgZHNUb1VzZS5zZWxlY3RSZWNvcmRzQnlJZHMocmVjb3JkSWRzVG9TZWxlY3QsIHJlY29yZHNUb0Rpc3BsYXkgYXMgRmVhdHVyZURhdGFSZWNvcmRbXSlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBoYXNTZWxlY3RlZFJlY29yZHNSZWYuY3VycmVudCA9IHRydWVcbiAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgICAgZXZlbnQ6ICdyZW1vdmUtbW9kZS1vdXRwdXQtZHMtc2VsZWN0aW9uLXVwZGF0ZWQnLFxuICAgICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgICByZWNvcmRDb3VudDogcmVjb3Jkc1RvRGlzcGxheS5sZW5ndGhcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICAgIGV2ZW50OiAncmVtb3ZlLW1vZGUtb3V0cHV0LWRzLXNlbGVjdGlvbi1lcnJvcicsXG4gICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ1xuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBGb3IgXCJBZGQgdG9cIiBhbmQgXCJOZXdcIiBtb2Rlcywgc2VsZWN0IHJlY29yZHMgbm9ybWFsbHlcbiAgICAgICAgICAgIHNldFNlbGVjdGlvbkVycm9yKG51bGwpIC8vIENsZWFyIHByZXZpb3VzIGVycm9yc1xuICAgICAgICAgICAgOyhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgc2VsZWN0UmVjb3Jkc0FuZFB1Ymxpc2goXG4gICAgICAgICAgICAgICAgICBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgICAgIGRzVG9Vc2UsXG4gICAgICAgICAgICAgICAgICByZWNvcmRJZHNUb1NlbGVjdCxcbiAgICAgICAgICAgICAgICAgIHJlY29yZHNUb0Rpc3BsYXkgYXMgRmVhdHVyZURhdGFSZWNvcmRbXSxcbiAgICAgICAgICAgICAgICAgIGZhbHNlLFxuICAgICAgICAgICAgICAgICAgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCxcbiAgICAgICAgICAgICAgICAgIGdyYXBoaWNzTGF5ZXIsXG4gICAgICAgICAgICAgICAgICBtYXBWaWV3XG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIGhhc1NlbGVjdGVkUmVjb3Jkc1JlZi5jdXJyZW50ID0gdHJ1ZSAvLyBNYXJrIGFzIHNlbGVjdGVkXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gRGlzcGF0Y2ggY3VzdG9tIHNlbGVjdGlvbiBldmVudCBzbyBXaWRnZXQgc3RhdGUgaXMgdXBkYXRlZCBpbW1lZGlhdGVseVxuICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgY3J1Y2lhbCBmb3IgaGFzaC1iYXNlZCBleGVjdXRpb24gd2hlcmUgUXVlcnlUYXNrIGhhbmRsZXMgc2VsZWN0aW9uXG4gICAgICAgICAgICAgICAgZGlzcGF0Y2hTZWxlY3Rpb25FdmVudChwcm9wcy53aWRnZXRJZCwgcmVjb3JkSWRzVG9TZWxlY3QsIGRzVG9Vc2UsIHF1ZXJ5SXRlbS5jb25maWdJZCwgZXZlbnRNYW5hZ2VyKVxuICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0ZhaWxlZCB0byBzZWxlY3QgcXVlcnkgcmVzdWx0cydcbiAgICAgICAgICAgICAgICBzZXRTZWxlY3Rpb25FcnJvcihlcnJvck1lc3NhZ2UpXG4gICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdzZWxlY3Rpb24tZmFpbGVkJyxcbiAgICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvck1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICBlcnJvclN0YWNrOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICByZWNvcmRDb3VudDogcmVjb3JkSWRzVG9TZWxlY3QubGVuZ3RoXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkoKVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uICYmIHJlY29yZHNUb0Rpc3BsYXkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgLy8gQWxsIHJlY29yZHMgcmVtb3ZlZCAtIGNsZWFyIHNlbGVjdGlvblxuICAgICAgICAgIDsoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgYXdhaXQgY2xlYXJTZWxlY3Rpb25JbkRhdGFTb3VyY2VzKHByb3BzLndpZGdldElkLCBkc1RvVXNlLCB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0LCBncmFwaGljc0xheWVyKVxuICAgICAgICAgICAgICBoYXNTZWxlY3RlZFJlY29yZHNSZWYuY3VycmVudCA9IGZhbHNlXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBOb3RpZnkgV2lkZ2V0IHRoYXQgc2VsZWN0aW9uIGlzIGNsZWFyZWRcbiAgICAgICAgICAgICAgZGlzcGF0Y2hTZWxlY3Rpb25FdmVudChwcm9wcy53aWRnZXRJZCwgW10sIGRzVG9Vc2UsIHF1ZXJ5SXRlbS5jb25maWdJZCwgZXZlbnRNYW5hZ2VyKVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgICAgZXZlbnQ6ICdyZW1vdmUtbW9kZS1hbGwtcmVjb3Jkcy1yZW1vdmVkLXNlbGVjdGlvbi1jbGVhcmVkJyxcbiAgICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWRcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICAgIGV2ZW50OiAncmVtb3ZlLW1vZGUtY2xlYXItc2VsZWN0aW9uLWVycm9yJyxcbiAgICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSkoKVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBNYXJrIHRoYXQgcXVlcnkganVzdCBleGVjdXRlZCBCRUZPUkUgdXBkYXRpbmcgcmVzdWx0Q291bnRcbiAgICAgICAgLy8gVGhpcyBlbnN1cmVzIHRoZSBhdXRvLXN3aXRjaCB1c2VFZmZlY3Qgc2VlcyBxdWVyeUp1c3RFeGVjdXRlZFJlZi5jdXJyZW50ID09PSB0cnVlXG4gICAgICAgIHF1ZXJ5SnVzdEV4ZWN1dGVkUmVmLmN1cnJlbnQgPSB0cnVlXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgICAgICBldmVudDogJ3F1ZXJ5LWV4ZWN1dGVkLWZsYWctc2V0JyxcbiAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZCxcbiAgICAgICAgICByZXN1bHRzTW9kZSxcbiAgICAgICAgICByZWNvcmRzVG9EaXNwbGF5Q291bnQ6IHJlY29yZHNUb0Rpc3BsYXkubGVuZ3RoLFxuICAgICAgICAgIHF1ZXJ5UmVzdWx0Q291bnQsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgICAgICAvLyBVcGRhdGUgcmVzdWx0IGNvdW50IEZJUlNUIChiZWZvcmUgYW55IHBhcmVudCBjYWxsYmFja3MgdGhhdCBtaWdodCBjYXVzZSByZS1yZW5kZXJzKVxuICAgICAgICAvLyBGb3IgXCJBZGQgdG9cIiBhbmQgXCJSZW1vdmUgZnJvbVwiIG1vZGVzLCB1c2UgYWNjdW11bGF0ZWQvcmVtYWluaW5nIGNvdW50XG4gICAgICAgIC8vIEZvciBcIk5ld1wiIG1vZGUsIHVzZSBxdWVyeSBjb3VudFxuICAgICAgICBjb25zdCBuZXdSZXN1bHRDb3VudCA9IHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uIHx8IHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb25cbiAgICAgICAgICA/IHJlY29yZHNUb0Rpc3BsYXkubGVuZ3RoXG4gICAgICAgICAgOiBxdWVyeVJlc3VsdENvdW50XG4gICAgICAgIFxuICAgICAgICBzZXRSZXN1bHRDb3VudChuZXdSZXN1bHRDb3VudClcbiAgICAgICAgXG4gICAgICAgIC8vIElOU1RBTlQgVUkgRklYIChUaGUgXCJTcGlubmVyIEJ5cGFzc1wiKTogXG4gICAgICAgIC8vIERlY291cGxlIHRoZSBcIlJldHJpZXZpbmcgcmVzdWx0cy4uLlwiIHNwaW5uZXIgZnJvbSBhc3luY2hyb25vdXMgYWN0aW9ucyBsaWtlIHpvb21pbmcuIFxuICAgICAgICAvLyBCeSBjYWxsaW5nIHNldFN0YWdlKDEpIG5vdywgdGhlIHVzZXIgc2VlcyB0aGUgcmVzdWx0IGxpc3QgaW1tZWRpYXRlbHkgd2hpbGUgXG4gICAgICAgIC8vIHRoZSBtYXAgYW5pbWF0aW9uIGNvbnRpbnVlcyBpbiB0aGUgYmFja2dyb3VuZC5cbiAgICAgICAgc2V0U3RhZ2UoMSkgXG4gICAgICAgIFxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICAgICAgZXZlbnQ6ICdwZXJmLXByb2Nlc3NpbmctY29tcGxldGUnLFxuICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICBwcm9jZXNzaW5nRHVyYXRpb25NczogTWF0aC5yb3VuZChwZXJmb3JtYW5jZS5ub3coKSAtIHByb2Nlc3NpbmdTdGFydFRpbWUpLFxuICAgICAgICAgIHRvdGFsQ2hhaW5EdXJhdGlvbk1zOiBNYXRoLnJvdW5kKHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnRUaW1lKSxcbiAgICAgICAgICBuZXdSZXN1bHRDb3VudCxcbiAgICAgICAgICByZXN1bHRzTW9kZSxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfSlcblxuICAgICAgICAvLyBab29tIHRvIHJlY29yZHMgdXNpbmcgc2hhcmVkIHpvb20gdXRpbGl0eSAoY29uc2lzdGVudCBwYWRkaW5nIGJlaGF2aW9yKVxuICAgICAgICAvLyBVc2UgcnVudGltZSBwcmVmZXJlbmNlIGlmIHByb3ZpZGVkLCBvdGhlcndpc2UgZmFsbCBiYWNrIHRvIGNvbmZpZyBzZXR0aW5nIChkZWZhdWx0cyB0byB0cnVlKVxuICAgICAgICBjb25zdCBzaG91bGRab29tID0gcnVudGltZVpvb21Ub1NlbGVjdGVkICE9PSB1bmRlZmluZWQgXG4gICAgICAgICAgPyBydW50aW1lWm9vbVRvU2VsZWN0ZWQgXG4gICAgICAgICAgOiAocXVlcnlJdGVtLnpvb21Ub1NlbGVjdGVkICE9PSBmYWxzZSlcbiAgICAgICAgXG4gICAgICAgIC8vIFVzZSB0aGUgb3V0cHV0IERTIGFuZCBtZXJnZWQgcmVjb3Jkc1xuICAgICAgICBjb25zdCByZWNvcmRzRm9yWm9vbSA9IHJlY29yZHNUb0Rpc3BsYXkgfHwgcmVzdWx0LnJlY29yZHNcbiAgICAgICAgY29uc3QgZHNGb3Jab29tID0gZHNUb1VzZSB8fCBvdXRwdXREU1xuICAgICAgICBcbiAgICAgICAgaWYgKHJlY29yZHNGb3Jab29tICYmIHJlY29yZHNGb3Jab29tLmxlbmd0aCA+IDAgJiYgZHNGb3Jab29tICYmIHNob3VsZFpvb20pIHtcbiAgICAgICAgICAvLyBCVUctR1JBUEhJQ1MtMDAxOiBab29tIG9wZXJhdGlvbnMgZmFpbCB3aGVuIGdyYXBoaWNzIGxheWVyIGlzIGRpc2FibGVkXG4gICAgICAgICAgaWYgKCFtYXBWaWV3ICYmICF1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0KSB7XG4gICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0JVRycsIHtcbiAgICAgICAgICAgICAgYnVnSWQ6ICdCVUctR1JBUEhJQ1MtMDAxJyxcbiAgICAgICAgICAgICAgY2F0ZWdvcnk6ICdHUkFQSElDUycsXG4gICAgICAgICAgICAgIGV2ZW50OiAnem9vbS1vcGVyYXRpb24tZmFpbGVkLWdyYXBoaWNzLWxheWVyLWRpc2FibGVkJyxcbiAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICBvcGVyYXRpb246ICdxdWVyeS1yZXN1bHQtem9vbScsXG4gICAgICAgICAgICAgIHJlY29yZHNDb3VudDogcmVjb3Jkc0Zvclpvb20ubGVuZ3RoLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ1pvb20gb3BlcmF0aW9uIGF0dGVtcHRlZCBidXQgbWFwVmlldyBpcyB1bmF2YWlsYWJsZSBiZWNhdXNlIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQgaXMgZGlzYWJsZWQnLFxuICAgICAgICAgICAgICB3b3JrYXJvdW5kOiAnRW5hYmxlIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQgaW4gd2lkZ2V0IHNldHRpbmdzJyxcbiAgICAgICAgICAgICAgdGFyZ2V0UmVzb2x1dGlvbjogJ3IwMTkuMCdcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCB6b29tVG9SZWNvcmRzKHJlY29yZHNGb3Jab29tIGFzIEZlYXR1cmVEYXRhUmVjb3JkW10pXG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0ZhaWxlZCB0byB6b29tIHRvIGZlYXR1cmVzJ1xuICAgICAgICAgICAgc2V0Wm9vbUVycm9yKGVycm9yTWVzc2FnZSlcbiAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnWk9PTScsIHtcbiAgICAgICAgICAgICAgZXZlbnQ6ICd6b29tLWdvVG8tZXJyb3ItcXVlcnknLFxuICAgICAgICAgICAgICBlcnJvcjogZXJyb3JNZXNzYWdlLFxuICAgICAgICAgICAgICBlcnJvclN0YWNrOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWRcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZXhlY3V0aW5nIHpvb21Ub1JlY29yZHMnLCBlcnJvcilcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIE5PVyBjYWxsIG9uSGFzaFBhcmFtZXRlclVzZWQgQUZURVIgYWxsIFVJIHVwZGF0ZXMgYW5kIHpvb20gb3BlcmF0aW9ucyBjb21wbGV0ZVxuICAgICAgICAvLyBUaGlzIHByZXZlbnRzIHRoZSBwYXJlbnQgcmUtcmVuZGVyIGZyb20gaW50ZXJydXB0aW5nIHRoZSBwcm9taXNlIGNoYWluXG4gICAgICAgIC8vIFRoaXMgcHJldmVudHMgaGFzaCBwYXJhbWV0ZXJzIGZyb20gcmUtZXhlY3V0aW5nIHdoZW4gc3dpdGNoaW5nIHF1ZXJpZXNcbiAgICAgICAgaWYgKGluaXRpYWxJbnB1dFZhbHVlICYmIHF1ZXJ5SXRlbS5zaG9ydElkICYmIG9uSGFzaFBhcmFtZXRlclVzZWQpIHtcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gtRVhFQycsIHtcbiAgICAgICAgICAgIGV2ZW50OiAncXVlcnl0YXNrLWNhbGxpbmctb25oYXNocGFyYW1ldGVydXNlZCcsXG4gICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICBxdWVyeUl0ZW1Db25maWdJZDogcHJvcHMucXVlcnlJdGVtLmNvbmZpZ0lkLFxuICAgICAgICAgICAgcXVlcnlJdGVtU2hvcnRJZDogcXVlcnlJdGVtLnNob3J0SWQsXG4gICAgICAgICAgICBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgIH0pXG4gICAgICAgICAgXG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgICAgICAgZXZlbnQ6ICdoYXNoLXF1ZXJ5LWV4ZWN1dGVkLW5vdGlmeWluZy1wYXJlbnQnLFxuICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZCxcbiAgICAgICAgICAgIHF1ZXJ5SXRlbVNob3J0SWQ6IHF1ZXJ5SXRlbS5zaG9ydElkLFxuICAgICAgICAgICAgaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICB9KVxuICAgICAgICAgIG9uSGFzaFBhcmFtZXRlclVzZWQocXVlcnlJdGVtLnNob3J0SWQpXG4gICAgICAgICAgXG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNILUVYRUMnLCB7XG4gICAgICAgICAgICBldmVudDogJ3F1ZXJ5dGFzay1vbmhhc2hwYXJhbWV0ZXJ1c2VkLWNhbGxlZCcsXG4gICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICBxdWVyeUl0ZW1Db25maWdJZDogcHJvcHMucXVlcnlJdGVtLmNvbmZpZ0lkLFxuICAgICAgICAgICAgcXVlcnlJdGVtU2hvcnRJZDogcXVlcnlJdGVtLnNob3J0SWQsXG4gICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICB9KVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIEZpcmUgZXZlbnQgdG8gbm90aWZ5IEhlbHBlclNpbXBsZSB0aGF0IGhhc2ggcXVlcnkgZXhlY3V0aW9uIGlzIGNvbXBsZXRlXG4gICAgICAgICAgLy8gVGhpcyBhbGxvd3MgSGVscGVyU2ltcGxlIHRvIHRyYWNrIHdoaWNoIGhhc2ggcGFyYW1ldGVycyBoYXZlIGJlZW4gZXhlY3V0ZWRcbiAgICAgICAgICAvLyB0byBwcmV2ZW50IHJlLWV4ZWN1dGlvbiB3aGVuIHN3aXRjaGluZyBxdWVyaWVzXG4gICAgICAgICAgY29uc3QgaGFzaFBhcmFtID0gYCR7cXVlcnlJdGVtLnNob3J0SWR9PSR7aW5pdGlhbElucHV0VmFsdWV9YFxuICAgICAgICAgIGNvbnN0IGV4ZWN1dGVkRXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoUVVFUllTSU1QTEVfSEFTSF9RVUVSWV9FWEVDVVRFRF9FVkVOVCwge1xuICAgICAgICAgICAgZGV0YWlsOiB7XG4gICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgc2hvcnRJZDogcXVlcnlJdGVtLnNob3J0SWQsXG4gICAgICAgICAgICAgIHZhbHVlOiBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgICAgICAgICAgaGFzaFBhcmFtXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYnViYmxlczogdHJ1ZSxcbiAgICAgICAgICAgIGNhbmNlbGFibGU6IHRydWVcbiAgICAgICAgICB9KVxuICAgICAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KGV4ZWN1dGVkRXZlbnQpXG4gICAgICAgICAgXG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNILUVYRUMnLCB7XG4gICAgICAgICAgICBldmVudDogJ3F1ZXJ5dGFzay1oYXNoLXF1ZXJ5LWV4ZWN1dGVkLWV2ZW50LWRpc3BhdGNoZWQnLFxuICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZCxcbiAgICAgICAgICAgIHF1ZXJ5SXRlbVNob3J0SWQ6IHF1ZXJ5SXRlbS5zaG9ydElkLFxuICAgICAgICAgICAgaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICAgICAgICBoYXNoUGFyYW0sXG4gICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRydWUpXG4gICAgICB9KVxuICAgICAgLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgICAgIGV2ZW50OiAncXVlcnktY2hhaW4tZmFpbGVkLWRpYWdub3N0aWMnLFxuICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpLFxuICAgICAgICAgIGVycm9yU3RhY2s6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZCxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfSlcbiAgICAgICAgc2V0U3RhZ2UoMSkgLy8gUmV0dXJuIHRvIHJlc3VsdHMgb3IgZm9ybSBzdGFnZSBldmVuIG9uIGVycm9yXG4gICAgICB9KVxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICBpZiAoc3BhdGlhbEZpbHRlcj8ubGF5ZXIgJiYgc3BhdGlhbEZpbHRlcj8uY2xlYXJBZnRlckFwcGx5KSB7XG4gICAgICAgICAgc3BhdGlhbEZpbHRlci5sYXllci5yZW1vdmVBbGwoKVxuICAgICAgICB9XG4gICAgICAgIC8vIHNldFN0YWdlKDEpIC8vIFJlbW92ZWQgZnJvbSBoZXJlOyBub3cgY2FsbGVkIGluIHRoZSBtYWluIGNoYWluIGJlZm9yZSBiYWNrZ3JvdW5kIGFjdGlvbnNcbiAgICAgIH0pXG4gIH0sIFtjdXJyZW50SXRlbSwgcXVlcnlJdGVtLCBwcm9wcy53aWRnZXRJZCwgb3V0cHV0RFMsIHB1Ymxpc2hEYXRhQ2xlYXJlZE1zZywgY2xlYXJSZXN1bHQsIHJlc3VsdHNNb2RlLCBhY2N1bXVsYXRlZFJlY29yZHMsIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlLCBvbkNsZWFyR3JhcGhpY3NMYXllciwgbWFwVmlldywgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCwgem9vbVRvUmVjb3Jkc10pXG5cbiAgLy8gTGlzdGVuIGZvciBoYXNoIHZhbHVlIGNvbnZlcnNpb24gZXZlbnQgYW5kIGV4ZWN1dGUgcGVuZGluZyBxdWVyeVxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGhhbmRsZUhhc2hWYWx1ZUNvbnZlcnRlZCA9IChldmVudDogQ3VzdG9tRXZlbnQpID0+IHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgICAgZXZlbnQ6ICdoYXNoLXZhbHVlLWNvbnZlcnRlZC1ldmVudC1yZWNlaXZlZCcsXG4gICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgZXZlbnRXaWRnZXRJZDogZXZlbnQuZGV0YWlsPy53aWRnZXRJZCxcbiAgICAgICAgZXZlbnRDb25maWdJZDogZXZlbnQuZGV0YWlsPy5jb25maWdJZCxcbiAgICAgICAgbWF0Y2hlc1dpZGdldDogZXZlbnQuZGV0YWlsPy53aWRnZXRJZCA9PT0gcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgIGhhc1BlbmRpbmdRdWVyeTogISFwZW5kaW5nSGFzaFF1ZXJ5UmVmLmN1cnJlbnQsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgLy8gT25seSBwcm9jZXNzIGV2ZW50cyBmb3IgdGhpcyB3aWRnZXRcbiAgICAgIGlmIChldmVudC5kZXRhaWw/LndpZGdldElkICE9PSBwcm9wcy53aWRnZXRJZCkge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICAgICAgZXZlbnQ6ICdoYXNoLXZhbHVlLWNvbnZlcnRlZC1ldmVudC1pZ25vcmVkLXdyb25nLXdpZGdldCcsXG4gICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgIGV2ZW50V2lkZ2V0SWQ6IGV2ZW50LmRldGFpbD8ud2lkZ2V0SWQsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH0pXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAocGVuZGluZ0hhc2hRdWVyeVJlZi5jdXJyZW50KSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgICAgICBldmVudDogJ2hhc2gtdmFsdWUtY29udmVydGVkLWV4ZWN1dGluZy1wZW5kaW5nLXF1ZXJ5JyxcbiAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgY29uZmlnSWQ6IGV2ZW50LmRldGFpbC5jb25maWdJZCxcbiAgICAgICAgICBpbml0aWFsSW5wdXRWYWx1ZTogZXZlbnQuZGV0YWlsLmluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9KVxuICAgICAgICBcbiAgICAgICAgY29uc3QgeyBzcWxFeHByLCBzcGF0aWFsRmlsdGVyLCBydW50aW1lWm9vbVRvU2VsZWN0ZWQgfSA9IHBlbmRpbmdIYXNoUXVlcnlSZWYuY3VycmVudFxuICAgICAgICBwZW5kaW5nSGFzaFF1ZXJ5UmVmLmN1cnJlbnQgPSBudWxsXG4gICAgICAgIFxuICAgICAgICAvLyBFeGVjdXRlIHRoZSBwZW5kaW5nIHF1ZXJ5IG5vdyB0aGF0IHZhbHVlIGlzIGNvbnZlcnRlZFxuICAgICAgICAvLyBVc2Ugc2V0VGltZW91dCB0byBlbnN1cmUgdGhpcyBoYXBwZW5zIGFmdGVyIHRoZSBjdXJyZW50IGV2ZW50IGxvb3BcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgaGFuZGxlRm9ybVN1Ym1pdEludGVybmFsKHNxbEV4cHIsIHNwYXRpYWxGaWx0ZXIsIHJ1bnRpbWVab29tVG9TZWxlY3RlZClcbiAgICAgICAgfSwgMClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIENvbnZlcnNpb24gaGFwcGVuZWQgYmVmb3JlIGhhbmRsZUZvcm1TdWJtaXQgd2FzIGNhbGxlZFxuICAgICAgICAvLyBhcHBseVF1ZXJ5KCkgaXMgY2FsbGVkIGRpcmVjdGx5IGZyb20gaGFuZGxlU3FsRXhwck9iakNoYW5nZSBpbiBxdWVyeS10YXNrLWZvcm0udHN4XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgICAgICBldmVudDogJ2hhc2gtdmFsdWUtY29udmVydGVkLWV2ZW50LXJlY2VpdmVkLW5vLXBlbmRpbmctcXVlcnknLFxuICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICBjb25maWdJZDogZXZlbnQuZGV0YWlsPy5jb25maWdJZCxcbiAgICAgICAgICBpbml0aWFsSW5wdXRWYWx1ZTogZXZlbnQuZGV0YWlsPy5pbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgICAgICBub3RlOiAnQ29udmVyc2lvbiBoYXBwZW5lZCBiZWZvcmUgaGFuZGxlRm9ybVN1Ym1pdCAtIGFwcGx5UXVlcnkoKSBjYWxsZWQgZGlyZWN0bHkgZnJvbSBmb3JtIGNvbXBvbmVudCcsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoUVVFUllTSU1QTEVfSEFTSF9WQUxVRV9DT05WRVJURURfRVZFTlQsIGhhbmRsZUhhc2hWYWx1ZUNvbnZlcnRlZCBhcyBFdmVudExpc3RlbmVyKVxuICAgIFxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFFVRVJZU0lNUExFX0hBU0hfVkFMVUVfQ09OVkVSVEVEX0VWRU5ULCBoYW5kbGVIYXNoVmFsdWVDb252ZXJ0ZWQgYXMgRXZlbnRMaXN0ZW5lcilcbiAgICB9XG4gIH0sIFtwcm9wcy53aWRnZXRJZCwgaGFuZGxlRm9ybVN1Ym1pdEludGVybmFsXSlcblxuICAvKipcbiAgICogSGFuZGxlcyBmb3JtIHN1Ym1pc3Npb24gd2hlbiB1c2VyIGNsaWNrcyBcIkFwcGx5XCIgYnV0dG9uLlxuICAgKiBDaGVja3MgaWYgaGFzaCB2YWx1ZSBuZWVkcyBjb252ZXJzaW9uIGFuZCB3YWl0cyBmb3IgZXZlbnQgaWYgbmVlZGVkLlxuICAgKiBcbiAgICogQHBhcmFtIHNxbEV4cHIgLSBUaGUgU1FMIGV4cHJlc3Npb24gZm9yIGF0dHJpYnV0ZSBmaWx0ZXJpbmdcbiAgICogQHBhcmFtIHNwYXRpYWxGaWx0ZXIgLSBUaGUgc3BhdGlhbCBmaWx0ZXIgb2JqZWN0XG4gICAqIEBwYXJhbSBydW50aW1lWm9vbVRvU2VsZWN0ZWQgLSBPcHRpb25hbCBydW50aW1lIG92ZXJyaWRlIGZvciB6b29tLXRvLXNlbGVjdGVkIGJlaGF2aW9yXG4gICAqL1xuICBjb25zdCBoYW5kbGVGb3JtU3VibWl0ID0gUmVhY3QudXNlQ2FsbGJhY2soYXN5bmMgKHNxbEV4cHI6IElNU3FsRXhwcmVzc2lvbiwgc3BhdGlhbEZpbHRlcjogU3BhdGlhbEZpbHRlck9iaiwgcnVudGltZVpvb21Ub1NlbGVjdGVkPzogYm9vbGVhbikgPT4ge1xuICAgIC8vIExPRyBBVCBUSEUgVkVSWSBTVEFSVCAtIGJlZm9yZSBhbnkgY2hlY2tzXG4gICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgZXZlbnQ6ICdoYW5kbGVGb3JtU3VibWl0LWNhbGxlZCcsXG4gICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICBzcWxFeHByRXhpc3RzOiAhIXNxbEV4cHIsXG4gICAgICBmaXJzdFBhcnRFeGlzdHM6ICEhc3FsRXhwcj8ucGFydHM/LlswXSxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgLy8gQ2hlY2sgaWYgdGhpcyBpcyBhIGhhc2gtdHJpZ2dlcmVkIHF1ZXJ5IHdpdGggdW5jb252ZXJ0ZWQgdmFsdWUgKHN0cmluZyBmb3JtYXQpXG4gICAgY29uc3QgZmlyc3RQYXJ0ID0gc3FsRXhwcj8ucGFydHM/LlswXVxuICAgIGNvbnN0IHZhbHVlID0gZmlyc3RQYXJ0Py50eXBlID09PSAnU0lOR0xFJyA/IChmaXJzdFBhcnQgYXMgYW55KS52YWx1ZU9wdGlvbnM/LnZhbHVlIDogbnVsbFxuICAgIGNvbnN0IGlzU3RyaW5nVmFsdWUgPSB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnICYmIHZhbHVlLmxlbmd0aCA+IDBcbiAgICBjb25zdCBpc0FycmF5VmFsdWUgPSBBcnJheS5pc0FycmF5KHZhbHVlKSAmJiB2YWx1ZS5sZW5ndGggPiAwXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgZXZlbnQ6ICdoYW5kbGVGb3JtU3VibWl0LWNoZWNraW5nLWNvbnZlcnNpb24nLFxuICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICB2YWx1ZVR5cGU6IHR5cGVvZiB2YWx1ZSxcbiAgICAgIGlzU3RyaW5nVmFsdWUsXG4gICAgICBpc0FycmF5VmFsdWUsXG4gICAgICB2YWx1ZTogQXJyYXkuaXNBcnJheSh2YWx1ZSkgPyB2YWx1ZSA6IHZhbHVlLFxuICAgICAgd2lsbENoZWNrV2FpdENvbmRpdGlvbjogaXNTdHJpbmdWYWx1ZSAmJiAhaXNBcnJheVZhbHVlICYmIGluaXRpYWxJbnB1dFZhbHVlICYmIHZhbHVlID09PSBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgLy8gSWYgdmFsdWUgaXMgc3RyaW5nIChub3QgY29udmVydGVkIHRvIGFycmF5IHlldCksIHdhaXQgZm9yIGNvbnZlcnNpb24gZXZlbnRcbiAgICAvLyBUaGlzIGhhcHBlbnMgd2hlbiBoYXNoIHZhbHVlIGNoYW5nZXMgZm9yIHNhbWUgY29uZmlnSWRcbiAgICBpZiAoaXNTdHJpbmdWYWx1ZSAmJiAhaXNBcnJheVZhbHVlICYmIGluaXRpYWxJbnB1dFZhbHVlICYmIHZhbHVlID09PSBpbml0aWFsSW5wdXRWYWx1ZSkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgICBldmVudDogJ2hhbmRsZUZvcm1TdWJtaXQtd2FpdGluZy1mb3ItY29udmVyc2lvbicsXG4gICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgY3VycmVudFZhbHVlOiB2YWx1ZSxcbiAgICAgICAgaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgLy8gU3RvcmUgcGVuZGluZyBxdWVyeVxuICAgICAgcGVuZGluZ0hhc2hRdWVyeVJlZi5jdXJyZW50ID0ge1xuICAgICAgICBzcWxFeHByLFxuICAgICAgICBzcGF0aWFsRmlsdGVyLFxuICAgICAgICBydW50aW1lWm9vbVRvU2VsZWN0ZWRcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gU2V0IGEgdGltZW91dCB0byBwcmV2ZW50IGluZmluaXRlIHdhaXRpbmcgKGZhbGxiYWNrIGFmdGVyIDIgc2Vjb25kcylcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBpZiAocGVuZGluZ0hhc2hRdWVyeVJlZi5jdXJyZW50KSB7XG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgICAgICAgZXZlbnQ6ICdoYW5kbGVGb3JtU3VibWl0LWNvbnZlcnNpb24tdGltZW91dC1leGVjdXRpbmctYW55d2F5JyxcbiAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgIH0pXG4gICAgICAgICAgXG4gICAgICAgICAgY29uc3QgeyBzcWxFeHByLCBzcGF0aWFsRmlsdGVyLCBydW50aW1lWm9vbVRvU2VsZWN0ZWQgfSA9IHBlbmRpbmdIYXNoUXVlcnlSZWYuY3VycmVudFxuICAgICAgICAgIHBlbmRpbmdIYXNoUXVlcnlSZWYuY3VycmVudCA9IG51bGxcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBFeGVjdXRlIGFueXdheSAoZmFsbGJhY2spXG4gICAgICAgICAgaGFuZGxlRm9ybVN1Ym1pdEludGVybmFsKHNxbEV4cHIsIHNwYXRpYWxGaWx0ZXIsIHJ1bnRpbWVab29tVG9TZWxlY3RlZClcbiAgICAgICAgfVxuICAgICAgfSwgMjAwMClcbiAgICAgIFxuICAgICAgcmV0dXJuIC8vIEV4aXQgZWFybHksIHdpbGwgZXhlY3V0ZSB3aGVuIGV2ZW50IGZpcmVzXG4gICAgfVxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgIGV2ZW50OiAnaGFuZGxlRm9ybVN1Ym1pdC1leGVjdXRpbmctaW1tZWRpYXRlbHknLFxuICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgcmVhc29uOiBpc1N0cmluZ1ZhbHVlID8gJ25vdC1oYXNoLXRyaWdnZXJlZCcgOiAoaXNBcnJheVZhbHVlID8gJ2FscmVhZHktY29udmVydGVkJyA6ICduby12YWx1ZScpLFxuICAgICAgdmFsdWVUeXBlOiB0eXBlb2YgdmFsdWUsXG4gICAgICBpc1N0cmluZ1ZhbHVlLFxuICAgICAgaXNBcnJheVZhbHVlLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICAvLyBWYWx1ZSBpcyBhbHJlYWR5IGNvbnZlcnRlZCBvciBub3QgaGFzaC10cmlnZ2VyZWQsIGV4ZWN1dGUgaW1tZWRpYXRlbHlcbiAgICBoYW5kbGVGb3JtU3VibWl0SW50ZXJuYWwoc3FsRXhwciwgc3BhdGlhbEZpbHRlciwgcnVudGltZVpvb21Ub1NlbGVjdGVkKVxuICB9LCBbcHJvcHMud2lkZ2V0SWQsIGluaXRpYWxJbnB1dFZhbHVlLCBoYW5kbGVGb3JtU3VibWl0SW50ZXJuYWxdKVxuXG4gIGNvbnN0IHsgdXNlQXR0cmlidXRlRmlsdGVyLCBzcWxFeHByT2JqLCB1c2VTcGF0aWFsRmlsdGVyLCBzcGF0aWFsRmlsdGVyVHlwZXMsIHNwYXRpYWxJbmNsdWRlUnVudGltZURhdGEsIHNwYXRpYWxSZWxhdGlvblVzZURhdGFTb3VyY2VzfSA9IGN1cnJlbnRJdGVtXG4gIGNvbnN0IHNob3dBdHRyaWJ1dGVGaWx0ZXIgPSB1c2VBdHRyaWJ1dGVGaWx0ZXIgJiYgc3FsRXhwck9iaiAhPSBudWxsXG4gIGNvbnN0IHNob3dTcGF0aWFsRmlsdGVyID0gc3BhdGlhbEZpbHRlckVuYWJsZWQgJiYgdXNlU3BhdGlhbEZpbHRlciAmJiAoc3BhdGlhbEZpbHRlclR5cGVzLmxlbmd0aCA+IDAgfHwgc3BhdGlhbEluY2x1ZGVSdW50aW1lRGF0YSB8fCBzcGF0aWFsUmVsYXRpb25Vc2VEYXRhU291cmNlcz8ubGVuZ3RoID4gMClcblxuICAvLyBERVRFQ1QgU1dJVENIIElOIFJFTkRFUlxuICBjb25zdCBpc1N3aXRjaGluZ1F1ZXJpZXMgPSBwcmV2aW91c0NvbmZpZ0lkUmVmLmN1cnJlbnQgIT09IHF1ZXJ5SXRlbS5jb25maWdJZFxuICBjb25zdCBpc1ZpcnR1YWxDbGVhckFjdGl2ZSA9IGlzU3dpdGNoaW5nUXVlcmllcyAmJiByZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb25cbiAgXG4gIC8vIEZJWCAocjAxOC45Nyk6IFVzZSBhY2N1bXVsYXRlZFJlY29yZHMgYXMgdW5pdmVyc2FsIHNvdXJjZSBvZiB0cnV0aCBhY3Jvc3MgQUxMIG1vZGVzXG4gIC8vIFRoaXMgZW5zdXJlcyB0YWIgY291bnQgdXBkYXRlcyBjb3JyZWN0bHkgd2hlbiByZWNvcmRzIGFyZSByZW1vdmVkIGluIEFOWSBtb2RlIChOZXcsIEFkZCwgUmVtb3ZlKVxuICAvLyBhY2N1bXVsYXRlZFJlY29yZHMgaXMgbm93IHN5bmNlZCBpbiBhbGwgbW9kZXMgKHNlZSBxdWVyeS1yZXN1bHQudHN4IHIwMTguOTcgZml4KVxuICBjb25zdCBpc0FjY3VtdWxhdGlvbk1vZGUgPSByZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbiB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvblxuICBcbiAgLy8gVXNlIHRoZXNlIFwiZWZmZWN0aXZlXCIgdmFsdWVzIGZvciB0aGUgVUlcbiAgLy8gUHJlZmVyIGFjY3VtdWxhdGVkUmVjb3JkcyB3aGVuIGF2YWlsYWJsZSAoc3luY2VkIGluIGFsbCBtb2RlcyksIGZhbGxiYWNrIHRvIHJlY29yZHNSZWYgZm9yIGluaXRpYWwgcXVlcnkgcmVzdWx0c1xuICBjb25zdCBlZmZlY3RpdmVSZWNvcmRzID0gaXNWaXJ0dWFsQ2xlYXJBY3RpdmUgPyBbXSA6IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAoYWNjdW11bGF0ZWRSZWNvcmRzICYmIGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwKSA/IGFjY3VtdWxhdGVkUmVjb3JkcyA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgIChyZWNvcmRzUmVmLmN1cnJlbnQgfHwgW10pXG4gIFxuICAvLyBGSVggKHIwMTguOTUpOiBVc2UgZWZmZWN0aXZlUmVjb3Jkcy5sZW5ndGggdG8gcmVmbGVjdCByZWFsLXRpbWUgY291bnQgdXBkYXRlcyB3aGVuIHJlY29yZHMgYXJlIHJlbW92ZWRcbiAgY29uc3QgZWZmZWN0aXZlUmVzdWx0Q291bnQgPSBpc1ZpcnR1YWxDbGVhckFjdGl2ZSA/IDAgOiBlZmZlY3RpdmVSZWNvcmRzLmxlbmd0aFxuICBcbiAgLy8gRElBR05PU1RJQzogTG9nIHdoZW4gd2UncmUgdXNpbmcgYWNjdW11bGF0ZWRSZWNvcmRzIHZzIHJhdyByZWNvcmRzXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGVmZmVjdGl2ZVJlY29yZHMubGVuZ3RoID4gMCB8fCBlZmZlY3RpdmVSZXN1bHRDb3VudCA+IDApIHtcbiAgICAgIGNvbnN0IHVzaW5nQWNjdW11bGF0ZWQgPSBhY2N1bXVsYXRlZFJlY29yZHMgJiYgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ2VmZmVjdGl2ZVJlY29yZHMtY2FsY3VsYXRpb24nLFxuICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgICBpc0FjY3VtdWxhdGlvbk1vZGUsXG4gICAgICAgIHVzaW5nQWNjdW11bGF0ZWQsXG4gICAgICAgIGVmZmVjdGl2ZVJlY29yZHNDb3VudDogZWZmZWN0aXZlUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgIGVmZmVjdGl2ZVJlc3VsdENvdW50LFxuICAgICAgICByYXdSZWNvcmRzQ291bnQ6IHJlY29yZHNSZWYuY3VycmVudD8ubGVuZ3RoIHx8IDAsXG4gICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiBhY2N1bXVsYXRlZFJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICB0YWJDb3VudFdpbGxTaG93OiBlZmZlY3RpdmVSZXN1bHRDb3VudCxcbiAgICAgICAgbm90ZTogdXNpbmdBY2N1bXVsYXRlZCA/ICdyMDE4Ljk3OiBVc2luZyBhY2N1bXVsYXRlZFJlY29yZHMgKHVuaXZlcnNhbCBzb3VyY2Ugb2YgdHJ1dGgpJyA6ICdVc2luZyByYXcgcXVlcnkgcmVjb3JkcyAoaW5pdGlhbCBsb2FkKScsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICB9XG4gIH0sIFtlZmZlY3RpdmVSZWNvcmRzLCBlZmZlY3RpdmVSZXN1bHRDb3VudCwgaXNBY2N1bXVsYXRpb25Nb2RlLCBhY2N1bXVsYXRlZFJlY29yZHMsIHJlc3VsdHNNb2RlLCBwcm9wcy53aWRnZXRJZF0pXG5cbiAgLy8gQ3JlYXRlIGEgdW5pcXVlIGtleSBmb3IgdGhlIGN1cnJlbnQgcXVlcnkgcmVzdWx0IHNldCB0byBoZWxwIEUyRSB0ZXN0cyBkZXRlY3QgZnJlc2ggZGF0YVxuICBjb25zdCByZXN1bHRRdWVyeUtleSA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgIHJldHVybiBgJHtxdWVyeUl0ZW0uY29uZmlnSWR9XyR7RGF0ZS5ub3coKX1gXG4gIH0sIFtxdWVyeUl0ZW0uY29uZmlnSWQsIHJlc3VsdENvdW50XSlcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdxdWVyeS10YXNrIGgtMTAwJywgY2xhc3NOYW1lLCB7IHdyYXBwZWQ6IHdyYXBwZWRJblBvcHBlciB9KX0gXG4gICAgICBkYXRhLXJlc3VsdC1xdWVyeS1rZXk9e3Jlc3VsdFF1ZXJ5S2V5fVxuICAgICAgY3NzPXtjc3NgXG4gICAgICAke3N0eWxlfVxuICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgIGB9PlxuICAgICAgPERhdGFTb3VyY2VDb21wb25lbnQgdXNlRGF0YVNvdXJjZT17dXNlT3V0cHV0RHN9IG9uRGF0YVNvdXJjZUNyZWF0ZWQ9e2hhbmRsZU91dHB1dERhdGFTb3VyY2VDcmVhdGVkfSBvbkRhdGFTb3VyY2VJbmZvQ2hhbmdlPXtoYW5kbGVPdXRwdXREYXRhU291cmNlSW5mb0NoYW5nZX0vPlxuICAgICAgXG4gICAgICB7LyogVGFiIE5hdmlnYXRpb24gLSBNb3ZlZCB0byB0b3AgKi99XG4gICAgICA8VGFic1xuICAgICAgICB2YWx1ZT17YWN0aXZlVGFifVxuICAgICAgICBvbkNoYW5nZT17KGlkKSA9PiBoYW5kbGVUYWJDaGFuZ2UoaWQgYXMgJ3F1ZXJ5JyB8ICdyZXN1bHRzJyl9XG4gICAgICAgIGZpbGw9e3RydWV9XG4gICAgICAgIHR5cGU9J3VuZGVybGluZSdcbiAgICAgICAga2VlcE1vdW50PXt0cnVlfVxuICAgICAgICBjc3M9e2Nzc2BcbiAgICAgICAgICBmbGV4OiAxO1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICAgIG1pbi1oZWlnaHQ6IDA7XG4gICAgICAgIGB9XG4gICAgICA+XG4gICAgICAgIDxUYWJcbiAgICAgICAgICBpZD0ncXVlcnknXG4gICAgICAgICAgdGl0bGU9e2dldEkxOG5NZXNzYWdlKCdxdWVyeVRhYicpfVxuICAgICAgICA+XG4gICAgICAgICAgPGRpdiBcbiAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcygncXVlcnktdGFza19fY29udGVudCcsIHtcbiAgICAgICAgICAgICAgW0ZPQ1VTQUJMRV9DT05UQUlORVJfQ0xBU1NdOiBpc0luUG9wcGVyICYmIGFjdGl2ZVRhYiA9PT0gJ3F1ZXJ5J1xuICAgICAgICAgICAgfSl9IFxuICAgICAgICAgICAgY3NzPXtjc3NgXG4gICAgICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDA7XG4gICAgICAgICAgICAgIHBhZGRpbmctdG9wOiAwICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICBgfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIHsvKiBIZWFkZXIgd2l0aCBiYWNrIGJ1dHRvbiBhbmQgcXVlcnkgbGFiZWwgLSBRdWVyeSB0YWIgb25seSAqL31cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdxdWVyeS1mb3JtX19oZWFkZXIgbXgtNCBhbGlnbi1pdGVtcy1jZW50ZXInLCB7ICdpbi1wb3BwZXInOiBpc0luUG9wcGVyIH0pfSBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgcGFkZGluZzogNnB4IDA7XG4gICAgICAgICAgICAgIHBhZGRpbmctdG9wOiA4cHg7XG4gICAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1zeXMtY29sb3ItZGl2aWRlci1zZWNvbmRhcnkpO1xuICAgICAgICAgICAgICBmbGV4LXNocmluazogMDtcbiAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17Y2xhc3NOYW1lcygnbmF2LWFjdGlvbiBhbGlnbi1pdGVtcy1jZW50ZXInLCB7ICdkLW5vbmUnOiB3cmFwcGVkSW5Qb3BwZXIgfSl9IGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgIGZsZXg6IDEgMSAwO1xuICAgICAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgICAgICAgIGdhcDogNHB4O1xuICAgICAgICAgICAgICAgIC5qaW11LWJ0biB7XG4gICAgICAgICAgICAgICAgICBtaW4td2lkdGg6IDI2cHg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ3AtMCBtci0yJywgeyAnZC1ub25lJzogdG90YWwgPT09IDEgfHwgIW9uTmF2QmFjayB9KX1cbiAgICAgICAgICAgICAgICAgIHNpemU9J3NtJ1xuICAgICAgICAgICAgICAgICAgdHlwZT0ndGVydGlhcnknXG4gICAgICAgICAgICAgICAgICBpY29uXG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXtvbk5hdkJhY2t9XG4gICAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPXtnZXRJMThuTWVzc2FnZSgnYmFjaycpfVxuICAgICAgICAgICAgICAgICAgcmVmPXtiYWNrQnRuUmVmfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIDxBcnJvd0xlZnRPdXRsaW5lZCBhdXRvRmxpcC8+XG4gICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgPFF1ZXJ5VGFza0xhYmVsIGljb249e2ljb259IG5hbWU9e2Rpc3BsYXlMYWJlbCA/IG5hbWUgOiAnJ30gLz5cbiAgICAgICAgICAgICAgICB7LyogSGFzaCBwYXJhbWV0ZXIgaW5mbyBidXR0b24gLSBzaG93cyBxdWVyaWVzIGZyb20gc2FtZSBsYXllciB3aXRoIHNob3J0SWRzICovfVxuICAgICAgICAgICAgICAgIHsoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgaWYgKCFxdWVyeUl0ZW1zIHx8IHF1ZXJ5SXRlbXMubGVuZ3RoIDw9IDEpIHJldHVybiBudWxsXG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIC8vIEdldCBjdXJyZW50IHF1ZXJ5J3Mgb3JpZ2luIGRhdGEgc291cmNlIElEXG4gICAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50T3JpZ2luRFNJZCA9IHF1ZXJ5SXRlbS51c2VEYXRhU291cmNlPy5kYXRhU291cmNlSWRcbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgaWYgKCFjdXJyZW50T3JpZ2luRFNJZCkgcmV0dXJuIG51bGxcbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgLy8gRmluZCBhbGwgcXVlcmllcyBmcm9tIHRoZSBzYW1lIG9yaWdpbiBkYXRhIHNvdXJjZSB0aGF0IGhhdmUgc2hvcnRJZHNcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHNhbWVMYXllclF1ZXJpZXMgPSBxdWVyeUl0ZW1zLmZpbHRlcihpdGVtID0+IFxuICAgICAgICAgICAgICAgICAgICBpdGVtLnVzZURhdGFTb3VyY2U/LmRhdGFTb3VyY2VJZCA9PT0gY3VycmVudE9yaWdpbkRTSWQgJiYgXG4gICAgICAgICAgICAgICAgICAgIGl0ZW0uc2hvcnRJZCAmJiBcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5zaG9ydElkLnRyaW0oKSAhPT0gJydcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgLy8gT25seSBzaG93IGluZm8gYnV0dG9uIGlmIHRoZXJlIGFyZSBxdWVyaWVzIHdpdGggc2hvcnRJZHNcbiAgICAgICAgICAgICAgICAgIGlmIChzYW1lTGF5ZXJRdWVyaWVzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIG51bGxcbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgLy8gQnVpbGQgdG9vbHRpcCBjb250ZW50XG4gICAgICAgICAgICAgICAgICBjb25zdCBxdWVyeUxpbmVzID0gc2FtZUxheWVyUXVlcmllcy5tYXAoaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHF1ZXJ5TmFtZSA9IGdldFF1ZXJ5RGlzcGxheU5hbWUoaXRlbSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGAke3F1ZXJ5TmFtZX06ICMke2l0ZW0uc2hvcnRJZH09dmFsdWUgb3IgPyR7aXRlbS5zaG9ydElkfT12YWx1ZWBcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHRvb2x0aXBUaXRsZSA9IGBUaGlzIGxheWVyIGNhbiBiZSBzZWFyY2hlZCB1c2luZyB0aGUgc2hvcnRJZHMgJHtzYW1lTGF5ZXJRdWVyaWVzLm1hcChxID0+IHEuc2hvcnRJZCkuam9pbignIGFuZCAnKX0gdXNpbmcgI3Nob3J0SWQ9dmFsdWUgb3IgP3Nob3J0SWQ9dmFsdWUgaW4gdGhlIFVSTC5cXG5cXG4ke3F1ZXJ5TGluZXMuam9pbignXFxuJyl9YFxuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICA8VG9vbHRpcCBcbiAgICAgICAgICAgICAgICAgICAgICBwbGFjZW1lbnQ9J2JvdHRvbScgXG4gICAgICAgICAgICAgICAgICAgICAgY3NzPXtjc3Ngd2hpdGUtc3BhY2U6IHByZS1saW5lO2B9IFxuICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXt0b29sdGlwVGl0bGV9XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIFxuICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZT0nc20nIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWNvbiBcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9J3RlcnRpYXJ5JyBcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9J0hhc2ggcGFyYW1ldGVyIHNlYXJjaCBpbmZvcm1hdGlvbidcbiAgICAgICAgICAgICAgICAgICAgICAgIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgICAgICAgICAgICBmbGV4LXNocmluazogMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEluZm9PdXRsaW5lZCBjb2xvcj0ndmFyKC0tc3lzLWNvbG9yLXByaW1hcnktbWFpbiknIHNpemU9J3MnLz5cbiAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgPC9Ub29sdGlwPlxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIH0pKCl9XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICB7ZWZmZWN0aXZlUmVzdWx0Q291bnQgPiAwICYmIChcbiAgICAgICAgICAgICAgICA8VG9vbHRpcCB0aXRsZT17Z2V0STE4bk1lc3NhZ2UoJ2NsZWFyUmVzdWx0Jyl9IHBsYWNlbWVudD0nYm90dG9tJz5cbiAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgcmVmPXtjbGVhclJlc3VsdEJ0blJlZn1cbiAgICAgICAgICAgICAgICAgICAgc2l6ZT0nc20nXG4gICAgICAgICAgICAgICAgICAgIHR5cGU9J3RlcnRpYXJ5J1xuICAgICAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPXtnZXRJMThuTWVzc2FnZSgnY2xlYXJSZXN1bHQnKX1cbiAgICAgICAgICAgICAgICAgICAgaWNvblxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J21sLWF1dG8gcHktMCdcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4geyBjbGVhclJlc3VsdCgndXNlci10cmFzaC1jbGljaycpIH19XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxUcmFzaE91dGxpbmVkIC8+XG4gICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICA8L1Rvb2x0aXA+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIHsvKiBTZWFyY2ggTGF5ZXIgLyBHcm91cCBkcm9wZG93bnMgLSBzaG93IGJhc2VkIG9uIGdyb3VwaW5nICovfVxuICAgICAgICAgICAgeygoKSA9PiB7XG4gICAgICAgICAgICAgIC8vIE9ubHkgc2hvdyBkcm9wZG93bnMgaWYgbXVsdGlwbGUgcXVlcmllcyBleGlzdFxuICAgICAgICAgICAgICBpZiAoIXF1ZXJ5SXRlbXMgfHwgcXVlcnlJdGVtcy5sZW5ndGggPD0gMSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIEJ1aWxkIGZsYXQgbGlzdCBvZiBhbGwgcXVlcmllcyB3aXRoIHRoZWlyIGRpc3BsYXkgaW5mb1xuICAgICAgICAgICAgICAvLyBGb3IgZ3JvdXBlZCBxdWVyaWVzLCB1c2UgZ3JvdXAgZGlzcGxheSBuYW1lIChvbmx5IHNob3cgb25jZSBwZXIgZ3JvdXApXG4gICAgICAgICAgICAgIGNvbnN0IHF1ZXJ5T3B0aW9uczogQXJyYXk8e1xuICAgICAgICAgICAgICAgIGNvbmZpZ0lkOiBzdHJpbmdcbiAgICAgICAgICAgICAgICBkaXNwbGF5TmFtZTogc3RyaW5nXG4gICAgICAgICAgICAgICAgZ3JvdXBJZDogc3RyaW5nIHwgbnVsbFxuICAgICAgICAgICAgICAgIGluZGV4OiBudW1iZXJcbiAgICAgICAgICAgICAgfT4gPSBbXVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gVHJhY2sgd2hpY2ggZ3JvdXBzIHdlJ3ZlIGFscmVhZHkgYWRkZWQgdG8gYXZvaWQgZHVwbGljYXRlc1xuICAgICAgICAgICAgICBjb25zdCBhZGRlZEdyb3VwcyA9IG5ldyBTZXQ8c3RyaW5nPigpXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICBxdWVyeUl0ZW1zLmZvckVhY2goKGl0ZW0sIGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChpdGVtLmdyb3VwSWQpIHtcbiAgICAgICAgICAgICAgICAgIC8vIEZvciBncm91cGVkIHF1ZXJpZXMsIHVzZSBncm91cCBkaXNwbGF5IG5hbWUgKG9ubHkgYWRkIG9uY2UgcGVyIGdyb3VwKVxuICAgICAgICAgICAgICAgICAgaWYgKCFhZGRlZEdyb3Vwcy5oYXMoaXRlbS5ncm91cElkKSkge1xuICAgICAgICAgICAgICAgICAgICBhZGRlZEdyb3Vwcy5hZGQoaXRlbS5ncm91cElkKVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBncm91cERpc3BsYXlOYW1lID0gZ3JvdXBzPy5baXRlbS5ncm91cElkXT8uZGlzcGxheU5hbWUgfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBzPy5baXRlbS5ncm91cElkXT8uaXRlbXNbMF0/Lm5hbWUgfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5uYW1lIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBHcm91cCAke2l0ZW0uZ3JvdXBJZH1gXG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5T3B0aW9ucy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICBjb25maWdJZDogaXRlbS5jb25maWdJZCxcbiAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5TmFtZTogZ3JvdXBEaXNwbGF5TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICBncm91cElkOiBpdGVtLmdyb3VwSWQsXG4gICAgICAgICAgICAgICAgICAgICAgaW5kZXg6IGlkeFxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAvLyBVbmdyb3VwZWQgcXVlcnkgLSB1c2UgaXRlbS5uYW1lIGZvciBmaXJzdCBkcm9wZG93biAobm90IHNlYXJjaEFsaWFzL2ppbXVGaWVsZE5hbWUpXG4gICAgICAgICAgICAgICAgICBxdWVyeU9wdGlvbnMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ0lkOiBpdGVtLmNvbmZpZ0lkLFxuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5TmFtZTogaXRlbS5uYW1lIHx8IGdldFF1ZXJ5RGlzcGxheU5hbWUoaXRlbSksXG4gICAgICAgICAgICAgICAgICAgIGdyb3VwSWQ6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIGluZGV4OiBpZHhcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gRGV0ZXJtaW5lIGN1cnJlbnRseSBzZWxlY3RlZCBxdWVyeVxuICAgICAgICAgICAgICBjb25zdCBjdXJyZW50UXVlcnlJdGVtID0gcXVlcnlJdGVtXG4gICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRRdWVyeUdyb3VwSWQgPSBjdXJyZW50UXVlcnlJdGVtLmdyb3VwSWQgfHwgbnVsbFxuICAgICAgICAgICAgICBjb25zdCBpc0dyb3VwZWRRdWVyeSA9IGN1cnJlbnRRdWVyeUdyb3VwSWQgIT09IG51bGxcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIEZpbmQgdGhlIG9wdGlvbiBpbmRleCBmb3IgdGhlIGN1cnJlbnQgcXVlcnlcbiAgICAgICAgICAgICAgY29uc3QgY3VycmVudE9wdGlvbkluZGV4ID0gcXVlcnlPcHRpb25zLmZpbmRJbmRleChvcHQgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChpc0dyb3VwZWRRdWVyeSkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIG9wdC5ncm91cElkID09PSBjdXJyZW50UXVlcnlHcm91cElkXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBvcHQuY29uZmlnSWQgPT09IGN1cnJlbnRRdWVyeUl0ZW0uY29uZmlnSWRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgICAgICAgICAgIGV2ZW50OiAncmVuZGVyaW5nLWRyb3Bkb3ducycsXG4gICAgICAgICAgICAgICAgdG90YWxRdWVyaWVzOiBxdWVyeUl0ZW1zLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBxdWVyeU9wdGlvbnNDb3VudDogcXVlcnlPcHRpb25zLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBjdXJyZW50UXVlcnlHcm91cElkLFxuICAgICAgICAgICAgICAgIGlzR3JvdXBlZFF1ZXJ5LFxuICAgICAgICAgICAgICAgIGN1cnJlbnRPcHRpb25JbmRleCxcbiAgICAgICAgICAgICAgICBzZWxlY3RlZEdyb3VwSWQsXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRHcm91cFF1ZXJ5SW5kZXgsXG4gICAgICAgICAgICAgICAgY3VycmVudFF1ZXJ5Q29uZmlnSWQ6IGN1cnJlbnRRdWVyeUl0ZW0uY29uZmlnSWRcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPFJlYWN0LkZyYWdtZW50PlxuICAgICAgICAgICAgICAgICAgey8qIEZpcnN0IERyb3Bkb3duOiBBbGwgcXVlcmllcyAqL31cbiAgICAgICAgICAgICAgICAgIDxkaXYgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDRweCAxNnB4O1xuICAgICAgICAgICAgICAgICAgICBmbGV4LXNocmluazogMDtcbiAgICAgICAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjg3NXJlbTtcbiAgICAgICAgICAgICAgICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS1zeXMtY29sb3ItdGV4dC1wcmltYXJ5KTtcbiAgICAgICAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA0cHg7XG4gICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgICAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICAgICAgICAgIHtnZXRJMThuTWVzc2FnZSgnc2VhcmNoTGF5ZXInKX1cbiAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgPFNlbGVjdCBcbiAgICAgICAgICAgICAgICAgICAgICBzaXplPVwic21cIlxuICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtjdXJyZW50T3B0aW9uSW5kZXggPj0gMCA/IGN1cnJlbnRPcHRpb25JbmRleCA6IDB9XG4gICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e2FzeW5jIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvcHRpb25JbmRleCA9IHBhcnNlSW50KGUudGFyZ2V0LnZhbHVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRPcHRpb24gPSBxdWVyeU9wdGlvbnNbb3B0aW9uSW5kZXhdXG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50OiAncXVlcnktb3B0aW9uLXNlbGVjdGVkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uSW5kZXgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkT3B0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBpc0dyb3VwZWQ6IHNlbGVjdGVkT3B0aW9uLmdyb3VwSWQgIT09IG51bGxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNUQVJUIENMRUFSSU5HIElNTUVESUFURUxZIElGIFNXSVRDSElOR1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBjbGVhclJlc3VsdCgnZHJvcGRvd24tbGF5ZXItc3dpdGNoLW5ldy1tb2RlJylcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkT3B0aW9uLmdyb3VwSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gR3JvdXBlZCBxdWVyeSBzZWxlY3RlZCAtIHNldCBncm91cCBhbmQgZmlyc3QgcXVlcnkgaW4gZ3JvdXBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9uR3JvdXBDaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkdyb3VwQ2hhbmdlKHNlbGVjdGVkT3B0aW9uLmdyb3VwSWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9uR3JvdXBRdWVyeUNoYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uR3JvdXBRdWVyeUNoYW5nZSgwKVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBVbmdyb3VwZWQgcXVlcnkgc2VsZWN0ZWQgLSBjbGVhciBncm91cCBzZWxlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9uR3JvdXBDaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkdyb3VwQ2hhbmdlKG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9uVW5ncm91cGVkQ2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmluZCB0aGUgdW5ncm91cGVkIGluZGV4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdW5ncm91cGVkSW5kZXggPSB1bmdyb3VwZWQ/LmZpbmRJbmRleCgoeyBpdGVtIH0pID0+IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5jb25maWdJZCA9PT0gc2VsZWN0ZWRPcHRpb24uY29uZmlnSWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApID8/IC0xXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHVuZ3JvdXBlZEluZGV4ID49IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uVW5ncm91cGVkQ2hhbmdlKHVuZ3JvdXBlZEluZGV4KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGYWxsYmFjazogdXNlIHRoZSBpbmRleCBmcm9tIHF1ZXJ5SXRlbXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50OiAndW5ncm91cGVkLWZhbGxiYWNrLXRvLWluZGV4JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRPcHRpb25JbmRleDogc2VsZWN0ZWRPcHRpb24uaW5kZXhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob25RdWVyeUNoYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblF1ZXJ5Q2hhbmdlKHNlbGVjdGVkT3B0aW9uLmluZGV4KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICB7cXVlcnlPcHRpb25zLm1hcCgob3B0aW9uLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50OiAncmVuZGVyaW5nLXF1ZXJ5LW9wdGlvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiBpZHgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZ0lkOiBvcHRpb24uY29uZmlnSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXlOYW1lOiBvcHRpb24uZGlzcGxheU5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwSWQ6IG9wdGlvbi5ncm91cElkXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiBrZXk9e29wdGlvbi5jb25maWdJZH0gdmFsdWU9e2lkeH0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge29wdGlvbi5kaXNwbGF5TmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9vcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIHsvKiBTZWNvbmQgRHJvcGRvd246IFF1ZXJpZXMgd2l0aGluIHNlbGVjdGVkIGdyb3VwIChvbmx5IGlmIGdyb3VwZWQgcXVlcnkgc2VsZWN0ZWQpICovfVxuICAgICAgICAgICAgICAgICAge2lzR3JvdXBlZFF1ZXJ5ICYmIGN1cnJlbnRRdWVyeUdyb3VwSWQgJiYgZ3JvdXBzICYmIGdyb3Vwc1tjdXJyZW50UXVlcnlHcm91cElkXSAmJiAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogNHB4IDE2cHg7XG4gICAgICAgICAgICAgICAgICAgICAgZmxleC1zaHJpbms6IDA7XG4gICAgICAgICAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC44NzVyZW07XG4gICAgICAgICAgICAgICAgICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHZhcigtLXN5cy1jb2xvci10ZXh0LXByaW1hcnkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogNHB4O1xuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgICAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAgICAgICAgICBTZWFyY2ggQWxpYXNcbiAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QgXG4gICAgICAgICAgICAgICAgICAgICAgICBzaXplPVwic21cIlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3NlbGVjdGVkR3JvdXBRdWVyeUluZGV4ICE9PSB1bmRlZmluZWQgPyBzZWxlY3RlZEdyb3VwUXVlcnlJbmRleCA6IDB9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17YXN5bmMgKGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3SW5kZXggPSBwYXJzZUludChlLnRhcmdldC52YWx1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudDogJ2dyb3VwLXF1ZXJ5LXNlbGVjdGVkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cElkOiBjdXJyZW50UXVlcnlHcm91cElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwUXVlcnlJbmRleDogbmV3SW5kZXgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IGdyb3Vwc1tjdXJyZW50UXVlcnlHcm91cElkXS5pdGVtc1tuZXdJbmRleF0/LmNvbmZpZ0lkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5RGlzcGxheU5hbWU6IGdldFF1ZXJ5RGlzcGxheU5hbWUoZ3JvdXBzW2N1cnJlbnRRdWVyeUdyb3VwSWRdLml0ZW1zW25ld0luZGV4XSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTVEFSVCBDTEVBUklORyBJTU1FRElBVEVMWSBJRiBTV0lUQ0hJTkdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGNsZWFyUmVzdWx0KCdkcm9wZG93bi1hbGlhcy1zd2l0Y2gtbmV3LW1vZGUnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9uR3JvdXBRdWVyeUNoYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uR3JvdXBRdWVyeUNoYW5nZShuZXdJbmRleClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICB7Z3JvdXBzW2N1cnJlbnRRdWVyeUdyb3VwSWRdLml0ZW1zLm1hcCgoaXRlbSwgaWR4KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24ga2V5PXtpdGVtLmNvbmZpZ0lkfSB2YWx1ZT17aWR4fT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Z2V0UXVlcnlEaXNwbGF5TmFtZShpdGVtKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9vcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgIDwvUmVhY3QuRnJhZ21lbnQ+XG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH0pKCl9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHsvKiBSZXN1bHRzIE1vZGUgQnV0dG9uIEdyb3VwIC0gQWx3YXlzIHNob3csIHJlZ2FyZGxlc3Mgb2YgcXVlcnkgY291bnQgKi99XG4gICAgICAgICAgICA8ZGl2IGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiA4cHggMTZweDtcbiAgICAgICAgICAgICAgICAgICAgZmxleC1zaHJpbms6IDA7XG4gICAgICAgICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJkLWZsZXggYWxpZ24taXRlbXMtY2VudGVyXCIgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICAgICAgZ2FwOiAwLjVyZW07XG4gICAgICAgICAgICAgICAgICAgICAgZmxleC13cmFwOiBub3dyYXA7XG4gICAgICAgICAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICAgICAgICAgIHsvKiBSZXN1bHRzIGxhYmVsIGFuZCBpbmZvIGJ1dHRvbiAqL31cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRpdGxlMlwiIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjg3NXJlbTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogdmFyKC0tc3lzLWNvbG9yLXRleHQtcHJpbWFyeSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICAgICAgICAgICAgICAgICAgICAgICAgZmxleC1zaHJpbms6IDA7XG4gICAgICAgICAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAgICAgICAgICB7Z2V0STE4bk1lc3NhZ2UoJ3Jlc3VsdHMnKX06XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPFRvb2x0aXAgcGxhY2VtZW50PSdib3R0b20nIGNzcz17Y3NzYHdoaXRlLXNwYWNlOiBwcmUtbGluZTtgfSB0aXRsZT17Z2V0STE4bk1lc3NhZ2UoJ3Jlc3VsdHNNb2RlRGVzYycpfT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b24gc2l6ZT0nc20nIGljb24gdHlwZT0ndGVydGlhcnknIGFyaWEtbGFiZWw9e2dldEkxOG5NZXNzYWdlKCdyZXN1bHRzTW9kZURlc2MnKX0gY3NzPXtjc3NgZmxleC1zaHJpbms6IDA7YH0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxJbmZvT3V0bGluZWQgY29sb3I9J3ZhcigtLXN5cy1jb2xvci1wcmltYXJ5LW1haW4pJyBzaXplPSdzJy8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICA8L1Rvb2x0aXA+XG4gICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgey8qIE1vZGUgYnV0dG9ucyAqL31cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IFxuICAgICAgICAgICAgICAgICAgICAgICAgcm9sZT1cInJhZGlvZ3JvdXBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgYXJpYS1sYWJlbD17Z2V0STE4bk1lc3NhZ2UoJ3Jlc3VsdHNNb2RlJyl9XG4gICAgICAgICAgICAgICAgICAgICAgICBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FwOiA0cHg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBzdHJldGNoO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBmbGV4OiAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBtaW4td2lkdGg6IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICBzaXplPVwic21cIlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFudD17cmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uID8gJ2NvbnRhaW5lZCcgOiAnb3V0bGluZWQnfVxuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I9e3Jlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvbiA/ICdwcmltYXJ5JyA6ICdkZWZhdWx0J31cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3TW9kZSA9IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50OiAnYnV0dG9uLW1vZGUtY2hhbmdlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBxdWVyeUl0ZW0uY29uZmlnSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNNb2RlOiByZXN1bHRzTW9kZSB8fCBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdNb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvblJlc3VsdHNNb2RlQ2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25SZXN1bHRzTW9kZUNoYW5nZShuZXdNb2RlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgYXJpYS1wcmVzc2VkPXtyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb259XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPXtgJHtnZXRJMThuTWVzc2FnZSgnY3JlYXRlTmV3UmVzdWx0cycpfTogJHtnZXRJMThuTWVzc2FnZSgncmVzdWx0c01vZGVEZXNjJykuc3BsaXQoJ1xcbicpWzFdPy50cmltKCkgfHwgJyd9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtnZXRJMThuTWVzc2FnZSgnY3JlYXRlTmV3UmVzdWx0cycpfVxuICAgICAgICAgICAgICAgICAgICAgICAgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC43NXJlbTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogNHB4IDhweDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbWluLWhlaWdodDogMjhweDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtnZXRJMThuTWVzc2FnZSgncmVzdWx0c01vZGVOZXcnKX1cbiAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICBzaXplPVwic21cIlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFudD17cmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb24gPyAnY29udGFpbmVkJyA6ICdvdXRsaW5lZCd9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcj17cmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb24gPyAncHJpbWFyeScgOiAnZGVmYXVsdCd9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld01vZGUgPSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHByZXZpb3VzTW9kZSA9IHJlc3VsdHNNb2RlIHx8IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudDogJ2J1dHRvbi1tb2RlLWNoYW5nZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWVyeUl0ZW1Db25maWdJZDogcXVlcnlJdGVtLmNvbmZpZ0lkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzTW9kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdNb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiBzd2l0Y2hpbmcgRlJPTSBcIk5ld1wiIFRPIFwiQWRkIHRvXCIgbW9kZSBhbmQgd2UgaGF2ZSBjdXJyZW50IHJlc3VsdHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG1lcmdlIHRoZW0gd2l0aCBleGlzdGluZyBhY2N1bXVsYXRlZCByZWNvcmRzIGJlZm9yZSBjaGFuZ2luZyBtb2RlXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNPVVJDRSBPRiBUUlVUSCBBUkNISVRFQ1RVUkUgKHIwMTguNjUpOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAtIG91dHB1dERTLmdldFNlbGVjdGVkUmVjb3JkcygpIGlzIHRoZSBTSU5HTEUgU09VUkNFIE9GIFRSVVRIIGZvciBjdXJyZW50IHNlbGVjdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgIEl0IGNvcnJlY3RseSBmaWx0ZXJzIG91dCByZW1vdmVkIHJlY29yZHMgYW5kIHN0YXlzIGluIHN5bmMgd2l0aCB1c2VyIGFjdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gLSBlZmZlY3RpdmVSZWNvcmRzIChmcm9tIHJlY29yZHNSZWYuY3VycmVudCkgY29udGFpbnMgc3RhbGUgcXVlcnkgcmVzdWx0cyB0aGF0IG1heVxuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgIGluY2x1ZGUgcmVtb3ZlZCByZWNvcmRzLCBzbyBpdCBzaG91bGQgb25seSBiZSB1c2VkIGFzIGEgZmFsbGJhY2sgd2hlbiBvdXRwdXREU1xuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgIGhhcyBubyBzZWxlY3Rpb24gKGUuZy4sIGR1cmluZyBxdWVyeSBleGVjdXRpb24gYmVmb3JlIHNlbGVjdGlvbiBpcyBhcHBsaWVkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAtIFRoaXMgZW5zdXJlcyByZW1vdmVkIHJlY29yZHMgYXJlIG5ldmVyIGFjY2lkZW50YWxseSBpbmNsdWRlZCBpbiBhY2N1bXVsYXRlZFJlY29yZHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIERFQlVHOiBMb2cgc3RhdGUgYmVmb3JlIGNhcHR1cmUgdG8gdmVyaWZ5IGFzc3VtcHRpb25zXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVmZmVjdGl2ZVJlY29yZHNDb3VudCA9IGVmZmVjdGl2ZVJlY29yZHM/Lmxlbmd0aCB8fCAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG91dHB1dERTU2VsZWN0ZWRSZWNvcmRzID0gb3V0cHV0RFM/LmdldFNlbGVjdGVkUmVjb3JkcygpIGFzIEZlYXR1cmVEYXRhUmVjb3JkW10gfHwgW11cbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3V0cHV0RFNTZWxlY3RlZENvdW50ID0gb3V0cHV0RFNTZWxlY3RlZFJlY29yZHMubGVuZ3RoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50ID0gYWNjdW11bGF0ZWRSZWNvcmRzPy5sZW5ndGggfHwgMFxuICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdtb2RlLXN3aXRjaC1kZWJ1Zy1iZWZvcmUtY2FwdHVyZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzTW9kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdNb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVmZmVjdGl2ZVJlY29yZHNDb3VudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXREU1NlbGVjdGVkQ291bnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0RFNJZDogb3V0cHV0RFM/LmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc0VmZmVjdGl2ZVJlY29yZHM6IGVmZmVjdGl2ZVJlY29yZHMgJiYgZWZmZWN0aXZlUmVjb3Jkcy5sZW5ndGggPiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc091dHB1dERTU2VsZWN0ZWQ6IG91dHB1dERTU2VsZWN0ZWRSZWNvcmRzLmxlbmd0aCA+IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGSVggKHIwMTguNjUpOiBVc2Ugb3V0cHV0RFMuZ2V0U2VsZWN0ZWRSZWNvcmRzKCkgYXMgc291cmNlIG9mIHRydXRoIGZvciBtb2RlIHN3aXRjaGluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIGNvcnJlY3RseSBmaWx0ZXJzIG91dCByZW1vdmVkIHJlY29yZHMsIHVubGlrZSBlZmZlY3RpdmVSZWNvcmRzIHdoaWNoIGNvbnRhaW5zIHN0YWxlIGRhdGFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gb3V0cHV0RFMuZ2V0U2VsZWN0ZWRSZWNvcmRzKCkgaXMgdGhlIHNpbmdsZSBzb3VyY2Ugb2YgdHJ1dGggdGhhdCBzdGF5cyBpbiBzeW5jIHdpdGggcmVtb3ZhbHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVjb3Jkc1RvQ2FwdHVyZSA9IG91dHB1dERTU2VsZWN0ZWRSZWNvcmRzLmxlbmd0aCA+IDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IG91dHB1dERTU2VsZWN0ZWRSZWNvcmRzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAoZWZmZWN0aXZlUmVjb3JkcyAmJiBlZmZlY3RpdmVSZWNvcmRzLmxlbmd0aCA+IDAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gKGVmZmVjdGl2ZVJlY29yZHMgYXMgRmVhdHVyZURhdGFSZWNvcmRbXSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBbXSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIERFQlVHOiBMb2cgd2hpY2ggc291cmNlIHdhcyB1c2VkXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50OiAnbW9kZS1zd2l0Y2gtZGVidWctYWZ0ZXItY2FwdHVyZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlY29yZHNUb0NhcHR1cmVDb3VudDogcmVjb3Jkc1RvQ2FwdHVyZS5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlOiBvdXRwdXREU1NlbGVjdGVkUmVjb3Jkcy5sZW5ndGggPiAwID8gJ291dHB1dERTLmdldFNlbGVjdGVkUmVjb3JkcygpJyA6IChlZmZlY3RpdmVSZWNvcmRzICYmIGVmZmVjdGl2ZVJlY29yZHMubGVuZ3RoID4gMCA/ICdlZmZlY3RpdmVSZWNvcmRzJyA6ICdub25lJyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWZmZWN0aXZlUmVjb3Jkc0NvdW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dERTU2VsZWN0ZWRDb3VudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBESUFHTk9TVElDOiBDaGVjayBlYWNoIGNvbmRpdGlvbiBpbmRpdmlkdWFsbHkgKHIwMTguNzgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbmRpdGlvbkNoZWNrID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzTW9kZUlzTmV3OiBwcmV2aW91c01vZGUgPT09IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld01vZGVJc0FkZDogbmV3TW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNSZWNvcmRzVG9DYXB0dXJlOiByZWNvcmRzVG9DYXB0dXJlLmxlbmd0aCA+IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzT3V0cHV0RFM6ICEhb3V0cHV0RFMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzT25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2U6ICEhb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNNb2RlOiBwcmV2aW91c01vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3TW9kZTogbmV3TW9kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWNvcmRzVG9DYXB0dXJlTGVuZ3RoOiByZWNvcmRzVG9DYXB0dXJlLmxlbmd0aFxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudDogJ21vZGUtc3dpdGNoLWNvbmRpdGlvbi1jaGVjaycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmRpdGlvbnM6IGNvbmRpdGlvbkNoZWNrLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsbENvbmRpdGlvbnNNZXQ6IGNvbmRpdGlvbkNoZWNrLnByZXZpb3VzTW9kZUlzTmV3ICYmIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25kaXRpb25DaGVjay5uZXdNb2RlSXNBZGQgJiYgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmRpdGlvbkNoZWNrLmhhc1JlY29yZHNUb0NhcHR1cmUgJiYgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmRpdGlvbkNoZWNrLmhhc091dHB1dERTICYmIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25kaXRpb25DaGVjay5oYXNPbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJldmlvdXNNb2RlID09PSBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvbiAmJiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld01vZGUgPT09IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb24gJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlY29yZHNUb0NhcHR1cmUubGVuZ3RoID4gMCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0RFMgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdBY2N1bXVsYXRlZCA9IGFjY3VtdWxhdGVkUmVjb3JkcyB8fCBbXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1lcmdlIGN1cnJlbnQgcmVzdWx0cyB3aXRoIGV4aXN0aW5nIGFjY3VtdWxhdGVkIHJlY29yZHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXJnZWRSZWNvcmRzID0gbWVyZ2VSZXN1bHRzSW50b0FjY3VtdWxhdGVkKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0RFMgYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlY29yZHNUb0NhcHR1cmUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGlzdGluZ0FjY3VtdWxhdGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nSWRzID0gZXhpc3RpbmdBY2N1bXVsYXRlZC5tYXAociA9PiByLmdldElkKCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FwdHVyZWRJZHMgPSByZWNvcmRzVG9DYXB0dXJlLm1hcChyID0+IHIuZ2V0SWQoKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXJnZWRJZHMgPSBtZXJnZWRSZWNvcmRzLm1hcChyID0+IHIuZ2V0SWQoKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhZGRlZElkcyA9IG1lcmdlZElkcy5maWx0ZXIoaWQgPT4gIWV4aXN0aW5nSWRzLmluY2x1ZGVzKGlkKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkdXBsaWNhdGVJZHMgPSBjYXB0dXJlZElkcy5maWx0ZXIoaWQgPT4gZXhpc3RpbmdJZHMuaW5jbHVkZXMoaWQpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdjYXB0dXJpbmctY3VycmVudC1yZXN1bHRzLW9uLW1vZGUtc3dpdGNoJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzTW9kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld01vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXB0dXJlZFJlY29yZHNDb3VudDogcmVjb3Jkc1RvQ2FwdHVyZS5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXB0dXJlZElkczogY2FwdHVyZWRJZHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZmZlY3RpdmVSZWNvcmRzQ291bnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXREU1NlbGVjdGVkQ291bnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGlzdGluZ0FjY3VtdWxhdGVkQ291bnQ6IGV4aXN0aW5nQWNjdW11bGF0ZWQubGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmdJZHM6IGV4aXN0aW5nSWRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVyZ2VkUmVjb3Jkc0NvdW50OiBtZXJnZWRSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lcmdlZElkczogbWVyZ2VkSWRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkZWRJZHM6IGFkZGVkSWRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHVwbGljYXRlSWRzOiBkdXBsaWNhdGVJZHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdXBsaWNhdGVzRmlsdGVyZWQ6IGR1cGxpY2F0ZUlkcy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2VVc2VkOiBvdXRwdXREU1NlbGVjdGVkUmVjb3Jkcy5sZW5ndGggPiAwID8gJ291dHB1dERTLmdldFNlbGVjdGVkUmVjb3JkcygpJyA6IChlZmZlY3RpdmVSZWNvcmRzICYmIGVmZmVjdGl2ZVJlY29yZHMubGVuZ3RoID4gMCA/ICdlZmZlY3RpdmVSZWNvcmRzJyA6ICdub25lJyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RlOiAnb3V0cHV0RFMuZ2V0U2VsZWN0ZWRSZWNvcmRzKCktaXMtc291cmNlLW9mLXRydXRoLWZpbHRlcnMtcmVtb3ZlZC1yZWNvcmRzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UobWVyZ2VkUmVjb3JkcylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50OiAnbW9kZS1zd2l0Y2gtbWVyZ2Utc2tpcHBlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFzb246ICdjb25kaXRpb24tY2hlY2stZmFpbGVkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmRpdGlvbnM6IGNvbmRpdGlvbkNoZWNrLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9uUmVzdWx0c01vZGVDaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblJlc3VsdHNNb2RlQ2hhbmdlKG5ld01vZGUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmlhLXByZXNzZWQ9e3Jlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9ufVxuICAgICAgICAgICAgICAgICAgICAgICAgYXJpYS1sYWJlbD17YCR7Z2V0STE4bk1lc3NhZ2UoJ2FkZFRvQ3VycmVudFJlc3VsdHMnKX06ICR7Z2V0STE4bk1lc3NhZ2UoJ3Jlc3VsdHNNb2RlRGVzYycpLnNwbGl0KCdcXG4nKVsyXT8udHJpbSgpIHx8ICcnfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17Z2V0STE4bk1lc3NhZ2UoJ2FkZFRvQ3VycmVudFJlc3VsdHMnKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgICAgICAgICAgICBmbGV4OiAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDAuNzVyZW07XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDRweCA4cHg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDI4cHg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICB7Z2V0STE4bk1lc3NhZ2UoJ3Jlc3VsdHNNb2RlQWRkJyl9XG4gICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZT1cInNtXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhbnQ9e3Jlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb24gPyAnY29udGFpbmVkJyA6ICdvdXRsaW5lZCd9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcj17cmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvbiA/ICdwcmltYXJ5JyA6ICdkZWZhdWx0J31cbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXshYWNjdW11bGF0ZWRSZWNvcmRzIHx8IGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPT09IDB9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld01vZGUgPSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJldmlvdXNNb2RlID0gcmVzdWx0c01vZGUgfHwgU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50OiAnYnV0dG9uLW1vZGUtY2hhbmdlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBxdWVyeUl0ZW0uY29uZmlnSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNNb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld01vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGFjY3VtdWxhdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHN3aXRjaGluZyBGUk9NIFwiTmV3XCIgVE8gXCJSZW1vdmUgZnJvbVwiIG1vZGUgYW5kIHdlIGhhdmUgY3VycmVudCByZXN1bHRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBtZXJnZSB0aGVtIHdpdGggZXhpc3RpbmcgYWNjdW11bGF0ZWQgcmVjb3JkcyBiZWZvcmUgY2hhbmdpbmcgbW9kZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAoc2FtZSBwYXR0ZXJuIGFzIFwiQWRkIHRvXCIgbW9kZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU09VUkNFIE9GIFRSVVRIIEFSQ0hJVEVDVFVSRSAocjAxOC42NSk6XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIC0gb3V0cHV0RFMuZ2V0U2VsZWN0ZWRSZWNvcmRzKCkgaXMgdGhlIFNJTkdMRSBTT1VSQ0UgT0YgVFJVVEggZm9yIGN1cnJlbnQgc2VsZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgSXQgY29ycmVjdGx5IGZpbHRlcnMgb3V0IHJlbW92ZWQgcmVjb3JkcyBhbmQgc3RheXMgaW4gc3luYyB3aXRoIHVzZXIgYWN0aW9uc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAtIGVmZmVjdGl2ZVJlY29yZHMgKGZyb20gcmVjb3Jkc1JlZi5jdXJyZW50KSBjb250YWlucyBzdGFsZSBxdWVyeSByZXN1bHRzIHRoYXQgbWF5XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgaW5jbHVkZSByZW1vdmVkIHJlY29yZHMsIHNvIGl0IHNob3VsZCBvbmx5IGJlIHVzZWQgYXMgYSBmYWxsYmFjayB3aGVuIG91dHB1dERTXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgaGFzIG5vIHNlbGVjdGlvbiAoZS5nLiwgZHVyaW5nIHF1ZXJ5IGV4ZWN1dGlvbiBiZWZvcmUgc2VsZWN0aW9uIGlzIGFwcGxpZWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIC0gVGhpcyBlbnN1cmVzIHJlbW92ZWQgcmVjb3JkcyBhcmUgbmV2ZXIgYWNjaWRlbnRhbGx5IGluY2x1ZGVkIGluIGFjY3VtdWxhdGVkUmVjb3Jkc1xuICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gREVCVUc6IExvZyBzdGF0ZSBiZWZvcmUgY2FwdHVyZSB0byB2ZXJpZnkgYXNzdW1wdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZWZmZWN0aXZlUmVjb3Jkc0NvdW50Rm9yUmVtb3ZlID0gZWZmZWN0aXZlUmVjb3Jkcz8ubGVuZ3RoIHx8IDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3V0cHV0RFNTZWxlY3RlZFJlY29yZHNGb3JSZW1vdmUgPSBvdXRwdXREUz8uZ2V0U2VsZWN0ZWRSZWNvcmRzKCkgYXMgRmVhdHVyZURhdGFSZWNvcmRbXSB8fCBbXVxuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvdXRwdXREU1NlbGVjdGVkQ291bnRGb3JSZW1vdmUgPSBvdXRwdXREU1NlbGVjdGVkUmVjb3Jkc0ZvclJlbW92ZS5sZW5ndGhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnRGb3JSZW1vdmUgPSBhY2N1bXVsYXRlZFJlY29yZHM/Lmxlbmd0aCB8fCAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudDogJ21vZGUtc3dpdGNoLWRlYnVnLWJlZm9yZS1jYXB0dXJlLXJlbW92ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzTW9kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdNb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVmZmVjdGl2ZVJlY29yZHNDb3VudDogZWZmZWN0aXZlUmVjb3Jkc0NvdW50Rm9yUmVtb3ZlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dERTU2VsZWN0ZWRDb3VudDogb3V0cHV0RFNTZWxlY3RlZENvdW50Rm9yUmVtb3ZlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiBhY2N1bXVsYXRlZFJlY29yZHNDb3VudEZvclJlbW92ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXREU0lkOiBvdXRwdXREUz8uaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzRWZmZWN0aXZlUmVjb3JkczogZWZmZWN0aXZlUmVjb3JkcyAmJiBlZmZlY3RpdmVSZWNvcmRzLmxlbmd0aCA+IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzT3V0cHV0RFNTZWxlY3RlZDogb3V0cHV0RFNTZWxlY3RlZFJlY29yZHNGb3JSZW1vdmUubGVuZ3RoID4gMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZJWCAocjAxOC42NSk6IFVzZSBvdXRwdXREUy5nZXRTZWxlY3RlZFJlY29yZHMoKSBhcyBzb3VyY2Ugb2YgdHJ1dGggZm9yIG1vZGUgc3dpdGNoaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgY29ycmVjdGx5IGZpbHRlcnMgb3V0IHJlbW92ZWQgcmVjb3JkcywgdW5saWtlIGVmZmVjdGl2ZVJlY29yZHMgd2hpY2ggY29udGFpbnMgc3RhbGUgZGF0YVxuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBvdXRwdXREUy5nZXRTZWxlY3RlZFJlY29yZHMoKSBpcyB0aGUgc2luZ2xlIHNvdXJjZSBvZiB0cnV0aCB0aGF0IHN0YXlzIGluIHN5bmMgd2l0aCByZW1vdmFsc1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZWNvcmRzVG9DYXB0dXJlRm9yUmVtb3ZlID0gb3V0cHV0RFNTZWxlY3RlZFJlY29yZHNGb3JSZW1vdmUubGVuZ3RoID4gMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gb3V0cHV0RFNTZWxlY3RlZFJlY29yZHNGb3JSZW1vdmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IChlZmZlY3RpdmVSZWNvcmRzICYmIGVmZmVjdGl2ZVJlY29yZHMubGVuZ3RoID4gMCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAoZWZmZWN0aXZlUmVjb3JkcyBhcyBGZWF0dXJlRGF0YVJlY29yZFtdKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFtdKVxuICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gREVCVUc6IExvZyB3aGljaCBzb3VyY2Ugd2FzIHVzZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdtb2RlLXN3aXRjaC1kZWJ1Zy1hZnRlci1jYXB0dXJlLXJlbW92ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlY29yZHNUb0NhcHR1cmVDb3VudDogcmVjb3Jkc1RvQ2FwdHVyZUZvclJlbW92ZS5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlOiBvdXRwdXREU1NlbGVjdGVkUmVjb3Jkc0ZvclJlbW92ZS5sZW5ndGggPiAwID8gJ291dHB1dERTLmdldFNlbGVjdGVkUmVjb3JkcygpJyA6IChlZmZlY3RpdmVSZWNvcmRzICYmIGVmZmVjdGl2ZVJlY29yZHMubGVuZ3RoID4gMCA/ICdlZmZlY3RpdmVSZWNvcmRzJyA6ICdub25lJyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWZmZWN0aXZlUmVjb3Jkc0NvdW50OiBlZmZlY3RpdmVSZWNvcmRzQ291bnRGb3JSZW1vdmUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0RFNTZWxlY3RlZENvdW50OiBvdXRwdXREU1NlbGVjdGVkQ291bnRGb3JSZW1vdmUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRElBR05PU1RJQzogQ2hlY2sgZWFjaCBjb25kaXRpb24gaW5kaXZpZHVhbGx5IChyMDE4Ljc4KVxuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb25kaXRpb25DaGVja1JlbW92ZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c01vZGVJc05ldzogcHJldmlvdXNNb2RlID09PSBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdNb2RlSXNSZW1vdmU6IG5ld01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNSZWNvcmRzVG9DYXB0dXJlOiByZWNvcmRzVG9DYXB0dXJlRm9yUmVtb3ZlLmxlbmd0aCA+IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzT3V0cHV0RFM6ICEhb3V0cHV0RFMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzT25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2U6ICEhb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNNb2RlOiBwcmV2aW91c01vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3TW9kZTogbmV3TW9kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWNvcmRzVG9DYXB0dXJlTGVuZ3RoOiByZWNvcmRzVG9DYXB0dXJlRm9yUmVtb3ZlLmxlbmd0aFxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudDogJ21vZGUtc3dpdGNoLWNvbmRpdGlvbi1jaGVjay1yZW1vdmUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25kaXRpb25zOiBjb25kaXRpb25DaGVja1JlbW92ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGxDb25kaXRpb25zTWV0OiBjb25kaXRpb25DaGVja1JlbW92ZS5wcmV2aW91c01vZGVJc05ldyAmJiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZGl0aW9uQ2hlY2tSZW1vdmUubmV3TW9kZUlzUmVtb3ZlICYmIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25kaXRpb25DaGVja1JlbW92ZS5oYXNSZWNvcmRzVG9DYXB0dXJlICYmIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25kaXRpb25DaGVja1JlbW92ZS5oYXNPdXRwdXREUyAmJiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZGl0aW9uQ2hlY2tSZW1vdmUuaGFzT25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByZXZpb3VzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb24gJiYgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb24gJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlY29yZHNUb0NhcHR1cmVGb3JSZW1vdmUubGVuZ3RoID4gMCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0RFMgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdBY2N1bXVsYXRlZCA9IGFjY3VtdWxhdGVkUmVjb3JkcyB8fCBbXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1lcmdlIGN1cnJlbnQgcmVzdWx0cyB3aXRoIGV4aXN0aW5nIGFjY3VtdWxhdGVkIHJlY29yZHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXJnZWRSZWNvcmRzID0gbWVyZ2VSZXN1bHRzSW50b0FjY3VtdWxhdGVkKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0RFMgYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlY29yZHNUb0NhcHR1cmVGb3JSZW1vdmUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGlzdGluZ0FjY3VtdWxhdGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdjYXB0dXJpbmctY3VycmVudC1yZXN1bHRzLW9uLW1vZGUtc3dpdGNoLXRvLXJlbW92ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c01vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdNb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FwdHVyZWRSZWNvcmRzQ291bnQ6IHJlY29yZHNUb0NhcHR1cmVGb3JSZW1vdmUubGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWZmZWN0aXZlUmVjb3Jkc0NvdW50OiBlZmZlY3RpdmVSZWNvcmRzQ291bnRGb3JSZW1vdmUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXREU1NlbGVjdGVkQ291bnQ6IG91dHB1dERTU2VsZWN0ZWRDb3VudEZvclJlbW92ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nQWNjdW11bGF0ZWRDb3VudDogZXhpc3RpbmdBY2N1bXVsYXRlZC5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXJnZWRSZWNvcmRzQ291bnQ6IG1lcmdlZFJlY29yZHMubGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlVXNlZDogb3V0cHV0RFNTZWxlY3RlZFJlY29yZHNGb3JSZW1vdmUubGVuZ3RoID4gMCA/ICdvdXRwdXREUy5nZXRTZWxlY3RlZFJlY29yZHMoKScgOiAoZWZmZWN0aXZlUmVjb3JkcyAmJiBlZmZlY3RpdmVSZWNvcmRzLmxlbmd0aCA+IDAgPyAnZWZmZWN0aXZlUmVjb3JkcycgOiAnbm9uZScpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90ZTogJ291dHB1dERTLmdldFNlbGVjdGVkUmVjb3JkcygpLWlzLXNvdXJjZS1vZi10cnV0aC1maWx0ZXJzLXJlbW92ZWQtcmVjb3JkcydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlKG1lcmdlZFJlY29yZHMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudDogJ21vZGUtc3dpdGNoLW1lcmdlLXNraXBwZWQtcmVtb3ZlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYXNvbjogJ2NvbmRpdGlvbi1jaGVjay1mYWlsZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZGl0aW9uczogY29uZGl0aW9uQ2hlY2tSZW1vdmUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob25SZXN1bHRzTW9kZUNoYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uUmVzdWx0c01vZGVDaGFuZ2UobmV3TW9kZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGFyaWEtcHJlc3NlZD17cmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9e2Ake2dldEkxOG5NZXNzYWdlKCdyZW1vdmVGcm9tQ3VycmVudFJlc3VsdHMnKX06ICR7Z2V0STE4bk1lc3NhZ2UoJ3Jlc3VsdHNNb2RlRGVzYycpLnNwbGl0KCdcXG4nKVszXT8udHJpbSgpIHx8ICcnfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17KCFhY2N1bXVsYXRlZFJlY29yZHMgfHwgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA9PT0gMCkgXG4gICAgICAgICAgICAgICAgICAgICAgICAgID8gZ2V0STE4bk1lc3NhZ2UoJ3Jlc3VsdHNNb2RlRGlzYWJsZWRSZW1vdmUnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICA6IGdldEkxOG5NZXNzYWdlKCdyZW1vdmVGcm9tQ3VycmVudFJlc3VsdHMnKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgICAgICAgICAgICBmbGV4OiAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDAuNzVyZW07XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDRweCA4cHg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDI4cHg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICB7Z2V0STE4bk1lc3NhZ2UoJ3Jlc3VsdHNNb2RlUmVtb3ZlJyl9XG4gICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IFxuICAgICAgICAgICAgICAgICAgICAgIGlkPXtgcmVzdWx0cy1tb2RlLWRlc2NyaXB0aW9uLSR7cHJvcHMud2lkZ2V0SWR9YH1cbiAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJzci1vbmx5XCJcbiAgICAgICAgICAgICAgICAgICAgICBhcmlhLWxpdmU9XCJwb2xpdGVcIlxuICAgICAgICAgICAgICAgICAgICAgIHJvbGU9XCJzdGF0dXNcIlxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAge3Jlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvbiBcbiAgICAgICAgICAgICAgICAgICAgICAgID8gZ2V0STE4bk1lc3NhZ2UoJ2NyZWF0ZU5ld1Jlc3VsdHMnKVxuICAgICAgICAgICAgICAgICAgICAgICAgOiByZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgPyBnZXRJMThuTWVzc2FnZSgnYWRkVG9DdXJyZW50UmVzdWx0cycpXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGdldEkxOG5NZXNzYWdlKCdyZW1vdmVGcm9tQ3VycmVudFJlc3VsdHMnKVxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY3NzPXtjc3NgXG4gICAgICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDA7XG4gICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAge2VuYWJsZWQgJiYgZHNFeGlzdHMgJiYgKFxuICAgICAgICAgICAgICAgIDxkaXYgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICBmbGV4OiAxO1xuICAgICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgICAgICAgICBtaW4taGVpZ2h0OiAwO1xuICAgICAgICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgICAgIDxRdWVyeVRhc2tGb3JtXG4gICAgICAgICAgICAgICAgICAgIGtleT17cXVlcnlJdGVtLmNvbmZpZ0lkfVxuICAgICAgICAgICAgICAgICAgICB7Li4ub3RoZXJQcm9wc31cbiAgICAgICAgICAgICAgICAgICAgY29uZmlnSWQ9e3F1ZXJ5SXRlbS5jb25maWdJZH1cbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0RFM9e291dHB1dERTfVxuICAgICAgICAgICAgICAgICAgICBkYXRhc291cmNlUmVhZHk9e2RhdGFTb3VyY2UgIT0gbnVsbH1cbiAgICAgICAgICAgICAgICAgICAgc3BhdGlhbEZpbHRlckVuYWJsZWQ9e3NwYXRpYWxGaWx0ZXJFbmFibGVkfVxuICAgICAgICAgICAgICAgICAgICBkYXRhQWN0aW9uRmlsdGVyID0ge2RhdGFBY3Rpb25GaWx0ZXJ9XG4gICAgICAgICAgICAgICAgICAgIG9uRm9ybVN1Ym1pdD17aGFuZGxlRm9ybVN1Ym1pdH1cbiAgICAgICAgICAgICAgICAgICAgaW5pdGlhbElucHV0VmFsdWU9e2luaXRpYWxJbnB1dFZhbHVlfVxuICAgICAgICAgICAgICAgICAgICBvbkhhc2hQYXJhbWV0ZXJVc2VkPXtvbkhhc2hQYXJhbWV0ZXJVc2VkfVxuICAgICAgICAgICAgICAgICAgICBxdWVyeUl0ZW1TaG9ydElkPXtxdWVyeUl0ZW0uc2hvcnRJZH1cbiAgICAgICAgICAgICAgICAgICAgYWN0aXZlVGFiPXthY3RpdmVUYWJ9XG4gICAgICAgICAgICAgICAgICAgIG9uVGFiQ2hhbmdlPXtzZXRBY3RpdmVUYWJ9XG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICA8RGF0YVNvdXJjZVRpcFxuICAgICAgICAgICAgICAgIHdpZGdldElkPXtwcm9wcy53aWRnZXRJZH1cbiAgICAgICAgICAgICAgICB1c2VEYXRhU291cmNlPXtxdWVyeUl0ZW0udXNlRGF0YVNvdXJjZX1cbiAgICAgICAgICAgICAgICBzaG93TWVzc2FnZT17dHJ1ZX1cbiAgICAgICAgICAgICAgICBvblN0YXR1c0NoYW5nZT17aGFuZGxlU3RhdHVzQ2hhbmdlfVxuICAgICAgICAgICAgICAgIG9uRGF0YVNvdXJjZUNyZWF0ZWQ9e2hhbmRsZURhdGFTb3VyY2VDcmVhdGVkfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvVGFiPlxuICAgICAgICA8VGFiXG4gICAgICAgICAgaWQ9J3Jlc3VsdHMnXG4gICAgICAgICAgdGl0bGU9e1xuICAgICAgICAgICAgPHNwYW4+XG4gICAgICAgICAgICAgIHtnZXRJMThuTWVzc2FnZSgncmVzdWx0c1RhYicpfVxuICAgICAgICAgICAgICB7ZWZmZWN0aXZlUmVzdWx0Q291bnQgPiAwICYmIChcbiAgICAgICAgICAgICAgICA8c3BhbiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiA2cHg7XG4gICAgICAgICAgICAgICAgICBmb250LXNpemU6IDAuNzVyZW07XG4gICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjc7XG4gICAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAgICAoe2VmZmVjdGl2ZVJlc3VsdENvdW50fSlcbiAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgfVxuICAgICAgICAgIGRpc2FibGVkPXtlZmZlY3RpdmVSZXN1bHRDb3VudCA9PT0gMH1cbiAgICAgICAgPlxuICAgICAgICAgIHtlZmZlY3RpdmVSZXN1bHRDb3VudCA+IDAgJiYgKFxuICAgICAgICAgICAgPGRpdiBcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdxdWVyeS10YXNrX19jb250ZW50Jywge1xuICAgICAgICAgICAgICAgIFtGT0NVU0FCTEVfQ09OVEFJTkVSX0NMQVNTXTogaXNJblBvcHBlciAmJiBhY3RpdmVUYWIgPT09ICdyZXN1bHRzJ1xuICAgICAgICAgICAgICB9KX0gXG4gICAgICAgICAgICAgIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDA7XG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICAgICAgICAgIHBhZGRpbmctdG9wOiAwICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgIG9uQ2xpY2s9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gUHJldmVudCBjbGlja3MgZnJvbSBidWJibGluZyB1cCB3aGVuIFJlc3VsdHMgdGFiIGlzIGFjdGl2ZVxuICAgICAgICAgICAgICAgIGlmIChhY3RpdmVUYWIgPT09ICdyZXN1bHRzJykge1xuICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPFF1ZXJ5VGFza1Jlc3VsdFxuICAgICAgICAgICAgICAgIGtleT17YCR7cXVlcnlJdGVtLmNvbmZpZ0lkfS0ke3F1ZXJ5RXhlY3V0aW9uS2V5UmVmLmN1cnJlbnR9YH1cbiAgICAgICAgICAgICAgICB3aWRnZXRJZD17cHJvcHMud2lkZ2V0SWR9XG4gICAgICAgICAgICAgICAgcXVlcnlJdGVtPXtxdWVyeUl0ZW19XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbXM9e3F1ZXJ5UGFyYW1SZWYuY3VycmVudH1cbiAgICAgICAgICAgICAgICByZXN1bHRDb3VudD17ZWZmZWN0aXZlUmVzdWx0Q291bnR9XG4gICAgICAgICAgICAgICAgbWF4UGVyUGFnZT17KGRhdGFTb3VyY2UgYXMgUXVlcmlhYmxlRGF0YVNvdXJjZSk/LmdldE1heFJlY29yZENvdW50Py4oKX1cbiAgICAgICAgICAgICAgICByZWNvcmRzPXtlZmZlY3RpdmVSZWNvcmRzfVxuICAgICAgICAgICAgICAgIG91dHB1dERTPXtvdXRwdXREU31cbiAgICAgICAgICAgICAgICBydW50aW1lWm9vbVRvU2VsZWN0ZWQ9e2xhc3RSdW50aW1lWm9vbVRvU2VsZWN0ZWRSZWYuY3VycmVudH1cbiAgICAgICAgICAgICAgICByZXN1bHRzTW9kZT17cmVzdWx0c01vZGV9XG4gICAgICAgICAgICAgICAgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodD17dXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodH1cbiAgICAgICAgICAgICAgICBncmFwaGljc0xheWVyPXtncmFwaGljc0xheWVyfVxuICAgICAgICAgICAgICAgIG1hcFZpZXc9e21hcFZpZXd9XG4gICAgICAgICAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzPXthY2N1bXVsYXRlZFJlY29yZHN9XG4gICAgICAgICAgICAgICAgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2U9e29uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlfVxuICAgICAgICAgICAgICAgIGV2ZW50TWFuYWdlcj17ZXZlbnRNYW5hZ2VyfVxuICAgICAgICAgICAgICAgIGlzUXVlcnlTd2l0Y2hJblByb2dyZXNzUmVmPXtpc1F1ZXJ5U3dpdGNoSW5Qcm9ncmVzc1JlZn1cbiAgICAgICAgICAgICAgICBvbk5hdkJhY2s9e2FzeW5jIChjbGVhclJlc3VsdHMgPSBmYWxzZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgLy8gSGFuZGxlIG5hdmlnYXRpb24gZnJvbSBRdWVyeVRhc2tSZXN1bHRcbiAgICAgICAgICAgICAgICAgIC8vIElmIGNsZWFyUmVzdWx0cyBpcyB0cnVlLCBjbGVhciBldmVyeXRoaW5nIGFuZCBnbyB0byBxdWVyeSB0YWJcbiAgICAgICAgICAgICAgICAgIC8vIElmIGZhbHNlLCBqdXN0IHN3aXRjaCB0byBxdWVyeSB0YWIgd2l0aG91dCBjbGVhcmluZ1xuICAgICAgICAgICAgICAgICAgaWYgKGNsZWFyUmVzdWx0cykge1xuICAgICAgICAgICAgICAgICAgICBoYXNTZWxlY3RlZFJlY29yZHNSZWYuY3VycmVudCA9IGZhbHNlIC8vIFJlc2V0IGZsYWcgd2hlbiBjbGVhcmluZ1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBuYXZUb0Zvcm0odHJ1ZSlcbiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEp1c3Qgc3dpdGNoIHRhYnMsIGRvbid0IGNsZWFyIHJlc3VsdHNcbiAgICAgICAgICAgICAgICAgICAgLy8gTWFyayBhcyBtYW51YWwgc3dpdGNoIHRvIHByZXZlbnQgYXV0by1zd2l0Y2ggdXNlRWZmZWN0IGZyb20gaW50ZXJmZXJpbmdcbiAgICAgICAgICAgICAgICAgICAgbWFudWFsVGFiU3dpdGNoUmVmLmN1cnJlbnQgPSB0cnVlXG4gICAgICAgICAgICAgICAgICAgIHNldEFjdGl2ZVRhYigncXVlcnknKVxuICAgICAgICAgICAgICAgICAgICAvLyBSZXNldCB0aGUgZmxhZyBhZnRlciBhIHNob3J0IGRlbGF5XG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIG1hbnVhbFRhYlN3aXRjaFJlZi5jdXJyZW50ID0gZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgfSwgMTAwKVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApfVxuICAgICAgICA8L1RhYj5cbiAgICAgIDwvVGFicz5cblxuICAgICAgey8qIEVycm9yIE1lc3NhZ2VzICovfVxuICAgICAgeyhzZWxlY3Rpb25FcnJvciB8fCB6b29tRXJyb3IpICYmIChcbiAgICAgICAgPGRpdiBjc3M9e2Nzc2BcbiAgICAgICAgICBwYWRkaW5nOiAwIDE2cHg7XG4gICAgICAgICAgbWFyZ2luLXRvcDogOHB4O1xuICAgICAgICBgfT5cbiAgICAgICAgICB7c2VsZWN0aW9uRXJyb3IgJiYgKFxuICAgICAgICAgICAgPEVycm9yTWVzc2FnZSBcbiAgICAgICAgICAgICAgZXJyb3I9e3NlbGVjdGlvbkVycm9yfSBcbiAgICAgICAgICAgICAgb25EaXNtaXNzPXsoKSA9PiBzZXRTZWxlY3Rpb25FcnJvcihudWxsKX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgKX1cbiAgICAgICAgICB7em9vbUVycm9yICYmIChcbiAgICAgICAgICAgIDxFcnJvck1lc3NhZ2UgXG4gICAgICAgICAgICAgIGVycm9yPXt6b29tRXJyb3J9IFxuICAgICAgICAgICAgICBvbkRpc21pc3M9eygpID0+IHNldFpvb21FcnJvcihudWxsKX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICApfVxuXG4gICAgICB7LyogTG9hZGluZyBJbmRpY2F0b3IgLSBvdmVybGF5cyBvbiB0b3Agb2YgdGFicyAqL31cbiAgICAgIHtzdGFnZSA9PT0gMiAmJiAoXG4gICAgICAgIDxkaXYgY3NzPXtjc3NgXG4gICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICAgIHRvcDogMDtcbiAgICAgICAgICBsZWZ0OiAwO1xuICAgICAgICAgIHJpZ2h0OiAwO1xuICAgICAgICAgIGJvdHRvbTogMDtcbiAgICAgICAgICB6LWluZGV4OiAxMDAwO1xuICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC44KTtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgIGB9PlxuICAgICAgICAgIDxMb2FkaW5nUmVzdWx0IC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cbiAgICA8L2Rpdj5cbiAgKVxufVxuIiwiaW1wb3J0IHtcbiAgdHlwZSBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLFxuICB0eXBlIEltbXV0YWJsZU9iamVjdCxcbiAgdHlwZSBJTVNxbEV4cHJlc3Npb24sXG4gIHR5cGUgRmVhdHVyZUxheWVyUXVlcnlQYXJhbXMsXG4gIE1lc3NhZ2VNYW5hZ2VyLFxuICB0eXBlIFF1ZXJ5UGFyYW1zLFxuICB0eXBlIERhdGFSZWNvcmQsXG4gIERhdGFSZWNvcmRTZXRDaGFuZ2VNZXNzYWdlLFxuICBSZWNvcmRTZXRDaGFuZ2VUeXBlLFxuICB0eXBlIEltbXV0YWJsZUFycmF5LFxuICBkYXRhU291cmNlVXRpbHNcbn0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHR5cGUgeyBJRmllbGRJbmZvIH0gZnJvbSAnQGVzcmkvYXJjZ2lzLXJlc3QtZmVhdHVyZS1zZXJ2aWNlJ1xuaW1wb3J0IHsgdHlwZSBRdWVyeUl0ZW1UeXBlLCBTcGF0aWFsUmVsYXRpb24sIHR5cGUgU3BhdGlhbEZpbHRlck9iaiwgRmllbGRzVHlwZSwgbWFwSlNBUElVbml0VG9Ec1VuaXQsIG1hcEpTQVBJU3BhdGlhbFJlbFRvRHNTcGF0aWFsUmVsIH0gZnJvbSAnLi4vY29uZmlnJ1xuaW1wb3J0IHsgZ2V0RmllbGRJbmZvc0luUG9wdXBDb250ZW50LCBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyIH0gZnJvbSAnLi4vLi4vLi4vc2hhcmVkLWNvZGUvY29tbW9uJ1xuXG5jb25zdCBkZWJ1Z0xvZ2dlciA9IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIoKVxuXG5leHBvcnQgZnVuY3Rpb24gY29tYmluZUZpZWxkcyAocmVzdWx0RGlzcGxheUZpZWxkczogSW1tdXRhYmxlQXJyYXk8c3RyaW5nPiwgcmVzdWx0VGl0bGVFeHByZXNzaW9uOiBzdHJpbmcsIGlkRmllbGQ/OiBzdHJpbmcpOiBzdHJpbmdbXSB7XG4gIGNvbnN0IGZpZWxkcyA9IG5ldyBTZXQ8c3RyaW5nPigpXG4gIHJlc3VsdERpc3BsYXlGaWVsZHM/LmZvckVhY2goaXRlbSA9PiBmaWVsZHMuYWRkKGl0ZW0pKVxuICBpZiAocmVzdWx0VGl0bGVFeHByZXNzaW9uKSB7XG4gICAgY29uc3QgdGVtcGxhdGVzID0gcmVzdWx0VGl0bGVFeHByZXNzaW9uLm1hdGNoKC9cXHtcXHcqXFx9L2cpXG4gICAgaWYgKHRlbXBsYXRlcz8ubGVuZ3RoID4gMCkge1xuICAgICAgdGVtcGxhdGVzLmZvckVhY2goaXRlbSA9PiBmaWVsZHMuYWRkKGl0ZW0uc3Vic3RyaW5nKDEsIGl0ZW0ubGVuZ3RoIC0gMSkpKVxuICAgIH1cbiAgfVxuICBpZiAoaWRGaWVsZCkge1xuICAgIGZpZWxkcy5hZGQoaWRGaWVsZClcbiAgfVxuICByZXR1cm4gQXJyYXkuZnJvbShmaWVsZHMpXG59XG5cbi8qKlxuICogVmFsaWRhdGVzIHVzZXIgaW5wdXQgYmVmb3JlIHF1ZXJ5IGV4ZWN1dGlvbi5cbiAqIEBwYXJhbSBpbnB1dCAtIFRoZSByYXcgdXNlciBpbnB1dCAoc3RyaW5nLCBudW1iZXIsIGV0Yy4pXG4gKiBAcGFyYW0gaXNMaXN0IC0gT3B0aW9uYWwgZmxhZyBpbmRpY2F0aW5nIGlmIHRoZSBpbnB1dCBpcyBmcm9tIGEgbGlzdC9zZWxlY3RvciAobGVuaWVudCB2YWxpZGF0aW9uKVxuICogQHJldHVybnMgYm9vbGVhbiAtIHRydWUgaWYgaW5wdXQgaXMgdmFsaWQsIGZhbHNlIG90aGVyd2lzZVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNRdWVyeUlucHV0VmFsaWQgKGlucHV0OiBhbnksIGlzTGlzdDogYm9vbGVhbiA9IGZhbHNlKTogYm9vbGVhbiB7XG4gIC8vIElmIGl0J3MgYSBsaXN0LWJhc2VkIHNlbGVjdGlvbiAoVW5pcXVlIFZhbHVlcywgRmllbGQgVmFsdWVzKSwgXG4gIC8vIHdlIGFsbG93IGVtcHR5L251bGwgYXMgaXQgbWlnaHQgcmVwcmVzZW50IFwibm8gZmlsdGVyXCIgb3IgdGhlIHVzZXIgXG4gIC8vIGludGVuZHMgdG8gaW50ZXJhY3Qgd2l0aCB0aGUgbGlzdC5cbiAgaWYgKGlzTGlzdCkge1xuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBpZiAoaW5wdXQgPT09IG51bGwgfHwgaW5wdXQgPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG4gIFxuICAvLyBJZiBpdCdzIGEgc3RyaW5nLCBlbnN1cmUgaXQncyBub3QgZW1wdHkgb3IganVzdCB3aGl0ZXNwYWNlXG4gIGlmICh0eXBlb2YgaW5wdXQgPT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIGlucHV0LnRyaW0oKSAhPT0gJydcbiAgfVxuXG4gIC8vIElmIGl0J3MgYW4gYXJyYXkgKG9mdGVuIHVzZWQgaW4gdW5pcXVlIHZhbHVlcyBvciBtdWx0aXBsZSBzZWxlY3Rpb24pXG4gIGlmIChBcnJheS5pc0FycmF5KGlucHV0KSkge1xuICAgIGlmIChpbnB1dC5sZW5ndGggPT09IDApIHJldHVybiBmYWxzZVxuICAgIC8vIENoZWNrIGlmIHRoZSBmaXJzdCBpdGVtIGlzIHZhbGlkICh1c3VhbGx5IHt2YWx1ZTogJy4uLicsIGxhYmVsOiAnLi4uJ30pXG4gICAgY29uc3QgZmlyc3RJdGVtID0gaW5wdXRbMF1cbiAgICBpZiAoZmlyc3RJdGVtICYmIHR5cGVvZiBmaXJzdEl0ZW0gPT09ICdvYmplY3QnICYmICd2YWx1ZScgaW4gZmlyc3RJdGVtKSB7XG4gICAgICByZXR1cm4gaXNRdWVyeUlucHV0VmFsaWQoZmlyc3RJdGVtLnZhbHVlKVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgLy8gSWYgaXQncyBhIGppbXUtY29yZSBJbW11dGFibGUgYXJyYXlcbiAgaWYgKGlucHV0LmFzTXV0YWJsZSAmJiB0eXBlb2YgaW5wdXQudG9BcnJheSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGNvbnN0IGFyciA9IGlucHV0LnRvQXJyYXkoKVxuICAgIGlmIChhcnIubGVuZ3RoID09PSAwKSByZXR1cm4gZmFsc2VcbiAgICBjb25zdCBmaXJzdEl0ZW0gPSBhcnJbMF1cbiAgICBpZiAoZmlyc3RJdGVtICYmIHR5cGVvZiBmaXJzdEl0ZW0gPT09ICdvYmplY3QnICYmICd2YWx1ZScgaW4gZmlyc3RJdGVtKSB7XG4gICAgICByZXR1cm4gaXNRdWVyeUlucHV0VmFsaWQoZmlyc3RJdGVtLnZhbHVlKVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZVxuICB9XG4gIFxuICAvLyBGb3Igb3RoZXIgdHlwZXMgKG51bWJlcnMsIGRhdGVzKSwgaWYgaXQgZXhpc3RzLCB3ZSBjb3VudCBpdCBhcyB2YWxpZFxuICByZXR1cm4gdHJ1ZVxufVxuXG4vKipcbiAqIFNhbml0aXplcyB1c2VyIGlucHV0IGZvciBxdWVyeSB0YXNrcy5cbiAqIDEuIFN0cmlwcyBsZWFkaW5nIGFuZCB0cmFpbGluZyB3aGl0ZXNwYWNlLlxuICogMi4gUHJldmVudHMgYmFzaWMgU1FMIGluamVjdGlvbiBieSBlc2NhcGluZyBzaW5nbGUgcXVvdGVzLlxuICogMy4gSGFuZGxlcyBlbXB0eSBvciB3aGl0ZXNwYWNlLW9ubHkgc3RyaW5ncy5cbiAqIFxuICogQHBhcmFtIGlucHV0IC0gVGhlIHJhdyB1c2VyIGlucHV0IHN0cmluZ1xuICogQHJldHVybnMgU2FuaXRpemVkIHN0cmluZyBvciBudWxsIGlmIGlucHV0IGlzIGVtcHR5XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzYW5pdGl6ZVF1ZXJ5SW5wdXQgKGlucHV0OiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkKTogc3RyaW5nIHwgbnVsbCB7XG4gIGlmICghaW5wdXQgfHwgdHlwZW9mIGlucHV0ICE9PSAnc3RyaW5nJykge1xuICAgIHJldHVybiBudWxsXG4gIH1cbiAgXG4gIGNvbnN0IHRyaW1tZWQgPSBpbnB1dC50cmltKClcbiAgaWYgKHRyaW1tZWQgPT09ICcnKSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuICBcbiAgLy8gQmFzaWMgU1FMIGVzY2FwaW5nOiByZXBsYWNlIHNpbmdsZSBxdW90ZXMgd2l0aCBkb3VibGUgc2luZ2xlIHF1b3Rlc1xuICByZXR1cm4gdHJpbW1lZC5yZXBsYWNlKC8nL2csIFwiJydcIilcbn1cblxuLyoqXG4gKiBTYW5pdGl6ZXMgYWxsIHZhbHVlcyB3aXRoaW4gYW4gSU1TcWxFeHByZXNzaW9uIG9iamVjdC5cbiAqIFxuICogQHBhcmFtIHNxbEV4cHIgLSBUaGUgcmF3IFNRTCBleHByZXNzaW9uIG9iamVjdFxuICogQHJldHVybnMgQSBuZXcgc2FuaXRpemVkIElNU3FsRXhwcmVzc2lvbiBvYmplY3RcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNhbml0aXplU3FsRXhwcmVzc2lvbiAoc3FsRXhwcjogSU1TcWxFeHByZXNzaW9uKTogSU1TcWxFeHByZXNzaW9uIHtcbiAgaWYgKCFzcWxFeHByIHx8ICFzcWxFeHByLnBhcnRzKSB7XG4gICAgcmV0dXJuIHNxbEV4cHJcbiAgfVxuXG4gIGxldCBzYW5pdGl6ZWRFeHByID0gc3FsRXhwclxuICBzcWxFeHByLnBhcnRzLmZvckVhY2goKHBhcnQsIGluZGV4KSA9PiB7XG4gICAgaWYgKHBhcnQudHlwZSA9PT0gJ1NJTkdMRScgJiYgcGFydC52YWx1ZU9wdGlvbnM/LnZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGNvbnN0IHJhd1ZhbHVlID0gcGFydC52YWx1ZU9wdGlvbnMudmFsdWVcbiAgICAgIFxuICAgICAgLy8gQ0FTRSAxOiBTaW1wbGUgU3RyaW5nXG4gICAgICBpZiAodHlwZW9mIHJhd1ZhbHVlID09PSAnc3RyaW5nJykge1xuICAgICAgICBjb25zdCBzYW5pdGl6ZWRWYWx1ZSA9IHNhbml0aXplUXVlcnlJbnB1dChyYXdWYWx1ZSlcbiAgICAgICAgaWYgKHNhbml0aXplZFZhbHVlICE9PSByYXdWYWx1ZSkge1xuICAgICAgICAgIHNhbml0aXplZEV4cHIgPSBzYW5pdGl6ZWRFeHByLnNldEluKFsncGFydHMnLCBpbmRleCwgJ3ZhbHVlT3B0aW9ucycsICd2YWx1ZSddLCBzYW5pdGl6ZWRWYWx1ZSlcbiAgICAgICAgfVxuICAgICAgfSBcbiAgICAgIC8vIENBU0UgMjogQXJyYXkgb2Ygb2JqZWN0cyAoVW5pcXVlIFZhbHVlcyAvIERyb3Bkb3ducylcbiAgICAgIC8vIFdlIG11c3QgcHJlc2VydmUgdGhlIEltbXV0YWJsZSBzdHJ1Y3R1cmUgdG8gYXZvaWQgXCJhc011dGFibGVcIiBlcnJvcnNcbiAgICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkocmF3VmFsdWUpIHx8IChyYXdWYWx1ZSAmJiB0eXBlb2YgKHJhd1ZhbHVlIGFzIGFueSkudG9BcnJheSA9PT0gJ2Z1bmN0aW9uJykpIHtcbiAgICAgICAgY29uc3QgaXNJbW11dGFibGUgPSB0eXBlb2YgKHJhd1ZhbHVlIGFzIGFueSkudG9BcnJheSA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICBjb25zdCBhcnIgPSBpc0ltbXV0YWJsZSA/IChyYXdWYWx1ZSBhcyBhbnkpLnRvQXJyYXkoKSA6IChyYXdWYWx1ZSBhcyBhbnlbXSlcbiAgICAgICAgXG4gICAgICAgIGxldCBjaGFuZ2VkID0gZmFsc2VcbiAgICAgICAgY29uc3Qgc2FuaXRpemVkQXJyID0gYXJyLm1hcChpdGVtID0+IHtcbiAgICAgICAgICBpZiAoaXRlbSAmJiB0eXBlb2YgaXRlbSA9PT0gJ29iamVjdCcgJiYgJ3ZhbHVlJyBpbiBpdGVtICYmIHR5cGVvZiBpdGVtLnZhbHVlID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgY29uc3Qgc2FuaXRpemVkVmFsID0gc2FuaXRpemVRdWVyeUlucHV0KGl0ZW0udmFsdWUpXG4gICAgICAgICAgICBpZiAoc2FuaXRpemVkVmFsICE9PSBpdGVtLnZhbHVlKSB7XG4gICAgICAgICAgICAgIGNoYW5nZWQgPSB0cnVlXG4gICAgICAgICAgICAgIHJldHVybiB7IC4uLml0ZW0sIHZhbHVlOiBzYW5pdGl6ZWRWYWwgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gaXRlbVxuICAgICAgICB9KVxuICAgICAgICBcbiAgICAgICAgaWYgKGNoYW5nZWQpIHtcbiAgICAgICAgICAvLyBJZiBpdCB3YXMgSW1tdXRhYmxlLCB3ZSBzaG91bGQgaWRlYWxseSB1c2UgSW1tdXRhYmxlIG1ldGhvZHMgdG8gdXBkYXRlLFxuICAgICAgICAgIC8vIGJ1dCBzZXRJbiBvbiB0aGUgdG9wLWxldmVsIGV4cHJlc3Npb24gd2l0aCBhIHBsYWluIGFycmF5L29iamVjdCBcbiAgICAgICAgICAvLyB1c3VhbGx5IHRyaWdnZXJzIHRoZSBmcmFtZXdvcmsncyBhdXRvLWNvbnZlcnNpb24uXG4gICAgICAgICAgc2FuaXRpemVkRXhwciA9IHNhbml0aXplZEV4cHIuc2V0SW4oWydwYXJ0cycsIGluZGV4LCAndmFsdWVPcHRpb25zJywgJ3ZhbHVlJ10sIHNhbml0aXplZEFycilcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSlcblxuICByZXR1cm4gc2FuaXRpemVkRXhwclxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UG9wdXBUZW1wbGF0ZSAoXG4gIG91dHB1dERTOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLFxuICBxdWVyeUl0ZW06IEltbXV0YWJsZU9iamVjdDxRdWVyeUl0ZW1UeXBlPlxuKTogUHJvbWlzZTx7IHBvcHVwVGVtcGxhdGU/OiBfX2VzcmkuUG9wdXBUZW1wbGF0ZSwgZGVmYXVsdFBvcHVwVGVtcGxhdGU/OiBfX2VzcmkuUG9wdXBUZW1wbGF0ZSB9PiB7XG4gIGNvbnN0IHsgcmVzdWx0RmllbGRzVHlwZSwgcmVzdWx0RGlzcGxheUZpZWxkcywgcmVzdWx0VGl0bGVFeHByZXNzaW9uID0gJycgfSA9IHF1ZXJ5SXRlbVxuICBjb25zdCBjdXJyZW50T3JpZ2luRHM6IEZlYXR1cmVMYXllckRhdGFTb3VyY2UgPSBvdXRwdXREUy5nZXRPcmlnaW5EYXRhU291cmNlcygpWzBdIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgY29uc3QgcG9wdXBJbmZvID0gY3VycmVudE9yaWdpbkRzLmdldFBvcHVwSW5mbygpXG5cbiAgaWYgKHJlc3VsdEZpZWxkc1R5cGUgPT09IEZpZWxkc1R5cGUuU2VsZWN0QXR0cmlidXRlcykge1xuICAgIGxldCBmaWVsZHM6IHN0cmluZ1tdXG4gICAgaWYgKHJlc3VsdERpc3BsYXlGaWVsZHMgPT0gbnVsbCkge1xuICAgICAgY29uc3QgZmllbGRzSW5Db250ZW50ID0gZ2V0RmllbGRJbmZvc0luUG9wdXBDb250ZW50KHBvcHVwSW5mbylcbiAgICAgIGlmIChmaWVsZHNJbkNvbnRlbnQubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCB1bmlxdWVGaWVsZHMgPSBuZXcgU2V0KGZpZWxkc0luQ29udGVudC5tYXAoZWxlID0+IGVsZS5maWVsZE5hbWUpKVxuICAgICAgICBmaWVsZHMgPSBBcnJheS5mcm9tKHVuaXF1ZUZpZWxkcylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIHJldHVybiBhbGwgZmllbGRzIGJ5IGRlZmF1bHRcbiAgICAgICAgY29uc3QgYWxsRmllbGRzU2NoZW1hID0gb3V0cHV0RFMuZ2V0U2NoZW1hKClcbiAgICAgICAgZmllbGRzID0gYWxsRmllbGRzU2NoZW1hPy5maWVsZHMgPyBPYmplY3QudmFsdWVzKGFsbEZpZWxkc1NjaGVtYS5maWVsZHMpLm1hcChmaWVsZCA9PiBmaWVsZC5qaW11TmFtZSkgOiBbXVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBmaWVsZHMgPSByZXN1bHREaXNwbGF5RmllbGRzLmFzTXV0YWJsZSh7IGRlZXA6IHRydWUgfSlcbiAgICB9XG4gICAgaWYgKHBvcHVwSW5mbykge1xuICAgICAgY29uc3QgZmllbGRJbmZvcyA9IFtdXG4gICAgICBmaWVsZHMuZm9yRWFjaChmaWVsZCA9PiB7XG4gICAgICAgIGNvbnN0IGZpZWxkSW5mbyA9IHBvcHVwSW5mby5maWVsZEluZm9zLmZpbmQoZmllbGRJbmZvID0+IGZpZWxkSW5mby5maWVsZE5hbWUgPT09IGZpZWxkKVxuICAgICAgICBpZiAoZmllbGRJbmZvKSB7XG4gICAgICAgICAgZmllbGRJbmZvLnZpc2libGUgPSB0cnVlXG4gICAgICAgICAgZmllbGRJbmZvcy5wdXNoKGZpZWxkSW5mbylcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmaWVsZEluZm9zLnB1c2goe1xuICAgICAgICAgICAgZmllbGROYW1lOiBmaWVsZCxcbiAgICAgICAgICAgIGxhYmVsOiBmaWVsZFxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICByZXR1cm4ge1xuICAgICAgICBwb3B1cFRlbXBsYXRlOiB7XG4gICAgICAgICAgZmllbGRJbmZvcyxcbiAgICAgICAgICBjb250ZW50OiBbe1xuICAgICAgICAgICAgdHlwZTogJ2ZpZWxkcydcbiAgICAgICAgICB9XSxcbiAgICAgICAgICB0aXRsZTogcmVzdWx0VGl0bGVFeHByZXNzaW9uXG4gICAgICAgIH1cbiAgICAgIH0gYXMgYW55XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICBwb3B1cFRlbXBsYXRlOiB7XG4gICAgICAgIGZpZWxkSW5mb3M6IGZpZWxkcy5tYXAoZmllbGQgPT4gKHtcbiAgICAgICAgICBmaWVsZE5hbWU6IGZpZWxkLFxuICAgICAgICAgIGxhYmVsOiBmaWVsZFxuICAgICAgICB9KSksXG4gICAgICAgIGNvbnRlbnQ6IFt7XG4gICAgICAgICAgdHlwZTogJ2ZpZWxkcydcbiAgICAgICAgfV0sXG4gICAgICAgIHRpdGxlOiByZXN1bHRUaXRsZUV4cHJlc3Npb25cbiAgICAgIH0gYXMgYW55XG4gICAgfVxuICB9XG4gIC8vIHRoZSBzb3VyY2UgbGF5ZXIgd2lsbCBwcm92aWRlIHBvcHVwIGluZm9cbiAgbGV0IGxheWVyT2JqZWN0XG4gIGlmIChjdXJyZW50T3JpZ2luRHMubGF5ZXIpIHtcbiAgICBsYXllck9iamVjdCA9IGN1cnJlbnRPcmlnaW5Ecy5sYXllclxuICB9IGVsc2Uge1xuICAgIGxheWVyT2JqZWN0ID0gYXdhaXQgY3VycmVudE9yaWdpbkRzLmNyZWF0ZUpTQVBJTGF5ZXJCeURhdGFTb3VyY2UoKVxuICB9XG4gIGlmIChsYXllck9iamVjdCkge1xuICAgIGF3YWl0IGxheWVyT2JqZWN0LmxvYWQoKVxuICB9XG4gIHJldHVybiB7IGRlZmF1bHRQb3B1cFRlbXBsYXRlOiBsYXllck9iamVjdD8uYXNzb2NpYXRlZExheWVyPy5kZWZhdWx0UG9wdXBUZW1wbGF0ZSB8fCBsYXllck9iamVjdD8uZGVmYXVsdFBvcHVwVGVtcGxhdGUgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVRdWVyeVBhcmFtcyAoXG4gIG91dHB1dERTOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLFxuICBzcWxFeHByOiBJTVNxbEV4cHJlc3Npb24sXG4gIHNwYXRpYWxGaWx0ZXI6IFNwYXRpYWxGaWx0ZXJPYmosXG4gIHF1ZXJ5SXRlbTogSW1tdXRhYmxlT2JqZWN0PFF1ZXJ5SXRlbVR5cGU+LFxuICBwYWdlOiBudW1iZXIsXG4gIHBhZ2VTaXplOiBudW1iZXJcbik6IFF1ZXJ5UGFyYW1zIHtcbiAgY29uc3QgY3VycmVudFF1ZXJ5RHNKc29uID0gb3V0cHV0RFMuZ2V0RGF0YVNvdXJjZUpzb24oKVxuICBjb25zdCBjdXJyZW50T3JpZ2luRHM6IEZlYXR1cmVMYXllckRhdGFTb3VyY2UgPSBvdXRwdXREUy5nZXRPcmlnaW5EYXRhU291cmNlcygpWzBdIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgY29uc3QgaXNMb2NhbERzID0gY3VycmVudFF1ZXJ5RHNKc29uPy5pc0RhdGFJbkRhdGFTb3VyY2VJbnN0YW5jZVxuICBpZiAoaXNMb2NhbERzKSB7XG4gICAgb3V0cHV0RFMuc2V0U291cmNlUmVjb3JkcyhjdXJyZW50T3JpZ2luRHMuZ2V0U291cmNlUmVjb3JkcygpKVxuICB9XG5cbiAgY29uc3QgeyB1c2VBdHRyaWJ1dGVGaWx0ZXIsIHVzZVNwYXRpYWxGaWx0ZXIsIHNvcnRPcHRpb25zLCByZXN1bHRGaWVsZHNUeXBlLCByZXN1bHREaXNwbGF5RmllbGRzLCByZXN1bHRUaXRsZUV4cHJlc3Npb24gfSA9IHF1ZXJ5SXRlbVxuICBcbiAgLy8gREVURVJNSU5FIE1JTklNQUwgRklFTERTIChUaGUgXCJGaWVsZCBTaHJlZGRlclwiIE9wdGltaXphdGlvbilcbiAgLy8gVG8gYWNoaWV2ZSBwZXJmb3JtYW5jZSBwYXJpdHkgd2l0aCBXZWIgQXBwQnVpbGRlciwgd2UgbXVzdCBhdm9pZCBmZXRjaGluZyBldmVyeSBcbiAgLy8gY29sdW1uIGluIHRoZSBkYXRhYmFzZSAoKiBvciBhbGwpLiBXZSBzdXJnaWNhbGx5IHJlcXVlc3Qgb25seSB0aGUgZmllbGRzIFxuICAvLyBuZWVkZWQgZm9yIHRoZSBUaXRsZSwgdGhlIEF0dHJpYnV0ZSBMaXN0LCBhbmQgdGhlIElEIGZpZWxkLlxuICBsZXQgb3V0cHV0RmllbGRzOiBzdHJpbmdbXSA9IFtdXG4gIGlmIChyZXN1bHRGaWVsZHNUeXBlID09PSBGaWVsZHNUeXBlLlNlbGVjdEF0dHJpYnV0ZXMgJiYgcmVzdWx0RGlzcGxheUZpZWxkcykge1xuICAgIG91dHB1dEZpZWxkcyA9IGNvbWJpbmVGaWVsZHMocmVzdWx0RGlzcGxheUZpZWxkcyBhcyBhbnksIHJlc3VsdFRpdGxlRXhwcmVzc2lvbiB8fCAnJywgb3V0cHV0RFMuZ2V0SWRGaWVsZCgpKVxuICB9IGVsc2Uge1xuICAgIC8vIFBvcHVwIG1vZGU6IEdldCBvbmx5IHZpc2libGUgZmllbGRzIGZyb20gcG9wdXAgaW5mb1xuICAgIGNvbnN0IHBvcHVwSW5mbyA9IGN1cnJlbnRPcmlnaW5Ecy5nZXRQb3B1cEluZm8oKVxuICAgIGNvbnN0IGZpZWxkTmFtZXMgPSBPYmplY3QudmFsdWVzKGN1cnJlbnRPcmlnaW5Ecy5nZXRTY2hlbWEoKS5maWVsZHMgPz8ge30pLm1hcChmID0+IGYubmFtZSlcbiAgICBjb25zdCB2YWxpZEZpZWxkSW5mb3MgPSBwb3B1cEluZm8/LmZpZWxkSW5mb3M/LmZpbHRlcihmaWVsZEluZm8gPT4gZmllbGRJbmZvLnZpc2libGUgIT09IGZhbHNlICYmIGZpZWxkTmFtZXMuaW5jbHVkZXMoZmllbGRJbmZvLmZpZWxkTmFtZSkpXG4gICAgb3V0cHV0RmllbGRzID0gdmFsaWRGaWVsZEluZm9zPy5tYXAoZmllbGRJbmZvID0+IGZpZWxkSW5mby5maWVsZE5hbWUpIHx8IFtdXG4gICAgXG4gICAgLy8gQWx3YXlzIGVuc3VyZSBJRCBmaWVsZCBpcyBpbmNsdWRlZFxuICAgIGNvbnN0IGlkRmllbGQgPSBvdXRwdXREUy5nZXRJZEZpZWxkKClcbiAgICBpZiAoaWRGaWVsZCAmJiAhb3V0cHV0RmllbGRzLmluY2x1ZGVzKGlkRmllbGQpKSB7XG4gICAgICBvdXRwdXRGaWVsZHMucHVzaChpZEZpZWxkKVxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IG1lcmdlZFF1ZXJ5UGFyYW1zID0gb3V0cHV0RFMubWVyZ2VRdWVyeVBhcmFtcyhjdXJyZW50T3JpZ2luRHMuZ2V0Q3VycmVudFF1ZXJ5UGFyYW1zKCkgPz8ge30sIHtcbiAgICB3aGVyZTogKHVzZUF0dHJpYnV0ZUZpbHRlciAmJiBzcWxFeHByPy5zcWwpID8gZGF0YVNvdXJjZVV0aWxzLmdldEFyY0dJU1NRTChzcWxFeHByLCBvdXRwdXREUykuc3FsIDogJzE9MScsXG4gICAgc3FsRXhwcmVzc2lvbjogKHVzZUF0dHJpYnV0ZUZpbHRlciAmJiBzcWxFeHByPy5zcWwpID8gc3FsRXhwciA6IG51bGwsXG4gICAgLy8gRk9SQ0UgbWluaW1hbCBmaWVsZHMgaGVyZSB0byBvdmVycmlkZSBhbnkgZnJhbWV3b3JrIFwiKlwiIG9yIFwiYWxsXCJcbiAgICBvdXRGaWVsZHM6IG91dHB1dEZpZWxkc1xuICB9IGFzIGFueSlcblxuICAvLyBQRVJGT1JNQU5DRSBPUFRJTUlaQVRJT046IFVuaXZlcnNhbCBTUUwgT3B0aW1pemVyXG4gIC8vIFdlIG5vcm1hbGl6ZSB0aGUgdXNlcidzIGlucHV0IHRvIFVQUEVSQ0FTRSB0byBlbnN1cmUgY2FzZS1pbnNlbnNpdGl2aXR5IHdoaWxlIFxuICAvLyB1bndyYXBwaW5nIGFueSBMT1dFUigpIGZ1bmN0aW9uIGFyb3VuZCB0aGUgZmllbGQgbmFtZS4gVGhpcyBhbGxvd3MgdGhlIGRhdGFiYXNlIFxuICAvLyB0byB1c2UgaXRzIGF0dHJpYnV0ZSBpbmRleGVzIChTQVJHYWJsZSBxdWVyeSkuXG4gIGlmIChtZXJnZWRRdWVyeVBhcmFtcy53aGVyZSAmJiBtZXJnZWRRdWVyeVBhcmFtcy53aGVyZS5pbmNsdWRlcygnTE9XRVIoJykpIHtcbiAgICBjb25zdCBvcHRpbWl6ZWRXaGVyZSA9IG1lcmdlZFF1ZXJ5UGFyYW1zLndoZXJlLnJlcGxhY2UoL0xPV0VSXFwoKFteKV0rKVxcKVxccyooPXxMSUtFKVxccyonKFteJ10qKScvZ2ksIChtYXRjaCwgZmllbGQsIG9wZXJhdG9yLCB2YWx1ZSkgPT4ge1xuICAgICAgLy8gTm9ybWFsaXplIGJvdGggc2lkZXMgdG8gVVBQRVJDQVNFLiBUaGlzIHdvcmtzIGZvciBBTlkgZmllbGQgbmFtZS5cbiAgICAgIC8vIFdlIGtlZXAgdGhlIGZpZWxkIG5hbWUgXCJuYWtlZFwiIHNvIHRoZSBpbmRleCBpcyB1c2VkLlxuICAgICAgcmV0dXJuIGAke2ZpZWxkfSAke29wZXJhdG9yfSAnJHt2YWx1ZS50b1VwcGVyQ2FzZSgpfSdgXG4gICAgfSlcbiAgICBcbiAgICBpZiAob3B0aW1pemVkV2hlcmUgIT09IG1lcmdlZFF1ZXJ5UGFyYW1zLndoZXJlKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICAgIGV2ZW50OiAnc3FsLW9wdGltaXplZCcsXG4gICAgICAgIG9yaWdpbmFsOiBtZXJnZWRRdWVyeVBhcmFtcy53aGVyZSxcbiAgICAgICAgb3B0aW1pemVkOiBvcHRpbWl6ZWRXaGVyZVxuICAgICAgfSlcbiAgICAgIG1lcmdlZFF1ZXJ5UGFyYW1zLndoZXJlID0gb3B0aW1pemVkV2hlcmVcbiAgICB9XG4gIH1cblxuICAvLyBjb21wb3NlIHF1ZXJ5IHBhcmFtcyBmb3IgcXVlcnlcbiAgY29uc3QgcXVlcnlQYXJhbXM6IEZlYXR1cmVMYXllclF1ZXJ5UGFyYW1zID0ge1xuICAgIC8vIHVybDogZHMudXJsLFxuICAgIHJldHVybkdlb21ldHJ5OiB0cnVlLFxuICAgIC8qKiBcbiAgICAgKiBQRVJGT1JNQU5DRSBPUFRJTUlaQVRJT046IEZvcmNlIGxvd2VyIHByZWNpc2lvbiBmb3IgYWxsIGRpc3BsYXkgcXVlcmllcy5cbiAgICAgKi9cbiAgICBtYXhBbGxvd2FibGVPZmZzZXQ6IDAuMSwgXG4gICAgcGFnZSxcbiAgICAvLyBMaW1pdCBwYWdlU2l6ZSB0byBhIHNhbmUgZGVmYXVsdCBpZiBub3QgcHJvdmlkZWQgb3IgdG9vIGxhcmdlXG4gICAgcGFnZVNpemU6IChwYWdlU2l6ZSAmJiBwYWdlU2l6ZSA8IDEwMDApID8gcGFnZVNpemUgOiAxMDAwLFxuICAgIC4uLm1lcmdlZFF1ZXJ5UGFyYW1zXG4gIH1cblxuICAvLyBGaW5hbCBvdmVycmlkZSB0byBlbnN1cmUgbm8gXCIqXCIgbGVha3MgdGhyb3VnaCBmcm9tIGFueSBtZXJnZSBvcGVyYXRpb25cbiAgaWYgKCFxdWVyeVBhcmFtcy5vdXRGaWVsZHMgfHwgcXVlcnlQYXJhbXMub3V0RmllbGRzLmluY2x1ZGVzKCcqJykpIHtcbiAgICBxdWVyeVBhcmFtcy5vdXRGaWVsZHMgPSBvdXRwdXRGaWVsZHNcbiAgfVxuXG4gIC8vIERpYWdub3N0aWMgbG9nOiBTaG93IGV4YWN0bHkgV0hJQ0ggZmllbGRzIGFyZSBiZWluZyBzZW50XG4gIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICBldmVudDogJ3JlcXVlc3RpbmctZGF0YScsXG4gICAgZmllbGRzQ291bnQ6IHF1ZXJ5UGFyYW1zLm91dEZpZWxkcz8ubGVuZ3RoLFxuICAgIGZpZWxkczogcXVlcnlQYXJhbXMub3V0RmllbGRzPy5qb2luKCcsICcpLFxuICAgIHBhZ2VTaXplOiBxdWVyeVBhcmFtcy5wYWdlU2l6ZSxcbiAgICBvZmZzZXQ6IHF1ZXJ5UGFyYW1zLm1heEFsbG93YWJsZU9mZnNldFxuICB9KVxuXG4gIGlmICh1c2VTcGF0aWFsRmlsdGVyICYmIHNwYXRpYWxGaWx0ZXI/Lmdlb21ldHJ5KSB7XG4gICAgY29uc3QgeyBnZW9tZXRyeSwgcmVsYXRpb24gPSBTcGF0aWFsUmVsYXRpb24uSW50ZXJzZWN0LCBidWZmZXIgfSA9IHNwYXRpYWxGaWx0ZXJcblxuICAgIGNvbnN0IHNwYXRpYWxRdWVyeVBhcmFtczogRmVhdHVyZUxheWVyUXVlcnlQYXJhbXMgPSB7XG4gICAgICBnZW9tZXRyeVR5cGU6IGRhdGFTb3VyY2VVdGlscy5jaGFuZ2VKU0FQSUdlb21ldHJ5VHlwZVRvUmVzdEFQSUdlb21ldHJ5VHlwZShnZW9tZXRyeS50eXBlKSxcbiAgICAgIGdlb21ldHJ5OiBnZW9tZXRyeS50b0pTT04oKSxcbiAgICAgIHNwYXRpYWxSZWw6IG1hcEpTQVBJU3BhdGlhbFJlbFRvRHNTcGF0aWFsUmVsW3JlbGF0aW9uXSxcbiAgICAgIGRpc3RhbmNlOiBidWZmZXI/LmRpc3RhbmNlLFxuICAgICAgdW5pdHM6IGJ1ZmZlcj8udW5pdCA/IG1hcEpTQVBJVW5pdFRvRHNVbml0W2J1ZmZlci51bml0XSA6IHVuZGVmaW5lZFxuICAgIH1cbiAgICBPYmplY3QuYXNzaWduKHF1ZXJ5UGFyYW1zLCBzcGF0aWFsUXVlcnlQYXJhbXMpXG4gIH1cblxuICBpZiAoc29ydE9wdGlvbnM/Lmxlbmd0aCA+IDApIHtcbiAgICBPYmplY3QuYXNzaWduKHF1ZXJ5UGFyYW1zLCB7XG4gICAgICBvcmRlckJ5RmllbGRzOiBzb3J0T3B0aW9ucy5tYXAoaXRlbSA9PiBgJHtpdGVtLmppbXVGaWVsZE5hbWV9ICR7aXRlbS5vcmRlcn1gKVxuICAgIH0pXG4gIH1cblxuICByZXR1cm4gcXVlcnlQYXJhbXNcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGV4ZWN1dGVDb3VudFF1ZXJ5IChcbiAgd2lkZ2V0SWQ6IHN0cmluZyxcbiAgb3V0cHV0RFM6IEZlYXR1cmVMYXllckRhdGFTb3VyY2UsXG4gIHF1ZXJ5UGFyYW1zOiBRdWVyeVBhcmFtc1xuKTogUHJvbWlzZTxudW1iZXI+IHtcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgb3V0cHV0RFMubG9hZENvdW50KHF1ZXJ5UGFyYW1zLCB7IHdpZGdldElkLCByZWZyZXNoOiB0cnVlIH0pXG4gIHJldHVybiByZXN1bHQgIT0gbnVsbCA/IHJlc3VsdCA6IDBcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGV4ZWN1dGVRdWVyeSAoXG4gIHdpZGdldElkOiBzdHJpbmcsXG4gIHF1ZXJ5SXRlbTogSW1tdXRhYmxlT2JqZWN0PFF1ZXJ5SXRlbVR5cGU+LFxuICBvdXRwdXREUzogRmVhdHVyZUxheWVyRGF0YVNvdXJjZSxcbiAgcXVlcnlQYXJhbXM6IFF1ZXJ5UGFyYW1zXG4pOiBQcm9taXNlPHsgcmVjb3Jkcz86IERhdGFSZWNvcmRbXSwgZmllbGRzPzogc3RyaW5nW10gfT4ge1xuICBjb25zdCBwb3B1cEluZm8gPSBvdXRwdXREUy5nZXRQb3B1cEluZm8oKVxuXG4gIGNvbnN0IGxheWVyRGVmaW5pdGlvbiA9IG91dHB1dERTLmdldExheWVyRGVmaW5pdGlvbigpXG4gIGNvbnN0IGdldERlZmF1bHRGaWVsZEluZm9zID0gKCkgPT5cbiAgICBbXG4gICAgICB7IGZpZWxkTmFtZTogbGF5ZXJEZWZpbml0aW9uPy5vYmplY3RJZEZpZWxkID8/ICdvYmplY3RpZCcsIGxhYmVsOiAnT0JKRUNUSUQnLCB0b29sdGlwOiAnJywgdmlzaWJsZTogdHJ1ZSB9XG4gICAgXSBhcyBJRmllbGRJbmZvW11cbiAgY29uc3QgZmllbGRJbmZvcyA9ICgoZmllbGRJbmZvcykgPT4gKGZpZWxkSW5mb3MubGVuZ3RoID8gZmllbGRJbmZvcyA6IGdldERlZmF1bHRGaWVsZEluZm9zKCkpKShcbiAgICAocG9wdXBJbmZvPy5maWVsZEluZm9zIHx8IFtdKS5maWx0ZXIoKGkpID0+IGkudmlzaWJsZSlcbiAgKVxuICAvLyBjb25zdCBmaWVsZHMgPSBvdXRwdXREUy5nZXRTY2hlbWEoKT8uZmllbGRzXG4gIC8vIGxldCBzZWxlY3RlZEZpZWxkTmFtZXNcbiAgLy8gaWYgKHF1ZXJ5SXRlbS5yZXN1bHRGaWVsZHNUeXBlID09PSBGaWVsZHNUeXBlLlNlbGVjdEF0dHJpYnV0ZXMpIHtcbiAgLy8gICBzZWxlY3RlZEZpZWxkTmFtZXMgPSBbXS5jb25jYXQocXVlcnlJdGVtLnJlc3VsdERpc3BsYXlGaWVsZHMsIHF1ZXJ5SXRlbS5yZXN1bHRUaXRsZUZpZWxkcylcbiAgLy8gfSBlbHNlIHtcbiAgLy8gICBzZWxlY3RlZEZpZWxkTmFtZXMgPSBmaWVsZEluZm9zLm1hcCgoZmllbGRJbmZvKSA9PiBmaWVsZEluZm8uZmllbGROYW1lKVxuICAvLyB9XG4gIC8vIGNvbnN0IHNlbGVjdGVkRmllbGRKaW11TmFtZXMgPSBmaWVsZHNcbiAgLy8gICA/IE9iamVjdC5rZXlzKGZpZWxkcykuZmlsdGVyKChqaW11TmFtZSkgPT4gc2VsZWN0ZWRGaWVsZE5hbWVzLmluY2x1ZGVzKGZpZWxkc1tqaW11TmFtZV0ubmFtZSkpXG4gIC8vICAgOiBbXVxuICAvLyBvdXRwdXREUy5zZXRTZWxlY3RlZEZpZWxkcyhzZWxlY3RlZEZpZWxkSmltdU5hbWVzKVxuICBjb25zdCBzdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKVxuICBsZXQgcmVjb3JkcyA9IGF3YWl0IG91dHB1dERTLmxvYWQocXVlcnlQYXJhbXMsIHsgd2lkZ2V0SWQgfSlcbiAgY29uc3QgZmV0Y2hUaW1lID0gcGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydFRpbWVcbiAgXG4gIGlmIChyZWNvcmRzID09IG51bGwpIHtcbiAgICByZWNvcmRzID0gW11cbiAgfVxuICBjb25zdCBvcmlnaW5EczogRmVhdHVyZUxheWVyRGF0YVNvdXJjZSA9IG91dHB1dERTLmdldE9yaWdpbkRhdGFTb3VyY2VzKClbMF0gYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICBcbiAgY29uc3QgbGF5ZXJTdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKVxuICBjb25zdCBsYXllck9iamVjdCA9IGF3YWl0IGdldExheWVyT2JqZWN0KG9yaWdpbkRzKVxuICBjb25zdCBsYXllclRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKSAtIGxheWVyU3RhcnRUaW1lXG5cbiAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgIGV2ZW50OiAncXVlcnktY29tcGxldGUnLFxuICAgIGZldGNoVGltZTogTWF0aC5yb3VuZChmZXRjaFRpbWUpLFxuICAgIGxheWVyVGltZTogTWF0aC5yb3VuZChsYXllclRpbWUpLFxuICAgIHRvdGFsVGltZTogTWF0aC5yb3VuZChwZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0VGltZSksXG4gICAgcmVjb3JkQ291bnQ6IHJlY29yZHMubGVuZ3RoXG4gIH0pXG4gIFxuICByZWNvcmRzLmZvckVhY2goKHJlY29yZCkgPT4ge1xuICAgIGNvbnN0IGZlYXR1cmUgPSAocmVjb3JkIGFzIGFueSkuZmVhdHVyZVxuICAgIGlmIChsYXllck9iamVjdCkge1xuICAgICAgZmVhdHVyZS5zb3VyY2VMYXllciA9IChsYXllck9iamVjdCBhcyBhbnkpLmFzc29jaWF0ZWRMYXllciB8fCBsYXllck9iamVjdFxuICAgIH1cbiAgICBmZWF0dXJlLmxheWVyID0gZmVhdHVyZS5zb3VyY2VMYXllclxuICB9KVxuICBjb25zdCBxdWVyeVJlc3VsdCA9IHtcbiAgICByZWNvcmRzLFxuICAgIGZpZWxkczogZmllbGRJbmZvcy5tYXAoKGZpZWxkSW5mbykgPT4gZmllbGRJbmZvLmZpZWxkTmFtZSlcbiAgfVxuXG4gIC8vIHB1Ymxpc2ggbWVzc2FnZVxuICBjb25zdCBkYXRhUmVjb3JkU2V0Q2hhbmdlTWVzc2FnZSA9IG5ldyBEYXRhUmVjb3JkU2V0Q2hhbmdlTWVzc2FnZSh3aWRnZXRJZCwgUmVjb3JkU2V0Q2hhbmdlVHlwZS5DcmVhdGVVcGRhdGUsIFt7XG4gICAgcmVjb3Jkczogb3V0cHV0RFMuZ2V0QWxsTG9hZGVkUmVjb3JkcygpLFxuICAgIGZpZWxkczogcXVlcnlSZXN1bHQuZmllbGRzLFxuICAgIGRhdGFTb3VyY2U6IG91dHB1dERTLFxuICAgIG5hbWU6IG91dHB1dERTLmlkLFxuICAgIGxhYmVsOiBvdXRwdXREUy5nZXRMYWJlbCgpXG4gIH1dKVxuICBNZXNzYWdlTWFuYWdlci5nZXRJbnN0YW5jZSgpLnB1Ymxpc2hNZXNzYWdlKGRhdGFSZWNvcmRTZXRDaGFuZ2VNZXNzYWdlKVxuXG4gIHJldHVybiBxdWVyeVJlc3VsdFxufVxuXG5hc3luYyBmdW5jdGlvbiBnZXRMYXllck9iamVjdCAoZGF0YVNvdXJjZTogRmVhdHVyZUxheWVyRGF0YVNvdXJjZSkge1xuICBjb25zdCBsYXllck9iamVjdCA9IGF3YWl0IGRhdGFTb3VyY2UuY3JlYXRlSlNBUElMYXllckJ5RGF0YVNvdXJjZSgpIGFzIF9fZXNyaS5MYXllclxuICAvLyBsYXllck9iamVjdCBtYXkgYmUgdW5kZWZpbmVkIGlmIHRoZSBkYXRhIHNvdXJjZSBpcyBhZGRlZCBieSBVUkxcbiAgaWYgKGxheWVyT2JqZWN0KSB7XG4gICAgYXdhaXQgbGF5ZXJPYmplY3QubG9hZCgpXG4gIH1cbiAgcmV0dXJuIGxheWVyT2JqZWN0XG59XG5cblxuIiwiLyoqXG4gKiBVdGlsaXR5IGZ1bmN0aW9ucyBmb3IgbWFuYWdpbmcgcmVzdWx0cyBhY2N1bXVsYXRpb24gaW4gUXVlcnlTaW1wbGUgd2lkZ2V0LlxuICogSGFuZGxlcyBcIkFkZCB0b1wiIGFuZCBcIlJlbW92ZSBmcm9tXCIgbW9kZXMgZm9yIGFjY3VtdWxhdGluZyBxdWVyeSByZXN1bHRzLlxuICovXG5cbmltcG9ydCB0eXBlIHsgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSwgRmVhdHVyZURhdGFSZWNvcmQsIERhdGFSZWNvcmQgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBEYXRhU291cmNlTWFuYWdlciwgRGF0YVNvdXJjZVN0YXR1cywgTWVzc2FnZU1hbmFnZXIsIERhdGFSZWNvcmRTZXRDaGFuZ2VNZXNzYWdlLCBSZWNvcmRTZXRDaGFuZ2VUeXBlLCBEYXRhUmVjb3Jkc1NlbGVjdGlvbkNoYW5nZU1lc3NhZ2UgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyIH0gZnJvbSAnd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24nXG5pbXBvcnQgeyByZW1vdmVIaWdobGlnaHRHcmFwaGljcyB9IGZyb20gJy4vZ3JhcGhpY3MtbGF5ZXItdXRpbHMnXG5cbmNvbnN0IGRlYnVnTG9nZ2VyID0gY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlcigpXG5cbi8qKlxuICogR2VuZXJhdGVzIGEgY29tcG9zaXRlIGtleSBmb3IgYSByZWNvcmQgdGhhdCBpbmNsdWRlcyBib3RoIG9yaWdpbiBkYXRhIHNvdXJjZSBJRCBhbmQgb2JqZWN0SWQuXG4gKiBUaGlzIGVuc3VyZXMgdW5pcXVlbmVzcyBhY3Jvc3MgZGlmZmVyZW50IGxheWVycyB0aGF0IG1heSBoYXZlIHRoZSBzYW1lIG9iamVjdElkLlxuICogXG4gKiBAcGFyYW0gcmVjb3JkIC0gVGhlIGZlYXR1cmUgZGF0YSByZWNvcmRcbiAqIEBwYXJhbSBvdXRwdXREUyAtIFRoZSBvdXRwdXQgZGF0YSBzb3VyY2UgY29udGFpbmluZyB0aGUgcmVjb3JkXG4gKiBAcmV0dXJucyBDb21wb3NpdGUga2V5IHN0cmluZzogYCR7b3JpZ2luRFNJZH1fJHtvYmplY3RJZH1gXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRSZWNvcmRLZXkoXG4gIHJlY29yZDogRmVhdHVyZURhdGFSZWNvcmQsXG4gIG91dHB1dERTOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4pOiBzdHJpbmcge1xuICBjb25zdCBvcmlnaW5EUyA9IG91dHB1dERTLmdldE9yaWdpbkRhdGFTb3VyY2VzKCk/LlswXSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gIGNvbnN0IG9yaWdpbkRTSWQgPSBvcmlnaW5EUz8uaWQgfHwgb3V0cHV0RFMuaWQgLy8gRmFsbGJhY2sgdG8gb3V0cHV0RFMgaWYgbm8gb3JpZ2luXG4gIGNvbnN0IG9iamVjdElkID0gcmVjb3JkLmdldElkKClcbiAgY29uc3Qga2V5ID0gYCR7b3JpZ2luRFNJZH1fJHtvYmplY3RJZH1gXG4gIFxuICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICBldmVudDogJ3JlY29yZC1rZXktZ2VuZXJhdGVkJyxcbiAgICBvcmlnaW5EU0lkLFxuICAgIG9iamVjdElkLFxuICAgIGtleSxcbiAgICBoYXNPcmlnaW5EUzogISFvcmlnaW5EU1xuICB9KVxuICBcbiAgcmV0dXJuIGtleVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYW4gYWNjdW11bGF0ZWQgcmVzdWx0cyBkYXRhIHNvdXJjZSBmb3Igc3RvcmluZyBtZXJnZWQgcXVlcnkgcmVzdWx0cy5cbiAqIFRoaXMgZGF0YSBzb3VyY2UgaXMgd2lkZ2V0LWxldmVsIGFuZCBwZXJzaXN0cyBhY3Jvc3MgbXVsdGlwbGUgcXVlcmllcy5cbiAqIFxuICogQHBhcmFtIHdpZGdldElkIC0gVGhlIHdpZGdldCBJRFxuICogQHBhcmFtIG9yaWdpbkRTIC0gVGhlIG9yaWdpbiBkYXRhIHNvdXJjZSB0byB1c2UgYXMgdGhlIGJhc2VcbiAqIEByZXR1cm5zIFRoZSBjcmVhdGVkIGFjY3VtdWxhdGVkIHJlc3VsdHMgZGF0YSBzb3VyY2VcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUFjY3VtdWxhdGVkUmVzdWx0c0RhdGFTb3VyY2UoXG4gIHdpZGdldElkOiBzdHJpbmcsXG4gIG9yaWdpbkRTOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4pOiBQcm9taXNlPEZlYXR1cmVMYXllckRhdGFTb3VyY2U+IHtcbiAgY29uc3QgYWNjdW11bGF0ZWREU0lkID0gYCR7d2lkZ2V0SWR9X2FjY3VtdWxhdGVkX3Jlc3VsdHNgXG4gIFxuICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICBldmVudDogJ2NyZWF0aW5nLWFjY3VtdWxhdGVkLWRzJyxcbiAgICB3aWRnZXRJZCxcbiAgICBhY2N1bXVsYXRlZERTSWQsXG4gICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWRcbiAgfSlcbiAgXG4gIC8vIENoZWNrIGlmIGRhdGEgc291cmNlIGFscmVhZHkgZXhpc3RzXG4gIGNvbnN0IGRzTWFuYWdlciA9IERhdGFTb3VyY2VNYW5hZ2VyLmdldEluc3RhbmNlKClcbiAgbGV0IGFjY3VtdWxhdGVkRFMgPSBkc01hbmFnZXIuZ2V0RGF0YVNvdXJjZShhY2N1bXVsYXRlZERTSWQpIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgXG4gIGlmIChhY2N1bXVsYXRlZERTKSB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICBldmVudDogJ2FjY3VtdWxhdGVkLWRzLWFscmVhZHktZXhpc3RzJyxcbiAgICAgIGFjY3VtdWxhdGVkRFNJZFxuICAgIH0pXG4gICAgcmV0dXJuIGFjY3VtdWxhdGVkRFNcbiAgfVxuICBcbiAgLy8gR2V0IG9yaWdpbiBkYXRhIHNvdXJjZSBKU09OIHRvIGNyZWF0ZSBvdXRwdXQgZGF0YSBzb3VyY2VcbiAgY29uc3Qgb3JpZ2luRGF0YVNvdXJjZUpzb24gPSBvcmlnaW5EUy5nZXREYXRhU291cmNlSnNvbigpXG4gIFxuICAvLyBDcmVhdGUgb3V0cHV0IGRhdGEgc291cmNlIEpTT04gc2ltaWxhciB0byBob3cgcXVlcnkgaXRlbXMgY3JlYXRlIG91dHB1dCBEU1xuICBjb25zdCBvdXRwdXREYXRhU291cmNlSnNvbiA9IHtcbiAgICBpZDogYWNjdW11bGF0ZWREU0lkLFxuICAgIGxhYmVsOiAnQWNjdW11bGF0ZWQgUmVzdWx0cycsXG4gICAgdHlwZTogb3JpZ2luRGF0YVNvdXJjZUpzb24/LnR5cGUsXG4gICAgZ2VvbWV0cnlUeXBlOiBvcmlnaW5EYXRhU291cmNlSnNvbj8uZ2VvbWV0cnlUeXBlLFxuICAgIHVybDogb3JpZ2luRGF0YVNvdXJjZUpzb24/LnVybCxcbiAgICBpdGVtSWQ6IG9yaWdpbkRhdGFTb3VyY2VKc29uPy5pdGVtSWQsXG4gICAgcG9ydGFsVXJsOiBvcmlnaW5EYXRhU291cmNlSnNvbj8ucG9ydGFsVXJsLFxuICAgIG9yaWdpbkRhdGFTb3VyY2VzOiBbe1xuICAgICAgZGF0YVNvdXJjZUlkOiBvcmlnaW5EUy5pZCxcbiAgICAgIG1haW5EYXRhU291cmNlSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgcm9vdERhdGFTb3VyY2VJZDogb3JpZ2luRFMuaWRcbiAgICB9XSxcbiAgICBsYXllcklkOiBvcmlnaW5EYXRhU291cmNlSnNvbj8ubGF5ZXJJZCxcbiAgICBpc0RhdGFJbkRhdGFTb3VyY2VJbnN0YW5jZTogb3JpZ2luRGF0YVNvdXJjZUpzb24/LmlzRGF0YUluRGF0YVNvdXJjZUluc3RhbmNlLFxuICAgIGlzT3V0cHV0RnJvbVdpZGdldDogdHJ1ZVxuICB9XG4gIFxuICAvLyBDcmVhdGUgdGhlIGRhdGEgc291cmNlIHVzaW5nIERhdGFTb3VyY2VNYW5hZ2VyXG4gIC8vIE5vdGU6IFRoaXMgZm9sbG93cyB0aGUgcGF0dGVybiBmcm9tIHNldHRpbmcudHN4IGZvciBjcmVhdGluZyBvdXRwdXQgZGF0YSBzb3VyY2VzXG4gIGFjY3VtdWxhdGVkRFMgPSBkc01hbmFnZXIuY3JlYXRlRGF0YVNvdXJjZUJ5RGF0YVNvdXJjZUpzb24ob3V0cHV0RGF0YVNvdXJjZUpzb24pIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgXG4gIC8vIFNldCBpbml0aWFsIHN0YXR1c1xuICBhY2N1bXVsYXRlZERTLnNldFN0YXR1cyhEYXRhU291cmNlU3RhdHVzLk5vdFJlYWR5KVxuICBhY2N1bXVsYXRlZERTLnNldENvdW50U3RhdHVzKERhdGFTb3VyY2VTdGF0dXMuTm90UmVhZHkpXG4gIFxuICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICBldmVudDogJ2FjY3VtdWxhdGVkLWRzLWNyZWF0ZWQnLFxuICAgIGFjY3VtdWxhdGVkRFNJZCxcbiAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICBzdGF0dXM6IGFjY3VtdWxhdGVkRFMuZ2V0U3RhdHVzKClcbiAgfSlcbiAgXG4gIHJldHVybiBhY2N1bXVsYXRlZERTXG59XG5cbi8qKlxuICogTWVyZ2VzIG5ldyBxdWVyeSByZXN1bHRzIHdpdGggZXhpc3RpbmcgcmVjb3Jkcy5cbiAqIERlZHVwbGljYXRlcyByZWNvcmRzIHVzaW5nIGNvbXBvc2l0ZSBrZXlzIChvcmlnaW5EU0lkX29iamVjdElkKS5cbiAqIFxuICogVGhpcyBmdW5jdGlvbiBtZXJnZXMgbmV3IHJlY29yZHMgd2l0aCBleGlzdGluZyByZWNvcmRzIHRoYXQgd2VyZSBjYXB0dXJlZFxuICogYmVmb3JlIHRoZSBxdWVyeSBleGVjdXRlZC4gVGhlIGNhbGxlciBpcyByZXNwb25zaWJsZSBmb3Igc3RvcmluZyB0aGUgbWVyZ2VkXG4gKiByZWNvcmRzICh0eXBpY2FsbHkgaW4gcmVjb3Jkc1JlZiBvciBzdGF0ZSkuXG4gKiBcbiAqIEBwYXJhbSBvdXRwdXREUyAtIFRoZSBvdXRwdXQgZGF0YSBzb3VyY2UgKHVzZWQgZm9yIGtleSBnZW5lcmF0aW9uKVxuICogQHBhcmFtIG5ld1JlY29yZHMgLSBOZXcgcmVjb3JkcyB0byBtZXJnZSBpblxuICogQHBhcmFtIGV4aXN0aW5nUmVjb3JkcyAtIEV4aXN0aW5nIHJlY29yZHMgY2FwdHVyZWQgYmVmb3JlIHF1ZXJ5IGV4ZWN1dGlvbiAob3B0aW9uYWwsIGRlZmF1bHRzIHRvIGVtcHR5IGFycmF5KVxuICogQHJldHVybnMgQXJyYXkgb2YgYWxsIG1lcmdlZCByZWNvcmRzIChleGlzdGluZyArIG5ldyB1bmlxdWUgcmVjb3JkcylcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1lcmdlUmVzdWx0c0ludG9BY2N1bXVsYXRlZChcbiAgb3V0cHV0RFM6IEZlYXR1cmVMYXllckRhdGFTb3VyY2UsXG4gIG5ld1JlY29yZHM6IEZlYXR1cmVEYXRhUmVjb3JkW10sXG4gIGV4aXN0aW5nUmVjb3JkczogRmVhdHVyZURhdGFSZWNvcmRbXSA9IFtdXG4pOiBGZWF0dXJlRGF0YVJlY29yZFtdIHtcbiAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgZXZlbnQ6ICdtZXJnaW5nLXJlc3VsdHMtc3RhcnQnLFxuICAgIG91dHB1dERTSWQ6IG91dHB1dERTLmlkLFxuICAgIGV4aXN0aW5nUmVjb3Jkc0NvdW50OiBleGlzdGluZ1JlY29yZHMubGVuZ3RoLFxuICAgIG5ld1JlY29yZHNDb3VudDogbmV3UmVjb3Jkcy5sZW5ndGhcbiAgfSlcbiAgXG4gIC8vIEJ1aWxkIFNldCBvZiBleGlzdGluZyByZWNvcmQga2V5cyBmb3IgZmFzdCBsb29rdXBcbiAgY29uc3QgZXhpc3RpbmdLZXlzID0gbmV3IFNldChcbiAgICBleGlzdGluZ1JlY29yZHMubWFwKHJlY29yZCA9PiBnZXRSZWNvcmRLZXkocmVjb3JkLCBvdXRwdXREUykpXG4gIClcbiAgXG4gIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgIGV2ZW50OiAnZXhpc3RpbmctcmVjb3Jkcy1jaGVjaycsXG4gICAgZXhpc3RpbmdSZWNvcmRzQ291bnQ6IGV4aXN0aW5nUmVjb3Jkcy5sZW5ndGgsXG4gICAgZXhpc3RpbmdLZXlzQ291bnQ6IGV4aXN0aW5nS2V5cy5zaXplXG4gIH0pXG4gIFxuICAvLyBGaWx0ZXIgbmV3IHJlY29yZHMgdG8gb25seSBpbmNsdWRlIHRob3NlIG5vdCBhbHJlYWR5IGluIG91dHB1dCBEU1xuICBjb25zdCB1bmlxdWVOZXdSZWNvcmRzID0gbmV3UmVjb3Jkcy5maWx0ZXIocmVjb3JkID0+IHtcbiAgICBjb25zdCBrZXkgPSBnZXRSZWNvcmRLZXkocmVjb3JkLCBvdXRwdXREUylcbiAgICBjb25zdCBpc0R1cGxpY2F0ZSA9IGV4aXN0aW5nS2V5cy5oYXMoa2V5KVxuICAgIFxuICAgIGlmIChpc0R1cGxpY2F0ZSkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAnZHVwbGljYXRlLXJlY29yZC1za2lwcGVkJyxcbiAgICAgICAga2V5LFxuICAgICAgICBvYmplY3RJZDogcmVjb3JkLmdldElkKClcbiAgICAgIH0pXG4gICAgfVxuICAgIFxuICAgIHJldHVybiAhaXNEdXBsaWNhdGVcbiAgfSlcbiAgXG4gIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgIGV2ZW50OiAnZGVkdXBsaWNhdGlvbi1jb21wbGV0ZScsXG4gICAgbmV3UmVjb3Jkc0NvdW50OiBuZXdSZWNvcmRzLmxlbmd0aCxcbiAgICB1bmlxdWVOZXdSZWNvcmRzQ291bnQ6IHVuaXF1ZU5ld1JlY29yZHMubGVuZ3RoLFxuICAgIGR1cGxpY2F0ZXNTa2lwcGVkOiBuZXdSZWNvcmRzLmxlbmd0aCAtIHVuaXF1ZU5ld1JlY29yZHMubGVuZ3RoXG4gIH0pXG4gIFxuICAvLyBNZXJnZSByZWNvcmRzXG4gIGNvbnN0IG1lcmdlZFJlY29yZHMgPSBbLi4uZXhpc3RpbmdSZWNvcmRzLCAuLi51bmlxdWVOZXdSZWNvcmRzXVxuICBcbiAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgZXZlbnQ6ICdtZXJnZS1jb21wbGV0ZScsXG4gICAgdG90YWxSZWNvcmRzQWZ0ZXJNZXJnZTogbWVyZ2VkUmVjb3Jkcy5sZW5ndGgsXG4gICAgZXhpc3RpbmdDb3VudDogZXhpc3RpbmdSZWNvcmRzLmxlbmd0aCxcbiAgICBuZXdVbmlxdWVDb3VudDogdW5pcXVlTmV3UmVjb3Jkcy5sZW5ndGhcbiAgfSlcbiAgXG4gIHJldHVybiBtZXJnZWRSZWNvcmRzXG59XG5cbi8qKlxuICogUmVtb3ZlcyBtYXRjaGluZyByZWNvcmRzIGZyb20gd2lkZ2V0LWxldmVsIGFjY3VtdWxhdGVkIHJlY29yZHMuXG4gKiBNYXRjaGVzIHJlY29yZHMgdXNpbmcgY29tcG9zaXRlIGtleXMgKG9yaWdpbkRTSWRfb2JqZWN0SWQpLlxuICogXG4gKiBUaGlzIGZ1bmN0aW9uIHJlbW92ZXMgcmVjb3JkcyBmcm9tIGV4aXN0aW5nIGFjY3VtdWxhdGVkIHJlY29yZHMgdGhhdCB3ZXJlIGNhcHR1cmVkXG4gKiBiZWZvcmUgdGhlIHF1ZXJ5IGV4ZWN1dGVkLiBUaGUgY2FsbGVyIGlzIHJlc3BvbnNpYmxlIGZvciBzdG9yaW5nIHRoZSByZW1haW5pbmdcbiAqIHJlY29yZHMgKHR5cGljYWxseSBpbiByZWNvcmRzUmVmIG9yIHN0YXRlKS5cbiAqIFxuICogQHBhcmFtIG91dHB1dERTIC0gVGhlIG91dHB1dCBkYXRhIHNvdXJjZSAodXNlZCBmb3Iga2V5IGdlbmVyYXRpb24pXG4gKiBAcGFyYW0gcmVjb3Jkc1RvUmVtb3ZlIC0gUmVjb3JkcyB0byByZW1vdmUgKGZyb20gcXVlcnkgcmVzdWx0cylcbiAqIEBwYXJhbSBleGlzdGluZ0FjY3VtdWxhdGVkUmVjb3JkcyAtIEV4aXN0aW5nIGFjY3VtdWxhdGVkIHJlY29yZHMgY2FwdHVyZWQgYmVmb3JlIHF1ZXJ5IGV4ZWN1dGlvbiAob3B0aW9uYWwsIGRlZmF1bHRzIHRvIGVtcHR5IGFycmF5KVxuICogQHJldHVybnMgQXJyYXkgb2YgcmVtYWluaW5nIHJlY29yZHMgYWZ0ZXIgcmVtb3ZhbFxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlUmVzdWx0c0Zyb21BY2N1bXVsYXRlZChcbiAgb3V0cHV0RFM6IEZlYXR1cmVMYXllckRhdGFTb3VyY2UsXG4gIHJlY29yZHNUb1JlbW92ZTogRmVhdHVyZURhdGFSZWNvcmRbXSxcbiAgZXhpc3RpbmdBY2N1bXVsYXRlZFJlY29yZHM6IEZlYXR1cmVEYXRhUmVjb3JkW10gPSBbXVxuKTogRmVhdHVyZURhdGFSZWNvcmRbXSB7XG4gIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgIGV2ZW50OiAncmVtb3ZpbmctcmVzdWx0cy1zdGFydCcsXG4gICAgb3V0cHV0RFNJZDogb3V0cHV0RFMuaWQsXG4gICAgcmVjb3Jkc1RvUmVtb3ZlQ291bnQ6IHJlY29yZHNUb1JlbW92ZS5sZW5ndGgsXG4gICAgZXhpc3RpbmdBY2N1bXVsYXRlZFJlY29yZHNDb3VudDogZXhpc3RpbmdBY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoXG4gIH0pXG4gIFxuICAvLyBJZiBubyBhY2N1bXVsYXRlZCByZWNvcmRzLCBub3RoaW5nIHRvIHJlbW92ZVxuICBpZiAoZXhpc3RpbmdBY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID09PSAwKSB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICBldmVudDogJ25vLWFjY3VtdWxhdGVkLXJlY29yZHMtdG8tcmVtb3ZlJyxcbiAgICAgIG91dHB1dERTSWQ6IG91dHB1dERTLmlkXG4gICAgfSlcbiAgICByZXR1cm4gW11cbiAgfVxuICBcbiAgLy8gSWYgbm8gcmVjb3JkcyB0byByZW1vdmUsIHJldHVybiBleGlzdGluZyByZWNvcmRzIHVuY2hhbmdlZFxuICBpZiAocmVjb3Jkc1RvUmVtb3ZlLmxlbmd0aCA9PT0gMCkge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgZXZlbnQ6ICduby1yZWNvcmRzLXRvLXJlbW92ZScsXG4gICAgICBvdXRwdXREU0lkOiBvdXRwdXREUy5pZCxcbiAgICAgIGV4aXN0aW5nQWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGV4aXN0aW5nQWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aFxuICAgIH0pXG4gICAgcmV0dXJuIGV4aXN0aW5nQWNjdW11bGF0ZWRSZWNvcmRzXG4gIH1cbiAgXG4gIC8vIEJ1aWxkIFNldCBvZiBrZXlzIHRvIHJlbW92ZSBmb3IgZmFzdCBsb29rdXBcbiAgY29uc3QgcmVtb3ZlS2V5cyA9IG5ldyBTZXQoXG4gICAgcmVjb3Jkc1RvUmVtb3ZlLm1hcChyZWNvcmQgPT4gZ2V0UmVjb3JkS2V5KHJlY29yZCwgb3V0cHV0RFMpKVxuICApXG4gIFxuICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICBldmVudDogJ3JlbW92ZS1rZXlzLWJ1aWx0JyxcbiAgICBleGlzdGluZ0FjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiBleGlzdGluZ0FjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGgsXG4gICAgcmVtb3ZlS2V5c0NvdW50OiByZW1vdmVLZXlzLnNpemVcbiAgfSlcbiAgXG4gIC8vIEZpbHRlciBvdXQgcmVjb3JkcyB0aGF0IG1hdGNoIGtleXMgdG8gcmVtb3ZlXG4gIGNvbnN0IHJlbWFpbmluZ1JlY29yZHM6IEZlYXR1cmVEYXRhUmVjb3JkW10gPSBbXVxuICBjb25zdCByZW1vdmVkUmVjb3JkczogRmVhdHVyZURhdGFSZWNvcmRbXSA9IFtdXG4gIFxuICBleGlzdGluZ0FjY3VtdWxhdGVkUmVjb3Jkcy5mb3JFYWNoKHJlY29yZCA9PiB7XG4gICAgY29uc3Qga2V5ID0gZ2V0UmVjb3JkS2V5KHJlY29yZCwgb3V0cHV0RFMpXG4gICAgY29uc3Qgc2hvdWxkUmVtb3ZlID0gcmVtb3ZlS2V5cy5oYXMoa2V5KVxuICAgIFxuICAgIGlmIChzaG91bGRSZW1vdmUpIHtcbiAgICAgIHJlbW92ZWRSZWNvcmRzLnB1c2gocmVjb3JkKVxuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAncmVjb3JkLW1hcmtlZC1mb3ItcmVtb3ZhbCcsXG4gICAgICAgIGtleSxcbiAgICAgICAgb2JqZWN0SWQ6IHJlY29yZC5nZXRJZCgpLFxuICAgICAgICBvcmlnaW5EU0lkOiAocmVjb3JkLmdldERhdGFTb3VyY2U/LigpIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2UpPy5nZXRPcmlnaW5EYXRhU291cmNlcygpPy5bMF0/LmlkIHx8ICd1bmtub3duJ1xuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgcmVtYWluaW5nUmVjb3Jkcy5wdXNoKHJlY29yZClcbiAgICB9XG4gIH0pXG4gIFxuICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICBldmVudDogJ3JlbW92YWwtY29tcGxldGUnLFxuICAgIHJlY29yZHNSZW1vdmVkOiByZW1vdmVkUmVjb3Jkcy5sZW5ndGgsXG4gICAgcmVtYWluaW5nUmVjb3Jkc0NvdW50OiByZW1haW5pbmdSZWNvcmRzLmxlbmd0aCxcbiAgICByZWNvcmRzVG9SZW1vdmVDb3VudDogcmVjb3Jkc1RvUmVtb3ZlLmxlbmd0aCxcbiAgICBtYXRjaGVkUmVjb3Jkc0NvdW50OiByZW1vdmVkUmVjb3Jkcy5sZW5ndGgsXG4gICAgdW5tYXRjaGVkUmVjb3Jkc0NvdW50OiByZWNvcmRzVG9SZW1vdmUubGVuZ3RoIC0gcmVtb3ZlZFJlY29yZHMubGVuZ3RoXG4gIH0pXG4gIFxuICByZXR1cm4gcmVtYWluaW5nUmVjb3Jkc1xufVxuXG4vKipcbiAqIFJlbW92ZXMgcmVjb3JkcyBmcm9tIG9yaWdpbiBkYXRhIHNvdXJjZSBzZWxlY3Rpb25zLlxuICogR3JvdXBzIHJlY29yZHMgYnkgdGhlaXIgb3JpZ2luIGRhdGEgc291cmNlIGFuZCB1cGRhdGVzIGVhY2ggb3JpZ2luIERTJ3Mgc2VsZWN0aW9uIHNlcGFyYXRlbHkuXG4gKiBUaGlzIGVuc3VyZXMgbWFwIHNlbGVjdGlvbiBpcyB1cGRhdGVkIGNvcnJlY3RseSB3aGVuIHJlY29yZHMgY29tZSBmcm9tIG11bHRpcGxlIG9yaWdpbiBsYXllcnMuXG4gKiBBbHNvIHJlbW92ZXMgZ3JhcGhpY3MgZnJvbSBncmFwaGljcyBsYXllciBpZiB1c2luZyBncmFwaGljcyBsYXllciBoaWdobGlnaHRpbmcuXG4gKiBcbiAqIEBwYXJhbSB3aWRnZXRJZCAtIFRoZSB3aWRnZXQgSUQgZm9yIHB1Ymxpc2hpbmcgbWVzc2FnZXNcbiAqIEBwYXJhbSByZWNvcmRzVG9SZW1vdmUgLSBSZWNvcmRzIHRvIHJlbW92ZSBmcm9tIHNlbGVjdGlvblxuICogQHBhcmFtIG91dHB1dERTIC0gVGhlIG91dHB1dCBkYXRhIHNvdXJjZSAodXNlZCBmb3Iga2V5IGdlbmVyYXRpb24pXG4gKiBAcGFyYW0gdXNlR3JhcGhpY3NMYXllciAtIFdoZXRoZXIgdG8gcmVtb3ZlIGdyYXBoaWNzIGZyb20gZ3JhcGhpY3MgbGF5ZXIgKGRlZmF1bHQ6IGZhbHNlKVxuICogQHBhcmFtIGdyYXBoaWNzTGF5ZXIgLSBHcmFwaGljcyBsYXllciBpbnN0YW5jZSAocmVxdWlyZWQgaWYgdXNlR3JhcGhpY3NMYXllciBpcyB0cnVlKVxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlUmVjb3Jkc0Zyb21PcmlnaW5TZWxlY3Rpb25zKFxuICB3aWRnZXRJZDogc3RyaW5nLFxuICByZWNvcmRzVG9SZW1vdmU6IEZlYXR1cmVEYXRhUmVjb3JkW10sXG4gIG91dHB1dERTOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLFxuICB1c2VHcmFwaGljc0xheWVyPzogYm9vbGVhbixcbiAgZ3JhcGhpY3NMYXllcj86IF9fZXNyaS5HcmFwaGljc0xheWVyXG4pOiB2b2lkIHtcbiAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgZXZlbnQ6ICdyZW1vdmluZy1yZWNvcmRzLWZyb20tb3JpZ2luLXNlbGVjdGlvbnMtc3RhcnQnLFxuICAgIHdpZGdldElkLFxuICAgIHJlY29yZHNUb1JlbW92ZUNvdW50OiByZWNvcmRzVG9SZW1vdmUubGVuZ3RoLFxuICAgIG91dHB1dERTSWQ6IG91dHB1dERTLmlkLFxuICAgIHVzZUdyYXBoaWNzTGF5ZXI6ICEhdXNlR3JhcGhpY3NMYXllcixcbiAgICBoYXNHcmFwaGljc0xheWVyOiAhIWdyYXBoaWNzTGF5ZXJcbiAgfSlcbiAgXG4gIGlmIChyZWNvcmRzVG9SZW1vdmUubGVuZ3RoID09PSAwKSB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICBldmVudDogJ25vLXJlY29yZHMtdG8tcmVtb3ZlLWZyb20tc2VsZWN0aW9uJyxcbiAgICAgIHdpZGdldElkXG4gICAgfSlcbiAgICByZXR1cm5cbiAgfVxuICBcbiAgLy8gUmVtb3ZlIGZyb20gZ3JhcGhpY3MgbGF5ZXIgaWYgdXNpbmcgZ3JhcGhpY3MgbGF5ZXIgaGlnaGxpZ2h0aW5nXG4gIGlmICh1c2VHcmFwaGljc0xheWVyICYmIGdyYXBoaWNzTGF5ZXIpIHtcbiAgICBjb25zdCByZWNvcmRJZHNUb1JlbW92ZSA9IHJlY29yZHNUb1JlbW92ZS5tYXAocmVjb3JkID0+IHJlY29yZC5nZXRJZCgpKVxuICAgIFxuICAgIC8vIEZJWCAocjAxOC44Mik6IENhcHR1cmUgVFJVRSBcImJlZm9yZVwiIHN0YXRlIEJFRk9SRSByZW1vdmluZyBncmFwaGljc1xuICAgIGNvbnN0IGdyYXBoaWNzQmVmb3JlUmVtb3ZhbDogKHN0cmluZyB8IG51bGwpW10gPSBbXVxuICAgIGNvbnN0IGZpcnN0RmV3R3JhcGhpY3NBdHRyczogYW55W10gPSBbXVxuICAgIGdyYXBoaWNzTGF5ZXI/LmdyYXBoaWNzPy5mb3JFYWNoKChnLCBpbmRleCkgPT4ge1xuICAgICAgaWYgKGluZGV4IDwgMykge1xuICAgICAgICBmaXJzdEZld0dyYXBoaWNzQXR0cnMucHVzaCh7XG4gICAgICAgICAgaW5kZXgsXG4gICAgICAgICAgaGFzQXR0cmlidXRlczogISFnLmF0dHJpYnV0ZXMsXG4gICAgICAgICAgYXR0cmlidXRlczogZy5hdHRyaWJ1dGVzLFxuICAgICAgICAgIGF0dHJpYnV0ZUtleXM6IGcuYXR0cmlidXRlcyA/IE9iamVjdC5rZXlzKGcuYXR0cmlidXRlcykgOiBbXVxuICAgICAgICB9KVxuICAgICAgfVxuICAgICAgZ3JhcGhpY3NCZWZvcmVSZW1vdmFsLnB1c2goZy5hdHRyaWJ1dGVzPy5yZWNvcmRJZCB8fCBudWxsKVxuICAgIH0pXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICBldmVudDogJ3JlbW92aW5nLWdyYXBoaWNzLVRSVUUtQkVGT1JFLXN0YXRlJyxcbiAgICAgIHdpZGdldElkLFxuICAgICAgcmVjb3JkSWRzVG9SZW1vdmUsXG4gICAgICBncmFwaGljc0xheWVyQ291bnRCZWZvcmU6IGdyYXBoaWNzTGF5ZXIuZ3JhcGhpY3MubGVuZ3RoLFxuICAgICAgZ3JhcGhpY3NMYXllcklkc0JlZm9yZTogZ3JhcGhpY3NCZWZvcmVSZW1vdmFsLnNsaWNlKDAsIDExMCksXG4gICAgICBmaXJzdEZld0dyYXBoaWNzQXR0cnMsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIHJlbW92ZUhpZ2hsaWdodEdyYXBoaWNzKGdyYXBoaWNzTGF5ZXIsIHJlY29yZElkc1RvUmVtb3ZlKVxuICAgIFxuICAgIC8vIEZJWCAocjAxOC44Mik6IENhcHR1cmUgVFJVRSBcImFmdGVyXCIgc3RhdGUgQUZURVIgcmVtb3ZpbmcgZ3JhcGhpY3NcbiAgICBjb25zdCBncmFwaGljc0FmdGVyUmVtb3ZhbDogKHN0cmluZyB8IG51bGwpW10gPSBbXVxuICAgIGdyYXBoaWNzTGF5ZXI/LmdyYXBoaWNzPy5mb3JFYWNoKChnKSA9PiB7XG4gICAgICBncmFwaGljc0FmdGVyUmVtb3ZhbC5wdXNoKGcuYXR0cmlidXRlcz8ucmVjb3JkSWQgfHwgbnVsbClcbiAgICB9KVxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgZXZlbnQ6ICdyZW1vdmluZy1ncmFwaGljcy1UUlVFLUFGVEVSLXN0YXRlJyxcbiAgICAgIHdpZGdldElkLFxuICAgICAgZ3JhcGhpY3NMYXllckNvdW50QWZ0ZXI6IGdyYXBoaWNzTGF5ZXIuZ3JhcGhpY3MubGVuZ3RoLFxuICAgICAgZ3JhcGhpY3NMYXllcklkc0FmdGVyOiBncmFwaGljc0FmdGVyUmVtb3ZhbC5zbGljZSgwLCAxMTApLFxuICAgICAgYWN0dWFsbHlSZW1vdmVkOiBncmFwaGljc0JlZm9yZVJlbW92YWwubGVuZ3RoIC0gZ3JhcGhpY3NBZnRlclJlbW92YWwubGVuZ3RoLFxuICAgICAgZXhwZWN0ZWRUb1JlbW92ZTogcmVjb3JkSWRzVG9SZW1vdmUubGVuZ3RoLFxuICAgICAgcmVtb3ZhbE1hdGNoZXM6IChncmFwaGljc0JlZm9yZVJlbW92YWwubGVuZ3RoIC0gZ3JhcGhpY3NBZnRlclJlbW92YWwubGVuZ3RoKSA9PT0gcmVjb3JkSWRzVG9SZW1vdmUubGVuZ3RoLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgfVxuICBcbiAgLy8gR3JvdXAgcmVjb3JkcyBieSB0aGVpciBvcmlnaW4gZGF0YSBzb3VyY2VcbiAgY29uc3QgcmVjb3Jkc0J5T3JpZ2luRFMgPSBuZXcgTWFwPEZlYXR1cmVMYXllckRhdGFTb3VyY2UsIEZlYXR1cmVEYXRhUmVjb3JkW10+KClcbiAgXG4gIHJlY29yZHNUb1JlbW92ZS5mb3JFYWNoKHJlY29yZCA9PiB7XG4gICAgY29uc3QgcmVjb3JkRFMgPSByZWNvcmQuZ2V0RGF0YVNvdXJjZT8uKCkgYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICAgIGxldCBvcmlnaW5EUzogRmVhdHVyZUxheWVyRGF0YVNvdXJjZSB8IG51bGwgPSBudWxsXG4gICAgXG4gICAgaWYgKHJlY29yZERTKSB7XG4gICAgICBvcmlnaW5EUyA9IHJlY29yZERTLmdldE9yaWdpbkRhdGFTb3VyY2VzKCk/LlswXSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlIHx8IHJlY29yZERTXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEZhbGxiYWNrOiB0cnkgdG8gZ2V0IG9yaWdpbiBmcm9tIG91dHB1dERTXG4gICAgICBvcmlnaW5EUyA9IG91dHB1dERTLmdldE9yaWdpbkRhdGFTb3VyY2VzKCk/LlswXSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlIHx8IG51bGxcbiAgICB9XG4gICAgXG4gICAgaWYgKG9yaWdpbkRTKSB7XG4gICAgICBpZiAoIXJlY29yZHNCeU9yaWdpbkRTLmhhcyhvcmlnaW5EUykpIHtcbiAgICAgICAgcmVjb3Jkc0J5T3JpZ2luRFMuc2V0KG9yaWdpbkRTLCBbXSlcbiAgICAgIH1cbiAgICAgIHJlY29yZHNCeU9yaWdpbkRTLmdldChvcmlnaW5EUykhLnB1c2gocmVjb3JkKVxuICAgIH1cbiAgfSlcbiAgXG4gIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgIGV2ZW50OiAncmVjb3Jkcy1ncm91cGVkLWJ5LW9yaWdpbicsXG4gICAgd2lkZ2V0SWQsXG4gICAgb3JpZ2luRFNDb3VudDogcmVjb3Jkc0J5T3JpZ2luRFMuc2l6ZSxcbiAgICByZWNvcmRzQnlPcmlnaW5EUzogQXJyYXkuZnJvbShyZWNvcmRzQnlPcmlnaW5EUy5lbnRyaWVzKCkpLm1hcCgoW2RzLCByZWNvcmRzXSkgPT4gKHtcbiAgICAgIG9yaWdpbkRTSWQ6IGRzLmlkLFxuICAgICAgcmVjb3JkQ291bnQ6IHJlY29yZHMubGVuZ3RoXG4gICAgfSkpXG4gIH0pXG4gIFxuICAvLyBGb3IgZWFjaCBvcmlnaW4gRFMsIGdldCBjdXJyZW50IHNlbGVjdGlvbiBhbmQgcmVtb3ZlIG1hdGNoaW5nIHJlY29yZHNcbiAgcmVjb3Jkc0J5T3JpZ2luRFMuZm9yRWFjaCgocmVjb3Jkc1RvUmVtb3ZlRm9yT3JpZ2luLCBvcmlnaW5EUykgPT4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBHZXQgY3VycmVudCBzZWxlY3RlZCByZWNvcmRzIGZyb20gdGhpcyBvcmlnaW4gRFNcbiAgICAgIGNvbnN0IGN1cnJlbnRTZWxlY3RlZFJlY29yZHMgPSBvcmlnaW5EUy5nZXRTZWxlY3RlZFJlY29yZHMoKSB8fCBbXVxuICAgICAgY29uc3QgY3VycmVudFNlbGVjdGVkSWRzID0gb3JpZ2luRFMuZ2V0U2VsZWN0ZWRSZWNvcmRJZHMoKSB8fCBbXVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdwcm9jZXNzaW5nLW9yaWdpbi1kcy1yZW1vdmFsJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICBjdXJyZW50U2VsZWN0ZWRDb3VudDogY3VycmVudFNlbGVjdGVkUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgIHJlY29yZHNUb1JlbW92ZUNvdW50OiByZWNvcmRzVG9SZW1vdmVGb3JPcmlnaW4ubGVuZ3RoXG4gICAgICB9KVxuICAgICAgXG4gICAgICAvLyBCdWlsZCBTZXQgb2YgSURzIHRvIHJlbW92ZSBmb3IgZmFzdCBsb29rdXBcbiAgICAgIGNvbnN0IGlkc1RvUmVtb3ZlID0gbmV3IFNldChcbiAgICAgICAgcmVjb3Jkc1RvUmVtb3ZlRm9yT3JpZ2luLm1hcChyZWNvcmQgPT4gcmVjb3JkLmdldElkKCkpXG4gICAgICApXG4gICAgICBcbiAgICAgIC8vIEZpbHRlciBvdXQgcmVjb3JkcyB0aGF0IG1hdGNoIElEcyB0byByZW1vdmVcbiAgICAgIGNvbnN0IHJlbWFpbmluZ1JlY29yZHMgPSBjdXJyZW50U2VsZWN0ZWRSZWNvcmRzLmZpbHRlcihyZWNvcmQgPT4ge1xuICAgICAgICBjb25zdCByZWNvcmRJZCA9IHJlY29yZC5nZXRJZCgpXG4gICAgICAgIHJldHVybiAhaWRzVG9SZW1vdmUuaGFzKHJlY29yZElkKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgY29uc3QgcmVtYWluaW5nSWRzID0gcmVtYWluaW5nUmVjb3Jkcy5tYXAocmVjb3JkID0+IHJlY29yZC5nZXRJZCgpKVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdvcmlnaW4tZHMtcmVtb3ZhbC1maWx0ZXJlZCcsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgcmVtb3ZlZENvdW50OiBjdXJyZW50U2VsZWN0ZWRSZWNvcmRzLmxlbmd0aCAtIHJlbWFpbmluZ1JlY29yZHMubGVuZ3RoLFxuICAgICAgICByZW1haW5pbmdDb3VudDogcmVtYWluaW5nUmVjb3Jkcy5sZW5ndGhcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIC8vIFVwZGF0ZSBzZWxlY3Rpb24gaW4gb3JpZ2luIERTXG4gICAgICBpZiAodHlwZW9mIG9yaWdpbkRTLnNlbGVjdFJlY29yZHNCeUlkcyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBvcmlnaW5EUy5zZWxlY3RSZWNvcmRzQnlJZHMocmVtYWluaW5nSWRzLCByZW1haW5pbmdSZWNvcmRzIGFzIEZlYXR1cmVEYXRhUmVjb3JkW10pXG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFB1Ymxpc2ggc2VsZWN0aW9uIGNoYW5nZSBtZXNzYWdlIGZvciB0aGlzIG9yaWdpbiBEU1xuICAgICAgTWVzc2FnZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5wdWJsaXNoTWVzc2FnZShcbiAgICAgICAgbmV3IERhdGFSZWNvcmRzU2VsZWN0aW9uQ2hhbmdlTWVzc2FnZSh3aWRnZXRJZCwgcmVtYWluaW5nUmVjb3JkcyBhcyBGZWF0dXJlRGF0YVJlY29yZFtdLCBbb3JpZ2luRFMuaWRdKVxuICAgICAgKVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdvcmlnaW4tZHMtc2VsZWN0aW9uLXVwZGF0ZWQnLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgIHJlbWFpbmluZ1JlY29yZHNDb3VudDogcmVtYWluaW5nUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgIG1lc3NhZ2VQdWJsaXNoZWQ6IHRydWVcbiAgICAgIH0pXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ29yaWdpbi1kcy1yZW1vdmFsLWVycm9yJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicsXG4gICAgICAgIGVycm9yU3RhY2s6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZFxuICAgICAgfSlcbiAgICB9XG4gIH0pXG4gIFxuICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICBldmVudDogJ3JlbW92aW5nLXJlY29yZHMtZnJvbS1vcmlnaW4tc2VsZWN0aW9ucy1jb21wbGV0ZScsXG4gICAgd2lkZ2V0SWQsXG4gICAgb3JpZ2luRFNDb3VudDogcmVjb3Jkc0J5T3JpZ2luRFMuc2l6ZSxcbiAgICB0b3RhbFJlY29yZHNSZW1vdmVkOiByZWNvcmRzVG9SZW1vdmUubGVuZ3RoXG4gIH0pXG59XG5cbi8qKlxuICogQ2xlYXJzIGFsbCByZWNvcmRzIGZyb20gdGhlIGFjY3VtdWxhdGVkIHJlc3VsdHMgZGF0YSBzb3VyY2UuXG4gKiBcbiAqIEBwYXJhbSBhY2N1bXVsYXRlZERTIC0gVGhlIGFjY3VtdWxhdGVkIHJlc3VsdHMgZGF0YSBzb3VyY2UgdG8gY2xlYXJcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyQWNjdW11bGF0ZWRSZXN1bHRzKFxuICBhY2N1bXVsYXRlZERTOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4pOiB2b2lkIHtcbiAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgZXZlbnQ6ICdjbGVhcmluZy1hY2N1bXVsYXRlZC1yZXN1bHRzJyxcbiAgICBhY2N1bXVsYXRlZERTSWQ6IGFjY3VtdWxhdGVkRFMuaWRcbiAgfSlcbiAgXG4gIC8vIFNldCBzdGF0dXMgdG8gTm90UmVhZHkgdG8gY2xlYXIgcmVjb3Jkc1xuICBhY2N1bXVsYXRlZERTLnNldFN0YXR1cyhEYXRhU291cmNlU3RhdHVzLk5vdFJlYWR5KVxuICBhY2N1bXVsYXRlZERTLnNldENvdW50U3RhdHVzKERhdGFTb3VyY2VTdGF0dXMuTm90UmVhZHkpXG4gIFxuICAvLyBDbGVhciBhbnkgbG9hZGVkIHJlY29yZHMgaWYgcG9zc2libGVcbiAgLy8gTm90ZTogTWF5IG5lZWQgdG8gdXNlIERhdGFTb3VyY2VNYW5hZ2VyIG1ldGhvZHMgZGVwZW5kaW5nIG9uIEV4QiBBUElcbiAgXG4gIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgIGV2ZW50OiAnYWNjdW11bGF0ZWQtcmVzdWx0cy1jbGVhcmVkJyxcbiAgICBhY2N1bXVsYXRlZERTSWQ6IGFjY3VtdWxhdGVkRFMuaWRcbiAgfSlcbn1cblxuIiwiLyoqXG4gKiBVdGlsaXR5IGZ1bmN0aW9ucyBmb3IgbWFuYWdpbmcgZmVhdHVyZSBzZWxlY3Rpb24gaW4gUXVlcnlTaW1wbGUgd2lkZ2V0LlxuICogQ29uc29saWRhdGVzIHJlcGVhdGVkIHNlbGVjdGlvbiBsb2dpYyB0byBmb2xsb3cgRFJZIHByaW5jaXBsZXMuXG4gKi9cblxuaW1wb3J0IHR5cGUgeyBEYXRhU291cmNlLCBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLCBGZWF0dXJlRGF0YVJlY29yZCB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IE1lc3NhZ2VNYW5hZ2VyLCBEYXRhUmVjb3Jkc1NlbGVjdGlvbkNoYW5nZU1lc3NhZ2UgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBhZGRIaWdobGlnaHRHcmFwaGljcyBhcyBhZGRHcmFwaGljc0xheWVyR3JhcGhpY3MsIGNsZWFyR3JhcGhpY3NMYXllciB9IGZyb20gJy4vZ3JhcGhpY3MtbGF5ZXItdXRpbHMnXG5pbXBvcnQgeyBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyIH0gZnJvbSAnd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24nXG5pbXBvcnQgdHlwZSB7IEV2ZW50TWFuYWdlciB9IGZyb20gJy4vaG9va3MvdXNlLWV2ZW50LWhhbmRsaW5nJ1xuXG5jb25zdCBkZWJ1Z0xvZ2dlciA9IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIoKVxuXG4vKipcbiAqIEN1c3RvbSBldmVudCBuYW1lIGZvciBRdWVyeVNpbXBsZSB0byBub3RpZnkgV2lkZ2V0IG9mIHNlbGVjdGlvbiBjaGFuZ2VzLlxuICovXG5leHBvcnQgY29uc3QgUVVFUllTSU1QTEVfU0VMRUNUSU9OX0VWRU5UID0gJ3F1ZXJ5c2ltcGxlLXNlbGVjdGlvbi1jaGFuZ2VkJ1xuXG4vKipcbiAqIERpc3BhdGNoZXMgYSBjdXN0b20gc2VsZWN0aW9uIGV2ZW50IHRvIHRoZSB3aW5kb3cgc28gdGhlIG1haW4gV2lkZ2V0IGNhbiB0cmFjayBzdGF0ZS5cbiAqIFxuICogQHBhcmFtIHdpZGdldElkIC0gVGhlIHdpZGdldCBJRFxuICogQHBhcmFtIHJlY29yZElkcyAtIEFycmF5IG9mIHNlbGVjdGVkIHJlY29yZCBJRHNcbiAqIEBwYXJhbSBvdXRwdXREUyAtIFRoZSBvdXRwdXQgZGF0YSBzb3VyY2VcbiAqIEBwYXJhbSBxdWVyeUl0ZW1Db25maWdJZCAtIFRoZSBjb25maWcgSUQgb2YgdGhlIHF1ZXJ5IHRoYXQgcHJvZHVjZWQgdGhlc2UgcmVzdWx0c1xuICogQHBhcmFtIGV2ZW50TWFuYWdlciAtIE9wdGlvbmFsIEV2ZW50TWFuYWdlciBpbnN0YW5jZSBmb3IgY29tcGFyaXNvbiBsb2dnaW5nIChDaHVuayA3LjEpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkaXNwYXRjaFNlbGVjdGlvbkV2ZW50KFxuICB3aWRnZXRJZDogc3RyaW5nLFxuICByZWNvcmRJZHM6IHN0cmluZ1tdLFxuICBvdXRwdXREUzogRGF0YVNvdXJjZSxcbiAgcXVlcnlJdGVtQ29uZmlnSWQ6IHN0cmluZyxcbiAgZXZlbnRNYW5hZ2VyPzogRXZlbnRNYW5hZ2VyXG4pOiB2b2lkIHtcbiAgY29uc3Qgb3JpZ2luRFMgPSBnZXRPcmlnaW5EYXRhU291cmNlKG91dHB1dERTKVxuICBjb25zdCBkYXRhU291cmNlSWQgPSBvcmlnaW5EUz8uaWRcbiAgXG4gIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICBldmVudDogJ2Rpc3BhdGNoU2VsZWN0aW9uRXZlbnQnLFxuICAgIHdpZGdldElkLFxuICAgIHJlY29yZENvdW50OiByZWNvcmRJZHMubGVuZ3RoLFxuICAgIG91dHB1dERzSWQ6IG91dHB1dERTLmlkLFxuICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkXG4gIH0pXG5cbiAgLy8gQ2h1bmsgNzogRGlzcGF0Y2ggc2VsZWN0aW9uIGV2ZW50IHZpYSBFdmVudE1hbmFnZXIgKHIwMTguNTkpXG4gIGlmIChldmVudE1hbmFnZXIpIHtcbiAgICBldmVudE1hbmFnZXIuZGlzcGF0Y2hTZWxlY3Rpb25FdmVudCh3aWRnZXRJZCwgcmVjb3JkSWRzLCBkYXRhU291cmNlSWQsIG91dHB1dERTLmlkLCBxdWVyeUl0ZW1Db25maWdJZClcbiAgfVxufVxuXG4vKipcbiAqIEdldHMgdGhlIG9yaWdpbiBkYXRhIHNvdXJjZSBmcm9tIGFuIG91dHB1dCBkYXRhIHNvdXJjZS5cbiAqIEBwYXJhbSBvdXRwdXREUyAtIFRoZSBvdXRwdXQgZGF0YSBzb3VyY2VcbiAqIEByZXR1cm5zIFRoZSBvcmlnaW4gZGF0YSBzb3VyY2UsIG9yIG51bGwgaWYgbm90IGF2YWlsYWJsZVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0T3JpZ2luRGF0YVNvdXJjZShcbiAgb3V0cHV0RFM6IERhdGFTb3VyY2UgfCBudWxsIHwgdW5kZWZpbmVkXG4pOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlIHwgbnVsbCB7XG4gIGlmICghb3V0cHV0RFMpIHJldHVybiBudWxsXG4gIFxuICAvLyBUcnkgdG8gZ2V0IG9yaWdpbiBkYXRhIHNvdXJjZXNcbiAgY29uc3Qgb3JpZ2luRGF0YVNvdXJjZXMgPSB0eXBlb2Ygb3V0cHV0RFMuZ2V0T3JpZ2luRGF0YVNvdXJjZXMgPT09ICdmdW5jdGlvbicgXG4gICAgPyBvdXRwdXREUy5nZXRPcmlnaW5EYXRhU291cmNlcygpIFxuICAgIDogW11cbiAgICBcbiAgaWYgKG9yaWdpbkRhdGFTb3VyY2VzICYmIG9yaWdpbkRhdGFTb3VyY2VzLmxlbmd0aCA+IDApIHtcbiAgICByZXR1cm4gb3JpZ2luRGF0YVNvdXJjZXNbMF0gYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICB9XG4gIFxuICAvLyBJZiBpdCBkb2Vzbid0IGhhdmUgb3JpZ2luIGRhdGEgc291cmNlcywgaXQgbWlnaHQgYWxyZWFkeSBiZSBhbiBvcmlnaW4gZGF0YSBzb3VyY2VcbiAgLy8gRmVhdHVyZUxheWVyRGF0YVNvdXJjZSBzaG91bGQgaGF2ZSBhICdsYXllcicgcHJvcGVydHkgb3IgJ2dldExheWVyJyBtZXRob2RcbiAgaWYgKChvdXRwdXREUyBhcyBhbnkpLmxheWVyIHx8IChvdXRwdXREUyBhcyBhbnkpLmdldExheWVyIHx8IChvdXRwdXREUyBhcyBhbnkpLnR5cGUgPT09ICdGZWF0dXJlTGF5ZXInKSB7XG4gICAgcmV0dXJuIG91dHB1dERTIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgfVxuICBcbiAgcmV0dXJuIG51bGxcbn1cblxuLyoqXG4gKiBTZWxlY3RzIHJlY29yZHMgaW4gYm90aCB0aGUgb3JpZ2luIGRhdGEgc291cmNlIGFuZCBvdXRwdXQgZGF0YSBzb3VyY2UuXG4gKiBUaGlzIGlzIHRoZSBzdGFuZGFyZCBwYXR0ZXJuIHVzZWQgdGhyb3VnaG91dCB0aGUgd2lkZ2V0IGZvciBzZWxlY3Rpb24uXG4gKiBPcHRpb25hbGx5IHVzZXMgZ3JhcGhpY3MgbGF5ZXIgZm9yIGhpZ2hsaWdodGluZyAoaW5kZXBlbmRlbnQgb2YgbGF5ZXIgdmlzaWJpbGl0eSkuXG4gKiBcbiAqIEBwYXJhbSBvdXRwdXREUyAtIFRoZSBvdXRwdXQgZGF0YSBzb3VyY2VcbiAqIEBwYXJhbSByZWNvcmRJZHMgLSBBcnJheSBvZiByZWNvcmQgSURzIHRvIHNlbGVjdFxuICogQHBhcmFtIHJlY29yZHMgLSBPcHRpb25hbCBhcnJheSBvZiBGZWF0dXJlRGF0YVJlY29yZCBvYmplY3RzIGZvciBwcm9wZXIgaGlnaGxpZ2h0aW5nXG4gKiBAcGFyYW0gdXNlR3JhcGhpY3NMYXllciAtIFdoZXRoZXIgdG8gdXNlIGdyYXBoaWNzIGxheWVyIGZvciBoaWdobGlnaHRpbmcgKGRlZmF1bHQ6IGZhbHNlKVxuICogQHBhcmFtIGdyYXBoaWNzTGF5ZXIgLSBHcmFwaGljcyBsYXllciBpbnN0YW5jZSAocmVxdWlyZWQgaWYgdXNlR3JhcGhpY3NMYXllciBpcyB0cnVlKVxuICogQHBhcmFtIG1hcFZpZXcgLSBNYXAgdmlldyBpbnN0YW5jZSAocmVxdWlyZWQgaWYgdXNlR3JhcGhpY3NMYXllciBpcyB0cnVlKVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2VsZWN0UmVjb3Jkc0luRGF0YVNvdXJjZXMoXG4gIG91dHB1dERTOiBEYXRhU291cmNlIHwgbnVsbCB8IHVuZGVmaW5lZCxcbiAgcmVjb3JkSWRzOiBzdHJpbmdbXSxcbiAgcmVjb3Jkcz86IEZlYXR1cmVEYXRhUmVjb3JkW10sXG4gIHVzZUdyYXBoaWNzTGF5ZXI6IGJvb2xlYW4gPSBmYWxzZSxcbiAgZ3JhcGhpY3NMYXllcj86IF9fZXNyaS5HcmFwaGljc0xheWVyLFxuICBtYXBWaWV3PzogX19lc3JpLk1hcFZpZXcgfCBfX2VzcmkuU2NlbmVWaWV3XG4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgaWYgKCFvdXRwdXREUykgcmV0dXJuXG4gIFxuICBjb25zdCBvcmlnaW5EUyA9IGdldE9yaWdpbkRhdGFTb3VyY2Uob3V0cHV0RFMpXG4gIFxuICAvLyBJZiB1c2luZyBncmFwaGljcyBsYXllciwgYWRkIGdyYXBoaWNzIGZvciBoaWdobGlnaHRpbmdcbiAgaWYgKHVzZUdyYXBoaWNzTGF5ZXIgJiYgZ3JhcGhpY3NMYXllciAmJiBtYXBWaWV3ICYmIHJlY29yZHMgJiYgcmVjb3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgIGV2ZW50OiAnc2VsZWN0UmVjb3Jkc0luRGF0YVNvdXJjZXMtdXNpbmctZ3JhcGhpY3MtbGF5ZXInLFxuICAgICAgcmVjb3JkSWRzQ291bnQ6IHJlY29yZElkcy5sZW5ndGgsXG4gICAgICByZWNvcmRzQ291bnQ6IHJlY29yZHMubGVuZ3RoLFxuICAgICAgZ3JhcGhpY3NMYXllcklkOiBncmFwaGljc0xheWVyLmlkLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICBhd2FpdCBhZGRHcmFwaGljc0xheWVyR3JhcGhpY3MoZ3JhcGhpY3NMYXllciwgcmVjb3JkcywgbWFwVmlldylcbiAgICBcbiAgICAvLyBTdGlsbCBzZWxlY3QgaW4gZGF0YSBzb3VyY2UgZm9yIHN0YXRlIG1hbmFnZW1lbnQgKGJ1dCBsYXllciBzZWxlY3Rpb24gd29uJ3Qgc2hvdyBpZiBsYXllciBpcyBvZmYpXG4gICAgaWYgKG9yaWdpbkRTICYmIHR5cGVvZiBvcmlnaW5EUy5zZWxlY3RSZWNvcmRzQnlJZHMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIG9yaWdpbkRTLnNlbGVjdFJlY29yZHNCeUlkcyhyZWNvcmRJZHMsIHJlY29yZHMpXG4gICAgfVxuICB9IGVsc2Uge1xuICAgIC8vIE9yaWdpbmFsIGJlaGF2aW9yOiB1c2UgbGF5ZXIgc2VsZWN0aW9uXG4gICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgIGV2ZW50OiAnc2VsZWN0UmVjb3Jkc0luRGF0YVNvdXJjZXMtdXNpbmctbGF5ZXItc2VsZWN0aW9uJyxcbiAgICAgIHJlY29yZElkc0NvdW50OiByZWNvcmRJZHMubGVuZ3RoLFxuICAgICAgdXNlR3JhcGhpY3NMYXllcixcbiAgICAgIGhhc0dyYXBoaWNzTGF5ZXI6ICEhZ3JhcGhpY3NMYXllcixcbiAgICAgIGhhc01hcFZpZXc6ICEhbWFwVmlldyxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgLy8gU2VsZWN0IGluIG9yaWdpbiBkYXRhIHNvdXJjZSAodGhlIGFjdHVhbCBsYXllcilcbiAgICBpZiAob3JpZ2luRFMgJiYgdHlwZW9mIG9yaWdpbkRTLnNlbGVjdFJlY29yZHNCeUlkcyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgLy8gTG9nIGxheWVyIHN0YXRlIHJpZ2h0IGJlZm9yZSBzZWxlY3Rpb24gdG8gc2VlIHdoYXQncyBhdmFpbGFibGUgd2hlbiBzZWxlY3Rpb24gd29ya3NcbiAgICAgIGNvbnN0IGxheWVyID0gKG9yaWdpbkRTIGFzIGFueSkubGF5ZXIgfHwgKG9yaWdpbkRTIGFzIGFueSkuZ2V0TGF5ZXI/LigpXG4gICAgICBpZiAobGF5ZXIpIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgICAgICBldmVudDogJ3NlbGVjdFJlY29yZHNCeUlkcy1sYXllci1zdGF0ZScsXG4gICAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgICAgbGF5ZXJJZDogbGF5ZXIuaWQsXG4gICAgICAgICAgaGFzTGF5ZXJNYXA6ICEhKGxheWVyIGFzIGFueSkubWFwLFxuICAgICAgICAgIGhhc0xheWVyVmlldzogISEobGF5ZXIgYXMgYW55KS52aWV3LFxuICAgICAgICAgIGhhc0xheWVyUGFyZW50OiAhIShsYXllciBhcyBhbnkpLnBhcmVudCxcbiAgICAgICAgICBwYXJlbnRUeXBlOiAobGF5ZXIgYXMgYW55KS5wYXJlbnQ/LnR5cGUgfHwgJ25vbmUnLFxuICAgICAgICAgIHBhcmVudEhhc01hcDogISEobGF5ZXIgYXMgYW55KS5wYXJlbnQ/Lm1hcCxcbiAgICAgICAgICBwYXJlbnRIYXNWaWV3OiAhIShsYXllciBhcyBhbnkpLnBhcmVudD8udmlldyxcbiAgICAgICAgICBwYXJlbnRIYXNWaWV3czogISEobGF5ZXIgYXMgYW55KS5wYXJlbnQ/LnZpZXdzLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9KVxuICAgICAgfVxuICAgICAgXG4gICAgICBvcmlnaW5EUy5zZWxlY3RSZWNvcmRzQnlJZHMocmVjb3JkSWRzLCByZWNvcmRzKVxuICAgIH1cbiAgfVxuICBcbiAgLy8gQWx3YXlzIHVwZGF0ZSBvdXRwdXREUyBmb3Igd2lkZ2V0J3MgaW50ZXJuYWwgc3RhdGVcbiAgaWYgKHR5cGVvZiBvdXRwdXREUy5zZWxlY3RSZWNvcmRzQnlJZHMgPT09ICdmdW5jdGlvbicpIHtcbiAgICBvdXRwdXREUy5zZWxlY3RSZWNvcmRzQnlJZHMocmVjb3JkSWRzLCByZWNvcmRzKVxuICB9XG59XG5cbi8qKlxuICogQ2xlYXJzIHRoZSBgZGF0YV9zYCBwYXJhbWV0ZXIgZnJvbSB0aGUgVVJMIGhhc2guXG4gKiBFeHBlcmllbmNlIEJ1aWxkZXIgYXV0b21hdGljYWxseSBhZGRzIGBkYXRhX3NgIHdoZW4gc2VsZWN0aW9ucyBhcmUgbWFkZSxcbiAqIGJ1dCBkb2Vzbid0IHJlbW92ZSBpdCB3aGVuIHNlbGVjdGlvbnMgYXJlIGNsZWFyZWQsIGNhdXNpbmcgXCJkaXJ0eSBoYXNoXCIgaXNzdWVzLlxuICogXG4gKiBUaGlzIGZ1bmN0aW9uIGVuc3VyZXMgdGhlIGhhc2ggaXMgY2xlYW4gd2hlbiBzZWxlY3Rpb25zIGFyZSBjbGVhcmVkLlxuICovXG5mdW5jdGlvbiBjbGVhckRhdGFTUGFyYW1ldGVyRnJvbUhhc2goKTogdm9pZCB7XG4gIGNvbnN0IGhhc2ggPSB3aW5kb3cubG9jYXRpb24uaGFzaC5zdWJzdHJpbmcoMSlcbiAgaWYgKCFoYXNoKSByZXR1cm5cbiAgXG4gIGNvbnN0IHVybFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoaGFzaClcbiAgXG4gIGlmICh1cmxQYXJhbXMuaGFzKCdkYXRhX3MnKSkge1xuICAgIHVybFBhcmFtcy5kZWxldGUoJ2RhdGFfcycpXG4gICAgY29uc3QgbmV3SGFzaCA9IHVybFBhcmFtcy50b1N0cmluZygpXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdIQVNIJywge1xuICAgICAgZXZlbnQ6ICdjbGVhckRhdGFTUGFyYW1ldGVyRnJvbUhhc2gnLFxuICAgICAgaGFkRGF0YVM6IHRydWUsXG4gICAgICBuZXdIYXNoOiBuZXdIYXNoID8gYCMke25ld0hhc2h9YCA6ICcoZW1wdHkpJyxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgLy8gVXBkYXRlIHRoZSBVUkwgd2l0aG91dCB0cmlnZ2VyaW5nIGEgcmVsb2FkXG4gICAgLy8gQWx3YXlzIHByZXNlcnZlIHBhdGhuYW1lIGFuZCBxdWVyeSBzdHJpbmcsIG9ubHkgdXBkYXRlIGhhc2hcbiAgICB3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUobnVsbCwgJycsIFxuICAgICAgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lICsgd2luZG93LmxvY2F0aW9uLnNlYXJjaCArIChuZXdIYXNoID8gYCMke25ld0hhc2h9YCA6ICcnKVxuICAgIClcbiAgfVxufVxuXG4vKipcbiAqIENsZWFycyBzZWxlY3Rpb24gaW4gYm90aCB0aGUgb3JpZ2luIGRhdGEgc291cmNlIGFuZCBvdXRwdXQgZGF0YSBzb3VyY2UuXG4gKiBPcHRpb25hbGx5IGNsZWFycyBncmFwaGljcyBsYXllciBpZiB1c2luZyBncmFwaGljcyBsYXllciBtb2RlLlxuICogQWxzbyBjbGVhcnMgdGhlIGBkYXRhX3NgIHBhcmFtZXRlciBmcm9tIHRoZSBVUkwgaGFzaCB0byBwcmV2ZW50IFwiZGlydHkgaGFzaFwiIGlzc3Vlcy5cbiAqIFxuICogQHBhcmFtIHdpZGdldElkIC0gVGhlIHdpZGdldCBJRCAobmVlZGVkIHRvIHB1Ymxpc2ggbWVzc2FnZSlcbiAqIEBwYXJhbSBvdXRwdXREUyAtIFRoZSBvdXRwdXQgZGF0YSBzb3VyY2VcbiAqIEBwYXJhbSB1c2VHcmFwaGljc0xheWVyIC0gV2hldGhlciB0byBjbGVhciBncmFwaGljcyBsYXllciAoZGVmYXVsdDogZmFsc2UpXG4gKiBAcGFyYW0gZ3JhcGhpY3NMYXllciAtIEdyYXBoaWNzIGxheWVyIGluc3RhbmNlIChyZXF1aXJlZCBpZiB1c2VHcmFwaGljc0xheWVyIGlzIHRydWUpXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjbGVhclNlbGVjdGlvbkluRGF0YVNvdXJjZXMgKFxuICB3aWRnZXRJZDogc3RyaW5nLFxuICBvdXRwdXREUzogRGF0YVNvdXJjZSB8IG51bGwgfCB1bmRlZmluZWQsXG4gIHVzZUdyYXBoaWNzTGF5ZXI6IGJvb2xlYW4gPSBmYWxzZSxcbiAgZ3JhcGhpY3NMYXllcj86IF9fZXNyaS5HcmFwaGljc0xheWVyXG4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgLy8gQ2xlYXIgZ3JhcGhpY3MgbGF5ZXIgaWYgdXNpbmcgZ3JhcGhpY3MgbGF5ZXIgbW9kZVxuICBpZiAodXNlR3JhcGhpY3NMYXllciAmJiBncmFwaGljc0xheWVyKSB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgIGV2ZW50OiAnY2xlYXJTZWxlY3Rpb25JbkRhdGFTb3VyY2VzLWNsZWFyaW5nLWdyYXBoaWNzLWxheWVyJyxcbiAgICAgIGdyYXBoaWNzTGF5ZXJJZDogZ3JhcGhpY3NMYXllci5pZCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgY2xlYXJHcmFwaGljc0xheWVyKGdyYXBoaWNzTGF5ZXIpXG4gIH1cblxuICAvLyBDbGVhciBkYXRhIHNvdXJjZSBzZWxlY3Rpb24gZm9yIHN0YXRlIG1hbmFnZW1lbnRcbiAgYXdhaXQgc2VsZWN0UmVjb3Jkc0luRGF0YVNvdXJjZXMob3V0cHV0RFMsIFtdLCB1bmRlZmluZWQsIGZhbHNlKVxuXG4gIC8vIFB1Ymxpc2ggdGhlIGVtcHR5IHNlbGVjdGlvbiBtZXNzYWdlIHNvIHRoZSBNYXAgc2VsZWN0aW9uIChibHVlIGJveGVzKSBjbGVhcnNcbiAgaWYgKG91dHB1dERTKSB7XG4gICAgcHVibGlzaFNlbGVjdGlvbk1lc3NhZ2Uod2lkZ2V0SWQsIFtdLCBvdXRwdXREUywgdHJ1ZSlcbiAgfVxuICBcbiAgLy8gQ2xlYXIgZGF0YV9zIHBhcmFtZXRlciBmcm9tIGhhc2ggdG8gcHJldmVudCBkaXJ0eSBoYXNoXG4gIC8vIEV4cGVyaWVuY2UgQnVpbGRlciBhZGRzIGRhdGFfcyB3aGVuIHNlbGVjdGlvbnMgYXJlIG1hZGUgYnV0IGRvZXNuJ3QgcmVtb3ZlIGl0IHdoZW4gY2xlYXJlZFxuICBjbGVhckRhdGFTUGFyYW1ldGVyRnJvbUhhc2goKVxufVxuXG4vKipcbiAqIFB1Ymxpc2hlcyBhIHNlbGVjdGlvbiBjaGFuZ2UgbWVzc2FnZSBmb3IgdGhlIGdpdmVuIHJlY29yZHMgYW5kIGRhdGEgc291cmNlcy5cbiAqIFxuICogQHBhcmFtIHdpZGdldElkIC0gVGhlIHdpZGdldCBJRFxuICogQHBhcmFtIHJlY29yZHMgLSBBcnJheSBvZiBGZWF0dXJlRGF0YVJlY29yZCBvYmplY3RzIChlbXB0eSBhcnJheSB0byBjbGVhcilcbiAqIEBwYXJhbSBvdXRwdXREUyAtIFRoZSBvdXRwdXQgZGF0YSBzb3VyY2VcbiAqIEBwYXJhbSBhbHNvUHVibGlzaFRvT3V0cHV0RFMgLSBXaGV0aGVyIHRvIGFsc28gcHVibGlzaCBhIG1lc3NhZ2UgZm9yIG91dHB1dERTIChkZWZhdWx0OiBmYWxzZSlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHB1Ymxpc2hTZWxlY3Rpb25NZXNzYWdlKFxuICB3aWRnZXRJZDogc3RyaW5nLFxuICByZWNvcmRzOiBGZWF0dXJlRGF0YVJlY29yZFtdLFxuICBvdXRwdXREUzogRGF0YVNvdXJjZSB8IG51bGwgfCB1bmRlZmluZWQsXG4gIGFsc29QdWJsaXNoVG9PdXRwdXREUzogYm9vbGVhbiA9IGZhbHNlXG4pOiB2b2lkIHtcbiAgaWYgKCFvdXRwdXREUykgcmV0dXJuXG4gIFxuICBjb25zdCBvcmlnaW5EUyA9IGdldE9yaWdpbkRhdGFTb3VyY2Uob3V0cHV0RFMpXG4gIFxuICBpZiAob3JpZ2luRFMpIHtcbiAgICBNZXNzYWdlTWFuYWdlci5nZXRJbnN0YW5jZSgpLnB1Ymxpc2hNZXNzYWdlKFxuICAgICAgbmV3IERhdGFSZWNvcmRzU2VsZWN0aW9uQ2hhbmdlTWVzc2FnZSh3aWRnZXRJZCwgcmVjb3JkcywgW29yaWdpbkRTLmlkXSlcbiAgICApXG4gIH0gZWxzZSBpZiAoYWxzb1B1Ymxpc2hUb091dHB1dERTKSB7XG4gICAgTWVzc2FnZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5wdWJsaXNoTWVzc2FnZShcbiAgICAgIG5ldyBEYXRhUmVjb3Jkc1NlbGVjdGlvbkNoYW5nZU1lc3NhZ2Uod2lkZ2V0SWQsIHJlY29yZHMsIFtvdXRwdXREUy5pZF0pXG4gICAgKVxuICB9XG4gIFxuICAvLyBPcHRpb25hbGx5IHB1Ymxpc2ggdG8gb3V0cHV0RFMgYXMgd2VsbCAoZm9yIHNvbWUgZWRnZSBjYXNlcylcbiAgaWYgKGFsc29QdWJsaXNoVG9PdXRwdXREUyAmJiBvcmlnaW5EUykge1xuICAgIE1lc3NhZ2VNYW5hZ2VyLmdldEluc3RhbmNlKCkucHVibGlzaE1lc3NhZ2UoXG4gICAgICBuZXcgRGF0YVJlY29yZHNTZWxlY3Rpb25DaGFuZ2VNZXNzYWdlKHdpZGdldElkLCByZWNvcmRzLCBbb3V0cHV0RFMuaWRdKVxuICAgIClcbiAgfVxufVxuXG4vKipcbiAqIFNlbGVjdHMgcmVjb3JkcyBhbmQgcHVibGlzaGVzIHRoZSBzZWxlY3Rpb24gbWVzc2FnZSBpbiBvbmUgY2FsbC5cbiAqIFRoaXMgaXMgdGhlIG1vc3QgY29tbW9uIHBhdHRlcm4gLSBzZWxlY3RpbmcgcmVjb3JkcyBhbmQgbm90aWZ5aW5nIHRoZSBtYXAuXG4gKiBPcHRpb25hbGx5IHVzZXMgZ3JhcGhpY3MgbGF5ZXIgZm9yIGhpZ2hsaWdodGluZyAoaW5kZXBlbmRlbnQgb2YgbGF5ZXIgdmlzaWJpbGl0eSkuXG4gKiBcbiAqIEBwYXJhbSB3aWRnZXRJZCAtIFRoZSB3aWRnZXQgSURcbiAqIEBwYXJhbSBvdXRwdXREUyAtIFRoZSBvdXRwdXQgZGF0YSBzb3VyY2VcbiAqIEBwYXJhbSByZWNvcmRJZHMgLSBBcnJheSBvZiByZWNvcmQgSURzIHRvIHNlbGVjdFxuICogQHBhcmFtIHJlY29yZHMgLSBBcnJheSBvZiBGZWF0dXJlRGF0YVJlY29yZCBvYmplY3RzIGZvciBwcm9wZXIgaGlnaGxpZ2h0aW5nXG4gKiBAcGFyYW0gYWxzb1B1Ymxpc2hUb091dHB1dERTIC0gV2hldGhlciB0byBhbHNvIHB1Ymxpc2ggYSBtZXNzYWdlIGZvciBvdXRwdXREUyAoZGVmYXVsdDogZmFsc2UpXG4gKiBAcGFyYW0gdXNlR3JhcGhpY3NMYXllciAtIFdoZXRoZXIgdG8gdXNlIGdyYXBoaWNzIGxheWVyIGZvciBoaWdobGlnaHRpbmcgKGRlZmF1bHQ6IGZhbHNlKVxuICogQHBhcmFtIGdyYXBoaWNzTGF5ZXIgLSBHcmFwaGljcyBsYXllciBpbnN0YW5jZSAocmVxdWlyZWQgaWYgdXNlR3JhcGhpY3NMYXllciBpcyB0cnVlKVxuICogQHBhcmFtIG1hcFZpZXcgLSBNYXAgdmlldyBpbnN0YW5jZSAocmVxdWlyZWQgaWYgdXNlR3JhcGhpY3NMYXllciBpcyB0cnVlKVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2VsZWN0UmVjb3Jkc0FuZFB1Ymxpc2goXG4gIHdpZGdldElkOiBzdHJpbmcsXG4gIG91dHB1dERTOiBEYXRhU291cmNlIHwgbnVsbCB8IHVuZGVmaW5lZCxcbiAgcmVjb3JkSWRzOiBzdHJpbmdbXSxcbiAgcmVjb3JkczogRmVhdHVyZURhdGFSZWNvcmRbXSxcbiAgYWxzb1B1Ymxpc2hUb091dHB1dERTOiBib29sZWFuID0gZmFsc2UsXG4gIHVzZUdyYXBoaWNzTGF5ZXI6IGJvb2xlYW4gPSBmYWxzZSxcbiAgZ3JhcGhpY3NMYXllcj86IF9fZXNyaS5HcmFwaGljc0xheWVyLFxuICBtYXBWaWV3PzogX19lc3JpLk1hcFZpZXcgfCBfX2VzcmkuU2NlbmVWaWV3XG4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgYXdhaXQgc2VsZWN0UmVjb3Jkc0luRGF0YVNvdXJjZXMob3V0cHV0RFMsIHJlY29yZElkcywgcmVjb3JkcywgdXNlR3JhcGhpY3NMYXllciwgZ3JhcGhpY3NMYXllciwgbWFwVmlldylcbiAgcHVibGlzaFNlbGVjdGlvbk1lc3NhZ2Uod2lkZ2V0SWQsIHJlY29yZHMsIG91dHB1dERTLCBhbHNvUHVibGlzaFRvT3V0cHV0RFMpXG59XG5cbi8qKlxuICogRmluZHMgdGhlIFwiQ2xlYXIgcmVzdWx0c1wiIGJ1dHRvbiBpbiB0aGUgRE9NLlxuICogVXNlZCB3aGVuIHByb2dyYW1tYXRpY2FsbHkgdHJpZ2dlcmluZyB0aGUgY2xlYXIgYWN0aW9uLlxuICogXG4gKiBAcmV0dXJucyBUaGUgY2xlYXIgYnV0dG9uIGVsZW1lbnQsIG9yIG51bGwgaWYgbm90IGZvdW5kXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmaW5kQ2xlYXJSZXN1bHRzQnV0dG9uKCk6IEhUTUxCdXR0b25FbGVtZW50IHwgbnVsbCB7XG4gIC8vIEhhcmRlbmVkOiBQcmlvcml0aXplIHRoZSBvbmUgaW4gdGhlIHJlc3VsdHMgaGVhZGVyLCBmYWxsYmFjayB0byBhbnlcbiAgcmV0dXJuIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucXVlcnktcmVzdWx0X19oZWFkZXIgYnV0dG9uW2FyaWEtbGFiZWw9XCJDbGVhciByZXN1bHRzXCJdJykgfHwgXG4gICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYnV0dG9uW2FyaWEtbGFiZWw9XCJDbGVhciByZXN1bHRzXCJdJykpIGFzIEhUTUxCdXR0b25FbGVtZW50IHwgbnVsbFxufVxuXG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7XG4gIFJlYWN0LFxuICBqc3gsXG4gIGNzcyxcbiAgY2xhc3NOYW1lcyxcbiAgdHlwZSBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLFxuICB0eXBlIEltbXV0YWJsZU9iamVjdCxcbiAgdHlwZSBEYXRhUmVjb3JkLFxuICB0eXBlIEZlYXR1cmVEYXRhUmVjb3JkXG59IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IHR5cGUgUXVlcnlJdGVtVHlwZSwgTGlzdERpcmVjdGlvbiB9IGZyb20gJy4uL2NvbmZpZydcbmltcG9ydCB7IFF1ZXJ5UmVzdWx0SXRlbSB9IGZyb20gJy4vcXVlcnktcmVzdWx0LWl0ZW0nXG5pbXBvcnQgeyBnZXRQb3B1cFRlbXBsYXRlIH0gZnJvbSAnLi9xdWVyeS11dGlscydcbmltcG9ydCB7IHVzZUF1dG9IZWlnaHQgfSBmcm9tICcuL3VzZUF1dG9IZWlnaHQnXG5pbXBvcnQgeyBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyIH0gZnJvbSAnd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24nXG5cbmNvbnN0IGRlYnVnTG9nZ2VyID0gY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlcigpXG5cbmV4cG9ydCBpbnRlcmZhY2UgU2ltcGxlTGlzdFByb3BzIHtcbiAgd2lkZ2V0SWQ6IHN0cmluZ1xuICBxdWVyeUl0ZW06IEltbXV0YWJsZU9iamVjdDxRdWVyeUl0ZW1UeXBlPlxuICBvdXRwdXREUzogRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICByZWNvcmRzOiBEYXRhUmVjb3JkW11cbiAgZGlyZWN0aW9uOiBMaXN0RGlyZWN0aW9uXG4gIG9uRXNjYXBlOiAoKSA9PiB2b2lkXG4gIG9uU2VsZWN0Q2hhbmdlOiAoZGF0YTogRmVhdHVyZURhdGFSZWNvcmQpID0+IHZvaWRcbiAgb25SZW1vdmU6IChkYXRhOiBGZWF0dXJlRGF0YVJlY29yZCkgPT4gdm9pZFxuICBleHBhbmRCeURlZmF1bHQ/OiBib29sZWFuXG4gIGl0ZW1FeHBhbmRTdGF0ZXM/OiBNYXA8c3RyaW5nLCBib29sZWFuPlxuICByZW1vdmVkUmVjb3JkSWRzPzogU2V0PHN0cmluZz5cbiAgb25SZW5kZXJEb25lPzogKG9wdGlvbnM6IHsgZGF0YUl0ZW1zOiBhbnlbXSB9KSA9PiB2b2lkXG59XG5cbmNvbnN0IGdldFN0eWxlID0gKGlzQXV0b0hlaWdodDogYm9vbGVhbikgPT4ge1xuICByZXR1cm4gY3NzYFxuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleDogMSAxICR7aXNBdXRvSGVpZ2h0ID8gJ2F1dG8nIDogMH07XG4gICAgb3ZlcmZsb3c6IGF1dG87XG4gICAgbWF4LWhlaWdodDogJHtpc0F1dG9IZWlnaHQgPyAnY2FsYyg2MS44dmggLSAxMDBweCknIDogJ25vbmUnfTtcblxuICAgIC5xdWVyeS1yZXN1bHQtaXRlbSArIC5xdWVyeS1yZXN1bHQtaXRlbSB7XG4gICAgICBtYXJnaW4tbGVmdDogMC41cmVtO1xuICAgICAgbWFyZ2luLXRvcDogMDtcbiAgICB9XG5cbiAgICAmLnZlcnRpY2FsIHtcbiAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAubGlzdC1pdGVtcyB7XG4gICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgIH1cblxuICAgICAgLmZlYXR1cmUtaW5mby1jb21wb25lbnQge1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgIH1cblxuICAgICAgLnF1ZXJ5LXJlc3VsdC1pdGVtICsgLnF1ZXJ5LXJlc3VsdC1pdGVtIHtcbiAgICAgICAgbWFyZ2luLWxlZnQ6IDA7XG4gICAgICAgIG1hcmdpbi10b3A6IDAuNXJlbTtcbiAgICAgIH1cbiAgICB9XG4gICAgLmxpc3QtaXRlbXMge1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICB9XG4gIGBcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIFNpbXBsZUxpc3QgKHByb3BzOiBTaW1wbGVMaXN0UHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIHdpZGdldElkLFxuICAgIG91dHB1dERTLFxuICAgIHF1ZXJ5SXRlbSxcbiAgICByZWNvcmRzLFxuICAgIGRpcmVjdGlvbixcbiAgICBvbkVzY2FwZSxcbiAgICBvblNlbGVjdENoYW5nZSxcbiAgICBvblJlbW92ZSxcbiAgICBleHBhbmRCeURlZmF1bHQsXG4gICAgaXRlbUV4cGFuZFN0YXRlcyxcbiAgICByZW1vdmVkUmVjb3JkSWRzLFxuICAgIG9uUmVuZGVyRG9uZVxuICB9ID0gcHJvcHNcbiAgXG4gIGNvbnN0IFtwb3B1cFRlbXBsYXRlLCBzZXRQb3B1cFRlbXBsYXRlXSA9IFJlYWN0LnVzZVN0YXRlPGFueT4oKVxuICBjb25zdCBbZGVmYXVsdFBvcHVwVGVtcGxhdGUsIHNldERlZmF1bHRQb3B1cFRlbXBsYXRlXSA9IFJlYWN0LnVzZVN0YXRlPGFueT4oKVxuICBjb25zdCBpc0F1dG9IZWlnaHQgPSB1c2VBdXRvSGVpZ2h0KClcbiAgY29uc3QgcmVzdWx0Q29udGFpbmVyUmVmID0gUmVhY3QudXNlUmVmPEhUTUxEaXZFbGVtZW50PihudWxsKVxuXG4gIC8vIEZpbHRlciBvdXQgcmVtb3ZlZCByZWNvcmRzXG4gIGNvbnN0IGZpbHRlcmVkUmVjb3JkcyA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgIHJldHVybiByZWNvcmRzPy5maWx0ZXIocmVjb3JkID0+ICFyZW1vdmVkUmVjb3JkSWRzPy5oYXMocmVjb3JkLmdldElkKCkpKSB8fCBbXVxuICB9LCBbcmVjb3JkcywgcmVtb3ZlZFJlY29yZElkc10pXG5cbiAgLy8gTm90aWZ5IHBhcmVudCB3aGVuIHJlY29yZHMgYXJlIHJlbmRlcmVkIChmb3IgYXV0by1zd2l0Y2ggbG9naWMpXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKG9uUmVuZGVyRG9uZSAmJiBmaWx0ZXJlZFJlY29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAnU2ltcGxlTGlzdC1vblJlbmRlckRvbmUtY2FsbGVkJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBxdWVyeUl0ZW0uY29uZmlnSWQsXG4gICAgICAgIGZpbHRlcmVkUmVjb3Jkc0NvdW50OiBmaWx0ZXJlZFJlY29yZHMubGVuZ3RoLFxuICAgICAgICB0b3RhbFJlY29yZHNDb3VudDogcmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgIHJlbW92ZWRSZWNvcmRJZHNDb3VudDogcmVtb3ZlZFJlY29yZElkcz8uc2l6ZSB8fCAwLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICBvblJlbmRlckRvbmUoeyBkYXRhSXRlbXM6IGZpbHRlcmVkUmVjb3JkcyB9KVxuICAgIH1cbiAgfSwgW2ZpbHRlcmVkUmVjb3Jkcywgb25SZW5kZXJEb25lLCB3aWRnZXRJZCwgcXVlcnlJdGVtLmNvbmZpZ0lkLCByZWNvcmRzLmxlbmd0aCwgcmVtb3ZlZFJlY29yZElkc10pXG5cbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBnZXRQb3B1cFRlbXBsYXRlKG91dHB1dERTLCBxdWVyeUl0ZW0pLnRoZW4ocnMgPT4ge1xuICAgICAgc2V0UG9wdXBUZW1wbGF0ZShycy5wb3B1cFRlbXBsYXRlKVxuICAgICAgc2V0RGVmYXVsdFBvcHVwVGVtcGxhdGUocnMuZGVmYXVsdFBvcHVwVGVtcGxhdGUpXG4gICAgfSlcbiAgfSwgW291dHB1dERTLCBxdWVyeUl0ZW1dKVxuXG4gIGNvbnN0IGhhbmRsZUtleVVwID0gUmVhY3QudXNlQ2FsbGJhY2soKGV2dCkgPT4ge1xuICAgIGlmIChldnQua2V5ID09PSAnRXNjYXBlJykge1xuICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpXG4gICAgICBvbkVzY2FwZSgpXG4gICAgfVxuICB9LCBbb25Fc2NhcGVdKVxuXG4gIGNvbnN0IGhhbmRsZUtleURvd24gPSBSZWFjdC51c2VDYWxsYmFjaygoZXZ0KSA9PiB7XG4gICAgaWYgKGV2dC5rZXkgPT09ICcgJykge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KClcbiAgICB9XG4gIH0sIFtdKVxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBcbiAgICAgIG9uS2V5VXA9e2hhbmRsZUtleVVwfSBcbiAgICAgIG9uS2V5RG93bj17aGFuZGxlS2V5RG93bn0gXG4gICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZXMoeyB2ZXJ0aWNhbDogZGlyZWN0aW9uID09PSBMaXN0RGlyZWN0aW9uLlZlcnRpY2FsIH0pfSBcbiAgICAgIGNzcz17Z2V0U3R5bGUoaXNBdXRvSGVpZ2h0KX1cbiAgICAgIHJlZj17cmVzdWx0Q29udGFpbmVyUmVmfVxuICAgID5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdsaXN0LWl0ZW1zIHB4LTQgcHktMScgcm9sZT0nbGlzdGJveCc+XG4gICAgICAgIHtmaWx0ZXJlZFJlY29yZHMubWFwKChkYXRhSXRlbSkgPT4ge1xuICAgICAgICAgIGNvbnN0IHJlY29yZElkID0gZGF0YUl0ZW0uZ2V0SWQoKVxuICAgICAgICAgIC8vIFVzZSBpbmRpdmlkdWFsIHN0YXRlIGZyb20gbWFwIGlmIGF2YWlsYWJsZSwgb3RoZXJ3aXNlIGZhbGwgYmFjayB0byBleHBhbmRCeURlZmF1bHRcbiAgICAgICAgICBjb25zdCBpbmRpdmlkdWFsRXhwYW5kU3RhdGUgPSBpdGVtRXhwYW5kU3RhdGVzPy5nZXQocmVjb3JkSWQpXG4gICAgICAgICAgY29uc3QgZXhwYW5kQnlEZWZhdWx0VmFsdWUgPSBpbmRpdmlkdWFsRXhwYW5kU3RhdGUgIT09IHVuZGVmaW5lZCA/IGluZGl2aWR1YWxFeHBhbmRTdGF0ZSA6IChleHBhbmRCeURlZmF1bHQgPz8gdHJ1ZSlcbiAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPFF1ZXJ5UmVzdWx0SXRlbVxuICAgICAgICAgICAgICBrZXk9e3JlY29yZElkfVxuICAgICAgICAgICAgICBkYXRhPXtkYXRhSXRlbSBhcyBGZWF0dXJlRGF0YVJlY29yZH1cbiAgICAgICAgICAgICAgZGF0YVNvdXJjZT17b3V0cHV0RFN9XG4gICAgICAgICAgICAgIHdpZGdldElkPXt3aWRnZXRJZH1cbiAgICAgICAgICAgICAgcG9wdXBUZW1wbGF0ZT17cG9wdXBUZW1wbGF0ZX1cbiAgICAgICAgICAgICAgZGVmYXVsdFBvcHVwVGVtcGxhdGU9e2RlZmF1bHRQb3B1cFRlbXBsYXRlfVxuICAgICAgICAgICAgICBleHBhbmRCeURlZmF1bHQ9e2V4cGFuZEJ5RGVmYXVsdFZhbHVlfVxuICAgICAgICAgICAgICBvbkNsaWNrPXtvblNlbGVjdENoYW5nZX1cbiAgICAgICAgICAgICAgb25SZW1vdmU9e29uUmVtb3ZlfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICApXG4gICAgICAgIH0pfVxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIClcbn1cblxuIiwiZXhwb3J0IGRlZmF1bHQge1xuICBfd2lkZ2V0TGFiZWw6ICdRdWVyeVNpbXBsZScsXG4gIHJlc2V0OiAnUmVzZXQnLFxuICBzZWFyY2hMYXllcjogJ1NlYXJjaCBMYXllcicsXG4gIGFwcGx5OiAnU2VhcmNoJyxcbiAgbm9EYXRhQXZhaWxhYmxlOiAnRXJyb3IgaW4gbG9hZGluZyBkYXRhJyxcbiAgbm9RdWVyeUl0ZW06ICdObyBxdWVyeScsXG4gIG5ld1F1ZXJ5SGludDogJ0FkZCBjb250ZW50IGJ5IGNsaWNraW5nIHRoZSBcIntsYWJlbH1cIiBidXR0b24gb24gdGhlIGNvbmZpZ3VyYXRpb24gcGFuZWwnLFxuICBhdHRyaWJ1dGVGaWx0ZXI6ICdBdHRyaWJ1dGUgZmlsdGVyJyxcbiAgc3BhdGlhbEZpbHRlcjogJ1NwYXRpYWwgZmlsdGVyJyxcbiAgc3BhdGlhbEZpbHRlclR5cGVfQ3VycmVudE1hcEV4dGVudDogJ0N1cnJlbnQgbWFwIGV4dGVudCcsXG4gIHNwYXRpYWxGaWx0ZXJUeXBlX0ludGVyYWN0aXZlRHJhd01vZGU6ICdEcmF3biBncmFwaGljJyxcbiAgcmVzdWx0czogJ1Jlc3VsdHMnLFxuICBmZWF0dXJlc0Rpc3BsYXllZDogJ0ZlYXR1cmVzIGRpc3BsYXllZCcsXG4gIGNsZWFyUmVzdWx0OiAnQ2xlYXIgYWxsIHJlc3VsdHMnLFxuICBjaGVja1Jlc3VsdDogJ0NoZWNrIHJlc3VsdHMnLFxuICBtYXBNdXN0QmVWaXNpYmxlOiAnTWFwIG11c3QgYmUgdmlzaWJsZScsXG4gIGNob29zZUZpbHRlclR5cGU6ICdDaG9vc2UgdGhlIGZpbHRlciB0eXBlJyxcbiAgY2hvb3NlR2VvbWV0cnlUeXBlOiAnQ2hvb3NlIHRoZSBnZW9tZXRyeSB0eXBlJyxcbiAgY2xlYXJEcmF3aW5nOiAnQ2xlYXIgdGhlIGdyYXBoaWMgd2hlbiBhcHBseWluZycsXG4gIGZlYXR1cmVGcm9tRHM6ICdTZWxlY3RpbmcgZmVhdHVyZXMgZnJvbSBkYXRhIHNvdXJjZScsXG4gIGZlYXR1cmVGcm9tTWFwOiAnR2VvbWV0cmllcyBmcm9tIGEgbWFwJyxcbiAgY2hvb3NlRmlsdGVyTGF5ZXI6ICdDaG9vc2UgYSBmaWx0ZXIgbGF5ZXInLFxuICBzZWxlY3RlZFJlY29yZHM6ICd7bnVtfSByZWNvcmRzIGFyZSBzZWxlY3RlZCBmb3IgdGhlIGZpbHRlcicsXG4gIHNwYXRpYWxOb3RBdmFpbGFibGU6ICdTcGF0aWFsIGZpbHRlciBpcyBub3QgYXZhaWxhYmxlIGhlcmUuJyxcbiAgc3BhdGlhbE5vdEF2YWlsYWJsZURlc2M6ICdTcGF0aWFsIGZpbHRlciBpcyBub3Qgc3VwcG9ydGVkIGZvciBhIGRhdGEgc291cmNlIHRoYXQgYWxyZWFkeSBjb250YWlucyBhIHNwYXRpYWwgcXVlcnkuJyxcbiAgcHJlY29uZmlndXJlZDogJ1ByZWNvbmZpZ3VyZWQnLFxuICBydW50aW1lOiAnUnVudGltZScsXG4gIHNlbGVjdExvYWRlZDogJ1NlbGVjdCBsb2FkZWQnLFxuICByZXRyaWV2aW5nOiAnUmV0cmlldmluZyBxdWVyeSByZXN1bHRzLi4uJyxcbiAgem9vbVRvU2VsZWN0ZWQ6ICdab29tIHRvIHNlbGVjdGVkJyxcbiAgcXVlcnlUYWI6ICdRdWVyeScsXG4gIHJlc3VsdHNUYWI6ICdSZXN1bHRzJyxcbiAgZXhwYW5kQWxsOiAnRXhwYW5kIGFsbCcsXG4gIGNvbGxhcHNlQWxsOiAnQ29sbGFwc2UgYWxsJyxcbiAgYWRkVG9NYXA6ICdBZGQgdG8gbWFwJyxcbiAgcmVzdWx0c01vZGU6ICdSZXN1bHRzIG1vZGUnLFxuICBjcmVhdGVOZXdSZXN1bHRzOiAnQ3JlYXRlIG5ldyByZXN1bHRzJyxcbiAgYWRkVG9DdXJyZW50UmVzdWx0czogJ0FkZCB0byBjdXJyZW50IHJlc3VsdHMnLFxuICByZW1vdmVGcm9tQ3VycmVudFJlc3VsdHM6ICdSZW1vdmUgZnJvbSBjdXJyZW50IHJlc3VsdHMnLFxuICByZXN1bHRzTW9kZURpc2FibGVkUmVtb3ZlOiAnUmVtb3ZlIGZyb20gY3VycmVudCByZXN1bHRzIChubyBhY2N1bXVsYXRlZCByZXN1bHRzKScsXG4gIHJlc3VsdHNNb2RlRGVzYzogJ0NvbnRyb2xzIGhvdyBxdWVyeSByZXN1bHRzIGFyZSBjb21iaW5lZDpcXG7igKIgTmV3OiBFYWNoIHF1ZXJ5IHJlcGxhY2VzIHByZXZpb3VzIHJlc3VsdHNcXG7igKIgQWRkOiBOZXcgcmVzdWx0cyBhcmUgYWRkZWQgdG8gZXhpc3RpbmcgcmVzdWx0c1xcbuKAoiBSZW1vdmU6IE1hdGNoaW5nIHJlc3VsdHMgYXJlIHJlbW92ZWQgZnJvbSBleGlzdGluZyByZXN1bHRzJyxcbiAgcmVzdWx0c01vZGVOZXc6ICdOZXcnLFxuICByZXN1bHRzTW9kZUFkZDogJ0FkZCcsXG4gIHJlc3VsdHNNb2RlUmVtb3ZlOiAnUmVtb3ZlJ1xufVxuXG5cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHsgUmVhY3QsIFJlYWN0UmVkdXgsIHR5cGUgSU1TdGF0ZSB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IExheW91dEl0ZW1TaXplTW9kZXMgfSBmcm9tICdqaW11LWxheW91dHMvbGF5b3V0LXJ1bnRpbWUnXG5pbXBvcnQgeyBRdWVyeVdpZGdldENvbnRleHQgfSBmcm9tICcuL3dpZGdldC1jb250ZXh0J1xuXG5leHBvcnQgZnVuY3Rpb24gdXNlQXV0b0hlaWdodCAoKSB7XG4gIGNvbnN0IGxheW91dEluZm8gPSBSZWFjdC51c2VDb250ZXh0KFF1ZXJ5V2lkZ2V0Q29udGV4dClcbiAgbGV0IGxheW91dElkXG4gIGxldCBsYXlvdXRJdGVtSWRcbiAgaWYgKGxheW91dEluZm8uaW5jbHVkZXMoJzonKSkge1xuICAgIGNvbnN0IHIgPSBsYXlvdXRJbmZvLnNwbGl0KCc6JylcbiAgICBsYXlvdXRJZCA9IHJbMF1cbiAgICBsYXlvdXRJdGVtSWQgPSByWzFdXG4gIH1cbiAgY29uc3QgaXNBdXRvID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcbiAgICBjb25zdCBsYXlvdXRJdGVtID0gc3RhdGUuYXBwQ29uZmlnLmxheW91dHNbbGF5b3V0SWRdPy5jb250ZW50Py5bbGF5b3V0SXRlbUlkXVxuICAgIHJldHVybiBsYXlvdXRJdGVtPy5zZXR0aW5nPy5hdXRvUHJvcHM/LmhlaWdodCA9PT0gTGF5b3V0SXRlbVNpemVNb2Rlcy5BdXRvXG4gIH0pXG5cbiAgcmV0dXJuIGlzQXV0b1xufVxuXG5cbiIsImltcG9ydCBpY29uV2FybmluZyBmcm9tICdqaW11LWljb25zL3N2Zy9vdXRsaW5lZC9zdWdnZXN0ZWQvd2FybmluZy5zdmcnXG5pbXBvcnQgaWNvbkVycm9yIGZyb20gJ2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL3N1Z2dlc3RlZC9lcnJvci5zdmcnXG5pbXBvcnQgYXJyb3dOYXZCYWNrIGZyb20gJ2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2RpcmVjdGlvbmFsL2Fycm93LWxlZnQuc3ZnJ1xuaW1wb3J0IGFycm93UmlnaHQgZnJvbSAnamltdS1pY29ucy9zdmcvb3V0bGluZWQvZGlyZWN0aW9uYWwvcmlnaHQuc3ZnJ1xuaW1wb3J0IHRvb2xEZWxldGUgZnJvbSAnamltdS1pY29ucy9zdmcvb3V0bGluZWQvZWRpdG9yL3RyYXNoLnN2ZydcbmltcG9ydCBpY29uTW9yZSBmcm9tICdqaW11LWljb25zL3N2Zy9vdXRsaW5lZC9hcHBsaWNhdGlvbi9tb3JlLWhvcml6b250YWwuc3ZnJ1xuXG5leHBvcnQgY29uc3QgZ2V0V2lkZ2V0UnVudGltZURhdGFNYXAgPSAoKSA9PiAoe1xuICBpY29uTWFwOiB7XG4gICAgaWNvblF1ZXJ5OiByZXF1aXJlKCcuLi8uLi9pY29uLnN2ZycpLFxuICAgIGljb25XYXJuaW5nLFxuICAgIGljb25FcnJvcixcbiAgICBhcnJvd05hdkJhY2ssXG4gICAgYXJyb3dSaWdodCxcbiAgICB0b29sRGVsZXRlLFxuICAgIGljb25Nb3JlXG4gIH1cbn0pXG5cblxuXG4iLCJpbXBvcnQgeyBSZWFjdCB9IGZyb20gJ2ppbXUtY29yZSdcblxuZXhwb3J0IGNvbnN0IFF1ZXJ5V2lkZ2V0Q29udGV4dCA9IFJlYWN0LmNyZWF0ZUNvbnRleHQ8c3RyaW5nPihudWxsKVxuXG5cbiIsIi8qKlxuICogU2hhcmVkIHpvb20gdXRpbGl0aWVzIGZvciBRdWVyeVNpbXBsZSB3aWRnZXQuXG4gKiBcbiAqIFByb3ZpZGVzIHB1cmUgZnVuY3Rpb25zIGZvciB6b29taW5nIHRvIGZlYXR1cmUgcmVjb3JkcyB0aGF0IGNhbiBiZSB1c2VkXG4gKiBieSBib3RoIFJlYWN0IGhvb2tzIGFuZCBkYXRhIGFjdGlvbnMuXG4gKi9cblxuaW1wb3J0IHR5cGUgeyBGZWF0dXJlRGF0YVJlY29yZCB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIgfSBmcm9tICd3aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbidcblxuY29uc3QgZGVidWdMb2dnZXIgPSBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyKClcblxuZXhwb3J0IGludGVyZmFjZSBab29tVG9SZWNvcmRzT3B0aW9ucyB7XG4gIHBhZGRpbmc/OiB7XG4gICAgbGVmdDogbnVtYmVyXG4gICAgcmlnaHQ6IG51bWJlclxuICAgIHRvcDogbnVtYmVyXG4gICAgYm90dG9tOiBudW1iZXJcbiAgfVxuICAvKiogXG4gICAqIEJ1ZmZlciBkaXN0YW5jZSBpbiBmZWV0IGZvciB6ZXJvLWFyZWEgZXh0ZW50cyAoZGVmYXVsdDogMzAwKS5cbiAgICogQXBwbGllZCB3aGVuIHpvb21pbmcgdG8gc2luZ2xlIHBvaW50cyBvciBvdmVybGFwcGluZyBwb2ludHMuXG4gICAqIFxuICAgKiBGVVRVUkU6IFRoaXMgd2lsbCBiZWNvbWUgY29uZmlndXJhYmxlIHZpYSB3aWRnZXQgc2V0dGluZ3MgdG8gYWxsb3dcbiAgICogYXV0aG9ycyB0byBjdXN0b21pemUgdGhlIHpvb20gbGV2ZWwgZm9yIHBvaW50IGZlYXR1cmVzLiBTZWUgVE9ETy5tZFxuICAgKiBzZWN0aW9uIFwiQ29uZmlndXJhYmxlIFBvaW50IFpvb20gQnVmZmVyXCIgZm9yIGltcGxlbWVudGF0aW9uIHBsYW4uXG4gICAqL1xuICB6ZXJvQXJlYUJ1ZmZlckZlZXQ/OiBudW1iZXJcbn1cblxuY29uc3QgREVGQVVMVF9QQURESU5HID0ge1xuICBsZWZ0OiA1MCxcbiAgcmlnaHQ6IDUwLFxuICB0b3A6IDUwLFxuICBib3R0b206IDUwXG59XG5cbi8qKiBcbiAqIERlZmF1bHQgYnVmZmVyIGZvciBzaW5nbGUgcG9pbnRzIG9yIG92ZXJsYXBwaW5nIHBvaW50cyAoaW4gZmVldCkuXG4gKiBUaGlzIGNyZWF0ZXMgYSA2MDBmdCB4IDYwMGZ0IGV4dGVudCBhcm91bmQgcG9pbnQgZmVhdHVyZXMuXG4gKiBcbiAqIFJBVElPTkFMRTogMzAwZnQgcmFkaXVzIHByb3ZpZGVzIGdvb2QgY29udGV4dCBmb3IgcGFyY2VscywgYWRkcmVzc2VzLFxuICogYW5kIHNpbWlsYXIgcG9pbnQgZmVhdHVyZXMgd2l0aG91dCB6b29taW5nIHRvbyBjbG9zZSBvciB0b28gZmFyLlxuICovXG5jb25zdCBERUZBVUxUX1pFUk9fQVJFQV9CVUZGRVJfRkVFVCA9IDMwMFxuXG4vKiogQ29udmVyc2lvbiBmYWN0b3I6IGZlZXQgdG8gbWV0ZXJzICovXG5jb25zdCBGRUVUX1RPX01FVEVSUyA9IDAuMzA0OFxuXG4vKipcbiAqIERldGVybWluZXMgaWYgdGhlIHNwYXRpYWwgcmVmZXJlbmNlIHVzZXMgbWV0ZXJzIChXZWIgTWVyY2F0b3Igb3Igb3RoZXIgbWV0cmljIHN5c3RlbXMpLlxuICogXG4gKiBUaGlzIGlzIGNyaXRpY2FsIGZvciBhcHBseWluZyB0aGUgY29ycmVjdCBidWZmZXIgZGlzdGFuY2UgdG8gemVyby1hcmVhIGV4dGVudHMuXG4gKiBEaWZmZXJlbnQgY29vcmRpbmF0ZSBzeXN0ZW1zIHVzZSBkaWZmZXJlbnQgdW5pdHM6XG4gKiAtIFdlYiBNZXJjYXRvciAoMzg1NywgMTAyMTAwKTogTWV0ZXJzXG4gKiAtIFdHUzg0IEdlb2dyYXBoaWMgKDQzMjYpOiBEZWdyZWVzICh0cmVhdGVkIGFzIG1ldHJpYyBmb3IgYnVmZmVyIGNhbGN1bGF0aW9uKVxuICogLSBTdGF0ZSBQbGFuZSB6b25lcyAoMjIyNS0yMjg0KTogRmVldFxuICogXG4gKiBAcGFyYW0gc3BhdGlhbFJlZmVyZW5jZSAtIFRoZSBzcGF0aWFsIHJlZmVyZW5jZSB0byBjaGVja1xuICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgc3BhdGlhbCByZWZlcmVuY2UgdXNlcyBtZXRlcnMsIGZhbHNlIGlmIGZlZXQtYmFzZWRcbiAqL1xuZnVuY3Rpb24gaXNNZXRyaWNTcGF0aWFsUmVmZXJlbmNlKHNwYXRpYWxSZWZlcmVuY2U6IF9fZXNyaS5TcGF0aWFsUmVmZXJlbmNlKTogYm9vbGVhbiB7XG4gIC8vIFdlYiBNZXJjYXRvciAobW9zdCBjb21tb24pOiAzODU3IG9yIDEwMjEwMFxuICBpZiAoc3BhdGlhbFJlZmVyZW5jZS53a2lkID09PSAzODU3IHx8IHNwYXRpYWxSZWZlcmVuY2Uud2tpZCA9PT0gMTAyMTAwKSB7XG4gICAgcmV0dXJuIHRydWVcbiAgfVxuICBcbiAgLy8gV0dTODQgR2VvZ3JhcGhpYyAoZGVncmVlcywgYnV0IHRyZWF0IGFzIG1ldHJpYyBmb3IgYnVmZmVyIGNhbGN1bGF0aW9uKVxuICBpZiAoc3BhdGlhbFJlZmVyZW5jZS53a2lkID09PSA0MzI2KSB7XG4gICAgcmV0dXJuIHRydWVcbiAgfVxuICBcbiAgLy8gRm9yIG90aGVyIHNwYXRpYWwgcmVmZXJlbmNlcywgY2hlY2sgdGhlIHVuaXQgcHJvcGVydHkgaWYgYXZhaWxhYmxlXG4gIC8vIE1vc3QgU3RhdGUgUGxhbmUgem9uZXMgdXNlIGZlZXQgKFdLSUQgMjIyNy0yMjg0LCAyMjg1LTIyODcsIGV0Yy4pXG4gIC8vIEJ1dCB0aGlzIGlzIGEgaGV1cmlzdGljIC0gaWRlYWxseSB3ZSdkIGNoZWNrIHRoZSBhY3R1YWwgdW5pdFxuICBjb25zdCB3a2lkID0gc3BhdGlhbFJlZmVyZW5jZS53a2lkXG4gIFxuICAvLyBDb21tb24gVVMgU3RhdGUgUGxhbmUgem9uZXMgaW4gZmVldCAocGFydGlhbCBsaXN0KVxuICAvLyBDYWxpZm9ybmlhIHpvbmVzOiAyMjI1LTIyMzUgKGZlZXQpLCAyMjI5IChmZWV0KVxuICAvLyBUaGlzIGlzIG5vdCBleGhhdXN0aXZlLCBidXQgY292ZXJzIGNvbW1vbiBjYXNlc1xuICBpZiAod2tpZCA+PSAyMjI1ICYmIHdraWQgPD0gMjI4NCkge1xuICAgIHJldHVybiBmYWxzZSAvLyBMaWtlbHkgZmVldC1iYXNlZCBTdGF0ZSBQbGFuZVxuICB9XG4gIFxuICAvLyBEZWZhdWx0IHRvIG1ldHJpYyBpZiB1bmNlcnRhaW5cbiAgcmV0dXJuIHRydWVcbn1cblxuLyoqXG4gKiBFeHBhbmRzIGEgemVyby1hcmVhIGV4dGVudCBieSBhIGJ1ZmZlciBkaXN0YW5jZS5cbiAqIENyZWF0ZXMgYSBuZXcgZXh0ZW50IHdpdGggdGhlIGNlbnRlciBwb2ludCBidWZmZXJlZCBieSB0aGUgc3BlY2lmaWVkIGRpc3RhbmNlLlxuICogXG4gKiBUaGlzIGhhbmRsZXMgdGhlIGNhc2Ugd2hlcmU6XG4gKiAtIEEgc2luZ2xlIHBvaW50IGZlYXR1cmUgaXMgc2VsZWN0ZWQgKGV4dGVudC53aWR0aCA9IDAsIGV4dGVudC5oZWlnaHQgPSAwKVxuICogLSBNdWx0aXBsZSBvdmVybGFwcGluZyBwb2ludHMgYXJlIHNlbGVjdGVkICh1bmlvbiBleHRlbnQgc3RpbGwgaGFzIHplcm8gYXJlYSlcbiAqIFxuICogV2l0aG91dCB0aGlzIGV4cGFuc2lvbiwgbWFwVmlldy5nb1RvKCkgd291bGQgem9vbSB0byBhbiB1bnVzYWJsZSBzY2FsZS5cbiAqIFxuICogQHBhcmFtIGV4dGVudCAtIFRoZSB6ZXJvLWFyZWEgZXh0ZW50IHRvIGV4cGFuZFxuICogQHBhcmFtIGJ1ZmZlckRpc3RhbmNlIC0gVGhlIGRpc3RhbmNlIHRvIGJ1ZmZlciBpbiB0aGUgc3BhdGlhbCByZWZlcmVuY2UncyB1bml0c1xuICogQHJldHVybnMgQSBuZXcgZXh0ZW50IGV4cGFuZGVkIGJ5IHRoZSBidWZmZXIgZGlzdGFuY2UgaW4gYWxsIGRpcmVjdGlvbnNcbiAqL1xuZnVuY3Rpb24gZXhwYW5kWmVyb0FyZWFFeHRlbnQoZXh0ZW50OiBfX2VzcmkuRXh0ZW50LCBidWZmZXJEaXN0YW5jZTogbnVtYmVyKTogX19lc3JpLkV4dGVudCB7XG4gIGNvbnN0IGNlbnRlclggPSAoZXh0ZW50LnhtaW4gKyBleHRlbnQueG1heCkgLyAyXG4gIGNvbnN0IGNlbnRlclkgPSAoZXh0ZW50LnltaW4gKyBleHRlbnQueW1heCkgLyAyXG4gIFxuICByZXR1cm4gZXh0ZW50LmNsb25lKCkuc2V0KHtcbiAgICB4bWluOiBjZW50ZXJYIC0gYnVmZmVyRGlzdGFuY2UsXG4gICAgeG1heDogY2VudGVyWCArIGJ1ZmZlckRpc3RhbmNlLFxuICAgIHltaW46IGNlbnRlclkgLSBidWZmZXJEaXN0YW5jZSxcbiAgICB5bWF4OiBjZW50ZXJZICsgYnVmZmVyRGlzdGFuY2VcbiAgfSlcbn1cblxuLyoqXG4gKiBQdXJlIGZ1bmN0aW9uIHRvIHpvb20gdG8gZmVhdHVyZSByZWNvcmRzIHdpdGggcGFkZGluZy5cbiAqIFxuICogRXh0cmFjdHMgZ2VvbWV0cmllcyBmcm9tIHJlY29yZHMsIGNhbGN1bGF0ZXMgZXh0ZW50LCBhbmQgem9vbXMgdGhlIG1hcCB2aWV3XG4gKiB1c2luZyBtYXBWaWV3LmdvVG8oKSB3aXRoIGNvbmZpZ3VyYWJsZSBwYWRkaW5nLiBIYW5kbGVzIGJvdGggc2luZ2xlIGFuZFxuICogbXVsdGlwbGUgZ2VvbWV0cmllcyBieSBjYWxjdWxhdGluZyB1bmlvbiBleHRlbnQgd2hlbiBuZWVkZWQuXG4gKiBcbiAqIFpFUk8tQVJFQSBFWFRFTlQgSEFORExJTkcgKHIwMTkuMjMpOlxuICogV2hlbiB6b29taW5nIHRvIHNpbmdsZSBwb2ludHMgb3Igb3ZlcmxhcHBpbmcgcG9pbnRzLCB0aGUgY2FsY3VsYXRlZCBleHRlbnRcbiAqIHdpbGwgaGF2ZSB6ZXJvIHdpZHRoL2hlaWdodC4gVGhpcyBmdW5jdGlvbiBkZXRlY3RzIHRoaXMgY29uZGl0aW9uIGFuZFxuICogZXhwYW5kcyB0aGUgZXh0ZW50IGJ5IDMwMCBmZWV0IChkZWZhdWx0KSBpbiBhbGwgZGlyZWN0aW9ucyB0byBwcm92aWRlXG4gKiB1c2VmdWwgY29udGV4dC4gVGhlIGJ1ZmZlciBkaXN0YW5jZSBpcyBhdXRvbWF0aWNhbGx5IGNvbnZlcnRlZCB0byB0aGVcbiAqIGNvcnJlY3QgdW5pdHMgYmFzZWQgb24gdGhlIG1hcCdzIHNwYXRpYWwgcmVmZXJlbmNlOlxuICogLSBXZWIgTWVyY2F0b3IgKDM4NTcvMTAyMTAwKTogQ29udmVydHMgMzAwIGZlZXQg4oaSIH45MS40NCBtZXRlcnNcbiAqIC0gU3RhdGUgUGxhbmUgKGZlZXQtYmFzZWQpOiBVc2VzIDMwMCBmZWV0IGRpcmVjdGx5XG4gKiBcbiAqIFRoaXMgYXBwcm9hY2ggbWFpbnRhaW5zIHRoZSBleHRlbnQtYmFzZWQgem9vbSBzdHJhdGVneSwgZW5zdXJpbmcgdGhlXG4gKiBwYWRkaW5nIGZyb20gWm9vbVRvUmVjb3Jkc09wdGlvbnMgaXMgc3RpbGwgcmVzcGVjdGVkIGR1cmluZyBtYXBWaWV3LmdvVG8oKS5cbiAqIFxuICogQHBhcmFtIG1hcFZpZXcgLSBUaGUgbWFwIHZpZXcgdG8gem9vbVxuICogQHBhcmFtIHJlY29yZHMgLSBBcnJheSBvZiBmZWF0dXJlIGRhdGEgcmVjb3JkcyB0byB6b29tIHRvXG4gKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbmFsIHpvb20gb3B0aW9ucyBpbmNsdWRpbmcgcGFkZGluZyBhbmQgemVyby1hcmVhIGJ1ZmZlclxuICogQHJldHVybnMgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gem9vbSBjb21wbGV0ZXNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHpvb21Ub1JlY29yZHMoXG4gIG1hcFZpZXc6IF9fZXNyaS5NYXBWaWV3IHwgX19lc3JpLlNjZW5lVmlldyxcbiAgcmVjb3JkczogRmVhdHVyZURhdGFSZWNvcmRbXSxcbiAgb3B0aW9ucz86IFpvb21Ub1JlY29yZHNPcHRpb25zXG4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgaWYgKCFtYXBWaWV3IHx8ICFyZWNvcmRzIHx8IHJlY29yZHMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICBjb25zdCBwYWRkaW5nID0gb3B0aW9ucz8ucGFkZGluZyB8fCBERUZBVUxUX1BBRERJTkdcbiAgY29uc3QgemVyb0FyZWFCdWZmZXJGZWV0ID0gb3B0aW9ucz8uemVyb0FyZWFCdWZmZXJGZWV0IHx8IERFRkFVTFRfWkVST19BUkVBX0JVRkZFUl9GRUVUXG5cbiAgdHJ5IHtcbiAgICAvLyBFeHRyYWN0IGdlb21ldHJpZXMgZnJvbSByZWNvcmRzXG4gICAgY29uc3QgZ2VvbWV0cmllcyA9IHJlY29yZHNcbiAgICAgIC5tYXAocmVjb3JkID0+IHJlY29yZC5nZXRKU0FQSUdlb21ldHJ5KCkpXG4gICAgICAuZmlsdGVyKGdlb20gPT4gZ2VvbSAhPSBudWxsKVxuICAgIFxuICAgIGlmIChnZW9tZXRyaWVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgbGV0IGV4dGVudDogX19lc3JpLkV4dGVudCB8IG51bGwgPSBudWxsXG4gICAgXG4gICAgaWYgKGdlb21ldHJpZXMubGVuZ3RoID09PSAxKSB7XG4gICAgICAvLyBTaW5nbGUgZ2VvbWV0cnkgLSBnZXQgaXRzIGV4dGVudFxuICAgICAgLy8gTm90ZTogUG9pbnQgZ2VvbWV0cmllcyB3aWxsIGhhdmUgemVyby1hcmVhIGV4dGVudHMgKHdpZHRoPTAsIGhlaWdodD0wKVxuICAgICAgLy8gd2hpY2ggd2lsbCBiZSBleHBhbmRlZCBieSB0aGUgemVyby1hcmVhIGRldGVjdGlvbiBsb2dpYyBiZWxvd1xuICAgICAgZXh0ZW50ID0gZ2VvbWV0cmllc1swXS5leHRlbnQgfHwgKGdlb21ldHJpZXNbMF0gYXMgYW55KS5nZXRFeHRlbnQ/LigpXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIE11bHRpcGxlIGdlb21ldHJpZXMgLSBjYWxjdWxhdGUgdW5pb24gZXh0ZW50XG4gICAgICAvLyBOb3RlOiBPdmVybGFwcGluZyBwb2ludHMgd2lsbCBwcm9kdWNlIGEgemVyby1hcmVhIGV4dGVudFxuICAgICAgLy8gd2hpY2ggd2lsbCBiZSBleHBhbmRlZCBieSB0aGUgemVyby1hcmVhIGRldGVjdGlvbiBsb2dpYyBiZWxvd1xuICAgICAgY29uc3QgZXh0ZW50cyA9IGdlb21ldHJpZXNcbiAgICAgICAgLm1hcChnZW9tID0+IGdlb20uZXh0ZW50IHx8IChnZW9tIGFzIGFueSkuZ2V0RXh0ZW50Py4oKSlcbiAgICAgICAgLmZpbHRlcihlID0+IGUgIT0gbnVsbClcbiAgICAgIFxuICAgICAgaWYgKGV4dGVudHMubGVuZ3RoID4gMCkge1xuICAgICAgICBleHRlbnQgPSBleHRlbnRzWzBdLmNsb25lKClcbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBleHRlbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgZXh0ZW50ID0gZXh0ZW50LnVuaW9uKGV4dGVudHNbaV0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgaWYgKGV4dGVudCkge1xuICAgICAgLy8gQ2hlY2sgZm9yIHplcm8tYXJlYSBleHRlbnQgKHNpbmdsZSBwb2ludCBvciBvdmVybGFwcGluZyBwb2ludHMpXG4gICAgICAvLyBUaGlzIGNvbmRpdGlvbiB0cmlnZ2VycyB3aGVuIGV4dGVudC53aWR0aCA9PT0gMCBPUiBleHRlbnQuaGVpZ2h0ID09PSAwXG4gICAgICBjb25zdCBpc1plcm9BcmVhID0gZXh0ZW50LndpZHRoID09PSAwIHx8IGV4dGVudC5oZWlnaHQgPT09IDBcbiAgICAgIFxuICAgICAgaWYgKGlzWmVyb0FyZWEpIHtcbiAgICAgICAgLy8gRGV0ZXJtaW5lIGJ1ZmZlciBkaXN0YW5jZSBiYXNlZCBvbiBzcGF0aWFsIHJlZmVyZW5jZVxuICAgICAgICAvLyBXZWIgTWVyY2F0b3IgdXNlcyBtZXRlcnMsIFN0YXRlIFBsYW5lIHR5cGljYWxseSB1c2VzIGZlZXRcbiAgICAgICAgY29uc3QgaXNNZXRyaWMgPSBpc01ldHJpY1NwYXRpYWxSZWZlcmVuY2UobWFwVmlldy5zcGF0aWFsUmVmZXJlbmNlKVxuICAgICAgICBjb25zdCBidWZmZXJEaXN0YW5jZSA9IGlzTWV0cmljIFxuICAgICAgICAgID8gemVyb0FyZWFCdWZmZXJGZWV0ICogRkVFVF9UT19NRVRFUlMgIC8vIENvbnZlcnQgZmVldCB0byBtZXRlcnMgKH45MS40NG0gZm9yIDMwMGZ0KVxuICAgICAgICAgIDogemVyb0FyZWFCdWZmZXJGZWV0ICAgICAgICAgICAgICAgICAgICAvLyBVc2UgZmVldCBkaXJlY3RseVxuICAgICAgICBcbiAgICAgICAgLy8gRXhwYW5kIHRoZSBleHRlbnQgYnkgdGhlIGJ1ZmZlciBkaXN0YW5jZSBpbiBhbGwgZGlyZWN0aW9uc1xuICAgICAgICAvLyBUaGlzIGNyZWF0ZXMgYSBzcXVhcmUgZXh0ZW50IGNlbnRlcmVkIG9uIHRoZSBwb2ludChzKVxuICAgICAgICBleHRlbnQgPSBleHBhbmRaZXJvQXJlYUV4dGVudChleHRlbnQsIGJ1ZmZlckRpc3RhbmNlKVxuICAgICAgICBcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdaT09NJywge1xuICAgICAgICAgIGV2ZW50OiAnemVyby1hcmVhLWV4dGVudC1leHBhbmRlZCcsXG4gICAgICAgICAgcmVjb3Jkc0NvdW50OiByZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgICBidWZmZXJGZWV0OiB6ZXJvQXJlYUJ1ZmZlckZlZXQsXG4gICAgICAgICAgYnVmZmVyRGlzdGFuY2U6IGJ1ZmZlckRpc3RhbmNlLFxuICAgICAgICAgIHNwYXRpYWxSZWZlcmVuY2VXa2lkOiBtYXBWaWV3LnNwYXRpYWxSZWZlcmVuY2Uud2tpZCxcbiAgICAgICAgICBpc01ldHJpYzogaXNNZXRyaWMsXG4gICAgICAgICAgZXhwYW5kZWRFeHRlbnQ6IHtcbiAgICAgICAgICAgIHhtaW46IGV4dGVudC54bWluLFxuICAgICAgICAgICAgeG1heDogZXh0ZW50LnhtYXgsXG4gICAgICAgICAgICB5bWluOiBleHRlbnQueW1pbixcbiAgICAgICAgICAgIHltYXg6IGV4dGVudC55bWF4LFxuICAgICAgICAgICAgd2lkdGg6IGV4dGVudC53aWR0aCxcbiAgICAgICAgICAgIGhlaWdodDogZXh0ZW50LmhlaWdodFxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gWm9vbSB0byB0aGUgZXh0ZW50IHdpdGggcGFkZGluZ1xuICAgICAgLy8gVGhlIHBhZGRpbmcgZnJvbSBvcHRpb25zIGlzIGFwcGxpZWQgaGVyZSwgaW4gYWRkaXRpb24gdG8gYW55IHplcm8tYXJlYSBleHBhbnNpb25cbiAgICAgIGF3YWl0IG1hcFZpZXcuZ29UbyhleHRlbnQsIHsgcGFkZGluZyB9KVxuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1pPT00nLCB7XG4gICAgICBldmVudDogJ3pvb20tZ29Uby1lcnJvcicsXG4gICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpLFxuICAgICAgcmVjb3Jkc0NvdW50OiByZWNvcmRzLmxlbmd0aFxuICAgIH0pXG4gICAgdGhyb3cgZXJyb3JcbiAgfVxufVxuXG5cblxuXG5cbiIsImltcG9ydCB7IEJhc2VWZXJzaW9uTWFuYWdlciB9IGZyb20gJ2ppbXUtY29yZSdcblxuY2xhc3MgVmVyc2lvbk1hbmFnZXIgZXh0ZW5kcyBCYXNlVmVyc2lvbk1hbmFnZXIge1xuICB2ZXJzaW9ucyA9IFt7XG4gICAgdmVyc2lvbjogJzEuMC4wJyxcbiAgICBkZXNjcmlwdGlvbjogJ1RoZSBmaXJzdCB2ZXJzaW9uLicsXG4gICAgdXBncmFkZXI6IChvbGRDb25maWcpID0+IHtcbiAgICAgIHJldHVybiBvbGRDb25maWdcbiAgICB9XG4gIH1dXG59XG5cbmV4cG9ydCBjb25zdCB2ZXJzaW9uTWFuYWdlciA9IG5ldyBWZXJzaW9uTWFuYWdlcigpXG5cblxuXG4iLCIvKipcbiAqIFdpZGdldCB2ZXJzaW9uIG51bWJlci5cbiAqIEJhc2UgdmVyc2lvbiBtYXRjaGVzIEV4cGVyaWVuY2UgQnVpbGRlciB2ZXJzaW9uICgxLjE5LjApLlxuICogUmVsZWFzZSBudW1iZXIgaW5jcmVtZW50cyBvbiBtYWpvciBjaGFuZ2VzICgwMDEsIDAwMiwgMDAzLCAuLi4pLlxuICogTWlub3IgdmVyc2lvbiBpbmNyZW1lbnRzIG9uIHNtYWxsZXIgZml4ZXMgYmV0d2VlbiBtYWpvciByZWxlYXNlcyAocjAxNS4xLCByMDE1LjIsIC4uLikuXG4gKiBcbiAqIFRvIGluY3JlbWVudDpcbiAqIC0gTWFqb3IgY2hhbmdlOiBVcGRhdGUgUkVMRUFTRV9OVU1CRVIgKGUuZy4sIDAxNSAtPiAwMTYpIGFuZCByZXNldCBNSU5PUl9WRVJTSU9OIHRvIDBcbiAqIC0gTWlub3IgZml4OiBJbmNyZW1lbnQgTUlOT1JfVkVSU0lPTiAoZS5nLiwgMSAtPiAyKSB3aGlsZSBrZWVwaW5nIHNhbWUgUkVMRUFTRV9OVU1CRVJcbiAqL1xuY29uc3QgQkFTRV9WRVJTSU9OID0gJzEuMTkuMCdcbmNvbnN0IFJFTEVBU0VfTlVNQkVSID0gJzAxOScgLy8gSW5jcmVtZW50IG9uIG1ham9yIGNoYW5nZXMgKDAwMSwgMDAyLCAwMDMsIC4uLilcbmNvbnN0IE1JTk9SX1ZFUlNJT04gPSAnMjMnIC8vIEluY3JlbWVudCBvbiBtaW5vciBmaXhlcyBiZXR3ZWVuIG1ham9yIHJlbGVhc2VzICgxLCAyLCAzLCAuLi4pXG5cbmV4cG9ydCBjb25zdCBXSURHRVRfVkVSU0lPTiA9IE1JTk9SX1ZFUlNJT04gJiYgTnVtYmVyKE1JTk9SX1ZFUlNJT04pID4gMFxuICA/IGAke0JBU0VfVkVSU0lPTn0tciR7UkVMRUFTRV9OVU1CRVJ9LiR7TUlOT1JfVkVSU0lPTn1gXG4gIDogYCR7QkFTRV9WRVJTSU9OfS1yJHtSRUxFQVNFX05VTUJFUn1gXG5cbiIsIi8qKlxuICogU2hhcmVkIGNvbW1vbiB1dGlsaXRpZXMgYW5kIGNvbXBvbmVudHMgZm9yIEV4cGVyaWVuY2UgQnVpbGRlciB3aWRnZXRzXG4gKiBcbiAqIFRoaXMgbW9kdWxlIGV4cG9ydHMgY29tbW9uIGZ1bmN0aW9uYWxpdHkgdGhhdCBjYW4gYmUgc2hhcmVkIGJldHdlZW5cbiAqIHF1ZXJ5LXNpbXBsZSwgaGVscGVyLXNpbXBsZSwgYW5kIG90aGVyIGN1c3RvbSB3aWRnZXRzLlxuICogXG4gKiBUaGlzIGlzIHRoZSBlbnRyeSBwb2ludCBmb3IgJ3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uJ1xuICovXG5cbmV4cG9ydCAqIGZyb20gJy4vY29tbW9uL2NvbW1vbi1jb21wb25lbnRzJ1xuZXhwb3J0ICogZnJvbSAnLi9jb21tb24vdXRpbHMnXG5leHBvcnQgKiBmcm9tICcuL2NvbW1vbi91c2UtZHMtZXhpc3RzJ1xuZXhwb3J0ICogZnJvbSAnLi9jb21tb24vZGF0YS1zb3VyY2UtdGlwJ1xuZXhwb3J0ICogZnJvbSAnLi9jb21tb24vZGVidWctbG9nZ2VyJ1xuXG5cblxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQgeyBSZWFjdCwganN4LCBjc3MgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBCdXR0b24sIE1vZGFsLCBNb2RhbEJvZHksIE1vZGFsRm9vdGVyLCBQYW5lbEhlYWRlciwgSWNvbiwgdHlwZSBUaGVtZVByb3BzIH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB7IHdpdGhUaGVtZSB9IGZyb20gJ2ppbXUtdGhlbWUnXG5pbXBvcnQgaWNvbkVycm9yIGZyb20gJ2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL3N1Z2dlc3RlZC9lcnJvci5zdmcnXG5jb25zdCB7IHVzZVN0YXRlIH0gPSBSZWFjdFxuXG4vKipcbiAqIEEgc2ltcGxlIEZ1bmN0aW9uYWwgQ29tcG9uZW50IHN0b3Jpbmcgc29tZSBTdGF0ZXMgdGhhdCBhcmUgY29tbW9ubHkgdXNlZFxuICovXG5leHBvcnQgY29uc3QgU3RhdGVIb2xkZXIgPSAocHJvcHMpID0+IHtcbiAgY29uc3QgeyBpbml0U3RhdGUgPSB7fSwgY2hpbGRyZW4gfSA9IHByb3BzXG4gIGNvbnN0IGRlZmF1bHRTdGF0ZU1hcCA9IHtcbiAgICB2aXNpYmxlOiB0cnVlLFxuICAgIHJlZkNvbnRhaW5lcjogbnVsbFxuICB9XG4gIGNvbnN0IHVzZVN0YXRlTWFwID0ge1xuICAgIHZpc2libGU6IHVzZVN0YXRlKCd2aXNpYmxlJyBpbiBpbml0U3RhdGUgPyBpbml0U3RhdGUudmlzaWJsZSA6IGRlZmF1bHRTdGF0ZU1hcC52aXNpYmxlKSxcbiAgICByZWZDb250YWluZXI6IHVzZVN0YXRlKCdyZWZDb250YWluZXInIGluIGluaXRTdGF0ZSA/IGluaXRTdGF0ZS5yZWZDb250YWluZXIgOiBkZWZhdWx0U3RhdGVNYXAucmVmQ29udGFpbmVyKSxcbiAgICBjdXN0b21EYXRhOiB1c2VTdGF0ZSh7IC4uLmluaXRTdGF0ZS5jdXN0b21EYXRhIH0pXG4gIH1cbiAgcmV0dXJuIDxSZWFjdC5GcmFnbWVudD57Y2hpbGRyZW4odXNlU3RhdGVNYXApfTwvUmVhY3QuRnJhZ21lbnQ+XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRGlhbG9nUGFuZWxQcm9wcyB7XG4gIHBhbmVsVmlzaWJsZTogYm9vbGVhblxuICBzZXRQYW5lbFZpc2libGU6ICh2aXNpYmxlOiBib29sZWFuKSA9PiB2b2lkXG4gIGdldEkxOG5NZXNzYWdlOiAoaWQ6IHN0cmluZykgPT4gYW55XG4gIGlzTW9kYWw/OiBib29sZWFuXG4gIHRpdGxlPzogYW55XG4gIGJvZHlDb250ZW50PzogYW55XG4gIGhhc0hlYWRlcj86IGJvb2xlYW5cbiAgaGFzRm9vdGVyPzogYm9vbGVhblxufVxuXG4vKipcbiAqIEEgZGlhbG9nIHBvcHVwXG4gKi9cbmV4cG9ydCBjb25zdCBEaWFsb2dQYW5lbCA9IHdpdGhUaGVtZSgocHJvcHM6IERpYWxvZ1BhbmVsUHJvcHMgJiBUaGVtZVByb3BzKSA9PiB7XG4gIGNvbnN0IHsgdGhlbWUsIHBhbmVsVmlzaWJsZSwgc2V0UGFuZWxWaXNpYmxlLCBnZXRJMThuTWVzc2FnZSwgaXNNb2RhbCA9IHRydWUsIHRpdGxlID0gZ2V0STE4bk1lc3NhZ2UoJ3F1ZXJ5TWVzc2FnZScpLCBib2R5Q29udGVudCA9ICcnLCBoYXNIZWFkZXIgPSB0cnVlLCBoYXNGb290ZXIgPSB0cnVlIH0gPSBwcm9wc1xuICBjb25zdCB0b2dnbGUgPSAoKSA9PiB7IHNldFBhbmVsVmlzaWJsZShmYWxzZSkgfVxuICBjb25zdCBnZXRDb250ZW50ID0gKCkgPT4gPFJlYWN0LkZyYWdtZW50PlxuICAgIHtcbiAgICAgIGhhc0hlYWRlciAmJlxuICAgICAgICA8UGFuZWxIZWFkZXIgY2xhc3NOYW1lPSdweS0yJyB0aXRsZT17dGl0bGV9IG9uQ2xvc2U9e3RvZ2dsZX0gLz5cbiAgICB9XG4gICAgPE1vZGFsQm9keT57Ym9keUNvbnRlbnR9PC9Nb2RhbEJvZHk+XG4gICAge1xuICAgICAgaGFzRm9vdGVyICYmXG4gICAgICAgIDxNb2RhbEZvb3Rlcj5cbiAgICAgICAgICA8QnV0dG9uIG9uQ2xpY2s9e3RvZ2dsZX0+e2dldEkxOG5NZXNzYWdlKCdvaycpfTwvQnV0dG9uPlxuICAgICAgICA8L01vZGFsRm9vdGVyPlxuICAgIH1cbiAgPC9SZWFjdC5GcmFnbWVudD5cbiAgY29uc3QgZ2VuZXJhbENsYXNzTmFtZSA9ICd1aS11bml0LWRpYWxvZy1wYW5lbCdcbiAgY29uc3QgcmVuZGVyTW9kYWxDb250ZW50ID0gKCkgPT4ge1xuICAgIHJldHVybiAoXG4gICAgICA8TW9kYWwgY2xhc3NOYW1lPXtnZW5lcmFsQ2xhc3NOYW1lfSBpc09wZW49e3BhbmVsVmlzaWJsZX0gdG9nZ2xlPXt0b2dnbGV9IGJhY2tkcm9wPSdzdGF0aWMnPlxuICAgICAgICB7Z2V0Q29udGVudCgpfVxuICAgICAgPC9Nb2RhbD5cbiAgICApXG4gIH1cbiAgY29uc3QgcmVuZGVyTm9uTW9kYWxDb250ZW50ID0gKCkgPT4ge1xuICAgIGNvbnN0IGdldFN0eWxlID0gKCkgPT4gY3NzYFxuICAgICAgJi51aS11bml0LWRpYWxvZy1wYW5lbC5tb2RhbC1kaWFsb2cge1xuICAgICAgICBtYXJnaW46IDA7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAubW9kYWwtY29udGVudCB7XG4gICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHt0aGVtZS5yZWYucGFsZXR0ZS5uZXV0cmFsWzYwMF19O1xuICAgICAgICAgIGNvbG9yOiAke3RoZW1lLnJlZi5wYWxldHRlLmJsYWNrfTtcbiAgICAgICAgICBmb250LXNpemU6IC43NXJlbTtcbiAgICAgICAgICBmb250LXdlaWdodDogNDAwO1xuICAgICAgICAgIGJvcmRlcjogbm9uZTtcbiAgICAgICAgICAucGFuZWwtaGVhZGVyIHtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogLjgxMjVyZW07XG4gICAgICAgICAgICBwYWRkaW5nOiAuNjI1cmVtO1xuICAgICAgICAgIH1cbiAgICAgICAgICAubW9kYWwtYm9keSB7XG4gICAgICAgICAgICBwYWRkaW5nOiAwIC42MjVyZW0gLjc1cmVtO1xuICAgICAgICAgICAgd2hpdGUtc3BhY2U6IG5vcm1hbDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICBgXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPXtgJHtnZW5lcmFsQ2xhc3NOYW1lfSBtb2RhbC1kaWFsb2cgJHtwYW5lbFZpc2libGUgPyAnJyA6ICdjb2xsYXBzZSd9YH0gY3NzPXtnZXRTdHlsZSgpfT5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J21vZGFsLWNvbnRlbnQnPlxuICAgICAgICAgIHtnZXRDb250ZW50KCl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgKVxuICB9XG4gIHJldHVybiBpc01vZGFsID8gcmVuZGVyTW9kYWxDb250ZW50KCkgOiByZW5kZXJOb25Nb2RhbENvbnRlbnQoKVxufSlcblxuZXhwb3J0IGVudW0gRW50aXR5U3RhdHVzVHlwZSB7XG4gIE5vbmUgPSAnJyxcbiAgSW5pdCA9ICdpbml0JyxcbiAgTG9hZGluZyA9ICdsb2FkaW5nJyxcbiAgTG9hZGVkID0gJ2xvYWRlZCcsXG4gIFdhcm5pbmcgPSAnd2FybmluZycsXG4gIEVycm9yID0gJ2Vycm9yJyxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTdGF0dXNJbmRpY2F0b3JQcm9wcyB7XG4gIGNsYXNzTmFtZT86IHN0cmluZ1xuICBzdGF0dXNUeXBlPzogRW50aXR5U3RhdHVzVHlwZVxuICB0aXRsZT86IHN0cmluZ1xufVxuXG4vKipcbiAqIEFuIGFuaW1hdGFibGUgaWNvbiByZXByZXNlbnRpbmcgc3RhdHVzXG4gKi9cbmV4cG9ydCBjb25zdCBTdGF0dXNJbmRpY2F0b3IgPSB3aXRoVGhlbWUoKHByb3BzOiBTdGF0dXNJbmRpY2F0b3JQcm9wcyAmIFRoZW1lUHJvcHMpID0+IHtcbiAgY29uc3QgeyB0aGVtZSwgY2xhc3NOYW1lLCB0aXRsZSwgc3RhdHVzVHlwZSB9ID0gcHJvcHNcbiAgY29uc3QgZ2V0U3R5bGUgPSAoKSA9PiBjc3NgXG4gICAgJi51aS11bml0LXN0YXR1cy1pbmRpY2F0b3Ige1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICYudWktdW5pdC1zdGF0dXMtaW5kaWNhdG9yX3N0YXR1cy10eXBlLWxvYWRpbmcge1xuICAgICAgICAmOmJlZm9yZSB7XG4gICAgICAgICAgQGtleWZyYW1lcyBsb2FkaW5nIHtcbiAgICAgICAgICAgIDAlIHt0cmFuc2Zvcm06IHJvdGF0ZSgwZGVnKTsgfTtcbiAgICAgICAgICAgIDEwMCUge3RyYW5zZm9ybTogcm90YXRlKDM2MGRlZyl9O1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb250ZW50OiAnJztcbiAgICAgICAgICB3aWR0aDogMXJlbTtcbiAgICAgICAgICBoZWlnaHQ6IDFyZW07XG4gICAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgJHt0aGVtZT8ucmVmLnBhbGV0dGU/Lm5ldXRyYWw/Lls1MDBdfTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7XG4gICAgICAgICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkICR7dGhlbWU/LnN5cy5jb2xvcj8ucHJpbWFyeT8ubWFpbn07XG4gICAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgICAgICAgICBhbmltYXRpb246IGxvYWRpbmcgMnMgaW5maW5pdGUgbGluZWFyO1xuICAgICAgICAgIG1hcmdpbi1yaWdodDogLjI1cmVtO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICBgXG4gIHJldHVybiAoXG4gICAgc3RhdHVzVHlwZSAmJlxuICAgICAgPGRpdiBjbGFzc05hbWU9e2Ake2NsYXNzTmFtZSA/PyAnJ30gdWktdW5pdC1zdGF0dXMtaW5kaWNhdG9yIHVpLXVuaXQtc3RhdHVzLWluZGljYXRvcl9zdGF0dXMtdHlwZS0ke3N0YXR1c1R5cGV9YH0gdGl0bGU9e3RpdGxlfSBjc3M9e2dldFN0eWxlKCl9IC8+XG4gIClcbn0pXG5cbmV4cG9ydCBpbnRlcmZhY2UgRXJyb3JNZXNzYWdlUHJvcHMge1xuICBlcnJvcjogc3RyaW5nIHwgbnVsbFxuICBjbGFzc05hbWU/OiBzdHJpbmdcbiAgb25EaXNtaXNzPzogKCkgPT4gdm9pZFxufVxuXG4vKipcbiAqIFNpbXBsZSBlcnJvciBtZXNzYWdlIGNvbXBvbmVudCBmb3IgZGlzcGxheWluZyB1c2VyLWZhY2luZyBlcnJvcnMuXG4gKiBVc2UgRGF0YVNvdXJjZVRpcCBmb3IgZGF0YSBzb3VyY2UtcmVsYXRlZCBlcnJvcnMuXG4gKi9cbmV4cG9ydCBjb25zdCBFcnJvck1lc3NhZ2UgPSAocHJvcHM6IEVycm9yTWVzc2FnZVByb3BzKSA9PiB7XG4gIGNvbnN0IHsgZXJyb3IsIGNsYXNzTmFtZSA9ICcnLCBvbkRpc21pc3MgfSA9IHByb3BzXG4gIFxuICBpZiAoIWVycm9yKSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuICBcbiAgY29uc3QgZXJyb3JTdHlsZSA9IGNzc2BcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgcGFkZGluZzogMC41cmVtO1xuICAgIG1hcmdpbjogMC41cmVtIDA7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tc3lzLWNvbG9yLWVycm9yLWxpZ2h0KTtcbiAgICBjb2xvcjogdmFyKC0tc3lzLWNvbG9yLWVycm9yLWRhcmspO1xuICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICBmb250LXNpemU6IDAuODc1cmVtO1xuICAgIGdhcDogMC41cmVtO1xuICAgIFxuICAgIC5lcnJvci1pY29uIHtcbiAgICAgIGZsZXgtc2hyaW5rOiAwO1xuICAgIH1cbiAgICBcbiAgICAuZXJyb3ItdGV4dCB7XG4gICAgICBmbGV4OiAxO1xuICAgIH1cbiAgICBcbiAgICAuZXJyb3ItZGlzbWlzcyB7XG4gICAgICBmbGV4LXNocmluazogMDtcbiAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgIHBhZGRpbmc6IDAuMjVyZW07XG4gICAgICAmOmhvdmVyIHtcbiAgICAgICAgb3BhY2l0eTogMC43O1xuICAgICAgfVxuICAgIH1cbiAgYFxuICBcbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT17YGVycm9yLW1lc3NhZ2UgJHtjbGFzc05hbWV9YH0gY3NzPXtlcnJvclN0eWxlfSByb2xlPVwiYWxlcnRcIj5cbiAgICAgIDxJY29uIGljb249e2ljb25FcnJvcn0gY2xhc3NOYW1lPVwiZXJyb3ItaWNvblwiIHNpemU9XCJzbVwiIC8+XG4gICAgICA8c3BhbiBjbGFzc05hbWU9XCJlcnJvci10ZXh0XCI+e2Vycm9yfTwvc3Bhbj5cbiAgICAgIHtvbkRpc21pc3MgJiYgKFxuICAgICAgICA8QnV0dG9uIFxuICAgICAgICAgIHNpemU9XCJzbVwiIFxuICAgICAgICAgIHR5cGU9XCJ0ZXJ0aWFyeVwiIFxuICAgICAgICAgIGljb24gXG4gICAgICAgICAgb25DbGljaz17b25EaXNtaXNzfVxuICAgICAgICAgIGNsYXNzTmFtZT1cImVycm9yLWRpc21pc3NcIlxuICAgICAgICAgIGFyaWEtbGFiZWw9XCJEaXNtaXNzIGVycm9yXCJcbiAgICAgICAgPlxuICAgICAgICAgIDxJY29uIGljb249e3JlcXVpcmUoJ2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2VkaXRvci9jbG9zZS5zdmcnKS5kZWZhdWx0fSBzaXplPVwic21cIiAvPlxuICAgICAgICA8L0J1dHRvbj5cbiAgICAgICl9XG4gICAgPC9kaXY+XG4gIClcbn1cblxuXG5cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHtcbiAgUmVhY3QsXG4gIGpzeCxcbiAgZ2V0QXBwU3RvcmUsXG4gIERhdGFTb3VyY2VDb21wb25lbnQsXG4gIHR5cGUgRGF0YVNvdXJjZSxcbiAgdHlwZSBVc2VEYXRhU291cmNlLFxuICBhcHBDb25maWdVdGlscyxcbiAgdHlwZSBJTURhdGFTb3VyY2VJbmZvLFxuICBEYXRhU291cmNlU3RhdHVzLFxuICB0eXBlIEltbXV0YWJsZU9iamVjdCxcbiAgaG9va3Ncbn0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgSWNvbiwgVG9vbHRpcCwgQnV0dG9uLCBkZWZhdWx0TWVzc2FnZXMgfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHsgRW50aXR5U3RhdHVzVHlwZSwgU3RhdHVzSW5kaWNhdG9yIH0gZnJvbSAnLi9jb21tb24tY29tcG9uZW50cydcbmltcG9ydCBpY29uV2FybmluZyBmcm9tICdqaW11LWljb25zL3N2Zy9vdXRsaW5lZC9zdWdnZXN0ZWQvd2FybmluZy5zdmcnXG5pbXBvcnQgaWNvbkVycm9yIGZyb20gJ2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL3N1Z2dlc3RlZC9lcnJvci5zdmcnXG5pbXBvcnQgeyB1c2VEYXRhU291cmNlRXhpc3RzIH0gZnJvbSAnLi91c2UtZHMtZXhpc3RzJ1xuXG5pbnRlcmZhY2UgQ29udGVudFByb3BzIHtcbiAgd2lkZ2V0SWQ6IHN0cmluZ1xuICB1c2VEYXRhU291cmNlOiBJbW11dGFibGVPYmplY3Q8VXNlRGF0YVNvdXJjZT5cbiAgb25TdGF0dXNDaGFuZ2U/OiAoZW5hYmxlZDogYm9vbGVhbikgPT4gdm9pZFxuICBvbkRhdGFTb3VyY2VDcmVhdGVkPzogKGRzOiBEYXRhU291cmNlKSA9PiB2b2lkXG4gIHNob3dNZXNzYWdlPzogYm9vbGVhblxufVxuXG4vKipcbiAqIFNob3cgaWNvbiBhbmQgbWVzc2FnZSBpZiB0aGUgZGF0YSBzb3VyY2UgZG9lc24ndCB3b3JrLlxuICogQHBhcmFtIHByb3BzXG4gKiBAcmV0dXJuc1xuICovXG5leHBvcnQgZnVuY3Rpb24gRGF0YVNvdXJjZVRpcCAocHJvcHM6IENvbnRlbnRQcm9wcykge1xuICBjb25zdCB7IHdpZGdldElkLCB1c2VEYXRhU291cmNlLCBvblN0YXR1c0NoYW5nZSwgb25EYXRhU291cmNlQ3JlYXRlZCwgc2hvd01lc3NhZ2UgPSBmYWxzZSB9ID0gcHJvcHNcbiAgY29uc3QgZ2V0STE4bk1lc3NhZ2UgPSBob29rcy51c2VUcmFuc2xhdGlvbihkZWZhdWx0TWVzc2FnZXMpXG4gIGNvbnN0IGRzRXhpc3RzOiBib29sZWFuID0gdXNlRGF0YVNvdXJjZUV4aXN0cyh7IHdpZGdldElkLCB1c2VEYXRhU291cmNlSWQ6IHVzZURhdGFTb3VyY2UuZGF0YVNvdXJjZUlkIH0pXG4gIGNvbnN0IFtkc1N0YXR1cywgc2V0RHNTdGF0dXNdID0gUmVhY3QudXNlU3RhdGU8J2Vycm9yJyB8ICd3YXJuaW5nJyB8ICdjcmVhdGluZyc+KG51bGwpXG4gIGNvbnN0IFtkYXRhU291cmNlLCBzZXREYXRhU291cmNlXSA9IFJlYWN0LnVzZVN0YXRlPERhdGFTb3VyY2U+KG51bGwpXG5cbiAgY29uc3QgaGFuZGxlRHNJbmZvQ2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soKGluZm86IElNRGF0YVNvdXJjZUluZm8pID0+IHtcbiAgICBpZiAoaW5mbykge1xuICAgICAgY29uc3QgeyBzdGF0dXMsIGluc3RhbmNlU3RhdHVzIH0gPSBpbmZvXG4gICAgICBpZiAoaW5zdGFuY2VTdGF0dXMgPT09IERhdGFTb3VyY2VTdGF0dXMuTm90Q3JlYXRlZCkge1xuICAgICAgICBzZXREc1N0YXR1cygnY3JlYXRpbmcnKVxuICAgICAgICBvblN0YXR1c0NoYW5nZT8uKGZhbHNlKVxuICAgICAgfSBlbHNlIGlmIChpbnN0YW5jZVN0YXR1cyA9PT0gRGF0YVNvdXJjZVN0YXR1cy5DcmVhdGVFcnJvciB8fCBzdGF0dXMgPT09IERhdGFTb3VyY2VTdGF0dXMuTG9hZEVycm9yKSB7XG4gICAgICAgIHNldERzU3RhdHVzKCdlcnJvcicpXG4gICAgICAgIG9uU3RhdHVzQ2hhbmdlPy4oZmFsc2UpXG4gICAgICB9IGVsc2UgaWYgKHN0YXR1cyA9PT0gRGF0YVNvdXJjZVN0YXR1cy5Ob3RSZWFkeSkge1xuICAgICAgICBzZXREc1N0YXR1cygnd2FybmluZycpXG4gICAgICAgIG9uU3RhdHVzQ2hhbmdlPy4oZmFsc2UpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZXREc1N0YXR1cyhudWxsKVxuICAgICAgICBvblN0YXR1c0NoYW5nZT8uKHRydWUpXG4gICAgICB9XG4gICAgfVxuICB9LCBbb25TdGF0dXNDaGFuZ2VdKVxuXG4gIGNvbnN0IGhhbmRsZURzQ3JlYXRlZCA9IFJlYWN0LnVzZUNhbGxiYWNrKChkczogRGF0YVNvdXJjZSkgPT4ge1xuICAgIHNldERhdGFTb3VyY2UoZHMpXG4gICAgb25EYXRhU291cmNlQ3JlYXRlZD8uKGRzKVxuICB9LCBbb25EYXRhU291cmNlQ3JlYXRlZF0pXG5cbiAgY29uc3QgaGFuZGxlRHNDcmVhdGVGYWlsZWQgPSBSZWFjdC51c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgc2V0RGF0YVNvdXJjZShudWxsKVxuICAgIHNldERzU3RhdHVzKCdlcnJvcicpXG4gICAgb25TdGF0dXNDaGFuZ2U/LihmYWxzZSlcbiAgfSwgW29uU3RhdHVzQ2hhbmdlXSlcblxuICBsZXQgc3RhdHVzSWNvblxuICBsZXQgc3RhdHVzTXNnXG4gIGxldCBjb2xvclxuICBpZiAoZHNTdGF0dXMgPT09ICdjcmVhdGluZycpIHtcbiAgICBzdGF0dXNJY29uID0gaWNvbkVycm9yXG4gICAgc3RhdHVzTXNnID0gZ2V0STE4bk1lc3NhZ2UoJ2xvYWRpbmcnKVxuICB9IGVsc2UgaWYgKCFkc0V4aXN0cyB8fCBkc1N0YXR1cyA9PT0gJ2Vycm9yJykge1xuICAgIHN0YXR1c0ljb24gPSBpY29uRXJyb3JcbiAgICBzdGF0dXNNc2cgPSBnZXRJMThuTWVzc2FnZSgnZGF0YVNvdXJjZUNyZWF0ZUVycm9yJylcbiAgICBjb2xvciA9ICd2YXIoLS1zeXMtY29sb3ItZXJyb3ItbWFpbiknXG4gIH0gZWxzZSBpZiAoZHNTdGF0dXMgPT09ICd3YXJuaW5nJykge1xuICAgIGxldCBsYWJlbCA9ICcnXG4gICAgY29uc3Qgb3JpZ2luRHMgPSBkYXRhU291cmNlPy5nZXRPcmlnaW5EYXRhU291cmNlcygpPy5bMF1cbiAgICBpZiAob3JpZ2luRHMpIHtcbiAgICAgIGxhYmVsID0gb3JpZ2luRHMuZ2V0TGFiZWwoKSB8fCBvcmlnaW5Ecy5nZXREYXRhU291cmNlSnNvbigpLnNvdXJjZUxhYmVsXG4gICAgfSBlbHNlIGlmIChkYXRhU291cmNlKSB7XG4gICAgICBsYWJlbCA9IGRhdGFTb3VyY2UuZ2V0TGFiZWwoKSB8fCBkYXRhU291cmNlLmdldERhdGFTb3VyY2VKc29uKCkubGFiZWxcbiAgICB9XG5cbiAgICBjb25zdCB3aWRnZXRJZCA9IGFwcENvbmZpZ1V0aWxzLmdldFdpZGdldElkQnlPdXRwdXREYXRhU291cmNlKHVzZURhdGFTb3VyY2UpXG4gICAgY29uc3QgYXBwU3RhdGUgPSB3aW5kb3c/LmppbXVDb25maWc/LmlzQnVpbGRlclxuICAgICAgPyBnZXRBcHBTdG9yZSgpLmdldFN0YXRlKCkuYXBwU3RhdGVJbkJ1aWxkZXJcbiAgICAgIDogZ2V0QXBwU3RvcmUoKS5nZXRTdGF0ZSgpXG4gICAgY29uc3Qgd2lkZ2V0TGFiZWwgPSBhcHBTdGF0ZS5hcHBDb25maWcud2lkZ2V0c1t3aWRnZXRJZF0/LmxhYmVsXG5cbiAgICBjb2xvciA9ICd2YXIoLS1zeXMtY29sb3Itd2FybmluZy1kYXJrKSdcbiAgICBzdGF0dXNJY29uID0gaWNvbldhcm5pbmdcbiAgICBzdGF0dXNNc2cgPSBnZXRJMThuTWVzc2FnZSgnb3V0cHV0RGF0YUlzTm90R2VuZXJhdGVkJywge1xuICAgICAgb3V0cHV0RHNMYWJlbDogbGFiZWwgPz8gJycsXG4gICAgICBzb3VyY2VXaWRnZXROYW1lOiB3aWRnZXRMYWJlbCA/PyAnJ1xuICAgIH0pXG4gIH1cbiAgcmV0dXJuIChcbiAgICA8UmVhY3QuRnJhZ21lbnQ+XG4gICAgICB7ZHNFeGlzdHMgJiYgKFxuICAgICAgICA8RGF0YVNvdXJjZUNvbXBvbmVudFxuICAgICAgICAgIHVzZURhdGFTb3VyY2U9e3VzZURhdGFTb3VyY2V9XG4gICAgICAgICAgb25EYXRhU291cmNlSW5mb0NoYW5nZT17aGFuZGxlRHNJbmZvQ2hhbmdlfVxuICAgICAgICAgIG9uRGF0YVNvdXJjZUNyZWF0ZWQ9e2hhbmRsZURzQ3JlYXRlZH1cbiAgICAgICAgICBvbkNyZWF0ZURhdGFTb3VyY2VGYWlsZWQ9e2hhbmRsZURzQ3JlYXRlRmFpbGVkfVxuICAgICAgICAvPlxuICAgICAgKX1cbiAgICAgIHtkc1N0YXR1cyA9PT0gJ2NyZWF0aW5nJyAmJiA8U3RhdHVzSW5kaWNhdG9yIHN0YXR1c1R5cGU9e0VudGl0eVN0YXR1c1R5cGUuTG9hZGluZ30gdGl0bGU9e3N0YXR1c01zZ30gLz59XG4gICAgICB7KCFkc0V4aXN0cyB8fCBkc1N0YXR1cyA9PT0gJ2Vycm9yJyB8fCBkc1N0YXR1cyA9PT0gJ3dhcm5pbmcnKSAmJiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSdkLWZsZXggYWxpZ24taXRlbXMtY2VudGVyJz5cbiAgICAgICAgICA8VG9vbHRpcCB0aXRsZT17c3RhdHVzTXNnfT5cbiAgICAgICAgICAgIDxCdXR0b24gc2l6ZT0nc20nIHR5cGU9J3RlcnRpYXJ5JyBpY29uPjxJY29uIGljb249e3N0YXR1c0ljb259IGNvbG9yPXtjb2xvcn0gLz48L0J1dHRvbj5cbiAgICAgICAgICA8L1Rvb2x0aXA+XG4gICAgICAgICAge3Nob3dNZXNzYWdlICYmIDxkaXYgY2xhc3NOYW1lPSdzdGF0dXMtbWVzc2FnZSc+e3N0YXR1c01zZ308L2Rpdj59XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cbiAgICA8L1JlYWN0LkZyYWdtZW50PlxuICApXG59XG5cblxuXG4iLCIvKipcbiAqIENvbmZpZ3VyYWJsZSBkZWJ1ZyBsb2dnaW5nIHV0aWxpdHkgZm9yIEV4cGVyaWVuY2UgQnVpbGRlciB3aWRnZXRzXG4gKiBcbiAqIFVzYWdlOlxuICogLSBBZGQgP2RlYnVnPWFsbCB0byBVUkwgdG8gc2VlIGFsbCBkZWJ1ZyBsb2dzXG4gKiAtIEFkZCA/ZGVidWc9SEFTSCxGT1JNIHRvIHNlZSBzcGVjaWZpYyBmZWF0dXJlIGxvZ3NcbiAqIC0gQWRkID9kZWJ1Zz1mYWxzZSB0byBkaXNhYmxlIGFsbCBkZWJ1ZyBsb2dzXG4gKiBcbiAqIEZlYXR1cmVzIChRdWVyeVNpbXBsZSk6XG4gKiAtIEJVRzogS25vd24gYnVncy9pc3N1ZXMgKGFsd2F5cyBsb2dzLCBldmVuIGlmIGRlYnVnPWZhbHNlKSAtIFVzZSBmb3JtYXQ6IGJ1Z0lkLCBjYXRlZ29yeSwgZGVzY3JpcHRpb25cbiAqIC0gSEFTSDogSGFzaCBwYXJhbWV0ZXIgcHJvY2Vzc2luZ1xuICogLSBGT1JNOiBRdWVyeSBmb3JtIGludGVyYWN0aW9uc1xuICogLSBUQVNLOiBRdWVyeSB0YXNrIG1hbmFnZW1lbnRcbiAqIC0gWk9PTTogWm9vbSBiZWhhdmlvclxuICogLSBNQVAtRVhURU5UOiBNYXAgZXh0ZW50IGNoYW5nZXNcbiAqIC0gREFUQS1BQ1RJT046IERhdGEgYWN0aW9uIGV4ZWN1dGlvbiAoQWRkIHRvIE1hcCwgZXRjLilcbiAqIC0gR1JPVVA6IFF1ZXJ5IGdyb3VwaW5nIGFuZCBkcm9wZG93biBzZWxlY3Rpb25cbiAqIC0gU0VMRUNUSU9OOiBTZWxlY3Rpb24gZGV0ZWN0aW9uIGFuZCBpZGVudGlmeSBwb3B1cCB0cmFja2luZ1xuICogLSBXSURHRVQtU1RBVEU6IFdpZGdldCBsaWZlY3ljbGUgZXZlbnRzIChvcGVuL2Nsb3NlIGhhbmRzaGFrZSlcbiAqIC0gUkVTVE9SRTogU2VsZWN0aW9uIHJlc3RvcmF0aW9uIHdoZW4gd2lkZ2V0IG9wZW5zXG4gKiAtIFJFU1VMVFMtTU9ERTogUmVzdWx0cyBtYW5hZ2VtZW50IG1vZGUgc2VsZWN0aW9uIChDcmVhdGUgbmV3LCBBZGQgdG8sIFJlbW92ZSBmcm9tKVxuICogLSBFWFBBTkQtQ09MTEFQU0U6IEV4cGFuZC9jb2xsYXBzZSBzdGF0ZSBtYW5hZ2VtZW50IGZvciByZXN1bHQgaXRlbXNcbiAqIC0gR1JBUEhJQ1MtTEFZRVI6IEdyYXBoaWNzIGxheWVyIGhpZ2hsaWdodGluZyAoaW5kZXBlbmRlbnQgb2YgbGF5ZXIgdmlzaWJpbGl0eSlcbiAqIC0gRVZFTlRTOiBFdmVudCBsaXN0ZW5lciBzZXR1cC9jbGVhbnVwIGFuZCBjdXN0b20gZXZlbnQgZGlzcGF0Y2hpbmdcbiAqIFxuICogVGVtcG9yYXJ5IE1pZ3JhdGlvbiBGZWF0dXJlcyAod2lsbCBiZSByZW1vdmVkIGFmdGVyIG1pZ3JhdGlvbiBjb21wbGV0ZSk6XG4gKiAtIENIVU5LLTEtQ09NUEFSRTogQ2h1bmsgMSAoVVJMIFBhcmFtZXRlcikgY29tcGFyaXNvbiBsb2dzXG4gKiAtIENIVU5LLTEtTUlTTUFUQ0g6IENodW5rIDEgbWlzbWF0Y2ggd2FybmluZ3NcbiAqIC0gQ0hVTkstMi1DT01QQVJFOiBDaHVuayAyIChWaXNpYmlsaXR5KSBjb21wYXJpc29uIGxvZ3NcbiAqIC0gQ0hVTkstMi1NSVNNQVRDSDogQ2h1bmsgMiBtaXNtYXRjaCB3YXJuaW5nc1xuICogLSBDSFVOSy0zLUNPTVBBUkU6IENodW5rIDMgKFNlbGVjdGlvbi9SZXN0b3JhdGlvbikgY29tcGFyaXNvbiBsb2dzXG4gKiAtIENIVU5LLTMtREVDSVNJT046IENodW5rIDMgZGVjaXNpb24gcG9pbnQgbG9nc1xuICogLSBDSFVOSy0zLUZBTExCQUNLOiBDaHVuayAzIGZhbGxiYWNrIGxvZ2ljIGxvZ3NcbiAqIC0gQ0hVTkstNC1DT01QQVJFOiBDaHVuayA0IChHcmFwaGljcyBMYXllcikgY29tcGFyaXNvbiBsb2dzXG4gKiAtIENIVU5LLTUtQ09NUEFSRTogQ2h1bmsgNSAoQWNjdW11bGF0ZWQgUmVjb3JkcykgY29tcGFyaXNvbiBsb2dzXG4gKiAtIENIVU5LLTYtQ09NUEFSRTogQ2h1bmsgNiAoTWFwIFZpZXcpIGNvbXBhcmlzb24gbG9nc1xuICogLSBDSFVOSy02LU1JU01BVENIOiBDaHVuayA2IG1pc21hdGNoIHdhcm5pbmdzXG4gKiBcbiAqIEZlYXR1cmVzIChIZWxwZXJTaW1wbGUpOlxuICogLSBIQVNIOiBIYXNoIHBhcmFtZXRlciBtb25pdG9yaW5nIGFuZCB3aWRnZXQgb3BlbmluZ1xuICogLSBTRUxFQ1RJT046IFNlbGVjdGlvbiB0cmFja2luZyBmcm9tIFF1ZXJ5U2ltcGxlXG4gKiAtIFdJREdFVC1TVEFURTogV2lkZ2V0IHN0YXRlIGhhbmRzaGFrZSAob3Blbi9jbG9zZSBldmVudHMpXG4gKiAtIFJFU1RPUkU6IFNlbGVjdGlvbiByZXN0b3JhdGlvbiBhdHRlbXB0cyBhbmQgcmVzdWx0c1xuICovXG5cbnR5cGUgRGVidWdGZWF0dXJlID0gJ0JVRycgfCAnSEFTSCcgfCAnSEFTSC1FWEVDJyB8ICdGT1JNJyB8ICdUQVNLJyB8ICdaT09NJyB8ICdNQVAtRVhURU5UJyB8ICdEQVRBLUFDVElPTicgfCAnR1JPVVAnIHwgJ1NFTEVDVElPTicgfCAnV0lER0VULVNUQVRFJyB8ICdSRVNUT1JFJyB8ICdSRVNUT1JFLUNPTVBBUkUnIHwgJ1JFU1VMVFMtTU9ERScgfCAnRVhQQU5ELUNPTExBUFNFJyB8ICdHUkFQSElDUy1MQVlFUicgfCAnRVZFTlRTJyB8ICdDSFVOSy0xLUNPTVBBUkUnIHwgJ0NIVU5LLTEtTUlTTUFUQ0gnIHwgJ0NIVU5LLTItQ09NUEFSRScgfCAnQ0hVTkstMi1NSVNNQVRDSCcgfCAnQ0hVTkstMy1DT01QQVJFJyB8ICdDSFVOSy0zLURFQ0lTSU9OJyB8ICdDSFVOSy0zLUZBTExCQUNLJyB8ICdDSFVOSy00LUNPTVBBUkUnIHwgJ0NIVU5LLTUtQ09NUEFSRScgfCAnQ0hVTkstNi1DT01QQVJFJyB8ICdDSFVOSy02LU1JU01BVENIJyB8ICdhbGwnIHwgJ2ZhbHNlJ1xuXG5pbnRlcmZhY2UgRGVidWdMb2dnZXJPcHRpb25zIHtcbiAgd2lkZ2V0TmFtZTogc3RyaW5nXG4gIGZlYXR1cmVzOiBEZWJ1Z0ZlYXR1cmVbXVxufVxuXG5jbGFzcyBEZWJ1Z0xvZ2dlciB7XG4gIHByaXZhdGUgZW5hYmxlZEZlYXR1cmVzOiBTZXQ8RGVidWdGZWF0dXJlPiA9IG5ldyBTZXQoKVxuICBwcml2YXRlIGluaXRpYWxpemVkID0gZmFsc2VcbiAgcHJpdmF0ZSB3aWRnZXROYW1lOiBzdHJpbmdcbiAgcHJpdmF0ZSBmZWF0dXJlczogRGVidWdGZWF0dXJlW11cblxuICBjb25zdHJ1Y3RvcihvcHRpb25zOiBEZWJ1Z0xvZ2dlck9wdGlvbnMpIHtcbiAgICB0aGlzLndpZGdldE5hbWUgPSBvcHRpb25zLndpZGdldE5hbWVcbiAgICB0aGlzLmZlYXR1cmVzID0gb3B0aW9ucy5mZWF0dXJlc1xuICB9XG5cbiAgcHJpdmF0ZSBpbml0aWFsaXplKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmluaXRpYWxpemVkKSByZXR1cm5cblxuICAgIC8vIENoZWNrIFVSTCBwYXJhbWV0ZXJzIChib3RoIGN1cnJlbnQgd2luZG93IGFuZCBwYXJlbnQgZm9yIGlmcmFtZXMpXG4gICAgbGV0IHVybFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaClcbiAgICBsZXQgZGVidWdWYWx1ZSA9IHVybFBhcmFtcy5nZXQoJ2RlYnVnJylcblxuICAgIC8vIElmIG5vdCBmb3VuZCBpbiBjdXJyZW50IHdpbmRvdywgY2hlY2sgcGFyZW50IChuZWVkZWQgZm9yIEV4QiBpZnJhbWVzKVxuICAgIGlmIChkZWJ1Z1ZhbHVlID09PSBudWxsICYmIHdpbmRvdy5wYXJlbnQgIT09IHdpbmRvdykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdXJsUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh3aW5kb3cucGFyZW50LmxvY2F0aW9uLnNlYXJjaClcbiAgICAgICAgZGVidWdWYWx1ZSA9IHVybFBhcmFtcy5nZXQoJ2RlYnVnJylcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gQ3Jvc3Mtb3JpZ2luIHJlc3RyaWN0aW9uIG1pZ2h0IHByZXZlbnQgYWNjZXNzIHRvIHBhcmVudCBsb2NhdGlvblxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChkZWJ1Z1ZhbHVlID09PSAnZmFsc2UnKSB7XG4gICAgICAvLyBFeHBsaWNpdGx5IGRpc2FibGVkXG4gICAgICB0aGlzLmluaXRpYWxpemVkID0gdHJ1ZVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgaWYgKGRlYnVnVmFsdWUgPT09ICdhbGwnKSB7XG4gICAgICAvLyBFbmFibGUgYWxsIGZlYXR1cmVzIG9ubHkgaWYgZXhwbGljaXRseSBzZXQgdG8gJ2FsbCdcbiAgICAgIHRoaXMuZmVhdHVyZXMuZm9yRWFjaChmZWF0dXJlID0+IHtcbiAgICAgICAgaWYgKGZlYXR1cmUgIT09ICdhbGwnICYmIGZlYXR1cmUgIT09ICdmYWxzZScpIHtcbiAgICAgICAgICB0aGlzLmVuYWJsZWRGZWF0dXJlcy5hZGQoZmVhdHVyZSlcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIGNvbnNvbGUubG9nKGBbJHt0aGlzLndpZGdldE5hbWV9LURFQlVHXSBFbmFibGVkIEFMTCBmZWF0dXJlczpgLCBBcnJheS5mcm9tKHRoaXMuZW5hYmxlZEZlYXR1cmVzKSlcbiAgICB9IGVsc2UgaWYgKGRlYnVnVmFsdWUgIT09IG51bGwpIHtcbiAgICAgIC8vIFBhcnNlIGNvbW1hLXNlcGFyYXRlZCBmZWF0dXJlIGxpc3RcbiAgICAgIGNvbnN0IHJlcXVlc3RlZEZlYXR1cmVzID0gZGVidWdWYWx1ZS5zcGxpdCgnLCcpLm1hcChmID0+IGYudHJpbSgpLnRvVXBwZXJDYXNlKCkgYXMgRGVidWdGZWF0dXJlKVxuICAgICAgcmVxdWVzdGVkRmVhdHVyZXMuZm9yRWFjaChmZWF0dXJlID0+IHtcbiAgICAgICAgaWYgKGZlYXR1cmUudG9VcHBlckNhc2UoKSA9PT0gJ0FMTCcpIHtcbiAgICAgICAgICAvLyBFbmFibGUgYWxsIGZlYXR1cmVzIGZvciB0aGlzIHdpZGdldFxuICAgICAgICAgIHRoaXMuZmVhdHVyZXMuZm9yRWFjaChmID0+IHtcbiAgICAgICAgICAgIGlmIChmICE9PSAnYWxsJyAmJiBmICE9PSAnZmFsc2UnKSB7XG4gICAgICAgICAgICAgIHRoaXMuZW5hYmxlZEZlYXR1cmVzLmFkZChmKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5mZWF0dXJlcy5pbmNsdWRlcyhmZWF0dXJlKSkge1xuICAgICAgICAgIHRoaXMuZW5hYmxlZEZlYXR1cmVzLmFkZChmZWF0dXJlKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cblxuICAgIHRoaXMuaW5pdGlhbGl6ZWQgPSB0cnVlXG4gIH1cblxuICBwcml2YXRlIGlzRW5hYmxlZChmZWF0dXJlOiBEZWJ1Z0ZlYXR1cmUpOiBib29sZWFuIHtcbiAgICB0aGlzLmluaXRpYWxpemUoKVxuICAgIFxuICAgIC8vIEJVRyBsZXZlbCBhbHdheXMgZW5hYmxlZCwgcmVnYXJkbGVzcyBvZiBkZWJ1ZyBzd2l0Y2hlcyAoZXZlbiBpZiBkZWJ1Zz1mYWxzZSlcbiAgICBpZiAoZmVhdHVyZSA9PT0gJ0JVRycpIHtcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICAgIFxuICAgIGlmICh0aGlzLmVuYWJsZWRGZWF0dXJlcy5oYXMoJ2FsbCcpKSB7XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gdGhpcy5lbmFibGVkRmVhdHVyZXMuaGFzKGZlYXR1cmUpXG4gIH1cblxuICBsb2coZmVhdHVyZTogRGVidWdGZWF0dXJlLCBkYXRhOiBhbnkpOiB2b2lkIHtcbiAgICAvLyBCVUcgbGV2ZWwgYWx3YXlzIGxvZ3MsIGV2ZW4gaWYgZGVidWc9ZmFsc2VcbiAgICBpZiAoZmVhdHVyZSA9PT0gJ0JVRycpIHtcbiAgICAgIGNvbnN0IGxvZ0RhdGEgPSB7XG4gICAgICAgIGZlYXR1cmU6ICdCVUcnLFxuICAgICAgICBidWdJZDogZGF0YS5idWdJZCB8fCAnVU5LTk9XTicsXG4gICAgICAgIGNhdGVnb3J5OiBkYXRhLmNhdGVnb3J5IHx8ICdHRU5FUkFMJyxcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIC4uLmRhdGFcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gVXNlIGNvbnNvbGUud2FybiB3aXRoIGVtb2ppIGZvcm1hdCB0byBtYWtlIGJ1Z3Mgc3RhbmQgb3V0XG4gICAgICBjb25zb2xlLndhcm4oYFske3RoaXMud2lkZ2V0TmFtZS50b1VwcGVyQ2FzZSgpfSDimqDvuI8gQlVHXWAsIEpTT04uc3RyaW5naWZ5KGxvZ0RhdGEsIG51bGwsIDIpKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIC8vIFJlZ3VsYXIgZmVhdHVyZSBsb2dnaW5nIChleGlzdGluZyBiZWhhdmlvcilcbiAgICBpZiAoIXRoaXMuaXNFbmFibGVkKGZlYXR1cmUpKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCBsb2dEYXRhID0ge1xuICAgICAgZmVhdHVyZSxcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgLi4uZGF0YVxuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKGBbJHt0aGlzLndpZGdldE5hbWUudG9VcHBlckNhc2UoKX0tJHtmZWF0dXJlfV1gLCBKU09OLnN0cmluZ2lmeShsb2dEYXRhLCBudWxsLCAyKSlcbiAgfVxuXG4gIGdldENvbmZpZygpOiB7IGVuYWJsZWRGZWF0dXJlczogc3RyaW5nW10sIGRlYnVnVmFsdWU6IHN0cmluZyB8IG51bGwgfSB7XG4gICAgdGhpcy5pbml0aWFsaXplKClcbiAgICBcbiAgICBjb25zdCB1cmxQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpXG4gICAgY29uc3QgZGVidWdWYWx1ZSA9IHVybFBhcmFtcy5nZXQoJ2RlYnVnJylcbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgZW5hYmxlZEZlYXR1cmVzOiBBcnJheS5mcm9tKHRoaXMuZW5hYmxlZEZlYXR1cmVzKSxcbiAgICAgIGRlYnVnVmFsdWVcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgZGVidWcgbG9nZ2VyIGluc3RhbmNlIGZvciBRdWVyeVNpbXBsZSB3aWRnZXRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIoKSB7XG4gIHJldHVybiBuZXcgRGVidWdMb2dnZXIoe1xuICAgIHdpZGdldE5hbWU6ICdRVUVSWVNJTVBMRScsXG4gICAgZmVhdHVyZXM6IFtcbiAgICAgICdIQVNIJywgJ0hBU0gtRVhFQycsICdIQVNILUZJUlNULUxPQUQnLCAnRk9STScsICdUQVNLJywgJ1pPT00nLCAnTUFQLUVYVEVOVCcsICdEQVRBLUFDVElPTicsICdHUk9VUCcsIFxuICAgICAgJ1NFTEVDVElPTicsICdXSURHRVQtU1RBVEUnLCAnUkVTVE9SRScsICdSRVNVTFRTLU1PREUnLCAnRVhQQU5ELUNPTExBUFNFJywgJ0dSQVBISUNTLUxBWUVSJywgJ0VWRU5UUycsXG4gICAgICAvLyBUZW1wb3JhcnkgbWlncmF0aW9uIGZlYXR1cmVzICh3aWxsIGJlIHJlbW92ZWQgYWZ0ZXIgbWlncmF0aW9uIGNvbXBsZXRlKVxuICAgICAgJ0NIVU5LLTEtQ09NUEFSRScsICdDSFVOSy0xLU1JU01BVENIJywgJ0NIVU5LLTItQ09NUEFSRScsICdDSFVOSy0yLU1JU01BVENIJywgJ0NIVU5LLTMtQ09NUEFSRScsICdDSFVOSy0zLURFQ0lTSU9OJywgJ0NIVU5LLTMtRkFMTEJBQ0snLFxuICAgICAgJ0NIVU5LLTQtQ09NUEFSRScsICdDSFVOSy01LUNPTVBBUkUnLCAnQ0hVTkstNi1DT01QQVJFJywgJ0NIVU5LLTYtTUlTTUFUQ0gnXG4gICAgXVxuICB9KVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBkZWJ1ZyBsb2dnZXIgaW5zdGFuY2UgZm9yIEhlbHBlclNpbXBsZSB3aWRnZXRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUhlbHBlclNpbXBsZURlYnVnTG9nZ2VyKCkge1xuICByZXR1cm4gbmV3IERlYnVnTG9nZ2VyKHtcbiAgICB3aWRnZXROYW1lOiAnSEVMUEVSU0lNUExFJyxcbiAgICBmZWF0dXJlczogWydIQVNIJywgJ0hBU0gtRVhFQycsICdTRUxFQ1RJT04nLCAnV0lER0VULVNUQVRFJywgJ1JFU1RPUkUnXVxuICB9KVxufVxuXG4iLCJpbXBvcnQge1xuICBSZWFjdFJlZHV4LFxuICB0eXBlIElNU3RhdGUsXG4gIHR5cGUgSU1BcHBDb25maWdcbn0gZnJvbSAnamltdS1jb3JlJ1xuaW50ZXJmYWNlIFByb3BzIHtcbiAgd2lkZ2V0SWQ6IHN0cmluZ1xuICB1c2VEYXRhU291cmNlSWQ6IHN0cmluZ1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXNlRGF0YVNvdXJjZUV4aXN0cyAocHJvcHM6IFByb3BzKSB7XG4gIGNvbnN0IHsgd2lkZ2V0SWQsIHVzZURhdGFTb3VyY2VJZCB9ID0gcHJvcHNcblxuICBjb25zdCBleGlzdHM6IGJvb2xlYW4gPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xuICAgIGxldCBhcHBDb25maWc6IElNQXBwQ29uZmlnXG4gICAgaWYgKHdpbmRvdy5qaW11Q29uZmlnLmlzQnVpbGRlcikge1xuICAgICAgYXBwQ29uZmlnID0gc3RhdGUuYXBwU3RhdGVJbkJ1aWxkZXIuYXBwQ29uZmlnXG4gICAgfSBlbHNlIHtcbiAgICAgIGFwcENvbmZpZyA9IHN0YXRlLmFwcENvbmZpZ1xuICAgIH1cbiAgICBjb25zdCB1c2VEYXRhU291cmNlcyA9IGFwcENvbmZpZy53aWRnZXRzW3dpZGdldElkXS51c2VEYXRhU291cmNlcyA/PyBbXVxuICAgIHJldHVybiB1c2VEYXRhU291cmNlcy5zb21lKHVzZURzID0+IHVzZURzLmRhdGFTb3VyY2VJZCA9PT0gdXNlRGF0YVNvdXJjZUlkKVxuICB9KVxuXG4gIHJldHVybiBleGlzdHNcbn1cblxuXG5cbiIsImltcG9ydCB0eXBlIHsgSVBvcHVwSW5mbyB9IGZyb20gJ0Blc3JpL2FyY2dpcy1yZXN0LWZlYXR1cmUtc2VydmljZSdcbmltcG9ydCB0eXBlIHsgSW50bFNoYXBlLCBEYXRhU291cmNlIH0gZnJvbSAnamltdS1jb3JlJ1xuXG4vKipcbiAqIFRvZ2dsZSBpdGVtcyBpbiBhbiBhcnJheVxuICovXG5leHBvcnQgY29uc3QgdG9nZ2xlSXRlbUluQXJyYXkgPSAoaXRlbSwgaXRlbXMgPSBbXSkgPT4gaXRlbXMuaW5jbHVkZXMoaXRlbSkgPyBpdGVtcy5maWx0ZXIoaSA9PiBpICE9PSBpdGVtKSA6IFsuLi5pdGVtcywgaXRlbV1cblxuZXhwb3J0IGludGVyZmFjZSBEYXRhU291cmNlTWFwIHtcbiAgW2RhdGFTb3VyY2VJZDogc3RyaW5nXTogRGF0YVNvdXJjZVxufVxuXG5leHBvcnQgdHlwZSBHZXRJMThuTWVzc2FnZVR5cGUgPSAoaWQ6IHN0cmluZywgb3B0aW9ucz86IHsgbWVzc2FnZXM/OiBhbnksIHZhbHVlcz86IGFueSB9KSA9PiBzdHJpbmdcbi8qKlxuICogQSBmYWN0b3J5IHRvIGNyZWF0ZSBhIGZ1bmN0aW9uIG9mIGdldHRpbmcgaTE4biBtZXNzYWdlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVHZXRJMThuTWVzc2FnZSAob3B0aW9uczogeyBpbnRsOiBJbnRsU2hhcGUsIGRlZmF1bHRNZXNzYWdlcz86IGFueSB9KSB7XG4gIGNvbnN0IHsgaW50bCwgZGVmYXVsdE1lc3NhZ2VzID0ge30gfSA9IG9wdGlvbnMgfHwge31cbiAgY29uc3QgZ2V0STE4bk1lc3NhZ2U6IEdldEkxOG5NZXNzYWdlVHlwZSA9IChpZCwgb3B0aW9ucykgPT4ge1xuICAgIGNvbnN0IHsgbWVzc2FnZXMsIHZhbHVlcyB9ID0gb3B0aW9ucyB8fCB7fVxuICAgIHJldHVybiBpbnRsLmZvcm1hdE1lc3NhZ2UoeyBpZCwgZGVmYXVsdE1lc3NhZ2U6IChtZXNzYWdlcyB8fCBkZWZhdWx0TWVzc2FnZXMpW2lkXSB9LCB2YWx1ZXMpXG4gIH1cbiAgcmV0dXJuIGdldEkxOG5NZXNzYWdlXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRGaWVsZEluZm9zSW5Qb3B1cENvbnRlbnQgKHBvcHVwSW5mbzogSVBvcHVwSW5mbykge1xuICBjb25zdCByZXN1bHQgPSBbXVxuICBpZiAocG9wdXBJbmZvPy5wb3B1cEVsZW1lbnRzPy5sZW5ndGggPiAwKSB7XG4gICAgcG9wdXBJbmZvLnBvcHVwRWxlbWVudHMuZm9yRWFjaChlbGVtZW50ID0+IHtcbiAgICAgIGlmIChlbGVtZW50LnR5cGUgPT09ICdmaWVsZHMnICYmIGVsZW1lbnQuZmllbGRJbmZvcz8ubGVuZ3RoID4gMCkge1xuICAgICAgICByZXN1bHQucHVzaCguLi5lbGVtZW50LmZpZWxkSW5mb3MpXG4gICAgICB9XG4gICAgfSlcbiAgfVxuICByZXR1cm4gcmVzdWx0XG59XG5cblxuXG4iLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfX2Vtb3Rpb25fcmVhY3RfanN4X3J1bnRpbWVfXzsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfamltdV9hcmNnaXNfXzsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfamltdV9jb3JlX187IiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX2ppbXVfbGF5b3V0c19sYXlvdXRfcnVudGltZV9fOyIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9qaW11X3RoZW1lX187IiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX2ppbXVfdWlfXzsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfamltdV91aV9iYXNpY19zcWxfZXhwcmVzc2lvbl9ydW50aW1lX187IiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX3JlYWN0X187IiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX3dpZGdldHNfc2hhcmVkX2NvZGVfY29tbW9uX187IiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSAobW9kdWxlKSA9PiB7XG5cdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuXHRcdCgpID0+IChtb2R1bGVbJ2RlZmF1bHQnXSkgOlxuXHRcdCgpID0+IChtb2R1bGUpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCB7IGE6IGdldHRlciB9KTtcblx0cmV0dXJuIGdldHRlcjtcbn07IiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7IiwiLyoqXHJcbiAqIFdlYnBhY2sgd2lsbCByZXBsYWNlIF9fd2VicGFja19wdWJsaWNfcGF0aF9fIHdpdGggX193ZWJwYWNrX3JlcXVpcmVfXy5wIHRvIHNldCB0aGUgcHVibGljIHBhdGggZHluYW1pY2FsbHkuXHJcbiAqIFRoZSByZWFzb24gd2h5IHdlIGNhbid0IHNldCB0aGUgcHVibGljUGF0aCBpbiB3ZWJwYWNrIGNvbmZpZyBpczogd2UgY2hhbmdlIHRoZSBwdWJsaWNQYXRoIHdoZW4gZG93bmxvYWQuXHJcbiAqICovXHJcbl9fd2VicGFja19wdWJsaWNfcGF0aF9fID0gd2luZG93LmppbXVDb25maWcuYmFzZVVybFxyXG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7IFJlYWN0LCBqc3gsIGNzcywgdHlwZSBBbGxXaWRnZXRQcm9wcywgRGF0YVNvdXJjZU1hbmFnZXIsIHR5cGUgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSwgdHlwZSBGZWF0dXJlRGF0YVJlY29yZCwgTWVzc2FnZU1hbmFnZXIsIERhdGFSZWNvcmRzU2VsZWN0aW9uQ2hhbmdlTWVzc2FnZSwgdHlwZSBEYXRhU291cmNlIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgUGFwZXIsIFdpZGdldFBsYWNlaG9sZGVyIH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB7IHR5cGUgSU1Db25maWcsIFF1ZXJ5QXJyYW5nZVR5cGUsIFNlbGVjdGlvblR5cGUgfSBmcm9tICcuLi9jb25maWcnXG5pbXBvcnQgZGVmYXVsdE1lc3NhZ2VzIGZyb20gJy4vdHJhbnNsYXRpb25zL2RlZmF1bHQnXG5pbXBvcnQgeyBnZXRXaWRnZXRSdW50aW1lRGF0YU1hcCB9IGZyb20gJy4vd2lkZ2V0LWNvbmZpZydcbmltcG9ydCB7IEppbXVNYXBWaWV3Q29tcG9uZW50LCB0eXBlIEppbXVNYXBWaWV3IH0gZnJvbSAnamltdS1hcmNnaXMnXG5cbmltcG9ydCB7IHZlcnNpb25NYW5hZ2VyIH0gZnJvbSAnLi4vdmVyc2lvbi1tYW5hZ2VyJ1xuaW1wb3J0IHsgUXVlcnlUYXNrTGlzdCB9IGZyb20gJy4vcXVlcnktdGFzay1saXN0J1xuaW1wb3J0IHsgVGFza0xpc3RJbmxpbmUgfSBmcm9tICcuL3F1ZXJ5LXRhc2stbGlzdC1pbmxpbmUnXG5pbXBvcnQgeyBUYXNrTGlzdFBvcHBlcldyYXBwZXIgfSBmcm9tICcuL3F1ZXJ5LXRhc2stbGlzdC1wb3BwZXItd3JhcHBlcidcbmltcG9ydCB7IFF1ZXJ5V2lkZ2V0Q29udGV4dCB9IGZyb20gJy4vd2lkZ2V0LWNvbnRleHQnXG5pbXBvcnQgeyBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyIH0gZnJvbSAnd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24nXG5pbXBvcnQgeyBXSURHRVRfVkVSU0lPTiB9IGZyb20gJy4uL3ZlcnNpb24nXG4vLyBDaHVuayAxOiBVUkwgUGFyYW1ldGVyIENvbnN1bXB0aW9uIE1hbmFnZXIgKHIwMTguOClcbmltcG9ydCB7IFVybENvbnN1bXB0aW9uTWFuYWdlciB9IGZyb20gJy4vaG9va3MvdXNlLXVybC1jb25zdW1wdGlvbidcbi8vIENodW5rIDI6IFdpZGdldCBWaXNpYmlsaXR5IEVuZ2luZSBNYW5hZ2VyIChyMDE4LjEzKSAtIFN0ZXAgMi4zOiBTd2l0Y2ggdG8gbWFuYWdlclxuaW1wb3J0IHsgV2lkZ2V0VmlzaWJpbGl0eU1hbmFnZXIgfSBmcm9tICcuL2hvb2tzL3VzZS13aWRnZXQtdmlzaWJpbGl0eSdcbi8vIENodW5rIDY6IE1hcCBWaWV3IE1hbmFnZW1lbnQgTWFuYWdlciAocjAxOC4xNCkgLSBTdGVwIDYuMTogQWRkIG1hbmFnZXIgd2l0aG91dCBpbnRlZ3JhdGlvblxuaW1wb3J0IHsgTWFwVmlld01hbmFnZXIgfSBmcm9tICcuL2hvb2tzL3VzZS1tYXAtdmlldydcbi8vIENodW5rIDQ6IEdyYXBoaWNzIExheWVyIE1hbmFnZW1lbnQgTWFuYWdlciAocjAxOC4yNCkgLSBTdGVwIDQuMjogUGFyYWxsZWwgZXhlY3V0aW9uXG5pbXBvcnQgeyBHcmFwaGljc0xheWVyTWFuYWdlciB9IGZyb20gJy4vaG9va3MvdXNlLWdyYXBoaWNzLWxheWVyJ1xuLy8gQ2h1bmsgNTogQWNjdW11bGF0ZWQgUmVjb3JkcyBNYW5hZ2VtZW50IE1hbmFnZXIgKHIwMTguMjYpIC0gU3RlcCA1LjE6IEFkZCBtYW5hZ2VyIHdpdGhvdXQgaW50ZWdyYXRpb25cbmltcG9ydCB7IEFjY3VtdWxhdGVkUmVjb3Jkc01hbmFnZXIgfSBmcm9tICcuL2hvb2tzL3VzZS1hY2N1bXVsYXRlZC1yZWNvcmRzJ1xuLy8gQ2h1bmsgNzogRXZlbnQgSGFuZGxpbmcgTWFuYWdlciAocjAxOC41OSkgLSBTdGVwIDcuMTogQ3JlYXRlIEV2ZW50IE1hbmFnZXJcbmltcG9ydCB7IEV2ZW50TWFuYWdlciwgT1BFTl9XSURHRVRfRVZFTlQsIFFVRVJZU0lNUExFX1NFTEVDVElPTl9FVkVOVCwgUkVTVE9SRV9PTl9JREVOVElGWV9DTE9TRV9FVkVOVCB9IGZyb20gJy4vaG9va3MvdXNlLWV2ZW50LWhhbmRsaW5nJ1xuLy8gQ2h1bmsgMzogU2VsZWN0aW9uICYgUmVzdG9yYXRpb24gTWFuYWdlciAocjAxOS4xKSAtIFNlY3Rpb24gMy4xOiBTZWxlY3Rpb24gU3RhdGUgVHJhY2tpbmdcbmltcG9ydCB7IFNlbGVjdGlvblJlc3RvcmF0aW9uTWFuYWdlciB9IGZyb20gJy4vaG9va3MvdXNlLXNlbGVjdGlvbi1yZXN0b3JhdGlvbidcblxuY29uc3QgZGVidWdMb2dnZXIgPSBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyKClcbmNvbnN0IHsgaWNvbk1hcCB9ID0gZ2V0V2lkZ2V0UnVudGltZURhdGFNYXAoKVxuXG4vLyBFdmVudCBjb25zdGFudHMgbW92ZWQgdG8gRXZlbnRNYW5hZ2VyIChyMDE4LjU5IC0gQ2h1bmsgNy4xKVxuXG4vKipcbiAqIFF1ZXJ5U2ltcGxlIFdpZGdldFxuICogXG4gKiBBIGhpZ2gtcGVyZm9ybWFuY2UgcXVlcnkgd2lkZ2V0IGZvciBBcmNHSVMgRXhwZXJpZW5jZSBCdWlsZGVyIHRoYXQgcHJvdmlkZXM6XG4gKiAtIFVuaXZlcnNhbCBTUUwgb3B0aW1pemF0aW9uIGZvciBkYXRhYmFzZSBpbmRleCB1c2FnZVxuICogLSBEdWFsLW1vZGUgZGVlcCBsaW5raW5nIChoYXNoIGZyYWdtZW50cyBhbmQgcXVlcnkgc3RyaW5ncylcbiAqIC0gUmVzdWx0cyBhY2N1bXVsYXRpb24gYWNyb3NzIG11bHRpcGxlIHF1ZXJpZXNcbiAqIC0gU2VsZWN0aW9uIHBlcnNpc3RlbmNlIGFuZCByZXN0b3JhdGlvblxuICogLSBHcmFwaGljcyBsYXllciBoaWdobGlnaHRpbmcgZm9yIG1hcCB2aXN1YWxpemF0aW9uXG4gKiBcbiAqIEFyY2hpdGVjdHVyZTpcbiAqIFRoaXMgd2lkZ2V0IGZvbGxvd3MgYSBcIkhvb2sgJiBTaGVsbFwiIHBhdHRlcm4gd2hlcmUgY29tcGxleCBsb2dpYyBpcyBleHRyYWN0ZWQgaW50b1xuICogbWFuYWdlciBjbGFzc2VzIChVcmxDb25zdW1wdGlvbk1hbmFnZXIsIFdpZGdldFZpc2liaWxpdHlNYW5hZ2VyLCBNYXBWaWV3TWFuYWdlcilcbiAqIHRvIGtlZXAgdGhlIG1haW4gd2lkZ2V0IGNsYXNzIGNsZWFuIGFuZCBtYWludGFpbmFibGUuXG4gKiBcbiAqIEBzaW5jZSAxLjE5LjAtcjAxOC4xOFxuICogQHNlZSB7QGxpbmsgVXJsQ29uc3VtcHRpb25NYW5hZ2VyfSBmb3IgVVJMIHBhcmFtZXRlciBoYW5kbGluZ1xuICogQHNlZSB7QGxpbmsgV2lkZ2V0VmlzaWJpbGl0eU1hbmFnZXJ9IGZvciBwYW5lbCB2aXNpYmlsaXR5IGRldGVjdGlvblxuICogQHNlZSB7QGxpbmsgTWFwVmlld01hbmFnZXJ9IGZvciBtYXAgdmlldyByZWZlcmVuY2UgbWFuYWdlbWVudFxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBXaWRnZXQgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50PEFsbFdpZGdldFByb3BzPElNQ29uZmlnPiwgeyBcbiAgaW5pdGlhbFF1ZXJ5VmFsdWU/OiB7IHNob3J0SWQ6IHN0cmluZywgdmFsdWU6IHN0cmluZyB9LCBcbiAgaXNQYW5lbFZpc2libGU/OiBib29sZWFuLCBcbiAgaGFzU2VsZWN0aW9uPzogYm9vbGVhbiwgXG4gIHNlbGVjdGlvblJlY29yZENvdW50PzogbnVtYmVyLCBcbiAgbGFzdFNlbGVjdGlvbj86IHsgcmVjb3JkSWRzOiBzdHJpbmdbXSwgb3V0cHV0RHNJZDogc3RyaW5nLCBxdWVyeUl0ZW1Db25maWdJZDogc3RyaW5nIH0sIFxuICByZXN1bHRzTW9kZT86IFNlbGVjdGlvblR5cGUsIFxuICBhY2N1bXVsYXRlZFJlY29yZHM/OiBGZWF0dXJlRGF0YVJlY29yZFtdLCBcbiAgZ3JhcGhpY3NMYXllckluaXRpYWxpemVkPzogYm9vbGVhbiwgXG4gIGFjdGl2ZVRhYj86ICdxdWVyeScgfCAncmVzdWx0cydcbn0+IHtcbiAgc3RhdGljIHZlcnNpb25NYW5hZ2VyID0gdmVyc2lvbk1hbmFnZXJcbiAgLy8gQ2h1bmsgMTogVVJMIFBhcmFtZXRlciBDb25zdW1wdGlvbiBNYW5hZ2VyIChyMDE4LjgpXG4gIHByaXZhdGUgdXJsQ29uc3VtcHRpb25NYW5hZ2VyID0gbmV3IFVybENvbnN1bXB0aW9uTWFuYWdlcigpXG4gIC8vIENodW5rIDI6IFdpZGdldCBWaXNpYmlsaXR5IEVuZ2luZSBNYW5hZ2VyIChyMDE4LjEzKSAtIFN0ZXAgMi4zOiBTd2l0Y2ggdG8gbWFuYWdlclxuICBwcml2YXRlIHZpc2liaWxpdHlNYW5hZ2VyID0gbmV3IFdpZGdldFZpc2liaWxpdHlNYW5hZ2VyKClcbiAgXG4gIC8vIFJlZnMgbXVzdCBiZSBkZWNsYXJlZCBiZWZvcmUgbWFuYWdlcnMgdGhhdCB1c2UgdGhlbVxuICBwcml2YXRlIHdpZGdldFJlZiA9IFJlYWN0LmNyZWF0ZVJlZjxIVE1MRGl2RWxlbWVudD4oKVxuICBwcml2YXRlIGdyYXBoaWNzTGF5ZXJSZWYgPSBSZWFjdC5jcmVhdGVSZWY8X19lc3JpLkdyYXBoaWNzTGF5ZXIgfCBudWxsPigpXG4gIHByaXZhdGUgbWFwVmlld1JlZiA9IFJlYWN0LmNyZWF0ZVJlZjxfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXcgfCBudWxsPigpXG4gIFxuICAvLyBDaHVuayA2OiBNYXAgVmlldyBNYW5hZ2VtZW50IE1hbmFnZXIgKHIwMTguMTYpIC0gU3RlcCA2LjM6IFN3aXRjaCB0byBtYW5hZ2VyXG4gIHByaXZhdGUgbWFwVmlld01hbmFnZXIgPSBuZXcgTWFwVmlld01hbmFnZXIodGhpcy5tYXBWaWV3UmVmKVxuICAvLyBDaHVuayA0OiBHcmFwaGljcyBMYXllciBNYW5hZ2VtZW50IE1hbmFnZXIgKHIwMTguMjQpIC0gU3RlcCA0LjI6IFBhcmFsbGVsIGV4ZWN1dGlvblxuICBwcml2YXRlIGdyYXBoaWNzTGF5ZXJNYW5hZ2VyID0gbmV3IEdyYXBoaWNzTGF5ZXJNYW5hZ2VyKHRoaXMuZ3JhcGhpY3NMYXllclJlZiwgdGhpcy5tYXBWaWV3UmVmKVxuICAvLyBDaHVuayA1OiBBY2N1bXVsYXRlZCBSZWNvcmRzIE1hbmFnZW1lbnQgTWFuYWdlciAocjAxOC4yNikgLSBTdGVwIDUuMTogQWRkIG1hbmFnZXIgd2l0aG91dCBpbnRlZ3JhdGlvblxuICBwcml2YXRlIGFjY3VtdWxhdGVkUmVjb3Jkc01hbmFnZXIgPSBuZXcgQWNjdW11bGF0ZWRSZWNvcmRzTWFuYWdlcigpXG4gIC8vIENodW5rIDc6IEV2ZW50IEhhbmRsaW5nIE1hbmFnZXIgKHIwMTguNTkpIC0gU3RlcCA3LjE6IENyZWF0ZSBFdmVudCBNYW5hZ2VyXG4gIHByaXZhdGUgZXZlbnRNYW5hZ2VyID0gbmV3IEV2ZW50TWFuYWdlcigpXG4gIC8vIENodW5rIDM6IFNlbGVjdGlvbiAmIFJlc3RvcmF0aW9uIE1hbmFnZXIgKHIwMTkuMSkgLSBTZWN0aW9uIDMuMTogU2VsZWN0aW9uIFN0YXRlIFRyYWNraW5nXG4gIHByaXZhdGUgc2VsZWN0aW9uUmVzdG9yYXRpb25NYW5hZ2VyID0gbmV3IFNlbGVjdGlvblJlc3RvcmF0aW9uTWFuYWdlcihcbiAgICAoKSA9PiB0aGlzLnN0YXRlLCAvLyBzdGF0ZUdldHRlclxuICAgIHtcbiAgICAgIG9uU3RhdGVVcGRhdGU6IChuZXdTdGF0ZSkgPT4gdGhpcy5zZXRTdGF0ZShuZXdTdGF0ZSBhcyBhbnkpXG4gICAgfVxuICApXG5cbiAgc3RhdGU6IHtcbiAgICBpbml0aWFsUXVlcnlWYWx1ZT86IHsgc2hvcnRJZDogc3RyaW5nLCB2YWx1ZTogc3RyaW5nIH0sXG4gICAgaXNQYW5lbFZpc2libGU/OiBib29sZWFuLFxuICAgIGhhc1NlbGVjdGlvbj86IGJvb2xlYW4sXG4gICAgc2VsZWN0aW9uUmVjb3JkQ291bnQ/OiBudW1iZXIsXG4gICAgbGFzdFNlbGVjdGlvbj86IHsgcmVjb3JkSWRzOiBzdHJpbmdbXSwgb3V0cHV0RHNJZDogc3RyaW5nLCBxdWVyeUl0ZW1Db25maWdJZDogc3RyaW5nIH0sXG4gICAgcmVzdWx0c01vZGU/OiBTZWxlY3Rpb25UeXBlLFxuICAgIGFjY3VtdWxhdGVkUmVjb3Jkcz86IEZlYXR1cmVEYXRhUmVjb3JkW10sXG4gICAgZ3JhcGhpY3NMYXllckluaXRpYWxpemVkPzogYm9vbGVhbixcbiAgICBhY3RpdmVUYWI/OiAncXVlcnknIHwgJ3Jlc3VsdHMnLFxuICAgIC8vIFRyYWNrIHdoZW4gSGVscGVyU2ltcGxlIGV4cGxpY2l0bHkgb3BlbnMgd2lkZ2V0IC0gb25seSB0aGVuIHNob3VsZCBxdWVyeS10YXNrLWxpc3QgdXNlIGluaXRpYWxRdWVyeVZhbHVlIGZvciBzZWxlY3Rpb25cbiAgICAvLyBVc2luZyBzdGF0ZSBpbnN0ZWFkIG9mIHJlZiBlbnN1cmVzIFJlYWN0IHRyaWdnZXJzIHJlLXJlbmRlcnMgd2hlbiBmbGFnIGNoYW5nZXNcbiAgICBzaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbj86IGJvb2xlYW5cbiAgfSA9IHtcbiAgICByZXN1bHRzTW9kZTogU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb24sIC8vIERlZmF1bHQgbW9kZVxuICAgIGFjdGl2ZVRhYjogJ3F1ZXJ5J1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgdGFiIGNoYW5nZSBiZXR3ZWVuIFwiUXVlcnlcIiBhbmQgXCJSZXN1bHRzXCIgdGFicy5cbiAgICogXG4gICAqIEBwYXJhbSBhY3RpdmVUYWIgLSBUaGUgdGFiIHRvIHN3aXRjaCB0byAoJ3F1ZXJ5JyBvciAncmVzdWx0cycpXG4gICAqIFxuICAgKiBAc2luY2UgMS4xOS4wLXIwMTcuMFxuICAgKi9cbiAgaGFuZGxlVGFiQ2hhbmdlID0gKGFjdGl2ZVRhYjogJ3F1ZXJ5JyB8ICdyZXN1bHRzJykgPT4ge1xuICAgIHRoaXMuc2V0U3RhdGUoeyBhY3RpdmVUYWIgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXNldHMgdGhlIG1hbnVhbCBtb2RpZmljYXRpb25zIGZsYWcgd2hlbiB1c2VyIHN0YXJ0cyBmcmVzaCBvcGVyYXRpb25zLlxuICAgKiBUaGlzIGFsbG93cyBoYXNoLXRyaWdnZXJlZCBxdWVyaWVzIHRvIHdvcmsgYWdhaW4gYWZ0ZXIgZXhwbGljaXQgdXNlciBhY3Rpb25zLlxuICAgKi9cbiAgcmVzZXRNYW51YWxNb2RpZmljYXRpb25zID0gKCkgPT4ge1xuICAgIC8vIEZJWCAocjAxOC45Nik6IFJlbW92ZWQgbWFudWFsbHlSZW1vdmVkUmVjb3JkSWRzIHRyYWNraW5nIC0gbm8gbG9uZ2VyIG5lZWRlZFxuICAgIC8vIER1cGxpY2F0ZSBkZXRlY3Rpb24gaW4gbWVyZ2VSZXN1bHRzSW50b0FjY3VtdWxhdGVkIGhhbmRsZXMgcHJldmVudGluZyBkdXBsaWNhdGVzXG4gICAgY29uc3QgaGFzTWFudWFsTW9kaWZpY2F0aW9ucyA9IHRoaXMuc3RhdGUuaGFzTWFudWFsTW9kaWZpY2F0aW9uc1xuXG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICBldmVudDogJ3Jlc2V0LW1hbnVhbC1tb2RpZmljYXRpb25zLWNoZWNrJyxcbiAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgaGFzTWFudWFsTW9kaWZpY2F0aW9ucyxcbiAgICAgIG5vdGU6ICdyMDE4Ljk2OiBObyBtYW51YWxseVJlbW92ZWRSZWNvcmRJZHMgdHJhY2tpbmcnLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcblxuICAgIGlmIChoYXNNYW51YWxNb2RpZmljYXRpb25zKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdyZXNldHRpbmctbWFudWFsLW1vZGlmaWNhdGlvbnMnLFxuICAgICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgICAgcmVhc29uOiAndXNlci1zdGFydGVkLWZyZXNoLW9wZXJhdGlvbicsXG4gICAgICAgIGhhZE1hbnVhbE1vZGlmaWNhdGlvbnNGbGFnOiBoYXNNYW51YWxNb2RpZmljYXRpb25zLFxuICAgICAgICBub3RlOiAncjAxOC45NjogTm8gbWFudWFsbHlSZW1vdmVkUmVjb3JkSWRzIHRvIGNsZWFyJyxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIEhlbHBlclNpbXBsZSdzIG9wZW4gd2lkZ2V0IGV2ZW50LlxuICAgKiBRdWVyeVNpbXBsZSBzaG91bGQgb25seSBwcm9jZXNzIGhhc2ggcGFyYW1ldGVycyB3aGVuIEhlbHBlclNpbXBsZSBleHBsaWNpdGx5IG9wZW5zIHRoZSB3aWRnZXQuXG4gICAqIFRoaXMgZW5zdXJlcyBIZWxwZXJTaW1wbGUgcmVtYWlucyB0aGUgb3JjaGVzdHJhdG9yIGFuZCBwcmV2ZW50cyBhdXRvbm9tb3VzIGhhc2ggcHJvY2Vzc2luZy5cbiAgICovXG4gIGhhbmRsZU9wZW5XaWRnZXRFdmVudCA9IChldmVudDogQ3VzdG9tRXZlbnQpID0+IHtcbiAgICBjb25zdCB7IGlkIH0gPSB0aGlzLnByb3BzXG5cbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gtRVhFQycsIHtcbiAgICAgIGV2ZW50OiAncXVlcnlzaW1wbGUtaGFuZGxlb3BlbndpZGdldGV2ZW50LXJlY2VpdmVkJyxcbiAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgIGV2ZW50V2lkZ2V0SWQ6IGV2ZW50LmRldGFpbD8ud2lkZ2V0SWQsXG4gICAgICBtYXRjaGVzOiBldmVudC5kZXRhaWw/LndpZGdldElkID09PSBpZCxcbiAgICAgIGN1cnJlbnRTdGF0ZToge1xuICAgICAgICBzaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbjogdGhpcy5zdGF0ZS5zaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbixcbiAgICAgICAgaGFzSW5pdGlhbFF1ZXJ5VmFsdWU6ICEhdGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZSxcbiAgICAgICAgaW5pdGlhbFF1ZXJ5VmFsdWVTaG9ydElkOiB0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlPy5zaG9ydElkLFxuICAgICAgICBpbml0aWFsUXVlcnlWYWx1ZVZhbHVlOiB0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlPy52YWx1ZSxcbiAgICAgICAgY3VycmVudFVybEhhc2g6IHdpbmRvdy5sb2NhdGlvbi5oYXNoLnN1YnN0cmluZygxKSxcbiAgICAgIH0sXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuXG4gICAgLy8gV2l0aCBzdXJnaWNhbCBoYXNoIG1vZGlmaWNhdGlvbiwgdGhlIGhhc2ggYWxyZWFkeSBjb250YWlucyBvbmx5IGRlc2lyZWQgcmVjb3JkIElEc1xuICAgIC8vIE5vIG5lZWQgdG8gYmxvY2sgcHJvY2Vzc2luZyAtIHRoZSBoYXNoIGlzIG5vdyBhIHByZWNpc2UgcmVwcmVzZW50YXRpb24gb2Ygc2VsZWN0aW9uIGludGVudFxuXG4gICAgLy8gT25seSBwcm9jZXNzIGlmIHRoaXMgZXZlbnQgaXMgZm9yIG91ciB3aWRnZXRcbiAgICBpZiAoZXZlbnQuZGV0YWlsPy53aWRnZXRJZCAhPT0gaWQpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSC1FWEVDJywge1xuICAgICAgICBldmVudDogJ3F1ZXJ5c2ltcGxlLWhhbmRsZW9wZW53aWRnZXRldmVudC1pZ25vcmVkLXdyb25nLXdpZGdldCcsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgZXZlbnRXaWRnZXRJZDogZXZlbnQuZGV0YWlsPy53aWRnZXRJZCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIC8vIE5PVEU6IFdlIGRvbid0IGNoZWNrIHByb2Nlc3NlZCBoYXNoZXMgaGVyZSBhbnltb3JlXG4gICAgLy8gVGhlIGNoZWNrIGhhcHBlbnMgaW4gb25Jbml0aWFsVmFsdWVGb3VuZCBhZnRlciB3ZSBrbm93IHdoaWNoIHNob3J0SWQ6dmFsdWUgcGFpciBpcyBiZWluZyBwcm9jZXNzZWRcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gnLCB7XG4gICAgICBldmVudDogJ29wZW4td2lkZ2V0LWV2ZW50LXJlY2VpdmVkLWZyb20taGVscGVyc2ltcGxlJyxcbiAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgLy8gU2V0IGZsYWcgdG8gYWxsb3cgcXVlcnktdGFzay1saXN0IHRvIHVzZSBpbml0aWFsUXVlcnlWYWx1ZSBmb3Igc2VsZWN0aW9uXG4gICAgLy8gVGhpcyBlbnN1cmVzIHdlIG9ubHkgcmVhY3QgdG8gaGFzaCBwYXJhbWV0ZXJzIHdoZW4gSGVscGVyU2ltcGxlIGV4cGxpY2l0bHkgb3BlbnMgdXNcbiAgICAvLyBVc2luZyBzdGF0ZSBpbnN0ZWFkIG9mIHJlZiBlbnN1cmVzIFJlYWN0IHRyaWdnZXJzIHJlLXJlbmRlciBzbyBxdWVyeS10YXNrLWxpc3Qgc2VlcyB0aGUgY2hhbmdlXG4gICAgdGhpcy5zZXRTdGF0ZSh7IHNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uOiB0cnVlIH0sICgpID0+IHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSC1FWEVDJywge1xuICAgICAgICBldmVudDogJ3F1ZXJ5c2ltcGxlLWZsYWctc2V0LXRydWUtc3RhdGUtdXBkYXRlZCcsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgbmV3U3RhdGU6IHtcbiAgICAgICAgICBzaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbjogdGhpcy5zdGF0ZS5zaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbixcbiAgICAgICAgICBoYXNJbml0aWFsUXVlcnlWYWx1ZTogISF0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlLFxuICAgICAgICAgIGluaXRpYWxRdWVyeVZhbHVlU2hvcnRJZDogdGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZT8uc2hvcnRJZCxcbiAgICAgICAgICBpbml0aWFsUXVlcnlWYWx1ZVZhbHVlOiB0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlPy52YWx1ZVxuICAgICAgICB9LFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgfSlcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gnLCB7XG4gICAgICBldmVudDogJ3Nob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uLWZsYWctc2V0LXRydWUnLFxuICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgZmxhZ1ZhbHVlOiB0cnVlLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICAvLyBOb3cgY2hlY2sgVVJMIHBhcmFtZXRlcnMgLSBIZWxwZXJTaW1wbGUgaGFzIGV4cGxpY2l0bHkgb3BlbmVkIHVzXG4gICAgZGVidWdMb2dnZXIubG9nKCdIQVNILUVYRUMnLCB7XG4gICAgICBldmVudDogJ3F1ZXJ5c2ltcGxlLWNoZWNrdXJscGFyYW1ldGVycy1zdGFydGluZycsXG4gICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgIGN1cnJlbnRTdGF0ZToge1xuICAgICAgICBzaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbjogdGhpcy5zdGF0ZS5zaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbixcbiAgICAgICAgaGFzSW5pdGlhbFF1ZXJ5VmFsdWU6ICEhdGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZSxcbiAgICAgICAgaW5pdGlhbFF1ZXJ5VmFsdWVTaG9ydElkOiB0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlPy5zaG9ydElkLFxuICAgICAgICBpbml0aWFsUXVlcnlWYWx1ZVZhbHVlOiB0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlPy52YWx1ZVxuICAgICAgfSxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgdGhpcy51cmxDb25zdW1wdGlvbk1hbmFnZXIuY2hlY2tVcmxQYXJhbWV0ZXJzKFxuICAgICAgdGhpcy5wcm9wcyxcbiAgICAgIHRoaXMuc3RhdGUucmVzdWx0c01vZGUsXG4gICAgICB7XG4gICAgICAgIG9uSW5pdGlhbFZhbHVlRm91bmQ6ICh2YWx1ZSkgPT4ge1xuICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSC1FWEVDJywge1xuICAgICAgICAgICAgZXZlbnQ6ICdxdWVyeXNpbXBsZS1vbmluaXRpYWx2YWx1ZWZvdW5kLWNhbGxlZCcsXG4gICAgICAgICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgICAgICAgIGhhc1ZhbHVlOiAhIXZhbHVlLFxuICAgICAgICAgICAgdmFsdWVTaG9ydElkOiB2YWx1ZT8uc2hvcnRJZCxcbiAgICAgICAgICAgIHZhbHVlVmFsdWU6IHZhbHVlPy52YWx1ZSxcbiAgICAgICAgICAgIGN1cnJlbnRTdGF0ZToge1xuICAgICAgICAgICAgICBzaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbjogdGhpcy5zdGF0ZS5zaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbixcbiAgICAgICAgICAgICAgaGFzSW5pdGlhbFF1ZXJ5VmFsdWU6ICEhdGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZSxcbiAgICAgICAgICAgICAgaW5pdGlhbFF1ZXJ5VmFsdWVTaG9ydElkOiB0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlPy5zaG9ydElkLFxuICAgICAgICAgICAgICBpbml0aWFsUXVlcnlWYWx1ZVZhbHVlOiB0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlPy52YWx1ZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgIH0pXG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICAvLyBPbmx5IHVwZGF0ZSBpZiB0aGUgdmFsdWUgb3Igc2hvcnRJZCBoYXMgY2hhbmdlZCB0byBhdm9pZCB1bm5lY2Vzc2FyeSByZS1yZW5kZXJzXG4gICAgICAgICAgICBjb25zdCB3aWxsVXBkYXRlID0gdGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZT8uc2hvcnRJZCAhPT0gdmFsdWUuc2hvcnRJZCB8fCB0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlPy52YWx1ZSAhPT0gdmFsdWUudmFsdWVcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNILUVYRUMnLCB7XG4gICAgICAgICAgICAgIGV2ZW50OiAncXVlcnlzaW1wbGUtb25pbml0aWFsdmFsdWVmb3VuZC13aWxsLXVwZGF0ZScsXG4gICAgICAgICAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgICAgICAgICB3aWxsVXBkYXRlLFxuICAgICAgICAgICAgICBwcmV2aW91c1Nob3J0SWQ6IHRoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWU/LnNob3J0SWQsXG4gICAgICAgICAgICAgIHByZXZpb3VzVmFsdWU6IHRoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWU/LnZhbHVlLFxuICAgICAgICAgICAgICBuZXdTaG9ydElkOiB2YWx1ZS5zaG9ydElkLFxuICAgICAgICAgICAgICBuZXdWYWx1ZTogdmFsdWUudmFsdWUsXG4gICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHdpbGxVcGRhdGUpIHtcbiAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNIJywge1xuICAgICAgICAgICAgICAgIGV2ZW50OiAndXJsLXBhcmFtLWRldGVjdGVkJyxcbiAgICAgICAgICAgICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgICAgICAgICAgICBzaG9ydElkOiB2YWx1ZS5zaG9ydElkLFxuICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZS52YWx1ZSxcbiAgICAgICAgICAgICAgICBmb3VuZEluOiAnbWFuYWdlcicsXG4gICAgICAgICAgICAgICAgdHJpZ2dlcmVkQnk6ICdoZWxwZXJzaW1wbGUtb3Blbi13aWRnZXQtZXZlbnQnLFxuICAgICAgICAgICAgICAgIHByZXZpb3VzU2hvcnRJZDogdGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZT8uc2hvcnRJZCxcbiAgICAgICAgICAgICAgICBwcmV2aW91c1ZhbHVlOiB0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlPy52YWx1ZSxcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIFJlc2V0IHRvIE5ldyBtb2RlIHdoZW4gaGFzaCBwYXJhbWV0ZXIgaXMgZGV0ZWN0ZWQgdG8gYXZvaWQgYnVncyB3aXRoIGFjY3VtdWxhdGlvbiBtb2Rlc1xuICAgICAgICAgICAgICAvLyBVc2luZyBBY2N1bXVsYXRlZFJlY29yZHNNYW5hZ2VyIChyMDE4LjU4KVxuICAgICAgICAgICAgICBjb25zdCBuZWVkc01vZGVSZXNldCA9IHRoaXMuc3RhdGUucmVzdWx0c01vZGUgIT09IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uXG4gICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRNb2RlID0gdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gVXBkYXRlIGluaXRpYWxRdWVyeVZhbHVlIHN0YXRlXG4gICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBcbiAgICAgICAgICAgICAgICBpbml0aWFsUXVlcnlWYWx1ZTogeyBzaG9ydElkOiB2YWx1ZS5zaG9ydElkLCB2YWx1ZTogdmFsdWUudmFsdWUgfVxuICAgICAgICAgICAgICB9LCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNILUVYRUMnLCB7XG4gICAgICAgICAgICAgICAgICBldmVudDogJ3F1ZXJ5c2ltcGxlLWluaXRpYWxxdWVyeXZhbHVlLXN0YXRlLXVwZGF0ZWQnLFxuICAgICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICAgICAgICAgICAgICBuZXdTdGF0ZToge1xuICAgICAgICAgICAgICAgICAgICBzaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbjogdGhpcy5zdGF0ZS5zaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbixcbiAgICAgICAgICAgICAgICAgICAgaGFzSW5pdGlhbFF1ZXJ5VmFsdWU6ICEhdGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgaW5pdGlhbFF1ZXJ5VmFsdWVTaG9ydElkOiB0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlPy5zaG9ydElkLFxuICAgICAgICAgICAgICAgICAgICBpbml0aWFsUXVlcnlWYWx1ZVZhbHVlOiB0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlPy52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0c01vZGU6IHRoaXMuc3RhdGUucmVzdWx0c01vZGVcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAgIC8vIFJlc2V0IG1vZGUgdmlhIG1hbmFnZXIgaWYgbmVlZGVkXG4gICAgICAgICAgICAgIGlmIChuZWVkc01vZGVSZXNldCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc2V0UmVzdWx0ID0gdGhpcy5hY2N1bXVsYXRlZFJlY29yZHNNYW5hZ2VyLnJlc2V0TW9kZU9uSGFzaERldGVjdGlvbihcbiAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuaWQsXG4gICAgICAgICAgICAgICAgICBjdXJyZW50TW9kZVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgd2lkZ2V0IHN0YXRlIGZyb20gbWFuYWdlcidzIHJldHVybiB2YWx1ZVxuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgcmVzdWx0c01vZGU6IHJlc2V0UmVzdWx0LnJlc3VsdHNNb2RlLFxuICAgICAgICAgICAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzOiByZXNldFJlc3VsdC5hY2N1bXVsYXRlZFJlY29yZHNcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSC1FWEVDJywge1xuICAgICAgICAgICAgICBldmVudDogJ3F1ZXJ5c2ltcGxlLW9uaW5pdGlhbHZhbHVlZm91bmQtbm8tdmFsdWUtY2xlYXJpbmcnLFxuICAgICAgICAgICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgICAgICAgICAgaGFzQ3VycmVudEluaXRpYWxRdWVyeVZhbHVlOiAhIXRoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWUsXG4gICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC8vIE5vIG1hdGNoaW5nIHBhcmFtZXRlcnMgZm91bmQgLSBjbGVhciBzdGF0ZVxuICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWUpIHtcbiAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGluaXRpYWxRdWVyeVZhbHVlOiB1bmRlZmluZWQgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIG9uTW9kZVJlc2V0TmVlZGVkOiAoKSA9PiB7XG4gICAgICAgICAgLy8gUmVzZXQgdG8gTmV3IG1vZGUgd2hlbiBoYXNoIHBhcmFtZXRlciBpcyBkZXRlY3RlZFxuICAgICAgICAgIC8vIFVzaW5nIEFjY3VtdWxhdGVkUmVjb3Jkc01hbmFnZXIgKHIwMTguNTgpXG4gICAgICAgICAgY29uc3QgY3VycmVudE1vZGUgPSB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlXG4gICAgICAgICAgY29uc3QgbmVlZHNSZXNldCA9IGN1cnJlbnRNb2RlICE9PSBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvblxuICAgICAgICAgIFxuICAgICAgICAgIGlmIChuZWVkc1Jlc2V0KSB7XG4gICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gnLCB7XG4gICAgICAgICAgICAgIGV2ZW50OiAnbW9kZS1yZXNldC1uZWVkZWQtb24taGFzaC1kZXRlY3Rpb24nLFxuICAgICAgICAgICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgICAgICAgICAgY3VycmVudE1vZGUsXG4gICAgICAgICAgICAgIHRyaWdnZXJlZEJ5OiAnaGVscGVyc2ltcGxlLW9wZW4td2lkZ2V0LWV2ZW50JyxcbiAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCByZXNldFJlc3VsdCA9IHRoaXMuYWNjdW11bGF0ZWRSZWNvcmRzTWFuYWdlci5yZXNldE1vZGVPbkhhc2hEZXRlY3Rpb24oXG4gICAgICAgICAgICAgIHRoaXMucHJvcHMuaWQsXG4gICAgICAgICAgICAgIGN1cnJlbnRNb2RlXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFVwZGF0ZSB3aWRnZXQgc3RhdGUgZnJvbSBtYW5hZ2VyJ3MgcmV0dXJuIHZhbHVlXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgcmVzdWx0c01vZGU6IHJlc2V0UmVzdWx0LnJlc3VsdHNNb2RlLFxuICAgICAgICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHM6IHJlc2V0UmVzdWx0LmFjY3VtdWxhdGVkUmVjb3Jkc1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICApXG4gIH1cblxuICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAvLyBDaHVuayAxOiBNYW5hZ2VyIGltcGxlbWVudGF0aW9uIChyMDE4LjggLSBzd2l0Y2hlZCB0byBtYW5hZ2VyKVxuICAgIC8vIFNldHVwIG1hbmFnZXIgKG5vIGF1dG9ub21vdXMgVVJMIGNoZWNraW5nIC0gSGVscGVyU2ltcGxlIG9yY2hlc3RyYXRlcylcbiAgICAvLyBOT1RFOiBzZXR1cCgpIGlzIGEgbm8tb3AgLSBjYWxsYmFja3MgYXJlIG5ldmVyIGNhbGxlZFxuICAgIHRoaXMudXJsQ29uc3VtcHRpb25NYW5hZ2VyLnNldHVwKFxuICAgICAgdGhpcy5wcm9wcyxcbiAgICAgIHRoaXMuc3RhdGUucmVzdWx0c01vZGUsXG4gICAgICB7fSAvLyBFbXB0eSBjYWxsYmFja3MgLSBzZXR1cCgpIGlzIGEgbm8tb3BcbiAgICApXG4gICAgXG4gICAgLy8gTGlzdGVuIGZvciBIZWxwZXJTaW1wbGUncyBvcGVuIHdpZGdldCBldmVudFxuICAgIC8vIFF1ZXJ5U2ltcGxlIHNob3VsZCBvbmx5IHByb2Nlc3MgaGFzaCBwYXJhbWV0ZXJzIHdoZW4gSGVscGVyU2ltcGxlIGV4cGxpY2l0bHkgb3BlbnMgdGhlIHdpZGdldFxuICAgIC8vIFRoaXMgZW5zdXJlcyBIZWxwZXJTaW1wbGUgcmVtYWlucyB0aGUgb3JjaGVzdHJhdG9yXG4gICAgLy8gTm90ZTogRXZlbnQgbGlzdGVuZXIgc2V0dXAgbW92ZWQgdG8gcGFyYWxsZWwgZXhlY3V0aW9uIHNlY3Rpb24gYmVsb3cgKENodW5rIDcuMSlcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gtRVhFQycsIHtcbiAgICAgIGV2ZW50OiAncXVlcnlzaW1wbGUtbW91bnRlZC1ldmVudC1saXN0ZW5lci1zZXR1cCcsXG4gICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgIGN1cnJlbnRTdGF0ZToge1xuICAgICAgICBzaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbjogdGhpcy5zdGF0ZS5zaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbixcbiAgICAgICAgaGFzSW5pdGlhbFF1ZXJ5VmFsdWU6ICEhdGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZSxcbiAgICAgICAgaW5pdGlhbFF1ZXJ5VmFsdWVTaG9ydElkOiB0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlPy5zaG9ydElkLFxuICAgICAgICBpbml0aWFsUXVlcnlWYWx1ZVZhbHVlOiB0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlPy52YWx1ZVxuICAgICAgfSxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgLy8gQ2h1bmsgMjogTWFuYWdlciBpbXBsZW1lbnRhdGlvbiAocjAxOC4xMyAtIFN0ZXAgMi4zOiBTd2l0Y2ggdG8gbWFuYWdlcilcbiAgICBpZiAodGhpcy53aWRnZXRSZWYuY3VycmVudCkge1xuICAgICAgdGhpcy52aXNpYmlsaXR5TWFuYWdlci5zZXR1cChcbiAgICAgICAgdGhpcy53aWRnZXRSZWYuY3VycmVudCxcbiAgICAgICAgdGhpcy5wcm9wcyxcbiAgICAgICAge1xuICAgICAgICAgIG9uVmlzaWJpbGl0eUNoYW5nZTogKGlzVmlzaWJsZSkgPT4ge1xuICAgICAgICAgICAgLy8gVXBkYXRlIHN0YXRlXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgaXNQYW5lbFZpc2libGU6IGlzVmlzaWJsZSB9KVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBIYW5kbGUgcmVzdG9yYXRpb24gbG9naWNcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlVmlzaWJpbGl0eUNoYW5nZShpc1Zpc2libGUpXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICAoaXNWaXNpYmxlKSA9PiB7XG4gICAgICAgICAgLy8gTWFuYWdlcidzIGludGVybmFsIHN0YXRlIHRyYWNraW5nIGNhbGxiYWNrXG4gICAgICAgICAgLy8gKG5vLW9wLCByZXN0b3JhdGlvbiBoYW5kbGVkIGluIG9uVmlzaWJpbGl0eUNoYW5nZSlcbiAgICAgICAgfVxuICAgICAgKVxuICAgICAgXG4gICAgICAvLyBOb3RpZnkgbW91bnQgdmlhIG1hbmFnZXJcbiAgICAgIHRoaXMudmlzaWJpbGl0eU1hbmFnZXIubm90aWZ5TW91bnQodGhpcy5wcm9wcy5pZClcbiAgICB9XG5cbiAgICAvLyBDaHVuayA1OiBJbml0aWFsaXplIGFjY3VtdWxhdGVkIHJlY29yZHMgbWFuYWdlciBzdGF0ZSAocjAxOC4yNiAtIFN0ZXAgNS4xOiBBZGQgbWFuYWdlcilcbiAgICAvLyBTeW5jIG1hbmFnZXIgc3RhdGUgd2l0aCB3aWRnZXQgc3RhdGVcbiAgICBpZiAodGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSkge1xuICAgICAgdGhpcy5hY2N1bXVsYXRlZFJlY29yZHNNYW5hZ2VyLmhhbmRsZVJlc3VsdHNNb2RlQ2hhbmdlKFxuICAgICAgICB0aGlzLnByb3BzLmlkLFxuICAgICAgICB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlLFxuICAgICAgICBmYWxzZVxuICAgICAgKVxuICAgIH1cbiAgICBpZiAodGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHMgJiYgdGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgdGhpcy5hY2N1bXVsYXRlZFJlY29yZHNNYW5hZ2VyLmhhbmRsZUFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZShcbiAgICAgICAgdGhpcy5wcm9wcy5pZCxcbiAgICAgICAgdGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHNcbiAgICAgIClcbiAgICB9XG4gICAgXG4gICAgLy8gU2V0IHVwIGNhbGxiYWNrcyBmb3IgbWFuYWdlclxuICAgIC8vIFNldCB1cCBjYWxsYmFja3MgZm9yIG1hbmFnZXIgKHIwMTguNTcpXG4gICAgLy8gTm90ZTogUHJpbWFyeSBzdGF0ZSB1cGRhdGVzIGNvbWUgZnJvbSBtYW5hZ2VyIHJldHVybiB2YWx1ZXMgaW4gaGFuZGxlUmVzdWx0c01vZGVDaGFuZ2UvaGFuZGxlQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlXG4gICAgLy8gVGhlc2UgY2FsbGJhY2tzIHNlcnZlIGFzIGJhY2t1cC92ZXJpZmljYXRpb24gYnV0IHNob3VsZG4ndCBiZSBuZWVkZWQgc2luY2Ugd2UgdXBkYXRlIHN0YXRlIGRpcmVjdGx5IGZyb20gcmV0dXJuIHZhbHVlc1xuICAgIHRoaXMuYWNjdW11bGF0ZWRSZWNvcmRzTWFuYWdlci5zZXRDYWxsYmFja3Moe1xuICAgICAgb25Nb2RlQ2hhbmdlOiAobW9kZSkgPT4ge1xuICAgICAgICAvLyBTdGF0ZSBpcyB1cGRhdGVkIGZyb20gaGFuZGxlUmVzdWx0c01vZGVDaGFuZ2UgcmV0dXJuIHZhbHVlLCBzbyB0aGlzIGlzIGp1c3QgYSBiYWNrdXBcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUucmVzdWx0c01vZGUgIT09IG1vZGUpIHtcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgIGV2ZW50OiAnY2FsbGJhY2stb25Nb2RlQ2hhbmdlLXN0YXRlLXN5bmMnLFxuICAgICAgICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICAgICAgICBjYWxsYmFja01vZGU6IG1vZGUsXG4gICAgICAgICAgICBjdXJyZW50U3RhdGVNb2RlOiB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlLFxuICAgICAgICAgICAgbm90ZTogJ1N0YXRlIHNob3VsZCBhbHJlYWR5IGJlIHN5bmNlZCBmcm9tIHJldHVybiB2YWx1ZScsXG4gICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICB9KVxuICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyByZXN1bHRzTW9kZTogbW9kZSB9KVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2U6IChyZWNvcmRzKSA9PiB7XG4gICAgICAgIC8vIFN0YXRlIGlzIHVwZGF0ZWQgZnJvbSBoYW5kbGVBY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UsIHNvIHRoaXMgaXMganVzdCBhIGJhY2t1cFxuICAgICAgICBjb25zdCBjdXJyZW50Q291bnQgPSB0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDBcbiAgICAgICAgaWYgKGN1cnJlbnRDb3VudCAhPT0gcmVjb3Jkcy5sZW5ndGgpIHtcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgIGV2ZW50OiAnY2FsbGJhY2stb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2Utc3RhdGUtc3luYycsXG4gICAgICAgICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgICAgICAgIGNhbGxiYWNrQ291bnQ6IHJlY29yZHMubGVuZ3RoLFxuICAgICAgICAgICAgY3VycmVudFN0YXRlQ291bnQ6IGN1cnJlbnRDb3VudCxcbiAgICAgICAgICAgIG5vdGU6ICdTdGF0ZSBzaG91bGQgYWxyZWFkeSBiZSBzeW5jZWQgZnJvbSBkaXJlY3QgdXBkYXRlJyxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgIH0pXG4gICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGFjY3VtdWxhdGVkUmVjb3JkczogcmVjb3JkcyB9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgICBcbiAgICAvLyBDaHVuayA3OiBFdmVudCBoYW5kbGluZyAocjAxOC41OSAtIFN0ZXAgNy4xOiBBZGQgbWFuYWdlcilcbiAgICB0aGlzLmV2ZW50TWFuYWdlci5zZXRIYW5kbGVycyh7XG4gICAgICBvbk9wZW5XaWRnZXRFdmVudDogdGhpcy5oYW5kbGVPcGVuV2lkZ2V0RXZlbnQsXG4gICAgICAvLyBDaHVuayAzOiBTZWN0aW9uIDMuMSBTdGVwIDMuMS41IChyMDE5LjUpOiBTd2l0Y2ggdG8gbWFuYWdlciBpbXBsZW1lbnRhdGlvblxuICAgICAgb25TZWxlY3Rpb25DaGFuZ2U6IChldmVudCkgPT4gdGhpcy5zZWxlY3Rpb25SZXN0b3JhdGlvbk1hbmFnZXIuaGFuZGxlU2VsZWN0aW9uQ2hhbmdlKGV2ZW50KSxcbiAgICAgIG9uUmVzdG9yZU9uSWRlbnRpZnlDbG9zZTogdGhpcy5oYW5kbGVSZXN0b3JlT25JZGVudGlmeUNsb3NlXG4gICAgfSlcbiAgICBcbiAgICB0aGlzLmV2ZW50TWFuYWdlci5zZXR1cCh0aGlzLnByb3BzLmlkKVxuICAgIFxuICAgIC8vIENodW5rIDM6IFNlbGVjdGlvbiAmIFJlc3RvcmF0aW9uIE1hbmFnZXIgKHIwMTkuMikgLSBTZWN0aW9uIDMuMTogSW5pdGlhbGl6ZSB3aWRnZXRJZFxuICAgIHRoaXMuc2VsZWN0aW9uUmVzdG9yYXRpb25NYW5hZ2VyLnNldFdpZGdldElkKHRoaXMucHJvcHMuaWQpXG4gICAgXG4gICAgLy8gR3JhcGhpY3MgbGF5ZXIgd2lsbCBiZSBpbml0aWFsaXplZCB3aGVuIG1hcCB2aWV3IGJlY29tZXMgYXZhaWxhYmxlIHZpYSBKaW11TWFwVmlld0NvbXBvbmVudFxuICB9XG5cbiAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgLy8gQ2h1bmsgMTogQ2xlYW4gdXAgbWFuYWdlciAocjAxOC44KVxuICAgIHRoaXMudXJsQ29uc3VtcHRpb25NYW5hZ2VyLmNsZWFudXAoKVxuICAgIFxuICAgIC8vIENodW5rIDc6IEV2ZW50IGhhbmRsaW5nIGNsZWFudXAgKHIwMTguNTkgLSBTdGVwIDcuMTogQWRkIG1hbmFnZXIpXG4gICAgdGhpcy5ldmVudE1hbmFnZXIuY2xlYW51cCh0aGlzLnByb3BzLmlkKVxuICAgIFxuICAgIC8vIENodW5rIDI6IENsZWFuIHVwIG1hbmFnZXIgKHIwMTguMTMgLSBTdGVwIDIuMzogU3dpdGNoIHRvIG1hbmFnZXIpXG4gICAgdGhpcy52aXNpYmlsaXR5TWFuYWdlci5jbGVhbnVwKClcbiAgICB0aGlzLnZpc2liaWxpdHlNYW5hZ2VyLm5vdGlmeVVubW91bnQodGhpcy5wcm9wcy5pZClcbiAgICBcbiAgICAvLyBDaHVuayA0OiBHcmFwaGljcyBsYXllciBjbGVhbnVwIChyMDE4LjI1IC0gU3RlcCA0LjM6IFJlbW92ZSBvbGQgaW1wbGVtZW50YXRpb24pXG4gICAgdGhpcy5ncmFwaGljc0xheWVyTWFuYWdlci5jbGVhbnVwKHRoaXMucHJvcHMuaWQpXG4gICAgXG4gICAgLy8gQ2h1bmsgNTogQ2xlYW4gdXAgYWNjdW11bGF0ZWQgcmVjb3JkcyBtYW5hZ2VyIChyMDE4LjI2IC0gU3RlcCA1LjE6IEFkZCBtYW5hZ2VyKVxuICAgIHRoaXMuYWNjdW11bGF0ZWRSZWNvcmRzTWFuYWdlci5jbGVhbnVwKClcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1dJREdFVC1TVEFURScsIHtcbiAgICAgIGV2ZW50OiAnd2lkZ2V0LWNsb3NlZCcsXG4gICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgIGlzT3BlbjogZmFsc2UsXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgIH0pXG4gIH1cblxuICBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzOiBBbGxXaWRnZXRQcm9wczxJTUNvbmZpZz4pIHtcbiAgICAvLyBRdWVyeVNpbXBsZSBubyBsb25nZXIgYXV0b25vbW91c2x5IGNoZWNrcyBVUkwgcGFyYW1ldGVyc1xuICAgIC8vIE9ubHkgSGVscGVyU2ltcGxlIGNhbiB0cmlnZ2VyIGhhc2ggcGFyYW1ldGVyIHByb2Nlc3NpbmcgdmlhIE9QRU5fV0lER0VUX0VWRU5UXG4gICAgLy8gVGhpcyBlbnN1cmVzIEhlbHBlclNpbXBsZSByZW1haW5zIHRoZSBvcmNoZXN0cmF0b3JcbiAgICBcbiAgICAvLyBDaHVuayA0OiBHcmFwaGljcyBsYXllciBpcyBub3cgcmVxdWlyZWQgKHIwMTguMjUgLSBTdGVwIDQuMzogUmVtb3ZlIGNvbmZpZyBjaGFuZ2UgaGFuZGxpbmcpXG4gICAgLy8gTm8gbmVlZCB0byBoYW5kbGUgY29uZmlnIGNoYW5nZXMgZm9yIGdyYXBoaWNzIGxheWVyIHNpbmNlIGl0J3MgYWx3YXlzIGVuYWJsZWRcbiAgfVxuXG4gIC8qKlxuICAgKiBOb3RpZmllcyBIZWxwZXJTaW1wbGUgd2lkZ2V0IG9mIHNlbGVjdGlvbiBjaGFuZ2VzIHZpYSBjdXN0b20gZXZlbnQuXG4gICAqIFxuICAgKiBUaGlzIG1ldGhvZCBkaXNwYXRjaGVzIGEgY3VzdG9tIGV2ZW50IHRoYXQgSGVscGVyU2ltcGxlIGxpc3RlbnMgdG8gZm9yIHRyYWNraW5nXG4gICAqIHNlbGVjdGlvbiBzdGF0ZS4gQ2FsbGVkIGJ5IFF1ZXJ5VGFza1Jlc3VsdCBjb21wb25lbnQgd2hlbiB1c2VyIHNlbGVjdHMgcmVjb3Jkcy5cbiAgICogXG4gICAqIEBwYXJhbSByZWNvcmRJZHMgLSBBcnJheSBvZiBzZWxlY3RlZCByZWNvcmQgSURzIChvYmplY3RJZHMgZnJvbSB0aGUgZmVhdHVyZSBsYXllcilcbiAgICogQHBhcmFtIGRhdGFTb3VyY2VJZCAtIE9wdGlvbmFsIGRhdGEgc291cmNlIElEIGZvciB0aGUgc2VsZWN0ZWQgcmVjb3Jkc1xuICAgKiBcbiAgICogQHNpbmNlIDEuMTkuMC1yMDE3LjBcbiAgICovXG4gIG5vdGlmeUhlbHBlclNpbXBsZU9mU2VsZWN0aW9uID0gKHJlY29yZElkczogc3RyaW5nW10sIGRhdGFTb3VyY2VJZD86IHN0cmluZykgPT4ge1xuICAgIGNvbnN0IHsgaWQgfSA9IHRoaXMucHJvcHNcbiAgICBcbiAgICAvLyBDaHVuayA3OiBEaXNwYXRjaCBzZWxlY3Rpb24gZXZlbnQgdmlhIEV2ZW50TWFuYWdlciAocjAxOC41OSlcbiAgICAvLyBOb3RlOiBUaGlzIGNhbGwgaXMgbWlzc2luZyBvdXRwdXREc0lkIGFuZCBxdWVyeUl0ZW1Db25maWdJZCwgYnV0IHRoaXMgbWV0aG9kXG4gICAgLy8gaXMgb25seSB1c2VkIGZvciBub3RpZnlpbmcgSGVscGVyU2ltcGxlLCBub3QgZm9yIHNldHRpbmcgbGFzdFNlbGVjdGlvbiBzdGF0ZS5cbiAgICAvLyBUaGUgYWN0dWFsIHNlbGVjdGlvbiBldmVudHMgY29tZSBmcm9tIHF1ZXJ5LXRhc2sudHN4IGFuZCBxdWVyeS1yZXN1bHQudHN4XG4gICAgLy8gd2hpY2ggdXNlIGRpc3BhdGNoU2VsZWN0aW9uRXZlbnQgZnJvbSBzZWxlY3Rpb24tdXRpbHMudHNcbiAgICB0aGlzLmV2ZW50TWFuYWdlci5kaXNwYXRjaFNlbGVjdGlvbkV2ZW50KGlkLCByZWNvcmRJZHMsIGRhdGFTb3VyY2VJZClcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIHdpZGdldCBwYW5lbCB2aXNpYmlsaXR5IGNoYW5nZXMgZnJvbSBXaWRnZXRWaXNpYmlsaXR5TWFuYWdlci5cbiAgICogXG4gICAqIFRoaXMgbWV0aG9kIGltcGxlbWVudHMgdGhlIHNlbGVjdGlvbiByZXN0b3JhdGlvbiBwYXR0ZXJuOlxuICAgKiAtIFdoZW4gcGFuZWwgb3BlbnM6IFJlc3RvcmVzIHNlbGVjdGlvbiB0byBtYXAgaWYgd2lkZ2V0IGhhcyBhY2N1bXVsYXRlZCByZWNvcmRzIG9yIGxhc3Qgc2VsZWN0aW9uXG4gICAqIC0gV2hlbiBwYW5lbCBjbG9zZXM6IENsZWFycyBzZWxlY3Rpb24gZnJvbSBtYXAgKGJ1dCBwcmVzZXJ2ZXMgd2lkZ2V0IHN0YXRlIGZvciByZXN0b3JhdGlvbilcbiAgICogXG4gICAqIFRoZSByZXN0b3JhdGlvbiBsb2dpYyByZXNwZWN0cyB0aGUgY3VycmVudCByZXN1bHRzIG1vZGU6XG4gICAqIC0gXCJBZGQgdG9cIiAvIFwiUmVtb3ZlIGZyb21cIiBtb2RlczogVXNlcyBhY2N1bXVsYXRlZCByZWNvcmRzIGZvciByZXN0b3JhdGlvblxuICAgKiAtIFwiTmV3XCIgbW9kZTogVXNlcyBsYXN0U2VsZWN0aW9uIHN0YXRlIGZvciByZXN0b3JhdGlvblxuICAgKiBcbiAgICogQHBhcmFtIGlzVmlzaWJsZSAtIFRydWUgaWYgd2lkZ2V0IHBhbmVsIGlzIHZpc2libGUsIGZhbHNlIGlmIGhpZGRlblxuICAgKiBcbiAgICogQHNpbmNlIDEuMTkuMC1yMDE4LjEzIChDaHVuayAyOiBNYW5hZ2VyIGltcGxlbWVudGF0aW9uKVxuICAgKiBAc2VlIHtAbGluayBXaWRnZXRWaXNpYmlsaXR5TWFuYWdlcn0gZm9yIHZpc2liaWxpdHkgZGV0ZWN0aW9uIGltcGxlbWVudGF0aW9uXG4gICAqL1xuICBoYW5kbGVWaXNpYmlsaXR5Q2hhbmdlID0gKGlzVmlzaWJsZTogYm9vbGVhbikgPT4ge1xuICAgIGlmIChpc1Zpc2libGUpIHtcbiAgICAgIC8vIFdoZW4gcGFuZWwgb3BlbnMsIGNoZWNrIGlmIHdlIGhhdmUgc2VsZWN0aW9uIHRvIHJlc3RvcmVcbiAgICAgIGNvbnN0IGlzQWNjdW11bGF0aW9uTW9kZSA9IHRoaXMuc3RhdGUucmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb24gfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb25cbiAgICAgIGNvbnN0IGhhc0FjY3VtdWxhdGVkUmVjb3JkcyA9IHRoaXMuc3RhdGUuYWNjdW11bGF0ZWRSZWNvcmRzICYmIHRoaXMuc3RhdGUuYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDBcbiAgICAgIGNvbnN0IGhhc1NlbGVjdGlvblN0YXRlID0gdGhpcy5zdGF0ZS5oYXNTZWxlY3Rpb24gfHwgZmFsc2VcbiAgICAgIGNvbnN0IGhhc1NlbGVjdGlvblRvUmVzdG9yZSA9IGlzQWNjdW11bGF0aW9uTW9kZSBcbiAgICAgICAgPyBoYXNBY2N1bXVsYXRlZFJlY29yZHMgXG4gICAgICAgIDogaGFzU2VsZWN0aW9uU3RhdGVcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ3BhbmVsLW9wZW5lZC1jaGVja2luZy1zZWxlY3Rpb24nLFxuICAgICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgICAgcmVzdWx0c01vZGU6IHRoaXMuc3RhdGUucmVzdWx0c01vZGUsXG4gICAgICAgIGlzQWNjdW11bGF0aW9uTW9kZSxcbiAgICAgICAgaGFzU2VsZWN0aW9uOiBoYXNTZWxlY3Rpb25TdGF0ZSxcbiAgICAgICAgaGFzQWNjdW11bGF0ZWRSZWNvcmRzLFxuICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogdGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICBzZWxlY3Rpb25SZWNvcmRDb3VudDogdGhpcy5zdGF0ZS5zZWxlY3Rpb25SZWNvcmRDb3VudCB8fCAwLFxuICAgICAgICBoYXNMYXN0U2VsZWN0aW9uOiAhIXRoaXMuc3RhdGUubGFzdFNlbGVjdGlvbixcbiAgICAgICAgbGFzdFNlbGVjdGlvblJlY29yZENvdW50OiB0aGlzLnN0YXRlLmxhc3RTZWxlY3Rpb24/LnJlY29yZElkcy5sZW5ndGggfHwgMCxcbiAgICAgICAgaGFzU2VsZWN0aW9uVG9SZXN0b3JlLFxuICAgICAgICBkZWNpc2lvbkxvZ2ljOiB7XG4gICAgICAgICAgJ2lzQWNjdW11bGF0aW9uTW9kZSc6IGlzQWNjdW11bGF0aW9uTW9kZSxcbiAgICAgICAgICAnaGFzQWNjdW11bGF0ZWRSZWNvcmRzJzogaGFzQWNjdW11bGF0ZWRSZWNvcmRzLFxuICAgICAgICAgICdoYXNTZWxlY3Rpb25TdGF0ZSc6IGhhc1NlbGVjdGlvblN0YXRlLFxuICAgICAgICAgICdjYWxjdWxhdGVkLWhhc1NlbGVjdGlvblRvUmVzdG9yZSc6IGhhc1NlbGVjdGlvblRvUmVzdG9yZSxcbiAgICAgICAgICAnd2lsbC1jYWxsLWFkZFNlbGVjdGlvblRvTWFwJzogaGFzU2VsZWN0aW9uVG9SZXN0b3JlXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICBcbiAgICAgIC8vIEFkZCBzZWxlY3Rpb24gdG8gbWFwIGlmIHdlIGhhdmUgb25lXG4gICAgICBpZiAoaGFzU2VsZWN0aW9uVG9SZXN0b3JlKSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgICBldmVudDogJ3BhbmVsLW9wZW5lZC1jYWxsaW5nLWFkZFNlbGVjdGlvblRvTWFwJyxcbiAgICAgICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgICAgICByZWFzb246ICdoYXNTZWxlY3Rpb25Ub1Jlc3RvcmUtaXMtdHJ1ZSdcbiAgICAgICAgfSlcbiAgICAgICAgOyhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgY29uc3QgZGVwcyA9IHtcbiAgICAgICAgICAgIGdyYXBoaWNzTGF5ZXJSZWY6IHRoaXMuZ3JhcGhpY3NMYXllclJlZixcbiAgICAgICAgICAgIG1hcFZpZXdSZWY6IHRoaXMubWFwVmlld1JlZixcbiAgICAgICAgICAgIGdyYXBoaWNzTGF5ZXJNYW5hZ2VyOiB0aGlzLmdyYXBoaWNzTGF5ZXJNYW5hZ2VyLFxuICAgICAgICAgICAgY29uZmlnOiB0aGlzLnByb3BzLmNvbmZpZ1xuICAgICAgICAgIH1cbiAgICAgICAgICBhd2FpdCB0aGlzLnNlbGVjdGlvblJlc3RvcmF0aW9uTWFuYWdlci5hZGRTZWxlY3Rpb25Ub01hcChkZXBzKVxuICAgICAgICB9KSgpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgICAgZXZlbnQ6ICdwYW5lbC1vcGVuZWQtc2tpcHBpbmctYWRkU2VsZWN0aW9uVG9NYXAnLFxuICAgICAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgICAgIHJlYXNvbjogJ2hhc1NlbGVjdGlvblRvUmVzdG9yZS1pcy1mYWxzZScsXG4gICAgICAgICAgd2h5OiBpc0FjY3VtdWxhdGlvbk1vZGUgXG4gICAgICAgICAgICA/ICduby1hY2N1bXVsYXRlZC1yZWNvcmRzJyBcbiAgICAgICAgICAgIDogJ25vLWhhc1NlbGVjdGlvbi1zdGF0ZSdcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gV2hlbiBwYW5lbCBjbG9zZXMsIGNsZWFyIHNlbGVjdGlvbiBmcm9tIG1hcCBvbmx5IChrZWVwIHdpZGdldCBzdGF0ZSlcbiAgICAgIGNvbnN0IGlzQWNjdW11bGF0aW9uTW9kZSA9IHRoaXMuc3RhdGUucmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb24gfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb25cbiAgICAgIGNvbnN0IGhhc0FjY3VtdWxhdGVkUmVjb3JkcyA9IHRoaXMuc3RhdGUuYWNjdW11bGF0ZWRSZWNvcmRzICYmIHRoaXMuc3RhdGUuYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDBcbiAgICAgIGNvbnN0IGhhc1NlbGVjdGlvblN0YXRlID0gdGhpcy5zdGF0ZS5oYXNTZWxlY3Rpb24gfHwgZmFsc2VcbiAgICAgIGNvbnN0IGhhc1NlbGVjdGlvblRvQ2xlYXIgPSBpc0FjY3VtdWxhdGlvbk1vZGUgXG4gICAgICAgID8gaGFzQWNjdW11bGF0ZWRSZWNvcmRzIFxuICAgICAgICA6IGhhc1NlbGVjdGlvblN0YXRlXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgZXZlbnQ6ICdwYW5lbC1jbG9zZWQtY2hlY2tpbmctc2VsZWN0aW9uJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICAgIHJlc3VsdHNNb2RlOiB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlLFxuICAgICAgICBpc0FjY3VtdWxhdGlvbk1vZGUsXG4gICAgICAgIGhhc1NlbGVjdGlvbjogaGFzU2VsZWN0aW9uU3RhdGUsXG4gICAgICAgIGhhc0FjY3VtdWxhdGVkUmVjb3JkcyxcbiAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IHRoaXMuc3RhdGUuYWNjdW11bGF0ZWRSZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgc2VsZWN0aW9uUmVjb3JkQ291bnQ6IHRoaXMuc3RhdGUuc2VsZWN0aW9uUmVjb3JkQ291bnQgfHwgMCxcbiAgICAgICAgaGFzTGFzdFNlbGVjdGlvbjogISF0aGlzLnN0YXRlLmxhc3RTZWxlY3Rpb24sXG4gICAgICAgIGxhc3RTZWxlY3Rpb25SZWNvcmRDb3VudDogdGhpcy5zdGF0ZS5sYXN0U2VsZWN0aW9uPy5yZWNvcmRJZHMubGVuZ3RoIHx8IDAsXG4gICAgICAgIGhhc1NlbGVjdGlvblRvQ2xlYXIsXG4gICAgICAgIGRlY2lzaW9uTG9naWM6IHtcbiAgICAgICAgICAnaXNBY2N1bXVsYXRpb25Nb2RlJzogaXNBY2N1bXVsYXRpb25Nb2RlLFxuICAgICAgICAgICdoYXNBY2N1bXVsYXRlZFJlY29yZHMnOiBoYXNBY2N1bXVsYXRlZFJlY29yZHMsXG4gICAgICAgICAgJ2hhc1NlbGVjdGlvblN0YXRlJzogaGFzU2VsZWN0aW9uU3RhdGUsXG4gICAgICAgICAgJ2NhbGN1bGF0ZWQtaGFzU2VsZWN0aW9uVG9DbGVhcic6IGhhc1NlbGVjdGlvblRvQ2xlYXIsXG4gICAgICAgICAgJ3dpbGwtY2FsbC1jbGVhclNlbGVjdGlvbkZyb21NYXAnOiBoYXNTZWxlY3Rpb25Ub0NsZWFyXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGlmIChoYXNTZWxlY3Rpb25Ub0NsZWFyKSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgICBldmVudDogJ3BhbmVsLWNsb3NlZC1jYWxsaW5nLWNsZWFyU2VsZWN0aW9uRnJvbU1hcCcsXG4gICAgICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICAgICAgcmVhc29uOiAnaGFzU2VsZWN0aW9uVG9DbGVhci1pcy10cnVlJ1xuICAgICAgICB9KVxuICAgICAgICA7KGFzeW5jICgpID0+IHtcbiAgICAgICAgICBjb25zdCBkZXBzID0ge1xuICAgICAgICAgICAgZ3JhcGhpY3NMYXllclJlZjogdGhpcy5ncmFwaGljc0xheWVyUmVmLFxuICAgICAgICAgICAgbWFwVmlld1JlZjogdGhpcy5tYXBWaWV3UmVmLFxuICAgICAgICAgICAgZ3JhcGhpY3NMYXllck1hbmFnZXI6IHRoaXMuZ3JhcGhpY3NMYXllck1hbmFnZXIsXG4gICAgICAgICAgICBjb25maWc6IHRoaXMucHJvcHMuY29uZmlnXG4gICAgICAgICAgfVxuICAgICAgICAgIGF3YWl0IHRoaXMuc2VsZWN0aW9uUmVzdG9yYXRpb25NYW5hZ2VyLmNsZWFyU2VsZWN0aW9uRnJvbU1hcChkZXBzKVxuICAgICAgICB9KSgpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgICAgZXZlbnQ6ICdwYW5lbC1jbG9zZWQtbm8tc2VsZWN0aW9uLXRvLWNsZWFyJyxcbiAgICAgICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgICAgICByZWFzb246ICdoYXNTZWxlY3Rpb25Ub0NsZWFyLWlzLWZhbHNlJyxcbiAgICAgICAgICB3aHk6IGlzQWNjdW11bGF0aW9uTW9kZSBcbiAgICAgICAgICAgID8gJ25vLWFjY3VtdWxhdGVkLXJlY29yZHMnIFxuICAgICAgICAgICAgOiAnbm8taGFzU2VsZWN0aW9uLXN0YXRlJ1xuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIG1hcCB2aWV3IGNoYW5nZSBmcm9tIEppbXVNYXBWaWV3Q29tcG9uZW50LlxuICAgKiBcbiAgICogVGhpcyBtZXRob2QgaXMgY2FsbGVkIGJ5IEppbXVNYXBWaWV3Q29tcG9uZW50IHdoZW4gdGhlIG1hcCB2aWV3IGJlY29tZXMgYXZhaWxhYmxlXG4gICAqIG9yIGNoYW5nZXMuIEl0IGRlbGVnYXRlcyB0byBNYXBWaWV3TWFuYWdlciBmb3IgcmVmZXJlbmNlIG1hbmFnZW1lbnQgYW5kIGluaXRpYWxpemVzXG4gICAqIHRoZSBncmFwaGljcyBsYXllciBpZiBlbmFibGVkIGluIHdpZGdldCBjb25maWd1cmF0aW9uLlxuICAgKiBcbiAgICogQHBhcmFtIGppbXVNYXBWaWV3IC0gVGhlIEppbXVNYXBWaWV3IGluc3RhbmNlIGZyb20gSmltdU1hcFZpZXdDb21wb25lbnQsIG9yIG51bGwgaWYgdW5hdmFpbGFibGVcbiAgICogXG4gICAqIEBzaW5jZSAxLjE5LjAtcjAxOC4xOCAoQ2h1bmsgNjogTWFuYWdlciBpbXBsZW1lbnRhdGlvbilcbiAgICogQHNlZSB7QGxpbmsgTWFwVmlld01hbmFnZXJ9IGZvciBtYXAgdmlldyByZWZlcmVuY2UgbWFuYWdlbWVudFxuICAgKi9cbiAgcHJpdmF0ZSBoYW5kbGVKaW11TWFwVmlld0NoYW5nZWQgPSAoamltdU1hcFZpZXc6IEppbXVNYXBWaWV3IHwgbnVsbCkgPT4ge1xuICAgIGNvbnN0IHsgaWQsIGNvbmZpZyB9ID0gdGhpcy5wcm9wc1xuICAgIFxuICAgIC8vIE1hbmFnZXIgaW1wbGVtZW50YXRpb24gKHIwMTguMTYgLSBTdGVwIDYuMzogU3dpdGNoIHRvIG1hbmFnZXIpXG4gICAgdGhpcy5tYXBWaWV3TWFuYWdlci5oYW5kbGVKaW11TWFwVmlld0NoYW5nZWQoXG4gICAgICBqaW11TWFwVmlldyxcbiAgICAgIHRoaXMucHJvcHMsXG4gICAgICB7XG4gICAgICAgIG9uTWFwVmlld0NoYW5nZTogKG5ld0ppbXVNYXBWaWV3KSA9PiB7XG4gICAgICAgICAgLy8gR2V0IG1hcCB2aWV3IGZyb20gbWFuYWdlclxuICAgICAgICAgIGNvbnN0IG5ld01hcFZpZXcgPSB0aGlzLm1hcFZpZXdNYW5hZ2VyLmdldE1hcFZpZXcoKVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIENodW5rIDQ6IEdyYXBoaWNzIGxheWVyIGluaXRpYWxpemF0aW9uIChyMDE4LjI1IC0gU3RlcCA0LjM6IFJlbW92ZSBvbGQgaW1wbGVtZW50YXRpb24pXG4gICAgICAgICAgLy8gSW5pdGlhbGl6ZSBncmFwaGljcyBsYXllciBpZiBtYXAgdmlldyBpcyBhdmFpbGFibGUgYW5kIGdyYXBoaWNzIGxheWVyIHNob3VsZCBiZSBpbml0aWFsaXplZFxuICAgICAgICAgIGlmICh0aGlzLmdyYXBoaWNzTGF5ZXJNYW5hZ2VyLnNob3VsZEluaXRpYWxpemUoY29uZmlnLCBuZXdNYXBWaWV3KSAmJiBuZXdNYXBWaWV3KSB7XG4gICAgICAgICAgICAvLyBVc2Ugdm9pZCB0byBoYW5kbGUgcHJvbWlzZSB3aXRob3V0IGJsb2NraW5nXG4gICAgICAgICAgICB2b2lkIHRoaXMuZ3JhcGhpY3NMYXllck1hbmFnZXIuaW5pdGlhbGl6ZShpZCwgbmV3TWFwVmlldywge1xuICAgICAgICAgICAgICBvbkdyYXBoaWNzTGF5ZXJJbml0aWFsaXplZDogKGdyYXBoaWNzTGF5ZXIpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgc3RhdGUgdG8gZm9yY2UgcmUtcmVuZGVyIGFuZCB1cGRhdGUgcHJvcHNcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgZ3JhcGhpY3NMYXllckluaXRpYWxpemVkOiB0cnVlIH0pXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgKVxuICB9XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemVzIGdyYXBoaWNzIGxheWVyIGxhemlseSB3aGVuIG91dHB1dCBkYXRhIHNvdXJjZSBiZWNvbWVzIGF2YWlsYWJsZS5cbiAgICogXG4gICAqIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCBieSBRdWVyeVRhc2sgY29tcG9uZW50IHdoZW4gYW4gb3V0cHV0IGRhdGEgc291cmNlIGlzIGNyZWF0ZWQuXG4gICAqIEl0IHJldHJpZXZlcyB0aGUgbWFwIHZpZXcgZnJvbSBNYXBWaWV3TWFuYWdlciBhbmQgaW5pdGlhbGl6ZXMgdGhlIGdyYXBoaWNzIGxheWVyXG4gICAqIHVzaW5nIEdyYXBoaWNzTGF5ZXJNYW5hZ2VyIGlmIG5vdCBhbHJlYWR5IGluaXRpYWxpemVkLlxuICAgKiBcbiAgICogQHBhcmFtIG91dHB1dERTIC0gVGhlIG91dHB1dCBkYXRhIHNvdXJjZSB0aGF0IHdhcyBjcmVhdGVkXG4gICAqIFxuICAgKiBAc2luY2UgMS4xOS4wLXIwMTcuMFxuICAgKiBAc2VlIHtAbGluayBHcmFwaGljc0xheWVyTWFuYWdlci5pbml0aWFsaXplRnJvbU91dHB1dERTfSBmb3IgZ3JhcGhpY3MgbGF5ZXIgaW5pdGlhbGl6YXRpb25cbiAgICogQHNlZSB7QGxpbmsgTWFwVmlld01hbmFnZXIuZ2V0TWFwVmlld30gZm9yIG1hcCB2aWV3IHJldHJpZXZhbFxuICAgKi9cblxuICAvKipcbiAgICogSW5pdGlhbGl6ZXMgZ3JhcGhpY3MgbGF5ZXIgbGF6aWx5IHdoZW4gb3V0cHV0IGRhdGEgc291cmNlIGJlY29tZXMgYXZhaWxhYmxlLlxuICAgKiBcbiAgICogVGhpcyBtZXRob2QgaXMgY2FsbGVkIGJ5IFF1ZXJ5VGFzayBjb21wb25lbnQgd2hlbiBhbiBvdXRwdXQgZGF0YSBzb3VyY2UgaXMgY3JlYXRlZC5cbiAgICogSXQgcmV0cmlldmVzIHRoZSBtYXAgdmlldyBmcm9tIE1hcFZpZXdNYW5hZ2VyIGFuZCBpbml0aWFsaXplcyB0aGUgZ3JhcGhpY3MgbGF5ZXJcbiAgICogdXNpbmcgR3JhcGhpY3NMYXllck1hbmFnZXIgaWYgbm90IGFscmVhZHkgaW5pdGlhbGl6ZWQuXG4gICAqIFxuICAgKiBAcGFyYW0gb3V0cHV0RFMgLSBUaGUgb3V0cHV0IGRhdGEgc291cmNlIHRoYXQgd2FzIGNyZWF0ZWRcbiAgICogXG4gICAqIEBzaW5jZSAxLjE5LjAtcjAxNy4wXG4gICAqIEBzZWUge0BsaW5rIEdyYXBoaWNzTGF5ZXJNYW5hZ2VyLmluaXRpYWxpemVGcm9tT3V0cHV0RFN9IGZvciBncmFwaGljcyBsYXllciBpbml0aWFsaXphdGlvblxuICAgKiBAc2VlIHtAbGluayBNYXBWaWV3TWFuYWdlci5nZXRNYXBWaWV3fSBmb3IgbWFwIHZpZXcgcmV0cmlldmFsXG4gICAqL1xuICBwdWJsaWMgaW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXJGcm9tT3V0cHV0RFMgPSBhc3luYyAob3V0cHV0RFM6IERhdGFTb3VyY2UpID0+IHtcbiAgICBjb25zdCB7IGlkLCBjb25maWcgfSA9IHRoaXMucHJvcHNcbiAgICBcbiAgICAvLyBDaHVuayA0OiBHcmFwaGljcyBsYXllciBpbml0aWFsaXphdGlvbiAocjAxOC4yNSAtIFN0ZXAgNC4zOiBSZW1vdmUgb2xkIGltcGxlbWVudGF0aW9uKVxuICAgIC8vIFVzZSBtYXAgdmlldyBmcm9tIG1hbmFnZXIgaWYgYXZhaWxhYmxlXG4gICAgY29uc3QgbWFwVmlldyA9IHRoaXMubWFwVmlld01hbmFnZXIuZ2V0TWFwVmlldygpIHx8IHRoaXMubWFwVmlld1JlZi5jdXJyZW50XG4gICAgXG4gICAgYXdhaXQgdGhpcy5ncmFwaGljc0xheWVyTWFuYWdlci5pbml0aWFsaXplRnJvbU91dHB1dERTKFxuICAgICAgaWQsXG4gICAgICBjb25maWcsXG4gICAgICBvdXRwdXREUyxcbiAgICAgIG1hcFZpZXcsXG4gICAgICB7XG4gICAgICAgIG9uR3JhcGhpY3NMYXllckluaXRpYWxpemVkOiAoZ3JhcGhpY3NMYXllcikgPT4ge1xuICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBncmFwaGljc0xheWVySW5pdGlhbGl6ZWQ6IHRydWUgfSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIClcbiAgfVxuXG5cbiAgLyoqXG4gICAqIENsZWFycyBhbGwgZ3JhcGhpY3MgZnJvbSB0aGUgZ3JhcGhpY3MgbGF5ZXIgaWYgaXQgZXhpc3RzLlxuICAgKiBcbiAgICogVGhpcyBtZXRob2QgaXMgY2FsbGVkIHdoZW4gY2xlYXJpbmcgcmVzdWx0cyBvciBzd2l0Y2hpbmcgcXVlcmllcyBpbiBcIk5ld1wiIG1vZGVcbiAgICogdG8gZW5zdXJlIGdyYXBoaWNzIGFyZSByZW1vdmVkIGZyb20gdGhlIG1hcC4gSXQgZG9lcyBub3QgcmVtb3ZlIHRoZSBncmFwaGljcyBsYXllclxuICAgKiBpdHNlbGYsIG9ubHkgY2xlYXJzIGl0cyBjb250ZW50cy5cbiAgICogXG4gICAqIEBzaW5jZSAxLjE5LjAtcjAxNy4wXG4gICAqIEBzZWUge0BsaW5rIEdyYXBoaWNzTGF5ZXJNYW5hZ2VyLmNsZWFyR3JhcGhpY3N9IGZvciBncmFwaGljcyBjbGVhcmluZyBsb2dpY1xuICAgKi9cbiAgcHVibGljIGNsZWFyR3JhcGhpY3NMYXllcklmRXhpc3RzID0gKCkgPT4ge1xuICAgIGNvbnN0IHsgY29uZmlnIH0gPSB0aGlzLnByb3BzXG4gICAgXG4gICAgLy8gQ2h1bmsgNDogR3JhcGhpY3MgbGF5ZXIgY2xlYXJpbmcgKHIwMTguMjUgLSBTdGVwIDQuMzogUmVtb3ZlIG9sZCBpbXBsZW1lbnRhdGlvbilcbiAgICB0aGlzLmdyYXBoaWNzTGF5ZXJNYW5hZ2VyLmNsZWFyR3JhcGhpY3ModGhpcy5wcm9wcy5pZCwgY29uZmlnKVxuICB9XG5cblxuICAvKipcbiAgICogSGFuZGxlcyBzZWxlY3Rpb24gY2hhbmdlIGV2ZW50cyBmcm9tIFF1ZXJ5VGFza1Jlc3VsdCBjb21wb25lbnQuXG4gICAqIFxuICAgKiBUaGlzIG1ldGhvZCB1cGRhdGVzIHdpZGdldCBzdGF0ZSB3aGVuIHJlY29yZHMgYXJlIHNlbGVjdGVkIG9yIGRlc2VsZWN0ZWQgaW4gdGhlXG4gICAqIHJlc3VsdHMgdGFiLiBJdCByZXNwZWN0cyB0aGUgY3VycmVudCByZXN1bHRzIG1vZGU6XG4gICAqIC0gXCJBZGQgdG9cIiAvIFwiUmVtb3ZlIGZyb21cIiBtb2RlczogVXNlcyBhY2N1bXVsYXRlZCByZWNvcmRzIGNvdW50IGZvciByZXN0b3JhdGlvbiBzdGF0ZVxuICAgKiAtIFwiTmV3XCIgbW9kZTogVXNlcyBldmVudCByZWNvcmQgSURzIGZvciByZXN0b3JhdGlvbiBzdGF0ZVxuICAgKiBcbiAgICogQWxzbyBoYW5kbGVzIGF1dG9tYXRpYyBtb2RlIHJlc2V0OiBJZiBzZWxlY3Rpb24gaXMgY2xlYXJlZCBpbiBcIlJlbW92ZSBmcm9tXCIgbW9kZSxcbiAgICogdGhlIG1vZGUgaXMgYXV0b21hdGljYWxseSByZXNldCB0byBcIk5ld1wiIHNpbmNlIFJlbW92ZSBtb2RlIHJlcXVpcmVzIHNlbGVjdGlvbiB0byBmdW5jdGlvbi5cbiAgICogXG4gICAqIEBwYXJhbSBldmVudCAtIEN1c3RvbSBldmVudCBjb250YWluaW5nIHNlbGVjdGlvbiBkZXRhaWxzICh3aWRnZXRJZCwgcmVjb3JkSWRzLCBvdXRwdXREc0lkLCBxdWVyeUl0ZW1Db25maWdJZClcbiAgICogXG4gICAqIEBzaW5jZSAxLjE5LjAtcjAxNy4wXG4gICAqL1xuXG4gIC8qKlxuICAgKiBIYW5kbGVzIHJlc3RvcmUgcmVxdWVzdCB3aGVuIGlkZW50aWZ5IHBvcHVwIGNsb3Nlcy5cbiAgICogXG4gICAqIFRoaXMgbWV0aG9kIHJlc3RvcmVzIHNlbGVjdGlvbiB0byB0aGUgbWFwIGFmdGVyIHRoZSBpZGVudGlmeSBwb3B1cCBjbG9zZXMgYW5kXG4gICAqIHNlbGVjdGlvbiB3YXMgY2xlYXJlZC4gSXQgb25seSByZXN0b3JlcyBpZiB0aGUgd2lkZ2V0IHBhbmVsIGlzIGN1cnJlbnRseSBvcGVuXG4gICAqICh1c2VycyBjYW4ndCBzZWUgcmVzdG9yZWQgc2VsZWN0aW9uIGlmIHdpZGdldCBpcyBjbG9zZWQpLlxuICAgKiBcbiAgICogUmVzdG9yYXRpb24gbG9naWM6XG4gICAqIC0gXCJBZGQgdG9cIiAvIFwiUmVtb3ZlIGZyb21cIiBtb2RlczogUmVzdG9yZXMgYWxsIGFjY3VtdWxhdGVkIHJlY29yZHMgZ3JvdXBlZCBieSBvcmlnaW4gZGF0YSBzb3VyY2VcbiAgICogLSBcIk5ld1wiIG1vZGU6IFJlc3RvcmVzIGxhc3RTZWxlY3Rpb24gc3RhdGVcbiAgICogXG4gICAqIEBwYXJhbSBldmVudCAtIEN1c3RvbSBldmVudCBjb250YWluaW5nIHNlbGVjdGlvbiBkZXRhaWxzICh3aWRnZXRJZCwgcmVjb3JkSWRzLCBvdXRwdXREc0lkLCBxdWVyeUl0ZW1Db25maWdJZClcbiAgICogXG4gICAqIEBzaW5jZSAxLjE5LjAtcjAxNy4wXG4gICAqIEBzZWUge0BsaW5rIFJFU1RPUkVfT05fSURFTlRJRllfQ0xPU0VfRVZFTlR9IGZvciBldmVudCBuYW1lIGNvbnN0YW50XG4gICAqL1xuICBwcml2YXRlIGhhbmRsZVJlc3RvcmVPbklkZW50aWZ5Q2xvc2UgPSAoZXZlbnQ6IEV2ZW50KSA9PiB7XG4gICAgY29uc3QgY3VzdG9tRXZlbnQgPSBldmVudCBhcyBDdXN0b21FdmVudDx7IFxuICAgICAgd2lkZ2V0SWQ6IHN0cmluZywgXG4gICAgICByZWNvcmRJZHM6IHN0cmluZ1tdLCBcbiAgICAgIG91dHB1dERzSWQ6IHN0cmluZyxcbiAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBzdHJpbmdcbiAgICB9PlxuICAgIGNvbnN0IHsgaWQgfSA9IHRoaXMucHJvcHNcbiAgICBcbiAgICAvLyBPbmx5IGhhbmRsZSBpZiB0aGlzIGlzIGZvciBvdXIgd2lkZ2V0XG4gICAgaWYgKGN1c3RvbUV2ZW50LmRldGFpbC53aWRnZXRJZCAhPT0gaWQpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBcbiAgICAvLyBVc2UgbWFuYWdlciBhcyBzb3VyY2Ugb2YgdHJ1dGggZm9yIHZpc2liaWxpdHkgKHIwMTguMTMpXG4gICAgY29uc3QgaXNXaWRnZXRPcGVuID0gdGhpcy52aXNpYmlsaXR5TWFuYWdlci5nZXRJc1BhbmVsVmlzaWJsZSgpXG4gICAgY29uc3QgaXNBY2N1bXVsYXRpb25Nb2RlID0gdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbiB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb25cbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICBldmVudDogJ2lkZW50aWZ5LXBvcHVwLWNsb3NlZC1yZXN0b3JlLXJlcXVlc3RlZCcsXG4gICAgICB3aWRnZXRJZDogaWQsXG4gICAgICBpc1dpZGdldE9wZW4sXG4gICAgICByZXN1bHRzTW9kZTogdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSxcbiAgICAgIGlzQWNjdW11bGF0aW9uTW9kZSxcbiAgICAgIGV2ZW50UmVjb3JkSWRzQ291bnQ6IGN1c3RvbUV2ZW50LmRldGFpbC5yZWNvcmRJZHMubGVuZ3RoLFxuICAgICAgaGFzU2VsZWN0aW9uOiB0aGlzLnN0YXRlLmhhc1NlbGVjdGlvbiB8fCBmYWxzZSxcbiAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiB0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICBoYXNMYXN0U2VsZWN0aW9uOiAhIXRoaXMuc3RhdGUubGFzdFNlbGVjdGlvbixcbiAgICAgIGxhc3RTZWxlY3Rpb25SZWNvcmRDb3VudDogdGhpcy5zdGF0ZS5sYXN0U2VsZWN0aW9uPy5yZWNvcmRJZHMubGVuZ3RoIHx8IDAsXG4gICAgICBvdXRwdXREc0lkOiBjdXN0b21FdmVudC5kZXRhaWwub3V0cHV0RHNJZCxcbiAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBjdXN0b21FdmVudC5kZXRhaWwucXVlcnlJdGVtQ29uZmlnSWRcbiAgICB9KVxuICAgIFxuICAgIC8vIE9ubHkgcmVzdG9yZSBpZiB3aWRnZXQgaXMgb3BlblxuICAgIGlmICghaXNXaWRnZXRPcGVuKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAnaWRlbnRpZnktcG9wdXAtY2xvc2VkLXJlc3RvcmUtc2tpcHBlZC13aWRnZXQtY2xvc2VkJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICByZWNvcmRDb3VudDogY3VzdG9tRXZlbnQuZGV0YWlsLnJlY29yZElkcy5sZW5ndGhcbiAgICAgIH0pXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgLy8gSFlQT1RIRVNJUzogU2hvdWxkIGFsd2F5cyBjaGVjayBhY2N1bXVsYXRlZFJlY29yZHMgZmlyc3QsIHJlZ2FyZGxlc3Mgb2YgbW9kZVxuICAgIGlmICh0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3JkcyAmJiB0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAnaWRlbnRpZnktcG9wdXAtY2xvc2VkLWZvdW5kLWFjY3VtdWxhdGVkLXJlY29yZHMnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIHJlc3VsdHNNb2RlOiB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlLFxuICAgICAgICBpc0FjY3VtdWxhdGlvbk1vZGUsXG4gICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiB0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgICdzaG91bGQtdXNlLWFjY3VtdWxhdGVkJzogdHJ1ZSxcbiAgICAgICAgJ2N1cnJlbnQtY29uZGl0aW9uLWNoZWNrJzogaXNBY2N1bXVsYXRpb25Nb2RlLFxuICAgICAgICAnY29uZGl0aW9uLXJlc3VsdCc6IGlzQWNjdW11bGF0aW9uTW9kZVxuICAgICAgfSlcbiAgICB9XG4gICAgXG4gICAgLy8gSW4gQWRkL1JlbW92ZSBtb2RlcywgY2hlY2sgYWNjdW11bGF0ZWQgcmVjb3JkcyBpbnN0ZWFkIG9mIGxhc3RTZWxlY3Rpb25cbiAgICBpZiAoaXNBY2N1bXVsYXRpb25Nb2RlKSB7XG4gICAgICBpZiAoIXRoaXMuc3RhdGUuaGFzU2VsZWN0aW9uIHx8ICF0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3JkcyB8fCB0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICAgIGV2ZW50OiAnaWRlbnRpZnktcG9wdXAtY2xvc2VkLXJlc3RvcmUtc2tpcHBlZC1uby1hY2N1bXVsYXRlZC1yZWNvcmRzJyxcbiAgICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgICAgaGFzU2VsZWN0aW9uOiB0aGlzLnN0YXRlLmhhc1NlbGVjdGlvbixcbiAgICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogdGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICAgICdoeXBvdGhlc2lzJzogJ2hhc1NlbGVjdGlvbi1pcy1mYWxzZS1vci1uby1hY2N1bXVsYXRlZC1yZWNvcmRzJyxcbiAgICAgICAgICAnbWF5YmUtaGFzU2VsZWN0aW9uLXNob3VsZC1iZS1iYXNlZC1vbi1hY2N1bXVsYXRlZC1yZWNvcmRzJzogdHJ1ZVxuICAgICAgICB9KVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gUmVzdG9yZSBhbGwgYWNjdW11bGF0ZWQgcmVjb3JkcyAoZ3JvdXBlZCBieSBvcmlnaW4gRFMpXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAnaWRlbnRpZnktcG9wdXAtY2xvc2VkLXJlc3RvcmluZy1hY2N1bXVsYXRlZC1yZWNvcmRzJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogdGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoXG4gICAgICB9KVxuICAgICAgXG4gICAgICA7KGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgZGVwcyA9IHtcbiAgICAgICAgICBncmFwaGljc0xheWVyUmVmOiB0aGlzLmdyYXBoaWNzTGF5ZXJSZWYsXG4gICAgICAgICAgbWFwVmlld1JlZjogdGhpcy5tYXBWaWV3UmVmLFxuICAgICAgICAgIGdyYXBoaWNzTGF5ZXJNYW5hZ2VyOiB0aGlzLmdyYXBoaWNzTGF5ZXJNYW5hZ2VyLFxuICAgICAgICAgIGNvbmZpZzogdGhpcy5wcm9wcy5jb25maWdcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCB0aGlzLnNlbGVjdGlvblJlc3RvcmF0aW9uTWFuYWdlci5hZGRTZWxlY3Rpb25Ub01hcChkZXBzKVxuICAgICAgfSkoKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIC8vIEhZUE9USEVTSVM6IE1heWJlIGFjY3VtdWxhdGVkUmVjb3JkcyBleGlzdCBidXQgd2UncmUgbm90IGluIGFjY3VtdWxhdGlvbiBtb2RlP1xuICAgIGlmICh0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3JkcyAmJiB0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwICYmICFpc0FjY3VtdWxhdGlvbk1vZGUpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgZXZlbnQ6ICdpZGVudGlmeS1wb3B1cC1jbG9zZWQtYWNjdW11bGF0ZWQtcmVjb3Jkcy1leGlzdC1idXQtbm90LWFjY3VtdWxhdGlvbi1tb2RlJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICByZXN1bHRzTW9kZTogdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSxcbiAgICAgICAgaXNBY2N1bXVsYXRpb25Nb2RlLFxuICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogdGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoLFxuICAgICAgICAnaHlwb3RoZXNpcyc6ICdhY2N1bXVsYXRlZC1yZWNvcmRzLWV4aXN0LWJ1dC1tb2RlLWlzLW5vdC1hZGQtb3ItcmVtb3ZlJyxcbiAgICAgICAgJ3Nob3VsZC13ZS1zdGlsbC11c2UtdGhlbSc6ICdORUVEUy1JTlZFU1RJR0FUSU9OJ1xuICAgICAgfSlcbiAgICB9XG4gICAgXG4gICAgLy8gRm9yIFwiTmV3XCIgbW9kZSwgdXNlIG9yaWdpbmFsIHZhbGlkYXRpb24gbG9naWNcbiAgICAvLyBDaGVjayBpZiB3ZSBoYXZlIG1hdGNoaW5nIHNlbGVjdGlvbiBzdGF0ZVxuICAgIGlmICghdGhpcy5zdGF0ZS5oYXNTZWxlY3Rpb24gfHwgIXRoaXMuc3RhdGUubGFzdFNlbGVjdGlvbikge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ2lkZW50aWZ5LXBvcHVwLWNsb3NlZC1yZXN0b3JlLXNraXBwZWQtbm8tc2VsZWN0aW9uJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICBoYXNTZWxlY3Rpb246IHRoaXMuc3RhdGUuaGFzU2VsZWN0aW9uLFxuICAgICAgICBoYXNMYXN0U2VsZWN0aW9uOiAhIXRoaXMuc3RhdGUubGFzdFNlbGVjdGlvblxuICAgICAgfSlcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBcbiAgICAvLyBWZXJpZnkgdGhlIG91dHB1dERzSWQgbWF0Y2hlc1xuICAgIGlmICh0aGlzLnN0YXRlLmxhc3RTZWxlY3Rpb24ub3V0cHV0RHNJZCAhPT0gY3VzdG9tRXZlbnQuZGV0YWlsLm91dHB1dERzSWQpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgZXZlbnQ6ICdpZGVudGlmeS1wb3B1cC1jbG9zZWQtcmVzdG9yZS1za2lwcGVkLWRzLW1pc21hdGNoJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICBvdXJPdXRwdXREc0lkOiB0aGlzLnN0YXRlLmxhc3RTZWxlY3Rpb24ub3V0cHV0RHNJZCxcbiAgICAgICAgcmVxdWVzdGVkT3V0cHV0RHNJZDogY3VzdG9tRXZlbnQuZGV0YWlsLm91dHB1dERzSWRcbiAgICAgIH0pXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgLy8gVmVyaWZ5IHRoZSBxdWVyeUl0ZW1Db25maWdJZCBtYXRjaGVzIChvcHRpb25hbCBidXQgZ29vZCB0byBjaGVjaylcbiAgICBpZiAodGhpcy5zdGF0ZS5sYXN0U2VsZWN0aW9uLnF1ZXJ5SXRlbUNvbmZpZ0lkICE9PSBjdXN0b21FdmVudC5kZXRhaWwucXVlcnlJdGVtQ29uZmlnSWQpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgZXZlbnQ6ICdpZGVudGlmeS1wb3B1cC1jbG9zZWQtcmVzdG9yZS1za2lwcGVkLXF1ZXJ5LW1pc21hdGNoJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICBvdXJRdWVyeUl0ZW1Db25maWdJZDogdGhpcy5zdGF0ZS5sYXN0U2VsZWN0aW9uLnF1ZXJ5SXRlbUNvbmZpZ0lkLFxuICAgICAgICByZXF1ZXN0ZWRRdWVyeUl0ZW1Db25maWdJZDogY3VzdG9tRXZlbnQuZGV0YWlsLnF1ZXJ5SXRlbUNvbmZpZ0lkXG4gICAgICB9KVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIC8vIFJlc3RvcmUgc2VsZWN0aW9uIHRvIG1hcCAocmV1c2UgZXhpc3RpbmcgbWV0aG9kKVxuICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgIGV2ZW50OiAnaWRlbnRpZnktcG9wdXAtY2xvc2VkLXJlc3RvcmluZy1zZWxlY3Rpb24nLFxuICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgcmVjb3JkQ291bnQ6IGN1c3RvbUV2ZW50LmRldGFpbC5yZWNvcmRJZHMubGVuZ3RoLFxuICAgICAgb3V0cHV0RHNJZDogY3VzdG9tRXZlbnQuZGV0YWlsLm91dHB1dERzSWRcbiAgICB9KVxuICAgIFxuICAgIDsoYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgZGVwcyA9IHtcbiAgICAgICAgZ3JhcGhpY3NMYXllclJlZjogdGhpcy5ncmFwaGljc0xheWVyUmVmLFxuICAgICAgICBtYXBWaWV3UmVmOiB0aGlzLm1hcFZpZXdSZWYsXG4gICAgICAgIGdyYXBoaWNzTGF5ZXJNYW5hZ2VyOiB0aGlzLmdyYXBoaWNzTGF5ZXJNYW5hZ2VyLFxuICAgICAgICBjb25maWc6IHRoaXMucHJvcHMuY29uZmlnXG4gICAgICB9XG4gICAgICBhd2FpdCB0aGlzLnNlbGVjdGlvblJlc3RvcmF0aW9uTWFuYWdlci5hZGRTZWxlY3Rpb25Ub01hcChkZXBzKVxuICAgIH0pKClcbiAgfVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8gcjAxOS4xODogUmVtb3ZlZCBhZGRTZWxlY3Rpb25Ub01hcFBhcmFsbGVsIHdyYXBwZXIgKDI3IGxpbmVzKVxuICAvLyByMDE5LjIwOiBSZW1vdmVkIGNsZWFyU2VsZWN0aW9uRnJvbU1hcFBhcmFsbGVsIHdyYXBwZXIgKDI3IGxpbmVzKVxuICAvLyBBbGwgY2FsbCBzaXRlcyBub3cgZGlyZWN0bHkgaW52b2tlIFNlbGVjdGlvblJlc3RvcmF0aW9uTWFuYWdlciBtZXRob2RzXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vIHIwMTkuMTU6IFJlbW92ZWQgb2xkIGFkZFNlbGVjdGlvblRvTWFwIGltcGxlbWVudGF0aW9uICgyNzIgbGluZXMpXG4gIC8vIE5vdyBmdWxseSBoYW5kbGVkIGJ5IFNlbGVjdGlvblJlc3RvcmF0aW9uTWFuYWdlci5hZGRTZWxlY3Rpb25Ub01hcCgpXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICAvKipcbiAgICogSGFuZGxlcyByZXN1bHRzIG1vZGUgY2hhbmdlIGZyb20gdGhlIG1vZGUgZHJvcGRvd24gaW4gUXVlcnlUYXNrIGNvbXBvbmVudC5cbiAgICogXG4gICAqIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCB3aGVuIHRoZSB1c2VyIHN3aXRjaGVzIGJldHdlZW4gXCJDcmVhdGUgbmV3XCIsIFwiQWRkIHRvXCIsIG9yXG4gICAqIFwiUmVtb3ZlIGZyb21cIiBtb2Rlcy4gSXQgcGVyZm9ybXMgdGhlIGZvbGxvd2luZyBhY3Rpb25zOlxuICAgKiBcbiAgICogMS4gQ29uc3VtZXMgaGFzaCBwYXJhbWV0ZXJzIHdoZW4gc3dpdGNoaW5nIHRvIGFjY3VtdWxhdGlvbiBtb2RlcyAocHJldmVudHMgcmUtdHJpZ2dlcmluZylcbiAgICogMi4gQ2xlYXJzIGFjY3VtdWxhdGVkIHJlY29yZHMgd2hlbiBzd2l0Y2hpbmcgdG8gXCJOZXdcIiBtb2RlXG4gICAqIDMuIFVwZGF0ZXMgd2lkZ2V0IHN0YXRlIHdpdGggdGhlIG5ldyBtb2RlXG4gICAqIFxuICAgKiBAcGFyYW0gbW9kZSAtIFRoZSBuZXcgc2VsZWN0aW9uIHR5cGUgbW9kZSAoTmV3U2VsZWN0aW9uLCBBZGRUb1NlbGVjdGlvbiwgb3IgUmVtb3ZlRnJvbVNlbGVjdGlvbilcbiAgICogXG4gICAqIEBzaW5jZSAxLjE5LjAtcjAxNy4wXG4gICAqL1xuICBwcml2YXRlIGhhbmRsZVJlc3VsdHNNb2RlQ2hhbmdlID0gKG1vZGU6IFNlbGVjdGlvblR5cGUpID0+IHtcbiAgICAvLyBVc2luZyBBY2N1bXVsYXRlZFJlY29yZHNNYW5hZ2VyIChyMDE4LjU4KVxuICAgIGNvbnN0IHNob3VsZENvbnN1bWVIYXNoID0gKG1vZGUgPT09IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb24gfHwgbW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uKSAmJiAhIXRoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWU/LnNob3J0SWRcbiAgICBcbiAgICBjb25zdCByZXN1bHQgPSB0aGlzLmFjY3VtdWxhdGVkUmVjb3Jkc01hbmFnZXIuaGFuZGxlUmVzdWx0c01vZGVDaGFuZ2UoXG4gICAgICB0aGlzLnByb3BzLmlkLFxuICAgICAgbW9kZSxcbiAgICAgIHNob3VsZENvbnN1bWVIYXNoLFxuICAgICAgdGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZT8uc2hvcnRJZCxcbiAgICAgIHRoaXMucmVtb3ZlSGFzaFBhcmFtZXRlclxuICAgIClcblxuICAgIC8vIFJlc2V0IG1hbnVhbCBtb2RpZmljYXRpb25zIHdoZW4gc3dpdGNoaW5nIHRvIE5ldyBTZWxlY3Rpb24gbW9kZVxuICAgIGlmIChtb2RlID09PSBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvbiAmJiB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlICE9PSBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvbikge1xuICAgICAgdGhpcy5yZXNldE1hbnVhbE1vZGlmaWNhdGlvbnMoKVxuICAgIH1cblxuICAgIC8vIFVwZGF0ZSB3aWRnZXQgc3RhdGUgZnJvbSBtYW5hZ2VyJ3MgcmV0dXJuIHZhbHVlXG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICByZXN1bHRzTW9kZTogcmVzdWx0LnJlc3VsdHNNb2RlLFxuICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzOiByZXN1bHQuYWNjdW11bGF0ZWRSZWNvcmRzXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIGEgaGFzaCBwYXJhbWV0ZXIgZnJvbSB0aGUgVVJMIHdoZW4gc3dpdGNoaW5nIHRvIGFjY3VtdWxhdGlvbiBtb2Rlcy5cbiAgICogXG4gICAqIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCB3aGVuIHN3aXRjaGluZyB0byBcIkFkZCB0b1wiIG9yIFwiUmVtb3ZlIGZyb21cIiBtb2RlcyB0byBjb25zdW1lXG4gICAqIHRoZSBkZWVwIGxpbmsgcGFyYW1ldGVyLiBUaGlzIHByZXZlbnRzIHRoZSBoYXNoIHBhcmFtZXRlciBmcm9tIHJlLXRyaWdnZXJpbmcgdGhlIHF1ZXJ5XG4gICAqIHdoZW4gdGhlIHdpZGdldCByZS1yZW5kZXJzLlxuICAgKiBcbiAgICogVGhlIFVSTCBpcyB1cGRhdGVkIHVzaW5nIGhpc3RvcnkucmVwbGFjZVN0YXRlIHRvIGF2b2lkIHBhZ2UgcmVsb2FkLCBhbmQgYm90aCBwYXRobmFtZVxuICAgKiBhbmQgcXVlcnkgc3RyaW5nIGFyZSBwcmVzZXJ2ZWQgKGUuZy4sIGRlYnVnIHBhcmFtZXRlcnMgcmVtYWluIGludGFjdCkuXG4gICAqIFxuICAgKiBAcGFyYW0gc2hvcnRJZCAtIFRoZSBzaG9ydElkIHBhcmFtZXRlciB0byByZW1vdmUgZnJvbSB0aGUgVVJMIGhhc2hcbiAgICogXG4gICAqIEBzaW5jZSAxLjE5LjAtcjAxNy4wXG4gICAqL1xuICBwcml2YXRlIHJlbW92ZUhhc2hQYXJhbWV0ZXIgPSAoc2hvcnRJZDogc3RyaW5nKSA9PiB7XG4gICAgaWYgKCFzaG9ydElkKSByZXR1cm5cbiAgICBcbiAgICBjb25zdCBoYXNoID0gd2luZG93LmxvY2F0aW9uLmhhc2guc3Vic3RyaW5nKDEpXG4gICAgY29uc3QgdXJsUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhoYXNoKVxuICAgIFxuICAgIGlmICh1cmxQYXJhbXMuaGFzKHNob3J0SWQpKSB7XG4gICAgICB1cmxQYXJhbXMuZGVsZXRlKHNob3J0SWQpXG4gICAgICBjb25zdCBuZXdIYXNoID0gdXJsUGFyYW1zLnRvU3RyaW5nKClcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNIJywge1xuICAgICAgICBldmVudDogJ3JlbW92ZUhhc2hQYXJhbWV0ZXInLFxuICAgICAgICBzaG9ydElkLFxuICAgICAgICBuZXdIYXNoOiBuZXdIYXNoID8gYCMke25ld0hhc2h9YCA6ICcoZW1wdHkpJyxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgXG4gICAgICAvLyBVcGRhdGUgdGhlIFVSTCB3aXRob3V0IHRyaWdnZXJpbmcgYSByZWxvYWRcbiAgICAgIC8vIEFsd2F5cyBwcmVzZXJ2ZSBwYXRobmFtZSBhbmQgcXVlcnkgc3RyaW5nLCBvbmx5IHVwZGF0ZSBoYXNoXG4gICAgICB3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUobnVsbCwgJycsIFxuICAgICAgICB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgKyB3aW5kb3cubG9jYXRpb24uc2VhcmNoICsgKG5ld0hhc2ggPyBgIyR7bmV3SGFzaH1gIDogJycpXG4gICAgICApXG4gICAgICBcbiAgICAgIC8vIEFsc28gY2xlYXIgdGhlIHN0YXRlIHNvIGl0IHdvbid0IHRyaWdnZXIgYWdhaW5cbiAgICAgIGlmICh0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlPy5zaG9ydElkID09PSBzaG9ydElkKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBpbml0aWFsUXVlcnlWYWx1ZTogdW5kZWZpbmVkIH0pXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVBY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UgPSAocmVjb3JkczogRmVhdHVyZURhdGFSZWNvcmRbXSkgPT4ge1xuICAgIC8vIERJQUdOT1NUSUMgTE9HR0lORzogU3RhdGUgY2hhbmdlIHRyYWNraW5nXG4gICAgY29uc3QgcHJldmlvdXNSZWNvcmRzID0gdGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHMgfHwgW11cbiAgICBjb25zdCBwcmV2aW91c0lkcyA9IHByZXZpb3VzUmVjb3Jkcy5tYXAociA9PiByLmdldElkKCkpXG4gICAgY29uc3QgbmV3SWRzID0gcmVjb3Jkcy5tYXAociA9PiByLmdldElkKCkpXG4gICAgY29uc3QgYWRkZWRJZHMgPSBuZXdJZHMuZmlsdGVyKGlkID0+ICFwcmV2aW91c0lkcy5pbmNsdWRlcyhpZCkpXG4gICAgY29uc3QgcmVtb3ZlZElkcyA9IHByZXZpb3VzSWRzLmZpbHRlcihpZCA9PiAhbmV3SWRzLmluY2x1ZGVzKGlkKSlcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgIGV2ZW50OiAnYWNjdW11bGF0ZWQtcmVjb3Jkcy1zdGF0ZS1jaGFuZ2UnLFxuICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICBwcmV2aW91c0NvdW50OiBwcmV2aW91c1JlY29yZHMubGVuZ3RoLFxuICAgICAgcHJldmlvdXNJZHM6IHByZXZpb3VzSWRzLFxuICAgICAgbmV3Q291bnQ6IHJlY29yZHMubGVuZ3RoLFxuICAgICAgbmV3SWRzOiBuZXdJZHMsXG4gICAgICBhZGRlZElkczogYWRkZWRJZHMsXG4gICAgICByZW1vdmVkSWRzOiByZW1vdmVkSWRzLFxuICAgICAgcmVzdWx0c01vZGU6IHRoaXMuc3RhdGUucmVzdWx0c01vZGUsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIC8vIFVzaW5nIEFjY3VtdWxhdGVkUmVjb3Jkc01hbmFnZXIgKHIwMTguNTgpXG4gICAgdGhpcy5hY2N1bXVsYXRlZFJlY29yZHNNYW5hZ2VyLmhhbmRsZUFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZSh0aGlzLnByb3BzLmlkLCByZWNvcmRzKVxuXG4gICAgLy8gSWYgd2UncmUgaW4gUmVtb3ZlIG1vZGUgYW5kIGFsbCBhY2N1bXVsYXRlZCByZWNvcmRzIGFyZSBjbGVhcmVkLCByZXNldCB0byBOZXdTZWxlY3Rpb24gbW9kZVxuICAgIC8vIFJlbW92ZSBtb2RlIHJlcXVpcmVzIGFjY3VtdWxhdGVkIHJlY29yZHMgdG8gZnVuY3Rpb24sIHNvIGl0IHNob3VsZCBiZSBkaXNhYmxlZCB3aGVuIHJlY29yZHMgYXJlIGVtcHR5XG4gICAgY29uc3Qgc2hvdWxkUmVzZXRNb2RlID0gcmVjb3Jkcy5sZW5ndGggPT09IDAgJiYgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb25cblxuICAgIHRoaXMuc2V0U3RhdGUoeyBcbiAgICAgIGFjY3VtdWxhdGVkUmVjb3JkczogcmVjb3JkcyxcbiAgICAgIC8vIFJlc2V0IG1vZGUgdG8gTmV3U2VsZWN0aW9uIGlmIGFsbCBhY2N1bXVsYXRlZCByZWNvcmRzIGNsZWFyZWQgaW4gUmVtb3ZlIG1vZGVcbiAgICAgIC4uLihzaG91bGRSZXNldE1vZGUgPyB7XG4gICAgICAgIHJlc3VsdHNNb2RlOiBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvblxuICAgICAgfSA6IHt9KVxuICAgIH0pXG5cbiAgICBpZiAoc2hvdWxkUmVzZXRNb2RlKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdtb2RlLXJlc2V0LW9uLWFjY3VtdWxhdGVkLXJlY29yZHMtY2xlYXJlZCcsXG4gICAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgICBwcmV2aW91c01vZGU6IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvbixcbiAgICAgICAgbmV3TW9kZTogU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb24sXG4gICAgICAgIHJlYXNvbjogJ2FsbC1hY2N1bXVsYXRlZC1yZWNvcmRzLWNsZWFyZWQtaW4tcmVtb3ZlLW1vZGUnLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIE5PVEU6IE5vIGxvbmdlciBuZWVkZWQgLSB3ZSB1c2UgZXhpc3Rpbmcgb3V0cHV0IERTIGluc3RlYWQgb2YgY3JlYXRpbmcgbmV3IG9uZS5cbiAgICogS2VwdCBmb3IgcmVmZXJlbmNlIGJ1dCBub3QgdXNlZC5cbiAgICovXG4gIHByaXZhdGUgZ2V0T3JDcmVhdGVBY2N1bXVsYXRlZFJlc3VsdHNEUyA9IGFzeW5jIChvcmlnaW5EUzogRmVhdHVyZUxheWVyRGF0YVNvdXJjZSk6IFByb21pc2U8RmVhdHVyZUxheWVyRGF0YVNvdXJjZT4gPT4ge1xuICAgIC8vIFRoaXMgaXMgbm8gbG9uZ2VyIHVzZWQgLSB3ZSBtZXJnZSByZWNvcmRzIGludG8gZXhpc3Rpbmcgb3V0cHV0IERTXG4gICAgdGhyb3cgbmV3IEVycm9yKCdUaGlzIG1ldGhvZCBpcyBkZXByZWNhdGVkIC0gdXNlIGV4aXN0aW5nIG91dHB1dCBEUyBpbnN0ZWFkJylcbiAgfVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8gcjAxOS4xNjogUmVtb3ZlZCBvbGQgY2xlYXJTZWxlY3Rpb25Gcm9tTWFwIGltcGxlbWVudGF0aW9uICgzNTUgbGluZXMpXG4gIC8vIE5vdyBmdWxseSBoYW5kbGVkIGJ5IFNlbGVjdGlvblJlc3RvcmF0aW9uTWFuYWdlci5jbGVhclNlbGVjdGlvbkZyb21NYXAoKVxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgLyoqXG4gICAqIE5PVElGWSB0aGF0IGEgaGFzaCBwYXJhbWV0ZXIgaGFzIGJlZW4gdXNlZC5cbiAgICogUHJldmlvdXNseSB0aGlzIHJlbW92ZWQgdGhlIGhhc2ggZnJvbSB0aGUgVVJMLCBidXQgcGVyIHVwZGF0ZWQgcmVxdWlyZW1lbnRzLFxuICAgKiB1c2VyLWVudGVyZWQgaGFzaGVzIHNob3VsZCByZW1haW4gaW4gdGhlIFVSTC5cbiAgICogXG4gICAqIEBwYXJhbSBzaG9ydElkIC0gVGhlIHNob3J0SWQgcGFyYW1ldGVyIHRoYXQgd2FzIHVzZWRcbiAgICovXG4gIGhhbmRsZUhhc2hQYXJhbWV0ZXJVc2VkID0gKHNob3J0SWQ6IHN0cmluZykgPT4ge1xuICAgIGNvbnN0IHsgaWQgfSA9IHRoaXMucHJvcHNcbiAgICBjb25zdCB7IGluaXRpYWxRdWVyeVZhbHVlIH0gPSB0aGlzLnN0YXRlXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdIQVNILUVYRUMnLCB7XG4gICAgICBldmVudDogJ3F1ZXJ5c2ltcGxlLWhhbmRsZWhhc2hwYXJhbWV0ZXJ1c2VkLWNhbGxlZCcsXG4gICAgICB3aWRnZXRJZDogaWQsXG4gICAgICBzaG9ydElkLFxuICAgICAgY3VycmVudFN0YXRlOiB7XG4gICAgICAgIHNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uOiB0aGlzLnN0YXRlLnNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uLFxuICAgICAgICBoYXNJbml0aWFsUXVlcnlWYWx1ZTogISF0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlLFxuICAgICAgICBpbml0aWFsUXVlcnlWYWx1ZVNob3J0SWQ6IHRoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWU/LnNob3J0SWQsXG4gICAgICAgIGluaXRpYWxRdWVyeVZhbHVlVmFsdWU6IHRoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWU/LnZhbHVlXG4gICAgICB9LFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICAvLyBOT1RFOiBIYXNoIHBhcmFtZXRlcnMgYXJlIE5PVCBjbGVhcmVkIGhlcmUgLSB0aGV5IHBlcnNpc3QgaW4gVVJMXG4gICAgLy8gSGFzaCBwYXJhbWV0ZXJzIGFyZSBvbmx5IGNvbnN1bWVkIHdoZW4gc3dpdGNoaW5nIHRvIGFjY3VtdWxhdGlvbiBtb2RlcyAoQWRkL1JlbW92ZSlcbiAgICAvLyB0byBwcmV2ZW50IHJlLXRyaWdnZXJpbmcgd2hlbiB0aGUgdXNlciBtYW51YWxseSBzd2l0Y2hlcyBtb2Rlc1xuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSCcsIHtcbiAgICAgIGV2ZW50OiAnaGFuZGxlSGFzaFBhcmFtZXRlclVzZWQtbm90aWZpZWQnLFxuICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgc2hvcnRJZDogc2hvcnRJZCxcbiAgICAgIGN1cnJlbnRJbml0aWFsUXVlcnlWYWx1ZTogaW5pdGlhbFF1ZXJ5VmFsdWUsXG4gICAgICBub3RlOiAnSGFzaCBwYXJhbWV0ZXIgdXNlZCBidXQgTk9UIGNsZWFyZWQgLSBoYXNoIHJlbWFpbnMgaW4gVVJMIHBlciB1c2VyIHJlcXVpcmVtZW50JyxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgLy8gQUxXQVlTIGNsZWFyIGJvdGggaGFzaCBzdGF0ZSB2YWx1ZXMgYWZ0ZXIgZXhlY3V0aW9uXG4gICAgLy8gUXVlcnlTaW1wbGUgc2hvdWxkIG5vdCByZW1lbWJlciBoYXNoIHN0YXRlIGFmdGVyIEhlbHBlclNpbXBsZS1kcml2ZW4gZXhlY3V0aW9uIGNvbXBsZXRlc1xuICAgIC8vIFRoaXMgcHJldmVudHMgYXV0b25vbW91cyByZS1wcm9jZXNzaW5nIHdoZW4gc3dpdGNoaW5nIHF1ZXJpZXNcbiAgICAvLyBVc2luZyBhIHNpbmdsZSBzZXRTdGF0ZSBlbnN1cmVzIGF0b21pYyB1cGRhdGUgYW5kIHByZXZlbnRzIHJhY2UgY29uZGl0aW9uc1xuICAgIHRoaXMuc2V0U3RhdGUoeyBcbiAgICAgIHNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uOiBmYWxzZSxcbiAgICAgIGluaXRpYWxRdWVyeVZhbHVlOiB1bmRlZmluZWRcbiAgICB9LCAoKSA9PiB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gtRVhFQycsIHtcbiAgICAgICAgZXZlbnQ6ICdxdWVyeXNpbXBsZS1oYW5kbGVoYXNocGFyYW1ldGVydXNlZC1zdGF0ZS1jbGVhcmVkJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICBzaG9ydElkLFxuICAgICAgICBuZXdTdGF0ZToge1xuICAgICAgICAgIHNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uOiB0aGlzLnN0YXRlLnNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uLFxuICAgICAgICAgIGhhc0luaXRpYWxRdWVyeVZhbHVlOiAhIXRoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWUsXG4gICAgICAgICAgaW5pdGlhbFF1ZXJ5VmFsdWVTaG9ydElkOiB0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlPy5zaG9ydElkLFxuICAgICAgICAgIGluaXRpYWxRdWVyeVZhbHVlVmFsdWU6IHRoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWU/LnZhbHVlXG4gICAgICAgIH0sXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICB9KVxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSCcsIHtcbiAgICAgIGV2ZW50OiAnc2hvdWxkVXNlSW5pdGlhbFF1ZXJ5VmFsdWVGb3JTZWxlY3Rpb24tZmxhZy1jbGVhcmVkJyxcbiAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgIHNob3J0SWQ6IHNob3J0SWQsXG4gICAgICBmbGFnVmFsdWU6IGZhbHNlLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgfVxuXG5cbiAgcmVuZGVyICgpIHtcbiAgICBjb25zdCB7IGNvbmZpZywgaWQsIGljb24sIGxhYmVsLCBsYXlvdXRJZCwgbGF5b3V0SXRlbUlkLCBjb250cm9sbGVyV2lkZ2V0SWQgfSA9IHRoaXMucHJvcHNcbiAgICBjb25zdCB3aWRnZXRMYWJlbCA9IHRoaXMucHJvcHMuaW50bC5mb3JtYXRNZXNzYWdlKHtcbiAgICAgIGlkOiAnX3dpZGdldExhYmVsJyxcbiAgICAgIGRlZmF1bHRNZXNzYWdlOiBkZWZhdWx0TWVzc2FnZXMuX3dpZGdldExhYmVsXG4gICAgfSlcbiAgICBpZiAoIWNvbmZpZy5xdWVyeUl0ZW1zPy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiA8V2lkZ2V0UGxhY2Vob2xkZXIgaWNvbj17aWNvbk1hcC5pY29uUXVlcnl9IHdpZGdldElkPXt0aGlzLnByb3BzLmlkfSBuYW1lPXt3aWRnZXRMYWJlbH0gLz5cbiAgICB9XG5cbiAgICBpZiAoY29uZmlnLmFycmFuZ2VUeXBlID09PSBRdWVyeUFycmFuZ2VUeXBlLlBvcHBlciAmJiAhY29udHJvbGxlcldpZGdldElkKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8UXVlcnlXaWRnZXRDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXtgJHtsYXlvdXRJZH06JHtsYXlvdXRJdGVtSWR9YH0+XG4gICAgICAgICAgPFRhc2tMaXN0UG9wcGVyV3JhcHBlclxuICAgICAgICAgICAgaWQ9ezB9XG4gICAgICAgICAgICBpY29uPXtpY29ufVxuICAgICAgICAgICAgcG9wcGVyVGl0bGU9e2xhYmVsfVxuICAgICAgICAgICAgbWluU2l6ZT17Y29uZmlnLnNpemVNYXA/LmFycmFuZ2VtZW50SWNvblBvcHBlcj8ubWluU2l6ZX1cbiAgICAgICAgICAgIGRlZmF1bHRTaXplPXtjb25maWcuc2l6ZU1hcD8uYXJyYW5nZW1lbnRJY29uUG9wcGVyPy5kZWZhdWx0U2l6ZX1cbiAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxRdWVyeVRhc2tMaXN0IFxuICAgICAgICAgICAgICAgIHdpZGdldElkPXtpZH0gXG4gICAgICAgICAgICAgICAgaXNJblBvcHBlciBcbiAgICAgICAgICAgICAgICBxdWVyeUl0ZW1zPXtjb25maWcucXVlcnlJdGVtc30gXG4gICAgICAgICAgICAgICAgZGVmYXVsdFBhZ2VTaXplPXtjb25maWcuZGVmYXVsdFBhZ2VTaXplfSBcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9J3BiLTQnIFxuICAgICAgICAgICAgICAgIGluaXRpYWxRdWVyeVZhbHVlPXt0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlfSBcbiAgICAgICAgICAgICAgICBzaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbj17dGhpcy5zdGF0ZS5zaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbn1cbiAgICAgICAgICAgICAgICBvbkhhc2hQYXJhbWV0ZXJVc2VkPXt0aGlzLmhhbmRsZUhhc2hQYXJhbWV0ZXJVc2VkfVxuICAgICAgICAgICAgICAgIHJlc3VsdHNNb2RlPXt0aGlzLnN0YXRlLnJlc3VsdHNNb2RlfVxuICAgICAgICAgICAgICAgIG9uUmVzdWx0c01vZGVDaGFuZ2U9e3RoaXMuaGFuZGxlUmVzdWx0c01vZGVDaGFuZ2V9XG4gICAgICAgICAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzPXt0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3Jkc31cbiAgICAgICAgICAgICAgICBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZT17dGhpcy5oYW5kbGVBY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2V9XG4gICAgICAgICAgICAgICAgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodD17Y29uZmlnLnVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHR9XG4gICAgICAgICAgICAgICAgZ3JhcGhpY3NMYXllcj17dGhpcy5ncmFwaGljc0xheWVyUmVmLmN1cnJlbnQgfHwgdW5kZWZpbmVkfVxuICAgICAgICAgICAgICAgIG1hcFZpZXc9e3RoaXMubWFwVmlld1JlZi5jdXJyZW50IHx8IHVuZGVmaW5lZH1cbiAgICAgICAgICAgICAgICBvbkluaXRpYWxpemVHcmFwaGljc0xheWVyPXt0aGlzLmluaXRpYWxpemVHcmFwaGljc0xheWVyRnJvbU91dHB1dERTfVxuICAgICAgICAgICAgICAgIG9uQ2xlYXJHcmFwaGljc0xheWVyPXt0aGlzLmNsZWFyR3JhcGhpY3NMYXllcklmRXhpc3RzfVxuICAgICAgICAgICAgICAgIGFjdGl2ZVRhYj17dGhpcy5zdGF0ZS5hY3RpdmVUYWJ9XG4gICAgICAgICAgICAgICAgb25UYWJDaGFuZ2U9e3RoaXMuaGFuZGxlVGFiQ2hhbmdlfVxuICAgICAgICAgICAgICAgIGV2ZW50TWFuYWdlcj17dGhpcy5ldmVudE1hbmFnZXJ9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgPC9UYXNrTGlzdFBvcHBlcldyYXBwZXI+XG4gICAgICAgIDwvUXVlcnlXaWRnZXRDb250ZXh0LlByb3ZpZGVyPlxuICAgICAgKVxuICAgIH1cblxuICAgIGlmIChjb25maWcuYXJyYW5nZVR5cGUgPT09IFF1ZXJ5QXJyYW5nZVR5cGUuSW5saW5lICYmICFjb250cm9sbGVyV2lkZ2V0SWQpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxRdWVyeVdpZGdldENvbnRleHQuUHJvdmlkZXIgdmFsdWU9e2Ake2xheW91dElkfToke2xheW91dEl0ZW1JZH1gfT5cbiAgICAgICAgICA8VGFza0xpc3RJbmxpbmVcbiAgICAgICAgICAgIHdpZGdldElkPXtpZH1cbiAgICAgICAgICAgIHdpZGdldExhYmVsPXtsYWJlbH1cbiAgICAgICAgICAgIHdyYXA9e2NvbmZpZy5hcnJhbmdlV3JhcH1cbiAgICAgICAgICAgIHF1ZXJ5SXRlbXM9e2NvbmZpZy5xdWVyeUl0ZW1zfVxuICAgICAgICAgICAgbWluU2l6ZT17Y29uZmlnLnNpemVNYXA/LmFycmFuZ2VtZW50SWNvblBvcHBlcj8ubWluU2l6ZX1cbiAgICAgICAgICAgIGRlZmF1bHRTaXplPXtjb25maWcuc2l6ZU1hcD8uYXJyYW5nZW1lbnRJY29uUG9wcGVyPy5kZWZhdWx0U2l6ZX1cbiAgICAgICAgICAgIGRlZmF1bHRQYWdlU2l6ZT17Y29uZmlnLmRlZmF1bHRQYWdlU2l6ZX1cbiAgICAgICAgICAgIGluaXRpYWxRdWVyeVZhbHVlPXt0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlfVxuICAgICAgICAgICAgb25IYXNoUGFyYW1ldGVyVXNlZD17dGhpcy5oYW5kbGVIYXNoUGFyYW1ldGVyVXNlZH1cbiAgICAgICAgICAvPlxuICAgICAgICA8L1F1ZXJ5V2lkZ2V0Q29udGV4dC5Qcm92aWRlcj5cbiAgICAgIClcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgPFBhcGVyIHJlZj17dGhpcy53aWRnZXRSZWZ9IHZhcmlhbnQ9J2ZsYXQnIGNsYXNzTmFtZT0namltdS13aWRnZXQgcnVudGltZS1xdWVyeScgZGF0YS13aWRnZXRpZD17aWR9IGNzcz17Y3NzYFxuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICBgfT5cbiAgICAgICAgey8qIEhpZGRlbiBKaW11TWFwVmlld0NvbXBvbmVudCB0byBnZXQgbWFwIHZpZXcgZm9yIGdyYXBoaWNzIGxheWVyICovfVxuICAgICAgICB7LyogVXNlcyBleHBsaWNpdCBtYXAgd2lkZ2V0IElEIGZyb20gY29uZmlnICh3aWRnZXQtbGV2ZWwgYmluZGluZykgKi99XG4gICAgICAgIHtjb25maWcudXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCAmJiBjb25maWcuaGlnaGxpZ2h0TWFwV2lkZ2V0SWQgJiYgKFxuICAgICAgICAgIDxKaW11TWFwVmlld0NvbXBvbmVudFxuICAgICAgICAgICAgdXNlTWFwV2lkZ2V0SWQ9e2NvbmZpZy5oaWdobGlnaHRNYXBXaWRnZXRJZH1cbiAgICAgICAgICAgIG9uQWN0aXZlVmlld0NoYW5nZT17dGhpcy5oYW5kbGVKaW11TWFwVmlld0NoYW5nZWR9XG4gICAgICAgICAgLz5cbiAgICAgICAgKX1cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3aWRnZXQtaGVhZGVyXCIgY3NzPXtjc3NgXG4gICAgICAgICAgcGFkZGluZzogNnB4IDE2cHg7XG4gICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLXN5cy1jb2xvci1kaXZpZGVyLXNlY29uZGFyeSk7XG4gICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tc3lzLWNvbG9yLXN1cmZhY2UpO1xuICAgICAgICBgfT5cbiAgICAgICAgICA8aDMgY2xhc3NOYW1lPVwid2lkZ2V0LXRpdGxlXCIgY3NzPXtjc3NgXG4gICAgICAgICAgICBtYXJnaW46IDA7XG4gICAgICAgICAgICBmb250LXNpemU6IDFyZW07XG4gICAgICAgICAgICBmb250LXdlaWdodDogNjAwO1xuICAgICAgICAgICAgY29sb3I6IHZhcigtLXN5cy1jb2xvci10ZXh0LXByaW1hcnkpO1xuICAgICAgICAgIGB9PlxuICAgICAgICAgICAge2xhYmVsIHx8IHdpZGdldExhYmVsfVxuICAgICAgICAgIDwvaDM+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNzcz17Y3NzYFxuICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgIGB9PlxuICAgICAgICAgIDxkaXYgY3NzPXtjc3NgXG4gICAgICAgICAgICBmbGV4OiAxO1xuICAgICAgICAgICAgb3ZlcmZsb3c6IGF1dG87XG4gICAgICAgICAgYH0+XG4gICAgICAgICAgICA8UXVlcnlXaWRnZXRDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXtgJHtsYXlvdXRJZH06JHtsYXlvdXRJdGVtSWR9YH0+XG4gICAgICAgICAgICAgIDxRdWVyeVRhc2tMaXN0IFxuICAgICAgICAgICAgICAgIHdpZGdldElkPXtpZH0gXG4gICAgICAgICAgICAgICAgcXVlcnlJdGVtcz17Y29uZmlnLnF1ZXJ5SXRlbXN9IFxuICAgICAgICAgICAgICAgIGRlZmF1bHRQYWdlU2l6ZT17Y29uZmlnLmRlZmF1bHRQYWdlU2l6ZX0gXG4gICAgICAgICAgICAgICAgaW5pdGlhbFF1ZXJ5VmFsdWU9e3RoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWV9IFxuICAgICAgICAgICAgICAgIHNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uPXt0aGlzLnN0YXRlLnNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9ufVxuICAgICAgICAgICAgICAgIG9uSGFzaFBhcmFtZXRlclVzZWQ9e3RoaXMuaGFuZGxlSGFzaFBhcmFtZXRlclVzZWR9XG4gICAgICAgICAgICAgICAgcmVzdWx0c01vZGU9e3RoaXMuc3RhdGUucmVzdWx0c01vZGV9XG4gICAgICAgICAgICAgICAgb25SZXN1bHRzTW9kZUNoYW5nZT17dGhpcy5oYW5kbGVSZXN1bHRzTW9kZUNoYW5nZX1cbiAgICAgICAgICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHM9e3RoaXMuc3RhdGUuYWNjdW11bGF0ZWRSZWNvcmRzfVxuICAgICAgICAgICAgICAgIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlPXt0aGlzLmhhbmRsZUFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZX1cbiAgICAgICAgICAgICAgICB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0PXtjb25maWcudXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodH1cbiAgICAgICAgICAgICAgICBncmFwaGljc0xheWVyPXt0aGlzLmdyYXBoaWNzTGF5ZXJSZWYuY3VycmVudCB8fCB1bmRlZmluZWR9XG4gICAgICAgICAgICAgICAgbWFwVmlldz17dGhpcy5tYXBWaWV3UmVmLmN1cnJlbnQgfHwgdW5kZWZpbmVkfVxuICAgICAgICAgICAgICAgIG9uSW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXI9e3RoaXMuaW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXJGcm9tT3V0cHV0RFN9XG4gICAgICAgICAgICAgICAgb25DbGVhckdyYXBoaWNzTGF5ZXI9e3RoaXMuY2xlYXJHcmFwaGljc0xheWVySWZFeGlzdHN9XG4gICAgICAgICAgICAgICAgYWN0aXZlVGFiPXt0aGlzLnN0YXRlLmFjdGl2ZVRhYn1cbiAgICAgICAgICAgICAgICBvblRhYkNoYW5nZT17dGhpcy5oYW5kbGVUYWJDaGFuZ2V9XG4gICAgICAgICAgICAgICAgZXZlbnRNYW5hZ2VyPXt0aGlzLmV2ZW50TWFuYWdlcn1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvUXVlcnlXaWRnZXRDb250ZXh0LlByb3ZpZGVyPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIHsvKiBTdGF0aW9uYXJ5IGZvb3RlciAqL31cbiAgICAgICAgICA8ZGl2IGNzcz17Y3NzYFxuICAgICAgICAgICAgcGFkZGluZzogNHB4IDEycHg7XG4gICAgICAgICAgICBib3JkZXItdG9wOiAxcHggc29saWQgdmFyKC0tc3lzLWNvbG9yLWRpdmlkZXItc2Vjb25kYXJ5KTtcbiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXN5cy1jb2xvci1zdXJmYWNlLXBhcGVyKTtcbiAgICAgICAgICAgIGZsZXgtc2hyaW5rOiAwO1xuICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICAgIGB9PlxuICAgICAgICAgICAgPHNwYW4gY3NzPXtjc3NgXG4gICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC43NXJlbTtcbiAgICAgICAgICAgICAgY29sb3I6IHZhcigtLXN5cy1jb2xvci10ZXh0LXRlcnRpYXJ5KTtcbiAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDQwMDtcbiAgICAgICAgICAgICAgbGV0dGVyLXNwYWNpbmc6IDAuMDI1ZW07XG4gICAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1mbGV4O1xuICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgICAgICBnYXA6IDRweDtcbiAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICB7LyogQ29kZS9PcGVuIFNvdXJjZSBTeW1ib2wgKi99XG4gICAgICAgICAgICAgIDxzdmcgXG4gICAgICAgICAgICAgICAgd2lkdGg9XCIxNFwiIFxuICAgICAgICAgICAgICAgIGhlaWdodD1cIjE0XCIgXG4gICAgICAgICAgICAgICAgdmlld0JveD1cIjAgMCAyNCAyNFwiIFxuICAgICAgICAgICAgICAgIGZpbGw9XCJub25lXCIgXG4gICAgICAgICAgICAgICAgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgXG4gICAgICAgICAgICAgICAgc3Ryb2tlV2lkdGg9XCIyXCJcbiAgICAgICAgICAgICAgICBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgIGZsZXgtc2hyaW5rOiAwO1xuICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMC42O1xuICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8cG9seWxpbmUgcG9pbnRzPVwiMTYgMTggMjIgMTIgMTYgNlwiLz5cbiAgICAgICAgICAgICAgICA8cG9seWxpbmUgcG9pbnRzPVwiOCA2IDIgMTIgOCAxOFwiLz5cbiAgICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICAgIFF1ZXJ5U2ltcGxlIGJ5IE1hcFNpbXBsZVxuICAgICAgICAgICAgICA8c3BhbiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICBtYXJnaW4tbGVmdDogNnB4O1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAuNTtcbiAgICAgICAgICAgICAgICBmb250LXNpemU6IDAuN3JlbTtcbiAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAgdntXSURHRVRfVkVSU0lPTn1cbiAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvUGFwZXI+XG4gICAgKVxuICB9XG59XG5cblxuIGV4cG9ydCBmdW5jdGlvbiBfX3NldF93ZWJwYWNrX3B1YmxpY19wYXRoX18odXJsKSB7IF9fd2VicGFja19wdWJsaWNfcGF0aF9fID0gdXJsIH0iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=