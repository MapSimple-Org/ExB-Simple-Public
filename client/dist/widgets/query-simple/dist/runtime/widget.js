System.register(["jimu-core/emotion","jimu-core","jimu-ui","jimu-arcgis","jimu-ui/basic/sql-expression-runtime","jimu-theme","widgets/shared-code/common","jimu-layouts/layout-runtime","jimu-core/react"], function(__WEBPACK_DYNAMIC_EXPORT__, __system_context__) {
	var __WEBPACK_EXTERNAL_MODULE__emotion_react_jsx_runtime__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_core__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_ui__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_arcgis__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_ui_basic_sql_expression_runtime__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_theme__ = {};
	var __WEBPACK_EXTERNAL_MODULE_widgets_shared_code_common__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_layouts_layout_runtime__ = {};
	var __WEBPACK_EXTERNAL_MODULE_react__ = {};
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE__emotion_react_jsx_runtime__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_core__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_ui__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_arcgis__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_ui_basic_sql_expression_runtime__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_theme__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_widgets_shared_code_common__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_layouts_layout_runtime__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_react__, "__esModule", { value: true });
	return {
		setters: [
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE__emotion_react_jsx_runtime__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_core__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_ui__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_arcgis__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_ui_basic_sql_expression_runtime__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_theme__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_widgets_shared_code_common__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_layouts_layout_runtime__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_react__[key] = module[key];
				});
			}
		],
		execute: function() {
			__WEBPACK_DYNAMIC_EXPORT__(
/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./jimu-icons/filled/directional/down.tsx":
/*!************************************************!*\
  !*** ./jimu-icons/filled/directional/down.tsx ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DownFilled: () => (/* binding */ DownFilled)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_filled_directional_down_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/filled/directional/down.svg */ "./jimu-icons/svg/filled/directional/down.svg");
/* harmony import */ var _svg_filled_directional_down_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_filled_directional_down_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const DownFilled = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_filled_directional_down_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/filled/directional/right.tsx":
/*!*************************************************!*\
  !*** ./jimu-icons/filled/directional/right.tsx ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   RightFilled: () => (/* binding */ RightFilled)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_filled_directional_right_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/filled/directional/right.svg */ "./jimu-icons/svg/filled/directional/right.svg");
/* harmony import */ var _svg_filled_directional_right_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_filled_directional_right_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const RightFilled = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_filled_directional_right_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/directional/arrow-left.tsx":
/*!********************************************************!*\
  !*** ./jimu-icons/outlined/directional/arrow-left.tsx ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ArrowLeftOutlined: () => (/* binding */ ArrowLeftOutlined)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/directional/arrow-left.svg */ "./jimu-icons/svg/outlined/directional/arrow-left.svg");
/* harmony import */ var _svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const ArrowLeftOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/directional/collapse-all.tsx":
/*!**********************************************************!*\
  !*** ./jimu-icons/outlined/directional/collapse-all.tsx ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CollapseAllOutlined: () => (/* binding */ CollapseAllOutlined)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_directional_collapse_all_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/directional/collapse-all.svg */ "./jimu-icons/svg/outlined/directional/collapse-all.svg");
/* harmony import */ var _svg_outlined_directional_collapse_all_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_directional_collapse_all_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const CollapseAllOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_outlined_directional_collapse_all_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/directional/expand-all.tsx":
/*!********************************************************!*\
  !*** ./jimu-icons/outlined/directional/expand-all.tsx ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ExpandAllOutlined: () => (/* binding */ ExpandAllOutlined)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_directional_expand_all_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/directional/expand-all.svg */ "./jimu-icons/svg/outlined/directional/expand-all.svg");
/* harmony import */ var _svg_outlined_directional_expand_all_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_directional_expand_all_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const ExpandAllOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_outlined_directional_expand_all_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/editor/trash.tsx":
/*!**********************************************!*\
  !*** ./jimu-icons/outlined/editor/trash.tsx ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TrashOutlined: () => (/* binding */ TrashOutlined)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/editor/trash.svg */ "./jimu-icons/svg/outlined/editor/trash.svg");
/* harmony import */ var _svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const TrashOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/suggested/info.tsx":
/*!************************************************!*\
  !*** ./jimu-icons/outlined/suggested/info.tsx ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   InfoOutlined: () => (/* binding */ InfoOutlined)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_suggested_info_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/suggested/info.svg */ "./jimu-icons/svg/outlined/suggested/info.svg");
/* harmony import */ var _svg_outlined_suggested_info_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_suggested_info_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const InfoOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_outlined_suggested_info_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/svg/filled/directional/down.svg":
/*!****************************************************!*\
  !*** ./jimu-icons/svg/filled/directional/down.svg ***!
  \****************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"m14 4-6 8-6-8z\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/filled/directional/right.svg":
/*!*****************************************************!*\
  !*** ./jimu-icons/svg/filled/directional/right.svg ***!
  \*****************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"m4 2 8 6-8 6z\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/application/more-horizontal.svg":
/*!*****************************************************************!*\
  !*** ./jimu-icons/svg/outlined/application/more-horizontal.svg ***!
  \*****************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M2 7a1 1 0 1 0 0 2 1 1 0 0 0 0-2m5 1a1 1 0 1 1 2 0 1 1 0 0 1-2 0m6 0a1 1 0 1 1 2 0 1 1 0 0 1-2 0\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/arrow-left.svg":
/*!************************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/arrow-left.svg ***!
  \************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M15 7.5a.52.52 0 0 1-.516.527H2.976L6.473 11.6a.535.535 0 0 1 0 .746.51.51 0 0 1-.73 0L1 7.5l4.743-4.846a.51.51 0 0 1 .73 0 .535.535 0 0 1 0 .746L2.976 6.973h11.508c.285 0 .516.236.516.527\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/collapse-all.svg":
/*!**************************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/collapse-all.svg ***!
  \**************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M1 3h14v1H1zM9 7h6v1H9zM5.036 6.146a.5.5 0 0 0-.708 0L1.146 9.328a.5.5 0 1 0 .708.708l2.328-2.329V14.5h1V7.707l2.328 2.329a.5.5 0 1 0 .708-.708z\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/expand-all.svg":
/*!************************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/expand-all.svg ***!
  \************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M1 3h14v1H1zM9 7h6v1H9zM4.328 14.354a.5.5 0 0 0 .708 0l3.182-3.182a.5.5 0 1 0-.708-.708l-2.328 2.329V6h-1v6.793l-2.328-2.328a.5.5 0 1 0-.708.707z\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/right.svg":
/*!*******************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/right.svg ***!
  \*******************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M4.653 13.854a.485.485 0 0 1 0-.708L10.24 8 4.653 2.854a.485.485 0 0 1 0-.708.54.54 0 0 1 .738 0l5.956 5.5a.485.485 0 0 1 0 .708l-5.956 5.5a.54.54 0 0 1-.738 0\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/editor/close.svg":
/*!**************************************************!*\
  !*** ./jimu-icons/svg/outlined/editor/close.svg ***!
  \**************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"m8.745 8 6.1 6.1a.527.527 0 1 1-.745.746L8 8.746l-6.1 6.1a.527.527 0 1 1-.746-.746l6.1-6.1-6.1-6.1a.527.527 0 0 1 .746-.746l6.1 6.1 6.1-6.1a.527.527 0 0 1 .746.746z\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/editor/trash.svg":
/*!**************************************************!*\
  !*** ./jimu-icons/svg/outlined/editor/trash.svg ***!
  \**************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M6 6.5a.5.5 0 0 1 1 0v6a.5.5 0 0 1-1 0zM9.5 6a.5.5 0 0 0-.5.5v6a.5.5 0 0 0 1 0v-6a.5.5 0 0 0-.5-.5\"></path><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M11 0H5a1 1 0 0 0-1 1v2H.5a.5.5 0 0 0 0 1h1.6l.81 11.1a1 1 0 0 0 .995.9h8.19a1 1 0 0 0 .995-.9L13.9 4h1.6a.5.5 0 0 0 0-1H12V1a1 1 0 0 0-1-1m0 3V1H5v2zm1.895 1h-9.79l.8 11h8.19z\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/suggested/error.svg":
/*!*****************************************************!*\
  !*** ./jimu-icons/svg/outlined/suggested/error.svg ***!
  \*****************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16m0-1A7 7 0 1 0 8 1a7 7 0 0 0 0 14M8 4a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 4m1 7a1 1 0 1 1-2 0 1 1 0 0 1 2 0\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/suggested/info.svg":
/*!****************************************************!*\
  !*** ./jimu-icons/svg/outlined/suggested/info.svg ***!
  \****************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M8 5.5a1 1 0 1 0 0-2 1 1 0 0 0 0 2M6.5 7.5A.5.5 0 0 1 7 7h1.5v4.5h1a.5.5 0 0 1 0 1h-3a.5.5 0 0 1 0-1h1V8H7a.5.5 0 0 1-.5-.5\"></path><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16m0-1A7 7 0 1 0 8 1a7 7 0 0 0 0 14\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/suggested/warning.svg":
/*!*******************************************************!*\
  !*** ./jimu-icons/svg/outlined/suggested/warning.svg ***!
  \*******************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M8 2.125 14.334 14H1.667zm-.882-.47a1 1 0 0 1 1.765 0l6.333 11.874A1 1 0 0 1 14.334 15H1.667a1 1 0 0 1-.882-1.47zM8 4.874a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0L8.9 5.87a.905.905 0 0 0-.9-.995m1 7a1 1 0 1 1-2 0 1 1 0 0 1 2 0\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./your-extensions/widgets/query-simple/icon.svg":
/*!*******************************************************!*\
  !*** ./your-extensions/widgets/query-simple/icon.svg ***!
  \*******************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 20 20\"><path fill=\"#000\" d=\"M8.5 3A5.5 5.5 0 0 1 14 8.5a5.5 5.5 0 0 1-1.273 3.527l4.053 4.054a.75.75 0 1 1-1.06 1.06l-4.054-4.053a5.5 5.5 0 0 1-3.527 1.273 5.5 5.5 0 1 1 0-11H8.5zm0 1.5h-.361a4 4 0 1 0 0 8 4 4 0 0 0 0-8z\"></path><rect width=\"19\" height=\"19\" x=\".5\" y=\".5\" stroke=\"#000\" rx=\"1.5\"></rect></svg>"

/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/config.ts":
/*!************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/config.ts ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CreateToolType: () => (/* binding */ CreateToolType),
/* harmony export */   FieldsType: () => (/* binding */ FieldsType),
/* harmony export */   ListDirection: () => (/* binding */ ListDirection),
/* harmony export */   PagingType: () => (/* binding */ PagingType),
/* harmony export */   QueryArrangeType: () => (/* binding */ QueryArrangeType),
/* harmony export */   ResultSelectMode: () => (/* binding */ ResultSelectMode),
/* harmony export */   SelectionType: () => (/* binding */ SelectionType),
/* harmony export */   SortDirection: () => (/* binding */ SortDirection),
/* harmony export */   SpatialFilterType: () => (/* binding */ SpatialFilterType),
/* harmony export */   SpatialRelation: () => (/* binding */ SpatialRelation),
/* harmony export */   SymbolType: () => (/* binding */ SymbolType),
/* harmony export */   UnitType: () => (/* binding */ UnitType),
/* harmony export */   mapJSAPISpatialRelToDsSpatialRel: () => (/* binding */ mapJSAPISpatialRelToDsSpatialRel),
/* harmony export */   mapJSAPIUnitToDsUnit: () => (/* binding */ mapJSAPIUnitToDsUnit)
/* harmony export */ });
var CreateToolType;
(function (CreateToolType) {
    CreateToolType["Point"] = "Point";
    CreateToolType["Polyline"] = "Polyline";
    CreateToolType["Polygon"] = "Polygon";
    CreateToolType["Rectangle"] = "Rectangle";
    CreateToolType["Circle"] = "Circle";
})(CreateToolType || (CreateToolType = {}));
var SelectionType;
(function (SelectionType) {
    SelectionType["NewSelection"] = "NEW_SELECTION";
    SelectionType["AddToSelection"] = "ADD_TO_CURRENT_SELECTION";
    SelectionType["RemoveFromSelection"] = "REMOVE_FROM_CURRENT_SELECTION";
    SelectionType["SubsetSelection"] = "SUBSET_FROM_CURRENT_SELECTION";
    SelectionType["SwitchSelection"] = "SWITCH_CURRENT_SELECTION";
})(SelectionType || (SelectionType = {}));
var QueryArrangeType;
(function (QueryArrangeType) {
    QueryArrangeType["Block"] = "BLOCK";
    QueryArrangeType["Inline"] = "INLINE";
    QueryArrangeType["Popper"] = "POPPER";
})(QueryArrangeType || (QueryArrangeType = {}));
var SpatialFilterType;
(function (SpatialFilterType) {
    SpatialFilterType["CurrentMapExtent"] = "CurrentMapExtent";
    SpatialFilterType["InteractiveDrawMode"] = "InteractiveDrawMode";
    SpatialFilterType["None"] = "";
})(SpatialFilterType || (SpatialFilterType = {}));
var SpatialRelation;
(function (SpatialRelation) {
    SpatialRelation["Intersect"] = "intersects";
    SpatialRelation["Contain"] = "contains";
    SpatialRelation["Cross"] = "crosses";
    SpatialRelation["EnvelopeIntersect"] = "envelope-intersects";
    SpatialRelation["IndexIntersect"] = "index-intersects";
    SpatialRelation["Overlap"] = "overlaps";
    SpatialRelation["Touch"] = "touches";
    SpatialRelation["Within"] = "within";
})(SpatialRelation || (SpatialRelation = {}));
const mapJSAPISpatialRelToDsSpatialRel = {
    [SpatialRelation.Intersect]: 'esriSpatialRelIntersects',
    [SpatialRelation.Contain]: 'esriSpatialRelContains',
    [SpatialRelation.Cross]: 'esriSpatialRelCrosses',
    [SpatialRelation.EnvelopeIntersect]: 'esriSpatialRelEnvelopeIntersects',
    [SpatialRelation.IndexIntersect]: 'esriSpatialRelIndexIntersects',
    [SpatialRelation.Overlap]: 'esriSpatialRelOverlaps',
    [SpatialRelation.Touch]: 'esriSpatialRelTouches',
    [SpatialRelation.Within]: 'esriSpatialRelWithin'
};
var UnitType;
(function (UnitType) {
    UnitType["Miles"] = "Miles";
    UnitType["Kilometers"] = "Kilometers";
    UnitType["Feet"] = "Feet";
    UnitType["Meters"] = "Meters";
    UnitType["NauticalMiles"] = "NauticalMiles";
})(UnitType || (UnitType = {}));
const mapJSAPIUnitToDsUnit = {
    [UnitType.Miles]: 'esriSRUnit_StatuteMile',
    [UnitType.Kilometers]: 'esriSRUnit_Kilometer',
    [UnitType.Feet]: 'esriSRUnit_Foot',
    [UnitType.Meters]: 'esriSRUnit_Meter',
    [UnitType.NauticalMiles]: 'esriSRUnit_NauticalMile'
};
var ListDirection;
(function (ListDirection) {
    ListDirection["Horizontal"] = "Horizontal";
    ListDirection["Vertical"] = "Vertical";
})(ListDirection || (ListDirection = {}));
var PagingType;
(function (PagingType) {
    PagingType["MultiPage"] = "MultiPage";
    PagingType["LazyLoad"] = "LazyLoad";
    PagingType["Simple"] = "Simple";
})(PagingType || (PagingType = {}));
var FieldsType;
(function (FieldsType) {
    FieldsType["PopupSetting"] = "PopupSetting";
    FieldsType["SelectAttributes"] = "SelectAttributes";
})(FieldsType || (FieldsType = {}));
var SortDirection;
(function (SortDirection) {
    SortDirection["Asc"] = "Asc";
    SortDirection["Desc"] = "Desc";
})(SortDirection || (SortDirection = {}));
var ResultSelectMode;
(function (ResultSelectMode) {
    ResultSelectMode["Single"] = "Single";
    ResultSelectMode["Multiple"] = "Multiple";
})(ResultSelectMode || (ResultSelectMode = {}));
var SymbolType;
(function (SymbolType) {
    SymbolType["DefaultSymbol"] = "DefaultSymbol";
    SymbolType["CustomSymbol"] = "CustomSymbol";
})(SymbolType || (SymbolType = {}));


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/data-actions/add-to-map-action.tsx":
/*!*************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/data-actions/add-to-map-action.tsx ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createAddToMapAction: () => (/* binding */ createAddToMapAction)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _runtime_selection_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../runtime/selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/**
 * Custom "Add to Map" data action for QuerySimple widget.
 *
 * This action replaces the framework's "Show on Map" action with a custom
 * implementation that uses QuerySimple's selection process (selectRecordsAndPublish).
 * This ensures consistent behavior with query results and proper integration
 * with the widget's "Clear results" functionality.
 */
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_2__.createQuerySimpleDebugLogger)();
/**
 * Creates a custom "Add to Map" data action that uses QuerySimple's selection process.
 *
 * This action replaces the framework's "Show on Map" action and ensures consistent
 * behavior with QuerySimple's query results by using the same selection mechanism.
 *
 * @param widgetId - The widget ID that provides this action
 * @param outputDS - The output data source (used for selection on the origin layer)
 * @param intl - The Intl object for internationalization
 * @param queryItem - Optional query item configuration (for zoomToSelected setting)
 * @param runtimeZoomToSelected - Optional runtime zoom override from the query form
 * @returns A DataAction object that can be used by DataActionList
 */
function createAddToMapAction(widgetId, outputDS, intl, queryItem, runtimeZoomToSelected) {
    return {
        id: `${widgetId}-addToMap`,
        name: 'addToMap',
        label: intl.formatMessage({ id: 'addToMap', defaultMessage: 'Add to map' }),
        // Icon matches the framework's "Show on Map" action for consistency
        icon: (__webpack_require__(/*! ../runtime/assets/icons/show-on-map.svg */ "./your-extensions/widgets/query-simple/src/runtime/assets/icons/show-on-map.svg")["default"]) || __webpack_require__(/*! ../runtime/assets/icons/show-on-map.svg */ "./your-extensions/widgets/query-simple/src/runtime/assets/icons/show-on-map.svg"),
        // Note: Index may not control position if extraActions are always appended after framework actions
        index: -100,
        widgetId,
        intl,
        supportProviderWidget: true,
        /**
         * Determines if this action can process the given data sets.
         * Supports Records level actions with feature data records.
         */
        isSupported: (dataSets, dataLevel, actionWidgetId) => __awaiter(this, void 0, void 0, function* () {
            debugLogger.log('DATA-ACTION', {
                action: 'addToMap-isSupported',
                widgetId,
                actionWidgetId,
                dataLevel,
                dataSetsCount: (dataSets === null || dataSets === void 0 ? void 0 : dataSets.length) || 0,
                hasOutputDS: !!outputDS
            });
            // Only support Records level actions
            if (dataLevel !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataLevel.Records) {
                debugLogger.log('DATA-ACTION', {
                    action: 'addToMap-isSupported',
                    result: false,
                    reason: 'Not Records level'
                });
                return false;
            }
            // Need at least one data set with records
            if (!dataSets || dataSets.length === 0) {
                debugLogger.log('DATA-ACTION', {
                    action: 'addToMap-isSupported',
                    result: false,
                    reason: 'No data sets'
                });
                return false;
            }
            // Check if we have records and output data source
            const hasRecords = dataSets.some(ds => ds.records && ds.records.length > 0);
            const supported = hasRecords && !!outputDS;
            debugLogger.log('DATA-ACTION', {
                action: 'addToMap-isSupported',
                result: supported,
                hasRecords,
                recordsCount: dataSets.reduce((sum, ds) => { var _a; return sum + (((_a = ds.records) === null || _a === void 0 ? void 0 : _a.length) || 0); }, 0)
            });
            return supported;
        }),
        /**
         * Executes the action by selecting records using QuerySimple's selection process.
         */
        onExecute: (dataSets, dataLevel, actionWidgetId) => __awaiter(this, void 0, void 0, function* () {
            debugLogger.log('DATA-ACTION', {
                action: 'addToMap-onExecute',
                widgetId,
                actionWidgetId,
                dataLevel,
                dataSetsCount: (dataSets === null || dataSets === void 0 ? void 0 : dataSets.length) || 0,
                hasOutputDS: !!outputDS
            });
            if (!outputDS || dataLevel !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataLevel.Records) {
                debugLogger.log('DATA-ACTION', {
                    action: 'addToMap-onExecute',
                    result: false,
                    reason: !outputDS ? 'No outputDS' : 'Not Records level'
                });
                return false;
            }
            // Collect all records from all data sets
            const allRecords = [];
            dataSets.forEach(dataSet => {
                if (dataSet.records && dataSet.records.length > 0) {
                    // Filter to only FeatureDataRecord types
                    const featureRecords = dataSet.records.filter((record) => {
                        return record && typeof record.getGeometry === 'function';
                    });
                    allRecords.push(...featureRecords);
                }
            });
            if (allRecords.length === 0) {
                debugLogger.log('DATA-ACTION', {
                    action: 'addToMap-onExecute',
                    result: false,
                    reason: 'No feature records found'
                });
                return false;
            }
            // Get record IDs
            const recordIds = allRecords.map(record => record.getId());
            debugLogger.log('DATA-ACTION', {
                action: 'addToMap-onExecute',
                recordsCount: allRecords.length,
                recordIds: recordIds.slice(0, 10), // Log first 10 IDs
                outputDSId: outputDS.id
            });
            // Use QuerySimple's selection process - selects on origin layer and publishes selection messages
            // This ensures consistent behavior with query results and proper integration with "Clear results"
            try {
                (0,_runtime_selection_utils__WEBPACK_IMPORTED_MODULE_1__.selectRecordsAndPublish)(widgetId, outputDS, recordIds, allRecords, true);
                // Note: Zoom is now handled by the separate "Zoom To" action in the DataActionList
                // Users can click "Zoom To" from the action menu if they want to zoom to selected records
                debugLogger.log('DATA-ACTION', {
                    action: 'addToMap-onExecute',
                    result: true,
                    message: 'Successfully selected records and published selection message'
                });
                return true;
            }
            catch (error) {
                debugLogger.log('DATA-ACTION', {
                    action: 'addToMap-onExecute',
                    result: false,
                    error: error instanceof Error ? error.message : String(error),
                    errorStack: error instanceof Error ? error.stack : undefined
                });
                return false;
            }
        }),
        /**
         * Cleanup method (required by DataAction interface)
         */
        destroy: () => {
            // No cleanup needed
        }
    };
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/data-actions/index.tsx":
/*!*************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/data-actions/index.tsx ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getExtraActions: () => (/* binding */ getExtraActions)
/* harmony export */ });
/* harmony import */ var _add_to_map_action__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./add-to-map-action */ "./your-extensions/widgets/query-simple/src/data-actions/add-to-map-action.tsx");
/* harmony import */ var _zoom_to_action__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./zoom-to-action */ "./your-extensions/widgets/query-simple/src/data-actions/zoom-to-action.tsx");


/**
 * QuerySimple Custom Data Actions
 *
 * Returns custom data actions for the widget.
 * Includes custom "Zoom To" and "Add to Map" actions that use QuerySimple's processes.
 *
 * @param widgetId - The widget ID
 * @param outputDS - The output data source (null/undefined if not available)
 * @param mapView - The map view (null/undefined if not available)
 * @param intl - The Intl object for internationalization
 * @param queryItem - Optional query item configuration
 * @param runtimeZoomToSelected - Optional runtime zoom override from the query form
 * @returns Array of custom DataAction objects (empty if conditions not met)
 */
function getExtraActions(widgetId, outputDS, mapView, intl, queryItem, runtimeZoomToSelected) {
    const actions = [];
    // Add "Zoom To" action if we have mapView and intl
    if (mapView && intl) {
        actions.push((0,_zoom_to_action__WEBPACK_IMPORTED_MODULE_1__.createZoomToAction)(widgetId, mapView, intl));
    }
    // Add "Add to Map" action if we have outputDS and intl
    if (outputDS && intl) {
        actions.push((0,_add_to_map_action__WEBPACK_IMPORTED_MODULE_0__.createAddToMapAction)(widgetId, outputDS, intl, queryItem, runtimeZoomToSelected));
    }
    return actions;
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/data-actions/zoom-to-action.tsx":
/*!**********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/data-actions/zoom-to-action.tsx ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createZoomToAction: () => (/* binding */ createZoomToAction)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/* harmony import */ var _runtime_zoom_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../runtime/zoom-utils */ "./your-extensions/widgets/query-simple/src/runtime/zoom-utils.ts");
/**
 * Custom "Zoom To" data action for QuerySimple widget.
 *
 * This action replaces the framework's "Zoom To" action with a custom
 * implementation that uses QuerySimple's zoom logic (mapView.goTo with padding).
 * This ensures consistent zoom behavior with proper padding.
 */
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__.createQuerySimpleDebugLogger)();
/**
 * Creates a custom "Zoom To" data action that uses QuerySimple's zoom logic.
 *
 * This action replaces the framework's "Zoom To" action and ensures consistent
 * zoom behavior with padding using mapView.goTo().
 *
 * @param widgetId - The widget ID that provides this action
 * @param mapView - The map view to zoom (MapView or SceneView)
 * @param intl - The Intl object for internationalization
 * @returns A DataAction object that can be used by DataActionList
 */
function createZoomToAction(widgetId, mapView, intl) {
    return {
        id: `${widgetId}-zoomTo`,
        name: 'querySimpleZoomTo', // Use unique name to avoid conflict with framework action
        label: intl.formatMessage({ id: 'zoomToSelected', defaultMessage: 'Zoom to selected' }),
        // Use the same icon as the framework's zoom action (from ExB configuration page)
        icon: (__webpack_require__(/*! ../runtime/assets/icons/zoom-to.svg */ "./your-extensions/widgets/query-simple/src/runtime/assets/icons/zoom-to.svg")["default"]) || __webpack_require__(/*! ../runtime/assets/icons/zoom-to.svg */ "./your-extensions/widgets/query-simple/src/runtime/assets/icons/zoom-to.svg"),
        index: -90, // Position before Add to Map (-100)
        widgetId,
        intl,
        supportProviderWidget: true,
        /**
         * Determines if this action can process the given data sets.
         * Supports Records level actions with feature data records.
         */
        isSupported: (dataSets, dataLevel, actionWidgetId) => __awaiter(this, void 0, void 0, function* () {
            debugLogger.log('DATA-ACTION', {
                action: 'zoomTo-isSupported',
                widgetId,
                actionWidgetId,
                dataLevel,
                dataSetsCount: (dataSets === null || dataSets === void 0 ? void 0 : dataSets.length) || 0,
                hasMapView: !!mapView
            });
            // Only support Records level actions
            if (dataLevel !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataLevel.Records) {
                debugLogger.log('DATA-ACTION', {
                    action: 'zoomTo-isSupported',
                    result: false,
                    reason: 'Not Records level'
                });
                return false;
            }
            // Need at least one data set with records and a map view
            if (!dataSets || dataSets.length === 0 || !mapView) {
                debugLogger.log('DATA-ACTION', {
                    action: 'zoomTo-isSupported',
                    result: false,
                    reason: !dataSets || dataSets.length === 0 ? 'No data sets' : 'No mapView'
                });
                return false;
            }
            // Check if we have records
            const hasRecords = dataSets.some(ds => ds.records && ds.records.length > 0);
            debugLogger.log('DATA-ACTION', {
                action: 'zoomTo-isSupported',
                result: hasRecords,
                recordsCount: dataSets.reduce((sum, ds) => { var _a; return sum + (((_a = ds.records) === null || _a === void 0 ? void 0 : _a.length) || 0); }, 0)
            });
            return hasRecords;
        }),
        /**
         * Executes the action by zooming to records using the shared zoom utility.
         */
        onExecute: (dataSets, dataLevel, actionWidgetId) => __awaiter(this, void 0, void 0, function* () {
            debugLogger.log('DATA-ACTION', {
                action: 'zoomTo-onExecute',
                widgetId,
                actionWidgetId,
                dataLevel,
                dataSetsCount: (dataSets === null || dataSets === void 0 ? void 0 : dataSets.length) || 0,
                hasMapView: !!mapView
            });
            if (!mapView || dataLevel !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataLevel.Records) {
                // BUG-GRAPHICS-001: Zoom operations fail when graphics layer is disabled
                if (!mapView) {
                    debugLogger.log('BUG', {
                        bugId: 'BUG-GRAPHICS-001',
                        category: 'GRAPHICS',
                        event: 'zoom-operation-failed-graphics-layer-disabled',
                        widgetId,
                        operation: 'zoom-to-selected-action',
                        dataSetsCount: (dataSets === null || dataSets === void 0 ? void 0 : dataSets.length) || 0,
                        description: 'Zoom to selected action attempted but mapView is unavailable (likely because useGraphicsLayerForHighlight is disabled)',
                        workaround: 'Enable useGraphicsLayerForHighlight in widget settings',
                        targetResolution: 'r019.0'
                    });
                }
                debugLogger.log('DATA-ACTION', {
                    action: 'zoomTo-onExecute',
                    result: false,
                    reason: !mapView ? 'No mapView' : 'Not Records level'
                });
                return false;
            }
            // Collect all records from all data sets
            const allRecords = [];
            dataSets.forEach(dataSet => {
                if (dataSet.records && dataSet.records.length > 0) {
                    // Filter to only FeatureDataRecord types
                    const featureRecords = dataSet.records.filter((record) => {
                        return record && typeof record.getGeometry === 'function';
                    });
                    allRecords.push(...featureRecords);
                }
            });
            if (allRecords.length === 0) {
                debugLogger.log('DATA-ACTION', {
                    action: 'zoomTo-onExecute',
                    result: false,
                    reason: 'No feature records found'
                });
                return false;
            }
            try {
                // Use the shared zoom utility function
                yield (0,_runtime_zoom_utils__WEBPACK_IMPORTED_MODULE_2__.zoomToRecords)(mapView, allRecords);
                debugLogger.log('DATA-ACTION', {
                    action: 'zoomTo-onExecute',
                    result: true,
                    message: 'Successfully zoomed to features',
                    recordsCount: allRecords.length
                });
                return true;
            }
            catch (error) {
                debugLogger.log('DATA-ACTION', {
                    action: 'zoomTo-onExecute',
                    result: false,
                    error: error instanceof Error ? error.message : String(error),
                    errorStack: error instanceof Error ? error.stack : undefined
                });
                return false;
            }
        }),
        /**
         * Cleanup method (required by DataAction interface)
         */
        destroy: () => {
            // No cleanup needed
        }
    };
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/default-query-item.ts":
/*!************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/default-query-item.ts ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DEFAULT_QUERY_ITEM: () => (/* binding */ DEFAULT_QUERY_ITEM)
/* harmony export */ });
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./config */ "./your-extensions/widgets/query-simple/src/config.ts");

const DEFAULT_QUERY_ITEM = {
    icon: null,
    displayLabel: true,
    sqlExprObj: null,
    useAttributeFilter: true,
    useSpatialFilter: true,
    spatialMapWidgetIds: [],
    spatialFilterTypes: [],
    spatialInteractiveCreateToolTypes: [
        _config__WEBPACK_IMPORTED_MODULE_0__.CreateToolType.Point,
        _config__WEBPACK_IMPORTED_MODULE_0__.CreateToolType.Polyline,
        _config__WEBPACK_IMPORTED_MODULE_0__.CreateToolType.Polygon,
        _config__WEBPACK_IMPORTED_MODULE_0__.CreateToolType.Rectangle,
        _config__WEBPACK_IMPORTED_MODULE_0__.CreateToolType.Circle
    ],
    spatialInteractiveEnableBuffer: false,
    spatialInteractiveBufferDistance: 0,
    spatialInteractiveBufferUnit: _config__WEBPACK_IMPORTED_MODULE_0__.UnitType.Meters,
    spatialRelations: [_config__WEBPACK_IMPORTED_MODULE_0__.SpatialRelation.Intersect],
    spatialRelationUseDataSources: [],
    spatialRelationEnableSelectTool: false,
    spatialRelationEnableBuffer: false,
    spatialRelationBufferDistance: 0,
    spatialRelationBufferUnit: _config__WEBPACK_IMPORTED_MODULE_0__.UnitType.Meters,
    resultListDirection: _config__WEBPACK_IMPORTED_MODULE_0__.ListDirection.Vertical,
    resultPagingStyle: _config__WEBPACK_IMPORTED_MODULE_0__.PagingType.MultiPage,
    resultFieldsType: _config__WEBPACK_IMPORTED_MODULE_0__.FieldsType.PopupSetting,
    resultSymbolType: _config__WEBPACK_IMPORTED_MODULE_0__.SymbolType.DefaultSymbol,
    resultCustomSymbol: {
        angle: 0,
        color: [255, 255, 255, 255],
        outline: {
            color: [255, 255, 255, 255],
            style: 'esriSLSSolid',
            type: 'esriSLS',
            width: 1
        },
        size: 6,
        style: 'esriSMSCircle',
        type: 'esriSMS',
        xoffset: 0,
        yoffset: 0
    },
    resultAllowChangeSymbol: false,
    allowExport: false,
    sortOptions: [],
    zoomToSelected: true,
    itemSizeMap: {
        arrangementHorizontalPopper: {
            minSize: { width: 300, height: 300 },
            defaultSize: { width: 360, height: 480 }
        }
    }
};


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/assets/icons/show-on-map.svg":
/*!***************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/assets/icons/show-on-map.svg ***!
  \***************************************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M1 1v14h14V1zm9.082 13c-.005-.037-.113-.274-.122-.309a1.5 1.5 0 0 0 .718-1.267 1.2 1.2 0 0 0-.053-.358c.152-.176.263-.383.326-.607q.046.003.093.003c.3.002.593-.091.836-.266q.06.066.126.124c.42.412.977.654 1.564.68H14v2h-3.918M14 11h-.43a1.46 1.46 0 0 1-.906-.433c-.264-.23-.258-.782-.617-.782-.482 0-.52.677-1.003.677-.219 0-.38-.177-.599-.177-.193 0-.445.102-.445.293v.502c0 .424-.506.508-.506.934 0 .171.184.236.184.41 0 .58-.893.502-.893 1.08 0 .191.215.305.215.486V14H6.375q.087-.243.09-.502c0-.547-1.043-.393-1.207-.72-.407-.813.693-1.022.693-1.673 0-.16-.082-.488-.334-.513-.351-.035-.443.154-.797.154a.406.406 0 0 1-.437-.36c0-.386.308-.566.308-.952 0-.25-.102-.393-.102-.643a.62.62 0 0 1 .59-.643c.323 0 .464.264.618.54a.64.64 0 0 0 .617.308c.49 0 .798-.61.798-.977a.47.47 0 0 1 .437-.488c.347 0 .476.36.824.36.57 0 .55-.756 1.053-1.03.618-.332.438-1.052.36-1.44-.032-.169.29-.5.464-.487.72.05.412-.54.412-.823q0-.073.022-.142c.111-.332.595-.438.595-.836 0-.281-.233-.41-.233-.693a.65.65 0 0 1 .22-.44H14zM2 14V2h8.278c-.013.077-.132.356-.132.44 0 .194.038.387.112.567a1.6 1.6 0 0 0-.422.643 1.4 1.4 0 0 0-.074.442 1.7 1.7 0 0 0-.536.43 1.32 1.32 0 0 0-.32 1.091q.046.205.066.414a2 2 0 0 0-.649.67 1.46 1.46 0 0 0-.674-.166 1.45 1.45 0 0 0-1.383 1.086 1.44 1.44 0 0 0-1.086-.469 1.62 1.62 0 0 0-1.591 1.643c0 .254.113.293.084.574s-.29.535-.29 1.022a1.37 1.37 0 0 0 .984 1.29 1.58 1.58 0 0 0-.003 1.549c.143.286.636.774.534.774z\"></path></svg>"

/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/assets/icons/zoom-to.svg":
/*!***********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/assets/icons/zoom-to.svg ***!
  \***********************************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"currentColor\" fill-rule=\"evenodd\" d=\"M0 10.5V12a1 1 0 0 0 1 1h1.5v-1H1v-1.5zM2.5 1H1a1 1 0 0 0-1 1v1.5h1V2h1.5zM0 8.5h1v-3H0zM4.5 1v1h3V1zm5 0v1H11v1.5h1V2a1 1 0 0 0-1-1zM6.318 13.682a4.5 4.5 0 0 0 5.991.334l1.848 1.848.707-.707-1.847-1.848a4.5 4.5 0 1 0-6.699.373m.707-.707a3.5 3.5 0 1 1 4.95-4.95 3.5 3.5 0 0 1-4.95 4.95M9 13v-2H7v-1h2V8h1v2h2v1h-2v2z\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/buffer-input.tsx":
/*!***************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/buffer-input.tsx ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BufferInput: () => (/* binding */ BufferInput)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _query_task_context__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./query-task-context */ "./your-extensions/widgets/query-simple/src/runtime/query-task-context.tsx");

/** @jsx jsx */





function BufferInput(props) {
    const { distance = 0, unit = _config__WEBPACK_IMPORTED_MODULE_3__.UnitType.Meters, onBufferChange } = props;
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.defaultMessages, _translations_default__WEBPACK_IMPORTED_MODULE_4__["default"]);
    const [d, setD] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(distance);
    const [u, setU] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(unit);
    const queryTaskContext = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useContext(_query_task_context__WEBPACK_IMPORTED_MODULE_5__.QueryTaskContext);
    const resetSymbolRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(queryTaskContext.resetSymbol);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        let changed = false;
        if (distance !== d) {
            setD(distance);
            changed = true;
        }
        if (unit !== u) {
            setU(unit);
            changed = true;
        }
        if (changed) {
            onBufferChange(distance, unit);
        }
        // eslint-disable-next-line react-hooks/exhaustive-deps
    }, [distance, unit]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (queryTaskContext.resetSymbol && queryTaskContext.resetSymbol !== resetSymbolRef.current) {
            resetSymbolRef.current = queryTaskContext.resetSymbol;
            setD(distance);
            setU(unit);
            onBufferChange(distance, unit);
        }
    }, [queryTaskContext.resetSymbol, distance, unit, onBufferChange]);
    const handleDistanceChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((value) => {
        setD(value);
    }, []);
    const handleDistanceAccepted = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((value) => {
        setD(value);
        onBufferChange(value, u);
    }, [onBufferChange, u]);
    const handleBufferUnitChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((e) => {
        setU(e.target.value);
        onBufferChange(d, e.target.value);
    }, [onBufferChange, d]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.NumericInput, { "aria-label": getI18nMessage('theBufferDistance'), className: 'mr-1', value: d, onChange: handleDistanceChange, onAcceptValue: handleDistanceAccepted }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Select, { "aria-label": getI18nMessage('unit'), value: u, onChange: handleBufferUnitChange, children: Object.values(_config__WEBPACK_IMPORTED_MODULE_3__.UnitType).map((value) => ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: value, children: getI18nMessage(`unit_${value}`) }, value))) })] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/components/feature-info.tsx":
/*!**************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/components/feature-info.tsx ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   LoadStatus: () => (/* binding */ LoadStatus),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_icons_filled_directional_right__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-icons/filled/directional/right */ "./jimu-icons/filled/directional/right.tsx");
/* harmony import */ var jimu_icons_filled_directional_down__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jimu-icons/filled/directional/down */ "./jimu-icons/filled/directional/down.tsx");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");

/** @jsx jsx */
// This file is duplicated from '../../../../feature-info/src/runtime/components/feature-info'






const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_6__.createQuerySimpleDebugLogger)();
var LoadStatus;
(function (LoadStatus) {
    LoadStatus["Pending"] = "Pending";
    LoadStatus["Fulfilled"] = "Fulfilled";
    LoadStatus["Rejected"] = "Rejected";
})(LoadStatus || (LoadStatus = {}));
const style = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
  border: 1px solid var(--sys-color-divider-secondary);
  .esri-widget__heading {
    font-size: 0.875rem !important;
    font-weight: 500 !important;
    margin: 0;
    color: var(--sys-color-surface-paper-text);
  }

  .esri-feature__content-element {
    padding: 0;
  }

  .jimu-btn.expanded {
    align-self: flex-start;
  }
  
  // Larger expand/collapse button for better touch targets
  .jimu-btn[aria-label*="expand"],
  .jimu-btn[aria-label*="collapse"] {
    min-width: 32px;
    min-height: 32px;
    padding: 6px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .esri-feature.esri-widget {
    background-color: transparent;
  }
`;
class FeatureInfo extends jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.PureComponent {
    constructor(props) {
        var _a, _b, _c, _d;
        super(props);
        this.toggleExpanded = (e) => {
            e.stopPropagation();
            this.setState({ showContent: !this.state.showContent });
        };
        const { togglable = false, expandByDefault } = this.props;
        const recordId = ((_b = (_a = this.props.graphic) === null || _a === void 0 ? void 0 : _a.attributes) === null || _b === void 0 ? void 0 : _b.OBJECTID) || ((_d = (_c = this.props.graphic) === null || _c === void 0 ? void 0 : _c.attributes) === null || _d === void 0 ? void 0 : _d.objectid) || 'unknown';
        const initialShowContent = !togglable || expandByDefault;
        debugLogger.log('EXPAND-COLLAPSE', {
            event: 'FeatureInfo-constructor',
            recordId,
            togglable,
            expandByDefault,
            initialShowContent,
            timestamp: Date.now()
        });
        this.featureContainer = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.createRef();
        this.state = {
            showContent: initialShowContent,
            loadStatus: LoadStatus.Pending
        };
    }
    componentDidMount() {
        this.createFeature();
    }
    componentDidUpdate(prevProps) {
        var _a, _b, _c, _d, _e, _f, _g, _h;
        if (this.feature) {
            if (prevProps.popupTemplate !== this.props.popupTemplate ||
                prevProps.defaultPopupTemplate !== this.props.defaultPopupTemplate ||
                prevProps.graphic !== this.props.graphic) {
                this.destroyFeature();
                this.createFeature();
            }
            else {
                this.feature.visibleElements = this.getVisibleElements();
            }
        }
        // Sync expandByDefault prop changes (when user clicks Expand All/Collapse All)
        // This ensures all items respect the global expand/collapse state
        if (prevProps.expandByDefault !== this.props.expandByDefault) {
            const { togglable = false, expandByDefault } = this.props;
            const recordId = ((_b = (_a = this.props.graphic) === null || _a === void 0 ? void 0 : _a.attributes) === null || _b === void 0 ? void 0 : _b.OBJECTID) || ((_d = (_c = this.props.graphic) === null || _c === void 0 ? void 0 : _c.attributes) === null || _d === void 0 ? void 0 : _d.objectid) || 'unknown';
            debugLogger.log('EXPAND-COLLAPSE', {
                event: 'expandByDefault-prop-changed',
                recordId,
                prevExpandByDefault: prevProps.expandByDefault,
                newExpandByDefault: expandByDefault,
                togglable,
                currentShowContent: this.state.showContent,
                willUpdateState: togglable,
                timestamp: Date.now()
            });
            if (togglable) {
                this.setState({ showContent: expandByDefault }, () => {
                    debugLogger.log('EXPAND-COLLAPSE', {
                        event: 'FeatureInfo-state-updated',
                        recordId,
                        newShowContent: this.state.showContent,
                        timestamp: Date.now()
                    });
                });
            }
        }
        // Log all componentDidUpdate calls to track remounts
        const recordId = ((_f = (_e = this.props.graphic) === null || _e === void 0 ? void 0 : _e.attributes) === null || _f === void 0 ? void 0 : _f.OBJECTID) || ((_h = (_g = this.props.graphic) === null || _g === void 0 ? void 0 : _g.attributes) === null || _h === void 0 ? void 0 : _h.objectid) || 'unknown';
        if (prevProps.graphic !== this.props.graphic ||
            prevProps.popupTemplate !== this.props.popupTemplate ||
            prevProps.defaultPopupTemplate !== this.props.defaultPopupTemplate) {
            debugLogger.log('EXPAND-COLLAPSE', {
                event: 'FeatureInfo-props-changed-recreate',
                recordId,
                graphicChanged: prevProps.graphic !== this.props.graphic,
                popupTemplateChanged: prevProps.popupTemplate !== this.props.popupTemplate,
                defaultPopupTemplateChanged: prevProps.defaultPopupTemplate !== this.props.defaultPopupTemplate,
                expandByDefault: this.props.expandByDefault,
                currentShowContent: this.state.showContent,
                timestamp: Date.now()
            });
        }
    }
    destroyFeature() {
        this.feature && !this.feature.destroyed && this.feature.destroy();
    }
    getVisibleElements() {
        const { togglable = false } = this.props;
        const { showContent } = this.state;
        const expanded = togglable ? showContent : true;
        return {
            title: true,
            content: {
                fields: expanded,
                text: expanded,
                media: expanded,
                attachments: expanded
            },
            lastEditedInfo: false
        };
    }
    createFeature() {
        let featureModulePromise;
        if (this.Feature) {
            featureModulePromise = Promise.resolve();
        }
        else {
            featureModulePromise = (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.loadArcGISJSAPIModules)([
                'esri/widgets/Feature'
            ]).then(modules => {
                [
                    this.Feature
                ] = modules;
            });
        }
        return featureModulePromise.then(() => {
            var _a, _b, _c, _d;
            // Check if component is still mounted before trying to append
            // This prevents errors when component unmounts during async module loading
            if (!this.featureContainer.current) {
                // Component was unmounted, abort
                return;
            }
            const container = document && document.createElement('div');
            container.className = 'jimu-widget';
            this.featureContainer.current.appendChild(container);
            const originDS = this.props.dataSource.getOriginDataSources();
            const rootDataSource = (_a = originDS === null || originDS === void 0 ? void 0 : originDS[0]) === null || _a === void 0 ? void 0 : _a.getRootDataSource();
            this.destroyFeature();
            const layer = this.props.graphic.layer;
            if (this.props.popupTemplate) {
                this.props.graphic.popupTemplate = this.props.popupTemplate;
            }
            else if (layer) {
                // set popupTemplate with layer's popupTemplate or defaultPopupTemplate
                this.props.graphic.popupTemplate = (_b = layer.popupTemplate) !== null && _b !== void 0 ? _b : this.props.defaultPopupTemplate;
            }
            else {
                this.props.graphic.popupTemplate = this.props.defaultPopupTemplate;
            }
            if (layer && !layer.popupTemplate) {
                layer.popupTemplate = this.props.popupTemplate || this.props.defaultPopupTemplate;
            }
            this.feature = new this.Feature({
                container: container,
                defaultPopupTemplateEnabled: true,
                // @ts-expect-error
                spatialReference: ((_d = (_c = this.props.dataSource) === null || _c === void 0 ? void 0 : _c.layer) === null || _d === void 0 ? void 0 : _d.spatialReference) || null,
                // @ts-expect-error
                map: (rootDataSource === null || rootDataSource === void 0 ? void 0 : rootDataSource.map) || null,
                graphic: this.props.graphic,
                visibleElements: this.getVisibleElements()
            });
        }).then(() => {
            this.setState({ loadStatus: LoadStatus.Fulfilled });
        });
    }
    render() {
        const { togglable = false, intl } = this.props;
        const { showContent } = this.state;
        return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'feature-info-component d-flex align-items-center p-1', css: style, children: [togglable && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_3__.Button, { "aria-label": intl.formatMessage({ id: showContent ? 'collapse' : 'expand' }), className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-outline-inside flex-shrink-0', { expanded: showContent }), variant: 'text', color: 'inherit', icon: true, size: 'sm', onClick: this.toggleExpanded, css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              min-width: 32px;
              min-height: 32px;
              padding: 6px;
              display: flex;
              align-items: center;
              justify-content: center;
            `, children: showContent ? (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_filled_directional_down__WEBPACK_IMPORTED_MODULE_5__.DownFilled, { size: 'm' }) : (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_filled_directional_right__WEBPACK_IMPORTED_MODULE_4__.RightFilled, { size: 'm', autoFlip: true }) })), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'flex-grow-1', ref: this.featureContainer })] }));
    }
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.injectIntl)(FeatureInfo));


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/geometry-from-draw.tsx":
/*!*********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/geometry-from-draw.tsx ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GeometryFromDraw: () => (/* binding */ GeometryFromDraw)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _interactive_draw_tool__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./interactive-draw-tool */ "./your-extensions/widgets/query-simple/src/runtime/interactive-draw-tool.tsx");
/* harmony import */ var _buffer_input__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./buffer-input */ "./your-extensions/widgets/query-simple/src/runtime/buffer-input.tsx");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _query_task_context__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./query-task-context */ "./your-extensions/widgets/query-simple/src/runtime/query-task-context.tsx");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};

/** @jsx jsx */







function GeometryFromDraw(props) {
    const { onGeometryChange, createToolTypes, mapWidgetIds, enableBuffer, bufferDistance, bufferUnit, onBufferChange, widgetId } = props;
    const [jimuMapView, setJimuMapView] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(jimu_ui__WEBPACK_IMPORTED_MODULE_3__.defaultMessages, _translations_default__WEBPACK_IMPORTED_MODULE_6__["default"]);
    const queryTaskContext = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useContext(_query_task_context__WEBPACK_IMPORTED_MODULE_7__.QueryTaskContext);
    const resetSymbolRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(queryTaskContext.resetSymbol);
    const getLayerFunRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const bufferOperatorRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const geodesicBufferOperatorRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const geometryServiceRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const geometryRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const bufferDistanceRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(bufferDistance);
    const bufferUnitRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(bufferUnit);
    const bufferedGraphicRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        if (enableBuffer) {
            // Parent component query-task-spatial-form will reset buffer parameter when filter type changes,
            // so defer the init buffer option in order not to be override by its parent.
            jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.defer(() => {
                onBufferChange(bufferDistance, bufferUnit);
            });
        }
        (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.loadArcGISJSAPIModules)([
            'esri/Graphic'
        ]).then((modules) => {
            const Graphic = modules[0];
            bufferedGraphicRef.current = new Graphic({
                symbol: {
                    type: 'simple-fill',
                    color: [51, 51, 204, 0.5],
                    style: 'solid',
                    outline: {
                        color: [51, 51, 204, 0.8],
                        width: 1
                    }
                }
            });
        });
    });
    const applyBufferEffect = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => __awaiter(this, void 0, void 0, function* () {
        var _a, _b, _c, _d, _e, _f;
        if (!geometryRef.current || !enableBuffer || bufferDistanceRef.current === 0) {
            bufferedGraphicRef.current.geometry = null;
            return;
        }
        // If the end user uses a point or line query geometry, then the negative buffer will not work (same effect as there is no buffer)
        const isPointNegativeBuffer = (((_a = geometryRef.current) === null || _a === void 0 ? void 0 : _a.type) === 'point' || ((_b = geometryRef.current) === null || _b === void 0 ? void 0 : _b.type) === 'multipoint') && bufferDistanceRef.current < 0;
        const isLineNegativeBuffer = ((_c = geometryRef.current) === null || _c === void 0 ? void 0 : _c.type) === 'polyline' && bufferDistanceRef.current < 0;
        if (isPointNegativeBuffer || isLineNegativeBuffer) {
            bufferedGraphicRef.current.geometry = null;
            return;
        }
        const geometry = geometryRef.current;
        // https://developers.arcgis.com/javascript/latest/api-reference/esri-geometry-geometryEngine.html#buffer
        if (((_d = geometry.spatialReference) === null || _d === void 0 ? void 0 : _d.isGeographic) && !geometry.spatialReference.isWGS84) {
            const serviceUrl = jimu_core__WEBPACK_IMPORTED_MODULE_1__.utils.getGeometryService();
            if (!geometryServiceRef.current) {
                const modules = yield (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.loadArcGISJSAPIModules)([
                    'esri/rest/geometryService',
                    'esri/rest/support/BufferParameters'
                ]);
                geometryServiceRef.current = {
                    geometryService: modules[0],
                    bufferParameters: modules[1]
                };
            }
            const { geometryService, bufferParameters: BufferParameters } = geometryServiceRef.current;
            const polygons = yield geometryService.buffer(serviceUrl, new BufferParameters({
                distances: [bufferDistanceRef.current],
                unit: jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.kebabCase(bufferUnitRef.current),
                geodesic: true,
                bufferSpatialReference: geometry.spatialReference,
                outSpatialReference: geometry.spatialReference,
                geometries: [geometry]
            }));
            bufferedGraphicRef.current.geometry = polygons[0];
        }
        else {
            if (((_e = geometry.spatialReference) === null || _e === void 0 ? void 0 : _e.isWGS84) || ((_f = geometry.spatialReference) === null || _f === void 0 ? void 0 : _f.isWebMercator)) {
                if (!geodesicBufferOperatorRef.current) {
                    geodesicBufferOperatorRef.current = yield (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.loadArcGISJSAPIModule)('esri/geometry/operators/geodesicBufferOperator');
                }
                if (!geodesicBufferOperatorRef.current.isLoaded()) {
                    yield geodesicBufferOperatorRef.current.load();
                }
                bufferedGraphicRef.current.geometry = geodesicBufferOperatorRef.current.execute(geometry, bufferDistanceRef.current, {
                    unit: jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.kebabCase(bufferUnitRef.current)
                });
            }
            else {
                if (!bufferOperatorRef.current) {
                    bufferOperatorRef.current = yield (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.loadArcGISJSAPIModule)('esri/geometry/operators/bufferOperator');
                }
                bufferedGraphicRef.current.geometry = bufferOperatorRef.current.execute(geometry, bufferDistanceRef.current, {
                    unit: jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.kebabCase(bufferUnitRef.current)
                });
            }
        }
    }), [enableBuffer]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (queryTaskContext.resetSymbol && queryTaskContext.resetSymbol !== resetSymbolRef.current) {
            resetSymbolRef.current = queryTaskContext.resetSymbol;
            getLayerFunRef.current && getLayerFunRef.current().removeAll();
            onGeometryChange(null);
        }
    }, [queryTaskContext.resetSymbol, onGeometryChange]);
    const handleJimuMapViewChanged = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((jimuMapView) => {
        // clear drawing graphics before switching map view
        const layer = getLayerFunRef.current && getLayerFunRef.current();
        if (layer) {
            layer.removeAll();
            onGeometryChange(null);
        }
        setJimuMapView((jimuMapView === null || jimuMapView === void 0 ? void 0 : jimuMapView.view) != null ? jimuMapView : null);
    }, [onGeometryChange]);
    const handleBufferChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((distance, unit) => {
        bufferDistanceRef.current = distance;
        bufferUnitRef.current = unit;
        applyBufferEffect();
        onBufferChange(distance, unit);
    }, [onBufferChange, applyBufferEffect]);
    const handleDrawEnd = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((graphic, getLayerFun, clearAfterApply) => {
        getLayerFunRef.current = getLayerFun;
        const layer = getLayerFunRef.current && getLayerFunRef.current();
        // it's possible that the geometry is the same as the previous one, only the clearAfterApply is changed.
        if (geometryRef.current !== (graphic === null || graphic === void 0 ? void 0 : graphic.geometry)) {
            geometryRef.current = graphic === null || graphic === void 0 ? void 0 : graphic.geometry;
            applyBufferEffect().then(() => {
                if (bufferedGraphicRef.current.geometry) {
                    layer === null || layer === void 0 ? void 0 : layer.add(bufferedGraphicRef.current);
                }
            });
        }
        onGeometryChange(graphic === null || graphic === void 0 ? void 0 : graphic.geometry, layer, graphic, clearAfterApply);
    }, [onGeometryChange, applyBufferEffect]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [mapWidgetIds === null || mapWidgetIds === void 0 ? void 0 : mapWidgetIds.map((mapWidgetId, x) => ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.JimuMapViewComponent, { useMapWidgetId: mapWidgetId, onActiveViewChange: handleJimuMapViewChanged }, x))), (jimuMapView === null || jimuMapView === void 0 ? void 0 : jimuMapView.view) && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_interactive_draw_tool__WEBPACK_IMPORTED_MODULE_4__.InteractiveDraw, { jimuMapView: jimuMapView, widgetId: widgetId, toolTypes: createToolTypes, onDrawEnd: handleDrawEnd }), enableBuffer && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { role: 'group', className: 'title3', "aria-label": getI18nMessage('theBufferDistance'), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `margin-top: 0.75rem;`, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'text-truncate', children: getI18nMessage('theBufferDistance') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'd-flex mt-1', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_buffer_input__WEBPACK_IMPORTED_MODULE_5__.BufferInput, { distance: bufferDistance, unit: bufferUnit, onBufferChange: handleBufferChange }) })] }))] }))] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/geometry-from-ds.tsx":
/*!*******************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/geometry-from-ds.tsx ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GeometryFromDataSource: () => (/* binding */ GeometryFromDataSource)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _buffer_input__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./buffer-input */ "./your-extensions/widgets/query-simple/src/runtime/buffer-input.tsx");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _query_task_context__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./query-task-context */ "./your-extensions/widgets/query-simple/src/runtime/query-task-context.tsx");

/** @jsx jsx */






const marginStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `margin-top: 0.75rem;`;
function getRuntimeDataSource() {
    const result = {};
    let notEmpty = false;
    const dsMap = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().getDataSources();
    Object.keys(dsMap).forEach(dsId => {
        const ds = dsMap[dsId];
        // only include the ds that has geometry
        if (ds.getGeometryType() != null && !ds.isInAppConfig() && ds.getMainDataSource().id === dsId && !ds.getDataSourceJson().isOutputFromWidget) {
            result[dsId] = ds;
            notEmpty = true;
        }
    });
    return notEmpty ? result : null;
}
function GeometryFromDataSource(props) {
    var _a;
    const { onSelectionChange, useDataSources = [], useRuntimeData, spatialRelations, enableBuffer, bufferDistance, bufferUnit, onBufferChange, onRelationChange } = props;
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.defaultMessages, _translations_default__WEBPACK_IMPORTED_MODULE_5__["default"]);
    const [currentDataSource, setCurrentDataSource] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(useDataSources[0]);
    const [runtimeDataSource, setRuntimeDataSource] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState();
    const [count, setCount] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(0);
    const [currentRelation, setCurrentRelation] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(spatialRelations === null || spatialRelations === void 0 ? void 0 : spatialRelations[0]);
    const queryTaskContext = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useContext(_query_task_context__WEBPACK_IMPORTED_MODULE_6__.QueryTaskContext);
    const resetSymbolRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(queryTaskContext.resetSymbol);
    const translate = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation();
    const spatialRelationOptions = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return Object.entries(_config__WEBPACK_IMPORTED_MODULE_3__.SpatialRelation).map(([key, value]) => ({
            value,
            label: getI18nMessage(`spatialRelation_${key}`)
        }));
    }, [getI18nMessage]);
    const loadedUseDataSources = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const loaded = [];
        useDataSources.forEach((item) => {
            var _a, _b;
            if (((_b = (_a = state.dataSourcesInfo) === null || _a === void 0 ? void 0 : _a[item.mainDataSourceId]) === null || _b === void 0 ? void 0 : _b.instanceStatus) === jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.Created) {
                loaded.push(item.dataSourceId);
            }
        });
        if (loaded.length > 0) {
            return loaded.join(',');
        }
        return '';
    });
    const numOfDs = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        var _a;
        if (!useRuntimeData) {
            return 0;
        }
        return Object.keys((_a = state.dataSourcesInfo) !== null && _a !== void 0 ? _a : {}).filter(dsId => state.dataSourcesInfo[dsId].instanceStatus === jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.Created).length;
    });
    const runtimeDataSources = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        if (numOfDs > 0) {
            return getRuntimeDataSource();
        }
    }, [numOfDs]);
    const numOfRuntimeDs = Object.keys(runtimeDataSources !== null && runtimeDataSources !== void 0 ? runtimeDataSources : {}).length;
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        if ((spatialRelations === null || spatialRelations === void 0 ? void 0 : spatialRelations.length) > 0) {
            onRelationChange(spatialRelations[0]);
        }
        if (enableBuffer) {
            onBufferChange(bufferDistance, bufferUnit);
        }
    });
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (queryTaskContext.resetSymbol && queryTaskContext.resetSymbol !== resetSymbolRef.current) {
            resetSymbolRef.current = queryTaskContext.resetSymbol;
            setCurrentRelation(spatialRelations === null || spatialRelations === void 0 ? void 0 : spatialRelations[0]);
            onRelationChange(spatialRelations === null || spatialRelations === void 0 ? void 0 : spatialRelations[0]);
        }
    }, [queryTaskContext.resetSymbol, onRelationChange, spatialRelations]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (!spatialRelations) {
            setCurrentRelation(null);
        }
        else if (!spatialRelations.includes(currentRelation)) {
            setCurrentRelation(spatialRelations[0]);
            onRelationChange(spatialRelations[0]);
        }
    }, [spatialRelations, currentRelation, onRelationChange]);
    const handleDataSourceChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((dsId) => {
        const ds = useDataSources.find((item) => item.dataSourceId === dsId);
        setCurrentDataSource((0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)(ds));
        setRuntimeDataSource(null);
    }, [useDataSources]);
    const handleRuntimeDataSourceChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((dsId) => {
        const ds = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().getDataSource(dsId);
        setRuntimeDataSource(ds);
        setCurrentDataSource(null);
    }, []);
    const handleDataSourceInfoChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        var _a;
        const ds = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().getDataSource((_a = currentDataSource === null || currentDataSource === void 0 ? void 0 : currentDataSource.dataSourceId) !== null && _a !== void 0 ? _a : runtimeDataSource === null || runtimeDataSource === void 0 ? void 0 : runtimeDataSource.id);
        const records = ds === null || ds === void 0 ? void 0 : ds.getSelectedRecords();
        if ((records === null || records === void 0 ? void 0 : records.length) > 0) {
            const geometries = records.map((record) => record.getJSAPIGeometry());
            onSelectionChange(geometries);
            setCount(records.length);
        }
        else {
            onSelectionChange(null);
            setCount(0);
        }
    }, [currentDataSource === null || currentDataSource === void 0 ? void 0 : currentDataSource.dataSourceId, runtimeDataSource === null || runtimeDataSource === void 0 ? void 0 : runtimeDataSource.id, onSelectionChange]);
    const getLabelOfSpatialRelation = (relation) => {
        return spatialRelationOptions.find(item => item.value === relation).label;
    };
    const handleSpatialRelationChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(e => {
        setCurrentRelation(e.target.value);
        onRelationChange(e.target.value);
    }, [onRelationChange]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: marginStyle, className: 'title3', children: getI18nMessage('chooseFilterLayer') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Select, { "aria-label": getI18nMessage('chooseFilterLayer'), value: (_a = currentDataSource === null || currentDataSource === void 0 ? void 0 : currentDataSource.dataSourceId) !== null && _a !== void 0 ? _a : runtimeDataSource === null || runtimeDataSource === void 0 ? void 0 : runtimeDataSource.id, children: [numOfRuntimeDs > 0 && useDataSources.length > 0 && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Option, { header: true, children: getI18nMessage('preconfigured') }), useDataSources.map((item) => {
                        const ds = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().getDataSource(item.dataSourceId);
                        if (loadedUseDataSources.includes(item.dataSourceId) || (ds === null || ds === void 0 ? void 0 : ds.getLabel())) {
                            return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Option, { value: item.dataSourceId, onClick: () => { handleDataSourceChange(item.dataSourceId); }, children: ds === null || ds === void 0 ? void 0 : ds.getLabel() }, item.dataSourceId));
                        }
                        return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Option, { children: translate('loading') }, item.dataSourceId));
                    }), numOfRuntimeDs > 0 && useDataSources.length > 0 && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Option, { divider: true }), numOfRuntimeDs > 0 && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Option, { header: true, children: getI18nMessage('runtime') }), Object.keys(runtimeDataSources !== null && runtimeDataSources !== void 0 ? runtimeDataSources : {}).map(dsId => {
                        const ds = runtimeDataSources[dsId];
                        return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Option, { value: dsId, onClick: () => { handleRuntimeDataSourceChange(dsId); }, children: ds.getLabel() }, dsId));
                    })] }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'mt-1 font-italic', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `color: var(--sys-color-surface-paper-hint);`, children: getI18nMessage('selectedRecords', { num: count }) }), (spatialRelations === null || spatialRelations === void 0 ? void 0 : spatialRelations.length) > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: marginStyle, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'text-truncate title3 mb-0', children: getI18nMessage('relationship') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Select, { "aria-label": getI18nMessage('relationship'), value: currentRelation, onChange: handleSpatialRelationChange, children: spatialRelations.map((item) => {
                            return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: item, children: getLabelOfSpatialRelation(item) }, item));
                        }) })] })), enableBuffer && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { role: 'group', "aria-label": getI18nMessage('theBufferDistance'), css: marginStyle, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'title3 text-truncate', children: getI18nMessage('theBufferDistance') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'd-flex mt-1', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_buffer_input__WEBPACK_IMPORTED_MODULE_4__.BufferInput, { distance: bufferDistance, unit: bufferUnit, onBufferChange: onBufferChange }) })] })), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceComponent, { useDataSource: currentDataSource, dataSource: runtimeDataSource, onDataSourceInfoChange: handleDataSourceInfoChange }), useDataSources.map((item) => {
                // make sure the datasource is created
                return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceComponent, { useDataSource: item }, item.dataSourceId));
            })] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/geometry-from-map.tsx":
/*!********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/geometry-from-map.tsx ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GeometryFromMap: () => (/* binding */ GeometryFromMap)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");

/** @jsx jsx */


function GeometryFromMap(props) {
    const { onGeometryChange, mapWidgetIds } = props;
    const [jimuMapView, setJimuMapView] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const PolygonRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (jimuMapView === null || jimuMapView === void 0 ? void 0 : jimuMapView.view) {
            let handler;
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.loadArcGISJSAPIModule)('esri/core/reactiveUtils').then((reactiveUtils) => {
                handler = reactiveUtils.watch(() => jimuMapView.view.extent, (extent) => {
                    if (PolygonRef.current) {
                        onGeometryChange(PolygonRef.current.fromExtent(extent));
                    }
                    else {
                        (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.loadArcGISJSAPIModules)(['esri/geometry/Polygon']).then(modules => {
                            PolygonRef.current = modules[0];
                            onGeometryChange(PolygonRef.current.fromExtent(extent));
                        });
                    }
                });
                // set initial extent
                onGeometryChange(jimuMapView.view.extent);
            });
            return () => {
                if (handler) {
                    handler.remove();
                }
            };
        }
    }, [jimuMapView, onGeometryChange]);
    const handleJimuMapViewChanged = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((jimuMapView) => {
        setJimuMapView((jimuMapView === null || jimuMapView === void 0 ? void 0 : jimuMapView.view) != null ? jimuMapView : null);
    }, []);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: mapWidgetIds === null || mapWidgetIds === void 0 ? void 0 : mapWidgetIds.map((mapWidgetId, x) => ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.JimuMapViewComponent, { useMapWidgetId: mapWidgetId, onActiveViewChange: handleJimuMapViewChanged }, x))) }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/graphics-layer-utils.ts":
/*!**********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/graphics-layer-utils.ts ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   addHighlightGraphics: () => (/* binding */ addHighlightGraphics),
/* harmony export */   cleanupGraphicsLayer: () => (/* binding */ cleanupGraphicsLayer),
/* harmony export */   clearGraphicsLayer: () => (/* binding */ clearGraphicsLayer),
/* harmony export */   createOrGetGraphicsLayer: () => (/* binding */ createOrGetGraphicsLayer),
/* harmony export */   getMapViewFromDataSource: () => (/* binding */ getMapViewFromDataSource),
/* harmony export */   removeHighlightGraphics: () => (/* binding */ removeHighlightGraphics)
/* harmony export */ });
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/**
 * Utility functions for managing graphics layer highlighting in QuerySimple widget.
 * Provides highlighting that works independently of layer visibility.
 */
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};


const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__.createQuerySimpleDebugLogger)();
// Global sequence counter for graphics operations to track timing across calls
let operationSequence = 0;
/**
 * Gets the map view from a data source's origin layer.
 * Accesses the view through the FeatureLayer's view property.
 * @param outputDS - The output data source (or any data source)
 * @returns Promise resolving to MapView or SceneView, or null if not available
 */
function getMapViewFromDataSource(outputDS) {
    return __awaiter(this, void 0, void 0, function* () {
        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s;
        const seq = ++operationSequence;
        if (!outputDS) {
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'getMapViewFromDataSource-no-outputDS',
                seq,
                timestamp: Date.now()
            });
            return null;
        }
        try {
            // Get origin data source to access the layer
            const originDataSources = outputDS.getOriginDataSources();
            const originDS = originDataSources === null || originDataSources === void 0 ? void 0 : originDataSources[0];
            if (!originDS) {
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'getMapViewFromDataSource-no-originDS',
                    outputDSId: outputDS.id,
                    timestamp: Date.now()
                });
                return null;
            }
            // Access the FeatureLayer from the data source
            const layer = originDS.layer || ((_b = (_a = originDS).getLayer) === null || _b === void 0 ? void 0 : _b.call(_a));
            if (!layer) {
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'getMapViewFromDataSource-no-layer',
                    originDSId: originDS.id,
                    timestamp: Date.now()
                });
                return null;
            }
            // Log layer properties to understand structure
            const layerKeys = Object.keys(layer).filter(key => !key.startsWith('_') &&
                typeof layer[key] !== 'function').slice(0, 20); // Limit to first 20 properties
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'getMapViewFromDataSource-layer-inspection',
                originDSId: originDS.id,
                layerId: layer.id,
                layerType: layer.type || 'unknown',
                layerKeys: layerKeys,
                hasLayerMap: !!layer.map,
                hasLayerView: !!layer.view,
                hasLayerParent: !!layer.parent,
                layerMapType: layer.map ? typeof layer.map : 'none',
                timestamp: Date.now()
            });
            // Check layer.parent for map/view access (since hasLayerParent is true)
            const parent = layer.parent;
            if (parent) {
                // Log parent properties
                const parentKeys = Object.keys(parent).filter(key => !key.startsWith('_') &&
                    typeof parent[key] !== 'function').slice(0, 20);
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'getMapViewFromDataSource-layer-parent-inspection',
                    originDSId: originDS.id,
                    layerId: layer.id,
                    parentType: parent.type || 'unknown',
                    parentKeys: parentKeys,
                    hasParentMap: !!parent.map,
                    hasParentView: !!parent.view,
                    hasParentViews: !!parent.views,
                    parentViewsLength: ((_c = parent.views) === null || _c === void 0 ? void 0 : _c.length) || 0,
                    hasParentExtent: !!parent.extent,
                    timestamp: Date.now()
                });
                // Try to get view from parent
                if (parent.view) {
                    const view = parent.view;
                    debugLogger.log('GRAPHICS-LAYER', {
                        event: 'getMapViewFromDataSource-success-via-layer-parent-view',
                        originDSId: originDS.id,
                        layerId: layer.id,
                        viewType: view.type || 'unknown',
                        timestamp: Date.now()
                    });
                    return view;
                }
                // Try to get map from parent and then view
                const parentMap = parent.map;
                if (parentMap) {
                    const view = parentMap.view ||
                        ((_e = (_d = parentMap.views) === null || _d === void 0 ? void 0 : _d.getItemAt) === null || _e === void 0 ? void 0 : _e.call(_d, 0)) ||
                        (((_f = parentMap.views) === null || _f === void 0 ? void 0 : _f.length) > 0 ? parentMap.views[0] : null);
                    if (view) {
                        debugLogger.log('GRAPHICS-LAYER', {
                            event: 'getMapViewFromDataSource-success-via-layer-parent-map',
                            originDSId: originDS.id,
                            layerId: layer.id,
                            viewType: view.type || 'unknown',
                            timestamp: Date.now()
                        });
                        return view;
                    }
                }
                // Parent might BE the view (check if it has view-like properties)
                if (parent.type === 'map' || parent.type === 'scene' || parent.extent) {
                    debugLogger.log('GRAPHICS-LAYER', {
                        event: 'getMapViewFromDataSource-success-via-layer-parent-is-view',
                        originDSId: originDS.id,
                        layerId: layer.id,
                        viewType: parent.type || 'unknown',
                        timestamp: Date.now()
                    });
                    return parent;
                }
            }
            // Try multiple approaches to get the view:
            // 1. Layer might have a direct view property
            if (layer.view) {
                const view = layer.view;
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'getMapViewFromDataSource-success-via-layer-view',
                    originDSId: originDS.id,
                    layerId: layer.id,
                    viewType: view.type || 'unknown',
                    timestamp: Date.now()
                });
                return view;
            }
            // 2. Try to get map from layer and then view from map
            const map = layer.map ||
                ((_g = layer.parent) === null || _g === void 0 ? void 0 : _g.map) ||
                layer.__map ||
                layer._map;
            if (map) {
                // Log map properties
                const mapKeys = Object.keys(map).filter(key => !key.startsWith('_') &&
                    typeof map[key] !== 'function').slice(0, 20);
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'getMapViewFromDataSource-map-found',
                    originDSId: originDS.id,
                    layerId: layer.id,
                    mapId: map.id || 'unknown',
                    mapKeys: mapKeys,
                    hasMapView: !!map.view,
                    hasMapViews: !!(map.views),
                    mapViewsLength: ((_h = map.views) === null || _h === void 0 ? void 0 : _h.length) || 0,
                    timestamp: Date.now()
                });
                const view = map.view ||
                    ((_k = (_j = map.views) === null || _j === void 0 ? void 0 : _j.getItemAt) === null || _k === void 0 ? void 0 : _k.call(_j, 0)) ||
                    (((_l = map.views) === null || _l === void 0 ? void 0 : _l.length) > 0 ? map.views[0] : null) ||
                    (map.views && map.views.length > 0 ? map.views.getItemAt(0) : null);
                if (view) {
                    debugLogger.log('GRAPHICS-LAYER', {
                        event: 'getMapViewFromDataSource-success-via-layer-map',
                        originDSId: originDS.id,
                        layerId: layer.id,
                        viewType: view.type || 'unknown',
                        timestamp: Date.now()
                    });
                    return view;
                }
            }
            // 3. Try to get root data source and access map from there
            const rootDS = originDS.getRootDataSource();
            if (rootDS) {
                const rootMap = ((_o = (_m = rootDS).getMap) === null || _o === void 0 ? void 0 : _o.call(_m)) ||
                    rootDS.map ||
                    rootDS.__map ||
                    rootDS._map;
                if (rootMap) {
                    // Log root map properties
                    const rootMapKeys = Object.keys(rootMap).filter(key => !key.startsWith('_') &&
                        typeof rootMap[key] !== 'function').slice(0, 20);
                    debugLogger.log('GRAPHICS-LAYER', {
                        event: 'getMapViewFromDataSource-root-map-found',
                        originDSId: originDS.id,
                        rootDSId: rootDS.id,
                        rootDSType: rootDS.type,
                        rootMapId: rootMap.id || 'unknown',
                        rootMapKeys: rootMapKeys,
                        hasRootMapView: !!rootMap.view,
                        hasRootMapViews: !!(rootMap.views),
                        rootMapViewsLength: ((_p = rootMap.views) === null || _p === void 0 ? void 0 : _p.length) || 0,
                        timestamp: Date.now()
                    });
                    const view = rootMap.view ||
                        ((_r = (_q = rootMap.views) === null || _q === void 0 ? void 0 : _q.getItemAt) === null || _r === void 0 ? void 0 : _r.call(_q, 0)) ||
                        (((_s = rootMap.views) === null || _s === void 0 ? void 0 : _s.length) > 0 ? rootMap.views[0] : null) ||
                        (rootMap.views && rootMap.views.length > 0 ? rootMap.views.getItemAt(0) : null);
                    if (view) {
                        debugLogger.log('GRAPHICS-LAYER', {
                            event: 'getMapViewFromDataSource-success-via-rootDS',
                            originDSId: originDS.id,
                            rootDSId: rootDS.id,
                            viewType: view.type || 'unknown',
                            timestamp: Date.now()
                        });
                        return view;
                    }
                }
                else {
                    // Log root DS properties to see what's available
                    const rootDSKeys = Object.keys(rootDS).filter(key => !key.startsWith('_') &&
                        typeof rootDS[key] !== 'function').slice(0, 20);
                    debugLogger.log('GRAPHICS-LAYER', {
                        event: 'getMapViewFromDataSource-root-ds-inspection',
                        originDSId: originDS.id,
                        rootDSId: rootDS.id,
                        rootDSType: rootDS.type,
                        rootDSKeys: rootDSKeys,
                        hasGetMap: typeof rootDS.getMap === 'function',
                        hasMap: !!rootDS.map,
                        timestamp: Date.now()
                    });
                }
            }
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'getMapViewFromDataSource-no-view',
                originDSId: originDS.id,
                layerId: layer.id,
                hasLayerMap: !!map,
                hasRootDS: !!rootDS,
                timestamp: Date.now()
            });
            return null;
        }
        catch (error) {
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'getMapViewFromDataSource-error',
                error: error instanceof Error ? error.message : String(error),
                errorStack: error instanceof Error ? error.stack : undefined,
                timestamp: Date.now()
            });
            return null;
        }
    });
}
/**
 * Gets the default highlight symbol based on geometry type.
 * Uses the map's actual highlight color from highlightOptions to match standard selection appearance.
 */
function getDefaultHighlightSymbol(geometryType, mapView) {
    // Get default highlight color from view's highlightOptions
    const highlightOptions = (mapView.highlightOptions || {});
    // Extract color - could be array [R,G,B,A] or Color object
    let highlightColor = null;
    if (highlightOptions.color) {
        // If it's a Color object, convert to array
        if (typeof highlightOptions.color === 'object' && 'toRgba' in highlightOptions.color) {
            highlightColor = highlightOptions.color.toRgba();
        }
        // If it's already an array
        else if (Array.isArray(highlightOptions.color)) {
            highlightColor = highlightOptions.color;
        }
    }
    // If no color in highlightOptions, use the ArcGIS documented default: cyan [0, 255, 255]
    if (!highlightColor) {
        highlightColor = [0, 255, 255, 1.0]; // Full opacity default
    }
    // Ensure we have 4 elements [R, G, B, A]
    const baseColor = highlightColor.slice(0, 3);
    const baseAlpha = highlightColor.length >= 4 ? highlightColor[3] : 1.0;
    // Get fill opacity from highlightOptions or use default
    const fillOpacity = highlightOptions.fillOpacity !== undefined
        ? highlightOptions.fillOpacity
        : 0.25; // Default 25% opacity for fill
    const fillColor = [...baseColor, fillOpacity];
    // Get halo opacity or use default - for outlines and lines
    const haloOpacity = highlightOptions.haloOpacity !== undefined
        ? highlightOptions.haloOpacity
        : baseAlpha; // Use the color's alpha if available, otherwise 1.0
    const outlineColor = [...baseColor, haloOpacity];
    // For lines, use full opacity to ensure visibility
    const lineOpacity = highlightOptions.haloOpacity !== undefined
        ? Math.max(highlightOptions.haloOpacity, 0.8) // At least 80% opacity
        : baseAlpha; // Use the color's alpha, or default to 1.0
    const lineColor = [...baseColor, lineOpacity];
    switch (geometryType) {
        case 'point':
        case 'multipoint':
            return {
                type: 'simple-marker',
                color: outlineColor,
                outline: {
                    color: outlineColor,
                    width: 2
                },
                size: 12
            };
        case 'polyline':
            return {
                type: 'simple-line',
                color: lineColor, // Use lineColor with proper opacity
                width: 4 // Increased width for visibility
            };
        case 'polygon':
        case 'multipolygon':
            return {
                type: 'simple-fill',
                color: fillColor,
                outline: {
                    color: outlineColor,
                    width: 2
                }
            };
        default:
            // Fallback to polygon symbol
            return {
                type: 'simple-fill',
                color: fillColor,
                outline: {
                    color: outlineColor,
                    width: 2
                }
            };
    }
}
/**
 * Creates or gets an existing graphics layer for the widget.
 * Uses a unique ID based on widget ID to ensure one layer per widget.
 */
function createOrGetGraphicsLayer(widgetId, mapView) {
    return __awaiter(this, void 0, void 0, function* () {
        const seq = ++operationSequence;
        const layerId = `querysimple-highlight-${widgetId}`;
        try {
            // Check if layer already exists
            const existingLayer = mapView.map.layers.find(layer => layer.id === layerId);
            if (existingLayer) {
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'createOrGetGraphicsLayer-found-existing',
                    seq,
                    widgetId,
                    layerId,
                    timestamp: Date.now()
                });
                return existingLayer;
            }
            // Load GraphicsLayer module
            const [GraphicsLayer] = yield (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_0__.loadArcGISJSAPIModules)(['esri/layers/GraphicsLayer']);
            // Create new graphics layer
            const graphicsLayer = new GraphicsLayer({
                id: layerId,
                title: `QuerySimple Highlights (${widgetId})`,
                listMode: 'hide', // Hide from layer list
                visible: true
            });
            // Add to map
            mapView.map.add(graphicsLayer);
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'createOrGetGraphicsLayer-created',
                seq,
                widgetId,
                layerId,
                timestamp: Date.now()
            });
            return graphicsLayer;
        }
        catch (error) {
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'createOrGetGraphicsLayer-error',
                seq,
                widgetId,
                layerId,
                error: error instanceof Error ? error.message : String(error),
                errorStack: error instanceof Error ? error.stack : undefined,
                timestamp: Date.now()
            });
            return null;
        }
    });
}
/**
 * Adds highlight graphics to the graphics layer using default map highlight color.
 * Note: This function should be called after GraphicsLayer module is loaded.
 */
function addHighlightGraphics(graphicsLayer, records, mapView) {
    return __awaiter(this, void 0, void 0, function* () {
        const seq = ++operationSequence;
        if (!graphicsLayer || !records || records.length === 0) {
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'addHighlightGraphics-skipped',
                seq,
                reason: !graphicsLayer ? 'no-graphics-layer' : 'no-records',
                recordsCount: (records === null || records === void 0 ? void 0 : records.length) || 0,
                timestamp: Date.now()
            });
            return;
        }
        // Log existing state BEFORE adding - verify assumption about duplicates
        const existingGraphicsCount = graphicsLayer.graphics.length;
        const existingRecordIds = [];
        const existingRecordIdSet = new Set();
        graphicsLayer.graphics.forEach(graphic => {
            var _a;
            const recordId = (_a = graphic.attributes) === null || _a === void 0 ? void 0 : _a.recordId;
            if (recordId) {
                existingRecordIds.push(recordId);
                existingRecordIdSet.add(recordId);
            }
        });
        // Log what we're trying to add
        const incomingRecordIds = records.map(r => r.getId());
        debugLogger.log('GRAPHICS-LAYER', {
            event: 'addHighlightGraphics-before-add',
            seq,
            graphicsLayerId: graphicsLayer.id,
            existingGraphicsCount,
            existingRecordIds: existingRecordIds.slice(0, 20), // Limit to first 20 for readability
            existingRecordIdsCount: existingRecordIds.length,
            incomingRecordIds: incomingRecordIds.slice(0, 20), // Limit to first 20
            incomingRecordIdsCount: incomingRecordIds.length,
            duplicateRecordIds: incomingRecordIds.filter(id => existingRecordIdSet.has(id)).slice(0, 20),
            duplicateCount: incomingRecordIds.filter(id => existingRecordIdSet.has(id)).length,
            timestamp: Date.now()
        });
        // Load Graphic module
        const [Graphic] = yield (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_0__.loadArcGISJSAPIModules)(['esri/Graphic']);
        let addedCount = 0;
        let skippedCount = 0;
        let duplicateCount = 0;
        const addedRecordIds = [];
        const skippedRecordIds = [];
        const duplicateRecordIds = [];
        records.forEach(record => {
            try {
                const recordId = record.getId();
                // Check if this record ID already exists in graphics layer
                if (existingRecordIdSet.has(recordId)) {
                    duplicateCount++;
                    duplicateRecordIds.push(recordId);
                    debugLogger.log('GRAPHICS-LAYER', {
                        event: 'addHighlightGraphics-duplicate-detected',
                        seq,
                        recordId,
                        graphicsLayerId: graphicsLayer.id,
                        timestamp: Date.now()
                    });
                    return; // Skip adding duplicate
                }
                const graphic = record.feature;
                if (!graphic || !graphic.geometry) {
                    skippedCount++;
                    skippedRecordIds.push(recordId);
                    return;
                }
                // Get geometry type from graphic
                const geometryType = graphic.geometry.type;
                // Create symbol using default highlight color
                const symbol = getDefaultHighlightSymbol(geometryType, mapView);
                // Create new graphic with highlight symbol
                const highlightGraphic = new Graphic({
                    geometry: graphic.geometry,
                    symbol: symbol,
                    attributes: {
                        recordId: recordId,
                        source: 'querysimple-highlight',
                        widgetId: graphicsLayer.id.replace('querysimple-highlight-', '')
                    }
                });
                graphicsLayer.add(highlightGraphic);
                addedCount++;
                addedRecordIds.push(recordId);
                // Add to tracking set to prevent duplicates within this batch
                existingRecordIdSet.add(recordId);
            }
            catch (error) {
                skippedCount++;
                skippedRecordIds.push(record.getId());
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'addHighlightGraphics-record-error',
                    seq,
                    recordId: record.getId(),
                    error: error instanceof Error ? error.message : String(error),
                    timestamp: Date.now()
                });
            }
        });
        // Log final state AFTER adding
        const finalGraphicsCount = graphicsLayer.graphics.length;
        const finalRecordIds = [];
        graphicsLayer.graphics.forEach(graphic => {
            var _a;
            const recordId = (_a = graphic.attributes) === null || _a === void 0 ? void 0 : _a.recordId;
            if (recordId) {
                finalRecordIds.push(recordId);
            }
        });
        debugLogger.log('GRAPHICS-LAYER', {
            event: 'addHighlightGraphics-complete',
            seq,
            graphicsLayerId: graphicsLayer.id,
            recordsCount: records.length,
            addedCount,
            skippedCount,
            duplicateCount,
            addedRecordIds: addedRecordIds.slice(0, 20), // Limit to first 20
            skippedRecordIds: skippedRecordIds.slice(0, 20),
            duplicateRecordIds: duplicateRecordIds.slice(0, 20),
            existingGraphicsCount,
            finalGraphicsCount,
            expectedFinalCount: existingGraphicsCount + addedCount,
            finalRecordIds: finalRecordIds.slice(0, 20), // Limit to first 20
            finalRecordIdsCount: finalRecordIds.length,
            timestamp: Date.now()
        });
    });
}
/**
 * Removes highlight graphics from the graphics layer by record IDs.
 */
function removeHighlightGraphics(graphicsLayer, recordIds) {
    const seq = ++operationSequence;
    if (!graphicsLayer || !recordIds || recordIds.length === 0) {
        debugLogger.log('GRAPHICS-LAYER', {
            event: 'removeHighlightGraphics-skipped',
            seq,
            reason: !graphicsLayer ? 'no-graphics-layer' : 'no-record-ids',
            recordIdsCount: (recordIds === null || recordIds === void 0 ? void 0 : recordIds.length) || 0,
            timestamp: Date.now()
        });
        return;
    }
    const recordIdSet = new Set(recordIds);
    let removedCount = 0;
    // Find and remove graphics matching record IDs
    const graphicsToRemove = [];
    graphicsLayer.graphics.forEach(graphic => {
        var _a;
        const recordId = (_a = graphic.attributes) === null || _a === void 0 ? void 0 : _a.recordId;
        if (recordId && recordIdSet.has(recordId)) {
            graphicsToRemove.push(graphic);
        }
    });
    graphicsToRemove.forEach(graphic => {
        graphicsLayer.remove(graphic);
        removedCount++;
    });
    debugLogger.log('GRAPHICS-LAYER', {
        event: 'removeHighlightGraphics-complete',
        seq,
        graphicsLayerId: graphicsLayer.id,
        recordIdsCount: recordIds.length,
        removedCount,
        timestamp: Date.now()
    });
}
/**
 * Clears all highlight graphics from the graphics layer.
 */
function clearGraphicsLayer(graphicsLayer) {
    const seq = ++operationSequence;
    if (!graphicsLayer) {
        debugLogger.log('GRAPHICS-LAYER', {
            event: 'clearGraphicsLayer-skipped',
            seq,
            reason: 'no-graphics-layer',
            timestamp: Date.now()
        });
        return;
    }
    const graphicsCount = graphicsLayer.graphics.length;
    graphicsLayer.removeAll();
    debugLogger.log('GRAPHICS-LAYER', {
        event: 'clearGraphicsLayer-complete',
        seq,
        graphicsLayerId: graphicsLayer.id,
        graphicsRemoved: graphicsCount,
        timestamp: Date.now()
    });
}
/**
 * Removes the graphics layer from the map and cleans up references.
 */
function cleanupGraphicsLayer(widgetId, mapView) {
    const seq = ++operationSequence;
    const layerId = `querysimple-highlight-${widgetId}`;
    try {
        const graphicsLayer = mapView.map.layers.find(layer => layer.id === layerId);
        if (graphicsLayer) {
            // Clear all graphics first
            graphicsLayer.removeAll();
            // Remove layer from map
            mapView.map.remove(graphicsLayer);
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'cleanupGraphicsLayer-complete',
                seq,
                widgetId,
                layerId,
                timestamp: Date.now()
            });
        }
        else {
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'cleanupGraphicsLayer-not-found',
                seq,
                widgetId,
                layerId,
                timestamp: Date.now()
            });
        }
    }
    catch (error) {
        debugLogger.log('GRAPHICS-LAYER', {
            event: 'cleanupGraphicsLayer-error',
            seq,
            widgetId,
            layerId,
            error: error instanceof Error ? error.message : String(error),
            errorStack: error instanceof Error ? error.stack : undefined,
            timestamp: Date.now()
        });
    }
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-accumulated-records.ts":
/*!*******************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/hooks/use-accumulated-records.ts ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AccumulatedRecordsManager: () => (/* binding */ AccumulatedRecordsManager)
/* harmony export */ });
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");


const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__.createQuerySimpleDebugLogger)();
/**
 * Utility to manage accumulated records and results mode state.
 *
 * Centralizes accumulated records management logic for the widget.
 * Handles results mode changes, accumulated records updates, and mode reset logic.
 *
 * Part of Chunk 5: Accumulated Records Management extraction.
 *
 * Note: This is a utility class (not a hook) to work with class components.
 */
class AccumulatedRecordsManager {
    constructor() {
        this.resultsMode = _config__WEBPACK_IMPORTED_MODULE_0__.SelectionType.NewSelection;
        this.accumulatedRecords = [];
    }
    /**
     * Sets callbacks for mode change and accumulated records change events.
     *
     * @param callbacks - Callbacks for mode change and accumulated records change
     */
    setCallbacks(callbacks) {
        this.callbacks = callbacks;
    }
    /**
     * Gets the current results mode.
     *
     * @returns Current results mode
     */
    getResultsMode() {
        return this.resultsMode;
    }
    /**
     * Gets the current accumulated records.
     *
     * @returns Current accumulated records array
     */
    getAccumulatedRecords() {
        return this.accumulatedRecords;
    }
    /**
     * Gets the count of accumulated records.
     *
     * @returns Number of accumulated records
     */
    getAccumulatedRecordsCount() {
        return this.accumulatedRecords.length;
    }
    /**
     * Checks if the widget is in accumulation mode (Add to or Remove from).
     *
     * @returns True if in accumulation mode, false otherwise
     */
    isAccumulationMode() {
        return this.resultsMode === _config__WEBPACK_IMPORTED_MODULE_0__.SelectionType.AddToSelection ||
            this.resultsMode === _config__WEBPACK_IMPORTED_MODULE_0__.SelectionType.RemoveFromSelection;
    }
    /**
     * Checks if there are accumulated records.
     *
     * @returns True if accumulated records exist, false otherwise
     */
    hasAccumulatedRecords() {
        return this.accumulatedRecords.length > 0;
    }
    /**
     * Handles results mode change.
     *
     * Updates the results mode and optionally clears accumulated records when switching
     * to "New" mode. Also handles hash parameter consumption when switching to accumulation modes.
     *
     * @param widgetId - Widget ID for logging
     * @param mode - New results mode
     * @param shouldConsumeHash - Whether to consume hash parameter (for deep linking)
     * @param hashShortId - Optional shortId to consume from hash
     * @param removeHashParameter - Optional callback to remove hash parameter
     */
    handleResultsModeChange(widgetId, mode, shouldConsumeHash = false, hashShortId, removeHashParameter) {
        var _a;
        const previousMode = this.resultsMode;
        const currentAccumulatedCount = this.accumulatedRecords.length;
        debugLogger.log('RESULTS-MODE', {
            event: 'handleResultsModeChange-triggered',
            widgetId,
            previousMode,
            newMode: mode,
            currentAccumulatedCount,
            timestamp: Date.now()
        });
        // Consume deep link when switching to accumulation modes
        if (shouldConsumeHash && (mode === _config__WEBPACK_IMPORTED_MODULE_0__.SelectionType.AddToSelection || mode === _config__WEBPACK_IMPORTED_MODULE_0__.SelectionType.RemoveFromSelection)) {
            if (hashShortId && removeHashParameter) {
                debugLogger.log('HASH', {
                    event: 'consuming-hash-on-mode-switch',
                    widgetId,
                    mode,
                    shortId: hashShortId
                });
                removeHashParameter(hashShortId);
            }
        }
        // If switching to "New" mode, clear accumulated records
        if (mode === _config__WEBPACK_IMPORTED_MODULE_0__.SelectionType.NewSelection) {
            debugLogger.log('RESULTS-MODE', {
                event: 'clearing-accumulated-records-on-mode-switch',
                widgetId,
                previousMode
            });
            this.resultsMode = mode;
            this.accumulatedRecords = [];
        }
        else {
            this.resultsMode = mode;
        }
        // Trigger callback
        if ((_a = this.callbacks) === null || _a === void 0 ? void 0 : _a.onModeChange) {
            this.callbacks.onModeChange(this.resultsMode);
        }
        return {
            resultsMode: this.resultsMode,
            accumulatedRecords: this.accumulatedRecords
        };
    }
    /**
     * Handles accumulated records change.
     *
     * Updates the accumulated records array.
     *
     * @param widgetId - Widget ID for logging
     * @param records - New accumulated records array
     */
    handleAccumulatedRecordsChange(widgetId, records) {
        var _a;
        const previousCount = this.accumulatedRecords.length;
        const newCount = records.length;
        debugLogger.log('RESULTS-MODE', {
            event: 'handleAccumulatedRecordsChange-triggered',
            widgetId,
            previousCount,
            newCount,
            timestamp: Date.now()
        });
        this.accumulatedRecords = records;
        // Trigger callback
        if ((_a = this.callbacks) === null || _a === void 0 ? void 0 : _a.onAccumulatedRecordsChange) {
            this.callbacks.onAccumulatedRecordsChange(this.accumulatedRecords);
        }
    }
    /**
     * Resets mode to "New Selection" and clears accumulated records.
     *
     * Called when hash parameters are detected to reset the widget to a clean state.
     *
     * @param widgetId - Widget ID for logging
     * @param currentMode - Current mode before reset
     */
    resetModeOnHashDetection(widgetId, currentMode) {
        if (currentMode !== _config__WEBPACK_IMPORTED_MODULE_0__.SelectionType.NewSelection) {
            debugLogger.log('HASH', {
                event: 'mode-reset-needed-on-hash-detection',
                widgetId,
                currentMode,
                timestamp: Date.now()
            });
            this.resultsMode = _config__WEBPACK_IMPORTED_MODULE_0__.SelectionType.NewSelection;
            this.accumulatedRecords = [];
        }
        return {
            resultsMode: this.resultsMode,
            accumulatedRecords: this.accumulatedRecords
        };
    }
    /**
     * Cleans up the manager.
     *
     * Resets state to initial values.
     */
    cleanup() {
        this.resultsMode = _config__WEBPACK_IMPORTED_MODULE_0__.SelectionType.NewSelection;
        this.accumulatedRecords = [];
        this.callbacks = undefined;
    }
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-graphics-layer.ts":
/*!**************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/hooks/use-graphics-layer.ts ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GraphicsLayerManager: () => (/* binding */ GraphicsLayerManager)
/* harmony export */ });
/* harmony import */ var _graphics_layer_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../graphics-layer-utils */ "./your-extensions/widgets/query-simple/src/runtime/graphics-layer-utils.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};


const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__.createQuerySimpleDebugLogger)();
/**
 * Utility to manage graphics layer initialization and cleanup.
 *
 * Centralizes graphics layer management logic for the widget.
 * Handles graphics layer creation, initialization, and cleanup.
 *
 * Part of Chunk 4: Graphics Layer Management extraction.
 *
 * Note: This is a utility class (not a hook) to work with class components.
 */
class GraphicsLayerManager {
    constructor(graphicsLayerRef, mapViewRef) {
        this.graphicsLayerRef = graphicsLayerRef;
        this.mapViewRef = mapViewRef;
    }
    /**
     * Initializes the graphics layer for map highlighting.
     *
     * Creates or retrieves a graphics layer and adds it to the map view.
     *
     * @param widgetId - Widget ID for graphics layer naming
     * @param mapView - The ArcGIS MapView or SceneView instance
     * @param callbacks - Optional callbacks for initialization events
     *
     * @returns Promise resolving to the graphics layer, or null if initialization failed
     */
    initialize(widgetId, mapView, callbacks) {
        return __awaiter(this, void 0, void 0, function* () {
            var _a, _b, _c, _d;
            // Chunk 4: Comparison logging - new implementation
            const newStateBefore = {
                hasGraphicsLayer: !!this.graphicsLayerRef.current,
                graphicsLayerId: ((_a = this.graphicsLayerRef.current) === null || _a === void 0 ? void 0 : _a.id) || null,
                hasMapView: !!this.mapViewRef.current,
                viewType: ((_b = this.mapViewRef.current) === null || _b === void 0 ? void 0 : _b.type) || null
            };
            debugLogger.log('CHUNK-4-COMPARE', {
                event: 'new-implementation-initializeGraphicsLayer-before',
                widgetId,
                newImplementation: {
                    stateBefore: newStateBefore,
                    mapViewType: mapView.type || 'unknown',
                    timestamp: Date.now()
                }
            });
            try {
                // Create or get graphics layer
                const graphicsLayer = yield (0,_graphics_layer_utils__WEBPACK_IMPORTED_MODULE_0__.createOrGetGraphicsLayer)(widgetId, mapView);
                if (!graphicsLayer) {
                    debugLogger.log('CHUNK-4-COMPARE', {
                        event: 'new-implementation-initializeGraphicsLayer-failed',
                        widgetId,
                        newImplementation: {
                            stateBefore: newStateBefore,
                            result: 'failed',
                            reason: 'graphics-layer-creation-failed',
                            timestamp: Date.now()
                        }
                    });
                    return null;
                }
                // Store references
                this.mapViewRef.current = mapView;
                this.graphicsLayerRef.current = graphicsLayer;
                const newStateAfter = {
                    hasGraphicsLayer: !!this.graphicsLayerRef.current,
                    graphicsLayerId: ((_c = this.graphicsLayerRef.current) === null || _c === void 0 ? void 0 : _c.id) || null,
                    hasMapView: !!this.mapViewRef.current,
                    viewType: ((_d = this.mapViewRef.current) === null || _d === void 0 ? void 0 : _d.type) || null
                };
                debugLogger.log('CHUNK-4-COMPARE', {
                    event: 'new-implementation-initializeGraphicsLayer-success',
                    widgetId,
                    newImplementation: {
                        stateBefore: newStateBefore,
                        stateAfter: newStateAfter,
                        result: 'success',
                        graphicsLayerId: graphicsLayer.id,
                        viewType: mapView.type || 'unknown',
                        timestamp: Date.now()
                    }
                });
                // Call callback if provided
                if (callbacks === null || callbacks === void 0 ? void 0 : callbacks.onGraphicsLayerInitialized) {
                    callbacks.onGraphicsLayerInitialized(graphicsLayer);
                }
                return graphicsLayer;
            }
            catch (error) {
                debugLogger.log('CHUNK-4-COMPARE', {
                    event: 'new-implementation-initializeGraphicsLayer-error',
                    widgetId,
                    newImplementation: {
                        stateBefore: newStateBefore,
                        result: 'error',
                        error: error instanceof Error ? error.message : String(error),
                        timestamp: Date.now()
                    }
                });
                return null;
            }
        });
    }
    /**
     * Initializes graphics layer lazily when output data source becomes available.
     *
     * @param widgetId - Widget ID
     * @param config - Widget configuration
     * @param outputDS - The output data source that was created
     * @param mapView - Optional map view (if not provided, uses mapViewRef)
     * @param callbacks - Optional callbacks
     */
    initializeFromOutputDS(widgetId, config, outputDS, mapView, callbacks) {
        return __awaiter(this, void 0, void 0, function* () {
            var _a;
            // Chunk 4: Comparison logging - new implementation
            const newStateBefore = {
                useGraphicsLayerForHighlight: config.useGraphicsLayerForHighlight,
                hasGraphicsLayer: !!this.graphicsLayerRef.current,
                graphicsLayerId: ((_a = this.graphicsLayerRef.current) === null || _a === void 0 ? void 0 : _a.id) || null,
                hasMapView: !!this.mapViewRef.current,
                outputDSId: outputDS.id
            };
            debugLogger.log('CHUNK-4-COMPARE', {
                event: 'new-implementation-initializeGraphicsLayerFromOutputDS-before',
                widgetId,
                newImplementation: {
                    stateBefore: newStateBefore,
                    timestamp: Date.now()
                }
            });
            // Only initialize if enabled and not already initialized
            if (!config.useGraphicsLayerForHighlight || this.graphicsLayerRef.current) {
                debugLogger.log('CHUNK-4-COMPARE', {
                    event: 'new-implementation-initializeGraphicsLayerFromOutputDS-skipped',
                    widgetId,
                    newImplementation: {
                        stateBefore: newStateBefore,
                        result: 'skipped',
                        reason: !config.useGraphicsLayerForHighlight ? 'not-enabled' : 'already-initialized',
                        timestamp: Date.now()
                    }
                });
                return;
            }
            // Use provided map view or get from ref
            const mapViewToUse = mapView || this.mapViewRef.current;
            if (!mapViewToUse) {
                debugLogger.log('CHUNK-4-COMPARE', {
                    event: 'new-implementation-initializeGraphicsLayerFromOutputDS-skipped',
                    widgetId,
                    newImplementation: {
                        stateBefore: newStateBefore,
                        result: 'skipped',
                        reason: 'map-view-not-available-yet',
                        timestamp: Date.now()
                    }
                });
                return;
            }
            // Initialize graphics layer
            yield this.initialize(widgetId, mapViewToUse, callbacks);
        });
    }
    /**
     * Cleans up the graphics layer.
     *
     * Removes the graphics layer from the map view and clears internal references.
     *
     * @param widgetId - Widget ID
     * @param callbacks - Optional callbacks
     */
    cleanup(widgetId, callbacks) {
        var _a, _b, _c, _d;
        // Chunk 4: Comparison logging - new implementation
        const newStateBefore = {
            hasGraphicsLayer: !!this.graphicsLayerRef.current,
            graphicsLayerId: ((_a = this.graphicsLayerRef.current) === null || _a === void 0 ? void 0 : _a.id) || null,
            hasMapView: !!this.mapViewRef.current,
            viewType: ((_b = this.mapViewRef.current) === null || _b === void 0 ? void 0 : _b.type) || null
        };
        debugLogger.log('CHUNK-4-COMPARE', {
            event: 'new-implementation-cleanupGraphicsLayer-before',
            widgetId,
            newImplementation: {
                stateBefore: newStateBefore,
                timestamp: Date.now()
            }
        });
        const mapView = this.mapViewRef.current;
        if (mapView) {
            (0,_graphics_layer_utils__WEBPACK_IMPORTED_MODULE_0__.cleanupGraphicsLayer)(widgetId, mapView);
            this.mapViewRef.current = null;
            this.graphicsLayerRef.current = null;
            const newStateAfter = {
                hasGraphicsLayer: !!this.graphicsLayerRef.current,
                graphicsLayerId: ((_c = this.graphicsLayerRef.current) === null || _c === void 0 ? void 0 : _c.id) || null,
                hasMapView: !!this.mapViewRef.current,
                viewType: ((_d = this.mapViewRef.current) === null || _d === void 0 ? void 0 : _d.type) || null
            };
            debugLogger.log('CHUNK-4-COMPARE', {
                event: 'new-implementation-cleanupGraphicsLayer-complete',
                widgetId,
                newImplementation: {
                    stateBefore: newStateBefore,
                    stateAfter: newStateAfter,
                    result: 'complete',
                    timestamp: Date.now()
                }
            });
            // Call callback if provided
            if (callbacks === null || callbacks === void 0 ? void 0 : callbacks.onGraphicsLayerCleaned) {
                callbacks.onGraphicsLayerCleaned();
            }
        }
        else {
            debugLogger.log('CHUNK-4-COMPARE', {
                event: 'new-implementation-cleanupGraphicsLayer-skipped',
                widgetId,
                newImplementation: {
                    stateBefore: newStateBefore,
                    result: 'skipped',
                    reason: 'no-map-view',
                    timestamp: Date.now()
                }
            });
        }
    }
    /**
     * Clears all graphics from the graphics layer if it exists.
     *
     * @param widgetId - Widget ID for logging
     * @param config - Widget configuration
     */
    clearGraphics(widgetId, config) {
        var _a, _b;
        // Chunk 4: Comparison logging - new implementation
        const graphicsLayer = this.graphicsLayerRef.current;
        const newStateBefore = {
            useGraphicsLayerForHighlight: config.useGraphicsLayerForHighlight,
            hasGraphicsLayer: !!graphicsLayer,
            graphicsLayerId: (graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.id) || null,
            graphicsCount: (graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics.length) || 0
        };
        debugLogger.log('CHUNK-4-COMPARE', {
            event: 'new-implementation-clearGraphicsLayerIfExists-before',
            widgetId,
            newImplementation: {
                stateBefore: newStateBefore,
                timestamp: Date.now()
            }
        });
        if (config.useGraphicsLayerForHighlight && graphicsLayer) {
            const { clearGraphicsLayer } = __webpack_require__(/*! ../graphics-layer-utils */ "./your-extensions/widgets/query-simple/src/runtime/graphics-layer-utils.ts");
            clearGraphicsLayer(graphicsLayer);
            const newStateAfter = {
                useGraphicsLayerForHighlight: config.useGraphicsLayerForHighlight,
                hasGraphicsLayer: !!this.graphicsLayerRef.current,
                graphicsLayerId: ((_a = this.graphicsLayerRef.current) === null || _a === void 0 ? void 0 : _a.id) || null,
                graphicsCount: ((_b = this.graphicsLayerRef.current) === null || _b === void 0 ? void 0 : _b.graphics.length) || 0
            };
            debugLogger.log('CHUNK-4-COMPARE', {
                event: 'new-implementation-clearGraphicsLayerIfExists-complete',
                widgetId,
                newImplementation: {
                    stateBefore: newStateBefore,
                    stateAfter: newStateAfter,
                    result: 'complete',
                    graphicsLayerId: graphicsLayer.id,
                    timestamp: Date.now()
                }
            });
        }
        else {
            debugLogger.log('CHUNK-4-COMPARE', {
                event: 'new-implementation-clearGraphicsLayerIfExists-skipped',
                widgetId,
                newImplementation: {
                    stateBefore: newStateBefore,
                    result: 'skipped',
                    reason: !config.useGraphicsLayerForHighlight ? 'not-enabled' : 'no-graphics-layer',
                    timestamp: Date.now()
                }
            });
        }
    }
    /**
     * Gets the current graphics layer.
     */
    getGraphicsLayer() {
        return this.graphicsLayerRef.current;
    }
    /**
     * Checks if graphics layer should be initialized based on config and current state.
     *
     * @param config - Widget configuration
     * @param mapView - Map view to check
     * @returns true if graphics layer should be initialized
     */
    shouldInitialize(config, mapView) {
        return !!(mapView && config.useGraphicsLayerForHighlight && !this.graphicsLayerRef.current);
    }
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-map-view.ts":
/*!********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/hooks/use-map-view.ts ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MapViewManager: () => (/* binding */ MapViewManager)
/* harmony export */ });
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");

const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_0__.createQuerySimpleDebugLogger)();
/**
 * Utility to manage map view ref and view change handlers.
 *
 * Centralizes map view management logic for the widget.
 * Handles JimuMapView changes and maintains refs for map view access.
 *
 * Part of Chunk 6: Map View Management extraction.
 *
 * Note: This is a utility class (not a hook) to work with class components.
 */
class MapViewManager {
    constructor(mapViewRef) {
        this.jimuMapView = null;
        this.mapViewRef = mapViewRef;
    }
    /**
     * Handles JimuMapView change from JimuMapViewComponent.
     * Updates internal state and calls callbacks.
     */
    handleJimuMapViewChanged(jimuMapView, props, callbacks) {
        var _a;
        const { id } = props;
        debugLogger.log('MAP-EXTENT', {
            event: 'handleJimuMapViewChanged',
            widgetId: id,
            hasJimuMapView: !!jimuMapView,
            hasView: !!(jimuMapView === null || jimuMapView === void 0 ? void 0 : jimuMapView.view),
            viewType: ((_a = jimuMapView === null || jimuMapView === void 0 ? void 0 : jimuMapView.view) === null || _a === void 0 ? void 0 : _a.type) || 'none',
            timestamp: Date.now()
        });
        // Store JimuMapView internally
        this.jimuMapView = jimuMapView;
        // Update map view ref if view is available
        if (jimuMapView === null || jimuMapView === void 0 ? void 0 : jimuMapView.view) {
            this.mapViewRef.current = jimuMapView.view;
        }
        else {
            this.mapViewRef.current = null;
        }
        // Call callback to update widget state
        if (callbacks.onMapViewChange) {
            callbacks.onMapViewChange(jimuMapView);
        }
    }
    /**
     * Gets the current JimuMapView.
     */
    getJimuMapView() {
        return this.jimuMapView;
    }
    /**
     * Gets the current map view from ref.
     */
    getMapView() {
        return this.mapViewRef.current;
    }
    /**
     * Cleans up map view references.
     */
    cleanup() {
        this.mapViewRef.current = null;
        this.jimuMapView = null;
    }
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-url-consumption.ts":
/*!***************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/hooks/use-url-consumption.ts ***!
  \***************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   UrlConsumptionManager: () => (/* binding */ UrlConsumptionManager)
/* harmony export */ });
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");


const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__.createQuerySimpleDebugLogger)();
/**
 * Utility to manage URL parameter consumption and deep linking.
 *
 * Handles both Hash fragments (#) and Query Strings (?), with Hash taking priority.
 * Implements atomic consumption to prevent infinite loops.
 *
 * Part of Chunk 1: URL Parameter Consumption extraction.
 *
 * Note: This is a utility class (not a hook) to work with class components.
 */
class UrlConsumptionManager {
    constructor() {
        this.lastProcessedHash = '';
        this.isProcessing = false;
        this.hashChangeHandler = null;
    }
    /**
     * Checks URL for hash and query string parameters matching configured shortIds.
     * Hash parameters take priority over query string parameters.
     */
    checkUrlParameters(props, resultsMode, callbacks) {
        var _a;
        const { config, id } = props;
        const { onInitialValueFound, onModeResetNeeded } = callbacks;
        if (!((_a = config.queryItems) === null || _a === void 0 ? void 0 : _a.length)) {
            return;
        }
        // Prevent concurrent processing
        if (this.isProcessing) {
            return;
        }
        const shortIds = config.queryItems
            .map(item => item.shortId)
            .filter(sid => sid != null && sid.trim() !== '');
        if (shortIds.length === 0) {
            return;
        }
        const hash = window.location.hash.substring(1);
        const query = window.location.search.substring(1);
        // Skip hash-only if we've already processed this exact hash fragment
        // But always check query strings (they don't trigger hashchange events)
        // Only skip if we have a hash fragment AND we've already processed it
        if (hash && this.lastProcessedHash === hash) {
            return;
        }
        this.isProcessing = true;
        // Only update lastProcessedHash if we actually have a hash fragment
        // Query strings are always checked (no skip logic for them)
        if (hash) {
            this.lastProcessedHash = hash;
        }
        const hashParams = new URLSearchParams(hash);
        const queryParams = new URLSearchParams(query);
        let foundShortId = null;
        let foundValue = null;
        let foundIn = null;
        // PRIORITY 1: Hash fragments (always win)
        for (const sid of shortIds) {
            if (hashParams.has(sid)) {
                foundShortId = sid;
                foundValue = hashParams.get(sid);
                foundIn = 'hash';
                break;
            }
        }
        // PRIORITY 2: Query string (if no hash match)
        if (!foundShortId) {
            for (const sid of shortIds) {
                if (queryParams.has(sid)) {
                    foundShortId = sid;
                    foundValue = queryParams.get(sid);
                    foundIn = 'query';
                    break;
                }
            }
        }
        if (foundShortId && foundValue !== null) {
            debugLogger.log('HASH', {
                event: 'url-param-detected',
                widgetId: id,
                shortId: foundShortId,
                value: foundValue,
                foundIn,
                timestamp: Date.now()
            });
            // Reset to New mode when hash parameter is detected to avoid bugs with accumulation modes
            if (resultsMode !== _config__WEBPACK_IMPORTED_MODULE_0__.SelectionType.NewSelection && onModeResetNeeded) {
                debugLogger.log('HASH', {
                    event: 'mode-reset-needed-on-hash-detection',
                    widgetId: id,
                    currentMode: resultsMode,
                    timestamp: Date.now()
                });
                onModeResetNeeded();
            }
            onInitialValueFound({ shortId: foundShortId, value: foundValue });
        }
        else {
            // No matching parameters found - clear state
            onInitialValueFound(undefined);
        }
        this.isProcessing = false;
    }
    /**
     * Removes a hash parameter from the URL.
     * Used when switching to accumulation modes to consume the deep link.
     */
    removeHashParameter(shortId, widgetId) {
        if (!shortId)
            return;
        const hash = window.location.hash.substring(1);
        const urlParams = new URLSearchParams(hash);
        if (urlParams.has(shortId)) {
            urlParams.delete(shortId);
            const newHash = urlParams.toString();
            debugLogger.log('HASH', {
                event: 'removeHashParameter',
                widgetId,
                shortId,
                newHash: newHash ? `#${newHash}` : '(empty)',
                timestamp: Date.now()
            });
            // Update the URL without triggering a reload
            // Always preserve pathname and query string, only update hash
            window.history.replaceState(null, '', window.location.pathname + window.location.search + (newHash ? `#${newHash}` : ''));
            // Reset tracking so it can be processed again if needed
            this.lastProcessedHash = '';
        }
    }
    /**
     * Sets up the manager (no autonomous URL checking).
     * QuerySimple should only process hash parameters when HelperSimple explicitly triggers it
     * via OPEN_WIDGET_EVENT. This ensures HelperSimple remains the orchestrator.
     */
    setup(props, resultsMode, callbacks) {
        // Do NOT automatically check URL parameters
        // Do NOT set up hashchange listener
        // QuerySimple will only process hash when HelperSimple explicitly opens the widget
        // This ensures HelperSimple remains the orchestrator
    }
    /**
     * Cleans up hash change listener.
     */
    cleanup() {
        if (this.hashChangeHandler) {
            window.removeEventListener('hashchange', this.hashChangeHandler);
            this.hashChangeHandler = null;
        }
    }
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-widget-visibility.ts":
/*!*****************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/hooks/use-widget-visibility.ts ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   WidgetVisibilityManager: () => (/* binding */ WidgetVisibilityManager)
/* harmony export */ });
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");

const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_0__.createQuerySimpleDebugLogger)();
/**
 * Custom event name for QuerySimple to notify HelperSimple of widget open/close state.
 */
const QUERYSIMPLE_WIDGET_STATE_EVENT = 'querysimple-widget-state-changed';
/**
 * Utility to manage widget panel visibility detection and HelperSimple notification.
 *
 * Uses IntersectionObserver for efficient DOM-level visibility tracking.
 * Falls back to periodic checking if IntersectionObserver is not available.
 *
 * Part of Chunk 2: Widget Visibility Engine extraction.
 *
 * Note: This is a utility class (not a hook) to work with class components.
 */
class WidgetVisibilityManager {
    constructor() {
        this.visibilityObserver = null;
        this.visibilityCheckInterval = null;
        this.isPanelVisible = false;
        this.widgetElement = null;
    }
    /**
     * Checks if the widget element is currently visible.
     * Fallback method when IntersectionObserver is not available.
     */
    checkVisibility() {
        if (!this.widgetElement)
            return false;
        const element = this.widgetElement;
        const style = window.getComputedStyle(element);
        const rect = element.getBoundingClientRect();
        const isVisible = (style.display !== 'none' &&
            style.visibility !== 'hidden' &&
            style.opacity !== '0' &&
            rect.width > 0 &&
            rect.height > 0 &&
            rect.top < window.innerHeight &&
            rect.bottom > 0 &&
            rect.left < window.innerWidth &&
            rect.right > 0);
        return isVisible;
    }
    /**
     * Notifies HelperSimple of panel visibility state changes.
     */
    notifyHelperSimpleOfPanelState(isVisible, widgetId) {
        const event = new CustomEvent(QUERYSIMPLE_WIDGET_STATE_EVENT, {
            detail: {
                widgetId,
                isOpen: isVisible
            },
            bubbles: true,
            cancelable: true
        });
        window.dispatchEvent(event);
        debugLogger.log('WIDGET-STATE', {
            event: isVisible ? 'panel-opened' : 'panel-closed',
            widgetId,
            isVisible,
            method: 'notifyHelperSimpleOfPanelState',
            timestamp: new Date().toISOString()
        });
    }
    /**
     * Logs visibility state changes and calls callbacks.
     */
    logVisibilityChange(isVisible, method, widgetId, callbacks) {
        debugLogger.log('WIDGET-STATE', {
            event: isVisible ? 'panel-opened' : 'panel-closed',
            widgetId,
            isVisible,
            method,
            timestamp: new Date().toISOString()
        });
        // Notify HelperSimple
        this.notifyHelperSimpleOfPanelState(isVisible, widgetId);
        // Call optional callback
        if (callbacks.onVisibilityChange) {
            callbacks.onVisibilityChange(isVisible);
        }
    }
    /**
     * Sets up visibility detection.
     */
    setup(widgetElement, props, callbacks, onVisibilityStateChange) {
        const { id } = props;
        this.widgetElement = widgetElement;
        // Wait for next tick to ensure element is ready
        setTimeout(() => {
            if (!this.widgetElement) {
                debugLogger.log('WIDGET-STATE', {
                    event: 'visibility-detection-setup-failed',
                    widgetId: id,
                    reason: 'widget-element-not-available'
                });
                return;
            }
            const element = this.widgetElement;
            // Method 1: IntersectionObserver (most efficient)
            if ('IntersectionObserver' in window) {
                this.visibilityObserver = new IntersectionObserver((entries) => {
                    const entry = entries[0];
                    const isVisible = entry.isIntersecting && entry.intersectionRatio > 0;
                    // Only update if state changed
                    if (this.isPanelVisible !== isVisible) {
                        this.isPanelVisible = isVisible;
                        this.logVisibilityChange(isVisible, 'IntersectionObserver', id, callbacks);
                        onVisibilityStateChange(isVisible);
                    }
                }, {
                    threshold: [0, 0.1, 1.0], // Trigger at 0%, 10%, and 100% visibility
                    rootMargin: '0px'
                });
                this.visibilityObserver.observe(element);
                debugLogger.log('WIDGET-STATE', {
                    event: 'visibility-detection-setup',
                    widgetId: id,
                    method: 'IntersectionObserver'
                });
            }
            else {
                // Method 2: Fallback to periodic checking
                this.visibilityCheckInterval = window.setInterval(() => {
                    const isVisible = this.checkVisibility();
                    if (this.isPanelVisible !== isVisible) {
                        this.isPanelVisible = isVisible;
                        this.logVisibilityChange(isVisible, 'periodic-check', id, callbacks);
                        onVisibilityStateChange(isVisible);
                    }
                }, 250); // Check every 250ms
                debugLogger.log('WIDGET-STATE', {
                    event: 'visibility-detection-setup',
                    widgetId: id,
                    method: 'periodic-check'
                });
            }
        }, 100);
    }
    /**
     * Cleans up visibility detection observers/intervals.
     */
    cleanup() {
        // Clean up IntersectionObserver
        if (this.visibilityObserver) {
            this.visibilityObserver.disconnect();
            this.visibilityObserver = null;
        }
        // Clean up interval
        if (this.visibilityCheckInterval !== null) {
            clearInterval(this.visibilityCheckInterval);
            this.visibilityCheckInterval = null;
        }
        this.widgetElement = null;
    }
    /**
     * Gets current visibility state.
     */
    getIsPanelVisible() {
        return this.isPanelVisible;
    }
    /**
     * Notifies HelperSimple on mount.
     */
    notifyMount(widgetId) {
        const openEvent = new CustomEvent(QUERYSIMPLE_WIDGET_STATE_EVENT, {
            detail: {
                widgetId,
                isOpen: true
            },
            bubbles: true,
            cancelable: true
        });
        window.dispatchEvent(openEvent);
        debugLogger.log('WIDGET-STATE', {
            event: 'widget-mounted',
            widgetId,
            timestamp: new Date().toISOString()
        });
    }
    /**
     * Notifies HelperSimple on unmount.
     */
    notifyUnmount(widgetId) {
        const closeEvent = new CustomEvent(QUERYSIMPLE_WIDGET_STATE_EVENT, {
            detail: {
                widgetId,
                isOpen: false
            },
            bubbles: true,
            cancelable: true
        });
        window.dispatchEvent(closeEvent);
        debugLogger.log('WIDGET-STATE', {
            event: 'widget-unmounted',
            widgetId,
            timestamp: new Date().toISOString()
        });
    }
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-zoom-to-records.ts":
/*!***************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/hooks/use-zoom-to-records.ts ***!
  \***************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   useZoomToRecords: () => (/* binding */ useZoomToRecords)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var _zoom_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../zoom-utils */ "./your-extensions/widgets/query-simple/src/runtime/zoom-utils.ts");
/**
 * Hook for zooming to feature records with padding.
 *
 * Wraps the shared zoomToRecords utility function in a React hook.
 */
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};


/**
 * Custom hook that returns a function to zoom to records with padding.
 *
 * @param mapView - The map view to zoom
 * @returns A function that takes records and optional padding, and zooms to them
 */
function useZoomToRecords(mapView) {
    return react__WEBPACK_IMPORTED_MODULE_0__["default"].useCallback((records, options) => __awaiter(this, void 0, void 0, function* () {
        if (!mapView) {
            return;
        }
        yield (0,_zoom_utils__WEBPACK_IMPORTED_MODULE_1__.zoomToRecords)(mapView, records, options);
    }), [mapView]);
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/interactive-draw-tool.tsx":
/*!************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/interactive-draw-tool.tsx ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   InteractiveDraw: () => (/* binding */ InteractiveDraw)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");

/** @jsx jsx */





const sketchToolInfoMap = {
    [_config__WEBPACK_IMPORTED_MODULE_3__.CreateToolType.Point]: { drawToolName: 'point', esriClassName: 'esri-icon-point', toolIndex: 0 },
    [_config__WEBPACK_IMPORTED_MODULE_3__.CreateToolType.Polyline]: { drawToolName: 'polyline', esriClassName: 'esri-icon-polyline', toolIndex: 4 },
    [_config__WEBPACK_IMPORTED_MODULE_3__.CreateToolType.Polygon]: { drawToolName: 'polygon', esriClassName: 'esri-icon-polygon', toolIndex: 2 },
    [_config__WEBPACK_IMPORTED_MODULE_3__.CreateToolType.Rectangle]: {
        drawToolName: 'rectangle',
        esriClassName: 'esri-icon-checkbox-unchecked',
        toolIndex: 1
    },
    [_config__WEBPACK_IMPORTED_MODULE_3__.CreateToolType.Circle]: { drawToolName: 'circle', esriClassName: 'esri-icon-radio-unchecked', toolIndex: 3 }
};
function InteractiveDraw(props) {
    const { toolTypes = [], jimuMapView, onDrawEnd, widgetId } = props;
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_5__["default"]);
    const [mapModule, setMapModule] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const getLayerFunRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const graphicRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const [clearAfterApply, setClearAfterApply] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(false);
    const visibleElements = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return {
            createTools: Object.entries(sketchToolInfoMap).reduce((result, [key, value]) => (Object.assign(Object.assign({}, result), { [value.drawToolName]: toolTypes.includes(key) })), { point: false }),
            selectionTools: {
                'lasso-selection': false,
                'rectangle-selection': false
            },
            settingsMenu: false,
            undoRedoMenu: false,
            deleteButton: true
        };
    }, [toolTypes]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        jimu_core__WEBPACK_IMPORTED_MODULE_1__.moduleLoader.loadModule('jimu-ui/advanced/map').then((result) => {
            setMapModule(result);
        });
    });
    const handleDrawToolCreated = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((jimuDrawToolsRef) => {
        getLayerFunRef.current = jimuDrawToolsRef.getGraphicsLayer;
    }, []);
    const handleDrawStart = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        getLayerFunRef.current && (getLayerFunRef.current)().removeAll();
    }, []);
    const handleDrawEnd = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((graphic) => {
        graphicRef.current = graphic;
        onDrawEnd(graphic, getLayerFunRef.current, clearAfterApply);
    }, [onDrawEnd, clearAfterApply]);
    const handleCleared = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        graphicRef.current = null;
        onDrawEnd(null);
    }, [onDrawEnd]);
    const handleClearSettingChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((e) => {
        if (graphicRef.current) {
            onDrawEnd(graphicRef.current, getLayerFunRef.current, e.target.checked);
        }
        setClearAfterApply(e.target.checked);
    }, [onDrawEnd]);
    const JimuDraw = mapModule === null || mapModule === void 0 ? void 0 : mapModule.JimuDraw;
    if (!JimuDraw) {
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_4__.StatusIndicator, { statusType: widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_4__.EntityStatusType.Loading });
    }
    const isAvailable = Object.keys(visibleElements.createTools).some(toolName => visibleElements.createTools[toolName]);
    if (!isAvailable) {
        return null;
    }
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(JimuDraw, { jimuMapView: jimuMapView, operatorWidgetId: widgetId, disableSymbolSelector: true, drawingOptions: {
                    creationMode: mapModule.JimuDrawCreationMode.Single,
                    updateOnGraphicClick: false,
                    visibleElements: visibleElements
                }, uiOptions: {
                    isHideBorder: true
                }, onJimuDrawCreated: handleDrawToolCreated, onDrawingStarted: handleDrawStart, onDrawingFinished: handleDrawEnd, onDrawingCleared: handleCleared }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("label", { className: 'd-flex align-items-center', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Checkbox, { checked: clearAfterApply, onChange: handleClearSettingChange, className: 'mr-2' }), getI18nMessage('clearDrawing')] })] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/loading-result.tsx":
/*!*****************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/loading-result.tsx ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   LoadingResult: () => (/* binding */ LoadingResult)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_theme__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-theme */ "jimu-theme");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");





const Root = jimu_theme__WEBPACK_IMPORTED_MODULE_3__.styled.div `
  position: absolute;
  top: 0;
  bottom: 0;
  right: 0;
  left: 0;
  z-index: 2;

  .loading-content {
    .loading-tip {
      position: relative;
    }
  }
`;
function LoadingResult() {
    const translate = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_4__["default"]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Root, { children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'loading-content w-100 px-4 d-flex flex-column justify-content-center align-items-center', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { role: 'alert', "aria-live": 'assertive', className: 'text-paper', children: translate('retrieving') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Loading, { className: 'loading-tip mt-8', type: jimu_ui__WEBPACK_IMPORTED_MODULE_2__.LoadingType.Donut })] }) }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-result-item.tsx":
/*!********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-result-item.tsx ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryResultItem: () => (/* binding */ QueryResultItem)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_icons_outlined_editor_trash__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-icons/outlined/editor/trash */ "./jimu-icons/outlined/editor/trash.tsx");
/* harmony import */ var _components_feature_info__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./components/feature-info */ "./your-extensions/widgets/query-simple/src/runtime/components/feature-info.tsx");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");

/** @jsx jsx */






const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_6__.createQuerySimpleDebugLogger)();
const style = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
  overflow: auto;
  flex-flow: row;
  cursor: pointer;
  flex-shrink: 0;
  min-height: 2rem;
  position: relative;
  &.selected {
    outline: 2px solid var(--sys-color-primary-main);
  }
  
  .remove-button {
    position: absolute;
    top: 4px;
    right: 4px;
    z-index: 10;
    opacity: 0.7;
    transition: opacity 0.2s;
    
    &:hover {
      opacity: 1;
    }
    
    // Larger touch target for mobile/accessibility
    min-width: 32px;
    min-height: 32px;
  }
`;
/**
 * QueryResultItem component - displays a single query result record
 * Features:
 * - Clicking the item zooms to the feature on the map
 * - Remove button (trash icon) in upper-right corner to remove record from results
 * - Records are expanded by default to show full feature information
 */
const QueryResultItem = (props) => {
    const { widgetId, data, dataSource, popupTemplate, defaultPopupTemplate, onClick, onRemove, expandByDefault = false } = props;
    const recordId = data.getId();
    // Log when QueryResultItem renders
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        debugLogger.log('EXPAND-COLLAPSE', {
            event: 'QueryResultItem-render',
            recordId,
            expandByDefault,
            timestamp: Date.now()
        });
    }, [recordId, expandByDefault]);
    // Check if this record is currently selected
    const selected = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => { var _a, _b, _c; return (_c = (_b = (_a = state.dataSourcesInfo) === null || _a === void 0 ? void 0 : _a[dataSource.id]) === null || _b === void 0 ? void 0 : _b.selectedIds) === null || _c === void 0 ? void 0 : _c.includes(data.getId()); });
    // Determine if list is displayed vertically (affects FeatureInfo expandability)
    const isVerticalAlign = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const widgetJson = state.appConfig.widgets[widgetId];
        return widgetJson.config.resultListDirection !== _config__WEBPACK_IMPORTED_MODULE_5__.ListDirection.Horizontal;
    });
    // Handle clicking on the result item - zooms to feature on map
    const handleClickResultItem = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((e) => {
        // Don't trigger zoom if clicking the remove button
        if (e.target.closest('.remove-button')) {
            return;
        }
        onClick(data);
    }, [onClick, data]);
    // Handle clicking the remove button - removes record from results and selection
    const handleRemove = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((e) => {
        e.stopPropagation(); // Prevent triggering the item click handler
        e.preventDefault();
        onRemove(data);
    }, [onRemove, data]);
    const onKeyUp = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((evt) => {
        if (evt.key === 'Enter' || evt.key === ' ') {
            evt.preventDefault();
            evt.stopPropagation();
            handleClickResultItem(evt);
        }
    }, [handleClickResultItem]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('query-result-item', { selected }), onClick: handleClickResultItem, onKeyUp: onKeyUp, css: style, role: 'option', "aria-selected": selected, tabIndex: 0, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_feature_info__WEBPACK_IMPORTED_MODULE_4__["default"], { graphic: data.feature, popupTemplate: popupTemplate, defaultPopupTemplate: defaultPopupTemplate, togglable: isVerticalAlign, expandByDefault: expandByDefault, dataSource: dataSource }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { className: "remove-button", icon: true, size: "sm", variant: "text", color: "inherit", onClick: handleRemove, "aria-label": "Remove record", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
          padding: 6px;
          min-width: 32px;
          width: 32px;
          height: 32px;
          display: flex;
          align-items: center;
          justify-content: center;
        `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_editor_trash__WEBPACK_IMPORTED_MODULE_3__.TrashOutlined, { size: 18 }) })] }));
};


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-result.tsx":
/*!***************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-result.tsx ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTaskResult: () => (/* binding */ QueryTaskResult)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _widget_config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./widget-config */ "./your-extensions/widgets/query-simple/src/runtime/widget-config.ts");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _hooks_use_zoom_to_records__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./hooks/use-zoom-to-records */ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-zoom-to-records.ts");
/* harmony import */ var _simple_list__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./simple-list */ "./your-extensions/widgets/query-simple/src/runtime/simple-list.tsx");
/* harmony import */ var _query_utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./query-utils */ "./your-extensions/widgets/query-simple/src/runtime/query-utils.ts");
/* harmony import */ var _default_query_item__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../default-query-item */ "./your-extensions/widgets/query-simple/src/default-query-item.ts");
/* harmony import */ var jimu_icons_outlined_directional_arrow_left__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! jimu-icons/outlined/directional/arrow-left */ "./jimu-icons/outlined/directional/arrow-left.tsx");
/* harmony import */ var jimu_icons_outlined_directional_expand_all__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! jimu-icons/outlined/directional/expand-all */ "./jimu-icons/outlined/directional/expand-all.tsx");
/* harmony import */ var jimu_icons_outlined_directional_collapse_all__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! jimu-icons/outlined/directional/collapse-all */ "./jimu-icons/outlined/directional/collapse-all.tsx");
/* harmony import */ var _data_actions__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../data-actions */ "./your-extensions/widgets/query-simple/src/data-actions/index.tsx");
/* harmony import */ var _selection_utils__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");
/* harmony import */ var _results_management_utils__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./results-management-utils */ "./your-extensions/widgets/query-simple/src/runtime/results-management-utils.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};

/** @jsx jsx */






// FORCED: Always SimpleList - LazyList and PagingList removed










const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_16__.createQuerySimpleDebugLogger)();

const { iconMap } = (0,_widget_config__WEBPACK_IMPORTED_MODULE_3__.getWidgetRuntimeDataMap)();
/**
 * Custom event name for requesting restoration when identify popup closes.
 */
const RESTORE_ON_IDENTIFY_CLOSE_EVENT = 'querysimple-restore-on-identify-close';
/**
 * Detects if an identify popup is currently visible in the DOM.
 * Uses verified selectors based on Experience Builder's identify popup structure.
 *
 * @returns true if identify popup is detected and visible, false otherwise
 */
function isIdentifyPopupOpen() {
    // Primary selector: .esri-popup with role="dialog"
    const popup = document.querySelector('.esri-popup[role="dialog"]');
    if (!popup) {
        return false;
    }
    // Verify it's visible (not hidden)
    const ariaHidden = popup.getAttribute('aria-hidden');
    if (ariaHidden === 'true') {
        return false;
    }
    // Additional check: verify computed style shows it's visible
    const style = window.getComputedStyle(popup);
    if (style.display === 'none' || style.visibility === 'hidden' || style.opacity === '0') {
        return false;
    }
    // Verify it contains esri-features (identify popup structure)
    const hasFeatures = popup.querySelector('.esri-features');
    if (!hasFeatures) {
        return false;
    }
    return true;
}
const resultStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
  display: flex;
  flex-direction: column;

  .query-result__header {
    color: var(--sys-color-surface-paper-text);
    font-weight: 500;
    font-size: 0.875rem;
    line-height: 1.5;
    border-bottom: 1px solid var(--sys-color-divider-secondary);
    margin-bottom: 6px;
    padding-bottom: 8px;
  }

  .query-result-container {
    flex: 1 1 0;
    display: flex;
    flex-direction: column;
    overflow: auto;
    min-height: 0;
  }

  .query-result-info {
    height: 18px;
  }
`;
function QueryTaskResult(props) {
    var _a, _b;
    const { queryItem, queryParams, resultCount, maxPerPage, records, widgetId, outputDS, runtimeZoomToSelected, onNavBack, resultsMode, accumulatedRecords, onAccumulatedRecordsChange, useGraphicsLayerForHighlight, graphicsLayer, mapView } = props;
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_5__["default"]);
    const intl = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.useIntl)();
    const zoomToRecords = (0,_hooks_use_zoom_to_records__WEBPACK_IMPORTED_MODULE_6__.useZoomToRecords)(mapView);
    const [queryData, setQueryData] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const [selectedRecords, setSelectedRecords] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState([]);
    const [removedRecordIds, setRemovedRecordIds] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(new Set());
    const currentItem = Object.assign({}, _default_query_item__WEBPACK_IMPORTED_MODULE_9__.DEFAULT_QUERY_ITEM, queryItem);
    const [expandAll, setExpandAll] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState((_a = currentItem.resultExpandByDefault) !== null && _a !== void 0 ? _a : false);
    // Track individual item expansion states to maintain state when items are removed
    const [itemExpandStates, setItemExpandStates] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(new Map());
    const backBtnRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(undefined);
    // Track expandAll changes for debugging
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        debugLogger.log('RESULTS-MODE', {
            event: 'expandAll-state-changed',
            widgetId,
            expandAll,
            queryItemConfigId: queryItem.configId,
            timestamp: Date.now()
        });
    }, [expandAll, widgetId, queryItem.configId]);
    // Track if we've already selected these records to prevent re-selection when switching tabs
    const hasSelectedRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(false);
    // Track the last records we selected to detect when new records come in
    const lastSelectedRecordsRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef([]);
    // Track the original query record IDs (not selected IDs) to detect when query results change
    const lastQueryRecordIdsRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef([]);
    // Track the last selected FeatureDataRecords for restoration (if needed)
    const lastSelectedFeatureRecordsRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef([]);
    // Ref to track removedRecordIds for use in callbacks (avoids stale closure issues)
    const removedRecordIdsRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(new Set());
    // Sync ref whenever removedRecordIds state changes
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        removedRecordIdsRef.current = removedRecordIds;
    }, [removedRecordIds]);
    // Error state for user-facing errors
    const [selectionError, setSelectionError] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const extraActions = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return (0,_data_actions__WEBPACK_IMPORTED_MODULE_13__.getExtraActions)(widgetId, outputDS, mapView, intl, queryItem, runtimeZoomToSelected);
    }, [widgetId, outputDS, mapView, intl, queryItem, runtimeZoomToSelected]);
    const enableDataAction = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        var _a;
        const widgetJson = state.appConfig.widgets[widgetId];
        return (_a = widgetJson.enableDataAction) !== null && _a !== void 0 ? _a : true;
    });
    const pagingTypeInConfig = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const widgetJson = state.appConfig.widgets[widgetId];
        return widgetJson.config.resultPagingStyle;
    });
    const directionTypeInConfig = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const widgetJson = state.appConfig.widgets[widgetId];
        return widgetJson.config.resultListDirection;
    });
    // FORCE SimpleList - ignore config, we're done with lazy loading issues
    const pagingType = _config__WEBPACK_IMPORTED_MODULE_4__.PagingType.Simple;
    const direction = directionTypeInConfig !== null && directionTypeInConfig !== void 0 ? directionTypeInConfig : _config__WEBPACK_IMPORTED_MODULE_4__.ListDirection.Vertical;
    // Group records by origin data source for DataActionList
    // This ensures DataActionList recognizes records even when they come from different queries/origins
    const actionDataSets = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        var _a, _b, _c, _d;
        // Debug: Log what records are available
        debugLogger.log('RESULTS-MODE', {
            event: 'actionDataSets-calculation-start',
            widgetId: widgetId,
            selectedRecordsCount: (selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) || 0,
            queryDataRecordsCount: ((_a = queryData === null || queryData === void 0 ? void 0 : queryData.records) === null || _a === void 0 ? void 0 : _a.length) || 0,
            recordsPropCount: (records === null || records === void 0 ? void 0 : records.length) || 0,
            outputDSId: outputDS === null || outputDS === void 0 ? void 0 : outputDS.id,
            hasSelectedRecords: (selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) > 0,
            hasQueryDataRecords: ((_b = queryData === null || queryData === void 0 ? void 0 : queryData.records) === null || _b === void 0 ? void 0 : _b.length) > 0,
            hasRecordsProp: (records === null || records === void 0 ? void 0 : records.length) > 0
        });
        const isAccumulationMode = resultsMode === _config__WEBPACK_IMPORTED_MODULE_4__.SelectionType.AddToSelection || resultsMode === _config__WEBPACK_IMPORTED_MODULE_4__.SelectionType.RemoveFromSelection;
        // In accumulation modes (Add/Remove), prefer the 'records' prop (the accumulated set)
        // because outputDS.getSelectedRecords() will only return records that match the current query's where clause.
        const recordsToUse = isAccumulationMode
            ? (records || [])
            : ((selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) > 0 ? selectedRecords : (((_c = queryData === null || queryData === void 0 ? void 0 : queryData.records) === null || _c === void 0 ? void 0 : _c.length) > 0 ? queryData.records : (records || [])));
        // If no records, return single DataRecordSet with empty records using outputDS
        if (!recordsToUse || recordsToUse.length === 0) {
            const emptyDataSet = {
                dataSource: outputDS,
                type: 'loaded',
                records: [],
                name: outputDS === null || outputDS === void 0 ? void 0 : outputDS.id,
                label: outputDS === null || outputDS === void 0 ? void 0 : outputDS.getLabel()
            };
            debugLogger.log('RESULTS-MODE', {
                event: 'actionDataSets-empty-records',
                widgetId: widgetId,
                dataSetDataSourceId: (_d = emptyDataSet.dataSource) === null || _d === void 0 ? void 0 : _d.id
            });
            return [emptyDataSet];
        }
        // Group records by their origin data source
        const recordsByOriginDS = new Map();
        recordsToUse.forEach(record => {
            var _a, _b, _c, _d;
            const recordDS = (_b = (_a = record).getDataSource) === null || _b === void 0 ? void 0 : _b.call(_a);
            let originDS = null;
            if (recordDS) {
                originDS = ((_c = recordDS.getOriginDataSources()) === null || _c === void 0 ? void 0 : _c[0]) || recordDS;
            }
            else if (outputDS) {
                // Fallback: use outputDS's origin if record doesn't have dataSource
                originDS = ((_d = outputDS.getOriginDataSources()) === null || _d === void 0 ? void 0 : _d[0]) || outputDS;
            }
            if (originDS) {
                if (!recordsByOriginDS.has(originDS)) {
                    recordsByOriginDS.set(originDS, []);
                }
                recordsByOriginDS.get(originDS).push(record);
            }
        });
        // Create a DataRecordSet for each origin data source
        const dataSets = Array.from(recordsByOriginDS.entries()).map(([originDS, originRecords]) => {
            const dataSet = {
                dataSource: originDS, // Use origin DS, not outputDS
                type: 'selected',
                records: originRecords,
                name: originDS.id,
                label: originDS.getLabel()
            };
            // Add fields if needed (use currentItem's field settings)
            if (currentItem.resultFieldsType === _config__WEBPACK_IMPORTED_MODULE_4__.FieldsType.SelectAttributes && currentItem.resultDisplayFields != null) {
                dataSet.fields = (0,_query_utils__WEBPACK_IMPORTED_MODULE_8__.combineFields)(currentItem.resultDisplayFields, currentItem.resultTitleExpression);
            }
            else if (originDS && 'getPopupInfo' in originDS) {
                // use fields in popup template from origin DS
                const popupInfo = originDS.getPopupInfo();
                if (popupInfo === null || popupInfo === void 0 ? void 0 : popupInfo.fieldInfos) {
                    dataSet.fields = popupInfo.fieldInfos.filter((fieldInfo) => fieldInfo.visible).map((fieldInfo) => fieldInfo.fieldName);
                }
            }
            return dataSet;
        });
        // Debug: Log what the final dataSets contain
        debugLogger.log('RESULTS-MODE', {
            event: 'actionDataSets-final',
            widgetId: widgetId,
            dataSetsCount: dataSets.length,
            totalRecordsCount: recordsToUse.length,
            dataSetsByOrigin: dataSets.map(ds => {
                var _a, _b;
                return ({
                    originDSId: (_a = ds.dataSource) === null || _a === void 0 ? void 0 : _a.id,
                    recordsCount: ((_b = ds.records) === null || _b === void 0 ? void 0 : _b.length) || 0,
                    type: ds.type
                });
            })
        });
        // If we couldn't group by origin (shouldn't happen), fallback to single DataRecordSet with outputDS
        if (dataSets.length === 0 && outputDS) {
            debugLogger.log('RESULTS-MODE', {
                event: 'actionDataSets-fallback-to-outputDS',
                widgetId: widgetId,
                reason: 'could-not-determine-origin-ds'
            });
            return [{
                    dataSource: outputDS,
                    type: recordsToUse.length > 0 ? 'selected' : 'loaded',
                    records: recordsToUse,
                    name: outputDS.id,
                    label: outputDS.getLabel()
                }];
        }
        return dataSets;
    }, [selectedRecords, outputDS, queryData, currentItem, records, widgetId]);
    // Memoize filtered records to prevent unnecessary re-renders that reset scroll position
    // This ensures the records prop only changes when the actual data changes, not just the array reference
    const filteredRecordsForList = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        var _a;
        return ((_a = queryData === null || queryData === void 0 ? void 0 : queryData.records) === null || _a === void 0 ? void 0 : _a.filter((record) => !removedRecordIds.has(record.getId()))) ||
            ((records === null || records === void 0 ? void 0 : records.filter(record => !removedRecordIds.has(record.getId()))) || []);
    }, [queryData === null || queryData === void 0 ? void 0 : queryData.records, records, removedRecordIds]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        // focus the back button when it is rendered
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.focusElementInKeyboardMode)(backBtnRef.current);
    });
    /**
     * Effect hook that runs when new query results arrive.
     * Resets removed records, expand state, and query data for the new results.
     * Also handles auto-selection of records when they first arrive.
     */
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        // Check if these are new records (different from what we last queried)
        // IMPORTANT: Compare against original query results, not selected results
        // This prevents removedRecordIds from being reset when records are removed
        const currentRecordIds = (records === null || records === void 0 ? void 0 : records.map(record => record.getId())) || [];
        const recordsChanged = currentRecordIds.length !== lastQueryRecordIdsRef.current.length ||
            currentRecordIds.some((id, index) => id !== lastQueryRecordIdsRef.current[index]);
        // Debug: Log when records prop changes
        debugLogger.log('RESULTS-MODE', {
            event: 'records-prop-changed',
            widgetId: widgetId,
            recordsCount: (records === null || records === void 0 ? void 0 : records.length) || 0,
            willSetQueryData: records && records.length > 0,
            removedRecordIdsCount: removedRecordIds.size,
            hasSelectedRef: hasSelectedRef.current,
            recordsChanged: recordsChanged,
            lastQueryRecordIdsCount: lastQueryRecordIdsRef.current.length,
            currentRecordIdsCount: currentRecordIds.length
        });
        // IMPORTANT: Only reset removed records if this is truly a NEW query with different records
        // Don't reset if records are the same (just a re-render or lazy load)
        if (recordsChanged) {
            debugLogger.log('RESULTS-MODE', {
                event: 'records-truly-changed-resetting-removed',
                widgetId: widgetId,
                oldRecordIdsCount: lastQueryRecordIdsRef.current.length,
                newRecordIdsCount: currentRecordIds.length
            });
            setRemovedRecordIds(new Set());
            // Update the original query record IDs ref
            lastQueryRecordIdsRef.current = currentRecordIds;
        }
        else {
            debugLogger.log('RESULTS-MODE', {
                event: 'records-not-changed-preserving-removed',
                widgetId: widgetId,
                recordIdsCount: currentRecordIds.length,
                removedRecordIdsCount: removedRecordIds.size
            });
        }
        // NOTE: Don't reset expandAll here - it's handled by the queryItem-change useEffect
        // Resetting it here causes the Expand/Collapse button to flip back when records are removed
        setQueryData({
            records,
            page: 1
        });
        // Only auto-select records if:
        // 1. We have records and outputDS
        // 2. We haven't already selected these records (hasSelectedRef is false)
        // 3. OR the records have actually changed (new query results)
        // 4. AND we don't have any removed records (to prevent re-selecting removed ones)
        if (records && records.length > 0 && outputDS &&
            (!hasSelectedRef.current || recordsChanged) &&
            removedRecordIds.size === 0) {
            const recordIds = records.map(record => record.getId());
            const fdr = records;
            (() => __awaiter(this, void 0, void 0, function* () {
                try {
                    setSelectionError(null); // Clear previous errors
                    yield (0,_selection_utils__WEBPACK_IMPORTED_MODULE_14__.selectRecordsAndPublish)(widgetId, outputDS, recordIds, fdr, false, useGraphicsLayerForHighlight, graphicsLayer, mapView);
                    hasSelectedRef.current = true; // Mark as selected
                    lastSelectedRecordsRef.current = recordIds; // Store the IDs we selected
                    lastSelectedFeatureRecordsRef.current = fdr; // Store the full records for potential restoration
                    // Notify Widget and HelperSimple of selection change
                    (0,_selection_utils__WEBPACK_IMPORTED_MODULE_14__.dispatchSelectionEvent)(widgetId, recordIds, outputDS, queryItem.configId);
                }
                catch (error) {
                    const errorMessage = error instanceof Error ? error.message : 'Failed to select query results';
                    setSelectionError(errorMessage);
                    debugLogger.log('TASK', {
                        event: 'selection-failed-query-result',
                        error: errorMessage,
                        errorStack: error instanceof Error ? error.stack : undefined,
                        recordCount: recordIds.length
                    });
                }
            }))();
        }
        else if (recordsChanged && records && records.length === 0) {
            // If records were cleared, reset the selection flag
            hasSelectedRef.current = false;
            lastSelectedRecordsRef.current = [];
            setSelectionError(null); // Clear errors when clearing records
        }
        else if (removedRecordIds.size > 0) {
            debugLogger.log('RESULTS-MODE', {
                event: 'skipping-reselection-due-to-removed-records',
                widgetId: widgetId,
                removedRecordIdsCount: removedRecordIds.size,
                recordsCount: (records === null || records === void 0 ? void 0 : records.length) || 0,
                hasSelectedRef: hasSelectedRef.current,
                recordsChanged: recordsChanged
            });
        }
    }, [records, outputDS, widgetId, queryItem.configId, queryItem.resultExpandByDefault, removedRecordIds]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        // clear selection when resultSelectMode changed
        if (outputDS) {
            (0,_selection_utils__WEBPACK_IMPORTED_MODULE_14__.clearSelectionInDataSources)(outputDS, useGraphicsLayerForHighlight, graphicsLayer);
            (0,_selection_utils__WEBPACK_IMPORTED_MODULE_14__.publishSelectionMessage)(widgetId, [], outputDS, true);
        }
    }, [queryItem.resultSelectMode, outputDS, widgetId, useGraphicsLayerForHighlight, graphicsLayer]);
    // Update expandAll when queryItem changes (e.g., switching between queries)
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        const newExpandAll = (_a = queryItem.resultExpandByDefault) !== null && _a !== void 0 ? _a : false;
        debugLogger.log('RESULTS-MODE', {
            event: 'expandAll-reset-by-queryItem-change',
            widgetId,
            queryItemConfigId: queryItem.configId,
            resultExpandByDefault: queryItem.resultExpandByDefault,
            newExpandAll,
            timestamp: Date.now()
        });
        setExpandAll(newExpandAll);
        // Reset individual expansion states when query changes
        setItemExpandStates(new Map());
    }, [queryItem.configId]);
    /**
     * Monitor origin data source selection changes to detect when other widgets (like map identify)
     * clear our selections. Enhanced with identify popup detection for testing scenarios.
     * Watches the origin data source's selection state directly via polling.
     */
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        if (!outputDS)
            return;
        const originDS = (_a = outputDS.getOriginDataSources()) === null || _a === void 0 ? void 0 : _a[0];
        if (!originDS)
            return;
        const originDSId = originDS.id;
        let previousSelectedIds = [];
        let identifyPopupWasOpen = false;
        let lastLogTime = 0;
        const LOG_THROTTLE_MS = 1000; // Throttle logs to once per second
        // Initial check
        previousSelectedIds = originDS.getSelectedRecordIds() || [];
        identifyPopupWasOpen = isIdentifyPopupOpen();
        // Watch for selection changes on the origin data source
        const checkSelection = () => {
            const currentSelectedIds = originDS.getSelectedRecordIds() || [];
            const ourExpectedIds = lastSelectedRecordsRef.current;
            const hasOurSelection = ourExpectedIds.length > 0;
            const identifyPopupIsOpen = isIdentifyPopupOpen();
            // Detect if selection was cleared or changed externally
            const wasCleared = previousSelectedIds.length > 0 && currentSelectedIds.length === 0;
            const wasChanged = previousSelectedIds.length > 0 &&
                (currentSelectedIds.length !== previousSelectedIds.length ||
                    !currentSelectedIds.every(id => previousSelectedIds.includes(id)));
            // NEW: Detect if selection was added (went from empty to having records)
            const wasAdded = previousSelectedIds.length === 0 && currentSelectedIds.length > 0;
            // Track identify popup state changes
            const identifyPopupJustOpened = !identifyPopupWasOpen && identifyPopupIsOpen;
            const identifyPopupJustClosed = identifyPopupWasOpen && !identifyPopupIsOpen;
            const identifyPopupStillOpen = identifyPopupWasOpen && identifyPopupIsOpen;
            // Log identify popup state changes
            const now = Date.now();
            if (identifyPopupJustOpened || identifyPopupJustClosed) {
                debugLogger.log('SELECTION', {
                    event: identifyPopupJustOpened ? 'identify-popup-opened' : 'identify-popup-closed',
                    originDSId,
                    ourSelectionCount: ourExpectedIds.length,
                    currentSelectionCount: currentSelectedIds.length,
                    timestamp: new Date().toISOString()
                });
                // If identify popup just closed and selection was cleared, dispatch restore event
                if (identifyPopupJustClosed && wasCleared && hasOurSelection && ourExpectedIds.length > 0) {
                    const restoreEvent = new CustomEvent(RESTORE_ON_IDENTIFY_CLOSE_EVENT, {
                        detail: {
                            widgetId,
                            recordIds: ourExpectedIds,
                            outputDsId: outputDS.id,
                            queryItemConfigId: queryItem.configId
                        },
                        bubbles: true,
                        cancelable: true
                    });
                    window.dispatchEvent(restoreEvent);
                    debugLogger.log('SELECTION', {
                        event: 'identify-popup-closed-restore-requested',
                        widgetId,
                        recordCount: ourExpectedIds.length,
                        outputDsId: outputDS.id,
                        queryItemConfigId: queryItem.configId
                    });
                }
            }
            // Log ALL selection changes (not just when we have our own selection)
            if (wasCleared || wasChanged || wasAdded) {
                // Check if this matches our expected selection
                const matchesOurSelection = hasOurSelection &&
                    ourExpectedIds.length === currentSelectedIds.length &&
                    ourExpectedIds.every(id => currentSelectedIds.includes(id));
                // Determine what would happen (for testing/logging)
                const wouldRestore = wasCleared && identifyPopupIsOpen && hasOurSelection && ourExpectedIds.length > 0;
                // Determine scenario
                let scenario = 'Unknown';
                if (wasAdded && !hasOurSelection) {
                    scenario = 'TEST SCENARIO 4: Another widget selected records (we have no selection)';
                }
                else if (wasChanged && !matchesOurSelection && !hasOurSelection) {
                    scenario = 'TEST SCENARIO 5: Another widget changed selection (we have no selection)';
                }
                else if (wasChanged && !matchesOurSelection && hasOurSelection) {
                    scenario = identifyPopupIsOpen
                        ? 'TEST SCENARIO 2: Query  Identify (selection changed, not cleared)  Would NOT restore'
                        : 'TEST SCENARIO 3: Query  Another QuerySimple widget  Would NOT restore';
                }
                else if (wasCleared && hasOurSelection) {
                    scenario = identifyPopupIsOpen
                        ? 'TEST SCENARIO 1: Query  Identify  Would restore'
                        : 'TEST SCENARIO 3: Query  Another QuerySimple widget (cleared)  Would NOT restore';
                }
                else if (wasAdded && hasOurSelection) {
                    scenario = matchesOurSelection
                        ? 'Our widget selected records'
                        : 'Another widget selected different records';
                }
                // Log detection with identify popup state (throttled)
                if (now - lastLogTime > LOG_THROTTLE_MS) {
                    debugLogger.log('SELECTION', {
                        event: wasCleared ? 'selection-cleared' : wasChanged ? 'selection-changed' : 'selection-added',
                        originDSId,
                        ourExpectedCount: ourExpectedIds.length,
                        previousSelectedCount: previousSelectedIds.length,
                        currentSelectedCount: currentSelectedIds.length,
                        wasCleared,
                        wasChanged,
                        wasAdded,
                        hasOurSelection,
                        matchesOurSelection,
                        identifyPopupIsOpen,
                        identifyPopupJustOpened,
                        identifyPopupStillOpen,
                        identifyPopupJustClosed,
                        wouldRestore,
                        ourExpectedIds: ourExpectedIds.slice(0, 5),
                        previousSelectedIds: previousSelectedIds.slice(0, 5),
                        currentSelectedIds: currentSelectedIds.slice(0, 5),
                        timestamp: new Date().toISOString(),
                        note: wouldRestore
                            ? 'Would restore selection (cleared + identify popup open)'
                            : identifyPopupIsOpen && wasChanged
                                ? 'Identify popup open but selection changed (not cleared) - would not restore'
                                : wasCleared && !identifyPopupIsOpen
                                    ? 'Selection cleared, checking if identify popup opens...'
                                    : wasAdded
                                        ? hasOurSelection && matchesOurSelection
                                            ? 'Our widget selected records'
                                            : hasOurSelection && !matchesOurSelection
                                                ? 'Another widget selected different records'
                                                : 'Selection added (by another widget or external source)'
                                        : 'No identify popup detected - would not restore'
                    });
                    lastLogTime = now;
                }
            }
            previousSelectedIds = [...currentSelectedIds];
            identifyPopupWasOpen = identifyPopupIsOpen;
        };
        // Check periodically (every 500ms)
        const intervalId = setInterval(checkSelection, 500);
        return () => {
            clearInterval(intervalId);
        };
    }, [outputDS]);
    /**
     * Clears all results. Resets local state and delegates to parent's clearResult method.
     */
    const clearResults = () => __awaiter(this, void 0, void 0, function* () {
        // Log hash state before clearing
        const hashBefore = window.location.hash.substring(1);
        const urlParamsBefore = new URLSearchParams(hashBefore);
        const hashParamsBefore = {};
        urlParamsBefore.forEach((value, key) => {
            hashParamsBefore[key] = value;
        });
        debugLogger.log('HASH', {
            event: 'clearResults-called',
            widgetId,
            hashBefore: hashBefore,
            hashParamsBefore: hashParamsBefore,
            hashParamsCount: Object.keys(hashParamsBefore).length,
            timestamp: Date.now()
        });
        // Reset local selection flags
        hasSelectedRef.current = false;
        lastSelectedRecordsRef.current = [];
        // Reset local query data state
        setQueryData(null);
        setRemovedRecordIds(new Set());
        // Clear error state when clearing results
        setSelectionError(null);
        // Delegate to parent's clearResult method (via onNavBack) which handles
        // clearing selection from map, publishing messages, etc.
        yield onNavBack(true);
        // Log hash state after clearing (with delay to catch async updates)
        setTimeout(() => {
            const hashAfter = window.location.hash.substring(1);
            const urlParamsAfter = new URLSearchParams(hashAfter);
            const hashParamsAfter = {};
            urlParamsAfter.forEach((value, key) => {
                hashParamsAfter[key] = value;
            });
            debugLogger.log('HASH', {
                event: 'clearResults-completed',
                widgetId,
                hashBefore: hashBefore,
                hashAfter: hashAfter,
                hashParamsBefore: hashParamsBefore,
                hashParamsAfter: hashParamsAfter,
                hashParamsRemoved: Object.keys(hashParamsBefore).length - Object.keys(hashParamsAfter).length,
                hashParamsCountBefore: Object.keys(hashParamsBefore).length,
                hashParamsCountAfter: Object.keys(hashParamsAfter).length,
                stillHasHashParams: Object.keys(hashParamsAfter).length > 0,
                timestamp: Date.now()
            });
        }, 100);
    });
    const handleRenderDone = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(({ dataItems, pageSize, page }) => {
        debugLogger.log('RESULTS-MODE', {
            event: 'handleRenderDone-called',
            widgetId,
            queryItemConfigId: queryItem.configId,
            dataItemsCount: (dataItems === null || dataItems === void 0 ? void 0 : dataItems.length) || 0,
            pageSize,
            page,
            timestamp: Date.now()
        });
        // Use ref to get latest removedRecordIds (avoids stale closure issues with lazy loading)
        const currentRemovedIds = removedRecordIdsRef.current;
        // Filter out removed records FIRST - before any selection logic
        // This ensures removed records stay removed even during lazy loading
        const filteredItems = (dataItems === null || dataItems === void 0 ? void 0 : dataItems.filter(item => !currentRemovedIds.has(item.getId()))) || [];
        // Check if queryData has actually changed before updating state
        // This prevents unnecessary re-renders that reset scroll position
        const currentRecords = (queryData === null || queryData === void 0 ? void 0 : queryData.records) || [];
        const currentRecordIds = currentRecords.map(r => r.getId()).sort();
        const newRecordIds = filteredItems.map(r => r.getId()).sort();
        const dataChanged = currentRecordIds.length !== newRecordIds.length ||
            !currentRecordIds.every((id, idx) => id === newRecordIds[idx]) ||
            (queryData === null || queryData === void 0 ? void 0 : queryData.pageSize) !== pageSize ||
            (queryData === null || queryData === void 0 ? void 0 : queryData.page) !== page;
        // Only update state if data has actually changed
        if (dataChanged) {
            setQueryData({
                records: filteredItems,
                pageSize,
                page
            });
        }
        // Only select records that are NOT removed
        // IMPORTANT: Only re-select if the selection has actually changed to avoid resetting scroll position
        if (filteredItems && filteredItems.length > 0 && outputDS) {
            const recordIds = filteredItems.map(record => record.getId());
            const fdr = filteredItems;
            // Check what's currently selected to avoid unnecessary re-selection (which resets scroll)
            const currentlySelectedIds = outputDS.getSelectedRecordIds() || [];
            const selectionChanged = currentlySelectedIds.length !== recordIds.length ||
                !recordIds.every(id => currentlySelectedIds.includes(id));
            // Only select if the selection has actually changed
            if (selectionChanged) {
                try {
                    setSelectionError(null); // Clear previous errors
                    (0,_selection_utils__WEBPACK_IMPORTED_MODULE_14__.selectRecordsAndPublish)(widgetId, outputDS, recordIds, fdr);
                    debugLogger.log('RESULTS-MODE', {
                        event: 'handleRenderDone-selecting-filtered-records',
                        widgetId: widgetId,
                        dataItemsCount: (dataItems === null || dataItems === void 0 ? void 0 : dataItems.length) || 0,
                        filteredItemsCount: filteredItems.length,
                        removedRecordIdsCount: currentRemovedIds.size,
                        selectionChanged: true,
                        currentlySelectedCount: currentlySelectedIds.length,
                        newSelectionCount: recordIds.length
                    });
                }
                catch (error) {
                    const errorMessage = error instanceof Error ? error.message : 'Failed to select query results';
                    setSelectionError(errorMessage);
                    debugLogger.log('TASK', {
                        event: 'selection-failed-handleRenderDone',
                        error: errorMessage,
                        errorStack: error instanceof Error ? error.stack : undefined,
                        recordCount: recordIds.length
                    });
                }
            }
            else {
                debugLogger.log('RESULTS-MODE', {
                    event: 'handleRenderDone-skipping-reselection',
                    widgetId: widgetId,
                    dataItemsCount: (dataItems === null || dataItems === void 0 ? void 0 : dataItems.length) || 0,
                    filteredItemsCount: filteredItems.length,
                    removedRecordIdsCount: currentRemovedIds.size,
                    reason: 'selection-unchanged',
                    currentlySelectedCount: currentlySelectedIds.length
                });
            }
        }
    }, [outputDS, widgetId, queryData]);
    const handleDataSourceInfoChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        var _a, _b;
        const ds = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().getDataSource(outputDS === null || outputDS === void 0 ? void 0 : outputDS.id);
        const dsRecords = ds === null || ds === void 0 ? void 0 : ds.getSelectedRecords();
        const selectedIds = (_a = ds === null || ds === void 0 ? void 0 : ds.getSelectedRecordIds()) !== null && _a !== void 0 ? _a : [];
        // Capture records prop before using it (to avoid shadowing)
        const recordsProp = records;
        // Debug: Log what handleDataSourceInfoChange sees
        debugLogger.log('RESULTS-MODE', {
            event: 'handleDataSourceInfoChange-fired',
            widgetId: widgetId,
            outputDSId: outputDS === null || outputDS === void 0 ? void 0 : outputDS.id,
            dsId: ds === null || ds === void 0 ? void 0 : ds.id,
            selectedRecordsFromDS: (dsRecords === null || dsRecords === void 0 ? void 0 : dsRecords.length) || 0,
            selectedIdsFromDS: selectedIds.length,
            currentSelectedRecordsState: (selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) || 0,
            recordsPropCount: (recordsProp === null || recordsProp === void 0 ? void 0 : recordsProp.length) || 0,
            removedRecordIdsCount: removedRecordIds.size,
            timestamp: Date.now()
        });
        // If we have records in the prop (accumulated records) but DS shows 0 selected,
        // and we currently have selectedRecords, this is likely a query switch in "Add to" mode
        // where re-selection hasn't happened yet. Don't clear selectedRecords - wait for re-selection.
        if (recordsProp && recordsProp.length > 0 && selectedIds.length === 0 && selectedRecords && selectedRecords.length > 0) {
            debugLogger.log('RESULTS-MODE', {
                event: 'handleDataSourceInfoChange-skipping-clear-during-query-switch',
                widgetId: widgetId,
                reason: 'waiting-for-reselection',
                recordsPropCount: recordsProp.length,
                currentSelectedRecordsCount: selectedRecords.length
            });
            return; // Skip updating - re-selection is coming
        }
        // IMPORTANT: Filter out removed records from DS selection before comparing/syncing
        // This prevents removed records from being re-added when scrolling triggers this callback
        const filteredDsRecords = (_b = dsRecords === null || dsRecords === void 0 ? void 0 : dsRecords.filter((record) => !removedRecordIds.has(record.getId()))) !== null && _b !== void 0 ? _b : [];
        const filteredSelectedIds = selectedIds.filter(id => !removedRecordIds.has(id));
        // If DS has more selected than our state, but the difference is entirely removed records, don't sync
        if (filteredSelectedIds.length === ((selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) || 0) && selectedIds.length > filteredSelectedIds.length) {
            debugLogger.log('RESULTS-MODE', {
                event: 'handleDataSourceInfoChange-skipping-sync-due-to-removed-records',
                widgetId: widgetId,
                reason: 'ds-selection-includes-removed-records',
                dsSelectedCount: selectedIds.length,
                filteredCount: filteredSelectedIds.length,
                componentStateCount: (selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) || 0,
                removedRecordIdsCount: removedRecordIds.size
            });
            return; // Skip syncing - the mismatch is due to removed records
        }
        let shouldUpdate = false;
        if (filteredSelectedIds.length !== (selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length)) {
            shouldUpdate = true;
        }
        else { // equal length
            shouldUpdate = filteredSelectedIds.some(id => {
                const target = selectedRecords.find((item) => item.getId() === id);
                return target == null;
            });
        }
        if (shouldUpdate) {
            debugLogger.log('RESULTS-MODE', {
                event: 'handleDataSourceInfoChange-updating-selectedRecords',
                widgetId: widgetId,
                oldCount: (selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) || 0,
                newCount: filteredDsRecords.length,
                note: 'filtered-out-removed-records'
            });
            debugLogger.log('RESULTS-MODE', {
                event: 'handleDataSourceInfoChange-updating-selectedRecords',
                widgetId: widgetId,
                oldCount: (selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) || 0,
                newCount: filteredDsRecords.length,
                oldSelectedIds: (selectedRecords || []).map(r => r.getId()).slice(0, 5),
                newSelectedIds: filteredSelectedIds.slice(0, 5),
                note: 'filtered-out-removed-records',
                timestamp: Date.now()
            });
            setSelectedRecords(filteredDsRecords);
        }
        else {
            debugLogger.log('RESULTS-MODE', {
                event: 'handleDataSourceInfoChange-skipping-update',
                widgetId: widgetId,
                reason: 'no-change-detected',
                timestamp: Date.now()
            });
        }
    }, [outputDS === null || outputDS === void 0 ? void 0 : outputDS.id, selectedRecords, widgetId, records, removedRecordIds]);
    /**
     * Generates the tip message showing how many features are displayed.
     * Filters out removed records to show accurate counts.
     *
     * @returns Formatted string like "Features displayed: 118 / 121"
     */
    const getTipMessage = () => {
        if (queryData && queryData.records) {
            // Filter out removed records for display count
            const displayedRecords = queryData.records.filter((record) => !removedRecordIds.has(record.getId()));
            const displayedCount = displayedRecords.length;
            // FORCED: Always SimpleList, so always use simple display format
            return `${getI18nMessage('featuresDisplayed')}: ${displayedCount} / ${resultCount}`;
            // removed by dead control flow
{}
            // removed by dead control flow
{}
            // removed by dead control flow
{}
            // removed by dead control flow
{}
            // removed by dead control flow
{}
        }
        return '';
    };
    /**
     * Toggles expand/collapse state for all result items.
     * When toggled, all result items will be expanded or collapsed together.
     * Updates individual item expansion states in the map to maintain state when items are removed.
     */
    const toggleExpandAll = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        setExpandAll(prev => {
            const newValue = !prev;
            debugLogger.log('EXPAND-COLLAPSE', {
                event: 'toggleExpandAll-clicked',
                widgetId,
                previousValue: prev,
                newValue,
                timestamp: Date.now()
            });
            // Update all current items in the map with the new expansion state
            setItemExpandStates(prevMap => {
                const newMap = new Map(prevMap);
                // Get all current record IDs from filtered records
                const allRecordIds = filteredRecordsForList.map(r => r.getId());
                allRecordIds.forEach(id => {
                    newMap.set(id, newValue);
                });
                debugLogger.log('EXPAND-COLLAPSE', {
                    event: 'itemExpandStates-updated',
                    widgetId,
                    newValue,
                    updatedCount: allRecordIds.length,
                    recordIds: allRecordIds.slice(0, 10), // Log first 10 IDs
                    timestamp: Date.now()
                });
                return newMap;
            });
            return newValue;
        });
    }, [widgetId, filteredRecordsForList]);
    const resultUseOutputDataSource = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)({
            dataSourceId: queryItem.outputDataSourceId,
            mainDataSourceId: queryItem.outputDataSourceId
        });
    }, [queryItem === null || queryItem === void 0 ? void 0 : queryItem.outputDataSourceId]);
    const handleEscape = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.focusElementInKeyboardMode)(backBtnRef.current);
    }, []);
    // Keep records selected and zoom to clicked record
    // Records remain selected as long as they're in the results
    // Clicking a record always zooms to it on the map (this behavior is always enabled)
    const toggleSelection = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((data) => {
        var _a, _b;
        // Ensure the clicked record is selected (it should already be, but ensure it)
        const selectedDatas = (_a = outputDS.getSelectedRecords()) !== null && _a !== void 0 ? _a : [];
        const selectedIds = (_b = outputDS.getSelectedRecordIds()) !== null && _b !== void 0 ? _b : [];
        const dataId = data.getId();
        // If this record isn't already selected, add it to the selection
        if (!selectedIds.includes(dataId)) {
            const updatedSelectedDatas = [...selectedDatas, data];
            const recordIds = updatedSelectedDatas.map(record => record.getId());
            // Select records and publish selection message using utility function
            (0,_selection_utils__WEBPACK_IMPORTED_MODULE_14__.selectRecordsAndPublish)(widgetId, outputDS, recordIds, updatedSelectedDatas, true);
        }
        // Zoom to the clicked record with padding (always enabled - user wants to keep this behavior)
        // BUG-GRAPHICS-001: Zoom operations fail when graphics layer is disabled
        if (!mapView && !useGraphicsLayerForHighlight) {
            debugLogger.log('BUG', {
                bugId: 'BUG-GRAPHICS-001',
                category: 'GRAPHICS',
                event: 'zoom-operation-failed-graphics-layer-disabled',
                widgetId,
                operation: 'result-item-click-zoom',
                recordId: data.getId(),
                description: 'Zoom operation attempted on result item click but mapView is unavailable because useGraphicsLayerForHighlight is disabled',
                workaround: 'Enable useGraphicsLayerForHighlight in widget settings',
                targetResolution: 'r019.0'
            });
        }
        zoomToRecords([data]).catch(error => {
            // Silently handle errors - zoom is non-critical
        });
    }, [outputDS, widgetId, zoomToRecords]);
    /**
     * Removes a record from the results and selection.
     * If removing the last record, automatically clears all results
     * by calling the trash can logic (same as clicking Clear button).
     * This ensures the UI doesn't show "Features displayed: 0 / 1" when all results are removed.
     *
     * @param data - The feature data record to remove
     */
    const removeRecord = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((data) => {
        var _a, _b;
        const dataId = data.getId();
        const currentExpandAll = expandAll;
        // Log hash state when removing individual record
        const hash = window.location.hash.substring(1);
        const urlParams = new URLSearchParams(hash);
        const hashParams = {};
        urlParams.forEach((value, key) => {
            hashParams[key] = value;
        });
        debugLogger.log('EXPAND-COLLAPSE', {
            event: 'removeRecord-started',
            widgetId,
            removedRecordId: dataId,
            currentExpandAll,
            timestamp: Date.now()
        });
        debugLogger.log('HASH', {
            event: 'removeRecord-called',
            widgetId,
            removedRecordId: dataId,
            hash: hash,
            hashParams: hashParams,
            hashParamsCount: Object.keys(hashParams).length,
            timestamp: Date.now()
        });
        // Remove from expansion states map
        setItemExpandStates(prevMap => {
            const newMap = new Map(prevMap);
            newMap.delete(dataId);
            debugLogger.log('EXPAND-COLLAPSE', {
                event: 'itemExpandStates-cleaned-up',
                widgetId,
                removedRecordId: dataId,
                remainingCount: newMap.size,
                timestamp: Date.now()
            });
            return newMap;
        });
        // Add to removed records set
        setRemovedRecordIds(prev => {
            var _a, _b;
            const newSet = new Set(prev).add(dataId);
            // If all records are now removed, clear everything by calling trash can logic
            // IMPORTANT: Compare against actual displayed records count, not resultCount
            // resultCount only reflects the latest query, but in "Add to" mode we display accumulated records
            // Use queryData.records.length (before filtering) as the source of truth for displayed records
            // Fall back to accumulatedRecords.length if in accumulation mode, or resultCount as last resort
            let currentDisplayedCount = ((_a = queryData === null || queryData === void 0 ? void 0 : queryData.records) === null || _a === void 0 ? void 0 : _a.length) || 0;
            if (currentDisplayedCount === 0) {
                // If queryData doesn't have records yet, check if we're in accumulation mode
                const isAccumulationMode = resultsMode === _config__WEBPACK_IMPORTED_MODULE_4__.SelectionType.AddToSelection ||
                    resultsMode === _config__WEBPACK_IMPORTED_MODULE_4__.SelectionType.RemoveFromSelection;
                if (isAccumulationMode && accumulatedRecords && accumulatedRecords.length > 0) {
                    currentDisplayedCount = accumulatedRecords.length;
                }
                else {
                    // Last resort: use resultCount (but this might be incorrect in accumulation mode)
                    currentDisplayedCount = resultCount;
                }
            }
            debugLogger.log('RESULTS-MODE', {
                event: 'removeRecord-checking-all-removed',
                widgetId,
                removedRecordIdsSize: newSet.size,
                currentDisplayedCount,
                resultCount,
                queryDataRecordsCount: ((_b = queryData === null || queryData === void 0 ? void 0 : queryData.records) === null || _b === void 0 ? void 0 : _b.length) || 0,
                accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0,
                resultsMode,
                willNavigateBack: newSet.size === currentDisplayedCount && currentDisplayedCount > 0,
                timestamp: Date.now()
            });
            if (newSet.size === currentDisplayedCount && currentDisplayedCount > 0) {
                // All displayed records removed - clear everything (same as clicking trash can button)
                onNavBack(true);
                return newSet;
            }
            return newSet;
        });
        // Update queryData to filter out the removed record
        setQueryData(prevData => {
            if (!prevData)
                return prevData;
            const filteredRecords = prevData.records.filter((record) => record.getId() !== dataId);
            return Object.assign(Object.assign({}, prevData), { records: filteredRecords });
        });
        // ALWAYS remove from origin data source selections (same as Remove mode)
        // This properly removes records from the map selection, handling single or multiple origin sources
        // Also removes graphics from graphics layer if using graphics layer highlighting
        (0,_results_management_utils__WEBPACK_IMPORTED_MODULE_15__.removeRecordsFromOriginSelections)(widgetId, [data], outputDS, useGraphicsLayerForHighlight, graphicsLayer);
        // Update outputDS selection
        const selectedDatas = (_a = outputDS.getSelectedRecords()) !== null && _a !== void 0 ? _a : [];
        const updatedSelectedDatas = selectedDatas.filter(record => record.getId() !== dataId);
        const recordIds = updatedSelectedDatas.map(record => record.getId());
        // Update outputDS selection
        if (typeof outputDS.selectRecordsByIds === 'function') {
            outputDS.selectRecordsByIds(recordIds, updatedSelectedDatas);
        }
        // IMPORTANT: Publish custom event so widget can update lastSelection state
        // This ensures restoration restores the correct (updated) count
        const originDS = (_b = outputDS.getOriginDataSources()) === null || _b === void 0 ? void 0 : _b[0];
        const dataSourceId = originDS === null || originDS === void 0 ? void 0 : originDS.id;
        const selectionEvent = new CustomEvent('querysimple-selection-changed', {
            detail: {
                widgetId,
                recordIds, // Updated record IDs (with removed record excluded)
                dataSourceId,
                outputDsId: outputDS.id,
                queryItemConfigId: queryItem.configId
            },
            bubbles: true,
            cancelable: true
        });
        window.dispatchEvent(selectionEvent);
        // If in accumulation mode, also remove from accumulated records
        const isAccumulationMode = resultsMode === _config__WEBPACK_IMPORTED_MODULE_4__.SelectionType.AddToSelection ||
            resultsMode === _config__WEBPACK_IMPORTED_MODULE_4__.SelectionType.RemoveFromSelection;
        if (isAccumulationMode && onAccumulatedRecordsChange && accumulatedRecords && accumulatedRecords.length > 0) {
            const remainingRecords = (0,_results_management_utils__WEBPACK_IMPORTED_MODULE_15__.removeResultsFromAccumulated)(outputDS, [data], accumulatedRecords);
            debugLogger.log('RESULTS-MODE', {
                event: 'x-button-removed-from-accumulated',
                widgetId,
                removedRecordId: dataId,
                accumulatedRecordsCountBefore: accumulatedRecords.length,
                remainingRecordsCount: remainingRecords.length,
                wasRemoved: remainingRecords.length < accumulatedRecords.length
            });
            onAccumulatedRecordsChange(remainingRecords);
        }
        // Log after removeRecord completes to check if expandAll changed
        setTimeout(() => {
            debugLogger.log('RESULTS-MODE', {
                event: 'removeRecord-completed',
                widgetId,
                removedRecordId: dataId,
                expandAllBefore: currentExpandAll,
                expandAllAfter: expandAll,
                expandAllChanged: currentExpandAll !== expandAll,
                expandByDefaultProp: expandAll, // What will be passed to SimpleList
                timestamp: Date.now()
            });
        }, 0);
    }, [outputDS, widgetId, resultCount, onNavBack, resultsMode, accumulatedRecords, onAccumulatedRecordsChange, queryItem.configId, expandAll]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'query-result h-100', css: resultStyle, role: 'listbox', "aria-label": getI18nMessage('results'), children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceComponent, { useDataSource: resultUseOutputDataSource, onDataSourceInfoChange: handleDataSourceInfoChange }), selectionError && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `padding: 0 16px; margin-top: 8px;`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_16__.ErrorMessage, { error: selectionError, onDismiss: () => setSelectionError(null) }) })), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'query-result__header d-flex align-items-center mx-4', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { "aria-label": getI18nMessage('back'), ref: backBtnRef, className: 'p-0 mr-2', size: 'sm', variant: 'text', color: 'inherit', icon: true, onClick: () => { onNavBack(); }, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_directional_arrow_left__WEBPACK_IMPORTED_MODULE_10__.ArrowLeftOutlined, { autoFlip: true }) }), (_b = currentItem.resultsLabel) !== null && _b !== void 0 ? _b : getI18nMessage('results'), ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { title: getI18nMessage('clearResult'), placement: 'bottom', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { className: 'ml-auto', icon: true, size: 'sm', variant: 'text', color: 'inherit', onClick: clearResults, "aria-label": getI18nMessage('clearResult'), children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Icon, { icon: iconMap.toolDelete }) }) }), enableDataAction && outputDS && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `width: 1px; height: 16px; background-color: var(--sys-color-divider-input);` }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.DataActionList, { widgetId: widgetId, dataSets: actionDataSets, listStyle: jimu_ui__WEBPACK_IMPORTED_MODULE_2__.DataActionListStyle.Dropdown, buttonSize: 'sm', buttonType: 'tertiary', extraActions: extraActions })] }))] }))] }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'query-result-container mt-1', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'query-result-info mb-2 px-4 d-flex align-items-center justify-content-between', role: 'alert', "aria-live": 'polite', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { children: getTipMessage() }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'd-flex align-items-center', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { title: expandAll ? getI18nMessage('collapseAll') : getI18nMessage('expandAll'), placement: 'top', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: 'sm', type: 'tertiary', icon: true, onClick: toggleExpandAll, "aria-label": expandAll ? getI18nMessage('collapseAll') : getI18nMessage('expandAll'), children: expandAll ? (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_directional_collapse_all__WEBPACK_IMPORTED_MODULE_12__.CollapseAllOutlined, {}) : (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_directional_expand_all__WEBPACK_IMPORTED_MODULE_11__.ExpandAllOutlined, {}) }) }) })] }), resultCount > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_simple_list__WEBPACK_IMPORTED_MODULE_7__.SimpleList, { widgetId: widgetId, queryItem: queryItem, outputDS: outputDS, records: filteredRecordsForList, direction: direction, onEscape: handleEscape, onSelectChange: toggleSelection, onRemove: removeRecord, expandByDefault: expandAll, itemExpandStates: itemExpandStates, removedRecordIds: removedRecordIds, onRenderDone: handleRenderDone }, 'simple'))] })] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-context.tsx":
/*!*********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-context.tsx ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTaskContext: () => (/* binding */ QueryTaskContext)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");

const QueryTaskContext = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createContext({
    resetSymbol: null
});


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-form.tsx":
/*!******************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-form.tsx ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTaskForm: () => (/* binding */ QueryTaskForm)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");
/* harmony import */ var jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-ui/basic/sql-expression-runtime */ "jimu-ui/basic/sql-expression-runtime");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _default_query_item__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../default-query-item */ "./your-extensions/widgets/query-simple/src/default-query-item.ts");
/* harmony import */ var _query_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./query-utils */ "./your-extensions/widgets/query-simple/src/runtime/query-utils.ts");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _query_task_spatial_form__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./query-task-spatial-form */ "./your-extensions/widgets/query-simple/src/runtime/query-task-spatial-form.tsx");
/* harmony import */ var _useAutoHeight__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./useAutoHeight */ "./your-extensions/widgets/query-simple/src/runtime/useAutoHeight.tsx");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/* harmony import */ var _query_task_context__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./query-task-context */ "./your-extensions/widgets/query-simple/src/runtime/query-task-context.tsx");
/* harmony import */ var jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! jimu-icons/outlined/suggested/info */ "./jimu-icons/outlined/suggested/info.tsx");
/* harmony import */ var _selection_utils__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");

/** @jsx jsx */











const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_11__.createQuerySimpleDebugLogger)();



/**
 * Event-Driven Hash Parameter Execution Pattern
 *
 * CRITICAL: This is the ONLY execution path for hash-triggered queries.
 *
 * Flow:
 * 1. Hash value set in state as STRING (e.g., "5568900000")
 * 2. DOM manipulation triggers SqlExpressionRuntime to process the value
 * 3. SqlExpressionRuntime converts string  array format [{value: "...", label: "..."}]
 * 4. handleSqlExprObjChange detects conversion  dispatches QUERYSIMPLE_HASH_VALUE_CONVERTED_EVENT
 * 5. Event listener in query-task.tsx executes query (OR handleSqlExprObjChange calls applyQuery directly)
 *
 * WHY THIS PATTERN EXISTS:
 * - SqlExpressionRuntime ONLY fires onChange when value is converted to array format
 * - Queries REQUIRE array format - executing with string format returns unfiltered results (1000 records)
 * - We MUST wait for conversion before executing queries
 *
 * ANTI-PATTERN TO AVOID:
 * - DO NOT add useEffect hooks that execute queries based on string values
 * - DO NOT execute queries before QUERYSIMPLE_HASH_VALUE_CONVERTED_EVENT is dispatched
 * - DO NOT circumvent the event-driven flow with early execution checks
 *
 * If you need to execute a query, wait for the conversion event or call applyQuery()
 * AFTER handleSqlExprObjChange has detected the conversion and dispatched the event.
 */
const QUERYSIMPLE_HASH_VALUE_CONVERTED_EVENT = 'querysimple-hash-value-converted';
const getFormStyle = (isAutoHeight) => {
    return (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
    flex: 1 1 auto;
    display: flex;
    flex-direction: column;
    min-height: 0;
    .form-title {
      color: var(--sys-color-surface-paper-text);
      font-weight: 500;
      font-size: 0.8125rem;
      line-height: 1.5;
      margin-top: 0 !important;
    }
    .query-form__content {
      flex: 1 1 ${isAutoHeight ? 'auto' : 'auto'};
      max-height: ${isAutoHeight ? '61.8vh' : 'none'};
      overflow: auto;
      padding-bottom: 0;
    }
    .query-form__actions {
      flex-shrink: 0;
      margin-top: 0;
      padding-top: 4px;
    }
  `;
};
function QueryTaskForm(props) {
    var _a;
    const { widgetId, configId, outputDS, spatialFilterEnabled, datasourceReady, onFormSubmit, dataActionFilter, initialInputValue, onHashParameterUsed, queryItemShortId, activeTab, onTabChange } = props;
    const preDataActionFilter = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.usePrevious(dataActionFilter);
    const queryItem = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const widgetJson = state.appConfig.widgets[widgetId];
        return widgetJson.config.queryItems.find(item => item.configId === configId);
    });
    const currentItem = Object.assign({}, _default_query_item__WEBPACK_IMPORTED_MODULE_6__.DEFAULT_QUERY_ITEM, queryItem);
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_8__["default"]);
    const [resetSymbol, setResetSymbol] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    // Runtime zoom preference - initialized with config value, can be overridden by user
    const [runtimeZoomToSelected, setRuntimeZoomToSelected] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState((_a = queryItem === null || queryItem === void 0 ? void 0 : queryItem.zoomToSelected) !== null && _a !== void 0 ? _a : true);
    // Sync runtime zoom preference when query item changes (e.g., switching between queries)
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        setRuntimeZoomToSelected((_a = queryItem === null || queryItem === void 0 ? void 0 : queryItem.zoomToSelected) !== null && _a !== void 0 ? _a : true);
    }, [queryItem === null || queryItem === void 0 ? void 0 : queryItem.zoomToSelected, queryItem === null || queryItem === void 0 ? void 0 : queryItem.configId]);
    // const [dataSource, setDataSource] = React.useState<DataSource>(null)
    const { useAttributeFilter, useSpatialFilter, spatialFilterTypes, sqlExprObj, spatialMapWidgetIds, spatialInteractiveCreateToolTypes, spatialRelationUseDataSources, spatialIncludeRuntimeData, spatialRelations, spatialRelationEnableBuffer, spatialRelationBufferDistance, spatialRelationBufferUnit, spatialInteractiveEnableBuffer, spatialInteractiveBufferDistance, spatialInteractiveBufferUnit, attributeFilterLabel = getI18nMessage('attributeFilter'), spatialFilterLabel = getI18nMessage('spatialFilter'), attributeFilterDesc, spatialFilterDesc } = currentItem;
    const [attributeFilterSqlExprObj, setAttributeFilterSqlExprObj] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(sqlExprObj);
    // Ref to track current SQL expression for synchronous access in applyQuery
    // This ensures hash values are immediately available when Apply is clicked
    const attributeFilterSqlExprObjRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(sqlExprObj);
    const spatialFilterObjRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const spatialRelationRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(_config__WEBPACK_IMPORTED_MODULE_5__.SpatialRelation.Intersect);
    const bufferRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const applyButtonRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const formContentRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const isAutoHeight = (0,_useAutoHeight__WEBPACK_IMPORTED_MODULE_10__.useAutoHeight)();
    const showClauseNumber = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef((0,jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__.getShownClauseNumberByExpression)(sqlExprObj));
    const initialValueSetRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null); // Track which configId we've set the value for
    const lastValueSetRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null); // Track the last value that was set
    const hashTriggeredRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(false); // Track if query was triggered via hash parameter
    const previousConfigIdRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null); // Track previous configId to detect query switches
    const [isTypingValid, setIsTypingValid] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(false);
    // Monitor focus and input events within the query form
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        const handleFocus = (e) => {
            const target = e.target;
            if (target.tagName === 'INPUT') {
                const val = target.value;
                setIsTypingValid((0,_query_utils__WEBPACK_IMPORTED_MODULE_7__.isQueryInputValid)(val));
                debugLogger.log('FORM', {
                    event: 'input-focused',
                    configId,
                    tagName: target.tagName,
                    type: target.type,
                    value: val
                });
            }
        };
        const handleInput = (e) => {
            const target = e.target;
            if (target.tagName === 'INPUT') {
                const val = target.value;
                const isValid = (0,_query_utils__WEBPACK_IMPORTED_MODULE_7__.isQueryInputValid)(val);
                setIsTypingValid(isValid);
                debugLogger.log('FORM', {
                    event: 'input-typing',
                    configId,
                    value: val,
                    isTypingValid: isValid
                });
            }
        };
        const handleFocusOut = (e) => {
            // Small delay to allow state to catch up
            setTimeout(() => {
                setIsTypingValid(false);
            }, 50);
        };
        const container = formContentRef.current;
        if (container) {
            container.addEventListener('focusin', handleFocus);
            container.addEventListener('input', handleInput);
            container.addEventListener('focusout', handleFocusOut);
        }
        return () => {
            if (container) {
                container.removeEventListener('focusin', handleFocus);
                container.removeEventListener('input', handleInput);
                container.removeEventListener('focusout', handleFocusOut);
            }
        };
    }, [configId]);
    // Check if any attribute filter input is valid
    const isInputValid = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        // If the user is currently typing something valid, the form is valid
        if (isTypingValid) {
            debugLogger.log('FORM', {
                event: 'validation-check-instant',
                configId,
                isValid: true
            });
            return true;
        }
        if (!(attributeFilterSqlExprObj === null || attributeFilterSqlExprObj === void 0 ? void 0 : attributeFilterSqlExprObj.parts) || attributeFilterSqlExprObj.parts.length === 0) {
            return true; // If no parts, we assume it's valid (e.g. spatial-only query)
        }
        // Check if at least one SINGLE part has a valid value
        const hasValidValue = attributeFilterSqlExprObj.parts.some(part => {
            var _a, _b, _c, _d;
            // Accessing Immutable structures requires care. If dot notation fails, 
            // the framework components might be using .get() or other methods.
            // We'll be inclusive here: if it's not a SINGLE part, we treat it as valid.
            if (part.type === 'SINGLE') {
                const val = (_a = part.valueOptions) === null || _a === void 0 ? void 0 : _a.value;
                const source = (_b = part.valueOptions) === null || _b === void 0 ? void 0 : _b.source;
                // If the source is NOT 'USER_INPUT', it's likely a list/dropdown (UNIQUE_VALUES, FIELD_VALUE)
                // We also check for part.dataSource which is common for list-based selections
                // We treat these as "List" types which are exempted from the empty-string rule.
                const isList = (source && source !== 'USER_INPUT') || ((_c = part.dataSource) === null || _c === void 0 ? void 0 : _c.source);
                const isValid = (0,_query_utils__WEBPACK_IMPORTED_MODULE_7__.isQueryInputValid)(val, !!isList);
                debugLogger.log('FORM', {
                    event: 'validation-check-detail',
                    configId,
                    partType: part.type,
                    source,
                    hasDataSource: !!part.dataSource,
                    dataSourceSource: (_d = part.dataSource) === null || _d === void 0 ? void 0 : _d.source,
                    isList: !!isList,
                    value: val,
                    isValid
                });
                debugLogger.log('FORM', {
                    event: 'validation-check',
                    configId,
                    partType: part.type,
                    source,
                    isList,
                    value: val,
                    valueType: typeof val,
                    isValid
                });
                return isValid;
            }
            return true;
        });
        return hasValidValue;
    }, [attributeFilterSqlExprObj, configId, isTypingValid]);
    const originDS = outputDS === null || outputDS === void 0 ? void 0 : outputDS.getOriginDataSources()[0];
    // Track configId changes (query switches)
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        debugLogger.log('FORM', {
            event: 'configId-changed',
            configId,
            previousConfigId: initialValueSetRef.current,
            initialInputValue,
            timestamp: Date.now()
        });
    }, [configId, initialInputValue, datasourceReady, outputDS, widgetId, hashTriggeredRef]);
    /**
     * Sets the input value from URL hash parameters when:
     * 1. Datasource is ready
     * 2. We have an initialInputValue from URL hash
     * 3. We haven't already set it for this configId, OR the value has changed
     *
     * Uses both React state updates and DOM manipulation to ensure the value
     * is properly set in SqlExpressionRuntime's internal state.
     */
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v;
        debugLogger.log('FORM', {
            event: 'initialInputValue-prop-received',
            configId,
            initialInputValue,
            datasourceReady,
            hasSqlExprObj: !!sqlExprObj,
            sqlExprObjPartsLength: (_a = sqlExprObj === null || sqlExprObj === void 0 ? void 0 : sqlExprObj.parts) === null || _a === void 0 ? void 0 : _a.length,
            initialValueSetRef: initialValueSetRef.current,
            willProcess: datasourceReady && initialInputValue && ((_b = sqlExprObj === null || sqlExprObj === void 0 ? void 0 : sqlExprObj.parts) === null || _b === void 0 ? void 0 : _b.length) > 0,
            timestamp: Date.now()
        });
        // Reset flag if configId changed (switched to different query)
        if (initialValueSetRef.current !== null && initialValueSetRef.current !== configId) {
            initialValueSetRef.current = null;
            lastValueSetRef.current = null;
            hashTriggeredRef.current = false; // Reset hash trigger flag when switching queries
            debugLogger.log('FORM', {
                event: 'hashTriggeredRef-reset',
                configId,
                reason: 'switching-queries',
                timestamp: Date.now()
            });
            setIsTypingValid(false); // Reset typing validation
        }
        // Check if value has changed for the same configId
        const valueChanged = lastValueSetRef.current !== null &&
            lastValueSetRef.current !== initialInputValue &&
            initialValueSetRef.current === configId;
        // Set the value if:
        // - We haven't set it for this configId yet, OR
        // - The value has changed for the same configId (hash parameter updated)
        const shouldSetValue = datasourceReady &&
            initialInputValue &&
            ((_c = sqlExprObj === null || sqlExprObj === void 0 ? void 0 : sqlExprObj.parts) === null || _c === void 0 ? void 0 : _c.length) > 0 &&
            (initialValueSetRef.current !== configId || valueChanged);
        if (shouldSetValue) {
            // Ensure Query tab is active before setting hash value
            // This ensures SqlExpressionRuntime is visible and can process the value
            if (activeTab !== 'query' && onTabChange) {
                debugLogger.log('FORM', {
                    event: 'hash-value-setting-switching-to-query-tab',
                    configId,
                    initialInputValue,
                    currentTab: activeTab,
                    note: 'Switching to Query tab before setting hash value to ensure SqlExpressionRuntime can process it'
                });
                onTabChange('query');
                // Return early - useEffect will run again when activeTab becomes 'query'
                return;
            }
            debugLogger.log('FORM', {
                event: 'hash-value-setting-start',
                configId,
                initialInputValue,
                initialValueSetRef: initialValueSetRef.current,
                valueChanged,
                hashTriggeredRefBefore: hashTriggeredRef.current,
                sqlExprObjPartsLength: (_d = sqlExprObj === null || sqlExprObj === void 0 ? void 0 : sqlExprObj.parts) === null || _d === void 0 ? void 0 : _d.length,
                activeTab,
                timestamp: Date.now()
            });
            // Set hashTriggeredRef IMMEDIATELY when setting hash value
            // This ensures handleSqlExprObjChange can detect hash-triggered conversions
            hashTriggeredRef.current = true;
            debugLogger.log('FORM', {
                event: 'hashTriggeredRef-set-true',
                configId,
                initialInputValue,
                timestamp: Date.now()
            });
            const firstPart = sqlExprObj.parts[0];
            // Check if the first part is a SINGLE clause (not a SqlClauseSet)
            if (firstPart && 'type' in firstPart && firstPart.type === 'SINGLE' && 'valueOptions' in firstPart) {
                // Update the expression object with the initial value
                const updated = sqlExprObj.setIn(['parts', '0', 'valueOptions', 'value'], initialInputValue);
                debugLogger.log('FORM', {
                    event: 'hash-value-setting-react-state',
                    configId,
                    initialInputValue,
                    previousStateValue: (_g = (_f = (_e = attributeFilterSqlExprObj === null || attributeFilterSqlExprObj === void 0 ? void 0 : attributeFilterSqlExprObj.parts) === null || _e === void 0 ? void 0 : _e[0]) === null || _f === void 0 ? void 0 : _f.valueOptions) === null || _g === void 0 ? void 0 : _g.value,
                    newStateValue: (_k = (_j = (_h = updated === null || updated === void 0 ? void 0 : updated.parts) === null || _h === void 0 ? void 0 : _h[0]) === null || _j === void 0 ? void 0 : _j.valueOptions) === null || _k === void 0 ? void 0 : _k.value,
                    willCallSetState: true,
                    note: 'Setting value in React state - SqlExpressionRuntime should receive via expression prop'
                });
                setAttributeFilterSqlExprObj(updated);
                // Update ref immediately for synchronous access in applyQuery
                attributeFilterSqlExprObjRef.current = updated;
                debugLogger.log('FORM', {
                    event: 'hash-value-ref-updated',
                    configId,
                    initialInputValue,
                    refValueAfterUpdate: (_p = (_o = (_m = (_l = attributeFilterSqlExprObjRef.current) === null || _l === void 0 ? void 0 : _l.parts) === null || _m === void 0 ? void 0 : _m[0]) === null || _o === void 0 ? void 0 : _o.valueOptions) === null || _p === void 0 ? void 0 : _p.value,
                    timestamp: Date.now()
                });
                // Update clause number for the updated expression
                showClauseNumber.current = (0,jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__.getShownClauseNumberByExpression)(updated);
                initialValueSetRef.current = configId;
                lastValueSetRef.current = initialInputValue;
                // Also set the value directly on the input element after a delay to ensure component is rendered
                // This is necessary because SqlExpressionRuntime may not sync from the expression prop alone
                const timeoutId = setTimeout(() => {
                    var _a;
                    // Find the input element within SqlExpressionRuntime
                    // Use data-widgetid (standard ExB attribute) to isolate the correct widget instance
                    const formElement = ((_a = document.querySelector(`[data-widgetid="${widgetId}"]`)) === null || _a === void 0 ? void 0 : _a.querySelector('.query-form')) ||
                        document.querySelector(`.widget-runtime[data-widgetid="${widgetId}"]`) ||
                        document.querySelector('.query-form');
                    debugLogger.log('FORM', {
                        event: 'hash-value-dom-manipulation-start',
                        configId,
                        initialInputValue,
                        formElementFound: !!formElement,
                        widgetId,
                        selector1: `[data-widgetid="${widgetId}"] .query-form`,
                        selector2: `.widget-runtime[data-widgetid="${widgetId}"]`,
                        selector3: '.query-form',
                        timestamp: Date.now()
                    });
                    if (formElement) {
                        // Look for text input elements
                        const textInputs = formElement.querySelectorAll('input[type="text"]');
                        debugLogger.log('FORM', {
                            event: 'hash-value-dom-manipulation-inputs-found',
                            configId,
                            initialInputValue,
                            inputsFound: textInputs.length,
                            formElementTag: formElement.tagName,
                            formElementClass: formElement.className,
                            timestamp: Date.now()
                        });
                        let inputsUpdated = 0;
                        textInputs.forEach((input, index) => {
                            var _a, _b;
                            // Update the value if input is empty OR if the value has changed (hash parameter updated)
                            const shouldUpdate = !input.value ||
                                input.value.trim() === '' ||
                                input.value !== initialInputValue;
                            debugLogger.log('FORM', {
                                event: 'hash-value-dom-manipulation-input-check',
                                configId,
                                initialInputValue,
                                inputIndex: index,
                                currentInputValue: input.value,
                                inputId: input.id,
                                inputName: input.name,
                                inputParentTag: (_a = input.parentElement) === null || _a === void 0 ? void 0 : _a.tagName,
                                shouldUpdate,
                                timestamp: Date.now()
                            });
                            if (shouldUpdate) {
                                // Focus the input first
                                input.focus();
                                // Set the value
                                input.value = initialInputValue;
                                debugLogger.log('FORM', {
                                    event: 'hash-value-dom-manipulation-input-value-set',
                                    configId,
                                    initialInputValue,
                                    inputIndex: index,
                                    valueAfterSet: input.value,
                                    isFocused: document.activeElement === input,
                                    timestamp: Date.now()
                                });
                                // Create and dispatch input event with proper properties
                                const inputEvent = new Event('input', { bubbles: true, cancelable: true });
                                Object.defineProperty(inputEvent, 'target', { value: input, enumerable: true });
                                input.dispatchEvent(inputEvent);
                                // Create and dispatch change event
                                const changeEvent = new Event('change', { bubbles: true, cancelable: true });
                                Object.defineProperty(changeEvent, 'target', { value: input, enumerable: true });
                                input.dispatchEvent(changeEvent);
                                // Also try React's synthetic event approach using native value setter
                                const nativeInputValueSetter = (_b = Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype, 'value')) === null || _b === void 0 ? void 0 : _b.set;
                                if (nativeInputValueSetter) {
                                    nativeInputValueSetter.call(input, initialInputValue);
                                    const reactEvent = new Event('input', { bubbles: true });
                                    input.dispatchEvent(reactEvent);
                                }
                                debugLogger.log('FORM', {
                                    event: 'hash-value-dom-manipulation-events-dispatched',
                                    configId,
                                    initialInputValue,
                                    inputIndex: index,
                                    inputEventDispatched: true,
                                    changeEventDispatched: true,
                                    reactEventDispatched: !!nativeInputValueSetter,
                                    timestamp: Date.now()
                                });
                                // Blur to trigger any validation or state updates
                                input.blur();
                                inputsUpdated++;
                            }
                        });
                        // Hash-triggered queries: DOM manipulation triggers SqlExpressionRuntime onChange
                        // handleSqlExprObjChange detects conversion and fires QUERYSIMPLE_HASH_VALUE_CONVERTED_EVENT
                        // Event listener in query-task.tsx executes query directly - no Apply button click needed
                        debugLogger.log('FORM', {
                            event: 'hash-value-dom-manipulation-complete',
                            configId,
                            initialInputValue,
                            inputsFound: textInputs.length,
                            inputsUpdated,
                            note: 'DOM manipulation complete - SqlExpressionRuntime onChange should fire',
                            timestamp: Date.now()
                        });
                    }
                    else {
                        debugLogger.log('FORM', {
                            event: 'hash-value-dom-manipulation-failed',
                            configId,
                            initialInputValue,
                            reason: 'formElement-not-found',
                            widgetId,
                            timestamp: Date.now()
                        });
                    }
                }, 500); // Longer delay to ensure component is fully rendered
                return () => clearTimeout(timeoutId);
            }
        }
        // The sqlExprObj.parts may change but the displaySQL is the same
        if (!sqlExprObj) {
            showClauseNumber.current = 0;
            setAttributeFilterSqlExprObj(null);
            attributeFilterSqlExprObjRef.current = null;
            debugLogger.log('FORM', {
                event: 'sqlExprObj-cleared',
                configId,
                timestamp: Date.now()
            });
        }
        else {
            showClauseNumber.current = (0,jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__.getShownClauseNumberByExpression)(sqlExprObj);
            // Check if we already have a value set (from user input or hash)
            const currentValue = (_s = (_r = (_q = attributeFilterSqlExprObj === null || attributeFilterSqlExprObj === void 0 ? void 0 : attributeFilterSqlExprObj.parts) === null || _q === void 0 ? void 0 : _q[0]) === null || _r === void 0 ? void 0 : _r.valueOptions) === null || _s === void 0 ? void 0 : _s.value;
            const baseValue = (_v = (_u = (_t = sqlExprObj === null || sqlExprObj === void 0 ? void 0 : sqlExprObj.parts) === null || _t === void 0 ? void 0 : _t[0]) === null || _u === void 0 ? void 0 : _u.valueOptions) === null || _v === void 0 ? void 0 : _v.value;
            const hasValueSet = currentValue !== undefined && currentValue !== null && currentValue !== '';
            const configIdChanged = previousConfigIdRef.current !== null && previousConfigIdRef.current !== configId;
            // Only update if:
            // 1. We haven't set a value yet (no value in current state), OR
            // 2. configId changed (switching queries - reset to base sqlExprObj)
            // Otherwise, preserve the existing value as a visual record
            if (!hasValueSet || configIdChanged) {
                setAttributeFilterSqlExprObj(sqlExprObj);
                attributeFilterSqlExprObjRef.current = sqlExprObj;
                debugLogger.log('FORM', {
                    event: 'sqlExprObj-updated-ref',
                    configId,
                    previousConfigId: previousConfigIdRef.current,
                    initialInputValue,
                    initialValueSetRef: initialValueSetRef.current,
                    hasValueSet,
                    configIdChanged,
                    previousValue: currentValue,
                    newValue: baseValue,
                    reason: configIdChanged ? 'configId-changed-resetting' : 'no-value-set-initializing',
                    timestamp: Date.now()
                });
            }
            else {
                debugLogger.log('FORM', {
                    event: 'sqlExprObj-skipped-ref-update',
                    configId,
                    previousConfigId: previousConfigIdRef.current,
                    initialInputValue,
                    initialValueSetRef: initialValueSetRef.current,
                    currentValue,
                    baseValue,
                    reason: 'value-already-set-preserving-as-visual-record',
                    note: 'Skipping update to preserve user-entered or hash-set value as visual record',
                    timestamp: Date.now()
                });
            }
            // Update previousConfigIdRef for next comparison
            previousConfigIdRef.current = configId;
        }
    }, [sqlExprObj, initialInputValue, datasourceReady, configId, widgetId, onHashParameterUsed, queryItemShortId, activeTab, onTabChange]);
    // Keep ref in sync with state changes (for SqlExpressionRuntime updates)
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a, _b, _c, _d, _e, _f, _g, _h, _j;
        attributeFilterSqlExprObjRef.current = attributeFilterSqlExprObj;
        // Log when state changes - this is what SqlExpressionRuntime receives via expression prop
        debugLogger.log('FORM', {
            event: 'attributeFilterSqlExprObj-state-changed',
            configId,
            stateValue: (_c = (_b = (_a = attributeFilterSqlExprObj === null || attributeFilterSqlExprObj === void 0 ? void 0 : attributeFilterSqlExprObj.parts) === null || _a === void 0 ? void 0 : _a[0]) === null || _b === void 0 ? void 0 : _b.valueOptions) === null || _c === void 0 ? void 0 : _c.value,
            stateValueType: typeof ((_f = (_e = (_d = attributeFilterSqlExprObj === null || attributeFilterSqlExprObj === void 0 ? void 0 : attributeFilterSqlExprObj.parts) === null || _d === void 0 ? void 0 : _d[0]) === null || _e === void 0 ? void 0 : _e.valueOptions) === null || _f === void 0 ? void 0 : _f.value),
            isArray: Array.isArray((_j = (_h = (_g = attributeFilterSqlExprObj === null || attributeFilterSqlExprObj === void 0 ? void 0 : attributeFilterSqlExprObj.parts) === null || _g === void 0 ? void 0 : _g[0]) === null || _h === void 0 ? void 0 : _h.valueOptions) === null || _j === void 0 ? void 0 : _j.value),
            hashTriggeredRef: hashTriggeredRef.current,
            initialInputValue,
            note: 'React state changed - SqlExpressionRuntime should receive this via expression prop'
        });
    }, [attributeFilterSqlExprObj, configId, initialInputValue]);
    const applyQuery = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        var _a, _b, _c, _d, _e, _f, _g, _h;
        // When the 'apply' button is clicked, it should clear the selection from the previous result list
        (0,_selection_utils__WEBPACK_IMPORTED_MODULE_14__.clearSelectionInDataSources)(outputDS);
        if (outputDS) {
            const originDs = outputDS.getOriginDataSources()[0];
            if (originDs) {
                const dataViewConfig = originDs.getDataViewConfig();
                const maximum = dataViewConfig === null || dataViewConfig === void 0 ? void 0 : dataViewConfig.maximum;
                if (maximum != null && maximum > 0) {
                    jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().updateDataSourceByDataSourceJson(outputDS, outputDS.getDataSourceJson().setIn(['query', 'maximum'], maximum));
                }
            }
        }
        // Force zoom for hash-triggered queries, otherwise use runtime preference
        const zoomToUse = hashTriggeredRef.current ? true : runtimeZoomToSelected;
        // Sanitize user input before submission
        // Read from ref to get the latest value synchronously (including hash values)
        const currentSqlExprObj = attributeFilterSqlExprObjRef.current;
        const currentRefValue = (_c = (_b = (_a = currentSqlExprObj === null || currentSqlExprObj === void 0 ? void 0 : currentSqlExprObj.parts) === null || _a === void 0 ? void 0 : _a[0]) === null || _b === void 0 ? void 0 : _b.valueOptions) === null || _c === void 0 ? void 0 : _c.value;
        debugLogger.log('FORM', {
            event: 'applyQuery-executing',
            configId,
            initialInputValue,
            currentRefValue,
            refHasValue: !!currentRefValue,
            hashTriggered: hashTriggeredRef.current,
            timestamp: Date.now()
        });
        const sanitizedSqlExprObj = (0,_query_utils__WEBPACK_IMPORTED_MODULE_7__.sanitizeSqlExpression)(currentSqlExprObj);
        // Log the sanitized expression to see if value was preserved
        const sanitizedValue = (_f = (_e = (_d = sanitizedSqlExprObj === null || sanitizedSqlExprObj === void 0 ? void 0 : sanitizedSqlExprObj.parts) === null || _d === void 0 ? void 0 : _d[0]) === null || _e === void 0 ? void 0 : _e.valueOptions) === null || _f === void 0 ? void 0 : _f.value;
        debugLogger.log('FORM', {
            event: 'applyQuery-after-sanitize',
            configId,
            currentRefValue,
            sanitizedValue,
            valuesMatch: currentRefValue === sanitizedValue,
            sanitizedValueType: typeof sanitizedValue,
            currentRefValueType: typeof currentRefValue,
            isArrayCurrent: Array.isArray(currentRefValue),
            isArraySanitized: Array.isArray(sanitizedValue),
            timestamp: Date.now()
        });
        let rel = spatialRelationRef.current;
        if (((_g = spatialFilterObjRef.current) === null || _g === void 0 ? void 0 : _g.geometry) && rel == null) {
            rel = _config__WEBPACK_IMPORTED_MODULE_5__.SpatialRelation.Intersect;
        }
        if (Array.isArray((_h = spatialFilterObjRef.current) === null || _h === void 0 ? void 0 : _h.geometry)) {
            if (spatialFilterObjRef.current.geometry.length === 1) {
                onFormSubmit(sanitizedSqlExprObj, Object.assign(Object.assign({}, spatialFilterObjRef.current), { geometry: spatialFilterObjRef.current.geometry[0], relation: rel, buffer: bufferRef.current }), zoomToUse);
            }
            else {
                (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_3__.loadArcGISJSAPIModules)([
                    'esri/geometry/operators/unionOperator'
                ]).then(modules => {
                    const operator = modules[0];
                    const geometry = operator.executeMany(spatialFilterObjRef.current.geometry);
                    onFormSubmit(sanitizedSqlExprObj, Object.assign(Object.assign({}, spatialFilterObjRef.current), { geometry, relation: rel, buffer: bufferRef.current }), zoomToUse);
                });
            }
        }
        else {
            onFormSubmit(sanitizedSqlExprObj, Object.assign(Object.assign({}, spatialFilterObjRef.current), { relation: rel, buffer: bufferRef.current }), zoomToUse);
        }
        // Reset hashTriggeredRef after use
        hashTriggeredRef.current = false;
        debugLogger.log('FORM', {
            event: 'hashTriggeredRef-reset-after-apply',
            configId,
            timestamp: Date.now()
        });
    }, [onFormSubmit, outputDS, runtimeZoomToSelected]);
    const handleKeyDown = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((event) => {
        if (event.key === 'Enter' && datasourceReady && isInputValid) {
            event.preventDefault();
            // Find the active input field
            const activeElement = document.activeElement;
            if (activeElement && activeElement.tagName === 'INPUT' && activeElement.type === 'text') {
                // Force blur to trigger SqlExpressionRuntime's input processing
                activeElement.blur();
                // Wait for blur processing, then click the Apply button
                // This uses the exact same code path as clicking the button manually
                setTimeout(() => {
                    if (applyButtonRef.current && !applyButtonRef.current.disabled) {
                        applyButtonRef.current.click();
                    }
                    else {
                        applyQuery();
                    }
                }, 200);
            }
            else {
                // Not in an input field, safe to apply immediately
                if (applyButtonRef.current && !applyButtonRef.current.disabled) {
                    applyButtonRef.current.click();
                }
                else {
                    applyQuery();
                }
            }
        }
    }, [datasourceReady, applyQuery, isInputValid]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a, _b, _c, _d;
        if (!dataActionFilter)
            return;
        if (dataActionFilter.where !== (preDataActionFilter === null || preDataActionFilter === void 0 ? void 0 : preDataActionFilter.where)) {
            // Log state when dataActionFilter changes (query switch)
            const currentRefValue = (_d = (_c = (_b = (_a = attributeFilterSqlExprObjRef.current) === null || _a === void 0 ? void 0 : _a.parts) === null || _b === void 0 ? void 0 : _b[0]) === null || _c === void 0 ? void 0 : _c.valueOptions) === null || _d === void 0 ? void 0 : _d.value;
            const hasPendingHashValue = initialInputValue &&
                (initialValueSetRef.current !== configId ||
                    currentRefValue !== initialInputValue);
            debugLogger.log('FORM', {
                event: 'dataActionFilter-changed-auto-trigger',
                configId,
                previousWhere: preDataActionFilter === null || preDataActionFilter === void 0 ? void 0 : preDataActionFilter.where,
                newWhere: dataActionFilter.where,
                initialInputValue,
                initialValueSetRef: initialValueSetRef.current,
                currentRefValue,
                hasPendingHashValue,
                willCallApplyQuery: !hasPendingHashValue,
                timestamp: Date.now()
            });
            applyQuery();
        }
    }, [dataActionFilter, preDataActionFilter === null || preDataActionFilter === void 0 ? void 0 : preDataActionFilter.where, applyQuery, initialInputValue, configId]);
    const resetQuery = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        // 1. reset attribute filter
        showClauseNumber.current = (0,jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__.getShownClauseNumberByExpression)(sqlExprObj);
        setAttributeFilterSqlExprObj(sqlExprObj);
        // 2. reset spatial filter
        setResetSymbol(Symbol());
    }, [sqlExprObj]);
    const handleSqlExprObjChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((sqlObj) => {
        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s;
        // LOG AT THE VERY START
        const sqlObjValue = (_c = (_b = (_a = sqlObj === null || sqlObj === void 0 ? void 0 : sqlObj.parts) === null || _a === void 0 ? void 0 : _a[0]) === null || _b === void 0 ? void 0 : _b.valueOptions) === null || _c === void 0 ? void 0 : _c.value;
        const previousRefValue = (_g = (_f = (_e = (_d = attributeFilterSqlExprObjRef.current) === null || _d === void 0 ? void 0 : _d.parts) === null || _e === void 0 ? void 0 : _e[0]) === null || _f === void 0 ? void 0 : _f.valueOptions) === null || _g === void 0 ? void 0 : _g.value;
        const previousStateValue = (_k = (_j = (_h = attributeFilterSqlExprObj === null || attributeFilterSqlExprObj === void 0 ? void 0 : attributeFilterSqlExprObj.parts) === null || _h === void 0 ? void 0 : _h[0]) === null || _j === void 0 ? void 0 : _j.valueOptions) === null || _k === void 0 ? void 0 : _k.value;
        // Check if this is from user typing or prop change
        const isFromUserTyping = typeof previousRefValue === 'string' &&
            typeof sqlObjValue === 'object' &&
            Array.isArray(sqlObjValue) &&
            ((_l = sqlObjValue[0]) === null || _l === void 0 ? void 0 : _l.value) === previousRefValue;
        const isFromPropChange = JSON.stringify(previousStateValue) === JSON.stringify(sqlObjValue);
        debugLogger.log('FORM', {
            event: 'handleSqlExprObjChange-called',
            configId,
            sqlObjExists: !!sqlObj,
            initialInputValue,
            hashTriggeredRef: hashTriggeredRef.current,
            sqlObjValue,
            sqlObjValueType: typeof sqlObjValue,
            sqlObjIsArray: Array.isArray(sqlObjValue),
            previousRefValue,
            previousStateValue,
            isFromUserTyping,
            isFromPropChange,
            triggerSource: isFromUserTyping ? 'user-typing' : (isFromPropChange ? 'prop-change' : 'unknown'),
            timestamp: Date.now()
        });
        const firstPart = (_m = sqlObj === null || sqlObj === void 0 ? void 0 : sqlObj.parts) === null || _m === void 0 ? void 0 : _m[0];
        const value = (firstPart === null || firstPart === void 0 ? void 0 : firstPart.type) === 'SINGLE' ? (_o = firstPart.valueOptions) === null || _o === void 0 ? void 0 : _o.value : 'not-single';
        debugLogger.log('FORM', {
            event: 'sql-expression-changed',
            configId,
            partsCount: ((_p = sqlObj === null || sqlObj === void 0 ? void 0 : sqlObj.parts) === null || _p === void 0 ? void 0 : _p.length) || 0,
            firstPartValue: value,
            hashTriggeredRefValue: hashTriggeredRef.current,
            initialInputValue: initialInputValue,
            isArrayFormat: Array.isArray(value),
            timestamp: Date.now()
        });
        showClauseNumber.current = (0,jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__.getShownClauseNumberByExpression)(sqlObj);
        setAttributeFilterSqlExprObj(sqlObj);
        // Check if this is a hash-triggered conversion (string -> array)
        // When hash value changes for same configId, SqlExpressionRuntime converts string to array format
        if ((firstPart === null || firstPart === void 0 ? void 0 : firstPart.type) === 'SINGLE' && ((_q = firstPart === null || firstPart === void 0 ? void 0 : firstPart.valueOptions) === null || _q === void 0 ? void 0 : _q.value)) {
            const value = firstPart.valueOptions.value;
            const isArrayFormat = Array.isArray(value);
            const hasInitialValue = initialInputValue && hashTriggeredRef.current;
            debugLogger.log('FORM', {
                event: 'sql-expression-changed-conversion-check',
                configId,
                isArrayFormat,
                hasInitialValue,
                hashTriggeredRefValue: hashTriggeredRef.current,
                initialInputValue,
                valueType: typeof value,
                value: Array.isArray(value) ? value : value,
                timestamp: Date.now()
            });
            // If value converted to array format AND this was hash-triggered, fire event
            if (isArrayFormat && hasInitialValue && initialInputValue) {
                const matchesHashValue = value.length > 0 && ((_r = value[0]) === null || _r === void 0 ? void 0 : _r.value) === initialInputValue;
                debugLogger.log('FORM', {
                    event: 'sql-expression-changed-matches-check',
                    configId,
                    matchesHashValue,
                    initialInputValue,
                    convertedValueFirstItem: (_s = value[0]) === null || _s === void 0 ? void 0 : _s.value,
                    timestamp: Date.now()
                });
                if (matchesHashValue) {
                    debugLogger.log('FORM', {
                        event: 'hash-value-converted-to-array',
                        configId,
                        initialInputValue,
                        convertedValue: value,
                        timestamp: Date.now()
                    });
                    // Fire custom event for query execution to wait on
                    const event = new CustomEvent(QUERYSIMPLE_HASH_VALUE_CONVERTED_EVENT, {
                        detail: {
                            configId,
                            widgetId,
                            initialInputValue,
                            convertedValue: value
                        },
                        bubbles: true
                    });
                    document.dispatchEvent(event);
                    debugLogger.log('FORM', {
                        event: 'hash-value-converted-event-dispatched',
                        configId,
                        widgetId,
                        timestamp: Date.now()
                    });
                    // EXECUTION POINT: Query execution happens HERE after conversion is confirmed
                    // This is the ONLY place where hash-triggered queries should execute
                    // The event QUERYSIMPLE_HASH_VALUE_CONVERTED_EVENT has been dispatched above
                    // This direct call handles the case where conversion happens synchronously
                    // The event listener in query-task.tsx handles the async case
                    if (hashTriggeredRef.current && datasourceReady && outputDS) {
                        debugLogger.log('FORM', {
                            event: 'hash-value-converted-executing-query-directly',
                            configId,
                            initialInputValue,
                            note: 'Conversion complete - executing query directly via applyQuery (event-driven pattern)',
                            timestamp: Date.now()
                        });
                        // Use setTimeout to ensure this happens after the current event loop
                        setTimeout(() => {
                            applyQuery();
                        }, 0);
                    }
                }
            }
        }
    }, [configId, initialInputValue, widgetId, datasourceReady, outputDS, applyQuery]);
    const handleSpatialFilterChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((filter) => {
        spatialFilterObjRef.current = filter;
    }, []);
    const handleRelationChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((rel) => {
        spatialRelationRef.current = rel;
    }, []);
    const handleBufferChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((distance, unit) => {
        bufferRef.current = { distance, unit };
    }, []);
    const showAttributeFilter = useAttributeFilter && sqlExprObj != null;
    const showSpatialFilter = spatialFilterEnabled && useSpatialFilter && (spatialFilterTypes.length > 0 || spatialIncludeRuntimeData || (spatialRelationUseDataSources === null || spatialRelationUseDataSources === void 0 ? void 0 : spatialRelationUseDataSources.length) > 0);
    // Debug logging for form rendering
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        debugLogger.log('FORM', {
            event: 'form-render-check',
            configId,
            datasourceReady,
            useAttributeFilter,
            sqlExprObj: sqlExprObj ? 'exists' : 'null',
            sqlExprObjParts: ((_a = sqlExprObj === null || sqlExprObj === void 0 ? void 0 : sqlExprObj.parts) === null || _a === void 0 ? void 0 : _a.length) || 0,
            showAttributeFilter,
            originDS: originDS ? 'exists' : 'null',
            originDSId: (originDS === null || originDS === void 0 ? void 0 : originDS.id) || 'none',
            showSpatialFilter,
            isAutoHeight,
            outputDS: outputDS ? 'exists' : 'null'
        });
    }, [configId, datasourceReady, useAttributeFilter, sqlExprObj, showAttributeFilter, originDS, showSpatialFilter, isAutoHeight, outputDS]);
    // Log when form content should render
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        if (showAttributeFilter && originDS) {
            debugLogger.log('FORM', {
                event: 'attribute-filter-ready',
                configId,
                originDSId: originDS.id,
                sqlExprObjParts: ((_a = sqlExprObj === null || sqlExprObj === void 0 ? void 0 : sqlExprObj.parts) === null || _a === void 0 ? void 0 : _a.length) || 0,
                attributeFilterLabel,
                note: 'Input field should be visible'
            });
        }
        else {
            debugLogger.log('FORM', {
                event: 'attribute-filter-not-ready',
                configId,
                showAttributeFilter,
                originDS: originDS ? 'exists' : 'null',
                useAttributeFilter,
                sqlExprObj: sqlExprObj ? 'exists' : 'null',
                reason: !showAttributeFilter ? 'showAttributeFilter is false' : 'originDS is null'
            });
        }
    }, [showAttributeFilter, originDS, configId, sqlExprObj, useAttributeFilter, attributeFilterLabel]);
    // Check DOM visibility after render
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        if (formContentRef.current) {
            const computedStyle = window.getComputedStyle(formContentRef.current);
            const rect = formContentRef.current.getBoundingClientRect();
            debugLogger.log('FORM', {
                event: 'form-content-dom-check',
                configId,
                exists: !!formContentRef.current,
                display: computedStyle.display,
                visibility: computedStyle.visibility,
                opacity: computedStyle.opacity,
                height: computedStyle.height,
                maxHeight: computedStyle.maxHeight,
                flex: computedStyle.flex,
                flexBasis: computedStyle.flexBasis,
                rectHeight: rect.height,
                rectWidth: rect.width,
                isVisible: rect.height > 0 && rect.width > 0,
                parentHeight: ((_a = formContentRef.current.parentElement) === null || _a === void 0 ? void 0 : _a.clientHeight) || 0
            });
        }
    }, [configId, showAttributeFilter, originDS]);
    // Log when SqlExpressionRuntime key changes (component remounts) OR expression prop changes
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a, _b, _c;
        const sqlExprRuntimeKey = `${configId}-${initialInputValue || 'none'}`;
        const expressionValue = (_c = (_b = (_a = attributeFilterSqlExprObj === null || attributeFilterSqlExprObj === void 0 ? void 0 : attributeFilterSqlExprObj.parts) === null || _a === void 0 ? void 0 : _a[0]) === null || _b === void 0 ? void 0 : _b.valueOptions) === null || _c === void 0 ? void 0 : _c.value;
        debugLogger.log('FORM', {
            event: 'SqlExpressionRuntime-props-changed',
            configId,
            initialInputValue,
            sqlExprRuntimeKey,
            expressionValue,
            expressionValueType: typeof expressionValue,
            isArray: Array.isArray(expressionValue),
            hashTriggeredRef: hashTriggeredRef.current,
            originDSExists: !!originDS,
            note: 'SqlExpressionRuntime receiving new expression prop - will it fire onChange?',
            timestamp: Date.now()
        });
    }, [configId, initialInputValue, attributeFilterSqlExprObj, originDS]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_context__WEBPACK_IMPORTED_MODULE_12__.QueryTaskContext.Provider, { value: { resetSymbol }, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'query-form', css: getFormStyle(isAutoHeight), children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { ref: formContentRef, className: 'query-form__content', onKeyDown: handleKeyDown, children: [showAttributeFilter && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { role: 'group', className: 'px-4', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `padding-top: 2px;`, "aria-label": attributeFilterLabel, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('form-title d-flex align-items-center', { 'd-none': !attributeFilterLabel && !attributeFilterDesc }), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                margin-top: 0;
                margin-bottom: 4px;
              `, children: [attributeFilterLabel && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'mr-2 title2', children: attributeFilterLabel }), attributeFilterDesc && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { placement: 'bottom', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `white-space: pre-line;`, title: attributeFilterDesc, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: 'sm', icon: true, type: 'tertiary', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_13__.InfoOutlined, { color: 'var(--sys-color-primary-main)', size: 's' }) }) }))] }), originDS && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `margin: -10px 0px;`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__.SqlExpressionRuntime, { widgetId: widgetId, dataSource: originDS, expression: attributeFilterSqlExprObj, onChange: handleSqlExprObjChange }, `${configId}-${initialInputValue || 'none'}`) }))] })), showAttributeFilter && showSpatialFilter && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("hr", { className: 'm-4', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `border: none; height: 1px; background-color: var(--sys-color-divider-secondary);` })), showSpatialFilter && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_spatial_form__WEBPACK_IMPORTED_MODULE_9__.QueryTaskSpatialForm, { widgetId: widgetId, label: spatialFilterLabel, desc: spatialFilterDesc, filterTypes: spatialFilterTypes, mapWidgetIds: spatialMapWidgetIds, createToolTypes: spatialInteractiveCreateToolTypes, onFilterChange: handleSpatialFilterChange, onRelationChange: handleRelationChange, onBufferChange: handleBufferChange, spatialRelations: spatialRelations, dsEnableBuffer: spatialRelationEnableBuffer, dsBufferDistance: spatialRelationBufferDistance, dsBufferUnit: spatialRelationBufferUnit, drawEnableBuffer: spatialInteractiveEnableBuffer, drawBufferDistance: spatialInteractiveBufferDistance, drawBufferUnit: spatialInteractiveBufferUnit, useDataSources: spatialRelationUseDataSources, useRuntimeData: spatialIncludeRuntimeData }))] }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'query-form__actions px-4 d-flex align-items-center', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Checkbox, { checked: runtimeZoomToSelected, onChange: (_, checked) => setRuntimeZoomToSelected(checked), className: 'mr-2' }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { className: 'mr-auto', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `font-size: 0.875rem; color: var(--sys-color-text-primary);`, children: getI18nMessage('zoomToSelected') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { ref: applyButtonRef, color: 'primary', className: 'ml-auto', disabled: !datasourceReady || !isInputValid, onClick: applyQuery, children: getI18nMessage('apply') }), (showClauseNumber.current > 0 || showSpatialFilter) && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { className: 'ml-2', onClick: resetQuery, children: getI18nMessage('reset') }))] })] }) }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-label.tsx":
/*!*******************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-label.tsx ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTaskLabel: () => (/* binding */ QueryTaskLabel)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");

/** @jsx jsx */


const textStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
  font-weight: 500;
  font-size: 0.875rem;
`;
function QueryTaskLabel(props) {
    const { icon, name } = props;
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'd-flex align-items-center text-truncate', css: textStyle, children: [icon && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Icon, { className: 'query-task-icon mr-2', icon: icon.svg }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'text-truncate', title: name, children: name })] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-list-inline.tsx":
/*!*************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-list-inline.tsx ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TaskListInline: () => (/* binding */ TaskListInline)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _query_task__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./query-task */ "./your-extensions/widgets/query-simple/src/runtime/query-task.tsx");
/* harmony import */ var _query_task_list__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./query-task-list */ "./your-extensions/widgets/query-simple/src/runtime/query-task-list.tsx");
/* harmony import */ var _query_task_list_popper_wrapper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./query-task-list-popper-wrapper */ "./your-extensions/widgets/query-simple/src/runtime/query-task-list-popper-wrapper.tsx");
/* harmony import */ var _widget_config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./widget-config */ "./your-extensions/widgets/query-simple/src/runtime/widget-config.ts");
/* harmony import */ var _default_query_item__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../default-query-item */ "./your-extensions/widgets/query-simple/src/default-query-item.ts");

/** @jsx jsx */






const { iconMap } = (0,_widget_config__WEBPACK_IMPORTED_MODULE_5__.getWidgetRuntimeDataMap)();
const SPACE = 8;
const style = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
  > div {
    margin-right: 8px;
  }
`;
// show task label and an arrow to the task content
function TaskListInline(props) {
    const { queryItems, widgetId, minSize, defaultSize, defaultPageSize, widgetLabel, wrap = false } = props;
    const containerRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(undefined);
    const containerWidthRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(0);
    const contentWidthRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef({});
    const [numOfExpanded, setNumOfExpanded] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(queryItems.length);
    const [openedPopper, setOpenedPopper] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(-1);
    const resizeObserverRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const adjustContent = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        let total = 0;
        for (let i = 0; i < numOfExpanded; i++) {
            const item = queryItems[i];
            const itemWidth = contentWidthRef.current[item.configId];
            if (itemWidth > 0) {
                total += itemWidth + SPACE;
                if (total >= containerWidthRef.current && numOfExpanded !== i) {
                    setNumOfExpanded(i);
                    return;
                }
            }
            else {
                return; // content width not ready
            }
        }
        setNumOfExpanded(queryItems.length);
    }, [numOfExpanded, queryItems]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (resizeObserverRef.current) {
            resizeObserverRef.current.disconnect();
        }
        // bind with the new event handler
        resizeObserverRef.current = new ResizeObserver(jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.throttle((entries) => {
            const width = Math.round(entries[0].contentRect.width);
            if (containerWidthRef.current !== width) {
                containerWidthRef.current = width;
                adjustContent();
            }
        }, 200));
        resizeObserverRef.current.observe(containerRef.current);
        return () => {
            resizeObserverRef.current.disconnect();
        };
    }, [adjustContent]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        var _a;
        containerWidthRef.current = (_a = containerRef.current) === null || _a === void 0 ? void 0 : _a.clientWidth;
        adjustContent();
    });
    const handleItemWidthChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((index, width) => {
        const queryItem = queryItems[index];
        if (contentWidthRef.current[queryItem.configId] !== width) {
            contentWidthRef.current[queryItem.configId] = width;
            adjustContent();
        }
    }, [queryItems, adjustContent]);
    const handlePopperOpenedChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((index, isOpen) => {
        if (isOpen) {
            setOpenedPopper(index);
        }
        else if (index === openedPopper) {
            // current popper is closed
            setOpenedPopper(-1);
        }
    }, [openedPopper]);
    const [expandedArray, nonExpandedArray] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        const expandedArray = [];
        const nonExpandedArray = [];
        for (let i = 0; i < queryItems.length; i++) {
            if (i < numOfExpanded) {
                expandedArray.push(queryItems[i]);
            }
            else {
                nonExpandedArray.push(queryItems[i]);
            }
        }
        return [expandedArray, nonExpandedArray];
    }, [queryItems, numOfExpanded]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { ref: containerRef, css: style, className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('runtime-query__query-list h-100 d-flex', { 'flex-wrap': wrap, 'align-content-start': wrap }), children: [expandedArray.map((queryItem, index) => {
                var _a;
                const currentItem = Object.assign({}, _default_query_item__WEBPACK_IMPORTED_MODULE_6__.DEFAULT_QUERY_ITEM, queryItem);
                return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list_popper_wrapper__WEBPACK_IMPORTED_MODULE_4__.TaskListPopperWrapper, { id: index, icon: currentItem.icon, buttonType: 'default', label: currentItem.displayLabel ? currentItem.name : undefined, popperTitle: currentItem.name, onWidthChange: handleItemWidthChange, minSize: minSize, defaultSize: defaultSize, onOpenedChange: handlePopperOpenedChange, forceClose: openedPopper >= 0 && openedPopper !== index, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task__WEBPACK_IMPORTED_MODULE_2__.QueryTask, { widgetId: widgetId, index: index, total: 1, isInPopper: true, queryItem: currentItem, wrappedInPopper: true, className: 'pb-4', defaultPageSize: defaultPageSize, initialInputValue: currentItem.shortId === ((_a = props.initialQueryValue) === null || _a === void 0 ? void 0 : _a.shortId) ? props.initialQueryValue.value : undefined, onHashParameterUsed: props.onHashParameterUsed, queryItemShortId: currentItem.shortId }) }, currentItem.configId);
            }), nonExpandedArray.length > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list_popper_wrapper__WEBPACK_IMPORTED_MODULE_4__.TaskListPopperWrapper, { id: expandedArray.length + 1, icon: iconMap.iconMore, minSize: minSize, buttonType: 'default', popperTitle: widgetLabel, defaultSize: defaultSize, onOpenedChange: handlePopperOpenedChange, forceClose: openedPopper >= 0 && openedPopper !== expandedArray.length + 1, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list__WEBPACK_IMPORTED_MODULE_3__.QueryTaskList, { widgetId: widgetId, isInPopper: true, defaultPageSize: defaultPageSize, queryItems: nonExpandedArray, className: 'pb-4', initialQueryValue: props.initialQueryValue, onHashParameterUsed: props.onHashParameterUsed }) }))] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-list-popper-wrapper.tsx":
/*!*********************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-list-popper-wrapper.tsx ***!
  \*********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TaskListPopperWrapper: () => (/* binding */ TaskListPopperWrapper)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _version__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../version */ "./your-extensions/widgets/query-simple/src/version.ts");

/** @jsx jsx */



const shiftOptions = { padding: 1 };
function TaskListPopperWrapper(props) {
    const { id, icon, label, forceClose, onOpenedChange, popperTitle, minSize, defaultSize, onWidthChange, buttonType = 'tertiary', children } = props;
    const iconRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(undefined);
    const widthRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(0);
    const [isOpen, setIsOpen] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(false);
    const [popperVersion, setPopperVersion] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(0);
    const isMobile = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useCheckSmallBrowserSizeMode();
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (forceClose) {
            setIsOpen(false);
        }
    }, [forceClose]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        if (typeof onWidthChange === 'function') {
            widthRef.current = Math.round(iconRef.current.clientWidth);
            onWidthChange(id, widthRef.current);
            const resizeObserver = new ResizeObserver(jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.throttle((entries) => {
                const width = Math.round(entries[0].contentRect.width);
                if (widthRef.current !== width) {
                    widthRef.current = width;
                    onWidthChange(id, width);
                }
            }, 200));
            resizeObserver.observe(iconRef.current);
            return () => {
                resizeObserver.disconnect();
            };
        }
    });
    const togglePopper = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        if (typeof onOpenedChange === 'function') {
            onOpenedChange(id, !isOpen);
        }
        setIsOpen(!isOpen);
        setPopperVersion(popperVersion + 1);
        if (isOpen) {
            setTimeout(() => {
                if ((0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.isKeyboardMode)()) {
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.focusElementInKeyboardMode)(iconRef.current);
                }
            }, 200);
        }
    }, [id, isOpen, popperVersion, onOpenedChange]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'runtime-query__widget-popper', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { title: label, "aria-label": label, icon: true, size: 'sm', variant: buttonType === 'tertiary' ? 'text' : undefined, color: buttonType === 'tertiary' ? 'inherit' : undefined, type: buttonType === 'tertiary' ? undefined : buttonType, ref: iconRef, onClick: togglePopper, children: [icon && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Icon, Object.assign({ size: 16 }, (typeof icon === 'string' ? { icon } : { icon: icon.svg, color: buttonType === 'tertiary' ? undefined : icon.properties.color }))), label && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            word-break: break-word;
            word-wrap: break-word;
            line-height: 1.2;
          `, className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)({ 'ml-2': icon != null }), children: label })] }), isMobile
                ? (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.MobilePanel, { open: isOpen, title: popperTitle, onClose: togglePopper, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              display: flex;
              flex-direction: column;
              height: 100%;
            `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                flex: 1;
                overflow: auto;
                padding-bottom: 1rem; /* Scoped padding to space content from footer */
              `, children: children }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                padding: 4px 12px;
                border-top: 1px solid var(--sys-color-divider-secondary);
                background-color: var(--sys-color-surface-paper);
                flex-shrink: 0;
                text-align: center;
              `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                  font-size: 0.75rem;
                  color: var(--sys-color-text-tertiary);
                  font-weight: 400;
                  letter-spacing: 0.025em;
                  display: inline-flex;
                  align-items: center;
                  gap: 4px;
                `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("svg", { width: "14", height: "14", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                      flex-shrink: 0;
                      opacity: 0.6;
                    `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("polyline", { points: "16 18 22 12 16 6" }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("polyline", { points: "8 6 2 12 8 18" })] }), "QuerySimple by MapSimple", (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                    margin-left: 6px;
                    opacity: 0.5;
                    font-size: 0.7rem;
                  `, children: ["v", _version__WEBPACK_IMPORTED_MODULE_3__.WIDGET_VERSION] })] }) })] }) })
                : (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.FloatingPanel, { className: 'ui-unit-popper ui-unit-popper_k-arrangement-icon flex-grow-1', headerClassName: jimu_ui__WEBPACK_IMPORTED_MODULE_2__.FOCUSABLE_CONTAINER_CLASS, open: isOpen, onHeaderClose: togglePopper, toggle: togglePopper, headerTitle: popperTitle, minSize: minSize, defaultSize: defaultSize, dragBounds: 'body', version: popperVersion, reference: iconRef, placement: 'bottom-start', shiftOptions: shiftOptions, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              display: flex;
              flex-direction: column;
              height: 100%;
            `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                flex: 1;
                overflow: auto;
                padding-bottom: 1rem; /* Scoped padding to space content from footer */
              `, children: children }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                padding: 4px 12px;
                border-top: 1px solid var(--sys-color-divider-secondary);
                background-color: var(--sys-color-surface-paper);
                flex-shrink: 0;
                text-align: center;
              `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                  font-size: 0.75rem;
                  color: var(--sys-color-text-tertiary);
                  font-weight: 400;
                  letter-spacing: 0.025em;
                  display: inline-flex;
                  align-items: center;
                  gap: 4px;
                `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("svg", { width: "14", height: "14", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                      flex-shrink: 0;
                      opacity: 0.6;
                    `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("polyline", { points: "16 18 22 12 16 6" }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("polyline", { points: "8 6 2 12 8 18" })] }), "QuerySimple by MapSimple", (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                    margin-left: 6px;
                    opacity: 0.5;
                    font-size: 0.7rem;
                  `, children: ["v", _version__WEBPACK_IMPORTED_MODULE_3__.WIDGET_VERSION] })] }) })] }) })] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-list.tsx":
/*!******************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-list.tsx ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTaskList: () => (/* binding */ QueryTaskList)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _query_task__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./query-task */ "./your-extensions/widgets/query-simple/src/runtime/query-task.tsx");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");

/** @jsx jsx */





const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_5__.createQuerySimpleDebugLogger)();
// Helper function to sort queries by display order (lower numbers appear first)
// Queries without order maintain their original relative positions
function sortQueryItemsByOrder(queryItems) {
    // Handle null/undefined/empty cases
    if (!queryItems || queryItems.length === 0) {
        return queryItems || (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)([]);
    }
    // Safely convert to regular array for sorting
    // Handle both ImmutableArray (has toArray method) and regular arrays
    const itemsArray = (queryItems && typeof queryItems.toArray === 'function')
        ? queryItems.toArray()
        : (Array.isArray(queryItems) ? queryItems : []);
    const itemsWithIndex = itemsArray.map((item, index) => ({ item, originalIndex: index }));
    itemsWithIndex.sort((a, b) => {
        var _a, _b;
        const orderA = (_a = a.item.order) !== null && _a !== void 0 ? _a : Infinity;
        const orderB = (_b = b.item.order) !== null && _b !== void 0 ? _b : Infinity;
        if (orderA !== orderB) {
            return orderA - orderB;
        }
        // If order is equal (both Infinity or same number), maintain original index order
        return a.originalIndex - b.originalIndex;
    });
    return (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)(itemsWithIndex.map(({ item }) => item));
}
// Helper function to group queries by groupId
const groupQueries = (queryItems) => {
    const groups = {};
    const ungrouped = [];
    const groupOrder = [];
    const groupIndexMap = {};
    // First pass: collect items in regular arrays
    const groupItemsMap = {};
    queryItems.forEach((item, index) => {
        if (item.groupId) {
            if (!groupItemsMap[item.groupId]) {
                groupItemsMap[item.groupId] = [];
                groups[item.groupId] = {
                    items: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)([]),
                    displayName: item.groupDisplayName || item.name || `Group ${item.groupId}`,
                    icon: item.icon
                };
                groupIndexMap[item.groupId] = index;
                groupOrder.push(item.groupId);
            }
            groupItemsMap[item.groupId].push(item);
        }
        else {
            ungrouped.push({ item, index });
        }
    });
    // Second pass: convert regular arrays to ImmutableArrays
    Object.keys(groupItemsMap).forEach(groupId => {
        groups[groupId].items = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)(groupItemsMap[groupId]);
    });
    return { groups, ungrouped, groupOrder };
};
// Helper function to get display name for query in dropdown
// Uses: searchAlias || jimuFieldName || item.name || fallback
const getQueryDisplayName = (item) => {
    var _a, _b, _c;
    // First priority: searchAlias if set
    if (item.searchAlias) {
        return item.searchAlias;
    }
    // Second priority: field name from SQL expression
    const jimuFieldName = (_c = (_b = (_a = item.sqlExprObj) === null || _a === void 0 ? void 0 : _a.parts) === null || _b === void 0 ? void 0 : _b[0]) === null || _c === void 0 ? void 0 : _c.jimuFieldName;
    if (jimuFieldName) {
        return jimuFieldName;
    }
    // Third priority: item name
    if (item.name) {
        return item.name;
    }
    // Fallback
    return 'Query';
};
function QueryTaskList(props) {
    const { queryItems, widgetId, defaultPageSize, isInPopper = false, className = '', initialQueryValue, shouldUseInitialQueryValueForSelection = false, onHashParameterUsed, resultsMode, onResultsModeChange, accumulatedRecords, onAccumulatedRecordsChange, useGraphicsLayerForHighlight, graphicsLayer, mapView, onInitializeGraphicsLayer, onClearGraphicsLayer, activeTab, onTabChange } = props;
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_4__["default"]);
    // Log when props are received
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        debugLogger.log('HASH-EXEC', {
            event: 'querytasklist-props-received',
            widgetId,
            props: {
                hasInitialQueryValue: !!initialQueryValue,
                initialQueryValueShortId: initialQueryValue === null || initialQueryValue === void 0 ? void 0 : initialQueryValue.shortId,
                initialQueryValueValue: initialQueryValue === null || initialQueryValue === void 0 ? void 0 : initialQueryValue.value,
                shouldUseInitialQueryValueForSelection
            },
            timestamp: Date.now()
        });
        debugLogger.log('GROUP', {
            event: 'query-task-list-props-received',
            widgetId,
            hasInitialQueryValue: !!initialQueryValue,
            initialQueryValueShortId: initialQueryValue === null || initialQueryValue === void 0 ? void 0 : initialQueryValue.shortId,
            initialQueryValueValue: initialQueryValue === null || initialQueryValue === void 0 ? void 0 : initialQueryValue.value,
            shouldUseInitialQueryValueForSelection,
            timestamp: Date.now()
        });
    }, [initialQueryValue, shouldUseInitialQueryValueForSelection, widgetId]);
    // Sort queries by display order before grouping
    // Handle case where queryItems might be undefined/null or not an ImmutableArray
    const sortedQueryItems = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        if (!queryItems) {
            return (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)([]);
        }
        return sortQueryItemsByOrder(queryItems);
    }, [queryItems]);
    const { groups, ungrouped, groupOrder } = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => groupQueries(sortedQueryItems), [sortedQueryItems]);
    // Only use the prop initialQueryValue when HelperSimple explicitly opens the widget
    // QuerySimple should not autonomously react to initialQueryValue prop changes
    // HelperSimple is the orchestrator and sets shouldUseInitialQueryValueForSelection flag
    const effectiveInitialQueryValue = shouldUseInitialQueryValueForSelection ? initialQueryValue : undefined;
    // Log when effectiveInitialQueryValue is calculated
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        debugLogger.log('HASH-EXEC', {
            event: 'querytasklist-effectiveinitialqueryvalue-calculated',
            widgetId,
            calculation: {
                shouldUseInitialQueryValueForSelection,
                hasInitialQueryValue: !!initialQueryValue,
                effectiveResult: effectiveInitialQueryValue ? 'USE_INITIAL_QUERY_VALUE' : 'UNDEFINED',
                effectiveShortId: effectiveInitialQueryValue === null || effectiveInitialQueryValue === void 0 ? void 0 : effectiveInitialQueryValue.shortId,
                effectiveValue: effectiveInitialQueryValue === null || effectiveInitialQueryValue === void 0 ? void 0 : effectiveInitialQueryValue.value
            },
            timestamp: Date.now()
        });
        debugLogger.log('GROUP', {
            event: 'effectiveInitialQueryValue-calculated',
            widgetId,
            shouldUseInitialQueryValueForSelection,
            hasInitialQueryValue: !!initialQueryValue,
            hasEffectiveInitialQueryValue: !!effectiveInitialQueryValue,
            effectiveShortId: effectiveInitialQueryValue === null || effectiveInitialQueryValue === void 0 ? void 0 : effectiveInitialQueryValue.shortId,
            effectiveValue: effectiveInitialQueryValue === null || effectiveInitialQueryValue === void 0 ? void 0 : effectiveInitialQueryValue.value,
            timestamp: Date.now()
        });
    }, [effectiveInitialQueryValue, shouldUseInitialQueryValueForSelection, initialQueryValue, widgetId]);
    // Find the query item matching the shortId from URL hash
    const matchingQueryIndex = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        const shortId = effectiveInitialQueryValue === null || effectiveInitialQueryValue === void 0 ? void 0 : effectiveInitialQueryValue.shortId;
        if (!shortId) {
            return -1;
        }
        return sortedQueryItems.findIndex(item => item.shortId === shortId);
    }, [sortedQueryItems, effectiveInitialQueryValue]);
    // Determine which group/ungrouped index the matching query is at
    const getQuerySelection = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        var _a;
        if (matchingQueryIndex < 0)
            return null;
        const item = sortedQueryItems[matchingQueryIndex];
        if (item.groupId) {
            const groupItems = ((_a = groups[item.groupId]) === null || _a === void 0 ? void 0 : _a.items) || (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)([]);
            const indexInGroup = groupItems.findIndex(q => q.configId === item.configId);
            debugLogger.log('GROUP', {
                event: 'hash-query-found-in-group',
                groupId: item.groupId,
                indexInGroup: indexInGroup >= 0 ? indexInGroup : 0,
                queryItemConfigId: item.configId,
                queryItemShortId: item.shortId
            });
            return { type: 'group', groupId: item.groupId, index: indexInGroup >= 0 ? indexInGroup : 0 };
        }
        else {
            // Ungrouped query
            const indexInUngrouped = ungrouped.findIndex(({ item: q }) => q.configId === item.configId);
            debugLogger.log('GROUP', {
                event: 'hash-query-found-ungrouped',
                indexInUngrouped: indexInUngrouped >= 0 ? indexInUngrouped : 0,
                queryItemConfigId: item.configId,
                queryItemShortId: item.shortId
            });
            return { type: 'ungrouped', index: indexInUngrouped >= 0 ? indexInUngrouped : 0 };
        }
    }, [matchingQueryIndex, sortedQueryItems, groups, ungrouped]);
    // Helper to determine default selection based on display order
    const getDefaultSelection = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        var _a, _b, _c, _d;
        if (getQuerySelection) {
            return getQuerySelection;
        }
        // No hash parameter - determine default based on display order
        // Compare first ungrouped query vs first query in first group
        const firstUngroupedOrder = ungrouped.length > 0 ? ((_a = ungrouped[0].item.order) !== null && _a !== void 0 ? _a : Infinity) : Infinity;
        const firstGroupOrder = groupOrder.length > 0 && ((_c = (_b = groups[groupOrder[0]]) === null || _b === void 0 ? void 0 : _b.items) === null || _c === void 0 ? void 0 : _c.length) > 0
            ? ((_d = groups[groupOrder[0]].items[0].order) !== null && _d !== void 0 ? _d : Infinity)
            : Infinity;
        // Select whichever has lower order (or first if equal)
        if (firstUngroupedOrder < firstGroupOrder) {
            return { type: 'ungrouped', index: 0 };
        }
        else if (firstGroupOrder < Infinity || groupOrder.length > 0) {
            return { type: 'group', groupId: groupOrder[0], index: 0 };
        }
        else if (ungrouped.length > 0) {
            return { type: 'ungrouped', index: 0 };
        }
        return null;
    }, [getQuerySelection, ungrouped, groups, groupOrder]);
    // Track selected query - initialize with matching query if found from URL hash, or default based on display order
    const [selectedGroupId, setSelectedGroupId] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(() => {
        if ((getDefaultSelection === null || getDefaultSelection === void 0 ? void 0 : getDefaultSelection.type) === 'group') {
            debugLogger.log('GROUP', {
                event: 'initial-group-selection',
                groupId: getDefaultSelection.groupId,
                note: getQuerySelection ? 'Hash-matched' : 'Default based on display order'
            });
            return getDefaultSelection.groupId;
        }
        return null;
    });
    const [selectedGroupQueryIndex, setSelectedGroupQueryIndex] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(() => {
        if ((getDefaultSelection === null || getDefaultSelection === void 0 ? void 0 : getDefaultSelection.type) === 'group') {
            debugLogger.log('GROUP', {
                event: 'initial-group-query-index',
                index: getDefaultSelection.index,
                note: getQuerySelection ? 'Hash-matched' : 'Default based on display order'
            });
            return getDefaultSelection.index;
        }
        return 0;
    });
    const [selectedUngroupedIndex, setSelectedUngroupedIndex] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(() => {
        if ((getDefaultSelection === null || getDefaultSelection === void 0 ? void 0 : getDefaultSelection.type) === 'ungrouped') {
            debugLogger.log('GROUP', {
                event: 'initial-ungrouped-index',
                index: getDefaultSelection.index,
                note: getQuerySelection ? 'Hash-matched' : 'Default based on display order'
            });
            return getDefaultSelection.index;
        }
        return 0;
    });
    // Update selection when HelperSimple explicitly opens widget with hash parameter
    // Only react when shouldUseInitialQueryValueForSelection is true (set by HelperSimple)
    // This prevents autonomous query selection when switching queries
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        debugLogger.log('HASH-EXEC', {
            event: 'querytasklist-selection-useeffect-check',
            widgetId,
            check: {
                shouldUseInitialQueryValueForSelection,
                hasGetQuerySelection: !!getQuerySelection,
                getQuerySelectionType: getQuerySelection === null || getQuerySelection === void 0 ? void 0 : getQuerySelection.type,
                willUpdateSelection: shouldUseInitialQueryValueForSelection && !!getQuerySelection
            },
            timestamp: Date.now()
        });
        debugLogger.log('GROUP', {
            event: 'query-selection-useeffect-check',
            widgetId,
            shouldUseInitialQueryValueForSelection,
            hasGetQuerySelection: !!getQuerySelection,
            getQuerySelectionType: getQuerySelection === null || getQuerySelection === void 0 ? void 0 : getQuerySelection.type,
            willUpdateSelection: shouldUseInitialQueryValueForSelection && !!getQuerySelection,
            timestamp: Date.now()
        });
        if (shouldUseInitialQueryValueForSelection && getQuerySelection) {
            // Hash parameter matched - HelperSimple explicitly opened us with this hash
            debugLogger.log('HASH-EXEC', {
                event: 'querytasklist-selection-useeffect-updating',
                widgetId,
                selectionType: getQuerySelection.type,
                selectionDetails: getQuerySelection.type === 'group'
                    ? { groupId: getQuerySelection.groupId, index: getQuerySelection.index }
                    : { index: getQuerySelection.index },
                timestamp: Date.now()
            });
            if (getQuerySelection.type === 'group') {
                debugLogger.log('GROUP', {
                    event: 'selection-changed-to-group-from-hash',
                    groupId: getQuerySelection.groupId,
                    index: getQuerySelection.index,
                    note: 'HelperSimple explicitly opened widget with hash parameter'
                });
                setSelectedGroupId(getQuerySelection.groupId);
                setSelectedGroupQueryIndex(getQuerySelection.index);
            }
            else {
                debugLogger.log('GROUP', {
                    event: 'selection-changed-to-ungrouped-from-hash',
                    index: getQuerySelection.index,
                    note: 'HelperSimple explicitly opened widget with hash parameter'
                });
                setSelectedGroupId(null);
                setSelectedUngroupedIndex(getQuerySelection.index);
            }
        }
        else {
            debugLogger.log('HASH-EXEC', {
                event: 'querytasklist-selection-useeffect-skipped',
                widgetId,
                reason: !shouldUseInitialQueryValueForSelection ? 'flag-is-false' : 'no-query-selection',
                check: {
                    shouldUseInitialQueryValueForSelection,
                    hasGetQuerySelection: !!getQuerySelection
                },
                timestamp: Date.now()
            });
            debugLogger.log('GROUP', {
                event: 'query-selection-useeffect-skipped',
                widgetId,
                reason: !shouldUseInitialQueryValueForSelection ? 'flag-is-false' : 'no-query-selection',
                shouldUseInitialQueryValueForSelection,
                hasGetQuerySelection: !!getQuerySelection,
                timestamp: Date.now()
            });
        }
    }, [shouldUseInitialQueryValueForSelection, getQuerySelection, widgetId]);
    // Get the currently selected query item
    const getSelectedQueryItem = () => {
        // PRIORITY 1: Use current state selection
        // The state is initialized with the hash match (if present) or default order,
        // and updated via useEffect if the hash changes later.
        debugLogger.log('GROUP', {
            event: 'getSelectedQueryItem-state-selection',
            selectedGroupId,
            hasSelectedGroup: selectedGroupId && groups[selectedGroupId],
            selectedGroupQueryIndex,
            selectedUngroupedIndex,
            ungroupedLength: ungrouped.length,
            groupOrderLength: groupOrder.length,
            note: 'Using state selection (hash-aware)'
        });
        // If a group is selected, get query from that group
        if (selectedGroupId && groups[selectedGroupId]) {
            const groupItems = groups[selectedGroupId].items;
            if (groupItems.length > 0) {
                const idx = selectedGroupQueryIndex < groupItems.length ? selectedGroupQueryIndex : 0;
                const selectedItem = groupItems[idx];
                debugLogger.log('GROUP', {
                    event: 'selected-query-from-group',
                    groupId: selectedGroupId,
                    groupQueryIndex: idx,
                    queryItemConfigId: selectedItem.configId,
                    queryDisplayName: getQueryDisplayName(selectedItem)
                });
                return selectedItem;
            }
        }
        // Otherwise, get from ungrouped queries
        if (ungrouped.length > 0) {
            const idx = selectedUngroupedIndex < ungrouped.length ? selectedUngroupedIndex : 0;
            const selectedItem = ungrouped[idx].item;
            debugLogger.log('GROUP', {
                event: 'selected-query-from-ungrouped',
                ungroupedIndex: idx,
                queryItemConfigId: selectedItem.configId,
                queryDisplayName: getQueryDisplayName(selectedItem)
            });
            return selectedItem;
        }
        // Fallback to first query item
        debugLogger.log('GROUP', {
            event: 'selected-query-fallback',
            note: 'No groups or ungrouped queries, using first item'
        });
        return sortedQueryItems[0];
    };
    const selectedQueryItem = getSelectedQueryItem();
    const selectedQueryRealIndex = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return sortedQueryItems.findIndex(q => q.configId === selectedQueryItem.configId);
    }, [sortedQueryItems, selectedQueryItem]);
    // If only one query total, don't show dropdown
    const showDropdown = sortedQueryItems.length > 1 || groupOrder.length > 0;
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: `runtime-query__query-list h-100 ${className}`, css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
      display: flex;
      flex-direction: column;
      .query-selector {
        padding: 16px;
        border-bottom: 1px solid var(--sys-color-divider-secondary);
        display: flex;
        flex-direction: column;
        gap: 8px;
      }
      .query-selector-label {
        font-size: 0.875rem;
        font-weight: 500;
        color: var(--sys-color-text-primary);
        margin-bottom: 4px;
      }
      .query-selector select {
        width: 100%;
      }
      .query-task-container {
        flex: 1;
        overflow: auto;
      }
    `, children: selectedQueryItem && (() => {
            const willPassInitialInputValue = selectedQueryItem.shortId === (effectiveInitialQueryValue === null || effectiveInitialQueryValue === void 0 ? void 0 : effectiveInitialQueryValue.shortId);
            const initialInputValueToPass = willPassInitialInputValue ? effectiveInitialQueryValue === null || effectiveInitialQueryValue === void 0 ? void 0 : effectiveInitialQueryValue.value : undefined;
            debugLogger.log('GROUP', {
                event: 'initialInputValue-being-passed-to-querytask',
                widgetId,
                selectedQueryItemShortId: selectedQueryItem.shortId,
                selectedQueryItemConfigId: selectedQueryItem.configId,
                effectiveInitialQueryValueShortId: effectiveInitialQueryValue === null || effectiveInitialQueryValue === void 0 ? void 0 : effectiveInitialQueryValue.shortId,
                willPassInitialInputValue,
                initialInputValue: initialInputValueToPass,
                timestamp: Date.now()
            });
            return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: `query-task-container ${isInPopper ? jimu_ui__WEBPACK_IMPORTED_MODULE_3__.FOCUSABLE_CONTAINER_CLASS : ''}`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task__WEBPACK_IMPORTED_MODULE_2__.QueryTask, { widgetId: widgetId, index: selectedQueryRealIndex >= 0 ? selectedQueryRealIndex : 0, total: sortedQueryItems.length, queryItem: selectedQueryItem, isInPopper: isInPopper, initialInputValue: initialInputValueToPass, onHashParameterUsed: onHashParameterUsed, queryItems: sortedQueryItems, selectedQueryIndex: selectedUngroupedIndex, onQueryChange: (index) => setSelectedUngroupedIndex(index), 
                    // Grouping props
                    groups: groups, ungrouped: ungrouped, 
                    // Graphics layer props
                    useGraphicsLayerForHighlight: useGraphicsLayerForHighlight, graphicsLayer: graphicsLayer, mapView: mapView, onInitializeGraphicsLayer: onInitializeGraphicsLayer, onClearGraphicsLayer: onClearGraphicsLayer, groupOrder: groupOrder, selectedGroupId: selectedGroupId, selectedGroupQueryIndex: selectedGroupQueryIndex, onGroupChange: (groupId) => setSelectedGroupId(groupId), onGroupQueryChange: (index) => setSelectedGroupQueryIndex(index), onUngroupedChange: (index) => setSelectedUngroupedIndex(index), resultsMode: resultsMode, onResultsModeChange: onResultsModeChange, accumulatedRecords: accumulatedRecords, onAccumulatedRecordsChange: onAccumulatedRecordsChange, activeTab: activeTab, onTabChange: onTabChange }) }));
        })() }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-spatial-form.tsx":
/*!**************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-spatial-form.tsx ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTaskSpatialForm: () => (/* binding */ QueryTaskSpatialForm)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _geometry_from_ds__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./geometry-from-ds */ "./your-extensions/widgets/query-simple/src/runtime/geometry-from-ds.tsx");
/* harmony import */ var _geometry_from_map__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./geometry-from-map */ "./your-extensions/widgets/query-simple/src/runtime/geometry-from-map.tsx");
/* harmony import */ var _geometry_from_draw__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./geometry-from-draw */ "./your-extensions/widgets/query-simple/src/runtime/geometry-from-draw.tsx");
/* harmony import */ var jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! jimu-icons/outlined/suggested/info */ "./jimu-icons/outlined/suggested/info.tsx");

/** @jsx jsx */








function QueryTaskSpatialForm(props) {
    var _a;
    const { label, desc, filterTypes, mapWidgetIds, onFilterChange, onRelationChange, onBufferChange, useDataSources, spatialRelations, useRuntimeData, dsEnableBuffer, dsBufferDistance, dsBufferUnit, drawEnableBuffer, drawBufferDistance, drawBufferUnit, createToolTypes, widgetId } = props;
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_4__["default"]);
    // used to store the selection of the data source in order to update the filter when option changes
    const selectedGeometriesRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const mapExists = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        if ((mapWidgetIds === null || mapWidgetIds === void 0 ? void 0 : mapWidgetIds.length) > 0) {
            const mapWidgetId = mapWidgetIds[0];
            return state.appConfig.widgets[mapWidgetId] != null;
        }
        return false;
    });
    const canUseMapFilter = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return mapExists && ((filterTypes === null || filterTypes === void 0 ? void 0 : filterTypes.includes(_config__WEBPACK_IMPORTED_MODULE_3__.SpatialFilterType.CurrentMapExtent)) || (filterTypes === null || filterTypes === void 0 ? void 0 : filterTypes.includes(_config__WEBPACK_IMPORTED_MODULE_3__.SpatialFilterType.InteractiveDrawMode)));
    }, [filterTypes, mapExists]);
    const supportedFilterTypes = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        const result = [];
        if ((useDataSources === null || useDataSources === void 0 ? void 0 : useDataSources.length) > 0 || useRuntimeData) {
            result.push({ value: 'data', label: getI18nMessage('featureFromDs') });
        }
        if (canUseMapFilter && (filterTypes === null || filterTypes === void 0 ? void 0 : filterTypes.includes(_config__WEBPACK_IMPORTED_MODULE_3__.SpatialFilterType.CurrentMapExtent))) {
            result.push({ value: 'map', label: getI18nMessage(`spatialFilterType_${_config__WEBPACK_IMPORTED_MODULE_3__.SpatialFilterType.CurrentMapExtent}`) });
        }
        if (canUseMapFilter && (filterTypes === null || filterTypes === void 0 ? void 0 : filterTypes.includes(_config__WEBPACK_IMPORTED_MODULE_3__.SpatialFilterType.InteractiveDrawMode))) {
            result.push({ value: 'draw', label: getI18nMessage(`spatialFilterType_${_config__WEBPACK_IMPORTED_MODULE_3__.SpatialFilterType.InteractiveDrawMode}`) });
        }
        return result;
    }, [canUseMapFilter, useDataSources, useRuntimeData, getI18nMessage, filterTypes]);
    const [currentFilterType, setCurrentFilterType] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState((_a = supportedFilterTypes === null || supportedFilterTypes === void 0 ? void 0 : supportedFilterTypes[0]) === null || _a === void 0 ? void 0 : _a.value);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        // in order to avoid invalid option being selected
        if (currentFilterType !== 'none' && !supportedFilterTypes.find((item) => item.value === currentFilterType)) {
            setCurrentFilterType((_a = supportedFilterTypes === null || supportedFilterTypes === void 0 ? void 0 : supportedFilterTypes[0]) === null || _a === void 0 ? void 0 : _a.value);
        }
    }, [currentFilterType, supportedFilterTypes]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        // clear the relationship and buffer if filter type is not 'data'
        if (currentFilterType === 'map' || currentFilterType === 'draw' || currentFilterType === 'none') {
            onRelationChange(null);
            onBufferChange(0, _config__WEBPACK_IMPORTED_MODULE_3__.UnitType.Meters);
            onFilterChange({ geometry: null });
        }
        // no need to update the filter if the data source has selection since it will be updated in the handleSelectionChange method
        if (currentFilterType === 'data' && selectedGeometriesRef.current == null) {
            onFilterChange({ geometry: null });
        }
    }, [currentFilterType, onRelationChange, onBufferChange, onFilterChange]);
    const handleFilterTypeChanged = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((evt) => { setCurrentFilterType(evt.target.value); }, []);
    const handleGeometryChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((geometry, layer, graphic, clearAfterApply) => {
        onFilterChange({ geometry, graphic, layer, clearAfterApply });
    }, [onFilterChange]);
    const handleSelectionChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((geometries) => {
        selectedGeometriesRef.current = geometries;
        onFilterChange({ geometry: geometries });
    }, [onFilterChange]);
    if (!((useDataSources === null || useDataSources === void 0 ? void 0 : useDataSources.length) > 0 || useRuntimeData || canUseMapFilter)) {
        return null;
    }
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { role: 'group', className: 'px-4 pb-4', "aria-label": label, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('form-title my-2 d-flex align-items-center', { 'd-none': !label && !desc }), children: [label && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'mr-2 title2', children: label }), desc && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { placement: 'bottom', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `white-space: pre-line;`, title: desc, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: 'sm', icon: true, type: 'tertiary', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_8__.InfoOutlined, { color: 'var(--sys-color-primary-main)', size: 's' }) }) }))] }), supportedFilterTypes.length > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'title3', children: getI18nMessage('chooseFilterType') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Select, { "aria-label": getI18nMessage('chooseFilterType'), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `height: 32px;`, value: currentFilterType, onChange: handleFilterTypeChanged, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: 'none', children: "-" }, '-'), supportedFilterTypes.map(item => (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: item.value, children: item.label }, item.value))] })] })), currentFilterType === 'data' && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_geometry_from_ds__WEBPACK_IMPORTED_MODULE_5__.GeometryFromDataSource, { enableBuffer: dsEnableBuffer, bufferDistance: dsBufferDistance, bufferUnit: dsBufferUnit, spatialRelations: spatialRelations, useDataSources: useDataSources, useRuntimeData: useRuntimeData, onSelectionChange: handleSelectionChange, onRelationChange: onRelationChange, onBufferChange: onBufferChange })), currentFilterType === 'map' && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_geometry_from_map__WEBPACK_IMPORTED_MODULE_6__.GeometryFromMap, { mapWidgetIds: mapWidgetIds, createToolTypes: createToolTypes, onGeometryChange: handleGeometryChange })), currentFilterType === 'draw' && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_geometry_from_draw__WEBPACK_IMPORTED_MODULE_7__.GeometryFromDraw, { enableBuffer: drawEnableBuffer, bufferDistance: drawBufferDistance, bufferUnit: drawBufferUnit, mapWidgetIds: mapWidgetIds, widgetId: widgetId, createToolTypes: createToolTypes, onGeometryChange: handleGeometryChange, onBufferChange: onBufferChange }))] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task.tsx":
/*!*************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task.tsx ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTask: () => (/* binding */ QueryTask)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-icons/outlined/suggested/info */ "./jimu-icons/outlined/suggested/info.tsx");
/* harmony import */ var jimu_icons_outlined_editor_trash__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-icons/outlined/editor/trash */ "./jimu-icons/outlined/editor/trash.tsx");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _query_task_form__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./query-task-form */ "./your-extensions/widgets/query-simple/src/runtime/query-task-form.tsx");
/* harmony import */ var _query_result__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./query-result */ "./your-extensions/widgets/query-simple/src/runtime/query-result.tsx");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/* harmony import */ var _query_task_label__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./query-task-label */ "./your-extensions/widgets/query-simple/src/runtime/query-task-label.tsx");
/* harmony import */ var _hooks_use_zoom_to_records__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./hooks/use-zoom-to-records */ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-zoom-to-records.ts");
/* harmony import */ var _default_query_item__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../default-query-item */ "./your-extensions/widgets/query-simple/src/default-query-item.ts");
/* harmony import */ var _query_utils__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./query-utils */ "./your-extensions/widgets/query-simple/src/runtime/query-utils.ts");
/* harmony import */ var _results_management_utils__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./results-management-utils */ "./your-extensions/widgets/query-simple/src/runtime/results-management-utils.ts");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var jimu_icons_outlined_directional_arrow_left__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! jimu-icons/outlined/directional/arrow-left */ "./jimu-icons/outlined/directional/arrow-left.tsx");
/* harmony import */ var _loading_result__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./loading-result */ "./your-extensions/widgets/query-simple/src/runtime/loading-result.tsx");
/* harmony import */ var _selection_utils__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};

/** @jsx jsx */


















const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_8__.createQuerySimpleDebugLogger)();
// Event fired when SqlExpressionRuntime converts hash value from string to array format
const QUERYSIMPLE_HASH_VALUE_CONVERTED_EVENT = 'querysimple-hash-value-converted';
// Event fired when a hash-triggered query execution completes successfully
// This allows HelperSimple to track which hash parameters have been executed
const QUERYSIMPLE_HASH_QUERY_EXECUTED_EVENT = 'querysimple-hash-query-executed';
// Helper function to get display name for query in dropdown
// Uses: searchAlias || jimuFieldName || item.name || fallback
const getQueryDisplayName = (item) => {
    var _a, _b, _c;
    // First priority: searchAlias if set
    if (item.searchAlias) {
        return item.searchAlias;
    }
    // Second priority: field name from SQL expression
    const jimuFieldName = (_c = (_b = (_a = item.sqlExprObj) === null || _a === void 0 ? void 0 : _a.parts) === null || _b === void 0 ? void 0 : _b[0]) === null || _c === void 0 ? void 0 : _c.jimuFieldName;
    if (jimuFieldName) {
        return jimuFieldName;
    }
    // Third priority: item name
    if (item.name) {
        return item.name;
    }
    // Fallback
    return 'Query';
};
const style = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
  &.wrapped .query-form {
    height: 100%;
  }
  .query-task__content {
    display: flex;
    flex-direction: column;
    width: 100%;
    padding-top: 8px;
    &:has(> .query-form__header > div:not(.d-none)), &:has(> .query-result) {
      padding-top: 16px;
    }
  }
  .query-form__header {
    display: flex;
    &.has-content {
      border-bottom: 1px solid var(--sys-color-divider-secondary);
      margin-bottom: 6px;
      padding-bottom: 8px;
    }
    .nav-action {
      flex: 1 1 0;
      overflow: hidden;
      display: flex;
      .jimu-btn {
        min-width: 26px;
      }
    }
    .result-menu {
      display: flex;
    }
  }
`;
function QueryTask(props) {
    var _a, _b, _c, _d, _e;
    const { queryItem, onNavBack, total, isInPopper = false, wrappedInPopper = false, className = '', index, initialInputValue, onHashParameterUsed, queryItems, selectedQueryIndex, onQueryChange, groups, ungrouped, groupOrder, selectedGroupId, selectedGroupQueryIndex, onGroupChange, onGroupQueryChange, onUngroupedChange, resultsMode, onResultsModeChange, accumulatedRecords, onAccumulatedRecordsChange, useGraphicsLayerForHighlight, graphicsLayer, mapView, onInitializeGraphicsLayer, onClearGraphicsLayer, activeTab: propActiveTab, onTabChange: propOnTabChange } = props, otherProps = __rest(props, ["queryItem", "onNavBack", "total", "isInPopper", "wrappedInPopper", "className", "index", "initialInputValue", "onHashParameterUsed", "queryItems", "selectedQueryIndex", "onQueryChange", "groups", "ungrouped", "groupOrder", "selectedGroupId", "selectedGroupQueryIndex", "onGroupChange", "onGroupQueryChange", "onUngroupedChange", "resultsMode", "onResultsModeChange", "accumulatedRecords", "onAccumulatedRecordsChange", "useGraphicsLayerForHighlight", "graphicsLayer", "mapView", "onInitializeGraphicsLayer", "onClearGraphicsLayer", "activeTab", "onTabChange"]);
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_14__["default"]);
    const zoomToRecords = (0,_hooks_use_zoom_to_records__WEBPACK_IMPORTED_MODULE_10__.useZoomToRecords)(mapView);
    const [stage, setStage] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(0); // 0 = form, 1 = results, 2 = loading
    const [internalActiveTab, setInternalActiveTab] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState('query');
    // Log when initialInputValue prop is received
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        debugLogger.log('HASH-EXEC', {
            event: 'querytask-initialinputvalue-prop-received',
            widgetId: props.widgetId,
            queryItemConfigId: props.queryItem.configId,
            queryItemShortId: props.queryItemShortId,
            hasInitialInputValue: !!props.initialInputValue,
            initialInputValue: props.initialInputValue,
            timestamp: Date.now()
        });
    }, [props.initialInputValue, props.widgetId, props.queryItem.configId, props.queryItemShortId]);
    // Controlled tab state: use prop if provided, otherwise internal state
    const activeTab = propActiveTab || internalActiveTab;
    const setActiveTab = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((tab) => {
        if (propOnTabChange) {
            propOnTabChange(tab);
        }
        else {
            setInternalActiveTab(tab);
        }
    }, [propOnTabChange]);
    const [enabled, setEnabled] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(true);
    const [resultCount, setResultCount] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(0);
    // Track if we've already selected records for the current query results
    const hasSelectedRecordsRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(false);
    // Track query execution count to force QueryTaskResult remount on new queries
    const queryExecutionKeyRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(0);
    const queryParamRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const recordsRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const [outputDS, setOutputDS] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const [dataSource, setDataSource] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const [spatialFilterEnabled, setSpatialFilterEnabled] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(true);
    const attributeFilterSqlExprObj = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(queryItem.sqlExprObj);
    const spatialFilterObj = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const backBtnRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(undefined);
    const clearResultBtnRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(undefined);
    const [dataActionFilter, setDataActionFilter] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const previousConfigIdRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(queryItem.configId);
    // Track manual tab switches to prevent auto-switch useEffect from interfering
    const manualTabSwitchRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(false);
    // Track when a query was just executed - only auto-switch after query execution completes
    const queryJustExecutedRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(false);
    // Store the last runtime zoom override value from the form for use by Add to Map action
    const lastRuntimeZoomToSelectedRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(undefined);
    // Error states for user-facing errors
    const [selectionError, setSelectionError] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const [zoomError, setZoomError] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    // Store pending query when waiting for hash value conversion
    const pendingHashQueryRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const currentItem = Object.assign({}, _default_query_item__WEBPACK_IMPORTED_MODULE_11__.DEFAULT_QUERY_ITEM, queryItem);
    const { icon, name, displayLabel } = currentItem;
    const dsExists = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_8__.useDataSourceExists)({ widgetId: props.widgetId, useDataSourceId: (_a = currentItem.useDataSource) === null || _a === void 0 ? void 0 : _a.dataSourceId });
    // Debug logging for tab content rendering
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        debugLogger.log('TASK', {
            event: 'query-tab-content-render',
            activeTab,
            enabled,
            dsExists,
            dataSource: dataSource ? 'exists' : 'null',
            queryItemConfigId: queryItem.configId,
            note: 'Query tab content state check'
        });
    }, [activeTab, enabled, dsExists, dataSource, queryItem.configId]);
    // Debug logging for Tab children rendering
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (activeTab === 'query') {
            debugLogger.log('TASK', {
                event: 'query-tab-children-render',
                activeTab,
                queryItemConfigId: queryItem.configId,
                note: 'Query Tab children should be rendering'
            });
        }
    }, [activeTab, queryItem.configId]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        // focus the back button when it is rendered
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.focusElementInKeyboardMode)(backBtnRef.current);
    });
    // Get the pagination style from widget config (MultiPage or LazyLoad/Single-page)
    const pagingTypeInConfig = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const widgetJson = state.appConfig.widgets[props.widgetId];
        return widgetJson.config.resultPagingStyle;
    });
    // Get the initial page size for single-page (LazyLoad) results
    // This allows users to configure how many records are loaded initially when using single-page mode
    // Defaults to 100 if not configured
    const lazyLoadInitialPageSize = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const widgetJson = state.appConfig.widgets[props.widgetId];
        return widgetJson.config.lazyLoadInitialPageSize;
    });
    // Watch for when results are ready and switch to Results tab
    // ONLY auto-switch when a query was just executed and results are loaded
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        // Don't auto-switch if user manually switched tabs
        if (manualTabSwitchRef.current) {
            debugLogger.log('TASK', {
                event: 'auto-switch-skipped',
                reason: 'manual-tab-switch-flag-set',
                widgetId: props.widgetId,
                queryItemConfigId: queryItem.configId,
                activeTab,
                resultCount,
                queryJustExecutedRef: queryJustExecutedRef.current,
                timestamp: Date.now()
            });
            return;
        }
        // FORCED: Always use SimpleList - we're done with lazy loading issues
        // Records are available immediately, so we can switch as soon as resultCount > 0
        const isSimpleList = true;
        // ONLY auto-switch when:
        // 1. A query was just executed (queryJustExecutedRef.current === true)
        // 2. We have results (resultCount > 0)
        // 3. Records are actually loaded:
        //    - For SimpleList: resultCount > 0 is sufficient (records available immediately)
        //    - For LazyLoad: recordsRef.current must have data (wait for lazy loading)
        // 4. We're currently on the query tab (don't switch if already on results)
        const hasRecords = isSimpleList
            ? resultCount > 0
            : (recordsRef.current && recordsRef.current.length > 0);
        debugLogger.log('TASK', {
            event: 'auto-switch-check',
            widgetId: props.widgetId,
            queryItemConfigId: queryItem.configId,
            activeTab,
            resultCount,
            queryJustExecutedRef: queryJustExecutedRef.current,
            isSimpleList,
            pagingTypeInConfig,
            hasRecords,
            recordsRefLength: ((_a = recordsRef.current) === null || _a === void 0 ? void 0 : _a.length) || 0,
            manualTabSwitchRef: manualTabSwitchRef.current,
            willAutoSwitch: queryJustExecutedRef.current && resultCount > 0 && hasRecords && activeTab === 'query',
            timestamp: Date.now()
        });
        if (queryJustExecutedRef.current &&
            resultCount > 0 &&
            hasRecords &&
            activeTab === 'query') {
            debugLogger.log('TASK', {
                event: 'auto-switch-triggered',
                widgetId: props.widgetId,
                queryItemConfigId: queryItem.configId,
                fromTab: activeTab,
                toTab: 'results',
                resultCount,
                timestamp: Date.now()
            });
            setActiveTab('results');
            queryJustExecutedRef.current = false; // Reset after switching
            debugLogger.log('TASK', {
                event: 'auto-switch-completed',
                widgetId: props.widgetId,
                queryItemConfigId: queryItem.configId,
                queryJustExecutedRefReset: queryJustExecutedRef.current,
                timestamp: Date.now()
            });
        }
    }, [resultCount, activeTab, pagingTypeInConfig]);
    // Verify dropdowns are synchronized with hash parameter when present
    // This is especially important for grouped queries where dropdowns need to be synchronized
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a, _b;
        // Only verify if we have a hash parameter
        if (!initialInputValue || !queryItem.shortId) {
            return;
        }
        // Verify the current queryItem matches what we expect from hash parameter
        const expectedShortId = queryItem.shortId;
        const isGroupedQuery = queryItem.groupId !== null && queryItem.groupId !== undefined;
        // Check if dropdowns are correctly set for grouped queries
        if (isGroupedQuery) {
            const expectedGroupId = queryItem.groupId;
            const actualGroupId = selectedGroupId;
            const expectedQueryIndex = selectedGroupQueryIndex;
            if (expectedGroupId !== actualGroupId) {
                debugLogger.log('GROUP', {
                    event: 'dropdown-group-mismatch',
                    expectedGroupId,
                    actualGroupId,
                    queryItemShortId: expectedShortId,
                    warning: 'First dropdown may not be synchronized with hash parameter'
                });
            }
            else if (expectedQueryIndex !== undefined) {
                // Verify the query index within the group matches
                const groupItems = (_a = groups === null || groups === void 0 ? void 0 : groups[expectedGroupId]) === null || _a === void 0 ? void 0 : _a.items;
                if (groupItems && groupItems.length > expectedQueryIndex) {
                    const expectedQueryConfigId = (_b = groupItems[expectedQueryIndex]) === null || _b === void 0 ? void 0 : _b.configId;
                    const actualQueryConfigId = queryItem.configId;
                    if (expectedQueryConfigId !== actualQueryConfigId) {
                        debugLogger.log('GROUP', {
                            event: 'dropdown-query-index-mismatch',
                            expectedQueryConfigId,
                            actualQueryConfigId,
                            expectedQueryIndex,
                            queryItemShortId: expectedShortId,
                            warning: 'Second dropdown may not be synchronized with hash parameter'
                        });
                    }
                    else {
                        debugLogger.log('GROUP', {
                            event: 'dropdowns-synchronized',
                            queryItemShortId: expectedShortId,
                            groupId: expectedGroupId,
                            selectedGroupQueryIndex: expectedQueryIndex,
                            note: 'Dropdowns synchronized with hash parameter'
                        });
                    }
                }
            }
        }
        else {
            // Ungrouped query - verify it's selected
            debugLogger.log('GROUP', {
                event: 'dropdowns-synchronized-ungrouped',
                queryItemShortId: expectedShortId,
                note: 'Ungrouped query dropdown synchronized with hash parameter'
            });
        }
    }, [initialInputValue, queryItem.shortId, queryItem.groupId, queryItem.configId, selectedGroupId, selectedGroupQueryIndex, groups]);
    const useOutputDs = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)({
        dataSourceId: queryItem.outputDataSourceId,
        mainDataSourceId: queryItem.outputDataSourceId
    }), [queryItem.outputDataSourceId]);
    const updateDataSource = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((ds) => {
        var _a, _b;
        const currentDs = ds !== null && ds !== void 0 ? ds : dataSource;
        // should disable spatial filter if the dataSource is an output ds and it already has spatial filter
        if ((_a = currentDs === null || currentDs === void 0 ? void 0 : currentDs.getDataSourceJson()) === null || _a === void 0 ? void 0 : _a.isOutputFromWidget) {
            const qDs = currentDs;
            const qParams = (_b = qDs.getCurrentQueryParams) === null || _b === void 0 ? void 0 : _b.call(qDs);
            if (qParams.geometry != null) {
                setSpatialFilterEnabled(false);
            }
            else {
                setSpatialFilterEnabled(true);
            }
        }
    }, [dataSource]);
    const handleStatusChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((enabled) => {
        setEnabled(enabled);
        updateDataSource();
    }, [updateDataSource]);
    const handleOutputDataSourceInfoChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((info, preInfo) => {
        const outputId = queryItem.outputDataSourceId;
        const filter = (info === null || info === void 0 ? void 0 : info.widgetQueries) ? info.widgetQueries[`setFilter-${outputId}`] : null;
        if (filter == null) { // filter is null means there are incomplete queries, ignore this change
            return;
        }
        const preFilter = (preInfo === null || preInfo === void 0 ? void 0 : preInfo.widgetQueries) ? preInfo.widgetQueries[`setFilter-${outputId}`] : null;
        if ((filter === null || filter === void 0 ? void 0 : filter.where) !== (preFilter === null || preFilter === void 0 ? void 0 : preFilter.where)) {
            setDataActionFilter(filter);
        }
    }, [queryItem.outputDataSourceId]);
    const publishDataClearedMsg = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => __awaiter(this, void 0, void 0, function* () {
        if (!outputDS)
            return;
        const dataRecordSetChangeMessage = new jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataRecordSetChangeMessage(props.widgetId, jimu_core__WEBPACK_IMPORTED_MODULE_1__.RecordSetChangeType.Remove, [outputDS.id]);
        jimu_core__WEBPACK_IMPORTED_MODULE_1__.MessageManager.getInstance().publishMessage(dataRecordSetChangeMessage);
        yield jimu_core__WEBPACK_IMPORTED_MODULE_1__.MessageManager.getInstance().publishMessage(new jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataRecordsSelectionChangeMessage(props.widgetId, [], [outputDS.id]));
    }), [props.widgetId, outputDS]);
    /**
     * Clears all query results from the UI and map.
     * This is the single source of truth for clearing results.
     * It clears the records, resets the result count, clears selection from the map,
     * publishes a cleared message to the map, switches back to the Query tab,
     * and increments the query execution key to force QueryTaskResult to remount with fresh state.
     */
    const clearResult = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((...args_1) => __awaiter(this, [...args_1], void 0, function* (reason = 'unknown') {
        debugLogger.log('TASK', {
            event: 'clearResult-called',
            widgetId: props.widgetId,
            hasOutputDS: !!outputDS,
            reason,
            timestamp: Date.now()
        });
        recordsRef.current = null;
        outputDS === null || outputDS === void 0 ? void 0 : outputDS.setStatus(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.NotReady);
        setResultCount(0);
        // NOTE: Graphics layer clearing is now handled inside clearSelectionInDataSources
        // called below. We ensure this is awaited to prevent race conditions.
        // Clear selection directly from data source using utility function
        try {
            yield (0,_selection_utils__WEBPACK_IMPORTED_MODULE_17__.clearSelectionInDataSources)(props.widgetId, outputDS, useGraphicsLayerForHighlight, graphicsLayer);
            debugLogger.log('TASK', {
                event: 'clearResult-selection-cleared',
                widgetId: props.widgetId,
                timestamp: Date.now()
            });
        }
        catch (error) {
            debugLogger.log('TASK', {
                event: 'clearResult-selection-clear-failed',
                widgetId: props.widgetId,
                error: error instanceof Error ? error.message : String(error),
                timestamp: Date.now()
            });
        }
        // Clear widget-level accumulated records when clearing results
        if (onAccumulatedRecordsChange) {
            onAccumulatedRecordsChange([]);
            debugLogger.log('RESULTS-MODE', {
                event: 'accumulated-records-cleared-on-clear-results',
                widgetId: props.widgetId
            });
        }
        yield publishDataClearedMsg();
        // Switch back to Query tab when clearing results
        setActiveTab('query');
        setStage(0);
        hasSelectedRecordsRef.current = false; // Reset selection flag when clearing
        // Increment query execution key to force QueryTaskResult remount with fresh state
        queryExecutionKeyRef.current += 1;
        // Clear error states when clearing results
        setSelectionError(null);
        setZoomError(null);
        debugLogger.log('TASK', {
            event: 'clearResult-complete',
            widgetId: props.widgetId,
            timestamp: Date.now()
        });
    }), [outputDS, publishDataClearedMsg, props.widgetId, queryItem.configId, onAccumulatedRecordsChange, useGraphicsLayerForHighlight, graphicsLayer]);
    /**
     * Handles data source creation when switching between query items.
     * When a new query item is selected (e.g., switching from Parcel to Major),
     * this clears old results to ensure all cleanup logic runs properly.
     *
     * @param ds - The newly created data source for the selected query item
     */
    const handleDataSourceCreated = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((ds) => __awaiter(this, void 0, void 0, function* () {
        debugLogger.log('TASK', {
            event: 'handleDataSourceCreated-start',
            widgetId: props.widgetId,
            resultsMode,
            timestamp: Date.now()
        });
        // In "Add to" and "Remove from" modes, preserve accumulated records and selection - don't clear
        if ((resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection || resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection)
            && accumulatedRecords && accumulatedRecords.length > 0) {
            debugLogger.log('RESULTS-MODE', {
                event: 'preserving-selection-on-query-switch-handleDataSourceCreated',
                widgetId: props.widgetId,
                resultsMode,
                accumulatedRecordsCount: accumulatedRecords.length
            });
            setDataSource(ds);
            updateDataSource(ds);
            setStage(0);
            setActiveTab('query');
            return; // Skip clearing - preserve selection
        }
        // For "New" mode, clear old results
        debugLogger.log('TASK', {
            event: 'handleDataSourceCreated-clearing-results-for-new-mode',
            widgetId: props.widgetId,
            timestamp: Date.now()
        });
        yield clearResult('handleDataSourceCreated-new-mode');
        setDataSource(ds);
        updateDataSource(ds);
        setStage(0);
        setActiveTab('query'); // Return to Query tab when switching queries
    }), [updateDataSource, clearResult, resultCount, resultsMode, accumulatedRecords, props.widgetId]);
    const handleOutputDataSourceCreated = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((ds) => __awaiter(this, void 0, void 0, function* () {
        var _a, _b, _c, _d, _e, _f, _g, _h;
        setOutputDS(ds);
        // CHECK rootDataSource.map to see how framework accesses map view
        try {
            const originDataSources = ds.getOriginDataSources();
            const originDS = originDataSources === null || originDataSources === void 0 ? void 0 : originDataSources[0];
            if (originDS) {
                const rootDS = originDS.getRootDataSource();
                if (rootDS) {
                    // Expose rootDS to window for console inspection
                    ;
                    window.__querySimpleRootDS = rootDS;
                    window.__querySimpleRootDSMap = rootDS.map;
                    window.__querySimpleOriginDS = originDS;
                    debugLogger.log('GRAPHICS-LAYER', {
                        event: 'check-root-datasource-map',
                        widgetId: props.widgetId,
                        outputDSId: ds.id,
                        originDSId: originDS.id,
                        rootDSId: rootDS.id,
                        rootDSType: rootDS.type,
                        hasRootDSMap: !!rootDS.map,
                        rootDSMapType: rootDS.map ? typeof rootDS.map : 'none',
                        rootDSMapId: ((_a = rootDS.map) === null || _a === void 0 ? void 0 : _a.id) || 'none',
                        hasRootDSMapView: !!((_b = rootDS.map) === null || _b === void 0 ? void 0 : _b.view),
                        hasRootDSMapViews: !!((_c = rootDS.map) === null || _c === void 0 ? void 0 : _c.views),
                        rootDSMapViewsLength: ((_e = (_d = rootDS.map) === null || _d === void 0 ? void 0 : _d.views) === null || _e === void 0 ? void 0 : _e.length) || 0,
                        // Log some map properties if it exists
                        rootDSMapKeys: rootDS.map ? Object.keys(rootDS.map).filter(key => !key.startsWith('_') &&
                            typeof rootDS.map[key] !== 'function').slice(0, 20) : [],
                        // Log that objects are available on window for console inspection
                        consoleInspection: 'Check window.__querySimpleRootDS, window.__querySimpleRootDSMap, window.__querySimpleOriginDS',
                        timestamp: Date.now()
                    });
                    // If map exists, check its view
                    const rootMap = rootDS.map;
                    if (rootMap) {
                        const view = rootMap.view ||
                            ((_g = (_f = rootMap.views) === null || _f === void 0 ? void 0 : _f.getItemAt) === null || _g === void 0 ? void 0 : _g.call(_f, 0)) ||
                            (((_h = rootMap.views) === null || _h === void 0 ? void 0 : _h.length) > 0 ? rootMap.views[0] : null);
                        debugLogger.log('GRAPHICS-LAYER', {
                            event: 'check-root-datasource-map-view',
                            widgetId: props.widgetId,
                            hasView: !!view,
                            viewType: (view === null || view === void 0 ? void 0 : view.type) || 'none',
                            viewId: (view === null || view === void 0 ? void 0 : view.id) || 'none',
                            timestamp: Date.now()
                        });
                    }
                }
            }
        }
        catch (error) {
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'check-root-datasource-map-error',
                widgetId: props.widgetId,
                error: error instanceof Error ? error.message : String(error),
                errorStack: error instanceof Error ? error.stack : undefined,
                timestamp: Date.now()
            });
        }
        // Initialize graphics layer lazily if enabled and not already initialized
        if (useGraphicsLayerForHighlight && onInitializeGraphicsLayer) {
            yield onInitializeGraphicsLayer(ds);
            // After initialization, graphicsLayer and mapView props should be updated
            // But since props come from refs, we need to wait for widget re-render
            // For now, use the props that will be updated on next render
        }
        // If in "Add to" or "Remove from" mode and we have accumulated records, re-select them
        // This uses the same logic as after query completion - selectRecordsAndPublish
        // This ensures records are selected both on the map and in the Results tab
        if ((resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection || resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection)
            && accumulatedRecords && accumulatedRecords.length > 0) {
            // Use a delay to ensure the DS is fully ready and graphics layer props are updated after widget re-render
            // If graphics layer was just initialized, wait a bit longer for props to update
            const delay = (useGraphicsLayerForHighlight && onInitializeGraphicsLayer) ? 200 : 100;
            setTimeout(() => {
                const featureDS = ds;
                if (featureDS && accumulatedRecords && accumulatedRecords.length > 0) {
                    const recordIds = accumulatedRecords.map(record => record.getId());
                    (() => __awaiter(this, void 0, void 0, function* () {
                        try {
                            yield (0,_selection_utils__WEBPACK_IMPORTED_MODULE_17__.selectRecordsAndPublish)(props.widgetId, featureDS, recordIds, accumulatedRecords, false, useGraphicsLayerForHighlight, graphicsLayer, mapView);
                            // Update recordsRef so results tab shows accumulated records
                            recordsRef.current = accumulatedRecords;
                            setResultCount(accumulatedRecords.length);
                            debugLogger.log('RESULTS-MODE', {
                                event: 're-selected-accumulated-records-after-query-switch',
                                widgetId: props.widgetId,
                                outputDSId: featureDS.id,
                                recordsCount: accumulatedRecords.length
                            });
                            // Verify what's actually selected in the DS after a delay
                            setTimeout(() => {
                                var _a;
                                const ds = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().getDataSource(featureDS.id);
                                const selectedInDS = ds === null || ds === void 0 ? void 0 : ds.getSelectedRecords();
                                const selectedIdsInDS = (_a = ds === null || ds === void 0 ? void 0 : ds.getSelectedRecordIds()) !== null && _a !== void 0 ? _a : [];
                                debugLogger.log('RESULTS-MODE', {
                                    event: 'verify-records-after-reselection',
                                    widgetId: props.widgetId,
                                    outputDSId: featureDS.id,
                                    expectedCount: accumulatedRecords.length,
                                    actualSelectedInDS: (selectedInDS === null || selectedInDS === void 0 ? void 0 : selectedInDS.length) || 0,
                                    selectedIdsInDS: selectedIdsInDS.length,
                                    recordsMatch: (selectedInDS === null || selectedInDS === void 0 ? void 0 : selectedInDS.length) === accumulatedRecords.length
                                });
                            }, 200);
                        }
                        catch (error) {
                            debugLogger.log('RESULTS-MODE', {
                                event: 're-selection-failed-after-switch',
                                widgetId: props.widgetId,
                                error: error instanceof Error ? error.message : 'Unknown error',
                                errorStack: error instanceof Error ? error.stack : undefined
                            });
                        }
                    }))();
                }
            }, 100);
        }
    }), [resultsMode, accumulatedRecords, props.widgetId, useGraphicsLayerForHighlight, onInitializeGraphicsLayer]);
    // Clear results when query item changes (e.g., when new hash parameter triggers different query)
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        // Only clear if we're actually switching to a different query (not just re-rendering)
        const isSwitchingQueries = previousConfigIdRef.current !== queryItem.configId;
        // Only clear results when switching queries if we're in "New" mode
        // In "Add to" and "Remove from" modes, we want to preserve accumulated records across query switches
        if (isSwitchingQueries && resultCount > 0 && resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection) {
            // Store the old configId before updating
            const oldConfigId = previousConfigIdRef.current;
            // Update the ref to track the new query
            previousConfigIdRef.current = queryItem.configId;
            debugLogger.log('RESULTS-MODE', {
                event: 'clearing-results-on-query-switch-new-mode',
                widgetId: props.widgetId,
                oldConfigId,
                newConfigId: queryItem.configId,
                resultsMode
            });
            // Clear immediately when switching queries, but wrap in try-catch to handle
            // race conditions with feature info windows that might be rendering
            try {
                clearResult('query-item-switch-new-mode');
            }
            catch (error) {
                // Log for debugging but don't show to user (framework race condition)
                // The error is in framework code (feature-info.tsx), not our code
                // This can happen if feature-info.tsx is trying to appendChild to a DOM element
                // that gets removed when we clear selection
                debugLogger.log('TASK', {
                    event: 'clear-result-race-condition',
                    error: error instanceof Error ? error.message : String(error),
                    note: 'Likely race condition with feature-info.tsx'
                });
                if (true) {
                    console.warn('Error clearing results (likely race condition with feature info):', error);
                }
                // Don't set error state - this is expected in some scenarios
            }
        }
        else if (isSwitchingQueries) {
            // Just update the ref - don't clear results if in "Add to" or "Remove from" mode or no results
            previousConfigIdRef.current = queryItem.configId;
            if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection || resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection) {
                debugLogger.log('RESULTS-MODE', {
                    event: 'preserving-accumulated-records-on-query-switch',
                    widgetId: props.widgetId,
                    resultsMode,
                    oldConfigId: previousConfigIdRef.current,
                    newConfigId: queryItem.configId,
                    accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0
                });
            }
        }
    }, [queryItem.configId, clearResult, resultCount, resultsMode, accumulatedRecords, props.widgetId]);
    const navToForm = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((...args_1) => __awaiter(this, [...args_1], void 0, function* (clearResults = false) {
        if (clearResults) {
            // Use the centralized clearResult method instead of duplicating logic
            yield clearResult('navToForm-clearResults');
            return;
        }
        // Switch to query tab but don't clear results unless explicitly requested
        // Mark as manual switch to prevent auto-switch useEffect from interfering
        manualTabSwitchRef.current = true;
        setActiveTab('query');
        // Reset the flag after a short delay
        setTimeout(() => {
            manualTabSwitchRef.current = false;
        }, 100);
        // Only change stage if we're clearing results
        // Otherwise, keep stage at 1 (results available) so results persist
        if (!clearResults && resultCount > 0) {
            setStage(1); // Keep results available
        }
        jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.defer(() => {
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.focusElementInKeyboardMode)(backBtnRef.current);
        });
    }), [clearResult, resultCount]);
    /**
     * Handles tab switching between Query and Results tabs.
     * Tab switching preserves results state - results remain visible and selected
     * when switching between tabs. Results are only cleared when explicitly
     * clicking the trash can button or when starting a new query.
     *
     * @param tab - The tab to switch to ('query' | 'results')
     * @param event - Optional mouse event to prevent default behavior
     */
    const handleTabChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((tab, event) => {
        debugLogger.log('TASK', {
            event: 'tab-change',
            tab,
            currentTab: activeTab,
            resultCount,
            eventType: event === null || event === void 0 ? void 0 : event.type
        });
        if (event) {
            event.preventDefault();
            event.stopPropagation();
        }
        // Don't allow switching to results if there are no results
        if (tab === 'results' && resultCount === 0) {
            debugLogger.log('TASK', {
                event: 'tab-change-blocked',
                reason: 'no-results',
                tab,
                resultCount
            });
            return;
        }
        // Mark this as a manual switch to prevent auto-switch useEffect from interfering
        manualTabSwitchRef.current = true;
        setActiveTab(tab);
        // Reset the flag after a short delay to allow the state update to complete
        // This prevents the auto-switch useEffect from immediately switching back
        setTimeout(() => {
            manualTabSwitchRef.current = false;
        }, 100);
        // Don't change stage here - just switch the view
        // Stage should remain at 1 (results available) when switching between tabs
    }, [resultCount, activeTab]);
    /**
     * Internal implementation of handleFormSubmit (without waiting logic)
     * This is called either directly or after hash value conversion
     *
     * @param sqlExpr - The SQL expression for attribute filtering
     * @param spatialFilter - The spatial filter object
     * @param runtimeZoomToSelected - Optional runtime override for zoom-to-selected behavior
     */
    const handleFormSubmitInternal = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((sqlExpr, spatialFilter, runtimeZoomToSelected) => __awaiter(this, void 0, void 0, function* () {
        var _a, _b, _c, _d, _e;
        // Clear previous errors when starting a new query
        setSelectionError(null);
        setZoomError(null);
        debugLogger.log('TASK', {
            event: 'handleFormSubmitInternal-executing',
            widgetId: props.widgetId,
            resultsMode,
            timestamp: Date.now()
        });
        // Store the runtime zoom override for use by Add to Map action
        lastRuntimeZoomToSelectedRef.current = runtimeZoomToSelected;
        attributeFilterSqlExprObj.current = sqlExpr;
        spatialFilterObj.current = spatialFilter;
        // Load the first page
        const featureDS = outputDS;
        // For "Add to" and "Remove from" modes, use widget-level accumulated records
        // These persist across query switches, unlike query-item-level records
        let existingRecordsForMerge = [];
        if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection || resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection) {
            // Robust capture strategy:
            // 1. Try records from props (already merged by parent)
            // 2. Fallback to currently selected records in DS (captured during mode switch)
            const fromProp = accumulatedRecords || [];
            const fromDS = (outputDS === null || outputDS === void 0 ? void 0 : outputDS.getSelectedRecords()) || [];
            existingRecordsForMerge = fromProp.length > 0 ? fromProp : fromDS;
            debugLogger.log('RESULTS-MODE', {
                event: 'captured-existing-records-diagnostic',
                widgetId: props.widgetId,
                resultsMode,
                fromPropCount: fromProp.length,
                fromDSCount: fromDS.length,
                finalCapturedCount: existingRecordsForMerge.length,
                firstRecordId: ((_b = (_a = existingRecordsForMerge[0]) === null || _a === void 0 ? void 0 : _a.getId) === null || _b === void 0 ? void 0 : _b.call(_a)) || 'none',
                allRecordIds: existingRecordsForMerge.map(r => { var _a; return (_a = r.getId) === null || _a === void 0 ? void 0 : _a.call(r); }).slice(0, 10),
                outputDSId: outputDS.id,
                timestamp: Date.now()
            });
        }
        // For "New" mode, clear old results and graphics layer
        // We call clearResult() directly and AWAIT it to ensure it's finished before query execution starts
        if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection) {
            debugLogger.log('TASK', {
                event: 'handleFormSubmit-clearing-results-for-new-mode',
                widgetId: props.widgetId,
                timestamp: Date.now()
            });
            yield clearResult('handleFormSubmit-new-mode');
        }
        // Set loading stage
        setStage(2);
        // FORCED: Always use SimpleList - fetch ALL records, not just a page
        // Use data source's max record count, or fall back to a large number (10000)
        const maxRecordCount = (_e = (_d = (_c = featureDS).getMaxRecordCount) === null || _d === void 0 ? void 0 : _d.call(_c)) !== null && _e !== void 0 ? _e : 10000;
        let pageSize = maxRecordCount;
        const queryParams = (0,_query_utils__WEBPACK_IMPORTED_MODULE_12__.generateQueryParams)(featureDS, sqlExpr, spatialFilter, currentItem, 1, pageSize);
        queryParamRef.current = queryParams;
        debugLogger.log('TASK', {
            event: 'handleFormSubmit-executing-query',
            widgetId: props.widgetId,
            where: queryParams.where,
            resultsMode,
            timestamp: Date.now()
        });
        // Change output ds status to unloaded before use it to load count/records.
        featureDS.setStatus(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.Unloaded);
        featureDS.setCountStatus(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.Unloaded);
        let queryResultCount = 0; // Capture count from records to use in finally block
        const startTime = performance.now();
        debugLogger.log('TASK', {
            event: 'perf-query-chain-start',
            widgetId: props.widgetId,
            resultsMode,
            where: queryParams.where,
            timestamp: Date.now()
        });
        // PERFORMANCE OPTIMIZATION: Removed redundant executeCountQuery() round-trip.
        // Since we fetch ALL records (pageSize = maxRecordCount), we can just use records.length.
        featureDS.updateQueryParams(queryParamRef.current, props.widgetId);
        const fetchStartTime = performance.now();
        (0,_query_utils__WEBPACK_IMPORTED_MODULE_12__.executeQuery)(props.widgetId, queryItem, featureDS, queryParamRef.current)
            .then((result) => __awaiter(this, void 0, void 0, function* () {
            var _a, _b, _c;
            const fetchDurationMs = Math.round(performance.now() - fetchStartTime);
            const processingStartTime = performance.now();
            queryResultCount = ((_a = result.records) === null || _a === void 0 ? void 0 : _a.length) || 0;
            debugLogger.log('RESULTS-MODE', {
                event: 'query-execution-complete',
                widgetId: props.widgetId,
                resultsMode,
                recordsReturned: queryResultCount,
                fetchDurationMs,
                existingCapturedCount: existingRecordsForMerge.length,
                timestamp: Date.now()
            });
            let recordsToDisplay = result.records || [];
            let dsToUse = outputDS;
            // Handle "Add to" mode: merge new results with widget-level accumulated records
            if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection && result.records && result.records.length > 0) {
                try {
                    debugLogger.log('RESULTS-MODE', {
                        event: 'add-mode-starting-merge-diagnostic',
                        widgetId: props.widgetId,
                        existingCount: existingRecordsForMerge.length,
                        existingIds: existingRecordsForMerge.map(r => { var _a; return (_a = r.getId) === null || _a === void 0 ? void 0 : _a.call(r); }).slice(0, 5),
                        newCount: result.records.length,
                        newIds: result.records.map((r) => { var _a; return (_a = r.getId) === null || _a === void 0 ? void 0 : _a.call(r); }).slice(0, 5),
                        timestamp: Date.now()
                    });
                    // Merge new query results with widget-level accumulated records
                    const mergedRecords = (0,_results_management_utils__WEBPACK_IMPORTED_MODULE_13__.mergeResultsIntoAccumulated)(outputDS, // Use outputDS for key generation
                    result.records, existingRecordsForMerge // Use consistently captured records
                    );
                    recordsToDisplay = mergedRecords;
                    // Update widget-level accumulated records so they persist across query switches
                    if (onAccumulatedRecordsChange) {
                        onAccumulatedRecordsChange(mergedRecords);
                    }
                    debugLogger.log('RESULTS-MODE', {
                        event: 'add-mode-merge-complete-diagnostic',
                        widgetId: props.widgetId,
                        mergedRecordsCount: mergedRecords.length,
                        mergedIds: mergedRecords.map(r => { var _a; return (_a = r.getId) === null || _a === void 0 ? void 0 : _a.call(r); }).slice(0, 10),
                        timestamp: Date.now()
                    });
                }
                catch (error) {
                    debugLogger.log('RESULTS-MODE', {
                        event: 'add-mode-error',
                        widgetId: props.widgetId,
                        error: error instanceof Error ? error.message : 'Unknown error',
                        errorStack: error instanceof Error ? error.stack : undefined
                    });
                    // Fall back to normal behavior on error
                    recordsToDisplay = result.records;
                }
            }
            else if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection) {
                // Handle "Remove from" mode: remove matching records from widget-level accumulated records
                try {
                    debugLogger.log('RESULTS-MODE', {
                        event: 'remove-mode-starting-merge',
                        widgetId: props.widgetId,
                        existingCount: existingRecordsForMerge.length,
                        removeCount: ((_b = result.records) === null || _b === void 0 ? void 0 : _b.length) || 0
                    });
                    // Check if we have accumulated records to remove from
                    if (existingRecordsForMerge.length === 0) {
                        debugLogger.log('RESULTS-MODE', {
                            event: 'remove-mode-no-accumulated-records',
                            widgetId: props.widgetId,
                            queryRecordsCount: ((_c = result.records) === null || _c === void 0 ? void 0 : _c.length) || 0,
                            note: 'No accumulated records to remove from - no-op'
                        });
                        // No accumulated records, so nothing to remove - show empty results
                        recordsToDisplay = [];
                    }
                    else if (result.records && result.records.length > 0) {
                        // Remove matching records from accumulated records
                        const remainingRecords = (0,_results_management_utils__WEBPACK_IMPORTED_MODULE_13__.removeResultsFromAccumulated)(outputDS, // Use outputDS for key generation
                        result.records, existingRecordsForMerge // Use consistently captured records
                        );
                        recordsToDisplay = remainingRecords;
                        // Update widget-level accumulated records
                        if (onAccumulatedRecordsChange) {
                            onAccumulatedRecordsChange(remainingRecords);
                        }
                        // Remove records from origin data source selections (map highlighting)
                        // Also removes graphics from graphics layer if using graphics layer highlighting
                        (0,_results_management_utils__WEBPACK_IMPORTED_MODULE_13__.removeRecordsFromOriginSelections)(props.widgetId, result.records, outputDS, useGraphicsLayerForHighlight, graphicsLayer);
                        debugLogger.log('RESULTS-MODE', {
                            event: 'remove-mode-complete',
                            widgetId: props.widgetId,
                            existingAccumulatedRecordsCount: existingRecordsForMerge.length,
                            queryRecordsCount: result.records.length,
                            remainingRecordsCount: remainingRecords.length,
                            recordsRemoved: existingRecordsForMerge.length - remainingRecords.length,
                            outputDSId: outputDS.id,
                            widgetLevelRecordsUpdated: true,
                            originSelectionsUpdated: true
                        });
                        // If all records removed, auto-clear (consistent with user expectation)
                        if (remainingRecords.length === 0) {
                            debugLogger.log('RESULTS-MODE', {
                                event: 'remove-mode-all-records-removed',
                                widgetId: props.widgetId,
                                note: 'All accumulated records removed - auto-clearing'
                            });
                            // Clear widget-level accumulated records
                            if (onAccumulatedRecordsChange) {
                                onAccumulatedRecordsChange([]);
                            }
                        }
                    }
                    else {
                        // Query returned no results - nothing to remove
                        debugLogger.log('RESULTS-MODE', {
                            event: 'remove-mode-no-query-results',
                            widgetId: props.widgetId,
                            existingAccumulatedRecordsCount: existingRecordsForMerge.length,
                            note: 'Query returned no results - no records to remove'
                        });
                        // Keep existing accumulated records displayed
                        recordsToDisplay = existingRecordsForMerge;
                    }
                }
                catch (error) {
                    debugLogger.log('RESULTS-MODE', {
                        event: 'remove-mode-error',
                        widgetId: props.widgetId,
                        error: error instanceof Error ? error.message : 'Unknown error',
                        errorStack: error instanceof Error ? error.stack : undefined
                    });
                    // Fall back to showing query results on error
                    recordsToDisplay = result.records || [];
                }
            }
            else if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection) {
                // For "New" mode, clear widget-level accumulated records
                if (onAccumulatedRecordsChange) {
                    onAccumulatedRecordsChange([]);
                }
            }
            recordsRef.current = recordsToDisplay;
            // Reset selection flag for new query results
            hasSelectedRecordsRef.current = false;
            // Select records in the output DS
            // For "Add to" mode, select merged records
            // For "Remove from" mode, select remaining records (already updated via removeRecordsFromOriginSelections)
            // For "New" mode, select query results
            if (recordsToDisplay && recordsToDisplay.length > 0 && dsToUse) {
                const recordIdsToSelect = recordsToDisplay.map(record => record.getId());
                // For "Remove from" mode, selection was already updated via removeRecordsFromOriginSelections
                // But we still need to select in the outputDS for widget state consistency
                if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection) {
                    // Selection was already updated in origin DSs via removeRecordsFromOriginSelections
                    // Just update outputDS selection for widget state consistency
                    try {
                        if (typeof dsToUse.selectRecordsByIds === 'function') {
                            dsToUse.selectRecordsByIds(recordIdsToSelect, recordsToDisplay);
                        }
                        hasSelectedRecordsRef.current = true;
                        debugLogger.log('RESULTS-MODE', {
                            event: 'remove-mode-output-ds-selection-updated',
                            widgetId: props.widgetId,
                            recordCount: recordsToDisplay.length
                        });
                    }
                    catch (error) {
                        debugLogger.log('RESULTS-MODE', {
                            event: 'remove-mode-output-ds-selection-error',
                            widgetId: props.widgetId,
                            error: error instanceof Error ? error.message : 'Unknown error'
                        });
                    }
                }
                else {
                    // For "Add to" and "New" modes, select records normally
                    setSelectionError(null) // Clear previous errors
                    ;
                    (() => __awaiter(this, void 0, void 0, function* () {
                        try {
                            yield (0,_selection_utils__WEBPACK_IMPORTED_MODULE_17__.selectRecordsAndPublish)(props.widgetId, dsToUse, recordIdsToSelect, recordsToDisplay, false, useGraphicsLayerForHighlight, graphicsLayer, mapView);
                            hasSelectedRecordsRef.current = true; // Mark as selected
                            // Dispatch custom selection event so Widget state is updated immediately
                            // This is crucial for hash-based execution where QueryTask handles selection
                            (0,_selection_utils__WEBPACK_IMPORTED_MODULE_17__.dispatchSelectionEvent)(props.widgetId, recordIdsToSelect, dsToUse, queryItem.configId);
                        }
                        catch (error) {
                            const errorMessage = error instanceof Error ? error.message : 'Failed to select query results';
                            setSelectionError(errorMessage);
                            debugLogger.log('TASK', {
                                event: 'selection-failed',
                                error: errorMessage,
                                errorStack: error instanceof Error ? error.stack : undefined,
                                recordCount: recordIdsToSelect.length
                            });
                        }
                    }))();
                }
            }
            else if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection && recordsToDisplay.length === 0) {
                // All records removed - clear selection
                ;
                (() => __awaiter(this, void 0, void 0, function* () {
                    try {
                        yield (0,_selection_utils__WEBPACK_IMPORTED_MODULE_17__.clearSelectionInDataSources)(props.widgetId, dsToUse, useGraphicsLayerForHighlight, graphicsLayer);
                        hasSelectedRecordsRef.current = false;
                        // Notify Widget that selection is cleared
                        (0,_selection_utils__WEBPACK_IMPORTED_MODULE_17__.dispatchSelectionEvent)(props.widgetId, [], dsToUse, queryItem.configId);
                        debugLogger.log('RESULTS-MODE', {
                            event: 'remove-mode-all-records-removed-selection-cleared',
                            widgetId: props.widgetId
                        });
                    }
                    catch (error) {
                        debugLogger.log('RESULTS-MODE', {
                            event: 'remove-mode-clear-selection-error',
                            widgetId: props.widgetId,
                            error: error instanceof Error ? error.message : 'Unknown error'
                        });
                    }
                }))();
            }
            // Mark that query just executed BEFORE updating resultCount
            // This ensures the auto-switch useEffect sees queryJustExecutedRef.current === true
            queryJustExecutedRef.current = true;
            debugLogger.log('TASK', {
                event: 'query-executed-flag-set',
                widgetId: props.widgetId,
                queryItemConfigId: queryItem.configId,
                resultsMode,
                recordsToDisplayCount: recordsToDisplay.length,
                queryResultCount,
                timestamp: Date.now()
            });
            // Update result count FIRST (before any parent callbacks that might cause re-renders)
            // For "Add to" and "Remove from" modes, use accumulated/remaining count
            // For "New" mode, use query count
            const newResultCount = resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection || resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection
                ? recordsToDisplay.length
                : queryResultCount;
            setResultCount(newResultCount);
            // INSTANT UI FIX (The "Spinner Bypass"): 
            // Decouple the "Retrieving results..." spinner from asynchronous actions like zooming. 
            // By calling setStage(1) now, the user sees the result list immediately while 
            // the map animation continues in the background.
            setStage(1);
            debugLogger.log('TASK', {
                event: 'perf-processing-complete',
                widgetId: props.widgetId,
                processingDurationMs: Math.round(performance.now() - processingStartTime),
                totalChainDurationMs: Math.round(performance.now() - startTime),
                newResultCount,
                resultsMode,
                timestamp: Date.now()
            });
            // Zoom to records using shared zoom utility (consistent padding behavior)
            // Use runtime preference if provided, otherwise fall back to config setting (defaults to true)
            const shouldZoom = runtimeZoomToSelected !== undefined
                ? runtimeZoomToSelected
                : (queryItem.zoomToSelected !== false);
            // Use the output DS and merged records
            const recordsForZoom = recordsToDisplay || result.records;
            const dsForZoom = dsToUse || outputDS;
            if (recordsForZoom && recordsForZoom.length > 0 && dsForZoom && shouldZoom) {
                // BUG-GRAPHICS-001: Zoom operations fail when graphics layer is disabled
                if (!mapView && !useGraphicsLayerForHighlight) {
                    debugLogger.log('BUG', {
                        bugId: 'BUG-GRAPHICS-001',
                        category: 'GRAPHICS',
                        event: 'zoom-operation-failed-graphics-layer-disabled',
                        widgetId: props.widgetId,
                        operation: 'query-result-zoom',
                        recordsCount: recordsForZoom.length,
                        description: 'Zoom operation attempted but mapView is unavailable because useGraphicsLayerForHighlight is disabled',
                        workaround: 'Enable useGraphicsLayerForHighlight in widget settings',
                        targetResolution: 'r019.0'
                    });
                }
                try {
                    yield zoomToRecords(recordsForZoom);
                }
                catch (error) {
                    const errorMessage = error instanceof Error ? error.message : 'Failed to zoom to features';
                    setZoomError(errorMessage);
                    debugLogger.log('ZOOM', {
                        event: 'zoom-goTo-error-query',
                        error: errorMessage,
                        errorStack: error instanceof Error ? error.stack : undefined
                    });
                    if (true) {
                        console.error('Error executing zoomToRecords', error);
                    }
                }
            }
            // NOW call onHashParameterUsed AFTER all UI updates and zoom operations complete
            // This prevents the parent re-render from interrupting the promise chain
            // This prevents hash parameters from re-executing when switching queries
            if (initialInputValue && queryItem.shortId && onHashParameterUsed) {
                debugLogger.log('HASH-EXEC', {
                    event: 'querytask-calling-onhashparameterused',
                    widgetId: props.widgetId,
                    queryItemConfigId: props.queryItem.configId,
                    queryItemShortId: queryItem.shortId,
                    initialInputValue,
                    timestamp: Date.now()
                });
                debugLogger.log('TASK', {
                    event: 'hash-query-executed-notifying-parent',
                    widgetId: props.widgetId,
                    queryItemConfigId: queryItem.configId,
                    queryItemShortId: queryItem.shortId,
                    initialInputValue,
                    timestamp: Date.now()
                });
                onHashParameterUsed(queryItem.shortId);
                debugLogger.log('HASH-EXEC', {
                    event: 'querytask-onhashparameterused-called',
                    widgetId: props.widgetId,
                    queryItemConfigId: props.queryItem.configId,
                    queryItemShortId: queryItem.shortId,
                    timestamp: Date.now()
                });
                // Fire event to notify HelperSimple that hash query execution is complete
                // This allows HelperSimple to track which hash parameters have been executed
                // to prevent re-execution when switching queries
                const hashParam = `${queryItem.shortId}=${initialInputValue}`;
                const executedEvent = new CustomEvent(QUERYSIMPLE_HASH_QUERY_EXECUTED_EVENT, {
                    detail: {
                        widgetId: props.widgetId,
                        shortId: queryItem.shortId,
                        value: initialInputValue,
                        hashParam
                    },
                    bubbles: true,
                    cancelable: true
                });
                window.dispatchEvent(executedEvent);
                debugLogger.log('HASH-EXEC', {
                    event: 'querytask-hash-query-executed-event-dispatched',
                    widgetId: props.widgetId,
                    queryItemConfigId: queryItem.configId,
                    queryItemShortId: queryItem.shortId,
                    initialInputValue,
                    hashParam,
                    timestamp: Date.now()
                });
            }
            return Promise.resolve(true);
        }))
            .catch(error => {
            debugLogger.log('TASK', {
                event: 'query-chain-failed-diagnostic',
                widgetId: props.widgetId,
                error: error instanceof Error ? error.message : String(error),
                errorStack: error instanceof Error ? error.stack : undefined,
                timestamp: Date.now()
            });
            setStage(1); // Return to results or form stage even on error
        })
            .finally(() => {
            if ((spatialFilter === null || spatialFilter === void 0 ? void 0 : spatialFilter.layer) && (spatialFilter === null || spatialFilter === void 0 ? void 0 : spatialFilter.clearAfterApply)) {
                spatialFilter.layer.removeAll();
            }
            // setStage(1) // Removed from here; now called in the main chain before background actions
        });
    }), [currentItem, queryItem, props.widgetId, outputDS, publishDataClearedMsg, clearResult, resultsMode, accumulatedRecords, onAccumulatedRecordsChange, onClearGraphicsLayer, mapView, useGraphicsLayerForHighlight, zoomToRecords]);
    // Listen for hash value conversion event and execute pending query
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        const handleHashValueConverted = (event) => {
            var _a, _b, _c, _d, _e, _f, _g;
            debugLogger.log('TASK', {
                event: 'hash-value-converted-event-received',
                widgetId: props.widgetId,
                eventWidgetId: (_a = event.detail) === null || _a === void 0 ? void 0 : _a.widgetId,
                eventConfigId: (_b = event.detail) === null || _b === void 0 ? void 0 : _b.configId,
                matchesWidget: ((_c = event.detail) === null || _c === void 0 ? void 0 : _c.widgetId) === props.widgetId,
                hasPendingQuery: !!pendingHashQueryRef.current,
                timestamp: Date.now()
            });
            // Only process events for this widget
            if (((_d = event.detail) === null || _d === void 0 ? void 0 : _d.widgetId) !== props.widgetId) {
                debugLogger.log('TASK', {
                    event: 'hash-value-converted-event-ignored-wrong-widget',
                    widgetId: props.widgetId,
                    eventWidgetId: (_e = event.detail) === null || _e === void 0 ? void 0 : _e.widgetId,
                    timestamp: Date.now()
                });
                return;
            }
            if (pendingHashQueryRef.current) {
                debugLogger.log('TASK', {
                    event: 'hash-value-converted-executing-pending-query',
                    widgetId: props.widgetId,
                    configId: event.detail.configId,
                    initialInputValue: event.detail.initialInputValue,
                    timestamp: Date.now()
                });
                const { sqlExpr, spatialFilter, runtimeZoomToSelected } = pendingHashQueryRef.current;
                pendingHashQueryRef.current = null;
                // Execute the pending query now that value is converted
                // Use setTimeout to ensure this happens after the current event loop
                setTimeout(() => {
                    handleFormSubmitInternal(sqlExpr, spatialFilter, runtimeZoomToSelected);
                }, 0);
            }
            else {
                // Conversion happened before handleFormSubmit was called
                // applyQuery() is called directly from handleSqlExprObjChange in query-task-form.tsx
                debugLogger.log('TASK', {
                    event: 'hash-value-converted-event-received-no-pending-query',
                    widgetId: props.widgetId,
                    configId: (_f = event.detail) === null || _f === void 0 ? void 0 : _f.configId,
                    initialInputValue: (_g = event.detail) === null || _g === void 0 ? void 0 : _g.initialInputValue,
                    note: 'Conversion happened before handleFormSubmit - applyQuery() called directly from form component',
                    timestamp: Date.now()
                });
            }
        };
        document.addEventListener(QUERYSIMPLE_HASH_VALUE_CONVERTED_EVENT, handleHashValueConverted);
        return () => {
            document.removeEventListener(QUERYSIMPLE_HASH_VALUE_CONVERTED_EVENT, handleHashValueConverted);
        };
    }, [props.widgetId, handleFormSubmitInternal]);
    /**
     * Handles form submission when user clicks "Apply" button.
     * Checks if hash value needs conversion and waits for event if needed.
     *
     * @param sqlExpr - The SQL expression for attribute filtering
     * @param spatialFilter - The spatial filter object
     * @param runtimeZoomToSelected - Optional runtime override for zoom-to-selected behavior
     */
    const handleFormSubmit = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((sqlExpr, spatialFilter, runtimeZoomToSelected) => __awaiter(this, void 0, void 0, function* () {
        var _a, _b, _c;
        // LOG AT THE VERY START - before any checks
        debugLogger.log('TASK', {
            event: 'handleFormSubmit-called',
            widgetId: props.widgetId,
            sqlExprExists: !!sqlExpr,
            firstPartExists: !!((_a = sqlExpr === null || sqlExpr === void 0 ? void 0 : sqlExpr.parts) === null || _a === void 0 ? void 0 : _a[0]),
            timestamp: Date.now()
        });
        // Check if this is a hash-triggered query with unconverted value (string format)
        const firstPart = (_b = sqlExpr === null || sqlExpr === void 0 ? void 0 : sqlExpr.parts) === null || _b === void 0 ? void 0 : _b[0];
        const value = (firstPart === null || firstPart === void 0 ? void 0 : firstPart.type) === 'SINGLE' ? (_c = firstPart.valueOptions) === null || _c === void 0 ? void 0 : _c.value : null;
        const isStringValue = typeof value === 'string' && value.length > 0;
        const isArrayValue = Array.isArray(value) && value.length > 0;
        debugLogger.log('TASK', {
            event: 'handleFormSubmit-checking-conversion',
            widgetId: props.widgetId,
            initialInputValue,
            valueType: typeof value,
            isStringValue,
            isArrayValue,
            value: Array.isArray(value) ? value : value,
            willCheckWaitCondition: isStringValue && !isArrayValue && initialInputValue && value === initialInputValue,
            timestamp: Date.now()
        });
        // If value is string (not converted to array yet), wait for conversion event
        // This happens when hash value changes for same configId
        if (isStringValue && !isArrayValue && initialInputValue && value === initialInputValue) {
            debugLogger.log('TASK', {
                event: 'handleFormSubmit-waiting-for-conversion',
                widgetId: props.widgetId,
                currentValue: value,
                initialInputValue,
                timestamp: Date.now()
            });
            // Store pending query
            pendingHashQueryRef.current = {
                sqlExpr,
                spatialFilter,
                runtimeZoomToSelected
            };
            // Set a timeout to prevent infinite waiting (fallback after 2 seconds)
            setTimeout(() => {
                if (pendingHashQueryRef.current) {
                    debugLogger.log('TASK', {
                        event: 'handleFormSubmit-conversion-timeout-executing-anyway',
                        widgetId: props.widgetId,
                        timestamp: Date.now()
                    });
                    const { sqlExpr, spatialFilter, runtimeZoomToSelected } = pendingHashQueryRef.current;
                    pendingHashQueryRef.current = null;
                    // Execute anyway (fallback)
                    handleFormSubmitInternal(sqlExpr, spatialFilter, runtimeZoomToSelected);
                }
            }, 2000);
            return; // Exit early, will execute when event fires
        }
        debugLogger.log('TASK', {
            event: 'handleFormSubmit-executing-immediately',
            widgetId: props.widgetId,
            reason: isStringValue ? 'not-hash-triggered' : (isArrayValue ? 'already-converted' : 'no-value'),
            valueType: typeof value,
            isStringValue,
            isArrayValue,
            timestamp: Date.now()
        });
        // Value is already converted or not hash-triggered, execute immediately
        handleFormSubmitInternal(sqlExpr, spatialFilter, runtimeZoomToSelected);
    }), [props.widgetId, initialInputValue, handleFormSubmitInternal]);
    const { useAttributeFilter, sqlExprObj, useSpatialFilter, spatialFilterTypes, spatialIncludeRuntimeData, spatialRelationUseDataSources } = currentItem;
    const showAttributeFilter = useAttributeFilter && sqlExprObj != null;
    const showSpatialFilter = spatialFilterEnabled && useSpatialFilter && (spatialFilterTypes.length > 0 || spatialIncludeRuntimeData || (spatialRelationUseDataSources === null || spatialRelationUseDataSources === void 0 ? void 0 : spatialRelationUseDataSources.length) > 0);
    // DETECT SWITCH IN RENDER
    const isSwitchingQueries = previousConfigIdRef.current !== queryItem.configId;
    const isVirtualClearActive = isSwitchingQueries && resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection;
    // Use these "effective" values for the UI
    const effectiveResultCount = isVirtualClearActive ? 0 : resultCount;
    const effectiveRecords = isVirtualClearActive ? [] : (recordsRef.current || []);
    // Create a unique key for the current query result set to help E2E tests detect fresh data
    const resultQueryKey = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return `${queryItem.configId}_${Date.now()}`;
    }, [queryItem.configId, resultCount]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('query-task h-100', className, { wrapped: wrappedInPopper }), "data-result-query-key": resultQueryKey, css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
      ${style}
      position: relative;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceComponent, { useDataSource: useOutputDs, onDataSourceCreated: handleOutputDataSourceCreated, onDataSourceInfoChange: handleOutputDataSourceInfoChange }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tabs, { value: activeTab, onChange: (id) => handleTabChange(id), fill: true, type: 'underline', keepMount: true, css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
          flex: 1;
          display: flex;
          flex-direction: column;
          overflow: hidden;
          min-height: 0;
        `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tab, { id: 'query', title: getI18nMessage('queryTab'), children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('query-task__content', {
                                [jimu_ui__WEBPACK_IMPORTED_MODULE_2__.FOCUSABLE_CONTAINER_CLASS]: isInPopper && activeTab === 'query'
                            }), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              flex: 1;
              display: flex;
              flex-direction: column;
              overflow: hidden;
              min-height: 0;
              padding-top: 0 !important;
            `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('query-form__header mx-4 align-items-center', { 'in-popper': isInPopper }), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              display: flex;
              padding: 6px 0;
              padding-top: 8px;
              border-bottom: 1px solid var(--sys-color-divider-secondary);
              flex-shrink: 0;
            `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('nav-action align-items-center', { 'd-none': wrappedInPopper }), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                flex: 1 1 0;
                overflow: hidden;
                display: flex;
                align-items: center;
                gap: 4px;
                .jimu-btn {
                  min-width: 26px;
                }
              `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('p-0 mr-2', { 'd-none': total === 1 || !onNavBack }), size: 'sm', type: 'tertiary', icon: true, onClick: onNavBack, "aria-label": getI18nMessage('back'), ref: backBtnRef, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_directional_arrow_left__WEBPACK_IMPORTED_MODULE_15__.ArrowLeftOutlined, { autoFlip: true }) }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_label__WEBPACK_IMPORTED_MODULE_9__.QueryTaskLabel, { icon: icon, name: displayLabel ? name : '' }), (() => {
                                                    var _a;
                                                    if (!queryItems || queryItems.length <= 1)
                                                        return null;
                                                    // Get current query's origin data source ID
                                                    const currentOriginDSId = (_a = queryItem.useDataSource) === null || _a === void 0 ? void 0 : _a.dataSourceId;
                                                    if (!currentOriginDSId)
                                                        return null;
                                                    // Find all queries from the same origin data source that have shortIds
                                                    const sameLayerQueries = queryItems.filter(item => {
                                                        var _a;
                                                        return ((_a = item.useDataSource) === null || _a === void 0 ? void 0 : _a.dataSourceId) === currentOriginDSId &&
                                                            item.shortId &&
                                                            item.shortId.trim() !== '';
                                                    });
                                                    // Only show info button if there are queries with shortIds
                                                    if (sameLayerQueries.length === 0)
                                                        return null;
                                                    // Build tooltip content
                                                    const queryLines = sameLayerQueries.map(item => {
                                                        const queryName = getQueryDisplayName(item);
                                                        return `${queryName}: #${item.shortId}=value or ?${item.shortId}=value`;
                                                    });
                                                    const tooltipTitle = `This layer can be searched using the shortIds ${sameLayerQueries.map(q => q.shortId).join(' and ')} using #shortId=value or ?shortId=value in the URL.\n\n${queryLines.join('\n')}`;
                                                    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { placement: 'bottom', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `white-space: pre-line;`, title: tooltipTitle, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: 'sm', icon: true, type: 'tertiary', "aria-label": 'Hash parameter search information', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                          flex-shrink: 0;
                        `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_3__.InfoOutlined, { color: 'var(--sys-color-primary-main)', size: 's' }) }) }));
                                                })()] }), effectiveResultCount > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { title: getI18nMessage('clearResult'), placement: 'bottom', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { ref: clearResultBtnRef, size: 'sm', type: 'tertiary', "aria-label": getI18nMessage('clearResult'), icon: true, className: 'ml-auto py-0', onClick: () => { clearResult('user-trash-click'); }, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_editor_trash__WEBPACK_IMPORTED_MODULE_4__.TrashOutlined, {}) }) }))] }), (() => {
                                    // Only show dropdowns if multiple queries exist
                                    if (!queryItems || queryItems.length <= 1) {
                                        return null;
                                    }
                                    // Build flat list of all queries with their display info
                                    // For grouped queries, use group display name (only show once per group)
                                    const queryOptions = [];
                                    // Track which groups we've already added to avoid duplicates
                                    const addedGroups = new Set();
                                    queryItems.forEach((item, idx) => {
                                        var _a, _b, _c;
                                        if (item.groupId) {
                                            // For grouped queries, use group display name (only add once per group)
                                            if (!addedGroups.has(item.groupId)) {
                                                addedGroups.add(item.groupId);
                                                const groupDisplayName = ((_a = groups === null || groups === void 0 ? void 0 : groups[item.groupId]) === null || _a === void 0 ? void 0 : _a.displayName) ||
                                                    ((_c = (_b = groups === null || groups === void 0 ? void 0 : groups[item.groupId]) === null || _b === void 0 ? void 0 : _b.items[0]) === null || _c === void 0 ? void 0 : _c.name) ||
                                                    item.name ||
                                                    `Group ${item.groupId}`;
                                                queryOptions.push({
                                                    configId: item.configId,
                                                    displayName: groupDisplayName,
                                                    groupId: item.groupId,
                                                    index: idx
                                                });
                                            }
                                        }
                                        else {
                                            // Ungrouped query - use item.name for first dropdown (not searchAlias/jimuFieldName)
                                            queryOptions.push({
                                                configId: item.configId,
                                                displayName: item.name || getQueryDisplayName(item),
                                                groupId: null,
                                                index: idx
                                            });
                                        }
                                    });
                                    // Determine currently selected query
                                    const currentQueryItem = queryItem;
                                    const currentQueryGroupId = currentQueryItem.groupId || null;
                                    const isGroupedQuery = currentQueryGroupId !== null;
                                    // Find the option index for the current query
                                    const currentOptionIndex = queryOptions.findIndex(opt => {
                                        if (isGroupedQuery) {
                                            return opt.groupId === currentQueryGroupId;
                                        }
                                        else {
                                            return opt.configId === currentQueryItem.configId;
                                        }
                                    });
                                    debugLogger.log('GROUP', {
                                        event: 'rendering-dropdowns',
                                        totalQueries: queryItems.length,
                                        queryOptionsCount: queryOptions.length,
                                        currentQueryGroupId,
                                        isGroupedQuery,
                                        currentOptionIndex,
                                        selectedGroupId,
                                        selectedGroupQueryIndex,
                                        currentQueryConfigId: currentQueryItem.configId
                                    });
                                    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                    padding: 4px 16px;
                    flex-shrink: 0;
                  `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("label", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                      font-size: 0.875rem;
                      font-weight: 500;
                      color: var(--sys-color-text-primary);
                      margin-bottom: 4px;
                      display: block;
                    `, children: getI18nMessage('searchLayer') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Select, { size: "sm", value: currentOptionIndex >= 0 ? currentOptionIndex : 0, onChange: (e) => __awaiter(this, void 0, void 0, function* () {
                                                            var _a;
                                                            const optionIndex = parseInt(e.target.value);
                                                            const selectedOption = queryOptions[optionIndex];
                                                            debugLogger.log('GROUP', {
                                                                event: 'query-option-selected',
                                                                optionIndex,
                                                                selectedOption,
                                                                isGrouped: selectedOption.groupId !== null
                                                            });
                                                            // START CLEARING IMMEDIATELY IF SWITCHING
                                                            if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection) {
                                                                yield clearResult('dropdown-layer-switch-new-mode');
                                                            }
                                                            if (selectedOption.groupId) {
                                                                // Grouped query selected - set group and first query in group
                                                                if (onGroupChange) {
                                                                    onGroupChange(selectedOption.groupId);
                                                                }
                                                                if (onGroupQueryChange) {
                                                                    onGroupQueryChange(0);
                                                                }
                                                            }
                                                            else {
                                                                // Ungrouped query selected - clear group selection
                                                                if (onGroupChange) {
                                                                    onGroupChange(null);
                                                                }
                                                                if (onUngroupedChange) {
                                                                    // Find the ungrouped index
                                                                    const ungroupedIndex = (_a = ungrouped === null || ungrouped === void 0 ? void 0 : ungrouped.findIndex(({ item }) => item.configId === selectedOption.configId)) !== null && _a !== void 0 ? _a : -1;
                                                                    if (ungroupedIndex >= 0) {
                                                                        onUngroupedChange(ungroupedIndex);
                                                                    }
                                                                    else {
                                                                        // Fallback: use the index from queryItems
                                                                        debugLogger.log('GROUP', {
                                                                            event: 'ungrouped-fallback-to-index',
                                                                            selectedOptionIndex: selectedOption.index
                                                                        });
                                                                        if (onQueryChange) {
                                                                            onQueryChange(selectedOption.index);
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }), children: queryOptions.map((option, idx) => {
                                                            debugLogger.log('GROUP', {
                                                                event: 'rendering-query-option',
                                                                index: idx,
                                                                configId: option.configId,
                                                                displayName: option.displayName,
                                                                groupId: option.groupId
                                                            });
                                                            return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: idx, children: option.displayName }, option.configId));
                                                        }) })] }), isGroupedQuery && currentQueryGroupId && groups && groups[currentQueryGroupId] && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                      padding: 4px 16px;
                      flex-shrink: 0;
                    `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("label", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                        font-size: 0.875rem;
                        font-weight: 500;
                        color: var(--sys-color-text-primary);
                        margin-bottom: 4px;
                        display: block;
                      `, children: "Search Alias" }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Select, { size: "sm", value: selectedGroupQueryIndex !== undefined ? selectedGroupQueryIndex : 0, onChange: (e) => __awaiter(this, void 0, void 0, function* () {
                                                            var _a;
                                                            const newIndex = parseInt(e.target.value);
                                                            debugLogger.log('GROUP', {
                                                                event: 'group-query-selected',
                                                                groupId: currentQueryGroupId,
                                                                groupQueryIndex: newIndex,
                                                                queryItemConfigId: (_a = groups[currentQueryGroupId].items[newIndex]) === null || _a === void 0 ? void 0 : _a.configId,
                                                                queryDisplayName: getQueryDisplayName(groups[currentQueryGroupId].items[newIndex])
                                                            });
                                                            // START CLEARING IMMEDIATELY IF SWITCHING
                                                            if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection) {
                                                                yield clearResult('dropdown-alias-switch-new-mode');
                                                            }
                                                            if (onGroupQueryChange) {
                                                                onGroupQueryChange(newIndex);
                                                            }
                                                        }), children: groups[currentQueryGroupId].items.map((item, idx) => ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: idx, children: getQueryDisplayName(item) }, item.configId))) })] }))] }));
                                })(), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                    padding: 8px 16px;
                    flex-shrink: 0;
                  `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "d-flex align-items-center", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                      gap: 0.5rem;
                      flex-wrap: nowrap;
                    `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "title2", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                        font-size: 0.875rem;
                        font-weight: 500;
                        color: var(--sys-color-text-primary);
                        white-space: nowrap;
                        flex-shrink: 0;
                      `, children: [getI18nMessage('results'), ":"] }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { placement: 'bottom', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `white-space: pre-line;`, title: getI18nMessage('resultsModeDesc'), children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: 'sm', icon: true, type: 'tertiary', "aria-label": getI18nMessage('resultsModeDesc'), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `flex-shrink: 0;`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_3__.InfoOutlined, { color: 'var(--sys-color-primary-main)', size: 's' }) }) }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { role: "radiogroup", "aria-label": getI18nMessage('resultsMode'), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                          display: flex;
                          gap: 4px;
                          align-items: stretch;
                          flex: 1;
                          min-width: 0;
                        `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: "sm", variant: resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection ? 'contained' : 'outlined', color: resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection ? 'primary' : 'default', onClick: () => {
                                                                const newMode = _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection;
                                                                debugLogger.log('RESULTS-MODE', {
                                                                    event: 'button-mode-changed',
                                                                    widgetId: props.widgetId,
                                                                    queryItemConfigId: queryItem.configId,
                                                                    previousMode: resultsMode || _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection,
                                                                    newMode,
                                                                    timestamp: new Date().toISOString()
                                                                });
                                                                if (onResultsModeChange) {
                                                                    onResultsModeChange(newMode);
                                                                }
                                                            }, "aria-pressed": resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection, "aria-label": `${getI18nMessage('createNewResults')}: ${((_b = getI18nMessage('resultsModeDesc').split('\n')[1]) === null || _b === void 0 ? void 0 : _b.trim()) || ''}`, title: getI18nMessage('createNewResults'), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                          flex: 1;
                          font-size: 0.75rem;
                          padding: 4px 8px;
                          min-height: 28px;
                          white-space: nowrap;
                          text-overflow: ellipsis;
                          overflow: hidden;
                        `, children: getI18nMessage('resultsModeNew') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: "sm", variant: resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection ? 'contained' : 'outlined', color: resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection ? 'primary' : 'default', onClick: () => {
                                                                const newMode = _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection;
                                                                const previousMode = resultsMode || _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection;
                                                                debugLogger.log('RESULTS-MODE', {
                                                                    event: 'button-mode-changed',
                                                                    widgetId: props.widgetId,
                                                                    queryItemConfigId: queryItem.configId,
                                                                    previousMode,
                                                                    newMode,
                                                                    timestamp: new Date().toISOString()
                                                                });
                                                                // If switching FROM "New" TO "Add to" mode and we have current results,
                                                                // merge them with existing accumulated records before changing mode
                                                                const recordsToCapture = (effectiveRecords && effectiveRecords.length > 0)
                                                                    ? effectiveRecords
                                                                    : ((outputDS === null || outputDS === void 0 ? void 0 : outputDS.getSelectedRecords()) || []);
                                                                if (previousMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection &&
                                                                    newMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection &&
                                                                    recordsToCapture.length > 0 &&
                                                                    outputDS &&
                                                                    onAccumulatedRecordsChange) {
                                                                    const existingAccumulated = accumulatedRecords || [];
                                                                    // Merge current results with existing accumulated records
                                                                    const mergedRecords = (0,_results_management_utils__WEBPACK_IMPORTED_MODULE_13__.mergeResultsIntoAccumulated)(outputDS, recordsToCapture, existingAccumulated);
                                                                    debugLogger.log('RESULTS-MODE', {
                                                                        event: 'capturing-current-results-on-mode-switch',
                                                                        widgetId: props.widgetId,
                                                                        previousMode,
                                                                        newMode,
                                                                        capturedRecordsCount: recordsToCapture.length,
                                                                        existingAccumulatedCount: existingAccumulated.length,
                                                                        mergedRecordsCount: mergedRecords.length
                                                                    });
                                                                    onAccumulatedRecordsChange(mergedRecords);
                                                                }
                                                                if (onResultsModeChange) {
                                                                    onResultsModeChange(newMode);
                                                                }
                                                            }, "aria-pressed": resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection, "aria-label": `${getI18nMessage('addToCurrentResults')}: ${((_c = getI18nMessage('resultsModeDesc').split('\n')[2]) === null || _c === void 0 ? void 0 : _c.trim()) || ''}`, title: getI18nMessage('addToCurrentResults'), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                          flex: 1;
                          font-size: 0.75rem;
                          padding: 4px 8px;
                          min-height: 28px;
                          white-space: nowrap;
                          text-overflow: ellipsis;
                          overflow: hidden;
                        `, children: getI18nMessage('resultsModeAdd') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: "sm", variant: resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection ? 'contained' : 'outlined', color: resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection ? 'primary' : 'default', disabled: !accumulatedRecords || accumulatedRecords.length === 0, onClick: () => {
                                                                const newMode = _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection;
                                                                const previousMode = resultsMode || _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection;
                                                                debugLogger.log('RESULTS-MODE', {
                                                                    event: 'button-mode-changed',
                                                                    widgetId: props.widgetId,
                                                                    queryItemConfigId: queryItem.configId,
                                                                    previousMode,
                                                                    newMode,
                                                                    accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0,
                                                                    timestamp: new Date().toISOString()
                                                                });
                                                                // If switching FROM "New" TO "Remove from" mode and we have current results,
                                                                // merge them with existing accumulated records before changing mode
                                                                // (same pattern as "Add to" mode)
                                                                const recordsToCaptureForRemove = (effectiveRecords && effectiveRecords.length > 0)
                                                                    ? effectiveRecords
                                                                    : ((outputDS === null || outputDS === void 0 ? void 0 : outputDS.getSelectedRecords()) || []);
                                                                if (previousMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection &&
                                                                    newMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection &&
                                                                    recordsToCaptureForRemove.length > 0 &&
                                                                    outputDS &&
                                                                    onAccumulatedRecordsChange) {
                                                                    const existingAccumulated = accumulatedRecords || [];
                                                                    // Merge current results with existing accumulated records
                                                                    const mergedRecords = (0,_results_management_utils__WEBPACK_IMPORTED_MODULE_13__.mergeResultsIntoAccumulated)(outputDS, recordsToCaptureForRemove, existingAccumulated);
                                                                    debugLogger.log('RESULTS-MODE', {
                                                                        event: 'capturing-current-results-on-mode-switch-to-remove',
                                                                        widgetId: props.widgetId,
                                                                        previousMode,
                                                                        newMode,
                                                                        capturedRecordsCount: recordsToCaptureForRemove.length,
                                                                        existingAccumulatedCount: existingAccumulated.length,
                                                                        mergedRecordsCount: mergedRecords.length
                                                                    });
                                                                    onAccumulatedRecordsChange(mergedRecords);
                                                                }
                                                                if (onResultsModeChange) {
                                                                    onResultsModeChange(newMode);
                                                                }
                                                            }, "aria-pressed": resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection, "aria-label": `${getI18nMessage('removeFromCurrentResults')}: ${((_d = getI18nMessage('resultsModeDesc').split('\n')[3]) === null || _d === void 0 ? void 0 : _d.trim()) || ''}`, title: (!accumulatedRecords || accumulatedRecords.length === 0)
                                                                ? getI18nMessage('resultsModeDisabledRemove')
                                                                : getI18nMessage('removeFromCurrentResults'), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                          flex: 1;
                          font-size: 0.75rem;
                          padding: 4px 8px;
                          min-height: 28px;
                          white-space: nowrap;
                          text-overflow: ellipsis;
                          overflow: hidden;
                        `, children: getI18nMessage('resultsModeRemove') })] })] }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { id: `results-mode-description-${props.widgetId}`, className: "sr-only", "aria-live": "polite", role: "status", children: resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection
                                                ? getI18nMessage('createNewResults')
                                                : resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection
                                                    ? getI18nMessage('addToCurrentResults')
                                                    : getI18nMessage('removeFromCurrentResults') })] }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              flex: 1;
              display: flex;
              flex-direction: column;
              overflow: hidden;
              min-height: 0;
            `, children: [enabled && dsExists && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                  flex: 1;
                  display: flex;
                  flex-direction: column;
                  min-height: 0;
                  overflow: hidden;
                `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_form__WEBPACK_IMPORTED_MODULE_6__.QueryTaskForm, Object.assign({}, otherProps, { configId: queryItem.configId, outputDS: outputDS, datasourceReady: dataSource != null, spatialFilterEnabled: spatialFilterEnabled, dataActionFilter: dataActionFilter, onFormSubmit: handleFormSubmit, initialInputValue: initialInputValue, onHashParameterUsed: onHashParameterUsed, queryItemShortId: queryItem.shortId, activeTab: activeTab, onTabChange: setActiveTab }), queryItem.configId) })), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_8__.DataSourceTip, { widgetId: props.widgetId, useDataSource: queryItem.useDataSource, showMessage: true, onStatusChange: handleStatusChange, onDataSourceCreated: handleDataSourceCreated })] })] }) }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tab, { id: 'results', title: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { children: [getI18nMessage('resultsTab'), effectiveResultCount > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                  margin-left: 6px;
                  font-size: 0.75rem;
                  opacity: 0.7;
                `, children: ["(", effectiveResultCount, ")"] }))] }), disabled: effectiveResultCount === 0, children: effectiveResultCount > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('query-task__content', {
                                [jimu_ui__WEBPACK_IMPORTED_MODULE_2__.FOCUSABLE_CONTAINER_CLASS]: isInPopper && activeTab === 'results'
                            }), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                flex: 1;
                display: flex;
                flex-direction: column;
                min-height: 0;
                height: 100%;
                padding-top: 0 !important;
              `, onClick: (e) => {
                                // Prevent clicks from bubbling up when Results tab is active
                                if (activeTab === 'results') {
                                    e.stopPropagation();
                                }
                            }, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_result__WEBPACK_IMPORTED_MODULE_7__.QueryTaskResult, { widgetId: props.widgetId, queryItem: queryItem, queryParams: queryParamRef.current, resultCount: effectiveResultCount, maxPerPage: (_e = dataSource === null || dataSource === void 0 ? void 0 : dataSource.getMaxRecordCount) === null || _e === void 0 ? void 0 : _e.call(dataSource), records: effectiveRecords, outputDS: outputDS, runtimeZoomToSelected: lastRuntimeZoomToSelectedRef.current, resultsMode: resultsMode, useGraphicsLayerForHighlight: useGraphicsLayerForHighlight, graphicsLayer: graphicsLayer, mapView: mapView, accumulatedRecords: accumulatedRecords, onAccumulatedRecordsChange: onAccumulatedRecordsChange, onNavBack: (...args_1) => __awaiter(this, [...args_1], void 0, function* (clearResults = false) {
                                    // Handle navigation from QueryTaskResult
                                    // If clearResults is true, clear everything and go to query tab
                                    // If false, just switch to query tab without clearing
                                    if (clearResults) {
                                        hasSelectedRecordsRef.current = false; // Reset flag when clearing
                                        yield navToForm(true);
                                    }
                                    else {
                                        // Just switch tabs, don't clear results
                                        // Mark as manual switch to prevent auto-switch useEffect from interfering
                                        manualTabSwitchRef.current = true;
                                        setActiveTab('query');
                                        // Reset the flag after a short delay
                                        setTimeout(() => {
                                            manualTabSwitchRef.current = false;
                                        }, 100);
                                    }
                                }) }, `${queryItem.configId}-${queryExecutionKeyRef.current}`) })) })] }), (selectionError || zoomError) && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
          padding: 0 16px;
          margin-top: 8px;
        `, children: [selectionError && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_8__.ErrorMessage, { error: selectionError, onDismiss: () => setSelectionError(null) })), zoomError && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_8__.ErrorMessage, { error: zoomError, onDismiss: () => setZoomError(null) }))] })), stage === 2 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          z-index: 1000;
          background-color: rgba(255, 255, 255, 0.8);
          display: flex;
          align-items: center;
          justify-content: center;
        `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_loading_result__WEBPACK_IMPORTED_MODULE_16__.LoadingResult, {}) }))] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-utils.ts":
/*!*************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-utils.ts ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   combineFields: () => (/* binding */ combineFields),
/* harmony export */   executeCountQuery: () => (/* binding */ executeCountQuery),
/* harmony export */   executeQuery: () => (/* binding */ executeQuery),
/* harmony export */   generateQueryParams: () => (/* binding */ generateQueryParams),
/* harmony export */   getPopupTemplate: () => (/* binding */ getPopupTemplate),
/* harmony export */   isQueryInputValid: () => (/* binding */ isQueryInputValid),
/* harmony export */   sanitizeQueryInput: () => (/* binding */ sanitizeQueryInput),
/* harmony export */   sanitizeSqlExpression: () => (/* binding */ sanitizeSqlExpression)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _shared_code_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../shared-code/common */ "./your-extensions/widgets/shared-code/common.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



const debugLogger = (0,_shared_code_common__WEBPACK_IMPORTED_MODULE_2__.createQuerySimpleDebugLogger)();
function combineFields(resultDisplayFields, resultTitleExpression, idField) {
    const fields = new Set();
    resultDisplayFields === null || resultDisplayFields === void 0 ? void 0 : resultDisplayFields.forEach(item => fields.add(item));
    if (resultTitleExpression) {
        const templates = resultTitleExpression.match(/\{\w*\}/g);
        if ((templates === null || templates === void 0 ? void 0 : templates.length) > 0) {
            templates.forEach(item => fields.add(item.substring(1, item.length - 1)));
        }
    }
    if (idField) {
        fields.add(idField);
    }
    return Array.from(fields);
}
/**
 * Validates user input before query execution.
 * @param input - The raw user input (string, number, etc.)
 * @param isList - Optional flag indicating if the input is from a list/selector (lenient validation)
 * @returns boolean - true if input is valid, false otherwise
 */
function isQueryInputValid(input, isList = false) {
    // If it's a list-based selection (Unique Values, Field Values), 
    // we allow empty/null as it might represent "no filter" or the user 
    // intends to interact with the list.
    if (isList) {
        return true;
    }
    if (input === null || input === undefined) {
        return false;
    }
    // If it's a string, ensure it's not empty or just whitespace
    if (typeof input === 'string') {
        return input.trim() !== '';
    }
    // If it's an array (often used in unique values or multiple selection)
    if (Array.isArray(input)) {
        if (input.length === 0)
            return false;
        // Check if the first item is valid (usually {value: '...', label: '...'})
        const firstItem = input[0];
        if (firstItem && typeof firstItem === 'object' && 'value' in firstItem) {
            return isQueryInputValid(firstItem.value);
        }
        return true;
    }
    // If it's a jimu-core Immutable array
    if (input.asMutable && typeof input.toArray === 'function') {
        const arr = input.toArray();
        if (arr.length === 0)
            return false;
        const firstItem = arr[0];
        if (firstItem && typeof firstItem === 'object' && 'value' in firstItem) {
            return isQueryInputValid(firstItem.value);
        }
        return true;
    }
    // For other types (numbers, dates), if it exists, we count it as valid
    return true;
}
/**
 * Sanitizes user input for query tasks.
 * 1. Strips leading and trailing whitespace.
 * 2. Prevents basic SQL injection by escaping single quotes.
 * 3. Handles empty or whitespace-only strings.
 *
 * @param input - The raw user input string
 * @returns Sanitized string or null if input is empty
 */
function sanitizeQueryInput(input) {
    if (!input || typeof input !== 'string') {
        return null;
    }
    const trimmed = input.trim();
    if (trimmed === '') {
        return null;
    }
    // Basic SQL escaping: replace single quotes with double single quotes
    return trimmed.replace(/'/g, "''");
}
/**
 * Sanitizes all values within an IMSqlExpression object.
 *
 * @param sqlExpr - The raw SQL expression object
 * @returns A new sanitized IMSqlExpression object
 */
function sanitizeSqlExpression(sqlExpr) {
    if (!sqlExpr || !sqlExpr.parts) {
        return sqlExpr;
    }
    let sanitizedExpr = sqlExpr;
    sqlExpr.parts.forEach((part, index) => {
        var _a;
        if (part.type === 'SINGLE' && ((_a = part.valueOptions) === null || _a === void 0 ? void 0 : _a.value) !== undefined) {
            const rawValue = part.valueOptions.value;
            // CASE 1: Simple String
            if (typeof rawValue === 'string') {
                const sanitizedValue = sanitizeQueryInput(rawValue);
                if (sanitizedValue !== rawValue) {
                    sanitizedExpr = sanitizedExpr.setIn(['parts', index, 'valueOptions', 'value'], sanitizedValue);
                }
            }
            // CASE 2: Array of objects (Unique Values / Dropdowns)
            // We must preserve the Immutable structure to avoid "asMutable" errors
            else if (Array.isArray(rawValue) || (rawValue && typeof rawValue.toArray === 'function')) {
                const isImmutable = typeof rawValue.toArray === 'function';
                const arr = isImmutable ? rawValue.toArray() : rawValue;
                let changed = false;
                const sanitizedArr = arr.map(item => {
                    if (item && typeof item === 'object' && 'value' in item && typeof item.value === 'string') {
                        const sanitizedVal = sanitizeQueryInput(item.value);
                        if (sanitizedVal !== item.value) {
                            changed = true;
                            return Object.assign(Object.assign({}, item), { value: sanitizedVal });
                        }
                    }
                    return item;
                });
                if (changed) {
                    // If it was Immutable, we should ideally use Immutable methods to update,
                    // but setIn on the top-level expression with a plain array/object 
                    // usually triggers the framework's auto-conversion.
                    sanitizedExpr = sanitizedExpr.setIn(['parts', index, 'valueOptions', 'value'], sanitizedArr);
                }
            }
        }
    });
    return sanitizedExpr;
}
function getPopupTemplate(outputDS, queryItem) {
    return __awaiter(this, void 0, void 0, function* () {
        var _a;
        const { resultFieldsType, resultDisplayFields, resultTitleExpression = '' } = queryItem;
        const currentOriginDs = outputDS.getOriginDataSources()[0];
        const popupInfo = currentOriginDs.getPopupInfo();
        if (resultFieldsType === _config__WEBPACK_IMPORTED_MODULE_1__.FieldsType.SelectAttributes) {
            let fields;
            if (resultDisplayFields == null) {
                const fieldsInContent = (0,_shared_code_common__WEBPACK_IMPORTED_MODULE_2__.getFieldInfosInPopupContent)(popupInfo);
                if (fieldsInContent.length > 0) {
                    const uniqueFields = new Set(fieldsInContent.map(ele => ele.fieldName));
                    fields = Array.from(uniqueFields);
                }
                else {
                    // return all fields by default
                    const allFieldsSchema = outputDS.getSchema();
                    fields = (allFieldsSchema === null || allFieldsSchema === void 0 ? void 0 : allFieldsSchema.fields) ? Object.values(allFieldsSchema.fields).map(field => field.jimuName) : [];
                }
            }
            else {
                fields = resultDisplayFields.asMutable({ deep: true });
            }
            if (popupInfo) {
                const fieldInfos = [];
                fields.forEach(field => {
                    const fieldInfo = popupInfo.fieldInfos.find(fieldInfo => fieldInfo.fieldName === field);
                    if (fieldInfo) {
                        fieldInfo.visible = true;
                        fieldInfos.push(fieldInfo);
                    }
                    else {
                        fieldInfos.push({
                            fieldName: field,
                            label: field
                        });
                    }
                });
                return {
                    popupTemplate: {
                        fieldInfos,
                        content: [{
                                type: 'fields'
                            }],
                        title: resultTitleExpression
                    }
                };
            }
            return {
                popupTemplate: {
                    fieldInfos: fields.map(field => ({
                        fieldName: field,
                        label: field
                    })),
                    content: [{
                            type: 'fields'
                        }],
                    title: resultTitleExpression
                }
            };
        }
        // the source layer will provide popup info
        let layerObject;
        if (currentOriginDs.layer) {
            layerObject = currentOriginDs.layer;
        }
        else {
            layerObject = yield currentOriginDs.createJSAPILayerByDataSource();
        }
        if (layerObject) {
            yield layerObject.load();
        }
        return { defaultPopupTemplate: ((_a = layerObject === null || layerObject === void 0 ? void 0 : layerObject.associatedLayer) === null || _a === void 0 ? void 0 : _a.defaultPopupTemplate) || (layerObject === null || layerObject === void 0 ? void 0 : layerObject.defaultPopupTemplate) };
    });
}
function generateQueryParams(outputDS, sqlExpr, spatialFilter, queryItem, page, pageSize) {
    var _a, _b, _c, _d, _e;
    const currentQueryDsJson = outputDS.getDataSourceJson();
    const currentOriginDs = outputDS.getOriginDataSources()[0];
    const isLocalDs = currentQueryDsJson === null || currentQueryDsJson === void 0 ? void 0 : currentQueryDsJson.isDataInDataSourceInstance;
    if (isLocalDs) {
        outputDS.setSourceRecords(currentOriginDs.getSourceRecords());
    }
    const { useAttributeFilter, useSpatialFilter, sortOptions, resultFieldsType, resultDisplayFields, resultTitleExpression } = queryItem;
    // DETERMINE MINIMAL FIELDS (The "Field Shredder" Optimization)
    // To achieve performance parity with Web AppBuilder, we must avoid fetching every 
    // column in the database (* or all). We surgically request only the fields 
    // needed for the Title, the Attribute List, and the ID field.
    let outputFields = [];
    if (resultFieldsType === _config__WEBPACK_IMPORTED_MODULE_1__.FieldsType.SelectAttributes && resultDisplayFields) {
        outputFields = combineFields(resultDisplayFields, resultTitleExpression || '', outputDS.getIdField());
    }
    else {
        // Popup mode: Get only visible fields from popup info
        const popupInfo = currentOriginDs.getPopupInfo();
        const fieldNames = Object.values((_a = currentOriginDs.getSchema().fields) !== null && _a !== void 0 ? _a : {}).map(f => f.name);
        const validFieldInfos = (_b = popupInfo === null || popupInfo === void 0 ? void 0 : popupInfo.fieldInfos) === null || _b === void 0 ? void 0 : _b.filter(fieldInfo => fieldInfo.visible !== false && fieldNames.includes(fieldInfo.fieldName));
        outputFields = (validFieldInfos === null || validFieldInfos === void 0 ? void 0 : validFieldInfos.map(fieldInfo => fieldInfo.fieldName)) || [];
        // Always ensure ID field is included
        const idField = outputDS.getIdField();
        if (idField && !outputFields.includes(idField)) {
            outputFields.push(idField);
        }
    }
    const mergedQueryParams = outputDS.mergeQueryParams((_c = currentOriginDs.getCurrentQueryParams()) !== null && _c !== void 0 ? _c : {}, {
        where: (useAttributeFilter && (sqlExpr === null || sqlExpr === void 0 ? void 0 : sqlExpr.sql)) ? jimu_core__WEBPACK_IMPORTED_MODULE_0__.dataSourceUtils.getArcGISSQL(sqlExpr, outputDS).sql : '1=1',
        sqlExpression: (useAttributeFilter && (sqlExpr === null || sqlExpr === void 0 ? void 0 : sqlExpr.sql)) ? sqlExpr : null,
        // FORCE minimal fields here to override any framework "*" or "all"
        outFields: outputFields
    });
    // PERFORMANCE OPTIMIZATION: Universal SQL Optimizer
    // We normalize the user's input to UPPERCASE to ensure case-insensitivity while 
    // unwrapping any LOWER() function around the field name. This allows the database 
    // to use its attribute indexes (SARGable query).
    if (mergedQueryParams.where && mergedQueryParams.where.includes('LOWER(')) {
        const optimizedWhere = mergedQueryParams.where.replace(/LOWER\(([^)]+)\)\s*(=|LIKE)\s*'([^']*)'/gi, (match, field, operator, value) => {
            // Normalize both sides to UPPERCASE. This works for ANY field name.
            // We keep the field name "naked" so the index is used.
            return `${field} ${operator} '${value.toUpperCase()}'`;
        });
        if (optimizedWhere !== mergedQueryParams.where) {
            debugLogger.log('TASK', {
                event: 'sql-optimized',
                original: mergedQueryParams.where,
                optimized: optimizedWhere
            });
            mergedQueryParams.where = optimizedWhere;
        }
    }
    // compose query params for query
    const queryParams = Object.assign({ 
        // url: ds.url,
        returnGeometry: true, 
        /**
         * PERFORMANCE OPTIMIZATION: Force lower precision for all display queries.
         */
        maxAllowableOffset: 0.1, page, 
        // Limit pageSize to a sane default if not provided or too large
        pageSize: (pageSize && pageSize < 1000) ? pageSize : 1000 }, mergedQueryParams);
    // Final override to ensure no "*" leaks through from any merge operation
    if (!queryParams.outFields || queryParams.outFields.includes('*')) {
        queryParams.outFields = outputFields;
    }
    // Diagnostic log: Show exactly WHICH fields are being sent
    debugLogger.log('TASK', {
        event: 'requesting-data',
        fieldsCount: (_d = queryParams.outFields) === null || _d === void 0 ? void 0 : _d.length,
        fields: (_e = queryParams.outFields) === null || _e === void 0 ? void 0 : _e.join(', '),
        pageSize: queryParams.pageSize,
        offset: queryParams.maxAllowableOffset
    });
    if (useSpatialFilter && (spatialFilter === null || spatialFilter === void 0 ? void 0 : spatialFilter.geometry)) {
        const { geometry, relation = _config__WEBPACK_IMPORTED_MODULE_1__.SpatialRelation.Intersect, buffer } = spatialFilter;
        const spatialQueryParams = {
            geometryType: jimu_core__WEBPACK_IMPORTED_MODULE_0__.dataSourceUtils.changeJSAPIGeometryTypeToRestAPIGeometryType(geometry.type),
            geometry: geometry.toJSON(),
            spatialRel: _config__WEBPACK_IMPORTED_MODULE_1__.mapJSAPISpatialRelToDsSpatialRel[relation],
            distance: buffer === null || buffer === void 0 ? void 0 : buffer.distance,
            units: (buffer === null || buffer === void 0 ? void 0 : buffer.unit) ? _config__WEBPACK_IMPORTED_MODULE_1__.mapJSAPIUnitToDsUnit[buffer.unit] : undefined
        };
        Object.assign(queryParams, spatialQueryParams);
    }
    if ((sortOptions === null || sortOptions === void 0 ? void 0 : sortOptions.length) > 0) {
        Object.assign(queryParams, {
            orderByFields: sortOptions.map(item => `${item.jimuFieldName} ${item.order}`)
        });
    }
    return queryParams;
}
function executeCountQuery(widgetId, outputDS, queryParams) {
    return __awaiter(this, void 0, void 0, function* () {
        const result = yield outputDS.loadCount(queryParams, { widgetId, refresh: true });
        return result != null ? result : 0;
    });
}
function executeQuery(widgetId, queryItem, outputDS, queryParams) {
    return __awaiter(this, void 0, void 0, function* () {
        const popupInfo = outputDS.getPopupInfo();
        const layerDefinition = outputDS.getLayerDefinition();
        const getDefaultFieldInfos = () => {
            var _a;
            return [
                { fieldName: (_a = layerDefinition === null || layerDefinition === void 0 ? void 0 : layerDefinition.objectIdField) !== null && _a !== void 0 ? _a : 'objectid', label: 'OBJECTID', tooltip: '', visible: true }
            ];
        };
        const fieldInfos = ((fieldInfos) => (fieldInfos.length ? fieldInfos : getDefaultFieldInfos()))(((popupInfo === null || popupInfo === void 0 ? void 0 : popupInfo.fieldInfos) || []).filter((i) => i.visible));
        // const fields = outputDS.getSchema()?.fields
        // let selectedFieldNames
        // if (queryItem.resultFieldsType === FieldsType.SelectAttributes) {
        //   selectedFieldNames = [].concat(queryItem.resultDisplayFields, queryItem.resultTitleFields)
        // } else {
        //   selectedFieldNames = fieldInfos.map((fieldInfo) => fieldInfo.fieldName)
        // }
        // const selectedFieldJimuNames = fields
        //   ? Object.keys(fields).filter((jimuName) => selectedFieldNames.includes(fields[jimuName].name))
        //   : []
        // outputDS.setSelectedFields(selectedFieldJimuNames)
        const startTime = performance.now();
        let records = yield outputDS.load(queryParams, { widgetId });
        const fetchTime = performance.now() - startTime;
        if (records == null) {
            records = [];
        }
        const originDs = outputDS.getOriginDataSources()[0];
        const layerStartTime = performance.now();
        const layerObject = yield getLayerObject(originDs);
        const layerTime = performance.now() - layerStartTime;
        debugLogger.log('TASK', {
            event: 'query-complete',
            fetchTime: Math.round(fetchTime),
            layerTime: Math.round(layerTime),
            totalTime: Math.round(performance.now() - startTime),
            recordCount: records.length
        });
        records.forEach((record) => {
            const feature = record.feature;
            if (layerObject) {
                feature.sourceLayer = layerObject.associatedLayer || layerObject;
            }
            feature.layer = feature.sourceLayer;
        });
        const queryResult = {
            records,
            fields: fieldInfos.map((fieldInfo) => fieldInfo.fieldName)
        };
        // publish message
        const dataRecordSetChangeMessage = new jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataRecordSetChangeMessage(widgetId, jimu_core__WEBPACK_IMPORTED_MODULE_0__.RecordSetChangeType.CreateUpdate, [{
                records: outputDS.getAllLoadedRecords(),
                fields: queryResult.fields,
                dataSource: outputDS,
                name: outputDS.id,
                label: outputDS.getLabel()
            }]);
        jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageManager.getInstance().publishMessage(dataRecordSetChangeMessage);
        return queryResult;
    });
}
function getLayerObject(dataSource) {
    return __awaiter(this, void 0, void 0, function* () {
        const layerObject = yield dataSource.createJSAPILayerByDataSource();
        // layerObject may be undefined if the data source is added by URL
        if (layerObject) {
            yield layerObject.load();
        }
        return layerObject;
    });
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/results-management-utils.ts":
/*!**************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/results-management-utils.ts ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   clearAccumulatedResults: () => (/* binding */ clearAccumulatedResults),
/* harmony export */   createAccumulatedResultsDataSource: () => (/* binding */ createAccumulatedResultsDataSource),
/* harmony export */   getRecordKey: () => (/* binding */ getRecordKey),
/* harmony export */   mergeResultsIntoAccumulated: () => (/* binding */ mergeResultsIntoAccumulated),
/* harmony export */   removeRecordsFromOriginSelections: () => (/* binding */ removeRecordsFromOriginSelections),
/* harmony export */   removeResultsFromAccumulated: () => (/* binding */ removeResultsFromAccumulated)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/* harmony import */ var _graphics_layer_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./graphics-layer-utils */ "./your-extensions/widgets/query-simple/src/runtime/graphics-layer-utils.ts");
/**
 * Utility functions for managing results accumulation in QuerySimple widget.
 * Handles "Add to" and "Remove from" modes for accumulating query results.
 */
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__.createQuerySimpleDebugLogger)();
/**
 * Generates a composite key for a record that includes both origin data source ID and objectId.
 * This ensures uniqueness across different layers that may have the same objectId.
 *
 * @param record - The feature data record
 * @param outputDS - The output data source containing the record
 * @returns Composite key string: `${originDSId}_${objectId}`
 */
function getRecordKey(record, outputDS) {
    var _a;
    const originDS = (_a = outputDS.getOriginDataSources()) === null || _a === void 0 ? void 0 : _a[0];
    const originDSId = (originDS === null || originDS === void 0 ? void 0 : originDS.id) || outputDS.id; // Fallback to outputDS if no origin
    const objectId = record.getId();
    const key = `${originDSId}_${objectId}`;
    debugLogger.log('RESULTS-MODE', {
        event: 'record-key-generated',
        originDSId,
        objectId,
        key,
        hasOriginDS: !!originDS
    });
    return key;
}
/**
 * Creates an accumulated results data source for storing merged query results.
 * This data source is widget-level and persists across multiple queries.
 *
 * @param widgetId - The widget ID
 * @param originDS - The origin data source to use as the base
 * @returns The created accumulated results data source
 */
function createAccumulatedResultsDataSource(widgetId, originDS) {
    return __awaiter(this, void 0, void 0, function* () {
        const accumulatedDSId = `${widgetId}_accumulated_results`;
        debugLogger.log('RESULTS-MODE', {
            event: 'creating-accumulated-ds',
            widgetId,
            accumulatedDSId,
            originDSId: originDS.id
        });
        // Check if data source already exists
        const dsManager = jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceManager.getInstance();
        let accumulatedDS = dsManager.getDataSource(accumulatedDSId);
        if (accumulatedDS) {
            debugLogger.log('RESULTS-MODE', {
                event: 'accumulated-ds-already-exists',
                accumulatedDSId
            });
            return accumulatedDS;
        }
        // Get origin data source JSON to create output data source
        const originDataSourceJson = originDS.getDataSourceJson();
        // Create output data source JSON similar to how query items create output DS
        const outputDataSourceJson = {
            id: accumulatedDSId,
            label: 'Accumulated Results',
            type: originDataSourceJson === null || originDataSourceJson === void 0 ? void 0 : originDataSourceJson.type,
            geometryType: originDataSourceJson === null || originDataSourceJson === void 0 ? void 0 : originDataSourceJson.geometryType,
            url: originDataSourceJson === null || originDataSourceJson === void 0 ? void 0 : originDataSourceJson.url,
            itemId: originDataSourceJson === null || originDataSourceJson === void 0 ? void 0 : originDataSourceJson.itemId,
            portalUrl: originDataSourceJson === null || originDataSourceJson === void 0 ? void 0 : originDataSourceJson.portalUrl,
            originDataSources: [{
                    dataSourceId: originDS.id,
                    mainDataSourceId: originDS.id,
                    rootDataSourceId: originDS.id
                }],
            layerId: originDataSourceJson === null || originDataSourceJson === void 0 ? void 0 : originDataSourceJson.layerId,
            isDataInDataSourceInstance: originDataSourceJson === null || originDataSourceJson === void 0 ? void 0 : originDataSourceJson.isDataInDataSourceInstance,
            isOutputFromWidget: true
        };
        // Create the data source using DataSourceManager
        // Note: This follows the pattern from setting.tsx for creating output data sources
        accumulatedDS = dsManager.createDataSourceByDataSourceJson(outputDataSourceJson);
        // Set initial status
        accumulatedDS.setStatus(jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceStatus.NotReady);
        accumulatedDS.setCountStatus(jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceStatus.NotReady);
        debugLogger.log('RESULTS-MODE', {
            event: 'accumulated-ds-created',
            accumulatedDSId,
            originDSId: originDS.id,
            status: accumulatedDS.getStatus()
        });
        return accumulatedDS;
    });
}
/**
 * Merges new query results with existing records.
 * Deduplicates records using composite keys (originDSId_objectId).
 *
 * This function merges new records with existing records that were captured
 * before the query executed. The caller is responsible for storing the merged
 * records (typically in recordsRef or state).
 *
 * @param outputDS - The output data source (used for key generation)
 * @param newRecords - New records to merge in
 * @param existingRecords - Existing records captured before query execution (optional, defaults to empty array)
 * @returns Array of all merged records (existing + new unique records)
 */
function mergeResultsIntoAccumulated(outputDS, newRecords, existingRecords = []) {
    debugLogger.log('RESULTS-MODE', {
        event: 'merging-results-start',
        outputDSId: outputDS.id,
        existingRecordsCount: existingRecords.length,
        newRecordsCount: newRecords.length
    });
    // Build Set of existing record keys for fast lookup
    const existingKeys = new Set(existingRecords.map(record => getRecordKey(record, outputDS)));
    debugLogger.log('RESULTS-MODE', {
        event: 'existing-records-check',
        existingRecordsCount: existingRecords.length,
        existingKeysCount: existingKeys.size
    });
    // Filter new records to only include those not already in output DS
    const uniqueNewRecords = newRecords.filter(record => {
        const key = getRecordKey(record, outputDS);
        const isDuplicate = existingKeys.has(key);
        if (isDuplicate) {
            debugLogger.log('RESULTS-MODE', {
                event: 'duplicate-record-skipped',
                key,
                objectId: record.getId()
            });
        }
        return !isDuplicate;
    });
    debugLogger.log('RESULTS-MODE', {
        event: 'deduplication-complete',
        newRecordsCount: newRecords.length,
        uniqueNewRecordsCount: uniqueNewRecords.length,
        duplicatesSkipped: newRecords.length - uniqueNewRecords.length
    });
    // Merge records
    const mergedRecords = [...existingRecords, ...uniqueNewRecords];
    debugLogger.log('RESULTS-MODE', {
        event: 'merge-complete',
        totalRecordsAfterMerge: mergedRecords.length,
        existingCount: existingRecords.length,
        newUniqueCount: uniqueNewRecords.length
    });
    return mergedRecords;
}
/**
 * Removes matching records from widget-level accumulated records.
 * Matches records using composite keys (originDSId_objectId).
 *
 * This function removes records from existing accumulated records that were captured
 * before the query executed. The caller is responsible for storing the remaining
 * records (typically in recordsRef or state).
 *
 * @param outputDS - The output data source (used for key generation)
 * @param recordsToRemove - Records to remove (from query results)
 * @param existingAccumulatedRecords - Existing accumulated records captured before query execution (optional, defaults to empty array)
 * @returns Array of remaining records after removal
 */
function removeResultsFromAccumulated(outputDS, recordsToRemove, existingAccumulatedRecords = []) {
    debugLogger.log('RESULTS-MODE', {
        event: 'removing-results-start',
        outputDSId: outputDS.id,
        recordsToRemoveCount: recordsToRemove.length,
        existingAccumulatedRecordsCount: existingAccumulatedRecords.length
    });
    // If no accumulated records, nothing to remove
    if (existingAccumulatedRecords.length === 0) {
        debugLogger.log('RESULTS-MODE', {
            event: 'no-accumulated-records-to-remove',
            outputDSId: outputDS.id
        });
        return [];
    }
    // If no records to remove, return existing records unchanged
    if (recordsToRemove.length === 0) {
        debugLogger.log('RESULTS-MODE', {
            event: 'no-records-to-remove',
            outputDSId: outputDS.id,
            existingAccumulatedRecordsCount: existingAccumulatedRecords.length
        });
        return existingAccumulatedRecords;
    }
    // Build Set of keys to remove for fast lookup
    const removeKeys = new Set(recordsToRemove.map(record => getRecordKey(record, outputDS)));
    debugLogger.log('RESULTS-MODE', {
        event: 'remove-keys-built',
        existingAccumulatedRecordsCount: existingAccumulatedRecords.length,
        removeKeysCount: removeKeys.size
    });
    // Filter out records that match keys to remove
    const remainingRecords = [];
    const removedRecords = [];
    existingAccumulatedRecords.forEach(record => {
        var _a, _b, _c, _d;
        const key = getRecordKey(record, outputDS);
        const shouldRemove = removeKeys.has(key);
        if (shouldRemove) {
            removedRecords.push(record);
            debugLogger.log('RESULTS-MODE', {
                event: 'record-marked-for-removal',
                key,
                objectId: record.getId(),
                originDSId: ((_d = (_c = (_b = (_a = record.getDataSource) === null || _a === void 0 ? void 0 : _a.call(record)) === null || _b === void 0 ? void 0 : _b.getOriginDataSources()) === null || _c === void 0 ? void 0 : _c[0]) === null || _d === void 0 ? void 0 : _d.id) || 'unknown'
            });
        }
        else {
            remainingRecords.push(record);
        }
    });
    debugLogger.log('RESULTS-MODE', {
        event: 'removal-complete',
        recordsRemoved: removedRecords.length,
        remainingRecordsCount: remainingRecords.length,
        recordsToRemoveCount: recordsToRemove.length,
        matchedRecordsCount: removedRecords.length,
        unmatchedRecordsCount: recordsToRemove.length - removedRecords.length
    });
    return remainingRecords;
}
/**
 * Removes records from origin data source selections.
 * Groups records by their origin data source and updates each origin DS's selection separately.
 * This ensures map selection is updated correctly when records come from multiple origin layers.
 * Also removes graphics from graphics layer if using graphics layer highlighting.
 *
 * @param widgetId - The widget ID for publishing messages
 * @param recordsToRemove - Records to remove from selection
 * @param outputDS - The output data source (used for key generation)
 * @param useGraphicsLayer - Whether to remove graphics from graphics layer (default: false)
 * @param graphicsLayer - Graphics layer instance (required if useGraphicsLayer is true)
 */
function removeRecordsFromOriginSelections(widgetId, recordsToRemove, outputDS, useGraphicsLayer, graphicsLayer) {
    debugLogger.log('RESULTS-MODE', {
        event: 'removing-records-from-origin-selections-start',
        widgetId,
        recordsToRemoveCount: recordsToRemove.length,
        outputDSId: outputDS.id,
        useGraphicsLayer: !!useGraphicsLayer,
        hasGraphicsLayer: !!graphicsLayer
    });
    if (recordsToRemove.length === 0) {
        debugLogger.log('RESULTS-MODE', {
            event: 'no-records-to-remove-from-selection',
            widgetId
        });
        return;
    }
    // Remove from graphics layer if using graphics layer highlighting
    if (useGraphicsLayer && graphicsLayer) {
        const recordIdsToRemove = recordsToRemove.map(record => record.getId());
        debugLogger.log('RESULTS-MODE', {
            event: 'removing-graphics-from-layer',
            widgetId,
            recordIdsCount: recordIdsToRemove.length,
            graphicsLayerId: graphicsLayer.id
        });
        (0,_graphics_layer_utils__WEBPACK_IMPORTED_MODULE_2__.removeHighlightGraphics)(graphicsLayer, recordIdsToRemove);
    }
    // Group records by their origin data source
    const recordsByOriginDS = new Map();
    recordsToRemove.forEach(record => {
        var _a, _b, _c;
        const recordDS = (_a = record.getDataSource) === null || _a === void 0 ? void 0 : _a.call(record);
        let originDS = null;
        if (recordDS) {
            originDS = ((_b = recordDS.getOriginDataSources()) === null || _b === void 0 ? void 0 : _b[0]) || recordDS;
        }
        else {
            // Fallback: try to get origin from outputDS
            originDS = ((_c = outputDS.getOriginDataSources()) === null || _c === void 0 ? void 0 : _c[0]) || null;
        }
        if (originDS) {
            if (!recordsByOriginDS.has(originDS)) {
                recordsByOriginDS.set(originDS, []);
            }
            recordsByOriginDS.get(originDS).push(record);
        }
    });
    debugLogger.log('RESULTS-MODE', {
        event: 'records-grouped-by-origin',
        widgetId,
        originDSCount: recordsByOriginDS.size,
        recordsByOriginDS: Array.from(recordsByOriginDS.entries()).map(([ds, records]) => ({
            originDSId: ds.id,
            recordCount: records.length
        }))
    });
    // For each origin DS, get current selection and remove matching records
    recordsByOriginDS.forEach((recordsToRemoveForOrigin, originDS) => {
        try {
            // Get current selected records from this origin DS
            const currentSelectedRecords = originDS.getSelectedRecords() || [];
            const currentSelectedIds = originDS.getSelectedRecordIds() || [];
            debugLogger.log('RESULTS-MODE', {
                event: 'processing-origin-ds-removal',
                widgetId,
                originDSId: originDS.id,
                currentSelectedCount: currentSelectedRecords.length,
                recordsToRemoveCount: recordsToRemoveForOrigin.length
            });
            // Build Set of IDs to remove for fast lookup
            const idsToRemove = new Set(recordsToRemoveForOrigin.map(record => record.getId()));
            // Filter out records that match IDs to remove
            const remainingRecords = currentSelectedRecords.filter(record => {
                const recordId = record.getId();
                return !idsToRemove.has(recordId);
            });
            const remainingIds = remainingRecords.map(record => record.getId());
            debugLogger.log('RESULTS-MODE', {
                event: 'origin-ds-removal-filtered',
                widgetId,
                originDSId: originDS.id,
                removedCount: currentSelectedRecords.length - remainingRecords.length,
                remainingCount: remainingRecords.length
            });
            // Update selection in origin DS
            if (typeof originDS.selectRecordsByIds === 'function') {
                originDS.selectRecordsByIds(remainingIds, remainingRecords);
            }
            // Publish selection change message for this origin DS
            jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageManager.getInstance().publishMessage(new jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataRecordsSelectionChangeMessage(widgetId, remainingRecords, [originDS.id]));
            debugLogger.log('RESULTS-MODE', {
                event: 'origin-ds-selection-updated',
                widgetId,
                originDSId: originDS.id,
                remainingRecordsCount: remainingRecords.length,
                messagePublished: true
            });
        }
        catch (error) {
            debugLogger.log('RESULTS-MODE', {
                event: 'origin-ds-removal-error',
                widgetId,
                originDSId: originDS.id,
                error: error instanceof Error ? error.message : 'Unknown error',
                errorStack: error instanceof Error ? error.stack : undefined
            });
        }
    });
    debugLogger.log('RESULTS-MODE', {
        event: 'removing-records-from-origin-selections-complete',
        widgetId,
        originDSCount: recordsByOriginDS.size,
        totalRecordsRemoved: recordsToRemove.length
    });
}
/**
 * Clears all records from the accumulated results data source.
 *
 * @param accumulatedDS - The accumulated results data source to clear
 */
function clearAccumulatedResults(accumulatedDS) {
    debugLogger.log('RESULTS-MODE', {
        event: 'clearing-accumulated-results',
        accumulatedDSId: accumulatedDS.id
    });
    // Set status to NotReady to clear records
    accumulatedDS.setStatus(jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceStatus.NotReady);
    accumulatedDS.setCountStatus(jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceStatus.NotReady);
    // Clear any loaded records if possible
    // Note: May need to use DataSourceManager methods depending on ExB API
    debugLogger.log('RESULTS-MODE', {
        event: 'accumulated-results-cleared',
        accumulatedDSId: accumulatedDS.id
    });
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts":
/*!*****************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QUERYSIMPLE_SELECTION_EVENT: () => (/* binding */ QUERYSIMPLE_SELECTION_EVENT),
/* harmony export */   clearSelectionInDataSources: () => (/* binding */ clearSelectionInDataSources),
/* harmony export */   dispatchSelectionEvent: () => (/* binding */ dispatchSelectionEvent),
/* harmony export */   findClearResultsButton: () => (/* binding */ findClearResultsButton),
/* harmony export */   getOriginDataSource: () => (/* binding */ getOriginDataSource),
/* harmony export */   publishSelectionMessage: () => (/* binding */ publishSelectionMessage),
/* harmony export */   selectRecordsAndPublish: () => (/* binding */ selectRecordsAndPublish),
/* harmony export */   selectRecordsInDataSources: () => (/* binding */ selectRecordsInDataSources)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _graphics_layer_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./graphics-layer-utils */ "./your-extensions/widgets/query-simple/src/runtime/graphics-layer-utils.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/**
 * Utility functions for managing feature selection in QuerySimple widget.
 * Consolidates repeated selection logic to follow DRY principles.
 */
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_2__.createQuerySimpleDebugLogger)();
/**
 * Custom event name for QuerySimple to notify Widget of selection changes.
 */
const QUERYSIMPLE_SELECTION_EVENT = 'querysimple-selection-changed';
/**
 * Dispatches a custom selection event to the window so the main Widget can track state.
 *
 * @param widgetId - The widget ID
 * @param recordIds - Array of selected record IDs
 * @param outputDS - The output data source
 * @param queryItemConfigId - The config ID of the query that produced these results
 */
function dispatchSelectionEvent(widgetId, recordIds, outputDS, queryItemConfigId) {
    const originDS = getOriginDataSource(outputDS);
    const dataSourceId = originDS === null || originDS === void 0 ? void 0 : originDS.id;
    debugLogger.log('TASK', {
        event: 'dispatchSelectionEvent',
        widgetId,
        recordCount: recordIds.length,
        outputDsId: outputDS.id,
        queryItemConfigId
    });
    const selectionEvent = new CustomEvent(QUERYSIMPLE_SELECTION_EVENT, {
        detail: {
            widgetId,
            recordIds,
            dataSourceId,
            outputDsId: outputDS.id,
            queryItemConfigId
        },
        bubbles: true,
        cancelable: true
    });
    window.dispatchEvent(selectionEvent);
}
/**
 * Gets the origin data source from an output data source.
 * @param outputDS - The output data source
 * @returns The origin data source, or null if not available
 */
function getOriginDataSource(outputDS) {
    if (!outputDS)
        return null;
    // Try to get origin data sources
    const originDataSources = typeof outputDS.getOriginDataSources === 'function'
        ? outputDS.getOriginDataSources()
        : [];
    if (originDataSources && originDataSources.length > 0) {
        return originDataSources[0];
    }
    // If it doesn't have origin data sources, it might already be an origin data source
    // FeatureLayerDataSource should have a 'layer' property or 'getLayer' method
    if (outputDS.layer || outputDS.getLayer || outputDS.type === 'FeatureLayer') {
        return outputDS;
    }
    return null;
}
/**
 * Selects records in both the origin data source and output data source.
 * This is the standard pattern used throughout the widget for selection.
 * Optionally uses graphics layer for highlighting (independent of layer visibility).
 *
 * @param outputDS - The output data source
 * @param recordIds - Array of record IDs to select
 * @param records - Optional array of FeatureDataRecord objects for proper highlighting
 * @param useGraphicsLayer - Whether to use graphics layer for highlighting (default: false)
 * @param graphicsLayer - Graphics layer instance (required if useGraphicsLayer is true)
 * @param mapView - Map view instance (required if useGraphicsLayer is true)
 */
function selectRecordsInDataSources(outputDS_1, recordIds_1, records_1) {
    return __awaiter(this, arguments, void 0, function* (outputDS, recordIds, records, useGraphicsLayer = false, graphicsLayer, mapView) {
        var _a, _b, _c, _d, _e, _f;
        if (!outputDS)
            return;
        const originDS = getOriginDataSource(outputDS);
        // If using graphics layer, add graphics for highlighting
        if (useGraphicsLayer && graphicsLayer && mapView && records && records.length > 0) {
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'selectRecordsInDataSources-using-graphics-layer',
                recordIdsCount: recordIds.length,
                recordsCount: records.length,
                graphicsLayerId: graphicsLayer.id,
                timestamp: Date.now()
            });
            yield (0,_graphics_layer_utils__WEBPACK_IMPORTED_MODULE_1__.addHighlightGraphics)(graphicsLayer, records, mapView);
            // Still select in data source for state management (but layer selection won't show if layer is off)
            if (originDS && typeof originDS.selectRecordsByIds === 'function') {
                originDS.selectRecordsByIds(recordIds, records);
            }
        }
        else {
            // Original behavior: use layer selection
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'selectRecordsInDataSources-using-layer-selection',
                recordIdsCount: recordIds.length,
                useGraphicsLayer,
                hasGraphicsLayer: !!graphicsLayer,
                hasMapView: !!mapView,
                timestamp: Date.now()
            });
            // Select in origin data source (the actual layer)
            if (originDS && typeof originDS.selectRecordsByIds === 'function') {
                // Log layer state right before selection to see what's available when selection works
                const layer = originDS.layer || ((_b = (_a = originDS).getLayer) === null || _b === void 0 ? void 0 : _b.call(_a));
                if (layer) {
                    debugLogger.log('GRAPHICS-LAYER', {
                        event: 'selectRecordsByIds-layer-state',
                        originDSId: originDS.id,
                        layerId: layer.id,
                        hasLayerMap: !!layer.map,
                        hasLayerView: !!layer.view,
                        hasLayerParent: !!layer.parent,
                        parentType: ((_c = layer.parent) === null || _c === void 0 ? void 0 : _c.type) || 'none',
                        parentHasMap: !!((_d = layer.parent) === null || _d === void 0 ? void 0 : _d.map),
                        parentHasView: !!((_e = layer.parent) === null || _e === void 0 ? void 0 : _e.view),
                        parentHasViews: !!((_f = layer.parent) === null || _f === void 0 ? void 0 : _f.views),
                        timestamp: Date.now()
                    });
                }
                originDS.selectRecordsByIds(recordIds, records);
            }
        }
        // Always update outputDS for widget's internal state
        if (typeof outputDS.selectRecordsByIds === 'function') {
            outputDS.selectRecordsByIds(recordIds, records);
        }
    });
}
/**
 * Clears the `data_s` parameter from the URL hash.
 * Experience Builder automatically adds `data_s` when selections are made,
 * but doesn't remove it when selections are cleared, causing "dirty hash" issues.
 *
 * This function ensures the hash is clean when selections are cleared.
 */
function clearDataSParameterFromHash() {
    const hash = window.location.hash.substring(1);
    if (!hash)
        return;
    const urlParams = new URLSearchParams(hash);
    if (urlParams.has('data_s')) {
        urlParams.delete('data_s');
        const newHash = urlParams.toString();
        debugLogger.log('HASH', {
            event: 'clearDataSParameterFromHash',
            hadDataS: true,
            newHash: newHash ? `#${newHash}` : '(empty)',
            timestamp: Date.now()
        });
        // Update the URL without triggering a reload
        // Always preserve pathname and query string, only update hash
        window.history.replaceState(null, '', window.location.pathname + window.location.search + (newHash ? `#${newHash}` : ''));
    }
}
/**
 * Clears selection in both the origin data source and output data source.
 * Optionally clears graphics layer if using graphics layer mode.
 * Also clears the `data_s` parameter from the URL hash to prevent "dirty hash" issues.
 *
 * @param widgetId - The widget ID (needed to publish message)
 * @param outputDS - The output data source
 * @param useGraphicsLayer - Whether to clear graphics layer (default: false)
 * @param graphicsLayer - Graphics layer instance (required if useGraphicsLayer is true)
 */
function clearSelectionInDataSources(widgetId_1, outputDS_1) {
    return __awaiter(this, arguments, void 0, function* (widgetId, outputDS, useGraphicsLayer = false, graphicsLayer) {
        // Clear graphics layer if using graphics layer mode
        if (useGraphicsLayer && graphicsLayer) {
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'clearSelectionInDataSources-clearing-graphics-layer',
                graphicsLayerId: graphicsLayer.id,
                timestamp: Date.now()
            });
            (0,_graphics_layer_utils__WEBPACK_IMPORTED_MODULE_1__.clearGraphicsLayer)(graphicsLayer);
        }
        // Clear data source selection for state management
        yield selectRecordsInDataSources(outputDS, [], undefined, false);
        // Publish the empty selection message so the Map selection (blue boxes) clears
        if (outputDS) {
            publishSelectionMessage(widgetId, [], outputDS, true);
        }
        // Clear data_s parameter from hash to prevent dirty hash
        // Experience Builder adds data_s when selections are made but doesn't remove it when cleared
        clearDataSParameterFromHash();
    });
}
/**
 * Publishes a selection change message for the given records and data sources.
 *
 * @param widgetId - The widget ID
 * @param records - Array of FeatureDataRecord objects (empty array to clear)
 * @param outputDS - The output data source
 * @param alsoPublishToOutputDS - Whether to also publish a message for outputDS (default: false)
 */
function publishSelectionMessage(widgetId, records, outputDS, alsoPublishToOutputDS = false) {
    if (!outputDS)
        return;
    const originDS = getOriginDataSource(outputDS);
    if (originDS) {
        jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageManager.getInstance().publishMessage(new jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataRecordsSelectionChangeMessage(widgetId, records, [originDS.id]));
    }
    else if (alsoPublishToOutputDS) {
        jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageManager.getInstance().publishMessage(new jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataRecordsSelectionChangeMessage(widgetId, records, [outputDS.id]));
    }
    // Optionally publish to outputDS as well (for some edge cases)
    if (alsoPublishToOutputDS && originDS) {
        jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageManager.getInstance().publishMessage(new jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataRecordsSelectionChangeMessage(widgetId, records, [outputDS.id]));
    }
}
/**
 * Selects records and publishes the selection message in one call.
 * This is the most common pattern - selecting records and notifying the map.
 * Optionally uses graphics layer for highlighting (independent of layer visibility).
 *
 * @param widgetId - The widget ID
 * @param outputDS - The output data source
 * @param recordIds - Array of record IDs to select
 * @param records - Array of FeatureDataRecord objects for proper highlighting
 * @param alsoPublishToOutputDS - Whether to also publish a message for outputDS (default: false)
 * @param useGraphicsLayer - Whether to use graphics layer for highlighting (default: false)
 * @param graphicsLayer - Graphics layer instance (required if useGraphicsLayer is true)
 * @param mapView - Map view instance (required if useGraphicsLayer is true)
 */
function selectRecordsAndPublish(widgetId_1, outputDS_1, recordIds_1, records_1) {
    return __awaiter(this, arguments, void 0, function* (widgetId, outputDS, recordIds, records, alsoPublishToOutputDS = false, useGraphicsLayer = false, graphicsLayer, mapView) {
        yield selectRecordsInDataSources(outputDS, recordIds, records, useGraphicsLayer, graphicsLayer, mapView);
        publishSelectionMessage(widgetId, records, outputDS, alsoPublishToOutputDS);
    });
}
/**
 * Finds the "Clear results" button in the DOM.
 * Used when programmatically triggering the clear action.
 *
 * @returns The clear button element, or null if not found
 */
function findClearResultsButton() {
    // Hardened: Prioritize the one in the results header, fallback to any
    return (document.querySelector('.query-result__header button[aria-label="Clear results"]') ||
        document.querySelector('button[aria-label="Clear results"]'));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/simple-list.tsx":
/*!**************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/simple-list.tsx ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SimpleList: () => (/* binding */ SimpleList)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _query_result_item__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./query-result-item */ "./your-extensions/widgets/query-simple/src/runtime/query-result-item.tsx");
/* harmony import */ var _query_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./query-utils */ "./your-extensions/widgets/query-simple/src/runtime/query-utils.ts");
/* harmony import */ var _useAutoHeight__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./useAutoHeight */ "./your-extensions/widgets/query-simple/src/runtime/useAutoHeight.tsx");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");

/** @jsx jsx */






const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_6__.createQuerySimpleDebugLogger)();
const getStyle = (isAutoHeight) => {
    return (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
    display: flex;
    flex: 1 1 ${isAutoHeight ? 'auto' : 0};
    overflow: auto;
    max-height: ${isAutoHeight ? 'calc(61.8vh - 100px)' : 'none'};

    .query-result-item + .query-result-item {
      margin-left: 0.5rem;
      margin-top: 0;
    }

    &.vertical {
      flex-direction: column;
      .list-items {
        position: relative;
        flex-direction: column;
      }

      .feature-info-component {
        width: 100%;
      }

      .query-result-item + .query-result-item {
        margin-left: 0;
        margin-top: 0.5rem;
      }
    }
    .list-items {
      display: flex;
    }
  `;
};
function SimpleList(props) {
    const { widgetId, outputDS, queryItem, records, direction, onEscape, onSelectChange, onRemove, expandByDefault, itemExpandStates, removedRecordIds, onRenderDone } = props;
    const [popupTemplate, setPopupTemplate] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState();
    const [defaultPopupTemplate, setDefaultPopupTemplate] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState();
    const isAutoHeight = (0,_useAutoHeight__WEBPACK_IMPORTED_MODULE_5__.useAutoHeight)();
    const resultContainerRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    // Filter out removed records
    const filteredRecords = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return (records === null || records === void 0 ? void 0 : records.filter(record => !(removedRecordIds === null || removedRecordIds === void 0 ? void 0 : removedRecordIds.has(record.getId())))) || [];
    }, [records, removedRecordIds]);
    // Notify parent when records are rendered (for auto-switch logic)
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (onRenderDone && filteredRecords.length > 0) {
            debugLogger.log('RESULTS-MODE', {
                event: 'SimpleList-onRenderDone-called',
                widgetId,
                queryItemConfigId: queryItem.configId,
                filteredRecordsCount: filteredRecords.length,
                totalRecordsCount: records.length,
                removedRecordIdsCount: (removedRecordIds === null || removedRecordIds === void 0 ? void 0 : removedRecordIds.size) || 0,
                timestamp: Date.now()
            });
            onRenderDone({ dataItems: filteredRecords });
        }
    }, [filteredRecords, onRenderDone, widgetId, queryItem.configId, records.length, removedRecordIds]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        (0,_query_utils__WEBPACK_IMPORTED_MODULE_4__.getPopupTemplate)(outputDS, queryItem).then(rs => {
            setPopupTemplate(rs.popupTemplate);
            setDefaultPopupTemplate(rs.defaultPopupTemplate);
        });
    }, [outputDS, queryItem]);
    const handleKeyUp = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((evt) => {
        if (evt.key === 'Escape') {
            evt.stopPropagation();
            onEscape();
        }
    }, [onEscape]);
    const handleKeyDown = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((evt) => {
        if (evt.key === ' ') {
            evt.preventDefault();
        }
    }, []);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { onKeyUp: handleKeyUp, onKeyDown: handleKeyDown, className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)({ vertical: direction === _config__WEBPACK_IMPORTED_MODULE_2__.ListDirection.Vertical }), css: getStyle(isAutoHeight), ref: resultContainerRef, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'list-items px-4 py-1', role: 'listbox', children: filteredRecords.map((dataItem) => {
                const recordId = dataItem.getId();
                // Use individual state from map if available, otherwise fall back to expandByDefault
                const individualExpandState = itemExpandStates === null || itemExpandStates === void 0 ? void 0 : itemExpandStates.get(recordId);
                const expandByDefaultValue = individualExpandState !== undefined ? individualExpandState : (expandByDefault !== null && expandByDefault !== void 0 ? expandByDefault : true);
                return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_result_item__WEBPACK_IMPORTED_MODULE_3__.QueryResultItem, { data: dataItem, dataSource: outputDS, widgetId: widgetId, popupTemplate: popupTemplate, defaultPopupTemplate: defaultPopupTemplate, expandByDefault: expandByDefaultValue, onClick: onSelectChange, onRemove: onRemove }, recordId));
            }) }) }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts":
/*!**********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/translations/default.ts ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
    _widgetLabel: 'QuerySimple',
    reset: 'Reset',
    searchLayer: 'Search Layer',
    apply: 'Search',
    noDataAvailable: 'Error in loading data',
    noQueryItem: 'No query',
    newQueryHint: 'Add content by clicking the "{label}" button on the configuration panel',
    attributeFilter: 'Attribute filter',
    spatialFilter: 'Spatial filter',
    spatialFilterType_CurrentMapExtent: 'Current map extent',
    spatialFilterType_InteractiveDrawMode: 'Drawn graphic',
    results: 'Results',
    featuresDisplayed: 'Features displayed',
    clearResult: 'Clear results',
    checkResult: 'Check results',
    mapMustBeVisible: 'Map must be visible',
    chooseFilterType: 'Choose the filter type',
    chooseGeometryType: 'Choose the geometry type',
    clearDrawing: 'Clear the graphic when applying',
    featureFromDs: 'Selecting features from data source',
    featureFromMap: 'Geometries from a map',
    chooseFilterLayer: 'Choose a filter layer',
    selectedRecords: '{num} records are selected for the filter',
    spatialNotAvailable: 'Spatial filter is not available here.',
    spatialNotAvailableDesc: 'Spatial filter is not supported for a data source that already contains a spatial query.',
    preconfigured: 'Preconfigured',
    runtime: 'Runtime',
    selectLoaded: 'Select loaded',
    retrieving: 'Retrieving query results...',
    zoomToSelected: 'Zoom to selected',
    queryTab: 'Query',
    resultsTab: 'Results',
    expandAll: 'Expand all',
    collapseAll: 'Collapse all',
    addToMap: 'Add to map',
    resultsMode: 'Results mode',
    createNewResults: 'Create new results',
    addToCurrentResults: 'Add to current results',
    removeFromCurrentResults: 'Remove from current results',
    resultsModeDisabledRemove: 'Remove from current results (no accumulated results)',
    resultsModeDesc: 'Controls how query results are combined:\n New: Each query replaces previous results\n Add: New results are added to existing results\n Remove: Matching results are removed from existing results',
    resultsModeNew: 'New',
    resultsModeAdd: 'Add',
    resultsModeRemove: 'Remove'
});


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/useAutoHeight.tsx":
/*!****************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/useAutoHeight.tsx ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   useAutoHeight: () => (/* binding */ useAutoHeight)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var _widget_context__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./widget-context */ "./your-extensions/widgets/query-simple/src/runtime/widget-context.tsx");
/** @jsx jsx */



function useAutoHeight() {
    const layoutInfo = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useContext(_widget_context__WEBPACK_IMPORTED_MODULE_2__.QueryWidgetContext);
    let layoutId;
    let layoutItemId;
    if (layoutInfo.includes(':')) {
        const r = layoutInfo.split(':');
        layoutId = r[0];
        layoutItemId = r[1];
    }
    const isAuto = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        var _a, _b, _c, _d;
        const layoutItem = (_b = (_a = state.appConfig.layouts[layoutId]) === null || _a === void 0 ? void 0 : _a.content) === null || _b === void 0 ? void 0 : _b[layoutItemId];
        return ((_d = (_c = layoutItem === null || layoutItem === void 0 ? void 0 : layoutItem.setting) === null || _c === void 0 ? void 0 : _c.autoProps) === null || _d === void 0 ? void 0 : _d.height) === jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.LayoutItemSizeModes.Auto;
    });
    return isAuto;
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/widget-config.ts":
/*!***************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/widget-config.ts ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getWidgetRuntimeDataMap: () => (/* binding */ getWidgetRuntimeDataMap)
/* harmony export */ });
/* harmony import */ var jimu_icons_svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-icons/svg/outlined/suggested/warning.svg */ "./jimu-icons/svg/outlined/suggested/warning.svg");
/* harmony import */ var jimu_icons_svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-icons/svg/outlined/suggested/error.svg */ "./jimu-icons/svg/outlined/suggested/error.svg");
/* harmony import */ var jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var jimu_icons_svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-icons/svg/outlined/directional/arrow-left.svg */ "./jimu-icons/svg/outlined/directional/arrow-left.svg");
/* harmony import */ var jimu_icons_svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var jimu_icons_svg_outlined_directional_right_svg__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-icons/svg/outlined/directional/right.svg */ "./jimu-icons/svg/outlined/directional/right.svg");
/* harmony import */ var jimu_icons_svg_outlined_directional_right_svg__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_directional_right_svg__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var jimu_icons_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-icons/svg/outlined/editor/trash.svg */ "./jimu-icons/svg/outlined/editor/trash.svg");
/* harmony import */ var jimu_icons_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var jimu_icons_svg_outlined_application_more_horizontal_svg__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jimu-icons/svg/outlined/application/more-horizontal.svg */ "./jimu-icons/svg/outlined/application/more-horizontal.svg");
/* harmony import */ var jimu_icons_svg_outlined_application_more_horizontal_svg__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_application_more_horizontal_svg__WEBPACK_IMPORTED_MODULE_5__);






const getWidgetRuntimeDataMap = () => ({
    iconMap: {
        iconQuery: __webpack_require__(/*! ../../icon.svg */ "./your-extensions/widgets/query-simple/icon.svg"),
        iconWarning: (jimu_icons_svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_0___default()),
        iconError: (jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_1___default()),
        arrowNavBack: (jimu_icons_svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2___default()),
        arrowRight: (jimu_icons_svg_outlined_directional_right_svg__WEBPACK_IMPORTED_MODULE_3___default()),
        toolDelete: (jimu_icons_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_4___default()),
        iconMore: (jimu_icons_svg_outlined_application_more_horizontal_svg__WEBPACK_IMPORTED_MODULE_5___default())
    }
});


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/widget-context.tsx":
/*!*****************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/widget-context.tsx ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryWidgetContext: () => (/* binding */ QueryWidgetContext)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");

const QueryWidgetContext = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createContext(null);


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/zoom-utils.ts":
/*!************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/zoom-utils.ts ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   zoomToRecords: () => (/* binding */ zoomToRecords)
/* harmony export */ });
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/**
 * Shared zoom utilities for QuerySimple widget.
 *
 * Provides pure functions for zooming to feature records that can be used
 * by both React hooks and data actions.
 */
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};

const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_0__.createQuerySimpleDebugLogger)();
const DEFAULT_PADDING = {
    left: 50,
    right: 50,
    top: 50,
    bottom: 50
};
/**
 * Pure function to zoom to feature records with padding.
 *
 * Extracts geometries from records, calculates extent, and zooms the map view
 * using mapView.goTo() with configurable padding. Handles both single and
 * multiple geometries by calculating union extent when needed.
 *
 * @param mapView - The map view to zoom
 * @param records - Array of feature data records to zoom to
 * @param options - Optional zoom options including padding
 * @returns Promise that resolves when zoom completes
 */
function zoomToRecords(mapView, records, options) {
    return __awaiter(this, void 0, void 0, function* () {
        var _a, _b;
        if (!mapView || !records || records.length === 0) {
            return;
        }
        const padding = (options === null || options === void 0 ? void 0 : options.padding) || DEFAULT_PADDING;
        try {
            // Extract geometries from records
            const geometries = records
                .map(record => record.getJSAPIGeometry())
                .filter(geom => geom != null);
            if (geometries.length === 0) {
                return;
            }
            let extent = null;
            if (geometries.length === 1) {
                // Single geometry - get its extent
                extent = geometries[0].extent || ((_b = (_a = geometries[0]).getExtent) === null || _b === void 0 ? void 0 : _b.call(_a));
            }
            else {
                // Multiple geometries - calculate union extent
                const extents = geometries
                    .map(geom => { var _a, _b; return geom.extent || ((_b = (_a = geom).getExtent) === null || _b === void 0 ? void 0 : _b.call(_a)); })
                    .filter(e => e != null);
                if (extents.length > 0) {
                    extent = extents[0].clone();
                    for (let i = 1; i < extents.length; i++) {
                        extent = extent.union(extents[i]);
                    }
                }
            }
            if (extent) {
                yield mapView.goTo(extent, { padding });
            }
        }
        catch (error) {
            debugLogger.log('ZOOM', {
                event: 'zoom-goTo-error',
                error: error instanceof Error ? error.message : String(error),
                recordsCount: records.length
            });
            throw error;
        }
    });
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/version-manager.ts":
/*!*********************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/version-manager.ts ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   versionManager: () => (/* binding */ versionManager)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");

class VersionManager extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.BaseVersionManager {
    constructor() {
        super(...arguments);
        this.versions = [{
                version: '1.0.0',
                description: 'The first version.',
                upgrader: (oldConfig) => {
                    return oldConfig;
                }
            }];
    }
}
const versionManager = new VersionManager();


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/version.ts":
/*!*************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/version.ts ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   WIDGET_VERSION: () => (/* binding */ WIDGET_VERSION)
/* harmony export */ });
/**
 * Widget version number.
 * Base version matches Experience Builder version (1.19.0).
 * Release number increments on major changes (001, 002, 003, ...).
 * Minor version increments on smaller fixes between major releases (r015.1, r015.2, ...).
 *
 * To increment:
 * - Major change: Update RELEASE_NUMBER (e.g., 015 -> 016) and reset MINOR_VERSION to 0
 * - Minor fix: Increment MINOR_VERSION (e.g., 1 -> 2) while keeping same RELEASE_NUMBER
 */
const BASE_VERSION = '1.19.0';
const RELEASE_NUMBER = '018'; // Increment on major changes (001, 002, 003, ...)
const MINOR_VERSION = '56'; // Increment on minor fixes between major releases (1, 2, 3, ...)
const WIDGET_VERSION = MINOR_VERSION && Number(MINOR_VERSION) > 0
    ? `${BASE_VERSION}-r${RELEASE_NUMBER}.${MINOR_VERSION}`
    : `${BASE_VERSION}-r${RELEASE_NUMBER}`;


/***/ }),

/***/ "./your-extensions/widgets/shared-code/common.ts":
/*!*******************************************************!*\
  !*** ./your-extensions/widgets/shared-code/common.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DataSourceTip: () => (/* reexport safe */ _common_data_source_tip__WEBPACK_IMPORTED_MODULE_3__.DataSourceTip),
/* harmony export */   DialogPanel: () => (/* reexport safe */ _common_common_components__WEBPACK_IMPORTED_MODULE_0__.DialogPanel),
/* harmony export */   EntityStatusType: () => (/* reexport safe */ _common_common_components__WEBPACK_IMPORTED_MODULE_0__.EntityStatusType),
/* harmony export */   ErrorMessage: () => (/* reexport safe */ _common_common_components__WEBPACK_IMPORTED_MODULE_0__.ErrorMessage),
/* harmony export */   StateHolder: () => (/* reexport safe */ _common_common_components__WEBPACK_IMPORTED_MODULE_0__.StateHolder),
/* harmony export */   StatusIndicator: () => (/* reexport safe */ _common_common_components__WEBPACK_IMPORTED_MODULE_0__.StatusIndicator),
/* harmony export */   createGetI18nMessage: () => (/* reexport safe */ _common_utils__WEBPACK_IMPORTED_MODULE_1__.createGetI18nMessage),
/* harmony export */   createHelperSimpleDebugLogger: () => (/* reexport safe */ _common_debug_logger__WEBPACK_IMPORTED_MODULE_4__.createHelperSimpleDebugLogger),
/* harmony export */   createQuerySimpleDebugLogger: () => (/* reexport safe */ _common_debug_logger__WEBPACK_IMPORTED_MODULE_4__.createQuerySimpleDebugLogger),
/* harmony export */   getFieldInfosInPopupContent: () => (/* reexport safe */ _common_utils__WEBPACK_IMPORTED_MODULE_1__.getFieldInfosInPopupContent),
/* harmony export */   toggleItemInArray: () => (/* reexport safe */ _common_utils__WEBPACK_IMPORTED_MODULE_1__.toggleItemInArray),
/* harmony export */   useDataSourceExists: () => (/* reexport safe */ _common_use_ds_exists__WEBPACK_IMPORTED_MODULE_2__.useDataSourceExists)
/* harmony export */ });
/* harmony import */ var _common_common_components__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./common/common-components */ "./your-extensions/widgets/shared-code/common/common-components.tsx");
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./common/utils */ "./your-extensions/widgets/shared-code/common/utils.tsx");
/* harmony import */ var _common_use_ds_exists__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./common/use-ds-exists */ "./your-extensions/widgets/shared-code/common/use-ds-exists.tsx");
/* harmony import */ var _common_data_source_tip__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./common/data-source-tip */ "./your-extensions/widgets/shared-code/common/data-source-tip.tsx");
/* harmony import */ var _common_debug_logger__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./common/debug-logger */ "./your-extensions/widgets/shared-code/common/debug-logger.ts");
/**
 * Shared common utilities and components for Experience Builder widgets
 *
 * This module exports common functionality that can be shared between
 * query-simple, helper-simple, and other custom widgets.
 *
 * This is the entry point for 'widgets/shared-code/common'
 */







/***/ }),

/***/ "./your-extensions/widgets/shared-code/common/common-components.tsx":
/*!**************************************************************************!*\
  !*** ./your-extensions/widgets/shared-code/common/common-components.tsx ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DialogPanel: () => (/* binding */ DialogPanel),
/* harmony export */   EntityStatusType: () => (/* binding */ EntityStatusType),
/* harmony export */   ErrorMessage: () => (/* binding */ ErrorMessage),
/* harmony export */   StateHolder: () => (/* binding */ StateHolder),
/* harmony export */   StatusIndicator: () => (/* binding */ StatusIndicator)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_theme__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-theme */ "jimu-theme");
/* harmony import */ var jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-icons/svg/outlined/suggested/error.svg */ "./jimu-icons/svg/outlined/suggested/error.svg");
/* harmony import */ var jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_4__);

/** @jsx jsx */




const { useState } = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React;
/**
 * A simple Functional Component storing some States that are commonly used
 */
const StateHolder = (props) => {
    const { initState = {}, children } = props;
    const defaultStateMap = {
        visible: true,
        refContainer: null
    };
    const useStateMap = {
        visible: useState('visible' in initState ? initState.visible : defaultStateMap.visible),
        refContainer: useState('refContainer' in initState ? initState.refContainer : defaultStateMap.refContainer),
        customData: useState(Object.assign({}, initState.customData))
    };
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: children(useStateMap) });
};
/**
 * A dialog popup
 */
const DialogPanel = (0,jimu_theme__WEBPACK_IMPORTED_MODULE_3__.withTheme)((props) => {
    const { theme, panelVisible, setPanelVisible, getI18nMessage, isModal = true, title = getI18nMessage('queryMessage'), bodyContent = '', hasHeader = true, hasFooter = true } = props;
    const toggle = () => { setPanelVisible(false); };
    const getContent = () => (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [hasHeader &&
                (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.PanelHeader, { className: 'py-2', title: title, onClose: toggle }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.ModalBody, { children: bodyContent }), hasFooter &&
                (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.ModalFooter, { children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { onClick: toggle, children: getI18nMessage('ok') }) })] });
    const generalClassName = 'ui-unit-dialog-panel';
    const renderModalContent = () => {
        return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Modal, { className: generalClassName, isOpen: panelVisible, toggle: toggle, backdrop: 'static', children: getContent() }));
    };
    const renderNonModalContent = () => {
        const getStyle = () => (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
      &.ui-unit-dialog-panel.modal-dialog {
        margin: 0;
        width: 100%;
        .modal-content {
          background-color: ${theme.ref.palette.neutral[600]};
          color: ${theme.ref.palette.black};
          font-size: .75rem;
          font-weight: 400;
          border: none;
          .panel-header {
            font-size: .8125rem;
            padding: .625rem;
          }
          .modal-body {
            padding: 0 .625rem .75rem;
            white-space: normal;
          }
        }
      }
    `;
        return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: `${generalClassName} modal-dialog ${panelVisible ? '' : 'collapse'}`, css: getStyle(), children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'modal-content', children: getContent() }) }));
    };
    return isModal ? renderModalContent() : renderNonModalContent();
});
var EntityStatusType;
(function (EntityStatusType) {
    EntityStatusType["None"] = "";
    EntityStatusType["Init"] = "init";
    EntityStatusType["Loading"] = "loading";
    EntityStatusType["Loaded"] = "loaded";
    EntityStatusType["Warning"] = "warning";
    EntityStatusType["Error"] = "error";
})(EntityStatusType || (EntityStatusType = {}));
/**
 * An animatable icon representing status
 */
const StatusIndicator = (0,jimu_theme__WEBPACK_IMPORTED_MODULE_3__.withTheme)((props) => {
    const { theme, className, title, statusType } = props;
    const getStyle = () => {
        var _a, _b, _c, _d;
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
    &.ui-unit-status-indicator {
      display: flex;
      &.ui-unit-status-indicator_status-type-loading {
        &:before {
          @keyframes loading {
            0% {transform: rotate(0deg); };
            100% {transform: rotate(360deg)};
          }
          content: '';
          width: 1rem;
          height: 1rem;
          display: block;
          border: 1px solid ${(_b = (_a = theme === null || theme === void 0 ? void 0 : theme.ref.palette) === null || _a === void 0 ? void 0 : _a.neutral) === null || _b === void 0 ? void 0 : _b[500]};
          border-radius: 50%;
          border-top: 1px solid ${(_d = (_c = theme === null || theme === void 0 ? void 0 : theme.sys.color) === null || _c === void 0 ? void 0 : _c.primary) === null || _d === void 0 ? void 0 : _d.main};
          box-sizing: border-box;
          animation: loading 2s infinite linear;
          margin-right: .25rem;
        }
      }
    }
  `;
    };
    return (statusType &&
        (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: `${className !== null && className !== void 0 ? className : ''} ui-unit-status-indicator ui-unit-status-indicator_status-type-${statusType}`, title: title, css: getStyle() }));
});
/**
 * Simple error message component for displaying user-facing errors.
 * Use DataSourceTip for data source-related errors.
 */
const ErrorMessage = (props) => {
    const { error, className = '', onDismiss } = props;
    if (!error) {
        return null;
    }
    const errorStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
    display: flex;
    align-items: center;
    padding: 0.5rem;
    margin: 0.5rem 0;
    background-color: var(--sys-color-error-light);
    color: var(--sys-color-error-dark);
    border-radius: 4px;
    font-size: 0.875rem;
    gap: 0.5rem;
    
    .error-icon {
      flex-shrink: 0;
    }
    
    .error-text {
      flex: 1;
    }
    
    .error-dismiss {
      flex-shrink: 0;
      cursor: pointer;
      padding: 0.25rem;
      &:hover {
        opacity: 0.7;
      }
    }
  `;
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: `error-message ${className}`, css: errorStyle, role: "alert", children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Icon, { icon: (jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_4___default()), className: "error-icon", size: "sm" }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { className: "error-text", children: error }), onDismiss && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: "sm", type: "tertiary", icon: true, onClick: onDismiss, className: "error-dismiss", "aria-label": "Dismiss error", children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Icon, { icon: (__webpack_require__(/*! jimu-icons/svg/outlined/editor/close.svg */ "./jimu-icons/svg/outlined/editor/close.svg")["default"]), size: "sm" }) }))] }));
};


/***/ }),

/***/ "./your-extensions/widgets/shared-code/common/data-source-tip.tsx":
/*!************************************************************************!*\
  !*** ./your-extensions/widgets/shared-code/common/data-source-tip.tsx ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DataSourceTip: () => (/* binding */ DataSourceTip)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _common_components__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./common-components */ "./your-extensions/widgets/shared-code/common/common-components.tsx");
/* harmony import */ var jimu_icons_svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-icons/svg/outlined/suggested/warning.svg */ "./jimu-icons/svg/outlined/suggested/warning.svg");
/* harmony import */ var jimu_icons_svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jimu-icons/svg/outlined/suggested/error.svg */ "./jimu-icons/svg/outlined/suggested/error.svg");
/* harmony import */ var jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _use_ds_exists__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./use-ds-exists */ "./your-extensions/widgets/shared-code/common/use-ds-exists.tsx");

/** @jsx jsx */






/**
 * Show icon and message if the data source doesn't work.
 * @param props
 * @returns
 */
function DataSourceTip(props) {
    var _a, _b, _c;
    const { widgetId, useDataSource, onStatusChange, onDataSourceCreated, showMessage = false } = props;
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.defaultMessages);
    const dsExists = (0,_use_ds_exists__WEBPACK_IMPORTED_MODULE_6__.useDataSourceExists)({ widgetId, useDataSourceId: useDataSource.dataSourceId });
    const [dsStatus, setDsStatus] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const [dataSource, setDataSource] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const handleDsInfoChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((info) => {
        if (info) {
            const { status, instanceStatus } = info;
            if (instanceStatus === jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.NotCreated) {
                setDsStatus('creating');
                onStatusChange === null || onStatusChange === void 0 ? void 0 : onStatusChange(false);
            }
            else if (instanceStatus === jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.CreateError || status === jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.LoadError) {
                setDsStatus('error');
                onStatusChange === null || onStatusChange === void 0 ? void 0 : onStatusChange(false);
            }
            else if (status === jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.NotReady) {
                setDsStatus('warning');
                onStatusChange === null || onStatusChange === void 0 ? void 0 : onStatusChange(false);
            }
            else {
                setDsStatus(null);
                onStatusChange === null || onStatusChange === void 0 ? void 0 : onStatusChange(true);
            }
        }
    }, [onStatusChange]);
    const handleDsCreated = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((ds) => {
        setDataSource(ds);
        onDataSourceCreated === null || onDataSourceCreated === void 0 ? void 0 : onDataSourceCreated(ds);
    }, [onDataSourceCreated]);
    const handleDsCreateFailed = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        setDataSource(null);
        setDsStatus('error');
        onStatusChange === null || onStatusChange === void 0 ? void 0 : onStatusChange(false);
    }, [onStatusChange]);
    let statusIcon;
    let statusMsg;
    let color;
    if (dsStatus === 'creating') {
        statusIcon = (jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_5___default());
        statusMsg = getI18nMessage('loading');
    }
    else if (!dsExists || dsStatus === 'error') {
        statusIcon = (jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_5___default());
        statusMsg = getI18nMessage('dataSourceCreateError');
        color = 'var(--sys-color-error-main)';
    }
    else if (dsStatus === 'warning') {
        let label = '';
        const originDs = (_a = dataSource === null || dataSource === void 0 ? void 0 : dataSource.getOriginDataSources()) === null || _a === void 0 ? void 0 : _a[0];
        if (originDs) {
            label = originDs.getLabel() || originDs.getDataSourceJson().sourceLabel;
        }
        else if (dataSource) {
            label = dataSource.getLabel() || dataSource.getDataSourceJson().label;
        }
        const widgetId = jimu_core__WEBPACK_IMPORTED_MODULE_1__.appConfigUtils.getWidgetIdByOutputDataSource(useDataSource);
        const appState = ((_b = window === null || window === void 0 ? void 0 : window.jimuConfig) === null || _b === void 0 ? void 0 : _b.isBuilder)
            ? (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.getAppStore)().getState().appStateInBuilder
            : (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.getAppStore)().getState();
        const widgetLabel = (_c = appState.appConfig.widgets[widgetId]) === null || _c === void 0 ? void 0 : _c.label;
        color = 'var(--sys-color-warning-dark)';
        statusIcon = (jimu_icons_svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_4___default());
        statusMsg = getI18nMessage('outputDataIsNotGenerated', {
            outputDsLabel: label !== null && label !== void 0 ? label : '',
            sourceWidgetName: widgetLabel !== null && widgetLabel !== void 0 ? widgetLabel : ''
        });
    }
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [dsExists && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceComponent, { useDataSource: useDataSource, onDataSourceInfoChange: handleDsInfoChange, onDataSourceCreated: handleDsCreated, onCreateDataSourceFailed: handleDsCreateFailed })), dsStatus === 'creating' && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_common_components__WEBPACK_IMPORTED_MODULE_3__.StatusIndicator, { statusType: _common_components__WEBPACK_IMPORTED_MODULE_3__.EntityStatusType.Loading, title: statusMsg }), (!dsExists || dsStatus === 'error' || dsStatus === 'warning') && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'd-flex align-items-center', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { title: statusMsg, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: 'sm', type: 'tertiary', icon: true, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Icon, { icon: statusIcon, color: color }) }) }), showMessage && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'status-message', children: statusMsg })] }))] }));
}


/***/ }),

/***/ "./your-extensions/widgets/shared-code/common/debug-logger.ts":
/*!********************************************************************!*\
  !*** ./your-extensions/widgets/shared-code/common/debug-logger.ts ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createHelperSimpleDebugLogger: () => (/* binding */ createHelperSimpleDebugLogger),
/* harmony export */   createQuerySimpleDebugLogger: () => (/* binding */ createQuerySimpleDebugLogger)
/* harmony export */ });
/**
 * Configurable debug logging utility for Experience Builder widgets
 *
 * Usage:
 * - Add ?debug=all to URL to see all debug logs
 * - Add ?debug=HASH,FORM to see specific feature logs
 * - Add ?debug=false to disable all debug logs
 *
 * Features (QuerySimple):
 * - BUG: Known bugs/issues (always logs, even if debug=false) - Use format: bugId, category, description
 * - HASH: Hash parameter processing
 * - FORM: Query form interactions
 * - TASK: Query task management
 * - ZOOM: Zoom behavior
 * - MAP-EXTENT: Map extent changes
 * - DATA-ACTION: Data action execution (Add to Map, etc.)
 * - GROUP: Query grouping and dropdown selection
 * - SELECTION: Selection detection and identify popup tracking
 * - WIDGET-STATE: Widget lifecycle events (open/close handshake)
 * - RESTORE: Selection restoration when widget opens
 * - RESULTS-MODE: Results management mode selection (Create new, Add to, Remove from)
 * - EXPAND-COLLAPSE: Expand/collapse state management for result items
 * - GRAPHICS-LAYER: Graphics layer highlighting (independent of layer visibility)
 *
 * Temporary Migration Features (will be removed after migration complete):
 * - CHUNK-1-COMPARE: Chunk 1 (URL Parameter) comparison logs
 * - CHUNK-1-MISMATCH: Chunk 1 mismatch warnings
 * - CHUNK-2-COMPARE: Chunk 2 (Visibility) comparison logs
 * - CHUNK-2-MISMATCH: Chunk 2 mismatch warnings
 * - CHUNK-3-COMPARE: Chunk 3 (Selection/Restoration) comparison logs
 * - CHUNK-3-DECISION: Chunk 3 decision point logs
 * - CHUNK-3-FALLBACK: Chunk 3 fallback logic logs
 * - CHUNK-4-COMPARE: Chunk 4 (Graphics Layer) comparison logs
 * - CHUNK-5-COMPARE: Chunk 5 (Accumulated Records) comparison logs
 * - CHUNK-6-COMPARE: Chunk 6 (Map View) comparison logs
 * - CHUNK-6-MISMATCH: Chunk 6 mismatch warnings
 * - CHUNK-7-COMPARE: Chunk 7 (Events) comparison logs
 *
 * Features (HelperSimple):
 * - HASH: Hash parameter monitoring and widget opening
 * - SELECTION: Selection tracking from QuerySimple
 * - WIDGET-STATE: Widget state handshake (open/close events)
 * - RESTORE: Selection restoration attempts and results
 */
class DebugLogger {
    constructor(options) {
        this.enabledFeatures = new Set();
        this.initialized = false;
        this.widgetName = options.widgetName;
        this.features = options.features;
    }
    initialize() {
        if (this.initialized)
            return;
        // Check URL parameters (both current window and parent for iframes)
        let urlParams = new URLSearchParams(window.location.search);
        let debugValue = urlParams.get('debug');
        // If not found in current window, check parent (needed for ExB iframes)
        if (debugValue === null && window.parent !== window) {
            try {
                urlParams = new URLSearchParams(window.parent.location.search);
                debugValue = urlParams.get('debug');
            }
            catch (e) {
                // Cross-origin restriction might prevent access to parent location
            }
        }
        if (debugValue === 'false') {
            // Explicitly disabled
            this.initialized = true;
            return;
        }
        if (debugValue === 'all') {
            // Enable all features only if explicitly set to 'all'
            this.features.forEach(feature => {
                if (feature !== 'all' && feature !== 'false') {
                    this.enabledFeatures.add(feature);
                }
            });
            console.log(`[${this.widgetName}-DEBUG] Enabled ALL features:`, Array.from(this.enabledFeatures));
        }
        else if (debugValue !== null) {
            // Parse comma-separated feature list
            const requestedFeatures = debugValue.split(',').map(f => f.trim().toUpperCase());
            requestedFeatures.forEach(feature => {
                if (feature.toUpperCase() === 'ALL') {
                    // Enable all features for this widget
                    this.features.forEach(f => {
                        if (f !== 'all' && f !== 'false') {
                            this.enabledFeatures.add(f);
                        }
                    });
                }
                else if (this.features.includes(feature)) {
                    this.enabledFeatures.add(feature);
                }
            });
        }
        this.initialized = true;
    }
    isEnabled(feature) {
        this.initialize();
        // BUG level always enabled, regardless of debug switches (even if debug=false)
        if (feature === 'BUG') {
            return true;
        }
        if (this.enabledFeatures.has('all')) {
            return true;
        }
        return this.enabledFeatures.has(feature);
    }
    log(feature, data) {
        // BUG level always logs, even if debug=false
        if (feature === 'BUG') {
            const logData = Object.assign({ feature: 'BUG', bugId: data.bugId || 'UNKNOWN', category: data.category || 'GENERAL', timestamp: new Date().toISOString() }, data);
            // Use console.warn with emoji format to make bugs stand out
            console.warn(`[${this.widgetName.toUpperCase()}  BUG]`, JSON.stringify(logData, null, 2));
            return;
        }
        // Regular feature logging (existing behavior)
        if (!this.isEnabled(feature)) {
            return;
        }
        const logData = Object.assign({ feature, timestamp: new Date().toISOString() }, data);
        console.log(`[${this.widgetName.toUpperCase()}-${feature}]`, JSON.stringify(logData, null, 2));
    }
    getConfig() {
        this.initialize();
        const urlParams = new URLSearchParams(window.location.search);
        const debugValue = urlParams.get('debug');
        return {
            enabledFeatures: Array.from(this.enabledFeatures),
            debugValue
        };
    }
}
/**
 * Creates a debug logger instance for QuerySimple widget
 */
function createQuerySimpleDebugLogger() {
    return new DebugLogger({
        widgetName: 'QUERYSIMPLE',
        features: [
            'HASH', 'FORM', 'TASK', 'ZOOM', 'MAP-EXTENT', 'DATA-ACTION', 'GROUP',
            'SELECTION', 'WIDGET-STATE', 'RESTORE', 'RESULTS-MODE', 'EXPAND-COLLAPSE', 'GRAPHICS-LAYER',
            // Temporary migration features (will be removed after migration complete)
            'CHUNK-1-COMPARE', 'CHUNK-1-MISMATCH', 'CHUNK-2-COMPARE', 'CHUNK-2-MISMATCH', 'CHUNK-3-COMPARE', 'CHUNK-3-DECISION', 'CHUNK-3-FALLBACK',
            'CHUNK-4-COMPARE', 'CHUNK-5-COMPARE', 'CHUNK-6-COMPARE', 'CHUNK-6-MISMATCH', 'CHUNK-7-COMPARE'
        ]
    });
}
/**
 * Creates a debug logger instance for HelperSimple widget
 */
function createHelperSimpleDebugLogger() {
    return new DebugLogger({
        widgetName: 'HELPERSIMPLE',
        features: ['HASH', 'SELECTION', 'WIDGET-STATE', 'RESTORE']
    });
}


/***/ }),

/***/ "./your-extensions/widgets/shared-code/common/use-ds-exists.tsx":
/*!**********************************************************************!*\
  !*** ./your-extensions/widgets/shared-code/common/use-ds-exists.tsx ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   useDataSourceExists: () => (/* binding */ useDataSourceExists)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");

function useDataSourceExists(props) {
    const { widgetId, useDataSourceId } = props;
    const exists = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        var _a;
        let appConfig;
        if (window.jimuConfig.isBuilder) {
            appConfig = state.appStateInBuilder.appConfig;
        }
        else {
            appConfig = state.appConfig;
        }
        const useDataSources = (_a = appConfig.widgets[widgetId].useDataSources) !== null && _a !== void 0 ? _a : [];
        return useDataSources.some(useDs => useDs.dataSourceId === useDataSourceId);
    });
    return exists;
}


/***/ }),

/***/ "./your-extensions/widgets/shared-code/common/utils.tsx":
/*!**************************************************************!*\
  !*** ./your-extensions/widgets/shared-code/common/utils.tsx ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createGetI18nMessage: () => (/* binding */ createGetI18nMessage),
/* harmony export */   getFieldInfosInPopupContent: () => (/* binding */ getFieldInfosInPopupContent),
/* harmony export */   toggleItemInArray: () => (/* binding */ toggleItemInArray)
/* harmony export */ });
/**
 * Toggle items in an array
 */
const toggleItemInArray = (item, items = []) => items.includes(item) ? items.filter(i => i !== item) : [...items, item];
/**
 * A factory to create a function of getting i18n message
 */
function createGetI18nMessage(options) {
    const { intl, defaultMessages = {} } = options || {};
    const getI18nMessage = (id, options) => {
        const { messages, values } = options || {};
        return intl.formatMessage({ id, defaultMessage: (messages || defaultMessages)[id] }, values);
    };
    return getI18nMessage;
}
function getFieldInfosInPopupContent(popupInfo) {
    var _a;
    const result = [];
    if (((_a = popupInfo === null || popupInfo === void 0 ? void 0 : popupInfo.popupElements) === null || _a === void 0 ? void 0 : _a.length) > 0) {
        popupInfo.popupElements.forEach(element => {
            var _a;
            if (element.type === 'fields' && ((_a = element.fieldInfos) === null || _a === void 0 ? void 0 : _a.length) > 0) {
                result.push(...element.fieldInfos);
            }
        });
    }
    return result;
}


/***/ }),

/***/ "@emotion/react/jsx-runtime":
/*!************************************!*\
  !*** external "jimu-core/emotion" ***!
  \************************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE__emotion_react_jsx_runtime__;

/***/ }),

/***/ "jimu-arcgis":
/*!******************************!*\
  !*** external "jimu-arcgis" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_arcgis__;

/***/ }),

/***/ "jimu-core":
/*!****************************!*\
  !*** external "jimu-core" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_core__;

/***/ }),

/***/ "jimu-layouts/layout-runtime":
/*!**********************************************!*\
  !*** external "jimu-layouts/layout-runtime" ***!
  \**********************************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_layouts_layout_runtime__;

/***/ }),

/***/ "jimu-theme":
/*!*****************************!*\
  !*** external "jimu-theme" ***!
  \*****************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_theme__;

/***/ }),

/***/ "jimu-ui":
/*!**************************!*\
  !*** external "jimu-ui" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_ui__;

/***/ }),

/***/ "jimu-ui/basic/sql-expression-runtime":
/*!*******************************************************!*\
  !*** external "jimu-ui/basic/sql-expression-runtime" ***!
  \*******************************************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_ui_basic_sql_expression_runtime__;

/***/ }),

/***/ "react":
/*!**********************************!*\
  !*** external "jimu-core/react" ***!
  \**********************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_react__;

/***/ }),

/***/ "widgets/shared-code/common":
/*!*********************************************!*\
  !*** external "widgets/shared-code/common" ***!
  \*********************************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_widgets_shared_code_common__;

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/publicPath */
/******/ 	(() => {
/******/ 		__webpack_require__.p = "";
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry needs to be wrapped in an IIFE because it needs to be isolated against other entry modules.
(() => {
/*!******************************************!*\
  !*** ./jimu-core/lib/set-public-path.ts ***!
  \******************************************/
/**
 * Webpack will replace __webpack_public_path__ with __webpack_require__.p to set the public path dynamically.
 * The reason why we can't set the publicPath in webpack config is: we change the publicPath when download.
 * */
__webpack_require__.p = window.jimuConfig.baseUrl;

})();

// This entry needs to be wrapped in an IIFE because it needs to be in strict mode.
(() => {
"use strict";
/*!*********************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/widget.tsx ***!
  \*********************************************************************/
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   __set_webpack_public_path__: () => (/* binding */ __set_webpack_public_path__),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _widget_config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./widget-config */ "./your-extensions/widgets/query-simple/src/runtime/widget-config.ts");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");
/* harmony import */ var _version_manager__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../version-manager */ "./your-extensions/widgets/query-simple/src/version-manager.ts");
/* harmony import */ var _query_task_list__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./query-task-list */ "./your-extensions/widgets/query-simple/src/runtime/query-task-list.tsx");
/* harmony import */ var _query_task_list_inline__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./query-task-list-inline */ "./your-extensions/widgets/query-simple/src/runtime/query-task-list-inline.tsx");
/* harmony import */ var _query_task_list_popper_wrapper__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./query-task-list-popper-wrapper */ "./your-extensions/widgets/query-simple/src/runtime/query-task-list-popper-wrapper.tsx");
/* harmony import */ var _widget_context__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./widget-context */ "./your-extensions/widgets/query-simple/src/runtime/widget-context.tsx");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/* harmony import */ var _selection_utils__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");
/* harmony import */ var _version__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../version */ "./your-extensions/widgets/query-simple/src/version.ts");
/* harmony import */ var _hooks_use_url_consumption__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./hooks/use-url-consumption */ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-url-consumption.ts");
/* harmony import */ var _hooks_use_widget_visibility__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./hooks/use-widget-visibility */ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-widget-visibility.ts");
/* harmony import */ var _hooks_use_map_view__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./hooks/use-map-view */ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-map-view.ts");
/* harmony import */ var _hooks_use_graphics_layer__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./hooks/use-graphics-layer */ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-graphics-layer.ts");
/* harmony import */ var _hooks_use_accumulated_records__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./hooks/use-accumulated-records */ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-accumulated-records.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};

/** @jsx jsx */














// Chunk 1: URL Parameter Consumption Manager (r018.8)

// Chunk 2: Widget Visibility Engine Manager (r018.13) - Step 2.3: Switch to manager

// Chunk 6: Map View Management Manager (r018.14) - Step 6.1: Add manager without integration

// Chunk 4: Graphics Layer Management Manager (r018.24) - Step 4.2: Parallel execution

// Chunk 5: Accumulated Records Management Manager (r018.26) - Step 5.1: Add manager without integration

const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_12__.createQuerySimpleDebugLogger)();
const { iconMap } = (0,_widget_config__WEBPACK_IMPORTED_MODULE_5__.getWidgetRuntimeDataMap)();
/**
 * Custom event name for requesting restoration when identify popup closes.
 * Dispatched by query-result component when identify popup closes and selection was cleared.
 */
const RESTORE_ON_IDENTIFY_CLOSE_EVENT = 'querysimple-restore-on-identify-close';
/**
 * Custom event name for HelperSimple to notify QuerySimple to process hash parameters.
 * Dispatched by HelperSimple after opening a widget in a controller.
 */
const OPEN_WIDGET_EVENT = 'helpersimple-open-widget';
/**
 * QuerySimple Widget
 *
 * A high-performance query widget for ArcGIS Experience Builder that provides:
 * - Universal SQL optimization for database index usage
 * - Dual-mode deep linking (hash fragments and query strings)
 * - Results accumulation across multiple queries
 * - Selection persistence and restoration
 * - Graphics layer highlighting for map visualization
 *
 * Architecture:
 * This widget follows a "Hook & Shell" pattern where complex logic is extracted into
 * manager classes (UrlConsumptionManager, WidgetVisibilityManager, MapViewManager)
 * to keep the main widget class clean and maintainable.
 *
 * @since 1.19.0-r018.18
 * @see {@link UrlConsumptionManager} for URL parameter handling
 * @see {@link WidgetVisibilityManager} for panel visibility detection
 * @see {@link MapViewManager} for map view reference management
 */
class Widget extends jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.PureComponent {
    constructor() {
        super(...arguments);
        // Chunk 1: URL Parameter Consumption Manager (r018.8)
        this.urlConsumptionManager = new _hooks_use_url_consumption__WEBPACK_IMPORTED_MODULE_15__.UrlConsumptionManager();
        // Chunk 2: Widget Visibility Engine Manager (r018.13) - Step 2.3: Switch to manager
        this.visibilityManager = new _hooks_use_widget_visibility__WEBPACK_IMPORTED_MODULE_16__.WidgetVisibilityManager();
        // Refs must be declared before managers that use them
        this.widgetRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.createRef();
        this.graphicsLayerRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.createRef();
        this.mapViewRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.createRef();
        // Chunk 6: Map View Management Manager (r018.16) - Step 6.3: Switch to manager
        this.mapViewManager = new _hooks_use_map_view__WEBPACK_IMPORTED_MODULE_17__.MapViewManager(this.mapViewRef);
        // Chunk 4: Graphics Layer Management Manager (r018.24) - Step 4.2: Parallel execution
        this.graphicsLayerManager = new _hooks_use_graphics_layer__WEBPACK_IMPORTED_MODULE_18__.GraphicsLayerManager(this.graphicsLayerRef, this.mapViewRef);
        // Chunk 5: Accumulated Records Management Manager (r018.26) - Step 5.1: Add manager without integration
        this.accumulatedRecordsManager = new _hooks_use_accumulated_records__WEBPACK_IMPORTED_MODULE_19__.AccumulatedRecordsManager();
        // Track processed hash parameters to prevent re-execution when switching queries
        // Key: "shortId:value" (e.g., "pin:2223059013")
        this.processedHashParamsRef = new Set();
        this.state = {
            resultsMode: _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.NewSelection, // Default mode
            activeTab: 'query'
        };
        /**
         * Handles tab change between "Query" and "Results" tabs.
         *
         * @param activeTab - The tab to switch to ('query' or 'results')
         *
         * @since 1.19.0-r017.0
         */
        this.handleTabChange = (activeTab) => {
            this.setState({ activeTab });
        };
        /**
         * Handles HelperSimple's open widget event.
         * QuerySimple should only process hash parameters when HelperSimple explicitly opens the widget.
         * This ensures HelperSimple remains the orchestrator and prevents autonomous hash processing.
         */
        this.handleOpenWidgetEvent = (event) => {
            var _a, _b, _c, _d, _e, _f, _g, _h;
            const { id } = this.props;
            debugLogger.log('HASH-EXEC', {
                event: 'querysimple-handleopenwidgetevent-received',
                widgetId: id,
                eventWidgetId: (_a = event.detail) === null || _a === void 0 ? void 0 : _a.widgetId,
                matches: ((_b = event.detail) === null || _b === void 0 ? void 0 : _b.widgetId) === id,
                currentState: {
                    shouldUseInitialQueryValueForSelection: this.state.shouldUseInitialQueryValueForSelection,
                    hasInitialQueryValue: !!this.state.initialQueryValue,
                    initialQueryValueShortId: (_c = this.state.initialQueryValue) === null || _c === void 0 ? void 0 : _c.shortId,
                    initialQueryValueValue: (_d = this.state.initialQueryValue) === null || _d === void 0 ? void 0 : _d.value,
                    processedHashParams: Array.from(this.processedHashParamsRef),
                    currentUrlHash: window.location.hash.substring(1)
                },
                timestamp: Date.now()
            });
            // Only process if this event is for our widget
            if (((_e = event.detail) === null || _e === void 0 ? void 0 : _e.widgetId) !== id) {
                debugLogger.log('HASH-EXEC', {
                    event: 'querysimple-handleopenwidgetevent-ignored-wrong-widget',
                    widgetId: id,
                    eventWidgetId: (_f = event.detail) === null || _f === void 0 ? void 0 : _f.widgetId,
                    timestamp: Date.now()
                });
                return;
            }
            // NOTE: We don't check processed hashes here anymore
            // The check happens in onInitialValueFound after we know which shortId:value pair is being processed
            debugLogger.log('HASH', {
                event: 'open-widget-event-received-from-helpersimple',
                widgetId: id,
                timestamp: Date.now()
            });
            // Set flag to allow query-task-list to use initialQueryValue for selection
            // This ensures we only react to hash parameters when HelperSimple explicitly opens us
            // Using state instead of ref ensures React triggers re-render so query-task-list sees the change
            this.setState({ shouldUseInitialQueryValueForSelection: true }, () => {
                var _a, _b;
                debugLogger.log('HASH-EXEC', {
                    event: 'querysimple-flag-set-true-state-updated',
                    widgetId: id,
                    newState: {
                        shouldUseInitialQueryValueForSelection: this.state.shouldUseInitialQueryValueForSelection,
                        hasInitialQueryValue: !!this.state.initialQueryValue,
                        initialQueryValueShortId: (_a = this.state.initialQueryValue) === null || _a === void 0 ? void 0 : _a.shortId,
                        initialQueryValueValue: (_b = this.state.initialQueryValue) === null || _b === void 0 ? void 0 : _b.value
                    },
                    timestamp: Date.now()
                });
            });
            debugLogger.log('HASH', {
                event: 'shouldUseInitialQueryValueForSelection-flag-set-true',
                widgetId: id,
                flagValue: true,
                timestamp: Date.now()
            });
            // Now check URL parameters - HelperSimple has explicitly opened us
            debugLogger.log('HASH-EXEC', {
                event: 'querysimple-checkurlparameters-starting',
                widgetId: this.props.id,
                currentState: {
                    shouldUseInitialQueryValueForSelection: this.state.shouldUseInitialQueryValueForSelection,
                    hasInitialQueryValue: !!this.state.initialQueryValue,
                    initialQueryValueShortId: (_g = this.state.initialQueryValue) === null || _g === void 0 ? void 0 : _g.shortId,
                    initialQueryValueValue: (_h = this.state.initialQueryValue) === null || _h === void 0 ? void 0 : _h.value
                },
                timestamp: Date.now()
            });
            this.urlConsumptionManager.checkUrlParameters(this.props, this.state.resultsMode, {
                onInitialValueFound: (value) => {
                    var _a, _b, _c, _d, _e, _f, _g, _h;
                    debugLogger.log('HASH-EXEC', {
                        event: 'querysimple-oninitialvaluefound-called',
                        widgetId: this.props.id,
                        hasValue: !!value,
                        valueShortId: value === null || value === void 0 ? void 0 : value.shortId,
                        valueValue: value === null || value === void 0 ? void 0 : value.value,
                        currentState: {
                            shouldUseInitialQueryValueForSelection: this.state.shouldUseInitialQueryValueForSelection,
                            hasInitialQueryValue: !!this.state.initialQueryValue,
                            initialQueryValueShortId: (_a = this.state.initialQueryValue) === null || _a === void 0 ? void 0 : _a.shortId,
                            initialQueryValueValue: (_b = this.state.initialQueryValue) === null || _b === void 0 ? void 0 : _b.value
                        },
                        timestamp: Date.now()
                    });
                    if (value) {
                        // Check if this specific shortId:value combination was already processed
                        const paramKey = `${value.shortId}:${value.value}`;
                        if (this.processedHashParamsRef.has(paramKey)) {
                            debugLogger.log('HASH-EXEC', {
                                event: 'querysimple-oninitialvaluefound-already-processed',
                                widgetId: this.props.id,
                                shortId: value.shortId,
                                value: value.value,
                                paramKey,
                                processedParams: Array.from(this.processedHashParamsRef),
                                timestamp: Date.now()
                            });
                            return;
                        }
                        // Only update if the value or shortId has changed to avoid unnecessary re-renders
                        const willUpdate = ((_c = this.state.initialQueryValue) === null || _c === void 0 ? void 0 : _c.shortId) !== value.shortId || ((_d = this.state.initialQueryValue) === null || _d === void 0 ? void 0 : _d.value) !== value.value;
                        debugLogger.log('HASH-EXEC', {
                            event: 'querysimple-oninitialvaluefound-will-update',
                            widgetId: this.props.id,
                            willUpdate,
                            previousShortId: (_e = this.state.initialQueryValue) === null || _e === void 0 ? void 0 : _e.shortId,
                            previousValue: (_f = this.state.initialQueryValue) === null || _f === void 0 ? void 0 : _f.value,
                            newShortId: value.shortId,
                            newValue: value.value,
                            timestamp: Date.now()
                        });
                        if (willUpdate) {
                            debugLogger.log('HASH', {
                                event: 'url-param-detected',
                                widgetId: this.props.id,
                                shortId: value.shortId,
                                value: value.value,
                                foundIn: 'manager',
                                triggeredBy: 'helpersimple-open-widget-event',
                                previousShortId: (_g = this.state.initialQueryValue) === null || _g === void 0 ? void 0 : _g.shortId,
                                previousValue: (_h = this.state.initialQueryValue) === null || _h === void 0 ? void 0 : _h.value,
                                timestamp: Date.now()
                            });
                            // Reset to New mode when hash parameter is detected to avoid bugs with accumulation modes
                            // OLD IMPLEMENTATION (parallel execution)
                            const oldNeedsModeReset = this.state.resultsMode !== _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.NewSelection;
                            const oldCurrentMode = this.state.resultsMode;
                            this.setState(Object.assign({ initialQueryValue: { shortId: value.shortId, value: value.value } }, (oldNeedsModeReset ? {
                                resultsMode: _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.NewSelection,
                                accumulatedRecords: []
                            } : {})), () => {
                                var _a, _b;
                                debugLogger.log('HASH-EXEC', {
                                    event: 'querysimple-initialqueryvalue-state-updated',
                                    widgetId: this.props.id,
                                    newState: {
                                        shouldUseInitialQueryValueForSelection: this.state.shouldUseInitialQueryValueForSelection,
                                        hasInitialQueryValue: !!this.state.initialQueryValue,
                                        initialQueryValueShortId: (_a = this.state.initialQueryValue) === null || _a === void 0 ? void 0 : _a.shortId,
                                        initialQueryValueValue: (_b = this.state.initialQueryValue) === null || _b === void 0 ? void 0 : _b.value,
                                        resultsMode: this.state.resultsMode
                                    },
                                    timestamp: Date.now()
                                });
                            });
                            // NEW IMPLEMENTATION (parallel execution)
                            if (oldNeedsModeReset) {
                                const newResetResult = this.accumulatedRecordsManager.resetModeOnHashDetection(this.props.id, oldCurrentMode);
                                // COMPARISON LOGGING
                                debugLogger.log('CHUNK-5-COMPARE', {
                                    event: 'mode-reset-on-hash-detection-comparison',
                                    widgetId: this.props.id,
                                    context: 'helpersimple-open-widget-event',
                                    oldImplementation: {
                                        needsModeReset: oldNeedsModeReset,
                                        currentMode: oldCurrentMode,
                                        newMode: _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.NewSelection,
                                        accumulatedRecordsCleared: oldNeedsModeReset
                                    },
                                    newImplementation: {
                                        needsModeReset: oldNeedsModeReset,
                                        currentMode: oldCurrentMode,
                                        newMode: newResetResult.resultsMode,
                                        accumulatedRecordsCleared: newResetResult.accumulatedRecords.length === 0
                                    },
                                    match: newResetResult.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.NewSelection &&
                                        newResetResult.accumulatedRecords.length === 0,
                                    timestamp: Date.now()
                                });
                            }
                        }
                    }
                    else {
                        debugLogger.log('HASH-EXEC', {
                            event: 'querysimple-oninitialvaluefound-no-value-clearing',
                            widgetId: this.props.id,
                            hasCurrentInitialQueryValue: !!this.state.initialQueryValue,
                            timestamp: Date.now()
                        });
                        // No matching parameters found - clear state
                        if (this.state.initialQueryValue) {
                            this.setState({ initialQueryValue: undefined });
                        }
                    }
                },
                onModeResetNeeded: () => {
                    // Reset to New mode when hash parameter is detected
                    // OLD IMPLEMENTATION (parallel execution)
                    const oldCurrentMode = this.state.resultsMode;
                    const oldNeedsReset = oldCurrentMode !== _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.NewSelection;
                    if (oldNeedsReset) {
                        debugLogger.log('HASH', {
                            event: 'mode-reset-needed-on-hash-detection',
                            widgetId: this.props.id,
                            currentMode: oldCurrentMode,
                            triggeredBy: 'helpersimple-open-widget-event',
                            timestamp: Date.now()
                        });
                        this.setState({
                            resultsMode: _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.NewSelection,
                            accumulatedRecords: []
                        });
                        // NEW IMPLEMENTATION (parallel execution)
                        const newResetResult = this.accumulatedRecordsManager.resetModeOnHashDetection(this.props.id, oldCurrentMode);
                        // COMPARISON LOGGING
                        debugLogger.log('CHUNK-5-COMPARE', {
                            event: 'mode-reset-on-hash-detection-comparison',
                            widgetId: this.props.id,
                            context: 'helpersimple-open-widget-event-mode-reset',
                            oldImplementation: {
                                needsModeReset: oldNeedsReset,
                                currentMode: oldCurrentMode,
                                newMode: _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.NewSelection,
                                accumulatedRecordsCleared: oldNeedsReset
                            },
                            newImplementation: {
                                needsModeReset: oldNeedsReset,
                                currentMode: oldCurrentMode,
                                newMode: newResetResult.resultsMode,
                                accumulatedRecordsCleared: newResetResult.accumulatedRecords.length === 0
                            },
                            match: newResetResult.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.NewSelection &&
                                newResetResult.accumulatedRecords.length === 0,
                            timestamp: Date.now()
                        });
                    }
                }
            });
        };
        /**
         * Notifies HelperSimple widget of selection changes via custom event.
         *
         * This method dispatches a custom event that HelperSimple listens to for tracking
         * selection state. Called by QueryTaskResult component when user selects records.
         *
         * @param recordIds - Array of selected record IDs (objectIds from the feature layer)
         * @param dataSourceId - Optional data source ID for the selected records
         *
         * @since 1.19.0-r017.0
         */
        this.notifyHelperSimpleOfSelection = (recordIds, dataSourceId) => {
            const { id } = this.props;
            const event = new CustomEvent(_selection_utils__WEBPACK_IMPORTED_MODULE_13__.QUERYSIMPLE_SELECTION_EVENT, {
                detail: {
                    widgetId: id,
                    recordIds,
                    dataSourceId
                },
                bubbles: true,
                cancelable: true
            });
            window.dispatchEvent(event);
        };
        /**
         * Handles widget panel visibility changes from WidgetVisibilityManager.
         *
         * This method implements the selection restoration pattern:
         * - When panel opens: Restores selection to map if widget has accumulated records or last selection
         * - When panel closes: Clears selection from map (but preserves widget state for restoration)
         *
         * The restoration logic respects the current results mode:
         * - "Add to" / "Remove from" modes: Uses accumulated records for restoration
         * - "New" mode: Uses lastSelection state for restoration
         *
         * @param isVisible - True if widget panel is visible, false if hidden
         *
         * @since 1.19.0-r018.13 (Chunk 2: Manager implementation)
         * @see {@link WidgetVisibilityManager} for visibility detection implementation
         */
        this.handleVisibilityChange = (isVisible) => {
            var _a, _b, _c, _d;
            if (isVisible) {
                // When panel opens, check if we have selection to restore
                const isAccumulationMode = this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.AddToSelection ||
                    this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection;
                const hasAccumulatedRecords = this.state.accumulatedRecords && this.state.accumulatedRecords.length > 0;
                const hasSelectionState = this.state.hasSelection || false;
                const hasSelectionToRestore = isAccumulationMode
                    ? hasAccumulatedRecords
                    : hasSelectionState;
                debugLogger.log('RESTORE', {
                    event: 'panel-opened-checking-selection',
                    widgetId: this.props.id,
                    resultsMode: this.state.resultsMode,
                    isAccumulationMode,
                    hasSelection: hasSelectionState,
                    hasAccumulatedRecords,
                    accumulatedRecordsCount: ((_a = this.state.accumulatedRecords) === null || _a === void 0 ? void 0 : _a.length) || 0,
                    selectionRecordCount: this.state.selectionRecordCount || 0,
                    hasLastSelection: !!this.state.lastSelection,
                    lastSelectionRecordCount: ((_b = this.state.lastSelection) === null || _b === void 0 ? void 0 : _b.recordIds.length) || 0,
                    hasSelectionToRestore,
                    decisionLogic: {
                        'isAccumulationMode': isAccumulationMode,
                        'hasAccumulatedRecords': hasAccumulatedRecords,
                        'hasSelectionState': hasSelectionState,
                        'calculated-hasSelectionToRestore': hasSelectionToRestore,
                        'will-call-addSelectionToMap': hasSelectionToRestore
                    }
                });
                // Add selection to map if we have one
                if (hasSelectionToRestore) {
                    debugLogger.log('RESTORE', {
                        event: 'panel-opened-calling-addSelectionToMap',
                        widgetId: this.props.id,
                        reason: 'hasSelectionToRestore-is-true'
                    });
                    this.addSelectionToMap();
                }
                else {
                    debugLogger.log('RESTORE', {
                        event: 'panel-opened-skipping-addSelectionToMap',
                        widgetId: this.props.id,
                        reason: 'hasSelectionToRestore-is-false',
                        why: isAccumulationMode
                            ? 'no-accumulated-records'
                            : 'no-hasSelection-state'
                    });
                }
            }
            else {
                // When panel closes, clear selection from map only (keep widget state)
                const isAccumulationMode = this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.AddToSelection ||
                    this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection;
                const hasAccumulatedRecords = this.state.accumulatedRecords && this.state.accumulatedRecords.length > 0;
                const hasSelectionState = this.state.hasSelection || false;
                const hasSelectionToClear = isAccumulationMode
                    ? hasAccumulatedRecords
                    : hasSelectionState;
                debugLogger.log('RESTORE', {
                    event: 'panel-closed-checking-selection',
                    widgetId: this.props.id,
                    resultsMode: this.state.resultsMode,
                    isAccumulationMode,
                    hasSelection: hasSelectionState,
                    hasAccumulatedRecords,
                    accumulatedRecordsCount: ((_c = this.state.accumulatedRecords) === null || _c === void 0 ? void 0 : _c.length) || 0,
                    selectionRecordCount: this.state.selectionRecordCount || 0,
                    hasLastSelection: !!this.state.lastSelection,
                    lastSelectionRecordCount: ((_d = this.state.lastSelection) === null || _d === void 0 ? void 0 : _d.recordIds.length) || 0,
                    hasSelectionToClear,
                    decisionLogic: {
                        'isAccumulationMode': isAccumulationMode,
                        'hasAccumulatedRecords': hasAccumulatedRecords,
                        'hasSelectionState': hasSelectionState,
                        'calculated-hasSelectionToClear': hasSelectionToClear,
                        'will-call-clearSelectionFromMap': hasSelectionToClear
                    }
                });
                if (hasSelectionToClear) {
                    debugLogger.log('RESTORE', {
                        event: 'panel-closed-calling-clearSelectionFromMap',
                        widgetId: this.props.id,
                        reason: 'hasSelectionToClear-is-true'
                    });
                    this.clearSelectionFromMap();
                }
                else {
                    debugLogger.log('RESTORE', {
                        event: 'panel-closed-no-selection-to-clear',
                        widgetId: this.props.id,
                        reason: 'hasSelectionToClear-is-false',
                        why: isAccumulationMode
                            ? 'no-accumulated-records'
                            : 'no-hasSelection-state'
                    });
                }
            }
        };
        /**
         * Handles map view change from JimuMapViewComponent.
         *
         * This method is called by JimuMapViewComponent when the map view becomes available
         * or changes. It delegates to MapViewManager for reference management and initializes
         * the graphics layer if enabled in widget configuration.
         *
         * @param jimuMapView - The JimuMapView instance from JimuMapViewComponent, or null if unavailable
         *
         * @since 1.19.0-r018.18 (Chunk 6: Manager implementation)
         * @see {@link MapViewManager} for map view reference management
         */
        this.handleJimuMapViewChanged = (jimuMapView) => {
            const { id, config } = this.props;
            // Manager implementation (r018.16 - Step 6.3: Switch to manager)
            this.mapViewManager.handleJimuMapViewChanged(jimuMapView, this.props, {
                onMapViewChange: (newJimuMapView) => {
                    // Get map view from manager
                    const newMapView = this.mapViewManager.getMapView();
                    // Chunk 4: Graphics layer initialization (r018.25 - Step 4.3: Remove old implementation)
                    // Initialize graphics layer if map view is available and graphics layer should be initialized
                    if (this.graphicsLayerManager.shouldInitialize(config, newMapView) && newMapView) {
                        // Use void to handle promise without blocking
                        void this.graphicsLayerManager.initialize(id, newMapView, {
                            onGraphicsLayerInitialized: (graphicsLayer) => {
                                // Update state to force re-render and update props
                                this.setState({ graphicsLayerInitialized: true });
                            }
                        });
                    }
                }
            });
        };
        /**
         * Initializes graphics layer lazily when output data source becomes available.
         *
         * This method is called by QueryTask component when an output data source is created.
         * It retrieves the map view from MapViewManager and initializes the graphics layer
         * using GraphicsLayerManager if not already initialized.
         *
         * @param outputDS - The output data source that was created
         *
         * @since 1.19.0-r017.0
         * @see {@link GraphicsLayerManager.initializeFromOutputDS} for graphics layer initialization
         * @see {@link MapViewManager.getMapView} for map view retrieval
         */
        /**
         * Initializes graphics layer lazily when output data source becomes available.
         *
         * This method is called by QueryTask component when an output data source is created.
         * It retrieves the map view from MapViewManager and initializes the graphics layer
         * using GraphicsLayerManager if not already initialized.
         *
         * @param outputDS - The output data source that was created
         *
         * @since 1.19.0-r017.0
         * @see {@link GraphicsLayerManager.initializeFromOutputDS} for graphics layer initialization
         * @see {@link MapViewManager.getMapView} for map view retrieval
         */
        this.initializeGraphicsLayerFromOutputDS = (outputDS) => __awaiter(this, void 0, void 0, function* () {
            const { id, config } = this.props;
            // Chunk 4: Graphics layer initialization (r018.25 - Step 4.3: Remove old implementation)
            // Use map view from manager if available
            const mapView = this.mapViewManager.getMapView() || this.mapViewRef.current;
            yield this.graphicsLayerManager.initializeFromOutputDS(id, config, outputDS, mapView, {
                onGraphicsLayerInitialized: (graphicsLayer) => {
                    this.setState({ graphicsLayerInitialized: true });
                }
            });
        });
        /**
         * Clears all graphics from the graphics layer if it exists.
         *
         * This method is called when clearing results or switching queries in "New" mode
         * to ensure graphics are removed from the map. It does not remove the graphics layer
         * itself, only clears its contents.
         *
         * @since 1.19.0-r017.0
         * @see {@link GraphicsLayerManager.clearGraphics} for graphics clearing logic
         */
        this.clearGraphicsLayerIfExists = () => {
            const { config } = this.props;
            // Chunk 4: Graphics layer clearing (r018.25 - Step 4.3: Remove old implementation)
            this.graphicsLayerManager.clearGraphics(this.props.id, config);
        };
        /**
         * Handles selection change events from QueryTaskResult component.
         *
         * This method updates widget state when records are selected or deselected in the
         * results tab. It respects the current results mode:
         * - "Add to" / "Remove from" modes: Uses accumulated records count for restoration state
         * - "New" mode: Uses event record IDs for restoration state
         *
         * Also handles automatic mode reset: If selection is cleared in "Remove from" mode,
         * the mode is automatically reset to "New" since Remove mode requires selection to function.
         *
         * @param event - Custom event containing selection details (widgetId, recordIds, outputDsId, queryItemConfigId)
         *
         * @since 1.19.0-r017.0
         */
        this.handleSelectionChange = (event) => {
            var _a;
            const customEvent = event;
            const { id } = this.props;
            // Only track if this is for our widget
            if (customEvent.detail.widgetId !== id) {
                return;
            }
            const hasSelection = customEvent.detail.recordIds && customEvent.detail.recordIds.length > 0;
            // If the panel is NOT visible, and we are receiving an EMPTY selection,
            // it's almost certainly our own 'clearSelectionFromMap' logic firing.
            // We should IGNORE this so we don't wipe out the lastSelection state.
            if (!this.state.isPanelVisible && !hasSelection) {
                debugLogger.log('RESTORE', {
                    event: 'handleSelectionChange-ignoring-empty-selection-while-panel-closed',
                    widgetId: id,
                    timestamp: Date.now()
                });
                return;
            }
            // In "Add to" or "Remove from" mode, use accumulated records count for restoration
            // The accumulated records are the source of truth for what should be restored
            const isAccumulationMode = this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.AddToSelection ||
                this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection;
            const accumulatedRecordsCount = ((_a = this.state.accumulatedRecords) === null || _a === void 0 ? void 0 : _a.length) || 0;
            const selectionCount = isAccumulationMode && accumulatedRecordsCount > 0
                ? accumulatedRecordsCount
                : (hasSelection ? customEvent.detail.recordIds.length : 0);
            // If selection is cleared and we're in Remove mode, reset to NewSelection mode
            // Remove mode requires selection to function, so it should be disabled when selection is empty
            const shouldResetMode = !hasSelection &&
                selectionCount === 0 &&
                this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection;
            debugLogger.log('RESTORE', {
                event: 'handleSelectionChange-updating-state',
                widgetId: id,
                resultsMode: this.state.resultsMode,
                isAccumulationMode,
                eventRecordIdsCount: customEvent.detail.recordIds.length,
                hasSelectionFromEvent: hasSelection,
                accumulatedRecordsCountBefore: accumulatedRecordsCount,
                calculatedSelectionCount: selectionCount,
                'will-set-hasSelection': selectionCount > 0,
                'will-set-lastSelection': hasSelection && !!customEvent.detail.outputDsId && !!customEvent.detail.queryItemConfigId,
                'will-reset-mode': shouldResetMode,
                decisionLogic: {
                    'isAccumulationMode': isAccumulationMode,
                    'accumulatedRecordsCount > 0': accumulatedRecordsCount > 0,
                    'use-accumulated-count': isAccumulationMode && accumulatedRecordsCount > 0,
                    'use-event-count': !(isAccumulationMode && accumulatedRecordsCount > 0),
                    'should-reset-mode': shouldResetMode
                }
            });
            this.setState(Object.assign({ hasSelection: selectionCount > 0, selectionRecordCount: selectionCount, 
                // Store lastSelection for compatibility, but restoration will use accumulatedRecords in Add/Remove modes
                lastSelection: hasSelection && customEvent.detail.outputDsId && customEvent.detail.queryItemConfigId
                    ? {
                        recordIds: customEvent.detail.recordIds,
                        outputDsId: customEvent.detail.outputDsId,
                        queryItemConfigId: customEvent.detail.queryItemConfigId
                    }
                    : undefined }, (shouldResetMode ? {
                resultsMode: _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.NewSelection,
                accumulatedRecords: [] // Also clear accumulated records when resetting mode
            } : {})));
            debugLogger.log('RESTORE', {
                event: 'handleSelectionChange-state-updated',
                widgetId: id,
                'new-hasSelection': selectionCount > 0,
                'new-selectionRecordCount': selectionCount,
                'new-lastSelection-recordIds-count': hasSelection && customEvent.detail.outputDsId && customEvent.detail.queryItemConfigId
                    ? customEvent.detail.recordIds.length
                    : 0,
                'mode-reset': shouldResetMode,
                'new-mode': shouldResetMode ? _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.NewSelection : this.state.resultsMode,
                'note': shouldResetMode
                    ? 'Mode reset to NewSelection because selection was cleared in Remove mode'
                    : 'lastSelection-only-contains-current-query-records-not-all-accumulated-records'
            });
        };
        /**
         * Handles restore request when identify popup closes.
         *
         * This method restores selection to the map after the identify popup closes and
         * selection was cleared. It only restores if the widget panel is currently open
         * (users can't see restored selection if widget is closed).
         *
         * Restoration logic:
         * - "Add to" / "Remove from" modes: Restores all accumulated records grouped by origin data source
         * - "New" mode: Restores lastSelection state
         *
         * @param event - Custom event containing selection details (widgetId, recordIds, outputDsId, queryItemConfigId)
         *
         * @since 1.19.0-r017.0
         * @see {@link RESTORE_ON_IDENTIFY_CLOSE_EVENT} for event name constant
         */
        this.handleRestoreOnIdentifyClose = (event) => {
            var _a, _b, _c;
            const customEvent = event;
            const { id } = this.props;
            // Only handle if this is for our widget
            if (customEvent.detail.widgetId !== id) {
                return;
            }
            // Use manager as source of truth for visibility (r018.13)
            const isWidgetOpen = this.visibilityManager.getIsPanelVisible();
            const isAccumulationMode = this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.AddToSelection ||
                this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection;
            debugLogger.log('RESTORE', {
                event: 'identify-popup-closed-restore-requested',
                widgetId: id,
                isWidgetOpen,
                resultsMode: this.state.resultsMode,
                isAccumulationMode,
                eventRecordIdsCount: customEvent.detail.recordIds.length,
                hasSelection: this.state.hasSelection || false,
                accumulatedRecordsCount: ((_a = this.state.accumulatedRecords) === null || _a === void 0 ? void 0 : _a.length) || 0,
                hasLastSelection: !!this.state.lastSelection,
                lastSelectionRecordCount: ((_b = this.state.lastSelection) === null || _b === void 0 ? void 0 : _b.recordIds.length) || 0,
                outputDsId: customEvent.detail.outputDsId,
                queryItemConfigId: customEvent.detail.queryItemConfigId
            });
            // Only restore if widget is open
            if (!isWidgetOpen) {
                debugLogger.log('RESTORE', {
                    event: 'identify-popup-closed-restore-skipped-widget-closed',
                    widgetId: id,
                    recordCount: customEvent.detail.recordIds.length
                });
                return;
            }
            // HYPOTHESIS: Should always check accumulatedRecords first, regardless of mode
            if (this.state.accumulatedRecords && this.state.accumulatedRecords.length > 0) {
                debugLogger.log('RESTORE', {
                    event: 'identify-popup-closed-found-accumulated-records',
                    widgetId: id,
                    resultsMode: this.state.resultsMode,
                    isAccumulationMode,
                    accumulatedRecordsCount: this.state.accumulatedRecords.length,
                    'should-use-accumulated': true,
                    'current-condition-check': isAccumulationMode,
                    'condition-result': isAccumulationMode
                });
            }
            // In Add/Remove modes, check accumulated records instead of lastSelection
            if (isAccumulationMode) {
                if (!this.state.hasSelection || !this.state.accumulatedRecords || this.state.accumulatedRecords.length === 0) {
                    debugLogger.log('RESTORE', {
                        event: 'identify-popup-closed-restore-skipped-no-accumulated-records',
                        widgetId: id,
                        hasSelection: this.state.hasSelection,
                        accumulatedRecordsCount: ((_c = this.state.accumulatedRecords) === null || _c === void 0 ? void 0 : _c.length) || 0,
                        'hypothesis': 'hasSelection-is-false-or-no-accumulated-records',
                        'maybe-hasSelection-should-be-based-on-accumulated-records': true
                    });
                    return;
                }
                // Restore all accumulated records (grouped by origin DS)
                debugLogger.log('RESTORE', {
                    event: 'identify-popup-closed-restoring-accumulated-records',
                    widgetId: id,
                    accumulatedRecordsCount: this.state.accumulatedRecords.length
                });
                this.addSelectionToMap();
                return;
            }
            // HYPOTHESIS: Maybe accumulatedRecords exist but we're not in accumulation mode?
            if (this.state.accumulatedRecords && this.state.accumulatedRecords.length > 0 && !isAccumulationMode) {
                debugLogger.log('RESTORE', {
                    event: 'identify-popup-closed-accumulated-records-exist-but-not-accumulation-mode',
                    widgetId: id,
                    resultsMode: this.state.resultsMode,
                    isAccumulationMode,
                    accumulatedRecordsCount: this.state.accumulatedRecords.length,
                    'hypothesis': 'accumulated-records-exist-but-mode-is-not-add-or-remove',
                    'should-we-still-use-them': 'NEEDS-INVESTIGATION'
                });
            }
            // For "New" mode, use original validation logic
            // Check if we have matching selection state
            if (!this.state.hasSelection || !this.state.lastSelection) {
                debugLogger.log('RESTORE', {
                    event: 'identify-popup-closed-restore-skipped-no-selection',
                    widgetId: id,
                    hasSelection: this.state.hasSelection,
                    hasLastSelection: !!this.state.lastSelection
                });
                return;
            }
            // Verify the outputDsId matches
            if (this.state.lastSelection.outputDsId !== customEvent.detail.outputDsId) {
                debugLogger.log('RESTORE', {
                    event: 'identify-popup-closed-restore-skipped-ds-mismatch',
                    widgetId: id,
                    ourOutputDsId: this.state.lastSelection.outputDsId,
                    requestedOutputDsId: customEvent.detail.outputDsId
                });
                return;
            }
            // Verify the queryItemConfigId matches (optional but good to check)
            if (this.state.lastSelection.queryItemConfigId !== customEvent.detail.queryItemConfigId) {
                debugLogger.log('RESTORE', {
                    event: 'identify-popup-closed-restore-skipped-query-mismatch',
                    widgetId: id,
                    ourQueryItemConfigId: this.state.lastSelection.queryItemConfigId,
                    requestedQueryItemConfigId: customEvent.detail.queryItemConfigId
                });
                return;
            }
            // Restore selection to map (reuse existing method)
            debugLogger.log('RESTORE', {
                event: 'identify-popup-closed-restoring-selection',
                widgetId: id,
                recordCount: customEvent.detail.recordIds.length,
                outputDsId: customEvent.detail.outputDsId
            });
            this.addSelectionToMap();
        };
        /**
         * Restores selection to the map when widget panel opens.
         *
         * This method is called by handleVisibilityChange when the panel becomes visible.
         * It restores previously selected records to the map based on the current results mode:
         *
         * - "Add to" / "Remove from" modes: Restores all accumulated records, grouped by origin data source
         * - "New" mode: Restores lastSelection state from the most recent query
         *
         * The restoration uses selectRecordsAndPublish utility which handles:
         * - Selecting records in origin data sources
         * - Adding graphics to graphics layer (if enabled)
         * - Publishing selection messages to other widgets
         * - Deduplication of records
         *
         * Note: This method does NOT zoom to the selection (unlike the "Add to Map" action).
         *
         * @since 1.19.0-r017.0
         * @see {@link selectRecordsAndPublish} utility function for selection logic
         */
        this.addSelectionToMap = () => {
            const { lastSelection, accumulatedRecords, resultsMode } = this.state;
            const { id } = this.props;
            debugLogger.log('RESTORE', {
                event: 'addSelectionToMap-called',
                widgetId: id,
                resultsMode,
                hasAccumulatedRecords: !!(accumulatedRecords && accumulatedRecords.length > 0),
                accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0,
                hasLastSelection: !!lastSelection,
                lastSelectionRecordCount: (lastSelection === null || lastSelection === void 0 ? void 0 : lastSelection.recordIds.length) || 0,
                lastSelectionOutputDsId: lastSelection === null || lastSelection === void 0 ? void 0 : lastSelection.outputDsId
            });
            // In Add/Remove modes, use accumulated records for restoration
            const isAccumulationMode = resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.AddToSelection ||
                resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection;
            // HYPOTHESIS: Should always check accumulatedRecords first, regardless of mode
            // Adding log to see if accumulatedRecords exist but we're not using them
            if (accumulatedRecords && accumulatedRecords.length > 0) {
                debugLogger.log('RESTORE', {
                    event: 'addSelectionToMap-found-accumulated-records',
                    widgetId: id,
                    resultsMode,
                    isAccumulationMode,
                    accumulatedRecordsCount: accumulatedRecords.length,
                    'should-use-accumulated': true,
                    'current-condition-check': isAccumulationMode && accumulatedRecords && accumulatedRecords.length > 0,
                    'condition-result': isAccumulationMode && accumulatedRecords && accumulatedRecords.length > 0
                });
            }
            else {
                debugLogger.log('RESTORE', {
                    event: 'addSelectionToMap-no-accumulated-records',
                    widgetId: id,
                    resultsMode,
                    isAccumulationMode,
                    accumulatedRecordsCount: 0,
                    'will-fallback-to-lastSelection': !!lastSelection
                });
            }
            if (isAccumulationMode && accumulatedRecords && accumulatedRecords.length > 0) {
                // Group accumulated records by origin data source
                const recordsByOriginDS = new Map();
                const dsManager = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance();
                accumulatedRecords.forEach((record, index) => {
                    var _a, _b, _c;
                    const recordId = record.getId();
                    let originDS = null;
                    // Method 1: Try to get from record.getDataSource()
                    const recordDS = (_a = record.getDataSource) === null || _a === void 0 ? void 0 : _a.call(record);
                    if (recordDS) {
                        originDS = ((_b = recordDS.getOriginDataSources()) === null || _b === void 0 ? void 0 : _b[0]) || recordDS;
                        debugLogger.log('RESTORE', {
                            event: 'found-origin-ds-from-record-ds',
                            widgetId: id,
                            recordIndex: index,
                            recordId,
                            originDSId: (originDS === null || originDS === void 0 ? void 0 : originDS.id) || 'null',
                            method: 'record.getDataSource()'
                        });
                    }
                    // Method 2: If that failed, search all data sources for a record with matching ID
                    if (!originDS) {
                        const dsMap = dsManager.getDataSources();
                        const allDataSources = Object.values(dsMap);
                        for (const ds of allDataSources) {
                            // Check if this is a FeatureLayerDataSource by checking for getAllLoadedRecords method
                            if (ds && typeof ds.getAllLoadedRecords === 'function') {
                                try {
                                    // Check if this DS has the record
                                    const allRecords = ds.getAllLoadedRecords() || [];
                                    const matchingRecord = allRecords.find((r) => r.getId() === recordId);
                                    if (matchingRecord) {
                                        // Found the record - get origin DS from this DS
                                        originDS = ((_c = ds.getOriginDataSources()) === null || _c === void 0 ? void 0 : _c[0]) || ds;
                                        debugLogger.log('RESTORE', {
                                            event: 'found-origin-ds-via-search',
                                            widgetId: id,
                                            recordIndex: index,
                                            recordId,
                                            originDSId: originDS.id,
                                            method: 'searched-all-data-sources',
                                            searchedDSId: ds.id
                                        });
                                        break;
                                    }
                                }
                                catch (error) {
                                    // Continue searching
                                }
                            }
                        }
                    }
                    if (originDS) {
                        if (!recordsByOriginDS.has(originDS)) {
                            recordsByOriginDS.set(originDS, []);
                        }
                        recordsByOriginDS.get(originDS).push(record);
                    }
                    else {
                        debugLogger.log('RESTORE', {
                            event: 'could-not-find-origin-ds-for-record',
                            widgetId: id,
                            recordIndex: index,
                            recordId,
                            warning: 'record-will-be-skipped'
                        });
                    }
                });
                debugLogger.log('RESTORE', {
                    event: 'panel-opened-restoring-accumulated-records',
                    widgetId: id,
                    resultsMode,
                    accumulatedRecordsCount: accumulatedRecords.length,
                    originDSCount: recordsByOriginDS.size
                });
                // Restore selection for each origin data source
                const { selectRecordsAndPublish } = __webpack_require__(/*! ./selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");
                const useGraphicsLayer = this.props.config.useGraphicsLayerForHighlight;
                const graphicsLayer = this.graphicsLayerRef.current || undefined;
                const mapView = this.mapViewRef.current || undefined;
                recordsByOriginDS.forEach((records, originDS) => {
                    const recordIds = records.map(r => r.getId());
                    try {
                        // Use originDS directly (not outputDS) since records are selected in origin layers
                        // Use async IIFE since forEach callback can't be async
                        ;
                        (() => __awaiter(this, void 0, void 0, function* () {
                            yield selectRecordsAndPublish(id, originDS, recordIds, records, true, useGraphicsLayer, graphicsLayer, mapView);
                        }))();
                        debugLogger.log('RESTORE', {
                            event: 'panel-opened-restored-origin-ds',
                            widgetId: id,
                            originDSId: originDS.id,
                            recordCount: records.length,
                            zoomExecuted: false
                        });
                    }
                    catch (error) {
                        debugLogger.log('RESTORE', {
                            event: 'panel-opened-restore-origin-ds-failed',
                            widgetId: id,
                            originDSId: originDS.id,
                            error: error instanceof Error ? error.message : String(error),
                            errorStack: error instanceof Error ? error.stack : undefined
                        });
                    }
                });
                return;
            }
            // HYPOTHESIS: Maybe accumulatedRecords exist but we're not in accumulation mode?
            // Or maybe we should always check accumulatedRecords first?
            if (accumulatedRecords && accumulatedRecords.length > 0 && !isAccumulationMode) {
                debugLogger.log('RESTORE', {
                    event: 'addSelectionToMap-accumulated-records-exist-but-not-accumulation-mode',
                    widgetId: id,
                    resultsMode,
                    isAccumulationMode,
                    accumulatedRecordsCount: accumulatedRecords.length,
                    'hypothesis': 'accumulated-records-exist-but-mode-is-not-add-or-remove',
                    'should-we-still-use-them': 'NEEDS-INVESTIGATION'
                });
            }
            // Fall back to original logic for "New" mode
            if (!lastSelection) {
                debugLogger.log('RESTORE', {
                    event: 'addSelectionToMap-no-lastSelection-exiting',
                    widgetId: id,
                    resultsMode,
                    hasAccumulatedRecords: !!(accumulatedRecords && accumulatedRecords.length > 0),
                    accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0,
                    'hypothesis': 'no-lastSelection-so-exiting-early-maybe-should-check-accumulated-records-first'
                });
                return;
            }
            const dsManager = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance();
            const outputDS = dsManager.getDataSource(lastSelection.outputDsId);
            if (!outputDS) {
                debugLogger.log('RESTORE', {
                    event: 'panel-opened-output-ds-not-found',
                    widgetId: id,
                    outputDsId: lastSelection.outputDsId
                });
                return;
            }
            // Get records from output DS (same as Add to Map)
            const allRecords = outputDS.getAllLoadedRecords() || [];
            const recordsToSelect = allRecords.filter(record => lastSelection.recordIds.includes(record.getId()));
            if (recordsToSelect.length === 0) {
                debugLogger.log('RESTORE', {
                    event: 'panel-opened-no-matching-records',
                    widgetId: id,
                    ourRecordCount: lastSelection.recordIds.length
                });
                return;
            }
            // Same logic as Add to Map action - selectRecordsAndPublish handles duplicate checking
            // Don't zoom when restoring on widget open (Add to Map action handles zoom for manual clicks)
            try {
                const { selectRecordsAndPublish } = __webpack_require__(/*! ./selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");
                const useGraphicsLayer = this.props.config.useGraphicsLayerForHighlight;
                const graphicsLayer = this.graphicsLayerRef.current || undefined;
                const mapView = this.mapViewRef.current || undefined;
                (() => __awaiter(this, void 0, void 0, function* () {
                    yield selectRecordsAndPublish(id, outputDS, lastSelection.recordIds, recordsToSelect, true, useGraphicsLayer, graphicsLayer, mapView);
                }))();
                debugLogger.log('RESTORE', {
                    event: 'panel-opened-selection-added-to-map',
                    widgetId: id,
                    recordCount: recordsToSelect.length,
                    zoomExecuted: false
                });
            }
            catch (error) {
                debugLogger.log('RESTORE', {
                    event: 'panel-opened-add-to-map-failed',
                    widgetId: id,
                    error: error instanceof Error ? error.message : String(error)
                });
            }
        };
        /**
         * Handles results mode change from the mode dropdown in QueryTask component.
         *
         * This method is called when the user switches between "Create new", "Add to", or
         * "Remove from" modes. It performs the following actions:
         *
         * 1. Consumes hash parameters when switching to accumulation modes (prevents re-triggering)
         * 2. Clears accumulated records when switching to "New" mode
         * 3. Updates widget state with the new mode
         *
         * @param mode - The new selection type mode (NewSelection, AddToSelection, or RemoveFromSelection)
         *
         * @since 1.19.0-r017.0
         */
        this.handleResultsModeChange = (mode) => {
            var _a, _b, _c, _d;
            // OLD IMPLEMENTATION (parallel execution)
            const oldPreviousMode = this.state.resultsMode;
            const oldCurrentAccumulatedCount = ((_a = this.state.accumulatedRecords) === null || _a === void 0 ? void 0 : _a.length) || 0;
            const oldShouldConsumeHash = (mode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.AddToSelection || mode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection) && !!((_b = this.state.initialQueryValue) === null || _b === void 0 ? void 0 : _b.shortId);
            const oldWillClearAccumulated = mode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.NewSelection;
            debugLogger.log('RESULTS-MODE', {
                event: 'handleResultsModeChange-triggered',
                widgetId: this.props.id,
                previousMode: oldPreviousMode,
                newMode: mode,
                currentAccumulatedCount: oldCurrentAccumulatedCount,
                timestamp: Date.now()
            });
            // Consume deep link when switching to accumulation modes
            if (mode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.AddToSelection || mode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection) {
                if ((_c = this.state.initialQueryValue) === null || _c === void 0 ? void 0 : _c.shortId) {
                    debugLogger.log('HASH', {
                        event: 'consuming-hash-on-mode-switch',
                        widgetId: this.props.id,
                        mode,
                        shortId: this.state.initialQueryValue.shortId
                    });
                    this.removeHashParameter(this.state.initialQueryValue.shortId);
                }
            }
            // If switching to "New" mode, clear accumulated records
            if (mode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.NewSelection) {
                debugLogger.log('RESULTS-MODE', {
                    event: 'clearing-accumulated-records-on-mode-switch',
                    widgetId: this.props.id,
                    previousMode: this.state.resultsMode
                });
                this.setState({ resultsMode: mode, accumulatedRecords: [] });
            }
            else {
                this.setState({ resultsMode: mode });
            }
            // Capture manager's previous state BEFORE updating
            const newPreviousMode = this.accumulatedRecordsManager.getResultsMode();
            const newPreviousAccumulatedCount = this.accumulatedRecordsManager.getAccumulatedRecordsCount();
            // NEW IMPLEMENTATION (parallel execution)
            const newResult = this.accumulatedRecordsManager.handleResultsModeChange(this.props.id, mode, oldShouldConsumeHash, (_d = this.state.initialQueryValue) === null || _d === void 0 ? void 0 : _d.shortId, this.removeHashParameter);
            // COMPARISON LOGGING
            debugLogger.log('CHUNK-5-COMPARE', {
                event: 'handleResultsModeChange-comparison',
                widgetId: this.props.id,
                oldImplementation: {
                    previousMode: oldPreviousMode,
                    newMode: mode,
                    currentAccumulatedCount: oldCurrentAccumulatedCount,
                    willClearAccumulated: oldWillClearAccumulated,
                    shouldConsumeHash: oldShouldConsumeHash
                },
                newImplementation: {
                    previousMode: newPreviousMode,
                    newMode: newResult.resultsMode,
                    currentAccumulatedCount: newPreviousAccumulatedCount,
                    willClearAccumulated: newResult.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.NewSelection,
                    shouldConsumeHash: oldShouldConsumeHash
                },
                match: oldPreviousMode === newPreviousMode &&
                    oldCurrentAccumulatedCount === newPreviousAccumulatedCount &&
                    newResult.resultsMode === mode &&
                    (mode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.NewSelection ? newResult.accumulatedRecords.length === 0 : true),
                timestamp: Date.now()
            });
        };
        /**
         * Removes a hash parameter from the URL when switching to accumulation modes.
         *
         * This method is called when switching to "Add to" or "Remove from" modes to consume
         * the deep link parameter. This prevents the hash parameter from re-triggering the query
         * when the widget re-renders.
         *
         * The URL is updated using history.replaceState to avoid page reload, and both pathname
         * and query string are preserved (e.g., debug parameters remain intact).
         *
         * @param shortId - The shortId parameter to remove from the URL hash
         *
         * @since 1.19.0-r017.0
         */
        this.removeHashParameter = (shortId) => {
            var _a;
            if (!shortId)
                return;
            const hash = window.location.hash.substring(1);
            const urlParams = new URLSearchParams(hash);
            if (urlParams.has(shortId)) {
                urlParams.delete(shortId);
                const newHash = urlParams.toString();
                debugLogger.log('HASH', {
                    event: 'removeHashParameter',
                    shortId,
                    newHash: newHash ? `#${newHash}` : '(empty)',
                    timestamp: Date.now()
                });
                // Update the URL without triggering a reload
                // Always preserve pathname and query string, only update hash
                window.history.replaceState(null, '', window.location.pathname + window.location.search + (newHash ? `#${newHash}` : ''));
                // Also clear the state so it won't trigger again
                if (((_a = this.state.initialQueryValue) === null || _a === void 0 ? void 0 : _a.shortId) === shortId) {
                    this.setState({ initialQueryValue: undefined });
                }
            }
        };
        this.handleAccumulatedRecordsChange = (records) => {
            var _a;
            // OLD IMPLEMENTATION (parallel execution)
            const oldPreviousCount = ((_a = this.state.accumulatedRecords) === null || _a === void 0 ? void 0 : _a.length) || 0;
            const oldNewCount = records.length;
            // If we're in Remove mode and all accumulated records are cleared, reset to NewSelection mode
            // Remove mode requires accumulated records to function, so it should be disabled when records are empty
            const shouldResetMode = records.length === 0 &&
                this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection;
            debugLogger.log('RESULTS-MODE', {
                event: 'handleAccumulatedRecordsChange-triggered',
                widgetId: this.props.id,
                previousCount: oldPreviousCount,
                newCount: oldNewCount,
                currentMode: this.state.resultsMode,
                shouldResetMode,
                timestamp: Date.now()
            });
            this.setState(Object.assign({ accumulatedRecords: records }, (shouldResetMode ? {
                resultsMode: _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.NewSelection
            } : {})));
            if (shouldResetMode) {
                debugLogger.log('RESULTS-MODE', {
                    event: 'mode-reset-on-accumulated-records-cleared',
                    widgetId: this.props.id,
                    previousMode: _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection,
                    newMode: _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.NewSelection,
                    reason: 'all-accumulated-records-cleared-in-remove-mode',
                    timestamp: Date.now()
                });
            }
            // Capture manager's previous state BEFORE updating
            const newPreviousCount = this.accumulatedRecordsManager.getAccumulatedRecordsCount();
            // NEW IMPLEMENTATION (parallel execution)
            this.accumulatedRecordsManager.handleAccumulatedRecordsChange(this.props.id, records);
            // COMPARISON LOGGING
            debugLogger.log('CHUNK-5-COMPARE', {
                event: 'handleAccumulatedRecordsChange-comparison',
                widgetId: this.props.id,
                oldImplementation: {
                    previousCount: oldPreviousCount,
                    newCount: oldNewCount,
                    recordsLength: records.length
                },
                newImplementation: {
                    previousCount: newPreviousCount,
                    newCount: records.length,
                    recordsLength: records.length
                },
                match: oldPreviousCount === newPreviousCount && oldNewCount === records.length,
                timestamp: Date.now()
            });
        };
        /**
         * NOTE: No longer needed - we use existing output DS instead of creating new one.
         * Kept for reference but not used.
         */
        this.getOrCreateAccumulatedResultsDS = (originDS) => __awaiter(this, void 0, void 0, function* () {
            // This is no longer used - we merge records into existing output DS
            throw new Error('This method is deprecated - use existing output DS instead');
        });
        /**
         * Clears selection from the map while preserving widget's internal state.
         *
         * This method is called when the widget panel closes to remove selection from the map
         * (cleaning up the visual selection) while keeping the selection state in the widget
         * for restoration when the panel reopens.
         *
         * The method handles both "New" mode (lastSelection) and accumulation modes (accumulatedRecords).
         * It groups records by origin data source and clears selection from each origin data source,
         * ensuring multi-layer selections are properly cleared.
         *
         * Graphics layer is also cleared if enabled, and empty selection messages are published
         * to notify other widgets (like HelperSimple) that selection has been cleared.
         *
         * @since 1.19.0-r017.0
         * @see {@link clearSelectionInDataSources} utility function for clearing logic
         */
        this.clearSelectionFromMap = () => {
            var _a;
            const { lastSelection, accumulatedRecords, resultsMode } = this.state;
            const { id } = this.props;
            const isAccumulationMode = resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.AddToSelection ||
                resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection;
            debugLogger.log('RESTORE', {
                event: 'clearSelectionFromMap-called',
                widgetId: id,
                resultsMode,
                isAccumulationMode,
                hasLastSelection: !!lastSelection,
                lastSelectionRecordCount: (lastSelection === null || lastSelection === void 0 ? void 0 : lastSelection.recordIds.length) || 0,
                hasAccumulatedRecords: !!(accumulatedRecords && accumulatedRecords.length > 0),
                accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0,
                selectionRecordCount: this.state.selectionRecordCount || 0
            });
            // Always clear accumulated records if they exist (regardless of mode)
            // This handles the case where mode might have changed but records still exist
            debugLogger.log('RESTORE', {
                event: 'clearSelectionFromMap-checking-accumulated-records',
                widgetId: id,
                'condition': 'accumulatedRecords && accumulatedRecords.length > 0',
                'condition-result': !!(accumulatedRecords && accumulatedRecords.length > 0),
                accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0
            });
            if (accumulatedRecords && accumulatedRecords.length > 0) {
                // Group accumulated records by origin data source
                const recordsByOriginDS = new Map();
                const dsManager = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance();
                accumulatedRecords.forEach((record, index) => {
                    var _a, _b, _c;
                    const recordId = record.getId();
                    let originDS = null;
                    // Method 1: Try to get from record.getDataSource()
                    const recordDS = (_a = record.getDataSource) === null || _a === void 0 ? void 0 : _a.call(record);
                    if (recordDS) {
                        originDS = ((_b = recordDS.getOriginDataSources()) === null || _b === void 0 ? void 0 : _b[0]) || recordDS;
                        debugLogger.log('RESTORE', {
                            event: 'clear-found-origin-ds-from-record-ds',
                            widgetId: id,
                            recordIndex: index,
                            recordId,
                            originDSId: (originDS === null || originDS === void 0 ? void 0 : originDS.id) || 'null',
                            method: 'record.getDataSource()'
                        });
                    }
                    // Method 2: If that failed, search all data sources for a record with matching ID
                    if (!originDS) {
                        const dsMap = dsManager.getDataSources();
                        const allDataSources = Object.values(dsMap);
                        for (const ds of allDataSources) {
                            // Check if this is a FeatureLayerDataSource by checking for getAllLoadedRecords method
                            if (ds && typeof ds.getAllLoadedRecords === 'function') {
                                try {
                                    // Check if this DS has the record
                                    const allRecords = ds.getAllLoadedRecords() || [];
                                    const matchingRecord = allRecords.find((r) => r.getId() === recordId);
                                    if (matchingRecord) {
                                        // Found the record - get origin DS from this DS
                                        originDS = ((_c = ds.getOriginDataSources()) === null || _c === void 0 ? void 0 : _c[0]) || ds;
                                        debugLogger.log('RESTORE', {
                                            event: 'clear-found-origin-ds-via-search',
                                            widgetId: id,
                                            recordIndex: index,
                                            recordId,
                                            originDSId: originDS.id,
                                            method: 'searched-all-data-sources',
                                            searchedDSId: ds.id
                                        });
                                        break;
                                    }
                                }
                                catch (error) {
                                    // Continue searching
                                }
                            }
                        }
                    }
                    if (originDS) {
                        if (!recordsByOriginDS.has(originDS)) {
                            recordsByOriginDS.set(originDS, []);
                        }
                        recordsByOriginDS.get(originDS).push(record);
                    }
                    else {
                        debugLogger.log('RESTORE', {
                            event: 'clear-could-not-find-origin-ds-for-record',
                            widgetId: id,
                            recordIndex: index,
                            recordId,
                            warning: 'record-will-be-skipped'
                        });
                    }
                });
                debugLogger.log('RESTORE', {
                    event: 'panel-closed-clearing-accumulated-records-from-map',
                    widgetId: id,
                    accumulatedRecordsCount: accumulatedRecords.length,
                    originDSCount: recordsByOriginDS.size
                });
                // Clear selection from each origin data source
                const { clearSelectionInDataSources } = __webpack_require__(/*! ./selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");
                const useGraphicsLayer = this.props.config.useGraphicsLayerForHighlight;
                const graphicsLayer = this.graphicsLayerRef.current || undefined;
                recordsByOriginDS.forEach((records, originDS) => {
                    try {
                        // Use async IIFE since forEach callback can't be async
                        ;
                        (() => __awaiter(this, void 0, void 0, function* () {
                            yield clearSelectionInDataSources(id, originDS, useGraphicsLayer, graphicsLayer);
                            debugLogger.log('RESTORE', {
                                event: 'panel-closed-cleared-origin-ds-selection',
                                widgetId: id,
                                originDSId: originDS.id,
                                recordCount: records.length,
                                usedGraphicsLayer: useGraphicsLayer
                            });
                        }))();
                    }
                    catch (error) {
                        debugLogger.log('RESTORE', {
                            event: 'panel-closed-clear-origin-ds-failed',
                            widgetId: id,
                            originDSId: originDS.id,
                            error: error instanceof Error ? error.message : String(error)
                        });
                    }
                });
                debugLogger.log('RESTORE', {
                    event: 'clearSelectionFromMap-cleared-accumulated-records-returning',
                    widgetId: id,
                    'will-not-fallback-to-lastSelection': true
                });
                return;
            }
            // HYPOTHESIS: Maybe accumulatedRecords exist but we didn't enter the if block?
            // Or maybe we should always clear accumulated records if they exist?
            if (accumulatedRecords && accumulatedRecords.length > 0) {
                debugLogger.log('RESTORE', {
                    event: 'clearSelectionFromMap-accumulated-records-exist-but-not-clearing',
                    widgetId: id,
                    resultsMode,
                    isAccumulationMode,
                    accumulatedRecordsCount: accumulatedRecords.length,
                    'hypothesis': 'accumulated-records-exist-but-condition-failed-why',
                    'condition-was': 'accumulatedRecords && accumulatedRecords.length > 0',
                    'condition-result': !!(accumulatedRecords && accumulatedRecords.length > 0)
                });
            }
            // Fall back to original logic for "New" mode
            if (!lastSelection) {
                debugLogger.log('RESTORE', {
                    event: 'clearSelectionFromMap-no-lastSelection-exiting',
                    widgetId: id,
                    hasAccumulatedRecords: !!(accumulatedRecords && accumulatedRecords.length > 0),
                    accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0,
                    'hypothesis': 'no-lastSelection-so-exiting-maybe-should-have-cleared-accumulated-records-first'
                });
                return;
            }
            const dsManager = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance();
            const outputDS = dsManager.getDataSource(lastSelection.outputDsId);
            if (!outputDS) {
                debugLogger.log('RESTORE', {
                    event: 'panel-closed-output-ds-not-found',
                    widgetId: id,
                    outputDsId: lastSelection.outputDsId
                });
                return;
            }
            try {
                // Get origin DS (the map layer)
                const originDS = (_a = outputDS.getOriginDataSources()) === null || _a === void 0 ? void 0 : _a[0];
                if (!originDS) {
                    debugLogger.log('RESTORE', {
                        event: 'panel-closed-origin-ds-not-found',
                        widgetId: id,
                        outputDsId: lastSelection.outputDsId
                    });
                    return;
                }
                // Check current selection state before clearing
                const currentSelectedIds = originDS.getSelectedRecordIds() || [];
                const ourRecordIds = lastSelection.recordIds;
                const matchesOurSelection = ourRecordIds.length === currentSelectedIds.length &&
                    ourRecordIds.every(recordId => currentSelectedIds.includes(recordId));
                debugLogger.log('RESTORE', {
                    event: 'panel-closed-checking-map-selection',
                    widgetId: id,
                    ourRecordCount: ourRecordIds.length,
                    mapSelectedCount: currentSelectedIds.length,
                    matchesOurSelection,
                    ourRecordIds: ourRecordIds.slice(0, 5),
                    mapSelectedIds: currentSelectedIds.slice(0, 5)
                });
                // Use clearSelectionInDataSources utility which supports graphics layer
                const { clearSelectionInDataSources } = __webpack_require__(/*! ./selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");
                const useGraphicsLayer = this.props.config.useGraphicsLayerForHighlight;
                const graphicsLayer = this.graphicsLayerRef.current || undefined;
                (() => __awaiter(this, void 0, void 0, function* () {
                    yield clearSelectionInDataSources(id, originDS, useGraphicsLayer, graphicsLayer);
                    debugLogger.log('RESTORE', {
                        event: 'panel-closed-cleared-origin-ds-selection',
                        widgetId: id,
                        originDSId: originDS.id,
                        usedGraphicsLayer: useGraphicsLayer
                    });
                    // Verify selection was cleared
                    const afterClearIds = originDS.getSelectedRecordIds() || [];
                    debugLogger.log('RESTORE', {
                        event: 'panel-closed-selection-cleared-from-map',
                        widgetId: id,
                        recordCount: lastSelection.recordIds.length,
                        originDSId: originDS.id,
                        selectionAfterClear: afterClearIds.length,
                        verifiedCleared: afterClearIds.length === 0
                    });
                }))();
            }
            catch (error) {
                debugLogger.log('RESTORE', {
                    event: 'panel-closed-clear-from-map-failed',
                    widgetId: id,
                    error: error instanceof Error ? error.message : String(error),
                    errorStack: error instanceof Error ? error.stack : undefined
                });
            }
        };
        /**
         * NOTIFY that a hash parameter has been used.
         * Previously this removed the hash from the URL, but per updated requirements,
         * user-entered hashes should remain in the URL.
         *
         * @param shortId - The shortId parameter that was used
         */
        this.handleHashParameterUsed = (shortId) => {
            var _a, _b;
            const { id } = this.props;
            const { initialQueryValue } = this.state;
            debugLogger.log('HASH-EXEC', {
                event: 'querysimple-handlehashparameterused-called',
                widgetId: id,
                shortId,
                currentState: {
                    shouldUseInitialQueryValueForSelection: this.state.shouldUseInitialQueryValueForSelection,
                    hasInitialQueryValue: !!this.state.initialQueryValue,
                    initialQueryValueShortId: (_a = this.state.initialQueryValue) === null || _a === void 0 ? void 0 : _a.shortId,
                    initialQueryValueValue: (_b = this.state.initialQueryValue) === null || _b === void 0 ? void 0 : _b.value
                },
                timestamp: Date.now()
            });
            // NOTE: Hash parameters are NOT cleared here - they persist in URL
            // Hash parameters are only consumed when switching to accumulation modes (Add/Remove)
            // to prevent re-triggering when the user manually switches modes
            debugLogger.log('HASH', {
                event: 'handleHashParameterUsed-notified',
                widgetId: id,
                shortId: shortId,
                currentInitialQueryValue: initialQueryValue,
                note: 'Hash parameter used but NOT cleared - hash remains in URL per user requirement',
                timestamp: Date.now()
            });
            // Track this shortId:value pair as processed to prevent re-execution when switching queries
            // This prevents HelperSimple from re-triggering the same parameter when switching queries
            if (initialQueryValue) {
                const paramKey = `${initialQueryValue.shortId}:${initialQueryValue.value}`;
                this.processedHashParamsRef.add(paramKey);
                debugLogger.log('HASH-EXEC', {
                    event: 'querysimple-hashparam-tracked-as-processed',
                    widgetId: id,
                    shortId: initialQueryValue.shortId,
                    value: initialQueryValue.value,
                    paramKey,
                    processedParams: Array.from(this.processedHashParamsRef),
                    timestamp: Date.now()
                });
            }
            // ALWAYS clear both hash state values after execution
            // QuerySimple should not remember hash state after HelperSimple-driven execution completes
            // This prevents autonomous re-processing when switching queries
            // Using a single setState ensures atomic update and prevents race conditions
            this.setState({
                shouldUseInitialQueryValueForSelection: false,
                initialQueryValue: undefined
            }, () => {
                var _a, _b;
                debugLogger.log('HASH-EXEC', {
                    event: 'querysimple-handlehashparameterused-state-cleared',
                    widgetId: id,
                    shortId,
                    newState: {
                        shouldUseInitialQueryValueForSelection: this.state.shouldUseInitialQueryValueForSelection,
                        hasInitialQueryValue: !!this.state.initialQueryValue,
                        initialQueryValueShortId: (_a = this.state.initialQueryValue) === null || _a === void 0 ? void 0 : _a.shortId,
                        initialQueryValueValue: (_b = this.state.initialQueryValue) === null || _b === void 0 ? void 0 : _b.value
                    },
                    timestamp: Date.now()
                });
            });
            debugLogger.log('HASH', {
                event: 'shouldUseInitialQueryValueForSelection-flag-cleared',
                widgetId: id,
                shortId: shortId,
                flagValue: false,
                timestamp: Date.now()
            });
        };
    }
    componentDidMount() {
        var _a, _b;
        // Chunk 1: Manager implementation (r018.8 - switched to manager)
        // Setup manager (no autonomous URL checking - HelperSimple orchestrates)
        // NOTE: setup() is a no-op - callbacks are never called
        this.urlConsumptionManager.setup(this.props, this.state.resultsMode, {} // Empty callbacks - setup() is a no-op
        );
        // Listen for HelperSimple's open widget event
        // QuerySimple should only process hash parameters when HelperSimple explicitly opens the widget
        // This ensures HelperSimple remains the orchestrator
        window.addEventListener(OPEN_WIDGET_EVENT, this.handleOpenWidgetEvent);
        debugLogger.log('HASH-EXEC', {
            event: 'querysimple-mounted-event-listener-setup',
            widgetId: this.props.id,
            currentState: {
                shouldUseInitialQueryValueForSelection: this.state.shouldUseInitialQueryValueForSelection,
                hasInitialQueryValue: !!this.state.initialQueryValue,
                initialQueryValueShortId: (_a = this.state.initialQueryValue) === null || _a === void 0 ? void 0 : _a.shortId,
                initialQueryValueValue: (_b = this.state.initialQueryValue) === null || _b === void 0 ? void 0 : _b.value
            },
            timestamp: Date.now()
        });
        // Chunk 2: Manager implementation (r018.13 - Step 2.3: Switch to manager)
        if (this.widgetRef.current) {
            this.visibilityManager.setup(this.widgetRef.current, this.props, {
                onVisibilityChange: (isVisible) => {
                    // Update state
                    this.setState({ isPanelVisible: isVisible });
                    // Handle restoration logic
                    this.handleVisibilityChange(isVisible);
                }
            }, (isVisible) => {
                // Manager's internal state tracking callback
                // (no-op, restoration handled in onVisibilityChange)
            });
            // Notify mount via manager
            this.visibilityManager.notifyMount(this.props.id);
        }
        // Chunk 5: Initialize accumulated records manager state (r018.26 - Step 5.1: Add manager)
        // Sync manager state with widget state
        if (this.state.resultsMode) {
            this.accumulatedRecordsManager.handleResultsModeChange(this.props.id, this.state.resultsMode, false);
        }
        if (this.state.accumulatedRecords && this.state.accumulatedRecords.length > 0) {
            this.accumulatedRecordsManager.handleAccumulatedRecordsChange(this.props.id, this.state.accumulatedRecords);
        }
        // Set up callbacks for manager
        this.accumulatedRecordsManager.setCallbacks({
            onModeChange: (mode) => {
                // Manager will handle state updates, but we need to sync widget state
                // This will be handled in the comparison phase
            },
            onAccumulatedRecordsChange: (records) => {
                // Manager will handle state updates, but we need to sync widget state
                // This will be handled in the comparison phase
            }
        });
        // Listen for selection changes from query-result
        window.addEventListener(_selection_utils__WEBPACK_IMPORTED_MODULE_13__.QUERYSIMPLE_SELECTION_EVENT, this.handleSelectionChange);
        // Listen for restore requests when identify popup closes
        window.addEventListener(RESTORE_ON_IDENTIFY_CLOSE_EVENT, this.handleRestoreOnIdentifyClose);
        // Graphics layer will be initialized when map view becomes available via JimuMapViewComponent
    }
    componentWillUnmount() {
        // Chunk 1: Clean up manager (r018.8)
        this.urlConsumptionManager.cleanup();
        // Clean up HelperSimple open widget event listener
        window.removeEventListener(OPEN_WIDGET_EVENT, this.handleOpenWidgetEvent);
        // Chunk 2: Clean up manager (r018.13 - Step 2.3: Switch to manager)
        this.visibilityManager.cleanup();
        this.visibilityManager.notifyUnmount(this.props.id);
        // Clean up selection change listener
        window.removeEventListener(_selection_utils__WEBPACK_IMPORTED_MODULE_13__.QUERYSIMPLE_SELECTION_EVENT, this.handleSelectionChange);
        // Clean up restore on identify close listener
        window.removeEventListener(RESTORE_ON_IDENTIFY_CLOSE_EVENT, this.handleRestoreOnIdentifyClose);
        // Chunk 4: Graphics layer cleanup (r018.25 - Step 4.3: Remove old implementation)
        this.graphicsLayerManager.cleanup(this.props.id);
        // Chunk 5: Clean up accumulated records manager (r018.26 - Step 5.1: Add manager)
        this.accumulatedRecordsManager.cleanup();
        debugLogger.log('WIDGET-STATE', {
            event: 'widget-closed',
            widgetId: this.props.id,
            isOpen: false,
            timestamp: new Date().toISOString()
        });
    }
    componentDidUpdate(prevProps) {
        // QuerySimple no longer autonomously checks URL parameters
        // Only HelperSimple can trigger hash parameter processing via OPEN_WIDGET_EVENT
        // This ensures HelperSimple remains the orchestrator
        // Chunk 4: Graphics layer is now required (r018.25 - Step 4.3: Remove config change handling)
        // No need to handle config changes for graphics layer since it's always enabled
    }
    render() {
        var _a, _b, _c, _d, _e, _f, _g, _h, _j;
        const { config, id, icon, label, layoutId, layoutItemId, controllerWidgetId } = this.props;
        const widgetLabel = this.props.intl.formatMessage({
            id: '_widgetLabel',
            defaultMessage: _translations_default__WEBPACK_IMPORTED_MODULE_4__["default"]._widgetLabel
        });
        if (!((_a = config.queryItems) === null || _a === void 0 ? void 0 : _a.length)) {
            return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.WidgetPlaceholder, { icon: iconMap.iconQuery, widgetId: this.props.id, name: widgetLabel });
        }
        if (config.arrangeType === _config__WEBPACK_IMPORTED_MODULE_3__.QueryArrangeType.Popper && !controllerWidgetId) {
            return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_widget_context__WEBPACK_IMPORTED_MODULE_11__.QueryWidgetContext.Provider, { value: `${layoutId}:${layoutItemId}`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list_popper_wrapper__WEBPACK_IMPORTED_MODULE_10__.TaskListPopperWrapper, { id: 0, icon: icon, popperTitle: label, minSize: (_c = (_b = config.sizeMap) === null || _b === void 0 ? void 0 : _b.arrangementIconPopper) === null || _c === void 0 ? void 0 : _c.minSize, defaultSize: (_e = (_d = config.sizeMap) === null || _d === void 0 ? void 0 : _d.arrangementIconPopper) === null || _e === void 0 ? void 0 : _e.defaultSize, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list__WEBPACK_IMPORTED_MODULE_8__.QueryTaskList, { widgetId: id, isInPopper: true, queryItems: config.queryItems, defaultPageSize: config.defaultPageSize, className: 'pb-4', initialQueryValue: this.state.initialQueryValue, shouldUseInitialQueryValueForSelection: this.state.shouldUseInitialQueryValueForSelection, onHashParameterUsed: this.handleHashParameterUsed, resultsMode: this.state.resultsMode, onResultsModeChange: this.handleResultsModeChange, accumulatedRecords: this.state.accumulatedRecords, onAccumulatedRecordsChange: this.handleAccumulatedRecordsChange, useGraphicsLayerForHighlight: config.useGraphicsLayerForHighlight, graphicsLayer: this.graphicsLayerRef.current || undefined, mapView: this.mapViewRef.current || undefined, onInitializeGraphicsLayer: this.initializeGraphicsLayerFromOutputDS, onClearGraphicsLayer: this.clearGraphicsLayerIfExists, activeTab: this.state.activeTab, onTabChange: this.handleTabChange }) }) }));
        }
        if (config.arrangeType === _config__WEBPACK_IMPORTED_MODULE_3__.QueryArrangeType.Inline && !controllerWidgetId) {
            return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_widget_context__WEBPACK_IMPORTED_MODULE_11__.QueryWidgetContext.Provider, { value: `${layoutId}:${layoutItemId}`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list_inline__WEBPACK_IMPORTED_MODULE_9__.TaskListInline, { widgetId: id, widgetLabel: label, wrap: config.arrangeWrap, queryItems: config.queryItems, minSize: (_g = (_f = config.sizeMap) === null || _f === void 0 ? void 0 : _f.arrangementIconPopper) === null || _g === void 0 ? void 0 : _g.minSize, defaultSize: (_j = (_h = config.sizeMap) === null || _h === void 0 ? void 0 : _h.arrangementIconPopper) === null || _j === void 0 ? void 0 : _j.defaultSize, defaultPageSize: config.defaultPageSize, initialQueryValue: this.state.initialQueryValue, onHashParameterUsed: this.handleHashParameterUsed }) }));
        }
        return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Paper, { ref: this.widgetRef, variant: 'flat', className: 'jimu-widget runtime-query', "data-widgetid": id, css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
        display: flex;
        flex-direction: column;
        height: 100%;
      `, children: [config.useGraphicsLayerForHighlight && config.highlightMapWidgetId && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_arcgis__WEBPACK_IMPORTED_MODULE_6__.JimuMapViewComponent, { useMapWidgetId: config.highlightMapWidgetId, onActiveViewChange: this.handleJimuMapViewChanged })), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "widget-header", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
          padding: 6px 16px;
          border-bottom: 1px solid var(--sys-color-divider-secondary);
          background-color: var(--sys-color-surface);
        `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h3", { className: "widget-title", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
            margin: 0;
            font-size: 1rem;
            font-weight: 600;
            color: var(--sys-color-text-primary);
          `, children: label || widgetLabel }) }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
          flex: 1;
          display: flex;
          flex-direction: column;
          overflow: hidden;
        `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
            flex: 1;
            overflow: auto;
          `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_widget_context__WEBPACK_IMPORTED_MODULE_11__.QueryWidgetContext.Provider, { value: `${layoutId}:${layoutItemId}`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list__WEBPACK_IMPORTED_MODULE_8__.QueryTaskList, { widgetId: id, queryItems: config.queryItems, defaultPageSize: config.defaultPageSize, initialQueryValue: this.state.initialQueryValue, shouldUseInitialQueryValueForSelection: this.state.shouldUseInitialQueryValueForSelection, onHashParameterUsed: this.handleHashParameterUsed, resultsMode: this.state.resultsMode, onResultsModeChange: this.handleResultsModeChange, accumulatedRecords: this.state.accumulatedRecords, onAccumulatedRecordsChange: this.handleAccumulatedRecordsChange, useGraphicsLayerForHighlight: config.useGraphicsLayerForHighlight, graphicsLayer: this.graphicsLayerRef.current || undefined, mapView: this.mapViewRef.current || undefined, onInitializeGraphicsLayer: this.initializeGraphicsLayerFromOutputDS, onClearGraphicsLayer: this.clearGraphicsLayerIfExists, activeTab: this.state.activeTab, onTabChange: this.handleTabChange }) }) }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
            padding: 4px 12px;
            border-top: 1px solid var(--sys-color-divider-secondary);
            background-color: var(--sys-color-surface-paper);
            flex-shrink: 0;
            text-align: center;
          `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              font-size: 0.75rem;
              color: var(--sys-color-text-tertiary);
              font-weight: 400;
              letter-spacing: 0.025em;
              display: inline-flex;
              align-items: center;
              gap: 4px;
            `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("svg", { width: "14", height: "14", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                  flex-shrink: 0;
                  opacity: 0.6;
                `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("polyline", { points: "16 18 22 12 16 6" }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("polyline", { points: "8 6 2 12 8 18" })] }), "QuerySimple by MapSimple", (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                margin-left: 6px;
                opacity: 0.5;
                font-size: 0.7rem;
              `, children: ["v", _version__WEBPACK_IMPORTED_MODULE_14__.WIDGET_VERSION] })] }) })] })] }));
    }
}
Widget.versionManager = _version_manager__WEBPACK_IMPORTED_MODULE_7__.versionManager;
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Widget);
function __set_webpack_public_path__(url) { __webpack_require__.p = url; }

})();

/******/ 	return __webpack_exports__;
/******/ })()

			);
		}
	};
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9xdWVyeS1zaW1wbGUvZGlzdC9ydW50aW1lL3dpZGdldC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBNkM7QUFFVTtBQUVoRCxNQUFNLFVBQVUsR0FBRyxDQUFDLEtBQXdCLEVBQUUsRUFBRTtJQUNyRCxNQUFNLEdBQUcsR0FBRyxNQUFNLENBQUMsR0FBRztJQUN0QixNQUFNLEVBQUUsU0FBUyxLQUFnQixLQUFLLEVBQWhCLE1BQU0sVUFBSyxLQUFLLEVBQWhDLGFBQXdCLENBQVE7SUFFdEMsTUFBTSxPQUFPLEdBQUcscURBQVUsQ0FBQywrQkFBK0IsRUFBRSxTQUFTLENBQUM7SUFDdEUsSUFBSSxDQUFDLEdBQUc7UUFBRSxPQUFPLHVGQUFLLFNBQVMsRUFBRSxPQUFPLElBQU0sTUFBYSxFQUFJO0lBQy9ELE9BQU8sZ0VBQUMsR0FBRyxrQkFBQyxTQUFTLEVBQUUsT0FBTyxFQUFFLEdBQUcsRUFBRSx5RUFBRyxJQUFNLE1BQU0sRUFBSTtBQUMxRCxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ1g0QztBQUVXO0FBRWpELE1BQU0sV0FBVyxHQUFHLENBQUMsS0FBd0IsRUFBRSxFQUFFO0lBQ3RELE1BQU0sR0FBRyxHQUFHLE1BQU0sQ0FBQyxHQUFHO0lBQ3RCLE1BQU0sRUFBRSxTQUFTLEtBQWdCLEtBQUssRUFBaEIsTUFBTSxVQUFLLEtBQUssRUFBaEMsYUFBd0IsQ0FBUTtJQUV0QyxNQUFNLE9BQU8sR0FBRyxxREFBVSxDQUFDLCtCQUErQixFQUFFLFNBQVMsQ0FBQztJQUN0RSxJQUFJLENBQUMsR0FBRztRQUFFLE9BQU8sdUZBQUssU0FBUyxFQUFFLE9BQU8sSUFBTSxNQUFhLEVBQUk7SUFDL0QsT0FBTyxnRUFBQyxHQUFHLGtCQUFDLFNBQVMsRUFBRSxPQUFP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O0FBcjZETSxxQkFBYyxHQUFHLDREQUFjO2lFQVhuQixNQUFNO0FBbzdEbkIsU0FBUywyQkFBMkIsQ0FBQyxHQUFHLElBQUkscUJBQXVCLEdBQUcsR0FBRyxFQUFDLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9maWxsZWQvZGlyZWN0aW9uYWwvZG93bi50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvZmlsbGVkL2RpcmVjdGlvbmFsL3JpZ2h0LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9hcnJvdy1sZWZ0LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9jb2xsYXBzZS1hbGwudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL291dGxpbmVkL2RpcmVjdGlvbmFsL2V4cGFuZC1hbGwudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL291dGxpbmVkL2VkaXRvci90cmFzaC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvb3V0bGluZWQvc3VnZ2VzdGVkL2luZm8udHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9maWxsZWQvZGlyZWN0aW9uYWwvZG93bi5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvc3ZnL2ZpbGxlZC9kaXJlY3Rpb25hbC9yaWdodC5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2FwcGxpY2F0aW9uL21vcmUtaG9yaXpvbnRhbC5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2RpcmVjdGlvbmFsL2Fycm93LWxlZnQuc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9jb2xsYXBzZS1hbGwuc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9leHBhbmQtYWxsLnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9zdmcvb3V0bGluZWQvZGlyZWN0aW9uYWwvcmlnaHQuc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9vdXRsaW5lZC9lZGl0b3IvY2xvc2Uuc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9vdXRsaW5lZC9lZGl0b3IvdHJhc2guc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9vdXRsaW5lZC9zdWdnZXN0ZWQvZXJyb3Iuc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9vdXRsaW5lZC9zdWdnZXN0ZWQvaW5mby5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL3N1Z2dlc3RlZC93YXJuaW5nLnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL2ljb24uc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL2NvbmZpZy50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9kYXRhLWFjdGlvbnMvYWRkLXRvLW1hcC1hY3Rpb24udHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL2RhdGEtYWN0aW9ucy9pbmRleC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvZGF0YS1hY3Rpb25zL3pvb20tdG8tYWN0aW9uLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9kZWZhdWx0LXF1ZXJ5LWl0ZW0udHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9hc3NldHMvaWNvbnMvc2hvdy1vbi1tYXAuc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvYXNzZXRzL2ljb25zL3pvb20tdG8uc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvYnVmZmVyLWlucHV0LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL2NvbXBvbmVudHMvZmVhdHVyZS1pbmZvLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL2dlb21ldHJ5LWZyb20tZHJhdy50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9nZW9tZXRyeS1mcm9tLWRzLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL2dlb21ldHJ5LWZyb20tbWFwLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL2dyYXBoaWNzLWxheWVyLXV0aWxzLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvaG9va3MvdXNlLWFjY3VtdWxhdGVkLXJlY29yZHMudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9ob29rcy91c2UtZ3JhcGhpY3MtbGF5ZXIudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9ob29rcy91c2UtbWFwLXZpZXcudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9ob29rcy91c2UtdXJsLWNvbnN1bXB0aW9uLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvaG9va3MvdXNlLXdpZGdldC12aXNpYmlsaXR5LnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvaG9va3MvdXNlLXpvb20tdG8tcmVjb3Jkcy50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL2ludGVyYWN0aXZlLWRyYXctdG9vbC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9sb2FkaW5nLXJlc3VsdC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9xdWVyeS1yZXN1bHQtaXRlbS50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9xdWVyeS1yZXN1bHQudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvcXVlcnktdGFzay1jb250ZXh0LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL3F1ZXJ5LXRhc2stZm9ybS50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9xdWVyeS10YXNrLWxhYmVsLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL3F1ZXJ5LXRhc2stbGlzdC1pbmxpbmUudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvcXVlcnktdGFzay1saXN0LXBvcHBlci13cmFwcGVyLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL3F1ZXJ5LXRhc2stbGlzdC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9xdWVyeS10YXNrLXNwYXRpYWwtZm9ybS50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9xdWVyeS10YXNrLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL3F1ZXJ5LXV0aWxzLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvcmVzdWx0cy1tYW5hZ2VtZW50LXV0aWxzLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvc2VsZWN0aW9uLXV0aWxzLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvc2ltcGxlLWxpc3QudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvdHJhbnNsYXRpb25zL2RlZmF1bHQudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS91c2VBdXRvSGVpZ2h0LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL3dpZGdldC1jb25maWcudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS93aWRnZXQtY29udGV4dC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS96b29tLXV0aWxzLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3ZlcnNpb24tbWFuYWdlci50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy92ZXJzaW9uLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24udHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbi9jb21tb24tY29tcG9uZW50cy50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbi9kYXRhLXNvdXJjZS10aXAudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24vZGVidWctbG9nZ2VyLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24vdXNlLWRzLWV4aXN0cy50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbi91dGlscy50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC9leHRlcm5hbCBzeXN0ZW0gXCJqaW11LWNvcmUvZW1vdGlvblwiIiwid2VicGFjazovL2V4Yi1jbGllbnQvZXh0ZXJuYWwgc3lzdGVtIFwiamltdS1hcmNnaXNcIiIsIndlYnBhY2s6Ly9leGItY2xpZW50L2V4dGVybmFsIHN5c3RlbSBcImppbXUtY29yZVwiIiwid2VicGFjazovL2V4Yi1jbGllbnQvZXh0ZXJuYWwgc3lzdGVtIFwiamltdS1sYXlvdXRzL2xheW91dC1ydW50aW1lXCIiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC9leHRlcm5hbCBzeXN0ZW0gXCJqaW11LXRoZW1lXCIiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC9leHRlcm5hbCBzeXN0ZW0gXCJqaW11LXVpXCIiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC9leHRlcm5hbCBzeXN0ZW0gXCJqaW11LXVpL2Jhc2ljL3NxbC1leHByZXNzaW9uLXJ1bnRpbWVcIiIsIndlYnBhY2s6Ly9leGItY2xpZW50L2V4dGVybmFsIHN5c3RlbSBcImppbXUtY29yZS9yZWFjdFwiIiwid2VicGFjazovL2V4Yi1jbGllbnQvZXh0ZXJuYWwgc3lzdGVtIFwid2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb25cIiIsIndlYnBhY2s6Ly9leGItY2xpZW50L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2V4Yi1jbGllbnQvd2VicGFjay9ydW50aW1lL2NvbXBhdCBnZXQgZGVmYXVsdCBleHBvcnQiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL2V4Yi1jbGllbnQvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly9leGItY2xpZW50L3dlYnBhY2svcnVudGltZS9wdWJsaWNQYXRoIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWNvcmUvbGliL3NldC1wdWJsaWMtcGF0aC50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL3dpZGdldC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUmVhY3QsIGNsYXNzTmFtZXMgfSBmcm9tICdqaW11LWNvcmUnXHJcbmltcG9ydCB0eXBlIHsgU1ZHQ29tcG9uZW50UHJvcHMgfSBmcm9tICdqaW11LXVpJ1xyXG5pbXBvcnQgc3JjIGZyb20gJy4uLy4uL3N2Zy9maWxsZWQvZGlyZWN0aW9uYWwvZG93bi5zdmcnXHJcblxyXG5leHBvcnQgY29uc3QgRG93bkZpbGxlZCA9IChwcm9wczogU1ZHQ29tcG9uZW50UHJvcHMpID0+IHtcclxuICBjb25zdCBTVkcgPSB3aW5kb3cuU1ZHXHJcbiAgY29uc3QgeyBjbGFzc05hbWUsIC4uLm90aGVycyB9ID0gcHJvcHNcclxuXHJcbiAgY29uc3QgY2xhc3NlcyA9IGNsYXNzTmFtZXMoJ2ppbXUtaWNvbiBqaW11LWljb24tY29tcG9uZW50JywgY2xhc3NOYW1lKVxyXG4gIGlmICghU1ZHKSByZXR1cm4gPHN2ZyBjbGFzc05hbWU9e2NsYXNzZXN9IHsuLi5vdGhlcnMgYXMgYW55fSAvPlxyXG4gIHJldHVybiA8U1ZHIGNsYXNzTmFtZT17Y2xhc3Nlc30gc3JjPXtzcmN9IHsuLi5vdGhlcnN9IC8+XHJcbn1cclxuIiwiaW1wb3J0IHsgUmVhY3QsIGNsYXNzTmFtZXMgfSBmcm9tICdqaW11LWNvcmUnXHJcbmltcG9ydCB0eXBlIHsgU1ZHQ29tcG9uZW50UHJvcHMgfSBmcm9tICdqaW11LXVpJ1xyXG5pbXBvcnQgc3JjIGZyb20gJy4uLy4uL3N2Zy9maWxsZWQvZGlyZWN0aW9uYWwvcmlnaHQuc3ZnJ1xyXG5cclxuZXhwb3J0IGNvbnN0IFJpZ2h0RmlsbGVkID0gKHByb3BzOiBTVkdDb21wb25lbnRQcm9wcykgPT4ge1xyXG4gIGNvbnN0IFNWRyA9IHdpbmRvdy5TVkdcclxuICBjb25zdCB7IGNsYXNzTmFtZSwgLi4ub3RoZXJzIH0gPSBwcm9wc1xyXG5cclxuICBjb25zdCBjbGFzc2VzID0gY2xhc3NOYW1lcygnamltdS1pY29uIGppbXUtaWNvbi1jb21wb25lbnQnLCBjbGFzc05hbWUpXHJcbiAgaWYgKCFTVkcpIHJldHVybiA8c3ZnIGNsYXNzTmFtZT17Y2xhc3Nlc30gey4uLm90aGVycyBhcyBhbnl9IC8+XHJcbiAgcmV0dXJuIDxTVkcgY2xhc3NOYW1lPXtjbGFzc2VzfSBzcmM9e3NyY30gey4uLm90aGVyc30gLz5cclxufVxyXG4iLCJpbXBvcnQgeyBSZWFjdCwgY2xhc3NOYW1lcyB9IGZyb20gJ2ppbXUtY29yZSdcclxuaW1wb3J0IHR5cGUgeyBTVkdDb21wb25lbnRQcm9wcyB9IGZyb20gJ2ppbXUtdWknXHJcbmltcG9ydCBzcmMgZnJvbSAnLi4vLi4vc3ZnL291dGxpbmVkL2RpcmVjdGlvbmFsL2Fycm93LWxlZnQuc3ZnJ1xyXG5cclxuZXhwb3J0IGNvbnN0IEFycm93TGVmdE91dGxpbmVkID0gKHByb3BzOiBTVkdDb21wb25lbnRQcm9wcykgPT4ge1xyXG4gIGNvbnN0IFNWRyA9IHdpbmRvdy5TVkdcclxuICBjb25zdCB7IGNsYXNzTmFtZSwgLi4ub3RoZXJzIH0gPSBwcm9wc1xyXG5cclxuICBjb25zdCBjbGFzc2VzID0gY2xhc3NOYW1lcygnamltdS1pY29uIGppbXUtaWNvbi1jb21wb25lbnQnLCBjbGFzc05hbWUpXHJcbiAgaWYgKCFTVkcpIHJldHVybiA8c3ZnIGNsYXNzTmFtZT17Y2xhc3Nlc30gey4uLm90aGVycyBhcyBhbnl9IC8+XHJcbiAgcmV0dXJuIDxTVkcgY2xhc3NOYW1lPXtjbGFzc2VzfSBzcmM9e3NyY30gey4uLm90aGVyc30gLz5cclxufVxyXG4iLCJpbXBvcnQgeyBSZWFjdCwgY2xhc3NOYW1lcyB9IGZyb20gJ2ppbXUtY29yZSdcclxuaW1wb3J0IHR5cGUgeyBTVkdDb21wb25lbnRQcm9wcyB9IGZyb20gJ2ppbXUtdWknXHJcbmltcG9ydCBzcmMgZnJvbSAnLi4vLi4vc3ZnL291dGxpbmVkL2RpcmVjdGlvbmFsL2NvbGxhcHNlLWFsbC5zdmcnXHJcblxyXG5leHBvcnQgY29uc3QgQ29sbGFwc2VBbGxPdXRsaW5lZCA9IChwcm9wczogU1ZHQ29tcG9uZW50UHJvcHMpID0+IHtcclxuICBjb25zdCBTVkcgPSB3aW5kb3cuU1ZHXHJcbiAgY29uc3QgeyBjbGFzc05hbWUsIC4uLm90aGVycyB9ID0gcHJvcHNcclxuXHJcbiAgY29uc3QgY2xhc3NlcyA9IGNsYXNzTmFtZXMoJ2ppbXUtaWNvbiBqaW11LWljb24tY29tcG9uZW50JywgY2xhc3NOYW1lKVxyXG4gIGlmICghU1ZHKSByZXR1cm4gPHN2ZyBjbGFzc05hbWU9e2NsYXNzZXN9IHsuLi5vdGhlcnMgYXMgYW55fSAvPlxyXG4gIHJldHVybiA8U1ZHIGNsYXNzTmFtZT17Y2xhc3Nlc30gc3JjPXtzcmN9IHsuLi5vdGhlcnN9IC8+XHJcbn1cclxuIiwiaW1wb3J0IHsgUmVhY3QsIGNsYXNzTmFtZXMgfSBmcm9tICdqaW11LWNvcmUnXHJcbmltcG9ydCB0eXBlIHsgU1ZHQ29tcG9uZW50UHJvcHMgfSBmcm9tICdqaW11LXVpJ1xyXG5pbXBvcnQgc3JjIGZyb20gJy4uLy4uL3N2Zy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9leHBhbmQtYWxsLnN2ZydcclxuXHJcbmV4cG9ydCBjb25zdCBFeHBhbmRBbGxPdXRsaW5lZCA9IChwcm9wczogU1ZHQ29tcG9uZW50UHJvcHMpID0+IHtcclxuICBjb25zdCBTVkcgPSB3aW5kb3cuU1ZHXHJcbiAgY29uc3QgeyBjbGFzc05hbWUsIC4uLm90aGVycyB9ID0gcHJvcHNcclxuXHJcbiAgY29uc3QgY2xhc3NlcyA9IGNsYXNzTmFtZXMoJ2ppbXUtaWNvbiBqaW11LWljb24tY29tcG9uZW50JywgY2xhc3NOYW1lKVxyXG4gIGlmICghU1ZHKSByZXR1cm4gPHN2ZyBjbGFzc05hbWU9e2NsYXNzZXN9IHsuLi5vdGhlcnMgYXMgYW55fSAvPlxyXG4gIHJldHVybiA8U1ZHIGNsYXNzTmFtZT17Y2xhc3Nlc30gc3JjPXtzcmN9IHsuLi5vdGhlcnN9IC8+XHJcbn1cclxuIiwiaW1wb3J0IHsgUmVhY3QsIGNsYXNzTmFtZXMgfSBmcm9tICdqaW11LWNvcmUnXHJcbmltcG9ydCB0eXBlIHsgU1ZHQ29tcG9uZW50UHJvcHMgfSBmcm9tICdqaW11LXVpJ1xyXG5pbXBvcnQgc3JjIGZyb20gJy4uLy4uL3N2Zy9vdXRsaW5lZC9lZGl0b3IvdHJhc2guc3ZnJ1xyXG5cclxuZXhwb3J0IGNvbnN0IFRyYXNoT3V0bGluZWQgPSAocHJvcHM6IFNWR0NvbXBvbmVudFByb3BzKSA9PiB7XHJcbiAgY29uc3QgU1ZHID0gd2luZG93LlNWR1xyXG4gIGNvbnN0IHsgY2xhc3NOYW1lLCAuLi5vdGhlcnMgfSA9IHByb3BzXHJcblxyXG4gIGNvbnN0IGNsYXNzZXMgPSBjbGFzc05hbWVzKCdqaW11LWljb24gamltdS1pY29uLWNvbXBvbmVudCcsIGNsYXNzTmFtZSlcclxuICBpZiAoIVNWRykgcmV0dXJuIDxzdmcgY2xhc3NOYW1lPXtjbGFzc2VzfSB7Li4ub3RoZXJzIGFzIGFueX0gLz5cclxuICByZXR1cm4gPFNWRyBjbGFzc05hbWU9e2NsYXNzZXN9IHNyYz17c3JjfSB7Li4ub3RoZXJzfSAvPlxyXG59XHJcbiIsImltcG9ydCB7IFJlYWN0LCBjbGFzc05hbWVzIH0gZnJvbSAnamltdS1jb3JlJ1xyXG5pbXBvcnQgdHlwZSB7IFNWR0NvbXBvbmVudFByb3BzIH0gZnJvbSAnamltdS11aSdcclxuaW1wb3J0IHNyYyBmcm9tICcuLi8uLi9zdmcvb3V0bGluZWQvc3VnZ2VzdGVkL2luZm8uc3ZnJ1xyXG5cclxuZXhwb3J0IGNvbnN0IEluZm9PdXRsaW5lZCA9IChwcm9wczogU1ZHQ29tcG9uZW50UHJvcHMpID0+IHtcclxuICBjb25zdCBTVkcgPSB3aW5kb3cuU1ZHXHJcbiAgY29uc3QgeyBjbGFzc05hbWUsIC4uLm90aGVycyB9ID0gcHJvcHNcclxuXHJcbiAgY29uc3QgY2xhc3NlcyA9IGNsYXNzTmFtZXMoJ2ppbXUtaWNvbiBqaW11LWljb24tY29tcG9uZW50JywgY2xhc3NOYW1lKVxyXG4gIGlmICghU1ZHKSByZXR1cm4gPHN2ZyBjbGFzc05hbWU9e2NsYXNzZXN9IHsuLi5vdGhlcnMgYXMgYW55fSAvPlxyXG4gIHJldHVybiA8U1ZHIGNsYXNzTmFtZT17Y2xhc3Nlc30gc3JjPXtzcmN9IHsuLi5vdGhlcnN9IC8+XHJcbn1cclxuIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGQ9XFxcIm0xNCA0LTYgOC02LTh6XFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHZpZXdCb3g9XFxcIjAgMCAxNiAxNlxcXCI+PHBhdGggZmlsbD1cXFwiIzAwMFxcXCIgZD1cXFwibTQgMiA4IDYtOCA2elxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGZpbGwtcnVsZT1cXFwiZXZlbm9kZFxcXCIgZD1cXFwiTTIgN2ExIDEgMCAxIDAgMCAyIDEgMSAwIDAgMCAwLTJtNSAxYTEgMSAwIDEgMSAyIDAgMSAxIDAgMCAxLTIgMG02IDBhMSAxIDAgMSAxIDIgMCAxIDEgMCAwIDEtMiAwXFxcIiBjbGlwLXJ1bGU9XFxcImV2ZW5vZGRcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBkPVxcXCJNMTUgNy41YS41Mi41MiAwIDAgMS0uNTE2LjUyN0gyLjk3Nkw2LjQ3MyAxMS42YS41MzUuNTM1IDAgMCAxIDAgLjc0Ni41MS41MSAwIDAgMS0uNzMgMEwxIDcuNWw0Ljc0My00Ljg0NmEuNTEuNTEgMCAwIDEgLjczIDAgLjUzNS41MzUgMCAwIDEgMCAuNzQ2TDIuOTc2IDYuOTczaDExLjUwOGMuMjg1IDAgLjUxNi4yMzYuNTE2LjUyN1xcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGQ9XFxcIk0xIDNoMTR2MUgxek05IDdoNnYxSDl6TTUuMDM2IDYuMTQ2YS41LjUgMCAwIDAtLjcwOCAwTDEuMTQ2IDkuMzI4YS41LjUgMCAxIDAgLjcwOC43MDhsMi4zMjgtMi4zMjlWMTQuNWgxVjcuNzA3bDIuMzI4IDIuMzI5YS41LjUgMCAxIDAgLjcwOC0uNzA4elxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGQ9XFxcIk0xIDNoMTR2MUgxek05IDdoNnYxSDl6TTQuMzI4IDE0LjM1NGEuNS41IDAgMCAwIC43MDggMGwzLjE4Mi0zLjE4MmEuNS41IDAgMSAwLS43MDgtLjcwOGwtMi4zMjggMi4zMjlWNmgtMXY2Ljc5M2wtMi4zMjgtMi4zMjhhLjUuNSAwIDEgMC0uNzA4LjcwN3pcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBmaWxsLXJ1bGU9XFxcImV2ZW5vZGRcXFwiIGQ9XFxcIk00LjY1MyAxMy44NTRhLjQ4NS40ODUgMCAwIDEgMC0uNzA4TDEwLjI0IDggNC42NTMgMi44NTRhLjQ4NS40ODUgMCAwIDEgMC0uNzA4LjU0LjU0IDAgMCAxIC43MzggMGw1Ljk1NiA1LjVhLjQ4NS40ODUgMCAwIDEgMCAuNzA4bC01Ljk1NiA1LjVhLjU0LjU0IDAgMCAxLS43MzggMFxcXCIgY2xpcC1ydWxlPVxcXCJldmVub2RkXFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHZpZXdCb3g9XFxcIjAgMCAxNiAxNlxcXCI+PHBhdGggZmlsbD1cXFwiIzAwMFxcXCIgZD1cXFwibTguNzQ1IDggNi4xIDYuMWEuNTI3LjUyNyAwIDEgMS0uNzQ1Ljc0Nkw4IDguNzQ2bC02LjEgNi4xYS41MjcuNTI3IDAgMSAxLS43NDYtLjc0Nmw2LjEtNi4xLTYuMS02LjFhLjUyNy41MjcgMCAwIDEgLjc0Ni0uNzQ2bDYuMSA2LjEgNi4xLTYuMWEuNTI3LjUyNyAwIDAgMSAuNzQ2Ljc0NnpcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBkPVxcXCJNNiA2LjVhLjUuNSAwIDAgMSAxIDB2NmEuNS41IDAgMCAxLTEgMHpNOS41IDZhLjUuNSAwIDAgMC0uNS41djZhLjUuNSAwIDAgMCAxIDB2LTZhLjUuNSAwIDAgMC0uNS0uNVxcXCI+PC9wYXRoPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGZpbGwtcnVsZT1cXFwiZXZlbm9kZFxcXCIgZD1cXFwiTTExIDBINWExIDEgMCAwIDAtMSAxdjJILjVhLjUuNSAwIDAgMCAwIDFoMS42bC44MSAxMS4xYTEgMSAwIDAgMCAuOTk1LjloOC4xOWExIDEgMCAwIDAgLjk5NS0uOUwxMy45IDRoMS42YS41LjUgMCAwIDAgMC0xSDEyVjFhMSAxIDAgMCAwLTEtMW0wIDNWMUg1djJ6bTEuODk1IDFoLTkuNzlsLjggMTFoOC4xOXpcXFwiIGNsaXAtcnVsZT1cXFwiZXZlbm9kZFxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGZpbGwtcnVsZT1cXFwiZXZlbm9kZFxcXCIgZD1cXFwiTTggMTZBOCA4IDAgMSAxIDggMGE4IDggMCAwIDEgMCAxNm0wLTFBNyA3IDAgMSAwIDggMWE3IDcgMCAwIDAgMCAxNE04IDRhLjkwNS45MDUgMCAwIDAtLjkuOTk1bC4zNSAzLjUwN2EuNTUyLjU1MiAwIDAgMCAxLjEgMGwuMzUtMy41MDdBLjkwNS45MDUgMCAwIDAgOCA0bTEgN2ExIDEgMCAxIDEtMiAwIDEgMSAwIDAgMSAyIDBcXFwiIGNsaXAtcnVsZT1cXFwiZXZlbm9kZFxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGQ9XFxcIk04IDUuNWExIDEgMCAxIDAgMC0yIDEgMSAwIDAgMCAwIDJNNi41IDcuNUEuNS41IDAgMCAxIDcgN2gxLjV2NC41aDFhLjUuNSAwIDAgMSAwIDFoLTNhLjUuNSAwIDAgMSAwLTFoMVY4SDdhLjUuNSAwIDAgMS0uNS0uNVxcXCI+PC9wYXRoPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGZpbGwtcnVsZT1cXFwiZXZlbm9kZFxcXCIgZD1cXFwiTTggMTZBOCA4IDAgMSAxIDggMGE4IDggMCAwIDEgMCAxNm0wLTFBNyA3IDAgMSAwIDggMWE3IDcgMCAwIDAgMCAxNFxcXCIgY2xpcC1ydWxlPVxcXCJldmVub2RkXFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHZpZXdCb3g9XFxcIjAgMCAxNiAxNlxcXCI+PHBhdGggZmlsbD1cXFwiIzAwMFxcXCIgZmlsbC1ydWxlPVxcXCJldmVub2RkXFxcIiBkPVxcXCJNOCAyLjEyNSAxNC4zMzQgMTRIMS42Njd6bS0uODgyLS40N2ExIDEgMCAwIDEgMS43NjUgMGw2LjMzMyAxMS44NzRBMSAxIDAgMCAxIDE0LjMzNCAxNUgxLjY2N2ExIDEgMCAwIDEtLjg4Mi0xLjQ3ek04IDQuODc0YS45MDUuOTA1IDAgMCAwLS45Ljk5NWwuMzUgMy41MDdhLjU1Mi41NTIgMCAwIDAgMS4xIDBMOC45IDUuODdhLjkwNS45MDUgMCAwIDAtLjktLjk5NW0xIDdhMSAxIDAgMSAxLTIgMCAxIDEgMCAwIDEgMiAwXFxcIiBjbGlwLXJ1bGU9XFxcImV2ZW5vZGRcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDIwIDIwXFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBkPVxcXCJNOC41IDNBNS41IDUuNSAwIDAgMSAxNCA4LjVhNS41IDUuNSAwIDAgMS0xLjI3MyAzLjUyN2w0LjA1MyA0LjA1NGEuNzUuNzUgMCAxIDEtMS4wNiAxLjA2bC00LjA1NC00LjA1M2E1LjUgNS41IDAgMCAxLTMuNTI3IDEuMjczIDUuNSA1LjUgMCAxIDEgMC0xMUg4LjV6bTAgMS41aC0uMzYxYTQgNCAwIDEgMCAwIDggNCA0IDAgMCAwIDAtOHpcXFwiPjwvcGF0aD48cmVjdCB3aWR0aD1cXFwiMTlcXFwiIGhlaWdodD1cXFwiMTlcXFwiIHg9XFxcIi41XFxcIiB5PVxcXCIuNVxcXCIgc3Ryb2tlPVxcXCIjMDAwXFxcIiByeD1cXFwiMS41XFxcIj48L3JlY3Q+PC9zdmc+XCIiLCJpbXBvcnQgdHlwZSB7IFNwYXRpYWxSZWxhdGlvbnNoaXAsIFVuaXRzIH0gZnJvbSAnQGVzcmkvYXJjZ2lzLXJlc3QtZmVhdHVyZS1zZXJ2aWNlJ1xuaW1wb3J0IHR5cGUgeyBJbW11dGFibGVPYmplY3QsIEltbXV0YWJsZUFycmF5LCBTcWxFeHByZXNzaW9uLCBVc2VEYXRhU291cmNlLCBJY29uUmVzdWx0LCBPcmRlckJ5T3B0aW9uIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHR5cGUgeyBTaXplIH0gZnJvbSAnamltdS11aSdcblxuZXhwb3J0IGVudW0gQ3JlYXRlVG9vbFR5cGUge1xuICBQb2ludCA9ICdQb2ludCcsXG4gIFBvbHlsaW5lID0gJ1BvbHlsaW5lJyxcbiAgUG9seWdvbiA9ICdQb2x5Z29uJyxcbiAgUmVjdGFuZ2xlID0gJ1JlY3RhbmdsZScsXG4gIENpcmNsZSA9ICdDaXJjbGUnXG59XG5cbmV4cG9ydCBlbnVtIFNlbGVjdGlvblR5cGUge1xuICBOZXdTZWxlY3Rpb24gPSAnTkVXX1NFTEVDVElPTicsXG4gIEFkZFRvU2VsZWN0aW9uID0gJ0FERF9UT19DVVJSRU5UX1NFTEVDVElPTicsXG4gIFJlbW92ZUZyb21TZWxlY3Rpb24gPSAnUkVNT1ZFX0ZST01fQ1VSUkVOVF9TRUxFQ1RJT04nLFxuICBTdWJzZXRTZWxlY3Rpb24gPSAnU1VCU0VUX0ZST01fQ1VSUkVOVF9TRUxFQ1RJT04nLFxuICBTd2l0Y2hTZWxlY3Rpb24gPSAnU1dJVENIX0NVUlJFTlRfU0VMRUNUSU9OJyxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBGaWVsZCB7XG4gIG5hbWU6IHN0cmluZ1xuICBhbGlhcz86IHN0cmluZ1xuICBsYWJlbD86IHN0cmluZ1xufVxuXG5leHBvcnQgZW51bSBRdWVyeUFycmFuZ2VUeXBlIHtcbiAgQmxvY2sgPSAnQkxPQ0snLFxuICBJbmxpbmUgPSAnSU5MSU5FJyxcbiAgUG9wcGVyID0gJ1BPUFBFUicsXG59XG5cbmV4cG9ydCBlbnVtIFNwYXRpYWxGaWx0ZXJUeXBlIHtcbiAgQ3VycmVudE1hcEV4dGVudCA9ICdDdXJyZW50TWFwRXh0ZW50JyxcbiAgSW50ZXJhY3RpdmVEcmF3TW9kZSA9ICdJbnRlcmFjdGl2ZURyYXdNb2RlJyxcbiAgTm9uZSA9ICcnXG59XG5cbmV4cG9ydCBlbnVtIFNwYXRpYWxSZWxhdGlvbiB7XG4gIEludGVyc2VjdCA9ICdpbnRlcnNlY3RzJyxcbiAgQ29udGFpbiA9ICdjb250YWlucycsXG4gIENyb3NzID0gJ2Nyb3NzZXMnLFxuICBFbnZlbG9wZUludGVyc2VjdCA9ICdlbnZlbG9wZS1pbnRlcnNlY3RzJyxcbiAgSW5kZXhJbnRlcnNlY3QgPSAnaW5kZXgtaW50ZXJzZWN0cycsXG4gIE92ZXJsYXAgPSAnb3ZlcmxhcHMnLFxuICBUb3VjaCA9ICd0b3VjaGVzJyxcbiAgV2l0aGluID0gJ3dpdGhpbicsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3BhdGlhbEZpbHRlck9iaiB7XG4gIGdlb21ldHJ5OiBhbnlcbiAgZ3JhcGhpYz86IF9fZXNyaS5HcmFwaGljXG4gIGxheWVyPzogX19lc3JpLkdyYXBoaWNzTGF5ZXJcbiAgY2xlYXJBZnRlckFwcGx5PzogYm9vbGVhblxuICByZWxhdGlvbj86IFNwYXRpYWxSZWxhdGlvblxuICBidWZmZXI/OiB7IGRpc3RhbmNlOiBudW1iZXIsIHVuaXQ6IFVuaXRUeXBlIH1cbn1cblxuZXhwb3J0IGNvbnN0IG1hcEpTQVBJU3BhdGlhbFJlbFRvRHNTcGF0aWFsUmVsOiB7IFtrZXk6IHN0cmluZ106IFNwYXRpYWxSZWxhdGlvbnNoaXAgfSA9IHtcbiAgW1NwYXRpYWxSZWxhdGlvbi5JbnRlcnNlY3RdOiAnZXNyaVNwYXRpYWxSZWxJbnRlcnNlY3RzJyxcbiAgW1NwYXRpYWxSZWxhdGlvbi5Db250YWluXTogJ2VzcmlTcGF0aWFsUmVsQ29udGFpbnMnLFxuICBbU3BhdGlhbFJlbGF0aW9uLkNyb3NzXTogJ2VzcmlTcGF0aWFsUmVsQ3Jvc3NlcycsXG4gIFtTcGF0aWFsUmVsYXRpb24uRW52ZWxvcGVJbnRlcnNlY3RdOiAnZXNyaVNwYXRpYWxSZWxFbnZlbG9wZUludGVyc2VjdHMnLFxuICBbU3BhdGlhbFJlbGF0aW9uLkluZGV4SW50ZXJzZWN0XTogJ2VzcmlTcGF0aWFsUmVsSW5kZXhJbnRlcnNlY3RzJyxcbiAgW1NwYXRpYWxSZWxhdGlvbi5PdmVybGFwXTogJ2VzcmlTcGF0aWFsUmVsT3ZlcmxhcHMnLFxuICBbU3BhdGlhbFJlbGF0aW9uLlRvdWNoXTogJ2VzcmlTcGF0aWFsUmVsVG91Y2hlcycsXG4gIFtTcGF0aWFsUmVsYXRpb24uV2l0aGluXTogJ2VzcmlTcGF0aWFsUmVsV2l0aGluJ1xufVxuXG5leHBvcnQgZW51bSBVbml0VHlwZSB7XG4gIE1pbGVzID0gJ01pbGVzJyxcbiAgS2lsb21ldGVycyA9ICdLaWxvbWV0ZXJzJyxcbiAgRmVldCA9ICdGZWV0JyxcbiAgTWV0ZXJzID0gJ01ldGVycycsXG4gIE5hdXRpY2FsTWlsZXMgPSAnTmF1dGljYWxNaWxlcycsXG59XG5cbmV4cG9ydCBjb25zdCBtYXBKU0FQSVVuaXRUb0RzVW5pdDogeyBba2V5OiBzdHJpbmddOiBVbml0cyB9ID0ge1xuICBbVW5pdFR5cGUuTWlsZXNdOiAnZXNyaVNSVW5pdF9TdGF0dXRlTWlsZScsXG4gIFtVbml0VHlwZS5LaWxvbWV0ZXJzXTogJ2VzcmlTUlVuaXRfS2lsb21ldGVyJyxcbiAgW1VuaXRUeXBlLkZlZXRdOiAnZXNyaVNSVW5pdF9Gb290JyxcbiAgW1VuaXRUeXBlLk1ldGVyc106ICdlc3JpU1JVbml0X01ldGVyJyxcbiAgW1VuaXRUeXBlLk5hdXRpY2FsTWlsZXNdOiAnZXNyaVNSVW5pdF9OYXV0aWNhbE1pbGUnXG59XG5cbmV4cG9ydCBlbnVtIExpc3REaXJlY3Rpb24ge1xuICBIb3Jpem9udGFsID0gJ0hvcml6b250YWwnLFxuICBWZXJ0aWNhbCA9ICdWZXJ0aWNhbCcsXG59XG5cbmV4cG9ydCBlbnVtIFBhZ2luZ1R5cGUge1xuICBNdWx0aVBhZ2UgPSAnTXVsdGlQYWdlJyxcbiAgTGF6eUxvYWQgPSAnTGF6eUxvYWQnLFxuICBTaW1wbGUgPSAnU2ltcGxlJywgLy8gUmVuZGVyIGFsbCByZWNvcmRzIGF0IG9uY2UsIG5vIGxhenkgbG9hZGluZyBvciBwYWdpbmF0aW9uXG59XG5cbmV4cG9ydCBlbnVtIEZpZWxkc1R5cGUge1xuICBQb3B1cFNldHRpbmcgPSAnUG9wdXBTZXR0aW5nJyxcbiAgU2VsZWN0QXR0cmlidXRlcyA9ICdTZWxlY3RBdHRyaWJ1dGVzJyxcbn1cblxuZXhwb3J0IGVudW0gU29ydERpcmVjdGlvbiB7XG4gIEFzYyA9ICdBc2MnLFxuICBEZXNjID0gJ0Rlc2MnLFxufVxuXG5leHBvcnQgZW51bSBSZXN1bHRTZWxlY3RNb2RlIHtcbiAgU2luZ2xlID0gJ1NpbmdsZScsXG4gIE11bHRpcGxlID0gJ011bHRpcGxlJyxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTb3J0T3B0aW9uIHtcbiAgbmFtZTogc3RyaW5nXG4gIGRpcmVjdGlvbjogU29ydERpcmVjdGlvblxufVxuXG5leHBvcnQgZW51bSBTeW1ib2xUeXBlIHtcbiAgRGVmYXVsdFN5bWJvbCA9ICdEZWZhdWx0U3ltYm9sJyxcbiAgQ3VzdG9tU3ltYm9sID0gJ0N1c3RvbVN5bWJvbCcsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUXVlcnlJdGVtVHlwZSB7XG4gIGNvbmZpZ0lkOiBzdHJpbmdcbiAgaWNvbj86IEljb25SZXN1bHRcbiAgbmFtZT86IHN0cmluZ1xuICBkaXNwbGF5TGFiZWw/OiBib29sZWFuXG4gIHVzZURhdGFTb3VyY2U/OiBVc2VEYXRhU291cmNlXG4gIG91dHB1dERhdGFTb3VyY2VJZD86IHN0cmluZ1xuICB1c2VBdHRyaWJ1dGVGaWx0ZXI/OiBib29sZWFuXG4gIHVzZVNwYXRpYWxGaWx0ZXI/OiBib29sZWFuXG4gIGF0dHJpYnV0ZUZpbHRlckxhYmVsPzogc3RyaW5nXG4gIHNwYXRpYWxGaWx0ZXJMYWJlbD86IHN0cmluZ1xuICBhdHRyaWJ1dGVGaWx0ZXJEZXNjPzogc3RyaW5nXG4gIHNwYXRpYWxGaWx0ZXJEZXNjPzogc3RyaW5nXG4gIHJlc3VsdHNMYWJlbD86IHN0cmluZ1xuICBzcWxFeHByT2JqPzogU3FsRXhwcmVzc2lvblxuICBzcGF0aWFsTWFwV2lkZ2V0SWRzPzogc3RyaW5nW11cbiAgc3BhdGlhbEZpbHRlclR5cGVzPzogU3BhdGlhbEZpbHRlclR5cGVbXVxuICBzcGF0aWFsSW50ZXJhY3RpdmVDcmVhdGVUb29sVHlwZXM/OiBDcmVhdGVUb29sVHlwZVtdXG4gIHNwYXRpYWxJbnRlcmFjdGl2ZUVuYWJsZUJ1ZmZlcj86IGJvb2xlYW5cbiAgc3BhdGlhbEludGVyYWN0aXZlQnVmZmVyRGlzdGFuY2U/OiBudW1iZXJcbiAgc3BhdGlhbEludGVyYWN0aXZlQnVmZmVyVW5pdD86IFVuaXRUeXBlXG4gIHNwYXRpYWxSZWxhdGlvbnM/OiBTcGF0aWFsUmVsYXRpb25bXVxuICBzcGF0aWFsUmVsYXRpb25Vc2VEYXRhU291cmNlcz86IFVzZURhdGFTb3VyY2VbXVxuICBzcGF0aWFsUmVsYXRpb25FbmFibGVTZWxlY3RUb29sPzogYm9vbGVhblxuICBzcGF0aWFsUmVsYXRpb25FbmFibGVCdWZmZXI/OiBib29sZWFuXG4gIHNwYXRpYWxSZWxhdGlvbkJ1ZmZlckRpc3RhbmNlPzogbnVtYmVyXG4gIHNwYXRpYWxSZWxhdGlvbkJ1ZmZlclVuaXQ/OiBVbml0VHlwZVxuICBzcGF0aWFsSW5jbHVkZVJ1bnRpbWVEYXRhPzogYm9vbGVhblxuICByZXN1bHRMaXN0RGlyZWN0aW9uPzogTGlzdERpcmVjdGlvblxuICByZXN1bHRQYWdpbmdTdHlsZT86IFBhZ2luZ1R5cGVcbiAgcmVzdWx0RmllbGRzVHlwZT86IEZpZWxkc1R5cGVcbiAgcmVzdWx0VGl0bGVGaWVsZHM/OiBzdHJpbmdbXVxuICByZXN1bHRUaXRsZUV4cHJlc3Npb24/OiBzdHJpbmdcbiAgcmVzdWx0RGlzcGxheUZpZWxkcz86IHN0cmluZ1tdXG4gIHJlc3VsdFN5bWJvbFR5cGU/OiBTeW1ib2xUeXBlXG4gIHJlc3VsdEN1c3RvbVN5bWJvbD86IGFueVxuICByZXN1bHRBbGxvd0NoYW5nZVN5bWJvbD86IGJvb2xlYW5cbiAgcmVzdWx0RXhwYW5kQnlEZWZhdWx0PzogYm9vbGVhblxuICByZXN1bHRTZWxlY3RNb2RlPzogUmVzdWx0U2VsZWN0TW9kZVxuICBhbGxvd0V4cG9ydD86IGJvb2xlYW5cbiAgc29ydE9wdGlvbnM/OiBPcmRlckJ5T3B0aW9uW11cbiAgaXRlbVNpemVNYXA/OiB7XG4gICAgYXJyYW5nZW1lbnRIb3Jpem9udGFsUG9wcGVyPzogU2l6ZU1hcFxuICB9XG4gIC8vIEdyb3VwaW5nIGZpZWxkc1xuICBncm91cElkPzogc3RyaW5nXG4gIGdyb3VwRGlzcGxheU5hbWU/OiBzdHJpbmdcbiAgc2VhcmNoQWxpYXM/OiBzdHJpbmdcbiAgc2hvcnRJZD86IHN0cmluZ1xuICB6b29tVG9TZWxlY3RlZD86IGJvb2xlYW5cbiAgLy8gRGlzcGxheSBvcmRlciAobG93ZXIgbnVtYmVycyBhcHBlYXIgZmlyc3QsIG9wdGlvbmFsKVxuICBvcmRlcj86IG51bWJlclxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFNpemVNYXAge1xuICBtaW5TaXplPzogU2l6ZVxuICBkZWZhdWx0U2l6ZT86IFNpemVcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTZXR0aW5nQ29uZmlnIHtcbiAgcXVlcnlJdGVtcz86IEltbXV0YWJsZUFycmF5PFF1ZXJ5SXRlbVR5cGU+XG4gIGFycmFuZ2VUeXBlOiBRdWVyeUFycmFuZ2VUeXBlXG4gIGFycmFuZ2VXcmFwPzogYm9vbGVhblxuICByZXN1bHRMaXN0RGlyZWN0aW9uPzogTGlzdERpcmVjdGlvblxuICByZXN1bHRQYWdpbmdTdHlsZT86IFBhZ2luZ1R5cGVcbiAgbGF6eUxvYWRJbml0aWFsUGFnZVNpemU/OiBudW1iZXJcbiAgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodDogYm9vbGVhbiAvLyBVc2UgZ3JhcGhpY3MgbGF5ZXIgZm9yIGhpZ2hsaWdodGluZyAocmVxdWlyZWQgLSBpbmRlcGVuZGVudCBvZiBsYXllciB2aXNpYmlsaXR5KVxuICBoaWdobGlnaHRNYXBXaWRnZXRJZD86IHN0cmluZyAvLyBNYXAgd2lkZ2V0IElEIHRvIHVzZSBmb3IgZ3JhcGhpY3MgbGF5ZXIgaGlnaGxpZ2h0aW5nXG4gIHNpemVNYXA/OiB7XG4gICAgYXJyYW5nZW1lbnRJY29uUG9wcGVyPzogU2l6ZU1hcFxuICB9XG59XG5cbmV4cG9ydCB0eXBlIElNQ29uZmlnID0gSW1tdXRhYmxlT2JqZWN0PFNldHRpbmdDb25maWc+XG5cblxuIiwiLyoqXG4gKiBDdXN0b20gXCJBZGQgdG8gTWFwXCIgZGF0YSBhY3Rpb24gZm9yIFF1ZXJ5U2ltcGxlIHdpZGdldC5cbiAqIFxuICogVGhpcyBhY3Rpb24gcmVwbGFjZXMgdGhlIGZyYW1ld29yaydzIFwiU2hvdyBvbiBNYXBcIiBhY3Rpb24gd2l0aCBhIGN1c3RvbVxuICogaW1wbGVtZW50YXRpb24gdGhhdCB1c2VzIFF1ZXJ5U2ltcGxlJ3Mgc2VsZWN0aW9uIHByb2Nlc3MgKHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoKS5cbiAqIFRoaXMgZW5zdXJlcyBjb25zaXN0ZW50IGJlaGF2aW9yIHdpdGggcXVlcnkgcmVzdWx0cyBhbmQgcHJvcGVyIGludGVncmF0aW9uXG4gKiB3aXRoIHRoZSB3aWRnZXQncyBcIkNsZWFyIHJlc3VsdHNcIiBmdW5jdGlvbmFsaXR5LlxuICovXG5cbmltcG9ydCB7IHR5cGUgRGF0YVJlY29yZFNldCwgdHlwZSBEYXRhQWN0aW9uLCBEYXRhTGV2ZWwsIHR5cGUgSW50bFNoYXBlLCB0eXBlIERhdGFTb3VyY2UgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBzZWxlY3RSZWNvcmRzQW5kUHVibGlzaCB9IGZyb20gJy4uL3J1bnRpbWUvc2VsZWN0aW9uLXV0aWxzJ1xuaW1wb3J0IHsgY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlciB9IGZyb20gJ3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uJ1xuXG5jb25zdCBkZWJ1Z0xvZ2dlciA9IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIoKVxuaW1wb3J0IHR5cGUgeyBGZWF0dXJlRGF0YVJlY29yZCB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB0eXBlIHsgUXVlcnlJdGVtVHlwZSB9IGZyb20gJy4uL2NvbmZpZydcblxuLyoqXG4gKiBDcmVhdGVzIGEgY3VzdG9tIFwiQWRkIHRvIE1hcFwiIGRhdGEgYWN0aW9uIHRoYXQgdXNlcyBRdWVyeVNpbXBsZSdzIHNlbGVjdGlvbiBwcm9jZXNzLlxuICogXG4gKiBUaGlzIGFjdGlvbiByZXBsYWNlcyB0aGUgZnJhbWV3b3JrJ3MgXCJTaG93IG9uIE1hcFwiIGFjdGlvbiBhbmQgZW5zdXJlcyBjb25zaXN0ZW50XG4gKiBiZWhhdmlvciB3aXRoIFF1ZXJ5U2ltcGxlJ3MgcXVlcnkgcmVzdWx0cyBieSB1c2luZyB0aGUgc2FtZSBzZWxlY3Rpb24gbWVjaGFuaXNtLlxuICogXG4gKiBAcGFyYW0gd2lkZ2V0SWQgLSBUaGUgd2lkZ2V0IElEIHRoYXQgcHJvdmlkZXMgdGhpcyBhY3Rpb25cbiAqIEBwYXJhbSBvdXRwdXREUyAtIFRoZSBvdXRwdXQgZGF0YSBzb3VyY2UgKHVzZWQgZm9yIHNlbGVjdGlvbiBvbiB0aGUgb3JpZ2luIGxheWVyKVxuICogQHBhcmFtIGludGwgLSBUaGUgSW50bCBvYmplY3QgZm9yIGludGVybmF0aW9uYWxpemF0aW9uXG4gKiBAcGFyYW0gcXVlcnlJdGVtIC0gT3B0aW9uYWwgcXVlcnkgaXRlbSBjb25maWd1cmF0aW9uIChmb3Igem9vbVRvU2VsZWN0ZWQgc2V0dGluZylcbiAqIEBwYXJhbSBydW50aW1lWm9vbVRvU2VsZWN0ZWQgLSBPcHRpb25hbCBydW50aW1lIHpvb20gb3ZlcnJpZGUgZnJvbSB0aGUgcXVlcnkgZm9ybVxuICogQHJldHVybnMgQSBEYXRhQWN0aW9uIG9iamVjdCB0aGF0IGNhbiBiZSB1c2VkIGJ5IERhdGFBY3Rpb25MaXN0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVBZGRUb01hcEFjdGlvbihcbiAgd2lkZ2V0SWQ6IHN0cmluZyxcbiAgb3V0cHV0RFM6IERhdGFTb3VyY2UsXG4gIGludGw6IEludGxTaGFwZSxcbiAgcXVlcnlJdGVtPzogUXVlcnlJdGVtVHlwZSxcbiAgcnVudGltZVpvb21Ub1NlbGVjdGVkPzogYm9vbGVhblxuKTogRGF0YUFjdGlvbiB7XG4gIHJldHVybiB7XG4gICAgaWQ6IGAke3dpZGdldElkfS1hZGRUb01hcGAsXG4gICAgbmFtZTogJ2FkZFRvTWFwJyxcbiAgICBsYWJlbDogaW50bC5mb3JtYXRNZXNzYWdlKHsgaWQ6ICdhZGRUb01hcCcsIGRlZmF1bHRNZXNzYWdlOiAnQWRkIHRvIG1hcCcgfSksXG4gICAgLy8gSWNvbiBtYXRjaGVzIHRoZSBmcmFtZXdvcmsncyBcIlNob3cgb24gTWFwXCIgYWN0aW9uIGZvciBjb25zaXN0ZW5jeVxuICAgIGljb246IHJlcXVpcmUoJy4uL3J1bnRpbWUvYXNzZXRzL2ljb25zL3Nob3ctb24tbWFwLnN2ZycpLmRlZmF1bHQgfHwgcmVxdWlyZSgnLi4vcnVudGltZS9hc3NldHMvaWNvbnMvc2hvdy1vbi1tYXAuc3ZnJyksXG4gICAgLy8gTm90ZTogSW5kZXggbWF5IG5vdCBjb250cm9sIHBvc2l0aW9uIGlmIGV4dHJhQWN0aW9ucyBhcmUgYWx3YXlzIGFwcGVuZGVkIGFmdGVyIGZyYW1ld29yayBhY3Rpb25zXG4gICAgaW5kZXg6IC0xMDAsXG4gICAgd2lkZ2V0SWQsXG4gICAgaW50bCxcbiAgICBzdXBwb3J0UHJvdmlkZXJXaWRnZXQ6IHRydWUsXG4gICAgXG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lcyBpZiB0aGlzIGFjdGlvbiBjYW4gcHJvY2VzcyB0aGUgZ2l2ZW4gZGF0YSBzZXRzLlxuICAgICAqIFN1cHBvcnRzIFJlY29yZHMgbGV2ZWwgYWN0aW9ucyB3aXRoIGZlYXR1cmUgZGF0YSByZWNvcmRzLlxuICAgICAqL1xuICAgIGlzU3VwcG9ydGVkOiBhc3luYyAoZGF0YVNldHM6IERhdGFSZWNvcmRTZXRbXSwgZGF0YUxldmVsOiBEYXRhTGV2ZWwsIGFjdGlvbldpZGdldElkOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+ID0+IHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnREFUQS1BQ1RJT04nLCB7XG4gICAgICAgIGFjdGlvbjogJ2FkZFRvTWFwLWlzU3VwcG9ydGVkJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIGFjdGlvbldpZGdldElkLFxuICAgICAgICBkYXRhTGV2ZWwsXG4gICAgICAgIGRhdGFTZXRzQ291bnQ6IGRhdGFTZXRzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgaGFzT3V0cHV0RFM6ICEhb3V0cHV0RFNcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIC8vIE9ubHkgc3VwcG9ydCBSZWNvcmRzIGxldmVsIGFjdGlvbnNcbiAgICAgIGlmIChkYXRhTGV2ZWwgIT09IERhdGFMZXZlbC5SZWNvcmRzKSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnREFUQS1BQ1RJT04nLCB7XG4gICAgICAgICAgYWN0aW9uOiAnYWRkVG9NYXAtaXNTdXBwb3J0ZWQnLFxuICAgICAgICAgIHJlc3VsdDogZmFsc2UsXG4gICAgICAgICAgcmVhc29uOiAnTm90IFJlY29yZHMgbGV2ZWwnXG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBOZWVkIGF0IGxlYXN0IG9uZSBkYXRhIHNldCB3aXRoIHJlY29yZHNcbiAgICAgIGlmICghZGF0YVNldHMgfHwgZGF0YVNldHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnREFUQS1BQ1RJT04nLCB7XG4gICAgICAgICAgYWN0aW9uOiAnYWRkVG9NYXAtaXNTdXBwb3J0ZWQnLFxuICAgICAgICAgIHJlc3VsdDogZmFsc2UsXG4gICAgICAgICAgcmVhc29uOiAnTm8gZGF0YSBzZXRzJ1xuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgaWYgd2UgaGF2ZSByZWNvcmRzIGFuZCBvdXRwdXQgZGF0YSBzb3VyY2VcbiAgICAgIGNvbnN0IGhhc1JlY29yZHMgPSBkYXRhU2V0cy5zb21lKGRzID0+IGRzLnJlY29yZHMgJiYgZHMucmVjb3Jkcy5sZW5ndGggPiAwKVxuICAgICAgY29uc3Qgc3VwcG9ydGVkID0gaGFzUmVjb3JkcyAmJiAhIW91dHB1dERTXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnREFUQS1BQ1RJT04nLCB7XG4gICAgICAgIGFjdGlvbjogJ2FkZFRvTWFwLWlzU3VwcG9ydGVkJyxcbiAgICAgICAgcmVzdWx0OiBzdXBwb3J0ZWQsXG4gICAgICAgIGhhc1JlY29yZHMsXG4gICAgICAgIHJlY29yZHNDb3VudDogZGF0YVNldHMucmVkdWNlKChzdW0sIGRzKSA9PiBzdW0gKyAoZHMucmVjb3Jkcz8ubGVuZ3RoIHx8IDApLCAwKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgcmV0dXJuIHN1cHBvcnRlZFxuICAgIH0sXG4gICAgXG4gICAgLyoqXG4gICAgICogRXhlY3V0ZXMgdGhlIGFjdGlvbiBieSBzZWxlY3RpbmcgcmVjb3JkcyB1c2luZyBRdWVyeVNpbXBsZSdzIHNlbGVjdGlvbiBwcm9jZXNzLlxuICAgICAqL1xuICAgIG9uRXhlY3V0ZTogYXN5bmMgKGRhdGFTZXRzOiBEYXRhUmVjb3JkU2V0W10sIGRhdGFMZXZlbDogRGF0YUxldmVsLCBhY3Rpb25XaWRnZXRJZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiA9PiB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0RBVEEtQUNUSU9OJywge1xuICAgICAgICBhY3Rpb246ICdhZGRUb01hcC1vbkV4ZWN1dGUnLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgYWN0aW9uV2lkZ2V0SWQsXG4gICAgICAgIGRhdGFMZXZlbCxcbiAgICAgICAgZGF0YVNldHNDb3VudDogZGF0YVNldHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICBoYXNPdXRwdXREUzogISFvdXRwdXREU1xuICAgICAgfSlcbiAgICAgIFxuICAgICAgaWYgKCFvdXRwdXREUyB8fCBkYXRhTGV2ZWwgIT09IERhdGFMZXZlbC5SZWNvcmRzKSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnREFUQS1BQ1RJT04nLCB7XG4gICAgICAgICAgYWN0aW9uOiAnYWRkVG9NYXAtb25FeGVjdXRlJyxcbiAgICAgICAgICByZXN1bHQ6IGZhbHNlLFxuICAgICAgICAgIHJlYXNvbjogIW91dHB1dERTID8gJ05vIG91dHB1dERTJyA6ICdOb3QgUmVjb3JkcyBsZXZlbCdcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIENvbGxlY3QgYWxsIHJlY29yZHMgZnJvbSBhbGwgZGF0YSBzZXRzXG4gICAgICBjb25zdCBhbGxSZWNvcmRzOiBGZWF0dXJlRGF0YVJlY29yZFtdID0gW11cbiAgICAgIGRhdGFTZXRzLmZvckVhY2goZGF0YVNldCA9PiB7XG4gICAgICAgIGlmIChkYXRhU2V0LnJlY29yZHMgJiYgZGF0YVNldC5yZWNvcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAvLyBGaWx0ZXIgdG8gb25seSBGZWF0dXJlRGF0YVJlY29yZCB0eXBlc1xuICAgICAgICAgIGNvbnN0IGZlYXR1cmVSZWNvcmRzID0gZGF0YVNldC5yZWNvcmRzLmZpbHRlcihcbiAgICAgICAgICAgIChyZWNvcmQpOiByZWNvcmQgaXMgRmVhdHVyZURhdGFSZWNvcmQgPT4ge1xuICAgICAgICAgICAgICByZXR1cm4gcmVjb3JkICYmIHR5cGVvZiAocmVjb3JkIGFzIEZlYXR1cmVEYXRhUmVjb3JkKS5nZXRHZW9tZXRyeSA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICAgICAgfVxuICAgICAgICAgIClcbiAgICAgICAgICBhbGxSZWNvcmRzLnB1c2goLi4uZmVhdHVyZVJlY29yZHMpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGlmIChhbGxSZWNvcmRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0RBVEEtQUNUSU9OJywge1xuICAgICAgICAgIGFjdGlvbjogJ2FkZFRvTWFwLW9uRXhlY3V0ZScsXG4gICAgICAgICAgcmVzdWx0OiBmYWxzZSxcbiAgICAgICAgICByZWFzb246ICdObyBmZWF0dXJlIHJlY29yZHMgZm91bmQnXG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBHZXQgcmVjb3JkIElEc1xuICAgICAgY29uc3QgcmVjb3JkSWRzID0gYWxsUmVjb3Jkcy5tYXAocmVjb3JkID0+IHJlY29yZC5nZXRJZCgpKVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0RBVEEtQUNUSU9OJywge1xuICAgICAgICBhY3Rpb246ICdhZGRUb01hcC1vbkV4ZWN1dGUnLFxuICAgICAgICByZWNvcmRzQ291bnQ6IGFsbFJlY29yZHMubGVuZ3RoLFxuICAgICAgICByZWNvcmRJZHM6IHJlY29yZElkcy5zbGljZSgwLCAxMCksIC8vIExvZyBmaXJzdCAxMCBJRHNcbiAgICAgICAgb3V0cHV0RFNJZDogb3V0cHV0RFMuaWRcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIC8vIFVzZSBRdWVyeVNpbXBsZSdzIHNlbGVjdGlvbiBwcm9jZXNzIC0gc2VsZWN0cyBvbiBvcmlnaW4gbGF5ZXIgYW5kIHB1Ymxpc2hlcyBzZWxlY3Rpb24gbWVzc2FnZXNcbiAgICAgIC8vIFRoaXMgZW5zdXJlcyBjb25zaXN0ZW50IGJlaGF2aW9yIHdpdGggcXVlcnkgcmVzdWx0cyBhbmQgcHJvcGVyIGludGVncmF0aW9uIHdpdGggXCJDbGVhciByZXN1bHRzXCJcbiAgICAgIHRyeSB7XG4gICAgICAgIHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoKHdpZGdldElkLCBvdXRwdXREUywgcmVjb3JkSWRzLCBhbGxSZWNvcmRzLCB0cnVlKVxuICAgICAgICBcbiAgICAgICAgLy8gTm90ZTogWm9vbSBpcyBub3cgaGFuZGxlZCBieSB0aGUgc2VwYXJhdGUgXCJab29tIFRvXCIgYWN0aW9uIGluIHRoZSBEYXRhQWN0aW9uTGlzdFxuICAgICAgICAvLyBVc2VycyBjYW4gY2xpY2sgXCJab29tIFRvXCIgZnJvbSB0aGUgYWN0aW9uIG1lbnUgaWYgdGhleSB3YW50IHRvIHpvb20gdG8gc2VsZWN0ZWQgcmVjb3Jkc1xuICAgICAgICBcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdEQVRBLUFDVElPTicsIHtcbiAgICAgICAgICBhY3Rpb246ICdhZGRUb01hcC1vbkV4ZWN1dGUnLFxuICAgICAgICAgIHJlc3VsdDogdHJ1ZSxcbiAgICAgICAgICBtZXNzYWdlOiAnU3VjY2Vzc2Z1bGx5IHNlbGVjdGVkIHJlY29yZHMgYW5kIHB1Ymxpc2hlZCBzZWxlY3Rpb24gbWVzc2FnZSdcbiAgICAgICAgfSlcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0RBVEEtQUNUSU9OJywge1xuICAgICAgICAgIGFjdGlvbjogJ2FkZFRvTWFwLW9uRXhlY3V0ZScsXG4gICAgICAgICAgcmVzdWx0OiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpLFxuICAgICAgICAgIGVycm9yU3RhY2s6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZFxuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICB9LFxuICAgIFxuICAgIC8qKlxuICAgICAqIENsZWFudXAgbWV0aG9kIChyZXF1aXJlZCBieSBEYXRhQWN0aW9uIGludGVyZmFjZSlcbiAgICAgKi9cbiAgICBkZXN0cm95OiAoKTogdm9pZCA9PiB7XG4gICAgICAvLyBObyBjbGVhbnVwIG5lZWRlZFxuICAgIH1cbiAgfVxufVxuXG4iLCJpbXBvcnQgeyB0eXBlIERhdGFSZWNvcmRTZXQsIHR5cGUgRGF0YUFjdGlvbiwgRGF0YUxldmVsLCB0eXBlIERhdGFTb3VyY2UsIHR5cGUgSW50bFNoYXBlIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgY3JlYXRlQWRkVG9NYXBBY3Rpb24gfSBmcm9tICcuL2FkZC10by1tYXAtYWN0aW9uJ1xuaW1wb3J0IHsgY3JlYXRlWm9vbVRvQWN0aW9uIH0gZnJvbSAnLi96b29tLXRvLWFjdGlvbidcbmltcG9ydCB0eXBlIHsgUXVlcnlJdGVtVHlwZSB9IGZyb20gJy4uL2NvbmZpZydcblxuLyoqXG4gKiBRdWVyeVNpbXBsZSBDdXN0b20gRGF0YSBBY3Rpb25zXG4gKiBcbiAqIFJldHVybnMgY3VzdG9tIGRhdGEgYWN0aW9ucyBmb3IgdGhlIHdpZGdldC5cbiAqIEluY2x1ZGVzIGN1c3RvbSBcIlpvb20gVG9cIiBhbmQgXCJBZGQgdG8gTWFwXCIgYWN0aW9ucyB0aGF0IHVzZSBRdWVyeVNpbXBsZSdzIHByb2Nlc3Nlcy5cbiAqIFxuICogQHBhcmFtIHdpZGdldElkIC0gVGhlIHdpZGdldCBJRFxuICogQHBhcmFtIG91dHB1dERTIC0gVGhlIG91dHB1dCBkYXRhIHNvdXJjZSAobnVsbC91bmRlZmluZWQgaWYgbm90IGF2YWlsYWJsZSlcbiAqIEBwYXJhbSBtYXBWaWV3IC0gVGhlIG1hcCB2aWV3IChudWxsL3VuZGVmaW5lZCBpZiBub3QgYXZhaWxhYmxlKVxuICogQHBhcmFtIGludGwgLSBUaGUgSW50bCBvYmplY3QgZm9yIGludGVybmF0aW9uYWxpemF0aW9uXG4gKiBAcGFyYW0gcXVlcnlJdGVtIC0gT3B0aW9uYWwgcXVlcnkgaXRlbSBjb25maWd1cmF0aW9uXG4gKiBAcGFyYW0gcnVudGltZVpvb21Ub1NlbGVjdGVkIC0gT3B0aW9uYWwgcnVudGltZSB6b29tIG92ZXJyaWRlIGZyb20gdGhlIHF1ZXJ5IGZvcm1cbiAqIEByZXR1cm5zIEFycmF5IG9mIGN1c3RvbSBEYXRhQWN0aW9uIG9iamVjdHMgKGVtcHR5IGlmIGNvbmRpdGlvbnMgbm90IG1ldClcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEV4dHJhQWN0aW9ucyhcbiAgd2lkZ2V0SWQ6IHN0cmluZyxcbiAgb3V0cHV0RFM6IERhdGFTb3VyY2UgfCBudWxsIHwgdW5kZWZpbmVkLFxuICBtYXBWaWV3OiBfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXcgfCB1bmRlZmluZWQsXG4gIGludGw6IEludGxTaGFwZSxcbiAgcXVlcnlJdGVtPzogUXVlcnlJdGVtVHlwZSxcbiAgcnVudGltZVpvb21Ub1NlbGVjdGVkPzogYm9vbGVhblxuKTogRGF0YUFjdGlvbltdIHtcbiAgY29uc3QgYWN0aW9uczogRGF0YUFjdGlvbltdID0gW11cbiAgXG4gIC8vIEFkZCBcIlpvb20gVG9cIiBhY3Rpb24gaWYgd2UgaGF2ZSBtYXBWaWV3IGFuZCBpbnRsXG4gIGlmIChtYXBWaWV3ICYmIGludGwpIHtcbiAgICBhY3Rpb25zLnB1c2goY3JlYXRlWm9vbVRvQWN0aW9uKHdpZGdldElkLCBtYXBWaWV3LCBpbnRsKSlcbiAgfVxuICBcbiAgLy8gQWRkIFwiQWRkIHRvIE1hcFwiIGFjdGlvbiBpZiB3ZSBoYXZlIG91dHB1dERTIGFuZCBpbnRsXG4gIGlmIChvdXRwdXREUyAmJiBpbnRsKSB7XG4gICAgYWN0aW9ucy5wdXNoKGNyZWF0ZUFkZFRvTWFwQWN0aW9uKHdpZGdldElkLCBvdXRwdXREUywgaW50bCwgcXVlcnlJdGVtLCBydW50aW1lWm9vbVRvU2VsZWN0ZWQpKVxuICB9XG4gIFxuICByZXR1cm4gYWN0aW9uc1xufVxuXG4iLCIvKipcbiAqIEN1c3RvbSBcIlpvb20gVG9cIiBkYXRhIGFjdGlvbiBmb3IgUXVlcnlTaW1wbGUgd2lkZ2V0LlxuICogXG4gKiBUaGlzIGFjdGlvbiByZXBsYWNlcyB0aGUgZnJhbWV3b3JrJ3MgXCJab29tIFRvXCIgYWN0aW9uIHdpdGggYSBjdXN0b21cbiAqIGltcGxlbWVudGF0aW9uIHRoYXQgdXNlcyBRdWVyeVNpbXBsZSdzIHpvb20gbG9naWMgKG1hcFZpZXcuZ29UbyB3aXRoIHBhZGRpbmcpLlxuICogVGhpcyBlbnN1cmVzIGNvbnNpc3RlbnQgem9vbSBiZWhhdmlvciB3aXRoIHByb3BlciBwYWRkaW5nLlxuICovXG5cbmltcG9ydCB7IHR5cGUgRGF0YVJlY29yZFNldCwgdHlwZSBEYXRhQWN0aW9uLCBEYXRhTGV2ZWwsIHR5cGUgSW50bFNoYXBlIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlciB9IGZyb20gJ3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uJ1xuaW1wb3J0IHsgem9vbVRvUmVjb3JkcyB9IGZyb20gJy4uL3J1bnRpbWUvem9vbS11dGlscydcbmltcG9ydCB0eXBlIHsgRmVhdHVyZURhdGFSZWNvcmQgfSBmcm9tICdqaW11LWNvcmUnXG5cbmNvbnN0IGRlYnVnTG9nZ2VyID0gY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlcigpXG5cbi8qKlxuICogQ3JlYXRlcyBhIGN1c3RvbSBcIlpvb20gVG9cIiBkYXRhIGFjdGlvbiB0aGF0IHVzZXMgUXVlcnlTaW1wbGUncyB6b29tIGxvZ2ljLlxuICogXG4gKiBUaGlzIGFjdGlvbiByZXBsYWNlcyB0aGUgZnJhbWV3b3JrJ3MgXCJab29tIFRvXCIgYWN0aW9uIGFuZCBlbnN1cmVzIGNvbnNpc3RlbnRcbiAqIHpvb20gYmVoYXZpb3Igd2l0aCBwYWRkaW5nIHVzaW5nIG1hcFZpZXcuZ29UbygpLlxuICogXG4gKiBAcGFyYW0gd2lkZ2V0SWQgLSBUaGUgd2lkZ2V0IElEIHRoYXQgcHJvdmlkZXMgdGhpcyBhY3Rpb25cbiAqIEBwYXJhbSBtYXBWaWV3IC0gVGhlIG1hcCB2aWV3IHRvIHpvb20gKE1hcFZpZXcgb3IgU2NlbmVWaWV3KVxuICogQHBhcmFtIGludGwgLSBUaGUgSW50bCBvYmplY3QgZm9yIGludGVybmF0aW9uYWxpemF0aW9uXG4gKiBAcmV0dXJucyBBIERhdGFBY3Rpb24gb2JqZWN0IHRoYXQgY2FuIGJlIHVzZWQgYnkgRGF0YUFjdGlvbkxpc3RcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVpvb21Ub0FjdGlvbihcbiAgd2lkZ2V0SWQ6IHN0cmluZyxcbiAgbWFwVmlldzogX19lc3JpLk1hcFZpZXcgfCBfX2VzcmkuU2NlbmVWaWV3IHwgdW5kZWZpbmVkLFxuICBpbnRsOiBJbnRsU2hhcGVcbik6IERhdGFBY3Rpb24ge1xuICByZXR1cm4ge1xuICAgIGlkOiBgJHt3aWRnZXRJZH0tem9vbVRvYCxcbiAgICBuYW1lOiAncXVlcnlTaW1wbGVab29tVG8nLCAvLyBVc2UgdW5pcXVlIG5hbWUgdG8gYXZvaWQgY29uZmxpY3Qgd2l0aCBmcmFtZXdvcmsgYWN0aW9uXG4gICAgbGFiZWw6IGludGwuZm9ybWF0TWVzc2FnZSh7IGlkOiAnem9vbVRvU2VsZWN0ZWQnLCBkZWZhdWx0TWVzc2FnZTogJ1pvb20gdG8gc2VsZWN0ZWQnIH0pLFxuICAgIC8vIFVzZSB0aGUgc2FtZSBpY29uIGFzIHRoZSBmcmFtZXdvcmsncyB6b29tIGFjdGlvbiAoZnJvbSBFeEIgY29uZmlndXJhdGlvbiBwYWdlKVxuICAgIGljb246IHJlcXVpcmUoJy4uL3J1bnRpbWUvYXNzZXRzL2ljb25zL3pvb20tdG8uc3ZnJykuZGVmYXVsdCB8fCByZXF1aXJlKCcuLi9ydW50aW1lL2Fzc2V0cy9pY29ucy96b29tLXRvLnN2ZycpLFxuICAgIGluZGV4OiAtOTAsIC8vIFBvc2l0aW9uIGJlZm9yZSBBZGQgdG8gTWFwICgtMTAwKVxuICAgIHdpZGdldElkLFxuICAgIGludGwsXG4gICAgc3VwcG9ydFByb3ZpZGVyV2lkZ2V0OiB0cnVlLFxuICAgIFxuICAgIC8qKlxuICAgICAqIERldGVybWluZXMgaWYgdGhpcyBhY3Rpb24gY2FuIHByb2Nlc3MgdGhlIGdpdmVuIGRhdGEgc2V0cy5cbiAgICAgKiBTdXBwb3J0cyBSZWNvcmRzIGxldmVsIGFjdGlvbnMgd2l0aCBmZWF0dXJlIGRhdGEgcmVjb3Jkcy5cbiAgICAgKi9cbiAgICBpc1N1cHBvcnRlZDogYXN5bmMgKGRhdGFTZXRzOiBEYXRhUmVjb3JkU2V0W10sIGRhdGFMZXZlbDogRGF0YUxldmVsLCBhY3Rpb25XaWRnZXRJZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiA9PiB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0RBVEEtQUNUSU9OJywge1xuICAgICAgICBhY3Rpb246ICd6b29tVG8taXNTdXBwb3J0ZWQnLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgYWN0aW9uV2lkZ2V0SWQsXG4gICAgICAgIGRhdGFMZXZlbCxcbiAgICAgICAgZGF0YVNldHNDb3VudDogZGF0YVNldHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICBoYXNNYXBWaWV3OiAhIW1hcFZpZXdcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIC8vIE9ubHkgc3VwcG9ydCBSZWNvcmRzIGxldmVsIGFjdGlvbnNcbiAgICAgIGlmIChkYXRhTGV2ZWwgIT09IERhdGFMZXZlbC5SZWNvcmRzKSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnREFUQS1BQ1RJT04nLCB7XG4gICAgICAgICAgYWN0aW9uOiAnem9vbVRvLWlzU3VwcG9ydGVkJyxcbiAgICAgICAgICByZXN1bHQ6IGZhbHNlLFxuICAgICAgICAgIHJlYXNvbjogJ05vdCBSZWNvcmRzIGxldmVsJ1xuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gTmVlZCBhdCBsZWFzdCBvbmUgZGF0YSBzZXQgd2l0aCByZWNvcmRzIGFuZCBhIG1hcCB2aWV3XG4gICAgICBpZiAoIWRhdGFTZXRzIHx8IGRhdGFTZXRzLmxlbmd0aCA9PT0gMCB8fCAhbWFwVmlldykge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0RBVEEtQUNUSU9OJywge1xuICAgICAgICAgIGFjdGlvbjogJ3pvb21Uby1pc1N1cHBvcnRlZCcsXG4gICAgICAgICAgcmVzdWx0OiBmYWxzZSxcbiAgICAgICAgICByZWFzb246ICFkYXRhU2V0cyB8fCBkYXRhU2V0cy5sZW5ndGggPT09IDAgPyAnTm8gZGF0YSBzZXRzJyA6ICdObyBtYXBWaWV3J1xuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgaWYgd2UgaGF2ZSByZWNvcmRzXG4gICAgICBjb25zdCBoYXNSZWNvcmRzID0gZGF0YVNldHMuc29tZShkcyA9PiBkcy5yZWNvcmRzICYmIGRzLnJlY29yZHMubGVuZ3RoID4gMClcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdEQVRBLUFDVElPTicsIHtcbiAgICAgICAgYWN0aW9uOiAnem9vbVRvLWlzU3VwcG9ydGVkJyxcbiAgICAgICAgcmVzdWx0OiBoYXNSZWNvcmRzLFxuICAgICAgICByZWNvcmRzQ291bnQ6IGRhdGFTZXRzLnJlZHVjZSgoc3VtLCBkcykgPT4gc3VtICsgKGRzLnJlY29yZHM/Lmxlbmd0aCB8fCAwKSwgMClcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIHJldHVybiBoYXNSZWNvcmRzXG4gICAgfSxcbiAgICBcbiAgICAvKipcbiAgICAgKiBFeGVjdXRlcyB0aGUgYWN0aW9uIGJ5IHpvb21pbmcgdG8gcmVjb3JkcyB1c2luZyB0aGUgc2hhcmVkIHpvb20gdXRpbGl0eS5cbiAgICAgKi9cbiAgICBvbkV4ZWN1dGU6IGFzeW5jIChkYXRhU2V0czogRGF0YVJlY29yZFNldFtdLCBkYXRhTGV2ZWw6IERhdGFMZXZlbCwgYWN0aW9uV2lkZ2V0SWQ6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4gPT4ge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdEQVRBLUFDVElPTicsIHtcbiAgICAgICAgYWN0aW9uOiAnem9vbVRvLW9uRXhlY3V0ZScsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICBhY3Rpb25XaWRnZXRJZCxcbiAgICAgICAgZGF0YUxldmVsLFxuICAgICAgICBkYXRhU2V0c0NvdW50OiBkYXRhU2V0cz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgIGhhc01hcFZpZXc6ICEhbWFwVmlld1xuICAgICAgfSlcbiAgICAgIFxuICAgICAgaWYgKCFtYXBWaWV3IHx8IGRhdGFMZXZlbCAhPT0gRGF0YUxldmVsLlJlY29yZHMpIHtcbiAgICAgICAgLy8gQlVHLUdSQVBISUNTLTAwMTogWm9vbSBvcGVyYXRpb25zIGZhaWwgd2hlbiBncmFwaGljcyBsYXllciBpcyBkaXNhYmxlZFxuICAgICAgICBpZiAoIW1hcFZpZXcpIHtcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0JVRycsIHtcbiAgICAgICAgICAgIGJ1Z0lkOiAnQlVHLUdSQVBISUNTLTAwMScsXG4gICAgICAgICAgICBjYXRlZ29yeTogJ0dSQVBISUNTJyxcbiAgICAgICAgICAgIGV2ZW50OiAnem9vbS1vcGVyYXRpb24tZmFpbGVkLWdyYXBoaWNzLWxheWVyLWRpc2FibGVkJyxcbiAgICAgICAgICAgIHdpZGdldElkLFxuICAgICAgICAgICAgb3BlcmF0aW9uOiAnem9vbS10by1zZWxlY3RlZC1hY3Rpb24nLFxuICAgICAgICAgICAgZGF0YVNldHNDb3VudDogZGF0YVNldHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246ICdab29tIHRvIHNlbGVjdGVkIGFjdGlvbiBhdHRlbXB0ZWQgYnV0IG1hcFZpZXcgaXMgdW5hdmFpbGFibGUgKGxpa2VseSBiZWNhdXNlIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQgaXMgZGlzYWJsZWQpJyxcbiAgICAgICAgICAgIHdvcmthcm91bmQ6ICdFbmFibGUgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCBpbiB3aWRnZXQgc2V0dGluZ3MnLFxuICAgICAgICAgICAgdGFyZ2V0UmVzb2x1dGlvbjogJ3IwMTkuMCdcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0RBVEEtQUNUSU9OJywge1xuICAgICAgICAgIGFjdGlvbjogJ3pvb21Uby1vbkV4ZWN1dGUnLFxuICAgICAgICAgIHJlc3VsdDogZmFsc2UsXG4gICAgICAgICAgcmVhc29uOiAhbWFwVmlldyA/ICdObyBtYXBWaWV3JyA6ICdOb3QgUmVjb3JkcyBsZXZlbCdcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIENvbGxlY3QgYWxsIHJlY29yZHMgZnJvbSBhbGwgZGF0YSBzZXRzXG4gICAgICBjb25zdCBhbGxSZWNvcmRzOiBGZWF0dXJlRGF0YVJlY29yZFtdID0gW11cbiAgICAgIGRhdGFTZXRzLmZvckVhY2goZGF0YVNldCA9PiB7XG4gICAgICAgIGlmIChkYXRhU2V0LnJlY29yZHMgJiYgZGF0YVNldC5yZWNvcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAvLyBGaWx0ZXIgdG8gb25seSBGZWF0dXJlRGF0YVJlY29yZCB0eXBlc1xuICAgICAgICAgIGNvbnN0IGZlYXR1cmVSZWNvcmRzID0gZGF0YVNldC5yZWNvcmRzLmZpbHRlcihcbiAgICAgICAgICAgIChyZWNvcmQpOiByZWNvcmQgaXMgRmVhdHVyZURhdGFSZWNvcmQgPT4ge1xuICAgICAgICAgICAgICByZXR1cm4gcmVjb3JkICYmIHR5cGVvZiAocmVjb3JkIGFzIEZlYXR1cmVEYXRhUmVjb3JkKS5nZXRHZW9tZXRyeSA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICAgICAgfVxuICAgICAgICAgIClcbiAgICAgICAgICBhbGxSZWNvcmRzLnB1c2goLi4uZmVhdHVyZVJlY29yZHMpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGlmIChhbGxSZWNvcmRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0RBVEEtQUNUSU9OJywge1xuICAgICAgICAgIGFjdGlvbjogJ3pvb21Uby1vbkV4ZWN1dGUnLFxuICAgICAgICAgIHJlc3VsdDogZmFsc2UsXG4gICAgICAgICAgcmVhc29uOiAnTm8gZmVhdHVyZSByZWNvcmRzIGZvdW5kJ1xuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICAgIFxuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gVXNlIHRoZSBzaGFyZWQgem9vbSB1dGlsaXR5IGZ1bmN0aW9uXG4gICAgICAgIGF3YWl0IHpvb21Ub1JlY29yZHMobWFwVmlldywgYWxsUmVjb3JkcylcbiAgICAgICAgXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnREFUQS1BQ1RJT04nLCB7XG4gICAgICAgICAgYWN0aW9uOiAnem9vbVRvLW9uRXhlY3V0ZScsXG4gICAgICAgICAgcmVzdWx0OiB0cnVlLFxuICAgICAgICAgIG1lc3NhZ2U6ICdTdWNjZXNzZnVsbHkgem9vbWVkIHRvIGZlYXR1cmVzJyxcbiAgICAgICAgICByZWNvcmRzQ291bnQ6IGFsbFJlY29yZHMubGVuZ3RoXG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdEQVRBLUFDVElPTicsIHtcbiAgICAgICAgICBhY3Rpb246ICd6b29tVG8tb25FeGVjdXRlJyxcbiAgICAgICAgICByZXN1bHQ6IGZhbHNlLFxuICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvciksXG4gICAgICAgICAgZXJyb3JTdGFjazogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnN0YWNrIDogdW5kZWZpbmVkXG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgIH0sXG4gICAgXG4gICAgLyoqXG4gICAgICogQ2xlYW51cCBtZXRob2QgKHJlcXVpcmVkIGJ5IERhdGFBY3Rpb24gaW50ZXJmYWNlKVxuICAgICAqL1xuICAgIGRlc3Ryb3k6ICgpOiB2b2lkID0+IHtcbiAgICAgIC8vIE5vIGNsZWFudXAgbmVlZGVkXG4gICAgfVxuICB9XG59XG5cbiIsImltcG9ydCB7XG4gIHR5cGUgUXVlcnlJdGVtVHlwZSxcbiAgQ3JlYXRlVG9vbFR5cGUsXG4gIFVuaXRUeXBlLFxuICBTcGF0aWFsUmVsYXRpb24sXG4gIExpc3REaXJlY3Rpb24sXG4gIFBhZ2luZ1R5cGUsXG4gIEZpZWxkc1R5cGUsXG4gIFN5bWJvbFR5cGVcbn0gZnJvbSAnLi9jb25maWcnXG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX1FVRVJZX0lURU06IFBhcnRpYWw8UXVlcnlJdGVtVHlwZT4gPSB7XG4gIGljb246IG51bGwsXG4gIGRpc3BsYXlMYWJlbDogdHJ1ZSxcbiAgc3FsRXhwck9iajogbnVsbCxcbiAgdXNlQXR0cmlidXRlRmlsdGVyOiB0cnVlLFxuICB1c2VTcGF0aWFsRmlsdGVyOiB0cnVlLFxuICBzcGF0aWFsTWFwV2lkZ2V0SWRzOiBbXSxcbiAgc3BhdGlhbEZpbHRlclR5cGVzOiBbXSxcbiAgc3BhdGlhbEludGVyYWN0aXZlQ3JlYXRlVG9vbFR5cGVzOiBbXG4gICAgQ3JlYXRlVG9vbFR5cGUuUG9pbnQsXG4gICAgQ3JlYXRlVG9vbFR5cGUuUG9seWxpbmUsXG4gICAgQ3JlYXRlVG9vbFR5cGUuUG9seWdvbixcbiAgICBDcmVhdGVUb29sVHlwZS5SZWN0YW5nbGUsXG4gICAgQ3JlYXRlVG9vbFR5cGUuQ2lyY2xlXG4gIF0sXG4gIHNwYXRpYWxJbnRlcmFjdGl2ZUVuYWJsZUJ1ZmZlcjogZmFsc2UsXG4gIHNwYXRpYWxJbnRlcmFjdGl2ZUJ1ZmZlckRpc3RhbmNlOiAwLFxuICBzcGF0aWFsSW50ZXJhY3RpdmVCdWZmZXJVbml0OiBVbml0VHlwZS5NZXRlcnMsXG4gIHNwYXRpYWxSZWxhdGlvbnM6IFtTcGF0aWFsUmVsYXRpb24uSW50ZXJzZWN0XSxcbiAgc3BhdGlhbFJlbGF0aW9uVXNlRGF0YVNvdXJjZXM6IFtdLFxuICBzcGF0aWFsUmVsYXRpb25FbmFibGVTZWxlY3RUb29sOiBmYWxzZSxcbiAgc3BhdGlhbFJlbGF0aW9uRW5hYmxlQnVmZmVyOiBmYWxzZSxcbiAgc3BhdGlhbFJlbGF0aW9uQnVmZmVyRGlzdGFuY2U6IDAsXG4gIHNwYXRpYWxSZWxhdGlvbkJ1ZmZlclVuaXQ6IFVuaXRUeXBlLk1ldGVycyxcbiAgcmVzdWx0TGlzdERpcmVjdGlvbjogTGlzdERpcmVjdGlvbi5WZXJ0aWNhbCxcbiAgcmVzdWx0UGFnaW5nU3R5bGU6IFBhZ2luZ1R5cGUuTXVsdGlQYWdlLFxuICByZXN1bHRGaWVsZHNUeXBlOiBGaWVsZHNUeXBlLlBvcHVwU2V0dGluZyxcbiAgcmVzdWx0U3ltYm9sVHlwZTogU3ltYm9sVHlwZS5EZWZhdWx0U3ltYm9sLFxuICByZXN1bHRDdXN0b21TeW1ib2w6IHtcbiAgICBhbmdsZTogMCxcbiAgICBjb2xvcjogWzI1NSwgMjU1LCAyNTUsIDI1NV0sXG4gICAgb3V0bGluZToge1xuICAgICAgY29sb3I6IFsyNTUsIDI1NSwgMjU1LCAyNTVdLFxuICAgICAgc3R5bGU6ICdlc3JpU0xTU29saWQnLFxuICAgICAgdHlwZTogJ2VzcmlTTFMnLFxuICAgICAgd2lkdGg6IDFcbiAgICB9LFxuICAgIHNpemU6IDYsXG4gICAgc3R5bGU6ICdlc3JpU01TQ2lyY2xlJyxcbiAgICB0eXBlOiAnZXNyaVNNUycsXG4gICAgeG9mZnNldDogMCxcbiAgICB5b2Zmc2V0OiAwXG4gIH0sXG4gIHJlc3VsdEFsbG93Q2hhbmdlU3ltYm9sOiBmYWxzZSxcbiAgYWxsb3dFeHBvcnQ6IGZhbHNlLFxuICBzb3J0T3B0aW9uczogW10sXG4gIHpvb21Ub1NlbGVjdGVkOiB0cnVlLFxuICBpdGVtU2l6ZU1hcDoge1xuICAgIGFycmFuZ2VtZW50SG9yaXpvbnRhbFBvcHBlcjoge1xuICAgICAgbWluU2l6ZTogeyB3aWR0aDogMzAwLCBoZWlnaHQ6IDMwMCB9LFxuICAgICAgZGVmYXVsdFNpemU6IHsgd2lkdGg6IDM2MCwgaGVpZ2h0OiA0ODAgfVxuICAgIH1cbiAgfVxufVxuXG5cbiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBkPVxcXCJNMSAxdjE0aDE0VjF6bTkuMDgyIDEzYy0uMDA1LS4wMzctLjExMy0uMjc0LS4xMjItLjMwOWExLjUgMS41IDAgMCAwIC43MTgtMS4yNjcgMS4yIDEuMiAwIDAgMC0uMDUzLS4zNThjLjE1Mi0uMTc2LjI2My0uMzgzLjMyNi0uNjA3cS4wNDYuMDAzLjA5My4wMDNjLjMuMDAyLjU5My0uMDkxLjgzNi0uMjY2cS4wNi4wNjYuMTI2LjEyNGMuNDIuNDEyLjk3Ny42NTQgMS41NjQuNjhIMTR2MmgtMy45MThNMTQgMTFoLS40M2ExLjQ2IDEuNDYgMCAwIDEtLjkwNi0uNDMzYy0uMjY0LS4yMy0uMjU4LS43ODItLjYxNy0uNzgyLS40ODIgMC0uNTIuNjc3LTEuMDAzLjY3Ny0uMjE5IDAtLjM4LS4xNzctLjU5OS0uMTc3LS4xOTMgMC0uNDQ1LjEwMi0uNDQ1LjI5M3YuNTAyYzAgLjQyNC0uNTA2LjUwOC0uNTA2LjkzNCAwIC4xNzEuMTg0LjIzNi4xODQuNDEgMCAuNTgtLjg5My41MDItLjg5MyAxLjA4IDAgLjE5MS4yMTUuMzA1LjIxNS40ODZWMTRINi4zNzVxLjA4Ny0uMjQzLjA5LS41MDJjMC0uNTQ3LTEuMDQzLS4zOTMtMS4yMDctLjcyLS40MDctLjgxMy42OTMtMS4wMjIuNjkzLTEuNjczIDAtLjE2LS4wODItLjQ4OC0uMzM0LS41MTMtLjM1MS0uMDM1LS40NDMuMTU0LS43OTcuMTU0YS40MDYuNDA2IDAgMCAxLS40MzctLjM2YzAtLjM4Ni4zMDgtLjU2Ni4zMDgtLjk1MiAwLS4yNS0uMTAyLS4zOTMtLjEwMi0uNjQzYS42Mi42MiAwIDAgMSAuNTktLjY0M2MuMzIzIDAgLjQ2NC4yNjQuNjE4LjU0YS42NC42NCAwIDAgMCAuNjE3LjMwOGMuNDkgMCAuNzk4LS42MS43OTgtLjk3N2EuNDcuNDcgMCAwIDEgLjQzNy0uNDg4Yy4zNDcgMCAuNDc2LjM2LjgyNC4zNi41NyAwIC41NS0uNzU2IDEuMDUzLTEuMDMuNjE4LS4zMzIuNDM4LTEuMDUyLjM2LTEuNDQtLjAzMi0uMTY5LjI5LS41LjQ2NC0uNDg3LjcyLjA1LjQxMi0uNTQuNDEyLS44MjNxMC0uMDczLjAyMi0uMTQyYy4xMTEtLjMzMi41OTUtLjQzOC41OTUtLjgzNiAwLS4yODEtLjIzMy0uNDEtLjIzMy0uNjkzYS42NS42NSAwIDAgMSAuMjItLjQ0SDE0ek0yIDE0VjJoOC4yNzhjLS4wMTMuMDc3LS4xMzIuMzU2LS4xMzIuNDQgMCAuMTk0LjAzOC4zODcuMTEyLjU2N2ExLjYgMS42IDAgMCAwLS40MjIuNjQzIDEuNCAxLjQgMCAwIDAtLjA3NC40NDIgMS43IDEuNyAwIDAgMC0uNTM2LjQzIDEuMzIgMS4zMiAwIDAgMC0uMzIgMS4wOTFxLjA0Ni4yMDUuMDY2LjQxNGEyIDIgMCAwIDAtLjY0OS42NyAxLjQ2IDEuNDYgMCAwIDAtLjY3NC0uMTY2IDEuNDUgMS40NSAwIDAgMC0xLjM4MyAxLjA4NiAxLjQ0IDEuNDQgMCAwIDAtMS4wODYtLjQ2OSAxLjYyIDEuNjIgMCAwIDAtMS41OTEgMS42NDNjMCAuMjU0LjExMy4yOTMuMDg0LjU3NHMtLjI5LjUzNS0uMjkgMS4wMjJhMS4zNyAxLjM3IDAgMCAwIC45ODQgMS4yOSAxLjU4IDEuNTggMCAwIDAtLjAwMyAxLjU0OWMuMTQzLjI4Ni42MzYuNzc0LjUzNC43NzR6XFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHZpZXdCb3g9XFxcIjAgMCAxNiAxNlxcXCI+PHBhdGggZmlsbD1cXFwiY3VycmVudENvbG9yXFxcIiBmaWxsLXJ1bGU9XFxcImV2ZW5vZGRcXFwiIGQ9XFxcIk0wIDEwLjVWMTJhMSAxIDAgMCAwIDEgMWgxLjV2LTFIMXYtMS41ek0yLjUgMUgxYTEgMSAwIDAgMC0xIDF2MS41aDFWMmgxLjV6TTAgOC41aDF2LTNIMHpNNC41IDF2MWgzVjF6bTUgMHYxSDExdjEuNWgxVjJhMSAxIDAgMCAwLTEtMXpNNi4zMTggMTMuNjgyYTQuNSA0LjUgMCAwIDAgNS45OTEuMzM0bDEuODQ4IDEuODQ4LjcwNy0uNzA3LTEuODQ3LTEuODQ4YTQuNSA0LjUgMCAxIDAtNi42OTkuMzczbS43MDctLjcwN2EzLjUgMy41IDAgMSAxIDQuOTUtNC45NSAzLjUgMy41IDAgMCAxLTQuOTUgNC45NU05IDEzdi0ySDd2LTFoMlY4aDF2MmgydjFoLTJ2MnpcXFwiIGNsaXAtcnVsZT1cXFwiZXZlbm9kZFxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwiLyoqIEBqc3gganN4ICovXHJcbmltcG9ydCB7XHJcbiAgUmVhY3QsXHJcbiAganN4LFxyXG4gIGhvb2tzXHJcbn0gZnJvbSAnamltdS1jb3JlJ1xyXG5pbXBvcnQgeyBTZWxlY3QsIE51bWVyaWNJbnB1dCwgZGVmYXVsdE1lc3NhZ2VzIGFzIGppbXVVSU1lc3NhZ2VzIH0gZnJvbSAnamltdS11aSdcclxuaW1wb3J0IHsgVW5pdFR5cGUgfSBmcm9tICcuLi9jb25maWcnXHJcbmltcG9ydCBkZWZhdWx0TWVzc2FnZSBmcm9tICcuL3RyYW5zbGF0aW9ucy9kZWZhdWx0J1xyXG5pbXBvcnQgeyBRdWVyeVRhc2tDb250ZXh0IH0gZnJvbSAnLi9xdWVyeS10YXNrLWNvbnRleHQnXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFByb3BzIHtcclxuICBkaXN0YW5jZTogbnVtYmVyXHJcbiAgdW5pdDogVW5pdFR5cGVcclxuICBvbkJ1ZmZlckNoYW5nZTogKGRpc3RhbmNlOiBudW1iZXIsIHVuaXQ6IFVuaXRUeXBlKSA9PiB2b2lkXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBCdWZmZXJJbnB1dCAocHJvcHM6IFByb3BzKSB7XHJcbiAgY29uc3QgeyBkaXN0YW5jZSA9IDAsIHVuaXQgPSBVbml0VHlwZS5NZXRlcnMsIG9uQnVmZmVyQ2hhbmdlIH0gPSBwcm9wc1xyXG4gIGNvbnN0IGdldEkxOG5NZXNzYWdlID0gaG9va3MudXNlVHJhbnNsYXRpb24oamltdVVJTWVzc2FnZXMsIGRlZmF1bHRNZXNzYWdlKVxyXG4gIGNvbnN0IFtkLCBzZXREXSA9IFJlYWN0LnVzZVN0YXRlKGRpc3RhbmNlKVxyXG4gIGNvbnN0IFt1LCBzZXRVXSA9IFJlYWN0LnVzZVN0YXRlKHVuaXQpXHJcbiAgY29uc3QgcXVlcnlUYXNrQ29udGV4dCA9IFJlYWN0LnVzZUNvbnRleHQoUXVlcnlUYXNrQ29udGV4dClcclxuICBjb25zdCByZXNldFN5bWJvbFJlZiA9IFJlYWN0LnVzZVJlZihxdWVyeVRhc2tDb250ZXh0LnJlc2V0U3ltYm9sKVxyXG5cclxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgbGV0IGNoYW5nZWQgPSBmYWxzZVxyXG4gICAgaWYgKGRpc3RhbmNlICE9PSBkKSB7XHJcbiAgICAgIHNldEQoZGlzdGFuY2UpXHJcbiAgICAgIGNoYW5nZWQgPSB0cnVlXHJcbiAgICB9XHJcbiAgICBpZiAodW5pdCAhPT0gdSkge1xyXG4gICAgICBzZXRVKHVuaXQpXHJcbiAgICAgIGNoYW5nZWQgPSB0cnVlXHJcbiAgICB9XHJcbiAgICBpZiAoY2hhbmdlZCkge1xyXG4gICAgICBvbkJ1ZmZlckNoYW5nZShkaXN0YW5jZSwgdW5pdClcclxuICAgIH1cclxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzXHJcbiAgfSwgW2Rpc3RhbmNlLCB1bml0XSlcclxuXHJcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGlmIChxdWVyeVRhc2tDb250ZXh0LnJlc2V0U3ltYm9sICYmIHF1ZXJ5VGFza0NvbnRleHQucmVzZXRTeW1ib2wgIT09IHJlc2V0U3ltYm9sUmVmLmN1cnJlbnQpIHtcclxuICAgICAgcmVzZXRTeW1ib2xSZWYuY3VycmVudCA9IHF1ZXJ5VGFza0NvbnRleHQucmVzZXRTeW1ib2xcclxuICAgICAgc2V0RChkaXN0YW5jZSlcclxuICAgICAgc2V0VSh1bml0KVxyXG4gICAgICBvbkJ1ZmZlckNoYW5nZShkaXN0YW5jZSwgdW5pdClcclxuICAgIH1cclxuICB9LCBbcXVlcnlUYXNrQ29udGV4dC5yZXNldFN5bWJvbCwgZGlzdGFuY2UsIHVuaXQsIG9uQnVmZmVyQ2hhbmdlXSlcclxuXHJcbiAgY29uc3QgaGFuZGxlRGlzdGFuY2VDaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjaygodmFsdWUpID0+IHtcclxuICAgIHNldEQodmFsdWUpXHJcbiAgfSwgW10pXHJcblxyXG4gIGNvbnN0IGhhbmRsZURpc3RhbmNlQWNjZXB0ZWQgPSBSZWFjdC51c2VDYWxsYmFjaygodmFsdWUpID0+IHtcclxuICAgIHNldEQodmFsdWUpXHJcbiAgICBvbkJ1ZmZlckNoYW5nZSh2YWx1ZSwgdSlcclxuICB9LCBbb25CdWZmZXJDaGFuZ2UsIHVdKVxyXG5cclxuICBjb25zdCBoYW5kbGVCdWZmZXJVbml0Q2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soKGUpID0+IHtcclxuICAgIHNldFUoZS50YXJnZXQudmFsdWUpXHJcbiAgICBvbkJ1ZmZlckNoYW5nZShkLCBlLnRhcmdldC52YWx1ZSlcclxuICB9LCBbb25CdWZmZXJDaGFuZ2UsIGRdKVxyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPFJlYWN0LkZyYWdtZW50PlxyXG4gICAgICA8TnVtZXJpY0lucHV0XHJcbiAgICAgICAgYXJpYS1sYWJlbD17Z2V0STE4bk1lc3NhZ2UoJ3RoZUJ1ZmZlckRpc3RhbmNlJyl9XHJcbiAgICAgICAgY2xhc3NOYW1lPSdtci0xJ1xyXG4gICAgICAgIHZhbHVlPXtkfVxyXG4gICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVEaXN0YW5jZUNoYW5nZX1cclxuICAgICAgICBvbkFjY2VwdFZhbHVlPXtoYW5kbGVEaXN0YW5jZUFjY2VwdGVkfVxyXG4gICAgICAvPlxyXG4gICAgICA8U2VsZWN0XHJcbiAgICAgICAgYXJpYS1sYWJlbD17Z2V0STE4bk1lc3NhZ2UoJ3VuaXQnKX1cclxuICAgICAgICB2YWx1ZT17dX1cclxuICAgICAgICBvbkNoYW5nZT17aGFuZGxlQnVmZmVyVW5pdENoYW5nZX1cclxuICAgICAgPlxyXG4gICAgICAgIHtPYmplY3QudmFsdWVzKFVuaXRUeXBlKS5tYXAoKHZhbHVlKSA9PiAoXHJcbiAgICAgICAgICA8b3B0aW9uIGtleT17dmFsdWV9IHZhbHVlPXt2YWx1ZX0+XHJcbiAgICAgICAgICAgIHtnZXRJMThuTWVzc2FnZShgdW5pdF8ke3ZhbHVlfWApfVxyXG4gICAgICAgICAgPC9vcHRpb24+XHJcbiAgICAgICAgKSl9XHJcbiAgICAgIDwvU2VsZWN0PlxyXG4gICAgPC9SZWFjdC5GcmFnbWVudD5cclxuICApXHJcbn1cclxuIiwiLyoqIEBqc3gganN4ICovXG4vLyBUaGlzIGZpbGUgaXMgZHVwbGljYXRlZCBmcm9tICcuLi8uLi8uLi8uLi9mZWF0dXJlLWluZm8vc3JjL3J1bnRpbWUvY29tcG9uZW50cy9mZWF0dXJlLWluZm8nXG5pbXBvcnQgeyBSZWFjdCwgY3NzLCBqc3gsIHR5cGUgRGF0YVNvdXJjZSwgaW5qZWN0SW50bCwgdHlwZSBJbnRsU2hhcGUsIGNsYXNzTmFtZXMgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBsb2FkQXJjR0lTSlNBUElNb2R1bGVzIH0gZnJvbSAnamltdS1hcmNnaXMnXG5pbXBvcnQgeyBCdXR0b24gfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHsgUmlnaHRGaWxsZWQgfSBmcm9tICdqaW11LWljb25zL2ZpbGxlZC9kaXJlY3Rpb25hbC9yaWdodCdcbmltcG9ydCB7IERvd25GaWxsZWQgfSBmcm9tICdqaW11LWljb25zL2ZpbGxlZC9kaXJlY3Rpb25hbC9kb3duJ1xuaW1wb3J0IHsgY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlciB9IGZyb20gJ3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uJ1xuXG5jb25zdCBkZWJ1Z0xvZ2dlciA9IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIoKVxuXG5leHBvcnQgZW51bSBMb2FkU3RhdHVzIHtcbiAgUGVuZGluZyA9ICdQZW5kaW5nJyxcbiAgRnVsZmlsbGVkID0gJ0Z1bGZpbGxlZCcsXG4gIFJlamVjdGVkID0gJ1JlamVjdGVkJ1xufVxuXG5pbnRlcmZhY2UgUHJvcHMge1xuICBkYXRhU291cmNlOiBEYXRhU291cmNlXG4gIGdyYXBoaWM6IF9fZXNyaS5HcmFwaGljXG4gIHBvcHVwVGVtcGxhdGU6IF9fZXNyaS5Qb3B1cFRlbXBsYXRlXG4gIGRlZmF1bHRQb3B1cFRlbXBsYXRlOiBfX2VzcmkuUG9wdXBUZW1wbGF0ZVxuICB0b2dnbGFibGU/OiBib29sZWFuXG4gIGV4cGFuZEJ5RGVmYXVsdD86IGJvb2xlYW5cbn1cblxuaW50ZXJmYWNlIFN0YXRlIHtcbiAgbG9hZFN0YXR1czogTG9hZFN0YXR1c1xuICBzaG93Q29udGVudDogYm9vbGVhblxufVxuXG5jb25zdCBzdHlsZSA9IGNzc2BcbiAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tc3lzLWNvbG9yLWRpdmlkZXItc2Vjb25kYXJ5KTtcbiAgLmVzcmktd2lkZ2V0X19oZWFkaW5nIHtcbiAgICBmb250LXNpemU6IDAuODc1cmVtICFpbXBvcnRhbnQ7XG4gICAgZm9udC13ZWlnaHQ6IDUwMCAhaW1wb3J0YW50O1xuICAgIG1hcmdpbjogMDtcbiAgICBjb2xvcjogdmFyKC0tc3lzLWNvbG9yLXN1cmZhY2UtcGFwZXItdGV4dCk7XG4gIH1cblxuICAuZXNyaS1mZWF0dXJlX19jb250ZW50LWVsZW1lbnQge1xuICAgIHBhZGRpbmc6IDA7XG4gIH1cblxuICAuamltdS1idG4uZXhwYW5kZWQge1xuICAgIGFsaWduLXNlbGY6IGZsZXgtc3RhcnQ7XG4gIH1cbiAgXG4gIC8vIExhcmdlciBleHBhbmQvY29sbGFwc2UgYnV0dG9uIGZvciBiZXR0ZXIgdG91Y2ggdGFyZ2V0c1xuICAuamltdS1idG5bYXJpYS1sYWJlbCo9XCJleHBhbmRcIl0sXG4gIC5qaW11LWJ0blthcmlhLWxhYmVsKj1cImNvbGxhcHNlXCJdIHtcbiAgICBtaW4td2lkdGg6IDMycHg7XG4gICAgbWluLWhlaWdodDogMzJweDtcbiAgICBwYWRkaW5nOiA2cHg7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICB9XG5cbiAgLmVzcmktZmVhdHVyZS5lc3JpLXdpZGdldCB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XG4gIH1cbmBcblxuaW50ZXJmYWNlIEV4dHJhUHJvcHMge1xuICBpbnRsOiBJbnRsU2hhcGVcbn1cblxuY2xhc3MgRmVhdHVyZUluZm8gZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50PFByb3BzICYgRXh0cmFQcm9wcywgU3RhdGU+IHtcbiAgcHJpdmF0ZSBGZWF0dXJlOiB0eXBlb2YgX19lc3JpLkZlYXR1cmVcbiAgcHJpdmF0ZSBmZWF0dXJlOiBfX2VzcmkuRmVhdHVyZVxuICBwcml2YXRlIHJlYWRvbmx5IGZlYXR1cmVDb250YWluZXI6IFJlYWN0LlJlZk9iamVjdDxIVE1MSW5wdXRFbGVtZW50IHwgbnVsbD5cblxuICBjb25zdHJ1Y3RvciAocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcylcbiAgICBjb25zdCB7IHRvZ2dsYWJsZSA9IGZhbHNlLCBleHBhbmRCeURlZmF1bHQgfSA9IHRoaXMucHJvcHNcbiAgICBjb25zdCByZWNvcmRJZCA9IHRoaXMucHJvcHMuZ3JhcGhpYz8uYXR0cmlidXRlcz8uT0JKRUNUSUQgfHwgdGhpcy5wcm9wcy5ncmFwaGljPy5hdHRyaWJ1dGVzPy5vYmplY3RpZCB8fCAndW5rbm93bidcbiAgICBjb25zdCBpbml0aWFsU2hvd0NvbnRlbnQgPSAhdG9nZ2xhYmxlIHx8IGV4cGFuZEJ5RGVmYXVsdFxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnRVhQQU5ELUNPTExBUFNFJywge1xuICAgICAgZXZlbnQ6ICdGZWF0dXJlSW5mby1jb25zdHJ1Y3RvcicsXG4gICAgICByZWNvcmRJZCxcbiAgICAgIHRvZ2dsYWJsZSxcbiAgICAgIGV4cGFuZEJ5RGVmYXVsdCxcbiAgICAgIGluaXRpYWxTaG93Q29udGVudCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgdGhpcy5mZWF0dXJlQ29udGFpbmVyID0gUmVhY3QuY3JlYXRlUmVmKClcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgc2hvd0NvbnRlbnQ6IGluaXRpYWxTaG93Q29udGVudCxcbiAgICAgIGxvYWRTdGF0dXM6IExvYWRTdGF0dXMuUGVuZGluZ1xuICAgIH1cbiAgfVxuXG4gIGNvbXBvbmVudERpZE1vdW50ICgpIHtcbiAgICB0aGlzLmNyZWF0ZUZlYXR1cmUoKVxuICB9XG5cbiAgY29tcG9uZW50RGlkVXBkYXRlIChwcmV2UHJvcHM6IFByb3BzKSB7XG4gICAgaWYgKHRoaXMuZmVhdHVyZSkge1xuICAgICAgaWYgKHByZXZQcm9wcy5wb3B1cFRlbXBsYXRlICE9PSB0aGlzLnByb3BzLnBvcHVwVGVtcGxhdGUgfHxcbiAgICAgICAgcHJldlByb3BzLmRlZmF1bHRQb3B1cFRlbXBsYXRlICE9PSB0aGlzLnByb3BzLmRlZmF1bHRQb3B1cFRlbXBsYXRlIHx8XG4gICAgICAgIHByZXZQcm9wcy5ncmFwaGljICE9PSB0aGlzLnByb3BzLmdyYXBoaWMpIHtcbiAgICAgICAgdGhpcy5kZXN0cm95RmVhdHVyZSgpXG4gICAgICAgIHRoaXMuY3JlYXRlRmVhdHVyZSgpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmZlYXR1cmUudmlzaWJsZUVsZW1lbnRzID0gdGhpcy5nZXRWaXNpYmxlRWxlbWVudHMoKVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBTeW5jIGV4cGFuZEJ5RGVmYXVsdCBwcm9wIGNoYW5nZXMgKHdoZW4gdXNlciBjbGlja3MgRXhwYW5kIEFsbC9Db2xsYXBzZSBBbGwpXG4gICAgLy8gVGhpcyBlbnN1cmVzIGFsbCBpdGVtcyByZXNwZWN0IHRoZSBnbG9iYWwgZXhwYW5kL2NvbGxhcHNlIHN0YXRlXG4gICAgaWYgKHByZXZQcm9wcy5leHBhbmRCeURlZmF1bHQgIT09IHRoaXMucHJvcHMuZXhwYW5kQnlEZWZhdWx0KSB7XG4gICAgICBjb25zdCB7IHRvZ2dsYWJsZSA9IGZhbHNlLCBleHBhbmRCeURlZmF1bHQgfSA9IHRoaXMucHJvcHNcbiAgICAgIGNvbnN0IHJlY29yZElkID0gdGhpcy5wcm9wcy5ncmFwaGljPy5hdHRyaWJ1dGVzPy5PQkpFQ1RJRCB8fCB0aGlzLnByb3BzLmdyYXBoaWM/LmF0dHJpYnV0ZXM/Lm9iamVjdGlkIHx8ICd1bmtub3duJ1xuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0VYUEFORC1DT0xMQVBTRScsIHtcbiAgICAgICAgZXZlbnQ6ICdleHBhbmRCeURlZmF1bHQtcHJvcC1jaGFuZ2VkJyxcbiAgICAgICAgcmVjb3JkSWQsXG4gICAgICAgIHByZXZFeHBhbmRCeURlZmF1bHQ6IHByZXZQcm9wcy5leHBhbmRCeURlZmF1bHQsXG4gICAgICAgIG5ld0V4cGFuZEJ5RGVmYXVsdDogZXhwYW5kQnlEZWZhdWx0LFxuICAgICAgICB0b2dnbGFibGUsXG4gICAgICAgIGN1cnJlbnRTaG93Q29udGVudDogdGhpcy5zdGF0ZS5zaG93Q29udGVudCxcbiAgICAgICAgd2lsbFVwZGF0ZVN0YXRlOiB0b2dnbGFibGUsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgaWYgKHRvZ2dsYWJsZSkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHsgc2hvd0NvbnRlbnQ6IGV4cGFuZEJ5RGVmYXVsdCB9LCAoKSA9PiB7XG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdFWFBBTkQtQ09MTEFQU0UnLCB7XG4gICAgICAgICAgICBldmVudDogJ0ZlYXR1cmVJbmZvLXN0YXRlLXVwZGF0ZWQnLFxuICAgICAgICAgICAgcmVjb3JkSWQsXG4gICAgICAgICAgICBuZXdTaG93Q29udGVudDogdGhpcy5zdGF0ZS5zaG93Q29udGVudCxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIExvZyBhbGwgY29tcG9uZW50RGlkVXBkYXRlIGNhbGxzIHRvIHRyYWNrIHJlbW91bnRzXG4gICAgY29uc3QgcmVjb3JkSWQgPSB0aGlzLnByb3BzLmdyYXBoaWM/LmF0dHJpYnV0ZXM/Lk9CSkVDVElEIHx8IHRoaXMucHJvcHMuZ3JhcGhpYz8uYXR0cmlidXRlcz8ub2JqZWN0aWQgfHwgJ3Vua25vd24nXG4gICAgaWYgKHByZXZQcm9wcy5ncmFwaGljICE9PSB0aGlzLnByb3BzLmdyYXBoaWMgfHwgXG4gICAgICAgIHByZXZQcm9wcy5wb3B1cFRlbXBsYXRlICE9PSB0aGlzLnByb3BzLnBvcHVwVGVtcGxhdGUgfHxcbiAgICAgICAgcHJldlByb3BzLmRlZmF1bHRQb3B1cFRlbXBsYXRlICE9PSB0aGlzLnByb3BzLmRlZmF1bHRQb3B1cFRlbXBsYXRlKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0VYUEFORC1DT0xMQVBTRScsIHtcbiAgICAgICAgZXZlbnQ6ICdGZWF0dXJlSW5mby1wcm9wcy1jaGFuZ2VkLXJlY3JlYXRlJyxcbiAgICAgICAgcmVjb3JkSWQsXG4gICAgICAgIGdyYXBoaWNDaGFuZ2VkOiBwcmV2UHJvcHMuZ3JhcGhpYyAhPT0gdGhpcy5wcm9wcy5ncmFwaGljLFxuICAgICAgICBwb3B1cFRlbXBsYXRlQ2hhbmdlZDogcHJldlByb3BzLnBvcHVwVGVtcGxhdGUgIT09IHRoaXMucHJvcHMucG9wdXBUZW1wbGF0ZSxcbiAgICAgICAgZGVmYXVsdFBvcHVwVGVtcGxhdGVDaGFuZ2VkOiBwcmV2UHJvcHMuZGVmYXVsdFBvcHVwVGVtcGxhdGUgIT09IHRoaXMucHJvcHMuZGVmYXVsdFBvcHVwVGVtcGxhdGUsXG4gICAgICAgIGV4cGFuZEJ5RGVmYXVsdDogdGhpcy5wcm9wcy5leHBhbmRCeURlZmF1bHQsXG4gICAgICAgIGN1cnJlbnRTaG93Q29udGVudDogdGhpcy5zdGF0ZS5zaG93Q29udGVudCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIGRlc3Ryb3lGZWF0dXJlICgpIHtcbiAgICB0aGlzLmZlYXR1cmUgJiYgIXRoaXMuZmVhdHVyZS5kZXN0cm95ZWQgJiYgdGhpcy5mZWF0dXJlLmRlc3Ryb3koKVxuICB9XG5cbiAgZ2V0VmlzaWJsZUVsZW1lbnRzICgpIHtcbiAgICBjb25zdCB7IHRvZ2dsYWJsZSA9IGZhbHNlIH0gPSB0aGlzLnByb3BzXG4gICAgY29uc3QgeyBzaG93Q29udGVudCB9ID0gdGhpcy5zdGF0ZVxuICAgIGNvbnN0IGV4cGFuZGVkID0gdG9nZ2xhYmxlID8gc2hvd0NvbnRlbnQgOiB0cnVlXG4gICAgcmV0dXJuIHtcbiAgICAgIHRpdGxlOiB0cnVlLFxuICAgICAgY29udGVudDoge1xuICAgICAgICBmaWVsZHM6IGV4cGFuZGVkLFxuICAgICAgICB0ZXh0OiBleHBhbmRlZCxcbiAgICAgICAgbWVkaWE6IGV4cGFuZGVkLFxuICAgICAgICBhdHRhY2htZW50czogZXhwYW5kZWRcbiAgICAgIH0sXG4gICAgICBsYXN0RWRpdGVkSW5mbzogZmFsc2VcbiAgICB9XG4gIH1cblxuICBjcmVhdGVGZWF0dXJlICgpIHtcbiAgICBsZXQgZmVhdHVyZU1vZHVsZVByb21pc2VcbiAgICBpZiAodGhpcy5GZWF0dXJlKSB7XG4gICAgICBmZWF0dXJlTW9kdWxlUHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSgpXG4gICAgfSBlbHNlIHtcbiAgICAgIGZlYXR1cmVNb2R1bGVQcm9taXNlID0gbG9hZEFyY0dJU0pTQVBJTW9kdWxlcyhbXG4gICAgICAgICdlc3JpL3dpZGdldHMvRmVhdHVyZSdcbiAgICAgIF0pLnRoZW4obW9kdWxlcyA9PiB7XG4gICAgICAgIFtcbiAgICAgICAgICB0aGlzLkZlYXR1cmVcbiAgICAgICAgXSA9IG1vZHVsZXNcbiAgICAgIH0pXG4gICAgfVxuICAgIHJldHVybiBmZWF0dXJlTW9kdWxlUHJvbWlzZS50aGVuKCgpID0+IHtcbiAgICAgIC8vIENoZWNrIGlmIGNvbXBvbmVudCBpcyBzdGlsbCBtb3VudGVkIGJlZm9yZSB0cnlpbmcgdG8gYXBwZW5kXG4gICAgICAvLyBUaGlzIHByZXZlbnRzIGVycm9ycyB3aGVuIGNvbXBvbmVudCB1bm1vdW50cyBkdXJpbmcgYXN5bmMgbW9kdWxlIGxvYWRpbmdcbiAgICAgIGlmICghdGhpcy5mZWF0dXJlQ29udGFpbmVyLmN1cnJlbnQpIHtcbiAgICAgICAgLy8gQ29tcG9uZW50IHdhcyB1bm1vdW50ZWQsIGFib3J0XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudCAmJiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgICAgY29udGFpbmVyLmNsYXNzTmFtZSA9ICdqaW11LXdpZGdldCdcbiAgICAgIHRoaXMuZmVhdHVyZUNvbnRhaW5lci5jdXJyZW50LmFwcGVuZENoaWxkKGNvbnRhaW5lcilcblxuICAgICAgY29uc3Qgb3JpZ2luRFMgPSB0aGlzLnByb3BzLmRhdGFTb3VyY2UuZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKVxuICAgICAgY29uc3Qgcm9vdERhdGFTb3VyY2UgPSBvcmlnaW5EUz8uWzBdPy5nZXRSb290RGF0YVNvdXJjZSgpXG5cbiAgICAgIHRoaXMuZGVzdHJveUZlYXR1cmUoKVxuICAgICAgY29uc3QgbGF5ZXIgPSB0aGlzLnByb3BzLmdyYXBoaWMubGF5ZXIgYXMgX19lc3JpLkZlYXR1cmVMYXllclxuICAgICAgaWYgKHRoaXMucHJvcHMucG9wdXBUZW1wbGF0ZSkge1xuICAgICAgICB0aGlzLnByb3BzLmdyYXBoaWMucG9wdXBUZW1wbGF0ZSA9IHRoaXMucHJvcHMucG9wdXBUZW1wbGF0ZVxuICAgICAgfSBlbHNlIGlmIChsYXllcikge1xuICAgICAgICAvLyBzZXQgcG9wdXBUZW1wbGF0ZSB3aXRoIGxheWVyJ3MgcG9wdXBUZW1wbGF0ZSBvciBkZWZhdWx0UG9wdXBUZW1wbGF0ZVxuICAgICAgICB0aGlzLnByb3BzLmdyYXBoaWMucG9wdXBUZW1wbGF0ZSA9IGxheWVyLnBvcHVwVGVtcGxhdGUgPz8gdGhpcy5wcm9wcy5kZWZhdWx0UG9wdXBUZW1wbGF0ZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5wcm9wcy5ncmFwaGljLnBvcHVwVGVtcGxhdGUgPSB0aGlzLnByb3BzLmRlZmF1bHRQb3B1cFRlbXBsYXRlXG4gICAgICB9XG4gICAgICBpZiAobGF5ZXIgJiYgIWxheWVyLnBvcHVwVGVtcGxhdGUpIHtcbiAgICAgICAgbGF5ZXIucG9wdXBUZW1wbGF0ZSA9IHRoaXMucHJvcHMucG9wdXBUZW1wbGF0ZSB8fCB0aGlzLnByb3BzLmRlZmF1bHRQb3B1cFRlbXBsYXRlXG4gICAgICB9XG4gICAgICB0aGlzLmZlYXR1cmUgPSBuZXcgdGhpcy5GZWF0dXJlKHtcbiAgICAgICAgY29udGFpbmVyOiBjb250YWluZXIsXG4gICAgICAgIGRlZmF1bHRQb3B1cFRlbXBsYXRlRW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvclxuICAgICAgICBzcGF0aWFsUmVmZXJlbmNlOiB0aGlzLnByb3BzLmRhdGFTb3VyY2U/LmxheWVyPy5zcGF0aWFsUmVmZXJlbmNlIHx8IG51bGwsXG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3JcbiAgICAgICAgbWFwOiByb290RGF0YVNvdXJjZT8ubWFwIHx8IG51bGwsXG4gICAgICAgIGdyYXBoaWM6IHRoaXMucHJvcHMuZ3JhcGhpYyxcbiAgICAgICAgdmlzaWJsZUVsZW1lbnRzOiB0aGlzLmdldFZpc2libGVFbGVtZW50cygpXG4gICAgICB9KVxuICAgIH0pLnRoZW4oKCkgPT4ge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7IGxvYWRTdGF0dXM6IExvYWRTdGF0dXMuRnVsZmlsbGVkIH0pXG4gICAgfSlcbiAgfVxuXG4gIHRvZ2dsZUV4cGFuZGVkID0gKGUpID0+IHtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpXG4gICAgdGhpcy5zZXRTdGF0ZSh7IHNob3dDb250ZW50OiAhdGhpcy5zdGF0ZS5zaG93Q29udGVudCB9KVxuICB9XG5cbiAgcmVuZGVyICgpIHtcbiAgICBjb25zdCB7IHRvZ2dsYWJsZSA9IGZhbHNlLCBpbnRsIH0gPSB0aGlzLnByb3BzXG4gICAgY29uc3QgeyBzaG93Q29udGVudCB9ID0gdGhpcy5zdGF0ZVxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT0nZmVhdHVyZS1pbmZvLWNvbXBvbmVudCBkLWZsZXggYWxpZ24taXRlbXMtY2VudGVyIHAtMScgY3NzPXtzdHlsZX0+XG4gICAgICAgIHt0b2dnbGFibGUgJiYgKFxuICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgIGFyaWEtbGFiZWw9e2ludGwuZm9ybWF0TWVzc2FnZSh7IGlkOiBzaG93Q29udGVudCA/ICdjb2xsYXBzZScgOiAnZXhwYW5kJyB9KX1cbiAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcygnamltdS1vdXRsaW5lLWluc2lkZSBmbGV4LXNocmluay0wJywgeyBleHBhbmRlZDogc2hvd0NvbnRlbnQgfSl9XG4gICAgICAgICAgICB2YXJpYW50PSd0ZXh0J1xuICAgICAgICAgICAgY29sb3I9J2luaGVyaXQnXG4gICAgICAgICAgICBpY29uXG4gICAgICAgICAgICBzaXplPSdzbSdcbiAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMudG9nZ2xlRXhwYW5kZWR9XG4gICAgICAgICAgICBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgbWluLXdpZHRoOiAzMnB4O1xuICAgICAgICAgICAgICBtaW4taGVpZ2h0OiAzMnB4O1xuICAgICAgICAgICAgICBwYWRkaW5nOiA2cHg7XG4gICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgICAgICAgYH1cbiAgICAgICAgICA+XG4gICAgICAgICAgICB7c2hvd0NvbnRlbnQgPyA8RG93bkZpbGxlZCBzaXplPSdtJy8+IDogPFJpZ2h0RmlsbGVkIHNpemU9J20nIGF1dG9GbGlwLz59XG4gICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICl9XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4LWdyb3ctMScgcmVmPXt0aGlzLmZlYXR1cmVDb250YWluZXJ9IC8+XG4gICAgICA8L2Rpdj5cbiAgICApXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgaW5qZWN0SW50bChGZWF0dXJlSW5mbylcblxuXG4iLCIvKiogQGpzeCBqc3ggKi9cclxuaW1wb3J0IHsgUmVhY3QsIGpzeCwgY3NzLCB0eXBlIEltbXV0YWJsZUFycmF5LCBsb2Rhc2gsIGxvYWRBcmNHSVNKU0FQSU1vZHVsZSwgdXRpbHMsIGhvb2tzIH0gZnJvbSAnamltdS1jb3JlJ1xyXG5pbXBvcnQgeyBKaW11TWFwVmlld0NvbXBvbmVudCwgdHlwZSBKaW11TWFwVmlldywgbG9hZEFyY0dJU0pTQVBJTW9kdWxlcyB9IGZyb20gJ2ppbXUtYXJjZ2lzJ1xyXG5pbXBvcnQgeyBkZWZhdWx0TWVzc2FnZXMgYXMgamltdVVJTWVzc2FnZXMgfSBmcm9tICdqaW11LXVpJ1xyXG5pbXBvcnQgdHlwZSB7IENyZWF0ZVRvb2xUeXBlLCBVbml0VHlwZSB9IGZyb20gJy4uL2NvbmZpZydcclxuaW1wb3J0IHsgSW50ZXJhY3RpdmVEcmF3IH0gZnJvbSAnLi9pbnRlcmFjdGl2ZS1kcmF3LXRvb2wnXHJcbmltcG9ydCB7IEJ1ZmZlcklucHV0IH0gZnJvbSAnLi9idWZmZXItaW5wdXQnXHJcbmltcG9ydCBkZWZhdWx0TWVzc2FnZSBmcm9tICcuL3RyYW5zbGF0aW9ucy9kZWZhdWx0J1xyXG5pbXBvcnQgeyBRdWVyeVRhc2tDb250ZXh0IH0gZnJvbSAnLi9xdWVyeS10YXNrLWNvbnRleHQnXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFByb3BzIHtcclxuICBtYXBXaWRnZXRJZHM6IEltbXV0YWJsZUFycmF5PHN0cmluZz5cclxuICB3aWRnZXRJZDogc3RyaW5nXHJcbiAgY3JlYXRlVG9vbFR5cGVzOiBJbW11dGFibGVBcnJheTxDcmVhdGVUb29sVHlwZT5cclxuICBlbmFibGVCdWZmZXI6IGJvb2xlYW5cclxuICBidWZmZXJEaXN0YW5jZTogbnVtYmVyXHJcbiAgYnVmZmVyVW5pdDogVW5pdFR5cGVcclxuICBvbkJ1ZmZlckNoYW5nZTogKGRpc3RhbmNlOiBudW1iZXIsIHVuaXQ6IFVuaXRUeXBlKSA9PiB2b2lkXHJcbiAgb25HZW9tZXRyeUNoYW5nZTogKGdlb206IF9fZXNyaS5HZW9tZXRyeSwgbGF5ZXI/OiBfX2VzcmkuR3JhcGhpY3NMYXllciwgZ3JhcGhpYz86IF9fZXNyaS5HcmFwaGljLCBjbGVhckFmdGVyQXBwbHk/OiBib29sZWFuKSA9PiB2b2lkXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBHZW9tZXRyeUZyb21EcmF3IChwcm9wczogUHJvcHMpIHtcclxuICBjb25zdCB7IG9uR2VvbWV0cnlDaGFuZ2UsIGNyZWF0ZVRvb2xUeXBlcywgbWFwV2lkZ2V0SWRzLCBlbmFibGVCdWZmZXIsIGJ1ZmZlckRpc3RhbmNlLCBidWZmZXJVbml0LCBvbkJ1ZmZlckNoYW5nZSwgd2lkZ2V0SWQgfSA9IHByb3BzXHJcbiAgY29uc3QgW2ppbXVNYXBWaWV3LCBzZXRKaW11TWFwVmlld10gPSBSZWFjdC51c2VTdGF0ZTxKaW11TWFwVmlldz4obnVsbClcclxuICBjb25zdCBnZXRJMThuTWVzc2FnZSA9IGhvb2tzLnVzZVRyYW5zbGF0aW9uKGppbXVVSU1lc3NhZ2VzLCBkZWZhdWx0TWVzc2FnZSlcclxuICBjb25zdCBxdWVyeVRhc2tDb250ZXh0ID0gUmVhY3QudXNlQ29udGV4dChRdWVyeVRhc2tDb250ZXh0KVxyXG4gIGNvbnN0IHJlc2V0U3ltYm9sUmVmID0gUmVhY3QudXNlUmVmKHF1ZXJ5VGFza0NvbnRleHQucmVzZXRTeW1ib2wpXHJcbiAgY29uc3QgZ2V0TGF5ZXJGdW5SZWYgPSBSZWFjdC51c2VSZWY8KCkgPT4gX19lc3JpLkdyYXBoaWNzTGF5ZXI+KG51bGwpXHJcbiAgY29uc3QgYnVmZmVyT3BlcmF0b3JSZWYgPSBSZWFjdC51c2VSZWY8X19lc3JpLmJ1ZmZlck9wZXJhdG9yPihudWxsKVxyXG4gIGNvbnN0IGdlb2Rlc2ljQnVmZmVyT3BlcmF0b3JSZWYgPSBSZWFjdC51c2VSZWY8X19lc3JpLmdlb2Rlc2ljQnVmZmVyT3BlcmF0b3I+KG51bGwpXHJcbiAgY29uc3QgZ2VvbWV0cnlTZXJ2aWNlUmVmID0gUmVhY3QudXNlUmVmPHsgZ2VvbWV0cnlTZXJ2aWNlOiBfX2VzcmkuZ2VvbWV0cnlTZXJ2aWNlLCBidWZmZXJQYXJhbWV0ZXJzOiB0eXBlb2YgX19lc3JpLkJ1ZmZlclBhcmFtZXRlcnMgfT4obnVsbClcclxuICBjb25zdCBnZW9tZXRyeVJlZiA9IFJlYWN0LnVzZVJlZjxfX2VzcmkuR2VvbWV0cnk+KG51bGwpXHJcbiAgY29uc3QgYnVmZmVyRGlzdGFuY2VSZWYgPSBSZWFjdC51c2VSZWYoYnVmZmVyRGlzdGFuY2UpXHJcbiAgY29uc3QgYnVmZmVyVW5pdFJlZiA9IFJlYWN0LnVzZVJlZihidWZmZXJVbml0KVxyXG4gIGNvbnN0IGJ1ZmZlcmVkR3JhcGhpY1JlZiA9IFJlYWN0LnVzZVJlZjxfX2VzcmkuR3JhcGhpYz4obnVsbClcclxuXHJcbiAgaG9va3MudXNlRWZmZWN0T25jZSgoKSA9PiB7XHJcbiAgICBpZiAoZW5hYmxlQnVmZmVyKSB7XHJcbiAgICAgIC8vIFBhcmVudCBjb21wb25lbnQgcXVlcnktdGFzay1zcGF0aWFsLWZvcm0gd2lsbCByZXNldCBidWZmZXIgcGFyYW1ldGVyIHdoZW4gZmlsdGVyIHR5cGUgY2hhbmdlcyxcclxuICAgICAgLy8gc28gZGVmZXIgdGhlIGluaXQgYnVmZmVyIG9wdGlvbiBpbiBvcmRlciBub3QgdG8gYmUgb3ZlcnJpZGUgYnkgaXRzIHBhcmVudC5cclxuICAgICAgbG9kYXNoLmRlZmVyKCgpID0+IHtcclxuICAgICAgICBvbkJ1ZmZlckNoYW5nZShidWZmZXJEaXN0YW5jZSwgYnVmZmVyVW5pdClcclxuICAgICAgfSlcclxuICAgIH1cclxuICAgIGxvYWRBcmNHSVNKU0FQSU1vZHVsZXMoW1xyXG4gICAgICAnZXNyaS9HcmFwaGljJ1xyXG4gICAgXSkudGhlbigobW9kdWxlcykgPT4ge1xyXG4gICAgICBjb25zdCBHcmFwaGljID0gbW9kdWxlc1swXVxyXG4gICAgICBidWZmZXJlZEdyYXBoaWNSZWYuY3VycmVudCA9IG5ldyBHcmFwaGljKHtcclxuICAgICAgICBzeW1ib2w6IHtcclxuICAgICAgICAgIHR5cGU6ICdzaW1wbGUtZmlsbCcsXHJcbiAgICAgICAgICBjb2xvcjogWzUxLCA1MSwgMjA0LCAwLjVdLFxyXG4gICAgICAgICAgc3R5bGU6ICdzb2xpZCcsXHJcbiAgICAgICAgICBvdXRsaW5lOiB7XHJcbiAgICAgICAgICAgIGNvbG9yOiBbNTEsIDUxLCAyMDQsIDAuOF0sXHJcbiAgICAgICAgICAgIHdpZHRoOiAxXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgfSlcclxuICB9KVxyXG5cclxuICBjb25zdCBhcHBseUJ1ZmZlckVmZmVjdCA9IFJlYWN0LnVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcclxuICAgIGlmICghZ2VvbWV0cnlSZWYuY3VycmVudCB8fCAhZW5hYmxlQnVmZmVyIHx8IGJ1ZmZlckRpc3RhbmNlUmVmLmN1cnJlbnQgPT09IDApIHtcclxuICAgICAgYnVmZmVyZWRHcmFwaGljUmVmLmN1cnJlbnQuZ2VvbWV0cnkgPSBudWxsXHJcbiAgICAgIHJldHVyblxyXG4gICAgfVxyXG5cclxuICAgIC8vIElmIHRoZSBlbmQgdXNlciB1c2VzIGEgcG9pbnQgb3IgbGluZSBxdWVyeSBnZW9tZXRyeSwgdGhlbiB0aGUgbmVnYXRpdmUgYnVmZmVyIHdpbGwgbm90IHdvcmsgKHNhbWUgZWZmZWN0IGFzIHRoZXJlIGlzIG5vIGJ1ZmZlcilcclxuICAgIGNvbnN0IGlzUG9pbnROZWdhdGl2ZUJ1ZmZlciA9IChnZW9tZXRyeVJlZi5jdXJyZW50Py50eXBlID09PSAncG9pbnQnIHx8IGdlb21ldHJ5UmVmLmN1cnJlbnQ/LnR5cGUgPT09ICdtdWx0aXBvaW50JykgJiYgYnVmZmVyRGlzdGFuY2VSZWYuY3VycmVudCA8IDBcclxuICAgIGNvbnN0IGlzTGluZU5lZ2F0aXZlQnVmZmVyID0gZ2VvbWV0cnlSZWYuY3VycmVudD8udHlwZSA9PT0gJ3BvbHlsaW5lJyAmJiBidWZmZXJEaXN0YW5jZVJlZi5jdXJyZW50IDwgMFxyXG4gICAgaWYgKGlzUG9pbnROZWdhdGl2ZUJ1ZmZlciB8fCBpc0xpbmVOZWdhdGl2ZUJ1ZmZlcikge1xyXG4gICAgICBidWZmZXJlZEdyYXBoaWNSZWYuY3VycmVudC5nZW9tZXRyeSA9IG51bGxcclxuICAgICAgcmV0dXJuXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZ2VvbWV0cnkgPSBnZW9tZXRyeVJlZi5jdXJyZW50XHJcbiAgICAvLyBodHRwczovL2RldmVsb3BlcnMuYXJjZ2lzLmNvbS9qYXZhc2NyaXB0L2xhdGVzdC9hcGktcmVmZXJlbmNlL2VzcmktZ2VvbWV0cnktZ2VvbWV0cnlFbmdpbmUuaHRtbCNidWZmZXJcclxuICAgIGlmIChnZW9tZXRyeS5zcGF0aWFsUmVmZXJlbmNlPy5pc0dlb2dyYXBoaWMgJiYgIWdlb21ldHJ5LnNwYXRpYWxSZWZlcmVuY2UuaXNXR1M4NCkge1xyXG4gICAgICBjb25zdCBzZXJ2aWNlVXJsID0gdXRpbHMuZ2V0R2VvbWV0cnlTZXJ2aWNlKClcclxuICAgICAgaWYgKCFnZW9tZXRyeVNlcnZpY2VSZWYuY3VycmVudCkge1xyXG4gICAgICAgIGNvbnN0IG1vZHVsZXMgPSBhd2FpdCBsb2FkQXJjR0lTSlNBUElNb2R1bGVzKFtcclxuICAgICAgICAgICdlc3JpL3Jlc3QvZ2VvbWV0cnlTZXJ2aWNlJyxcclxuICAgICAgICAgICdlc3JpL3Jlc3Qvc3VwcG9ydC9CdWZmZXJQYXJhbWV0ZXJzJ1xyXG4gICAgICAgIF0pXHJcbiAgICAgICAgZ2VvbWV0cnlTZXJ2aWNlUmVmLmN1cnJlbnQgPSB7XHJcbiAgICAgICAgICBnZW9tZXRyeVNlcnZpY2U6IG1vZHVsZXNbMF0sXHJcbiAgICAgICAgICBidWZmZXJQYXJhbWV0ZXJzOiBtb2R1bGVzWzFdXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IHsgZ2VvbWV0cnlTZXJ2aWNlLCBidWZmZXJQYXJhbWV0ZXJzOiBCdWZmZXJQYXJhbWV0ZXJzIH0gPSBnZW9tZXRyeVNlcnZpY2VSZWYuY3VycmVudFxyXG4gICAgICBjb25zdCBwb2x5Z29ucyA9IGF3YWl0IGdlb21ldHJ5U2VydmljZS5idWZmZXIoc2VydmljZVVybCwgbmV3IEJ1ZmZlclBhcmFtZXRlcnMoe1xyXG4gICAgICAgIGRpc3RhbmNlczogW2J1ZmZlckRpc3RhbmNlUmVmLmN1cnJlbnRdLFxyXG4gICAgICAgIHVuaXQ6IGxvZGFzaC5rZWJhYkNhc2UoYnVmZmVyVW5pdFJlZi5jdXJyZW50KSBhcyBhbnksXHJcbiAgICAgICAgZ2VvZGVzaWM6IHRydWUsXHJcbiAgICAgICAgYnVmZmVyU3BhdGlhbFJlZmVyZW5jZTogZ2VvbWV0cnkuc3BhdGlhbFJlZmVyZW5jZSxcclxuICAgICAgICBvdXRTcGF0aWFsUmVmZXJlbmNlOiBnZW9tZXRyeS5zcGF0aWFsUmVmZXJlbmNlLFxyXG4gICAgICAgIGdlb21ldHJpZXM6IFtnZW9tZXRyeV1cclxuICAgICAgfSkpXHJcbiAgICAgIGJ1ZmZlcmVkR3JhcGhpY1JlZi5jdXJyZW50Lmdlb21ldHJ5ID0gcG9seWdvbnNbMF1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlmIChnZW9tZXRyeS5zcGF0aWFsUmVmZXJlbmNlPy5pc1dHUzg0IHx8IGdlb21ldHJ5LnNwYXRpYWxSZWZlcmVuY2U/LmlzV2ViTWVyY2F0b3IpIHtcclxuICAgICAgICBpZiAoIWdlb2Rlc2ljQnVmZmVyT3BlcmF0b3JSZWYuY3VycmVudCkge1xyXG4gICAgICAgICAgZ2VvZGVzaWNCdWZmZXJPcGVyYXRvclJlZi5jdXJyZW50ID0gYXdhaXQgbG9hZEFyY0dJU0pTQVBJTW9kdWxlKCdlc3JpL2dlb21ldHJ5L29wZXJhdG9ycy9nZW9kZXNpY0J1ZmZlck9wZXJhdG9yJylcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFnZW9kZXNpY0J1ZmZlck9wZXJhdG9yUmVmLmN1cnJlbnQuaXNMb2FkZWQoKSkge1xyXG4gICAgICAgICAgYXdhaXQgZ2VvZGVzaWNCdWZmZXJPcGVyYXRvclJlZi5jdXJyZW50LmxvYWQoKVxyXG4gICAgICAgIH1cclxuICAgICAgICBidWZmZXJlZEdyYXBoaWNSZWYuY3VycmVudC5nZW9tZXRyeSA9IGdlb2Rlc2ljQnVmZmVyT3BlcmF0b3JSZWYuY3VycmVudC5leGVjdXRlKFxyXG4gICAgICAgICAgZ2VvbWV0cnkgYXMgX19lc3JpLkdlb21ldHJ5VW5pb24sXHJcbiAgICAgICAgICBidWZmZXJEaXN0YW5jZVJlZi5jdXJyZW50LFxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICB1bml0OiBsb2Rhc2gua2ViYWJDYXNlKGJ1ZmZlclVuaXRSZWYuY3VycmVudCkgYXMgYW55XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgKVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmICghYnVmZmVyT3BlcmF0b3JSZWYuY3VycmVudCkge1xyXG4gICAgICAgICAgYnVmZmVyT3BlcmF0b3JSZWYuY3VycmVudCA9IGF3YWl0IGxvYWRBcmNHSVNKU0FQSU1vZHVsZSgnZXNyaS9nZW9tZXRyeS9vcGVyYXRvcnMvYnVmZmVyT3BlcmF0b3InKVxyXG4gICAgICAgIH1cclxuICAgICAgICBidWZmZXJlZEdyYXBoaWNSZWYuY3VycmVudC5nZW9tZXRyeSA9IGJ1ZmZlck9wZXJhdG9yUmVmLmN1cnJlbnQuZXhlY3V0ZShcclxuICAgICAgICAgIGdlb21ldHJ5IGFzIF9fZXNyaS5HZW9tZXRyeVVuaW9uLFxyXG4gICAgICAgICAgYnVmZmVyRGlzdGFuY2VSZWYuY3VycmVudCxcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgdW5pdDogbG9kYXNoLmtlYmFiQ2FzZShidWZmZXJVbml0UmVmLmN1cnJlbnQpIGFzIGFueVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIClcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0sIFtlbmFibGVCdWZmZXJdKVxyXG5cclxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgaWYgKHF1ZXJ5VGFza0NvbnRleHQucmVzZXRTeW1ib2wgJiYgcXVlcnlUYXNrQ29udGV4dC5yZXNldFN5bWJvbCAhPT0gcmVzZXRTeW1ib2xSZWYuY3VycmVudCkge1xyXG4gICAgICByZXNldFN5bWJvbFJlZi5jdXJyZW50ID0gcXVlcnlUYXNrQ29udGV4dC5yZXNldFN5bWJvbFxyXG4gICAgICBnZXRMYXllckZ1blJlZi5jdXJyZW50ICYmIGdldExheWVyRnVuUmVmLmN1cnJlbnQoKS5yZW1vdmVBbGwoKVxyXG4gICAgICBvbkdlb21ldHJ5Q2hhbmdlKG51bGwpXHJcbiAgICB9XHJcbiAgfSwgW3F1ZXJ5VGFza0NvbnRleHQucmVzZXRTeW1ib2wsIG9uR2VvbWV0cnlDaGFuZ2VdKVxyXG5cclxuICBjb25zdCBoYW5kbGVKaW11TWFwVmlld0NoYW5nZWQgPSBSZWFjdC51c2VDYWxsYmFjaygoamltdU1hcFZpZXc6IEppbXVNYXBWaWV3KSA9PiB7XHJcbiAgICAvLyBjbGVhciBkcmF3aW5nIGdyYXBoaWNzIGJlZm9yZSBzd2l0Y2hpbmcgbWFwIHZpZXdcclxuICAgIGNvbnN0IGxheWVyID0gZ2V0TGF5ZXJGdW5SZWYuY3VycmVudCAmJiBnZXRMYXllckZ1blJlZi5jdXJyZW50KClcclxuICAgIGlmIChsYXllcikge1xyXG4gICAgICBsYXllci5yZW1vdmVBbGwoKVxyXG4gICAgICBvbkdlb21ldHJ5Q2hhbmdlKG51bGwpXHJcbiAgICB9XHJcbiAgICBzZXRKaW11TWFwVmlldyhqaW11TWFwVmlldz8udmlldyAhPSBudWxsID8gamltdU1hcFZpZXcgOiBudWxsKVxyXG4gIH0sIFtvbkdlb21ldHJ5Q2hhbmdlXSlcclxuXHJcbiAgY29uc3QgaGFuZGxlQnVmZmVyQ2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soKGRpc3RhbmNlLCB1bml0KSA9PiB7XHJcbiAgICBidWZmZXJEaXN0YW5jZVJlZi5jdXJyZW50ID0gZGlzdGFuY2VcclxuICAgIGJ1ZmZlclVuaXRSZWYuY3VycmVudCA9IHVuaXRcclxuICAgIGFwcGx5QnVmZmVyRWZmZWN0KClcclxuICAgIG9uQnVmZmVyQ2hhbmdlKGRpc3RhbmNlLCB1bml0KVxyXG4gIH0sIFtvbkJ1ZmZlckNoYW5nZSwgYXBwbHlCdWZmZXJFZmZlY3RdKVxyXG5cclxuICBjb25zdCBoYW5kbGVEcmF3RW5kID0gUmVhY3QudXNlQ2FsbGJhY2soKGdyYXBoaWMsIGdldExheWVyRnVuLCBjbGVhckFmdGVyQXBwbHkpID0+IHtcclxuICAgIGdldExheWVyRnVuUmVmLmN1cnJlbnQgPSBnZXRMYXllckZ1blxyXG4gICAgY29uc3QgbGF5ZXIgPSBnZXRMYXllckZ1blJlZi5jdXJyZW50ICYmIGdldExheWVyRnVuUmVmLmN1cnJlbnQoKVxyXG4gICAgLy8gaXQncyBwb3NzaWJsZSB0aGF0IHRoZSBnZW9tZXRyeSBpcyB0aGUgc2FtZSBhcyB0aGUgcHJldmlvdXMgb25lLCBvbmx5IHRoZSBjbGVhckFmdGVyQXBwbHkgaXMgY2hhbmdlZC5cclxuICAgIGlmIChnZW9tZXRyeVJlZi5jdXJyZW50ICE9PSBncmFwaGljPy5nZW9tZXRyeSkge1xyXG4gICAgICBnZW9tZXRyeVJlZi5jdXJyZW50ID0gZ3JhcGhpYz8uZ2VvbWV0cnlcclxuICAgICAgYXBwbHlCdWZmZXJFZmZlY3QoKS50aGVuKCgpID0+IHtcclxuICAgICAgICBpZiAoYnVmZmVyZWRHcmFwaGljUmVmLmN1cnJlbnQuZ2VvbWV0cnkpIHtcclxuICAgICAgICAgIGxheWVyPy5hZGQoYnVmZmVyZWRHcmFwaGljUmVmLmN1cnJlbnQpXHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gICAgb25HZW9tZXRyeUNoYW5nZShncmFwaGljPy5nZW9tZXRyeSwgbGF5ZXIsIGdyYXBoaWMsIGNsZWFyQWZ0ZXJBcHBseSlcclxuICB9LCBbb25HZW9tZXRyeUNoYW5nZSwgYXBwbHlCdWZmZXJFZmZlY3RdKVxyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPFJlYWN0LkZyYWdtZW50PlxyXG4gICAgICB7XHJcbiAgICAgICAgbWFwV2lkZ2V0SWRzPy5tYXAoKG1hcFdpZGdldElkLCB4KSA9PiAoXHJcbiAgICAgICAgICA8SmltdU1hcFZpZXdDb21wb25lbnRcclxuICAgICAgICAgICAga2V5PXt4fSB1c2VNYXBXaWRnZXRJZD17bWFwV2lkZ2V0SWR9IG9uQWN0aXZlVmlld0NoYW5nZT17aGFuZGxlSmltdU1hcFZpZXdDaGFuZ2VkfVxyXG4gICAgICAgICAgLz5cclxuICAgICAgICApKVxyXG4gICAgICB9XHJcbiAgICAgIHtqaW11TWFwVmlldz8udmlldyAmJiAoXHJcbiAgICAgICAgPFJlYWN0LkZyYWdtZW50PlxyXG4gICAgICAgICAgPEludGVyYWN0aXZlRHJhd1xyXG4gICAgICAgICAgICBqaW11TWFwVmlldz17amltdU1hcFZpZXd9XHJcbiAgICAgICAgICAgIHdpZGdldElkPXt3aWRnZXRJZH1cclxuICAgICAgICAgICAgdG9vbFR5cGVzPXtjcmVhdGVUb29sVHlwZXN9XHJcbiAgICAgICAgICAgIG9uRHJhd0VuZD17aGFuZGxlRHJhd0VuZH1cclxuICAgICAgICAgIC8+XHJcbiAgICAgICAgICB7ZW5hYmxlQnVmZmVyICYmIChcclxuICAgICAgICAgICAgPGRpdiByb2xlPSdncm91cCcgY2xhc3NOYW1lPSd0aXRsZTMnIGFyaWEtbGFiZWw9e2dldEkxOG5NZXNzYWdlKCd0aGVCdWZmZXJEaXN0YW5jZScpfSBjc3M9e2Nzc2BtYXJnaW4tdG9wOiAwLjc1cmVtO2B9PlxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd0ZXh0LXRydW5jYXRlJz57Z2V0STE4bk1lc3NhZ2UoJ3RoZUJ1ZmZlckRpc3RhbmNlJyl9PC9kaXY+XHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2QtZmxleCBtdC0xJz5cclxuICAgICAgICAgICAgICAgIDxCdWZmZXJJbnB1dCBkaXN0YW5jZT17YnVmZmVyRGlzdGFuY2V9IHVuaXQ9e2J1ZmZlclVuaXR9IG9uQnVmZmVyQ2hhbmdlPXtoYW5kbGVCdWZmZXJDaGFuZ2V9Lz5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICApfVxyXG4gICAgICAgIDwvUmVhY3QuRnJhZ21lbnQ+XHJcbiAgICAgICl9XHJcbiAgICA8L1JlYWN0LkZyYWdtZW50PlxyXG4gIClcclxufVxyXG4iLCIvKiogQGpzeCBqc3ggKi9cclxuaW1wb3J0IHtcclxuICBSZWFjdCxcclxuICBSZWFjdFJlZHV4LFxyXG4gIGpzeCxcclxuICBjc3MsXHJcbiAgSW1tdXRhYmxlLFxyXG4gIHR5cGUgSW1tdXRhYmxlQXJyYXksXHJcbiAgdHlwZSBVc2VEYXRhU291cmNlLFxyXG4gIHR5cGUgRmVhdHVyZURhdGFSZWNvcmQsXHJcbiAgRGF0YVNvdXJjZU1hbmFnZXIsXHJcbiAgRGF0YVNvdXJjZUNvbXBvbmVudCxcclxuICBob29rcyxcclxuICB0eXBlIERhdGFTb3VyY2UsXHJcbiAgdHlwZSBJTVN0YXRlLFxyXG4gIERhdGFTb3VyY2VTdGF0dXNcclxufSBmcm9tICdqaW11LWNvcmUnXHJcbmltcG9ydCB7IFNlbGVjdCwgT3B0aW9uLCBkZWZhdWx0TWVzc2FnZXMgYXMgamltdVVJTWVzc2FnZXMgfSBmcm9tICdqaW11LXVpJ1xyXG5pbXBvcnQgeyBTcGF0aWFsUmVsYXRpb24sIHR5cGUgVW5pdFR5cGUgfSBmcm9tICcuLi9jb25maWcnXHJcbmltcG9ydCB7IEJ1ZmZlcklucHV0IH0gZnJvbSAnLi9idWZmZXItaW5wdXQnXHJcbmltcG9ydCBkZWZhdWx0TWVzc2FnZSBmcm9tICcuL3RyYW5zbGF0aW9ucy9kZWZhdWx0J1xyXG5pbXBvcnQgeyBRdWVyeVRhc2tDb250ZXh0IH0gZnJvbSAnLi9xdWVyeS10YXNrLWNvbnRleHQnXHJcblxyXG5jb25zdCBtYXJnaW5TdHlsZSA9IGNzc2BtYXJnaW4tdG9wOiAwLjc1cmVtO2BcclxuZXhwb3J0IGludGVyZmFjZSBQcm9wcyB7XHJcbiAgc3BhdGlhbFJlbGF0aW9uczogSW1tdXRhYmxlQXJyYXk8U3BhdGlhbFJlbGF0aW9uPlxyXG4gIHVzZURhdGFTb3VyY2VzOiBJbW11dGFibGVBcnJheTxVc2VEYXRhU291cmNlPlxyXG4gIHVzZVJ1bnRpbWVEYXRhOiBib29sZWFuXHJcbiAgZW5hYmxlQnVmZmVyOiBib29sZWFuXHJcbiAgYnVmZmVyRGlzdGFuY2U6IG51bWJlclxyXG4gIGJ1ZmZlclVuaXQ6IFVuaXRUeXBlXHJcbiAgb25TZWxlY3Rpb25DaGFuZ2U6IChnZW9tczogX19lc3JpLkdlb21ldHJ5W10pID0+IHZvaWRcclxuICBvblJlbGF0aW9uQ2hhbmdlOiAocmVsOiBTcGF0aWFsUmVsYXRpb24pID0+IHZvaWRcclxuICBvbkJ1ZmZlckNoYW5nZTogKGRpc3RhbmNlOiBudW1iZXIsIHVuaXQ6IFVuaXRUeXBlKSA9PiB2b2lkXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFJ1bnRpbWVEYXRhU291cmNlICgpOiB7IFtkc0lkOiBzdHJpbmddOiBEYXRhU291cmNlIH0ge1xyXG4gIGNvbnN0IHJlc3VsdCA9IHt9XHJcbiAgbGV0IG5vdEVtcHR5ID0gZmFsc2VcclxuICBjb25zdCBkc01hcCA9IERhdGFTb3VyY2VNYW5hZ2VyLmdldEluc3RhbmNlKCkuZ2V0RGF0YVNvdXJjZXMoKVxyXG4gIE9iamVjdC5rZXlzKGRzTWFwKS5mb3JFYWNoKGRzSWQgPT4ge1xyXG4gICAgY29uc3QgZHMgPSBkc01hcFtkc0lkXVxyXG4gICAgLy8gb25seSBpbmNsdWRlIHRoZSBkcyB0aGF0IGhhcyBnZW9tZXRyeVxyXG4gICAgaWYgKGRzLmdldEdlb21ldHJ5VHlwZSgpICE9IG51bGwgJiYgIWRzLmlzSW5BcHBDb25maWcoKSAmJiBkcy5nZXRNYWluRGF0YVNvdXJjZSgpLmlkID09PSBkc0lkICYmICFkcy5nZXREYXRhU291cmNlSnNvbigpLmlzT3V0cHV0RnJvbVdpZGdldCkge1xyXG4gICAgICByZXN1bHRbZHNJZF0gPSBkc1xyXG4gICAgICBub3RFbXB0eSA9IHRydWVcclxuICAgIH1cclxuICB9KVxyXG5cclxuICByZXR1cm4gbm90RW1wdHkgPyByZXN1bHQgOiBudWxsXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBHZW9tZXRyeUZyb21EYXRhU291cmNlIChwcm9wczogUHJvcHMpIHtcclxuICBjb25zdCB7IG9uU2VsZWN0aW9uQ2hhbmdlLCB1c2VEYXRhU291cmNlcyA9IFtdLCB1c2VSdW50aW1lRGF0YSwgc3BhdGlhbFJlbGF0aW9ucywgZW5hYmxlQnVmZmVyLCBidWZmZXJEaXN0YW5jZSwgYnVmZmVyVW5pdCwgb25CdWZmZXJDaGFuZ2UsIG9uUmVsYXRpb25DaGFuZ2UgfSA9IHByb3BzXHJcbiAgY29uc3QgZ2V0STE4bk1lc3NhZ2UgPSBob29rcy51c2VUcmFuc2xhdGlvbihqaW11VUlNZXNzYWdlcywgZGVmYXVsdE1lc3NhZ2UpXHJcbiAgY29uc3QgW2N1cnJlbnREYXRhU291cmNlLCBzZXRDdXJyZW50RGF0YVNvdXJjZV0gPSBSZWFjdC51c2VTdGF0ZSh1c2VEYXRhU291cmNlc1swXSlcclxuICBjb25zdCBbcnVudGltZURhdGFTb3VyY2UsIHNldFJ1bnRpbWVEYXRhU291cmNlXSA9IFJlYWN0LnVzZVN0YXRlPERhdGFTb3VyY2U+KClcclxuICBjb25zdCBbY291bnQsIHNldENvdW50XSA9IFJlYWN0LnVzZVN0YXRlKDApXHJcbiAgY29uc3QgW2N1cnJlbnRSZWxhdGlvbiwgc2V0Q3VycmVudFJlbGF0aW9uXSA9IFJlYWN0LnVzZVN0YXRlKHNwYXRpYWxSZWxhdGlvbnM/LlswXSlcclxuICBjb25zdCBxdWVyeVRhc2tDb250ZXh0ID0gUmVhY3QudXNlQ29udGV4dChRdWVyeVRhc2tDb250ZXh0KVxyXG4gIGNvbnN0IHJlc2V0U3ltYm9sUmVmID0gUmVhY3QudXNlUmVmKHF1ZXJ5VGFza0NvbnRleHQucmVzZXRTeW1ib2wpXHJcbiAgY29uc3QgdHJhbnNsYXRlID0gaG9va3MudXNlVHJhbnNsYXRpb24oKVxyXG5cclxuICBjb25zdCBzcGF0aWFsUmVsYXRpb25PcHRpb25zOiBBcnJheTx7IHZhbHVlOiBzdHJpbmcsIGxhYmVsOiBzdHJpbmcgfT4gPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcclxuICAgIHJldHVybiBPYmplY3QuZW50cmllcyhTcGF0aWFsUmVsYXRpb24pLm1hcCgoW2tleSwgdmFsdWVdKSA9PiAoe1xyXG4gICAgICB2YWx1ZSxcclxuICAgICAgbGFiZWw6IGdldEkxOG5NZXNzYWdlKGBzcGF0aWFsUmVsYXRpb25fJHtrZXl9YClcclxuICAgIH0pKVxyXG4gIH0sIFtnZXRJMThuTWVzc2FnZV0pXHJcblxyXG4gIGNvbnN0IGxvYWRlZFVzZURhdGFTb3VyY2VzID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcclxuICAgIGNvbnN0IGxvYWRlZCA9IFtdXHJcbiAgICB1c2VEYXRhU291cmNlcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIGlmIChzdGF0ZS5kYXRhU291cmNlc0luZm8/LltpdGVtLm1haW5EYXRhU291cmNlSWRdPy5pbnN0YW5jZVN0YXR1cyA9PT0gRGF0YVNvdXJjZVN0YXR1cy5DcmVhdGVkKSB7XHJcbiAgICAgICAgbG9hZGVkLnB1c2goaXRlbS5kYXRhU291cmNlSWQpXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgICBpZiAobG9hZGVkLmxlbmd0aCA+IDApIHtcclxuICAgICAgcmV0dXJuIGxvYWRlZC5qb2luKCcsJylcclxuICAgIH1cclxuICAgIHJldHVybiAnJ1xyXG4gIH0pXHJcblxyXG4gIGNvbnN0IG51bU9mRHMgPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xyXG4gICAgaWYgKCF1c2VSdW50aW1lRGF0YSkge1xyXG4gICAgICByZXR1cm4gMFxyXG4gICAgfVxyXG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKHN0YXRlLmRhdGFTb3VyY2VzSW5mbyA/PyB7fSkuZmlsdGVyKGRzSWQgPT4gc3RhdGUuZGF0YVNvdXJjZXNJbmZvW2RzSWRdLmluc3RhbmNlU3RhdHVzID09PSBEYXRhU291cmNlU3RhdHVzLkNyZWF0ZWQpLmxlbmd0aFxyXG4gIH0pXHJcblxyXG4gIGNvbnN0IHJ1bnRpbWVEYXRhU291cmNlcyA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xyXG4gICAgaWYgKG51bU9mRHMgPiAwKSB7XHJcbiAgICAgIHJldHVybiBnZXRSdW50aW1lRGF0YVNvdXJjZSgpXHJcbiAgICB9XHJcbiAgfSwgW251bU9mRHNdKVxyXG5cclxuICBjb25zdCBudW1PZlJ1bnRpbWVEcyA9IE9iamVjdC5rZXlzKHJ1bnRpbWVEYXRhU291cmNlcyA/PyB7fSkubGVuZ3RoXHJcblxyXG4gIGhvb2tzLnVzZUVmZmVjdE9uY2UoKCkgPT4ge1xyXG4gICAgaWYgKHNwYXRpYWxSZWxhdGlvbnM/Lmxlbmd0aCA+IDApIHtcclxuICAgICAgb25SZWxhdGlvbkNoYW5nZShzcGF0aWFsUmVsYXRpb25zWzBdKVxyXG4gICAgfVxyXG4gICAgaWYgKGVuYWJsZUJ1ZmZlcikge1xyXG4gICAgICBvbkJ1ZmZlckNoYW5nZShidWZmZXJEaXN0YW5jZSwgYnVmZmVyVW5pdClcclxuICAgIH1cclxuICB9KVxyXG5cclxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgaWYgKHF1ZXJ5VGFza0NvbnRleHQucmVzZXRTeW1ib2wgJiYgcXVlcnlUYXNrQ29udGV4dC5yZXNldFN5bWJvbCAhPT0gcmVzZXRTeW1ib2xSZWYuY3VycmVudCkge1xyXG4gICAgICByZXNldFN5bWJvbFJlZi5jdXJyZW50ID0gcXVlcnlUYXNrQ29udGV4dC5yZXNldFN5bWJvbFxyXG4gICAgICBzZXRDdXJyZW50UmVsYXRpb24oc3BhdGlhbFJlbGF0aW9ucz8uWzBdKVxyXG4gICAgICBvblJlbGF0aW9uQ2hhbmdlKHNwYXRpYWxSZWxhdGlvbnM/LlswXSlcclxuICAgIH1cclxuICB9LCBbcXVlcnlUYXNrQ29udGV4dC5yZXNldFN5bWJvbCwgb25SZWxhdGlvbkNoYW5nZSwgc3BhdGlhbFJlbGF0aW9uc10pXHJcblxyXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpZiAoIXNwYXRpYWxSZWxhdGlvbnMpIHtcclxuICAgICAgc2V0Q3VycmVudFJlbGF0aW9uKG51bGwpXHJcbiAgICB9IGVsc2UgaWYgKCFzcGF0aWFsUmVsYXRpb25zLmluY2x1ZGVzKGN1cnJlbnRSZWxhdGlvbikpIHtcclxuICAgICAgc2V0Q3VycmVudFJlbGF0aW9uKHNwYXRpYWxSZWxhdGlvbnNbMF0pXHJcbiAgICAgIG9uUmVsYXRpb25DaGFuZ2Uoc3BhdGlhbFJlbGF0aW9uc1swXSlcclxuICAgIH1cclxuICB9LCBbc3BhdGlhbFJlbGF0aW9ucywgY3VycmVudFJlbGF0aW9uLCBvblJlbGF0aW9uQ2hhbmdlXSlcclxuXHJcbiAgY29uc3QgaGFuZGxlRGF0YVNvdXJjZUNoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKFxyXG4gICAgKGRzSWQ6IHN0cmluZykgPT4ge1xyXG4gICAgICBjb25zdCBkcyA9IHVzZURhdGFTb3VyY2VzLmZpbmQoKGl0ZW0pID0+IGl0ZW0uZGF0YVNvdXJjZUlkID09PSBkc0lkKVxyXG4gICAgICBzZXRDdXJyZW50RGF0YVNvdXJjZShJbW11dGFibGUoZHMpKVxyXG4gICAgICBzZXRSdW50aW1lRGF0YVNvdXJjZShudWxsKVxyXG4gICAgfSxcclxuICAgIFt1c2VEYXRhU291cmNlc11cclxuICApXHJcblxyXG4gIGNvbnN0IGhhbmRsZVJ1bnRpbWVEYXRhU291cmNlQ2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soXHJcbiAgICAoZHNJZDogc3RyaW5nKSA9PiB7XHJcbiAgICAgIGNvbnN0IGRzID0gRGF0YVNvdXJjZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5nZXREYXRhU291cmNlKGRzSWQpXHJcbiAgICAgIHNldFJ1bnRpbWVEYXRhU291cmNlKGRzKVxyXG4gICAgICBzZXRDdXJyZW50RGF0YVNvdXJjZShudWxsKVxyXG4gICAgfSxcclxuICAgIFtdXHJcbiAgKVxyXG5cclxuICBjb25zdCBoYW5kbGVEYXRhU291cmNlSW5mb0NoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKCgpID0+IHtcclxuICAgIGNvbnN0IGRzID0gRGF0YVNvdXJjZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5nZXREYXRhU291cmNlKGN1cnJlbnREYXRhU291cmNlPy5kYXRhU291cmNlSWQgPz8gcnVudGltZURhdGFTb3VyY2U/LmlkKVxyXG4gICAgY29uc3QgcmVjb3JkcyA9IGRzPy5nZXRTZWxlY3RlZFJlY29yZHMoKSBhcyBGZWF0dXJlRGF0YVJlY29yZFtdXHJcbiAgICBpZiAocmVjb3Jkcz8ubGVuZ3RoID4gMCkge1xyXG4gICAgICBjb25zdCBnZW9tZXRyaWVzID0gcmVjb3Jkcy5tYXAoKHJlY29yZCkgPT4gcmVjb3JkLmdldEpTQVBJR2VvbWV0cnkoKSlcclxuICAgICAgb25TZWxlY3Rpb25DaGFuZ2UoZ2VvbWV0cmllcylcclxuICAgICAgc2V0Q291bnQocmVjb3Jkcy5sZW5ndGgpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBvblNlbGVjdGlvbkNoYW5nZShudWxsKVxyXG4gICAgICBzZXRDb3VudCgwKVxyXG4gICAgfVxyXG4gIH0sIFtjdXJyZW50RGF0YVNvdXJjZT8uZGF0YVNvdXJjZUlkLCBydW50aW1lRGF0YVNvdXJjZT8uaWQsIG9uU2VsZWN0aW9uQ2hhbmdlXSlcclxuXHJcbiAgY29uc3QgZ2V0TGFiZWxPZlNwYXRpYWxSZWxhdGlvbiA9IChyZWxhdGlvbjogc3RyaW5nKTogc3RyaW5nID0+IHtcclxuICAgIHJldHVybiBzcGF0aWFsUmVsYXRpb25PcHRpb25zLmZpbmQoaXRlbSA9PiBpdGVtLnZhbHVlID09PSByZWxhdGlvbikubGFiZWxcclxuICB9XHJcblxyXG4gIGNvbnN0IGhhbmRsZVNwYXRpYWxSZWxhdGlvbkNoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKGUgPT4ge1xyXG4gICAgc2V0Q3VycmVudFJlbGF0aW9uKGUudGFyZ2V0LnZhbHVlKVxyXG4gICAgb25SZWxhdGlvbkNoYW5nZShlLnRhcmdldC52YWx1ZSlcclxuICB9LCBbb25SZWxhdGlvbkNoYW5nZV0pXHJcblxyXG4gIHJldHVybiAoXHJcbiAgICA8ZGl2PlxyXG4gICAgICA8ZGl2IGNzcz17bWFyZ2luU3R5bGV9IGNsYXNzTmFtZT0ndGl0bGUzJz57Z2V0STE4bk1lc3NhZ2UoJ2Nob29zZUZpbHRlckxheWVyJyl9PC9kaXY+XHJcbiAgICAgIDxTZWxlY3RcclxuICAgICAgICBhcmlhLWxhYmVsPXtnZXRJMThuTWVzc2FnZSgnY2hvb3NlRmlsdGVyTGF5ZXInKX1cclxuICAgICAgICB2YWx1ZT17Y3VycmVudERhdGFTb3VyY2U/LmRhdGFTb3VyY2VJZCA/PyBydW50aW1lRGF0YVNvdXJjZT8uaWR9XHJcbiAgICAgID5cclxuICAgICAgICB7bnVtT2ZSdW50aW1lRHMgPiAwICYmIHVzZURhdGFTb3VyY2VzLmxlbmd0aCA+IDAgJiYgPE9wdGlvbiBoZWFkZXI+e2dldEkxOG5NZXNzYWdlKCdwcmVjb25maWd1cmVkJyl9PC9PcHRpb24+fVxyXG4gICAgICAgIHt1c2VEYXRhU291cmNlcy5tYXAoKGl0ZW0pID0+IHtcclxuICAgICAgICAgIGNvbnN0IGRzID0gRGF0YVNvdXJjZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5nZXREYXRhU291cmNlKGl0ZW0uZGF0YVNvdXJjZUlkKVxyXG4gICAgICAgICAgaWYgKGxvYWRlZFVzZURhdGFTb3VyY2VzLmluY2x1ZGVzKGl0ZW0uZGF0YVNvdXJjZUlkKSB8fCBkcz8uZ2V0TGFiZWwoKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgIDxPcHRpb24ga2V5PXtpdGVtLmRhdGFTb3VyY2VJZH0gdmFsdWU9e2l0ZW0uZGF0YVNvdXJjZUlkfSBvbkNsaWNrPXsoKSA9PiB7IGhhbmRsZURhdGFTb3VyY2VDaGFuZ2UoaXRlbS5kYXRhU291cmNlSWQpIH19PlxyXG4gICAgICAgICAgICAgIHtkcz8uZ2V0TGFiZWwoKX1cclxuICAgICAgICAgICAgICA8L09wdGlvbj5cclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPE9wdGlvbiBrZXk9e2l0ZW0uZGF0YVNvdXJjZUlkfT5cclxuICAgICAgICAgICAgICB7dHJhbnNsYXRlKCdsb2FkaW5nJyl9XHJcbiAgICAgICAgICAgIDwvT3B0aW9uPlxyXG4gICAgICAgICAgKVxyXG4gICAgICAgIH0pfVxyXG4gICAgICAgIHtudW1PZlJ1bnRpbWVEcyA+IDAgJiYgdXNlRGF0YVNvdXJjZXMubGVuZ3RoID4gMCAmJiA8T3B0aW9uIGRpdmlkZXIvPn1cclxuICAgICAgICB7bnVtT2ZSdW50aW1lRHMgPiAwICYmIDxPcHRpb24gaGVhZGVyPntnZXRJMThuTWVzc2FnZSgncnVudGltZScpfTwvT3B0aW9uPn1cclxuICAgICAgICB7T2JqZWN0LmtleXMocnVudGltZURhdGFTb3VyY2VzID8/IHt9KS5tYXAoZHNJZCA9PiB7XHJcbiAgICAgICAgICBjb25zdCBkcyA9IHJ1bnRpbWVEYXRhU291cmNlc1tkc0lkXVxyXG4gICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPE9wdGlvbiBrZXk9e2RzSWR9IHZhbHVlPXtkc0lkfSBvbkNsaWNrPXsoKSA9PiB7IGhhbmRsZVJ1bnRpbWVEYXRhU291cmNlQ2hhbmdlKGRzSWQpIH19PlxyXG4gICAgICAgICAgICAgIHtkcy5nZXRMYWJlbCgpfVxyXG4gICAgICAgICAgICA8L09wdGlvbj5cclxuICAgICAgICAgIClcclxuICAgICAgICB9KX1cclxuICAgICAgPC9TZWxlY3Q+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdtdC0xIGZvbnQtaXRhbGljJyBjc3M9e2Nzc2Bjb2xvcjogdmFyKC0tc3lzLWNvbG9yLXN1cmZhY2UtcGFwZXItaGludCk7YH0+e2dldEkxOG5NZXNzYWdlKCdzZWxlY3RlZFJlY29yZHMnLCB7IG51bTogY291bnQgfSl9PC9kaXY+XHJcbiAgICAgIHtzcGF0aWFsUmVsYXRpb25zPy5sZW5ndGggPiAwICYmIChcclxuICAgICAgICA8ZGl2IGNzcz17bWFyZ2luU3R5bGV9PlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3RleHQtdHJ1bmNhdGUgdGl0bGUzIG1iLTAnPntnZXRJMThuTWVzc2FnZSgncmVsYXRpb25zaGlwJyl9PC9kaXY+XHJcbiAgICAgICAgICA8U2VsZWN0XHJcbiAgICAgICAgICAgIGFyaWEtbGFiZWw9e2dldEkxOG5NZXNzYWdlKCdyZWxhdGlvbnNoaXAnKX1cclxuICAgICAgICAgICAgdmFsdWU9e2N1cnJlbnRSZWxhdGlvbn1cclxuICAgICAgICAgICAgb25DaGFuZ2U9e2hhbmRsZVNwYXRpYWxSZWxhdGlvbkNoYW5nZX1cclxuICAgICAgICAgID5cclxuICAgICAgICAgICAge3NwYXRpYWxSZWxhdGlvbnMubWFwKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgIDxvcHRpb24ga2V5PXtpdGVtfSB2YWx1ZT17aXRlbX0+e2dldExhYmVsT2ZTcGF0aWFsUmVsYXRpb24oaXRlbSl9PC9vcHRpb24+XHJcbiAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICB9KX1cclxuICAgICAgICAgIDwvU2VsZWN0PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICApfVxyXG4gICAgICB7ZW5hYmxlQnVmZmVyICYmIChcclxuICAgICAgICA8ZGl2IHJvbGU9J2dyb3VwJyBhcmlhLWxhYmVsPXtnZXRJMThuTWVzc2FnZSgndGhlQnVmZmVyRGlzdGFuY2UnKX0gY3NzPXttYXJnaW5TdHlsZX0+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndGl0bGUzIHRleHQtdHJ1bmNhdGUnPntnZXRJMThuTWVzc2FnZSgndGhlQnVmZmVyRGlzdGFuY2UnKX08L2Rpdj5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdkLWZsZXggbXQtMSc+XHJcbiAgICAgICAgICAgIDxCdWZmZXJJbnB1dCBkaXN0YW5jZT17YnVmZmVyRGlzdGFuY2V9IHVuaXQ9e2J1ZmZlclVuaXR9IG9uQnVmZmVyQ2hhbmdlPXtvbkJ1ZmZlckNoYW5nZX0vPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICl9XHJcbiAgICAgIDxEYXRhU291cmNlQ29tcG9uZW50IHVzZURhdGFTb3VyY2U9e2N1cnJlbnREYXRhU291cmNlfSBkYXRhU291cmNlPXtydW50aW1lRGF0YVNvdXJjZX0gb25EYXRhU291cmNlSW5mb0NoYW5nZT17aGFuZGxlRGF0YVNvdXJjZUluZm9DaGFuZ2V9IC8+XHJcbiAgICAgIHt1c2VEYXRhU291cmNlcy5tYXAoKGl0ZW0pID0+IHtcclxuICAgICAgICAvLyBtYWtlIHN1cmUgdGhlIGRhdGFzb3VyY2UgaXMgY3JlYXRlZFxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICA8RGF0YVNvdXJjZUNvbXBvbmVudCBrZXk9e2l0ZW0uZGF0YVNvdXJjZUlkfSB1c2VEYXRhU291cmNlPXtpdGVtfS8+XHJcbiAgICAgICAgKVxyXG4gICAgICB9KX1cclxuICAgIDwvZGl2PlxyXG4gIClcclxufVxyXG4iLCIvKiogQGpzeCBqc3ggKi9cclxuaW1wb3J0IHsgUmVhY3QsIGpzeCwgbG9hZEFyY0dJU0pTQVBJTW9kdWxlLCB0eXBlIEltbXV0YWJsZUFycmF5IH0gZnJvbSAnamltdS1jb3JlJ1xyXG5pbXBvcnQgeyBKaW11TWFwVmlld0NvbXBvbmVudCwgdHlwZSBKaW11TWFwVmlldywgbG9hZEFyY0dJU0pTQVBJTW9kdWxlcyB9IGZyb20gJ2ppbXUtYXJjZ2lzJ1xyXG5pbXBvcnQgdHlwZSB7IENyZWF0ZVRvb2xUeXBlIH0gZnJvbSAnLi4vY29uZmlnJ1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBQcm9wcyB7XHJcbiAgbWFwV2lkZ2V0SWRzOiBJbW11dGFibGVBcnJheTxzdHJpbmc+XHJcbiAgY3JlYXRlVG9vbFR5cGVzOiBJbW11dGFibGVBcnJheTxDcmVhdGVUb29sVHlwZT5cclxuICBvbkdlb21ldHJ5Q2hhbmdlOiAoZ2VvbTogX19lc3JpLkdlb21ldHJ5LCBsYXllcj86IF9fZXNyaS5HcmFwaGljc0xheWVyLCBncmFwaGljPzogX19lc3JpLkdyYXBoaWMsIGNsZWFyQWZ0ZXJBcHBseT86IGJvb2xlYW4pID0+IHZvaWRcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIEdlb21ldHJ5RnJvbU1hcCAocHJvcHM6IFByb3BzKSB7XHJcbiAgY29uc3QgeyBvbkdlb21ldHJ5Q2hhbmdlLCBtYXBXaWRnZXRJZHMgfSA9IHByb3BzXHJcbiAgY29uc3QgW2ppbXVNYXBWaWV3LCBzZXRKaW11TWFwVmlld10gPSBSZWFjdC51c2VTdGF0ZTxKaW11TWFwVmlldz4obnVsbClcclxuICBjb25zdCBQb2x5Z29uUmVmID0gUmVhY3QudXNlUmVmPHR5cGVvZiBfX2VzcmkuUG9seWdvbj4obnVsbClcclxuXHJcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGlmIChqaW11TWFwVmlldz8udmlldykge1xyXG4gICAgICBsZXQgaGFuZGxlcjogSUhhbmRsZVxyXG4gICAgICBsb2FkQXJjR0lTSlNBUElNb2R1bGUoJ2VzcmkvY29yZS9yZWFjdGl2ZVV0aWxzJykudGhlbigocmVhY3RpdmVVdGlsczogX19lc3JpLnJlYWN0aXZlVXRpbHMpID0+IHtcclxuICAgICAgICBoYW5kbGVyID0gcmVhY3RpdmVVdGlscy53YXRjaCgoKSA9PiBqaW11TWFwVmlldy52aWV3LmV4dGVudCwgKGV4dGVudDogX19lc3JpLkV4dGVudCkgPT4ge1xyXG4gICAgICAgICAgaWYgKFBvbHlnb25SZWYuY3VycmVudCkge1xyXG4gICAgICAgICAgICBvbkdlb21ldHJ5Q2hhbmdlKFBvbHlnb25SZWYuY3VycmVudC5mcm9tRXh0ZW50KGV4dGVudCkpXHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBsb2FkQXJjR0lTSlNBUElNb2R1bGVzKFsnZXNyaS9nZW9tZXRyeS9Qb2x5Z29uJ10pLnRoZW4obW9kdWxlcyA9PiB7XHJcbiAgICAgICAgICAgICAgUG9seWdvblJlZi5jdXJyZW50ID0gbW9kdWxlc1swXVxyXG4gICAgICAgICAgICAgIG9uR2VvbWV0cnlDaGFuZ2UoUG9seWdvblJlZi5jdXJyZW50LmZyb21FeHRlbnQoZXh0ZW50KSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgIC8vIHNldCBpbml0aWFsIGV4dGVudFxyXG4gICAgICAgIG9uR2VvbWV0cnlDaGFuZ2UoamltdU1hcFZpZXcudmlldy5leHRlbnQpXHJcbiAgICAgIH0pXHJcbiAgICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgICAgaWYgKGhhbmRsZXIpIHtcclxuICAgICAgICAgIGhhbmRsZXIucmVtb3ZlKClcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9LCBbamltdU1hcFZpZXcsIG9uR2VvbWV0cnlDaGFuZ2VdKVxyXG5cclxuICBjb25zdCBoYW5kbGVKaW11TWFwVmlld0NoYW5nZWQgPSBSZWFjdC51c2VDYWxsYmFjaygoamltdU1hcFZpZXc6IEppbXVNYXBWaWV3KSA9PiB7XHJcbiAgICBzZXRKaW11TWFwVmlldyhqaW11TWFwVmlldz8udmlldyAhPSBudWxsID8gamltdU1hcFZpZXcgOiBudWxsKVxyXG4gIH0sIFtdKVxyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPFJlYWN0LkZyYWdtZW50PlxyXG4gICAgICB7XHJcbiAgICAgICAgbWFwV2lkZ2V0SWRzPy5tYXAoKG1hcFdpZGdldElkLCB4KSA9PiAoXHJcbiAgICAgICAgICA8SmltdU1hcFZpZXdDb21wb25lbnRcclxuICAgICAgICAgICAga2V5PXt4fSB1c2VNYXBXaWRnZXRJZD17bWFwV2lkZ2V0SWR9IG9uQWN0aXZlVmlld0NoYW5nZT17aGFuZGxlSmltdU1hcFZpZXdDaGFuZ2VkfVxyXG4gICAgICAgICAgLz5cclxuICAgICAgICApKVxyXG4gICAgICB9XHJcbiAgICA8L1JlYWN0LkZyYWdtZW50PlxyXG4gIClcclxufVxyXG4iLCIvKipcbiAqIFV0aWxpdHkgZnVuY3Rpb25zIGZvciBtYW5hZ2luZyBncmFwaGljcyBsYXllciBoaWdobGlnaHRpbmcgaW4gUXVlcnlTaW1wbGUgd2lkZ2V0LlxuICogUHJvdmlkZXMgaGlnaGxpZ2h0aW5nIHRoYXQgd29ya3MgaW5kZXBlbmRlbnRseSBvZiBsYXllciB2aXNpYmlsaXR5LlxuICovXG5cbmltcG9ydCB0eXBlIHsgRGF0YVNvdXJjZSwgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSwgRmVhdHVyZURhdGFSZWNvcmQgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBEYXRhU291cmNlTWFuYWdlciB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IGxvYWRBcmNHSVNKU0FQSU1vZHVsZXMgfSBmcm9tICdqaW11LWFyY2dpcydcbmltcG9ydCB7IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIgfSBmcm9tICd3aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbidcblxuY29uc3QgZGVidWdMb2dnZXIgPSBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyKClcblxuLy8gR2xvYmFsIHNlcXVlbmNlIGNvdW50ZXIgZm9yIGdyYXBoaWNzIG9wZXJhdGlvbnMgdG8gdHJhY2sgdGltaW5nIGFjcm9zcyBjYWxsc1xubGV0IG9wZXJhdGlvblNlcXVlbmNlID0gMFxuXG4vKipcbiAqIEdldHMgdGhlIG1hcCB2aWV3IGZyb20gYSBkYXRhIHNvdXJjZSdzIG9yaWdpbiBsYXllci5cbiAqIEFjY2Vzc2VzIHRoZSB2aWV3IHRocm91Z2ggdGhlIEZlYXR1cmVMYXllcidzIHZpZXcgcHJvcGVydHkuXG4gKiBAcGFyYW0gb3V0cHV0RFMgLSBUaGUgb3V0cHV0IGRhdGEgc291cmNlIChvciBhbnkgZGF0YSBzb3VyY2UpXG4gKiBAcmV0dXJucyBQcm9taXNlIHJlc29sdmluZyB0byBNYXBWaWV3IG9yIFNjZW5lVmlldywgb3IgbnVsbCBpZiBub3QgYXZhaWxhYmxlXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRNYXBWaWV3RnJvbURhdGFTb3VyY2UoXG4gIG91dHB1dERTOiBEYXRhU291cmNlIHwgbnVsbCB8IHVuZGVmaW5lZFxuKTogUHJvbWlzZTxfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXcgfCBudWxsPiB7XG4gIGNvbnN0IHNlcSA9ICsrb3BlcmF0aW9uU2VxdWVuY2VcbiAgaWYgKCFvdXRwdXREUykge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICBldmVudDogJ2dldE1hcFZpZXdGcm9tRGF0YVNvdXJjZS1uby1vdXRwdXREUycsXG4gICAgICBzZXEsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICB0cnkge1xuICAgIC8vIEdldCBvcmlnaW4gZGF0YSBzb3VyY2UgdG8gYWNjZXNzIHRoZSBsYXllclxuICAgIGNvbnN0IG9yaWdpbkRhdGFTb3VyY2VzID0gb3V0cHV0RFMuZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKVxuICAgIGNvbnN0IG9yaWdpbkRTID0gb3JpZ2luRGF0YVNvdXJjZXM/LlswXSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gICAgXG4gICAgaWYgKCFvcmlnaW5EUykge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgICAgZXZlbnQ6ICdnZXRNYXBWaWV3RnJvbURhdGFTb3VyY2Utbm8tb3JpZ2luRFMnLFxuICAgICAgICBvdXRwdXREU0lkOiBvdXRwdXREUy5pZCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG5cbiAgICAvLyBBY2Nlc3MgdGhlIEZlYXR1cmVMYXllciBmcm9tIHRoZSBkYXRhIHNvdXJjZVxuICAgIGNvbnN0IGxheWVyID0gKG9yaWdpbkRTIGFzIGFueSkubGF5ZXIgfHwgKG9yaWdpbkRTIGFzIGFueSkuZ2V0TGF5ZXI/LigpXG4gICAgaWYgKCFsYXllcikge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgICAgZXZlbnQ6ICdnZXRNYXBWaWV3RnJvbURhdGFTb3VyY2Utbm8tbGF5ZXInLFxuICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG5cbiAgICAvLyBMb2cgbGF5ZXIgcHJvcGVydGllcyB0byB1bmRlcnN0YW5kIHN0cnVjdHVyZVxuICAgIGNvbnN0IGxheWVyS2V5cyA9IE9iamVjdC5rZXlzKGxheWVyKS5maWx0ZXIoa2V5ID0+IFxuICAgICAgIWtleS5zdGFydHNXaXRoKCdfJykgJiYgXG4gICAgICB0eXBlb2YgKGxheWVyIGFzIGFueSlba2V5XSAhPT0gJ2Z1bmN0aW9uJ1xuICAgICkuc2xpY2UoMCwgMjApIC8vIExpbWl0IHRvIGZpcnN0IDIwIHByb3BlcnRpZXNcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgZXZlbnQ6ICdnZXRNYXBWaWV3RnJvbURhdGFTb3VyY2UtbGF5ZXItaW5zcGVjdGlvbicsXG4gICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgIGxheWVySWQ6IGxheWVyLmlkLFxuICAgICAgbGF5ZXJUeXBlOiBsYXllci50eXBlIHx8ICd1bmtub3duJyxcbiAgICAgIGxheWVyS2V5czogbGF5ZXJLZXlzLFxuICAgICAgaGFzTGF5ZXJNYXA6ICEhKGxheWVyIGFzIGFueSkubWFwLFxuICAgICAgaGFzTGF5ZXJWaWV3OiAhIShsYXllciBhcyBhbnkpLnZpZXcsXG4gICAgICBoYXNMYXllclBhcmVudDogISEobGF5ZXIgYXMgYW55KS5wYXJlbnQsXG4gICAgICBsYXllck1hcFR5cGU6IChsYXllciBhcyBhbnkpLm1hcCA/IHR5cGVvZiAobGF5ZXIgYXMgYW55KS5tYXAgOiAnbm9uZScsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuXG4gICAgLy8gQ2hlY2sgbGF5ZXIucGFyZW50IGZvciBtYXAvdmlldyBhY2Nlc3MgKHNpbmNlIGhhc0xheWVyUGFyZW50IGlzIHRydWUpXG4gICAgY29uc3QgcGFyZW50ID0gKGxheWVyIGFzIGFueSkucGFyZW50XG4gICAgaWYgKHBhcmVudCkge1xuICAgICAgLy8gTG9nIHBhcmVudCBwcm9wZXJ0aWVzXG4gICAgICBjb25zdCBwYXJlbnRLZXlzID0gT2JqZWN0LmtleXMocGFyZW50KS5maWx0ZXIoa2V5ID0+IFxuICAgICAgICAha2V5LnN0YXJ0c1dpdGgoJ18nKSAmJiBcbiAgICAgICAgdHlwZW9mIChwYXJlbnQgYXMgYW55KVtrZXldICE9PSAnZnVuY3Rpb24nXG4gICAgICApLnNsaWNlKDAsIDIwKVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgICBldmVudDogJ2dldE1hcFZpZXdGcm9tRGF0YVNvdXJjZS1sYXllci1wYXJlbnQtaW5zcGVjdGlvbicsXG4gICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICBsYXllcklkOiBsYXllci5pZCxcbiAgICAgICAgcGFyZW50VHlwZTogcGFyZW50LnR5cGUgfHwgJ3Vua25vd24nLFxuICAgICAgICBwYXJlbnRLZXlzOiBwYXJlbnRLZXlzLFxuICAgICAgICBoYXNQYXJlbnRNYXA6ICEhKHBhcmVudCBhcyBhbnkpLm1hcCxcbiAgICAgICAgaGFzUGFyZW50VmlldzogISEocGFyZW50IGFzIGFueSkudmlldyxcbiAgICAgICAgaGFzUGFyZW50Vmlld3M6ICEhKHBhcmVudCBhcyBhbnkpLnZpZXdzLFxuICAgICAgICBwYXJlbnRWaWV3c0xlbmd0aDogKHBhcmVudCBhcyBhbnkpLnZpZXdzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgaGFzUGFyZW50RXh0ZW50OiAhIShwYXJlbnQgYXMgYW55KS5leHRlbnQsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgLy8gVHJ5IHRvIGdldCB2aWV3IGZyb20gcGFyZW50XG4gICAgICBpZiAoKHBhcmVudCBhcyBhbnkpLnZpZXcpIHtcbiAgICAgICAgY29uc3QgdmlldyA9IChwYXJlbnQgYXMgYW55KS52aWV3IGFzIF9fZXNyaS5NYXBWaWV3IHwgX19lc3JpLlNjZW5lVmlld1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgICAgIGV2ZW50OiAnZ2V0TWFwVmlld0Zyb21EYXRhU291cmNlLXN1Y2Nlc3MtdmlhLWxheWVyLXBhcmVudC12aWV3JyxcbiAgICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgICBsYXllcklkOiBsYXllci5pZCxcbiAgICAgICAgICB2aWV3VHlwZTogdmlldy50eXBlIHx8ICd1bmtub3duJyxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIHZpZXdcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gVHJ5IHRvIGdldCBtYXAgZnJvbSBwYXJlbnQgYW5kIHRoZW4gdmlld1xuICAgICAgY29uc3QgcGFyZW50TWFwID0gKHBhcmVudCBhcyBhbnkpLm1hcFxuICAgICAgaWYgKHBhcmVudE1hcCkge1xuICAgICAgICBjb25zdCB2aWV3ID0gcGFyZW50TWFwLnZpZXcgfHwgXG4gICAgICAgICAgICAgICAgICAgICAocGFyZW50TWFwLnZpZXdzPy5nZXRJdGVtQXQ/LigwKSkgfHxcbiAgICAgICAgICAgICAgICAgICAgIChwYXJlbnRNYXAudmlld3M/Lmxlbmd0aCA+IDAgPyBwYXJlbnRNYXAudmlld3NbMF0gOiBudWxsKVxuICAgICAgICBpZiAodmlldykge1xuICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICAgICAgICBldmVudDogJ2dldE1hcFZpZXdGcm9tRGF0YVNvdXJjZS1zdWNjZXNzLXZpYS1sYXllci1wYXJlbnQtbWFwJyxcbiAgICAgICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICAgICAgbGF5ZXJJZDogbGF5ZXIuaWQsXG4gICAgICAgICAgICB2aWV3VHlwZTogdmlldy50eXBlIHx8ICd1bmtub3duJyxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgIH0pXG4gICAgICAgICAgcmV0dXJuIHZpZXcgYXMgX19lc3JpLk1hcFZpZXcgfCBfX2VzcmkuU2NlbmVWaWV3XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gUGFyZW50IG1pZ2h0IEJFIHRoZSB2aWV3IChjaGVjayBpZiBpdCBoYXMgdmlldy1saWtlIHByb3BlcnRpZXMpXG4gICAgICBpZiAocGFyZW50LnR5cGUgPT09ICdtYXAnIHx8IHBhcmVudC50eXBlID09PSAnc2NlbmUnIHx8IChwYXJlbnQgYXMgYW55KS5leHRlbnQpIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgICAgICBldmVudDogJ2dldE1hcFZpZXdGcm9tRGF0YVNvdXJjZS1zdWNjZXNzLXZpYS1sYXllci1wYXJlbnQtaXMtdmlldycsXG4gICAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgICAgbGF5ZXJJZDogbGF5ZXIuaWQsXG4gICAgICAgICAgdmlld1R5cGU6IHBhcmVudC50eXBlIHx8ICd1bmtub3duJyxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIHBhcmVudCBhcyBfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXdcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBUcnkgbXVsdGlwbGUgYXBwcm9hY2hlcyB0byBnZXQgdGhlIHZpZXc6XG4gICAgLy8gMS4gTGF5ZXIgbWlnaHQgaGF2ZSBhIGRpcmVjdCB2aWV3IHByb3BlcnR5XG4gICAgaWYgKChsYXllciBhcyBhbnkpLnZpZXcpIHtcbiAgICAgIGNvbnN0IHZpZXcgPSAobGF5ZXIgYXMgYW55KS52aWV3IGFzIF9fZXNyaS5NYXBWaWV3IHwgX19lc3JpLlNjZW5lVmlld1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgICAgZXZlbnQ6ICdnZXRNYXBWaWV3RnJvbURhdGFTb3VyY2Utc3VjY2Vzcy12aWEtbGF5ZXItdmlldycsXG4gICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICBsYXllcklkOiBsYXllci5pZCxcbiAgICAgICAgdmlld1R5cGU6IHZpZXcudHlwZSB8fCAndW5rbm93bicsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIHJldHVybiB2aWV3XG4gICAgfVxuXG4gICAgLy8gMi4gVHJ5IHRvIGdldCBtYXAgZnJvbSBsYXllciBhbmQgdGhlbiB2aWV3IGZyb20gbWFwXG4gICAgY29uc3QgbWFwID0gKGxheWVyIGFzIGFueSkubWFwIHx8IFxuICAgICAgICAgICAgICAgIChsYXllciBhcyBhbnkpLnBhcmVudD8ubWFwIHx8XG4gICAgICAgICAgICAgICAgKGxheWVyIGFzIGFueSkuX19tYXAgfHxcbiAgICAgICAgICAgICAgICAobGF5ZXIgYXMgYW55KS5fbWFwXG4gICAgXG4gICAgaWYgKG1hcCkge1xuICAgICAgLy8gTG9nIG1hcCBwcm9wZXJ0aWVzXG4gICAgICBjb25zdCBtYXBLZXlzID0gT2JqZWN0LmtleXMobWFwKS5maWx0ZXIoa2V5ID0+IFxuICAgICAgICAha2V5LnN0YXJ0c1dpdGgoJ18nKSAmJiBcbiAgICAgICAgdHlwZW9mIChtYXAgYXMgYW55KVtrZXldICE9PSAnZnVuY3Rpb24nXG4gICAgICApLnNsaWNlKDAsIDIwKVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgICBldmVudDogJ2dldE1hcFZpZXdGcm9tRGF0YVNvdXJjZS1tYXAtZm91bmQnLFxuICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgbGF5ZXJJZDogbGF5ZXIuaWQsXG4gICAgICAgIG1hcElkOiBtYXAuaWQgfHwgJ3Vua25vd24nLFxuICAgICAgICBtYXBLZXlzOiBtYXBLZXlzLFxuICAgICAgICBoYXNNYXBWaWV3OiAhIW1hcC52aWV3LFxuICAgICAgICBoYXNNYXBWaWV3czogISEobWFwLnZpZXdzKSxcbiAgICAgICAgbWFwVmlld3NMZW5ndGg6IG1hcC52aWV3cz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgY29uc3QgdmlldyA9IG1hcC52aWV3IHx8IFxuICAgICAgICAgICAgICAgICAgIChtYXAudmlld3M/LmdldEl0ZW1BdD8uKDApKSB8fFxuICAgICAgICAgICAgICAgICAgIChtYXAudmlld3M/Lmxlbmd0aCA+IDAgPyBtYXAudmlld3NbMF0gOiBudWxsKSB8fFxuICAgICAgICAgICAgICAgICAgIChtYXAudmlld3MgJiYgbWFwLnZpZXdzLmxlbmd0aCA+IDAgPyBtYXAudmlld3MuZ2V0SXRlbUF0KDApIDogbnVsbClcbiAgICAgIFxuICAgICAgaWYgKHZpZXcpIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgICAgICBldmVudDogJ2dldE1hcFZpZXdGcm9tRGF0YVNvdXJjZS1zdWNjZXNzLXZpYS1sYXllci1tYXAnLFxuICAgICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICAgIGxheWVySWQ6IGxheWVyLmlkLFxuICAgICAgICAgIHZpZXdUeXBlOiB2aWV3LnR5cGUgfHwgJ3Vua25vd24nLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gdmlldyBhcyBfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXdcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyAzLiBUcnkgdG8gZ2V0IHJvb3QgZGF0YSBzb3VyY2UgYW5kIGFjY2VzcyBtYXAgZnJvbSB0aGVyZVxuICAgIGNvbnN0IHJvb3REUyA9IG9yaWdpbkRTLmdldFJvb3REYXRhU291cmNlKClcbiAgICBpZiAocm9vdERTKSB7XG4gICAgICBjb25zdCByb290TWFwID0gKHJvb3REUyBhcyBhbnkpLmdldE1hcD8uKCkgfHwgXG4gICAgICAgICAgICAgICAgICAgICAgKHJvb3REUyBhcyBhbnkpLm1hcCB8fFxuICAgICAgICAgICAgICAgICAgICAgIChyb290RFMgYXMgYW55KS5fX21hcCB8fFxuICAgICAgICAgICAgICAgICAgICAgIChyb290RFMgYXMgYW55KS5fbWFwXG4gICAgICBcbiAgICAgIGlmIChyb290TWFwKSB7XG4gICAgICAgIC8vIExvZyByb290IG1hcCBwcm9wZXJ0aWVzXG4gICAgICAgIGNvbnN0IHJvb3RNYXBLZXlzID0gT2JqZWN0LmtleXMocm9vdE1hcCkuZmlsdGVyKGtleSA9PiBcbiAgICAgICAgICAha2V5LnN0YXJ0c1dpdGgoJ18nKSAmJiBcbiAgICAgICAgICB0eXBlb2YgKHJvb3RNYXAgYXMgYW55KVtrZXldICE9PSAnZnVuY3Rpb24nXG4gICAgICAgICkuc2xpY2UoMCwgMjApXG4gICAgICAgIFxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgICAgIGV2ZW50OiAnZ2V0TWFwVmlld0Zyb21EYXRhU291cmNlLXJvb3QtbWFwLWZvdW5kJyxcbiAgICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgICByb290RFNJZDogcm9vdERTLmlkLFxuICAgICAgICAgIHJvb3REU1R5cGU6IHJvb3REUy50eXBlLFxuICAgICAgICAgIHJvb3RNYXBJZDogcm9vdE1hcC5pZCB8fCAndW5rbm93bicsXG4gICAgICAgICAgcm9vdE1hcEtleXM6IHJvb3RNYXBLZXlzLFxuICAgICAgICAgIGhhc1Jvb3RNYXBWaWV3OiAhIXJvb3RNYXAudmlldyxcbiAgICAgICAgICBoYXNSb290TWFwVmlld3M6ICEhKHJvb3RNYXAudmlld3MpLFxuICAgICAgICAgIHJvb3RNYXBWaWV3c0xlbmd0aDogcm9vdE1hcC52aWV3cz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgICAgICBjb25zdCB2aWV3ID0gcm9vdE1hcC52aWV3IHx8IFxuICAgICAgICAgICAgICAgICAgICAgKHJvb3RNYXAudmlld3M/LmdldEl0ZW1BdD8uKDApKSB8fFxuICAgICAgICAgICAgICAgICAgICAgKHJvb3RNYXAudmlld3M/Lmxlbmd0aCA+IDAgPyByb290TWFwLnZpZXdzWzBdIDogbnVsbCkgfHxcbiAgICAgICAgICAgICAgICAgICAgIChyb290TWFwLnZpZXdzICYmIHJvb3RNYXAudmlld3MubGVuZ3RoID4gMCA/IHJvb3RNYXAudmlld3MuZ2V0SXRlbUF0KDApIDogbnVsbClcbiAgICAgICAgXG4gICAgICAgIGlmICh2aWV3KSB7XG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgICAgICAgIGV2ZW50OiAnZ2V0TWFwVmlld0Zyb21EYXRhU291cmNlLXN1Y2Nlc3MtdmlhLXJvb3REUycsXG4gICAgICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgICAgIHJvb3REU0lkOiByb290RFMuaWQsXG4gICAgICAgICAgICB2aWV3VHlwZTogdmlldy50eXBlIHx8ICd1bmtub3duJyxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgIH0pXG4gICAgICAgICAgcmV0dXJuIHZpZXcgYXMgX19lc3JpLk1hcFZpZXcgfCBfX2VzcmkuU2NlbmVWaWV3XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIExvZyByb290IERTIHByb3BlcnRpZXMgdG8gc2VlIHdoYXQncyBhdmFpbGFibGVcbiAgICAgICAgY29uc3Qgcm9vdERTS2V5cyA9IE9iamVjdC5rZXlzKHJvb3REUykuZmlsdGVyKGtleSA9PiBcbiAgICAgICAgICAha2V5LnN0YXJ0c1dpdGgoJ18nKSAmJiBcbiAgICAgICAgICB0eXBlb2YgKHJvb3REUyBhcyBhbnkpW2tleV0gIT09ICdmdW5jdGlvbidcbiAgICAgICAgKS5zbGljZSgwLCAyMClcbiAgICAgICAgXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICAgICAgZXZlbnQ6ICdnZXRNYXBWaWV3RnJvbURhdGFTb3VyY2Utcm9vdC1kcy1pbnNwZWN0aW9uJyxcbiAgICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgICByb290RFNJZDogcm9vdERTLmlkLFxuICAgICAgICAgIHJvb3REU1R5cGU6IHJvb3REUy50eXBlLFxuICAgICAgICAgIHJvb3REU0tleXM6IHJvb3REU0tleXMsXG4gICAgICAgICAgaGFzR2V0TWFwOiB0eXBlb2YgKHJvb3REUyBhcyBhbnkpLmdldE1hcCA9PT0gJ2Z1bmN0aW9uJyxcbiAgICAgICAgICBoYXNNYXA6ICEhKHJvb3REUyBhcyBhbnkpLm1hcCxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgZXZlbnQ6ICdnZXRNYXBWaWV3RnJvbURhdGFTb3VyY2Utbm8tdmlldycsXG4gICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgIGxheWVySWQ6IGxheWVyLmlkLFxuICAgICAgaGFzTGF5ZXJNYXA6ICEhbWFwLFxuICAgICAgaGFzUm9vdERTOiAhIXJvb3REUyxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgcmV0dXJuIG51bGxcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgZXZlbnQ6ICdnZXRNYXBWaWV3RnJvbURhdGFTb3VyY2UtZXJyb3InLFxuICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSxcbiAgICAgIGVycm9yU3RhY2s6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgcmV0dXJuIG51bGxcbiAgfVxufVxuXG4vKipcbiAqIEdldHMgdGhlIGRlZmF1bHQgaGlnaGxpZ2h0IHN5bWJvbCBiYXNlZCBvbiBnZW9tZXRyeSB0eXBlLlxuICogVXNlcyB0aGUgbWFwJ3MgYWN0dWFsIGhpZ2hsaWdodCBjb2xvciBmcm9tIGhpZ2hsaWdodE9wdGlvbnMgdG8gbWF0Y2ggc3RhbmRhcmQgc2VsZWN0aW9uIGFwcGVhcmFuY2UuXG4gKi9cbmZ1bmN0aW9uIGdldERlZmF1bHRIaWdobGlnaHRTeW1ib2woXG4gIGdlb21ldHJ5VHlwZTogc3RyaW5nLFxuICBtYXBWaWV3OiBfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXdcbik6IF9fZXNyaS5TeW1ib2wge1xuICAvLyBHZXQgZGVmYXVsdCBoaWdobGlnaHQgY29sb3IgZnJvbSB2aWV3J3MgaGlnaGxpZ2h0T3B0aW9uc1xuICBjb25zdCBoaWdobGlnaHRPcHRpb25zID0gKG1hcFZpZXcuaGlnaGxpZ2h0T3B0aW9ucyB8fCB7fSkgYXMgX19lc3JpLkhpZ2hsaWdodE9wdGlvbnNcbiAgXG4gIC8vIEV4dHJhY3QgY29sb3IgLSBjb3VsZCBiZSBhcnJheSBbUixHLEIsQV0gb3IgQ29sb3Igb2JqZWN0XG4gIGxldCBoaWdobGlnaHRDb2xvcjogbnVtYmVyW10gfCBudWxsID0gbnVsbFxuICBcbiAgaWYgKGhpZ2hsaWdodE9wdGlvbnMuY29sb3IpIHtcbiAgICAvLyBJZiBpdCdzIGEgQ29sb3Igb2JqZWN0LCBjb252ZXJ0IHRvIGFycmF5XG4gICAgaWYgKHR5cGVvZiBoaWdobGlnaHRPcHRpb25zLmNvbG9yID09PSAnb2JqZWN0JyAmJiAndG9SZ2JhJyBpbiBoaWdobGlnaHRPcHRpb25zLmNvbG9yKSB7XG4gICAgICBoaWdobGlnaHRDb2xvciA9IChoaWdobGlnaHRPcHRpb25zLmNvbG9yIGFzIGFueSkudG9SZ2JhKClcbiAgICB9IFxuICAgIC8vIElmIGl0J3MgYWxyZWFkeSBhbiBhcnJheVxuICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoaGlnaGxpZ2h0T3B0aW9ucy5jb2xvcikpIHtcbiAgICAgIGhpZ2hsaWdodENvbG9yID0gaGlnaGxpZ2h0T3B0aW9ucy5jb2xvclxuICAgIH1cbiAgfVxuICBcbiAgLy8gSWYgbm8gY29sb3IgaW4gaGlnaGxpZ2h0T3B0aW9ucywgdXNlIHRoZSBBcmNHSVMgZG9jdW1lbnRlZCBkZWZhdWx0OiBjeWFuIFswLCAyNTUsIDI1NV1cbiAgaWYgKCFoaWdobGlnaHRDb2xvcikge1xuICAgIGhpZ2hsaWdodENvbG9yID0gWzAsIDI1NSwgMjU1LCAxLjBdIC8vIEZ1bGwgb3BhY2l0eSBkZWZhdWx0XG4gIH1cbiAgXG4gIC8vIEVuc3VyZSB3ZSBoYXZlIDQgZWxlbWVudHMgW1IsIEcsIEIsIEFdXG4gIGNvbnN0IGJhc2VDb2xvciA9IGhpZ2hsaWdodENvbG9yLnNsaWNlKDAsIDMpXG4gIGNvbnN0IGJhc2VBbHBoYSA9IGhpZ2hsaWdodENvbG9yLmxlbmd0aCA+PSA0ID8gaGlnaGxpZ2h0Q29sb3JbM10gOiAxLjBcbiAgXG4gIC8vIEdldCBmaWxsIG9wYWNpdHkgZnJvbSBoaWdobGlnaHRPcHRpb25zIG9yIHVzZSBkZWZhdWx0XG4gIGNvbnN0IGZpbGxPcGFjaXR5ID0gaGlnaGxpZ2h0T3B0aW9ucy5maWxsT3BhY2l0eSAhPT0gdW5kZWZpbmVkIFxuICAgID8gaGlnaGxpZ2h0T3B0aW9ucy5maWxsT3BhY2l0eSBcbiAgICA6IDAuMjUgLy8gRGVmYXVsdCAyNSUgb3BhY2l0eSBmb3IgZmlsbFxuICBjb25zdCBmaWxsQ29sb3IgPSBbLi4uYmFzZUNvbG9yLCBmaWxsT3BhY2l0eV1cbiAgXG4gIC8vIEdldCBoYWxvIG9wYWNpdHkgb3IgdXNlIGRlZmF1bHQgLSBmb3Igb3V0bGluZXMgYW5kIGxpbmVzXG4gIGNvbnN0IGhhbG9PcGFjaXR5ID0gaGlnaGxpZ2h0T3B0aW9ucy5oYWxvT3BhY2l0eSAhPT0gdW5kZWZpbmVkXG4gICAgPyBoaWdobGlnaHRPcHRpb25zLmhhbG9PcGFjaXR5XG4gICAgOiBiYXNlQWxwaGEgLy8gVXNlIHRoZSBjb2xvcidzIGFscGhhIGlmIGF2YWlsYWJsZSwgb3RoZXJ3aXNlIDEuMFxuICBjb25zdCBvdXRsaW5lQ29sb3IgPSBbLi4uYmFzZUNvbG9yLCBoYWxvT3BhY2l0eV1cbiAgXG4gIC8vIEZvciBsaW5lcywgdXNlIGZ1bGwgb3BhY2l0eSB0byBlbnN1cmUgdmlzaWJpbGl0eVxuICBjb25zdCBsaW5lT3BhY2l0eSA9IGhpZ2hsaWdodE9wdGlvbnMuaGFsb09wYWNpdHkgIT09IHVuZGVmaW5lZFxuICAgID8gTWF0aC5tYXgoaGlnaGxpZ2h0T3B0aW9ucy5oYWxvT3BhY2l0eSwgMC44KSAvLyBBdCBsZWFzdCA4MCUgb3BhY2l0eVxuICAgIDogYmFzZUFscGhhIC8vIFVzZSB0aGUgY29sb3IncyBhbHBoYSwgb3IgZGVmYXVsdCB0byAxLjBcbiAgY29uc3QgbGluZUNvbG9yID0gWy4uLmJhc2VDb2xvciwgbGluZU9wYWNpdHldXG4gIFxuICBzd2l0Y2ggKGdlb21ldHJ5VHlwZSkge1xuICAgIGNhc2UgJ3BvaW50JzpcbiAgICBjYXNlICdtdWx0aXBvaW50JzpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdzaW1wbGUtbWFya2VyJyxcbiAgICAgICAgY29sb3I6IG91dGxpbmVDb2xvcixcbiAgICAgICAgb3V0bGluZToge1xuICAgICAgICAgIGNvbG9yOiBvdXRsaW5lQ29sb3IsXG4gICAgICAgICAgd2lkdGg6IDJcbiAgICAgICAgfSxcbiAgICAgICAgc2l6ZTogMTJcbiAgICAgIH0gYXMgdW5rbm93biBhcyBfX2VzcmkuU2ltcGxlTWFya2VyU3ltYm9sXG4gICAgICBcbiAgICBjYXNlICdwb2x5bGluZSc6XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnc2ltcGxlLWxpbmUnLFxuICAgICAgICBjb2xvcjogbGluZUNvbG9yLCAvLyBVc2UgbGluZUNvbG9yIHdpdGggcHJvcGVyIG9wYWNpdHlcbiAgICAgICAgd2lkdGg6IDQgLy8gSW5jcmVhc2VkIHdpZHRoIGZvciB2aXNpYmlsaXR5XG4gICAgICB9IGFzIHVua25vd24gYXMgX19lc3JpLlNpbXBsZUxpbmVTeW1ib2xcbiAgICAgIFxuICAgIGNhc2UgJ3BvbHlnb24nOlxuICAgIGNhc2UgJ211bHRpcG9seWdvbic6XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnc2ltcGxlLWZpbGwnLFxuICAgICAgICBjb2xvcjogZmlsbENvbG9yLFxuICAgICAgICBvdXRsaW5lOiB7XG4gICAgICAgICAgY29sb3I6IG91dGxpbmVDb2xvcixcbiAgICAgICAgICB3aWR0aDogMlxuICAgICAgICB9XG4gICAgICB9IGFzIHVua25vd24gYXMgX19lc3JpLlNpbXBsZUZpbGxTeW1ib2xcbiAgICAgIFxuICAgIGRlZmF1bHQ6XG4gICAgICAvLyBGYWxsYmFjayB0byBwb2x5Z29uIHN5bWJvbFxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ3NpbXBsZS1maWxsJyxcbiAgICAgICAgY29sb3I6IGZpbGxDb2xvcixcbiAgICAgICAgb3V0bGluZToge1xuICAgICAgICAgIGNvbG9yOiBvdXRsaW5lQ29sb3IsXG4gICAgICAgICAgd2lkdGg6IDJcbiAgICAgICAgfVxuICAgICAgfSBhcyB1bmtub3duIGFzIF9fZXNyaS5TaW1wbGVGaWxsU3ltYm9sXG4gIH1cbn1cblxuLyoqXG4gKiBDcmVhdGVzIG9yIGdldHMgYW4gZXhpc3RpbmcgZ3JhcGhpY3MgbGF5ZXIgZm9yIHRoZSB3aWRnZXQuXG4gKiBVc2VzIGEgdW5pcXVlIElEIGJhc2VkIG9uIHdpZGdldCBJRCB0byBlbnN1cmUgb25lIGxheWVyIHBlciB3aWRnZXQuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVPckdldEdyYXBoaWNzTGF5ZXIoXG4gIHdpZGdldElkOiBzdHJpbmcsXG4gIG1hcFZpZXc6IF9fZXNyaS5NYXBWaWV3IHwgX19lc3JpLlNjZW5lVmlld1xuKTogUHJvbWlzZTxfX2VzcmkuR3JhcGhpY3NMYXllciB8IG51bGw+IHtcbiAgY29uc3Qgc2VxID0gKytvcGVyYXRpb25TZXF1ZW5jZVxuICBjb25zdCBsYXllcklkID0gYHF1ZXJ5c2ltcGxlLWhpZ2hsaWdodC0ke3dpZGdldElkfWBcbiAgXG4gIHRyeSB7XG4gICAgLy8gQ2hlY2sgaWYgbGF5ZXIgYWxyZWFkeSBleGlzdHNcbiAgICBjb25zdCBleGlzdGluZ0xheWVyID0gbWFwVmlldy5tYXAubGF5ZXJzLmZpbmQobGF5ZXIgPT4gbGF5ZXIuaWQgPT09IGxheWVySWQpIGFzIF9fZXNyaS5HcmFwaGljc0xheWVyXG4gICAgaWYgKGV4aXN0aW5nTGF5ZXIpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICAgIGV2ZW50OiAnY3JlYXRlT3JHZXRHcmFwaGljc0xheWVyLWZvdW5kLWV4aXN0aW5nJyxcbiAgICAgICAgc2VxLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgbGF5ZXJJZCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgcmV0dXJuIGV4aXN0aW5nTGF5ZXJcbiAgICB9XG5cbiAgICAvLyBMb2FkIEdyYXBoaWNzTGF5ZXIgbW9kdWxlXG4gICAgY29uc3QgW0dyYXBoaWNzTGF5ZXJdID0gYXdhaXQgbG9hZEFyY0dJU0pTQVBJTW9kdWxlcyhbJ2VzcmkvbGF5ZXJzL0dyYXBoaWNzTGF5ZXInXSlcbiAgICBcbiAgICAvLyBDcmVhdGUgbmV3IGdyYXBoaWNzIGxheWVyXG4gICAgY29uc3QgZ3JhcGhpY3NMYXllciA9IG5ldyBHcmFwaGljc0xheWVyKHtcbiAgICAgIGlkOiBsYXllcklkLFxuICAgICAgdGl0bGU6IGBRdWVyeVNpbXBsZSBIaWdobGlnaHRzICgke3dpZGdldElkfSlgLFxuICAgICAgbGlzdE1vZGU6ICdoaWRlJywgLy8gSGlkZSBmcm9tIGxheWVyIGxpc3RcbiAgICAgIHZpc2libGU6IHRydWVcbiAgICB9KVxuICAgIFxuICAgIC8vIEFkZCB0byBtYXBcbiAgICBtYXBWaWV3Lm1hcC5hZGQoZ3JhcGhpY3NMYXllcilcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgZXZlbnQ6ICdjcmVhdGVPckdldEdyYXBoaWNzTGF5ZXItY3JlYXRlZCcsXG4gICAgICBzZXEsXG4gICAgICB3aWRnZXRJZCxcbiAgICAgIGxheWVySWQsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIHJldHVybiBncmFwaGljc0xheWVyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgIGV2ZW50OiAnY3JlYXRlT3JHZXRHcmFwaGljc0xheWVyLWVycm9yJyxcbiAgICAgIHNlcSxcbiAgICAgIHdpZGdldElkLFxuICAgICAgbGF5ZXJJZCxcbiAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvciksXG4gICAgICBlcnJvclN0YWNrOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWQsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIHJldHVybiBudWxsXG4gIH1cbn1cblxuLyoqXG4gKiBBZGRzIGhpZ2hsaWdodCBncmFwaGljcyB0byB0aGUgZ3JhcGhpY3MgbGF5ZXIgdXNpbmcgZGVmYXVsdCBtYXAgaGlnaGxpZ2h0IGNvbG9yLlxuICogTm90ZTogVGhpcyBmdW5jdGlvbiBzaG91bGQgYmUgY2FsbGVkIGFmdGVyIEdyYXBoaWNzTGF5ZXIgbW9kdWxlIGlzIGxvYWRlZC5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGFkZEhpZ2hsaWdodEdyYXBoaWNzKFxuICBncmFwaGljc0xheWVyOiBfX2VzcmkuR3JhcGhpY3NMYXllcixcbiAgcmVjb3JkczogRmVhdHVyZURhdGFSZWNvcmRbXSxcbiAgbWFwVmlldzogX19lc3JpLk1hcFZpZXcgfCBfX2VzcmkuU2NlbmVWaWV3XG4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgY29uc3Qgc2VxID0gKytvcGVyYXRpb25TZXF1ZW5jZVxuICBpZiAoIWdyYXBoaWNzTGF5ZXIgfHwgIXJlY29yZHMgfHwgcmVjb3Jkcy5sZW5ndGggPT09IDApIHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgZXZlbnQ6ICdhZGRIaWdobGlnaHRHcmFwaGljcy1za2lwcGVkJyxcbiAgICAgIHNlcSxcbiAgICAgIHJlYXNvbjogIWdyYXBoaWNzTGF5ZXIgPyAnbm8tZ3JhcGhpY3MtbGF5ZXInIDogJ25vLXJlY29yZHMnLFxuICAgICAgcmVjb3Jkc0NvdW50OiByZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgcmV0dXJuXG4gIH1cblxuICAvLyBMb2cgZXhpc3Rpbmcgc3RhdGUgQkVGT1JFIGFkZGluZyAtIHZlcmlmeSBhc3N1bXB0aW9uIGFib3V0IGR1cGxpY2F0ZXNcbiAgY29uc3QgZXhpc3RpbmdHcmFwaGljc0NvdW50ID0gZ3JhcGhpY3NMYXllci5ncmFwaGljcy5sZW5ndGhcbiAgY29uc3QgZXhpc3RpbmdSZWNvcmRJZHM6IHN0cmluZ1tdID0gW11cbiAgY29uc3QgZXhpc3RpbmdSZWNvcmRJZFNldCA9IG5ldyBTZXQ8c3RyaW5nPigpXG4gIFxuICBncmFwaGljc0xheWVyLmdyYXBoaWNzLmZvckVhY2goZ3JhcGhpYyA9PiB7XG4gICAgY29uc3QgcmVjb3JkSWQgPSBncmFwaGljLmF0dHJpYnV0ZXM/LnJlY29yZElkXG4gICAgaWYgKHJlY29yZElkKSB7XG4gICAgICBleGlzdGluZ1JlY29yZElkcy5wdXNoKHJlY29yZElkKVxuICAgICAgZXhpc3RpbmdSZWNvcmRJZFNldC5hZGQocmVjb3JkSWQpXG4gICAgfVxuICB9KVxuXG4gIC8vIExvZyB3aGF0IHdlJ3JlIHRyeWluZyB0byBhZGRcbiAgY29uc3QgaW5jb21pbmdSZWNvcmRJZHMgPSByZWNvcmRzLm1hcChyID0+IHIuZ2V0SWQoKSlcblxuICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgIGV2ZW50OiAnYWRkSGlnaGxpZ2h0R3JhcGhpY3MtYmVmb3JlLWFkZCcsXG4gICAgc2VxLFxuICAgIGdyYXBoaWNzTGF5ZXJJZDogZ3JhcGhpY3NMYXllci5pZCxcbiAgICBleGlzdGluZ0dyYXBoaWNzQ291bnQsXG4gICAgZXhpc3RpbmdSZWNvcmRJZHM6IGV4aXN0aW5nUmVjb3JkSWRzLnNsaWNlKDAsIDIwKSwgLy8gTGltaXQgdG8gZmlyc3QgMjAgZm9yIHJlYWRhYmlsaXR5XG4gICAgZXhpc3RpbmdSZWNvcmRJZHNDb3VudDogZXhpc3RpbmdSZWNvcmRJZHMubGVuZ3RoLFxuICAgIGluY29taW5nUmVjb3JkSWRzOiBpbmNvbWluZ1JlY29yZElkcy5zbGljZSgwLCAyMCksIC8vIExpbWl0IHRvIGZpcnN0IDIwXG4gICAgaW5jb21pbmdSZWNvcmRJZHNDb3VudDogaW5jb21pbmdSZWNvcmRJZHMubGVuZ3RoLFxuICAgIGR1cGxpY2F0ZVJlY29yZElkczogaW5jb21pbmdSZWNvcmRJZHMuZmlsdGVyKGlkID0+IGV4aXN0aW5nUmVjb3JkSWRTZXQuaGFzKGlkKSkuc2xpY2UoMCwgMjApLFxuICAgIGR1cGxpY2F0ZUNvdW50OiBpbmNvbWluZ1JlY29yZElkcy5maWx0ZXIoaWQgPT4gZXhpc3RpbmdSZWNvcmRJZFNldC5oYXMoaWQpKS5sZW5ndGgsXG4gICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gIH0pXG5cbiAgLy8gTG9hZCBHcmFwaGljIG1vZHVsZVxuICBjb25zdCBbR3JhcGhpY10gPSBhd2FpdCBsb2FkQXJjR0lTSlNBUElNb2R1bGVzKFsnZXNyaS9HcmFwaGljJ10pXG5cbiAgbGV0IGFkZGVkQ291bnQgPSAwXG4gIGxldCBza2lwcGVkQ291bnQgPSAwXG4gIGxldCBkdXBsaWNhdGVDb3VudCA9IDBcbiAgY29uc3QgYWRkZWRSZWNvcmRJZHM6IHN0cmluZ1tdID0gW11cbiAgY29uc3Qgc2tpcHBlZFJlY29yZElkczogc3RyaW5nW10gPSBbXVxuICBjb25zdCBkdXBsaWNhdGVSZWNvcmRJZHM6IHN0cmluZ1tdID0gW11cblxuICByZWNvcmRzLmZvckVhY2gocmVjb3JkID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVjb3JkSWQgPSByZWNvcmQuZ2V0SWQoKVxuICAgICAgXG4gICAgICAvLyBDaGVjayBpZiB0aGlzIHJlY29yZCBJRCBhbHJlYWR5IGV4aXN0cyBpbiBncmFwaGljcyBsYXllclxuICAgICAgaWYgKGV4aXN0aW5nUmVjb3JkSWRTZXQuaGFzKHJlY29yZElkKSkge1xuICAgICAgICBkdXBsaWNhdGVDb3VudCsrXG4gICAgICAgIGR1cGxpY2F0ZVJlY29yZElkcy5wdXNoKHJlY29yZElkKVxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgICAgIGV2ZW50OiAnYWRkSGlnaGxpZ2h0R3JhcGhpY3MtZHVwbGljYXRlLWRldGVjdGVkJyxcbiAgICAgICAgICBzZXEsXG4gICAgICAgICAgcmVjb3JkSWQsXG4gICAgICAgICAgZ3JhcGhpY3NMYXllcklkOiBncmFwaGljc0xheWVyLmlkLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gLy8gU2tpcCBhZGRpbmcgZHVwbGljYXRlXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGdyYXBoaWMgPSByZWNvcmQuZmVhdHVyZSBhcyBfX2VzcmkuR3JhcGhpY1xuICAgICAgaWYgKCFncmFwaGljIHx8ICFncmFwaGljLmdlb21ldHJ5KSB7XG4gICAgICAgIHNraXBwZWRDb3VudCsrXG4gICAgICAgIHNraXBwZWRSZWNvcmRJZHMucHVzaChyZWNvcmRJZClcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIC8vIEdldCBnZW9tZXRyeSB0eXBlIGZyb20gZ3JhcGhpY1xuICAgICAgY29uc3QgZ2VvbWV0cnlUeXBlID0gZ3JhcGhpYy5nZW9tZXRyeS50eXBlXG5cbiAgICAgIC8vIENyZWF0ZSBzeW1ib2wgdXNpbmcgZGVmYXVsdCBoaWdobGlnaHQgY29sb3JcbiAgICAgIGNvbnN0IHN5bWJvbCA9IGdldERlZmF1bHRIaWdobGlnaHRTeW1ib2woZ2VvbWV0cnlUeXBlLCBtYXBWaWV3KVxuXG4gICAgICAvLyBDcmVhdGUgbmV3IGdyYXBoaWMgd2l0aCBoaWdobGlnaHQgc3ltYm9sXG4gICAgICBjb25zdCBoaWdobGlnaHRHcmFwaGljID0gbmV3IEdyYXBoaWMoe1xuICAgICAgICBnZW9tZXRyeTogZ3JhcGhpYy5nZW9tZXRyeSxcbiAgICAgICAgc3ltYm9sOiBzeW1ib2wsXG4gICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICByZWNvcmRJZDogcmVjb3JkSWQsXG4gICAgICAgICAgc291cmNlOiAncXVlcnlzaW1wbGUtaGlnaGxpZ2h0JyxcbiAgICAgICAgICB3aWRnZXRJZDogZ3JhcGhpY3NMYXllci5pZC5yZXBsYWNlKCdxdWVyeXNpbXBsZS1oaWdobGlnaHQtJywgJycpXG4gICAgICAgIH1cbiAgICAgIH0pXG5cbiAgICAgIGdyYXBoaWNzTGF5ZXIuYWRkKGhpZ2hsaWdodEdyYXBoaWMpXG4gICAgICBhZGRlZENvdW50KytcbiAgICAgIGFkZGVkUmVjb3JkSWRzLnB1c2gocmVjb3JkSWQpXG4gICAgICBcbiAgICAgIC8vIEFkZCB0byB0cmFja2luZyBzZXQgdG8gcHJldmVudCBkdXBsaWNhdGVzIHdpdGhpbiB0aGlzIGJhdGNoXG4gICAgICBleGlzdGluZ1JlY29yZElkU2V0LmFkZChyZWNvcmRJZClcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgc2tpcHBlZENvdW50KytcbiAgICAgIHNraXBwZWRSZWNvcmRJZHMucHVzaChyZWNvcmQuZ2V0SWQoKSlcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICAgIGV2ZW50OiAnYWRkSGlnaGxpZ2h0R3JhcGhpY3MtcmVjb3JkLWVycm9yJyxcbiAgICAgICAgc2VxLFxuICAgICAgICByZWNvcmRJZDogcmVjb3JkLmdldElkKCksXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvciksXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICB9XG4gIH0pXG5cbiAgLy8gTG9nIGZpbmFsIHN0YXRlIEFGVEVSIGFkZGluZ1xuICBjb25zdCBmaW5hbEdyYXBoaWNzQ291bnQgPSBncmFwaGljc0xheWVyLmdyYXBoaWNzLmxlbmd0aFxuICBjb25zdCBmaW5hbFJlY29yZElkczogc3RyaW5nW10gPSBbXVxuICBncmFwaGljc0xheWVyLmdyYXBoaWNzLmZvckVhY2goZ3JhcGhpYyA9PiB7XG4gICAgY29uc3QgcmVjb3JkSWQgPSBncmFwaGljLmF0dHJpYnV0ZXM/LnJlY29yZElkXG4gICAgaWYgKHJlY29yZElkKSB7XG4gICAgICBmaW5hbFJlY29yZElkcy5wdXNoKHJlY29yZElkKVxuICAgIH1cbiAgfSlcblxuICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgIGV2ZW50OiAnYWRkSGlnaGxpZ2h0R3JhcGhpY3MtY29tcGxldGUnLFxuICAgIHNlcSxcbiAgICBncmFwaGljc0xheWVySWQ6IGdyYXBoaWNzTGF5ZXIuaWQsXG4gICAgcmVjb3Jkc0NvdW50OiByZWNvcmRzLmxlbmd0aCxcbiAgICBhZGRlZENvdW50LFxuICAgIHNraXBwZWRDb3VudCxcbiAgICBkdXBsaWNhdGVDb3VudCxcbiAgICBhZGRlZFJlY29yZElkczogYWRkZWRSZWNvcmRJZHMuc2xpY2UoMCwgMjApLCAvLyBMaW1pdCB0byBmaXJzdCAyMFxuICAgIHNraXBwZWRSZWNvcmRJZHM6IHNraXBwZWRSZWNvcmRJZHMuc2xpY2UoMCwgMjApLFxuICAgIGR1cGxpY2F0ZVJlY29yZElkczogZHVwbGljYXRlUmVjb3JkSWRzLnNsaWNlKDAsIDIwKSxcbiAgICBleGlzdGluZ0dyYXBoaWNzQ291bnQsXG4gICAgZmluYWxHcmFwaGljc0NvdW50LFxuICAgIGV4cGVjdGVkRmluYWxDb3VudDogZXhpc3RpbmdHcmFwaGljc0NvdW50ICsgYWRkZWRDb3VudCxcbiAgICBmaW5hbFJlY29yZElkczogZmluYWxSZWNvcmRJZHMuc2xpY2UoMCwgMjApLCAvLyBMaW1pdCB0byBmaXJzdCAyMFxuICAgIGZpbmFsUmVjb3JkSWRzQ291bnQ6IGZpbmFsUmVjb3JkSWRzLmxlbmd0aCxcbiAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgfSlcbn1cblxuLyoqXG4gKiBSZW1vdmVzIGhpZ2hsaWdodCBncmFwaGljcyBmcm9tIHRoZSBncmFwaGljcyBsYXllciBieSByZWNvcmQgSURzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlSGlnaGxpZ2h0R3JhcGhpY3MoXG4gIGdyYXBoaWNzTGF5ZXI6IF9fZXNyaS5HcmFwaGljc0xheWVyLFxuICByZWNvcmRJZHM6IHN0cmluZ1tdXG4pOiB2b2lkIHtcbiAgY29uc3Qgc2VxID0gKytvcGVyYXRpb25TZXF1ZW5jZVxuICBpZiAoIWdyYXBoaWNzTGF5ZXIgfHwgIXJlY29yZElkcyB8fCByZWNvcmRJZHMubGVuZ3RoID09PSAwKSB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgIGV2ZW50OiAncmVtb3ZlSGlnaGxpZ2h0R3JhcGhpY3Mtc2tpcHBlZCcsXG4gICAgICBzZXEsXG4gICAgICByZWFzb246ICFncmFwaGljc0xheWVyID8gJ25vLWdyYXBoaWNzLWxheWVyJyA6ICduby1yZWNvcmQtaWRzJyxcbiAgICAgIHJlY29yZElkc0NvdW50OiByZWNvcmRJZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICByZXR1cm5cbiAgfVxuXG4gIGNvbnN0IHJlY29yZElkU2V0ID0gbmV3IFNldChyZWNvcmRJZHMpXG4gIGxldCByZW1vdmVkQ291bnQgPSAwXG5cbiAgLy8gRmluZCBhbmQgcmVtb3ZlIGdyYXBoaWNzIG1hdGNoaW5nIHJlY29yZCBJRHNcbiAgY29uc3QgZ3JhcGhpY3NUb1JlbW92ZTogX19lc3JpLkdyYXBoaWNbXSA9IFtdXG4gIGdyYXBoaWNzTGF5ZXIuZ3JhcGhpY3MuZm9yRWFjaChncmFwaGljID0+IHtcbiAgICBjb25zdCByZWNvcmRJZCA9IGdyYXBoaWMuYXR0cmlidXRlcz8ucmVjb3JkSWRcbiAgICBpZiAocmVjb3JkSWQgJiYgcmVjb3JkSWRTZXQuaGFzKHJlY29yZElkKSkge1xuICAgICAgZ3JhcGhpY3NUb1JlbW92ZS5wdXNoKGdyYXBoaWMpXG4gICAgfVxuICB9KVxuXG4gIGdyYXBoaWNzVG9SZW1vdmUuZm9yRWFjaChncmFwaGljID0+IHtcbiAgICBncmFwaGljc0xheWVyLnJlbW92ZShncmFwaGljKVxuICAgIHJlbW92ZWRDb3VudCsrXG4gIH0pXG5cbiAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICBldmVudDogJ3JlbW92ZUhpZ2hsaWdodEdyYXBoaWNzLWNvbXBsZXRlJyxcbiAgICBzZXEsXG4gICAgZ3JhcGhpY3NMYXllcklkOiBncmFwaGljc0xheWVyLmlkLFxuICAgIHJlY29yZElkc0NvdW50OiByZWNvcmRJZHMubGVuZ3RoLFxuICAgIHJlbW92ZWRDb3VudCxcbiAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgfSlcbn1cblxuLyoqXG4gKiBDbGVhcnMgYWxsIGhpZ2hsaWdodCBncmFwaGljcyBmcm9tIHRoZSBncmFwaGljcyBsYXllci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyR3JhcGhpY3NMYXllcihncmFwaGljc0xheWVyOiBfX2VzcmkuR3JhcGhpY3NMYXllcik6IHZvaWQge1xuICBjb25zdCBzZXEgPSArK29wZXJhdGlvblNlcXVlbmNlXG4gIGlmICghZ3JhcGhpY3NMYXllcikge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICBldmVudDogJ2NsZWFyR3JhcGhpY3NMYXllci1za2lwcGVkJyxcbiAgICAgIHNlcSxcbiAgICAgIHJlYXNvbjogJ25vLWdyYXBoaWNzLWxheWVyJyxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgcmV0dXJuXG4gIH1cblxuICBjb25zdCBncmFwaGljc0NvdW50ID0gZ3JhcGhpY3NMYXllci5ncmFwaGljcy5sZW5ndGhcbiAgZ3JhcGhpY3NMYXllci5yZW1vdmVBbGwoKVxuXG4gIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgZXZlbnQ6ICdjbGVhckdyYXBoaWNzTGF5ZXItY29tcGxldGUnLFxuICAgIHNlcSxcbiAgICBncmFwaGljc0xheWVySWQ6IGdyYXBoaWNzTGF5ZXIuaWQsXG4gICAgZ3JhcGhpY3NSZW1vdmVkOiBncmFwaGljc0NvdW50LFxuICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICB9KVxufVxuXG4vKipcbiAqIFJlbW92ZXMgdGhlIGdyYXBoaWNzIGxheWVyIGZyb20gdGhlIG1hcCBhbmQgY2xlYW5zIHVwIHJlZmVyZW5jZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbGVhbnVwR3JhcGhpY3NMYXllcihcbiAgd2lkZ2V0SWQ6IHN0cmluZyxcbiAgbWFwVmlldzogX19lc3JpLk1hcFZpZXcgfCBfX2VzcmkuU2NlbmVWaWV3XG4pOiB2b2lkIHtcbiAgY29uc3Qgc2VxID0gKytvcGVyYXRpb25TZXF1ZW5jZVxuICBjb25zdCBsYXllcklkID0gYHF1ZXJ5c2ltcGxlLWhpZ2hsaWdodC0ke3dpZGdldElkfWBcbiAgXG4gIHRyeSB7XG4gICAgY29uc3QgZ3JhcGhpY3NMYXllciA9IG1hcFZpZXcubWFwLmxheWVycy5maW5kKGxheWVyID0+IGxheWVyLmlkID09PSBsYXllcklkKSBhcyBfX2VzcmkuR3JhcGhpY3NMYXllclxuICAgIGlmIChncmFwaGljc0xheWVyKSB7XG4gICAgICAvLyBDbGVhciBhbGwgZ3JhcGhpY3MgZmlyc3RcbiAgICAgIGdyYXBoaWNzTGF5ZXIucmVtb3ZlQWxsKClcbiAgICAgIFxuICAgICAgLy8gUmVtb3ZlIGxheWVyIGZyb20gbWFwXG4gICAgICBtYXBWaWV3Lm1hcC5yZW1vdmUoZ3JhcGhpY3NMYXllcilcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgICAgZXZlbnQ6ICdjbGVhbnVwR3JhcGhpY3NMYXllci1jb21wbGV0ZScsXG4gICAgICAgIHNlcSxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIGxheWVySWQsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgICAgZXZlbnQ6ICdjbGVhbnVwR3JhcGhpY3NMYXllci1ub3QtZm91bmQnLFxuICAgICAgICBzZXEsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICBsYXllcklkLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICBldmVudDogJ2NsZWFudXBHcmFwaGljc0xheWVyLWVycm9yJyxcbiAgICAgIHNlcSxcbiAgICAgIHdpZGdldElkLFxuICAgICAgbGF5ZXJJZCxcbiAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvciksXG4gICAgICBlcnJvclN0YWNrOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWQsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICB9XG59XG5cbiIsImltcG9ydCB7IHR5cGUgRmVhdHVyZURhdGFSZWNvcmQgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBTZWxlY3Rpb25UeXBlIH0gZnJvbSAnLi4vLi4vY29uZmlnJ1xuaW1wb3J0IHsgY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlciB9IGZyb20gJ3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uJ1xuXG5jb25zdCBkZWJ1Z0xvZ2dlciA9IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIoKVxuXG5pbnRlcmZhY2UgQWNjdW11bGF0ZWRSZWNvcmRzQ2FsbGJhY2tzIHtcbiAgb25Nb2RlQ2hhbmdlPzogKG1vZGU6IFNlbGVjdGlvblR5cGUpID0+IHZvaWRcbiAgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2U/OiAocmVjb3JkczogRmVhdHVyZURhdGFSZWNvcmRbXSkgPT4gdm9pZFxufVxuXG4vKipcbiAqIFV0aWxpdHkgdG8gbWFuYWdlIGFjY3VtdWxhdGVkIHJlY29yZHMgYW5kIHJlc3VsdHMgbW9kZSBzdGF0ZS5cbiAqIFxuICogQ2VudHJhbGl6ZXMgYWNjdW11bGF0ZWQgcmVjb3JkcyBtYW5hZ2VtZW50IGxvZ2ljIGZvciB0aGUgd2lkZ2V0LlxuICogSGFuZGxlcyByZXN1bHRzIG1vZGUgY2hhbmdlcywgYWNjdW11bGF0ZWQgcmVjb3JkcyB1cGRhdGVzLCBhbmQgbW9kZSByZXNldCBsb2dpYy5cbiAqIFxuICogUGFydCBvZiBDaHVuayA1OiBBY2N1bXVsYXRlZCBSZWNvcmRzIE1hbmFnZW1lbnQgZXh0cmFjdGlvbi5cbiAqIFxuICogTm90ZTogVGhpcyBpcyBhIHV0aWxpdHkgY2xhc3MgKG5vdCBhIGhvb2spIHRvIHdvcmsgd2l0aCBjbGFzcyBjb21wb25lbnRzLlxuICovXG5leHBvcnQgY2xhc3MgQWNjdW11bGF0ZWRSZWNvcmRzTWFuYWdlciB7XG4gIHByaXZhdGUgcmVzdWx0c01vZGU6IFNlbGVjdGlvblR5cGUgPSBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvblxuICBwcml2YXRlIGFjY3VtdWxhdGVkUmVjb3JkczogRmVhdHVyZURhdGFSZWNvcmRbXSA9IFtdXG4gIHByaXZhdGUgY2FsbGJhY2tzPzogQWNjdW11bGF0ZWRSZWNvcmRzQ2FsbGJhY2tzXG5cbiAgLyoqXG4gICAqIFNldHMgY2FsbGJhY2tzIGZvciBtb2RlIGNoYW5nZSBhbmQgYWNjdW11bGF0ZWQgcmVjb3JkcyBjaGFuZ2UgZXZlbnRzLlxuICAgKiBcbiAgICogQHBhcmFtIGNhbGxiYWNrcyAtIENhbGxiYWNrcyBmb3IgbW9kZSBjaGFuZ2UgYW5kIGFjY3VtdWxhdGVkIHJlY29yZHMgY2hhbmdlXG4gICAqL1xuICBzZXRDYWxsYmFja3MoY2FsbGJhY2tzOiBBY2N1bXVsYXRlZFJlY29yZHNDYWxsYmFja3MpOiB2b2lkIHtcbiAgICB0aGlzLmNhbGxiYWNrcyA9IGNhbGxiYWNrc1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGN1cnJlbnQgcmVzdWx0cyBtb2RlLlxuICAgKiBcbiAgICogQHJldHVybnMgQ3VycmVudCByZXN1bHRzIG1vZGVcbiAgICovXG4gIGdldFJlc3VsdHNNb2RlKCk6IFNlbGVjdGlvblR5cGUge1xuICAgIHJldHVybiB0aGlzLnJlc3VsdHNNb2RlXG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgY3VycmVudCBhY2N1bXVsYXRlZCByZWNvcmRzLlxuICAgKiBcbiAgICogQHJldHVybnMgQ3VycmVudCBhY2N1bXVsYXRlZCByZWNvcmRzIGFycmF5XG4gICAqL1xuICBnZXRBY2N1bXVsYXRlZFJlY29yZHMoKTogRmVhdHVyZURhdGFSZWNvcmRbXSB7XG4gICAgcmV0dXJuIHRoaXMuYWNjdW11bGF0ZWRSZWNvcmRzXG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgY291bnQgb2YgYWNjdW11bGF0ZWQgcmVjb3Jkcy5cbiAgICogXG4gICAqIEByZXR1cm5zIE51bWJlciBvZiBhY2N1bXVsYXRlZCByZWNvcmRzXG4gICAqL1xuICBnZXRBY2N1bXVsYXRlZFJlY29yZHNDb3VudCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGhcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVja3MgaWYgdGhlIHdpZGdldCBpcyBpbiBhY2N1bXVsYXRpb24gbW9kZSAoQWRkIHRvIG9yIFJlbW92ZSBmcm9tKS5cbiAgICogXG4gICAqIEByZXR1cm5zIFRydWUgaWYgaW4gYWNjdW11bGF0aW9uIG1vZGUsIGZhbHNlIG90aGVyd2lzZVxuICAgKi9cbiAgaXNBY2N1bXVsYXRpb25Nb2RlKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLnJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uIHx8IFxuICAgICAgICAgICB0aGlzLnJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb25cbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVja3MgaWYgdGhlcmUgYXJlIGFjY3VtdWxhdGVkIHJlY29yZHMuXG4gICAqIFxuICAgKiBAcmV0dXJucyBUcnVlIGlmIGFjY3VtdWxhdGVkIHJlY29yZHMgZXhpc3QsIGZhbHNlIG90aGVyd2lzZVxuICAgKi9cbiAgaGFzQWNjdW11bGF0ZWRSZWNvcmRzKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwXG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlcyByZXN1bHRzIG1vZGUgY2hhbmdlLlxuICAgKiBcbiAgICogVXBkYXRlcyB0aGUgcmVzdWx0cyBtb2RlIGFuZCBvcHRpb25hbGx5IGNsZWFycyBhY2N1bXVsYXRlZCByZWNvcmRzIHdoZW4gc3dpdGNoaW5nXG4gICAqIHRvIFwiTmV3XCIgbW9kZS4gQWxzbyBoYW5kbGVzIGhhc2ggcGFyYW1ldGVyIGNvbnN1bXB0aW9uIHdoZW4gc3dpdGNoaW5nIHRvIGFjY3VtdWxhdGlvbiBtb2Rlcy5cbiAgICogXG4gICAqIEBwYXJhbSB3aWRnZXRJZCAtIFdpZGdldCBJRCBmb3IgbG9nZ2luZ1xuICAgKiBAcGFyYW0gbW9kZSAtIE5ldyByZXN1bHRzIG1vZGVcbiAgICogQHBhcmFtIHNob3VsZENvbnN1bWVIYXNoIC0gV2hldGhlciB0byBjb25zdW1lIGhhc2ggcGFyYW1ldGVyIChmb3IgZGVlcCBsaW5raW5nKVxuICAgKiBAcGFyYW0gaGFzaFNob3J0SWQgLSBPcHRpb25hbCBzaG9ydElkIHRvIGNvbnN1bWUgZnJvbSBoYXNoXG4gICAqIEBwYXJhbSByZW1vdmVIYXNoUGFyYW1ldGVyIC0gT3B0aW9uYWwgY2FsbGJhY2sgdG8gcmVtb3ZlIGhhc2ggcGFyYW1ldGVyXG4gICAqL1xuICBoYW5kbGVSZXN1bHRzTW9kZUNoYW5nZShcbiAgICB3aWRnZXRJZDogc3RyaW5nLFxuICAgIG1vZGU6IFNlbGVjdGlvblR5cGUsXG4gICAgc2hvdWxkQ29uc3VtZUhhc2g6IGJvb2xlYW4gPSBmYWxzZSxcbiAgICBoYXNoU2hvcnRJZD86IHN0cmluZyxcbiAgICByZW1vdmVIYXNoUGFyYW1ldGVyPzogKHNob3J0SWQ6IHN0cmluZykgPT4gdm9pZFxuICApOiB7IHJlc3VsdHNNb2RlOiBTZWxlY3Rpb25UeXBlLCBhY2N1bXVsYXRlZFJlY29yZHM6IEZlYXR1cmVEYXRhUmVjb3JkW10gfSB7XG4gICAgY29uc3QgcHJldmlvdXNNb2RlID0gdGhpcy5yZXN1bHRzTW9kZVxuICAgIGNvbnN0IGN1cnJlbnRBY2N1bXVsYXRlZENvdW50ID0gdGhpcy5hY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoXG5cbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgIGV2ZW50OiAnaGFuZGxlUmVzdWx0c01vZGVDaGFuZ2UtdHJpZ2dlcmVkJyxcbiAgICAgIHdpZGdldElkLFxuICAgICAgcHJldmlvdXNNb2RlLFxuICAgICAgbmV3TW9kZTogbW9kZSxcbiAgICAgIGN1cnJlbnRBY2N1bXVsYXRlZENvdW50LFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcblxuICAgIC8vIENvbnN1bWUgZGVlcCBsaW5rIHdoZW4gc3dpdGNoaW5nIHRvIGFjY3VtdWxhdGlvbiBtb2Rlc1xuICAgIGlmIChzaG91bGRDb25zdW1lSGFzaCAmJiAobW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbiB8fCBtb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb24pKSB7XG4gICAgICBpZiAoaGFzaFNob3J0SWQgJiYgcmVtb3ZlSGFzaFBhcmFtZXRlcikge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gnLCB7XG4gICAgICAgICAgZXZlbnQ6ICdjb25zdW1pbmctaGFzaC1vbi1tb2RlLXN3aXRjaCcsXG4gICAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgICAgbW9kZSxcbiAgICAgICAgICBzaG9ydElkOiBoYXNoU2hvcnRJZFxuICAgICAgICB9KVxuICAgICAgICByZW1vdmVIYXNoUGFyYW1ldGVyKGhhc2hTaG9ydElkKVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIElmIHN3aXRjaGluZyB0byBcIk5ld1wiIG1vZGUsIGNsZWFyIGFjY3VtdWxhdGVkIHJlY29yZHNcbiAgICBpZiAobW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb24pIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ2NsZWFyaW5nLWFjY3VtdWxhdGVkLXJlY29yZHMtb24tbW9kZS1zd2l0Y2gnLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgcHJldmlvdXNNb2RlXG4gICAgICB9KVxuICAgICAgdGhpcy5yZXN1bHRzTW9kZSA9IG1vZGVcbiAgICAgIHRoaXMuYWNjdW11bGF0ZWRSZWNvcmRzID0gW11cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZXN1bHRzTW9kZSA9IG1vZGVcbiAgICB9XG5cbiAgICAvLyBUcmlnZ2VyIGNhbGxiYWNrXG4gICAgaWYgKHRoaXMuY2FsbGJhY2tzPy5vbk1vZGVDaGFuZ2UpIHtcbiAgICAgIHRoaXMuY2FsbGJhY2tzLm9uTW9kZUNoYW5nZSh0aGlzLnJlc3VsdHNNb2RlKVxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICByZXN1bHRzTW9kZTogdGhpcy5yZXN1bHRzTW9kZSxcbiAgICAgIGFjY3VtdWxhdGVkUmVjb3JkczogdGhpcy5hY2N1bXVsYXRlZFJlY29yZHNcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlcyBhY2N1bXVsYXRlZCByZWNvcmRzIGNoYW5nZS5cbiAgICogXG4gICAqIFVwZGF0ZXMgdGhlIGFjY3VtdWxhdGVkIHJlY29yZHMgYXJyYXkuXG4gICAqIFxuICAgKiBAcGFyYW0gd2lkZ2V0SWQgLSBXaWRnZXQgSUQgZm9yIGxvZ2dpbmdcbiAgICogQHBhcmFtIHJlY29yZHMgLSBOZXcgYWNjdW11bGF0ZWQgcmVjb3JkcyBhcnJheVxuICAgKi9cbiAgaGFuZGxlQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlKHdpZGdldElkOiBzdHJpbmcsIHJlY29yZHM6IEZlYXR1cmVEYXRhUmVjb3JkW10pOiB2b2lkIHtcbiAgICBjb25zdCBwcmV2aW91c0NvdW50ID0gdGhpcy5hY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoXG4gICAgY29uc3QgbmV3Q291bnQgPSByZWNvcmRzLmxlbmd0aFxuXG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICBldmVudDogJ2hhbmRsZUFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZS10cmlnZ2VyZWQnLFxuICAgICAgd2lkZ2V0SWQsXG4gICAgICBwcmV2aW91c0NvdW50LFxuICAgICAgbmV3Q291bnQsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuXG4gICAgdGhpcy5hY2N1bXVsYXRlZFJlY29yZHMgPSByZWNvcmRzXG5cbiAgICAvLyBUcmlnZ2VyIGNhbGxiYWNrXG4gICAgaWYgKHRoaXMuY2FsbGJhY2tzPy5vbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZSkge1xuICAgICAgdGhpcy5jYWxsYmFja3Mub25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UodGhpcy5hY2N1bXVsYXRlZFJlY29yZHMpXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlc2V0cyBtb2RlIHRvIFwiTmV3IFNlbGVjdGlvblwiIGFuZCBjbGVhcnMgYWNjdW11bGF0ZWQgcmVjb3Jkcy5cbiAgICogXG4gICAqIENhbGxlZCB3aGVuIGhhc2ggcGFyYW1ldGVycyBhcmUgZGV0ZWN0ZWQgdG8gcmVzZXQgdGhlIHdpZGdldCB0byBhIGNsZWFuIHN0YXRlLlxuICAgKiBcbiAgICogQHBhcmFtIHdpZGdldElkIC0gV2lkZ2V0IElEIGZvciBsb2dnaW5nXG4gICAqIEBwYXJhbSBjdXJyZW50TW9kZSAtIEN1cnJlbnQgbW9kZSBiZWZvcmUgcmVzZXRcbiAgICovXG4gIHJlc2V0TW9kZU9uSGFzaERldGVjdGlvbih3aWRnZXRJZDogc3RyaW5nLCBjdXJyZW50TW9kZTogU2VsZWN0aW9uVHlwZSk6IHsgcmVzdWx0c01vZGU6IFNlbGVjdGlvblR5cGUsIGFjY3VtdWxhdGVkUmVjb3JkczogRmVhdHVyZURhdGFSZWNvcmRbXSB9IHtcbiAgICBpZiAoY3VycmVudE1vZGUgIT09IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gnLCB7XG4gICAgICAgIGV2ZW50OiAnbW9kZS1yZXNldC1uZWVkZWQtb24taGFzaC1kZXRlY3Rpb24nLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgY3VycmVudE1vZGUsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIHRoaXMucmVzdWx0c01vZGUgPSBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvblxuICAgICAgdGhpcy5hY2N1bXVsYXRlZFJlY29yZHMgPSBbXVxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICByZXN1bHRzTW9kZTogdGhpcy5yZXN1bHRzTW9kZSxcbiAgICAgIGFjY3VtdWxhdGVkUmVjb3JkczogdGhpcy5hY2N1bXVsYXRlZFJlY29yZHNcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2xlYW5zIHVwIHRoZSBtYW5hZ2VyLlxuICAgKiBcbiAgICogUmVzZXRzIHN0YXRlIHRvIGluaXRpYWwgdmFsdWVzLlxuICAgKi9cbiAgY2xlYW51cCgpOiB2b2lkIHtcbiAgICB0aGlzLnJlc3VsdHNNb2RlID0gU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb25cbiAgICB0aGlzLmFjY3VtdWxhdGVkUmVjb3JkcyA9IFtdXG4gICAgdGhpcy5jYWxsYmFja3MgPSB1bmRlZmluZWRcbiAgfVxufVxuXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnXG5pbXBvcnQgeyB0eXBlIEFsbFdpZGdldFByb3BzLCB0eXBlIERhdGFTb3VyY2UgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyB0eXBlIElNQ29uZmlnIH0gZnJvbSAnLi4vLi4vY29uZmlnJ1xuaW1wb3J0IHsgY3JlYXRlT3JHZXRHcmFwaGljc0xheWVyLCBjbGVhbnVwR3JhcGhpY3NMYXllciB9IGZyb20gJy4uL2dyYXBoaWNzLWxheWVyLXV0aWxzJ1xuaW1wb3J0IHsgY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlciB9IGZyb20gJ3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uJ1xuXG5jb25zdCBkZWJ1Z0xvZ2dlciA9IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIoKVxuXG5pbnRlcmZhY2UgR3JhcGhpY3NMYXllckNhbGxiYWNrcyB7XG4gIG9uR3JhcGhpY3NMYXllckluaXRpYWxpemVkPzogKGdyYXBoaWNzTGF5ZXI6IF9fZXNyaS5HcmFwaGljc0xheWVyKSA9PiB2b2lkXG4gIG9uR3JhcGhpY3NMYXllckNsZWFuZWQ/OiAoKSA9PiB2b2lkXG59XG5cbi8qKlxuICogVXRpbGl0eSB0byBtYW5hZ2UgZ3JhcGhpY3MgbGF5ZXIgaW5pdGlhbGl6YXRpb24gYW5kIGNsZWFudXAuXG4gKiBcbiAqIENlbnRyYWxpemVzIGdyYXBoaWNzIGxheWVyIG1hbmFnZW1lbnQgbG9naWMgZm9yIHRoZSB3aWRnZXQuXG4gKiBIYW5kbGVzIGdyYXBoaWNzIGxheWVyIGNyZWF0aW9uLCBpbml0aWFsaXphdGlvbiwgYW5kIGNsZWFudXAuXG4gKiBcbiAqIFBhcnQgb2YgQ2h1bmsgNDogR3JhcGhpY3MgTGF5ZXIgTWFuYWdlbWVudCBleHRyYWN0aW9uLlxuICogXG4gKiBOb3RlOiBUaGlzIGlzIGEgdXRpbGl0eSBjbGFzcyAobm90IGEgaG9vaykgdG8gd29yayB3aXRoIGNsYXNzIGNvbXBvbmVudHMuXG4gKi9cbmV4cG9ydCBjbGFzcyBHcmFwaGljc0xheWVyTWFuYWdlciB7XG4gIHByaXZhdGUgZ3JhcGhpY3NMYXllclJlZjogUmVhY3QuUmVmT2JqZWN0PF9fZXNyaS5HcmFwaGljc0xheWVyIHwgbnVsbD5cbiAgcHJpdmF0ZSBtYXBWaWV3UmVmOiBSZWFjdC5SZWZPYmplY3Q8X19lc3JpLk1hcFZpZXcgfCBfX2VzcmkuU2NlbmVWaWV3IHwgbnVsbD5cblxuICBjb25zdHJ1Y3RvcihcbiAgICBncmFwaGljc0xheWVyUmVmOiBSZWFjdC5SZWZPYmplY3Q8X19lc3JpLkdyYXBoaWNzTGF5ZXIgfCBudWxsPixcbiAgICBtYXBWaWV3UmVmOiBSZWFjdC5SZWZPYmplY3Q8X19lc3JpLk1hcFZpZXcgfCBfX2VzcmkuU2NlbmVWaWV3IHwgbnVsbD5cbiAgKSB7XG4gICAgdGhpcy5ncmFwaGljc0xheWVyUmVmID0gZ3JhcGhpY3NMYXllclJlZlxuICAgIHRoaXMubWFwVmlld1JlZiA9IG1hcFZpZXdSZWZcbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplcyB0aGUgZ3JhcGhpY3MgbGF5ZXIgZm9yIG1hcCBoaWdobGlnaHRpbmcuXG4gICAqIFxuICAgKiBDcmVhdGVzIG9yIHJldHJpZXZlcyBhIGdyYXBoaWNzIGxheWVyIGFuZCBhZGRzIGl0IHRvIHRoZSBtYXAgdmlldy5cbiAgICogXG4gICAqIEBwYXJhbSB3aWRnZXRJZCAtIFdpZGdldCBJRCBmb3IgZ3JhcGhpY3MgbGF5ZXIgbmFtaW5nXG4gICAqIEBwYXJhbSBtYXBWaWV3IC0gVGhlIEFyY0dJUyBNYXBWaWV3IG9yIFNjZW5lVmlldyBpbnN0YW5jZVxuICAgKiBAcGFyYW0gY2FsbGJhY2tzIC0gT3B0aW9uYWwgY2FsbGJhY2tzIGZvciBpbml0aWFsaXphdGlvbiBldmVudHNcbiAgICogXG4gICAqIEByZXR1cm5zIFByb21pc2UgcmVzb2x2aW5nIHRvIHRoZSBncmFwaGljcyBsYXllciwgb3IgbnVsbCBpZiBpbml0aWFsaXphdGlvbiBmYWlsZWRcbiAgICovXG4gIGFzeW5jIGluaXRpYWxpemUoXG4gICAgd2lkZ2V0SWQ6IHN0cmluZyxcbiAgICBtYXBWaWV3OiBfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXcsXG4gICAgY2FsbGJhY2tzPzogR3JhcGhpY3NMYXllckNhbGxiYWNrc1xuICApOiBQcm9taXNlPF9fZXNyaS5HcmFwaGljc0xheWVyIHwgbnVsbD4ge1xuICAgIC8vIENodW5rIDQ6IENvbXBhcmlzb24gbG9nZ2luZyAtIG5ldyBpbXBsZW1lbnRhdGlvblxuICAgIGNvbnN0IG5ld1N0YXRlQmVmb3JlID0ge1xuICAgICAgaGFzR3JhcGhpY3NMYXllcjogISF0aGlzLmdyYXBoaWNzTGF5ZXJSZWYuY3VycmVudCxcbiAgICAgIGdyYXBoaWNzTGF5ZXJJZDogdGhpcy5ncmFwaGljc0xheWVyUmVmLmN1cnJlbnQ/LmlkIHx8IG51bGwsXG4gICAgICBoYXNNYXBWaWV3OiAhIXRoaXMubWFwVmlld1JlZi5jdXJyZW50LFxuICAgICAgdmlld1R5cGU6IHRoaXMubWFwVmlld1JlZi5jdXJyZW50Py50eXBlIHx8IG51bGxcbiAgICB9XG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdDSFVOSy00LUNPTVBBUkUnLCB7XG4gICAgICBldmVudDogJ25ldy1pbXBsZW1lbnRhdGlvbi1pbml0aWFsaXplR3JhcGhpY3NMYXllci1iZWZvcmUnLFxuICAgICAgd2lkZ2V0SWQsXG4gICAgICBuZXdJbXBsZW1lbnRhdGlvbjoge1xuICAgICAgICBzdGF0ZUJlZm9yZTogbmV3U3RhdGVCZWZvcmUsXG4gICAgICAgIG1hcFZpZXdUeXBlOiBtYXBWaWV3LnR5cGUgfHwgJ3Vua25vd24nLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH1cbiAgICB9KVxuICAgIFxuICAgIHRyeSB7XG4gICAgICAvLyBDcmVhdGUgb3IgZ2V0IGdyYXBoaWNzIGxheWVyXG4gICAgICBjb25zdCBncmFwaGljc0xheWVyID0gYXdhaXQgY3JlYXRlT3JHZXRHcmFwaGljc0xheWVyKHdpZGdldElkLCBtYXBWaWV3KVxuICAgICAgaWYgKCFncmFwaGljc0xheWVyKSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnQ0hVTkstNC1DT01QQVJFJywge1xuICAgICAgICAgIGV2ZW50OiAnbmV3LWltcGxlbWVudGF0aW9uLWluaXRpYWxpemVHcmFwaGljc0xheWVyLWZhaWxlZCcsXG4gICAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgICAgbmV3SW1wbGVtZW50YXRpb246IHtcbiAgICAgICAgICAgIHN0YXRlQmVmb3JlOiBuZXdTdGF0ZUJlZm9yZSxcbiAgICAgICAgICAgIHJlc3VsdDogJ2ZhaWxlZCcsXG4gICAgICAgICAgICByZWFzb246ICdncmFwaGljcy1sYXllci1jcmVhdGlvbi1mYWlsZWQnLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgfVxuXG4gICAgICAvLyBTdG9yZSByZWZlcmVuY2VzXG4gICAgICB0aGlzLm1hcFZpZXdSZWYuY3VycmVudCA9IG1hcFZpZXdcbiAgICAgIHRoaXMuZ3JhcGhpY3NMYXllclJlZi5jdXJyZW50ID0gZ3JhcGhpY3NMYXllclxuXG4gICAgICBjb25zdCBuZXdTdGF0ZUFmdGVyID0ge1xuICAgICAgICBoYXNHcmFwaGljc0xheWVyOiAhIXRoaXMuZ3JhcGhpY3NMYXllclJlZi5jdXJyZW50LFxuICAgICAgICBncmFwaGljc0xheWVySWQ6IHRoaXMuZ3JhcGhpY3NMYXllclJlZi5jdXJyZW50Py5pZCB8fCBudWxsLFxuICAgICAgICBoYXNNYXBWaWV3OiAhIXRoaXMubWFwVmlld1JlZi5jdXJyZW50LFxuICAgICAgICB2aWV3VHlwZTogdGhpcy5tYXBWaWV3UmVmLmN1cnJlbnQ/LnR5cGUgfHwgbnVsbFxuICAgICAgfVxuXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0NIVU5LLTQtQ09NUEFSRScsIHtcbiAgICAgICAgZXZlbnQ6ICduZXctaW1wbGVtZW50YXRpb24taW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXItc3VjY2VzcycsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICBuZXdJbXBsZW1lbnRhdGlvbjoge1xuICAgICAgICAgIHN0YXRlQmVmb3JlOiBuZXdTdGF0ZUJlZm9yZSxcbiAgICAgICAgICBzdGF0ZUFmdGVyOiBuZXdTdGF0ZUFmdGVyLFxuICAgICAgICAgIHJlc3VsdDogJ3N1Y2Nlc3MnLFxuICAgICAgICAgIGdyYXBoaWNzTGF5ZXJJZDogZ3JhcGhpY3NMYXllci5pZCxcbiAgICAgICAgICB2aWV3VHlwZTogbWFwVmlldy50eXBlIHx8ICd1bmtub3duJyxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfVxuICAgICAgfSlcblxuICAgICAgLy8gQ2FsbCBjYWxsYmFjayBpZiBwcm92aWRlZFxuICAgICAgaWYgKGNhbGxiYWNrcz8ub25HcmFwaGljc0xheWVySW5pdGlhbGl6ZWQpIHtcbiAgICAgICAgY2FsbGJhY2tzLm9uR3JhcGhpY3NMYXllckluaXRpYWxpemVkKGdyYXBoaWNzTGF5ZXIpXG4gICAgICB9XG5cbiAgICAgIHJldHVybiBncmFwaGljc0xheWVyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnQ0hVTkstNC1DT01QQVJFJywge1xuICAgICAgICBldmVudDogJ25ldy1pbXBsZW1lbnRhdGlvbi1pbml0aWFsaXplR3JhcGhpY3NMYXllci1lcnJvcicsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICBuZXdJbXBsZW1lbnRhdGlvbjoge1xuICAgICAgICAgIHN0YXRlQmVmb3JlOiBuZXdTdGF0ZUJlZm9yZSxcbiAgICAgICAgICByZXN1bHQ6ICdlcnJvcicsXG4gICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemVzIGdyYXBoaWNzIGxheWVyIGxhemlseSB3aGVuIG91dHB1dCBkYXRhIHNvdXJjZSBiZWNvbWVzIGF2YWlsYWJsZS5cbiAgICogXG4gICAqIEBwYXJhbSB3aWRnZXRJZCAtIFdpZGdldCBJRFxuICAgKiBAcGFyYW0gY29uZmlnIC0gV2lkZ2V0IGNvbmZpZ3VyYXRpb25cbiAgICogQHBhcmFtIG91dHB1dERTIC0gVGhlIG91dHB1dCBkYXRhIHNvdXJjZSB0aGF0IHdhcyBjcmVhdGVkXG4gICAqIEBwYXJhbSBtYXBWaWV3IC0gT3B0aW9uYWwgbWFwIHZpZXcgKGlmIG5vdCBwcm92aWRlZCwgdXNlcyBtYXBWaWV3UmVmKVxuICAgKiBAcGFyYW0gY2FsbGJhY2tzIC0gT3B0aW9uYWwgY2FsbGJhY2tzXG4gICAqL1xuICBhc3luYyBpbml0aWFsaXplRnJvbU91dHB1dERTKFxuICAgIHdpZGdldElkOiBzdHJpbmcsXG4gICAgY29uZmlnOiBJTUNvbmZpZyxcbiAgICBvdXRwdXREUzogRGF0YVNvdXJjZSxcbiAgICBtYXBWaWV3OiBfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXcgfCBudWxsLFxuICAgIGNhbGxiYWNrcz86IEdyYXBoaWNzTGF5ZXJDYWxsYmFja3NcbiAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy8gQ2h1bmsgNDogQ29tcGFyaXNvbiBsb2dnaW5nIC0gbmV3IGltcGxlbWVudGF0aW9uXG4gICAgY29uc3QgbmV3U3RhdGVCZWZvcmUgPSB7XG4gICAgICB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0OiBjb25maWcudXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCxcbiAgICAgIGhhc0dyYXBoaWNzTGF5ZXI6ICEhdGhpcy5ncmFwaGljc0xheWVyUmVmLmN1cnJlbnQsXG4gICAgICBncmFwaGljc0xheWVySWQ6IHRoaXMuZ3JhcGhpY3NMYXllclJlZi5jdXJyZW50Py5pZCB8fCBudWxsLFxuICAgICAgaGFzTWFwVmlldzogISF0aGlzLm1hcFZpZXdSZWYuY3VycmVudCxcbiAgICAgIG91dHB1dERTSWQ6IG91dHB1dERTLmlkXG4gICAgfVxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnQ0hVTkstNC1DT01QQVJFJywge1xuICAgICAgZXZlbnQ6ICduZXctaW1wbGVtZW50YXRpb24taW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXJGcm9tT3V0cHV0RFMtYmVmb3JlJyxcbiAgICAgIHdpZGdldElkLFxuICAgICAgbmV3SW1wbGVtZW50YXRpb246IHtcbiAgICAgICAgc3RhdGVCZWZvcmU6IG5ld1N0YXRlQmVmb3JlLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH1cbiAgICB9KVxuICAgIFxuICAgIC8vIE9ubHkgaW5pdGlhbGl6ZSBpZiBlbmFibGVkIGFuZCBub3QgYWxyZWFkeSBpbml0aWFsaXplZFxuICAgIGlmICghY29uZmlnLnVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQgfHwgdGhpcy5ncmFwaGljc0xheWVyUmVmLmN1cnJlbnQpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnQ0hVTkstNC1DT01QQVJFJywge1xuICAgICAgICBldmVudDogJ25ldy1pbXBsZW1lbnRhdGlvbi1pbml0aWFsaXplR3JhcGhpY3NMYXllckZyb21PdXRwdXREUy1za2lwcGVkJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIG5ld0ltcGxlbWVudGF0aW9uOiB7XG4gICAgICAgICAgc3RhdGVCZWZvcmU6IG5ld1N0YXRlQmVmb3JlLFxuICAgICAgICAgIHJlc3VsdDogJ3NraXBwZWQnLFxuICAgICAgICAgIHJlYXNvbjogIWNvbmZpZy51c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0ID8gJ25vdC1lbmFibGVkJyA6ICdhbHJlYWR5LWluaXRpYWxpemVkJyxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIFVzZSBwcm92aWRlZCBtYXAgdmlldyBvciBnZXQgZnJvbSByZWZcbiAgICBjb25zdCBtYXBWaWV3VG9Vc2UgPSBtYXBWaWV3IHx8IHRoaXMubWFwVmlld1JlZi5jdXJyZW50XG4gICAgaWYgKCFtYXBWaWV3VG9Vc2UpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnQ0hVTkstNC1DT01QQVJFJywge1xuICAgICAgICBldmVudDogJ25ldy1pbXBsZW1lbnRhdGlvbi1pbml0aWFsaXplR3JhcGhpY3NMYXllckZyb21PdXRwdXREUy1za2lwcGVkJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIG5ld0ltcGxlbWVudGF0aW9uOiB7XG4gICAgICAgICAgc3RhdGVCZWZvcmU6IG5ld1N0YXRlQmVmb3JlLFxuICAgICAgICAgIHJlc3VsdDogJ3NraXBwZWQnLFxuICAgICAgICAgIHJlYXNvbjogJ21hcC12aWV3LW5vdC1hdmFpbGFibGUteWV0JyxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIEluaXRpYWxpemUgZ3JhcGhpY3MgbGF5ZXJcbiAgICBhd2FpdCB0aGlzLmluaXRpYWxpemUod2lkZ2V0SWQsIG1hcFZpZXdUb1VzZSwgY2FsbGJhY2tzKVxuICB9XG5cbiAgLyoqXG4gICAqIENsZWFucyB1cCB0aGUgZ3JhcGhpY3MgbGF5ZXIuXG4gICAqIFxuICAgKiBSZW1vdmVzIHRoZSBncmFwaGljcyBsYXllciBmcm9tIHRoZSBtYXAgdmlldyBhbmQgY2xlYXJzIGludGVybmFsIHJlZmVyZW5jZXMuXG4gICAqIFxuICAgKiBAcGFyYW0gd2lkZ2V0SWQgLSBXaWRnZXQgSURcbiAgICogQHBhcmFtIGNhbGxiYWNrcyAtIE9wdGlvbmFsIGNhbGxiYWNrc1xuICAgKi9cbiAgY2xlYW51cChcbiAgICB3aWRnZXRJZDogc3RyaW5nLFxuICAgIGNhbGxiYWNrcz86IEdyYXBoaWNzTGF5ZXJDYWxsYmFja3NcbiAgKTogdm9pZCB7XG4gICAgLy8gQ2h1bmsgNDogQ29tcGFyaXNvbiBsb2dnaW5nIC0gbmV3IGltcGxlbWVudGF0aW9uXG4gICAgY29uc3QgbmV3U3RhdGVCZWZvcmUgPSB7XG4gICAgICBoYXNHcmFwaGljc0xheWVyOiAhIXRoaXMuZ3JhcGhpY3NMYXllclJlZi5jdXJyZW50LFxuICAgICAgZ3JhcGhpY3NMYXllcklkOiB0aGlzLmdyYXBoaWNzTGF5ZXJSZWYuY3VycmVudD8uaWQgfHwgbnVsbCxcbiAgICAgIGhhc01hcFZpZXc6ICEhdGhpcy5tYXBWaWV3UmVmLmN1cnJlbnQsXG4gICAgICB2aWV3VHlwZTogdGhpcy5tYXBWaWV3UmVmLmN1cnJlbnQ/LnR5cGUgfHwgbnVsbFxuICAgIH1cbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0NIVU5LLTQtQ09NUEFSRScsIHtcbiAgICAgIGV2ZW50OiAnbmV3LWltcGxlbWVudGF0aW9uLWNsZWFudXBHcmFwaGljc0xheWVyLWJlZm9yZScsXG4gICAgICB3aWRnZXRJZCxcbiAgICAgIG5ld0ltcGxlbWVudGF0aW9uOiB7XG4gICAgICAgIHN0YXRlQmVmb3JlOiBuZXdTdGF0ZUJlZm9yZSxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9XG4gICAgfSlcblxuICAgIGNvbnN0IG1hcFZpZXcgPSB0aGlzLm1hcFZpZXdSZWYuY3VycmVudFxuICAgIGlmIChtYXBWaWV3KSB7XG4gICAgICBjbGVhbnVwR3JhcGhpY3NMYXllcih3aWRnZXRJZCwgbWFwVmlldylcbiAgICAgIHRoaXMubWFwVmlld1JlZi5jdXJyZW50ID0gbnVsbFxuICAgICAgdGhpcy5ncmFwaGljc0xheWVyUmVmLmN1cnJlbnQgPSBudWxsXG5cbiAgICAgIGNvbnN0IG5ld1N0YXRlQWZ0ZXIgPSB7XG4gICAgICAgIGhhc0dyYXBoaWNzTGF5ZXI6ICEhdGhpcy5ncmFwaGljc0xheWVyUmVmLmN1cnJlbnQsXG4gICAgICAgIGdyYXBoaWNzTGF5ZXJJZDogdGhpcy5ncmFwaGljc0xheWVyUmVmLmN1cnJlbnQ/LmlkIHx8IG51bGwsXG4gICAgICAgIGhhc01hcFZpZXc6ICEhdGhpcy5tYXBWaWV3UmVmLmN1cnJlbnQsXG4gICAgICAgIHZpZXdUeXBlOiB0aGlzLm1hcFZpZXdSZWYuY3VycmVudD8udHlwZSB8fCBudWxsXG4gICAgICB9XG5cbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnQ0hVTkstNC1DT01QQVJFJywge1xuICAgICAgICBldmVudDogJ25ldy1pbXBsZW1lbnRhdGlvbi1jbGVhbnVwR3JhcGhpY3NMYXllci1jb21wbGV0ZScsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICBuZXdJbXBsZW1lbnRhdGlvbjoge1xuICAgICAgICAgIHN0YXRlQmVmb3JlOiBuZXdTdGF0ZUJlZm9yZSxcbiAgICAgICAgICBzdGF0ZUFmdGVyOiBuZXdTdGF0ZUFmdGVyLFxuICAgICAgICAgIHJlc3VsdDogJ2NvbXBsZXRlJyxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfVxuICAgICAgfSlcblxuICAgICAgLy8gQ2FsbCBjYWxsYmFjayBpZiBwcm92aWRlZFxuICAgICAgaWYgKGNhbGxiYWNrcz8ub25HcmFwaGljc0xheWVyQ2xlYW5lZCkge1xuICAgICAgICBjYWxsYmFja3Mub25HcmFwaGljc0xheWVyQ2xlYW5lZCgpXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnQ0hVTkstNC1DT01QQVJFJywge1xuICAgICAgICBldmVudDogJ25ldy1pbXBsZW1lbnRhdGlvbi1jbGVhbnVwR3JhcGhpY3NMYXllci1za2lwcGVkJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIG5ld0ltcGxlbWVudGF0aW9uOiB7XG4gICAgICAgICAgc3RhdGVCZWZvcmU6IG5ld1N0YXRlQmVmb3JlLFxuICAgICAgICAgIHJlc3VsdDogJ3NraXBwZWQnLFxuICAgICAgICAgIHJlYXNvbjogJ25vLW1hcC12aWV3JyxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2xlYXJzIGFsbCBncmFwaGljcyBmcm9tIHRoZSBncmFwaGljcyBsYXllciBpZiBpdCBleGlzdHMuXG4gICAqIFxuICAgKiBAcGFyYW0gd2lkZ2V0SWQgLSBXaWRnZXQgSUQgZm9yIGxvZ2dpbmdcbiAgICogQHBhcmFtIGNvbmZpZyAtIFdpZGdldCBjb25maWd1cmF0aW9uXG4gICAqL1xuICBjbGVhckdyYXBoaWNzKHdpZGdldElkOiBzdHJpbmcsIGNvbmZpZzogSU1Db25maWcpOiB2b2lkIHtcbiAgICAvLyBDaHVuayA0OiBDb21wYXJpc29uIGxvZ2dpbmcgLSBuZXcgaW1wbGVtZW50YXRpb25cbiAgICBjb25zdCBncmFwaGljc0xheWVyID0gdGhpcy5ncmFwaGljc0xheWVyUmVmLmN1cnJlbnRcbiAgICBjb25zdCBuZXdTdGF0ZUJlZm9yZSA9IHtcbiAgICAgIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQ6IGNvbmZpZy51c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0LFxuICAgICAgaGFzR3JhcGhpY3NMYXllcjogISFncmFwaGljc0xheWVyLFxuICAgICAgZ3JhcGhpY3NMYXllcklkOiBncmFwaGljc0xheWVyPy5pZCB8fCBudWxsLFxuICAgICAgZ3JhcGhpY3NDb3VudDogZ3JhcGhpY3NMYXllcj8uZ3JhcGhpY3MubGVuZ3RoIHx8IDBcbiAgICB9XG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdDSFVOSy00LUNPTVBBUkUnLCB7XG4gICAgICBldmVudDogJ25ldy1pbXBsZW1lbnRhdGlvbi1jbGVhckdyYXBoaWNzTGF5ZXJJZkV4aXN0cy1iZWZvcmUnLFxuICAgICAgd2lkZ2V0SWQsXG4gICAgICBuZXdJbXBsZW1lbnRhdGlvbjoge1xuICAgICAgICBzdGF0ZUJlZm9yZTogbmV3U3RhdGVCZWZvcmUsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfVxuICAgIH0pXG4gICAgXG4gICAgaWYgKGNvbmZpZy51c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0ICYmIGdyYXBoaWNzTGF5ZXIpIHtcbiAgICAgIGNvbnN0IHsgY2xlYXJHcmFwaGljc0xheWVyIH0gPSByZXF1aXJlKCcuLi9ncmFwaGljcy1sYXllci11dGlscycpXG4gICAgICBjbGVhckdyYXBoaWNzTGF5ZXIoZ3JhcGhpY3NMYXllcilcbiAgICAgIFxuICAgICAgY29uc3QgbmV3U3RhdGVBZnRlciA9IHtcbiAgICAgICAgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodDogY29uZmlnLnVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQsXG4gICAgICAgIGhhc0dyYXBoaWNzTGF5ZXI6ICEhdGhpcy5ncmFwaGljc0xheWVyUmVmLmN1cnJlbnQsXG4gICAgICAgIGdyYXBoaWNzTGF5ZXJJZDogdGhpcy5ncmFwaGljc0xheWVyUmVmLmN1cnJlbnQ/LmlkIHx8IG51bGwsXG4gICAgICAgIGdyYXBoaWNzQ291bnQ6IHRoaXMuZ3JhcGhpY3NMYXllclJlZi5jdXJyZW50Py5ncmFwaGljcy5sZW5ndGggfHwgMFxuICAgICAgfVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0NIVU5LLTQtQ09NUEFSRScsIHtcbiAgICAgICAgZXZlbnQ6ICduZXctaW1wbGVtZW50YXRpb24tY2xlYXJHcmFwaGljc0xheWVySWZFeGlzdHMtY29tcGxldGUnLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgbmV3SW1wbGVtZW50YXRpb246IHtcbiAgICAgICAgICBzdGF0ZUJlZm9yZTogbmV3U3RhdGVCZWZvcmUsXG4gICAgICAgICAgc3RhdGVBZnRlcjogbmV3U3RhdGVBZnRlcixcbiAgICAgICAgICByZXN1bHQ6ICdjb21wbGV0ZScsXG4gICAgICAgICAgZ3JhcGhpY3NMYXllcklkOiBncmFwaGljc0xheWVyLmlkLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0NIVU5LLTQtQ09NUEFSRScsIHtcbiAgICAgICAgZXZlbnQ6ICduZXctaW1wbGVtZW50YXRpb24tY2xlYXJHcmFwaGljc0xheWVySWZFeGlzdHMtc2tpcHBlZCcsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICBuZXdJbXBsZW1lbnRhdGlvbjoge1xuICAgICAgICAgIHN0YXRlQmVmb3JlOiBuZXdTdGF0ZUJlZm9yZSxcbiAgICAgICAgICByZXN1bHQ6ICdza2lwcGVkJyxcbiAgICAgICAgICByZWFzb246ICFjb25maWcudXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCA/ICdub3QtZW5hYmxlZCcgOiAnbm8tZ3JhcGhpY3MtbGF5ZXInLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBjdXJyZW50IGdyYXBoaWNzIGxheWVyLlxuICAgKi9cbiAgZ2V0R3JhcGhpY3NMYXllcigpOiBfX2VzcmkuR3JhcGhpY3NMYXllciB8IG51bGwge1xuICAgIHJldHVybiB0aGlzLmdyYXBoaWNzTGF5ZXJSZWYuY3VycmVudFxuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrcyBpZiBncmFwaGljcyBsYXllciBzaG91bGQgYmUgaW5pdGlhbGl6ZWQgYmFzZWQgb24gY29uZmlnIGFuZCBjdXJyZW50IHN0YXRlLlxuICAgKiBcbiAgICogQHBhcmFtIGNvbmZpZyAtIFdpZGdldCBjb25maWd1cmF0aW9uXG4gICAqIEBwYXJhbSBtYXBWaWV3IC0gTWFwIHZpZXcgdG8gY2hlY2tcbiAgICogQHJldHVybnMgdHJ1ZSBpZiBncmFwaGljcyBsYXllciBzaG91bGQgYmUgaW5pdGlhbGl6ZWRcbiAgICovXG4gIHNob3VsZEluaXRpYWxpemUoXG4gICAgY29uZmlnOiBJTUNvbmZpZyxcbiAgICBtYXBWaWV3OiBfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXcgfCBudWxsXG4gICk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAhIShtYXBWaWV3ICYmIGNvbmZpZy51c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0ICYmICF0aGlzLmdyYXBoaWNzTGF5ZXJSZWYuY3VycmVudClcbiAgfVxufVxuXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnXG5pbXBvcnQgeyB0eXBlIEFsbFdpZGdldFByb3BzIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgdHlwZSBJTUNvbmZpZyB9IGZyb20gJy4uLy4uL2NvbmZpZydcbmltcG9ydCB7IHR5cGUgSmltdU1hcFZpZXcgfSBmcm9tICdqaW11LWFyY2dpcydcbmltcG9ydCB7IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIgfSBmcm9tICd3aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbidcblxuY29uc3QgZGVidWdMb2dnZXIgPSBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyKClcblxuaW50ZXJmYWNlIE1hcFZpZXdDYWxsYmFja3Mge1xuICBvbk1hcFZpZXdDaGFuZ2U/OiAoamltdU1hcFZpZXc6IEppbXVNYXBWaWV3IHwgbnVsbCkgPT4gdm9pZFxufVxuXG4vKipcbiAqIFV0aWxpdHkgdG8gbWFuYWdlIG1hcCB2aWV3IHJlZiBhbmQgdmlldyBjaGFuZ2UgaGFuZGxlcnMuXG4gKiBcbiAqIENlbnRyYWxpemVzIG1hcCB2aWV3IG1hbmFnZW1lbnQgbG9naWMgZm9yIHRoZSB3aWRnZXQuXG4gKiBIYW5kbGVzIEppbXVNYXBWaWV3IGNoYW5nZXMgYW5kIG1haW50YWlucyByZWZzIGZvciBtYXAgdmlldyBhY2Nlc3MuXG4gKiBcbiAqIFBhcnQgb2YgQ2h1bmsgNjogTWFwIFZpZXcgTWFuYWdlbWVudCBleHRyYWN0aW9uLlxuICogXG4gKiBOb3RlOiBUaGlzIGlzIGEgdXRpbGl0eSBjbGFzcyAobm90IGEgaG9vaykgdG8gd29yayB3aXRoIGNsYXNzIGNvbXBvbmVudHMuXG4gKi9cbmV4cG9ydCBjbGFzcyBNYXBWaWV3TWFuYWdlciB7XG4gIHByaXZhdGUgbWFwVmlld1JlZjogUmVhY3QuUmVmT2JqZWN0PF9fZXNyaS5NYXBWaWV3IHwgX19lc3JpLlNjZW5lVmlldyB8IG51bGw+XG4gIHByaXZhdGUgamltdU1hcFZpZXc6IEppbXVNYXBWaWV3IHwgbnVsbCA9IG51bGxcblxuICBjb25zdHJ1Y3RvcihtYXBWaWV3UmVmOiBSZWFjdC5SZWZPYmplY3Q8X19lc3JpLk1hcFZpZXcgfCBfX2VzcmkuU2NlbmVWaWV3IHwgbnVsbD4pIHtcbiAgICB0aGlzLm1hcFZpZXdSZWYgPSBtYXBWaWV3UmVmXG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlcyBKaW11TWFwVmlldyBjaGFuZ2UgZnJvbSBKaW11TWFwVmlld0NvbXBvbmVudC5cbiAgICogVXBkYXRlcyBpbnRlcm5hbCBzdGF0ZSBhbmQgY2FsbHMgY2FsbGJhY2tzLlxuICAgKi9cbiAgaGFuZGxlSmltdU1hcFZpZXdDaGFuZ2VkKFxuICAgIGppbXVNYXBWaWV3OiBKaW11TWFwVmlldyB8IG51bGwsXG4gICAgcHJvcHM6IEFsbFdpZGdldFByb3BzPElNQ29uZmlnPixcbiAgICBjYWxsYmFja3M6IE1hcFZpZXdDYWxsYmFja3NcbiAgKTogdm9pZCB7XG4gICAgY29uc3QgeyBpZCB9ID0gcHJvcHNcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ01BUC1FWFRFTlQnLCB7XG4gICAgICBldmVudDogJ2hhbmRsZUppbXVNYXBWaWV3Q2hhbmdlZCcsXG4gICAgICB3aWRnZXRJZDogaWQsXG4gICAgICBoYXNKaW11TWFwVmlldzogISFqaW11TWFwVmlldyxcbiAgICAgIGhhc1ZpZXc6ICEhKGppbXVNYXBWaWV3Py52aWV3KSxcbiAgICAgIHZpZXdUeXBlOiBqaW11TWFwVmlldz8udmlldz8udHlwZSB8fCAnbm9uZScsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIC8vIFN0b3JlIEppbXVNYXBWaWV3IGludGVybmFsbHlcbiAgICB0aGlzLmppbXVNYXBWaWV3ID0gamltdU1hcFZpZXdcbiAgICBcbiAgICAvLyBVcGRhdGUgbWFwIHZpZXcgcmVmIGlmIHZpZXcgaXMgYXZhaWxhYmxlXG4gICAgaWYgKGppbXVNYXBWaWV3Py52aWV3KSB7XG4gICAgICB0aGlzLm1hcFZpZXdSZWYuY3VycmVudCA9IGppbXVNYXBWaWV3LnZpZXdcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5tYXBWaWV3UmVmLmN1cnJlbnQgPSBudWxsXG4gICAgfVxuICAgIFxuICAgIC8vIENhbGwgY2FsbGJhY2sgdG8gdXBkYXRlIHdpZGdldCBzdGF0ZVxuICAgIGlmIChjYWxsYmFja3Mub25NYXBWaWV3Q2hhbmdlKSB7XG4gICAgICBjYWxsYmFja3Mub25NYXBWaWV3Q2hhbmdlKGppbXVNYXBWaWV3KVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBjdXJyZW50IEppbXVNYXBWaWV3LlxuICAgKi9cbiAgZ2V0SmltdU1hcFZpZXcoKTogSmltdU1hcFZpZXcgfCBudWxsIHtcbiAgICByZXR1cm4gdGhpcy5qaW11TWFwVmlld1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGN1cnJlbnQgbWFwIHZpZXcgZnJvbSByZWYuXG4gICAqL1xuICBnZXRNYXBWaWV3KCk6IF9fZXNyaS5NYXBWaWV3IHwgX19lc3JpLlNjZW5lVmlldyB8IG51bGwge1xuICAgIHJldHVybiB0aGlzLm1hcFZpZXdSZWYuY3VycmVudFxuICB9XG5cbiAgLyoqXG4gICAqIENsZWFucyB1cCBtYXAgdmlldyByZWZlcmVuY2VzLlxuICAgKi9cbiAgY2xlYW51cCgpOiB2b2lkIHtcbiAgICB0aGlzLm1hcFZpZXdSZWYuY3VycmVudCA9IG51bGxcbiAgICB0aGlzLmppbXVNYXBWaWV3ID0gbnVsbFxuICB9XG59XG5cbiIsImltcG9ydCB7IHR5cGUgQWxsV2lkZ2V0UHJvcHMgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyB0eXBlIElNQ29uZmlnLCBTZWxlY3Rpb25UeXBlIH0gZnJvbSAnLi4vLi4vY29uZmlnJ1xuaW1wb3J0IHsgY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlciB9IGZyb20gJ3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uJ1xuXG5jb25zdCBkZWJ1Z0xvZ2dlciA9IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIoKVxuXG5pbnRlcmZhY2UgVXJsQ29uc3VtcHRpb25DYWxsYmFja3Mge1xuICBvbkluaXRpYWxWYWx1ZUZvdW5kOiAodmFsdWU6IHsgc2hvcnRJZDogc3RyaW5nLCB2YWx1ZTogc3RyaW5nIH0gfCB1bmRlZmluZWQpID0+IHZvaWRcbiAgb25Nb2RlUmVzZXROZWVkZWQ/OiAoKSA9PiB2b2lkXG59XG5cbi8qKlxuICogVXRpbGl0eSB0byBtYW5hZ2UgVVJMIHBhcmFtZXRlciBjb25zdW1wdGlvbiBhbmQgZGVlcCBsaW5raW5nLlxuICogXG4gKiBIYW5kbGVzIGJvdGggSGFzaCBmcmFnbWVudHMgKCMpIGFuZCBRdWVyeSBTdHJpbmdzICg/KSwgd2l0aCBIYXNoIHRha2luZyBwcmlvcml0eS5cbiAqIEltcGxlbWVudHMgYXRvbWljIGNvbnN1bXB0aW9uIHRvIHByZXZlbnQgaW5maW5pdGUgbG9vcHMuXG4gKiBcbiAqIFBhcnQgb2YgQ2h1bmsgMTogVVJMIFBhcmFtZXRlciBDb25zdW1wdGlvbiBleHRyYWN0aW9uLlxuICogXG4gKiBOb3RlOiBUaGlzIGlzIGEgdXRpbGl0eSBjbGFzcyAobm90IGEgaG9vaykgdG8gd29yayB3aXRoIGNsYXNzIGNvbXBvbmVudHMuXG4gKi9cbmV4cG9ydCBjbGFzcyBVcmxDb25zdW1wdGlvbk1hbmFnZXIge1xuICBwcml2YXRlIGxhc3RQcm9jZXNzZWRIYXNoOiBzdHJpbmcgPSAnJ1xuICBwcml2YXRlIGlzUHJvY2Vzc2luZzogYm9vbGVhbiA9IGZhbHNlXG4gIHByaXZhdGUgaGFzaENoYW5nZUhhbmRsZXI6ICgoKSA9PiB2b2lkKSB8IG51bGwgPSBudWxsXG5cbiAgLyoqXG4gICAqIENoZWNrcyBVUkwgZm9yIGhhc2ggYW5kIHF1ZXJ5IHN0cmluZyBwYXJhbWV0ZXJzIG1hdGNoaW5nIGNvbmZpZ3VyZWQgc2hvcnRJZHMuXG4gICAqIEhhc2ggcGFyYW1ldGVycyB0YWtlIHByaW9yaXR5IG92ZXIgcXVlcnkgc3RyaW5nIHBhcmFtZXRlcnMuXG4gICAqL1xuICBjaGVja1VybFBhcmFtZXRlcnMoXG4gICAgcHJvcHM6IEFsbFdpZGdldFByb3BzPElNQ29uZmlnPixcbiAgICByZXN1bHRzTW9kZTogU2VsZWN0aW9uVHlwZSxcbiAgICBjYWxsYmFja3M6IFVybENvbnN1bXB0aW9uQ2FsbGJhY2tzXG4gICk6IHZvaWQge1xuICAgIGNvbnN0IHsgY29uZmlnLCBpZCB9ID0gcHJvcHNcbiAgICBjb25zdCB7IG9uSW5pdGlhbFZhbHVlRm91bmQsIG9uTW9kZVJlc2V0TmVlZGVkIH0gPSBjYWxsYmFja3NcblxuICAgIGlmICghY29uZmlnLnF1ZXJ5SXRlbXM/Lmxlbmd0aCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gUHJldmVudCBjb25jdXJyZW50IHByb2Nlc3NpbmdcbiAgICBpZiAodGhpcy5pc1Byb2Nlc3NpbmcpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0IHNob3J0SWRzID0gY29uZmlnLnF1ZXJ5SXRlbXNcbiAgICAgIC5tYXAoaXRlbSA9PiBpdGVtLnNob3J0SWQpXG4gICAgICAuZmlsdGVyKHNpZCA9PiBzaWQgIT0gbnVsbCAmJiBzaWQudHJpbSgpICE9PSAnJylcblxuICAgIGlmIChzaG9ydElkcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0IGhhc2ggPSB3aW5kb3cubG9jYXRpb24uaGFzaC5zdWJzdHJpbmcoMSlcbiAgICBjb25zdCBxdWVyeSA9IHdpbmRvdy5sb2NhdGlvbi5zZWFyY2guc3Vic3RyaW5nKDEpXG4gICAgXG4gICAgLy8gU2tpcCBoYXNoLW9ubHkgaWYgd2UndmUgYWxyZWFkeSBwcm9jZXNzZWQgdGhpcyBleGFjdCBoYXNoIGZyYWdtZW50XG4gICAgLy8gQnV0IGFsd2F5cyBjaGVjayBxdWVyeSBzdHJpbmdzICh0aGV5IGRvbid0IHRyaWdnZXIgaGFzaGNoYW5nZSBldmVudHMpXG4gICAgLy8gT25seSBza2lwIGlmIHdlIGhhdmUgYSBoYXNoIGZyYWdtZW50IEFORCB3ZSd2ZSBhbHJlYWR5IHByb2Nlc3NlZCBpdFxuICAgIGlmIChoYXNoICYmIHRoaXMubGFzdFByb2Nlc3NlZEhhc2ggPT09IGhhc2gpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBcbiAgICB0aGlzLmlzUHJvY2Vzc2luZyA9IHRydWVcbiAgICAvLyBPbmx5IHVwZGF0ZSBsYXN0UHJvY2Vzc2VkSGFzaCBpZiB3ZSBhY3R1YWxseSBoYXZlIGEgaGFzaCBmcmFnbWVudFxuICAgIC8vIFF1ZXJ5IHN0cmluZ3MgYXJlIGFsd2F5cyBjaGVja2VkIChubyBza2lwIGxvZ2ljIGZvciB0aGVtKVxuICAgIGlmIChoYXNoKSB7XG4gICAgICB0aGlzLmxhc3RQcm9jZXNzZWRIYXNoID0gaGFzaFxuICAgIH1cblxuICAgIGNvbnN0IGhhc2hQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKGhhc2gpXG4gICAgY29uc3QgcXVlcnlQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHF1ZXJ5KVxuXG4gICAgbGV0IGZvdW5kU2hvcnRJZDogc3RyaW5nIHwgbnVsbCA9IG51bGxcbiAgICBsZXQgZm91bmRWYWx1ZTogc3RyaW5nIHwgbnVsbCA9IG51bGxcbiAgICBsZXQgZm91bmRJbjogJ2hhc2gnIHwgJ3F1ZXJ5JyB8IG51bGwgPSBudWxsXG5cbiAgICAvLyBQUklPUklUWSAxOiBIYXNoIGZyYWdtZW50cyAoYWx3YXlzIHdpbilcbiAgICBmb3IgKGNvbnN0IHNpZCBvZiBzaG9ydElkcykge1xuICAgICAgaWYgKGhhc2hQYXJhbXMuaGFzKHNpZCkpIHtcbiAgICAgICAgZm91bmRTaG9ydElkID0gc2lkXG4gICAgICAgIGZvdW5kVmFsdWUgPSBoYXNoUGFyYW1zLmdldChzaWQpXG4gICAgICAgIGZvdW5kSW4gPSAnaGFzaCdcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBQUklPUklUWSAyOiBRdWVyeSBzdHJpbmcgKGlmIG5vIGhhc2ggbWF0Y2gpXG4gICAgaWYgKCFmb3VuZFNob3J0SWQpIHtcbiAgICAgIGZvciAoY29uc3Qgc2lkIG9mIHNob3J0SWRzKSB7XG4gICAgICAgIGlmIChxdWVyeVBhcmFtcy5oYXMoc2lkKSkge1xuICAgICAgICAgIGZvdW5kU2hvcnRJZCA9IHNpZFxuICAgICAgICAgIGZvdW5kVmFsdWUgPSBxdWVyeVBhcmFtcy5nZXQoc2lkKVxuICAgICAgICAgIGZvdW5kSW4gPSAncXVlcnknXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChmb3VuZFNob3J0SWQgJiYgZm91bmRWYWx1ZSAhPT0gbnVsbCkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNIJywge1xuICAgICAgICBldmVudDogJ3VybC1wYXJhbS1kZXRlY3RlZCcsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgc2hvcnRJZDogZm91bmRTaG9ydElkLFxuICAgICAgICB2YWx1ZTogZm91bmRWYWx1ZSxcbiAgICAgICAgZm91bmRJbixcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgXG4gICAgICAvLyBSZXNldCB0byBOZXcgbW9kZSB3aGVuIGhhc2ggcGFyYW1ldGVyIGlzIGRldGVjdGVkIHRvIGF2b2lkIGJ1Z3Mgd2l0aCBhY2N1bXVsYXRpb24gbW9kZXNcbiAgICAgIGlmIChyZXN1bHRzTW9kZSAhPT0gU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb24gJiYgb25Nb2RlUmVzZXROZWVkZWQpIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNIJywge1xuICAgICAgICAgIGV2ZW50OiAnbW9kZS1yZXNldC1uZWVkZWQtb24taGFzaC1kZXRlY3Rpb24nLFxuICAgICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgICBjdXJyZW50TW9kZTogcmVzdWx0c01vZGUsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH0pXG4gICAgICAgIG9uTW9kZVJlc2V0TmVlZGVkKClcbiAgICAgIH1cbiAgICAgIFxuICAgICAgb25Jbml0aWFsVmFsdWVGb3VuZCh7IHNob3J0SWQ6IGZvdW5kU2hvcnRJZCwgdmFsdWU6IGZvdW5kVmFsdWUgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gTm8gbWF0Y2hpbmcgcGFyYW1ldGVycyBmb3VuZCAtIGNsZWFyIHN0YXRlXG4gICAgICBvbkluaXRpYWxWYWx1ZUZvdW5kKHVuZGVmaW5lZClcbiAgICB9XG4gICAgXG4gICAgdGhpcy5pc1Byb2Nlc3NpbmcgPSBmYWxzZVxuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgYSBoYXNoIHBhcmFtZXRlciBmcm9tIHRoZSBVUkwuXG4gICAqIFVzZWQgd2hlbiBzd2l0Y2hpbmcgdG8gYWNjdW11bGF0aW9uIG1vZGVzIHRvIGNvbnN1bWUgdGhlIGRlZXAgbGluay5cbiAgICovXG4gIHJlbW92ZUhhc2hQYXJhbWV0ZXIoc2hvcnRJZDogc3RyaW5nLCB3aWRnZXRJZDogc3RyaW5nKTogdm9pZCB7XG4gICAgaWYgKCFzaG9ydElkKSByZXR1cm5cbiAgICBcbiAgICBjb25zdCBoYXNoID0gd2luZG93LmxvY2F0aW9uLmhhc2guc3Vic3RyaW5nKDEpXG4gICAgY29uc3QgdXJsUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhoYXNoKVxuICAgIFxuICAgIGlmICh1cmxQYXJhbXMuaGFzKHNob3J0SWQpKSB7XG4gICAgICB1cmxQYXJhbXMuZGVsZXRlKHNob3J0SWQpXG4gICAgICBjb25zdCBuZXdIYXNoID0gdXJsUGFyYW1zLnRvU3RyaW5nKClcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNIJywge1xuICAgICAgICBldmVudDogJ3JlbW92ZUhhc2hQYXJhbWV0ZXInLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgc2hvcnRJZCxcbiAgICAgICAgbmV3SGFzaDogbmV3SGFzaCA/IGAjJHtuZXdIYXNofWAgOiAnKGVtcHR5KScsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgLy8gVXBkYXRlIHRoZSBVUkwgd2l0aG91dCB0cmlnZ2VyaW5nIGEgcmVsb2FkXG4gICAgICAvLyBBbHdheXMgcHJlc2VydmUgcGF0aG5hbWUgYW5kIHF1ZXJ5IHN0cmluZywgb25seSB1cGRhdGUgaGFzaFxuICAgICAgd2luZG93Lmhpc3RvcnkucmVwbGFjZVN0YXRlKG51bGwsICcnLCBcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lICsgd2luZG93LmxvY2F0aW9uLnNlYXJjaCArIChuZXdIYXNoID8gYCMke25ld0hhc2h9YCA6ICcnKVxuICAgICAgKVxuICAgICAgXG4gICAgICAvLyBSZXNldCB0cmFja2luZyBzbyBpdCBjYW4gYmUgcHJvY2Vzc2VkIGFnYWluIGlmIG5lZWRlZFxuICAgICAgdGhpcy5sYXN0UHJvY2Vzc2VkSGFzaCA9ICcnXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdXAgdGhlIG1hbmFnZXIgKG5vIGF1dG9ub21vdXMgVVJMIGNoZWNraW5nKS5cbiAgICogUXVlcnlTaW1wbGUgc2hvdWxkIG9ubHkgcHJvY2VzcyBoYXNoIHBhcmFtZXRlcnMgd2hlbiBIZWxwZXJTaW1wbGUgZXhwbGljaXRseSB0cmlnZ2VycyBpdFxuICAgKiB2aWEgT1BFTl9XSURHRVRfRVZFTlQuIFRoaXMgZW5zdXJlcyBIZWxwZXJTaW1wbGUgcmVtYWlucyB0aGUgb3JjaGVzdHJhdG9yLlxuICAgKi9cbiAgc2V0dXAoXG4gICAgcHJvcHM6IEFsbFdpZGdldFByb3BzPElNQ29uZmlnPixcbiAgICByZXN1bHRzTW9kZTogU2VsZWN0aW9uVHlwZSxcbiAgICBjYWxsYmFja3M6IFVybENvbnN1bXB0aW9uQ2FsbGJhY2tzXG4gICk6IHZvaWQge1xuICAgIC8vIERvIE5PVCBhdXRvbWF0aWNhbGx5IGNoZWNrIFVSTCBwYXJhbWV0ZXJzXG4gICAgLy8gRG8gTk9UIHNldCB1cCBoYXNoY2hhbmdlIGxpc3RlbmVyXG4gICAgLy8gUXVlcnlTaW1wbGUgd2lsbCBvbmx5IHByb2Nlc3MgaGFzaCB3aGVuIEhlbHBlclNpbXBsZSBleHBsaWNpdGx5IG9wZW5zIHRoZSB3aWRnZXRcbiAgICAvLyBUaGlzIGVuc3VyZXMgSGVscGVyU2ltcGxlIHJlbWFpbnMgdGhlIG9yY2hlc3RyYXRvclxuICB9XG5cbiAgLyoqXG4gICAqIENsZWFucyB1cCBoYXNoIGNoYW5nZSBsaXN0ZW5lci5cbiAgICovXG4gIGNsZWFudXAoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuaGFzaENoYW5nZUhhbmRsZXIpIHtcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdoYXNoY2hhbmdlJywgdGhpcy5oYXNoQ2hhbmdlSGFuZGxlcilcbiAgICAgIHRoaXMuaGFzaENoYW5nZUhhbmRsZXIgPSBudWxsXG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgeyB0eXBlIEFsbFdpZGdldFByb3BzIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgdHlwZSBJTUNvbmZpZyB9IGZyb20gJy4uLy4uL2NvbmZpZydcbmltcG9ydCB7IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIgfSBmcm9tICd3aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbidcblxuY29uc3QgZGVidWdMb2dnZXIgPSBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyKClcblxuLyoqXG4gKiBDdXN0b20gZXZlbnQgbmFtZSBmb3IgUXVlcnlTaW1wbGUgdG8gbm90aWZ5IEhlbHBlclNpbXBsZSBvZiB3aWRnZXQgb3Blbi9jbG9zZSBzdGF0ZS5cbiAqL1xuY29uc3QgUVVFUllTSU1QTEVfV0lER0VUX1NUQVRFX0VWRU5UID0gJ3F1ZXJ5c2ltcGxlLXdpZGdldC1zdGF0ZS1jaGFuZ2VkJ1xuXG5pbnRlcmZhY2UgVmlzaWJpbGl0eUNhbGxiYWNrcyB7XG4gIG9uVmlzaWJpbGl0eUNoYW5nZT86IChpc1Zpc2libGU6IGJvb2xlYW4pID0+IHZvaWRcbn1cblxuLyoqXG4gKiBVdGlsaXR5IHRvIG1hbmFnZSB3aWRnZXQgcGFuZWwgdmlzaWJpbGl0eSBkZXRlY3Rpb24gYW5kIEhlbHBlclNpbXBsZSBub3RpZmljYXRpb24uXG4gKiBcbiAqIFVzZXMgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIgZm9yIGVmZmljaWVudCBET00tbGV2ZWwgdmlzaWJpbGl0eSB0cmFja2luZy5cbiAqIEZhbGxzIGJhY2sgdG8gcGVyaW9kaWMgY2hlY2tpbmcgaWYgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIgaXMgbm90IGF2YWlsYWJsZS5cbiAqIFxuICogUGFydCBvZiBDaHVuayAyOiBXaWRnZXQgVmlzaWJpbGl0eSBFbmdpbmUgZXh0cmFjdGlvbi5cbiAqIFxuICogTm90ZTogVGhpcyBpcyBhIHV0aWxpdHkgY2xhc3MgKG5vdCBhIGhvb2spIHRvIHdvcmsgd2l0aCBjbGFzcyBjb21wb25lbnRzLlxuICovXG5leHBvcnQgY2xhc3MgV2lkZ2V0VmlzaWJpbGl0eU1hbmFnZXIge1xuICBwcml2YXRlIHZpc2liaWxpdHlPYnNlcnZlcjogSW50ZXJzZWN0aW9uT2JzZXJ2ZXIgfCBudWxsID0gbnVsbFxuICBwcml2YXRlIHZpc2liaWxpdHlDaGVja0ludGVydmFsOiBudW1iZXIgfCBudWxsID0gbnVsbFxuICBwcml2YXRlIGlzUGFuZWxWaXNpYmxlOiBib29sZWFuID0gZmFsc2VcbiAgcHJpdmF0ZSB3aWRnZXRFbGVtZW50OiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsXG5cbiAgLyoqXG4gICAqIENoZWNrcyBpZiB0aGUgd2lkZ2V0IGVsZW1lbnQgaXMgY3VycmVudGx5IHZpc2libGUuXG4gICAqIEZhbGxiYWNrIG1ldGhvZCB3aGVuIEludGVyc2VjdGlvbk9ic2VydmVyIGlzIG5vdCBhdmFpbGFibGUuXG4gICAqL1xuICBwcml2YXRlIGNoZWNrVmlzaWJpbGl0eSgpOiBib29sZWFuIHtcbiAgICBpZiAoIXRoaXMud2lkZ2V0RWxlbWVudCkgcmV0dXJuIGZhbHNlXG4gICAgXG4gICAgY29uc3QgZWxlbWVudCA9IHRoaXMud2lkZ2V0RWxlbWVudFxuICAgIGNvbnN0IHN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWxlbWVudClcbiAgICBjb25zdCByZWN0ID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICAgIFxuICAgIGNvbnN0IGlzVmlzaWJsZSA9IChcbiAgICAgIHN0eWxlLmRpc3BsYXkgIT09ICdub25lJyAmJlxuICAgICAgc3R5bGUudmlzaWJpbGl0eSAhPT0gJ2hpZGRlbicgJiZcbiAgICAgIHN0eWxlLm9wYWNpdHkgIT09ICcwJyAmJlxuICAgICAgcmVjdC53aWR0aCA+IDAgJiZcbiAgICAgIHJlY3QuaGVpZ2h0ID4gMCAmJlxuICAgICAgcmVjdC50b3AgPCB3aW5kb3cuaW5uZXJIZWlnaHQgJiZcbiAgICAgIHJlY3QuYm90dG9tID4gMCAmJlxuICAgICAgcmVjdC5sZWZ0IDwgd2luZG93LmlubmVyV2lkdGggJiZcbiAgICAgIHJlY3QucmlnaHQgPiAwXG4gICAgKVxuICAgIFxuICAgIHJldHVybiBpc1Zpc2libGVcbiAgfVxuXG4gIC8qKlxuICAgKiBOb3RpZmllcyBIZWxwZXJTaW1wbGUgb2YgcGFuZWwgdmlzaWJpbGl0eSBzdGF0ZSBjaGFuZ2VzLlxuICAgKi9cbiAgcHJpdmF0ZSBub3RpZnlIZWxwZXJTaW1wbGVPZlBhbmVsU3RhdGUoaXNWaXNpYmxlOiBib29sZWFuLCB3aWRnZXRJZDogc3RyaW5nKTogdm9pZCB7XG4gICAgY29uc3QgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoUVVFUllTSU1QTEVfV0lER0VUX1NUQVRFX0VWRU5ULCB7XG4gICAgICBkZXRhaWw6IHtcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIGlzT3BlbjogaXNWaXNpYmxlXG4gICAgICB9LFxuICAgICAgYnViYmxlczogdHJ1ZSxcbiAgICAgIGNhbmNlbGFibGU6IHRydWVcbiAgICB9KVxuICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KGV2ZW50KVxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnV0lER0VULVNUQVRFJywge1xuICAgICAgZXZlbnQ6IGlzVmlzaWJsZSA/ICdwYW5lbC1vcGVuZWQnIDogJ3BhbmVsLWNsb3NlZCcsXG4gICAgICB3aWRnZXRJZCxcbiAgICAgIGlzVmlzaWJsZSxcbiAgICAgIG1ldGhvZDogJ25vdGlmeUhlbHBlclNpbXBsZU9mUGFuZWxTdGF0ZScsXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICogTG9ncyB2aXNpYmlsaXR5IHN0YXRlIGNoYW5nZXMgYW5kIGNhbGxzIGNhbGxiYWNrcy5cbiAgICovXG4gIHByaXZhdGUgbG9nVmlzaWJpbGl0eUNoYW5nZShcbiAgICBpc1Zpc2libGU6IGJvb2xlYW4sXG4gICAgbWV0aG9kOiBzdHJpbmcsXG4gICAgd2lkZ2V0SWQ6IHN0cmluZyxcbiAgICBjYWxsYmFja3M6IFZpc2liaWxpdHlDYWxsYmFja3NcbiAgKTogdm9pZCB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdXSURHRVQtU1RBVEUnLCB7XG4gICAgICBldmVudDogaXNWaXNpYmxlID8gJ3BhbmVsLW9wZW5lZCcgOiAncGFuZWwtY2xvc2VkJyxcbiAgICAgIHdpZGdldElkLFxuICAgICAgaXNWaXNpYmxlLFxuICAgICAgbWV0aG9kLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICB9KVxuICAgIFxuICAgIC8vIE5vdGlmeSBIZWxwZXJTaW1wbGVcbiAgICB0aGlzLm5vdGlmeUhlbHBlclNpbXBsZU9mUGFuZWxTdGF0ZShpc1Zpc2libGUsIHdpZGdldElkKVxuICAgIFxuICAgIC8vIENhbGwgb3B0aW9uYWwgY2FsbGJhY2tcbiAgICBpZiAoY2FsbGJhY2tzLm9uVmlzaWJpbGl0eUNoYW5nZSkge1xuICAgICAgY2FsbGJhY2tzLm9uVmlzaWJpbGl0eUNoYW5nZShpc1Zpc2libGUpXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdXAgdmlzaWJpbGl0eSBkZXRlY3Rpb24uXG4gICAqL1xuICBzZXR1cChcbiAgICB3aWRnZXRFbGVtZW50OiBIVE1MRWxlbWVudCxcbiAgICBwcm9wczogQWxsV2lkZ2V0UHJvcHM8SU1Db25maWc+LFxuICAgIGNhbGxiYWNrczogVmlzaWJpbGl0eUNhbGxiYWNrcyxcbiAgICBvblZpc2liaWxpdHlTdGF0ZUNoYW5nZTogKGlzVmlzaWJsZTogYm9vbGVhbikgPT4gdm9pZFxuICApOiB2b2lkIHtcbiAgICBjb25zdCB7IGlkIH0gPSBwcm9wc1xuICAgIHRoaXMud2lkZ2V0RWxlbWVudCA9IHdpZGdldEVsZW1lbnRcblxuICAgIC8vIFdhaXQgZm9yIG5leHQgdGljayB0byBlbnN1cmUgZWxlbWVudCBpcyByZWFkeVxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgaWYgKCF0aGlzLndpZGdldEVsZW1lbnQpIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdXSURHRVQtU1RBVEUnLCB7XG4gICAgICAgICAgZXZlbnQ6ICd2aXNpYmlsaXR5LWRldGVjdGlvbi1zZXR1cC1mYWlsZWQnLFxuICAgICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgICByZWFzb246ICd3aWRnZXQtZWxlbWVudC1ub3QtYXZhaWxhYmxlJ1xuICAgICAgICB9KVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgY29uc3QgZWxlbWVudCA9IHRoaXMud2lkZ2V0RWxlbWVudFxuXG4gICAgICAvLyBNZXRob2QgMTogSW50ZXJzZWN0aW9uT2JzZXJ2ZXIgKG1vc3QgZWZmaWNpZW50KVxuICAgICAgaWYgKCdJbnRlcnNlY3Rpb25PYnNlcnZlcicgaW4gd2luZG93KSB7XG4gICAgICAgIHRoaXMudmlzaWJpbGl0eU9ic2VydmVyID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKFxuICAgICAgICAgIChlbnRyaWVzKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBlbnRyeSA9IGVudHJpZXNbMF1cbiAgICAgICAgICAgIGNvbnN0IGlzVmlzaWJsZSA9IGVudHJ5LmlzSW50ZXJzZWN0aW5nICYmIGVudHJ5LmludGVyc2VjdGlvblJhdGlvID4gMFxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBPbmx5IHVwZGF0ZSBpZiBzdGF0ZSBjaGFuZ2VkXG4gICAgICAgICAgICBpZiAodGhpcy5pc1BhbmVsVmlzaWJsZSAhPT0gaXNWaXNpYmxlKSB7XG4gICAgICAgICAgICAgIHRoaXMuaXNQYW5lbFZpc2libGUgPSBpc1Zpc2libGVcbiAgICAgICAgICAgICAgdGhpcy5sb2dWaXNpYmlsaXR5Q2hhbmdlKGlzVmlzaWJsZSwgJ0ludGVyc2VjdGlvbk9ic2VydmVyJywgaWQsIGNhbGxiYWNrcylcbiAgICAgICAgICAgICAgb25WaXNpYmlsaXR5U3RhdGVDaGFuZ2UoaXNWaXNpYmxlKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgdGhyZXNob2xkOiBbMCwgMC4xLCAxLjBdLCAvLyBUcmlnZ2VyIGF0IDAlLCAxMCUsIGFuZCAxMDAlIHZpc2liaWxpdHlcbiAgICAgICAgICAgIHJvb3RNYXJnaW46ICcwcHgnXG4gICAgICAgICAgfVxuICAgICAgICApXG4gICAgICAgIFxuICAgICAgICB0aGlzLnZpc2liaWxpdHlPYnNlcnZlci5vYnNlcnZlKGVsZW1lbnQpXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnV0lER0VULVNUQVRFJywge1xuICAgICAgICAgIGV2ZW50OiAndmlzaWJpbGl0eS1kZXRlY3Rpb24tc2V0dXAnLFxuICAgICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgICBtZXRob2Q6ICdJbnRlcnNlY3Rpb25PYnNlcnZlcidcbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIE1ldGhvZCAyOiBGYWxsYmFjayB0byBwZXJpb2RpYyBjaGVja2luZ1xuICAgICAgICB0aGlzLnZpc2liaWxpdHlDaGVja0ludGVydmFsID0gd2luZG93LnNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgICBjb25zdCBpc1Zpc2libGUgPSB0aGlzLmNoZWNrVmlzaWJpbGl0eSgpXG4gICAgICAgICAgaWYgKHRoaXMuaXNQYW5lbFZpc2libGUgIT09IGlzVmlzaWJsZSkge1xuICAgICAgICAgICAgdGhpcy5pc1BhbmVsVmlzaWJsZSA9IGlzVmlzaWJsZVxuICAgICAgICAgICAgdGhpcy5sb2dWaXNpYmlsaXR5Q2hhbmdlKGlzVmlzaWJsZSwgJ3BlcmlvZGljLWNoZWNrJywgaWQsIGNhbGxiYWNrcylcbiAgICAgICAgICAgIG9uVmlzaWJpbGl0eVN0YXRlQ2hhbmdlKGlzVmlzaWJsZSlcbiAgICAgICAgICB9XG4gICAgICAgIH0sIDI1MCkgLy8gQ2hlY2sgZXZlcnkgMjUwbXNcbiAgICAgICAgXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnV0lER0VULVNUQVRFJywge1xuICAgICAgICAgIGV2ZW50OiAndmlzaWJpbGl0eS1kZXRlY3Rpb24tc2V0dXAnLFxuICAgICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgICBtZXRob2Q6ICdwZXJpb2RpYy1jaGVjaydcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9LCAxMDApXG4gIH1cblxuICAvKipcbiAgICogQ2xlYW5zIHVwIHZpc2liaWxpdHkgZGV0ZWN0aW9uIG9ic2VydmVycy9pbnRlcnZhbHMuXG4gICAqL1xuICBjbGVhbnVwKCk6IHZvaWQge1xuICAgIC8vIENsZWFuIHVwIEludGVyc2VjdGlvbk9ic2VydmVyXG4gICAgaWYgKHRoaXMudmlzaWJpbGl0eU9ic2VydmVyKSB7XG4gICAgICB0aGlzLnZpc2liaWxpdHlPYnNlcnZlci5kaXNjb25uZWN0KClcbiAgICAgIHRoaXMudmlzaWJpbGl0eU9ic2VydmVyID0gbnVsbFxuICAgIH1cbiAgICBcbiAgICAvLyBDbGVhbiB1cCBpbnRlcnZhbFxuICAgIGlmICh0aGlzLnZpc2liaWxpdHlDaGVja0ludGVydmFsICE9PSBudWxsKSB7XG4gICAgICBjbGVhckludGVydmFsKHRoaXMudmlzaWJpbGl0eUNoZWNrSW50ZXJ2YWwpXG4gICAgICB0aGlzLnZpc2liaWxpdHlDaGVja0ludGVydmFsID0gbnVsbFxuICAgIH1cbiAgICBcbiAgICB0aGlzLndpZGdldEVsZW1lbnQgPSBudWxsXG4gIH1cblxuICAvKipcbiAgICogR2V0cyBjdXJyZW50IHZpc2liaWxpdHkgc3RhdGUuXG4gICAqL1xuICBnZXRJc1BhbmVsVmlzaWJsZSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5pc1BhbmVsVmlzaWJsZVxuICB9XG5cbiAgLyoqXG4gICAqIE5vdGlmaWVzIEhlbHBlclNpbXBsZSBvbiBtb3VudC5cbiAgICovXG4gIG5vdGlmeU1vdW50KHdpZGdldElkOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBjb25zdCBvcGVuRXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoUVVFUllTSU1QTEVfV0lER0VUX1NUQVRFX0VWRU5ULCB7XG4gICAgICBkZXRhaWw6IHtcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIGlzT3BlbjogdHJ1ZVxuICAgICAgfSxcbiAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICBjYW5jZWxhYmxlOiB0cnVlXG4gICAgfSlcbiAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChvcGVuRXZlbnQpXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdXSURHRVQtU1RBVEUnLCB7XG4gICAgICBldmVudDogJ3dpZGdldC1tb3VudGVkJyxcbiAgICAgIHdpZGdldElkLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqIE5vdGlmaWVzIEhlbHBlclNpbXBsZSBvbiB1bm1vdW50LlxuICAgKi9cbiAgbm90aWZ5VW5tb3VudCh3aWRnZXRJZDogc3RyaW5nKTogdm9pZCB7XG4gICAgY29uc3QgY2xvc2VFdmVudCA9IG5ldyBDdXN0b21FdmVudChRVUVSWVNJTVBMRV9XSURHRVRfU1RBVEVfRVZFTlQsIHtcbiAgICAgIGRldGFpbDoge1xuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgaXNPcGVuOiBmYWxzZVxuICAgICAgfSxcbiAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICBjYW5jZWxhYmxlOiB0cnVlXG4gICAgfSlcbiAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChjbG9zZUV2ZW50KVxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnV0lER0VULVNUQVRFJywge1xuICAgICAgZXZlbnQ6ICd3aWRnZXQtdW5tb3VudGVkJyxcbiAgICAgIHdpZGdldElkLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICB9KVxuICB9XG59XG4iLCIvKipcbiAqIEhvb2sgZm9yIHpvb21pbmcgdG8gZmVhdHVyZSByZWNvcmRzIHdpdGggcGFkZGluZy5cbiAqIFxuICogV3JhcHMgdGhlIHNoYXJlZCB6b29tVG9SZWNvcmRzIHV0aWxpdHkgZnVuY3Rpb24gaW4gYSBSZWFjdCBob29rLlxuICovXG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCdcbmltcG9ydCB0eXBlIHsgRmVhdHVyZURhdGFSZWNvcmQgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyB6b29tVG9SZWNvcmRzLCB0eXBlIFpvb21Ub1JlY29yZHNPcHRpb25zIH0gZnJvbSAnLi4vem9vbS11dGlscydcblxuLyoqXG4gKiBDdXN0b20gaG9vayB0aGF0IHJldHVybnMgYSBmdW5jdGlvbiB0byB6b29tIHRvIHJlY29yZHMgd2l0aCBwYWRkaW5nLlxuICogXG4gKiBAcGFyYW0gbWFwVmlldyAtIFRoZSBtYXAgdmlldyB0byB6b29tXG4gKiBAcmV0dXJucyBBIGZ1bmN0aW9uIHRoYXQgdGFrZXMgcmVjb3JkcyBhbmQgb3B0aW9uYWwgcGFkZGluZywgYW5kIHpvb21zIHRvIHRoZW1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVzZVpvb21Ub1JlY29yZHMoXG4gIG1hcFZpZXc/OiBfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXdcbik6IChyZWNvcmRzOiBGZWF0dXJlRGF0YVJlY29yZFtdLCBvcHRpb25zPzogWm9vbVRvUmVjb3Jkc09wdGlvbnMpID0+IFByb21pc2U8dm9pZD4ge1xuICBcbiAgcmV0dXJuIFJlYWN0LnVzZUNhbGxiYWNrKGFzeW5jIChcbiAgICByZWNvcmRzOiBGZWF0dXJlRGF0YVJlY29yZFtdLFxuICAgIG9wdGlvbnM/OiBab29tVG9SZWNvcmRzT3B0aW9uc1xuICApOiBQcm9taXNlPHZvaWQ+ID0+IHtcbiAgICBpZiAoIW1hcFZpZXcpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBhd2FpdCB6b29tVG9SZWNvcmRzKG1hcFZpZXcsIHJlY29yZHMsIG9wdGlvbnMpXG4gIH0sIFttYXBWaWV3XSlcbn1cblxuLy8gUmUtZXhwb3J0IHR5cGVzIGZvciBjb252ZW5pZW5jZVxuZXhwb3J0IHR5cGUgeyBab29tVG9SZWNvcmRzT3B0aW9ucyB9IGZyb20gJy4uL3pvb20tdXRpbHMnXG5cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHsgUmVhY3QsIGpzeCwgdHlwZSBJbW11dGFibGVBcnJheSwgbW9kdWxlTG9hZGVyLCBob29rcyB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IENoZWNrYm94IH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB0eXBlIHsgSmltdU1hcFZpZXcgfSBmcm9tICdqaW11LWFyY2dpcydcbmltcG9ydCB0eXBlICogYXMgamltdU1hcCBmcm9tICdqaW11LXVpL2FkdmFuY2VkL21hcCdcbmltcG9ydCB7IENyZWF0ZVRvb2xUeXBlIH0gZnJvbSAnLi4vY29uZmlnJ1xuaW1wb3J0IHsgRW50aXR5U3RhdHVzVHlwZSwgU3RhdHVzSW5kaWNhdG9yIH0gZnJvbSAnd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24nXG5pbXBvcnQgZGVmYXVsdE1lc3NhZ2UgZnJvbSAnLi90cmFuc2xhdGlvbnMvZGVmYXVsdCdcbmV4cG9ydCBpbnRlcmZhY2UgSW50ZXJhY3RpdmVEcmF3UHJvcHMge1xuICBqaW11TWFwVmlldzogSmltdU1hcFZpZXdcbiAgd2lkZ2V0SWQ6IHN0cmluZ1xuICB0b29sVHlwZXM6IEltbXV0YWJsZUFycmF5PENyZWF0ZVRvb2xUeXBlPlxuICBvbkRyYXdFbmQ6IChncmFwaGljOiBfX2VzcmkuR3JhcGhpYywgZ2V0TGF5ZXJGdW4/LCBjbGVhckFmdGVyQXBwbHk/OiBib29sZWFuKSA9PiB2b2lkXG59XG5cbmNvbnN0IHNrZXRjaFRvb2xJbmZvTWFwID0ge1xuICBbQ3JlYXRlVG9vbFR5cGUuUG9pbnRdOiB7IGRyYXdUb29sTmFtZTogJ3BvaW50JywgZXNyaUNsYXNzTmFtZTogJ2VzcmktaWNvbi1wb2ludCcsIHRvb2xJbmRleDogMCB9LFxuICBbQ3JlYXRlVG9vbFR5cGUuUG9seWxpbmVdOiB7IGRyYXdUb29sTmFtZTogJ3BvbHlsaW5lJywgZXNyaUNsYXNzTmFtZTogJ2VzcmktaWNvbi1wb2x5bGluZScsIHRvb2xJbmRleDogNCB9LFxuICBbQ3JlYXRlVG9vbFR5cGUuUG9seWdvbl06IHsgZHJhd1Rvb2xOYW1lOiAncG9seWdvbicsIGVzcmlDbGFzc05hbWU6ICdlc3JpLWljb24tcG9seWdvbicsIHRvb2xJbmRleDogMiB9LFxuICBbQ3JlYXRlVG9vbFR5cGUuUmVjdGFuZ2xlXToge1xuICAgIGRyYXdUb29sTmFtZTogJ3JlY3RhbmdsZScsXG4gICAgZXNyaUNsYXNzTmFtZTogJ2VzcmktaWNvbi1jaGVja2JveC11bmNoZWNrZWQnLFxuICAgIHRvb2xJbmRleDogMVxuICB9LFxuICBbQ3JlYXRlVG9vbFR5cGUuQ2lyY2xlXTogeyBkcmF3VG9vbE5hbWU6ICdjaXJjbGUnLCBlc3JpQ2xhc3NOYW1lOiAnZXNyaS1pY29uLXJhZGlvLXVuY2hlY2tlZCcsIHRvb2xJbmRleDogMyB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBJbnRlcmFjdGl2ZURyYXcgKHByb3BzOiBJbnRlcmFjdGl2ZURyYXdQcm9wcykge1xuICBjb25zdCB7IHRvb2xUeXBlcyA9IFtdLCBqaW11TWFwVmlldywgb25EcmF3RW5kLCB3aWRnZXRJZCB9ID0gcHJvcHNcbiAgY29uc3QgZ2V0STE4bk1lc3NhZ2UgPSBob29rcy51c2VUcmFuc2xhdGlvbihkZWZhdWx0TWVzc2FnZSlcbiAgY29uc3QgW21hcE1vZHVsZSwgc2V0TWFwTW9kdWxlXSA9IFJlYWN0LnVzZVN0YXRlPHR5cGVvZiBqaW11TWFwPihudWxsKVxuICBjb25zdCBnZXRMYXllckZ1blJlZiA9IFJlYWN0LnVzZVJlZjwoKSA9PiBfX2VzcmkuR3JhcGhpY3NMYXllciB8IF9fZXNyaS5NYXBOb3Rlc0xheWVyPihudWxsKVxuICBjb25zdCBncmFwaGljUmVmID0gUmVhY3QudXNlUmVmKG51bGwpXG4gIGNvbnN0IFtjbGVhckFmdGVyQXBwbHksIHNldENsZWFyQWZ0ZXJBcHBseV0gPSBSZWFjdC51c2VTdGF0ZShmYWxzZSlcblxuICBjb25zdCB2aXNpYmxlRWxlbWVudHMgPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgY3JlYXRlVG9vbHM6IE9iamVjdC5lbnRyaWVzKHNrZXRjaFRvb2xJbmZvTWFwKS5yZWR1Y2UoXG4gICAgICAgIChyZXN1bHQsIFtrZXksIHZhbHVlXSkgPT4gKHsgLi4ucmVzdWx0LCBbdmFsdWUuZHJhd1Rvb2xOYW1lXTogdG9vbFR5cGVzLmluY2x1ZGVzKGtleSBhcyBDcmVhdGVUb29sVHlwZSkgfSksXG4gICAgICAgIHsgcG9pbnQ6IGZhbHNlIH1cbiAgICAgICkgYXMgYW55LFxuICAgICAgc2VsZWN0aW9uVG9vbHM6IHtcbiAgICAgICAgJ2xhc3NvLXNlbGVjdGlvbic6IGZhbHNlLFxuICAgICAgICAncmVjdGFuZ2xlLXNlbGVjdGlvbic6IGZhbHNlXG4gICAgICB9LFxuICAgICAgc2V0dGluZ3NNZW51OiBmYWxzZSxcbiAgICAgIHVuZG9SZWRvTWVudTogZmFsc2UsXG4gICAgICBkZWxldGVCdXR0b246IHRydWVcbiAgICB9XG4gIH0sIFt0b29sVHlwZXNdKVxuXG4gIGhvb2tzLnVzZUVmZmVjdE9uY2UoKCkgPT4ge1xuICAgIG1vZHVsZUxvYWRlci5sb2FkTW9kdWxlPHR5cGVvZiBqaW11TWFwPignamltdS11aS9hZHZhbmNlZC9tYXAnKS50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgIHNldE1hcE1vZHVsZShyZXN1bHQpXG4gICAgfSlcbiAgfSlcblxuICBjb25zdCBoYW5kbGVEcmF3VG9vbENyZWF0ZWQgPSBSZWFjdC51c2VDYWxsYmFjaygoamltdURyYXdUb29sc1JlZjogamltdU1hcC5KaW11RHJhd0NyZWF0ZWREZXNjcmlwdG9yKSA9PiB7XG4gICAgZ2V0TGF5ZXJGdW5SZWYuY3VycmVudCA9IGppbXVEcmF3VG9vbHNSZWYuZ2V0R3JhcGhpY3NMYXllclxuICB9LCBbXSlcblxuICBjb25zdCBoYW5kbGVEcmF3U3RhcnQgPSBSZWFjdC51c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgZ2V0TGF5ZXJGdW5SZWYuY3VycmVudCAmJiAoKGdldExheWVyRnVuUmVmLmN1cnJlbnQpKCkgYXMgX19lc3JpLkdyYXBoaWNzTGF5ZXIpLnJlbW92ZUFsbCgpXG4gIH0sIFtdKVxuXG4gIGNvbnN0IGhhbmRsZURyYXdFbmQgPSBSZWFjdC51c2VDYWxsYmFjayhcbiAgICAoZ3JhcGhpYykgPT4ge1xuICAgICAgZ3JhcGhpY1JlZi5jdXJyZW50ID0gZ3JhcGhpY1xuICAgICAgb25EcmF3RW5kKGdyYXBoaWMsIGdldExheWVyRnVuUmVmLmN1cnJlbnQsIGNsZWFyQWZ0ZXJBcHBseSlcbiAgICB9LFxuICAgIFtvbkRyYXdFbmQsIGNsZWFyQWZ0ZXJBcHBseV1cbiAgKVxuXG4gIGNvbnN0IGhhbmRsZUNsZWFyZWQgPSBSZWFjdC51c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgZ3JhcGhpY1JlZi5jdXJyZW50ID0gbnVsbFxuICAgIG9uRHJhd0VuZChudWxsKVxuICB9LCBbb25EcmF3RW5kXSlcblxuICBjb25zdCBoYW5kbGVDbGVhclNldHRpbmdDaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjaygoZSkgPT4ge1xuICAgIGlmIChncmFwaGljUmVmLmN1cnJlbnQpIHtcbiAgICAgIG9uRHJhd0VuZChncmFwaGljUmVmLmN1cnJlbnQsIGdldExheWVyRnVuUmVmLmN1cnJlbnQsIGUudGFyZ2V0LmNoZWNrZWQpXG4gICAgfVxuICAgIHNldENsZWFyQWZ0ZXJBcHBseShlLnRhcmdldC5jaGVja2VkKVxuICB9LCBbb25EcmF3RW5kXSlcblxuICBjb25zdCBKaW11RHJhdyA9IG1hcE1vZHVsZT8uSmltdURyYXdcbiAgaWYgKCFKaW11RHJhdykge1xuICAgIHJldHVybiA8U3RhdHVzSW5kaWNhdG9yIHN0YXR1c1R5cGU9e0VudGl0eVN0YXR1c1R5cGUuTG9hZGluZ30gLz5cbiAgfVxuICBjb25zdCBpc0F2YWlsYWJsZSA9IE9iamVjdC5rZXlzKHZpc2libGVFbGVtZW50cy5jcmVhdGVUb29scykuc29tZSh0b29sTmFtZSA9PiB2aXNpYmxlRWxlbWVudHMuY3JlYXRlVG9vbHNbdG9vbE5hbWVdKVxuICBpZiAoIWlzQXZhaWxhYmxlKSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuICByZXR1cm4gKFxuICAgIDxkaXY+XG4gICAgICA8SmltdURyYXdcbiAgICAgICAgamltdU1hcFZpZXc9e2ppbXVNYXBWaWV3fVxuICAgICAgICBvcGVyYXRvcldpZGdldElkPXt3aWRnZXRJZH1cbiAgICAgICAgZGlzYWJsZVN5bWJvbFNlbGVjdG9yXG4gICAgICAgIGRyYXdpbmdPcHRpb25zPXt7XG4gICAgICAgICAgY3JlYXRpb25Nb2RlOiBtYXBNb2R1bGUuSmltdURyYXdDcmVhdGlvbk1vZGUuU2luZ2xlLFxuICAgICAgICAgIHVwZGF0ZU9uR3JhcGhpY0NsaWNrOiBmYWxzZSxcbiAgICAgICAgICB2aXNpYmxlRWxlbWVudHM6IHZpc2libGVFbGVtZW50c1xuICAgICAgICB9fVxuICAgICAgICB1aU9wdGlvbnM9e3tcbiAgICAgICAgICBpc0hpZGVCb3JkZXI6IHRydWVcbiAgICAgICAgfX1cbiAgICAgICAgb25KaW11RHJhd0NyZWF0ZWQ9e2hhbmRsZURyYXdUb29sQ3JlYXRlZH1cbiAgICAgICAgb25EcmF3aW5nU3RhcnRlZD17aGFuZGxlRHJhd1N0YXJ0fVxuICAgICAgICBvbkRyYXdpbmdGaW5pc2hlZD17aGFuZGxlRHJhd0VuZH1cbiAgICAgICAgb25EcmF3aW5nQ2xlYXJlZD17aGFuZGxlQ2xlYXJlZH1cbiAgICAgIC8+XG4gICAgICA8bGFiZWwgY2xhc3NOYW1lPSdkLWZsZXggYWxpZ24taXRlbXMtY2VudGVyJz5cbiAgICAgICAgPENoZWNrYm94IGNoZWNrZWQ9e2NsZWFyQWZ0ZXJBcHBseX0gb25DaGFuZ2U9e2hhbmRsZUNsZWFyU2V0dGluZ0NoYW5nZX0gY2xhc3NOYW1lPSdtci0yJyAvPlxuICAgICAgICB7Z2V0STE4bk1lc3NhZ2UoJ2NsZWFyRHJhd2luZycpfVxuICAgICAgPC9sYWJlbD5cbiAgICA8L2Rpdj5cbiAgKVxufVxuIiwiaW1wb3J0IHsgUmVhY3QsIGhvb2tzIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgTG9hZGluZywgTG9hZGluZ1R5cGUgfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHsgc3R5bGVkIH0gZnJvbSAnamltdS10aGVtZSdcbmltcG9ydCBkZWZhdWx0TWVzc2FnZSBmcm9tICcuL3RyYW5zbGF0aW9ucy9kZWZhdWx0J1xuXG5jb25zdCBSb290ID0gc3R5bGVkLmRpdmBcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0b3A6IDA7XG4gIGJvdHRvbTogMDtcbiAgcmlnaHQ6IDA7XG4gIGxlZnQ6IDA7XG4gIHotaW5kZXg6IDI7XG5cbiAgLmxvYWRpbmctY29udGVudCB7XG4gICAgLmxvYWRpbmctdGlwIHtcbiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICB9XG4gIH1cbmBcbmV4cG9ydCBmdW5jdGlvbiBMb2FkaW5nUmVzdWx0ICgpIHtcbiAgY29uc3QgdHJhbnNsYXRlID0gaG9va3MudXNlVHJhbnNsYXRpb24oZGVmYXVsdE1lc3NhZ2UpXG4gIHJldHVybiAoXG4gICAgPFJvb3Q+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT0nbG9hZGluZy1jb250ZW50IHctMTAwIHB4LTQgZC1mbGV4IGZsZXgtY29sdW1uIGp1c3RpZnktY29udGVudC1jZW50ZXIgYWxpZ24taXRlbXMtY2VudGVyJz5cbiAgICAgICAgPGRpdiByb2xlPSdhbGVydCcgYXJpYS1saXZlPSdhc3NlcnRpdmUnIGNsYXNzTmFtZT0ndGV4dC1wYXBlcic+XG4gICAgICAgICAge3RyYW5zbGF0ZSgncmV0cmlldmluZycpfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPExvYWRpbmcgY2xhc3NOYW1lPSdsb2FkaW5nLXRpcCBtdC04JyB0eXBlPXtMb2FkaW5nVHlwZS5Eb251dH0vPlxuICAgICAgPC9kaXY+XG4gICAgPC9Sb290PlxuICApXG59XG5cblxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQge1xuICBSZWFjdCxcbiAgUmVhY3RSZWR1eCxcbiAganN4LFxuICBjc3MsXG4gIHR5cGUgRGF0YVNvdXJjZSxcbiAgdHlwZSBGZWF0dXJlRGF0YVJlY29yZCxcbiAgdHlwZSBJTVN0YXRlLFxuICBjbGFzc05hbWVzXG59IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IEJ1dHRvbiB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQgeyBUcmFzaE91dGxpbmVkIH0gZnJvbSAnamltdS1pY29ucy9vdXRsaW5lZC9lZGl0b3IvdHJhc2gnXG5pbXBvcnQgRmVhdHVyZUluZm8gZnJvbSAnLi9jb21wb25lbnRzL2ZlYXR1cmUtaW5mbydcbmltcG9ydCB7IExpc3REaXJlY3Rpb24gfSBmcm9tICcuLi9jb25maWcnXG5pbXBvcnQgeyBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyIH0gZnJvbSAnd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24nXG5cbmNvbnN0IGRlYnVnTG9nZ2VyID0gY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlcigpXG5cbmV4cG9ydCBpbnRlcmZhY2UgUmVzdWx0SXRlbVByb3BzIHtcbiAgd2lkZ2V0SWQ6IHN0cmluZ1xuICBwb3B1cFRlbXBsYXRlOiBhbnlcbiAgZGVmYXVsdFBvcHVwVGVtcGxhdGU6IGFueVxuICBkYXRhOiBGZWF0dXJlRGF0YVJlY29yZFxuICBkYXRhU291cmNlOiBEYXRhU291cmNlXG4gIGV4cGFuZEJ5RGVmYXVsdDogYm9vbGVhblxuICBvbkNsaWNrOiAocmVjb3JkOiBGZWF0dXJlRGF0YVJlY29yZCkgPT4gdm9pZFxuICBvblJlbW92ZTogKHJlY29yZDogRmVhdHVyZURhdGFSZWNvcmQpID0+IHZvaWRcbn1cblxuY29uc3Qgc3R5bGUgPSBjc3NgXG4gIG92ZXJmbG93OiBhdXRvO1xuICBmbGV4LWZsb3c6IHJvdztcbiAgY3Vyc29yOiBwb2ludGVyO1xuICBmbGV4LXNocmluazogMDtcbiAgbWluLWhlaWdodDogMnJlbTtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAmLnNlbGVjdGVkIHtcbiAgICBvdXRsaW5lOiAycHggc29saWQgdmFyKC0tc3lzLWNvbG9yLXByaW1hcnktbWFpbik7XG4gIH1cbiAgXG4gIC5yZW1vdmUtYnV0dG9uIHtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgdG9wOiA0cHg7XG4gICAgcmlnaHQ6IDRweDtcbiAgICB6LWluZGV4OiAxMDtcbiAgICBvcGFjaXR5OiAwLjc7XG4gICAgdHJhbnNpdGlvbjogb3BhY2l0eSAwLjJzO1xuICAgIFxuICAgICY6aG92ZXIge1xuICAgICAgb3BhY2l0eTogMTtcbiAgICB9XG4gICAgXG4gICAgLy8gTGFyZ2VyIHRvdWNoIHRhcmdldCBmb3IgbW9iaWxlL2FjY2Vzc2liaWxpdHlcbiAgICBtaW4td2lkdGg6IDMycHg7XG4gICAgbWluLWhlaWdodDogMzJweDtcbiAgfVxuYFxuXG4vKipcbiAqIFF1ZXJ5UmVzdWx0SXRlbSBjb21wb25lbnQgLSBkaXNwbGF5cyBhIHNpbmdsZSBxdWVyeSByZXN1bHQgcmVjb3JkXG4gKiBGZWF0dXJlczpcbiAqIC0gQ2xpY2tpbmcgdGhlIGl0ZW0gem9vbXMgdG8gdGhlIGZlYXR1cmUgb24gdGhlIG1hcFxuICogLSBSZW1vdmUgYnV0dG9uICh0cmFzaCBpY29uKSBpbiB1cHBlci1yaWdodCBjb3JuZXIgdG8gcmVtb3ZlIHJlY29yZCBmcm9tIHJlc3VsdHNcbiAqIC0gUmVjb3JkcyBhcmUgZXhwYW5kZWQgYnkgZGVmYXVsdCB0byBzaG93IGZ1bGwgZmVhdHVyZSBpbmZvcm1hdGlvblxuICovXG5leHBvcnQgY29uc3QgUXVlcnlSZXN1bHRJdGVtID0gKHByb3BzOiBSZXN1bHRJdGVtUHJvcHMpID0+IHtcbiAgY29uc3QgeyB3aWRnZXRJZCwgZGF0YSwgZGF0YVNvdXJjZSwgcG9wdXBUZW1wbGF0ZSwgZGVmYXVsdFBvcHVwVGVtcGxhdGUsIG9uQ2xpY2ssIG9uUmVtb3ZlLCBleHBhbmRCeURlZmF1bHQgPSBmYWxzZSB9ID0gcHJvcHNcbiAgXG4gIGNvbnN0IHJlY29yZElkID0gZGF0YS5nZXRJZCgpXG4gIFxuICAvLyBMb2cgd2hlbiBRdWVyeVJlc3VsdEl0ZW0gcmVuZGVyc1xuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnRVhQQU5ELUNPTExBUFNFJywge1xuICAgICAgZXZlbnQ6ICdRdWVyeVJlc3VsdEl0ZW0tcmVuZGVyJyxcbiAgICAgIHJlY29yZElkLFxuICAgICAgZXhwYW5kQnlEZWZhdWx0LFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgfSwgW3JlY29yZElkLCBleHBhbmRCeURlZmF1bHRdKVxuICBcbiAgLy8gQ2hlY2sgaWYgdGhpcyByZWNvcmQgaXMgY3VycmVudGx5IHNlbGVjdGVkXG4gIGNvbnN0IHNlbGVjdGVkID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+XG4gICAgc3RhdGUuZGF0YVNvdXJjZXNJbmZvPy5bZGF0YVNvdXJjZS5pZF0/LnNlbGVjdGVkSWRzPy5pbmNsdWRlcyhkYXRhLmdldElkKCkpXG4gIClcbiAgXG4gIC8vIERldGVybWluZSBpZiBsaXN0IGlzIGRpc3BsYXllZCB2ZXJ0aWNhbGx5IChhZmZlY3RzIEZlYXR1cmVJbmZvIGV4cGFuZGFiaWxpdHkpXG4gIGNvbnN0IGlzVmVydGljYWxBbGlnbiA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XG4gICAgY29uc3Qgd2lkZ2V0SnNvbiA9IHN0YXRlLmFwcENvbmZpZy53aWRnZXRzW3dpZGdldElkXVxuICAgIHJldHVybiB3aWRnZXRKc29uLmNvbmZpZy5yZXN1bHRMaXN0RGlyZWN0aW9uICE9PSBMaXN0RGlyZWN0aW9uLkhvcml6b250YWxcbiAgfSlcblxuICAvLyBIYW5kbGUgY2xpY2tpbmcgb24gdGhlIHJlc3VsdCBpdGVtIC0gem9vbXMgdG8gZmVhdHVyZSBvbiBtYXBcbiAgY29uc3QgaGFuZGxlQ2xpY2tSZXN1bHRJdGVtID0gUmVhY3QudXNlQ2FsbGJhY2soKGU6IFJlYWN0Lk1vdXNlRXZlbnQpID0+IHtcbiAgICAvLyBEb24ndCB0cmlnZ2VyIHpvb20gaWYgY2xpY2tpbmcgdGhlIHJlbW92ZSBidXR0b25cbiAgICBpZiAoKGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50KS5jbG9zZXN0KCcucmVtb3ZlLWJ1dHRvbicpKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgb25DbGljayhkYXRhKVxuICB9LCBbb25DbGljaywgZGF0YV0pXG5cbiAgLy8gSGFuZGxlIGNsaWNraW5nIHRoZSByZW1vdmUgYnV0dG9uIC0gcmVtb3ZlcyByZWNvcmQgZnJvbSByZXN1bHRzIGFuZCBzZWxlY3Rpb25cbiAgY29uc3QgaGFuZGxlUmVtb3ZlID0gUmVhY3QudXNlQ2FsbGJhY2soKGU6IFJlYWN0Lk1vdXNlRXZlbnQpID0+IHtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpIC8vIFByZXZlbnQgdHJpZ2dlcmluZyB0aGUgaXRlbSBjbGljayBoYW5kbGVyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgb25SZW1vdmUoZGF0YSlcbiAgfSwgW29uUmVtb3ZlLCBkYXRhXSlcblxuICBjb25zdCBvbktleVVwID0gUmVhY3QudXNlQ2FsbGJhY2soKGV2dCkgPT4ge1xuICAgIGlmIChldnQua2V5ID09PSAnRW50ZXInIHx8IGV2dC5rZXkgPT09ICcgJykge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KClcbiAgICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKVxuICAgICAgaGFuZGxlQ2xpY2tSZXN1bHRJdGVtKGV2dCBhcyBhbnkpXG4gICAgfVxuICB9LCBbaGFuZGxlQ2xpY2tSZXN1bHRJdGVtXSlcblxuICByZXR1cm4gKFxuICAgIDxkaXZcbiAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcygncXVlcnktcmVzdWx0LWl0ZW0nLCB7IHNlbGVjdGVkIH0pfVxuICAgICAgb25DbGljaz17aGFuZGxlQ2xpY2tSZXN1bHRJdGVtfVxuICAgICAgb25LZXlVcD17b25LZXlVcH1cbiAgICAgIGNzcz17c3R5bGV9XG4gICAgICByb2xlPSdvcHRpb24nXG4gICAgICBhcmlhLXNlbGVjdGVkPXtzZWxlY3RlZH1cbiAgICAgIHRhYkluZGV4PXswfVxuICAgID5cbiAgICAgIDxGZWF0dXJlSW5mb1xuICAgICAgICBncmFwaGljPXtkYXRhLmZlYXR1cmUgYXMgX19lc3JpLkdyYXBoaWN9XG4gICAgICAgIHBvcHVwVGVtcGxhdGU9e3BvcHVwVGVtcGxhdGV9XG4gICAgICAgIGRlZmF1bHRQb3B1cFRlbXBsYXRlPXtkZWZhdWx0UG9wdXBUZW1wbGF0ZX1cbiAgICAgICAgdG9nZ2xhYmxlPXtpc1ZlcnRpY2FsQWxpZ259XG4gICAgICAgIGV4cGFuZEJ5RGVmYXVsdD17ZXhwYW5kQnlEZWZhdWx0fVxuICAgICAgICBkYXRhU291cmNlPXtkYXRhU291cmNlfVxuICAgICAgLz5cbiAgICAgIDxCdXR0b25cbiAgICAgICAgY2xhc3NOYW1lPVwicmVtb3ZlLWJ1dHRvblwiXG4gICAgICAgIGljb25cbiAgICAgICAgc2l6ZT1cInNtXCJcbiAgICAgICAgdmFyaWFudD1cInRleHRcIlxuICAgICAgICBjb2xvcj1cImluaGVyaXRcIlxuICAgICAgICBvbkNsaWNrPXtoYW5kbGVSZW1vdmV9XG4gICAgICAgIGFyaWEtbGFiZWw9XCJSZW1vdmUgcmVjb3JkXCJcbiAgICAgICAgY3NzPXtjc3NgXG4gICAgICAgICAgcGFkZGluZzogNnB4O1xuICAgICAgICAgIG1pbi13aWR0aDogMzJweDtcbiAgICAgICAgICB3aWR0aDogMzJweDtcbiAgICAgICAgICBoZWlnaHQ6IDMycHg7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgICBgfVxuICAgICAgPlxuICAgICAgICA8VHJhc2hPdXRsaW5lZCBzaXplPXsxOH0gLz5cbiAgICAgIDwvQnV0dG9uPlxuICAgIDwvZGl2PlxuICApXG59XG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7XG4gIFJlYWN0LFxuICBqc3gsXG4gIGNzcyxcbiAgUmVhY3RSZWR1eCxcbiAgdHlwZSBJTVN0YXRlLFxuICB0eXBlIERhdGFTb3VyY2UsXG4gIHR5cGUgSW1tdXRhYmxlT2JqZWN0LFxuICB0eXBlIERhdGFSZWNvcmQsXG4gIHR5cGUgUXVlcnlQYXJhbXMsXG4gIERhdGFTb3VyY2VDb21wb25lbnQsXG4gIERhdGFTb3VyY2VNYW5hZ2VyLFxuICBJbW11dGFibGUsXG4gIGhvb2tzLFxuICBNZXNzYWdlTWFuYWdlcixcbiAgRGF0YVJlY29yZHNTZWxlY3Rpb25DaGFuZ2VNZXNzYWdlLFxuICB0eXBlIEZlYXR1cmVEYXRhUmVjb3JkLFxuICB0eXBlIERhdGFSZWNvcmRTZXQsXG4gIHR5cGUgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSxcbiAgZm9jdXNFbGVtZW50SW5LZXlib2FyZE1vZGUsXG4gIERhdGFBY3Rpb25NYW5hZ2VyLFxuICBEYXRhTGV2ZWwsXG4gIHVzZUludGxcbn0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgQnV0dG9uLCBJY29uLCBUb29sdGlwLCBEYXRhQWN0aW9uTGlzdCwgRGF0YUFjdGlvbkxpc3RTdHlsZSB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQgeyBnZXRXaWRnZXRSdW50aW1lRGF0YU1hcCB9IGZyb20gJy4vd2lkZ2V0LWNvbmZpZydcbmltcG9ydCB7IHR5cGUgUXVlcnlJdGVtVHlwZSwgRmllbGRzVHlwZSwgUGFnaW5nVHlwZSwgTGlzdERpcmVjdGlvbiwgUmVzdWx0U2VsZWN0TW9kZSwgU2VsZWN0aW9uVHlwZSB9IGZyb20gJy4uL2NvbmZpZydcbmltcG9ydCBkZWZhdWx0TWVzc2FnZSBmcm9tICcuL3RyYW5zbGF0aW9ucy9kZWZhdWx0J1xuaW1wb3J0IHsgdXNlWm9vbVRvUmVjb3JkcyB9IGZyb20gJy4vaG9va3MvdXNlLXpvb20tdG8tcmVjb3Jkcydcbi8vIEZPUkNFRDogQWx3YXlzIFNpbXBsZUxpc3QgLSBMYXp5TGlzdCBhbmQgUGFnaW5nTGlzdCByZW1vdmVkXG5pbXBvcnQgeyBTaW1wbGVMaXN0IH0gZnJvbSAnLi9zaW1wbGUtbGlzdCdcbmltcG9ydCB7IGNvbWJpbmVGaWVsZHMgfSBmcm9tICcuL3F1ZXJ5LXV0aWxzJ1xuaW1wb3J0IHsgREVGQVVMVF9RVUVSWV9JVEVNIH0gZnJvbSAnLi4vZGVmYXVsdC1xdWVyeS1pdGVtJ1xuaW1wb3J0IHsgQXJyb3dMZWZ0T3V0bGluZWQgfSBmcm9tICdqaW11LWljb25zL291dGxpbmVkL2RpcmVjdGlvbmFsL2Fycm93LWxlZnQnXG5pbXBvcnQgeyBFeHBhbmRBbGxPdXRsaW5lZCB9IGZyb20gJ2ppbXUtaWNvbnMvb3V0bGluZWQvZGlyZWN0aW9uYWwvZXhwYW5kLWFsbCdcbmltcG9ydCB7IENvbGxhcHNlQWxsT3V0bGluZWQgfSBmcm9tICdqaW11LWljb25zL291dGxpbmVkL2RpcmVjdGlvbmFsL2NvbGxhcHNlLWFsbCdcbmltcG9ydCB7IGdldEV4dHJhQWN0aW9ucyB9IGZyb20gJy4uL2RhdGEtYWN0aW9ucydcbmltcG9ydCB7IFxuICBzZWxlY3RSZWNvcmRzSW5EYXRhU291cmNlcywgXG4gIGNsZWFyU2VsZWN0aW9uSW5EYXRhU291cmNlcywgXG4gIHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoLFxuICBwdWJsaXNoU2VsZWN0aW9uTWVzc2FnZSxcbiAgZGlzcGF0Y2hTZWxlY3Rpb25FdmVudCBcbn0gZnJvbSAnLi9zZWxlY3Rpb24tdXRpbHMnXG5pbXBvcnQgeyByZW1vdmVSZXN1bHRzRnJvbUFjY3VtdWxhdGVkLCByZW1vdmVSZWNvcmRzRnJvbU9yaWdpblNlbGVjdGlvbnMgfSBmcm9tICcuL3Jlc3VsdHMtbWFuYWdlbWVudC11dGlscydcbmltcG9ydCB7IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIgfSBmcm9tICd3aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbidcblxuY29uc3QgZGVidWdMb2dnZXIgPSBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyKClcbmltcG9ydCB7IEVycm9yTWVzc2FnZSB9IGZyb20gJ3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uJ1xuY29uc3QgeyBpY29uTWFwIH0gPSBnZXRXaWRnZXRSdW50aW1lRGF0YU1hcCgpXG5cbi8qKlxuICogQ3VzdG9tIGV2ZW50IG5hbWUgZm9yIHJlcXVlc3RpbmcgcmVzdG9yYXRpb24gd2hlbiBpZGVudGlmeSBwb3B1cCBjbG9zZXMuXG4gKi9cbmNvbnN0IFJFU1RPUkVfT05fSURFTlRJRllfQ0xPU0VfRVZFTlQgPSAncXVlcnlzaW1wbGUtcmVzdG9yZS1vbi1pZGVudGlmeS1jbG9zZSdcblxuLyoqXG4gKiBEZXRlY3RzIGlmIGFuIGlkZW50aWZ5IHBvcHVwIGlzIGN1cnJlbnRseSB2aXNpYmxlIGluIHRoZSBET00uXG4gKiBVc2VzIHZlcmlmaWVkIHNlbGVjdG9ycyBiYXNlZCBvbiBFeHBlcmllbmNlIEJ1aWxkZXIncyBpZGVudGlmeSBwb3B1cCBzdHJ1Y3R1cmUuXG4gKiBcbiAqIEByZXR1cm5zIHRydWUgaWYgaWRlbnRpZnkgcG9wdXAgaXMgZGV0ZWN0ZWQgYW5kIHZpc2libGUsIGZhbHNlIG90aGVyd2lzZVxuICovXG5mdW5jdGlvbiBpc0lkZW50aWZ5UG9wdXBPcGVuKCk6IGJvb2xlYW4ge1xuICAvLyBQcmltYXJ5IHNlbGVjdG9yOiAuZXNyaS1wb3B1cCB3aXRoIHJvbGU9XCJkaWFsb2dcIlxuICBjb25zdCBwb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lc3JpLXBvcHVwW3JvbGU9XCJkaWFsb2dcIl0nKVxuICBcbiAgaWYgKCFwb3B1cCkge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG4gIFxuICAvLyBWZXJpZnkgaXQncyB2aXNpYmxlIChub3QgaGlkZGVuKVxuICBjb25zdCBhcmlhSGlkZGVuID0gcG9wdXAuZ2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicpXG4gIGlmIChhcmlhSGlkZGVuID09PSAndHJ1ZScpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuICBcbiAgLy8gQWRkaXRpb25hbCBjaGVjazogdmVyaWZ5IGNvbXB1dGVkIHN0eWxlIHNob3dzIGl0J3MgdmlzaWJsZVxuICBjb25zdCBzdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHBvcHVwKVxuICBpZiAoc3R5bGUuZGlzcGxheSA9PT0gJ25vbmUnIHx8IHN0eWxlLnZpc2liaWxpdHkgPT09ICdoaWRkZW4nIHx8IHN0eWxlLm9wYWNpdHkgPT09ICcwJykge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG4gIFxuICAvLyBWZXJpZnkgaXQgY29udGFpbnMgZXNyaS1mZWF0dXJlcyAoaWRlbnRpZnkgcG9wdXAgc3RydWN0dXJlKVxuICBjb25zdCBoYXNGZWF0dXJlcyA9IHBvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5lc3JpLWZlYXR1cmVzJylcbiAgaWYgKCFoYXNGZWF0dXJlcykge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG4gIFxuICByZXR1cm4gdHJ1ZVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFF1ZXJ5VGFza1Jlc3VsdFByb3BzIHtcbiAgd2lkZ2V0SWQ6IHN0cmluZ1xuICByZXN1bHRDb3VudDogbnVtYmVyXG4gIG1heFBlclBhZ2U6IG51bWJlclxuICBxdWVyeVBhcmFtczogUXVlcnlQYXJhbXNcbiAgb3V0cHV0RFM6IERhdGFTb3VyY2VcbiAgcXVlcnlJdGVtOiBJbW11dGFibGVPYmplY3Q8UXVlcnlJdGVtVHlwZT5cbiAgcmVjb3JkczogRGF0YVJlY29yZFtdXG4gIHJ1bnRpbWVab29tVG9TZWxlY3RlZD86IGJvb2xlYW5cbiAgb25OYXZCYWNrOiAoY2xlYXJSZXN1bHRzPzogYm9vbGVhbikgPT4gUHJvbWlzZTx2b2lkPiB8IHZvaWRcbiAgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodD86IGJvb2xlYW5cbiAgZ3JhcGhpY3NMYXllcj86IF9fZXNyaS5HcmFwaGljc0xheWVyXG4gIG1hcFZpZXc/OiBfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXdcbiAgcmVzdWx0c01vZGU/OiBTZWxlY3Rpb25UeXBlXG4gIGFjY3VtdWxhdGVkUmVjb3Jkcz86IEZlYXR1cmVEYXRhUmVjb3JkW11cbiAgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2U/OiAocmVjb3JkczogRmVhdHVyZURhdGFSZWNvcmRbXSkgPT4gdm9pZFxufVxuXG5jb25zdCByZXN1bHRTdHlsZSA9IGNzc2BcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcblxuICAucXVlcnktcmVzdWx0X19oZWFkZXIge1xuICAgIGNvbG9yOiB2YXIoLS1zeXMtY29sb3Itc3VyZmFjZS1wYXBlci10ZXh0KTtcbiAgICBmb250LXdlaWdodDogNTAwO1xuICAgIGZvbnQtc2l6ZTogMC44NzVyZW07XG4gICAgbGluZS1oZWlnaHQ6IDEuNTtcbiAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tc3lzLWNvbG9yLWRpdmlkZXItc2Vjb25kYXJ5KTtcbiAgICBtYXJnaW4tYm90dG9tOiA2cHg7XG4gICAgcGFkZGluZy1ib3R0b206IDhweDtcbiAgfVxuXG4gIC5xdWVyeS1yZXN1bHQtY29udGFpbmVyIHtcbiAgICBmbGV4OiAxIDEgMDtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgb3ZlcmZsb3c6IGF1dG87XG4gICAgbWluLWhlaWdodDogMDtcbiAgfVxuXG4gIC5xdWVyeS1yZXN1bHQtaW5mbyB7XG4gICAgaGVpZ2h0OiAxOHB4O1xuICB9XG5gXG5cbmV4cG9ydCBmdW5jdGlvbiBRdWVyeVRhc2tSZXN1bHQgKHByb3BzOiBRdWVyeVRhc2tSZXN1bHRQcm9wcykge1xuICBjb25zdCB7IHF1ZXJ5SXRlbSwgcXVlcnlQYXJhbXMsIHJlc3VsdENvdW50LCBtYXhQZXJQYWdlLCByZWNvcmRzLCB3aWRnZXRJZCwgb3V0cHV0RFMsIHJ1bnRpbWVab29tVG9TZWxlY3RlZCwgb25OYXZCYWNrLCByZXN1bHRzTW9kZSwgYWNjdW11bGF0ZWRSZWNvcmRzLCBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZSwgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCwgZ3JhcGhpY3NMYXllciwgbWFwVmlldyB9ID0gcHJvcHNcbiAgY29uc3QgZ2V0STE4bk1lc3NhZ2UgPSBob29rcy51c2VUcmFuc2xhdGlvbihkZWZhdWx0TWVzc2FnZSlcbiAgY29uc3QgaW50bCA9IHVzZUludGwoKVxuICBjb25zdCB6b29tVG9SZWNvcmRzID0gdXNlWm9vbVRvUmVjb3JkcyhtYXBWaWV3KVxuICBjb25zdCBbcXVlcnlEYXRhLCBzZXRRdWVyeURhdGFdID0gUmVhY3QudXNlU3RhdGUobnVsbClcbiAgY29uc3QgW3NlbGVjdGVkUmVjb3Jkcywgc2V0U2VsZWN0ZWRSZWNvcmRzXSA9IFJlYWN0LnVzZVN0YXRlPERhdGFSZWNvcmRbXT4oW10pXG4gIGNvbnN0IFtyZW1vdmVkUmVjb3JkSWRzLCBzZXRSZW1vdmVkUmVjb3JkSWRzXSA9IFJlYWN0LnVzZVN0YXRlPFNldDxzdHJpbmc+PihuZXcgU2V0KCkpXG4gIFxuICBjb25zdCBjdXJyZW50SXRlbSA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfUVVFUllfSVRFTSwgcXVlcnlJdGVtKVxuICBjb25zdCBbZXhwYW5kQWxsLCBzZXRFeHBhbmRBbGxdID0gUmVhY3QudXNlU3RhdGUoY3VycmVudEl0ZW0ucmVzdWx0RXhwYW5kQnlEZWZhdWx0ID8/IGZhbHNlKVxuICAvLyBUcmFjayBpbmRpdmlkdWFsIGl0ZW0gZXhwYW5zaW9uIHN0YXRlcyB0byBtYWludGFpbiBzdGF0ZSB3aGVuIGl0ZW1zIGFyZSByZW1vdmVkXG4gIGNvbnN0IFtpdGVtRXhwYW5kU3RhdGVzLCBzZXRJdGVtRXhwYW5kU3RhdGVzXSA9IFJlYWN0LnVzZVN0YXRlPE1hcDxzdHJpbmcsIGJvb2xlYW4+PihuZXcgTWFwKCkpXG4gIGNvbnN0IGJhY2tCdG5SZWYgPSBSZWFjdC51c2VSZWY8SFRNTEJ1dHRvbkVsZW1lbnQ+KHVuZGVmaW5lZClcbiAgXG4gIC8vIFRyYWNrIGV4cGFuZEFsbCBjaGFuZ2VzIGZvciBkZWJ1Z2dpbmdcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgIGV2ZW50OiAnZXhwYW5kQWxsLXN0YXRlLWNoYW5nZWQnLFxuICAgICAgd2lkZ2V0SWQsXG4gICAgICBleHBhbmRBbGwsXG4gICAgICBxdWVyeUl0ZW1Db25maWdJZDogcXVlcnlJdGVtLmNvbmZpZ0lkLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgfSwgW2V4cGFuZEFsbCwgd2lkZ2V0SWQsIHF1ZXJ5SXRlbS5jb25maWdJZF0pXG4gIC8vIFRyYWNrIGlmIHdlJ3ZlIGFscmVhZHkgc2VsZWN0ZWQgdGhlc2UgcmVjb3JkcyB0byBwcmV2ZW50IHJlLXNlbGVjdGlvbiB3aGVuIHN3aXRjaGluZyB0YWJzXG4gIGNvbnN0IGhhc1NlbGVjdGVkUmVmID0gUmVhY3QudXNlUmVmKGZhbHNlKVxuICAvLyBUcmFjayB0aGUgbGFzdCByZWNvcmRzIHdlIHNlbGVjdGVkIHRvIGRldGVjdCB3aGVuIG5ldyByZWNvcmRzIGNvbWUgaW5cbiAgY29uc3QgbGFzdFNlbGVjdGVkUmVjb3Jkc1JlZiA9IFJlYWN0LnVzZVJlZjxzdHJpbmdbXT4oW10pXG4gIC8vIFRyYWNrIHRoZSBvcmlnaW5hbCBxdWVyeSByZWNvcmQgSURzIChub3Qgc2VsZWN0ZWQgSURzKSB0byBkZXRlY3Qgd2hlbiBxdWVyeSByZXN1bHRzIGNoYW5nZVxuICBjb25zdCBsYXN0UXVlcnlSZWNvcmRJZHNSZWYgPSBSZWFjdC51c2VSZWY8c3RyaW5nW10+KFtdKVxuICAvLyBUcmFjayB0aGUgbGFzdCBzZWxlY3RlZCBGZWF0dXJlRGF0YVJlY29yZHMgZm9yIHJlc3RvcmF0aW9uIChpZiBuZWVkZWQpXG4gIGNvbnN0IGxhc3RTZWxlY3RlZEZlYXR1cmVSZWNvcmRzUmVmID0gUmVhY3QudXNlUmVmPEZlYXR1cmVEYXRhUmVjb3JkW10+KFtdKVxuICAvLyBSZWYgdG8gdHJhY2sgcmVtb3ZlZFJlY29yZElkcyBmb3IgdXNlIGluIGNhbGxiYWNrcyAoYXZvaWRzIHN0YWxlIGNsb3N1cmUgaXNzdWVzKVxuICBjb25zdCByZW1vdmVkUmVjb3JkSWRzUmVmID0gUmVhY3QudXNlUmVmPFNldDxzdHJpbmc+PihuZXcgU2V0KCkpXG4gIFxuICAvLyBTeW5jIHJlZiB3aGVuZXZlciByZW1vdmVkUmVjb3JkSWRzIHN0YXRlIGNoYW5nZXNcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICByZW1vdmVkUmVjb3JkSWRzUmVmLmN1cnJlbnQgPSByZW1vdmVkUmVjb3JkSWRzXG4gIH0sIFtyZW1vdmVkUmVjb3JkSWRzXSlcbiAgLy8gRXJyb3Igc3RhdGUgZm9yIHVzZXItZmFjaW5nIGVycm9yc1xuICBjb25zdCBbc2VsZWN0aW9uRXJyb3IsIHNldFNlbGVjdGlvbkVycm9yXSA9IFJlYWN0LnVzZVN0YXRlPHN0cmluZz4obnVsbClcblxuICBjb25zdCBleHRyYUFjdGlvbnMgPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICByZXR1cm4gZ2V0RXh0cmFBY3Rpb25zKHdpZGdldElkLCBvdXRwdXREUywgbWFwVmlldywgaW50bCwgcXVlcnlJdGVtLCBydW50aW1lWm9vbVRvU2VsZWN0ZWQpXG4gIH0sIFt3aWRnZXRJZCwgb3V0cHV0RFMsIG1hcFZpZXcsIGludGwsIHF1ZXJ5SXRlbSwgcnVudGltZVpvb21Ub1NlbGVjdGVkXSlcblxuICBjb25zdCBlbmFibGVEYXRhQWN0aW9uID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcbiAgICBjb25zdCB3aWRnZXRKc29uID0gc3RhdGUuYXBwQ29uZmlnLndpZGdldHNbd2lkZ2V0SWRdXG4gICAgcmV0dXJuIHdpZGdldEpzb24uZW5hYmxlRGF0YUFjdGlvbiA/PyB0cnVlXG4gIH0pXG5cbiAgY29uc3QgcGFnaW5nVHlwZUluQ29uZmlnID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcbiAgICBjb25zdCB3aWRnZXRKc29uID0gc3RhdGUuYXBwQ29uZmlnLndpZGdldHNbd2lkZ2V0SWRdXG4gICAgcmV0dXJuIHdpZGdldEpzb24uY29uZmlnLnJlc3VsdFBhZ2luZ1N0eWxlXG4gIH0pXG4gIGNvbnN0IGRpcmVjdGlvblR5cGVJbkNvbmZpZyA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XG4gICAgY29uc3Qgd2lkZ2V0SnNvbiA9IHN0YXRlLmFwcENvbmZpZy53aWRnZXRzW3dpZGdldElkXVxuICAgIHJldHVybiB3aWRnZXRKc29uLmNvbmZpZy5yZXN1bHRMaXN0RGlyZWN0aW9uXG4gIH0pXG4gIC8vIEZPUkNFIFNpbXBsZUxpc3QgLSBpZ25vcmUgY29uZmlnLCB3ZSdyZSBkb25lIHdpdGggbGF6eSBsb2FkaW5nIGlzc3Vlc1xuICBjb25zdCBwYWdpbmdUeXBlID0gUGFnaW5nVHlwZS5TaW1wbGVcbiAgY29uc3QgZGlyZWN0aW9uID0gZGlyZWN0aW9uVHlwZUluQ29uZmlnID8/IExpc3REaXJlY3Rpb24uVmVydGljYWxcblxuICAvLyBHcm91cCByZWNvcmRzIGJ5IG9yaWdpbiBkYXRhIHNvdXJjZSBmb3IgRGF0YUFjdGlvbkxpc3RcbiAgLy8gVGhpcyBlbnN1cmVzIERhdGFBY3Rpb25MaXN0IHJlY29nbml6ZXMgcmVjb3JkcyBldmVuIHdoZW4gdGhleSBjb21lIGZyb20gZGlmZmVyZW50IHF1ZXJpZXMvb3JpZ2luc1xuICBjb25zdCBhY3Rpb25EYXRhU2V0czogRGF0YVJlY29yZFNldFtdID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgLy8gRGVidWc6IExvZyB3aGF0IHJlY29yZHMgYXJlIGF2YWlsYWJsZVxuICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgZXZlbnQ6ICdhY3Rpb25EYXRhU2V0cy1jYWxjdWxhdGlvbi1zdGFydCcsXG4gICAgICB3aWRnZXRJZDogd2lkZ2V0SWQsXG4gICAgICBzZWxlY3RlZFJlY29yZHNDb3VudDogc2VsZWN0ZWRSZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgIHF1ZXJ5RGF0YVJlY29yZHNDb3VudDogcXVlcnlEYXRhPy5yZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgIHJlY29yZHNQcm9wQ291bnQ6IHJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgb3V0cHV0RFNJZDogb3V0cHV0RFM/LmlkLFxuICAgICAgaGFzU2VsZWN0ZWRSZWNvcmRzOiBzZWxlY3RlZFJlY29yZHM/Lmxlbmd0aCA+IDAsXG4gICAgICBoYXNRdWVyeURhdGFSZWNvcmRzOiBxdWVyeURhdGE/LnJlY29yZHM/Lmxlbmd0aCA+IDAsXG4gICAgICBoYXNSZWNvcmRzUHJvcDogcmVjb3Jkcz8ubGVuZ3RoID4gMFxuICAgIH0pXG4gICAgXG4gICAgY29uc3QgaXNBY2N1bXVsYXRpb25Nb2RlID0gcmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb24gfHwgcmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvblxuICAgIFxuICAgIC8vIEluIGFjY3VtdWxhdGlvbiBtb2RlcyAoQWRkL1JlbW92ZSksIHByZWZlciB0aGUgJ3JlY29yZHMnIHByb3AgKHRoZSBhY2N1bXVsYXRlZCBzZXQpXG4gICAgLy8gYmVjYXVzZSBvdXRwdXREUy5nZXRTZWxlY3RlZFJlY29yZHMoKSB3aWxsIG9ubHkgcmV0dXJuIHJlY29yZHMgdGhhdCBtYXRjaCB0aGUgY3VycmVudCBxdWVyeSdzIHdoZXJlIGNsYXVzZS5cbiAgICBjb25zdCByZWNvcmRzVG9Vc2UgPSBpc0FjY3VtdWxhdGlvbk1vZGVcbiAgICAgID8gKHJlY29yZHMgfHwgW10pXG4gICAgICA6IChzZWxlY3RlZFJlY29yZHM/Lmxlbmd0aCA+IDAgPyBzZWxlY3RlZFJlY29yZHMgOiAocXVlcnlEYXRhPy5yZWNvcmRzPy5sZW5ndGggPiAwID8gcXVlcnlEYXRhLnJlY29yZHMgOiAocmVjb3JkcyB8fCBbXSkpKVxuICAgIFxuICAgIC8vIElmIG5vIHJlY29yZHMsIHJldHVybiBzaW5nbGUgRGF0YVJlY29yZFNldCB3aXRoIGVtcHR5IHJlY29yZHMgdXNpbmcgb3V0cHV0RFNcbiAgICBpZiAoIXJlY29yZHNUb1VzZSB8fCByZWNvcmRzVG9Vc2UubGVuZ3RoID09PSAwKSB7XG4gICAgICBjb25zdCBlbXB0eURhdGFTZXQ6IERhdGFSZWNvcmRTZXQgPSB7XG4gICAgICAgIGRhdGFTb3VyY2U6IG91dHB1dERTLFxuICAgICAgICB0eXBlOiAnbG9hZGVkJyxcbiAgICAgICAgcmVjb3JkczogW10sXG4gICAgICAgIG5hbWU6IG91dHB1dERTPy5pZCxcbiAgICAgICAgbGFiZWw6IG91dHB1dERTPy5nZXRMYWJlbCgpXG4gICAgICB9XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdhY3Rpb25EYXRhU2V0cy1lbXB0eS1yZWNvcmRzJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHdpZGdldElkLFxuICAgICAgICBkYXRhU2V0RGF0YVNvdXJjZUlkOiBlbXB0eURhdGFTZXQuZGF0YVNvdXJjZT8uaWRcbiAgICAgIH0pXG4gICAgICByZXR1cm4gW2VtcHR5RGF0YVNldF1cbiAgICB9XG4gICAgXG4gICAgLy8gR3JvdXAgcmVjb3JkcyBieSB0aGVpciBvcmlnaW4gZGF0YSBzb3VyY2VcbiAgICBjb25zdCByZWNvcmRzQnlPcmlnaW5EUyA9IG5ldyBNYXA8RmVhdHVyZUxheWVyRGF0YVNvdXJjZSwgRmVhdHVyZURhdGFSZWNvcmRbXT4oKVxuICAgIFxuICAgIHJlY29yZHNUb1VzZS5mb3JFYWNoKHJlY29yZCA9PiB7XG4gICAgICBjb25zdCByZWNvcmREUyA9IChyZWNvcmQgYXMgRmVhdHVyZURhdGFSZWNvcmQpLmdldERhdGFTb3VyY2U/LigpIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgICAgIGxldCBvcmlnaW5EUzogRmVhdHVyZUxheWVyRGF0YVNvdXJjZSB8IG51bGwgPSBudWxsXG4gICAgICBcbiAgICAgIGlmIChyZWNvcmREUykge1xuICAgICAgICBvcmlnaW5EUyA9IHJlY29yZERTLmdldE9yaWdpbkRhdGFTb3VyY2VzKCk/LlswXSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlIHx8IHJlY29yZERTXG4gICAgICB9IGVsc2UgaWYgKG91dHB1dERTKSB7XG4gICAgICAgIC8vIEZhbGxiYWNrOiB1c2Ugb3V0cHV0RFMncyBvcmlnaW4gaWYgcmVjb3JkIGRvZXNuJ3QgaGF2ZSBkYXRhU291cmNlXG4gICAgICAgIG9yaWdpbkRTID0gb3V0cHV0RFMuZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKT8uWzBdIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2UgfHwgb3V0cHV0RFMgYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAob3JpZ2luRFMpIHtcbiAgICAgICAgaWYgKCFyZWNvcmRzQnlPcmlnaW5EUy5oYXMob3JpZ2luRFMpKSB7XG4gICAgICAgICAgcmVjb3Jkc0J5T3JpZ2luRFMuc2V0KG9yaWdpbkRTLCBbXSlcbiAgICAgICAgfVxuICAgICAgICByZWNvcmRzQnlPcmlnaW5EUy5nZXQob3JpZ2luRFMpLnB1c2gocmVjb3JkIGFzIEZlYXR1cmVEYXRhUmVjb3JkKVxuICAgICAgfVxuICAgIH0pXG4gICAgXG4gICAgLy8gQ3JlYXRlIGEgRGF0YVJlY29yZFNldCBmb3IgZWFjaCBvcmlnaW4gZGF0YSBzb3VyY2VcbiAgICBjb25zdCBkYXRhU2V0czogRGF0YVJlY29yZFNldFtdID0gQXJyYXkuZnJvbShyZWNvcmRzQnlPcmlnaW5EUy5lbnRyaWVzKCkpLm1hcCgoW29yaWdpbkRTLCBvcmlnaW5SZWNvcmRzXSkgPT4ge1xuICAgICAgY29uc3QgZGF0YVNldDogRGF0YVJlY29yZFNldCA9IHtcbiAgICAgICAgZGF0YVNvdXJjZTogb3JpZ2luRFMsIC8vIFVzZSBvcmlnaW4gRFMsIG5vdCBvdXRwdXREU1xuICAgICAgICB0eXBlOiAnc2VsZWN0ZWQnLFxuICAgICAgICByZWNvcmRzOiBvcmlnaW5SZWNvcmRzLFxuICAgICAgICBuYW1lOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgbGFiZWw6IG9yaWdpbkRTLmdldExhYmVsKClcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQWRkIGZpZWxkcyBpZiBuZWVkZWQgKHVzZSBjdXJyZW50SXRlbSdzIGZpZWxkIHNldHRpbmdzKVxuICAgICAgaWYgKGN1cnJlbnRJdGVtLnJlc3VsdEZpZWxkc1R5cGUgPT09IEZpZWxkc1R5cGUuU2VsZWN0QXR0cmlidXRlcyAmJiBjdXJyZW50SXRlbS5yZXN1bHREaXNwbGF5RmllbGRzICE9IG51bGwpIHtcbiAgICAgICAgZGF0YVNldC5maWVsZHMgPSBjb21iaW5lRmllbGRzKGN1cnJlbnRJdGVtLnJlc3VsdERpc3BsYXlGaWVsZHMsIGN1cnJlbnRJdGVtLnJlc3VsdFRpdGxlRXhwcmVzc2lvbilcbiAgICAgIH0gZWxzZSBpZiAob3JpZ2luRFMgJiYgJ2dldFBvcHVwSW5mbycgaW4gb3JpZ2luRFMpIHtcbiAgICAgICAgLy8gdXNlIGZpZWxkcyBpbiBwb3B1cCB0ZW1wbGF0ZSBmcm9tIG9yaWdpbiBEU1xuICAgICAgICBjb25zdCBwb3B1cEluZm8gPSBvcmlnaW5EUy5nZXRQb3B1cEluZm8oKVxuICAgICAgICBpZiAocG9wdXBJbmZvPy5maWVsZEluZm9zKSB7XG4gICAgICAgICAgZGF0YVNldC5maWVsZHMgPSBwb3B1cEluZm8uZmllbGRJbmZvcy5maWx0ZXIoKGZpZWxkSW5mbykgPT4gZmllbGRJbmZvLnZpc2libGUpLm1hcCgoZmllbGRJbmZvKSA9PiBmaWVsZEluZm8uZmllbGROYW1lKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiBkYXRhU2V0XG4gICAgfSlcbiAgICBcbiAgICAvLyBEZWJ1ZzogTG9nIHdoYXQgdGhlIGZpbmFsIGRhdGFTZXRzIGNvbnRhaW5cbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgIGV2ZW50OiAnYWN0aW9uRGF0YVNldHMtZmluYWwnLFxuICAgICAgd2lkZ2V0SWQ6IHdpZGdldElkLFxuICAgICAgZGF0YVNldHNDb3VudDogZGF0YVNldHMubGVuZ3RoLFxuICAgICAgdG90YWxSZWNvcmRzQ291bnQ6IHJlY29yZHNUb1VzZS5sZW5ndGgsXG4gICAgICBkYXRhU2V0c0J5T3JpZ2luOiBkYXRhU2V0cy5tYXAoZHMgPT4gKHtcbiAgICAgICAgb3JpZ2luRFNJZDogZHMuZGF0YVNvdXJjZT8uaWQsXG4gICAgICAgIHJlY29yZHNDb3VudDogZHMucmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgIHR5cGU6IGRzLnR5cGVcbiAgICAgIH0pKVxuICAgIH0pXG4gICAgXG4gICAgLy8gSWYgd2UgY291bGRuJ3QgZ3JvdXAgYnkgb3JpZ2luIChzaG91bGRuJ3QgaGFwcGVuKSwgZmFsbGJhY2sgdG8gc2luZ2xlIERhdGFSZWNvcmRTZXQgd2l0aCBvdXRwdXREU1xuICAgIGlmIChkYXRhU2V0cy5sZW5ndGggPT09IDAgJiYgb3V0cHV0RFMpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ2FjdGlvbkRhdGFTZXRzLWZhbGxiYWNrLXRvLW91dHB1dERTJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHdpZGdldElkLFxuICAgICAgICByZWFzb246ICdjb3VsZC1ub3QtZGV0ZXJtaW5lLW9yaWdpbi1kcydcbiAgICAgIH0pXG4gICAgICByZXR1cm4gW3tcbiAgICAgICAgZGF0YVNvdXJjZTogb3V0cHV0RFMsXG4gICAgICAgIHR5cGU6IHJlY29yZHNUb1VzZS5sZW5ndGggPiAwID8gJ3NlbGVjdGVkJyA6ICdsb2FkZWQnLFxuICAgICAgICByZWNvcmRzOiByZWNvcmRzVG9Vc2UsXG4gICAgICAgIG5hbWU6IG91dHB1dERTLmlkLFxuICAgICAgICBsYWJlbDogb3V0cHV0RFMuZ2V0TGFiZWwoKVxuICAgICAgfV1cbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGRhdGFTZXRzXG4gIH0sIFtzZWxlY3RlZFJlY29yZHMsIG91dHB1dERTLCBxdWVyeURhdGEsIGN1cnJlbnRJdGVtLCByZWNvcmRzLCB3aWRnZXRJZF0pXG5cbiAgLy8gTWVtb2l6ZSBmaWx0ZXJlZCByZWNvcmRzIHRvIHByZXZlbnQgdW5uZWNlc3NhcnkgcmUtcmVuZGVycyB0aGF0IHJlc2V0IHNjcm9sbCBwb3NpdGlvblxuICAvLyBUaGlzIGVuc3VyZXMgdGhlIHJlY29yZHMgcHJvcCBvbmx5IGNoYW5nZXMgd2hlbiB0aGUgYWN0dWFsIGRhdGEgY2hhbmdlcywgbm90IGp1c3QgdGhlIGFycmF5IHJlZmVyZW5jZVxuICBjb25zdCBmaWx0ZXJlZFJlY29yZHNGb3JMaXN0ID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIHF1ZXJ5RGF0YT8ucmVjb3Jkcz8uZmlsdGVyKChyZWNvcmQ6IERhdGFSZWNvcmQpID0+ICFyZW1vdmVkUmVjb3JkSWRzLmhhcyhyZWNvcmQuZ2V0SWQoKSkpIHx8IFxuICAgICAgICAgICAocmVjb3Jkcz8uZmlsdGVyKHJlY29yZCA9PiAhcmVtb3ZlZFJlY29yZElkcy5oYXMocmVjb3JkLmdldElkKCkpKSB8fCBbXSlcbiAgfSwgW3F1ZXJ5RGF0YT8ucmVjb3JkcywgcmVjb3JkcywgcmVtb3ZlZFJlY29yZElkc10pXG5cbiAgaG9va3MudXNlRWZmZWN0T25jZSgoKSA9PiB7XG4gICAgLy8gZm9jdXMgdGhlIGJhY2sgYnV0dG9uIHdoZW4gaXQgaXMgcmVuZGVyZWRcbiAgICBmb2N1c0VsZW1lbnRJbktleWJvYXJkTW9kZShiYWNrQnRuUmVmLmN1cnJlbnQpXG4gIH0pXG5cbiAgLyoqXG4gICAqIEVmZmVjdCBob29rIHRoYXQgcnVucyB3aGVuIG5ldyBxdWVyeSByZXN1bHRzIGFycml2ZS5cbiAgICogUmVzZXRzIHJlbW92ZWQgcmVjb3JkcywgZXhwYW5kIHN0YXRlLCBhbmQgcXVlcnkgZGF0YSBmb3IgdGhlIG5ldyByZXN1bHRzLlxuICAgKiBBbHNvIGhhbmRsZXMgYXV0by1zZWxlY3Rpb24gb2YgcmVjb3JkcyB3aGVuIHRoZXkgZmlyc3QgYXJyaXZlLlxuICAgKi9cbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBDaGVjayBpZiB0aGVzZSBhcmUgbmV3IHJlY29yZHMgKGRpZmZlcmVudCBmcm9tIHdoYXQgd2UgbGFzdCBxdWVyaWVkKVxuICAgIC8vIElNUE9SVEFOVDogQ29tcGFyZSBhZ2FpbnN0IG9yaWdpbmFsIHF1ZXJ5IHJlc3VsdHMsIG5vdCBzZWxlY3RlZCByZXN1bHRzXG4gICAgLy8gVGhpcyBwcmV2ZW50cyByZW1vdmVkUmVjb3JkSWRzIGZyb20gYmVpbmcgcmVzZXQgd2hlbiByZWNvcmRzIGFyZSByZW1vdmVkXG4gICAgY29uc3QgY3VycmVudFJlY29yZElkcyA9IHJlY29yZHM/Lm1hcChyZWNvcmQgPT4gcmVjb3JkLmdldElkKCkpIHx8IFtdXG4gICAgY29uc3QgcmVjb3Jkc0NoYW5nZWQgPSBjdXJyZW50UmVjb3JkSWRzLmxlbmd0aCAhPT0gbGFzdFF1ZXJ5UmVjb3JkSWRzUmVmLmN1cnJlbnQubGVuZ3RoIHx8XG4gICAgICBjdXJyZW50UmVjb3JkSWRzLnNvbWUoKGlkLCBpbmRleCkgPT4gaWQgIT09IGxhc3RRdWVyeVJlY29yZElkc1JlZi5jdXJyZW50W2luZGV4XSlcbiAgICBcbiAgICAvLyBEZWJ1ZzogTG9nIHdoZW4gcmVjb3JkcyBwcm9wIGNoYW5nZXNcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgIGV2ZW50OiAncmVjb3Jkcy1wcm9wLWNoYW5nZWQnLFxuICAgICAgd2lkZ2V0SWQ6IHdpZGdldElkLFxuICAgICAgcmVjb3Jkc0NvdW50OiByZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgIHdpbGxTZXRRdWVyeURhdGE6IHJlY29yZHMgJiYgcmVjb3Jkcy5sZW5ndGggPiAwLFxuICAgICAgcmVtb3ZlZFJlY29yZElkc0NvdW50OiByZW1vdmVkUmVjb3JkSWRzLnNpemUsXG4gICAgICBoYXNTZWxlY3RlZFJlZjogaGFzU2VsZWN0ZWRSZWYuY3VycmVudCxcbiAgICAgIHJlY29yZHNDaGFuZ2VkOiByZWNvcmRzQ2hhbmdlZCxcbiAgICAgIGxhc3RRdWVyeVJlY29yZElkc0NvdW50OiBsYXN0UXVlcnlSZWNvcmRJZHNSZWYuY3VycmVudC5sZW5ndGgsXG4gICAgICBjdXJyZW50UmVjb3JkSWRzQ291bnQ6IGN1cnJlbnRSZWNvcmRJZHMubGVuZ3RoXG4gICAgfSlcbiAgICBcbiAgICAvLyBJTVBPUlRBTlQ6IE9ubHkgcmVzZXQgcmVtb3ZlZCByZWNvcmRzIGlmIHRoaXMgaXMgdHJ1bHkgYSBORVcgcXVlcnkgd2l0aCBkaWZmZXJlbnQgcmVjb3Jkc1xuICAgIC8vIERvbid0IHJlc2V0IGlmIHJlY29yZHMgYXJlIHRoZSBzYW1lIChqdXN0IGEgcmUtcmVuZGVyIG9yIGxhenkgbG9hZClcbiAgICBpZiAocmVjb3Jkc0NoYW5nZWQpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ3JlY29yZHMtdHJ1bHktY2hhbmdlZC1yZXNldHRpbmctcmVtb3ZlZCcsXG4gICAgICAgIHdpZGdldElkOiB3aWRnZXRJZCxcbiAgICAgICAgb2xkUmVjb3JkSWRzQ291bnQ6IGxhc3RRdWVyeVJlY29yZElkc1JlZi5jdXJyZW50Lmxlbmd0aCxcbiAgICAgICAgbmV3UmVjb3JkSWRzQ291bnQ6IGN1cnJlbnRSZWNvcmRJZHMubGVuZ3RoXG4gICAgICB9KVxuICAgICAgc2V0UmVtb3ZlZFJlY29yZElkcyhuZXcgU2V0KCkpXG4gICAgICAvLyBVcGRhdGUgdGhlIG9yaWdpbmFsIHF1ZXJ5IHJlY29yZCBJRHMgcmVmXG4gICAgICBsYXN0UXVlcnlSZWNvcmRJZHNSZWYuY3VycmVudCA9IGN1cnJlbnRSZWNvcmRJZHNcbiAgICB9IGVsc2Uge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAncmVjb3Jkcy1ub3QtY2hhbmdlZC1wcmVzZXJ2aW5nLXJlbW92ZWQnLFxuICAgICAgICB3aWRnZXRJZDogd2lkZ2V0SWQsXG4gICAgICAgIHJlY29yZElkc0NvdW50OiBjdXJyZW50UmVjb3JkSWRzLmxlbmd0aCxcbiAgICAgICAgcmVtb3ZlZFJlY29yZElkc0NvdW50OiByZW1vdmVkUmVjb3JkSWRzLnNpemVcbiAgICAgIH0pXG4gICAgfVxuICAgIFxuICAgIC8vIE5PVEU6IERvbid0IHJlc2V0IGV4cGFuZEFsbCBoZXJlIC0gaXQncyBoYW5kbGVkIGJ5IHRoZSBxdWVyeUl0ZW0tY2hhbmdlIHVzZUVmZmVjdFxuICAgIC8vIFJlc2V0dGluZyBpdCBoZXJlIGNhdXNlcyB0aGUgRXhwYW5kL0NvbGxhcHNlIGJ1dHRvbiB0byBmbGlwIGJhY2sgd2hlbiByZWNvcmRzIGFyZSByZW1vdmVkXG4gICAgc2V0UXVlcnlEYXRhKHtcbiAgICAgIHJlY29yZHMsXG4gICAgICBwYWdlOiAxXG4gICAgfSlcbiAgICBcbiAgICAvLyBPbmx5IGF1dG8tc2VsZWN0IHJlY29yZHMgaWY6XG4gICAgLy8gMS4gV2UgaGF2ZSByZWNvcmRzIGFuZCBvdXRwdXREU1xuICAgIC8vIDIuIFdlIGhhdmVuJ3QgYWxyZWFkeSBzZWxlY3RlZCB0aGVzZSByZWNvcmRzIChoYXNTZWxlY3RlZFJlZiBpcyBmYWxzZSlcbiAgICAvLyAzLiBPUiB0aGUgcmVjb3JkcyBoYXZlIGFjdHVhbGx5IGNoYW5nZWQgKG5ldyBxdWVyeSByZXN1bHRzKVxuICAgIC8vIDQuIEFORCB3ZSBkb24ndCBoYXZlIGFueSByZW1vdmVkIHJlY29yZHMgKHRvIHByZXZlbnQgcmUtc2VsZWN0aW5nIHJlbW92ZWQgb25lcylcbiAgICBpZiAocmVjb3JkcyAmJiByZWNvcmRzLmxlbmd0aCA+IDAgJiYgb3V0cHV0RFMgJiYgXG4gICAgICAgICghaGFzU2VsZWN0ZWRSZWYuY3VycmVudCB8fCByZWNvcmRzQ2hhbmdlZCkgJiYgXG4gICAgICAgIHJlbW92ZWRSZWNvcmRJZHMuc2l6ZSA9PT0gMCkge1xuICAgICAgY29uc3QgcmVjb3JkSWRzID0gcmVjb3Jkcy5tYXAocmVjb3JkID0+IHJlY29yZC5nZXRJZCgpKVxuICAgICAgY29uc3QgZmRyID0gcmVjb3JkcyBhcyBGZWF0dXJlRGF0YVJlY29yZFtdXG4gICAgICBcbiAgICAgIC8vIFNlbGVjdCByZWNvcmRzIGFuZCBwdWJsaXNoIHNlbGVjdGlvbiBtZXNzYWdlIHVzaW5nIHV0aWxpdHkgZnVuY3Rpb25cbiAgICAgIC8vIFVzZSBhc3luYyBJSUZFIHNpbmNlIHVzZUVmZmVjdCBjYW4ndCBiZSBhc3luY1xuICAgICAgOyhhc3luYyAoKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgc2V0U2VsZWN0aW9uRXJyb3IobnVsbCkgLy8gQ2xlYXIgcHJldmlvdXMgZXJyb3JzXG4gICAgICAgICAgYXdhaXQgc2VsZWN0UmVjb3Jkc0FuZFB1Ymxpc2goXG4gICAgICAgICAgICB3aWRnZXRJZCwgXG4gICAgICAgICAgICBvdXRwdXREUywgXG4gICAgICAgICAgICByZWNvcmRJZHMsIFxuICAgICAgICAgICAgZmRyLCBcbiAgICAgICAgICAgIGZhbHNlLCBcbiAgICAgICAgICAgIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQsIFxuICAgICAgICAgICAgZ3JhcGhpY3NMYXllciwgXG4gICAgICAgICAgICBtYXBWaWV3XG4gICAgICAgICAgKVxuICAgICAgICAgIGhhc1NlbGVjdGVkUmVmLmN1cnJlbnQgPSB0cnVlIC8vIE1hcmsgYXMgc2VsZWN0ZWRcbiAgICAgICAgICBsYXN0U2VsZWN0ZWRSZWNvcmRzUmVmLmN1cnJlbnQgPSByZWNvcmRJZHMgLy8gU3RvcmUgdGhlIElEcyB3ZSBzZWxlY3RlZFxuICAgICAgICAgIGxhc3RTZWxlY3RlZEZlYXR1cmVSZWNvcmRzUmVmLmN1cnJlbnQgPSBmZHIgLy8gU3RvcmUgdGhlIGZ1bGwgcmVjb3JkcyBmb3IgcG90ZW50aWFsIHJlc3RvcmF0aW9uXG4gICAgICAgICAgXG4gICAgICAgICAgLy8gTm90aWZ5IFdpZGdldCBhbmQgSGVscGVyU2ltcGxlIG9mIHNlbGVjdGlvbiBjaGFuZ2VcbiAgICAgICAgICBkaXNwYXRjaFNlbGVjdGlvbkV2ZW50KHdpZGdldElkLCByZWNvcmRJZHMsIG91dHB1dERTLCBxdWVyeUl0ZW0uY29uZmlnSWQpXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIHNlbGVjdCBxdWVyeSByZXN1bHRzJ1xuICAgICAgICAgIHNldFNlbGVjdGlvbkVycm9yKGVycm9yTWVzc2FnZSlcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICAgICAgICBldmVudDogJ3NlbGVjdGlvbi1mYWlsZWQtcXVlcnktcmVzdWx0JyxcbiAgICAgICAgICAgIGVycm9yOiBlcnJvck1lc3NhZ2UsXG4gICAgICAgICAgICBlcnJvclN0YWNrOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICByZWNvcmRDb3VudDogcmVjb3JkSWRzLmxlbmd0aFxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH0pKClcbiAgICB9IGVsc2UgaWYgKHJlY29yZHNDaGFuZ2VkICYmIHJlY29yZHMgJiYgcmVjb3Jkcy5sZW5ndGggPT09IDApIHtcbiAgICAgIC8vIElmIHJlY29yZHMgd2VyZSBjbGVhcmVkLCByZXNldCB0aGUgc2VsZWN0aW9uIGZsYWdcbiAgICAgIGhhc1NlbGVjdGVkUmVmLmN1cnJlbnQgPSBmYWxzZVxuICAgICAgbGFzdFNlbGVjdGVkUmVjb3Jkc1JlZi5jdXJyZW50ID0gW11cbiAgICAgIHNldFNlbGVjdGlvbkVycm9yKG51bGwpIC8vIENsZWFyIGVycm9ycyB3aGVuIGNsZWFyaW5nIHJlY29yZHNcbiAgICB9IGVsc2UgaWYgKHJlbW92ZWRSZWNvcmRJZHMuc2l6ZSA+IDApIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ3NraXBwaW5nLXJlc2VsZWN0aW9uLWR1ZS10by1yZW1vdmVkLXJlY29yZHMnLFxuICAgICAgICB3aWRnZXRJZDogd2lkZ2V0SWQsXG4gICAgICAgIHJlbW92ZWRSZWNvcmRJZHNDb3VudDogcmVtb3ZlZFJlY29yZElkcy5zaXplLFxuICAgICAgICByZWNvcmRzQ291bnQ6IHJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICBoYXNTZWxlY3RlZFJlZjogaGFzU2VsZWN0ZWRSZWYuY3VycmVudCxcbiAgICAgICAgcmVjb3Jkc0NoYW5nZWQ6IHJlY29yZHNDaGFuZ2VkXG4gICAgICB9KVxuICAgIH1cbiAgfSwgW3JlY29yZHMsIG91dHB1dERTLCB3aWRnZXRJZCwgcXVlcnlJdGVtLmNvbmZpZ0lkLCBxdWVyeUl0ZW0ucmVzdWx0RXhwYW5kQnlEZWZhdWx0LCByZW1vdmVkUmVjb3JkSWRzXSlcblxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIGNsZWFyIHNlbGVjdGlvbiB3aGVuIHJlc3VsdFNlbGVjdE1vZGUgY2hhbmdlZFxuICAgIGlmIChvdXRwdXREUykge1xuICAgICAgY2xlYXJTZWxlY3Rpb25JbkRhdGFTb3VyY2VzKG91dHB1dERTLCB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0LCBncmFwaGljc0xheWVyKVxuICAgICAgcHVibGlzaFNlbGVjdGlvbk1lc3NhZ2Uod2lkZ2V0SWQsIFtdLCBvdXRwdXREUywgdHJ1ZSlcbiAgICB9XG4gIH0sIFtxdWVyeUl0ZW0ucmVzdWx0U2VsZWN0TW9kZSwgb3V0cHV0RFMsIHdpZGdldElkLCB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0LCBncmFwaGljc0xheWVyXSlcblxuICAvLyBVcGRhdGUgZXhwYW5kQWxsIHdoZW4gcXVlcnlJdGVtIGNoYW5nZXMgKGUuZy4sIHN3aXRjaGluZyBiZXR3ZWVuIHF1ZXJpZXMpXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgbmV3RXhwYW5kQWxsID0gcXVlcnlJdGVtLnJlc3VsdEV4cGFuZEJ5RGVmYXVsdCA/PyBmYWxzZVxuICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgZXZlbnQ6ICdleHBhbmRBbGwtcmVzZXQtYnktcXVlcnlJdGVtLWNoYW5nZScsXG4gICAgICB3aWRnZXRJZCxcbiAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBxdWVyeUl0ZW0uY29uZmlnSWQsXG4gICAgICByZXN1bHRFeHBhbmRCeURlZmF1bHQ6IHF1ZXJ5SXRlbS5yZXN1bHRFeHBhbmRCeURlZmF1bHQsXG4gICAgICBuZXdFeHBhbmRBbGwsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIHNldEV4cGFuZEFsbChuZXdFeHBhbmRBbGwpXG4gICAgLy8gUmVzZXQgaW5kaXZpZHVhbCBleHBhbnNpb24gc3RhdGVzIHdoZW4gcXVlcnkgY2hhbmdlc1xuICAgIHNldEl0ZW1FeHBhbmRTdGF0ZXMobmV3IE1hcCgpKVxuICB9LCBbcXVlcnlJdGVtLmNvbmZpZ0lkXSlcblxuICAvKipcbiAgICogTW9uaXRvciBvcmlnaW4gZGF0YSBzb3VyY2Ugc2VsZWN0aW9uIGNoYW5nZXMgdG8gZGV0ZWN0IHdoZW4gb3RoZXIgd2lkZ2V0cyAobGlrZSBtYXAgaWRlbnRpZnkpXG4gICAqIGNsZWFyIG91ciBzZWxlY3Rpb25zLiBFbmhhbmNlZCB3aXRoIGlkZW50aWZ5IHBvcHVwIGRldGVjdGlvbiBmb3IgdGVzdGluZyBzY2VuYXJpb3MuXG4gICAqIFdhdGNoZXMgdGhlIG9yaWdpbiBkYXRhIHNvdXJjZSdzIHNlbGVjdGlvbiBzdGF0ZSBkaXJlY3RseSB2aWEgcG9sbGluZy5cbiAgICovXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFvdXRwdXREUykgcmV0dXJuXG5cbiAgICBjb25zdCBvcmlnaW5EUyA9IG91dHB1dERTLmdldE9yaWdpbkRhdGFTb3VyY2VzKCk/LlswXSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gICAgaWYgKCFvcmlnaW5EUykgcmV0dXJuXG5cbiAgICBjb25zdCBvcmlnaW5EU0lkID0gb3JpZ2luRFMuaWRcbiAgICBsZXQgcHJldmlvdXNTZWxlY3RlZElkczogc3RyaW5nW10gPSBbXVxuICAgIGxldCBpZGVudGlmeVBvcHVwV2FzT3BlbiA9IGZhbHNlXG4gICAgbGV0IGxhc3RMb2dUaW1lID0gMFxuICAgIGNvbnN0IExPR19USFJPVFRMRV9NUyA9IDEwMDAgLy8gVGhyb3R0bGUgbG9ncyB0byBvbmNlIHBlciBzZWNvbmRcbiAgICBcbiAgICAvLyBJbml0aWFsIGNoZWNrXG4gICAgcHJldmlvdXNTZWxlY3RlZElkcyA9IG9yaWdpbkRTLmdldFNlbGVjdGVkUmVjb3JkSWRzKCkgfHwgW11cbiAgICBpZGVudGlmeVBvcHVwV2FzT3BlbiA9IGlzSWRlbnRpZnlQb3B1cE9wZW4oKVxuXG4gICAgLy8gV2F0Y2ggZm9yIHNlbGVjdGlvbiBjaGFuZ2VzIG9uIHRoZSBvcmlnaW4gZGF0YSBzb3VyY2VcbiAgICBjb25zdCBjaGVja1NlbGVjdGlvbiA9ICgpID0+IHtcbiAgICAgIGNvbnN0IGN1cnJlbnRTZWxlY3RlZElkcyA9IG9yaWdpbkRTLmdldFNlbGVjdGVkUmVjb3JkSWRzKCkgfHwgW11cbiAgICAgIGNvbnN0IG91ckV4cGVjdGVkSWRzID0gbGFzdFNlbGVjdGVkUmVjb3Jkc1JlZi5jdXJyZW50XG4gICAgICBjb25zdCBoYXNPdXJTZWxlY3Rpb24gPSBvdXJFeHBlY3RlZElkcy5sZW5ndGggPiAwXG4gICAgICBjb25zdCBpZGVudGlmeVBvcHVwSXNPcGVuID0gaXNJZGVudGlmeVBvcHVwT3BlbigpXG4gICAgICBcbiAgICAgIC8vIERldGVjdCBpZiBzZWxlY3Rpb24gd2FzIGNsZWFyZWQgb3IgY2hhbmdlZCBleHRlcm5hbGx5XG4gICAgICBjb25zdCB3YXNDbGVhcmVkID0gcHJldmlvdXNTZWxlY3RlZElkcy5sZW5ndGggPiAwICYmIGN1cnJlbnRTZWxlY3RlZElkcy5sZW5ndGggPT09IDBcbiAgICAgIGNvbnN0IHdhc0NoYW5nZWQgPSBwcmV2aW91c1NlbGVjdGVkSWRzLmxlbmd0aCA+IDAgJiYgXG4gICAgICAgIChjdXJyZW50U2VsZWN0ZWRJZHMubGVuZ3RoICE9PSBwcmV2aW91c1NlbGVjdGVkSWRzLmxlbmd0aCB8fFxuICAgICAgICAgIWN1cnJlbnRTZWxlY3RlZElkcy5ldmVyeShpZCA9PiBwcmV2aW91c1NlbGVjdGVkSWRzLmluY2x1ZGVzKGlkKSkpXG4gICAgICBcbiAgICAgIC8vIE5FVzogRGV0ZWN0IGlmIHNlbGVjdGlvbiB3YXMgYWRkZWQgKHdlbnQgZnJvbSBlbXB0eSB0byBoYXZpbmcgcmVjb3JkcylcbiAgICAgIGNvbnN0IHdhc0FkZGVkID0gcHJldmlvdXNTZWxlY3RlZElkcy5sZW5ndGggPT09IDAgJiYgY3VycmVudFNlbGVjdGVkSWRzLmxlbmd0aCA+IDBcbiAgICAgIFxuICAgICAgLy8gVHJhY2sgaWRlbnRpZnkgcG9wdXAgc3RhdGUgY2hhbmdlc1xuICAgICAgY29uc3QgaWRlbnRpZnlQb3B1cEp1c3RPcGVuZWQgPSAhaWRlbnRpZnlQb3B1cFdhc09wZW4gJiYgaWRlbnRpZnlQb3B1cElzT3BlblxuICAgICAgY29uc3QgaWRlbnRpZnlQb3B1cEp1c3RDbG9zZWQgPSBpZGVudGlmeVBvcHVwV2FzT3BlbiAmJiAhaWRlbnRpZnlQb3B1cElzT3BlblxuICAgICAgY29uc3QgaWRlbnRpZnlQb3B1cFN0aWxsT3BlbiA9IGlkZW50aWZ5UG9wdXBXYXNPcGVuICYmIGlkZW50aWZ5UG9wdXBJc09wZW5cbiAgICAgIFxuICAgICAgLy8gTG9nIGlkZW50aWZ5IHBvcHVwIHN0YXRlIGNoYW5nZXNcbiAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KClcbiAgICAgIGlmIChpZGVudGlmeVBvcHVwSnVzdE9wZW5lZCB8fCBpZGVudGlmeVBvcHVwSnVzdENsb3NlZCkge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1NFTEVDVElPTicsIHtcbiAgICAgICAgICBldmVudDogaWRlbnRpZnlQb3B1cEp1c3RPcGVuZWQgPyAnaWRlbnRpZnktcG9wdXAtb3BlbmVkJyA6ICdpZGVudGlmeS1wb3B1cC1jbG9zZWQnLFxuICAgICAgICAgIG9yaWdpbkRTSWQsXG4gICAgICAgICAgb3VyU2VsZWN0aW9uQ291bnQ6IG91ckV4cGVjdGVkSWRzLmxlbmd0aCxcbiAgICAgICAgICBjdXJyZW50U2VsZWN0aW9uQ291bnQ6IGN1cnJlbnRTZWxlY3RlZElkcy5sZW5ndGgsXG4gICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgICAgfSlcbiAgICAgICAgXG4gICAgICAgIC8vIElmIGlkZW50aWZ5IHBvcHVwIGp1c3QgY2xvc2VkIGFuZCBzZWxlY3Rpb24gd2FzIGNsZWFyZWQsIGRpc3BhdGNoIHJlc3RvcmUgZXZlbnRcbiAgICAgICAgaWYgKGlkZW50aWZ5UG9wdXBKdXN0Q2xvc2VkICYmIHdhc0NsZWFyZWQgJiYgaGFzT3VyU2VsZWN0aW9uICYmIG91ckV4cGVjdGVkSWRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBjb25zdCByZXN0b3JlRXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoUkVTVE9SRV9PTl9JREVOVElGWV9DTE9TRV9FVkVOVCwge1xuICAgICAgICAgICAgZGV0YWlsOiB7XG4gICAgICAgICAgICAgIHdpZGdldElkLFxuICAgICAgICAgICAgICByZWNvcmRJZHM6IG91ckV4cGVjdGVkSWRzLFxuICAgICAgICAgICAgICBvdXRwdXREc0lkOiBvdXRwdXREUy5pZCxcbiAgICAgICAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICAgICAgICBjYW5jZWxhYmxlOiB0cnVlXG4gICAgICAgICAgfSlcbiAgICAgICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChyZXN0b3JlRXZlbnQpXG4gICAgICAgICAgXG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdTRUxFQ1RJT04nLCB7XG4gICAgICAgICAgICBldmVudDogJ2lkZW50aWZ5LXBvcHVwLWNsb3NlZC1yZXN0b3JlLXJlcXVlc3RlZCcsXG4gICAgICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgICAgIHJlY29yZENvdW50OiBvdXJFeHBlY3RlZElkcy5sZW5ndGgsXG4gICAgICAgICAgICBvdXRwdXREc0lkOiBvdXRwdXREUy5pZCxcbiAgICAgICAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBxdWVyeUl0ZW0uY29uZmlnSWRcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIExvZyBBTEwgc2VsZWN0aW9uIGNoYW5nZXMgKG5vdCBqdXN0IHdoZW4gd2UgaGF2ZSBvdXIgb3duIHNlbGVjdGlvbilcbiAgICAgIGlmICh3YXNDbGVhcmVkIHx8IHdhc0NoYW5nZWQgfHwgd2FzQWRkZWQpIHtcbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhpcyBtYXRjaGVzIG91ciBleHBlY3RlZCBzZWxlY3Rpb25cbiAgICAgICAgY29uc3QgbWF0Y2hlc091clNlbGVjdGlvbiA9IGhhc091clNlbGVjdGlvbiAmJiBcbiAgICAgICAgICBvdXJFeHBlY3RlZElkcy5sZW5ndGggPT09IGN1cnJlbnRTZWxlY3RlZElkcy5sZW5ndGggJiZcbiAgICAgICAgICBvdXJFeHBlY3RlZElkcy5ldmVyeShpZCA9PiBjdXJyZW50U2VsZWN0ZWRJZHMuaW5jbHVkZXMoaWQpKVxuICAgICAgICBcbiAgICAgICAgLy8gRGV0ZXJtaW5lIHdoYXQgd291bGQgaGFwcGVuIChmb3IgdGVzdGluZy9sb2dnaW5nKVxuICAgICAgICBjb25zdCB3b3VsZFJlc3RvcmUgPSB3YXNDbGVhcmVkICYmIGlkZW50aWZ5UG9wdXBJc09wZW4gJiYgaGFzT3VyU2VsZWN0aW9uICYmIG91ckV4cGVjdGVkSWRzLmxlbmd0aCA+IDBcbiAgICAgICAgXG4gICAgICAgIC8vIERldGVybWluZSBzY2VuYXJpb1xuICAgICAgICBsZXQgc2NlbmFyaW8gPSAnVW5rbm93bidcbiAgICAgICAgaWYgKHdhc0FkZGVkICYmICFoYXNPdXJTZWxlY3Rpb24pIHtcbiAgICAgICAgICBzY2VuYXJpbyA9ICdURVNUIFNDRU5BUklPIDQ6IEFub3RoZXIgd2lkZ2V0IHNlbGVjdGVkIHJlY29yZHMgKHdlIGhhdmUgbm8gc2VsZWN0aW9uKSdcbiAgICAgICAgfSBlbHNlIGlmICh3YXNDaGFuZ2VkICYmICFtYXRjaGVzT3VyU2VsZWN0aW9uICYmICFoYXNPdXJTZWxlY3Rpb24pIHtcbiAgICAgICAgICBzY2VuYXJpbyA9ICdURVNUIFNDRU5BUklPIDU6IEFub3RoZXIgd2lkZ2V0IGNoYW5nZWQgc2VsZWN0aW9uICh3ZSBoYXZlIG5vIHNlbGVjdGlvbiknXG4gICAgICAgIH0gZWxzZSBpZiAod2FzQ2hhbmdlZCAmJiAhbWF0Y2hlc091clNlbGVjdGlvbiAmJiBoYXNPdXJTZWxlY3Rpb24pIHtcbiAgICAgICAgICBzY2VuYXJpbyA9IGlkZW50aWZ5UG9wdXBJc09wZW5cbiAgICAgICAgICAgID8gJ1RFU1QgU0NFTkFSSU8gMjogUXVlcnkg4oaSIElkZW50aWZ5IChzZWxlY3Rpb24gY2hhbmdlZCwgbm90IGNsZWFyZWQpIOKGkiBXb3VsZCBOT1QgcmVzdG9yZSdcbiAgICAgICAgICAgIDogJ1RFU1QgU0NFTkFSSU8gMzogUXVlcnkg4oaSIEFub3RoZXIgUXVlcnlTaW1wbGUgd2lkZ2V0IOKGkiBXb3VsZCBOT1QgcmVzdG9yZSdcbiAgICAgICAgfSBlbHNlIGlmICh3YXNDbGVhcmVkICYmIGhhc091clNlbGVjdGlvbikge1xuICAgICAgICAgIHNjZW5hcmlvID0gaWRlbnRpZnlQb3B1cElzT3BlblxuICAgICAgICAgICAgPyAnVEVTVCBTQ0VOQVJJTyAxOiBRdWVyeSDihpIgSWRlbnRpZnkg4oaSIFdvdWxkIHJlc3RvcmUnXG4gICAgICAgICAgICA6ICdURVNUIFNDRU5BUklPIDM6IFF1ZXJ5IOKGkiBBbm90aGVyIFF1ZXJ5U2ltcGxlIHdpZGdldCAoY2xlYXJlZCkg4oaSIFdvdWxkIE5PVCByZXN0b3JlJ1xuICAgICAgICB9IGVsc2UgaWYgKHdhc0FkZGVkICYmIGhhc091clNlbGVjdGlvbikge1xuICAgICAgICAgIHNjZW5hcmlvID0gbWF0Y2hlc091clNlbGVjdGlvblxuICAgICAgICAgICAgPyAnT3VyIHdpZGdldCBzZWxlY3RlZCByZWNvcmRzJ1xuICAgICAgICAgICAgOiAnQW5vdGhlciB3aWRnZXQgc2VsZWN0ZWQgZGlmZmVyZW50IHJlY29yZHMnXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIExvZyBkZXRlY3Rpb24gd2l0aCBpZGVudGlmeSBwb3B1cCBzdGF0ZSAodGhyb3R0bGVkKVxuICAgICAgICBpZiAobm93IC0gbGFzdExvZ1RpbWUgPiBMT0dfVEhST1RUTEVfTVMpIHtcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1NFTEVDVElPTicsIHtcbiAgICAgICAgICAgIGV2ZW50OiB3YXNDbGVhcmVkID8gJ3NlbGVjdGlvbi1jbGVhcmVkJyA6IHdhc0NoYW5nZWQgPyAnc2VsZWN0aW9uLWNoYW5nZWQnIDogJ3NlbGVjdGlvbi1hZGRlZCcsXG4gICAgICAgICAgICBvcmlnaW5EU0lkLFxuICAgICAgICAgICAgb3VyRXhwZWN0ZWRDb3VudDogb3VyRXhwZWN0ZWRJZHMubGVuZ3RoLFxuICAgICAgICAgICAgcHJldmlvdXNTZWxlY3RlZENvdW50OiBwcmV2aW91c1NlbGVjdGVkSWRzLmxlbmd0aCxcbiAgICAgICAgICAgIGN1cnJlbnRTZWxlY3RlZENvdW50OiBjdXJyZW50U2VsZWN0ZWRJZHMubGVuZ3RoLFxuICAgICAgICAgICAgd2FzQ2xlYXJlZCxcbiAgICAgICAgICAgIHdhc0NoYW5nZWQsXG4gICAgICAgICAgICB3YXNBZGRlZCxcbiAgICAgICAgICAgIGhhc091clNlbGVjdGlvbixcbiAgICAgICAgICAgIG1hdGNoZXNPdXJTZWxlY3Rpb24sXG4gICAgICAgICAgICBpZGVudGlmeVBvcHVwSXNPcGVuLFxuICAgICAgICAgICAgaWRlbnRpZnlQb3B1cEp1c3RPcGVuZWQsXG4gICAgICAgICAgICBpZGVudGlmeVBvcHVwU3RpbGxPcGVuLFxuICAgICAgICAgICAgaWRlbnRpZnlQb3B1cEp1c3RDbG9zZWQsXG4gICAgICAgICAgICB3b3VsZFJlc3RvcmUsXG4gICAgICAgICAgICBvdXJFeHBlY3RlZElkczogb3VyRXhwZWN0ZWRJZHMuc2xpY2UoMCwgNSksXG4gICAgICAgICAgICBwcmV2aW91c1NlbGVjdGVkSWRzOiBwcmV2aW91c1NlbGVjdGVkSWRzLnNsaWNlKDAsIDUpLFxuICAgICAgICAgICAgY3VycmVudFNlbGVjdGVkSWRzOiBjdXJyZW50U2VsZWN0ZWRJZHMuc2xpY2UoMCwgNSksXG4gICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgIG5vdGU6IHdvdWxkUmVzdG9yZSBcbiAgICAgICAgICAgICAgPyAnV291bGQgcmVzdG9yZSBzZWxlY3Rpb24gKGNsZWFyZWQgKyBpZGVudGlmeSBwb3B1cCBvcGVuKSdcbiAgICAgICAgICAgICAgOiBpZGVudGlmeVBvcHVwSXNPcGVuICYmIHdhc0NoYW5nZWRcbiAgICAgICAgICAgICAgICA/ICdJZGVudGlmeSBwb3B1cCBvcGVuIGJ1dCBzZWxlY3Rpb24gY2hhbmdlZCAobm90IGNsZWFyZWQpIC0gd291bGQgbm90IHJlc3RvcmUnXG4gICAgICAgICAgICAgICAgOiB3YXNDbGVhcmVkICYmICFpZGVudGlmeVBvcHVwSXNPcGVuXG4gICAgICAgICAgICAgICAgICA/ICdTZWxlY3Rpb24gY2xlYXJlZCwgY2hlY2tpbmcgaWYgaWRlbnRpZnkgcG9wdXAgb3BlbnMuLi4nXG4gICAgICAgICAgICAgICAgICA6IHdhc0FkZGVkXG4gICAgICAgICAgICAgICAgICAgID8gaGFzT3VyU2VsZWN0aW9uICYmIG1hdGNoZXNPdXJTZWxlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgICA/ICdPdXIgd2lkZ2V0IHNlbGVjdGVkIHJlY29yZHMnXG4gICAgICAgICAgICAgICAgICAgICAgOiBoYXNPdXJTZWxlY3Rpb24gJiYgIW1hdGNoZXNPdXJTZWxlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgICAgID8gJ0Fub3RoZXIgd2lkZ2V0IHNlbGVjdGVkIGRpZmZlcmVudCByZWNvcmRzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgOiAnU2VsZWN0aW9uIGFkZGVkIChieSBhbm90aGVyIHdpZGdldCBvciBleHRlcm5hbCBzb3VyY2UpJ1xuICAgICAgICAgICAgICAgICAgICA6ICdObyBpZGVudGlmeSBwb3B1cCBkZXRlY3RlZCAtIHdvdWxkIG5vdCByZXN0b3JlJ1xuICAgICAgICAgIH0pXG4gICAgICAgICAgXG4gICAgICAgICAgbGFzdExvZ1RpbWUgPSBub3dcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICBwcmV2aW91c1NlbGVjdGVkSWRzID0gWy4uLmN1cnJlbnRTZWxlY3RlZElkc11cbiAgICAgIGlkZW50aWZ5UG9wdXBXYXNPcGVuID0gaWRlbnRpZnlQb3B1cElzT3BlblxuICAgIH1cblxuICAgIC8vIENoZWNrIHBlcmlvZGljYWxseSAoZXZlcnkgNTAwbXMpXG4gICAgY29uc3QgaW50ZXJ2YWxJZCA9IHNldEludGVydmFsKGNoZWNrU2VsZWN0aW9uLCA1MDApXG4gICAgXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWxJZClcbiAgICB9XG4gIH0sIFtvdXRwdXREU10pXG5cbiAgLyoqXG4gICAqIENsZWFycyBhbGwgcmVzdWx0cy4gUmVzZXRzIGxvY2FsIHN0YXRlIGFuZCBkZWxlZ2F0ZXMgdG8gcGFyZW50J3MgY2xlYXJSZXN1bHQgbWV0aG9kLlxuICAgKi9cbiAgY29uc3QgY2xlYXJSZXN1bHRzID0gYXN5bmMgKCkgPT4ge1xuICAgIC8vIExvZyBoYXNoIHN0YXRlIGJlZm9yZSBjbGVhcmluZ1xuICAgIGNvbnN0IGhhc2hCZWZvcmUgPSB3aW5kb3cubG9jYXRpb24uaGFzaC5zdWJzdHJpbmcoMSlcbiAgICBjb25zdCB1cmxQYXJhbXNCZWZvcmUgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKGhhc2hCZWZvcmUpXG4gICAgY29uc3QgaGFzaFBhcmFtc0JlZm9yZTogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfSA9IHt9XG4gICAgdXJsUGFyYW1zQmVmb3JlLmZvckVhY2goKHZhbHVlLCBrZXkpID0+IHtcbiAgICAgIGhhc2hQYXJhbXNCZWZvcmVba2V5XSA9IHZhbHVlXG4gICAgfSlcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gnLCB7XG4gICAgICBldmVudDogJ2NsZWFyUmVzdWx0cy1jYWxsZWQnLFxuICAgICAgd2lkZ2V0SWQsXG4gICAgICBoYXNoQmVmb3JlOiBoYXNoQmVmb3JlLFxuICAgICAgaGFzaFBhcmFtc0JlZm9yZTogaGFzaFBhcmFtc0JlZm9yZSxcbiAgICAgIGhhc2hQYXJhbXNDb3VudDogT2JqZWN0LmtleXMoaGFzaFBhcmFtc0JlZm9yZSkubGVuZ3RoLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICAvLyBSZXNldCBsb2NhbCBzZWxlY3Rpb24gZmxhZ3NcbiAgICBoYXNTZWxlY3RlZFJlZi5jdXJyZW50ID0gZmFsc2VcbiAgICBsYXN0U2VsZWN0ZWRSZWNvcmRzUmVmLmN1cnJlbnQgPSBbXVxuICAgIC8vIFJlc2V0IGxvY2FsIHF1ZXJ5IGRhdGEgc3RhdGVcbiAgICBzZXRRdWVyeURhdGEobnVsbClcbiAgICBzZXRSZW1vdmVkUmVjb3JkSWRzKG5ldyBTZXQoKSlcbiAgICAvLyBDbGVhciBlcnJvciBzdGF0ZSB3aGVuIGNsZWFyaW5nIHJlc3VsdHNcbiAgICBzZXRTZWxlY3Rpb25FcnJvcihudWxsKVxuICAgIC8vIERlbGVnYXRlIHRvIHBhcmVudCdzIGNsZWFyUmVzdWx0IG1ldGhvZCAodmlhIG9uTmF2QmFjaykgd2hpY2ggaGFuZGxlc1xuICAgIC8vIGNsZWFyaW5nIHNlbGVjdGlvbiBmcm9tIG1hcCwgcHVibGlzaGluZyBtZXNzYWdlcywgZXRjLlxuICAgIGF3YWl0IG9uTmF2QmFjayh0cnVlKVxuICAgIFxuICAgIC8vIExvZyBoYXNoIHN0YXRlIGFmdGVyIGNsZWFyaW5nICh3aXRoIGRlbGF5IHRvIGNhdGNoIGFzeW5jIHVwZGF0ZXMpXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBjb25zdCBoYXNoQWZ0ZXIgPSB3aW5kb3cubG9jYXRpb24uaGFzaC5zdWJzdHJpbmcoMSlcbiAgICAgIGNvbnN0IHVybFBhcmFtc0FmdGVyID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhoYXNoQWZ0ZXIpXG4gICAgICBjb25zdCBoYXNoUGFyYW1zQWZ0ZXI6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH0gPSB7fVxuICAgICAgdXJsUGFyYW1zQWZ0ZXIuZm9yRWFjaCgodmFsdWUsIGtleSkgPT4ge1xuICAgICAgICBoYXNoUGFyYW1zQWZ0ZXJba2V5XSA9IHZhbHVlXG4gICAgICB9KVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gnLCB7XG4gICAgICAgIGV2ZW50OiAnY2xlYXJSZXN1bHRzLWNvbXBsZXRlZCcsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICBoYXNoQmVmb3JlOiBoYXNoQmVmb3JlLFxuICAgICAgICBoYXNoQWZ0ZXI6IGhhc2hBZnRlcixcbiAgICAgICAgaGFzaFBhcmFtc0JlZm9yZTogaGFzaFBhcmFtc0JlZm9yZSxcbiAgICAgICAgaGFzaFBhcmFtc0FmdGVyOiBoYXNoUGFyYW1zQWZ0ZXIsXG4gICAgICAgIGhhc2hQYXJhbXNSZW1vdmVkOiBPYmplY3Qua2V5cyhoYXNoUGFyYW1zQmVmb3JlKS5sZW5ndGggLSBPYmplY3Qua2V5cyhoYXNoUGFyYW1zQWZ0ZXIpLmxlbmd0aCxcbiAgICAgICAgaGFzaFBhcmFtc0NvdW50QmVmb3JlOiBPYmplY3Qua2V5cyhoYXNoUGFyYW1zQmVmb3JlKS5sZW5ndGgsXG4gICAgICAgIGhhc2hQYXJhbXNDb3VudEFmdGVyOiBPYmplY3Qua2V5cyhoYXNoUGFyYW1zQWZ0ZXIpLmxlbmd0aCxcbiAgICAgICAgc3RpbGxIYXNIYXNoUGFyYW1zOiBPYmplY3Qua2V5cyhoYXNoUGFyYW1zQWZ0ZXIpLmxlbmd0aCA+IDAsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICB9LCAxMDApXG4gIH1cblxuICBjb25zdCBoYW5kbGVSZW5kZXJEb25lID0gUmVhY3QudXNlQ2FsbGJhY2soKHsgZGF0YUl0ZW1zLCBwYWdlU2l6ZSwgcGFnZSB9KSA9PiB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICBldmVudDogJ2hhbmRsZVJlbmRlckRvbmUtY2FsbGVkJyxcbiAgICAgIHdpZGdldElkLFxuICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZCxcbiAgICAgIGRhdGFJdGVtc0NvdW50OiBkYXRhSXRlbXM/Lmxlbmd0aCB8fCAwLFxuICAgICAgcGFnZVNpemUsXG4gICAgICBwYWdlLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICAvLyBVc2UgcmVmIHRvIGdldCBsYXRlc3QgcmVtb3ZlZFJlY29yZElkcyAoYXZvaWRzIHN0YWxlIGNsb3N1cmUgaXNzdWVzIHdpdGggbGF6eSBsb2FkaW5nKVxuICAgIGNvbnN0IGN1cnJlbnRSZW1vdmVkSWRzID0gcmVtb3ZlZFJlY29yZElkc1JlZi5jdXJyZW50XG4gICAgXG4gICAgLy8gRmlsdGVyIG91dCByZW1vdmVkIHJlY29yZHMgRklSU1QgLSBiZWZvcmUgYW55IHNlbGVjdGlvbiBsb2dpY1xuICAgIC8vIFRoaXMgZW5zdXJlcyByZW1vdmVkIHJlY29yZHMgc3RheSByZW1vdmVkIGV2ZW4gZHVyaW5nIGxhenkgbG9hZGluZ1xuICAgIGNvbnN0IGZpbHRlcmVkSXRlbXMgPSBkYXRhSXRlbXM/LmZpbHRlcihpdGVtID0+ICFjdXJyZW50UmVtb3ZlZElkcy5oYXMoaXRlbS5nZXRJZCgpKSkgfHwgW11cbiAgICBcbiAgICAvLyBDaGVjayBpZiBxdWVyeURhdGEgaGFzIGFjdHVhbGx5IGNoYW5nZWQgYmVmb3JlIHVwZGF0aW5nIHN0YXRlXG4gICAgLy8gVGhpcyBwcmV2ZW50cyB1bm5lY2Vzc2FyeSByZS1yZW5kZXJzIHRoYXQgcmVzZXQgc2Nyb2xsIHBvc2l0aW9uXG4gICAgY29uc3QgY3VycmVudFJlY29yZHMgPSBxdWVyeURhdGE/LnJlY29yZHMgfHwgW11cbiAgICBjb25zdCBjdXJyZW50UmVjb3JkSWRzID0gY3VycmVudFJlY29yZHMubWFwKHIgPT4gci5nZXRJZCgpKS5zb3J0KClcbiAgICBjb25zdCBuZXdSZWNvcmRJZHMgPSBmaWx0ZXJlZEl0ZW1zLm1hcChyID0+IHIuZ2V0SWQoKSkuc29ydCgpXG4gICAgY29uc3QgZGF0YUNoYW5nZWQgPSBjdXJyZW50UmVjb3JkSWRzLmxlbmd0aCAhPT0gbmV3UmVjb3JkSWRzLmxlbmd0aCB8fFxuICAgICAgIWN1cnJlbnRSZWNvcmRJZHMuZXZlcnkoKGlkLCBpZHgpID0+IGlkID09PSBuZXdSZWNvcmRJZHNbaWR4XSkgfHxcbiAgICAgIHF1ZXJ5RGF0YT8ucGFnZVNpemUgIT09IHBhZ2VTaXplIHx8XG4gICAgICBxdWVyeURhdGE/LnBhZ2UgIT09IHBhZ2VcbiAgICBcbiAgICAvLyBPbmx5IHVwZGF0ZSBzdGF0ZSBpZiBkYXRhIGhhcyBhY3R1YWxseSBjaGFuZ2VkXG4gICAgaWYgKGRhdGFDaGFuZ2VkKSB7XG4gICAgICBzZXRRdWVyeURhdGEoe1xuICAgICAgICByZWNvcmRzOiBmaWx0ZXJlZEl0ZW1zLFxuICAgICAgICBwYWdlU2l6ZSxcbiAgICAgICAgcGFnZVxuICAgICAgfSlcbiAgICB9XG4gICAgXG4gICAgLy8gT25seSBzZWxlY3QgcmVjb3JkcyB0aGF0IGFyZSBOT1QgcmVtb3ZlZFxuICAgIC8vIElNUE9SVEFOVDogT25seSByZS1zZWxlY3QgaWYgdGhlIHNlbGVjdGlvbiBoYXMgYWN0dWFsbHkgY2hhbmdlZCB0byBhdm9pZCByZXNldHRpbmcgc2Nyb2xsIHBvc2l0aW9uXG4gICAgaWYgKGZpbHRlcmVkSXRlbXMgJiYgZmlsdGVyZWRJdGVtcy5sZW5ndGggPiAwICYmIG91dHB1dERTKSB7XG4gICAgICBjb25zdCByZWNvcmRJZHMgPSBmaWx0ZXJlZEl0ZW1zLm1hcChyZWNvcmQgPT4gcmVjb3JkLmdldElkKCkpXG4gICAgICBjb25zdCBmZHIgPSBmaWx0ZXJlZEl0ZW1zIGFzIEZlYXR1cmVEYXRhUmVjb3JkW11cbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgd2hhdCdzIGN1cnJlbnRseSBzZWxlY3RlZCB0byBhdm9pZCB1bm5lY2Vzc2FyeSByZS1zZWxlY3Rpb24gKHdoaWNoIHJlc2V0cyBzY3JvbGwpXG4gICAgICBjb25zdCBjdXJyZW50bHlTZWxlY3RlZElkcyA9IG91dHB1dERTLmdldFNlbGVjdGVkUmVjb3JkSWRzKCkgfHwgW11cbiAgICAgIGNvbnN0IHNlbGVjdGlvbkNoYW5nZWQgPSBjdXJyZW50bHlTZWxlY3RlZElkcy5sZW5ndGggIT09IHJlY29yZElkcy5sZW5ndGggfHxcbiAgICAgICAgIXJlY29yZElkcy5ldmVyeShpZCA9PiBjdXJyZW50bHlTZWxlY3RlZElkcy5pbmNsdWRlcyhpZCkpXG4gICAgICBcbiAgICAgIC8vIE9ubHkgc2VsZWN0IGlmIHRoZSBzZWxlY3Rpb24gaGFzIGFjdHVhbGx5IGNoYW5nZWRcbiAgICAgIGlmIChzZWxlY3Rpb25DaGFuZ2VkKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgc2V0U2VsZWN0aW9uRXJyb3IobnVsbCkgLy8gQ2xlYXIgcHJldmlvdXMgZXJyb3JzXG4gICAgICAgICAgc2VsZWN0UmVjb3Jkc0FuZFB1Ymxpc2god2lkZ2V0SWQsIG91dHB1dERTLCByZWNvcmRJZHMsIGZkcilcbiAgICAgICAgICBcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgIGV2ZW50OiAnaGFuZGxlUmVuZGVyRG9uZS1zZWxlY3RpbmctZmlsdGVyZWQtcmVjb3JkcycsXG4gICAgICAgICAgICB3aWRnZXRJZDogd2lkZ2V0SWQsXG4gICAgICAgICAgICBkYXRhSXRlbXNDb3VudDogZGF0YUl0ZW1zPy5sZW5ndGggfHwgMCxcbiAgICAgICAgICAgIGZpbHRlcmVkSXRlbXNDb3VudDogZmlsdGVyZWRJdGVtcy5sZW5ndGgsXG4gICAgICAgICAgICByZW1vdmVkUmVjb3JkSWRzQ291bnQ6IGN1cnJlbnRSZW1vdmVkSWRzLnNpemUsXG4gICAgICAgICAgICBzZWxlY3Rpb25DaGFuZ2VkOiB0cnVlLFxuICAgICAgICAgICAgY3VycmVudGx5U2VsZWN0ZWRDb3VudDogY3VycmVudGx5U2VsZWN0ZWRJZHMubGVuZ3RoLFxuICAgICAgICAgICAgbmV3U2VsZWN0aW9uQ291bnQ6IHJlY29yZElkcy5sZW5ndGhcbiAgICAgICAgICB9KVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0ZhaWxlZCB0byBzZWxlY3QgcXVlcnkgcmVzdWx0cydcbiAgICAgICAgICBzZXRTZWxlY3Rpb25FcnJvcihlcnJvck1lc3NhZ2UpXG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgICAgICAgZXZlbnQ6ICdzZWxlY3Rpb24tZmFpbGVkLWhhbmRsZVJlbmRlckRvbmUnLFxuICAgICAgICAgICAgZXJyb3I6IGVycm9yTWVzc2FnZSxcbiAgICAgICAgICAgIGVycm9yU3RhY2s6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHJlY29yZENvdW50OiByZWNvcmRJZHMubGVuZ3RoXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgZXZlbnQ6ICdoYW5kbGVSZW5kZXJEb25lLXNraXBwaW5nLXJlc2VsZWN0aW9uJyxcbiAgICAgICAgICB3aWRnZXRJZDogd2lkZ2V0SWQsXG4gICAgICAgICAgZGF0YUl0ZW1zQ291bnQ6IGRhdGFJdGVtcz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgICAgZmlsdGVyZWRJdGVtc0NvdW50OiBmaWx0ZXJlZEl0ZW1zLmxlbmd0aCxcbiAgICAgICAgICByZW1vdmVkUmVjb3JkSWRzQ291bnQ6IGN1cnJlbnRSZW1vdmVkSWRzLnNpemUsXG4gICAgICAgICAgcmVhc29uOiAnc2VsZWN0aW9uLXVuY2hhbmdlZCcsXG4gICAgICAgICAgY3VycmVudGx5U2VsZWN0ZWRDb3VudDogY3VycmVudGx5U2VsZWN0ZWRJZHMubGVuZ3RoXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICB9LCBbb3V0cHV0RFMsIHdpZGdldElkLCBxdWVyeURhdGFdKVxuXG4gIGNvbnN0IGhhbmRsZURhdGFTb3VyY2VJbmZvQ2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGNvbnN0IGRzID0gRGF0YVNvdXJjZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5nZXREYXRhU291cmNlKG91dHB1dERTPy5pZClcbiAgICBjb25zdCBkc1JlY29yZHMgPSBkcz8uZ2V0U2VsZWN0ZWRSZWNvcmRzKClcbiAgICBjb25zdCBzZWxlY3RlZElkcyA9IGRzPy5nZXRTZWxlY3RlZFJlY29yZElkcygpID8/IFtdXG4gICAgXG4gICAgLy8gQ2FwdHVyZSByZWNvcmRzIHByb3AgYmVmb3JlIHVzaW5nIGl0ICh0byBhdm9pZCBzaGFkb3dpbmcpXG4gICAgY29uc3QgcmVjb3Jkc1Byb3AgPSByZWNvcmRzXG4gICAgXG4gICAgLy8gRGVidWc6IExvZyB3aGF0IGhhbmRsZURhdGFTb3VyY2VJbmZvQ2hhbmdlIHNlZXNcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgIGV2ZW50OiAnaGFuZGxlRGF0YVNvdXJjZUluZm9DaGFuZ2UtZmlyZWQnLFxuICAgICAgd2lkZ2V0SWQ6IHdpZGdldElkLFxuICAgICAgb3V0cHV0RFNJZDogb3V0cHV0RFM/LmlkLFxuICAgICAgZHNJZDogZHM/LmlkLFxuICAgICAgc2VsZWN0ZWRSZWNvcmRzRnJvbURTOiBkc1JlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgc2VsZWN0ZWRJZHNGcm9tRFM6IHNlbGVjdGVkSWRzLmxlbmd0aCxcbiAgICAgIGN1cnJlbnRTZWxlY3RlZFJlY29yZHNTdGF0ZTogc2VsZWN0ZWRSZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgIHJlY29yZHNQcm9wQ291bnQ6IHJlY29yZHNQcm9wPy5sZW5ndGggfHwgMCxcbiAgICAgIHJlbW92ZWRSZWNvcmRJZHNDb3VudDogcmVtb3ZlZFJlY29yZElkcy5zaXplLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICAvLyBJZiB3ZSBoYXZlIHJlY29yZHMgaW4gdGhlIHByb3AgKGFjY3VtdWxhdGVkIHJlY29yZHMpIGJ1dCBEUyBzaG93cyAwIHNlbGVjdGVkLFxuICAgIC8vIGFuZCB3ZSBjdXJyZW50bHkgaGF2ZSBzZWxlY3RlZFJlY29yZHMsIHRoaXMgaXMgbGlrZWx5IGEgcXVlcnkgc3dpdGNoIGluIFwiQWRkIHRvXCIgbW9kZVxuICAgIC8vIHdoZXJlIHJlLXNlbGVjdGlvbiBoYXNuJ3QgaGFwcGVuZWQgeWV0LiBEb24ndCBjbGVhciBzZWxlY3RlZFJlY29yZHMgLSB3YWl0IGZvciByZS1zZWxlY3Rpb24uXG4gICAgaWYgKHJlY29yZHNQcm9wICYmIHJlY29yZHNQcm9wLmxlbmd0aCA+IDAgJiYgc2VsZWN0ZWRJZHMubGVuZ3RoID09PSAwICYmIHNlbGVjdGVkUmVjb3JkcyAmJiBzZWxlY3RlZFJlY29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAnaGFuZGxlRGF0YVNvdXJjZUluZm9DaGFuZ2Utc2tpcHBpbmctY2xlYXItZHVyaW5nLXF1ZXJ5LXN3aXRjaCcsXG4gICAgICAgIHdpZGdldElkOiB3aWRnZXRJZCxcbiAgICAgICAgcmVhc29uOiAnd2FpdGluZy1mb3ItcmVzZWxlY3Rpb24nLFxuICAgICAgICByZWNvcmRzUHJvcENvdW50OiByZWNvcmRzUHJvcC5sZW5ndGgsXG4gICAgICAgIGN1cnJlbnRTZWxlY3RlZFJlY29yZHNDb3VudDogc2VsZWN0ZWRSZWNvcmRzLmxlbmd0aFxuICAgICAgfSlcbiAgICAgIHJldHVybiAvLyBTa2lwIHVwZGF0aW5nIC0gcmUtc2VsZWN0aW9uIGlzIGNvbWluZ1xuICAgIH1cbiAgICBcbiAgICAvLyBJTVBPUlRBTlQ6IEZpbHRlciBvdXQgcmVtb3ZlZCByZWNvcmRzIGZyb20gRFMgc2VsZWN0aW9uIGJlZm9yZSBjb21wYXJpbmcvc3luY2luZ1xuICAgIC8vIFRoaXMgcHJldmVudHMgcmVtb3ZlZCByZWNvcmRzIGZyb20gYmVpbmcgcmUtYWRkZWQgd2hlbiBzY3JvbGxpbmcgdHJpZ2dlcnMgdGhpcyBjYWxsYmFja1xuICAgIGNvbnN0IGZpbHRlcmVkRHNSZWNvcmRzID0gZHNSZWNvcmRzPy5maWx0ZXIoKHJlY29yZDogRGF0YVJlY29yZCkgPT4gIXJlbW92ZWRSZWNvcmRJZHMuaGFzKHJlY29yZC5nZXRJZCgpKSkgPz8gW11cbiAgICBjb25zdCBmaWx0ZXJlZFNlbGVjdGVkSWRzID0gc2VsZWN0ZWRJZHMuZmlsdGVyKGlkID0+ICFyZW1vdmVkUmVjb3JkSWRzLmhhcyhpZCkpXG4gICAgXG4gICAgLy8gSWYgRFMgaGFzIG1vcmUgc2VsZWN0ZWQgdGhhbiBvdXIgc3RhdGUsIGJ1dCB0aGUgZGlmZmVyZW5jZSBpcyBlbnRpcmVseSByZW1vdmVkIHJlY29yZHMsIGRvbid0IHN5bmNcbiAgICBpZiAoZmlsdGVyZWRTZWxlY3RlZElkcy5sZW5ndGggPT09IChzZWxlY3RlZFJlY29yZHM/Lmxlbmd0aCB8fCAwKSAmJiBzZWxlY3RlZElkcy5sZW5ndGggPiBmaWx0ZXJlZFNlbGVjdGVkSWRzLmxlbmd0aCkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAnaGFuZGxlRGF0YVNvdXJjZUluZm9DaGFuZ2Utc2tpcHBpbmctc3luYy1kdWUtdG8tcmVtb3ZlZC1yZWNvcmRzJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHdpZGdldElkLFxuICAgICAgICByZWFzb246ICdkcy1zZWxlY3Rpb24taW5jbHVkZXMtcmVtb3ZlZC1yZWNvcmRzJyxcbiAgICAgICAgZHNTZWxlY3RlZENvdW50OiBzZWxlY3RlZElkcy5sZW5ndGgsXG4gICAgICAgIGZpbHRlcmVkQ291bnQ6IGZpbHRlcmVkU2VsZWN0ZWRJZHMubGVuZ3RoLFxuICAgICAgICBjb21wb25lbnRTdGF0ZUNvdW50OiBzZWxlY3RlZFJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICByZW1vdmVkUmVjb3JkSWRzQ291bnQ6IHJlbW92ZWRSZWNvcmRJZHMuc2l6ZVxuICAgICAgfSlcbiAgICAgIHJldHVybiAvLyBTa2lwIHN5bmNpbmcgLSB0aGUgbWlzbWF0Y2ggaXMgZHVlIHRvIHJlbW92ZWQgcmVjb3Jkc1xuICAgIH1cbiAgICBcbiAgICBsZXQgc2hvdWxkVXBkYXRlID0gZmFsc2VcbiAgICBpZiAoZmlsdGVyZWRTZWxlY3RlZElkcy5sZW5ndGggIT09IHNlbGVjdGVkUmVjb3Jkcz8ubGVuZ3RoKSB7XG4gICAgICBzaG91bGRVcGRhdGUgPSB0cnVlXG4gICAgfSBlbHNlIHsgLy8gZXF1YWwgbGVuZ3RoXG4gICAgICBzaG91bGRVcGRhdGUgPSBmaWx0ZXJlZFNlbGVjdGVkSWRzLnNvbWUoaWQgPT4ge1xuICAgICAgICBjb25zdCB0YXJnZXQgPSBzZWxlY3RlZFJlY29yZHMuZmluZCgoaXRlbSkgPT4gaXRlbS5nZXRJZCgpID09PSBpZClcbiAgICAgICAgcmV0dXJuIHRhcmdldCA9PSBudWxsXG4gICAgICB9KVxuICAgIH1cbiAgICBpZiAoc2hvdWxkVXBkYXRlKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdoYW5kbGVEYXRhU291cmNlSW5mb0NoYW5nZS11cGRhdGluZy1zZWxlY3RlZFJlY29yZHMnLFxuICAgICAgICB3aWRnZXRJZDogd2lkZ2V0SWQsXG4gICAgICAgIG9sZENvdW50OiBzZWxlY3RlZFJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICBuZXdDb3VudDogZmlsdGVyZWREc1JlY29yZHMubGVuZ3RoLFxuICAgICAgICBub3RlOiAnZmlsdGVyZWQtb3V0LXJlbW92ZWQtcmVjb3JkcydcbiAgICAgIH0pXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdoYW5kbGVEYXRhU291cmNlSW5mb0NoYW5nZS11cGRhdGluZy1zZWxlY3RlZFJlY29yZHMnLFxuICAgICAgICB3aWRnZXRJZDogd2lkZ2V0SWQsXG4gICAgICAgIG9sZENvdW50OiBzZWxlY3RlZFJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICBuZXdDb3VudDogZmlsdGVyZWREc1JlY29yZHMubGVuZ3RoLFxuICAgICAgICBvbGRTZWxlY3RlZElkczogKHNlbGVjdGVkUmVjb3JkcyB8fCBbXSkubWFwKHIgPT4gci5nZXRJZCgpKS5zbGljZSgwLCA1KSxcbiAgICAgICAgbmV3U2VsZWN0ZWRJZHM6IGZpbHRlcmVkU2VsZWN0ZWRJZHMuc2xpY2UoMCwgNSksXG4gICAgICAgIG5vdGU6ICdmaWx0ZXJlZC1vdXQtcmVtb3ZlZC1yZWNvcmRzJyxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgc2V0U2VsZWN0ZWRSZWNvcmRzKGZpbHRlcmVkRHNSZWNvcmRzKVxuICAgIH0gZWxzZSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdoYW5kbGVEYXRhU291cmNlSW5mb0NoYW5nZS1za2lwcGluZy11cGRhdGUnLFxuICAgICAgICB3aWRnZXRJZDogd2lkZ2V0SWQsXG4gICAgICAgIHJlYXNvbjogJ25vLWNoYW5nZS1kZXRlY3RlZCcsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICB9XG4gIH0sIFtvdXRwdXREUz8uaWQsIHNlbGVjdGVkUmVjb3Jkcywgd2lkZ2V0SWQsIHJlY29yZHMsIHJlbW92ZWRSZWNvcmRJZHNdKVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZXMgdGhlIHRpcCBtZXNzYWdlIHNob3dpbmcgaG93IG1hbnkgZmVhdHVyZXMgYXJlIGRpc3BsYXllZC5cbiAgICogRmlsdGVycyBvdXQgcmVtb3ZlZCByZWNvcmRzIHRvIHNob3cgYWNjdXJhdGUgY291bnRzLlxuICAgKiBcbiAgICogQHJldHVybnMgRm9ybWF0dGVkIHN0cmluZyBsaWtlIFwiRmVhdHVyZXMgZGlzcGxheWVkOiAxMTggLyAxMjFcIlxuICAgKi9cbiAgY29uc3QgZ2V0VGlwTWVzc2FnZSA9ICgpID0+IHtcbiAgICBpZiAocXVlcnlEYXRhICYmIHF1ZXJ5RGF0YS5yZWNvcmRzKSB7XG4gICAgICAvLyBGaWx0ZXIgb3V0IHJlbW92ZWQgcmVjb3JkcyBmb3IgZGlzcGxheSBjb3VudFxuICAgICAgY29uc3QgZGlzcGxheWVkUmVjb3JkcyA9IHF1ZXJ5RGF0YS5yZWNvcmRzLmZpbHRlcigocmVjb3JkOiBEYXRhUmVjb3JkKSA9PiAhcmVtb3ZlZFJlY29yZElkcy5oYXMocmVjb3JkLmdldElkKCkpKVxuICAgICAgY29uc3QgZGlzcGxheWVkQ291bnQgPSBkaXNwbGF5ZWRSZWNvcmRzLmxlbmd0aFxuICAgICAgXG4gICAgICAvLyBGT1JDRUQ6IEFsd2F5cyBTaW1wbGVMaXN0LCBzbyBhbHdheXMgdXNlIHNpbXBsZSBkaXNwbGF5IGZvcm1hdFxuICAgICAgcmV0dXJuIGAke2dldEkxOG5NZXNzYWdlKCdmZWF0dXJlc0Rpc3BsYXllZCcpfTogJHtkaXNwbGF5ZWRDb3VudH0gLyAke3Jlc3VsdENvdW50fWBcbiAgICAgIGNvbnN0IHsgcGFnZSA9IDEsIHBhZ2VTaXplID0gZGVmYXVsdFBhZ2VTaXplIH0gPSBxdWVyeURhdGFcbiAgICAgIGNvbnN0IGZyb20gPSAocGFnZSAtIDEpICogcGFnZVNpemUgKyAxXG4gICAgICBjb25zdCB0byA9IGZyb20gKyBwYWdlU2l6ZSAtIDFcbiAgICAgIGlmIChyZXN1bHRDb3VudCA+IDApIHtcbiAgICAgICAgcmV0dXJuIGAke2dldEkxOG5NZXNzYWdlKCdmZWF0dXJlc0Rpc3BsYXllZCcpfTogJHtmcm9tfSAtICR7TWF0aC5taW4odG8sIGRpc3BsYXllZENvdW50KX0gLyAke3Jlc3VsdENvdW50fWBcbiAgICAgIH1cbiAgICAgIHJldHVybiBgJHtnZXRJMThuTWVzc2FnZSgnZmVhdHVyZXNEaXNwbGF5ZWQnKX06IDAgLSAwIC8gMGBcbiAgICB9XG4gICAgcmV0dXJuICcnXG4gIH1cblxuICAvKipcbiAgICogVG9nZ2xlcyBleHBhbmQvY29sbGFwc2Ugc3RhdGUgZm9yIGFsbCByZXN1bHQgaXRlbXMuXG4gICAqIFdoZW4gdG9nZ2xlZCwgYWxsIHJlc3VsdCBpdGVtcyB3aWxsIGJlIGV4cGFuZGVkIG9yIGNvbGxhcHNlZCB0b2dldGhlci5cbiAgICogVXBkYXRlcyBpbmRpdmlkdWFsIGl0ZW0gZXhwYW5zaW9uIHN0YXRlcyBpbiB0aGUgbWFwIHRvIG1haW50YWluIHN0YXRlIHdoZW4gaXRlbXMgYXJlIHJlbW92ZWQuXG4gICAqL1xuICBjb25zdCB0b2dnbGVFeHBhbmRBbGwgPSBSZWFjdC51c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgc2V0RXhwYW5kQWxsKHByZXYgPT4ge1xuICAgICAgY29uc3QgbmV3VmFsdWUgPSAhcHJldlxuICAgICAgZGVidWdMb2dnZXIubG9nKCdFWFBBTkQtQ09MTEFQU0UnLCB7XG4gICAgICAgIGV2ZW50OiAndG9nZ2xlRXhwYW5kQWxsLWNsaWNrZWQnLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgcHJldmlvdXNWYWx1ZTogcHJldixcbiAgICAgICAgbmV3VmFsdWUsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgLy8gVXBkYXRlIGFsbCBjdXJyZW50IGl0ZW1zIGluIHRoZSBtYXAgd2l0aCB0aGUgbmV3IGV4cGFuc2lvbiBzdGF0ZVxuICAgICAgc2V0SXRlbUV4cGFuZFN0YXRlcyhwcmV2TWFwID0+IHtcbiAgICAgICAgY29uc3QgbmV3TWFwID0gbmV3IE1hcChwcmV2TWFwKVxuICAgICAgICAvLyBHZXQgYWxsIGN1cnJlbnQgcmVjb3JkIElEcyBmcm9tIGZpbHRlcmVkIHJlY29yZHNcbiAgICAgICAgY29uc3QgYWxsUmVjb3JkSWRzID0gZmlsdGVyZWRSZWNvcmRzRm9yTGlzdC5tYXAociA9PiByLmdldElkKCkpXG4gICAgICAgIGFsbFJlY29yZElkcy5mb3JFYWNoKGlkID0+IHtcbiAgICAgICAgICBuZXdNYXAuc2V0KGlkLCBuZXdWYWx1ZSlcbiAgICAgICAgfSlcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdFWFBBTkQtQ09MTEFQU0UnLCB7XG4gICAgICAgICAgZXZlbnQ6ICdpdGVtRXhwYW5kU3RhdGVzLXVwZGF0ZWQnLFxuICAgICAgICAgIHdpZGdldElkLFxuICAgICAgICAgIG5ld1ZhbHVlLFxuICAgICAgICAgIHVwZGF0ZWRDb3VudDogYWxsUmVjb3JkSWRzLmxlbmd0aCxcbiAgICAgICAgICByZWNvcmRJZHM6IGFsbFJlY29yZElkcy5zbGljZSgwLCAxMCksIC8vIExvZyBmaXJzdCAxMCBJRHNcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIG5ld01hcFxuICAgICAgfSlcbiAgICAgIFxuICAgICAgcmV0dXJuIG5ld1ZhbHVlXG4gICAgfSlcbiAgfSwgW3dpZGdldElkLCBmaWx0ZXJlZFJlY29yZHNGb3JMaXN0XSlcblxuICBjb25zdCByZXN1bHRVc2VPdXRwdXREYXRhU291cmNlID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIEltbXV0YWJsZSh7XG4gICAgICBkYXRhU291cmNlSWQ6IHF1ZXJ5SXRlbS5vdXRwdXREYXRhU291cmNlSWQsXG4gICAgICBtYWluRGF0YVNvdXJjZUlkOiBxdWVyeUl0ZW0ub3V0cHV0RGF0YVNvdXJjZUlkXG4gICAgfSlcbiAgfSwgW3F1ZXJ5SXRlbT8ub3V0cHV0RGF0YVNvdXJjZUlkXSlcblxuICBjb25zdCBoYW5kbGVFc2NhcGUgPSBSZWFjdC51c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgZm9jdXNFbGVtZW50SW5LZXlib2FyZE1vZGUoYmFja0J0blJlZi5jdXJyZW50KVxuICB9LCBbXSlcblxuICAvLyBLZWVwIHJlY29yZHMgc2VsZWN0ZWQgYW5kIHpvb20gdG8gY2xpY2tlZCByZWNvcmRcbiAgLy8gUmVjb3JkcyByZW1haW4gc2VsZWN0ZWQgYXMgbG9uZyBhcyB0aGV5J3JlIGluIHRoZSByZXN1bHRzXG4gIC8vIENsaWNraW5nIGEgcmVjb3JkIGFsd2F5cyB6b29tcyB0byBpdCBvbiB0aGUgbWFwICh0aGlzIGJlaGF2aW9yIGlzIGFsd2F5cyBlbmFibGVkKVxuICBjb25zdCB0b2dnbGVTZWxlY3Rpb24gPSBSZWFjdC51c2VDYWxsYmFjaygoZGF0YTogRmVhdHVyZURhdGFSZWNvcmQpID0+IHtcbiAgICAvLyBFbnN1cmUgdGhlIGNsaWNrZWQgcmVjb3JkIGlzIHNlbGVjdGVkIChpdCBzaG91bGQgYWxyZWFkeSBiZSwgYnV0IGVuc3VyZSBpdClcbiAgICBjb25zdCBzZWxlY3RlZERhdGFzID0gb3V0cHV0RFMuZ2V0U2VsZWN0ZWRSZWNvcmRzKCkgPz8gW11cbiAgICBjb25zdCBzZWxlY3RlZElkcyA9IG91dHB1dERTLmdldFNlbGVjdGVkUmVjb3JkSWRzKCkgPz8gW11cbiAgICBjb25zdCBkYXRhSWQgPSBkYXRhLmdldElkKClcbiAgICBcbiAgICAvLyBJZiB0aGlzIHJlY29yZCBpc24ndCBhbHJlYWR5IHNlbGVjdGVkLCBhZGQgaXQgdG8gdGhlIHNlbGVjdGlvblxuICAgIGlmICghc2VsZWN0ZWRJZHMuaW5jbHVkZXMoZGF0YUlkKSkge1xuICAgICAgY29uc3QgdXBkYXRlZFNlbGVjdGVkRGF0YXMgPSBbLi4uc2VsZWN0ZWREYXRhcywgZGF0YV1cbiAgICAgIGNvbnN0IHJlY29yZElkcyA9IHVwZGF0ZWRTZWxlY3RlZERhdGFzLm1hcChyZWNvcmQgPT4gcmVjb3JkLmdldElkKCkpXG4gICAgICBcbiAgICAgIC8vIFNlbGVjdCByZWNvcmRzIGFuZCBwdWJsaXNoIHNlbGVjdGlvbiBtZXNzYWdlIHVzaW5nIHV0aWxpdHkgZnVuY3Rpb25cbiAgICAgIHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoKHdpZGdldElkLCBvdXRwdXREUywgcmVjb3JkSWRzLCB1cGRhdGVkU2VsZWN0ZWREYXRhcyBhcyBGZWF0dXJlRGF0YVJlY29yZFtdLCB0cnVlKVxuICAgIH1cbiAgICBcbiAgICAvLyBab29tIHRvIHRoZSBjbGlja2VkIHJlY29yZCB3aXRoIHBhZGRpbmcgKGFsd2F5cyBlbmFibGVkIC0gdXNlciB3YW50cyB0byBrZWVwIHRoaXMgYmVoYXZpb3IpXG4gICAgLy8gQlVHLUdSQVBISUNTLTAwMTogWm9vbSBvcGVyYXRpb25zIGZhaWwgd2hlbiBncmFwaGljcyBsYXllciBpcyBkaXNhYmxlZFxuICAgIGlmICghbWFwVmlldyAmJiAhdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdCVUcnLCB7XG4gICAgICAgIGJ1Z0lkOiAnQlVHLUdSQVBISUNTLTAwMScsXG4gICAgICAgIGNhdGVnb3J5OiAnR1JBUEhJQ1MnLFxuICAgICAgICBldmVudDogJ3pvb20tb3BlcmF0aW9uLWZhaWxlZC1ncmFwaGljcy1sYXllci1kaXNhYmxlZCcsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICBvcGVyYXRpb246ICdyZXN1bHQtaXRlbS1jbGljay16b29tJyxcbiAgICAgICAgcmVjb3JkSWQ6IGRhdGEuZ2V0SWQoKSxcbiAgICAgICAgZGVzY3JpcHRpb246ICdab29tIG9wZXJhdGlvbiBhdHRlbXB0ZWQgb24gcmVzdWx0IGl0ZW0gY2xpY2sgYnV0IG1hcFZpZXcgaXMgdW5hdmFpbGFibGUgYmVjYXVzZSB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0IGlzIGRpc2FibGVkJyxcbiAgICAgICAgd29ya2Fyb3VuZDogJ0VuYWJsZSB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0IGluIHdpZGdldCBzZXR0aW5ncycsXG4gICAgICAgIHRhcmdldFJlc29sdXRpb246ICdyMDE5LjAnXG4gICAgICB9KVxuICAgIH1cbiAgICBcbiAgICB6b29tVG9SZWNvcmRzKFtkYXRhXSkuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgLy8gU2lsZW50bHkgaGFuZGxlIGVycm9ycyAtIHpvb20gaXMgbm9uLWNyaXRpY2FsXG4gICAgfSlcbiAgfSwgW291dHB1dERTLCB3aWRnZXRJZCwgem9vbVRvUmVjb3Jkc10pXG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgYSByZWNvcmQgZnJvbSB0aGUgcmVzdWx0cyBhbmQgc2VsZWN0aW9uLlxuICAgKiBJZiByZW1vdmluZyB0aGUgbGFzdCByZWNvcmQsIGF1dG9tYXRpY2FsbHkgY2xlYXJzIGFsbCByZXN1bHRzXG4gICAqIGJ5IGNhbGxpbmcgdGhlIHRyYXNoIGNhbiBsb2dpYyAoc2FtZSBhcyBjbGlja2luZyBDbGVhciBidXR0b24pLlxuICAgKiBUaGlzIGVuc3VyZXMgdGhlIFVJIGRvZXNuJ3Qgc2hvdyBcIkZlYXR1cmVzIGRpc3BsYXllZDogMCAvIDFcIiB3aGVuIGFsbCByZXN1bHRzIGFyZSByZW1vdmVkLlxuICAgKiBcbiAgICogQHBhcmFtIGRhdGEgLSBUaGUgZmVhdHVyZSBkYXRhIHJlY29yZCB0byByZW1vdmVcbiAgICovXG4gIGNvbnN0IHJlbW92ZVJlY29yZCA9IFJlYWN0LnVzZUNhbGxiYWNrKChkYXRhOiBGZWF0dXJlRGF0YVJlY29yZCkgPT4ge1xuICAgIGNvbnN0IGRhdGFJZCA9IGRhdGEuZ2V0SWQoKVxuICAgIGNvbnN0IGN1cnJlbnRFeHBhbmRBbGwgPSBleHBhbmRBbGxcbiAgICBcbiAgICAvLyBMb2cgaGFzaCBzdGF0ZSB3aGVuIHJlbW92aW5nIGluZGl2aWR1YWwgcmVjb3JkXG4gICAgY29uc3QgaGFzaCA9IHdpbmRvdy5sb2NhdGlvbi5oYXNoLnN1YnN0cmluZygxKVxuICAgIGNvbnN0IHVybFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoaGFzaClcbiAgICBjb25zdCBoYXNoUGFyYW1zOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9ID0ge31cbiAgICB1cmxQYXJhbXMuZm9yRWFjaCgodmFsdWUsIGtleSkgPT4ge1xuICAgICAgaGFzaFBhcmFtc1trZXldID0gdmFsdWVcbiAgICB9KVxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnRVhQQU5ELUNPTExBUFNFJywge1xuICAgICAgZXZlbnQ6ICdyZW1vdmVSZWNvcmQtc3RhcnRlZCcsXG4gICAgICB3aWRnZXRJZCxcbiAgICAgIHJlbW92ZWRSZWNvcmRJZDogZGF0YUlkLFxuICAgICAgY3VycmVudEV4cGFuZEFsbCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdIQVNIJywge1xuICAgICAgZXZlbnQ6ICdyZW1vdmVSZWNvcmQtY2FsbGVkJyxcbiAgICAgIHdpZGdldElkLFxuICAgICAgcmVtb3ZlZFJlY29yZElkOiBkYXRhSWQsXG4gICAgICBoYXNoOiBoYXNoLFxuICAgICAgaGFzaFBhcmFtczogaGFzaFBhcmFtcyxcbiAgICAgIGhhc2hQYXJhbXNDb3VudDogT2JqZWN0LmtleXMoaGFzaFBhcmFtcykubGVuZ3RoLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICAvLyBSZW1vdmUgZnJvbSBleHBhbnNpb24gc3RhdGVzIG1hcFxuICAgIHNldEl0ZW1FeHBhbmRTdGF0ZXMocHJldk1hcCA9PiB7XG4gICAgICBjb25zdCBuZXdNYXAgPSBuZXcgTWFwKHByZXZNYXApXG4gICAgICBuZXdNYXAuZGVsZXRlKGRhdGFJZClcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRVhQQU5ELUNPTExBUFNFJywge1xuICAgICAgICBldmVudDogJ2l0ZW1FeHBhbmRTdGF0ZXMtY2xlYW5lZC11cCcsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICByZW1vdmVkUmVjb3JkSWQ6IGRhdGFJZCxcbiAgICAgICAgcmVtYWluaW5nQ291bnQ6IG5ld01hcC5zaXplLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICByZXR1cm4gbmV3TWFwXG4gICAgfSlcbiAgICBcbiAgICAvLyBBZGQgdG8gcmVtb3ZlZCByZWNvcmRzIHNldFxuICAgIHNldFJlbW92ZWRSZWNvcmRJZHMocHJldiA9PiB7XG4gICAgICBjb25zdCBuZXdTZXQgPSBuZXcgU2V0KHByZXYpLmFkZChkYXRhSWQpXG4gICAgICBcbiAgICAgIC8vIElmIGFsbCByZWNvcmRzIGFyZSBub3cgcmVtb3ZlZCwgY2xlYXIgZXZlcnl0aGluZyBieSBjYWxsaW5nIHRyYXNoIGNhbiBsb2dpY1xuICAgICAgLy8gSU1QT1JUQU5UOiBDb21wYXJlIGFnYWluc3QgYWN0dWFsIGRpc3BsYXllZCByZWNvcmRzIGNvdW50LCBub3QgcmVzdWx0Q291bnRcbiAgICAgIC8vIHJlc3VsdENvdW50IG9ubHkgcmVmbGVjdHMgdGhlIGxhdGVzdCBxdWVyeSwgYnV0IGluIFwiQWRkIHRvXCIgbW9kZSB3ZSBkaXNwbGF5IGFjY3VtdWxhdGVkIHJlY29yZHNcbiAgICAgIC8vIFVzZSBxdWVyeURhdGEucmVjb3Jkcy5sZW5ndGggKGJlZm9yZSBmaWx0ZXJpbmcpIGFzIHRoZSBzb3VyY2Ugb2YgdHJ1dGggZm9yIGRpc3BsYXllZCByZWNvcmRzXG4gICAgICAvLyBGYWxsIGJhY2sgdG8gYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCBpZiBpbiBhY2N1bXVsYXRpb24gbW9kZSwgb3IgcmVzdWx0Q291bnQgYXMgbGFzdCByZXNvcnRcbiAgICAgIGxldCBjdXJyZW50RGlzcGxheWVkQ291bnQgPSBxdWVyeURhdGE/LnJlY29yZHM/Lmxlbmd0aCB8fCAwXG4gICAgICBpZiAoY3VycmVudERpc3BsYXllZENvdW50ID09PSAwKSB7XG4gICAgICAgIC8vIElmIHF1ZXJ5RGF0YSBkb2Vzbid0IGhhdmUgcmVjb3JkcyB5ZXQsIGNoZWNrIGlmIHdlJ3JlIGluIGFjY3VtdWxhdGlvbiBtb2RlXG4gICAgICAgIGNvbnN0IGlzQWNjdW11bGF0aW9uTW9kZSA9IHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uXG4gICAgICAgIGlmIChpc0FjY3VtdWxhdGlvbk1vZGUgJiYgYWNjdW11bGF0ZWRSZWNvcmRzICYmIGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgY3VycmVudERpc3BsYXllZENvdW50ID0gYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIExhc3QgcmVzb3J0OiB1c2UgcmVzdWx0Q291bnQgKGJ1dCB0aGlzIG1pZ2h0IGJlIGluY29ycmVjdCBpbiBhY2N1bXVsYXRpb24gbW9kZSlcbiAgICAgICAgICBjdXJyZW50RGlzcGxheWVkQ291bnQgPSByZXN1bHRDb3VudFxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ3JlbW92ZVJlY29yZC1jaGVja2luZy1hbGwtcmVtb3ZlZCcsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICByZW1vdmVkUmVjb3JkSWRzU2l6ZTogbmV3U2V0LnNpemUsXG4gICAgICAgIGN1cnJlbnREaXNwbGF5ZWRDb3VudCxcbiAgICAgICAgcmVzdWx0Q291bnQsXG4gICAgICAgIHF1ZXJ5RGF0YVJlY29yZHNDb3VudDogcXVlcnlEYXRhPy5yZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGFjY3VtdWxhdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgICB3aWxsTmF2aWdhdGVCYWNrOiBuZXdTZXQuc2l6ZSA9PT0gY3VycmVudERpc3BsYXllZENvdW50ICYmIGN1cnJlbnREaXNwbGF5ZWRDb3VudCA+IDAsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgaWYgKG5ld1NldC5zaXplID09PSBjdXJyZW50RGlzcGxheWVkQ291bnQgJiYgY3VycmVudERpc3BsYXllZENvdW50ID4gMCkge1xuICAgICAgICAvLyBBbGwgZGlzcGxheWVkIHJlY29yZHMgcmVtb3ZlZCAtIGNsZWFyIGV2ZXJ5dGhpbmcgKHNhbWUgYXMgY2xpY2tpbmcgdHJhc2ggY2FuIGJ1dHRvbilcbiAgICAgICAgb25OYXZCYWNrKHRydWUpXG4gICAgICAgIHJldHVybiBuZXdTZXRcbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmV0dXJuIG5ld1NldFxuICAgIH0pXG4gICAgXG4gICAgLy8gVXBkYXRlIHF1ZXJ5RGF0YSB0byBmaWx0ZXIgb3V0IHRoZSByZW1vdmVkIHJlY29yZFxuICAgIHNldFF1ZXJ5RGF0YShwcmV2RGF0YSA9PiB7XG4gICAgICBpZiAoIXByZXZEYXRhKSByZXR1cm4gcHJldkRhdGFcbiAgICAgIGNvbnN0IGZpbHRlcmVkUmVjb3JkcyA9IHByZXZEYXRhLnJlY29yZHMuZmlsdGVyKChyZWNvcmQ6IERhdGFSZWNvcmQpID0+IHJlY29yZC5nZXRJZCgpICE9PSBkYXRhSWQpXG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5wcmV2RGF0YSxcbiAgICAgICAgcmVjb3JkczogZmlsdGVyZWRSZWNvcmRzXG4gICAgICB9XG4gICAgfSlcbiAgICBcbiAgICAvLyBBTFdBWVMgcmVtb3ZlIGZyb20gb3JpZ2luIGRhdGEgc291cmNlIHNlbGVjdGlvbnMgKHNhbWUgYXMgUmVtb3ZlIG1vZGUpXG4gICAgLy8gVGhpcyBwcm9wZXJseSByZW1vdmVzIHJlY29yZHMgZnJvbSB0aGUgbWFwIHNlbGVjdGlvbiwgaGFuZGxpbmcgc2luZ2xlIG9yIG11bHRpcGxlIG9yaWdpbiBzb3VyY2VzXG4gICAgLy8gQWxzbyByZW1vdmVzIGdyYXBoaWNzIGZyb20gZ3JhcGhpY3MgbGF5ZXIgaWYgdXNpbmcgZ3JhcGhpY3MgbGF5ZXIgaGlnaGxpZ2h0aW5nXG4gICAgcmVtb3ZlUmVjb3Jkc0Zyb21PcmlnaW5TZWxlY3Rpb25zKFxuICAgICAgd2lkZ2V0SWQsIFxuICAgICAgW2RhdGFdLCBcbiAgICAgIG91dHB1dERTIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2UsXG4gICAgICB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0LFxuICAgICAgZ3JhcGhpY3NMYXllclxuICAgIClcbiAgICBcbiAgICAvLyBVcGRhdGUgb3V0cHV0RFMgc2VsZWN0aW9uXG4gICAgY29uc3Qgc2VsZWN0ZWREYXRhcyA9IG91dHB1dERTLmdldFNlbGVjdGVkUmVjb3JkcygpID8/IFtdXG4gICAgY29uc3QgdXBkYXRlZFNlbGVjdGVkRGF0YXMgPSBzZWxlY3RlZERhdGFzLmZpbHRlcihyZWNvcmQgPT4gcmVjb3JkLmdldElkKCkgIT09IGRhdGFJZClcbiAgICBjb25zdCByZWNvcmRJZHMgPSB1cGRhdGVkU2VsZWN0ZWREYXRhcy5tYXAocmVjb3JkID0+IHJlY29yZC5nZXRJZCgpKVxuICAgIFxuICAgIC8vIFVwZGF0ZSBvdXRwdXREUyBzZWxlY3Rpb25cbiAgICBpZiAodHlwZW9mIG91dHB1dERTLnNlbGVjdFJlY29yZHNCeUlkcyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgb3V0cHV0RFMuc2VsZWN0UmVjb3Jkc0J5SWRzKHJlY29yZElkcywgdXBkYXRlZFNlbGVjdGVkRGF0YXMgYXMgRmVhdHVyZURhdGFSZWNvcmRbXSlcbiAgICB9XG4gICAgXG4gICAgLy8gSU1QT1JUQU5UOiBQdWJsaXNoIGN1c3RvbSBldmVudCBzbyB3aWRnZXQgY2FuIHVwZGF0ZSBsYXN0U2VsZWN0aW9uIHN0YXRlXG4gICAgLy8gVGhpcyBlbnN1cmVzIHJlc3RvcmF0aW9uIHJlc3RvcmVzIHRoZSBjb3JyZWN0ICh1cGRhdGVkKSBjb3VudFxuICAgIGNvbnN0IG9yaWdpbkRTID0gKG91dHB1dERTIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2UpLmdldE9yaWdpbkRhdGFTb3VyY2VzKCk/LlswXSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gICAgY29uc3QgZGF0YVNvdXJjZUlkID0gb3JpZ2luRFM/LmlkXG4gICAgY29uc3Qgc2VsZWN0aW9uRXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoJ3F1ZXJ5c2ltcGxlLXNlbGVjdGlvbi1jaGFuZ2VkJywge1xuICAgICAgZGV0YWlsOiB7XG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICByZWNvcmRJZHMsIC8vIFVwZGF0ZWQgcmVjb3JkIElEcyAod2l0aCByZW1vdmVkIHJlY29yZCBleGNsdWRlZClcbiAgICAgICAgZGF0YVNvdXJjZUlkLFxuICAgICAgICBvdXRwdXREc0lkOiBvdXRwdXREUy5pZCxcbiAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZFxuICAgICAgfSxcbiAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICBjYW5jZWxhYmxlOiB0cnVlXG4gICAgfSlcbiAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChzZWxlY3Rpb25FdmVudClcbiAgICBcbiAgICAvLyBJZiBpbiBhY2N1bXVsYXRpb24gbW9kZSwgYWxzbyByZW1vdmUgZnJvbSBhY2N1bXVsYXRlZCByZWNvcmRzXG4gICAgY29uc3QgaXNBY2N1bXVsYXRpb25Nb2RlID0gcmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb24gfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvblxuICAgIGlmIChpc0FjY3VtdWxhdGlvbk1vZGUgJiYgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UgJiYgYWNjdW11bGF0ZWRSZWNvcmRzICYmIGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCByZW1haW5pbmdSZWNvcmRzID0gcmVtb3ZlUmVzdWx0c0Zyb21BY2N1bXVsYXRlZChcbiAgICAgICAgb3V0cHV0RFMgYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSxcbiAgICAgICAgW2RhdGFdLFxuICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNcbiAgICAgIClcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAneC1idXR0b24tcmVtb3ZlZC1mcm9tLWFjY3VtdWxhdGVkJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIHJlbW92ZWRSZWNvcmRJZDogZGF0YUlkLFxuICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudEJlZm9yZTogYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgcmVtYWluaW5nUmVjb3Jkc0NvdW50OiByZW1haW5pbmdSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgd2FzUmVtb3ZlZDogcmVtYWluaW5nUmVjb3Jkcy5sZW5ndGggPCBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoXG4gICAgICB9KVxuICAgICAgXG4gICAgICBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZShyZW1haW5pbmdSZWNvcmRzKVxuICAgIH1cbiAgICBcbiAgICAvLyBMb2cgYWZ0ZXIgcmVtb3ZlUmVjb3JkIGNvbXBsZXRlcyB0byBjaGVjayBpZiBleHBhbmRBbGwgY2hhbmdlZFxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAncmVtb3ZlUmVjb3JkLWNvbXBsZXRlZCcsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICByZW1vdmVkUmVjb3JkSWQ6IGRhdGFJZCxcbiAgICAgICAgZXhwYW5kQWxsQmVmb3JlOiBjdXJyZW50RXhwYW5kQWxsLFxuICAgICAgICBleHBhbmRBbGxBZnRlcjogZXhwYW5kQWxsLFxuICAgICAgICBleHBhbmRBbGxDaGFuZ2VkOiBjdXJyZW50RXhwYW5kQWxsICE9PSBleHBhbmRBbGwsXG4gICAgICAgIGV4cGFuZEJ5RGVmYXVsdFByb3A6IGV4cGFuZEFsbCwgLy8gV2hhdCB3aWxsIGJlIHBhc3NlZCB0byBTaW1wbGVMaXN0XG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICB9LCAwKVxuICB9LCBbb3V0cHV0RFMsIHdpZGdldElkLCByZXN1bHRDb3VudCwgb25OYXZCYWNrLCByZXN1bHRzTW9kZSwgYWNjdW11bGF0ZWRSZWNvcmRzLCBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZSwgcXVlcnlJdGVtLmNvbmZpZ0lkLCBleHBhbmRBbGxdKVxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9J3F1ZXJ5LXJlc3VsdCBoLTEwMCcgY3NzPXtyZXN1bHRTdHlsZX0gcm9sZT0nbGlzdGJveCcgYXJpYS1sYWJlbD17Z2V0STE4bk1lc3NhZ2UoJ3Jlc3VsdHMnKX0+XG4gICAgICA8RGF0YVNvdXJjZUNvbXBvbmVudCB1c2VEYXRhU291cmNlPXtyZXN1bHRVc2VPdXRwdXREYXRhU291cmNlfSBvbkRhdGFTb3VyY2VJbmZvQ2hhbmdlPXtoYW5kbGVEYXRhU291cmNlSW5mb0NoYW5nZX0gLz5cbiAgICAgIFxuICAgICAgey8qIEVycm9yIE1lc3NhZ2UgKi99XG4gICAgICB7c2VsZWN0aW9uRXJyb3IgJiYgKFxuICAgICAgICA8ZGl2IGNzcz17Y3NzYHBhZGRpbmc6IDAgMTZweDsgbWFyZ2luLXRvcDogOHB4O2B9PlxuICAgICAgICAgIDxFcnJvck1lc3NhZ2UgXG4gICAgICAgICAgICBlcnJvcj17c2VsZWN0aW9uRXJyb3J9IFxuICAgICAgICAgICAgb25EaXNtaXNzPXsoKSA9PiBzZXRTZWxlY3Rpb25FcnJvcihudWxsKX1cbiAgICAgICAgICAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG4gICAgICBcbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdxdWVyeS1yZXN1bHRfX2hlYWRlciBkLWZsZXggYWxpZ24taXRlbXMtY2VudGVyIG14LTQnPlxuICAgICAgICA8QnV0dG9uIGFyaWEtbGFiZWw9e2dldEkxOG5NZXNzYWdlKCdiYWNrJyl9IHJlZj17YmFja0J0blJlZn0gY2xhc3NOYW1lPSdwLTAgbXItMicgc2l6ZT0nc20nIHZhcmlhbnQ9J3RleHQnIGNvbG9yPSdpbmhlcml0JyBpY29uIG9uQ2xpY2s9eygpID0+IHsgb25OYXZCYWNrKCkgfX0+XG4gICAgICAgICAgPEFycm93TGVmdE91dGxpbmVkIGF1dG9GbGlwLz5cbiAgICAgICAgPC9CdXR0b24+XG4gICAgICAgIHtjdXJyZW50SXRlbS5yZXN1bHRzTGFiZWwgPz8gZ2V0STE4bk1lc3NhZ2UoJ3Jlc3VsdHMnKX1cbiAgICAgICAgeyhcbiAgICAgICAgICA8UmVhY3QuRnJhZ21lbnQ+XG4gICAgICAgICAgICA8VG9vbHRpcCB0aXRsZT17Z2V0STE4bk1lc3NhZ2UoJ2NsZWFyUmVzdWx0Jyl9IHBsYWNlbWVudD0nYm90dG9tJz5cbiAgICAgICAgICAgICAgPEJ1dHRvbiBjbGFzc05hbWU9J21sLWF1dG8nIGljb24gc2l6ZT0nc20nIHZhcmlhbnQ9J3RleHQnIGNvbG9yPSdpbmhlcml0JyBvbkNsaWNrPXtjbGVhclJlc3VsdHN9IGFyaWEtbGFiZWw9e2dldEkxOG5NZXNzYWdlKCdjbGVhclJlc3VsdCcpfT5cbiAgICAgICAgICAgICAgICA8SWNvbiBpY29uPXtpY29uTWFwLnRvb2xEZWxldGV9IC8+XG4gICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgPC9Ub29sdGlwPlxuICAgICAgICAgICAgey8qIERhdGEgYWN0aW9ucyBmaWx0ZXJlZCB2aWEgbWFuaWZlc3QuanNvbiBleGNsdWRlRGF0YUFjdGlvbnMgLSBTaG93IG9uIE1hcCwgU2VsZWN0IExvYWRlZCwgYW5kIENsZWFyIFNlbGVjdGlvbiBhcmUgZXhjbHVkZWQuXG4gICAgICAgICAgICAgICAgQ3VzdG9tIFwiQWRkIHRvIE1hcFwiIGFjdGlvbiBpcyBwcm92aWRlZCB2aWEgZXh0cmFBY3Rpb25zIGFuZCB1c2VzIFF1ZXJ5U2ltcGxlJ3Mgc2VsZWN0aW9uIHByb2Nlc3MuICovfVxuICAgICAgICAgICAge2VuYWJsZURhdGFBY3Rpb24gJiYgb3V0cHV0RFMgJiYgKFxuICAgICAgICAgICAgICA8UmVhY3QuRnJhZ21lbnQ+XG4gICAgICAgICAgICAgICAgPGRpdiBjc3M9e2Nzc2B3aWR0aDogMXB4OyBoZWlnaHQ6IDE2cHg7IGJhY2tncm91bmQtY29sb3I6IHZhcigtLXN5cy1jb2xvci1kaXZpZGVyLWlucHV0KTtgfT48L2Rpdj5cbiAgICAgICAgICAgICAgICA8RGF0YUFjdGlvbkxpc3RcbiAgICAgICAgICAgICAgICAgIHdpZGdldElkPXt3aWRnZXRJZH1cbiAgICAgICAgICAgICAgICAgIGRhdGFTZXRzPXthY3Rpb25EYXRhU2V0c31cbiAgICAgICAgICAgICAgICAgIGxpc3RTdHlsZT17RGF0YUFjdGlvbkxpc3RTdHlsZS5Ecm9wZG93bn1cbiAgICAgICAgICAgICAgICAgIGJ1dHRvblNpemU9J3NtJ1xuICAgICAgICAgICAgICAgICAgYnV0dG9uVHlwZT0ndGVydGlhcnknXG4gICAgICAgICAgICAgICAgICBleHRyYUFjdGlvbnM9e2V4dHJhQWN0aW9uc31cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8L1JlYWN0LkZyYWdtZW50PlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L1JlYWN0LkZyYWdtZW50PlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT0ncXVlcnktcmVzdWx0LWNvbnRhaW5lciBtdC0xJz5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J3F1ZXJ5LXJlc3VsdC1pbmZvIG1iLTIgcHgtNCBkLWZsZXggYWxpZ24taXRlbXMtY2VudGVyIGp1c3RpZnktY29udGVudC1iZXR3ZWVuJyByb2xlPSdhbGVydCcgYXJpYS1saXZlPSdwb2xpdGUnPlxuICAgICAgICAgIDxzcGFuPntnZXRUaXBNZXNzYWdlKCl9PC9zcGFuPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdkLWZsZXggYWxpZ24taXRlbXMtY2VudGVyJz5cbiAgICAgICAgICAgIDxUb29sdGlwIHRpdGxlPXtleHBhbmRBbGwgPyBnZXRJMThuTWVzc2FnZSgnY29sbGFwc2VBbGwnKSA6IGdldEkxOG5NZXNzYWdlKCdleHBhbmRBbGwnKX0gcGxhY2VtZW50PSd0b3AnPlxuICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgc2l6ZT0nc20nXG4gICAgICAgICAgICAgICAgdHlwZT0ndGVydGlhcnknXG4gICAgICAgICAgICAgICAgaWNvblxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RvZ2dsZUV4cGFuZEFsbH1cbiAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPXtleHBhbmRBbGwgPyBnZXRJMThuTWVzc2FnZSgnY29sbGFwc2VBbGwnKSA6IGdldEkxOG5NZXNzYWdlKCdleHBhbmRBbGwnKX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIHtleHBhbmRBbGwgPyA8Q29sbGFwc2VBbGxPdXRsaW5lZCAvPiA6IDxFeHBhbmRBbGxPdXRsaW5lZCAvPn1cbiAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICA8L1Rvb2x0aXA+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICB7LyogRk9SQ0VEOiBBbHdheXMgU2ltcGxlTGlzdCAtIExhenlMb2FkIGFuZCBNdWx0aVBhZ2UgcmVtb3ZlZCAqL31cbiAgICAgICAge3Jlc3VsdENvdW50ID4gMCAmJiAoXG4gICAgICAgICAgPFNpbXBsZUxpc3RcbiAgICAgICAgICAgIGtleT0nc2ltcGxlJ1xuICAgICAgICAgICAgd2lkZ2V0SWQ9e3dpZGdldElkfVxuICAgICAgICAgICAgcXVlcnlJdGVtPXtxdWVyeUl0ZW19XG4gICAgICAgICAgICBvdXRwdXREUz17b3V0cHV0RFMgYXMgYW55fVxuICAgICAgICAgICAgcmVjb3Jkcz17ZmlsdGVyZWRSZWNvcmRzRm9yTGlzdH1cbiAgICAgICAgICAgIGRpcmVjdGlvbj17ZGlyZWN0aW9ufVxuICAgICAgICAgICAgb25Fc2NhcGU9e2hhbmRsZUVzY2FwZX1cbiAgICAgICAgICAgIG9uU2VsZWN0Q2hhbmdlPXt0b2dnbGVTZWxlY3Rpb259XG4gICAgICAgICAgICBvblJlbW92ZT17cmVtb3ZlUmVjb3JkfVxuICAgICAgICAgICAgZXhwYW5kQnlEZWZhdWx0PXtleHBhbmRBbGx9XG4gICAgICAgICAgICBpdGVtRXhwYW5kU3RhdGVzPXtpdGVtRXhwYW5kU3RhdGVzfVxuICAgICAgICAgICAgcmVtb3ZlZFJlY29yZElkcz17cmVtb3ZlZFJlY29yZElkc31cbiAgICAgICAgICAgIG9uUmVuZGVyRG9uZT17aGFuZGxlUmVuZGVyRG9uZX1cbiAgICAgICAgICAvPlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIClcbn1cbiIsImltcG9ydCB7IFJlYWN0IH0gZnJvbSAnamltdS1jb3JlJ1xuXG5leHBvcnQgY29uc3QgUXVlcnlUYXNrQ29udGV4dCA9IFJlYWN0LmNyZWF0ZUNvbnRleHQ8UXVlcnlUYXNrQ29udGV4dFByb3BzPih7XG4gIHJlc2V0U3ltYm9sOiBudWxsXG59KVxuXG5leHBvcnQgaW50ZXJmYWNlIFF1ZXJ5VGFza0NvbnRleHRQcm9wcyB7XG4gIHJlc2V0U3ltYm9sPzogc3ltYm9sIC8vIHVzZWQgdG8gdHJpZ2dlciByZXNldCBvcGVyYXRpb25cbn1cblxuXG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7XG4gIFJlYWN0LFxuICBqc3gsXG4gIGNzcyxcbiAgY2xhc3NOYW1lcyxcbiAgdHlwZSBEYXRhU291cmNlLFxuICB0eXBlIEltbXV0YWJsZU9iamVjdCxcbiAgdHlwZSBJTVN0YXRlLFxuICB0eXBlIElNU3FsRXhwcmVzc2lvbixcbiAgdHlwZSBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLFxuICBSZWFjdFJlZHV4LFxuICBob29rcyxcbiAgRGF0YVNvdXJjZU1hbmFnZXIsXG4gIHR5cGUgU3FsUXVlcnlQYXJhbXMsXG4gIEltbXV0YWJsZVxufSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBCdXR0b24sIFRvb2x0aXAsIENoZWNrYm94IH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB7IGxvYWRBcmNHSVNKU0FQSU1vZHVsZXMgfSBmcm9tICdqaW11LWFyY2dpcydcbmltcG9ydCB7IFNxbEV4cHJlc3Npb25SdW50aW1lLCBnZXRTaG93bkNsYXVzZU51bWJlckJ5RXhwcmVzc2lvbiB9IGZyb20gJ2ppbXUtdWkvYmFzaWMvc3FsLWV4cHJlc3Npb24tcnVudGltZSdcbmltcG9ydCB7IHR5cGUgUXVlcnlJdGVtVHlwZSwgdHlwZSBTcGF0aWFsRmlsdGVyT2JqLCBTcGF0aWFsUmVsYXRpb24sIHR5cGUgVW5pdFR5cGUgfSBmcm9tICcuLi9jb25maWcnXG5pbXBvcnQgeyBERUZBVUxUX1FVRVJZX0lURU0gfSBmcm9tICcuLi9kZWZhdWx0LXF1ZXJ5LWl0ZW0nXG5pbXBvcnQgeyBzYW5pdGl6ZVNxbEV4cHJlc3Npb24sIGlzUXVlcnlJbnB1dFZhbGlkIH0gZnJvbSAnLi9xdWVyeS11dGlscydcbmltcG9ydCBkZWZhdWx0TWVzc2FnZSBmcm9tICcuL3RyYW5zbGF0aW9ucy9kZWZhdWx0J1xuaW1wb3J0IHsgUXVlcnlUYXNrU3BhdGlhbEZvcm0gfSBmcm9tICcuL3F1ZXJ5LXRhc2stc3BhdGlhbC1mb3JtJ1xuaW1wb3J0IHsgdXNlQXV0b0hlaWdodCB9IGZyb20gJy4vdXNlQXV0b0hlaWdodCdcbmltcG9ydCB7IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIgfSBmcm9tICd3aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbidcblxuY29uc3QgZGVidWdMb2dnZXIgPSBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyKClcblxuaW1wb3J0IHsgUXVlcnlUYXNrQ29udGV4dCB9IGZyb20gJy4vcXVlcnktdGFzay1jb250ZXh0J1xuaW1wb3J0IHsgSW5mb091dGxpbmVkIH0gZnJvbSAnamltdS1pY29ucy9vdXRsaW5lZC9zdWdnZXN0ZWQvaW5mbydcbmltcG9ydCB7IGNsZWFyU2VsZWN0aW9uSW5EYXRhU291cmNlcyB9IGZyb20gJy4vc2VsZWN0aW9uLXV0aWxzJ1xuXG4vKipcbiAqIEV2ZW50LURyaXZlbiBIYXNoIFBhcmFtZXRlciBFeGVjdXRpb24gUGF0dGVyblxuICogXG4gKiBDUklUSUNBTDogVGhpcyBpcyB0aGUgT05MWSBleGVjdXRpb24gcGF0aCBmb3IgaGFzaC10cmlnZ2VyZWQgcXVlcmllcy5cbiAqIFxuICogRmxvdzpcbiAqIDEuIEhhc2ggdmFsdWUgc2V0IGluIHN0YXRlIGFzIFNUUklORyAoZS5nLiwgXCI1NTY4OTAwMDAwXCIpXG4gKiAyLiBET00gbWFuaXB1bGF0aW9uIHRyaWdnZXJzIFNxbEV4cHJlc3Npb25SdW50aW1lIHRvIHByb2Nlc3MgdGhlIHZhbHVlXG4gKiAzLiBTcWxFeHByZXNzaW9uUnVudGltZSBjb252ZXJ0cyBzdHJpbmcg4oaSIGFycmF5IGZvcm1hdCBbe3ZhbHVlOiBcIi4uLlwiLCBsYWJlbDogXCIuLi5cIn1dXG4gKiA0LiBoYW5kbGVTcWxFeHByT2JqQ2hhbmdlIGRldGVjdHMgY29udmVyc2lvbiDihpIgZGlzcGF0Y2hlcyBRVUVSWVNJTVBMRV9IQVNIX1ZBTFVFX0NPTlZFUlRFRF9FVkVOVFxuICogNS4gRXZlbnQgbGlzdGVuZXIgaW4gcXVlcnktdGFzay50c3ggZXhlY3V0ZXMgcXVlcnkgKE9SIGhhbmRsZVNxbEV4cHJPYmpDaGFuZ2UgY2FsbHMgYXBwbHlRdWVyeSBkaXJlY3RseSlcbiAqIFxuICogV0hZIFRISVMgUEFUVEVSTiBFWElTVFM6XG4gKiAtIFNxbEV4cHJlc3Npb25SdW50aW1lIE9OTFkgZmlyZXMgb25DaGFuZ2Ugd2hlbiB2YWx1ZSBpcyBjb252ZXJ0ZWQgdG8gYXJyYXkgZm9ybWF0XG4gKiAtIFF1ZXJpZXMgUkVRVUlSRSBhcnJheSBmb3JtYXQgLSBleGVjdXRpbmcgd2l0aCBzdHJpbmcgZm9ybWF0IHJldHVybnMgdW5maWx0ZXJlZCByZXN1bHRzICgxMDAwIHJlY29yZHMpXG4gKiAtIFdlIE1VU1Qgd2FpdCBmb3IgY29udmVyc2lvbiBiZWZvcmUgZXhlY3V0aW5nIHF1ZXJpZXNcbiAqIFxuICogQU5USS1QQVRURVJOIFRPIEFWT0lEOlxuICogLSBETyBOT1QgYWRkIHVzZUVmZmVjdCBob29rcyB0aGF0IGV4ZWN1dGUgcXVlcmllcyBiYXNlZCBvbiBzdHJpbmcgdmFsdWVzXG4gKiAtIERPIE5PVCBleGVjdXRlIHF1ZXJpZXMgYmVmb3JlIFFVRVJZU0lNUExFX0hBU0hfVkFMVUVfQ09OVkVSVEVEX0VWRU5UIGlzIGRpc3BhdGNoZWRcbiAqIC0gRE8gTk9UIGNpcmN1bXZlbnQgdGhlIGV2ZW50LWRyaXZlbiBmbG93IHdpdGggZWFybHkgZXhlY3V0aW9uIGNoZWNrc1xuICogXG4gKiBJZiB5b3UgbmVlZCB0byBleGVjdXRlIGEgcXVlcnksIHdhaXQgZm9yIHRoZSBjb252ZXJzaW9uIGV2ZW50IG9yIGNhbGwgYXBwbHlRdWVyeSgpXG4gKiBBRlRFUiBoYW5kbGVTcWxFeHByT2JqQ2hhbmdlIGhhcyBkZXRlY3RlZCB0aGUgY29udmVyc2lvbiBhbmQgZGlzcGF0Y2hlZCB0aGUgZXZlbnQuXG4gKi9cbmNvbnN0IFFVRVJZU0lNUExFX0hBU0hfVkFMVUVfQ09OVkVSVEVEX0VWRU5UID0gJ3F1ZXJ5c2ltcGxlLWhhc2gtdmFsdWUtY29udmVydGVkJ1xuXG5leHBvcnQgaW50ZXJmYWNlIFF1ZXJ5VGFza0l0ZW1Qcm9wcyB7XG4gIHdpZGdldElkOiBzdHJpbmdcbiAgY29uZmlnSWQ6IHN0cmluZ1xuICBzcGF0aWFsRmlsdGVyRW5hYmxlZDogYm9vbGVhblxuICBkYXRhc291cmNlUmVhZHk6IGJvb2xlYW5cbiAgb3V0cHV0RFM/OiBEYXRhU291cmNlXG4gIG9uRm9ybVN1Ym1pdDogKHNxbEV4cHJPYmo6IElNU3FsRXhwcmVzc2lvbiwgc3BhdGlhbEZpbHRlcjogU3BhdGlhbEZpbHRlck9iaiwgem9vbVRvU2VsZWN0ZWQ/OiBib29sZWFuKSA9PiB2b2lkXG4gIGRhdGFBY3Rpb25GaWx0ZXI/OiBTcWxRdWVyeVBhcmFtc1xuICBpbml0aWFsSW5wdXRWYWx1ZT86IHN0cmluZ1xuICBvbkhhc2hQYXJhbWV0ZXJVc2VkPzogKHNob3J0SWQ6IHN0cmluZykgPT4gdm9pZFxuICBxdWVyeUl0ZW1TaG9ydElkPzogc3RyaW5nXG4gIGFjdGl2ZVRhYj86ICdxdWVyeScgfCAncmVzdWx0cydcbiAgb25UYWJDaGFuZ2U/OiAodGFiOiAncXVlcnknIHwgJ3Jlc3VsdHMnKSA9PiB2b2lkXG59XG5cbmNvbnN0IGdldEZvcm1TdHlsZSA9IChpc0F1dG9IZWlnaHQ6IGJvb2xlYW4pID0+IHtcbiAgcmV0dXJuIGNzc2BcbiAgICBmbGV4OiAxIDEgYXV0bztcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgbWluLWhlaWdodDogMDtcbiAgICAuZm9ybS10aXRsZSB7XG4gICAgICBjb2xvcjogdmFyKC0tc3lzLWNvbG9yLXN1cmZhY2UtcGFwZXItdGV4dCk7XG4gICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgZm9udC1zaXplOiAwLjgxMjVyZW07XG4gICAgICBsaW5lLWhlaWdodDogMS41O1xuICAgICAgbWFyZ2luLXRvcDogMCAhaW1wb3J0YW50O1xuICAgIH1cbiAgICAucXVlcnktZm9ybV9fY29udGVudCB7XG4gICAgICBmbGV4OiAxIDEgJHtpc0F1dG9IZWlnaHQgPyAnYXV0bycgOiAnYXV0byd9O1xuICAgICAgbWF4LWhlaWdodDogJHtpc0F1dG9IZWlnaHQgPyAnNjEuOHZoJyA6ICdub25lJ307XG4gICAgICBvdmVyZmxvdzogYXV0bztcbiAgICAgIHBhZGRpbmctYm90dG9tOiAwO1xuICAgIH1cbiAgICAucXVlcnktZm9ybV9fYWN0aW9ucyB7XG4gICAgICBmbGV4LXNocmluazogMDtcbiAgICAgIG1hcmdpbi10b3A6IDA7XG4gICAgICBwYWRkaW5nLXRvcDogNHB4O1xuICAgIH1cbiAgYFxufVxuXG5leHBvcnQgZnVuY3Rpb24gUXVlcnlUYXNrRm9ybSAocHJvcHM6IFF1ZXJ5VGFza0l0ZW1Qcm9wcykge1xuICBjb25zdCB7IHdpZGdldElkLCBjb25maWdJZCwgb3V0cHV0RFMsIHNwYXRpYWxGaWx0ZXJFbmFibGVkLCBkYXRhc291cmNlUmVhZHksIG9uRm9ybVN1Ym1pdCwgZGF0YUFjdGlvbkZpbHRlciwgaW5pdGlhbElucHV0VmFsdWUsIG9uSGFzaFBhcmFtZXRlclVzZWQsIHF1ZXJ5SXRlbVNob3J0SWQsIGFjdGl2ZVRhYiwgb25UYWJDaGFuZ2UgfSA9IHByb3BzXG4gIGNvbnN0IHByZURhdGFBY3Rpb25GaWx0ZXIgPSBob29rcy51c2VQcmV2aW91cyhkYXRhQWN0aW9uRmlsdGVyKVxuICBjb25zdCBxdWVyeUl0ZW06IEltbXV0YWJsZU9iamVjdDxRdWVyeUl0ZW1UeXBlPiA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XG4gICAgY29uc3Qgd2lkZ2V0SnNvbiA9IHN0YXRlLmFwcENvbmZpZy53aWRnZXRzW3dpZGdldElkXVxuICAgIHJldHVybiB3aWRnZXRKc29uLmNvbmZpZy5xdWVyeUl0ZW1zLmZpbmQoaXRlbSA9PiBpdGVtLmNvbmZpZ0lkID09PSBjb25maWdJZClcbiAgfSlcbiAgY29uc3QgY3VycmVudEl0ZW0gPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1FVRVJZX0lURU0sIHF1ZXJ5SXRlbSlcbiAgY29uc3QgZ2V0STE4bk1lc3NhZ2UgPSBob29rcy51c2VUcmFuc2xhdGlvbihkZWZhdWx0TWVzc2FnZSlcbiAgY29uc3QgW3Jlc2V0U3ltYm9sLCBzZXRSZXNldFN5bWJvbF0gPSBSZWFjdC51c2VTdGF0ZTxzeW1ib2w+KG51bGwpXG4gIC8vIFJ1bnRpbWUgem9vbSBwcmVmZXJlbmNlIC0gaW5pdGlhbGl6ZWQgd2l0aCBjb25maWcgdmFsdWUsIGNhbiBiZSBvdmVycmlkZGVuIGJ5IHVzZXJcbiAgY29uc3QgW3J1bnRpbWVab29tVG9TZWxlY3RlZCwgc2V0UnVudGltZVpvb21Ub1NlbGVjdGVkXSA9IFJlYWN0LnVzZVN0YXRlPGJvb2xlYW4+KFxuICAgIHF1ZXJ5SXRlbT8uem9vbVRvU2VsZWN0ZWQgPz8gdHJ1ZVxuICApXG5cbiAgLy8gU3luYyBydW50aW1lIHpvb20gcHJlZmVyZW5jZSB3aGVuIHF1ZXJ5IGl0ZW0gY2hhbmdlcyAoZS5nLiwgc3dpdGNoaW5nIGJldHdlZW4gcXVlcmllcylcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBzZXRSdW50aW1lWm9vbVRvU2VsZWN0ZWQocXVlcnlJdGVtPy56b29tVG9TZWxlY3RlZCA/PyB0cnVlKVxuICB9LCBbcXVlcnlJdGVtPy56b29tVG9TZWxlY3RlZCwgcXVlcnlJdGVtPy5jb25maWdJZF0pXG5cbiAgLy8gY29uc3QgW2RhdGFTb3VyY2UsIHNldERhdGFTb3VyY2VdID0gUmVhY3QudXNlU3RhdGU8RGF0YVNvdXJjZT4obnVsbClcbiAgY29uc3Qge1xuICAgIHVzZUF0dHJpYnV0ZUZpbHRlcixcbiAgICB1c2VTcGF0aWFsRmlsdGVyLFxuICAgIHNwYXRpYWxGaWx0ZXJUeXBlcyxcbiAgICBzcWxFeHByT2JqLFxuICAgIHNwYXRpYWxNYXBXaWRnZXRJZHMsXG4gICAgc3BhdGlhbEludGVyYWN0aXZlQ3JlYXRlVG9vbFR5cGVzLFxuICAgIHNwYXRpYWxSZWxhdGlvblVzZURhdGFTb3VyY2VzLFxuICAgIHNwYXRpYWxJbmNsdWRlUnVudGltZURhdGEsXG4gICAgc3BhdGlhbFJlbGF0aW9ucyxcbiAgICBzcGF0aWFsUmVsYXRpb25FbmFibGVCdWZmZXIsXG4gICAgc3BhdGlhbFJlbGF0aW9uQnVmZmVyRGlzdGFuY2UsXG4gICAgc3BhdGlhbFJlbGF0aW9uQnVmZmVyVW5pdCxcbiAgICBzcGF0aWFsSW50ZXJhY3RpdmVFbmFibGVCdWZmZXIsXG4gICAgc3BhdGlhbEludGVyYWN0aXZlQnVmZmVyRGlzdGFuY2UsXG4gICAgc3BhdGlhbEludGVyYWN0aXZlQnVmZmVyVW5pdCxcbiAgICBhdHRyaWJ1dGVGaWx0ZXJMYWJlbCA9IGdldEkxOG5NZXNzYWdlKCdhdHRyaWJ1dGVGaWx0ZXInKSxcbiAgICBzcGF0aWFsRmlsdGVyTGFiZWwgPSBnZXRJMThuTWVzc2FnZSgnc3BhdGlhbEZpbHRlcicpLFxuICAgIGF0dHJpYnV0ZUZpbHRlckRlc2MsXG4gICAgc3BhdGlhbEZpbHRlckRlc2NcbiAgfSA9IGN1cnJlbnRJdGVtXG4gIGNvbnN0IFthdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqLCBzZXRBdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqXSA9IFJlYWN0LnVzZVN0YXRlPElNU3FsRXhwcmVzc2lvbj4oc3FsRXhwck9iailcbiAgLy8gUmVmIHRvIHRyYWNrIGN1cnJlbnQgU1FMIGV4cHJlc3Npb24gZm9yIHN5bmNocm9ub3VzIGFjY2VzcyBpbiBhcHBseVF1ZXJ5XG4gIC8vIFRoaXMgZW5zdXJlcyBoYXNoIHZhbHVlcyBhcmUgaW1tZWRpYXRlbHkgYXZhaWxhYmxlIHdoZW4gQXBwbHkgaXMgY2xpY2tlZFxuICBjb25zdCBhdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqUmVmID0gUmVhY3QudXNlUmVmPElNU3FsRXhwcmVzc2lvbj4oc3FsRXhwck9iailcbiAgY29uc3Qgc3BhdGlhbEZpbHRlck9ialJlZiA9IFJlYWN0LnVzZVJlZjxTcGF0aWFsRmlsdGVyT2JqPihudWxsKVxuICBjb25zdCBzcGF0aWFsUmVsYXRpb25SZWYgPSBSZWFjdC51c2VSZWY8U3BhdGlhbFJlbGF0aW9uPihTcGF0aWFsUmVsYXRpb24uSW50ZXJzZWN0KVxuICBjb25zdCBidWZmZXJSZWYgPSBSZWFjdC51c2VSZWY8eyBkaXN0YW5jZTogbnVtYmVyLCB1bml0OiBVbml0VHlwZSB9PihudWxsKVxuICBjb25zdCBhcHBseUJ1dHRvblJlZiA9IFJlYWN0LnVzZVJlZjxIVE1MQnV0dG9uRWxlbWVudD4obnVsbClcbiAgY29uc3QgZm9ybUNvbnRlbnRSZWYgPSBSZWFjdC51c2VSZWY8SFRNTERpdkVsZW1lbnQ+KG51bGwpXG4gIGNvbnN0IGlzQXV0b0hlaWdodCA9IHVzZUF1dG9IZWlnaHQoKVxuICBjb25zdCBzaG93Q2xhdXNlTnVtYmVyID0gUmVhY3QudXNlUmVmKGdldFNob3duQ2xhdXNlTnVtYmVyQnlFeHByZXNzaW9uKHNxbEV4cHJPYmopKVxuICBjb25zdCBpbml0aWFsVmFsdWVTZXRSZWYgPSBSZWFjdC51c2VSZWY8c3RyaW5nIHwgbnVsbD4obnVsbCkgLy8gVHJhY2sgd2hpY2ggY29uZmlnSWQgd2UndmUgc2V0IHRoZSB2YWx1ZSBmb3JcbiAgY29uc3QgbGFzdFZhbHVlU2V0UmVmID0gUmVhY3QudXNlUmVmPHN0cmluZyB8IG51bGw+KG51bGwpIC8vIFRyYWNrIHRoZSBsYXN0IHZhbHVlIHRoYXQgd2FzIHNldFxuICBjb25zdCBoYXNoVHJpZ2dlcmVkUmVmID0gUmVhY3QudXNlUmVmPGJvb2xlYW4+KGZhbHNlKSAvLyBUcmFjayBpZiBxdWVyeSB3YXMgdHJpZ2dlcmVkIHZpYSBoYXNoIHBhcmFtZXRlclxuICBjb25zdCBwcmV2aW91c0NvbmZpZ0lkUmVmID0gUmVhY3QudXNlUmVmPHN0cmluZyB8IG51bGw+KG51bGwpIC8vIFRyYWNrIHByZXZpb3VzIGNvbmZpZ0lkIHRvIGRldGVjdCBxdWVyeSBzd2l0Y2hlc1xuICBjb25zdCBbaXNUeXBpbmdWYWxpZCwgc2V0SXNUeXBpbmdWYWxpZF0gPSBSZWFjdC51c2VTdGF0ZTxib29sZWFuPihmYWxzZSlcblxuICAvLyBNb25pdG9yIGZvY3VzIGFuZCBpbnB1dCBldmVudHMgd2l0aGluIHRoZSBxdWVyeSBmb3JtXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgaGFuZGxlRm9jdXMgPSAoZTogRm9jdXNFdmVudCkgPT4ge1xuICAgICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICAgIGlmICh0YXJnZXQudGFnTmFtZSA9PT0gJ0lOUFVUJykge1xuICAgICAgICBjb25zdCB2YWwgPSAodGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlXG4gICAgICAgIHNldElzVHlwaW5nVmFsaWQoaXNRdWVyeUlucHV0VmFsaWQodmFsKSlcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgICAgIGV2ZW50OiAnaW5wdXQtZm9jdXNlZCcsXG4gICAgICAgICAgY29uZmlnSWQsXG4gICAgICAgICAgdGFnTmFtZTogdGFyZ2V0LnRhZ05hbWUsXG4gICAgICAgICAgdHlwZTogKHRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS50eXBlLFxuICAgICAgICAgIHZhbHVlOiB2YWxcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBoYW5kbGVJbnB1dCA9IChlOiBFdmVudCkgPT4ge1xuICAgICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICAgIGlmICh0YXJnZXQudGFnTmFtZSA9PT0gJ0lOUFVUJykge1xuICAgICAgICBjb25zdCB2YWwgPSAodGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlXG4gICAgICAgIGNvbnN0IGlzVmFsaWQgPSBpc1F1ZXJ5SW5wdXRWYWxpZCh2YWwpXG4gICAgICAgIHNldElzVHlwaW5nVmFsaWQoaXNWYWxpZClcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgICAgIGV2ZW50OiAnaW5wdXQtdHlwaW5nJyxcbiAgICAgICAgICBjb25maWdJZCxcbiAgICAgICAgICB2YWx1ZTogdmFsLFxuICAgICAgICAgIGlzVHlwaW5nVmFsaWQ6IGlzVmFsaWRcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBoYW5kbGVGb2N1c091dCA9IChlOiBGb2N1c0V2ZW50KSA9PiB7XG4gICAgICAvLyBTbWFsbCBkZWxheSB0byBhbGxvdyBzdGF0ZSB0byBjYXRjaCB1cFxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHNldElzVHlwaW5nVmFsaWQoZmFsc2UpXG4gICAgICB9LCA1MClcbiAgICB9XG5cbiAgICBjb25zdCBjb250YWluZXIgPSBmb3JtQ29udGVudFJlZi5jdXJyZW50XG4gICAgaWYgKGNvbnRhaW5lcikge1xuICAgICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzaW4nLCBoYW5kbGVGb2N1cylcbiAgICAgIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGhhbmRsZUlucHV0KVxuICAgICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3Vzb3V0JywgaGFuZGxlRm9jdXNPdXQpXG4gICAgfVxuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGlmIChjb250YWluZXIpIHtcbiAgICAgICAgY29udGFpbmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2ZvY3VzaW4nLCBoYW5kbGVGb2N1cylcbiAgICAgICAgY29udGFpbmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2lucHV0JywgaGFuZGxlSW5wdXQpXG4gICAgICAgIGNvbnRhaW5lci5yZW1vdmVFdmVudExpc3RlbmVyKCdmb2N1c291dCcsIGhhbmRsZUZvY3VzT3V0KVxuICAgICAgfVxuICAgIH1cbiAgfSwgW2NvbmZpZ0lkXSlcblxuICAvLyBDaGVjayBpZiBhbnkgYXR0cmlidXRlIGZpbHRlciBpbnB1dCBpcyB2YWxpZFxuICBjb25zdCBpc0lucHV0VmFsaWQgPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICAvLyBJZiB0aGUgdXNlciBpcyBjdXJyZW50bHkgdHlwaW5nIHNvbWV0aGluZyB2YWxpZCwgdGhlIGZvcm0gaXMgdmFsaWRcbiAgICBpZiAoaXNUeXBpbmdWYWxpZCkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgICBldmVudDogJ3ZhbGlkYXRpb24tY2hlY2staW5zdGFudCcsXG4gICAgICAgIGNvbmZpZ0lkLFxuICAgICAgICBpc1ZhbGlkOiB0cnVlXG4gICAgICB9KVxuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG5cbiAgICBpZiAoIWF0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmo/LnBhcnRzIHx8IGF0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmoucGFydHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gdHJ1ZSAvLyBJZiBubyBwYXJ0cywgd2UgYXNzdW1lIGl0J3MgdmFsaWQgKGUuZy4gc3BhdGlhbC1vbmx5IHF1ZXJ5KVxuICAgIH1cbiAgICBcbiAgICAvLyBDaGVjayBpZiBhdCBsZWFzdCBvbmUgU0lOR0xFIHBhcnQgaGFzIGEgdmFsaWQgdmFsdWVcbiAgICBjb25zdCBoYXNWYWxpZFZhbHVlID0gYXR0cmlidXRlRmlsdGVyU3FsRXhwck9iai5wYXJ0cy5zb21lKHBhcnQgPT4ge1xuICAgICAgLy8gQWNjZXNzaW5nIEltbXV0YWJsZSBzdHJ1Y3R1cmVzIHJlcXVpcmVzIGNhcmUuIElmIGRvdCBub3RhdGlvbiBmYWlscywgXG4gICAgICAvLyB0aGUgZnJhbWV3b3JrIGNvbXBvbmVudHMgbWlnaHQgYmUgdXNpbmcgLmdldCgpIG9yIG90aGVyIG1ldGhvZHMuXG4gICAgICAvLyBXZSdsbCBiZSBpbmNsdXNpdmUgaGVyZTogaWYgaXQncyBub3QgYSBTSU5HTEUgcGFydCwgd2UgdHJlYXQgaXQgYXMgdmFsaWQuXG4gICAgICBpZiAocGFydC50eXBlID09PSAnU0lOR0xFJykge1xuICAgICAgICBjb25zdCB2YWwgPSBwYXJ0LnZhbHVlT3B0aW9ucz8udmFsdWVcbiAgICAgICAgY29uc3Qgc291cmNlID0gcGFydC52YWx1ZU9wdGlvbnM/LnNvdXJjZVxuICAgICAgICBcbiAgICAgICAgLy8gSWYgdGhlIHNvdXJjZSBpcyBOT1QgJ1VTRVJfSU5QVVQnLCBpdCdzIGxpa2VseSBhIGxpc3QvZHJvcGRvd24gKFVOSVFVRV9WQUxVRVMsIEZJRUxEX1ZBTFVFKVxuICAgICAgICAvLyBXZSBhbHNvIGNoZWNrIGZvciBwYXJ0LmRhdGFTb3VyY2Ugd2hpY2ggaXMgY29tbW9uIGZvciBsaXN0LWJhc2VkIHNlbGVjdGlvbnNcbiAgICAgICAgLy8gV2UgdHJlYXQgdGhlc2UgYXMgXCJMaXN0XCIgdHlwZXMgd2hpY2ggYXJlIGV4ZW1wdGVkIGZyb20gdGhlIGVtcHR5LXN0cmluZyBydWxlLlxuICAgICAgICBjb25zdCBpc0xpc3QgPSAoc291cmNlICYmIHNvdXJjZSAhPT0gJ1VTRVJfSU5QVVQnKSB8fCAocGFydC5kYXRhU291cmNlPy5zb3VyY2UpXG4gICAgICAgIFxuICAgICAgICBjb25zdCBpc1ZhbGlkID0gaXNRdWVyeUlucHV0VmFsaWQodmFsLCAhIWlzTGlzdClcbiAgICAgICAgXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgICAgICBldmVudDogJ3ZhbGlkYXRpb24tY2hlY2stZGV0YWlsJyxcbiAgICAgICAgICBjb25maWdJZCxcbiAgICAgICAgICBwYXJ0VHlwZTogcGFydC50eXBlLFxuICAgICAgICAgIHNvdXJjZSxcbiAgICAgICAgICBoYXNEYXRhU291cmNlOiAhIXBhcnQuZGF0YVNvdXJjZSxcbiAgICAgICAgICBkYXRhU291cmNlU291cmNlOiBwYXJ0LmRhdGFTb3VyY2U/LnNvdXJjZSxcbiAgICAgICAgICBpc0xpc3Q6ICEhaXNMaXN0LFxuICAgICAgICAgIHZhbHVlOiB2YWwsXG4gICAgICAgICAgaXNWYWxpZFxuICAgICAgICB9KVxuICAgICAgICBcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgICAgIGV2ZW50OiAndmFsaWRhdGlvbi1jaGVjaycsXG4gICAgICAgICAgY29uZmlnSWQsXG4gICAgICAgICAgcGFydFR5cGU6IHBhcnQudHlwZSxcbiAgICAgICAgICBzb3VyY2UsXG4gICAgICAgICAgaXNMaXN0LFxuICAgICAgICAgIHZhbHVlOiB2YWwsXG4gICAgICAgICAgdmFsdWVUeXBlOiB0eXBlb2YgdmFsLFxuICAgICAgICAgIGlzVmFsaWRcbiAgICAgICAgfSlcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBpc1ZhbGlkXG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZSBcbiAgICB9KVxuXG4gICAgcmV0dXJuIGhhc1ZhbGlkVmFsdWVcbiAgfSwgW2F0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmosIGNvbmZpZ0lkLCBpc1R5cGluZ1ZhbGlkXSlcblxuICBjb25zdCBvcmlnaW5EUyA9IG91dHB1dERTPy5nZXRPcmlnaW5EYXRhU291cmNlcygpWzBdXG5cbiAgLy8gVHJhY2sgY29uZmlnSWQgY2hhbmdlcyAocXVlcnkgc3dpdGNoZXMpXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgZXZlbnQ6ICdjb25maWdJZC1jaGFuZ2VkJyxcbiAgICAgIGNvbmZpZ0lkLFxuICAgICAgcHJldmlvdXNDb25maWdJZDogaW5pdGlhbFZhbHVlU2V0UmVmLmN1cnJlbnQsXG4gICAgICBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gIH0sIFtjb25maWdJZCwgaW5pdGlhbElucHV0VmFsdWUsIGRhdGFzb3VyY2VSZWFkeSwgb3V0cHV0RFMsIHdpZGdldElkLCBoYXNoVHJpZ2dlcmVkUmVmXSlcblxuICAvKipcbiAgICogU2V0cyB0aGUgaW5wdXQgdmFsdWUgZnJvbSBVUkwgaGFzaCBwYXJhbWV0ZXJzIHdoZW46XG4gICAqIDEuIERhdGFzb3VyY2UgaXMgcmVhZHlcbiAgICogMi4gV2UgaGF2ZSBhbiBpbml0aWFsSW5wdXRWYWx1ZSBmcm9tIFVSTCBoYXNoXG4gICAqIDMuIFdlIGhhdmVuJ3QgYWxyZWFkeSBzZXQgaXQgZm9yIHRoaXMgY29uZmlnSWQsIE9SIHRoZSB2YWx1ZSBoYXMgY2hhbmdlZFxuICAgKiBcbiAgICogVXNlcyBib3RoIFJlYWN0IHN0YXRlIHVwZGF0ZXMgYW5kIERPTSBtYW5pcHVsYXRpb24gdG8gZW5zdXJlIHRoZSB2YWx1ZVxuICAgKiBpcyBwcm9wZXJseSBzZXQgaW4gU3FsRXhwcmVzc2lvblJ1bnRpbWUncyBpbnRlcm5hbCBzdGF0ZS5cbiAgICovXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgZXZlbnQ6ICdpbml0aWFsSW5wdXRWYWx1ZS1wcm9wLXJlY2VpdmVkJyxcbiAgICAgIGNvbmZpZ0lkLFxuICAgICAgaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICBkYXRhc291cmNlUmVhZHksXG4gICAgICBoYXNTcWxFeHByT2JqOiAhIXNxbEV4cHJPYmosXG4gICAgICBzcWxFeHByT2JqUGFydHNMZW5ndGg6IHNxbEV4cHJPYmo/LnBhcnRzPy5sZW5ndGgsXG4gICAgICBpbml0aWFsVmFsdWVTZXRSZWY6IGluaXRpYWxWYWx1ZVNldFJlZi5jdXJyZW50LFxuICAgICAgd2lsbFByb2Nlc3M6IGRhdGFzb3VyY2VSZWFkeSAmJiBpbml0aWFsSW5wdXRWYWx1ZSAmJiBzcWxFeHByT2JqPy5wYXJ0cz8ubGVuZ3RoID4gMCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgLy8gUmVzZXQgZmxhZyBpZiBjb25maWdJZCBjaGFuZ2VkIChzd2l0Y2hlZCB0byBkaWZmZXJlbnQgcXVlcnkpXG4gICAgaWYgKGluaXRpYWxWYWx1ZVNldFJlZi5jdXJyZW50ICE9PSBudWxsICYmIGluaXRpYWxWYWx1ZVNldFJlZi5jdXJyZW50ICE9PSBjb25maWdJZCkge1xuICAgICAgaW5pdGlhbFZhbHVlU2V0UmVmLmN1cnJlbnQgPSBudWxsXG4gICAgICBsYXN0VmFsdWVTZXRSZWYuY3VycmVudCA9IG51bGxcbiAgICAgIGhhc2hUcmlnZ2VyZWRSZWYuY3VycmVudCA9IGZhbHNlIC8vIFJlc2V0IGhhc2ggdHJpZ2dlciBmbGFnIHdoZW4gc3dpdGNoaW5nIHF1ZXJpZXNcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgICAgZXZlbnQ6ICdoYXNoVHJpZ2dlcmVkUmVmLXJlc2V0JyxcbiAgICAgICAgY29uZmlnSWQsXG4gICAgICAgIHJlYXNvbjogJ3N3aXRjaGluZy1xdWVyaWVzJyxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgc2V0SXNUeXBpbmdWYWxpZChmYWxzZSkgLy8gUmVzZXQgdHlwaW5nIHZhbGlkYXRpb25cbiAgICB9XG4gICAgXG4gICAgLy8gQ2hlY2sgaWYgdmFsdWUgaGFzIGNoYW5nZWQgZm9yIHRoZSBzYW1lIGNvbmZpZ0lkXG4gICAgY29uc3QgdmFsdWVDaGFuZ2VkID0gbGFzdFZhbHVlU2V0UmVmLmN1cnJlbnQgIT09IG51bGwgJiYgXG4gICAgICAgICAgICAgICAgICAgICAgICAgbGFzdFZhbHVlU2V0UmVmLmN1cnJlbnQgIT09IGluaXRpYWxJbnB1dFZhbHVlICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgaW5pdGlhbFZhbHVlU2V0UmVmLmN1cnJlbnQgPT09IGNvbmZpZ0lkXG4gICAgXG4gICAgLy8gU2V0IHRoZSB2YWx1ZSBpZjpcbiAgICAvLyAtIFdlIGhhdmVuJ3Qgc2V0IGl0IGZvciB0aGlzIGNvbmZpZ0lkIHlldCwgT1JcbiAgICAvLyAtIFRoZSB2YWx1ZSBoYXMgY2hhbmdlZCBmb3IgdGhlIHNhbWUgY29uZmlnSWQgKGhhc2ggcGFyYW1ldGVyIHVwZGF0ZWQpXG4gICAgY29uc3Qgc2hvdWxkU2V0VmFsdWUgPSBkYXRhc291cmNlUmVhZHkgJiYgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGluaXRpYWxJbnB1dFZhbHVlICYmIFxuICAgICAgICAgICAgICAgICAgICAgICAgICBzcWxFeHByT2JqPy5wYXJ0cz8ubGVuZ3RoID4gMCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAoaW5pdGlhbFZhbHVlU2V0UmVmLmN1cnJlbnQgIT09IGNvbmZpZ0lkIHx8IHZhbHVlQ2hhbmdlZClcbiAgICBcbiAgICBpZiAoc2hvdWxkU2V0VmFsdWUpIHtcbiAgICAgIC8vIEVuc3VyZSBRdWVyeSB0YWIgaXMgYWN0aXZlIGJlZm9yZSBzZXR0aW5nIGhhc2ggdmFsdWVcbiAgICAgIC8vIFRoaXMgZW5zdXJlcyBTcWxFeHByZXNzaW9uUnVudGltZSBpcyB2aXNpYmxlIGFuZCBjYW4gcHJvY2VzcyB0aGUgdmFsdWVcbiAgICAgIGlmIChhY3RpdmVUYWIgIT09ICdxdWVyeScgJiYgb25UYWJDaGFuZ2UpIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgICAgIGV2ZW50OiAnaGFzaC12YWx1ZS1zZXR0aW5nLXN3aXRjaGluZy10by1xdWVyeS10YWInLFxuICAgICAgICAgIGNvbmZpZ0lkLFxuICAgICAgICAgIGluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgICAgIGN1cnJlbnRUYWI6IGFjdGl2ZVRhYixcbiAgICAgICAgICBub3RlOiAnU3dpdGNoaW5nIHRvIFF1ZXJ5IHRhYiBiZWZvcmUgc2V0dGluZyBoYXNoIHZhbHVlIHRvIGVuc3VyZSBTcWxFeHByZXNzaW9uUnVudGltZSBjYW4gcHJvY2VzcyBpdCdcbiAgICAgICAgfSlcbiAgICAgICAgb25UYWJDaGFuZ2UoJ3F1ZXJ5JylcbiAgICAgICAgLy8gUmV0dXJuIGVhcmx5IC0gdXNlRWZmZWN0IHdpbGwgcnVuIGFnYWluIHdoZW4gYWN0aXZlVGFiIGJlY29tZXMgJ3F1ZXJ5J1xuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgICBldmVudDogJ2hhc2gtdmFsdWUtc2V0dGluZy1zdGFydCcsXG4gICAgICAgIGNvbmZpZ0lkLFxuICAgICAgICBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgICAgaW5pdGlhbFZhbHVlU2V0UmVmOiBpbml0aWFsVmFsdWVTZXRSZWYuY3VycmVudCxcbiAgICAgICAgdmFsdWVDaGFuZ2VkLFxuICAgICAgICBoYXNoVHJpZ2dlcmVkUmVmQmVmb3JlOiBoYXNoVHJpZ2dlcmVkUmVmLmN1cnJlbnQsXG4gICAgICAgIHNxbEV4cHJPYmpQYXJ0c0xlbmd0aDogc3FsRXhwck9iaj8ucGFydHM/Lmxlbmd0aCxcbiAgICAgICAgYWN0aXZlVGFiLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIC8vIFNldCBoYXNoVHJpZ2dlcmVkUmVmIElNTUVESUFURUxZIHdoZW4gc2V0dGluZyBoYXNoIHZhbHVlXG4gICAgICAvLyBUaGlzIGVuc3VyZXMgaGFuZGxlU3FsRXhwck9iakNoYW5nZSBjYW4gZGV0ZWN0IGhhc2gtdHJpZ2dlcmVkIGNvbnZlcnNpb25zXG4gICAgICBoYXNoVHJpZ2dlcmVkUmVmLmN1cnJlbnQgPSB0cnVlXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICAgIGV2ZW50OiAnaGFzaFRyaWdnZXJlZFJlZi1zZXQtdHJ1ZScsXG4gICAgICAgIGNvbmZpZ0lkLFxuICAgICAgICBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgXG4gICAgICBjb25zdCBmaXJzdFBhcnQgPSBzcWxFeHByT2JqLnBhcnRzWzBdXG4gICAgICAvLyBDaGVjayBpZiB0aGUgZmlyc3QgcGFydCBpcyBhIFNJTkdMRSBjbGF1c2UgKG5vdCBhIFNxbENsYXVzZVNldClcbiAgICAgIGlmIChmaXJzdFBhcnQgJiYgJ3R5cGUnIGluIGZpcnN0UGFydCAmJiBmaXJzdFBhcnQudHlwZSA9PT0gJ1NJTkdMRScgJiYgJ3ZhbHVlT3B0aW9ucycgaW4gZmlyc3RQYXJ0KSB7XG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgZXhwcmVzc2lvbiBvYmplY3Qgd2l0aCB0aGUgaW5pdGlhbCB2YWx1ZVxuICAgICAgICBjb25zdCB1cGRhdGVkID0gc3FsRXhwck9iai5zZXRJbihbJ3BhcnRzJywgJzAnLCAndmFsdWVPcHRpb25zJywgJ3ZhbHVlJ10sIGluaXRpYWxJbnB1dFZhbHVlKVxuICAgICAgICBcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgICAgIGV2ZW50OiAnaGFzaC12YWx1ZS1zZXR0aW5nLXJlYWN0LXN0YXRlJyxcbiAgICAgICAgICBjb25maWdJZCxcbiAgICAgICAgICBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgICAgICBwcmV2aW91c1N0YXRlVmFsdWU6IGF0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmo/LnBhcnRzPy5bMF0/LnZhbHVlT3B0aW9ucz8udmFsdWUsXG4gICAgICAgICAgbmV3U3RhdGVWYWx1ZTogdXBkYXRlZD8ucGFydHM/LlswXT8udmFsdWVPcHRpb25zPy52YWx1ZSxcbiAgICAgICAgICB3aWxsQ2FsbFNldFN0YXRlOiB0cnVlLFxuICAgICAgICAgIG5vdGU6ICdTZXR0aW5nIHZhbHVlIGluIFJlYWN0IHN0YXRlIC0gU3FsRXhwcmVzc2lvblJ1bnRpbWUgc2hvdWxkIHJlY2VpdmUgdmlhIGV4cHJlc3Npb24gcHJvcCdcbiAgICAgICAgfSlcbiAgICAgICAgXG4gICAgICAgIHNldEF0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmoodXBkYXRlZClcbiAgICAgICAgLy8gVXBkYXRlIHJlZiBpbW1lZGlhdGVseSBmb3Igc3luY2hyb25vdXMgYWNjZXNzIGluIGFwcGx5UXVlcnlcbiAgICAgICAgYXR0cmlidXRlRmlsdGVyU3FsRXhwck9ialJlZi5jdXJyZW50ID0gdXBkYXRlZFxuICAgICAgICBcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgICAgIGV2ZW50OiAnaGFzaC12YWx1ZS1yZWYtdXBkYXRlZCcsXG4gICAgICAgICAgY29uZmlnSWQsXG4gICAgICAgICAgaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICAgICAgcmVmVmFsdWVBZnRlclVwZGF0ZTogYXR0cmlidXRlRmlsdGVyU3FsRXhwck9ialJlZi5jdXJyZW50Py5wYXJ0cz8uWzBdPy52YWx1ZU9wdGlvbnM/LnZhbHVlLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9KVxuICAgICAgICAvLyBVcGRhdGUgY2xhdXNlIG51bWJlciBmb3IgdGhlIHVwZGF0ZWQgZXhwcmVzc2lvblxuICAgICAgICBzaG93Q2xhdXNlTnVtYmVyLmN1cnJlbnQgPSBnZXRTaG93bkNsYXVzZU51bWJlckJ5RXhwcmVzc2lvbih1cGRhdGVkKVxuICAgICAgICBpbml0aWFsVmFsdWVTZXRSZWYuY3VycmVudCA9IGNvbmZpZ0lkXG4gICAgICAgIGxhc3RWYWx1ZVNldFJlZi5jdXJyZW50ID0gaW5pdGlhbElucHV0VmFsdWVcbiAgICAgICAgXG4gICAgICAgIC8vIEFsc28gc2V0IHRoZSB2YWx1ZSBkaXJlY3RseSBvbiB0aGUgaW5wdXQgZWxlbWVudCBhZnRlciBhIGRlbGF5IHRvIGVuc3VyZSBjb21wb25lbnQgaXMgcmVuZGVyZWRcbiAgICAgICAgLy8gVGhpcyBpcyBuZWNlc3NhcnkgYmVjYXVzZSBTcWxFeHByZXNzaW9uUnVudGltZSBtYXkgbm90IHN5bmMgZnJvbSB0aGUgZXhwcmVzc2lvbiBwcm9wIGFsb25lXG4gICAgICAgIGNvbnN0IHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIC8vIEZpbmQgdGhlIGlucHV0IGVsZW1lbnQgd2l0aGluIFNxbEV4cHJlc3Npb25SdW50aW1lXG4gICAgICAgICAgLy8gVXNlIGRhdGEtd2lkZ2V0aWQgKHN0YW5kYXJkIEV4QiBhdHRyaWJ1dGUpIHRvIGlzb2xhdGUgdGhlIGNvcnJlY3Qgd2lkZ2V0IGluc3RhbmNlXG4gICAgICAgICAgY29uc3QgZm9ybUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBbZGF0YS13aWRnZXRpZD1cIiR7d2lkZ2V0SWR9XCJdYCk/LnF1ZXJ5U2VsZWN0b3IoJy5xdWVyeS1mb3JtJykgfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC53aWRnZXQtcnVudGltZVtkYXRhLXdpZGdldGlkPVwiJHt3aWRnZXRJZH1cIl1gKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucXVlcnktZm9ybScpXG4gICAgICAgICAgXG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgICAgICAgZXZlbnQ6ICdoYXNoLXZhbHVlLWRvbS1tYW5pcHVsYXRpb24tc3RhcnQnLFxuICAgICAgICAgICAgY29uZmlnSWQsXG4gICAgICAgICAgICBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgICAgICAgIGZvcm1FbGVtZW50Rm91bmQ6ICEhZm9ybUVsZW1lbnQsXG4gICAgICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgICAgIHNlbGVjdG9yMTogYFtkYXRhLXdpZGdldGlkPVwiJHt3aWRnZXRJZH1cIl0gLnF1ZXJ5LWZvcm1gLFxuICAgICAgICAgICAgc2VsZWN0b3IyOiBgLndpZGdldC1ydW50aW1lW2RhdGEtd2lkZ2V0aWQ9XCIke3dpZGdldElkfVwiXWAsXG4gICAgICAgICAgICBzZWxlY3RvcjM6ICcucXVlcnktZm9ybScsXG4gICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICB9KVxuICAgICAgICAgIFxuICAgICAgICAgIGlmIChmb3JtRWxlbWVudCkge1xuICAgICAgICAgICAgLy8gTG9vayBmb3IgdGV4dCBpbnB1dCBlbGVtZW50c1xuICAgICAgICAgICAgY29uc3QgdGV4dElucHV0cyA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W3R5cGU9XCJ0ZXh0XCJdJylcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgICAgICAgICBldmVudDogJ2hhc2gtdmFsdWUtZG9tLW1hbmlwdWxhdGlvbi1pbnB1dHMtZm91bmQnLFxuICAgICAgICAgICAgICBjb25maWdJZCxcbiAgICAgICAgICAgICAgaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICAgICAgICAgIGlucHV0c0ZvdW5kOiB0ZXh0SW5wdXRzLmxlbmd0aCxcbiAgICAgICAgICAgICAgZm9ybUVsZW1lbnRUYWc6IGZvcm1FbGVtZW50LnRhZ05hbWUsXG4gICAgICAgICAgICAgIGZvcm1FbGVtZW50Q2xhc3M6IGZvcm1FbGVtZW50LmNsYXNzTmFtZSxcbiAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBsZXQgaW5wdXRzVXBkYXRlZCA9IDBcbiAgICAgICAgICAgIHRleHRJbnB1dHMuZm9yRWFjaCgoaW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQsIGluZGV4OiBudW1iZXIpID0+IHtcbiAgICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSB2YWx1ZSBpZiBpbnB1dCBpcyBlbXB0eSBPUiBpZiB0aGUgdmFsdWUgaGFzIGNoYW5nZWQgKGhhc2ggcGFyYW1ldGVyIHVwZGF0ZWQpXG4gICAgICAgICAgICAgIGNvbnN0IHNob3VsZFVwZGF0ZSA9ICFpbnB1dC52YWx1ZSB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dC52YWx1ZS50cmltKCkgPT09ICcnIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0LnZhbHVlICE9PSBpbml0aWFsSW5wdXRWYWx1ZVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgICAgICAgICAgIGV2ZW50OiAnaGFzaC12YWx1ZS1kb20tbWFuaXB1bGF0aW9uLWlucHV0LWNoZWNrJyxcbiAgICAgICAgICAgICAgICBjb25maWdJZCxcbiAgICAgICAgICAgICAgICBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgICAgICAgICAgICBpbnB1dEluZGV4OiBpbmRleCxcbiAgICAgICAgICAgICAgICBjdXJyZW50SW5wdXRWYWx1ZTogaW5wdXQudmFsdWUsXG4gICAgICAgICAgICAgICAgaW5wdXRJZDogaW5wdXQuaWQsXG4gICAgICAgICAgICAgICAgaW5wdXROYW1lOiBpbnB1dC5uYW1lLFxuICAgICAgICAgICAgICAgIGlucHV0UGFyZW50VGFnOiBpbnB1dC5wYXJlbnRFbGVtZW50Py50YWdOYW1lLFxuICAgICAgICAgICAgICAgIHNob3VsZFVwZGF0ZSxcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGlmIChzaG91bGRVcGRhdGUpIHtcbiAgICAgICAgICAgICAgICAvLyBGb2N1cyB0aGUgaW5wdXQgZmlyc3RcbiAgICAgICAgICAgICAgICBpbnB1dC5mb2N1cygpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gU2V0IHRoZSB2YWx1ZVxuICAgICAgICAgICAgICAgIGlucHV0LnZhbHVlID0gaW5pdGlhbElucHV0VmFsdWVcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICAgICAgICAgICAgICBldmVudDogJ2hhc2gtdmFsdWUtZG9tLW1hbmlwdWxhdGlvbi1pbnB1dC12YWx1ZS1zZXQnLFxuICAgICAgICAgICAgICAgICAgY29uZmlnSWQsXG4gICAgICAgICAgICAgICAgICBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgICAgICAgICAgICAgIGlucHV0SW5kZXg6IGluZGV4LFxuICAgICAgICAgICAgICAgICAgdmFsdWVBZnRlclNldDogaW5wdXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICBpc0ZvY3VzZWQ6IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgPT09IGlucHV0LFxuICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBDcmVhdGUgYW5kIGRpc3BhdGNoIGlucHV0IGV2ZW50IHdpdGggcHJvcGVyIHByb3BlcnRpZXNcbiAgICAgICAgICAgICAgICBjb25zdCBpbnB1dEV2ZW50ID0gbmV3IEV2ZW50KCdpbnB1dCcsIHsgYnViYmxlczogdHJ1ZSwgY2FuY2VsYWJsZTogdHJ1ZSB9KVxuICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpbnB1dEV2ZW50LCAndGFyZ2V0JywgeyB2YWx1ZTogaW5wdXQsIGVudW1lcmFibGU6IHRydWUgfSlcbiAgICAgICAgICAgICAgICBpbnB1dC5kaXNwYXRjaEV2ZW50KGlucHV0RXZlbnQpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGFuZCBkaXNwYXRjaCBjaGFuZ2UgZXZlbnRcbiAgICAgICAgICAgICAgICBjb25zdCBjaGFuZ2VFdmVudCA9IG5ldyBFdmVudCgnY2hhbmdlJywgeyBidWJibGVzOiB0cnVlLCBjYW5jZWxhYmxlOiB0cnVlIH0pXG4gICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNoYW5nZUV2ZW50LCAndGFyZ2V0JywgeyB2YWx1ZTogaW5wdXQsIGVudW1lcmFibGU6IHRydWUgfSlcbiAgICAgICAgICAgICAgICBpbnB1dC5kaXNwYXRjaEV2ZW50KGNoYW5nZUV2ZW50KVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIEFsc28gdHJ5IFJlYWN0J3Mgc3ludGhldGljIGV2ZW50IGFwcHJvYWNoIHVzaW5nIG5hdGl2ZSB2YWx1ZSBzZXR0ZXJcbiAgICAgICAgICAgICAgICBjb25zdCBuYXRpdmVJbnB1dFZhbHVlU2V0dGVyID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih3aW5kb3cuSFRNTElucHV0RWxlbWVudC5wcm90b3R5cGUsICd2YWx1ZScpPy5zZXRcbiAgICAgICAgICAgICAgICBpZiAobmF0aXZlSW5wdXRWYWx1ZVNldHRlcikge1xuICAgICAgICAgICAgICAgICAgbmF0aXZlSW5wdXRWYWx1ZVNldHRlci5jYWxsKGlucHV0LCBpbml0aWFsSW5wdXRWYWx1ZSlcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHJlYWN0RXZlbnQgPSBuZXcgRXZlbnQoJ2lucHV0JywgeyBidWJibGVzOiB0cnVlIH0pXG4gICAgICAgICAgICAgICAgICBpbnB1dC5kaXNwYXRjaEV2ZW50KHJlYWN0RXZlbnQpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgICAgICAgICAgICAgIGV2ZW50OiAnaGFzaC12YWx1ZS1kb20tbWFuaXB1bGF0aW9uLWV2ZW50cy1kaXNwYXRjaGVkJyxcbiAgICAgICAgICAgICAgICAgIGNvbmZpZ0lkLFxuICAgICAgICAgICAgICAgICAgaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICAgICAgICAgICAgICBpbnB1dEluZGV4OiBpbmRleCxcbiAgICAgICAgICAgICAgICAgIGlucHV0RXZlbnREaXNwYXRjaGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgY2hhbmdlRXZlbnREaXNwYXRjaGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgcmVhY3RFdmVudERpc3BhdGNoZWQ6ICEhbmF0aXZlSW5wdXRWYWx1ZVNldHRlcixcbiAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gQmx1ciB0byB0cmlnZ2VyIGFueSB2YWxpZGF0aW9uIG9yIHN0YXRlIHVwZGF0ZXNcbiAgICAgICAgICAgICAgICBpbnB1dC5ibHVyKClcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpbnB1dHNVcGRhdGVkKytcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gSGFzaC10cmlnZ2VyZWQgcXVlcmllczogRE9NIG1hbmlwdWxhdGlvbiB0cmlnZ2VycyBTcWxFeHByZXNzaW9uUnVudGltZSBvbkNoYW5nZVxuICAgICAgICAgICAgLy8gaGFuZGxlU3FsRXhwck9iakNoYW5nZSBkZXRlY3RzIGNvbnZlcnNpb24gYW5kIGZpcmVzIFFVRVJZU0lNUExFX0hBU0hfVkFMVUVfQ09OVkVSVEVEX0VWRU5UXG4gICAgICAgICAgICAvLyBFdmVudCBsaXN0ZW5lciBpbiBxdWVyeS10YXNrLnRzeCBleGVjdXRlcyBxdWVyeSBkaXJlY3RseSAtIG5vIEFwcGx5IGJ1dHRvbiBjbGljayBuZWVkZWRcbiAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgICAgICAgICAgZXZlbnQ6ICdoYXNoLXZhbHVlLWRvbS1tYW5pcHVsYXRpb24tY29tcGxldGUnLFxuICAgICAgICAgICAgICBjb25maWdJZCxcbiAgICAgICAgICAgICAgaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICAgICAgICAgIGlucHV0c0ZvdW5kOiB0ZXh0SW5wdXRzLmxlbmd0aCxcbiAgICAgICAgICAgICAgaW5wdXRzVXBkYXRlZCxcbiAgICAgICAgICAgICAgbm90ZTogJ0RPTSBtYW5pcHVsYXRpb24gY29tcGxldGUgLSBTcWxFeHByZXNzaW9uUnVudGltZSBvbkNoYW5nZSBzaG91bGQgZmlyZScsXG4gICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgICAgICAgICBldmVudDogJ2hhc2gtdmFsdWUtZG9tLW1hbmlwdWxhdGlvbi1mYWlsZWQnLFxuICAgICAgICAgICAgICBjb25maWdJZCxcbiAgICAgICAgICAgICAgaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICAgICAgICAgIHJlYXNvbjogJ2Zvcm1FbGVtZW50LW5vdC1mb3VuZCcsXG4gICAgICAgICAgICAgIHdpZGdldElkLFxuICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9LCA1MDApIC8vIExvbmdlciBkZWxheSB0byBlbnN1cmUgY29tcG9uZW50IGlzIGZ1bGx5IHJlbmRlcmVkXG4gICAgICAgIFxuICAgICAgICByZXR1cm4gKCkgPT4gY2xlYXJUaW1lb3V0KHRpbWVvdXRJZClcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gVGhlIHNxbEV4cHJPYmoucGFydHMgbWF5IGNoYW5nZSBidXQgdGhlIGRpc3BsYXlTUUwgaXMgdGhlIHNhbWVcbiAgICBpZiAoIXNxbEV4cHJPYmopIHtcbiAgICAgIHNob3dDbGF1c2VOdW1iZXIuY3VycmVudCA9IDBcbiAgICAgIHNldEF0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmoobnVsbClcbiAgICAgIGF0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmpSZWYuY3VycmVudCA9IG51bGxcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgICBldmVudDogJ3NxbEV4cHJPYmotY2xlYXJlZCcsXG4gICAgICAgIGNvbmZpZ0lkLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIHNob3dDbGF1c2VOdW1iZXIuY3VycmVudCA9IGdldFNob3duQ2xhdXNlTnVtYmVyQnlFeHByZXNzaW9uKHNxbEV4cHJPYmopXG4gICAgICBcbiAgICAgIC8vIENoZWNrIGlmIHdlIGFscmVhZHkgaGF2ZSBhIHZhbHVlIHNldCAoZnJvbSB1c2VyIGlucHV0IG9yIGhhc2gpXG4gICAgICBjb25zdCBjdXJyZW50VmFsdWUgPSBhdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqPy5wYXJ0cz8uWzBdPy52YWx1ZU9wdGlvbnM/LnZhbHVlXG4gICAgICBjb25zdCBiYXNlVmFsdWUgPSBzcWxFeHByT2JqPy5wYXJ0cz8uWzBdPy52YWx1ZU9wdGlvbnM/LnZhbHVlXG4gICAgICBjb25zdCBoYXNWYWx1ZVNldCA9IGN1cnJlbnRWYWx1ZSAhPT0gdW5kZWZpbmVkICYmIGN1cnJlbnRWYWx1ZSAhPT0gbnVsbCAmJiBjdXJyZW50VmFsdWUgIT09ICcnXG4gICAgICBjb25zdCBjb25maWdJZENoYW5nZWQgPSBwcmV2aW91c0NvbmZpZ0lkUmVmLmN1cnJlbnQgIT09IG51bGwgJiYgcHJldmlvdXNDb25maWdJZFJlZi5jdXJyZW50ICE9PSBjb25maWdJZFxuICAgICAgXG4gICAgICAvLyBPbmx5IHVwZGF0ZSBpZjpcbiAgICAgIC8vIDEuIFdlIGhhdmVuJ3Qgc2V0IGEgdmFsdWUgeWV0IChubyB2YWx1ZSBpbiBjdXJyZW50IHN0YXRlKSwgT1JcbiAgICAgIC8vIDIuIGNvbmZpZ0lkIGNoYW5nZWQgKHN3aXRjaGluZyBxdWVyaWVzIC0gcmVzZXQgdG8gYmFzZSBzcWxFeHByT2JqKVxuICAgICAgLy8gT3RoZXJ3aXNlLCBwcmVzZXJ2ZSB0aGUgZXhpc3RpbmcgdmFsdWUgYXMgYSB2aXN1YWwgcmVjb3JkXG4gICAgICBpZiAoIWhhc1ZhbHVlU2V0IHx8IGNvbmZpZ0lkQ2hhbmdlZCkge1xuICAgICAgICBzZXRBdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqKHNxbEV4cHJPYmopXG4gICAgICAgIGF0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmpSZWYuY3VycmVudCA9IHNxbEV4cHJPYmpcbiAgICAgICAgXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgICAgICBldmVudDogJ3NxbEV4cHJPYmotdXBkYXRlZC1yZWYnLFxuICAgICAgICAgIGNvbmZpZ0lkLFxuICAgICAgICAgIHByZXZpb3VzQ29uZmlnSWQ6IHByZXZpb3VzQ29uZmlnSWRSZWYuY3VycmVudCxcbiAgICAgICAgICBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgICAgICBpbml0aWFsVmFsdWVTZXRSZWY6IGluaXRpYWxWYWx1ZVNldFJlZi5jdXJyZW50LFxuICAgICAgICAgIGhhc1ZhbHVlU2V0LFxuICAgICAgICAgIGNvbmZpZ0lkQ2hhbmdlZCxcbiAgICAgICAgICBwcmV2aW91c1ZhbHVlOiBjdXJyZW50VmFsdWUsXG4gICAgICAgICAgbmV3VmFsdWU6IGJhc2VWYWx1ZSxcbiAgICAgICAgICByZWFzb246IGNvbmZpZ0lkQ2hhbmdlZCA/ICdjb25maWdJZC1jaGFuZ2VkLXJlc2V0dGluZycgOiAnbm8tdmFsdWUtc2V0LWluaXRpYWxpemluZycsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICAgICAgZXZlbnQ6ICdzcWxFeHByT2JqLXNraXBwZWQtcmVmLXVwZGF0ZScsXG4gICAgICAgICAgY29uZmlnSWQsXG4gICAgICAgICAgcHJldmlvdXNDb25maWdJZDogcHJldmlvdXNDb25maWdJZFJlZi5jdXJyZW50LFxuICAgICAgICAgIGluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgICAgIGluaXRpYWxWYWx1ZVNldFJlZjogaW5pdGlhbFZhbHVlU2V0UmVmLmN1cnJlbnQsXG4gICAgICAgICAgY3VycmVudFZhbHVlLFxuICAgICAgICAgIGJhc2VWYWx1ZSxcbiAgICAgICAgICByZWFzb246ICd2YWx1ZS1hbHJlYWR5LXNldC1wcmVzZXJ2aW5nLWFzLXZpc3VhbC1yZWNvcmQnLFxuICAgICAgICAgIG5vdGU6ICdTa2lwcGluZyB1cGRhdGUgdG8gcHJlc2VydmUgdXNlci1lbnRlcmVkIG9yIGhhc2gtc2V0IHZhbHVlIGFzIHZpc3VhbCByZWNvcmQnLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9KVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBVcGRhdGUgcHJldmlvdXNDb25maWdJZFJlZiBmb3IgbmV4dCBjb21wYXJpc29uXG4gICAgICBwcmV2aW91c0NvbmZpZ0lkUmVmLmN1cnJlbnQgPSBjb25maWdJZFxuICAgIH1cbiAgfSwgW3NxbEV4cHJPYmosIGluaXRpYWxJbnB1dFZhbHVlLCBkYXRhc291cmNlUmVhZHksIGNvbmZpZ0lkLCB3aWRnZXRJZCwgb25IYXNoUGFyYW1ldGVyVXNlZCwgcXVlcnlJdGVtU2hvcnRJZCwgYWN0aXZlVGFiLCBvblRhYkNoYW5nZV0pXG4gIFxuICAvLyBLZWVwIHJlZiBpbiBzeW5jIHdpdGggc3RhdGUgY2hhbmdlcyAoZm9yIFNxbEV4cHJlc3Npb25SdW50aW1lIHVwZGF0ZXMpXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgYXR0cmlidXRlRmlsdGVyU3FsRXhwck9ialJlZi5jdXJyZW50ID0gYXR0cmlidXRlRmlsdGVyU3FsRXhwck9ialxuICAgIFxuICAgIC8vIExvZyB3aGVuIHN0YXRlIGNoYW5nZXMgLSB0aGlzIGlzIHdoYXQgU3FsRXhwcmVzc2lvblJ1bnRpbWUgcmVjZWl2ZXMgdmlhIGV4cHJlc3Npb24gcHJvcFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgIGV2ZW50OiAnYXR0cmlidXRlRmlsdGVyU3FsRXhwck9iai1zdGF0ZS1jaGFuZ2VkJyxcbiAgICAgIGNvbmZpZ0lkLFxuICAgICAgc3RhdGVWYWx1ZTogYXR0cmlidXRlRmlsdGVyU3FsRXhwck9iaj8ucGFydHM/LlswXT8udmFsdWVPcHRpb25zPy52YWx1ZSxcbiAgICAgIHN0YXRlVmFsdWVUeXBlOiB0eXBlb2YgYXR0cmlidXRlRmlsdGVyU3FsRXhwck9iaj8ucGFydHM/LlswXT8udmFsdWVPcHRpb25zPy52YWx1ZSxcbiAgICAgIGlzQXJyYXk6IEFycmF5LmlzQXJyYXkoYXR0cmlidXRlRmlsdGVyU3FsRXhwck9iaj8ucGFydHM/LlswXT8udmFsdWVPcHRpb25zPy52YWx1ZSksXG4gICAgICBoYXNoVHJpZ2dlcmVkUmVmOiBoYXNoVHJpZ2dlcmVkUmVmLmN1cnJlbnQsXG4gICAgICBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgIG5vdGU6ICdSZWFjdCBzdGF0ZSBjaGFuZ2VkIC0gU3FsRXhwcmVzc2lvblJ1bnRpbWUgc2hvdWxkIHJlY2VpdmUgdGhpcyB2aWEgZXhwcmVzc2lvbiBwcm9wJ1xuICAgIH0pXG4gIH0sIFthdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqLCBjb25maWdJZCwgaW5pdGlhbElucHV0VmFsdWVdKVxuXG4gIGNvbnN0IGFwcGx5UXVlcnkgPSBSZWFjdC51c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgLy8gV2hlbiB0aGUgJ2FwcGx5JyBidXR0b24gaXMgY2xpY2tlZCwgaXQgc2hvdWxkIGNsZWFyIHRoZSBzZWxlY3Rpb24gZnJvbSB0aGUgcHJldmlvdXMgcmVzdWx0IGxpc3RcbiAgICBjbGVhclNlbGVjdGlvbkluRGF0YVNvdXJjZXMob3V0cHV0RFMpXG5cbiAgICBpZiAob3V0cHV0RFMpIHtcbiAgICAgIGNvbnN0IG9yaWdpbkRzOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlID0gb3V0cHV0RFMuZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKVswXSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gICAgICBpZiAob3JpZ2luRHMpIHtcbiAgICAgICAgY29uc3QgZGF0YVZpZXdDb25maWcgPSBvcmlnaW5Ecy5nZXREYXRhVmlld0NvbmZpZygpXG4gICAgICAgIGNvbnN0IG1heGltdW0gPSBkYXRhVmlld0NvbmZpZz8ubWF4aW11bVxuICAgICAgICBpZiAobWF4aW11bSAhPSBudWxsICYmIG1heGltdW0gPiAwKSB7XG4gICAgICAgICAgRGF0YVNvdXJjZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS51cGRhdGVEYXRhU291cmNlQnlEYXRhU291cmNlSnNvbihcbiAgICAgICAgICAgIG91dHB1dERTLFxuICAgICAgICAgICAgb3V0cHV0RFMuZ2V0RGF0YVNvdXJjZUpzb24oKS5zZXRJbihbJ3F1ZXJ5JywgJ21heGltdW0nXSwgbWF4aW11bSlcbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBGb3JjZSB6b29tIGZvciBoYXNoLXRyaWdnZXJlZCBxdWVyaWVzLCBvdGhlcndpc2UgdXNlIHJ1bnRpbWUgcHJlZmVyZW5jZVxuICAgIGNvbnN0IHpvb21Ub1VzZSA9IGhhc2hUcmlnZ2VyZWRSZWYuY3VycmVudCA/IHRydWUgOiBydW50aW1lWm9vbVRvU2VsZWN0ZWRcblxuICAgIC8vIFNhbml0aXplIHVzZXIgaW5wdXQgYmVmb3JlIHN1Ym1pc3Npb25cbiAgICAvLyBSZWFkIGZyb20gcmVmIHRvIGdldCB0aGUgbGF0ZXN0IHZhbHVlIHN5bmNocm9ub3VzbHkgKGluY2x1ZGluZyBoYXNoIHZhbHVlcylcbiAgICBjb25zdCBjdXJyZW50U3FsRXhwck9iaiA9IGF0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmpSZWYuY3VycmVudFxuICAgIGNvbnN0IGN1cnJlbnRSZWZWYWx1ZSA9IGN1cnJlbnRTcWxFeHByT2JqPy5wYXJ0cz8uWzBdPy52YWx1ZU9wdGlvbnM/LnZhbHVlXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgZXZlbnQ6ICdhcHBseVF1ZXJ5LWV4ZWN1dGluZycsXG4gICAgICBjb25maWdJZCxcbiAgICAgIGluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgY3VycmVudFJlZlZhbHVlLFxuICAgICAgcmVmSGFzVmFsdWU6ICEhY3VycmVudFJlZlZhbHVlLFxuICAgICAgaGFzaFRyaWdnZXJlZDogaGFzaFRyaWdnZXJlZFJlZi5jdXJyZW50LFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICBjb25zdCBzYW5pdGl6ZWRTcWxFeHByT2JqID0gc2FuaXRpemVTcWxFeHByZXNzaW9uKGN1cnJlbnRTcWxFeHByT2JqKVxuICAgIFxuICAgIC8vIExvZyB0aGUgc2FuaXRpemVkIGV4cHJlc3Npb24gdG8gc2VlIGlmIHZhbHVlIHdhcyBwcmVzZXJ2ZWRcbiAgICBjb25zdCBzYW5pdGl6ZWRWYWx1ZSA9IHNhbml0aXplZFNxbEV4cHJPYmo/LnBhcnRzPy5bMF0/LnZhbHVlT3B0aW9ucz8udmFsdWVcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICBldmVudDogJ2FwcGx5UXVlcnktYWZ0ZXItc2FuaXRpemUnLFxuICAgICAgY29uZmlnSWQsXG4gICAgICBjdXJyZW50UmVmVmFsdWUsXG4gICAgICBzYW5pdGl6ZWRWYWx1ZSxcbiAgICAgIHZhbHVlc01hdGNoOiBjdXJyZW50UmVmVmFsdWUgPT09IHNhbml0aXplZFZhbHVlLFxuICAgICAgc2FuaXRpemVkVmFsdWVUeXBlOiB0eXBlb2Ygc2FuaXRpemVkVmFsdWUsXG4gICAgICBjdXJyZW50UmVmVmFsdWVUeXBlOiB0eXBlb2YgY3VycmVudFJlZlZhbHVlLFxuICAgICAgaXNBcnJheUN1cnJlbnQ6IEFycmF5LmlzQXJyYXkoY3VycmVudFJlZlZhbHVlKSxcbiAgICAgIGlzQXJyYXlTYW5pdGl6ZWQ6IEFycmF5LmlzQXJyYXkoc2FuaXRpemVkVmFsdWUpLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcblxuICAgIGxldCByZWwgPSBzcGF0aWFsUmVsYXRpb25SZWYuY3VycmVudFxuICAgIGlmIChzcGF0aWFsRmlsdGVyT2JqUmVmLmN1cnJlbnQ/Lmdlb21ldHJ5ICYmIHJlbCA9PSBudWxsKSB7XG4gICAgICByZWwgPSBTcGF0aWFsUmVsYXRpb24uSW50ZXJzZWN0XG4gICAgfVxuICAgIGlmIChBcnJheS5pc0FycmF5KHNwYXRpYWxGaWx0ZXJPYmpSZWYuY3VycmVudD8uZ2VvbWV0cnkpKSB7XG4gICAgICBpZiAoc3BhdGlhbEZpbHRlck9ialJlZi5jdXJyZW50Lmdlb21ldHJ5Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBvbkZvcm1TdWJtaXQoc2FuaXRpemVkU3FsRXhwck9iaiwgeyAuLi5zcGF0aWFsRmlsdGVyT2JqUmVmLmN1cnJlbnQsIGdlb21ldHJ5OiBzcGF0aWFsRmlsdGVyT2JqUmVmLmN1cnJlbnQuZ2VvbWV0cnlbMF0sIHJlbGF0aW9uOiByZWwsIGJ1ZmZlcjogYnVmZmVyUmVmLmN1cnJlbnQgfSwgem9vbVRvVXNlKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbG9hZEFyY0dJU0pTQVBJTW9kdWxlcyhbXG4gICAgICAgICAgJ2VzcmkvZ2VvbWV0cnkvb3BlcmF0b3JzL3VuaW9uT3BlcmF0b3InXG4gICAgICAgIF0pLnRoZW4obW9kdWxlcyA9PiB7XG4gICAgICAgICAgY29uc3Qgb3BlcmF0b3I6ICh0eXBlb2YgX19lc3JpLnVuaW9uT3BlcmF0b3IpID0gbW9kdWxlc1swXVxuICAgICAgICAgIGNvbnN0IGdlb21ldHJ5ID0gb3BlcmF0b3IuZXhlY3V0ZU1hbnkoc3BhdGlhbEZpbHRlck9ialJlZi5jdXJyZW50Lmdlb21ldHJ5KVxuICAgICAgICAgIG9uRm9ybVN1Ym1pdChzYW5pdGl6ZWRTcWxFeHByT2JqLCB7IC4uLnNwYXRpYWxGaWx0ZXJPYmpSZWYuY3VycmVudCwgZ2VvbWV0cnksIHJlbGF0aW9uOiByZWwsIGJ1ZmZlcjogYnVmZmVyUmVmLmN1cnJlbnQgfSwgem9vbVRvVXNlKVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBvbkZvcm1TdWJtaXQoc2FuaXRpemVkU3FsRXhwck9iaiwgeyAuLi5zcGF0aWFsRmlsdGVyT2JqUmVmLmN1cnJlbnQsIHJlbGF0aW9uOiByZWwsIGJ1ZmZlcjogYnVmZmVyUmVmLmN1cnJlbnQgfSwgem9vbVRvVXNlKVxuICAgIH1cbiAgICBcbiAgICAvLyBSZXNldCBoYXNoVHJpZ2dlcmVkUmVmIGFmdGVyIHVzZVxuICAgIGhhc2hUcmlnZ2VyZWRSZWYuY3VycmVudCA9IGZhbHNlXG4gICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgZXZlbnQ6ICdoYXNoVHJpZ2dlcmVkUmVmLXJlc2V0LWFmdGVyLWFwcGx5JyxcbiAgICAgIGNvbmZpZ0lkLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgfSwgW29uRm9ybVN1Ym1pdCwgb3V0cHV0RFMsIHJ1bnRpbWVab29tVG9TZWxlY3RlZF0pXG5cbiAgY29uc3QgaGFuZGxlS2V5RG93biA9IFJlYWN0LnVzZUNhbGxiYWNrKChldmVudDogUmVhY3QuS2V5Ym9hcmRFdmVudCkgPT4ge1xuICAgIGlmIChldmVudC5rZXkgPT09ICdFbnRlcicgJiYgZGF0YXNvdXJjZVJlYWR5ICYmIGlzSW5wdXRWYWxpZCkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgICAgXG4gICAgICAvLyBGaW5kIHRoZSBhY3RpdmUgaW5wdXQgZmllbGRcbiAgICAgIGNvbnN0IGFjdGl2ZUVsZW1lbnQgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50IGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICAgIGlmIChhY3RpdmVFbGVtZW50ICYmIGFjdGl2ZUVsZW1lbnQudGFnTmFtZSA9PT0gJ0lOUFVUJyAmJiBhY3RpdmVFbGVtZW50LnR5cGUgPT09ICd0ZXh0Jykge1xuICAgICAgICAvLyBGb3JjZSBibHVyIHRvIHRyaWdnZXIgU3FsRXhwcmVzc2lvblJ1bnRpbWUncyBpbnB1dCBwcm9jZXNzaW5nXG4gICAgICAgIGFjdGl2ZUVsZW1lbnQuYmx1cigpXG4gICAgICAgIFxuICAgICAgICAvLyBXYWl0IGZvciBibHVyIHByb2Nlc3NpbmcsIHRoZW4gY2xpY2sgdGhlIEFwcGx5IGJ1dHRvblxuICAgICAgICAvLyBUaGlzIHVzZXMgdGhlIGV4YWN0IHNhbWUgY29kZSBwYXRoIGFzIGNsaWNraW5nIHRoZSBidXR0b24gbWFudWFsbHlcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgaWYgKGFwcGx5QnV0dG9uUmVmLmN1cnJlbnQgJiYgIWFwcGx5QnV0dG9uUmVmLmN1cnJlbnQuZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIGFwcGx5QnV0dG9uUmVmLmN1cnJlbnQuY2xpY2soKVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhcHBseVF1ZXJ5KClcbiAgICAgICAgICB9XG4gICAgICAgIH0sIDIwMClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIE5vdCBpbiBhbiBpbnB1dCBmaWVsZCwgc2FmZSB0byBhcHBseSBpbW1lZGlhdGVseVxuICAgICAgICBpZiAoYXBwbHlCdXR0b25SZWYuY3VycmVudCAmJiAhYXBwbHlCdXR0b25SZWYuY3VycmVudC5kaXNhYmxlZCkge1xuICAgICAgICAgIGFwcGx5QnV0dG9uUmVmLmN1cnJlbnQuY2xpY2soKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGFwcGx5UXVlcnkoKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LCBbZGF0YXNvdXJjZVJlYWR5LCBhcHBseVF1ZXJ5LCBpc0lucHV0VmFsaWRdKVxuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFkYXRhQWN0aW9uRmlsdGVyKSByZXR1cm5cbiAgICBpZiAoZGF0YUFjdGlvbkZpbHRlci53aGVyZSAhPT0gcHJlRGF0YUFjdGlvbkZpbHRlcj8ud2hlcmUpIHtcbiAgICAgIC8vIExvZyBzdGF0ZSB3aGVuIGRhdGFBY3Rpb25GaWx0ZXIgY2hhbmdlcyAocXVlcnkgc3dpdGNoKVxuICAgICAgY29uc3QgY3VycmVudFJlZlZhbHVlID0gYXR0cmlidXRlRmlsdGVyU3FsRXhwck9ialJlZi5jdXJyZW50Py5wYXJ0cz8uWzBdPy52YWx1ZU9wdGlvbnM/LnZhbHVlXG4gICAgICBjb25zdCBoYXNQZW5kaW5nSGFzaFZhbHVlID0gaW5pdGlhbElucHV0VmFsdWUgJiYgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGluaXRpYWxWYWx1ZVNldFJlZi5jdXJyZW50ICE9PSBjb25maWdJZCB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFJlZlZhbHVlICE9PSBpbml0aWFsSW5wdXRWYWx1ZSlcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgICBldmVudDogJ2RhdGFBY3Rpb25GaWx0ZXItY2hhbmdlZC1hdXRvLXRyaWdnZXInLFxuICAgICAgICBjb25maWdJZCxcbiAgICAgICAgcHJldmlvdXNXaGVyZTogcHJlRGF0YUFjdGlvbkZpbHRlcj8ud2hlcmUsXG4gICAgICAgIG5ld1doZXJlOiBkYXRhQWN0aW9uRmlsdGVyLndoZXJlLFxuICAgICAgICBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgICAgaW5pdGlhbFZhbHVlU2V0UmVmOiBpbml0aWFsVmFsdWVTZXRSZWYuY3VycmVudCxcbiAgICAgICAgY3VycmVudFJlZlZhbHVlLFxuICAgICAgICBoYXNQZW5kaW5nSGFzaFZhbHVlLFxuICAgICAgICB3aWxsQ2FsbEFwcGx5UXVlcnk6ICFoYXNQZW5kaW5nSGFzaFZhbHVlLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGFwcGx5UXVlcnkoKVxuICAgIH1cbiAgfSwgW2RhdGFBY3Rpb25GaWx0ZXIsIHByZURhdGFBY3Rpb25GaWx0ZXI/LndoZXJlLCBhcHBseVF1ZXJ5LCBpbml0aWFsSW5wdXRWYWx1ZSwgY29uZmlnSWRdKVxuXG4gIGNvbnN0IHJlc2V0UXVlcnkgPSBSZWFjdC51c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgLy8gMS4gcmVzZXQgYXR0cmlidXRlIGZpbHRlclxuICAgIHNob3dDbGF1c2VOdW1iZXIuY3VycmVudCA9IGdldFNob3duQ2xhdXNlTnVtYmVyQnlFeHByZXNzaW9uKHNxbEV4cHJPYmopXG4gICAgc2V0QXR0cmlidXRlRmlsdGVyU3FsRXhwck9iaihzcWxFeHByT2JqKVxuICAgIC8vIDIuIHJlc2V0IHNwYXRpYWwgZmlsdGVyXG4gICAgc2V0UmVzZXRTeW1ib2woU3ltYm9sKCkpXG4gIH0sIFtzcWxFeHByT2JqXSlcblxuICBjb25zdCBoYW5kbGVTcWxFeHByT2JqQ2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soKHNxbE9iajogSU1TcWxFeHByZXNzaW9uKSA9PiB7XG4gICAgLy8gTE9HIEFUIFRIRSBWRVJZIFNUQVJUXG4gICAgY29uc3Qgc3FsT2JqVmFsdWUgPSBzcWxPYmo/LnBhcnRzPy5bMF0/LnZhbHVlT3B0aW9ucz8udmFsdWVcbiAgICBjb25zdCBwcmV2aW91c1JlZlZhbHVlID0gYXR0cmlidXRlRmlsdGVyU3FsRXhwck9ialJlZi5jdXJyZW50Py5wYXJ0cz8uWzBdPy52YWx1ZU9wdGlvbnM/LnZhbHVlXG4gICAgY29uc3QgcHJldmlvdXNTdGF0ZVZhbHVlID0gYXR0cmlidXRlRmlsdGVyU3FsRXhwck9iaj8ucGFydHM/LlswXT8udmFsdWVPcHRpb25zPy52YWx1ZVxuICAgIFxuICAgIC8vIENoZWNrIGlmIHRoaXMgaXMgZnJvbSB1c2VyIHR5cGluZyBvciBwcm9wIGNoYW5nZVxuICAgIGNvbnN0IGlzRnJvbVVzZXJUeXBpbmcgPSB0eXBlb2YgcHJldmlvdXNSZWZWYWx1ZSA9PT0gJ3N0cmluZycgJiYgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVvZiBzcWxPYmpWYWx1ZSA9PT0gJ29iamVjdCcgJiYgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFycmF5LmlzQXJyYXkoc3FsT2JqVmFsdWUpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNxbE9ialZhbHVlWzBdPy52YWx1ZSA9PT0gcHJldmlvdXNSZWZWYWx1ZVxuICAgIGNvbnN0IGlzRnJvbVByb3BDaGFuZ2UgPSBKU09OLnN0cmluZ2lmeShwcmV2aW91c1N0YXRlVmFsdWUpID09PSBKU09OLnN0cmluZ2lmeShzcWxPYmpWYWx1ZSlcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICBldmVudDogJ2hhbmRsZVNxbEV4cHJPYmpDaGFuZ2UtY2FsbGVkJyxcbiAgICAgIGNvbmZpZ0lkLFxuICAgICAgc3FsT2JqRXhpc3RzOiAhIXNxbE9iaixcbiAgICAgIGluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgaGFzaFRyaWdnZXJlZFJlZjogaGFzaFRyaWdnZXJlZFJlZi5jdXJyZW50LFxuICAgICAgc3FsT2JqVmFsdWUsXG4gICAgICBzcWxPYmpWYWx1ZVR5cGU6IHR5cGVvZiBzcWxPYmpWYWx1ZSxcbiAgICAgIHNxbE9iaklzQXJyYXk6IEFycmF5LmlzQXJyYXkoc3FsT2JqVmFsdWUpLFxuICAgICAgcHJldmlvdXNSZWZWYWx1ZSxcbiAgICAgIHByZXZpb3VzU3RhdGVWYWx1ZSxcbiAgICAgIGlzRnJvbVVzZXJUeXBpbmcsXG4gICAgICBpc0Zyb21Qcm9wQ2hhbmdlLFxuICAgICAgdHJpZ2dlclNvdXJjZTogaXNGcm9tVXNlclR5cGluZyA/ICd1c2VyLXR5cGluZycgOiAoaXNGcm9tUHJvcENoYW5nZSA/ICdwcm9wLWNoYW5nZScgOiAndW5rbm93bicpLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICBjb25zdCBmaXJzdFBhcnQgPSBzcWxPYmo/LnBhcnRzPy5bMF1cbiAgICBjb25zdCB2YWx1ZSA9IGZpcnN0UGFydD8udHlwZSA9PT0gJ1NJTkdMRScgPyAoZmlyc3RQYXJ0IGFzIGFueSkudmFsdWVPcHRpb25zPy52YWx1ZSA6ICdub3Qtc2luZ2xlJ1xuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgIGV2ZW50OiAnc3FsLWV4cHJlc3Npb24tY2hhbmdlZCcsXG4gICAgICBjb25maWdJZCxcbiAgICAgIHBhcnRzQ291bnQ6IHNxbE9iaj8ucGFydHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgZmlyc3RQYXJ0VmFsdWU6IHZhbHVlLFxuICAgICAgaGFzaFRyaWdnZXJlZFJlZlZhbHVlOiBoYXNoVHJpZ2dlcmVkUmVmLmN1cnJlbnQsXG4gICAgICBpbml0aWFsSW5wdXRWYWx1ZTogaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICBpc0FycmF5Rm9ybWF0OiBBcnJheS5pc0FycmF5KHZhbHVlKSxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgc2hvd0NsYXVzZU51bWJlci5jdXJyZW50ID0gZ2V0U2hvd25DbGF1c2VOdW1iZXJCeUV4cHJlc3Npb24oc3FsT2JqKVxuICAgIHNldEF0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmooc3FsT2JqKVxuICAgIFxuICAgIC8vIENoZWNrIGlmIHRoaXMgaXMgYSBoYXNoLXRyaWdnZXJlZCBjb252ZXJzaW9uIChzdHJpbmcgLT4gYXJyYXkpXG4gICAgLy8gV2hlbiBoYXNoIHZhbHVlIGNoYW5nZXMgZm9yIHNhbWUgY29uZmlnSWQsIFNxbEV4cHJlc3Npb25SdW50aW1lIGNvbnZlcnRzIHN0cmluZyB0byBhcnJheSBmb3JtYXRcbiAgICBpZiAoZmlyc3RQYXJ0Py50eXBlID09PSAnU0lOR0xFJyAmJiBmaXJzdFBhcnQ/LnZhbHVlT3B0aW9ucz8udmFsdWUpIHtcbiAgICAgIGNvbnN0IHZhbHVlID0gZmlyc3RQYXJ0LnZhbHVlT3B0aW9ucy52YWx1ZVxuICAgICAgY29uc3QgaXNBcnJheUZvcm1hdCA9IEFycmF5LmlzQXJyYXkodmFsdWUpXG4gICAgICBjb25zdCBoYXNJbml0aWFsVmFsdWUgPSBpbml0aWFsSW5wdXRWYWx1ZSAmJiBoYXNoVHJpZ2dlcmVkUmVmLmN1cnJlbnRcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgICBldmVudDogJ3NxbC1leHByZXNzaW9uLWNoYW5nZWQtY29udmVyc2lvbi1jaGVjaycsXG4gICAgICAgIGNvbmZpZ0lkLFxuICAgICAgICBpc0FycmF5Rm9ybWF0LFxuICAgICAgICBoYXNJbml0aWFsVmFsdWUsXG4gICAgICAgIGhhc2hUcmlnZ2VyZWRSZWZWYWx1ZTogaGFzaFRyaWdnZXJlZFJlZi5jdXJyZW50LFxuICAgICAgICBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgICAgdmFsdWVUeXBlOiB0eXBlb2YgdmFsdWUsXG4gICAgICAgIHZhbHVlOiBBcnJheS5pc0FycmF5KHZhbHVlKSA/IHZhbHVlIDogdmFsdWUsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgLy8gSWYgdmFsdWUgY29udmVydGVkIHRvIGFycmF5IGZvcm1hdCBBTkQgdGhpcyB3YXMgaGFzaC10cmlnZ2VyZWQsIGZpcmUgZXZlbnRcbiAgICAgIGlmIChpc0FycmF5Rm9ybWF0ICYmIGhhc0luaXRpYWxWYWx1ZSAmJiBpbml0aWFsSW5wdXRWYWx1ZSkge1xuICAgICAgICBjb25zdCBtYXRjaGVzSGFzaFZhbHVlID0gdmFsdWUubGVuZ3RoID4gMCAmJiB2YWx1ZVswXT8udmFsdWUgPT09IGluaXRpYWxJbnB1dFZhbHVlXG4gICAgICAgIFxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICAgICAgZXZlbnQ6ICdzcWwtZXhwcmVzc2lvbi1jaGFuZ2VkLW1hdGNoZXMtY2hlY2snLFxuICAgICAgICAgIGNvbmZpZ0lkLFxuICAgICAgICAgIG1hdGNoZXNIYXNoVmFsdWUsXG4gICAgICAgICAgaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICAgICAgY29udmVydGVkVmFsdWVGaXJzdEl0ZW06IHZhbHVlWzBdPy52YWx1ZSxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfSlcbiAgICAgICAgXG4gICAgICAgIGlmIChtYXRjaGVzSGFzaFZhbHVlKSB7XG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgICAgICAgZXZlbnQ6ICdoYXNoLXZhbHVlLWNvbnZlcnRlZC10by1hcnJheScsXG4gICAgICAgICAgICBjb25maWdJZCxcbiAgICAgICAgICAgIGluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgICAgICAgY29udmVydGVkVmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgfSlcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBGaXJlIGN1c3RvbSBldmVudCBmb3IgcXVlcnkgZXhlY3V0aW9uIHRvIHdhaXQgb25cbiAgICAgICAgICBjb25zdCBldmVudCA9IG5ldyBDdXN0b21FdmVudChRVUVSWVNJTVBMRV9IQVNIX1ZBTFVFX0NPTlZFUlRFRF9FVkVOVCwge1xuICAgICAgICAgICAgZGV0YWlsOiB7XG4gICAgICAgICAgICAgIGNvbmZpZ0lkLFxuICAgICAgICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgICAgICAgaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICAgICAgICAgIGNvbnZlcnRlZFZhbHVlOiB2YWx1ZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJ1YmJsZXM6IHRydWVcbiAgICAgICAgICB9KVxuICAgICAgICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQoZXZlbnQpXG4gICAgICAgICAgXG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgICAgICAgZXZlbnQ6ICdoYXNoLXZhbHVlLWNvbnZlcnRlZC1ldmVudC1kaXNwYXRjaGVkJyxcbiAgICAgICAgICAgIGNvbmZpZ0lkLFxuICAgICAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICB9KVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIEVYRUNVVElPTiBQT0lOVDogUXVlcnkgZXhlY3V0aW9uIGhhcHBlbnMgSEVSRSBhZnRlciBjb252ZXJzaW9uIGlzIGNvbmZpcm1lZFxuICAgICAgICAgIC8vIFRoaXMgaXMgdGhlIE9OTFkgcGxhY2Ugd2hlcmUgaGFzaC10cmlnZ2VyZWQgcXVlcmllcyBzaG91bGQgZXhlY3V0ZVxuICAgICAgICAgIC8vIFRoZSBldmVudCBRVUVSWVNJTVBMRV9IQVNIX1ZBTFVFX0NPTlZFUlRFRF9FVkVOVCBoYXMgYmVlbiBkaXNwYXRjaGVkIGFib3ZlXG4gICAgICAgICAgLy8gVGhpcyBkaXJlY3QgY2FsbCBoYW5kbGVzIHRoZSBjYXNlIHdoZXJlIGNvbnZlcnNpb24gaGFwcGVucyBzeW5jaHJvbm91c2x5XG4gICAgICAgICAgLy8gVGhlIGV2ZW50IGxpc3RlbmVyIGluIHF1ZXJ5LXRhc2sudHN4IGhhbmRsZXMgdGhlIGFzeW5jIGNhc2VcbiAgICAgICAgICBpZiAoaGFzaFRyaWdnZXJlZFJlZi5jdXJyZW50ICYmIGRhdGFzb3VyY2VSZWFkeSAmJiBvdXRwdXREUykge1xuICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgICAgICAgICBldmVudDogJ2hhc2gtdmFsdWUtY29udmVydGVkLWV4ZWN1dGluZy1xdWVyeS1kaXJlY3RseScsXG4gICAgICAgICAgICAgIGNvbmZpZ0lkLFxuICAgICAgICAgICAgICBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgICAgICAgICAgbm90ZTogJ0NvbnZlcnNpb24gY29tcGxldGUgLSBleGVjdXRpbmcgcXVlcnkgZGlyZWN0bHkgdmlhIGFwcGx5UXVlcnkgKGV2ZW50LWRyaXZlbiBwYXR0ZXJuKScsXG4gICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gVXNlIHNldFRpbWVvdXQgdG8gZW5zdXJlIHRoaXMgaGFwcGVucyBhZnRlciB0aGUgY3VycmVudCBldmVudCBsb29wXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgYXBwbHlRdWVyeSgpXG4gICAgICAgICAgICB9LCAwKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSwgW2NvbmZpZ0lkLCBpbml0aWFsSW5wdXRWYWx1ZSwgd2lkZ2V0SWQsIGRhdGFzb3VyY2VSZWFkeSwgb3V0cHV0RFMsIGFwcGx5UXVlcnldKVxuXG4gIGNvbnN0IGhhbmRsZVNwYXRpYWxGaWx0ZXJDaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjaygoZmlsdGVyOiBTcGF0aWFsRmlsdGVyT2JqKSA9PiB7XG4gICAgc3BhdGlhbEZpbHRlck9ialJlZi5jdXJyZW50ID0gZmlsdGVyXG4gIH0sIFtdKVxuXG4gIGNvbnN0IGhhbmRsZVJlbGF0aW9uQ2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soKHJlbDogU3BhdGlhbFJlbGF0aW9uKSA9PiB7XG4gICAgc3BhdGlhbFJlbGF0aW9uUmVmLmN1cnJlbnQgPSByZWxcbiAgfSwgW10pXG5cbiAgY29uc3QgaGFuZGxlQnVmZmVyQ2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soKGRpc3RhbmNlOiBudW1iZXIsIHVuaXQ6IFVuaXRUeXBlKSA9PiB7XG4gICAgYnVmZmVyUmVmLmN1cnJlbnQgPSB7IGRpc3RhbmNlLCB1bml0IH1cbiAgfSwgW10pXG5cbiAgY29uc3Qgc2hvd0F0dHJpYnV0ZUZpbHRlciA9IHVzZUF0dHJpYnV0ZUZpbHRlciAmJiBzcWxFeHByT2JqICE9IG51bGxcbiAgY29uc3Qgc2hvd1NwYXRpYWxGaWx0ZXIgPSBzcGF0aWFsRmlsdGVyRW5hYmxlZCAmJiB1c2VTcGF0aWFsRmlsdGVyICYmIChzcGF0aWFsRmlsdGVyVHlwZXMubGVuZ3RoID4gMCB8fCBzcGF0aWFsSW5jbHVkZVJ1bnRpbWVEYXRhIHx8IHNwYXRpYWxSZWxhdGlvblVzZURhdGFTb3VyY2VzPy5sZW5ndGggPiAwKVxuXG4gIC8vIERlYnVnIGxvZ2dpbmcgZm9yIGZvcm0gcmVuZGVyaW5nXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgZXZlbnQ6ICdmb3JtLXJlbmRlci1jaGVjaycsXG4gICAgICBjb25maWdJZCxcbiAgICAgIGRhdGFzb3VyY2VSZWFkeSxcbiAgICAgIHVzZUF0dHJpYnV0ZUZpbHRlcixcbiAgICAgIHNxbEV4cHJPYmo6IHNxbEV4cHJPYmogPyAnZXhpc3RzJyA6ICdudWxsJyxcbiAgICAgIHNxbEV4cHJPYmpQYXJ0czogc3FsRXhwck9iaj8ucGFydHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgc2hvd0F0dHJpYnV0ZUZpbHRlcixcbiAgICAgIG9yaWdpbkRTOiBvcmlnaW5EUyA/ICdleGlzdHMnIDogJ251bGwnLFxuICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFM/LmlkIHx8ICdub25lJyxcbiAgICAgIHNob3dTcGF0aWFsRmlsdGVyLFxuICAgICAgaXNBdXRvSGVpZ2h0LFxuICAgICAgb3V0cHV0RFM6IG91dHB1dERTID8gJ2V4aXN0cycgOiAnbnVsbCdcbiAgICB9KVxuICB9LCBbY29uZmlnSWQsIGRhdGFzb3VyY2VSZWFkeSwgdXNlQXR0cmlidXRlRmlsdGVyLCBzcWxFeHByT2JqLCBzaG93QXR0cmlidXRlRmlsdGVyLCBvcmlnaW5EUywgc2hvd1NwYXRpYWxGaWx0ZXIsIGlzQXV0b0hlaWdodCwgb3V0cHV0RFNdKVxuXG4gIC8vIExvZyB3aGVuIGZvcm0gY29udGVudCBzaG91bGQgcmVuZGVyXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHNob3dBdHRyaWJ1dGVGaWx0ZXIgJiYgb3JpZ2luRFMpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgICAgZXZlbnQ6ICdhdHRyaWJ1dGUtZmlsdGVyLXJlYWR5JyxcbiAgICAgICAgY29uZmlnSWQsXG4gICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICBzcWxFeHByT2JqUGFydHM6IHNxbEV4cHJPYmo/LnBhcnRzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgYXR0cmlidXRlRmlsdGVyTGFiZWwsXG4gICAgICAgIG5vdGU6ICdJbnB1dCBmaWVsZCBzaG91bGQgYmUgdmlzaWJsZSdcbiAgICAgIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgICAgZXZlbnQ6ICdhdHRyaWJ1dGUtZmlsdGVyLW5vdC1yZWFkeScsXG4gICAgICAgIGNvbmZpZ0lkLFxuICAgICAgICBzaG93QXR0cmlidXRlRmlsdGVyLFxuICAgICAgICBvcmlnaW5EUzogb3JpZ2luRFMgPyAnZXhpc3RzJyA6ICdudWxsJyxcbiAgICAgICAgdXNlQXR0cmlidXRlRmlsdGVyLFxuICAgICAgICBzcWxFeHByT2JqOiBzcWxFeHByT2JqID8gJ2V4aXN0cycgOiAnbnVsbCcsXG4gICAgICAgIHJlYXNvbjogIXNob3dBdHRyaWJ1dGVGaWx0ZXIgPyAnc2hvd0F0dHJpYnV0ZUZpbHRlciBpcyBmYWxzZScgOiAnb3JpZ2luRFMgaXMgbnVsbCdcbiAgICAgIH0pXG4gICAgfVxuICB9LCBbc2hvd0F0dHJpYnV0ZUZpbHRlciwgb3JpZ2luRFMsIGNvbmZpZ0lkLCBzcWxFeHByT2JqLCB1c2VBdHRyaWJ1dGVGaWx0ZXIsIGF0dHJpYnV0ZUZpbHRlckxhYmVsXSlcblxuICAvLyBDaGVjayBET00gdmlzaWJpbGl0eSBhZnRlciByZW5kZXJcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoZm9ybUNvbnRlbnRSZWYuY3VycmVudCkge1xuICAgICAgY29uc3QgY29tcHV0ZWRTdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGZvcm1Db250ZW50UmVmLmN1cnJlbnQpXG4gICAgICBjb25zdCByZWN0ID0gZm9ybUNvbnRlbnRSZWYuY3VycmVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICAgICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgICBldmVudDogJ2Zvcm0tY29udGVudC1kb20tY2hlY2snLFxuICAgICAgICBjb25maWdJZCxcbiAgICAgICAgZXhpc3RzOiAhIWZvcm1Db250ZW50UmVmLmN1cnJlbnQsXG4gICAgICAgIGRpc3BsYXk6IGNvbXB1dGVkU3R5bGUuZGlzcGxheSxcbiAgICAgICAgdmlzaWJpbGl0eTogY29tcHV0ZWRTdHlsZS52aXNpYmlsaXR5LFxuICAgICAgICBvcGFjaXR5OiBjb21wdXRlZFN0eWxlLm9wYWNpdHksXG4gICAgICAgIGhlaWdodDogY29tcHV0ZWRTdHlsZS5oZWlnaHQsXG4gICAgICAgIG1heEhlaWdodDogY29tcHV0ZWRTdHlsZS5tYXhIZWlnaHQsXG4gICAgICAgIGZsZXg6IGNvbXB1dGVkU3R5bGUuZmxleCxcbiAgICAgICAgZmxleEJhc2lzOiBjb21wdXRlZFN0eWxlLmZsZXhCYXNpcyxcbiAgICAgICAgcmVjdEhlaWdodDogcmVjdC5oZWlnaHQsXG4gICAgICAgIHJlY3RXaWR0aDogcmVjdC53aWR0aCxcbiAgICAgICAgaXNWaXNpYmxlOiByZWN0LmhlaWdodCA+IDAgJiYgcmVjdC53aWR0aCA+IDAsXG4gICAgICAgIHBhcmVudEhlaWdodDogZm9ybUNvbnRlbnRSZWYuY3VycmVudC5wYXJlbnRFbGVtZW50Py5jbGllbnRIZWlnaHQgfHwgMFxuICAgICAgfSlcbiAgICB9XG4gIH0sIFtjb25maWdJZCwgc2hvd0F0dHJpYnV0ZUZpbHRlciwgb3JpZ2luRFNdKVxuXG4gIC8vIExvZyB3aGVuIFNxbEV4cHJlc3Npb25SdW50aW1lIGtleSBjaGFuZ2VzIChjb21wb25lbnQgcmVtb3VudHMpIE9SIGV4cHJlc3Npb24gcHJvcCBjaGFuZ2VzXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3Qgc3FsRXhwclJ1bnRpbWVLZXkgPSBgJHtjb25maWdJZH0tJHtpbml0aWFsSW5wdXRWYWx1ZSB8fCAnbm9uZSd9YFxuICAgIGNvbnN0IGV4cHJlc3Npb25WYWx1ZSA9IGF0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmo/LnBhcnRzPy5bMF0/LnZhbHVlT3B0aW9ucz8udmFsdWVcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICBldmVudDogJ1NxbEV4cHJlc3Npb25SdW50aW1lLXByb3BzLWNoYW5nZWQnLFxuICAgICAgY29uZmlnSWQsXG4gICAgICBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgIHNxbEV4cHJSdW50aW1lS2V5LFxuICAgICAgZXhwcmVzc2lvblZhbHVlLFxuICAgICAgZXhwcmVzc2lvblZhbHVlVHlwZTogdHlwZW9mIGV4cHJlc3Npb25WYWx1ZSxcbiAgICAgIGlzQXJyYXk6IEFycmF5LmlzQXJyYXkoZXhwcmVzc2lvblZhbHVlKSxcbiAgICAgIGhhc2hUcmlnZ2VyZWRSZWY6IGhhc2hUcmlnZ2VyZWRSZWYuY3VycmVudCxcbiAgICAgIG9yaWdpbkRTRXhpc3RzOiAhIW9yaWdpbkRTLFxuICAgICAgbm90ZTogJ1NxbEV4cHJlc3Npb25SdW50aW1lIHJlY2VpdmluZyBuZXcgZXhwcmVzc2lvbiBwcm9wIC0gd2lsbCBpdCBmaXJlIG9uQ2hhbmdlPycsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICB9LCBbY29uZmlnSWQsIGluaXRpYWxJbnB1dFZhbHVlLCBhdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqLCBvcmlnaW5EU10pXG5cbiAgcmV0dXJuIChcbiAgICA8UXVlcnlUYXNrQ29udGV4dC5Qcm92aWRlciB2YWx1ZT17eyByZXNldFN5bWJvbCB9fT5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdxdWVyeS1mb3JtJyBjc3M9e2dldEZvcm1TdHlsZShpc0F1dG9IZWlnaHQpfT5cbiAgICAgICAgPGRpdiByZWY9e2Zvcm1Db250ZW50UmVmfSBjbGFzc05hbWU9J3F1ZXJ5LWZvcm1fX2NvbnRlbnQnIG9uS2V5RG93bj17aGFuZGxlS2V5RG93bn0+XG4gICAgICAgICAge3Nob3dBdHRyaWJ1dGVGaWx0ZXIgJiYgKFxuICAgICAgICAgICAgPGRpdiBcbiAgICAgICAgICAgICAgcm9sZT0nZ3JvdXAnIFxuICAgICAgICAgICAgICBjbGFzc05hbWU9J3B4LTQnIFxuICAgICAgICAgICAgICBjc3M9e2Nzc2BwYWRkaW5nLXRvcDogMnB4O2B9XG4gICAgICAgICAgICAgIGFyaWEtbGFiZWw9e2F0dHJpYnV0ZUZpbHRlckxhYmVsfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17Y2xhc3NOYW1lcygnZm9ybS10aXRsZSBkLWZsZXggYWxpZ24taXRlbXMtY2VudGVyJywgeyAnZC1ub25lJzogIWF0dHJpYnV0ZUZpbHRlckxhYmVsICYmICFhdHRyaWJ1dGVGaWx0ZXJEZXNjIH0pfSBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICBtYXJnaW4tdG9wOiAwO1xuICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDRweDtcbiAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAge2F0dHJpYnV0ZUZpbHRlckxhYmVsICYmIDxkaXYgY2xhc3NOYW1lPSdtci0yIHRpdGxlMic+e2F0dHJpYnV0ZUZpbHRlckxhYmVsfTwvZGl2Pn1cbiAgICAgICAgICAgICAgICB7YXR0cmlidXRlRmlsdGVyRGVzYyAmJiAoXG4gICAgICAgICAgICAgICAgICA8VG9vbHRpcCBwbGFjZW1lbnQ9J2JvdHRvbScgY3NzPXtjc3Ngd2hpdGUtc3BhY2U6IHByZS1saW5lO2B9IHRpdGxlPXthdHRyaWJ1dGVGaWx0ZXJEZXNjfT5cbiAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiBzaXplPSdzbScgaWNvbiB0eXBlPSd0ZXJ0aWFyeSc+PEluZm9PdXRsaW5lZCBjb2xvcj0ndmFyKC0tc3lzLWNvbG9yLXByaW1hcnktbWFpbiknIHNpemU9J3MnLz48L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAge29yaWdpbkRTICYmIChcbiAgICAgICAgICAgICAgICA8ZGl2IGNzcz17Y3NzYG1hcmdpbjogLTEwcHggMHB4O2B9PlxuICAgICAgICAgICAgICAgICAgPFNxbEV4cHJlc3Npb25SdW50aW1lXG4gICAgICAgICAgICAgICAgICAgIGtleT17YCR7Y29uZmlnSWR9LSR7aW5pdGlhbElucHV0VmFsdWUgfHwgJ25vbmUnfWB9XG4gICAgICAgICAgICAgICAgICAgIHdpZGdldElkPXt3aWRnZXRJZH1cbiAgICAgICAgICAgICAgICAgICAgZGF0YVNvdXJjZT17b3JpZ2luRFN9XG4gICAgICAgICAgICAgICAgICAgIGV4cHJlc3Npb249e2F0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmp9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVTcWxFeHByT2JqQ2hhbmdlfVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICl9XG4gICAgICAgICAge3Nob3dBdHRyaWJ1dGVGaWx0ZXIgJiYgc2hvd1NwYXRpYWxGaWx0ZXIgJiYgKFxuICAgICAgICAgICAgPGhyIGNsYXNzTmFtZT0nbS00JyBjc3M9e2Nzc2Bib3JkZXI6IG5vbmU7IGhlaWdodDogMXB4OyBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1zeXMtY29sb3ItZGl2aWRlci1zZWNvbmRhcnkpO2B9Lz5cbiAgICAgICAgICApfVxuICAgICAgICAgIHtzaG93U3BhdGlhbEZpbHRlciAmJiAoXG4gICAgICAgICAgICA8UXVlcnlUYXNrU3BhdGlhbEZvcm1cbiAgICAgICAgICAgICAgd2lkZ2V0SWQ9e3dpZGdldElkfVxuICAgICAgICAgICAgICBsYWJlbD17c3BhdGlhbEZpbHRlckxhYmVsfVxuICAgICAgICAgICAgICBkZXNjPXtzcGF0aWFsRmlsdGVyRGVzY31cbiAgICAgICAgICAgICAgZmlsdGVyVHlwZXM9e3NwYXRpYWxGaWx0ZXJUeXBlc31cbiAgICAgICAgICAgICAgbWFwV2lkZ2V0SWRzPXtzcGF0aWFsTWFwV2lkZ2V0SWRzfVxuICAgICAgICAgICAgICBjcmVhdGVUb29sVHlwZXM9e3NwYXRpYWxJbnRlcmFjdGl2ZUNyZWF0ZVRvb2xUeXBlc31cbiAgICAgICAgICAgICAgb25GaWx0ZXJDaGFuZ2U9e2hhbmRsZVNwYXRpYWxGaWx0ZXJDaGFuZ2V9XG4gICAgICAgICAgICAgIG9uUmVsYXRpb25DaGFuZ2U9e2hhbmRsZVJlbGF0aW9uQ2hhbmdlfVxuICAgICAgICAgICAgICBvbkJ1ZmZlckNoYW5nZT17aGFuZGxlQnVmZmVyQ2hhbmdlfVxuICAgICAgICAgICAgICBzcGF0aWFsUmVsYXRpb25zPXtzcGF0aWFsUmVsYXRpb25zfVxuICAgICAgICAgICAgICBkc0VuYWJsZUJ1ZmZlcj17c3BhdGlhbFJlbGF0aW9uRW5hYmxlQnVmZmVyfVxuICAgICAgICAgICAgICBkc0J1ZmZlckRpc3RhbmNlPXtzcGF0aWFsUmVsYXRpb25CdWZmZXJEaXN0YW5jZX1cbiAgICAgICAgICAgICAgZHNCdWZmZXJVbml0PXtzcGF0aWFsUmVsYXRpb25CdWZmZXJVbml0fVxuICAgICAgICAgICAgICBkcmF3RW5hYmxlQnVmZmVyPXtzcGF0aWFsSW50ZXJhY3RpdmVFbmFibGVCdWZmZXJ9XG4gICAgICAgICAgICAgIGRyYXdCdWZmZXJEaXN0YW5jZT17c3BhdGlhbEludGVyYWN0aXZlQnVmZmVyRGlzdGFuY2V9XG4gICAgICAgICAgICAgIGRyYXdCdWZmZXJVbml0PXtzcGF0aWFsSW50ZXJhY3RpdmVCdWZmZXJVbml0fVxuICAgICAgICAgICAgICB1c2VEYXRhU291cmNlcz17c3BhdGlhbFJlbGF0aW9uVXNlRGF0YVNvdXJjZXN9XG4gICAgICAgICAgICAgIHVzZVJ1bnRpbWVEYXRhPXtzcGF0aWFsSW5jbHVkZVJ1bnRpbWVEYXRhfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J3F1ZXJ5LWZvcm1fX2FjdGlvbnMgcHgtNCBkLWZsZXggYWxpZ24taXRlbXMtY2VudGVyJz5cbiAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgIGNoZWNrZWQ9e3J1bnRpbWVab29tVG9TZWxlY3RlZH1cbiAgICAgICAgICAgIG9uQ2hhbmdlPXsoXywgY2hlY2tlZCkgPT4gc2V0UnVudGltZVpvb21Ub1NlbGVjdGVkKGNoZWNrZWQpfVxuICAgICAgICAgICAgY2xhc3NOYW1lPSdtci0yJ1xuICAgICAgICAgIC8+XG4gICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSdtci1hdXRvJyBjc3M9e2Nzc2Bmb250LXNpemU6IDAuODc1cmVtOyBjb2xvcjogdmFyKC0tc3lzLWNvbG9yLXRleHQtcHJpbWFyeSk7YH0+XG4gICAgICAgICAgICB7Z2V0STE4bk1lc3NhZ2UoJ3pvb21Ub1NlbGVjdGVkJyl9XG4gICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgIDxCdXR0b24gcmVmPXthcHBseUJ1dHRvblJlZn0gY29sb3I9J3ByaW1hcnknIGNsYXNzTmFtZT0nbWwtYXV0bycgZGlzYWJsZWQ9eyFkYXRhc291cmNlUmVhZHkgfHwgIWlzSW5wdXRWYWxpZH0gb25DbGljaz17YXBwbHlRdWVyeX0+XG4gICAgICAgICAgICB7Z2V0STE4bk1lc3NhZ2UoJ2FwcGx5Jyl9XG4gICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgeyhzaG93Q2xhdXNlTnVtYmVyLmN1cnJlbnQgPiAwIHx8IHNob3dTcGF0aWFsRmlsdGVyKSAmJiAoXG4gICAgICAgICAgICA8QnV0dG9uIGNsYXNzTmFtZT0nbWwtMicgb25DbGljaz17cmVzZXRRdWVyeX0+e2dldEkxOG5NZXNzYWdlKCdyZXNldCcpfTwvQnV0dG9uPlxuICAgICAgICAgICl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9RdWVyeVRhc2tDb250ZXh0LlByb3ZpZGVyPlxuICApXG59XG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7IGpzeCwgY3NzLCB0eXBlIEljb25SZXN1bHQsIHR5cGUgSW1tdXRhYmxlT2JqZWN0IH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgSWNvbiB9IGZyb20gJ2ppbXUtdWknXG5cbmludGVyZmFjZSBDb250ZW50UHJvcHMge1xuICBpY29uPzogSWNvblJlc3VsdCB8IEltbXV0YWJsZU9iamVjdDxJY29uUmVzdWx0PlxuICBuYW1lOiBzdHJpbmdcbn1cblxuY29uc3QgdGV4dFN0eWxlID0gY3NzYFxuICBmb250LXdlaWdodDogNTAwO1xuICBmb250LXNpemU6IDAuODc1cmVtO1xuYFxuXG5leHBvcnQgZnVuY3Rpb24gUXVlcnlUYXNrTGFiZWwgKHByb3BzOiBDb250ZW50UHJvcHMpIHtcbiAgY29uc3QgeyBpY29uLCBuYW1lIH0gPSBwcm9wc1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9J2QtZmxleCBhbGlnbi1pdGVtcy1jZW50ZXIgdGV4dC10cnVuY2F0ZScgY3NzPXt0ZXh0U3R5bGV9PlxuICAgICAge2ljb24gJiYgPEljb24gY2xhc3NOYW1lPSdxdWVyeS10YXNrLWljb24gbXItMicgaWNvbj17aWNvbi5zdmd9IC8+fVxuICAgICAgPGRpdiBjbGFzc05hbWU9J3RleHQtdHJ1bmNhdGUnIHRpdGxlPXtuYW1lfT5cbiAgICAgICAge25hbWV9XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKVxufVxuXG5cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHsganN4LCBjc3MsIFJlYWN0LCB0eXBlIEltbXV0YWJsZUFycmF5LCBjbGFzc05hbWVzLCBsb2Rhc2gsIGhvb2tzIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHR5cGUgeyBTaXplIH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB0eXBlIHsgUXVlcnlJdGVtVHlwZSB9IGZyb20gJy4uL2NvbmZpZydcbmltcG9ydCB7IFF1ZXJ5VGFzayB9IGZyb20gJy4vcXVlcnktdGFzaydcbmltcG9ydCB7IFF1ZXJ5VGFza0xpc3QgfSBmcm9tICcuL3F1ZXJ5LXRhc2stbGlzdCdcbmltcG9ydCB7IFRhc2tMaXN0UG9wcGVyV3JhcHBlciB9IGZyb20gJy4vcXVlcnktdGFzay1saXN0LXBvcHBlci13cmFwcGVyJ1xuaW1wb3J0IHsgZ2V0V2lkZ2V0UnVudGltZURhdGFNYXAgfSBmcm9tICcuL3dpZGdldC1jb25maWcnXG5pbXBvcnQgeyBERUZBVUxUX1FVRVJZX0lURU0gfSBmcm9tICcuLi9kZWZhdWx0LXF1ZXJ5LWl0ZW0nXG5cbmNvbnN0IHsgaWNvbk1hcCB9ID0gZ2V0V2lkZ2V0UnVudGltZURhdGFNYXAoKVxuXG5leHBvcnQgaW50ZXJmYWNlIFF1ZXJ5VGFza0xpc3RQcm9wcyB7XG4gIHdpZGdldElkOiBzdHJpbmdcbiAgd2lkZ2V0TGFiZWw6IHN0cmluZ1xuICB3cmFwOiBib29sZWFuXG4gIG1pblNpemU6IFNpemVcbiAgZGVmYXVsdFNpemU6IFNpemVcbiAgcXVlcnlJdGVtczogSW1tdXRhYmxlQXJyYXk8UXVlcnlJdGVtVHlwZT5cbiAgZGVmYXVsdFBhZ2VTaXplPzogbnVtYmVyXG4gIGluaXRpYWxRdWVyeVZhbHVlPzogeyBzaG9ydElkOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcgfVxuICBvbkhhc2hQYXJhbWV0ZXJVc2VkPzogKHNob3J0SWQ6IHN0cmluZykgPT4gdm9pZFxufVxuXG5jb25zdCBTUEFDRSA9IDhcblxuY29uc3Qgc3R5bGUgPSBjc3NgXG4gID4gZGl2IHtcbiAgICBtYXJnaW4tcmlnaHQ6IDhweDtcbiAgfVxuYFxuXG4vLyBzaG93IHRhc2sgbGFiZWwgYW5kIGFuIGFycm93IHRvIHRoZSB0YXNrIGNvbnRlbnRcbmV4cG9ydCBmdW5jdGlvbiBUYXNrTGlzdElubGluZSAocHJvcHM6IFF1ZXJ5VGFza0xpc3RQcm9wcykge1xuICBjb25zdCB7IHF1ZXJ5SXRlbXMsIHdpZGdldElkLCBtaW5TaXplLCBkZWZhdWx0U2l6ZSwgZGVmYXVsdFBhZ2VTaXplLCB3aWRnZXRMYWJlbCwgd3JhcCA9IGZhbHNlIH0gPSBwcm9wc1xuICBjb25zdCBjb250YWluZXJSZWYgPSBSZWFjdC51c2VSZWY8SFRNTERpdkVsZW1lbnQ+KHVuZGVmaW5lZClcbiAgY29uc3QgY29udGFpbmVyV2lkdGhSZWYgPSBSZWFjdC51c2VSZWY8bnVtYmVyPigwKVxuICBjb25zdCBjb250ZW50V2lkdGhSZWYgPSBSZWFjdC51c2VSZWY8eyBba2V5OiBzdHJpbmddOiBudW1iZXIgfT4oe30pXG4gIGNvbnN0IFtudW1PZkV4cGFuZGVkLCBzZXROdW1PZkV4cGFuZGVkXSA9IFJlYWN0LnVzZVN0YXRlKHF1ZXJ5SXRlbXMubGVuZ3RoKVxuICBjb25zdCBbb3BlbmVkUG9wcGVyLCBzZXRPcGVuZWRQb3BwZXJdID0gUmVhY3QudXNlU3RhdGUoLTEpXG4gIGNvbnN0IHJlc2l6ZU9ic2VydmVyUmVmID0gUmVhY3QudXNlUmVmPFJlc2l6ZU9ic2VydmVyPihudWxsKVxuXG4gIGNvbnN0IGFkanVzdENvbnRlbnQgPSBSZWFjdC51c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgbGV0IHRvdGFsID0gMFxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtT2ZFeHBhbmRlZDsgaSsrKSB7XG4gICAgICBjb25zdCBpdGVtID0gcXVlcnlJdGVtc1tpXVxuICAgICAgY29uc3QgaXRlbVdpZHRoID0gY29udGVudFdpZHRoUmVmLmN1cnJlbnRbaXRlbS5jb25maWdJZF1cbiAgICAgIGlmIChpdGVtV2lkdGggPiAwKSB7XG4gICAgICAgIHRvdGFsICs9IGl0ZW1XaWR0aCArIFNQQUNFXG4gICAgICAgIGlmICh0b3RhbCA+PSBjb250YWluZXJXaWR0aFJlZi5jdXJyZW50ICYmIG51bU9mRXhwYW5kZWQgIT09IGkpIHtcbiAgICAgICAgICBzZXROdW1PZkV4cGFuZGVkKGkpXG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAvLyBjb250ZW50IHdpZHRoIG5vdCByZWFkeVxuICAgICAgfVxuICAgIH1cbiAgICBzZXROdW1PZkV4cGFuZGVkKHF1ZXJ5SXRlbXMubGVuZ3RoKVxuICB9LCBbbnVtT2ZFeHBhbmRlZCwgcXVlcnlJdGVtc10pXG5cbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAocmVzaXplT2JzZXJ2ZXJSZWYuY3VycmVudCkge1xuICAgICAgcmVzaXplT2JzZXJ2ZXJSZWYuY3VycmVudC5kaXNjb25uZWN0KClcbiAgICB9XG4gICAgLy8gYmluZCB3aXRoIHRoZSBuZXcgZXZlbnQgaGFuZGxlclxuICAgIHJlc2l6ZU9ic2VydmVyUmVmLmN1cnJlbnQgPSBuZXcgUmVzaXplT2JzZXJ2ZXIobG9kYXNoLnRocm90dGxlKChlbnRyaWVzKSA9PiB7XG4gICAgICBjb25zdCB3aWR0aCA9IE1hdGgucm91bmQoZW50cmllc1swXS5jb250ZW50UmVjdC53aWR0aClcbiAgICAgIGlmIChjb250YWluZXJXaWR0aFJlZi5jdXJyZW50ICE9PSB3aWR0aCkge1xuICAgICAgICBjb250YWluZXJXaWR0aFJlZi5jdXJyZW50ID0gd2lkdGhcbiAgICAgICAgYWRqdXN0Q29udGVudCgpXG4gICAgICB9XG4gICAgfSwgMjAwKSlcbiAgICByZXNpemVPYnNlcnZlclJlZi5jdXJyZW50Lm9ic2VydmUoY29udGFpbmVyUmVmLmN1cnJlbnQpXG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgcmVzaXplT2JzZXJ2ZXJSZWYuY3VycmVudC5kaXNjb25uZWN0KClcbiAgICB9XG4gIH0sIFthZGp1c3RDb250ZW50XSlcblxuICBob29rcy51c2VFZmZlY3RPbmNlKCgpID0+IHtcbiAgICBjb250YWluZXJXaWR0aFJlZi5jdXJyZW50ID0gY29udGFpbmVyUmVmLmN1cnJlbnQ/LmNsaWVudFdpZHRoXG4gICAgYWRqdXN0Q29udGVudCgpXG4gIH0pXG5cbiAgY29uc3QgaGFuZGxlSXRlbVdpZHRoQ2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soKGluZGV4OiBudW1iZXIsIHdpZHRoOiBudW1iZXIpID0+IHtcbiAgICBjb25zdCBxdWVyeUl0ZW0gPSBxdWVyeUl0ZW1zW2luZGV4XVxuICAgIGlmIChjb250ZW50V2lkdGhSZWYuY3VycmVudFtxdWVyeUl0ZW0uY29uZmlnSWRdICE9PSB3aWR0aCkge1xuICAgICAgY29udGVudFdpZHRoUmVmLmN1cnJlbnRbcXVlcnlJdGVtLmNvbmZpZ0lkXSA9IHdpZHRoXG4gICAgICBhZGp1c3RDb250ZW50KClcbiAgICB9XG4gIH0sIFtxdWVyeUl0ZW1zLCBhZGp1c3RDb250ZW50XSlcblxuICBjb25zdCBoYW5kbGVQb3BwZXJPcGVuZWRDaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjaygoaW5kZXg6IG51bWJlciwgaXNPcGVuOiBib29sZWFuKSA9PiB7XG4gICAgaWYgKGlzT3Blbikge1xuICAgICAgc2V0T3BlbmVkUG9wcGVyKGluZGV4KVxuICAgIH0gZWxzZSBpZiAoaW5kZXggPT09IG9wZW5lZFBvcHBlcikge1xuICAgICAgLy8gY3VycmVudCBwb3BwZXIgaXMgY2xvc2VkXG4gICAgICBzZXRPcGVuZWRQb3BwZXIoLTEpXG4gICAgfVxuICB9LCBbb3BlbmVkUG9wcGVyXSlcblxuICBjb25zdCBbZXhwYW5kZWRBcnJheSwgbm9uRXhwYW5kZWRBcnJheV0gPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICBjb25zdCBleHBhbmRlZEFycmF5ID0gW11cbiAgICBjb25zdCBub25FeHBhbmRlZEFycmF5ID0gW11cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHF1ZXJ5SXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChpIDwgbnVtT2ZFeHBhbmRlZCkge1xuICAgICAgICBleHBhbmRlZEFycmF5LnB1c2gocXVlcnlJdGVtc1tpXSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5vbkV4cGFuZGVkQXJyYXkucHVzaChxdWVyeUl0ZW1zW2ldKVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gW2V4cGFuZGVkQXJyYXksIG5vbkV4cGFuZGVkQXJyYXldXG4gIH0sIFtxdWVyeUl0ZW1zLCBudW1PZkV4cGFuZGVkXSlcblxuICByZXR1cm4gKFxuICAgIDxkaXYgcmVmPXtjb250YWluZXJSZWZ9IGNzcz17c3R5bGV9IGNsYXNzTmFtZT17Y2xhc3NOYW1lcygncnVudGltZS1xdWVyeV9fcXVlcnktbGlzdCBoLTEwMCBkLWZsZXgnLCB7ICdmbGV4LXdyYXAnOiB3cmFwLCAnYWxpZ24tY29udGVudC1zdGFydCc6IHdyYXAgfSl9PlxuICAgICAge2V4cGFuZGVkQXJyYXkubWFwKChxdWVyeUl0ZW0sIGluZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRJdGVtID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9RVUVSWV9JVEVNLCBxdWVyeUl0ZW0pXG4gICAgICAgIHJldHVybiA8VGFza0xpc3RQb3BwZXJXcmFwcGVyXG4gICAgICAgICAgaWQ9e2luZGV4fVxuICAgICAgICAgIGtleT17Y3VycmVudEl0ZW0uY29uZmlnSWR9XG4gICAgICAgICAgaWNvbj17Y3VycmVudEl0ZW0uaWNvbn1cbiAgICAgICAgICBidXR0b25UeXBlPSdkZWZhdWx0J1xuICAgICAgICAgIGxhYmVsPXtjdXJyZW50SXRlbS5kaXNwbGF5TGFiZWwgPyBjdXJyZW50SXRlbS5uYW1lIDogdW5kZWZpbmVkfVxuICAgICAgICAgIHBvcHBlclRpdGxlPXtjdXJyZW50SXRlbS5uYW1lfVxuICAgICAgICAgIG9uV2lkdGhDaGFuZ2U9e2hhbmRsZUl0ZW1XaWR0aENoYW5nZX1cbiAgICAgICAgICBtaW5TaXplPXttaW5TaXplfVxuICAgICAgICAgIGRlZmF1bHRTaXplPXtkZWZhdWx0U2l6ZX1cbiAgICAgICAgICBvbk9wZW5lZENoYW5nZT17aGFuZGxlUG9wcGVyT3BlbmVkQ2hhbmdlfVxuICAgICAgICAgIGZvcmNlQ2xvc2U9e29wZW5lZFBvcHBlciA+PSAwICYmIG9wZW5lZFBvcHBlciAhPT0gaW5kZXh9XG4gICAgICAgID5cbiAgICAgICAgICA8UXVlcnlUYXNrXG4gICAgICAgICAgICB3aWRnZXRJZD17d2lkZ2V0SWR9XG4gICAgICAgICAgICBpbmRleD17aW5kZXh9XG4gICAgICAgICAgICB0b3RhbD17MX1cbiAgICAgICAgICAgIGlzSW5Qb3BwZXJcbiAgICAgICAgICAgIHF1ZXJ5SXRlbT17Y3VycmVudEl0ZW19XG4gICAgICAgICAgICB3cmFwcGVkSW5Qb3BwZXI9e3RydWV9XG4gICAgICAgICAgICBjbGFzc05hbWU9J3BiLTQnXG4gICAgICAgICAgICBkZWZhdWx0UGFnZVNpemU9e2RlZmF1bHRQYWdlU2l6ZX1cbiAgICAgICAgICAgIGluaXRpYWxJbnB1dFZhbHVlPXtjdXJyZW50SXRlbS5zaG9ydElkID09PSBwcm9wcy5pbml0aWFsUXVlcnlWYWx1ZT8uc2hvcnRJZCA/IHByb3BzLmluaXRpYWxRdWVyeVZhbHVlLnZhbHVlIDogdW5kZWZpbmVkfVxuICAgICAgICAgICAgb25IYXNoUGFyYW1ldGVyVXNlZD17cHJvcHMub25IYXNoUGFyYW1ldGVyVXNlZH1cbiAgICAgICAgICAgIHF1ZXJ5SXRlbVNob3J0SWQ9e2N1cnJlbnRJdGVtLnNob3J0SWR9XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9UYXNrTGlzdFBvcHBlcldyYXBwZXI+XG4gICAgICB9KX1cblxuICAgICAge25vbkV4cGFuZGVkQXJyYXkubGVuZ3RoID4gMCAmJiAoXG4gICAgICAgIDxUYXNrTGlzdFBvcHBlcldyYXBwZXJcbiAgICAgICAgICBpZD17ZXhwYW5kZWRBcnJheS5sZW5ndGggKyAxfVxuICAgICAgICAgIGljb249e2ljb25NYXAuaWNvbk1vcmV9XG4gICAgICAgICAgbWluU2l6ZT17bWluU2l6ZX1cbiAgICAgICAgICBidXR0b25UeXBlPSdkZWZhdWx0J1xuICAgICAgICAgIHBvcHBlclRpdGxlPXt3aWRnZXRMYWJlbH1cbiAgICAgICAgICBkZWZhdWx0U2l6ZT17ZGVmYXVsdFNpemV9XG4gICAgICAgICAgb25PcGVuZWRDaGFuZ2U9e2hhbmRsZVBvcHBlck9wZW5lZENoYW5nZX1cbiAgICAgICAgICBmb3JjZUNsb3NlPXtvcGVuZWRQb3BwZXIgPj0gMCAmJiBvcGVuZWRQb3BwZXIgIT09IGV4cGFuZGVkQXJyYXkubGVuZ3RoICsgMX1cbiAgICAgICAgPlxuICAgICAgICAgIDxRdWVyeVRhc2tMaXN0IHdpZGdldElkPXt3aWRnZXRJZH0gaXNJblBvcHBlciBkZWZhdWx0UGFnZVNpemU9e2RlZmF1bHRQYWdlU2l6ZX0gcXVlcnlJdGVtcz17bm9uRXhwYW5kZWRBcnJheSBhcyBhbnl9IGNsYXNzTmFtZT0ncGItNCcgaW5pdGlhbFF1ZXJ5VmFsdWU9e3Byb3BzLmluaXRpYWxRdWVyeVZhbHVlfSBvbkhhc2hQYXJhbWV0ZXJVc2VkPXtwcm9wcy5vbkhhc2hQYXJhbWV0ZXJVc2VkfSAvPlxuICAgICAgICA8L1Rhc2tMaXN0UG9wcGVyV3JhcHBlcj5cbiAgICAgICl9XG4gICAgPC9kaXY+XG4gIClcbn1cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHsganN4LCBjc3MsIFJlYWN0LCB0eXBlIEljb25SZXN1bHQsIHR5cGUgSW1tdXRhYmxlT2JqZWN0LCBsb2Rhc2gsIGNsYXNzTmFtZXMsIGhvb2tzLCBpc0tleWJvYXJkTW9kZSwgZm9jdXNFbGVtZW50SW5LZXlib2FyZE1vZGUgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBCdXR0b24sIEljb24sIE1vYmlsZVBhbmVsLCB0eXBlIFNpemUsIHR5cGUgQnV0dG9uVHlwZSwgRk9DVVNBQkxFX0NPTlRBSU5FUl9DTEFTUywgRmxvYXRpbmdQYW5lbCwgdHlwZSBTaGlmdE9wdGlvbnMgfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHsgV0lER0VUX1ZFUlNJT04gfSBmcm9tICcuLi92ZXJzaW9uJ1xuXG5leHBvcnQgaW50ZXJmYWNlIFRhc2tMaXN0UG9wcGVyV3JhcHBlclByb3BzIHtcbiAgaWQ6IG51bWJlclxuICBpY29uPzogc3RyaW5nIHwgSW1tdXRhYmxlT2JqZWN0PEljb25SZXN1bHQ+XG4gIGxhYmVsPzogc3RyaW5nXG4gIGZvcmNlQ2xvc2U/OiBib29sZWFuXG4gIHBvcHBlclRpdGxlPzogc3RyaW5nXG4gIGJ1dHRvblR5cGU/OiBCdXR0b25UeXBlXG4gIG9uV2lkdGhDaGFuZ2U/OiAoaWQ6IG51bWJlciwgd2lkdGg6IG51bWJlcikgPT4gdm9pZFxuICBvbk9wZW5lZENoYW5nZT86IChpZDogbnVtYmVyLCBpc09wZW46IGJvb2xlYW4pID0+IHZvaWRcbiAgbWluU2l6ZTogU2l6ZVxuICBkZWZhdWx0U2l6ZTogU2l6ZVxuICBjaGlsZHJlbjogUmVhY3QuUmVhY3RFbGVtZW50PGFueT5cbn1cblxuY29uc3Qgc2hpZnRPcHRpb25zOiBTaGlmdE9wdGlvbnMgPSB7IHBhZGRpbmc6IDEgfVxuXG5leHBvcnQgZnVuY3Rpb24gVGFza0xpc3RQb3BwZXJXcmFwcGVyIChwcm9wczogVGFza0xpc3RQb3BwZXJXcmFwcGVyUHJvcHMpIHtcbiAgY29uc3QgeyBpZCwgaWNvbiwgbGFiZWwsIGZvcmNlQ2xvc2UsIG9uT3BlbmVkQ2hhbmdlLCBwb3BwZXJUaXRsZSwgbWluU2l6ZSwgZGVmYXVsdFNpemUsIG9uV2lkdGhDaGFuZ2UsIGJ1dHRvblR5cGUgPSAndGVydGlhcnknLCBjaGlsZHJlbiB9ID0gcHJvcHNcbiAgY29uc3QgaWNvblJlZiA9IFJlYWN0LnVzZVJlZjxIVE1MQnV0dG9uRWxlbWVudD4odW5kZWZpbmVkKVxuICBjb25zdCB3aWR0aFJlZiA9IFJlYWN0LnVzZVJlZigwKVxuICBjb25zdCBbaXNPcGVuLCBzZXRJc09wZW5dID0gUmVhY3QudXNlU3RhdGUoZmFsc2UpXG4gIGNvbnN0IFtwb3BwZXJWZXJzaW9uLCBzZXRQb3BwZXJWZXJzaW9uXSA9IFJlYWN0LnVzZVN0YXRlKDApXG4gIGNvbnN0IGlzTW9iaWxlID0gaG9va3MudXNlQ2hlY2tTbWFsbEJyb3dzZXJTaXplTW9kZSgpXG5cbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoZm9yY2VDbG9zZSkge1xuICAgICAgc2V0SXNPcGVuKGZhbHNlKVxuICAgIH1cbiAgfSwgW2ZvcmNlQ2xvc2VdKVxuXG4gIGhvb2tzLnVzZUVmZmVjdE9uY2UoKCkgPT4ge1xuICAgIGlmICh0eXBlb2Ygb25XaWR0aENoYW5nZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgd2lkdGhSZWYuY3VycmVudCA9IE1hdGgucm91bmQoaWNvblJlZi5jdXJyZW50LmNsaWVudFdpZHRoKVxuICAgICAgb25XaWR0aENoYW5nZShpZCwgd2lkdGhSZWYuY3VycmVudClcbiAgICAgIGNvbnN0IHJlc2l6ZU9ic2VydmVyID0gbmV3IFJlc2l6ZU9ic2VydmVyKGxvZGFzaC50aHJvdHRsZSgoZW50cmllcykgPT4ge1xuICAgICAgICBjb25zdCB3aWR0aCA9IE1hdGgucm91bmQoZW50cmllc1swXS5jb250ZW50UmVjdC53aWR0aClcbiAgICAgICAgaWYgKHdpZHRoUmVmLmN1cnJlbnQgIT09IHdpZHRoKSB7XG4gICAgICAgICAgd2lkdGhSZWYuY3VycmVudCA9IHdpZHRoXG4gICAgICAgICAgb25XaWR0aENoYW5nZShpZCwgd2lkdGgpXG4gICAgICAgIH1cbiAgICAgIH0sIDIwMCkpXG4gICAgICByZXNpemVPYnNlcnZlci5vYnNlcnZlKGljb25SZWYuY3VycmVudClcblxuICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgcmVzaXplT2JzZXJ2ZXIuZGlzY29ubmVjdCgpXG4gICAgICB9XG4gICAgfVxuICB9KVxuXG4gIGNvbnN0IHRvZ2dsZVBvcHBlciA9IFJlYWN0LnVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBpZiAodHlwZW9mIG9uT3BlbmVkQ2hhbmdlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBvbk9wZW5lZENoYW5nZShpZCwgIWlzT3BlbilcbiAgICB9XG4gICAgc2V0SXNPcGVuKCFpc09wZW4pXG4gICAgc2V0UG9wcGVyVmVyc2lvbihwb3BwZXJWZXJzaW9uICsgMSlcbiAgICBpZiAoaXNPcGVuKSB7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgaWYgKGlzS2V5Ym9hcmRNb2RlKCkpIHtcbiAgICAgICAgICBmb2N1c0VsZW1lbnRJbktleWJvYXJkTW9kZShpY29uUmVmLmN1cnJlbnQpXG4gICAgICAgIH1cbiAgICAgIH0sIDIwMClcbiAgICB9XG4gIH0sIFtpZCwgaXNPcGVuLCBwb3BwZXJWZXJzaW9uLCBvbk9wZW5lZENoYW5nZV0pXG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT0ncnVudGltZS1xdWVyeV9fd2lkZ2V0LXBvcHBlcic+XG4gICAgICA8QnV0dG9uXG4gICAgICAgIHRpdGxlPXtsYWJlbH1cbiAgICAgICAgYXJpYS1sYWJlbD17bGFiZWx9XG4gICAgICAgIGljb24gc2l6ZT0nc20nXG4gICAgICAgIHZhcmlhbnQ9e2J1dHRvblR5cGUgPT09ICd0ZXJ0aWFyeScgPyAndGV4dCcgOiB1bmRlZmluZWR9XG4gICAgICAgIGNvbG9yPXtidXR0b25UeXBlID09PSAndGVydGlhcnknID8gJ2luaGVyaXQnIDogdW5kZWZpbmVkfVxuICAgICAgICB0eXBlPXtidXR0b25UeXBlID09PSAndGVydGlhcnknID8gdW5kZWZpbmVkIDogYnV0dG9uVHlwZX1cbiAgICAgICAgcmVmPXtpY29uUmVmfVxuICAgICAgICBvbkNsaWNrPXt0b2dnbGVQb3BwZXJ9XG4gICAgICA+XG4gICAgICAgIHtpY29uICYmIDxJY29uXG4gICAgICAgICAgc2l6ZT17MTZ9XG4gICAgICAgICAgey4uLih0eXBlb2YgaWNvbiA9PT0gJ3N0cmluZycgPyB7IGljb24gfSA6IHsgaWNvbjogaWNvbi5zdmcsIGNvbG9yOiBidXR0b25UeXBlID09PSAndGVydGlhcnknID8gdW5kZWZpbmVkIDogaWNvbi5wcm9wZXJ0aWVzLmNvbG9yIH0pfVxuICAgICAgICAvPn1cbiAgICAgICAge2xhYmVsICYmIDxkaXZcbiAgICAgICAgICBjc3M9e2Nzc2BcbiAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgICAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbiAgICAgICAgICAgIGRpc3BsYXk6IC13ZWJraXQtYm94O1xuICAgICAgICAgICAgLXdlYmtpdC1saW5lLWNsYW1wOiAyO1xuICAgICAgICAgICAgLXdlYmtpdC1ib3gtb3JpZW50OiB2ZXJ0aWNhbDtcbiAgICAgICAgICAgIHdvcmQtYnJlYWs6IGJyZWFrLXdvcmQ7XG4gICAgICAgICAgICB3b3JkLXdyYXA6IGJyZWFrLXdvcmQ7XG4gICAgICAgICAgICBsaW5lLWhlaWdodDogMS4yO1xuICAgICAgICAgIGB9XG4gICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKHsgJ21sLTInOiBpY29uICE9IG51bGwgfSl9PntsYWJlbH08L2Rpdj59XG4gICAgICA8L0J1dHRvbj5cbiAgICAgIHtpc01vYmlsZVxuICAgICAgICA/IDxNb2JpbGVQYW5lbCBvcGVuPXtpc09wZW59IHRpdGxlPXtwb3BwZXJUaXRsZX0gb25DbG9zZT17dG9nZ2xlUG9wcGVyfT5cbiAgICAgICAgICAgIDxkaXYgY3NzPXtjc3NgXG4gICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICA8ZGl2IGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgICAgICAgb3ZlcmZsb3c6IGF1dG87XG4gICAgICAgICAgICAgICAgcGFkZGluZy1ib3R0b206IDFyZW07IC8qIFNjb3BlZCBwYWRkaW5nIHRvIHNwYWNlIGNvbnRlbnQgZnJvbSBmb290ZXIgKi9cbiAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAge2NoaWxkcmVufVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgey8qIFN0YXRpb25hcnkgZm9vdGVyICovfVxuICAgICAgICAgICAgICA8ZGl2IGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDRweCAxMnB4O1xuICAgICAgICAgICAgICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCB2YXIoLS1zeXMtY29sb3ItZGl2aWRlci1zZWNvbmRhcnkpO1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXN5cy1jb2xvci1zdXJmYWNlLXBhcGVyKTtcbiAgICAgICAgICAgICAgICBmbGV4LXNocmluazogMDtcbiAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICAgIDxzcGFuIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjc1cmVtO1xuICAgICAgICAgICAgICAgICAgY29sb3I6IHZhcigtLXN5cy1jb2xvci10ZXh0LXRlcnRpYXJ5KTtcbiAgICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA0MDA7XG4gICAgICAgICAgICAgICAgICBsZXR0ZXItc3BhY2luZzogMC4wMjVlbTtcbiAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1mbGV4O1xuICAgICAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICAgICAgICAgIGdhcDogNHB4O1xuICAgICAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICAgICAgey8qIENvZGUvT3BlbiBTb3VyY2UgU3ltYm9sICovfVxuICAgICAgICAgICAgICAgICAgPHN2ZyBcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg9XCIxNFwiIFxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9XCIxNFwiIFxuICAgICAgICAgICAgICAgICAgICB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgXG4gICAgICAgICAgICAgICAgICAgIGZpbGw9XCJub25lXCIgXG4gICAgICAgICAgICAgICAgICAgIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIFxuICAgICAgICAgICAgICAgICAgICBzdHJva2VXaWR0aD1cIjJcIlxuICAgICAgICAgICAgICAgICAgICBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgICAgICBmbGV4LXNocmluazogMDtcbiAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjY7XG4gICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxwb2x5bGluZSBwb2ludHM9XCIxNiAxOCAyMiAxMiAxNiA2XCIvPlxuICAgICAgICAgICAgICAgICAgICA8cG9seWxpbmUgcG9pbnRzPVwiOCA2IDIgMTIgOCAxOFwiLz5cbiAgICAgICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgICAgICAgUXVlcnlTaW1wbGUgYnkgTWFwU2ltcGxlXG4gICAgICAgICAgICAgICAgICA8c3BhbiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IDZweDtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMC41O1xuICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDAuN3JlbTtcbiAgICAgICAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICAgICAgICB2e1dJREdFVF9WRVJTSU9OfVxuICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L01vYmlsZVBhbmVsPlxuICAgICAgICA6IDxGbG9hdGluZ1BhbmVsXG4gICAgICAgICAgICBjbGFzc05hbWU9J3VpLXVuaXQtcG9wcGVyIHVpLXVuaXQtcG9wcGVyX2stYXJyYW5nZW1lbnQtaWNvbiBmbGV4LWdyb3ctMSdcbiAgICAgICAgICAgIGhlYWRlckNsYXNzTmFtZT17Rk9DVVNBQkxFX0NPTlRBSU5FUl9DTEFTU31cbiAgICAgICAgICAgIG9wZW49e2lzT3Blbn1cbiAgICAgICAgICAgIG9uSGVhZGVyQ2xvc2U9e3RvZ2dsZVBvcHBlcn1cbiAgICAgICAgICAgIHRvZ2dsZT17dG9nZ2xlUG9wcGVyfVxuICAgICAgICAgICAgaGVhZGVyVGl0bGU9e3BvcHBlclRpdGxlfVxuICAgICAgICAgICAgbWluU2l6ZT17bWluU2l6ZX1cbiAgICAgICAgICAgIGRlZmF1bHRTaXplPXtkZWZhdWx0U2l6ZX1cbiAgICAgICAgICAgIGRyYWdCb3VuZHM9J2JvZHknXG4gICAgICAgICAgICB2ZXJzaW9uPXtwb3BwZXJWZXJzaW9ufVxuICAgICAgICAgICAgcmVmZXJlbmNlPXtpY29uUmVmfVxuICAgICAgICAgICAgcGxhY2VtZW50PSdib3R0b20tc3RhcnQnXG4gICAgICAgICAgICBzaGlmdE9wdGlvbnM9e3NoaWZ0T3B0aW9uc31cbiAgICAgICAgICA+XG4gICAgICAgICAgICA8ZGl2IGNzcz17Y3NzYFxuICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgPGRpdiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICBmbGV4OiAxO1xuICAgICAgICAgICAgICAgIG92ZXJmbG93OiBhdXRvO1xuICAgICAgICAgICAgICAgIHBhZGRpbmctYm90dG9tOiAxcmVtOyAvKiBTY29wZWQgcGFkZGluZyB0byBzcGFjZSBjb250ZW50IGZyb20gZm9vdGVyICovXG4gICAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICAgIHtjaGlsZHJlbn1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIHsvKiBTdGF0aW9uYXJ5IGZvb3RlciAqL31cbiAgICAgICAgICAgICAgPGRpdiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiA0cHggMTJweDtcbiAgICAgICAgICAgICAgICBib3JkZXItdG9wOiAxcHggc29saWQgdmFyKC0tc3lzLWNvbG9yLWRpdmlkZXItc2Vjb25kYXJ5KTtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1zeXMtY29sb3Itc3VyZmFjZS1wYXBlcik7XG4gICAgICAgICAgICAgICAgZmxleC1zaHJpbms6IDA7XG4gICAgICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgICA8c3BhbiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC43NXJlbTtcbiAgICAgICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS1zeXMtY29sb3ItdGV4dC10ZXJ0aWFyeSk7XG4gICAgICAgICAgICAgICAgICBmb250LXdlaWdodDogNDAwO1xuICAgICAgICAgICAgICAgICAgbGV0dGVyLXNwYWNpbmc6IDAuMDI1ZW07XG4gICAgICAgICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtZmxleDtcbiAgICAgICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgICAgICAgICBnYXA6IDRweDtcbiAgICAgICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgICAgIHsvKiBDb2RlL09wZW4gU291cmNlIFN5bWJvbCAqL31cbiAgICAgICAgICAgICAgICAgIDxzdmcgXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoPVwiMTRcIiBcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0PVwiMTRcIiBcbiAgICAgICAgICAgICAgICAgICAgdmlld0JveD1cIjAgMCAyNCAyNFwiIFxuICAgICAgICAgICAgICAgICAgICBmaWxsPVwibm9uZVwiIFxuICAgICAgICAgICAgICAgICAgICBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBcbiAgICAgICAgICAgICAgICAgICAgc3Ryb2tlV2lkdGg9XCIyXCJcbiAgICAgICAgICAgICAgICAgICAgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICAgICAgZmxleC1zaHJpbms6IDA7XG4gICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMC42O1xuICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8cG9seWxpbmUgcG9pbnRzPVwiMTYgMTggMjIgMTIgMTYgNlwiLz5cbiAgICAgICAgICAgICAgICAgICAgPHBvbHlsaW5lIHBvaW50cz1cIjggNiAyIDEyIDggMThcIi8+XG4gICAgICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgICAgICAgIFF1ZXJ5U2ltcGxlIGJ5IE1hcFNpbXBsZVxuICAgICAgICAgICAgICAgICAgPHNwYW4gY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiA2cHg7XG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAuNTtcbiAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjdyZW07XG4gICAgICAgICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgICAgICAgdntXSURHRVRfVkVSU0lPTn1cbiAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9GbG9hdGluZ1BhbmVsPlxuICAgICAgfVxuICAgIDwvZGl2PlxuICApXG59XG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7IGpzeCwgY3NzLCBSZWFjdCwgdHlwZSBJbW11dGFibGVBcnJheSwgSW1tdXRhYmxlLCB0eXBlIEltbXV0YWJsZU9iamVjdCwgaG9va3MsIHR5cGUgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSwgdHlwZSBGZWF0dXJlRGF0YVJlY29yZCwgdHlwZSBEYXRhU291cmNlIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgU2VsZWN0IH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB0eXBlIHsgUXVlcnlJdGVtVHlwZSwgU2VsZWN0aW9uVHlwZSB9IGZyb20gJy4uL2NvbmZpZydcbmltcG9ydCB7IFF1ZXJ5VGFzayB9IGZyb20gJy4vcXVlcnktdGFzaydcbmltcG9ydCB7IEZPQ1VTQUJMRV9DT05UQUlORVJfQ0xBU1MgfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IGRlZmF1bHRNZXNzYWdlcyBmcm9tICcuL3RyYW5zbGF0aW9ucy9kZWZhdWx0J1xuaW1wb3J0IHsgY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlciB9IGZyb20gJ3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uJ1xuXG5jb25zdCBkZWJ1Z0xvZ2dlciA9IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIoKVxuXG5leHBvcnQgaW50ZXJmYWNlIFF1ZXJ5VGFza0xpc3RQcm9wcyB7XG4gIHdpZGdldElkOiBzdHJpbmdcbiAgcXVlcnlJdGVtczogSW1tdXRhYmxlQXJyYXk8UXVlcnlJdGVtVHlwZT5cbiAgaXNJblBvcHBlcj86IGJvb2xlYW5cbiAgZGVmYXVsdFBhZ2VTaXplPzogbnVtYmVyXG4gIGNsYXNzTmFtZT86IHN0cmluZ1xuICBpbml0aWFsUXVlcnlWYWx1ZT86IHsgc2hvcnRJZDogc3RyaW5nLCB2YWx1ZTogc3RyaW5nIH1cbiAgc2hvdWxkVXNlSW5pdGlhbFF1ZXJ5VmFsdWVGb3JTZWxlY3Rpb24/OiBib29sZWFuXG4gIG9uSGFzaFBhcmFtZXRlclVzZWQ/OiAoc2hvcnRJZDogc3RyaW5nKSA9PiB2b2lkXG4gIHJlc3VsdHNNb2RlPzogU2VsZWN0aW9uVHlwZVxuICBvblJlc3VsdHNNb2RlQ2hhbmdlPzogKG1vZGU6IFNlbGVjdGlvblR5cGUpID0+IHZvaWRcbiAgYWNjdW11bGF0ZWRSZWNvcmRzPzogRmVhdHVyZURhdGFSZWNvcmRbXVxuICBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZT86IChyZWNvcmRzOiBGZWF0dXJlRGF0YVJlY29yZFtdKSA9PiB2b2lkXG4gIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQ/OiBib29sZWFuXG4gIGdyYXBoaWNzTGF5ZXI/OiBfX2VzcmkuR3JhcGhpY3NMYXllclxuICBtYXBWaWV3PzogX19lc3JpLk1hcFZpZXcgfCBfX2VzcmkuU2NlbmVWaWV3XG4gIG9uSW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXI/OiAob3V0cHV0RFM6IERhdGFTb3VyY2UpID0+IFByb21pc2U8dm9pZD5cbiAgb25DbGVhckdyYXBoaWNzTGF5ZXI/OiAoKSA9PiB2b2lkXG4gIGFjdGl2ZVRhYj86ICdxdWVyeScgfCAncmVzdWx0cydcbiAgb25UYWJDaGFuZ2U/OiAodGFiOiAncXVlcnknIHwgJ3Jlc3VsdHMnKSA9PiB2b2lkXG59XG5cbmludGVyZmFjZSBHcm91cGVkUXVlcmllcyB7XG4gIGdyb3VwczogeyBbZ3JvdXBJZDogc3RyaW5nXTogeyBpdGVtczogSW1tdXRhYmxlQXJyYXk8UXVlcnlJdGVtVHlwZT4sIGRpc3BsYXlOYW1lOiBzdHJpbmcsIGljb24/OiBhbnkgfSB9XG4gIHVuZ3JvdXBlZDogQXJyYXk8eyBpdGVtOiBJbW11dGFibGVPYmplY3Q8UXVlcnlJdGVtVHlwZT4sIGluZGV4OiBudW1iZXIgfT5cbiAgZ3JvdXBPcmRlcjogc3RyaW5nW11cbn1cblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIHNvcnQgcXVlcmllcyBieSBkaXNwbGF5IG9yZGVyIChsb3dlciBudW1iZXJzIGFwcGVhciBmaXJzdClcbi8vIFF1ZXJpZXMgd2l0aG91dCBvcmRlciBtYWludGFpbiB0aGVpciBvcmlnaW5hbCByZWxhdGl2ZSBwb3NpdGlvbnNcbmZ1bmN0aW9uIHNvcnRRdWVyeUl0ZW1zQnlPcmRlcihxdWVyeUl0ZW1zOiBJbW11dGFibGVBcnJheTxRdWVyeUl0ZW1UeXBlPik6IEltbXV0YWJsZUFycmF5PFF1ZXJ5SXRlbVR5cGU+IHtcbiAgLy8gSGFuZGxlIG51bGwvdW5kZWZpbmVkL2VtcHR5IGNhc2VzXG4gIGlmICghcXVlcnlJdGVtcyB8fCBxdWVyeUl0ZW1zLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBxdWVyeUl0ZW1zIHx8IEltbXV0YWJsZShbXSlcbiAgfVxuICBcbiAgLy8gU2FmZWx5IGNvbnZlcnQgdG8gcmVndWxhciBhcnJheSBmb3Igc29ydGluZ1xuICAvLyBIYW5kbGUgYm90aCBJbW11dGFibGVBcnJheSAoaGFzIHRvQXJyYXkgbWV0aG9kKSBhbmQgcmVndWxhciBhcnJheXNcbiAgY29uc3QgaXRlbXNBcnJheSA9IChxdWVyeUl0ZW1zICYmIHR5cGVvZiBxdWVyeUl0ZW1zLnRvQXJyYXkgPT09ICdmdW5jdGlvbicpIFxuICAgID8gcXVlcnlJdGVtcy50b0FycmF5KCkgXG4gICAgOiAoQXJyYXkuaXNBcnJheShxdWVyeUl0ZW1zKSA/IHF1ZXJ5SXRlbXMgOiBbXSlcbiAgXG4gIGNvbnN0IGl0ZW1zV2l0aEluZGV4ID0gaXRlbXNBcnJheS5tYXAoKGl0ZW0sIGluZGV4KSA9PiAoeyBpdGVtLCBvcmlnaW5hbEluZGV4OiBpbmRleCB9KSlcbiAgaXRlbXNXaXRoSW5kZXguc29ydCgoYSwgYikgPT4ge1xuICAgIGNvbnN0IG9yZGVyQSA9IGEuaXRlbS5vcmRlciA/PyBJbmZpbml0eVxuICAgIGNvbnN0IG9yZGVyQiA9IGIuaXRlbS5vcmRlciA/PyBJbmZpbml0eVxuICAgIGlmIChvcmRlckEgIT09IG9yZGVyQikge1xuICAgICAgcmV0dXJuIG9yZGVyQSAtIG9yZGVyQlxuICAgIH1cbiAgICAvLyBJZiBvcmRlciBpcyBlcXVhbCAoYm90aCBJbmZpbml0eSBvciBzYW1lIG51bWJlciksIG1haW50YWluIG9yaWdpbmFsIGluZGV4IG9yZGVyXG4gICAgcmV0dXJuIGEub3JpZ2luYWxJbmRleCAtIGIub3JpZ2luYWxJbmRleFxuICB9KVxuICByZXR1cm4gSW1tdXRhYmxlKGl0ZW1zV2l0aEluZGV4Lm1hcCgoeyBpdGVtIH0pID0+IGl0ZW0pKVxufVxuXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gZ3JvdXAgcXVlcmllcyBieSBncm91cElkXG5jb25zdCBncm91cFF1ZXJpZXMgPSAocXVlcnlJdGVtczogSW1tdXRhYmxlQXJyYXk8UXVlcnlJdGVtVHlwZT4pOiBHcm91cGVkUXVlcmllcyA9PiB7XG4gIGNvbnN0IGdyb3VwczogeyBbZ3JvdXBJZDogc3RyaW5nXTogeyBpdGVtczogSW1tdXRhYmxlQXJyYXk8UXVlcnlJdGVtVHlwZT4sIGRpc3BsYXlOYW1lOiBzdHJpbmcsIGljb24/OiBhbnkgfSB9ID0ge31cbiAgY29uc3QgdW5ncm91cGVkOiBBcnJheTx7IGl0ZW06IEltbXV0YWJsZU9iamVjdDxRdWVyeUl0ZW1UeXBlPiwgaW5kZXg6IG51bWJlciB9PiA9IFtdXG4gIGNvbnN0IGdyb3VwT3JkZXI6IHN0cmluZ1tdID0gW11cbiAgY29uc3QgZ3JvdXBJbmRleE1hcDogeyBbZ3JvdXBJZDogc3RyaW5nXTogbnVtYmVyIH0gPSB7fVxuICBcbiAgLy8gRmlyc3QgcGFzczogY29sbGVjdCBpdGVtcyBpbiByZWd1bGFyIGFycmF5c1xuICBjb25zdCBncm91cEl0ZW1zTWFwOiB7IFtncm91cElkOiBzdHJpbmddOiBRdWVyeUl0ZW1UeXBlW10gfSA9IHt9XG5cbiAgcXVlcnlJdGVtcy5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4ge1xuICAgIGlmIChpdGVtLmdyb3VwSWQpIHtcbiAgICAgIGlmICghZ3JvdXBJdGVtc01hcFtpdGVtLmdyb3VwSWRdKSB7XG4gICAgICAgIGdyb3VwSXRlbXNNYXBbaXRlbS5ncm91cElkXSA9IFtdXG4gICAgICAgIGdyb3Vwc1tpdGVtLmdyb3VwSWRdID0ge1xuICAgICAgICAgIGl0ZW1zOiBJbW11dGFibGUoW10pLFxuICAgICAgICAgIGRpc3BsYXlOYW1lOiBpdGVtLmdyb3VwRGlzcGxheU5hbWUgfHwgaXRlbS5uYW1lIHx8IGBHcm91cCAke2l0ZW0uZ3JvdXBJZH1gLFxuICAgICAgICAgIGljb246IGl0ZW0uaWNvblxuICAgICAgICB9XG4gICAgICAgIGdyb3VwSW5kZXhNYXBbaXRlbS5ncm91cElkXSA9IGluZGV4XG4gICAgICAgIGdyb3VwT3JkZXIucHVzaChpdGVtLmdyb3VwSWQpXG4gICAgICB9XG4gICAgICBncm91cEl0ZW1zTWFwW2l0ZW0uZ3JvdXBJZF0ucHVzaChpdGVtKVxuICAgIH0gZWxzZSB7XG4gICAgICB1bmdyb3VwZWQucHVzaCh7IGl0ZW0sIGluZGV4IH0pXG4gICAgfVxuICB9KVxuXG4gIC8vIFNlY29uZCBwYXNzOiBjb252ZXJ0IHJlZ3VsYXIgYXJyYXlzIHRvIEltbXV0YWJsZUFycmF5c1xuICBPYmplY3Qua2V5cyhncm91cEl0ZW1zTWFwKS5mb3JFYWNoKGdyb3VwSWQgPT4ge1xuICAgIGdyb3Vwc1tncm91cElkXS5pdGVtcyA9IEltbXV0YWJsZShncm91cEl0ZW1zTWFwW2dyb3VwSWRdKVxuICB9KVxuXG4gIHJldHVybiB7IGdyb3VwcywgdW5ncm91cGVkLCBncm91cE9yZGVyIH1cbn1cblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGdldCBkaXNwbGF5IG5hbWUgZm9yIHF1ZXJ5IGluIGRyb3Bkb3duXG4vLyBVc2VzOiBzZWFyY2hBbGlhcyB8fCBqaW11RmllbGROYW1lIHx8IGl0ZW0ubmFtZSB8fCBmYWxsYmFja1xuY29uc3QgZ2V0UXVlcnlEaXNwbGF5TmFtZSA9IChpdGVtOiBJbW11dGFibGVPYmplY3Q8UXVlcnlJdGVtVHlwZT4pOiBzdHJpbmcgPT4ge1xuICAvLyBGaXJzdCBwcmlvcml0eTogc2VhcmNoQWxpYXMgaWYgc2V0XG4gIGlmIChpdGVtLnNlYXJjaEFsaWFzKSB7XG4gICAgcmV0dXJuIGl0ZW0uc2VhcmNoQWxpYXNcbiAgfVxuICBcbiAgLy8gU2Vjb25kIHByaW9yaXR5OiBmaWVsZCBuYW1lIGZyb20gU1FMIGV4cHJlc3Npb25cbiAgY29uc3QgamltdUZpZWxkTmFtZSA9IGl0ZW0uc3FsRXhwck9iaj8ucGFydHM/LlswXT8uamltdUZpZWxkTmFtZVxuICBpZiAoamltdUZpZWxkTmFtZSkge1xuICAgIHJldHVybiBqaW11RmllbGROYW1lXG4gIH1cbiAgXG4gIC8vIFRoaXJkIHByaW9yaXR5OiBpdGVtIG5hbWVcbiAgaWYgKGl0ZW0ubmFtZSkge1xuICAgIHJldHVybiBpdGVtLm5hbWVcbiAgfVxuICBcbiAgLy8gRmFsbGJhY2tcbiAgcmV0dXJuICdRdWVyeSdcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIFF1ZXJ5VGFza0xpc3QgKHByb3BzOiBRdWVyeVRhc2tMaXN0UHJvcHMpIHtcbiAgY29uc3QgeyBxdWVyeUl0ZW1zLCB3aWRnZXRJZCwgZGVmYXVsdFBhZ2VTaXplLCBpc0luUG9wcGVyID0gZmFsc2UsIGNsYXNzTmFtZSA9ICcnLCBpbml0aWFsUXVlcnlWYWx1ZSwgc2hvdWxkVXNlSW5pdGlhbFF1ZXJ5VmFsdWVGb3JTZWxlY3Rpb24gPSBmYWxzZSwgb25IYXNoUGFyYW1ldGVyVXNlZCwgcmVzdWx0c01vZGUsIG9uUmVzdWx0c01vZGVDaGFuZ2UsIGFjY3VtdWxhdGVkUmVjb3Jkcywgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UsIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQsIGdyYXBoaWNzTGF5ZXIsIG1hcFZpZXcsIG9uSW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXIsIG9uQ2xlYXJHcmFwaGljc0xheWVyLCBhY3RpdmVUYWIsIG9uVGFiQ2hhbmdlIH0gPSBwcm9wc1xuICBjb25zdCBnZXRJMThuTWVzc2FnZSA9IGhvb2tzLnVzZVRyYW5zbGF0aW9uKGRlZmF1bHRNZXNzYWdlcylcbiAgXG4gIC8vIExvZyB3aGVuIHByb3BzIGFyZSByZWNlaXZlZFxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSC1FWEVDJywge1xuICAgICAgZXZlbnQ6ICdxdWVyeXRhc2tsaXN0LXByb3BzLXJlY2VpdmVkJyxcbiAgICAgIHdpZGdldElkLFxuICAgICAgcHJvcHM6IHtcbiAgICAgICAgaGFzSW5pdGlhbFF1ZXJ5VmFsdWU6ICEhaW5pdGlhbFF1ZXJ5VmFsdWUsXG4gICAgICAgIGluaXRpYWxRdWVyeVZhbHVlU2hvcnRJZDogaW5pdGlhbFF1ZXJ5VmFsdWU/LnNob3J0SWQsXG4gICAgICAgIGluaXRpYWxRdWVyeVZhbHVlVmFsdWU6IGluaXRpYWxRdWVyeVZhbHVlPy52YWx1ZSxcbiAgICAgICAgc2hvdWxkVXNlSW5pdGlhbFF1ZXJ5VmFsdWVGb3JTZWxlY3Rpb25cbiAgICAgIH0sXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICBldmVudDogJ3F1ZXJ5LXRhc2stbGlzdC1wcm9wcy1yZWNlaXZlZCcsXG4gICAgICB3aWRnZXRJZCxcbiAgICAgIGhhc0luaXRpYWxRdWVyeVZhbHVlOiAhIWluaXRpYWxRdWVyeVZhbHVlLFxuICAgICAgaW5pdGlhbFF1ZXJ5VmFsdWVTaG9ydElkOiBpbml0aWFsUXVlcnlWYWx1ZT8uc2hvcnRJZCxcbiAgICAgIGluaXRpYWxRdWVyeVZhbHVlVmFsdWU6IGluaXRpYWxRdWVyeVZhbHVlPy52YWx1ZSxcbiAgICAgIHNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgfSwgW2luaXRpYWxRdWVyeVZhbHVlLCBzaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbiwgd2lkZ2V0SWRdKVxuICBcbiAgLy8gU29ydCBxdWVyaWVzIGJ5IGRpc3BsYXkgb3JkZXIgYmVmb3JlIGdyb3VwaW5nXG4gIC8vIEhhbmRsZSBjYXNlIHdoZXJlIHF1ZXJ5SXRlbXMgbWlnaHQgYmUgdW5kZWZpbmVkL251bGwgb3Igbm90IGFuIEltbXV0YWJsZUFycmF5XG4gIGNvbnN0IHNvcnRlZFF1ZXJ5SXRlbXMgPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICBpZiAoIXF1ZXJ5SXRlbXMpIHtcbiAgICAgIHJldHVybiBJbW11dGFibGUoW10pXG4gICAgfVxuICAgIHJldHVybiBzb3J0UXVlcnlJdGVtc0J5T3JkZXIocXVlcnlJdGVtcylcbiAgfSwgW3F1ZXJ5SXRlbXNdKVxuICBcbiAgY29uc3QgeyBncm91cHMsIHVuZ3JvdXBlZCwgZ3JvdXBPcmRlciB9ID0gUmVhY3QudXNlTWVtbygoKSA9PiBncm91cFF1ZXJpZXMoc29ydGVkUXVlcnlJdGVtcyksIFtzb3J0ZWRRdWVyeUl0ZW1zXSlcbiAgXG4gIC8vIE9ubHkgdXNlIHRoZSBwcm9wIGluaXRpYWxRdWVyeVZhbHVlIHdoZW4gSGVscGVyU2ltcGxlIGV4cGxpY2l0bHkgb3BlbnMgdGhlIHdpZGdldFxuICAvLyBRdWVyeVNpbXBsZSBzaG91bGQgbm90IGF1dG9ub21vdXNseSByZWFjdCB0byBpbml0aWFsUXVlcnlWYWx1ZSBwcm9wIGNoYW5nZXNcbiAgLy8gSGVscGVyU2ltcGxlIGlzIHRoZSBvcmNoZXN0cmF0b3IgYW5kIHNldHMgc2hvdWxkVXNlSW5pdGlhbFF1ZXJ5VmFsdWVGb3JTZWxlY3Rpb24gZmxhZ1xuICBjb25zdCBlZmZlY3RpdmVJbml0aWFsUXVlcnlWYWx1ZSA9IHNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uID8gaW5pdGlhbFF1ZXJ5VmFsdWUgOiB1bmRlZmluZWRcbiAgXG4gIC8vIExvZyB3aGVuIGVmZmVjdGl2ZUluaXRpYWxRdWVyeVZhbHVlIGlzIGNhbGN1bGF0ZWRcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gtRVhFQycsIHtcbiAgICAgIGV2ZW50OiAncXVlcnl0YXNrbGlzdC1lZmZlY3RpdmVpbml0aWFscXVlcnl2YWx1ZS1jYWxjdWxhdGVkJyxcbiAgICAgIHdpZGdldElkLFxuICAgICAgY2FsY3VsYXRpb246IHtcbiAgICAgICAgc2hvdWxkVXNlSW5pdGlhbFF1ZXJ5VmFsdWVGb3JTZWxlY3Rpb24sXG4gICAgICAgIGhhc0luaXRpYWxRdWVyeVZhbHVlOiAhIWluaXRpYWxRdWVyeVZhbHVlLFxuICAgICAgICBlZmZlY3RpdmVSZXN1bHQ6IGVmZmVjdGl2ZUluaXRpYWxRdWVyeVZhbHVlID8gJ1VTRV9JTklUSUFMX1FVRVJZX1ZBTFVFJyA6ICdVTkRFRklORUQnLFxuICAgICAgICBlZmZlY3RpdmVTaG9ydElkOiBlZmZlY3RpdmVJbml0aWFsUXVlcnlWYWx1ZT8uc2hvcnRJZCxcbiAgICAgICAgZWZmZWN0aXZlVmFsdWU6IGVmZmVjdGl2ZUluaXRpYWxRdWVyeVZhbHVlPy52YWx1ZVxuICAgICAgfSxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgIGV2ZW50OiAnZWZmZWN0aXZlSW5pdGlhbFF1ZXJ5VmFsdWUtY2FsY3VsYXRlZCcsXG4gICAgICB3aWRnZXRJZCxcbiAgICAgIHNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uLFxuICAgICAgaGFzSW5pdGlhbFF1ZXJ5VmFsdWU6ICEhaW5pdGlhbFF1ZXJ5VmFsdWUsXG4gICAgICBoYXNFZmZlY3RpdmVJbml0aWFsUXVlcnlWYWx1ZTogISFlZmZlY3RpdmVJbml0aWFsUXVlcnlWYWx1ZSxcbiAgICAgIGVmZmVjdGl2ZVNob3J0SWQ6IGVmZmVjdGl2ZUluaXRpYWxRdWVyeVZhbHVlPy5zaG9ydElkLFxuICAgICAgZWZmZWN0aXZlVmFsdWU6IGVmZmVjdGl2ZUluaXRpYWxRdWVyeVZhbHVlPy52YWx1ZSxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gIH0sIFtlZmZlY3RpdmVJbml0aWFsUXVlcnlWYWx1ZSwgc2hvdWxkVXNlSW5pdGlhbFF1ZXJ5VmFsdWVGb3JTZWxlY3Rpb24sIGluaXRpYWxRdWVyeVZhbHVlLCB3aWRnZXRJZF0pXG5cbiAgLy8gRmluZCB0aGUgcXVlcnkgaXRlbSBtYXRjaGluZyB0aGUgc2hvcnRJZCBmcm9tIFVSTCBoYXNoXG4gIGNvbnN0IG1hdGNoaW5nUXVlcnlJbmRleCA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgIGNvbnN0IHNob3J0SWQgPSBlZmZlY3RpdmVJbml0aWFsUXVlcnlWYWx1ZT8uc2hvcnRJZFxuICAgIGlmICghc2hvcnRJZCkge1xuICAgICAgcmV0dXJuIC0xXG4gICAgfVxuICAgIHJldHVybiBzb3J0ZWRRdWVyeUl0ZW1zLmZpbmRJbmRleChpdGVtID0+IGl0ZW0uc2hvcnRJZCA9PT0gc2hvcnRJZClcbiAgfSwgW3NvcnRlZFF1ZXJ5SXRlbXMsIGVmZmVjdGl2ZUluaXRpYWxRdWVyeVZhbHVlXSlcbiAgXG4gIC8vIERldGVybWluZSB3aGljaCBncm91cC91bmdyb3VwZWQgaW5kZXggdGhlIG1hdGNoaW5nIHF1ZXJ5IGlzIGF0XG4gIGNvbnN0IGdldFF1ZXJ5U2VsZWN0aW9uID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgaWYgKG1hdGNoaW5nUXVlcnlJbmRleCA8IDApIHJldHVybiBudWxsXG4gICAgXG4gICAgY29uc3QgaXRlbSA9IHNvcnRlZFF1ZXJ5SXRlbXNbbWF0Y2hpbmdRdWVyeUluZGV4XVxuICAgIGlmIChpdGVtLmdyb3VwSWQpIHtcbiAgICAgIGNvbnN0IGdyb3VwSXRlbXMgPSBncm91cHNbaXRlbS5ncm91cElkXT8uaXRlbXMgfHwgSW1tdXRhYmxlKFtdKVxuICAgICAgY29uc3QgaW5kZXhJbkdyb3VwID0gZ3JvdXBJdGVtcy5maW5kSW5kZXgocSA9PiBxLmNvbmZpZ0lkID09PSBpdGVtLmNvbmZpZ0lkKVxuICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgZXZlbnQ6ICdoYXNoLXF1ZXJ5LWZvdW5kLWluLWdyb3VwJyxcbiAgICAgICAgZ3JvdXBJZDogaXRlbS5ncm91cElkLFxuICAgICAgICBpbmRleEluR3JvdXA6IGluZGV4SW5Hcm91cCA+PSAwID8gaW5kZXhJbkdyb3VwIDogMCxcbiAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IGl0ZW0uY29uZmlnSWQsXG4gICAgICAgIHF1ZXJ5SXRlbVNob3J0SWQ6IGl0ZW0uc2hvcnRJZFxuICAgICAgfSlcbiAgICAgIHJldHVybiB7IHR5cGU6ICdncm91cCcgYXMgY29uc3QsIGdyb3VwSWQ6IGl0ZW0uZ3JvdXBJZCwgaW5kZXg6IGluZGV4SW5Hcm91cCA+PSAwID8gaW5kZXhJbkdyb3VwIDogMCB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFVuZ3JvdXBlZCBxdWVyeVxuICAgICAgY29uc3QgaW5kZXhJblVuZ3JvdXBlZCA9IHVuZ3JvdXBlZC5maW5kSW5kZXgoKHsgaXRlbTogcSB9KSA9PiBxLmNvbmZpZ0lkID09PSBpdGVtLmNvbmZpZ0lkKVxuICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgZXZlbnQ6ICdoYXNoLXF1ZXJ5LWZvdW5kLXVuZ3JvdXBlZCcsXG4gICAgICAgIGluZGV4SW5Vbmdyb3VwZWQ6IGluZGV4SW5Vbmdyb3VwZWQgPj0gMCA/IGluZGV4SW5Vbmdyb3VwZWQgOiAwLFxuICAgICAgICBxdWVyeUl0ZW1Db25maWdJZDogaXRlbS5jb25maWdJZCxcbiAgICAgICAgcXVlcnlJdGVtU2hvcnRJZDogaXRlbS5zaG9ydElkXG4gICAgICB9KVxuICAgICAgcmV0dXJuIHsgdHlwZTogJ3VuZ3JvdXBlZCcgYXMgY29uc3QsIGluZGV4OiBpbmRleEluVW5ncm91cGVkID49IDAgPyBpbmRleEluVW5ncm91cGVkIDogMCB9XG4gICAgfVxuICB9LCBbbWF0Y2hpbmdRdWVyeUluZGV4LCBzb3J0ZWRRdWVyeUl0ZW1zLCBncm91cHMsIHVuZ3JvdXBlZF0pXG4gIFxuICAvLyBIZWxwZXIgdG8gZGV0ZXJtaW5lIGRlZmF1bHQgc2VsZWN0aW9uIGJhc2VkIG9uIGRpc3BsYXkgb3JkZXJcbiAgY29uc3QgZ2V0RGVmYXVsdFNlbGVjdGlvbiA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgIGlmIChnZXRRdWVyeVNlbGVjdGlvbikge1xuICAgICAgcmV0dXJuIGdldFF1ZXJ5U2VsZWN0aW9uXG4gICAgfVxuICAgIFxuICAgIC8vIE5vIGhhc2ggcGFyYW1ldGVyIC0gZGV0ZXJtaW5lIGRlZmF1bHQgYmFzZWQgb24gZGlzcGxheSBvcmRlclxuICAgIC8vIENvbXBhcmUgZmlyc3QgdW5ncm91cGVkIHF1ZXJ5IHZzIGZpcnN0IHF1ZXJ5IGluIGZpcnN0IGdyb3VwXG4gICAgY29uc3QgZmlyc3RVbmdyb3VwZWRPcmRlciA9IHVuZ3JvdXBlZC5sZW5ndGggPiAwID8gKHVuZ3JvdXBlZFswXS5pdGVtLm9yZGVyID8/IEluZmluaXR5KSA6IEluZmluaXR5XG4gICAgY29uc3QgZmlyc3RHcm91cE9yZGVyID0gZ3JvdXBPcmRlci5sZW5ndGggPiAwICYmIGdyb3Vwc1tncm91cE9yZGVyWzBdXT8uaXRlbXM/Lmxlbmd0aCA+IDBcbiAgICAgID8gKGdyb3Vwc1tncm91cE9yZGVyWzBdXS5pdGVtc1swXS5vcmRlciA/PyBJbmZpbml0eSlcbiAgICAgIDogSW5maW5pdHlcbiAgICBcbiAgICAvLyBTZWxlY3Qgd2hpY2hldmVyIGhhcyBsb3dlciBvcmRlciAob3IgZmlyc3QgaWYgZXF1YWwpXG4gICAgaWYgKGZpcnN0VW5ncm91cGVkT3JkZXIgPCBmaXJzdEdyb3VwT3JkZXIpIHtcbiAgICAgIHJldHVybiB7IHR5cGU6ICd1bmdyb3VwZWQnIGFzIGNvbnN0LCBpbmRleDogMCB9XG4gICAgfSBlbHNlIGlmIChmaXJzdEdyb3VwT3JkZXIgPCBJbmZpbml0eSB8fCBncm91cE9yZGVyLmxlbmd0aCA+IDApIHtcbiAgICAgIHJldHVybiB7IHR5cGU6ICdncm91cCcgYXMgY29uc3QsIGdyb3VwSWQ6IGdyb3VwT3JkZXJbMF0sIGluZGV4OiAwIH1cbiAgICB9IGVsc2UgaWYgKHVuZ3JvdXBlZC5sZW5ndGggPiAwKSB7XG4gICAgICByZXR1cm4geyB0eXBlOiAndW5ncm91cGVkJyBhcyBjb25zdCwgaW5kZXg6IDAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbFxuICB9LCBbZ2V0UXVlcnlTZWxlY3Rpb24sIHVuZ3JvdXBlZCwgZ3JvdXBzLCBncm91cE9yZGVyXSlcbiAgXG4gIC8vIFRyYWNrIHNlbGVjdGVkIHF1ZXJ5IC0gaW5pdGlhbGl6ZSB3aXRoIG1hdGNoaW5nIHF1ZXJ5IGlmIGZvdW5kIGZyb20gVVJMIGhhc2gsIG9yIGRlZmF1bHQgYmFzZWQgb24gZGlzcGxheSBvcmRlclxuICBjb25zdCBbc2VsZWN0ZWRHcm91cElkLCBzZXRTZWxlY3RlZEdyb3VwSWRdID0gUmVhY3QudXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4oKCkgPT4ge1xuICAgIGlmIChnZXREZWZhdWx0U2VsZWN0aW9uPy50eXBlID09PSAnZ3JvdXAnKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgICBldmVudDogJ2luaXRpYWwtZ3JvdXAtc2VsZWN0aW9uJyxcbiAgICAgICAgZ3JvdXBJZDogZ2V0RGVmYXVsdFNlbGVjdGlvbi5ncm91cElkLFxuICAgICAgICBub3RlOiBnZXRRdWVyeVNlbGVjdGlvbiA/ICdIYXNoLW1hdGNoZWQnIDogJ0RlZmF1bHQgYmFzZWQgb24gZGlzcGxheSBvcmRlcidcbiAgICAgIH0pXG4gICAgICByZXR1cm4gZ2V0RGVmYXVsdFNlbGVjdGlvbi5ncm91cElkXG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH0pXG4gIGNvbnN0IFtzZWxlY3RlZEdyb3VwUXVlcnlJbmRleCwgc2V0U2VsZWN0ZWRHcm91cFF1ZXJ5SW5kZXhdID0gUmVhY3QudXNlU3RhdGUoKCkgPT4ge1xuICAgIGlmIChnZXREZWZhdWx0U2VsZWN0aW9uPy50eXBlID09PSAnZ3JvdXAnKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgICBldmVudDogJ2luaXRpYWwtZ3JvdXAtcXVlcnktaW5kZXgnLFxuICAgICAgICBpbmRleDogZ2V0RGVmYXVsdFNlbGVjdGlvbi5pbmRleCxcbiAgICAgICAgbm90ZTogZ2V0UXVlcnlTZWxlY3Rpb24gPyAnSGFzaC1tYXRjaGVkJyA6ICdEZWZhdWx0IGJhc2VkIG9uIGRpc3BsYXkgb3JkZXInXG4gICAgICB9KVxuICAgICAgcmV0dXJuIGdldERlZmF1bHRTZWxlY3Rpb24uaW5kZXhcbiAgICB9XG4gICAgcmV0dXJuIDBcbiAgfSlcbiAgY29uc3QgW3NlbGVjdGVkVW5ncm91cGVkSW5kZXgsIHNldFNlbGVjdGVkVW5ncm91cGVkSW5kZXhdID0gUmVhY3QudXNlU3RhdGUoKCkgPT4ge1xuICAgIGlmIChnZXREZWZhdWx0U2VsZWN0aW9uPy50eXBlID09PSAndW5ncm91cGVkJykge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgZXZlbnQ6ICdpbml0aWFsLXVuZ3JvdXBlZC1pbmRleCcsXG4gICAgICAgIGluZGV4OiBnZXREZWZhdWx0U2VsZWN0aW9uLmluZGV4LFxuICAgICAgICBub3RlOiBnZXRRdWVyeVNlbGVjdGlvbiA/ICdIYXNoLW1hdGNoZWQnIDogJ0RlZmF1bHQgYmFzZWQgb24gZGlzcGxheSBvcmRlcidcbiAgICAgIH0pXG4gICAgICByZXR1cm4gZ2V0RGVmYXVsdFNlbGVjdGlvbi5pbmRleFxuICAgIH1cbiAgICByZXR1cm4gMFxuICB9KVxuICBcbiAgLy8gVXBkYXRlIHNlbGVjdGlvbiB3aGVuIEhlbHBlclNpbXBsZSBleHBsaWNpdGx5IG9wZW5zIHdpZGdldCB3aXRoIGhhc2ggcGFyYW1ldGVyXG4gIC8vIE9ubHkgcmVhY3Qgd2hlbiBzaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbiBpcyB0cnVlIChzZXQgYnkgSGVscGVyU2ltcGxlKVxuICAvLyBUaGlzIHByZXZlbnRzIGF1dG9ub21vdXMgcXVlcnkgc2VsZWN0aW9uIHdoZW4gc3dpdGNoaW5nIHF1ZXJpZXNcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gtRVhFQycsIHtcbiAgICAgIGV2ZW50OiAncXVlcnl0YXNrbGlzdC1zZWxlY3Rpb24tdXNlZWZmZWN0LWNoZWNrJyxcbiAgICAgIHdpZGdldElkLFxuICAgICAgY2hlY2s6IHtcbiAgICAgICAgc2hvdWxkVXNlSW5pdGlhbFF1ZXJ5VmFsdWVGb3JTZWxlY3Rpb24sXG4gICAgICAgIGhhc0dldFF1ZXJ5U2VsZWN0aW9uOiAhIWdldFF1ZXJ5U2VsZWN0aW9uLFxuICAgICAgICBnZXRRdWVyeVNlbGVjdGlvblR5cGU6IGdldFF1ZXJ5U2VsZWN0aW9uPy50eXBlLFxuICAgICAgICB3aWxsVXBkYXRlU2VsZWN0aW9uOiBzaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbiAmJiAhIWdldFF1ZXJ5U2VsZWN0aW9uXG4gICAgICB9LFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgZXZlbnQ6ICdxdWVyeS1zZWxlY3Rpb24tdXNlZWZmZWN0LWNoZWNrJyxcbiAgICAgIHdpZGdldElkLFxuICAgICAgc2hvdWxkVXNlSW5pdGlhbFF1ZXJ5VmFsdWVGb3JTZWxlY3Rpb24sXG4gICAgICBoYXNHZXRRdWVyeVNlbGVjdGlvbjogISFnZXRRdWVyeVNlbGVjdGlvbixcbiAgICAgIGdldFF1ZXJ5U2VsZWN0aW9uVHlwZTogZ2V0UXVlcnlTZWxlY3Rpb24/LnR5cGUsXG4gICAgICB3aWxsVXBkYXRlU2VsZWN0aW9uOiBzaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbiAmJiAhIWdldFF1ZXJ5U2VsZWN0aW9uLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICBpZiAoc2hvdWxkVXNlSW5pdGlhbFF1ZXJ5VmFsdWVGb3JTZWxlY3Rpb24gJiYgZ2V0UXVlcnlTZWxlY3Rpb24pIHtcbiAgICAgIC8vIEhhc2ggcGFyYW1ldGVyIG1hdGNoZWQgLSBIZWxwZXJTaW1wbGUgZXhwbGljaXRseSBvcGVuZWQgdXMgd2l0aCB0aGlzIGhhc2hcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSC1FWEVDJywge1xuICAgICAgICBldmVudDogJ3F1ZXJ5dGFza2xpc3Qtc2VsZWN0aW9uLXVzZWVmZmVjdC11cGRhdGluZycsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICBzZWxlY3Rpb25UeXBlOiBnZXRRdWVyeVNlbGVjdGlvbi50eXBlLFxuICAgICAgICBzZWxlY3Rpb25EZXRhaWxzOiBnZXRRdWVyeVNlbGVjdGlvbi50eXBlID09PSAnZ3JvdXAnIFxuICAgICAgICAgID8geyBncm91cElkOiBnZXRRdWVyeVNlbGVjdGlvbi5ncm91cElkLCBpbmRleDogZ2V0UXVlcnlTZWxlY3Rpb24uaW5kZXggfVxuICAgICAgICAgIDogeyBpbmRleDogZ2V0UXVlcnlTZWxlY3Rpb24uaW5kZXggfSxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgXG4gICAgICBpZiAoZ2V0UXVlcnlTZWxlY3Rpb24udHlwZSA9PT0gJ2dyb3VwJykge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgICAgIGV2ZW50OiAnc2VsZWN0aW9uLWNoYW5nZWQtdG8tZ3JvdXAtZnJvbS1oYXNoJyxcbiAgICAgICAgICBncm91cElkOiBnZXRRdWVyeVNlbGVjdGlvbi5ncm91cElkLFxuICAgICAgICAgIGluZGV4OiBnZXRRdWVyeVNlbGVjdGlvbi5pbmRleCxcbiAgICAgICAgICBub3RlOiAnSGVscGVyU2ltcGxlIGV4cGxpY2l0bHkgb3BlbmVkIHdpZGdldCB3aXRoIGhhc2ggcGFyYW1ldGVyJ1xuICAgICAgICB9KVxuICAgICAgICBzZXRTZWxlY3RlZEdyb3VwSWQoZ2V0UXVlcnlTZWxlY3Rpb24uZ3JvdXBJZClcbiAgICAgICAgc2V0U2VsZWN0ZWRHcm91cFF1ZXJ5SW5kZXgoZ2V0UXVlcnlTZWxlY3Rpb24uaW5kZXgpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgICAgIGV2ZW50OiAnc2VsZWN0aW9uLWNoYW5nZWQtdG8tdW5ncm91cGVkLWZyb20taGFzaCcsXG4gICAgICAgICAgaW5kZXg6IGdldFF1ZXJ5U2VsZWN0aW9uLmluZGV4LFxuICAgICAgICAgIG5vdGU6ICdIZWxwZXJTaW1wbGUgZXhwbGljaXRseSBvcGVuZWQgd2lkZ2V0IHdpdGggaGFzaCBwYXJhbWV0ZXInXG4gICAgICAgIH0pXG4gICAgICAgIHNldFNlbGVjdGVkR3JvdXBJZChudWxsKVxuICAgICAgICBzZXRTZWxlY3RlZFVuZ3JvdXBlZEluZGV4KGdldFF1ZXJ5U2VsZWN0aW9uLmluZGV4KVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gtRVhFQycsIHtcbiAgICAgICAgZXZlbnQ6ICdxdWVyeXRhc2tsaXN0LXNlbGVjdGlvbi11c2VlZmZlY3Qtc2tpcHBlZCcsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICByZWFzb246ICFzaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbiA/ICdmbGFnLWlzLWZhbHNlJyA6ICduby1xdWVyeS1zZWxlY3Rpb24nLFxuICAgICAgICBjaGVjazoge1xuICAgICAgICAgIHNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uLFxuICAgICAgICAgIGhhc0dldFF1ZXJ5U2VsZWN0aW9uOiAhIWdldFF1ZXJ5U2VsZWN0aW9uXG4gICAgICAgIH0sXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgZXZlbnQ6ICdxdWVyeS1zZWxlY3Rpb24tdXNlZWZmZWN0LXNraXBwZWQnLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgcmVhc29uOiAhc2hvdWxkVXNlSW5pdGlhbFF1ZXJ5VmFsdWVGb3JTZWxlY3Rpb24gPyAnZmxhZy1pcy1mYWxzZScgOiAnbm8tcXVlcnktc2VsZWN0aW9uJyxcbiAgICAgICAgc2hvdWxkVXNlSW5pdGlhbFF1ZXJ5VmFsdWVGb3JTZWxlY3Rpb24sXG4gICAgICAgIGhhc0dldFF1ZXJ5U2VsZWN0aW9uOiAhIWdldFF1ZXJ5U2VsZWN0aW9uLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgfVxuICB9LCBbc2hvdWxkVXNlSW5pdGlhbFF1ZXJ5VmFsdWVGb3JTZWxlY3Rpb24sIGdldFF1ZXJ5U2VsZWN0aW9uLCB3aWRnZXRJZF0pXG4gIFxuICAvLyBHZXQgdGhlIGN1cnJlbnRseSBzZWxlY3RlZCBxdWVyeSBpdGVtXG4gIGNvbnN0IGdldFNlbGVjdGVkUXVlcnlJdGVtID0gKCk6IEltbXV0YWJsZU9iamVjdDxRdWVyeUl0ZW1UeXBlPiA9PiB7XG4gICAgLy8gUFJJT1JJVFkgMTogVXNlIGN1cnJlbnQgc3RhdGUgc2VsZWN0aW9uXG4gICAgLy8gVGhlIHN0YXRlIGlzIGluaXRpYWxpemVkIHdpdGggdGhlIGhhc2ggbWF0Y2ggKGlmIHByZXNlbnQpIG9yIGRlZmF1bHQgb3JkZXIsXG4gICAgLy8gYW5kIHVwZGF0ZWQgdmlhIHVzZUVmZmVjdCBpZiB0aGUgaGFzaCBjaGFuZ2VzIGxhdGVyLlxuICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICBldmVudDogJ2dldFNlbGVjdGVkUXVlcnlJdGVtLXN0YXRlLXNlbGVjdGlvbicsXG4gICAgICBzZWxlY3RlZEdyb3VwSWQsXG4gICAgICBoYXNTZWxlY3RlZEdyb3VwOiBzZWxlY3RlZEdyb3VwSWQgJiYgZ3JvdXBzW3NlbGVjdGVkR3JvdXBJZF0sXG4gICAgICBzZWxlY3RlZEdyb3VwUXVlcnlJbmRleCxcbiAgICAgIHNlbGVjdGVkVW5ncm91cGVkSW5kZXgsXG4gICAgICB1bmdyb3VwZWRMZW5ndGg6IHVuZ3JvdXBlZC5sZW5ndGgsXG4gICAgICBncm91cE9yZGVyTGVuZ3RoOiBncm91cE9yZGVyLmxlbmd0aCxcbiAgICAgIG5vdGU6ICdVc2luZyBzdGF0ZSBzZWxlY3Rpb24gKGhhc2gtYXdhcmUpJ1xuICAgIH0pXG4gICAgXG4gICAgLy8gSWYgYSBncm91cCBpcyBzZWxlY3RlZCwgZ2V0IHF1ZXJ5IGZyb20gdGhhdCBncm91cFxuICAgIGlmIChzZWxlY3RlZEdyb3VwSWQgJiYgZ3JvdXBzW3NlbGVjdGVkR3JvdXBJZF0pIHtcbiAgICAgIGNvbnN0IGdyb3VwSXRlbXMgPSBncm91cHNbc2VsZWN0ZWRHcm91cElkXS5pdGVtc1xuICAgICAgaWYgKGdyb3VwSXRlbXMubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCBpZHggPSBzZWxlY3RlZEdyb3VwUXVlcnlJbmRleCA8IGdyb3VwSXRlbXMubGVuZ3RoID8gc2VsZWN0ZWRHcm91cFF1ZXJ5SW5kZXggOiAwXG4gICAgICAgIGNvbnN0IHNlbGVjdGVkSXRlbSA9IGdyb3VwSXRlbXNbaWR4XVxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgICAgIGV2ZW50OiAnc2VsZWN0ZWQtcXVlcnktZnJvbS1ncm91cCcsXG4gICAgICAgICAgZ3JvdXBJZDogc2VsZWN0ZWRHcm91cElkLFxuICAgICAgICAgIGdyb3VwUXVlcnlJbmRleDogaWR4LFxuICAgICAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBzZWxlY3RlZEl0ZW0uY29uZmlnSWQsXG4gICAgICAgICAgcXVlcnlEaXNwbGF5TmFtZTogZ2V0UXVlcnlEaXNwbGF5TmFtZShzZWxlY3RlZEl0ZW0pXG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiBzZWxlY3RlZEl0ZW1cbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gT3RoZXJ3aXNlLCBnZXQgZnJvbSB1bmdyb3VwZWQgcXVlcmllc1xuICAgIGlmICh1bmdyb3VwZWQubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgaWR4ID0gc2VsZWN0ZWRVbmdyb3VwZWRJbmRleCA8IHVuZ3JvdXBlZC5sZW5ndGggPyBzZWxlY3RlZFVuZ3JvdXBlZEluZGV4IDogMFxuICAgICAgY29uc3Qgc2VsZWN0ZWRJdGVtID0gdW5ncm91cGVkW2lkeF0uaXRlbVxuICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgZXZlbnQ6ICdzZWxlY3RlZC1xdWVyeS1mcm9tLXVuZ3JvdXBlZCcsXG4gICAgICAgIHVuZ3JvdXBlZEluZGV4OiBpZHgsXG4gICAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBzZWxlY3RlZEl0ZW0uY29uZmlnSWQsXG4gICAgICAgIHF1ZXJ5RGlzcGxheU5hbWU6IGdldFF1ZXJ5RGlzcGxheU5hbWUoc2VsZWN0ZWRJdGVtKVxuICAgICAgfSlcbiAgICAgIHJldHVybiBzZWxlY3RlZEl0ZW1cbiAgICB9XG4gICAgXG4gICAgLy8gRmFsbGJhY2sgdG8gZmlyc3QgcXVlcnkgaXRlbVxuICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICBldmVudDogJ3NlbGVjdGVkLXF1ZXJ5LWZhbGxiYWNrJyxcbiAgICAgIG5vdGU6ICdObyBncm91cHMgb3IgdW5ncm91cGVkIHF1ZXJpZXMsIHVzaW5nIGZpcnN0IGl0ZW0nXG4gICAgfSlcbiAgICByZXR1cm4gc29ydGVkUXVlcnlJdGVtc1swXVxuICB9XG4gIFxuICBjb25zdCBzZWxlY3RlZFF1ZXJ5SXRlbSA9IGdldFNlbGVjdGVkUXVlcnlJdGVtKClcbiAgY29uc3Qgc2VsZWN0ZWRRdWVyeVJlYWxJbmRleCA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgIHJldHVybiBzb3J0ZWRRdWVyeUl0ZW1zLmZpbmRJbmRleChxID0+IHEuY29uZmlnSWQgPT09IHNlbGVjdGVkUXVlcnlJdGVtLmNvbmZpZ0lkKVxuICB9LCBbc29ydGVkUXVlcnlJdGVtcywgc2VsZWN0ZWRRdWVyeUl0ZW1dKVxuICBcbiAgLy8gSWYgb25seSBvbmUgcXVlcnkgdG90YWwsIGRvbid0IHNob3cgZHJvcGRvd25cbiAgY29uc3Qgc2hvd0Ryb3Bkb3duID0gc29ydGVkUXVlcnlJdGVtcy5sZW5ndGggPiAxIHx8IGdyb3VwT3JkZXIubGVuZ3RoID4gMFxuICBcbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT17YHJ1bnRpbWUtcXVlcnlfX3F1ZXJ5LWxpc3QgaC0xMDAgJHtjbGFzc05hbWV9YH0gY3NzPXtjc3NgXG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgIC5xdWVyeS1zZWxlY3RvciB7XG4gICAgICAgIHBhZGRpbmc6IDE2cHg7XG4gICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1zeXMtY29sb3ItZGl2aWRlci1zZWNvbmRhcnkpO1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICBnYXA6IDhweDtcbiAgICAgIH1cbiAgICAgIC5xdWVyeS1zZWxlY3Rvci1sYWJlbCB7XG4gICAgICAgIGZvbnQtc2l6ZTogMC44NzVyZW07XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1zeXMtY29sb3ItdGV4dC1wcmltYXJ5KTtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogNHB4O1xuICAgICAgfVxuICAgICAgLnF1ZXJ5LXNlbGVjdG9yIHNlbGVjdCB7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgfVxuICAgICAgLnF1ZXJ5LXRhc2stY29udGFpbmVyIHtcbiAgICAgICAgZmxleDogMTtcbiAgICAgICAgb3ZlcmZsb3c6IGF1dG87XG4gICAgICB9XG4gICAgYH0+XG4gICAgICB7LyogU2VhcmNoIExheWVyIGRyb3Bkb3duIG1vdmVkIHRvIFF1ZXJ5VGFzayBRdWVyeSB0YWIgY29udGVudCAqL31cbiAgICAgIFxuICAgICAgey8qIFNob3cgc2VsZWN0ZWQgcXVlcnkgZm9ybSBkaXJlY3RseSBiZWxvdyAqL31cbiAgICAgIHtzZWxlY3RlZFF1ZXJ5SXRlbSAmJiAoKCkgPT4ge1xuICAgICAgICBjb25zdCB3aWxsUGFzc0luaXRpYWxJbnB1dFZhbHVlID0gc2VsZWN0ZWRRdWVyeUl0ZW0uc2hvcnRJZCA9PT0gZWZmZWN0aXZlSW5pdGlhbFF1ZXJ5VmFsdWU/LnNob3J0SWRcbiAgICAgICAgY29uc3QgaW5pdGlhbElucHV0VmFsdWVUb1Bhc3MgPSB3aWxsUGFzc0luaXRpYWxJbnB1dFZhbHVlID8gZWZmZWN0aXZlSW5pdGlhbFF1ZXJ5VmFsdWU/LnZhbHVlIDogdW5kZWZpbmVkXG4gICAgICAgIFxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgICAgIGV2ZW50OiAnaW5pdGlhbElucHV0VmFsdWUtYmVpbmctcGFzc2VkLXRvLXF1ZXJ5dGFzaycsXG4gICAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgICAgc2VsZWN0ZWRRdWVyeUl0ZW1TaG9ydElkOiBzZWxlY3RlZFF1ZXJ5SXRlbS5zaG9ydElkLFxuICAgICAgICAgIHNlbGVjdGVkUXVlcnlJdGVtQ29uZmlnSWQ6IHNlbGVjdGVkUXVlcnlJdGVtLmNvbmZpZ0lkLFxuICAgICAgICAgIGVmZmVjdGl2ZUluaXRpYWxRdWVyeVZhbHVlU2hvcnRJZDogZWZmZWN0aXZlSW5pdGlhbFF1ZXJ5VmFsdWU/LnNob3J0SWQsXG4gICAgICAgICAgd2lsbFBhc3NJbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgICAgICBpbml0aWFsSW5wdXRWYWx1ZTogaW5pdGlhbElucHV0VmFsdWVUb1Bhc3MsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgcXVlcnktdGFzay1jb250YWluZXIgJHtpc0luUG9wcGVyID8gRk9DVVNBQkxFX0NPTlRBSU5FUl9DTEFTUyA6ICcnfWB9PlxuICAgICAgICAgICAgPFF1ZXJ5VGFza1xuICAgICAgICAgICAgICB3aWRnZXRJZD17d2lkZ2V0SWR9XG4gICAgICAgICAgICAgIGluZGV4PXtzZWxlY3RlZFF1ZXJ5UmVhbEluZGV4ID49IDAgPyBzZWxlY3RlZFF1ZXJ5UmVhbEluZGV4IDogMH1cbiAgICAgICAgICAgICAgdG90YWw9e3NvcnRlZFF1ZXJ5SXRlbXMubGVuZ3RofVxuICAgICAgICAgICAgICBxdWVyeUl0ZW09e3NlbGVjdGVkUXVlcnlJdGVtfVxuICAgICAgICAgICAgICBpc0luUG9wcGVyPXtpc0luUG9wcGVyfVxuICAgICAgICAgICAgICBpbml0aWFsSW5wdXRWYWx1ZT17aW5pdGlhbElucHV0VmFsdWVUb1Bhc3N9XG4gICAgICAgICAgICAgIG9uSGFzaFBhcmFtZXRlclVzZWQ9e29uSGFzaFBhcmFtZXRlclVzZWR9XG4gICAgICAgICAgICBxdWVyeUl0ZW1zPXtzb3J0ZWRRdWVyeUl0ZW1zfVxuICAgICAgICAgICAgc2VsZWN0ZWRRdWVyeUluZGV4PXtzZWxlY3RlZFVuZ3JvdXBlZEluZGV4fVxuICAgICAgICAgICAgb25RdWVyeUNoYW5nZT17KGluZGV4KSA9PiBzZXRTZWxlY3RlZFVuZ3JvdXBlZEluZGV4KGluZGV4KX1cbiAgICAgICAgICAgIC8vIEdyb3VwaW5nIHByb3BzXG4gICAgICAgICAgICBncm91cHM9e2dyb3Vwc31cbiAgICAgICAgICAgIHVuZ3JvdXBlZD17dW5ncm91cGVkfVxuICAgICAgICAgICAgLy8gR3JhcGhpY3MgbGF5ZXIgcHJvcHNcbiAgICAgICAgICAgIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQ9e3VzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHR9XG4gICAgICAgICAgICBncmFwaGljc0xheWVyPXtncmFwaGljc0xheWVyfVxuICAgICAgICAgICAgbWFwVmlldz17bWFwVmlld31cbiAgICAgICAgICAgIG9uSW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXI9e29uSW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXJ9XG4gICAgICAgICAgICBvbkNsZWFyR3JhcGhpY3NMYXllcj17b25DbGVhckdyYXBoaWNzTGF5ZXJ9XG4gICAgICAgICAgICBncm91cE9yZGVyPXtncm91cE9yZGVyfVxuICAgICAgICAgICAgc2VsZWN0ZWRHcm91cElkPXtzZWxlY3RlZEdyb3VwSWR9XG4gICAgICAgICAgICBzZWxlY3RlZEdyb3VwUXVlcnlJbmRleD17c2VsZWN0ZWRHcm91cFF1ZXJ5SW5kZXh9XG4gICAgICAgICAgICBvbkdyb3VwQ2hhbmdlPXsoZ3JvdXBJZCkgPT4gc2V0U2VsZWN0ZWRHcm91cElkKGdyb3VwSWQpfVxuICAgICAgICAgICAgb25Hcm91cFF1ZXJ5Q2hhbmdlPXsoaW5kZXgpID0+IHNldFNlbGVjdGVkR3JvdXBRdWVyeUluZGV4KGluZGV4KX1cbiAgICAgICAgICAgIG9uVW5ncm91cGVkQ2hhbmdlPXsoaW5kZXgpID0+IHNldFNlbGVjdGVkVW5ncm91cGVkSW5kZXgoaW5kZXgpfVxuICAgICAgICAgICAgcmVzdWx0c01vZGU9e3Jlc3VsdHNNb2RlfVxuICAgICAgICAgICAgb25SZXN1bHRzTW9kZUNoYW5nZT17b25SZXN1bHRzTW9kZUNoYW5nZX1cbiAgICAgICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkcz17YWNjdW11bGF0ZWRSZWNvcmRzfVxuICAgICAgICAgICAgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2U9e29uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlfVxuICAgICAgICAgICAgYWN0aXZlVGFiPXthY3RpdmVUYWJ9XG4gICAgICAgICAgICBvblRhYkNoYW5nZT17b25UYWJDaGFuZ2V9XG4gICAgICAgICAgICAgIC8vIE5vIG9uTmF2QmFjayAtIG5vIG5hdmlnYXRpb24gbmVlZGVkXG4gICAgICAgICAgICAvPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApXG4gICAgICB9KSgpfVxuICAgIDwvZGl2PlxuICApXG59XG5cblxuXG4iLCIvKiogQGpzeCBqc3ggKi9cclxuaW1wb3J0IHsgUmVhY3QsIFJlYWN0UmVkdXgsIHR5cGUgSU1TdGF0ZSwganN4LCBjc3MsIGNsYXNzTmFtZXMsIHR5cGUgSW1tdXRhYmxlQXJyYXksIHR5cGUgVXNlRGF0YVNvdXJjZSwgaG9va3MgfSBmcm9tICdqaW11LWNvcmUnXHJcbmltcG9ydCB7IFNlbGVjdCwgVG9vbHRpcCwgQnV0dG9uIH0gZnJvbSAnamltdS11aSdcclxuaW1wb3J0IHsgdHlwZSBDcmVhdGVUb29sVHlwZSwgU3BhdGlhbEZpbHRlclR5cGUsIHR5cGUgU3BhdGlhbEZpbHRlck9iaiwgdHlwZSBTcGF0aWFsUmVsYXRpb24sIFVuaXRUeXBlIH0gZnJvbSAnLi4vY29uZmlnJ1xyXG5pbXBvcnQgZGVmYXVsdE1lc3NhZ2UgZnJvbSAnLi90cmFuc2xhdGlvbnMvZGVmYXVsdCdcclxuaW1wb3J0IHsgR2VvbWV0cnlGcm9tRGF0YVNvdXJjZSB9IGZyb20gJy4vZ2VvbWV0cnktZnJvbS1kcydcclxuaW1wb3J0IHsgR2VvbWV0cnlGcm9tTWFwIH0gZnJvbSAnLi9nZW9tZXRyeS1mcm9tLW1hcCdcclxuaW1wb3J0IHsgR2VvbWV0cnlGcm9tRHJhdyB9IGZyb20gJy4vZ2VvbWV0cnktZnJvbS1kcmF3J1xyXG5pbXBvcnQgeyBJbmZvT3V0bGluZWQgfSBmcm9tICdqaW11LWljb25zL291dGxpbmVkL3N1Z2dlc3RlZC9pbmZvJ1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBRdWVyeVRhc2tJdGVtUHJvcHMge1xyXG4gIHdpZGdldElkOiBzdHJpbmdcclxuICBsYWJlbDogc3RyaW5nXHJcbiAgZGVzYzogc3RyaW5nXHJcbiAgZHNFbmFibGVCdWZmZXI6IGJvb2xlYW5cclxuICBkc0J1ZmZlckRpc3RhbmNlOiBudW1iZXJcclxuICBkc0J1ZmZlclVuaXQ6IFVuaXRUeXBlXHJcbiAgZHJhd0VuYWJsZUJ1ZmZlcjogYm9vbGVhblxyXG4gIGRyYXdCdWZmZXJEaXN0YW5jZTogbnVtYmVyXHJcbiAgZHJhd0J1ZmZlclVuaXQ6IFVuaXRUeXBlXHJcbiAgc3BhdGlhbFJlbGF0aW9uczogSW1tdXRhYmxlQXJyYXk8U3BhdGlhbFJlbGF0aW9uPlxyXG4gIHVzZURhdGFTb3VyY2VzOiBJbW11dGFibGVBcnJheTxVc2VEYXRhU291cmNlPlxyXG4gIHVzZVJ1bnRpbWVEYXRhOiBib29sZWFuXHJcbiAgZmlsdGVyVHlwZXM6IEltbXV0YWJsZUFycmF5PFNwYXRpYWxGaWx0ZXJUeXBlPlxyXG4gIG1hcFdpZGdldElkczogSW1tdXRhYmxlQXJyYXk8c3RyaW5nPlxyXG4gIGNyZWF0ZVRvb2xUeXBlczogSW1tdXRhYmxlQXJyYXk8Q3JlYXRlVG9vbFR5cGU+XHJcbiAgb25GaWx0ZXJDaGFuZ2U6IChmaWx0ZXI6IFNwYXRpYWxGaWx0ZXJPYmopID0+IHZvaWRcclxuICBvblJlbGF0aW9uQ2hhbmdlOiAocmVsOiBTcGF0aWFsUmVsYXRpb24pID0+IHZvaWRcclxuICBvbkJ1ZmZlckNoYW5nZTogKGRpc3RhbmNlOiBudW1iZXIsIHVuaXQ6IFVuaXRUeXBlKSA9PiB2b2lkXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBRdWVyeVRhc2tTcGF0aWFsRm9ybSAocHJvcHM6IFF1ZXJ5VGFza0l0ZW1Qcm9wcykge1xyXG4gIGNvbnN0IHtcclxuICAgIGxhYmVsLCBkZXNjLCBmaWx0ZXJUeXBlcywgbWFwV2lkZ2V0SWRzLCBvbkZpbHRlckNoYW5nZSwgb25SZWxhdGlvbkNoYW5nZSwgb25CdWZmZXJDaGFuZ2UsIHVzZURhdGFTb3VyY2VzLCBzcGF0aWFsUmVsYXRpb25zLCB1c2VSdW50aW1lRGF0YSxcclxuICAgIGRzRW5hYmxlQnVmZmVyLCBkc0J1ZmZlckRpc3RhbmNlLCBkc0J1ZmZlclVuaXQsIGRyYXdFbmFibGVCdWZmZXIsIGRyYXdCdWZmZXJEaXN0YW5jZSwgZHJhd0J1ZmZlclVuaXQsIGNyZWF0ZVRvb2xUeXBlcywgd2lkZ2V0SWRcclxuICB9ID0gcHJvcHNcclxuICBjb25zdCBnZXRJMThuTWVzc2FnZSA9IGhvb2tzLnVzZVRyYW5zbGF0aW9uKGRlZmF1bHRNZXNzYWdlKVxyXG4gIC8vIHVzZWQgdG8gc3RvcmUgdGhlIHNlbGVjdGlvbiBvZiB0aGUgZGF0YSBzb3VyY2UgaW4gb3JkZXIgdG8gdXBkYXRlIHRoZSBmaWx0ZXIgd2hlbiBvcHRpb24gY2hhbmdlc1xyXG4gIGNvbnN0IHNlbGVjdGVkR2VvbWV0cmllc1JlZiA9IFJlYWN0LnVzZVJlZjxhbnk+KG51bGwpXHJcbiAgY29uc3QgbWFwRXhpc3RzID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcclxuICAgIGlmIChtYXBXaWRnZXRJZHM/Lmxlbmd0aCA+IDApIHtcclxuICAgICAgY29uc3QgbWFwV2lkZ2V0SWQgPSBtYXBXaWRnZXRJZHNbMF1cclxuICAgICAgcmV0dXJuIHN0YXRlLmFwcENvbmZpZy53aWRnZXRzW21hcFdpZGdldElkXSAhPSBudWxsXHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2VcclxuICB9KVxyXG4gIGNvbnN0IGNhblVzZU1hcEZpbHRlciA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xyXG4gICAgcmV0dXJuIG1hcEV4aXN0cyAmJiAoZmlsdGVyVHlwZXM/LmluY2x1ZGVzKFNwYXRpYWxGaWx0ZXJUeXBlLkN1cnJlbnRNYXBFeHRlbnQpIHx8IGZpbHRlclR5cGVzPy5pbmNsdWRlcyhTcGF0aWFsRmlsdGVyVHlwZS5JbnRlcmFjdGl2ZURyYXdNb2RlKSlcclxuICB9LCBbZmlsdGVyVHlwZXMsIG1hcEV4aXN0c10pXHJcbiAgY29uc3Qgc3VwcG9ydGVkRmlsdGVyVHlwZXMgPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcclxuICAgIGNvbnN0IHJlc3VsdCA9IFtdXHJcbiAgICBpZiAodXNlRGF0YVNvdXJjZXM/Lmxlbmd0aCA+IDAgfHwgdXNlUnVudGltZURhdGEpIHtcclxuICAgICAgcmVzdWx0LnB1c2goeyB2YWx1ZTogJ2RhdGEnLCBsYWJlbDogZ2V0STE4bk1lc3NhZ2UoJ2ZlYXR1cmVGcm9tRHMnKSB9KVxyXG4gICAgfVxyXG4gICAgaWYgKGNhblVzZU1hcEZpbHRlciAmJiBmaWx0ZXJUeXBlcz8uaW5jbHVkZXMoU3BhdGlhbEZpbHRlclR5cGUuQ3VycmVudE1hcEV4dGVudCkpIHtcclxuICAgICAgcmVzdWx0LnB1c2goeyB2YWx1ZTogJ21hcCcsIGxhYmVsOiBnZXRJMThuTWVzc2FnZShgc3BhdGlhbEZpbHRlclR5cGVfJHtTcGF0aWFsRmlsdGVyVHlwZS5DdXJyZW50TWFwRXh0ZW50fWApIH0pXHJcbiAgICB9XHJcbiAgICBpZiAoY2FuVXNlTWFwRmlsdGVyICYmIGZpbHRlclR5cGVzPy5pbmNsdWRlcyhTcGF0aWFsRmlsdGVyVHlwZS5JbnRlcmFjdGl2ZURyYXdNb2RlKSkge1xyXG4gICAgICByZXN1bHQucHVzaCh7IHZhbHVlOiAnZHJhdycsIGxhYmVsOiBnZXRJMThuTWVzc2FnZShgc3BhdGlhbEZpbHRlclR5cGVfJHtTcGF0aWFsRmlsdGVyVHlwZS5JbnRlcmFjdGl2ZURyYXdNb2RlfWApIH0pXHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzdWx0XHJcbiAgfSwgW2NhblVzZU1hcEZpbHRlciwgdXNlRGF0YVNvdXJjZXMsIHVzZVJ1bnRpbWVEYXRhLCBnZXRJMThuTWVzc2FnZSwgZmlsdGVyVHlwZXNdKVxyXG5cclxuICBjb25zdCBbY3VycmVudEZpbHRlclR5cGUsIHNldEN1cnJlbnRGaWx0ZXJUeXBlXSA9IFJlYWN0LnVzZVN0YXRlKHN1cHBvcnRlZEZpbHRlclR5cGVzPy5bMF0/LnZhbHVlKVxyXG5cclxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgLy8gaW4gb3JkZXIgdG8gYXZvaWQgaW52YWxpZCBvcHRpb24gYmVpbmcgc2VsZWN0ZWRcclxuICAgIGlmIChjdXJyZW50RmlsdGVyVHlwZSAhPT0gJ25vbmUnICYmICFzdXBwb3J0ZWRGaWx0ZXJUeXBlcy5maW5kKChpdGVtKSA9PiBpdGVtLnZhbHVlID09PSBjdXJyZW50RmlsdGVyVHlwZSkpIHtcclxuICAgICAgc2V0Q3VycmVudEZpbHRlclR5cGUoc3VwcG9ydGVkRmlsdGVyVHlwZXM/LlswXT8udmFsdWUpXHJcbiAgICB9XHJcbiAgfSwgW2N1cnJlbnRGaWx0ZXJUeXBlLCBzdXBwb3J0ZWRGaWx0ZXJUeXBlc10pXHJcblxyXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICAvLyBjbGVhciB0aGUgcmVsYXRpb25zaGlwIGFuZCBidWZmZXIgaWYgZmlsdGVyIHR5cGUgaXMgbm90ICdkYXRhJ1xyXG4gICAgaWYgKGN1cnJlbnRGaWx0ZXJUeXBlID09PSAnbWFwJyB8fCBjdXJyZW50RmlsdGVyVHlwZSA9PT0gJ2RyYXcnIHx8IGN1cnJlbnRGaWx0ZXJUeXBlID09PSAnbm9uZScpIHtcclxuICAgICAgb25SZWxhdGlvbkNoYW5nZShudWxsKVxyXG4gICAgICBvbkJ1ZmZlckNoYW5nZSgwLCBVbml0VHlwZS5NZXRlcnMpXHJcbiAgICAgIG9uRmlsdGVyQ2hhbmdlKHsgZ2VvbWV0cnk6IG51bGwgfSlcclxuICAgIH1cclxuICAgIC8vIG5vIG5lZWQgdG8gdXBkYXRlIHRoZSBmaWx0ZXIgaWYgdGhlIGRhdGEgc291cmNlIGhhcyBzZWxlY3Rpb24gc2luY2UgaXQgd2lsbCBiZSB1cGRhdGVkIGluIHRoZSBoYW5kbGVTZWxlY3Rpb25DaGFuZ2UgbWV0aG9kXHJcbiAgICBpZiAoY3VycmVudEZpbHRlclR5cGUgPT09ICdkYXRhJyAmJiBzZWxlY3RlZEdlb21ldHJpZXNSZWYuY3VycmVudCA9PSBudWxsKSB7XHJcbiAgICAgIG9uRmlsdGVyQ2hhbmdlKHsgZ2VvbWV0cnk6IG51bGwgfSlcclxuICAgIH1cclxuICB9LCBbY3VycmVudEZpbHRlclR5cGUsIG9uUmVsYXRpb25DaGFuZ2UsIG9uQnVmZmVyQ2hhbmdlLCBvbkZpbHRlckNoYW5nZV0pXHJcblxyXG4gIGNvbnN0IGhhbmRsZUZpbHRlclR5cGVDaGFuZ2VkID0gUmVhY3QudXNlQ2FsbGJhY2soKGV2dCkgPT4geyBzZXRDdXJyZW50RmlsdGVyVHlwZShldnQudGFyZ2V0LnZhbHVlKSB9LCBbXSlcclxuXHJcbiAgY29uc3QgaGFuZGxlR2VvbWV0cnlDaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjaygoZ2VvbWV0cnk6IF9fZXNyaS5HZW9tZXRyeSwgbGF5ZXI/OiBfX2VzcmkuR3JhcGhpY3NMYXllciwgZ3JhcGhpYz86IF9fZXNyaS5HcmFwaGljLCBjbGVhckFmdGVyQXBwbHk/OiBib29sZWFuKSA9PiB7XHJcbiAgICBvbkZpbHRlckNoYW5nZSh7IGdlb21ldHJ5LCBncmFwaGljLCBsYXllciwgY2xlYXJBZnRlckFwcGx5IH0pXHJcbiAgfSwgW29uRmlsdGVyQ2hhbmdlXSlcclxuXHJcbiAgY29uc3QgaGFuZGxlU2VsZWN0aW9uQ2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soKGdlb21ldHJpZXMpID0+IHtcclxuICAgIHNlbGVjdGVkR2VvbWV0cmllc1JlZi5jdXJyZW50ID0gZ2VvbWV0cmllc1xyXG4gICAgb25GaWx0ZXJDaGFuZ2UoeyBnZW9tZXRyeTogZ2VvbWV0cmllcyB9KVxyXG4gIH0sIFtvbkZpbHRlckNoYW5nZV0pXHJcblxyXG4gIGlmICghKHVzZURhdGFTb3VyY2VzPy5sZW5ndGggPiAwIHx8IHVzZVJ1bnRpbWVEYXRhIHx8IGNhblVzZU1hcEZpbHRlcikpIHtcclxuICAgIHJldHVybiBudWxsXHJcbiAgfVxyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPGRpdiByb2xlPSdncm91cCcgY2xhc3NOYW1lPSdweC00IHBiLTQnIGFyaWEtbGFiZWw9e2xhYmVsfT5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ2Zvcm0tdGl0bGUgbXktMiBkLWZsZXggYWxpZ24taXRlbXMtY2VudGVyJywgeyAnZC1ub25lJzogIWxhYmVsICYmICFkZXNjIH0pfT5cclxuICAgICAgICB7bGFiZWwgJiYgPGRpdiBjbGFzc05hbWU9J21yLTIgdGl0bGUyJz57bGFiZWx9PC9kaXY+fVxyXG4gICAgICAgIHtkZXNjICYmIChcclxuICAgICAgICAgIDxUb29sdGlwIHBsYWNlbWVudD0nYm90dG9tJyBjc3M9e2Nzc2B3aGl0ZS1zcGFjZTogcHJlLWxpbmU7YH0gdGl0bGU9e2Rlc2N9PlxyXG4gICAgICAgICAgICA8QnV0dG9uIHNpemU9J3NtJyBpY29uIHR5cGU9J3RlcnRpYXJ5Jz5cclxuICAgICAgICAgICAgICA8SW5mb091dGxpbmVkIGNvbG9yPSd2YXIoLS1zeXMtY29sb3ItcHJpbWFyeS1tYWluKScgc2l6ZT0ncycvPlxyXG4gICAgICAgICAgICA8L0J1dHRvbj5cclxuICAgICAgICAgIDwvVG9vbHRpcD5cclxuICAgICAgICApfVxyXG4gICAgICA8L2Rpdj5cclxuICAgICAge3N1cHBvcnRlZEZpbHRlclR5cGVzLmxlbmd0aCA+IDAgJiYgKFxyXG4gICAgICAgIDxkaXY+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndGl0bGUzJz57Z2V0STE4bk1lc3NhZ2UoJ2Nob29zZUZpbHRlclR5cGUnKX08L2Rpdj5cclxuICAgICAgICAgIDxTZWxlY3RcclxuICAgICAgICAgICAgYXJpYS1sYWJlbD17Z2V0STE4bk1lc3NhZ2UoJ2Nob29zZUZpbHRlclR5cGUnKX1cclxuICAgICAgICAgICAgY3NzPXtjc3NgaGVpZ2h0OiAzMnB4O2B9XHJcbiAgICAgICAgICAgIHZhbHVlPXtjdXJyZW50RmlsdGVyVHlwZX1cclxuICAgICAgICAgICAgb25DaGFuZ2U9e2hhbmRsZUZpbHRlclR5cGVDaGFuZ2VkfVxyXG4gICAgICAgICAgPlxyXG4gICAgICAgICAgICA8b3B0aW9uIGtleT0nLScgdmFsdWU9J25vbmUnPi08L29wdGlvbj5cclxuICAgICAgICAgICAge3N1cHBvcnRlZEZpbHRlclR5cGVzLm1hcChpdGVtID0+IDxvcHRpb24ga2V5PXtpdGVtLnZhbHVlfSB2YWx1ZT17aXRlbS52YWx1ZX0+e2l0ZW0ubGFiZWx9PC9vcHRpb24+KX1cclxuICAgICAgICAgIDwvU2VsZWN0PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICApfVxyXG4gICAgICB7Y3VycmVudEZpbHRlclR5cGUgPT09ICdkYXRhJyAmJiAoXHJcbiAgICAgICAgPEdlb21ldHJ5RnJvbURhdGFTb3VyY2VcclxuICAgICAgICAgIGVuYWJsZUJ1ZmZlcj17ZHNFbmFibGVCdWZmZXJ9XHJcbiAgICAgICAgICBidWZmZXJEaXN0YW5jZT17ZHNCdWZmZXJEaXN0YW5jZX1cclxuICAgICAgICAgIGJ1ZmZlclVuaXQ9e2RzQnVmZmVyVW5pdH1cclxuICAgICAgICAgIHNwYXRpYWxSZWxhdGlvbnM9e3NwYXRpYWxSZWxhdGlvbnN9XHJcbiAgICAgICAgICB1c2VEYXRhU291cmNlcz17dXNlRGF0YVNvdXJjZXN9XHJcbiAgICAgICAgICB1c2VSdW50aW1lRGF0YT17dXNlUnVudGltZURhdGF9XHJcbiAgICAgICAgICBvblNlbGVjdGlvbkNoYW5nZT17aGFuZGxlU2VsZWN0aW9uQ2hhbmdlfVxyXG4gICAgICAgICAgb25SZWxhdGlvbkNoYW5nZT17b25SZWxhdGlvbkNoYW5nZX1cclxuICAgICAgICAgIG9uQnVmZmVyQ2hhbmdlPXtvbkJ1ZmZlckNoYW5nZX1cclxuICAgICAgICAvPlxyXG4gICAgICApfVxyXG4gICAgICB7Y3VycmVudEZpbHRlclR5cGUgPT09ICdtYXAnICYmIChcclxuICAgICAgICA8R2VvbWV0cnlGcm9tTWFwXHJcbiAgICAgICAgICBtYXBXaWRnZXRJZHM9e21hcFdpZGdldElkc31cclxuICAgICAgICAgIGNyZWF0ZVRvb2xUeXBlcz17Y3JlYXRlVG9vbFR5cGVzfVxyXG4gICAgICAgICAgb25HZW9tZXRyeUNoYW5nZT17aGFuZGxlR2VvbWV0cnlDaGFuZ2V9XHJcbiAgICAgICAgLz5cclxuICAgICAgKX1cclxuICAgICAge2N1cnJlbnRGaWx0ZXJUeXBlID09PSAnZHJhdycgJiYgKFxyXG4gICAgICAgIDxHZW9tZXRyeUZyb21EcmF3XHJcbiAgICAgICAgICBlbmFibGVCdWZmZXI9e2RyYXdFbmFibGVCdWZmZXJ9XHJcbiAgICAgICAgICBidWZmZXJEaXN0YW5jZT17ZHJhd0J1ZmZlckRpc3RhbmNlfVxyXG4gICAgICAgICAgYnVmZmVyVW5pdD17ZHJhd0J1ZmZlclVuaXR9XHJcbiAgICAgICAgICBtYXBXaWRnZXRJZHM9e21hcFdpZGdldElkc31cclxuICAgICAgICAgIHdpZGdldElkPXt3aWRnZXRJZH1cclxuICAgICAgICAgIGNyZWF0ZVRvb2xUeXBlcz17Y3JlYXRlVG9vbFR5cGVzfVxyXG4gICAgICAgICAgb25HZW9tZXRyeUNoYW5nZT17aGFuZGxlR2VvbWV0cnlDaGFuZ2V9XHJcbiAgICAgICAgICBvbkJ1ZmZlckNoYW5nZT17b25CdWZmZXJDaGFuZ2V9XHJcbiAgICAgICAgLz5cclxuICAgICAgKX1cclxuICAgIDwvZGl2PlxyXG4gIClcclxufVxyXG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7XG4gIFJlYWN0LFxuICBqc3gsXG4gIGNzcyxcbiAgdHlwZSBJbW11dGFibGVPYmplY3QsXG4gIHR5cGUgSW1tdXRhYmxlQXJyYXksXG4gIHR5cGUgSU1TcWxFeHByZXNzaW9uLFxuICBEYXRhU291cmNlQ29tcG9uZW50LFxuICB0eXBlIERhdGFTb3VyY2UsXG4gIHR5cGUgVXNlRGF0YVNvdXJjZSxcbiAgSW1tdXRhYmxlLFxuICB0eXBlIEZlYXR1cmVMYXllckRhdGFTb3VyY2UsXG4gIGNsYXNzTmFtZXMsXG4gIENPTlNUQU5UUyxcbiAgdHlwZSBEYXRhUmVjb3JkLFxuICB0eXBlIERhdGFSZWNvcmRTZXQsXG4gIHR5cGUgUXVlcnlQYXJhbXMsXG4gIERhdGFTb3VyY2VTdGF0dXMsXG4gIERhdGFSZWNvcmRTZXRDaGFuZ2VNZXNzYWdlLFxuICBEYXRhUmVjb3Jkc1NlbGVjdGlvbkNoYW5nZU1lc3NhZ2UsXG4gIFJlY29yZFNldENoYW5nZVR5cGUsXG4gIE1lc3NhZ2VNYW5hZ2VyLFxuICBNdXRhYmxlU3RvcmVNYW5hZ2VyLFxuICBEYXRhQWN0aW9uTWFuYWdlcixcbiAgRGF0YUxldmVsLFxuICB0eXBlIFF1ZXJpYWJsZURhdGFTb3VyY2UsXG4gIHR5cGUgRmVhdHVyZUxheWVyUXVlcnlQYXJhbXMsXG4gIGhvb2tzLFxuICBsb2Rhc2gsXG4gIERhdGFTb3VyY2VNYW5hZ2VyLFxuICBmb2N1c0VsZW1lbnRJbktleWJvYXJkTW9kZSxcbiAgUmVhY3RSZWR1eCxcbiAgdHlwZSBJTVN0YXRlLFxuICB0eXBlIEZlYXR1cmVEYXRhUmVjb3JkXG59IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IEJ1dHRvbiwgVG9vbHRpcCwgRk9DVVNBQkxFX0NPTlRBSU5FUl9DTEFTUywgVGFicywgVGFiLCBTZWxlY3QgfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHsgSW5mb091dGxpbmVkIH0gZnJvbSAnamltdS1pY29ucy9vdXRsaW5lZC9zdWdnZXN0ZWQvaW5mbydcbmltcG9ydCB7IFRyYXNoT3V0bGluZWQgfSBmcm9tICdqaW11LWljb25zL291dGxpbmVkL2VkaXRvci90cmFzaCdcbmltcG9ydCB7IFBhZ2luZ1R5cGUsIHR5cGUgUXVlcnlJdGVtVHlwZSwgdHlwZSBTcGF0aWFsRmlsdGVyT2JqLCBTZWxlY3Rpb25UeXBlIH0gZnJvbSAnLi4vY29uZmlnJ1xuaW1wb3J0IHsgUXVlcnlUYXNrRm9ybSB9IGZyb20gJy4vcXVlcnktdGFzay1mb3JtJ1xuaW1wb3J0IHsgUXVlcnlUYXNrUmVzdWx0IH0gZnJvbSAnLi9xdWVyeS1yZXN1bHQnXG5pbXBvcnQgeyBEYXRhU291cmNlVGlwLCB1c2VEYXRhU291cmNlRXhpc3RzLCBFcnJvck1lc3NhZ2UgfSBmcm9tICd3aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbidcbmltcG9ydCB7IFF1ZXJ5VGFza0xhYmVsIH0gZnJvbSAnLi9xdWVyeS10YXNrLWxhYmVsJ1xuaW1wb3J0IHsgdXNlWm9vbVRvUmVjb3JkcyB9IGZyb20gJy4vaG9va3MvdXNlLXpvb20tdG8tcmVjb3JkcydcbmltcG9ydCB7IERFRkFVTFRfUVVFUllfSVRFTSB9IGZyb20gJy4uL2RlZmF1bHQtcXVlcnktaXRlbSdcbmltcG9ydCB7IGdlbmVyYXRlUXVlcnlQYXJhbXMsIGV4ZWN1dGVRdWVyeSwgZXhlY3V0ZUNvdW50UXVlcnkgfSBmcm9tICcuL3F1ZXJ5LXV0aWxzJ1xuaW1wb3J0IHsgbWVyZ2VSZXN1bHRzSW50b0FjY3VtdWxhdGVkLCByZW1vdmVSZXN1bHRzRnJvbUFjY3VtdWxhdGVkLCByZW1vdmVSZWNvcmRzRnJvbU9yaWdpblNlbGVjdGlvbnMgfSBmcm9tICcuL3Jlc3VsdHMtbWFuYWdlbWVudC11dGlscydcbmltcG9ydCB7IE1lbnVPdXRsaW5lZCB9IGZyb20gJ2ppbXUtaWNvbnMvb3V0bGluZWQvZWRpdG9yL21lbnUnXG5pbXBvcnQgZGVmYXVsdE1lc3NhZ2UgZnJvbSAnLi90cmFuc2xhdGlvbnMvZGVmYXVsdCdcbmltcG9ydCB7IEFycm93TGVmdE91dGxpbmVkIH0gZnJvbSAnamltdS1pY29ucy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9hcnJvdy1sZWZ0J1xuaW1wb3J0IHsgTG9hZGluZ1Jlc3VsdCB9IGZyb20gJy4vbG9hZGluZy1yZXN1bHQnXG5pbXBvcnQgeyBjbGVhclNlbGVjdGlvbkluRGF0YVNvdXJjZXMsIHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoLCBmaW5kQ2xlYXJSZXN1bHRzQnV0dG9uLCBkaXNwYXRjaFNlbGVjdGlvbkV2ZW50IH0gZnJvbSAnLi9zZWxlY3Rpb24tdXRpbHMnXG5pbXBvcnQgeyBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyIH0gZnJvbSAnd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24nXG5cbmNvbnN0IGRlYnVnTG9nZ2VyID0gY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlcigpXG5cbi8vIEV2ZW50IGZpcmVkIHdoZW4gU3FsRXhwcmVzc2lvblJ1bnRpbWUgY29udmVydHMgaGFzaCB2YWx1ZSBmcm9tIHN0cmluZyB0byBhcnJheSBmb3JtYXRcbmNvbnN0IFFVRVJZU0lNUExFX0hBU0hfVkFMVUVfQ09OVkVSVEVEX0VWRU5UID0gJ3F1ZXJ5c2ltcGxlLWhhc2gtdmFsdWUtY29udmVydGVkJ1xuXG4vLyBFdmVudCBmaXJlZCB3aGVuIGEgaGFzaC10cmlnZ2VyZWQgcXVlcnkgZXhlY3V0aW9uIGNvbXBsZXRlcyBzdWNjZXNzZnVsbHlcbi8vIFRoaXMgYWxsb3dzIEhlbHBlclNpbXBsZSB0byB0cmFjayB3aGljaCBoYXNoIHBhcmFtZXRlcnMgaGF2ZSBiZWVuIGV4ZWN1dGVkXG5jb25zdCBRVUVSWVNJTVBMRV9IQVNIX1FVRVJZX0VYRUNVVEVEX0VWRU5UID0gJ3F1ZXJ5c2ltcGxlLWhhc2gtcXVlcnktZXhlY3V0ZWQnXG5cbmV4cG9ydCBpbnRlcmZhY2UgUXVlcnlUYXNrUHJvcHMge1xuICB3aWRnZXRJZDogc3RyaW5nXG4gIGluZGV4OiBudW1iZXJcbiAgdG90YWw6IG51bWJlclxuICBxdWVyeUl0ZW06IEltbXV0YWJsZU9iamVjdDxRdWVyeUl0ZW1UeXBlPlxuICB3cmFwcGVkSW5Qb3BwZXI/OiBib29sZWFuXG4gIGNsYXNzTmFtZT86IHN0cmluZ1xuICBpc0luUG9wcGVyPzogYm9vbGVhblxuICBvbk5hdkJhY2s/OiAoKSA9PiB2b2lkXG4gIGluaXRpYWxJbnB1dFZhbHVlPzogc3RyaW5nXG4gIG9uSGFzaFBhcmFtZXRlclVzZWQ/OiAoc2hvcnRJZDogc3RyaW5nKSA9PiB2b2lkXG4gIHF1ZXJ5SXRlbVNob3J0SWQ/OiBzdHJpbmdcbiAgLy8gUHJvcHMgZm9yIFNlYXJjaCBMYXllciBkcm9wZG93biAod2hlbiBtdWx0aXBsZSBxdWVyaWVzKVxuICBxdWVyeUl0ZW1zPzogSW1tdXRhYmxlQXJyYXk8UXVlcnlJdGVtVHlwZT5cbiAgc2VsZWN0ZWRRdWVyeUluZGV4PzogbnVtYmVyXG4gIG9uUXVlcnlDaGFuZ2U/OiAoaW5kZXg6IG51bWJlcikgPT4gdm9pZFxuICAvLyBHcm91cGluZyBwcm9wc1xuICBncm91cHM/OiB7IFtncm91cElkOiBzdHJpbmddOiB7IGl0ZW1zOiBJbW11dGFibGVBcnJheTxRdWVyeUl0ZW1UeXBlPiwgZGlzcGxheU5hbWU6IHN0cmluZywgaWNvbj86IGFueSB9IH1cbiAgdW5ncm91cGVkPzogQXJyYXk8eyBpdGVtOiBJbW11dGFibGVPYmplY3Q8UXVlcnlJdGVtVHlwZT4sIGluZGV4OiBudW1iZXIgfT5cbiAgZ3JvdXBPcmRlcj86IHN0cmluZ1tdXG4gIHNlbGVjdGVkR3JvdXBJZD86IHN0cmluZyB8IG51bGxcbiAgc2VsZWN0ZWRHcm91cFF1ZXJ5SW5kZXg/OiBudW1iZXJcbiAgb25Hcm91cENoYW5nZT86IChncm91cElkOiBzdHJpbmcgfCBudWxsKSA9PiB2b2lkXG4gIG9uR3JvdXBRdWVyeUNoYW5nZT86IChpbmRleDogbnVtYmVyKSA9PiB2b2lkXG4gIG9uVW5ncm91cGVkQ2hhbmdlPzogKGluZGV4OiBudW1iZXIpID0+IHZvaWRcbiAgLy8gUmVzdWx0cyBtb2RlIHByb3BzXG4gIHJlc3VsdHNNb2RlPzogU2VsZWN0aW9uVHlwZVxuICBvblJlc3VsdHNNb2RlQ2hhbmdlPzogKG1vZGU6IFNlbGVjdGlvblR5cGUpID0+IHZvaWRcbiAgYWNjdW11bGF0ZWRSZWNvcmRzPzogRmVhdHVyZURhdGFSZWNvcmRbXVxuICBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZT86IChyZWNvcmRzOiBGZWF0dXJlRGF0YVJlY29yZFtdKSA9PiB2b2lkXG4gIC8vIEdyYXBoaWNzIGxheWVyIHByb3BzXG4gIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQ/OiBib29sZWFuXG4gIGdyYXBoaWNzTGF5ZXI/OiBfX2VzcmkuR3JhcGhpY3NMYXllclxuICBtYXBWaWV3PzogX19lc3JpLk1hcFZpZXcgfCBfX2VzcmkuU2NlbmVWaWV3XG4gIG9uSW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXI/OiAob3V0cHV0RFM6IERhdGFTb3VyY2UpID0+IFByb21pc2U8dm9pZD5cbiAgb25DbGVhckdyYXBoaWNzTGF5ZXI/OiAoKSA9PiB2b2lkXG4gIGFjdGl2ZVRhYj86ICdxdWVyeScgfCAncmVzdWx0cydcbiAgb25UYWJDaGFuZ2U/OiAodGFiOiAncXVlcnknIHwgJ3Jlc3VsdHMnKSA9PiB2b2lkXG59XG5cbi8vIEhlbHBlciBmdW5jdGlvbiB0byBnZXQgZGlzcGxheSBuYW1lIGZvciBxdWVyeSBpbiBkcm9wZG93blxuLy8gVXNlczogc2VhcmNoQWxpYXMgfHwgamltdUZpZWxkTmFtZSB8fCBpdGVtLm5hbWUgfHwgZmFsbGJhY2tcbmNvbnN0IGdldFF1ZXJ5RGlzcGxheU5hbWUgPSAoaXRlbTogSW1tdXRhYmxlT2JqZWN0PFF1ZXJ5SXRlbVR5cGU+KTogc3RyaW5nID0+IHtcbiAgLy8gRmlyc3QgcHJpb3JpdHk6IHNlYXJjaEFsaWFzIGlmIHNldFxuICBpZiAoaXRlbS5zZWFyY2hBbGlhcykge1xuICAgIHJldHVybiBpdGVtLnNlYXJjaEFsaWFzXG4gIH1cbiAgXG4gIC8vIFNlY29uZCBwcmlvcml0eTogZmllbGQgbmFtZSBmcm9tIFNRTCBleHByZXNzaW9uXG4gIGNvbnN0IGppbXVGaWVsZE5hbWUgPSBpdGVtLnNxbEV4cHJPYmo/LnBhcnRzPy5bMF0/LmppbXVGaWVsZE5hbWVcbiAgaWYgKGppbXVGaWVsZE5hbWUpIHtcbiAgICByZXR1cm4gamltdUZpZWxkTmFtZVxuICB9XG4gIFxuICAvLyBUaGlyZCBwcmlvcml0eTogaXRlbSBuYW1lXG4gIGlmIChpdGVtLm5hbWUpIHtcbiAgICByZXR1cm4gaXRlbS5uYW1lXG4gIH1cbiAgXG4gIC8vIEZhbGxiYWNrXG4gIHJldHVybiAnUXVlcnknXG59XG5cbmNvbnN0IHN0eWxlID0gY3NzYFxuICAmLndyYXBwZWQgLnF1ZXJ5LWZvcm0ge1xuICAgIGhlaWdodDogMTAwJTtcbiAgfVxuICAucXVlcnktdGFza19fY29udGVudCB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIHBhZGRpbmctdG9wOiA4cHg7XG4gICAgJjpoYXMoPiAucXVlcnktZm9ybV9faGVhZGVyID4gZGl2Om5vdCguZC1ub25lKSksICY6aGFzKD4gLnF1ZXJ5LXJlc3VsdCkge1xuICAgICAgcGFkZGluZy10b3A6IDE2cHg7XG4gICAgfVxuICB9XG4gIC5xdWVyeS1mb3JtX19oZWFkZXIge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgJi5oYXMtY29udGVudCB7XG4gICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tc3lzLWNvbG9yLWRpdmlkZXItc2Vjb25kYXJ5KTtcbiAgICAgIG1hcmdpbi1ib3R0b206IDZweDtcbiAgICAgIHBhZGRpbmctYm90dG9tOiA4cHg7XG4gICAgfVxuICAgIC5uYXYtYWN0aW9uIHtcbiAgICAgIGZsZXg6IDEgMSAwO1xuICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAuamltdS1idG4ge1xuICAgICAgICBtaW4td2lkdGg6IDI2cHg7XG4gICAgICB9XG4gICAgfVxuICAgIC5yZXN1bHQtbWVudSB7XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgIH1cbiAgfVxuYFxuXG5leHBvcnQgZnVuY3Rpb24gUXVlcnlUYXNrIChwcm9wczogUXVlcnlUYXNrUHJvcHMpIHtcbiAgY29uc3QgeyBxdWVyeUl0ZW0sIG9uTmF2QmFjaywgdG90YWwsIGlzSW5Qb3BwZXIgPSBmYWxzZSwgd3JhcHBlZEluUG9wcGVyID0gZmFsc2UsIGNsYXNzTmFtZSA9ICcnLCBpbmRleCwgaW5pdGlhbElucHV0VmFsdWUsIG9uSGFzaFBhcmFtZXRlclVzZWQsIHF1ZXJ5SXRlbXMsIHNlbGVjdGVkUXVlcnlJbmRleCwgb25RdWVyeUNoYW5nZSwgZ3JvdXBzLCB1bmdyb3VwZWQsIGdyb3VwT3JkZXIsIHNlbGVjdGVkR3JvdXBJZCwgc2VsZWN0ZWRHcm91cFF1ZXJ5SW5kZXgsIG9uR3JvdXBDaGFuZ2UsIG9uR3JvdXBRdWVyeUNoYW5nZSwgb25Vbmdyb3VwZWRDaGFuZ2UsIHJlc3VsdHNNb2RlLCBvblJlc3VsdHNNb2RlQ2hhbmdlLCBhY2N1bXVsYXRlZFJlY29yZHMsIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlLCB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0LCBncmFwaGljc0xheWVyLCBtYXBWaWV3LCBvbkluaXRpYWxpemVHcmFwaGljc0xheWVyLCBvbkNsZWFyR3JhcGhpY3NMYXllciwgYWN0aXZlVGFiOiBwcm9wQWN0aXZlVGFiLCBvblRhYkNoYW5nZTogcHJvcE9uVGFiQ2hhbmdlLCAuLi5vdGhlclByb3BzIH0gPSBwcm9wc1xuICBjb25zdCBnZXRJMThuTWVzc2FnZSA9IGhvb2tzLnVzZVRyYW5zbGF0aW9uKGRlZmF1bHRNZXNzYWdlKVxuICBjb25zdCB6b29tVG9SZWNvcmRzID0gdXNlWm9vbVRvUmVjb3JkcyhtYXBWaWV3KVxuICBjb25zdCBbc3RhZ2UsIHNldFN0YWdlXSA9IFJlYWN0LnVzZVN0YXRlKDApIC8vIDAgPSBmb3JtLCAxID0gcmVzdWx0cywgMiA9IGxvYWRpbmdcbiAgY29uc3QgW2ludGVybmFsQWN0aXZlVGFiLCBzZXRJbnRlcm5hbEFjdGl2ZVRhYl0gPSBSZWFjdC51c2VTdGF0ZTwncXVlcnknIHwgJ3Jlc3VsdHMnPigncXVlcnknKVxuICBcbiAgLy8gTG9nIHdoZW4gaW5pdGlhbElucHV0VmFsdWUgcHJvcCBpcyByZWNlaXZlZFxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSC1FWEVDJywge1xuICAgICAgZXZlbnQ6ICdxdWVyeXRhc2staW5pdGlhbGlucHV0dmFsdWUtcHJvcC1yZWNlaXZlZCcsXG4gICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICBxdWVyeUl0ZW1Db25maWdJZDogcHJvcHMucXVlcnlJdGVtLmNvbmZpZ0lkLFxuICAgICAgcXVlcnlJdGVtU2hvcnRJZDogcHJvcHMucXVlcnlJdGVtU2hvcnRJZCxcbiAgICAgIGhhc0luaXRpYWxJbnB1dFZhbHVlOiAhIXByb3BzLmluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgaW5pdGlhbElucHV0VmFsdWU6IHByb3BzLmluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgfSwgW3Byb3BzLmluaXRpYWxJbnB1dFZhbHVlLCBwcm9wcy53aWRnZXRJZCwgcHJvcHMucXVlcnlJdGVtLmNvbmZpZ0lkLCBwcm9wcy5xdWVyeUl0ZW1TaG9ydElkXSlcbiAgXG4gIC8vIENvbnRyb2xsZWQgdGFiIHN0YXRlOiB1c2UgcHJvcCBpZiBwcm92aWRlZCwgb3RoZXJ3aXNlIGludGVybmFsIHN0YXRlXG4gIGNvbnN0IGFjdGl2ZVRhYiA9IHByb3BBY3RpdmVUYWIgfHwgaW50ZXJuYWxBY3RpdmVUYWJcbiAgY29uc3Qgc2V0QWN0aXZlVGFiID0gUmVhY3QudXNlQ2FsbGJhY2soKHRhYjogJ3F1ZXJ5JyB8ICdyZXN1bHRzJykgPT4ge1xuICAgIGlmIChwcm9wT25UYWJDaGFuZ2UpIHtcbiAgICAgIHByb3BPblRhYkNoYW5nZSh0YWIpXG4gICAgfSBlbHNlIHtcbiAgICAgIHNldEludGVybmFsQWN0aXZlVGFiKHRhYilcbiAgICB9XG4gIH0sIFtwcm9wT25UYWJDaGFuZ2VdKVxuICBjb25zdCBbZW5hYmxlZCwgc2V0RW5hYmxlZF0gPSBSZWFjdC51c2VTdGF0ZSh0cnVlKVxuICBjb25zdCBbcmVzdWx0Q291bnQsIHNldFJlc3VsdENvdW50XSA9IFJlYWN0LnVzZVN0YXRlKDApXG4gIC8vIFRyYWNrIGlmIHdlJ3ZlIGFscmVhZHkgc2VsZWN0ZWQgcmVjb3JkcyBmb3IgdGhlIGN1cnJlbnQgcXVlcnkgcmVzdWx0c1xuICBjb25zdCBoYXNTZWxlY3RlZFJlY29yZHNSZWYgPSBSZWFjdC51c2VSZWYoZmFsc2UpXG4gIC8vIFRyYWNrIHF1ZXJ5IGV4ZWN1dGlvbiBjb3VudCB0byBmb3JjZSBRdWVyeVRhc2tSZXN1bHQgcmVtb3VudCBvbiBuZXcgcXVlcmllc1xuICBjb25zdCBxdWVyeUV4ZWN1dGlvbktleVJlZiA9IFJlYWN0LnVzZVJlZigwKVxuICBjb25zdCBxdWVyeVBhcmFtUmVmID0gUmVhY3QudXNlUmVmPFF1ZXJ5UGFyYW1zPihudWxsKVxuICBjb25zdCByZWNvcmRzUmVmID0gUmVhY3QudXNlUmVmPERhdGFSZWNvcmRbXT4obnVsbClcbiAgY29uc3QgW291dHB1dERTLCBzZXRPdXRwdXREU10gPSBSZWFjdC51c2VTdGF0ZTxEYXRhU291cmNlPihudWxsKVxuICBjb25zdCBbZGF0YVNvdXJjZSwgc2V0RGF0YVNvdXJjZV0gPSBSZWFjdC51c2VTdGF0ZTxEYXRhU291cmNlPihudWxsKVxuICBjb25zdCBbc3BhdGlhbEZpbHRlckVuYWJsZWQsIHNldFNwYXRpYWxGaWx0ZXJFbmFibGVkXSA9IFJlYWN0LnVzZVN0YXRlKHRydWUpXG4gIGNvbnN0IGF0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmogPSBSZWFjdC51c2VSZWY8SU1TcWxFeHByZXNzaW9uPihxdWVyeUl0ZW0uc3FsRXhwck9iailcbiAgY29uc3Qgc3BhdGlhbEZpbHRlck9iaiA9IFJlYWN0LnVzZVJlZihudWxsKVxuICBjb25zdCBiYWNrQnRuUmVmID0gUmVhY3QudXNlUmVmPEhUTUxCdXR0b25FbGVtZW50Pih1bmRlZmluZWQpXG4gIGNvbnN0IGNsZWFyUmVzdWx0QnRuUmVmID0gUmVhY3QudXNlUmVmPEhUTUxCdXR0b25FbGVtZW50Pih1bmRlZmluZWQpXG4gIGNvbnN0IFtkYXRhQWN0aW9uRmlsdGVyLCBzZXREYXRhQWN0aW9uRmlsdGVyXSA9IFJlYWN0LnVzZVN0YXRlKG51bGwpXG4gIGNvbnN0IHByZXZpb3VzQ29uZmlnSWRSZWYgPSBSZWFjdC51c2VSZWY8c3RyaW5nPihxdWVyeUl0ZW0uY29uZmlnSWQpXG4gIC8vIFRyYWNrIG1hbnVhbCB0YWIgc3dpdGNoZXMgdG8gcHJldmVudCBhdXRvLXN3aXRjaCB1c2VFZmZlY3QgZnJvbSBpbnRlcmZlcmluZ1xuICBjb25zdCBtYW51YWxUYWJTd2l0Y2hSZWYgPSBSZWFjdC51c2VSZWYoZmFsc2UpXG4gIC8vIFRyYWNrIHdoZW4gYSBxdWVyeSB3YXMganVzdCBleGVjdXRlZCAtIG9ubHkgYXV0by1zd2l0Y2ggYWZ0ZXIgcXVlcnkgZXhlY3V0aW9uIGNvbXBsZXRlc1xuICBjb25zdCBxdWVyeUp1c3RFeGVjdXRlZFJlZiA9IFJlYWN0LnVzZVJlZihmYWxzZSlcbiAgLy8gU3RvcmUgdGhlIGxhc3QgcnVudGltZSB6b29tIG92ZXJyaWRlIHZhbHVlIGZyb20gdGhlIGZvcm0gZm9yIHVzZSBieSBBZGQgdG8gTWFwIGFjdGlvblxuICBjb25zdCBsYXN0UnVudGltZVpvb21Ub1NlbGVjdGVkUmVmID0gUmVhY3QudXNlUmVmPGJvb2xlYW4gfCB1bmRlZmluZWQ+KHVuZGVmaW5lZClcbiAgLy8gRXJyb3Igc3RhdGVzIGZvciB1c2VyLWZhY2luZyBlcnJvcnNcbiAgY29uc3QgW3NlbGVjdGlvbkVycm9yLCBzZXRTZWxlY3Rpb25FcnJvcl0gPSBSZWFjdC51c2VTdGF0ZTxzdHJpbmc+KG51bGwpXG4gIGNvbnN0IFt6b29tRXJyb3IsIHNldFpvb21FcnJvcl0gPSBSZWFjdC51c2VTdGF0ZTxzdHJpbmc+KG51bGwpXG4gIC8vIFN0b3JlIHBlbmRpbmcgcXVlcnkgd2hlbiB3YWl0aW5nIGZvciBoYXNoIHZhbHVlIGNvbnZlcnNpb25cbiAgY29uc3QgcGVuZGluZ0hhc2hRdWVyeVJlZiA9IFJlYWN0LnVzZVJlZjx7XG4gICAgc3FsRXhwcjogSU1TcWxFeHByZXNzaW9uXG4gICAgc3BhdGlhbEZpbHRlcjogU3BhdGlhbEZpbHRlck9ialxuICAgIHJ1bnRpbWVab29tVG9TZWxlY3RlZD86IGJvb2xlYW5cbiAgfSB8IG51bGw+KG51bGwpXG5cbiAgY29uc3QgY3VycmVudEl0ZW0gPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1FVRVJZX0lURU0sIHF1ZXJ5SXRlbSlcbiAgY29uc3QgeyBpY29uLCBuYW1lLCBkaXNwbGF5TGFiZWwgfSA9IGN1cnJlbnRJdGVtXG4gIGNvbnN0IGRzRXhpc3RzOiBib29sZWFuID0gdXNlRGF0YVNvdXJjZUV4aXN0cyh7IHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCwgdXNlRGF0YVNvdXJjZUlkOiBjdXJyZW50SXRlbS51c2VEYXRhU291cmNlPy5kYXRhU291cmNlSWQgfSlcblxuICAvLyBEZWJ1ZyBsb2dnaW5nIGZvciB0YWIgY29udGVudCByZW5kZXJpbmdcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICBldmVudDogJ3F1ZXJ5LXRhYi1jb250ZW50LXJlbmRlcicsXG4gICAgICBhY3RpdmVUYWIsXG4gICAgICBlbmFibGVkLFxuICAgICAgZHNFeGlzdHMsXG4gICAgICBkYXRhU291cmNlOiBkYXRhU291cmNlID8gJ2V4aXN0cycgOiAnbnVsbCcsXG4gICAgICBxdWVyeUl0ZW1Db25maWdJZDogcXVlcnlJdGVtLmNvbmZpZ0lkLFxuICAgICAgbm90ZTogJ1F1ZXJ5IHRhYiBjb250ZW50IHN0YXRlIGNoZWNrJ1xuICAgIH0pXG4gIH0sIFthY3RpdmVUYWIsIGVuYWJsZWQsIGRzRXhpc3RzLCBkYXRhU291cmNlLCBxdWVyeUl0ZW0uY29uZmlnSWRdKVxuXG4gIC8vIERlYnVnIGxvZ2dpbmcgZm9yIFRhYiBjaGlsZHJlbiByZW5kZXJpbmdcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoYWN0aXZlVGFiID09PSAncXVlcnknKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICAgIGV2ZW50OiAncXVlcnktdGFiLWNoaWxkcmVuLXJlbmRlcicsXG4gICAgICAgIGFjdGl2ZVRhYixcbiAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZCxcbiAgICAgICAgbm90ZTogJ1F1ZXJ5IFRhYiBjaGlsZHJlbiBzaG91bGQgYmUgcmVuZGVyaW5nJ1xuICAgICAgfSlcbiAgICB9XG4gIH0sIFthY3RpdmVUYWIsIHF1ZXJ5SXRlbS5jb25maWdJZF0pXG5cbiAgaG9va3MudXNlRWZmZWN0T25jZSgoKSA9PiB7XG4gICAgLy8gZm9jdXMgdGhlIGJhY2sgYnV0dG9uIHdoZW4gaXQgaXMgcmVuZGVyZWRcbiAgICBmb2N1c0VsZW1lbnRJbktleWJvYXJkTW9kZShiYWNrQnRuUmVmLmN1cnJlbnQpXG4gIH0pXG5cbiAgLy8gR2V0IHRoZSBwYWdpbmF0aW9uIHN0eWxlIGZyb20gd2lkZ2V0IGNvbmZpZyAoTXVsdGlQYWdlIG9yIExhenlMb2FkL1NpbmdsZS1wYWdlKVxuICBjb25zdCBwYWdpbmdUeXBlSW5Db25maWcgPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xuICAgIGNvbnN0IHdpZGdldEpzb24gPSBzdGF0ZS5hcHBDb25maWcud2lkZ2V0c1twcm9wcy53aWRnZXRJZF1cbiAgICByZXR1cm4gd2lkZ2V0SnNvbi5jb25maWcucmVzdWx0UGFnaW5nU3R5bGVcbiAgfSlcblxuICAvLyBHZXQgdGhlIGluaXRpYWwgcGFnZSBzaXplIGZvciBzaW5nbGUtcGFnZSAoTGF6eUxvYWQpIHJlc3VsdHNcbiAgLy8gVGhpcyBhbGxvd3MgdXNlcnMgdG8gY29uZmlndXJlIGhvdyBtYW55IHJlY29yZHMgYXJlIGxvYWRlZCBpbml0aWFsbHkgd2hlbiB1c2luZyBzaW5nbGUtcGFnZSBtb2RlXG4gIC8vIERlZmF1bHRzIHRvIDEwMCBpZiBub3QgY29uZmlndXJlZFxuICBjb25zdCBsYXp5TG9hZEluaXRpYWxQYWdlU2l6ZSA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XG4gICAgY29uc3Qgd2lkZ2V0SnNvbiA9IHN0YXRlLmFwcENvbmZpZy53aWRnZXRzW3Byb3BzLndpZGdldElkXVxuICAgIHJldHVybiB3aWRnZXRKc29uLmNvbmZpZy5sYXp5TG9hZEluaXRpYWxQYWdlU2l6ZVxuICB9KVxuXG5cbiAgLy8gV2F0Y2ggZm9yIHdoZW4gcmVzdWx0cyBhcmUgcmVhZHkgYW5kIHN3aXRjaCB0byBSZXN1bHRzIHRhYlxuICAvLyBPTkxZIGF1dG8tc3dpdGNoIHdoZW4gYSBxdWVyeSB3YXMganVzdCBleGVjdXRlZCBhbmQgcmVzdWx0cyBhcmUgbG9hZGVkXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gRG9uJ3QgYXV0by1zd2l0Y2ggaWYgdXNlciBtYW51YWxseSBzd2l0Y2hlZCB0YWJzXG4gICAgaWYgKG1hbnVhbFRhYlN3aXRjaFJlZi5jdXJyZW50KSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICAgIGV2ZW50OiAnYXV0by1zd2l0Y2gtc2tpcHBlZCcsXG4gICAgICAgIHJlYXNvbjogJ21hbnVhbC10YWItc3dpdGNoLWZsYWctc2V0JyxcbiAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICBxdWVyeUl0ZW1Db25maWdJZDogcXVlcnlJdGVtLmNvbmZpZ0lkLFxuICAgICAgICBhY3RpdmVUYWIsXG4gICAgICAgIHJlc3VsdENvdW50LFxuICAgICAgICBxdWVyeUp1c3RFeGVjdXRlZFJlZjogcXVlcnlKdXN0RXhlY3V0ZWRSZWYuY3VycmVudCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIC8vIEZPUkNFRDogQWx3YXlzIHVzZSBTaW1wbGVMaXN0IC0gd2UncmUgZG9uZSB3aXRoIGxhenkgbG9hZGluZyBpc3N1ZXNcbiAgICAvLyBSZWNvcmRzIGFyZSBhdmFpbGFibGUgaW1tZWRpYXRlbHksIHNvIHdlIGNhbiBzd2l0Y2ggYXMgc29vbiBhcyByZXN1bHRDb3VudCA+IDBcbiAgICBjb25zdCBpc1NpbXBsZUxpc3QgPSB0cnVlXG4gICAgXG4gICAgLy8gT05MWSBhdXRvLXN3aXRjaCB3aGVuOlxuICAgIC8vIDEuIEEgcXVlcnkgd2FzIGp1c3QgZXhlY3V0ZWQgKHF1ZXJ5SnVzdEV4ZWN1dGVkUmVmLmN1cnJlbnQgPT09IHRydWUpXG4gICAgLy8gMi4gV2UgaGF2ZSByZXN1bHRzIChyZXN1bHRDb3VudCA+IDApXG4gICAgLy8gMy4gUmVjb3JkcyBhcmUgYWN0dWFsbHkgbG9hZGVkOlxuICAgIC8vICAgIC0gRm9yIFNpbXBsZUxpc3Q6IHJlc3VsdENvdW50ID4gMCBpcyBzdWZmaWNpZW50IChyZWNvcmRzIGF2YWlsYWJsZSBpbW1lZGlhdGVseSlcbiAgICAvLyAgICAtIEZvciBMYXp5TG9hZDogcmVjb3Jkc1JlZi5jdXJyZW50IG11c3QgaGF2ZSBkYXRhICh3YWl0IGZvciBsYXp5IGxvYWRpbmcpXG4gICAgLy8gNC4gV2UncmUgY3VycmVudGx5IG9uIHRoZSBxdWVyeSB0YWIgKGRvbid0IHN3aXRjaCBpZiBhbHJlYWR5IG9uIHJlc3VsdHMpXG4gICAgY29uc3QgaGFzUmVjb3JkcyA9IGlzU2ltcGxlTGlzdCBcbiAgICAgID8gcmVzdWx0Q291bnQgPiAwIFxuICAgICAgOiAocmVjb3Jkc1JlZi5jdXJyZW50ICYmIHJlY29yZHNSZWYuY3VycmVudC5sZW5ndGggPiAwKVxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgIGV2ZW50OiAnYXV0by1zd2l0Y2gtY2hlY2snLFxuICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZCxcbiAgICAgIGFjdGl2ZVRhYixcbiAgICAgIHJlc3VsdENvdW50LFxuICAgICAgcXVlcnlKdXN0RXhlY3V0ZWRSZWY6IHF1ZXJ5SnVzdEV4ZWN1dGVkUmVmLmN1cnJlbnQsXG4gICAgICBpc1NpbXBsZUxpc3QsXG4gICAgICBwYWdpbmdUeXBlSW5Db25maWcsXG4gICAgICBoYXNSZWNvcmRzLFxuICAgICAgcmVjb3Jkc1JlZkxlbmd0aDogcmVjb3Jkc1JlZi5jdXJyZW50Py5sZW5ndGggfHwgMCxcbiAgICAgIG1hbnVhbFRhYlN3aXRjaFJlZjogbWFudWFsVGFiU3dpdGNoUmVmLmN1cnJlbnQsXG4gICAgICB3aWxsQXV0b1N3aXRjaDogcXVlcnlKdXN0RXhlY3V0ZWRSZWYuY3VycmVudCAmJiByZXN1bHRDb3VudCA+IDAgJiYgaGFzUmVjb3JkcyAmJiBhY3RpdmVUYWIgPT09ICdxdWVyeScsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIGlmIChxdWVyeUp1c3RFeGVjdXRlZFJlZi5jdXJyZW50ICYmIFxuICAgICAgICByZXN1bHRDb3VudCA+IDAgJiYgXG4gICAgICAgIGhhc1JlY29yZHMgJiYgXG4gICAgICAgIGFjdGl2ZVRhYiA9PT0gJ3F1ZXJ5Jykge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgICBldmVudDogJ2F1dG8tc3dpdGNoLXRyaWdnZXJlZCcsXG4gICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZCxcbiAgICAgICAgZnJvbVRhYjogYWN0aXZlVGFiLFxuICAgICAgICB0b1RhYjogJ3Jlc3VsdHMnLFxuICAgICAgICByZXN1bHRDb3VudCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgc2V0QWN0aXZlVGFiKCdyZXN1bHRzJylcbiAgICAgIHF1ZXJ5SnVzdEV4ZWN1dGVkUmVmLmN1cnJlbnQgPSBmYWxzZSAvLyBSZXNldCBhZnRlciBzd2l0Y2hpbmdcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgICAgZXZlbnQ6ICdhdXRvLXN3aXRjaC1jb21wbGV0ZWQnLFxuICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBxdWVyeUl0ZW0uY29uZmlnSWQsXG4gICAgICAgIHF1ZXJ5SnVzdEV4ZWN1dGVkUmVmUmVzZXQ6IHF1ZXJ5SnVzdEV4ZWN1dGVkUmVmLmN1cnJlbnQsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICB9XG4gIH0sIFtyZXN1bHRDb3VudCwgYWN0aXZlVGFiLCBwYWdpbmdUeXBlSW5Db25maWddKVxuXG4gIC8vIFZlcmlmeSBkcm9wZG93bnMgYXJlIHN5bmNocm9uaXplZCB3aXRoIGhhc2ggcGFyYW1ldGVyIHdoZW4gcHJlc2VudFxuICAvLyBUaGlzIGlzIGVzcGVjaWFsbHkgaW1wb3J0YW50IGZvciBncm91cGVkIHF1ZXJpZXMgd2hlcmUgZHJvcGRvd25zIG5lZWQgdG8gYmUgc3luY2hyb25pemVkXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gT25seSB2ZXJpZnkgaWYgd2UgaGF2ZSBhIGhhc2ggcGFyYW1ldGVyXG4gICAgaWYgKCFpbml0aWFsSW5wdXRWYWx1ZSB8fCAhcXVlcnlJdGVtLnNob3J0SWQpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBcbiAgICAvLyBWZXJpZnkgdGhlIGN1cnJlbnQgcXVlcnlJdGVtIG1hdGNoZXMgd2hhdCB3ZSBleHBlY3QgZnJvbSBoYXNoIHBhcmFtZXRlclxuICAgIGNvbnN0IGV4cGVjdGVkU2hvcnRJZCA9IHF1ZXJ5SXRlbS5zaG9ydElkXG4gICAgY29uc3QgaXNHcm91cGVkUXVlcnkgPSBxdWVyeUl0ZW0uZ3JvdXBJZCAhPT0gbnVsbCAmJiBxdWVyeUl0ZW0uZ3JvdXBJZCAhPT0gdW5kZWZpbmVkXG4gICAgXG4gICAgLy8gQ2hlY2sgaWYgZHJvcGRvd25zIGFyZSBjb3JyZWN0bHkgc2V0IGZvciBncm91cGVkIHF1ZXJpZXNcbiAgICBpZiAoaXNHcm91cGVkUXVlcnkpIHtcbiAgICAgIGNvbnN0IGV4cGVjdGVkR3JvdXBJZCA9IHF1ZXJ5SXRlbS5ncm91cElkXG4gICAgICBjb25zdCBhY3R1YWxHcm91cElkID0gc2VsZWN0ZWRHcm91cElkXG4gICAgICBjb25zdCBleHBlY3RlZFF1ZXJ5SW5kZXggPSBzZWxlY3RlZEdyb3VwUXVlcnlJbmRleFxuICAgICAgXG4gICAgICBpZiAoZXhwZWN0ZWRHcm91cElkICE9PSBhY3R1YWxHcm91cElkKSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgICAgZXZlbnQ6ICdkcm9wZG93bi1ncm91cC1taXNtYXRjaCcsXG4gICAgICAgICAgZXhwZWN0ZWRHcm91cElkLFxuICAgICAgICAgIGFjdHVhbEdyb3VwSWQsXG4gICAgICAgICAgcXVlcnlJdGVtU2hvcnRJZDogZXhwZWN0ZWRTaG9ydElkLFxuICAgICAgICAgIHdhcm5pbmc6ICdGaXJzdCBkcm9wZG93biBtYXkgbm90IGJlIHN5bmNocm9uaXplZCB3aXRoIGhhc2ggcGFyYW1ldGVyJ1xuICAgICAgICB9KVxuICAgICAgfSBlbHNlIGlmIChleHBlY3RlZFF1ZXJ5SW5kZXggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAvLyBWZXJpZnkgdGhlIHF1ZXJ5IGluZGV4IHdpdGhpbiB0aGUgZ3JvdXAgbWF0Y2hlc1xuICAgICAgICBjb25zdCBncm91cEl0ZW1zID0gZ3JvdXBzPy5bZXhwZWN0ZWRHcm91cElkXT8uaXRlbXNcbiAgICAgICAgaWYgKGdyb3VwSXRlbXMgJiYgZ3JvdXBJdGVtcy5sZW5ndGggPiBleHBlY3RlZFF1ZXJ5SW5kZXgpIHtcbiAgICAgICAgICBjb25zdCBleHBlY3RlZFF1ZXJ5Q29uZmlnSWQgPSBncm91cEl0ZW1zW2V4cGVjdGVkUXVlcnlJbmRleF0/LmNvbmZpZ0lkXG4gICAgICAgICAgY29uc3QgYWN0dWFsUXVlcnlDb25maWdJZCA9IHF1ZXJ5SXRlbS5jb25maWdJZFxuICAgICAgICAgIGlmIChleHBlY3RlZFF1ZXJ5Q29uZmlnSWQgIT09IGFjdHVhbFF1ZXJ5Q29uZmlnSWQpIHtcbiAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgICAgICAgIGV2ZW50OiAnZHJvcGRvd24tcXVlcnktaW5kZXgtbWlzbWF0Y2gnLFxuICAgICAgICAgICAgICBleHBlY3RlZFF1ZXJ5Q29uZmlnSWQsXG4gICAgICAgICAgICAgIGFjdHVhbFF1ZXJ5Q29uZmlnSWQsXG4gICAgICAgICAgICAgIGV4cGVjdGVkUXVlcnlJbmRleCxcbiAgICAgICAgICAgICAgcXVlcnlJdGVtU2hvcnRJZDogZXhwZWN0ZWRTaG9ydElkLFxuICAgICAgICAgICAgICB3YXJuaW5nOiAnU2Vjb25kIGRyb3Bkb3duIG1heSBub3QgYmUgc3luY2hyb25pemVkIHdpdGggaGFzaCBwYXJhbWV0ZXInXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgICAgICAgICBldmVudDogJ2Ryb3Bkb3ducy1zeW5jaHJvbml6ZWQnLFxuICAgICAgICAgICAgICBxdWVyeUl0ZW1TaG9ydElkOiBleHBlY3RlZFNob3J0SWQsXG4gICAgICAgICAgICAgIGdyb3VwSWQ6IGV4cGVjdGVkR3JvdXBJZCxcbiAgICAgICAgICAgICAgc2VsZWN0ZWRHcm91cFF1ZXJ5SW5kZXg6IGV4cGVjdGVkUXVlcnlJbmRleCxcbiAgICAgICAgICAgICAgbm90ZTogJ0Ryb3Bkb3ducyBzeW5jaHJvbml6ZWQgd2l0aCBoYXNoIHBhcmFtZXRlcidcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFVuZ3JvdXBlZCBxdWVyeSAtIHZlcmlmeSBpdCdzIHNlbGVjdGVkXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgICBldmVudDogJ2Ryb3Bkb3ducy1zeW5jaHJvbml6ZWQtdW5ncm91cGVkJyxcbiAgICAgICAgcXVlcnlJdGVtU2hvcnRJZDogZXhwZWN0ZWRTaG9ydElkLFxuICAgICAgICBub3RlOiAnVW5ncm91cGVkIHF1ZXJ5IGRyb3Bkb3duIHN5bmNocm9uaXplZCB3aXRoIGhhc2ggcGFyYW1ldGVyJ1xuICAgICAgfSlcbiAgICB9XG4gIH0sIFtpbml0aWFsSW5wdXRWYWx1ZSwgcXVlcnlJdGVtLnNob3J0SWQsIHF1ZXJ5SXRlbS5ncm91cElkLCBxdWVyeUl0ZW0uY29uZmlnSWQsIHNlbGVjdGVkR3JvdXBJZCwgc2VsZWN0ZWRHcm91cFF1ZXJ5SW5kZXgsIGdyb3Vwc10pXG5cbiAgY29uc3QgdXNlT3V0cHV0RHM6IEltbXV0YWJsZU9iamVjdDxVc2VEYXRhU291cmNlPiA9IFJlYWN0LnVzZU1lbW8oXG4gICAgKCkgPT5cbiAgICAgIEltbXV0YWJsZSh7XG4gICAgICAgIGRhdGFTb3VyY2VJZDogcXVlcnlJdGVtLm91dHB1dERhdGFTb3VyY2VJZCxcbiAgICAgICAgbWFpbkRhdGFTb3VyY2VJZDogcXVlcnlJdGVtLm91dHB1dERhdGFTb3VyY2VJZFxuICAgICAgfSksXG4gICAgW3F1ZXJ5SXRlbS5vdXRwdXREYXRhU291cmNlSWRdXG4gIClcblxuICBjb25zdCB1cGRhdGVEYXRhU291cmNlID0gUmVhY3QudXNlQ2FsbGJhY2soKGRzPzogRGF0YVNvdXJjZSkgPT4ge1xuICAgIGNvbnN0IGN1cnJlbnREcyA9IGRzID8/IGRhdGFTb3VyY2VcbiAgICAvLyBzaG91bGQgZGlzYWJsZSBzcGF0aWFsIGZpbHRlciBpZiB0aGUgZGF0YVNvdXJjZSBpcyBhbiBvdXRwdXQgZHMgYW5kIGl0IGFscmVhZHkgaGFzIHNwYXRpYWwgZmlsdGVyXG4gICAgaWYgKGN1cnJlbnREcz8uZ2V0RGF0YVNvdXJjZUpzb24oKT8uaXNPdXRwdXRGcm9tV2lkZ2V0KSB7XG4gICAgICBjb25zdCBxRHM6IFF1ZXJpYWJsZURhdGFTb3VyY2UgPSBjdXJyZW50RHMgYXMgUXVlcmlhYmxlRGF0YVNvdXJjZVxuICAgICAgY29uc3QgcVBhcmFtcyA9IHFEcy5nZXRDdXJyZW50UXVlcnlQYXJhbXM/LigpIGFzIEZlYXR1cmVMYXllclF1ZXJ5UGFyYW1zXG4gICAgICBpZiAocVBhcmFtcy5nZW9tZXRyeSAhPSBudWxsKSB7XG4gICAgICAgIHNldFNwYXRpYWxGaWx0ZXJFbmFibGVkKGZhbHNlKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2V0U3BhdGlhbEZpbHRlckVuYWJsZWQodHJ1ZSlcbiAgICAgIH1cbiAgICB9XG4gIH0sIFtkYXRhU291cmNlXSlcblxuICBjb25zdCBoYW5kbGVTdGF0dXNDaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjaygoZW5hYmxlZDogYm9vbGVhbikgPT4ge1xuICAgIHNldEVuYWJsZWQoZW5hYmxlZClcbiAgICB1cGRhdGVEYXRhU291cmNlKClcbiAgfSwgW3VwZGF0ZURhdGFTb3VyY2VdKVxuXG4gIGNvbnN0IGhhbmRsZU91dHB1dERhdGFTb3VyY2VJbmZvQ2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soKGluZm8sIHByZUluZm8pID0+IHtcbiAgICBjb25zdCBvdXRwdXRJZCA9IHF1ZXJ5SXRlbS5vdXRwdXREYXRhU291cmNlSWRcbiAgICBjb25zdCBmaWx0ZXIgPSBpbmZvPy53aWRnZXRRdWVyaWVzID8gaW5mby53aWRnZXRRdWVyaWVzW2BzZXRGaWx0ZXItJHtvdXRwdXRJZH1gXSA6IG51bGxcbiAgICBpZiAoZmlsdGVyID09IG51bGwpIHsgLy8gZmlsdGVyIGlzIG51bGwgbWVhbnMgdGhlcmUgYXJlIGluY29tcGxldGUgcXVlcmllcywgaWdub3JlIHRoaXMgY2hhbmdlXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgY29uc3QgcHJlRmlsdGVyID0gcHJlSW5mbz8ud2lkZ2V0UXVlcmllcyA/IHByZUluZm8ud2lkZ2V0UXVlcmllc1tgc2V0RmlsdGVyLSR7b3V0cHV0SWR9YF0gOiBudWxsXG4gICAgaWYgKGZpbHRlcj8ud2hlcmUgIT09IHByZUZpbHRlcj8ud2hlcmUpIHtcbiAgICAgIHNldERhdGFBY3Rpb25GaWx0ZXIoZmlsdGVyKVxuICAgIH1cbiAgfSwgW3F1ZXJ5SXRlbS5vdXRwdXREYXRhU291cmNlSWRdKVxuXG4gIGNvbnN0IHB1Ymxpc2hEYXRhQ2xlYXJlZE1zZyA9IFJlYWN0LnVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICBpZiAoIW91dHB1dERTKSByZXR1cm5cbiAgICBjb25zdCBkYXRhUmVjb3JkU2V0Q2hhbmdlTWVzc2FnZSA9IG5ldyBEYXRhUmVjb3JkU2V0Q2hhbmdlTWVzc2FnZShwcm9wcy53aWRnZXRJZCwgUmVjb3JkU2V0Q2hhbmdlVHlwZS5SZW1vdmUsIFtvdXRwdXREUy5pZF0pXG4gICAgTWVzc2FnZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5wdWJsaXNoTWVzc2FnZShkYXRhUmVjb3JkU2V0Q2hhbmdlTWVzc2FnZSlcbiAgICBhd2FpdCBNZXNzYWdlTWFuYWdlci5nZXRJbnN0YW5jZSgpLnB1Ymxpc2hNZXNzYWdlKG5ldyBEYXRhUmVjb3Jkc1NlbGVjdGlvbkNoYW5nZU1lc3NhZ2UocHJvcHMud2lkZ2V0SWQsIFtdLCBbb3V0cHV0RFMuaWRdKSlcbiAgfSwgW3Byb3BzLndpZGdldElkLCBvdXRwdXREU10pXG5cbiAgLyoqXG4gICAqIENsZWFycyBhbGwgcXVlcnkgcmVzdWx0cyBmcm9tIHRoZSBVSSBhbmQgbWFwLlxuICAgKiBUaGlzIGlzIHRoZSBzaW5nbGUgc291cmNlIG9mIHRydXRoIGZvciBjbGVhcmluZyByZXN1bHRzLlxuICAgKiBJdCBjbGVhcnMgdGhlIHJlY29yZHMsIHJlc2V0cyB0aGUgcmVzdWx0IGNvdW50LCBjbGVhcnMgc2VsZWN0aW9uIGZyb20gdGhlIG1hcCxcbiAgICogcHVibGlzaGVzIGEgY2xlYXJlZCBtZXNzYWdlIHRvIHRoZSBtYXAsIHN3aXRjaGVzIGJhY2sgdG8gdGhlIFF1ZXJ5IHRhYixcbiAgICogYW5kIGluY3JlbWVudHMgdGhlIHF1ZXJ5IGV4ZWN1dGlvbiBrZXkgdG8gZm9yY2UgUXVlcnlUYXNrUmVzdWx0IHRvIHJlbW91bnQgd2l0aCBmcmVzaCBzdGF0ZS5cbiAgICovXG4gIGNvbnN0IGNsZWFyUmVzdWx0ID0gUmVhY3QudXNlQ2FsbGJhY2soYXN5bmMgKHJlYXNvbjogc3RyaW5nID0gJ3Vua25vd24nKSA9PiB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgZXZlbnQ6ICdjbGVhclJlc3VsdC1jYWxsZWQnLFxuICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgaGFzT3V0cHV0RFM6ICEhb3V0cHV0RFMsXG4gICAgICByZWFzb24sXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuXG4gICAgcmVjb3Jkc1JlZi5jdXJyZW50ID0gbnVsbFxuICAgIG91dHB1dERTPy5zZXRTdGF0dXMoRGF0YVNvdXJjZVN0YXR1cy5Ob3RSZWFkeSlcbiAgICBzZXRSZXN1bHRDb3VudCgwKVxuICAgIFxuICAgIC8vIE5PVEU6IEdyYXBoaWNzIGxheWVyIGNsZWFyaW5nIGlzIG5vdyBoYW5kbGVkIGluc2lkZSBjbGVhclNlbGVjdGlvbkluRGF0YVNvdXJjZXNcbiAgICAvLyBjYWxsZWQgYmVsb3cuIFdlIGVuc3VyZSB0aGlzIGlzIGF3YWl0ZWQgdG8gcHJldmVudCByYWNlIGNvbmRpdGlvbnMuXG4gICAgXG4gICAgLy8gQ2xlYXIgc2VsZWN0aW9uIGRpcmVjdGx5IGZyb20gZGF0YSBzb3VyY2UgdXNpbmcgdXRpbGl0eSBmdW5jdGlvblxuICAgIHRyeSB7XG4gICAgICBhd2FpdCBjbGVhclNlbGVjdGlvbkluRGF0YVNvdXJjZXMocHJvcHMud2lkZ2V0SWQsIG91dHB1dERTLCB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0LCBncmFwaGljc0xheWVyKVxuICAgICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgICBldmVudDogJ2NsZWFyUmVzdWx0LXNlbGVjdGlvbi1jbGVhcmVkJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgICAgZXZlbnQ6ICdjbGVhclJlc3VsdC1zZWxlY3Rpb24tY2xlYXItZmFpbGVkJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgfVxuICAgIFxuICAgIC8vIENsZWFyIHdpZGdldC1sZXZlbCBhY2N1bXVsYXRlZCByZWNvcmRzIHdoZW4gY2xlYXJpbmcgcmVzdWx0c1xuICAgIGlmIChvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZSkge1xuICAgICAgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UoW10pXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdhY2N1bXVsYXRlZC1yZWNvcmRzLWNsZWFyZWQtb24tY2xlYXItcmVzdWx0cycsXG4gICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZFxuICAgICAgfSlcbiAgICB9XG4gICAgXG4gICAgYXdhaXQgcHVibGlzaERhdGFDbGVhcmVkTXNnKClcbiAgICAvLyBTd2l0Y2ggYmFjayB0byBRdWVyeSB0YWIgd2hlbiBjbGVhcmluZyByZXN1bHRzXG4gICAgc2V0QWN0aXZlVGFiKCdxdWVyeScpXG4gICAgc2V0U3RhZ2UoMClcbiAgICBoYXNTZWxlY3RlZFJlY29yZHNSZWYuY3VycmVudCA9IGZhbHNlIC8vIFJlc2V0IHNlbGVjdGlvbiBmbGFnIHdoZW4gY2xlYXJpbmdcbiAgICAvLyBJbmNyZW1lbnQgcXVlcnkgZXhlY3V0aW9uIGtleSB0byBmb3JjZSBRdWVyeVRhc2tSZXN1bHQgcmVtb3VudCB3aXRoIGZyZXNoIHN0YXRlXG4gICAgcXVlcnlFeGVjdXRpb25LZXlSZWYuY3VycmVudCArPSAxXG4gICAgLy8gQ2xlYXIgZXJyb3Igc3RhdGVzIHdoZW4gY2xlYXJpbmcgcmVzdWx0c1xuICAgIHNldFNlbGVjdGlvbkVycm9yKG51bGwpXG4gICAgc2V0Wm9vbUVycm9yKG51bGwpXG5cbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICBldmVudDogJ2NsZWFyUmVzdWx0LWNvbXBsZXRlJyxcbiAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gIH0sIFtvdXRwdXREUywgcHVibGlzaERhdGFDbGVhcmVkTXNnLCBwcm9wcy53aWRnZXRJZCwgcXVlcnlJdGVtLmNvbmZpZ0lkLCBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZSwgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCwgZ3JhcGhpY3NMYXllcl0pXG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgZGF0YSBzb3VyY2UgY3JlYXRpb24gd2hlbiBzd2l0Y2hpbmcgYmV0d2VlbiBxdWVyeSBpdGVtcy5cbiAgICogV2hlbiBhIG5ldyBxdWVyeSBpdGVtIGlzIHNlbGVjdGVkIChlLmcuLCBzd2l0Y2hpbmcgZnJvbSBQYXJjZWwgdG8gTWFqb3IpLFxuICAgKiB0aGlzIGNsZWFycyBvbGQgcmVzdWx0cyB0byBlbnN1cmUgYWxsIGNsZWFudXAgbG9naWMgcnVucyBwcm9wZXJseS5cbiAgICogXG4gICAqIEBwYXJhbSBkcyAtIFRoZSBuZXdseSBjcmVhdGVkIGRhdGEgc291cmNlIGZvciB0aGUgc2VsZWN0ZWQgcXVlcnkgaXRlbVxuICAgKi9cbiAgY29uc3QgaGFuZGxlRGF0YVNvdXJjZUNyZWF0ZWQgPSBSZWFjdC51c2VDYWxsYmFjayhhc3luYyAoZHM6IERhdGFTb3VyY2UpID0+IHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICBldmVudDogJ2hhbmRsZURhdGFTb3VyY2VDcmVhdGVkLXN0YXJ0JyxcbiAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcblxuICAgIC8vIEluIFwiQWRkIHRvXCIgYW5kIFwiUmVtb3ZlIGZyb21cIiBtb2RlcywgcHJlc2VydmUgYWNjdW11bGF0ZWQgcmVjb3JkcyBhbmQgc2VsZWN0aW9uIC0gZG9uJ3QgY2xlYXJcbiAgICBpZiAoKHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uIHx8IHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb24pIFxuICAgICAgICAmJiBhY2N1bXVsYXRlZFJlY29yZHMgJiYgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ3ByZXNlcnZpbmctc2VsZWN0aW9uLW9uLXF1ZXJ5LXN3aXRjaC1oYW5kbGVEYXRhU291cmNlQ3JlYXRlZCcsXG4gICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgcmVzdWx0c01vZGUsXG4gICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoXG4gICAgICB9KVxuICAgICAgXG4gICAgICBzZXREYXRhU291cmNlKGRzKVxuICAgICAgdXBkYXRlRGF0YVNvdXJjZShkcylcbiAgICAgIHNldFN0YWdlKDApXG4gICAgICBzZXRBY3RpdmVUYWIoJ3F1ZXJ5JylcbiAgICAgIHJldHVybiAvLyBTa2lwIGNsZWFyaW5nIC0gcHJlc2VydmUgc2VsZWN0aW9uXG4gICAgfVxuICAgIFxuICAgIC8vIEZvciBcIk5ld1wiIG1vZGUsIGNsZWFyIG9sZCByZXN1bHRzXG4gICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgZXZlbnQ6ICdoYW5kbGVEYXRhU291cmNlQ3JlYXRlZC1jbGVhcmluZy1yZXN1bHRzLWZvci1uZXctbW9kZScsXG4gICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIGF3YWl0IGNsZWFyUmVzdWx0KCdoYW5kbGVEYXRhU291cmNlQ3JlYXRlZC1uZXctbW9kZScpXG5cbiAgICBzZXREYXRhU291cmNlKGRzKVxuICAgIHVwZGF0ZURhdGFTb3VyY2UoZHMpXG4gICAgc2V0U3RhZ2UoMClcbiAgICBzZXRBY3RpdmVUYWIoJ3F1ZXJ5JykgLy8gUmV0dXJuIHRvIFF1ZXJ5IHRhYiB3aGVuIHN3aXRjaGluZyBxdWVyaWVzXG4gIH0sIFt1cGRhdGVEYXRhU291cmNlLCBjbGVhclJlc3VsdCwgcmVzdWx0Q291bnQsIHJlc3VsdHNNb2RlLCBhY2N1bXVsYXRlZFJlY29yZHMsIHByb3BzLndpZGdldElkXSlcblxuICBjb25zdCBoYW5kbGVPdXRwdXREYXRhU291cmNlQ3JlYXRlZCA9IFJlYWN0LnVzZUNhbGxiYWNrKGFzeW5jIChkczogRGF0YVNvdXJjZSkgPT4ge1xuICAgIHNldE91dHB1dERTKGRzKVxuICAgIFxuICAgIC8vIENIRUNLIHJvb3REYXRhU291cmNlLm1hcCB0byBzZWUgaG93IGZyYW1ld29yayBhY2Nlc3NlcyBtYXAgdmlld1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBvcmlnaW5EYXRhU291cmNlcyA9IGRzLmdldE9yaWdpbkRhdGFTb3VyY2VzKClcbiAgICAgIGNvbnN0IG9yaWdpbkRTID0gb3JpZ2luRGF0YVNvdXJjZXM/LlswXVxuICAgICAgaWYgKG9yaWdpbkRTKSB7XG4gICAgICAgIGNvbnN0IHJvb3REUyA9IG9yaWdpbkRTLmdldFJvb3REYXRhU291cmNlKClcbiAgICAgICAgaWYgKHJvb3REUykge1xuICAgICAgICAgIC8vIEV4cG9zZSByb290RFMgdG8gd2luZG93IGZvciBjb25zb2xlIGluc3BlY3Rpb25cbiAgICAgICAgICA7KHdpbmRvdyBhcyBhbnkpLl9fcXVlcnlTaW1wbGVSb290RFMgPSByb290RFNcbiAgICAgICAgICA7KHdpbmRvdyBhcyBhbnkpLl9fcXVlcnlTaW1wbGVSb290RFNNYXAgPSAocm9vdERTIGFzIGFueSkubWFwXG4gICAgICAgICAgOyh3aW5kb3cgYXMgYW55KS5fX3F1ZXJ5U2ltcGxlT3JpZ2luRFMgPSBvcmlnaW5EU1xuICAgICAgICAgIFxuICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICAgICAgICBldmVudDogJ2NoZWNrLXJvb3QtZGF0YXNvdXJjZS1tYXAnLFxuICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgb3V0cHV0RFNJZDogZHMuaWQsXG4gICAgICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgICAgIHJvb3REU0lkOiByb290RFMuaWQsXG4gICAgICAgICAgICByb290RFNUeXBlOiByb290RFMudHlwZSxcbiAgICAgICAgICAgIGhhc1Jvb3REU01hcDogISEocm9vdERTIGFzIGFueSkubWFwLFxuICAgICAgICAgICAgcm9vdERTTWFwVHlwZTogKHJvb3REUyBhcyBhbnkpLm1hcCA/IHR5cGVvZiAocm9vdERTIGFzIGFueSkubWFwIDogJ25vbmUnLFxuICAgICAgICAgICAgcm9vdERTTWFwSWQ6IChyb290RFMgYXMgYW55KS5tYXA/LmlkIHx8ICdub25lJyxcbiAgICAgICAgICAgIGhhc1Jvb3REU01hcFZpZXc6ICEhKHJvb3REUyBhcyBhbnkpLm1hcD8udmlldyxcbiAgICAgICAgICAgIGhhc1Jvb3REU01hcFZpZXdzOiAhIShyb290RFMgYXMgYW55KS5tYXA/LnZpZXdzLFxuICAgICAgICAgICAgcm9vdERTTWFwVmlld3NMZW5ndGg6IChyb290RFMgYXMgYW55KS5tYXA/LnZpZXdzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgICAgIC8vIExvZyBzb21lIG1hcCBwcm9wZXJ0aWVzIGlmIGl0IGV4aXN0c1xuICAgICAgICAgICAgcm9vdERTTWFwS2V5czogKHJvb3REUyBhcyBhbnkpLm1hcCA/IE9iamVjdC5rZXlzKChyb290RFMgYXMgYW55KS5tYXApLmZpbHRlcihrZXkgPT4gXG4gICAgICAgICAgICAgICFrZXkuc3RhcnRzV2l0aCgnXycpICYmIFxuICAgICAgICAgICAgICB0eXBlb2YgKHJvb3REUyBhcyBhbnkpLm1hcFtrZXldICE9PSAnZnVuY3Rpb24nXG4gICAgICAgICAgICApLnNsaWNlKDAsIDIwKSA6IFtdLFxuICAgICAgICAgICAgLy8gTG9nIHRoYXQgb2JqZWN0cyBhcmUgYXZhaWxhYmxlIG9uIHdpbmRvdyBmb3IgY29uc29sZSBpbnNwZWN0aW9uXG4gICAgICAgICAgICBjb25zb2xlSW5zcGVjdGlvbjogJ0NoZWNrIHdpbmRvdy5fX3F1ZXJ5U2ltcGxlUm9vdERTLCB3aW5kb3cuX19xdWVyeVNpbXBsZVJvb3REU01hcCwgd2luZG93Ll9fcXVlcnlTaW1wbGVPcmlnaW5EUycsXG4gICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICB9KVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIElmIG1hcCBleGlzdHMsIGNoZWNrIGl0cyB2aWV3XG4gICAgICAgICAgY29uc3Qgcm9vdE1hcCA9IChyb290RFMgYXMgYW55KS5tYXBcbiAgICAgICAgICBpZiAocm9vdE1hcCkge1xuICAgICAgICAgICAgY29uc3QgdmlldyA9IHJvb3RNYXAudmlldyB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAocm9vdE1hcC52aWV3cz8uZ2V0SXRlbUF0Py4oMCkpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgKHJvb3RNYXAudmlld3M/Lmxlbmd0aCA+IDAgPyByb290TWFwLnZpZXdzWzBdIDogbnVsbClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgICAgICAgICAgZXZlbnQ6ICdjaGVjay1yb290LWRhdGFzb3VyY2UtbWFwLXZpZXcnLFxuICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgIGhhc1ZpZXc6ICEhdmlldyxcbiAgICAgICAgICAgICAgdmlld1R5cGU6IHZpZXc/LnR5cGUgfHwgJ25vbmUnLFxuICAgICAgICAgICAgICB2aWV3SWQ6IHZpZXc/LmlkIHx8ICdub25lJyxcbiAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgICBldmVudDogJ2NoZWNrLXJvb3QtZGF0YXNvdXJjZS1tYXAtZXJyb3InLFxuICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvciksXG4gICAgICAgIGVycm9yU3RhY2s6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgIH1cbiAgICBcbiAgICAvLyBJbml0aWFsaXplIGdyYXBoaWNzIGxheWVyIGxhemlseSBpZiBlbmFibGVkIGFuZCBub3QgYWxyZWFkeSBpbml0aWFsaXplZFxuICAgIGlmICh1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0ICYmIG9uSW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXIpIHtcbiAgICAgIGF3YWl0IG9uSW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXIoZHMpXG4gICAgICAvLyBBZnRlciBpbml0aWFsaXphdGlvbiwgZ3JhcGhpY3NMYXllciBhbmQgbWFwVmlldyBwcm9wcyBzaG91bGQgYmUgdXBkYXRlZFxuICAgICAgLy8gQnV0IHNpbmNlIHByb3BzIGNvbWUgZnJvbSByZWZzLCB3ZSBuZWVkIHRvIHdhaXQgZm9yIHdpZGdldCByZS1yZW5kZXJcbiAgICAgIC8vIEZvciBub3csIHVzZSB0aGUgcHJvcHMgdGhhdCB3aWxsIGJlIHVwZGF0ZWQgb24gbmV4dCByZW5kZXJcbiAgICB9XG4gICAgXG4gICAgLy8gSWYgaW4gXCJBZGQgdG9cIiBvciBcIlJlbW92ZSBmcm9tXCIgbW9kZSBhbmQgd2UgaGF2ZSBhY2N1bXVsYXRlZCByZWNvcmRzLCByZS1zZWxlY3QgdGhlbVxuICAgIC8vIFRoaXMgdXNlcyB0aGUgc2FtZSBsb2dpYyBhcyBhZnRlciBxdWVyeSBjb21wbGV0aW9uIC0gc2VsZWN0UmVjb3Jkc0FuZFB1Ymxpc2hcbiAgICAvLyBUaGlzIGVuc3VyZXMgcmVjb3JkcyBhcmUgc2VsZWN0ZWQgYm90aCBvbiB0aGUgbWFwIGFuZCBpbiB0aGUgUmVzdWx0cyB0YWJcbiAgICBpZiAoKHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uIHx8IHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb24pIFxuICAgICAgICAmJiBhY2N1bXVsYXRlZFJlY29yZHMgJiYgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgIC8vIFVzZSBhIGRlbGF5IHRvIGVuc3VyZSB0aGUgRFMgaXMgZnVsbHkgcmVhZHkgYW5kIGdyYXBoaWNzIGxheWVyIHByb3BzIGFyZSB1cGRhdGVkIGFmdGVyIHdpZGdldCByZS1yZW5kZXJcbiAgICAgIC8vIElmIGdyYXBoaWNzIGxheWVyIHdhcyBqdXN0IGluaXRpYWxpemVkLCB3YWl0IGEgYml0IGxvbmdlciBmb3IgcHJvcHMgdG8gdXBkYXRlXG4gICAgICBjb25zdCBkZWxheSA9ICh1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0ICYmIG9uSW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXIpID8gMjAwIDogMTAwXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgY29uc3QgZmVhdHVyZURTID0gZHMgYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICAgICAgICBpZiAoZmVhdHVyZURTICYmIGFjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGNvbnN0IHJlY29yZElkcyA9IGFjY3VtdWxhdGVkUmVjb3Jkcy5tYXAocmVjb3JkID0+IHJlY29yZC5nZXRJZCgpKVxuICAgICAgICAgIC8vIFVzZSB0aGUgc2FtZSBzZWxlY3RSZWNvcmRzQW5kUHVibGlzaCB0aGF0J3MgdXNlZCBhZnRlciBxdWVyeSBjb21wbGV0aW9uXG4gICAgICAgICAgLy8gVGhpcyB3aWxsIHNlbGVjdCByZWNvcmRzIG9uIHRoZSBtYXAgYW5kIHRyaWdnZXIgaGFuZGxlRGF0YVNvdXJjZUluZm9DaGFuZ2VcbiAgICAgICAgICAvLyBpbiBxdWVyeS1yZXN1bHQudHN4IHRvIHVwZGF0ZSBzZWxlY3RlZFJlY29yZHMgc3RhdGUgZm9yIHRoZSBSZXN1bHRzIHRhYlxuICAgICAgICAgIC8vIFVzZSBncmFwaGljcyBsYXllciBpZiBlbmFibGVkIChwcm9wcyBzaG91bGQgYmUgdXBkYXRlZCBhZnRlciB3aWRnZXQgcmUtcmVuZGVyKVxuICAgICAgICAgIDsoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCBzZWxlY3RSZWNvcmRzQW5kUHVibGlzaChcbiAgICAgICAgICAgICAgICAgIHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICAgICAgZmVhdHVyZURTLFxuICAgICAgICAgICAgICAgICAgcmVjb3JkSWRzLFxuICAgICAgICAgICAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzLFxuICAgICAgICAgICAgICAgICAgZmFsc2UsXG4gICAgICAgICAgICAgICAgICB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0LFxuICAgICAgICAgICAgICAgICAgZ3JhcGhpY3NMYXllcixcbiAgICAgICAgICAgICAgICAgIG1hcFZpZXdcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSByZWNvcmRzUmVmIHNvIHJlc3VsdHMgdGFiIHNob3dzIGFjY3VtdWxhdGVkIHJlY29yZHNcbiAgICAgICAgICAgICAgICByZWNvcmRzUmVmLmN1cnJlbnQgPSBhY2N1bXVsYXRlZFJlY29yZHNcbiAgICAgICAgICAgICAgICBzZXRSZXN1bHRDb3VudChhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoKVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdyZS1zZWxlY3RlZC1hY2N1bXVsYXRlZC1yZWNvcmRzLWFmdGVyLXF1ZXJ5LXN3aXRjaCcsXG4gICAgICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgICBvdXRwdXREU0lkOiBmZWF0dXJlRFMuaWQsXG4gICAgICAgICAgICAgICAgICByZWNvcmRzQ291bnQ6IGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGhcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIFZlcmlmeSB3aGF0J3MgYWN0dWFsbHkgc2VsZWN0ZWQgaW4gdGhlIERTIGFmdGVyIGEgZGVsYXlcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGRzID0gRGF0YVNvdXJjZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5nZXREYXRhU291cmNlKGZlYXR1cmVEUy5pZClcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkSW5EUyA9IGRzPy5nZXRTZWxlY3RlZFJlY29yZHMoKVxuICAgICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRJZHNJbkRTID0gZHM/LmdldFNlbGVjdGVkUmVjb3JkSWRzKCkgPz8gW11cbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50OiAndmVyaWZ5LXJlY29yZHMtYWZ0ZXItcmVzZWxlY3Rpb24nLFxuICAgICAgICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dERTSWQ6IGZlYXR1cmVEUy5pZCxcbiAgICAgICAgICAgICAgICAgICAgZXhwZWN0ZWRDb3VudDogYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgYWN0dWFsU2VsZWN0ZWRJbkRTOiBzZWxlY3RlZEluRFM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZElkc0luRFM6IHNlbGVjdGVkSWRzSW5EUy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgIHJlY29yZHNNYXRjaDogc2VsZWN0ZWRJbkRTPy5sZW5ndGggPT09IGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGhcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfSwgMjAwKVxuICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdyZS1zZWxlY3Rpb24tZmFpbGVkLWFmdGVyLXN3aXRjaCcsXG4gICAgICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicsXG4gICAgICAgICAgICAgICAgICBlcnJvclN0YWNrOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSgpXG4gICAgICAgIH1cbiAgICAgIH0sIDEwMClcbiAgICB9XG4gIH0sIFtyZXN1bHRzTW9kZSwgYWNjdW11bGF0ZWRSZWNvcmRzLCBwcm9wcy53aWRnZXRJZCwgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCwgb25Jbml0aWFsaXplR3JhcGhpY3NMYXllcl0pXG5cbiAgLy8gQ2xlYXIgcmVzdWx0cyB3aGVuIHF1ZXJ5IGl0ZW0gY2hhbmdlcyAoZS5nLiwgd2hlbiBuZXcgaGFzaCBwYXJhbWV0ZXIgdHJpZ2dlcnMgZGlmZmVyZW50IHF1ZXJ5KVxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIE9ubHkgY2xlYXIgaWYgd2UncmUgYWN0dWFsbHkgc3dpdGNoaW5nIHRvIGEgZGlmZmVyZW50IHF1ZXJ5IChub3QganVzdCByZS1yZW5kZXJpbmcpXG4gICAgY29uc3QgaXNTd2l0Y2hpbmdRdWVyaWVzID0gcHJldmlvdXNDb25maWdJZFJlZi5jdXJyZW50ICE9PSBxdWVyeUl0ZW0uY29uZmlnSWRcbiAgICBcbiAgICAvLyBPbmx5IGNsZWFyIHJlc3VsdHMgd2hlbiBzd2l0Y2hpbmcgcXVlcmllcyBpZiB3ZSdyZSBpbiBcIk5ld1wiIG1vZGVcbiAgICAvLyBJbiBcIkFkZCB0b1wiIGFuZCBcIlJlbW92ZSBmcm9tXCIgbW9kZXMsIHdlIHdhbnQgdG8gcHJlc2VydmUgYWNjdW11bGF0ZWQgcmVjb3JkcyBhY3Jvc3MgcXVlcnkgc3dpdGNoZXNcbiAgICBpZiAoaXNTd2l0Y2hpbmdRdWVyaWVzICYmIHJlc3VsdENvdW50ID4gMCAmJiByZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb24pIHtcbiAgICAgIC8vIFN0b3JlIHRoZSBvbGQgY29uZmlnSWQgYmVmb3JlIHVwZGF0aW5nXG4gICAgICBjb25zdCBvbGRDb25maWdJZCA9IHByZXZpb3VzQ29uZmlnSWRSZWYuY3VycmVudFxuICAgICAgLy8gVXBkYXRlIHRoZSByZWYgdG8gdHJhY2sgdGhlIG5ldyBxdWVyeVxuICAgICAgcHJldmlvdXNDb25maWdJZFJlZi5jdXJyZW50ID0gcXVlcnlJdGVtLmNvbmZpZ0lkXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ2NsZWFyaW5nLXJlc3VsdHMtb24tcXVlcnktc3dpdGNoLW5ldy1tb2RlJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICBvbGRDb25maWdJZCxcbiAgICAgICAgbmV3Q29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZCxcbiAgICAgICAgcmVzdWx0c01vZGVcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIC8vIENsZWFyIGltbWVkaWF0ZWx5IHdoZW4gc3dpdGNoaW5nIHF1ZXJpZXMsIGJ1dCB3cmFwIGluIHRyeS1jYXRjaCB0byBoYW5kbGVcbiAgICAgIC8vIHJhY2UgY29uZGl0aW9ucyB3aXRoIGZlYXR1cmUgaW5mbyB3aW5kb3dzIHRoYXQgbWlnaHQgYmUgcmVuZGVyaW5nXG4gICAgICB0cnkge1xuICAgICAgICBjbGVhclJlc3VsdCgncXVlcnktaXRlbS1zd2l0Y2gtbmV3LW1vZGUnKVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgLy8gTG9nIGZvciBkZWJ1Z2dpbmcgYnV0IGRvbid0IHNob3cgdG8gdXNlciAoZnJhbWV3b3JrIHJhY2UgY29uZGl0aW9uKVxuICAgICAgICAvLyBUaGUgZXJyb3IgaXMgaW4gZnJhbWV3b3JrIGNvZGUgKGZlYXR1cmUtaW5mby50c3gpLCBub3Qgb3VyIGNvZGVcbiAgICAgICAgLy8gVGhpcyBjYW4gaGFwcGVuIGlmIGZlYXR1cmUtaW5mby50c3ggaXMgdHJ5aW5nIHRvIGFwcGVuZENoaWxkIHRvIGEgRE9NIGVsZW1lbnRcbiAgICAgICAgLy8gdGhhdCBnZXRzIHJlbW92ZWQgd2hlbiB3ZSBjbGVhciBzZWxlY3Rpb25cbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgICAgIGV2ZW50OiAnY2xlYXItcmVzdWx0LXJhY2UtY29uZGl0aW9uJyxcbiAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpLFxuICAgICAgICAgIG5vdGU6ICdMaWtlbHkgcmFjZSBjb25kaXRpb24gd2l0aCBmZWF0dXJlLWluZm8udHN4J1xuICAgICAgICB9KVxuICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oJ0Vycm9yIGNsZWFyaW5nIHJlc3VsdHMgKGxpa2VseSByYWNlIGNvbmRpdGlvbiB3aXRoIGZlYXR1cmUgaW5mbyk6JywgZXJyb3IpXG4gICAgICAgIH1cbiAgICAgICAgLy8gRG9uJ3Qgc2V0IGVycm9yIHN0YXRlIC0gdGhpcyBpcyBleHBlY3RlZCBpbiBzb21lIHNjZW5hcmlvc1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoaXNTd2l0Y2hpbmdRdWVyaWVzKSB7XG4gICAgICAvLyBKdXN0IHVwZGF0ZSB0aGUgcmVmIC0gZG9uJ3QgY2xlYXIgcmVzdWx0cyBpZiBpbiBcIkFkZCB0b1wiIG9yIFwiUmVtb3ZlIGZyb21cIiBtb2RlIG9yIG5vIHJlc3VsdHNcbiAgICAgIHByZXZpb3VzQ29uZmlnSWRSZWYuY3VycmVudCA9IHF1ZXJ5SXRlbS5jb25maWdJZFxuICAgICAgXG4gICAgICBpZiAocmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb24gfHwgcmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvbikge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICBldmVudDogJ3ByZXNlcnZpbmctYWNjdW11bGF0ZWQtcmVjb3Jkcy1vbi1xdWVyeS1zd2l0Y2gnLFxuICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICByZXN1bHRzTW9kZSxcbiAgICAgICAgICBvbGRDb25maWdJZDogcHJldmlvdXNDb25maWdJZFJlZi5jdXJyZW50LFxuICAgICAgICAgIG5ld0NvbmZpZ0lkOiBxdWVyeUl0ZW0uY29uZmlnSWQsXG4gICAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGFjY3VtdWxhdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDBcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG4gIH0sIFtxdWVyeUl0ZW0uY29uZmlnSWQsIGNsZWFyUmVzdWx0LCByZXN1bHRDb3VudCwgcmVzdWx0c01vZGUsIGFjY3VtdWxhdGVkUmVjb3JkcywgcHJvcHMud2lkZ2V0SWRdKVxuXG4gIGNvbnN0IG5hdlRvRm9ybSA9IFJlYWN0LnVzZUNhbGxiYWNrKGFzeW5jIChjbGVhclJlc3VsdHMgPSBmYWxzZSkgPT4ge1xuICAgIGlmIChjbGVhclJlc3VsdHMpIHtcbiAgICAgIC8vIFVzZSB0aGUgY2VudHJhbGl6ZWQgY2xlYXJSZXN1bHQgbWV0aG9kIGluc3RlYWQgb2YgZHVwbGljYXRpbmcgbG9naWNcbiAgICAgIGF3YWl0IGNsZWFyUmVzdWx0KCduYXZUb0Zvcm0tY2xlYXJSZXN1bHRzJylcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICAvLyBTd2l0Y2ggdG8gcXVlcnkgdGFiIGJ1dCBkb24ndCBjbGVhciByZXN1bHRzIHVubGVzcyBleHBsaWNpdGx5IHJlcXVlc3RlZFxuICAgIC8vIE1hcmsgYXMgbWFudWFsIHN3aXRjaCB0byBwcmV2ZW50IGF1dG8tc3dpdGNoIHVzZUVmZmVjdCBmcm9tIGludGVyZmVyaW5nXG4gICAgbWFudWFsVGFiU3dpdGNoUmVmLmN1cnJlbnQgPSB0cnVlXG4gICAgc2V0QWN0aXZlVGFiKCdxdWVyeScpXG4gICAgLy8gUmVzZXQgdGhlIGZsYWcgYWZ0ZXIgYSBzaG9ydCBkZWxheVxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgbWFudWFsVGFiU3dpdGNoUmVmLmN1cnJlbnQgPSBmYWxzZVxuICAgIH0sIDEwMClcbiAgICAvLyBPbmx5IGNoYW5nZSBzdGFnZSBpZiB3ZSdyZSBjbGVhcmluZyByZXN1bHRzXG4gICAgLy8gT3RoZXJ3aXNlLCBrZWVwIHN0YWdlIGF0IDEgKHJlc3VsdHMgYXZhaWxhYmxlKSBzbyByZXN1bHRzIHBlcnNpc3RcbiAgICBpZiAoIWNsZWFyUmVzdWx0cyAmJiByZXN1bHRDb3VudCA+IDApIHtcbiAgICAgIHNldFN0YWdlKDEpIC8vIEtlZXAgcmVzdWx0cyBhdmFpbGFibGVcbiAgICB9XG4gICAgbG9kYXNoLmRlZmVyKCgpID0+IHtcbiAgICAgIGZvY3VzRWxlbWVudEluS2V5Ym9hcmRNb2RlKGJhY2tCdG5SZWYuY3VycmVudClcbiAgICB9KVxuICB9LCBbY2xlYXJSZXN1bHQsIHJlc3VsdENvdW50XSlcblxuICAvKipcbiAgICogSGFuZGxlcyB0YWIgc3dpdGNoaW5nIGJldHdlZW4gUXVlcnkgYW5kIFJlc3VsdHMgdGFicy5cbiAgICogVGFiIHN3aXRjaGluZyBwcmVzZXJ2ZXMgcmVzdWx0cyBzdGF0ZSAtIHJlc3VsdHMgcmVtYWluIHZpc2libGUgYW5kIHNlbGVjdGVkXG4gICAqIHdoZW4gc3dpdGNoaW5nIGJldHdlZW4gdGFicy4gUmVzdWx0cyBhcmUgb25seSBjbGVhcmVkIHdoZW4gZXhwbGljaXRseVxuICAgKiBjbGlja2luZyB0aGUgdHJhc2ggY2FuIGJ1dHRvbiBvciB3aGVuIHN0YXJ0aW5nIGEgbmV3IHF1ZXJ5LlxuICAgKiBcbiAgICogQHBhcmFtIHRhYiAtIFRoZSB0YWIgdG8gc3dpdGNoIHRvICgncXVlcnknIHwgJ3Jlc3VsdHMnKVxuICAgKiBAcGFyYW0gZXZlbnQgLSBPcHRpb25hbCBtb3VzZSBldmVudCB0byBwcmV2ZW50IGRlZmF1bHQgYmVoYXZpb3JcbiAgICovXG4gIGNvbnN0IGhhbmRsZVRhYkNoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKCh0YWI6ICdxdWVyeScgfCAncmVzdWx0cycsIGV2ZW50PzogUmVhY3QuTW91c2VFdmVudCkgPT4ge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgIGV2ZW50OiAndGFiLWNoYW5nZScsXG4gICAgICB0YWIsXG4gICAgICBjdXJyZW50VGFiOiBhY3RpdmVUYWIsXG4gICAgICByZXN1bHRDb3VudCxcbiAgICAgIGV2ZW50VHlwZTogZXZlbnQ/LnR5cGVcbiAgICB9KVxuICAgIFxuICAgIGlmIChldmVudCkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgICB9XG4gICAgLy8gRG9uJ3QgYWxsb3cgc3dpdGNoaW5nIHRvIHJlc3VsdHMgaWYgdGhlcmUgYXJlIG5vIHJlc3VsdHNcbiAgICBpZiAodGFiID09PSAncmVzdWx0cycgJiYgcmVzdWx0Q291bnQgPT09IDApIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgICAgZXZlbnQ6ICd0YWItY2hhbmdlLWJsb2NrZWQnLFxuICAgICAgICByZWFzb246ICduby1yZXN1bHRzJyxcbiAgICAgICAgdGFiLFxuICAgICAgICByZXN1bHRDb3VudFxuICAgICAgfSlcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBcbiAgICAvLyBNYXJrIHRoaXMgYXMgYSBtYW51YWwgc3dpdGNoIHRvIHByZXZlbnQgYXV0by1zd2l0Y2ggdXNlRWZmZWN0IGZyb20gaW50ZXJmZXJpbmdcbiAgICBtYW51YWxUYWJTd2l0Y2hSZWYuY3VycmVudCA9IHRydWVcbiAgICBzZXRBY3RpdmVUYWIodGFiKVxuICAgIFxuICAgIC8vIFJlc2V0IHRoZSBmbGFnIGFmdGVyIGEgc2hvcnQgZGVsYXkgdG8gYWxsb3cgdGhlIHN0YXRlIHVwZGF0ZSB0byBjb21wbGV0ZVxuICAgIC8vIFRoaXMgcHJldmVudHMgdGhlIGF1dG8tc3dpdGNoIHVzZUVmZmVjdCBmcm9tIGltbWVkaWF0ZWx5IHN3aXRjaGluZyBiYWNrXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBtYW51YWxUYWJTd2l0Y2hSZWYuY3VycmVudCA9IGZhbHNlXG4gICAgfSwgMTAwKVxuICAgIFxuICAgIC8vIERvbid0IGNoYW5nZSBzdGFnZSBoZXJlIC0ganVzdCBzd2l0Y2ggdGhlIHZpZXdcbiAgICAvLyBTdGFnZSBzaG91bGQgcmVtYWluIGF0IDEgKHJlc3VsdHMgYXZhaWxhYmxlKSB3aGVuIHN3aXRjaGluZyBiZXR3ZWVuIHRhYnNcbiAgfSwgW3Jlc3VsdENvdW50LCBhY3RpdmVUYWJdKVxuXG4gIC8qKlxuICAgKiBJbnRlcm5hbCBpbXBsZW1lbnRhdGlvbiBvZiBoYW5kbGVGb3JtU3VibWl0ICh3aXRob3V0IHdhaXRpbmcgbG9naWMpXG4gICAqIFRoaXMgaXMgY2FsbGVkIGVpdGhlciBkaXJlY3RseSBvciBhZnRlciBoYXNoIHZhbHVlIGNvbnZlcnNpb25cbiAgICogXG4gICAqIEBwYXJhbSBzcWxFeHByIC0gVGhlIFNRTCBleHByZXNzaW9uIGZvciBhdHRyaWJ1dGUgZmlsdGVyaW5nXG4gICAqIEBwYXJhbSBzcGF0aWFsRmlsdGVyIC0gVGhlIHNwYXRpYWwgZmlsdGVyIG9iamVjdFxuICAgKiBAcGFyYW0gcnVudGltZVpvb21Ub1NlbGVjdGVkIC0gT3B0aW9uYWwgcnVudGltZSBvdmVycmlkZSBmb3Igem9vbS10by1zZWxlY3RlZCBiZWhhdmlvclxuICAgKi9cbiAgY29uc3QgaGFuZGxlRm9ybVN1Ym1pdEludGVybmFsID0gUmVhY3QudXNlQ2FsbGJhY2soYXN5bmMgKHNxbEV4cHI6IElNU3FsRXhwcmVzc2lvbiwgc3BhdGlhbEZpbHRlcjogU3BhdGlhbEZpbHRlck9iaiwgcnVudGltZVpvb21Ub1NlbGVjdGVkPzogYm9vbGVhbikgPT4ge1xuICAgIC8vIENsZWFyIHByZXZpb3VzIGVycm9ycyB3aGVuIHN0YXJ0aW5nIGEgbmV3IHF1ZXJ5XG4gICAgc2V0U2VsZWN0aW9uRXJyb3IobnVsbClcbiAgICBzZXRab29tRXJyb3IobnVsbClcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICBldmVudDogJ2hhbmRsZUZvcm1TdWJtaXRJbnRlcm5hbC1leGVjdXRpbmcnLFxuICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgcmVzdWx0c01vZGUsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuXG4gICAgLy8gU3RvcmUgdGhlIHJ1bnRpbWUgem9vbSBvdmVycmlkZSBmb3IgdXNlIGJ5IEFkZCB0byBNYXAgYWN0aW9uXG4gICAgbGFzdFJ1bnRpbWVab29tVG9TZWxlY3RlZFJlZi5jdXJyZW50ID0gcnVudGltZVpvb21Ub1NlbGVjdGVkXG4gICAgXG4gICAgYXR0cmlidXRlRmlsdGVyU3FsRXhwck9iai5jdXJyZW50ID0gc3FsRXhwclxuICAgIHNwYXRpYWxGaWx0ZXJPYmouY3VycmVudCA9IHNwYXRpYWxGaWx0ZXJcbiAgICAvLyBMb2FkIHRoZSBmaXJzdCBwYWdlXG4gICAgY29uc3QgZmVhdHVyZURTID0gb3V0cHV0RFMgYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICAgIFxuICAgIC8vIEZvciBcIkFkZCB0b1wiIGFuZCBcIlJlbW92ZSBmcm9tXCIgbW9kZXMsIHVzZSB3aWRnZXQtbGV2ZWwgYWNjdW11bGF0ZWQgcmVjb3Jkc1xuICAgIC8vIFRoZXNlIHBlcnNpc3QgYWNyb3NzIHF1ZXJ5IHN3aXRjaGVzLCB1bmxpa2UgcXVlcnktaXRlbS1sZXZlbCByZWNvcmRzXG4gICAgbGV0IGV4aXN0aW5nUmVjb3Jkc0Zvck1lcmdlOiBGZWF0dXJlRGF0YVJlY29yZFtdID0gW11cbiAgICBpZiAocmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb24gfHwgcmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvbikge1xuICAgICAgLy8gUm9idXN0IGNhcHR1cmUgc3RyYXRlZ3k6XG4gICAgICAvLyAxLiBUcnkgcmVjb3JkcyBmcm9tIHByb3BzIChhbHJlYWR5IG1lcmdlZCBieSBwYXJlbnQpXG4gICAgICAvLyAyLiBGYWxsYmFjayB0byBjdXJyZW50bHkgc2VsZWN0ZWQgcmVjb3JkcyBpbiBEUyAoY2FwdHVyZWQgZHVyaW5nIG1vZGUgc3dpdGNoKVxuICAgICAgY29uc3QgZnJvbVByb3AgPSBhY2N1bXVsYXRlZFJlY29yZHMgfHwgW11cbiAgICAgIGNvbnN0IGZyb21EUyA9IG91dHB1dERTPy5nZXRTZWxlY3RlZFJlY29yZHMoKSBhcyBGZWF0dXJlRGF0YVJlY29yZFtdIHx8IFtdXG4gICAgICBcbiAgICAgIGV4aXN0aW5nUmVjb3Jkc0Zvck1lcmdlID0gZnJvbVByb3AubGVuZ3RoID4gMCA/IGZyb21Qcm9wIDogZnJvbURTXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ2NhcHR1cmVkLWV4aXN0aW5nLXJlY29yZHMtZGlhZ25vc3RpYycsXG4gICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgcmVzdWx0c01vZGUsXG4gICAgICAgIGZyb21Qcm9wQ291bnQ6IGZyb21Qcm9wLmxlbmd0aCxcbiAgICAgICAgZnJvbURTQ291bnQ6IGZyb21EUy5sZW5ndGgsXG4gICAgICAgIGZpbmFsQ2FwdHVyZWRDb3VudDogZXhpc3RpbmdSZWNvcmRzRm9yTWVyZ2UubGVuZ3RoLFxuICAgICAgICBmaXJzdFJlY29yZElkOiBleGlzdGluZ1JlY29yZHNGb3JNZXJnZVswXT8uZ2V0SWQ/LigpIHx8ICdub25lJyxcbiAgICAgICAgYWxsUmVjb3JkSWRzOiBleGlzdGluZ1JlY29yZHNGb3JNZXJnZS5tYXAociA9PiByLmdldElkPy4oKSkuc2xpY2UoMCwgMTApLFxuICAgICAgICBvdXRwdXREU0lkOiBvdXRwdXREUy5pZCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgIH1cbiAgICBcbiAgICAvLyBGb3IgXCJOZXdcIiBtb2RlLCBjbGVhciBvbGQgcmVzdWx0cyBhbmQgZ3JhcGhpY3MgbGF5ZXJcbiAgICAvLyBXZSBjYWxsIGNsZWFyUmVzdWx0KCkgZGlyZWN0bHkgYW5kIEFXQUlUIGl0IHRvIGVuc3VyZSBpdCdzIGZpbmlzaGVkIGJlZm9yZSBxdWVyeSBleGVjdXRpb24gc3RhcnRzXG4gICAgaWYgKHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvbikge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgICBldmVudDogJ2hhbmRsZUZvcm1TdWJtaXQtY2xlYXJpbmctcmVzdWx0cy1mb3ItbmV3LW1vZGUnLFxuICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIGF3YWl0IGNsZWFyUmVzdWx0KCdoYW5kbGVGb3JtU3VibWl0LW5ldy1tb2RlJylcbiAgICB9XG4gICAgXG4gICAgLy8gU2V0IGxvYWRpbmcgc3RhZ2VcbiAgICBzZXRTdGFnZSgyKVxuICAgIFxuICAgIC8vIEZPUkNFRDogQWx3YXlzIHVzZSBTaW1wbGVMaXN0IC0gZmV0Y2ggQUxMIHJlY29yZHMsIG5vdCBqdXN0IGEgcGFnZVxuICAgIC8vIFVzZSBkYXRhIHNvdXJjZSdzIG1heCByZWNvcmQgY291bnQsIG9yIGZhbGwgYmFjayB0byBhIGxhcmdlIG51bWJlciAoMTAwMDApXG4gICAgY29uc3QgbWF4UmVjb3JkQ291bnQgPSAoZmVhdHVyZURTIGFzIGFueSkuZ2V0TWF4UmVjb3JkQ291bnQ/LigpID8/IDEwMDAwXG4gICAgbGV0IHBhZ2VTaXplID0gbWF4UmVjb3JkQ291bnRcbiAgICBjb25zdCBxdWVyeVBhcmFtcyA9IGdlbmVyYXRlUXVlcnlQYXJhbXMoZmVhdHVyZURTLCBzcWxFeHByLCBzcGF0aWFsRmlsdGVyLCBjdXJyZW50SXRlbSwgMSwgcGFnZVNpemUpXG4gICAgcXVlcnlQYXJhbVJlZi5jdXJyZW50ID0gcXVlcnlQYXJhbXNcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICBldmVudDogJ2hhbmRsZUZvcm1TdWJtaXQtZXhlY3V0aW5nLXF1ZXJ5JyxcbiAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgIHdoZXJlOiBxdWVyeVBhcmFtcy53aGVyZSxcbiAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICAvLyBDaGFuZ2Ugb3V0cHV0IGRzIHN0YXR1cyB0byB1bmxvYWRlZCBiZWZvcmUgdXNlIGl0IHRvIGxvYWQgY291bnQvcmVjb3Jkcy5cbiAgICBmZWF0dXJlRFMuc2V0U3RhdHVzKERhdGFTb3VyY2VTdGF0dXMuVW5sb2FkZWQpXG4gICAgZmVhdHVyZURTLnNldENvdW50U3RhdHVzKERhdGFTb3VyY2VTdGF0dXMuVW5sb2FkZWQpXG4gICAgbGV0IHF1ZXJ5UmVzdWx0Q291bnQgPSAwIC8vIENhcHR1cmUgY291bnQgZnJvbSByZWNvcmRzIHRvIHVzZSBpbiBmaW5hbGx5IGJsb2NrXG4gICAgY29uc3Qgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KClcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICBldmVudDogJ3BlcmYtcXVlcnktY2hhaW4tc3RhcnQnLFxuICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgcmVzdWx0c01vZGUsXG4gICAgICB3aGVyZTogcXVlcnlQYXJhbXMud2hlcmUsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuXG4gICAgLy8gUEVSRk9STUFOQ0UgT1BUSU1JWkFUSU9OOiBSZW1vdmVkIHJlZHVuZGFudCBleGVjdXRlQ291bnRRdWVyeSgpIHJvdW5kLXRyaXAuXG4gICAgLy8gU2luY2Ugd2UgZmV0Y2ggQUxMIHJlY29yZHMgKHBhZ2VTaXplID0gbWF4UmVjb3JkQ291bnQpLCB3ZSBjYW4ganVzdCB1c2UgcmVjb3Jkcy5sZW5ndGguXG4gICAgZmVhdHVyZURTLnVwZGF0ZVF1ZXJ5UGFyYW1zKHF1ZXJ5UGFyYW1SZWYuY3VycmVudCwgcHJvcHMud2lkZ2V0SWQpXG4gICAgXG4gICAgY29uc3QgZmV0Y2hTdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKVxuICAgIGV4ZWN1dGVRdWVyeShwcm9wcy53aWRnZXRJZCwgcXVlcnlJdGVtLCBmZWF0dXJlRFMsIHF1ZXJ5UGFyYW1SZWYuY3VycmVudClcbiAgICAgIC50aGVuKGFzeW5jIChyZXN1bHQpID0+IHtcbiAgICAgICAgY29uc3QgZmV0Y2hEdXJhdGlvbk1zID0gTWF0aC5yb3VuZChwZXJmb3JtYW5jZS5ub3coKSAtIGZldGNoU3RhcnRUaW1lKVxuICAgICAgICBjb25zdCBwcm9jZXNzaW5nU3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KClcbiAgICAgICAgXG4gICAgICAgIHF1ZXJ5UmVzdWx0Q291bnQgPSByZXN1bHQucmVjb3Jkcz8ubGVuZ3RoIHx8IDBcbiAgICAgICAgXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgIGV2ZW50OiAncXVlcnktZXhlY3V0aW9uLWNvbXBsZXRlJyxcbiAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgcmVzdWx0c01vZGUsXG4gICAgICAgICAgcmVjb3Jkc1JldHVybmVkOiBxdWVyeVJlc3VsdENvdW50LFxuICAgICAgICAgIGZldGNoRHVyYXRpb25NcyxcbiAgICAgICAgICBleGlzdGluZ0NhcHR1cmVkQ291bnQ6IGV4aXN0aW5nUmVjb3Jkc0Zvck1lcmdlLmxlbmd0aCxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfSlcblxuICAgICAgICBsZXQgcmVjb3Jkc1RvRGlzcGxheSA9IHJlc3VsdC5yZWNvcmRzIHx8IFtdXG4gICAgICAgIGxldCBkc1RvVXNlID0gb3V0cHV0RFNcbiAgICAgICAgXG4gICAgICAgIC8vIEhhbmRsZSBcIkFkZCB0b1wiIG1vZGU6IG1lcmdlIG5ldyByZXN1bHRzIHdpdGggd2lkZ2V0LWxldmVsIGFjY3VtdWxhdGVkIHJlY29yZHNcbiAgICAgICAgaWYgKHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uICYmIHJlc3VsdC5yZWNvcmRzICYmIHJlc3VsdC5yZWNvcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgIGV2ZW50OiAnYWRkLW1vZGUtc3RhcnRpbmctbWVyZ2UtZGlhZ25vc3RpYycsXG4gICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgZXhpc3RpbmdDb3VudDogZXhpc3RpbmdSZWNvcmRzRm9yTWVyZ2UubGVuZ3RoLFxuICAgICAgICAgICAgICBleGlzdGluZ0lkczogZXhpc3RpbmdSZWNvcmRzRm9yTWVyZ2UubWFwKHIgPT4gci5nZXRJZD8uKCkpLnNsaWNlKDAsIDUpLFxuICAgICAgICAgICAgICBuZXdDb3VudDogcmVzdWx0LnJlY29yZHMubGVuZ3RoLFxuICAgICAgICAgICAgICBuZXdJZHM6IHJlc3VsdC5yZWNvcmRzLm1hcCgocjogYW55KSA9PiByLmdldElkPy4oKSkuc2xpY2UoMCwgNSksXG4gICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC8vIE1lcmdlIG5ldyBxdWVyeSByZXN1bHRzIHdpdGggd2lkZ2V0LWxldmVsIGFjY3VtdWxhdGVkIHJlY29yZHNcbiAgICAgICAgICAgIGNvbnN0IG1lcmdlZFJlY29yZHMgPSBtZXJnZVJlc3VsdHNJbnRvQWNjdW11bGF0ZWQoXG4gICAgICAgICAgICAgIG91dHB1dERTIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2UsIC8vIFVzZSBvdXRwdXREUyBmb3Iga2V5IGdlbmVyYXRpb25cbiAgICAgICAgICAgICAgcmVzdWx0LnJlY29yZHMgYXMgRmVhdHVyZURhdGFSZWNvcmRbXSxcbiAgICAgICAgICAgICAgZXhpc3RpbmdSZWNvcmRzRm9yTWVyZ2UgLy8gVXNlIGNvbnNpc3RlbnRseSBjYXB0dXJlZCByZWNvcmRzXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJlY29yZHNUb0Rpc3BsYXkgPSBtZXJnZWRSZWNvcmRzXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFVwZGF0ZSB3aWRnZXQtbGV2ZWwgYWNjdW11bGF0ZWQgcmVjb3JkcyBzbyB0aGV5IHBlcnNpc3QgYWNyb3NzIHF1ZXJ5IHN3aXRjaGVzXG4gICAgICAgICAgICBpZiAob25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UpIHtcbiAgICAgICAgICAgICAgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UobWVyZ2VkUmVjb3JkcylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgIGV2ZW50OiAnYWRkLW1vZGUtbWVyZ2UtY29tcGxldGUtZGlhZ25vc3RpYycsXG4gICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgbWVyZ2VkUmVjb3Jkc0NvdW50OiBtZXJnZWRSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgICAgICAgbWVyZ2VkSWRzOiBtZXJnZWRSZWNvcmRzLm1hcChyID0+IHIuZ2V0SWQ/LigpKS5zbGljZSgwLCAxMCksXG4gICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgIGV2ZW50OiAnYWRkLW1vZGUtZXJyb3InLFxuICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJyxcbiAgICAgICAgICAgICAgZXJyb3JTdGFjazogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnN0YWNrIDogdW5kZWZpbmVkXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLy8gRmFsbCBiYWNrIHRvIG5vcm1hbCBiZWhhdmlvciBvbiBlcnJvclxuICAgICAgICAgICAgcmVjb3Jkc1RvRGlzcGxheSA9IHJlc3VsdC5yZWNvcmRzXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb24pIHtcbiAgICAgICAgICAvLyBIYW5kbGUgXCJSZW1vdmUgZnJvbVwiIG1vZGU6IHJlbW92ZSBtYXRjaGluZyByZWNvcmRzIGZyb20gd2lkZ2V0LWxldmVsIGFjY3VtdWxhdGVkIHJlY29yZHNcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgIGV2ZW50OiAncmVtb3ZlLW1vZGUtc3RhcnRpbmctbWVyZ2UnLFxuICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgIGV4aXN0aW5nQ291bnQ6IGV4aXN0aW5nUmVjb3Jkc0Zvck1lcmdlLmxlbmd0aCxcbiAgICAgICAgICAgICAgcmVtb3ZlQ291bnQ6IHJlc3VsdC5yZWNvcmRzPy5sZW5ndGggfHwgMFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHdlIGhhdmUgYWNjdW11bGF0ZWQgcmVjb3JkcyB0byByZW1vdmUgZnJvbVxuICAgICAgICAgICAgaWYgKGV4aXN0aW5nUmVjb3Jkc0Zvck1lcmdlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgICBldmVudDogJ3JlbW92ZS1tb2RlLW5vLWFjY3VtdWxhdGVkLXJlY29yZHMnLFxuICAgICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgICBxdWVyeVJlY29yZHNDb3VudDogcmVzdWx0LnJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICAgICAgICAgIG5vdGU6ICdObyBhY2N1bXVsYXRlZCByZWNvcmRzIHRvIHJlbW92ZSBmcm9tIC0gbm8tb3AnXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIC8vIE5vIGFjY3VtdWxhdGVkIHJlY29yZHMsIHNvIG5vdGhpbmcgdG8gcmVtb3ZlIC0gc2hvdyBlbXB0eSByZXN1bHRzXG4gICAgICAgICAgICAgIHJlY29yZHNUb0Rpc3BsYXkgPSBbXVxuICAgICAgICAgICAgfSBlbHNlIGlmIChyZXN1bHQucmVjb3JkcyAmJiByZXN1bHQucmVjb3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIC8vIFJlbW92ZSBtYXRjaGluZyByZWNvcmRzIGZyb20gYWNjdW11bGF0ZWQgcmVjb3Jkc1xuICAgICAgICAgICAgICBjb25zdCByZW1haW5pbmdSZWNvcmRzID0gcmVtb3ZlUmVzdWx0c0Zyb21BY2N1bXVsYXRlZChcbiAgICAgICAgICAgICAgICBvdXRwdXREUyBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLCAvLyBVc2Ugb3V0cHV0RFMgZm9yIGtleSBnZW5lcmF0aW9uXG4gICAgICAgICAgICAgICAgcmVzdWx0LnJlY29yZHMgYXMgRmVhdHVyZURhdGFSZWNvcmRbXSxcbiAgICAgICAgICAgICAgICBleGlzdGluZ1JlY29yZHNGb3JNZXJnZSAvLyBVc2UgY29uc2lzdGVudGx5IGNhcHR1cmVkIHJlY29yZHNcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgcmVjb3Jkc1RvRGlzcGxheSA9IHJlbWFpbmluZ1JlY29yZHNcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIFVwZGF0ZSB3aWRnZXQtbGV2ZWwgYWNjdW11bGF0ZWQgcmVjb3Jkc1xuICAgICAgICAgICAgICBpZiAob25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZShyZW1haW5pbmdSZWNvcmRzKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBSZW1vdmUgcmVjb3JkcyBmcm9tIG9yaWdpbiBkYXRhIHNvdXJjZSBzZWxlY3Rpb25zIChtYXAgaGlnaGxpZ2h0aW5nKVxuICAgICAgICAgICAgICAvLyBBbHNvIHJlbW92ZXMgZ3JhcGhpY3MgZnJvbSBncmFwaGljcyBsYXllciBpZiB1c2luZyBncmFwaGljcyBsYXllciBoaWdobGlnaHRpbmdcbiAgICAgICAgICAgICAgcmVtb3ZlUmVjb3Jkc0Zyb21PcmlnaW5TZWxlY3Rpb25zKFxuICAgICAgICAgICAgICAgIHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICAgIHJlc3VsdC5yZWNvcmRzIGFzIEZlYXR1cmVEYXRhUmVjb3JkW10sXG4gICAgICAgICAgICAgICAgb3V0cHV0RFMgYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSxcbiAgICAgICAgICAgICAgICB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0LFxuICAgICAgICAgICAgICAgIGdyYXBoaWNzTGF5ZXJcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgICAgZXZlbnQ6ICdyZW1vdmUtbW9kZS1jb21wbGV0ZScsXG4gICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICAgIGV4aXN0aW5nQWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGV4aXN0aW5nUmVjb3Jkc0Zvck1lcmdlLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBxdWVyeVJlY29yZHNDb3VudDogcmVzdWx0LnJlY29yZHMubGVuZ3RoLFxuICAgICAgICAgICAgICAgIHJlbWFpbmluZ1JlY29yZHNDb3VudDogcmVtYWluaW5nUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgcmVjb3Jkc1JlbW92ZWQ6IGV4aXN0aW5nUmVjb3Jkc0Zvck1lcmdlLmxlbmd0aCAtIHJlbWFpbmluZ1JlY29yZHMubGVuZ3RoLFxuICAgICAgICAgICAgICAgIG91dHB1dERTSWQ6IG91dHB1dERTLmlkLFxuICAgICAgICAgICAgICAgIHdpZGdldExldmVsUmVjb3Jkc1VwZGF0ZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgb3JpZ2luU2VsZWN0aW9uc1VwZGF0ZWQ6IHRydWVcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIElmIGFsbCByZWNvcmRzIHJlbW92ZWQsIGF1dG8tY2xlYXIgKGNvbnNpc3RlbnQgd2l0aCB1c2VyIGV4cGVjdGF0aW9uKVxuICAgICAgICAgICAgICBpZiAocmVtYWluaW5nUmVjb3Jkcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgICAgIGV2ZW50OiAncmVtb3ZlLW1vZGUtYWxsLXJlY29yZHMtcmVtb3ZlZCcsXG4gICAgICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgICBub3RlOiAnQWxsIGFjY3VtdWxhdGVkIHJlY29yZHMgcmVtb3ZlZCAtIGF1dG8tY2xlYXJpbmcnXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAvLyBDbGVhciB3aWRnZXQtbGV2ZWwgYWNjdW11bGF0ZWQgcmVjb3Jkc1xuICAgICAgICAgICAgICAgIGlmIChvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZSkge1xuICAgICAgICAgICAgICAgICAgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UoW10pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAvLyBRdWVyeSByZXR1cm5lZCBubyByZXN1bHRzIC0gbm90aGluZyB0byByZW1vdmVcbiAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgICAgZXZlbnQ6ICdyZW1vdmUtbW9kZS1uby1xdWVyeS1yZXN1bHRzJyxcbiAgICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgZXhpc3RpbmdBY2N1bXVsYXRlZFJlY29yZHNDb3VudDogZXhpc3RpbmdSZWNvcmRzRm9yTWVyZ2UubGVuZ3RoLFxuICAgICAgICAgICAgICAgIG5vdGU6ICdRdWVyeSByZXR1cm5lZCBubyByZXN1bHRzIC0gbm8gcmVjb3JkcyB0byByZW1vdmUnXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIC8vIEtlZXAgZXhpc3RpbmcgYWNjdW11bGF0ZWQgcmVjb3JkcyBkaXNwbGF5ZWRcbiAgICAgICAgICAgICAgcmVjb3Jkc1RvRGlzcGxheSA9IGV4aXN0aW5nUmVjb3Jkc0Zvck1lcmdlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICBldmVudDogJ3JlbW92ZS1tb2RlLWVycm9yJyxcbiAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicsXG4gICAgICAgICAgICAgIGVycm9yU3RhY2s6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC8vIEZhbGwgYmFjayB0byBzaG93aW5nIHF1ZXJ5IHJlc3VsdHMgb24gZXJyb3JcbiAgICAgICAgICAgIHJlY29yZHNUb0Rpc3BsYXkgPSByZXN1bHQucmVjb3JkcyB8fCBbXVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb24pIHtcbiAgICAgICAgICAvLyBGb3IgXCJOZXdcIiBtb2RlLCBjbGVhciB3aWRnZXQtbGV2ZWwgYWNjdW11bGF0ZWQgcmVjb3Jkc1xuICAgICAgICAgIGlmIChvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZSkge1xuICAgICAgICAgICAgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UoW10pXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZWNvcmRzUmVmLmN1cnJlbnQgPSByZWNvcmRzVG9EaXNwbGF5XG4gICAgICAgIC8vIFJlc2V0IHNlbGVjdGlvbiBmbGFnIGZvciBuZXcgcXVlcnkgcmVzdWx0c1xuICAgICAgICBoYXNTZWxlY3RlZFJlY29yZHNSZWYuY3VycmVudCA9IGZhbHNlXG4gICAgICAgIFxuICAgICAgICAvLyBTZWxlY3QgcmVjb3JkcyBpbiB0aGUgb3V0cHV0IERTXG4gICAgICAgIC8vIEZvciBcIkFkZCB0b1wiIG1vZGUsIHNlbGVjdCBtZXJnZWQgcmVjb3Jkc1xuICAgICAgICAvLyBGb3IgXCJSZW1vdmUgZnJvbVwiIG1vZGUsIHNlbGVjdCByZW1haW5pbmcgcmVjb3JkcyAoYWxyZWFkeSB1cGRhdGVkIHZpYSByZW1vdmVSZWNvcmRzRnJvbU9yaWdpblNlbGVjdGlvbnMpXG4gICAgICAgIC8vIEZvciBcIk5ld1wiIG1vZGUsIHNlbGVjdCBxdWVyeSByZXN1bHRzXG4gICAgICAgIGlmIChyZWNvcmRzVG9EaXNwbGF5ICYmIHJlY29yZHNUb0Rpc3BsYXkubGVuZ3RoID4gMCAmJiBkc1RvVXNlKSB7XG4gICAgICAgICAgY29uc3QgcmVjb3JkSWRzVG9TZWxlY3QgPSByZWNvcmRzVG9EaXNwbGF5Lm1hcChyZWNvcmQgPT4gcmVjb3JkLmdldElkKCkpXG4gICAgICAgICAgXG4gICAgICAgICAgLy8gRm9yIFwiUmVtb3ZlIGZyb21cIiBtb2RlLCBzZWxlY3Rpb24gd2FzIGFscmVhZHkgdXBkYXRlZCB2aWEgcmVtb3ZlUmVjb3Jkc0Zyb21PcmlnaW5TZWxlY3Rpb25zXG4gICAgICAgICAgLy8gQnV0IHdlIHN0aWxsIG5lZWQgdG8gc2VsZWN0IGluIHRoZSBvdXRwdXREUyBmb3Igd2lkZ2V0IHN0YXRlIGNvbnNpc3RlbmN5XG4gICAgICAgICAgaWYgKHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb24pIHtcbiAgICAgICAgICAgIC8vIFNlbGVjdGlvbiB3YXMgYWxyZWFkeSB1cGRhdGVkIGluIG9yaWdpbiBEU3MgdmlhIHJlbW92ZVJlY29yZHNGcm9tT3JpZ2luU2VsZWN0aW9uc1xuICAgICAgICAgICAgLy8gSnVzdCB1cGRhdGUgb3V0cHV0RFMgc2VsZWN0aW9uIGZvciB3aWRnZXQgc3RhdGUgY29uc2lzdGVuY3lcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGlmICh0eXBlb2YgZHNUb1VzZS5zZWxlY3RSZWNvcmRzQnlJZHMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBkc1RvVXNlLnNlbGVjdFJlY29yZHNCeUlkcyhyZWNvcmRJZHNUb1NlbGVjdCwgcmVjb3Jkc1RvRGlzcGxheSBhcyBGZWF0dXJlRGF0YVJlY29yZFtdKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGhhc1NlbGVjdGVkUmVjb3Jkc1JlZi5jdXJyZW50ID0gdHJ1ZVxuICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgICBldmVudDogJ3JlbW92ZS1tb2RlLW91dHB1dC1kcy1zZWxlY3Rpb24tdXBkYXRlZCcsXG4gICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICAgIHJlY29yZENvdW50OiByZWNvcmRzVG9EaXNwbGF5Lmxlbmd0aFxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgICAgZXZlbnQ6ICdyZW1vdmUtbW9kZS1vdXRwdXQtZHMtc2VsZWN0aW9uLWVycm9yJyxcbiAgICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIEZvciBcIkFkZCB0b1wiIGFuZCBcIk5ld1wiIG1vZGVzLCBzZWxlY3QgcmVjb3JkcyBub3JtYWxseVxuICAgICAgICAgICAgc2V0U2VsZWN0aW9uRXJyb3IobnVsbCkgLy8gQ2xlYXIgcHJldmlvdXMgZXJyb3JzXG4gICAgICAgICAgICA7KGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCBzZWxlY3RSZWNvcmRzQW5kUHVibGlzaChcbiAgICAgICAgICAgICAgICAgIHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICAgICAgZHNUb1VzZSxcbiAgICAgICAgICAgICAgICAgIHJlY29yZElkc1RvU2VsZWN0LFxuICAgICAgICAgICAgICAgICAgcmVjb3Jkc1RvRGlzcGxheSBhcyBGZWF0dXJlRGF0YVJlY29yZFtdLFxuICAgICAgICAgICAgICAgICAgZmFsc2UsXG4gICAgICAgICAgICAgICAgICB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0LFxuICAgICAgICAgICAgICAgICAgZ3JhcGhpY3NMYXllcixcbiAgICAgICAgICAgICAgICAgIG1hcFZpZXdcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgaGFzU2VsZWN0ZWRSZWNvcmRzUmVmLmN1cnJlbnQgPSB0cnVlIC8vIE1hcmsgYXMgc2VsZWN0ZWRcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBEaXNwYXRjaCBjdXN0b20gc2VsZWN0aW9uIGV2ZW50IHNvIFdpZGdldCBzdGF0ZSBpcyB1cGRhdGVkIGltbWVkaWF0ZWx5XG4gICAgICAgICAgICAgICAgLy8gVGhpcyBpcyBjcnVjaWFsIGZvciBoYXNoLWJhc2VkIGV4ZWN1dGlvbiB3aGVyZSBRdWVyeVRhc2sgaGFuZGxlcyBzZWxlY3Rpb25cbiAgICAgICAgICAgICAgICBkaXNwYXRjaFNlbGVjdGlvbkV2ZW50KHByb3BzLndpZGdldElkLCByZWNvcmRJZHNUb1NlbGVjdCwgZHNUb1VzZSwgcXVlcnlJdGVtLmNvbmZpZ0lkKVxuICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0ZhaWxlZCB0byBzZWxlY3QgcXVlcnkgcmVzdWx0cydcbiAgICAgICAgICAgICAgICBzZXRTZWxlY3Rpb25FcnJvcihlcnJvck1lc3NhZ2UpXG4gICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdzZWxlY3Rpb24tZmFpbGVkJyxcbiAgICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvck1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICBlcnJvclN0YWNrOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICByZWNvcmRDb3VudDogcmVjb3JkSWRzVG9TZWxlY3QubGVuZ3RoXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkoKVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uICYmIHJlY29yZHNUb0Rpc3BsYXkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgLy8gQWxsIHJlY29yZHMgcmVtb3ZlZCAtIGNsZWFyIHNlbGVjdGlvblxuICAgICAgICAgIDsoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgYXdhaXQgY2xlYXJTZWxlY3Rpb25JbkRhdGFTb3VyY2VzKHByb3BzLndpZGdldElkLCBkc1RvVXNlLCB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0LCBncmFwaGljc0xheWVyKVxuICAgICAgICAgICAgICBoYXNTZWxlY3RlZFJlY29yZHNSZWYuY3VycmVudCA9IGZhbHNlXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBOb3RpZnkgV2lkZ2V0IHRoYXQgc2VsZWN0aW9uIGlzIGNsZWFyZWRcbiAgICAgICAgICAgICAgZGlzcGF0Y2hTZWxlY3Rpb25FdmVudChwcm9wcy53aWRnZXRJZCwgW10sIGRzVG9Vc2UsIHF1ZXJ5SXRlbS5jb25maWdJZClcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICAgIGV2ZW50OiAncmVtb3ZlLW1vZGUtYWxsLXJlY29yZHMtcmVtb3ZlZC1zZWxlY3Rpb24tY2xlYXJlZCcsXG4gICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgICBldmVudDogJ3JlbW92ZS1tb2RlLWNsZWFyLXNlbGVjdGlvbi1lcnJvcicsXG4gICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ1xuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pKClcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gTWFyayB0aGF0IHF1ZXJ5IGp1c3QgZXhlY3V0ZWQgQkVGT1JFIHVwZGF0aW5nIHJlc3VsdENvdW50XG4gICAgICAgIC8vIFRoaXMgZW5zdXJlcyB0aGUgYXV0by1zd2l0Y2ggdXNlRWZmZWN0IHNlZXMgcXVlcnlKdXN0RXhlY3V0ZWRSZWYuY3VycmVudCA9PT0gdHJ1ZVxuICAgICAgICBxdWVyeUp1c3RFeGVjdXRlZFJlZi5jdXJyZW50ID0gdHJ1ZVxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICAgICAgZXZlbnQ6ICdxdWVyeS1leGVjdXRlZC1mbGFnLXNldCcsXG4gICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBxdWVyeUl0ZW0uY29uZmlnSWQsXG4gICAgICAgICAgcmVzdWx0c01vZGUsXG4gICAgICAgICAgcmVjb3Jkc1RvRGlzcGxheUNvdW50OiByZWNvcmRzVG9EaXNwbGF5Lmxlbmd0aCxcbiAgICAgICAgICBxdWVyeVJlc3VsdENvdW50LFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9KVxuICAgICAgICBcbiAgICAgICAgLy8gVXBkYXRlIHJlc3VsdCBjb3VudCBGSVJTVCAoYmVmb3JlIGFueSBwYXJlbnQgY2FsbGJhY2tzIHRoYXQgbWlnaHQgY2F1c2UgcmUtcmVuZGVycylcbiAgICAgICAgLy8gRm9yIFwiQWRkIHRvXCIgYW5kIFwiUmVtb3ZlIGZyb21cIiBtb2RlcywgdXNlIGFjY3VtdWxhdGVkL3JlbWFpbmluZyBjb3VudFxuICAgICAgICAvLyBGb3IgXCJOZXdcIiBtb2RlLCB1c2UgcXVlcnkgY291bnRcbiAgICAgICAgY29uc3QgbmV3UmVzdWx0Q291bnQgPSByZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbiB8fCByZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uXG4gICAgICAgICAgPyByZWNvcmRzVG9EaXNwbGF5Lmxlbmd0aFxuICAgICAgICAgIDogcXVlcnlSZXN1bHRDb3VudFxuICAgICAgICBcbiAgICAgICAgc2V0UmVzdWx0Q291bnQobmV3UmVzdWx0Q291bnQpXG4gICAgICAgIFxuICAgICAgICAvLyBJTlNUQU5UIFVJIEZJWCAoVGhlIFwiU3Bpbm5lciBCeXBhc3NcIik6IFxuICAgICAgICAvLyBEZWNvdXBsZSB0aGUgXCJSZXRyaWV2aW5nIHJlc3VsdHMuLi5cIiBzcGlubmVyIGZyb20gYXN5bmNocm9ub3VzIGFjdGlvbnMgbGlrZSB6b29taW5nLiBcbiAgICAgICAgLy8gQnkgY2FsbGluZyBzZXRTdGFnZSgxKSBub3csIHRoZSB1c2VyIHNlZXMgdGhlIHJlc3VsdCBsaXN0IGltbWVkaWF0ZWx5IHdoaWxlIFxuICAgICAgICAvLyB0aGUgbWFwIGFuaW1hdGlvbiBjb250aW51ZXMgaW4gdGhlIGJhY2tncm91bmQuXG4gICAgICAgIHNldFN0YWdlKDEpIFxuICAgICAgICBcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgICAgIGV2ZW50OiAncGVyZi1wcm9jZXNzaW5nLWNvbXBsZXRlJyxcbiAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgcHJvY2Vzc2luZ0R1cmF0aW9uTXM6IE1hdGgucm91bmQocGVyZm9ybWFuY2Uubm93KCkgLSBwcm9jZXNzaW5nU3RhcnRUaW1lKSxcbiAgICAgICAgICB0b3RhbENoYWluRHVyYXRpb25NczogTWF0aC5yb3VuZChwZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0VGltZSksXG4gICAgICAgICAgbmV3UmVzdWx0Q291bnQsXG4gICAgICAgICAgcmVzdWx0c01vZGUsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH0pXG5cbiAgICAgICAgLy8gWm9vbSB0byByZWNvcmRzIHVzaW5nIHNoYXJlZCB6b29tIHV0aWxpdHkgKGNvbnNpc3RlbnQgcGFkZGluZyBiZWhhdmlvcilcbiAgICAgICAgLy8gVXNlIHJ1bnRpbWUgcHJlZmVyZW5jZSBpZiBwcm92aWRlZCwgb3RoZXJ3aXNlIGZhbGwgYmFjayB0byBjb25maWcgc2V0dGluZyAoZGVmYXVsdHMgdG8gdHJ1ZSlcbiAgICAgICAgY29uc3Qgc2hvdWxkWm9vbSA9IHJ1bnRpbWVab29tVG9TZWxlY3RlZCAhPT0gdW5kZWZpbmVkIFxuICAgICAgICAgID8gcnVudGltZVpvb21Ub1NlbGVjdGVkIFxuICAgICAgICAgIDogKHF1ZXJ5SXRlbS56b29tVG9TZWxlY3RlZCAhPT0gZmFsc2UpXG4gICAgICAgIFxuICAgICAgICAvLyBVc2UgdGhlIG91dHB1dCBEUyBhbmQgbWVyZ2VkIHJlY29yZHNcbiAgICAgICAgY29uc3QgcmVjb3Jkc0Zvclpvb20gPSByZWNvcmRzVG9EaXNwbGF5IHx8IHJlc3VsdC5yZWNvcmRzXG4gICAgICAgIGNvbnN0IGRzRm9yWm9vbSA9IGRzVG9Vc2UgfHwgb3V0cHV0RFNcbiAgICAgICAgXG4gICAgICAgIGlmIChyZWNvcmRzRm9yWm9vbSAmJiByZWNvcmRzRm9yWm9vbS5sZW5ndGggPiAwICYmIGRzRm9yWm9vbSAmJiBzaG91bGRab29tKSB7XG4gICAgICAgICAgLy8gQlVHLUdSQVBISUNTLTAwMTogWm9vbSBvcGVyYXRpb25zIGZhaWwgd2hlbiBncmFwaGljcyBsYXllciBpcyBkaXNhYmxlZFxuICAgICAgICAgIGlmICghbWFwVmlldyAmJiAhdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCkge1xuICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdCVUcnLCB7XG4gICAgICAgICAgICAgIGJ1Z0lkOiAnQlVHLUdSQVBISUNTLTAwMScsXG4gICAgICAgICAgICAgIGNhdGVnb3J5OiAnR1JBUEhJQ1MnLFxuICAgICAgICAgICAgICBldmVudDogJ3pvb20tb3BlcmF0aW9uLWZhaWxlZC1ncmFwaGljcy1sYXllci1kaXNhYmxlZCcsXG4gICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgb3BlcmF0aW9uOiAncXVlcnktcmVzdWx0LXpvb20nLFxuICAgICAgICAgICAgICByZWNvcmRzQ291bnQ6IHJlY29yZHNGb3Jab29tLmxlbmd0aCxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdab29tIG9wZXJhdGlvbiBhdHRlbXB0ZWQgYnV0IG1hcFZpZXcgaXMgdW5hdmFpbGFibGUgYmVjYXVzZSB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0IGlzIGRpc2FibGVkJyxcbiAgICAgICAgICAgICAgd29ya2Fyb3VuZDogJ0VuYWJsZSB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0IGluIHdpZGdldCBzZXR0aW5ncycsXG4gICAgICAgICAgICAgIHRhcmdldFJlc29sdXRpb246ICdyMDE5LjAnXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgem9vbVRvUmVjb3JkcyhyZWNvcmRzRm9yWm9vbSBhcyBGZWF0dXJlRGF0YVJlY29yZFtdKVxuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gem9vbSB0byBmZWF0dXJlcydcbiAgICAgICAgICAgIHNldFpvb21FcnJvcihlcnJvck1lc3NhZ2UpXG4gICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1pPT00nLCB7XG4gICAgICAgICAgICAgIGV2ZW50OiAnem9vbS1nb1RvLWVycm9yLXF1ZXJ5JyxcbiAgICAgICAgICAgICAgZXJyb3I6IGVycm9yTWVzc2FnZSxcbiAgICAgICAgICAgICAgZXJyb3JTdGFjazogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnN0YWNrIDogdW5kZWZpbmVkXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGV4ZWN1dGluZyB6b29tVG9SZWNvcmRzJywgZXJyb3IpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBOT1cgY2FsbCBvbkhhc2hQYXJhbWV0ZXJVc2VkIEFGVEVSIGFsbCBVSSB1cGRhdGVzIGFuZCB6b29tIG9wZXJhdGlvbnMgY29tcGxldGVcbiAgICAgICAgLy8gVGhpcyBwcmV2ZW50cyB0aGUgcGFyZW50IHJlLXJlbmRlciBmcm9tIGludGVycnVwdGluZyB0aGUgcHJvbWlzZSBjaGFpblxuICAgICAgICAvLyBUaGlzIHByZXZlbnRzIGhhc2ggcGFyYW1ldGVycyBmcm9tIHJlLWV4ZWN1dGluZyB3aGVuIHN3aXRjaGluZyBxdWVyaWVzXG4gICAgICAgIGlmIChpbml0aWFsSW5wdXRWYWx1ZSAmJiBxdWVyeUl0ZW0uc2hvcnRJZCAmJiBvbkhhc2hQYXJhbWV0ZXJVc2VkKSB7XG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNILUVYRUMnLCB7XG4gICAgICAgICAgICBldmVudDogJ3F1ZXJ5dGFzay1jYWxsaW5nLW9uaGFzaHBhcmFtZXRlcnVzZWQnLFxuICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHByb3BzLnF1ZXJ5SXRlbS5jb25maWdJZCxcbiAgICAgICAgICAgIHF1ZXJ5SXRlbVNob3J0SWQ6IHF1ZXJ5SXRlbS5zaG9ydElkLFxuICAgICAgICAgICAgaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICB9KVxuICAgICAgICAgIFxuICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgICAgICAgIGV2ZW50OiAnaGFzaC1xdWVyeS1leGVjdXRlZC1ub3RpZnlpbmctcGFyZW50JyxcbiAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBxdWVyeUl0ZW0uY29uZmlnSWQsXG4gICAgICAgICAgICBxdWVyeUl0ZW1TaG9ydElkOiBxdWVyeUl0ZW0uc2hvcnRJZCxcbiAgICAgICAgICAgIGluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgfSlcbiAgICAgICAgICBvbkhhc2hQYXJhbWV0ZXJVc2VkKHF1ZXJ5SXRlbS5zaG9ydElkKVxuICAgICAgICAgIFxuICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSC1FWEVDJywge1xuICAgICAgICAgICAgZXZlbnQ6ICdxdWVyeXRhc2stb25oYXNocGFyYW1ldGVydXNlZC1jYWxsZWQnLFxuICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHByb3BzLnF1ZXJ5SXRlbS5jb25maWdJZCxcbiAgICAgICAgICAgIHF1ZXJ5SXRlbVNob3J0SWQ6IHF1ZXJ5SXRlbS5zaG9ydElkLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgfSlcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBGaXJlIGV2ZW50IHRvIG5vdGlmeSBIZWxwZXJTaW1wbGUgdGhhdCBoYXNoIHF1ZXJ5IGV4ZWN1dGlvbiBpcyBjb21wbGV0ZVxuICAgICAgICAgIC8vIFRoaXMgYWxsb3dzIEhlbHBlclNpbXBsZSB0byB0cmFjayB3aGljaCBoYXNoIHBhcmFtZXRlcnMgaGF2ZSBiZWVuIGV4ZWN1dGVkXG4gICAgICAgICAgLy8gdG8gcHJldmVudCByZS1leGVjdXRpb24gd2hlbiBzd2l0Y2hpbmcgcXVlcmllc1xuICAgICAgICAgIGNvbnN0IGhhc2hQYXJhbSA9IGAke3F1ZXJ5SXRlbS5zaG9ydElkfT0ke2luaXRpYWxJbnB1dFZhbHVlfWBcbiAgICAgICAgICBjb25zdCBleGVjdXRlZEV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KFFVRVJZU0lNUExFX0hBU0hfUVVFUllfRVhFQ1VURURfRVZFTlQsIHtcbiAgICAgICAgICAgIGRldGFpbDoge1xuICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgIHNob3J0SWQ6IHF1ZXJ5SXRlbS5zaG9ydElkLFxuICAgICAgICAgICAgICB2YWx1ZTogaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICAgICAgICAgIGhhc2hQYXJhbVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICAgICAgICBjYW5jZWxhYmxlOiB0cnVlXG4gICAgICAgICAgfSlcbiAgICAgICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChleGVjdXRlZEV2ZW50KVxuICAgICAgICAgIFxuICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSC1FWEVDJywge1xuICAgICAgICAgICAgZXZlbnQ6ICdxdWVyeXRhc2staGFzaC1xdWVyeS1leGVjdXRlZC1ldmVudC1kaXNwYXRjaGVkJyxcbiAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBxdWVyeUl0ZW0uY29uZmlnSWQsXG4gICAgICAgICAgICBxdWVyeUl0ZW1TaG9ydElkOiBxdWVyeUl0ZW0uc2hvcnRJZCxcbiAgICAgICAgICAgIGluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgICAgICAgaGFzaFBhcmFtLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0cnVlKVxuICAgICAgfSlcbiAgICAgIC5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgICAgICBldmVudDogJ3F1ZXJ5LWNoYWluLWZhaWxlZC1kaWFnbm9zdGljJyxcbiAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSxcbiAgICAgICAgICBlcnJvclN0YWNrOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWQsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH0pXG4gICAgICAgIHNldFN0YWdlKDEpIC8vIFJldHVybiB0byByZXN1bHRzIG9yIGZvcm0gc3RhZ2UgZXZlbiBvbiBlcnJvclxuICAgICAgfSlcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgaWYgKHNwYXRpYWxGaWx0ZXI/LmxheWVyICYmIHNwYXRpYWxGaWx0ZXI/LmNsZWFyQWZ0ZXJBcHBseSkge1xuICAgICAgICAgIHNwYXRpYWxGaWx0ZXIubGF5ZXIucmVtb3ZlQWxsKClcbiAgICAgICAgfVxuICAgICAgICAvLyBzZXRTdGFnZSgxKSAvLyBSZW1vdmVkIGZyb20gaGVyZTsgbm93IGNhbGxlZCBpbiB0aGUgbWFpbiBjaGFpbiBiZWZvcmUgYmFja2dyb3VuZCBhY3Rpb25zXG4gICAgICB9KVxuICB9LCBbY3VycmVudEl0ZW0sIHF1ZXJ5SXRlbSwgcHJvcHMud2lkZ2V0SWQsIG91dHB1dERTLCBwdWJsaXNoRGF0YUNsZWFyZWRNc2csIGNsZWFyUmVzdWx0LCByZXN1bHRzTW9kZSwgYWNjdW11bGF0ZWRSZWNvcmRzLCBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZSwgb25DbGVhckdyYXBoaWNzTGF5ZXIsIG1hcFZpZXcsIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQsIHpvb21Ub1JlY29yZHNdKVxuXG4gIC8vIExpc3RlbiBmb3IgaGFzaCB2YWx1ZSBjb252ZXJzaW9uIGV2ZW50IGFuZCBleGVjdXRlIHBlbmRpbmcgcXVlcnlcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBoYW5kbGVIYXNoVmFsdWVDb252ZXJ0ZWQgPSAoZXZlbnQ6IEN1c3RvbUV2ZW50KSA9PiB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICAgIGV2ZW50OiAnaGFzaC12YWx1ZS1jb252ZXJ0ZWQtZXZlbnQtcmVjZWl2ZWQnLFxuICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgIGV2ZW50V2lkZ2V0SWQ6IGV2ZW50LmRldGFpbD8ud2lkZ2V0SWQsXG4gICAgICAgIGV2ZW50Q29uZmlnSWQ6IGV2ZW50LmRldGFpbD8uY29uZmlnSWQsXG4gICAgICAgIG1hdGNoZXNXaWRnZXQ6IGV2ZW50LmRldGFpbD8ud2lkZ2V0SWQgPT09IHByb3BzLndpZGdldElkLFxuICAgICAgICBoYXNQZW5kaW5nUXVlcnk6ICEhcGVuZGluZ0hhc2hRdWVyeVJlZi5jdXJyZW50LFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIC8vIE9ubHkgcHJvY2VzcyBldmVudHMgZm9yIHRoaXMgd2lkZ2V0XG4gICAgICBpZiAoZXZlbnQuZGV0YWlsPy53aWRnZXRJZCAhPT0gcHJvcHMud2lkZ2V0SWQpIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgICAgIGV2ZW50OiAnaGFzaC12YWx1ZS1jb252ZXJ0ZWQtZXZlbnQtaWdub3JlZC13cm9uZy13aWRnZXQnLFxuICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICBldmVudFdpZGdldElkOiBldmVudC5kZXRhaWw/LndpZGdldElkLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9KVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKHBlbmRpbmdIYXNoUXVlcnlSZWYuY3VycmVudCkge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICAgICAgZXZlbnQ6ICdoYXNoLXZhbHVlLWNvbnZlcnRlZC1leGVjdXRpbmctcGVuZGluZy1xdWVyeScsXG4gICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgIGNvbmZpZ0lkOiBldmVudC5kZXRhaWwuY29uZmlnSWQsXG4gICAgICAgICAgaW5pdGlhbElucHV0VmFsdWU6IGV2ZW50LmRldGFpbC5pbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfSlcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHsgc3FsRXhwciwgc3BhdGlhbEZpbHRlciwgcnVudGltZVpvb21Ub1NlbGVjdGVkIH0gPSBwZW5kaW5nSGFzaFF1ZXJ5UmVmLmN1cnJlbnRcbiAgICAgICAgcGVuZGluZ0hhc2hRdWVyeVJlZi5jdXJyZW50ID0gbnVsbFxuICAgICAgICBcbiAgICAgICAgLy8gRXhlY3V0ZSB0aGUgcGVuZGluZyBxdWVyeSBub3cgdGhhdCB2YWx1ZSBpcyBjb252ZXJ0ZWRcbiAgICAgICAgLy8gVXNlIHNldFRpbWVvdXQgdG8gZW5zdXJlIHRoaXMgaGFwcGVucyBhZnRlciB0aGUgY3VycmVudCBldmVudCBsb29wXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIGhhbmRsZUZvcm1TdWJtaXRJbnRlcm5hbChzcWxFeHByLCBzcGF0aWFsRmlsdGVyLCBydW50aW1lWm9vbVRvU2VsZWN0ZWQpXG4gICAgICAgIH0sIDApXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBDb252ZXJzaW9uIGhhcHBlbmVkIGJlZm9yZSBoYW5kbGVGb3JtU3VibWl0IHdhcyBjYWxsZWRcbiAgICAgICAgLy8gYXBwbHlRdWVyeSgpIGlzIGNhbGxlZCBkaXJlY3RseSBmcm9tIGhhbmRsZVNxbEV4cHJPYmpDaGFuZ2UgaW4gcXVlcnktdGFzay1mb3JtLnRzeFxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICAgICAgZXZlbnQ6ICdoYXNoLXZhbHVlLWNvbnZlcnRlZC1ldmVudC1yZWNlaXZlZC1uby1wZW5kaW5nLXF1ZXJ5JyxcbiAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgY29uZmlnSWQ6IGV2ZW50LmRldGFpbD8uY29uZmlnSWQsXG4gICAgICAgICAgaW5pdGlhbElucHV0VmFsdWU6IGV2ZW50LmRldGFpbD8uaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICAgICAgbm90ZTogJ0NvbnZlcnNpb24gaGFwcGVuZWQgYmVmb3JlIGhhbmRsZUZvcm1TdWJtaXQgLSBhcHBseVF1ZXJ5KCkgY2FsbGVkIGRpcmVjdGx5IGZyb20gZm9ybSBjb21wb25lbnQnLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFFVRVJZU0lNUExFX0hBU0hfVkFMVUVfQ09OVkVSVEVEX0VWRU5ULCBoYW5kbGVIYXNoVmFsdWVDb252ZXJ0ZWQgYXMgRXZlbnRMaXN0ZW5lcilcbiAgICBcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihRVUVSWVNJTVBMRV9IQVNIX1ZBTFVFX0NPTlZFUlRFRF9FVkVOVCwgaGFuZGxlSGFzaFZhbHVlQ29udmVydGVkIGFzIEV2ZW50TGlzdGVuZXIpXG4gICAgfVxuICB9LCBbcHJvcHMud2lkZ2V0SWQsIGhhbmRsZUZvcm1TdWJtaXRJbnRlcm5hbF0pXG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgZm9ybSBzdWJtaXNzaW9uIHdoZW4gdXNlciBjbGlja3MgXCJBcHBseVwiIGJ1dHRvbi5cbiAgICogQ2hlY2tzIGlmIGhhc2ggdmFsdWUgbmVlZHMgY29udmVyc2lvbiBhbmQgd2FpdHMgZm9yIGV2ZW50IGlmIG5lZWRlZC5cbiAgICogXG4gICAqIEBwYXJhbSBzcWxFeHByIC0gVGhlIFNRTCBleHByZXNzaW9uIGZvciBhdHRyaWJ1dGUgZmlsdGVyaW5nXG4gICAqIEBwYXJhbSBzcGF0aWFsRmlsdGVyIC0gVGhlIHNwYXRpYWwgZmlsdGVyIG9iamVjdFxuICAgKiBAcGFyYW0gcnVudGltZVpvb21Ub1NlbGVjdGVkIC0gT3B0aW9uYWwgcnVudGltZSBvdmVycmlkZSBmb3Igem9vbS10by1zZWxlY3RlZCBiZWhhdmlvclxuICAgKi9cbiAgY29uc3QgaGFuZGxlRm9ybVN1Ym1pdCA9IFJlYWN0LnVzZUNhbGxiYWNrKGFzeW5jIChzcWxFeHByOiBJTVNxbEV4cHJlc3Npb24sIHNwYXRpYWxGaWx0ZXI6IFNwYXRpYWxGaWx0ZXJPYmosIHJ1bnRpbWVab29tVG9TZWxlY3RlZD86IGJvb2xlYW4pID0+IHtcbiAgICAvLyBMT0cgQVQgVEhFIFZFUlkgU1RBUlQgLSBiZWZvcmUgYW55IGNoZWNrc1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgIGV2ZW50OiAnaGFuZGxlRm9ybVN1Ym1pdC1jYWxsZWQnLFxuICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgc3FsRXhwckV4aXN0czogISFzcWxFeHByLFxuICAgICAgZmlyc3RQYXJ0RXhpc3RzOiAhIXNxbEV4cHI/LnBhcnRzPy5bMF0sXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIC8vIENoZWNrIGlmIHRoaXMgaXMgYSBoYXNoLXRyaWdnZXJlZCBxdWVyeSB3aXRoIHVuY29udmVydGVkIHZhbHVlIChzdHJpbmcgZm9ybWF0KVxuICAgIGNvbnN0IGZpcnN0UGFydCA9IHNxbEV4cHI/LnBhcnRzPy5bMF1cbiAgICBjb25zdCB2YWx1ZSA9IGZpcnN0UGFydD8udHlwZSA9PT0gJ1NJTkdMRScgPyAoZmlyc3RQYXJ0IGFzIGFueSkudmFsdWVPcHRpb25zPy52YWx1ZSA6IG51bGxcbiAgICBjb25zdCBpc1N0cmluZ1ZhbHVlID0gdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyAmJiB2YWx1ZS5sZW5ndGggPiAwXG4gICAgY29uc3QgaXNBcnJheVZhbHVlID0gQXJyYXkuaXNBcnJheSh2YWx1ZSkgJiYgdmFsdWUubGVuZ3RoID4gMFxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgIGV2ZW50OiAnaGFuZGxlRm9ybVN1Ym1pdC1jaGVja2luZy1jb252ZXJzaW9uJyxcbiAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgIGluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgdmFsdWVUeXBlOiB0eXBlb2YgdmFsdWUsXG4gICAgICBpc1N0cmluZ1ZhbHVlLFxuICAgICAgaXNBcnJheVZhbHVlLFxuICAgICAgdmFsdWU6IEFycmF5LmlzQXJyYXkodmFsdWUpID8gdmFsdWUgOiB2YWx1ZSxcbiAgICAgIHdpbGxDaGVja1dhaXRDb25kaXRpb246IGlzU3RyaW5nVmFsdWUgJiYgIWlzQXJyYXlWYWx1ZSAmJiBpbml0aWFsSW5wdXRWYWx1ZSAmJiB2YWx1ZSA9PT0gaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIC8vIElmIHZhbHVlIGlzIHN0cmluZyAobm90IGNvbnZlcnRlZCB0byBhcnJheSB5ZXQpLCB3YWl0IGZvciBjb252ZXJzaW9uIGV2ZW50XG4gICAgLy8gVGhpcyBoYXBwZW5zIHdoZW4gaGFzaCB2YWx1ZSBjaGFuZ2VzIGZvciBzYW1lIGNvbmZpZ0lkXG4gICAgaWYgKGlzU3RyaW5nVmFsdWUgJiYgIWlzQXJyYXlWYWx1ZSAmJiBpbml0aWFsSW5wdXRWYWx1ZSAmJiB2YWx1ZSA9PT0gaW5pdGlhbElucHV0VmFsdWUpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgICAgZXZlbnQ6ICdoYW5kbGVGb3JtU3VibWl0LXdhaXRpbmctZm9yLWNvbnZlcnNpb24nLFxuICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgIGN1cnJlbnRWYWx1ZTogdmFsdWUsXG4gICAgICAgIGluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIC8vIFN0b3JlIHBlbmRpbmcgcXVlcnlcbiAgICAgIHBlbmRpbmdIYXNoUXVlcnlSZWYuY3VycmVudCA9IHtcbiAgICAgICAgc3FsRXhwcixcbiAgICAgICAgc3BhdGlhbEZpbHRlcixcbiAgICAgICAgcnVudGltZVpvb21Ub1NlbGVjdGVkXG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFNldCBhIHRpbWVvdXQgdG8gcHJldmVudCBpbmZpbml0ZSB3YWl0aW5nIChmYWxsYmFjayBhZnRlciAyIHNlY29uZHMpXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgaWYgKHBlbmRpbmdIYXNoUXVlcnlSZWYuY3VycmVudCkge1xuICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgICAgICAgIGV2ZW50OiAnaGFuZGxlRm9ybVN1Ym1pdC1jb252ZXJzaW9uLXRpbWVvdXQtZXhlY3V0aW5nLWFueXdheScsXG4gICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICB9KVxuICAgICAgICAgIFxuICAgICAgICAgIGNvbnN0IHsgc3FsRXhwciwgc3BhdGlhbEZpbHRlciwgcnVudGltZVpvb21Ub1NlbGVjdGVkIH0gPSBwZW5kaW5nSGFzaFF1ZXJ5UmVmLmN1cnJlbnRcbiAgICAgICAgICBwZW5kaW5nSGFzaFF1ZXJ5UmVmLmN1cnJlbnQgPSBudWxsXG4gICAgICAgICAgXG4gICAgICAgICAgLy8gRXhlY3V0ZSBhbnl3YXkgKGZhbGxiYWNrKVxuICAgICAgICAgIGhhbmRsZUZvcm1TdWJtaXRJbnRlcm5hbChzcWxFeHByLCBzcGF0aWFsRmlsdGVyLCBydW50aW1lWm9vbVRvU2VsZWN0ZWQpXG4gICAgICAgIH1cbiAgICAgIH0sIDIwMDApXG4gICAgICBcbiAgICAgIHJldHVybiAvLyBFeGl0IGVhcmx5LCB3aWxsIGV4ZWN1dGUgd2hlbiBldmVudCBmaXJlc1xuICAgIH1cbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICBldmVudDogJ2hhbmRsZUZvcm1TdWJtaXQtZXhlY3V0aW5nLWltbWVkaWF0ZWx5JyxcbiAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgIHJlYXNvbjogaXNTdHJpbmdWYWx1ZSA/ICdub3QtaGFzaC10cmlnZ2VyZWQnIDogKGlzQXJyYXlWYWx1ZSA/ICdhbHJlYWR5LWNvbnZlcnRlZCcgOiAnbm8tdmFsdWUnKSxcbiAgICAgIHZhbHVlVHlwZTogdHlwZW9mIHZhbHVlLFxuICAgICAgaXNTdHJpbmdWYWx1ZSxcbiAgICAgIGlzQXJyYXlWYWx1ZSxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgLy8gVmFsdWUgaXMgYWxyZWFkeSBjb252ZXJ0ZWQgb3Igbm90IGhhc2gtdHJpZ2dlcmVkLCBleGVjdXRlIGltbWVkaWF0ZWx5XG4gICAgaGFuZGxlRm9ybVN1Ym1pdEludGVybmFsKHNxbEV4cHIsIHNwYXRpYWxGaWx0ZXIsIHJ1bnRpbWVab29tVG9TZWxlY3RlZClcbiAgfSwgW3Byb3BzLndpZGdldElkLCBpbml0aWFsSW5wdXRWYWx1ZSwgaGFuZGxlRm9ybVN1Ym1pdEludGVybmFsXSlcblxuICBjb25zdCB7IHVzZUF0dHJpYnV0ZUZpbHRlciwgc3FsRXhwck9iaiwgdXNlU3BhdGlhbEZpbHRlciwgc3BhdGlhbEZpbHRlclR5cGVzLCBzcGF0aWFsSW5jbHVkZVJ1bnRpbWVEYXRhLCBzcGF0aWFsUmVsYXRpb25Vc2VEYXRhU291cmNlc30gPSBjdXJyZW50SXRlbVxuICBjb25zdCBzaG93QXR0cmlidXRlRmlsdGVyID0gdXNlQXR0cmlidXRlRmlsdGVyICYmIHNxbEV4cHJPYmogIT0gbnVsbFxuICBjb25zdCBzaG93U3BhdGlhbEZpbHRlciA9IHNwYXRpYWxGaWx0ZXJFbmFibGVkICYmIHVzZVNwYXRpYWxGaWx0ZXIgJiYgKHNwYXRpYWxGaWx0ZXJUeXBlcy5sZW5ndGggPiAwIHx8IHNwYXRpYWxJbmNsdWRlUnVudGltZURhdGEgfHwgc3BhdGlhbFJlbGF0aW9uVXNlRGF0YVNvdXJjZXM/Lmxlbmd0aCA+IDApXG5cbiAgLy8gREVURUNUIFNXSVRDSCBJTiBSRU5ERVJcbiAgY29uc3QgaXNTd2l0Y2hpbmdRdWVyaWVzID0gcHJldmlvdXNDb25maWdJZFJlZi5jdXJyZW50ICE9PSBxdWVyeUl0ZW0uY29uZmlnSWRcbiAgY29uc3QgaXNWaXJ0dWFsQ2xlYXJBY3RpdmUgPSBpc1N3aXRjaGluZ1F1ZXJpZXMgJiYgcmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uXG4gIFxuICAvLyBVc2UgdGhlc2UgXCJlZmZlY3RpdmVcIiB2YWx1ZXMgZm9yIHRoZSBVSVxuICBjb25zdCBlZmZlY3RpdmVSZXN1bHRDb3VudCA9IGlzVmlydHVhbENsZWFyQWN0aXZlID8gMCA6IHJlc3VsdENvdW50XG4gIGNvbnN0IGVmZmVjdGl2ZVJlY29yZHMgPSBpc1ZpcnR1YWxDbGVhckFjdGl2ZSA/IFtdIDogKHJlY29yZHNSZWYuY3VycmVudCB8fCBbXSlcblxuICAvLyBDcmVhdGUgYSB1bmlxdWUga2V5IGZvciB0aGUgY3VycmVudCBxdWVyeSByZXN1bHQgc2V0IHRvIGhlbHAgRTJFIHRlc3RzIGRldGVjdCBmcmVzaCBkYXRhXG4gIGNvbnN0IHJlc3VsdFF1ZXJ5S2V5ID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIGAke3F1ZXJ5SXRlbS5jb25maWdJZH1fJHtEYXRlLm5vdygpfWBcbiAgfSwgW3F1ZXJ5SXRlbS5jb25maWdJZCwgcmVzdWx0Q291bnRdKVxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ3F1ZXJ5LXRhc2sgaC0xMDAnLCBjbGFzc05hbWUsIHsgd3JhcHBlZDogd3JhcHBlZEluUG9wcGVyIH0pfSBcbiAgICAgIGRhdGEtcmVzdWx0LXF1ZXJ5LWtleT17cmVzdWx0UXVlcnlLZXl9XG4gICAgICBjc3M9e2Nzc2BcbiAgICAgICR7c3R5bGV9XG4gICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgYH0+XG4gICAgICA8RGF0YVNvdXJjZUNvbXBvbmVudCB1c2VEYXRhU291cmNlPXt1c2VPdXRwdXREc30gb25EYXRhU291cmNlQ3JlYXRlZD17aGFuZGxlT3V0cHV0RGF0YVNvdXJjZUNyZWF0ZWR9IG9uRGF0YVNvdXJjZUluZm9DaGFuZ2U9e2hhbmRsZU91dHB1dERhdGFTb3VyY2VJbmZvQ2hhbmdlfS8+XG4gICAgICBcbiAgICAgIHsvKiBUYWIgTmF2aWdhdGlvbiAtIE1vdmVkIHRvIHRvcCAqL31cbiAgICAgIDxUYWJzXG4gICAgICAgIHZhbHVlPXthY3RpdmVUYWJ9XG4gICAgICAgIG9uQ2hhbmdlPXsoaWQpID0+IGhhbmRsZVRhYkNoYW5nZShpZCBhcyAncXVlcnknIHwgJ3Jlc3VsdHMnKX1cbiAgICAgICAgZmlsbD17dHJ1ZX1cbiAgICAgICAgdHlwZT0ndW5kZXJsaW5lJ1xuICAgICAgICBrZWVwTW91bnQ9e3RydWV9XG4gICAgICAgIGNzcz17Y3NzYFxuICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgICAgbWluLWhlaWdodDogMDtcbiAgICAgICAgYH1cbiAgICAgID5cbiAgICAgICAgPFRhYlxuICAgICAgICAgIGlkPSdxdWVyeSdcbiAgICAgICAgICB0aXRsZT17Z2V0STE4bk1lc3NhZ2UoJ3F1ZXJ5VGFiJyl9XG4gICAgICAgID5cbiAgICAgICAgICA8ZGl2IFxuICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdxdWVyeS10YXNrX19jb250ZW50Jywge1xuICAgICAgICAgICAgICBbRk9DVVNBQkxFX0NPTlRBSU5FUl9DTEFTU106IGlzSW5Qb3BwZXIgJiYgYWN0aXZlVGFiID09PSAncXVlcnknXG4gICAgICAgICAgICB9KX0gXG4gICAgICAgICAgICBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgICAgICAgbWluLWhlaWdodDogMDtcbiAgICAgICAgICAgICAgcGFkZGluZy10b3A6IDAgIWltcG9ydGFudDtcbiAgICAgICAgICAgIGB9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgey8qIEhlYWRlciB3aXRoIGJhY2sgYnV0dG9uIGFuZCBxdWVyeSBsYWJlbCAtIFF1ZXJ5IHRhYiBvbmx5ICovfVxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ3F1ZXJ5LWZvcm1fX2hlYWRlciBteC00IGFsaWduLWl0ZW1zLWNlbnRlcicsIHsgJ2luLXBvcHBlcic6IGlzSW5Qb3BwZXIgfSl9IGNzcz17Y3NzYFxuICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICBwYWRkaW5nOiA2cHggMDtcbiAgICAgICAgICAgICAgcGFkZGluZy10b3A6IDhweDtcbiAgICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLXN5cy1jb2xvci1kaXZpZGVyLXNlY29uZGFyeSk7XG4gICAgICAgICAgICAgIGZsZXgtc2hyaW5rOiAwO1xuICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCduYXYtYWN0aW9uIGFsaWduLWl0ZW1zLWNlbnRlcicsIHsgJ2Qtbm9uZSc6IHdyYXBwZWRJblBvcHBlciB9KX0gY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgZmxleDogMSAxIDA7XG4gICAgICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgICAgICAgZ2FwOiA0cHg7XG4gICAgICAgICAgICAgICAgLmppbXUtYnRuIHtcbiAgICAgICAgICAgICAgICAgIG1pbi13aWR0aDogMjZweDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcygncC0wIG1yLTInLCB7ICdkLW5vbmUnOiB0b3RhbCA9PT0gMSB8fCAhb25OYXZCYWNrIH0pfVxuICAgICAgICAgICAgICAgICAgc2l6ZT0nc20nXG4gICAgICAgICAgICAgICAgICB0eXBlPSd0ZXJ0aWFyeSdcbiAgICAgICAgICAgICAgICAgIGljb25cbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e29uTmF2QmFja31cbiAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9e2dldEkxOG5NZXNzYWdlKCdiYWNrJyl9XG4gICAgICAgICAgICAgICAgICByZWY9e2JhY2tCdG5SZWZ9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgPEFycm93TGVmdE91dGxpbmVkIGF1dG9GbGlwLz5cbiAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICA8UXVlcnlUYXNrTGFiZWwgaWNvbj17aWNvbn0gbmFtZT17ZGlzcGxheUxhYmVsID8gbmFtZSA6ICcnfSAvPlxuICAgICAgICAgICAgICAgIHsvKiBIYXNoIHBhcmFtZXRlciBpbmZvIGJ1dHRvbiAtIHNob3dzIHF1ZXJpZXMgZnJvbSBzYW1lIGxheWVyIHdpdGggc2hvcnRJZHMgKi99XG4gICAgICAgICAgICAgICAgeygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICBpZiAoIXF1ZXJ5SXRlbXMgfHwgcXVlcnlJdGVtcy5sZW5ndGggPD0gMSkgcmV0dXJuIG51bGxcbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgLy8gR2V0IGN1cnJlbnQgcXVlcnkncyBvcmlnaW4gZGF0YSBzb3VyY2UgSURcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRPcmlnaW5EU0lkID0gcXVlcnlJdGVtLnVzZURhdGFTb3VyY2U/LmRhdGFTb3VyY2VJZFxuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICBpZiAoIWN1cnJlbnRPcmlnaW5EU0lkKSByZXR1cm4gbnVsbFxuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAvLyBGaW5kIGFsbCBxdWVyaWVzIGZyb20gdGhlIHNhbWUgb3JpZ2luIGRhdGEgc291cmNlIHRoYXQgaGF2ZSBzaG9ydElkc1xuICAgICAgICAgICAgICAgICAgY29uc3Qgc2FtZUxheWVyUXVlcmllcyA9IHF1ZXJ5SXRlbXMuZmlsdGVyKGl0ZW0gPT4gXG4gICAgICAgICAgICAgICAgICAgIGl0ZW0udXNlRGF0YVNvdXJjZT8uZGF0YVNvdXJjZUlkID09PSBjdXJyZW50T3JpZ2luRFNJZCAmJiBcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5zaG9ydElkICYmIFxuICAgICAgICAgICAgICAgICAgICBpdGVtLnNob3J0SWQudHJpbSgpICE9PSAnJ1xuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAvLyBPbmx5IHNob3cgaW5mbyBidXR0b24gaWYgdGhlcmUgYXJlIHF1ZXJpZXMgd2l0aCBzaG9ydElkc1xuICAgICAgICAgICAgICAgICAgaWYgKHNhbWVMYXllclF1ZXJpZXMubGVuZ3RoID09PSAwKSByZXR1cm4gbnVsbFxuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAvLyBCdWlsZCB0b29sdGlwIGNvbnRlbnRcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHF1ZXJ5TGluZXMgPSBzYW1lTGF5ZXJRdWVyaWVzLm1hcChpdGVtID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcXVlcnlOYW1lID0gZ2V0UXVlcnlEaXNwbGF5TmFtZShpdGVtKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYCR7cXVlcnlOYW1lfTogIyR7aXRlbS5zaG9ydElkfT12YWx1ZSBvciA/JHtpdGVtLnNob3J0SWR9PXZhbHVlYFxuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgY29uc3QgdG9vbHRpcFRpdGxlID0gYFRoaXMgbGF5ZXIgY2FuIGJlIHNlYXJjaGVkIHVzaW5nIHRoZSBzaG9ydElkcyAke3NhbWVMYXllclF1ZXJpZXMubWFwKHEgPT4gcS5zaG9ydElkKS5qb2luKCcgYW5kICcpfSB1c2luZyAjc2hvcnRJZD12YWx1ZSBvciA/c2hvcnRJZD12YWx1ZSBpbiB0aGUgVVJMLlxcblxcbiR7cXVlcnlMaW5lcy5qb2luKCdcXG4nKX1gXG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgIDxUb29sdGlwIFxuICAgICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudD0nYm90dG9tJyBcbiAgICAgICAgICAgICAgICAgICAgICBjc3M9e2Nzc2B3aGl0ZS1zcGFjZTogcHJlLWxpbmU7YH0gXG4gICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e3Rvb2x0aXBUaXRsZX1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b24gXG4gICAgICAgICAgICAgICAgICAgICAgICBzaXplPSdzbScgXG4gICAgICAgICAgICAgICAgICAgICAgICBpY29uIFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT0ndGVydGlhcnknIFxuICAgICAgICAgICAgICAgICAgICAgICAgYXJpYS1sYWJlbD0nSGFzaCBwYXJhbWV0ZXIgc2VhcmNoIGluZm9ybWF0aW9uJ1xuICAgICAgICAgICAgICAgICAgICAgICAgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZsZXgtc2hyaW5rOiAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8SW5mb091dGxpbmVkIGNvbG9yPSd2YXIoLS1zeXMtY29sb3ItcHJpbWFyeS1tYWluKScgc2l6ZT0ncycvPlxuICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8L1Rvb2x0aXA+XG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgfSkoKX1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIHtlZmZlY3RpdmVSZXN1bHRDb3VudCA+IDAgJiYgKFxuICAgICAgICAgICAgICAgIDxUb29sdGlwIHRpdGxlPXtnZXRJMThuTWVzc2FnZSgnY2xlYXJSZXN1bHQnKX0gcGxhY2VtZW50PSdib3R0b20nPlxuICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICByZWY9e2NsZWFyUmVzdWx0QnRuUmVmfVxuICAgICAgICAgICAgICAgICAgICBzaXplPSdzbSdcbiAgICAgICAgICAgICAgICAgICAgdHlwZT0ndGVydGlhcnknXG4gICAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9e2dldEkxOG5NZXNzYWdlKCdjbGVhclJlc3VsdCcpfVxuICAgICAgICAgICAgICAgICAgICBpY29uXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nbWwtYXV0byBweS0wJ1xuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7IGNsZWFyUmVzdWx0KCd1c2VyLXRyYXNoLWNsaWNrJykgfX1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPFRyYXNoT3V0bGluZWQgLz5cbiAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgey8qIFNlYXJjaCBMYXllciAvIEdyb3VwIGRyb3Bkb3ducyAtIHNob3cgYmFzZWQgb24gZ3JvdXBpbmcgKi99XG4gICAgICAgICAgICB7KCgpID0+IHtcbiAgICAgICAgICAgICAgLy8gT25seSBzaG93IGRyb3Bkb3ducyBpZiBtdWx0aXBsZSBxdWVyaWVzIGV4aXN0XG4gICAgICAgICAgICAgIGlmICghcXVlcnlJdGVtcyB8fCBxdWVyeUl0ZW1zLmxlbmd0aCA8PSAxKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGxcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gQnVpbGQgZmxhdCBsaXN0IG9mIGFsbCBxdWVyaWVzIHdpdGggdGhlaXIgZGlzcGxheSBpbmZvXG4gICAgICAgICAgICAgIC8vIEZvciBncm91cGVkIHF1ZXJpZXMsIHVzZSBncm91cCBkaXNwbGF5IG5hbWUgKG9ubHkgc2hvdyBvbmNlIHBlciBncm91cClcbiAgICAgICAgICAgICAgY29uc3QgcXVlcnlPcHRpb25zOiBBcnJheTx7XG4gICAgICAgICAgICAgICAgY29uZmlnSWQ6IHN0cmluZ1xuICAgICAgICAgICAgICAgIGRpc3BsYXlOYW1lOiBzdHJpbmdcbiAgICAgICAgICAgICAgICBncm91cElkOiBzdHJpbmcgfCBudWxsXG4gICAgICAgICAgICAgICAgaW5kZXg6IG51bWJlclxuICAgICAgICAgICAgICB9PiA9IFtdXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBUcmFjayB3aGljaCBncm91cHMgd2UndmUgYWxyZWFkeSBhZGRlZCB0byBhdm9pZCBkdXBsaWNhdGVzXG4gICAgICAgICAgICAgIGNvbnN0IGFkZGVkR3JvdXBzID0gbmV3IFNldDxzdHJpbmc+KClcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIHF1ZXJ5SXRlbXMuZm9yRWFjaCgoaXRlbSwgaWR4KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0uZ3JvdXBJZCkge1xuICAgICAgICAgICAgICAgICAgLy8gRm9yIGdyb3VwZWQgcXVlcmllcywgdXNlIGdyb3VwIGRpc3BsYXkgbmFtZSAob25seSBhZGQgb25jZSBwZXIgZ3JvdXApXG4gICAgICAgICAgICAgICAgICBpZiAoIWFkZGVkR3JvdXBzLmhhcyhpdGVtLmdyb3VwSWQpKSB7XG4gICAgICAgICAgICAgICAgICAgIGFkZGVkR3JvdXBzLmFkZChpdGVtLmdyb3VwSWQpXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGdyb3VwRGlzcGxheU5hbWUgPSBncm91cHM/LltpdGVtLmdyb3VwSWRdPy5kaXNwbGF5TmFtZSB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cHM/LltpdGVtLmdyb3VwSWRdPy5pdGVtc1swXT8ubmFtZSB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLm5hbWUgfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYEdyb3VwICR7aXRlbS5ncm91cElkfWBcbiAgICAgICAgICAgICAgICAgICAgcXVlcnlPcHRpb25zLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZ0lkOiBpdGVtLmNvbmZpZ0lkLFxuICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXlOYW1lOiBncm91cERpc3BsYXlOYW1lLFxuICAgICAgICAgICAgICAgICAgICAgIGdyb3VwSWQ6IGl0ZW0uZ3JvdXBJZCxcbiAgICAgICAgICAgICAgICAgICAgICBpbmRleDogaWR4XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIC8vIFVuZ3JvdXBlZCBxdWVyeSAtIHVzZSBpdGVtLm5hbWUgZm9yIGZpcnN0IGRyb3Bkb3duIChub3Qgc2VhcmNoQWxpYXMvamltdUZpZWxkTmFtZSlcbiAgICAgICAgICAgICAgICAgIHF1ZXJ5T3B0aW9ucy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgY29uZmlnSWQ6IGl0ZW0uY29uZmlnSWQsXG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXlOYW1lOiBpdGVtLm5hbWUgfHwgZ2V0UXVlcnlEaXNwbGF5TmFtZShpdGVtKSxcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXBJZDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgaW5kZXg6IGlkeFxuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBEZXRlcm1pbmUgY3VycmVudGx5IHNlbGVjdGVkIHF1ZXJ5XG4gICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRRdWVyeUl0ZW0gPSBxdWVyeUl0ZW1cbiAgICAgICAgICAgICAgY29uc3QgY3VycmVudFF1ZXJ5R3JvdXBJZCA9IGN1cnJlbnRRdWVyeUl0ZW0uZ3JvdXBJZCB8fCBudWxsXG4gICAgICAgICAgICAgIGNvbnN0IGlzR3JvdXBlZFF1ZXJ5ID0gY3VycmVudFF1ZXJ5R3JvdXBJZCAhPT0gbnVsbFxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gRmluZCB0aGUgb3B0aW9uIGluZGV4IGZvciB0aGUgY3VycmVudCBxdWVyeVxuICAgICAgICAgICAgICBjb25zdCBjdXJyZW50T3B0aW9uSW5kZXggPSBxdWVyeU9wdGlvbnMuZmluZEluZGV4KG9wdCA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGlzR3JvdXBlZFF1ZXJ5KSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gb3B0Lmdyb3VwSWQgPT09IGN1cnJlbnRRdWVyeUdyb3VwSWRcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIG9wdC5jb25maWdJZCA9PT0gY3VycmVudFF1ZXJ5SXRlbS5jb25maWdJZFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgICAgICAgICAgZXZlbnQ6ICdyZW5kZXJpbmctZHJvcGRvd25zJyxcbiAgICAgICAgICAgICAgICB0b3RhbFF1ZXJpZXM6IHF1ZXJ5SXRlbXMubGVuZ3RoLFxuICAgICAgICAgICAgICAgIHF1ZXJ5T3B0aW9uc0NvdW50OiBxdWVyeU9wdGlvbnMubGVuZ3RoLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRRdWVyeUdyb3VwSWQsXG4gICAgICAgICAgICAgICAgaXNHcm91cGVkUXVlcnksXG4gICAgICAgICAgICAgICAgY3VycmVudE9wdGlvbkluZGV4LFxuICAgICAgICAgICAgICAgIHNlbGVjdGVkR3JvdXBJZCxcbiAgICAgICAgICAgICAgICBzZWxlY3RlZEdyb3VwUXVlcnlJbmRleCxcbiAgICAgICAgICAgICAgICBjdXJyZW50UXVlcnlDb25maWdJZDogY3VycmVudFF1ZXJ5SXRlbS5jb25maWdJZFxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8UmVhY3QuRnJhZ21lbnQ+XG4gICAgICAgICAgICAgICAgICB7LyogRmlyc3QgRHJvcGRvd246IEFsbCBxdWVyaWVzICovfVxuICAgICAgICAgICAgICAgICAgPGRpdiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogNHB4IDE2cHg7XG4gICAgICAgICAgICAgICAgICAgIGZsZXgtc2hyaW5rOiAwO1xuICAgICAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDAuODc1cmVtO1xuICAgICAgICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHZhcigtLXN5cy1jb2xvci10ZXh0LXByaW1hcnkpO1xuICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDRweDtcbiAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAgICAgICAge2dldEkxOG5NZXNzYWdlKCdzZWFyY2hMYXllcicpfVxuICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICA8U2VsZWN0IFxuICAgICAgICAgICAgICAgICAgICAgIHNpemU9XCJzbVwiXG4gICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e2N1cnJlbnRPcHRpb25JbmRleCA+PSAwID8gY3VycmVudE9wdGlvbkluZGV4IDogMH1cbiAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17YXN5bmMgKGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9wdGlvbkluZGV4ID0gcGFyc2VJbnQoZS50YXJnZXQudmFsdWUpXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3RlZE9wdGlvbiA9IHF1ZXJ5T3B0aW9uc1tvcHRpb25JbmRleF1cbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdxdWVyeS1vcHRpb24tc2VsZWN0ZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25JbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRPcHRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlzR3JvdXBlZDogc2VsZWN0ZWRPcHRpb24uZ3JvdXBJZCAhPT0gbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU1RBUlQgQ0xFQVJJTkcgSU1NRURJQVRFTFkgSUYgU1dJVENISU5HXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGNsZWFyUmVzdWx0KCdkcm9wZG93bi1sYXllci1zd2l0Y2gtbmV3LW1vZGUnKVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWRPcHRpb24uZ3JvdXBJZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBHcm91cGVkIHF1ZXJ5IHNlbGVjdGVkIC0gc2V0IGdyb3VwIGFuZCBmaXJzdCBxdWVyeSBpbiBncm91cFxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob25Hcm91cENoYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uR3JvdXBDaGFuZ2Uoc2VsZWN0ZWRPcHRpb24uZ3JvdXBJZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob25Hcm91cFF1ZXJ5Q2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Hcm91cFF1ZXJ5Q2hhbmdlKDApXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVuZ3JvdXBlZCBxdWVyeSBzZWxlY3RlZCAtIGNsZWFyIGdyb3VwIHNlbGVjdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob25Hcm91cENoYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uR3JvdXBDaGFuZ2UobnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob25Vbmdyb3VwZWRDaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGaW5kIHRoZSB1bmdyb3VwZWQgaW5kZXhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1bmdyb3VwZWRJbmRleCA9IHVuZ3JvdXBlZD8uZmluZEluZGV4KCh7IGl0ZW0gfSkgPT4gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLmNvbmZpZ0lkID09PSBzZWxlY3RlZE9wdGlvbi5jb25maWdJZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgPz8gLTFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodW5ncm91cGVkSW5kZXggPj0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Vbmdyb3VwZWRDaGFuZ2UodW5ncm91cGVkSW5kZXgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZhbGxiYWNrOiB1c2UgdGhlIGluZGV4IGZyb20gcXVlcnlJdGVtc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICd1bmdyb3VwZWQtZmFsbGJhY2stdG8taW5kZXgnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZE9wdGlvbkluZGV4OiBzZWxlY3RlZE9wdGlvbi5pbmRleFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvblF1ZXJ5Q2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uUXVlcnlDaGFuZ2Uoc2VsZWN0ZWRPcHRpb24uaW5kZXgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgIHtxdWVyeU9wdGlvbnMubWFwKChvcHRpb24sIGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdyZW5kZXJpbmctcXVlcnktb3B0aW9uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg6IGlkeCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnSWQ6IG9wdGlvbi5jb25maWdJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheU5hbWU6IG9wdGlvbi5kaXNwbGF5TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBJZDogb3B0aW9uLmdyb3VwSWRcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIGtleT17b3B0aW9uLmNvbmZpZ0lkfSB2YWx1ZT17aWR4fT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7b3B0aW9uLmRpc3BsYXlOYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L29wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgey8qIFNlY29uZCBEcm9wZG93bjogUXVlcmllcyB3aXRoaW4gc2VsZWN0ZWQgZ3JvdXAgKG9ubHkgaWYgZ3JvdXBlZCBxdWVyeSBzZWxlY3RlZCkgKi99XG4gICAgICAgICAgICAgICAgICB7aXNHcm91cGVkUXVlcnkgJiYgY3VycmVudFF1ZXJ5R3JvdXBJZCAmJiBncm91cHMgJiYgZ3JvdXBzW2N1cnJlbnRRdWVyeUdyb3VwSWRdICYmIChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiA0cHggMTZweDtcbiAgICAgICAgICAgICAgICAgICAgICBmbGV4LXNocmluazogMDtcbiAgICAgICAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjg3NXJlbTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogdmFyKC0tc3lzLWNvbG9yLXRleHQtcHJpbWFyeSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA0cHg7XG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgICAgICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgICAgICAgICAgIFNlYXJjaCBBbGlhc1xuICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdCBcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpemU9XCJzbVwiXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17c2VsZWN0ZWRHcm91cFF1ZXJ5SW5kZXggIT09IHVuZGVmaW5lZCA/IHNlbGVjdGVkR3JvdXBRdWVyeUluZGV4IDogMH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXthc3luYyAoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdJbmRleCA9IHBhcnNlSW50KGUudGFyZ2V0LnZhbHVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50OiAnZ3JvdXAtcXVlcnktc2VsZWN0ZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwSWQ6IGN1cnJlbnRRdWVyeUdyb3VwSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBRdWVyeUluZGV4OiBuZXdJbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWVyeUl0ZW1Db25maWdJZDogZ3JvdXBzW2N1cnJlbnRRdWVyeUdyb3VwSWRdLml0ZW1zW25ld0luZGV4XT8uY29uZmlnSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnlEaXNwbGF5TmFtZTogZ2V0UXVlcnlEaXNwbGF5TmFtZShncm91cHNbY3VycmVudFF1ZXJ5R3JvdXBJZF0uaXRlbXNbbmV3SW5kZXhdKVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNUQVJUIENMRUFSSU5HIElNTUVESUFURUxZIElGIFNXSVRDSElOR1xuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgY2xlYXJSZXN1bHQoJ2Ryb3Bkb3duLWFsaWFzLXN3aXRjaC1uZXctbW9kZScpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob25Hcm91cFF1ZXJ5Q2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Hcm91cFF1ZXJ5Q2hhbmdlKG5ld0luZGV4KVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtncm91cHNbY3VycmVudFF1ZXJ5R3JvdXBJZF0uaXRlbXMubWFwKChpdGVtLCBpZHgpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiBrZXk9e2l0ZW0uY29uZmlnSWR9IHZhbHVlPXtpZHh9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtnZXRRdWVyeURpc3BsYXlOYW1lKGl0ZW0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L29wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgPC9SZWFjdC5GcmFnbWVudD5cbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfSkoKX1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgey8qIFJlc3VsdHMgTW9kZSBCdXR0b24gR3JvdXAgLSBBbHdheXMgc2hvdywgcmVnYXJkbGVzcyBvZiBxdWVyeSBjb3VudCAqL31cbiAgICAgICAgICAgIDxkaXYgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDhweCAxNnB4O1xuICAgICAgICAgICAgICAgICAgICBmbGV4LXNocmluazogMDtcbiAgICAgICAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImQtZmxleCBhbGlnbi1pdGVtcy1jZW50ZXJcIiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgICAgICBnYXA6IDAuNXJlbTtcbiAgICAgICAgICAgICAgICAgICAgICBmbGV4LXdyYXA6IG5vd3JhcDtcbiAgICAgICAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAgICAgICAgey8qIFJlc3VsdHMgbGFiZWwgYW5kIGluZm8gYnV0dG9uICovfVxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGl0bGUyXCIgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDAuODc1cmVtO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS1zeXMtY29sb3ItdGV4dC1wcmltYXJ5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgICAgICAgICAgICAgICAgICAgICBmbGV4LXNocmluazogMDtcbiAgICAgICAgICAgICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtnZXRJMThuTWVzc2FnZSgncmVzdWx0cycpfTpcbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8VG9vbHRpcCBwbGFjZW1lbnQ9J2JvdHRvbScgY3NzPXtjc3Ngd2hpdGUtc3BhY2U6IHByZS1saW5lO2B9IHRpdGxlPXtnZXRJMThuTWVzc2FnZSgncmVzdWx0c01vZGVEZXNjJyl9PlxuICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiBzaXplPSdzbScgaWNvbiB0eXBlPSd0ZXJ0aWFyeScgYXJpYS1sYWJlbD17Z2V0STE4bk1lc3NhZ2UoJ3Jlc3VsdHNNb2RlRGVzYycpfSBjc3M9e2Nzc2BmbGV4LXNocmluazogMDtgfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPEluZm9PdXRsaW5lZCBjb2xvcj0ndmFyKC0tc3lzLWNvbG9yLXByaW1hcnktbWFpbiknIHNpemU9J3MnLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICB7LyogTW9kZSBidXR0b25zICovfVxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgXG4gICAgICAgICAgICAgICAgICAgICAgICByb2xlPVwicmFkaW9ncm91cFwiXG4gICAgICAgICAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPXtnZXRJMThuTWVzc2FnZSgncmVzdWx0c01vZGUnKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICBnYXA6IDRweDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IHN0cmV0Y2g7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG1pbi13aWR0aDogMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgIHNpemU9XCJzbVwiXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXJpYW50PXtyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb24gPyAnY29udGFpbmVkJyA6ICdvdXRsaW5lZCd9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcj17cmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uID8gJ3ByaW1hcnknIDogJ2RlZmF1bHQnfVxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdNb2RlID0gU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdidXR0b24tbW9kZS1jaGFuZ2VkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c01vZGU6IHJlc3VsdHNNb2RlIHx8IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld01vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9uUmVzdWx0c01vZGVDaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblJlc3VsdHNNb2RlQ2hhbmdlKG5ld01vZGUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmlhLXByZXNzZWQ9e3Jlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9e2Ake2dldEkxOG5NZXNzYWdlKCdjcmVhdGVOZXdSZXN1bHRzJyl9OiAke2dldEkxOG5NZXNzYWdlKCdyZXN1bHRzTW9kZURlc2MnKS5zcGxpdCgnXFxuJylbMV0/LnRyaW0oKSB8fCAnJ31gfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e2dldEkxOG5NZXNzYWdlKCdjcmVhdGVOZXdSZXN1bHRzJyl9XG4gICAgICAgICAgICAgICAgICAgICAgICBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjc1cmVtO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiA0cHggOHB4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICBtaW4taGVpZ2h0OiAyOHB4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAge2dldEkxOG5NZXNzYWdlKCdyZXN1bHRzTW9kZU5ldycpfVxuICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgIHNpemU9XCJzbVwiXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXJpYW50PXtyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbiA/ICdjb250YWluZWQnIDogJ291dGxpbmVkJ31cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yPXtyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbiA/ICdwcmltYXJ5JyA6ICdkZWZhdWx0J31cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3TW9kZSA9IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJldmlvdXNNb2RlID0gcmVzdWx0c01vZGUgfHwgU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50OiAnYnV0dG9uLW1vZGUtY2hhbmdlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBxdWVyeUl0ZW0uY29uZmlnSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNNb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld01vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHN3aXRjaGluZyBGUk9NIFwiTmV3XCIgVE8gXCJBZGQgdG9cIiBtb2RlIGFuZCB3ZSBoYXZlIGN1cnJlbnQgcmVzdWx0cyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbWVyZ2UgdGhlbSB3aXRoIGV4aXN0aW5nIGFjY3VtdWxhdGVkIHJlY29yZHMgYmVmb3JlIGNoYW5naW5nIG1vZGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVjb3Jkc1RvQ2FwdHVyZSA9IChlZmZlY3RpdmVSZWNvcmRzICYmIGVmZmVjdGl2ZVJlY29yZHMubGVuZ3RoID4gMCkgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAoZWZmZWN0aXZlUmVjb3JkcyBhcyBGZWF0dXJlRGF0YVJlY29yZFtdKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogKG91dHB1dERTPy5nZXRTZWxlY3RlZFJlY29yZHMoKSBhcyBGZWF0dXJlRGF0YVJlY29yZFtdIHx8IFtdKVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcmV2aW91c01vZGUgPT09IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uICYmIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3TW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjb3Jkc1RvQ2FwdHVyZS5sZW5ndGggPiAwICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXREUyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBleGlzdGluZ0FjY3VtdWxhdGVkID0gYWNjdW11bGF0ZWRSZWNvcmRzIHx8IFtdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWVyZ2UgY3VycmVudCByZXN1bHRzIHdpdGggZXhpc3RpbmcgYWNjdW11bGF0ZWQgcmVjb3Jkc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lcmdlZFJlY29yZHMgPSBtZXJnZVJlc3VsdHNJbnRvQWNjdW11bGF0ZWQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXREUyBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjb3Jkc1RvQ2FwdHVyZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nQWNjdW11bGF0ZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudDogJ2NhcHR1cmluZy1jdXJyZW50LXJlc3VsdHMtb24tbW9kZS1zd2l0Y2gnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNNb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3TW9kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcHR1cmVkUmVjb3Jkc0NvdW50OiByZWNvcmRzVG9DYXB0dXJlLmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nQWNjdW11bGF0ZWRDb3VudDogZXhpc3RpbmdBY2N1bXVsYXRlZC5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXJnZWRSZWNvcmRzQ291bnQ6IG1lcmdlZFJlY29yZHMubGVuZ3RoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZShtZXJnZWRSZWNvcmRzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob25SZXN1bHRzTW9kZUNoYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uUmVzdWx0c01vZGVDaGFuZ2UobmV3TW9kZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGFyaWEtcHJlc3NlZD17cmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb259XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPXtgJHtnZXRJMThuTWVzc2FnZSgnYWRkVG9DdXJyZW50UmVzdWx0cycpfTogJHtnZXRJMThuTWVzc2FnZSgncmVzdWx0c01vZGVEZXNjJykuc3BsaXQoJ1xcbicpWzJdPy50cmltKCkgfHwgJyd9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtnZXRJMThuTWVzc2FnZSgnYWRkVG9DdXJyZW50UmVzdWx0cycpfVxuICAgICAgICAgICAgICAgICAgICAgICAgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC43NXJlbTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogNHB4IDhweDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbWluLWhlaWdodDogMjhweDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtnZXRJMThuTWVzc2FnZSgncmVzdWx0c01vZGVBZGQnKX1cbiAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICBzaXplPVwic21cIlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFudD17cmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvbiA/ICdjb250YWluZWQnIDogJ291dGxpbmVkJ31cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yPXtyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uID8gJ3ByaW1hcnknIDogJ2RlZmF1bHQnfVxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9eyFhY2N1bXVsYXRlZFJlY29yZHMgfHwgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA9PT0gMH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3TW9kZSA9IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwcmV2aW91c01vZGUgPSByZXN1bHRzTW9kZSB8fCBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdidXR0b24tbW9kZS1jaGFuZ2VkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c01vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3TW9kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogYWNjdW11bGF0ZWRSZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgc3dpdGNoaW5nIEZST00gXCJOZXdcIiBUTyBcIlJlbW92ZSBmcm9tXCIgbW9kZSBhbmQgd2UgaGF2ZSBjdXJyZW50IHJlc3VsdHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG1lcmdlIHRoZW0gd2l0aCBleGlzdGluZyBhY2N1bXVsYXRlZCByZWNvcmRzIGJlZm9yZSBjaGFuZ2luZyBtb2RlXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIChzYW1lIHBhdHRlcm4gYXMgXCJBZGQgdG9cIiBtb2RlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZWNvcmRzVG9DYXB0dXJlRm9yUmVtb3ZlID0gKGVmZmVjdGl2ZVJlY29yZHMgJiYgZWZmZWN0aXZlUmVjb3Jkcy5sZW5ndGggPiAwKSBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IChlZmZlY3RpdmVSZWNvcmRzIGFzIEZlYXR1cmVEYXRhUmVjb3JkW10pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAob3V0cHV0RFM/LmdldFNlbGVjdGVkUmVjb3JkcygpIGFzIEZlYXR1cmVEYXRhUmVjb3JkW10gfHwgW10pXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByZXZpb3VzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb24gJiYgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb24gJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlY29yZHNUb0NhcHR1cmVGb3JSZW1vdmUubGVuZ3RoID4gMCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0RFMgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdBY2N1bXVsYXRlZCA9IGFjY3VtdWxhdGVkUmVjb3JkcyB8fCBbXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1lcmdlIGN1cnJlbnQgcmVzdWx0cyB3aXRoIGV4aXN0aW5nIGFjY3VtdWxhdGVkIHJlY29yZHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXJnZWRSZWNvcmRzID0gbWVyZ2VSZXN1bHRzSW50b0FjY3VtdWxhdGVkKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0RFMgYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlY29yZHNUb0NhcHR1cmVGb3JSZW1vdmUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGlzdGluZ0FjY3VtdWxhdGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdjYXB0dXJpbmctY3VycmVudC1yZXN1bHRzLW9uLW1vZGUtc3dpdGNoLXRvLXJlbW92ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c01vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdNb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FwdHVyZWRSZWNvcmRzQ291bnQ6IHJlY29yZHNUb0NhcHR1cmVGb3JSZW1vdmUubGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmdBY2N1bXVsYXRlZENvdW50OiBleGlzdGluZ0FjY3VtdWxhdGVkLmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lcmdlZFJlY29yZHNDb3VudDogbWVyZ2VkUmVjb3Jkcy5sZW5ndGhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlKG1lcmdlZFJlY29yZHMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvblJlc3VsdHNNb2RlQ2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25SZXN1bHRzTW9kZUNoYW5nZShuZXdNb2RlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgYXJpYS1wcmVzc2VkPXtyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9ufVxuICAgICAgICAgICAgICAgICAgICAgICAgYXJpYS1sYWJlbD17YCR7Z2V0STE4bk1lc3NhZ2UoJ3JlbW92ZUZyb21DdXJyZW50UmVzdWx0cycpfTogJHtnZXRJMThuTWVzc2FnZSgncmVzdWx0c01vZGVEZXNjJykuc3BsaXQoJ1xcbicpWzNdPy50cmltKCkgfHwgJyd9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXsoIWFjY3VtdWxhdGVkUmVjb3JkcyB8fCBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID09PSAwKSBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPyBnZXRJMThuTWVzc2FnZSgncmVzdWx0c01vZGVEaXNhYmxlZFJlbW92ZScpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDogZ2V0STE4bk1lc3NhZ2UoJ3JlbW92ZUZyb21DdXJyZW50UmVzdWx0cycpfVxuICAgICAgICAgICAgICAgICAgICAgICAgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC43NXJlbTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogNHB4IDhweDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbWluLWhlaWdodDogMjhweDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtnZXRJMThuTWVzc2FnZSgncmVzdWx0c01vZGVSZW1vdmUnKX1cbiAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgXG4gICAgICAgICAgICAgICAgICAgICAgaWQ9e2ByZXN1bHRzLW1vZGUtZGVzY3JpcHRpb24tJHtwcm9wcy53aWRnZXRJZH1gfVxuICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInNyLW9ubHlcIlxuICAgICAgICAgICAgICAgICAgICAgIGFyaWEtbGl2ZT1cInBvbGl0ZVwiXG4gICAgICAgICAgICAgICAgICAgICAgcm9sZT1cInN0YXR1c1wiXG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICB7cmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uIFxuICAgICAgICAgICAgICAgICAgICAgICAgPyBnZXRJMThuTWVzc2FnZSgnY3JlYXRlTmV3UmVzdWx0cycpXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGdldEkxOG5NZXNzYWdlKCdhZGRUb0N1cnJlbnRSZXN1bHRzJylcbiAgICAgICAgICAgICAgICAgICAgICAgIDogZ2V0STE4bk1lc3NhZ2UoJ3JlbW92ZUZyb21DdXJyZW50UmVzdWx0cycpXG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgICAgICAgbWluLWhlaWdodDogMDtcbiAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICB7ZW5hYmxlZCAmJiBkc0V4aXN0cyAmJiAoXG4gICAgICAgICAgICAgICAgPGRpdiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDA7XG4gICAgICAgICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICAgICAgPFF1ZXJ5VGFza0Zvcm1cbiAgICAgICAgICAgICAgICAgICAga2V5PXtxdWVyeUl0ZW0uY29uZmlnSWR9XG4gICAgICAgICAgICAgICAgICAgIHsuLi5vdGhlclByb3BzfVxuICAgICAgICAgICAgICAgICAgICBjb25maWdJZD17cXVlcnlJdGVtLmNvbmZpZ0lkfVxuICAgICAgICAgICAgICAgICAgICBvdXRwdXREUz17b3V0cHV0RFN9XG4gICAgICAgICAgICAgICAgICAgIGRhdGFzb3VyY2VSZWFkeT17ZGF0YVNvdXJjZSAhPSBudWxsfVxuICAgICAgICAgICAgICAgICAgICBzcGF0aWFsRmlsdGVyRW5hYmxlZD17c3BhdGlhbEZpbHRlckVuYWJsZWR9XG4gICAgICAgICAgICAgICAgICAgIGRhdGFBY3Rpb25GaWx0ZXIgPSB7ZGF0YUFjdGlvbkZpbHRlcn1cbiAgICAgICAgICAgICAgICAgICAgb25Gb3JtU3VibWl0PXtoYW5kbGVGb3JtU3VibWl0fVxuICAgICAgICAgICAgICAgICAgICBpbml0aWFsSW5wdXRWYWx1ZT17aW5pdGlhbElucHV0VmFsdWV9XG4gICAgICAgICAgICAgICAgICAgIG9uSGFzaFBhcmFtZXRlclVzZWQ9e29uSGFzaFBhcmFtZXRlclVzZWR9XG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5SXRlbVNob3J0SWQ9e3F1ZXJ5SXRlbS5zaG9ydElkfVxuICAgICAgICAgICAgICAgICAgICBhY3RpdmVUYWI9e2FjdGl2ZVRhYn1cbiAgICAgICAgICAgICAgICAgICAgb25UYWJDaGFuZ2U9e3NldEFjdGl2ZVRhYn1cbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIDxEYXRhU291cmNlVGlwXG4gICAgICAgICAgICAgICAgd2lkZ2V0SWQ9e3Byb3BzLndpZGdldElkfVxuICAgICAgICAgICAgICAgIHVzZURhdGFTb3VyY2U9e3F1ZXJ5SXRlbS51c2VEYXRhU291cmNlfVxuICAgICAgICAgICAgICAgIHNob3dNZXNzYWdlPXt0cnVlfVxuICAgICAgICAgICAgICAgIG9uU3RhdHVzQ2hhbmdlPXtoYW5kbGVTdGF0dXNDaGFuZ2V9XG4gICAgICAgICAgICAgICAgb25EYXRhU291cmNlQ3JlYXRlZD17aGFuZGxlRGF0YVNvdXJjZUNyZWF0ZWR9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9UYWI+XG4gICAgICAgIDxUYWJcbiAgICAgICAgICBpZD0ncmVzdWx0cydcbiAgICAgICAgICB0aXRsZT17XG4gICAgICAgICAgICA8c3Bhbj5cbiAgICAgICAgICAgICAge2dldEkxOG5NZXNzYWdlKCdyZXN1bHRzVGFiJyl9XG4gICAgICAgICAgICAgIHtlZmZlY3RpdmVSZXN1bHRDb3VudCA+IDAgJiYgKFxuICAgICAgICAgICAgICAgIDxzcGFuIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IDZweDtcbiAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC43NXJlbTtcbiAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAuNztcbiAgICAgICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgICAgICh7ZWZmZWN0aXZlUmVzdWx0Q291bnR9KVxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICB9XG4gICAgICAgICAgZGlzYWJsZWQ9e2VmZmVjdGl2ZVJlc3VsdENvdW50ID09PSAwfVxuICAgICAgICA+XG4gICAgICAgICAge2VmZmVjdGl2ZVJlc3VsdENvdW50ID4gMCAmJiAoXG4gICAgICAgICAgICA8ZGl2IFxuICAgICAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ3F1ZXJ5LXRhc2tfX2NvbnRlbnQnLCB7XG4gICAgICAgICAgICAgICAgW0ZPQ1VTQUJMRV9DT05UQUlORVJfQ0xBU1NdOiBpc0luUG9wcGVyICYmIGFjdGl2ZVRhYiA9PT0gJ3Jlc3VsdHMnXG4gICAgICAgICAgICAgIH0pfSBcbiAgICAgICAgICAgICAgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgICAgICAgbWluLWhlaWdodDogMDtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgICAgICAgcGFkZGluZy10b3A6IDAgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgb25DbGljaz17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBQcmV2ZW50IGNsaWNrcyBmcm9tIGJ1YmJsaW5nIHVwIHdoZW4gUmVzdWx0cyB0YWIgaXMgYWN0aXZlXG4gICAgICAgICAgICAgICAgaWYgKGFjdGl2ZVRhYiA9PT0gJ3Jlc3VsdHMnKSB7XG4gICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8UXVlcnlUYXNrUmVzdWx0XG4gICAgICAgICAgICAgICAga2V5PXtgJHtxdWVyeUl0ZW0uY29uZmlnSWR9LSR7cXVlcnlFeGVjdXRpb25LZXlSZWYuY3VycmVudH1gfVxuICAgICAgICAgICAgICAgIHdpZGdldElkPXtwcm9wcy53aWRnZXRJZH1cbiAgICAgICAgICAgICAgICBxdWVyeUl0ZW09e3F1ZXJ5SXRlbX1cbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtcz17cXVlcnlQYXJhbVJlZi5jdXJyZW50fVxuICAgICAgICAgICAgICAgIHJlc3VsdENvdW50PXtlZmZlY3RpdmVSZXN1bHRDb3VudH1cbiAgICAgICAgICAgICAgICBtYXhQZXJQYWdlPXsoZGF0YVNvdXJjZSBhcyBRdWVyaWFibGVEYXRhU291cmNlKT8uZ2V0TWF4UmVjb3JkQ291bnQ/LigpfVxuICAgICAgICAgICAgICAgIHJlY29yZHM9e2VmZmVjdGl2ZVJlY29yZHN9XG4gICAgICAgICAgICAgICAgb3V0cHV0RFM9e291dHB1dERTfVxuICAgICAgICAgICAgICAgIHJ1bnRpbWVab29tVG9TZWxlY3RlZD17bGFzdFJ1bnRpbWVab29tVG9TZWxlY3RlZFJlZi5jdXJyZW50fVxuICAgICAgICAgICAgICAgIHJlc3VsdHNNb2RlPXtyZXN1bHRzTW9kZX1cbiAgICAgICAgICAgICAgICB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0PXt1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0fVxuICAgICAgICAgICAgICAgIGdyYXBoaWNzTGF5ZXI9e2dyYXBoaWNzTGF5ZXJ9XG4gICAgICAgICAgICAgICAgbWFwVmlldz17bWFwVmlld31cbiAgICAgICAgICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHM9e2FjY3VtdWxhdGVkUmVjb3Jkc31cbiAgICAgICAgICAgICAgICBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZT17b25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2V9XG4gICAgICAgICAgICAgICAgb25OYXZCYWNrPXthc3luYyAoY2xlYXJSZXN1bHRzID0gZmFsc2UpID0+IHtcbiAgICAgICAgICAgICAgICAgIC8vIEhhbmRsZSBuYXZpZ2F0aW9uIGZyb20gUXVlcnlUYXNrUmVzdWx0XG4gICAgICAgICAgICAgICAgICAvLyBJZiBjbGVhclJlc3VsdHMgaXMgdHJ1ZSwgY2xlYXIgZXZlcnl0aGluZyBhbmQgZ28gdG8gcXVlcnkgdGFiXG4gICAgICAgICAgICAgICAgICAvLyBJZiBmYWxzZSwganVzdCBzd2l0Y2ggdG8gcXVlcnkgdGFiIHdpdGhvdXQgY2xlYXJpbmdcbiAgICAgICAgICAgICAgICAgIGlmIChjbGVhclJlc3VsdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgaGFzU2VsZWN0ZWRSZWNvcmRzUmVmLmN1cnJlbnQgPSBmYWxzZSAvLyBSZXNldCBmbGFnIHdoZW4gY2xlYXJpbmdcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgbmF2VG9Gb3JtKHRydWUpXG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBKdXN0IHN3aXRjaCB0YWJzLCBkb24ndCBjbGVhciByZXN1bHRzXG4gICAgICAgICAgICAgICAgICAgIC8vIE1hcmsgYXMgbWFudWFsIHN3aXRjaCB0byBwcmV2ZW50IGF1dG8tc3dpdGNoIHVzZUVmZmVjdCBmcm9tIGludGVyZmVyaW5nXG4gICAgICAgICAgICAgICAgICAgIG1hbnVhbFRhYlN3aXRjaFJlZi5jdXJyZW50ID0gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICBzZXRBY3RpdmVUYWIoJ3F1ZXJ5JylcbiAgICAgICAgICAgICAgICAgICAgLy8gUmVzZXQgdGhlIGZsYWcgYWZ0ZXIgYSBzaG9ydCBkZWxheVxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBtYW51YWxUYWJTd2l0Y2hSZWYuY3VycmVudCA9IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgIH0sIDEwMClcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9UYWI+XG4gICAgICA8L1RhYnM+XG5cbiAgICAgIHsvKiBFcnJvciBNZXNzYWdlcyAqL31cbiAgICAgIHsoc2VsZWN0aW9uRXJyb3IgfHwgem9vbUVycm9yKSAmJiAoXG4gICAgICAgIDxkaXYgY3NzPXtjc3NgXG4gICAgICAgICAgcGFkZGluZzogMCAxNnB4O1xuICAgICAgICAgIG1hcmdpbi10b3A6IDhweDtcbiAgICAgICAgYH0+XG4gICAgICAgICAge3NlbGVjdGlvbkVycm9yICYmIChcbiAgICAgICAgICAgIDxFcnJvck1lc3NhZ2UgXG4gICAgICAgICAgICAgIGVycm9yPXtzZWxlY3Rpb25FcnJvcn0gXG4gICAgICAgICAgICAgIG9uRGlzbWlzcz17KCkgPT4gc2V0U2VsZWN0aW9uRXJyb3IobnVsbCl9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICl9XG4gICAgICAgICAge3pvb21FcnJvciAmJiAoXG4gICAgICAgICAgICA8RXJyb3JNZXNzYWdlIFxuICAgICAgICAgICAgICBlcnJvcj17em9vbUVycm9yfSBcbiAgICAgICAgICAgICAgb25EaXNtaXNzPXsoKSA9PiBzZXRab29tRXJyb3IobnVsbCl9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cblxuICAgICAgey8qIExvYWRpbmcgSW5kaWNhdG9yIC0gb3ZlcmxheXMgb24gdG9wIG9mIHRhYnMgKi99XG4gICAgICB7c3RhZ2UgPT09IDIgJiYgKFxuICAgICAgICA8ZGl2IGNzcz17Y3NzYFxuICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgICB0b3A6IDA7XG4gICAgICAgICAgbGVmdDogMDtcbiAgICAgICAgICByaWdodDogMDtcbiAgICAgICAgICBib3R0b206IDA7XG4gICAgICAgICAgei1pbmRleDogMTAwMDtcbiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuOCk7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgICBgfT5cbiAgICAgICAgICA8TG9hZGluZ1Jlc3VsdCAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG4gICAgPC9kaXY+XG4gIClcbn1cbiIsImltcG9ydCB7XG4gIHR5cGUgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSxcbiAgdHlwZSBJbW11dGFibGVPYmplY3QsXG4gIHR5cGUgSU1TcWxFeHByZXNzaW9uLFxuICB0eXBlIEZlYXR1cmVMYXllclF1ZXJ5UGFyYW1zLFxuICBNZXNzYWdlTWFuYWdlcixcbiAgdHlwZSBRdWVyeVBhcmFtcyxcbiAgdHlwZSBEYXRhUmVjb3JkLFxuICBEYXRhUmVjb3JkU2V0Q2hhbmdlTWVzc2FnZSxcbiAgUmVjb3JkU2V0Q2hhbmdlVHlwZSxcbiAgdHlwZSBJbW11dGFibGVBcnJheSxcbiAgZGF0YVNvdXJjZVV0aWxzXG59IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB0eXBlIHsgSUZpZWxkSW5mbyB9IGZyb20gJ0Blc3JpL2FyY2dpcy1yZXN0LWZlYXR1cmUtc2VydmljZSdcbmltcG9ydCB7IHR5cGUgUXVlcnlJdGVtVHlwZSwgU3BhdGlhbFJlbGF0aW9uLCB0eXBlIFNwYXRpYWxGaWx0ZXJPYmosIEZpZWxkc1R5cGUsIG1hcEpTQVBJVW5pdFRvRHNVbml0LCBtYXBKU0FQSVNwYXRpYWxSZWxUb0RzU3BhdGlhbFJlbCB9IGZyb20gJy4uL2NvbmZpZydcbmltcG9ydCB7IGdldEZpZWxkSW5mb3NJblBvcHVwQ29udGVudCwgY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlciB9IGZyb20gJy4uLy4uLy4uL3NoYXJlZC1jb2RlL2NvbW1vbidcblxuY29uc3QgZGVidWdMb2dnZXIgPSBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyKClcblxuZXhwb3J0IGZ1bmN0aW9uIGNvbWJpbmVGaWVsZHMgKHJlc3VsdERpc3BsYXlGaWVsZHM6IEltbXV0YWJsZUFycmF5PHN0cmluZz4sIHJlc3VsdFRpdGxlRXhwcmVzc2lvbjogc3RyaW5nLCBpZEZpZWxkPzogc3RyaW5nKTogc3RyaW5nW10ge1xuICBjb25zdCBmaWVsZHMgPSBuZXcgU2V0PHN0cmluZz4oKVxuICByZXN1bHREaXNwbGF5RmllbGRzPy5mb3JFYWNoKGl0ZW0gPT4gZmllbGRzLmFkZChpdGVtKSlcbiAgaWYgKHJlc3VsdFRpdGxlRXhwcmVzc2lvbikge1xuICAgIGNvbnN0IHRlbXBsYXRlcyA9IHJlc3VsdFRpdGxlRXhwcmVzc2lvbi5tYXRjaCgvXFx7XFx3KlxcfS9nKVxuICAgIGlmICh0ZW1wbGF0ZXM/Lmxlbmd0aCA+IDApIHtcbiAgICAgIHRlbXBsYXRlcy5mb3JFYWNoKGl0ZW0gPT4gZmllbGRzLmFkZChpdGVtLnN1YnN0cmluZygxLCBpdGVtLmxlbmd0aCAtIDEpKSlcbiAgICB9XG4gIH1cbiAgaWYgKGlkRmllbGQpIHtcbiAgICBmaWVsZHMuYWRkKGlkRmllbGQpXG4gIH1cbiAgcmV0dXJuIEFycmF5LmZyb20oZmllbGRzKVxufVxuXG4vKipcbiAqIFZhbGlkYXRlcyB1c2VyIGlucHV0IGJlZm9yZSBxdWVyeSBleGVjdXRpb24uXG4gKiBAcGFyYW0gaW5wdXQgLSBUaGUgcmF3IHVzZXIgaW5wdXQgKHN0cmluZywgbnVtYmVyLCBldGMuKVxuICogQHBhcmFtIGlzTGlzdCAtIE9wdGlvbmFsIGZsYWcgaW5kaWNhdGluZyBpZiB0aGUgaW5wdXQgaXMgZnJvbSBhIGxpc3Qvc2VsZWN0b3IgKGxlbmllbnQgdmFsaWRhdGlvbilcbiAqIEByZXR1cm5zIGJvb2xlYW4gLSB0cnVlIGlmIGlucHV0IGlzIHZhbGlkLCBmYWxzZSBvdGhlcndpc2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzUXVlcnlJbnB1dFZhbGlkIChpbnB1dDogYW55LCBpc0xpc3Q6IGJvb2xlYW4gPSBmYWxzZSk6IGJvb2xlYW4ge1xuICAvLyBJZiBpdCdzIGEgbGlzdC1iYXNlZCBzZWxlY3Rpb24gKFVuaXF1ZSBWYWx1ZXMsIEZpZWxkIFZhbHVlcyksIFxuICAvLyB3ZSBhbGxvdyBlbXB0eS9udWxsIGFzIGl0IG1pZ2h0IHJlcHJlc2VudCBcIm5vIGZpbHRlclwiIG9yIHRoZSB1c2VyIFxuICAvLyBpbnRlbmRzIHRvIGludGVyYWN0IHdpdGggdGhlIGxpc3QuXG4gIGlmIChpc0xpc3QpIHtcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgaWYgKGlucHV0ID09PSBudWxsIHx8IGlucHV0ID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuICBcbiAgLy8gSWYgaXQncyBhIHN0cmluZywgZW5zdXJlIGl0J3Mgbm90IGVtcHR5IG9yIGp1c3Qgd2hpdGVzcGFjZVxuICBpZiAodHlwZW9mIGlucHV0ID09PSAnc3RyaW5nJykge1xuICAgIHJldHVybiBpbnB1dC50cmltKCkgIT09ICcnXG4gIH1cblxuICAvLyBJZiBpdCdzIGFuIGFycmF5IChvZnRlbiB1c2VkIGluIHVuaXF1ZSB2YWx1ZXMgb3IgbXVsdGlwbGUgc2VsZWN0aW9uKVxuICBpZiAoQXJyYXkuaXNBcnJheShpbnB1dCkpIHtcbiAgICBpZiAoaW5wdXQubGVuZ3RoID09PSAwKSByZXR1cm4gZmFsc2VcbiAgICAvLyBDaGVjayBpZiB0aGUgZmlyc3QgaXRlbSBpcyB2YWxpZCAodXN1YWxseSB7dmFsdWU6ICcuLi4nLCBsYWJlbDogJy4uLid9KVxuICAgIGNvbnN0IGZpcnN0SXRlbSA9IGlucHV0WzBdXG4gICAgaWYgKGZpcnN0SXRlbSAmJiB0eXBlb2YgZmlyc3RJdGVtID09PSAnb2JqZWN0JyAmJiAndmFsdWUnIGluIGZpcnN0SXRlbSkge1xuICAgICAgcmV0dXJuIGlzUXVlcnlJbnB1dFZhbGlkKGZpcnN0SXRlbS52YWx1ZSlcbiAgICB9XG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIC8vIElmIGl0J3MgYSBqaW11LWNvcmUgSW1tdXRhYmxlIGFycmF5XG4gIGlmIChpbnB1dC5hc011dGFibGUgJiYgdHlwZW9mIGlucHV0LnRvQXJyYXkgPT09ICdmdW5jdGlvbicpIHtcbiAgICBjb25zdCBhcnIgPSBpbnB1dC50b0FycmF5KClcbiAgICBpZiAoYXJyLmxlbmd0aCA9PT0gMCkgcmV0dXJuIGZhbHNlXG4gICAgY29uc3QgZmlyc3RJdGVtID0gYXJyWzBdXG4gICAgaWYgKGZpcnN0SXRlbSAmJiB0eXBlb2YgZmlyc3RJdGVtID09PSAnb2JqZWN0JyAmJiAndmFsdWUnIGluIGZpcnN0SXRlbSkge1xuICAgICAgcmV0dXJuIGlzUXVlcnlJbnB1dFZhbGlkKGZpcnN0SXRlbS52YWx1ZSlcbiAgICB9XG4gICAgcmV0dXJuIHRydWVcbiAgfVxuICBcbiAgLy8gRm9yIG90aGVyIHR5cGVzIChudW1iZXJzLCBkYXRlcyksIGlmIGl0IGV4aXN0cywgd2UgY291bnQgaXQgYXMgdmFsaWRcbiAgcmV0dXJuIHRydWVcbn1cblxuLyoqXG4gKiBTYW5pdGl6ZXMgdXNlciBpbnB1dCBmb3IgcXVlcnkgdGFza3MuXG4gKiAxLiBTdHJpcHMgbGVhZGluZyBhbmQgdHJhaWxpbmcgd2hpdGVzcGFjZS5cbiAqIDIuIFByZXZlbnRzIGJhc2ljIFNRTCBpbmplY3Rpb24gYnkgZXNjYXBpbmcgc2luZ2xlIHF1b3Rlcy5cbiAqIDMuIEhhbmRsZXMgZW1wdHkgb3Igd2hpdGVzcGFjZS1vbmx5IHN0cmluZ3MuXG4gKiBcbiAqIEBwYXJhbSBpbnB1dCAtIFRoZSByYXcgdXNlciBpbnB1dCBzdHJpbmdcbiAqIEByZXR1cm5zIFNhbml0aXplZCBzdHJpbmcgb3IgbnVsbCBpZiBpbnB1dCBpcyBlbXB0eVxuICovXG5leHBvcnQgZnVuY3Rpb24gc2FuaXRpemVRdWVyeUlucHV0IChpbnB1dDogc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZCk6IHN0cmluZyB8IG51bGwge1xuICBpZiAoIWlucHV0IHx8IHR5cGVvZiBpbnB1dCAhPT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG4gIFxuICBjb25zdCB0cmltbWVkID0gaW5wdXQudHJpbSgpXG4gIGlmICh0cmltbWVkID09PSAnJykge1xuICAgIHJldHVybiBudWxsXG4gIH1cbiAgXG4gIC8vIEJhc2ljIFNRTCBlc2NhcGluZzogcmVwbGFjZSBzaW5nbGUgcXVvdGVzIHdpdGggZG91YmxlIHNpbmdsZSBxdW90ZXNcbiAgcmV0dXJuIHRyaW1tZWQucmVwbGFjZSgvJy9nLCBcIicnXCIpXG59XG5cbi8qKlxuICogU2FuaXRpemVzIGFsbCB2YWx1ZXMgd2l0aGluIGFuIElNU3FsRXhwcmVzc2lvbiBvYmplY3QuXG4gKiBcbiAqIEBwYXJhbSBzcWxFeHByIC0gVGhlIHJhdyBTUUwgZXhwcmVzc2lvbiBvYmplY3RcbiAqIEByZXR1cm5zIEEgbmV3IHNhbml0aXplZCBJTVNxbEV4cHJlc3Npb24gb2JqZWN0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzYW5pdGl6ZVNxbEV4cHJlc3Npb24gKHNxbEV4cHI6IElNU3FsRXhwcmVzc2lvbik6IElNU3FsRXhwcmVzc2lvbiB7XG4gIGlmICghc3FsRXhwciB8fCAhc3FsRXhwci5wYXJ0cykge1xuICAgIHJldHVybiBzcWxFeHByXG4gIH1cblxuICBsZXQgc2FuaXRpemVkRXhwciA9IHNxbEV4cHJcbiAgc3FsRXhwci5wYXJ0cy5mb3JFYWNoKChwYXJ0LCBpbmRleCkgPT4ge1xuICAgIGlmIChwYXJ0LnR5cGUgPT09ICdTSU5HTEUnICYmIHBhcnQudmFsdWVPcHRpb25zPy52YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBjb25zdCByYXdWYWx1ZSA9IHBhcnQudmFsdWVPcHRpb25zLnZhbHVlXG4gICAgICBcbiAgICAgIC8vIENBU0UgMTogU2ltcGxlIFN0cmluZ1xuICAgICAgaWYgKHR5cGVvZiByYXdWYWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgY29uc3Qgc2FuaXRpemVkVmFsdWUgPSBzYW5pdGl6ZVF1ZXJ5SW5wdXQocmF3VmFsdWUpXG4gICAgICAgIGlmIChzYW5pdGl6ZWRWYWx1ZSAhPT0gcmF3VmFsdWUpIHtcbiAgICAgICAgICBzYW5pdGl6ZWRFeHByID0gc2FuaXRpemVkRXhwci5zZXRJbihbJ3BhcnRzJywgaW5kZXgsICd2YWx1ZU9wdGlvbnMnLCAndmFsdWUnXSwgc2FuaXRpemVkVmFsdWUpXG4gICAgICAgIH1cbiAgICAgIH0gXG4gICAgICAvLyBDQVNFIDI6IEFycmF5IG9mIG9iamVjdHMgKFVuaXF1ZSBWYWx1ZXMgLyBEcm9wZG93bnMpXG4gICAgICAvLyBXZSBtdXN0IHByZXNlcnZlIHRoZSBJbW11dGFibGUgc3RydWN0dXJlIHRvIGF2b2lkIFwiYXNNdXRhYmxlXCIgZXJyb3JzXG4gICAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KHJhd1ZhbHVlKSB8fCAocmF3VmFsdWUgJiYgdHlwZW9mIChyYXdWYWx1ZSBhcyBhbnkpLnRvQXJyYXkgPT09ICdmdW5jdGlvbicpKSB7XG4gICAgICAgIGNvbnN0IGlzSW1tdXRhYmxlID0gdHlwZW9mIChyYXdWYWx1ZSBhcyBhbnkpLnRvQXJyYXkgPT09ICdmdW5jdGlvbidcbiAgICAgICAgY29uc3QgYXJyID0gaXNJbW11dGFibGUgPyAocmF3VmFsdWUgYXMgYW55KS50b0FycmF5KCkgOiAocmF3VmFsdWUgYXMgYW55W10pXG4gICAgICAgIFxuICAgICAgICBsZXQgY2hhbmdlZCA9IGZhbHNlXG4gICAgICAgIGNvbnN0IHNhbml0aXplZEFyciA9IGFyci5tYXAoaXRlbSA9PiB7XG4gICAgICAgICAgaWYgKGl0ZW0gJiYgdHlwZW9mIGl0ZW0gPT09ICdvYmplY3QnICYmICd2YWx1ZScgaW4gaXRlbSAmJiB0eXBlb2YgaXRlbS52YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGNvbnN0IHNhbml0aXplZFZhbCA9IHNhbml0aXplUXVlcnlJbnB1dChpdGVtLnZhbHVlKVxuICAgICAgICAgICAgaWYgKHNhbml0aXplZFZhbCAhPT0gaXRlbS52YWx1ZSkge1xuICAgICAgICAgICAgICBjaGFuZ2VkID0gdHJ1ZVxuICAgICAgICAgICAgICByZXR1cm4geyAuLi5pdGVtLCB2YWx1ZTogc2FuaXRpemVkVmFsIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGl0ZW1cbiAgICAgICAgfSlcbiAgICAgICAgXG4gICAgICAgIGlmIChjaGFuZ2VkKSB7XG4gICAgICAgICAgLy8gSWYgaXQgd2FzIEltbXV0YWJsZSwgd2Ugc2hvdWxkIGlkZWFsbHkgdXNlIEltbXV0YWJsZSBtZXRob2RzIHRvIHVwZGF0ZSxcbiAgICAgICAgICAvLyBidXQgc2V0SW4gb24gdGhlIHRvcC1sZXZlbCBleHByZXNzaW9uIHdpdGggYSBwbGFpbiBhcnJheS9vYmplY3QgXG4gICAgICAgICAgLy8gdXN1YWxseSB0cmlnZ2VycyB0aGUgZnJhbWV3b3JrJ3MgYXV0by1jb252ZXJzaW9uLlxuICAgICAgICAgIHNhbml0aXplZEV4cHIgPSBzYW5pdGl6ZWRFeHByLnNldEluKFsncGFydHMnLCBpbmRleCwgJ3ZhbHVlT3B0aW9ucycsICd2YWx1ZSddLCBzYW5pdGl6ZWRBcnIpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0pXG5cbiAgcmV0dXJuIHNhbml0aXplZEV4cHJcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFBvcHVwVGVtcGxhdGUgKFxuICBvdXRwdXREUzogRmVhdHVyZUxheWVyRGF0YVNvdXJjZSxcbiAgcXVlcnlJdGVtOiBJbW11dGFibGVPYmplY3Q8UXVlcnlJdGVtVHlwZT5cbik6IFByb21pc2U8eyBwb3B1cFRlbXBsYXRlPzogX19lc3JpLlBvcHVwVGVtcGxhdGUsIGRlZmF1bHRQb3B1cFRlbXBsYXRlPzogX19lc3JpLlBvcHVwVGVtcGxhdGUgfT4ge1xuICBjb25zdCB7IHJlc3VsdEZpZWxkc1R5cGUsIHJlc3VsdERpc3BsYXlGaWVsZHMsIHJlc3VsdFRpdGxlRXhwcmVzc2lvbiA9ICcnIH0gPSBxdWVyeUl0ZW1cbiAgY29uc3QgY3VycmVudE9yaWdpbkRzOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlID0gb3V0cHV0RFMuZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKVswXSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gIGNvbnN0IHBvcHVwSW5mbyA9IGN1cnJlbnRPcmlnaW5Ecy5nZXRQb3B1cEluZm8oKVxuXG4gIGlmIChyZXN1bHRGaWVsZHNUeXBlID09PSBGaWVsZHNUeXBlLlNlbGVjdEF0dHJpYnV0ZXMpIHtcbiAgICBsZXQgZmllbGRzOiBzdHJpbmdbXVxuICAgIGlmIChyZXN1bHREaXNwbGF5RmllbGRzID09IG51bGwpIHtcbiAgICAgIGNvbnN0IGZpZWxkc0luQ29udGVudCA9IGdldEZpZWxkSW5mb3NJblBvcHVwQ29udGVudChwb3B1cEluZm8pXG4gICAgICBpZiAoZmllbGRzSW5Db250ZW50Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgdW5pcXVlRmllbGRzID0gbmV3IFNldChmaWVsZHNJbkNvbnRlbnQubWFwKGVsZSA9PiBlbGUuZmllbGROYW1lKSlcbiAgICAgICAgZmllbGRzID0gQXJyYXkuZnJvbSh1bmlxdWVGaWVsZHMpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyByZXR1cm4gYWxsIGZpZWxkcyBieSBkZWZhdWx0XG4gICAgICAgIGNvbnN0IGFsbEZpZWxkc1NjaGVtYSA9IG91dHB1dERTLmdldFNjaGVtYSgpXG4gICAgICAgIGZpZWxkcyA9IGFsbEZpZWxkc1NjaGVtYT8uZmllbGRzID8gT2JqZWN0LnZhbHVlcyhhbGxGaWVsZHNTY2hlbWEuZmllbGRzKS5tYXAoZmllbGQgPT4gZmllbGQuamltdU5hbWUpIDogW11cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZmllbGRzID0gcmVzdWx0RGlzcGxheUZpZWxkcy5hc011dGFibGUoeyBkZWVwOiB0cnVlIH0pXG4gICAgfVxuICAgIGlmIChwb3B1cEluZm8pIHtcbiAgICAgIGNvbnN0IGZpZWxkSW5mb3MgPSBbXVxuICAgICAgZmllbGRzLmZvckVhY2goZmllbGQgPT4ge1xuICAgICAgICBjb25zdCBmaWVsZEluZm8gPSBwb3B1cEluZm8uZmllbGRJbmZvcy5maW5kKGZpZWxkSW5mbyA9PiBmaWVsZEluZm8uZmllbGROYW1lID09PSBmaWVsZClcbiAgICAgICAgaWYgKGZpZWxkSW5mbykge1xuICAgICAgICAgIGZpZWxkSW5mby52aXNpYmxlID0gdHJ1ZVxuICAgICAgICAgIGZpZWxkSW5mb3MucHVzaChmaWVsZEluZm8pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZmllbGRJbmZvcy5wdXNoKHtcbiAgICAgICAgICAgIGZpZWxkTmFtZTogZmllbGQsXG4gICAgICAgICAgICBsYWJlbDogZmllbGRcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcG9wdXBUZW1wbGF0ZToge1xuICAgICAgICAgIGZpZWxkSW5mb3MsXG4gICAgICAgICAgY29udGVudDogW3tcbiAgICAgICAgICAgIHR5cGU6ICdmaWVsZHMnXG4gICAgICAgICAgfV0sXG4gICAgICAgICAgdGl0bGU6IHJlc3VsdFRpdGxlRXhwcmVzc2lvblxuICAgICAgICB9XG4gICAgICB9IGFzIGFueVxuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgcG9wdXBUZW1wbGF0ZToge1xuICAgICAgICBmaWVsZEluZm9zOiBmaWVsZHMubWFwKGZpZWxkID0+ICh7XG4gICAgICAgICAgZmllbGROYW1lOiBmaWVsZCxcbiAgICAgICAgICBsYWJlbDogZmllbGRcbiAgICAgICAgfSkpLFxuICAgICAgICBjb250ZW50OiBbe1xuICAgICAgICAgIHR5cGU6ICdmaWVsZHMnXG4gICAgICAgIH1dLFxuICAgICAgICB0aXRsZTogcmVzdWx0VGl0bGVFeHByZXNzaW9uXG4gICAgICB9IGFzIGFueVxuICAgIH1cbiAgfVxuICAvLyB0aGUgc291cmNlIGxheWVyIHdpbGwgcHJvdmlkZSBwb3B1cCBpbmZvXG4gIGxldCBsYXllck9iamVjdFxuICBpZiAoY3VycmVudE9yaWdpbkRzLmxheWVyKSB7XG4gICAgbGF5ZXJPYmplY3QgPSBjdXJyZW50T3JpZ2luRHMubGF5ZXJcbiAgfSBlbHNlIHtcbiAgICBsYXllck9iamVjdCA9IGF3YWl0IGN1cnJlbnRPcmlnaW5Ecy5jcmVhdGVKU0FQSUxheWVyQnlEYXRhU291cmNlKClcbiAgfVxuICBpZiAobGF5ZXJPYmplY3QpIHtcbiAgICBhd2FpdCBsYXllck9iamVjdC5sb2FkKClcbiAgfVxuICByZXR1cm4geyBkZWZhdWx0UG9wdXBUZW1wbGF0ZTogbGF5ZXJPYmplY3Q/LmFzc29jaWF0ZWRMYXllcj8uZGVmYXVsdFBvcHVwVGVtcGxhdGUgfHwgbGF5ZXJPYmplY3Q/LmRlZmF1bHRQb3B1cFRlbXBsYXRlIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlUXVlcnlQYXJhbXMgKFxuICBvdXRwdXREUzogRmVhdHVyZUxheWVyRGF0YVNvdXJjZSxcbiAgc3FsRXhwcjogSU1TcWxFeHByZXNzaW9uLFxuICBzcGF0aWFsRmlsdGVyOiBTcGF0aWFsRmlsdGVyT2JqLFxuICBxdWVyeUl0ZW06IEltbXV0YWJsZU9iamVjdDxRdWVyeUl0ZW1UeXBlPixcbiAgcGFnZTogbnVtYmVyLFxuICBwYWdlU2l6ZTogbnVtYmVyXG4pOiBRdWVyeVBhcmFtcyB7XG4gIGNvbnN0IGN1cnJlbnRRdWVyeURzSnNvbiA9IG91dHB1dERTLmdldERhdGFTb3VyY2VKc29uKClcbiAgY29uc3QgY3VycmVudE9yaWdpbkRzOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlID0gb3V0cHV0RFMuZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKVswXSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gIGNvbnN0IGlzTG9jYWxEcyA9IGN1cnJlbnRRdWVyeURzSnNvbj8uaXNEYXRhSW5EYXRhU291cmNlSW5zdGFuY2VcbiAgaWYgKGlzTG9jYWxEcykge1xuICAgIG91dHB1dERTLnNldFNvdXJjZVJlY29yZHMoY3VycmVudE9yaWdpbkRzLmdldFNvdXJjZVJlY29yZHMoKSlcbiAgfVxuXG4gIGNvbnN0IHsgdXNlQXR0cmlidXRlRmlsdGVyLCB1c2VTcGF0aWFsRmlsdGVyLCBzb3J0T3B0aW9ucywgcmVzdWx0RmllbGRzVHlwZSwgcmVzdWx0RGlzcGxheUZpZWxkcywgcmVzdWx0VGl0bGVFeHByZXNzaW9uIH0gPSBxdWVyeUl0ZW1cbiAgXG4gIC8vIERFVEVSTUlORSBNSU5JTUFMIEZJRUxEUyAoVGhlIFwiRmllbGQgU2hyZWRkZXJcIiBPcHRpbWl6YXRpb24pXG4gIC8vIFRvIGFjaGlldmUgcGVyZm9ybWFuY2UgcGFyaXR5IHdpdGggV2ViIEFwcEJ1aWxkZXIsIHdlIG11c3QgYXZvaWQgZmV0Y2hpbmcgZXZlcnkgXG4gIC8vIGNvbHVtbiBpbiB0aGUgZGF0YWJhc2UgKCogb3IgYWxsKS4gV2Ugc3VyZ2ljYWxseSByZXF1ZXN0IG9ubHkgdGhlIGZpZWxkcyBcbiAgLy8gbmVlZGVkIGZvciB0aGUgVGl0bGUsIHRoZSBBdHRyaWJ1dGUgTGlzdCwgYW5kIHRoZSBJRCBmaWVsZC5cbiAgbGV0IG91dHB1dEZpZWxkczogc3RyaW5nW10gPSBbXVxuICBpZiAocmVzdWx0RmllbGRzVHlwZSA9PT0gRmllbGRzVHlwZS5TZWxlY3RBdHRyaWJ1dGVzICYmIHJlc3VsdERpc3BsYXlGaWVsZHMpIHtcbiAgICBvdXRwdXRGaWVsZHMgPSBjb21iaW5lRmllbGRzKHJlc3VsdERpc3BsYXlGaWVsZHMgYXMgYW55LCByZXN1bHRUaXRsZUV4cHJlc3Npb24gfHwgJycsIG91dHB1dERTLmdldElkRmllbGQoKSlcbiAgfSBlbHNlIHtcbiAgICAvLyBQb3B1cCBtb2RlOiBHZXQgb25seSB2aXNpYmxlIGZpZWxkcyBmcm9tIHBvcHVwIGluZm9cbiAgICBjb25zdCBwb3B1cEluZm8gPSBjdXJyZW50T3JpZ2luRHMuZ2V0UG9wdXBJbmZvKClcbiAgICBjb25zdCBmaWVsZE5hbWVzID0gT2JqZWN0LnZhbHVlcyhjdXJyZW50T3JpZ2luRHMuZ2V0U2NoZW1hKCkuZmllbGRzID8/IHt9KS5tYXAoZiA9PiBmLm5hbWUpXG4gICAgY29uc3QgdmFsaWRGaWVsZEluZm9zID0gcG9wdXBJbmZvPy5maWVsZEluZm9zPy5maWx0ZXIoZmllbGRJbmZvID0+IGZpZWxkSW5mby52aXNpYmxlICE9PSBmYWxzZSAmJiBmaWVsZE5hbWVzLmluY2x1ZGVzKGZpZWxkSW5mby5maWVsZE5hbWUpKVxuICAgIG91dHB1dEZpZWxkcyA9IHZhbGlkRmllbGRJbmZvcz8ubWFwKGZpZWxkSW5mbyA9PiBmaWVsZEluZm8uZmllbGROYW1lKSB8fCBbXVxuICAgIFxuICAgIC8vIEFsd2F5cyBlbnN1cmUgSUQgZmllbGQgaXMgaW5jbHVkZWRcbiAgICBjb25zdCBpZEZpZWxkID0gb3V0cHV0RFMuZ2V0SWRGaWVsZCgpXG4gICAgaWYgKGlkRmllbGQgJiYgIW91dHB1dEZpZWxkcy5pbmNsdWRlcyhpZEZpZWxkKSkge1xuICAgICAgb3V0cHV0RmllbGRzLnB1c2goaWRGaWVsZClcbiAgICB9XG4gIH1cblxuICBjb25zdCBtZXJnZWRRdWVyeVBhcmFtcyA9IG91dHB1dERTLm1lcmdlUXVlcnlQYXJhbXMoY3VycmVudE9yaWdpbkRzLmdldEN1cnJlbnRRdWVyeVBhcmFtcygpID8/IHt9LCB7XG4gICAgd2hlcmU6ICh1c2VBdHRyaWJ1dGVGaWx0ZXIgJiYgc3FsRXhwcj8uc3FsKSA/IGRhdGFTb3VyY2VVdGlscy5nZXRBcmNHSVNTUUwoc3FsRXhwciwgb3V0cHV0RFMpLnNxbCA6ICcxPTEnLFxuICAgIHNxbEV4cHJlc3Npb246ICh1c2VBdHRyaWJ1dGVGaWx0ZXIgJiYgc3FsRXhwcj8uc3FsKSA/IHNxbEV4cHIgOiBudWxsLFxuICAgIC8vIEZPUkNFIG1pbmltYWwgZmllbGRzIGhlcmUgdG8gb3ZlcnJpZGUgYW55IGZyYW1ld29yayBcIipcIiBvciBcImFsbFwiXG4gICAgb3V0RmllbGRzOiBvdXRwdXRGaWVsZHNcbiAgfSBhcyBhbnkpXG5cbiAgLy8gUEVSRk9STUFOQ0UgT1BUSU1JWkFUSU9OOiBVbml2ZXJzYWwgU1FMIE9wdGltaXplclxuICAvLyBXZSBub3JtYWxpemUgdGhlIHVzZXIncyBpbnB1dCB0byBVUFBFUkNBU0UgdG8gZW5zdXJlIGNhc2UtaW5zZW5zaXRpdml0eSB3aGlsZSBcbiAgLy8gdW53cmFwcGluZyBhbnkgTE9XRVIoKSBmdW5jdGlvbiBhcm91bmQgdGhlIGZpZWxkIG5hbWUuIFRoaXMgYWxsb3dzIHRoZSBkYXRhYmFzZSBcbiAgLy8gdG8gdXNlIGl0cyBhdHRyaWJ1dGUgaW5kZXhlcyAoU0FSR2FibGUgcXVlcnkpLlxuICBpZiAobWVyZ2VkUXVlcnlQYXJhbXMud2hlcmUgJiYgbWVyZ2VkUXVlcnlQYXJhbXMud2hlcmUuaW5jbHVkZXMoJ0xPV0VSKCcpKSB7XG4gICAgY29uc3Qgb3B0aW1pemVkV2hlcmUgPSBtZXJnZWRRdWVyeVBhcmFtcy53aGVyZS5yZXBsYWNlKC9MT1dFUlxcKChbXildKylcXClcXHMqKD18TElLRSlcXHMqJyhbXiddKiknL2dpLCAobWF0Y2gsIGZpZWxkLCBvcGVyYXRvciwgdmFsdWUpID0+IHtcbiAgICAgIC8vIE5vcm1hbGl6ZSBib3RoIHNpZGVzIHRvIFVQUEVSQ0FTRS4gVGhpcyB3b3JrcyBmb3IgQU5ZIGZpZWxkIG5hbWUuXG4gICAgICAvLyBXZSBrZWVwIHRoZSBmaWVsZCBuYW1lIFwibmFrZWRcIiBzbyB0aGUgaW5kZXggaXMgdXNlZC5cbiAgICAgIHJldHVybiBgJHtmaWVsZH0gJHtvcGVyYXRvcn0gJyR7dmFsdWUudG9VcHBlckNhc2UoKX0nYFxuICAgIH0pXG4gICAgXG4gICAgaWYgKG9wdGltaXplZFdoZXJlICE9PSBtZXJnZWRRdWVyeVBhcmFtcy53aGVyZSkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgICBldmVudDogJ3NxbC1vcHRpbWl6ZWQnLFxuICAgICAgICBvcmlnaW5hbDogbWVyZ2VkUXVlcnlQYXJhbXMud2hlcmUsXG4gICAgICAgIG9wdGltaXplZDogb3B0aW1pemVkV2hlcmVcbiAgICAgIH0pXG4gICAgICBtZXJnZWRRdWVyeVBhcmFtcy53aGVyZSA9IG9wdGltaXplZFdoZXJlXG4gICAgfVxuICB9XG5cbiAgLy8gY29tcG9zZSBxdWVyeSBwYXJhbXMgZm9yIHF1ZXJ5XG4gIGNvbnN0IHF1ZXJ5UGFyYW1zOiBGZWF0dXJlTGF5ZXJRdWVyeVBhcmFtcyA9IHtcbiAgICAvLyB1cmw6IGRzLnVybCxcbiAgICByZXR1cm5HZW9tZXRyeTogdHJ1ZSxcbiAgICAvKiogXG4gICAgICogUEVSRk9STUFOQ0UgT1BUSU1JWkFUSU9OOiBGb3JjZSBsb3dlciBwcmVjaXNpb24gZm9yIGFsbCBkaXNwbGF5IHF1ZXJpZXMuXG4gICAgICovXG4gICAgbWF4QWxsb3dhYmxlT2Zmc2V0OiAwLjEsIFxuICAgIHBhZ2UsXG4gICAgLy8gTGltaXQgcGFnZVNpemUgdG8gYSBzYW5lIGRlZmF1bHQgaWYgbm90IHByb3ZpZGVkIG9yIHRvbyBsYXJnZVxuICAgIHBhZ2VTaXplOiAocGFnZVNpemUgJiYgcGFnZVNpemUgPCAxMDAwKSA/IHBhZ2VTaXplIDogMTAwMCxcbiAgICAuLi5tZXJnZWRRdWVyeVBhcmFtc1xuICB9XG5cbiAgLy8gRmluYWwgb3ZlcnJpZGUgdG8gZW5zdXJlIG5vIFwiKlwiIGxlYWtzIHRocm91Z2ggZnJvbSBhbnkgbWVyZ2Ugb3BlcmF0aW9uXG4gIGlmICghcXVlcnlQYXJhbXMub3V0RmllbGRzIHx8IHF1ZXJ5UGFyYW1zLm91dEZpZWxkcy5pbmNsdWRlcygnKicpKSB7XG4gICAgcXVlcnlQYXJhbXMub3V0RmllbGRzID0gb3V0cHV0RmllbGRzXG4gIH1cblxuICAvLyBEaWFnbm9zdGljIGxvZzogU2hvdyBleGFjdGx5IFdISUNIIGZpZWxkcyBhcmUgYmVpbmcgc2VudFxuICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgZXZlbnQ6ICdyZXF1ZXN0aW5nLWRhdGEnLFxuICAgIGZpZWxkc0NvdW50OiBxdWVyeVBhcmFtcy5vdXRGaWVsZHM/Lmxlbmd0aCxcbiAgICBmaWVsZHM6IHF1ZXJ5UGFyYW1zLm91dEZpZWxkcz8uam9pbignLCAnKSxcbiAgICBwYWdlU2l6ZTogcXVlcnlQYXJhbXMucGFnZVNpemUsXG4gICAgb2Zmc2V0OiBxdWVyeVBhcmFtcy5tYXhBbGxvd2FibGVPZmZzZXRcbiAgfSlcblxuICBpZiAodXNlU3BhdGlhbEZpbHRlciAmJiBzcGF0aWFsRmlsdGVyPy5nZW9tZXRyeSkge1xuICAgIGNvbnN0IHsgZ2VvbWV0cnksIHJlbGF0aW9uID0gU3BhdGlhbFJlbGF0aW9uLkludGVyc2VjdCwgYnVmZmVyIH0gPSBzcGF0aWFsRmlsdGVyXG5cbiAgICBjb25zdCBzcGF0aWFsUXVlcnlQYXJhbXM6IEZlYXR1cmVMYXllclF1ZXJ5UGFyYW1zID0ge1xuICAgICAgZ2VvbWV0cnlUeXBlOiBkYXRhU291cmNlVXRpbHMuY2hhbmdlSlNBUElHZW9tZXRyeVR5cGVUb1Jlc3RBUElHZW9tZXRyeVR5cGUoZ2VvbWV0cnkudHlwZSksXG4gICAgICBnZW9tZXRyeTogZ2VvbWV0cnkudG9KU09OKCksXG4gICAgICBzcGF0aWFsUmVsOiBtYXBKU0FQSVNwYXRpYWxSZWxUb0RzU3BhdGlhbFJlbFtyZWxhdGlvbl0sXG4gICAgICBkaXN0YW5jZTogYnVmZmVyPy5kaXN0YW5jZSxcbiAgICAgIHVuaXRzOiBidWZmZXI/LnVuaXQgPyBtYXBKU0FQSVVuaXRUb0RzVW5pdFtidWZmZXIudW5pdF0gOiB1bmRlZmluZWRcbiAgICB9XG4gICAgT2JqZWN0LmFzc2lnbihxdWVyeVBhcmFtcywgc3BhdGlhbFF1ZXJ5UGFyYW1zKVxuICB9XG5cbiAgaWYgKHNvcnRPcHRpb25zPy5sZW5ndGggPiAwKSB7XG4gICAgT2JqZWN0LmFzc2lnbihxdWVyeVBhcmFtcywge1xuICAgICAgb3JkZXJCeUZpZWxkczogc29ydE9wdGlvbnMubWFwKGl0ZW0gPT4gYCR7aXRlbS5qaW11RmllbGROYW1lfSAke2l0ZW0ub3JkZXJ9YClcbiAgICB9KVxuICB9XG5cbiAgcmV0dXJuIHF1ZXJ5UGFyYW1zXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBleGVjdXRlQ291bnRRdWVyeSAoXG4gIHdpZGdldElkOiBzdHJpbmcsXG4gIG91dHB1dERTOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLFxuICBxdWVyeVBhcmFtczogUXVlcnlQYXJhbXNcbik6IFByb21pc2U8bnVtYmVyPiB7XG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG91dHB1dERTLmxvYWRDb3VudChxdWVyeVBhcmFtcywgeyB3aWRnZXRJZCwgcmVmcmVzaDogdHJ1ZSB9KVxuICByZXR1cm4gcmVzdWx0ICE9IG51bGwgPyByZXN1bHQgOiAwXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBleGVjdXRlUXVlcnkgKFxuICB3aWRnZXRJZDogc3RyaW5nLFxuICBxdWVyeUl0ZW06IEltbXV0YWJsZU9iamVjdDxRdWVyeUl0ZW1UeXBlPixcbiAgb3V0cHV0RFM6IEZlYXR1cmVMYXllckRhdGFTb3VyY2UsXG4gIHF1ZXJ5UGFyYW1zOiBRdWVyeVBhcmFtc1xuKTogUHJvbWlzZTx7IHJlY29yZHM/OiBEYXRhUmVjb3JkW10sIGZpZWxkcz86IHN0cmluZ1tdIH0+IHtcbiAgY29uc3QgcG9wdXBJbmZvID0gb3V0cHV0RFMuZ2V0UG9wdXBJbmZvKClcblxuICBjb25zdCBsYXllckRlZmluaXRpb24gPSBvdXRwdXREUy5nZXRMYXllckRlZmluaXRpb24oKVxuICBjb25zdCBnZXREZWZhdWx0RmllbGRJbmZvcyA9ICgpID0+XG4gICAgW1xuICAgICAgeyBmaWVsZE5hbWU6IGxheWVyRGVmaW5pdGlvbj8ub2JqZWN0SWRGaWVsZCA/PyAnb2JqZWN0aWQnLCBsYWJlbDogJ09CSkVDVElEJywgdG9vbHRpcDogJycsIHZpc2libGU6IHRydWUgfVxuICAgIF0gYXMgSUZpZWxkSW5mb1tdXG4gIGNvbnN0IGZpZWxkSW5mb3MgPSAoKGZpZWxkSW5mb3MpID0+IChmaWVsZEluZm9zLmxlbmd0aCA/IGZpZWxkSW5mb3MgOiBnZXREZWZhdWx0RmllbGRJbmZvcygpKSkoXG4gICAgKHBvcHVwSW5mbz8uZmllbGRJbmZvcyB8fCBbXSkuZmlsdGVyKChpKSA9PiBpLnZpc2libGUpXG4gIClcbiAgLy8gY29uc3QgZmllbGRzID0gb3V0cHV0RFMuZ2V0U2NoZW1hKCk/LmZpZWxkc1xuICAvLyBsZXQgc2VsZWN0ZWRGaWVsZE5hbWVzXG4gIC8vIGlmIChxdWVyeUl0ZW0ucmVzdWx0RmllbGRzVHlwZSA9PT0gRmllbGRzVHlwZS5TZWxlY3RBdHRyaWJ1dGVzKSB7XG4gIC8vICAgc2VsZWN0ZWRGaWVsZE5hbWVzID0gW10uY29uY2F0KHF1ZXJ5SXRlbS5yZXN1bHREaXNwbGF5RmllbGRzLCBxdWVyeUl0ZW0ucmVzdWx0VGl0bGVGaWVsZHMpXG4gIC8vIH0gZWxzZSB7XG4gIC8vICAgc2VsZWN0ZWRGaWVsZE5hbWVzID0gZmllbGRJbmZvcy5tYXAoKGZpZWxkSW5mbykgPT4gZmllbGRJbmZvLmZpZWxkTmFtZSlcbiAgLy8gfVxuICAvLyBjb25zdCBzZWxlY3RlZEZpZWxkSmltdU5hbWVzID0gZmllbGRzXG4gIC8vICAgPyBPYmplY3Qua2V5cyhmaWVsZHMpLmZpbHRlcigoamltdU5hbWUpID0+IHNlbGVjdGVkRmllbGROYW1lcy5pbmNsdWRlcyhmaWVsZHNbamltdU5hbWVdLm5hbWUpKVxuICAvLyAgIDogW11cbiAgLy8gb3V0cHV0RFMuc2V0U2VsZWN0ZWRGaWVsZHMoc2VsZWN0ZWRGaWVsZEppbXVOYW1lcylcbiAgY29uc3Qgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KClcbiAgbGV0IHJlY29yZHMgPSBhd2FpdCBvdXRwdXREUy5sb2FkKHF1ZXJ5UGFyYW1zLCB7IHdpZGdldElkIH0pXG4gIGNvbnN0IGZldGNoVGltZSA9IHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnRUaW1lXG4gIFxuICBpZiAocmVjb3JkcyA9PSBudWxsKSB7XG4gICAgcmVjb3JkcyA9IFtdXG4gIH1cbiAgY29uc3Qgb3JpZ2luRHM6IEZlYXR1cmVMYXllckRhdGFTb3VyY2UgPSBvdXRwdXREUy5nZXRPcmlnaW5EYXRhU291cmNlcygpWzBdIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgXG4gIGNvbnN0IGxheWVyU3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KClcbiAgY29uc3QgbGF5ZXJPYmplY3QgPSBhd2FpdCBnZXRMYXllck9iamVjdChvcmlnaW5EcylcbiAgY29uc3QgbGF5ZXJUaW1lID0gcGVyZm9ybWFuY2Uubm93KCkgLSBsYXllclN0YXJ0VGltZVxuXG4gIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICBldmVudDogJ3F1ZXJ5LWNvbXBsZXRlJyxcbiAgICBmZXRjaFRpbWU6IE1hdGgucm91bmQoZmV0Y2hUaW1lKSxcbiAgICBsYXllclRpbWU6IE1hdGgucm91bmQobGF5ZXJUaW1lKSxcbiAgICB0b3RhbFRpbWU6IE1hdGgucm91bmQocGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydFRpbWUpLFxuICAgIHJlY29yZENvdW50OiByZWNvcmRzLmxlbmd0aFxuICB9KVxuICBcbiAgcmVjb3Jkcy5mb3JFYWNoKChyZWNvcmQpID0+IHtcbiAgICBjb25zdCBmZWF0dXJlID0gKHJlY29yZCBhcyBhbnkpLmZlYXR1cmVcbiAgICBpZiAobGF5ZXJPYmplY3QpIHtcbiAgICAgIGZlYXR1cmUuc291cmNlTGF5ZXIgPSAobGF5ZXJPYmplY3QgYXMgYW55KS5hc3NvY2lhdGVkTGF5ZXIgfHwgbGF5ZXJPYmplY3RcbiAgICB9XG4gICAgZmVhdHVyZS5sYXllciA9IGZlYXR1cmUuc291cmNlTGF5ZXJcbiAgfSlcbiAgY29uc3QgcXVlcnlSZXN1bHQgPSB7XG4gICAgcmVjb3JkcyxcbiAgICBmaWVsZHM6IGZpZWxkSW5mb3MubWFwKChmaWVsZEluZm8pID0+IGZpZWxkSW5mby5maWVsZE5hbWUpXG4gIH1cblxuICAvLyBwdWJsaXNoIG1lc3NhZ2VcbiAgY29uc3QgZGF0YVJlY29yZFNldENoYW5nZU1lc3NhZ2UgPSBuZXcgRGF0YVJlY29yZFNldENoYW5nZU1lc3NhZ2Uod2lkZ2V0SWQsIFJlY29yZFNldENoYW5nZVR5cGUuQ3JlYXRlVXBkYXRlLCBbe1xuICAgIHJlY29yZHM6IG91dHB1dERTLmdldEFsbExvYWRlZFJlY29yZHMoKSxcbiAgICBmaWVsZHM6IHF1ZXJ5UmVzdWx0LmZpZWxkcyxcbiAgICBkYXRhU291cmNlOiBvdXRwdXREUyxcbiAgICBuYW1lOiBvdXRwdXREUy5pZCxcbiAgICBsYWJlbDogb3V0cHV0RFMuZ2V0TGFiZWwoKVxuICB9XSlcbiAgTWVzc2FnZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5wdWJsaXNoTWVzc2FnZShkYXRhUmVjb3JkU2V0Q2hhbmdlTWVzc2FnZSlcblxuICByZXR1cm4gcXVlcnlSZXN1bHRcbn1cblxuYXN5bmMgZnVuY3Rpb24gZ2V0TGF5ZXJPYmplY3QgKGRhdGFTb3VyY2U6IEZlYXR1cmVMYXllckRhdGFTb3VyY2UpIHtcbiAgY29uc3QgbGF5ZXJPYmplY3QgPSBhd2FpdCBkYXRhU291cmNlLmNyZWF0ZUpTQVBJTGF5ZXJCeURhdGFTb3VyY2UoKSBhcyBfX2VzcmkuTGF5ZXJcbiAgLy8gbGF5ZXJPYmplY3QgbWF5IGJlIHVuZGVmaW5lZCBpZiB0aGUgZGF0YSBzb3VyY2UgaXMgYWRkZWQgYnkgVVJMXG4gIGlmIChsYXllck9iamVjdCkge1xuICAgIGF3YWl0IGxheWVyT2JqZWN0LmxvYWQoKVxuICB9XG4gIHJldHVybiBsYXllck9iamVjdFxufVxuXG5cbiIsIi8qKlxuICogVXRpbGl0eSBmdW5jdGlvbnMgZm9yIG1hbmFnaW5nIHJlc3VsdHMgYWNjdW11bGF0aW9uIGluIFF1ZXJ5U2ltcGxlIHdpZGdldC5cbiAqIEhhbmRsZXMgXCJBZGQgdG9cIiBhbmQgXCJSZW1vdmUgZnJvbVwiIG1vZGVzIGZvciBhY2N1bXVsYXRpbmcgcXVlcnkgcmVzdWx0cy5cbiAqL1xuXG5pbXBvcnQgdHlwZSB7IEZlYXR1cmVMYXllckRhdGFTb3VyY2UsIEZlYXR1cmVEYXRhUmVjb3JkLCBEYXRhUmVjb3JkIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgRGF0YVNvdXJjZU1hbmFnZXIsIERhdGFTb3VyY2VTdGF0dXMsIE1lc3NhZ2VNYW5hZ2VyLCBEYXRhUmVjb3JkU2V0Q2hhbmdlTWVzc2FnZSwgUmVjb3JkU2V0Q2hhbmdlVHlwZSwgRGF0YVJlY29yZHNTZWxlY3Rpb25DaGFuZ2VNZXNzYWdlIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlciB9IGZyb20gJ3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uJ1xuaW1wb3J0IHsgcmVtb3ZlSGlnaGxpZ2h0R3JhcGhpY3MgfSBmcm9tICcuL2dyYXBoaWNzLWxheWVyLXV0aWxzJ1xuXG5jb25zdCBkZWJ1Z0xvZ2dlciA9IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIoKVxuXG4vKipcbiAqIEdlbmVyYXRlcyBhIGNvbXBvc2l0ZSBrZXkgZm9yIGEgcmVjb3JkIHRoYXQgaW5jbHVkZXMgYm90aCBvcmlnaW4gZGF0YSBzb3VyY2UgSUQgYW5kIG9iamVjdElkLlxuICogVGhpcyBlbnN1cmVzIHVuaXF1ZW5lc3MgYWNyb3NzIGRpZmZlcmVudCBsYXllcnMgdGhhdCBtYXkgaGF2ZSB0aGUgc2FtZSBvYmplY3RJZC5cbiAqIFxuICogQHBhcmFtIHJlY29yZCAtIFRoZSBmZWF0dXJlIGRhdGEgcmVjb3JkXG4gKiBAcGFyYW0gb3V0cHV0RFMgLSBUaGUgb3V0cHV0IGRhdGEgc291cmNlIGNvbnRhaW5pbmcgdGhlIHJlY29yZFxuICogQHJldHVybnMgQ29tcG9zaXRlIGtleSBzdHJpbmc6IGAke29yaWdpbkRTSWR9XyR7b2JqZWN0SWR9YFxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0UmVjb3JkS2V5KFxuICByZWNvcmQ6IEZlYXR1cmVEYXRhUmVjb3JkLFxuICBvdXRwdXREUzogRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuKTogc3RyaW5nIHtcbiAgY29uc3Qgb3JpZ2luRFMgPSBvdXRwdXREUy5nZXRPcmlnaW5EYXRhU291cmNlcygpPy5bMF0gYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICBjb25zdCBvcmlnaW5EU0lkID0gb3JpZ2luRFM/LmlkIHx8IG91dHB1dERTLmlkIC8vIEZhbGxiYWNrIHRvIG91dHB1dERTIGlmIG5vIG9yaWdpblxuICBjb25zdCBvYmplY3RJZCA9IHJlY29yZC5nZXRJZCgpXG4gIGNvbnN0IGtleSA9IGAke29yaWdpbkRTSWR9XyR7b2JqZWN0SWR9YFxuICBcbiAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgZXZlbnQ6ICdyZWNvcmQta2V5LWdlbmVyYXRlZCcsXG4gICAgb3JpZ2luRFNJZCxcbiAgICBvYmplY3RJZCxcbiAgICBrZXksXG4gICAgaGFzT3JpZ2luRFM6ICEhb3JpZ2luRFNcbiAgfSlcbiAgXG4gIHJldHVybiBrZXlcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGFuIGFjY3VtdWxhdGVkIHJlc3VsdHMgZGF0YSBzb3VyY2UgZm9yIHN0b3JpbmcgbWVyZ2VkIHF1ZXJ5IHJlc3VsdHMuXG4gKiBUaGlzIGRhdGEgc291cmNlIGlzIHdpZGdldC1sZXZlbCBhbmQgcGVyc2lzdHMgYWNyb3NzIG11bHRpcGxlIHF1ZXJpZXMuXG4gKiBcbiAqIEBwYXJhbSB3aWRnZXRJZCAtIFRoZSB3aWRnZXQgSURcbiAqIEBwYXJhbSBvcmlnaW5EUyAtIFRoZSBvcmlnaW4gZGF0YSBzb3VyY2UgdG8gdXNlIGFzIHRoZSBiYXNlXG4gKiBAcmV0dXJucyBUaGUgY3JlYXRlZCBhY2N1bXVsYXRlZCByZXN1bHRzIGRhdGEgc291cmNlXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVBY2N1bXVsYXRlZFJlc3VsdHNEYXRhU291cmNlKFxuICB3aWRnZXRJZDogc3RyaW5nLFxuICBvcmlnaW5EUzogRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuKTogUHJvbWlzZTxGZWF0dXJlTGF5ZXJEYXRhU291cmNlPiB7XG4gIGNvbnN0IGFjY3VtdWxhdGVkRFNJZCA9IGAke3dpZGdldElkfV9hY2N1bXVsYXRlZF9yZXN1bHRzYFxuICBcbiAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgZXZlbnQ6ICdjcmVhdGluZy1hY2N1bXVsYXRlZC1kcycsXG4gICAgd2lkZ2V0SWQsXG4gICAgYWNjdW11bGF0ZWREU0lkLFxuICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkXG4gIH0pXG4gIFxuICAvLyBDaGVjayBpZiBkYXRhIHNvdXJjZSBhbHJlYWR5IGV4aXN0c1xuICBjb25zdCBkc01hbmFnZXIgPSBEYXRhU291cmNlTWFuYWdlci5nZXRJbnN0YW5jZSgpXG4gIGxldCBhY2N1bXVsYXRlZERTID0gZHNNYW5hZ2VyLmdldERhdGFTb3VyY2UoYWNjdW11bGF0ZWREU0lkKSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gIFxuICBpZiAoYWNjdW11bGF0ZWREUykge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgZXZlbnQ6ICdhY2N1bXVsYXRlZC1kcy1hbHJlYWR5LWV4aXN0cycsXG4gICAgICBhY2N1bXVsYXRlZERTSWRcbiAgICB9KVxuICAgIHJldHVybiBhY2N1bXVsYXRlZERTXG4gIH1cbiAgXG4gIC8vIEdldCBvcmlnaW4gZGF0YSBzb3VyY2UgSlNPTiB0byBjcmVhdGUgb3V0cHV0IGRhdGEgc291cmNlXG4gIGNvbnN0IG9yaWdpbkRhdGFTb3VyY2VKc29uID0gb3JpZ2luRFMuZ2V0RGF0YVNvdXJjZUpzb24oKVxuICBcbiAgLy8gQ3JlYXRlIG91dHB1dCBkYXRhIHNvdXJjZSBKU09OIHNpbWlsYXIgdG8gaG93IHF1ZXJ5IGl0ZW1zIGNyZWF0ZSBvdXRwdXQgRFNcbiAgY29uc3Qgb3V0cHV0RGF0YVNvdXJjZUpzb24gPSB7XG4gICAgaWQ6IGFjY3VtdWxhdGVkRFNJZCxcbiAgICBsYWJlbDogJ0FjY3VtdWxhdGVkIFJlc3VsdHMnLFxuICAgIHR5cGU6IG9yaWdpbkRhdGFTb3VyY2VKc29uPy50eXBlLFxuICAgIGdlb21ldHJ5VHlwZTogb3JpZ2luRGF0YVNvdXJjZUpzb24/Lmdlb21ldHJ5VHlwZSxcbiAgICB1cmw6IG9yaWdpbkRhdGFTb3VyY2VKc29uPy51cmwsXG4gICAgaXRlbUlkOiBvcmlnaW5EYXRhU291cmNlSnNvbj8uaXRlbUlkLFxuICAgIHBvcnRhbFVybDogb3JpZ2luRGF0YVNvdXJjZUpzb24/LnBvcnRhbFVybCxcbiAgICBvcmlnaW5EYXRhU291cmNlczogW3tcbiAgICAgIGRhdGFTb3VyY2VJZDogb3JpZ2luRFMuaWQsXG4gICAgICBtYWluRGF0YVNvdXJjZUlkOiBvcmlnaW5EUy5pZCxcbiAgICAgIHJvb3REYXRhU291cmNlSWQ6IG9yaWdpbkRTLmlkXG4gICAgfV0sXG4gICAgbGF5ZXJJZDogb3JpZ2luRGF0YVNvdXJjZUpzb24/LmxheWVySWQsXG4gICAgaXNEYXRhSW5EYXRhU291cmNlSW5zdGFuY2U6IG9yaWdpbkRhdGFTb3VyY2VKc29uPy5pc0RhdGFJbkRhdGFTb3VyY2VJbnN0YW5jZSxcbiAgICBpc091dHB1dEZyb21XaWRnZXQ6IHRydWVcbiAgfVxuICBcbiAgLy8gQ3JlYXRlIHRoZSBkYXRhIHNvdXJjZSB1c2luZyBEYXRhU291cmNlTWFuYWdlclxuICAvLyBOb3RlOiBUaGlzIGZvbGxvd3MgdGhlIHBhdHRlcm4gZnJvbSBzZXR0aW5nLnRzeCBmb3IgY3JlYXRpbmcgb3V0cHV0IGRhdGEgc291cmNlc1xuICBhY2N1bXVsYXRlZERTID0gZHNNYW5hZ2VyLmNyZWF0ZURhdGFTb3VyY2VCeURhdGFTb3VyY2VKc29uKG91dHB1dERhdGFTb3VyY2VKc29uKSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gIFxuICAvLyBTZXQgaW5pdGlhbCBzdGF0dXNcbiAgYWNjdW11bGF0ZWREUy5zZXRTdGF0dXMoRGF0YVNvdXJjZVN0YXR1cy5Ob3RSZWFkeSlcbiAgYWNjdW11bGF0ZWREUy5zZXRDb3VudFN0YXR1cyhEYXRhU291cmNlU3RhdHVzLk5vdFJlYWR5KVxuICBcbiAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgZXZlbnQ6ICdhY2N1bXVsYXRlZC1kcy1jcmVhdGVkJyxcbiAgICBhY2N1bXVsYXRlZERTSWQsXG4gICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgc3RhdHVzOiBhY2N1bXVsYXRlZERTLmdldFN0YXR1cygpXG4gIH0pXG4gIFxuICByZXR1cm4gYWNjdW11bGF0ZWREU1xufVxuXG4vKipcbiAqIE1lcmdlcyBuZXcgcXVlcnkgcmVzdWx0cyB3aXRoIGV4aXN0aW5nIHJlY29yZHMuXG4gKiBEZWR1cGxpY2F0ZXMgcmVjb3JkcyB1c2luZyBjb21wb3NpdGUga2V5cyAob3JpZ2luRFNJZF9vYmplY3RJZCkuXG4gKiBcbiAqIFRoaXMgZnVuY3Rpb24gbWVyZ2VzIG5ldyByZWNvcmRzIHdpdGggZXhpc3RpbmcgcmVjb3JkcyB0aGF0IHdlcmUgY2FwdHVyZWRcbiAqIGJlZm9yZSB0aGUgcXVlcnkgZXhlY3V0ZWQuIFRoZSBjYWxsZXIgaXMgcmVzcG9uc2libGUgZm9yIHN0b3JpbmcgdGhlIG1lcmdlZFxuICogcmVjb3JkcyAodHlwaWNhbGx5IGluIHJlY29yZHNSZWYgb3Igc3RhdGUpLlxuICogXG4gKiBAcGFyYW0gb3V0cHV0RFMgLSBUaGUgb3V0cHV0IGRhdGEgc291cmNlICh1c2VkIGZvciBrZXkgZ2VuZXJhdGlvbilcbiAqIEBwYXJhbSBuZXdSZWNvcmRzIC0gTmV3IHJlY29yZHMgdG8gbWVyZ2UgaW5cbiAqIEBwYXJhbSBleGlzdGluZ1JlY29yZHMgLSBFeGlzdGluZyByZWNvcmRzIGNhcHR1cmVkIGJlZm9yZSBxdWVyeSBleGVjdXRpb24gKG9wdGlvbmFsLCBkZWZhdWx0cyB0byBlbXB0eSBhcnJheSlcbiAqIEByZXR1cm5zIEFycmF5IG9mIGFsbCBtZXJnZWQgcmVjb3JkcyAoZXhpc3RpbmcgKyBuZXcgdW5pcXVlIHJlY29yZHMpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtZXJnZVJlc3VsdHNJbnRvQWNjdW11bGF0ZWQoXG4gIG91dHB1dERTOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLFxuICBuZXdSZWNvcmRzOiBGZWF0dXJlRGF0YVJlY29yZFtdLFxuICBleGlzdGluZ1JlY29yZHM6IEZlYXR1cmVEYXRhUmVjb3JkW10gPSBbXVxuKTogRmVhdHVyZURhdGFSZWNvcmRbXSB7XG4gIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgIGV2ZW50OiAnbWVyZ2luZy1yZXN1bHRzLXN0YXJ0JyxcbiAgICBvdXRwdXREU0lkOiBvdXRwdXREUy5pZCxcbiAgICBleGlzdGluZ1JlY29yZHNDb3VudDogZXhpc3RpbmdSZWNvcmRzLmxlbmd0aCxcbiAgICBuZXdSZWNvcmRzQ291bnQ6IG5ld1JlY29yZHMubGVuZ3RoXG4gIH0pXG4gIFxuICAvLyBCdWlsZCBTZXQgb2YgZXhpc3RpbmcgcmVjb3JkIGtleXMgZm9yIGZhc3QgbG9va3VwXG4gIGNvbnN0IGV4aXN0aW5nS2V5cyA9IG5ldyBTZXQoXG4gICAgZXhpc3RpbmdSZWNvcmRzLm1hcChyZWNvcmQgPT4gZ2V0UmVjb3JkS2V5KHJlY29yZCwgb3V0cHV0RFMpKVxuICApXG4gIFxuICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICBldmVudDogJ2V4aXN0aW5nLXJlY29yZHMtY2hlY2snLFxuICAgIGV4aXN0aW5nUmVjb3Jkc0NvdW50OiBleGlzdGluZ1JlY29yZHMubGVuZ3RoLFxuICAgIGV4aXN0aW5nS2V5c0NvdW50OiBleGlzdGluZ0tleXMuc2l6ZVxuICB9KVxuICBcbiAgLy8gRmlsdGVyIG5ldyByZWNvcmRzIHRvIG9ubHkgaW5jbHVkZSB0aG9zZSBub3QgYWxyZWFkeSBpbiBvdXRwdXQgRFNcbiAgY29uc3QgdW5pcXVlTmV3UmVjb3JkcyA9IG5ld1JlY29yZHMuZmlsdGVyKHJlY29yZCA9PiB7XG4gICAgY29uc3Qga2V5ID0gZ2V0UmVjb3JkS2V5KHJlY29yZCwgb3V0cHV0RFMpXG4gICAgY29uc3QgaXNEdXBsaWNhdGUgPSBleGlzdGluZ0tleXMuaGFzKGtleSlcbiAgICBcbiAgICBpZiAoaXNEdXBsaWNhdGUpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ2R1cGxpY2F0ZS1yZWNvcmQtc2tpcHBlZCcsXG4gICAgICAgIGtleSxcbiAgICAgICAgb2JqZWN0SWQ6IHJlY29yZC5nZXRJZCgpXG4gICAgICB9KVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gIWlzRHVwbGljYXRlXG4gIH0pXG4gIFxuICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICBldmVudDogJ2RlZHVwbGljYXRpb24tY29tcGxldGUnLFxuICAgIG5ld1JlY29yZHNDb3VudDogbmV3UmVjb3Jkcy5sZW5ndGgsXG4gICAgdW5pcXVlTmV3UmVjb3Jkc0NvdW50OiB1bmlxdWVOZXdSZWNvcmRzLmxlbmd0aCxcbiAgICBkdXBsaWNhdGVzU2tpcHBlZDogbmV3UmVjb3Jkcy5sZW5ndGggLSB1bmlxdWVOZXdSZWNvcmRzLmxlbmd0aFxuICB9KVxuICBcbiAgLy8gTWVyZ2UgcmVjb3Jkc1xuICBjb25zdCBtZXJnZWRSZWNvcmRzID0gWy4uLmV4aXN0aW5nUmVjb3JkcywgLi4udW5pcXVlTmV3UmVjb3Jkc11cbiAgXG4gIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgIGV2ZW50OiAnbWVyZ2UtY29tcGxldGUnLFxuICAgIHRvdGFsUmVjb3Jkc0FmdGVyTWVyZ2U6IG1lcmdlZFJlY29yZHMubGVuZ3RoLFxuICAgIGV4aXN0aW5nQ291bnQ6IGV4aXN0aW5nUmVjb3Jkcy5sZW5ndGgsXG4gICAgbmV3VW5pcXVlQ291bnQ6IHVuaXF1ZU5ld1JlY29yZHMubGVuZ3RoXG4gIH0pXG4gIFxuICByZXR1cm4gbWVyZ2VkUmVjb3Jkc1xufVxuXG4vKipcbiAqIFJlbW92ZXMgbWF0Y2hpbmcgcmVjb3JkcyBmcm9tIHdpZGdldC1sZXZlbCBhY2N1bXVsYXRlZCByZWNvcmRzLlxuICogTWF0Y2hlcyByZWNvcmRzIHVzaW5nIGNvbXBvc2l0ZSBrZXlzIChvcmlnaW5EU0lkX29iamVjdElkKS5cbiAqIFxuICogVGhpcyBmdW5jdGlvbiByZW1vdmVzIHJlY29yZHMgZnJvbSBleGlzdGluZyBhY2N1bXVsYXRlZCByZWNvcmRzIHRoYXQgd2VyZSBjYXB0dXJlZFxuICogYmVmb3JlIHRoZSBxdWVyeSBleGVjdXRlZC4gVGhlIGNhbGxlciBpcyByZXNwb25zaWJsZSBmb3Igc3RvcmluZyB0aGUgcmVtYWluaW5nXG4gKiByZWNvcmRzICh0eXBpY2FsbHkgaW4gcmVjb3Jkc1JlZiBvciBzdGF0ZSkuXG4gKiBcbiAqIEBwYXJhbSBvdXRwdXREUyAtIFRoZSBvdXRwdXQgZGF0YSBzb3VyY2UgKHVzZWQgZm9yIGtleSBnZW5lcmF0aW9uKVxuICogQHBhcmFtIHJlY29yZHNUb1JlbW92ZSAtIFJlY29yZHMgdG8gcmVtb3ZlIChmcm9tIHF1ZXJ5IHJlc3VsdHMpXG4gKiBAcGFyYW0gZXhpc3RpbmdBY2N1bXVsYXRlZFJlY29yZHMgLSBFeGlzdGluZyBhY2N1bXVsYXRlZCByZWNvcmRzIGNhcHR1cmVkIGJlZm9yZSBxdWVyeSBleGVjdXRpb24gKG9wdGlvbmFsLCBkZWZhdWx0cyB0byBlbXB0eSBhcnJheSlcbiAqIEByZXR1cm5zIEFycmF5IG9mIHJlbWFpbmluZyByZWNvcmRzIGFmdGVyIHJlbW92YWxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZVJlc3VsdHNGcm9tQWNjdW11bGF0ZWQoXG4gIG91dHB1dERTOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLFxuICByZWNvcmRzVG9SZW1vdmU6IEZlYXR1cmVEYXRhUmVjb3JkW10sXG4gIGV4aXN0aW5nQWNjdW11bGF0ZWRSZWNvcmRzOiBGZWF0dXJlRGF0YVJlY29yZFtdID0gW11cbik6IEZlYXR1cmVEYXRhUmVjb3JkW10ge1xuICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICBldmVudDogJ3JlbW92aW5nLXJlc3VsdHMtc3RhcnQnLFxuICAgIG91dHB1dERTSWQ6IG91dHB1dERTLmlkLFxuICAgIHJlY29yZHNUb1JlbW92ZUNvdW50OiByZWNvcmRzVG9SZW1vdmUubGVuZ3RoLFxuICAgIGV4aXN0aW5nQWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGV4aXN0aW5nQWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aFxuICB9KVxuICBcbiAgLy8gSWYgbm8gYWNjdW11bGF0ZWQgcmVjb3Jkcywgbm90aGluZyB0byByZW1vdmVcbiAgaWYgKGV4aXN0aW5nQWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA9PT0gMCkge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgZXZlbnQ6ICduby1hY2N1bXVsYXRlZC1yZWNvcmRzLXRvLXJlbW92ZScsXG4gICAgICBvdXRwdXREU0lkOiBvdXRwdXREUy5pZFxuICAgIH0pXG4gICAgcmV0dXJuIFtdXG4gIH1cbiAgXG4gIC8vIElmIG5vIHJlY29yZHMgdG8gcmVtb3ZlLCByZXR1cm4gZXhpc3RpbmcgcmVjb3JkcyB1bmNoYW5nZWRcbiAgaWYgKHJlY29yZHNUb1JlbW92ZS5sZW5ndGggPT09IDApIHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgIGV2ZW50OiAnbm8tcmVjb3Jkcy10by1yZW1vdmUnLFxuICAgICAgb3V0cHV0RFNJZDogb3V0cHV0RFMuaWQsXG4gICAgICBleGlzdGluZ0FjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiBleGlzdGluZ0FjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGhcbiAgICB9KVxuICAgIHJldHVybiBleGlzdGluZ0FjY3VtdWxhdGVkUmVjb3Jkc1xuICB9XG4gIFxuICAvLyBCdWlsZCBTZXQgb2Yga2V5cyB0byByZW1vdmUgZm9yIGZhc3QgbG9va3VwXG4gIGNvbnN0IHJlbW92ZUtleXMgPSBuZXcgU2V0KFxuICAgIHJlY29yZHNUb1JlbW92ZS5tYXAocmVjb3JkID0+IGdldFJlY29yZEtleShyZWNvcmQsIG91dHB1dERTKSlcbiAgKVxuICBcbiAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgZXZlbnQ6ICdyZW1vdmUta2V5cy1idWlsdCcsXG4gICAgZXhpc3RpbmdBY2N1bXVsYXRlZFJlY29yZHNDb3VudDogZXhpc3RpbmdBY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoLFxuICAgIHJlbW92ZUtleXNDb3VudDogcmVtb3ZlS2V5cy5zaXplXG4gIH0pXG4gIFxuICAvLyBGaWx0ZXIgb3V0IHJlY29yZHMgdGhhdCBtYXRjaCBrZXlzIHRvIHJlbW92ZVxuICBjb25zdCByZW1haW5pbmdSZWNvcmRzOiBGZWF0dXJlRGF0YVJlY29yZFtdID0gW11cbiAgY29uc3QgcmVtb3ZlZFJlY29yZHM6IEZlYXR1cmVEYXRhUmVjb3JkW10gPSBbXVxuICBcbiAgZXhpc3RpbmdBY2N1bXVsYXRlZFJlY29yZHMuZm9yRWFjaChyZWNvcmQgPT4ge1xuICAgIGNvbnN0IGtleSA9IGdldFJlY29yZEtleShyZWNvcmQsIG91dHB1dERTKVxuICAgIGNvbnN0IHNob3VsZFJlbW92ZSA9IHJlbW92ZUtleXMuaGFzKGtleSlcbiAgICBcbiAgICBpZiAoc2hvdWxkUmVtb3ZlKSB7XG4gICAgICByZW1vdmVkUmVjb3Jkcy5wdXNoKHJlY29yZClcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ3JlY29yZC1tYXJrZWQtZm9yLXJlbW92YWwnLFxuICAgICAgICBrZXksXG4gICAgICAgIG9iamVjdElkOiByZWNvcmQuZ2V0SWQoKSxcbiAgICAgICAgb3JpZ2luRFNJZDogKHJlY29yZC5nZXREYXRhU291cmNlPy4oKSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlKT8uZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKT8uWzBdPy5pZCB8fCAndW5rbm93bidcbiAgICAgIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIHJlbWFpbmluZ1JlY29yZHMucHVzaChyZWNvcmQpXG4gICAgfVxuICB9KVxuICBcbiAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgZXZlbnQ6ICdyZW1vdmFsLWNvbXBsZXRlJyxcbiAgICByZWNvcmRzUmVtb3ZlZDogcmVtb3ZlZFJlY29yZHMubGVuZ3RoLFxuICAgIHJlbWFpbmluZ1JlY29yZHNDb3VudDogcmVtYWluaW5nUmVjb3Jkcy5sZW5ndGgsXG4gICAgcmVjb3Jkc1RvUmVtb3ZlQ291bnQ6IHJlY29yZHNUb1JlbW92ZS5sZW5ndGgsXG4gICAgbWF0Y2hlZFJlY29yZHNDb3VudDogcmVtb3ZlZFJlY29yZHMubGVuZ3RoLFxuICAgIHVubWF0Y2hlZFJlY29yZHNDb3VudDogcmVjb3Jkc1RvUmVtb3ZlLmxlbmd0aCAtIHJlbW92ZWRSZWNvcmRzLmxlbmd0aFxuICB9KVxuICBcbiAgcmV0dXJuIHJlbWFpbmluZ1JlY29yZHNcbn1cblxuLyoqXG4gKiBSZW1vdmVzIHJlY29yZHMgZnJvbSBvcmlnaW4gZGF0YSBzb3VyY2Ugc2VsZWN0aW9ucy5cbiAqIEdyb3VwcyByZWNvcmRzIGJ5IHRoZWlyIG9yaWdpbiBkYXRhIHNvdXJjZSBhbmQgdXBkYXRlcyBlYWNoIG9yaWdpbiBEUydzIHNlbGVjdGlvbiBzZXBhcmF0ZWx5LlxuICogVGhpcyBlbnN1cmVzIG1hcCBzZWxlY3Rpb24gaXMgdXBkYXRlZCBjb3JyZWN0bHkgd2hlbiByZWNvcmRzIGNvbWUgZnJvbSBtdWx0aXBsZSBvcmlnaW4gbGF5ZXJzLlxuICogQWxzbyByZW1vdmVzIGdyYXBoaWNzIGZyb20gZ3JhcGhpY3MgbGF5ZXIgaWYgdXNpbmcgZ3JhcGhpY3MgbGF5ZXIgaGlnaGxpZ2h0aW5nLlxuICogXG4gKiBAcGFyYW0gd2lkZ2V0SWQgLSBUaGUgd2lkZ2V0IElEIGZvciBwdWJsaXNoaW5nIG1lc3NhZ2VzXG4gKiBAcGFyYW0gcmVjb3Jkc1RvUmVtb3ZlIC0gUmVjb3JkcyB0byByZW1vdmUgZnJvbSBzZWxlY3Rpb25cbiAqIEBwYXJhbSBvdXRwdXREUyAtIFRoZSBvdXRwdXQgZGF0YSBzb3VyY2UgKHVzZWQgZm9yIGtleSBnZW5lcmF0aW9uKVxuICogQHBhcmFtIHVzZUdyYXBoaWNzTGF5ZXIgLSBXaGV0aGVyIHRvIHJlbW92ZSBncmFwaGljcyBmcm9tIGdyYXBoaWNzIGxheWVyIChkZWZhdWx0OiBmYWxzZSlcbiAqIEBwYXJhbSBncmFwaGljc0xheWVyIC0gR3JhcGhpY3MgbGF5ZXIgaW5zdGFuY2UgKHJlcXVpcmVkIGlmIHVzZUdyYXBoaWNzTGF5ZXIgaXMgdHJ1ZSlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZVJlY29yZHNGcm9tT3JpZ2luU2VsZWN0aW9ucyhcbiAgd2lkZ2V0SWQ6IHN0cmluZyxcbiAgcmVjb3Jkc1RvUmVtb3ZlOiBGZWF0dXJlRGF0YVJlY29yZFtdLFxuICBvdXRwdXREUzogRmVhdHVyZUxheWVyRGF0YVNvdXJjZSxcbiAgdXNlR3JhcGhpY3NMYXllcj86IGJvb2xlYW4sXG4gIGdyYXBoaWNzTGF5ZXI/OiBfX2VzcmkuR3JhcGhpY3NMYXllclxuKTogdm9pZCB7XG4gIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgIGV2ZW50OiAncmVtb3ZpbmctcmVjb3Jkcy1mcm9tLW9yaWdpbi1zZWxlY3Rpb25zLXN0YXJ0JyxcbiAgICB3aWRnZXRJZCxcbiAgICByZWNvcmRzVG9SZW1vdmVDb3VudDogcmVjb3Jkc1RvUmVtb3ZlLmxlbmd0aCxcbiAgICBvdXRwdXREU0lkOiBvdXRwdXREUy5pZCxcbiAgICB1c2VHcmFwaGljc0xheWVyOiAhIXVzZUdyYXBoaWNzTGF5ZXIsXG4gICAgaGFzR3JhcGhpY3NMYXllcjogISFncmFwaGljc0xheWVyXG4gIH0pXG4gIFxuICBpZiAocmVjb3Jkc1RvUmVtb3ZlLmxlbmd0aCA9PT0gMCkge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgZXZlbnQ6ICduby1yZWNvcmRzLXRvLXJlbW92ZS1mcm9tLXNlbGVjdGlvbicsXG4gICAgICB3aWRnZXRJZFxuICAgIH0pXG4gICAgcmV0dXJuXG4gIH1cbiAgXG4gIC8vIFJlbW92ZSBmcm9tIGdyYXBoaWNzIGxheWVyIGlmIHVzaW5nIGdyYXBoaWNzIGxheWVyIGhpZ2hsaWdodGluZ1xuICBpZiAodXNlR3JhcGhpY3NMYXllciAmJiBncmFwaGljc0xheWVyKSB7XG4gICAgY29uc3QgcmVjb3JkSWRzVG9SZW1vdmUgPSByZWNvcmRzVG9SZW1vdmUubWFwKHJlY29yZCA9PiByZWNvcmQuZ2V0SWQoKSlcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgIGV2ZW50OiAncmVtb3ZpbmctZ3JhcGhpY3MtZnJvbS1sYXllcicsXG4gICAgICB3aWRnZXRJZCxcbiAgICAgIHJlY29yZElkc0NvdW50OiByZWNvcmRJZHNUb1JlbW92ZS5sZW5ndGgsXG4gICAgICBncmFwaGljc0xheWVySWQ6IGdyYXBoaWNzTGF5ZXIuaWRcbiAgICB9KVxuICAgIHJlbW92ZUhpZ2hsaWdodEdyYXBoaWNzKGdyYXBoaWNzTGF5ZXIsIHJlY29yZElkc1RvUmVtb3ZlKVxuICB9XG4gIFxuICAvLyBHcm91cCByZWNvcmRzIGJ5IHRoZWlyIG9yaWdpbiBkYXRhIHNvdXJjZVxuICBjb25zdCByZWNvcmRzQnlPcmlnaW5EUyA9IG5ldyBNYXA8RmVhdHVyZUxheWVyRGF0YVNvdXJjZSwgRmVhdHVyZURhdGFSZWNvcmRbXT4oKVxuICBcbiAgcmVjb3Jkc1RvUmVtb3ZlLmZvckVhY2gocmVjb3JkID0+IHtcbiAgICBjb25zdCByZWNvcmREUyA9IHJlY29yZC5nZXREYXRhU291cmNlPy4oKSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gICAgbGV0IG9yaWdpbkRTOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlIHwgbnVsbCA9IG51bGxcbiAgICBcbiAgICBpZiAocmVjb3JkRFMpIHtcbiAgICAgIG9yaWdpbkRTID0gcmVjb3JkRFMuZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKT8uWzBdIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2UgfHwgcmVjb3JkRFNcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gRmFsbGJhY2s6IHRyeSB0byBnZXQgb3JpZ2luIGZyb20gb3V0cHV0RFNcbiAgICAgIG9yaWdpbkRTID0gb3V0cHV0RFMuZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKT8uWzBdIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2UgfHwgbnVsbFxuICAgIH1cbiAgICBcbiAgICBpZiAob3JpZ2luRFMpIHtcbiAgICAgIGlmICghcmVjb3Jkc0J5T3JpZ2luRFMuaGFzKG9yaWdpbkRTKSkge1xuICAgICAgICByZWNvcmRzQnlPcmlnaW5EUy5zZXQob3JpZ2luRFMsIFtdKVxuICAgICAgfVxuICAgICAgcmVjb3Jkc0J5T3JpZ2luRFMuZ2V0KG9yaWdpbkRTKSEucHVzaChyZWNvcmQpXG4gICAgfVxuICB9KVxuICBcbiAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgZXZlbnQ6ICdyZWNvcmRzLWdyb3VwZWQtYnktb3JpZ2luJyxcbiAgICB3aWRnZXRJZCxcbiAgICBvcmlnaW5EU0NvdW50OiByZWNvcmRzQnlPcmlnaW5EUy5zaXplLFxuICAgIHJlY29yZHNCeU9yaWdpbkRTOiBBcnJheS5mcm9tKHJlY29yZHNCeU9yaWdpbkRTLmVudHJpZXMoKSkubWFwKChbZHMsIHJlY29yZHNdKSA9PiAoe1xuICAgICAgb3JpZ2luRFNJZDogZHMuaWQsXG4gICAgICByZWNvcmRDb3VudDogcmVjb3Jkcy5sZW5ndGhcbiAgICB9KSlcbiAgfSlcbiAgXG4gIC8vIEZvciBlYWNoIG9yaWdpbiBEUywgZ2V0IGN1cnJlbnQgc2VsZWN0aW9uIGFuZCByZW1vdmUgbWF0Y2hpbmcgcmVjb3Jkc1xuICByZWNvcmRzQnlPcmlnaW5EUy5mb3JFYWNoKChyZWNvcmRzVG9SZW1vdmVGb3JPcmlnaW4sIG9yaWdpbkRTKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIEdldCBjdXJyZW50IHNlbGVjdGVkIHJlY29yZHMgZnJvbSB0aGlzIG9yaWdpbiBEU1xuICAgICAgY29uc3QgY3VycmVudFNlbGVjdGVkUmVjb3JkcyA9IG9yaWdpbkRTLmdldFNlbGVjdGVkUmVjb3JkcygpIHx8IFtdXG4gICAgICBjb25zdCBjdXJyZW50U2VsZWN0ZWRJZHMgPSBvcmlnaW5EUy5nZXRTZWxlY3RlZFJlY29yZElkcygpIHx8IFtdXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ3Byb2Nlc3Npbmctb3JpZ2luLWRzLXJlbW92YWwnLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgIGN1cnJlbnRTZWxlY3RlZENvdW50OiBjdXJyZW50U2VsZWN0ZWRSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgcmVjb3Jkc1RvUmVtb3ZlQ291bnQ6IHJlY29yZHNUb1JlbW92ZUZvck9yaWdpbi5sZW5ndGhcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIC8vIEJ1aWxkIFNldCBvZiBJRHMgdG8gcmVtb3ZlIGZvciBmYXN0IGxvb2t1cFxuICAgICAgY29uc3QgaWRzVG9SZW1vdmUgPSBuZXcgU2V0KFxuICAgICAgICByZWNvcmRzVG9SZW1vdmVGb3JPcmlnaW4ubWFwKHJlY29yZCA9PiByZWNvcmQuZ2V0SWQoKSlcbiAgICAgIClcbiAgICAgIFxuICAgICAgLy8gRmlsdGVyIG91dCByZWNvcmRzIHRoYXQgbWF0Y2ggSURzIHRvIHJlbW92ZVxuICAgICAgY29uc3QgcmVtYWluaW5nUmVjb3JkcyA9IGN1cnJlbnRTZWxlY3RlZFJlY29yZHMuZmlsdGVyKHJlY29yZCA9PiB7XG4gICAgICAgIGNvbnN0IHJlY29yZElkID0gcmVjb3JkLmdldElkKClcbiAgICAgICAgcmV0dXJuICFpZHNUb1JlbW92ZS5oYXMocmVjb3JkSWQpXG4gICAgICB9KVxuICAgICAgXG4gICAgICBjb25zdCByZW1haW5pbmdJZHMgPSByZW1haW5pbmdSZWNvcmRzLm1hcChyZWNvcmQgPT4gcmVjb3JkLmdldElkKCkpXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ29yaWdpbi1kcy1yZW1vdmFsLWZpbHRlcmVkJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICByZW1vdmVkQ291bnQ6IGN1cnJlbnRTZWxlY3RlZFJlY29yZHMubGVuZ3RoIC0gcmVtYWluaW5nUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgIHJlbWFpbmluZ0NvdW50OiByZW1haW5pbmdSZWNvcmRzLmxlbmd0aFxuICAgICAgfSlcbiAgICAgIFxuICAgICAgLy8gVXBkYXRlIHNlbGVjdGlvbiBpbiBvcmlnaW4gRFNcbiAgICAgIGlmICh0eXBlb2Ygb3JpZ2luRFMuc2VsZWN0UmVjb3Jkc0J5SWRzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIG9yaWdpbkRTLnNlbGVjdFJlY29yZHNCeUlkcyhyZW1haW5pbmdJZHMsIHJlbWFpbmluZ1JlY29yZHMgYXMgRmVhdHVyZURhdGFSZWNvcmRbXSlcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gUHVibGlzaCBzZWxlY3Rpb24gY2hhbmdlIG1lc3NhZ2UgZm9yIHRoaXMgb3JpZ2luIERTXG4gICAgICBNZXNzYWdlTWFuYWdlci5nZXRJbnN0YW5jZSgpLnB1Ymxpc2hNZXNzYWdlKFxuICAgICAgICBuZXcgRGF0YVJlY29yZHNTZWxlY3Rpb25DaGFuZ2VNZXNzYWdlKHdpZGdldElkLCByZW1haW5pbmdSZWNvcmRzIGFzIEZlYXR1cmVEYXRhUmVjb3JkW10sIFtvcmlnaW5EUy5pZF0pXG4gICAgICApXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ29yaWdpbi1kcy1zZWxlY3Rpb24tdXBkYXRlZCcsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgcmVtYWluaW5nUmVjb3Jkc0NvdW50OiByZW1haW5pbmdSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgbWVzc2FnZVB1Ymxpc2hlZDogdHJ1ZVxuICAgICAgfSlcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAnb3JpZ2luLWRzLXJlbW92YWwtZXJyb3InLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJyxcbiAgICAgICAgZXJyb3JTdGFjazogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnN0YWNrIDogdW5kZWZpbmVkXG4gICAgICB9KVxuICAgIH1cbiAgfSlcbiAgXG4gIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgIGV2ZW50OiAncmVtb3ZpbmctcmVjb3Jkcy1mcm9tLW9yaWdpbi1zZWxlY3Rpb25zLWNvbXBsZXRlJyxcbiAgICB3aWRnZXRJZCxcbiAgICBvcmlnaW5EU0NvdW50OiByZWNvcmRzQnlPcmlnaW5EUy5zaXplLFxuICAgIHRvdGFsUmVjb3Jkc1JlbW92ZWQ6IHJlY29yZHNUb1JlbW92ZS5sZW5ndGhcbiAgfSlcbn1cblxuLyoqXG4gKiBDbGVhcnMgYWxsIHJlY29yZHMgZnJvbSB0aGUgYWNjdW11bGF0ZWQgcmVzdWx0cyBkYXRhIHNvdXJjZS5cbiAqIFxuICogQHBhcmFtIGFjY3VtdWxhdGVkRFMgLSBUaGUgYWNjdW11bGF0ZWQgcmVzdWx0cyBkYXRhIHNvdXJjZSB0byBjbGVhclxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xlYXJBY2N1bXVsYXRlZFJlc3VsdHMoXG4gIGFjY3VtdWxhdGVkRFM6IEZlYXR1cmVMYXllckRhdGFTb3VyY2Vcbik6IHZvaWQge1xuICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICBldmVudDogJ2NsZWFyaW5nLWFjY3VtdWxhdGVkLXJlc3VsdHMnLFxuICAgIGFjY3VtdWxhdGVkRFNJZDogYWNjdW11bGF0ZWREUy5pZFxuICB9KVxuICBcbiAgLy8gU2V0IHN0YXR1cyB0byBOb3RSZWFkeSB0byBjbGVhciByZWNvcmRzXG4gIGFjY3VtdWxhdGVkRFMuc2V0U3RhdHVzKERhdGFTb3VyY2VTdGF0dXMuTm90UmVhZHkpXG4gIGFjY3VtdWxhdGVkRFMuc2V0Q291bnRTdGF0dXMoRGF0YVNvdXJjZVN0YXR1cy5Ob3RSZWFkeSlcbiAgXG4gIC8vIENsZWFyIGFueSBsb2FkZWQgcmVjb3JkcyBpZiBwb3NzaWJsZVxuICAvLyBOb3RlOiBNYXkgbmVlZCB0byB1c2UgRGF0YVNvdXJjZU1hbmFnZXIgbWV0aG9kcyBkZXBlbmRpbmcgb24gRXhCIEFQSVxuICBcbiAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgZXZlbnQ6ICdhY2N1bXVsYXRlZC1yZXN1bHRzLWNsZWFyZWQnLFxuICAgIGFjY3VtdWxhdGVkRFNJZDogYWNjdW11bGF0ZWREUy5pZFxuICB9KVxufVxuXG4iLCIvKipcbiAqIFV0aWxpdHkgZnVuY3Rpb25zIGZvciBtYW5hZ2luZyBmZWF0dXJlIHNlbGVjdGlvbiBpbiBRdWVyeVNpbXBsZSB3aWRnZXQuXG4gKiBDb25zb2xpZGF0ZXMgcmVwZWF0ZWQgc2VsZWN0aW9uIGxvZ2ljIHRvIGZvbGxvdyBEUlkgcHJpbmNpcGxlcy5cbiAqL1xuXG5pbXBvcnQgdHlwZSB7IERhdGFTb3VyY2UsIEZlYXR1cmVMYXllckRhdGFTb3VyY2UsIEZlYXR1cmVEYXRhUmVjb3JkIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgTWVzc2FnZU1hbmFnZXIsIERhdGFSZWNvcmRzU2VsZWN0aW9uQ2hhbmdlTWVzc2FnZSB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IGFkZEhpZ2hsaWdodEdyYXBoaWNzIGFzIGFkZEdyYXBoaWNzTGF5ZXJHcmFwaGljcywgY2xlYXJHcmFwaGljc0xheWVyIH0gZnJvbSAnLi9ncmFwaGljcy1sYXllci11dGlscydcbmltcG9ydCB7IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIgfSBmcm9tICd3aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbidcblxuY29uc3QgZGVidWdMb2dnZXIgPSBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyKClcblxuLyoqXG4gKiBDdXN0b20gZXZlbnQgbmFtZSBmb3IgUXVlcnlTaW1wbGUgdG8gbm90aWZ5IFdpZGdldCBvZiBzZWxlY3Rpb24gY2hhbmdlcy5cbiAqL1xuZXhwb3J0IGNvbnN0IFFVRVJZU0lNUExFX1NFTEVDVElPTl9FVkVOVCA9ICdxdWVyeXNpbXBsZS1zZWxlY3Rpb24tY2hhbmdlZCdcblxuLyoqXG4gKiBEaXNwYXRjaGVzIGEgY3VzdG9tIHNlbGVjdGlvbiBldmVudCB0byB0aGUgd2luZG93IHNvIHRoZSBtYWluIFdpZGdldCBjYW4gdHJhY2sgc3RhdGUuXG4gKiBcbiAqIEBwYXJhbSB3aWRnZXRJZCAtIFRoZSB3aWRnZXQgSURcbiAqIEBwYXJhbSByZWNvcmRJZHMgLSBBcnJheSBvZiBzZWxlY3RlZCByZWNvcmQgSURzXG4gKiBAcGFyYW0gb3V0cHV0RFMgLSBUaGUgb3V0cHV0IGRhdGEgc291cmNlXG4gKiBAcGFyYW0gcXVlcnlJdGVtQ29uZmlnSWQgLSBUaGUgY29uZmlnIElEIG9mIHRoZSBxdWVyeSB0aGF0IHByb2R1Y2VkIHRoZXNlIHJlc3VsdHNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRpc3BhdGNoU2VsZWN0aW9uRXZlbnQoXG4gIHdpZGdldElkOiBzdHJpbmcsXG4gIHJlY29yZElkczogc3RyaW5nW10sXG4gIG91dHB1dERTOiBEYXRhU291cmNlLFxuICBxdWVyeUl0ZW1Db25maWdJZDogc3RyaW5nXG4pOiB2b2lkIHtcbiAgY29uc3Qgb3JpZ2luRFMgPSBnZXRPcmlnaW5EYXRhU291cmNlKG91dHB1dERTKVxuICBjb25zdCBkYXRhU291cmNlSWQgPSBvcmlnaW5EUz8uaWRcbiAgXG4gIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICBldmVudDogJ2Rpc3BhdGNoU2VsZWN0aW9uRXZlbnQnLFxuICAgIHdpZGdldElkLFxuICAgIHJlY29yZENvdW50OiByZWNvcmRJZHMubGVuZ3RoLFxuICAgIG91dHB1dERzSWQ6IG91dHB1dERTLmlkLFxuICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkXG4gIH0pXG5cbiAgY29uc3Qgc2VsZWN0aW9uRXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoUVVFUllTSU1QTEVfU0VMRUNUSU9OX0VWRU5ULCB7XG4gICAgZGV0YWlsOiB7XG4gICAgICB3aWRnZXRJZCxcbiAgICAgIHJlY29yZElkcyxcbiAgICAgIGRhdGFTb3VyY2VJZCxcbiAgICAgIG91dHB1dERzSWQ6IG91dHB1dERTLmlkLFxuICAgICAgcXVlcnlJdGVtQ29uZmlnSWRcbiAgICB9LFxuICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgY2FuY2VsYWJsZTogdHJ1ZVxuICB9KVxuICB3aW5kb3cuZGlzcGF0Y2hFdmVudChzZWxlY3Rpb25FdmVudClcbn1cblxuLyoqXG4gKiBHZXRzIHRoZSBvcmlnaW4gZGF0YSBzb3VyY2UgZnJvbSBhbiBvdXRwdXQgZGF0YSBzb3VyY2UuXG4gKiBAcGFyYW0gb3V0cHV0RFMgLSBUaGUgb3V0cHV0IGRhdGEgc291cmNlXG4gKiBAcmV0dXJucyBUaGUgb3JpZ2luIGRhdGEgc291cmNlLCBvciBudWxsIGlmIG5vdCBhdmFpbGFibGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldE9yaWdpbkRhdGFTb3VyY2UoXG4gIG91dHB1dERTOiBEYXRhU291cmNlIHwgbnVsbCB8IHVuZGVmaW5lZFxuKTogRmVhdHVyZUxheWVyRGF0YVNvdXJjZSB8IG51bGwge1xuICBpZiAoIW91dHB1dERTKSByZXR1cm4gbnVsbFxuICBcbiAgLy8gVHJ5IHRvIGdldCBvcmlnaW4gZGF0YSBzb3VyY2VzXG4gIGNvbnN0IG9yaWdpbkRhdGFTb3VyY2VzID0gdHlwZW9mIG91dHB1dERTLmdldE9yaWdpbkRhdGFTb3VyY2VzID09PSAnZnVuY3Rpb24nIFxuICAgID8gb3V0cHV0RFMuZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKSBcbiAgICA6IFtdXG4gICAgXG4gIGlmIChvcmlnaW5EYXRhU291cmNlcyAmJiBvcmlnaW5EYXRhU291cmNlcy5sZW5ndGggPiAwKSB7XG4gICAgcmV0dXJuIG9yaWdpbkRhdGFTb3VyY2VzWzBdIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgfVxuICBcbiAgLy8gSWYgaXQgZG9lc24ndCBoYXZlIG9yaWdpbiBkYXRhIHNvdXJjZXMsIGl0IG1pZ2h0IGFscmVhZHkgYmUgYW4gb3JpZ2luIGRhdGEgc291cmNlXG4gIC8vIEZlYXR1cmVMYXllckRhdGFTb3VyY2Ugc2hvdWxkIGhhdmUgYSAnbGF5ZXInIHByb3BlcnR5IG9yICdnZXRMYXllcicgbWV0aG9kXG4gIGlmICgob3V0cHV0RFMgYXMgYW55KS5sYXllciB8fCAob3V0cHV0RFMgYXMgYW55KS5nZXRMYXllciB8fCAob3V0cHV0RFMgYXMgYW55KS50eXBlID09PSAnRmVhdHVyZUxheWVyJykge1xuICAgIHJldHVybiBvdXRwdXREUyBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gIH1cbiAgXG4gIHJldHVybiBudWxsXG59XG5cbi8qKlxuICogU2VsZWN0cyByZWNvcmRzIGluIGJvdGggdGhlIG9yaWdpbiBkYXRhIHNvdXJjZSBhbmQgb3V0cHV0IGRhdGEgc291cmNlLlxuICogVGhpcyBpcyB0aGUgc3RhbmRhcmQgcGF0dGVybiB1c2VkIHRocm91Z2hvdXQgdGhlIHdpZGdldCBmb3Igc2VsZWN0aW9uLlxuICogT3B0aW9uYWxseSB1c2VzIGdyYXBoaWNzIGxheWVyIGZvciBoaWdobGlnaHRpbmcgKGluZGVwZW5kZW50IG9mIGxheWVyIHZpc2liaWxpdHkpLlxuICogXG4gKiBAcGFyYW0gb3V0cHV0RFMgLSBUaGUgb3V0cHV0IGRhdGEgc291cmNlXG4gKiBAcGFyYW0gcmVjb3JkSWRzIC0gQXJyYXkgb2YgcmVjb3JkIElEcyB0byBzZWxlY3RcbiAqIEBwYXJhbSByZWNvcmRzIC0gT3B0aW9uYWwgYXJyYXkgb2YgRmVhdHVyZURhdGFSZWNvcmQgb2JqZWN0cyBmb3IgcHJvcGVyIGhpZ2hsaWdodGluZ1xuICogQHBhcmFtIHVzZUdyYXBoaWNzTGF5ZXIgLSBXaGV0aGVyIHRvIHVzZSBncmFwaGljcyBsYXllciBmb3IgaGlnaGxpZ2h0aW5nIChkZWZhdWx0OiBmYWxzZSlcbiAqIEBwYXJhbSBncmFwaGljc0xheWVyIC0gR3JhcGhpY3MgbGF5ZXIgaW5zdGFuY2UgKHJlcXVpcmVkIGlmIHVzZUdyYXBoaWNzTGF5ZXIgaXMgdHJ1ZSlcbiAqIEBwYXJhbSBtYXBWaWV3IC0gTWFwIHZpZXcgaW5zdGFuY2UgKHJlcXVpcmVkIGlmIHVzZUdyYXBoaWNzTGF5ZXIgaXMgdHJ1ZSlcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlbGVjdFJlY29yZHNJbkRhdGFTb3VyY2VzKFxuICBvdXRwdXREUzogRGF0YVNvdXJjZSB8IG51bGwgfCB1bmRlZmluZWQsXG4gIHJlY29yZElkczogc3RyaW5nW10sXG4gIHJlY29yZHM/OiBGZWF0dXJlRGF0YVJlY29yZFtdLFxuICB1c2VHcmFwaGljc0xheWVyOiBib29sZWFuID0gZmFsc2UsXG4gIGdyYXBoaWNzTGF5ZXI/OiBfX2VzcmkuR3JhcGhpY3NMYXllcixcbiAgbWFwVmlldz86IF9fZXNyaS5NYXBWaWV3IHwgX19lc3JpLlNjZW5lVmlld1xuKTogUHJvbWlzZTx2b2lkPiB7XG4gIGlmICghb3V0cHV0RFMpIHJldHVyblxuICBcbiAgY29uc3Qgb3JpZ2luRFMgPSBnZXRPcmlnaW5EYXRhU291cmNlKG91dHB1dERTKVxuICBcbiAgLy8gSWYgdXNpbmcgZ3JhcGhpY3MgbGF5ZXIsIGFkZCBncmFwaGljcyBmb3IgaGlnaGxpZ2h0aW5nXG4gIGlmICh1c2VHcmFwaGljc0xheWVyICYmIGdyYXBoaWNzTGF5ZXIgJiYgbWFwVmlldyAmJiByZWNvcmRzICYmIHJlY29yZHMubGVuZ3RoID4gMCkge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICBldmVudDogJ3NlbGVjdFJlY29yZHNJbkRhdGFTb3VyY2VzLXVzaW5nLWdyYXBoaWNzLWxheWVyJyxcbiAgICAgIHJlY29yZElkc0NvdW50OiByZWNvcmRJZHMubGVuZ3RoLFxuICAgICAgcmVjb3Jkc0NvdW50OiByZWNvcmRzLmxlbmd0aCxcbiAgICAgIGdyYXBoaWNzTGF5ZXJJZDogZ3JhcGhpY3NMYXllci5pZCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgYXdhaXQgYWRkR3JhcGhpY3NMYXllckdyYXBoaWNzKGdyYXBoaWNzTGF5ZXIsIHJlY29yZHMsIG1hcFZpZXcpXG4gICAgXG4gICAgLy8gU3RpbGwgc2VsZWN0IGluIGRhdGEgc291cmNlIGZvciBzdGF0ZSBtYW5hZ2VtZW50IChidXQgbGF5ZXIgc2VsZWN0aW9uIHdvbid0IHNob3cgaWYgbGF5ZXIgaXMgb2ZmKVxuICAgIGlmIChvcmlnaW5EUyAmJiB0eXBlb2Ygb3JpZ2luRFMuc2VsZWN0UmVjb3Jkc0J5SWRzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBvcmlnaW5EUy5zZWxlY3RSZWNvcmRzQnlJZHMocmVjb3JkSWRzLCByZWNvcmRzKVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICAvLyBPcmlnaW5hbCBiZWhhdmlvcjogdXNlIGxheWVyIHNlbGVjdGlvblxuICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICBldmVudDogJ3NlbGVjdFJlY29yZHNJbkRhdGFTb3VyY2VzLXVzaW5nLWxheWVyLXNlbGVjdGlvbicsXG4gICAgICByZWNvcmRJZHNDb3VudDogcmVjb3JkSWRzLmxlbmd0aCxcbiAgICAgIHVzZUdyYXBoaWNzTGF5ZXIsXG4gICAgICBoYXNHcmFwaGljc0xheWVyOiAhIWdyYXBoaWNzTGF5ZXIsXG4gICAgICBoYXNNYXBWaWV3OiAhIW1hcFZpZXcsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIC8vIFNlbGVjdCBpbiBvcmlnaW4gZGF0YSBzb3VyY2UgKHRoZSBhY3R1YWwgbGF5ZXIpXG4gICAgaWYgKG9yaWdpbkRTICYmIHR5cGVvZiBvcmlnaW5EUy5zZWxlY3RSZWNvcmRzQnlJZHMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIC8vIExvZyBsYXllciBzdGF0ZSByaWdodCBiZWZvcmUgc2VsZWN0aW9uIHRvIHNlZSB3aGF0J3MgYXZhaWxhYmxlIHdoZW4gc2VsZWN0aW9uIHdvcmtzXG4gICAgICBjb25zdCBsYXllciA9IChvcmlnaW5EUyBhcyBhbnkpLmxheWVyIHx8IChvcmlnaW5EUyBhcyBhbnkpLmdldExheWVyPy4oKVxuICAgICAgaWYgKGxheWVyKSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICAgICAgZXZlbnQ6ICdzZWxlY3RSZWNvcmRzQnlJZHMtbGF5ZXItc3RhdGUnLFxuICAgICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICAgIGxheWVySWQ6IGxheWVyLmlkLFxuICAgICAgICAgIGhhc0xheWVyTWFwOiAhIShsYXllciBhcyBhbnkpLm1hcCxcbiAgICAgICAgICBoYXNMYXllclZpZXc6ICEhKGxheWVyIGFzIGFueSkudmlldyxcbiAgICAgICAgICBoYXNMYXllclBhcmVudDogISEobGF5ZXIgYXMgYW55KS5wYXJlbnQsXG4gICAgICAgICAgcGFyZW50VHlwZTogKGxheWVyIGFzIGFueSkucGFyZW50Py50eXBlIHx8ICdub25lJyxcbiAgICAgICAgICBwYXJlbnRIYXNNYXA6ICEhKGxheWVyIGFzIGFueSkucGFyZW50Py5tYXAsXG4gICAgICAgICAgcGFyZW50SGFzVmlldzogISEobGF5ZXIgYXMgYW55KS5wYXJlbnQ/LnZpZXcsXG4gICAgICAgICAgcGFyZW50SGFzVmlld3M6ICEhKGxheWVyIGFzIGFueSkucGFyZW50Py52aWV3cyxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICAgIFxuICAgICAgb3JpZ2luRFMuc2VsZWN0UmVjb3Jkc0J5SWRzKHJlY29yZElkcywgcmVjb3JkcylcbiAgICB9XG4gIH1cbiAgXG4gIC8vIEFsd2F5cyB1cGRhdGUgb3V0cHV0RFMgZm9yIHdpZGdldCdzIGludGVybmFsIHN0YXRlXG4gIGlmICh0eXBlb2Ygb3V0cHV0RFMuc2VsZWN0UmVjb3Jkc0J5SWRzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgb3V0cHV0RFMuc2VsZWN0UmVjb3Jkc0J5SWRzKHJlY29yZElkcywgcmVjb3JkcylcbiAgfVxufVxuXG4vKipcbiAqIENsZWFycyB0aGUgYGRhdGFfc2AgcGFyYW1ldGVyIGZyb20gdGhlIFVSTCBoYXNoLlxuICogRXhwZXJpZW5jZSBCdWlsZGVyIGF1dG9tYXRpY2FsbHkgYWRkcyBgZGF0YV9zYCB3aGVuIHNlbGVjdGlvbnMgYXJlIG1hZGUsXG4gKiBidXQgZG9lc24ndCByZW1vdmUgaXQgd2hlbiBzZWxlY3Rpb25zIGFyZSBjbGVhcmVkLCBjYXVzaW5nIFwiZGlydHkgaGFzaFwiIGlzc3Vlcy5cbiAqIFxuICogVGhpcyBmdW5jdGlvbiBlbnN1cmVzIHRoZSBoYXNoIGlzIGNsZWFuIHdoZW4gc2VsZWN0aW9ucyBhcmUgY2xlYXJlZC5cbiAqL1xuZnVuY3Rpb24gY2xlYXJEYXRhU1BhcmFtZXRlckZyb21IYXNoKCk6IHZvaWQge1xuICBjb25zdCBoYXNoID0gd2luZG93LmxvY2F0aW9uLmhhc2guc3Vic3RyaW5nKDEpXG4gIGlmICghaGFzaCkgcmV0dXJuXG4gIFxuICBjb25zdCB1cmxQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKGhhc2gpXG4gIFxuICBpZiAodXJsUGFyYW1zLmhhcygnZGF0YV9zJykpIHtcbiAgICB1cmxQYXJhbXMuZGVsZXRlKCdkYXRhX3MnKVxuICAgIGNvbnN0IG5ld0hhc2ggPSB1cmxQYXJhbXMudG9TdHJpbmcoKVxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSCcsIHtcbiAgICAgIGV2ZW50OiAnY2xlYXJEYXRhU1BhcmFtZXRlckZyb21IYXNoJyxcbiAgICAgIGhhZERhdGFTOiB0cnVlLFxuICAgICAgbmV3SGFzaDogbmV3SGFzaCA/IGAjJHtuZXdIYXNofWAgOiAnKGVtcHR5KScsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIC8vIFVwZGF0ZSB0aGUgVVJMIHdpdGhvdXQgdHJpZ2dlcmluZyBhIHJlbG9hZFxuICAgIC8vIEFsd2F5cyBwcmVzZXJ2ZSBwYXRobmFtZSBhbmQgcXVlcnkgc3RyaW5nLCBvbmx5IHVwZGF0ZSBoYXNoXG4gICAgd2luZG93Lmhpc3RvcnkucmVwbGFjZVN0YXRlKG51bGwsICcnLCBcbiAgICAgIHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSArIHdpbmRvdy5sb2NhdGlvbi5zZWFyY2ggKyAobmV3SGFzaCA/IGAjJHtuZXdIYXNofWAgOiAnJylcbiAgICApXG4gIH1cbn1cblxuLyoqXG4gKiBDbGVhcnMgc2VsZWN0aW9uIGluIGJvdGggdGhlIG9yaWdpbiBkYXRhIHNvdXJjZSBhbmQgb3V0cHV0IGRhdGEgc291cmNlLlxuICogT3B0aW9uYWxseSBjbGVhcnMgZ3JhcGhpY3MgbGF5ZXIgaWYgdXNpbmcgZ3JhcGhpY3MgbGF5ZXIgbW9kZS5cbiAqIEFsc28gY2xlYXJzIHRoZSBgZGF0YV9zYCBwYXJhbWV0ZXIgZnJvbSB0aGUgVVJMIGhhc2ggdG8gcHJldmVudCBcImRpcnR5IGhhc2hcIiBpc3N1ZXMuXG4gKiBcbiAqIEBwYXJhbSB3aWRnZXRJZCAtIFRoZSB3aWRnZXQgSUQgKG5lZWRlZCB0byBwdWJsaXNoIG1lc3NhZ2UpXG4gKiBAcGFyYW0gb3V0cHV0RFMgLSBUaGUgb3V0cHV0IGRhdGEgc291cmNlXG4gKiBAcGFyYW0gdXNlR3JhcGhpY3NMYXllciAtIFdoZXRoZXIgdG8gY2xlYXIgZ3JhcGhpY3MgbGF5ZXIgKGRlZmF1bHQ6IGZhbHNlKVxuICogQHBhcmFtIGdyYXBoaWNzTGF5ZXIgLSBHcmFwaGljcyBsYXllciBpbnN0YW5jZSAocmVxdWlyZWQgaWYgdXNlR3JhcGhpY3NMYXllciBpcyB0cnVlKVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2xlYXJTZWxlY3Rpb25JbkRhdGFTb3VyY2VzIChcbiAgd2lkZ2V0SWQ6IHN0cmluZyxcbiAgb3V0cHV0RFM6IERhdGFTb3VyY2UgfCBudWxsIHwgdW5kZWZpbmVkLFxuICB1c2VHcmFwaGljc0xheWVyOiBib29sZWFuID0gZmFsc2UsXG4gIGdyYXBoaWNzTGF5ZXI/OiBfX2VzcmkuR3JhcGhpY3NMYXllclxuKTogUHJvbWlzZTx2b2lkPiB7XG4gIC8vIENsZWFyIGdyYXBoaWNzIGxheWVyIGlmIHVzaW5nIGdyYXBoaWNzIGxheWVyIG1vZGVcbiAgaWYgKHVzZUdyYXBoaWNzTGF5ZXIgJiYgZ3JhcGhpY3NMYXllcikge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICBldmVudDogJ2NsZWFyU2VsZWN0aW9uSW5EYXRhU291cmNlcy1jbGVhcmluZy1ncmFwaGljcy1sYXllcicsXG4gICAgICBncmFwaGljc0xheWVySWQ6IGdyYXBoaWNzTGF5ZXIuaWQsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIGNsZWFyR3JhcGhpY3NMYXllcihncmFwaGljc0xheWVyKVxuICB9XG5cbiAgLy8gQ2xlYXIgZGF0YSBzb3VyY2Ugc2VsZWN0aW9uIGZvciBzdGF0ZSBtYW5hZ2VtZW50XG4gIGF3YWl0IHNlbGVjdFJlY29yZHNJbkRhdGFTb3VyY2VzKG91dHB1dERTLCBbXSwgdW5kZWZpbmVkLCBmYWxzZSlcblxuICAvLyBQdWJsaXNoIHRoZSBlbXB0eSBzZWxlY3Rpb24gbWVzc2FnZSBzbyB0aGUgTWFwIHNlbGVjdGlvbiAoYmx1ZSBib3hlcykgY2xlYXJzXG4gIGlmIChvdXRwdXREUykge1xuICAgIHB1Ymxpc2hTZWxlY3Rpb25NZXNzYWdlKHdpZGdldElkLCBbXSwgb3V0cHV0RFMsIHRydWUpXG4gIH1cbiAgXG4gIC8vIENsZWFyIGRhdGFfcyBwYXJhbWV0ZXIgZnJvbSBoYXNoIHRvIHByZXZlbnQgZGlydHkgaGFzaFxuICAvLyBFeHBlcmllbmNlIEJ1aWxkZXIgYWRkcyBkYXRhX3Mgd2hlbiBzZWxlY3Rpb25zIGFyZSBtYWRlIGJ1dCBkb2Vzbid0IHJlbW92ZSBpdCB3aGVuIGNsZWFyZWRcbiAgY2xlYXJEYXRhU1BhcmFtZXRlckZyb21IYXNoKClcbn1cblxuLyoqXG4gKiBQdWJsaXNoZXMgYSBzZWxlY3Rpb24gY2hhbmdlIG1lc3NhZ2UgZm9yIHRoZSBnaXZlbiByZWNvcmRzIGFuZCBkYXRhIHNvdXJjZXMuXG4gKiBcbiAqIEBwYXJhbSB3aWRnZXRJZCAtIFRoZSB3aWRnZXQgSURcbiAqIEBwYXJhbSByZWNvcmRzIC0gQXJyYXkgb2YgRmVhdHVyZURhdGFSZWNvcmQgb2JqZWN0cyAoZW1wdHkgYXJyYXkgdG8gY2xlYXIpXG4gKiBAcGFyYW0gb3V0cHV0RFMgLSBUaGUgb3V0cHV0IGRhdGEgc291cmNlXG4gKiBAcGFyYW0gYWxzb1B1Ymxpc2hUb091dHB1dERTIC0gV2hldGhlciB0byBhbHNvIHB1Ymxpc2ggYSBtZXNzYWdlIGZvciBvdXRwdXREUyAoZGVmYXVsdDogZmFsc2UpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwdWJsaXNoU2VsZWN0aW9uTWVzc2FnZShcbiAgd2lkZ2V0SWQ6IHN0cmluZyxcbiAgcmVjb3JkczogRmVhdHVyZURhdGFSZWNvcmRbXSxcbiAgb3V0cHV0RFM6IERhdGFTb3VyY2UgfCBudWxsIHwgdW5kZWZpbmVkLFxuICBhbHNvUHVibGlzaFRvT3V0cHV0RFM6IGJvb2xlYW4gPSBmYWxzZVxuKTogdm9pZCB7XG4gIGlmICghb3V0cHV0RFMpIHJldHVyblxuICBcbiAgY29uc3Qgb3JpZ2luRFMgPSBnZXRPcmlnaW5EYXRhU291cmNlKG91dHB1dERTKVxuICBcbiAgaWYgKG9yaWdpbkRTKSB7XG4gICAgTWVzc2FnZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5wdWJsaXNoTWVzc2FnZShcbiAgICAgIG5ldyBEYXRhUmVjb3Jkc1NlbGVjdGlvbkNoYW5nZU1lc3NhZ2Uod2lkZ2V0SWQsIHJlY29yZHMsIFtvcmlnaW5EUy5pZF0pXG4gICAgKVxuICB9IGVsc2UgaWYgKGFsc29QdWJsaXNoVG9PdXRwdXREUykge1xuICAgIE1lc3NhZ2VNYW5hZ2VyLmdldEluc3RhbmNlKCkucHVibGlzaE1lc3NhZ2UoXG4gICAgICBuZXcgRGF0YVJlY29yZHNTZWxlY3Rpb25DaGFuZ2VNZXNzYWdlKHdpZGdldElkLCByZWNvcmRzLCBbb3V0cHV0RFMuaWRdKVxuICAgIClcbiAgfVxuICBcbiAgLy8gT3B0aW9uYWxseSBwdWJsaXNoIHRvIG91dHB1dERTIGFzIHdlbGwgKGZvciBzb21lIGVkZ2UgY2FzZXMpXG4gIGlmIChhbHNvUHVibGlzaFRvT3V0cHV0RFMgJiYgb3JpZ2luRFMpIHtcbiAgICBNZXNzYWdlTWFuYWdlci5nZXRJbnN0YW5jZSgpLnB1Ymxpc2hNZXNzYWdlKFxuICAgICAgbmV3IERhdGFSZWNvcmRzU2VsZWN0aW9uQ2hhbmdlTWVzc2FnZSh3aWRnZXRJZCwgcmVjb3JkcywgW291dHB1dERTLmlkXSlcbiAgICApXG4gIH1cbn1cblxuLyoqXG4gKiBTZWxlY3RzIHJlY29yZHMgYW5kIHB1Ymxpc2hlcyB0aGUgc2VsZWN0aW9uIG1lc3NhZ2UgaW4gb25lIGNhbGwuXG4gKiBUaGlzIGlzIHRoZSBtb3N0IGNvbW1vbiBwYXR0ZXJuIC0gc2VsZWN0aW5nIHJlY29yZHMgYW5kIG5vdGlmeWluZyB0aGUgbWFwLlxuICogT3B0aW9uYWxseSB1c2VzIGdyYXBoaWNzIGxheWVyIGZvciBoaWdobGlnaHRpbmcgKGluZGVwZW5kZW50IG9mIGxheWVyIHZpc2liaWxpdHkpLlxuICogXG4gKiBAcGFyYW0gd2lkZ2V0SWQgLSBUaGUgd2lkZ2V0IElEXG4gKiBAcGFyYW0gb3V0cHV0RFMgLSBUaGUgb3V0cHV0IGRhdGEgc291cmNlXG4gKiBAcGFyYW0gcmVjb3JkSWRzIC0gQXJyYXkgb2YgcmVjb3JkIElEcyB0byBzZWxlY3RcbiAqIEBwYXJhbSByZWNvcmRzIC0gQXJyYXkgb2YgRmVhdHVyZURhdGFSZWNvcmQgb2JqZWN0cyBmb3IgcHJvcGVyIGhpZ2hsaWdodGluZ1xuICogQHBhcmFtIGFsc29QdWJsaXNoVG9PdXRwdXREUyAtIFdoZXRoZXIgdG8gYWxzbyBwdWJsaXNoIGEgbWVzc2FnZSBmb3Igb3V0cHV0RFMgKGRlZmF1bHQ6IGZhbHNlKVxuICogQHBhcmFtIHVzZUdyYXBoaWNzTGF5ZXIgLSBXaGV0aGVyIHRvIHVzZSBncmFwaGljcyBsYXllciBmb3IgaGlnaGxpZ2h0aW5nIChkZWZhdWx0OiBmYWxzZSlcbiAqIEBwYXJhbSBncmFwaGljc0xheWVyIC0gR3JhcGhpY3MgbGF5ZXIgaW5zdGFuY2UgKHJlcXVpcmVkIGlmIHVzZUdyYXBoaWNzTGF5ZXIgaXMgdHJ1ZSlcbiAqIEBwYXJhbSBtYXBWaWV3IC0gTWFwIHZpZXcgaW5zdGFuY2UgKHJlcXVpcmVkIGlmIHVzZUdyYXBoaWNzTGF5ZXIgaXMgdHJ1ZSlcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoKFxuICB3aWRnZXRJZDogc3RyaW5nLFxuICBvdXRwdXREUzogRGF0YVNvdXJjZSB8IG51bGwgfCB1bmRlZmluZWQsXG4gIHJlY29yZElkczogc3RyaW5nW10sXG4gIHJlY29yZHM6IEZlYXR1cmVEYXRhUmVjb3JkW10sXG4gIGFsc29QdWJsaXNoVG9PdXRwdXREUzogYm9vbGVhbiA9IGZhbHNlLFxuICB1c2VHcmFwaGljc0xheWVyOiBib29sZWFuID0gZmFsc2UsXG4gIGdyYXBoaWNzTGF5ZXI/OiBfX2VzcmkuR3JhcGhpY3NMYXllcixcbiAgbWFwVmlldz86IF9fZXNyaS5NYXBWaWV3IHwgX19lc3JpLlNjZW5lVmlld1xuKTogUHJvbWlzZTx2b2lkPiB7XG4gIGF3YWl0IHNlbGVjdFJlY29yZHNJbkRhdGFTb3VyY2VzKG91dHB1dERTLCByZWNvcmRJZHMsIHJlY29yZHMsIHVzZUdyYXBoaWNzTGF5ZXIsIGdyYXBoaWNzTGF5ZXIsIG1hcFZpZXcpXG4gIHB1Ymxpc2hTZWxlY3Rpb25NZXNzYWdlKHdpZGdldElkLCByZWNvcmRzLCBvdXRwdXREUywgYWxzb1B1Ymxpc2hUb091dHB1dERTKVxufVxuXG4vKipcbiAqIEZpbmRzIHRoZSBcIkNsZWFyIHJlc3VsdHNcIiBidXR0b24gaW4gdGhlIERPTS5cbiAqIFVzZWQgd2hlbiBwcm9ncmFtbWF0aWNhbGx5IHRyaWdnZXJpbmcgdGhlIGNsZWFyIGFjdGlvbi5cbiAqIFxuICogQHJldHVybnMgVGhlIGNsZWFyIGJ1dHRvbiBlbGVtZW50LCBvciBudWxsIGlmIG5vdCBmb3VuZFxuICovXG5leHBvcnQgZnVuY3Rpb24gZmluZENsZWFyUmVzdWx0c0J1dHRvbigpOiBIVE1MQnV0dG9uRWxlbWVudCB8IG51bGwge1xuICAvLyBIYXJkZW5lZDogUHJpb3JpdGl6ZSB0aGUgb25lIGluIHRoZSByZXN1bHRzIGhlYWRlciwgZmFsbGJhY2sgdG8gYW55XG4gIHJldHVybiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnF1ZXJ5LXJlc3VsdF9faGVhZGVyIGJ1dHRvblthcmlhLWxhYmVsPVwiQ2xlYXIgcmVzdWx0c1wiXScpIHx8IFxuICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvblthcmlhLWxhYmVsPVwiQ2xlYXIgcmVzdWx0c1wiXScpKSBhcyBIVE1MQnV0dG9uRWxlbWVudCB8IG51bGxcbn1cblxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQge1xuICBSZWFjdCxcbiAganN4LFxuICBjc3MsXG4gIGNsYXNzTmFtZXMsXG4gIHR5cGUgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSxcbiAgdHlwZSBJbW11dGFibGVPYmplY3QsXG4gIHR5cGUgRGF0YVJlY29yZCxcbiAgdHlwZSBGZWF0dXJlRGF0YVJlY29yZFxufSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyB0eXBlIFF1ZXJ5SXRlbVR5cGUsIExpc3REaXJlY3Rpb24gfSBmcm9tICcuLi9jb25maWcnXG5pbXBvcnQgeyBRdWVyeVJlc3VsdEl0ZW0gfSBmcm9tICcuL3F1ZXJ5LXJlc3VsdC1pdGVtJ1xuaW1wb3J0IHsgZ2V0UG9wdXBUZW1wbGF0ZSB9IGZyb20gJy4vcXVlcnktdXRpbHMnXG5pbXBvcnQgeyB1c2VBdXRvSGVpZ2h0IH0gZnJvbSAnLi91c2VBdXRvSGVpZ2h0J1xuaW1wb3J0IHsgY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlciB9IGZyb20gJ3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uJ1xuXG5jb25zdCBkZWJ1Z0xvZ2dlciA9IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIoKVxuXG5leHBvcnQgaW50ZXJmYWNlIFNpbXBsZUxpc3RQcm9wcyB7XG4gIHdpZGdldElkOiBzdHJpbmdcbiAgcXVlcnlJdGVtOiBJbW11dGFibGVPYmplY3Q8UXVlcnlJdGVtVHlwZT5cbiAgb3V0cHV0RFM6IEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgcmVjb3JkczogRGF0YVJlY29yZFtdXG4gIGRpcmVjdGlvbjogTGlzdERpcmVjdGlvblxuICBvbkVzY2FwZTogKCkgPT4gdm9pZFxuICBvblNlbGVjdENoYW5nZTogKGRhdGE6IEZlYXR1cmVEYXRhUmVjb3JkKSA9PiB2b2lkXG4gIG9uUmVtb3ZlOiAoZGF0YTogRmVhdHVyZURhdGFSZWNvcmQpID0+IHZvaWRcbiAgZXhwYW5kQnlEZWZhdWx0PzogYm9vbGVhblxuICBpdGVtRXhwYW5kU3RhdGVzPzogTWFwPHN0cmluZywgYm9vbGVhbj5cbiAgcmVtb3ZlZFJlY29yZElkcz86IFNldDxzdHJpbmc+XG4gIG9uUmVuZGVyRG9uZT86IChvcHRpb25zOiB7IGRhdGFJdGVtczogYW55W10gfSkgPT4gdm9pZFxufVxuXG5jb25zdCBnZXRTdHlsZSA9IChpc0F1dG9IZWlnaHQ6IGJvb2xlYW4pID0+IHtcbiAgcmV0dXJuIGNzc2BcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXg6IDEgMSAke2lzQXV0b0hlaWdodCA/ICdhdXRvJyA6IDB9O1xuICAgIG92ZXJmbG93OiBhdXRvO1xuICAgIG1heC1oZWlnaHQ6ICR7aXNBdXRvSGVpZ2h0ID8gJ2NhbGMoNjEuOHZoIC0gMTAwcHgpJyA6ICdub25lJ307XG5cbiAgICAucXVlcnktcmVzdWx0LWl0ZW0gKyAucXVlcnktcmVzdWx0LWl0ZW0ge1xuICAgICAgbWFyZ2luLWxlZnQ6IDAuNXJlbTtcbiAgICAgIG1hcmdpbi10b3A6IDA7XG4gICAgfVxuXG4gICAgJi52ZXJ0aWNhbCB7XG4gICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgLmxpc3QtaXRlbXMge1xuICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICB9XG5cbiAgICAgIC5mZWF0dXJlLWluZm8tY29tcG9uZW50IHtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICB9XG5cbiAgICAgIC5xdWVyeS1yZXN1bHQtaXRlbSArIC5xdWVyeS1yZXN1bHQtaXRlbSB7XG4gICAgICAgIG1hcmdpbi1sZWZ0OiAwO1xuICAgICAgICBtYXJnaW4tdG9wOiAwLjVyZW07XG4gICAgICB9XG4gICAgfVxuICAgIC5saXN0LWl0ZW1zIHtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgfVxuICBgXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBTaW1wbGVMaXN0IChwcm9wczogU2ltcGxlTGlzdFByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICB3aWRnZXRJZCxcbiAgICBvdXRwdXREUyxcbiAgICBxdWVyeUl0ZW0sXG4gICAgcmVjb3JkcyxcbiAgICBkaXJlY3Rpb24sXG4gICAgb25Fc2NhcGUsXG4gICAgb25TZWxlY3RDaGFuZ2UsXG4gICAgb25SZW1vdmUsXG4gICAgZXhwYW5kQnlEZWZhdWx0LFxuICAgIGl0ZW1FeHBhbmRTdGF0ZXMsXG4gICAgcmVtb3ZlZFJlY29yZElkcyxcbiAgICBvblJlbmRlckRvbmVcbiAgfSA9IHByb3BzXG4gIFxuICBjb25zdCBbcG9wdXBUZW1wbGF0ZSwgc2V0UG9wdXBUZW1wbGF0ZV0gPSBSZWFjdC51c2VTdGF0ZTxhbnk+KClcbiAgY29uc3QgW2RlZmF1bHRQb3B1cFRlbXBsYXRlLCBzZXREZWZhdWx0UG9wdXBUZW1wbGF0ZV0gPSBSZWFjdC51c2VTdGF0ZTxhbnk+KClcbiAgY29uc3QgaXNBdXRvSGVpZ2h0ID0gdXNlQXV0b0hlaWdodCgpXG4gIGNvbnN0IHJlc3VsdENvbnRhaW5lclJlZiA9IFJlYWN0LnVzZVJlZjxIVE1MRGl2RWxlbWVudD4obnVsbClcblxuICAvLyBGaWx0ZXIgb3V0IHJlbW92ZWQgcmVjb3Jkc1xuICBjb25zdCBmaWx0ZXJlZFJlY29yZHMgPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICByZXR1cm4gcmVjb3Jkcz8uZmlsdGVyKHJlY29yZCA9PiAhcmVtb3ZlZFJlY29yZElkcz8uaGFzKHJlY29yZC5nZXRJZCgpKSkgfHwgW11cbiAgfSwgW3JlY29yZHMsIHJlbW92ZWRSZWNvcmRJZHNdKVxuXG4gIC8vIE5vdGlmeSBwYXJlbnQgd2hlbiByZWNvcmRzIGFyZSByZW5kZXJlZCAoZm9yIGF1dG8tc3dpdGNoIGxvZ2ljKVxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChvblJlbmRlckRvbmUgJiYgZmlsdGVyZWRSZWNvcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ1NpbXBsZUxpc3Qtb25SZW5kZXJEb25lLWNhbGxlZCcsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICBxdWVyeUl0ZW1Db25maWdJZDogcXVlcnlJdGVtLmNvbmZpZ0lkLFxuICAgICAgICBmaWx0ZXJlZFJlY29yZHNDb3VudDogZmlsdGVyZWRSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgdG90YWxSZWNvcmRzQ291bnQ6IHJlY29yZHMubGVuZ3RoLFxuICAgICAgICByZW1vdmVkUmVjb3JkSWRzQ291bnQ6IHJlbW92ZWRSZWNvcmRJZHM/LnNpemUgfHwgMCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgb25SZW5kZXJEb25lKHsgZGF0YUl0ZW1zOiBmaWx0ZXJlZFJlY29yZHMgfSlcbiAgICB9XG4gIH0sIFtmaWx0ZXJlZFJlY29yZHMsIG9uUmVuZGVyRG9uZSwgd2lkZ2V0SWQsIHF1ZXJ5SXRlbS5jb25maWdJZCwgcmVjb3Jkcy5sZW5ndGgsIHJlbW92ZWRSZWNvcmRJZHNdKVxuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZ2V0UG9wdXBUZW1wbGF0ZShvdXRwdXREUywgcXVlcnlJdGVtKS50aGVuKHJzID0+IHtcbiAgICAgIHNldFBvcHVwVGVtcGxhdGUocnMucG9wdXBUZW1wbGF0ZSlcbiAgICAgIHNldERlZmF1bHRQb3B1cFRlbXBsYXRlKHJzLmRlZmF1bHRQb3B1cFRlbXBsYXRlKVxuICAgIH0pXG4gIH0sIFtvdXRwdXREUywgcXVlcnlJdGVtXSlcblxuICBjb25zdCBoYW5kbGVLZXlVcCA9IFJlYWN0LnVzZUNhbGxiYWNrKChldnQpID0+IHtcbiAgICBpZiAoZXZ0LmtleSA9PT0gJ0VzY2FwZScpIHtcbiAgICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKVxuICAgICAgb25Fc2NhcGUoKVxuICAgIH1cbiAgfSwgW29uRXNjYXBlXSlcblxuICBjb25zdCBoYW5kbGVLZXlEb3duID0gUmVhY3QudXNlQ2FsbGJhY2soKGV2dCkgPT4ge1xuICAgIGlmIChldnQua2V5ID09PSAnICcpIHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgfVxuICB9LCBbXSlcblxuICByZXR1cm4gKFxuICAgIDxkaXYgXG4gICAgICBvbktleVVwPXtoYW5kbGVLZXlVcH0gXG4gICAgICBvbktleURvd249e2hhbmRsZUtleURvd259IFxuICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKHsgdmVydGljYWw6IGRpcmVjdGlvbiA9PT0gTGlzdERpcmVjdGlvbi5WZXJ0aWNhbCB9KX0gXG4gICAgICBjc3M9e2dldFN0eWxlKGlzQXV0b0hlaWdodCl9XG4gICAgICByZWY9e3Jlc3VsdENvbnRhaW5lclJlZn1cbiAgICA+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT0nbGlzdC1pdGVtcyBweC00IHB5LTEnIHJvbGU9J2xpc3Rib3gnPlxuICAgICAgICB7ZmlsdGVyZWRSZWNvcmRzLm1hcCgoZGF0YUl0ZW0pID0+IHtcbiAgICAgICAgICBjb25zdCByZWNvcmRJZCA9IGRhdGFJdGVtLmdldElkKClcbiAgICAgICAgICAvLyBVc2UgaW5kaXZpZHVhbCBzdGF0ZSBmcm9tIG1hcCBpZiBhdmFpbGFibGUsIG90aGVyd2lzZSBmYWxsIGJhY2sgdG8gZXhwYW5kQnlEZWZhdWx0XG4gICAgICAgICAgY29uc3QgaW5kaXZpZHVhbEV4cGFuZFN0YXRlID0gaXRlbUV4cGFuZFN0YXRlcz8uZ2V0KHJlY29yZElkKVxuICAgICAgICAgIGNvbnN0IGV4cGFuZEJ5RGVmYXVsdFZhbHVlID0gaW5kaXZpZHVhbEV4cGFuZFN0YXRlICE9PSB1bmRlZmluZWQgPyBpbmRpdmlkdWFsRXhwYW5kU3RhdGUgOiAoZXhwYW5kQnlEZWZhdWx0ID8/IHRydWUpXG4gICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxRdWVyeVJlc3VsdEl0ZW1cbiAgICAgICAgICAgICAga2V5PXtyZWNvcmRJZH1cbiAgICAgICAgICAgICAgZGF0YT17ZGF0YUl0ZW0gYXMgRmVhdHVyZURhdGFSZWNvcmR9XG4gICAgICAgICAgICAgIGRhdGFTb3VyY2U9e291dHB1dERTfVxuICAgICAgICAgICAgICB3aWRnZXRJZD17d2lkZ2V0SWR9XG4gICAgICAgICAgICAgIHBvcHVwVGVtcGxhdGU9e3BvcHVwVGVtcGxhdGV9XG4gICAgICAgICAgICAgIGRlZmF1bHRQb3B1cFRlbXBsYXRlPXtkZWZhdWx0UG9wdXBUZW1wbGF0ZX1cbiAgICAgICAgICAgICAgZXhwYW5kQnlEZWZhdWx0PXtleHBhbmRCeURlZmF1bHRWYWx1ZX1cbiAgICAgICAgICAgICAgb25DbGljaz17b25TZWxlY3RDaGFuZ2V9XG4gICAgICAgICAgICAgIG9uUmVtb3ZlPXtvblJlbW92ZX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgKVxuICAgICAgICB9KX1cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApXG59XG5cbiIsImV4cG9ydCBkZWZhdWx0IHtcbiAgX3dpZGdldExhYmVsOiAnUXVlcnlTaW1wbGUnLFxuICByZXNldDogJ1Jlc2V0JyxcbiAgc2VhcmNoTGF5ZXI6ICdTZWFyY2ggTGF5ZXInLFxuICBhcHBseTogJ1NlYXJjaCcsXG4gIG5vRGF0YUF2YWlsYWJsZTogJ0Vycm9yIGluIGxvYWRpbmcgZGF0YScsXG4gIG5vUXVlcnlJdGVtOiAnTm8gcXVlcnknLFxuICBuZXdRdWVyeUhpbnQ6ICdBZGQgY29udGVudCBieSBjbGlja2luZyB0aGUgXCJ7bGFiZWx9XCIgYnV0dG9uIG9uIHRoZSBjb25maWd1cmF0aW9uIHBhbmVsJyxcbiAgYXR0cmlidXRlRmlsdGVyOiAnQXR0cmlidXRlIGZpbHRlcicsXG4gIHNwYXRpYWxGaWx0ZXI6ICdTcGF0aWFsIGZpbHRlcicsXG4gIHNwYXRpYWxGaWx0ZXJUeXBlX0N1cnJlbnRNYXBFeHRlbnQ6ICdDdXJyZW50IG1hcCBleHRlbnQnLFxuICBzcGF0aWFsRmlsdGVyVHlwZV9JbnRlcmFjdGl2ZURyYXdNb2RlOiAnRHJhd24gZ3JhcGhpYycsXG4gIHJlc3VsdHM6ICdSZXN1bHRzJyxcbiAgZmVhdHVyZXNEaXNwbGF5ZWQ6ICdGZWF0dXJlcyBkaXNwbGF5ZWQnLFxuICBjbGVhclJlc3VsdDogJ0NsZWFyIHJlc3VsdHMnLFxuICBjaGVja1Jlc3VsdDogJ0NoZWNrIHJlc3VsdHMnLFxuICBtYXBNdXN0QmVWaXNpYmxlOiAnTWFwIG11c3QgYmUgdmlzaWJsZScsXG4gIGNob29zZUZpbHRlclR5cGU6ICdDaG9vc2UgdGhlIGZpbHRlciB0eXBlJyxcbiAgY2hvb3NlR2VvbWV0cnlUeXBlOiAnQ2hvb3NlIHRoZSBnZW9tZXRyeSB0eXBlJyxcbiAgY2xlYXJEcmF3aW5nOiAnQ2xlYXIgdGhlIGdyYXBoaWMgd2hlbiBhcHBseWluZycsXG4gIGZlYXR1cmVGcm9tRHM6ICdTZWxlY3RpbmcgZmVhdHVyZXMgZnJvbSBkYXRhIHNvdXJjZScsXG4gIGZlYXR1cmVGcm9tTWFwOiAnR2VvbWV0cmllcyBmcm9tIGEgbWFwJyxcbiAgY2hvb3NlRmlsdGVyTGF5ZXI6ICdDaG9vc2UgYSBmaWx0ZXIgbGF5ZXInLFxuICBzZWxlY3RlZFJlY29yZHM6ICd7bnVtfSByZWNvcmRzIGFyZSBzZWxlY3RlZCBmb3IgdGhlIGZpbHRlcicsXG4gIHNwYXRpYWxOb3RBdmFpbGFibGU6ICdTcGF0aWFsIGZpbHRlciBpcyBub3QgYXZhaWxhYmxlIGhlcmUuJyxcbiAgc3BhdGlhbE5vdEF2YWlsYWJsZURlc2M6ICdTcGF0aWFsIGZpbHRlciBpcyBub3Qgc3VwcG9ydGVkIGZvciBhIGRhdGEgc291cmNlIHRoYXQgYWxyZWFkeSBjb250YWlucyBhIHNwYXRpYWwgcXVlcnkuJyxcbiAgcHJlY29uZmlndXJlZDogJ1ByZWNvbmZpZ3VyZWQnLFxuICBydW50aW1lOiAnUnVudGltZScsXG4gIHNlbGVjdExvYWRlZDogJ1NlbGVjdCBsb2FkZWQnLFxuICByZXRyaWV2aW5nOiAnUmV0cmlldmluZyBxdWVyeSByZXN1bHRzLi4uJyxcbiAgem9vbVRvU2VsZWN0ZWQ6ICdab29tIHRvIHNlbGVjdGVkJyxcbiAgcXVlcnlUYWI6ICdRdWVyeScsXG4gIHJlc3VsdHNUYWI6ICdSZXN1bHRzJyxcbiAgZXhwYW5kQWxsOiAnRXhwYW5kIGFsbCcsXG4gIGNvbGxhcHNlQWxsOiAnQ29sbGFwc2UgYWxsJyxcbiAgYWRkVG9NYXA6ICdBZGQgdG8gbWFwJyxcbiAgcmVzdWx0c01vZGU6ICdSZXN1bHRzIG1vZGUnLFxuICBjcmVhdGVOZXdSZXN1bHRzOiAnQ3JlYXRlIG5ldyByZXN1bHRzJyxcbiAgYWRkVG9DdXJyZW50UmVzdWx0czogJ0FkZCB0byBjdXJyZW50IHJlc3VsdHMnLFxuICByZW1vdmVGcm9tQ3VycmVudFJlc3VsdHM6ICdSZW1vdmUgZnJvbSBjdXJyZW50IHJlc3VsdHMnLFxuICByZXN1bHRzTW9kZURpc2FibGVkUmVtb3ZlOiAnUmVtb3ZlIGZyb20gY3VycmVudCByZXN1bHRzIChubyBhY2N1bXVsYXRlZCByZXN1bHRzKScsXG4gIHJlc3VsdHNNb2RlRGVzYzogJ0NvbnRyb2xzIGhvdyBxdWVyeSByZXN1bHRzIGFyZSBjb21iaW5lZDpcXG7igKIgTmV3OiBFYWNoIHF1ZXJ5IHJlcGxhY2VzIHByZXZpb3VzIHJlc3VsdHNcXG7igKIgQWRkOiBOZXcgcmVzdWx0cyBhcmUgYWRkZWQgdG8gZXhpc3RpbmcgcmVzdWx0c1xcbuKAoiBSZW1vdmU6IE1hdGNoaW5nIHJlc3VsdHMgYXJlIHJlbW92ZWQgZnJvbSBleGlzdGluZyByZXN1bHRzJyxcbiAgcmVzdWx0c01vZGVOZXc6ICdOZXcnLFxuICByZXN1bHRzTW9kZUFkZDogJ0FkZCcsXG4gIHJlc3VsdHNNb2RlUmVtb3ZlOiAnUmVtb3ZlJ1xufVxuXG5cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHsgUmVhY3QsIFJlYWN0UmVkdXgsIHR5cGUgSU1TdGF0ZSB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IExheW91dEl0ZW1TaXplTW9kZXMgfSBmcm9tICdqaW11LWxheW91dHMvbGF5b3V0LXJ1bnRpbWUnXG5pbXBvcnQgeyBRdWVyeVdpZGdldENvbnRleHQgfSBmcm9tICcuL3dpZGdldC1jb250ZXh0J1xuXG5leHBvcnQgZnVuY3Rpb24gdXNlQXV0b0hlaWdodCAoKSB7XG4gIGNvbnN0IGxheW91dEluZm8gPSBSZWFjdC51c2VDb250ZXh0KFF1ZXJ5V2lkZ2V0Q29udGV4dClcbiAgbGV0IGxheW91dElkXG4gIGxldCBsYXlvdXRJdGVtSWRcbiAgaWYgKGxheW91dEluZm8uaW5jbHVkZXMoJzonKSkge1xuICAgIGNvbnN0IHIgPSBsYXlvdXRJbmZvLnNwbGl0KCc6JylcbiAgICBsYXlvdXRJZCA9IHJbMF1cbiAgICBsYXlvdXRJdGVtSWQgPSByWzFdXG4gIH1cbiAgY29uc3QgaXNBdXRvID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcbiAgICBjb25zdCBsYXlvdXRJdGVtID0gc3RhdGUuYXBwQ29uZmlnLmxheW91dHNbbGF5b3V0SWRdPy5jb250ZW50Py5bbGF5b3V0SXRlbUlkXVxuICAgIHJldHVybiBsYXlvdXRJdGVtPy5zZXR0aW5nPy5hdXRvUHJvcHM/LmhlaWdodCA9PT0gTGF5b3V0SXRlbVNpemVNb2Rlcy5BdXRvXG4gIH0pXG5cbiAgcmV0dXJuIGlzQXV0b1xufVxuXG5cbiIsImltcG9ydCBpY29uV2FybmluZyBmcm9tICdqaW11LWljb25zL3N2Zy9vdXRsaW5lZC9zdWdnZXN0ZWQvd2FybmluZy5zdmcnXG5pbXBvcnQgaWNvbkVycm9yIGZyb20gJ2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL3N1Z2dlc3RlZC9lcnJvci5zdmcnXG5pbXBvcnQgYXJyb3dOYXZCYWNrIGZyb20gJ2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2RpcmVjdGlvbmFsL2Fycm93LWxlZnQuc3ZnJ1xuaW1wb3J0IGFycm93UmlnaHQgZnJvbSAnamltdS1pY29ucy9zdmcvb3V0bGluZWQvZGlyZWN0aW9uYWwvcmlnaHQuc3ZnJ1xuaW1wb3J0IHRvb2xEZWxldGUgZnJvbSAnamltdS1pY29ucy9zdmcvb3V0bGluZWQvZWRpdG9yL3RyYXNoLnN2ZydcbmltcG9ydCBpY29uTW9yZSBmcm9tICdqaW11LWljb25zL3N2Zy9vdXRsaW5lZC9hcHBsaWNhdGlvbi9tb3JlLWhvcml6b250YWwuc3ZnJ1xuXG5leHBvcnQgY29uc3QgZ2V0V2lkZ2V0UnVudGltZURhdGFNYXAgPSAoKSA9PiAoe1xuICBpY29uTWFwOiB7XG4gICAgaWNvblF1ZXJ5OiByZXF1aXJlKCcuLi8uLi9pY29uLnN2ZycpLFxuICAgIGljb25XYXJuaW5nLFxuICAgIGljb25FcnJvcixcbiAgICBhcnJvd05hdkJhY2ssXG4gICAgYXJyb3dSaWdodCxcbiAgICB0b29sRGVsZXRlLFxuICAgIGljb25Nb3JlXG4gIH1cbn0pXG5cblxuXG4iLCJpbXBvcnQgeyBSZWFjdCB9IGZyb20gJ2ppbXUtY29yZSdcblxuZXhwb3J0IGNvbnN0IFF1ZXJ5V2lkZ2V0Q29udGV4dCA9IFJlYWN0LmNyZWF0ZUNvbnRleHQ8c3RyaW5nPihudWxsKVxuXG5cbiIsIi8qKlxuICogU2hhcmVkIHpvb20gdXRpbGl0aWVzIGZvciBRdWVyeVNpbXBsZSB3aWRnZXQuXG4gKiBcbiAqIFByb3ZpZGVzIHB1cmUgZnVuY3Rpb25zIGZvciB6b29taW5nIHRvIGZlYXR1cmUgcmVjb3JkcyB0aGF0IGNhbiBiZSB1c2VkXG4gKiBieSBib3RoIFJlYWN0IGhvb2tzIGFuZCBkYXRhIGFjdGlvbnMuXG4gKi9cblxuaW1wb3J0IHR5cGUgeyBGZWF0dXJlRGF0YVJlY29yZCB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIgfSBmcm9tICd3aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbidcblxuY29uc3QgZGVidWdMb2dnZXIgPSBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyKClcblxuZXhwb3J0IGludGVyZmFjZSBab29tVG9SZWNvcmRzT3B0aW9ucyB7XG4gIHBhZGRpbmc/OiB7XG4gICAgbGVmdDogbnVtYmVyXG4gICAgcmlnaHQ6IG51bWJlclxuICAgIHRvcDogbnVtYmVyXG4gICAgYm90dG9tOiBudW1iZXJcbiAgfVxufVxuXG5jb25zdCBERUZBVUxUX1BBRERJTkcgPSB7XG4gIGxlZnQ6IDUwLFxuICByaWdodDogNTAsXG4gIHRvcDogNTAsXG4gIGJvdHRvbTogNTBcbn1cblxuLyoqXG4gKiBQdXJlIGZ1bmN0aW9uIHRvIHpvb20gdG8gZmVhdHVyZSByZWNvcmRzIHdpdGggcGFkZGluZy5cbiAqIFxuICogRXh0cmFjdHMgZ2VvbWV0cmllcyBmcm9tIHJlY29yZHMsIGNhbGN1bGF0ZXMgZXh0ZW50LCBhbmQgem9vbXMgdGhlIG1hcCB2aWV3XG4gKiB1c2luZyBtYXBWaWV3LmdvVG8oKSB3aXRoIGNvbmZpZ3VyYWJsZSBwYWRkaW5nLiBIYW5kbGVzIGJvdGggc2luZ2xlIGFuZFxuICogbXVsdGlwbGUgZ2VvbWV0cmllcyBieSBjYWxjdWxhdGluZyB1bmlvbiBleHRlbnQgd2hlbiBuZWVkZWQuXG4gKiBcbiAqIEBwYXJhbSBtYXBWaWV3IC0gVGhlIG1hcCB2aWV3IHRvIHpvb21cbiAqIEBwYXJhbSByZWNvcmRzIC0gQXJyYXkgb2YgZmVhdHVyZSBkYXRhIHJlY29yZHMgdG8gem9vbSB0b1xuICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCB6b29tIG9wdGlvbnMgaW5jbHVkaW5nIHBhZGRpbmdcbiAqIEByZXR1cm5zIFByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIHpvb20gY29tcGxldGVzXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB6b29tVG9SZWNvcmRzKFxuICBtYXBWaWV3OiBfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXcsXG4gIHJlY29yZHM6IEZlYXR1cmVEYXRhUmVjb3JkW10sXG4gIG9wdGlvbnM/OiBab29tVG9SZWNvcmRzT3B0aW9uc1xuKTogUHJvbWlzZTx2b2lkPiB7XG4gIGlmICghbWFwVmlldyB8fCAhcmVjb3JkcyB8fCByZWNvcmRzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVyblxuICB9XG5cbiAgY29uc3QgcGFkZGluZyA9IG9wdGlvbnM/LnBhZGRpbmcgfHwgREVGQVVMVF9QQURESU5HXG5cbiAgdHJ5IHtcbiAgICAvLyBFeHRyYWN0IGdlb21ldHJpZXMgZnJvbSByZWNvcmRzXG4gICAgY29uc3QgZ2VvbWV0cmllcyA9IHJlY29yZHNcbiAgICAgIC5tYXAocmVjb3JkID0+IHJlY29yZC5nZXRKU0FQSUdlb21ldHJ5KCkpXG4gICAgICAuZmlsdGVyKGdlb20gPT4gZ2VvbSAhPSBudWxsKVxuICAgIFxuICAgIGlmIChnZW9tZXRyaWVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgbGV0IGV4dGVudDogX19lc3JpLkV4dGVudCB8IG51bGwgPSBudWxsXG4gICAgXG4gICAgaWYgKGdlb21ldHJpZXMubGVuZ3RoID09PSAxKSB7XG4gICAgICAvLyBTaW5nbGUgZ2VvbWV0cnkgLSBnZXQgaXRzIGV4dGVudFxuICAgICAgZXh0ZW50ID0gZ2VvbWV0cmllc1swXS5leHRlbnQgfHwgKGdlb21ldHJpZXNbMF0gYXMgYW55KS5nZXRFeHRlbnQ/LigpXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIE11bHRpcGxlIGdlb21ldHJpZXMgLSBjYWxjdWxhdGUgdW5pb24gZXh0ZW50XG4gICAgICBjb25zdCBleHRlbnRzID0gZ2VvbWV0cmllc1xuICAgICAgICAubWFwKGdlb20gPT4gZ2VvbS5leHRlbnQgfHwgKGdlb20gYXMgYW55KS5nZXRFeHRlbnQ/LigpKVxuICAgICAgICAuZmlsdGVyKGUgPT4gZSAhPSBudWxsKVxuICAgICAgXG4gICAgICBpZiAoZXh0ZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGV4dGVudCA9IGV4dGVudHNbMF0uY2xvbmUoKVxuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IGV4dGVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBleHRlbnQgPSBleHRlbnQudW5pb24oZXh0ZW50c1tpXSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBpZiAoZXh0ZW50KSB7XG4gICAgICBhd2FpdCBtYXBWaWV3LmdvVG8oZXh0ZW50LCB7IHBhZGRpbmcgfSlcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdaT09NJywge1xuICAgICAgZXZlbnQ6ICd6b29tLWdvVG8tZXJyb3InLFxuICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSxcbiAgICAgIHJlY29yZHNDb3VudDogcmVjb3Jkcy5sZW5ndGhcbiAgICB9KVxuICAgIHRocm93IGVycm9yXG4gIH1cbn1cblxuXG5cblxuIiwiaW1wb3J0IHsgQmFzZVZlcnNpb25NYW5hZ2VyIH0gZnJvbSAnamltdS1jb3JlJ1xuXG5jbGFzcyBWZXJzaW9uTWFuYWdlciBleHRlbmRzIEJhc2VWZXJzaW9uTWFuYWdlciB7XG4gIHZlcnNpb25zID0gW3tcbiAgICB2ZXJzaW9uOiAnMS4wLjAnLFxuICAgIGRlc2NyaXB0aW9uOiAnVGhlIGZpcnN0IHZlcnNpb24uJyxcbiAgICB1cGdyYWRlcjogKG9sZENvbmZpZykgPT4ge1xuICAgICAgcmV0dXJuIG9sZENvbmZpZ1xuICAgIH1cbiAgfV1cbn1cblxuZXhwb3J0IGNvbnN0IHZlcnNpb25NYW5hZ2VyID0gbmV3IFZlcnNpb25NYW5hZ2VyKClcblxuXG5cbiIsIi8qKlxuICogV2lkZ2V0IHZlcnNpb24gbnVtYmVyLlxuICogQmFzZSB2ZXJzaW9uIG1hdGNoZXMgRXhwZXJpZW5jZSBCdWlsZGVyIHZlcnNpb24gKDEuMTkuMCkuXG4gKiBSZWxlYXNlIG51bWJlciBpbmNyZW1lbnRzIG9uIG1ham9yIGNoYW5nZXMgKDAwMSwgMDAyLCAwMDMsIC4uLikuXG4gKiBNaW5vciB2ZXJzaW9uIGluY3JlbWVudHMgb24gc21hbGxlciBmaXhlcyBiZXR3ZWVuIG1ham9yIHJlbGVhc2VzIChyMDE1LjEsIHIwMTUuMiwgLi4uKS5cbiAqIFxuICogVG8gaW5jcmVtZW50OlxuICogLSBNYWpvciBjaGFuZ2U6IFVwZGF0ZSBSRUxFQVNFX05VTUJFUiAoZS5nLiwgMDE1IC0+IDAxNikgYW5kIHJlc2V0IE1JTk9SX1ZFUlNJT04gdG8gMFxuICogLSBNaW5vciBmaXg6IEluY3JlbWVudCBNSU5PUl9WRVJTSU9OIChlLmcuLCAxIC0+IDIpIHdoaWxlIGtlZXBpbmcgc2FtZSBSRUxFQVNFX05VTUJFUlxuICovXG5jb25zdCBCQVNFX1ZFUlNJT04gPSAnMS4xOS4wJ1xuY29uc3QgUkVMRUFTRV9OVU1CRVIgPSAnMDE4JyAvLyBJbmNyZW1lbnQgb24gbWFqb3IgY2hhbmdlcyAoMDAxLCAwMDIsIDAwMywgLi4uKVxuY29uc3QgTUlOT1JfVkVSU0lPTiA9ICc1NicgLy8gSW5jcmVtZW50IG9uIG1pbm9yIGZpeGVzIGJldHdlZW4gbWFqb3IgcmVsZWFzZXMgKDEsIDIsIDMsIC4uLilcblxuZXhwb3J0IGNvbnN0IFdJREdFVF9WRVJTSU9OID0gTUlOT1JfVkVSU0lPTiAmJiBOdW1iZXIoTUlOT1JfVkVSU0lPTikgPiAwXG4gID8gYCR7QkFTRV9WRVJTSU9OfS1yJHtSRUxFQVNFX05VTUJFUn0uJHtNSU5PUl9WRVJTSU9OfWBcbiAgOiBgJHtCQVNFX1ZFUlNJT059LXIke1JFTEVBU0VfTlVNQkVSfWBcblxuIiwiLyoqXG4gKiBTaGFyZWQgY29tbW9uIHV0aWxpdGllcyBhbmQgY29tcG9uZW50cyBmb3IgRXhwZXJpZW5jZSBCdWlsZGVyIHdpZGdldHNcbiAqIFxuICogVGhpcyBtb2R1bGUgZXhwb3J0cyBjb21tb24gZnVuY3Rpb25hbGl0eSB0aGF0IGNhbiBiZSBzaGFyZWQgYmV0d2VlblxuICogcXVlcnktc2ltcGxlLCBoZWxwZXItc2ltcGxlLCBhbmQgb3RoZXIgY3VzdG9tIHdpZGdldHMuXG4gKiBcbiAqIFRoaXMgaXMgdGhlIGVudHJ5IHBvaW50IGZvciAnd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24nXG4gKi9cblxuZXhwb3J0ICogZnJvbSAnLi9jb21tb24vY29tbW9uLWNvbXBvbmVudHMnXG5leHBvcnQgKiBmcm9tICcuL2NvbW1vbi91dGlscydcbmV4cG9ydCAqIGZyb20gJy4vY29tbW9uL3VzZS1kcy1leGlzdHMnXG5leHBvcnQgKiBmcm9tICcuL2NvbW1vbi9kYXRhLXNvdXJjZS10aXAnXG5leHBvcnQgKiBmcm9tICcuL2NvbW1vbi9kZWJ1Zy1sb2dnZXInXG5cblxuXG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7IFJlYWN0LCBqc3gsIGNzcyB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IEJ1dHRvbiwgTW9kYWwsIE1vZGFsQm9keSwgTW9kYWxGb290ZXIsIFBhbmVsSGVhZGVyLCBJY29uLCB0eXBlIFRoZW1lUHJvcHMgfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHsgd2l0aFRoZW1lIH0gZnJvbSAnamltdS10aGVtZSdcbmltcG9ydCBpY29uRXJyb3IgZnJvbSAnamltdS1pY29ucy9zdmcvb3V0bGluZWQvc3VnZ2VzdGVkL2Vycm9yLnN2ZydcbmNvbnN0IHsgdXNlU3RhdGUgfSA9IFJlYWN0XG5cbi8qKlxuICogQSBzaW1wbGUgRnVuY3Rpb25hbCBDb21wb25lbnQgc3RvcmluZyBzb21lIFN0YXRlcyB0aGF0IGFyZSBjb21tb25seSB1c2VkXG4gKi9cbmV4cG9ydCBjb25zdCBTdGF0ZUhvbGRlciA9IChwcm9wcykgPT4ge1xuICBjb25zdCB7IGluaXRTdGF0ZSA9IHt9LCBjaGlsZHJlbiB9ID0gcHJvcHNcbiAgY29uc3QgZGVmYXVsdFN0YXRlTWFwID0ge1xuICAgIHZpc2libGU6IHRydWUsXG4gICAgcmVmQ29udGFpbmVyOiBudWxsXG4gIH1cbiAgY29uc3QgdXNlU3RhdGVNYXAgPSB7XG4gICAgdmlzaWJsZTogdXNlU3RhdGUoJ3Zpc2libGUnIGluIGluaXRTdGF0ZSA/IGluaXRTdGF0ZS52aXNpYmxlIDogZGVmYXVsdFN0YXRlTWFwLnZpc2libGUpLFxuICAgIHJlZkNvbnRhaW5lcjogdXNlU3RhdGUoJ3JlZkNvbnRhaW5lcicgaW4gaW5pdFN0YXRlID8gaW5pdFN0YXRlLnJlZkNvbnRhaW5lciA6IGRlZmF1bHRTdGF0ZU1hcC5yZWZDb250YWluZXIpLFxuICAgIGN1c3RvbURhdGE6IHVzZVN0YXRlKHsgLi4uaW5pdFN0YXRlLmN1c3RvbURhdGEgfSlcbiAgfVxuICByZXR1cm4gPFJlYWN0LkZyYWdtZW50PntjaGlsZHJlbih1c2VTdGF0ZU1hcCl9PC9SZWFjdC5GcmFnbWVudD5cbn1cblxuZXhwb3J0IGludGVyZmFjZSBEaWFsb2dQYW5lbFByb3BzIHtcbiAgcGFuZWxWaXNpYmxlOiBib29sZWFuXG4gIHNldFBhbmVsVmlzaWJsZTogKHZpc2libGU6IGJvb2xlYW4pID0+IHZvaWRcbiAgZ2V0STE4bk1lc3NhZ2U6IChpZDogc3RyaW5nKSA9PiBhbnlcbiAgaXNNb2RhbD86IGJvb2xlYW5cbiAgdGl0bGU/OiBhbnlcbiAgYm9keUNvbnRlbnQ/OiBhbnlcbiAgaGFzSGVhZGVyPzogYm9vbGVhblxuICBoYXNGb290ZXI/OiBib29sZWFuXG59XG5cbi8qKlxuICogQSBkaWFsb2cgcG9wdXBcbiAqL1xuZXhwb3J0IGNvbnN0IERpYWxvZ1BhbmVsID0gd2l0aFRoZW1lKChwcm9wczogRGlhbG9nUGFuZWxQcm9wcyAmIFRoZW1lUHJvcHMpID0+IHtcbiAgY29uc3QgeyB0aGVtZSwgcGFuZWxWaXNpYmxlLCBzZXRQYW5lbFZpc2libGUsIGdldEkxOG5NZXNzYWdlLCBpc01vZGFsID0gdHJ1ZSwgdGl0bGUgPSBnZXRJMThuTWVzc2FnZSgncXVlcnlNZXNzYWdlJyksIGJvZHlDb250ZW50ID0gJycsIGhhc0hlYWRlciA9IHRydWUsIGhhc0Zvb3RlciA9IHRydWUgfSA9IHByb3BzXG4gIGNvbnN0IHRvZ2dsZSA9ICgpID0+IHsgc2V0UGFuZWxWaXNpYmxlKGZhbHNlKSB9XG4gIGNvbnN0IGdldENvbnRlbnQgPSAoKSA9PiA8UmVhY3QuRnJhZ21lbnQ+XG4gICAge1xuICAgICAgaGFzSGVhZGVyICYmXG4gICAgICAgIDxQYW5lbEhlYWRlciBjbGFzc05hbWU9J3B5LTInIHRpdGxlPXt0aXRsZX0gb25DbG9zZT17dG9nZ2xlfSAvPlxuICAgIH1cbiAgICA8TW9kYWxCb2R5Pntib2R5Q29udGVudH08L01vZGFsQm9keT5cbiAgICB7XG4gICAgICBoYXNGb290ZXIgJiZcbiAgICAgICAgPE1vZGFsRm9vdGVyPlxuICAgICAgICAgIDxCdXR0b24gb25DbGljaz17dG9nZ2xlfT57Z2V0STE4bk1lc3NhZ2UoJ29rJyl9PC9CdXR0b24+XG4gICAgICAgIDwvTW9kYWxGb290ZXI+XG4gICAgfVxuICA8L1JlYWN0LkZyYWdtZW50PlxuICBjb25zdCBnZW5lcmFsQ2xhc3NOYW1lID0gJ3VpLXVuaXQtZGlhbG9nLXBhbmVsJ1xuICBjb25zdCByZW5kZXJNb2RhbENvbnRlbnQgPSAoKSA9PiB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxNb2RhbCBjbGFzc05hbWU9e2dlbmVyYWxDbGFzc05hbWV9IGlzT3Blbj17cGFuZWxWaXNpYmxlfSB0b2dnbGU9e3RvZ2dsZX0gYmFja2Ryb3A9J3N0YXRpYyc+XG4gICAgICAgIHtnZXRDb250ZW50KCl9XG4gICAgICA8L01vZGFsPlxuICAgIClcbiAgfVxuICBjb25zdCByZW5kZXJOb25Nb2RhbENvbnRlbnQgPSAoKSA9PiB7XG4gICAgY29uc3QgZ2V0U3R5bGUgPSAoKSA9PiBjc3NgXG4gICAgICAmLnVpLXVuaXQtZGlhbG9nLXBhbmVsLm1vZGFsLWRpYWxvZyB7XG4gICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIC5tb2RhbC1jb250ZW50IHtcbiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAke3RoZW1lLnJlZi5wYWxldHRlLm5ldXRyYWxbNjAwXX07XG4gICAgICAgICAgY29sb3I6ICR7dGhlbWUucmVmLnBhbGV0dGUuYmxhY2t9O1xuICAgICAgICAgIGZvbnQtc2l6ZTogLjc1cmVtO1xuICAgICAgICAgIGZvbnQtd2VpZ2h0OiA0MDA7XG4gICAgICAgICAgYm9yZGVyOiBub25lO1xuICAgICAgICAgIC5wYW5lbC1oZWFkZXIge1xuICAgICAgICAgICAgZm9udC1zaXplOiAuODEyNXJlbTtcbiAgICAgICAgICAgIHBhZGRpbmc6IC42MjVyZW07XG4gICAgICAgICAgfVxuICAgICAgICAgIC5tb2RhbC1ib2R5IHtcbiAgICAgICAgICAgIHBhZGRpbmc6IDAgLjYyNXJlbSAuNzVyZW07XG4gICAgICAgICAgICB3aGl0ZS1zcGFjZTogbm9ybWFsO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIGBcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9e2Ake2dlbmVyYWxDbGFzc05hbWV9IG1vZGFsLWRpYWxvZyAke3BhbmVsVmlzaWJsZSA/ICcnIDogJ2NvbGxhcHNlJ31gfSBjc3M9e2dldFN0eWxlKCl9PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nbW9kYWwtY29udGVudCc+XG4gICAgICAgICAge2dldENvbnRlbnQoKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICApXG4gIH1cbiAgcmV0dXJuIGlzTW9kYWwgPyByZW5kZXJNb2RhbENvbnRlbnQoKSA6IHJlbmRlck5vbk1vZGFsQ29udGVudCgpXG59KVxuXG5leHBvcnQgZW51bSBFbnRpdHlTdGF0dXNUeXBlIHtcbiAgTm9uZSA9ICcnLFxuICBJbml0ID0gJ2luaXQnLFxuICBMb2FkaW5nID0gJ2xvYWRpbmcnLFxuICBMb2FkZWQgPSAnbG9hZGVkJyxcbiAgV2FybmluZyA9ICd3YXJuaW5nJyxcbiAgRXJyb3IgPSAnZXJyb3InLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFN0YXR1c0luZGljYXRvclByb3BzIHtcbiAgY2xhc3NOYW1lPzogc3RyaW5nXG4gIHN0YXR1c1R5cGU/OiBFbnRpdHlTdGF0dXNUeXBlXG4gIHRpdGxlPzogc3RyaW5nXG59XG5cbi8qKlxuICogQW4gYW5pbWF0YWJsZSBpY29uIHJlcHJlc2VudGluZyBzdGF0dXNcbiAqL1xuZXhwb3J0IGNvbnN0IFN0YXR1c0luZGljYXRvciA9IHdpdGhUaGVtZSgocHJvcHM6IFN0YXR1c0luZGljYXRvclByb3BzICYgVGhlbWVQcm9wcykgPT4ge1xuICBjb25zdCB7IHRoZW1lLCBjbGFzc05hbWUsIHRpdGxlLCBzdGF0dXNUeXBlIH0gPSBwcm9wc1xuICBjb25zdCBnZXRTdHlsZSA9ICgpID0+IGNzc2BcbiAgICAmLnVpLXVuaXQtc3RhdHVzLWluZGljYXRvciB7XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgJi51aS11bml0LXN0YXR1cy1pbmRpY2F0b3Jfc3RhdHVzLXR5cGUtbG9hZGluZyB7XG4gICAgICAgICY6YmVmb3JlIHtcbiAgICAgICAgICBAa2V5ZnJhbWVzIGxvYWRpbmcge1xuICAgICAgICAgICAgMCUge3RyYW5zZm9ybTogcm90YXRlKDBkZWcpOyB9O1xuICAgICAgICAgICAgMTAwJSB7dHJhbnNmb3JtOiByb3RhdGUoMzYwZGVnKX07XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnRlbnQ6ICcnO1xuICAgICAgICAgIHdpZHRoOiAxcmVtO1xuICAgICAgICAgIGhlaWdodDogMXJlbTtcbiAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAke3RoZW1lPy5yZWYucGFsZXR0ZT8ubmV1dHJhbD8uWzUwMF19O1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTtcbiAgICAgICAgICBib3JkZXItdG9wOiAxcHggc29saWQgJHt0aGVtZT8uc3lzLmNvbG9yPy5wcmltYXJ5Py5tYWlufTtcbiAgICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICAgICAgICAgIGFuaW1hdGlvbjogbG9hZGluZyAycyBpbmZpbml0ZSBsaW5lYXI7XG4gICAgICAgICAgbWFyZ2luLXJpZ2h0OiAuMjVyZW07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIGBcbiAgcmV0dXJuIChcbiAgICBzdGF0dXNUeXBlICYmXG4gICAgICA8ZGl2IGNsYXNzTmFtZT17YCR7Y2xhc3NOYW1lID8/ICcnfSB1aS11bml0LXN0YXR1cy1pbmRpY2F0b3IgdWktdW5pdC1zdGF0dXMtaW5kaWNhdG9yX3N0YXR1cy10eXBlLSR7c3RhdHVzVHlwZX1gfSB0aXRsZT17dGl0bGV9IGNzcz17Z2V0U3R5bGUoKX0gLz5cbiAgKVxufSlcblxuZXhwb3J0IGludGVyZmFjZSBFcnJvck1lc3NhZ2VQcm9wcyB7XG4gIGVycm9yOiBzdHJpbmcgfCBudWxsXG4gIGNsYXNzTmFtZT86IHN0cmluZ1xuICBvbkRpc21pc3M/OiAoKSA9PiB2b2lkXG59XG5cbi8qKlxuICogU2ltcGxlIGVycm9yIG1lc3NhZ2UgY29tcG9uZW50IGZvciBkaXNwbGF5aW5nIHVzZXItZmFjaW5nIGVycm9ycy5cbiAqIFVzZSBEYXRhU291cmNlVGlwIGZvciBkYXRhIHNvdXJjZS1yZWxhdGVkIGVycm9ycy5cbiAqL1xuZXhwb3J0IGNvbnN0IEVycm9yTWVzc2FnZSA9IChwcm9wczogRXJyb3JNZXNzYWdlUHJvcHMpID0+IHtcbiAgY29uc3QgeyBlcnJvciwgY2xhc3NOYW1lID0gJycsIG9uRGlzbWlzcyB9ID0gcHJvcHNcbiAgXG4gIGlmICghZXJyb3IpIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG4gIFxuICBjb25zdCBlcnJvclN0eWxlID0gY3NzYFxuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBwYWRkaW5nOiAwLjVyZW07XG4gICAgbWFyZ2luOiAwLjVyZW0gMDtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1zeXMtY29sb3ItZXJyb3ItbGlnaHQpO1xuICAgIGNvbG9yOiB2YXIoLS1zeXMtY29sb3ItZXJyb3ItZGFyayk7XG4gICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgIGZvbnQtc2l6ZTogMC44NzVyZW07XG4gICAgZ2FwOiAwLjVyZW07XG4gICAgXG4gICAgLmVycm9yLWljb24ge1xuICAgICAgZmxleC1zaHJpbms6IDA7XG4gICAgfVxuICAgIFxuICAgIC5lcnJvci10ZXh0IHtcbiAgICAgIGZsZXg6IDE7XG4gICAgfVxuICAgIFxuICAgIC5lcnJvci1kaXNtaXNzIHtcbiAgICAgIGZsZXgtc2hyaW5rOiAwO1xuICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgcGFkZGluZzogMC4yNXJlbTtcbiAgICAgICY6aG92ZXIge1xuICAgICAgICBvcGFjaXR5OiAwLjc7XG4gICAgICB9XG4gICAgfVxuICBgXG4gIFxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPXtgZXJyb3ItbWVzc2FnZSAke2NsYXNzTmFtZX1gfSBjc3M9e2Vycm9yU3R5bGV9IHJvbGU9XCJhbGVydFwiPlxuICAgICAgPEljb24gaWNvbj17aWNvbkVycm9yfSBjbGFzc05hbWU9XCJlcnJvci1pY29uXCIgc2l6ZT1cInNtXCIgLz5cbiAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImVycm9yLXRleHRcIj57ZXJyb3J9PC9zcGFuPlxuICAgICAge29uRGlzbWlzcyAmJiAoXG4gICAgICAgIDxCdXR0b24gXG4gICAgICAgICAgc2l6ZT1cInNtXCIgXG4gICAgICAgICAgdHlwZT1cInRlcnRpYXJ5XCIgXG4gICAgICAgICAgaWNvbiBcbiAgICAgICAgICBvbkNsaWNrPXtvbkRpc21pc3N9XG4gICAgICAgICAgY2xhc3NOYW1lPVwiZXJyb3ItZGlzbWlzc1wiXG4gICAgICAgICAgYXJpYS1sYWJlbD1cIkRpc21pc3MgZXJyb3JcIlxuICAgICAgICA+XG4gICAgICAgICAgPEljb24gaWNvbj17cmVxdWlyZSgnamltdS1pY29ucy9zdmcvb3V0bGluZWQvZWRpdG9yL2Nsb3NlLnN2ZycpLmRlZmF1bHR9IHNpemU9XCJzbVwiIC8+XG4gICAgICAgIDwvQnV0dG9uPlxuICAgICAgKX1cbiAgICA8L2Rpdj5cbiAgKVxufVxuXG5cblxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQge1xuICBSZWFjdCxcbiAganN4LFxuICBnZXRBcHBTdG9yZSxcbiAgRGF0YVNvdXJjZUNvbXBvbmVudCxcbiAgdHlwZSBEYXRhU291cmNlLFxuICB0eXBlIFVzZURhdGFTb3VyY2UsXG4gIGFwcENvbmZpZ1V0aWxzLFxuICB0eXBlIElNRGF0YVNvdXJjZUluZm8sXG4gIERhdGFTb3VyY2VTdGF0dXMsXG4gIHR5cGUgSW1tdXRhYmxlT2JqZWN0LFxuICBob29rc1xufSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBJY29uLCBUb29sdGlwLCBCdXR0b24sIGRlZmF1bHRNZXNzYWdlcyB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQgeyBFbnRpdHlTdGF0dXNUeXBlLCBTdGF0dXNJbmRpY2F0b3IgfSBmcm9tICcuL2NvbW1vbi1jb21wb25lbnRzJ1xuaW1wb3J0IGljb25XYXJuaW5nIGZyb20gJ2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL3N1Z2dlc3RlZC93YXJuaW5nLnN2ZydcbmltcG9ydCBpY29uRXJyb3IgZnJvbSAnamltdS1pY29ucy9zdmcvb3V0bGluZWQvc3VnZ2VzdGVkL2Vycm9yLnN2ZydcbmltcG9ydCB7IHVzZURhdGFTb3VyY2VFeGlzdHMgfSBmcm9tICcuL3VzZS1kcy1leGlzdHMnXG5cbmludGVyZmFjZSBDb250ZW50UHJvcHMge1xuICB3aWRnZXRJZDogc3RyaW5nXG4gIHVzZURhdGFTb3VyY2U6IEltbXV0YWJsZU9iamVjdDxVc2VEYXRhU291cmNlPlxuICBvblN0YXR1c0NoYW5nZT86IChlbmFibGVkOiBib29sZWFuKSA9PiB2b2lkXG4gIG9uRGF0YVNvdXJjZUNyZWF0ZWQ/OiAoZHM6IERhdGFTb3VyY2UpID0+IHZvaWRcbiAgc2hvd01lc3NhZ2U/OiBib29sZWFuXG59XG5cbi8qKlxuICogU2hvdyBpY29uIGFuZCBtZXNzYWdlIGlmIHRoZSBkYXRhIHNvdXJjZSBkb2Vzbid0IHdvcmsuXG4gKiBAcGFyYW0gcHJvcHNcbiAqIEByZXR1cm5zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBEYXRhU291cmNlVGlwIChwcm9wczogQ29udGVudFByb3BzKSB7XG4gIGNvbnN0IHsgd2lkZ2V0SWQsIHVzZURhdGFTb3VyY2UsIG9uU3RhdHVzQ2hhbmdlLCBvbkRhdGFTb3VyY2VDcmVhdGVkLCBzaG93TWVzc2FnZSA9IGZhbHNlIH0gPSBwcm9wc1xuICBjb25zdCBnZXRJMThuTWVzc2FnZSA9IGhvb2tzLnVzZVRyYW5zbGF0aW9uKGRlZmF1bHRNZXNzYWdlcylcbiAgY29uc3QgZHNFeGlzdHM6IGJvb2xlYW4gPSB1c2VEYXRhU291cmNlRXhpc3RzKHsgd2lkZ2V0SWQsIHVzZURhdGFTb3VyY2VJZDogdXNlRGF0YVNvdXJjZS5kYXRhU291cmNlSWQgfSlcbiAgY29uc3QgW2RzU3RhdHVzLCBzZXREc1N0YXR1c10gPSBSZWFjdC51c2VTdGF0ZTwnZXJyb3InIHwgJ3dhcm5pbmcnIHwgJ2NyZWF0aW5nJz4obnVsbClcbiAgY29uc3QgW2RhdGFTb3VyY2UsIHNldERhdGFTb3VyY2VdID0gUmVhY3QudXNlU3RhdGU8RGF0YVNvdXJjZT4obnVsbClcblxuICBjb25zdCBoYW5kbGVEc0luZm9DaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjaygoaW5mbzogSU1EYXRhU291cmNlSW5mbykgPT4ge1xuICAgIGlmIChpbmZvKSB7XG4gICAgICBjb25zdCB7IHN0YXR1cywgaW5zdGFuY2VTdGF0dXMgfSA9IGluZm9cbiAgICAgIGlmIChpbnN0YW5jZVN0YXR1cyA9PT0gRGF0YVNvdXJjZVN0YXR1cy5Ob3RDcmVhdGVkKSB7XG4gICAgICAgIHNldERzU3RhdHVzKCdjcmVhdGluZycpXG4gICAgICAgIG9uU3RhdHVzQ2hhbmdlPy4oZmFsc2UpXG4gICAgICB9IGVsc2UgaWYgKGluc3RhbmNlU3RhdHVzID09PSBEYXRhU291cmNlU3RhdHVzLkNyZWF0ZUVycm9yIHx8IHN0YXR1cyA9PT0gRGF0YVNvdXJjZVN0YXR1cy5Mb2FkRXJyb3IpIHtcbiAgICAgICAgc2V0RHNTdGF0dXMoJ2Vycm9yJylcbiAgICAgICAgb25TdGF0dXNDaGFuZ2U/LihmYWxzZSlcbiAgICAgIH0gZWxzZSBpZiAoc3RhdHVzID09PSBEYXRhU291cmNlU3RhdHVzLk5vdFJlYWR5KSB7XG4gICAgICAgIHNldERzU3RhdHVzKCd3YXJuaW5nJylcbiAgICAgICAgb25TdGF0dXNDaGFuZ2U/LihmYWxzZSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNldERzU3RhdHVzKG51bGwpXG4gICAgICAgIG9uU3RhdHVzQ2hhbmdlPy4odHJ1ZSlcbiAgICAgIH1cbiAgICB9XG4gIH0sIFtvblN0YXR1c0NoYW5nZV0pXG5cbiAgY29uc3QgaGFuZGxlRHNDcmVhdGVkID0gUmVhY3QudXNlQ2FsbGJhY2soKGRzOiBEYXRhU291cmNlKSA9PiB7XG4gICAgc2V0RGF0YVNvdXJjZShkcylcbiAgICBvbkRhdGFTb3VyY2VDcmVhdGVkPy4oZHMpXG4gIH0sIFtvbkRhdGFTb3VyY2VDcmVhdGVkXSlcblxuICBjb25zdCBoYW5kbGVEc0NyZWF0ZUZhaWxlZCA9IFJlYWN0LnVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBzZXREYXRhU291cmNlKG51bGwpXG4gICAgc2V0RHNTdGF0dXMoJ2Vycm9yJylcbiAgICBvblN0YXR1c0NoYW5nZT8uKGZhbHNlKVxuICB9LCBbb25TdGF0dXNDaGFuZ2VdKVxuXG4gIGxldCBzdGF0dXNJY29uXG4gIGxldCBzdGF0dXNNc2dcbiAgbGV0IGNvbG9yXG4gIGlmIChkc1N0YXR1cyA9PT0gJ2NyZWF0aW5nJykge1xuICAgIHN0YXR1c0ljb24gPSBpY29uRXJyb3JcbiAgICBzdGF0dXNNc2cgPSBnZXRJMThuTWVzc2FnZSgnbG9hZGluZycpXG4gIH0gZWxzZSBpZiAoIWRzRXhpc3RzIHx8IGRzU3RhdHVzID09PSAnZXJyb3InKSB7XG4gICAgc3RhdHVzSWNvbiA9IGljb25FcnJvclxuICAgIHN0YXR1c01zZyA9IGdldEkxOG5NZXNzYWdlKCdkYXRhU291cmNlQ3JlYXRlRXJyb3InKVxuICAgIGNvbG9yID0gJ3ZhcigtLXN5cy1jb2xvci1lcnJvci1tYWluKSdcbiAgfSBlbHNlIGlmIChkc1N0YXR1cyA9PT0gJ3dhcm5pbmcnKSB7XG4gICAgbGV0IGxhYmVsID0gJydcbiAgICBjb25zdCBvcmlnaW5EcyA9IGRhdGFTb3VyY2U/LmdldE9yaWdpbkRhdGFTb3VyY2VzKCk/LlswXVxuICAgIGlmIChvcmlnaW5Ecykge1xuICAgICAgbGFiZWwgPSBvcmlnaW5Ecy5nZXRMYWJlbCgpIHx8IG9yaWdpbkRzLmdldERhdGFTb3VyY2VKc29uKCkuc291cmNlTGFiZWxcbiAgICB9IGVsc2UgaWYgKGRhdGFTb3VyY2UpIHtcbiAgICAgIGxhYmVsID0gZGF0YVNvdXJjZS5nZXRMYWJlbCgpIHx8IGRhdGFTb3VyY2UuZ2V0RGF0YVNvdXJjZUpzb24oKS5sYWJlbFxuICAgIH1cblxuICAgIGNvbnN0IHdpZGdldElkID0gYXBwQ29uZmlnVXRpbHMuZ2V0V2lkZ2V0SWRCeU91dHB1dERhdGFTb3VyY2UodXNlRGF0YVNvdXJjZSlcbiAgICBjb25zdCBhcHBTdGF0ZSA9IHdpbmRvdz8uamltdUNvbmZpZz8uaXNCdWlsZGVyXG4gICAgICA/IGdldEFwcFN0b3JlKCkuZ2V0U3RhdGUoKS5hcHBTdGF0ZUluQnVpbGRlclxuICAgICAgOiBnZXRBcHBTdG9yZSgpLmdldFN0YXRlKClcbiAgICBjb25zdCB3aWRnZXRMYWJlbCA9IGFwcFN0YXRlLmFwcENvbmZpZy53aWRnZXRzW3dpZGdldElkXT8ubGFiZWxcblxuICAgIGNvbG9yID0gJ3ZhcigtLXN5cy1jb2xvci13YXJuaW5nLWRhcmspJ1xuICAgIHN0YXR1c0ljb24gPSBpY29uV2FybmluZ1xuICAgIHN0YXR1c01zZyA9IGdldEkxOG5NZXNzYWdlKCdvdXRwdXREYXRhSXNOb3RHZW5lcmF0ZWQnLCB7XG4gICAgICBvdXRwdXREc0xhYmVsOiBsYWJlbCA/PyAnJyxcbiAgICAgIHNvdXJjZVdpZGdldE5hbWU6IHdpZGdldExhYmVsID8/ICcnXG4gICAgfSlcbiAgfVxuICByZXR1cm4gKFxuICAgIDxSZWFjdC5GcmFnbWVudD5cbiAgICAgIHtkc0V4aXN0cyAmJiAoXG4gICAgICAgIDxEYXRhU291cmNlQ29tcG9uZW50XG4gICAgICAgICAgdXNlRGF0YVNvdXJjZT17dXNlRGF0YVNvdXJjZX1cbiAgICAgICAgICBvbkRhdGFTb3VyY2VJbmZvQ2hhbmdlPXtoYW5kbGVEc0luZm9DaGFuZ2V9XG4gICAgICAgICAgb25EYXRhU291cmNlQ3JlYXRlZD17aGFuZGxlRHNDcmVhdGVkfVxuICAgICAgICAgIG9uQ3JlYXRlRGF0YVNvdXJjZUZhaWxlZD17aGFuZGxlRHNDcmVhdGVGYWlsZWR9XG4gICAgICAgIC8+XG4gICAgICApfVxuICAgICAge2RzU3RhdHVzID09PSAnY3JlYXRpbmcnICYmIDxTdGF0dXNJbmRpY2F0b3Igc3RhdHVzVHlwZT17RW50aXR5U3RhdHVzVHlwZS5Mb2FkaW5nfSB0aXRsZT17c3RhdHVzTXNnfSAvPn1cbiAgICAgIHsoIWRzRXhpc3RzIHx8IGRzU3RhdHVzID09PSAnZXJyb3InIHx8IGRzU3RhdHVzID09PSAnd2FybmluZycpICYmIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J2QtZmxleCBhbGlnbi1pdGVtcy1jZW50ZXInPlxuICAgICAgICAgIDxUb29sdGlwIHRpdGxlPXtzdGF0dXNNc2d9PlxuICAgICAgICAgICAgPEJ1dHRvbiBzaXplPSdzbScgdHlwZT0ndGVydGlhcnknIGljb24+PEljb24gaWNvbj17c3RhdHVzSWNvbn0gY29sb3I9e2NvbG9yfSAvPjwvQnV0dG9uPlxuICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICB7c2hvd01lc3NhZ2UgJiYgPGRpdiBjbGFzc05hbWU9J3N0YXR1cy1tZXNzYWdlJz57c3RhdHVzTXNnfTwvZGl2Pn1cbiAgICAgICAgPC9kaXY+XG4gICAgICApfVxuICAgIDwvUmVhY3QuRnJhZ21lbnQ+XG4gIClcbn1cblxuXG5cbiIsIi8qKlxuICogQ29uZmlndXJhYmxlIGRlYnVnIGxvZ2dpbmcgdXRpbGl0eSBmb3IgRXhwZXJpZW5jZSBCdWlsZGVyIHdpZGdldHNcbiAqIFxuICogVXNhZ2U6XG4gKiAtIEFkZCA/ZGVidWc9YWxsIHRvIFVSTCB0byBzZWUgYWxsIGRlYnVnIGxvZ3NcbiAqIC0gQWRkID9kZWJ1Zz1IQVNILEZPUk0gdG8gc2VlIHNwZWNpZmljIGZlYXR1cmUgbG9nc1xuICogLSBBZGQgP2RlYnVnPWZhbHNlIHRvIGRpc2FibGUgYWxsIGRlYnVnIGxvZ3NcbiAqIFxuICogRmVhdHVyZXMgKFF1ZXJ5U2ltcGxlKTpcbiAqIC0gQlVHOiBLbm93biBidWdzL2lzc3VlcyAoYWx3YXlzIGxvZ3MsIGV2ZW4gaWYgZGVidWc9ZmFsc2UpIC0gVXNlIGZvcm1hdDogYnVnSWQsIGNhdGVnb3J5LCBkZXNjcmlwdGlvblxuICogLSBIQVNIOiBIYXNoIHBhcmFtZXRlciBwcm9jZXNzaW5nXG4gKiAtIEZPUk06IFF1ZXJ5IGZvcm0gaW50ZXJhY3Rpb25zXG4gKiAtIFRBU0s6IFF1ZXJ5IHRhc2sgbWFuYWdlbWVudFxuICogLSBaT09NOiBab29tIGJlaGF2aW9yXG4gKiAtIE1BUC1FWFRFTlQ6IE1hcCBleHRlbnQgY2hhbmdlc1xuICogLSBEQVRBLUFDVElPTjogRGF0YSBhY3Rpb24gZXhlY3V0aW9uIChBZGQgdG8gTWFwLCBldGMuKVxuICogLSBHUk9VUDogUXVlcnkgZ3JvdXBpbmcgYW5kIGRyb3Bkb3duIHNlbGVjdGlvblxuICogLSBTRUxFQ1RJT046IFNlbGVjdGlvbiBkZXRlY3Rpb24gYW5kIGlkZW50aWZ5IHBvcHVwIHRyYWNraW5nXG4gKiAtIFdJREdFVC1TVEFURTogV2lkZ2V0IGxpZmVjeWNsZSBldmVudHMgKG9wZW4vY2xvc2UgaGFuZHNoYWtlKVxuICogLSBSRVNUT1JFOiBTZWxlY3Rpb24gcmVzdG9yYXRpb24gd2hlbiB3aWRnZXQgb3BlbnNcbiAqIC0gUkVTVUxUUy1NT0RFOiBSZXN1bHRzIG1hbmFnZW1lbnQgbW9kZSBzZWxlY3Rpb24gKENyZWF0ZSBuZXcsIEFkZCB0bywgUmVtb3ZlIGZyb20pXG4gKiAtIEVYUEFORC1DT0xMQVBTRTogRXhwYW5kL2NvbGxhcHNlIHN0YXRlIG1hbmFnZW1lbnQgZm9yIHJlc3VsdCBpdGVtc1xuICogLSBHUkFQSElDUy1MQVlFUjogR3JhcGhpY3MgbGF5ZXIgaGlnaGxpZ2h0aW5nIChpbmRlcGVuZGVudCBvZiBsYXllciB2aXNpYmlsaXR5KVxuICogXG4gKiBUZW1wb3JhcnkgTWlncmF0aW9uIEZlYXR1cmVzICh3aWxsIGJlIHJlbW92ZWQgYWZ0ZXIgbWlncmF0aW9uIGNvbXBsZXRlKTpcbiAqIC0gQ0hVTkstMS1DT01QQVJFOiBDaHVuayAxIChVUkwgUGFyYW1ldGVyKSBjb21wYXJpc29uIGxvZ3NcbiAqIC0gQ0hVTkstMS1NSVNNQVRDSDogQ2h1bmsgMSBtaXNtYXRjaCB3YXJuaW5nc1xuICogLSBDSFVOSy0yLUNPTVBBUkU6IENodW5rIDIgKFZpc2liaWxpdHkpIGNvbXBhcmlzb24gbG9nc1xuICogLSBDSFVOSy0yLU1JU01BVENIOiBDaHVuayAyIG1pc21hdGNoIHdhcm5pbmdzXG4gKiAtIENIVU5LLTMtQ09NUEFSRTogQ2h1bmsgMyAoU2VsZWN0aW9uL1Jlc3RvcmF0aW9uKSBjb21wYXJpc29uIGxvZ3NcbiAqIC0gQ0hVTkstMy1ERUNJU0lPTjogQ2h1bmsgMyBkZWNpc2lvbiBwb2ludCBsb2dzXG4gKiAtIENIVU5LLTMtRkFMTEJBQ0s6IENodW5rIDMgZmFsbGJhY2sgbG9naWMgbG9nc1xuICogLSBDSFVOSy00LUNPTVBBUkU6IENodW5rIDQgKEdyYXBoaWNzIExheWVyKSBjb21wYXJpc29uIGxvZ3NcbiAqIC0gQ0hVTkstNS1DT01QQVJFOiBDaHVuayA1IChBY2N1bXVsYXRlZCBSZWNvcmRzKSBjb21wYXJpc29uIGxvZ3NcbiAqIC0gQ0hVTkstNi1DT01QQVJFOiBDaHVuayA2IChNYXAgVmlldykgY29tcGFyaXNvbiBsb2dzXG4gKiAtIENIVU5LLTYtTUlTTUFUQ0g6IENodW5rIDYgbWlzbWF0Y2ggd2FybmluZ3NcbiAqIC0gQ0hVTkstNy1DT01QQVJFOiBDaHVuayA3IChFdmVudHMpIGNvbXBhcmlzb24gbG9nc1xuICogXG4gKiBGZWF0dXJlcyAoSGVscGVyU2ltcGxlKTpcbiAqIC0gSEFTSDogSGFzaCBwYXJhbWV0ZXIgbW9uaXRvcmluZyBhbmQgd2lkZ2V0IG9wZW5pbmdcbiAqIC0gU0VMRUNUSU9OOiBTZWxlY3Rpb24gdHJhY2tpbmcgZnJvbSBRdWVyeVNpbXBsZVxuICogLSBXSURHRVQtU1RBVEU6IFdpZGdldCBzdGF0ZSBoYW5kc2hha2UgKG9wZW4vY2xvc2UgZXZlbnRzKVxuICogLSBSRVNUT1JFOiBTZWxlY3Rpb24gcmVzdG9yYXRpb24gYXR0ZW1wdHMgYW5kIHJlc3VsdHNcbiAqL1xuXG50eXBlIERlYnVnRmVhdHVyZSA9ICdCVUcnIHwgJ0hBU0gnIHwgJ0hBU0gtRVhFQycgfCAnRk9STScgfCAnVEFTSycgfCAnWk9PTScgfCAnTUFQLUVYVEVOVCcgfCAnREFUQS1BQ1RJT04nIHwgJ0dST1VQJyB8ICdTRUxFQ1RJT04nIHwgJ1dJREdFVC1TVEFURScgfCAnUkVTVE9SRScgfCAnUkVTVUxUUy1NT0RFJyB8ICdFWFBBTkQtQ09MTEFQU0UnIHwgJ0dSQVBISUNTLUxBWUVSJyB8ICdDSFVOSy0xLUNPTVBBUkUnIHwgJ0NIVU5LLTEtTUlTTUFUQ0gnIHwgJ0NIVU5LLTItQ09NUEFSRScgfCAnQ0hVTkstMi1NSVNNQVRDSCcgfCAnQ0hVTkstMy1DT01QQVJFJyB8ICdDSFVOSy0zLURFQ0lTSU9OJyB8ICdDSFVOSy0zLUZBTExCQUNLJyB8ICdDSFVOSy00LUNPTVBBUkUnIHwgJ0NIVU5LLTUtQ09NUEFSRScgfCAnQ0hVTkstNi1DT01QQVJFJyB8ICdDSFVOSy02LU1JU01BVENIJyB8ICdDSFVOSy03LUNPTVBBUkUnIHwgJ2FsbCcgfCAnZmFsc2UnXG5cbmludGVyZmFjZSBEZWJ1Z0xvZ2dlck9wdGlvbnMge1xuICB3aWRnZXROYW1lOiBzdHJpbmdcbiAgZmVhdHVyZXM6IERlYnVnRmVhdHVyZVtdXG59XG5cbmNsYXNzIERlYnVnTG9nZ2VyIHtcbiAgcHJpdmF0ZSBlbmFibGVkRmVhdHVyZXM6IFNldDxEZWJ1Z0ZlYXR1cmU+ID0gbmV3IFNldCgpXG4gIHByaXZhdGUgaW5pdGlhbGl6ZWQgPSBmYWxzZVxuICBwcml2YXRlIHdpZGdldE5hbWU6IHN0cmluZ1xuICBwcml2YXRlIGZlYXR1cmVzOiBEZWJ1Z0ZlYXR1cmVbXVxuXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnM6IERlYnVnTG9nZ2VyT3B0aW9ucykge1xuICAgIHRoaXMud2lkZ2V0TmFtZSA9IG9wdGlvbnMud2lkZ2V0TmFtZVxuICAgIHRoaXMuZmVhdHVyZXMgPSBvcHRpb25zLmZlYXR1cmVzXG4gIH1cblxuICBwcml2YXRlIGluaXRpYWxpemUoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuaW5pdGlhbGl6ZWQpIHJldHVyblxuXG4gICAgLy8gQ2hlY2sgVVJMIHBhcmFtZXRlcnMgKGJvdGggY3VycmVudCB3aW5kb3cgYW5kIHBhcmVudCBmb3IgaWZyYW1lcylcbiAgICBsZXQgdXJsUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh3aW5kb3cubG9jYXRpb24uc2VhcmNoKVxuICAgIGxldCBkZWJ1Z1ZhbHVlID0gdXJsUGFyYW1zLmdldCgnZGVidWcnKVxuXG4gICAgLy8gSWYgbm90IGZvdW5kIGluIGN1cnJlbnQgd2luZG93LCBjaGVjayBwYXJlbnQgKG5lZWRlZCBmb3IgRXhCIGlmcmFtZXMpXG4gICAgaWYgKGRlYnVnVmFsdWUgPT09IG51bGwgJiYgd2luZG93LnBhcmVudCAhPT0gd2luZG93KSB7XG4gICAgICB0cnkge1xuICAgICAgICB1cmxQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5wYXJlbnQubG9jYXRpb24uc2VhcmNoKVxuICAgICAgICBkZWJ1Z1ZhbHVlID0gdXJsUGFyYW1zLmdldCgnZGVidWcnKVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyBDcm9zcy1vcmlnaW4gcmVzdHJpY3Rpb24gbWlnaHQgcHJldmVudCBhY2Nlc3MgdG8gcGFyZW50IGxvY2F0aW9uXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGRlYnVnVmFsdWUgPT09ICdmYWxzZScpIHtcbiAgICAgIC8vIEV4cGxpY2l0bHkgZGlzYWJsZWRcbiAgICAgIHRoaXMuaW5pdGlhbGl6ZWQgPSB0cnVlXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAoZGVidWdWYWx1ZSA9PT0gJ2FsbCcpIHtcbiAgICAgIC8vIEVuYWJsZSBhbGwgZmVhdHVyZXMgb25seSBpZiBleHBsaWNpdGx5IHNldCB0byAnYWxsJ1xuICAgICAgdGhpcy5mZWF0dXJlcy5mb3JFYWNoKGZlYXR1cmUgPT4ge1xuICAgICAgICBpZiAoZmVhdHVyZSAhPT0gJ2FsbCcgJiYgZmVhdHVyZSAhPT0gJ2ZhbHNlJykge1xuICAgICAgICAgIHRoaXMuZW5hYmxlZEZlYXR1cmVzLmFkZChmZWF0dXJlKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgY29uc29sZS5sb2coYFske3RoaXMud2lkZ2V0TmFtZX0tREVCVUddIEVuYWJsZWQgQUxMIGZlYXR1cmVzOmAsIEFycmF5LmZyb20odGhpcy5lbmFibGVkRmVhdHVyZXMpKVxuICAgIH0gZWxzZSBpZiAoZGVidWdWYWx1ZSAhPT0gbnVsbCkge1xuICAgICAgLy8gUGFyc2UgY29tbWEtc2VwYXJhdGVkIGZlYXR1cmUgbGlzdFxuICAgICAgY29uc3QgcmVxdWVzdGVkRmVhdHVyZXMgPSBkZWJ1Z1ZhbHVlLnNwbGl0KCcsJykubWFwKGYgPT4gZi50cmltKCkudG9VcHBlckNhc2UoKSBhcyBEZWJ1Z0ZlYXR1cmUpXG4gICAgICByZXF1ZXN0ZWRGZWF0dXJlcy5mb3JFYWNoKGZlYXR1cmUgPT4ge1xuICAgICAgICBpZiAoZmVhdHVyZS50b1VwcGVyQ2FzZSgpID09PSAnQUxMJykge1xuICAgICAgICAgIC8vIEVuYWJsZSBhbGwgZmVhdHVyZXMgZm9yIHRoaXMgd2lkZ2V0XG4gICAgICAgICAgdGhpcy5mZWF0dXJlcy5mb3JFYWNoKGYgPT4ge1xuICAgICAgICAgICAgaWYgKGYgIT09ICdhbGwnICYmIGYgIT09ICdmYWxzZScpIHtcbiAgICAgICAgICAgICAgdGhpcy5lbmFibGVkRmVhdHVyZXMuYWRkKGYpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmZlYXR1cmVzLmluY2x1ZGVzKGZlYXR1cmUpKSB7XG4gICAgICAgICAgdGhpcy5lbmFibGVkRmVhdHVyZXMuYWRkKGZlYXR1cmUpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuXG4gICAgdGhpcy5pbml0aWFsaXplZCA9IHRydWVcbiAgfVxuXG4gIHByaXZhdGUgaXNFbmFibGVkKGZlYXR1cmU6IERlYnVnRmVhdHVyZSk6IGJvb2xlYW4ge1xuICAgIHRoaXMuaW5pdGlhbGl6ZSgpXG4gICAgXG4gICAgLy8gQlVHIGxldmVsIGFsd2F5cyBlbmFibGVkLCByZWdhcmRsZXNzIG9mIGRlYnVnIHN3aXRjaGVzIChldmVuIGlmIGRlYnVnPWZhbHNlKVxuICAgIGlmIChmZWF0dXJlID09PSAnQlVHJykge1xuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gICAgXG4gICAgaWYgKHRoaXMuZW5hYmxlZEZlYXR1cmVzLmhhcygnYWxsJykpIHtcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICAgIFxuICAgIHJldHVybiB0aGlzLmVuYWJsZWRGZWF0dXJlcy5oYXMoZmVhdHVyZSlcbiAgfVxuXG4gIGxvZyhmZWF0dXJlOiBEZWJ1Z0ZlYXR1cmUsIGRhdGE6IGFueSk6IHZvaWQge1xuICAgIC8vIEJVRyBsZXZlbCBhbHdheXMgbG9ncywgZXZlbiBpZiBkZWJ1Zz1mYWxzZVxuICAgIGlmIChmZWF0dXJlID09PSAnQlVHJykge1xuICAgICAgY29uc3QgbG9nRGF0YSA9IHtcbiAgICAgICAgZmVhdHVyZTogJ0JVRycsXG4gICAgICAgIGJ1Z0lkOiBkYXRhLmJ1Z0lkIHx8ICdVTktOT1dOJyxcbiAgICAgICAgY2F0ZWdvcnk6IGRhdGEuY2F0ZWdvcnkgfHwgJ0dFTkVSQUwnLFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgLi4uZGF0YVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBVc2UgY29uc29sZS53YXJuIHdpdGggZW1vamkgZm9ybWF0IHRvIG1ha2UgYnVncyBzdGFuZCBvdXRcbiAgICAgIGNvbnNvbGUud2FybihgWyR7dGhpcy53aWRnZXROYW1lLnRvVXBwZXJDYXNlKCl9IOKaoO+4jyBCVUddYCwgSlNPTi5zdHJpbmdpZnkobG9nRGF0YSwgbnVsbCwgMikpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgLy8gUmVndWxhciBmZWF0dXJlIGxvZ2dpbmcgKGV4aXN0aW5nIGJlaGF2aW9yKVxuICAgIGlmICghdGhpcy5pc0VuYWJsZWQoZmVhdHVyZSkpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0IGxvZ0RhdGEgPSB7XG4gICAgICBmZWF0dXJlLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAuLi5kYXRhXG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coYFske3RoaXMud2lkZ2V0TmFtZS50b1VwcGVyQ2FzZSgpfS0ke2ZlYXR1cmV9XWAsIEpTT04uc3RyaW5naWZ5KGxvZ0RhdGEsIG51bGwsIDIpKVxuICB9XG5cbiAgZ2V0Q29uZmlnKCk6IHsgZW5hYmxlZEZlYXR1cmVzOiBzdHJpbmdbXSwgZGVidWdWYWx1ZTogc3RyaW5nIHwgbnVsbCB9IHtcbiAgICB0aGlzLmluaXRpYWxpemUoKVxuICAgIFxuICAgIGNvbnN0IHVybFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaClcbiAgICBjb25zdCBkZWJ1Z1ZhbHVlID0gdXJsUGFyYW1zLmdldCgnZGVidWcnKVxuICAgIFxuICAgIHJldHVybiB7XG4gICAgICBlbmFibGVkRmVhdHVyZXM6IEFycmF5LmZyb20odGhpcy5lbmFibGVkRmVhdHVyZXMpLFxuICAgICAgZGVidWdWYWx1ZVxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBkZWJ1ZyBsb2dnZXIgaW5zdGFuY2UgZm9yIFF1ZXJ5U2ltcGxlIHdpZGdldFxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlcigpIHtcbiAgcmV0dXJuIG5ldyBEZWJ1Z0xvZ2dlcih7XG4gICAgd2lkZ2V0TmFtZTogJ1FVRVJZU0lNUExFJyxcbiAgICBmZWF0dXJlczogW1xuICAgICAgJ0hBU0gnLCAnRk9STScsICdUQVNLJywgJ1pPT00nLCAnTUFQLUVYVEVOVCcsICdEQVRBLUFDVElPTicsICdHUk9VUCcsIFxuICAgICAgJ1NFTEVDVElPTicsICdXSURHRVQtU1RBVEUnLCAnUkVTVE9SRScsICdSRVNVTFRTLU1PREUnLCAnRVhQQU5ELUNPTExBUFNFJywgJ0dSQVBISUNTLUxBWUVSJyxcbiAgICAgIC8vIFRlbXBvcmFyeSBtaWdyYXRpb24gZmVhdHVyZXMgKHdpbGwgYmUgcmVtb3ZlZCBhZnRlciBtaWdyYXRpb24gY29tcGxldGUpXG4gICAgICAnQ0hVTkstMS1DT01QQVJFJywgJ0NIVU5LLTEtTUlTTUFUQ0gnLCAnQ0hVTkstMi1DT01QQVJFJywgJ0NIVU5LLTItTUlTTUFUQ0gnLCAnQ0hVTkstMy1DT01QQVJFJywgJ0NIVU5LLTMtREVDSVNJT04nLCAnQ0hVTkstMy1GQUxMQkFDSycsXG4gICAgICAnQ0hVTkstNC1DT01QQVJFJywgJ0NIVU5LLTUtQ09NUEFSRScsICdDSFVOSy02LUNPTVBBUkUnLCAnQ0hVTkstNi1NSVNNQVRDSCcsICdDSFVOSy03LUNPTVBBUkUnXG4gICAgXVxuICB9KVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBkZWJ1ZyBsb2dnZXIgaW5zdGFuY2UgZm9yIEhlbHBlclNpbXBsZSB3aWRnZXRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUhlbHBlclNpbXBsZURlYnVnTG9nZ2VyKCkge1xuICByZXR1cm4gbmV3IERlYnVnTG9nZ2VyKHtcbiAgICB3aWRnZXROYW1lOiAnSEVMUEVSU0lNUExFJyxcbiAgICBmZWF0dXJlczogWydIQVNIJywgJ1NFTEVDVElPTicsICdXSURHRVQtU1RBVEUnLCAnUkVTVE9SRSddXG4gIH0pXG59XG5cbiIsImltcG9ydCB7XG4gIFJlYWN0UmVkdXgsXG4gIHR5cGUgSU1TdGF0ZSxcbiAgdHlwZSBJTUFwcENvbmZpZ1xufSBmcm9tICdqaW11LWNvcmUnXG5pbnRlcmZhY2UgUHJvcHMge1xuICB3aWRnZXRJZDogc3RyaW5nXG4gIHVzZURhdGFTb3VyY2VJZDogc3RyaW5nXG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VEYXRhU291cmNlRXhpc3RzIChwcm9wczogUHJvcHMpIHtcbiAgY29uc3QgeyB3aWRnZXRJZCwgdXNlRGF0YVNvdXJjZUlkIH0gPSBwcm9wc1xuXG4gIGNvbnN0IGV4aXN0czogYm9vbGVhbiA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XG4gICAgbGV0IGFwcENvbmZpZzogSU1BcHBDb25maWdcbiAgICBpZiAod2luZG93LmppbXVDb25maWcuaXNCdWlsZGVyKSB7XG4gICAgICBhcHBDb25maWcgPSBzdGF0ZS5hcHBTdGF0ZUluQnVpbGRlci5hcHBDb25maWdcbiAgICB9IGVsc2Uge1xuICAgICAgYXBwQ29uZmlnID0gc3RhdGUuYXBwQ29uZmlnXG4gICAgfVxuICAgIGNvbnN0IHVzZURhdGFTb3VyY2VzID0gYXBwQ29uZmlnLndpZGdldHNbd2lkZ2V0SWRdLnVzZURhdGFTb3VyY2VzID8/IFtdXG4gICAgcmV0dXJuIHVzZURhdGFTb3VyY2VzLnNvbWUodXNlRHMgPT4gdXNlRHMuZGF0YVNvdXJjZUlkID09PSB1c2VEYXRhU291cmNlSWQpXG4gIH0pXG5cbiAgcmV0dXJuIGV4aXN0c1xufVxuXG5cblxuIiwiaW1wb3J0IHR5cGUgeyBJUG9wdXBJbmZvIH0gZnJvbSAnQGVzcmkvYXJjZ2lzLXJlc3QtZmVhdHVyZS1zZXJ2aWNlJ1xuaW1wb3J0IHR5cGUgeyBJbnRsU2hhcGUsIERhdGFTb3VyY2UgfSBmcm9tICdqaW11LWNvcmUnXG5cbi8qKlxuICogVG9nZ2xlIGl0ZW1zIGluIGFuIGFycmF5XG4gKi9cbmV4cG9ydCBjb25zdCB0b2dnbGVJdGVtSW5BcnJheSA9IChpdGVtLCBpdGVtcyA9IFtdKSA9PiBpdGVtcy5pbmNsdWRlcyhpdGVtKSA/IGl0ZW1zLmZpbHRlcihpID0+IGkgIT09IGl0ZW0pIDogWy4uLml0ZW1zLCBpdGVtXVxuXG5leHBvcnQgaW50ZXJmYWNlIERhdGFTb3VyY2VNYXAge1xuICBbZGF0YVNvdXJjZUlkOiBzdHJpbmddOiBEYXRhU291cmNlXG59XG5cbmV4cG9ydCB0eXBlIEdldEkxOG5NZXNzYWdlVHlwZSA9IChpZDogc3RyaW5nLCBvcHRpb25zPzogeyBtZXNzYWdlcz86IGFueSwgdmFsdWVzPzogYW55IH0pID0+IHN0cmluZ1xuLyoqXG4gKiBBIGZhY3RvcnkgdG8gY3JlYXRlIGEgZnVuY3Rpb24gb2YgZ2V0dGluZyBpMThuIG1lc3NhZ2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUdldEkxOG5NZXNzYWdlIChvcHRpb25zOiB7IGludGw6IEludGxTaGFwZSwgZGVmYXVsdE1lc3NhZ2VzPzogYW55IH0pIHtcbiAgY29uc3QgeyBpbnRsLCBkZWZhdWx0TWVzc2FnZXMgPSB7fSB9ID0gb3B0aW9ucyB8fCB7fVxuICBjb25zdCBnZXRJMThuTWVzc2FnZTogR2V0STE4bk1lc3NhZ2VUeXBlID0gKGlkLCBvcHRpb25zKSA9PiB7XG4gICAgY29uc3QgeyBtZXNzYWdlcywgdmFsdWVzIH0gPSBvcHRpb25zIHx8IHt9XG4gICAgcmV0dXJuIGludGwuZm9ybWF0TWVzc2FnZSh7IGlkLCBkZWZhdWx0TWVzc2FnZTogKG1lc3NhZ2VzIHx8IGRlZmF1bHRNZXNzYWdlcylbaWRdIH0sIHZhbHVlcylcbiAgfVxuICByZXR1cm4gZ2V0STE4bk1lc3NhZ2Vcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEZpZWxkSW5mb3NJblBvcHVwQ29udGVudCAocG9wdXBJbmZvOiBJUG9wdXBJbmZvKSB7XG4gIGNvbnN0IHJlc3VsdCA9IFtdXG4gIGlmIChwb3B1cEluZm8/LnBvcHVwRWxlbWVudHM/Lmxlbmd0aCA+IDApIHtcbiAgICBwb3B1cEluZm8ucG9wdXBFbGVtZW50cy5mb3JFYWNoKGVsZW1lbnQgPT4ge1xuICAgICAgaWYgKGVsZW1lbnQudHlwZSA9PT0gJ2ZpZWxkcycgJiYgZWxlbWVudC5maWVsZEluZm9zPy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHJlc3VsdC5wdXNoKC4uLmVsZW1lbnQuZmllbGRJbmZvcylcbiAgICAgIH1cbiAgICB9KVxuICB9XG4gIHJldHVybiByZXN1bHRcbn1cblxuXG5cbiIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fZW1vdGlvbl9yZWFjdF9qc3hfcnVudGltZV9fOyIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9qaW11X2FyY2dpc19fOyIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9qaW11X2NvcmVfXzsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfamltdV9sYXlvdXRzX2xheW91dF9ydW50aW1lX187IiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX2ppbXVfdGhlbWVfXzsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfamltdV91aV9fOyIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9qaW11X3VpX2Jhc2ljX3NxbF9leHByZXNzaW9uX3J1bnRpbWVfXzsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfcmVhY3RfXzsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfd2lkZ2V0c19zaGFyZWRfY29kZV9jb21tb25fXzsiLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbl9fd2VicGFja19yZXF1aXJlX18ubiA9IChtb2R1bGUpID0+IHtcblx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG5cdFx0KCkgPT4gKG1vZHVsZVsnZGVmYXVsdCddKSA6XG5cdFx0KCkgPT4gKG1vZHVsZSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsIHsgYTogZ2V0dGVyIH0pO1xuXHRyZXR1cm4gZ2V0dGVyO1xufTsiLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjsiLCIvKipcclxuICogV2VicGFjayB3aWxsIHJlcGxhY2UgX193ZWJwYWNrX3B1YmxpY19wYXRoX18gd2l0aCBfX3dlYnBhY2tfcmVxdWlyZV9fLnAgdG8gc2V0IHRoZSBwdWJsaWMgcGF0aCBkeW5hbWljYWxseS5cclxuICogVGhlIHJlYXNvbiB3aHkgd2UgY2FuJ3Qgc2V0IHRoZSBwdWJsaWNQYXRoIGluIHdlYnBhY2sgY29uZmlnIGlzOiB3ZSBjaGFuZ2UgdGhlIHB1YmxpY1BhdGggd2hlbiBkb3dubG9hZC5cclxuICogKi9cclxuX193ZWJwYWNrX3B1YmxpY19wYXRoX18gPSB3aW5kb3cuamltdUNvbmZpZy5iYXNlVXJsXHJcbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHsgUmVhY3QsIGpzeCwgY3NzLCB0eXBlIEFsbFdpZGdldFByb3BzLCBEYXRhU291cmNlTWFuYWdlciwgdHlwZSBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLCB0eXBlIEZlYXR1cmVEYXRhUmVjb3JkLCBNZXNzYWdlTWFuYWdlciwgRGF0YVJlY29yZHNTZWxlY3Rpb25DaGFuZ2VNZXNzYWdlLCB0eXBlIERhdGFTb3VyY2UgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBQYXBlciwgV2lkZ2V0UGxhY2Vob2xkZXIgfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHsgdHlwZSBJTUNvbmZpZywgUXVlcnlBcnJhbmdlVHlwZSwgU2VsZWN0aW9uVHlwZSB9IGZyb20gJy4uL2NvbmZpZydcbmltcG9ydCBkZWZhdWx0TWVzc2FnZXMgZnJvbSAnLi90cmFuc2xhdGlvbnMvZGVmYXVsdCdcbmltcG9ydCB7IGdldFdpZGdldFJ1bnRpbWVEYXRhTWFwIH0gZnJvbSAnLi93aWRnZXQtY29uZmlnJ1xuaW1wb3J0IHsgSmltdU1hcFZpZXdDb21wb25lbnQsIHR5cGUgSmltdU1hcFZpZXcgfSBmcm9tICdqaW11LWFyY2dpcydcblxuaW1wb3J0IHsgdmVyc2lvbk1hbmFnZXIgfSBmcm9tICcuLi92ZXJzaW9uLW1hbmFnZXInXG5pbXBvcnQgeyBRdWVyeVRhc2tMaXN0IH0gZnJvbSAnLi9xdWVyeS10YXNrLWxpc3QnXG5pbXBvcnQgeyBUYXNrTGlzdElubGluZSB9IGZyb20gJy4vcXVlcnktdGFzay1saXN0LWlubGluZSdcbmltcG9ydCB7IFRhc2tMaXN0UG9wcGVyV3JhcHBlciB9IGZyb20gJy4vcXVlcnktdGFzay1saXN0LXBvcHBlci13cmFwcGVyJ1xuaW1wb3J0IHsgUXVlcnlXaWRnZXRDb250ZXh0IH0gZnJvbSAnLi93aWRnZXQtY29udGV4dCdcbmltcG9ydCB7IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIgfSBmcm9tICd3aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbidcbmltcG9ydCB7IFFVRVJZU0lNUExFX1NFTEVDVElPTl9FVkVOVCB9IGZyb20gJy4vc2VsZWN0aW9uLXV0aWxzJ1xuaW1wb3J0IHsgV0lER0VUX1ZFUlNJT04gfSBmcm9tICcuLi92ZXJzaW9uJ1xuLy8gQ2h1bmsgMTogVVJMIFBhcmFtZXRlciBDb25zdW1wdGlvbiBNYW5hZ2VyIChyMDE4LjgpXG5pbXBvcnQgeyBVcmxDb25zdW1wdGlvbk1hbmFnZXIgfSBmcm9tICcuL2hvb2tzL3VzZS11cmwtY29uc3VtcHRpb24nXG4vLyBDaHVuayAyOiBXaWRnZXQgVmlzaWJpbGl0eSBFbmdpbmUgTWFuYWdlciAocjAxOC4xMykgLSBTdGVwIDIuMzogU3dpdGNoIHRvIG1hbmFnZXJcbmltcG9ydCB7IFdpZGdldFZpc2liaWxpdHlNYW5hZ2VyIH0gZnJvbSAnLi9ob29rcy91c2Utd2lkZ2V0LXZpc2liaWxpdHknXG4vLyBDaHVuayA2OiBNYXAgVmlldyBNYW5hZ2VtZW50IE1hbmFnZXIgKHIwMTguMTQpIC0gU3RlcCA2LjE6IEFkZCBtYW5hZ2VyIHdpdGhvdXQgaW50ZWdyYXRpb25cbmltcG9ydCB7IE1hcFZpZXdNYW5hZ2VyIH0gZnJvbSAnLi9ob29rcy91c2UtbWFwLXZpZXcnXG4vLyBDaHVuayA0OiBHcmFwaGljcyBMYXllciBNYW5hZ2VtZW50IE1hbmFnZXIgKHIwMTguMjQpIC0gU3RlcCA0LjI6IFBhcmFsbGVsIGV4ZWN1dGlvblxuaW1wb3J0IHsgR3JhcGhpY3NMYXllck1hbmFnZXIgfSBmcm9tICcuL2hvb2tzL3VzZS1ncmFwaGljcy1sYXllcidcbi8vIENodW5rIDU6IEFjY3VtdWxhdGVkIFJlY29yZHMgTWFuYWdlbWVudCBNYW5hZ2VyIChyMDE4LjI2KSAtIFN0ZXAgNS4xOiBBZGQgbWFuYWdlciB3aXRob3V0IGludGVncmF0aW9uXG5pbXBvcnQgeyBBY2N1bXVsYXRlZFJlY29yZHNNYW5hZ2VyIH0gZnJvbSAnLi9ob29rcy91c2UtYWNjdW11bGF0ZWQtcmVjb3JkcydcblxuY29uc3QgZGVidWdMb2dnZXIgPSBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyKClcbmNvbnN0IHsgaWNvbk1hcCB9ID0gZ2V0V2lkZ2V0UnVudGltZURhdGFNYXAoKVxuXG4vKipcbiAqIEN1c3RvbSBldmVudCBuYW1lIGZvciByZXF1ZXN0aW5nIHJlc3RvcmF0aW9uIHdoZW4gaWRlbnRpZnkgcG9wdXAgY2xvc2VzLlxuICogRGlzcGF0Y2hlZCBieSBxdWVyeS1yZXN1bHQgY29tcG9uZW50IHdoZW4gaWRlbnRpZnkgcG9wdXAgY2xvc2VzIGFuZCBzZWxlY3Rpb24gd2FzIGNsZWFyZWQuXG4gKi9cbmNvbnN0IFJFU1RPUkVfT05fSURFTlRJRllfQ0xPU0VfRVZFTlQgPSAncXVlcnlzaW1wbGUtcmVzdG9yZS1vbi1pZGVudGlmeS1jbG9zZSdcblxuLyoqXG4gKiBDdXN0b20gZXZlbnQgbmFtZSBmb3IgSGVscGVyU2ltcGxlIHRvIG5vdGlmeSBRdWVyeVNpbXBsZSB0byBwcm9jZXNzIGhhc2ggcGFyYW1ldGVycy5cbiAqIERpc3BhdGNoZWQgYnkgSGVscGVyU2ltcGxlIGFmdGVyIG9wZW5pbmcgYSB3aWRnZXQgaW4gYSBjb250cm9sbGVyLlxuICovXG5jb25zdCBPUEVOX1dJREdFVF9FVkVOVCA9ICdoZWxwZXJzaW1wbGUtb3Blbi13aWRnZXQnXG5cbi8qKlxuICogUXVlcnlTaW1wbGUgV2lkZ2V0XG4gKiBcbiAqIEEgaGlnaC1wZXJmb3JtYW5jZSBxdWVyeSB3aWRnZXQgZm9yIEFyY0dJUyBFeHBlcmllbmNlIEJ1aWxkZXIgdGhhdCBwcm92aWRlczpcbiAqIC0gVW5pdmVyc2FsIFNRTCBvcHRpbWl6YXRpb24gZm9yIGRhdGFiYXNlIGluZGV4IHVzYWdlXG4gKiAtIER1YWwtbW9kZSBkZWVwIGxpbmtpbmcgKGhhc2ggZnJhZ21lbnRzIGFuZCBxdWVyeSBzdHJpbmdzKVxuICogLSBSZXN1bHRzIGFjY3VtdWxhdGlvbiBhY3Jvc3MgbXVsdGlwbGUgcXVlcmllc1xuICogLSBTZWxlY3Rpb24gcGVyc2lzdGVuY2UgYW5kIHJlc3RvcmF0aW9uXG4gKiAtIEdyYXBoaWNzIGxheWVyIGhpZ2hsaWdodGluZyBmb3IgbWFwIHZpc3VhbGl6YXRpb25cbiAqIFxuICogQXJjaGl0ZWN0dXJlOlxuICogVGhpcyB3aWRnZXQgZm9sbG93cyBhIFwiSG9vayAmIFNoZWxsXCIgcGF0dGVybiB3aGVyZSBjb21wbGV4IGxvZ2ljIGlzIGV4dHJhY3RlZCBpbnRvXG4gKiBtYW5hZ2VyIGNsYXNzZXMgKFVybENvbnN1bXB0aW9uTWFuYWdlciwgV2lkZ2V0VmlzaWJpbGl0eU1hbmFnZXIsIE1hcFZpZXdNYW5hZ2VyKVxuICogdG8ga2VlcCB0aGUgbWFpbiB3aWRnZXQgY2xhc3MgY2xlYW4gYW5kIG1haW50YWluYWJsZS5cbiAqIFxuICogQHNpbmNlIDEuMTkuMC1yMDE4LjE4XG4gKiBAc2VlIHtAbGluayBVcmxDb25zdW1wdGlvbk1hbmFnZXJ9IGZvciBVUkwgcGFyYW1ldGVyIGhhbmRsaW5nXG4gKiBAc2VlIHtAbGluayBXaWRnZXRWaXNpYmlsaXR5TWFuYWdlcn0gZm9yIHBhbmVsIHZpc2liaWxpdHkgZGV0ZWN0aW9uXG4gKiBAc2VlIHtAbGluayBNYXBWaWV3TWFuYWdlcn0gZm9yIG1hcCB2aWV3IHJlZmVyZW5jZSBtYW5hZ2VtZW50XG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFdpZGdldCBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQ8QWxsV2lkZ2V0UHJvcHM8SU1Db25maWc+LCB7IFxuICBpbml0aWFsUXVlcnlWYWx1ZT86IHsgc2hvcnRJZDogc3RyaW5nLCB2YWx1ZTogc3RyaW5nIH0sIFxuICBpc1BhbmVsVmlzaWJsZT86IGJvb2xlYW4sIFxuICBoYXNTZWxlY3Rpb24/OiBib29sZWFuLCBcbiAgc2VsZWN0aW9uUmVjb3JkQ291bnQ/OiBudW1iZXIsIFxuICBsYXN0U2VsZWN0aW9uPzogeyByZWNvcmRJZHM6IHN0cmluZ1tdLCBvdXRwdXREc0lkOiBzdHJpbmcsIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBzdHJpbmcgfSwgXG4gIHJlc3VsdHNNb2RlPzogU2VsZWN0aW9uVHlwZSwgXG4gIGFjY3VtdWxhdGVkUmVjb3Jkcz86IEZlYXR1cmVEYXRhUmVjb3JkW10sIFxuICBncmFwaGljc0xheWVySW5pdGlhbGl6ZWQ/OiBib29sZWFuLCBcbiAgYWN0aXZlVGFiPzogJ3F1ZXJ5JyB8ICdyZXN1bHRzJ1xufT4ge1xuICBzdGF0aWMgdmVyc2lvbk1hbmFnZXIgPSB2ZXJzaW9uTWFuYWdlclxuICAvLyBDaHVuayAxOiBVUkwgUGFyYW1ldGVyIENvbnN1bXB0aW9uIE1hbmFnZXIgKHIwMTguOClcbiAgcHJpdmF0ZSB1cmxDb25zdW1wdGlvbk1hbmFnZXIgPSBuZXcgVXJsQ29uc3VtcHRpb25NYW5hZ2VyKClcbiAgLy8gQ2h1bmsgMjogV2lkZ2V0IFZpc2liaWxpdHkgRW5naW5lIE1hbmFnZXIgKHIwMTguMTMpIC0gU3RlcCAyLjM6IFN3aXRjaCB0byBtYW5hZ2VyXG4gIHByaXZhdGUgdmlzaWJpbGl0eU1hbmFnZXIgPSBuZXcgV2lkZ2V0VmlzaWJpbGl0eU1hbmFnZXIoKVxuICBcbiAgLy8gUmVmcyBtdXN0IGJlIGRlY2xhcmVkIGJlZm9yZSBtYW5hZ2VycyB0aGF0IHVzZSB0aGVtXG4gIHByaXZhdGUgd2lkZ2V0UmVmID0gUmVhY3QuY3JlYXRlUmVmPEhUTUxEaXZFbGVtZW50PigpXG4gIHByaXZhdGUgZ3JhcGhpY3NMYXllclJlZiA9IFJlYWN0LmNyZWF0ZVJlZjxfX2VzcmkuR3JhcGhpY3NMYXllciB8IG51bGw+KClcbiAgcHJpdmF0ZSBtYXBWaWV3UmVmID0gUmVhY3QuY3JlYXRlUmVmPF9fZXNyaS5NYXBWaWV3IHwgX19lc3JpLlNjZW5lVmlldyB8IG51bGw+KClcbiAgXG4gIC8vIENodW5rIDY6IE1hcCBWaWV3IE1hbmFnZW1lbnQgTWFuYWdlciAocjAxOC4xNikgLSBTdGVwIDYuMzogU3dpdGNoIHRvIG1hbmFnZXJcbiAgcHJpdmF0ZSBtYXBWaWV3TWFuYWdlciA9IG5ldyBNYXBWaWV3TWFuYWdlcih0aGlzLm1hcFZpZXdSZWYpXG4gIC8vIENodW5rIDQ6IEdyYXBoaWNzIExheWVyIE1hbmFnZW1lbnQgTWFuYWdlciAocjAxOC4yNCkgLSBTdGVwIDQuMjogUGFyYWxsZWwgZXhlY3V0aW9uXG4gIHByaXZhdGUgZ3JhcGhpY3NMYXllck1hbmFnZXIgPSBuZXcgR3JhcGhpY3NMYXllck1hbmFnZXIodGhpcy5ncmFwaGljc0xheWVyUmVmLCB0aGlzLm1hcFZpZXdSZWYpXG4gIC8vIENodW5rIDU6IEFjY3VtdWxhdGVkIFJlY29yZHMgTWFuYWdlbWVudCBNYW5hZ2VyIChyMDE4LjI2KSAtIFN0ZXAgNS4xOiBBZGQgbWFuYWdlciB3aXRob3V0IGludGVncmF0aW9uXG4gIHByaXZhdGUgYWNjdW11bGF0ZWRSZWNvcmRzTWFuYWdlciA9IG5ldyBBY2N1bXVsYXRlZFJlY29yZHNNYW5hZ2VyKClcbiAgXG4gIC8vIFRyYWNrIHByb2Nlc3NlZCBoYXNoIHBhcmFtZXRlcnMgdG8gcHJldmVudCByZS1leGVjdXRpb24gd2hlbiBzd2l0Y2hpbmcgcXVlcmllc1xuICAvLyBLZXk6IFwic2hvcnRJZDp2YWx1ZVwiIChlLmcuLCBcInBpbjoyMjIzMDU5MDEzXCIpXG4gIHByaXZhdGUgcHJvY2Vzc2VkSGFzaFBhcmFtc1JlZiA9IG5ldyBTZXQ8c3RyaW5nPigpXG5cbiAgc3RhdGU6IHsgXG4gICAgaW5pdGlhbFF1ZXJ5VmFsdWU/OiB7IHNob3J0SWQ6IHN0cmluZywgdmFsdWU6IHN0cmluZyB9LCBcbiAgICBpc1BhbmVsVmlzaWJsZT86IGJvb2xlYW4sIFxuICAgIGhhc1NlbGVjdGlvbj86IGJvb2xlYW4sIFxuICAgIHNlbGVjdGlvblJlY29yZENvdW50PzogbnVtYmVyLCBcbiAgICBsYXN0U2VsZWN0aW9uPzogeyByZWNvcmRJZHM6IHN0cmluZ1tdLCBvdXRwdXREc0lkOiBzdHJpbmcsIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBzdHJpbmcgfSwgXG4gICAgcmVzdWx0c01vZGU/OiBTZWxlY3Rpb25UeXBlLCBcbiAgICBhY2N1bXVsYXRlZFJlY29yZHM/OiBGZWF0dXJlRGF0YVJlY29yZFtdLCBcbiAgICBncmFwaGljc0xheWVySW5pdGlhbGl6ZWQ/OiBib29sZWFuLCBcbiAgICBhY3RpdmVUYWI/OiAncXVlcnknIHwgJ3Jlc3VsdHMnLFxuICAgIC8vIFRyYWNrIHdoZW4gSGVscGVyU2ltcGxlIGV4cGxpY2l0bHkgb3BlbnMgd2lkZ2V0IC0gb25seSB0aGVuIHNob3VsZCBxdWVyeS10YXNrLWxpc3QgdXNlIGluaXRpYWxRdWVyeVZhbHVlIGZvciBzZWxlY3Rpb25cbiAgICAvLyBVc2luZyBzdGF0ZSBpbnN0ZWFkIG9mIHJlZiBlbnN1cmVzIFJlYWN0IHRyaWdnZXJzIHJlLXJlbmRlcnMgd2hlbiBmbGFnIGNoYW5nZXNcbiAgICBzaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbj86IGJvb2xlYW5cbiAgfSA9IHtcbiAgICByZXN1bHRzTW9kZTogU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb24sIC8vIERlZmF1bHQgbW9kZVxuICAgIGFjdGl2ZVRhYjogJ3F1ZXJ5J1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgdGFiIGNoYW5nZSBiZXR3ZWVuIFwiUXVlcnlcIiBhbmQgXCJSZXN1bHRzXCIgdGFicy5cbiAgICogXG4gICAqIEBwYXJhbSBhY3RpdmVUYWIgLSBUaGUgdGFiIHRvIHN3aXRjaCB0byAoJ3F1ZXJ5JyBvciAncmVzdWx0cycpXG4gICAqIFxuICAgKiBAc2luY2UgMS4xOS4wLXIwMTcuMFxuICAgKi9cbiAgaGFuZGxlVGFiQ2hhbmdlID0gKGFjdGl2ZVRhYjogJ3F1ZXJ5JyB8ICdyZXN1bHRzJykgPT4ge1xuICAgIHRoaXMuc2V0U3RhdGUoeyBhY3RpdmVUYWIgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIEhlbHBlclNpbXBsZSdzIG9wZW4gd2lkZ2V0IGV2ZW50LlxuICAgKiBRdWVyeVNpbXBsZSBzaG91bGQgb25seSBwcm9jZXNzIGhhc2ggcGFyYW1ldGVycyB3aGVuIEhlbHBlclNpbXBsZSBleHBsaWNpdGx5IG9wZW5zIHRoZSB3aWRnZXQuXG4gICAqIFRoaXMgZW5zdXJlcyBIZWxwZXJTaW1wbGUgcmVtYWlucyB0aGUgb3JjaGVzdHJhdG9yIGFuZCBwcmV2ZW50cyBhdXRvbm9tb3VzIGhhc2ggcHJvY2Vzc2luZy5cbiAgICovXG4gIGhhbmRsZU9wZW5XaWRnZXRFdmVudCA9IChldmVudDogQ3VzdG9tRXZlbnQpID0+IHtcbiAgICBjb25zdCB7IGlkIH0gPSB0aGlzLnByb3BzXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdIQVNILUVYRUMnLCB7XG4gICAgICBldmVudDogJ3F1ZXJ5c2ltcGxlLWhhbmRsZW9wZW53aWRnZXRldmVudC1yZWNlaXZlZCcsXG4gICAgICB3aWRnZXRJZDogaWQsXG4gICAgICBldmVudFdpZGdldElkOiBldmVudC5kZXRhaWw/LndpZGdldElkLFxuICAgICAgbWF0Y2hlczogZXZlbnQuZGV0YWlsPy53aWRnZXRJZCA9PT0gaWQsXG4gICAgICBjdXJyZW50U3RhdGU6IHtcbiAgICAgICAgc2hvdWxkVXNlSW5pdGlhbFF1ZXJ5VmFsdWVGb3JTZWxlY3Rpb246IHRoaXMuc3RhdGUuc2hvdWxkVXNlSW5pdGlhbFF1ZXJ5VmFsdWVGb3JTZWxlY3Rpb24sXG4gICAgICAgIGhhc0luaXRpYWxRdWVyeVZhbHVlOiAhIXRoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWUsXG4gICAgICAgIGluaXRpYWxRdWVyeVZhbHVlU2hvcnRJZDogdGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZT8uc2hvcnRJZCxcbiAgICAgICAgaW5pdGlhbFF1ZXJ5VmFsdWVWYWx1ZTogdGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZT8udmFsdWUsXG4gICAgICAgIHByb2Nlc3NlZEhhc2hQYXJhbXM6IEFycmF5LmZyb20odGhpcy5wcm9jZXNzZWRIYXNoUGFyYW1zUmVmKSxcbiAgICAgICAgY3VycmVudFVybEhhc2g6IHdpbmRvdy5sb2NhdGlvbi5oYXNoLnN1YnN0cmluZygxKVxuICAgICAgfSxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgLy8gT25seSBwcm9jZXNzIGlmIHRoaXMgZXZlbnQgaXMgZm9yIG91ciB3aWRnZXRcbiAgICBpZiAoZXZlbnQuZGV0YWlsPy53aWRnZXRJZCAhPT0gaWQpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSC1FWEVDJywge1xuICAgICAgICBldmVudDogJ3F1ZXJ5c2ltcGxlLWhhbmRsZW9wZW53aWRnZXRldmVudC1pZ25vcmVkLXdyb25nLXdpZGdldCcsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgZXZlbnRXaWRnZXRJZDogZXZlbnQuZGV0YWlsPy53aWRnZXRJZCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIC8vIE5PVEU6IFdlIGRvbid0IGNoZWNrIHByb2Nlc3NlZCBoYXNoZXMgaGVyZSBhbnltb3JlXG4gICAgLy8gVGhlIGNoZWNrIGhhcHBlbnMgaW4gb25Jbml0aWFsVmFsdWVGb3VuZCBhZnRlciB3ZSBrbm93IHdoaWNoIHNob3J0SWQ6dmFsdWUgcGFpciBpcyBiZWluZyBwcm9jZXNzZWRcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gnLCB7XG4gICAgICBldmVudDogJ29wZW4td2lkZ2V0LWV2ZW50LXJlY2VpdmVkLWZyb20taGVscGVyc2ltcGxlJyxcbiAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgLy8gU2V0IGZsYWcgdG8gYWxsb3cgcXVlcnktdGFzay1saXN0IHRvIHVzZSBpbml0aWFsUXVlcnlWYWx1ZSBmb3Igc2VsZWN0aW9uXG4gICAgLy8gVGhpcyBlbnN1cmVzIHdlIG9ubHkgcmVhY3QgdG8gaGFzaCBwYXJhbWV0ZXJzIHdoZW4gSGVscGVyU2ltcGxlIGV4cGxpY2l0bHkgb3BlbnMgdXNcbiAgICAvLyBVc2luZyBzdGF0ZSBpbnN0ZWFkIG9mIHJlZiBlbnN1cmVzIFJlYWN0IHRyaWdnZXJzIHJlLXJlbmRlciBzbyBxdWVyeS10YXNrLWxpc3Qgc2VlcyB0aGUgY2hhbmdlXG4gICAgdGhpcy5zZXRTdGF0ZSh7IHNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uOiB0cnVlIH0sICgpID0+IHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSC1FWEVDJywge1xuICAgICAgICBldmVudDogJ3F1ZXJ5c2ltcGxlLWZsYWctc2V0LXRydWUtc3RhdGUtdXBkYXRlZCcsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgbmV3U3RhdGU6IHtcbiAgICAgICAgICBzaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbjogdGhpcy5zdGF0ZS5zaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbixcbiAgICAgICAgICBoYXNJbml0aWFsUXVlcnlWYWx1ZTogISF0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlLFxuICAgICAgICAgIGluaXRpYWxRdWVyeVZhbHVlU2hvcnRJZDogdGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZT8uc2hvcnRJZCxcbiAgICAgICAgICBpbml0aWFsUXVlcnlWYWx1ZVZhbHVlOiB0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlPy52YWx1ZVxuICAgICAgICB9LFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgfSlcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gnLCB7XG4gICAgICBldmVudDogJ3Nob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uLWZsYWctc2V0LXRydWUnLFxuICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgZmxhZ1ZhbHVlOiB0cnVlLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICAvLyBOb3cgY2hlY2sgVVJMIHBhcmFtZXRlcnMgLSBIZWxwZXJTaW1wbGUgaGFzIGV4cGxpY2l0bHkgb3BlbmVkIHVzXG4gICAgZGVidWdMb2dnZXIubG9nKCdIQVNILUVYRUMnLCB7XG4gICAgICBldmVudDogJ3F1ZXJ5c2ltcGxlLWNoZWNrdXJscGFyYW1ldGVycy1zdGFydGluZycsXG4gICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgIGN1cnJlbnRTdGF0ZToge1xuICAgICAgICBzaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbjogdGhpcy5zdGF0ZS5zaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbixcbiAgICAgICAgaGFzSW5pdGlhbFF1ZXJ5VmFsdWU6ICEhdGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZSxcbiAgICAgICAgaW5pdGlhbFF1ZXJ5VmFsdWVTaG9ydElkOiB0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlPy5zaG9ydElkLFxuICAgICAgICBpbml0aWFsUXVlcnlWYWx1ZVZhbHVlOiB0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlPy52YWx1ZVxuICAgICAgfSxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgdGhpcy51cmxDb25zdW1wdGlvbk1hbmFnZXIuY2hlY2tVcmxQYXJhbWV0ZXJzKFxuICAgICAgdGhpcy5wcm9wcyxcbiAgICAgIHRoaXMuc3RhdGUucmVzdWx0c01vZGUsXG4gICAgICB7XG4gICAgICAgIG9uSW5pdGlhbFZhbHVlRm91bmQ6ICh2YWx1ZSkgPT4ge1xuICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSC1FWEVDJywge1xuICAgICAgICAgICAgZXZlbnQ6ICdxdWVyeXNpbXBsZS1vbmluaXRpYWx2YWx1ZWZvdW5kLWNhbGxlZCcsXG4gICAgICAgICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgICAgICAgIGhhc1ZhbHVlOiAhIXZhbHVlLFxuICAgICAgICAgICAgdmFsdWVTaG9ydElkOiB2YWx1ZT8uc2hvcnRJZCxcbiAgICAgICAgICAgIHZhbHVlVmFsdWU6IHZhbHVlPy52YWx1ZSxcbiAgICAgICAgICAgIGN1cnJlbnRTdGF0ZToge1xuICAgICAgICAgICAgICBzaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbjogdGhpcy5zdGF0ZS5zaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbixcbiAgICAgICAgICAgICAgaGFzSW5pdGlhbFF1ZXJ5VmFsdWU6ICEhdGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZSxcbiAgICAgICAgICAgICAgaW5pdGlhbFF1ZXJ5VmFsdWVTaG9ydElkOiB0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlPy5zaG9ydElkLFxuICAgICAgICAgICAgICBpbml0aWFsUXVlcnlWYWx1ZVZhbHVlOiB0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlPy52YWx1ZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgIH0pXG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICAvLyBDaGVjayBpZiB0aGlzIHNwZWNpZmljIHNob3J0SWQ6dmFsdWUgY29tYmluYXRpb24gd2FzIGFscmVhZHkgcHJvY2Vzc2VkXG4gICAgICAgICAgICBjb25zdCBwYXJhbUtleSA9IGAke3ZhbHVlLnNob3J0SWR9OiR7dmFsdWUudmFsdWV9YFxuICAgICAgICAgICAgaWYgKHRoaXMucHJvY2Vzc2VkSGFzaFBhcmFtc1JlZi5oYXMocGFyYW1LZXkpKSB7XG4gICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSC1FWEVDJywge1xuICAgICAgICAgICAgICAgIGV2ZW50OiAncXVlcnlzaW1wbGUtb25pbml0aWFsdmFsdWVmb3VuZC1hbHJlYWR5LXByb2Nlc3NlZCcsXG4gICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICAgICAgICAgICAgc2hvcnRJZDogdmFsdWUuc2hvcnRJZCxcbiAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWUudmFsdWUsXG4gICAgICAgICAgICAgICAgcGFyYW1LZXksXG4gICAgICAgICAgICAgICAgcHJvY2Vzc2VkUGFyYW1zOiBBcnJheS5mcm9tKHRoaXMucHJvY2Vzc2VkSGFzaFBhcmFtc1JlZiksXG4gICAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBPbmx5IHVwZGF0ZSBpZiB0aGUgdmFsdWUgb3Igc2hvcnRJZCBoYXMgY2hhbmdlZCB0byBhdm9pZCB1bm5lY2Vzc2FyeSByZS1yZW5kZXJzXG4gICAgICAgICAgICBjb25zdCB3aWxsVXBkYXRlID0gdGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZT8uc2hvcnRJZCAhPT0gdmFsdWUuc2hvcnRJZCB8fCB0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlPy52YWx1ZSAhPT0gdmFsdWUudmFsdWVcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNILUVYRUMnLCB7XG4gICAgICAgICAgICAgIGV2ZW50OiAncXVlcnlzaW1wbGUtb25pbml0aWFsdmFsdWVmb3VuZC13aWxsLXVwZGF0ZScsXG4gICAgICAgICAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgICAgICAgICB3aWxsVXBkYXRlLFxuICAgICAgICAgICAgICBwcmV2aW91c1Nob3J0SWQ6IHRoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWU/LnNob3J0SWQsXG4gICAgICAgICAgICAgIHByZXZpb3VzVmFsdWU6IHRoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWU/LnZhbHVlLFxuICAgICAgICAgICAgICBuZXdTaG9ydElkOiB2YWx1ZS5zaG9ydElkLFxuICAgICAgICAgICAgICBuZXdWYWx1ZTogdmFsdWUudmFsdWUsXG4gICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHdpbGxVcGRhdGUpIHtcbiAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNIJywge1xuICAgICAgICAgICAgICAgIGV2ZW50OiAndXJsLXBhcmFtLWRldGVjdGVkJyxcbiAgICAgICAgICAgICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgICAgICAgICAgICBzaG9ydElkOiB2YWx1ZS5zaG9ydElkLFxuICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZS52YWx1ZSxcbiAgICAgICAgICAgICAgICBmb3VuZEluOiAnbWFuYWdlcicsXG4gICAgICAgICAgICAgICAgdHJpZ2dlcmVkQnk6ICdoZWxwZXJzaW1wbGUtb3Blbi13aWRnZXQtZXZlbnQnLFxuICAgICAgICAgICAgICAgIHByZXZpb3VzU2hvcnRJZDogdGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZT8uc2hvcnRJZCxcbiAgICAgICAgICAgICAgICBwcmV2aW91c1ZhbHVlOiB0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlPy52YWx1ZSxcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIFJlc2V0IHRvIE5ldyBtb2RlIHdoZW4gaGFzaCBwYXJhbWV0ZXIgaXMgZGV0ZWN0ZWQgdG8gYXZvaWQgYnVncyB3aXRoIGFjY3VtdWxhdGlvbiBtb2Rlc1xuICAgICAgICAgICAgICAvLyBPTEQgSU1QTEVNRU5UQVRJT04gKHBhcmFsbGVsIGV4ZWN1dGlvbilcbiAgICAgICAgICAgICAgY29uc3Qgb2xkTmVlZHNNb2RlUmVzZXQgPSB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlICE9PSBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvblxuICAgICAgICAgICAgICBjb25zdCBvbGRDdXJyZW50TW9kZSA9IHRoaXMuc3RhdGUucmVzdWx0c01vZGVcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBcbiAgICAgICAgICAgICAgICBpbml0aWFsUXVlcnlWYWx1ZTogeyBzaG9ydElkOiB2YWx1ZS5zaG9ydElkLCB2YWx1ZTogdmFsdWUudmFsdWUgfSxcbiAgICAgICAgICAgICAgICAvLyBSZXNldCB0byBOZXcgbW9kZSBhbmQgY2xlYXIgYWNjdW11bGF0ZWRSZWNvcmRzXG4gICAgICAgICAgICAgICAgLi4uKG9sZE5lZWRzTW9kZVJlc2V0ID8geyBcbiAgICAgICAgICAgICAgICAgIHJlc3VsdHNNb2RlOiBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvbixcbiAgICAgICAgICAgICAgICAgIGFjY3VtdWxhdGVkUmVjb3JkczogW11cbiAgICAgICAgICAgICAgICB9IDoge30pXG4gICAgICAgICAgICAgIH0sICgpID0+IHtcbiAgICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gtRVhFQycsIHtcbiAgICAgICAgICAgICAgICAgIGV2ZW50OiAncXVlcnlzaW1wbGUtaW5pdGlhbHF1ZXJ5dmFsdWUtc3RhdGUtdXBkYXRlZCcsXG4gICAgICAgICAgICAgICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgICAgICAgICAgICAgIG5ld1N0YXRlOiB7XG4gICAgICAgICAgICAgICAgICAgIHNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uOiB0aGlzLnN0YXRlLnNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uLFxuICAgICAgICAgICAgICAgICAgICBoYXNJbml0aWFsUXVlcnlWYWx1ZTogISF0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlLFxuICAgICAgICAgICAgICAgICAgICBpbml0aWFsUXVlcnlWYWx1ZVNob3J0SWQ6IHRoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWU/LnNob3J0SWQsXG4gICAgICAgICAgICAgICAgICAgIGluaXRpYWxRdWVyeVZhbHVlVmFsdWU6IHRoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWU/LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICByZXN1bHRzTW9kZTogdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZVxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgICAgLy8gTkVXIElNUExFTUVOVEFUSU9OIChwYXJhbGxlbCBleGVjdXRpb24pXG4gICAgICAgICAgICAgIGlmIChvbGROZWVkc01vZGVSZXNldCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5ld1Jlc2V0UmVzdWx0ID0gdGhpcy5hY2N1bXVsYXRlZFJlY29yZHNNYW5hZ2VyLnJlc2V0TW9kZU9uSGFzaERldGVjdGlvbihcbiAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuaWQsXG4gICAgICAgICAgICAgICAgICBvbGRDdXJyZW50TW9kZVxuICAgICAgICAgICAgICAgIClcblxuICAgICAgICAgICAgICAgIC8vIENPTVBBUklTT04gTE9HR0lOR1xuICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnQ0hVTkstNS1DT01QQVJFJywge1xuICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdtb2RlLXJlc2V0LW9uLWhhc2gtZGV0ZWN0aW9uLWNvbXBhcmlzb24nLFxuICAgICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICAgICAgICAgICAgICBjb250ZXh0OiAnaGVscGVyc2ltcGxlLW9wZW4td2lkZ2V0LWV2ZW50JyxcbiAgICAgICAgICAgICAgICAgIG9sZEltcGxlbWVudGF0aW9uOiB7XG4gICAgICAgICAgICAgICAgICAgIG5lZWRzTW9kZVJlc2V0OiBvbGROZWVkc01vZGVSZXNldCxcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudE1vZGU6IG9sZEN1cnJlbnRNb2RlLFxuICAgICAgICAgICAgICAgICAgICBuZXdNb2RlOiBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvbixcbiAgICAgICAgICAgICAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ2xlYXJlZDogb2xkTmVlZHNNb2RlUmVzZXRcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICBuZXdJbXBsZW1lbnRhdGlvbjoge1xuICAgICAgICAgICAgICAgICAgICBuZWVkc01vZGVSZXNldDogb2xkTmVlZHNNb2RlUmVzZXQsXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRNb2RlOiBvbGRDdXJyZW50TW9kZSxcbiAgICAgICAgICAgICAgICAgICAgbmV3TW9kZTogbmV3UmVzZXRSZXN1bHQucmVzdWx0c01vZGUsXG4gICAgICAgICAgICAgICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NsZWFyZWQ6IG5ld1Jlc2V0UmVzdWx0LmFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPT09IDBcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICBtYXRjaDogbmV3UmVzZXRSZXN1bHQucmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uICYmIFxuICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1Jlc2V0UmVzdWx0LmFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPT09IDAsXG4gICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSC1FWEVDJywge1xuICAgICAgICAgICAgICBldmVudDogJ3F1ZXJ5c2ltcGxlLW9uaW5pdGlhbHZhbHVlZm91bmQtbm8tdmFsdWUtY2xlYXJpbmcnLFxuICAgICAgICAgICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgICAgICAgICAgaGFzQ3VycmVudEluaXRpYWxRdWVyeVZhbHVlOiAhIXRoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWUsXG4gICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC8vIE5vIG1hdGNoaW5nIHBhcmFtZXRlcnMgZm91bmQgLSBjbGVhciBzdGF0ZVxuICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWUpIHtcbiAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGluaXRpYWxRdWVyeVZhbHVlOiB1bmRlZmluZWQgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIG9uTW9kZVJlc2V0TmVlZGVkOiAoKSA9PiB7XG4gICAgICAgICAgLy8gUmVzZXQgdG8gTmV3IG1vZGUgd2hlbiBoYXNoIHBhcmFtZXRlciBpcyBkZXRlY3RlZFxuICAgICAgICAgIC8vIE9MRCBJTVBMRU1FTlRBVElPTiAocGFyYWxsZWwgZXhlY3V0aW9uKVxuICAgICAgICAgIGNvbnN0IG9sZEN1cnJlbnRNb2RlID0gdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZVxuICAgICAgICAgIGNvbnN0IG9sZE5lZWRzUmVzZXQgPSBvbGRDdXJyZW50TW9kZSAhPT0gU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb25cbiAgICAgICAgICBcbiAgICAgICAgICBpZiAob2xkTmVlZHNSZXNldCkge1xuICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNIJywge1xuICAgICAgICAgICAgICBldmVudDogJ21vZGUtcmVzZXQtbmVlZGVkLW9uLWhhc2gtZGV0ZWN0aW9uJyxcbiAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICAgICAgICAgIGN1cnJlbnRNb2RlOiBvbGRDdXJyZW50TW9kZSxcbiAgICAgICAgICAgICAgdHJpZ2dlcmVkQnk6ICdoZWxwZXJzaW1wbGUtb3Blbi13aWRnZXQtZXZlbnQnLFxuICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgXG4gICAgICAgICAgICAgIHJlc3VsdHNNb2RlOiBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvbixcbiAgICAgICAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzOiBbXVxuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgLy8gTkVXIElNUExFTUVOVEFUSU9OIChwYXJhbGxlbCBleGVjdXRpb24pXG4gICAgICAgICAgICBjb25zdCBuZXdSZXNldFJlc3VsdCA9IHRoaXMuYWNjdW11bGF0ZWRSZWNvcmRzTWFuYWdlci5yZXNldE1vZGVPbkhhc2hEZXRlY3Rpb24oXG4gICAgICAgICAgICAgIHRoaXMucHJvcHMuaWQsXG4gICAgICAgICAgICAgIG9sZEN1cnJlbnRNb2RlXG4gICAgICAgICAgICApXG5cbiAgICAgICAgICAgIC8vIENPTVBBUklTT04gTE9HR0lOR1xuICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdDSFVOSy01LUNPTVBBUkUnLCB7XG4gICAgICAgICAgICAgIGV2ZW50OiAnbW9kZS1yZXNldC1vbi1oYXNoLWRldGVjdGlvbi1jb21wYXJpc29uJyxcbiAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICAgICAgICAgIGNvbnRleHQ6ICdoZWxwZXJzaW1wbGUtb3Blbi13aWRnZXQtZXZlbnQtbW9kZS1yZXNldCcsXG4gICAgICAgICAgICAgIG9sZEltcGxlbWVudGF0aW9uOiB7XG4gICAgICAgICAgICAgICAgbmVlZHNNb2RlUmVzZXQ6IG9sZE5lZWRzUmVzZXQsXG4gICAgICAgICAgICAgICAgY3VycmVudE1vZGU6IG9sZEN1cnJlbnRNb2RlLFxuICAgICAgICAgICAgICAgIG5ld01vZGU6IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uLFxuICAgICAgICAgICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NsZWFyZWQ6IG9sZE5lZWRzUmVzZXRcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgbmV3SW1wbGVtZW50YXRpb246IHtcbiAgICAgICAgICAgICAgICBuZWVkc01vZGVSZXNldDogb2xkTmVlZHNSZXNldCxcbiAgICAgICAgICAgICAgICBjdXJyZW50TW9kZTogb2xkQ3VycmVudE1vZGUsXG4gICAgICAgICAgICAgICAgbmV3TW9kZTogbmV3UmVzZXRSZXN1bHQucmVzdWx0c01vZGUsXG4gICAgICAgICAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ2xlYXJlZDogbmV3UmVzZXRSZXN1bHQuYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA9PT0gMFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBtYXRjaDogbmV3UmVzZXRSZXN1bHQucmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uICYmIFxuICAgICAgICAgICAgICAgICAgICAgbmV3UmVzZXRSZXN1bHQuYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA9PT0gMCxcbiAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIClcbiAgfVxuXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIC8vIENodW5rIDE6IE1hbmFnZXIgaW1wbGVtZW50YXRpb24gKHIwMTguOCAtIHN3aXRjaGVkIHRvIG1hbmFnZXIpXG4gICAgLy8gU2V0dXAgbWFuYWdlciAobm8gYXV0b25vbW91cyBVUkwgY2hlY2tpbmcgLSBIZWxwZXJTaW1wbGUgb3JjaGVzdHJhdGVzKVxuICAgIC8vIE5PVEU6IHNldHVwKCkgaXMgYSBuby1vcCAtIGNhbGxiYWNrcyBhcmUgbmV2ZXIgY2FsbGVkXG4gICAgdGhpcy51cmxDb25zdW1wdGlvbk1hbmFnZXIuc2V0dXAoXG4gICAgICB0aGlzLnByb3BzLFxuICAgICAgdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSxcbiAgICAgIHt9IC8vIEVtcHR5IGNhbGxiYWNrcyAtIHNldHVwKCkgaXMgYSBuby1vcFxuICAgIClcbiAgICBcbiAgICAvLyBMaXN0ZW4gZm9yIEhlbHBlclNpbXBsZSdzIG9wZW4gd2lkZ2V0IGV2ZW50XG4gICAgLy8gUXVlcnlTaW1wbGUgc2hvdWxkIG9ubHkgcHJvY2VzcyBoYXNoIHBhcmFtZXRlcnMgd2hlbiBIZWxwZXJTaW1wbGUgZXhwbGljaXRseSBvcGVucyB0aGUgd2lkZ2V0XG4gICAgLy8gVGhpcyBlbnN1cmVzIEhlbHBlclNpbXBsZSByZW1haW5zIHRoZSBvcmNoZXN0cmF0b3JcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihPUEVOX1dJREdFVF9FVkVOVCwgdGhpcy5oYW5kbGVPcGVuV2lkZ2V0RXZlbnQpXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdIQVNILUVYRUMnLCB7XG4gICAgICBldmVudDogJ3F1ZXJ5c2ltcGxlLW1vdW50ZWQtZXZlbnQtbGlzdGVuZXItc2V0dXAnLFxuICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICBjdXJyZW50U3RhdGU6IHtcbiAgICAgICAgc2hvdWxkVXNlSW5pdGlhbFF1ZXJ5VmFsdWVGb3JTZWxlY3Rpb246IHRoaXMuc3RhdGUuc2hvdWxkVXNlSW5pdGlhbFF1ZXJ5VmFsdWVGb3JTZWxlY3Rpb24sXG4gICAgICAgIGhhc0luaXRpYWxRdWVyeVZhbHVlOiAhIXRoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWUsXG4gICAgICAgIGluaXRpYWxRdWVyeVZhbHVlU2hvcnRJZDogdGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZT8uc2hvcnRJZCxcbiAgICAgICAgaW5pdGlhbFF1ZXJ5VmFsdWVWYWx1ZTogdGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZT8udmFsdWVcbiAgICAgIH0sXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIC8vIENodW5rIDI6IE1hbmFnZXIgaW1wbGVtZW50YXRpb24gKHIwMTguMTMgLSBTdGVwIDIuMzogU3dpdGNoIHRvIG1hbmFnZXIpXG4gICAgaWYgKHRoaXMud2lkZ2V0UmVmLmN1cnJlbnQpIHtcbiAgICAgIHRoaXMudmlzaWJpbGl0eU1hbmFnZXIuc2V0dXAoXG4gICAgICAgIHRoaXMud2lkZ2V0UmVmLmN1cnJlbnQsXG4gICAgICAgIHRoaXMucHJvcHMsXG4gICAgICAgIHtcbiAgICAgICAgICBvblZpc2liaWxpdHlDaGFuZ2U6IChpc1Zpc2libGUpID0+IHtcbiAgICAgICAgICAgIC8vIFVwZGF0ZSBzdGF0ZVxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGlzUGFuZWxWaXNpYmxlOiBpc1Zpc2libGUgfSlcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gSGFuZGxlIHJlc3RvcmF0aW9uIGxvZ2ljXG4gICAgICAgICAgICB0aGlzLmhhbmRsZVZpc2liaWxpdHlDaGFuZ2UoaXNWaXNpYmxlKVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgKGlzVmlzaWJsZSkgPT4ge1xuICAgICAgICAgIC8vIE1hbmFnZXIncyBpbnRlcm5hbCBzdGF0ZSB0cmFja2luZyBjYWxsYmFja1xuICAgICAgICAgIC8vIChuby1vcCwgcmVzdG9yYXRpb24gaGFuZGxlZCBpbiBvblZpc2liaWxpdHlDaGFuZ2UpXG4gICAgICAgIH1cbiAgICAgIClcbiAgICAgIFxuICAgICAgLy8gTm90aWZ5IG1vdW50IHZpYSBtYW5hZ2VyXG4gICAgICB0aGlzLnZpc2liaWxpdHlNYW5hZ2VyLm5vdGlmeU1vdW50KHRoaXMucHJvcHMuaWQpXG4gICAgfVxuXG4gICAgLy8gQ2h1bmsgNTogSW5pdGlhbGl6ZSBhY2N1bXVsYXRlZCByZWNvcmRzIG1hbmFnZXIgc3RhdGUgKHIwMTguMjYgLSBTdGVwIDUuMTogQWRkIG1hbmFnZXIpXG4gICAgLy8gU3luYyBtYW5hZ2VyIHN0YXRlIHdpdGggd2lkZ2V0IHN0YXRlXG4gICAgaWYgKHRoaXMuc3RhdGUucmVzdWx0c01vZGUpIHtcbiAgICAgIHRoaXMuYWNjdW11bGF0ZWRSZWNvcmRzTWFuYWdlci5oYW5kbGVSZXN1bHRzTW9kZUNoYW5nZShcbiAgICAgICAgdGhpcy5wcm9wcy5pZCxcbiAgICAgICAgdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSxcbiAgICAgICAgZmFsc2VcbiAgICAgIClcbiAgICB9XG4gICAgaWYgKHRoaXMuc3RhdGUuYWNjdW11bGF0ZWRSZWNvcmRzICYmIHRoaXMuc3RhdGUuYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgIHRoaXMuYWNjdW11bGF0ZWRSZWNvcmRzTWFuYWdlci5oYW5kbGVBY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UoXG4gICAgICAgIHRoaXMucHJvcHMuaWQsXG4gICAgICAgIHRoaXMuc3RhdGUuYWNjdW11bGF0ZWRSZWNvcmRzXG4gICAgICApXG4gICAgfVxuICAgIFxuICAgIC8vIFNldCB1cCBjYWxsYmFja3MgZm9yIG1hbmFnZXJcbiAgICB0aGlzLmFjY3VtdWxhdGVkUmVjb3Jkc01hbmFnZXIuc2V0Q2FsbGJhY2tzKHtcbiAgICAgIG9uTW9kZUNoYW5nZTogKG1vZGUpID0+IHtcbiAgICAgICAgLy8gTWFuYWdlciB3aWxsIGhhbmRsZSBzdGF0ZSB1cGRhdGVzLCBidXQgd2UgbmVlZCB0byBzeW5jIHdpZGdldCBzdGF0ZVxuICAgICAgICAvLyBUaGlzIHdpbGwgYmUgaGFuZGxlZCBpbiB0aGUgY29tcGFyaXNvbiBwaGFzZVxuICAgICAgfSxcbiAgICAgIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlOiAocmVjb3JkcykgPT4ge1xuICAgICAgICAvLyBNYW5hZ2VyIHdpbGwgaGFuZGxlIHN0YXRlIHVwZGF0ZXMsIGJ1dCB3ZSBuZWVkIHRvIHN5bmMgd2lkZ2V0IHN0YXRlXG4gICAgICAgIC8vIFRoaXMgd2lsbCBiZSBoYW5kbGVkIGluIHRoZSBjb21wYXJpc29uIHBoYXNlXG4gICAgICB9XG4gICAgfSlcbiAgICBcbiAgICAvLyBMaXN0ZW4gZm9yIHNlbGVjdGlvbiBjaGFuZ2VzIGZyb20gcXVlcnktcmVzdWx0XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoUVVFUllTSU1QTEVfU0VMRUNUSU9OX0VWRU5ULCB0aGlzLmhhbmRsZVNlbGVjdGlvbkNoYW5nZSBhcyBFdmVudExpc3RlbmVyKVxuICAgIFxuICAgIC8vIExpc3RlbiBmb3IgcmVzdG9yZSByZXF1ZXN0cyB3aGVuIGlkZW50aWZ5IHBvcHVwIGNsb3Nlc1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFJFU1RPUkVfT05fSURFTlRJRllfQ0xPU0VfRVZFTlQsIHRoaXMuaGFuZGxlUmVzdG9yZU9uSWRlbnRpZnlDbG9zZSBhcyBFdmVudExpc3RlbmVyKVxuICAgIFxuICAgIC8vIEdyYXBoaWNzIGxheWVyIHdpbGwgYmUgaW5pdGlhbGl6ZWQgd2hlbiBtYXAgdmlldyBiZWNvbWVzIGF2YWlsYWJsZSB2aWEgSmltdU1hcFZpZXdDb21wb25lbnRcbiAgfVxuXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgIC8vIENodW5rIDE6IENsZWFuIHVwIG1hbmFnZXIgKHIwMTguOClcbiAgICB0aGlzLnVybENvbnN1bXB0aW9uTWFuYWdlci5jbGVhbnVwKClcbiAgICBcbiAgICAvLyBDbGVhbiB1cCBIZWxwZXJTaW1wbGUgb3BlbiB3aWRnZXQgZXZlbnQgbGlzdGVuZXJcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihPUEVOX1dJREdFVF9FVkVOVCwgdGhpcy5oYW5kbGVPcGVuV2lkZ2V0RXZlbnQpXG4gICAgXG4gICAgLy8gQ2h1bmsgMjogQ2xlYW4gdXAgbWFuYWdlciAocjAxOC4xMyAtIFN0ZXAgMi4zOiBTd2l0Y2ggdG8gbWFuYWdlcilcbiAgICB0aGlzLnZpc2liaWxpdHlNYW5hZ2VyLmNsZWFudXAoKVxuICAgIHRoaXMudmlzaWJpbGl0eU1hbmFnZXIubm90aWZ5VW5tb3VudCh0aGlzLnByb3BzLmlkKVxuICAgIFxuICAgIC8vIENsZWFuIHVwIHNlbGVjdGlvbiBjaGFuZ2UgbGlzdGVuZXJcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihRVUVSWVNJTVBMRV9TRUxFQ1RJT05fRVZFTlQsIHRoaXMuaGFuZGxlU2VsZWN0aW9uQ2hhbmdlIGFzIEV2ZW50TGlzdGVuZXIpXG4gICAgXG4gICAgLy8gQ2xlYW4gdXAgcmVzdG9yZSBvbiBpZGVudGlmeSBjbG9zZSBsaXN0ZW5lclxuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFJFU1RPUkVfT05fSURFTlRJRllfQ0xPU0VfRVZFTlQsIHRoaXMuaGFuZGxlUmVzdG9yZU9uSWRlbnRpZnlDbG9zZSBhcyBFdmVudExpc3RlbmVyKVxuICAgIFxuICAgIC8vIENodW5rIDQ6IEdyYXBoaWNzIGxheWVyIGNsZWFudXAgKHIwMTguMjUgLSBTdGVwIDQuMzogUmVtb3ZlIG9sZCBpbXBsZW1lbnRhdGlvbilcbiAgICB0aGlzLmdyYXBoaWNzTGF5ZXJNYW5hZ2VyLmNsZWFudXAodGhpcy5wcm9wcy5pZClcbiAgICBcbiAgICAvLyBDaHVuayA1OiBDbGVhbiB1cCBhY2N1bXVsYXRlZCByZWNvcmRzIG1hbmFnZXIgKHIwMTguMjYgLSBTdGVwIDUuMTogQWRkIG1hbmFnZXIpXG4gICAgdGhpcy5hY2N1bXVsYXRlZFJlY29yZHNNYW5hZ2VyLmNsZWFudXAoKVxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnV0lER0VULVNUQVRFJywge1xuICAgICAgZXZlbnQ6ICd3aWRnZXQtY2xvc2VkJyxcbiAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgaXNPcGVuOiBmYWxzZSxcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgfSlcbiAgfVxuXG4gIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHM6IEFsbFdpZGdldFByb3BzPElNQ29uZmlnPikge1xuICAgIC8vIFF1ZXJ5U2ltcGxlIG5vIGxvbmdlciBhdXRvbm9tb3VzbHkgY2hlY2tzIFVSTCBwYXJhbWV0ZXJzXG4gICAgLy8gT25seSBIZWxwZXJTaW1wbGUgY2FuIHRyaWdnZXIgaGFzaCBwYXJhbWV0ZXIgcHJvY2Vzc2luZyB2aWEgT1BFTl9XSURHRVRfRVZFTlRcbiAgICAvLyBUaGlzIGVuc3VyZXMgSGVscGVyU2ltcGxlIHJlbWFpbnMgdGhlIG9yY2hlc3RyYXRvclxuICAgIFxuICAgIC8vIENodW5rIDQ6IEdyYXBoaWNzIGxheWVyIGlzIG5vdyByZXF1aXJlZCAocjAxOC4yNSAtIFN0ZXAgNC4zOiBSZW1vdmUgY29uZmlnIGNoYW5nZSBoYW5kbGluZylcbiAgICAvLyBObyBuZWVkIHRvIGhhbmRsZSBjb25maWcgY2hhbmdlcyBmb3IgZ3JhcGhpY3MgbGF5ZXIgc2luY2UgaXQncyBhbHdheXMgZW5hYmxlZFxuICB9XG5cbiAgLyoqXG4gICAqIE5vdGlmaWVzIEhlbHBlclNpbXBsZSB3aWRnZXQgb2Ygc2VsZWN0aW9uIGNoYW5nZXMgdmlhIGN1c3RvbSBldmVudC5cbiAgICogXG4gICAqIFRoaXMgbWV0aG9kIGRpc3BhdGNoZXMgYSBjdXN0b20gZXZlbnQgdGhhdCBIZWxwZXJTaW1wbGUgbGlzdGVucyB0byBmb3IgdHJhY2tpbmdcbiAgICogc2VsZWN0aW9uIHN0YXRlLiBDYWxsZWQgYnkgUXVlcnlUYXNrUmVzdWx0IGNvbXBvbmVudCB3aGVuIHVzZXIgc2VsZWN0cyByZWNvcmRzLlxuICAgKiBcbiAgICogQHBhcmFtIHJlY29yZElkcyAtIEFycmF5IG9mIHNlbGVjdGVkIHJlY29yZCBJRHMgKG9iamVjdElkcyBmcm9tIHRoZSBmZWF0dXJlIGxheWVyKVxuICAgKiBAcGFyYW0gZGF0YVNvdXJjZUlkIC0gT3B0aW9uYWwgZGF0YSBzb3VyY2UgSUQgZm9yIHRoZSBzZWxlY3RlZCByZWNvcmRzXG4gICAqIFxuICAgKiBAc2luY2UgMS4xOS4wLXIwMTcuMFxuICAgKi9cbiAgbm90aWZ5SGVscGVyU2ltcGxlT2ZTZWxlY3Rpb24gPSAocmVjb3JkSWRzOiBzdHJpbmdbXSwgZGF0YVNvdXJjZUlkPzogc3RyaW5nKSA9PiB7XG4gICAgY29uc3QgeyBpZCB9ID0gdGhpcy5wcm9wc1xuICAgIFxuICAgIGNvbnN0IGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KFFVRVJZU0lNUExFX1NFTEVDVElPTl9FVkVOVCwge1xuICAgICAgZGV0YWlsOiB7XG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgcmVjb3JkSWRzLFxuICAgICAgICBkYXRhU291cmNlSWRcbiAgICAgIH0sXG4gICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgY2FuY2VsYWJsZTogdHJ1ZVxuICAgIH0pXG4gICAgd2luZG93LmRpc3BhdGNoRXZlbnQoZXZlbnQpXG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlcyB3aWRnZXQgcGFuZWwgdmlzaWJpbGl0eSBjaGFuZ2VzIGZyb20gV2lkZ2V0VmlzaWJpbGl0eU1hbmFnZXIuXG4gICAqIFxuICAgKiBUaGlzIG1ldGhvZCBpbXBsZW1lbnRzIHRoZSBzZWxlY3Rpb24gcmVzdG9yYXRpb24gcGF0dGVybjpcbiAgICogLSBXaGVuIHBhbmVsIG9wZW5zOiBSZXN0b3JlcyBzZWxlY3Rpb24gdG8gbWFwIGlmIHdpZGdldCBoYXMgYWNjdW11bGF0ZWQgcmVjb3JkcyBvciBsYXN0IHNlbGVjdGlvblxuICAgKiAtIFdoZW4gcGFuZWwgY2xvc2VzOiBDbGVhcnMgc2VsZWN0aW9uIGZyb20gbWFwIChidXQgcHJlc2VydmVzIHdpZGdldCBzdGF0ZSBmb3IgcmVzdG9yYXRpb24pXG4gICAqIFxuICAgKiBUaGUgcmVzdG9yYXRpb24gbG9naWMgcmVzcGVjdHMgdGhlIGN1cnJlbnQgcmVzdWx0cyBtb2RlOlxuICAgKiAtIFwiQWRkIHRvXCIgLyBcIlJlbW92ZSBmcm9tXCIgbW9kZXM6IFVzZXMgYWNjdW11bGF0ZWQgcmVjb3JkcyBmb3IgcmVzdG9yYXRpb25cbiAgICogLSBcIk5ld1wiIG1vZGU6IFVzZXMgbGFzdFNlbGVjdGlvbiBzdGF0ZSBmb3IgcmVzdG9yYXRpb25cbiAgICogXG4gICAqIEBwYXJhbSBpc1Zpc2libGUgLSBUcnVlIGlmIHdpZGdldCBwYW5lbCBpcyB2aXNpYmxlLCBmYWxzZSBpZiBoaWRkZW5cbiAgICogXG4gICAqIEBzaW5jZSAxLjE5LjAtcjAxOC4xMyAoQ2h1bmsgMjogTWFuYWdlciBpbXBsZW1lbnRhdGlvbilcbiAgICogQHNlZSB7QGxpbmsgV2lkZ2V0VmlzaWJpbGl0eU1hbmFnZXJ9IGZvciB2aXNpYmlsaXR5IGRldGVjdGlvbiBpbXBsZW1lbnRhdGlvblxuICAgKi9cbiAgaGFuZGxlVmlzaWJpbGl0eUNoYW5nZSA9IChpc1Zpc2libGU6IGJvb2xlYW4pID0+IHtcbiAgICBpZiAoaXNWaXNpYmxlKSB7XG4gICAgICAvLyBXaGVuIHBhbmVsIG9wZW5zLCBjaGVjayBpZiB3ZSBoYXZlIHNlbGVjdGlvbiB0byByZXN0b3JlXG4gICAgICBjb25zdCBpc0FjY3VtdWxhdGlvbk1vZGUgPSB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uXG4gICAgICBjb25zdCBoYXNBY2N1bXVsYXRlZFJlY29yZHMgPSB0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3JkcyAmJiB0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwXG4gICAgICBjb25zdCBoYXNTZWxlY3Rpb25TdGF0ZSA9IHRoaXMuc3RhdGUuaGFzU2VsZWN0aW9uIHx8IGZhbHNlXG4gICAgICBjb25zdCBoYXNTZWxlY3Rpb25Ub1Jlc3RvcmUgPSBpc0FjY3VtdWxhdGlvbk1vZGUgXG4gICAgICAgID8gaGFzQWNjdW11bGF0ZWRSZWNvcmRzIFxuICAgICAgICA6IGhhc1NlbGVjdGlvblN0YXRlXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgZXZlbnQ6ICdwYW5lbC1vcGVuZWQtY2hlY2tpbmctc2VsZWN0aW9uJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICAgIHJlc3VsdHNNb2RlOiB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlLFxuICAgICAgICBpc0FjY3VtdWxhdGlvbk1vZGUsXG4gICAgICAgIGhhc1NlbGVjdGlvbjogaGFzU2VsZWN0aW9uU3RhdGUsXG4gICAgICAgIGhhc0FjY3VtdWxhdGVkUmVjb3JkcyxcbiAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IHRoaXMuc3RhdGUuYWNjdW11bGF0ZWRSZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgc2VsZWN0aW9uUmVjb3JkQ291bnQ6IHRoaXMuc3RhdGUuc2VsZWN0aW9uUmVjb3JkQ291bnQgfHwgMCxcbiAgICAgICAgaGFzTGFzdFNlbGVjdGlvbjogISF0aGlzLnN0YXRlLmxhc3RTZWxlY3Rpb24sXG4gICAgICAgIGxhc3RTZWxlY3Rpb25SZWNvcmRDb3VudDogdGhpcy5zdGF0ZS5sYXN0U2VsZWN0aW9uPy5yZWNvcmRJZHMubGVuZ3RoIHx8IDAsXG4gICAgICAgIGhhc1NlbGVjdGlvblRvUmVzdG9yZSxcbiAgICAgICAgZGVjaXNpb25Mb2dpYzoge1xuICAgICAgICAgICdpc0FjY3VtdWxhdGlvbk1vZGUnOiBpc0FjY3VtdWxhdGlvbk1vZGUsXG4gICAgICAgICAgJ2hhc0FjY3VtdWxhdGVkUmVjb3Jkcyc6IGhhc0FjY3VtdWxhdGVkUmVjb3JkcyxcbiAgICAgICAgICAnaGFzU2VsZWN0aW9uU3RhdGUnOiBoYXNTZWxlY3Rpb25TdGF0ZSxcbiAgICAgICAgICAnY2FsY3VsYXRlZC1oYXNTZWxlY3Rpb25Ub1Jlc3RvcmUnOiBoYXNTZWxlY3Rpb25Ub1Jlc3RvcmUsXG4gICAgICAgICAgJ3dpbGwtY2FsbC1hZGRTZWxlY3Rpb25Ub01hcCc6IGhhc1NlbGVjdGlvblRvUmVzdG9yZVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgXG4gICAgICAvLyBBZGQgc2VsZWN0aW9uIHRvIG1hcCBpZiB3ZSBoYXZlIG9uZVxuICAgICAgaWYgKGhhc1NlbGVjdGlvblRvUmVzdG9yZSkge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgICAgZXZlbnQ6ICdwYW5lbC1vcGVuZWQtY2FsbGluZy1hZGRTZWxlY3Rpb25Ub01hcCcsXG4gICAgICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICAgICAgcmVhc29uOiAnaGFzU2VsZWN0aW9uVG9SZXN0b3JlLWlzLXRydWUnXG4gICAgICAgIH0pXG4gICAgICAgIHRoaXMuYWRkU2VsZWN0aW9uVG9NYXAoKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICAgIGV2ZW50OiAncGFuZWwtb3BlbmVkLXNraXBwaW5nLWFkZFNlbGVjdGlvblRvTWFwJyxcbiAgICAgICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgICAgICByZWFzb246ICdoYXNTZWxlY3Rpb25Ub1Jlc3RvcmUtaXMtZmFsc2UnLFxuICAgICAgICAgIHdoeTogaXNBY2N1bXVsYXRpb25Nb2RlIFxuICAgICAgICAgICAgPyAnbm8tYWNjdW11bGF0ZWQtcmVjb3JkcycgXG4gICAgICAgICAgICA6ICduby1oYXNTZWxlY3Rpb24tc3RhdGUnXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFdoZW4gcGFuZWwgY2xvc2VzLCBjbGVhciBzZWxlY3Rpb24gZnJvbSBtYXAgb25seSAoa2VlcCB3aWRnZXQgc3RhdGUpXG4gICAgICBjb25zdCBpc0FjY3VtdWxhdGlvbk1vZGUgPSB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uXG4gICAgICBjb25zdCBoYXNBY2N1bXVsYXRlZFJlY29yZHMgPSB0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3JkcyAmJiB0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwXG4gICAgICBjb25zdCBoYXNTZWxlY3Rpb25TdGF0ZSA9IHRoaXMuc3RhdGUuaGFzU2VsZWN0aW9uIHx8IGZhbHNlXG4gICAgICBjb25zdCBoYXNTZWxlY3Rpb25Ub0NsZWFyID0gaXNBY2N1bXVsYXRpb25Nb2RlIFxuICAgICAgICA/IGhhc0FjY3VtdWxhdGVkUmVjb3JkcyBcbiAgICAgICAgOiBoYXNTZWxlY3Rpb25TdGF0ZVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAncGFuZWwtY2xvc2VkLWNoZWNraW5nLXNlbGVjdGlvbicsXG4gICAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgICByZXN1bHRzTW9kZTogdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSxcbiAgICAgICAgaXNBY2N1bXVsYXRpb25Nb2RlLFxuICAgICAgICBoYXNTZWxlY3Rpb246IGhhc1NlbGVjdGlvblN0YXRlLFxuICAgICAgICBoYXNBY2N1bXVsYXRlZFJlY29yZHMsXG4gICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiB0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgIHNlbGVjdGlvblJlY29yZENvdW50OiB0aGlzLnN0YXRlLnNlbGVjdGlvblJlY29yZENvdW50IHx8IDAsXG4gICAgICAgIGhhc0xhc3RTZWxlY3Rpb246ICEhdGhpcy5zdGF0ZS5sYXN0U2VsZWN0aW9uLFxuICAgICAgICBsYXN0U2VsZWN0aW9uUmVjb3JkQ291bnQ6IHRoaXMuc3RhdGUubGFzdFNlbGVjdGlvbj8ucmVjb3JkSWRzLmxlbmd0aCB8fCAwLFxuICAgICAgICBoYXNTZWxlY3Rpb25Ub0NsZWFyLFxuICAgICAgICBkZWNpc2lvbkxvZ2ljOiB7XG4gICAgICAgICAgJ2lzQWNjdW11bGF0aW9uTW9kZSc6IGlzQWNjdW11bGF0aW9uTW9kZSxcbiAgICAgICAgICAnaGFzQWNjdW11bGF0ZWRSZWNvcmRzJzogaGFzQWNjdW11bGF0ZWRSZWNvcmRzLFxuICAgICAgICAgICdoYXNTZWxlY3Rpb25TdGF0ZSc6IGhhc1NlbGVjdGlvblN0YXRlLFxuICAgICAgICAgICdjYWxjdWxhdGVkLWhhc1NlbGVjdGlvblRvQ2xlYXInOiBoYXNTZWxlY3Rpb25Ub0NsZWFyLFxuICAgICAgICAgICd3aWxsLWNhbGwtY2xlYXJTZWxlY3Rpb25Gcm9tTWFwJzogaGFzU2VsZWN0aW9uVG9DbGVhclxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgXG4gICAgICBpZiAoaGFzU2VsZWN0aW9uVG9DbGVhcikge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgICAgZXZlbnQ6ICdwYW5lbC1jbG9zZWQtY2FsbGluZy1jbGVhclNlbGVjdGlvbkZyb21NYXAnLFxuICAgICAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgICAgIHJlYXNvbjogJ2hhc1NlbGVjdGlvblRvQ2xlYXItaXMtdHJ1ZSdcbiAgICAgICAgfSlcbiAgICAgICAgdGhpcy5jbGVhclNlbGVjdGlvbkZyb21NYXAoKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICAgIGV2ZW50OiAncGFuZWwtY2xvc2VkLW5vLXNlbGVjdGlvbi10by1jbGVhcicsXG4gICAgICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICAgICAgcmVhc29uOiAnaGFzU2VsZWN0aW9uVG9DbGVhci1pcy1mYWxzZScsXG4gICAgICAgICAgd2h5OiBpc0FjY3VtdWxhdGlvbk1vZGUgXG4gICAgICAgICAgICA/ICduby1hY2N1bXVsYXRlZC1yZWNvcmRzJyBcbiAgICAgICAgICAgIDogJ25vLWhhc1NlbGVjdGlvbi1zdGF0ZSdcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlcyBtYXAgdmlldyBjaGFuZ2UgZnJvbSBKaW11TWFwVmlld0NvbXBvbmVudC5cbiAgICogXG4gICAqIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCBieSBKaW11TWFwVmlld0NvbXBvbmVudCB3aGVuIHRoZSBtYXAgdmlldyBiZWNvbWVzIGF2YWlsYWJsZVxuICAgKiBvciBjaGFuZ2VzLiBJdCBkZWxlZ2F0ZXMgdG8gTWFwVmlld01hbmFnZXIgZm9yIHJlZmVyZW5jZSBtYW5hZ2VtZW50IGFuZCBpbml0aWFsaXplc1xuICAgKiB0aGUgZ3JhcGhpY3MgbGF5ZXIgaWYgZW5hYmxlZCBpbiB3aWRnZXQgY29uZmlndXJhdGlvbi5cbiAgICogXG4gICAqIEBwYXJhbSBqaW11TWFwVmlldyAtIFRoZSBKaW11TWFwVmlldyBpbnN0YW5jZSBmcm9tIEppbXVNYXBWaWV3Q29tcG9uZW50LCBvciBudWxsIGlmIHVuYXZhaWxhYmxlXG4gICAqIFxuICAgKiBAc2luY2UgMS4xOS4wLXIwMTguMTggKENodW5rIDY6IE1hbmFnZXIgaW1wbGVtZW50YXRpb24pXG4gICAqIEBzZWUge0BsaW5rIE1hcFZpZXdNYW5hZ2VyfSBmb3IgbWFwIHZpZXcgcmVmZXJlbmNlIG1hbmFnZW1lbnRcbiAgICovXG4gIHByaXZhdGUgaGFuZGxlSmltdU1hcFZpZXdDaGFuZ2VkID0gKGppbXVNYXBWaWV3OiBKaW11TWFwVmlldyB8IG51bGwpID0+IHtcbiAgICBjb25zdCB7IGlkLCBjb25maWcgfSA9IHRoaXMucHJvcHNcbiAgICBcbiAgICAvLyBNYW5hZ2VyIGltcGxlbWVudGF0aW9uIChyMDE4LjE2IC0gU3RlcCA2LjM6IFN3aXRjaCB0byBtYW5hZ2VyKVxuICAgIHRoaXMubWFwVmlld01hbmFnZXIuaGFuZGxlSmltdU1hcFZpZXdDaGFuZ2VkKFxuICAgICAgamltdU1hcFZpZXcsXG4gICAgICB0aGlzLnByb3BzLFxuICAgICAge1xuICAgICAgICBvbk1hcFZpZXdDaGFuZ2U6IChuZXdKaW11TWFwVmlldykgPT4ge1xuICAgICAgICAgIC8vIEdldCBtYXAgdmlldyBmcm9tIG1hbmFnZXJcbiAgICAgICAgICBjb25zdCBuZXdNYXBWaWV3ID0gdGhpcy5tYXBWaWV3TWFuYWdlci5nZXRNYXBWaWV3KClcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBDaHVuayA0OiBHcmFwaGljcyBsYXllciBpbml0aWFsaXphdGlvbiAocjAxOC4yNSAtIFN0ZXAgNC4zOiBSZW1vdmUgb2xkIGltcGxlbWVudGF0aW9uKVxuICAgICAgICAgIC8vIEluaXRpYWxpemUgZ3JhcGhpY3MgbGF5ZXIgaWYgbWFwIHZpZXcgaXMgYXZhaWxhYmxlIGFuZCBncmFwaGljcyBsYXllciBzaG91bGQgYmUgaW5pdGlhbGl6ZWRcbiAgICAgICAgICBpZiAodGhpcy5ncmFwaGljc0xheWVyTWFuYWdlci5zaG91bGRJbml0aWFsaXplKGNvbmZpZywgbmV3TWFwVmlldykgJiYgbmV3TWFwVmlldykge1xuICAgICAgICAgICAgLy8gVXNlIHZvaWQgdG8gaGFuZGxlIHByb21pc2Ugd2l0aG91dCBibG9ja2luZ1xuICAgICAgICAgICAgdm9pZCB0aGlzLmdyYXBoaWNzTGF5ZXJNYW5hZ2VyLmluaXRpYWxpemUoaWQsIG5ld01hcFZpZXcsIHtcbiAgICAgICAgICAgICAgb25HcmFwaGljc0xheWVySW5pdGlhbGl6ZWQ6IChncmFwaGljc0xheWVyKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIHN0YXRlIHRvIGZvcmNlIHJlLXJlbmRlciBhbmQgdXBkYXRlIHByb3BzXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGdyYXBoaWNzTGF5ZXJJbml0aWFsaXplZDogdHJ1ZSB9KVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIClcbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplcyBncmFwaGljcyBsYXllciBsYXppbHkgd2hlbiBvdXRwdXQgZGF0YSBzb3VyY2UgYmVjb21lcyBhdmFpbGFibGUuXG4gICAqIFxuICAgKiBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgYnkgUXVlcnlUYXNrIGNvbXBvbmVudCB3aGVuIGFuIG91dHB1dCBkYXRhIHNvdXJjZSBpcyBjcmVhdGVkLlxuICAgKiBJdCByZXRyaWV2ZXMgdGhlIG1hcCB2aWV3IGZyb20gTWFwVmlld01hbmFnZXIgYW5kIGluaXRpYWxpemVzIHRoZSBncmFwaGljcyBsYXllclxuICAgKiB1c2luZyBHcmFwaGljc0xheWVyTWFuYWdlciBpZiBub3QgYWxyZWFkeSBpbml0aWFsaXplZC5cbiAgICogXG4gICAqIEBwYXJhbSBvdXRwdXREUyAtIFRoZSBvdXRwdXQgZGF0YSBzb3VyY2UgdGhhdCB3YXMgY3JlYXRlZFxuICAgKiBcbiAgICogQHNpbmNlIDEuMTkuMC1yMDE3LjBcbiAgICogQHNlZSB7QGxpbmsgR3JhcGhpY3NMYXllck1hbmFnZXIuaW5pdGlhbGl6ZUZyb21PdXRwdXREU30gZm9yIGdyYXBoaWNzIGxheWVyIGluaXRpYWxpemF0aW9uXG4gICAqIEBzZWUge0BsaW5rIE1hcFZpZXdNYW5hZ2VyLmdldE1hcFZpZXd9IGZvciBtYXAgdmlldyByZXRyaWV2YWxcbiAgICovXG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemVzIGdyYXBoaWNzIGxheWVyIGxhemlseSB3aGVuIG91dHB1dCBkYXRhIHNvdXJjZSBiZWNvbWVzIGF2YWlsYWJsZS5cbiAgICogXG4gICAqIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCBieSBRdWVyeVRhc2sgY29tcG9uZW50IHdoZW4gYW4gb3V0cHV0IGRhdGEgc291cmNlIGlzIGNyZWF0ZWQuXG4gICAqIEl0IHJldHJpZXZlcyB0aGUgbWFwIHZpZXcgZnJvbSBNYXBWaWV3TWFuYWdlciBhbmQgaW5pdGlhbGl6ZXMgdGhlIGdyYXBoaWNzIGxheWVyXG4gICAqIHVzaW5nIEdyYXBoaWNzTGF5ZXJNYW5hZ2VyIGlmIG5vdCBhbHJlYWR5IGluaXRpYWxpemVkLlxuICAgKiBcbiAgICogQHBhcmFtIG91dHB1dERTIC0gVGhlIG91dHB1dCBkYXRhIHNvdXJjZSB0aGF0IHdhcyBjcmVhdGVkXG4gICAqIFxuICAgKiBAc2luY2UgMS4xOS4wLXIwMTcuMFxuICAgKiBAc2VlIHtAbGluayBHcmFwaGljc0xheWVyTWFuYWdlci5pbml0aWFsaXplRnJvbU91dHB1dERTfSBmb3IgZ3JhcGhpY3MgbGF5ZXIgaW5pdGlhbGl6YXRpb25cbiAgICogQHNlZSB7QGxpbmsgTWFwVmlld01hbmFnZXIuZ2V0TWFwVmlld30gZm9yIG1hcCB2aWV3IHJldHJpZXZhbFxuICAgKi9cbiAgcHVibGljIGluaXRpYWxpemVHcmFwaGljc0xheWVyRnJvbU91dHB1dERTID0gYXN5bmMgKG91dHB1dERTOiBEYXRhU291cmNlKSA9PiB7XG4gICAgY29uc3QgeyBpZCwgY29uZmlnIH0gPSB0aGlzLnByb3BzXG4gICAgXG4gICAgLy8gQ2h1bmsgNDogR3JhcGhpY3MgbGF5ZXIgaW5pdGlhbGl6YXRpb24gKHIwMTguMjUgLSBTdGVwIDQuMzogUmVtb3ZlIG9sZCBpbXBsZW1lbnRhdGlvbilcbiAgICAvLyBVc2UgbWFwIHZpZXcgZnJvbSBtYW5hZ2VyIGlmIGF2YWlsYWJsZVxuICAgIGNvbnN0IG1hcFZpZXcgPSB0aGlzLm1hcFZpZXdNYW5hZ2VyLmdldE1hcFZpZXcoKSB8fCB0aGlzLm1hcFZpZXdSZWYuY3VycmVudFxuICAgIFxuICAgIGF3YWl0IHRoaXMuZ3JhcGhpY3NMYXllck1hbmFnZXIuaW5pdGlhbGl6ZUZyb21PdXRwdXREUyhcbiAgICAgIGlkLFxuICAgICAgY29uZmlnLFxuICAgICAgb3V0cHV0RFMsXG4gICAgICBtYXBWaWV3LFxuICAgICAge1xuICAgICAgICBvbkdyYXBoaWNzTGF5ZXJJbml0aWFsaXplZDogKGdyYXBoaWNzTGF5ZXIpID0+IHtcbiAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgZ3JhcGhpY3NMYXllckluaXRpYWxpemVkOiB0cnVlIH0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICApXG4gIH1cblxuXG4gIC8qKlxuICAgKiBDbGVhcnMgYWxsIGdyYXBoaWNzIGZyb20gdGhlIGdyYXBoaWNzIGxheWVyIGlmIGl0IGV4aXN0cy5cbiAgICogXG4gICAqIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCB3aGVuIGNsZWFyaW5nIHJlc3VsdHMgb3Igc3dpdGNoaW5nIHF1ZXJpZXMgaW4gXCJOZXdcIiBtb2RlXG4gICAqIHRvIGVuc3VyZSBncmFwaGljcyBhcmUgcmVtb3ZlZCBmcm9tIHRoZSBtYXAuIEl0IGRvZXMgbm90IHJlbW92ZSB0aGUgZ3JhcGhpY3MgbGF5ZXJcbiAgICogaXRzZWxmLCBvbmx5IGNsZWFycyBpdHMgY29udGVudHMuXG4gICAqIFxuICAgKiBAc2luY2UgMS4xOS4wLXIwMTcuMFxuICAgKiBAc2VlIHtAbGluayBHcmFwaGljc0xheWVyTWFuYWdlci5jbGVhckdyYXBoaWNzfSBmb3IgZ3JhcGhpY3MgY2xlYXJpbmcgbG9naWNcbiAgICovXG4gIHB1YmxpYyBjbGVhckdyYXBoaWNzTGF5ZXJJZkV4aXN0cyA9ICgpID0+IHtcbiAgICBjb25zdCB7IGNvbmZpZyB9ID0gdGhpcy5wcm9wc1xuICAgIFxuICAgIC8vIENodW5rIDQ6IEdyYXBoaWNzIGxheWVyIGNsZWFyaW5nIChyMDE4LjI1IC0gU3RlcCA0LjM6IFJlbW92ZSBvbGQgaW1wbGVtZW50YXRpb24pXG4gICAgdGhpcy5ncmFwaGljc0xheWVyTWFuYWdlci5jbGVhckdyYXBoaWNzKHRoaXMucHJvcHMuaWQsIGNvbmZpZylcbiAgfVxuXG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgc2VsZWN0aW9uIGNoYW5nZSBldmVudHMgZnJvbSBRdWVyeVRhc2tSZXN1bHQgY29tcG9uZW50LlxuICAgKiBcbiAgICogVGhpcyBtZXRob2QgdXBkYXRlcyB3aWRnZXQgc3RhdGUgd2hlbiByZWNvcmRzIGFyZSBzZWxlY3RlZCBvciBkZXNlbGVjdGVkIGluIHRoZVxuICAgKiByZXN1bHRzIHRhYi4gSXQgcmVzcGVjdHMgdGhlIGN1cnJlbnQgcmVzdWx0cyBtb2RlOlxuICAgKiAtIFwiQWRkIHRvXCIgLyBcIlJlbW92ZSBmcm9tXCIgbW9kZXM6IFVzZXMgYWNjdW11bGF0ZWQgcmVjb3JkcyBjb3VudCBmb3IgcmVzdG9yYXRpb24gc3RhdGVcbiAgICogLSBcIk5ld1wiIG1vZGU6IFVzZXMgZXZlbnQgcmVjb3JkIElEcyBmb3IgcmVzdG9yYXRpb24gc3RhdGVcbiAgICogXG4gICAqIEFsc28gaGFuZGxlcyBhdXRvbWF0aWMgbW9kZSByZXNldDogSWYgc2VsZWN0aW9uIGlzIGNsZWFyZWQgaW4gXCJSZW1vdmUgZnJvbVwiIG1vZGUsXG4gICAqIHRoZSBtb2RlIGlzIGF1dG9tYXRpY2FsbHkgcmVzZXQgdG8gXCJOZXdcIiBzaW5jZSBSZW1vdmUgbW9kZSByZXF1aXJlcyBzZWxlY3Rpb24gdG8gZnVuY3Rpb24uXG4gICAqIFxuICAgKiBAcGFyYW0gZXZlbnQgLSBDdXN0b20gZXZlbnQgY29udGFpbmluZyBzZWxlY3Rpb24gZGV0YWlscyAod2lkZ2V0SWQsIHJlY29yZElkcywgb3V0cHV0RHNJZCwgcXVlcnlJdGVtQ29uZmlnSWQpXG4gICAqIFxuICAgKiBAc2luY2UgMS4xOS4wLXIwMTcuMFxuICAgKi9cbiAgaGFuZGxlU2VsZWN0aW9uQ2hhbmdlID0gKGV2ZW50OiBFdmVudCkgPT4ge1xuICAgIGNvbnN0IGN1c3RvbUV2ZW50ID0gZXZlbnQgYXMgQ3VzdG9tRXZlbnQ8eyB3aWRnZXRJZDogc3RyaW5nLCByZWNvcmRJZHM6IHN0cmluZ1tdLCBkYXRhU291cmNlSWQ/OiBzdHJpbmcsIG91dHB1dERzSWQ/OiBzdHJpbmcsIHF1ZXJ5SXRlbUNvbmZpZ0lkPzogc3RyaW5nIH0+XG4gICAgY29uc3QgeyBpZCB9ID0gdGhpcy5wcm9wc1xuICAgIFxuICAgIC8vIE9ubHkgdHJhY2sgaWYgdGhpcyBpcyBmb3Igb3VyIHdpZGdldFxuICAgIGlmIChjdXN0b21FdmVudC5kZXRhaWwud2lkZ2V0SWQgIT09IGlkKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgY29uc3QgaGFzU2VsZWN0aW9uID0gY3VzdG9tRXZlbnQuZGV0YWlsLnJlY29yZElkcyAmJiBjdXN0b21FdmVudC5kZXRhaWwucmVjb3JkSWRzLmxlbmd0aCA+IDBcbiAgICBcbiAgICAvLyBJZiB0aGUgcGFuZWwgaXMgTk9UIHZpc2libGUsIGFuZCB3ZSBhcmUgcmVjZWl2aW5nIGFuIEVNUFRZIHNlbGVjdGlvbixcbiAgICAvLyBpdCdzIGFsbW9zdCBjZXJ0YWlubHkgb3VyIG93biAnY2xlYXJTZWxlY3Rpb25Gcm9tTWFwJyBsb2dpYyBmaXJpbmcuXG4gICAgLy8gV2Ugc2hvdWxkIElHTk9SRSB0aGlzIHNvIHdlIGRvbid0IHdpcGUgb3V0IHRoZSBsYXN0U2VsZWN0aW9uIHN0YXRlLlxuICAgIGlmICghdGhpcy5zdGF0ZS5pc1BhbmVsVmlzaWJsZSAmJiAhaGFzU2VsZWN0aW9uKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAnaGFuZGxlU2VsZWN0aW9uQ2hhbmdlLWlnbm9yaW5nLWVtcHR5LXNlbGVjdGlvbi13aGlsZS1wYW5lbC1jbG9zZWQnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBcbiAgICAvLyBJbiBcIkFkZCB0b1wiIG9yIFwiUmVtb3ZlIGZyb21cIiBtb2RlLCB1c2UgYWNjdW11bGF0ZWQgcmVjb3JkcyBjb3VudCBmb3IgcmVzdG9yYXRpb25cbiAgICAvLyBUaGUgYWNjdW11bGF0ZWQgcmVjb3JkcyBhcmUgdGhlIHNvdXJjZSBvZiB0cnV0aCBmb3Igd2hhdCBzaG91bGQgYmUgcmVzdG9yZWRcbiAgICBjb25zdCBpc0FjY3VtdWxhdGlvbk1vZGUgPSB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUucmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvblxuICAgIGNvbnN0IGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50ID0gdGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHM/Lmxlbmd0aCB8fCAwXG4gICAgY29uc3Qgc2VsZWN0aW9uQ291bnQgPSBpc0FjY3VtdWxhdGlvbk1vZGUgJiYgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQgPiAwXG4gICAgICA/IGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50XG4gICAgICA6IChoYXNTZWxlY3Rpb24gPyBjdXN0b21FdmVudC5kZXRhaWwucmVjb3JkSWRzLmxlbmd0aCA6IDApXG4gICAgXG4gICAgLy8gSWYgc2VsZWN0aW9uIGlzIGNsZWFyZWQgYW5kIHdlJ3JlIGluIFJlbW92ZSBtb2RlLCByZXNldCB0byBOZXdTZWxlY3Rpb24gbW9kZVxuICAgIC8vIFJlbW92ZSBtb2RlIHJlcXVpcmVzIHNlbGVjdGlvbiB0byBmdW5jdGlvbiwgc28gaXQgc2hvdWxkIGJlIGRpc2FibGVkIHdoZW4gc2VsZWN0aW9uIGlzIGVtcHR5XG4gICAgY29uc3Qgc2hvdWxkUmVzZXRNb2RlID0gIWhhc1NlbGVjdGlvbiAmJiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3Rpb25Db3VudCA9PT0gMCAmJiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb25cbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICBldmVudDogJ2hhbmRsZVNlbGVjdGlvbkNoYW5nZS11cGRhdGluZy1zdGF0ZScsXG4gICAgICB3aWRnZXRJZDogaWQsXG4gICAgICByZXN1bHRzTW9kZTogdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSxcbiAgICAgIGlzQWNjdW11bGF0aW9uTW9kZSxcbiAgICAgIGV2ZW50UmVjb3JkSWRzQ291bnQ6IGN1c3RvbUV2ZW50LmRldGFpbC5yZWNvcmRJZHMubGVuZ3RoLFxuICAgICAgaGFzU2VsZWN0aW9uRnJvbUV2ZW50OiBoYXNTZWxlY3Rpb24sXG4gICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudEJlZm9yZTogYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQsXG4gICAgICBjYWxjdWxhdGVkU2VsZWN0aW9uQ291bnQ6IHNlbGVjdGlvbkNvdW50LFxuICAgICAgJ3dpbGwtc2V0LWhhc1NlbGVjdGlvbic6IHNlbGVjdGlvbkNvdW50ID4gMCxcbiAgICAgICd3aWxsLXNldC1sYXN0U2VsZWN0aW9uJzogaGFzU2VsZWN0aW9uICYmICEhY3VzdG9tRXZlbnQuZGV0YWlsLm91dHB1dERzSWQgJiYgISFjdXN0b21FdmVudC5kZXRhaWwucXVlcnlJdGVtQ29uZmlnSWQsXG4gICAgICAnd2lsbC1yZXNldC1tb2RlJzogc2hvdWxkUmVzZXRNb2RlLFxuICAgICAgZGVjaXNpb25Mb2dpYzoge1xuICAgICAgICAnaXNBY2N1bXVsYXRpb25Nb2RlJzogaXNBY2N1bXVsYXRpb25Nb2RlLFxuICAgICAgICAnYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQgPiAwJzogYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQgPiAwLFxuICAgICAgICAndXNlLWFjY3VtdWxhdGVkLWNvdW50JzogaXNBY2N1bXVsYXRpb25Nb2RlICYmIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50ID4gMCxcbiAgICAgICAgJ3VzZS1ldmVudC1jb3VudCc6ICEoaXNBY2N1bXVsYXRpb25Nb2RlICYmIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50ID4gMCksXG4gICAgICAgICdzaG91bGQtcmVzZXQtbW9kZSc6IHNob3VsZFJlc2V0TW9kZVxuICAgICAgfVxuICAgIH0pXG4gICAgXG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBoYXNTZWxlY3Rpb246IHNlbGVjdGlvbkNvdW50ID4gMCxcbiAgICAgIHNlbGVjdGlvblJlY29yZENvdW50OiBzZWxlY3Rpb25Db3VudCxcbiAgICAgIC8vIFN0b3JlIGxhc3RTZWxlY3Rpb24gZm9yIGNvbXBhdGliaWxpdHksIGJ1dCByZXN0b3JhdGlvbiB3aWxsIHVzZSBhY2N1bXVsYXRlZFJlY29yZHMgaW4gQWRkL1JlbW92ZSBtb2Rlc1xuICAgICAgbGFzdFNlbGVjdGlvbjogaGFzU2VsZWN0aW9uICYmIGN1c3RvbUV2ZW50LmRldGFpbC5vdXRwdXREc0lkICYmIGN1c3RvbUV2ZW50LmRldGFpbC5xdWVyeUl0ZW1Db25maWdJZFxuICAgICAgICA/IHtcbiAgICAgICAgICAgIHJlY29yZElkczogY3VzdG9tRXZlbnQuZGV0YWlsLnJlY29yZElkcyxcbiAgICAgICAgICAgIG91dHB1dERzSWQ6IGN1c3RvbUV2ZW50LmRldGFpbC5vdXRwdXREc0lkLFxuICAgICAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IGN1c3RvbUV2ZW50LmRldGFpbC5xdWVyeUl0ZW1Db25maWdJZFxuICAgICAgICAgIH1cbiAgICAgICAgOiB1bmRlZmluZWQsXG4gICAgICAvLyBSZXNldCBtb2RlIHRvIE5ld1NlbGVjdGlvbiBpZiBzZWxlY3Rpb24gaXMgY2xlYXJlZCBpbiBSZW1vdmUgbW9kZVxuICAgICAgLi4uKHNob3VsZFJlc2V0TW9kZSA/IHtcbiAgICAgICAgcmVzdWx0c01vZGU6IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uLFxuICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHM6IFtdIC8vIEFsc28gY2xlYXIgYWNjdW11bGF0ZWQgcmVjb3JkcyB3aGVuIHJlc2V0dGluZyBtb2RlXG4gICAgICB9IDoge30pXG4gICAgfSlcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICBldmVudDogJ2hhbmRsZVNlbGVjdGlvbkNoYW5nZS1zdGF0ZS11cGRhdGVkJyxcbiAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICduZXctaGFzU2VsZWN0aW9uJzogc2VsZWN0aW9uQ291bnQgPiAwLFxuICAgICAgJ25ldy1zZWxlY3Rpb25SZWNvcmRDb3VudCc6IHNlbGVjdGlvbkNvdW50LFxuICAgICAgJ25ldy1sYXN0U2VsZWN0aW9uLXJlY29yZElkcy1jb3VudCc6IGhhc1NlbGVjdGlvbiAmJiBjdXN0b21FdmVudC5kZXRhaWwub3V0cHV0RHNJZCAmJiBjdXN0b21FdmVudC5kZXRhaWwucXVlcnlJdGVtQ29uZmlnSWRcbiAgICAgICAgPyBjdXN0b21FdmVudC5kZXRhaWwucmVjb3JkSWRzLmxlbmd0aFxuICAgICAgICA6IDAsXG4gICAgICAnbW9kZS1yZXNldCc6IHNob3VsZFJlc2V0TW9kZSxcbiAgICAgICduZXctbW9kZSc6IHNob3VsZFJlc2V0TW9kZSA/IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uIDogdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSxcbiAgICAgICdub3RlJzogc2hvdWxkUmVzZXRNb2RlIFxuICAgICAgICA/ICdNb2RlIHJlc2V0IHRvIE5ld1NlbGVjdGlvbiBiZWNhdXNlIHNlbGVjdGlvbiB3YXMgY2xlYXJlZCBpbiBSZW1vdmUgbW9kZSdcbiAgICAgICAgOiAnbGFzdFNlbGVjdGlvbi1vbmx5LWNvbnRhaW5zLWN1cnJlbnQtcXVlcnktcmVjb3Jkcy1ub3QtYWxsLWFjY3VtdWxhdGVkLXJlY29yZHMnXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIHJlc3RvcmUgcmVxdWVzdCB3aGVuIGlkZW50aWZ5IHBvcHVwIGNsb3Nlcy5cbiAgICogXG4gICAqIFRoaXMgbWV0aG9kIHJlc3RvcmVzIHNlbGVjdGlvbiB0byB0aGUgbWFwIGFmdGVyIHRoZSBpZGVudGlmeSBwb3B1cCBjbG9zZXMgYW5kXG4gICAqIHNlbGVjdGlvbiB3YXMgY2xlYXJlZC4gSXQgb25seSByZXN0b3JlcyBpZiB0aGUgd2lkZ2V0IHBhbmVsIGlzIGN1cnJlbnRseSBvcGVuXG4gICAqICh1c2VycyBjYW4ndCBzZWUgcmVzdG9yZWQgc2VsZWN0aW9uIGlmIHdpZGdldCBpcyBjbG9zZWQpLlxuICAgKiBcbiAgICogUmVzdG9yYXRpb24gbG9naWM6XG4gICAqIC0gXCJBZGQgdG9cIiAvIFwiUmVtb3ZlIGZyb21cIiBtb2RlczogUmVzdG9yZXMgYWxsIGFjY3VtdWxhdGVkIHJlY29yZHMgZ3JvdXBlZCBieSBvcmlnaW4gZGF0YSBzb3VyY2VcbiAgICogLSBcIk5ld1wiIG1vZGU6IFJlc3RvcmVzIGxhc3RTZWxlY3Rpb24gc3RhdGVcbiAgICogXG4gICAqIEBwYXJhbSBldmVudCAtIEN1c3RvbSBldmVudCBjb250YWluaW5nIHNlbGVjdGlvbiBkZXRhaWxzICh3aWRnZXRJZCwgcmVjb3JkSWRzLCBvdXRwdXREc0lkLCBxdWVyeUl0ZW1Db25maWdJZClcbiAgICogXG4gICAqIEBzaW5jZSAxLjE5LjAtcjAxNy4wXG4gICAqIEBzZWUge0BsaW5rIFJFU1RPUkVfT05fSURFTlRJRllfQ0xPU0VfRVZFTlR9IGZvciBldmVudCBuYW1lIGNvbnN0YW50XG4gICAqL1xuICBwcml2YXRlIGhhbmRsZVJlc3RvcmVPbklkZW50aWZ5Q2xvc2UgPSAoZXZlbnQ6IEV2ZW50KSA9PiB7XG4gICAgY29uc3QgY3VzdG9tRXZlbnQgPSBldmVudCBhcyBDdXN0b21FdmVudDx7IFxuICAgICAgd2lkZ2V0SWQ6IHN0cmluZywgXG4gICAgICByZWNvcmRJZHM6IHN0cmluZ1tdLCBcbiAgICAgIG91dHB1dERzSWQ6IHN0cmluZyxcbiAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBzdHJpbmdcbiAgICB9PlxuICAgIGNvbnN0IHsgaWQgfSA9IHRoaXMucHJvcHNcbiAgICBcbiAgICAvLyBPbmx5IGhhbmRsZSBpZiB0aGlzIGlzIGZvciBvdXIgd2lkZ2V0XG4gICAgaWYgKGN1c3RvbUV2ZW50LmRldGFpbC53aWRnZXRJZCAhPT0gaWQpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBcbiAgICAvLyBVc2UgbWFuYWdlciBhcyBzb3VyY2Ugb2YgdHJ1dGggZm9yIHZpc2liaWxpdHkgKHIwMTguMTMpXG4gICAgY29uc3QgaXNXaWRnZXRPcGVuID0gdGhpcy52aXNpYmlsaXR5TWFuYWdlci5nZXRJc1BhbmVsVmlzaWJsZSgpXG4gICAgY29uc3QgaXNBY2N1bXVsYXRpb25Nb2RlID0gdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbiB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb25cbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICBldmVudDogJ2lkZW50aWZ5LXBvcHVwLWNsb3NlZC1yZXN0b3JlLXJlcXVlc3RlZCcsXG4gICAgICB3aWRnZXRJZDogaWQsXG4gICAgICBpc1dpZGdldE9wZW4sXG4gICAgICByZXN1bHRzTW9kZTogdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSxcbiAgICAgIGlzQWNjdW11bGF0aW9uTW9kZSxcbiAgICAgIGV2ZW50UmVjb3JkSWRzQ291bnQ6IGN1c3RvbUV2ZW50LmRldGFpbC5yZWNvcmRJZHMubGVuZ3RoLFxuICAgICAgaGFzU2VsZWN0aW9uOiB0aGlzLnN0YXRlLmhhc1NlbGVjdGlvbiB8fCBmYWxzZSxcbiAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiB0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICBoYXNMYXN0U2VsZWN0aW9uOiAhIXRoaXMuc3RhdGUubGFzdFNlbGVjdGlvbixcbiAgICAgIGxhc3RTZWxlY3Rpb25SZWNvcmRDb3VudDogdGhpcy5zdGF0ZS5sYXN0U2VsZWN0aW9uPy5yZWNvcmRJZHMubGVuZ3RoIHx8IDAsXG4gICAgICBvdXRwdXREc0lkOiBjdXN0b21FdmVudC5kZXRhaWwub3V0cHV0RHNJZCxcbiAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBjdXN0b21FdmVudC5kZXRhaWwucXVlcnlJdGVtQ29uZmlnSWRcbiAgICB9KVxuICAgIFxuICAgIC8vIE9ubHkgcmVzdG9yZSBpZiB3aWRnZXQgaXMgb3BlblxuICAgIGlmICghaXNXaWRnZXRPcGVuKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAnaWRlbnRpZnktcG9wdXAtY2xvc2VkLXJlc3RvcmUtc2tpcHBlZC13aWRnZXQtY2xvc2VkJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICByZWNvcmRDb3VudDogY3VzdG9tRXZlbnQuZGV0YWlsLnJlY29yZElkcy5sZW5ndGhcbiAgICAgIH0pXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgLy8gSFlQT1RIRVNJUzogU2hvdWxkIGFsd2F5cyBjaGVjayBhY2N1bXVsYXRlZFJlY29yZHMgZmlyc3QsIHJlZ2FyZGxlc3Mgb2YgbW9kZVxuICAgIGlmICh0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3JkcyAmJiB0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAnaWRlbnRpZnktcG9wdXAtY2xvc2VkLWZvdW5kLWFjY3VtdWxhdGVkLXJlY29yZHMnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIHJlc3VsdHNNb2RlOiB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlLFxuICAgICAgICBpc0FjY3VtdWxhdGlvbk1vZGUsXG4gICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiB0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgICdzaG91bGQtdXNlLWFjY3VtdWxhdGVkJzogdHJ1ZSxcbiAgICAgICAgJ2N1cnJlbnQtY29uZGl0aW9uLWNoZWNrJzogaXNBY2N1bXVsYXRpb25Nb2RlLFxuICAgICAgICAnY29uZGl0aW9uLXJlc3VsdCc6IGlzQWNjdW11bGF0aW9uTW9kZVxuICAgICAgfSlcbiAgICB9XG4gICAgXG4gICAgLy8gSW4gQWRkL1JlbW92ZSBtb2RlcywgY2hlY2sgYWNjdW11bGF0ZWQgcmVjb3JkcyBpbnN0ZWFkIG9mIGxhc3RTZWxlY3Rpb25cbiAgICBpZiAoaXNBY2N1bXVsYXRpb25Nb2RlKSB7XG4gICAgICBpZiAoIXRoaXMuc3RhdGUuaGFzU2VsZWN0aW9uIHx8ICF0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3JkcyB8fCB0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICAgIGV2ZW50OiAnaWRlbnRpZnktcG9wdXAtY2xvc2VkLXJlc3RvcmUtc2tpcHBlZC1uby1hY2N1bXVsYXRlZC1yZWNvcmRzJyxcbiAgICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgICAgaGFzU2VsZWN0aW9uOiB0aGlzLnN0YXRlLmhhc1NlbGVjdGlvbixcbiAgICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogdGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICAgICdoeXBvdGhlc2lzJzogJ2hhc1NlbGVjdGlvbi1pcy1mYWxzZS1vci1uby1hY2N1bXVsYXRlZC1yZWNvcmRzJyxcbiAgICAgICAgICAnbWF5YmUtaGFzU2VsZWN0aW9uLXNob3VsZC1iZS1iYXNlZC1vbi1hY2N1bXVsYXRlZC1yZWNvcmRzJzogdHJ1ZVxuICAgICAgICB9KVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gUmVzdG9yZSBhbGwgYWNjdW11bGF0ZWQgcmVjb3JkcyAoZ3JvdXBlZCBieSBvcmlnaW4gRFMpXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAnaWRlbnRpZnktcG9wdXAtY2xvc2VkLXJlc3RvcmluZy1hY2N1bXVsYXRlZC1yZWNvcmRzJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogdGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoXG4gICAgICB9KVxuICAgICAgXG4gICAgICB0aGlzLmFkZFNlbGVjdGlvblRvTWFwKClcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBcbiAgICAvLyBIWVBPVEhFU0lTOiBNYXliZSBhY2N1bXVsYXRlZFJlY29yZHMgZXhpc3QgYnV0IHdlJ3JlIG5vdCBpbiBhY2N1bXVsYXRpb24gbW9kZT9cbiAgICBpZiAodGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHMgJiYgdGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCAmJiAhaXNBY2N1bXVsYXRpb25Nb2RlKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAnaWRlbnRpZnktcG9wdXAtY2xvc2VkLWFjY3VtdWxhdGVkLXJlY29yZHMtZXhpc3QtYnV0LW5vdC1hY2N1bXVsYXRpb24tbW9kZScsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgcmVzdWx0c01vZGU6IHRoaXMuc3RhdGUucmVzdWx0c01vZGUsXG4gICAgICAgIGlzQWNjdW11bGF0aW9uTW9kZSxcbiAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IHRoaXMuc3RhdGUuYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgJ2h5cG90aGVzaXMnOiAnYWNjdW11bGF0ZWQtcmVjb3Jkcy1leGlzdC1idXQtbW9kZS1pcy1ub3QtYWRkLW9yLXJlbW92ZScsXG4gICAgICAgICdzaG91bGQtd2Utc3RpbGwtdXNlLXRoZW0nOiAnTkVFRFMtSU5WRVNUSUdBVElPTidcbiAgICAgIH0pXG4gICAgfVxuICAgIFxuICAgIC8vIEZvciBcIk5ld1wiIG1vZGUsIHVzZSBvcmlnaW5hbCB2YWxpZGF0aW9uIGxvZ2ljXG4gICAgLy8gQ2hlY2sgaWYgd2UgaGF2ZSBtYXRjaGluZyBzZWxlY3Rpb24gc3RhdGVcbiAgICBpZiAoIXRoaXMuc3RhdGUuaGFzU2VsZWN0aW9uIHx8ICF0aGlzLnN0YXRlLmxhc3RTZWxlY3Rpb24pIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgZXZlbnQ6ICdpZGVudGlmeS1wb3B1cC1jbG9zZWQtcmVzdG9yZS1za2lwcGVkLW5vLXNlbGVjdGlvbicsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgaGFzU2VsZWN0aW9uOiB0aGlzLnN0YXRlLmhhc1NlbGVjdGlvbixcbiAgICAgICAgaGFzTGFzdFNlbGVjdGlvbjogISF0aGlzLnN0YXRlLmxhc3RTZWxlY3Rpb25cbiAgICAgIH0pXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgLy8gVmVyaWZ5IHRoZSBvdXRwdXREc0lkIG1hdGNoZXNcbiAgICBpZiAodGhpcy5zdGF0ZS5sYXN0U2VsZWN0aW9uLm91dHB1dERzSWQgIT09IGN1c3RvbUV2ZW50LmRldGFpbC5vdXRwdXREc0lkKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAnaWRlbnRpZnktcG9wdXAtY2xvc2VkLXJlc3RvcmUtc2tpcHBlZC1kcy1taXNtYXRjaCcsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgb3VyT3V0cHV0RHNJZDogdGhpcy5zdGF0ZS5sYXN0U2VsZWN0aW9uLm91dHB1dERzSWQsXG4gICAgICAgIHJlcXVlc3RlZE91dHB1dERzSWQ6IGN1c3RvbUV2ZW50LmRldGFpbC5vdXRwdXREc0lkXG4gICAgICB9KVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIC8vIFZlcmlmeSB0aGUgcXVlcnlJdGVtQ29uZmlnSWQgbWF0Y2hlcyAob3B0aW9uYWwgYnV0IGdvb2QgdG8gY2hlY2spXG4gICAgaWYgKHRoaXMuc3RhdGUubGFzdFNlbGVjdGlvbi5xdWVyeUl0ZW1Db25maWdJZCAhPT0gY3VzdG9tRXZlbnQuZGV0YWlsLnF1ZXJ5SXRlbUNvbmZpZ0lkKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAnaWRlbnRpZnktcG9wdXAtY2xvc2VkLXJlc3RvcmUtc2tpcHBlZC1xdWVyeS1taXNtYXRjaCcsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgb3VyUXVlcnlJdGVtQ29uZmlnSWQ6IHRoaXMuc3RhdGUubGFzdFNlbGVjdGlvbi5xdWVyeUl0ZW1Db25maWdJZCxcbiAgICAgICAgcmVxdWVzdGVkUXVlcnlJdGVtQ29uZmlnSWQ6IGN1c3RvbUV2ZW50LmRldGFpbC5xdWVyeUl0ZW1Db25maWdJZFxuICAgICAgfSlcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBcbiAgICAvLyBSZXN0b3JlIHNlbGVjdGlvbiB0byBtYXAgKHJldXNlIGV4aXN0aW5nIG1ldGhvZClcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICBldmVudDogJ2lkZW50aWZ5LXBvcHVwLWNsb3NlZC1yZXN0b3Jpbmctc2VsZWN0aW9uJyxcbiAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgIHJlY29yZENvdW50OiBjdXN0b21FdmVudC5kZXRhaWwucmVjb3JkSWRzLmxlbmd0aCxcbiAgICAgIG91dHB1dERzSWQ6IGN1c3RvbUV2ZW50LmRldGFpbC5vdXRwdXREc0lkXG4gICAgfSlcbiAgICBcbiAgICB0aGlzLmFkZFNlbGVjdGlvblRvTWFwKClcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXN0b3JlcyBzZWxlY3Rpb24gdG8gdGhlIG1hcCB3aGVuIHdpZGdldCBwYW5lbCBvcGVucy5cbiAgICogXG4gICAqIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCBieSBoYW5kbGVWaXNpYmlsaXR5Q2hhbmdlIHdoZW4gdGhlIHBhbmVsIGJlY29tZXMgdmlzaWJsZS5cbiAgICogSXQgcmVzdG9yZXMgcHJldmlvdXNseSBzZWxlY3RlZCByZWNvcmRzIHRvIHRoZSBtYXAgYmFzZWQgb24gdGhlIGN1cnJlbnQgcmVzdWx0cyBtb2RlOlxuICAgKiBcbiAgICogLSBcIkFkZCB0b1wiIC8gXCJSZW1vdmUgZnJvbVwiIG1vZGVzOiBSZXN0b3JlcyBhbGwgYWNjdW11bGF0ZWQgcmVjb3JkcywgZ3JvdXBlZCBieSBvcmlnaW4gZGF0YSBzb3VyY2VcbiAgICogLSBcIk5ld1wiIG1vZGU6IFJlc3RvcmVzIGxhc3RTZWxlY3Rpb24gc3RhdGUgZnJvbSB0aGUgbW9zdCByZWNlbnQgcXVlcnlcbiAgICogXG4gICAqIFRoZSByZXN0b3JhdGlvbiB1c2VzIHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoIHV0aWxpdHkgd2hpY2ggaGFuZGxlczpcbiAgICogLSBTZWxlY3RpbmcgcmVjb3JkcyBpbiBvcmlnaW4gZGF0YSBzb3VyY2VzXG4gICAqIC0gQWRkaW5nIGdyYXBoaWNzIHRvIGdyYXBoaWNzIGxheWVyIChpZiBlbmFibGVkKVxuICAgKiAtIFB1Ymxpc2hpbmcgc2VsZWN0aW9uIG1lc3NhZ2VzIHRvIG90aGVyIHdpZGdldHNcbiAgICogLSBEZWR1cGxpY2F0aW9uIG9mIHJlY29yZHNcbiAgICogXG4gICAqIE5vdGU6IFRoaXMgbWV0aG9kIGRvZXMgTk9UIHpvb20gdG8gdGhlIHNlbGVjdGlvbiAodW5saWtlIHRoZSBcIkFkZCB0byBNYXBcIiBhY3Rpb24pLlxuICAgKiBcbiAgICogQHNpbmNlIDEuMTkuMC1yMDE3LjBcbiAgICogQHNlZSB7QGxpbmsgc2VsZWN0UmVjb3Jkc0FuZFB1Ymxpc2h9IHV0aWxpdHkgZnVuY3Rpb24gZm9yIHNlbGVjdGlvbiBsb2dpY1xuICAgKi9cbiAgcHJpdmF0ZSBhZGRTZWxlY3Rpb25Ub01hcCA9ICgpID0+IHtcbiAgICBjb25zdCB7IGxhc3RTZWxlY3Rpb24sIGFjY3VtdWxhdGVkUmVjb3JkcywgcmVzdWx0c01vZGUgfSA9IHRoaXMuc3RhdGVcbiAgICBjb25zdCB7IGlkIH0gPSB0aGlzLnByb3BzXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgZXZlbnQ6ICdhZGRTZWxlY3Rpb25Ub01hcC1jYWxsZWQnLFxuICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgcmVzdWx0c01vZGUsXG4gICAgICBoYXNBY2N1bXVsYXRlZFJlY29yZHM6ICEhKGFjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCksXG4gICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogYWNjdW11bGF0ZWRSZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgIGhhc0xhc3RTZWxlY3Rpb246ICEhbGFzdFNlbGVjdGlvbixcbiAgICAgIGxhc3RTZWxlY3Rpb25SZWNvcmRDb3VudDogbGFzdFNlbGVjdGlvbj8ucmVjb3JkSWRzLmxlbmd0aCB8fCAwLFxuICAgICAgbGFzdFNlbGVjdGlvbk91dHB1dERzSWQ6IGxhc3RTZWxlY3Rpb24/Lm91dHB1dERzSWRcbiAgICB9KVxuICAgIFxuICAgIC8vIEluIEFkZC9SZW1vdmUgbW9kZXMsIHVzZSBhY2N1bXVsYXRlZCByZWNvcmRzIGZvciByZXN0b3JhdGlvblxuICAgIGNvbnN0IGlzQWNjdW11bGF0aW9uTW9kZSA9IHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvblxuICAgIFxuICAgIC8vIEhZUE9USEVTSVM6IFNob3VsZCBhbHdheXMgY2hlY2sgYWNjdW11bGF0ZWRSZWNvcmRzIGZpcnN0LCByZWdhcmRsZXNzIG9mIG1vZGVcbiAgICAvLyBBZGRpbmcgbG9nIHRvIHNlZSBpZiBhY2N1bXVsYXRlZFJlY29yZHMgZXhpc3QgYnV0IHdlJ3JlIG5vdCB1c2luZyB0aGVtXG4gICAgaWYgKGFjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ2FkZFNlbGVjdGlvblRvTWFwLWZvdW5kLWFjY3VtdWxhdGVkLXJlY29yZHMnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgICBpc0FjY3VtdWxhdGlvbk1vZGUsXG4gICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoLFxuICAgICAgICAnc2hvdWxkLXVzZS1hY2N1bXVsYXRlZCc6IHRydWUsXG4gICAgICAgICdjdXJyZW50LWNvbmRpdGlvbi1jaGVjayc6IGlzQWNjdW11bGF0aW9uTW9kZSAmJiBhY2N1bXVsYXRlZFJlY29yZHMgJiYgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDAsXG4gICAgICAgICdjb25kaXRpb24tcmVzdWx0JzogaXNBY2N1bXVsYXRpb25Nb2RlICYmIGFjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMFxuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ2FkZFNlbGVjdGlvblRvTWFwLW5vLWFjY3VtdWxhdGVkLXJlY29yZHMnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgICBpc0FjY3VtdWxhdGlvbk1vZGUsXG4gICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiAwLFxuICAgICAgICAnd2lsbC1mYWxsYmFjay10by1sYXN0U2VsZWN0aW9uJzogISFsYXN0U2VsZWN0aW9uXG4gICAgICB9KVxuICAgIH1cbiAgICBcbiAgICBpZiAoaXNBY2N1bXVsYXRpb25Nb2RlICYmIGFjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgLy8gR3JvdXAgYWNjdW11bGF0ZWQgcmVjb3JkcyBieSBvcmlnaW4gZGF0YSBzb3VyY2VcbiAgICAgIGNvbnN0IHJlY29yZHNCeU9yaWdpbkRTID0gbmV3IE1hcDxGZWF0dXJlTGF5ZXJEYXRhU291cmNlLCBGZWF0dXJlRGF0YVJlY29yZFtdPigpXG4gICAgICBjb25zdCBkc01hbmFnZXIgPSBEYXRhU291cmNlTWFuYWdlci5nZXRJbnN0YW5jZSgpXG4gICAgICBcbiAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkcy5mb3JFYWNoKChyZWNvcmQsIGluZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IHJlY29yZElkID0gcmVjb3JkLmdldElkKClcbiAgICAgICAgbGV0IG9yaWdpbkRTOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlIHwgbnVsbCA9IG51bGxcbiAgICAgICAgXG4gICAgICAgIC8vIE1ldGhvZCAxOiBUcnkgdG8gZ2V0IGZyb20gcmVjb3JkLmdldERhdGFTb3VyY2UoKVxuICAgICAgICBjb25zdCByZWNvcmREUyA9IHJlY29yZC5nZXREYXRhU291cmNlPy4oKSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gICAgICAgIGlmIChyZWNvcmREUykge1xuICAgICAgICAgIG9yaWdpbkRTID0gcmVjb3JkRFMuZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKT8uWzBdIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2UgfHwgcmVjb3JkRFNcbiAgICAgICAgICBcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgICAgICBldmVudDogJ2ZvdW5kLW9yaWdpbi1kcy1mcm9tLXJlY29yZC1kcycsXG4gICAgICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgICAgICByZWNvcmRJbmRleDogaW5kZXgsXG4gICAgICAgICAgICByZWNvcmRJZCxcbiAgICAgICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTPy5pZCB8fCAnbnVsbCcsXG4gICAgICAgICAgICBtZXRob2Q6ICdyZWNvcmQuZ2V0RGF0YVNvdXJjZSgpJ1xuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIE1ldGhvZCAyOiBJZiB0aGF0IGZhaWxlZCwgc2VhcmNoIGFsbCBkYXRhIHNvdXJjZXMgZm9yIGEgcmVjb3JkIHdpdGggbWF0Y2hpbmcgSURcbiAgICAgICAgaWYgKCFvcmlnaW5EUykge1xuICAgICAgICAgIGNvbnN0IGRzTWFwID0gZHNNYW5hZ2VyLmdldERhdGFTb3VyY2VzKClcbiAgICAgICAgICBjb25zdCBhbGxEYXRhU291cmNlcyA9IE9iamVjdC52YWx1ZXMoZHNNYXApXG4gICAgICAgICAgXG4gICAgICAgICAgZm9yIChjb25zdCBkcyBvZiBhbGxEYXRhU291cmNlcykge1xuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhpcyBpcyBhIEZlYXR1cmVMYXllckRhdGFTb3VyY2UgYnkgY2hlY2tpbmcgZm9yIGdldEFsbExvYWRlZFJlY29yZHMgbWV0aG9kXG4gICAgICAgICAgICBpZiAoZHMgJiYgdHlwZW9mIChkcyBhcyBhbnkpLmdldEFsbExvYWRlZFJlY29yZHMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB0aGlzIERTIGhhcyB0aGUgcmVjb3JkXG4gICAgICAgICAgICAgICAgY29uc3QgYWxsUmVjb3JkcyA9IChkcyBhcyBhbnkpLmdldEFsbExvYWRlZFJlY29yZHMoKSB8fCBbXVxuICAgICAgICAgICAgICAgIGNvbnN0IG1hdGNoaW5nUmVjb3JkID0gYWxsUmVjb3Jkcy5maW5kKChyOiBGZWF0dXJlRGF0YVJlY29yZCkgPT4gci5nZXRJZCgpID09PSByZWNvcmRJZClcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2hpbmdSZWNvcmQpIHtcbiAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIHRoZSByZWNvcmQgLSBnZXQgb3JpZ2luIERTIGZyb20gdGhpcyBEU1xuICAgICAgICAgICAgICAgICAgb3JpZ2luRFMgPSAoZHMgYXMgYW55KS5nZXRPcmlnaW5EYXRhU291cmNlcygpPy5bMF0gYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSB8fCBkcyBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdmb3VuZC1vcmlnaW4tZHMtdmlhLXNlYXJjaCcsXG4gICAgICAgICAgICAgICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgICAgICAgICAgICAgcmVjb3JkSW5kZXg6IGluZGV4LFxuICAgICAgICAgICAgICAgICAgICByZWNvcmRJZCxcbiAgICAgICAgICAgICAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ3NlYXJjaGVkLWFsbC1kYXRhLXNvdXJjZXMnLFxuICAgICAgICAgICAgICAgICAgICBzZWFyY2hlZERTSWQ6IGRzLmlkXG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgLy8gQ29udGludWUgc2VhcmNoaW5nXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmIChvcmlnaW5EUykge1xuICAgICAgICAgIGlmICghcmVjb3Jkc0J5T3JpZ2luRFMuaGFzKG9yaWdpbkRTKSkge1xuICAgICAgICAgICAgcmVjb3Jkc0J5T3JpZ2luRFMuc2V0KG9yaWdpbkRTLCBbXSlcbiAgICAgICAgICB9XG4gICAgICAgICAgcmVjb3Jkc0J5T3JpZ2luRFMuZ2V0KG9yaWdpbkRTKSEucHVzaChyZWNvcmQpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICAgICAgZXZlbnQ6ICdjb3VsZC1ub3QtZmluZC1vcmlnaW4tZHMtZm9yLXJlY29yZCcsXG4gICAgICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgICAgICByZWNvcmRJbmRleDogaW5kZXgsXG4gICAgICAgICAgICByZWNvcmRJZCxcbiAgICAgICAgICAgIHdhcm5pbmc6ICdyZWNvcmQtd2lsbC1iZS1za2lwcGVkJ1xuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgZXZlbnQ6ICdwYW5lbC1vcGVuZWQtcmVzdG9yaW5nLWFjY3VtdWxhdGVkLXJlY29yZHMnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgb3JpZ2luRFNDb3VudDogcmVjb3Jkc0J5T3JpZ2luRFMuc2l6ZVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgLy8gUmVzdG9yZSBzZWxlY3Rpb24gZm9yIGVhY2ggb3JpZ2luIGRhdGEgc291cmNlXG4gICAgICBjb25zdCB7IHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoIH0gPSByZXF1aXJlKCcuL3NlbGVjdGlvbi11dGlscycpXG4gICAgICBjb25zdCB1c2VHcmFwaGljc0xheWVyID0gdGhpcy5wcm9wcy5jb25maWcudXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodFxuICAgICAgY29uc3QgZ3JhcGhpY3NMYXllciA9IHRoaXMuZ3JhcGhpY3NMYXllclJlZi5jdXJyZW50IHx8IHVuZGVmaW5lZFxuICAgICAgY29uc3QgbWFwVmlldyA9IHRoaXMubWFwVmlld1JlZi5jdXJyZW50IHx8IHVuZGVmaW5lZFxuICAgICAgXG4gICAgICByZWNvcmRzQnlPcmlnaW5EUy5mb3JFYWNoKChyZWNvcmRzLCBvcmlnaW5EUykgPT4ge1xuICAgICAgICBjb25zdCByZWNvcmRJZHMgPSByZWNvcmRzLm1hcChyID0+IHIuZ2V0SWQoKSlcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAvLyBVc2Ugb3JpZ2luRFMgZGlyZWN0bHkgKG5vdCBvdXRwdXREUykgc2luY2UgcmVjb3JkcyBhcmUgc2VsZWN0ZWQgaW4gb3JpZ2luIGxheWVyc1xuICAgICAgICAgIC8vIFVzZSBhc3luYyBJSUZFIHNpbmNlIGZvckVhY2ggY2FsbGJhY2sgY2FuJ3QgYmUgYXN5bmNcbiAgICAgICAgICA7KGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGF3YWl0IHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoKGlkLCBvcmlnaW5EUywgcmVjb3JkSWRzLCByZWNvcmRzLCB0cnVlLCB1c2VHcmFwaGljc0xheWVyLCBncmFwaGljc0xheWVyLCBtYXBWaWV3KVxuICAgICAgICAgIH0pKClcbiAgICAgICAgICBcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgICAgICBldmVudDogJ3BhbmVsLW9wZW5lZC1yZXN0b3JlZC1vcmlnaW4tZHMnLFxuICAgICAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgICAgICByZWNvcmRDb3VudDogcmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgICAgICB6b29tRXhlY3V0ZWQ6IGZhbHNlXG4gICAgICAgICAgfSlcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgICAgICBldmVudDogJ3BhbmVsLW9wZW5lZC1yZXN0b3JlLW9yaWdpbi1kcy1mYWlsZWQnLFxuICAgICAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpLFxuICAgICAgICAgICAgZXJyb3JTdGFjazogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnN0YWNrIDogdW5kZWZpbmVkXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIC8vIEhZUE9USEVTSVM6IE1heWJlIGFjY3VtdWxhdGVkUmVjb3JkcyBleGlzdCBidXQgd2UncmUgbm90IGluIGFjY3VtdWxhdGlvbiBtb2RlP1xuICAgIC8vIE9yIG1heWJlIHdlIHNob3VsZCBhbHdheXMgY2hlY2sgYWNjdW11bGF0ZWRSZWNvcmRzIGZpcnN0P1xuICAgIGlmIChhY2N1bXVsYXRlZFJlY29yZHMgJiYgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDAgJiYgIWlzQWNjdW11bGF0aW9uTW9kZSkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ2FkZFNlbGVjdGlvblRvTWFwLWFjY3VtdWxhdGVkLXJlY29yZHMtZXhpc3QtYnV0LW5vdC1hY2N1bXVsYXRpb24tbW9kZScsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgcmVzdWx0c01vZGUsXG4gICAgICAgIGlzQWNjdW11bGF0aW9uTW9kZSxcbiAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgICdoeXBvdGhlc2lzJzogJ2FjY3VtdWxhdGVkLXJlY29yZHMtZXhpc3QtYnV0LW1vZGUtaXMtbm90LWFkZC1vci1yZW1vdmUnLFxuICAgICAgICAnc2hvdWxkLXdlLXN0aWxsLXVzZS10aGVtJzogJ05FRURTLUlOVkVTVElHQVRJT04nXG4gICAgICB9KVxuICAgIH1cbiAgICBcbiAgICAvLyBGYWxsIGJhY2sgdG8gb3JpZ2luYWwgbG9naWMgZm9yIFwiTmV3XCIgbW9kZVxuICAgIGlmICghbGFzdFNlbGVjdGlvbikge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ2FkZFNlbGVjdGlvblRvTWFwLW5vLWxhc3RTZWxlY3Rpb24tZXhpdGluZycsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgcmVzdWx0c01vZGUsXG4gICAgICAgIGhhc0FjY3VtdWxhdGVkUmVjb3JkczogISEoYWNjdW11bGF0ZWRSZWNvcmRzICYmIGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwKSxcbiAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGFjY3VtdWxhdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgICdoeXBvdGhlc2lzJzogJ25vLWxhc3RTZWxlY3Rpb24tc28tZXhpdGluZy1lYXJseS1tYXliZS1zaG91bGQtY2hlY2stYWNjdW11bGF0ZWQtcmVjb3Jkcy1maXJzdCdcbiAgICAgIH0pXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCBkc01hbmFnZXIgPSBEYXRhU291cmNlTWFuYWdlci5nZXRJbnN0YW5jZSgpXG4gICAgY29uc3Qgb3V0cHV0RFMgPSBkc01hbmFnZXIuZ2V0RGF0YVNvdXJjZShsYXN0U2VsZWN0aW9uLm91dHB1dERzSWQpIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgICBcbiAgICBpZiAoIW91dHB1dERTKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAncGFuZWwtb3BlbmVkLW91dHB1dC1kcy1ub3QtZm91bmQnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIG91dHB1dERzSWQ6IGxhc3RTZWxlY3Rpb24ub3V0cHV0RHNJZFxuICAgICAgfSlcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIEdldCByZWNvcmRzIGZyb20gb3V0cHV0IERTIChzYW1lIGFzIEFkZCB0byBNYXApXG4gICAgY29uc3QgYWxsUmVjb3JkcyA9IG91dHB1dERTLmdldEFsbExvYWRlZFJlY29yZHMoKSB8fCBbXVxuICAgIGNvbnN0IHJlY29yZHNUb1NlbGVjdCA9IGFsbFJlY29yZHMuZmlsdGVyKHJlY29yZCA9PiBcbiAgICAgIGxhc3RTZWxlY3Rpb24ucmVjb3JkSWRzLmluY2x1ZGVzKHJlY29yZC5nZXRJZCgpKVxuICAgICkgYXMgRmVhdHVyZURhdGFSZWNvcmRbXVxuICAgIFxuICAgIGlmIChyZWNvcmRzVG9TZWxlY3QubGVuZ3RoID09PSAwKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAncGFuZWwtb3BlbmVkLW5vLW1hdGNoaW5nLXJlY29yZHMnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIG91clJlY29yZENvdW50OiBsYXN0U2VsZWN0aW9uLnJlY29yZElkcy5sZW5ndGhcbiAgICAgIH0pXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyBTYW1lIGxvZ2ljIGFzIEFkZCB0byBNYXAgYWN0aW9uIC0gc2VsZWN0UmVjb3Jkc0FuZFB1Ymxpc2ggaGFuZGxlcyBkdXBsaWNhdGUgY2hlY2tpbmdcbiAgICAvLyBEb24ndCB6b29tIHdoZW4gcmVzdG9yaW5nIG9uIHdpZGdldCBvcGVuIChBZGQgdG8gTWFwIGFjdGlvbiBoYW5kbGVzIHpvb20gZm9yIG1hbnVhbCBjbGlja3MpXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgc2VsZWN0UmVjb3Jkc0FuZFB1Ymxpc2ggfSA9IHJlcXVpcmUoJy4vc2VsZWN0aW9uLXV0aWxzJylcbiAgICAgIGNvbnN0IHVzZUdyYXBoaWNzTGF5ZXIgPSB0aGlzLnByb3BzLmNvbmZpZy51c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0XG4gICAgICBjb25zdCBncmFwaGljc0xheWVyID0gdGhpcy5ncmFwaGljc0xheWVyUmVmLmN1cnJlbnQgfHwgdW5kZWZpbmVkXG4gICAgICBjb25zdCBtYXBWaWV3ID0gdGhpcy5tYXBWaWV3UmVmLmN1cnJlbnQgfHwgdW5kZWZpbmVkXG4gICAgICA7KGFzeW5jICgpID0+IHtcbiAgICAgICAgYXdhaXQgc2VsZWN0UmVjb3Jkc0FuZFB1Ymxpc2goaWQsIG91dHB1dERTLCBsYXN0U2VsZWN0aW9uLnJlY29yZElkcywgcmVjb3Jkc1RvU2VsZWN0LCB0cnVlLCB1c2VHcmFwaGljc0xheWVyLCBncmFwaGljc0xheWVyLCBtYXBWaWV3KVxuICAgICAgfSkoKVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAncGFuZWwtb3BlbmVkLXNlbGVjdGlvbi1hZGRlZC10by1tYXAnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIHJlY29yZENvdW50OiByZWNvcmRzVG9TZWxlY3QubGVuZ3RoLFxuICAgICAgICB6b29tRXhlY3V0ZWQ6IGZhbHNlXG4gICAgICB9KVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAncGFuZWwtb3BlbmVkLWFkZC10by1tYXAtZmFpbGVkJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIHJlc3VsdHMgbW9kZSBjaGFuZ2UgZnJvbSB0aGUgbW9kZSBkcm9wZG93biBpbiBRdWVyeVRhc2sgY29tcG9uZW50LlxuICAgKiBcbiAgICogVGhpcyBtZXRob2QgaXMgY2FsbGVkIHdoZW4gdGhlIHVzZXIgc3dpdGNoZXMgYmV0d2VlbiBcIkNyZWF0ZSBuZXdcIiwgXCJBZGQgdG9cIiwgb3JcbiAgICogXCJSZW1vdmUgZnJvbVwiIG1vZGVzLiBJdCBwZXJmb3JtcyB0aGUgZm9sbG93aW5nIGFjdGlvbnM6XG4gICAqIFxuICAgKiAxLiBDb25zdW1lcyBoYXNoIHBhcmFtZXRlcnMgd2hlbiBzd2l0Y2hpbmcgdG8gYWNjdW11bGF0aW9uIG1vZGVzIChwcmV2ZW50cyByZS10cmlnZ2VyaW5nKVxuICAgKiAyLiBDbGVhcnMgYWNjdW11bGF0ZWQgcmVjb3JkcyB3aGVuIHN3aXRjaGluZyB0byBcIk5ld1wiIG1vZGVcbiAgICogMy4gVXBkYXRlcyB3aWRnZXQgc3RhdGUgd2l0aCB0aGUgbmV3IG1vZGVcbiAgICogXG4gICAqIEBwYXJhbSBtb2RlIC0gVGhlIG5ldyBzZWxlY3Rpb24gdHlwZSBtb2RlIChOZXdTZWxlY3Rpb24sIEFkZFRvU2VsZWN0aW9uLCBvciBSZW1vdmVGcm9tU2VsZWN0aW9uKVxuICAgKiBcbiAgICogQHNpbmNlIDEuMTkuMC1yMDE3LjBcbiAgICovXG4gIHByaXZhdGUgaGFuZGxlUmVzdWx0c01vZGVDaGFuZ2UgPSAobW9kZTogU2VsZWN0aW9uVHlwZSkgPT4ge1xuICAgIC8vIE9MRCBJTVBMRU1FTlRBVElPTiAocGFyYWxsZWwgZXhlY3V0aW9uKVxuICAgIGNvbnN0IG9sZFByZXZpb3VzTW9kZSA9IHRoaXMuc3RhdGUucmVzdWx0c01vZGVcbiAgICBjb25zdCBvbGRDdXJyZW50QWNjdW11bGF0ZWRDb3VudCA9IHRoaXMuc3RhdGUuYWNjdW11bGF0ZWRSZWNvcmRzPy5sZW5ndGggfHwgMFxuICAgIGNvbnN0IG9sZFNob3VsZENvbnN1bWVIYXNoID0gKG1vZGUgPT09IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb24gfHwgbW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uKSAmJiAhIXRoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWU/LnNob3J0SWRcbiAgICBjb25zdCBvbGRXaWxsQ2xlYXJBY2N1bXVsYXRlZCA9IG1vZGUgPT09IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICBldmVudDogJ2hhbmRsZVJlc3VsdHNNb2RlQ2hhbmdlLXRyaWdnZXJlZCcsXG4gICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgIHByZXZpb3VzTW9kZTogb2xkUHJldmlvdXNNb2RlLFxuICAgICAgbmV3TW9kZTogbW9kZSxcbiAgICAgIGN1cnJlbnRBY2N1bXVsYXRlZENvdW50OiBvbGRDdXJyZW50QWNjdW11bGF0ZWRDb3VudCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgLy8gQ29uc3VtZSBkZWVwIGxpbmsgd2hlbiBzd2l0Y2hpbmcgdG8gYWNjdW11bGF0aW9uIG1vZGVzXG4gICAgaWYgKG1vZGUgPT09IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb24gfHwgbW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uKSB7XG4gICAgICBpZiAodGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZT8uc2hvcnRJZCkge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gnLCB7XG4gICAgICAgICAgZXZlbnQ6ICdjb25zdW1pbmctaGFzaC1vbi1tb2RlLXN3aXRjaCcsXG4gICAgICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICAgICAgbW9kZSxcbiAgICAgICAgICBzaG9ydElkOiB0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlLnNob3J0SWRcbiAgICAgICAgfSlcbiAgICAgICAgdGhpcy5yZW1vdmVIYXNoUGFyYW1ldGVyKHRoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWUuc2hvcnRJZClcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBJZiBzd2l0Y2hpbmcgdG8gXCJOZXdcIiBtb2RlLCBjbGVhciBhY2N1bXVsYXRlZCByZWNvcmRzXG4gICAgaWYgKG1vZGUgPT09IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdjbGVhcmluZy1hY2N1bXVsYXRlZC1yZWNvcmRzLW9uLW1vZGUtc3dpdGNoJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICAgIHByZXZpb3VzTW9kZTogdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZVxuICAgICAgfSlcbiAgICAgIHRoaXMuc2V0U3RhdGUoeyByZXN1bHRzTW9kZTogbW9kZSwgYWNjdW11bGF0ZWRSZWNvcmRzOiBbXSB9KVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNldFN0YXRlKHsgcmVzdWx0c01vZGU6IG1vZGUgfSlcbiAgICB9XG5cbiAgICAvLyBDYXB0dXJlIG1hbmFnZXIncyBwcmV2aW91cyBzdGF0ZSBCRUZPUkUgdXBkYXRpbmdcbiAgICBjb25zdCBuZXdQcmV2aW91c01vZGUgPSB0aGlzLmFjY3VtdWxhdGVkUmVjb3Jkc01hbmFnZXIuZ2V0UmVzdWx0c01vZGUoKVxuICAgIGNvbnN0IG5ld1ByZXZpb3VzQWNjdW11bGF0ZWRDb3VudCA9IHRoaXMuYWNjdW11bGF0ZWRSZWNvcmRzTWFuYWdlci5nZXRBY2N1bXVsYXRlZFJlY29yZHNDb3VudCgpXG5cbiAgICAvLyBORVcgSU1QTEVNRU5UQVRJT04gKHBhcmFsbGVsIGV4ZWN1dGlvbilcbiAgICBjb25zdCBuZXdSZXN1bHQgPSB0aGlzLmFjY3VtdWxhdGVkUmVjb3Jkc01hbmFnZXIuaGFuZGxlUmVzdWx0c01vZGVDaGFuZ2UoXG4gICAgICB0aGlzLnByb3BzLmlkLFxuICAgICAgbW9kZSxcbiAgICAgIG9sZFNob3VsZENvbnN1bWVIYXNoLFxuICAgICAgdGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZT8uc2hvcnRJZCxcbiAgICAgIHRoaXMucmVtb3ZlSGFzaFBhcmFtZXRlclxuICAgIClcblxuICAgIC8vIENPTVBBUklTT04gTE9HR0lOR1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnQ0hVTkstNS1DT01QQVJFJywge1xuICAgICAgZXZlbnQ6ICdoYW5kbGVSZXN1bHRzTW9kZUNoYW5nZS1jb21wYXJpc29uJyxcbiAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgb2xkSW1wbGVtZW50YXRpb246IHtcbiAgICAgICAgcHJldmlvdXNNb2RlOiBvbGRQcmV2aW91c01vZGUsXG4gICAgICAgIG5ld01vZGU6IG1vZGUsXG4gICAgICAgIGN1cnJlbnRBY2N1bXVsYXRlZENvdW50OiBvbGRDdXJyZW50QWNjdW11bGF0ZWRDb3VudCxcbiAgICAgICAgd2lsbENsZWFyQWNjdW11bGF0ZWQ6IG9sZFdpbGxDbGVhckFjY3VtdWxhdGVkLFxuICAgICAgICBzaG91bGRDb25zdW1lSGFzaDogb2xkU2hvdWxkQ29uc3VtZUhhc2hcbiAgICAgIH0sXG4gICAgICBuZXdJbXBsZW1lbnRhdGlvbjoge1xuICAgICAgICBwcmV2aW91c01vZGU6IG5ld1ByZXZpb3VzTW9kZSxcbiAgICAgICAgbmV3TW9kZTogbmV3UmVzdWx0LnJlc3VsdHNNb2RlLFxuICAgICAgICBjdXJyZW50QWNjdW11bGF0ZWRDb3VudDogbmV3UHJldmlvdXNBY2N1bXVsYXRlZENvdW50LFxuICAgICAgICB3aWxsQ2xlYXJBY2N1bXVsYXRlZDogbmV3UmVzdWx0LnJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvbixcbiAgICAgICAgc2hvdWxkQ29uc3VtZUhhc2g6IG9sZFNob3VsZENvbnN1bWVIYXNoXG4gICAgICB9LFxuICAgICAgbWF0Y2g6IG9sZFByZXZpb3VzTW9kZSA9PT0gbmV3UHJldmlvdXNNb2RlICYmXG4gICAgICAgICAgICAgb2xkQ3VycmVudEFjY3VtdWxhdGVkQ291bnQgPT09IG5ld1ByZXZpb3VzQWNjdW11bGF0ZWRDb3VudCAmJlxuICAgICAgICAgICAgIG5ld1Jlc3VsdC5yZXN1bHRzTW9kZSA9PT0gbW9kZSAmJiBcbiAgICAgICAgICAgICAobW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb24gPyBuZXdSZXN1bHQuYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA9PT0gMCA6IHRydWUpLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIGEgaGFzaCBwYXJhbWV0ZXIgZnJvbSB0aGUgVVJMIHdoZW4gc3dpdGNoaW5nIHRvIGFjY3VtdWxhdGlvbiBtb2Rlcy5cbiAgICogXG4gICAqIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCB3aGVuIHN3aXRjaGluZyB0byBcIkFkZCB0b1wiIG9yIFwiUmVtb3ZlIGZyb21cIiBtb2RlcyB0byBjb25zdW1lXG4gICAqIHRoZSBkZWVwIGxpbmsgcGFyYW1ldGVyLiBUaGlzIHByZXZlbnRzIHRoZSBoYXNoIHBhcmFtZXRlciBmcm9tIHJlLXRyaWdnZXJpbmcgdGhlIHF1ZXJ5XG4gICAqIHdoZW4gdGhlIHdpZGdldCByZS1yZW5kZXJzLlxuICAgKiBcbiAgICogVGhlIFVSTCBpcyB1cGRhdGVkIHVzaW5nIGhpc3RvcnkucmVwbGFjZVN0YXRlIHRvIGF2b2lkIHBhZ2UgcmVsb2FkLCBhbmQgYm90aCBwYXRobmFtZVxuICAgKiBhbmQgcXVlcnkgc3RyaW5nIGFyZSBwcmVzZXJ2ZWQgKGUuZy4sIGRlYnVnIHBhcmFtZXRlcnMgcmVtYWluIGludGFjdCkuXG4gICAqIFxuICAgKiBAcGFyYW0gc2hvcnRJZCAtIFRoZSBzaG9ydElkIHBhcmFtZXRlciB0byByZW1vdmUgZnJvbSB0aGUgVVJMIGhhc2hcbiAgICogXG4gICAqIEBzaW5jZSAxLjE5LjAtcjAxNy4wXG4gICAqL1xuICBwcml2YXRlIHJlbW92ZUhhc2hQYXJhbWV0ZXIgPSAoc2hvcnRJZDogc3RyaW5nKSA9PiB7XG4gICAgaWYgKCFzaG9ydElkKSByZXR1cm5cbiAgICBcbiAgICBjb25zdCBoYXNoID0gd2luZG93LmxvY2F0aW9uLmhhc2guc3Vic3RyaW5nKDEpXG4gICAgY29uc3QgdXJsUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhoYXNoKVxuICAgIFxuICAgIGlmICh1cmxQYXJhbXMuaGFzKHNob3J0SWQpKSB7XG4gICAgICB1cmxQYXJhbXMuZGVsZXRlKHNob3J0SWQpXG4gICAgICBjb25zdCBuZXdIYXNoID0gdXJsUGFyYW1zLnRvU3RyaW5nKClcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNIJywge1xuICAgICAgICBldmVudDogJ3JlbW92ZUhhc2hQYXJhbWV0ZXInLFxuICAgICAgICBzaG9ydElkLFxuICAgICAgICBuZXdIYXNoOiBuZXdIYXNoID8gYCMke25ld0hhc2h9YCA6ICcoZW1wdHkpJyxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgXG4gICAgICAvLyBVcGRhdGUgdGhlIFVSTCB3aXRob3V0IHRyaWdnZXJpbmcgYSByZWxvYWRcbiAgICAgIC8vIEFsd2F5cyBwcmVzZXJ2ZSBwYXRobmFtZSBhbmQgcXVlcnkgc3RyaW5nLCBvbmx5IHVwZGF0ZSBoYXNoXG4gICAgICB3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUobnVsbCwgJycsIFxuICAgICAgICB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgKyB3aW5kb3cubG9jYXRpb24uc2VhcmNoICsgKG5ld0hhc2ggPyBgIyR7bmV3SGFzaH1gIDogJycpXG4gICAgICApXG4gICAgICBcbiAgICAgIC8vIEFsc28gY2xlYXIgdGhlIHN0YXRlIHNvIGl0IHdvbid0IHRyaWdnZXIgYWdhaW5cbiAgICAgIGlmICh0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlPy5zaG9ydElkID09PSBzaG9ydElkKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBpbml0aWFsUXVlcnlWYWx1ZTogdW5kZWZpbmVkIH0pXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVBY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UgPSAocmVjb3JkczogRmVhdHVyZURhdGFSZWNvcmRbXSkgPT4ge1xuICAgIC8vIE9MRCBJTVBMRU1FTlRBVElPTiAocGFyYWxsZWwgZXhlY3V0aW9uKVxuICAgIGNvbnN0IG9sZFByZXZpb3VzQ291bnQgPSB0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDBcbiAgICBjb25zdCBvbGROZXdDb3VudCA9IHJlY29yZHMubGVuZ3RoXG4gICAgXG4gICAgLy8gSWYgd2UncmUgaW4gUmVtb3ZlIG1vZGUgYW5kIGFsbCBhY2N1bXVsYXRlZCByZWNvcmRzIGFyZSBjbGVhcmVkLCByZXNldCB0byBOZXdTZWxlY3Rpb24gbW9kZVxuICAgIC8vIFJlbW92ZSBtb2RlIHJlcXVpcmVzIGFjY3VtdWxhdGVkIHJlY29yZHMgdG8gZnVuY3Rpb24sIHNvIGl0IHNob3VsZCBiZSBkaXNhYmxlZCB3aGVuIHJlY29yZHMgYXJlIGVtcHR5XG4gICAgY29uc3Qgc2hvdWxkUmVzZXRNb2RlID0gcmVjb3Jkcy5sZW5ndGggPT09IDAgJiYgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb25cbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgIGV2ZW50OiAnaGFuZGxlQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlLXRyaWdnZXJlZCcsXG4gICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgIHByZXZpb3VzQ291bnQ6IG9sZFByZXZpb3VzQ291bnQsXG4gICAgICBuZXdDb3VudDogb2xkTmV3Q291bnQsXG4gICAgICBjdXJyZW50TW9kZTogdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSxcbiAgICAgIHNob3VsZFJlc2V0TW9kZSxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgdGhpcy5zZXRTdGF0ZSh7IFxuICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzOiByZWNvcmRzLFxuICAgICAgLy8gUmVzZXQgbW9kZSB0byBOZXdTZWxlY3Rpb24gaWYgYWxsIGFjY3VtdWxhdGVkIHJlY29yZHMgY2xlYXJlZCBpbiBSZW1vdmUgbW9kZVxuICAgICAgLi4uKHNob3VsZFJlc2V0TW9kZSA/IHtcbiAgICAgICAgcmVzdWx0c01vZGU6IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uXG4gICAgICB9IDoge30pXG4gICAgfSlcbiAgICBcbiAgICBpZiAoc2hvdWxkUmVzZXRNb2RlKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdtb2RlLXJlc2V0LW9uLWFjY3VtdWxhdGVkLXJlY29yZHMtY2xlYXJlZCcsXG4gICAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgICBwcmV2aW91c01vZGU6IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvbixcbiAgICAgICAgbmV3TW9kZTogU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb24sXG4gICAgICAgIHJlYXNvbjogJ2FsbC1hY2N1bXVsYXRlZC1yZWNvcmRzLWNsZWFyZWQtaW4tcmVtb3ZlLW1vZGUnLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgLy8gQ2FwdHVyZSBtYW5hZ2VyJ3MgcHJldmlvdXMgc3RhdGUgQkVGT1JFIHVwZGF0aW5nXG4gICAgY29uc3QgbmV3UHJldmlvdXNDb3VudCA9IHRoaXMuYWNjdW11bGF0ZWRSZWNvcmRzTWFuYWdlci5nZXRBY2N1bXVsYXRlZFJlY29yZHNDb3VudCgpXG5cbiAgICAvLyBORVcgSU1QTEVNRU5UQVRJT04gKHBhcmFsbGVsIGV4ZWN1dGlvbilcbiAgICB0aGlzLmFjY3VtdWxhdGVkUmVjb3Jkc01hbmFnZXIuaGFuZGxlQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlKHRoaXMucHJvcHMuaWQsIHJlY29yZHMpXG5cbiAgICAvLyBDT01QQVJJU09OIExPR0dJTkdcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0NIVU5LLTUtQ09NUEFSRScsIHtcbiAgICAgIGV2ZW50OiAnaGFuZGxlQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlLWNvbXBhcmlzb24nLFxuICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICBvbGRJbXBsZW1lbnRhdGlvbjoge1xuICAgICAgICBwcmV2aW91c0NvdW50OiBvbGRQcmV2aW91c0NvdW50LFxuICAgICAgICBuZXdDb3VudDogb2xkTmV3Q291bnQsXG4gICAgICAgIHJlY29yZHNMZW5ndGg6IHJlY29yZHMubGVuZ3RoXG4gICAgICB9LFxuICAgICAgbmV3SW1wbGVtZW50YXRpb246IHtcbiAgICAgICAgcHJldmlvdXNDb3VudDogbmV3UHJldmlvdXNDb3VudCxcbiAgICAgICAgbmV3Q291bnQ6IHJlY29yZHMubGVuZ3RoLFxuICAgICAgICByZWNvcmRzTGVuZ3RoOiByZWNvcmRzLmxlbmd0aFxuICAgICAgfSxcbiAgICAgIG1hdGNoOiBvbGRQcmV2aW91c0NvdW50ID09PSBuZXdQcmV2aW91c0NvdW50ICYmIG9sZE5ld0NvdW50ID09PSByZWNvcmRzLmxlbmd0aCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICogTk9URTogTm8gbG9uZ2VyIG5lZWRlZCAtIHdlIHVzZSBleGlzdGluZyBvdXRwdXQgRFMgaW5zdGVhZCBvZiBjcmVhdGluZyBuZXcgb25lLlxuICAgKiBLZXB0IGZvciByZWZlcmVuY2UgYnV0IG5vdCB1c2VkLlxuICAgKi9cbiAgcHJpdmF0ZSBnZXRPckNyZWF0ZUFjY3VtdWxhdGVkUmVzdWx0c0RTID0gYXN5bmMgKG9yaWdpbkRTOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlKTogUHJvbWlzZTxGZWF0dXJlTGF5ZXJEYXRhU291cmNlPiA9PiB7XG4gICAgLy8gVGhpcyBpcyBubyBsb25nZXIgdXNlZCAtIHdlIG1lcmdlIHJlY29yZHMgaW50byBleGlzdGluZyBvdXRwdXQgRFNcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoaXMgbWV0aG9kIGlzIGRlcHJlY2F0ZWQgLSB1c2UgZXhpc3Rpbmcgb3V0cHV0IERTIGluc3RlYWQnKVxuICB9XG5cbiAgLyoqXG4gICAqIENsZWFycyBzZWxlY3Rpb24gZnJvbSB0aGUgbWFwIHdoaWxlIHByZXNlcnZpbmcgd2lkZ2V0J3MgaW50ZXJuYWwgc3RhdGUuXG4gICAqIFxuICAgKiBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgd2hlbiB0aGUgd2lkZ2V0IHBhbmVsIGNsb3NlcyB0byByZW1vdmUgc2VsZWN0aW9uIGZyb20gdGhlIG1hcFxuICAgKiAoY2xlYW5pbmcgdXAgdGhlIHZpc3VhbCBzZWxlY3Rpb24pIHdoaWxlIGtlZXBpbmcgdGhlIHNlbGVjdGlvbiBzdGF0ZSBpbiB0aGUgd2lkZ2V0XG4gICAqIGZvciByZXN0b3JhdGlvbiB3aGVuIHRoZSBwYW5lbCByZW9wZW5zLlxuICAgKiBcbiAgICogVGhlIG1ldGhvZCBoYW5kbGVzIGJvdGggXCJOZXdcIiBtb2RlIChsYXN0U2VsZWN0aW9uKSBhbmQgYWNjdW11bGF0aW9uIG1vZGVzIChhY2N1bXVsYXRlZFJlY29yZHMpLlxuICAgKiBJdCBncm91cHMgcmVjb3JkcyBieSBvcmlnaW4gZGF0YSBzb3VyY2UgYW5kIGNsZWFycyBzZWxlY3Rpb24gZnJvbSBlYWNoIG9yaWdpbiBkYXRhIHNvdXJjZSxcbiAgICogZW5zdXJpbmcgbXVsdGktbGF5ZXIgc2VsZWN0aW9ucyBhcmUgcHJvcGVybHkgY2xlYXJlZC5cbiAgICogXG4gICAqIEdyYXBoaWNzIGxheWVyIGlzIGFsc28gY2xlYXJlZCBpZiBlbmFibGVkLCBhbmQgZW1wdHkgc2VsZWN0aW9uIG1lc3NhZ2VzIGFyZSBwdWJsaXNoZWRcbiAgICogdG8gbm90aWZ5IG90aGVyIHdpZGdldHMgKGxpa2UgSGVscGVyU2ltcGxlKSB0aGF0IHNlbGVjdGlvbiBoYXMgYmVlbiBjbGVhcmVkLlxuICAgKiBcbiAgICogQHNpbmNlIDEuMTkuMC1yMDE3LjBcbiAgICogQHNlZSB7QGxpbmsgY2xlYXJTZWxlY3Rpb25JbkRhdGFTb3VyY2VzfSB1dGlsaXR5IGZ1bmN0aW9uIGZvciBjbGVhcmluZyBsb2dpY1xuICAgKi9cbiAgcHJpdmF0ZSBjbGVhclNlbGVjdGlvbkZyb21NYXAgPSAoKSA9PiB7XG4gICAgY29uc3QgeyBsYXN0U2VsZWN0aW9uLCBhY2N1bXVsYXRlZFJlY29yZHMsIHJlc3VsdHNNb2RlIH0gPSB0aGlzLnN0YXRlXG4gICAgY29uc3QgeyBpZCB9ID0gdGhpcy5wcm9wc1xuICAgIFxuICAgIGNvbnN0IGlzQWNjdW11bGF0aW9uTW9kZSA9IHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb25cbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICBldmVudDogJ2NsZWFyU2VsZWN0aW9uRnJvbU1hcC1jYWxsZWQnLFxuICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgcmVzdWx0c01vZGUsXG4gICAgICBpc0FjY3VtdWxhdGlvbk1vZGUsXG4gICAgICBoYXNMYXN0U2VsZWN0aW9uOiAhIWxhc3RTZWxlY3Rpb24sXG4gICAgICBsYXN0U2VsZWN0aW9uUmVjb3JkQ291bnQ6IGxhc3RTZWxlY3Rpb24/LnJlY29yZElkcy5sZW5ndGggfHwgMCxcbiAgICAgIGhhc0FjY3VtdWxhdGVkUmVjb3JkczogISEoYWNjdW11bGF0ZWRSZWNvcmRzICYmIGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwKSxcbiAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiBhY2N1bXVsYXRlZFJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgc2VsZWN0aW9uUmVjb3JkQ291bnQ6IHRoaXMuc3RhdGUuc2VsZWN0aW9uUmVjb3JkQ291bnQgfHwgMFxuICAgIH0pXG4gICAgXG4gICAgLy8gQWx3YXlzIGNsZWFyIGFjY3VtdWxhdGVkIHJlY29yZHMgaWYgdGhleSBleGlzdCAocmVnYXJkbGVzcyBvZiBtb2RlKVxuICAgIC8vIFRoaXMgaGFuZGxlcyB0aGUgY2FzZSB3aGVyZSBtb2RlIG1pZ2h0IGhhdmUgY2hhbmdlZCBidXQgcmVjb3JkcyBzdGlsbCBleGlzdFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgIGV2ZW50OiAnY2xlYXJTZWxlY3Rpb25Gcm9tTWFwLWNoZWNraW5nLWFjY3VtdWxhdGVkLXJlY29yZHMnLFxuICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgJ2NvbmRpdGlvbic6ICdhY2N1bXVsYXRlZFJlY29yZHMgJiYgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDAnLFxuICAgICAgJ2NvbmRpdGlvbi1yZXN1bHQnOiAhIShhY2N1bXVsYXRlZFJlY29yZHMgJiYgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDApLFxuICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGFjY3VtdWxhdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDBcbiAgICB9KVxuICAgIFxuICAgIGlmIChhY2N1bXVsYXRlZFJlY29yZHMgJiYgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgIC8vIEdyb3VwIGFjY3VtdWxhdGVkIHJlY29yZHMgYnkgb3JpZ2luIGRhdGEgc291cmNlXG4gICAgICBjb25zdCByZWNvcmRzQnlPcmlnaW5EUyA9IG5ldyBNYXA8RmVhdHVyZUxheWVyRGF0YVNvdXJjZSwgRmVhdHVyZURhdGFSZWNvcmRbXT4oKVxuICAgICAgY29uc3QgZHNNYW5hZ2VyID0gRGF0YVNvdXJjZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKVxuICAgICAgXG4gICAgICBhY2N1bXVsYXRlZFJlY29yZHMuZm9yRWFjaCgocmVjb3JkLCBpbmRleCkgPT4ge1xuICAgICAgICBjb25zdCByZWNvcmRJZCA9IHJlY29yZC5nZXRJZCgpXG4gICAgICAgIGxldCBvcmlnaW5EUzogRmVhdHVyZUxheWVyRGF0YVNvdXJjZSB8IG51bGwgPSBudWxsXG4gICAgICAgIFxuICAgICAgICAvLyBNZXRob2QgMTogVHJ5IHRvIGdldCBmcm9tIHJlY29yZC5nZXREYXRhU291cmNlKClcbiAgICAgICAgY29uc3QgcmVjb3JkRFMgPSByZWNvcmQuZ2V0RGF0YVNvdXJjZT8uKCkgYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICAgICAgICBpZiAocmVjb3JkRFMpIHtcbiAgICAgICAgICBvcmlnaW5EUyA9IHJlY29yZERTLmdldE9yaWdpbkRhdGFTb3VyY2VzKCk/LlswXSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlIHx8IHJlY29yZERTXG4gICAgICAgICAgXG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICAgICAgZXZlbnQ6ICdjbGVhci1mb3VuZC1vcmlnaW4tZHMtZnJvbS1yZWNvcmQtZHMnLFxuICAgICAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICAgICAgcmVjb3JkSW5kZXg6IGluZGV4LFxuICAgICAgICAgICAgcmVjb3JkSWQsXG4gICAgICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUz8uaWQgfHwgJ251bGwnLFxuICAgICAgICAgICAgbWV0aG9kOiAncmVjb3JkLmdldERhdGFTb3VyY2UoKSdcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBNZXRob2QgMjogSWYgdGhhdCBmYWlsZWQsIHNlYXJjaCBhbGwgZGF0YSBzb3VyY2VzIGZvciBhIHJlY29yZCB3aXRoIG1hdGNoaW5nIElEXG4gICAgICAgIGlmICghb3JpZ2luRFMpIHtcbiAgICAgICAgICBjb25zdCBkc01hcCA9IGRzTWFuYWdlci5nZXREYXRhU291cmNlcygpXG4gICAgICAgICAgY29uc3QgYWxsRGF0YVNvdXJjZXMgPSBPYmplY3QudmFsdWVzKGRzTWFwKVxuICAgICAgICAgIFxuICAgICAgICAgIGZvciAoY29uc3QgZHMgb2YgYWxsRGF0YVNvdXJjZXMpIHtcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoaXMgaXMgYSBGZWF0dXJlTGF5ZXJEYXRhU291cmNlIGJ5IGNoZWNraW5nIGZvciBnZXRBbGxMb2FkZWRSZWNvcmRzIG1ldGhvZFxuICAgICAgICAgICAgaWYgKGRzICYmIHR5cGVvZiAoZHMgYXMgYW55KS5nZXRBbGxMb2FkZWRSZWNvcmRzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhpcyBEUyBoYXMgdGhlIHJlY29yZFxuICAgICAgICAgICAgICAgIGNvbnN0IGFsbFJlY29yZHMgPSAoZHMgYXMgYW55KS5nZXRBbGxMb2FkZWRSZWNvcmRzKCkgfHwgW11cbiAgICAgICAgICAgICAgICBjb25zdCBtYXRjaGluZ1JlY29yZCA9IGFsbFJlY29yZHMuZmluZCgocjogRmVhdHVyZURhdGFSZWNvcmQpID0+IHIuZ2V0SWQoKSA9PT0gcmVjb3JkSWQpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoaW5nUmVjb3JkKSB7XG4gICAgICAgICAgICAgICAgICAvLyBGb3VuZCB0aGUgcmVjb3JkIC0gZ2V0IG9yaWdpbiBEUyBmcm9tIHRoaXMgRFNcbiAgICAgICAgICAgICAgICAgIG9yaWdpbkRTID0gKGRzIGFzIGFueSkuZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKT8uWzBdIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2UgfHwgZHMgYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50OiAnY2xlYXItZm91bmQtb3JpZ2luLWRzLXZpYS1zZWFyY2gnLFxuICAgICAgICAgICAgICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgICAgICAgICAgICAgIHJlY29yZEluZGV4OiBpbmRleCxcbiAgICAgICAgICAgICAgICAgICAgcmVjb3JkSWQsXG4gICAgICAgICAgICAgICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdzZWFyY2hlZC1hbGwtZGF0YS1zb3VyY2VzJyxcbiAgICAgICAgICAgICAgICAgICAgc2VhcmNoZWREU0lkOiBkcy5pZFxuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIC8vIENvbnRpbnVlIHNlYXJjaGluZ1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAob3JpZ2luRFMpIHtcbiAgICAgICAgICBpZiAoIXJlY29yZHNCeU9yaWdpbkRTLmhhcyhvcmlnaW5EUykpIHtcbiAgICAgICAgICAgIHJlY29yZHNCeU9yaWdpbkRTLnNldChvcmlnaW5EUywgW10pXG4gICAgICAgICAgfVxuICAgICAgICAgIHJlY29yZHNCeU9yaWdpbkRTLmdldChvcmlnaW5EUykhLnB1c2gocmVjb3JkKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgICAgIGV2ZW50OiAnY2xlYXItY291bGQtbm90LWZpbmQtb3JpZ2luLWRzLWZvci1yZWNvcmQnLFxuICAgICAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICAgICAgcmVjb3JkSW5kZXg6IGluZGV4LFxuICAgICAgICAgICAgcmVjb3JkSWQsXG4gICAgICAgICAgICB3YXJuaW5nOiAncmVjb3JkLXdpbGwtYmUtc2tpcHBlZCdcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAncGFuZWwtY2xvc2VkLWNsZWFyaW5nLWFjY3VtdWxhdGVkLXJlY29yZHMtZnJvbS1tYXAnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoLFxuICAgICAgICBvcmlnaW5EU0NvdW50OiByZWNvcmRzQnlPcmlnaW5EUy5zaXplXG4gICAgICB9KVxuICAgICAgXG4gICAgICAvLyBDbGVhciBzZWxlY3Rpb24gZnJvbSBlYWNoIG9yaWdpbiBkYXRhIHNvdXJjZVxuICAgICAgY29uc3QgeyBjbGVhclNlbGVjdGlvbkluRGF0YVNvdXJjZXMgfSA9IHJlcXVpcmUoJy4vc2VsZWN0aW9uLXV0aWxzJylcbiAgICAgIGNvbnN0IHVzZUdyYXBoaWNzTGF5ZXIgPSB0aGlzLnByb3BzLmNvbmZpZy51c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0XG4gICAgICBjb25zdCBncmFwaGljc0xheWVyID0gdGhpcy5ncmFwaGljc0xheWVyUmVmLmN1cnJlbnQgfHwgdW5kZWZpbmVkXG4gICAgICBcbiAgICAgIHJlY29yZHNCeU9yaWdpbkRTLmZvckVhY2goKHJlY29yZHMsIG9yaWdpbkRTKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8gVXNlIGFzeW5jIElJRkUgc2luY2UgZm9yRWFjaCBjYWxsYmFjayBjYW4ndCBiZSBhc3luY1xuICAgICAgICAgIDsoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgYXdhaXQgY2xlYXJTZWxlY3Rpb25JbkRhdGFTb3VyY2VzKGlkLCBvcmlnaW5EUywgdXNlR3JhcGhpY3NMYXllciwgZ3JhcGhpY3NMYXllcilcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICAgICAgICBldmVudDogJ3BhbmVsLWNsb3NlZC1jbGVhcmVkLW9yaWdpbi1kcy1zZWxlY3Rpb24nLFxuICAgICAgICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICAgICAgICByZWNvcmRDb3VudDogcmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgICAgICAgIHVzZWRHcmFwaGljc0xheWVyOiB1c2VHcmFwaGljc0xheWVyXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0pKClcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgICAgICBldmVudDogJ3BhbmVsLWNsb3NlZC1jbGVhci1vcmlnaW4tZHMtZmFpbGVkJyxcbiAgICAgICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgZXZlbnQ6ICdjbGVhclNlbGVjdGlvbkZyb21NYXAtY2xlYXJlZC1hY2N1bXVsYXRlZC1yZWNvcmRzLXJldHVybmluZycsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgJ3dpbGwtbm90LWZhbGxiYWNrLXRvLWxhc3RTZWxlY3Rpb24nOiB0cnVlXG4gICAgICB9KVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIC8vIEhZUE9USEVTSVM6IE1heWJlIGFjY3VtdWxhdGVkUmVjb3JkcyBleGlzdCBidXQgd2UgZGlkbid0IGVudGVyIHRoZSBpZiBibG9jaz9cbiAgICAvLyBPciBtYXliZSB3ZSBzaG91bGQgYWx3YXlzIGNsZWFyIGFjY3VtdWxhdGVkIHJlY29yZHMgaWYgdGhleSBleGlzdD9cbiAgICBpZiAoYWNjdW11bGF0ZWRSZWNvcmRzICYmIGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAnY2xlYXJTZWxlY3Rpb25Gcm9tTWFwLWFjY3VtdWxhdGVkLXJlY29yZHMtZXhpc3QtYnV0LW5vdC1jbGVhcmluZycsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgcmVzdWx0c01vZGUsXG4gICAgICAgIGlzQWNjdW11bGF0aW9uTW9kZSxcbiAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgICdoeXBvdGhlc2lzJzogJ2FjY3VtdWxhdGVkLXJlY29yZHMtZXhpc3QtYnV0LWNvbmRpdGlvbi1mYWlsZWQtd2h5JyxcbiAgICAgICAgJ2NvbmRpdGlvbi13YXMnOiAnYWNjdW11bGF0ZWRSZWNvcmRzICYmIGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwJyxcbiAgICAgICAgJ2NvbmRpdGlvbi1yZXN1bHQnOiAhIShhY2N1bXVsYXRlZFJlY29yZHMgJiYgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDApXG4gICAgICB9KVxuICAgIH1cbiAgICBcbiAgICAvLyBGYWxsIGJhY2sgdG8gb3JpZ2luYWwgbG9naWMgZm9yIFwiTmV3XCIgbW9kZVxuICAgIGlmICghbGFzdFNlbGVjdGlvbikge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ2NsZWFyU2VsZWN0aW9uRnJvbU1hcC1uby1sYXN0U2VsZWN0aW9uLWV4aXRpbmcnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIGhhc0FjY3VtdWxhdGVkUmVjb3JkczogISEoYWNjdW11bGF0ZWRSZWNvcmRzICYmIGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwKSxcbiAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGFjY3VtdWxhdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgICdoeXBvdGhlc2lzJzogJ25vLWxhc3RTZWxlY3Rpb24tc28tZXhpdGluZy1tYXliZS1zaG91bGQtaGF2ZS1jbGVhcmVkLWFjY3VtdWxhdGVkLXJlY29yZHMtZmlyc3QnXG4gICAgICB9KVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc3QgZHNNYW5hZ2VyID0gRGF0YVNvdXJjZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKVxuICAgIGNvbnN0IG91dHB1dERTID0gZHNNYW5hZ2VyLmdldERhdGFTb3VyY2UobGFzdFNlbGVjdGlvbi5vdXRwdXREc0lkKSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gICAgXG4gICAgaWYgKCFvdXRwdXREUykge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ3BhbmVsLWNsb3NlZC1vdXRwdXQtZHMtbm90LWZvdW5kJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICBvdXRwdXREc0lkOiBsYXN0U2VsZWN0aW9uLm91dHB1dERzSWRcbiAgICAgIH0pXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgLy8gR2V0IG9yaWdpbiBEUyAodGhlIG1hcCBsYXllcilcbiAgICAgIGNvbnN0IG9yaWdpbkRTID0gb3V0cHV0RFMuZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKT8uWzBdIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgICAgIFxuICAgICAgaWYgKCFvcmlnaW5EUykge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgICAgZXZlbnQ6ICdwYW5lbC1jbG9zZWQtb3JpZ2luLWRzLW5vdC1mb3VuZCcsXG4gICAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICAgIG91dHB1dERzSWQ6IGxhc3RTZWxlY3Rpb24ub3V0cHV0RHNJZFxuICAgICAgICB9KVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgLy8gQ2hlY2sgY3VycmVudCBzZWxlY3Rpb24gc3RhdGUgYmVmb3JlIGNsZWFyaW5nXG4gICAgICBjb25zdCBjdXJyZW50U2VsZWN0ZWRJZHMgPSBvcmlnaW5EUy5nZXRTZWxlY3RlZFJlY29yZElkcygpIHx8IFtdXG4gICAgICBjb25zdCBvdXJSZWNvcmRJZHMgPSBsYXN0U2VsZWN0aW9uLnJlY29yZElkc1xuICAgICAgY29uc3QgbWF0Y2hlc091clNlbGVjdGlvbiA9IG91clJlY29yZElkcy5sZW5ndGggPT09IGN1cnJlbnRTZWxlY3RlZElkcy5sZW5ndGggJiZcbiAgICAgICAgb3VyUmVjb3JkSWRzLmV2ZXJ5KHJlY29yZElkID0+IGN1cnJlbnRTZWxlY3RlZElkcy5pbmNsdWRlcyhyZWNvcmRJZCkpXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgZXZlbnQ6ICdwYW5lbC1jbG9zZWQtY2hlY2tpbmctbWFwLXNlbGVjdGlvbicsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgb3VyUmVjb3JkQ291bnQ6IG91clJlY29yZElkcy5sZW5ndGgsXG4gICAgICAgIG1hcFNlbGVjdGVkQ291bnQ6IGN1cnJlbnRTZWxlY3RlZElkcy5sZW5ndGgsXG4gICAgICAgIG1hdGNoZXNPdXJTZWxlY3Rpb24sXG4gICAgICAgIG91clJlY29yZElkczogb3VyUmVjb3JkSWRzLnNsaWNlKDAsIDUpLFxuICAgICAgICBtYXBTZWxlY3RlZElkczogY3VycmVudFNlbGVjdGVkSWRzLnNsaWNlKDAsIDUpXG4gICAgICB9KVxuXG4gICAgICAvLyBVc2UgY2xlYXJTZWxlY3Rpb25JbkRhdGFTb3VyY2VzIHV0aWxpdHkgd2hpY2ggc3VwcG9ydHMgZ3JhcGhpY3MgbGF5ZXJcbiAgICAgIGNvbnN0IHsgY2xlYXJTZWxlY3Rpb25JbkRhdGFTb3VyY2VzIH0gPSByZXF1aXJlKCcuL3NlbGVjdGlvbi11dGlscycpXG4gICAgICBjb25zdCB1c2VHcmFwaGljc0xheWVyID0gdGhpcy5wcm9wcy5jb25maWcudXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodFxuICAgICAgY29uc3QgZ3JhcGhpY3NMYXllciA9IHRoaXMuZ3JhcGhpY3NMYXllclJlZi5jdXJyZW50IHx8IHVuZGVmaW5lZFxuICAgICAgXG4gICAgICA7KGFzeW5jICgpID0+IHtcbiAgICAgICAgYXdhaXQgY2xlYXJTZWxlY3Rpb25JbkRhdGFTb3VyY2VzKGlkLCBvcmlnaW5EUywgdXNlR3JhcGhpY3NMYXllciwgZ3JhcGhpY3NMYXllcilcbiAgICAgICAgXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgICBldmVudDogJ3BhbmVsLWNsb3NlZC1jbGVhcmVkLW9yaWdpbi1kcy1zZWxlY3Rpb24nLFxuICAgICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgICB1c2VkR3JhcGhpY3NMYXllcjogdXNlR3JhcGhpY3NMYXllclxuICAgICAgICB9KVxuICAgICAgICBcbiAgICAgICAgLy8gVmVyaWZ5IHNlbGVjdGlvbiB3YXMgY2xlYXJlZFxuICAgICAgICBjb25zdCBhZnRlckNsZWFySWRzID0gb3JpZ2luRFMuZ2V0U2VsZWN0ZWRSZWNvcmRJZHMoKSB8fCBbXVxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgICAgZXZlbnQ6ICdwYW5lbC1jbG9zZWQtc2VsZWN0aW9uLWNsZWFyZWQtZnJvbS1tYXAnLFxuICAgICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgICByZWNvcmRDb3VudDogbGFzdFNlbGVjdGlvbi5yZWNvcmRJZHMubGVuZ3RoLFxuICAgICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICAgIHNlbGVjdGlvbkFmdGVyQ2xlYXI6IGFmdGVyQ2xlYXJJZHMubGVuZ3RoLFxuICAgICAgICAgIHZlcmlmaWVkQ2xlYXJlZDogYWZ0ZXJDbGVhcklkcy5sZW5ndGggPT09IDBcbiAgICAgICAgfSlcbiAgICAgIH0pKClcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ3BhbmVsLWNsb3NlZC1jbGVhci1mcm9tLW1hcC1mYWlsZWQnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvciksXG4gICAgICAgIGVycm9yU3RhY2s6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZFxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuXG4gIC8qKlxuICAgKiBOT1RJRlkgdGhhdCBhIGhhc2ggcGFyYW1ldGVyIGhhcyBiZWVuIHVzZWQuXG4gICAqIFByZXZpb3VzbHkgdGhpcyByZW1vdmVkIHRoZSBoYXNoIGZyb20gdGhlIFVSTCwgYnV0IHBlciB1cGRhdGVkIHJlcXVpcmVtZW50cyxcbiAgICogdXNlci1lbnRlcmVkIGhhc2hlcyBzaG91bGQgcmVtYWluIGluIHRoZSBVUkwuXG4gICAqIFxuICAgKiBAcGFyYW0gc2hvcnRJZCAtIFRoZSBzaG9ydElkIHBhcmFtZXRlciB0aGF0IHdhcyB1c2VkXG4gICAqL1xuICBoYW5kbGVIYXNoUGFyYW1ldGVyVXNlZCA9IChzaG9ydElkOiBzdHJpbmcpID0+IHtcbiAgICBjb25zdCB7IGlkIH0gPSB0aGlzLnByb3BzXG4gICAgY29uc3QgeyBpbml0aWFsUXVlcnlWYWx1ZSB9ID0gdGhpcy5zdGF0ZVxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSC1FWEVDJywge1xuICAgICAgZXZlbnQ6ICdxdWVyeXNpbXBsZS1oYW5kbGVoYXNocGFyYW1ldGVydXNlZC1jYWxsZWQnLFxuICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgc2hvcnRJZCxcbiAgICAgIGN1cnJlbnRTdGF0ZToge1xuICAgICAgICBzaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbjogdGhpcy5zdGF0ZS5zaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbixcbiAgICAgICAgaGFzSW5pdGlhbFF1ZXJ5VmFsdWU6ICEhdGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZSxcbiAgICAgICAgaW5pdGlhbFF1ZXJ5VmFsdWVTaG9ydElkOiB0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlPy5zaG9ydElkLFxuICAgICAgICBpbml0aWFsUXVlcnlWYWx1ZVZhbHVlOiB0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlPy52YWx1ZVxuICAgICAgfSxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgLy8gTk9URTogSGFzaCBwYXJhbWV0ZXJzIGFyZSBOT1QgY2xlYXJlZCBoZXJlIC0gdGhleSBwZXJzaXN0IGluIFVSTFxuICAgIC8vIEhhc2ggcGFyYW1ldGVycyBhcmUgb25seSBjb25zdW1lZCB3aGVuIHN3aXRjaGluZyB0byBhY2N1bXVsYXRpb24gbW9kZXMgKEFkZC9SZW1vdmUpXG4gICAgLy8gdG8gcHJldmVudCByZS10cmlnZ2VyaW5nIHdoZW4gdGhlIHVzZXIgbWFudWFsbHkgc3dpdGNoZXMgbW9kZXNcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gnLCB7XG4gICAgICBldmVudDogJ2hhbmRsZUhhc2hQYXJhbWV0ZXJVc2VkLW5vdGlmaWVkJyxcbiAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgIHNob3J0SWQ6IHNob3J0SWQsXG4gICAgICBjdXJyZW50SW5pdGlhbFF1ZXJ5VmFsdWU6IGluaXRpYWxRdWVyeVZhbHVlLFxuICAgICAgbm90ZTogJ0hhc2ggcGFyYW1ldGVyIHVzZWQgYnV0IE5PVCBjbGVhcmVkIC0gaGFzaCByZW1haW5zIGluIFVSTCBwZXIgdXNlciByZXF1aXJlbWVudCcsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuXG4gICAgLy8gVHJhY2sgdGhpcyBzaG9ydElkOnZhbHVlIHBhaXIgYXMgcHJvY2Vzc2VkIHRvIHByZXZlbnQgcmUtZXhlY3V0aW9uIHdoZW4gc3dpdGNoaW5nIHF1ZXJpZXNcbiAgICAvLyBUaGlzIHByZXZlbnRzIEhlbHBlclNpbXBsZSBmcm9tIHJlLXRyaWdnZXJpbmcgdGhlIHNhbWUgcGFyYW1ldGVyIHdoZW4gc3dpdGNoaW5nIHF1ZXJpZXNcbiAgICBpZiAoaW5pdGlhbFF1ZXJ5VmFsdWUpIHtcbiAgICAgIGNvbnN0IHBhcmFtS2V5ID0gYCR7aW5pdGlhbFF1ZXJ5VmFsdWUuc2hvcnRJZH06JHtpbml0aWFsUXVlcnlWYWx1ZS52YWx1ZX1gXG4gICAgICB0aGlzLnByb2Nlc3NlZEhhc2hQYXJhbXNSZWYuYWRkKHBhcmFtS2V5KVxuICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNILUVYRUMnLCB7XG4gICAgICAgIGV2ZW50OiAncXVlcnlzaW1wbGUtaGFzaHBhcmFtLXRyYWNrZWQtYXMtcHJvY2Vzc2VkJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICBzaG9ydElkOiBpbml0aWFsUXVlcnlWYWx1ZS5zaG9ydElkLFxuICAgICAgICB2YWx1ZTogaW5pdGlhbFF1ZXJ5VmFsdWUudmFsdWUsXG4gICAgICAgIHBhcmFtS2V5LFxuICAgICAgICBwcm9jZXNzZWRQYXJhbXM6IEFycmF5LmZyb20odGhpcy5wcm9jZXNzZWRIYXNoUGFyYW1zUmVmKSxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgIH1cbiAgICBcbiAgICAvLyBBTFdBWVMgY2xlYXIgYm90aCBoYXNoIHN0YXRlIHZhbHVlcyBhZnRlciBleGVjdXRpb25cbiAgICAvLyBRdWVyeVNpbXBsZSBzaG91bGQgbm90IHJlbWVtYmVyIGhhc2ggc3RhdGUgYWZ0ZXIgSGVscGVyU2ltcGxlLWRyaXZlbiBleGVjdXRpb24gY29tcGxldGVzXG4gICAgLy8gVGhpcyBwcmV2ZW50cyBhdXRvbm9tb3VzIHJlLXByb2Nlc3Npbmcgd2hlbiBzd2l0Y2hpbmcgcXVlcmllc1xuICAgIC8vIFVzaW5nIGEgc2luZ2xlIHNldFN0YXRlIGVuc3VyZXMgYXRvbWljIHVwZGF0ZSBhbmQgcHJldmVudHMgcmFjZSBjb25kaXRpb25zXG4gICAgdGhpcy5zZXRTdGF0ZSh7IFxuICAgICAgc2hvdWxkVXNlSW5pdGlhbFF1ZXJ5VmFsdWVGb3JTZWxlY3Rpb246IGZhbHNlLFxuICAgICAgaW5pdGlhbFF1ZXJ5VmFsdWU6IHVuZGVmaW5lZFxuICAgIH0sICgpID0+IHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSC1FWEVDJywge1xuICAgICAgICBldmVudDogJ3F1ZXJ5c2ltcGxlLWhhbmRsZWhhc2hwYXJhbWV0ZXJ1c2VkLXN0YXRlLWNsZWFyZWQnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIHNob3J0SWQsXG4gICAgICAgIG5ld1N0YXRlOiB7XG4gICAgICAgICAgc2hvdWxkVXNlSW5pdGlhbFF1ZXJ5VmFsdWVGb3JTZWxlY3Rpb246IHRoaXMuc3RhdGUuc2hvdWxkVXNlSW5pdGlhbFF1ZXJ5VmFsdWVGb3JTZWxlY3Rpb24sXG4gICAgICAgICAgaGFzSW5pdGlhbFF1ZXJ5VmFsdWU6ICEhdGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZSxcbiAgICAgICAgICBpbml0aWFsUXVlcnlWYWx1ZVNob3J0SWQ6IHRoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWU/LnNob3J0SWQsXG4gICAgICAgICAgaW5pdGlhbFF1ZXJ5VmFsdWVWYWx1ZTogdGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZT8udmFsdWVcbiAgICAgICAgfSxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgIH0pXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdIQVNIJywge1xuICAgICAgZXZlbnQ6ICdzaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbi1mbGFnLWNsZWFyZWQnLFxuICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgc2hvcnRJZDogc2hvcnRJZCxcbiAgICAgIGZsYWdWYWx1ZTogZmFsc2UsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICB9XG5cblxuICByZW5kZXIgKCkge1xuICAgIGNvbnN0IHsgY29uZmlnLCBpZCwgaWNvbiwgbGFiZWwsIGxheW91dElkLCBsYXlvdXRJdGVtSWQsIGNvbnRyb2xsZXJXaWRnZXRJZCB9ID0gdGhpcy5wcm9wc1xuICAgIGNvbnN0IHdpZGdldExhYmVsID0gdGhpcy5wcm9wcy5pbnRsLmZvcm1hdE1lc3NhZ2Uoe1xuICAgICAgaWQ6ICdfd2lkZ2V0TGFiZWwnLFxuICAgICAgZGVmYXVsdE1lc3NhZ2U6IGRlZmF1bHRNZXNzYWdlcy5fd2lkZ2V0TGFiZWxcbiAgICB9KVxuICAgIGlmICghY29uZmlnLnF1ZXJ5SXRlbXM/Lmxlbmd0aCkge1xuICAgICAgcmV0dXJuIDxXaWRnZXRQbGFjZWhvbGRlciBpY29uPXtpY29uTWFwLmljb25RdWVyeX0gd2lkZ2V0SWQ9e3RoaXMucHJvcHMuaWR9IG5hbWU9e3dpZGdldExhYmVsfSAvPlxuICAgIH1cblxuICAgIGlmIChjb25maWcuYXJyYW5nZVR5cGUgPT09IFF1ZXJ5QXJyYW5nZVR5cGUuUG9wcGVyICYmICFjb250cm9sbGVyV2lkZ2V0SWQpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxRdWVyeVdpZGdldENvbnRleHQuUHJvdmlkZXIgdmFsdWU9e2Ake2xheW91dElkfToke2xheW91dEl0ZW1JZH1gfT5cbiAgICAgICAgICA8VGFza0xpc3RQb3BwZXJXcmFwcGVyXG4gICAgICAgICAgICBpZD17MH1cbiAgICAgICAgICAgIGljb249e2ljb259XG4gICAgICAgICAgICBwb3BwZXJUaXRsZT17bGFiZWx9XG4gICAgICAgICAgICBtaW5TaXplPXtjb25maWcuc2l6ZU1hcD8uYXJyYW5nZW1lbnRJY29uUG9wcGVyPy5taW5TaXplfVxuICAgICAgICAgICAgZGVmYXVsdFNpemU9e2NvbmZpZy5zaXplTWFwPy5hcnJhbmdlbWVudEljb25Qb3BwZXI/LmRlZmF1bHRTaXplfVxuICAgICAgICAgID5cbiAgICAgICAgICAgICAgPFF1ZXJ5VGFza0xpc3QgXG4gICAgICAgICAgICAgICAgd2lkZ2V0SWQ9e2lkfSBcbiAgICAgICAgICAgICAgICBpc0luUG9wcGVyIFxuICAgICAgICAgICAgICAgIHF1ZXJ5SXRlbXM9e2NvbmZpZy5xdWVyeUl0ZW1zfSBcbiAgICAgICAgICAgICAgICBkZWZhdWx0UGFnZVNpemU9e2NvbmZpZy5kZWZhdWx0UGFnZVNpemV9IFxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0ncGItNCcgXG4gICAgICAgICAgICAgICAgaW5pdGlhbFF1ZXJ5VmFsdWU9e3RoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWV9IFxuICAgICAgICAgICAgICAgIHNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uPXt0aGlzLnN0YXRlLnNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9ufVxuICAgICAgICAgICAgICAgIG9uSGFzaFBhcmFtZXRlclVzZWQ9e3RoaXMuaGFuZGxlSGFzaFBhcmFtZXRlclVzZWR9XG4gICAgICAgICAgICAgICAgcmVzdWx0c01vZGU9e3RoaXMuc3RhdGUucmVzdWx0c01vZGV9XG4gICAgICAgICAgICAgICAgb25SZXN1bHRzTW9kZUNoYW5nZT17dGhpcy5oYW5kbGVSZXN1bHRzTW9kZUNoYW5nZX1cbiAgICAgICAgICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHM9e3RoaXMuc3RhdGUuYWNjdW11bGF0ZWRSZWNvcmRzfVxuICAgICAgICAgICAgICAgIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlPXt0aGlzLmhhbmRsZUFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZX1cbiAgICAgICAgICAgICAgICB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0PXtjb25maWcudXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodH1cbiAgICAgICAgICAgICAgICBncmFwaGljc0xheWVyPXt0aGlzLmdyYXBoaWNzTGF5ZXJSZWYuY3VycmVudCB8fCB1bmRlZmluZWR9XG4gICAgICAgICAgICAgICAgbWFwVmlldz17dGhpcy5tYXBWaWV3UmVmLmN1cnJlbnQgfHwgdW5kZWZpbmVkfVxuICAgICAgICAgICAgICAgIG9uSW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXI9e3RoaXMuaW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXJGcm9tT3V0cHV0RFN9XG4gICAgICAgICAgICAgICAgb25DbGVhckdyYXBoaWNzTGF5ZXI9e3RoaXMuY2xlYXJHcmFwaGljc0xheWVySWZFeGlzdHN9XG4gICAgICAgICAgICAgICAgYWN0aXZlVGFiPXt0aGlzLnN0YXRlLmFjdGl2ZVRhYn1cbiAgICAgICAgICAgICAgICBvblRhYkNoYW5nZT17dGhpcy5oYW5kbGVUYWJDaGFuZ2V9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgPC9UYXNrTGlzdFBvcHBlcldyYXBwZXI+XG4gICAgICAgIDwvUXVlcnlXaWRnZXRDb250ZXh0LlByb3ZpZGVyPlxuICAgICAgKVxuICAgIH1cblxuICAgIGlmIChjb25maWcuYXJyYW5nZVR5cGUgPT09IFF1ZXJ5QXJyYW5nZVR5cGUuSW5saW5lICYmICFjb250cm9sbGVyV2lkZ2V0SWQpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxRdWVyeVdpZGdldENvbnRleHQuUHJvdmlkZXIgdmFsdWU9e2Ake2xheW91dElkfToke2xheW91dEl0ZW1JZH1gfT5cbiAgICAgICAgICA8VGFza0xpc3RJbmxpbmVcbiAgICAgICAgICAgIHdpZGdldElkPXtpZH1cbiAgICAgICAgICAgIHdpZGdldExhYmVsPXtsYWJlbH1cbiAgICAgICAgICAgIHdyYXA9e2NvbmZpZy5hcnJhbmdlV3JhcH1cbiAgICAgICAgICAgIHF1ZXJ5SXRlbXM9e2NvbmZpZy5xdWVyeUl0ZW1zfVxuICAgICAgICAgICAgbWluU2l6ZT17Y29uZmlnLnNpemVNYXA/LmFycmFuZ2VtZW50SWNvblBvcHBlcj8ubWluU2l6ZX1cbiAgICAgICAgICAgIGRlZmF1bHRTaXplPXtjb25maWcuc2l6ZU1hcD8uYXJyYW5nZW1lbnRJY29uUG9wcGVyPy5kZWZhdWx0U2l6ZX1cbiAgICAgICAgICAgIGRlZmF1bHRQYWdlU2l6ZT17Y29uZmlnLmRlZmF1bHRQYWdlU2l6ZX1cbiAgICAgICAgICAgIGluaXRpYWxRdWVyeVZhbHVlPXt0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlfVxuICAgICAgICAgICAgb25IYXNoUGFyYW1ldGVyVXNlZD17dGhpcy5oYW5kbGVIYXNoUGFyYW1ldGVyVXNlZH1cbiAgICAgICAgICAvPlxuICAgICAgICA8L1F1ZXJ5V2lkZ2V0Q29udGV4dC5Qcm92aWRlcj5cbiAgICAgIClcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgPFBhcGVyIHJlZj17dGhpcy53aWRnZXRSZWZ9IHZhcmlhbnQ9J2ZsYXQnIGNsYXNzTmFtZT0namltdS13aWRnZXQgcnVudGltZS1xdWVyeScgZGF0YS13aWRnZXRpZD17aWR9IGNzcz17Y3NzYFxuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICBgfT5cbiAgICAgICAgey8qIEhpZGRlbiBKaW11TWFwVmlld0NvbXBvbmVudCB0byBnZXQgbWFwIHZpZXcgZm9yIGdyYXBoaWNzIGxheWVyICovfVxuICAgICAgICB7LyogVXNlcyBleHBsaWNpdCBtYXAgd2lkZ2V0IElEIGZyb20gY29uZmlnICh3aWRnZXQtbGV2ZWwgYmluZGluZykgKi99XG4gICAgICAgIHtjb25maWcudXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCAmJiBjb25maWcuaGlnaGxpZ2h0TWFwV2lkZ2V0SWQgJiYgKFxuICAgICAgICAgIDxKaW11TWFwVmlld0NvbXBvbmVudFxuICAgICAgICAgICAgdXNlTWFwV2lkZ2V0SWQ9e2NvbmZpZy5oaWdobGlnaHRNYXBXaWRnZXRJZH1cbiAgICAgICAgICAgIG9uQWN0aXZlVmlld0NoYW5nZT17dGhpcy5oYW5kbGVKaW11TWFwVmlld0NoYW5nZWR9XG4gICAgICAgICAgLz5cbiAgICAgICAgKX1cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3aWRnZXQtaGVhZGVyXCIgY3NzPXtjc3NgXG4gICAgICAgICAgcGFkZGluZzogNnB4IDE2cHg7XG4gICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLXN5cy1jb2xvci1kaXZpZGVyLXNlY29uZGFyeSk7XG4gICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tc3lzLWNvbG9yLXN1cmZhY2UpO1xuICAgICAgICBgfT5cbiAgICAgICAgICA8aDMgY2xhc3NOYW1lPVwid2lkZ2V0LXRpdGxlXCIgY3NzPXtjc3NgXG4gICAgICAgICAgICBtYXJnaW46IDA7XG4gICAgICAgICAgICBmb250LXNpemU6IDFyZW07XG4gICAgICAgICAgICBmb250LXdlaWdodDogNjAwO1xuICAgICAgICAgICAgY29sb3I6IHZhcigtLXN5cy1jb2xvci10ZXh0LXByaW1hcnkpO1xuICAgICAgICAgIGB9PlxuICAgICAgICAgICAge2xhYmVsIHx8IHdpZGdldExhYmVsfVxuICAgICAgICAgIDwvaDM+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNzcz17Y3NzYFxuICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgIGB9PlxuICAgICAgICAgIDxkaXYgY3NzPXtjc3NgXG4gICAgICAgICAgICBmbGV4OiAxO1xuICAgICAgICAgICAgb3ZlcmZsb3c6IGF1dG87XG4gICAgICAgICAgYH0+XG4gICAgICAgICAgICA8UXVlcnlXaWRnZXRDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXtgJHtsYXlvdXRJZH06JHtsYXlvdXRJdGVtSWR9YH0+XG4gICAgICAgICAgICAgIDxRdWVyeVRhc2tMaXN0IFxuICAgICAgICAgICAgICAgIHdpZGdldElkPXtpZH0gXG4gICAgICAgICAgICAgICAgcXVlcnlJdGVtcz17Y29uZmlnLnF1ZXJ5SXRlbXN9IFxuICAgICAgICAgICAgICAgIGRlZmF1bHRQYWdlU2l6ZT17Y29uZmlnLmRlZmF1bHRQYWdlU2l6ZX0gXG4gICAgICAgICAgICAgICAgaW5pdGlhbFF1ZXJ5VmFsdWU9e3RoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWV9IFxuICAgICAgICAgICAgICAgIHNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uPXt0aGlzLnN0YXRlLnNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9ufVxuICAgICAgICAgICAgICAgIG9uSGFzaFBhcmFtZXRlclVzZWQ9e3RoaXMuaGFuZGxlSGFzaFBhcmFtZXRlclVzZWR9XG4gICAgICAgICAgICAgICAgcmVzdWx0c01vZGU9e3RoaXMuc3RhdGUucmVzdWx0c01vZGV9XG4gICAgICAgICAgICAgICAgb25SZXN1bHRzTW9kZUNoYW5nZT17dGhpcy5oYW5kbGVSZXN1bHRzTW9kZUNoYW5nZX1cbiAgICAgICAgICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHM9e3RoaXMuc3RhdGUuYWNjdW11bGF0ZWRSZWNvcmRzfVxuICAgICAgICAgICAgICAgIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlPXt0aGlzLmhhbmRsZUFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZX1cbiAgICAgICAgICAgICAgICB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0PXtjb25maWcudXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodH1cbiAgICAgICAgICAgICAgICBncmFwaGljc0xheWVyPXt0aGlzLmdyYXBoaWNzTGF5ZXJSZWYuY3VycmVudCB8fCB1bmRlZmluZWR9XG4gICAgICAgICAgICAgICAgbWFwVmlldz17dGhpcy5tYXBWaWV3UmVmLmN1cnJlbnQgfHwgdW5kZWZpbmVkfVxuICAgICAgICAgICAgICAgIG9uSW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXI9e3RoaXMuaW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXJGcm9tT3V0cHV0RFN9XG4gICAgICAgICAgICAgICAgb25DbGVhckdyYXBoaWNzTGF5ZXI9e3RoaXMuY2xlYXJHcmFwaGljc0xheWVySWZFeGlzdHN9XG4gICAgICAgICAgICAgICAgYWN0aXZlVGFiPXt0aGlzLnN0YXRlLmFjdGl2ZVRhYn1cbiAgICAgICAgICAgICAgICBvblRhYkNoYW5nZT17dGhpcy5oYW5kbGVUYWJDaGFuZ2V9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L1F1ZXJ5V2lkZ2V0Q29udGV4dC5Qcm92aWRlcj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICB7LyogU3RhdGlvbmFyeSBmb290ZXIgKi99XG4gICAgICAgICAgPGRpdiBjc3M9e2Nzc2BcbiAgICAgICAgICAgIHBhZGRpbmc6IDRweCAxMnB4O1xuICAgICAgICAgICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkIHZhcigtLXN5cy1jb2xvci1kaXZpZGVyLXNlY29uZGFyeSk7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1zeXMtY29sb3Itc3VyZmFjZS1wYXBlcik7XG4gICAgICAgICAgICBmbGV4LXNocmluazogMDtcbiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgICBgfT5cbiAgICAgICAgICAgIDxzcGFuIGNzcz17Y3NzYFxuICAgICAgICAgICAgICBmb250LXNpemU6IDAuNzVyZW07XG4gICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS1zeXMtY29sb3ItdGV4dC10ZXJ0aWFyeSk7XG4gICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA0MDA7XG4gICAgICAgICAgICAgIGxldHRlci1zcGFjaW5nOiAwLjAyNWVtO1xuICAgICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtZmxleDtcbiAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICAgICAgZ2FwOiA0cHg7XG4gICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgey8qIENvZGUvT3BlbiBTb3VyY2UgU3ltYm9sICovfVxuICAgICAgICAgICAgICA8c3ZnIFxuICAgICAgICAgICAgICAgIHdpZHRoPVwiMTRcIiBcbiAgICAgICAgICAgICAgICBoZWlnaHQ9XCIxNFwiIFxuICAgICAgICAgICAgICAgIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBcbiAgICAgICAgICAgICAgICBmaWxsPVwibm9uZVwiIFxuICAgICAgICAgICAgICAgIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIFxuICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoPVwiMlwiXG4gICAgICAgICAgICAgICAgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICBmbGV4LXNocmluazogMDtcbiAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAuNjtcbiAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPHBvbHlsaW5lIHBvaW50cz1cIjE2IDE4IDIyIDEyIDE2IDZcIi8+XG4gICAgICAgICAgICAgICAgPHBvbHlsaW5lIHBvaW50cz1cIjggNiAyIDEyIDggMThcIi8+XG4gICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgICBRdWVyeVNpbXBsZSBieSBNYXBTaW1wbGVcbiAgICAgICAgICAgICAgPHNwYW4gY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IDZweDtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjU7XG4gICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjdyZW07XG4gICAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICAgIHZ7V0lER0VUX1ZFUlNJT059XG4gICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L1BhcGVyPlxuICAgIClcbiAgfVxufVxuXG5cbiBleHBvcnQgZnVuY3Rpb24gX19zZXRfd2VicGFja19wdWJsaWNfcGF0aF9fKHVybCkgeyBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyA9IHVybCB9Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9