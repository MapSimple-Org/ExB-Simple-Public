System.register(["jimu-core/emotion","jimu-core","jimu-ui","jimu-arcgis","jimu-ui/basic/sql-expression-runtime","widgets/shared-code/common","jimu-layouts/layout-runtime","jimu-theme"], function(__WEBPACK_DYNAMIC_EXPORT__, __system_context__) {
	var __WEBPACK_EXTERNAL_MODULE__emotion_react_jsx_runtime__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_core__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_ui__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_arcgis__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_ui_basic_sql_expression_runtime__ = {};
	var __WEBPACK_EXTERNAL_MODULE_widgets_shared_code_common__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_layouts_layout_runtime__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_theme__ = {};
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE__emotion_react_jsx_runtime__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_core__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_ui__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_arcgis__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_ui_basic_sql_expression_runtime__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_widgets_shared_code_common__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_layouts_layout_runtime__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_theme__, "__esModule", { value: true });
	return {
		setters: [
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE__emotion_react_jsx_runtime__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_core__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_ui__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_arcgis__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_ui_basic_sql_expression_runtime__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_widgets_shared_code_common__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_layouts_layout_runtime__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_theme__[key] = module[key];
				});
			}
		],
		execute: function() {
			__WEBPACK_DYNAMIC_EXPORT__(
/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./jimu-icons/filled/directional/down.tsx":
/*!************************************************!*\
  !*** ./jimu-icons/filled/directional/down.tsx ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DownFilled: () => (/* binding */ DownFilled)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_filled_directional_down_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/filled/directional/down.svg */ "./jimu-icons/svg/filled/directional/down.svg");
/* harmony import */ var _svg_filled_directional_down_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_filled_directional_down_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const DownFilled = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_filled_directional_down_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/filled/directional/right.tsx":
/*!*************************************************!*\
  !*** ./jimu-icons/filled/directional/right.tsx ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   RightFilled: () => (/* binding */ RightFilled)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_filled_directional_right_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/filled/directional/right.svg */ "./jimu-icons/svg/filled/directional/right.svg");
/* harmony import */ var _svg_filled_directional_right_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_filled_directional_right_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const RightFilled = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_filled_directional_right_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/directional/arrow-left.tsx":
/*!********************************************************!*\
  !*** ./jimu-icons/outlined/directional/arrow-left.tsx ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ArrowLeftOutlined: () => (/* binding */ ArrowLeftOutlined)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/directional/arrow-left.svg */ "./jimu-icons/svg/outlined/directional/arrow-left.svg");
/* harmony import */ var _svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const ArrowLeftOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/directional/collapse-all.tsx":
/*!**********************************************************!*\
  !*** ./jimu-icons/outlined/directional/collapse-all.tsx ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CollapseAllOutlined: () => (/* binding */ CollapseAllOutlined)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_directional_collapse_all_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/directional/collapse-all.svg */ "./jimu-icons/svg/outlined/directional/collapse-all.svg");
/* harmony import */ var _svg_outlined_directional_collapse_all_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_directional_collapse_all_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const CollapseAllOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_outlined_directional_collapse_all_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/directional/expand-all.tsx":
/*!********************************************************!*\
  !*** ./jimu-icons/outlined/directional/expand-all.tsx ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ExpandAllOutlined: () => (/* binding */ ExpandAllOutlined)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_directional_expand_all_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/directional/expand-all.svg */ "./jimu-icons/svg/outlined/directional/expand-all.svg");
/* harmony import */ var _svg_outlined_directional_expand_all_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_directional_expand_all_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const ExpandAllOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_outlined_directional_expand_all_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/editor/trash.tsx":
/*!**********************************************!*\
  !*** ./jimu-icons/outlined/editor/trash.tsx ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TrashOutlined: () => (/* binding */ TrashOutlined)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/editor/trash.svg */ "./jimu-icons/svg/outlined/editor/trash.svg");
/* harmony import */ var _svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const TrashOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/suggested/info.tsx":
/*!************************************************!*\
  !*** ./jimu-icons/outlined/suggested/info.tsx ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   InfoOutlined: () => (/* binding */ InfoOutlined)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_suggested_info_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/suggested/info.svg */ "./jimu-icons/svg/outlined/suggested/info.svg");
/* harmony import */ var _svg_outlined_suggested_info_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_suggested_info_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const InfoOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_outlined_suggested_info_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/svg/filled/directional/down.svg":
/*!****************************************************!*\
  !*** ./jimu-icons/svg/filled/directional/down.svg ***!
  \****************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"m14 4-6 8-6-8z\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/filled/directional/right.svg":
/*!*****************************************************!*\
  !*** ./jimu-icons/svg/filled/directional/right.svg ***!
  \*****************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"m4 2 8 6-8 6z\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/application/more-horizontal.svg":
/*!*****************************************************************!*\
  !*** ./jimu-icons/svg/outlined/application/more-horizontal.svg ***!
  \*****************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M2 7a1 1 0 1 0 0 2 1 1 0 0 0 0-2m5 1a1 1 0 1 1 2 0 1 1 0 0 1-2 0m6 0a1 1 0 1 1 2 0 1 1 0 0 1-2 0\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/arrow-left.svg":
/*!************************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/arrow-left.svg ***!
  \************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M15 7.5a.52.52 0 0 1-.516.527H2.976L6.473 11.6a.535.535 0 0 1 0 .746.51.51 0 0 1-.73 0L1 7.5l4.743-4.846a.51.51 0 0 1 .73 0 .535.535 0 0 1 0 .746L2.976 6.973h11.508c.285 0 .516.236.516.527\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/collapse-all.svg":
/*!**************************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/collapse-all.svg ***!
  \**************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M1 3h14v1H1zM9 7h6v1H9zM5.036 6.146a.5.5 0 0 0-.708 0L1.146 9.328a.5.5 0 1 0 .708.708l2.328-2.329V14.5h1V7.707l2.328 2.329a.5.5 0 1 0 .708-.708z\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/expand-all.svg":
/*!************************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/expand-all.svg ***!
  \************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M1 3h14v1H1zM9 7h6v1H9zM4.328 14.354a.5.5 0 0 0 .708 0l3.182-3.182a.5.5 0 1 0-.708-.708l-2.328 2.329V6h-1v6.793l-2.328-2.328a.5.5 0 1 0-.708.707z\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/right.svg":
/*!*******************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/right.svg ***!
  \*******************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M4.653 13.854a.485.485 0 0 1 0-.708L10.24 8 4.653 2.854a.485.485 0 0 1 0-.708.54.54 0 0 1 .738 0l5.956 5.5a.485.485 0 0 1 0 .708l-5.956 5.5a.54.54 0 0 1-.738 0\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/editor/trash.svg":
/*!**************************************************!*\
  !*** ./jimu-icons/svg/outlined/editor/trash.svg ***!
  \**************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M6 6.5a.5.5 0 0 1 1 0v6a.5.5 0 0 1-1 0zM9.5 6a.5.5 0 0 0-.5.5v6a.5.5 0 0 0 1 0v-6a.5.5 0 0 0-.5-.5\"></path><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M11 0H5a1 1 0 0 0-1 1v2H.5a.5.5 0 0 0 0 1h1.6l.81 11.1a1 1 0 0 0 .995.9h8.19a1 1 0 0 0 .995-.9L13.9 4h1.6a.5.5 0 0 0 0-1H12V1a1 1 0 0 0-1-1m0 3V1H5v2zm1.895 1h-9.79l.8 11h8.19z\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/suggested/error.svg":
/*!*****************************************************!*\
  !*** ./jimu-icons/svg/outlined/suggested/error.svg ***!
  \*****************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16m0-1A7 7 0 1 0 8 1a7 7 0 0 0 0 14M8 4a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 4m1 7a1 1 0 1 1-2 0 1 1 0 0 1 2 0\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/suggested/info.svg":
/*!****************************************************!*\
  !*** ./jimu-icons/svg/outlined/suggested/info.svg ***!
  \****************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M8 5.5a1 1 0 1 0 0-2 1 1 0 0 0 0 2M6.5 7.5A.5.5 0 0 1 7 7h1.5v4.5h1a.5.5 0 0 1 0 1h-3a.5.5 0 0 1 0-1h1V8H7a.5.5 0 0 1-.5-.5\"></path><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16m0-1A7 7 0 1 0 8 1a7 7 0 0 0 0 14\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/suggested/warning.svg":
/*!*******************************************************!*\
  !*** ./jimu-icons/svg/outlined/suggested/warning.svg ***!
  \*******************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M8 2.125 14.334 14H1.667zm-.882-.47a1 1 0 0 1 1.765 0l6.333 11.874A1 1 0 0 1 14.334 15H1.667a1 1 0 0 1-.882-1.47zM8 4.874a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0L8.9 5.87a.905.905 0 0 0-.9-.995m1 7a1 1 0 1 1-2 0 1 1 0 0 1 2 0\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./your-extensions/widgets/query-simple/icon.svg":
/*!*******************************************************!*\
  !*** ./your-extensions/widgets/query-simple/icon.svg ***!
  \*******************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 20 20\"><path fill=\"#000\" d=\"M8.5 3A5.5 5.5 0 0 1 14 8.5a5.5 5.5 0 0 1-1.273 3.527l4.053 4.054a.75.75 0 1 1-1.06 1.06l-4.054-4.053a5.5 5.5 0 0 1-3.527 1.273 5.5 5.5 0 1 1 0-11H8.5zm0 1.5h-.361a4 4 0 1 0 0 8 4 4 0 0 0 0-8z\"></path><rect width=\"19\" height=\"19\" x=\".5\" y=\".5\" stroke=\"#000\" rx=\"1.5\"></rect></svg>"

/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/config.ts":
/*!************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/config.ts ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CreateToolType: () => (/* binding */ CreateToolType),
/* harmony export */   FieldsType: () => (/* binding */ FieldsType),
/* harmony export */   ListDirection: () => (/* binding */ ListDirection),
/* harmony export */   PagingType: () => (/* binding */ PagingType),
/* harmony export */   QueryArrangeType: () => (/* binding */ QueryArrangeType),
/* harmony export */   ResultSelectMode: () => (/* binding */ ResultSelectMode),
/* harmony export */   SelectionType: () => (/* binding */ SelectionType),
/* harmony export */   SortDirection: () => (/* binding */ SortDirection),
/* harmony export */   SpatialFilterType: () => (/* binding */ SpatialFilterType),
/* harmony export */   SpatialRelation: () => (/* binding */ SpatialRelation),
/* harmony export */   SymbolType: () => (/* binding */ SymbolType),
/* harmony export */   UnitType: () => (/* binding */ UnitType),
/* harmony export */   mapJSAPISpatialRelToDsSpatialRel: () => (/* binding */ mapJSAPISpatialRelToDsSpatialRel),
/* harmony export */   mapJSAPIUnitToDsUnit: () => (/* binding */ mapJSAPIUnitToDsUnit)
/* harmony export */ });
var CreateToolType;
(function (CreateToolType) {
    CreateToolType["Point"] = "Point";
    CreateToolType["Polyline"] = "Polyline";
    CreateToolType["Polygon"] = "Polygon";
    CreateToolType["Rectangle"] = "Rectangle";
    CreateToolType["Circle"] = "Circle";
})(CreateToolType || (CreateToolType = {}));
var SelectionType;
(function (SelectionType) {
    SelectionType["NewSelection"] = "NEW_SELECTION";
    SelectionType["AddToSelection"] = "ADD_TO_CURRENT_SELECTION";
    SelectionType["RemoveFromSelection"] = "REMOVE_FROM_CURRENT_SELECTION";
    SelectionType["SubsetSelection"] = "SUBSET_FROM_CURRENT_SELECTION";
    SelectionType["SwitchSelection"] = "SWITCH_CURRENT_SELECTION";
})(SelectionType || (SelectionType = {}));
var QueryArrangeType;
(function (QueryArrangeType) {
    QueryArrangeType["Block"] = "BLOCK";
    QueryArrangeType["Inline"] = "INLINE";
    QueryArrangeType["Popper"] = "POPPER";
})(QueryArrangeType || (QueryArrangeType = {}));
var SpatialFilterType;
(function (SpatialFilterType) {
    SpatialFilterType["CurrentMapExtent"] = "CurrentMapExtent";
    SpatialFilterType["InteractiveDrawMode"] = "InteractiveDrawMode";
    SpatialFilterType["None"] = "";
})(SpatialFilterType || (SpatialFilterType = {}));
var SpatialRelation;
(function (SpatialRelation) {
    SpatialRelation["Intersect"] = "intersects";
    SpatialRelation["Contain"] = "contains";
    SpatialRelation["Cross"] = "crosses";
    SpatialRelation["EnvelopeIntersect"] = "envelope-intersects";
    SpatialRelation["IndexIntersect"] = "index-intersects";
    SpatialRelation["Overlap"] = "overlaps";
    SpatialRelation["Touch"] = "touches";
    SpatialRelation["Within"] = "within";
})(SpatialRelation || (SpatialRelation = {}));
const mapJSAPISpatialRelToDsSpatialRel = {
    [SpatialRelation.Intersect]: 'esriSpatialRelIntersects',
    [SpatialRelation.Contain]: 'esriSpatialRelContains',
    [SpatialRelation.Cross]: 'esriSpatialRelCrosses',
    [SpatialRelation.EnvelopeIntersect]: 'esriSpatialRelEnvelopeIntersects',
    [SpatialRelation.IndexIntersect]: 'esriSpatialRelIndexIntersects',
    [SpatialRelation.Overlap]: 'esriSpatialRelOverlaps',
    [SpatialRelation.Touch]: 'esriSpatialRelTouches',
    [SpatialRelation.Within]: 'esriSpatialRelWithin'
};
var UnitType;
(function (UnitType) {
    UnitType["Miles"] = "Miles";
    UnitType["Kilometers"] = "Kilometers";
    UnitType["Feet"] = "Feet";
    UnitType["Meters"] = "Meters";
    UnitType["NauticalMiles"] = "NauticalMiles";
})(UnitType || (UnitType = {}));
const mapJSAPIUnitToDsUnit = {
    [UnitType.Miles]: 'esriSRUnit_StatuteMile',
    [UnitType.Kilometers]: 'esriSRUnit_Kilometer',
    [UnitType.Feet]: 'esriSRUnit_Foot',
    [UnitType.Meters]: 'esriSRUnit_Meter',
    [UnitType.NauticalMiles]: 'esriSRUnit_NauticalMile'
};
var ListDirection;
(function (ListDirection) {
    ListDirection["Horizontal"] = "Horizontal";
    ListDirection["Vertical"] = "Vertical";
})(ListDirection || (ListDirection = {}));
var PagingType;
(function (PagingType) {
    PagingType["MultiPage"] = "MultiPage";
    PagingType["LazyLoad"] = "LazyLoad";
    PagingType["Simple"] = "Simple";
})(PagingType || (PagingType = {}));
var FieldsType;
(function (FieldsType) {
    FieldsType["PopupSetting"] = "PopupSetting";
    FieldsType["SelectAttributes"] = "SelectAttributes";
})(FieldsType || (FieldsType = {}));
var SortDirection;
(function (SortDirection) {
    SortDirection["Asc"] = "Asc";
    SortDirection["Desc"] = "Desc";
})(SortDirection || (SortDirection = {}));
var ResultSelectMode;
(function (ResultSelectMode) {
    ResultSelectMode["Single"] = "Single";
    ResultSelectMode["Multiple"] = "Multiple";
})(ResultSelectMode || (ResultSelectMode = {}));
var SymbolType;
(function (SymbolType) {
    SymbolType["DefaultSymbol"] = "DefaultSymbol";
    SymbolType["CustomSymbol"] = "CustomSymbol";
})(SymbolType || (SymbolType = {}));


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/data-actions/add-to-map-action.tsx":
/*!*************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/data-actions/add-to-map-action.tsx ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createAddToMapAction: () => (/* binding */ createAddToMapAction)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _runtime_selection_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../runtime/selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/**
 * Custom "Add to Map" data action for QuerySimple widget.
 *
 * This action replaces the framework's "Show on Map" action with a custom
 * implementation that uses QuerySimple's selection process (selectRecordsAndPublish).
 * This ensures consistent behavior with query results and proper integration
 * with the widget's "Clear results" functionality.
 */
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_2__.createQuerySimpleDebugLogger)();
/**
 * Creates a custom "Add to Map" data action that uses QuerySimple's selection process.
 *
 * This action replaces the framework's "Show on Map" action and ensures consistent
 * behavior with QuerySimple's query results by using the same selection mechanism.
 *
 * @param widgetId - The widget ID that provides this action
 * @param outputDS - The output data source (used for selection on the origin layer)
 * @param intl - The Intl object for internationalization
 * @param queryItem - Optional query item configuration (for zoomToSelected setting)
 * @param runtimeZoomToSelected - Optional runtime zoom override from the query form
 * @returns A DataAction object that can be used by DataActionList
 */
function createAddToMapAction(widgetId, outputDS, intl, queryItem, runtimeZoomToSelected) {
    return {
        id: `${widgetId}-addToMap`,
        name: 'addToMap',
        label: intl.formatMessage({ id: 'addToMap', defaultMessage: 'Add to map' }),
        // Icon matches the framework's "Show on Map" action for consistency
        icon: (__webpack_require__(/*! ../runtime/assets/icons/show-on-map.svg */ "./your-extensions/widgets/query-simple/src/runtime/assets/icons/show-on-map.svg")["default"]) || __webpack_require__(/*! ../runtime/assets/icons/show-on-map.svg */ "./your-extensions/widgets/query-simple/src/runtime/assets/icons/show-on-map.svg"),
        // Note: Index may not control position if extraActions are always appended after framework actions
        index: -100,
        widgetId,
        intl,
        supportProviderWidget: true,
        /**
         * Determines if this action can process the given data sets.
         * Supports Records level actions with feature data records.
         */
        isSupported: (dataSets, dataLevel, actionWidgetId) => __awaiter(this, void 0, void 0, function* () {
            debugLogger.log('DATA-ACTION', {
                action: 'addToMap-isSupported',
                widgetId,
                actionWidgetId,
                dataLevel,
                dataSetsCount: (dataSets === null || dataSets === void 0 ? void 0 : dataSets.length) || 0,
                hasOutputDS: !!outputDS
            });
            // Only support Records level actions
            if (dataLevel !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataLevel.Records) {
                debugLogger.log('DATA-ACTION', {
                    action: 'addToMap-isSupported',
                    result: false,
                    reason: 'Not Records level'
                });
                return false;
            }
            // Need at least one data set with records
            if (!dataSets || dataSets.length === 0) {
                debugLogger.log('DATA-ACTION', {
                    action: 'addToMap-isSupported',
                    result: false,
                    reason: 'No data sets'
                });
                return false;
            }
            // Check if we have records and output data source
            const hasRecords = dataSets.some(ds => ds.records && ds.records.length > 0);
            const supported = hasRecords && !!outputDS;
            debugLogger.log('DATA-ACTION', {
                action: 'addToMap-isSupported',
                result: supported,
                hasRecords,
                recordsCount: dataSets.reduce((sum, ds) => { var _a; return sum + (((_a = ds.records) === null || _a === void 0 ? void 0 : _a.length) || 0); }, 0)
            });
            return supported;
        }),
        /**
         * Executes the action by selecting records using QuerySimple's selection process.
         */
        onExecute: (dataSets, dataLevel, actionWidgetId) => __awaiter(this, void 0, void 0, function* () {
            debugLogger.log('DATA-ACTION', {
                action: 'addToMap-onExecute',
                widgetId,
                actionWidgetId,
                dataLevel,
                dataSetsCount: (dataSets === null || dataSets === void 0 ? void 0 : dataSets.length) || 0,
                hasOutputDS: !!outputDS
            });
            if (!outputDS || dataLevel !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataLevel.Records) {
                debugLogger.log('DATA-ACTION', {
                    action: 'addToMap-onExecute',
                    result: false,
                    reason: !outputDS ? 'No outputDS' : 'Not Records level'
                });
                return false;
            }
            // Collect all records from all data sets
            const allRecords = [];
            dataSets.forEach(dataSet => {
                if (dataSet.records && dataSet.records.length > 0) {
                    // Filter to only FeatureDataRecord types
                    const featureRecords = dataSet.records.filter((record) => {
                        return record && typeof record.getGeometry === 'function';
                    });
                    allRecords.push(...featureRecords);
                }
            });
            if (allRecords.length === 0) {
                debugLogger.log('DATA-ACTION', {
                    action: 'addToMap-onExecute',
                    result: false,
                    reason: 'No feature records found'
                });
                return false;
            }
            // Get record IDs
            const recordIds = allRecords.map(record => record.getId());
            debugLogger.log('DATA-ACTION', {
                action: 'addToMap-onExecute',
                recordsCount: allRecords.length,
                recordIds: recordIds.slice(0, 10), // Log first 10 IDs
                outputDSId: outputDS.id
            });
            // Use QuerySimple's selection process - selects on origin layer and publishes selection messages
            // This ensures consistent behavior with query results and proper integration with "Clear results"
            try {
                (0,_runtime_selection_utils__WEBPACK_IMPORTED_MODULE_1__.selectRecordsAndPublish)(widgetId, outputDS, recordIds, allRecords, true);
                // Determine zoom behavior: runtime override takes precedence, then queryItem config, defaults to true
                const shouldZoom = runtimeZoomToSelected !== undefined
                    ? runtimeZoomToSelected
                    : ((queryItem === null || queryItem === void 0 ? void 0 : queryItem.zoomToSelected) !== false);
                if (shouldZoom && allRecords.length > 0) {
                    const zoomDataSet = {
                        dataSource: outputDS,
                        records: allRecords,
                        name: outputDS.getLabel()
                    };
                    // Find and execute the zoomToFeature action from available framework actions
                    jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataActionManager.getInstance().getSupportedActions(widgetId, [zoomDataSet], jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataLevel.Records)
                        .then(actionCategories => {
                        // Search through all action categories to find zoomToFeature action
                        let zoomAction = null;
                        for (const category in actionCategories) {
                            const actions = actionCategories[category];
                            zoomAction = actions.find((action) => action.name === 'zoomToFeature' || action.id === 'zoomToFeature') || null;
                            if (zoomAction)
                                break;
                        }
                        if (zoomAction) {
                            return jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataActionManager.getInstance().executeDataAction(zoomAction, [zoomDataSet], jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataLevel.Records, widgetId);
                        }
                    })
                        .catch(error => {
                        debugLogger.log('DATA-ACTION', {
                            action: 'addToMap-onExecute-zoom',
                            error: error instanceof Error ? error.message : String(error)
                        });
                    });
                }
                debugLogger.log('DATA-ACTION', {
                    action: 'addToMap-onExecute',
                    result: true,
                    message: 'Successfully selected records and published selection message',
                    zoomExecuted: shouldZoom
                });
                return true;
            }
            catch (error) {
                debugLogger.log('DATA-ACTION', {
                    action: 'addToMap-onExecute',
                    result: false,
                    error: error instanceof Error ? error.message : String(error),
                    errorStack: error instanceof Error ? error.stack : undefined
                });
                return false;
            }
        }),
        /**
         * Cleanup method (required by DataAction interface)
         */
        destroy: () => {
            // No cleanup needed
        }
    };
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/data-actions/index.tsx":
/*!*************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/data-actions/index.tsx ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getExtraActions: () => (/* binding */ getExtraActions)
/* harmony export */ });
/* harmony import */ var _add_to_map_action__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./add-to-map-action */ "./your-extensions/widgets/query-simple/src/data-actions/add-to-map-action.tsx");

/**
 * QuerySimple Custom Data Actions
 *
 * Returns custom data actions for the widget.
 * Includes a custom "Add to Map" action that uses QuerySimple's selection process.
 *
 * @param widgetId - The widget ID
 * @param outputDS - The output data source (null/undefined if not available)
 * @param intl - The Intl object for internationalization
 * @param queryItem - Optional query item configuration
 * @param runtimeZoomToSelected - Optional runtime zoom override from the query form
 * @returns Array of custom DataAction objects (empty if conditions not met)
 */
function getExtraActions(widgetId, outputDS, intl, queryItem, runtimeZoomToSelected) {
    // Only create the action if we have both an output data source and intl object
    if (outputDS && intl) {
        return [(0,_add_to_map_action__WEBPACK_IMPORTED_MODULE_0__.createAddToMapAction)(widgetId, outputDS, intl, queryItem, runtimeZoomToSelected)];
    }
    return [];
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/default-query-item.ts":
/*!************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/default-query-item.ts ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DEFAULT_QUERY_ITEM: () => (/* binding */ DEFAULT_QUERY_ITEM)
/* harmony export */ });
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./config */ "./your-extensions/widgets/query-simple/src/config.ts");

const DEFAULT_QUERY_ITEM = {
    icon: null,
    displayLabel: true,
    sqlExprObj: null,
    useAttributeFilter: true,
    useSpatialFilter: true,
    spatialMapWidgetIds: [],
    spatialFilterTypes: [],
    spatialInteractiveCreateToolTypes: [
        _config__WEBPACK_IMPORTED_MODULE_0__.CreateToolType.Point,
        _config__WEBPACK_IMPORTED_MODULE_0__.CreateToolType.Polyline,
        _config__WEBPACK_IMPORTED_MODULE_0__.CreateToolType.Polygon,
        _config__WEBPACK_IMPORTED_MODULE_0__.CreateToolType.Rectangle,
        _config__WEBPACK_IMPORTED_MODULE_0__.CreateToolType.Circle
    ],
    spatialInteractiveEnableBuffer: false,
    spatialInteractiveBufferDistance: 0,
    spatialInteractiveBufferUnit: _config__WEBPACK_IMPORTED_MODULE_0__.UnitType.Meters,
    spatialRelations: [_config__WEBPACK_IMPORTED_MODULE_0__.SpatialRelation.Intersect],
    spatialRelationUseDataSources: [],
    spatialRelationEnableSelectTool: false,
    spatialRelationEnableBuffer: false,
    spatialRelationBufferDistance: 0,
    spatialRelationBufferUnit: _config__WEBPACK_IMPORTED_MODULE_0__.UnitType.Meters,
    resultListDirection: _config__WEBPACK_IMPORTED_MODULE_0__.ListDirection.Vertical,
    resultPagingStyle: _config__WEBPACK_IMPORTED_MODULE_0__.PagingType.MultiPage,
    resultFieldsType: _config__WEBPACK_IMPORTED_MODULE_0__.FieldsType.PopupSetting,
    resultSymbolType: _config__WEBPACK_IMPORTED_MODULE_0__.SymbolType.DefaultSymbol,
    resultCustomSymbol: {
        angle: 0,
        color: [255, 255, 255, 255],
        outline: {
            color: [255, 255, 255, 255],
            style: 'esriSLSSolid',
            type: 'esriSLS',
            width: 1
        },
        size: 6,
        style: 'esriSMSCircle',
        type: 'esriSMS',
        xoffset: 0,
        yoffset: 0
    },
    resultAllowChangeSymbol: false,
    allowExport: false,
    sortOptions: [],
    zoomToSelected: true,
    itemSizeMap: {
        arrangementHorizontalPopper: {
            minSize: { width: 300, height: 300 },
            defaultSize: { width: 360, height: 480 }
        }
    }
};


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/assets/icons/show-on-map.svg":
/*!***************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/assets/icons/show-on-map.svg ***!
  \***************************************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M1 1v14h14V1zm9.082 13c-.005-.037-.113-.274-.122-.309a1.5 1.5 0 0 0 .718-1.267 1.2 1.2 0 0 0-.053-.358c.152-.176.263-.383.326-.607q.046.003.093.003c.3.002.593-.091.836-.266q.06.066.126.124c.42.412.977.654 1.564.68H14v2h-3.918M14 11h-.43a1.46 1.46 0 0 1-.906-.433c-.264-.23-.258-.782-.617-.782-.482 0-.52.677-1.003.677-.219 0-.38-.177-.599-.177-.193 0-.445.102-.445.293v.502c0 .424-.506.508-.506.934 0 .171.184.236.184.41 0 .58-.893.502-.893 1.08 0 .191.215.305.215.486V14H6.375q.087-.243.09-.502c0-.547-1.043-.393-1.207-.72-.407-.813.693-1.022.693-1.673 0-.16-.082-.488-.334-.513-.351-.035-.443.154-.797.154a.406.406 0 0 1-.437-.36c0-.386.308-.566.308-.952 0-.25-.102-.393-.102-.643a.62.62 0 0 1 .59-.643c.323 0 .464.264.618.54a.64.64 0 0 0 .617.308c.49 0 .798-.61.798-.977a.47.47 0 0 1 .437-.488c.347 0 .476.36.824.36.57 0 .55-.756 1.053-1.03.618-.332.438-1.052.36-1.44-.032-.169.29-.5.464-.487.72.05.412-.54.412-.823q0-.073.022-.142c.111-.332.595-.438.595-.836 0-.281-.233-.41-.233-.693a.65.65 0 0 1 .22-.44H14zM2 14V2h8.278c-.013.077-.132.356-.132.44 0 .194.038.387.112.567a1.6 1.6 0 0 0-.422.643 1.4 1.4 0 0 0-.074.442 1.7 1.7 0 0 0-.536.43 1.32 1.32 0 0 0-.32 1.091q.046.205.066.414a2 2 0 0 0-.649.67 1.46 1.46 0 0 0-.674-.166 1.45 1.45 0 0 0-1.383 1.086 1.44 1.44 0 0 0-1.086-.469 1.62 1.62 0 0 0-1.591 1.643c0 .254.113.293.084.574s-.29.535-.29 1.022a1.37 1.37 0 0 0 .984 1.29 1.58 1.58 0 0 0-.003 1.549c.143.286.636.774.534.774z\"></path></svg>"

/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/buffer-input.tsx":
/*!***************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/buffer-input.tsx ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BufferInput: () => (/* binding */ BufferInput)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _query_task_context__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./query-task-context */ "./your-extensions/widgets/query-simple/src/runtime/query-task-context.tsx");

/** @jsx jsx */





function BufferInput(props) {
    const { distance = 0, unit = _config__WEBPACK_IMPORTED_MODULE_3__.UnitType.Meters, onBufferChange } = props;
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.defaultMessages, _translations_default__WEBPACK_IMPORTED_MODULE_4__["default"]);
    const [d, setD] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(distance);
    const [u, setU] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(unit);
    const queryTaskContext = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useContext(_query_task_context__WEBPACK_IMPORTED_MODULE_5__.QueryTaskContext);
    const resetSymbolRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(queryTaskContext.resetSymbol);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        let changed = false;
        if (distance !== d) {
            setD(distance);
            changed = true;
        }
        if (unit !== u) {
            setU(unit);
            changed = true;
        }
        if (changed) {
            onBufferChange(distance, unit);
        }
        // eslint-disable-next-line react-hooks/exhaustive-deps
    }, [distance, unit]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (queryTaskContext.resetSymbol && queryTaskContext.resetSymbol !== resetSymbolRef.current) {
            resetSymbolRef.current = queryTaskContext.resetSymbol;
            setD(distance);
            setU(unit);
            onBufferChange(distance, unit);
        }
    }, [queryTaskContext.resetSymbol, distance, unit, onBufferChange]);
    const handleDistanceChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((value) => {
        setD(value);
    }, []);
    const handleDistanceAccepted = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((value) => {
        setD(value);
        onBufferChange(value, u);
    }, [onBufferChange, u]);
    const handleBufferUnitChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((e) => {
        setU(e.target.value);
        onBufferChange(d, e.target.value);
    }, [onBufferChange, d]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.NumericInput, { "aria-label": getI18nMessage('theBufferDistance'), className: 'mr-1', value: d, onChange: handleDistanceChange, onAcceptValue: handleDistanceAccepted }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Select, { "aria-label": getI18nMessage('unit'), value: u, onChange: handleBufferUnitChange, children: Object.values(_config__WEBPACK_IMPORTED_MODULE_3__.UnitType).map((value) => ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: value, children: getI18nMessage(`unit_${value}`) }, value))) })] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/components/feature-info.tsx":
/*!**************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/components/feature-info.tsx ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   LoadStatus: () => (/* binding */ LoadStatus),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_icons_filled_directional_right__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-icons/filled/directional/right */ "./jimu-icons/filled/directional/right.tsx");
/* harmony import */ var jimu_icons_filled_directional_down__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jimu-icons/filled/directional/down */ "./jimu-icons/filled/directional/down.tsx");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");

/** @jsx jsx */
// This file is duplicated from '../../../../feature-info/src/runtime/components/feature-info'






const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_6__.createQuerySimpleDebugLogger)();
var LoadStatus;
(function (LoadStatus) {
    LoadStatus["Pending"] = "Pending";
    LoadStatus["Fulfilled"] = "Fulfilled";
    LoadStatus["Rejected"] = "Rejected";
})(LoadStatus || (LoadStatus = {}));
const style = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
  border: 1px solid var(--sys-color-divider-secondary);
  .esri-widget__heading {
    font-size: 0.875rem !important;
    font-weight: 500 !important;
    margin: 0;
    color: var(--sys-color-surface-paper-text);
  }

  .esri-feature__content-element {
    padding: 0;
  }

  .jimu-btn.expanded {
    align-self: flex-start;
  }
  
  // Larger expand/collapse button for better touch targets
  .jimu-btn[aria-label*="expand"],
  .jimu-btn[aria-label*="collapse"] {
    min-width: 32px;
    min-height: 32px;
    padding: 6px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .esri-feature.esri-widget {
    background-color: transparent;
  }
`;
class FeatureInfo extends jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.PureComponent {
    constructor(props) {
        var _a, _b, _c, _d;
        super(props);
        this.toggleExpanded = (e) => {
            e.stopPropagation();
            this.setState({ showContent: !this.state.showContent });
        };
        const { togglable = false, expandByDefault } = this.props;
        const recordId = ((_b = (_a = this.props.graphic) === null || _a === void 0 ? void 0 : _a.attributes) === null || _b === void 0 ? void 0 : _b.OBJECTID) || ((_d = (_c = this.props.graphic) === null || _c === void 0 ? void 0 : _c.attributes) === null || _d === void 0 ? void 0 : _d.objectid) || 'unknown';
        const initialShowContent = !togglable || expandByDefault;
        debugLogger.log('EXPAND-COLLAPSE', {
            event: 'FeatureInfo-constructor',
            recordId,
            togglable,
            expandByDefault,
            initialShowContent,
            timestamp: Date.now()
        });
        this.featureContainer = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.createRef();
        this.state = {
            showContent: initialShowContent,
            loadStatus: LoadStatus.Pending
        };
    }
    componentDidMount() {
        this.createFeature();
    }
    componentDidUpdate(prevProps) {
        var _a, _b, _c, _d, _e, _f, _g, _h;
        if (this.feature) {
            if (prevProps.popupTemplate !== this.props.popupTemplate ||
                prevProps.defaultPopupTemplate !== this.props.defaultPopupTemplate ||
                prevProps.graphic !== this.props.graphic) {
                this.destroyFeature();
                this.createFeature();
            }
            else {
                this.feature.visibleElements = this.getVisibleElements();
            }
        }
        // Sync expandByDefault prop changes (when user clicks Expand All/Collapse All)
        // This ensures all items respect the global expand/collapse state
        if (prevProps.expandByDefault !== this.props.expandByDefault) {
            const { togglable = false, expandByDefault } = this.props;
            const recordId = ((_b = (_a = this.props.graphic) === null || _a === void 0 ? void 0 : _a.attributes) === null || _b === void 0 ? void 0 : _b.OBJECTID) || ((_d = (_c = this.props.graphic) === null || _c === void 0 ? void 0 : _c.attributes) === null || _d === void 0 ? void 0 : _d.objectid) || 'unknown';
            debugLogger.log('EXPAND-COLLAPSE', {
                event: 'expandByDefault-prop-changed',
                recordId,
                prevExpandByDefault: prevProps.expandByDefault,
                newExpandByDefault: expandByDefault,
                togglable,
                currentShowContent: this.state.showContent,
                willUpdateState: togglable,
                timestamp: Date.now()
            });
            if (togglable) {
                this.setState({ showContent: expandByDefault }, () => {
                    debugLogger.log('EXPAND-COLLAPSE', {
                        event: 'FeatureInfo-state-updated',
                        recordId,
                        newShowContent: this.state.showContent,
                        timestamp: Date.now()
                    });
                });
            }
        }
        // Log all componentDidUpdate calls to track remounts
        const recordId = ((_f = (_e = this.props.graphic) === null || _e === void 0 ? void 0 : _e.attributes) === null || _f === void 0 ? void 0 : _f.OBJECTID) || ((_h = (_g = this.props.graphic) === null || _g === void 0 ? void 0 : _g.attributes) === null || _h === void 0 ? void 0 : _h.objectid) || 'unknown';
        if (prevProps.graphic !== this.props.graphic ||
            prevProps.popupTemplate !== this.props.popupTemplate ||
            prevProps.defaultPopupTemplate !== this.props.defaultPopupTemplate) {
            debugLogger.log('EXPAND-COLLAPSE', {
                event: 'FeatureInfo-props-changed-recreate',
                recordId,
                graphicChanged: prevProps.graphic !== this.props.graphic,
                popupTemplateChanged: prevProps.popupTemplate !== this.props.popupTemplate,
                defaultPopupTemplateChanged: prevProps.defaultPopupTemplate !== this.props.defaultPopupTemplate,
                expandByDefault: this.props.expandByDefault,
                currentShowContent: this.state.showContent,
                timestamp: Date.now()
            });
        }
    }
    destroyFeature() {
        this.feature && !this.feature.destroyed && this.feature.destroy();
    }
    getVisibleElements() {
        const { togglable = false } = this.props;
        const { showContent } = this.state;
        const expanded = togglable ? showContent : true;
        return {
            title: true,
            content: {
                fields: expanded,
                text: expanded,
                media: expanded,
                attachments: expanded
            },
            lastEditedInfo: false
        };
    }
    createFeature() {
        let featureModulePromise;
        if (this.Feature) {
            featureModulePromise = Promise.resolve();
        }
        else {
            featureModulePromise = (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.loadArcGISJSAPIModules)([
                'esri/widgets/Feature'
            ]).then(modules => {
                [
                    this.Feature
                ] = modules;
            });
        }
        return featureModulePromise.then(() => {
            var _a, _b, _c, _d;
            // Check if component is still mounted before trying to append
            // This prevents errors when component unmounts during async module loading
            if (!this.featureContainer.current) {
                // Component was unmounted, abort
                return;
            }
            const container = document && document.createElement('div');
            container.className = 'jimu-widget';
            this.featureContainer.current.appendChild(container);
            const originDS = this.props.dataSource.getOriginDataSources();
            const rootDataSource = (_a = originDS === null || originDS === void 0 ? void 0 : originDS[0]) === null || _a === void 0 ? void 0 : _a.getRootDataSource();
            this.destroyFeature();
            const layer = this.props.graphic.layer;
            if (this.props.popupTemplate) {
                this.props.graphic.popupTemplate = this.props.popupTemplate;
            }
            else if (layer) {
                // set popupTemplate with layer's popupTemplate or defaultPopupTemplate
                this.props.graphic.popupTemplate = (_b = layer.popupTemplate) !== null && _b !== void 0 ? _b : this.props.defaultPopupTemplate;
            }
            else {
                this.props.graphic.popupTemplate = this.props.defaultPopupTemplate;
            }
            if (layer && !layer.popupTemplate) {
                layer.popupTemplate = this.props.popupTemplate || this.props.defaultPopupTemplate;
            }
            this.feature = new this.Feature({
                container: container,
                defaultPopupTemplateEnabled: true,
                // @ts-expect-error
                spatialReference: ((_d = (_c = this.props.dataSource) === null || _c === void 0 ? void 0 : _c.layer) === null || _d === void 0 ? void 0 : _d.spatialReference) || null,
                // @ts-expect-error
                map: (rootDataSource === null || rootDataSource === void 0 ? void 0 : rootDataSource.map) || null,
                graphic: this.props.graphic,
                visibleElements: this.getVisibleElements()
            });
        }).then(() => {
            this.setState({ loadStatus: LoadStatus.Fulfilled });
        });
    }
    render() {
        const { togglable = false, intl } = this.props;
        const { showContent } = this.state;
        return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'feature-info-component d-flex align-items-center p-1', css: style, children: [togglable && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_3__.Button, { "aria-label": intl.formatMessage({ id: showContent ? 'collapse' : 'expand' }), className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-outline-inside flex-shrink-0', { expanded: showContent }), variant: 'text', color: 'inherit', icon: true, size: 'sm', onClick: this.toggleExpanded, css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              min-width: 32px;
              min-height: 32px;
              padding: 6px;
              display: flex;
              align-items: center;
              justify-content: center;
            `, children: showContent ? (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_filled_directional_down__WEBPACK_IMPORTED_MODULE_5__.DownFilled, { size: 'm' }) : (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_filled_directional_right__WEBPACK_IMPORTED_MODULE_4__.RightFilled, { size: 'm', autoFlip: true }) })), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'flex-grow-1', ref: this.featureContainer })] }));
    }
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.injectIntl)(FeatureInfo));


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/geometry-from-draw.tsx":
/*!*********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/geometry-from-draw.tsx ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GeometryFromDraw: () => (/* binding */ GeometryFromDraw)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _interactive_draw_tool__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./interactive-draw-tool */ "./your-extensions/widgets/query-simple/src/runtime/interactive-draw-tool.tsx");
/* harmony import */ var _buffer_input__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./buffer-input */ "./your-extensions/widgets/query-simple/src/runtime/buffer-input.tsx");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _query_task_context__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./query-task-context */ "./your-extensions/widgets/query-simple/src/runtime/query-task-context.tsx");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};

/** @jsx jsx */







function GeometryFromDraw(props) {
    const { onGeometryChange, createToolTypes, mapWidgetIds, enableBuffer, bufferDistance, bufferUnit, onBufferChange, widgetId } = props;
    const [jimuMapView, setJimuMapView] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(jimu_ui__WEBPACK_IMPORTED_MODULE_3__.defaultMessages, _translations_default__WEBPACK_IMPORTED_MODULE_6__["default"]);
    const queryTaskContext = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useContext(_query_task_context__WEBPACK_IMPORTED_MODULE_7__.QueryTaskContext);
    const resetSymbolRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(queryTaskContext.resetSymbol);
    const getLayerFunRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const bufferOperatorRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const geodesicBufferOperatorRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const geometryServiceRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const geometryRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const bufferDistanceRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(bufferDistance);
    const bufferUnitRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(bufferUnit);
    const bufferedGraphicRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        if (enableBuffer) {
            // Parent component query-task-spatial-form will reset buffer parameter when filter type changes,
            // so defer the init buffer option in order not to be override by its parent.
            jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.defer(() => {
                onBufferChange(bufferDistance, bufferUnit);
            });
        }
        (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.loadArcGISJSAPIModules)([
            'esri/Graphic'
        ]).then((modules) => {
            const Graphic = modules[0];
            bufferedGraphicRef.current = new Graphic({
                symbol: {
                    type: 'simple-fill',
                    color: [51, 51, 204, 0.5],
                    style: 'solid',
                    outline: {
                        color: [51, 51, 204, 0.8],
                        width: 1
                    }
                }
            });
        });
    });
    const applyBufferEffect = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => __awaiter(this, void 0, void 0, function* () {
        var _a, _b, _c, _d, _e, _f;
        if (!geometryRef.current || !enableBuffer || bufferDistanceRef.current === 0) {
            bufferedGraphicRef.current.geometry = null;
            return;
        }
        // If the end user uses a point or line query geometry, then the negative buffer will not work (same effect as there is no buffer)
        const isPointNegativeBuffer = (((_a = geometryRef.current) === null || _a === void 0 ? void 0 : _a.type) === 'point' || ((_b = geometryRef.current) === null || _b === void 0 ? void 0 : _b.type) === 'multipoint') && bufferDistanceRef.current < 0;
        const isLineNegativeBuffer = ((_c = geometryRef.current) === null || _c === void 0 ? void 0 : _c.type) === 'polyline' && bufferDistanceRef.current < 0;
        if (isPointNegativeBuffer || isLineNegativeBuffer) {
            bufferedGraphicRef.current.geometry = null;
            return;
        }
        const geometry = geometryRef.current;
        // https://developers.arcgis.com/javascript/latest/api-reference/esri-geometry-geometryEngine.html#buffer
        if (((_d = geometry.spatialReference) === null || _d === void 0 ? void 0 : _d.isGeographic) && !geometry.spatialReference.isWGS84) {
            const serviceUrl = jimu_core__WEBPACK_IMPORTED_MODULE_1__.utils.getGeometryService();
            if (!geometryServiceRef.current) {
                const modules = yield (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.loadArcGISJSAPIModules)([
                    'esri/rest/geometryService',
                    'esri/rest/support/BufferParameters'
                ]);
                geometryServiceRef.current = {
                    geometryService: modules[0],
                    bufferParameters: modules[1]
                };
            }
            const { geometryService, bufferParameters: BufferParameters } = geometryServiceRef.current;
            const polygons = yield geometryService.buffer(serviceUrl, new BufferParameters({
                distances: [bufferDistanceRef.current],
                unit: jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.kebabCase(bufferUnitRef.current),
                geodesic: true,
                bufferSpatialReference: geometry.spatialReference,
                outSpatialReference: geometry.spatialReference,
                geometries: [geometry]
            }));
            bufferedGraphicRef.current.geometry = polygons[0];
        }
        else {
            if (((_e = geometry.spatialReference) === null || _e === void 0 ? void 0 : _e.isWGS84) || ((_f = geometry.spatialReference) === null || _f === void 0 ? void 0 : _f.isWebMercator)) {
                if (!geodesicBufferOperatorRef.current) {
                    geodesicBufferOperatorRef.current = yield (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.loadArcGISJSAPIModule)('esri/geometry/operators/geodesicBufferOperator');
                }
                if (!geodesicBufferOperatorRef.current.isLoaded()) {
                    yield geodesicBufferOperatorRef.current.load();
                }
                bufferedGraphicRef.current.geometry = geodesicBufferOperatorRef.current.execute(geometry, bufferDistanceRef.current, {
                    unit: jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.kebabCase(bufferUnitRef.current)
                });
            }
            else {
                if (!bufferOperatorRef.current) {
                    bufferOperatorRef.current = yield (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.loadArcGISJSAPIModule)('esri/geometry/operators/bufferOperator');
                }
                bufferedGraphicRef.current.geometry = bufferOperatorRef.current.execute(geometry, bufferDistanceRef.current, {
                    unit: jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.kebabCase(bufferUnitRef.current)
                });
            }
        }
    }), [enableBuffer]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (queryTaskContext.resetSymbol && queryTaskContext.resetSymbol !== resetSymbolRef.current) {
            resetSymbolRef.current = queryTaskContext.resetSymbol;
            getLayerFunRef.current && getLayerFunRef.current().removeAll();
            onGeometryChange(null);
        }
    }, [queryTaskContext.resetSymbol, onGeometryChange]);
    const handleJimuMapViewChanged = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((jimuMapView) => {
        // clear drawing graphics before switching map view
        const layer = getLayerFunRef.current && getLayerFunRef.current();
        if (layer) {
            layer.removeAll();
            onGeometryChange(null);
        }
        setJimuMapView((jimuMapView === null || jimuMapView === void 0 ? void 0 : jimuMapView.view) != null ? jimuMapView : null);
    }, [onGeometryChange]);
    const handleBufferChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((distance, unit) => {
        bufferDistanceRef.current = distance;
        bufferUnitRef.current = unit;
        applyBufferEffect();
        onBufferChange(distance, unit);
    }, [onBufferChange, applyBufferEffect]);
    const handleDrawEnd = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((graphic, getLayerFun, clearAfterApply) => {
        getLayerFunRef.current = getLayerFun;
        const layer = getLayerFunRef.current && getLayerFunRef.current();
        // it's possible that the geometry is the same as the previous one, only the clearAfterApply is changed.
        if (geometryRef.current !== (graphic === null || graphic === void 0 ? void 0 : graphic.geometry)) {
            geometryRef.current = graphic === null || graphic === void 0 ? void 0 : graphic.geometry;
            applyBufferEffect().then(() => {
                if (bufferedGraphicRef.current.geometry) {
                    layer === null || layer === void 0 ? void 0 : layer.add(bufferedGraphicRef.current);
                }
            });
        }
        onGeometryChange(graphic === null || graphic === void 0 ? void 0 : graphic.geometry, layer, graphic, clearAfterApply);
    }, [onGeometryChange, applyBufferEffect]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [mapWidgetIds === null || mapWidgetIds === void 0 ? void 0 : mapWidgetIds.map((mapWidgetId, x) => ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.JimuMapViewComponent, { useMapWidgetId: mapWidgetId, onActiveViewChange: handleJimuMapViewChanged }, x))), (jimuMapView === null || jimuMapView === void 0 ? void 0 : jimuMapView.view) && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_interactive_draw_tool__WEBPACK_IMPORTED_MODULE_4__.InteractiveDraw, { jimuMapView: jimuMapView, widgetId: widgetId, toolTypes: createToolTypes, onDrawEnd: handleDrawEnd }), enableBuffer && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { role: 'group', className: 'title3', "aria-label": getI18nMessage('theBufferDistance'), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `margin-top: 0.75rem;`, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'text-truncate', children: getI18nMessage('theBufferDistance') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'd-flex mt-1', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_buffer_input__WEBPACK_IMPORTED_MODULE_5__.BufferInput, { distance: bufferDistance, unit: bufferUnit, onBufferChange: handleBufferChange }) })] }))] }))] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/geometry-from-ds.tsx":
/*!*******************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/geometry-from-ds.tsx ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GeometryFromDataSource: () => (/* binding */ GeometryFromDataSource)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _buffer_input__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./buffer-input */ "./your-extensions/widgets/query-simple/src/runtime/buffer-input.tsx");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _query_task_context__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./query-task-context */ "./your-extensions/widgets/query-simple/src/runtime/query-task-context.tsx");

/** @jsx jsx */






const marginStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `margin-top: 0.75rem;`;
function getRuntimeDataSource() {
    const result = {};
    let notEmpty = false;
    const dsMap = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().getDataSources();
    Object.keys(dsMap).forEach(dsId => {
        const ds = dsMap[dsId];
        // only include the ds that has geometry
        if (ds.getGeometryType() != null && !ds.isInAppConfig() && ds.getMainDataSource().id === dsId && !ds.getDataSourceJson().isOutputFromWidget) {
            result[dsId] = ds;
            notEmpty = true;
        }
    });
    return notEmpty ? result : null;
}
function GeometryFromDataSource(props) {
    var _a;
    const { onSelectionChange, useDataSources = [], useRuntimeData, spatialRelations, enableBuffer, bufferDistance, bufferUnit, onBufferChange, onRelationChange } = props;
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.defaultMessages, _translations_default__WEBPACK_IMPORTED_MODULE_5__["default"]);
    const [currentDataSource, setCurrentDataSource] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(useDataSources[0]);
    const [runtimeDataSource, setRuntimeDataSource] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState();
    const [count, setCount] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(0);
    const [currentRelation, setCurrentRelation] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(spatialRelations === null || spatialRelations === void 0 ? void 0 : spatialRelations[0]);
    const queryTaskContext = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useContext(_query_task_context__WEBPACK_IMPORTED_MODULE_6__.QueryTaskContext);
    const resetSymbolRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(queryTaskContext.resetSymbol);
    const translate = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation();
    const spatialRelationOptions = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return Object.entries(_config__WEBPACK_IMPORTED_MODULE_3__.SpatialRelation).map(([key, value]) => ({
            value,
            label: getI18nMessage(`spatialRelation_${key}`)
        }));
    }, [getI18nMessage]);
    const loadedUseDataSources = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const loaded = [];
        useDataSources.forEach((item) => {
            var _a, _b;
            if (((_b = (_a = state.dataSourcesInfo) === null || _a === void 0 ? void 0 : _a[item.mainDataSourceId]) === null || _b === void 0 ? void 0 : _b.instanceStatus) === jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.Created) {
                loaded.push(item.dataSourceId);
            }
        });
        if (loaded.length > 0) {
            return loaded.join(',');
        }
        return '';
    });
    const numOfDs = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        var _a;
        if (!useRuntimeData) {
            return 0;
        }
        return Object.keys((_a = state.dataSourcesInfo) !== null && _a !== void 0 ? _a : {}).filter(dsId => state.dataSourcesInfo[dsId].instanceStatus === jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.Created).length;
    });
    const runtimeDataSources = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        if (numOfDs > 0) {
            return getRuntimeDataSource();
        }
    }, [numOfDs]);
    const numOfRuntimeDs = Object.keys(runtimeDataSources !== null && runtimeDataSources !== void 0 ? runtimeDataSources : {}).length;
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        if ((spatialRelations === null || spatialRelations === void 0 ? void 0 : spatialRelations.length) > 0) {
            onRelationChange(spatialRelations[0]);
        }
        if (enableBuffer) {
            onBufferChange(bufferDistance, bufferUnit);
        }
    });
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (queryTaskContext.resetSymbol && queryTaskContext.resetSymbol !== resetSymbolRef.current) {
            resetSymbolRef.current = queryTaskContext.resetSymbol;
            setCurrentRelation(spatialRelations === null || spatialRelations === void 0 ? void 0 : spatialRelations[0]);
            onRelationChange(spatialRelations === null || spatialRelations === void 0 ? void 0 : spatialRelations[0]);
        }
    }, [queryTaskContext.resetSymbol, onRelationChange, spatialRelations]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (!spatialRelations) {
            setCurrentRelation(null);
        }
        else if (!spatialRelations.includes(currentRelation)) {
            setCurrentRelation(spatialRelations[0]);
            onRelationChange(spatialRelations[0]);
        }
    }, [spatialRelations, currentRelation, onRelationChange]);
    const handleDataSourceChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((dsId) => {
        const ds = useDataSources.find((item) => item.dataSourceId === dsId);
        setCurrentDataSource((0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)(ds));
        setRuntimeDataSource(null);
    }, [useDataSources]);
    const handleRuntimeDataSourceChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((dsId) => {
        const ds = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().getDataSource(dsId);
        setRuntimeDataSource(ds);
        setCurrentDataSource(null);
    }, []);
    const handleDataSourceInfoChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        var _a;
        const ds = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().getDataSource((_a = currentDataSource === null || currentDataSource === void 0 ? void 0 : currentDataSource.dataSourceId) !== null && _a !== void 0 ? _a : runtimeDataSource === null || runtimeDataSource === void 0 ? void 0 : runtimeDataSource.id);
        const records = ds === null || ds === void 0 ? void 0 : ds.getSelectedRecords();
        if ((records === null || records === void 0 ? void 0 : records.length) > 0) {
            const geometries = records.map((record) => record.getJSAPIGeometry());
            onSelectionChange(geometries);
            setCount(records.length);
        }
        else {
            onSelectionChange(null);
            setCount(0);
        }
    }, [currentDataSource === null || currentDataSource === void 0 ? void 0 : currentDataSource.dataSourceId, runtimeDataSource === null || runtimeDataSource === void 0 ? void 0 : runtimeDataSource.id, onSelectionChange]);
    const getLabelOfSpatialRelation = (relation) => {
        return spatialRelationOptions.find(item => item.value === relation).label;
    };
    const handleSpatialRelationChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(e => {
        setCurrentRelation(e.target.value);
        onRelationChange(e.target.value);
    }, [onRelationChange]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: marginStyle, className: 'title3', children: getI18nMessage('chooseFilterLayer') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Select, { "aria-label": getI18nMessage('chooseFilterLayer'), value: (_a = currentDataSource === null || currentDataSource === void 0 ? void 0 : currentDataSource.dataSourceId) !== null && _a !== void 0 ? _a : runtimeDataSource === null || runtimeDataSource === void 0 ? void 0 : runtimeDataSource.id, children: [numOfRuntimeDs > 0 && useDataSources.length > 0 && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Option, { header: true, children: getI18nMessage('preconfigured') }), useDataSources.map((item) => {
                        const ds = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().getDataSource(item.dataSourceId);
                        if (loadedUseDataSources.includes(item.dataSourceId) || (ds === null || ds === void 0 ? void 0 : ds.getLabel())) {
                            return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Option, { value: item.dataSourceId, onClick: () => { handleDataSourceChange(item.dataSourceId); }, children: ds === null || ds === void 0 ? void 0 : ds.getLabel() }, item.dataSourceId));
                        }
                        return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Option, { children: translate('loading') }, item.dataSourceId));
                    }), numOfRuntimeDs > 0 && useDataSources.length > 0 && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Option, { divider: true }), numOfRuntimeDs > 0 && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Option, { header: true, children: getI18nMessage('runtime') }), Object.keys(runtimeDataSources !== null && runtimeDataSources !== void 0 ? runtimeDataSources : {}).map(dsId => {
                        const ds = runtimeDataSources[dsId];
                        return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Option, { value: dsId, onClick: () => { handleRuntimeDataSourceChange(dsId); }, children: ds.getLabel() }, dsId));
                    })] }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'mt-1 font-italic', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `color: var(--sys-color-surface-paper-hint);`, children: getI18nMessage('selectedRecords', { num: count }) }), (spatialRelations === null || spatialRelations === void 0 ? void 0 : spatialRelations.length) > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: marginStyle, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'text-truncate title3 mb-0', children: getI18nMessage('relationship') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Select, { "aria-label": getI18nMessage('relationship'), value: currentRelation, onChange: handleSpatialRelationChange, children: spatialRelations.map((item) => {
                            return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: item, children: getLabelOfSpatialRelation(item) }, item));
                        }) })] })), enableBuffer && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { role: 'group', "aria-label": getI18nMessage('theBufferDistance'), css: marginStyle, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'title3 text-truncate', children: getI18nMessage('theBufferDistance') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'd-flex mt-1', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_buffer_input__WEBPACK_IMPORTED_MODULE_4__.BufferInput, { distance: bufferDistance, unit: bufferUnit, onBufferChange: onBufferChange }) })] })), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceComponent, { useDataSource: currentDataSource, dataSource: runtimeDataSource, onDataSourceInfoChange: handleDataSourceInfoChange }), useDataSources.map((item) => {
                // make sure the datasource is created
                return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceComponent, { useDataSource: item }, item.dataSourceId));
            })] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/geometry-from-map.tsx":
/*!********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/geometry-from-map.tsx ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GeometryFromMap: () => (/* binding */ GeometryFromMap)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");

/** @jsx jsx */


function GeometryFromMap(props) {
    const { onGeometryChange, mapWidgetIds } = props;
    const [jimuMapView, setJimuMapView] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const PolygonRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (jimuMapView === null || jimuMapView === void 0 ? void 0 : jimuMapView.view) {
            let handler;
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.loadArcGISJSAPIModule)('esri/core/reactiveUtils').then((reactiveUtils) => {
                handler = reactiveUtils.watch(() => jimuMapView.view.extent, (extent) => {
                    if (PolygonRef.current) {
                        onGeometryChange(PolygonRef.current.fromExtent(extent));
                    }
                    else {
                        (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.loadArcGISJSAPIModules)(['esri/geometry/Polygon']).then(modules => {
                            PolygonRef.current = modules[0];
                            onGeometryChange(PolygonRef.current.fromExtent(extent));
                        });
                    }
                });
                // set initial extent
                onGeometryChange(jimuMapView.view.extent);
            });
            return () => {
                if (handler) {
                    handler.remove();
                }
            };
        }
    }, [jimuMapView, onGeometryChange]);
    const handleJimuMapViewChanged = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((jimuMapView) => {
        setJimuMapView((jimuMapView === null || jimuMapView === void 0 ? void 0 : jimuMapView.view) != null ? jimuMapView : null);
    }, []);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: mapWidgetIds === null || mapWidgetIds === void 0 ? void 0 : mapWidgetIds.map((mapWidgetId, x) => ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.JimuMapViewComponent, { useMapWidgetId: mapWidgetId, onActiveViewChange: handleJimuMapViewChanged }, x))) }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/graphics-layer-utils.ts":
/*!**********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/graphics-layer-utils.ts ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   addHighlightGraphics: () => (/* binding */ addHighlightGraphics),
/* harmony export */   cleanupGraphicsLayer: () => (/* binding */ cleanupGraphicsLayer),
/* harmony export */   clearGraphicsLayer: () => (/* binding */ clearGraphicsLayer),
/* harmony export */   createOrGetGraphicsLayer: () => (/* binding */ createOrGetGraphicsLayer),
/* harmony export */   getMapViewFromDataSource: () => (/* binding */ getMapViewFromDataSource),
/* harmony export */   removeHighlightGraphics: () => (/* binding */ removeHighlightGraphics)
/* harmony export */ });
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/**
 * Utility functions for managing graphics layer highlighting in QuerySimple widget.
 * Provides highlighting that works independently of layer visibility.
 */
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};


const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__.createQuerySimpleDebugLogger)();
// Global sequence counter for graphics operations to track timing across calls
let operationSequence = 0;
/**
 * Gets the map view from a data source's origin layer.
 * Accesses the view through the FeatureLayer's view property.
 * @param outputDS - The output data source (or any data source)
 * @returns Promise resolving to MapView or SceneView, or null if not available
 */
function getMapViewFromDataSource(outputDS) {
    return __awaiter(this, void 0, void 0, function* () {
        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s;
        const seq = ++operationSequence;
        if (!outputDS) {
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'getMapViewFromDataSource-no-outputDS',
                seq,
                timestamp: Date.now()
            });
            return null;
        }
        try {
            // Get origin data source to access the layer
            const originDataSources = outputDS.getOriginDataSources();
            const originDS = originDataSources === null || originDataSources === void 0 ? void 0 : originDataSources[0];
            if (!originDS) {
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'getMapViewFromDataSource-no-originDS',
                    outputDSId: outputDS.id,
                    timestamp: Date.now()
                });
                return null;
            }
            // Access the FeatureLayer from the data source
            const layer = originDS.layer || ((_b = (_a = originDS).getLayer) === null || _b === void 0 ? void 0 : _b.call(_a));
            if (!layer) {
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'getMapViewFromDataSource-no-layer',
                    originDSId: originDS.id,
                    timestamp: Date.now()
                });
                return null;
            }
            // Log layer properties to understand structure
            const layerKeys = Object.keys(layer).filter(key => !key.startsWith('_') &&
                typeof layer[key] !== 'function').slice(0, 20); // Limit to first 20 properties
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'getMapViewFromDataSource-layer-inspection',
                originDSId: originDS.id,
                layerId: layer.id,
                layerType: layer.type || 'unknown',
                layerKeys: layerKeys,
                hasLayerMap: !!layer.map,
                hasLayerView: !!layer.view,
                hasLayerParent: !!layer.parent,
                layerMapType: layer.map ? typeof layer.map : 'none',
                timestamp: Date.now()
            });
            // Check layer.parent for map/view access (since hasLayerParent is true)
            const parent = layer.parent;
            if (parent) {
                // Log parent properties
                const parentKeys = Object.keys(parent).filter(key => !key.startsWith('_') &&
                    typeof parent[key] !== 'function').slice(0, 20);
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'getMapViewFromDataSource-layer-parent-inspection',
                    originDSId: originDS.id,
                    layerId: layer.id,
                    parentType: parent.type || 'unknown',
                    parentKeys: parentKeys,
                    hasParentMap: !!parent.map,
                    hasParentView: !!parent.view,
                    hasParentViews: !!parent.views,
                    parentViewsLength: ((_c = parent.views) === null || _c === void 0 ? void 0 : _c.length) || 0,
                    hasParentExtent: !!parent.extent,
                    timestamp: Date.now()
                });
                // Try to get view from parent
                if (parent.view) {
                    const view = parent.view;
                    debugLogger.log('GRAPHICS-LAYER', {
                        event: 'getMapViewFromDataSource-success-via-layer-parent-view',
                        originDSId: originDS.id,
                        layerId: layer.id,
                        viewType: view.type || 'unknown',
                        timestamp: Date.now()
                    });
                    return view;
                }
                // Try to get map from parent and then view
                const parentMap = parent.map;
                if (parentMap) {
                    const view = parentMap.view ||
                        ((_e = (_d = parentMap.views) === null || _d === void 0 ? void 0 : _d.getItemAt) === null || _e === void 0 ? void 0 : _e.call(_d, 0)) ||
                        (((_f = parentMap.views) === null || _f === void 0 ? void 0 : _f.length) > 0 ? parentMap.views[0] : null);
                    if (view) {
                        debugLogger.log('GRAPHICS-LAYER', {
                            event: 'getMapViewFromDataSource-success-via-layer-parent-map',
                            originDSId: originDS.id,
                            layerId: layer.id,
                            viewType: view.type || 'unknown',
                            timestamp: Date.now()
                        });
                        return view;
                    }
                }
                // Parent might BE the view (check if it has view-like properties)
                if (parent.type === 'map' || parent.type === 'scene' || parent.extent) {
                    debugLogger.log('GRAPHICS-LAYER', {
                        event: 'getMapViewFromDataSource-success-via-layer-parent-is-view',
                        originDSId: originDS.id,
                        layerId: layer.id,
                        viewType: parent.type || 'unknown',
                        timestamp: Date.now()
                    });
                    return parent;
                }
            }
            // Try multiple approaches to get the view:
            // 1. Layer might have a direct view property
            if (layer.view) {
                const view = layer.view;
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'getMapViewFromDataSource-success-via-layer-view',
                    originDSId: originDS.id,
                    layerId: layer.id,
                    viewType: view.type || 'unknown',
                    timestamp: Date.now()
                });
                return view;
            }
            // 2. Try to get map from layer and then view from map
            const map = layer.map ||
                ((_g = layer.parent) === null || _g === void 0 ? void 0 : _g.map) ||
                layer.__map ||
                layer._map;
            if (map) {
                // Log map properties
                const mapKeys = Object.keys(map).filter(key => !key.startsWith('_') &&
                    typeof map[key] !== 'function').slice(0, 20);
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'getMapViewFromDataSource-map-found',
                    originDSId: originDS.id,
                    layerId: layer.id,
                    mapId: map.id || 'unknown',
                    mapKeys: mapKeys,
                    hasMapView: !!map.view,
                    hasMapViews: !!(map.views),
                    mapViewsLength: ((_h = map.views) === null || _h === void 0 ? void 0 : _h.length) || 0,
                    timestamp: Date.now()
                });
                const view = map.view ||
                    ((_k = (_j = map.views) === null || _j === void 0 ? void 0 : _j.getItemAt) === null || _k === void 0 ? void 0 : _k.call(_j, 0)) ||
                    (((_l = map.views) === null || _l === void 0 ? void 0 : _l.length) > 0 ? map.views[0] : null) ||
                    (map.views && map.views.length > 0 ? map.views.getItemAt(0) : null);
                if (view) {
                    debugLogger.log('GRAPHICS-LAYER', {
                        event: 'getMapViewFromDataSource-success-via-layer-map',
                        originDSId: originDS.id,
                        layerId: layer.id,
                        viewType: view.type || 'unknown',
                        timestamp: Date.now()
                    });
                    return view;
                }
            }
            // 3. Try to get root data source and access map from there
            const rootDS = originDS.getRootDataSource();
            if (rootDS) {
                const rootMap = ((_o = (_m = rootDS).getMap) === null || _o === void 0 ? void 0 : _o.call(_m)) ||
                    rootDS.map ||
                    rootDS.__map ||
                    rootDS._map;
                if (rootMap) {
                    // Log root map properties
                    const rootMapKeys = Object.keys(rootMap).filter(key => !key.startsWith('_') &&
                        typeof rootMap[key] !== 'function').slice(0, 20);
                    debugLogger.log('GRAPHICS-LAYER', {
                        event: 'getMapViewFromDataSource-root-map-found',
                        originDSId: originDS.id,
                        rootDSId: rootDS.id,
                        rootDSType: rootDS.type,
                        rootMapId: rootMap.id || 'unknown',
                        rootMapKeys: rootMapKeys,
                        hasRootMapView: !!rootMap.view,
                        hasRootMapViews: !!(rootMap.views),
                        rootMapViewsLength: ((_p = rootMap.views) === null || _p === void 0 ? void 0 : _p.length) || 0,
                        timestamp: Date.now()
                    });
                    const view = rootMap.view ||
                        ((_r = (_q = rootMap.views) === null || _q === void 0 ? void 0 : _q.getItemAt) === null || _r === void 0 ? void 0 : _r.call(_q, 0)) ||
                        (((_s = rootMap.views) === null || _s === void 0 ? void 0 : _s.length) > 0 ? rootMap.views[0] : null) ||
                        (rootMap.views && rootMap.views.length > 0 ? rootMap.views.getItemAt(0) : null);
                    if (view) {
                        debugLogger.log('GRAPHICS-LAYER', {
                            event: 'getMapViewFromDataSource-success-via-rootDS',
                            originDSId: originDS.id,
                            rootDSId: rootDS.id,
                            viewType: view.type || 'unknown',
                            timestamp: Date.now()
                        });
                        return view;
                    }
                }
                else {
                    // Log root DS properties to see what's available
                    const rootDSKeys = Object.keys(rootDS).filter(key => !key.startsWith('_') &&
                        typeof rootDS[key] !== 'function').slice(0, 20);
                    debugLogger.log('GRAPHICS-LAYER', {
                        event: 'getMapViewFromDataSource-root-ds-inspection',
                        originDSId: originDS.id,
                        rootDSId: rootDS.id,
                        rootDSType: rootDS.type,
                        rootDSKeys: rootDSKeys,
                        hasGetMap: typeof rootDS.getMap === 'function',
                        hasMap: !!rootDS.map,
                        timestamp: Date.now()
                    });
                }
            }
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'getMapViewFromDataSource-no-view',
                originDSId: originDS.id,
                layerId: layer.id,
                hasLayerMap: !!map,
                hasRootDS: !!rootDS,
                timestamp: Date.now()
            });
            return null;
        }
        catch (error) {
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'getMapViewFromDataSource-error',
                error: error instanceof Error ? error.message : String(error),
                errorStack: error instanceof Error ? error.stack : undefined,
                timestamp: Date.now()
            });
            return null;
        }
    });
}
/**
 * Gets the default highlight symbol based on geometry type.
 * Uses the map's actual highlight color from highlightOptions to match standard selection appearance.
 */
function getDefaultHighlightSymbol(geometryType, mapView) {
    // Get default highlight color from view's highlightOptions
    const highlightOptions = (mapView.highlightOptions || {});
    // Extract color - could be array [R,G,B,A] or Color object
    let highlightColor = null;
    if (highlightOptions.color) {
        // If it's a Color object, convert to array
        if (typeof highlightOptions.color === 'object' && 'toRgba' in highlightOptions.color) {
            highlightColor = highlightOptions.color.toRgba();
        }
        // If it's already an array
        else if (Array.isArray(highlightOptions.color)) {
            highlightColor = highlightOptions.color;
        }
    }
    // If no color in highlightOptions, use the ArcGIS documented default: cyan [0, 255, 255]
    if (!highlightColor) {
        highlightColor = [0, 255, 255, 1.0]; // Full opacity default
    }
    // Ensure we have 4 elements [R, G, B, A]
    const baseColor = highlightColor.slice(0, 3);
    const baseAlpha = highlightColor.length >= 4 ? highlightColor[3] : 1.0;
    // Get fill opacity from highlightOptions or use default
    const fillOpacity = highlightOptions.fillOpacity !== undefined
        ? highlightOptions.fillOpacity
        : 0.25; // Default 25% opacity for fill
    const fillColor = [...baseColor, fillOpacity];
    // Get halo opacity or use default - for outlines and lines
    const haloOpacity = highlightOptions.haloOpacity !== undefined
        ? highlightOptions.haloOpacity
        : baseAlpha; // Use the color's alpha if available, otherwise 1.0
    const outlineColor = [...baseColor, haloOpacity];
    // For lines, use full opacity to ensure visibility
    const lineOpacity = highlightOptions.haloOpacity !== undefined
        ? Math.max(highlightOptions.haloOpacity, 0.8) // At least 80% opacity
        : baseAlpha; // Use the color's alpha, or default to 1.0
    const lineColor = [...baseColor, lineOpacity];
    switch (geometryType) {
        case 'point':
        case 'multipoint':
            return {
                type: 'simple-marker',
                color: outlineColor,
                outline: {
                    color: outlineColor,
                    width: 2
                },
                size: 12
            };
        case 'polyline':
            return {
                type: 'simple-line',
                color: lineColor, // Use lineColor with proper opacity
                width: 4 // Increased width for visibility
            };
        case 'polygon':
        case 'multipolygon':
            return {
                type: 'simple-fill',
                color: fillColor,
                outline: {
                    color: outlineColor,
                    width: 2
                }
            };
        default:
            // Fallback to polygon symbol
            return {
                type: 'simple-fill',
                color: fillColor,
                outline: {
                    color: outlineColor,
                    width: 2
                }
            };
    }
}
/**
 * Creates or gets an existing graphics layer for the widget.
 * Uses a unique ID based on widget ID to ensure one layer per widget.
 */
function createOrGetGraphicsLayer(widgetId, mapView) {
    return __awaiter(this, void 0, void 0, function* () {
        const seq = ++operationSequence;
        const layerId = `querysimple-highlight-${widgetId}`;
        try {
            // Check if layer already exists
            const existingLayer = mapView.map.layers.find(layer => layer.id === layerId);
            if (existingLayer) {
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'createOrGetGraphicsLayer-found-existing',
                    seq,
                    widgetId,
                    layerId,
                    timestamp: Date.now()
                });
                return existingLayer;
            }
            // Load GraphicsLayer module
            const [GraphicsLayer] = yield (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_0__.loadArcGISJSAPIModules)(['esri/layers/GraphicsLayer']);
            // Create new graphics layer
            const graphicsLayer = new GraphicsLayer({
                id: layerId,
                title: `QuerySimple Highlights (${widgetId})`,
                listMode: 'hide', // Hide from layer list
                visible: true
            });
            // Add to map
            mapView.map.add(graphicsLayer);
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'createOrGetGraphicsLayer-created',
                seq,
                widgetId,
                layerId,
                timestamp: Date.now()
            });
            return graphicsLayer;
        }
        catch (error) {
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'createOrGetGraphicsLayer-error',
                seq,
                widgetId,
                layerId,
                error: error instanceof Error ? error.message : String(error),
                errorStack: error instanceof Error ? error.stack : undefined,
                timestamp: Date.now()
            });
            return null;
        }
    });
}
/**
 * Adds highlight graphics to the graphics layer using default map highlight color.
 * Note: This function should be called after GraphicsLayer module is loaded.
 */
function addHighlightGraphics(graphicsLayer, records, mapView) {
    return __awaiter(this, void 0, void 0, function* () {
        const seq = ++operationSequence;
        if (!graphicsLayer || !records || records.length === 0) {
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'addHighlightGraphics-skipped',
                seq,
                reason: !graphicsLayer ? 'no-graphics-layer' : 'no-records',
                recordsCount: (records === null || records === void 0 ? void 0 : records.length) || 0,
                timestamp: Date.now()
            });
            return;
        }
        // Log existing state BEFORE adding - verify assumption about duplicates
        const existingGraphicsCount = graphicsLayer.graphics.length;
        const existingRecordIds = [];
        const existingRecordIdSet = new Set();
        graphicsLayer.graphics.forEach(graphic => {
            var _a;
            const recordId = (_a = graphic.attributes) === null || _a === void 0 ? void 0 : _a.recordId;
            if (recordId) {
                existingRecordIds.push(recordId);
                existingRecordIdSet.add(recordId);
            }
        });
        // Log what we're trying to add
        const incomingRecordIds = records.map(r => r.getId());
        debugLogger.log('GRAPHICS-LAYER', {
            event: 'addHighlightGraphics-before-add',
            seq,
            graphicsLayerId: graphicsLayer.id,
            existingGraphicsCount,
            existingRecordIds: existingRecordIds.slice(0, 20), // Limit to first 20 for readability
            existingRecordIdsCount: existingRecordIds.length,
            incomingRecordIds: incomingRecordIds.slice(0, 20), // Limit to first 20
            incomingRecordIdsCount: incomingRecordIds.length,
            duplicateRecordIds: incomingRecordIds.filter(id => existingRecordIdSet.has(id)).slice(0, 20),
            duplicateCount: incomingRecordIds.filter(id => existingRecordIdSet.has(id)).length,
            timestamp: Date.now()
        });
        // Load Graphic module
        const [Graphic] = yield (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_0__.loadArcGISJSAPIModules)(['esri/Graphic']);
        let addedCount = 0;
        let skippedCount = 0;
        let duplicateCount = 0;
        const addedRecordIds = [];
        const skippedRecordIds = [];
        const duplicateRecordIds = [];
        records.forEach(record => {
            try {
                const recordId = record.getId();
                // Check if this record ID already exists in graphics layer
                if (existingRecordIdSet.has(recordId)) {
                    duplicateCount++;
                    duplicateRecordIds.push(recordId);
                    debugLogger.log('GRAPHICS-LAYER', {
                        event: 'addHighlightGraphics-duplicate-detected',
                        seq,
                        recordId,
                        graphicsLayerId: graphicsLayer.id,
                        timestamp: Date.now()
                    });
                    return; // Skip adding duplicate
                }
                const graphic = record.feature;
                if (!graphic || !graphic.geometry) {
                    skippedCount++;
                    skippedRecordIds.push(recordId);
                    return;
                }
                // Get geometry type from graphic
                const geometryType = graphic.geometry.type;
                // Create symbol using default highlight color
                const symbol = getDefaultHighlightSymbol(geometryType, mapView);
                // Create new graphic with highlight symbol
                const highlightGraphic = new Graphic({
                    geometry: graphic.geometry,
                    symbol: symbol,
                    attributes: {
                        recordId: recordId,
                        source: 'querysimple-highlight',
                        widgetId: graphicsLayer.id.replace('querysimple-highlight-', '')
                    }
                });
                graphicsLayer.add(highlightGraphic);
                addedCount++;
                addedRecordIds.push(recordId);
                // Add to tracking set to prevent duplicates within this batch
                existingRecordIdSet.add(recordId);
            }
            catch (error) {
                skippedCount++;
                skippedRecordIds.push(record.getId());
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'addHighlightGraphics-record-error',
                    seq,
                    recordId: record.getId(),
                    error: error instanceof Error ? error.message : String(error),
                    timestamp: Date.now()
                });
            }
        });
        // Log final state AFTER adding
        const finalGraphicsCount = graphicsLayer.graphics.length;
        const finalRecordIds = [];
        graphicsLayer.graphics.forEach(graphic => {
            var _a;
            const recordId = (_a = graphic.attributes) === null || _a === void 0 ? void 0 : _a.recordId;
            if (recordId) {
                finalRecordIds.push(recordId);
            }
        });
        debugLogger.log('GRAPHICS-LAYER', {
            event: 'addHighlightGraphics-complete',
            seq,
            graphicsLayerId: graphicsLayer.id,
            recordsCount: records.length,
            addedCount,
            skippedCount,
            duplicateCount,
            addedRecordIds: addedRecordIds.slice(0, 20), // Limit to first 20
            skippedRecordIds: skippedRecordIds.slice(0, 20),
            duplicateRecordIds: duplicateRecordIds.slice(0, 20),
            existingGraphicsCount,
            finalGraphicsCount,
            expectedFinalCount: existingGraphicsCount + addedCount,
            finalRecordIds: finalRecordIds.slice(0, 20), // Limit to first 20
            finalRecordIdsCount: finalRecordIds.length,
            timestamp: Date.now()
        });
    });
}
/**
 * Removes highlight graphics from the graphics layer by record IDs.
 */
function removeHighlightGraphics(graphicsLayer, recordIds) {
    const seq = ++operationSequence;
    if (!graphicsLayer || !recordIds || recordIds.length === 0) {
        debugLogger.log('GRAPHICS-LAYER', {
            event: 'removeHighlightGraphics-skipped',
            seq,
            reason: !graphicsLayer ? 'no-graphics-layer' : 'no-record-ids',
            recordIdsCount: (recordIds === null || recordIds === void 0 ? void 0 : recordIds.length) || 0,
            timestamp: Date.now()
        });
        return;
    }
    const recordIdSet = new Set(recordIds);
    let removedCount = 0;
    // Find and remove graphics matching record IDs
    const graphicsToRemove = [];
    graphicsLayer.graphics.forEach(graphic => {
        var _a;
        const recordId = (_a = graphic.attributes) === null || _a === void 0 ? void 0 : _a.recordId;
        if (recordId && recordIdSet.has(recordId)) {
            graphicsToRemove.push(graphic);
        }
    });
    graphicsToRemove.forEach(graphic => {
        graphicsLayer.remove(graphic);
        removedCount++;
    });
    debugLogger.log('GRAPHICS-LAYER', {
        event: 'removeHighlightGraphics-complete',
        seq,
        graphicsLayerId: graphicsLayer.id,
        recordIdsCount: recordIds.length,
        removedCount,
        timestamp: Date.now()
    });
}
/**
 * Clears all highlight graphics from the graphics layer.
 */
function clearGraphicsLayer(graphicsLayer) {
    const seq = ++operationSequence;
    if (!graphicsLayer) {
        debugLogger.log('GRAPHICS-LAYER', {
            event: 'clearGraphicsLayer-skipped',
            seq,
            reason: 'no-graphics-layer',
            timestamp: Date.now()
        });
        return;
    }
    const graphicsCount = graphicsLayer.graphics.length;
    graphicsLayer.removeAll();
    debugLogger.log('GRAPHICS-LAYER', {
        event: 'clearGraphicsLayer-complete',
        seq,
        graphicsLayerId: graphicsLayer.id,
        graphicsRemoved: graphicsCount,
        timestamp: Date.now()
    });
}
/**
 * Removes the graphics layer from the map and cleans up references.
 */
function cleanupGraphicsLayer(widgetId, mapView) {
    const seq = ++operationSequence;
    const layerId = `querysimple-highlight-${widgetId}`;
    try {
        const graphicsLayer = mapView.map.layers.find(layer => layer.id === layerId);
        if (graphicsLayer) {
            // Clear all graphics first
            graphicsLayer.removeAll();
            // Remove layer from map
            mapView.map.remove(graphicsLayer);
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'cleanupGraphicsLayer-complete',
                seq,
                widgetId,
                layerId,
                timestamp: Date.now()
            });
        }
        else {
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'cleanupGraphicsLayer-not-found',
                seq,
                widgetId,
                layerId,
                timestamp: Date.now()
            });
        }
    }
    catch (error) {
        debugLogger.log('GRAPHICS-LAYER', {
            event: 'cleanupGraphicsLayer-error',
            seq,
            widgetId,
            layerId,
            error: error instanceof Error ? error.message : String(error),
            errorStack: error instanceof Error ? error.stack : undefined,
            timestamp: Date.now()
        });
    }
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/interactive-draw-tool.tsx":
/*!************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/interactive-draw-tool.tsx ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   InteractiveDraw: () => (/* binding */ InteractiveDraw)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");

/** @jsx jsx */





const sketchToolInfoMap = {
    [_config__WEBPACK_IMPORTED_MODULE_3__.CreateToolType.Point]: { drawToolName: 'point', esriClassName: 'esri-icon-point', toolIndex: 0 },
    [_config__WEBPACK_IMPORTED_MODULE_3__.CreateToolType.Polyline]: { drawToolName: 'polyline', esriClassName: 'esri-icon-polyline', toolIndex: 4 },
    [_config__WEBPACK_IMPORTED_MODULE_3__.CreateToolType.Polygon]: { drawToolName: 'polygon', esriClassName: 'esri-icon-polygon', toolIndex: 2 },
    [_config__WEBPACK_IMPORTED_MODULE_3__.CreateToolType.Rectangle]: {
        drawToolName: 'rectangle',
        esriClassName: 'esri-icon-checkbox-unchecked',
        toolIndex: 1
    },
    [_config__WEBPACK_IMPORTED_MODULE_3__.CreateToolType.Circle]: { drawToolName: 'circle', esriClassName: 'esri-icon-radio-unchecked', toolIndex: 3 }
};
function InteractiveDraw(props) {
    const { toolTypes = [], jimuMapView, onDrawEnd, widgetId } = props;
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_5__["default"]);
    const [mapModule, setMapModule] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const getLayerFunRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const graphicRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const [clearAfterApply, setClearAfterApply] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(false);
    const visibleElements = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return {
            createTools: Object.entries(sketchToolInfoMap).reduce((result, [key, value]) => (Object.assign(Object.assign({}, result), { [value.drawToolName]: toolTypes.includes(key) })), { point: false }),
            selectionTools: {
                'lasso-selection': false,
                'rectangle-selection': false
            },
            settingsMenu: false,
            undoRedoMenu: false,
            deleteButton: true
        };
    }, [toolTypes]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        jimu_core__WEBPACK_IMPORTED_MODULE_1__.moduleLoader.loadModule('jimu-ui/advanced/map').then((result) => {
            setMapModule(result);
        });
    });
    const handleDrawToolCreated = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((jimuDrawToolsRef) => {
        getLayerFunRef.current = jimuDrawToolsRef.getGraphicsLayer;
    }, []);
    const handleDrawStart = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        getLayerFunRef.current && (getLayerFunRef.current)().removeAll();
    }, []);
    const handleDrawEnd = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((graphic) => {
        graphicRef.current = graphic;
        onDrawEnd(graphic, getLayerFunRef.current, clearAfterApply);
    }, [onDrawEnd, clearAfterApply]);
    const handleCleared = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        graphicRef.current = null;
        onDrawEnd(null);
    }, [onDrawEnd]);
    const handleClearSettingChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((e) => {
        if (graphicRef.current) {
            onDrawEnd(graphicRef.current, getLayerFunRef.current, e.target.checked);
        }
        setClearAfterApply(e.target.checked);
    }, [onDrawEnd]);
    const JimuDraw = mapModule === null || mapModule === void 0 ? void 0 : mapModule.JimuDraw;
    if (!JimuDraw) {
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_4__.StatusIndicator, { statusType: widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_4__.EntityStatusType.Loading });
    }
    const isAvailable = Object.keys(visibleElements.createTools).some(toolName => visibleElements.createTools[toolName]);
    if (!isAvailable) {
        return null;
    }
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(JimuDraw, { jimuMapView: jimuMapView, operatorWidgetId: widgetId, disableSymbolSelector: true, drawingOptions: {
                    creationMode: mapModule.JimuDrawCreationMode.Single,
                    updateOnGraphicClick: false,
                    visibleElements: visibleElements
                }, uiOptions: {
                    isHideBorder: true
                }, onJimuDrawCreated: handleDrawToolCreated, onDrawingStarted: handleDrawStart, onDrawingFinished: handleDrawEnd, onDrawingCleared: handleCleared }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("label", { className: 'd-flex align-items-center', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Checkbox, { checked: clearAfterApply, onChange: handleClearSettingChange, className: 'mr-2' }), getI18nMessage('clearDrawing')] })] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/loading-result.tsx":
/*!*****************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/loading-result.tsx ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   LoadingResult: () => (/* binding */ LoadingResult)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_theme__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-theme */ "jimu-theme");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");





const Root = jimu_theme__WEBPACK_IMPORTED_MODULE_3__.styled.div `
  position: absolute;
  top: 0;
  bottom: 0;
  right: 0;
  left: 0;
  z-index: 2;

  .loading-content {
    .loading-tip {
      position: relative;
    }
  }
`;
function LoadingResult() {
    const translate = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_4__["default"]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Root, { children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'loading-content w-100 px-4 d-flex flex-column justify-content-center align-items-center', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { role: 'alert', "aria-live": 'assertive', className: 'text-paper', children: translate('retrieving') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Loading, { className: 'loading-tip mt-8', type: jimu_ui__WEBPACK_IMPORTED_MODULE_2__.LoadingType.Donut })] }) }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-result-item.tsx":
/*!********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-result-item.tsx ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryResultItem: () => (/* binding */ QueryResultItem)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_icons_outlined_editor_trash__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-icons/outlined/editor/trash */ "./jimu-icons/outlined/editor/trash.tsx");
/* harmony import */ var _components_feature_info__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./components/feature-info */ "./your-extensions/widgets/query-simple/src/runtime/components/feature-info.tsx");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");

/** @jsx jsx */






const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_6__.createQuerySimpleDebugLogger)();
const style = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
  overflow: auto;
  flex-flow: row;
  cursor: pointer;
  flex-shrink: 0;
  min-height: 2rem;
  position: relative;
  &.selected {
    outline: 2px solid var(--sys-color-primary-main);
  }
  
  .remove-button {
    position: absolute;
    top: 4px;
    right: 4px;
    z-index: 10;
    opacity: 0.7;
    transition: opacity 0.2s;
    
    &:hover {
      opacity: 1;
    }
    
    // Larger touch target for mobile/accessibility
    min-width: 32px;
    min-height: 32px;
  }
`;
/**
 * QueryResultItem component - displays a single query result record
 * Features:
 * - Clicking the item zooms to the feature on the map
 * - Remove button (trash icon) in upper-right corner to remove record from results
 * - Records are expanded by default to show full feature information
 */
const QueryResultItem = (props) => {
    const { widgetId, data, dataSource, popupTemplate, defaultPopupTemplate, onClick, onRemove, expandByDefault = false } = props;
    const recordId = data.getId();
    // Log when QueryResultItem renders
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        debugLogger.log('EXPAND-COLLAPSE', {
            event: 'QueryResultItem-render',
            recordId,
            expandByDefault,
            timestamp: Date.now()
        });
    }, [recordId, expandByDefault]);
    // Check if this record is currently selected
    const selected = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => { var _a, _b, _c; return (_c = (_b = (_a = state.dataSourcesInfo) === null || _a === void 0 ? void 0 : _a[dataSource.id]) === null || _b === void 0 ? void 0 : _b.selectedIds) === null || _c === void 0 ? void 0 : _c.includes(data.getId()); });
    // Determine if list is displayed vertically (affects FeatureInfo expandability)
    const isVerticalAlign = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const widgetJson = state.appConfig.widgets[widgetId];
        return widgetJson.config.resultListDirection !== _config__WEBPACK_IMPORTED_MODULE_5__.ListDirection.Horizontal;
    });
    // Handle clicking on the result item - zooms to feature on map
    const handleClickResultItem = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((e) => {
        // Don't trigger zoom if clicking the remove button
        if (e.target.closest('.remove-button')) {
            return;
        }
        onClick(data);
    }, [onClick, data]);
    // Handle clicking the remove button - removes record from results and selection
    const handleRemove = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((e) => {
        e.stopPropagation(); // Prevent triggering the item click handler
        e.preventDefault();
        onRemove(data);
    }, [onRemove, data]);
    const onKeyUp = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((evt) => {
        if (evt.key === 'Enter' || evt.key === ' ') {
            evt.preventDefault();
            evt.stopPropagation();
            handleClickResultItem(evt);
        }
    }, [handleClickResultItem]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('query-result-item', { selected }), onClick: handleClickResultItem, onKeyUp: onKeyUp, css: style, role: 'option', "aria-selected": selected, tabIndex: 0, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_feature_info__WEBPACK_IMPORTED_MODULE_4__["default"], { graphic: data.feature, popupTemplate: popupTemplate, defaultPopupTemplate: defaultPopupTemplate, togglable: isVerticalAlign, expandByDefault: expandByDefault, dataSource: dataSource }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { className: "remove-button", icon: true, size: "sm", variant: "text", color: "inherit", onClick: handleRemove, "aria-label": "Remove record", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
          padding: 6px;
          min-width: 32px;
          width: 32px;
          height: 32px;
          display: flex;
          align-items: center;
          justify-content: center;
        `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_editor_trash__WEBPACK_IMPORTED_MODULE_3__.TrashOutlined, { size: 18 }) })] }));
};


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-result.tsx":
/*!***************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-result.tsx ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTaskResult: () => (/* binding */ QueryTaskResult)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _widget_config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./widget-config */ "./your-extensions/widgets/query-simple/src/runtime/widget-config.ts");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _simple_list__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./simple-list */ "./your-extensions/widgets/query-simple/src/runtime/simple-list.tsx");
/* harmony import */ var _query_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./query-utils */ "./your-extensions/widgets/query-simple/src/runtime/query-utils.ts");
/* harmony import */ var _default_query_item__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../default-query-item */ "./your-extensions/widgets/query-simple/src/default-query-item.ts");
/* harmony import */ var jimu_icons_outlined_directional_arrow_left__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! jimu-icons/outlined/directional/arrow-left */ "./jimu-icons/outlined/directional/arrow-left.tsx");
/* harmony import */ var jimu_icons_outlined_directional_expand_all__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! jimu-icons/outlined/directional/expand-all */ "./jimu-icons/outlined/directional/expand-all.tsx");
/* harmony import */ var jimu_icons_outlined_directional_collapse_all__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! jimu-icons/outlined/directional/collapse-all */ "./jimu-icons/outlined/directional/collapse-all.tsx");
/* harmony import */ var _data_actions__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../data-actions */ "./your-extensions/widgets/query-simple/src/data-actions/index.tsx");
/* harmony import */ var _selection_utils__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");
/* harmony import */ var _results_management_utils__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./results-management-utils */ "./your-extensions/widgets/query-simple/src/runtime/results-management-utils.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};

/** @jsx jsx */





// FORCED: Always SimpleList - LazyList and PagingList removed










const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_15__.createQuerySimpleDebugLogger)();

const { iconMap } = (0,_widget_config__WEBPACK_IMPORTED_MODULE_3__.getWidgetRuntimeDataMap)();
/**
 * Custom event name for requesting restoration when identify popup closes.
 */
const RESTORE_ON_IDENTIFY_CLOSE_EVENT = 'querysimple-restore-on-identify-close';
/**
 * Detects if an identify popup is currently visible in the DOM.
 * Uses verified selectors based on Experience Builder's identify popup structure.
 *
 * @returns true if identify popup is detected and visible, false otherwise
 */
function isIdentifyPopupOpen() {
    // Primary selector: .esri-popup with role="dialog"
    const popup = document.querySelector('.esri-popup[role="dialog"]');
    if (!popup) {
        return false;
    }
    // Verify it's visible (not hidden)
    const ariaHidden = popup.getAttribute('aria-hidden');
    if (ariaHidden === 'true') {
        return false;
    }
    // Additional check: verify computed style shows it's visible
    const style = window.getComputedStyle(popup);
    if (style.display === 'none' || style.visibility === 'hidden' || style.opacity === '0') {
        return false;
    }
    // Verify it contains esri-features (identify popup structure)
    const hasFeatures = popup.querySelector('.esri-features');
    if (!hasFeatures) {
        return false;
    }
    return true;
}
const resultStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
  display: flex;
  flex-direction: column;

  .query-result__header {
    color: var(--sys-color-surface-paper-text);
    font-weight: 500;
    font-size: 0.875rem;
    line-height: 1.5;
    border-bottom: 1px solid var(--sys-color-divider-secondary);
    margin-bottom: 6px;
    padding-bottom: 8px;
  }

  .query-result-container {
    flex: 1 1 0;
    display: flex;
    flex-direction: column;
    overflow: auto;
    min-height: 0;
  }

  .query-result-info {
    height: 18px;
  }
`;
function QueryTaskResult(props) {
    var _a, _b;
    const { queryItem, queryParams, resultCount, maxPerPage, records, widgetId, outputDS, runtimeZoomToSelected, onNavBack, resultsMode, accumulatedRecords, onAccumulatedRecordsChange, useGraphicsLayerForHighlight, graphicsLayer, mapView } = props;
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_5__["default"]);
    const intl = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.useIntl)();
    const [queryData, setQueryData] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const [selectedRecords, setSelectedRecords] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState([]);
    const [removedRecordIds, setRemovedRecordIds] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(new Set());
    const currentItem = Object.assign({}, _default_query_item__WEBPACK_IMPORTED_MODULE_8__.DEFAULT_QUERY_ITEM, queryItem);
    const [expandAll, setExpandAll] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState((_a = currentItem.resultExpandByDefault) !== null && _a !== void 0 ? _a : false);
    // Track individual item expansion states to maintain state when items are removed
    const [itemExpandStates, setItemExpandStates] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(new Map());
    const backBtnRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(undefined);
    // Track expandAll changes for debugging
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        debugLogger.log('RESULTS-MODE', {
            event: 'expandAll-state-changed',
            widgetId,
            expandAll,
            queryItemConfigId: queryItem.configId,
            timestamp: Date.now()
        });
    }, [expandAll, widgetId, queryItem.configId]);
    // Track if we've already selected these records to prevent re-selection when switching tabs
    const hasSelectedRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(false);
    // Track the last records we selected to detect when new records come in
    const lastSelectedRecordsRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef([]);
    // Track the original query record IDs (not selected IDs) to detect when query results change
    const lastQueryRecordIdsRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef([]);
    // Track the last selected FeatureDataRecords for restoration (if needed)
    const lastSelectedFeatureRecordsRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef([]);
    // Ref to track removedRecordIds for use in callbacks (avoids stale closure issues)
    const removedRecordIdsRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(new Set());
    // Sync ref whenever removedRecordIds state changes
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        removedRecordIdsRef.current = removedRecordIds;
    }, [removedRecordIds]);
    // Error state for user-facing errors
    const [selectionError, setSelectionError] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const extraActions = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return (0,_data_actions__WEBPACK_IMPORTED_MODULE_12__.getExtraActions)(widgetId, outputDS, intl, queryItem, runtimeZoomToSelected);
    }, [widgetId, outputDS, intl, queryItem, runtimeZoomToSelected]);
    const enableDataAction = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        var _a;
        const widgetJson = state.appConfig.widgets[widgetId];
        return (_a = widgetJson.enableDataAction) !== null && _a !== void 0 ? _a : true;
    });
    const pagingTypeInConfig = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const widgetJson = state.appConfig.widgets[widgetId];
        return widgetJson.config.resultPagingStyle;
    });
    const directionTypeInConfig = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const widgetJson = state.appConfig.widgets[widgetId];
        return widgetJson.config.resultListDirection;
    });
    // FORCE SimpleList - ignore config, we're done with lazy loading issues
    const pagingType = _config__WEBPACK_IMPORTED_MODULE_4__.PagingType.Simple;
    const direction = directionTypeInConfig !== null && directionTypeInConfig !== void 0 ? directionTypeInConfig : _config__WEBPACK_IMPORTED_MODULE_4__.ListDirection.Vertical;
    // Group records by origin data source for DataActionList
    // This ensures DataActionList recognizes records even when they come from different queries/origins
    const actionDataSets = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        var _a, _b, _c, _d;
        // Debug: Log what records are available
        debugLogger.log('RESULTS-MODE', {
            event: 'actionDataSets-calculation-start',
            widgetId: widgetId,
            selectedRecordsCount: (selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) || 0,
            queryDataRecordsCount: ((_a = queryData === null || queryData === void 0 ? void 0 : queryData.records) === null || _a === void 0 ? void 0 : _a.length) || 0,
            recordsPropCount: (records === null || records === void 0 ? void 0 : records.length) || 0,
            outputDSId: outputDS === null || outputDS === void 0 ? void 0 : outputDS.id,
            hasSelectedRecords: (selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) > 0,
            hasQueryDataRecords: ((_b = queryData === null || queryData === void 0 ? void 0 : queryData.records) === null || _b === void 0 ? void 0 : _b.length) > 0,
            hasRecordsProp: (records === null || records === void 0 ? void 0 : records.length) > 0
        });
        const isAccumulationMode = resultsMode === _config__WEBPACK_IMPORTED_MODULE_4__.SelectionType.AddToSelection || resultsMode === _config__WEBPACK_IMPORTED_MODULE_4__.SelectionType.RemoveFromSelection;
        // In accumulation modes (Add/Remove), prefer the 'records' prop (the accumulated set)
        // because outputDS.getSelectedRecords() will only return records that match the current query's where clause.
        const recordsToUse = isAccumulationMode
            ? (records || [])
            : ((selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) > 0 ? selectedRecords : (((_c = queryData === null || queryData === void 0 ? void 0 : queryData.records) === null || _c === void 0 ? void 0 : _c.length) > 0 ? queryData.records : (records || [])));
        // If no records, return single DataRecordSet with empty records using outputDS
        if (!recordsToUse || recordsToUse.length === 0) {
            const emptyDataSet = {
                dataSource: outputDS,
                type: 'loaded',
                records: [],
                name: outputDS === null || outputDS === void 0 ? void 0 : outputDS.id,
                label: outputDS === null || outputDS === void 0 ? void 0 : outputDS.getLabel()
            };
            debugLogger.log('RESULTS-MODE', {
                event: 'actionDataSets-empty-records',
                widgetId: widgetId,
                dataSetDataSourceId: (_d = emptyDataSet.dataSource) === null || _d === void 0 ? void 0 : _d.id
            });
            return [emptyDataSet];
        }
        // Group records by their origin data source
        const recordsByOriginDS = new Map();
        recordsToUse.forEach(record => {
            var _a, _b, _c, _d;
            const recordDS = (_b = (_a = record).getDataSource) === null || _b === void 0 ? void 0 : _b.call(_a);
            let originDS = null;
            if (recordDS) {
                originDS = ((_c = recordDS.getOriginDataSources()) === null || _c === void 0 ? void 0 : _c[0]) || recordDS;
            }
            else if (outputDS) {
                // Fallback: use outputDS's origin if record doesn't have dataSource
                originDS = ((_d = outputDS.getOriginDataSources()) === null || _d === void 0 ? void 0 : _d[0]) || outputDS;
            }
            if (originDS) {
                if (!recordsByOriginDS.has(originDS)) {
                    recordsByOriginDS.set(originDS, []);
                }
                recordsByOriginDS.get(originDS).push(record);
            }
        });
        // Create a DataRecordSet for each origin data source
        const dataSets = Array.from(recordsByOriginDS.entries()).map(([originDS, originRecords]) => {
            const dataSet = {
                dataSource: originDS, // Use origin DS, not outputDS
                type: 'selected',
                records: originRecords,
                name: originDS.id,
                label: originDS.getLabel()
            };
            // Add fields if needed (use currentItem's field settings)
            if (currentItem.resultFieldsType === _config__WEBPACK_IMPORTED_MODULE_4__.FieldsType.SelectAttributes && currentItem.resultDisplayFields != null) {
                dataSet.fields = (0,_query_utils__WEBPACK_IMPORTED_MODULE_7__.combineFields)(currentItem.resultDisplayFields, currentItem.resultTitleExpression);
            }
            else if (originDS && 'getPopupInfo' in originDS) {
                // use fields in popup template from origin DS
                const popupInfo = originDS.getPopupInfo();
                if (popupInfo === null || popupInfo === void 0 ? void 0 : popupInfo.fieldInfos) {
                    dataSet.fields = popupInfo.fieldInfos.filter((fieldInfo) => fieldInfo.visible).map((fieldInfo) => fieldInfo.fieldName);
                }
            }
            return dataSet;
        });
        // Debug: Log what the final dataSets contain
        debugLogger.log('RESULTS-MODE', {
            event: 'actionDataSets-final',
            widgetId: widgetId,
            dataSetsCount: dataSets.length,
            totalRecordsCount: recordsToUse.length,
            dataSetsByOrigin: dataSets.map(ds => {
                var _a, _b;
                return ({
                    originDSId: (_a = ds.dataSource) === null || _a === void 0 ? void 0 : _a.id,
                    recordsCount: ((_b = ds.records) === null || _b === void 0 ? void 0 : _b.length) || 0,
                    type: ds.type
                });
            })
        });
        // If we couldn't group by origin (shouldn't happen), fallback to single DataRecordSet with outputDS
        if (dataSets.length === 0 && outputDS) {
            debugLogger.log('RESULTS-MODE', {
                event: 'actionDataSets-fallback-to-outputDS',
                widgetId: widgetId,
                reason: 'could-not-determine-origin-ds'
            });
            return [{
                    dataSource: outputDS,
                    type: recordsToUse.length > 0 ? 'selected' : 'loaded',
                    records: recordsToUse,
                    name: outputDS.id,
                    label: outputDS.getLabel()
                }];
        }
        return dataSets;
    }, [selectedRecords, outputDS, queryData, currentItem, records, widgetId]);
    // Memoize filtered records to prevent unnecessary re-renders that reset scroll position
    // This ensures the records prop only changes when the actual data changes, not just the array reference
    const filteredRecordsForList = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        var _a;
        return ((_a = queryData === null || queryData === void 0 ? void 0 : queryData.records) === null || _a === void 0 ? void 0 : _a.filter((record) => !removedRecordIds.has(record.getId()))) ||
            ((records === null || records === void 0 ? void 0 : records.filter(record => !removedRecordIds.has(record.getId()))) || []);
    }, [queryData === null || queryData === void 0 ? void 0 : queryData.records, records, removedRecordIds]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        // focus the back button when it is rendered
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.focusElementInKeyboardMode)(backBtnRef.current);
    });
    /**
     * Effect hook that runs when new query results arrive.
     * Resets removed records, expand state, and query data for the new results.
     * Also handles auto-selection of records when they first arrive.
     */
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        // Check if these are new records (different from what we last queried)
        // IMPORTANT: Compare against original query results, not selected results
        // This prevents removedRecordIds from being reset when records are removed
        const currentRecordIds = (records === null || records === void 0 ? void 0 : records.map(record => record.getId())) || [];
        const recordsChanged = currentRecordIds.length !== lastQueryRecordIdsRef.current.length ||
            currentRecordIds.some((id, index) => id !== lastQueryRecordIdsRef.current[index]);
        // Debug: Log when records prop changes
        debugLogger.log('RESULTS-MODE', {
            event: 'records-prop-changed',
            widgetId: widgetId,
            recordsCount: (records === null || records === void 0 ? void 0 : records.length) || 0,
            willSetQueryData: records && records.length > 0,
            removedRecordIdsCount: removedRecordIds.size,
            hasSelectedRef: hasSelectedRef.current,
            recordsChanged: recordsChanged,
            lastQueryRecordIdsCount: lastQueryRecordIdsRef.current.length,
            currentRecordIdsCount: currentRecordIds.length
        });
        // IMPORTANT: Only reset removed records if this is truly a NEW query with different records
        // Don't reset if records are the same (just a re-render or lazy load)
        if (recordsChanged) {
            debugLogger.log('RESULTS-MODE', {
                event: 'records-truly-changed-resetting-removed',
                widgetId: widgetId,
                oldRecordIdsCount: lastQueryRecordIdsRef.current.length,
                newRecordIdsCount: currentRecordIds.length
            });
            setRemovedRecordIds(new Set());
            // Update the original query record IDs ref
            lastQueryRecordIdsRef.current = currentRecordIds;
        }
        else {
            debugLogger.log('RESULTS-MODE', {
                event: 'records-not-changed-preserving-removed',
                widgetId: widgetId,
                recordIdsCount: currentRecordIds.length,
                removedRecordIdsCount: removedRecordIds.size
            });
        }
        // Reset expand all to queryItem's resultExpandByDefault setting
        setExpandAll((_a = currentItem.resultExpandByDefault) !== null && _a !== void 0 ? _a : false);
        setQueryData({
            records,
            page: 1
        });
        // Only auto-select records if:
        // 1. We have records and outputDS
        // 2. We haven't already selected these records (hasSelectedRef is false)
        // 3. OR the records have actually changed (new query results)
        // 4. AND we don't have any removed records (to prevent re-selecting removed ones)
        if (records && records.length > 0 && outputDS &&
            (!hasSelectedRef.current || recordsChanged) &&
            removedRecordIds.size === 0) {
            const recordIds = records.map(record => record.getId());
            const fdr = records;
            (() => __awaiter(this, void 0, void 0, function* () {
                try {
                    setSelectionError(null); // Clear previous errors
                    yield (0,_selection_utils__WEBPACK_IMPORTED_MODULE_13__.selectRecordsAndPublish)(widgetId, outputDS, recordIds, fdr, false, useGraphicsLayerForHighlight, graphicsLayer, mapView);
                    hasSelectedRef.current = true; // Mark as selected
                    lastSelectedRecordsRef.current = recordIds; // Store the IDs we selected
                    lastSelectedFeatureRecordsRef.current = fdr; // Store the full records for potential restoration
                    // Notify Widget and HelperSimple of selection change
                    (0,_selection_utils__WEBPACK_IMPORTED_MODULE_13__.dispatchSelectionEvent)(widgetId, recordIds, outputDS, queryItem.configId);
                }
                catch (error) {
                    const errorMessage = error instanceof Error ? error.message : 'Failed to select query results';
                    setSelectionError(errorMessage);
                    debugLogger.log('TASK', {
                        event: 'selection-failed-query-result',
                        error: errorMessage,
                        errorStack: error instanceof Error ? error.stack : undefined,
                        recordCount: recordIds.length
                    });
                }
            }))();
        }
        else if (recordsChanged && records && records.length === 0) {
            // If records were cleared, reset the selection flag
            hasSelectedRef.current = false;
            lastSelectedRecordsRef.current = [];
            setSelectionError(null); // Clear errors when clearing records
        }
        else if (removedRecordIds.size > 0) {
            debugLogger.log('RESULTS-MODE', {
                event: 'skipping-reselection-due-to-removed-records',
                widgetId: widgetId,
                removedRecordIdsCount: removedRecordIds.size,
                recordsCount: (records === null || records === void 0 ? void 0 : records.length) || 0,
                hasSelectedRef: hasSelectedRef.current,
                recordsChanged: recordsChanged
            });
        }
    }, [records, outputDS, widgetId, queryItem.configId, queryItem.resultExpandByDefault, removedRecordIds]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        // clear selection when resultSelectMode changed
        if (outputDS) {
            (0,_selection_utils__WEBPACK_IMPORTED_MODULE_13__.clearSelectionInDataSources)(outputDS, useGraphicsLayerForHighlight, graphicsLayer);
            (0,_selection_utils__WEBPACK_IMPORTED_MODULE_13__.publishSelectionMessage)(widgetId, [], outputDS, true);
        }
    }, [queryItem.resultSelectMode, outputDS, widgetId, useGraphicsLayerForHighlight, graphicsLayer]);
    // Update expandAll when queryItem changes (e.g., switching between queries)
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        const newExpandAll = (_a = queryItem.resultExpandByDefault) !== null && _a !== void 0 ? _a : false;
        debugLogger.log('RESULTS-MODE', {
            event: 'expandAll-reset-by-queryItem-change',
            widgetId,
            queryItemConfigId: queryItem.configId,
            resultExpandByDefault: queryItem.resultExpandByDefault,
            newExpandAll,
            timestamp: Date.now()
        });
        setExpandAll(newExpandAll);
        // Reset individual expansion states when query changes
        setItemExpandStates(new Map());
    }, [queryItem.configId]);
    /**
     * Monitor origin data source selection changes to detect when other widgets (like map identify)
     * clear our selections. Enhanced with identify popup detection for testing scenarios.
     * Watches the origin data source's selection state directly via polling.
     */
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        if (!outputDS)
            return;
        const originDS = (_a = outputDS.getOriginDataSources()) === null || _a === void 0 ? void 0 : _a[0];
        if (!originDS)
            return;
        const originDSId = originDS.id;
        let previousSelectedIds = [];
        let identifyPopupWasOpen = false;
        let lastLogTime = 0;
        const LOG_THROTTLE_MS = 1000; // Throttle logs to once per second
        // Initial check
        previousSelectedIds = originDS.getSelectedRecordIds() || [];
        identifyPopupWasOpen = isIdentifyPopupOpen();
        // Watch for selection changes on the origin data source
        const checkSelection = () => {
            const currentSelectedIds = originDS.getSelectedRecordIds() || [];
            const ourExpectedIds = lastSelectedRecordsRef.current;
            const hasOurSelection = ourExpectedIds.length > 0;
            const identifyPopupIsOpen = isIdentifyPopupOpen();
            // Detect if selection was cleared or changed externally
            const wasCleared = previousSelectedIds.length > 0 && currentSelectedIds.length === 0;
            const wasChanged = previousSelectedIds.length > 0 &&
                (currentSelectedIds.length !== previousSelectedIds.length ||
                    !currentSelectedIds.every(id => previousSelectedIds.includes(id)));
            // NEW: Detect if selection was added (went from empty to having records)
            const wasAdded = previousSelectedIds.length === 0 && currentSelectedIds.length > 0;
            // Track identify popup state changes
            const identifyPopupJustOpened = !identifyPopupWasOpen && identifyPopupIsOpen;
            const identifyPopupJustClosed = identifyPopupWasOpen && !identifyPopupIsOpen;
            const identifyPopupStillOpen = identifyPopupWasOpen && identifyPopupIsOpen;
            // Log identify popup state changes
            const now = Date.now();
            if (identifyPopupJustOpened || identifyPopupJustClosed) {
                debugLogger.log('SELECTION', {
                    event: identifyPopupJustOpened ? 'identify-popup-opened' : 'identify-popup-closed',
                    originDSId,
                    ourSelectionCount: ourExpectedIds.length,
                    currentSelectionCount: currentSelectedIds.length,
                    timestamp: new Date().toISOString()
                });
                // If identify popup just closed and selection was cleared, dispatch restore event
                if (identifyPopupJustClosed && wasCleared && hasOurSelection && ourExpectedIds.length > 0) {
                    const restoreEvent = new CustomEvent(RESTORE_ON_IDENTIFY_CLOSE_EVENT, {
                        detail: {
                            widgetId,
                            recordIds: ourExpectedIds,
                            outputDsId: outputDS.id,
                            queryItemConfigId: queryItem.configId
                        },
                        bubbles: true,
                        cancelable: true
                    });
                    window.dispatchEvent(restoreEvent);
                    debugLogger.log('SELECTION', {
                        event: 'identify-popup-closed-restore-requested',
                        widgetId,
                        recordCount: ourExpectedIds.length,
                        outputDsId: outputDS.id,
                        queryItemConfigId: queryItem.configId
                    });
                }
            }
            // Log ALL selection changes (not just when we have our own selection)
            if (wasCleared || wasChanged || wasAdded) {
                // Check if this matches our expected selection
                const matchesOurSelection = hasOurSelection &&
                    ourExpectedIds.length === currentSelectedIds.length &&
                    ourExpectedIds.every(id => currentSelectedIds.includes(id));
                // Determine what would happen (for testing/logging)
                const wouldRestore = wasCleared && identifyPopupIsOpen && hasOurSelection && ourExpectedIds.length > 0;
                // Determine scenario
                let scenario = 'Unknown';
                if (wasAdded && !hasOurSelection) {
                    scenario = 'TEST SCENARIO 4: Another widget selected records (we have no selection)';
                }
                else if (wasChanged && !matchesOurSelection && !hasOurSelection) {
                    scenario = 'TEST SCENARIO 5: Another widget changed selection (we have no selection)';
                }
                else if (wasChanged && !matchesOurSelection && hasOurSelection) {
                    scenario = identifyPopupIsOpen
                        ? 'TEST SCENARIO 2: Query  Identify (selection changed, not cleared)  Would NOT restore'
                        : 'TEST SCENARIO 3: Query  Another QuerySimple widget  Would NOT restore';
                }
                else if (wasCleared && hasOurSelection) {
                    scenario = identifyPopupIsOpen
                        ? 'TEST SCENARIO 1: Query  Identify  Would restore'
                        : 'TEST SCENARIO 3: Query  Another QuerySimple widget (cleared)  Would NOT restore';
                }
                else if (wasAdded && hasOurSelection) {
                    scenario = matchesOurSelection
                        ? 'Our widget selected records'
                        : 'Another widget selected different records';
                }
                // Log detection with identify popup state (throttled)
                if (now - lastLogTime > LOG_THROTTLE_MS) {
                    debugLogger.log('SELECTION', {
                        event: wasCleared ? 'selection-cleared' : wasChanged ? 'selection-changed' : 'selection-added',
                        originDSId,
                        ourExpectedCount: ourExpectedIds.length,
                        previousSelectedCount: previousSelectedIds.length,
                        currentSelectedCount: currentSelectedIds.length,
                        wasCleared,
                        wasChanged,
                        wasAdded,
                        hasOurSelection,
                        matchesOurSelection,
                        identifyPopupIsOpen,
                        identifyPopupJustOpened,
                        identifyPopupStillOpen,
                        identifyPopupJustClosed,
                        wouldRestore,
                        ourExpectedIds: ourExpectedIds.slice(0, 5),
                        previousSelectedIds: previousSelectedIds.slice(0, 5),
                        currentSelectedIds: currentSelectedIds.slice(0, 5),
                        timestamp: new Date().toISOString(),
                        note: wouldRestore
                            ? 'Would restore selection (cleared + identify popup open)'
                            : identifyPopupIsOpen && wasChanged
                                ? 'Identify popup open but selection changed (not cleared) - would not restore'
                                : wasCleared && !identifyPopupIsOpen
                                    ? 'Selection cleared, checking if identify popup opens...'
                                    : wasAdded
                                        ? hasOurSelection && matchesOurSelection
                                            ? 'Our widget selected records'
                                            : hasOurSelection && !matchesOurSelection
                                                ? 'Another widget selected different records'
                                                : 'Selection added (by another widget or external source)'
                                        : 'No identify popup detected - would not restore'
                    });
                    lastLogTime = now;
                }
            }
            previousSelectedIds = [...currentSelectedIds];
            identifyPopupWasOpen = identifyPopupIsOpen;
        };
        // Check periodically (every 500ms)
        const intervalId = setInterval(checkSelection, 500);
        return () => {
            clearInterval(intervalId);
        };
    }, [outputDS]);
    /**
     * Clears all results. Resets local state and delegates to parent's clearResult method.
     */
    const clearResults = () => __awaiter(this, void 0, void 0, function* () {
        // Log hash state before clearing
        const hashBefore = window.location.hash.substring(1);
        const urlParamsBefore = new URLSearchParams(hashBefore);
        const hashParamsBefore = {};
        urlParamsBefore.forEach((value, key) => {
            hashParamsBefore[key] = value;
        });
        debugLogger.log('HASH', {
            event: 'clearResults-called',
            widgetId,
            hashBefore: hashBefore,
            hashParamsBefore: hashParamsBefore,
            hashParamsCount: Object.keys(hashParamsBefore).length,
            timestamp: Date.now()
        });
        // Reset local selection flags
        hasSelectedRef.current = false;
        lastSelectedRecordsRef.current = [];
        // Reset local query data state
        setQueryData(null);
        setRemovedRecordIds(new Set());
        // Clear error state when clearing results
        setSelectionError(null);
        // Delegate to parent's clearResult method (via onNavBack) which handles
        // clearing selection from map, publishing messages, etc.
        yield onNavBack(true);
        // Log hash state after clearing (with delay to catch async updates)
        setTimeout(() => {
            const hashAfter = window.location.hash.substring(1);
            const urlParamsAfter = new URLSearchParams(hashAfter);
            const hashParamsAfter = {};
            urlParamsAfter.forEach((value, key) => {
                hashParamsAfter[key] = value;
            });
            debugLogger.log('HASH', {
                event: 'clearResults-completed',
                widgetId,
                hashBefore: hashBefore,
                hashAfter: hashAfter,
                hashParamsBefore: hashParamsBefore,
                hashParamsAfter: hashParamsAfter,
                hashParamsRemoved: Object.keys(hashParamsBefore).length - Object.keys(hashParamsAfter).length,
                hashParamsCountBefore: Object.keys(hashParamsBefore).length,
                hashParamsCountAfter: Object.keys(hashParamsAfter).length,
                stillHasHashParams: Object.keys(hashParamsAfter).length > 0,
                timestamp: Date.now()
            });
        }, 100);
    });
    const handleRenderDone = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(({ dataItems, pageSize, page }) => {
        debugLogger.log('RESULTS-MODE', {
            event: 'handleRenderDone-called',
            widgetId,
            queryItemConfigId: queryItem.configId,
            dataItemsCount: (dataItems === null || dataItems === void 0 ? void 0 : dataItems.length) || 0,
            pageSize,
            page,
            timestamp: Date.now()
        });
        // Use ref to get latest removedRecordIds (avoids stale closure issues with lazy loading)
        const currentRemovedIds = removedRecordIdsRef.current;
        // Filter out removed records FIRST - before any selection logic
        // This ensures removed records stay removed even during lazy loading
        const filteredItems = (dataItems === null || dataItems === void 0 ? void 0 : dataItems.filter(item => !currentRemovedIds.has(item.getId()))) || [];
        // Check if queryData has actually changed before updating state
        // This prevents unnecessary re-renders that reset scroll position
        const currentRecords = (queryData === null || queryData === void 0 ? void 0 : queryData.records) || [];
        const currentRecordIds = currentRecords.map(r => r.getId()).sort();
        const newRecordIds = filteredItems.map(r => r.getId()).sort();
        const dataChanged = currentRecordIds.length !== newRecordIds.length ||
            !currentRecordIds.every((id, idx) => id === newRecordIds[idx]) ||
            (queryData === null || queryData === void 0 ? void 0 : queryData.pageSize) !== pageSize ||
            (queryData === null || queryData === void 0 ? void 0 : queryData.page) !== page;
        // Only update state if data has actually changed
        if (dataChanged) {
            setQueryData({
                records: filteredItems,
                pageSize,
                page
            });
        }
        // Only select records that are NOT removed
        // IMPORTANT: Only re-select if the selection has actually changed to avoid resetting scroll position
        if (filteredItems && filteredItems.length > 0 && outputDS) {
            const recordIds = filteredItems.map(record => record.getId());
            const fdr = filteredItems;
            // Check what's currently selected to avoid unnecessary re-selection (which resets scroll)
            const currentlySelectedIds = outputDS.getSelectedRecordIds() || [];
            const selectionChanged = currentlySelectedIds.length !== recordIds.length ||
                !recordIds.every(id => currentlySelectedIds.includes(id));
            // Only select if the selection has actually changed
            if (selectionChanged) {
                try {
                    setSelectionError(null); // Clear previous errors
                    (0,_selection_utils__WEBPACK_IMPORTED_MODULE_13__.selectRecordsAndPublish)(widgetId, outputDS, recordIds, fdr);
                    debugLogger.log('RESULTS-MODE', {
                        event: 'handleRenderDone-selecting-filtered-records',
                        widgetId: widgetId,
                        dataItemsCount: (dataItems === null || dataItems === void 0 ? void 0 : dataItems.length) || 0,
                        filteredItemsCount: filteredItems.length,
                        removedRecordIdsCount: currentRemovedIds.size,
                        selectionChanged: true,
                        currentlySelectedCount: currentlySelectedIds.length,
                        newSelectionCount: recordIds.length
                    });
                }
                catch (error) {
                    const errorMessage = error instanceof Error ? error.message : 'Failed to select query results';
                    setSelectionError(errorMessage);
                    debugLogger.log('TASK', {
                        event: 'selection-failed-handleRenderDone',
                        error: errorMessage,
                        errorStack: error instanceof Error ? error.stack : undefined,
                        recordCount: recordIds.length
                    });
                }
            }
            else {
                debugLogger.log('RESULTS-MODE', {
                    event: 'handleRenderDone-skipping-reselection',
                    widgetId: widgetId,
                    dataItemsCount: (dataItems === null || dataItems === void 0 ? void 0 : dataItems.length) || 0,
                    filteredItemsCount: filteredItems.length,
                    removedRecordIdsCount: currentRemovedIds.size,
                    reason: 'selection-unchanged',
                    currentlySelectedCount: currentlySelectedIds.length
                });
            }
        }
    }, [outputDS, widgetId, queryData]);
    const handleDataSourceInfoChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        var _a, _b;
        const ds = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().getDataSource(outputDS === null || outputDS === void 0 ? void 0 : outputDS.id);
        const dsRecords = ds === null || ds === void 0 ? void 0 : ds.getSelectedRecords();
        const selectedIds = (_a = ds === null || ds === void 0 ? void 0 : ds.getSelectedRecordIds()) !== null && _a !== void 0 ? _a : [];
        // Capture records prop before using it (to avoid shadowing)
        const recordsProp = records;
        // Debug: Log what handleDataSourceInfoChange sees
        debugLogger.log('RESULTS-MODE', {
            event: 'handleDataSourceInfoChange-fired',
            widgetId: widgetId,
            outputDSId: outputDS === null || outputDS === void 0 ? void 0 : outputDS.id,
            dsId: ds === null || ds === void 0 ? void 0 : ds.id,
            selectedRecordsFromDS: (dsRecords === null || dsRecords === void 0 ? void 0 : dsRecords.length) || 0,
            selectedIdsFromDS: selectedIds.length,
            currentSelectedRecordsState: (selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) || 0,
            recordsPropCount: (recordsProp === null || recordsProp === void 0 ? void 0 : recordsProp.length) || 0,
            removedRecordIdsCount: removedRecordIds.size,
            timestamp: Date.now()
        });
        // If we have records in the prop (accumulated records) but DS shows 0 selected,
        // and we currently have selectedRecords, this is likely a query switch in "Add to" mode
        // where re-selection hasn't happened yet. Don't clear selectedRecords - wait for re-selection.
        if (recordsProp && recordsProp.length > 0 && selectedIds.length === 0 && selectedRecords && selectedRecords.length > 0) {
            debugLogger.log('RESULTS-MODE', {
                event: 'handleDataSourceInfoChange-skipping-clear-during-query-switch',
                widgetId: widgetId,
                reason: 'waiting-for-reselection',
                recordsPropCount: recordsProp.length,
                currentSelectedRecordsCount: selectedRecords.length
            });
            return; // Skip updating - re-selection is coming
        }
        // IMPORTANT: Filter out removed records from DS selection before comparing/syncing
        // This prevents removed records from being re-added when scrolling triggers this callback
        const filteredDsRecords = (_b = dsRecords === null || dsRecords === void 0 ? void 0 : dsRecords.filter((record) => !removedRecordIds.has(record.getId()))) !== null && _b !== void 0 ? _b : [];
        const filteredSelectedIds = selectedIds.filter(id => !removedRecordIds.has(id));
        // If DS has more selected than our state, but the difference is entirely removed records, don't sync
        if (filteredSelectedIds.length === ((selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) || 0) && selectedIds.length > filteredSelectedIds.length) {
            debugLogger.log('RESULTS-MODE', {
                event: 'handleDataSourceInfoChange-skipping-sync-due-to-removed-records',
                widgetId: widgetId,
                reason: 'ds-selection-includes-removed-records',
                dsSelectedCount: selectedIds.length,
                filteredCount: filteredSelectedIds.length,
                componentStateCount: (selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) || 0,
                removedRecordIdsCount: removedRecordIds.size
            });
            return; // Skip syncing - the mismatch is due to removed records
        }
        let shouldUpdate = false;
        if (filteredSelectedIds.length !== (selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length)) {
            shouldUpdate = true;
        }
        else { // equal length
            shouldUpdate = filteredSelectedIds.some(id => {
                const target = selectedRecords.find((item) => item.getId() === id);
                return target == null;
            });
        }
        if (shouldUpdate) {
            debugLogger.log('RESULTS-MODE', {
                event: 'handleDataSourceInfoChange-updating-selectedRecords',
                widgetId: widgetId,
                oldCount: (selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) || 0,
                newCount: filteredDsRecords.length,
                note: 'filtered-out-removed-records'
            });
            debugLogger.log('RESULTS-MODE', {
                event: 'handleDataSourceInfoChange-updating-selectedRecords',
                widgetId: widgetId,
                oldCount: (selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) || 0,
                newCount: filteredDsRecords.length,
                oldSelectedIds: (selectedRecords || []).map(r => r.getId()).slice(0, 5),
                newSelectedIds: filteredSelectedIds.slice(0, 5),
                note: 'filtered-out-removed-records',
                timestamp: Date.now()
            });
            setSelectedRecords(filteredDsRecords);
        }
        else {
            debugLogger.log('RESULTS-MODE', {
                event: 'handleDataSourceInfoChange-skipping-update',
                widgetId: widgetId,
                reason: 'no-change-detected',
                timestamp: Date.now()
            });
        }
    }, [outputDS === null || outputDS === void 0 ? void 0 : outputDS.id, selectedRecords, widgetId, records, removedRecordIds]);
    /**
     * Generates the tip message showing how many features are displayed.
     * Filters out removed records to show accurate counts.
     *
     * @returns Formatted string like "Features displayed: 118 / 121"
     */
    const getTipMessage = () => {
        if (queryData && queryData.records) {
            // Filter out removed records for display count
            const displayedRecords = queryData.records.filter((record) => !removedRecordIds.has(record.getId()));
            const displayedCount = displayedRecords.length;
            // FORCED: Always SimpleList, so always use simple display format
            return `${getI18nMessage('featuresDisplayed')}: ${displayedCount} / ${resultCount}`;
            // removed by dead control flow
{}
            // removed by dead control flow
{}
            // removed by dead control flow
{}
            // removed by dead control flow
{}
            // removed by dead control flow
{}
        }
        return '';
    };
    /**
     * Toggles expand/collapse state for all result items.
     * When toggled, all result items will be expanded or collapsed together.
     * Updates individual item expansion states in the map to maintain state when items are removed.
     */
    const toggleExpandAll = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        setExpandAll(prev => {
            const newValue = !prev;
            debugLogger.log('EXPAND-COLLAPSE', {
                event: 'toggleExpandAll-clicked',
                widgetId,
                previousValue: prev,
                newValue,
                timestamp: Date.now()
            });
            // Update all current items in the map with the new expansion state
            setItemExpandStates(prevMap => {
                const newMap = new Map(prevMap);
                // Get all current record IDs from filtered records
                const allRecordIds = filteredRecordsForList.map(r => r.getId());
                allRecordIds.forEach(id => {
                    newMap.set(id, newValue);
                });
                debugLogger.log('EXPAND-COLLAPSE', {
                    event: 'itemExpandStates-updated',
                    widgetId,
                    newValue,
                    updatedCount: allRecordIds.length,
                    recordIds: allRecordIds.slice(0, 10), // Log first 10 IDs
                    timestamp: Date.now()
                });
                return newMap;
            });
            return newValue;
        });
    }, [widgetId, filteredRecordsForList]);
    const resultUseOutputDataSource = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)({
            dataSourceId: queryItem.outputDataSourceId,
            mainDataSourceId: queryItem.outputDataSourceId
        });
    }, [queryItem === null || queryItem === void 0 ? void 0 : queryItem.outputDataSourceId]);
    const handleEscape = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.focusElementInKeyboardMode)(backBtnRef.current);
    }, []);
    // Keep records selected and zoom to clicked record
    // Records remain selected as long as they're in the results
    // Clicking a record always zooms to it on the map (this behavior is always enabled)
    const toggleSelection = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((data) => {
        var _a, _b;
        // Ensure the clicked record is selected (it should already be, but ensure it)
        const selectedDatas = (_a = outputDS.getSelectedRecords()) !== null && _a !== void 0 ? _a : [];
        const selectedIds = (_b = outputDS.getSelectedRecordIds()) !== null && _b !== void 0 ? _b : [];
        const dataId = data.getId();
        // If this record isn't already selected, add it to the selection
        if (!selectedIds.includes(dataId)) {
            const updatedSelectedDatas = [...selectedDatas, data];
            const recordIds = updatedSelectedDatas.map(record => record.getId());
            // Select records and publish selection message using utility function
            (0,_selection_utils__WEBPACK_IMPORTED_MODULE_13__.selectRecordsAndPublish)(widgetId, outputDS, recordIds, updatedSelectedDatas, true);
        }
        // Zoom to the clicked record using data actions (always enabled - user wants to keep this behavior)
        const dataSet = {
            dataSource: outputDS,
            records: [data],
            type: 'selected',
            name: outputDS.getLabel()
        };
        // Get available data actions and find the zoomToFeature action
        jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataActionManager.getInstance().getSupportedActions(widgetId, [dataSet], jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataLevel.Records)
            .then(actionCategories => {
            // Look for zoomToFeature action in any category
            let zoomAction = null;
            for (const category in actionCategories) {
                const actions = actionCategories[category];
                zoomAction = actions.find((action) => action.name === 'zoomToFeature' || action.id === 'zoomToFeature');
                if (zoomAction)
                    break;
            }
            if (zoomAction) {
                // Execute the zoom action
                return jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataActionManager.getInstance().executeDataAction(zoomAction, [dataSet], jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataLevel.Records, widgetId);
            }
        })
            .catch(error => {
            // Silently handle errors
        });
    }, [outputDS, widgetId]);
    /**
     * Removes a record from the results and selection.
     * If removing the last record, automatically clears all results
     * by calling the trash can logic (same as clicking Clear button).
     * This ensures the UI doesn't show "Features displayed: 0 / 1" when all results are removed.
     *
     * @param data - The feature data record to remove
     */
    const removeRecord = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((data) => {
        var _a, _b;
        const dataId = data.getId();
        const currentExpandAll = expandAll;
        // Log hash state when removing individual record
        const hash = window.location.hash.substring(1);
        const urlParams = new URLSearchParams(hash);
        const hashParams = {};
        urlParams.forEach((value, key) => {
            hashParams[key] = value;
        });
        debugLogger.log('EXPAND-COLLAPSE', {
            event: 'removeRecord-started',
            widgetId,
            removedRecordId: dataId,
            currentExpandAll,
            timestamp: Date.now()
        });
        debugLogger.log('HASH', {
            event: 'removeRecord-called',
            widgetId,
            removedRecordId: dataId,
            hash: hash,
            hashParams: hashParams,
            hashParamsCount: Object.keys(hashParams).length,
            timestamp: Date.now()
        });
        // Remove from expansion states map
        setItemExpandStates(prevMap => {
            const newMap = new Map(prevMap);
            newMap.delete(dataId);
            debugLogger.log('EXPAND-COLLAPSE', {
                event: 'itemExpandStates-cleaned-up',
                widgetId,
                removedRecordId: dataId,
                remainingCount: newMap.size,
                timestamp: Date.now()
            });
            return newMap;
        });
        // Add to removed records set
        setRemovedRecordIds(prev => {
            var _a, _b;
            const newSet = new Set(prev).add(dataId);
            // If all records are now removed, clear everything by calling trash can logic
            // IMPORTANT: Compare against actual displayed records count, not resultCount
            // resultCount only reflects the latest query, but in "Add to" mode we display accumulated records
            // Use queryData.records.length (before filtering) as the source of truth for displayed records
            // Fall back to accumulatedRecords.length if in accumulation mode, or resultCount as last resort
            let currentDisplayedCount = ((_a = queryData === null || queryData === void 0 ? void 0 : queryData.records) === null || _a === void 0 ? void 0 : _a.length) || 0;
            if (currentDisplayedCount === 0) {
                // If queryData doesn't have records yet, check if we're in accumulation mode
                const isAccumulationMode = resultsMode === _config__WEBPACK_IMPORTED_MODULE_4__.SelectionType.AddToSelection ||
                    resultsMode === _config__WEBPACK_IMPORTED_MODULE_4__.SelectionType.RemoveFromSelection;
                if (isAccumulationMode && accumulatedRecords && accumulatedRecords.length > 0) {
                    currentDisplayedCount = accumulatedRecords.length;
                }
                else {
                    // Last resort: use resultCount (but this might be incorrect in accumulation mode)
                    currentDisplayedCount = resultCount;
                }
            }
            debugLogger.log('RESULTS-MODE', {
                event: 'removeRecord-checking-all-removed',
                widgetId,
                removedRecordIdsSize: newSet.size,
                currentDisplayedCount,
                resultCount,
                queryDataRecordsCount: ((_b = queryData === null || queryData === void 0 ? void 0 : queryData.records) === null || _b === void 0 ? void 0 : _b.length) || 0,
                accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0,
                resultsMode,
                willNavigateBack: newSet.size === currentDisplayedCount && currentDisplayedCount > 0,
                timestamp: Date.now()
            });
            if (newSet.size === currentDisplayedCount && currentDisplayedCount > 0) {
                // All displayed records removed - clear everything (same as clicking trash can button)
                onNavBack(true);
                return newSet;
            }
            return newSet;
        });
        // Update queryData to filter out the removed record
        setQueryData(prevData => {
            if (!prevData)
                return prevData;
            const filteredRecords = prevData.records.filter((record) => record.getId() !== dataId);
            return Object.assign(Object.assign({}, prevData), { records: filteredRecords });
        });
        // ALWAYS remove from origin data source selections (same as Remove mode)
        // This properly removes records from the map selection, handling single or multiple origin sources
        // Also removes graphics from graphics layer if using graphics layer highlighting
        (0,_results_management_utils__WEBPACK_IMPORTED_MODULE_14__.removeRecordsFromOriginSelections)(widgetId, [data], outputDS, useGraphicsLayerForHighlight, graphicsLayer);
        // Update outputDS selection
        const selectedDatas = (_a = outputDS.getSelectedRecords()) !== null && _a !== void 0 ? _a : [];
        const updatedSelectedDatas = selectedDatas.filter(record => record.getId() !== dataId);
        const recordIds = updatedSelectedDatas.map(record => record.getId());
        // Update outputDS selection
        if (typeof outputDS.selectRecordsByIds === 'function') {
            outputDS.selectRecordsByIds(recordIds, updatedSelectedDatas);
        }
        // IMPORTANT: Publish custom event so widget can update lastSelection state
        // This ensures restoration restores the correct (updated) count
        const originDS = (_b = outputDS.getOriginDataSources()) === null || _b === void 0 ? void 0 : _b[0];
        const dataSourceId = originDS === null || originDS === void 0 ? void 0 : originDS.id;
        const selectionEvent = new CustomEvent('querysimple-selection-changed', {
            detail: {
                widgetId,
                recordIds, // Updated record IDs (with removed record excluded)
                dataSourceId,
                outputDsId: outputDS.id,
                queryItemConfigId: queryItem.configId
            },
            bubbles: true,
            cancelable: true
        });
        window.dispatchEvent(selectionEvent);
        // If in accumulation mode, also remove from accumulated records
        const isAccumulationMode = resultsMode === _config__WEBPACK_IMPORTED_MODULE_4__.SelectionType.AddToSelection ||
            resultsMode === _config__WEBPACK_IMPORTED_MODULE_4__.SelectionType.RemoveFromSelection;
        if (isAccumulationMode && onAccumulatedRecordsChange && accumulatedRecords && accumulatedRecords.length > 0) {
            const remainingRecords = (0,_results_management_utils__WEBPACK_IMPORTED_MODULE_14__.removeResultsFromAccumulated)(outputDS, [data], accumulatedRecords);
            debugLogger.log('RESULTS-MODE', {
                event: 'x-button-removed-from-accumulated',
                widgetId,
                removedRecordId: dataId,
                accumulatedRecordsCountBefore: accumulatedRecords.length,
                remainingRecordsCount: remainingRecords.length,
                wasRemoved: remainingRecords.length < accumulatedRecords.length
            });
            onAccumulatedRecordsChange(remainingRecords);
        }
        // Log after removeRecord completes to check if expandAll changed
        setTimeout(() => {
            debugLogger.log('RESULTS-MODE', {
                event: 'removeRecord-completed',
                widgetId,
                removedRecordId: dataId,
                expandAllBefore: currentExpandAll,
                expandAllAfter: expandAll,
                expandAllChanged: currentExpandAll !== expandAll,
                expandByDefaultProp: expandAll, // What will be passed to SimpleList
                timestamp: Date.now()
            });
        }, 0);
    }, [outputDS, widgetId, resultCount, onNavBack, resultsMode, accumulatedRecords, onAccumulatedRecordsChange, queryItem.configId, expandAll]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'query-result h-100', css: resultStyle, role: 'listbox', "aria-label": getI18nMessage('results'), children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceComponent, { useDataSource: resultUseOutputDataSource, onDataSourceInfoChange: handleDataSourceInfoChange }), selectionError && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `padding: 0 16px; margin-top: 8px;`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_15__.ErrorMessage, { error: selectionError, onDismiss: () => setSelectionError(null) }) })), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'query-result__header d-flex align-items-center mx-4', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { "aria-label": getI18nMessage('back'), ref: backBtnRef, className: 'p-0 mr-2', size: 'sm', variant: 'text', color: 'inherit', icon: true, onClick: () => { onNavBack(); }, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_directional_arrow_left__WEBPACK_IMPORTED_MODULE_9__.ArrowLeftOutlined, { autoFlip: true }) }), (_b = currentItem.resultsLabel) !== null && _b !== void 0 ? _b : getI18nMessage('results'), ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { title: getI18nMessage('clearResult'), placement: 'bottom', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { className: 'ml-auto', icon: true, size: 'sm', variant: 'text', color: 'inherit', onClick: clearResults, "aria-label": getI18nMessage('clearResult'), children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Icon, { icon: iconMap.toolDelete }) }) }), enableDataAction && outputDS && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `width: 1px; height: 16px; background-color: var(--sys-color-divider-input);` }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.DataActionList, { widgetId: widgetId, dataSets: actionDataSets, listStyle: jimu_ui__WEBPACK_IMPORTED_MODULE_2__.DataActionListStyle.Dropdown, buttonSize: 'sm', buttonType: 'tertiary', extraActions: extraActions })] }))] }))] }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'query-result-container mt-1', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'query-result-info mb-2 px-4 d-flex align-items-center justify-content-between', role: 'alert', "aria-live": 'polite', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { children: getTipMessage() }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'd-flex align-items-center', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { title: expandAll ? getI18nMessage('collapseAll') : getI18nMessage('expandAll'), placement: 'top', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: 'sm', type: 'tertiary', icon: true, onClick: toggleExpandAll, "aria-label": expandAll ? getI18nMessage('collapseAll') : getI18nMessage('expandAll'), children: expandAll ? (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_directional_collapse_all__WEBPACK_IMPORTED_MODULE_11__.CollapseAllOutlined, {}) : (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_directional_expand_all__WEBPACK_IMPORTED_MODULE_10__.ExpandAllOutlined, {}) }) }) })] }), resultCount > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_simple_list__WEBPACK_IMPORTED_MODULE_6__.SimpleList, { widgetId: widgetId, queryItem: queryItem, outputDS: outputDS, records: filteredRecordsForList, direction: direction, onEscape: handleEscape, onSelectChange: toggleSelection, onRemove: removeRecord, expandByDefault: expandAll, itemExpandStates: itemExpandStates, removedRecordIds: removedRecordIds, onRenderDone: handleRenderDone }, 'simple'))] })] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-context.tsx":
/*!*********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-context.tsx ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTaskContext: () => (/* binding */ QueryTaskContext)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");

const QueryTaskContext = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createContext({
    resetSymbol: null
});


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-form.tsx":
/*!******************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-form.tsx ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTaskForm: () => (/* binding */ QueryTaskForm)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");
/* harmony import */ var jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-ui/basic/sql-expression-runtime */ "jimu-ui/basic/sql-expression-runtime");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _default_query_item__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../default-query-item */ "./your-extensions/widgets/query-simple/src/default-query-item.ts");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _query_task_spatial_form__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./query-task-spatial-form */ "./your-extensions/widgets/query-simple/src/runtime/query-task-spatial-form.tsx");
/* harmony import */ var _useAutoHeight__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./useAutoHeight */ "./your-extensions/widgets/query-simple/src/runtime/useAutoHeight.tsx");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/* harmony import */ var _query_task_context__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./query-task-context */ "./your-extensions/widgets/query-simple/src/runtime/query-task-context.tsx");
/* harmony import */ var jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! jimu-icons/outlined/suggested/info */ "./jimu-icons/outlined/suggested/info.tsx");
/* harmony import */ var _selection_utils__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");

/** @jsx jsx */










const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_10__.createQuerySimpleDebugLogger)();



const getFormStyle = (isAutoHeight) => {
    return (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
    flex: 1 1 auto;
    display: flex;
    flex-direction: column;
    min-height: 0;
    .form-title {
      color: var(--sys-color-surface-paper-text);
      font-weight: 500;
      font-size: 0.8125rem;
      line-height: 1.5;
      margin-top: 0 !important;
    }
    .query-form__content {
      flex: 1 1 ${isAutoHeight ? 'auto' : 'auto'};
      max-height: ${isAutoHeight ? '61.8vh' : 'none'};
      overflow: auto;
      padding-bottom: 0;
    }
    .query-form__actions {
      flex-shrink: 0;
      margin-top: 0;
      padding-top: 4px;
    }
  `;
};
function QueryTaskForm(props) {
    var _a;
    const { widgetId, configId, outputDS, spatialFilterEnabled, datasourceReady, onFormSubmit, dataActionFilter, initialInputValue, onHashParameterUsed, queryItemShortId } = props;
    const preDataActionFilter = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.usePrevious(dataActionFilter);
    const queryItem = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const widgetJson = state.appConfig.widgets[widgetId];
        return widgetJson.config.queryItems.find(item => item.configId === configId);
    });
    const currentItem = Object.assign({}, _default_query_item__WEBPACK_IMPORTED_MODULE_6__.DEFAULT_QUERY_ITEM, queryItem);
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_7__["default"]);
    const [resetSymbol, setResetSymbol] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    // Runtime zoom preference - initialized with config value, can be overridden by user
    const [runtimeZoomToSelected, setRuntimeZoomToSelected] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState((_a = queryItem === null || queryItem === void 0 ? void 0 : queryItem.zoomToSelected) !== null && _a !== void 0 ? _a : true);
    // Sync runtime zoom preference when query item changes (e.g., switching between queries)
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        setRuntimeZoomToSelected((_a = queryItem === null || queryItem === void 0 ? void 0 : queryItem.zoomToSelected) !== null && _a !== void 0 ? _a : true);
    }, [queryItem === null || queryItem === void 0 ? void 0 : queryItem.zoomToSelected, queryItem === null || queryItem === void 0 ? void 0 : queryItem.configId]);
    // const [dataSource, setDataSource] = React.useState<DataSource>(null)
    const { useAttributeFilter, useSpatialFilter, spatialFilterTypes, sqlExprObj, spatialMapWidgetIds, spatialInteractiveCreateToolTypes, spatialRelationUseDataSources, spatialIncludeRuntimeData, spatialRelations, spatialRelationEnableBuffer, spatialRelationBufferDistance, spatialRelationBufferUnit, spatialInteractiveEnableBuffer, spatialInteractiveBufferDistance, spatialInteractiveBufferUnit, attributeFilterLabel = getI18nMessage('attributeFilter'), spatialFilterLabel = getI18nMessage('spatialFilter'), attributeFilterDesc, spatialFilterDesc } = currentItem;
    const [attributeFilterSqlExprObj, setAttributeFilterSqlExprObj] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(sqlExprObj);
    const spatialFilterObjRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const spatialRelationRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(_config__WEBPACK_IMPORTED_MODULE_5__.SpatialRelation.Intersect);
    const bufferRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const applyButtonRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const isAutoHeight = (0,_useAutoHeight__WEBPACK_IMPORTED_MODULE_9__.useAutoHeight)();
    const showClauseNumber = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef((0,jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__.getShownClauseNumberByExpression)(sqlExprObj));
    const initialValueSetRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null); // Track which configId we've set the value for
    const lastValueSetRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null); // Track the last value that was set
    const hashTriggeredRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(false); // Track if query was triggered via hash parameter
    const originDS = outputDS === null || outputDS === void 0 ? void 0 : outputDS.getOriginDataSources()[0];
    /**
     * Sets the input value from URL hash parameters when:
     * 1. Datasource is ready
     * 2. We have an initialInputValue from URL hash
     * 3. We haven't already set it for this configId, OR the value has changed
     *
     * Uses both React state updates and DOM manipulation to ensure the value
     * is properly set in SqlExpressionRuntime's internal state.
     */
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        // Reset flag if configId changed (switched to different query)
        if (initialValueSetRef.current !== null && initialValueSetRef.current !== configId) {
            initialValueSetRef.current = null;
            lastValueSetRef.current = null;
            hashTriggeredRef.current = false; // Reset hash trigger flag when switching queries
        }
        // Check if value has changed for the same configId
        const valueChanged = lastValueSetRef.current !== null &&
            lastValueSetRef.current !== initialInputValue &&
            initialValueSetRef.current === configId;
        // Set the value if:
        // - We haven't set it for this configId yet, OR
        // - The value has changed for the same configId (hash parameter updated)
        const shouldSetValue = datasourceReady &&
            initialInputValue &&
            ((_a = sqlExprObj === null || sqlExprObj === void 0 ? void 0 : sqlExprObj.parts) === null || _a === void 0 ? void 0 : _a.length) > 0 &&
            (initialValueSetRef.current !== configId || valueChanged);
        if (shouldSetValue) {
            const firstPart = sqlExprObj.parts[0];
            // Check if the first part is a SINGLE clause (not a SqlClauseSet)
            if (firstPart && 'type' in firstPart && firstPart.type === 'SINGLE' && 'valueOptions' in firstPart) {
                // Update the expression object with the initial value
                const updated = sqlExprObj.setIn(['parts', '0', 'valueOptions', 'value'], initialInputValue);
                setAttributeFilterSqlExprObj(updated);
                // Update clause number for the updated expression
                showClauseNumber.current = (0,jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__.getShownClauseNumberByExpression)(updated);
                initialValueSetRef.current = configId;
                lastValueSetRef.current = initialInputValue;
                // Also set the value directly on the input element after a delay to ensure component is rendered
                // This is necessary because SqlExpressionRuntime may not sync from the expression prop alone
                const timeoutId = setTimeout(() => {
                    var _a;
                    // Find the input element within SqlExpressionRuntime
                    const formElement = ((_a = document.querySelector(`[data-widget-id="${widgetId}"]`)) === null || _a === void 0 ? void 0 : _a.closest('.query-form')) ||
                        document.querySelector('.query-form');
                    if (formElement) {
                        // Look for text input elements
                        const textInputs = formElement.querySelectorAll('input[type="text"]');
                        textInputs.forEach((input) => {
                            var _a;
                            // Update the value if input is empty OR if the value has changed (hash parameter updated)
                            const shouldUpdate = !input.value ||
                                input.value.trim() === '' ||
                                input.value !== initialInputValue;
                            if (shouldUpdate) {
                                // Focus the input first
                                input.focus();
                                // Set the value
                                input.value = initialInputValue;
                                // Create and dispatch input event with proper properties
                                const inputEvent = new Event('input', { bubbles: true, cancelable: true });
                                Object.defineProperty(inputEvent, 'target', { value: input, enumerable: true });
                                input.dispatchEvent(inputEvent);
                                // Create and dispatch change event
                                const changeEvent = new Event('change', { bubbles: true, cancelable: true });
                                Object.defineProperty(changeEvent, 'target', { value: input, enumerable: true });
                                input.dispatchEvent(changeEvent);
                                // Also try React's synthetic event approach using native value setter
                                const nativeInputValueSetter = (_a = Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype, 'value')) === null || _a === void 0 ? void 0 : _a.set;
                                if (nativeInputValueSetter) {
                                    nativeInputValueSetter.call(input, initialInputValue);
                                    const reactEvent = new Event('input', { bubbles: true });
                                    input.dispatchEvent(reactEvent);
                                }
                                // Blur to trigger any validation or state updates
                                input.blur();
                            }
                        });
                        // After setting values and blurring, verify input value is set before triggering Apply button
                        setTimeout(() => {
                            var _a;
                            if (applyButtonRef.current && !applyButtonRef.current.disabled && datasourceReady) {
                                // VERIFICATION: Ensure input value is actually set before executing query
                                // This is especially important for grouped queries where dropdowns need to be synchronized first
                                const formElement = ((_a = document.querySelector(`[data-widget-id="${widgetId}"]`)) === null || _a === void 0 ? void 0 : _a.closest('.query-form')) ||
                                    document.querySelector('.query-form');
                                if (formElement && initialInputValue) {
                                    const textInputs = formElement.querySelectorAll('input[type="text"]');
                                    let inputValueSet = false;
                                    textInputs.forEach((input) => {
                                        if (input.value === initialInputValue) {
                                            inputValueSet = true;
                                        }
                                    });
                                    if (!inputValueSet) {
                                        debugLogger.log('FORM', {
                                            event: 'input-value-not-set-retrying',
                                            expectedValue: initialInputValue,
                                            queryItemShortId,
                                            action: 'will-retry-after-delay',
                                            note: 'Input value not set, retrying to ensure synchronization'
                                        });
                                        // Retry after a short delay to allow state to sync
                                        setTimeout(() => {
                                            // Recursively call verifyAndApply if needed, but limit retries
                                            // For now, just retry once more
                                            if (applyButtonRef.current && !applyButtonRef.current.disabled && datasourceReady) {
                                                // Set hashTriggeredRef to force zoom for hash-triggered queries
                                                hashTriggeredRef.current = true;
                                                // Remove hash parameter from URL before Apply is triggered
                                                if (onHashParameterUsed && queryItemShortId) {
                                                    onHashParameterUsed(queryItemShortId);
                                                }
                                                // Auto-trigger Apply button
                                                applyButtonRef.current.click();
                                            }
                                        }, 300);
                                        return; // Exit early, will retry
                                    }
                                }
                                // Input value is set correctly, proceed with execution
                                debugLogger.log('FORM', {
                                    event: 'input-value-verified',
                                    expectedValue: initialInputValue,
                                    queryItemShortId,
                                    note: 'Input value verified, proceeding with query execution'
                                });
                                // Set hashTriggeredRef to force zoom for hash-triggered queries
                                hashTriggeredRef.current = true;
                                // Remove hash parameter from URL before Apply is triggered to prevent re-execution
                                if (onHashParameterUsed && queryItemShortId) {
                                    onHashParameterUsed(queryItemShortId);
                                }
                                // Auto-trigger Apply button to execute the query with the populated value
                                applyButtonRef.current.click();
                            }
                        }, 200); // Small delay after blur to ensure state is synced
                    }
                }, 500); // Longer delay to ensure component is fully rendered
                return () => clearTimeout(timeoutId);
            }
        }
        // The sqlExprObj.parts may change but the displaySQL is the same
        if (!sqlExprObj) {
            showClauseNumber.current = 0;
            setAttributeFilterSqlExprObj(null);
        }
        else {
            showClauseNumber.current = (0,jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__.getShownClauseNumberByExpression)(sqlExprObj);
            // Only update if we haven't set the initial value for this configId yet, or if we don't have an initial value
            if (initialValueSetRef.current !== configId || !initialInputValue) {
                setAttributeFilterSqlExprObj(sqlExprObj);
            }
        }
    }, [sqlExprObj, initialInputValue, datasourceReady, configId, widgetId, onHashParameterUsed, queryItemShortId]);
    const applyQuery = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        var _a, _b;
        // When the 'apply' button is clicked, it should clear the selection from the previous result list
        (0,_selection_utils__WEBPACK_IMPORTED_MODULE_13__.clearSelectionInDataSources)(outputDS);
        if (outputDS) {
            const originDs = outputDS.getOriginDataSources()[0];
            if (originDs) {
                const dataViewConfig = originDs.getDataViewConfig();
                const maximum = dataViewConfig === null || dataViewConfig === void 0 ? void 0 : dataViewConfig.maximum;
                if (maximum != null && maximum > 0) {
                    jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().updateDataSourceByDataSourceJson(outputDS, outputDS.getDataSourceJson().setIn(['query', 'maximum'], maximum));
                }
            }
        }
        // Force zoom for hash-triggered queries, otherwise use runtime preference
        const zoomToUse = hashTriggeredRef.current ? true : runtimeZoomToSelected;
        let rel = spatialRelationRef.current;
        if (((_a = spatialFilterObjRef.current) === null || _a === void 0 ? void 0 : _a.geometry) && rel == null) {
            rel = _config__WEBPACK_IMPORTED_MODULE_5__.SpatialRelation.Intersect;
        }
        if (Array.isArray((_b = spatialFilterObjRef.current) === null || _b === void 0 ? void 0 : _b.geometry)) {
            if (spatialFilterObjRef.current.geometry.length === 1) {
                onFormSubmit(attributeFilterSqlExprObj, Object.assign(Object.assign({}, spatialFilterObjRef.current), { geometry: spatialFilterObjRef.current.geometry[0], relation: rel, buffer: bufferRef.current }), zoomToUse);
            }
            else {
                (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_3__.loadArcGISJSAPIModules)([
                    'esri/geometry/operators/unionOperator'
                ]).then(modules => {
                    const operator = modules[0];
                    const geometry = operator.executeMany(spatialFilterObjRef.current.geometry);
                    onFormSubmit(attributeFilterSqlExprObj, Object.assign(Object.assign({}, spatialFilterObjRef.current), { geometry, relation: rel, buffer: bufferRef.current }), zoomToUse);
                });
            }
        }
        else {
            onFormSubmit(attributeFilterSqlExprObj, Object.assign(Object.assign({}, spatialFilterObjRef.current), { relation: rel, buffer: bufferRef.current }), zoomToUse);
        }
        // Reset hashTriggeredRef after use
        hashTriggeredRef.current = false;
    }, [onFormSubmit, outputDS, attributeFilterSqlExprObj, runtimeZoomToSelected]);
    const handleKeyDown = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((event) => {
        if (event.key === 'Enter' && datasourceReady) {
            event.preventDefault();
            // Find the active input field
            const activeElement = document.activeElement;
            if (activeElement && activeElement.tagName === 'INPUT' && activeElement.type === 'text') {
                // Force blur to trigger SqlExpressionRuntime's input processing
                activeElement.blur();
                // Wait for blur processing, then click the Apply button
                // This uses the exact same code path as clicking the button manually
                setTimeout(() => {
                    if (applyButtonRef.current && !applyButtonRef.current.disabled) {
                        applyButtonRef.current.click();
                    }
                    else {
                        applyQuery();
                    }
                }, 200);
            }
            else {
                // Not in an input field, safe to apply immediately
                if (applyButtonRef.current && !applyButtonRef.current.disabled) {
                    applyButtonRef.current.click();
                }
                else {
                    applyQuery();
                }
            }
        }
    }, [datasourceReady, applyQuery]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (!dataActionFilter)
            return;
        if (dataActionFilter.where !== (preDataActionFilter === null || preDataActionFilter === void 0 ? void 0 : preDataActionFilter.where)) {
            applyQuery();
        }
    }, [dataActionFilter, preDataActionFilter === null || preDataActionFilter === void 0 ? void 0 : preDataActionFilter.where, applyQuery]);
    const resetQuery = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        // 1. reset attribute filter
        showClauseNumber.current = (0,jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__.getShownClauseNumberByExpression)(sqlExprObj);
        setAttributeFilterSqlExprObj(sqlExprObj);
        // 2. reset spatial filter
        setResetSymbol(Symbol());
    }, [sqlExprObj]);
    const handleSqlExprObjChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((sqlObj) => {
        showClauseNumber.current = (0,jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__.getShownClauseNumberByExpression)(sqlObj);
        setAttributeFilterSqlExprObj(sqlObj);
    }, []);
    const handleSpatialFilterChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((filter) => {
        spatialFilterObjRef.current = filter;
    }, []);
    const handleRelationChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((rel) => {
        spatialRelationRef.current = rel;
    }, []);
    const handleBufferChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((distance, unit) => {
        bufferRef.current = { distance, unit };
    }, []);
    const showAttributeFilter = useAttributeFilter && sqlExprObj != null;
    const showSpatialFilter = spatialFilterEnabled && useSpatialFilter && (spatialFilterTypes.length > 0 || spatialIncludeRuntimeData || (spatialRelationUseDataSources === null || spatialRelationUseDataSources === void 0 ? void 0 : spatialRelationUseDataSources.length) > 0);
    // Debug logging for form rendering
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        debugLogger.log('FORM', {
            event: 'form-render-check',
            configId,
            datasourceReady,
            useAttributeFilter,
            sqlExprObj: sqlExprObj ? 'exists' : 'null',
            sqlExprObjParts: ((_a = sqlExprObj === null || sqlExprObj === void 0 ? void 0 : sqlExprObj.parts) === null || _a === void 0 ? void 0 : _a.length) || 0,
            showAttributeFilter,
            originDS: originDS ? 'exists' : 'null',
            originDSId: (originDS === null || originDS === void 0 ? void 0 : originDS.id) || 'none',
            showSpatialFilter,
            isAutoHeight,
            outputDS: outputDS ? 'exists' : 'null'
        });
    }, [configId, datasourceReady, useAttributeFilter, sqlExprObj, showAttributeFilter, originDS, showSpatialFilter, isAutoHeight, outputDS]);
    // Log when form content should render
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        if (showAttributeFilter && originDS) {
            debugLogger.log('FORM', {
                event: 'attribute-filter-ready',
                configId,
                originDSId: originDS.id,
                sqlExprObjParts: ((_a = sqlExprObj === null || sqlExprObj === void 0 ? void 0 : sqlExprObj.parts) === null || _a === void 0 ? void 0 : _a.length) || 0,
                attributeFilterLabel,
                note: 'Input field should be visible'
            });
        }
        else {
            debugLogger.log('FORM', {
                event: 'attribute-filter-not-ready',
                configId,
                showAttributeFilter,
                originDS: originDS ? 'exists' : 'null',
                useAttributeFilter,
                sqlExprObj: sqlExprObj ? 'exists' : 'null',
                reason: !showAttributeFilter ? 'showAttributeFilter is false' : 'originDS is null'
            });
        }
    }, [showAttributeFilter, originDS, configId, sqlExprObj, useAttributeFilter, attributeFilterLabel]);
    // Check DOM visibility after render
    const formContentRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        if (formContentRef.current) {
            const computedStyle = window.getComputedStyle(formContentRef.current);
            const rect = formContentRef.current.getBoundingClientRect();
            debugLogger.log('FORM', {
                event: 'form-content-dom-check',
                configId,
                exists: !!formContentRef.current,
                display: computedStyle.display,
                visibility: computedStyle.visibility,
                opacity: computedStyle.opacity,
                height: computedStyle.height,
                maxHeight: computedStyle.maxHeight,
                flex: computedStyle.flex,
                flexBasis: computedStyle.flexBasis,
                rectHeight: rect.height,
                rectWidth: rect.width,
                isVisible: rect.height > 0 && rect.width > 0,
                parentHeight: ((_a = formContentRef.current.parentElement) === null || _a === void 0 ? void 0 : _a.clientHeight) || 0
            });
        }
    }, [configId, showAttributeFilter, originDS]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_context__WEBPACK_IMPORTED_MODULE_11__.QueryTaskContext.Provider, { value: { resetSymbol }, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'query-form', css: getFormStyle(isAutoHeight), children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { ref: formContentRef, className: 'query-form__content', onKeyDown: handleKeyDown, children: [showAttributeFilter && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { role: 'group', className: 'px-4', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `padding-top: 2px;`, "aria-label": attributeFilterLabel, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('form-title d-flex align-items-center', { 'd-none': !attributeFilterLabel && !attributeFilterDesc }), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                margin-top: 0;
                margin-bottom: 4px;
              `, children: [attributeFilterLabel && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'mr-2 title2', children: attributeFilterLabel }), attributeFilterDesc && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { placement: 'bottom', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `white-space: pre-line;`, title: attributeFilterDesc, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: 'sm', icon: true, type: 'tertiary', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_12__.InfoOutlined, { color: 'var(--sys-color-primary-main)', size: 's' }) }) }))] }), originDS && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `margin: -10px 0px;`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__.SqlExpressionRuntime, { widgetId: widgetId, dataSource: originDS, expression: attributeFilterSqlExprObj, onChange: handleSqlExprObjChange }, `${configId}-${initialInputValue || 'none'}`) }))] })), showAttributeFilter && showSpatialFilter && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("hr", { className: 'm-4', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `border: none; height: 1px; background-color: var(--sys-color-divider-secondary);` })), showSpatialFilter && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_spatial_form__WEBPACK_IMPORTED_MODULE_8__.QueryTaskSpatialForm, { widgetId: widgetId, label: spatialFilterLabel, desc: spatialFilterDesc, filterTypes: spatialFilterTypes, mapWidgetIds: spatialMapWidgetIds, createToolTypes: spatialInteractiveCreateToolTypes, onFilterChange: handleSpatialFilterChange, onRelationChange: handleRelationChange, onBufferChange: handleBufferChange, spatialRelations: spatialRelations, dsEnableBuffer: spatialRelationEnableBuffer, dsBufferDistance: spatialRelationBufferDistance, dsBufferUnit: spatialRelationBufferUnit, drawEnableBuffer: spatialInteractiveEnableBuffer, drawBufferDistance: spatialInteractiveBufferDistance, drawBufferUnit: spatialInteractiveBufferUnit, useDataSources: spatialRelationUseDataSources, useRuntimeData: spatialIncludeRuntimeData }))] }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'query-form__actions px-4 d-flex align-items-center', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Checkbox, { checked: runtimeZoomToSelected, onChange: (_, checked) => setRuntimeZoomToSelected(checked), className: 'mr-2' }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { className: 'mr-auto', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `font-size: 0.875rem; color: var(--sys-color-text-primary);`, children: getI18nMessage('zoomToSelected') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { ref: applyButtonRef, color: 'primary', className: 'ml-auto', disabled: !datasourceReady, onClick: applyQuery, children: getI18nMessage('apply') }), (showClauseNumber.current > 0 || showSpatialFilter) && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { className: 'ml-2', onClick: resetQuery, children: getI18nMessage('reset') }))] })] }) }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-label.tsx":
/*!*******************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-label.tsx ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTaskLabel: () => (/* binding */ QueryTaskLabel)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");

/** @jsx jsx */


const textStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
  font-weight: 500;
  font-size: 0.875rem;
`;
function QueryTaskLabel(props) {
    const { icon, name } = props;
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'd-flex align-items-center text-truncate', css: textStyle, children: [icon && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Icon, { className: 'query-task-icon mr-2', icon: icon.svg }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'text-truncate', title: name, children: name })] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-list-inline.tsx":
/*!*************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-list-inline.tsx ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TaskListInline: () => (/* binding */ TaskListInline)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _query_task__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./query-task */ "./your-extensions/widgets/query-simple/src/runtime/query-task.tsx");
/* harmony import */ var _query_task_list__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./query-task-list */ "./your-extensions/widgets/query-simple/src/runtime/query-task-list.tsx");
/* harmony import */ var _query_task_list_popper_wrapper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./query-task-list-popper-wrapper */ "./your-extensions/widgets/query-simple/src/runtime/query-task-list-popper-wrapper.tsx");
/* harmony import */ var _widget_config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./widget-config */ "./your-extensions/widgets/query-simple/src/runtime/widget-config.ts");
/* harmony import */ var _default_query_item__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../default-query-item */ "./your-extensions/widgets/query-simple/src/default-query-item.ts");

/** @jsx jsx */






const { iconMap } = (0,_widget_config__WEBPACK_IMPORTED_MODULE_5__.getWidgetRuntimeDataMap)();
const SPACE = 8;
const style = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
  > div {
    margin-right: 8px;
  }
`;
// show task label and an arrow to the task content
function TaskListInline(props) {
    const { queryItems, widgetId, minSize, defaultSize, defaultPageSize, widgetLabel, wrap = false } = props;
    const containerRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(undefined);
    const containerWidthRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(0);
    const contentWidthRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef({});
    const [numOfExpanded, setNumOfExpanded] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(queryItems.length);
    const [openedPopper, setOpenedPopper] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(-1);
    const resizeObserverRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const adjustContent = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        let total = 0;
        for (let i = 0; i < numOfExpanded; i++) {
            const item = queryItems[i];
            const itemWidth = contentWidthRef.current[item.configId];
            if (itemWidth > 0) {
                total += itemWidth + SPACE;
                if (total >= containerWidthRef.current && numOfExpanded !== i) {
                    setNumOfExpanded(i);
                    return;
                }
            }
            else {
                return; // content width not ready
            }
        }
        setNumOfExpanded(queryItems.length);
    }, [numOfExpanded, queryItems]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (resizeObserverRef.current) {
            resizeObserverRef.current.disconnect();
        }
        // bind with the new event handler
        resizeObserverRef.current = new ResizeObserver(jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.throttle((entries) => {
            const width = Math.round(entries[0].contentRect.width);
            if (containerWidthRef.current !== width) {
                containerWidthRef.current = width;
                adjustContent();
            }
        }, 200));
        resizeObserverRef.current.observe(containerRef.current);
        return () => {
            resizeObserverRef.current.disconnect();
        };
    }, [adjustContent]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        var _a;
        containerWidthRef.current = (_a = containerRef.current) === null || _a === void 0 ? void 0 : _a.clientWidth;
        adjustContent();
    });
    const handleItemWidthChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((index, width) => {
        const queryItem = queryItems[index];
        if (contentWidthRef.current[queryItem.configId] !== width) {
            contentWidthRef.current[queryItem.configId] = width;
            adjustContent();
        }
    }, [queryItems, adjustContent]);
    const handlePopperOpenedChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((index, isOpen) => {
        if (isOpen) {
            setOpenedPopper(index);
        }
        else if (index === openedPopper) {
            // current popper is closed
            setOpenedPopper(-1);
        }
    }, [openedPopper]);
    const [expandedArray, nonExpandedArray] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        const expandedArray = [];
        const nonExpandedArray = [];
        for (let i = 0; i < queryItems.length; i++) {
            if (i < numOfExpanded) {
                expandedArray.push(queryItems[i]);
            }
            else {
                nonExpandedArray.push(queryItems[i]);
            }
        }
        return [expandedArray, nonExpandedArray];
    }, [queryItems, numOfExpanded]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { ref: containerRef, css: style, className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('runtime-query__query-list h-100 d-flex', { 'flex-wrap': wrap, 'align-content-start': wrap }), children: [expandedArray.map((queryItem, index) => {
                var _a;
                const currentItem = Object.assign({}, _default_query_item__WEBPACK_IMPORTED_MODULE_6__.DEFAULT_QUERY_ITEM, queryItem);
                return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list_popper_wrapper__WEBPACK_IMPORTED_MODULE_4__.TaskListPopperWrapper, { id: index, icon: currentItem.icon, buttonType: 'default', label: currentItem.displayLabel ? currentItem.name : undefined, popperTitle: currentItem.name, onWidthChange: handleItemWidthChange, minSize: minSize, defaultSize: defaultSize, onOpenedChange: handlePopperOpenedChange, forceClose: openedPopper >= 0 && openedPopper !== index, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task__WEBPACK_IMPORTED_MODULE_2__.QueryTask, { widgetId: widgetId, index: index, total: 1, isInPopper: true, queryItem: currentItem, wrappedInPopper: true, className: 'pb-4', defaultPageSize: defaultPageSize, initialInputValue: currentItem.shortId === ((_a = props.initialQueryValue) === null || _a === void 0 ? void 0 : _a.shortId) ? props.initialQueryValue.value : undefined, onHashParameterUsed: props.onHashParameterUsed, queryItemShortId: currentItem.shortId }) }, currentItem.configId);
            }), nonExpandedArray.length > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list_popper_wrapper__WEBPACK_IMPORTED_MODULE_4__.TaskListPopperWrapper, { id: expandedArray.length + 1, icon: iconMap.iconMore, minSize: minSize, buttonType: 'default', popperTitle: widgetLabel, defaultSize: defaultSize, onOpenedChange: handlePopperOpenedChange, forceClose: openedPopper >= 0 && openedPopper !== expandedArray.length + 1, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list__WEBPACK_IMPORTED_MODULE_3__.QueryTaskList, { widgetId: widgetId, isInPopper: true, defaultPageSize: defaultPageSize, queryItems: nonExpandedArray, className: 'pb-4', initialQueryValue: props.initialQueryValue, onHashParameterUsed: props.onHashParameterUsed }) }))] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-list-popper-wrapper.tsx":
/*!*********************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-list-popper-wrapper.tsx ***!
  \*********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TaskListPopperWrapper: () => (/* binding */ TaskListPopperWrapper)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _version__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../version */ "./your-extensions/widgets/query-simple/src/version.ts");

/** @jsx jsx */



const shiftOptions = { padding: 1 };
function TaskListPopperWrapper(props) {
    const { id, icon, label, forceClose, onOpenedChange, popperTitle, minSize, defaultSize, onWidthChange, buttonType = 'tertiary', children } = props;
    const iconRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(undefined);
    const widthRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(0);
    const [isOpen, setIsOpen] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(false);
    const [popperVersion, setPopperVersion] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(0);
    const isMobile = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useCheckSmallBrowserSizeMode();
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (forceClose) {
            setIsOpen(false);
        }
    }, [forceClose]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        if (typeof onWidthChange === 'function') {
            widthRef.current = Math.round(iconRef.current.clientWidth);
            onWidthChange(id, widthRef.current);
            const resizeObserver = new ResizeObserver(jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.throttle((entries) => {
                const width = Math.round(entries[0].contentRect.width);
                if (widthRef.current !== width) {
                    widthRef.current = width;
                    onWidthChange(id, width);
                }
            }, 200));
            resizeObserver.observe(iconRef.current);
            return () => {
                resizeObserver.disconnect();
            };
        }
    });
    const togglePopper = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        if (typeof onOpenedChange === 'function') {
            onOpenedChange(id, !isOpen);
        }
        setIsOpen(!isOpen);
        setPopperVersion(popperVersion + 1);
        if (isOpen) {
            setTimeout(() => {
                if ((0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.isKeyboardMode)()) {
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.focusElementInKeyboardMode)(iconRef.current);
                }
            }, 200);
        }
    }, [id, isOpen, popperVersion, onOpenedChange]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'runtime-query__widget-popper', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { title: label, "aria-label": label, icon: true, size: 'sm', variant: buttonType === 'tertiary' ? 'text' : undefined, color: buttonType === 'tertiary' ? 'inherit' : undefined, type: buttonType === 'tertiary' ? undefined : buttonType, ref: iconRef, onClick: togglePopper, children: [icon && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Icon, Object.assign({ size: 16 }, (typeof icon === 'string' ? { icon } : { icon: icon.svg, color: buttonType === 'tertiary' ? undefined : icon.properties.color }))), label && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            word-break: break-word;
            word-wrap: break-word;
            line-height: 1.2;
          `, className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)({ 'ml-2': icon != null }), children: label })] }), isMobile
                ? (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.MobilePanel, { open: isOpen, title: popperTitle, onClose: togglePopper, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              display: flex;
              flex-direction: column;
              height: 100%;
            `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                flex: 1;
                overflow: auto;
                padding-bottom: 1rem; /* Scoped padding to space content from footer */
              `, children: children }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                padding: 4px 12px;
                border-top: 1px solid var(--sys-color-divider-secondary);
                background-color: var(--sys-color-surface-paper);
                flex-shrink: 0;
                text-align: center;
              `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                  font-size: 0.75rem;
                  color: var(--sys-color-text-tertiary);
                  font-weight: 400;
                  letter-spacing: 0.025em;
                  display: inline-flex;
                  align-items: center;
                  gap: 4px;
                `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("svg", { width: "14", height: "14", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                      flex-shrink: 0;
                      opacity: 0.6;
                    `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("polyline", { points: "16 18 22 12 16 6" }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("polyline", { points: "8 6 2 12 8 18" })] }), "QuerySimple by MapSimple", (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                    margin-left: 6px;
                    opacity: 0.5;
                    font-size: 0.7rem;
                  `, children: ["v", _version__WEBPACK_IMPORTED_MODULE_3__.WIDGET_VERSION] })] }) })] }) })
                : (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.FloatingPanel, { className: 'ui-unit-popper ui-unit-popper_k-arrangement-icon flex-grow-1', headerClassName: jimu_ui__WEBPACK_IMPORTED_MODULE_2__.FOCUSABLE_CONTAINER_CLASS, open: isOpen, onHeaderClose: togglePopper, toggle: togglePopper, headerTitle: popperTitle, minSize: minSize, defaultSize: defaultSize, dragBounds: 'body', version: popperVersion, reference: iconRef, placement: 'bottom-start', shiftOptions: shiftOptions, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              display: flex;
              flex-direction: column;
              height: 100%;
            `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                flex: 1;
                overflow: auto;
                padding-bottom: 1rem; /* Scoped padding to space content from footer */
              `, children: children }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                padding: 4px 12px;
                border-top: 1px solid var(--sys-color-divider-secondary);
                background-color: var(--sys-color-surface-paper);
                flex-shrink: 0;
                text-align: center;
              `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                  font-size: 0.75rem;
                  color: var(--sys-color-text-tertiary);
                  font-weight: 400;
                  letter-spacing: 0.025em;
                  display: inline-flex;
                  align-items: center;
                  gap: 4px;
                `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("svg", { width: "14", height: "14", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                      flex-shrink: 0;
                      opacity: 0.6;
                    `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("polyline", { points: "16 18 22 12 16 6" }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("polyline", { points: "8 6 2 12 8 18" })] }), "QuerySimple by MapSimple", (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                    margin-left: 6px;
                    opacity: 0.5;
                    font-size: 0.7rem;
                  `, children: ["v", _version__WEBPACK_IMPORTED_MODULE_3__.WIDGET_VERSION] })] }) })] }) })] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-list.tsx":
/*!******************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-list.tsx ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTaskList: () => (/* binding */ QueryTaskList)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _query_task__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./query-task */ "./your-extensions/widgets/query-simple/src/runtime/query-task.tsx");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");

/** @jsx jsx */





const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_5__.createQuerySimpleDebugLogger)();
// Helper function to sort queries by display order (lower numbers appear first)
// Queries without order maintain their original relative positions
function sortQueryItemsByOrder(queryItems) {
    // Handle null/undefined/empty cases
    if (!queryItems || queryItems.length === 0) {
        return queryItems || (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)([]);
    }
    // Safely convert to regular array for sorting
    // Handle both ImmutableArray (has toArray method) and regular arrays
    const itemsArray = (queryItems && typeof queryItems.toArray === 'function')
        ? queryItems.toArray()
        : (Array.isArray(queryItems) ? queryItems : []);
    const itemsWithIndex = itemsArray.map((item, index) => ({ item, originalIndex: index }));
    itemsWithIndex.sort((a, b) => {
        var _a, _b;
        const orderA = (_a = a.item.order) !== null && _a !== void 0 ? _a : Infinity;
        const orderB = (_b = b.item.order) !== null && _b !== void 0 ? _b : Infinity;
        if (orderA !== orderB) {
            return orderA - orderB;
        }
        // If order is equal (both Infinity or same number), maintain original index order
        return a.originalIndex - b.originalIndex;
    });
    return (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)(itemsWithIndex.map(({ item }) => item));
}
// Helper function to group queries by groupId
const groupQueries = (queryItems) => {
    const groups = {};
    const ungrouped = [];
    const groupOrder = [];
    const groupIndexMap = {};
    // First pass: collect items in regular arrays
    const groupItemsMap = {};
    queryItems.forEach((item, index) => {
        if (item.groupId) {
            if (!groupItemsMap[item.groupId]) {
                groupItemsMap[item.groupId] = [];
                groups[item.groupId] = {
                    items: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)([]),
                    displayName: item.groupDisplayName || item.name || `Group ${item.groupId}`,
                    icon: item.icon
                };
                groupIndexMap[item.groupId] = index;
                groupOrder.push(item.groupId);
            }
            groupItemsMap[item.groupId].push(item);
        }
        else {
            ungrouped.push({ item, index });
        }
    });
    // Second pass: convert regular arrays to ImmutableArrays
    Object.keys(groupItemsMap).forEach(groupId => {
        groups[groupId].items = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)(groupItemsMap[groupId]);
    });
    return { groups, ungrouped, groupOrder };
};
// Helper function to get display name for query in dropdown
// Uses: searchAlias || jimuFieldName || item.name || fallback
const getQueryDisplayName = (item) => {
    var _a, _b, _c;
    // First priority: searchAlias if set
    if (item.searchAlias) {
        return item.searchAlias;
    }
    // Second priority: field name from SQL expression
    const jimuFieldName = (_c = (_b = (_a = item.sqlExprObj) === null || _a === void 0 ? void 0 : _a.parts) === null || _b === void 0 ? void 0 : _b[0]) === null || _c === void 0 ? void 0 : _c.jimuFieldName;
    if (jimuFieldName) {
        return jimuFieldName;
    }
    // Third priority: item name
    if (item.name) {
        return item.name;
    }
    // Fallback
    return 'Query';
};
function QueryTaskList(props) {
    const { queryItems, widgetId, defaultPageSize, isInPopper = false, className = '', initialQueryValue, onHashParameterUsed, resultsMode, onResultsModeChange, accumulatedRecords, onAccumulatedRecordsChange, useGraphicsLayerForHighlight, graphicsLayer, mapView, onInitializeGraphicsLayer, onClearGraphicsLayer, activeTab, onTabChange } = props;
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_4__["default"]);
    // Sort queries by display order before grouping
    // Handle case where queryItems might be undefined/null or not an ImmutableArray
    const sortedQueryItems = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        if (!queryItems) {
            return (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)([]);
        }
        return sortQueryItemsByOrder(queryItems);
    }, [queryItems]);
    const { groups, ungrouped, groupOrder } = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => groupQueries(sortedQueryItems), [sortedQueryItems]);
    // State to track the current URL hash and query string
    const [urlParams, setUrlParams] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(() => ({
        hash: window.location.hash.substring(1),
        query: window.location.search.substring(1)
    }));
    // Listen for hashchange events to update our local state
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        const handleUrlChange = () => {
            debugLogger.log('HASH', {
                event: 'url-change-detected-in-task-list',
                newHash: window.location.hash,
                newQuery: window.location.search,
                timestamp: Date.now()
            });
            setUrlParams({
                hash: window.location.hash.substring(1),
                query: window.location.search.substring(1)
            });
        };
        window.addEventListener('hashchange', handleUrlChange);
        // Also listen for popstate in case query parameters change without hash change
        window.addEventListener('popstate', handleUrlChange);
        return () => {
            window.removeEventListener('hashchange', handleUrlChange);
            window.removeEventListener('popstate', handleUrlChange);
        };
    }, []);
    // Determine if we have an initial query value from the URL hash or query string
    const initialQueryValueFromUrl = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        const { hash, query } = urlParams;
        const hashParams = new URLSearchParams(hash);
        const queryParams = new URLSearchParams(query);
        const allQueryItems = [...ungrouped.map(u => u.item), ...Object.values(groups).flatMap(g => g.items)];
        for (const item of allQueryItems) {
            if (item.shortId) {
                if (hashParams.has(item.shortId)) {
                    return {
                        shortId: item.shortId,
                        value: hashParams.get(item.shortId)
                    };
                }
                if (queryParams.has(item.shortId)) {
                    return {
                        shortId: item.shortId,
                        value: queryParams.get(item.shortId)
                    };
                }
            }
        }
        return null;
    }, [ungrouped, groups, urlParams]);
    // Use the prop initialQueryValue if provided, otherwise fallback to our own URL parsing
    const effectiveInitialQueryValue = initialQueryValue || initialQueryValueFromUrl;
    // Find the query item matching the shortId from URL hash
    const matchingQueryIndex = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        const shortId = effectiveInitialQueryValue === null || effectiveInitialQueryValue === void 0 ? void 0 : effectiveInitialQueryValue.shortId;
        if (!shortId) {
            return -1;
        }
        return sortedQueryItems.findIndex(item => item.shortId === shortId);
    }, [sortedQueryItems, effectiveInitialQueryValue]);
    // Determine which group/ungrouped index the matching query is at
    const getQuerySelection = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        var _a;
        if (matchingQueryIndex < 0)
            return null;
        const item = sortedQueryItems[matchingQueryIndex];
        if (item.groupId) {
            const groupItems = ((_a = groups[item.groupId]) === null || _a === void 0 ? void 0 : _a.items) || (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)([]);
            const indexInGroup = groupItems.findIndex(q => q.configId === item.configId);
            debugLogger.log('GROUP', {
                event: 'hash-query-found-in-group',
                groupId: item.groupId,
                indexInGroup: indexInGroup >= 0 ? indexInGroup : 0,
                queryItemConfigId: item.configId,
                queryItemShortId: item.shortId
            });
            return { type: 'group', groupId: item.groupId, index: indexInGroup >= 0 ? indexInGroup : 0 };
        }
        else {
            // Ungrouped query
            const indexInUngrouped = ungrouped.findIndex(({ item: q }) => q.configId === item.configId);
            debugLogger.log('GROUP', {
                event: 'hash-query-found-ungrouped',
                indexInUngrouped: indexInUngrouped >= 0 ? indexInUngrouped : 0,
                queryItemConfigId: item.configId,
                queryItemShortId: item.shortId
            });
            return { type: 'ungrouped', index: indexInUngrouped >= 0 ? indexInUngrouped : 0 };
        }
    }, [matchingQueryIndex, sortedQueryItems, groups, ungrouped]);
    // Helper to determine default selection based on display order
    const getDefaultSelection = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        var _a, _b, _c, _d;
        if (getQuerySelection) {
            return getQuerySelection;
        }
        // No hash parameter - determine default based on display order
        // Compare first ungrouped query vs first query in first group
        const firstUngroupedOrder = ungrouped.length > 0 ? ((_a = ungrouped[0].item.order) !== null && _a !== void 0 ? _a : Infinity) : Infinity;
        const firstGroupOrder = groupOrder.length > 0 && ((_c = (_b = groups[groupOrder[0]]) === null || _b === void 0 ? void 0 : _b.items) === null || _c === void 0 ? void 0 : _c.length) > 0
            ? ((_d = groups[groupOrder[0]].items[0].order) !== null && _d !== void 0 ? _d : Infinity)
            : Infinity;
        // Select whichever has lower order (or first if equal)
        if (firstUngroupedOrder < firstGroupOrder) {
            return { type: 'ungrouped', index: 0 };
        }
        else if (firstGroupOrder < Infinity || groupOrder.length > 0) {
            return { type: 'group', groupId: groupOrder[0], index: 0 };
        }
        else if (ungrouped.length > 0) {
            return { type: 'ungrouped', index: 0 };
        }
        return null;
    }, [getQuerySelection, ungrouped, groups, groupOrder]);
    // Track selected query - initialize with matching query if found from URL hash, or default based on display order
    const [selectedGroupId, setSelectedGroupId] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(() => {
        if ((getDefaultSelection === null || getDefaultSelection === void 0 ? void 0 : getDefaultSelection.type) === 'group') {
            debugLogger.log('GROUP', {
                event: 'initial-group-selection',
                groupId: getDefaultSelection.groupId,
                note: getQuerySelection ? 'Hash-matched' : 'Default based on display order'
            });
            return getDefaultSelection.groupId;
        }
        return null;
    });
    const [selectedGroupQueryIndex, setSelectedGroupQueryIndex] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(() => {
        if ((getDefaultSelection === null || getDefaultSelection === void 0 ? void 0 : getDefaultSelection.type) === 'group') {
            debugLogger.log('GROUP', {
                event: 'initial-group-query-index',
                index: getDefaultSelection.index,
                note: getQuerySelection ? 'Hash-matched' : 'Default based on display order'
            });
            return getDefaultSelection.index;
        }
        return 0;
    });
    const [selectedUngroupedIndex, setSelectedUngroupedIndex] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(() => {
        if ((getDefaultSelection === null || getDefaultSelection === void 0 ? void 0 : getDefaultSelection.type) === 'ungrouped') {
            debugLogger.log('GROUP', {
                event: 'initial-ungrouped-index',
                index: getDefaultSelection.index,
                note: getQuerySelection ? 'Hash-matched' : 'Default based on display order'
            });
            return getDefaultSelection.index;
        }
        return 0;
    });
    // Update selection when initialQueryValue changes (e.g., when URL hash is detected)
    // We only want to update based on the hash if one is PRESENT.
    // If the hash is removed (initialQueryValue becomes null), we DON'T want to reset to default.
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (getQuerySelection) {
            // Hash parameter matched - use that selection and STAY THERE
            if (getQuerySelection.type === 'group') {
                debugLogger.log('GROUP', {
                    event: 'selection-changed-to-group-from-hash',
                    groupId: getQuerySelection.groupId,
                    index: getQuerySelection.index,
                    note: 'Sticky selection from hash parameter'
                });
                setSelectedGroupId(getQuerySelection.groupId);
                setSelectedGroupQueryIndex(getQuerySelection.index);
            }
            else {
                debugLogger.log('GROUP', {
                    event: 'selection-changed-to-ungrouped-from-hash',
                    index: getQuerySelection.index,
                    note: 'Sticky selection from hash parameter'
                });
                setSelectedGroupId(null);
                setSelectedUngroupedIndex(getQuerySelection.index);
            }
        }
    }, [getQuerySelection]);
    // Get the currently selected query item
    const getSelectedQueryItem = () => {
        // PRIORITY 1: Use current state selection
        // The state is initialized with the hash match (if present) or default order,
        // and updated via useEffect if the hash changes later.
        debugLogger.log('GROUP', {
            event: 'getSelectedQueryItem-state-selection',
            selectedGroupId,
            hasSelectedGroup: selectedGroupId && groups[selectedGroupId],
            selectedGroupQueryIndex,
            selectedUngroupedIndex,
            ungroupedLength: ungrouped.length,
            groupOrderLength: groupOrder.length,
            note: 'Using state selection (hash-aware)'
        });
        // If a group is selected, get query from that group
        if (selectedGroupId && groups[selectedGroupId]) {
            const groupItems = groups[selectedGroupId].items;
            if (groupItems.length > 0) {
                const idx = selectedGroupQueryIndex < groupItems.length ? selectedGroupQueryIndex : 0;
                const selectedItem = groupItems[idx];
                debugLogger.log('GROUP', {
                    event: 'selected-query-from-group',
                    groupId: selectedGroupId,
                    groupQueryIndex: idx,
                    queryItemConfigId: selectedItem.configId,
                    queryDisplayName: getQueryDisplayName(selectedItem)
                });
                return selectedItem;
            }
        }
        // Otherwise, get from ungrouped queries
        if (ungrouped.length > 0) {
            const idx = selectedUngroupedIndex < ungrouped.length ? selectedUngroupedIndex : 0;
            const selectedItem = ungrouped[idx].item;
            debugLogger.log('GROUP', {
                event: 'selected-query-from-ungrouped',
                ungroupedIndex: idx,
                queryItemConfigId: selectedItem.configId,
                queryDisplayName: getQueryDisplayName(selectedItem)
            });
            return selectedItem;
        }
        // Fallback to first query item
        debugLogger.log('GROUP', {
            event: 'selected-query-fallback',
            note: 'No groups or ungrouped queries, using first item'
        });
        return sortedQueryItems[0];
    };
    const selectedQueryItem = getSelectedQueryItem();
    const selectedQueryRealIndex = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return sortedQueryItems.findIndex(q => q.configId === selectedQueryItem.configId);
    }, [sortedQueryItems, selectedQueryItem]);
    // If only one query total, don't show dropdown
    const showDropdown = sortedQueryItems.length > 1 || groupOrder.length > 0;
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: `runtime-query__query-list h-100 ${className}`, css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
      display: flex;
      flex-direction: column;
      .query-selector {
        padding: 16px;
        border-bottom: 1px solid var(--sys-color-divider-secondary);
        display: flex;
        flex-direction: column;
        gap: 8px;
      }
      .query-selector-label {
        font-size: 0.875rem;
        font-weight: 500;
        color: var(--sys-color-text-primary);
        margin-bottom: 4px;
      }
      .query-selector select {
        width: 100%;
      }
      .query-task-container {
        flex: 1;
        overflow: auto;
      }
    `, children: selectedQueryItem && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: `query-task-container ${isInPopper ? jimu_ui__WEBPACK_IMPORTED_MODULE_3__.FOCUSABLE_CONTAINER_CLASS : ''}`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task__WEBPACK_IMPORTED_MODULE_2__.QueryTask, { widgetId: widgetId, index: selectedQueryRealIndex >= 0 ? selectedQueryRealIndex : 0, total: sortedQueryItems.length, queryItem: selectedQueryItem, isInPopper: isInPopper, initialInputValue: selectedQueryItem.shortId === (effectiveInitialQueryValue === null || effectiveInitialQueryValue === void 0 ? void 0 : effectiveInitialQueryValue.shortId) ? effectiveInitialQueryValue === null || effectiveInitialQueryValue === void 0 ? void 0 : effectiveInitialQueryValue.value : undefined, onHashParameterUsed: onHashParameterUsed, queryItems: sortedQueryItems, selectedQueryIndex: selectedUngroupedIndex, onQueryChange: (index) => setSelectedUngroupedIndex(index), 
                // Grouping props
                groups: groups, ungrouped: ungrouped, 
                // Graphics layer props
                useGraphicsLayerForHighlight: useGraphicsLayerForHighlight, graphicsLayer: graphicsLayer, mapView: mapView, onInitializeGraphicsLayer: onInitializeGraphicsLayer, onClearGraphicsLayer: onClearGraphicsLayer, groupOrder: groupOrder, selectedGroupId: selectedGroupId, selectedGroupQueryIndex: selectedGroupQueryIndex, onGroupChange: (groupId) => setSelectedGroupId(groupId), onGroupQueryChange: (index) => setSelectedGroupQueryIndex(index), onUngroupedChange: (index) => setSelectedUngroupedIndex(index), resultsMode: resultsMode, onResultsModeChange: onResultsModeChange, accumulatedRecords: accumulatedRecords, onAccumulatedRecordsChange: onAccumulatedRecordsChange, activeTab: activeTab, onTabChange: onTabChange }) })) }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-spatial-form.tsx":
/*!**************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-spatial-form.tsx ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTaskSpatialForm: () => (/* binding */ QueryTaskSpatialForm)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _geometry_from_ds__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./geometry-from-ds */ "./your-extensions/widgets/query-simple/src/runtime/geometry-from-ds.tsx");
/* harmony import */ var _geometry_from_map__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./geometry-from-map */ "./your-extensions/widgets/query-simple/src/runtime/geometry-from-map.tsx");
/* harmony import */ var _geometry_from_draw__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./geometry-from-draw */ "./your-extensions/widgets/query-simple/src/runtime/geometry-from-draw.tsx");
/* harmony import */ var jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! jimu-icons/outlined/suggested/info */ "./jimu-icons/outlined/suggested/info.tsx");

/** @jsx jsx */








function QueryTaskSpatialForm(props) {
    var _a;
    const { label, desc, filterTypes, mapWidgetIds, onFilterChange, onRelationChange, onBufferChange, useDataSources, spatialRelations, useRuntimeData, dsEnableBuffer, dsBufferDistance, dsBufferUnit, drawEnableBuffer, drawBufferDistance, drawBufferUnit, createToolTypes, widgetId } = props;
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_4__["default"]);
    // used to store the selection of the data source in order to update the filter when option changes
    const selectedGeometriesRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const mapExists = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        if ((mapWidgetIds === null || mapWidgetIds === void 0 ? void 0 : mapWidgetIds.length) > 0) {
            const mapWidgetId = mapWidgetIds[0];
            return state.appConfig.widgets[mapWidgetId] != null;
        }
        return false;
    });
    const canUseMapFilter = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return mapExists && ((filterTypes === null || filterTypes === void 0 ? void 0 : filterTypes.includes(_config__WEBPACK_IMPORTED_MODULE_3__.SpatialFilterType.CurrentMapExtent)) || (filterTypes === null || filterTypes === void 0 ? void 0 : filterTypes.includes(_config__WEBPACK_IMPORTED_MODULE_3__.SpatialFilterType.InteractiveDrawMode)));
    }, [filterTypes, mapExists]);
    const supportedFilterTypes = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        const result = [];
        if ((useDataSources === null || useDataSources === void 0 ? void 0 : useDataSources.length) > 0 || useRuntimeData) {
            result.push({ value: 'data', label: getI18nMessage('featureFromDs') });
        }
        if (canUseMapFilter && (filterTypes === null || filterTypes === void 0 ? void 0 : filterTypes.includes(_config__WEBPACK_IMPORTED_MODULE_3__.SpatialFilterType.CurrentMapExtent))) {
            result.push({ value: 'map', label: getI18nMessage(`spatialFilterType_${_config__WEBPACK_IMPORTED_MODULE_3__.SpatialFilterType.CurrentMapExtent}`) });
        }
        if (canUseMapFilter && (filterTypes === null || filterTypes === void 0 ? void 0 : filterTypes.includes(_config__WEBPACK_IMPORTED_MODULE_3__.SpatialFilterType.InteractiveDrawMode))) {
            result.push({ value: 'draw', label: getI18nMessage(`spatialFilterType_${_config__WEBPACK_IMPORTED_MODULE_3__.SpatialFilterType.InteractiveDrawMode}`) });
        }
        return result;
    }, [canUseMapFilter, useDataSources, useRuntimeData, getI18nMessage, filterTypes]);
    const [currentFilterType, setCurrentFilterType] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState((_a = supportedFilterTypes === null || supportedFilterTypes === void 0 ? void 0 : supportedFilterTypes[0]) === null || _a === void 0 ? void 0 : _a.value);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        // in order to avoid invalid option being selected
        if (currentFilterType !== 'none' && !supportedFilterTypes.find((item) => item.value === currentFilterType)) {
            setCurrentFilterType((_a = supportedFilterTypes === null || supportedFilterTypes === void 0 ? void 0 : supportedFilterTypes[0]) === null || _a === void 0 ? void 0 : _a.value);
        }
    }, [currentFilterType, supportedFilterTypes]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        // clear the relationship and buffer if filter type is not 'data'
        if (currentFilterType === 'map' || currentFilterType === 'draw' || currentFilterType === 'none') {
            onRelationChange(null);
            onBufferChange(0, _config__WEBPACK_IMPORTED_MODULE_3__.UnitType.Meters);
            onFilterChange({ geometry: null });
        }
        // no need to update the filter if the data source has selection since it will be updated in the handleSelectionChange method
        if (currentFilterType === 'data' && selectedGeometriesRef.current == null) {
            onFilterChange({ geometry: null });
        }
    }, [currentFilterType, onRelationChange, onBufferChange, onFilterChange]);
    const handleFilterTypeChanged = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((evt) => { setCurrentFilterType(evt.target.value); }, []);
    const handleGeometryChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((geometry, layer, graphic, clearAfterApply) => {
        onFilterChange({ geometry, graphic, layer, clearAfterApply });
    }, [onFilterChange]);
    const handleSelectionChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((geometries) => {
        selectedGeometriesRef.current = geometries;
        onFilterChange({ geometry: geometries });
    }, [onFilterChange]);
    if (!((useDataSources === null || useDataSources === void 0 ? void 0 : useDataSources.length) > 0 || useRuntimeData || canUseMapFilter)) {
        return null;
    }
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { role: 'group', className: 'px-4 pb-4', "aria-label": label, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('form-title my-2 d-flex align-items-center', { 'd-none': !label && !desc }), children: [label && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'mr-2 title2', children: label }), desc && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { placement: 'bottom', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `white-space: pre-line;`, title: desc, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: 'sm', icon: true, type: 'tertiary', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_8__.InfoOutlined, { color: 'var(--sys-color-primary-main)', size: 's' }) }) }))] }), supportedFilterTypes.length > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'title3', children: getI18nMessage('chooseFilterType') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Select, { "aria-label": getI18nMessage('chooseFilterType'), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `height: 32px;`, value: currentFilterType, onChange: handleFilterTypeChanged, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: 'none', children: "-" }, '-'), supportedFilterTypes.map(item => (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: item.value, children: item.label }, item.value))] })] })), currentFilterType === 'data' && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_geometry_from_ds__WEBPACK_IMPORTED_MODULE_5__.GeometryFromDataSource, { enableBuffer: dsEnableBuffer, bufferDistance: dsBufferDistance, bufferUnit: dsBufferUnit, spatialRelations: spatialRelations, useDataSources: useDataSources, useRuntimeData: useRuntimeData, onSelectionChange: handleSelectionChange, onRelationChange: onRelationChange, onBufferChange: onBufferChange })), currentFilterType === 'map' && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_geometry_from_map__WEBPACK_IMPORTED_MODULE_6__.GeometryFromMap, { mapWidgetIds: mapWidgetIds, createToolTypes: createToolTypes, onGeometryChange: handleGeometryChange })), currentFilterType === 'draw' && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_geometry_from_draw__WEBPACK_IMPORTED_MODULE_7__.GeometryFromDraw, { enableBuffer: drawEnableBuffer, bufferDistance: drawBufferDistance, bufferUnit: drawBufferUnit, mapWidgetIds: mapWidgetIds, widgetId: widgetId, createToolTypes: createToolTypes, onGeometryChange: handleGeometryChange, onBufferChange: onBufferChange }))] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task.tsx":
/*!*************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task.tsx ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTask: () => (/* binding */ QueryTask)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-icons/outlined/suggested/info */ "./jimu-icons/outlined/suggested/info.tsx");
/* harmony import */ var jimu_icons_outlined_editor_trash__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-icons/outlined/editor/trash */ "./jimu-icons/outlined/editor/trash.tsx");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _query_task_form__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./query-task-form */ "./your-extensions/widgets/query-simple/src/runtime/query-task-form.tsx");
/* harmony import */ var _query_result__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./query-result */ "./your-extensions/widgets/query-simple/src/runtime/query-result.tsx");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/* harmony import */ var _query_task_label__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./query-task-label */ "./your-extensions/widgets/query-simple/src/runtime/query-task-label.tsx");
/* harmony import */ var _default_query_item__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../default-query-item */ "./your-extensions/widgets/query-simple/src/default-query-item.ts");
/* harmony import */ var _query_utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./query-utils */ "./your-extensions/widgets/query-simple/src/runtime/query-utils.ts");
/* harmony import */ var _results_management_utils__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./results-management-utils */ "./your-extensions/widgets/query-simple/src/runtime/results-management-utils.ts");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var jimu_icons_outlined_directional_arrow_left__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! jimu-icons/outlined/directional/arrow-left */ "./jimu-icons/outlined/directional/arrow-left.tsx");
/* harmony import */ var _loading_result__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./loading-result */ "./your-extensions/widgets/query-simple/src/runtime/loading-result.tsx");
/* harmony import */ var _selection_utils__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};

/** @jsx jsx */

















const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_8__.createQuerySimpleDebugLogger)();
// Helper function to get display name for query in dropdown
// Uses: searchAlias || jimuFieldName || item.name || fallback
const getQueryDisplayName = (item) => {
    var _a, _b, _c;
    // First priority: searchAlias if set
    if (item.searchAlias) {
        return item.searchAlias;
    }
    // Second priority: field name from SQL expression
    const jimuFieldName = (_c = (_b = (_a = item.sqlExprObj) === null || _a === void 0 ? void 0 : _a.parts) === null || _b === void 0 ? void 0 : _b[0]) === null || _c === void 0 ? void 0 : _c.jimuFieldName;
    if (jimuFieldName) {
        return jimuFieldName;
    }
    // Third priority: item name
    if (item.name) {
        return item.name;
    }
    // Fallback
    return 'Query';
};
const style = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
  &.wrapped .query-form {
    height: 100%;
  }
  .query-task__content {
    display: flex;
    flex-direction: column;
    width: 100%;
    padding-top: 8px;
    &:has(> .query-form__header > div:not(.d-none)), &:has(> .query-result) {
      padding-top: 16px;
    }
  }
  .query-form__header {
    display: flex;
    &.has-content {
      border-bottom: 1px solid var(--sys-color-divider-secondary);
      margin-bottom: 6px;
      padding-bottom: 8px;
    }
    .nav-action {
      flex: 1 1 0;
      overflow: hidden;
      display: flex;
      .jimu-btn {
        min-width: 26px;
      }
    }
    .result-menu {
      display: flex;
    }
  }
`;
function QueryTask(props) {
    var _a, _b, _c, _d, _e;
    const { queryItem, onNavBack, total, isInPopper = false, wrappedInPopper = false, className = '', index, initialInputValue, onHashParameterUsed, queryItems, selectedQueryIndex, onQueryChange, groups, ungrouped, groupOrder, selectedGroupId, selectedGroupQueryIndex, onGroupChange, onGroupQueryChange, onUngroupedChange, resultsMode, onResultsModeChange, accumulatedRecords, onAccumulatedRecordsChange, useGraphicsLayerForHighlight, graphicsLayer, mapView, onInitializeGraphicsLayer, onClearGraphicsLayer, activeTab: propActiveTab, onTabChange: propOnTabChange } = props, otherProps = __rest(props, ["queryItem", "onNavBack", "total", "isInPopper", "wrappedInPopper", "className", "index", "initialInputValue", "onHashParameterUsed", "queryItems", "selectedQueryIndex", "onQueryChange", "groups", "ungrouped", "groupOrder", "selectedGroupId", "selectedGroupQueryIndex", "onGroupChange", "onGroupQueryChange", "onUngroupedChange", "resultsMode", "onResultsModeChange", "accumulatedRecords", "onAccumulatedRecordsChange", "useGraphicsLayerForHighlight", "graphicsLayer", "mapView", "onInitializeGraphicsLayer", "onClearGraphicsLayer", "activeTab", "onTabChange"]);
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_13__["default"]);
    const [stage, setStage] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(0); // 0 = form, 1 = results, 2 = loading
    const [internalActiveTab, setInternalActiveTab] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState('query');
    // Controlled tab state: use prop if provided, otherwise internal state
    const activeTab = propActiveTab || internalActiveTab;
    const setActiveTab = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((tab) => {
        if (propOnTabChange) {
            propOnTabChange(tab);
        }
        else {
            setInternalActiveTab(tab);
        }
    }, [propOnTabChange]);
    const [enabled, setEnabled] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(true);
    const [resultCount, setResultCount] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(0);
    // Track if we've already selected records for the current query results
    const hasSelectedRecordsRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(false);
    // Track query execution count to force QueryTaskResult remount on new queries
    const queryExecutionKeyRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(0);
    const queryParamRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const recordsRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const [outputDS, setOutputDS] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const [dataSource, setDataSource] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const [spatialFilterEnabled, setSpatialFilterEnabled] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(true);
    const attributeFilterSqlExprObj = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(queryItem.sqlExprObj);
    const spatialFilterObj = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const backBtnRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(undefined);
    const clearResultBtnRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(undefined);
    const [dataActionFilter, setDataActionFilter] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const previousConfigIdRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(queryItem.configId);
    // Track manual tab switches to prevent auto-switch useEffect from interfering
    const manualTabSwitchRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(false);
    // Track when a query was just executed - only auto-switch after query execution completes
    const queryJustExecutedRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(false);
    // Store the last runtime zoom override value from the form for use by Add to Map action
    const lastRuntimeZoomToSelectedRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(undefined);
    // Error states for user-facing errors
    const [selectionError, setSelectionError] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const [zoomError, setZoomError] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const currentItem = Object.assign({}, _default_query_item__WEBPACK_IMPORTED_MODULE_10__.DEFAULT_QUERY_ITEM, queryItem);
    const { icon, name, displayLabel } = currentItem;
    const dsExists = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_8__.useDataSourceExists)({ widgetId: props.widgetId, useDataSourceId: (_a = currentItem.useDataSource) === null || _a === void 0 ? void 0 : _a.dataSourceId });
    // Debug logging for tab content rendering
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        debugLogger.log('TASK', {
            event: 'query-tab-content-render',
            activeTab,
            enabled,
            dsExists,
            dataSource: dataSource ? 'exists' : 'null',
            queryItemConfigId: queryItem.configId,
            note: 'Query tab content state check'
        });
    }, [activeTab, enabled, dsExists, dataSource, queryItem.configId]);
    // Debug logging for Tab children rendering
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (activeTab === 'query') {
            debugLogger.log('TASK', {
                event: 'query-tab-children-render',
                activeTab,
                queryItemConfigId: queryItem.configId,
                note: 'Query Tab children should be rendering'
            });
        }
    }, [activeTab, queryItem.configId]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        // focus the back button when it is rendered
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.focusElementInKeyboardMode)(backBtnRef.current);
    });
    // Get the pagination style from widget config (MultiPage or LazyLoad/Single-page)
    const pagingTypeInConfig = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const widgetJson = state.appConfig.widgets[props.widgetId];
        return widgetJson.config.resultPagingStyle;
    });
    // Get the initial page size for single-page (LazyLoad) results
    // This allows users to configure how many records are loaded initially when using single-page mode
    // Defaults to 100 if not configured
    const lazyLoadInitialPageSize = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const widgetJson = state.appConfig.widgets[props.widgetId];
        return widgetJson.config.lazyLoadInitialPageSize;
    });
    // Watch for when results are ready and switch to Results tab
    // ONLY auto-switch when a query was just executed and results are loaded
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        // Don't auto-switch if user manually switched tabs
        if (manualTabSwitchRef.current) {
            debugLogger.log('TASK', {
                event: 'auto-switch-skipped',
                reason: 'manual-tab-switch-flag-set',
                widgetId: props.widgetId,
                queryItemConfigId: queryItem.configId,
                activeTab,
                resultCount,
                queryJustExecutedRef: queryJustExecutedRef.current,
                timestamp: Date.now()
            });
            return;
        }
        // FORCED: Always use SimpleList - we're done with lazy loading issues
        // Records are available immediately, so we can switch as soon as resultCount > 0
        const isSimpleList = true;
        // ONLY auto-switch when:
        // 1. A query was just executed (queryJustExecutedRef.current === true)
        // 2. We have results (resultCount > 0)
        // 3. Records are actually loaded:
        //    - For SimpleList: resultCount > 0 is sufficient (records available immediately)
        //    - For LazyLoad: recordsRef.current must have data (wait for lazy loading)
        // 4. We're currently on the query tab (don't switch if already on results)
        const hasRecords = isSimpleList
            ? resultCount > 0
            : (recordsRef.current && recordsRef.current.length > 0);
        debugLogger.log('TASK', {
            event: 'auto-switch-check',
            widgetId: props.widgetId,
            queryItemConfigId: queryItem.configId,
            activeTab,
            resultCount,
            queryJustExecutedRef: queryJustExecutedRef.current,
            isSimpleList,
            pagingTypeInConfig,
            hasRecords,
            recordsRefLength: ((_a = recordsRef.current) === null || _a === void 0 ? void 0 : _a.length) || 0,
            manualTabSwitchRef: manualTabSwitchRef.current,
            willAutoSwitch: queryJustExecutedRef.current && resultCount > 0 && hasRecords && activeTab === 'query',
            timestamp: Date.now()
        });
        if (queryJustExecutedRef.current &&
            resultCount > 0 &&
            hasRecords &&
            activeTab === 'query') {
            debugLogger.log('TASK', {
                event: 'auto-switch-triggered',
                widgetId: props.widgetId,
                queryItemConfigId: queryItem.configId,
                fromTab: activeTab,
                toTab: 'results',
                resultCount,
                timestamp: Date.now()
            });
            setActiveTab('results');
            queryJustExecutedRef.current = false; // Reset after switching
            debugLogger.log('TASK', {
                event: 'auto-switch-completed',
                widgetId: props.widgetId,
                queryItemConfigId: queryItem.configId,
                queryJustExecutedRefReset: queryJustExecutedRef.current,
                timestamp: Date.now()
            });
        }
    }, [resultCount, activeTab, pagingTypeInConfig]);
    // Verify dropdowns are synchronized with hash parameter when present
    // This is especially important for grouped queries where dropdowns need to be synchronized
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a, _b;
        // Only verify if we have a hash parameter
        if (!initialInputValue || !queryItem.shortId) {
            return;
        }
        // Verify the current queryItem matches what we expect from hash parameter
        const expectedShortId = queryItem.shortId;
        const isGroupedQuery = queryItem.groupId !== null && queryItem.groupId !== undefined;
        // Check if dropdowns are correctly set for grouped queries
        if (isGroupedQuery) {
            const expectedGroupId = queryItem.groupId;
            const actualGroupId = selectedGroupId;
            const expectedQueryIndex = selectedGroupQueryIndex;
            if (expectedGroupId !== actualGroupId) {
                debugLogger.log('GROUP', {
                    event: 'dropdown-group-mismatch',
                    expectedGroupId,
                    actualGroupId,
                    queryItemShortId: expectedShortId,
                    warning: 'First dropdown may not be synchronized with hash parameter'
                });
            }
            else if (expectedQueryIndex !== undefined) {
                // Verify the query index within the group matches
                const groupItems = (_a = groups === null || groups === void 0 ? void 0 : groups[expectedGroupId]) === null || _a === void 0 ? void 0 : _a.items;
                if (groupItems && groupItems.length > expectedQueryIndex) {
                    const expectedQueryConfigId = (_b = groupItems[expectedQueryIndex]) === null || _b === void 0 ? void 0 : _b.configId;
                    const actualQueryConfigId = queryItem.configId;
                    if (expectedQueryConfigId !== actualQueryConfigId) {
                        debugLogger.log('GROUP', {
                            event: 'dropdown-query-index-mismatch',
                            expectedQueryConfigId,
                            actualQueryConfigId,
                            expectedQueryIndex,
                            queryItemShortId: expectedShortId,
                            warning: 'Second dropdown may not be synchronized with hash parameter'
                        });
                    }
                    else {
                        debugLogger.log('GROUP', {
                            event: 'dropdowns-synchronized',
                            queryItemShortId: expectedShortId,
                            groupId: expectedGroupId,
                            selectedGroupQueryIndex: expectedQueryIndex,
                            note: 'Dropdowns synchronized with hash parameter'
                        });
                    }
                }
            }
        }
        else {
            // Ungrouped query - verify it's selected
            debugLogger.log('GROUP', {
                event: 'dropdowns-synchronized-ungrouped',
                queryItemShortId: expectedShortId,
                note: 'Ungrouped query dropdown synchronized with hash parameter'
            });
        }
    }, [initialInputValue, queryItem.shortId, queryItem.groupId, queryItem.configId, selectedGroupId, selectedGroupQueryIndex, groups]);
    const useOutputDs = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)({
        dataSourceId: queryItem.outputDataSourceId,
        mainDataSourceId: queryItem.outputDataSourceId
    }), [queryItem.outputDataSourceId]);
    const updateDataSource = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((ds) => {
        var _a, _b;
        const currentDs = ds !== null && ds !== void 0 ? ds : dataSource;
        // should disable spatial filter if the dataSource is an output ds and it already has spatial filter
        if ((_a = currentDs === null || currentDs === void 0 ? void 0 : currentDs.getDataSourceJson()) === null || _a === void 0 ? void 0 : _a.isOutputFromWidget) {
            const qDs = currentDs;
            const qParams = (_b = qDs.getCurrentQueryParams) === null || _b === void 0 ? void 0 : _b.call(qDs);
            if (qParams.geometry != null) {
                setSpatialFilterEnabled(false);
            }
            else {
                setSpatialFilterEnabled(true);
            }
        }
    }, [dataSource]);
    const handleStatusChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((enabled) => {
        setEnabled(enabled);
        updateDataSource();
    }, [updateDataSource]);
    const handleOutputDataSourceInfoChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((info, preInfo) => {
        const outputId = queryItem.outputDataSourceId;
        const filter = (info === null || info === void 0 ? void 0 : info.widgetQueries) ? info.widgetQueries[`setFilter-${outputId}`] : null;
        if (filter == null) { // filter is null means there are incomplete queries, ignore this change
            return;
        }
        const preFilter = (preInfo === null || preInfo === void 0 ? void 0 : preInfo.widgetQueries) ? preInfo.widgetQueries[`setFilter-${outputId}`] : null;
        if ((filter === null || filter === void 0 ? void 0 : filter.where) !== (preFilter === null || preFilter === void 0 ? void 0 : preFilter.where)) {
            setDataActionFilter(filter);
        }
    }, [queryItem.outputDataSourceId]);
    const publishDataClearedMsg = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => __awaiter(this, void 0, void 0, function* () {
        if (!outputDS)
            return;
        const dataRecordSetChangeMessage = new jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataRecordSetChangeMessage(props.widgetId, jimu_core__WEBPACK_IMPORTED_MODULE_1__.RecordSetChangeType.Remove, [outputDS.id]);
        jimu_core__WEBPACK_IMPORTED_MODULE_1__.MessageManager.getInstance().publishMessage(dataRecordSetChangeMessage);
        yield jimu_core__WEBPACK_IMPORTED_MODULE_1__.MessageManager.getInstance().publishMessage(new jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataRecordsSelectionChangeMessage(props.widgetId, [], [outputDS.id]));
    }), [props.widgetId, outputDS]);
    /**
     * Clears all query results from the UI and map.
     * This is the single source of truth for clearing results.
     * It clears the records, resets the result count, clears selection from the map,
     * publishes a cleared message to the map, switches back to the Query tab,
     * and increments the query execution key to force QueryTaskResult to remount with fresh state.
     */
    const clearResult = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((...args_1) => __awaiter(this, [...args_1], void 0, function* (reason = 'unknown') {
        debugLogger.log('TASK', {
            event: 'clearResult-called',
            widgetId: props.widgetId,
            hasOutputDS: !!outputDS,
            reason,
            timestamp: Date.now()
        });
        recordsRef.current = null;
        outputDS === null || outputDS === void 0 ? void 0 : outputDS.setStatus(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.NotReady);
        setResultCount(0);
        // NOTE: Graphics layer clearing is now handled inside clearSelectionInDataSources
        // called below. We ensure this is awaited to prevent race conditions.
        // Clear selection directly from data source using utility function
        try {
            yield (0,_selection_utils__WEBPACK_IMPORTED_MODULE_16__.clearSelectionInDataSources)(props.widgetId, outputDS, useGraphicsLayerForHighlight, graphicsLayer);
            debugLogger.log('TASK', {
                event: 'clearResult-selection-cleared',
                widgetId: props.widgetId,
                timestamp: Date.now()
            });
        }
        catch (error) {
            debugLogger.log('TASK', {
                event: 'clearResult-selection-clear-failed',
                widgetId: props.widgetId,
                error: error instanceof Error ? error.message : String(error),
                timestamp: Date.now()
            });
        }
        // Clear widget-level accumulated records when clearing results
        if (onAccumulatedRecordsChange) {
            onAccumulatedRecordsChange([]);
            debugLogger.log('RESULTS-MODE', {
                event: 'accumulated-records-cleared-on-clear-results',
                widgetId: props.widgetId
            });
        }
        yield publishDataClearedMsg();
        // Switch back to Query tab when clearing results
        setActiveTab('query');
        setStage(0);
        hasSelectedRecordsRef.current = false; // Reset selection flag when clearing
        // Increment query execution key to force QueryTaskResult remount with fresh state
        queryExecutionKeyRef.current += 1;
        // Clear error states when clearing results
        setSelectionError(null);
        setZoomError(null);
        debugLogger.log('TASK', {
            event: 'clearResult-complete',
            widgetId: props.widgetId,
            timestamp: Date.now()
        });
    }), [outputDS, publishDataClearedMsg, props.widgetId, queryItem.configId, onAccumulatedRecordsChange, useGraphicsLayerForHighlight, graphicsLayer]);
    /**
     * Handles data source creation when switching between query items.
     * When a new query item is selected (e.g., switching from Parcel to Major),
     * this clears old results to ensure all cleanup logic runs properly.
     *
     * @param ds - The newly created data source for the selected query item
     */
    const handleDataSourceCreated = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((ds) => __awaiter(this, void 0, void 0, function* () {
        debugLogger.log('TASK', {
            event: 'handleDataSourceCreated-start',
            widgetId: props.widgetId,
            resultsMode,
            timestamp: Date.now()
        });
        // In "Add to" and "Remove from" modes, preserve accumulated records and selection - don't clear
        if ((resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection || resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection)
            && accumulatedRecords && accumulatedRecords.length > 0) {
            debugLogger.log('RESULTS-MODE', {
                event: 'preserving-selection-on-query-switch-handleDataSourceCreated',
                widgetId: props.widgetId,
                resultsMode,
                accumulatedRecordsCount: accumulatedRecords.length
            });
            setDataSource(ds);
            updateDataSource(ds);
            setStage(0);
            setActiveTab('query');
            return; // Skip clearing - preserve selection
        }
        // For "New" mode, clear old results
        debugLogger.log('TASK', {
            event: 'handleDataSourceCreated-clearing-results-for-new-mode',
            widgetId: props.widgetId,
            timestamp: Date.now()
        });
        yield clearResult('handleDataSourceCreated-new-mode');
        setDataSource(ds);
        updateDataSource(ds);
        setStage(0);
        setActiveTab('query'); // Return to Query tab when switching queries
    }), [updateDataSource, clearResult, resultCount, resultsMode, accumulatedRecords, props.widgetId]);
    const handleOutputDataSourceCreated = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((ds) => __awaiter(this, void 0, void 0, function* () {
        var _a, _b, _c, _d, _e, _f, _g, _h;
        setOutputDS(ds);
        // CHECK rootDataSource.map to see how framework accesses map view
        try {
            const originDataSources = ds.getOriginDataSources();
            const originDS = originDataSources === null || originDataSources === void 0 ? void 0 : originDataSources[0];
            if (originDS) {
                const rootDS = originDS.getRootDataSource();
                if (rootDS) {
                    // Expose rootDS to window for console inspection
                    ;
                    window.__querySimpleRootDS = rootDS;
                    window.__querySimpleRootDSMap = rootDS.map;
                    window.__querySimpleOriginDS = originDS;
                    debugLogger.log('GRAPHICS-LAYER', {
                        event: 'check-root-datasource-map',
                        widgetId: props.widgetId,
                        outputDSId: ds.id,
                        originDSId: originDS.id,
                        rootDSId: rootDS.id,
                        rootDSType: rootDS.type,
                        hasRootDSMap: !!rootDS.map,
                        rootDSMapType: rootDS.map ? typeof rootDS.map : 'none',
                        rootDSMapId: ((_a = rootDS.map) === null || _a === void 0 ? void 0 : _a.id) || 'none',
                        hasRootDSMapView: !!((_b = rootDS.map) === null || _b === void 0 ? void 0 : _b.view),
                        hasRootDSMapViews: !!((_c = rootDS.map) === null || _c === void 0 ? void 0 : _c.views),
                        rootDSMapViewsLength: ((_e = (_d = rootDS.map) === null || _d === void 0 ? void 0 : _d.views) === null || _e === void 0 ? void 0 : _e.length) || 0,
                        // Log some map properties if it exists
                        rootDSMapKeys: rootDS.map ? Object.keys(rootDS.map).filter(key => !key.startsWith('_') &&
                            typeof rootDS.map[key] !== 'function').slice(0, 20) : [],
                        // Log that objects are available on window for console inspection
                        consoleInspection: 'Check window.__querySimpleRootDS, window.__querySimpleRootDSMap, window.__querySimpleOriginDS',
                        timestamp: Date.now()
                    });
                    // If map exists, check its view
                    const rootMap = rootDS.map;
                    if (rootMap) {
                        const view = rootMap.view ||
                            ((_g = (_f = rootMap.views) === null || _f === void 0 ? void 0 : _f.getItemAt) === null || _g === void 0 ? void 0 : _g.call(_f, 0)) ||
                            (((_h = rootMap.views) === null || _h === void 0 ? void 0 : _h.length) > 0 ? rootMap.views[0] : null);
                        debugLogger.log('GRAPHICS-LAYER', {
                            event: 'check-root-datasource-map-view',
                            widgetId: props.widgetId,
                            hasView: !!view,
                            viewType: (view === null || view === void 0 ? void 0 : view.type) || 'none',
                            viewId: (view === null || view === void 0 ? void 0 : view.id) || 'none',
                            timestamp: Date.now()
                        });
                    }
                }
            }
        }
        catch (error) {
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'check-root-datasource-map-error',
                widgetId: props.widgetId,
                error: error instanceof Error ? error.message : String(error),
                errorStack: error instanceof Error ? error.stack : undefined,
                timestamp: Date.now()
            });
        }
        // Initialize graphics layer lazily if enabled and not already initialized
        if (useGraphicsLayerForHighlight && onInitializeGraphicsLayer) {
            yield onInitializeGraphicsLayer(ds);
            // After initialization, graphicsLayer and mapView props should be updated
            // But since props come from refs, we need to wait for widget re-render
            // For now, use the props that will be updated on next render
        }
        // If in "Add to" or "Remove from" mode and we have accumulated records, re-select them
        // This uses the same logic as after query completion - selectRecordsAndPublish
        // This ensures records are selected both on the map and in the Results tab
        if ((resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection || resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection)
            && accumulatedRecords && accumulatedRecords.length > 0) {
            // Use a delay to ensure the DS is fully ready and graphics layer props are updated after widget re-render
            // If graphics layer was just initialized, wait a bit longer for props to update
            const delay = (useGraphicsLayerForHighlight && onInitializeGraphicsLayer) ? 200 : 100;
            setTimeout(() => {
                const featureDS = ds;
                if (featureDS && accumulatedRecords && accumulatedRecords.length > 0) {
                    const recordIds = accumulatedRecords.map(record => record.getId());
                    (() => __awaiter(this, void 0, void 0, function* () {
                        try {
                            yield (0,_selection_utils__WEBPACK_IMPORTED_MODULE_16__.selectRecordsAndPublish)(props.widgetId, featureDS, recordIds, accumulatedRecords, false, useGraphicsLayerForHighlight, graphicsLayer, mapView);
                            // Update recordsRef so results tab shows accumulated records
                            recordsRef.current = accumulatedRecords;
                            setResultCount(accumulatedRecords.length);
                            debugLogger.log('RESULTS-MODE', {
                                event: 're-selected-accumulated-records-after-query-switch',
                                widgetId: props.widgetId,
                                outputDSId: featureDS.id,
                                recordsCount: accumulatedRecords.length
                            });
                            // Verify what's actually selected in the DS after a delay
                            setTimeout(() => {
                                var _a;
                                const ds = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().getDataSource(featureDS.id);
                                const selectedInDS = ds === null || ds === void 0 ? void 0 : ds.getSelectedRecords();
                                const selectedIdsInDS = (_a = ds === null || ds === void 0 ? void 0 : ds.getSelectedRecordIds()) !== null && _a !== void 0 ? _a : [];
                                debugLogger.log('RESULTS-MODE', {
                                    event: 'verify-records-after-reselection',
                                    widgetId: props.widgetId,
                                    outputDSId: featureDS.id,
                                    expectedCount: accumulatedRecords.length,
                                    actualSelectedInDS: (selectedInDS === null || selectedInDS === void 0 ? void 0 : selectedInDS.length) || 0,
                                    selectedIdsInDS: selectedIdsInDS.length,
                                    recordsMatch: (selectedInDS === null || selectedInDS === void 0 ? void 0 : selectedInDS.length) === accumulatedRecords.length
                                });
                            }, 200);
                        }
                        catch (error) {
                            debugLogger.log('RESULTS-MODE', {
                                event: 're-selection-failed-after-switch',
                                widgetId: props.widgetId,
                                error: error instanceof Error ? error.message : 'Unknown error',
                                errorStack: error instanceof Error ? error.stack : undefined
                            });
                        }
                    }))();
                }
            }, 100);
        }
    }), [resultsMode, accumulatedRecords, props.widgetId, useGraphicsLayerForHighlight, onInitializeGraphicsLayer]);
    // Clear results when query item changes (e.g., when new hash parameter triggers different query)
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        // Only clear if we're actually switching to a different query (not just re-rendering)
        const isSwitchingQueries = previousConfigIdRef.current !== queryItem.configId;
        // Only clear results when switching queries if we're in "New" mode
        // In "Add to" and "Remove from" modes, we want to preserve accumulated records across query switches
        if (isSwitchingQueries && resultCount > 0 && resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection) {
            // Store the old configId before updating
            const oldConfigId = previousConfigIdRef.current;
            // Update the ref to track the new query
            previousConfigIdRef.current = queryItem.configId;
            debugLogger.log('RESULTS-MODE', {
                event: 'clearing-results-on-query-switch-new-mode',
                widgetId: props.widgetId,
                oldConfigId,
                newConfigId: queryItem.configId,
                resultsMode
            });
            // Clear immediately when switching queries, but wrap in try-catch to handle
            // race conditions with feature info windows that might be rendering
            try {
                clearResult('query-item-switch-new-mode');
            }
            catch (error) {
                // Log for debugging but don't show to user (framework race condition)
                // The error is in framework code (feature-info.tsx), not our code
                // This can happen if feature-info.tsx is trying to appendChild to a DOM element
                // that gets removed when we clear selection
                debugLogger.log('TASK', {
                    event: 'clear-result-race-condition',
                    error: error instanceof Error ? error.message : String(error),
                    note: 'Likely race condition with feature-info.tsx'
                });
                if (true) {
                    console.warn('Error clearing results (likely race condition with feature info):', error);
                }
                // Don't set error state - this is expected in some scenarios
            }
        }
        else if (isSwitchingQueries) {
            // Just update the ref - don't clear results if in "Add to" or "Remove from" mode or no results
            previousConfigIdRef.current = queryItem.configId;
            if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection || resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection) {
                debugLogger.log('RESULTS-MODE', {
                    event: 'preserving-accumulated-records-on-query-switch',
                    widgetId: props.widgetId,
                    resultsMode,
                    oldConfigId: previousConfigIdRef.current,
                    newConfigId: queryItem.configId,
                    accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0
                });
            }
        }
    }, [queryItem.configId, clearResult, resultCount, resultsMode, accumulatedRecords, props.widgetId]);
    const navToForm = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((...args_1) => __awaiter(this, [...args_1], void 0, function* (clearResults = false) {
        if (clearResults) {
            // Use the centralized clearResult method instead of duplicating logic
            yield clearResult('navToForm-clearResults');
            return;
        }
        // Switch to query tab but don't clear results unless explicitly requested
        // Mark as manual switch to prevent auto-switch useEffect from interfering
        manualTabSwitchRef.current = true;
        setActiveTab('query');
        // Reset the flag after a short delay
        setTimeout(() => {
            manualTabSwitchRef.current = false;
        }, 100);
        // Only change stage if we're clearing results
        // Otherwise, keep stage at 1 (results available) so results persist
        if (!clearResults && resultCount > 0) {
            setStage(1); // Keep results available
        }
        jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.defer(() => {
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.focusElementInKeyboardMode)(backBtnRef.current);
        });
    }), [clearResult, resultCount]);
    /**
     * Handles tab switching between Query and Results tabs.
     * Tab switching preserves results state - results remain visible and selected
     * when switching between tabs. Results are only cleared when explicitly
     * clicking the trash can button or when starting a new query.
     *
     * @param tab - The tab to switch to ('query' | 'results')
     * @param event - Optional mouse event to prevent default behavior
     */
    const handleTabChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((tab, event) => {
        debugLogger.log('TASK', {
            event: 'tab-change',
            tab,
            currentTab: activeTab,
            resultCount,
            eventType: event === null || event === void 0 ? void 0 : event.type
        });
        if (event) {
            event.preventDefault();
            event.stopPropagation();
        }
        // Don't allow switching to results if there are no results
        if (tab === 'results' && resultCount === 0) {
            debugLogger.log('TASK', {
                event: 'tab-change-blocked',
                reason: 'no-results',
                tab,
                resultCount
            });
            return;
        }
        // Mark this as a manual switch to prevent auto-switch useEffect from interfering
        manualTabSwitchRef.current = true;
        setActiveTab(tab);
        // Reset the flag after a short delay to allow the state update to complete
        // This prevents the auto-switch useEffect from immediately switching back
        setTimeout(() => {
            manualTabSwitchRef.current = false;
        }, 100);
        // Don't change stage here - just switch the view
        // Stage should remain at 1 (results available) when switching between tabs
    }, [resultCount, activeTab]);
    /**
     * Handles form submission when user clicks "Apply" button.
     * Clears old results (if any) by programmatically clicking the trash can button,
     * then executes the query with the provided SQL expression and spatial filter.
     *
     * @param sqlExpr - The SQL expression for attribute filtering
     * @param spatialFilter - The spatial filter object
     * @param runtimeZoomToSelected - Optional runtime override for zoom-to-selected behavior
     */
    const handleFormSubmit = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((sqlExpr, spatialFilter, runtimeZoomToSelected) => __awaiter(this, void 0, void 0, function* () {
        var _a, _b, _c, _d, _e;
        // Clear previous errors when starting a new query
        setSelectionError(null);
        setZoomError(null);
        debugLogger.log('TASK', {
            event: 'handleFormSubmit-start',
            widgetId: props.widgetId,
            resultsMode,
            timestamp: Date.now()
        });
        // Store the runtime zoom override for use by Add to Map action
        lastRuntimeZoomToSelectedRef.current = runtimeZoomToSelected;
        attributeFilterSqlExprObj.current = sqlExpr;
        spatialFilterObj.current = spatialFilter;
        // Load the first page
        const featureDS = outputDS;
        // For "Add to" and "Remove from" modes, use widget-level accumulated records
        // These persist across query switches, unlike query-item-level records
        let existingRecordsForMerge = [];
        if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection || resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection) {
            // Robust capture strategy:
            // 1. Try records from props (already merged by parent)
            // 2. Fallback to currently selected records in DS (captured during mode switch)
            const fromProp = accumulatedRecords || [];
            const fromDS = (outputDS === null || outputDS === void 0 ? void 0 : outputDS.getSelectedRecords()) || [];
            existingRecordsForMerge = fromProp.length > 0 ? fromProp : fromDS;
            debugLogger.log('RESULTS-MODE', {
                event: 'captured-existing-records-diagnostic',
                widgetId: props.widgetId,
                resultsMode,
                fromPropCount: fromProp.length,
                fromDSCount: fromDS.length,
                finalCapturedCount: existingRecordsForMerge.length,
                firstRecordId: ((_b = (_a = existingRecordsForMerge[0]) === null || _a === void 0 ? void 0 : _a.getId) === null || _b === void 0 ? void 0 : _b.call(_a)) || 'none',
                allRecordIds: existingRecordsForMerge.map(r => { var _a; return (_a = r.getId) === null || _a === void 0 ? void 0 : _a.call(r); }).slice(0, 10),
                outputDSId: outputDS.id,
                timestamp: Date.now()
            });
        }
        // For "New" mode, clear old results and graphics layer
        // We call clearResult() directly and AWAIT it to ensure it's finished before query execution starts
        if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection) {
            debugLogger.log('TASK', {
                event: 'handleFormSubmit-clearing-results-for-new-mode',
                widgetId: props.widgetId,
                timestamp: Date.now()
            });
            yield clearResult('handleFormSubmit-new-mode');
        }
        // Set loading stage
        setStage(2);
        // FORCED: Always use SimpleList - fetch ALL records, not just a page
        // Use data source's max record count, or fall back to a large number (10000)
        const maxRecordCount = (_e = (_d = (_c = featureDS).getMaxRecordCount) === null || _d === void 0 ? void 0 : _d.call(_c)) !== null && _e !== void 0 ? _e : 10000;
        let pageSize = maxRecordCount;
        const queryParams = (0,_query_utils__WEBPACK_IMPORTED_MODULE_11__.generateQueryParams)(featureDS, sqlExpr, spatialFilter, currentItem, 1, pageSize);
        queryParamRef.current = queryParams;
        debugLogger.log('TASK', {
            event: 'handleFormSubmit-executing-query',
            widgetId: props.widgetId,
            where: queryParams.where,
            resultsMode,
            timestamp: Date.now()
        });
        // Change output ds status to unloaded before use it to load count/records.
        featureDS.setStatus(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.Unloaded);
        featureDS.setCountStatus(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.Unloaded);
        let queryResultCount = 0; // Capture count from records to use in finally block
        const startTime = performance.now();
        debugLogger.log('TASK', {
            event: 'perf-query-chain-start',
            widgetId: props.widgetId,
            resultsMode,
            where: queryParams.where,
            timestamp: Date.now()
        });
        // PERFORMANCE OPTIMIZATION: Removed redundant executeCountQuery() round-trip.
        // Since we fetch ALL records (pageSize = maxRecordCount), we can just use records.length.
        featureDS.updateQueryParams(queryParamRef.current, props.widgetId);
        const fetchStartTime = performance.now();
        (0,_query_utils__WEBPACK_IMPORTED_MODULE_11__.executeQuery)(props.widgetId, queryItem, featureDS, queryParamRef.current)
            .then((result) => __awaiter(this, void 0, void 0, function* () {
            var _a, _b, _c;
            const fetchDurationMs = Math.round(performance.now() - fetchStartTime);
            const processingStartTime = performance.now();
            queryResultCount = ((_a = result.records) === null || _a === void 0 ? void 0 : _a.length) || 0;
            debugLogger.log('RESULTS-MODE', {
                event: 'query-execution-complete',
                widgetId: props.widgetId,
                resultsMode,
                recordsReturned: queryResultCount,
                fetchDurationMs,
                existingCapturedCount: existingRecordsForMerge.length,
                timestamp: Date.now()
            });
            let recordsToDisplay = result.records || [];
            let dsToUse = outputDS;
            // Handle "Add to" mode: merge new results with widget-level accumulated records
            if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection && result.records && result.records.length > 0) {
                try {
                    debugLogger.log('RESULTS-MODE', {
                        event: 'add-mode-starting-merge-diagnostic',
                        widgetId: props.widgetId,
                        existingCount: existingRecordsForMerge.length,
                        existingIds: existingRecordsForMerge.map(r => { var _a; return (_a = r.getId) === null || _a === void 0 ? void 0 : _a.call(r); }).slice(0, 5),
                        newCount: result.records.length,
                        newIds: result.records.map((r) => { var _a; return (_a = r.getId) === null || _a === void 0 ? void 0 : _a.call(r); }).slice(0, 5),
                        timestamp: Date.now()
                    });
                    // Merge new query results with widget-level accumulated records
                    const mergedRecords = (0,_results_management_utils__WEBPACK_IMPORTED_MODULE_12__.mergeResultsIntoAccumulated)(outputDS, // Use outputDS for key generation
                    result.records, existingRecordsForMerge // Use consistently captured records
                    );
                    recordsToDisplay = mergedRecords;
                    // Update widget-level accumulated records so they persist across query switches
                    if (onAccumulatedRecordsChange) {
                        onAccumulatedRecordsChange(mergedRecords);
                    }
                    debugLogger.log('RESULTS-MODE', {
                        event: 'add-mode-merge-complete-diagnostic',
                        widgetId: props.widgetId,
                        mergedRecordsCount: mergedRecords.length,
                        mergedIds: mergedRecords.map(r => { var _a; return (_a = r.getId) === null || _a === void 0 ? void 0 : _a.call(r); }).slice(0, 10),
                        timestamp: Date.now()
                    });
                }
                catch (error) {
                    debugLogger.log('RESULTS-MODE', {
                        event: 'add-mode-error',
                        widgetId: props.widgetId,
                        error: error instanceof Error ? error.message : 'Unknown error',
                        errorStack: error instanceof Error ? error.stack : undefined
                    });
                    // Fall back to normal behavior on error
                    recordsToDisplay = result.records;
                }
            }
            else if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection) {
                // Handle "Remove from" mode: remove matching records from widget-level accumulated records
                try {
                    debugLogger.log('RESULTS-MODE', {
                        event: 'remove-mode-starting-merge',
                        widgetId: props.widgetId,
                        existingCount: existingRecordsForMerge.length,
                        removeCount: ((_b = result.records) === null || _b === void 0 ? void 0 : _b.length) || 0
                    });
                    // Check if we have accumulated records to remove from
                    if (existingRecordsForMerge.length === 0) {
                        debugLogger.log('RESULTS-MODE', {
                            event: 'remove-mode-no-accumulated-records',
                            widgetId: props.widgetId,
                            queryRecordsCount: ((_c = result.records) === null || _c === void 0 ? void 0 : _c.length) || 0,
                            note: 'No accumulated records to remove from - no-op'
                        });
                        // No accumulated records, so nothing to remove - show empty results
                        recordsToDisplay = [];
                    }
                    else if (result.records && result.records.length > 0) {
                        // Remove matching records from accumulated records
                        const remainingRecords = (0,_results_management_utils__WEBPACK_IMPORTED_MODULE_12__.removeResultsFromAccumulated)(outputDS, // Use outputDS for key generation
                        result.records, existingRecordsForMerge // Use consistently captured records
                        );
                        recordsToDisplay = remainingRecords;
                        // Update widget-level accumulated records
                        if (onAccumulatedRecordsChange) {
                            onAccumulatedRecordsChange(remainingRecords);
                        }
                        // Remove records from origin data source selections (map highlighting)
                        // Also removes graphics from graphics layer if using graphics layer highlighting
                        (0,_results_management_utils__WEBPACK_IMPORTED_MODULE_12__.removeRecordsFromOriginSelections)(props.widgetId, result.records, outputDS, useGraphicsLayerForHighlight, graphicsLayer);
                        debugLogger.log('RESULTS-MODE', {
                            event: 'remove-mode-complete',
                            widgetId: props.widgetId,
                            existingAccumulatedRecordsCount: existingRecordsForMerge.length,
                            queryRecordsCount: result.records.length,
                            remainingRecordsCount: remainingRecords.length,
                            recordsRemoved: existingRecordsForMerge.length - remainingRecords.length,
                            outputDSId: outputDS.id,
                            widgetLevelRecordsUpdated: true,
                            originSelectionsUpdated: true
                        });
                        // If all records removed, auto-clear (consistent with user expectation)
                        if (remainingRecords.length === 0) {
                            debugLogger.log('RESULTS-MODE', {
                                event: 'remove-mode-all-records-removed',
                                widgetId: props.widgetId,
                                note: 'All accumulated records removed - auto-clearing'
                            });
                            // Clear widget-level accumulated records
                            if (onAccumulatedRecordsChange) {
                                onAccumulatedRecordsChange([]);
                            }
                        }
                    }
                    else {
                        // Query returned no results - nothing to remove
                        debugLogger.log('RESULTS-MODE', {
                            event: 'remove-mode-no-query-results',
                            widgetId: props.widgetId,
                            existingAccumulatedRecordsCount: existingRecordsForMerge.length,
                            note: 'Query returned no results - no records to remove'
                        });
                        // Keep existing accumulated records displayed
                        recordsToDisplay = existingRecordsForMerge;
                    }
                }
                catch (error) {
                    debugLogger.log('RESULTS-MODE', {
                        event: 'remove-mode-error',
                        widgetId: props.widgetId,
                        error: error instanceof Error ? error.message : 'Unknown error',
                        errorStack: error instanceof Error ? error.stack : undefined
                    });
                    // Fall back to showing query results on error
                    recordsToDisplay = result.records || [];
                }
            }
            else if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection) {
                // For "New" mode, clear widget-level accumulated records
                if (onAccumulatedRecordsChange) {
                    onAccumulatedRecordsChange([]);
                }
            }
            recordsRef.current = recordsToDisplay;
            // Reset selection flag for new query results
            hasSelectedRecordsRef.current = false;
            // Select records in the output DS
            // For "Add to" mode, select merged records
            // For "Remove from" mode, select remaining records (already updated via removeRecordsFromOriginSelections)
            // For "New" mode, select query results
            if (recordsToDisplay && recordsToDisplay.length > 0 && dsToUse) {
                const recordIdsToSelect = recordsToDisplay.map(record => record.getId());
                // For "Remove from" mode, selection was already updated via removeRecordsFromOriginSelections
                // But we still need to select in the outputDS for widget state consistency
                if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection) {
                    // Selection was already updated in origin DSs via removeRecordsFromOriginSelections
                    // Just update outputDS selection for widget state consistency
                    try {
                        if (typeof dsToUse.selectRecordsByIds === 'function') {
                            dsToUse.selectRecordsByIds(recordIdsToSelect, recordsToDisplay);
                        }
                        hasSelectedRecordsRef.current = true;
                        debugLogger.log('RESULTS-MODE', {
                            event: 'remove-mode-output-ds-selection-updated',
                            widgetId: props.widgetId,
                            recordCount: recordsToDisplay.length
                        });
                    }
                    catch (error) {
                        debugLogger.log('RESULTS-MODE', {
                            event: 'remove-mode-output-ds-selection-error',
                            widgetId: props.widgetId,
                            error: error instanceof Error ? error.message : 'Unknown error'
                        });
                    }
                }
                else {
                    // For "Add to" and "New" modes, select records normally
                    setSelectionError(null) // Clear previous errors
                    ;
                    (() => __awaiter(this, void 0, void 0, function* () {
                        try {
                            yield (0,_selection_utils__WEBPACK_IMPORTED_MODULE_16__.selectRecordsAndPublish)(props.widgetId, dsToUse, recordIdsToSelect, recordsToDisplay, false, useGraphicsLayerForHighlight, graphicsLayer, mapView);
                            hasSelectedRecordsRef.current = true; // Mark as selected
                            // Dispatch custom selection event so Widget state is updated immediately
                            // This is crucial for hash-based execution where QueryTask handles selection
                            (0,_selection_utils__WEBPACK_IMPORTED_MODULE_16__.dispatchSelectionEvent)(props.widgetId, recordIdsToSelect, dsToUse, queryItem.configId);
                        }
                        catch (error) {
                            const errorMessage = error instanceof Error ? error.message : 'Failed to select query results';
                            setSelectionError(errorMessage);
                            debugLogger.log('TASK', {
                                event: 'selection-failed',
                                error: errorMessage,
                                errorStack: error instanceof Error ? error.stack : undefined,
                                recordCount: recordIdsToSelect.length
                            });
                        }
                    }))();
                }
            }
            else if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection && recordsToDisplay.length === 0) {
                // All records removed - clear selection
                ;
                (() => __awaiter(this, void 0, void 0, function* () {
                    try {
                        yield (0,_selection_utils__WEBPACK_IMPORTED_MODULE_16__.clearSelectionInDataSources)(props.widgetId, dsToUse, useGraphicsLayerForHighlight, graphicsLayer);
                        hasSelectedRecordsRef.current = false;
                        // Notify Widget that selection is cleared
                        (0,_selection_utils__WEBPACK_IMPORTED_MODULE_16__.dispatchSelectionEvent)(props.widgetId, [], dsToUse, queryItem.configId);
                        debugLogger.log('RESULTS-MODE', {
                            event: 'remove-mode-all-records-removed-selection-cleared',
                            widgetId: props.widgetId
                        });
                    }
                    catch (error) {
                        debugLogger.log('RESULTS-MODE', {
                            event: 'remove-mode-clear-selection-error',
                            widgetId: props.widgetId,
                            error: error instanceof Error ? error.message : 'Unknown error'
                        });
                    }
                }))();
            }
            // Mark that query just executed BEFORE updating resultCount
            // This ensures the auto-switch useEffect sees queryJustExecutedRef.current === true
            queryJustExecutedRef.current = true;
            debugLogger.log('TASK', {
                event: 'query-executed-flag-set',
                widgetId: props.widgetId,
                queryItemConfigId: queryItem.configId,
                resultsMode,
                recordsToDisplayCount: recordsToDisplay.length,
                queryResultCount,
                timestamp: Date.now()
            });
            // Update result count
            // For "Add to" and "Remove from" modes, use accumulated/remaining count
            // For "New" mode, use query count
            const newResultCount = resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection || resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection
                ? recordsToDisplay.length
                : queryResultCount;
            setResultCount(newResultCount);
            // INSTANT UI FIX (The "Spinner Bypass"): 
            // Decouple the "Retrieving results..." spinner from asynchronous actions like zooming. 
            // By calling setStage(1) now, the user sees the result list immediately while 
            // the map animation continues in the background.
            setStage(1);
            debugLogger.log('TASK', {
                event: 'perf-processing-complete',
                widgetId: props.widgetId,
                processingDurationMs: Math.round(performance.now() - processingStartTime),
                totalChainDurationMs: Math.round(performance.now() - startTime),
                newResultCount,
                resultsMode,
                timestamp: Date.now()
            });
            // Trigger the existing zoomToFeature data action (same as clicking "Zoom To" in the menu)
            // Use runtime preference if provided, otherwise fall back to config setting (defaults to true)
            const shouldZoom = runtimeZoomToSelected !== undefined
                ? runtimeZoomToSelected
                : (queryItem.zoomToSelected !== false);
            // Use the output DS and merged records
            const recordsForZoom = recordsToDisplay || result.records;
            const dsForZoom = dsToUse || outputDS;
            if (recordsForZoom && recordsForZoom.length > 0 && dsForZoom && shouldZoom) {
                // Create a data set from the appropriate data source and records
                const dataSet = {
                    dataSource: dsForZoom,
                    records: recordsForZoom,
                    name: dsForZoom.getLabel()
                };
                // Get available data actions and find the zoomToFeature action
                return jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataActionManager.getInstance().getSupportedActions(props.widgetId, [dataSet], jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataLevel.Records)
                    .then(actionCategories => {
                    // Look for zoomToFeature action in any category
                    let zoomAction = null;
                    for (const category in actionCategories) {
                        const actions = actionCategories[category];
                        zoomAction = actions.find((action) => action.name === 'zoomToFeature' || action.id === 'zoomToFeature');
                        if (zoomAction)
                            break;
                    }
                    if (zoomAction) {
                        // Execute the same zoom action that works when clicked manually
                        return jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataActionManager.getInstance().executeDataAction(zoomAction, [dataSet], jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataLevel.Records, props.widgetId);
                    }
                    else {
                        return Promise.resolve(false);
                    }
                })
                    .catch(error => {
                    const errorMessage = error instanceof Error ? error.message : 'Failed to zoom to features';
                    setZoomError(errorMessage);
                    debugLogger.log('ZOOM', {
                        event: 'zoom-action-failed',
                        error: errorMessage,
                        errorStack: error instanceof Error ? error.stack : undefined
                    });
                    if (true) {
                        console.error('Error executing zoomToFeature data action', error);
                    }
                    return Promise.resolve(false);
                });
            }
            return Promise.resolve(true);
        }))
            .catch(error => {
            debugLogger.log('TASK', {
                event: 'query-chain-failed-diagnostic',
                widgetId: props.widgetId,
                error: error instanceof Error ? error.message : String(error),
                errorStack: error instanceof Error ? error.stack : undefined,
                timestamp: Date.now()
            });
            setStage(1); // Return to results or form stage even on error
        })
            .finally(() => {
            if ((spatialFilter === null || spatialFilter === void 0 ? void 0 : spatialFilter.layer) && (spatialFilter === null || spatialFilter === void 0 ? void 0 : spatialFilter.clearAfterApply)) {
                spatialFilter.layer.removeAll();
            }
            // setStage(1) // Removed from here; now called in the main chain before background actions
        });
    }), [currentItem, queryItem, props.widgetId, outputDS, publishDataClearedMsg, clearResult, resultsMode, accumulatedRecords, onAccumulatedRecordsChange, onClearGraphicsLayer]);
    const { useAttributeFilter, sqlExprObj, useSpatialFilter, spatialFilterTypes, spatialIncludeRuntimeData, spatialRelationUseDataSources } = currentItem;
    const showAttributeFilter = useAttributeFilter && sqlExprObj != null;
    const showSpatialFilter = spatialFilterEnabled && useSpatialFilter && (spatialFilterTypes.length > 0 || spatialIncludeRuntimeData || (spatialRelationUseDataSources === null || spatialRelationUseDataSources === void 0 ? void 0 : spatialRelationUseDataSources.length) > 0);
    // DETECT SWITCH IN RENDER
    const isSwitchingQueries = previousConfigIdRef.current !== queryItem.configId;
    const isVirtualClearActive = isSwitchingQueries && resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection;
    // Use these "effective" values for the UI
    const effectiveResultCount = isVirtualClearActive ? 0 : resultCount;
    const effectiveRecords = isVirtualClearActive ? [] : (recordsRef.current || []);
    // Create a unique key for the current query result set to help E2E tests detect fresh data
    const resultQueryKey = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return `${queryItem.configId}_${Date.now()}`;
    }, [queryItem.configId, resultCount]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('query-task h-100', className, { wrapped: wrappedInPopper }), "data-result-query-key": resultQueryKey, css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
      ${style}
      position: relative;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceComponent, { useDataSource: useOutputDs, onDataSourceCreated: handleOutputDataSourceCreated, onDataSourceInfoChange: handleOutputDataSourceInfoChange }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tabs, { value: activeTab, onChange: (id) => handleTabChange(id), fill: true, type: 'underline', keepMount: true, css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
          flex: 1;
          display: flex;
          flex-direction: column;
          overflow: hidden;
          min-height: 0;
        `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tab, { id: 'query', title: getI18nMessage('queryTab'), children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('query-task__content', {
                                [jimu_ui__WEBPACK_IMPORTED_MODULE_2__.FOCUSABLE_CONTAINER_CLASS]: isInPopper && activeTab === 'query'
                            }), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              flex: 1;
              display: flex;
              flex-direction: column;
              overflow: hidden;
              min-height: 0;
              padding-top: 0 !important;
            `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('query-form__header mx-4 align-items-center', { 'in-popper': isInPopper }), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              display: flex;
              padding: 6px 0;
              padding-top: 8px;
              border-bottom: 1px solid var(--sys-color-divider-secondary);
              flex-shrink: 0;
            `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('nav-action align-items-center', { 'd-none': wrappedInPopper }), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                flex: 1 1 0;
                overflow: hidden;
                display: flex;
                align-items: center;
                gap: 4px;
                .jimu-btn {
                  min-width: 26px;
                }
              `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('p-0 mr-2', { 'd-none': total === 1 || !onNavBack }), size: 'sm', type: 'tertiary', icon: true, onClick: onNavBack, "aria-label": getI18nMessage('back'), ref: backBtnRef, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_directional_arrow_left__WEBPACK_IMPORTED_MODULE_14__.ArrowLeftOutlined, { autoFlip: true }) }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_label__WEBPACK_IMPORTED_MODULE_9__.QueryTaskLabel, { icon: icon, name: displayLabel ? name : '' }), (() => {
                                                    var _a;
                                                    if (!queryItems || queryItems.length <= 1)
                                                        return null;
                                                    // Get current query's origin data source ID
                                                    const currentOriginDSId = (_a = queryItem.useDataSource) === null || _a === void 0 ? void 0 : _a.dataSourceId;
                                                    if (!currentOriginDSId)
                                                        return null;
                                                    // Find all queries from the same origin data source that have shortIds
                                                    const sameLayerQueries = queryItems.filter(item => {
                                                        var _a;
                                                        return ((_a = item.useDataSource) === null || _a === void 0 ? void 0 : _a.dataSourceId) === currentOriginDSId &&
                                                            item.shortId &&
                                                            item.shortId.trim() !== '';
                                                    });
                                                    // Only show info button if there are queries with shortIds
                                                    if (sameLayerQueries.length === 0)
                                                        return null;
                                                    // Build tooltip content
                                                    const queryLines = sameLayerQueries.map(item => {
                                                        const queryName = getQueryDisplayName(item);
                                                        return `${queryName}: #${item.shortId}=value or ?${item.shortId}=value`;
                                                    });
                                                    const tooltipTitle = `This layer can be searched using the shortIds ${sameLayerQueries.map(q => q.shortId).join(' and ')} using #shortId=value or ?shortId=value in the URL.\n\n${queryLines.join('\n')}`;
                                                    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { placement: 'bottom', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `white-space: pre-line;`, title: tooltipTitle, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: 'sm', icon: true, type: 'tertiary', "aria-label": 'Hash parameter search information', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                          flex-shrink: 0;
                        `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_3__.InfoOutlined, { color: 'var(--sys-color-primary-main)', size: 's' }) }) }));
                                                })()] }), effectiveResultCount > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { title: getI18nMessage('clearResult'), placement: 'bottom', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { ref: clearResultBtnRef, size: 'sm', type: 'tertiary', "aria-label": getI18nMessage('clearResult'), icon: true, className: 'ml-auto py-0', onClick: clearResult, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_editor_trash__WEBPACK_IMPORTED_MODULE_4__.TrashOutlined, {}) }) }))] }), (() => {
                                    // Only show dropdowns if multiple queries exist
                                    if (!queryItems || queryItems.length <= 1) {
                                        return null;
                                    }
                                    // Build flat list of all queries with their display info
                                    // For grouped queries, use group display name (only show once per group)
                                    const queryOptions = [];
                                    // Track which groups we've already added to avoid duplicates
                                    const addedGroups = new Set();
                                    queryItems.forEach((item, idx) => {
                                        var _a, _b, _c;
                                        if (item.groupId) {
                                            // For grouped queries, use group display name (only add once per group)
                                            if (!addedGroups.has(item.groupId)) {
                                                addedGroups.add(item.groupId);
                                                const groupDisplayName = ((_a = groups === null || groups === void 0 ? void 0 : groups[item.groupId]) === null || _a === void 0 ? void 0 : _a.displayName) ||
                                                    ((_c = (_b = groups === null || groups === void 0 ? void 0 : groups[item.groupId]) === null || _b === void 0 ? void 0 : _b.items[0]) === null || _c === void 0 ? void 0 : _c.name) ||
                                                    item.name ||
                                                    `Group ${item.groupId}`;
                                                queryOptions.push({
                                                    configId: item.configId,
                                                    displayName: groupDisplayName,
                                                    groupId: item.groupId,
                                                    index: idx
                                                });
                                            }
                                        }
                                        else {
                                            // Ungrouped query - use item.name for first dropdown (not searchAlias/jimuFieldName)
                                            queryOptions.push({
                                                configId: item.configId,
                                                displayName: item.name || getQueryDisplayName(item),
                                                groupId: null,
                                                index: idx
                                            });
                                        }
                                    });
                                    // Determine currently selected query
                                    const currentQueryItem = queryItem;
                                    const currentQueryGroupId = currentQueryItem.groupId || null;
                                    const isGroupedQuery = currentQueryGroupId !== null;
                                    // Find the option index for the current query
                                    const currentOptionIndex = queryOptions.findIndex(opt => {
                                        if (isGroupedQuery) {
                                            return opt.groupId === currentQueryGroupId;
                                        }
                                        else {
                                            return opt.configId === currentQueryItem.configId;
                                        }
                                    });
                                    debugLogger.log('GROUP', {
                                        event: 'rendering-dropdowns',
                                        totalQueries: queryItems.length,
                                        queryOptionsCount: queryOptions.length,
                                        currentQueryGroupId,
                                        isGroupedQuery,
                                        currentOptionIndex,
                                        selectedGroupId,
                                        selectedGroupQueryIndex,
                                        currentQueryConfigId: currentQueryItem.configId
                                    });
                                    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                    padding: 4px 16px;
                    flex-shrink: 0;
                  `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("label", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                      font-size: 0.875rem;
                      font-weight: 500;
                      color: var(--sys-color-text-primary);
                      margin-bottom: 4px;
                      display: block;
                    `, children: getI18nMessage('searchLayer') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Select, { size: "sm", value: currentOptionIndex >= 0 ? currentOptionIndex : 0, onChange: (e) => __awaiter(this, void 0, void 0, function* () {
                                                            var _a;
                                                            const optionIndex = parseInt(e.target.value);
                                                            const selectedOption = queryOptions[optionIndex];
                                                            debugLogger.log('GROUP', {
                                                                event: 'query-option-selected',
                                                                optionIndex,
                                                                selectedOption,
                                                                isGrouped: selectedOption.groupId !== null
                                                            });
                                                            // START CLEARING IMMEDIATELY IF SWITCHING
                                                            if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection) {
                                                                yield clearResult('dropdown-layer-switch-new-mode');
                                                            }
                                                            if (selectedOption.groupId) {
                                                                // Grouped query selected - set group and first query in group
                                                                if (onGroupChange) {
                                                                    onGroupChange(selectedOption.groupId);
                                                                }
                                                                if (onGroupQueryChange) {
                                                                    onGroupQueryChange(0);
                                                                }
                                                            }
                                                            else {
                                                                // Ungrouped query selected - clear group selection
                                                                if (onGroupChange) {
                                                                    onGroupChange(null);
                                                                }
                                                                if (onUngroupedChange) {
                                                                    // Find the ungrouped index
                                                                    const ungroupedIndex = (_a = ungrouped === null || ungrouped === void 0 ? void 0 : ungrouped.findIndex(({ item }) => item.configId === selectedOption.configId)) !== null && _a !== void 0 ? _a : -1;
                                                                    if (ungroupedIndex >= 0) {
                                                                        onUngroupedChange(ungroupedIndex);
                                                                    }
                                                                    else {
                                                                        // Fallback: use the index from queryItems
                                                                        debugLogger.log('GROUP', {
                                                                            event: 'ungrouped-fallback-to-index',
                                                                            selectedOptionIndex: selectedOption.index
                                                                        });
                                                                        if (onQueryChange) {
                                                                            onQueryChange(selectedOption.index);
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }), children: queryOptions.map((option, idx) => {
                                                            debugLogger.log('GROUP', {
                                                                event: 'rendering-query-option',
                                                                index: idx,
                                                                configId: option.configId,
                                                                displayName: option.displayName,
                                                                groupId: option.groupId
                                                            });
                                                            return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: idx, children: option.displayName }, option.configId));
                                                        }) })] }), isGroupedQuery && currentQueryGroupId && groups && groups[currentQueryGroupId] && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                      padding: 4px 16px;
                      flex-shrink: 0;
                    `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("label", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                        font-size: 0.875rem;
                        font-weight: 500;
                        color: var(--sys-color-text-primary);
                        margin-bottom: 4px;
                        display: block;
                      `, children: "Search Alias" }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Select, { size: "sm", value: selectedGroupQueryIndex !== undefined ? selectedGroupQueryIndex : 0, onChange: (e) => __awaiter(this, void 0, void 0, function* () {
                                                            var _a;
                                                            const newIndex = parseInt(e.target.value);
                                                            debugLogger.log('GROUP', {
                                                                event: 'group-query-selected',
                                                                groupId: currentQueryGroupId,
                                                                groupQueryIndex: newIndex,
                                                                queryItemConfigId: (_a = groups[currentQueryGroupId].items[newIndex]) === null || _a === void 0 ? void 0 : _a.configId,
                                                                queryDisplayName: getQueryDisplayName(groups[currentQueryGroupId].items[newIndex])
                                                            });
                                                            // START CLEARING IMMEDIATELY IF SWITCHING
                                                            if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection) {
                                                                yield clearResult('dropdown-alias-switch-new-mode');
                                                            }
                                                            if (onGroupQueryChange) {
                                                                onGroupQueryChange(newIndex);
                                                            }
                                                        }), children: groups[currentQueryGroupId].items.map((item, idx) => ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: idx, children: getQueryDisplayName(item) }, item.configId))) })] }))] }));
                                })(), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                    padding: 8px 16px;
                    flex-shrink: 0;
                  `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "d-flex align-items-center", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                      gap: 0.5rem;
                      flex-wrap: nowrap;
                    `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "title2", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                        font-size: 0.875rem;
                        font-weight: 500;
                        color: var(--sys-color-text-primary);
                        white-space: nowrap;
                        flex-shrink: 0;
                      `, children: [getI18nMessage('results'), ":"] }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { placement: 'bottom', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `white-space: pre-line;`, title: getI18nMessage('resultsModeDesc'), children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: 'sm', icon: true, type: 'tertiary', "aria-label": getI18nMessage('resultsModeDesc'), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `flex-shrink: 0;`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_3__.InfoOutlined, { color: 'var(--sys-color-primary-main)', size: 's' }) }) }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { role: "radiogroup", "aria-label": getI18nMessage('resultsMode'), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                          display: flex;
                          gap: 4px;
                          align-items: stretch;
                          flex: 1;
                          min-width: 0;
                        `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: "sm", variant: resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection ? 'contained' : 'outlined', color: resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection ? 'primary' : 'default', onClick: () => {
                                                                const newMode = _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection;
                                                                debugLogger.log('RESULTS-MODE', {
                                                                    event: 'button-mode-changed',
                                                                    widgetId: props.widgetId,
                                                                    queryItemConfigId: queryItem.configId,
                                                                    previousMode: resultsMode || _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection,
                                                                    newMode,
                                                                    timestamp: new Date().toISOString()
                                                                });
                                                                if (onResultsModeChange) {
                                                                    onResultsModeChange(newMode);
                                                                }
                                                            }, "aria-pressed": resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection, "aria-label": `${getI18nMessage('createNewResults')}: ${((_b = getI18nMessage('resultsModeDesc').split('\n')[1]) === null || _b === void 0 ? void 0 : _b.trim()) || ''}`, title: getI18nMessage('createNewResults'), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                          flex: 1;
                          font-size: 0.75rem;
                          padding: 4px 8px;
                          min-height: 28px;
                          white-space: nowrap;
                          text-overflow: ellipsis;
                          overflow: hidden;
                        `, children: getI18nMessage('resultsModeNew') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: "sm", variant: resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection ? 'contained' : 'outlined', color: resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection ? 'primary' : 'default', onClick: () => {
                                                                const newMode = _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection;
                                                                const previousMode = resultsMode || _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection;
                                                                debugLogger.log('RESULTS-MODE', {
                                                                    event: 'button-mode-changed',
                                                                    widgetId: props.widgetId,
                                                                    queryItemConfigId: queryItem.configId,
                                                                    previousMode,
                                                                    newMode,
                                                                    timestamp: new Date().toISOString()
                                                                });
                                                                // If switching FROM "New" TO "Add to" mode and we have current results,
                                                                // merge them with existing accumulated records before changing mode
                                                                const recordsToCapture = (effectiveRecords && effectiveRecords.length > 0)
                                                                    ? effectiveRecords
                                                                    : ((outputDS === null || outputDS === void 0 ? void 0 : outputDS.getSelectedRecords()) || []);
                                                                if (previousMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection &&
                                                                    newMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection &&
                                                                    recordsToCapture.length > 0 &&
                                                                    outputDS &&
                                                                    onAccumulatedRecordsChange) {
                                                                    const existingAccumulated = accumulatedRecords || [];
                                                                    // Merge current results with existing accumulated records
                                                                    const mergedRecords = (0,_results_management_utils__WEBPACK_IMPORTED_MODULE_12__.mergeResultsIntoAccumulated)(outputDS, recordsToCapture, existingAccumulated);
                                                                    debugLogger.log('RESULTS-MODE', {
                                                                        event: 'capturing-current-results-on-mode-switch',
                                                                        widgetId: props.widgetId,
                                                                        previousMode,
                                                                        newMode,
                                                                        capturedRecordsCount: recordsToCapture.length,
                                                                        existingAccumulatedCount: existingAccumulated.length,
                                                                        mergedRecordsCount: mergedRecords.length
                                                                    });
                                                                    onAccumulatedRecordsChange(mergedRecords);
                                                                }
                                                                if (onResultsModeChange) {
                                                                    onResultsModeChange(newMode);
                                                                }
                                                            }, "aria-pressed": resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection, "aria-label": `${getI18nMessage('addToCurrentResults')}: ${((_c = getI18nMessage('resultsModeDesc').split('\n')[2]) === null || _c === void 0 ? void 0 : _c.trim()) || ''}`, title: getI18nMessage('addToCurrentResults'), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                          flex: 1;
                          font-size: 0.75rem;
                          padding: 4px 8px;
                          min-height: 28px;
                          white-space: nowrap;
                          text-overflow: ellipsis;
                          overflow: hidden;
                        `, children: getI18nMessage('resultsModeAdd') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: "sm", variant: resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection ? 'contained' : 'outlined', color: resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection ? 'primary' : 'default', disabled: !accumulatedRecords || accumulatedRecords.length === 0, onClick: () => {
                                                                const newMode = _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection;
                                                                const previousMode = resultsMode || _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection;
                                                                debugLogger.log('RESULTS-MODE', {
                                                                    event: 'button-mode-changed',
                                                                    widgetId: props.widgetId,
                                                                    queryItemConfigId: queryItem.configId,
                                                                    previousMode,
                                                                    newMode,
                                                                    accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0,
                                                                    timestamp: new Date().toISOString()
                                                                });
                                                                // If switching FROM "New" TO "Remove from" mode and we have current results,
                                                                // merge them with existing accumulated records before changing mode
                                                                // (same pattern as "Add to" mode)
                                                                const recordsToCaptureForRemove = (effectiveRecords && effectiveRecords.length > 0)
                                                                    ? effectiveRecords
                                                                    : ((outputDS === null || outputDS === void 0 ? void 0 : outputDS.getSelectedRecords()) || []);
                                                                if (previousMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection &&
                                                                    newMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection &&
                                                                    recordsToCaptureForRemove.length > 0 &&
                                                                    outputDS &&
                                                                    onAccumulatedRecordsChange) {
                                                                    const existingAccumulated = accumulatedRecords || [];
                                                                    // Merge current results with existing accumulated records
                                                                    const mergedRecords = (0,_results_management_utils__WEBPACK_IMPORTED_MODULE_12__.mergeResultsIntoAccumulated)(outputDS, recordsToCaptureForRemove, existingAccumulated);
                                                                    debugLogger.log('RESULTS-MODE', {
                                                                        event: 'capturing-current-results-on-mode-switch-to-remove',
                                                                        widgetId: props.widgetId,
                                                                        previousMode,
                                                                        newMode,
                                                                        capturedRecordsCount: recordsToCaptureForRemove.length,
                                                                        existingAccumulatedCount: existingAccumulated.length,
                                                                        mergedRecordsCount: mergedRecords.length
                                                                    });
                                                                    onAccumulatedRecordsChange(mergedRecords);
                                                                }
                                                                if (onResultsModeChange) {
                                                                    onResultsModeChange(newMode);
                                                                }
                                                            }, "aria-pressed": resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection, "aria-label": `${getI18nMessage('removeFromCurrentResults')}: ${((_d = getI18nMessage('resultsModeDesc').split('\n')[3]) === null || _d === void 0 ? void 0 : _d.trim()) || ''}`, title: (!accumulatedRecords || accumulatedRecords.length === 0)
                                                                ? getI18nMessage('resultsModeDisabledRemove')
                                                                : getI18nMessage('removeFromCurrentResults'), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                          flex: 1;
                          font-size: 0.75rem;
                          padding: 4px 8px;
                          min-height: 28px;
                          white-space: nowrap;
                          text-overflow: ellipsis;
                          overflow: hidden;
                        `, children: getI18nMessage('resultsModeRemove') })] })] }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { id: `results-mode-description-${props.widgetId}`, className: "sr-only", "aria-live": "polite", role: "status", children: resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection
                                                ? getI18nMessage('createNewResults')
                                                : resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection
                                                    ? getI18nMessage('addToCurrentResults')
                                                    : getI18nMessage('removeFromCurrentResults') })] }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              flex: 1;
              display: flex;
              flex-direction: column;
              overflow: hidden;
              min-height: 0;
            `, children: [enabled && dsExists && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                  flex: 1;
                  display: flex;
                  flex-direction: column;
                  min-height: 0;
                  overflow: hidden;
                `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_form__WEBPACK_IMPORTED_MODULE_6__.QueryTaskForm, Object.assign({}, otherProps, { configId: queryItem.configId, outputDS: outputDS, datasourceReady: dataSource != null, spatialFilterEnabled: spatialFilterEnabled, dataActionFilter: dataActionFilter, onFormSubmit: handleFormSubmit, initialInputValue: initialInputValue, onHashParameterUsed: onHashParameterUsed, queryItemShortId: queryItem.shortId })) })), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_8__.DataSourceTip, { widgetId: props.widgetId, useDataSource: queryItem.useDataSource, showMessage: true, onStatusChange: handleStatusChange, onDataSourceCreated: handleDataSourceCreated })] })] }) }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tab, { id: 'results', title: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { children: [getI18nMessage('resultsTab'), effectiveResultCount > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                  margin-left: 6px;
                  font-size: 0.75rem;
                  opacity: 0.7;
                `, children: ["(", effectiveResultCount, ")"] }))] }), disabled: effectiveResultCount === 0, children: effectiveResultCount > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('query-task__content', {
                                [jimu_ui__WEBPACK_IMPORTED_MODULE_2__.FOCUSABLE_CONTAINER_CLASS]: isInPopper && activeTab === 'results'
                            }), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                flex: 1;
                display: flex;
                flex-direction: column;
                min-height: 0;
                height: 100%;
                padding-top: 0 !important;
              `, onClick: (e) => {
                                // Prevent clicks from bubbling up when Results tab is active
                                if (activeTab === 'results') {
                                    e.stopPropagation();
                                }
                            }, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_result__WEBPACK_IMPORTED_MODULE_7__.QueryTaskResult, { widgetId: props.widgetId, queryItem: queryItem, queryParams: queryParamRef.current, resultCount: effectiveResultCount, maxPerPage: (_e = dataSource === null || dataSource === void 0 ? void 0 : dataSource.getMaxRecordCount) === null || _e === void 0 ? void 0 : _e.call(dataSource), records: effectiveRecords, outputDS: outputDS, runtimeZoomToSelected: lastRuntimeZoomToSelectedRef.current, resultsMode: resultsMode, useGraphicsLayerForHighlight: useGraphicsLayerForHighlight, graphicsLayer: graphicsLayer, mapView: mapView, accumulatedRecords: accumulatedRecords, onAccumulatedRecordsChange: onAccumulatedRecordsChange, onNavBack: (...args_1) => __awaiter(this, [...args_1], void 0, function* (clearResults = false) {
                                    // Handle navigation from QueryTaskResult
                                    // If clearResults is true, clear everything and go to query tab
                                    // If false, just switch to query tab without clearing
                                    if (clearResults) {
                                        hasSelectedRecordsRef.current = false; // Reset flag when clearing
                                        yield navToForm(true);
                                    }
                                    else {
                                        // Just switch tabs, don't clear results
                                        // Mark as manual switch to prevent auto-switch useEffect from interfering
                                        manualTabSwitchRef.current = true;
                                        setActiveTab('query');
                                        // Reset the flag after a short delay
                                        setTimeout(() => {
                                            manualTabSwitchRef.current = false;
                                        }, 100);
                                    }
                                }) }, `${queryItem.configId}-${queryExecutionKeyRef.current}`) })) })] }), (selectionError || zoomError) && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
          padding: 0 16px;
          margin-top: 8px;
        `, children: [selectionError && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_8__.ErrorMessage, { error: selectionError, onDismiss: () => setSelectionError(null) })), zoomError && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_8__.ErrorMessage, { error: zoomError, onDismiss: () => setZoomError(null) }))] })), stage === 2 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          z-index: 1000;
          background-color: rgba(255, 255, 255, 0.8);
          display: flex;
          align-items: center;
          justify-content: center;
        `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_loading_result__WEBPACK_IMPORTED_MODULE_15__.LoadingResult, {}) }))] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-utils.ts":
/*!*************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-utils.ts ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   combineFields: () => (/* binding */ combineFields),
/* harmony export */   executeCountQuery: () => (/* binding */ executeCountQuery),
/* harmony export */   executeQuery: () => (/* binding */ executeQuery),
/* harmony export */   generateQueryParams: () => (/* binding */ generateQueryParams),
/* harmony export */   getPopupTemplate: () => (/* binding */ getPopupTemplate)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



function combineFields(resultDisplayFields, resultTitleExpression, idField) {
    const fields = new Set();
    resultDisplayFields === null || resultDisplayFields === void 0 ? void 0 : resultDisplayFields.forEach(item => fields.add(item));
    if (resultTitleExpression) {
        const templates = resultTitleExpression.match(/\{\w*\}/g);
        if ((templates === null || templates === void 0 ? void 0 : templates.length) > 0) {
            templates.forEach(item => fields.add(item.substring(1, item.length - 1)));
        }
    }
    if (idField) {
        fields.add(idField);
    }
    return Array.from(fields);
}
function getPopupTemplate(outputDS, queryItem) {
    return __awaiter(this, void 0, void 0, function* () {
        var _a;
        const { resultFieldsType, resultDisplayFields, resultTitleExpression = '' } = queryItem;
        const currentOriginDs = outputDS.getOriginDataSources()[0];
        const popupInfo = currentOriginDs.getPopupInfo();
        if (resultFieldsType === _config__WEBPACK_IMPORTED_MODULE_1__.FieldsType.SelectAttributes) {
            let fields;
            if (resultDisplayFields == null) {
                const fieldsInContent = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_2__.getFieldInfosInPopupContent)(popupInfo);
                if (fieldsInContent.length > 0) {
                    const uniqueFields = new Set(fieldsInContent.map(ele => ele.fieldName));
                    fields = Array.from(uniqueFields);
                }
                else {
                    // return all fields by default
                    const allFieldsSchema = outputDS.getSchema();
                    fields = (allFieldsSchema === null || allFieldsSchema === void 0 ? void 0 : allFieldsSchema.fields) ? Object.values(allFieldsSchema.fields).map(field => field.jimuName) : [];
                }
            }
            else {
                fields = resultDisplayFields.asMutable({ deep: true });
            }
            if (popupInfo) {
                const fieldInfos = [];
                fields.forEach(field => {
                    const fieldInfo = popupInfo.fieldInfos.find(fieldInfo => fieldInfo.fieldName === field);
                    if (fieldInfo) {
                        fieldInfo.visible = true;
                        fieldInfos.push(fieldInfo);
                    }
                    else {
                        fieldInfos.push({
                            fieldName: field,
                            label: field
                        });
                    }
                });
                return {
                    popupTemplate: {
                        fieldInfos,
                        content: [{
                                type: 'fields'
                            }],
                        title: resultTitleExpression
                    }
                };
            }
            return {
                popupTemplate: {
                    fieldInfos: fields.map(field => ({
                        fieldName: field,
                        label: field
                    })),
                    content: [{
                            type: 'fields'
                        }],
                    title: resultTitleExpression
                }
            };
        }
        // the source layer will provide popup info
        let layerObject;
        if (currentOriginDs.layer) {
            layerObject = currentOriginDs.layer;
        }
        else {
            layerObject = yield currentOriginDs.createJSAPILayerByDataSource();
        }
        if (layerObject) {
            yield layerObject.load();
        }
        return { defaultPopupTemplate: ((_a = layerObject === null || layerObject === void 0 ? void 0 : layerObject.associatedLayer) === null || _a === void 0 ? void 0 : _a.defaultPopupTemplate) || (layerObject === null || layerObject === void 0 ? void 0 : layerObject.defaultPopupTemplate) };
    });
}
function generateQueryParams(outputDS, sqlExpr, spatialFilter, queryItem, page, pageSize) {
    var _a, _b, _c, _d, _e;
    const currentQueryDsJson = outputDS.getDataSourceJson();
    const currentOriginDs = outputDS.getOriginDataSources()[0];
    const isLocalDs = currentQueryDsJson === null || currentQueryDsJson === void 0 ? void 0 : currentQueryDsJson.isDataInDataSourceInstance;
    if (isLocalDs) {
        outputDS.setSourceRecords(currentOriginDs.getSourceRecords());
    }
    const { useAttributeFilter, useSpatialFilter, sortOptions, resultFieldsType, resultDisplayFields, resultTitleExpression } = queryItem;
    // DETERMINE MINIMAL FIELDS (The "Field Shredder" Optimization)
    // To achieve performance parity with Web AppBuilder, we must avoid fetching every 
    // column in the database (* or all). We surgically request only the fields 
    // needed for the Title, the Attribute List, and the ID field.
    let outputFields = [];
    if (resultFieldsType === _config__WEBPACK_IMPORTED_MODULE_1__.FieldsType.SelectAttributes && resultDisplayFields) {
        outputFields = combineFields(resultDisplayFields, resultTitleExpression || '', outputDS.getIdField());
    }
    else {
        // Popup mode: Get only visible fields from popup info
        const popupInfo = currentOriginDs.getPopupInfo();
        const fieldNames = Object.values((_a = currentOriginDs.getSchema().fields) !== null && _a !== void 0 ? _a : {}).map(f => f.name);
        const validFieldInfos = (_b = popupInfo === null || popupInfo === void 0 ? void 0 : popupInfo.fieldInfos) === null || _b === void 0 ? void 0 : _b.filter(fieldInfo => fieldInfo.visible !== false && fieldNames.includes(fieldInfo.fieldName));
        outputFields = (validFieldInfos === null || validFieldInfos === void 0 ? void 0 : validFieldInfos.map(fieldInfo => fieldInfo.fieldName)) || [];
        // Always ensure ID field is included
        const idField = outputDS.getIdField();
        if (idField && !outputFields.includes(idField)) {
            outputFields.push(idField);
        }
    }
    const mergedQueryParams = outputDS.mergeQueryParams((_c = currentOriginDs.getCurrentQueryParams()) !== null && _c !== void 0 ? _c : {}, {
        where: (useAttributeFilter && (sqlExpr === null || sqlExpr === void 0 ? void 0 : sqlExpr.sql)) ? jimu_core__WEBPACK_IMPORTED_MODULE_0__.dataSourceUtils.getArcGISSQL(sqlExpr, outputDS).sql : '1=1',
        sqlExpression: (useAttributeFilter && (sqlExpr === null || sqlExpr === void 0 ? void 0 : sqlExpr.sql)) ? sqlExpr : null,
        // FORCE minimal fields here to override any framework "*" or "all"
        outFields: outputFields
    });
    // PERFORMANCE OPTIMIZATION: Universal SQL Optimizer
    // We normalize the user's input to UPPERCASE to ensure case-insensitivity while 
    // unwrapping any LOWER() function around the field name. This allows the database 
    // to use its attribute indexes (SARGable query).
    if (mergedQueryParams.where && mergedQueryParams.where.includes('LOWER(')) {
        const optimizedWhere = mergedQueryParams.where.replace(/LOWER\(([^)]+)\)\s*(=|LIKE)\s*'([^']*)'/gi, (match, field, operator, value) => {
            // Normalize both sides to UPPERCASE. This works for ANY field name.
            // We keep the field name "naked" so the index is used.
            return `${field} ${operator} '${value.toUpperCase()}'`;
        });
        if (optimizedWhere !== mergedQueryParams.where) {
            console.log(`[QUERYSIMPLE-PERF] Universal SQL Optimization: ${mergedQueryParams.where} -> ${optimizedWhere}`);
            mergedQueryParams.where = optimizedWhere;
        }
    }
    // compose query params for query
    const queryParams = Object.assign({ 
        // url: ds.url,
        returnGeometry: true, 
        /**
         * PERFORMANCE OPTIMIZATION: Force lower precision for all display queries.
         */
        maxAllowableOffset: 0.1, page, 
        // Limit pageSize to a sane default if not provided or too large
        pageSize: (pageSize && pageSize < 1000) ? pageSize : 1000 }, mergedQueryParams);
    // Final override to ensure no "*" leaks through from any merge operation
    if (!queryParams.outFields || queryParams.outFields.includes('*')) {
        queryParams.outFields = outputFields;
    }
    // Diagnostic log: Show exactly WHICH fields are being sent
    console.log(`[QUERYSIMPLE-PERF] Requesting data: 
    - Fields Count: ${(_d = queryParams.outFields) === null || _d === void 0 ? void 0 : _d.length} 
    - Fields: ${(_e = queryParams.outFields) === null || _e === void 0 ? void 0 : _e.join(', ')}
    - PageSize: ${queryParams.pageSize}
    - Offset: ${queryParams.maxAllowableOffset}`);
    if (useSpatialFilter && (spatialFilter === null || spatialFilter === void 0 ? void 0 : spatialFilter.geometry)) {
        const { geometry, relation = _config__WEBPACK_IMPORTED_MODULE_1__.SpatialRelation.Intersect, buffer } = spatialFilter;
        const spatialQueryParams = {
            geometryType: jimu_core__WEBPACK_IMPORTED_MODULE_0__.dataSourceUtils.changeJSAPIGeometryTypeToRestAPIGeometryType(geometry.type),
            geometry: geometry.toJSON(),
            spatialRel: _config__WEBPACK_IMPORTED_MODULE_1__.mapJSAPISpatialRelToDsSpatialRel[relation],
            distance: buffer === null || buffer === void 0 ? void 0 : buffer.distance,
            units: (buffer === null || buffer === void 0 ? void 0 : buffer.unit) ? _config__WEBPACK_IMPORTED_MODULE_1__.mapJSAPIUnitToDsUnit[buffer.unit] : undefined
        };
        Object.assign(queryParams, spatialQueryParams);
    }
    if ((sortOptions === null || sortOptions === void 0 ? void 0 : sortOptions.length) > 0) {
        Object.assign(queryParams, {
            orderByFields: sortOptions.map(item => `${item.jimuFieldName} ${item.order}`)
        });
    }
    return queryParams;
}
function executeCountQuery(widgetId, outputDS, queryParams) {
    return __awaiter(this, void 0, void 0, function* () {
        const result = yield outputDS.loadCount(queryParams, { widgetId, refresh: true });
        return result != null ? result : 0;
    });
}
function executeQuery(widgetId, queryItem, outputDS, queryParams) {
    return __awaiter(this, void 0, void 0, function* () {
        const popupInfo = outputDS.getPopupInfo();
        const layerDefinition = outputDS.getLayerDefinition();
        const getDefaultFieldInfos = () => {
            var _a;
            return [
                { fieldName: (_a = layerDefinition === null || layerDefinition === void 0 ? void 0 : layerDefinition.objectIdField) !== null && _a !== void 0 ? _a : 'objectid', label: 'OBJECTID', tooltip: '', visible: true }
            ];
        };
        const fieldInfos = ((fieldInfos) => (fieldInfos.length ? fieldInfos : getDefaultFieldInfos()))(((popupInfo === null || popupInfo === void 0 ? void 0 : popupInfo.fieldInfos) || []).filter((i) => i.visible));
        // const fields = outputDS.getSchema()?.fields
        // let selectedFieldNames
        // if (queryItem.resultFieldsType === FieldsType.SelectAttributes) {
        //   selectedFieldNames = [].concat(queryItem.resultDisplayFields, queryItem.resultTitleFields)
        // } else {
        //   selectedFieldNames = fieldInfos.map((fieldInfo) => fieldInfo.fieldName)
        // }
        // const selectedFieldJimuNames = fields
        //   ? Object.keys(fields).filter((jimuName) => selectedFieldNames.includes(fields[jimuName].name))
        //   : []
        // outputDS.setSelectedFields(selectedFieldJimuNames)
        const startTime = performance.now();
        let records = yield outputDS.load(queryParams, { widgetId });
        const fetchTime = performance.now() - startTime;
        if (records == null) {
            records = [];
        }
        const originDs = outputDS.getOriginDataSources()[0];
        const layerStartTime = performance.now();
        const layerObject = yield getLayerObject(originDs);
        const layerTime = performance.now() - layerStartTime;
        console.log(`[QUERYSIMPLE-PERF] executeQuery complete. Fetch: ${Math.round(fetchTime)}ms, Layer: ${Math.round(layerTime)}ms, Total: ${Math.round(performance.now() - startTime)}ms, Count: ${records.length}`);
        records.forEach((record) => {
            const feature = record.feature;
            if (layerObject) {
                feature.sourceLayer = layerObject.associatedLayer || layerObject;
            }
            feature.layer = feature.sourceLayer;
        });
        const queryResult = {
            records,
            fields: fieldInfos.map((fieldInfo) => fieldInfo.fieldName)
        };
        // publish message
        const dataRecordSetChangeMessage = new jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataRecordSetChangeMessage(widgetId, jimu_core__WEBPACK_IMPORTED_MODULE_0__.RecordSetChangeType.CreateUpdate, [{
                records: outputDS.getAllLoadedRecords(),
                fields: queryResult.fields,
                dataSource: outputDS,
                name: outputDS.id,
                label: outputDS.getLabel()
            }]);
        jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageManager.getInstance().publishMessage(dataRecordSetChangeMessage);
        return queryResult;
    });
}
function getLayerObject(dataSource) {
    return __awaiter(this, void 0, void 0, function* () {
        const layerObject = yield dataSource.createJSAPILayerByDataSource();
        // layerObject may be undefined if the data source is added by URL
        if (layerObject) {
            yield layerObject.load();
        }
        return layerObject;
    });
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/results-management-utils.ts":
/*!**************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/results-management-utils.ts ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   clearAccumulatedResults: () => (/* binding */ clearAccumulatedResults),
/* harmony export */   createAccumulatedResultsDataSource: () => (/* binding */ createAccumulatedResultsDataSource),
/* harmony export */   getRecordKey: () => (/* binding */ getRecordKey),
/* harmony export */   mergeResultsIntoAccumulated: () => (/* binding */ mergeResultsIntoAccumulated),
/* harmony export */   removeRecordsFromOriginSelections: () => (/* binding */ removeRecordsFromOriginSelections),
/* harmony export */   removeResultsFromAccumulated: () => (/* binding */ removeResultsFromAccumulated)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/* harmony import */ var _graphics_layer_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./graphics-layer-utils */ "./your-extensions/widgets/query-simple/src/runtime/graphics-layer-utils.ts");
/**
 * Utility functions for managing results accumulation in QuerySimple widget.
 * Handles "Add to" and "Remove from" modes for accumulating query results.
 */
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__.createQuerySimpleDebugLogger)();
/**
 * Generates a composite key for a record that includes both origin data source ID and objectId.
 * This ensures uniqueness across different layers that may have the same objectId.
 *
 * @param record - The feature data record
 * @param outputDS - The output data source containing the record
 * @returns Composite key string: `${originDSId}_${objectId}`
 */
function getRecordKey(record, outputDS) {
    var _a;
    const originDS = (_a = outputDS.getOriginDataSources()) === null || _a === void 0 ? void 0 : _a[0];
    const originDSId = (originDS === null || originDS === void 0 ? void 0 : originDS.id) || outputDS.id; // Fallback to outputDS if no origin
    const objectId = record.getId();
    const key = `${originDSId}_${objectId}`;
    debugLogger.log('RESULTS-MODE', {
        event: 'record-key-generated',
        originDSId,
        objectId,
        key,
        hasOriginDS: !!originDS
    });
    return key;
}
/**
 * Creates an accumulated results data source for storing merged query results.
 * This data source is widget-level and persists across multiple queries.
 *
 * @param widgetId - The widget ID
 * @param originDS - The origin data source to use as the base
 * @returns The created accumulated results data source
 */
function createAccumulatedResultsDataSource(widgetId, originDS) {
    return __awaiter(this, void 0, void 0, function* () {
        const accumulatedDSId = `${widgetId}_accumulated_results`;
        debugLogger.log('RESULTS-MODE', {
            event: 'creating-accumulated-ds',
            widgetId,
            accumulatedDSId,
            originDSId: originDS.id
        });
        // Check if data source already exists
        const dsManager = jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceManager.getInstance();
        let accumulatedDS = dsManager.getDataSource(accumulatedDSId);
        if (accumulatedDS) {
            debugLogger.log('RESULTS-MODE', {
                event: 'accumulated-ds-already-exists',
                accumulatedDSId
            });
            return accumulatedDS;
        }
        // Get origin data source JSON to create output data source
        const originDataSourceJson = originDS.getDataSourceJson();
        // Create output data source JSON similar to how query items create output DS
        const outputDataSourceJson = {
            id: accumulatedDSId,
            label: 'Accumulated Results',
            type: originDataSourceJson === null || originDataSourceJson === void 0 ? void 0 : originDataSourceJson.type,
            geometryType: originDataSourceJson === null || originDataSourceJson === void 0 ? void 0 : originDataSourceJson.geometryType,
            url: originDataSourceJson === null || originDataSourceJson === void 0 ? void 0 : originDataSourceJson.url,
            itemId: originDataSourceJson === null || originDataSourceJson === void 0 ? void 0 : originDataSourceJson.itemId,
            portalUrl: originDataSourceJson === null || originDataSourceJson === void 0 ? void 0 : originDataSourceJson.portalUrl,
            originDataSources: [{
                    dataSourceId: originDS.id,
                    mainDataSourceId: originDS.id,
                    rootDataSourceId: originDS.id
                }],
            layerId: originDataSourceJson === null || originDataSourceJson === void 0 ? void 0 : originDataSourceJson.layerId,
            isDataInDataSourceInstance: originDataSourceJson === null || originDataSourceJson === void 0 ? void 0 : originDataSourceJson.isDataInDataSourceInstance,
            isOutputFromWidget: true
        };
        // Create the data source using DataSourceManager
        // Note: This follows the pattern from setting.tsx for creating output data sources
        accumulatedDS = dsManager.createDataSourceByDataSourceJson(outputDataSourceJson);
        // Set initial status
        accumulatedDS.setStatus(jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceStatus.NotReady);
        accumulatedDS.setCountStatus(jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceStatus.NotReady);
        debugLogger.log('RESULTS-MODE', {
            event: 'accumulated-ds-created',
            accumulatedDSId,
            originDSId: originDS.id,
            status: accumulatedDS.getStatus()
        });
        return accumulatedDS;
    });
}
/**
 * Merges new query results with existing records.
 * Deduplicates records using composite keys (originDSId_objectId).
 *
 * This function merges new records with existing records that were captured
 * before the query executed. The caller is responsible for storing the merged
 * records (typically in recordsRef or state).
 *
 * @param outputDS - The output data source (used for key generation)
 * @param newRecords - New records to merge in
 * @param existingRecords - Existing records captured before query execution (optional, defaults to empty array)
 * @returns Array of all merged records (existing + new unique records)
 */
function mergeResultsIntoAccumulated(outputDS, newRecords, existingRecords = []) {
    debugLogger.log('RESULTS-MODE', {
        event: 'merging-results-start',
        outputDSId: outputDS.id,
        existingRecordsCount: existingRecords.length,
        newRecordsCount: newRecords.length
    });
    // Build Set of existing record keys for fast lookup
    const existingKeys = new Set(existingRecords.map(record => getRecordKey(record, outputDS)));
    debugLogger.log('RESULTS-MODE', {
        event: 'existing-records-check',
        existingRecordsCount: existingRecords.length,
        existingKeysCount: existingKeys.size
    });
    // Filter new records to only include those not already in output DS
    const uniqueNewRecords = newRecords.filter(record => {
        const key = getRecordKey(record, outputDS);
        const isDuplicate = existingKeys.has(key);
        if (isDuplicate) {
            debugLogger.log('RESULTS-MODE', {
                event: 'duplicate-record-skipped',
                key,
                objectId: record.getId()
            });
        }
        return !isDuplicate;
    });
    debugLogger.log('RESULTS-MODE', {
        event: 'deduplication-complete',
        newRecordsCount: newRecords.length,
        uniqueNewRecordsCount: uniqueNewRecords.length,
        duplicatesSkipped: newRecords.length - uniqueNewRecords.length
    });
    // Merge records
    const mergedRecords = [...existingRecords, ...uniqueNewRecords];
    debugLogger.log('RESULTS-MODE', {
        event: 'merge-complete',
        totalRecordsAfterMerge: mergedRecords.length,
        existingCount: existingRecords.length,
        newUniqueCount: uniqueNewRecords.length
    });
    return mergedRecords;
}
/**
 * Removes matching records from widget-level accumulated records.
 * Matches records using composite keys (originDSId_objectId).
 *
 * This function removes records from existing accumulated records that were captured
 * before the query executed. The caller is responsible for storing the remaining
 * records (typically in recordsRef or state).
 *
 * @param outputDS - The output data source (used for key generation)
 * @param recordsToRemove - Records to remove (from query results)
 * @param existingAccumulatedRecords - Existing accumulated records captured before query execution (optional, defaults to empty array)
 * @returns Array of remaining records after removal
 */
function removeResultsFromAccumulated(outputDS, recordsToRemove, existingAccumulatedRecords = []) {
    debugLogger.log('RESULTS-MODE', {
        event: 'removing-results-start',
        outputDSId: outputDS.id,
        recordsToRemoveCount: recordsToRemove.length,
        existingAccumulatedRecordsCount: existingAccumulatedRecords.length
    });
    // If no accumulated records, nothing to remove
    if (existingAccumulatedRecords.length === 0) {
        debugLogger.log('RESULTS-MODE', {
            event: 'no-accumulated-records-to-remove',
            outputDSId: outputDS.id
        });
        return [];
    }
    // If no records to remove, return existing records unchanged
    if (recordsToRemove.length === 0) {
        debugLogger.log('RESULTS-MODE', {
            event: 'no-records-to-remove',
            outputDSId: outputDS.id,
            existingAccumulatedRecordsCount: existingAccumulatedRecords.length
        });
        return existingAccumulatedRecords;
    }
    // Build Set of keys to remove for fast lookup
    const removeKeys = new Set(recordsToRemove.map(record => getRecordKey(record, outputDS)));
    debugLogger.log('RESULTS-MODE', {
        event: 'remove-keys-built',
        existingAccumulatedRecordsCount: existingAccumulatedRecords.length,
        removeKeysCount: removeKeys.size
    });
    // Filter out records that match keys to remove
    const remainingRecords = [];
    const removedRecords = [];
    existingAccumulatedRecords.forEach(record => {
        var _a, _b, _c, _d;
        const key = getRecordKey(record, outputDS);
        const shouldRemove = removeKeys.has(key);
        if (shouldRemove) {
            removedRecords.push(record);
            debugLogger.log('RESULTS-MODE', {
                event: 'record-marked-for-removal',
                key,
                objectId: record.getId(),
                originDSId: ((_d = (_c = (_b = (_a = record.getDataSource) === null || _a === void 0 ? void 0 : _a.call(record)) === null || _b === void 0 ? void 0 : _b.getOriginDataSources()) === null || _c === void 0 ? void 0 : _c[0]) === null || _d === void 0 ? void 0 : _d.id) || 'unknown'
            });
        }
        else {
            remainingRecords.push(record);
        }
    });
    debugLogger.log('RESULTS-MODE', {
        event: 'removal-complete',
        recordsRemoved: removedRecords.length,
        remainingRecordsCount: remainingRecords.length,
        recordsToRemoveCount: recordsToRemove.length,
        matchedRecordsCount: removedRecords.length,
        unmatchedRecordsCount: recordsToRemove.length - removedRecords.length
    });
    return remainingRecords;
}
/**
 * Removes records from origin data source selections.
 * Groups records by their origin data source and updates each origin DS's selection separately.
 * This ensures map selection is updated correctly when records come from multiple origin layers.
 * Also removes graphics from graphics layer if using graphics layer highlighting.
 *
 * @param widgetId - The widget ID for publishing messages
 * @param recordsToRemove - Records to remove from selection
 * @param outputDS - The output data source (used for key generation)
 * @param useGraphicsLayer - Whether to remove graphics from graphics layer (default: false)
 * @param graphicsLayer - Graphics layer instance (required if useGraphicsLayer is true)
 */
function removeRecordsFromOriginSelections(widgetId, recordsToRemove, outputDS, useGraphicsLayer, graphicsLayer) {
    debugLogger.log('RESULTS-MODE', {
        event: 'removing-records-from-origin-selections-start',
        widgetId,
        recordsToRemoveCount: recordsToRemove.length,
        outputDSId: outputDS.id,
        useGraphicsLayer: !!useGraphicsLayer,
        hasGraphicsLayer: !!graphicsLayer
    });
    if (recordsToRemove.length === 0) {
        debugLogger.log('RESULTS-MODE', {
            event: 'no-records-to-remove-from-selection',
            widgetId
        });
        return;
    }
    // Remove from graphics layer if using graphics layer highlighting
    if (useGraphicsLayer && graphicsLayer) {
        const recordIdsToRemove = recordsToRemove.map(record => record.getId());
        debugLogger.log('RESULTS-MODE', {
            event: 'removing-graphics-from-layer',
            widgetId,
            recordIdsCount: recordIdsToRemove.length,
            graphicsLayerId: graphicsLayer.id
        });
        (0,_graphics_layer_utils__WEBPACK_IMPORTED_MODULE_2__.removeHighlightGraphics)(graphicsLayer, recordIdsToRemove);
    }
    // Group records by their origin data source
    const recordsByOriginDS = new Map();
    recordsToRemove.forEach(record => {
        var _a, _b, _c;
        const recordDS = (_a = record.getDataSource) === null || _a === void 0 ? void 0 : _a.call(record);
        let originDS = null;
        if (recordDS) {
            originDS = ((_b = recordDS.getOriginDataSources()) === null || _b === void 0 ? void 0 : _b[0]) || recordDS;
        }
        else {
            // Fallback: try to get origin from outputDS
            originDS = ((_c = outputDS.getOriginDataSources()) === null || _c === void 0 ? void 0 : _c[0]) || null;
        }
        if (originDS) {
            if (!recordsByOriginDS.has(originDS)) {
                recordsByOriginDS.set(originDS, []);
            }
            recordsByOriginDS.get(originDS).push(record);
        }
    });
    debugLogger.log('RESULTS-MODE', {
        event: 'records-grouped-by-origin',
        widgetId,
        originDSCount: recordsByOriginDS.size,
        recordsByOriginDS: Array.from(recordsByOriginDS.entries()).map(([ds, records]) => ({
            originDSId: ds.id,
            recordCount: records.length
        }))
    });
    // For each origin DS, get current selection and remove matching records
    recordsByOriginDS.forEach((recordsToRemoveForOrigin, originDS) => {
        try {
            // Get current selected records from this origin DS
            const currentSelectedRecords = originDS.getSelectedRecords() || [];
            const currentSelectedIds = originDS.getSelectedRecordIds() || [];
            debugLogger.log('RESULTS-MODE', {
                event: 'processing-origin-ds-removal',
                widgetId,
                originDSId: originDS.id,
                currentSelectedCount: currentSelectedRecords.length,
                recordsToRemoveCount: recordsToRemoveForOrigin.length
            });
            // Build Set of IDs to remove for fast lookup
            const idsToRemove = new Set(recordsToRemoveForOrigin.map(record => record.getId()));
            // Filter out records that match IDs to remove
            const remainingRecords = currentSelectedRecords.filter(record => {
                const recordId = record.getId();
                return !idsToRemove.has(recordId);
            });
            const remainingIds = remainingRecords.map(record => record.getId());
            debugLogger.log('RESULTS-MODE', {
                event: 'origin-ds-removal-filtered',
                widgetId,
                originDSId: originDS.id,
                removedCount: currentSelectedRecords.length - remainingRecords.length,
                remainingCount: remainingRecords.length
            });
            // Update selection in origin DS
            if (typeof originDS.selectRecordsByIds === 'function') {
                originDS.selectRecordsByIds(remainingIds, remainingRecords);
            }
            // Publish selection change message for this origin DS
            jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageManager.getInstance().publishMessage(new jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataRecordsSelectionChangeMessage(widgetId, remainingRecords, [originDS.id]));
            debugLogger.log('RESULTS-MODE', {
                event: 'origin-ds-selection-updated',
                widgetId,
                originDSId: originDS.id,
                remainingRecordsCount: remainingRecords.length,
                messagePublished: true
            });
        }
        catch (error) {
            debugLogger.log('RESULTS-MODE', {
                event: 'origin-ds-removal-error',
                widgetId,
                originDSId: originDS.id,
                error: error instanceof Error ? error.message : 'Unknown error',
                errorStack: error instanceof Error ? error.stack : undefined
            });
        }
    });
    debugLogger.log('RESULTS-MODE', {
        event: 'removing-records-from-origin-selections-complete',
        widgetId,
        originDSCount: recordsByOriginDS.size,
        totalRecordsRemoved: recordsToRemove.length
    });
}
/**
 * Clears all records from the accumulated results data source.
 *
 * @param accumulatedDS - The accumulated results data source to clear
 */
function clearAccumulatedResults(accumulatedDS) {
    debugLogger.log('RESULTS-MODE', {
        event: 'clearing-accumulated-results',
        accumulatedDSId: accumulatedDS.id
    });
    // Set status to NotReady to clear records
    accumulatedDS.setStatus(jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceStatus.NotReady);
    accumulatedDS.setCountStatus(jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceStatus.NotReady);
    // Clear any loaded records if possible
    // Note: May need to use DataSourceManager methods depending on ExB API
    debugLogger.log('RESULTS-MODE', {
        event: 'accumulated-results-cleared',
        accumulatedDSId: accumulatedDS.id
    });
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts":
/*!*****************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QUERYSIMPLE_SELECTION_EVENT: () => (/* binding */ QUERYSIMPLE_SELECTION_EVENT),
/* harmony export */   clearSelectionInDataSources: () => (/* binding */ clearSelectionInDataSources),
/* harmony export */   dispatchSelectionEvent: () => (/* binding */ dispatchSelectionEvent),
/* harmony export */   findClearResultsButton: () => (/* binding */ findClearResultsButton),
/* harmony export */   getOriginDataSource: () => (/* binding */ getOriginDataSource),
/* harmony export */   publishSelectionMessage: () => (/* binding */ publishSelectionMessage),
/* harmony export */   selectRecordsAndPublish: () => (/* binding */ selectRecordsAndPublish),
/* harmony export */   selectRecordsInDataSources: () => (/* binding */ selectRecordsInDataSources)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _graphics_layer_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./graphics-layer-utils */ "./your-extensions/widgets/query-simple/src/runtime/graphics-layer-utils.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/**
 * Utility functions for managing feature selection in QuerySimple widget.
 * Consolidates repeated selection logic to follow DRY principles.
 */
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_2__.createQuerySimpleDebugLogger)();
/**
 * Custom event name for QuerySimple to notify Widget of selection changes.
 */
const QUERYSIMPLE_SELECTION_EVENT = 'querysimple-selection-changed';
/**
 * Dispatches a custom selection event to the window so the main Widget can track state.
 *
 * @param widgetId - The widget ID
 * @param recordIds - Array of selected record IDs
 * @param outputDS - The output data source
 * @param queryItemConfigId - The config ID of the query that produced these results
 */
function dispatchSelectionEvent(widgetId, recordIds, outputDS, queryItemConfigId) {
    const originDS = getOriginDataSource(outputDS);
    const dataSourceId = originDS === null || originDS === void 0 ? void 0 : originDS.id;
    debugLogger.log('TASK', {
        event: 'dispatchSelectionEvent',
        widgetId,
        recordCount: recordIds.length,
        outputDsId: outputDS.id,
        queryItemConfigId
    });
    const selectionEvent = new CustomEvent(QUERYSIMPLE_SELECTION_EVENT, {
        detail: {
            widgetId,
            recordIds,
            dataSourceId,
            outputDsId: outputDS.id,
            queryItemConfigId
        },
        bubbles: true,
        cancelable: true
    });
    window.dispatchEvent(selectionEvent);
}
/**
 * Gets the origin data source from an output data source.
 * @param outputDS - The output data source
 * @returns The origin data source, or null if not available
 */
function getOriginDataSource(outputDS) {
    if (!outputDS)
        return null;
    // Try to get origin data sources
    const originDataSources = typeof outputDS.getOriginDataSources === 'function'
        ? outputDS.getOriginDataSources()
        : [];
    if (originDataSources && originDataSources.length > 0) {
        return originDataSources[0];
    }
    // If it doesn't have origin data sources, it might already be an origin data source
    // FeatureLayerDataSource should have a 'layer' property or 'getLayer' method
    if (outputDS.layer || outputDS.getLayer || outputDS.type === 'FeatureLayer') {
        return outputDS;
    }
    return null;
}
/**
 * Selects records in both the origin data source and output data source.
 * This is the standard pattern used throughout the widget for selection.
 * Optionally uses graphics layer for highlighting (independent of layer visibility).
 *
 * @param outputDS - The output data source
 * @param recordIds - Array of record IDs to select
 * @param records - Optional array of FeatureDataRecord objects for proper highlighting
 * @param useGraphicsLayer - Whether to use graphics layer for highlighting (default: false)
 * @param graphicsLayer - Graphics layer instance (required if useGraphicsLayer is true)
 * @param mapView - Map view instance (required if useGraphicsLayer is true)
 */
function selectRecordsInDataSources(outputDS_1, recordIds_1, records_1) {
    return __awaiter(this, arguments, void 0, function* (outputDS, recordIds, records, useGraphicsLayer = false, graphicsLayer, mapView) {
        var _a, _b, _c, _d, _e, _f;
        if (!outputDS)
            return;
        const originDS = getOriginDataSource(outputDS);
        // If using graphics layer, add graphics for highlighting
        if (useGraphicsLayer && graphicsLayer && mapView && records && records.length > 0) {
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'selectRecordsInDataSources-using-graphics-layer',
                recordIdsCount: recordIds.length,
                recordsCount: records.length,
                graphicsLayerId: graphicsLayer.id,
                timestamp: Date.now()
            });
            yield (0,_graphics_layer_utils__WEBPACK_IMPORTED_MODULE_1__.addHighlightGraphics)(graphicsLayer, records, mapView);
            // Still select in data source for state management (but layer selection won't show if layer is off)
            if (originDS && typeof originDS.selectRecordsByIds === 'function') {
                originDS.selectRecordsByIds(recordIds, records);
            }
        }
        else {
            // Original behavior: use layer selection
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'selectRecordsInDataSources-using-layer-selection',
                recordIdsCount: recordIds.length,
                useGraphicsLayer,
                hasGraphicsLayer: !!graphicsLayer,
                hasMapView: !!mapView,
                timestamp: Date.now()
            });
            // Select in origin data source (the actual layer)
            if (originDS && typeof originDS.selectRecordsByIds === 'function') {
                // Log layer state right before selection to see what's available when selection works
                const layer = originDS.layer || ((_b = (_a = originDS).getLayer) === null || _b === void 0 ? void 0 : _b.call(_a));
                if (layer) {
                    debugLogger.log('GRAPHICS-LAYER', {
                        event: 'selectRecordsByIds-layer-state',
                        originDSId: originDS.id,
                        layerId: layer.id,
                        hasLayerMap: !!layer.map,
                        hasLayerView: !!layer.view,
                        hasLayerParent: !!layer.parent,
                        parentType: ((_c = layer.parent) === null || _c === void 0 ? void 0 : _c.type) || 'none',
                        parentHasMap: !!((_d = layer.parent) === null || _d === void 0 ? void 0 : _d.map),
                        parentHasView: !!((_e = layer.parent) === null || _e === void 0 ? void 0 : _e.view),
                        parentHasViews: !!((_f = layer.parent) === null || _f === void 0 ? void 0 : _f.views),
                        timestamp: Date.now()
                    });
                }
                originDS.selectRecordsByIds(recordIds, records);
            }
        }
        // Always update outputDS for widget's internal state
        if (typeof outputDS.selectRecordsByIds === 'function') {
            outputDS.selectRecordsByIds(recordIds, records);
        }
    });
}
/**
 * Clears selection in both the origin data source and output data source.
 * Optionally clears graphics layer if using graphics layer mode.
 *
 * @param widgetId - The widget ID (needed to publish message)
 * @param outputDS - The output data source
 * @param useGraphicsLayer - Whether to clear graphics layer (default: false)
 * @param graphicsLayer - Graphics layer instance (required if useGraphicsLayer is true)
 */
function clearSelectionInDataSources(widgetId_1, outputDS_1) {
    return __awaiter(this, arguments, void 0, function* (widgetId, outputDS, useGraphicsLayer = false, graphicsLayer) {
        // Clear graphics layer if using graphics layer mode
        if (useGraphicsLayer && graphicsLayer) {
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'clearSelectionInDataSources-clearing-graphics-layer',
                graphicsLayerId: graphicsLayer.id,
                timestamp: Date.now()
            });
            (0,_graphics_layer_utils__WEBPACK_IMPORTED_MODULE_1__.clearGraphicsLayer)(graphicsLayer);
        }
        // Clear data source selection for state management
        yield selectRecordsInDataSources(outputDS, [], undefined, false);
        // Publish the empty selection message so the Map selection (blue boxes) clears
        if (outputDS) {
            publishSelectionMessage(widgetId, [], outputDS, true);
        }
    });
}
/**
 * Publishes a selection change message for the given records and data sources.
 *
 * @param widgetId - The widget ID
 * @param records - Array of FeatureDataRecord objects (empty array to clear)
 * @param outputDS - The output data source
 * @param alsoPublishToOutputDS - Whether to also publish a message for outputDS (default: false)
 */
function publishSelectionMessage(widgetId, records, outputDS, alsoPublishToOutputDS = false) {
    if (!outputDS)
        return;
    const originDS = getOriginDataSource(outputDS);
    if (originDS) {
        jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageManager.getInstance().publishMessage(new jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataRecordsSelectionChangeMessage(widgetId, records, [originDS.id]));
    }
    else if (alsoPublishToOutputDS) {
        jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageManager.getInstance().publishMessage(new jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataRecordsSelectionChangeMessage(widgetId, records, [outputDS.id]));
    }
    // Optionally publish to outputDS as well (for some edge cases)
    if (alsoPublishToOutputDS && originDS) {
        jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageManager.getInstance().publishMessage(new jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataRecordsSelectionChangeMessage(widgetId, records, [outputDS.id]));
    }
}
/**
 * Selects records and publishes the selection message in one call.
 * This is the most common pattern - selecting records and notifying the map.
 * Optionally uses graphics layer for highlighting (independent of layer visibility).
 *
 * @param widgetId - The widget ID
 * @param outputDS - The output data source
 * @param recordIds - Array of record IDs to select
 * @param records - Array of FeatureDataRecord objects for proper highlighting
 * @param alsoPublishToOutputDS - Whether to also publish a message for outputDS (default: false)
 * @param useGraphicsLayer - Whether to use graphics layer for highlighting (default: false)
 * @param graphicsLayer - Graphics layer instance (required if useGraphicsLayer is true)
 * @param mapView - Map view instance (required if useGraphicsLayer is true)
 */
function selectRecordsAndPublish(widgetId_1, outputDS_1, recordIds_1, records_1) {
    return __awaiter(this, arguments, void 0, function* (widgetId, outputDS, recordIds, records, alsoPublishToOutputDS = false, useGraphicsLayer = false, graphicsLayer, mapView) {
        yield selectRecordsInDataSources(outputDS, recordIds, records, useGraphicsLayer, graphicsLayer, mapView);
        publishSelectionMessage(widgetId, records, outputDS, alsoPublishToOutputDS);
    });
}
/**
 * Finds the "Clear results" button in the DOM.
 * Used when programmatically triggering the clear action.
 *
 * @returns The clear button element, or null if not found
 */
function findClearResultsButton() {
    return document.querySelector('button[aria-label="Clear results"]');
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/simple-list.tsx":
/*!**************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/simple-list.tsx ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SimpleList: () => (/* binding */ SimpleList)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _query_result_item__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./query-result-item */ "./your-extensions/widgets/query-simple/src/runtime/query-result-item.tsx");
/* harmony import */ var _query_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./query-utils */ "./your-extensions/widgets/query-simple/src/runtime/query-utils.ts");
/* harmony import */ var _useAutoHeight__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./useAutoHeight */ "./your-extensions/widgets/query-simple/src/runtime/useAutoHeight.tsx");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");

/** @jsx jsx */






const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_6__.createQuerySimpleDebugLogger)();
const getStyle = (isAutoHeight) => {
    return (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
    display: flex;
    flex: 1 1 ${isAutoHeight ? 'auto' : 0};
    overflow: auto;
    max-height: ${isAutoHeight ? 'calc(61.8vh - 100px)' : 'none'};

    .query-result-item + .query-result-item {
      margin-left: 0.5rem;
      margin-top: 0;
    }

    &.vertical {
      flex-direction: column;
      .list-items {
        position: relative;
        flex-direction: column;
      }

      .feature-info-component {
        width: 100%;
      }

      .query-result-item + .query-result-item {
        margin-left: 0;
        margin-top: 0.5rem;
      }
    }
    .list-items {
      display: flex;
    }
  `;
};
function SimpleList(props) {
    const { widgetId, outputDS, queryItem, records, direction, onEscape, onSelectChange, onRemove, expandByDefault, itemExpandStates, removedRecordIds, onRenderDone } = props;
    const [popupTemplate, setPopupTemplate] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState();
    const [defaultPopupTemplate, setDefaultPopupTemplate] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState();
    const isAutoHeight = (0,_useAutoHeight__WEBPACK_IMPORTED_MODULE_5__.useAutoHeight)();
    const resultContainerRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    // Filter out removed records
    const filteredRecords = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return (records === null || records === void 0 ? void 0 : records.filter(record => !(removedRecordIds === null || removedRecordIds === void 0 ? void 0 : removedRecordIds.has(record.getId())))) || [];
    }, [records, removedRecordIds]);
    // Notify parent when records are rendered (for auto-switch logic)
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (onRenderDone && filteredRecords.length > 0) {
            debugLogger.log('RESULTS-MODE', {
                event: 'SimpleList-onRenderDone-called',
                widgetId,
                queryItemConfigId: queryItem.configId,
                filteredRecordsCount: filteredRecords.length,
                totalRecordsCount: records.length,
                removedRecordIdsCount: (removedRecordIds === null || removedRecordIds === void 0 ? void 0 : removedRecordIds.size) || 0,
                timestamp: Date.now()
            });
            onRenderDone({ dataItems: filteredRecords });
        }
    }, [filteredRecords, onRenderDone, widgetId, queryItem.configId, records.length, removedRecordIds]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        (0,_query_utils__WEBPACK_IMPORTED_MODULE_4__.getPopupTemplate)(outputDS, queryItem).then(rs => {
            setPopupTemplate(rs.popupTemplate);
            setDefaultPopupTemplate(rs.defaultPopupTemplate);
        });
    }, [outputDS, queryItem]);
    const handleKeyUp = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((evt) => {
        if (evt.key === 'Escape') {
            evt.stopPropagation();
            onEscape();
        }
    }, [onEscape]);
    const handleKeyDown = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((evt) => {
        if (evt.key === ' ') {
            evt.preventDefault();
        }
    }, []);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { onKeyUp: handleKeyUp, onKeyDown: handleKeyDown, className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)({ vertical: direction === _config__WEBPACK_IMPORTED_MODULE_2__.ListDirection.Vertical }), css: getStyle(isAutoHeight), ref: resultContainerRef, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'list-items px-4 py-1', role: 'listbox', children: filteredRecords.map((dataItem) => {
                const recordId = dataItem.getId();
                // Use individual state from map if available, otherwise fall back to expandByDefault
                const individualExpandState = itemExpandStates === null || itemExpandStates === void 0 ? void 0 : itemExpandStates.get(recordId);
                const expandByDefaultValue = individualExpandState !== undefined ? individualExpandState : (expandByDefault !== null && expandByDefault !== void 0 ? expandByDefault : true);
                return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_result_item__WEBPACK_IMPORTED_MODULE_3__.QueryResultItem, { data: dataItem, dataSource: outputDS, widgetId: widgetId, popupTemplate: popupTemplate, defaultPopupTemplate: defaultPopupTemplate, expandByDefault: expandByDefaultValue, onClick: onSelectChange, onRemove: onRemove }, recordId));
            }) }) }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts":
/*!**********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/translations/default.ts ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
    _widgetLabel: 'QuerySimple',
    reset: 'Reset',
    searchLayer: 'Search Layer',
    apply: 'Search',
    noDataAvailable: 'Error in loading data',
    noQueryItem: 'No query',
    newQueryHint: 'Add content by clicking the "{label}" button on the configuration panel',
    attributeFilter: 'Attribute filter',
    spatialFilter: 'Spatial filter',
    spatialFilterType_CurrentMapExtent: 'Current map extent',
    spatialFilterType_InteractiveDrawMode: 'Drawn graphic',
    results: 'Results',
    featuresDisplayed: 'Features displayed',
    clearResult: 'Clear results',
    checkResult: 'Check results',
    mapMustBeVisible: 'Map must be visible',
    chooseFilterType: 'Choose the filter type',
    chooseGeometryType: 'Choose the geometry type',
    clearDrawing: 'Clear the graphic when applying',
    featureFromDs: 'Selecting features from data source',
    featureFromMap: 'Geometries from a map',
    chooseFilterLayer: 'Choose a filter layer',
    selectedRecords: '{num} records are selected for the filter',
    spatialNotAvailable: 'Spatial filter is not available here.',
    spatialNotAvailableDesc: 'Spatial filter is not supported for a data source that already contains a spatial query.',
    preconfigured: 'Preconfigured',
    runtime: 'Runtime',
    selectLoaded: 'Select loaded',
    retrieving: 'Retrieving query results...',
    zoomToSelected: 'Zoom to selected',
    queryTab: 'Query',
    resultsTab: 'Results',
    expandAll: 'Expand all',
    collapseAll: 'Collapse all',
    addToMap: 'Add to map',
    resultsMode: 'Results mode',
    createNewResults: 'Create new results',
    addToCurrentResults: 'Add to current results',
    removeFromCurrentResults: 'Remove from current results',
    resultsModeDisabledRemove: 'Remove from current results (no accumulated results)',
    resultsModeDesc: 'Controls how query results are combined:\n New: Each query replaces previous results\n Add: New results are added to existing results\n Remove: Matching results are removed from existing results',
    resultsModeNew: 'New',
    resultsModeAdd: 'Add',
    resultsModeRemove: 'Remove'
});


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/useAutoHeight.tsx":
/*!****************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/useAutoHeight.tsx ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   useAutoHeight: () => (/* binding */ useAutoHeight)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var _widget_context__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./widget-context */ "./your-extensions/widgets/query-simple/src/runtime/widget-context.tsx");
/** @jsx jsx */



function useAutoHeight() {
    const layoutInfo = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useContext(_widget_context__WEBPACK_IMPORTED_MODULE_2__.QueryWidgetContext);
    let layoutId;
    let layoutItemId;
    if (layoutInfo.includes(':')) {
        const r = layoutInfo.split(':');
        layoutId = r[0];
        layoutItemId = r[1];
    }
    const isAuto = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        var _a, _b, _c, _d;
        const layoutItem = (_b = (_a = state.appConfig.layouts[layoutId]) === null || _a === void 0 ? void 0 : _a.content) === null || _b === void 0 ? void 0 : _b[layoutItemId];
        return ((_d = (_c = layoutItem === null || layoutItem === void 0 ? void 0 : layoutItem.setting) === null || _c === void 0 ? void 0 : _c.autoProps) === null || _d === void 0 ? void 0 : _d.height) === jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.LayoutItemSizeModes.Auto;
    });
    return isAuto;
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/widget-config.ts":
/*!***************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/widget-config.ts ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getWidgetRuntimeDataMap: () => (/* binding */ getWidgetRuntimeDataMap)
/* harmony export */ });
/* harmony import */ var jimu_icons_svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-icons/svg/outlined/suggested/warning.svg */ "./jimu-icons/svg/outlined/suggested/warning.svg");
/* harmony import */ var jimu_icons_svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-icons/svg/outlined/suggested/error.svg */ "./jimu-icons/svg/outlined/suggested/error.svg");
/* harmony import */ var jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var jimu_icons_svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-icons/svg/outlined/directional/arrow-left.svg */ "./jimu-icons/svg/outlined/directional/arrow-left.svg");
/* harmony import */ var jimu_icons_svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var jimu_icons_svg_outlined_directional_right_svg__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-icons/svg/outlined/directional/right.svg */ "./jimu-icons/svg/outlined/directional/right.svg");
/* harmony import */ var jimu_icons_svg_outlined_directional_right_svg__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_directional_right_svg__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var jimu_icons_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-icons/svg/outlined/editor/trash.svg */ "./jimu-icons/svg/outlined/editor/trash.svg");
/* harmony import */ var jimu_icons_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var jimu_icons_svg_outlined_application_more_horizontal_svg__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jimu-icons/svg/outlined/application/more-horizontal.svg */ "./jimu-icons/svg/outlined/application/more-horizontal.svg");
/* harmony import */ var jimu_icons_svg_outlined_application_more_horizontal_svg__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_application_more_horizontal_svg__WEBPACK_IMPORTED_MODULE_5__);






const getWidgetRuntimeDataMap = () => ({
    iconMap: {
        iconQuery: __webpack_require__(/*! ../../icon.svg */ "./your-extensions/widgets/query-simple/icon.svg"),
        iconWarning: (jimu_icons_svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_0___default()),
        iconError: (jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_1___default()),
        arrowNavBack: (jimu_icons_svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2___default()),
        arrowRight: (jimu_icons_svg_outlined_directional_right_svg__WEBPACK_IMPORTED_MODULE_3___default()),
        toolDelete: (jimu_icons_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_4___default()),
        iconMore: (jimu_icons_svg_outlined_application_more_horizontal_svg__WEBPACK_IMPORTED_MODULE_5___default())
    }
});


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/widget-context.tsx":
/*!*****************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/widget-context.tsx ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryWidgetContext: () => (/* binding */ QueryWidgetContext)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");

const QueryWidgetContext = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createContext(null);


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/version-manager.ts":
/*!*********************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/version-manager.ts ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   versionManager: () => (/* binding */ versionManager)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");

class VersionManager extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.BaseVersionManager {
    constructor() {
        super(...arguments);
        this.versions = [{
                version: '1.0.0',
                description: 'The first version.',
                upgrader: (oldConfig) => {
                    return oldConfig;
                }
            }];
    }
}
const versionManager = new VersionManager();


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/version.ts":
/*!*************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/version.ts ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   WIDGET_VERSION: () => (/* binding */ WIDGET_VERSION)
/* harmony export */ });
/**
 * Widget version number.
 * Base version matches Experience Builder version (1.19.0).
 * Release number increments on major changes (001, 002, 003, ...).
 * Minor version increments on smaller fixes between major releases (r015.1, r015.2, ...).
 *
 * To increment:
 * - Major change: Update RELEASE_NUMBER (e.g., 015 -> 016) and reset MINOR_VERSION to 0
 * - Minor fix: Increment MINOR_VERSION (e.g., 1 -> 2) while keeping same RELEASE_NUMBER
 */
const BASE_VERSION = '1.19.0';
const RELEASE_NUMBER = '017'; // Increment on major changes (001, 002, 003, ...)
const MINOR_VERSION = '41'; // Increment on minor fixes between major releases (1, 2, 3, ...)
const WIDGET_VERSION = MINOR_VERSION && MINOR_VERSION !== '0'
    ? `${BASE_VERSION}-r${RELEASE_NUMBER}.${MINOR_VERSION}`
    : `${BASE_VERSION}-r${RELEASE_NUMBER}`;


/***/ }),

/***/ "@emotion/react/jsx-runtime":
/*!************************************!*\
  !*** external "jimu-core/emotion" ***!
  \************************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE__emotion_react_jsx_runtime__;

/***/ }),

/***/ "jimu-arcgis":
/*!******************************!*\
  !*** external "jimu-arcgis" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_arcgis__;

/***/ }),

/***/ "jimu-core":
/*!****************************!*\
  !*** external "jimu-core" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_core__;

/***/ }),

/***/ "jimu-layouts/layout-runtime":
/*!**********************************************!*\
  !*** external "jimu-layouts/layout-runtime" ***!
  \**********************************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_layouts_layout_runtime__;

/***/ }),

/***/ "jimu-theme":
/*!*****************************!*\
  !*** external "jimu-theme" ***!
  \*****************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_theme__;

/***/ }),

/***/ "jimu-ui":
/*!**************************!*\
  !*** external "jimu-ui" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_ui__;

/***/ }),

/***/ "jimu-ui/basic/sql-expression-runtime":
/*!*******************************************************!*\
  !*** external "jimu-ui/basic/sql-expression-runtime" ***!
  \*******************************************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_ui_basic_sql_expression_runtime__;

/***/ }),

/***/ "widgets/shared-code/common":
/*!*********************************************!*\
  !*** external "widgets/shared-code/common" ***!
  \*********************************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_widgets_shared_code_common__;

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/publicPath */
/******/ 	(() => {
/******/ 		__webpack_require__.p = "";
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry needs to be wrapped in an IIFE because it needs to be isolated against other entry modules.
(() => {
/*!******************************************!*\
  !*** ./jimu-core/lib/set-public-path.ts ***!
  \******************************************/
/**
 * Webpack will replace __webpack_public_path__ with __webpack_require__.p to set the public path dynamically.
 * The reason why we can't set the publicPath in webpack config is: we change the publicPath when download.
 * */
__webpack_require__.p = window.jimuConfig.baseUrl;

})();

// This entry needs to be wrapped in an IIFE because it needs to be in strict mode.
(() => {
"use strict";
/*!*********************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/widget.tsx ***!
  \*********************************************************************/
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   __set_webpack_public_path__: () => (/* binding */ __set_webpack_public_path__),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _widget_config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./widget-config */ "./your-extensions/widgets/query-simple/src/runtime/widget-config.ts");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");
/* harmony import */ var _version_manager__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../version-manager */ "./your-extensions/widgets/query-simple/src/version-manager.ts");
/* harmony import */ var _query_task_list__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./query-task-list */ "./your-extensions/widgets/query-simple/src/runtime/query-task-list.tsx");
/* harmony import */ var _query_task_list_inline__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./query-task-list-inline */ "./your-extensions/widgets/query-simple/src/runtime/query-task-list-inline.tsx");
/* harmony import */ var _query_task_list_popper_wrapper__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./query-task-list-popper-wrapper */ "./your-extensions/widgets/query-simple/src/runtime/query-task-list-popper-wrapper.tsx");
/* harmony import */ var _widget_context__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./widget-context */ "./your-extensions/widgets/query-simple/src/runtime/widget-context.tsx");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/* harmony import */ var _graphics_layer_utils__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./graphics-layer-utils */ "./your-extensions/widgets/query-simple/src/runtime/graphics-layer-utils.ts");
/* harmony import */ var _selection_utils__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");
/* harmony import */ var _version__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../version */ "./your-extensions/widgets/query-simple/src/version.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};

/** @jsx jsx */















const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_12__.createQuerySimpleDebugLogger)();
const { iconMap } = (0,_widget_config__WEBPACK_IMPORTED_MODULE_5__.getWidgetRuntimeDataMap)();
/**
 * Custom event name for QuerySimple to notify HelperSimple of widget open/close state.
 */
const QUERYSIMPLE_WIDGET_STATE_EVENT = 'querysimple-widget-state-changed';
/**
 * Custom event name for requesting restoration when identify popup closes.
 */
const RESTORE_ON_IDENTIFY_CLOSE_EVENT = 'querysimple-restore-on-identify-close';
class Widget extends jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.PureComponent {
    constructor() {
        super(...arguments);
        this.lastProcessedHash = '';
        this.state = {
            resultsMode: _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.NewSelection, // Default mode
            activeTab: 'query'
        };
        this.handleTabChange = (activeTab) => {
            this.setState({ activeTab });
        };
        this.widgetRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.createRef();
        this.visibilityObserver = null;
        this.visibilityCheckInterval = null;
        this.graphicsLayerRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.createRef();
        this.mapViewRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.createRef();
        /**
         * Notifies HelperSimple of selection changes.
         * Called by QueryTaskResult when selection is made.
         *
         * @param recordIds - Array of selected record IDs
         * @param dataSourceId - Optional data source ID
         */
        this.notifyHelperSimpleOfSelection = (recordIds, dataSourceId) => {
            const { id } = this.props;
            const event = new CustomEvent(_selection_utils__WEBPACK_IMPORTED_MODULE_14__.QUERYSIMPLE_SELECTION_EVENT, {
                detail: {
                    widgetId: id,
                    recordIds,
                    dataSourceId
                },
                bubbles: true,
                cancelable: true
            });
            window.dispatchEvent(event);
        };
        /**
         * Sets up visibility detection to track when the widget panel is open/closed.
         * Uses IntersectionObserver if available, falls back to periodic checking.
         */
        this.setupVisibilityDetection = () => {
            // Wait for next tick to ensure ref is set
            setTimeout(() => {
                if (!this.widgetRef.current) {
                    debugLogger.log('WIDGET-STATE', {
                        event: 'visibility-detection-setup-failed',
                        widgetId: this.props.id,
                        reason: 'widget-ref-not-available'
                    });
                    return;
                }
                const element = this.widgetRef.current;
                // Method 1: IntersectionObserver (most efficient)
                if ('IntersectionObserver' in window) {
                    this.visibilityObserver = new IntersectionObserver((entries) => {
                        const entry = entries[0];
                        const isVisible = entry.isIntersecting && entry.intersectionRatio > 0;
                        // Only log if state changed
                        if (this.state.isPanelVisible !== isVisible) {
                            this.setState({ isPanelVisible: isVisible });
                            this.logVisibilityChange(isVisible, 'IntersectionObserver');
                            this.notifyHelperSimpleOfPanelState(isVisible);
                        }
                    }, {
                        threshold: [0, 0.1, 1.0], // Trigger at 0%, 10%, and 100% visibility
                        rootMargin: '0px'
                    });
                    this.visibilityObserver.observe(element);
                    debugLogger.log('WIDGET-STATE', {
                        event: 'visibility-detection-setup',
                        widgetId: this.props.id,
                        method: 'IntersectionObserver'
                    });
                }
                else {
                    // Method 2: Fallback to periodic checking
                    this.visibilityCheckInterval = window.setInterval(() => {
                        const isVisible = this.checkVisibility();
                        if (this.state.isPanelVisible !== isVisible) {
                            this.setState({ isPanelVisible: isVisible });
                            this.logVisibilityChange(isVisible, 'periodic-check');
                            this.notifyHelperSimpleOfPanelState(isVisible);
                        }
                    }, 250); // Check every 250ms
                    debugLogger.log('WIDGET-STATE', {
                        event: 'visibility-detection-setup',
                        widgetId: this.props.id,
                        method: 'periodic-check'
                    });
                }
            }, 100);
        };
        /**
         * Cleans up visibility detection observers/intervals.
         */
        this.cleanupVisibilityDetection = () => {
            if (this.visibilityObserver) {
                this.visibilityObserver.disconnect();
                this.visibilityObserver = null;
            }
            if (this.visibilityCheckInterval !== null) {
                clearInterval(this.visibilityCheckInterval);
                this.visibilityCheckInterval = null;
            }
        };
        /**
         * Handles map view change from JimuMapViewComponent.
         * When map view becomes available, initialize graphics layer if enabled.
         */
        this.handleJimuMapViewChanged = (jimuMapView) => {
            var _a;
            const { id, config } = this.props;
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'handleJimuMapViewChanged',
                widgetId: id,
                hasJimuMapView: !!jimuMapView,
                hasView: !!(jimuMapView === null || jimuMapView === void 0 ? void 0 : jimuMapView.view),
                viewType: ((_a = jimuMapView === null || jimuMapView === void 0 ? void 0 : jimuMapView.view) === null || _a === void 0 ? void 0 : _a.type) || 'none',
                timestamp: Date.now()
            });
            // Store JimuMapView in state
            this.setState({ jimuMapView: jimuMapView || undefined });
            // If map view is available and graphics layer is enabled, initialize it
            if ((jimuMapView === null || jimuMapView === void 0 ? void 0 : jimuMapView.view) && config.useGraphicsLayerForHighlight && !this.graphicsLayerRef.current) {
                this.initializeGraphicsLayer(jimuMapView.view);
            }
        };
        /**
         * Initializes the graphics layer using the provided map view.
         */
        this.initializeGraphicsLayer = (mapView) => __awaiter(this, void 0, void 0, function* () {
            const { id } = this.props;
            try {
                // Create or get graphics layer
                const graphicsLayer = yield (0,_graphics_layer_utils__WEBPACK_IMPORTED_MODULE_13__.createOrGetGraphicsLayer)(id, mapView);
                if (!graphicsLayer) {
                    debugLogger.log('GRAPHICS-LAYER', {
                        event: 'initializeGraphicsLayer-failed',
                        widgetId: id,
                        reason: 'graphics-layer-creation-failed',
                        timestamp: Date.now()
                    });
                    return;
                }
                // Store references
                this.mapViewRef.current = mapView;
                this.graphicsLayerRef.current = graphicsLayer;
                // Update state to force re-render and update props
                this.setState({ graphicsLayerInitialized: true });
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'initializeGraphicsLayer-success',
                    widgetId: id,
                    graphicsLayerId: graphicsLayer.id,
                    viewType: mapView.type || 'unknown',
                    timestamp: Date.now()
                });
            }
            catch (error) {
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'initializeGraphicsLayer-error',
                    widgetId: id,
                    error: error instanceof Error ? error.message : String(error),
                    errorStack: error instanceof Error ? error.stack : undefined,
                    timestamp: Date.now()
                });
            }
        });
        /**
         * Initializes graphics layer lazily when outputDS becomes available.
         * Now uses the map view from JimuMapViewComponent instead of trying to get it from data source.
         */
        this.initializeGraphicsLayerFromOutputDS = (outputDS) => __awaiter(this, void 0, void 0, function* () {
            var _a;
            const { id, config } = this.props;
            // Only initialize if enabled and not already initialized
            if (!config.useGraphicsLayerForHighlight || this.graphicsLayerRef.current) {
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'initializeGraphicsLayerFromOutputDS-skipped',
                    widgetId: id,
                    reason: !config.useGraphicsLayerForHighlight ? 'not-enabled' : 'already-initialized',
                    timestamp: Date.now()
                });
                return;
            }
            // Use map view from JimuMapViewComponent if available
            const mapView = ((_a = this.state.jimuMapView) === null || _a === void 0 ? void 0 : _a.view) || this.mapViewRef.current;
            if (!mapView) {
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'initializeGraphicsLayerFromOutputDS-skipped',
                    widgetId: id,
                    reason: 'map-view-not-available-yet',
                    outputDSId: outputDS.id,
                    hasJimuMapView: !!this.state.jimuMapView,
                    timestamp: Date.now()
                });
                return;
            }
            // Initialize graphics layer with the map view
            yield this.initializeGraphicsLayer(mapView);
        });
        /**
         * Cleans up the graphics layer when widget unmounts or config changes.
         */
        this.cleanupGraphicsLayer = () => {
            const { id } = this.props;
            const mapView = this.mapViewRef.current;
            if (mapView) {
                (0,_graphics_layer_utils__WEBPACK_IMPORTED_MODULE_13__.cleanupGraphicsLayer)(id, mapView);
                this.mapViewRef.current = null;
                this.graphicsLayerRef.current = null;
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'cleanupGraphicsLayer-complete',
                    widgetId: id,
                    timestamp: Date.now()
                });
            }
        };
        /**
         * Clears the graphics layer if it exists.
         * This is called when clearing results or switching queries in New mode to ensure graphics are removed.
         */
        this.clearGraphicsLayerIfExists = () => {
            const { config } = this.props;
            const graphicsLayer = this.graphicsLayerRef.current;
            if (config.useGraphicsLayerForHighlight && graphicsLayer) {
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'clearGraphicsLayerIfExists-called',
                    widgetId: this.props.id,
                    graphicsLayerId: graphicsLayer.id,
                    graphicsCount: graphicsLayer.graphics.length,
                    timestamp: Date.now()
                });
                const { clearGraphicsLayer } = __webpack_require__(/*! ./graphics-layer-utils */ "./your-extensions/widgets/query-simple/src/runtime/graphics-layer-utils.ts");
                clearGraphicsLayer(graphicsLayer);
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'clearGraphicsLayerIfExists-complete',
                    widgetId: this.props.id,
                    graphicsLayerId: graphicsLayer.id,
                    timestamp: Date.now()
                });
            }
            else {
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'clearGraphicsLayerIfExists-skipped',
                    widgetId: this.props.id,
                    reason: !config.useGraphicsLayerForHighlight ? 'not-enabled' : 'no-graphics-layer',
                    hasGraphicsLayer: !!graphicsLayer,
                    timestamp: Date.now()
                });
            }
        };
        /**
         * Checks if the widget element is currently visible.
         * Fallback method when IntersectionObserver is not available.
         */
        this.checkVisibility = () => {
            if (!this.widgetRef.current)
                return false;
            const element = this.widgetRef.current;
            const style = window.getComputedStyle(element);
            const rect = element.getBoundingClientRect();
            const isVisible = (style.display !== 'none' &&
                style.visibility !== 'hidden' &&
                style.opacity !== '0' &&
                rect.width > 0 &&
                rect.height > 0 &&
                rect.top < window.innerHeight &&
                rect.bottom > 0 &&
                rect.left < window.innerWidth &&
                rect.right > 0);
            return isVisible;
        };
        /**
         * Tracks selection changes from query-result.
         * In "Add to" or "Remove from" modes, uses accumulated records count for restoration.
         */
        this.handleSelectionChange = (event) => {
            var _a;
            const customEvent = event;
            const { id } = this.props;
            // Only track if this is for our widget
            if (customEvent.detail.widgetId !== id) {
                return;
            }
            const hasSelection = customEvent.detail.recordIds && customEvent.detail.recordIds.length > 0;
            // If the panel is NOT visible, and we are receiving an EMPTY selection,
            // it's almost certainly our own 'clearSelectionFromMap' logic firing.
            // We should IGNORE this so we don't wipe out the lastSelection state.
            if (!this.state.isPanelVisible && !hasSelection) {
                debugLogger.log('RESTORE', {
                    event: 'handleSelectionChange-ignoring-empty-selection-while-panel-closed',
                    widgetId: id,
                    timestamp: Date.now()
                });
                return;
            }
            // In "Add to" or "Remove from" mode, use accumulated records count for restoration
            // The accumulated records are the source of truth for what should be restored
            const isAccumulationMode = this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.AddToSelection ||
                this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection;
            const accumulatedRecordsCount = ((_a = this.state.accumulatedRecords) === null || _a === void 0 ? void 0 : _a.length) || 0;
            const selectionCount = isAccumulationMode && accumulatedRecordsCount > 0
                ? accumulatedRecordsCount
                : (hasSelection ? customEvent.detail.recordIds.length : 0);
            // If selection is cleared and we're in Remove mode, reset to NewSelection mode
            // Remove mode requires selection to function, so it should be disabled when selection is empty
            const shouldResetMode = !hasSelection &&
                selectionCount === 0 &&
                this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection;
            debugLogger.log('RESTORE', {
                event: 'handleSelectionChange-updating-state',
                widgetId: id,
                resultsMode: this.state.resultsMode,
                isAccumulationMode,
                eventRecordIdsCount: customEvent.detail.recordIds.length,
                hasSelectionFromEvent: hasSelection,
                accumulatedRecordsCountBefore: accumulatedRecordsCount,
                calculatedSelectionCount: selectionCount,
                'will-set-hasSelection': selectionCount > 0,
                'will-set-lastSelection': hasSelection && !!customEvent.detail.outputDsId && !!customEvent.detail.queryItemConfigId,
                'will-reset-mode': shouldResetMode,
                decisionLogic: {
                    'isAccumulationMode': isAccumulationMode,
                    'accumulatedRecordsCount > 0': accumulatedRecordsCount > 0,
                    'use-accumulated-count': isAccumulationMode && accumulatedRecordsCount > 0,
                    'use-event-count': !(isAccumulationMode && accumulatedRecordsCount > 0),
                    'should-reset-mode': shouldResetMode
                }
            });
            this.setState(Object.assign({ hasSelection: selectionCount > 0, selectionRecordCount: selectionCount, 
                // Store lastSelection for compatibility, but restoration will use accumulatedRecords in Add/Remove modes
                lastSelection: hasSelection && customEvent.detail.outputDsId && customEvent.detail.queryItemConfigId
                    ? {
                        recordIds: customEvent.detail.recordIds,
                        outputDsId: customEvent.detail.outputDsId,
                        queryItemConfigId: customEvent.detail.queryItemConfigId
                    }
                    : undefined }, (shouldResetMode ? {
                resultsMode: _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.NewSelection,
                accumulatedRecords: [] // Also clear accumulated records when resetting mode
            } : {})));
            debugLogger.log('RESTORE', {
                event: 'handleSelectionChange-state-updated',
                widgetId: id,
                'new-hasSelection': selectionCount > 0,
                'new-selectionRecordCount': selectionCount,
                'new-lastSelection-recordIds-count': hasSelection && customEvent.detail.outputDsId && customEvent.detail.queryItemConfigId
                    ? customEvent.detail.recordIds.length
                    : 0,
                'mode-reset': shouldResetMode,
                'new-mode': shouldResetMode ? _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.NewSelection : this.state.resultsMode,
                'note': shouldResetMode
                    ? 'Mode reset to NewSelection because selection was cleared in Remove mode'
                    : 'lastSelection-only-contains-current-query-records-not-all-accumulated-records'
            });
        };
        /**
         * Handles restore request when identify popup closes.
         * Only restores if widget panel is open.
         * In "Add to" or "Remove from" modes, restores all accumulated records.
         */
        this.handleRestoreOnIdentifyClose = (event) => {
            var _a, _b, _c;
            const customEvent = event;
            const { id } = this.props;
            // Only handle if this is for our widget
            if (customEvent.detail.widgetId !== id) {
                return;
            }
            const isWidgetOpen = this.state.isPanelVisible === true;
            const isAccumulationMode = this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.AddToSelection ||
                this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection;
            debugLogger.log('RESTORE', {
                event: 'identify-popup-closed-restore-requested',
                widgetId: id,
                isWidgetOpen,
                resultsMode: this.state.resultsMode,
                isAccumulationMode,
                eventRecordIdsCount: customEvent.detail.recordIds.length,
                hasSelection: this.state.hasSelection || false,
                accumulatedRecordsCount: ((_a = this.state.accumulatedRecords) === null || _a === void 0 ? void 0 : _a.length) || 0,
                hasLastSelection: !!this.state.lastSelection,
                lastSelectionRecordCount: ((_b = this.state.lastSelection) === null || _b === void 0 ? void 0 : _b.recordIds.length) || 0,
                outputDsId: customEvent.detail.outputDsId,
                queryItemConfigId: customEvent.detail.queryItemConfigId
            });
            // Only restore if widget is open
            if (!isWidgetOpen) {
                debugLogger.log('RESTORE', {
                    event: 'identify-popup-closed-restore-skipped-widget-closed',
                    widgetId: id,
                    recordCount: customEvent.detail.recordIds.length
                });
                return;
            }
            // HYPOTHESIS: Should always check accumulatedRecords first, regardless of mode
            if (this.state.accumulatedRecords && this.state.accumulatedRecords.length > 0) {
                debugLogger.log('RESTORE', {
                    event: 'identify-popup-closed-found-accumulated-records',
                    widgetId: id,
                    resultsMode: this.state.resultsMode,
                    isAccumulationMode,
                    accumulatedRecordsCount: this.state.accumulatedRecords.length,
                    'should-use-accumulated': true,
                    'current-condition-check': isAccumulationMode,
                    'condition-result': isAccumulationMode
                });
            }
            // In Add/Remove modes, check accumulated records instead of lastSelection
            if (isAccumulationMode) {
                if (!this.state.hasSelection || !this.state.accumulatedRecords || this.state.accumulatedRecords.length === 0) {
                    debugLogger.log('RESTORE', {
                        event: 'identify-popup-closed-restore-skipped-no-accumulated-records',
                        widgetId: id,
                        hasSelection: this.state.hasSelection,
                        accumulatedRecordsCount: ((_c = this.state.accumulatedRecords) === null || _c === void 0 ? void 0 : _c.length) || 0,
                        'hypothesis': 'hasSelection-is-false-or-no-accumulated-records',
                        'maybe-hasSelection-should-be-based-on-accumulated-records': true
                    });
                    return;
                }
                // Restore all accumulated records (grouped by origin DS)
                debugLogger.log('RESTORE', {
                    event: 'identify-popup-closed-restoring-accumulated-records',
                    widgetId: id,
                    accumulatedRecordsCount: this.state.accumulatedRecords.length
                });
                this.addSelectionToMap();
                return;
            }
            // HYPOTHESIS: Maybe accumulatedRecords exist but we're not in accumulation mode?
            if (this.state.accumulatedRecords && this.state.accumulatedRecords.length > 0 && !isAccumulationMode) {
                debugLogger.log('RESTORE', {
                    event: 'identify-popup-closed-accumulated-records-exist-but-not-accumulation-mode',
                    widgetId: id,
                    resultsMode: this.state.resultsMode,
                    isAccumulationMode,
                    accumulatedRecordsCount: this.state.accumulatedRecords.length,
                    'hypothesis': 'accumulated-records-exist-but-mode-is-not-add-or-remove',
                    'should-we-still-use-them': 'NEEDS-INVESTIGATION'
                });
            }
            // For "New" mode, use original validation logic
            // Check if we have matching selection state
            if (!this.state.hasSelection || !this.state.lastSelection) {
                debugLogger.log('RESTORE', {
                    event: 'identify-popup-closed-restore-skipped-no-selection',
                    widgetId: id,
                    hasSelection: this.state.hasSelection,
                    hasLastSelection: !!this.state.lastSelection
                });
                return;
            }
            // Verify the outputDsId matches
            if (this.state.lastSelection.outputDsId !== customEvent.detail.outputDsId) {
                debugLogger.log('RESTORE', {
                    event: 'identify-popup-closed-restore-skipped-ds-mismatch',
                    widgetId: id,
                    ourOutputDsId: this.state.lastSelection.outputDsId,
                    requestedOutputDsId: customEvent.detail.outputDsId
                });
                return;
            }
            // Verify the queryItemConfigId matches (optional but good to check)
            if (this.state.lastSelection.queryItemConfigId !== customEvent.detail.queryItemConfigId) {
                debugLogger.log('RESTORE', {
                    event: 'identify-popup-closed-restore-skipped-query-mismatch',
                    widgetId: id,
                    ourQueryItemConfigId: this.state.lastSelection.queryItemConfigId,
                    requestedQueryItemConfigId: customEvent.detail.queryItemConfigId
                });
                return;
            }
            // Restore selection to map (reuse existing method)
            debugLogger.log('RESTORE', {
                event: 'identify-popup-closed-restoring-selection',
                widgetId: id,
                recordCount: customEvent.detail.recordIds.length,
                outputDsId: customEvent.detail.outputDsId
            });
            this.addSelectionToMap();
        };
        /**
         * Adds selection to map when widget opens (reuses Add to Map logic).
         * In "Add to" or "Remove from" modes, restores all accumulated records grouped by origin data source.
         */
        this.addSelectionToMap = () => {
            const { lastSelection, accumulatedRecords, resultsMode } = this.state;
            const { id } = this.props;
            debugLogger.log('RESTORE', {
                event: 'addSelectionToMap-called',
                widgetId: id,
                resultsMode,
                hasAccumulatedRecords: !!(accumulatedRecords && accumulatedRecords.length > 0),
                accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0,
                hasLastSelection: !!lastSelection,
                lastSelectionRecordCount: (lastSelection === null || lastSelection === void 0 ? void 0 : lastSelection.recordIds.length) || 0,
                lastSelectionOutputDsId: lastSelection === null || lastSelection === void 0 ? void 0 : lastSelection.outputDsId
            });
            // In Add/Remove modes, use accumulated records for restoration
            const isAccumulationMode = resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.AddToSelection ||
                resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection;
            // HYPOTHESIS: Should always check accumulatedRecords first, regardless of mode
            // Adding log to see if accumulatedRecords exist but we're not using them
            if (accumulatedRecords && accumulatedRecords.length > 0) {
                debugLogger.log('RESTORE', {
                    event: 'addSelectionToMap-found-accumulated-records',
                    widgetId: id,
                    resultsMode,
                    isAccumulationMode,
                    accumulatedRecordsCount: accumulatedRecords.length,
                    'should-use-accumulated': true,
                    'current-condition-check': isAccumulationMode && accumulatedRecords && accumulatedRecords.length > 0,
                    'condition-result': isAccumulationMode && accumulatedRecords && accumulatedRecords.length > 0
                });
            }
            else {
                debugLogger.log('RESTORE', {
                    event: 'addSelectionToMap-no-accumulated-records',
                    widgetId: id,
                    resultsMode,
                    isAccumulationMode,
                    accumulatedRecordsCount: 0,
                    'will-fallback-to-lastSelection': !!lastSelection
                });
            }
            if (isAccumulationMode && accumulatedRecords && accumulatedRecords.length > 0) {
                // Group accumulated records by origin data source
                const recordsByOriginDS = new Map();
                const dsManager = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance();
                accumulatedRecords.forEach((record, index) => {
                    var _a, _b, _c;
                    const recordId = record.getId();
                    let originDS = null;
                    // Method 1: Try to get from record.getDataSource()
                    const recordDS = (_a = record.getDataSource) === null || _a === void 0 ? void 0 : _a.call(record);
                    if (recordDS) {
                        originDS = ((_b = recordDS.getOriginDataSources()) === null || _b === void 0 ? void 0 : _b[0]) || recordDS;
                        debugLogger.log('RESTORE', {
                            event: 'found-origin-ds-from-record-ds',
                            widgetId: id,
                            recordIndex: index,
                            recordId,
                            originDSId: (originDS === null || originDS === void 0 ? void 0 : originDS.id) || 'null',
                            method: 'record.getDataSource()'
                        });
                    }
                    // Method 2: If that failed, search all data sources for a record with matching ID
                    if (!originDS) {
                        const dsMap = dsManager.getDataSources();
                        const allDataSources = Object.values(dsMap);
                        for (const ds of allDataSources) {
                            // Check if this is a FeatureLayerDataSource by checking for getAllLoadedRecords method
                            if (ds && typeof ds.getAllLoadedRecords === 'function') {
                                try {
                                    // Check if this DS has the record
                                    const allRecords = ds.getAllLoadedRecords() || [];
                                    const matchingRecord = allRecords.find((r) => r.getId() === recordId);
                                    if (matchingRecord) {
                                        // Found the record - get origin DS from this DS
                                        originDS = ((_c = ds.getOriginDataSources()) === null || _c === void 0 ? void 0 : _c[0]) || ds;
                                        debugLogger.log('RESTORE', {
                                            event: 'found-origin-ds-via-search',
                                            widgetId: id,
                                            recordIndex: index,
                                            recordId,
                                            originDSId: originDS.id,
                                            method: 'searched-all-data-sources',
                                            searchedDSId: ds.id
                                        });
                                        break;
                                    }
                                }
                                catch (error) {
                                    // Continue searching
                                }
                            }
                        }
                    }
                    if (originDS) {
                        if (!recordsByOriginDS.has(originDS)) {
                            recordsByOriginDS.set(originDS, []);
                        }
                        recordsByOriginDS.get(originDS).push(record);
                    }
                    else {
                        debugLogger.log('RESTORE', {
                            event: 'could-not-find-origin-ds-for-record',
                            widgetId: id,
                            recordIndex: index,
                            recordId,
                            warning: 'record-will-be-skipped'
                        });
                    }
                });
                debugLogger.log('RESTORE', {
                    event: 'panel-opened-restoring-accumulated-records',
                    widgetId: id,
                    resultsMode,
                    accumulatedRecordsCount: accumulatedRecords.length,
                    originDSCount: recordsByOriginDS.size
                });
                // Restore selection for each origin data source
                const { selectRecordsAndPublish } = __webpack_require__(/*! ./selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");
                const useGraphicsLayer = this.props.config.useGraphicsLayerForHighlight;
                const graphicsLayer = this.graphicsLayerRef.current || undefined;
                const mapView = this.mapViewRef.current || undefined;
                recordsByOriginDS.forEach((records, originDS) => {
                    const recordIds = records.map(r => r.getId());
                    try {
                        // Use originDS directly (not outputDS) since records are selected in origin layers
                        // Use async IIFE since forEach callback can't be async
                        ;
                        (() => __awaiter(this, void 0, void 0, function* () {
                            yield selectRecordsAndPublish(id, originDS, recordIds, records, true, useGraphicsLayer, graphicsLayer, mapView);
                        }))();
                        debugLogger.log('RESTORE', {
                            event: 'panel-opened-restored-origin-ds',
                            widgetId: id,
                            originDSId: originDS.id,
                            recordCount: records.length,
                            zoomExecuted: false
                        });
                    }
                    catch (error) {
                        debugLogger.log('RESTORE', {
                            event: 'panel-opened-restore-origin-ds-failed',
                            widgetId: id,
                            originDSId: originDS.id,
                            error: error instanceof Error ? error.message : String(error),
                            errorStack: error instanceof Error ? error.stack : undefined
                        });
                    }
                });
                return;
            }
            // HYPOTHESIS: Maybe accumulatedRecords exist but we're not in accumulation mode?
            // Or maybe we should always check accumulatedRecords first?
            if (accumulatedRecords && accumulatedRecords.length > 0 && !isAccumulationMode) {
                debugLogger.log('RESTORE', {
                    event: 'addSelectionToMap-accumulated-records-exist-but-not-accumulation-mode',
                    widgetId: id,
                    resultsMode,
                    isAccumulationMode,
                    accumulatedRecordsCount: accumulatedRecords.length,
                    'hypothesis': 'accumulated-records-exist-but-mode-is-not-add-or-remove',
                    'should-we-still-use-them': 'NEEDS-INVESTIGATION'
                });
            }
            // Fall back to original logic for "New" mode
            if (!lastSelection) {
                debugLogger.log('RESTORE', {
                    event: 'addSelectionToMap-no-lastSelection-exiting',
                    widgetId: id,
                    resultsMode,
                    hasAccumulatedRecords: !!(accumulatedRecords && accumulatedRecords.length > 0),
                    accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0,
                    'hypothesis': 'no-lastSelection-so-exiting-early-maybe-should-check-accumulated-records-first'
                });
                return;
            }
            const dsManager = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance();
            const outputDS = dsManager.getDataSource(lastSelection.outputDsId);
            if (!outputDS) {
                debugLogger.log('RESTORE', {
                    event: 'panel-opened-output-ds-not-found',
                    widgetId: id,
                    outputDsId: lastSelection.outputDsId
                });
                return;
            }
            // Get records from output DS (same as Add to Map)
            const allRecords = outputDS.getAllLoadedRecords() || [];
            const recordsToSelect = allRecords.filter(record => lastSelection.recordIds.includes(record.getId()));
            if (recordsToSelect.length === 0) {
                debugLogger.log('RESTORE', {
                    event: 'panel-opened-no-matching-records',
                    widgetId: id,
                    ourRecordCount: lastSelection.recordIds.length
                });
                return;
            }
            // Same logic as Add to Map action - selectRecordsAndPublish handles duplicate checking
            // Don't zoom when restoring on widget open (Add to Map action handles zoom for manual clicks)
            try {
                const { selectRecordsAndPublish } = __webpack_require__(/*! ./selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");
                const useGraphicsLayer = this.props.config.useGraphicsLayerForHighlight;
                const graphicsLayer = this.graphicsLayerRef.current || undefined;
                const mapView = this.mapViewRef.current || undefined;
                (() => __awaiter(this, void 0, void 0, function* () {
                    yield selectRecordsAndPublish(id, outputDS, lastSelection.recordIds, recordsToSelect, true, useGraphicsLayer, graphicsLayer, mapView);
                }))();
                debugLogger.log('RESTORE', {
                    event: 'panel-opened-selection-added-to-map',
                    widgetId: id,
                    recordCount: recordsToSelect.length,
                    zoomExecuted: false
                });
            }
            catch (error) {
                debugLogger.log('RESTORE', {
                    event: 'panel-opened-add-to-map-failed',
                    widgetId: id,
                    error: error instanceof Error ? error.message : String(error)
                });
            }
        };
        /**
         * Handles results mode change from dropdown.
         * Updates widget state and logs the change for debugging.
         */
        this.handleResultsModeChange = (mode) => {
            var _a, _b;
            debugLogger.log('RESULTS-MODE', {
                event: 'handleResultsModeChange-triggered',
                widgetId: this.props.id,
                previousMode: this.state.resultsMode,
                newMode: mode,
                currentAccumulatedCount: ((_a = this.state.accumulatedRecords) === null || _a === void 0 ? void 0 : _a.length) || 0,
                timestamp: Date.now()
            });
            // Consume deep link when switching to accumulation modes
            if (mode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.AddToSelection || mode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection) {
                if ((_b = this.state.initialQueryValue) === null || _b === void 0 ? void 0 : _b.shortId) {
                    debugLogger.log('HASH', {
                        event: 'consuming-hash-on-mode-switch',
                        widgetId: this.props.id,
                        mode,
                        shortId: this.state.initialQueryValue.shortId
                    });
                    this.removeHashParameter(this.state.initialQueryValue.shortId);
                }
            }
            // If switching to "New" mode, clear accumulated records
            if (mode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.NewSelection) {
                debugLogger.log('RESULTS-MODE', {
                    event: 'clearing-accumulated-records-on-mode-switch',
                    widgetId: this.props.id,
                    previousMode: this.state.resultsMode
                });
                this.setState({ resultsMode: mode, accumulatedRecords: [] });
            }
            else {
                this.setState({ resultsMode: mode });
            }
        };
        this.removeHashParameter = (shortId) => {
            var _a;
            if (!shortId)
                return;
            const hash = window.location.hash.substring(1);
            const urlParams = new URLSearchParams(hash);
            if (urlParams.has(shortId)) {
                urlParams.delete(shortId);
                const newHash = urlParams.toString();
                debugLogger.log('HASH', {
                    event: 'removeHashParameter',
                    shortId,
                    newHash: newHash ? `#${newHash}` : '(empty)',
                    timestamp: Date.now()
                });
                // Update the URL without triggering a reload
                window.history.replaceState(null, '', newHash ? `#${newHash}` : window.location.pathname + window.location.search);
                // Also clear the state so it won't trigger again
                if (((_a = this.state.initialQueryValue) === null || _a === void 0 ? void 0 : _a.shortId) === shortId) {
                    this.setState({ initialQueryValue: undefined });
                }
            }
        };
        this.handleAccumulatedRecordsChange = (records) => {
            var _a;
            debugLogger.log('RESULTS-MODE', {
                event: 'handleAccumulatedRecordsChange-triggered',
                widgetId: this.props.id,
                previousCount: ((_a = this.state.accumulatedRecords) === null || _a === void 0 ? void 0 : _a.length) || 0,
                newCount: records.length,
                timestamp: Date.now()
            });
            this.setState({ accumulatedRecords: records });
        };
        /**
         * NOTE: No longer needed - we use existing output DS instead of creating new one.
         * Kept for reference but not used.
         */
        this.getOrCreateAccumulatedResultsDS = (originDS) => __awaiter(this, void 0, void 0, function* () {
            // This is no longer used - we merge records into existing output DS
            throw new Error('This method is deprecated - use existing output DS instead');
        });
        /**
         * Clears selection from map only (keeps selection in widget's internal state).
         * Called when widget panel closes to remove selection from map while preserving widget state.
         * Always clears accumulated records if they exist, regardless of current mode.
         */
        this.clearSelectionFromMap = () => {
            var _a;
            const { lastSelection, accumulatedRecords, resultsMode } = this.state;
            const { id } = this.props;
            const isAccumulationMode = resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.AddToSelection ||
                resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection;
            debugLogger.log('RESTORE', {
                event: 'clearSelectionFromMap-called',
                widgetId: id,
                resultsMode,
                isAccumulationMode,
                hasLastSelection: !!lastSelection,
                lastSelectionRecordCount: (lastSelection === null || lastSelection === void 0 ? void 0 : lastSelection.recordIds.length) || 0,
                hasAccumulatedRecords: !!(accumulatedRecords && accumulatedRecords.length > 0),
                accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0,
                selectionRecordCount: this.state.selectionRecordCount || 0
            });
            // Always clear accumulated records if they exist (regardless of mode)
            // This handles the case where mode might have changed but records still exist
            debugLogger.log('RESTORE', {
                event: 'clearSelectionFromMap-checking-accumulated-records',
                widgetId: id,
                'condition': 'accumulatedRecords && accumulatedRecords.length > 0',
                'condition-result': !!(accumulatedRecords && accumulatedRecords.length > 0),
                accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0
            });
            if (accumulatedRecords && accumulatedRecords.length > 0) {
                // Group accumulated records by origin data source
                const recordsByOriginDS = new Map();
                const dsManager = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance();
                accumulatedRecords.forEach((record, index) => {
                    var _a, _b, _c;
                    const recordId = record.getId();
                    let originDS = null;
                    // Method 1: Try to get from record.getDataSource()
                    const recordDS = (_a = record.getDataSource) === null || _a === void 0 ? void 0 : _a.call(record);
                    if (recordDS) {
                        originDS = ((_b = recordDS.getOriginDataSources()) === null || _b === void 0 ? void 0 : _b[0]) || recordDS;
                        debugLogger.log('RESTORE', {
                            event: 'clear-found-origin-ds-from-record-ds',
                            widgetId: id,
                            recordIndex: index,
                            recordId,
                            originDSId: (originDS === null || originDS === void 0 ? void 0 : originDS.id) || 'null',
                            method: 'record.getDataSource()'
                        });
                    }
                    // Method 2: If that failed, search all data sources for a record with matching ID
                    if (!originDS) {
                        const dsMap = dsManager.getDataSources();
                        const allDataSources = Object.values(dsMap);
                        for (const ds of allDataSources) {
                            // Check if this is a FeatureLayerDataSource by checking for getAllLoadedRecords method
                            if (ds && typeof ds.getAllLoadedRecords === 'function') {
                                try {
                                    // Check if this DS has the record
                                    const allRecords = ds.getAllLoadedRecords() || [];
                                    const matchingRecord = allRecords.find((r) => r.getId() === recordId);
                                    if (matchingRecord) {
                                        // Found the record - get origin DS from this DS
                                        originDS = ((_c = ds.getOriginDataSources()) === null || _c === void 0 ? void 0 : _c[0]) || ds;
                                        debugLogger.log('RESTORE', {
                                            event: 'clear-found-origin-ds-via-search',
                                            widgetId: id,
                                            recordIndex: index,
                                            recordId,
                                            originDSId: originDS.id,
                                            method: 'searched-all-data-sources',
                                            searchedDSId: ds.id
                                        });
                                        break;
                                    }
                                }
                                catch (error) {
                                    // Continue searching
                                }
                            }
                        }
                    }
                    if (originDS) {
                        if (!recordsByOriginDS.has(originDS)) {
                            recordsByOriginDS.set(originDS, []);
                        }
                        recordsByOriginDS.get(originDS).push(record);
                    }
                    else {
                        debugLogger.log('RESTORE', {
                            event: 'clear-could-not-find-origin-ds-for-record',
                            widgetId: id,
                            recordIndex: index,
                            recordId,
                            warning: 'record-will-be-skipped'
                        });
                    }
                });
                debugLogger.log('RESTORE', {
                    event: 'panel-closed-clearing-accumulated-records-from-map',
                    widgetId: id,
                    accumulatedRecordsCount: accumulatedRecords.length,
                    originDSCount: recordsByOriginDS.size
                });
                // Clear selection from each origin data source
                const { clearSelectionInDataSources } = __webpack_require__(/*! ./selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");
                const useGraphicsLayer = this.props.config.useGraphicsLayerForHighlight;
                const graphicsLayer = this.graphicsLayerRef.current || undefined;
                recordsByOriginDS.forEach((records, originDS) => {
                    try {
                        // Use async IIFE since forEach callback can't be async
                        ;
                        (() => __awaiter(this, void 0, void 0, function* () {
                            yield clearSelectionInDataSources(id, originDS, useGraphicsLayer, graphicsLayer);
                            debugLogger.log('RESTORE', {
                                event: 'panel-closed-cleared-origin-ds-selection',
                                widgetId: id,
                                originDSId: originDS.id,
                                recordCount: records.length,
                                usedGraphicsLayer: useGraphicsLayer
                            });
                        }))();
                    }
                    catch (error) {
                        debugLogger.log('RESTORE', {
                            event: 'panel-closed-clear-origin-ds-failed',
                            widgetId: id,
                            originDSId: originDS.id,
                            error: error instanceof Error ? error.message : String(error)
                        });
                    }
                });
                debugLogger.log('RESTORE', {
                    event: 'clearSelectionFromMap-cleared-accumulated-records-returning',
                    widgetId: id,
                    'will-not-fallback-to-lastSelection': true
                });
                return;
            }
            // HYPOTHESIS: Maybe accumulatedRecords exist but we didn't enter the if block?
            // Or maybe we should always clear accumulated records if they exist?
            if (accumulatedRecords && accumulatedRecords.length > 0) {
                debugLogger.log('RESTORE', {
                    event: 'clearSelectionFromMap-accumulated-records-exist-but-not-clearing',
                    widgetId: id,
                    resultsMode,
                    isAccumulationMode,
                    accumulatedRecordsCount: accumulatedRecords.length,
                    'hypothesis': 'accumulated-records-exist-but-condition-failed-why',
                    'condition-was': 'accumulatedRecords && accumulatedRecords.length > 0',
                    'condition-result': !!(accumulatedRecords && accumulatedRecords.length > 0)
                });
            }
            // Fall back to original logic for "New" mode
            if (!lastSelection) {
                debugLogger.log('RESTORE', {
                    event: 'clearSelectionFromMap-no-lastSelection-exiting',
                    widgetId: id,
                    hasAccumulatedRecords: !!(accumulatedRecords && accumulatedRecords.length > 0),
                    accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0,
                    'hypothesis': 'no-lastSelection-so-exiting-maybe-should-have-cleared-accumulated-records-first'
                });
                return;
            }
            const dsManager = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance();
            const outputDS = dsManager.getDataSource(lastSelection.outputDsId);
            if (!outputDS) {
                debugLogger.log('RESTORE', {
                    event: 'panel-closed-output-ds-not-found',
                    widgetId: id,
                    outputDsId: lastSelection.outputDsId
                });
                return;
            }
            try {
                // Get origin DS (the map layer)
                const originDS = (_a = outputDS.getOriginDataSources()) === null || _a === void 0 ? void 0 : _a[0];
                if (!originDS) {
                    debugLogger.log('RESTORE', {
                        event: 'panel-closed-origin-ds-not-found',
                        widgetId: id,
                        outputDsId: lastSelection.outputDsId
                    });
                    return;
                }
                // Check current selection state before clearing
                const currentSelectedIds = originDS.getSelectedRecordIds() || [];
                const ourRecordIds = lastSelection.recordIds;
                const matchesOurSelection = ourRecordIds.length === currentSelectedIds.length &&
                    ourRecordIds.every(recordId => currentSelectedIds.includes(recordId));
                debugLogger.log('RESTORE', {
                    event: 'panel-closed-checking-map-selection',
                    widgetId: id,
                    ourRecordCount: ourRecordIds.length,
                    mapSelectedCount: currentSelectedIds.length,
                    matchesOurSelection,
                    ourRecordIds: ourRecordIds.slice(0, 5),
                    mapSelectedIds: currentSelectedIds.slice(0, 5)
                });
                // Use clearSelectionInDataSources utility which supports graphics layer
                const { clearSelectionInDataSources } = __webpack_require__(/*! ./selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");
                const useGraphicsLayer = this.props.config.useGraphicsLayerForHighlight;
                const graphicsLayer = this.graphicsLayerRef.current || undefined;
                (() => __awaiter(this, void 0, void 0, function* () {
                    yield clearSelectionInDataSources(id, originDS, useGraphicsLayer, graphicsLayer);
                    debugLogger.log('RESTORE', {
                        event: 'panel-closed-cleared-origin-ds-selection',
                        widgetId: id,
                        originDSId: originDS.id,
                        usedGraphicsLayer: useGraphicsLayer
                    });
                    // Verify selection was cleared
                    const afterClearIds = originDS.getSelectedRecordIds() || [];
                    debugLogger.log('RESTORE', {
                        event: 'panel-closed-selection-cleared-from-map',
                        widgetId: id,
                        recordCount: lastSelection.recordIds.length,
                        originDSId: originDS.id,
                        selectionAfterClear: afterClearIds.length,
                        verifiedCleared: afterClearIds.length === 0
                    });
                }))();
            }
            catch (error) {
                debugLogger.log('RESTORE', {
                    event: 'panel-closed-clear-from-map-failed',
                    widgetId: id,
                    error: error instanceof Error ? error.message : String(error),
                    errorStack: error instanceof Error ? error.stack : undefined
                });
            }
        };
        /**
         * Logs visibility state changes.
         */
        this.logVisibilityChange = (isVisible, method) => {
            var _a, _b, _c, _d;
            debugLogger.log('WIDGET-STATE', {
                event: isVisible ? 'panel-opened' : 'panel-closed',
                widgetId: this.props.id,
                isVisible,
                method,
                timestamp: new Date().toISOString()
            });
            if (isVisible) {
                // When panel opens, check if we have selection to restore
                const isAccumulationMode = this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.AddToSelection ||
                    this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection;
                const hasAccumulatedRecords = this.state.accumulatedRecords && this.state.accumulatedRecords.length > 0;
                const hasSelectionState = this.state.hasSelection || false;
                const hasSelectionToRestore = isAccumulationMode
                    ? hasAccumulatedRecords
                    : hasSelectionState;
                debugLogger.log('RESTORE', {
                    event: 'panel-opened-checking-selection',
                    widgetId: this.props.id,
                    resultsMode: this.state.resultsMode,
                    isAccumulationMode,
                    hasSelection: hasSelectionState,
                    hasAccumulatedRecords,
                    accumulatedRecordsCount: ((_a = this.state.accumulatedRecords) === null || _a === void 0 ? void 0 : _a.length) || 0,
                    selectionRecordCount: this.state.selectionRecordCount || 0,
                    hasLastSelection: !!this.state.lastSelection,
                    lastSelectionRecordCount: ((_b = this.state.lastSelection) === null || _b === void 0 ? void 0 : _b.recordIds.length) || 0,
                    hasSelectionToRestore,
                    decisionLogic: {
                        'isAccumulationMode': isAccumulationMode,
                        'hasAccumulatedRecords': hasAccumulatedRecords,
                        'hasSelectionState': hasSelectionState,
                        'calculated-hasSelectionToRestore': hasSelectionToRestore,
                        'will-call-addSelectionToMap': hasSelectionToRestore
                    }
                });
                // Add selection to map if we have one
                if (hasSelectionToRestore) {
                    debugLogger.log('RESTORE', {
                        event: 'panel-opened-calling-addSelectionToMap',
                        widgetId: this.props.id,
                        reason: 'hasSelectionToRestore-is-true'
                    });
                    this.addSelectionToMap();
                }
                else {
                    debugLogger.log('RESTORE', {
                        event: 'panel-opened-skipping-addSelectionToMap',
                        widgetId: this.props.id,
                        reason: 'hasSelectionToRestore-is-false',
                        why: isAccumulationMode
                            ? 'no-accumulated-records'
                            : 'no-hasSelection-state'
                    });
                }
            }
            else {
                // When panel closes, clear selection from map only (keep widget state)
                const isAccumulationMode = this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.AddToSelection ||
                    this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection;
                const hasAccumulatedRecords = this.state.accumulatedRecords && this.state.accumulatedRecords.length > 0;
                const hasSelectionState = this.state.hasSelection || false;
                const hasSelectionToClear = isAccumulationMode
                    ? hasAccumulatedRecords
                    : hasSelectionState;
                debugLogger.log('RESTORE', {
                    event: 'panel-closed-checking-selection',
                    widgetId: this.props.id,
                    resultsMode: this.state.resultsMode,
                    isAccumulationMode,
                    hasSelection: hasSelectionState,
                    hasAccumulatedRecords,
                    accumulatedRecordsCount: ((_c = this.state.accumulatedRecords) === null || _c === void 0 ? void 0 : _c.length) || 0,
                    selectionRecordCount: this.state.selectionRecordCount || 0,
                    hasLastSelection: !!this.state.lastSelection,
                    lastSelectionRecordCount: ((_d = this.state.lastSelection) === null || _d === void 0 ? void 0 : _d.recordIds.length) || 0,
                    hasSelectionToClear,
                    decisionLogic: {
                        'isAccumulationMode': isAccumulationMode,
                        'hasAccumulatedRecords': hasAccumulatedRecords,
                        'hasSelectionState': hasSelectionState,
                        'calculated-hasSelectionToClear': hasSelectionToClear,
                        'will-call-clearSelectionFromMap': hasSelectionToClear
                    }
                });
                if (hasSelectionToClear) {
                    debugLogger.log('RESTORE', {
                        event: 'panel-closed-calling-clearSelectionFromMap',
                        widgetId: this.props.id,
                        reason: 'hasSelectionToClear-is-true'
                    });
                    this.clearSelectionFromMap();
                }
                else {
                    debugLogger.log('RESTORE', {
                        event: 'panel-closed-no-selection-to-clear',
                        widgetId: this.props.id,
                        reason: 'hasSelectionToClear-is-false',
                        why: isAccumulationMode
                            ? 'no-accumulated-records'
                            : 'no-hasSelection-state'
                    });
                }
            }
        };
        /**
         * Notifies HelperSimple of panel visibility state changes.
         */
        this.notifyHelperSimpleOfPanelState = (isVisible) => {
            const event = new CustomEvent(QUERYSIMPLE_WIDGET_STATE_EVENT, {
                detail: {
                    widgetId: this.props.id,
                    isOpen: isVisible
                },
                bubbles: true,
                cancelable: true
            });
            window.dispatchEvent(event);
        };
        /**
         * NOTIFY that a hash parameter has been used.
         * Previously this removed the hash from the URL, but per updated requirements,
         * user-entered hashes should remain in the URL.
         *
         * @param shortId - The shortId parameter that was used
         */
        this.handleHashParameterUsed = (shortId) => {
            var _a;
            const { id } = this.props;
            const { initialQueryValue } = this.state;
            debugLogger.log('HASH', {
                event: 'handleHashParameterUsed-notified',
                widgetId: id,
                shortId: shortId,
                currentInitialQueryValue: initialQueryValue,
                note: 'Hash remains in URL per user requirement',
                timestamp: Date.now()
            });
            // Clear the state so it won't trigger again within this session/mount
            if (((_a = this.state.initialQueryValue) === null || _a === void 0 ? void 0 : _a.shortId) === shortId) {
                this.setState({ initialQueryValue: undefined });
            }
        };
        /**
         * Checks the URL hash parameters for any shortIds that match query items.
         * If found, stores the value to be used to auto-populate and execute the query.
         * Experience Builder uses hash-based URL parameters (e.g., #pin=2223059013).
         *
         * This method prioritizes the first matching shortId found in the query items order.
         * If multiple hash parameters exist, only the first match is used.
         */
        this.checkQueryStringForShortIds = () => {
            var _a, _b, _c, _d, _e;
            const { config } = this.props;
            if (!((_a = config.queryItems) === null || _a === void 0 ? void 0 : _a.length)) {
                return;
            }
            // Extract all shortIds from query items
            const shortIds = config.queryItems
                .map(item => item.shortId)
                .filter(shortId => shortId != null && shortId.trim() !== '');
            if (shortIds.length === 0) {
                return;
            }
            // Get URL hash fragment parameters (ExB uses # for params)
            const hash = window.location.hash.substring(1); // Remove the #
            const urlParams = new URLSearchParams(hash);
            // Check if we've already processed this specific hash string
            if (this.lastProcessedHash === hash) {
                return;
            }
            // Update immediately to prevent re-entry race conditions
            this.lastProcessedHash = hash;
            // Log all hash params for debugging
            const allHashParams = {};
            urlParams.forEach((value, key) => {
                allHashParams[key] = value;
            });
            // Log hash check for debugging
            debugLogger.log('HASH', {
                event: 'hash-check',
                widgetId: this.props.id,
                hash: hash,
                allHashParams: allHashParams,
                hashParamsCount: Object.keys(allHashParams).length,
                availableShortIds: shortIds,
                currentState: this.state.initialQueryValue,
                timestamp: Date.now()
            });
            // Find the first matching shortId (prioritize first match in query items order)
            // This ensures we only set state once per check and maintains consistent behavior
            let foundMatch = false;
            for (const shortId of shortIds) {
                if (urlParams.has(shortId)) {
                    foundMatch = true;
                    const value = urlParams.get(shortId);
                    // Only update if the value has changed to avoid unnecessary re-renders
                    if (((_b = this.state.initialQueryValue) === null || _b === void 0 ? void 0 : _b.shortId) !== shortId || ((_c = this.state.initialQueryValue) === null || _c === void 0 ? void 0 : _c.value) !== value) {
                        debugLogger.log('HASH', {
                            event: 'hash-detected',
                            widgetId: this.props.id,
                            shortId: shortId,
                            value: value,
                            previousShortId: (_d = this.state.initialQueryValue) === null || _d === void 0 ? void 0 : _d.shortId,
                            previousValue: (_e = this.state.initialQueryValue) === null || _e === void 0 ? void 0 : _e.value,
                            allHashParams: allHashParams,
                            timestamp: Date.now()
                        });
                        // Reset to New mode when hash parameter is detected to avoid bugs with accumulation modes
                        const needsModeReset = this.state.resultsMode !== _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.NewSelection;
                        debugLogger.log('HASH', {
                            event: 'hash-detected-setting-state',
                            widgetId: this.props.id,
                            shortId,
                            value,
                            needsModeReset,
                            currentMode: this.state.resultsMode,
                            timestamp: Date.now()
                        });
                        this.setState(Object.assign({ initialQueryValue: { shortId, value } }, (needsModeReset ? {
                            resultsMode: _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.NewSelection,
                            accumulatedRecords: []
                        } : {})));
                        if (needsModeReset) {
                            debugLogger.log('HASH', {
                                event: 'hash-reset-mode-to-new',
                                widgetId: this.props.id,
                                previousMode: this.state.resultsMode,
                                reason: 'hash-parameter-detected'
                            });
                        }
                    }
                    else {
                        debugLogger.log('HASH', {
                            event: 'hash-skipped',
                            widgetId: this.props.id,
                            shortId: shortId,
                            value: value,
                            reason: 'value-unchanged'
                        });
                    }
                    return; // Exit after first match
                }
            }
            // If no hash parameters match any shortId, log what's in the hash
            if (!foundMatch && Object.keys(allHashParams).length > 0) {
                debugLogger.log('HASH', {
                    event: 'hash-check-no-matching-shortId',
                    widgetId: this.props.id,
                    hash: hash,
                    allHashParams: allHashParams,
                    availableShortIds: shortIds,
                    note: 'Hash contains params but none match configured shortIds',
                    timestamp: Date.now()
                });
            }
            // If no hash parameters match any shortId, clear the state
            // This handles cases where hash parameters were removed
            if (this.state.initialQueryValue) {
                debugLogger.log('HASH', {
                    event: 'hash-cleared',
                    widgetId: this.props.id,
                    previousShortId: this.state.initialQueryValue.shortId,
                    previousValue: this.state.initialQueryValue.value,
                    reason: 'no-matching-hash-params',
                    allHashParams: allHashParams,
                    timestamp: Date.now()
                });
                this.setState({
                    initialQueryValue: undefined
                });
            }
        };
    }
    componentDidMount() {
        this.checkQueryStringForShortIds();
        // Listen for hash changes to detect when hash parameters are updated
        // This is needed when HelperSimple opens the widget with a hash parameter
        // or when hash parameters change while the widget is already mounted
        window.addEventListener('hashchange', this.checkQueryStringForShortIds);
        // Set up visibility detection
        this.setupVisibilityDetection();
        // Listen for selection changes from query-result
        window.addEventListener(_selection_utils__WEBPACK_IMPORTED_MODULE_14__.QUERYSIMPLE_SELECTION_EVENT, this.handleSelectionChange);
        // Listen for restore requests when identify popup closes
        window.addEventListener(RESTORE_ON_IDENTIFY_CLOSE_EVENT, this.handleRestoreOnIdentifyClose);
        // Notify HelperSimple that this widget is now open
        const openEvent = new CustomEvent(QUERYSIMPLE_WIDGET_STATE_EVENT, {
            detail: {
                widgetId: this.props.id,
                isOpen: true
            },
            bubbles: true,
            cancelable: true
        });
        window.dispatchEvent(openEvent);
        debugLogger.log('WIDGET-STATE', {
            event: 'widget-opened',
            widgetId: this.props.id,
            isOpen: true,
            timestamp: new Date().toISOString()
        });
        // Also check after a short delay to catch cases where hash was already present
        // when widget was opened (e.g., by HelperSimple opening the widget)
        setTimeout(() => {
            this.checkQueryStringForShortIds();
        }, 100);
        // Graphics layer will be initialized when map view becomes available via JimuMapViewComponent
    }
    componentWillUnmount() {
        // Clean up hashchange listener
        window.removeEventListener('hashchange', this.checkQueryStringForShortIds);
        // Clean up selection change listener
        window.removeEventListener(_selection_utils__WEBPACK_IMPORTED_MODULE_14__.QUERYSIMPLE_SELECTION_EVENT, this.handleSelectionChange);
        // Clean up restore on identify close listener
        window.removeEventListener(RESTORE_ON_IDENTIFY_CLOSE_EVENT, this.handleRestoreOnIdentifyClose);
        // Clean up visibility detection
        this.cleanupVisibilityDetection();
        // Clean up graphics layer
        this.cleanupGraphicsLayer();
        // Notify HelperSimple that this widget is now closed
        const closeEvent = new CustomEvent(QUERYSIMPLE_WIDGET_STATE_EVENT, {
            detail: {
                widgetId: this.props.id,
                isOpen: false
            },
            bubbles: true,
            cancelable: true
        });
        window.dispatchEvent(closeEvent);
        debugLogger.log('WIDGET-STATE', {
            event: 'widget-closed',
            widgetId: this.props.id,
            isOpen: false,
            timestamp: new Date().toISOString()
        });
    }
    componentDidUpdate(prevProps) {
        if (prevProps.config.queryItems !== this.props.config.queryItems) {
            this.checkQueryStringForShortIds();
        }
        // Clean up graphics layer if config changed to disabled
        if (prevProps.config.useGraphicsLayerForHighlight !== this.props.config.useGraphicsLayerForHighlight) {
            if (!this.props.config.useGraphicsLayerForHighlight) {
                this.cleanupGraphicsLayer();
            }
            // If enabled, initialization will happen when map view becomes available via JimuMapViewComponent
        }
    }
    render() {
        var _a, _b, _c, _d, _e, _f, _g, _h, _j;
        const { config, id, icon, label, layoutId, layoutItemId, controllerWidgetId } = this.props;
        const widgetLabel = this.props.intl.formatMessage({
            id: '_widgetLabel',
            defaultMessage: _translations_default__WEBPACK_IMPORTED_MODULE_4__["default"]._widgetLabel
        });
        if (!((_a = config.queryItems) === null || _a === void 0 ? void 0 : _a.length)) {
            return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.WidgetPlaceholder, { icon: iconMap.iconQuery, widgetId: this.props.id, name: widgetLabel });
        }
        if (config.arrangeType === _config__WEBPACK_IMPORTED_MODULE_3__.QueryArrangeType.Popper && !controllerWidgetId) {
            return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_widget_context__WEBPACK_IMPORTED_MODULE_11__.QueryWidgetContext.Provider, { value: `${layoutId}:${layoutItemId}`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list_popper_wrapper__WEBPACK_IMPORTED_MODULE_10__.TaskListPopperWrapper, { id: 0, icon: icon, popperTitle: label, minSize: (_c = (_b = config.sizeMap) === null || _b === void 0 ? void 0 : _b.arrangementIconPopper) === null || _c === void 0 ? void 0 : _c.minSize, defaultSize: (_e = (_d = config.sizeMap) === null || _d === void 0 ? void 0 : _d.arrangementIconPopper) === null || _e === void 0 ? void 0 : _e.defaultSize, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list__WEBPACK_IMPORTED_MODULE_8__.QueryTaskList, { widgetId: id, isInPopper: true, queryItems: config.queryItems, defaultPageSize: config.defaultPageSize, className: 'pb-4', initialQueryValue: this.state.initialQueryValue, onHashParameterUsed: this.handleHashParameterUsed, resultsMode: this.state.resultsMode, onResultsModeChange: this.handleResultsModeChange, accumulatedRecords: this.state.accumulatedRecords, onAccumulatedRecordsChange: this.handleAccumulatedRecordsChange, useGraphicsLayerForHighlight: config.useGraphicsLayerForHighlight, graphicsLayer: this.graphicsLayerRef.current || undefined, mapView: this.mapViewRef.current || undefined, onInitializeGraphicsLayer: this.initializeGraphicsLayerFromOutputDS, onClearGraphicsLayer: this.clearGraphicsLayerIfExists, activeTab: this.state.activeTab, onTabChange: this.handleTabChange }) }) }));
        }
        if (config.arrangeType === _config__WEBPACK_IMPORTED_MODULE_3__.QueryArrangeType.Inline && !controllerWidgetId) {
            return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_widget_context__WEBPACK_IMPORTED_MODULE_11__.QueryWidgetContext.Provider, { value: `${layoutId}:${layoutItemId}`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list_inline__WEBPACK_IMPORTED_MODULE_9__.TaskListInline, { widgetId: id, widgetLabel: label, wrap: config.arrangeWrap, queryItems: config.queryItems, minSize: (_g = (_f = config.sizeMap) === null || _f === void 0 ? void 0 : _f.arrangementIconPopper) === null || _g === void 0 ? void 0 : _g.minSize, defaultSize: (_j = (_h = config.sizeMap) === null || _h === void 0 ? void 0 : _h.arrangementIconPopper) === null || _j === void 0 ? void 0 : _j.defaultSize, defaultPageSize: config.defaultPageSize, initialQueryValue: this.state.initialQueryValue, onHashParameterUsed: this.handleHashParameterUsed }) }));
        }
        return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Paper, { ref: this.widgetRef, variant: 'flat', className: 'jimu-widget runtime-query', "data-widgetid": id, css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
        display: flex;
        flex-direction: column;
        height: 100%;
      `, children: [config.useGraphicsLayerForHighlight && config.highlightMapWidgetId && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_arcgis__WEBPACK_IMPORTED_MODULE_6__.JimuMapViewComponent, { useMapWidgetId: config.highlightMapWidgetId, onActiveViewChange: this.handleJimuMapViewChanged })), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "widget-header", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
          padding: 6px 16px;
          border-bottom: 1px solid var(--sys-color-divider-secondary);
          background-color: var(--sys-color-surface);
        `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h3", { className: "widget-title", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
            margin: 0;
            font-size: 1rem;
            font-weight: 600;
            color: var(--sys-color-text-primary);
          `, children: label || widgetLabel }) }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
          flex: 1;
          display: flex;
          flex-direction: column;
          overflow: hidden;
        `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
            flex: 1;
            overflow: auto;
          `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_widget_context__WEBPACK_IMPORTED_MODULE_11__.QueryWidgetContext.Provider, { value: `${layoutId}:${layoutItemId}`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list__WEBPACK_IMPORTED_MODULE_8__.QueryTaskList, { widgetId: id, queryItems: config.queryItems, defaultPageSize: config.defaultPageSize, initialQueryValue: this.state.initialQueryValue, onHashParameterUsed: this.handleHashParameterUsed, resultsMode: this.state.resultsMode, onResultsModeChange: this.handleResultsModeChange, accumulatedRecords: this.state.accumulatedRecords, onAccumulatedRecordsChange: this.handleAccumulatedRecordsChange, useGraphicsLayerForHighlight: config.useGraphicsLayerForHighlight, graphicsLayer: this.graphicsLayerRef.current || undefined, mapView: this.mapViewRef.current || undefined, onInitializeGraphicsLayer: this.initializeGraphicsLayerFromOutputDS, onClearGraphicsLayer: this.clearGraphicsLayerIfExists, activeTab: this.state.activeTab, onTabChange: this.handleTabChange }) }) }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
            padding: 4px 12px;
            border-top: 1px solid var(--sys-color-divider-secondary);
            background-color: var(--sys-color-surface-paper);
            flex-shrink: 0;
            text-align: center;
          `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              font-size: 0.75rem;
              color: var(--sys-color-text-tertiary);
              font-weight: 400;
              letter-spacing: 0.025em;
              display: inline-flex;
              align-items: center;
              gap: 4px;
            `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("svg", { width: "14", height: "14", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                  flex-shrink: 0;
                  opacity: 0.6;
                `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("polyline", { points: "16 18 22 12 16 6" }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("polyline", { points: "8 6 2 12 8 18" })] }), "QuerySimple by MapSimple", (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                margin-left: 6px;
                opacity: 0.5;
                font-size: 0.7rem;
              `, children: ["v", _version__WEBPACK_IMPORTED_MODULE_15__.WIDGET_VERSION] })] }) })] })] }));
    }
}
Widget.versionManager = _version_manager__WEBPACK_IMPORTED_MODULE_7__.versionManager;
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Widget);
function __set_webpack_public_path__(url) { __webpack_require__.p = url; }

})();

/******/ 	return __webpack_exports__;
/******/ })()

			);
		}
	};
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9xdWVyeS1zaW1wbGUvZGlzdC9ydW50aW1lL3dpZGdldC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUE2QztBQUVVO0FBRWhELE1BQU0sVUFBVSxHQUFHLENBQUMsS0FBd0IsRUFBRSxFQUFFO0lBQ3JELE1BQU0sR0FBRyxHQUFHLE1BQU0sQ0FBQyxHQUFHO0lBQ3RCLE1BQU0sRUFBRSxTQUFTLEtBQWdCLEtBQUssRUFBaEIsTUFBTSxVQUFLLEtBQUssRUFBaEMsYUFBd0IsQ0FBUTtJQUV0QyxNQUFNLE9BQU8sR0FBRyxxREFBVSxDQUFDLCtCQUErQixFQUFFLFNBQVMsQ0FBQztJQUN0RSxJQUFJLENBQUMsR0FBRztRQUFFLE9BQU8sdUZBQUssU0FBUyxFQUFFLE9BQU8sSUFBTSxNQUFhLEVBQUk7SUFDL0QsT0FBTyxnRUFBQyxHQUFHLGtCQUFDLFNBQVMsRUFBRSxPQUFPLEVBQUUsR0FBRyxFQUFFLHlFQUFHLElBQU0sTUFBTSxFQUFJO0FBQzFELENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDWDRDO0FBRVc7QUFFakQsTUFBTSxXQUFXLEdBQUcsQ0FBQyxLQUF3QixFQUFFLEVBQUU7SUFDdEQsTUFBTSxHQUFHLEdBQUcsTUFBTSxDQUFDLEdBQUc7SUFDdEIsTUFBTSxFQUFFLFNBQVMsS0FBZ0IsS0FBSyxFQUFoQixNQUFNLFVBQUssS0FBSyxFQUFoQyxhQUF3QixDQUFRO0lBRXRDLE1BQU0sT0FBTyxHQUFHLHFEQUFVLENBQUMsK0JBQStCLEVBQUUsU0FBUyxDQUFDO0lBQ3RFLElBQUksQ0FBQyxHQUFHO1FBQUUsT0FBTyx1RkFBSyxTQUFTLEVBQUUsT0FBTyxJQUFNLE1BQWEsRUFBSTtJQUMvRCxPQUFPLGdFQUFDLEdBQUcsa0JBQUMsU0FBUyxFQUFFLE9BQU8sRUFBRSxH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RyxFQUFFLDhDQUFHOzs7aUJBR1AsYUFFRCw4RUFBVSxNQUFNLEVBQUMsa0JBQWtCLEdBQUUsRUFDckMsOEVBQVUsTUFBTSxFQUFDLGVBQWUsR0FBRSxJQUM5Qiw4QkFFTiwyRUFBTSxHQUFHLEVBQUUsOENBQUc7Ozs7ZUFJYixrQkFDRyxxREFBYyxJQUNYLElBQ0YsR0FDSCxJQUNGLElBQ0EsQ0FDVDtJQUNILENBQUM7O0FBN3FETSxxQkFBYyxHQUFHLDREQUFjO2lFQVpuQixNQUFNO0FBNnJEbkIsU0FBUywyQkFBMkIsQ0FBQyxHQUFHLElBQUkscUJBQXVCLEdBQUcsR0FBRyxFQUFDLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9maWxsZWQvZGlyZWN0aW9uYWwvZG93bi50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvZmlsbGVkL2RpcmVjdGlvbmFsL3JpZ2h0LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9hcnJvdy1sZWZ0LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9jb2xsYXBzZS1hbGwudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL291dGxpbmVkL2RpcmVjdGlvbmFsL2V4cGFuZC1hbGwudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL291dGxpbmVkL2VkaXRvci90cmFzaC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvb3V0bGluZWQvc3VnZ2VzdGVkL2luZm8udHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9maWxsZWQvZGlyZWN0aW9uYWwvZG93bi5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvc3ZnL2ZpbGxlZC9kaXJlY3Rpb25hbC9yaWdodC5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2FwcGxpY2F0aW9uL21vcmUtaG9yaXpvbnRhbC5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2RpcmVjdGlvbmFsL2Fycm93LWxlZnQuc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9jb2xsYXBzZS1hbGwuc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9leHBhbmQtYWxsLnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9zdmcvb3V0bGluZWQvZGlyZWN0aW9uYWwvcmlnaHQuc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9vdXRsaW5lZC9lZGl0b3IvdHJhc2guc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9vdXRsaW5lZC9zdWdnZXN0ZWQvZXJyb3Iuc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9vdXRsaW5lZC9zdWdnZXN0ZWQvaW5mby5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL3N1Z2dlc3RlZC93YXJuaW5nLnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL2ljb24uc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL2NvbmZpZy50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9kYXRhLWFjdGlvbnMvYWRkLXRvLW1hcC1hY3Rpb24udHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL2RhdGEtYWN0aW9ucy9pbmRleC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvZGVmYXVsdC1xdWVyeS1pdGVtLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvYXNzZXRzL2ljb25zL3Nob3ctb24tbWFwLnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL2J1ZmZlci1pbnB1dC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9jb21wb25lbnRzL2ZlYXR1cmUtaW5mby50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9nZW9tZXRyeS1mcm9tLWRyYXcudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvZ2VvbWV0cnktZnJvbS1kcy50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9nZW9tZXRyeS1mcm9tLW1hcC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9ncmFwaGljcy1sYXllci11dGlscy50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL2ludGVyYWN0aXZlLWRyYXctdG9vbC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9sb2FkaW5nLXJlc3VsdC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9xdWVyeS1yZXN1bHQtaXRlbS50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9xdWVyeS1yZXN1bHQudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvcXVlcnktdGFzay1jb250ZXh0LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL3F1ZXJ5LXRhc2stZm9ybS50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9xdWVyeS10YXNrLWxhYmVsLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL3F1ZXJ5LXRhc2stbGlzdC1pbmxpbmUudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvcXVlcnktdGFzay1saXN0LXBvcHBlci13cmFwcGVyLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL3F1ZXJ5LXRhc2stbGlzdC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9xdWVyeS10YXNrLXNwYXRpYWwtZm9ybS50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9xdWVyeS10YXNrLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL3F1ZXJ5LXV0aWxzLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvcmVzdWx0cy1tYW5hZ2VtZW50LXV0aWxzLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvc2VsZWN0aW9uLXV0aWxzLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvc2ltcGxlLWxpc3QudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvdHJhbnNsYXRpb25zL2RlZmF1bHQudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS91c2VBdXRvSGVpZ2h0LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL3dpZGdldC1jb25maWcudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS93aWRnZXQtY29udGV4dC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvdmVyc2lvbi1tYW5hZ2VyLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3ZlcnNpb24udHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC9leHRlcm5hbCBzeXN0ZW0gXCJqaW11LWNvcmUvZW1vdGlvblwiIiwid2VicGFjazovL2V4Yi1jbGllbnQvZXh0ZXJuYWwgc3lzdGVtIFwiamltdS1hcmNnaXNcIiIsIndlYnBhY2s6Ly9leGItY2xpZW50L2V4dGVybmFsIHN5c3RlbSBcImppbXUtY29yZVwiIiwid2VicGFjazovL2V4Yi1jbGllbnQvZXh0ZXJuYWwgc3lzdGVtIFwiamltdS1sYXlvdXRzL2xheW91dC1ydW50aW1lXCIiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC9leHRlcm5hbCBzeXN0ZW0gXCJqaW11LXRoZW1lXCIiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC9leHRlcm5hbCBzeXN0ZW0gXCJqaW11LXVpXCIiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC9leHRlcm5hbCBzeXN0ZW0gXCJqaW11LXVpL2Jhc2ljL3NxbC1leHByZXNzaW9uLXJ1bnRpbWVcIiIsIndlYnBhY2s6Ly9leGItY2xpZW50L2V4dGVybmFsIHN5c3RlbSBcIndpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uXCIiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9leGItY2xpZW50L3dlYnBhY2svcnVudGltZS9jb21wYXQgZ2V0IGRlZmF1bHQgZXhwb3J0Iiwid2VicGFjazovL2V4Yi1jbGllbnQvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL2V4Yi1jbGllbnQvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9leGItY2xpZW50L3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC93ZWJwYWNrL3J1bnRpbWUvcHVibGljUGF0aCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1jb3JlL2xpYi9zZXQtcHVibGljLXBhdGgudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS93aWRnZXQudHN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJlYWN0LCBjbGFzc05hbWVzIH0gZnJvbSAnamltdS1jb3JlJ1xyXG5pbXBvcnQgdHlwZSB7IFNWR0NvbXBvbmVudFByb3BzIH0gZnJvbSAnamltdS11aSdcclxuaW1wb3J0IHNyYyBmcm9tICcuLi8uLi9zdmcvZmlsbGVkL2RpcmVjdGlvbmFsL2Rvd24uc3ZnJ1xyXG5cclxuZXhwb3J0IGNvbnN0IERvd25GaWxsZWQgPSAocHJvcHM6IFNWR0NvbXBvbmVudFByb3BzKSA9PiB7XHJcbiAgY29uc3QgU1ZHID0gd2luZG93LlNWR1xyXG4gIGNvbnN0IHsgY2xhc3NOYW1lLCAuLi5vdGhlcnMgfSA9IHByb3BzXHJcblxyXG4gIGNvbnN0IGNsYXNzZXMgPSBjbGFzc05hbWVzKCdqaW11LWljb24gamltdS1pY29uLWNvbXBvbmVudCcsIGNsYXNzTmFtZSlcclxuICBpZiAoIVNWRykgcmV0dXJuIDxzdmcgY2xhc3NOYW1lPXtjbGFzc2VzfSB7Li4ub3RoZXJzIGFzIGFueX0gLz5cclxuICByZXR1cm4gPFNWRyBjbGFzc05hbWU9e2NsYXNzZXN9IHNyYz17c3JjfSB7Li4ub3RoZXJzfSAvPlxyXG59XHJcbiIsImltcG9ydCB7IFJlYWN0LCBjbGFzc05hbWVzIH0gZnJvbSAnamltdS1jb3JlJ1xyXG5pbXBvcnQgdHlwZSB7IFNWR0NvbXBvbmVudFByb3BzIH0gZnJvbSAnamltdS11aSdcclxuaW1wb3J0IHNyYyBmcm9tICcuLi8uLi9zdmcvZmlsbGVkL2RpcmVjdGlvbmFsL3JpZ2h0LnN2ZydcclxuXHJcbmV4cG9ydCBjb25zdCBSaWdodEZpbGxlZCA9IChwcm9wczogU1ZHQ29tcG9uZW50UHJvcHMpID0+IHtcclxuICBjb25zdCBTVkcgPSB3aW5kb3cuU1ZHXHJcbiAgY29uc3QgeyBjbGFzc05hbWUsIC4uLm90aGVycyB9ID0gcHJvcHNcclxuXHJcbiAgY29uc3QgY2xhc3NlcyA9IGNsYXNzTmFtZXMoJ2ppbXUtaWNvbiBqaW11LWljb24tY29tcG9uZW50JywgY2xhc3NOYW1lKVxyXG4gIGlmICghU1ZHKSByZXR1cm4gPHN2ZyBjbGFzc05hbWU9e2NsYXNzZXN9IHsuLi5vdGhlcnMgYXMgYW55fSAvPlxyXG4gIHJldHVybiA8U1ZHIGNsYXNzTmFtZT17Y2xhc3Nlc30gc3JjPXtzcmN9IHsuLi5vdGhlcnN9IC8+XHJcbn1cclxuIiwiaW1wb3J0IHsgUmVhY3QsIGNsYXNzTmFtZXMgfSBmcm9tICdqaW11LWNvcmUnXHJcbmltcG9ydCB0eXBlIHsgU1ZHQ29tcG9uZW50UHJvcHMgfSBmcm9tICdqaW11LXVpJ1xyXG5pbXBvcnQgc3JjIGZyb20gJy4uLy4uL3N2Zy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9hcnJvdy1sZWZ0LnN2ZydcclxuXHJcbmV4cG9ydCBjb25zdCBBcnJvd0xlZnRPdXRsaW5lZCA9IChwcm9wczogU1ZHQ29tcG9uZW50UHJvcHMpID0+IHtcclxuICBjb25zdCBTVkcgPSB3aW5kb3cuU1ZHXHJcbiAgY29uc3QgeyBjbGFzc05hbWUsIC4uLm90aGVycyB9ID0gcHJvcHNcclxuXHJcbiAgY29uc3QgY2xhc3NlcyA9IGNsYXNzTmFtZXMoJ2ppbXUtaWNvbiBqaW11LWljb24tY29tcG9uZW50JywgY2xhc3NOYW1lKVxyXG4gIGlmICghU1ZHKSByZXR1cm4gPHN2ZyBjbGFzc05hbWU9e2NsYXNzZXN9IHsuLi5vdGhlcnMgYXMgYW55fSAvPlxyXG4gIHJldHVybiA8U1ZHIGNsYXNzTmFtZT17Y2xhc3Nlc30gc3JjPXtzcmN9IHsuLi5vdGhlcnN9IC8+XHJcbn1cclxuIiwiaW1wb3J0IHsgUmVhY3QsIGNsYXNzTmFtZXMgfSBmcm9tICdqaW11LWNvcmUnXHJcbmltcG9ydCB0eXBlIHsgU1ZHQ29tcG9uZW50UHJvcHMgfSBmcm9tICdqaW11LXVpJ1xyXG5pbXBvcnQgc3JjIGZyb20gJy4uLy4uL3N2Zy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9jb2xsYXBzZS1hbGwuc3ZnJ1xyXG5cclxuZXhwb3J0IGNvbnN0IENvbGxhcHNlQWxsT3V0bGluZWQgPSAocHJvcHM6IFNWR0NvbXBvbmVudFByb3BzKSA9PiB7XHJcbiAgY29uc3QgU1ZHID0gd2luZG93LlNWR1xyXG4gIGNvbnN0IHsgY2xhc3NOYW1lLCAuLi5vdGhlcnMgfSA9IHByb3BzXHJcblxyXG4gIGNvbnN0IGNsYXNzZXMgPSBjbGFzc05hbWVzKCdqaW11LWljb24gamltdS1pY29uLWNvbXBvbmVudCcsIGNsYXNzTmFtZSlcclxuICBpZiAoIVNWRykgcmV0dXJuIDxzdmcgY2xhc3NOYW1lPXtjbGFzc2VzfSB7Li4ub3RoZXJzIGFzIGFueX0gLz5cclxuICByZXR1cm4gPFNWRyBjbGFzc05hbWU9e2NsYXNzZXN9IHNyYz17c3JjfSB7Li4ub3RoZXJzfSAvPlxyXG59XHJcbiIsImltcG9ydCB7IFJlYWN0LCBjbGFzc05hbWVzIH0gZnJvbSAnamltdS1jb3JlJ1xyXG5pbXBvcnQgdHlwZSB7IFNWR0NvbXBvbmVudFByb3BzIH0gZnJvbSAnamltdS11aSdcclxuaW1wb3J0IHNyYyBmcm9tICcuLi8uLi9zdmcvb3V0bGluZWQvZGlyZWN0aW9uYWwvZXhwYW5kLWFsbC5zdmcnXHJcblxyXG5leHBvcnQgY29uc3QgRXhwYW5kQWxsT3V0bGluZWQgPSAocHJvcHM6IFNWR0NvbXBvbmVudFByb3BzKSA9PiB7XHJcbiAgY29uc3QgU1ZHID0gd2luZG93LlNWR1xyXG4gIGNvbnN0IHsgY2xhc3NOYW1lLCAuLi5vdGhlcnMgfSA9IHByb3BzXHJcblxyXG4gIGNvbnN0IGNsYXNzZXMgPSBjbGFzc05hbWVzKCdqaW11LWljb24gamltdS1pY29uLWNvbXBvbmVudCcsIGNsYXNzTmFtZSlcclxuICBpZiAoIVNWRykgcmV0dXJuIDxzdmcgY2xhc3NOYW1lPXtjbGFzc2VzfSB7Li4ub3RoZXJzIGFzIGFueX0gLz5cclxuICByZXR1cm4gPFNWRyBjbGFzc05hbWU9e2NsYXNzZXN9IHNyYz17c3JjfSB7Li4ub3RoZXJzfSAvPlxyXG59XHJcbiIsImltcG9ydCB7IFJlYWN0LCBjbGFzc05hbWVzIH0gZnJvbSAnamltdS1jb3JlJ1xyXG5pbXBvcnQgdHlwZSB7IFNWR0NvbXBvbmVudFByb3BzIH0gZnJvbSAnamltdS11aSdcclxuaW1wb3J0IHNyYyBmcm9tICcuLi8uLi9zdmcvb3V0bGluZWQvZWRpdG9yL3RyYXNoLnN2ZydcclxuXHJcbmV4cG9ydCBjb25zdCBUcmFzaE91dGxpbmVkID0gKHByb3BzOiBTVkdDb21wb25lbnRQcm9wcykgPT4ge1xyXG4gIGNvbnN0IFNWRyA9IHdpbmRvdy5TVkdcclxuICBjb25zdCB7IGNsYXNzTmFtZSwgLi4ub3RoZXJzIH0gPSBwcm9wc1xyXG5cclxuICBjb25zdCBjbGFzc2VzID0gY2xhc3NOYW1lcygnamltdS1pY29uIGppbXUtaWNvbi1jb21wb25lbnQnLCBjbGFzc05hbWUpXHJcbiAgaWYgKCFTVkcpIHJldHVybiA8c3ZnIGNsYXNzTmFtZT17Y2xhc3Nlc30gey4uLm90aGVycyBhcyBhbnl9IC8+XHJcbiAgcmV0dXJuIDxTVkcgY2xhc3NOYW1lPXtjbGFzc2VzfSBzcmM9e3NyY30gey4uLm90aGVyc30gLz5cclxufVxyXG4iLCJpbXBvcnQgeyBSZWFjdCwgY2xhc3NOYW1lcyB9IGZyb20gJ2ppbXUtY29yZSdcclxuaW1wb3J0IHR5cGUgeyBTVkdDb21wb25lbnRQcm9wcyB9IGZyb20gJ2ppbXUtdWknXHJcbmltcG9ydCBzcmMgZnJvbSAnLi4vLi4vc3ZnL291dGxpbmVkL3N1Z2dlc3RlZC9pbmZvLnN2ZydcclxuXHJcbmV4cG9ydCBjb25zdCBJbmZvT3V0bGluZWQgPSAocHJvcHM6IFNWR0NvbXBvbmVudFByb3BzKSA9PiB7XHJcbiAgY29uc3QgU1ZHID0gd2luZG93LlNWR1xyXG4gIGNvbnN0IHsgY2xhc3NOYW1lLCAuLi5vdGhlcnMgfSA9IHByb3BzXHJcblxyXG4gIGNvbnN0IGNsYXNzZXMgPSBjbGFzc05hbWVzKCdqaW11LWljb24gamltdS1pY29uLWNvbXBvbmVudCcsIGNsYXNzTmFtZSlcclxuICBpZiAoIVNWRykgcmV0dXJuIDxzdmcgY2xhc3NOYW1lPXtjbGFzc2VzfSB7Li4ub3RoZXJzIGFzIGFueX0gLz5cclxuICByZXR1cm4gPFNWRyBjbGFzc05hbWU9e2NsYXNzZXN9IHNyYz17c3JjfSB7Li4ub3RoZXJzfSAvPlxyXG59XHJcbiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBkPVxcXCJtMTQgNC02IDgtNi04elxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGQ9XFxcIm00IDIgOCA2LTggNnpcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBmaWxsLXJ1bGU9XFxcImV2ZW5vZGRcXFwiIGQ9XFxcIk0yIDdhMSAxIDAgMSAwIDAgMiAxIDEgMCAwIDAgMC0ybTUgMWExIDEgMCAxIDEgMiAwIDEgMSAwIDAgMS0yIDBtNiAwYTEgMSAwIDEgMSAyIDAgMSAxIDAgMCAxLTIgMFxcXCIgY2xpcC1ydWxlPVxcXCJldmVub2RkXFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHZpZXdCb3g9XFxcIjAgMCAxNiAxNlxcXCI+PHBhdGggZmlsbD1cXFwiIzAwMFxcXCIgZD1cXFwiTTE1IDcuNWEuNTIuNTIgMCAwIDEtLjUxNi41MjdIMi45NzZMNi40NzMgMTEuNmEuNTM1LjUzNSAwIDAgMSAwIC43NDYuNTEuNTEgMCAwIDEtLjczIDBMMSA3LjVsNC43NDMtNC44NDZhLjUxLjUxIDAgMCAxIC43MyAwIC41MzUuNTM1IDAgMCAxIDAgLjc0NkwyLjk3NiA2Ljk3M2gxMS41MDhjLjI4NSAwIC41MTYuMjM2LjUxNi41MjdcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBkPVxcXCJNMSAzaDE0djFIMXpNOSA3aDZ2MUg5ek01LjAzNiA2LjE0NmEuNS41IDAgMCAwLS43MDggMEwxLjE0NiA5LjMyOGEuNS41IDAgMSAwIC43MDguNzA4bDIuMzI4LTIuMzI5VjE0LjVoMVY3LjcwN2wyLjMyOCAyLjMyOWEuNS41IDAgMSAwIC43MDgtLjcwOHpcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBkPVxcXCJNMSAzaDE0djFIMXpNOSA3aDZ2MUg5ek00LjMyOCAxNC4zNTRhLjUuNSAwIDAgMCAuNzA4IDBsMy4xODItMy4xODJhLjUuNSAwIDEgMC0uNzA4LS43MDhsLTIuMzI4IDIuMzI5VjZoLTF2Ni43OTNsLTIuMzI4LTIuMzI4YS41LjUgMCAxIDAtLjcwOC43MDd6XFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHZpZXdCb3g9XFxcIjAgMCAxNiAxNlxcXCI+PHBhdGggZmlsbD1cXFwiIzAwMFxcXCIgZmlsbC1ydWxlPVxcXCJldmVub2RkXFxcIiBkPVxcXCJNNC42NTMgMTMuODU0YS40ODUuNDg1IDAgMCAxIDAtLjcwOEwxMC4yNCA4IDQuNjUzIDIuODU0YS40ODUuNDg1IDAgMCAxIDAtLjcwOC41NC41NCAwIDAgMSAuNzM4IDBsNS45NTYgNS41YS40ODUuNDg1IDAgMCAxIDAgLjcwOGwtNS45NTYgNS41YS41NC41NCAwIDAgMS0uNzM4IDBcXFwiIGNsaXAtcnVsZT1cXFwiZXZlbm9kZFxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGQ9XFxcIk02IDYuNWEuNS41IDAgMCAxIDEgMHY2YS41LjUgMCAwIDEtMSAwek05LjUgNmEuNS41IDAgMCAwLS41LjV2NmEuNS41IDAgMCAwIDEgMHYtNmEuNS41IDAgMCAwLS41LS41XFxcIj48L3BhdGg+PHBhdGggZmlsbD1cXFwiIzAwMFxcXCIgZmlsbC1ydWxlPVxcXCJldmVub2RkXFxcIiBkPVxcXCJNMTEgMEg1YTEgMSAwIDAgMC0xIDF2MkguNWEuNS41IDAgMCAwIDAgMWgxLjZsLjgxIDExLjFhMSAxIDAgMCAwIC45OTUuOWg4LjE5YTEgMSAwIDAgMCAuOTk1LS45TDEzLjkgNGgxLjZhLjUuNSAwIDAgMCAwLTFIMTJWMWExIDEgMCAwIDAtMS0xbTAgM1YxSDV2MnptMS44OTUgMWgtOS43OWwuOCAxMWg4LjE5elxcXCIgY2xpcC1ydWxlPVxcXCJldmVub2RkXFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHZpZXdCb3g9XFxcIjAgMCAxNiAxNlxcXCI+PHBhdGggZmlsbD1cXFwiIzAwMFxcXCIgZmlsbC1ydWxlPVxcXCJldmVub2RkXFxcIiBkPVxcXCJNOCAxNkE4IDggMCAxIDEgOCAwYTggOCAwIDAgMSAwIDE2bTAtMUE3IDcgMCAxIDAgOCAxYTcgNyAwIDAgMCAwIDE0TTggNGEuOTA1LjkwNSAwIDAgMC0uOS45OTVsLjM1IDMuNTA3YS41NTIuNTUyIDAgMCAwIDEuMSAwbC4zNS0zLjUwN0EuOTA1LjkwNSAwIDAgMCA4IDRtMSA3YTEgMSAwIDEgMS0yIDAgMSAxIDAgMCAxIDIgMFxcXCIgY2xpcC1ydWxlPVxcXCJldmVub2RkXFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHZpZXdCb3g9XFxcIjAgMCAxNiAxNlxcXCI+PHBhdGggZmlsbD1cXFwiIzAwMFxcXCIgZD1cXFwiTTggNS41YTEgMSAwIDEgMCAwLTIgMSAxIDAgMCAwIDAgMk02LjUgNy41QS41LjUgMCAwIDEgNyA3aDEuNXY0LjVoMWEuNS41IDAgMCAxIDAgMWgtM2EuNS41IDAgMCAxIDAtMWgxVjhIN2EuNS41IDAgMCAxLS41LS41XFxcIj48L3BhdGg+PHBhdGggZmlsbD1cXFwiIzAwMFxcXCIgZmlsbC1ydWxlPVxcXCJldmVub2RkXFxcIiBkPVxcXCJNOCAxNkE4IDggMCAxIDEgOCAwYTggOCAwIDAgMSAwIDE2bTAtMUE3IDcgMCAxIDAgOCAxYTcgNyAwIDAgMCAwIDE0XFxcIiBjbGlwLXJ1bGU9XFxcImV2ZW5vZGRcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBmaWxsLXJ1bGU9XFxcImV2ZW5vZGRcXFwiIGQ9XFxcIk04IDIuMTI1IDE0LjMzNCAxNEgxLjY2N3ptLS44ODItLjQ3YTEgMSAwIDAgMSAxLjc2NSAwbDYuMzMzIDExLjg3NEExIDEgMCAwIDEgMTQuMzM0IDE1SDEuNjY3YTEgMSAwIDAgMS0uODgyLTEuNDd6TTggNC44NzRhLjkwNS45MDUgMCAwIDAtLjkuOTk1bC4zNSAzLjUwN2EuNTUyLjU1MiAwIDAgMCAxLjEgMEw4LjkgNS44N2EuOTA1LjkwNSAwIDAgMC0uOS0uOTk1bTEgN2ExIDEgMCAxIDEtMiAwIDEgMSAwIDAgMSAyIDBcXFwiIGNsaXAtcnVsZT1cXFwiZXZlbm9kZFxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMjAgMjBcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGQ9XFxcIk04LjUgM0E1LjUgNS41IDAgMCAxIDE0IDguNWE1LjUgNS41IDAgMCAxLTEuMjczIDMuNTI3bDQuMDUzIDQuMDU0YS43NS43NSAwIDEgMS0xLjA2IDEuMDZsLTQuMDU0LTQuMDUzYTUuNSA1LjUgMCAwIDEtMy41MjcgMS4yNzMgNS41IDUuNSAwIDEgMSAwLTExSDguNXptMCAxLjVoLS4zNjFhNCA0IDAgMSAwIDAgOCA0IDQgMCAwIDAgMC04elxcXCI+PC9wYXRoPjxyZWN0IHdpZHRoPVxcXCIxOVxcXCIgaGVpZ2h0PVxcXCIxOVxcXCIgeD1cXFwiLjVcXFwiIHk9XFxcIi41XFxcIiBzdHJva2U9XFxcIiMwMDBcXFwiIHJ4PVxcXCIxLjVcXFwiPjwvcmVjdD48L3N2Zz5cIiIsImltcG9ydCB0eXBlIHsgU3BhdGlhbFJlbGF0aW9uc2hpcCwgVW5pdHMgfSBmcm9tICdAZXNyaS9hcmNnaXMtcmVzdC1mZWF0dXJlLXNlcnZpY2UnXG5pbXBvcnQgdHlwZSB7IEltbXV0YWJsZU9iamVjdCwgSW1tdXRhYmxlQXJyYXksIFNxbEV4cHJlc3Npb24sIFVzZURhdGFTb3VyY2UsIEljb25SZXN1bHQsIE9yZGVyQnlPcHRpb24gfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgdHlwZSB7IFNpemUgfSBmcm9tICdqaW11LXVpJ1xuXG5leHBvcnQgZW51bSBDcmVhdGVUb29sVHlwZSB7XG4gIFBvaW50ID0gJ1BvaW50JyxcbiAgUG9seWxpbmUgPSAnUG9seWxpbmUnLFxuICBQb2x5Z29uID0gJ1BvbHlnb24nLFxuICBSZWN0YW5nbGUgPSAnUmVjdGFuZ2xlJyxcbiAgQ2lyY2xlID0gJ0NpcmNsZSdcbn1cblxuZXhwb3J0IGVudW0gU2VsZWN0aW9uVHlwZSB7XG4gIE5ld1NlbGVjdGlvbiA9ICdORVdfU0VMRUNUSU9OJyxcbiAgQWRkVG9TZWxlY3Rpb24gPSAnQUREX1RPX0NVUlJFTlRfU0VMRUNUSU9OJyxcbiAgUmVtb3ZlRnJvbVNlbGVjdGlvbiA9ICdSRU1PVkVfRlJPTV9DVVJSRU5UX1NFTEVDVElPTicsXG4gIFN1YnNldFNlbGVjdGlvbiA9ICdTVUJTRVRfRlJPTV9DVVJSRU5UX1NFTEVDVElPTicsXG4gIFN3aXRjaFNlbGVjdGlvbiA9ICdTV0lUQ0hfQ1VSUkVOVF9TRUxFQ1RJT04nLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEZpZWxkIHtcbiAgbmFtZTogc3RyaW5nXG4gIGFsaWFzPzogc3RyaW5nXG4gIGxhYmVsPzogc3RyaW5nXG59XG5cbmV4cG9ydCBlbnVtIFF1ZXJ5QXJyYW5nZVR5cGUge1xuICBCbG9jayA9ICdCTE9DSycsXG4gIElubGluZSA9ICdJTkxJTkUnLFxuICBQb3BwZXIgPSAnUE9QUEVSJyxcbn1cblxuZXhwb3J0IGVudW0gU3BhdGlhbEZpbHRlclR5cGUge1xuICBDdXJyZW50TWFwRXh0ZW50ID0gJ0N1cnJlbnRNYXBFeHRlbnQnLFxuICBJbnRlcmFjdGl2ZURyYXdNb2RlID0gJ0ludGVyYWN0aXZlRHJhd01vZGUnLFxuICBOb25lID0gJydcbn1cblxuZXhwb3J0IGVudW0gU3BhdGlhbFJlbGF0aW9uIHtcbiAgSW50ZXJzZWN0ID0gJ2ludGVyc2VjdHMnLFxuICBDb250YWluID0gJ2NvbnRhaW5zJyxcbiAgQ3Jvc3MgPSAnY3Jvc3NlcycsXG4gIEVudmVsb3BlSW50ZXJzZWN0ID0gJ2VudmVsb3BlLWludGVyc2VjdHMnLFxuICBJbmRleEludGVyc2VjdCA9ICdpbmRleC1pbnRlcnNlY3RzJyxcbiAgT3ZlcmxhcCA9ICdvdmVybGFwcycsXG4gIFRvdWNoID0gJ3RvdWNoZXMnLFxuICBXaXRoaW4gPSAnd2l0aGluJyxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTcGF0aWFsRmlsdGVyT2JqIHtcbiAgZ2VvbWV0cnk6IGFueVxuICBncmFwaGljPzogX19lc3JpLkdyYXBoaWNcbiAgbGF5ZXI/OiBfX2VzcmkuR3JhcGhpY3NMYXllclxuICBjbGVhckFmdGVyQXBwbHk/OiBib29sZWFuXG4gIHJlbGF0aW9uPzogU3BhdGlhbFJlbGF0aW9uXG4gIGJ1ZmZlcj86IHsgZGlzdGFuY2U6IG51bWJlciwgdW5pdDogVW5pdFR5cGUgfVxufVxuXG5leHBvcnQgY29uc3QgbWFwSlNBUElTcGF0aWFsUmVsVG9Ec1NwYXRpYWxSZWw6IHsgW2tleTogc3RyaW5nXTogU3BhdGlhbFJlbGF0aW9uc2hpcCB9ID0ge1xuICBbU3BhdGlhbFJlbGF0aW9uLkludGVyc2VjdF06ICdlc3JpU3BhdGlhbFJlbEludGVyc2VjdHMnLFxuICBbU3BhdGlhbFJlbGF0aW9uLkNvbnRhaW5dOiAnZXNyaVNwYXRpYWxSZWxDb250YWlucycsXG4gIFtTcGF0aWFsUmVsYXRpb24uQ3Jvc3NdOiAnZXNyaVNwYXRpYWxSZWxDcm9zc2VzJyxcbiAgW1NwYXRpYWxSZWxhdGlvbi5FbnZlbG9wZUludGVyc2VjdF06ICdlc3JpU3BhdGlhbFJlbEVudmVsb3BlSW50ZXJzZWN0cycsXG4gIFtTcGF0aWFsUmVsYXRpb24uSW5kZXhJbnRlcnNlY3RdOiAnZXNyaVNwYXRpYWxSZWxJbmRleEludGVyc2VjdHMnLFxuICBbU3BhdGlhbFJlbGF0aW9uLk92ZXJsYXBdOiAnZXNyaVNwYXRpYWxSZWxPdmVybGFwcycsXG4gIFtTcGF0aWFsUmVsYXRpb24uVG91Y2hdOiAnZXNyaVNwYXRpYWxSZWxUb3VjaGVzJyxcbiAgW1NwYXRpYWxSZWxhdGlvbi5XaXRoaW5dOiAnZXNyaVNwYXRpYWxSZWxXaXRoaW4nXG59XG5cbmV4cG9ydCBlbnVtIFVuaXRUeXBlIHtcbiAgTWlsZXMgPSAnTWlsZXMnLFxuICBLaWxvbWV0ZXJzID0gJ0tpbG9tZXRlcnMnLFxuICBGZWV0ID0gJ0ZlZXQnLFxuICBNZXRlcnMgPSAnTWV0ZXJzJyxcbiAgTmF1dGljYWxNaWxlcyA9ICdOYXV0aWNhbE1pbGVzJyxcbn1cblxuZXhwb3J0IGNvbnN0IG1hcEpTQVBJVW5pdFRvRHNVbml0OiB7IFtrZXk6IHN0cmluZ106IFVuaXRzIH0gPSB7XG4gIFtVbml0VHlwZS5NaWxlc106ICdlc3JpU1JVbml0X1N0YXR1dGVNaWxlJyxcbiAgW1VuaXRUeXBlLktpbG9tZXRlcnNdOiAnZXNyaVNSVW5pdF9LaWxvbWV0ZXInLFxuICBbVW5pdFR5cGUuRmVldF06ICdlc3JpU1JVbml0X0Zvb3QnLFxuICBbVW5pdFR5cGUuTWV0ZXJzXTogJ2VzcmlTUlVuaXRfTWV0ZXInLFxuICBbVW5pdFR5cGUuTmF1dGljYWxNaWxlc106ICdlc3JpU1JVbml0X05hdXRpY2FsTWlsZSdcbn1cblxuZXhwb3J0IGVudW0gTGlzdERpcmVjdGlvbiB7XG4gIEhvcml6b250YWwgPSAnSG9yaXpvbnRhbCcsXG4gIFZlcnRpY2FsID0gJ1ZlcnRpY2FsJyxcbn1cblxuZXhwb3J0IGVudW0gUGFnaW5nVHlwZSB7XG4gIE11bHRpUGFnZSA9ICdNdWx0aVBhZ2UnLFxuICBMYXp5TG9hZCA9ICdMYXp5TG9hZCcsXG4gIFNpbXBsZSA9ICdTaW1wbGUnLCAvLyBSZW5kZXIgYWxsIHJlY29yZHMgYXQgb25jZSwgbm8gbGF6eSBsb2FkaW5nIG9yIHBhZ2luYXRpb25cbn1cblxuZXhwb3J0IGVudW0gRmllbGRzVHlwZSB7XG4gIFBvcHVwU2V0dGluZyA9ICdQb3B1cFNldHRpbmcnLFxuICBTZWxlY3RBdHRyaWJ1dGVzID0gJ1NlbGVjdEF0dHJpYnV0ZXMnLFxufVxuXG5leHBvcnQgZW51bSBTb3J0RGlyZWN0aW9uIHtcbiAgQXNjID0gJ0FzYycsXG4gIERlc2MgPSAnRGVzYycsXG59XG5cbmV4cG9ydCBlbnVtIFJlc3VsdFNlbGVjdE1vZGUge1xuICBTaW5nbGUgPSAnU2luZ2xlJyxcbiAgTXVsdGlwbGUgPSAnTXVsdGlwbGUnLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFNvcnRPcHRpb24ge1xuICBuYW1lOiBzdHJpbmdcbiAgZGlyZWN0aW9uOiBTb3J0RGlyZWN0aW9uXG59XG5cbmV4cG9ydCBlbnVtIFN5bWJvbFR5cGUge1xuICBEZWZhdWx0U3ltYm9sID0gJ0RlZmF1bHRTeW1ib2wnLFxuICBDdXN0b21TeW1ib2wgPSAnQ3VzdG9tU3ltYm9sJyxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBRdWVyeUl0ZW1UeXBlIHtcbiAgY29uZmlnSWQ6IHN0cmluZ1xuICBpY29uPzogSWNvblJlc3VsdFxuICBuYW1lPzogc3RyaW5nXG4gIGRpc3BsYXlMYWJlbD86IGJvb2xlYW5cbiAgdXNlRGF0YVNvdXJjZT86IFVzZURhdGFTb3VyY2VcbiAgb3V0cHV0RGF0YVNvdXJjZUlkPzogc3RyaW5nXG4gIHVzZUF0dHJpYnV0ZUZpbHRlcj86IGJvb2xlYW5cbiAgdXNlU3BhdGlhbEZpbHRlcj86IGJvb2xlYW5cbiAgYXR0cmlidXRlRmlsdGVyTGFiZWw/OiBzdHJpbmdcbiAgc3BhdGlhbEZpbHRlckxhYmVsPzogc3RyaW5nXG4gIGF0dHJpYnV0ZUZpbHRlckRlc2M/OiBzdHJpbmdcbiAgc3BhdGlhbEZpbHRlckRlc2M/OiBzdHJpbmdcbiAgcmVzdWx0c0xhYmVsPzogc3RyaW5nXG4gIHNxbEV4cHJPYmo/OiBTcWxFeHByZXNzaW9uXG4gIHNwYXRpYWxNYXBXaWRnZXRJZHM/OiBzdHJpbmdbXVxuICBzcGF0aWFsRmlsdGVyVHlwZXM/OiBTcGF0aWFsRmlsdGVyVHlwZVtdXG4gIHNwYXRpYWxJbnRlcmFjdGl2ZUNyZWF0ZVRvb2xUeXBlcz86IENyZWF0ZVRvb2xUeXBlW11cbiAgc3BhdGlhbEludGVyYWN0aXZlRW5hYmxlQnVmZmVyPzogYm9vbGVhblxuICBzcGF0aWFsSW50ZXJhY3RpdmVCdWZmZXJEaXN0YW5jZT86IG51bWJlclxuICBzcGF0aWFsSW50ZXJhY3RpdmVCdWZmZXJVbml0PzogVW5pdFR5cGVcbiAgc3BhdGlhbFJlbGF0aW9ucz86IFNwYXRpYWxSZWxhdGlvbltdXG4gIHNwYXRpYWxSZWxhdGlvblVzZURhdGFTb3VyY2VzPzogVXNlRGF0YVNvdXJjZVtdXG4gIHNwYXRpYWxSZWxhdGlvbkVuYWJsZVNlbGVjdFRvb2w/OiBib29sZWFuXG4gIHNwYXRpYWxSZWxhdGlvbkVuYWJsZUJ1ZmZlcj86IGJvb2xlYW5cbiAgc3BhdGlhbFJlbGF0aW9uQnVmZmVyRGlzdGFuY2U/OiBudW1iZXJcbiAgc3BhdGlhbFJlbGF0aW9uQnVmZmVyVW5pdD86IFVuaXRUeXBlXG4gIHNwYXRpYWxJbmNsdWRlUnVudGltZURhdGE/OiBib29sZWFuXG4gIHJlc3VsdExpc3REaXJlY3Rpb24/OiBMaXN0RGlyZWN0aW9uXG4gIHJlc3VsdFBhZ2luZ1N0eWxlPzogUGFnaW5nVHlwZVxuICByZXN1bHRGaWVsZHNUeXBlPzogRmllbGRzVHlwZVxuICByZXN1bHRUaXRsZUZpZWxkcz86IHN0cmluZ1tdXG4gIHJlc3VsdFRpdGxlRXhwcmVzc2lvbj86IHN0cmluZ1xuICByZXN1bHREaXNwbGF5RmllbGRzPzogc3RyaW5nW11cbiAgcmVzdWx0U3ltYm9sVHlwZT86IFN5bWJvbFR5cGVcbiAgcmVzdWx0Q3VzdG9tU3ltYm9sPzogYW55XG4gIHJlc3VsdEFsbG93Q2hhbmdlU3ltYm9sPzogYm9vbGVhblxuICByZXN1bHRFeHBhbmRCeURlZmF1bHQ/OiBib29sZWFuXG4gIHJlc3VsdFNlbGVjdE1vZGU/OiBSZXN1bHRTZWxlY3RNb2RlXG4gIGFsbG93RXhwb3J0PzogYm9vbGVhblxuICBzb3J0T3B0aW9ucz86IE9yZGVyQnlPcHRpb25bXVxuICBpdGVtU2l6ZU1hcD86IHtcbiAgICBhcnJhbmdlbWVudEhvcml6b250YWxQb3BwZXI/OiBTaXplTWFwXG4gIH1cbiAgLy8gR3JvdXBpbmcgZmllbGRzXG4gIGdyb3VwSWQ/OiBzdHJpbmdcbiAgZ3JvdXBEaXNwbGF5TmFtZT86IHN0cmluZ1xuICBzZWFyY2hBbGlhcz86IHN0cmluZ1xuICBzaG9ydElkPzogc3RyaW5nXG4gIHpvb21Ub1NlbGVjdGVkPzogYm9vbGVhblxuICAvLyBEaXNwbGF5IG9yZGVyIChsb3dlciBudW1iZXJzIGFwcGVhciBmaXJzdCwgb3B0aW9uYWwpXG4gIG9yZGVyPzogbnVtYmVyXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2l6ZU1hcCB7XG4gIG1pblNpemU/OiBTaXplXG4gIGRlZmF1bHRTaXplPzogU2l6ZVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFNldHRpbmdDb25maWcge1xuICBxdWVyeUl0ZW1zPzogSW1tdXRhYmxlQXJyYXk8UXVlcnlJdGVtVHlwZT5cbiAgYXJyYW5nZVR5cGU6IFF1ZXJ5QXJyYW5nZVR5cGVcbiAgYXJyYW5nZVdyYXA/OiBib29sZWFuXG4gIHJlc3VsdExpc3REaXJlY3Rpb24/OiBMaXN0RGlyZWN0aW9uXG4gIHJlc3VsdFBhZ2luZ1N0eWxlPzogUGFnaW5nVHlwZVxuICBsYXp5TG9hZEluaXRpYWxQYWdlU2l6ZT86IG51bWJlclxuICB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0PzogYm9vbGVhbiAvLyBVc2UgZ3JhcGhpY3MgbGF5ZXIgZm9yIGhpZ2hsaWdodGluZyAoaW5kZXBlbmRlbnQgb2YgbGF5ZXIgdmlzaWJpbGl0eSlcbiAgaGlnaGxpZ2h0TWFwV2lkZ2V0SWQ/OiBzdHJpbmcgLy8gTWFwIHdpZGdldCBJRCB0byB1c2UgZm9yIGdyYXBoaWNzIGxheWVyIGhpZ2hsaWdodGluZ1xuICBzaXplTWFwPzoge1xuICAgIGFycmFuZ2VtZW50SWNvblBvcHBlcj86IFNpemVNYXBcbiAgfVxufVxuXG5leHBvcnQgdHlwZSBJTUNvbmZpZyA9IEltbXV0YWJsZU9iamVjdDxTZXR0aW5nQ29uZmlnPlxuXG5cbiIsIi8qKlxuICogQ3VzdG9tIFwiQWRkIHRvIE1hcFwiIGRhdGEgYWN0aW9uIGZvciBRdWVyeVNpbXBsZSB3aWRnZXQuXG4gKiBcbiAqIFRoaXMgYWN0aW9uIHJlcGxhY2VzIHRoZSBmcmFtZXdvcmsncyBcIlNob3cgb24gTWFwXCIgYWN0aW9uIHdpdGggYSBjdXN0b21cbiAqIGltcGxlbWVudGF0aW9uIHRoYXQgdXNlcyBRdWVyeVNpbXBsZSdzIHNlbGVjdGlvbiBwcm9jZXNzIChzZWxlY3RSZWNvcmRzQW5kUHVibGlzaCkuXG4gKiBUaGlzIGVuc3VyZXMgY29uc2lzdGVudCBiZWhhdmlvciB3aXRoIHF1ZXJ5IHJlc3VsdHMgYW5kIHByb3BlciBpbnRlZ3JhdGlvblxuICogd2l0aCB0aGUgd2lkZ2V0J3MgXCJDbGVhciByZXN1bHRzXCIgZnVuY3Rpb25hbGl0eS5cbiAqL1xuXG5pbXBvcnQgeyB0eXBlIERhdGFSZWNvcmRTZXQsIHR5cGUgRGF0YUFjdGlvbiwgRGF0YUxldmVsLCB0eXBlIEludGxTaGFwZSwgRGF0YUFjdGlvbk1hbmFnZXIsIHR5cGUgRGF0YVNvdXJjZSB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoIH0gZnJvbSAnLi4vcnVudGltZS9zZWxlY3Rpb24tdXRpbHMnXG5pbXBvcnQgeyBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyIH0gZnJvbSAnd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24nXG5cbmNvbnN0IGRlYnVnTG9nZ2VyID0gY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlcigpXG5pbXBvcnQgdHlwZSB7IEZlYXR1cmVEYXRhUmVjb3JkIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHR5cGUgeyBRdWVyeUl0ZW1UeXBlIH0gZnJvbSAnLi4vY29uZmlnJ1xuXG4vKipcbiAqIENyZWF0ZXMgYSBjdXN0b20gXCJBZGQgdG8gTWFwXCIgZGF0YSBhY3Rpb24gdGhhdCB1c2VzIFF1ZXJ5U2ltcGxlJ3Mgc2VsZWN0aW9uIHByb2Nlc3MuXG4gKiBcbiAqIFRoaXMgYWN0aW9uIHJlcGxhY2VzIHRoZSBmcmFtZXdvcmsncyBcIlNob3cgb24gTWFwXCIgYWN0aW9uIGFuZCBlbnN1cmVzIGNvbnNpc3RlbnRcbiAqIGJlaGF2aW9yIHdpdGggUXVlcnlTaW1wbGUncyBxdWVyeSByZXN1bHRzIGJ5IHVzaW5nIHRoZSBzYW1lIHNlbGVjdGlvbiBtZWNoYW5pc20uXG4gKiBcbiAqIEBwYXJhbSB3aWRnZXRJZCAtIFRoZSB3aWRnZXQgSUQgdGhhdCBwcm92aWRlcyB0aGlzIGFjdGlvblxuICogQHBhcmFtIG91dHB1dERTIC0gVGhlIG91dHB1dCBkYXRhIHNvdXJjZSAodXNlZCBmb3Igc2VsZWN0aW9uIG9uIHRoZSBvcmlnaW4gbGF5ZXIpXG4gKiBAcGFyYW0gaW50bCAtIFRoZSBJbnRsIG9iamVjdCBmb3IgaW50ZXJuYXRpb25hbGl6YXRpb25cbiAqIEBwYXJhbSBxdWVyeUl0ZW0gLSBPcHRpb25hbCBxdWVyeSBpdGVtIGNvbmZpZ3VyYXRpb24gKGZvciB6b29tVG9TZWxlY3RlZCBzZXR0aW5nKVxuICogQHBhcmFtIHJ1bnRpbWVab29tVG9TZWxlY3RlZCAtIE9wdGlvbmFsIHJ1bnRpbWUgem9vbSBvdmVycmlkZSBmcm9tIHRoZSBxdWVyeSBmb3JtXG4gKiBAcmV0dXJucyBBIERhdGFBY3Rpb24gb2JqZWN0IHRoYXQgY2FuIGJlIHVzZWQgYnkgRGF0YUFjdGlvbkxpc3RcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUFkZFRvTWFwQWN0aW9uKFxuICB3aWRnZXRJZDogc3RyaW5nLFxuICBvdXRwdXREUzogRGF0YVNvdXJjZSxcbiAgaW50bDogSW50bFNoYXBlLFxuICBxdWVyeUl0ZW0/OiBRdWVyeUl0ZW1UeXBlLFxuICBydW50aW1lWm9vbVRvU2VsZWN0ZWQ/OiBib29sZWFuXG4pOiBEYXRhQWN0aW9uIHtcbiAgcmV0dXJuIHtcbiAgICBpZDogYCR7d2lkZ2V0SWR9LWFkZFRvTWFwYCxcbiAgICBuYW1lOiAnYWRkVG9NYXAnLFxuICAgIGxhYmVsOiBpbnRsLmZvcm1hdE1lc3NhZ2UoeyBpZDogJ2FkZFRvTWFwJywgZGVmYXVsdE1lc3NhZ2U6ICdBZGQgdG8gbWFwJyB9KSxcbiAgICAvLyBJY29uIG1hdGNoZXMgdGhlIGZyYW1ld29yaydzIFwiU2hvdyBvbiBNYXBcIiBhY3Rpb24gZm9yIGNvbnNpc3RlbmN5XG4gICAgaWNvbjogcmVxdWlyZSgnLi4vcnVudGltZS9hc3NldHMvaWNvbnMvc2hvdy1vbi1tYXAuc3ZnJykuZGVmYXVsdCB8fCByZXF1aXJlKCcuLi9ydW50aW1lL2Fzc2V0cy9pY29ucy9zaG93LW9uLW1hcC5zdmcnKSxcbiAgICAvLyBOb3RlOiBJbmRleCBtYXkgbm90IGNvbnRyb2wgcG9zaXRpb24gaWYgZXh0cmFBY3Rpb25zIGFyZSBhbHdheXMgYXBwZW5kZWQgYWZ0ZXIgZnJhbWV3b3JrIGFjdGlvbnNcbiAgICBpbmRleDogLTEwMCxcbiAgICB3aWRnZXRJZCxcbiAgICBpbnRsLFxuICAgIHN1cHBvcnRQcm92aWRlcldpZGdldDogdHJ1ZSxcbiAgICBcbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmVzIGlmIHRoaXMgYWN0aW9uIGNhbiBwcm9jZXNzIHRoZSBnaXZlbiBkYXRhIHNldHMuXG4gICAgICogU3VwcG9ydHMgUmVjb3JkcyBsZXZlbCBhY3Rpb25zIHdpdGggZmVhdHVyZSBkYXRhIHJlY29yZHMuXG4gICAgICovXG4gICAgaXNTdXBwb3J0ZWQ6IGFzeW5jIChkYXRhU2V0czogRGF0YVJlY29yZFNldFtdLCBkYXRhTGV2ZWw6IERhdGFMZXZlbCwgYWN0aW9uV2lkZ2V0SWQ6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4gPT4ge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdEQVRBLUFDVElPTicsIHtcbiAgICAgICAgYWN0aW9uOiAnYWRkVG9NYXAtaXNTdXBwb3J0ZWQnLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgYWN0aW9uV2lkZ2V0SWQsXG4gICAgICAgIGRhdGFMZXZlbCxcbiAgICAgICAgZGF0YVNldHNDb3VudDogZGF0YVNldHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICBoYXNPdXRwdXREUzogISFvdXRwdXREU1xuICAgICAgfSlcbiAgICAgIFxuICAgICAgLy8gT25seSBzdXBwb3J0IFJlY29yZHMgbGV2ZWwgYWN0aW9uc1xuICAgICAgaWYgKGRhdGFMZXZlbCAhPT0gRGF0YUxldmVsLlJlY29yZHMpIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdEQVRBLUFDVElPTicsIHtcbiAgICAgICAgICBhY3Rpb246ICdhZGRUb01hcC1pc1N1cHBvcnRlZCcsXG4gICAgICAgICAgcmVzdWx0OiBmYWxzZSxcbiAgICAgICAgICByZWFzb246ICdOb3QgUmVjb3JkcyBsZXZlbCdcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIE5lZWQgYXQgbGVhc3Qgb25lIGRhdGEgc2V0IHdpdGggcmVjb3Jkc1xuICAgICAgaWYgKCFkYXRhU2V0cyB8fCBkYXRhU2V0cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdEQVRBLUFDVElPTicsIHtcbiAgICAgICAgICBhY3Rpb246ICdhZGRUb01hcC1pc1N1cHBvcnRlZCcsXG4gICAgICAgICAgcmVzdWx0OiBmYWxzZSxcbiAgICAgICAgICByZWFzb246ICdObyBkYXRhIHNldHMnXG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBDaGVjayBpZiB3ZSBoYXZlIHJlY29yZHMgYW5kIG91dHB1dCBkYXRhIHNvdXJjZVxuICAgICAgY29uc3QgaGFzUmVjb3JkcyA9IGRhdGFTZXRzLnNvbWUoZHMgPT4gZHMucmVjb3JkcyAmJiBkcy5yZWNvcmRzLmxlbmd0aCA+IDApXG4gICAgICBjb25zdCBzdXBwb3J0ZWQgPSBoYXNSZWNvcmRzICYmICEhb3V0cHV0RFNcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdEQVRBLUFDVElPTicsIHtcbiAgICAgICAgYWN0aW9uOiAnYWRkVG9NYXAtaXNTdXBwb3J0ZWQnLFxuICAgICAgICByZXN1bHQ6IHN1cHBvcnRlZCxcbiAgICAgICAgaGFzUmVjb3JkcyxcbiAgICAgICAgcmVjb3Jkc0NvdW50OiBkYXRhU2V0cy5yZWR1Y2UoKHN1bSwgZHMpID0+IHN1bSArIChkcy5yZWNvcmRzPy5sZW5ndGggfHwgMCksIDApXG4gICAgICB9KVxuICAgICAgXG4gICAgICByZXR1cm4gc3VwcG9ydGVkXG4gICAgfSxcbiAgICBcbiAgICAvKipcbiAgICAgKiBFeGVjdXRlcyB0aGUgYWN0aW9uIGJ5IHNlbGVjdGluZyByZWNvcmRzIHVzaW5nIFF1ZXJ5U2ltcGxlJ3Mgc2VsZWN0aW9uIHByb2Nlc3MuXG4gICAgICovXG4gICAgb25FeGVjdXRlOiBhc3luYyAoZGF0YVNldHM6IERhdGFSZWNvcmRTZXRbXSwgZGF0YUxldmVsOiBEYXRhTGV2ZWwsIGFjdGlvbldpZGdldElkOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+ID0+IHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnREFUQS1BQ1RJT04nLCB7XG4gICAgICAgIGFjdGlvbjogJ2FkZFRvTWFwLW9uRXhlY3V0ZScsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICBhY3Rpb25XaWRnZXRJZCxcbiAgICAgICAgZGF0YUxldmVsLFxuICAgICAgICBkYXRhU2V0c0NvdW50OiBkYXRhU2V0cz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgIGhhc091dHB1dERTOiAhIW91dHB1dERTXG4gICAgICB9KVxuICAgICAgXG4gICAgICBpZiAoIW91dHB1dERTIHx8IGRhdGFMZXZlbCAhPT0gRGF0YUxldmVsLlJlY29yZHMpIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdEQVRBLUFDVElPTicsIHtcbiAgICAgICAgICBhY3Rpb246ICdhZGRUb01hcC1vbkV4ZWN1dGUnLFxuICAgICAgICAgIHJlc3VsdDogZmFsc2UsXG4gICAgICAgICAgcmVhc29uOiAhb3V0cHV0RFMgPyAnTm8gb3V0cHV0RFMnIDogJ05vdCBSZWNvcmRzIGxldmVsJ1xuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQ29sbGVjdCBhbGwgcmVjb3JkcyBmcm9tIGFsbCBkYXRhIHNldHNcbiAgICAgIGNvbnN0IGFsbFJlY29yZHM6IEZlYXR1cmVEYXRhUmVjb3JkW10gPSBbXVxuICAgICAgZGF0YVNldHMuZm9yRWFjaChkYXRhU2V0ID0+IHtcbiAgICAgICAgaWYgKGRhdGFTZXQucmVjb3JkcyAmJiBkYXRhU2V0LnJlY29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIC8vIEZpbHRlciB0byBvbmx5IEZlYXR1cmVEYXRhUmVjb3JkIHR5cGVzXG4gICAgICAgICAgY29uc3QgZmVhdHVyZVJlY29yZHMgPSBkYXRhU2V0LnJlY29yZHMuZmlsdGVyKFxuICAgICAgICAgICAgKHJlY29yZCk6IHJlY29yZCBpcyBGZWF0dXJlRGF0YVJlY29yZCA9PiB7XG4gICAgICAgICAgICAgIHJldHVybiByZWNvcmQgJiYgdHlwZW9mIChyZWNvcmQgYXMgRmVhdHVyZURhdGFSZWNvcmQpLmdldEdlb21ldHJ5ID09PSAnZnVuY3Rpb24nXG4gICAgICAgICAgICB9XG4gICAgICAgICAgKVxuICAgICAgICAgIGFsbFJlY29yZHMucHVzaCguLi5mZWF0dXJlUmVjb3JkcylcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgaWYgKGFsbFJlY29yZHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnREFUQS1BQ1RJT04nLCB7XG4gICAgICAgICAgYWN0aW9uOiAnYWRkVG9NYXAtb25FeGVjdXRlJyxcbiAgICAgICAgICByZXN1bHQ6IGZhbHNlLFxuICAgICAgICAgIHJlYXNvbjogJ05vIGZlYXR1cmUgcmVjb3JkcyBmb3VuZCdcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIEdldCByZWNvcmQgSURzXG4gICAgICBjb25zdCByZWNvcmRJZHMgPSBhbGxSZWNvcmRzLm1hcChyZWNvcmQgPT4gcmVjb3JkLmdldElkKCkpXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnREFUQS1BQ1RJT04nLCB7XG4gICAgICAgIGFjdGlvbjogJ2FkZFRvTWFwLW9uRXhlY3V0ZScsXG4gICAgICAgIHJlY29yZHNDb3VudDogYWxsUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgIHJlY29yZElkczogcmVjb3JkSWRzLnNsaWNlKDAsIDEwKSwgLy8gTG9nIGZpcnN0IDEwIElEc1xuICAgICAgICBvdXRwdXREU0lkOiBvdXRwdXREUy5pZFxuICAgICAgfSlcbiAgICAgIFxuICAgICAgLy8gVXNlIFF1ZXJ5U2ltcGxlJ3Mgc2VsZWN0aW9uIHByb2Nlc3MgLSBzZWxlY3RzIG9uIG9yaWdpbiBsYXllciBhbmQgcHVibGlzaGVzIHNlbGVjdGlvbiBtZXNzYWdlc1xuICAgICAgLy8gVGhpcyBlbnN1cmVzIGNvbnNpc3RlbnQgYmVoYXZpb3Igd2l0aCBxdWVyeSByZXN1bHRzIGFuZCBwcm9wZXIgaW50ZWdyYXRpb24gd2l0aCBcIkNsZWFyIHJlc3VsdHNcIlxuICAgICAgdHJ5IHtcbiAgICAgICAgc2VsZWN0UmVjb3Jkc0FuZFB1Ymxpc2god2lkZ2V0SWQsIG91dHB1dERTLCByZWNvcmRJZHMsIGFsbFJlY29yZHMsIHRydWUpXG4gICAgICAgIFxuICAgICAgICAvLyBEZXRlcm1pbmUgem9vbSBiZWhhdmlvcjogcnVudGltZSBvdmVycmlkZSB0YWtlcyBwcmVjZWRlbmNlLCB0aGVuIHF1ZXJ5SXRlbSBjb25maWcsIGRlZmF1bHRzIHRvIHRydWVcbiAgICAgICAgY29uc3Qgc2hvdWxkWm9vbSA9IHJ1bnRpbWVab29tVG9TZWxlY3RlZCAhPT0gdW5kZWZpbmVkIFxuICAgICAgICAgID8gcnVudGltZVpvb21Ub1NlbGVjdGVkIFxuICAgICAgICAgIDogKHF1ZXJ5SXRlbT8uem9vbVRvU2VsZWN0ZWQgIT09IGZhbHNlKVxuICAgICAgICBcbiAgICAgICAgaWYgKHNob3VsZFpvb20gJiYgYWxsUmVjb3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgY29uc3Qgem9vbURhdGFTZXQ6IERhdGFSZWNvcmRTZXQgPSB7XG4gICAgICAgICAgICBkYXRhU291cmNlOiBvdXRwdXREUyxcbiAgICAgICAgICAgIHJlY29yZHM6IGFsbFJlY29yZHMsXG4gICAgICAgICAgICBuYW1lOiBvdXRwdXREUy5nZXRMYWJlbCgpXG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIEZpbmQgYW5kIGV4ZWN1dGUgdGhlIHpvb21Ub0ZlYXR1cmUgYWN0aW9uIGZyb20gYXZhaWxhYmxlIGZyYW1ld29yayBhY3Rpb25zXG4gICAgICAgICAgRGF0YUFjdGlvbk1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5nZXRTdXBwb3J0ZWRBY3Rpb25zKHdpZGdldElkLCBbem9vbURhdGFTZXRdLCBEYXRhTGV2ZWwuUmVjb3JkcylcbiAgICAgICAgICAgIC50aGVuKGFjdGlvbkNhdGVnb3JpZXMgPT4ge1xuICAgICAgICAgICAgICAvLyBTZWFyY2ggdGhyb3VnaCBhbGwgYWN0aW9uIGNhdGVnb3JpZXMgdG8gZmluZCB6b29tVG9GZWF0dXJlIGFjdGlvblxuICAgICAgICAgICAgICBsZXQgem9vbUFjdGlvbjogRGF0YUFjdGlvbiB8IG51bGwgPSBudWxsXG4gICAgICAgICAgICAgIGZvciAoY29uc3QgY2F0ZWdvcnkgaW4gYWN0aW9uQ2F0ZWdvcmllcykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGFjdGlvbnMgPSBhY3Rpb25DYXRlZ29yaWVzW2NhdGVnb3J5XVxuICAgICAgICAgICAgICAgIHpvb21BY3Rpb24gPSBhY3Rpb25zLmZpbmQoKGFjdGlvbjogRGF0YUFjdGlvbikgPT4gXG4gICAgICAgICAgICAgICAgICBhY3Rpb24ubmFtZSA9PT0gJ3pvb21Ub0ZlYXR1cmUnIHx8IGFjdGlvbi5pZCA9PT0gJ3pvb21Ub0ZlYXR1cmUnXG4gICAgICAgICAgICAgICAgKSB8fCBudWxsXG4gICAgICAgICAgICAgICAgaWYgKHpvb21BY3Rpb24pIGJyZWFrXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGlmICh6b29tQWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIERhdGFBY3Rpb25NYW5hZ2VyLmdldEluc3RhbmNlKCkuZXhlY3V0ZURhdGFBY3Rpb24oem9vbUFjdGlvbiwgW3pvb21EYXRhU2V0XSwgRGF0YUxldmVsLlJlY29yZHMsIHdpZGdldElkKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdEQVRBLUFDVElPTicsIHtcbiAgICAgICAgICAgICAgICBhY3Rpb246ICdhZGRUb01hcC1vbkV4ZWN1dGUtem9vbScsXG4gICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdEQVRBLUFDVElPTicsIHtcbiAgICAgICAgICBhY3Rpb246ICdhZGRUb01hcC1vbkV4ZWN1dGUnLFxuICAgICAgICAgIHJlc3VsdDogdHJ1ZSxcbiAgICAgICAgICBtZXNzYWdlOiAnU3VjY2Vzc2Z1bGx5IHNlbGVjdGVkIHJlY29yZHMgYW5kIHB1Ymxpc2hlZCBzZWxlY3Rpb24gbWVzc2FnZScsXG4gICAgICAgICAgem9vbUV4ZWN1dGVkOiBzaG91bGRab29tXG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdEQVRBLUFDVElPTicsIHtcbiAgICAgICAgICBhY3Rpb246ICdhZGRUb01hcC1vbkV4ZWN1dGUnLFxuICAgICAgICAgIHJlc3VsdDogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSxcbiAgICAgICAgICBlcnJvclN0YWNrOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWRcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgfSxcbiAgICBcbiAgICAvKipcbiAgICAgKiBDbGVhbnVwIG1ldGhvZCAocmVxdWlyZWQgYnkgRGF0YUFjdGlvbiBpbnRlcmZhY2UpXG4gICAgICovXG4gICAgZGVzdHJveTogKCk6IHZvaWQgPT4ge1xuICAgICAgLy8gTm8gY2xlYW51cCBuZWVkZWRcbiAgICB9XG4gIH1cbn1cblxuIiwiaW1wb3J0IHsgdHlwZSBEYXRhUmVjb3JkU2V0LCB0eXBlIERhdGFBY3Rpb24sIERhdGFMZXZlbCwgdHlwZSBEYXRhU291cmNlLCB0eXBlIEludGxTaGFwZSB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IGNyZWF0ZUFkZFRvTWFwQWN0aW9uIH0gZnJvbSAnLi9hZGQtdG8tbWFwLWFjdGlvbidcbmltcG9ydCB0eXBlIHsgUXVlcnlJdGVtVHlwZSB9IGZyb20gJy4uL2NvbmZpZydcblxuLyoqXG4gKiBRdWVyeVNpbXBsZSBDdXN0b20gRGF0YSBBY3Rpb25zXG4gKiBcbiAqIFJldHVybnMgY3VzdG9tIGRhdGEgYWN0aW9ucyBmb3IgdGhlIHdpZGdldC5cbiAqIEluY2x1ZGVzIGEgY3VzdG9tIFwiQWRkIHRvIE1hcFwiIGFjdGlvbiB0aGF0IHVzZXMgUXVlcnlTaW1wbGUncyBzZWxlY3Rpb24gcHJvY2Vzcy5cbiAqIFxuICogQHBhcmFtIHdpZGdldElkIC0gVGhlIHdpZGdldCBJRFxuICogQHBhcmFtIG91dHB1dERTIC0gVGhlIG91dHB1dCBkYXRhIHNvdXJjZSAobnVsbC91bmRlZmluZWQgaWYgbm90IGF2YWlsYWJsZSlcbiAqIEBwYXJhbSBpbnRsIC0gVGhlIEludGwgb2JqZWN0IGZvciBpbnRlcm5hdGlvbmFsaXphdGlvblxuICogQHBhcmFtIHF1ZXJ5SXRlbSAtIE9wdGlvbmFsIHF1ZXJ5IGl0ZW0gY29uZmlndXJhdGlvblxuICogQHBhcmFtIHJ1bnRpbWVab29tVG9TZWxlY3RlZCAtIE9wdGlvbmFsIHJ1bnRpbWUgem9vbSBvdmVycmlkZSBmcm9tIHRoZSBxdWVyeSBmb3JtXG4gKiBAcmV0dXJucyBBcnJheSBvZiBjdXN0b20gRGF0YUFjdGlvbiBvYmplY3RzIChlbXB0eSBpZiBjb25kaXRpb25zIG5vdCBtZXQpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRFeHRyYUFjdGlvbnMgKFxuICB3aWRnZXRJZDogc3RyaW5nLFxuICBvdXRwdXREUzogRGF0YVNvdXJjZSB8IG51bGwgfCB1bmRlZmluZWQsXG4gIGludGw6IEludGxTaGFwZSxcbiAgcXVlcnlJdGVtPzogUXVlcnlJdGVtVHlwZSxcbiAgcnVudGltZVpvb21Ub1NlbGVjdGVkPzogYm9vbGVhblxuKTogRGF0YUFjdGlvbltdIHtcbiAgLy8gT25seSBjcmVhdGUgdGhlIGFjdGlvbiBpZiB3ZSBoYXZlIGJvdGggYW4gb3V0cHV0IGRhdGEgc291cmNlIGFuZCBpbnRsIG9iamVjdFxuICBpZiAob3V0cHV0RFMgJiYgaW50bCkge1xuICAgIHJldHVybiBbY3JlYXRlQWRkVG9NYXBBY3Rpb24od2lkZ2V0SWQsIG91dHB1dERTLCBpbnRsLCBxdWVyeUl0ZW0sIHJ1bnRpbWVab29tVG9TZWxlY3RlZCldXG4gIH1cbiAgXG4gIHJldHVybiBbXVxufVxuXG4iLCJpbXBvcnQge1xuICB0eXBlIFF1ZXJ5SXRlbVR5cGUsXG4gIENyZWF0ZVRvb2xUeXBlLFxuICBVbml0VHlwZSxcbiAgU3BhdGlhbFJlbGF0aW9uLFxuICBMaXN0RGlyZWN0aW9uLFxuICBQYWdpbmdUeXBlLFxuICBGaWVsZHNUeXBlLFxuICBTeW1ib2xUeXBlXG59IGZyb20gJy4vY29uZmlnJ1xuXG5leHBvcnQgY29uc3QgREVGQVVMVF9RVUVSWV9JVEVNOiBQYXJ0aWFsPFF1ZXJ5SXRlbVR5cGU+ID0ge1xuICBpY29uOiBudWxsLFxuICBkaXNwbGF5TGFiZWw6IHRydWUsXG4gIHNxbEV4cHJPYmo6IG51bGwsXG4gIHVzZUF0dHJpYnV0ZUZpbHRlcjogdHJ1ZSxcbiAgdXNlU3BhdGlhbEZpbHRlcjogdHJ1ZSxcbiAgc3BhdGlhbE1hcFdpZGdldElkczogW10sXG4gIHNwYXRpYWxGaWx0ZXJUeXBlczogW10sXG4gIHNwYXRpYWxJbnRlcmFjdGl2ZUNyZWF0ZVRvb2xUeXBlczogW1xuICAgIENyZWF0ZVRvb2xUeXBlLlBvaW50LFxuICAgIENyZWF0ZVRvb2xUeXBlLlBvbHlsaW5lLFxuICAgIENyZWF0ZVRvb2xUeXBlLlBvbHlnb24sXG4gICAgQ3JlYXRlVG9vbFR5cGUuUmVjdGFuZ2xlLFxuICAgIENyZWF0ZVRvb2xUeXBlLkNpcmNsZVxuICBdLFxuICBzcGF0aWFsSW50ZXJhY3RpdmVFbmFibGVCdWZmZXI6IGZhbHNlLFxuICBzcGF0aWFsSW50ZXJhY3RpdmVCdWZmZXJEaXN0YW5jZTogMCxcbiAgc3BhdGlhbEludGVyYWN0aXZlQnVmZmVyVW5pdDogVW5pdFR5cGUuTWV0ZXJzLFxuICBzcGF0aWFsUmVsYXRpb25zOiBbU3BhdGlhbFJlbGF0aW9uLkludGVyc2VjdF0sXG4gIHNwYXRpYWxSZWxhdGlvblVzZURhdGFTb3VyY2VzOiBbXSxcbiAgc3BhdGlhbFJlbGF0aW9uRW5hYmxlU2VsZWN0VG9vbDogZmFsc2UsXG4gIHNwYXRpYWxSZWxhdGlvbkVuYWJsZUJ1ZmZlcjogZmFsc2UsXG4gIHNwYXRpYWxSZWxhdGlvbkJ1ZmZlckRpc3RhbmNlOiAwLFxuICBzcGF0aWFsUmVsYXRpb25CdWZmZXJVbml0OiBVbml0VHlwZS5NZXRlcnMsXG4gIHJlc3VsdExpc3REaXJlY3Rpb246IExpc3REaXJlY3Rpb24uVmVydGljYWwsXG4gIHJlc3VsdFBhZ2luZ1N0eWxlOiBQYWdpbmdUeXBlLk11bHRpUGFnZSxcbiAgcmVzdWx0RmllbGRzVHlwZTogRmllbGRzVHlwZS5Qb3B1cFNldHRpbmcsXG4gIHJlc3VsdFN5bWJvbFR5cGU6IFN5bWJvbFR5cGUuRGVmYXVsdFN5bWJvbCxcbiAgcmVzdWx0Q3VzdG9tU3ltYm9sOiB7XG4gICAgYW5nbGU6IDAsXG4gICAgY29sb3I6IFsyNTUsIDI1NSwgMjU1LCAyNTVdLFxuICAgIG91dGxpbmU6IHtcbiAgICAgIGNvbG9yOiBbMjU1LCAyNTUsIDI1NSwgMjU1XSxcbiAgICAgIHN0eWxlOiAnZXNyaVNMU1NvbGlkJyxcbiAgICAgIHR5cGU6ICdlc3JpU0xTJyxcbiAgICAgIHdpZHRoOiAxXG4gICAgfSxcbiAgICBzaXplOiA2LFxuICAgIHN0eWxlOiAnZXNyaVNNU0NpcmNsZScsXG4gICAgdHlwZTogJ2VzcmlTTVMnLFxuICAgIHhvZmZzZXQ6IDAsXG4gICAgeW9mZnNldDogMFxuICB9LFxuICByZXN1bHRBbGxvd0NoYW5nZVN5bWJvbDogZmFsc2UsXG4gIGFsbG93RXhwb3J0OiBmYWxzZSxcbiAgc29ydE9wdGlvbnM6IFtdLFxuICB6b29tVG9TZWxlY3RlZDogdHJ1ZSxcbiAgaXRlbVNpemVNYXA6IHtcbiAgICBhcnJhbmdlbWVudEhvcml6b250YWxQb3BwZXI6IHtcbiAgICAgIG1pblNpemU6IHsgd2lkdGg6IDMwMCwgaGVpZ2h0OiAzMDAgfSxcbiAgICAgIGRlZmF1bHRTaXplOiB7IHdpZHRoOiAzNjAsIGhlaWdodDogNDgwIH1cbiAgICB9XG4gIH1cbn1cblxuXG4iLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHZpZXdCb3g9XFxcIjAgMCAxNiAxNlxcXCI+PHBhdGggZmlsbD1cXFwiIzAwMFxcXCIgZD1cXFwiTTEgMXYxNGgxNFYxem05LjA4MiAxM2MtLjAwNS0uMDM3LS4xMTMtLjI3NC0uMTIyLS4zMDlhMS41IDEuNSAwIDAgMCAuNzE4LTEuMjY3IDEuMiAxLjIgMCAwIDAtLjA1My0uMzU4Yy4xNTItLjE3Ni4yNjMtLjM4My4zMjYtLjYwN3EuMDQ2LjAwMy4wOTMuMDAzYy4zLjAwMi41OTMtLjA5MS44MzYtLjI2NnEuMDYuMDY2LjEyNi4xMjRjLjQyLjQxMi45NzcuNjU0IDEuNTY0LjY4SDE0djJoLTMuOTE4TTE0IDExaC0uNDNhMS40NiAxLjQ2IDAgMCAxLS45MDYtLjQzM2MtLjI2NC0uMjMtLjI1OC0uNzgyLS42MTctLjc4Mi0uNDgyIDAtLjUyLjY3Ny0xLjAwMy42NzctLjIxOSAwLS4zOC0uMTc3LS41OTktLjE3Ny0uMTkzIDAtLjQ0NS4xMDItLjQ0NS4yOTN2LjUwMmMwIC40MjQtLjUwNi41MDgtLjUwNi45MzQgMCAuMTcxLjE4NC4yMzYuMTg0LjQxIDAgLjU4LS44OTMuNTAyLS44OTMgMS4wOCAwIC4xOTEuMjE1LjMwNS4yMTUuNDg2VjE0SDYuMzc1cS4wODctLjI0My4wOS0uNTAyYzAtLjU0Ny0xLjA0My0uMzkzLTEuMjA3LS43Mi0uNDA3LS44MTMuNjkzLTEuMDIyLjY5My0xLjY3MyAwLS4xNi0uMDgyLS40ODgtLjMzNC0uNTEzLS4zNTEtLjAzNS0uNDQzLjE1NC0uNzk3LjE1NGEuNDA2LjQwNiAwIDAgMS0uNDM3LS4zNmMwLS4zODYuMzA4LS41NjYuMzA4LS45NTIgMC0uMjUtLjEwMi0uMzkzLS4xMDItLjY0M2EuNjIuNjIgMCAwIDEgLjU5LS42NDNjLjMyMyAwIC40NjQuMjY0LjYxOC41NGEuNjQuNjQgMCAwIDAgLjYxNy4zMDhjLjQ5IDAgLjc5OC0uNjEuNzk4LS45NzdhLjQ3LjQ3IDAgMCAxIC40MzctLjQ4OGMuMzQ3IDAgLjQ3Ni4zNi44MjQuMzYuNTcgMCAuNTUtLjc1NiAxLjA1My0xLjAzLjYxOC0uMzMyLjQzOC0xLjA1Mi4zNi0xLjQ0LS4wMzItLjE2OS4yOS0uNS40NjQtLjQ4Ny43Mi4wNS40MTItLjU0LjQxMi0uODIzcTAtLjA3My4wMjItLjE0MmMuMTExLS4zMzIuNTk1LS40MzguNTk1LS44MzYgMC0uMjgxLS4yMzMtLjQxLS4yMzMtLjY5M2EuNjUuNjUgMCAwIDEgLjIyLS40NEgxNHpNMiAxNFYyaDguMjc4Yy0uMDEzLjA3Ny0uMTMyLjM1Ni0uMTMyLjQ0IDAgLjE5NC4wMzguMzg3LjExMi41NjdhMS42IDEuNiAwIDAgMC0uNDIyLjY0MyAxLjQgMS40IDAgMCAwLS4wNzQuNDQyIDEuNyAxLjcgMCAwIDAtLjUzNi40MyAxLjMyIDEuMzIgMCAwIDAtLjMyIDEuMDkxcS4wNDYuMjA1LjA2Ni40MTRhMiAyIDAgMCAwLS42NDkuNjcgMS40NiAxLjQ2IDAgMCAwLS42NzQtLjE2NiAxLjQ1IDEuNDUgMCAwIDAtMS4zODMgMS4wODYgMS40NCAxLjQ0IDAgMCAwLTEuMDg2LS40NjkgMS42MiAxLjYyIDAgMCAwLTEuNTkxIDEuNjQzYzAgLjI1NC4xMTMuMjkzLjA4NC41NzRzLS4yOS41MzUtLjI5IDEuMDIyYTEuMzcgMS4zNyAwIDAgMCAuOTg0IDEuMjkgMS41OCAxLjU4IDAgMCAwLS4wMDMgMS41NDljLjE0My4yODYuNjM2Ljc3NC41MzQuNzc0elxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwiLyoqIEBqc3gganN4ICovXHJcbmltcG9ydCB7XHJcbiAgUmVhY3QsXHJcbiAganN4LFxyXG4gIGhvb2tzXHJcbn0gZnJvbSAnamltdS1jb3JlJ1xyXG5pbXBvcnQgeyBTZWxlY3QsIE51bWVyaWNJbnB1dCwgZGVmYXVsdE1lc3NhZ2VzIGFzIGppbXVVSU1lc3NhZ2VzIH0gZnJvbSAnamltdS11aSdcclxuaW1wb3J0IHsgVW5pdFR5cGUgfSBmcm9tICcuLi9jb25maWcnXHJcbmltcG9ydCBkZWZhdWx0TWVzc2FnZSBmcm9tICcuL3RyYW5zbGF0aW9ucy9kZWZhdWx0J1xyXG5pbXBvcnQgeyBRdWVyeVRhc2tDb250ZXh0IH0gZnJvbSAnLi9xdWVyeS10YXNrLWNvbnRleHQnXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFByb3BzIHtcclxuICBkaXN0YW5jZTogbnVtYmVyXHJcbiAgdW5pdDogVW5pdFR5cGVcclxuICBvbkJ1ZmZlckNoYW5nZTogKGRpc3RhbmNlOiBudW1iZXIsIHVuaXQ6IFVuaXRUeXBlKSA9PiB2b2lkXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBCdWZmZXJJbnB1dCAocHJvcHM6IFByb3BzKSB7XHJcbiAgY29uc3QgeyBkaXN0YW5jZSA9IDAsIHVuaXQgPSBVbml0VHlwZS5NZXRlcnMsIG9uQnVmZmVyQ2hhbmdlIH0gPSBwcm9wc1xyXG4gIGNvbnN0IGdldEkxOG5NZXNzYWdlID0gaG9va3MudXNlVHJhbnNsYXRpb24oamltdVVJTWVzc2FnZXMsIGRlZmF1bHRNZXNzYWdlKVxyXG4gIGNvbnN0IFtkLCBzZXREXSA9IFJlYWN0LnVzZVN0YXRlKGRpc3RhbmNlKVxyXG4gIGNvbnN0IFt1LCBzZXRVXSA9IFJlYWN0LnVzZVN0YXRlKHVuaXQpXHJcbiAgY29uc3QgcXVlcnlUYXNrQ29udGV4dCA9IFJlYWN0LnVzZUNvbnRleHQoUXVlcnlUYXNrQ29udGV4dClcclxuICBjb25zdCByZXNldFN5bWJvbFJlZiA9IFJlYWN0LnVzZVJlZihxdWVyeVRhc2tDb250ZXh0LnJlc2V0U3ltYm9sKVxyXG5cclxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgbGV0IGNoYW5nZWQgPSBmYWxzZVxyXG4gICAgaWYgKGRpc3RhbmNlICE9PSBkKSB7XHJcbiAgICAgIHNldEQoZGlzdGFuY2UpXHJcbiAgICAgIGNoYW5nZWQgPSB0cnVlXHJcbiAgICB9XHJcbiAgICBpZiAodW5pdCAhPT0gdSkge1xyXG4gICAgICBzZXRVKHVuaXQpXHJcbiAgICAgIGNoYW5nZWQgPSB0cnVlXHJcbiAgICB9XHJcbiAgICBpZiAoY2hhbmdlZCkge1xyXG4gICAgICBvbkJ1ZmZlckNoYW5nZShkaXN0YW5jZSwgdW5pdClcclxuICAgIH1cclxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzXHJcbiAgfSwgW2Rpc3RhbmNlLCB1bml0XSlcclxuXHJcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGlmIChxdWVyeVRhc2tDb250ZXh0LnJlc2V0U3ltYm9sICYmIHF1ZXJ5VGFza0NvbnRleHQucmVzZXRTeW1ib2wgIT09IHJlc2V0U3ltYm9sUmVmLmN1cnJlbnQpIHtcclxuICAgICAgcmVzZXRTeW1ib2xSZWYuY3VycmVudCA9IHF1ZXJ5VGFza0NvbnRleHQucmVzZXRTeW1ib2xcclxuICAgICAgc2V0RChkaXN0YW5jZSlcclxuICAgICAgc2V0VSh1bml0KVxyXG4gICAgICBvbkJ1ZmZlckNoYW5nZShkaXN0YW5jZSwgdW5pdClcclxuICAgIH1cclxuICB9LCBbcXVlcnlUYXNrQ29udGV4dC5yZXNldFN5bWJvbCwgZGlzdGFuY2UsIHVuaXQsIG9uQnVmZmVyQ2hhbmdlXSlcclxuXHJcbiAgY29uc3QgaGFuZGxlRGlzdGFuY2VDaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjaygodmFsdWUpID0+IHtcclxuICAgIHNldEQodmFsdWUpXHJcbiAgfSwgW10pXHJcblxyXG4gIGNvbnN0IGhhbmRsZURpc3RhbmNlQWNjZXB0ZWQgPSBSZWFjdC51c2VDYWxsYmFjaygodmFsdWUpID0+IHtcclxuICAgIHNldEQodmFsdWUpXHJcbiAgICBvbkJ1ZmZlckNoYW5nZSh2YWx1ZSwgdSlcclxuICB9LCBbb25CdWZmZXJDaGFuZ2UsIHVdKVxyXG5cclxuICBjb25zdCBoYW5kbGVCdWZmZXJVbml0Q2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soKGUpID0+IHtcclxuICAgIHNldFUoZS50YXJnZXQudmFsdWUpXHJcbiAgICBvbkJ1ZmZlckNoYW5nZShkLCBlLnRhcmdldC52YWx1ZSlcclxuICB9LCBbb25CdWZmZXJDaGFuZ2UsIGRdKVxyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPFJlYWN0LkZyYWdtZW50PlxyXG4gICAgICA8TnVtZXJpY0lucHV0XHJcbiAgICAgICAgYXJpYS1sYWJlbD17Z2V0STE4bk1lc3NhZ2UoJ3RoZUJ1ZmZlckRpc3RhbmNlJyl9XHJcbiAgICAgICAgY2xhc3NOYW1lPSdtci0xJ1xyXG4gICAgICAgIHZhbHVlPXtkfVxyXG4gICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVEaXN0YW5jZUNoYW5nZX1cclxuICAgICAgICBvbkFjY2VwdFZhbHVlPXtoYW5kbGVEaXN0YW5jZUFjY2VwdGVkfVxyXG4gICAgICAvPlxyXG4gICAgICA8U2VsZWN0XHJcbiAgICAgICAgYXJpYS1sYWJlbD17Z2V0STE4bk1lc3NhZ2UoJ3VuaXQnKX1cclxuICAgICAgICB2YWx1ZT17dX1cclxuICAgICAgICBvbkNoYW5nZT17aGFuZGxlQnVmZmVyVW5pdENoYW5nZX1cclxuICAgICAgPlxyXG4gICAgICAgIHtPYmplY3QudmFsdWVzKFVuaXRUeXBlKS5tYXAoKHZhbHVlKSA9PiAoXHJcbiAgICAgICAgICA8b3B0aW9uIGtleT17dmFsdWV9IHZhbHVlPXt2YWx1ZX0+XHJcbiAgICAgICAgICAgIHtnZXRJMThuTWVzc2FnZShgdW5pdF8ke3ZhbHVlfWApfVxyXG4gICAgICAgICAgPC9vcHRpb24+XHJcbiAgICAgICAgKSl9XHJcbiAgICAgIDwvU2VsZWN0PlxyXG4gICAgPC9SZWFjdC5GcmFnbWVudD5cclxuICApXHJcbn1cclxuIiwiLyoqIEBqc3gganN4ICovXG4vLyBUaGlzIGZpbGUgaXMgZHVwbGljYXRlZCBmcm9tICcuLi8uLi8uLi8uLi9mZWF0dXJlLWluZm8vc3JjL3J1bnRpbWUvY29tcG9uZW50cy9mZWF0dXJlLWluZm8nXG5pbXBvcnQgeyBSZWFjdCwgY3NzLCBqc3gsIHR5cGUgRGF0YVNvdXJjZSwgaW5qZWN0SW50bCwgdHlwZSBJbnRsU2hhcGUsIGNsYXNzTmFtZXMgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBsb2FkQXJjR0lTSlNBUElNb2R1bGVzIH0gZnJvbSAnamltdS1hcmNnaXMnXG5pbXBvcnQgeyBCdXR0b24gfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHsgUmlnaHRGaWxsZWQgfSBmcm9tICdqaW11LWljb25zL2ZpbGxlZC9kaXJlY3Rpb25hbC9yaWdodCdcbmltcG9ydCB7IERvd25GaWxsZWQgfSBmcm9tICdqaW11LWljb25zL2ZpbGxlZC9kaXJlY3Rpb25hbC9kb3duJ1xuaW1wb3J0IHsgY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlciB9IGZyb20gJ3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uJ1xuXG5jb25zdCBkZWJ1Z0xvZ2dlciA9IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIoKVxuXG5leHBvcnQgZW51bSBMb2FkU3RhdHVzIHtcbiAgUGVuZGluZyA9ICdQZW5kaW5nJyxcbiAgRnVsZmlsbGVkID0gJ0Z1bGZpbGxlZCcsXG4gIFJlamVjdGVkID0gJ1JlamVjdGVkJ1xufVxuXG5pbnRlcmZhY2UgUHJvcHMge1xuICBkYXRhU291cmNlOiBEYXRhU291cmNlXG4gIGdyYXBoaWM6IF9fZXNyaS5HcmFwaGljXG4gIHBvcHVwVGVtcGxhdGU6IF9fZXNyaS5Qb3B1cFRlbXBsYXRlXG4gIGRlZmF1bHRQb3B1cFRlbXBsYXRlOiBfX2VzcmkuUG9wdXBUZW1wbGF0ZVxuICB0b2dnbGFibGU/OiBib29sZWFuXG4gIGV4cGFuZEJ5RGVmYXVsdD86IGJvb2xlYW5cbn1cblxuaW50ZXJmYWNlIFN0YXRlIHtcbiAgbG9hZFN0YXR1czogTG9hZFN0YXR1c1xuICBzaG93Q29udGVudDogYm9vbGVhblxufVxuXG5jb25zdCBzdHlsZSA9IGNzc2BcbiAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tc3lzLWNvbG9yLWRpdmlkZXItc2Vjb25kYXJ5KTtcbiAgLmVzcmktd2lkZ2V0X19oZWFkaW5nIHtcbiAgICBmb250LXNpemU6IDAuODc1cmVtICFpbXBvcnRhbnQ7XG4gICAgZm9udC13ZWlnaHQ6IDUwMCAhaW1wb3J0YW50O1xuICAgIG1hcmdpbjogMDtcbiAgICBjb2xvcjogdmFyKC0tc3lzLWNvbG9yLXN1cmZhY2UtcGFwZXItdGV4dCk7XG4gIH1cblxuICAuZXNyaS1mZWF0dXJlX19jb250ZW50LWVsZW1lbnQge1xuICAgIHBhZGRpbmc6IDA7XG4gIH1cblxuICAuamltdS1idG4uZXhwYW5kZWQge1xuICAgIGFsaWduLXNlbGY6IGZsZXgtc3RhcnQ7XG4gIH1cbiAgXG4gIC8vIExhcmdlciBleHBhbmQvY29sbGFwc2UgYnV0dG9uIGZvciBiZXR0ZXIgdG91Y2ggdGFyZ2V0c1xuICAuamltdS1idG5bYXJpYS1sYWJlbCo9XCJleHBhbmRcIl0sXG4gIC5qaW11LWJ0blthcmlhLWxhYmVsKj1cImNvbGxhcHNlXCJdIHtcbiAgICBtaW4td2lkdGg6IDMycHg7XG4gICAgbWluLWhlaWdodDogMzJweDtcbiAgICBwYWRkaW5nOiA2cHg7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICB9XG5cbiAgLmVzcmktZmVhdHVyZS5lc3JpLXdpZGdldCB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XG4gIH1cbmBcblxuaW50ZXJmYWNlIEV4dHJhUHJvcHMge1xuICBpbnRsOiBJbnRsU2hhcGVcbn1cblxuY2xhc3MgRmVhdHVyZUluZm8gZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50PFByb3BzICYgRXh0cmFQcm9wcywgU3RhdGU+IHtcbiAgcHJpdmF0ZSBGZWF0dXJlOiB0eXBlb2YgX19lc3JpLkZlYXR1cmVcbiAgcHJpdmF0ZSBmZWF0dXJlOiBfX2VzcmkuRmVhdHVyZVxuICBwcml2YXRlIHJlYWRvbmx5IGZlYXR1cmVDb250YWluZXI6IFJlYWN0LlJlZk9iamVjdDxIVE1MSW5wdXRFbGVtZW50IHwgbnVsbD5cblxuICBjb25zdHJ1Y3RvciAocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcylcbiAgICBjb25zdCB7IHRvZ2dsYWJsZSA9IGZhbHNlLCBleHBhbmRCeURlZmF1bHQgfSA9IHRoaXMucHJvcHNcbiAgICBjb25zdCByZWNvcmRJZCA9IHRoaXMucHJvcHMuZ3JhcGhpYz8uYXR0cmlidXRlcz8uT0JKRUNUSUQgfHwgdGhpcy5wcm9wcy5ncmFwaGljPy5hdHRyaWJ1dGVzPy5vYmplY3RpZCB8fCAndW5rbm93bidcbiAgICBjb25zdCBpbml0aWFsU2hvd0NvbnRlbnQgPSAhdG9nZ2xhYmxlIHx8IGV4cGFuZEJ5RGVmYXVsdFxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnRVhQQU5ELUNPTExBUFNFJywge1xuICAgICAgZXZlbnQ6ICdGZWF0dXJlSW5mby1jb25zdHJ1Y3RvcicsXG4gICAgICByZWNvcmRJZCxcbiAgICAgIHRvZ2dsYWJsZSxcbiAgICAgIGV4cGFuZEJ5RGVmYXVsdCxcbiAgICAgIGluaXRpYWxTaG93Q29udGVudCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgdGhpcy5mZWF0dXJlQ29udGFpbmVyID0gUmVhY3QuY3JlYXRlUmVmKClcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgc2hvd0NvbnRlbnQ6IGluaXRpYWxTaG93Q29udGVudCxcbiAgICAgIGxvYWRTdGF0dXM6IExvYWRTdGF0dXMuUGVuZGluZ1xuICAgIH1cbiAgfVxuXG4gIGNvbXBvbmVudERpZE1vdW50ICgpIHtcbiAgICB0aGlzLmNyZWF0ZUZlYXR1cmUoKVxuICB9XG5cbiAgY29tcG9uZW50RGlkVXBkYXRlIChwcmV2UHJvcHM6IFByb3BzKSB7XG4gICAgaWYgKHRoaXMuZmVhdHVyZSkge1xuICAgICAgaWYgKHByZXZQcm9wcy5wb3B1cFRlbXBsYXRlICE9PSB0aGlzLnByb3BzLnBvcHVwVGVtcGxhdGUgfHxcbiAgICAgICAgcHJldlByb3BzLmRlZmF1bHRQb3B1cFRlbXBsYXRlICE9PSB0aGlzLnByb3BzLmRlZmF1bHRQb3B1cFRlbXBsYXRlIHx8XG4gICAgICAgIHByZXZQcm9wcy5ncmFwaGljICE9PSB0aGlzLnByb3BzLmdyYXBoaWMpIHtcbiAgICAgICAgdGhpcy5kZXN0cm95RmVhdHVyZSgpXG4gICAgICAgIHRoaXMuY3JlYXRlRmVhdHVyZSgpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmZlYXR1cmUudmlzaWJsZUVsZW1lbnRzID0gdGhpcy5nZXRWaXNpYmxlRWxlbWVudHMoKVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBTeW5jIGV4cGFuZEJ5RGVmYXVsdCBwcm9wIGNoYW5nZXMgKHdoZW4gdXNlciBjbGlja3MgRXhwYW5kIEFsbC9Db2xsYXBzZSBBbGwpXG4gICAgLy8gVGhpcyBlbnN1cmVzIGFsbCBpdGVtcyByZXNwZWN0IHRoZSBnbG9iYWwgZXhwYW5kL2NvbGxhcHNlIHN0YXRlXG4gICAgaWYgKHByZXZQcm9wcy5leHBhbmRCeURlZmF1bHQgIT09IHRoaXMucHJvcHMuZXhwYW5kQnlEZWZhdWx0KSB7XG4gICAgICBjb25zdCB7IHRvZ2dsYWJsZSA9IGZhbHNlLCBleHBhbmRCeURlZmF1bHQgfSA9IHRoaXMucHJvcHNcbiAgICAgIGNvbnN0IHJlY29yZElkID0gdGhpcy5wcm9wcy5ncmFwaGljPy5hdHRyaWJ1dGVzPy5PQkpFQ1RJRCB8fCB0aGlzLnByb3BzLmdyYXBoaWM/LmF0dHJpYnV0ZXM/Lm9iamVjdGlkIHx8ICd1bmtub3duJ1xuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0VYUEFORC1DT0xMQVBTRScsIHtcbiAgICAgICAgZXZlbnQ6ICdleHBhbmRCeURlZmF1bHQtcHJvcC1jaGFuZ2VkJyxcbiAgICAgICAgcmVjb3JkSWQsXG4gICAgICAgIHByZXZFeHBhbmRCeURlZmF1bHQ6IHByZXZQcm9wcy5leHBhbmRCeURlZmF1bHQsXG4gICAgICAgIG5ld0V4cGFuZEJ5RGVmYXVsdDogZXhwYW5kQnlEZWZhdWx0LFxuICAgICAgICB0b2dnbGFibGUsXG4gICAgICAgIGN1cnJlbnRTaG93Q29udGVudDogdGhpcy5zdGF0ZS5zaG93Q29udGVudCxcbiAgICAgICAgd2lsbFVwZGF0ZVN0YXRlOiB0b2dnbGFibGUsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgaWYgKHRvZ2dsYWJsZSkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHsgc2hvd0NvbnRlbnQ6IGV4cGFuZEJ5RGVmYXVsdCB9LCAoKSA9PiB7XG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdFWFBBTkQtQ09MTEFQU0UnLCB7XG4gICAgICAgICAgICBldmVudDogJ0ZlYXR1cmVJbmZvLXN0YXRlLXVwZGF0ZWQnLFxuICAgICAgICAgICAgcmVjb3JkSWQsXG4gICAgICAgICAgICBuZXdTaG93Q29udGVudDogdGhpcy5zdGF0ZS5zaG93Q29udGVudCxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIExvZyBhbGwgY29tcG9uZW50RGlkVXBkYXRlIGNhbGxzIHRvIHRyYWNrIHJlbW91bnRzXG4gICAgY29uc3QgcmVjb3JkSWQgPSB0aGlzLnByb3BzLmdyYXBoaWM/LmF0dHJpYnV0ZXM/Lk9CSkVDVElEIHx8IHRoaXMucHJvcHMuZ3JhcGhpYz8uYXR0cmlidXRlcz8ub2JqZWN0aWQgfHwgJ3Vua25vd24nXG4gICAgaWYgKHByZXZQcm9wcy5ncmFwaGljICE9PSB0aGlzLnByb3BzLmdyYXBoaWMgfHwgXG4gICAgICAgIHByZXZQcm9wcy5wb3B1cFRlbXBsYXRlICE9PSB0aGlzLnByb3BzLnBvcHVwVGVtcGxhdGUgfHxcbiAgICAgICAgcHJldlByb3BzLmRlZmF1bHRQb3B1cFRlbXBsYXRlICE9PSB0aGlzLnByb3BzLmRlZmF1bHRQb3B1cFRlbXBsYXRlKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0VYUEFORC1DT0xMQVBTRScsIHtcbiAgICAgICAgZXZlbnQ6ICdGZWF0dXJlSW5mby1wcm9wcy1jaGFuZ2VkLXJlY3JlYXRlJyxcbiAgICAgICAgcmVjb3JkSWQsXG4gICAgICAgIGdyYXBoaWNDaGFuZ2VkOiBwcmV2UHJvcHMuZ3JhcGhpYyAhPT0gdGhpcy5wcm9wcy5ncmFwaGljLFxuICAgICAgICBwb3B1cFRlbXBsYXRlQ2hhbmdlZDogcHJldlByb3BzLnBvcHVwVGVtcGxhdGUgIT09IHRoaXMucHJvcHMucG9wdXBUZW1wbGF0ZSxcbiAgICAgICAgZGVmYXVsdFBvcHVwVGVtcGxhdGVDaGFuZ2VkOiBwcmV2UHJvcHMuZGVmYXVsdFBvcHVwVGVtcGxhdGUgIT09IHRoaXMucHJvcHMuZGVmYXVsdFBvcHVwVGVtcGxhdGUsXG4gICAgICAgIGV4cGFuZEJ5RGVmYXVsdDogdGhpcy5wcm9wcy5leHBhbmRCeURlZmF1bHQsXG4gICAgICAgIGN1cnJlbnRTaG93Q29udGVudDogdGhpcy5zdGF0ZS5zaG93Q29udGVudCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIGRlc3Ryb3lGZWF0dXJlICgpIHtcbiAgICB0aGlzLmZlYXR1cmUgJiYgIXRoaXMuZmVhdHVyZS5kZXN0cm95ZWQgJiYgdGhpcy5mZWF0dXJlLmRlc3Ryb3koKVxuICB9XG5cbiAgZ2V0VmlzaWJsZUVsZW1lbnRzICgpIHtcbiAgICBjb25zdCB7IHRvZ2dsYWJsZSA9IGZhbHNlIH0gPSB0aGlzLnByb3BzXG4gICAgY29uc3QgeyBzaG93Q29udGVudCB9ID0gdGhpcy5zdGF0ZVxuICAgIGNvbnN0IGV4cGFuZGVkID0gdG9nZ2xhYmxlID8gc2hvd0NvbnRlbnQgOiB0cnVlXG4gICAgcmV0dXJuIHtcbiAgICAgIHRpdGxlOiB0cnVlLFxuICAgICAgY29udGVudDoge1xuICAgICAgICBmaWVsZHM6IGV4cGFuZGVkLFxuICAgICAgICB0ZXh0OiBleHBhbmRlZCxcbiAgICAgICAgbWVkaWE6IGV4cGFuZGVkLFxuICAgICAgICBhdHRhY2htZW50czogZXhwYW5kZWRcbiAgICAgIH0sXG4gICAgICBsYXN0RWRpdGVkSW5mbzogZmFsc2VcbiAgICB9XG4gIH1cblxuICBjcmVhdGVGZWF0dXJlICgpIHtcbiAgICBsZXQgZmVhdHVyZU1vZHVsZVByb21pc2VcbiAgICBpZiAodGhpcy5GZWF0dXJlKSB7XG4gICAgICBmZWF0dXJlTW9kdWxlUHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSgpXG4gICAgfSBlbHNlIHtcbiAgICAgIGZlYXR1cmVNb2R1bGVQcm9taXNlID0gbG9hZEFyY0dJU0pTQVBJTW9kdWxlcyhbXG4gICAgICAgICdlc3JpL3dpZGdldHMvRmVhdHVyZSdcbiAgICAgIF0pLnRoZW4obW9kdWxlcyA9PiB7XG4gICAgICAgIFtcbiAgICAgICAgICB0aGlzLkZlYXR1cmVcbiAgICAgICAgXSA9IG1vZHVsZXNcbiAgICAgIH0pXG4gICAgfVxuICAgIHJldHVybiBmZWF0dXJlTW9kdWxlUHJvbWlzZS50aGVuKCgpID0+IHtcbiAgICAgIC8vIENoZWNrIGlmIGNvbXBvbmVudCBpcyBzdGlsbCBtb3VudGVkIGJlZm9yZSB0cnlpbmcgdG8gYXBwZW5kXG4gICAgICAvLyBUaGlzIHByZXZlbnRzIGVycm9ycyB3aGVuIGNvbXBvbmVudCB1bm1vdW50cyBkdXJpbmcgYXN5bmMgbW9kdWxlIGxvYWRpbmdcbiAgICAgIGlmICghdGhpcy5mZWF0dXJlQ29udGFpbmVyLmN1cnJlbnQpIHtcbiAgICAgICAgLy8gQ29tcG9uZW50IHdhcyB1bm1vdW50ZWQsIGFib3J0XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudCAmJiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgICAgY29udGFpbmVyLmNsYXNzTmFtZSA9ICdqaW11LXdpZGdldCdcbiAgICAgIHRoaXMuZmVhdHVyZUNvbnRhaW5lci5jdXJyZW50LmFwcGVuZENoaWxkKGNvbnRhaW5lcilcblxuICAgICAgY29uc3Qgb3JpZ2luRFMgPSB0aGlzLnByb3BzLmRhdGFTb3VyY2UuZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKVxuICAgICAgY29uc3Qgcm9vdERhdGFTb3VyY2UgPSBvcmlnaW5EUz8uWzBdPy5nZXRSb290RGF0YVNvdXJjZSgpXG5cbiAgICAgIHRoaXMuZGVzdHJveUZlYXR1cmUoKVxuICAgICAgY29uc3QgbGF5ZXIgPSB0aGlzLnByb3BzLmdyYXBoaWMubGF5ZXIgYXMgX19lc3JpLkZlYXR1cmVMYXllclxuICAgICAgaWYgKHRoaXMucHJvcHMucG9wdXBUZW1wbGF0ZSkge1xuICAgICAgICB0aGlzLnByb3BzLmdyYXBoaWMucG9wdXBUZW1wbGF0ZSA9IHRoaXMucHJvcHMucG9wdXBUZW1wbGF0ZVxuICAgICAgfSBlbHNlIGlmIChsYXllcikge1xuICAgICAgICAvLyBzZXQgcG9wdXBUZW1wbGF0ZSB3aXRoIGxheWVyJ3MgcG9wdXBUZW1wbGF0ZSBvciBkZWZhdWx0UG9wdXBUZW1wbGF0ZVxuICAgICAgICB0aGlzLnByb3BzLmdyYXBoaWMucG9wdXBUZW1wbGF0ZSA9IGxheWVyLnBvcHVwVGVtcGxhdGUgPz8gdGhpcy5wcm9wcy5kZWZhdWx0UG9wdXBUZW1wbGF0ZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5wcm9wcy5ncmFwaGljLnBvcHVwVGVtcGxhdGUgPSB0aGlzLnByb3BzLmRlZmF1bHRQb3B1cFRlbXBsYXRlXG4gICAgICB9XG4gICAgICBpZiAobGF5ZXIgJiYgIWxheWVyLnBvcHVwVGVtcGxhdGUpIHtcbiAgICAgICAgbGF5ZXIucG9wdXBUZW1wbGF0ZSA9IHRoaXMucHJvcHMucG9wdXBUZW1wbGF0ZSB8fCB0aGlzLnByb3BzLmRlZmF1bHRQb3B1cFRlbXBsYXRlXG4gICAgICB9XG4gICAgICB0aGlzLmZlYXR1cmUgPSBuZXcgdGhpcy5GZWF0dXJlKHtcbiAgICAgICAgY29udGFpbmVyOiBjb250YWluZXIsXG4gICAgICAgIGRlZmF1bHRQb3B1cFRlbXBsYXRlRW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvclxuICAgICAgICBzcGF0aWFsUmVmZXJlbmNlOiB0aGlzLnByb3BzLmRhdGFTb3VyY2U/LmxheWVyPy5zcGF0aWFsUmVmZXJlbmNlIHx8IG51bGwsXG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3JcbiAgICAgICAgbWFwOiByb290RGF0YVNvdXJjZT8ubWFwIHx8IG51bGwsXG4gICAgICAgIGdyYXBoaWM6IHRoaXMucHJvcHMuZ3JhcGhpYyxcbiAgICAgICAgdmlzaWJsZUVsZW1lbnRzOiB0aGlzLmdldFZpc2libGVFbGVtZW50cygpXG4gICAgICB9KVxuICAgIH0pLnRoZW4oKCkgPT4ge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7IGxvYWRTdGF0dXM6IExvYWRTdGF0dXMuRnVsZmlsbGVkIH0pXG4gICAgfSlcbiAgfVxuXG4gIHRvZ2dsZUV4cGFuZGVkID0gKGUpID0+IHtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpXG4gICAgdGhpcy5zZXRTdGF0ZSh7IHNob3dDb250ZW50OiAhdGhpcy5zdGF0ZS5zaG93Q29udGVudCB9KVxuICB9XG5cbiAgcmVuZGVyICgpIHtcbiAgICBjb25zdCB7IHRvZ2dsYWJsZSA9IGZhbHNlLCBpbnRsIH0gPSB0aGlzLnByb3BzXG4gICAgY29uc3QgeyBzaG93Q29udGVudCB9ID0gdGhpcy5zdGF0ZVxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT0nZmVhdHVyZS1pbmZvLWNvbXBvbmVudCBkLWZsZXggYWxpZ24taXRlbXMtY2VudGVyIHAtMScgY3NzPXtzdHlsZX0+XG4gICAgICAgIHt0b2dnbGFibGUgJiYgKFxuICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgIGFyaWEtbGFiZWw9e2ludGwuZm9ybWF0TWVzc2FnZSh7IGlkOiBzaG93Q29udGVudCA/ICdjb2xsYXBzZScgOiAnZXhwYW5kJyB9KX1cbiAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcygnamltdS1vdXRsaW5lLWluc2lkZSBmbGV4LXNocmluay0wJywgeyBleHBhbmRlZDogc2hvd0NvbnRlbnQgfSl9XG4gICAgICAgICAgICB2YXJpYW50PSd0ZXh0J1xuICAgICAgICAgICAgY29sb3I9J2luaGVyaXQnXG4gICAgICAgICAgICBpY29uXG4gICAgICAgICAgICBzaXplPSdzbSdcbiAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMudG9nZ2xlRXhwYW5kZWR9XG4gICAgICAgICAgICBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgbWluLXdpZHRoOiAzMnB4O1xuICAgICAgICAgICAgICBtaW4taGVpZ2h0OiAzMnB4O1xuICAgICAgICAgICAgICBwYWRkaW5nOiA2cHg7XG4gICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgICAgICAgYH1cbiAgICAgICAgICA+XG4gICAgICAgICAgICB7c2hvd0NvbnRlbnQgPyA8RG93bkZpbGxlZCBzaXplPSdtJy8+IDogPFJpZ2h0RmlsbGVkIHNpemU9J20nIGF1dG9GbGlwLz59XG4gICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICl9XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4LWdyb3ctMScgcmVmPXt0aGlzLmZlYXR1cmVDb250YWluZXJ9IC8+XG4gICAgICA8L2Rpdj5cbiAgICApXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgaW5qZWN0SW50bChGZWF0dXJlSW5mbylcblxuXG4iLCIvKiogQGpzeCBqc3ggKi9cclxuaW1wb3J0IHsgUmVhY3QsIGpzeCwgY3NzLCB0eXBlIEltbXV0YWJsZUFycmF5LCBsb2Rhc2gsIGxvYWRBcmNHSVNKU0FQSU1vZHVsZSwgdXRpbHMsIGhvb2tzIH0gZnJvbSAnamltdS1jb3JlJ1xyXG5pbXBvcnQgeyBKaW11TWFwVmlld0NvbXBvbmVudCwgdHlwZSBKaW11TWFwVmlldywgbG9hZEFyY0dJU0pTQVBJTW9kdWxlcyB9IGZyb20gJ2ppbXUtYXJjZ2lzJ1xyXG5pbXBvcnQgeyBkZWZhdWx0TWVzc2FnZXMgYXMgamltdVVJTWVzc2FnZXMgfSBmcm9tICdqaW11LXVpJ1xyXG5pbXBvcnQgdHlwZSB7IENyZWF0ZVRvb2xUeXBlLCBVbml0VHlwZSB9IGZyb20gJy4uL2NvbmZpZydcclxuaW1wb3J0IHsgSW50ZXJhY3RpdmVEcmF3IH0gZnJvbSAnLi9pbnRlcmFjdGl2ZS1kcmF3LXRvb2wnXHJcbmltcG9ydCB7IEJ1ZmZlcklucHV0IH0gZnJvbSAnLi9idWZmZXItaW5wdXQnXHJcbmltcG9ydCBkZWZhdWx0TWVzc2FnZSBmcm9tICcuL3RyYW5zbGF0aW9ucy9kZWZhdWx0J1xyXG5pbXBvcnQgeyBRdWVyeVRhc2tDb250ZXh0IH0gZnJvbSAnLi9xdWVyeS10YXNrLWNvbnRleHQnXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFByb3BzIHtcclxuICBtYXBXaWRnZXRJZHM6IEltbXV0YWJsZUFycmF5PHN0cmluZz5cclxuICB3aWRnZXRJZDogc3RyaW5nXHJcbiAgY3JlYXRlVG9vbFR5cGVzOiBJbW11dGFibGVBcnJheTxDcmVhdGVUb29sVHlwZT5cclxuICBlbmFibGVCdWZmZXI6IGJvb2xlYW5cclxuICBidWZmZXJEaXN0YW5jZTogbnVtYmVyXHJcbiAgYnVmZmVyVW5pdDogVW5pdFR5cGVcclxuICBvbkJ1ZmZlckNoYW5nZTogKGRpc3RhbmNlOiBudW1iZXIsIHVuaXQ6IFVuaXRUeXBlKSA9PiB2b2lkXHJcbiAgb25HZW9tZXRyeUNoYW5nZTogKGdlb206IF9fZXNyaS5HZW9tZXRyeSwgbGF5ZXI/OiBfX2VzcmkuR3JhcGhpY3NMYXllciwgZ3JhcGhpYz86IF9fZXNyaS5HcmFwaGljLCBjbGVhckFmdGVyQXBwbHk/OiBib29sZWFuKSA9PiB2b2lkXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBHZW9tZXRyeUZyb21EcmF3IChwcm9wczogUHJvcHMpIHtcclxuICBjb25zdCB7IG9uR2VvbWV0cnlDaGFuZ2UsIGNyZWF0ZVRvb2xUeXBlcywgbWFwV2lkZ2V0SWRzLCBlbmFibGVCdWZmZXIsIGJ1ZmZlckRpc3RhbmNlLCBidWZmZXJVbml0LCBvbkJ1ZmZlckNoYW5nZSwgd2lkZ2V0SWQgfSA9IHByb3BzXHJcbiAgY29uc3QgW2ppbXVNYXBWaWV3LCBzZXRKaW11TWFwVmlld10gPSBSZWFjdC51c2VTdGF0ZTxKaW11TWFwVmlldz4obnVsbClcclxuICBjb25zdCBnZXRJMThuTWVzc2FnZSA9IGhvb2tzLnVzZVRyYW5zbGF0aW9uKGppbXVVSU1lc3NhZ2VzLCBkZWZhdWx0TWVzc2FnZSlcclxuICBjb25zdCBxdWVyeVRhc2tDb250ZXh0ID0gUmVhY3QudXNlQ29udGV4dChRdWVyeVRhc2tDb250ZXh0KVxyXG4gIGNvbnN0IHJlc2V0U3ltYm9sUmVmID0gUmVhY3QudXNlUmVmKHF1ZXJ5VGFza0NvbnRleHQucmVzZXRTeW1ib2wpXHJcbiAgY29uc3QgZ2V0TGF5ZXJGdW5SZWYgPSBSZWFjdC51c2VSZWY8KCkgPT4gX19lc3JpLkdyYXBoaWNzTGF5ZXI+KG51bGwpXHJcbiAgY29uc3QgYnVmZmVyT3BlcmF0b3JSZWYgPSBSZWFjdC51c2VSZWY8X19lc3JpLmJ1ZmZlck9wZXJhdG9yPihudWxsKVxyXG4gIGNvbnN0IGdlb2Rlc2ljQnVmZmVyT3BlcmF0b3JSZWYgPSBSZWFjdC51c2VSZWY8X19lc3JpLmdlb2Rlc2ljQnVmZmVyT3BlcmF0b3I+KG51bGwpXHJcbiAgY29uc3QgZ2VvbWV0cnlTZXJ2aWNlUmVmID0gUmVhY3QudXNlUmVmPHsgZ2VvbWV0cnlTZXJ2aWNlOiBfX2VzcmkuZ2VvbWV0cnlTZXJ2aWNlLCBidWZmZXJQYXJhbWV0ZXJzOiB0eXBlb2YgX19lc3JpLkJ1ZmZlclBhcmFtZXRlcnMgfT4obnVsbClcclxuICBjb25zdCBnZW9tZXRyeVJlZiA9IFJlYWN0LnVzZVJlZjxfX2VzcmkuR2VvbWV0cnk+KG51bGwpXHJcbiAgY29uc3QgYnVmZmVyRGlzdGFuY2VSZWYgPSBSZWFjdC51c2VSZWYoYnVmZmVyRGlzdGFuY2UpXHJcbiAgY29uc3QgYnVmZmVyVW5pdFJlZiA9IFJlYWN0LnVzZVJlZihidWZmZXJVbml0KVxyXG4gIGNvbnN0IGJ1ZmZlcmVkR3JhcGhpY1JlZiA9IFJlYWN0LnVzZVJlZjxfX2VzcmkuR3JhcGhpYz4obnVsbClcclxuXHJcbiAgaG9va3MudXNlRWZmZWN0T25jZSgoKSA9PiB7XHJcbiAgICBpZiAoZW5hYmxlQnVmZmVyKSB7XHJcbiAgICAgIC8vIFBhcmVudCBjb21wb25lbnQgcXVlcnktdGFzay1zcGF0aWFsLWZvcm0gd2lsbCByZXNldCBidWZmZXIgcGFyYW1ldGVyIHdoZW4gZmlsdGVyIHR5cGUgY2hhbmdlcyxcclxuICAgICAgLy8gc28gZGVmZXIgdGhlIGluaXQgYnVmZmVyIG9wdGlvbiBpbiBvcmRlciBub3QgdG8gYmUgb3ZlcnJpZGUgYnkgaXRzIHBhcmVudC5cclxuICAgICAgbG9kYXNoLmRlZmVyKCgpID0+IHtcclxuICAgICAgICBvbkJ1ZmZlckNoYW5nZShidWZmZXJEaXN0YW5jZSwgYnVmZmVyVW5pdClcclxuICAgICAgfSlcclxuICAgIH1cclxuICAgIGxvYWRBcmNHSVNKU0FQSU1vZHVsZXMoW1xyXG4gICAgICAnZXNyaS9HcmFwaGljJ1xyXG4gICAgXSkudGhlbigobW9kdWxlcykgPT4ge1xyXG4gICAgICBjb25zdCBHcmFwaGljID0gbW9kdWxlc1swXVxyXG4gICAgICBidWZmZXJlZEdyYXBoaWNSZWYuY3VycmVudCA9IG5ldyBHcmFwaGljKHtcclxuICAgICAgICBzeW1ib2w6IHtcclxuICAgICAgICAgIHR5cGU6ICdzaW1wbGUtZmlsbCcsXHJcbiAgICAgICAgICBjb2xvcjogWzUxLCA1MSwgMjA0LCAwLjVdLFxyXG4gICAgICAgICAgc3R5bGU6ICdzb2xpZCcsXHJcbiAgICAgICAgICBvdXRsaW5lOiB7XHJcbiAgICAgICAgICAgIGNvbG9yOiBbNTEsIDUxLCAyMDQsIDAuOF0sXHJcbiAgICAgICAgICAgIHdpZHRoOiAxXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgfSlcclxuICB9KVxyXG5cclxuICBjb25zdCBhcHBseUJ1ZmZlckVmZmVjdCA9IFJlYWN0LnVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcclxuICAgIGlmICghZ2VvbWV0cnlSZWYuY3VycmVudCB8fCAhZW5hYmxlQnVmZmVyIHx8IGJ1ZmZlckRpc3RhbmNlUmVmLmN1cnJlbnQgPT09IDApIHtcclxuICAgICAgYnVmZmVyZWRHcmFwaGljUmVmLmN1cnJlbnQuZ2VvbWV0cnkgPSBudWxsXHJcbiAgICAgIHJldHVyblxyXG4gICAgfVxyXG5cclxuICAgIC8vIElmIHRoZSBlbmQgdXNlciB1c2VzIGEgcG9pbnQgb3IgbGluZSBxdWVyeSBnZW9tZXRyeSwgdGhlbiB0aGUgbmVnYXRpdmUgYnVmZmVyIHdpbGwgbm90IHdvcmsgKHNhbWUgZWZmZWN0IGFzIHRoZXJlIGlzIG5vIGJ1ZmZlcilcclxuICAgIGNvbnN0IGlzUG9pbnROZWdhdGl2ZUJ1ZmZlciA9IChnZW9tZXRyeVJlZi5jdXJyZW50Py50eXBlID09PSAncG9pbnQnIHx8IGdlb21ldHJ5UmVmLmN1cnJlbnQ/LnR5cGUgPT09ICdtdWx0aXBvaW50JykgJiYgYnVmZmVyRGlzdGFuY2VSZWYuY3VycmVudCA8IDBcclxuICAgIGNvbnN0IGlzTGluZU5lZ2F0aXZlQnVmZmVyID0gZ2VvbWV0cnlSZWYuY3VycmVudD8udHlwZSA9PT0gJ3BvbHlsaW5lJyAmJiBidWZmZXJEaXN0YW5jZVJlZi5jdXJyZW50IDwgMFxyXG4gICAgaWYgKGlzUG9pbnROZWdhdGl2ZUJ1ZmZlciB8fCBpc0xpbmVOZWdhdGl2ZUJ1ZmZlcikge1xyXG4gICAgICBidWZmZXJlZEdyYXBoaWNSZWYuY3VycmVudC5nZW9tZXRyeSA9IG51bGxcclxuICAgICAgcmV0dXJuXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZ2VvbWV0cnkgPSBnZW9tZXRyeVJlZi5jdXJyZW50XHJcbiAgICAvLyBodHRwczovL2RldmVsb3BlcnMuYXJjZ2lzLmNvbS9qYXZhc2NyaXB0L2xhdGVzdC9hcGktcmVmZXJlbmNlL2VzcmktZ2VvbWV0cnktZ2VvbWV0cnlFbmdpbmUuaHRtbCNidWZmZXJcclxuICAgIGlmIChnZW9tZXRyeS5zcGF0aWFsUmVmZXJlbmNlPy5pc0dlb2dyYXBoaWMgJiYgIWdlb21ldHJ5LnNwYXRpYWxSZWZlcmVuY2UuaXNXR1M4NCkge1xyXG4gICAgICBjb25zdCBzZXJ2aWNlVXJsID0gdXRpbHMuZ2V0R2VvbWV0cnlTZXJ2aWNlKClcclxuICAgICAgaWYgKCFnZW9tZXRyeVNlcnZpY2VSZWYuY3VycmVudCkge1xyXG4gICAgICAgIGNvbnN0IG1vZHVsZXMgPSBhd2FpdCBsb2FkQXJjR0lTSlNBUElNb2R1bGVzKFtcclxuICAgICAgICAgICdlc3JpL3Jlc3QvZ2VvbWV0cnlTZXJ2aWNlJyxcclxuICAgICAgICAgICdlc3JpL3Jlc3Qvc3VwcG9ydC9CdWZmZXJQYXJhbWV0ZXJzJ1xyXG4gICAgICAgIF0pXHJcbiAgICAgICAgZ2VvbWV0cnlTZXJ2aWNlUmVmLmN1cnJlbnQgPSB7XHJcbiAgICAgICAgICBnZW9tZXRyeVNlcnZpY2U6IG1vZHVsZXNbMF0sXHJcbiAgICAgICAgICBidWZmZXJQYXJhbWV0ZXJzOiBtb2R1bGVzWzFdXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IHsgZ2VvbWV0cnlTZXJ2aWNlLCBidWZmZXJQYXJhbWV0ZXJzOiBCdWZmZXJQYXJhbWV0ZXJzIH0gPSBnZW9tZXRyeVNlcnZpY2VSZWYuY3VycmVudFxyXG4gICAgICBjb25zdCBwb2x5Z29ucyA9IGF3YWl0IGdlb21ldHJ5U2VydmljZS5idWZmZXIoc2VydmljZVVybCwgbmV3IEJ1ZmZlclBhcmFtZXRlcnMoe1xyXG4gICAgICAgIGRpc3RhbmNlczogW2J1ZmZlckRpc3RhbmNlUmVmLmN1cnJlbnRdLFxyXG4gICAgICAgIHVuaXQ6IGxvZGFzaC5rZWJhYkNhc2UoYnVmZmVyVW5pdFJlZi5jdXJyZW50KSBhcyBhbnksXHJcbiAgICAgICAgZ2VvZGVzaWM6IHRydWUsXHJcbiAgICAgICAgYnVmZmVyU3BhdGlhbFJlZmVyZW5jZTogZ2VvbWV0cnkuc3BhdGlhbFJlZmVyZW5jZSxcclxuICAgICAgICBvdXRTcGF0aWFsUmVmZXJlbmNlOiBnZW9tZXRyeS5zcGF0aWFsUmVmZXJlbmNlLFxyXG4gICAgICAgIGdlb21ldHJpZXM6IFtnZW9tZXRyeV1cclxuICAgICAgfSkpXHJcbiAgICAgIGJ1ZmZlcmVkR3JhcGhpY1JlZi5jdXJyZW50Lmdlb21ldHJ5ID0gcG9seWdvbnNbMF1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlmIChnZW9tZXRyeS5zcGF0aWFsUmVmZXJlbmNlPy5pc1dHUzg0IHx8IGdlb21ldHJ5LnNwYXRpYWxSZWZlcmVuY2U/LmlzV2ViTWVyY2F0b3IpIHtcclxuICAgICAgICBpZiAoIWdlb2Rlc2ljQnVmZmVyT3BlcmF0b3JSZWYuY3VycmVudCkge1xyXG4gICAgICAgICAgZ2VvZGVzaWNCdWZmZXJPcGVyYXRvclJlZi5jdXJyZW50ID0gYXdhaXQgbG9hZEFyY0dJU0pTQVBJTW9kdWxlKCdlc3JpL2dlb21ldHJ5L29wZXJhdG9ycy9nZW9kZXNpY0J1ZmZlck9wZXJhdG9yJylcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFnZW9kZXNpY0J1ZmZlck9wZXJhdG9yUmVmLmN1cnJlbnQuaXNMb2FkZWQoKSkge1xyXG4gICAgICAgICAgYXdhaXQgZ2VvZGVzaWNCdWZmZXJPcGVyYXRvclJlZi5jdXJyZW50LmxvYWQoKVxyXG4gICAgICAgIH1cclxuICAgICAgICBidWZmZXJlZEdyYXBoaWNSZWYuY3VycmVudC5nZW9tZXRyeSA9IGdlb2Rlc2ljQnVmZmVyT3BlcmF0b3JSZWYuY3VycmVudC5leGVjdXRlKFxyXG4gICAgICAgICAgZ2VvbWV0cnkgYXMgX19lc3JpLkdlb21ldHJ5VW5pb24sXHJcbiAgICAgICAgICBidWZmZXJEaXN0YW5jZVJlZi5jdXJyZW50LFxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICB1bml0OiBsb2Rhc2gua2ViYWJDYXNlKGJ1ZmZlclVuaXRSZWYuY3VycmVudCkgYXMgYW55XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgKVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmICghYnVmZmVyT3BlcmF0b3JSZWYuY3VycmVudCkge1xyXG4gICAgICAgICAgYnVmZmVyT3BlcmF0b3JSZWYuY3VycmVudCA9IGF3YWl0IGxvYWRBcmNHSVNKU0FQSU1vZHVsZSgnZXNyaS9nZW9tZXRyeS9vcGVyYXRvcnMvYnVmZmVyT3BlcmF0b3InKVxyXG4gICAgICAgIH1cclxuICAgICAgICBidWZmZXJlZEdyYXBoaWNSZWYuY3VycmVudC5nZW9tZXRyeSA9IGJ1ZmZlck9wZXJhdG9yUmVmLmN1cnJlbnQuZXhlY3V0ZShcclxuICAgICAgICAgIGdlb21ldHJ5IGFzIF9fZXNyaS5HZW9tZXRyeVVuaW9uLFxyXG4gICAgICAgICAgYnVmZmVyRGlzdGFuY2VSZWYuY3VycmVudCxcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgdW5pdDogbG9kYXNoLmtlYmFiQ2FzZShidWZmZXJVbml0UmVmLmN1cnJlbnQpIGFzIGFueVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIClcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0sIFtlbmFibGVCdWZmZXJdKVxyXG5cclxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgaWYgKHF1ZXJ5VGFza0NvbnRleHQucmVzZXRTeW1ib2wgJiYgcXVlcnlUYXNrQ29udGV4dC5yZXNldFN5bWJvbCAhPT0gcmVzZXRTeW1ib2xSZWYuY3VycmVudCkge1xyXG4gICAgICByZXNldFN5bWJvbFJlZi5jdXJyZW50ID0gcXVlcnlUYXNrQ29udGV4dC5yZXNldFN5bWJvbFxyXG4gICAgICBnZXRMYXllckZ1blJlZi5jdXJyZW50ICYmIGdldExheWVyRnVuUmVmLmN1cnJlbnQoKS5yZW1vdmVBbGwoKVxyXG4gICAgICBvbkdlb21ldHJ5Q2hhbmdlKG51bGwpXHJcbiAgICB9XHJcbiAgfSwgW3F1ZXJ5VGFza0NvbnRleHQucmVzZXRTeW1ib2wsIG9uR2VvbWV0cnlDaGFuZ2VdKVxyXG5cclxuICBjb25zdCBoYW5kbGVKaW11TWFwVmlld0NoYW5nZWQgPSBSZWFjdC51c2VDYWxsYmFjaygoamltdU1hcFZpZXc6IEppbXVNYXBWaWV3KSA9PiB7XHJcbiAgICAvLyBjbGVhciBkcmF3aW5nIGdyYXBoaWNzIGJlZm9yZSBzd2l0Y2hpbmcgbWFwIHZpZXdcclxuICAgIGNvbnN0IGxheWVyID0gZ2V0TGF5ZXJGdW5SZWYuY3VycmVudCAmJiBnZXRMYXllckZ1blJlZi5jdXJyZW50KClcclxuICAgIGlmIChsYXllcikge1xyXG4gICAgICBsYXllci5yZW1vdmVBbGwoKVxyXG4gICAgICBvbkdlb21ldHJ5Q2hhbmdlKG51bGwpXHJcbiAgICB9XHJcbiAgICBzZXRKaW11TWFwVmlldyhqaW11TWFwVmlldz8udmlldyAhPSBudWxsID8gamltdU1hcFZpZXcgOiBudWxsKVxyXG4gIH0sIFtvbkdlb21ldHJ5Q2hhbmdlXSlcclxuXHJcbiAgY29uc3QgaGFuZGxlQnVmZmVyQ2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soKGRpc3RhbmNlLCB1bml0KSA9PiB7XHJcbiAgICBidWZmZXJEaXN0YW5jZVJlZi5jdXJyZW50ID0gZGlzdGFuY2VcclxuICAgIGJ1ZmZlclVuaXRSZWYuY3VycmVudCA9IHVuaXRcclxuICAgIGFwcGx5QnVmZmVyRWZmZWN0KClcclxuICAgIG9uQnVmZmVyQ2hhbmdlKGRpc3RhbmNlLCB1bml0KVxyXG4gIH0sIFtvbkJ1ZmZlckNoYW5nZSwgYXBwbHlCdWZmZXJFZmZlY3RdKVxyXG5cclxuICBjb25zdCBoYW5kbGVEcmF3RW5kID0gUmVhY3QudXNlQ2FsbGJhY2soKGdyYXBoaWMsIGdldExheWVyRnVuLCBjbGVhckFmdGVyQXBwbHkpID0+IHtcclxuICAgIGdldExheWVyRnVuUmVmLmN1cnJlbnQgPSBnZXRMYXllckZ1blxyXG4gICAgY29uc3QgbGF5ZXIgPSBnZXRMYXllckZ1blJlZi5jdXJyZW50ICYmIGdldExheWVyRnVuUmVmLmN1cnJlbnQoKVxyXG4gICAgLy8gaXQncyBwb3NzaWJsZSB0aGF0IHRoZSBnZW9tZXRyeSBpcyB0aGUgc2FtZSBhcyB0aGUgcHJldmlvdXMgb25lLCBvbmx5IHRoZSBjbGVhckFmdGVyQXBwbHkgaXMgY2hhbmdlZC5cclxuICAgIGlmIChnZW9tZXRyeVJlZi5jdXJyZW50ICE9PSBncmFwaGljPy5nZW9tZXRyeSkge1xyXG4gICAgICBnZW9tZXRyeVJlZi5jdXJyZW50ID0gZ3JhcGhpYz8uZ2VvbWV0cnlcclxuICAgICAgYXBwbHlCdWZmZXJFZmZlY3QoKS50aGVuKCgpID0+IHtcclxuICAgICAgICBpZiAoYnVmZmVyZWRHcmFwaGljUmVmLmN1cnJlbnQuZ2VvbWV0cnkpIHtcclxuICAgICAgICAgIGxheWVyPy5hZGQoYnVmZmVyZWRHcmFwaGljUmVmLmN1cnJlbnQpXHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gICAgb25HZW9tZXRyeUNoYW5nZShncmFwaGljPy5nZW9tZXRyeSwgbGF5ZXIsIGdyYXBoaWMsIGNsZWFyQWZ0ZXJBcHBseSlcclxuICB9LCBbb25HZW9tZXRyeUNoYW5nZSwgYXBwbHlCdWZmZXJFZmZlY3RdKVxyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPFJlYWN0LkZyYWdtZW50PlxyXG4gICAgICB7XHJcbiAgICAgICAgbWFwV2lkZ2V0SWRzPy5tYXAoKG1hcFdpZGdldElkLCB4KSA9PiAoXHJcbiAgICAgICAgICA8SmltdU1hcFZpZXdDb21wb25lbnRcclxuICAgICAgICAgICAga2V5PXt4fSB1c2VNYXBXaWRnZXRJZD17bWFwV2lkZ2V0SWR9IG9uQWN0aXZlVmlld0NoYW5nZT17aGFuZGxlSmltdU1hcFZpZXdDaGFuZ2VkfVxyXG4gICAgICAgICAgLz5cclxuICAgICAgICApKVxyXG4gICAgICB9XHJcbiAgICAgIHtqaW11TWFwVmlldz8udmlldyAmJiAoXHJcbiAgICAgICAgPFJlYWN0LkZyYWdtZW50PlxyXG4gICAgICAgICAgPEludGVyYWN0aXZlRHJhd1xyXG4gICAgICAgICAgICBqaW11TWFwVmlldz17amltdU1hcFZpZXd9XHJcbiAgICAgICAgICAgIHdpZGdldElkPXt3aWRnZXRJZH1cclxuICAgICAgICAgICAgdG9vbFR5cGVzPXtjcmVhdGVUb29sVHlwZXN9XHJcbiAgICAgICAgICAgIG9uRHJhd0VuZD17aGFuZGxlRHJhd0VuZH1cclxuICAgICAgICAgIC8+XHJcbiAgICAgICAgICB7ZW5hYmxlQnVmZmVyICYmIChcclxuICAgICAgICAgICAgPGRpdiByb2xlPSdncm91cCcgY2xhc3NOYW1lPSd0aXRsZTMnIGFyaWEtbGFiZWw9e2dldEkxOG5NZXNzYWdlKCd0aGVCdWZmZXJEaXN0YW5jZScpfSBjc3M9e2Nzc2BtYXJnaW4tdG9wOiAwLjc1cmVtO2B9PlxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd0ZXh0LXRydW5jYXRlJz57Z2V0STE4bk1lc3NhZ2UoJ3RoZUJ1ZmZlckRpc3RhbmNlJyl9PC9kaXY+XHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2QtZmxleCBtdC0xJz5cclxuICAgICAgICAgICAgICAgIDxCdWZmZXJJbnB1dCBkaXN0YW5jZT17YnVmZmVyRGlzdGFuY2V9IHVuaXQ9e2J1ZmZlclVuaXR9IG9uQnVmZmVyQ2hhbmdlPXtoYW5kbGVCdWZmZXJDaGFuZ2V9Lz5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICApfVxyXG4gICAgICAgIDwvUmVhY3QuRnJhZ21lbnQ+XHJcbiAgICAgICl9XHJcbiAgICA8L1JlYWN0LkZyYWdtZW50PlxyXG4gIClcclxufVxyXG4iLCIvKiogQGpzeCBqc3ggKi9cclxuaW1wb3J0IHtcclxuICBSZWFjdCxcclxuICBSZWFjdFJlZHV4LFxyXG4gIGpzeCxcclxuICBjc3MsXHJcbiAgSW1tdXRhYmxlLFxyXG4gIHR5cGUgSW1tdXRhYmxlQXJyYXksXHJcbiAgdHlwZSBVc2VEYXRhU291cmNlLFxyXG4gIHR5cGUgRmVhdHVyZURhdGFSZWNvcmQsXHJcbiAgRGF0YVNvdXJjZU1hbmFnZXIsXHJcbiAgRGF0YVNvdXJjZUNvbXBvbmVudCxcclxuICBob29rcyxcclxuICB0eXBlIERhdGFTb3VyY2UsXHJcbiAgdHlwZSBJTVN0YXRlLFxyXG4gIERhdGFTb3VyY2VTdGF0dXNcclxufSBmcm9tICdqaW11LWNvcmUnXHJcbmltcG9ydCB7IFNlbGVjdCwgT3B0aW9uLCBkZWZhdWx0TWVzc2FnZXMgYXMgamltdVVJTWVzc2FnZXMgfSBmcm9tICdqaW11LXVpJ1xyXG5pbXBvcnQgeyBTcGF0aWFsUmVsYXRpb24sIHR5cGUgVW5pdFR5cGUgfSBmcm9tICcuLi9jb25maWcnXHJcbmltcG9ydCB7IEJ1ZmZlcklucHV0IH0gZnJvbSAnLi9idWZmZXItaW5wdXQnXHJcbmltcG9ydCBkZWZhdWx0TWVzc2FnZSBmcm9tICcuL3RyYW5zbGF0aW9ucy9kZWZhdWx0J1xyXG5pbXBvcnQgeyBRdWVyeVRhc2tDb250ZXh0IH0gZnJvbSAnLi9xdWVyeS10YXNrLWNvbnRleHQnXHJcblxyXG5jb25zdCBtYXJnaW5TdHlsZSA9IGNzc2BtYXJnaW4tdG9wOiAwLjc1cmVtO2BcclxuZXhwb3J0IGludGVyZmFjZSBQcm9wcyB7XHJcbiAgc3BhdGlhbFJlbGF0aW9uczogSW1tdXRhYmxlQXJyYXk8U3BhdGlhbFJlbGF0aW9uPlxyXG4gIHVzZURhdGFTb3VyY2VzOiBJbW11dGFibGVBcnJheTxVc2VEYXRhU291cmNlPlxyXG4gIHVzZVJ1bnRpbWVEYXRhOiBib29sZWFuXHJcbiAgZW5hYmxlQnVmZmVyOiBib29sZWFuXHJcbiAgYnVmZmVyRGlzdGFuY2U6IG51bWJlclxyXG4gIGJ1ZmZlclVuaXQ6IFVuaXRUeXBlXHJcbiAgb25TZWxlY3Rpb25DaGFuZ2U6IChnZW9tczogX19lc3JpLkdlb21ldHJ5W10pID0+IHZvaWRcclxuICBvblJlbGF0aW9uQ2hhbmdlOiAocmVsOiBTcGF0aWFsUmVsYXRpb24pID0+IHZvaWRcclxuICBvbkJ1ZmZlckNoYW5nZTogKGRpc3RhbmNlOiBudW1iZXIsIHVuaXQ6IFVuaXRUeXBlKSA9PiB2b2lkXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFJ1bnRpbWVEYXRhU291cmNlICgpOiB7IFtkc0lkOiBzdHJpbmddOiBEYXRhU291cmNlIH0ge1xyXG4gIGNvbnN0IHJlc3VsdCA9IHt9XHJcbiAgbGV0IG5vdEVtcHR5ID0gZmFsc2VcclxuICBjb25zdCBkc01hcCA9IERhdGFTb3VyY2VNYW5hZ2VyLmdldEluc3RhbmNlKCkuZ2V0RGF0YVNvdXJjZXMoKVxyXG4gIE9iamVjdC5rZXlzKGRzTWFwKS5mb3JFYWNoKGRzSWQgPT4ge1xyXG4gICAgY29uc3QgZHMgPSBkc01hcFtkc0lkXVxyXG4gICAgLy8gb25seSBpbmNsdWRlIHRoZSBkcyB0aGF0IGhhcyBnZW9tZXRyeVxyXG4gICAgaWYgKGRzLmdldEdlb21ldHJ5VHlwZSgpICE9IG51bGwgJiYgIWRzLmlzSW5BcHBDb25maWcoKSAmJiBkcy5nZXRNYWluRGF0YVNvdXJjZSgpLmlkID09PSBkc0lkICYmICFkcy5nZXREYXRhU291cmNlSnNvbigpLmlzT3V0cHV0RnJvbVdpZGdldCkge1xyXG4gICAgICByZXN1bHRbZHNJZF0gPSBkc1xyXG4gICAgICBub3RFbXB0eSA9IHRydWVcclxuICAgIH1cclxuICB9KVxyXG5cclxuICByZXR1cm4gbm90RW1wdHkgPyByZXN1bHQgOiBudWxsXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBHZW9tZXRyeUZyb21EYXRhU291cmNlIChwcm9wczogUHJvcHMpIHtcclxuICBjb25zdCB7IG9uU2VsZWN0aW9uQ2hhbmdlLCB1c2VEYXRhU291cmNlcyA9IFtdLCB1c2VSdW50aW1lRGF0YSwgc3BhdGlhbFJlbGF0aW9ucywgZW5hYmxlQnVmZmVyLCBidWZmZXJEaXN0YW5jZSwgYnVmZmVyVW5pdCwgb25CdWZmZXJDaGFuZ2UsIG9uUmVsYXRpb25DaGFuZ2UgfSA9IHByb3BzXHJcbiAgY29uc3QgZ2V0STE4bk1lc3NhZ2UgPSBob29rcy51c2VUcmFuc2xhdGlvbihqaW11VUlNZXNzYWdlcywgZGVmYXVsdE1lc3NhZ2UpXHJcbiAgY29uc3QgW2N1cnJlbnREYXRhU291cmNlLCBzZXRDdXJyZW50RGF0YVNvdXJjZV0gPSBSZWFjdC51c2VTdGF0ZSh1c2VEYXRhU291cmNlc1swXSlcclxuICBjb25zdCBbcnVudGltZURhdGFTb3VyY2UsIHNldFJ1bnRpbWVEYXRhU291cmNlXSA9IFJlYWN0LnVzZVN0YXRlPERhdGFTb3VyY2U+KClcclxuICBjb25zdCBbY291bnQsIHNldENvdW50XSA9IFJlYWN0LnVzZVN0YXRlKDApXHJcbiAgY29uc3QgW2N1cnJlbnRSZWxhdGlvbiwgc2V0Q3VycmVudFJlbGF0aW9uXSA9IFJlYWN0LnVzZVN0YXRlKHNwYXRpYWxSZWxhdGlvbnM/LlswXSlcclxuICBjb25zdCBxdWVyeVRhc2tDb250ZXh0ID0gUmVhY3QudXNlQ29udGV4dChRdWVyeVRhc2tDb250ZXh0KVxyXG4gIGNvbnN0IHJlc2V0U3ltYm9sUmVmID0gUmVhY3QudXNlUmVmKHF1ZXJ5VGFza0NvbnRleHQucmVzZXRTeW1ib2wpXHJcbiAgY29uc3QgdHJhbnNsYXRlID0gaG9va3MudXNlVHJhbnNsYXRpb24oKVxyXG5cclxuICBjb25zdCBzcGF0aWFsUmVsYXRpb25PcHRpb25zOiBBcnJheTx7IHZhbHVlOiBzdHJpbmcsIGxhYmVsOiBzdHJpbmcgfT4gPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcclxuICAgIHJldHVybiBPYmplY3QuZW50cmllcyhTcGF0aWFsUmVsYXRpb24pLm1hcCgoW2tleSwgdmFsdWVdKSA9PiAoe1xyXG4gICAgICB2YWx1ZSxcclxuICAgICAgbGFiZWw6IGdldEkxOG5NZXNzYWdlKGBzcGF0aWFsUmVsYXRpb25fJHtrZXl9YClcclxuICAgIH0pKVxyXG4gIH0sIFtnZXRJMThuTWVzc2FnZV0pXHJcblxyXG4gIGNvbnN0IGxvYWRlZFVzZURhdGFTb3VyY2VzID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcclxuICAgIGNvbnN0IGxvYWRlZCA9IFtdXHJcbiAgICB1c2VEYXRhU291cmNlcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIGlmIChzdGF0ZS5kYXRhU291cmNlc0luZm8/LltpdGVtLm1haW5EYXRhU291cmNlSWRdPy5pbnN0YW5jZVN0YXR1cyA9PT0gRGF0YVNvdXJjZVN0YXR1cy5DcmVhdGVkKSB7XHJcbiAgICAgICAgbG9hZGVkLnB1c2goaXRlbS5kYXRhU291cmNlSWQpXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgICBpZiAobG9hZGVkLmxlbmd0aCA+IDApIHtcclxuICAgICAgcmV0dXJuIGxvYWRlZC5qb2luKCcsJylcclxuICAgIH1cclxuICAgIHJldHVybiAnJ1xyXG4gIH0pXHJcblxyXG4gIGNvbnN0IG51bU9mRHMgPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xyXG4gICAgaWYgKCF1c2VSdW50aW1lRGF0YSkge1xyXG4gICAgICByZXR1cm4gMFxyXG4gICAgfVxyXG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKHN0YXRlLmRhdGFTb3VyY2VzSW5mbyA/PyB7fSkuZmlsdGVyKGRzSWQgPT4gc3RhdGUuZGF0YVNvdXJjZXNJbmZvW2RzSWRdLmluc3RhbmNlU3RhdHVzID09PSBEYXRhU291cmNlU3RhdHVzLkNyZWF0ZWQpLmxlbmd0aFxyXG4gIH0pXHJcblxyXG4gIGNvbnN0IHJ1bnRpbWVEYXRhU291cmNlcyA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xyXG4gICAgaWYgKG51bU9mRHMgPiAwKSB7XHJcbiAgICAgIHJldHVybiBnZXRSdW50aW1lRGF0YVNvdXJjZSgpXHJcbiAgICB9XHJcbiAgfSwgW251bU9mRHNdKVxyXG5cclxuICBjb25zdCBudW1PZlJ1bnRpbWVEcyA9IE9iamVjdC5rZXlzKHJ1bnRpbWVEYXRhU291cmNlcyA/PyB7fSkubGVuZ3RoXHJcblxyXG4gIGhvb2tzLnVzZUVmZmVjdE9uY2UoKCkgPT4ge1xyXG4gICAgaWYgKHNwYXRpYWxSZWxhdGlvbnM/Lmxlbmd0aCA+IDApIHtcclxuICAgICAgb25SZWxhdGlvbkNoYW5nZShzcGF0aWFsUmVsYXRpb25zWzBdKVxyXG4gICAgfVxyXG4gICAgaWYgKGVuYWJsZUJ1ZmZlcikge1xyXG4gICAgICBvbkJ1ZmZlckNoYW5nZShidWZmZXJEaXN0YW5jZSwgYnVmZmVyVW5pdClcclxuICAgIH1cclxuICB9KVxyXG5cclxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgaWYgKHF1ZXJ5VGFza0NvbnRleHQucmVzZXRTeW1ib2wgJiYgcXVlcnlUYXNrQ29udGV4dC5yZXNldFN5bWJvbCAhPT0gcmVzZXRTeW1ib2xSZWYuY3VycmVudCkge1xyXG4gICAgICByZXNldFN5bWJvbFJlZi5jdXJyZW50ID0gcXVlcnlUYXNrQ29udGV4dC5yZXNldFN5bWJvbFxyXG4gICAgICBzZXRDdXJyZW50UmVsYXRpb24oc3BhdGlhbFJlbGF0aW9ucz8uWzBdKVxyXG4gICAgICBvblJlbGF0aW9uQ2hhbmdlKHNwYXRpYWxSZWxhdGlvbnM/LlswXSlcclxuICAgIH1cclxuICB9LCBbcXVlcnlUYXNrQ29udGV4dC5yZXNldFN5bWJvbCwgb25SZWxhdGlvbkNoYW5nZSwgc3BhdGlhbFJlbGF0aW9uc10pXHJcblxyXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpZiAoIXNwYXRpYWxSZWxhdGlvbnMpIHtcclxuICAgICAgc2V0Q3VycmVudFJlbGF0aW9uKG51bGwpXHJcbiAgICB9IGVsc2UgaWYgKCFzcGF0aWFsUmVsYXRpb25zLmluY2x1ZGVzKGN1cnJlbnRSZWxhdGlvbikpIHtcclxuICAgICAgc2V0Q3VycmVudFJlbGF0aW9uKHNwYXRpYWxSZWxhdGlvbnNbMF0pXHJcbiAgICAgIG9uUmVsYXRpb25DaGFuZ2Uoc3BhdGlhbFJlbGF0aW9uc1swXSlcclxuICAgIH1cclxuICB9LCBbc3BhdGlhbFJlbGF0aW9ucywgY3VycmVudFJlbGF0aW9uLCBvblJlbGF0aW9uQ2hhbmdlXSlcclxuXHJcbiAgY29uc3QgaGFuZGxlRGF0YVNvdXJjZUNoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKFxyXG4gICAgKGRzSWQ6IHN0cmluZykgPT4ge1xyXG4gICAgICBjb25zdCBkcyA9IHVzZURhdGFTb3VyY2VzLmZpbmQoKGl0ZW0pID0+IGl0ZW0uZGF0YVNvdXJjZUlkID09PSBkc0lkKVxyXG4gICAgICBzZXRDdXJyZW50RGF0YVNvdXJjZShJbW11dGFibGUoZHMpKVxyXG4gICAgICBzZXRSdW50aW1lRGF0YVNvdXJjZShudWxsKVxyXG4gICAgfSxcclxuICAgIFt1c2VEYXRhU291cmNlc11cclxuICApXHJcblxyXG4gIGNvbnN0IGhhbmRsZVJ1bnRpbWVEYXRhU291cmNlQ2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soXHJcbiAgICAoZHNJZDogc3RyaW5nKSA9PiB7XHJcbiAgICAgIGNvbnN0IGRzID0gRGF0YVNvdXJjZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5nZXREYXRhU291cmNlKGRzSWQpXHJcbiAgICAgIHNldFJ1bnRpbWVEYXRhU291cmNlKGRzKVxyXG4gICAgICBzZXRDdXJyZW50RGF0YVNvdXJjZShudWxsKVxyXG4gICAgfSxcclxuICAgIFtdXHJcbiAgKVxyXG5cclxuICBjb25zdCBoYW5kbGVEYXRhU291cmNlSW5mb0NoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKCgpID0+IHtcclxuICAgIGNvbnN0IGRzID0gRGF0YVNvdXJjZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5nZXREYXRhU291cmNlKGN1cnJlbnREYXRhU291cmNlPy5kYXRhU291cmNlSWQgPz8gcnVudGltZURhdGFTb3VyY2U/LmlkKVxyXG4gICAgY29uc3QgcmVjb3JkcyA9IGRzPy5nZXRTZWxlY3RlZFJlY29yZHMoKSBhcyBGZWF0dXJlRGF0YVJlY29yZFtdXHJcbiAgICBpZiAocmVjb3Jkcz8ubGVuZ3RoID4gMCkge1xyXG4gICAgICBjb25zdCBnZW9tZXRyaWVzID0gcmVjb3Jkcy5tYXAoKHJlY29yZCkgPT4gcmVjb3JkLmdldEpTQVBJR2VvbWV0cnkoKSlcclxuICAgICAgb25TZWxlY3Rpb25DaGFuZ2UoZ2VvbWV0cmllcylcclxuICAgICAgc2V0Q291bnQocmVjb3Jkcy5sZW5ndGgpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBvblNlbGVjdGlvbkNoYW5nZShudWxsKVxyXG4gICAgICBzZXRDb3VudCgwKVxyXG4gICAgfVxyXG4gIH0sIFtjdXJyZW50RGF0YVNvdXJjZT8uZGF0YVNvdXJjZUlkLCBydW50aW1lRGF0YVNvdXJjZT8uaWQsIG9uU2VsZWN0aW9uQ2hhbmdlXSlcclxuXHJcbiAgY29uc3QgZ2V0TGFiZWxPZlNwYXRpYWxSZWxhdGlvbiA9IChyZWxhdGlvbjogc3RyaW5nKTogc3RyaW5nID0+IHtcclxuICAgIHJldHVybiBzcGF0aWFsUmVsYXRpb25PcHRpb25zLmZpbmQoaXRlbSA9PiBpdGVtLnZhbHVlID09PSByZWxhdGlvbikubGFiZWxcclxuICB9XHJcblxyXG4gIGNvbnN0IGhhbmRsZVNwYXRpYWxSZWxhdGlvbkNoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKGUgPT4ge1xyXG4gICAgc2V0Q3VycmVudFJlbGF0aW9uKGUudGFyZ2V0LnZhbHVlKVxyXG4gICAgb25SZWxhdGlvbkNoYW5nZShlLnRhcmdldC52YWx1ZSlcclxuICB9LCBbb25SZWxhdGlvbkNoYW5nZV0pXHJcblxyXG4gIHJldHVybiAoXHJcbiAgICA8ZGl2PlxyXG4gICAgICA8ZGl2IGNzcz17bWFyZ2luU3R5bGV9IGNsYXNzTmFtZT0ndGl0bGUzJz57Z2V0STE4bk1lc3NhZ2UoJ2Nob29zZUZpbHRlckxheWVyJyl9PC9kaXY+XHJcbiAgICAgIDxTZWxlY3RcclxuICAgICAgICBhcmlhLWxhYmVsPXtnZXRJMThuTWVzc2FnZSgnY2hvb3NlRmlsdGVyTGF5ZXInKX1cclxuICAgICAgICB2YWx1ZT17Y3VycmVudERhdGFTb3VyY2U/LmRhdGFTb3VyY2VJZCA/PyBydW50aW1lRGF0YVNvdXJjZT8uaWR9XHJcbiAgICAgID5cclxuICAgICAgICB7bnVtT2ZSdW50aW1lRHMgPiAwICYmIHVzZURhdGFTb3VyY2VzLmxlbmd0aCA+IDAgJiYgPE9wdGlvbiBoZWFkZXI+e2dldEkxOG5NZXNzYWdlKCdwcmVjb25maWd1cmVkJyl9PC9PcHRpb24+fVxyXG4gICAgICAgIHt1c2VEYXRhU291cmNlcy5tYXAoKGl0ZW0pID0+IHtcclxuICAgICAgICAgIGNvbnN0IGRzID0gRGF0YVNvdXJjZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5nZXREYXRhU291cmNlKGl0ZW0uZGF0YVNvdXJjZUlkKVxyXG4gICAgICAgICAgaWYgKGxvYWRlZFVzZURhdGFTb3VyY2VzLmluY2x1ZGVzKGl0ZW0uZGF0YVNvdXJjZUlkKSB8fCBkcz8uZ2V0TGFiZWwoKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgIDxPcHRpb24ga2V5PXtpdGVtLmRhdGFTb3VyY2VJZH0gdmFsdWU9e2l0ZW0uZGF0YVNvdXJjZUlkfSBvbkNsaWNrPXsoKSA9PiB7IGhhbmRsZURhdGFTb3VyY2VDaGFuZ2UoaXRlbS5kYXRhU291cmNlSWQpIH19PlxyXG4gICAgICAgICAgICAgIHtkcz8uZ2V0TGFiZWwoKX1cclxuICAgICAgICAgICAgICA8L09wdGlvbj5cclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPE9wdGlvbiBrZXk9e2l0ZW0uZGF0YVNvdXJjZUlkfT5cclxuICAgICAgICAgICAgICB7dHJhbnNsYXRlKCdsb2FkaW5nJyl9XHJcbiAgICAgICAgICAgIDwvT3B0aW9uPlxyXG4gICAgICAgICAgKVxyXG4gICAgICAgIH0pfVxyXG4gICAgICAgIHtudW1PZlJ1bnRpbWVEcyA+IDAgJiYgdXNlRGF0YVNvdXJjZXMubGVuZ3RoID4gMCAmJiA8T3B0aW9uIGRpdmlkZXIvPn1cclxuICAgICAgICB7bnVtT2ZSdW50aW1lRHMgPiAwICYmIDxPcHRpb24gaGVhZGVyPntnZXRJMThuTWVzc2FnZSgncnVudGltZScpfTwvT3B0aW9uPn1cclxuICAgICAgICB7T2JqZWN0LmtleXMocnVudGltZURhdGFTb3VyY2VzID8/IHt9KS5tYXAoZHNJZCA9PiB7XHJcbiAgICAgICAgICBjb25zdCBkcyA9IHJ1bnRpbWVEYXRhU291cmNlc1tkc0lkXVxyXG4gICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPE9wdGlvbiBrZXk9e2RzSWR9IHZhbHVlPXtkc0lkfSBvbkNsaWNrPXsoKSA9PiB7IGhhbmRsZVJ1bnRpbWVEYXRhU291cmNlQ2hhbmdlKGRzSWQpIH19PlxyXG4gICAgICAgICAgICAgIHtkcy5nZXRMYWJlbCgpfVxyXG4gICAgICAgICAgICA8L09wdGlvbj5cclxuICAgICAgICAgIClcclxuICAgICAgICB9KX1cclxuICAgICAgPC9TZWxlY3Q+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdtdC0xIGZvbnQtaXRhbGljJyBjc3M9e2Nzc2Bjb2xvcjogdmFyKC0tc3lzLWNvbG9yLXN1cmZhY2UtcGFwZXItaGludCk7YH0+e2dldEkxOG5NZXNzYWdlKCdzZWxlY3RlZFJlY29yZHMnLCB7IG51bTogY291bnQgfSl9PC9kaXY+XHJcbiAgICAgIHtzcGF0aWFsUmVsYXRpb25zPy5sZW5ndGggPiAwICYmIChcclxuICAgICAgICA8ZGl2IGNzcz17bWFyZ2luU3R5bGV9PlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3RleHQtdHJ1bmNhdGUgdGl0bGUzIG1iLTAnPntnZXRJMThuTWVzc2FnZSgncmVsYXRpb25zaGlwJyl9PC9kaXY+XHJcbiAgICAgICAgICA8U2VsZWN0XHJcbiAgICAgICAgICAgIGFyaWEtbGFiZWw9e2dldEkxOG5NZXNzYWdlKCdyZWxhdGlvbnNoaXAnKX1cclxuICAgICAgICAgICAgdmFsdWU9e2N1cnJlbnRSZWxhdGlvbn1cclxuICAgICAgICAgICAgb25DaGFuZ2U9e2hhbmRsZVNwYXRpYWxSZWxhdGlvbkNoYW5nZX1cclxuICAgICAgICAgID5cclxuICAgICAgICAgICAge3NwYXRpYWxSZWxhdGlvbnMubWFwKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgIDxvcHRpb24ga2V5PXtpdGVtfSB2YWx1ZT17aXRlbX0+e2dldExhYmVsT2ZTcGF0aWFsUmVsYXRpb24oaXRlbSl9PC9vcHRpb24+XHJcbiAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICB9KX1cclxuICAgICAgICAgIDwvU2VsZWN0PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICApfVxyXG4gICAgICB7ZW5hYmxlQnVmZmVyICYmIChcclxuICAgICAgICA8ZGl2IHJvbGU9J2dyb3VwJyBhcmlhLWxhYmVsPXtnZXRJMThuTWVzc2FnZSgndGhlQnVmZmVyRGlzdGFuY2UnKX0gY3NzPXttYXJnaW5TdHlsZX0+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndGl0bGUzIHRleHQtdHJ1bmNhdGUnPntnZXRJMThuTWVzc2FnZSgndGhlQnVmZmVyRGlzdGFuY2UnKX08L2Rpdj5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdkLWZsZXggbXQtMSc+XHJcbiAgICAgICAgICAgIDxCdWZmZXJJbnB1dCBkaXN0YW5jZT17YnVmZmVyRGlzdGFuY2V9IHVuaXQ9e2J1ZmZlclVuaXR9IG9uQnVmZmVyQ2hhbmdlPXtvbkJ1ZmZlckNoYW5nZX0vPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICl9XHJcbiAgICAgIDxEYXRhU291cmNlQ29tcG9uZW50IHVzZURhdGFTb3VyY2U9e2N1cnJlbnREYXRhU291cmNlfSBkYXRhU291cmNlPXtydW50aW1lRGF0YVNvdXJjZX0gb25EYXRhU291cmNlSW5mb0NoYW5nZT17aGFuZGxlRGF0YVNvdXJjZUluZm9DaGFuZ2V9IC8+XHJcbiAgICAgIHt1c2VEYXRhU291cmNlcy5tYXAoKGl0ZW0pID0+IHtcclxuICAgICAgICAvLyBtYWtlIHN1cmUgdGhlIGRhdGFzb3VyY2UgaXMgY3JlYXRlZFxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICA8RGF0YVNvdXJjZUNvbXBvbmVudCBrZXk9e2l0ZW0uZGF0YVNvdXJjZUlkfSB1c2VEYXRhU291cmNlPXtpdGVtfS8+XHJcbiAgICAgICAgKVxyXG4gICAgICB9KX1cclxuICAgIDwvZGl2PlxyXG4gIClcclxufVxyXG4iLCIvKiogQGpzeCBqc3ggKi9cclxuaW1wb3J0IHsgUmVhY3QsIGpzeCwgbG9hZEFyY0dJU0pTQVBJTW9kdWxlLCB0eXBlIEltbXV0YWJsZUFycmF5IH0gZnJvbSAnamltdS1jb3JlJ1xyXG5pbXBvcnQgeyBKaW11TWFwVmlld0NvbXBvbmVudCwgdHlwZSBKaW11TWFwVmlldywgbG9hZEFyY0dJU0pTQVBJTW9kdWxlcyB9IGZyb20gJ2ppbXUtYXJjZ2lzJ1xyXG5pbXBvcnQgdHlwZSB7IENyZWF0ZVRvb2xUeXBlIH0gZnJvbSAnLi4vY29uZmlnJ1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBQcm9wcyB7XHJcbiAgbWFwV2lkZ2V0SWRzOiBJbW11dGFibGVBcnJheTxzdHJpbmc+XHJcbiAgY3JlYXRlVG9vbFR5cGVzOiBJbW11dGFibGVBcnJheTxDcmVhdGVUb29sVHlwZT5cclxuICBvbkdlb21ldHJ5Q2hhbmdlOiAoZ2VvbTogX19lc3JpLkdlb21ldHJ5LCBsYXllcj86IF9fZXNyaS5HcmFwaGljc0xheWVyLCBncmFwaGljPzogX19lc3JpLkdyYXBoaWMsIGNsZWFyQWZ0ZXJBcHBseT86IGJvb2xlYW4pID0+IHZvaWRcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIEdlb21ldHJ5RnJvbU1hcCAocHJvcHM6IFByb3BzKSB7XHJcbiAgY29uc3QgeyBvbkdlb21ldHJ5Q2hhbmdlLCBtYXBXaWRnZXRJZHMgfSA9IHByb3BzXHJcbiAgY29uc3QgW2ppbXVNYXBWaWV3LCBzZXRKaW11TWFwVmlld10gPSBSZWFjdC51c2VTdGF0ZTxKaW11TWFwVmlldz4obnVsbClcclxuICBjb25zdCBQb2x5Z29uUmVmID0gUmVhY3QudXNlUmVmPHR5cGVvZiBfX2VzcmkuUG9seWdvbj4obnVsbClcclxuXHJcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGlmIChqaW11TWFwVmlldz8udmlldykge1xyXG4gICAgICBsZXQgaGFuZGxlcjogSUhhbmRsZVxyXG4gICAgICBsb2FkQXJjR0lTSlNBUElNb2R1bGUoJ2VzcmkvY29yZS9yZWFjdGl2ZVV0aWxzJykudGhlbigocmVhY3RpdmVVdGlsczogX19lc3JpLnJlYWN0aXZlVXRpbHMpID0+IHtcclxuICAgICAgICBoYW5kbGVyID0gcmVhY3RpdmVVdGlscy53YXRjaCgoKSA9PiBqaW11TWFwVmlldy52aWV3LmV4dGVudCwgKGV4dGVudDogX19lc3JpLkV4dGVudCkgPT4ge1xyXG4gICAgICAgICAgaWYgKFBvbHlnb25SZWYuY3VycmVudCkge1xyXG4gICAgICAgICAgICBvbkdlb21ldHJ5Q2hhbmdlKFBvbHlnb25SZWYuY3VycmVudC5mcm9tRXh0ZW50KGV4dGVudCkpXHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBsb2FkQXJjR0lTSlNBUElNb2R1bGVzKFsnZXNyaS9nZW9tZXRyeS9Qb2x5Z29uJ10pLnRoZW4obW9kdWxlcyA9PiB7XHJcbiAgICAgICAgICAgICAgUG9seWdvblJlZi5jdXJyZW50ID0gbW9kdWxlc1swXVxyXG4gICAgICAgICAgICAgIG9uR2VvbWV0cnlDaGFuZ2UoUG9seWdvblJlZi5jdXJyZW50LmZyb21FeHRlbnQoZXh0ZW50KSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgIC8vIHNldCBpbml0aWFsIGV4dGVudFxyXG4gICAgICAgIG9uR2VvbWV0cnlDaGFuZ2UoamltdU1hcFZpZXcudmlldy5leHRlbnQpXHJcbiAgICAgIH0pXHJcbiAgICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgICAgaWYgKGhhbmRsZXIpIHtcclxuICAgICAgICAgIGhhbmRsZXIucmVtb3ZlKClcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9LCBbamltdU1hcFZpZXcsIG9uR2VvbWV0cnlDaGFuZ2VdKVxyXG5cclxuICBjb25zdCBoYW5kbGVKaW11TWFwVmlld0NoYW5nZWQgPSBSZWFjdC51c2VDYWxsYmFjaygoamltdU1hcFZpZXc6IEppbXVNYXBWaWV3KSA9PiB7XHJcbiAgICBzZXRKaW11TWFwVmlldyhqaW11TWFwVmlldz8udmlldyAhPSBudWxsID8gamltdU1hcFZpZXcgOiBudWxsKVxyXG4gIH0sIFtdKVxyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPFJlYWN0LkZyYWdtZW50PlxyXG4gICAgICB7XHJcbiAgICAgICAgbWFwV2lkZ2V0SWRzPy5tYXAoKG1hcFdpZGdldElkLCB4KSA9PiAoXHJcbiAgICAgICAgICA8SmltdU1hcFZpZXdDb21wb25lbnRcclxuICAgICAgICAgICAga2V5PXt4fSB1c2VNYXBXaWRnZXRJZD17bWFwV2lkZ2V0SWR9IG9uQWN0aXZlVmlld0NoYW5nZT17aGFuZGxlSmltdU1hcFZpZXdDaGFuZ2VkfVxyXG4gICAgICAgICAgLz5cclxuICAgICAgICApKVxyXG4gICAgICB9XHJcbiAgICA8L1JlYWN0LkZyYWdtZW50PlxyXG4gIClcclxufVxyXG4iLCIvKipcbiAqIFV0aWxpdHkgZnVuY3Rpb25zIGZvciBtYW5hZ2luZyBncmFwaGljcyBsYXllciBoaWdobGlnaHRpbmcgaW4gUXVlcnlTaW1wbGUgd2lkZ2V0LlxuICogUHJvdmlkZXMgaGlnaGxpZ2h0aW5nIHRoYXQgd29ya3MgaW5kZXBlbmRlbnRseSBvZiBsYXllciB2aXNpYmlsaXR5LlxuICovXG5cbmltcG9ydCB0eXBlIHsgRGF0YVNvdXJjZSwgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSwgRmVhdHVyZURhdGFSZWNvcmQgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBEYXRhU291cmNlTWFuYWdlciB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IGxvYWRBcmNHSVNKU0FQSU1vZHVsZXMgfSBmcm9tICdqaW11LWFyY2dpcydcbmltcG9ydCB7IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIgfSBmcm9tICd3aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbidcblxuY29uc3QgZGVidWdMb2dnZXIgPSBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyKClcblxuLy8gR2xvYmFsIHNlcXVlbmNlIGNvdW50ZXIgZm9yIGdyYXBoaWNzIG9wZXJhdGlvbnMgdG8gdHJhY2sgdGltaW5nIGFjcm9zcyBjYWxsc1xubGV0IG9wZXJhdGlvblNlcXVlbmNlID0gMFxuXG4vKipcbiAqIEdldHMgdGhlIG1hcCB2aWV3IGZyb20gYSBkYXRhIHNvdXJjZSdzIG9yaWdpbiBsYXllci5cbiAqIEFjY2Vzc2VzIHRoZSB2aWV3IHRocm91Z2ggdGhlIEZlYXR1cmVMYXllcidzIHZpZXcgcHJvcGVydHkuXG4gKiBAcGFyYW0gb3V0cHV0RFMgLSBUaGUgb3V0cHV0IGRhdGEgc291cmNlIChvciBhbnkgZGF0YSBzb3VyY2UpXG4gKiBAcmV0dXJucyBQcm9taXNlIHJlc29sdmluZyB0byBNYXBWaWV3IG9yIFNjZW5lVmlldywgb3IgbnVsbCBpZiBub3QgYXZhaWxhYmxlXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRNYXBWaWV3RnJvbURhdGFTb3VyY2UoXG4gIG91dHB1dERTOiBEYXRhU291cmNlIHwgbnVsbCB8IHVuZGVmaW5lZFxuKTogUHJvbWlzZTxfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXcgfCBudWxsPiB7XG4gIGNvbnN0IHNlcSA9ICsrb3BlcmF0aW9uU2VxdWVuY2VcbiAgaWYgKCFvdXRwdXREUykge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICBldmVudDogJ2dldE1hcFZpZXdGcm9tRGF0YVNvdXJjZS1uby1vdXRwdXREUycsXG4gICAgICBzZXEsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICB0cnkge1xuICAgIC8vIEdldCBvcmlnaW4gZGF0YSBzb3VyY2UgdG8gYWNjZXNzIHRoZSBsYXllclxuICAgIGNvbnN0IG9yaWdpbkRhdGFTb3VyY2VzID0gb3V0cHV0RFMuZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKVxuICAgIGNvbnN0IG9yaWdpbkRTID0gb3JpZ2luRGF0YVNvdXJjZXM/LlswXSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gICAgXG4gICAgaWYgKCFvcmlnaW5EUykge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgICAgZXZlbnQ6ICdnZXRNYXBWaWV3RnJvbURhdGFTb3VyY2Utbm8tb3JpZ2luRFMnLFxuICAgICAgICBvdXRwdXREU0lkOiBvdXRwdXREUy5pZCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG5cbiAgICAvLyBBY2Nlc3MgdGhlIEZlYXR1cmVMYXllciBmcm9tIHRoZSBkYXRhIHNvdXJjZVxuICAgIGNvbnN0IGxheWVyID0gKG9yaWdpbkRTIGFzIGFueSkubGF5ZXIgfHwgKG9yaWdpbkRTIGFzIGFueSkuZ2V0TGF5ZXI/LigpXG4gICAgaWYgKCFsYXllcikge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgICAgZXZlbnQ6ICdnZXRNYXBWaWV3RnJvbURhdGFTb3VyY2Utbm8tbGF5ZXInLFxuICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG5cbiAgICAvLyBMb2cgbGF5ZXIgcHJvcGVydGllcyB0byB1bmRlcnN0YW5kIHN0cnVjdHVyZVxuICAgIGNvbnN0IGxheWVyS2V5cyA9IE9iamVjdC5rZXlzKGxheWVyKS5maWx0ZXIoa2V5ID0+IFxuICAgICAgIWtleS5zdGFydHNXaXRoKCdfJykgJiYgXG4gICAgICB0eXBlb2YgKGxheWVyIGFzIGFueSlba2V5XSAhPT0gJ2Z1bmN0aW9uJ1xuICAgICkuc2xpY2UoMCwgMjApIC8vIExpbWl0IHRvIGZpcnN0IDIwIHByb3BlcnRpZXNcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgZXZlbnQ6ICdnZXRNYXBWaWV3RnJvbURhdGFTb3VyY2UtbGF5ZXItaW5zcGVjdGlvbicsXG4gICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgIGxheWVySWQ6IGxheWVyLmlkLFxuICAgICAgbGF5ZXJUeXBlOiBsYXllci50eXBlIHx8ICd1bmtub3duJyxcbiAgICAgIGxheWVyS2V5czogbGF5ZXJLZXlzLFxuICAgICAgaGFzTGF5ZXJNYXA6ICEhKGxheWVyIGFzIGFueSkubWFwLFxuICAgICAgaGFzTGF5ZXJWaWV3OiAhIShsYXllciBhcyBhbnkpLnZpZXcsXG4gICAgICBoYXNMYXllclBhcmVudDogISEobGF5ZXIgYXMgYW55KS5wYXJlbnQsXG4gICAgICBsYXllck1hcFR5cGU6IChsYXllciBhcyBhbnkpLm1hcCA/IHR5cGVvZiAobGF5ZXIgYXMgYW55KS5tYXAgOiAnbm9uZScsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuXG4gICAgLy8gQ2hlY2sgbGF5ZXIucGFyZW50IGZvciBtYXAvdmlldyBhY2Nlc3MgKHNpbmNlIGhhc0xheWVyUGFyZW50IGlzIHRydWUpXG4gICAgY29uc3QgcGFyZW50ID0gKGxheWVyIGFzIGFueSkucGFyZW50XG4gICAgaWYgKHBhcmVudCkge1xuICAgICAgLy8gTG9nIHBhcmVudCBwcm9wZXJ0aWVzXG4gICAgICBjb25zdCBwYXJlbnRLZXlzID0gT2JqZWN0LmtleXMocGFyZW50KS5maWx0ZXIoa2V5ID0+IFxuICAgICAgICAha2V5LnN0YXJ0c1dpdGgoJ18nKSAmJiBcbiAgICAgICAgdHlwZW9mIChwYXJlbnQgYXMgYW55KVtrZXldICE9PSAnZnVuY3Rpb24nXG4gICAgICApLnNsaWNlKDAsIDIwKVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgICBldmVudDogJ2dldE1hcFZpZXdGcm9tRGF0YVNvdXJjZS1sYXllci1wYXJlbnQtaW5zcGVjdGlvbicsXG4gICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICBsYXllcklkOiBsYXllci5pZCxcbiAgICAgICAgcGFyZW50VHlwZTogcGFyZW50LnR5cGUgfHwgJ3Vua25vd24nLFxuICAgICAgICBwYXJlbnRLZXlzOiBwYXJlbnRLZXlzLFxuICAgICAgICBoYXNQYXJlbnRNYXA6ICEhKHBhcmVudCBhcyBhbnkpLm1hcCxcbiAgICAgICAgaGFzUGFyZW50VmlldzogISEocGFyZW50IGFzIGFueSkudmlldyxcbiAgICAgICAgaGFzUGFyZW50Vmlld3M6ICEhKHBhcmVudCBhcyBhbnkpLnZpZXdzLFxuICAgICAgICBwYXJlbnRWaWV3c0xlbmd0aDogKHBhcmVudCBhcyBhbnkpLnZpZXdzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgaGFzUGFyZW50RXh0ZW50OiAhIShwYXJlbnQgYXMgYW55KS5leHRlbnQsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgLy8gVHJ5IHRvIGdldCB2aWV3IGZyb20gcGFyZW50XG4gICAgICBpZiAoKHBhcmVudCBhcyBhbnkpLnZpZXcpIHtcbiAgICAgICAgY29uc3QgdmlldyA9IChwYXJlbnQgYXMgYW55KS52aWV3IGFzIF9fZXNyaS5NYXBWaWV3IHwgX19lc3JpLlNjZW5lVmlld1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgICAgIGV2ZW50OiAnZ2V0TWFwVmlld0Zyb21EYXRhU291cmNlLXN1Y2Nlc3MtdmlhLWxheWVyLXBhcmVudC12aWV3JyxcbiAgICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgICBsYXllcklkOiBsYXllci5pZCxcbiAgICAgICAgICB2aWV3VHlwZTogdmlldy50eXBlIHx8ICd1bmtub3duJyxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIHZpZXdcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gVHJ5IHRvIGdldCBtYXAgZnJvbSBwYXJlbnQgYW5kIHRoZW4gdmlld1xuICAgICAgY29uc3QgcGFyZW50TWFwID0gKHBhcmVudCBhcyBhbnkpLm1hcFxuICAgICAgaWYgKHBhcmVudE1hcCkge1xuICAgICAgICBjb25zdCB2aWV3ID0gcGFyZW50TWFwLnZpZXcgfHwgXG4gICAgICAgICAgICAgICAgICAgICAocGFyZW50TWFwLnZpZXdzPy5nZXRJdGVtQXQ/LigwKSkgfHxcbiAgICAgICAgICAgICAgICAgICAgIChwYXJlbnRNYXAudmlld3M/Lmxlbmd0aCA+IDAgPyBwYXJlbnRNYXAudmlld3NbMF0gOiBudWxsKVxuICAgICAgICBpZiAodmlldykge1xuICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICAgICAgICBldmVudDogJ2dldE1hcFZpZXdGcm9tRGF0YVNvdXJjZS1zdWNjZXNzLXZpYS1sYXllci1wYXJlbnQtbWFwJyxcbiAgICAgICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICAgICAgbGF5ZXJJZDogbGF5ZXIuaWQsXG4gICAgICAgICAgICB2aWV3VHlwZTogdmlldy50eXBlIHx8ICd1bmtub3duJyxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgIH0pXG4gICAgICAgICAgcmV0dXJuIHZpZXcgYXMgX19lc3JpLk1hcFZpZXcgfCBfX2VzcmkuU2NlbmVWaWV3XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gUGFyZW50IG1pZ2h0IEJFIHRoZSB2aWV3IChjaGVjayBpZiBpdCBoYXMgdmlldy1saWtlIHByb3BlcnRpZXMpXG4gICAgICBpZiAocGFyZW50LnR5cGUgPT09ICdtYXAnIHx8IHBhcmVudC50eXBlID09PSAnc2NlbmUnIHx8IChwYXJlbnQgYXMgYW55KS5leHRlbnQpIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgICAgICBldmVudDogJ2dldE1hcFZpZXdGcm9tRGF0YVNvdXJjZS1zdWNjZXNzLXZpYS1sYXllci1wYXJlbnQtaXMtdmlldycsXG4gICAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgICAgbGF5ZXJJZDogbGF5ZXIuaWQsXG4gICAgICAgICAgdmlld1R5cGU6IHBhcmVudC50eXBlIHx8ICd1bmtub3duJyxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIHBhcmVudCBhcyBfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXdcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBUcnkgbXVsdGlwbGUgYXBwcm9hY2hlcyB0byBnZXQgdGhlIHZpZXc6XG4gICAgLy8gMS4gTGF5ZXIgbWlnaHQgaGF2ZSBhIGRpcmVjdCB2aWV3IHByb3BlcnR5XG4gICAgaWYgKChsYXllciBhcyBhbnkpLnZpZXcpIHtcbiAgICAgIGNvbnN0IHZpZXcgPSAobGF5ZXIgYXMgYW55KS52aWV3IGFzIF9fZXNyaS5NYXBWaWV3IHwgX19lc3JpLlNjZW5lVmlld1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgICAgZXZlbnQ6ICdnZXRNYXBWaWV3RnJvbURhdGFTb3VyY2Utc3VjY2Vzcy12aWEtbGF5ZXItdmlldycsXG4gICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICBsYXllcklkOiBsYXllci5pZCxcbiAgICAgICAgdmlld1R5cGU6IHZpZXcudHlwZSB8fCAndW5rbm93bicsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIHJldHVybiB2aWV3XG4gICAgfVxuXG4gICAgLy8gMi4gVHJ5IHRvIGdldCBtYXAgZnJvbSBsYXllciBhbmQgdGhlbiB2aWV3IGZyb20gbWFwXG4gICAgY29uc3QgbWFwID0gKGxheWVyIGFzIGFueSkubWFwIHx8IFxuICAgICAgICAgICAgICAgIChsYXllciBhcyBhbnkpLnBhcmVudD8ubWFwIHx8XG4gICAgICAgICAgICAgICAgKGxheWVyIGFzIGFueSkuX19tYXAgfHxcbiAgICAgICAgICAgICAgICAobGF5ZXIgYXMgYW55KS5fbWFwXG4gICAgXG4gICAgaWYgKG1hcCkge1xuICAgICAgLy8gTG9nIG1hcCBwcm9wZXJ0aWVzXG4gICAgICBjb25zdCBtYXBLZXlzID0gT2JqZWN0LmtleXMobWFwKS5maWx0ZXIoa2V5ID0+IFxuICAgICAgICAha2V5LnN0YXJ0c1dpdGgoJ18nKSAmJiBcbiAgICAgICAgdHlwZW9mIChtYXAgYXMgYW55KVtrZXldICE9PSAnZnVuY3Rpb24nXG4gICAgICApLnNsaWNlKDAsIDIwKVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgICBldmVudDogJ2dldE1hcFZpZXdGcm9tRGF0YVNvdXJjZS1tYXAtZm91bmQnLFxuICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgbGF5ZXJJZDogbGF5ZXIuaWQsXG4gICAgICAgIG1hcElkOiBtYXAuaWQgfHwgJ3Vua25vd24nLFxuICAgICAgICBtYXBLZXlzOiBtYXBLZXlzLFxuICAgICAgICBoYXNNYXBWaWV3OiAhIW1hcC52aWV3LFxuICAgICAgICBoYXNNYXBWaWV3czogISEobWFwLnZpZXdzKSxcbiAgICAgICAgbWFwVmlld3NMZW5ndGg6IG1hcC52aWV3cz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgY29uc3QgdmlldyA9IG1hcC52aWV3IHx8IFxuICAgICAgICAgICAgICAgICAgIChtYXAudmlld3M/LmdldEl0ZW1BdD8uKDApKSB8fFxuICAgICAgICAgICAgICAgICAgIChtYXAudmlld3M/Lmxlbmd0aCA+IDAgPyBtYXAudmlld3NbMF0gOiBudWxsKSB8fFxuICAgICAgICAgICAgICAgICAgIChtYXAudmlld3MgJiYgbWFwLnZpZXdzLmxlbmd0aCA+IDAgPyBtYXAudmlld3MuZ2V0SXRlbUF0KDApIDogbnVsbClcbiAgICAgIFxuICAgICAgaWYgKHZpZXcpIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgICAgICBldmVudDogJ2dldE1hcFZpZXdGcm9tRGF0YVNvdXJjZS1zdWNjZXNzLXZpYS1sYXllci1tYXAnLFxuICAgICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICAgIGxheWVySWQ6IGxheWVyLmlkLFxuICAgICAgICAgIHZpZXdUeXBlOiB2aWV3LnR5cGUgfHwgJ3Vua25vd24nLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gdmlldyBhcyBfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXdcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyAzLiBUcnkgdG8gZ2V0IHJvb3QgZGF0YSBzb3VyY2UgYW5kIGFjY2VzcyBtYXAgZnJvbSB0aGVyZVxuICAgIGNvbnN0IHJvb3REUyA9IG9yaWdpbkRTLmdldFJvb3REYXRhU291cmNlKClcbiAgICBpZiAocm9vdERTKSB7XG4gICAgICBjb25zdCByb290TWFwID0gKHJvb3REUyBhcyBhbnkpLmdldE1hcD8uKCkgfHwgXG4gICAgICAgICAgICAgICAgICAgICAgKHJvb3REUyBhcyBhbnkpLm1hcCB8fFxuICAgICAgICAgICAgICAgICAgICAgIChyb290RFMgYXMgYW55KS5fX21hcCB8fFxuICAgICAgICAgICAgICAgICAgICAgIChyb290RFMgYXMgYW55KS5fbWFwXG4gICAgICBcbiAgICAgIGlmIChyb290TWFwKSB7XG4gICAgICAgIC8vIExvZyByb290IG1hcCBwcm9wZXJ0aWVzXG4gICAgICAgIGNvbnN0IHJvb3RNYXBLZXlzID0gT2JqZWN0LmtleXMocm9vdE1hcCkuZmlsdGVyKGtleSA9PiBcbiAgICAgICAgICAha2V5LnN0YXJ0c1dpdGgoJ18nKSAmJiBcbiAgICAgICAgICB0eXBlb2YgKHJvb3RNYXAgYXMgYW55KVtrZXldICE9PSAnZnVuY3Rpb24nXG4gICAgICAgICkuc2xpY2UoMCwgMjApXG4gICAgICAgIFxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgICAgIGV2ZW50OiAnZ2V0TWFwVmlld0Zyb21EYXRhU291cmNlLXJvb3QtbWFwLWZvdW5kJyxcbiAgICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgICByb290RFNJZDogcm9vdERTLmlkLFxuICAgICAgICAgIHJvb3REU1R5cGU6IHJvb3REUy50eXBlLFxuICAgICAgICAgIHJvb3RNYXBJZDogcm9vdE1hcC5pZCB8fCAndW5rbm93bicsXG4gICAgICAgICAgcm9vdE1hcEtleXM6IHJvb3RNYXBLZXlzLFxuICAgICAgICAgIGhhc1Jvb3RNYXBWaWV3OiAhIXJvb3RNYXAudmlldyxcbiAgICAgICAgICBoYXNSb290TWFwVmlld3M6ICEhKHJvb3RNYXAudmlld3MpLFxuICAgICAgICAgIHJvb3RNYXBWaWV3c0xlbmd0aDogcm9vdE1hcC52aWV3cz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgICAgICBjb25zdCB2aWV3ID0gcm9vdE1hcC52aWV3IHx8IFxuICAgICAgICAgICAgICAgICAgICAgKHJvb3RNYXAudmlld3M/LmdldEl0ZW1BdD8uKDApKSB8fFxuICAgICAgICAgICAgICAgICAgICAgKHJvb3RNYXAudmlld3M/Lmxlbmd0aCA+IDAgPyByb290TWFwLnZpZXdzWzBdIDogbnVsbCkgfHxcbiAgICAgICAgICAgICAgICAgICAgIChyb290TWFwLnZpZXdzICYmIHJvb3RNYXAudmlld3MubGVuZ3RoID4gMCA/IHJvb3RNYXAudmlld3MuZ2V0SXRlbUF0KDApIDogbnVsbClcbiAgICAgICAgXG4gICAgICAgIGlmICh2aWV3KSB7XG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgICAgICAgIGV2ZW50OiAnZ2V0TWFwVmlld0Zyb21EYXRhU291cmNlLXN1Y2Nlc3MtdmlhLXJvb3REUycsXG4gICAgICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgICAgIHJvb3REU0lkOiByb290RFMuaWQsXG4gICAgICAgICAgICB2aWV3VHlwZTogdmlldy50eXBlIHx8ICd1bmtub3duJyxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgIH0pXG4gICAgICAgICAgcmV0dXJuIHZpZXcgYXMgX19lc3JpLk1hcFZpZXcgfCBfX2VzcmkuU2NlbmVWaWV3XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIExvZyByb290IERTIHByb3BlcnRpZXMgdG8gc2VlIHdoYXQncyBhdmFpbGFibGVcbiAgICAgICAgY29uc3Qgcm9vdERTS2V5cyA9IE9iamVjdC5rZXlzKHJvb3REUykuZmlsdGVyKGtleSA9PiBcbiAgICAgICAgICAha2V5LnN0YXJ0c1dpdGgoJ18nKSAmJiBcbiAgICAgICAgICB0eXBlb2YgKHJvb3REUyBhcyBhbnkpW2tleV0gIT09ICdmdW5jdGlvbidcbiAgICAgICAgKS5zbGljZSgwLCAyMClcbiAgICAgICAgXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICAgICAgZXZlbnQ6ICdnZXRNYXBWaWV3RnJvbURhdGFTb3VyY2Utcm9vdC1kcy1pbnNwZWN0aW9uJyxcbiAgICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgICByb290RFNJZDogcm9vdERTLmlkLFxuICAgICAgICAgIHJvb3REU1R5cGU6IHJvb3REUy50eXBlLFxuICAgICAgICAgIHJvb3REU0tleXM6IHJvb3REU0tleXMsXG4gICAgICAgICAgaGFzR2V0TWFwOiB0eXBlb2YgKHJvb3REUyBhcyBhbnkpLmdldE1hcCA9PT0gJ2Z1bmN0aW9uJyxcbiAgICAgICAgICBoYXNNYXA6ICEhKHJvb3REUyBhcyBhbnkpLm1hcCxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgZXZlbnQ6ICdnZXRNYXBWaWV3RnJvbURhdGFTb3VyY2Utbm8tdmlldycsXG4gICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgIGxheWVySWQ6IGxheWVyLmlkLFxuICAgICAgaGFzTGF5ZXJNYXA6ICEhbWFwLFxuICAgICAgaGFzUm9vdERTOiAhIXJvb3REUyxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgcmV0dXJuIG51bGxcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgZXZlbnQ6ICdnZXRNYXBWaWV3RnJvbURhdGFTb3VyY2UtZXJyb3InLFxuICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSxcbiAgICAgIGVycm9yU3RhY2s6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgcmV0dXJuIG51bGxcbiAgfVxufVxuXG4vKipcbiAqIEdldHMgdGhlIGRlZmF1bHQgaGlnaGxpZ2h0IHN5bWJvbCBiYXNlZCBvbiBnZW9tZXRyeSB0eXBlLlxuICogVXNlcyB0aGUgbWFwJ3MgYWN0dWFsIGhpZ2hsaWdodCBjb2xvciBmcm9tIGhpZ2hsaWdodE9wdGlvbnMgdG8gbWF0Y2ggc3RhbmRhcmQgc2VsZWN0aW9uIGFwcGVhcmFuY2UuXG4gKi9cbmZ1bmN0aW9uIGdldERlZmF1bHRIaWdobGlnaHRTeW1ib2woXG4gIGdlb21ldHJ5VHlwZTogc3RyaW5nLFxuICBtYXBWaWV3OiBfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXdcbik6IF9fZXNyaS5TeW1ib2wge1xuICAvLyBHZXQgZGVmYXVsdCBoaWdobGlnaHQgY29sb3IgZnJvbSB2aWV3J3MgaGlnaGxpZ2h0T3B0aW9uc1xuICBjb25zdCBoaWdobGlnaHRPcHRpb25zID0gKG1hcFZpZXcuaGlnaGxpZ2h0T3B0aW9ucyB8fCB7fSkgYXMgX19lc3JpLkhpZ2hsaWdodE9wdGlvbnNcbiAgXG4gIC8vIEV4dHJhY3QgY29sb3IgLSBjb3VsZCBiZSBhcnJheSBbUixHLEIsQV0gb3IgQ29sb3Igb2JqZWN0XG4gIGxldCBoaWdobGlnaHRDb2xvcjogbnVtYmVyW10gfCBudWxsID0gbnVsbFxuICBcbiAgaWYgKGhpZ2hsaWdodE9wdGlvbnMuY29sb3IpIHtcbiAgICAvLyBJZiBpdCdzIGEgQ29sb3Igb2JqZWN0LCBjb252ZXJ0IHRvIGFycmF5XG4gICAgaWYgKHR5cGVvZiBoaWdobGlnaHRPcHRpb25zLmNvbG9yID09PSAnb2JqZWN0JyAmJiAndG9SZ2JhJyBpbiBoaWdobGlnaHRPcHRpb25zLmNvbG9yKSB7XG4gICAgICBoaWdobGlnaHRDb2xvciA9IChoaWdobGlnaHRPcHRpb25zLmNvbG9yIGFzIGFueSkudG9SZ2JhKClcbiAgICB9IFxuICAgIC8vIElmIGl0J3MgYWxyZWFkeSBhbiBhcnJheVxuICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoaGlnaGxpZ2h0T3B0aW9ucy5jb2xvcikpIHtcbiAgICAgIGhpZ2hsaWdodENvbG9yID0gaGlnaGxpZ2h0T3B0aW9ucy5jb2xvclxuICAgIH1cbiAgfVxuICBcbiAgLy8gSWYgbm8gY29sb3IgaW4gaGlnaGxpZ2h0T3B0aW9ucywgdXNlIHRoZSBBcmNHSVMgZG9jdW1lbnRlZCBkZWZhdWx0OiBjeWFuIFswLCAyNTUsIDI1NV1cbiAgaWYgKCFoaWdobGlnaHRDb2xvcikge1xuICAgIGhpZ2hsaWdodENvbG9yID0gWzAsIDI1NSwgMjU1LCAxLjBdIC8vIEZ1bGwgb3BhY2l0eSBkZWZhdWx0XG4gIH1cbiAgXG4gIC8vIEVuc3VyZSB3ZSBoYXZlIDQgZWxlbWVudHMgW1IsIEcsIEIsIEFdXG4gIGNvbnN0IGJhc2VDb2xvciA9IGhpZ2hsaWdodENvbG9yLnNsaWNlKDAsIDMpXG4gIGNvbnN0IGJhc2VBbHBoYSA9IGhpZ2hsaWdodENvbG9yLmxlbmd0aCA+PSA0ID8gaGlnaGxpZ2h0Q29sb3JbM10gOiAxLjBcbiAgXG4gIC8vIEdldCBmaWxsIG9wYWNpdHkgZnJvbSBoaWdobGlnaHRPcHRpb25zIG9yIHVzZSBkZWZhdWx0XG4gIGNvbnN0IGZpbGxPcGFjaXR5ID0gaGlnaGxpZ2h0T3B0aW9ucy5maWxsT3BhY2l0eSAhPT0gdW5kZWZpbmVkIFxuICAgID8gaGlnaGxpZ2h0T3B0aW9ucy5maWxsT3BhY2l0eSBcbiAgICA6IDAuMjUgLy8gRGVmYXVsdCAyNSUgb3BhY2l0eSBmb3IgZmlsbFxuICBjb25zdCBmaWxsQ29sb3IgPSBbLi4uYmFzZUNvbG9yLCBmaWxsT3BhY2l0eV1cbiAgXG4gIC8vIEdldCBoYWxvIG9wYWNpdHkgb3IgdXNlIGRlZmF1bHQgLSBmb3Igb3V0bGluZXMgYW5kIGxpbmVzXG4gIGNvbnN0IGhhbG9PcGFjaXR5ID0gaGlnaGxpZ2h0T3B0aW9ucy5oYWxvT3BhY2l0eSAhPT0gdW5kZWZpbmVkXG4gICAgPyBoaWdobGlnaHRPcHRpb25zLmhhbG9PcGFjaXR5XG4gICAgOiBiYXNlQWxwaGEgLy8gVXNlIHRoZSBjb2xvcidzIGFscGhhIGlmIGF2YWlsYWJsZSwgb3RoZXJ3aXNlIDEuMFxuICBjb25zdCBvdXRsaW5lQ29sb3IgPSBbLi4uYmFzZUNvbG9yLCBoYWxvT3BhY2l0eV1cbiAgXG4gIC8vIEZvciBsaW5lcywgdXNlIGZ1bGwgb3BhY2l0eSB0byBlbnN1cmUgdmlzaWJpbGl0eVxuICBjb25zdCBsaW5lT3BhY2l0eSA9IGhpZ2hsaWdodE9wdGlvbnMuaGFsb09wYWNpdHkgIT09IHVuZGVmaW5lZFxuICAgID8gTWF0aC5tYXgoaGlnaGxpZ2h0T3B0aW9ucy5oYWxvT3BhY2l0eSwgMC44KSAvLyBBdCBsZWFzdCA4MCUgb3BhY2l0eVxuICAgIDogYmFzZUFscGhhIC8vIFVzZSB0aGUgY29sb3IncyBhbHBoYSwgb3IgZGVmYXVsdCB0byAxLjBcbiAgY29uc3QgbGluZUNvbG9yID0gWy4uLmJhc2VDb2xvciwgbGluZU9wYWNpdHldXG4gIFxuICBzd2l0Y2ggKGdlb21ldHJ5VHlwZSkge1xuICAgIGNhc2UgJ3BvaW50JzpcbiAgICBjYXNlICdtdWx0aXBvaW50JzpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdzaW1wbGUtbWFya2VyJyxcbiAgICAgICAgY29sb3I6IG91dGxpbmVDb2xvcixcbiAgICAgICAgb3V0bGluZToge1xuICAgICAgICAgIGNvbG9yOiBvdXRsaW5lQ29sb3IsXG4gICAgICAgICAgd2lkdGg6IDJcbiAgICAgICAgfSxcbiAgICAgICAgc2l6ZTogMTJcbiAgICAgIH0gYXMgdW5rbm93biBhcyBfX2VzcmkuU2ltcGxlTWFya2VyU3ltYm9sXG4gICAgICBcbiAgICBjYXNlICdwb2x5bGluZSc6XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnc2ltcGxlLWxpbmUnLFxuICAgICAgICBjb2xvcjogbGluZUNvbG9yLCAvLyBVc2UgbGluZUNvbG9yIHdpdGggcHJvcGVyIG9wYWNpdHlcbiAgICAgICAgd2lkdGg6IDQgLy8gSW5jcmVhc2VkIHdpZHRoIGZvciB2aXNpYmlsaXR5XG4gICAgICB9IGFzIHVua25vd24gYXMgX19lc3JpLlNpbXBsZUxpbmVTeW1ib2xcbiAgICAgIFxuICAgIGNhc2UgJ3BvbHlnb24nOlxuICAgIGNhc2UgJ211bHRpcG9seWdvbic6XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnc2ltcGxlLWZpbGwnLFxuICAgICAgICBjb2xvcjogZmlsbENvbG9yLFxuICAgICAgICBvdXRsaW5lOiB7XG4gICAgICAgICAgY29sb3I6IG91dGxpbmVDb2xvcixcbiAgICAgICAgICB3aWR0aDogMlxuICAgICAgICB9XG4gICAgICB9IGFzIHVua25vd24gYXMgX19lc3JpLlNpbXBsZUZpbGxTeW1ib2xcbiAgICAgIFxuICAgIGRlZmF1bHQ6XG4gICAgICAvLyBGYWxsYmFjayB0byBwb2x5Z29uIHN5bWJvbFxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ3NpbXBsZS1maWxsJyxcbiAgICAgICAgY29sb3I6IGZpbGxDb2xvcixcbiAgICAgICAgb3V0bGluZToge1xuICAgICAgICAgIGNvbG9yOiBvdXRsaW5lQ29sb3IsXG4gICAgICAgICAgd2lkdGg6IDJcbiAgICAgICAgfVxuICAgICAgfSBhcyB1bmtub3duIGFzIF9fZXNyaS5TaW1wbGVGaWxsU3ltYm9sXG4gIH1cbn1cblxuLyoqXG4gKiBDcmVhdGVzIG9yIGdldHMgYW4gZXhpc3RpbmcgZ3JhcGhpY3MgbGF5ZXIgZm9yIHRoZSB3aWRnZXQuXG4gKiBVc2VzIGEgdW5pcXVlIElEIGJhc2VkIG9uIHdpZGdldCBJRCB0byBlbnN1cmUgb25lIGxheWVyIHBlciB3aWRnZXQuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVPckdldEdyYXBoaWNzTGF5ZXIoXG4gIHdpZGdldElkOiBzdHJpbmcsXG4gIG1hcFZpZXc6IF9fZXNyaS5NYXBWaWV3IHwgX19lc3JpLlNjZW5lVmlld1xuKTogUHJvbWlzZTxfX2VzcmkuR3JhcGhpY3NMYXllciB8IG51bGw+IHtcbiAgY29uc3Qgc2VxID0gKytvcGVyYXRpb25TZXF1ZW5jZVxuICBjb25zdCBsYXllcklkID0gYHF1ZXJ5c2ltcGxlLWhpZ2hsaWdodC0ke3dpZGdldElkfWBcbiAgXG4gIHRyeSB7XG4gICAgLy8gQ2hlY2sgaWYgbGF5ZXIgYWxyZWFkeSBleGlzdHNcbiAgICBjb25zdCBleGlzdGluZ0xheWVyID0gbWFwVmlldy5tYXAubGF5ZXJzLmZpbmQobGF5ZXIgPT4gbGF5ZXIuaWQgPT09IGxheWVySWQpIGFzIF9fZXNyaS5HcmFwaGljc0xheWVyXG4gICAgaWYgKGV4aXN0aW5nTGF5ZXIpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICAgIGV2ZW50OiAnY3JlYXRlT3JHZXRHcmFwaGljc0xheWVyLWZvdW5kLWV4aXN0aW5nJyxcbiAgICAgICAgc2VxLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgbGF5ZXJJZCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgcmV0dXJuIGV4aXN0aW5nTGF5ZXJcbiAgICB9XG5cbiAgICAvLyBMb2FkIEdyYXBoaWNzTGF5ZXIgbW9kdWxlXG4gICAgY29uc3QgW0dyYXBoaWNzTGF5ZXJdID0gYXdhaXQgbG9hZEFyY0dJU0pTQVBJTW9kdWxlcyhbJ2VzcmkvbGF5ZXJzL0dyYXBoaWNzTGF5ZXInXSlcbiAgICBcbiAgICAvLyBDcmVhdGUgbmV3IGdyYXBoaWNzIGxheWVyXG4gICAgY29uc3QgZ3JhcGhpY3NMYXllciA9IG5ldyBHcmFwaGljc0xheWVyKHtcbiAgICAgIGlkOiBsYXllcklkLFxuICAgICAgdGl0bGU6IGBRdWVyeVNpbXBsZSBIaWdobGlnaHRzICgke3dpZGdldElkfSlgLFxuICAgICAgbGlzdE1vZGU6ICdoaWRlJywgLy8gSGlkZSBmcm9tIGxheWVyIGxpc3RcbiAgICAgIHZpc2libGU6IHRydWVcbiAgICB9KVxuICAgIFxuICAgIC8vIEFkZCB0byBtYXBcbiAgICBtYXBWaWV3Lm1hcC5hZGQoZ3JhcGhpY3NMYXllcilcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgZXZlbnQ6ICdjcmVhdGVPckdldEdyYXBoaWNzTGF5ZXItY3JlYXRlZCcsXG4gICAgICBzZXEsXG4gICAgICB3aWRnZXRJZCxcbiAgICAgIGxheWVySWQsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIHJldHVybiBncmFwaGljc0xheWVyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgIGV2ZW50OiAnY3JlYXRlT3JHZXRHcmFwaGljc0xheWVyLWVycm9yJyxcbiAgICAgIHNlcSxcbiAgICAgIHdpZGdldElkLFxuICAgICAgbGF5ZXJJZCxcbiAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvciksXG4gICAgICBlcnJvclN0YWNrOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWQsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIHJldHVybiBudWxsXG4gIH1cbn1cblxuLyoqXG4gKiBBZGRzIGhpZ2hsaWdodCBncmFwaGljcyB0byB0aGUgZ3JhcGhpY3MgbGF5ZXIgdXNpbmcgZGVmYXVsdCBtYXAgaGlnaGxpZ2h0IGNvbG9yLlxuICogTm90ZTogVGhpcyBmdW5jdGlvbiBzaG91bGQgYmUgY2FsbGVkIGFmdGVyIEdyYXBoaWNzTGF5ZXIgbW9kdWxlIGlzIGxvYWRlZC5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGFkZEhpZ2hsaWdodEdyYXBoaWNzKFxuICBncmFwaGljc0xheWVyOiBfX2VzcmkuR3JhcGhpY3NMYXllcixcbiAgcmVjb3JkczogRmVhdHVyZURhdGFSZWNvcmRbXSxcbiAgbWFwVmlldzogX19lc3JpLk1hcFZpZXcgfCBfX2VzcmkuU2NlbmVWaWV3XG4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgY29uc3Qgc2VxID0gKytvcGVyYXRpb25TZXF1ZW5jZVxuICBpZiAoIWdyYXBoaWNzTGF5ZXIgfHwgIXJlY29yZHMgfHwgcmVjb3Jkcy5sZW5ndGggPT09IDApIHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgZXZlbnQ6ICdhZGRIaWdobGlnaHRHcmFwaGljcy1za2lwcGVkJyxcbiAgICAgIHNlcSxcbiAgICAgIHJlYXNvbjogIWdyYXBoaWNzTGF5ZXIgPyAnbm8tZ3JhcGhpY3MtbGF5ZXInIDogJ25vLXJlY29yZHMnLFxuICAgICAgcmVjb3Jkc0NvdW50OiByZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgcmV0dXJuXG4gIH1cblxuICAvLyBMb2cgZXhpc3Rpbmcgc3RhdGUgQkVGT1JFIGFkZGluZyAtIHZlcmlmeSBhc3N1bXB0aW9uIGFib3V0IGR1cGxpY2F0ZXNcbiAgY29uc3QgZXhpc3RpbmdHcmFwaGljc0NvdW50ID0gZ3JhcGhpY3NMYXllci5ncmFwaGljcy5sZW5ndGhcbiAgY29uc3QgZXhpc3RpbmdSZWNvcmRJZHM6IHN0cmluZ1tdID0gW11cbiAgY29uc3QgZXhpc3RpbmdSZWNvcmRJZFNldCA9IG5ldyBTZXQ8c3RyaW5nPigpXG4gIFxuICBncmFwaGljc0xheWVyLmdyYXBoaWNzLmZvckVhY2goZ3JhcGhpYyA9PiB7XG4gICAgY29uc3QgcmVjb3JkSWQgPSBncmFwaGljLmF0dHJpYnV0ZXM/LnJlY29yZElkXG4gICAgaWYgKHJlY29yZElkKSB7XG4gICAgICBleGlzdGluZ1JlY29yZElkcy5wdXNoKHJlY29yZElkKVxuICAgICAgZXhpc3RpbmdSZWNvcmRJZFNldC5hZGQocmVjb3JkSWQpXG4gICAgfVxuICB9KVxuXG4gIC8vIExvZyB3aGF0IHdlJ3JlIHRyeWluZyB0byBhZGRcbiAgY29uc3QgaW5jb21pbmdSZWNvcmRJZHMgPSByZWNvcmRzLm1hcChyID0+IHIuZ2V0SWQoKSlcblxuICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgIGV2ZW50OiAnYWRkSGlnaGxpZ2h0R3JhcGhpY3MtYmVmb3JlLWFkZCcsXG4gICAgc2VxLFxuICAgIGdyYXBoaWNzTGF5ZXJJZDogZ3JhcGhpY3NMYXllci5pZCxcbiAgICBleGlzdGluZ0dyYXBoaWNzQ291bnQsXG4gICAgZXhpc3RpbmdSZWNvcmRJZHM6IGV4aXN0aW5nUmVjb3JkSWRzLnNsaWNlKDAsIDIwKSwgLy8gTGltaXQgdG8gZmlyc3QgMjAgZm9yIHJlYWRhYmlsaXR5XG4gICAgZXhpc3RpbmdSZWNvcmRJZHNDb3VudDogZXhpc3RpbmdSZWNvcmRJZHMubGVuZ3RoLFxuICAgIGluY29taW5nUmVjb3JkSWRzOiBpbmNvbWluZ1JlY29yZElkcy5zbGljZSgwLCAyMCksIC8vIExpbWl0IHRvIGZpcnN0IDIwXG4gICAgaW5jb21pbmdSZWNvcmRJZHNDb3VudDogaW5jb21pbmdSZWNvcmRJZHMubGVuZ3RoLFxuICAgIGR1cGxpY2F0ZVJlY29yZElkczogaW5jb21pbmdSZWNvcmRJZHMuZmlsdGVyKGlkID0+IGV4aXN0aW5nUmVjb3JkSWRTZXQuaGFzKGlkKSkuc2xpY2UoMCwgMjApLFxuICAgIGR1cGxpY2F0ZUNvdW50OiBpbmNvbWluZ1JlY29yZElkcy5maWx0ZXIoaWQgPT4gZXhpc3RpbmdSZWNvcmRJZFNldC5oYXMoaWQpKS5sZW5ndGgsXG4gICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gIH0pXG5cbiAgLy8gTG9hZCBHcmFwaGljIG1vZHVsZVxuICBjb25zdCBbR3JhcGhpY10gPSBhd2FpdCBsb2FkQXJjR0lTSlNBUElNb2R1bGVzKFsnZXNyaS9HcmFwaGljJ10pXG5cbiAgbGV0IGFkZGVkQ291bnQgPSAwXG4gIGxldCBza2lwcGVkQ291bnQgPSAwXG4gIGxldCBkdXBsaWNhdGVDb3VudCA9IDBcbiAgY29uc3QgYWRkZWRSZWNvcmRJZHM6IHN0cmluZ1tdID0gW11cbiAgY29uc3Qgc2tpcHBlZFJlY29yZElkczogc3RyaW5nW10gPSBbXVxuICBjb25zdCBkdXBsaWNhdGVSZWNvcmRJZHM6IHN0cmluZ1tdID0gW11cblxuICByZWNvcmRzLmZvckVhY2gocmVjb3JkID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVjb3JkSWQgPSByZWNvcmQuZ2V0SWQoKVxuICAgICAgXG4gICAgICAvLyBDaGVjayBpZiB0aGlzIHJlY29yZCBJRCBhbHJlYWR5IGV4aXN0cyBpbiBncmFwaGljcyBsYXllclxuICAgICAgaWYgKGV4aXN0aW5nUmVjb3JkSWRTZXQuaGFzKHJlY29yZElkKSkge1xuICAgICAgICBkdXBsaWNhdGVDb3VudCsrXG4gICAgICAgIGR1cGxpY2F0ZVJlY29yZElkcy5wdXNoKHJlY29yZElkKVxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgICAgIGV2ZW50OiAnYWRkSGlnaGxpZ2h0R3JhcGhpY3MtZHVwbGljYXRlLWRldGVjdGVkJyxcbiAgICAgICAgICBzZXEsXG4gICAgICAgICAgcmVjb3JkSWQsXG4gICAgICAgICAgZ3JhcGhpY3NMYXllcklkOiBncmFwaGljc0xheWVyLmlkLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gLy8gU2tpcCBhZGRpbmcgZHVwbGljYXRlXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGdyYXBoaWMgPSByZWNvcmQuZmVhdHVyZSBhcyBfX2VzcmkuR3JhcGhpY1xuICAgICAgaWYgKCFncmFwaGljIHx8ICFncmFwaGljLmdlb21ldHJ5KSB7XG4gICAgICAgIHNraXBwZWRDb3VudCsrXG4gICAgICAgIHNraXBwZWRSZWNvcmRJZHMucHVzaChyZWNvcmRJZClcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIC8vIEdldCBnZW9tZXRyeSB0eXBlIGZyb20gZ3JhcGhpY1xuICAgICAgY29uc3QgZ2VvbWV0cnlUeXBlID0gZ3JhcGhpYy5nZW9tZXRyeS50eXBlXG5cbiAgICAgIC8vIENyZWF0ZSBzeW1ib2wgdXNpbmcgZGVmYXVsdCBoaWdobGlnaHQgY29sb3JcbiAgICAgIGNvbnN0IHN5bWJvbCA9IGdldERlZmF1bHRIaWdobGlnaHRTeW1ib2woZ2VvbWV0cnlUeXBlLCBtYXBWaWV3KVxuXG4gICAgICAvLyBDcmVhdGUgbmV3IGdyYXBoaWMgd2l0aCBoaWdobGlnaHQgc3ltYm9sXG4gICAgICBjb25zdCBoaWdobGlnaHRHcmFwaGljID0gbmV3IEdyYXBoaWMoe1xuICAgICAgICBnZW9tZXRyeTogZ3JhcGhpYy5nZW9tZXRyeSxcbiAgICAgICAgc3ltYm9sOiBzeW1ib2wsXG4gICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICByZWNvcmRJZDogcmVjb3JkSWQsXG4gICAgICAgICAgc291cmNlOiAncXVlcnlzaW1wbGUtaGlnaGxpZ2h0JyxcbiAgICAgICAgICB3aWRnZXRJZDogZ3JhcGhpY3NMYXllci5pZC5yZXBsYWNlKCdxdWVyeXNpbXBsZS1oaWdobGlnaHQtJywgJycpXG4gICAgICAgIH1cbiAgICAgIH0pXG5cbiAgICAgIGdyYXBoaWNzTGF5ZXIuYWRkKGhpZ2hsaWdodEdyYXBoaWMpXG4gICAgICBhZGRlZENvdW50KytcbiAgICAgIGFkZGVkUmVjb3JkSWRzLnB1c2gocmVjb3JkSWQpXG4gICAgICBcbiAgICAgIC8vIEFkZCB0byB0cmFja2luZyBzZXQgdG8gcHJldmVudCBkdXBsaWNhdGVzIHdpdGhpbiB0aGlzIGJhdGNoXG4gICAgICBleGlzdGluZ1JlY29yZElkU2V0LmFkZChyZWNvcmRJZClcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgc2tpcHBlZENvdW50KytcbiAgICAgIHNraXBwZWRSZWNvcmRJZHMucHVzaChyZWNvcmQuZ2V0SWQoKSlcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICAgIGV2ZW50OiAnYWRkSGlnaGxpZ2h0R3JhcGhpY3MtcmVjb3JkLWVycm9yJyxcbiAgICAgICAgc2VxLFxuICAgICAgICByZWNvcmRJZDogcmVjb3JkLmdldElkKCksXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvciksXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICB9XG4gIH0pXG5cbiAgLy8gTG9nIGZpbmFsIHN0YXRlIEFGVEVSIGFkZGluZ1xuICBjb25zdCBmaW5hbEdyYXBoaWNzQ291bnQgPSBncmFwaGljc0xheWVyLmdyYXBoaWNzLmxlbmd0aFxuICBjb25zdCBmaW5hbFJlY29yZElkczogc3RyaW5nW10gPSBbXVxuICBncmFwaGljc0xheWVyLmdyYXBoaWNzLmZvckVhY2goZ3JhcGhpYyA9PiB7XG4gICAgY29uc3QgcmVjb3JkSWQgPSBncmFwaGljLmF0dHJpYnV0ZXM/LnJlY29yZElkXG4gICAgaWYgKHJlY29yZElkKSB7XG4gICAgICBmaW5hbFJlY29yZElkcy5wdXNoKHJlY29yZElkKVxuICAgIH1cbiAgfSlcblxuICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgIGV2ZW50OiAnYWRkSGlnaGxpZ2h0R3JhcGhpY3MtY29tcGxldGUnLFxuICAgIHNlcSxcbiAgICBncmFwaGljc0xheWVySWQ6IGdyYXBoaWNzTGF5ZXIuaWQsXG4gICAgcmVjb3Jkc0NvdW50OiByZWNvcmRzLmxlbmd0aCxcbiAgICBhZGRlZENvdW50LFxuICAgIHNraXBwZWRDb3VudCxcbiAgICBkdXBsaWNhdGVDb3VudCxcbiAgICBhZGRlZFJlY29yZElkczogYWRkZWRSZWNvcmRJZHMuc2xpY2UoMCwgMjApLCAvLyBMaW1pdCB0byBmaXJzdCAyMFxuICAgIHNraXBwZWRSZWNvcmRJZHM6IHNraXBwZWRSZWNvcmRJZHMuc2xpY2UoMCwgMjApLFxuICAgIGR1cGxpY2F0ZVJlY29yZElkczogZHVwbGljYXRlUmVjb3JkSWRzLnNsaWNlKDAsIDIwKSxcbiAgICBleGlzdGluZ0dyYXBoaWNzQ291bnQsXG4gICAgZmluYWxHcmFwaGljc0NvdW50LFxuICAgIGV4cGVjdGVkRmluYWxDb3VudDogZXhpc3RpbmdHcmFwaGljc0NvdW50ICsgYWRkZWRDb3VudCxcbiAgICBmaW5hbFJlY29yZElkczogZmluYWxSZWNvcmRJZHMuc2xpY2UoMCwgMjApLCAvLyBMaW1pdCB0byBmaXJzdCAyMFxuICAgIGZpbmFsUmVjb3JkSWRzQ291bnQ6IGZpbmFsUmVjb3JkSWRzLmxlbmd0aCxcbiAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgfSlcbn1cblxuLyoqXG4gKiBSZW1vdmVzIGhpZ2hsaWdodCBncmFwaGljcyBmcm9tIHRoZSBncmFwaGljcyBsYXllciBieSByZWNvcmQgSURzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlSGlnaGxpZ2h0R3JhcGhpY3MoXG4gIGdyYXBoaWNzTGF5ZXI6IF9fZXNyaS5HcmFwaGljc0xheWVyLFxuICByZWNvcmRJZHM6IHN0cmluZ1tdXG4pOiB2b2lkIHtcbiAgY29uc3Qgc2VxID0gKytvcGVyYXRpb25TZXF1ZW5jZVxuICBpZiAoIWdyYXBoaWNzTGF5ZXIgfHwgIXJlY29yZElkcyB8fCByZWNvcmRJZHMubGVuZ3RoID09PSAwKSB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgIGV2ZW50OiAncmVtb3ZlSGlnaGxpZ2h0R3JhcGhpY3Mtc2tpcHBlZCcsXG4gICAgICBzZXEsXG4gICAgICByZWFzb246ICFncmFwaGljc0xheWVyID8gJ25vLWdyYXBoaWNzLWxheWVyJyA6ICduby1yZWNvcmQtaWRzJyxcbiAgICAgIHJlY29yZElkc0NvdW50OiByZWNvcmRJZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICByZXR1cm5cbiAgfVxuXG4gIGNvbnN0IHJlY29yZElkU2V0ID0gbmV3IFNldChyZWNvcmRJZHMpXG4gIGxldCByZW1vdmVkQ291bnQgPSAwXG5cbiAgLy8gRmluZCBhbmQgcmVtb3ZlIGdyYXBoaWNzIG1hdGNoaW5nIHJlY29yZCBJRHNcbiAgY29uc3QgZ3JhcGhpY3NUb1JlbW92ZTogX19lc3JpLkdyYXBoaWNbXSA9IFtdXG4gIGdyYXBoaWNzTGF5ZXIuZ3JhcGhpY3MuZm9yRWFjaChncmFwaGljID0+IHtcbiAgICBjb25zdCByZWNvcmRJZCA9IGdyYXBoaWMuYXR0cmlidXRlcz8ucmVjb3JkSWRcbiAgICBpZiAocmVjb3JkSWQgJiYgcmVjb3JkSWRTZXQuaGFzKHJlY29yZElkKSkge1xuICAgICAgZ3JhcGhpY3NUb1JlbW92ZS5wdXNoKGdyYXBoaWMpXG4gICAgfVxuICB9KVxuXG4gIGdyYXBoaWNzVG9SZW1vdmUuZm9yRWFjaChncmFwaGljID0+IHtcbiAgICBncmFwaGljc0xheWVyLnJlbW92ZShncmFwaGljKVxuICAgIHJlbW92ZWRDb3VudCsrXG4gIH0pXG5cbiAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICBldmVudDogJ3JlbW92ZUhpZ2hsaWdodEdyYXBoaWNzLWNvbXBsZXRlJyxcbiAgICBzZXEsXG4gICAgZ3JhcGhpY3NMYXllcklkOiBncmFwaGljc0xheWVyLmlkLFxuICAgIHJlY29yZElkc0NvdW50OiByZWNvcmRJZHMubGVuZ3RoLFxuICAgIHJlbW92ZWRDb3VudCxcbiAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgfSlcbn1cblxuLyoqXG4gKiBDbGVhcnMgYWxsIGhpZ2hsaWdodCBncmFwaGljcyBmcm9tIHRoZSBncmFwaGljcyBsYXllci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyR3JhcGhpY3NMYXllcihncmFwaGljc0xheWVyOiBfX2VzcmkuR3JhcGhpY3NMYXllcik6IHZvaWQge1xuICBjb25zdCBzZXEgPSArK29wZXJhdGlvblNlcXVlbmNlXG4gIGlmICghZ3JhcGhpY3NMYXllcikge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICBldmVudDogJ2NsZWFyR3JhcGhpY3NMYXllci1za2lwcGVkJyxcbiAgICAgIHNlcSxcbiAgICAgIHJlYXNvbjogJ25vLWdyYXBoaWNzLWxheWVyJyxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgcmV0dXJuXG4gIH1cblxuICBjb25zdCBncmFwaGljc0NvdW50ID0gZ3JhcGhpY3NMYXllci5ncmFwaGljcy5sZW5ndGhcbiAgZ3JhcGhpY3NMYXllci5yZW1vdmVBbGwoKVxuXG4gIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgZXZlbnQ6ICdjbGVhckdyYXBoaWNzTGF5ZXItY29tcGxldGUnLFxuICAgIHNlcSxcbiAgICBncmFwaGljc0xheWVySWQ6IGdyYXBoaWNzTGF5ZXIuaWQsXG4gICAgZ3JhcGhpY3NSZW1vdmVkOiBncmFwaGljc0NvdW50LFxuICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICB9KVxufVxuXG4vKipcbiAqIFJlbW92ZXMgdGhlIGdyYXBoaWNzIGxheWVyIGZyb20gdGhlIG1hcCBhbmQgY2xlYW5zIHVwIHJlZmVyZW5jZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbGVhbnVwR3JhcGhpY3NMYXllcihcbiAgd2lkZ2V0SWQ6IHN0cmluZyxcbiAgbWFwVmlldzogX19lc3JpLk1hcFZpZXcgfCBfX2VzcmkuU2NlbmVWaWV3XG4pOiB2b2lkIHtcbiAgY29uc3Qgc2VxID0gKytvcGVyYXRpb25TZXF1ZW5jZVxuICBjb25zdCBsYXllcklkID0gYHF1ZXJ5c2ltcGxlLWhpZ2hsaWdodC0ke3dpZGdldElkfWBcbiAgXG4gIHRyeSB7XG4gICAgY29uc3QgZ3JhcGhpY3NMYXllciA9IG1hcFZpZXcubWFwLmxheWVycy5maW5kKGxheWVyID0+IGxheWVyLmlkID09PSBsYXllcklkKSBhcyBfX2VzcmkuR3JhcGhpY3NMYXllclxuICAgIGlmIChncmFwaGljc0xheWVyKSB7XG4gICAgICAvLyBDbGVhciBhbGwgZ3JhcGhpY3MgZmlyc3RcbiAgICAgIGdyYXBoaWNzTGF5ZXIucmVtb3ZlQWxsKClcbiAgICAgIFxuICAgICAgLy8gUmVtb3ZlIGxheWVyIGZyb20gbWFwXG4gICAgICBtYXBWaWV3Lm1hcC5yZW1vdmUoZ3JhcGhpY3NMYXllcilcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgICAgZXZlbnQ6ICdjbGVhbnVwR3JhcGhpY3NMYXllci1jb21wbGV0ZScsXG4gICAgICAgIHNlcSxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIGxheWVySWQsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgICAgZXZlbnQ6ICdjbGVhbnVwR3JhcGhpY3NMYXllci1ub3QtZm91bmQnLFxuICAgICAgICBzZXEsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICBsYXllcklkLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICBldmVudDogJ2NsZWFudXBHcmFwaGljc0xheWVyLWVycm9yJyxcbiAgICAgIHNlcSxcbiAgICAgIHdpZGdldElkLFxuICAgICAgbGF5ZXJJZCxcbiAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvciksXG4gICAgICBlcnJvclN0YWNrOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWQsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICB9XG59XG5cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHsgUmVhY3QsIGpzeCwgdHlwZSBJbW11dGFibGVBcnJheSwgbW9kdWxlTG9hZGVyLCBob29rcyB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IENoZWNrYm94IH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB0eXBlIHsgSmltdU1hcFZpZXcgfSBmcm9tICdqaW11LWFyY2dpcydcbmltcG9ydCB0eXBlICogYXMgamltdU1hcCBmcm9tICdqaW11LXVpL2FkdmFuY2VkL21hcCdcbmltcG9ydCB7IENyZWF0ZVRvb2xUeXBlIH0gZnJvbSAnLi4vY29uZmlnJ1xuaW1wb3J0IHsgRW50aXR5U3RhdHVzVHlwZSwgU3RhdHVzSW5kaWNhdG9yIH0gZnJvbSAnd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24nXG5pbXBvcnQgZGVmYXVsdE1lc3NhZ2UgZnJvbSAnLi90cmFuc2xhdGlvbnMvZGVmYXVsdCdcbmV4cG9ydCBpbnRlcmZhY2UgSW50ZXJhY3RpdmVEcmF3UHJvcHMge1xuICBqaW11TWFwVmlldzogSmltdU1hcFZpZXdcbiAgd2lkZ2V0SWQ6IHN0cmluZ1xuICB0b29sVHlwZXM6IEltbXV0YWJsZUFycmF5PENyZWF0ZVRvb2xUeXBlPlxuICBvbkRyYXdFbmQ6IChncmFwaGljOiBfX2VzcmkuR3JhcGhpYywgZ2V0TGF5ZXJGdW4/LCBjbGVhckFmdGVyQXBwbHk/OiBib29sZWFuKSA9PiB2b2lkXG59XG5cbmNvbnN0IHNrZXRjaFRvb2xJbmZvTWFwID0ge1xuICBbQ3JlYXRlVG9vbFR5cGUuUG9pbnRdOiB7IGRyYXdUb29sTmFtZTogJ3BvaW50JywgZXNyaUNsYXNzTmFtZTogJ2VzcmktaWNvbi1wb2ludCcsIHRvb2xJbmRleDogMCB9LFxuICBbQ3JlYXRlVG9vbFR5cGUuUG9seWxpbmVdOiB7IGRyYXdUb29sTmFtZTogJ3BvbHlsaW5lJywgZXNyaUNsYXNzTmFtZTogJ2VzcmktaWNvbi1wb2x5bGluZScsIHRvb2xJbmRleDogNCB9LFxuICBbQ3JlYXRlVG9vbFR5cGUuUG9seWdvbl06IHsgZHJhd1Rvb2xOYW1lOiAncG9seWdvbicsIGVzcmlDbGFzc05hbWU6ICdlc3JpLWljb24tcG9seWdvbicsIHRvb2xJbmRleDogMiB9LFxuICBbQ3JlYXRlVG9vbFR5cGUuUmVjdGFuZ2xlXToge1xuICAgIGRyYXdUb29sTmFtZTogJ3JlY3RhbmdsZScsXG4gICAgZXNyaUNsYXNzTmFtZTogJ2VzcmktaWNvbi1jaGVja2JveC11bmNoZWNrZWQnLFxuICAgIHRvb2xJbmRleDogMVxuICB9LFxuICBbQ3JlYXRlVG9vbFR5cGUuQ2lyY2xlXTogeyBkcmF3VG9vbE5hbWU6ICdjaXJjbGUnLCBlc3JpQ2xhc3NOYW1lOiAnZXNyaS1pY29uLXJhZGlvLXVuY2hlY2tlZCcsIHRvb2xJbmRleDogMyB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBJbnRlcmFjdGl2ZURyYXcgKHByb3BzOiBJbnRlcmFjdGl2ZURyYXdQcm9wcykge1xuICBjb25zdCB7IHRvb2xUeXBlcyA9IFtdLCBqaW11TWFwVmlldywgb25EcmF3RW5kLCB3aWRnZXRJZCB9ID0gcHJvcHNcbiAgY29uc3QgZ2V0STE4bk1lc3NhZ2UgPSBob29rcy51c2VUcmFuc2xhdGlvbihkZWZhdWx0TWVzc2FnZSlcbiAgY29uc3QgW21hcE1vZHVsZSwgc2V0TWFwTW9kdWxlXSA9IFJlYWN0LnVzZVN0YXRlPHR5cGVvZiBqaW11TWFwPihudWxsKVxuICBjb25zdCBnZXRMYXllckZ1blJlZiA9IFJlYWN0LnVzZVJlZjwoKSA9PiBfX2VzcmkuR3JhcGhpY3NMYXllciB8IF9fZXNyaS5NYXBOb3Rlc0xheWVyPihudWxsKVxuICBjb25zdCBncmFwaGljUmVmID0gUmVhY3QudXNlUmVmKG51bGwpXG4gIGNvbnN0IFtjbGVhckFmdGVyQXBwbHksIHNldENsZWFyQWZ0ZXJBcHBseV0gPSBSZWFjdC51c2VTdGF0ZShmYWxzZSlcblxuICBjb25zdCB2aXNpYmxlRWxlbWVudHMgPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgY3JlYXRlVG9vbHM6IE9iamVjdC5lbnRyaWVzKHNrZXRjaFRvb2xJbmZvTWFwKS5yZWR1Y2UoXG4gICAgICAgIChyZXN1bHQsIFtrZXksIHZhbHVlXSkgPT4gKHsgLi4ucmVzdWx0LCBbdmFsdWUuZHJhd1Rvb2xOYW1lXTogdG9vbFR5cGVzLmluY2x1ZGVzKGtleSBhcyBDcmVhdGVUb29sVHlwZSkgfSksXG4gICAgICAgIHsgcG9pbnQ6IGZhbHNlIH1cbiAgICAgICkgYXMgYW55LFxuICAgICAgc2VsZWN0aW9uVG9vbHM6IHtcbiAgICAgICAgJ2xhc3NvLXNlbGVjdGlvbic6IGZhbHNlLFxuICAgICAgICAncmVjdGFuZ2xlLXNlbGVjdGlvbic6IGZhbHNlXG4gICAgICB9LFxuICAgICAgc2V0dGluZ3NNZW51OiBmYWxzZSxcbiAgICAgIHVuZG9SZWRvTWVudTogZmFsc2UsXG4gICAgICBkZWxldGVCdXR0b246IHRydWVcbiAgICB9XG4gIH0sIFt0b29sVHlwZXNdKVxuXG4gIGhvb2tzLnVzZUVmZmVjdE9uY2UoKCkgPT4ge1xuICAgIG1vZHVsZUxvYWRlci5sb2FkTW9kdWxlPHR5cGVvZiBqaW11TWFwPignamltdS11aS9hZHZhbmNlZC9tYXAnKS50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgIHNldE1hcE1vZHVsZShyZXN1bHQpXG4gICAgfSlcbiAgfSlcblxuICBjb25zdCBoYW5kbGVEcmF3VG9vbENyZWF0ZWQgPSBSZWFjdC51c2VDYWxsYmFjaygoamltdURyYXdUb29sc1JlZjogamltdU1hcC5KaW11RHJhd0NyZWF0ZWREZXNjcmlwdG9yKSA9PiB7XG4gICAgZ2V0TGF5ZXJGdW5SZWYuY3VycmVudCA9IGppbXVEcmF3VG9vbHNSZWYuZ2V0R3JhcGhpY3NMYXllclxuICB9LCBbXSlcblxuICBjb25zdCBoYW5kbGVEcmF3U3RhcnQgPSBSZWFjdC51c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgZ2V0TGF5ZXJGdW5SZWYuY3VycmVudCAmJiAoKGdldExheWVyRnVuUmVmLmN1cnJlbnQpKCkgYXMgX19lc3JpLkdyYXBoaWNzTGF5ZXIpLnJlbW92ZUFsbCgpXG4gIH0sIFtdKVxuXG4gIGNvbnN0IGhhbmRsZURyYXdFbmQgPSBSZWFjdC51c2VDYWxsYmFjayhcbiAgICAoZ3JhcGhpYykgPT4ge1xuICAgICAgZ3JhcGhpY1JlZi5jdXJyZW50ID0gZ3JhcGhpY1xuICAgICAgb25EcmF3RW5kKGdyYXBoaWMsIGdldExheWVyRnVuUmVmLmN1cnJlbnQsIGNsZWFyQWZ0ZXJBcHBseSlcbiAgICB9LFxuICAgIFtvbkRyYXdFbmQsIGNsZWFyQWZ0ZXJBcHBseV1cbiAgKVxuXG4gIGNvbnN0IGhhbmRsZUNsZWFyZWQgPSBSZWFjdC51c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgZ3JhcGhpY1JlZi5jdXJyZW50ID0gbnVsbFxuICAgIG9uRHJhd0VuZChudWxsKVxuICB9LCBbb25EcmF3RW5kXSlcblxuICBjb25zdCBoYW5kbGVDbGVhclNldHRpbmdDaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjaygoZSkgPT4ge1xuICAgIGlmIChncmFwaGljUmVmLmN1cnJlbnQpIHtcbiAgICAgIG9uRHJhd0VuZChncmFwaGljUmVmLmN1cnJlbnQsIGdldExheWVyRnVuUmVmLmN1cnJlbnQsIGUudGFyZ2V0LmNoZWNrZWQpXG4gICAgfVxuICAgIHNldENsZWFyQWZ0ZXJBcHBseShlLnRhcmdldC5jaGVja2VkKVxuICB9LCBbb25EcmF3RW5kXSlcblxuICBjb25zdCBKaW11RHJhdyA9IG1hcE1vZHVsZT8uSmltdURyYXdcbiAgaWYgKCFKaW11RHJhdykge1xuICAgIHJldHVybiA8U3RhdHVzSW5kaWNhdG9yIHN0YXR1c1R5cGU9e0VudGl0eVN0YXR1c1R5cGUuTG9hZGluZ30gLz5cbiAgfVxuICBjb25zdCBpc0F2YWlsYWJsZSA9IE9iamVjdC5rZXlzKHZpc2libGVFbGVtZW50cy5jcmVhdGVUb29scykuc29tZSh0b29sTmFtZSA9PiB2aXNpYmxlRWxlbWVudHMuY3JlYXRlVG9vbHNbdG9vbE5hbWVdKVxuICBpZiAoIWlzQXZhaWxhYmxlKSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuICByZXR1cm4gKFxuICAgIDxkaXY+XG4gICAgICA8SmltdURyYXdcbiAgICAgICAgamltdU1hcFZpZXc9e2ppbXVNYXBWaWV3fVxuICAgICAgICBvcGVyYXRvcldpZGdldElkPXt3aWRnZXRJZH1cbiAgICAgICAgZGlzYWJsZVN5bWJvbFNlbGVjdG9yXG4gICAgICAgIGRyYXdpbmdPcHRpb25zPXt7XG4gICAgICAgICAgY3JlYXRpb25Nb2RlOiBtYXBNb2R1bGUuSmltdURyYXdDcmVhdGlvbk1vZGUuU2luZ2xlLFxuICAgICAgICAgIHVwZGF0ZU9uR3JhcGhpY0NsaWNrOiBmYWxzZSxcbiAgICAgICAgICB2aXNpYmxlRWxlbWVudHM6IHZpc2libGVFbGVtZW50c1xuICAgICAgICB9fVxuICAgICAgICB1aU9wdGlvbnM9e3tcbiAgICAgICAgICBpc0hpZGVCb3JkZXI6IHRydWVcbiAgICAgICAgfX1cbiAgICAgICAgb25KaW11RHJhd0NyZWF0ZWQ9e2hhbmRsZURyYXdUb29sQ3JlYXRlZH1cbiAgICAgICAgb25EcmF3aW5nU3RhcnRlZD17aGFuZGxlRHJhd1N0YXJ0fVxuICAgICAgICBvbkRyYXdpbmdGaW5pc2hlZD17aGFuZGxlRHJhd0VuZH1cbiAgICAgICAgb25EcmF3aW5nQ2xlYXJlZD17aGFuZGxlQ2xlYXJlZH1cbiAgICAgIC8+XG4gICAgICA8bGFiZWwgY2xhc3NOYW1lPSdkLWZsZXggYWxpZ24taXRlbXMtY2VudGVyJz5cbiAgICAgICAgPENoZWNrYm94IGNoZWNrZWQ9e2NsZWFyQWZ0ZXJBcHBseX0gb25DaGFuZ2U9e2hhbmRsZUNsZWFyU2V0dGluZ0NoYW5nZX0gY2xhc3NOYW1lPSdtci0yJyAvPlxuICAgICAgICB7Z2V0STE4bk1lc3NhZ2UoJ2NsZWFyRHJhd2luZycpfVxuICAgICAgPC9sYWJlbD5cbiAgICA8L2Rpdj5cbiAgKVxufVxuIiwiaW1wb3J0IHsgUmVhY3QsIGhvb2tzIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgTG9hZGluZywgTG9hZGluZ1R5cGUgfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHsgc3R5bGVkIH0gZnJvbSAnamltdS10aGVtZSdcbmltcG9ydCBkZWZhdWx0TWVzc2FnZSBmcm9tICcuL3RyYW5zbGF0aW9ucy9kZWZhdWx0J1xuXG5jb25zdCBSb290ID0gc3R5bGVkLmRpdmBcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0b3A6IDA7XG4gIGJvdHRvbTogMDtcbiAgcmlnaHQ6IDA7XG4gIGxlZnQ6IDA7XG4gIHotaW5kZXg6IDI7XG5cbiAgLmxvYWRpbmctY29udGVudCB7XG4gICAgLmxvYWRpbmctdGlwIHtcbiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICB9XG4gIH1cbmBcbmV4cG9ydCBmdW5jdGlvbiBMb2FkaW5nUmVzdWx0ICgpIHtcbiAgY29uc3QgdHJhbnNsYXRlID0gaG9va3MudXNlVHJhbnNsYXRpb24oZGVmYXVsdE1lc3NhZ2UpXG4gIHJldHVybiAoXG4gICAgPFJvb3Q+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT0nbG9hZGluZy1jb250ZW50IHctMTAwIHB4LTQgZC1mbGV4IGZsZXgtY29sdW1uIGp1c3RpZnktY29udGVudC1jZW50ZXIgYWxpZ24taXRlbXMtY2VudGVyJz5cbiAgICAgICAgPGRpdiByb2xlPSdhbGVydCcgYXJpYS1saXZlPSdhc3NlcnRpdmUnIGNsYXNzTmFtZT0ndGV4dC1wYXBlcic+XG4gICAgICAgICAge3RyYW5zbGF0ZSgncmV0cmlldmluZycpfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPExvYWRpbmcgY2xhc3NOYW1lPSdsb2FkaW5nLXRpcCBtdC04JyB0eXBlPXtMb2FkaW5nVHlwZS5Eb251dH0vPlxuICAgICAgPC9kaXY+XG4gICAgPC9Sb290PlxuICApXG59XG5cblxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQge1xuICBSZWFjdCxcbiAgUmVhY3RSZWR1eCxcbiAganN4LFxuICBjc3MsXG4gIHR5cGUgRGF0YVNvdXJjZSxcbiAgdHlwZSBGZWF0dXJlRGF0YVJlY29yZCxcbiAgdHlwZSBJTVN0YXRlLFxuICBjbGFzc05hbWVzXG59IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IEJ1dHRvbiB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQgeyBUcmFzaE91dGxpbmVkIH0gZnJvbSAnamltdS1pY29ucy9vdXRsaW5lZC9lZGl0b3IvdHJhc2gnXG5pbXBvcnQgRmVhdHVyZUluZm8gZnJvbSAnLi9jb21wb25lbnRzL2ZlYXR1cmUtaW5mbydcbmltcG9ydCB7IExpc3REaXJlY3Rpb24gfSBmcm9tICcuLi9jb25maWcnXG5pbXBvcnQgeyBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyIH0gZnJvbSAnd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24nXG5cbmNvbnN0IGRlYnVnTG9nZ2VyID0gY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlcigpXG5cbmV4cG9ydCBpbnRlcmZhY2UgUmVzdWx0SXRlbVByb3BzIHtcbiAgd2lkZ2V0SWQ6IHN0cmluZ1xuICBwb3B1cFRlbXBsYXRlOiBhbnlcbiAgZGVmYXVsdFBvcHVwVGVtcGxhdGU6IGFueVxuICBkYXRhOiBGZWF0dXJlRGF0YVJlY29yZFxuICBkYXRhU291cmNlOiBEYXRhU291cmNlXG4gIGV4cGFuZEJ5RGVmYXVsdDogYm9vbGVhblxuICBvbkNsaWNrOiAocmVjb3JkOiBGZWF0dXJlRGF0YVJlY29yZCkgPT4gdm9pZFxuICBvblJlbW92ZTogKHJlY29yZDogRmVhdHVyZURhdGFSZWNvcmQpID0+IHZvaWRcbn1cblxuY29uc3Qgc3R5bGUgPSBjc3NgXG4gIG92ZXJmbG93OiBhdXRvO1xuICBmbGV4LWZsb3c6IHJvdztcbiAgY3Vyc29yOiBwb2ludGVyO1xuICBmbGV4LXNocmluazogMDtcbiAgbWluLWhlaWdodDogMnJlbTtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAmLnNlbGVjdGVkIHtcbiAgICBvdXRsaW5lOiAycHggc29saWQgdmFyKC0tc3lzLWNvbG9yLXByaW1hcnktbWFpbik7XG4gIH1cbiAgXG4gIC5yZW1vdmUtYnV0dG9uIHtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgdG9wOiA0cHg7XG4gICAgcmlnaHQ6IDRweDtcbiAgICB6LWluZGV4OiAxMDtcbiAgICBvcGFjaXR5OiAwLjc7XG4gICAgdHJhbnNpdGlvbjogb3BhY2l0eSAwLjJzO1xuICAgIFxuICAgICY6aG92ZXIge1xuICAgICAgb3BhY2l0eTogMTtcbiAgICB9XG4gICAgXG4gICAgLy8gTGFyZ2VyIHRvdWNoIHRhcmdldCBmb3IgbW9iaWxlL2FjY2Vzc2liaWxpdHlcbiAgICBtaW4td2lkdGg6IDMycHg7XG4gICAgbWluLWhlaWdodDogMzJweDtcbiAgfVxuYFxuXG4vKipcbiAqIFF1ZXJ5UmVzdWx0SXRlbSBjb21wb25lbnQgLSBkaXNwbGF5cyBhIHNpbmdsZSBxdWVyeSByZXN1bHQgcmVjb3JkXG4gKiBGZWF0dXJlczpcbiAqIC0gQ2xpY2tpbmcgdGhlIGl0ZW0gem9vbXMgdG8gdGhlIGZlYXR1cmUgb24gdGhlIG1hcFxuICogLSBSZW1vdmUgYnV0dG9uICh0cmFzaCBpY29uKSBpbiB1cHBlci1yaWdodCBjb3JuZXIgdG8gcmVtb3ZlIHJlY29yZCBmcm9tIHJlc3VsdHNcbiAqIC0gUmVjb3JkcyBhcmUgZXhwYW5kZWQgYnkgZGVmYXVsdCB0byBzaG93IGZ1bGwgZmVhdHVyZSBpbmZvcm1hdGlvblxuICovXG5leHBvcnQgY29uc3QgUXVlcnlSZXN1bHRJdGVtID0gKHByb3BzOiBSZXN1bHRJdGVtUHJvcHMpID0+IHtcbiAgY29uc3QgeyB3aWRnZXRJZCwgZGF0YSwgZGF0YVNvdXJjZSwgcG9wdXBUZW1wbGF0ZSwgZGVmYXVsdFBvcHVwVGVtcGxhdGUsIG9uQ2xpY2ssIG9uUmVtb3ZlLCBleHBhbmRCeURlZmF1bHQgPSBmYWxzZSB9ID0gcHJvcHNcbiAgXG4gIGNvbnN0IHJlY29yZElkID0gZGF0YS5nZXRJZCgpXG4gIFxuICAvLyBMb2cgd2hlbiBRdWVyeVJlc3VsdEl0ZW0gcmVuZGVyc1xuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnRVhQQU5ELUNPTExBUFNFJywge1xuICAgICAgZXZlbnQ6ICdRdWVyeVJlc3VsdEl0ZW0tcmVuZGVyJyxcbiAgICAgIHJlY29yZElkLFxuICAgICAgZXhwYW5kQnlEZWZhdWx0LFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgfSwgW3JlY29yZElkLCBleHBhbmRCeURlZmF1bHRdKVxuICBcbiAgLy8gQ2hlY2sgaWYgdGhpcyByZWNvcmQgaXMgY3VycmVudGx5IHNlbGVjdGVkXG4gIGNvbnN0IHNlbGVjdGVkID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+XG4gICAgc3RhdGUuZGF0YVNvdXJjZXNJbmZvPy5bZGF0YVNvdXJjZS5pZF0/LnNlbGVjdGVkSWRzPy5pbmNsdWRlcyhkYXRhLmdldElkKCkpXG4gIClcbiAgXG4gIC8vIERldGVybWluZSBpZiBsaXN0IGlzIGRpc3BsYXllZCB2ZXJ0aWNhbGx5IChhZmZlY3RzIEZlYXR1cmVJbmZvIGV4cGFuZGFiaWxpdHkpXG4gIGNvbnN0IGlzVmVydGljYWxBbGlnbiA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XG4gICAgY29uc3Qgd2lkZ2V0SnNvbiA9IHN0YXRlLmFwcENvbmZpZy53aWRnZXRzW3dpZGdldElkXVxuICAgIHJldHVybiB3aWRnZXRKc29uLmNvbmZpZy5yZXN1bHRMaXN0RGlyZWN0aW9uICE9PSBMaXN0RGlyZWN0aW9uLkhvcml6b250YWxcbiAgfSlcblxuICAvLyBIYW5kbGUgY2xpY2tpbmcgb24gdGhlIHJlc3VsdCBpdGVtIC0gem9vbXMgdG8gZmVhdHVyZSBvbiBtYXBcbiAgY29uc3QgaGFuZGxlQ2xpY2tSZXN1bHRJdGVtID0gUmVhY3QudXNlQ2FsbGJhY2soKGU6IFJlYWN0Lk1vdXNlRXZlbnQpID0+IHtcbiAgICAvLyBEb24ndCB0cmlnZ2VyIHpvb20gaWYgY2xpY2tpbmcgdGhlIHJlbW92ZSBidXR0b25cbiAgICBpZiAoKGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50KS5jbG9zZXN0KCcucmVtb3ZlLWJ1dHRvbicpKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgb25DbGljayhkYXRhKVxuICB9LCBbb25DbGljaywgZGF0YV0pXG5cbiAgLy8gSGFuZGxlIGNsaWNraW5nIHRoZSByZW1vdmUgYnV0dG9uIC0gcmVtb3ZlcyByZWNvcmQgZnJvbSByZXN1bHRzIGFuZCBzZWxlY3Rpb25cbiAgY29uc3QgaGFuZGxlUmVtb3ZlID0gUmVhY3QudXNlQ2FsbGJhY2soKGU6IFJlYWN0Lk1vdXNlRXZlbnQpID0+IHtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpIC8vIFByZXZlbnQgdHJpZ2dlcmluZyB0aGUgaXRlbSBjbGljayBoYW5kbGVyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgb25SZW1vdmUoZGF0YSlcbiAgfSwgW29uUmVtb3ZlLCBkYXRhXSlcblxuICBjb25zdCBvbktleVVwID0gUmVhY3QudXNlQ2FsbGJhY2soKGV2dCkgPT4ge1xuICAgIGlmIChldnQua2V5ID09PSAnRW50ZXInIHx8IGV2dC5rZXkgPT09ICcgJykge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KClcbiAgICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKVxuICAgICAgaGFuZGxlQ2xpY2tSZXN1bHRJdGVtKGV2dCBhcyBhbnkpXG4gICAgfVxuICB9LCBbaGFuZGxlQ2xpY2tSZXN1bHRJdGVtXSlcblxuICByZXR1cm4gKFxuICAgIDxkaXZcbiAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcygncXVlcnktcmVzdWx0LWl0ZW0nLCB7IHNlbGVjdGVkIH0pfVxuICAgICAgb25DbGljaz17aGFuZGxlQ2xpY2tSZXN1bHRJdGVtfVxuICAgICAgb25LZXlVcD17b25LZXlVcH1cbiAgICAgIGNzcz17c3R5bGV9XG4gICAgICByb2xlPSdvcHRpb24nXG4gICAgICBhcmlhLXNlbGVjdGVkPXtzZWxlY3RlZH1cbiAgICAgIHRhYkluZGV4PXswfVxuICAgID5cbiAgICAgIDxGZWF0dXJlSW5mb1xuICAgICAgICBncmFwaGljPXtkYXRhLmZlYXR1cmUgYXMgX19lc3JpLkdyYXBoaWN9XG4gICAgICAgIHBvcHVwVGVtcGxhdGU9e3BvcHVwVGVtcGxhdGV9XG4gICAgICAgIGRlZmF1bHRQb3B1cFRlbXBsYXRlPXtkZWZhdWx0UG9wdXBUZW1wbGF0ZX1cbiAgICAgICAgdG9nZ2xhYmxlPXtpc1ZlcnRpY2FsQWxpZ259XG4gICAgICAgIGV4cGFuZEJ5RGVmYXVsdD17ZXhwYW5kQnlEZWZhdWx0fVxuICAgICAgICBkYXRhU291cmNlPXtkYXRhU291cmNlfVxuICAgICAgLz5cbiAgICAgIDxCdXR0b25cbiAgICAgICAgY2xhc3NOYW1lPVwicmVtb3ZlLWJ1dHRvblwiXG4gICAgICAgIGljb25cbiAgICAgICAgc2l6ZT1cInNtXCJcbiAgICAgICAgdmFyaWFudD1cInRleHRcIlxuICAgICAgICBjb2xvcj1cImluaGVyaXRcIlxuICAgICAgICBvbkNsaWNrPXtoYW5kbGVSZW1vdmV9XG4gICAgICAgIGFyaWEtbGFiZWw9XCJSZW1vdmUgcmVjb3JkXCJcbiAgICAgICAgY3NzPXtjc3NgXG4gICAgICAgICAgcGFkZGluZzogNnB4O1xuICAgICAgICAgIG1pbi13aWR0aDogMzJweDtcbiAgICAgICAgICB3aWR0aDogMzJweDtcbiAgICAgICAgICBoZWlnaHQ6IDMycHg7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgICBgfVxuICAgICAgPlxuICAgICAgICA8VHJhc2hPdXRsaW5lZCBzaXplPXsxOH0gLz5cbiAgICAgIDwvQnV0dG9uPlxuICAgIDwvZGl2PlxuICApXG59XG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7XG4gIFJlYWN0LFxuICBqc3gsXG4gIGNzcyxcbiAgUmVhY3RSZWR1eCxcbiAgdHlwZSBJTVN0YXRlLFxuICB0eXBlIERhdGFTb3VyY2UsXG4gIHR5cGUgSW1tdXRhYmxlT2JqZWN0LFxuICB0eXBlIERhdGFSZWNvcmQsXG4gIHR5cGUgUXVlcnlQYXJhbXMsXG4gIERhdGFTb3VyY2VDb21wb25lbnQsXG4gIERhdGFTb3VyY2VNYW5hZ2VyLFxuICBJbW11dGFibGUsXG4gIGhvb2tzLFxuICBNZXNzYWdlTWFuYWdlcixcbiAgRGF0YVJlY29yZHNTZWxlY3Rpb25DaGFuZ2VNZXNzYWdlLFxuICB0eXBlIEZlYXR1cmVEYXRhUmVjb3JkLFxuICB0eXBlIERhdGFSZWNvcmRTZXQsXG4gIHR5cGUgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSxcbiAgZm9jdXNFbGVtZW50SW5LZXlib2FyZE1vZGUsXG4gIERhdGFBY3Rpb25NYW5hZ2VyLFxuICBEYXRhTGV2ZWwsXG4gIHVzZUludGxcbn0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgQnV0dG9uLCBJY29uLCBUb29sdGlwLCBEYXRhQWN0aW9uTGlzdCwgRGF0YUFjdGlvbkxpc3RTdHlsZSB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQgeyBnZXRXaWRnZXRSdW50aW1lRGF0YU1hcCB9IGZyb20gJy4vd2lkZ2V0LWNvbmZpZydcbmltcG9ydCB7IHR5cGUgUXVlcnlJdGVtVHlwZSwgRmllbGRzVHlwZSwgUGFnaW5nVHlwZSwgTGlzdERpcmVjdGlvbiwgUmVzdWx0U2VsZWN0TW9kZSwgU2VsZWN0aW9uVHlwZSB9IGZyb20gJy4uL2NvbmZpZydcbmltcG9ydCBkZWZhdWx0TWVzc2FnZSBmcm9tICcuL3RyYW5zbGF0aW9ucy9kZWZhdWx0J1xuLy8gRk9SQ0VEOiBBbHdheXMgU2ltcGxlTGlzdCAtIExhenlMaXN0IGFuZCBQYWdpbmdMaXN0IHJlbW92ZWRcbmltcG9ydCB7IFNpbXBsZUxpc3QgfSBmcm9tICcuL3NpbXBsZS1saXN0J1xuaW1wb3J0IHsgY29tYmluZUZpZWxkcyB9IGZyb20gJy4vcXVlcnktdXRpbHMnXG5pbXBvcnQgeyBERUZBVUxUX1FVRVJZX0lURU0gfSBmcm9tICcuLi9kZWZhdWx0LXF1ZXJ5LWl0ZW0nXG5pbXBvcnQgeyBBcnJvd0xlZnRPdXRsaW5lZCB9IGZyb20gJ2ppbXUtaWNvbnMvb3V0bGluZWQvZGlyZWN0aW9uYWwvYXJyb3ctbGVmdCdcbmltcG9ydCB7IEV4cGFuZEFsbE91dGxpbmVkIH0gZnJvbSAnamltdS1pY29ucy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9leHBhbmQtYWxsJ1xuaW1wb3J0IHsgQ29sbGFwc2VBbGxPdXRsaW5lZCB9IGZyb20gJ2ppbXUtaWNvbnMvb3V0bGluZWQvZGlyZWN0aW9uYWwvY29sbGFwc2UtYWxsJ1xuaW1wb3J0IHsgZ2V0RXh0cmFBY3Rpb25zIH0gZnJvbSAnLi4vZGF0YS1hY3Rpb25zJ1xuaW1wb3J0IHsgXG4gIHNlbGVjdFJlY29yZHNJbkRhdGFTb3VyY2VzLCBcbiAgY2xlYXJTZWxlY3Rpb25JbkRhdGFTb3VyY2VzLCBcbiAgc2VsZWN0UmVjb3Jkc0FuZFB1Ymxpc2gsXG4gIHB1Ymxpc2hTZWxlY3Rpb25NZXNzYWdlLFxuICBkaXNwYXRjaFNlbGVjdGlvbkV2ZW50IFxufSBmcm9tICcuL3NlbGVjdGlvbi11dGlscydcbmltcG9ydCB7IHJlbW92ZVJlc3VsdHNGcm9tQWNjdW11bGF0ZWQsIHJlbW92ZVJlY29yZHNGcm9tT3JpZ2luU2VsZWN0aW9ucyB9IGZyb20gJy4vcmVzdWx0cy1tYW5hZ2VtZW50LXV0aWxzJ1xuaW1wb3J0IHsgY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlciB9IGZyb20gJ3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uJ1xuXG5jb25zdCBkZWJ1Z0xvZ2dlciA9IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIoKVxuaW1wb3J0IHsgRXJyb3JNZXNzYWdlIH0gZnJvbSAnd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24nXG5jb25zdCB7IGljb25NYXAgfSA9IGdldFdpZGdldFJ1bnRpbWVEYXRhTWFwKClcblxuLyoqXG4gKiBDdXN0b20gZXZlbnQgbmFtZSBmb3IgcmVxdWVzdGluZyByZXN0b3JhdGlvbiB3aGVuIGlkZW50aWZ5IHBvcHVwIGNsb3Nlcy5cbiAqL1xuY29uc3QgUkVTVE9SRV9PTl9JREVOVElGWV9DTE9TRV9FVkVOVCA9ICdxdWVyeXNpbXBsZS1yZXN0b3JlLW9uLWlkZW50aWZ5LWNsb3NlJ1xuXG4vKipcbiAqIERldGVjdHMgaWYgYW4gaWRlbnRpZnkgcG9wdXAgaXMgY3VycmVudGx5IHZpc2libGUgaW4gdGhlIERPTS5cbiAqIFVzZXMgdmVyaWZpZWQgc2VsZWN0b3JzIGJhc2VkIG9uIEV4cGVyaWVuY2UgQnVpbGRlcidzIGlkZW50aWZ5IHBvcHVwIHN0cnVjdHVyZS5cbiAqIFxuICogQHJldHVybnMgdHJ1ZSBpZiBpZGVudGlmeSBwb3B1cCBpcyBkZXRlY3RlZCBhbmQgdmlzaWJsZSwgZmFsc2Ugb3RoZXJ3aXNlXG4gKi9cbmZ1bmN0aW9uIGlzSWRlbnRpZnlQb3B1cE9wZW4oKTogYm9vbGVhbiB7XG4gIC8vIFByaW1hcnkgc2VsZWN0b3I6IC5lc3JpLXBvcHVwIHdpdGggcm9sZT1cImRpYWxvZ1wiXG4gIGNvbnN0IHBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVzcmktcG9wdXBbcm9sZT1cImRpYWxvZ1wiXScpXG4gIFxuICBpZiAoIXBvcHVwKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cbiAgXG4gIC8vIFZlcmlmeSBpdCdzIHZpc2libGUgKG5vdCBoaWRkZW4pXG4gIGNvbnN0IGFyaWFIaWRkZW4gPSBwb3B1cC5nZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJylcbiAgaWYgKGFyaWFIaWRkZW4gPT09ICd0cnVlJykge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG4gIFxuICAvLyBBZGRpdGlvbmFsIGNoZWNrOiB2ZXJpZnkgY29tcHV0ZWQgc3R5bGUgc2hvd3MgaXQncyB2aXNpYmxlXG4gIGNvbnN0IHN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUocG9wdXApXG4gIGlmIChzdHlsZS5kaXNwbGF5ID09PSAnbm9uZScgfHwgc3R5bGUudmlzaWJpbGl0eSA9PT0gJ2hpZGRlbicgfHwgc3R5bGUub3BhY2l0eSA9PT0gJzAnKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cbiAgXG4gIC8vIFZlcmlmeSBpdCBjb250YWlucyBlc3JpLWZlYXR1cmVzIChpZGVudGlmeSBwb3B1cCBzdHJ1Y3R1cmUpXG4gIGNvbnN0IGhhc0ZlYXR1cmVzID0gcG9wdXAucXVlcnlTZWxlY3RvcignLmVzcmktZmVhdHVyZXMnKVxuICBpZiAoIWhhc0ZlYXR1cmVzKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cbiAgXG4gIHJldHVybiB0cnVlXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUXVlcnlUYXNrUmVzdWx0UHJvcHMge1xuICB3aWRnZXRJZDogc3RyaW5nXG4gIHJlc3VsdENvdW50OiBudW1iZXJcbiAgbWF4UGVyUGFnZTogbnVtYmVyXG4gIHF1ZXJ5UGFyYW1zOiBRdWVyeVBhcmFtc1xuICBvdXRwdXREUzogRGF0YVNvdXJjZVxuICBxdWVyeUl0ZW06IEltbXV0YWJsZU9iamVjdDxRdWVyeUl0ZW1UeXBlPlxuICByZWNvcmRzOiBEYXRhUmVjb3JkW11cbiAgcnVudGltZVpvb21Ub1NlbGVjdGVkPzogYm9vbGVhblxuICBvbk5hdkJhY2s6IChjbGVhclJlc3VsdHM/OiBib29sZWFuKSA9PiBQcm9taXNlPHZvaWQ+IHwgdm9pZFxuICB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0PzogYm9vbGVhblxuICBncmFwaGljc0xheWVyPzogX19lc3JpLkdyYXBoaWNzTGF5ZXJcbiAgbWFwVmlldz86IF9fZXNyaS5NYXBWaWV3IHwgX19lc3JpLlNjZW5lVmlld1xuICByZXN1bHRzTW9kZT86IFNlbGVjdGlvblR5cGVcbiAgYWNjdW11bGF0ZWRSZWNvcmRzPzogRmVhdHVyZURhdGFSZWNvcmRbXVxuICBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZT86IChyZWNvcmRzOiBGZWF0dXJlRGF0YVJlY29yZFtdKSA9PiB2b2lkXG59XG5cbmNvbnN0IHJlc3VsdFN0eWxlID0gY3NzYFxuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuXG4gIC5xdWVyeS1yZXN1bHRfX2hlYWRlciB7XG4gICAgY29sb3I6IHZhcigtLXN5cy1jb2xvci1zdXJmYWNlLXBhcGVyLXRleHQpO1xuICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgZm9udC1zaXplOiAwLjg3NXJlbTtcbiAgICBsaW5lLWhlaWdodDogMS41O1xuICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1zeXMtY29sb3ItZGl2aWRlci1zZWNvbmRhcnkpO1xuICAgIG1hcmdpbi1ib3R0b206IDZweDtcbiAgICBwYWRkaW5nLWJvdHRvbTogOHB4O1xuICB9XG5cbiAgLnF1ZXJ5LXJlc3VsdC1jb250YWluZXIge1xuICAgIGZsZXg6IDEgMSAwO1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICBvdmVyZmxvdzogYXV0bztcbiAgICBtaW4taGVpZ2h0OiAwO1xuICB9XG5cbiAgLnF1ZXJ5LXJlc3VsdC1pbmZvIHtcbiAgICBoZWlnaHQ6IDE4cHg7XG4gIH1cbmBcblxuZXhwb3J0IGZ1bmN0aW9uIFF1ZXJ5VGFza1Jlc3VsdCAocHJvcHM6IFF1ZXJ5VGFza1Jlc3VsdFByb3BzKSB7XG4gIGNvbnN0IHsgcXVlcnlJdGVtLCBxdWVyeVBhcmFtcywgcmVzdWx0Q291bnQsIG1heFBlclBhZ2UsIHJlY29yZHMsIHdpZGdldElkLCBvdXRwdXREUywgcnVudGltZVpvb21Ub1NlbGVjdGVkLCBvbk5hdkJhY2ssIHJlc3VsdHNNb2RlLCBhY2N1bXVsYXRlZFJlY29yZHMsIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlLCB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0LCBncmFwaGljc0xheWVyLCBtYXBWaWV3IH0gPSBwcm9wc1xuICBjb25zdCBnZXRJMThuTWVzc2FnZSA9IGhvb2tzLnVzZVRyYW5zbGF0aW9uKGRlZmF1bHRNZXNzYWdlKVxuICBjb25zdCBpbnRsID0gdXNlSW50bCgpXG4gIGNvbnN0IFtxdWVyeURhdGEsIHNldFF1ZXJ5RGF0YV0gPSBSZWFjdC51c2VTdGF0ZShudWxsKVxuICBjb25zdCBbc2VsZWN0ZWRSZWNvcmRzLCBzZXRTZWxlY3RlZFJlY29yZHNdID0gUmVhY3QudXNlU3RhdGU8RGF0YVJlY29yZFtdPihbXSlcbiAgY29uc3QgW3JlbW92ZWRSZWNvcmRJZHMsIHNldFJlbW92ZWRSZWNvcmRJZHNdID0gUmVhY3QudXNlU3RhdGU8U2V0PHN0cmluZz4+KG5ldyBTZXQoKSlcbiAgXG4gIGNvbnN0IGN1cnJlbnRJdGVtID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9RVUVSWV9JVEVNLCBxdWVyeUl0ZW0pXG4gIGNvbnN0IFtleHBhbmRBbGwsIHNldEV4cGFuZEFsbF0gPSBSZWFjdC51c2VTdGF0ZShjdXJyZW50SXRlbS5yZXN1bHRFeHBhbmRCeURlZmF1bHQgPz8gZmFsc2UpXG4gIC8vIFRyYWNrIGluZGl2aWR1YWwgaXRlbSBleHBhbnNpb24gc3RhdGVzIHRvIG1haW50YWluIHN0YXRlIHdoZW4gaXRlbXMgYXJlIHJlbW92ZWRcbiAgY29uc3QgW2l0ZW1FeHBhbmRTdGF0ZXMsIHNldEl0ZW1FeHBhbmRTdGF0ZXNdID0gUmVhY3QudXNlU3RhdGU8TWFwPHN0cmluZywgYm9vbGVhbj4+KG5ldyBNYXAoKSlcbiAgY29uc3QgYmFja0J0blJlZiA9IFJlYWN0LnVzZVJlZjxIVE1MQnV0dG9uRWxlbWVudD4odW5kZWZpbmVkKVxuICBcbiAgLy8gVHJhY2sgZXhwYW5kQWxsIGNoYW5nZXMgZm9yIGRlYnVnZ2luZ1xuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgZXZlbnQ6ICdleHBhbmRBbGwtc3RhdGUtY2hhbmdlZCcsXG4gICAgICB3aWRnZXRJZCxcbiAgICAgIGV4cGFuZEFsbCxcbiAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBxdWVyeUl0ZW0uY29uZmlnSWQsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICB9LCBbZXhwYW5kQWxsLCB3aWRnZXRJZCwgcXVlcnlJdGVtLmNvbmZpZ0lkXSlcbiAgLy8gVHJhY2sgaWYgd2UndmUgYWxyZWFkeSBzZWxlY3RlZCB0aGVzZSByZWNvcmRzIHRvIHByZXZlbnQgcmUtc2VsZWN0aW9uIHdoZW4gc3dpdGNoaW5nIHRhYnNcbiAgY29uc3QgaGFzU2VsZWN0ZWRSZWYgPSBSZWFjdC51c2VSZWYoZmFsc2UpXG4gIC8vIFRyYWNrIHRoZSBsYXN0IHJlY29yZHMgd2Ugc2VsZWN0ZWQgdG8gZGV0ZWN0IHdoZW4gbmV3IHJlY29yZHMgY29tZSBpblxuICBjb25zdCBsYXN0U2VsZWN0ZWRSZWNvcmRzUmVmID0gUmVhY3QudXNlUmVmPHN0cmluZ1tdPihbXSlcbiAgLy8gVHJhY2sgdGhlIG9yaWdpbmFsIHF1ZXJ5IHJlY29yZCBJRHMgKG5vdCBzZWxlY3RlZCBJRHMpIHRvIGRldGVjdCB3aGVuIHF1ZXJ5IHJlc3VsdHMgY2hhbmdlXG4gIGNvbnN0IGxhc3RRdWVyeVJlY29yZElkc1JlZiA9IFJlYWN0LnVzZVJlZjxzdHJpbmdbXT4oW10pXG4gIC8vIFRyYWNrIHRoZSBsYXN0IHNlbGVjdGVkIEZlYXR1cmVEYXRhUmVjb3JkcyBmb3IgcmVzdG9yYXRpb24gKGlmIG5lZWRlZClcbiAgY29uc3QgbGFzdFNlbGVjdGVkRmVhdHVyZVJlY29yZHNSZWYgPSBSZWFjdC51c2VSZWY8RmVhdHVyZURhdGFSZWNvcmRbXT4oW10pXG4gIC8vIFJlZiB0byB0cmFjayByZW1vdmVkUmVjb3JkSWRzIGZvciB1c2UgaW4gY2FsbGJhY2tzIChhdm9pZHMgc3RhbGUgY2xvc3VyZSBpc3N1ZXMpXG4gIGNvbnN0IHJlbW92ZWRSZWNvcmRJZHNSZWYgPSBSZWFjdC51c2VSZWY8U2V0PHN0cmluZz4+KG5ldyBTZXQoKSlcbiAgXG4gIC8vIFN5bmMgcmVmIHdoZW5ldmVyIHJlbW92ZWRSZWNvcmRJZHMgc3RhdGUgY2hhbmdlc1xuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIHJlbW92ZWRSZWNvcmRJZHNSZWYuY3VycmVudCA9IHJlbW92ZWRSZWNvcmRJZHNcbiAgfSwgW3JlbW92ZWRSZWNvcmRJZHNdKVxuICAvLyBFcnJvciBzdGF0ZSBmb3IgdXNlci1mYWNpbmcgZXJyb3JzXG4gIGNvbnN0IFtzZWxlY3Rpb25FcnJvciwgc2V0U2VsZWN0aW9uRXJyb3JdID0gUmVhY3QudXNlU3RhdGU8c3RyaW5nPihudWxsKVxuXG4gIGNvbnN0IGV4dHJhQWN0aW9ucyA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgIHJldHVybiBnZXRFeHRyYUFjdGlvbnMod2lkZ2V0SWQsIG91dHB1dERTLCBpbnRsLCBxdWVyeUl0ZW0sIHJ1bnRpbWVab29tVG9TZWxlY3RlZClcbiAgfSwgW3dpZGdldElkLCBvdXRwdXREUywgaW50bCwgcXVlcnlJdGVtLCBydW50aW1lWm9vbVRvU2VsZWN0ZWRdKVxuXG4gIGNvbnN0IGVuYWJsZURhdGFBY3Rpb24gPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xuICAgIGNvbnN0IHdpZGdldEpzb24gPSBzdGF0ZS5hcHBDb25maWcud2lkZ2V0c1t3aWRnZXRJZF1cbiAgICByZXR1cm4gd2lkZ2V0SnNvbi5lbmFibGVEYXRhQWN0aW9uID8/IHRydWVcbiAgfSlcblxuICBjb25zdCBwYWdpbmdUeXBlSW5Db25maWcgPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xuICAgIGNvbnN0IHdpZGdldEpzb24gPSBzdGF0ZS5hcHBDb25maWcud2lkZ2V0c1t3aWRnZXRJZF1cbiAgICByZXR1cm4gd2lkZ2V0SnNvbi5jb25maWcucmVzdWx0UGFnaW5nU3R5bGVcbiAgfSlcbiAgY29uc3QgZGlyZWN0aW9uVHlwZUluQ29uZmlnID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcbiAgICBjb25zdCB3aWRnZXRKc29uID0gc3RhdGUuYXBwQ29uZmlnLndpZGdldHNbd2lkZ2V0SWRdXG4gICAgcmV0dXJuIHdpZGdldEpzb24uY29uZmlnLnJlc3VsdExpc3REaXJlY3Rpb25cbiAgfSlcbiAgLy8gRk9SQ0UgU2ltcGxlTGlzdCAtIGlnbm9yZSBjb25maWcsIHdlJ3JlIGRvbmUgd2l0aCBsYXp5IGxvYWRpbmcgaXNzdWVzXG4gIGNvbnN0IHBhZ2luZ1R5cGUgPSBQYWdpbmdUeXBlLlNpbXBsZVxuICBjb25zdCBkaXJlY3Rpb24gPSBkaXJlY3Rpb25UeXBlSW5Db25maWcgPz8gTGlzdERpcmVjdGlvbi5WZXJ0aWNhbFxuXG4gIC8vIEdyb3VwIHJlY29yZHMgYnkgb3JpZ2luIGRhdGEgc291cmNlIGZvciBEYXRhQWN0aW9uTGlzdFxuICAvLyBUaGlzIGVuc3VyZXMgRGF0YUFjdGlvbkxpc3QgcmVjb2duaXplcyByZWNvcmRzIGV2ZW4gd2hlbiB0aGV5IGNvbWUgZnJvbSBkaWZmZXJlbnQgcXVlcmllcy9vcmlnaW5zXG4gIGNvbnN0IGFjdGlvbkRhdGFTZXRzOiBEYXRhUmVjb3JkU2V0W10gPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICAvLyBEZWJ1ZzogTG9nIHdoYXQgcmVjb3JkcyBhcmUgYXZhaWxhYmxlXG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICBldmVudDogJ2FjdGlvbkRhdGFTZXRzLWNhbGN1bGF0aW9uLXN0YXJ0JyxcbiAgICAgIHdpZGdldElkOiB3aWRnZXRJZCxcbiAgICAgIHNlbGVjdGVkUmVjb3Jkc0NvdW50OiBzZWxlY3RlZFJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgcXVlcnlEYXRhUmVjb3Jkc0NvdW50OiBxdWVyeURhdGE/LnJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgcmVjb3Jkc1Byb3BDb3VudDogcmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICBvdXRwdXREU0lkOiBvdXRwdXREUz8uaWQsXG4gICAgICBoYXNTZWxlY3RlZFJlY29yZHM6IHNlbGVjdGVkUmVjb3Jkcz8ubGVuZ3RoID4gMCxcbiAgICAgIGhhc1F1ZXJ5RGF0YVJlY29yZHM6IHF1ZXJ5RGF0YT8ucmVjb3Jkcz8ubGVuZ3RoID4gMCxcbiAgICAgIGhhc1JlY29yZHNQcm9wOiByZWNvcmRzPy5sZW5ndGggPiAwXG4gICAgfSlcbiAgICBcbiAgICBjb25zdCBpc0FjY3VtdWxhdGlvbk1vZGUgPSByZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbiB8fCByZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uXG4gICAgXG4gICAgLy8gSW4gYWNjdW11bGF0aW9uIG1vZGVzIChBZGQvUmVtb3ZlKSwgcHJlZmVyIHRoZSAncmVjb3JkcycgcHJvcCAodGhlIGFjY3VtdWxhdGVkIHNldClcbiAgICAvLyBiZWNhdXNlIG91dHB1dERTLmdldFNlbGVjdGVkUmVjb3JkcygpIHdpbGwgb25seSByZXR1cm4gcmVjb3JkcyB0aGF0IG1hdGNoIHRoZSBjdXJyZW50IHF1ZXJ5J3Mgd2hlcmUgY2xhdXNlLlxuICAgIGNvbnN0IHJlY29yZHNUb1VzZSA9IGlzQWNjdW11bGF0aW9uTW9kZVxuICAgICAgPyAocmVjb3JkcyB8fCBbXSlcbiAgICAgIDogKHNlbGVjdGVkUmVjb3Jkcz8ubGVuZ3RoID4gMCA/IHNlbGVjdGVkUmVjb3JkcyA6IChxdWVyeURhdGE/LnJlY29yZHM/Lmxlbmd0aCA+IDAgPyBxdWVyeURhdGEucmVjb3JkcyA6IChyZWNvcmRzIHx8IFtdKSkpXG4gICAgXG4gICAgLy8gSWYgbm8gcmVjb3JkcywgcmV0dXJuIHNpbmdsZSBEYXRhUmVjb3JkU2V0IHdpdGggZW1wdHkgcmVjb3JkcyB1c2luZyBvdXRwdXREU1xuICAgIGlmICghcmVjb3Jkc1RvVXNlIHx8IHJlY29yZHNUb1VzZS5sZW5ndGggPT09IDApIHtcbiAgICAgIGNvbnN0IGVtcHR5RGF0YVNldDogRGF0YVJlY29yZFNldCA9IHtcbiAgICAgICAgZGF0YVNvdXJjZTogb3V0cHV0RFMsXG4gICAgICAgIHR5cGU6ICdsb2FkZWQnLFxuICAgICAgICByZWNvcmRzOiBbXSxcbiAgICAgICAgbmFtZTogb3V0cHV0RFM/LmlkLFxuICAgICAgICBsYWJlbDogb3V0cHV0RFM/LmdldExhYmVsKClcbiAgICAgIH1cbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ2FjdGlvbkRhdGFTZXRzLWVtcHR5LXJlY29yZHMnLFxuICAgICAgICB3aWRnZXRJZDogd2lkZ2V0SWQsXG4gICAgICAgIGRhdGFTZXREYXRhU291cmNlSWQ6IGVtcHR5RGF0YVNldC5kYXRhU291cmNlPy5pZFxuICAgICAgfSlcbiAgICAgIHJldHVybiBbZW1wdHlEYXRhU2V0XVxuICAgIH1cbiAgICBcbiAgICAvLyBHcm91cCByZWNvcmRzIGJ5IHRoZWlyIG9yaWdpbiBkYXRhIHNvdXJjZVxuICAgIGNvbnN0IHJlY29yZHNCeU9yaWdpbkRTID0gbmV3IE1hcDxGZWF0dXJlTGF5ZXJEYXRhU291cmNlLCBGZWF0dXJlRGF0YVJlY29yZFtdPigpXG4gICAgXG4gICAgcmVjb3Jkc1RvVXNlLmZvckVhY2gocmVjb3JkID0+IHtcbiAgICAgIGNvbnN0IHJlY29yZERTID0gKHJlY29yZCBhcyBGZWF0dXJlRGF0YVJlY29yZCkuZ2V0RGF0YVNvdXJjZT8uKCkgYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICAgICAgbGV0IG9yaWdpbkRTOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlIHwgbnVsbCA9IG51bGxcbiAgICAgIFxuICAgICAgaWYgKHJlY29yZERTKSB7XG4gICAgICAgIG9yaWdpbkRTID0gcmVjb3JkRFMuZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKT8uWzBdIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2UgfHwgcmVjb3JkRFNcbiAgICAgIH0gZWxzZSBpZiAob3V0cHV0RFMpIHtcbiAgICAgICAgLy8gRmFsbGJhY2s6IHVzZSBvdXRwdXREUydzIG9yaWdpbiBpZiByZWNvcmQgZG9lc24ndCBoYXZlIGRhdGFTb3VyY2VcbiAgICAgICAgb3JpZ2luRFMgPSBvdXRwdXREUy5nZXRPcmlnaW5EYXRhU291cmNlcygpPy5bMF0gYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSB8fCBvdXRwdXREUyBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmIChvcmlnaW5EUykge1xuICAgICAgICBpZiAoIXJlY29yZHNCeU9yaWdpbkRTLmhhcyhvcmlnaW5EUykpIHtcbiAgICAgICAgICByZWNvcmRzQnlPcmlnaW5EUy5zZXQob3JpZ2luRFMsIFtdKVxuICAgICAgICB9XG4gICAgICAgIHJlY29yZHNCeU9yaWdpbkRTLmdldChvcmlnaW5EUykucHVzaChyZWNvcmQgYXMgRmVhdHVyZURhdGFSZWNvcmQpXG4gICAgICB9XG4gICAgfSlcbiAgICBcbiAgICAvLyBDcmVhdGUgYSBEYXRhUmVjb3JkU2V0IGZvciBlYWNoIG9yaWdpbiBkYXRhIHNvdXJjZVxuICAgIGNvbnN0IGRhdGFTZXRzOiBEYXRhUmVjb3JkU2V0W10gPSBBcnJheS5mcm9tKHJlY29yZHNCeU9yaWdpbkRTLmVudHJpZXMoKSkubWFwKChbb3JpZ2luRFMsIG9yaWdpblJlY29yZHNdKSA9PiB7XG4gICAgICBjb25zdCBkYXRhU2V0OiBEYXRhUmVjb3JkU2V0ID0ge1xuICAgICAgICBkYXRhU291cmNlOiBvcmlnaW5EUywgLy8gVXNlIG9yaWdpbiBEUywgbm90IG91dHB1dERTXG4gICAgICAgIHR5cGU6ICdzZWxlY3RlZCcsXG4gICAgICAgIHJlY29yZHM6IG9yaWdpblJlY29yZHMsXG4gICAgICAgIG5hbWU6IG9yaWdpbkRTLmlkLFxuICAgICAgICBsYWJlbDogb3JpZ2luRFMuZ2V0TGFiZWwoKVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBBZGQgZmllbGRzIGlmIG5lZWRlZCAodXNlIGN1cnJlbnRJdGVtJ3MgZmllbGQgc2V0dGluZ3MpXG4gICAgICBpZiAoY3VycmVudEl0ZW0ucmVzdWx0RmllbGRzVHlwZSA9PT0gRmllbGRzVHlwZS5TZWxlY3RBdHRyaWJ1dGVzICYmIGN1cnJlbnRJdGVtLnJlc3VsdERpc3BsYXlGaWVsZHMgIT0gbnVsbCkge1xuICAgICAgICBkYXRhU2V0LmZpZWxkcyA9IGNvbWJpbmVGaWVsZHMoY3VycmVudEl0ZW0ucmVzdWx0RGlzcGxheUZpZWxkcywgY3VycmVudEl0ZW0ucmVzdWx0VGl0bGVFeHByZXNzaW9uKVxuICAgICAgfSBlbHNlIGlmIChvcmlnaW5EUyAmJiAnZ2V0UG9wdXBJbmZvJyBpbiBvcmlnaW5EUykge1xuICAgICAgICAvLyB1c2UgZmllbGRzIGluIHBvcHVwIHRlbXBsYXRlIGZyb20gb3JpZ2luIERTXG4gICAgICAgIGNvbnN0IHBvcHVwSW5mbyA9IG9yaWdpbkRTLmdldFBvcHVwSW5mbygpXG4gICAgICAgIGlmIChwb3B1cEluZm8/LmZpZWxkSW5mb3MpIHtcbiAgICAgICAgICBkYXRhU2V0LmZpZWxkcyA9IHBvcHVwSW5mby5maWVsZEluZm9zLmZpbHRlcigoZmllbGRJbmZvKSA9PiBmaWVsZEluZm8udmlzaWJsZSkubWFwKChmaWVsZEluZm8pID0+IGZpZWxkSW5mby5maWVsZE5hbWUpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmV0dXJuIGRhdGFTZXRcbiAgICB9KVxuICAgIFxuICAgIC8vIERlYnVnOiBMb2cgd2hhdCB0aGUgZmluYWwgZGF0YVNldHMgY29udGFpblxuICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgZXZlbnQ6ICdhY3Rpb25EYXRhU2V0cy1maW5hbCcsXG4gICAgICB3aWRnZXRJZDogd2lkZ2V0SWQsXG4gICAgICBkYXRhU2V0c0NvdW50OiBkYXRhU2V0cy5sZW5ndGgsXG4gICAgICB0b3RhbFJlY29yZHNDb3VudDogcmVjb3Jkc1RvVXNlLmxlbmd0aCxcbiAgICAgIGRhdGFTZXRzQnlPcmlnaW46IGRhdGFTZXRzLm1hcChkcyA9PiAoe1xuICAgICAgICBvcmlnaW5EU0lkOiBkcy5kYXRhU291cmNlPy5pZCxcbiAgICAgICAgcmVjb3Jkc0NvdW50OiBkcy5yZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgdHlwZTogZHMudHlwZVxuICAgICAgfSkpXG4gICAgfSlcbiAgICBcbiAgICAvLyBJZiB3ZSBjb3VsZG4ndCBncm91cCBieSBvcmlnaW4gKHNob3VsZG4ndCBoYXBwZW4pLCBmYWxsYmFjayB0byBzaW5nbGUgRGF0YVJlY29yZFNldCB3aXRoIG91dHB1dERTXG4gICAgaWYgKGRhdGFTZXRzLmxlbmd0aCA9PT0gMCAmJiBvdXRwdXREUykge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAnYWN0aW9uRGF0YVNldHMtZmFsbGJhY2stdG8tb3V0cHV0RFMnLFxuICAgICAgICB3aWRnZXRJZDogd2lkZ2V0SWQsXG4gICAgICAgIHJlYXNvbjogJ2NvdWxkLW5vdC1kZXRlcm1pbmUtb3JpZ2luLWRzJ1xuICAgICAgfSlcbiAgICAgIHJldHVybiBbe1xuICAgICAgICBkYXRhU291cmNlOiBvdXRwdXREUyxcbiAgICAgICAgdHlwZTogcmVjb3Jkc1RvVXNlLmxlbmd0aCA+IDAgPyAnc2VsZWN0ZWQnIDogJ2xvYWRlZCcsXG4gICAgICAgIHJlY29yZHM6IHJlY29yZHNUb1VzZSxcbiAgICAgICAgbmFtZTogb3V0cHV0RFMuaWQsXG4gICAgICAgIGxhYmVsOiBvdXRwdXREUy5nZXRMYWJlbCgpXG4gICAgICB9XVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gZGF0YVNldHNcbiAgfSwgW3NlbGVjdGVkUmVjb3Jkcywgb3V0cHV0RFMsIHF1ZXJ5RGF0YSwgY3VycmVudEl0ZW0sIHJlY29yZHMsIHdpZGdldElkXSlcblxuICAvLyBNZW1vaXplIGZpbHRlcmVkIHJlY29yZHMgdG8gcHJldmVudCB1bm5lY2Vzc2FyeSByZS1yZW5kZXJzIHRoYXQgcmVzZXQgc2Nyb2xsIHBvc2l0aW9uXG4gIC8vIFRoaXMgZW5zdXJlcyB0aGUgcmVjb3JkcyBwcm9wIG9ubHkgY2hhbmdlcyB3aGVuIHRoZSBhY3R1YWwgZGF0YSBjaGFuZ2VzLCBub3QganVzdCB0aGUgYXJyYXkgcmVmZXJlbmNlXG4gIGNvbnN0IGZpbHRlcmVkUmVjb3Jkc0Zvckxpc3QgPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICByZXR1cm4gcXVlcnlEYXRhPy5yZWNvcmRzPy5maWx0ZXIoKHJlY29yZDogRGF0YVJlY29yZCkgPT4gIXJlbW92ZWRSZWNvcmRJZHMuaGFzKHJlY29yZC5nZXRJZCgpKSkgfHwgXG4gICAgICAgICAgIChyZWNvcmRzPy5maWx0ZXIocmVjb3JkID0+ICFyZW1vdmVkUmVjb3JkSWRzLmhhcyhyZWNvcmQuZ2V0SWQoKSkpIHx8IFtdKVxuICB9LCBbcXVlcnlEYXRhPy5yZWNvcmRzLCByZWNvcmRzLCByZW1vdmVkUmVjb3JkSWRzXSlcblxuICBob29rcy51c2VFZmZlY3RPbmNlKCgpID0+IHtcbiAgICAvLyBmb2N1cyB0aGUgYmFjayBidXR0b24gd2hlbiBpdCBpcyByZW5kZXJlZFxuICAgIGZvY3VzRWxlbWVudEluS2V5Ym9hcmRNb2RlKGJhY2tCdG5SZWYuY3VycmVudClcbiAgfSlcblxuICAvKipcbiAgICogRWZmZWN0IGhvb2sgdGhhdCBydW5zIHdoZW4gbmV3IHF1ZXJ5IHJlc3VsdHMgYXJyaXZlLlxuICAgKiBSZXNldHMgcmVtb3ZlZCByZWNvcmRzLCBleHBhbmQgc3RhdGUsIGFuZCBxdWVyeSBkYXRhIGZvciB0aGUgbmV3IHJlc3VsdHMuXG4gICAqIEFsc28gaGFuZGxlcyBhdXRvLXNlbGVjdGlvbiBvZiByZWNvcmRzIHdoZW4gdGhleSBmaXJzdCBhcnJpdmUuXG4gICAqL1xuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIENoZWNrIGlmIHRoZXNlIGFyZSBuZXcgcmVjb3JkcyAoZGlmZmVyZW50IGZyb20gd2hhdCB3ZSBsYXN0IHF1ZXJpZWQpXG4gICAgLy8gSU1QT1JUQU5UOiBDb21wYXJlIGFnYWluc3Qgb3JpZ2luYWwgcXVlcnkgcmVzdWx0cywgbm90IHNlbGVjdGVkIHJlc3VsdHNcbiAgICAvLyBUaGlzIHByZXZlbnRzIHJlbW92ZWRSZWNvcmRJZHMgZnJvbSBiZWluZyByZXNldCB3aGVuIHJlY29yZHMgYXJlIHJlbW92ZWRcbiAgICBjb25zdCBjdXJyZW50UmVjb3JkSWRzID0gcmVjb3Jkcz8ubWFwKHJlY29yZCA9PiByZWNvcmQuZ2V0SWQoKSkgfHwgW11cbiAgICBjb25zdCByZWNvcmRzQ2hhbmdlZCA9IGN1cnJlbnRSZWNvcmRJZHMubGVuZ3RoICE9PSBsYXN0UXVlcnlSZWNvcmRJZHNSZWYuY3VycmVudC5sZW5ndGggfHxcbiAgICAgIGN1cnJlbnRSZWNvcmRJZHMuc29tZSgoaWQsIGluZGV4KSA9PiBpZCAhPT0gbGFzdFF1ZXJ5UmVjb3JkSWRzUmVmLmN1cnJlbnRbaW5kZXhdKVxuICAgIFxuICAgIC8vIERlYnVnOiBMb2cgd2hlbiByZWNvcmRzIHByb3AgY2hhbmdlc1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgZXZlbnQ6ICdyZWNvcmRzLXByb3AtY2hhbmdlZCcsXG4gICAgICB3aWRnZXRJZDogd2lkZ2V0SWQsXG4gICAgICByZWNvcmRzQ291bnQ6IHJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgd2lsbFNldFF1ZXJ5RGF0YTogcmVjb3JkcyAmJiByZWNvcmRzLmxlbmd0aCA+IDAsXG4gICAgICByZW1vdmVkUmVjb3JkSWRzQ291bnQ6IHJlbW92ZWRSZWNvcmRJZHMuc2l6ZSxcbiAgICAgIGhhc1NlbGVjdGVkUmVmOiBoYXNTZWxlY3RlZFJlZi5jdXJyZW50LFxuICAgICAgcmVjb3Jkc0NoYW5nZWQ6IHJlY29yZHNDaGFuZ2VkLFxuICAgICAgbGFzdFF1ZXJ5UmVjb3JkSWRzQ291bnQ6IGxhc3RRdWVyeVJlY29yZElkc1JlZi5jdXJyZW50Lmxlbmd0aCxcbiAgICAgIGN1cnJlbnRSZWNvcmRJZHNDb3VudDogY3VycmVudFJlY29yZElkcy5sZW5ndGhcbiAgICB9KVxuICAgIFxuICAgIC8vIElNUE9SVEFOVDogT25seSByZXNldCByZW1vdmVkIHJlY29yZHMgaWYgdGhpcyBpcyB0cnVseSBhIE5FVyBxdWVyeSB3aXRoIGRpZmZlcmVudCByZWNvcmRzXG4gICAgLy8gRG9uJ3QgcmVzZXQgaWYgcmVjb3JkcyBhcmUgdGhlIHNhbWUgKGp1c3QgYSByZS1yZW5kZXIgb3IgbGF6eSBsb2FkKVxuICAgIGlmIChyZWNvcmRzQ2hhbmdlZCkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAncmVjb3Jkcy10cnVseS1jaGFuZ2VkLXJlc2V0dGluZy1yZW1vdmVkJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHdpZGdldElkLFxuICAgICAgICBvbGRSZWNvcmRJZHNDb3VudDogbGFzdFF1ZXJ5UmVjb3JkSWRzUmVmLmN1cnJlbnQubGVuZ3RoLFxuICAgICAgICBuZXdSZWNvcmRJZHNDb3VudDogY3VycmVudFJlY29yZElkcy5sZW5ndGhcbiAgICAgIH0pXG4gICAgICBzZXRSZW1vdmVkUmVjb3JkSWRzKG5ldyBTZXQoKSlcbiAgICAgIC8vIFVwZGF0ZSB0aGUgb3JpZ2luYWwgcXVlcnkgcmVjb3JkIElEcyByZWZcbiAgICAgIGxhc3RRdWVyeVJlY29yZElkc1JlZi5jdXJyZW50ID0gY3VycmVudFJlY29yZElkc1xuICAgIH0gZWxzZSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdyZWNvcmRzLW5vdC1jaGFuZ2VkLXByZXNlcnZpbmctcmVtb3ZlZCcsXG4gICAgICAgIHdpZGdldElkOiB3aWRnZXRJZCxcbiAgICAgICAgcmVjb3JkSWRzQ291bnQ6IGN1cnJlbnRSZWNvcmRJZHMubGVuZ3RoLFxuICAgICAgICByZW1vdmVkUmVjb3JkSWRzQ291bnQ6IHJlbW92ZWRSZWNvcmRJZHMuc2l6ZVxuICAgICAgfSlcbiAgICB9XG4gICAgXG4gICAgLy8gUmVzZXQgZXhwYW5kIGFsbCB0byBxdWVyeUl0ZW0ncyByZXN1bHRFeHBhbmRCeURlZmF1bHQgc2V0dGluZ1xuICAgIHNldEV4cGFuZEFsbChjdXJyZW50SXRlbS5yZXN1bHRFeHBhbmRCeURlZmF1bHQgPz8gZmFsc2UpXG4gICAgc2V0UXVlcnlEYXRhKHtcbiAgICAgIHJlY29yZHMsXG4gICAgICBwYWdlOiAxXG4gICAgfSlcbiAgICBcbiAgICAvLyBPbmx5IGF1dG8tc2VsZWN0IHJlY29yZHMgaWY6XG4gICAgLy8gMS4gV2UgaGF2ZSByZWNvcmRzIGFuZCBvdXRwdXREU1xuICAgIC8vIDIuIFdlIGhhdmVuJ3QgYWxyZWFkeSBzZWxlY3RlZCB0aGVzZSByZWNvcmRzIChoYXNTZWxlY3RlZFJlZiBpcyBmYWxzZSlcbiAgICAvLyAzLiBPUiB0aGUgcmVjb3JkcyBoYXZlIGFjdHVhbGx5IGNoYW5nZWQgKG5ldyBxdWVyeSByZXN1bHRzKVxuICAgIC8vIDQuIEFORCB3ZSBkb24ndCBoYXZlIGFueSByZW1vdmVkIHJlY29yZHMgKHRvIHByZXZlbnQgcmUtc2VsZWN0aW5nIHJlbW92ZWQgb25lcylcbiAgICBpZiAocmVjb3JkcyAmJiByZWNvcmRzLmxlbmd0aCA+IDAgJiYgb3V0cHV0RFMgJiYgXG4gICAgICAgICghaGFzU2VsZWN0ZWRSZWYuY3VycmVudCB8fCByZWNvcmRzQ2hhbmdlZCkgJiYgXG4gICAgICAgIHJlbW92ZWRSZWNvcmRJZHMuc2l6ZSA9PT0gMCkge1xuICAgICAgY29uc3QgcmVjb3JkSWRzID0gcmVjb3Jkcy5tYXAocmVjb3JkID0+IHJlY29yZC5nZXRJZCgpKVxuICAgICAgY29uc3QgZmRyID0gcmVjb3JkcyBhcyBGZWF0dXJlRGF0YVJlY29yZFtdXG4gICAgICBcbiAgICAgIC8vIFNlbGVjdCByZWNvcmRzIGFuZCBwdWJsaXNoIHNlbGVjdGlvbiBtZXNzYWdlIHVzaW5nIHV0aWxpdHkgZnVuY3Rpb25cbiAgICAgIC8vIFVzZSBhc3luYyBJSUZFIHNpbmNlIHVzZUVmZmVjdCBjYW4ndCBiZSBhc3luY1xuICAgICAgOyhhc3luYyAoKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgc2V0U2VsZWN0aW9uRXJyb3IobnVsbCkgLy8gQ2xlYXIgcHJldmlvdXMgZXJyb3JzXG4gICAgICAgICAgYXdhaXQgc2VsZWN0UmVjb3Jkc0FuZFB1Ymxpc2goXG4gICAgICAgICAgICB3aWRnZXRJZCwgXG4gICAgICAgICAgICBvdXRwdXREUywgXG4gICAgICAgICAgICByZWNvcmRJZHMsIFxuICAgICAgICAgICAgZmRyLCBcbiAgICAgICAgICAgIGZhbHNlLCBcbiAgICAgICAgICAgIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQsIFxuICAgICAgICAgICAgZ3JhcGhpY3NMYXllciwgXG4gICAgICAgICAgICBtYXBWaWV3XG4gICAgICAgICAgKVxuICAgICAgICAgIGhhc1NlbGVjdGVkUmVmLmN1cnJlbnQgPSB0cnVlIC8vIE1hcmsgYXMgc2VsZWN0ZWRcbiAgICAgICAgICBsYXN0U2VsZWN0ZWRSZWNvcmRzUmVmLmN1cnJlbnQgPSByZWNvcmRJZHMgLy8gU3RvcmUgdGhlIElEcyB3ZSBzZWxlY3RlZFxuICAgICAgICAgIGxhc3RTZWxlY3RlZEZlYXR1cmVSZWNvcmRzUmVmLmN1cnJlbnQgPSBmZHIgLy8gU3RvcmUgdGhlIGZ1bGwgcmVjb3JkcyBmb3IgcG90ZW50aWFsIHJlc3RvcmF0aW9uXG4gICAgICAgICAgXG4gICAgICAgICAgLy8gTm90aWZ5IFdpZGdldCBhbmQgSGVscGVyU2ltcGxlIG9mIHNlbGVjdGlvbiBjaGFuZ2VcbiAgICAgICAgICBkaXNwYXRjaFNlbGVjdGlvbkV2ZW50KHdpZGdldElkLCByZWNvcmRJZHMsIG91dHB1dERTLCBxdWVyeUl0ZW0uY29uZmlnSWQpXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIHNlbGVjdCBxdWVyeSByZXN1bHRzJ1xuICAgICAgICAgIHNldFNlbGVjdGlvbkVycm9yKGVycm9yTWVzc2FnZSlcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICAgICAgICBldmVudDogJ3NlbGVjdGlvbi1mYWlsZWQtcXVlcnktcmVzdWx0JyxcbiAgICAgICAgICAgIGVycm9yOiBlcnJvck1lc3NhZ2UsXG4gICAgICAgICAgICBlcnJvclN0YWNrOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICByZWNvcmRDb3VudDogcmVjb3JkSWRzLmxlbmd0aFxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH0pKClcbiAgICB9IGVsc2UgaWYgKHJlY29yZHNDaGFuZ2VkICYmIHJlY29yZHMgJiYgcmVjb3Jkcy5sZW5ndGggPT09IDApIHtcbiAgICAgIC8vIElmIHJlY29yZHMgd2VyZSBjbGVhcmVkLCByZXNldCB0aGUgc2VsZWN0aW9uIGZsYWdcbiAgICAgIGhhc1NlbGVjdGVkUmVmLmN1cnJlbnQgPSBmYWxzZVxuICAgICAgbGFzdFNlbGVjdGVkUmVjb3Jkc1JlZi5jdXJyZW50ID0gW11cbiAgICAgIHNldFNlbGVjdGlvbkVycm9yKG51bGwpIC8vIENsZWFyIGVycm9ycyB3aGVuIGNsZWFyaW5nIHJlY29yZHNcbiAgICB9IGVsc2UgaWYgKHJlbW92ZWRSZWNvcmRJZHMuc2l6ZSA+IDApIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ3NraXBwaW5nLXJlc2VsZWN0aW9uLWR1ZS10by1yZW1vdmVkLXJlY29yZHMnLFxuICAgICAgICB3aWRnZXRJZDogd2lkZ2V0SWQsXG4gICAgICAgIHJlbW92ZWRSZWNvcmRJZHNDb3VudDogcmVtb3ZlZFJlY29yZElkcy5zaXplLFxuICAgICAgICByZWNvcmRzQ291bnQ6IHJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICBoYXNTZWxlY3RlZFJlZjogaGFzU2VsZWN0ZWRSZWYuY3VycmVudCxcbiAgICAgICAgcmVjb3Jkc0NoYW5nZWQ6IHJlY29yZHNDaGFuZ2VkXG4gICAgICB9KVxuICAgIH1cbiAgfSwgW3JlY29yZHMsIG91dHB1dERTLCB3aWRnZXRJZCwgcXVlcnlJdGVtLmNvbmZpZ0lkLCBxdWVyeUl0ZW0ucmVzdWx0RXhwYW5kQnlEZWZhdWx0LCByZW1vdmVkUmVjb3JkSWRzXSlcblxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIGNsZWFyIHNlbGVjdGlvbiB3aGVuIHJlc3VsdFNlbGVjdE1vZGUgY2hhbmdlZFxuICAgIGlmIChvdXRwdXREUykge1xuICAgICAgY2xlYXJTZWxlY3Rpb25JbkRhdGFTb3VyY2VzKG91dHB1dERTLCB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0LCBncmFwaGljc0xheWVyKVxuICAgICAgcHVibGlzaFNlbGVjdGlvbk1lc3NhZ2Uod2lkZ2V0SWQsIFtdLCBvdXRwdXREUywgdHJ1ZSlcbiAgICB9XG4gIH0sIFtxdWVyeUl0ZW0ucmVzdWx0U2VsZWN0TW9kZSwgb3V0cHV0RFMsIHdpZGdldElkLCB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0LCBncmFwaGljc0xheWVyXSlcblxuICAvLyBVcGRhdGUgZXhwYW5kQWxsIHdoZW4gcXVlcnlJdGVtIGNoYW5nZXMgKGUuZy4sIHN3aXRjaGluZyBiZXR3ZWVuIHF1ZXJpZXMpXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgbmV3RXhwYW5kQWxsID0gcXVlcnlJdGVtLnJlc3VsdEV4cGFuZEJ5RGVmYXVsdCA/PyBmYWxzZVxuICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgZXZlbnQ6ICdleHBhbmRBbGwtcmVzZXQtYnktcXVlcnlJdGVtLWNoYW5nZScsXG4gICAgICB3aWRnZXRJZCxcbiAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBxdWVyeUl0ZW0uY29uZmlnSWQsXG4gICAgICByZXN1bHRFeHBhbmRCeURlZmF1bHQ6IHF1ZXJ5SXRlbS5yZXN1bHRFeHBhbmRCeURlZmF1bHQsXG4gICAgICBuZXdFeHBhbmRBbGwsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIHNldEV4cGFuZEFsbChuZXdFeHBhbmRBbGwpXG4gICAgLy8gUmVzZXQgaW5kaXZpZHVhbCBleHBhbnNpb24gc3RhdGVzIHdoZW4gcXVlcnkgY2hhbmdlc1xuICAgIHNldEl0ZW1FeHBhbmRTdGF0ZXMobmV3IE1hcCgpKVxuICB9LCBbcXVlcnlJdGVtLmNvbmZpZ0lkXSlcblxuICAvKipcbiAgICogTW9uaXRvciBvcmlnaW4gZGF0YSBzb3VyY2Ugc2VsZWN0aW9uIGNoYW5nZXMgdG8gZGV0ZWN0IHdoZW4gb3RoZXIgd2lkZ2V0cyAobGlrZSBtYXAgaWRlbnRpZnkpXG4gICAqIGNsZWFyIG91ciBzZWxlY3Rpb25zLiBFbmhhbmNlZCB3aXRoIGlkZW50aWZ5IHBvcHVwIGRldGVjdGlvbiBmb3IgdGVzdGluZyBzY2VuYXJpb3MuXG4gICAqIFdhdGNoZXMgdGhlIG9yaWdpbiBkYXRhIHNvdXJjZSdzIHNlbGVjdGlvbiBzdGF0ZSBkaXJlY3RseSB2aWEgcG9sbGluZy5cbiAgICovXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFvdXRwdXREUykgcmV0dXJuXG5cbiAgICBjb25zdCBvcmlnaW5EUyA9IG91dHB1dERTLmdldE9yaWdpbkRhdGFTb3VyY2VzKCk/LlswXSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gICAgaWYgKCFvcmlnaW5EUykgcmV0dXJuXG5cbiAgICBjb25zdCBvcmlnaW5EU0lkID0gb3JpZ2luRFMuaWRcbiAgICBsZXQgcHJldmlvdXNTZWxlY3RlZElkczogc3RyaW5nW10gPSBbXVxuICAgIGxldCBpZGVudGlmeVBvcHVwV2FzT3BlbiA9IGZhbHNlXG4gICAgbGV0IGxhc3RMb2dUaW1lID0gMFxuICAgIGNvbnN0IExPR19USFJPVFRMRV9NUyA9IDEwMDAgLy8gVGhyb3R0bGUgbG9ncyB0byBvbmNlIHBlciBzZWNvbmRcbiAgICBcbiAgICAvLyBJbml0aWFsIGNoZWNrXG4gICAgcHJldmlvdXNTZWxlY3RlZElkcyA9IG9yaWdpbkRTLmdldFNlbGVjdGVkUmVjb3JkSWRzKCkgfHwgW11cbiAgICBpZGVudGlmeVBvcHVwV2FzT3BlbiA9IGlzSWRlbnRpZnlQb3B1cE9wZW4oKVxuXG4gICAgLy8gV2F0Y2ggZm9yIHNlbGVjdGlvbiBjaGFuZ2VzIG9uIHRoZSBvcmlnaW4gZGF0YSBzb3VyY2VcbiAgICBjb25zdCBjaGVja1NlbGVjdGlvbiA9ICgpID0+IHtcbiAgICAgIGNvbnN0IGN1cnJlbnRTZWxlY3RlZElkcyA9IG9yaWdpbkRTLmdldFNlbGVjdGVkUmVjb3JkSWRzKCkgfHwgW11cbiAgICAgIGNvbnN0IG91ckV4cGVjdGVkSWRzID0gbGFzdFNlbGVjdGVkUmVjb3Jkc1JlZi5jdXJyZW50XG4gICAgICBjb25zdCBoYXNPdXJTZWxlY3Rpb24gPSBvdXJFeHBlY3RlZElkcy5sZW5ndGggPiAwXG4gICAgICBjb25zdCBpZGVudGlmeVBvcHVwSXNPcGVuID0gaXNJZGVudGlmeVBvcHVwT3BlbigpXG4gICAgICBcbiAgICAgIC8vIERldGVjdCBpZiBzZWxlY3Rpb24gd2FzIGNsZWFyZWQgb3IgY2hhbmdlZCBleHRlcm5hbGx5XG4gICAgICBjb25zdCB3YXNDbGVhcmVkID0gcHJldmlvdXNTZWxlY3RlZElkcy5sZW5ndGggPiAwICYmIGN1cnJlbnRTZWxlY3RlZElkcy5sZW5ndGggPT09IDBcbiAgICAgIGNvbnN0IHdhc0NoYW5nZWQgPSBwcmV2aW91c1NlbGVjdGVkSWRzLmxlbmd0aCA+IDAgJiYgXG4gICAgICAgIChjdXJyZW50U2VsZWN0ZWRJZHMubGVuZ3RoICE9PSBwcmV2aW91c1NlbGVjdGVkSWRzLmxlbmd0aCB8fFxuICAgICAgICAgIWN1cnJlbnRTZWxlY3RlZElkcy5ldmVyeShpZCA9PiBwcmV2aW91c1NlbGVjdGVkSWRzLmluY2x1ZGVzKGlkKSkpXG4gICAgICBcbiAgICAgIC8vIE5FVzogRGV0ZWN0IGlmIHNlbGVjdGlvbiB3YXMgYWRkZWQgKHdlbnQgZnJvbSBlbXB0eSB0byBoYXZpbmcgcmVjb3JkcylcbiAgICAgIGNvbnN0IHdhc0FkZGVkID0gcHJldmlvdXNTZWxlY3RlZElkcy5sZW5ndGggPT09IDAgJiYgY3VycmVudFNlbGVjdGVkSWRzLmxlbmd0aCA+IDBcbiAgICAgIFxuICAgICAgLy8gVHJhY2sgaWRlbnRpZnkgcG9wdXAgc3RhdGUgY2hhbmdlc1xuICAgICAgY29uc3QgaWRlbnRpZnlQb3B1cEp1c3RPcGVuZWQgPSAhaWRlbnRpZnlQb3B1cFdhc09wZW4gJiYgaWRlbnRpZnlQb3B1cElzT3BlblxuICAgICAgY29uc3QgaWRlbnRpZnlQb3B1cEp1c3RDbG9zZWQgPSBpZGVudGlmeVBvcHVwV2FzT3BlbiAmJiAhaWRlbnRpZnlQb3B1cElzT3BlblxuICAgICAgY29uc3QgaWRlbnRpZnlQb3B1cFN0aWxsT3BlbiA9IGlkZW50aWZ5UG9wdXBXYXNPcGVuICYmIGlkZW50aWZ5UG9wdXBJc09wZW5cbiAgICAgIFxuICAgICAgLy8gTG9nIGlkZW50aWZ5IHBvcHVwIHN0YXRlIGNoYW5nZXNcbiAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KClcbiAgICAgIGlmIChpZGVudGlmeVBvcHVwSnVzdE9wZW5lZCB8fCBpZGVudGlmeVBvcHVwSnVzdENsb3NlZCkge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1NFTEVDVElPTicsIHtcbiAgICAgICAgICBldmVudDogaWRlbnRpZnlQb3B1cEp1c3RPcGVuZWQgPyAnaWRlbnRpZnktcG9wdXAtb3BlbmVkJyA6ICdpZGVudGlmeS1wb3B1cC1jbG9zZWQnLFxuICAgICAgICAgIG9yaWdpbkRTSWQsXG4gICAgICAgICAgb3VyU2VsZWN0aW9uQ291bnQ6IG91ckV4cGVjdGVkSWRzLmxlbmd0aCxcbiAgICAgICAgICBjdXJyZW50U2VsZWN0aW9uQ291bnQ6IGN1cnJlbnRTZWxlY3RlZElkcy5sZW5ndGgsXG4gICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgICAgfSlcbiAgICAgICAgXG4gICAgICAgIC8vIElmIGlkZW50aWZ5IHBvcHVwIGp1c3QgY2xvc2VkIGFuZCBzZWxlY3Rpb24gd2FzIGNsZWFyZWQsIGRpc3BhdGNoIHJlc3RvcmUgZXZlbnRcbiAgICAgICAgaWYgKGlkZW50aWZ5UG9wdXBKdXN0Q2xvc2VkICYmIHdhc0NsZWFyZWQgJiYgaGFzT3VyU2VsZWN0aW9uICYmIG91ckV4cGVjdGVkSWRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBjb25zdCByZXN0b3JlRXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoUkVTVE9SRV9PTl9JREVOVElGWV9DTE9TRV9FVkVOVCwge1xuICAgICAgICAgICAgZGV0YWlsOiB7XG4gICAgICAgICAgICAgIHdpZGdldElkLFxuICAgICAgICAgICAgICByZWNvcmRJZHM6IG91ckV4cGVjdGVkSWRzLFxuICAgICAgICAgICAgICBvdXRwdXREc0lkOiBvdXRwdXREUy5pZCxcbiAgICAgICAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICAgICAgICBjYW5jZWxhYmxlOiB0cnVlXG4gICAgICAgICAgfSlcbiAgICAgICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChyZXN0b3JlRXZlbnQpXG4gICAgICAgICAgXG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdTRUxFQ1RJT04nLCB7XG4gICAgICAgICAgICBldmVudDogJ2lkZW50aWZ5LXBvcHVwLWNsb3NlZC1yZXN0b3JlLXJlcXVlc3RlZCcsXG4gICAgICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgICAgIHJlY29yZENvdW50OiBvdXJFeHBlY3RlZElkcy5sZW5ndGgsXG4gICAgICAgICAgICBvdXRwdXREc0lkOiBvdXRwdXREUy5pZCxcbiAgICAgICAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBxdWVyeUl0ZW0uY29uZmlnSWRcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIExvZyBBTEwgc2VsZWN0aW9uIGNoYW5nZXMgKG5vdCBqdXN0IHdoZW4gd2UgaGF2ZSBvdXIgb3duIHNlbGVjdGlvbilcbiAgICAgIGlmICh3YXNDbGVhcmVkIHx8IHdhc0NoYW5nZWQgfHwgd2FzQWRkZWQpIHtcbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhpcyBtYXRjaGVzIG91ciBleHBlY3RlZCBzZWxlY3Rpb25cbiAgICAgICAgY29uc3QgbWF0Y2hlc091clNlbGVjdGlvbiA9IGhhc091clNlbGVjdGlvbiAmJiBcbiAgICAgICAgICBvdXJFeHBlY3RlZElkcy5sZW5ndGggPT09IGN1cnJlbnRTZWxlY3RlZElkcy5sZW5ndGggJiZcbiAgICAgICAgICBvdXJFeHBlY3RlZElkcy5ldmVyeShpZCA9PiBjdXJyZW50U2VsZWN0ZWRJZHMuaW5jbHVkZXMoaWQpKVxuICAgICAgICBcbiAgICAgICAgLy8gRGV0ZXJtaW5lIHdoYXQgd291bGQgaGFwcGVuIChmb3IgdGVzdGluZy9sb2dnaW5nKVxuICAgICAgICBjb25zdCB3b3VsZFJlc3RvcmUgPSB3YXNDbGVhcmVkICYmIGlkZW50aWZ5UG9wdXBJc09wZW4gJiYgaGFzT3VyU2VsZWN0aW9uICYmIG91ckV4cGVjdGVkSWRzLmxlbmd0aCA+IDBcbiAgICAgICAgXG4gICAgICAgIC8vIERldGVybWluZSBzY2VuYXJpb1xuICAgICAgICBsZXQgc2NlbmFyaW8gPSAnVW5rbm93bidcbiAgICAgICAgaWYgKHdhc0FkZGVkICYmICFoYXNPdXJTZWxlY3Rpb24pIHtcbiAgICAgICAgICBzY2VuYXJpbyA9ICdURVNUIFNDRU5BUklPIDQ6IEFub3RoZXIgd2lkZ2V0IHNlbGVjdGVkIHJlY29yZHMgKHdlIGhhdmUgbm8gc2VsZWN0aW9uKSdcbiAgICAgICAgfSBlbHNlIGlmICh3YXNDaGFuZ2VkICYmICFtYXRjaGVzT3VyU2VsZWN0aW9uICYmICFoYXNPdXJTZWxlY3Rpb24pIHtcbiAgICAgICAgICBzY2VuYXJpbyA9ICdURVNUIFNDRU5BUklPIDU6IEFub3RoZXIgd2lkZ2V0IGNoYW5nZWQgc2VsZWN0aW9uICh3ZSBoYXZlIG5vIHNlbGVjdGlvbiknXG4gICAgICAgIH0gZWxzZSBpZiAod2FzQ2hhbmdlZCAmJiAhbWF0Y2hlc091clNlbGVjdGlvbiAmJiBoYXNPdXJTZWxlY3Rpb24pIHtcbiAgICAgICAgICBzY2VuYXJpbyA9IGlkZW50aWZ5UG9wdXBJc09wZW5cbiAgICAgICAgICAgID8gJ1RFU1QgU0NFTkFSSU8gMjogUXVlcnkg4oaSIElkZW50aWZ5IChzZWxlY3Rpb24gY2hhbmdlZCwgbm90IGNsZWFyZWQpIOKGkiBXb3VsZCBOT1QgcmVzdG9yZSdcbiAgICAgICAgICAgIDogJ1RFU1QgU0NFTkFSSU8gMzogUXVlcnkg4oaSIEFub3RoZXIgUXVlcnlTaW1wbGUgd2lkZ2V0IOKGkiBXb3VsZCBOT1QgcmVzdG9yZSdcbiAgICAgICAgfSBlbHNlIGlmICh3YXNDbGVhcmVkICYmIGhhc091clNlbGVjdGlvbikge1xuICAgICAgICAgIHNjZW5hcmlvID0gaWRlbnRpZnlQb3B1cElzT3BlblxuICAgICAgICAgICAgPyAnVEVTVCBTQ0VOQVJJTyAxOiBRdWVyeSDihpIgSWRlbnRpZnkg4oaSIFdvdWxkIHJlc3RvcmUnXG4gICAgICAgICAgICA6ICdURVNUIFNDRU5BUklPIDM6IFF1ZXJ5IOKGkiBBbm90aGVyIFF1ZXJ5U2ltcGxlIHdpZGdldCAoY2xlYXJlZCkg4oaSIFdvdWxkIE5PVCByZXN0b3JlJ1xuICAgICAgICB9IGVsc2UgaWYgKHdhc0FkZGVkICYmIGhhc091clNlbGVjdGlvbikge1xuICAgICAgICAgIHNjZW5hcmlvID0gbWF0Y2hlc091clNlbGVjdGlvblxuICAgICAgICAgICAgPyAnT3VyIHdpZGdldCBzZWxlY3RlZCByZWNvcmRzJ1xuICAgICAgICAgICAgOiAnQW5vdGhlciB3aWRnZXQgc2VsZWN0ZWQgZGlmZmVyZW50IHJlY29yZHMnXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIExvZyBkZXRlY3Rpb24gd2l0aCBpZGVudGlmeSBwb3B1cCBzdGF0ZSAodGhyb3R0bGVkKVxuICAgICAgICBpZiAobm93IC0gbGFzdExvZ1RpbWUgPiBMT0dfVEhST1RUTEVfTVMpIHtcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1NFTEVDVElPTicsIHtcbiAgICAgICAgICAgIGV2ZW50OiB3YXNDbGVhcmVkID8gJ3NlbGVjdGlvbi1jbGVhcmVkJyA6IHdhc0NoYW5nZWQgPyAnc2VsZWN0aW9uLWNoYW5nZWQnIDogJ3NlbGVjdGlvbi1hZGRlZCcsXG4gICAgICAgICAgICBvcmlnaW5EU0lkLFxuICAgICAgICAgICAgb3VyRXhwZWN0ZWRDb3VudDogb3VyRXhwZWN0ZWRJZHMubGVuZ3RoLFxuICAgICAgICAgICAgcHJldmlvdXNTZWxlY3RlZENvdW50OiBwcmV2aW91c1NlbGVjdGVkSWRzLmxlbmd0aCxcbiAgICAgICAgICAgIGN1cnJlbnRTZWxlY3RlZENvdW50OiBjdXJyZW50U2VsZWN0ZWRJZHMubGVuZ3RoLFxuICAgICAgICAgICAgd2FzQ2xlYXJlZCxcbiAgICAgICAgICAgIHdhc0NoYW5nZWQsXG4gICAgICAgICAgICB3YXNBZGRlZCxcbiAgICAgICAgICAgIGhhc091clNlbGVjdGlvbixcbiAgICAgICAgICAgIG1hdGNoZXNPdXJTZWxlY3Rpb24sXG4gICAgICAgICAgICBpZGVudGlmeVBvcHVwSXNPcGVuLFxuICAgICAgICAgICAgaWRlbnRpZnlQb3B1cEp1c3RPcGVuZWQsXG4gICAgICAgICAgICBpZGVudGlmeVBvcHVwU3RpbGxPcGVuLFxuICAgICAgICAgICAgaWRlbnRpZnlQb3B1cEp1c3RDbG9zZWQsXG4gICAgICAgICAgICB3b3VsZFJlc3RvcmUsXG4gICAgICAgICAgICBvdXJFeHBlY3RlZElkczogb3VyRXhwZWN0ZWRJZHMuc2xpY2UoMCwgNSksXG4gICAgICAgICAgICBwcmV2aW91c1NlbGVjdGVkSWRzOiBwcmV2aW91c1NlbGVjdGVkSWRzLnNsaWNlKDAsIDUpLFxuICAgICAgICAgICAgY3VycmVudFNlbGVjdGVkSWRzOiBjdXJyZW50U2VsZWN0ZWRJZHMuc2xpY2UoMCwgNSksXG4gICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgIG5vdGU6IHdvdWxkUmVzdG9yZSBcbiAgICAgICAgICAgICAgPyAnV291bGQgcmVzdG9yZSBzZWxlY3Rpb24gKGNsZWFyZWQgKyBpZGVudGlmeSBwb3B1cCBvcGVuKSdcbiAgICAgICAgICAgICAgOiBpZGVudGlmeVBvcHVwSXNPcGVuICYmIHdhc0NoYW5nZWRcbiAgICAgICAgICAgICAgICA/ICdJZGVudGlmeSBwb3B1cCBvcGVuIGJ1dCBzZWxlY3Rpb24gY2hhbmdlZCAobm90IGNsZWFyZWQpIC0gd291bGQgbm90IHJlc3RvcmUnXG4gICAgICAgICAgICAgICAgOiB3YXNDbGVhcmVkICYmICFpZGVudGlmeVBvcHVwSXNPcGVuXG4gICAgICAgICAgICAgICAgICA/ICdTZWxlY3Rpb24gY2xlYXJlZCwgY2hlY2tpbmcgaWYgaWRlbnRpZnkgcG9wdXAgb3BlbnMuLi4nXG4gICAgICAgICAgICAgICAgICA6IHdhc0FkZGVkXG4gICAgICAgICAgICAgICAgICAgID8gaGFzT3VyU2VsZWN0aW9uICYmIG1hdGNoZXNPdXJTZWxlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgICA/ICdPdXIgd2lkZ2V0IHNlbGVjdGVkIHJlY29yZHMnXG4gICAgICAgICAgICAgICAgICAgICAgOiBoYXNPdXJTZWxlY3Rpb24gJiYgIW1hdGNoZXNPdXJTZWxlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgICAgID8gJ0Fub3RoZXIgd2lkZ2V0IHNlbGVjdGVkIGRpZmZlcmVudCByZWNvcmRzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgOiAnU2VsZWN0aW9uIGFkZGVkIChieSBhbm90aGVyIHdpZGdldCBvciBleHRlcm5hbCBzb3VyY2UpJ1xuICAgICAgICAgICAgICAgICAgICA6ICdObyBpZGVudGlmeSBwb3B1cCBkZXRlY3RlZCAtIHdvdWxkIG5vdCByZXN0b3JlJ1xuICAgICAgICAgIH0pXG4gICAgICAgICAgXG4gICAgICAgICAgbGFzdExvZ1RpbWUgPSBub3dcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICBwcmV2aW91c1NlbGVjdGVkSWRzID0gWy4uLmN1cnJlbnRTZWxlY3RlZElkc11cbiAgICAgIGlkZW50aWZ5UG9wdXBXYXNPcGVuID0gaWRlbnRpZnlQb3B1cElzT3BlblxuICAgIH1cblxuICAgIC8vIENoZWNrIHBlcmlvZGljYWxseSAoZXZlcnkgNTAwbXMpXG4gICAgY29uc3QgaW50ZXJ2YWxJZCA9IHNldEludGVydmFsKGNoZWNrU2VsZWN0aW9uLCA1MDApXG4gICAgXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWxJZClcbiAgICB9XG4gIH0sIFtvdXRwdXREU10pXG5cbiAgLyoqXG4gICAqIENsZWFycyBhbGwgcmVzdWx0cy4gUmVzZXRzIGxvY2FsIHN0YXRlIGFuZCBkZWxlZ2F0ZXMgdG8gcGFyZW50J3MgY2xlYXJSZXN1bHQgbWV0aG9kLlxuICAgKi9cbiAgY29uc3QgY2xlYXJSZXN1bHRzID0gYXN5bmMgKCkgPT4ge1xuICAgIC8vIExvZyBoYXNoIHN0YXRlIGJlZm9yZSBjbGVhcmluZ1xuICAgIGNvbnN0IGhhc2hCZWZvcmUgPSB3aW5kb3cubG9jYXRpb24uaGFzaC5zdWJzdHJpbmcoMSlcbiAgICBjb25zdCB1cmxQYXJhbXNCZWZvcmUgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKGhhc2hCZWZvcmUpXG4gICAgY29uc3QgaGFzaFBhcmFtc0JlZm9yZTogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfSA9IHt9XG4gICAgdXJsUGFyYW1zQmVmb3JlLmZvckVhY2goKHZhbHVlLCBrZXkpID0+IHtcbiAgICAgIGhhc2hQYXJhbXNCZWZvcmVba2V5XSA9IHZhbHVlXG4gICAgfSlcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gnLCB7XG4gICAgICBldmVudDogJ2NsZWFyUmVzdWx0cy1jYWxsZWQnLFxuICAgICAgd2lkZ2V0SWQsXG4gICAgICBoYXNoQmVmb3JlOiBoYXNoQmVmb3JlLFxuICAgICAgaGFzaFBhcmFtc0JlZm9yZTogaGFzaFBhcmFtc0JlZm9yZSxcbiAgICAgIGhhc2hQYXJhbXNDb3VudDogT2JqZWN0LmtleXMoaGFzaFBhcmFtc0JlZm9yZSkubGVuZ3RoLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICAvLyBSZXNldCBsb2NhbCBzZWxlY3Rpb24gZmxhZ3NcbiAgICBoYXNTZWxlY3RlZFJlZi5jdXJyZW50ID0gZmFsc2VcbiAgICBsYXN0U2VsZWN0ZWRSZWNvcmRzUmVmLmN1cnJlbnQgPSBbXVxuICAgIC8vIFJlc2V0IGxvY2FsIHF1ZXJ5IGRhdGEgc3RhdGVcbiAgICBzZXRRdWVyeURhdGEobnVsbClcbiAgICBzZXRSZW1vdmVkUmVjb3JkSWRzKG5ldyBTZXQoKSlcbiAgICAvLyBDbGVhciBlcnJvciBzdGF0ZSB3aGVuIGNsZWFyaW5nIHJlc3VsdHNcbiAgICBzZXRTZWxlY3Rpb25FcnJvcihudWxsKVxuICAgIC8vIERlbGVnYXRlIHRvIHBhcmVudCdzIGNsZWFyUmVzdWx0IG1ldGhvZCAodmlhIG9uTmF2QmFjaykgd2hpY2ggaGFuZGxlc1xuICAgIC8vIGNsZWFyaW5nIHNlbGVjdGlvbiBmcm9tIG1hcCwgcHVibGlzaGluZyBtZXNzYWdlcywgZXRjLlxuICAgIGF3YWl0IG9uTmF2QmFjayh0cnVlKVxuICAgIFxuICAgIC8vIExvZyBoYXNoIHN0YXRlIGFmdGVyIGNsZWFyaW5nICh3aXRoIGRlbGF5IHRvIGNhdGNoIGFzeW5jIHVwZGF0ZXMpXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBjb25zdCBoYXNoQWZ0ZXIgPSB3aW5kb3cubG9jYXRpb24uaGFzaC5zdWJzdHJpbmcoMSlcbiAgICAgIGNvbnN0IHVybFBhcmFtc0FmdGVyID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhoYXNoQWZ0ZXIpXG4gICAgICBjb25zdCBoYXNoUGFyYW1zQWZ0ZXI6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH0gPSB7fVxuICAgICAgdXJsUGFyYW1zQWZ0ZXIuZm9yRWFjaCgodmFsdWUsIGtleSkgPT4ge1xuICAgICAgICBoYXNoUGFyYW1zQWZ0ZXJba2V5XSA9IHZhbHVlXG4gICAgICB9KVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gnLCB7XG4gICAgICAgIGV2ZW50OiAnY2xlYXJSZXN1bHRzLWNvbXBsZXRlZCcsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICBoYXNoQmVmb3JlOiBoYXNoQmVmb3JlLFxuICAgICAgICBoYXNoQWZ0ZXI6IGhhc2hBZnRlcixcbiAgICAgICAgaGFzaFBhcmFtc0JlZm9yZTogaGFzaFBhcmFtc0JlZm9yZSxcbiAgICAgICAgaGFzaFBhcmFtc0FmdGVyOiBoYXNoUGFyYW1zQWZ0ZXIsXG4gICAgICAgIGhhc2hQYXJhbXNSZW1vdmVkOiBPYmplY3Qua2V5cyhoYXNoUGFyYW1zQmVmb3JlKS5sZW5ndGggLSBPYmplY3Qua2V5cyhoYXNoUGFyYW1zQWZ0ZXIpLmxlbmd0aCxcbiAgICAgICAgaGFzaFBhcmFtc0NvdW50QmVmb3JlOiBPYmplY3Qua2V5cyhoYXNoUGFyYW1zQmVmb3JlKS5sZW5ndGgsXG4gICAgICAgIGhhc2hQYXJhbXNDb3VudEFmdGVyOiBPYmplY3Qua2V5cyhoYXNoUGFyYW1zQWZ0ZXIpLmxlbmd0aCxcbiAgICAgICAgc3RpbGxIYXNIYXNoUGFyYW1zOiBPYmplY3Qua2V5cyhoYXNoUGFyYW1zQWZ0ZXIpLmxlbmd0aCA+IDAsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICB9LCAxMDApXG4gIH1cblxuICBjb25zdCBoYW5kbGVSZW5kZXJEb25lID0gUmVhY3QudXNlQ2FsbGJhY2soKHsgZGF0YUl0ZW1zLCBwYWdlU2l6ZSwgcGFnZSB9KSA9PiB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICBldmVudDogJ2hhbmRsZVJlbmRlckRvbmUtY2FsbGVkJyxcbiAgICAgIHdpZGdldElkLFxuICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZCxcbiAgICAgIGRhdGFJdGVtc0NvdW50OiBkYXRhSXRlbXM/Lmxlbmd0aCB8fCAwLFxuICAgICAgcGFnZVNpemUsXG4gICAgICBwYWdlLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICAvLyBVc2UgcmVmIHRvIGdldCBsYXRlc3QgcmVtb3ZlZFJlY29yZElkcyAoYXZvaWRzIHN0YWxlIGNsb3N1cmUgaXNzdWVzIHdpdGggbGF6eSBsb2FkaW5nKVxuICAgIGNvbnN0IGN1cnJlbnRSZW1vdmVkSWRzID0gcmVtb3ZlZFJlY29yZElkc1JlZi5jdXJyZW50XG4gICAgXG4gICAgLy8gRmlsdGVyIG91dCByZW1vdmVkIHJlY29yZHMgRklSU1QgLSBiZWZvcmUgYW55IHNlbGVjdGlvbiBsb2dpY1xuICAgIC8vIFRoaXMgZW5zdXJlcyByZW1vdmVkIHJlY29yZHMgc3RheSByZW1vdmVkIGV2ZW4gZHVyaW5nIGxhenkgbG9hZGluZ1xuICAgIGNvbnN0IGZpbHRlcmVkSXRlbXMgPSBkYXRhSXRlbXM/LmZpbHRlcihpdGVtID0+ICFjdXJyZW50UmVtb3ZlZElkcy5oYXMoaXRlbS5nZXRJZCgpKSkgfHwgW11cbiAgICBcbiAgICAvLyBDaGVjayBpZiBxdWVyeURhdGEgaGFzIGFjdHVhbGx5IGNoYW5nZWQgYmVmb3JlIHVwZGF0aW5nIHN0YXRlXG4gICAgLy8gVGhpcyBwcmV2ZW50cyB1bm5lY2Vzc2FyeSByZS1yZW5kZXJzIHRoYXQgcmVzZXQgc2Nyb2xsIHBvc2l0aW9uXG4gICAgY29uc3QgY3VycmVudFJlY29yZHMgPSBxdWVyeURhdGE/LnJlY29yZHMgfHwgW11cbiAgICBjb25zdCBjdXJyZW50UmVjb3JkSWRzID0gY3VycmVudFJlY29yZHMubWFwKHIgPT4gci5nZXRJZCgpKS5zb3J0KClcbiAgICBjb25zdCBuZXdSZWNvcmRJZHMgPSBmaWx0ZXJlZEl0ZW1zLm1hcChyID0+IHIuZ2V0SWQoKSkuc29ydCgpXG4gICAgY29uc3QgZGF0YUNoYW5nZWQgPSBjdXJyZW50UmVjb3JkSWRzLmxlbmd0aCAhPT0gbmV3UmVjb3JkSWRzLmxlbmd0aCB8fFxuICAgICAgIWN1cnJlbnRSZWNvcmRJZHMuZXZlcnkoKGlkLCBpZHgpID0+IGlkID09PSBuZXdSZWNvcmRJZHNbaWR4XSkgfHxcbiAgICAgIHF1ZXJ5RGF0YT8ucGFnZVNpemUgIT09IHBhZ2VTaXplIHx8XG4gICAgICBxdWVyeURhdGE/LnBhZ2UgIT09IHBhZ2VcbiAgICBcbiAgICAvLyBPbmx5IHVwZGF0ZSBzdGF0ZSBpZiBkYXRhIGhhcyBhY3R1YWxseSBjaGFuZ2VkXG4gICAgaWYgKGRhdGFDaGFuZ2VkKSB7XG4gICAgICBzZXRRdWVyeURhdGEoe1xuICAgICAgICByZWNvcmRzOiBmaWx0ZXJlZEl0ZW1zLFxuICAgICAgICBwYWdlU2l6ZSxcbiAgICAgICAgcGFnZVxuICAgICAgfSlcbiAgICB9XG4gICAgXG4gICAgLy8gT25seSBzZWxlY3QgcmVjb3JkcyB0aGF0IGFyZSBOT1QgcmVtb3ZlZFxuICAgIC8vIElNUE9SVEFOVDogT25seSByZS1zZWxlY3QgaWYgdGhlIHNlbGVjdGlvbiBoYXMgYWN0dWFsbHkgY2hhbmdlZCB0byBhdm9pZCByZXNldHRpbmcgc2Nyb2xsIHBvc2l0aW9uXG4gICAgaWYgKGZpbHRlcmVkSXRlbXMgJiYgZmlsdGVyZWRJdGVtcy5sZW5ndGggPiAwICYmIG91dHB1dERTKSB7XG4gICAgICBjb25zdCByZWNvcmRJZHMgPSBmaWx0ZXJlZEl0ZW1zLm1hcChyZWNvcmQgPT4gcmVjb3JkLmdldElkKCkpXG4gICAgICBjb25zdCBmZHIgPSBmaWx0ZXJlZEl0ZW1zIGFzIEZlYXR1cmVEYXRhUmVjb3JkW11cbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgd2hhdCdzIGN1cnJlbnRseSBzZWxlY3RlZCB0byBhdm9pZCB1bm5lY2Vzc2FyeSByZS1zZWxlY3Rpb24gKHdoaWNoIHJlc2V0cyBzY3JvbGwpXG4gICAgICBjb25zdCBjdXJyZW50bHlTZWxlY3RlZElkcyA9IG91dHB1dERTLmdldFNlbGVjdGVkUmVjb3JkSWRzKCkgfHwgW11cbiAgICAgIGNvbnN0IHNlbGVjdGlvbkNoYW5nZWQgPSBjdXJyZW50bHlTZWxlY3RlZElkcy5sZW5ndGggIT09IHJlY29yZElkcy5sZW5ndGggfHxcbiAgICAgICAgIXJlY29yZElkcy5ldmVyeShpZCA9PiBjdXJyZW50bHlTZWxlY3RlZElkcy5pbmNsdWRlcyhpZCkpXG4gICAgICBcbiAgICAgIC8vIE9ubHkgc2VsZWN0IGlmIHRoZSBzZWxlY3Rpb24gaGFzIGFjdHVhbGx5IGNoYW5nZWRcbiAgICAgIGlmIChzZWxlY3Rpb25DaGFuZ2VkKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgc2V0U2VsZWN0aW9uRXJyb3IobnVsbCkgLy8gQ2xlYXIgcHJldmlvdXMgZXJyb3JzXG4gICAgICAgICAgc2VsZWN0UmVjb3Jkc0FuZFB1Ymxpc2god2lkZ2V0SWQsIG91dHB1dERTLCByZWNvcmRJZHMsIGZkcilcbiAgICAgICAgICBcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgIGV2ZW50OiAnaGFuZGxlUmVuZGVyRG9uZS1zZWxlY3RpbmctZmlsdGVyZWQtcmVjb3JkcycsXG4gICAgICAgICAgICB3aWRnZXRJZDogd2lkZ2V0SWQsXG4gICAgICAgICAgICBkYXRhSXRlbXNDb3VudDogZGF0YUl0ZW1zPy5sZW5ndGggfHwgMCxcbiAgICAgICAgICAgIGZpbHRlcmVkSXRlbXNDb3VudDogZmlsdGVyZWRJdGVtcy5sZW5ndGgsXG4gICAgICAgICAgICByZW1vdmVkUmVjb3JkSWRzQ291bnQ6IGN1cnJlbnRSZW1vdmVkSWRzLnNpemUsXG4gICAgICAgICAgICBzZWxlY3Rpb25DaGFuZ2VkOiB0cnVlLFxuICAgICAgICAgICAgY3VycmVudGx5U2VsZWN0ZWRDb3VudDogY3VycmVudGx5U2VsZWN0ZWRJZHMubGVuZ3RoLFxuICAgICAgICAgICAgbmV3U2VsZWN0aW9uQ291bnQ6IHJlY29yZElkcy5sZW5ndGhcbiAgICAgICAgICB9KVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0ZhaWxlZCB0byBzZWxlY3QgcXVlcnkgcmVzdWx0cydcbiAgICAgICAgICBzZXRTZWxlY3Rpb25FcnJvcihlcnJvck1lc3NhZ2UpXG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgICAgICAgZXZlbnQ6ICdzZWxlY3Rpb24tZmFpbGVkLWhhbmRsZVJlbmRlckRvbmUnLFxuICAgICAgICAgICAgZXJyb3I6IGVycm9yTWVzc2FnZSxcbiAgICAgICAgICAgIGVycm9yU3RhY2s6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHJlY29yZENvdW50OiByZWNvcmRJZHMubGVuZ3RoXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgZXZlbnQ6ICdoYW5kbGVSZW5kZXJEb25lLXNraXBwaW5nLXJlc2VsZWN0aW9uJyxcbiAgICAgICAgICB3aWRnZXRJZDogd2lkZ2V0SWQsXG4gICAgICAgICAgZGF0YUl0ZW1zQ291bnQ6IGRhdGFJdGVtcz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgICAgZmlsdGVyZWRJdGVtc0NvdW50OiBmaWx0ZXJlZEl0ZW1zLmxlbmd0aCxcbiAgICAgICAgICByZW1vdmVkUmVjb3JkSWRzQ291bnQ6IGN1cnJlbnRSZW1vdmVkSWRzLnNpemUsXG4gICAgICAgICAgcmVhc29uOiAnc2VsZWN0aW9uLXVuY2hhbmdlZCcsXG4gICAgICAgICAgY3VycmVudGx5U2VsZWN0ZWRDb3VudDogY3VycmVudGx5U2VsZWN0ZWRJZHMubGVuZ3RoXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICB9LCBbb3V0cHV0RFMsIHdpZGdldElkLCBxdWVyeURhdGFdKVxuXG4gIGNvbnN0IGhhbmRsZURhdGFTb3VyY2VJbmZvQ2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGNvbnN0IGRzID0gRGF0YVNvdXJjZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5nZXREYXRhU291cmNlKG91dHB1dERTPy5pZClcbiAgICBjb25zdCBkc1JlY29yZHMgPSBkcz8uZ2V0U2VsZWN0ZWRSZWNvcmRzKClcbiAgICBjb25zdCBzZWxlY3RlZElkcyA9IGRzPy5nZXRTZWxlY3RlZFJlY29yZElkcygpID8/IFtdXG4gICAgXG4gICAgLy8gQ2FwdHVyZSByZWNvcmRzIHByb3AgYmVmb3JlIHVzaW5nIGl0ICh0byBhdm9pZCBzaGFkb3dpbmcpXG4gICAgY29uc3QgcmVjb3Jkc1Byb3AgPSByZWNvcmRzXG4gICAgXG4gICAgLy8gRGVidWc6IExvZyB3aGF0IGhhbmRsZURhdGFTb3VyY2VJbmZvQ2hhbmdlIHNlZXNcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgIGV2ZW50OiAnaGFuZGxlRGF0YVNvdXJjZUluZm9DaGFuZ2UtZmlyZWQnLFxuICAgICAgd2lkZ2V0SWQ6IHdpZGdldElkLFxuICAgICAgb3V0cHV0RFNJZDogb3V0cHV0RFM/LmlkLFxuICAgICAgZHNJZDogZHM/LmlkLFxuICAgICAgc2VsZWN0ZWRSZWNvcmRzRnJvbURTOiBkc1JlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgc2VsZWN0ZWRJZHNGcm9tRFM6IHNlbGVjdGVkSWRzLmxlbmd0aCxcbiAgICAgIGN1cnJlbnRTZWxlY3RlZFJlY29yZHNTdGF0ZTogc2VsZWN0ZWRSZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgIHJlY29yZHNQcm9wQ291bnQ6IHJlY29yZHNQcm9wPy5sZW5ndGggfHwgMCxcbiAgICAgIHJlbW92ZWRSZWNvcmRJZHNDb3VudDogcmVtb3ZlZFJlY29yZElkcy5zaXplLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICAvLyBJZiB3ZSBoYXZlIHJlY29yZHMgaW4gdGhlIHByb3AgKGFjY3VtdWxhdGVkIHJlY29yZHMpIGJ1dCBEUyBzaG93cyAwIHNlbGVjdGVkLFxuICAgIC8vIGFuZCB3ZSBjdXJyZW50bHkgaGF2ZSBzZWxlY3RlZFJlY29yZHMsIHRoaXMgaXMgbGlrZWx5IGEgcXVlcnkgc3dpdGNoIGluIFwiQWRkIHRvXCIgbW9kZVxuICAgIC8vIHdoZXJlIHJlLXNlbGVjdGlvbiBoYXNuJ3QgaGFwcGVuZWQgeWV0LiBEb24ndCBjbGVhciBzZWxlY3RlZFJlY29yZHMgLSB3YWl0IGZvciByZS1zZWxlY3Rpb24uXG4gICAgaWYgKHJlY29yZHNQcm9wICYmIHJlY29yZHNQcm9wLmxlbmd0aCA+IDAgJiYgc2VsZWN0ZWRJZHMubGVuZ3RoID09PSAwICYmIHNlbGVjdGVkUmVjb3JkcyAmJiBzZWxlY3RlZFJlY29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAnaGFuZGxlRGF0YVNvdXJjZUluZm9DaGFuZ2Utc2tpcHBpbmctY2xlYXItZHVyaW5nLXF1ZXJ5LXN3aXRjaCcsXG4gICAgICAgIHdpZGdldElkOiB3aWRnZXRJZCxcbiAgICAgICAgcmVhc29uOiAnd2FpdGluZy1mb3ItcmVzZWxlY3Rpb24nLFxuICAgICAgICByZWNvcmRzUHJvcENvdW50OiByZWNvcmRzUHJvcC5sZW5ndGgsXG4gICAgICAgIGN1cnJlbnRTZWxlY3RlZFJlY29yZHNDb3VudDogc2VsZWN0ZWRSZWNvcmRzLmxlbmd0aFxuICAgICAgfSlcbiAgICAgIHJldHVybiAvLyBTa2lwIHVwZGF0aW5nIC0gcmUtc2VsZWN0aW9uIGlzIGNvbWluZ1xuICAgIH1cbiAgICBcbiAgICAvLyBJTVBPUlRBTlQ6IEZpbHRlciBvdXQgcmVtb3ZlZCByZWNvcmRzIGZyb20gRFMgc2VsZWN0aW9uIGJlZm9yZSBjb21wYXJpbmcvc3luY2luZ1xuICAgIC8vIFRoaXMgcHJldmVudHMgcmVtb3ZlZCByZWNvcmRzIGZyb20gYmVpbmcgcmUtYWRkZWQgd2hlbiBzY3JvbGxpbmcgdHJpZ2dlcnMgdGhpcyBjYWxsYmFja1xuICAgIGNvbnN0IGZpbHRlcmVkRHNSZWNvcmRzID0gZHNSZWNvcmRzPy5maWx0ZXIoKHJlY29yZDogRGF0YVJlY29yZCkgPT4gIXJlbW92ZWRSZWNvcmRJZHMuaGFzKHJlY29yZC5nZXRJZCgpKSkgPz8gW11cbiAgICBjb25zdCBmaWx0ZXJlZFNlbGVjdGVkSWRzID0gc2VsZWN0ZWRJZHMuZmlsdGVyKGlkID0+ICFyZW1vdmVkUmVjb3JkSWRzLmhhcyhpZCkpXG4gICAgXG4gICAgLy8gSWYgRFMgaGFzIG1vcmUgc2VsZWN0ZWQgdGhhbiBvdXIgc3RhdGUsIGJ1dCB0aGUgZGlmZmVyZW5jZSBpcyBlbnRpcmVseSByZW1vdmVkIHJlY29yZHMsIGRvbid0IHN5bmNcbiAgICBpZiAoZmlsdGVyZWRTZWxlY3RlZElkcy5sZW5ndGggPT09IChzZWxlY3RlZFJlY29yZHM/Lmxlbmd0aCB8fCAwKSAmJiBzZWxlY3RlZElkcy5sZW5ndGggPiBmaWx0ZXJlZFNlbGVjdGVkSWRzLmxlbmd0aCkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAnaGFuZGxlRGF0YVNvdXJjZUluZm9DaGFuZ2Utc2tpcHBpbmctc3luYy1kdWUtdG8tcmVtb3ZlZC1yZWNvcmRzJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHdpZGdldElkLFxuICAgICAgICByZWFzb246ICdkcy1zZWxlY3Rpb24taW5jbHVkZXMtcmVtb3ZlZC1yZWNvcmRzJyxcbiAgICAgICAgZHNTZWxlY3RlZENvdW50OiBzZWxlY3RlZElkcy5sZW5ndGgsXG4gICAgICAgIGZpbHRlcmVkQ291bnQ6IGZpbHRlcmVkU2VsZWN0ZWRJZHMubGVuZ3RoLFxuICAgICAgICBjb21wb25lbnRTdGF0ZUNvdW50OiBzZWxlY3RlZFJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICByZW1vdmVkUmVjb3JkSWRzQ291bnQ6IHJlbW92ZWRSZWNvcmRJZHMuc2l6ZVxuICAgICAgfSlcbiAgICAgIHJldHVybiAvLyBTa2lwIHN5bmNpbmcgLSB0aGUgbWlzbWF0Y2ggaXMgZHVlIHRvIHJlbW92ZWQgcmVjb3Jkc1xuICAgIH1cbiAgICBcbiAgICBsZXQgc2hvdWxkVXBkYXRlID0gZmFsc2VcbiAgICBpZiAoZmlsdGVyZWRTZWxlY3RlZElkcy5sZW5ndGggIT09IHNlbGVjdGVkUmVjb3Jkcz8ubGVuZ3RoKSB7XG4gICAgICBzaG91bGRVcGRhdGUgPSB0cnVlXG4gICAgfSBlbHNlIHsgLy8gZXF1YWwgbGVuZ3RoXG4gICAgICBzaG91bGRVcGRhdGUgPSBmaWx0ZXJlZFNlbGVjdGVkSWRzLnNvbWUoaWQgPT4ge1xuICAgICAgICBjb25zdCB0YXJnZXQgPSBzZWxlY3RlZFJlY29yZHMuZmluZCgoaXRlbSkgPT4gaXRlbS5nZXRJZCgpID09PSBpZClcbiAgICAgICAgcmV0dXJuIHRhcmdldCA9PSBudWxsXG4gICAgICB9KVxuICAgIH1cbiAgICBpZiAoc2hvdWxkVXBkYXRlKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdoYW5kbGVEYXRhU291cmNlSW5mb0NoYW5nZS11cGRhdGluZy1zZWxlY3RlZFJlY29yZHMnLFxuICAgICAgICB3aWRnZXRJZDogd2lkZ2V0SWQsXG4gICAgICAgIG9sZENvdW50OiBzZWxlY3RlZFJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICBuZXdDb3VudDogZmlsdGVyZWREc1JlY29yZHMubGVuZ3RoLFxuICAgICAgICBub3RlOiAnZmlsdGVyZWQtb3V0LXJlbW92ZWQtcmVjb3JkcydcbiAgICAgIH0pXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdoYW5kbGVEYXRhU291cmNlSW5mb0NoYW5nZS11cGRhdGluZy1zZWxlY3RlZFJlY29yZHMnLFxuICAgICAgICB3aWRnZXRJZDogd2lkZ2V0SWQsXG4gICAgICAgIG9sZENvdW50OiBzZWxlY3RlZFJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICBuZXdDb3VudDogZmlsdGVyZWREc1JlY29yZHMubGVuZ3RoLFxuICAgICAgICBvbGRTZWxlY3RlZElkczogKHNlbGVjdGVkUmVjb3JkcyB8fCBbXSkubWFwKHIgPT4gci5nZXRJZCgpKS5zbGljZSgwLCA1KSxcbiAgICAgICAgbmV3U2VsZWN0ZWRJZHM6IGZpbHRlcmVkU2VsZWN0ZWRJZHMuc2xpY2UoMCwgNSksXG4gICAgICAgIG5vdGU6ICdmaWx0ZXJlZC1vdXQtcmVtb3ZlZC1yZWNvcmRzJyxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgc2V0U2VsZWN0ZWRSZWNvcmRzKGZpbHRlcmVkRHNSZWNvcmRzKVxuICAgIH0gZWxzZSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdoYW5kbGVEYXRhU291cmNlSW5mb0NoYW5nZS1za2lwcGluZy11cGRhdGUnLFxuICAgICAgICB3aWRnZXRJZDogd2lkZ2V0SWQsXG4gICAgICAgIHJlYXNvbjogJ25vLWNoYW5nZS1kZXRlY3RlZCcsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICB9XG4gIH0sIFtvdXRwdXREUz8uaWQsIHNlbGVjdGVkUmVjb3Jkcywgd2lkZ2V0SWQsIHJlY29yZHMsIHJlbW92ZWRSZWNvcmRJZHNdKVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZXMgdGhlIHRpcCBtZXNzYWdlIHNob3dpbmcgaG93IG1hbnkgZmVhdHVyZXMgYXJlIGRpc3BsYXllZC5cbiAgICogRmlsdGVycyBvdXQgcmVtb3ZlZCByZWNvcmRzIHRvIHNob3cgYWNjdXJhdGUgY291bnRzLlxuICAgKiBcbiAgICogQHJldHVybnMgRm9ybWF0dGVkIHN0cmluZyBsaWtlIFwiRmVhdHVyZXMgZGlzcGxheWVkOiAxMTggLyAxMjFcIlxuICAgKi9cbiAgY29uc3QgZ2V0VGlwTWVzc2FnZSA9ICgpID0+IHtcbiAgICBpZiAocXVlcnlEYXRhICYmIHF1ZXJ5RGF0YS5yZWNvcmRzKSB7XG4gICAgICAvLyBGaWx0ZXIgb3V0IHJlbW92ZWQgcmVjb3JkcyBmb3IgZGlzcGxheSBjb3VudFxuICAgICAgY29uc3QgZGlzcGxheWVkUmVjb3JkcyA9IHF1ZXJ5RGF0YS5yZWNvcmRzLmZpbHRlcigocmVjb3JkOiBEYXRhUmVjb3JkKSA9PiAhcmVtb3ZlZFJlY29yZElkcy5oYXMocmVjb3JkLmdldElkKCkpKVxuICAgICAgY29uc3QgZGlzcGxheWVkQ291bnQgPSBkaXNwbGF5ZWRSZWNvcmRzLmxlbmd0aFxuICAgICAgXG4gICAgICAvLyBGT1JDRUQ6IEFsd2F5cyBTaW1wbGVMaXN0LCBzbyBhbHdheXMgdXNlIHNpbXBsZSBkaXNwbGF5IGZvcm1hdFxuICAgICAgcmV0dXJuIGAke2dldEkxOG5NZXNzYWdlKCdmZWF0dXJlc0Rpc3BsYXllZCcpfTogJHtkaXNwbGF5ZWRDb3VudH0gLyAke3Jlc3VsdENvdW50fWBcbiAgICAgIGNvbnN0IHsgcGFnZSA9IDEsIHBhZ2VTaXplID0gZGVmYXVsdFBhZ2VTaXplIH0gPSBxdWVyeURhdGFcbiAgICAgIGNvbnN0IGZyb20gPSAocGFnZSAtIDEpICogcGFnZVNpemUgKyAxXG4gICAgICBjb25zdCB0byA9IGZyb20gKyBwYWdlU2l6ZSAtIDFcbiAgICAgIGlmIChyZXN1bHRDb3VudCA+IDApIHtcbiAgICAgICAgcmV0dXJuIGAke2dldEkxOG5NZXNzYWdlKCdmZWF0dXJlc0Rpc3BsYXllZCcpfTogJHtmcm9tfSAtICR7TWF0aC5taW4odG8sIGRpc3BsYXllZENvdW50KX0gLyAke3Jlc3VsdENvdW50fWBcbiAgICAgIH1cbiAgICAgIHJldHVybiBgJHtnZXRJMThuTWVzc2FnZSgnZmVhdHVyZXNEaXNwbGF5ZWQnKX06IDAgLSAwIC8gMGBcbiAgICB9XG4gICAgcmV0dXJuICcnXG4gIH1cblxuICAvKipcbiAgICogVG9nZ2xlcyBleHBhbmQvY29sbGFwc2Ugc3RhdGUgZm9yIGFsbCByZXN1bHQgaXRlbXMuXG4gICAqIFdoZW4gdG9nZ2xlZCwgYWxsIHJlc3VsdCBpdGVtcyB3aWxsIGJlIGV4cGFuZGVkIG9yIGNvbGxhcHNlZCB0b2dldGhlci5cbiAgICogVXBkYXRlcyBpbmRpdmlkdWFsIGl0ZW0gZXhwYW5zaW9uIHN0YXRlcyBpbiB0aGUgbWFwIHRvIG1haW50YWluIHN0YXRlIHdoZW4gaXRlbXMgYXJlIHJlbW92ZWQuXG4gICAqL1xuICBjb25zdCB0b2dnbGVFeHBhbmRBbGwgPSBSZWFjdC51c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgc2V0RXhwYW5kQWxsKHByZXYgPT4ge1xuICAgICAgY29uc3QgbmV3VmFsdWUgPSAhcHJldlxuICAgICAgZGVidWdMb2dnZXIubG9nKCdFWFBBTkQtQ09MTEFQU0UnLCB7XG4gICAgICAgIGV2ZW50OiAndG9nZ2xlRXhwYW5kQWxsLWNsaWNrZWQnLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgcHJldmlvdXNWYWx1ZTogcHJldixcbiAgICAgICAgbmV3VmFsdWUsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgLy8gVXBkYXRlIGFsbCBjdXJyZW50IGl0ZW1zIGluIHRoZSBtYXAgd2l0aCB0aGUgbmV3IGV4cGFuc2lvbiBzdGF0ZVxuICAgICAgc2V0SXRlbUV4cGFuZFN0YXRlcyhwcmV2TWFwID0+IHtcbiAgICAgICAgY29uc3QgbmV3TWFwID0gbmV3IE1hcChwcmV2TWFwKVxuICAgICAgICAvLyBHZXQgYWxsIGN1cnJlbnQgcmVjb3JkIElEcyBmcm9tIGZpbHRlcmVkIHJlY29yZHNcbiAgICAgICAgY29uc3QgYWxsUmVjb3JkSWRzID0gZmlsdGVyZWRSZWNvcmRzRm9yTGlzdC5tYXAociA9PiByLmdldElkKCkpXG4gICAgICAgIGFsbFJlY29yZElkcy5mb3JFYWNoKGlkID0+IHtcbiAgICAgICAgICBuZXdNYXAuc2V0KGlkLCBuZXdWYWx1ZSlcbiAgICAgICAgfSlcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdFWFBBTkQtQ09MTEFQU0UnLCB7XG4gICAgICAgICAgZXZlbnQ6ICdpdGVtRXhwYW5kU3RhdGVzLXVwZGF0ZWQnLFxuICAgICAgICAgIHdpZGdldElkLFxuICAgICAgICAgIG5ld1ZhbHVlLFxuICAgICAgICAgIHVwZGF0ZWRDb3VudDogYWxsUmVjb3JkSWRzLmxlbmd0aCxcbiAgICAgICAgICByZWNvcmRJZHM6IGFsbFJlY29yZElkcy5zbGljZSgwLCAxMCksIC8vIExvZyBmaXJzdCAxMCBJRHNcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIG5ld01hcFxuICAgICAgfSlcbiAgICAgIFxuICAgICAgcmV0dXJuIG5ld1ZhbHVlXG4gICAgfSlcbiAgfSwgW3dpZGdldElkLCBmaWx0ZXJlZFJlY29yZHNGb3JMaXN0XSlcblxuICBjb25zdCByZXN1bHRVc2VPdXRwdXREYXRhU291cmNlID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIEltbXV0YWJsZSh7XG4gICAgICBkYXRhU291cmNlSWQ6IHF1ZXJ5SXRlbS5vdXRwdXREYXRhU291cmNlSWQsXG4gICAgICBtYWluRGF0YVNvdXJjZUlkOiBxdWVyeUl0ZW0ub3V0cHV0RGF0YVNvdXJjZUlkXG4gICAgfSlcbiAgfSwgW3F1ZXJ5SXRlbT8ub3V0cHV0RGF0YVNvdXJjZUlkXSlcblxuICBjb25zdCBoYW5kbGVFc2NhcGUgPSBSZWFjdC51c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgZm9jdXNFbGVtZW50SW5LZXlib2FyZE1vZGUoYmFja0J0blJlZi5jdXJyZW50KVxuICB9LCBbXSlcblxuICAvLyBLZWVwIHJlY29yZHMgc2VsZWN0ZWQgYW5kIHpvb20gdG8gY2xpY2tlZCByZWNvcmRcbiAgLy8gUmVjb3JkcyByZW1haW4gc2VsZWN0ZWQgYXMgbG9uZyBhcyB0aGV5J3JlIGluIHRoZSByZXN1bHRzXG4gIC8vIENsaWNraW5nIGEgcmVjb3JkIGFsd2F5cyB6b29tcyB0byBpdCBvbiB0aGUgbWFwICh0aGlzIGJlaGF2aW9yIGlzIGFsd2F5cyBlbmFibGVkKVxuICBjb25zdCB0b2dnbGVTZWxlY3Rpb24gPSBSZWFjdC51c2VDYWxsYmFjaygoZGF0YTogRmVhdHVyZURhdGFSZWNvcmQpID0+IHtcbiAgICAvLyBFbnN1cmUgdGhlIGNsaWNrZWQgcmVjb3JkIGlzIHNlbGVjdGVkIChpdCBzaG91bGQgYWxyZWFkeSBiZSwgYnV0IGVuc3VyZSBpdClcbiAgICBjb25zdCBzZWxlY3RlZERhdGFzID0gb3V0cHV0RFMuZ2V0U2VsZWN0ZWRSZWNvcmRzKCkgPz8gW11cbiAgICBjb25zdCBzZWxlY3RlZElkcyA9IG91dHB1dERTLmdldFNlbGVjdGVkUmVjb3JkSWRzKCkgPz8gW11cbiAgICBjb25zdCBkYXRhSWQgPSBkYXRhLmdldElkKClcbiAgICBcbiAgICAvLyBJZiB0aGlzIHJlY29yZCBpc24ndCBhbHJlYWR5IHNlbGVjdGVkLCBhZGQgaXQgdG8gdGhlIHNlbGVjdGlvblxuICAgIGlmICghc2VsZWN0ZWRJZHMuaW5jbHVkZXMoZGF0YUlkKSkge1xuICAgICAgY29uc3QgdXBkYXRlZFNlbGVjdGVkRGF0YXMgPSBbLi4uc2VsZWN0ZWREYXRhcywgZGF0YV1cbiAgICAgIGNvbnN0IHJlY29yZElkcyA9IHVwZGF0ZWRTZWxlY3RlZERhdGFzLm1hcChyZWNvcmQgPT4gcmVjb3JkLmdldElkKCkpXG4gICAgICBcbiAgICAgIC8vIFNlbGVjdCByZWNvcmRzIGFuZCBwdWJsaXNoIHNlbGVjdGlvbiBtZXNzYWdlIHVzaW5nIHV0aWxpdHkgZnVuY3Rpb25cbiAgICAgIHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoKHdpZGdldElkLCBvdXRwdXREUywgcmVjb3JkSWRzLCB1cGRhdGVkU2VsZWN0ZWREYXRhcyBhcyBGZWF0dXJlRGF0YVJlY29yZFtdLCB0cnVlKVxuICAgIH1cbiAgICBcbiAgICAvLyBab29tIHRvIHRoZSBjbGlja2VkIHJlY29yZCB1c2luZyBkYXRhIGFjdGlvbnMgKGFsd2F5cyBlbmFibGVkIC0gdXNlciB3YW50cyB0byBrZWVwIHRoaXMgYmVoYXZpb3IpXG4gICAgY29uc3QgZGF0YVNldDogRGF0YVJlY29yZFNldCA9IHtcbiAgICAgIGRhdGFTb3VyY2U6IG91dHB1dERTLFxuICAgICAgcmVjb3JkczogW2RhdGFdLFxuICAgICAgdHlwZTogJ3NlbGVjdGVkJyxcbiAgICAgIG5hbWU6IG91dHB1dERTLmdldExhYmVsKClcbiAgICB9XG4gICAgXG4gICAgLy8gR2V0IGF2YWlsYWJsZSBkYXRhIGFjdGlvbnMgYW5kIGZpbmQgdGhlIHpvb21Ub0ZlYXR1cmUgYWN0aW9uXG4gICAgRGF0YUFjdGlvbk1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5nZXRTdXBwb3J0ZWRBY3Rpb25zKHdpZGdldElkLCBbZGF0YVNldF0sIERhdGFMZXZlbC5SZWNvcmRzKVxuICAgICAgLnRoZW4oYWN0aW9uQ2F0ZWdvcmllcyA9PiB7XG4gICAgICAgIC8vIExvb2sgZm9yIHpvb21Ub0ZlYXR1cmUgYWN0aW9uIGluIGFueSBjYXRlZ29yeVxuICAgICAgICBsZXQgem9vbUFjdGlvbjogYW55ID0gbnVsbFxuICAgICAgICBmb3IgKGNvbnN0IGNhdGVnb3J5IGluIGFjdGlvbkNhdGVnb3JpZXMpIHtcbiAgICAgICAgICBjb25zdCBhY3Rpb25zID0gYWN0aW9uQ2F0ZWdvcmllc1tjYXRlZ29yeV1cbiAgICAgICAgICB6b29tQWN0aW9uID0gYWN0aW9ucy5maW5kKChhY3Rpb246IGFueSkgPT4gYWN0aW9uLm5hbWUgPT09ICd6b29tVG9GZWF0dXJlJyB8fCBhY3Rpb24uaWQgPT09ICd6b29tVG9GZWF0dXJlJylcbiAgICAgICAgICBpZiAoem9vbUFjdGlvbikgYnJlYWtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh6b29tQWN0aW9uKSB7XG4gICAgICAgICAgLy8gRXhlY3V0ZSB0aGUgem9vbSBhY3Rpb25cbiAgICAgICAgICByZXR1cm4gRGF0YUFjdGlvbk1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5leGVjdXRlRGF0YUFjdGlvbih6b29tQWN0aW9uLCBbZGF0YVNldF0sIERhdGFMZXZlbC5SZWNvcmRzLCB3aWRnZXRJZClcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgIC8vIFNpbGVudGx5IGhhbmRsZSBlcnJvcnNcbiAgICAgIH0pXG4gIH0sIFtvdXRwdXREUywgd2lkZ2V0SWRdKVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIGEgcmVjb3JkIGZyb20gdGhlIHJlc3VsdHMgYW5kIHNlbGVjdGlvbi5cbiAgICogSWYgcmVtb3ZpbmcgdGhlIGxhc3QgcmVjb3JkLCBhdXRvbWF0aWNhbGx5IGNsZWFycyBhbGwgcmVzdWx0c1xuICAgKiBieSBjYWxsaW5nIHRoZSB0cmFzaCBjYW4gbG9naWMgKHNhbWUgYXMgY2xpY2tpbmcgQ2xlYXIgYnV0dG9uKS5cbiAgICogVGhpcyBlbnN1cmVzIHRoZSBVSSBkb2Vzbid0IHNob3cgXCJGZWF0dXJlcyBkaXNwbGF5ZWQ6IDAgLyAxXCIgd2hlbiBhbGwgcmVzdWx0cyBhcmUgcmVtb3ZlZC5cbiAgICogXG4gICAqIEBwYXJhbSBkYXRhIC0gVGhlIGZlYXR1cmUgZGF0YSByZWNvcmQgdG8gcmVtb3ZlXG4gICAqL1xuICBjb25zdCByZW1vdmVSZWNvcmQgPSBSZWFjdC51c2VDYWxsYmFjaygoZGF0YTogRmVhdHVyZURhdGFSZWNvcmQpID0+IHtcbiAgICBjb25zdCBkYXRhSWQgPSBkYXRhLmdldElkKClcbiAgICBjb25zdCBjdXJyZW50RXhwYW5kQWxsID0gZXhwYW5kQWxsXG4gICAgXG4gICAgLy8gTG9nIGhhc2ggc3RhdGUgd2hlbiByZW1vdmluZyBpbmRpdmlkdWFsIHJlY29yZFxuICAgIGNvbnN0IGhhc2ggPSB3aW5kb3cubG9jYXRpb24uaGFzaC5zdWJzdHJpbmcoMSlcbiAgICBjb25zdCB1cmxQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKGhhc2gpXG4gICAgY29uc3QgaGFzaFBhcmFtczogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfSA9IHt9XG4gICAgdXJsUGFyYW1zLmZvckVhY2goKHZhbHVlLCBrZXkpID0+IHtcbiAgICAgIGhhc2hQYXJhbXNba2V5XSA9IHZhbHVlXG4gICAgfSlcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0VYUEFORC1DT0xMQVBTRScsIHtcbiAgICAgIGV2ZW50OiAncmVtb3ZlUmVjb3JkLXN0YXJ0ZWQnLFxuICAgICAgd2lkZ2V0SWQsXG4gICAgICByZW1vdmVkUmVjb3JkSWQ6IGRhdGFJZCxcbiAgICAgIGN1cnJlbnRFeHBhbmRBbGwsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSCcsIHtcbiAgICAgIGV2ZW50OiAncmVtb3ZlUmVjb3JkLWNhbGxlZCcsXG4gICAgICB3aWRnZXRJZCxcbiAgICAgIHJlbW92ZWRSZWNvcmRJZDogZGF0YUlkLFxuICAgICAgaGFzaDogaGFzaCxcbiAgICAgIGhhc2hQYXJhbXM6IGhhc2hQYXJhbXMsXG4gICAgICBoYXNoUGFyYW1zQ291bnQ6IE9iamVjdC5rZXlzKGhhc2hQYXJhbXMpLmxlbmd0aCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgLy8gUmVtb3ZlIGZyb20gZXhwYW5zaW9uIHN0YXRlcyBtYXBcbiAgICBzZXRJdGVtRXhwYW5kU3RhdGVzKHByZXZNYXAgPT4ge1xuICAgICAgY29uc3QgbmV3TWFwID0gbmV3IE1hcChwcmV2TWFwKVxuICAgICAgbmV3TWFwLmRlbGV0ZShkYXRhSWQpXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0VYUEFORC1DT0xMQVBTRScsIHtcbiAgICAgICAgZXZlbnQ6ICdpdGVtRXhwYW5kU3RhdGVzLWNsZWFuZWQtdXAnLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgcmVtb3ZlZFJlY29yZElkOiBkYXRhSWQsXG4gICAgICAgIHJlbWFpbmluZ0NvdW50OiBuZXdNYXAuc2l6ZSxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgcmV0dXJuIG5ld01hcFxuICAgIH0pXG4gICAgXG4gICAgLy8gQWRkIHRvIHJlbW92ZWQgcmVjb3JkcyBzZXRcbiAgICBzZXRSZW1vdmVkUmVjb3JkSWRzKHByZXYgPT4ge1xuICAgICAgY29uc3QgbmV3U2V0ID0gbmV3IFNldChwcmV2KS5hZGQoZGF0YUlkKVxuICAgICAgXG4gICAgICAvLyBJZiBhbGwgcmVjb3JkcyBhcmUgbm93IHJlbW92ZWQsIGNsZWFyIGV2ZXJ5dGhpbmcgYnkgY2FsbGluZyB0cmFzaCBjYW4gbG9naWNcbiAgICAgIC8vIElNUE9SVEFOVDogQ29tcGFyZSBhZ2FpbnN0IGFjdHVhbCBkaXNwbGF5ZWQgcmVjb3JkcyBjb3VudCwgbm90IHJlc3VsdENvdW50XG4gICAgICAvLyByZXN1bHRDb3VudCBvbmx5IHJlZmxlY3RzIHRoZSBsYXRlc3QgcXVlcnksIGJ1dCBpbiBcIkFkZCB0b1wiIG1vZGUgd2UgZGlzcGxheSBhY2N1bXVsYXRlZCByZWNvcmRzXG4gICAgICAvLyBVc2UgcXVlcnlEYXRhLnJlY29yZHMubGVuZ3RoIChiZWZvcmUgZmlsdGVyaW5nKSBhcyB0aGUgc291cmNlIG9mIHRydXRoIGZvciBkaXNwbGF5ZWQgcmVjb3Jkc1xuICAgICAgLy8gRmFsbCBiYWNrIHRvIGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggaWYgaW4gYWNjdW11bGF0aW9uIG1vZGUsIG9yIHJlc3VsdENvdW50IGFzIGxhc3QgcmVzb3J0XG4gICAgICBsZXQgY3VycmVudERpc3BsYXllZENvdW50ID0gcXVlcnlEYXRhPy5yZWNvcmRzPy5sZW5ndGggfHwgMFxuICAgICAgaWYgKGN1cnJlbnREaXNwbGF5ZWRDb3VudCA9PT0gMCkge1xuICAgICAgICAvLyBJZiBxdWVyeURhdGEgZG9lc24ndCBoYXZlIHJlY29yZHMgeWV0LCBjaGVjayBpZiB3ZSdyZSBpbiBhY2N1bXVsYXRpb24gbW9kZVxuICAgICAgICBjb25zdCBpc0FjY3VtdWxhdGlvbk1vZGUgPSByZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbiB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvblxuICAgICAgICBpZiAoaXNBY2N1bXVsYXRpb25Nb2RlICYmIGFjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGN1cnJlbnREaXNwbGF5ZWRDb3VudCA9IGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGhcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBMYXN0IHJlc29ydDogdXNlIHJlc3VsdENvdW50IChidXQgdGhpcyBtaWdodCBiZSBpbmNvcnJlY3QgaW4gYWNjdW11bGF0aW9uIG1vZGUpXG4gICAgICAgICAgY3VycmVudERpc3BsYXllZENvdW50ID0gcmVzdWx0Q291bnRcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdyZW1vdmVSZWNvcmQtY2hlY2tpbmctYWxsLXJlbW92ZWQnLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgcmVtb3ZlZFJlY29yZElkc1NpemU6IG5ld1NldC5zaXplLFxuICAgICAgICBjdXJyZW50RGlzcGxheWVkQ291bnQsXG4gICAgICAgIHJlc3VsdENvdW50LFxuICAgICAgICBxdWVyeURhdGFSZWNvcmRzQ291bnQ6IHF1ZXJ5RGF0YT8ucmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiBhY2N1bXVsYXRlZFJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICByZXN1bHRzTW9kZSxcbiAgICAgICAgd2lsbE5hdmlnYXRlQmFjazogbmV3U2V0LnNpemUgPT09IGN1cnJlbnREaXNwbGF5ZWRDb3VudCAmJiBjdXJyZW50RGlzcGxheWVkQ291bnQgPiAwLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGlmIChuZXdTZXQuc2l6ZSA9PT0gY3VycmVudERpc3BsYXllZENvdW50ICYmIGN1cnJlbnREaXNwbGF5ZWRDb3VudCA+IDApIHtcbiAgICAgICAgLy8gQWxsIGRpc3BsYXllZCByZWNvcmRzIHJlbW92ZWQgLSBjbGVhciBldmVyeXRoaW5nIChzYW1lIGFzIGNsaWNraW5nIHRyYXNoIGNhbiBidXR0b24pXG4gICAgICAgIG9uTmF2QmFjayh0cnVlKVxuICAgICAgICByZXR1cm4gbmV3U2V0XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiBuZXdTZXRcbiAgICB9KVxuICAgIFxuICAgIC8vIFVwZGF0ZSBxdWVyeURhdGEgdG8gZmlsdGVyIG91dCB0aGUgcmVtb3ZlZCByZWNvcmRcbiAgICBzZXRRdWVyeURhdGEocHJldkRhdGEgPT4ge1xuICAgICAgaWYgKCFwcmV2RGF0YSkgcmV0dXJuIHByZXZEYXRhXG4gICAgICBjb25zdCBmaWx0ZXJlZFJlY29yZHMgPSBwcmV2RGF0YS5yZWNvcmRzLmZpbHRlcigocmVjb3JkOiBEYXRhUmVjb3JkKSA9PiByZWNvcmQuZ2V0SWQoKSAhPT0gZGF0YUlkKVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4ucHJldkRhdGEsXG4gICAgICAgIHJlY29yZHM6IGZpbHRlcmVkUmVjb3Jkc1xuICAgICAgfVxuICAgIH0pXG4gICAgXG4gICAgLy8gQUxXQVlTIHJlbW92ZSBmcm9tIG9yaWdpbiBkYXRhIHNvdXJjZSBzZWxlY3Rpb25zIChzYW1lIGFzIFJlbW92ZSBtb2RlKVxuICAgIC8vIFRoaXMgcHJvcGVybHkgcmVtb3ZlcyByZWNvcmRzIGZyb20gdGhlIG1hcCBzZWxlY3Rpb24sIGhhbmRsaW5nIHNpbmdsZSBvciBtdWx0aXBsZSBvcmlnaW4gc291cmNlc1xuICAgIC8vIEFsc28gcmVtb3ZlcyBncmFwaGljcyBmcm9tIGdyYXBoaWNzIGxheWVyIGlmIHVzaW5nIGdyYXBoaWNzIGxheWVyIGhpZ2hsaWdodGluZ1xuICAgIHJlbW92ZVJlY29yZHNGcm9tT3JpZ2luU2VsZWN0aW9ucyhcbiAgICAgIHdpZGdldElkLCBcbiAgICAgIFtkYXRhXSwgXG4gICAgICBvdXRwdXREUyBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLFxuICAgICAgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCxcbiAgICAgIGdyYXBoaWNzTGF5ZXJcbiAgICApXG4gICAgXG4gICAgLy8gVXBkYXRlIG91dHB1dERTIHNlbGVjdGlvblxuICAgIGNvbnN0IHNlbGVjdGVkRGF0YXMgPSBvdXRwdXREUy5nZXRTZWxlY3RlZFJlY29yZHMoKSA/PyBbXVxuICAgIGNvbnN0IHVwZGF0ZWRTZWxlY3RlZERhdGFzID0gc2VsZWN0ZWREYXRhcy5maWx0ZXIocmVjb3JkID0+IHJlY29yZC5nZXRJZCgpICE9PSBkYXRhSWQpXG4gICAgY29uc3QgcmVjb3JkSWRzID0gdXBkYXRlZFNlbGVjdGVkRGF0YXMubWFwKHJlY29yZCA9PiByZWNvcmQuZ2V0SWQoKSlcbiAgICBcbiAgICAvLyBVcGRhdGUgb3V0cHV0RFMgc2VsZWN0aW9uXG4gICAgaWYgKHR5cGVvZiBvdXRwdXREUy5zZWxlY3RSZWNvcmRzQnlJZHMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIG91dHB1dERTLnNlbGVjdFJlY29yZHNCeUlkcyhyZWNvcmRJZHMsIHVwZGF0ZWRTZWxlY3RlZERhdGFzIGFzIEZlYXR1cmVEYXRhUmVjb3JkW10pXG4gICAgfVxuICAgIFxuICAgIC8vIElNUE9SVEFOVDogUHVibGlzaCBjdXN0b20gZXZlbnQgc28gd2lkZ2V0IGNhbiB1cGRhdGUgbGFzdFNlbGVjdGlvbiBzdGF0ZVxuICAgIC8vIFRoaXMgZW5zdXJlcyByZXN0b3JhdGlvbiByZXN0b3JlcyB0aGUgY29ycmVjdCAodXBkYXRlZCkgY291bnRcbiAgICBjb25zdCBvcmlnaW5EUyA9IChvdXRwdXREUyBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlKS5nZXRPcmlnaW5EYXRhU291cmNlcygpPy5bMF0gYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICAgIGNvbnN0IGRhdGFTb3VyY2VJZCA9IG9yaWdpbkRTPy5pZFxuICAgIGNvbnN0IHNlbGVjdGlvbkV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCdxdWVyeXNpbXBsZS1zZWxlY3Rpb24tY2hhbmdlZCcsIHtcbiAgICAgIGRldGFpbDoge1xuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgcmVjb3JkSWRzLCAvLyBVcGRhdGVkIHJlY29yZCBJRHMgKHdpdGggcmVtb3ZlZCByZWNvcmQgZXhjbHVkZWQpXG4gICAgICAgIGRhdGFTb3VyY2VJZCxcbiAgICAgICAgb3V0cHV0RHNJZDogb3V0cHV0RFMuaWQsXG4gICAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBxdWVyeUl0ZW0uY29uZmlnSWRcbiAgICAgIH0sXG4gICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgY2FuY2VsYWJsZTogdHJ1ZVxuICAgIH0pXG4gICAgd2luZG93LmRpc3BhdGNoRXZlbnQoc2VsZWN0aW9uRXZlbnQpXG4gICAgXG4gICAgLy8gSWYgaW4gYWNjdW11bGF0aW9uIG1vZGUsIGFsc28gcmVtb3ZlIGZyb20gYWNjdW11bGF0ZWQgcmVjb3Jkc1xuICAgIGNvbnN0IGlzQWNjdW11bGF0aW9uTW9kZSA9IHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb25cbiAgICBpZiAoaXNBY2N1bXVsYXRpb25Nb2RlICYmIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlICYmIGFjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgcmVtYWluaW5nUmVjb3JkcyA9IHJlbW92ZVJlc3VsdHNGcm9tQWNjdW11bGF0ZWQoXG4gICAgICAgIG91dHB1dERTIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2UsXG4gICAgICAgIFtkYXRhXSxcbiAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzXG4gICAgICApXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ3gtYnV0dG9uLXJlbW92ZWQtZnJvbS1hY2N1bXVsYXRlZCcsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICByZW1vdmVkUmVjb3JkSWQ6IGRhdGFJZCxcbiAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnRCZWZvcmU6IGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgIHJlbWFpbmluZ1JlY29yZHNDb3VudDogcmVtYWluaW5nUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgIHdhc1JlbW92ZWQ6IHJlbWFpbmluZ1JlY29yZHMubGVuZ3RoIDwgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aFxuICAgICAgfSlcbiAgICAgIFxuICAgICAgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UocmVtYWluaW5nUmVjb3JkcylcbiAgICB9XG4gICAgXG4gICAgLy8gTG9nIGFmdGVyIHJlbW92ZVJlY29yZCBjb21wbGV0ZXMgdG8gY2hlY2sgaWYgZXhwYW5kQWxsIGNoYW5nZWRcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ3JlbW92ZVJlY29yZC1jb21wbGV0ZWQnLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgcmVtb3ZlZFJlY29yZElkOiBkYXRhSWQsXG4gICAgICAgIGV4cGFuZEFsbEJlZm9yZTogY3VycmVudEV4cGFuZEFsbCxcbiAgICAgICAgZXhwYW5kQWxsQWZ0ZXI6IGV4cGFuZEFsbCxcbiAgICAgICAgZXhwYW5kQWxsQ2hhbmdlZDogY3VycmVudEV4cGFuZEFsbCAhPT0gZXhwYW5kQWxsLFxuICAgICAgICBleHBhbmRCeURlZmF1bHRQcm9wOiBleHBhbmRBbGwsIC8vIFdoYXQgd2lsbCBiZSBwYXNzZWQgdG8gU2ltcGxlTGlzdFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgfSwgMClcbiAgfSwgW291dHB1dERTLCB3aWRnZXRJZCwgcmVzdWx0Q291bnQsIG9uTmF2QmFjaywgcmVzdWx0c01vZGUsIGFjY3VtdWxhdGVkUmVjb3Jkcywgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UsIHF1ZXJ5SXRlbS5jb25maWdJZCwgZXhwYW5kQWxsXSlcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPSdxdWVyeS1yZXN1bHQgaC0xMDAnIGNzcz17cmVzdWx0U3R5bGV9IHJvbGU9J2xpc3Rib3gnIGFyaWEtbGFiZWw9e2dldEkxOG5NZXNzYWdlKCdyZXN1bHRzJyl9PlxuICAgICAgPERhdGFTb3VyY2VDb21wb25lbnQgdXNlRGF0YVNvdXJjZT17cmVzdWx0VXNlT3V0cHV0RGF0YVNvdXJjZX0gb25EYXRhU291cmNlSW5mb0NoYW5nZT17aGFuZGxlRGF0YVNvdXJjZUluZm9DaGFuZ2V9IC8+XG4gICAgICBcbiAgICAgIHsvKiBFcnJvciBNZXNzYWdlICovfVxuICAgICAge3NlbGVjdGlvbkVycm9yICYmIChcbiAgICAgICAgPGRpdiBjc3M9e2Nzc2BwYWRkaW5nOiAwIDE2cHg7IG1hcmdpbi10b3A6IDhweDtgfT5cbiAgICAgICAgICA8RXJyb3JNZXNzYWdlIFxuICAgICAgICAgICAgZXJyb3I9e3NlbGVjdGlvbkVycm9yfSBcbiAgICAgICAgICAgIG9uRGlzbWlzcz17KCkgPT4gc2V0U2VsZWN0aW9uRXJyb3IobnVsbCl9XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICApfVxuICAgICAgXG4gICAgICA8ZGl2IGNsYXNzTmFtZT0ncXVlcnktcmVzdWx0X19oZWFkZXIgZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlciBteC00Jz5cbiAgICAgICAgPEJ1dHRvbiBhcmlhLWxhYmVsPXtnZXRJMThuTWVzc2FnZSgnYmFjaycpfSByZWY9e2JhY2tCdG5SZWZ9IGNsYXNzTmFtZT0ncC0wIG1yLTInIHNpemU9J3NtJyB2YXJpYW50PSd0ZXh0JyBjb2xvcj0naW5oZXJpdCcgaWNvbiBvbkNsaWNrPXsoKSA9PiB7IG9uTmF2QmFjaygpIH19PlxuICAgICAgICAgIDxBcnJvd0xlZnRPdXRsaW5lZCBhdXRvRmxpcC8+XG4gICAgICAgIDwvQnV0dG9uPlxuICAgICAgICB7Y3VycmVudEl0ZW0ucmVzdWx0c0xhYmVsID8/IGdldEkxOG5NZXNzYWdlKCdyZXN1bHRzJyl9XG4gICAgICAgIHsoXG4gICAgICAgICAgPFJlYWN0LkZyYWdtZW50PlxuICAgICAgICAgICAgPFRvb2x0aXAgdGl0bGU9e2dldEkxOG5NZXNzYWdlKCdjbGVhclJlc3VsdCcpfSBwbGFjZW1lbnQ9J2JvdHRvbSc+XG4gICAgICAgICAgICAgIDxCdXR0b24gY2xhc3NOYW1lPSdtbC1hdXRvJyBpY29uIHNpemU9J3NtJyB2YXJpYW50PSd0ZXh0JyBjb2xvcj0naW5oZXJpdCcgb25DbGljaz17Y2xlYXJSZXN1bHRzfSBhcmlhLWxhYmVsPXtnZXRJMThuTWVzc2FnZSgnY2xlYXJSZXN1bHQnKX0+XG4gICAgICAgICAgICAgICAgPEljb24gaWNvbj17aWNvbk1hcC50b29sRGVsZXRlfSAvPlxuICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICAgIHsvKiBEYXRhIGFjdGlvbnMgZmlsdGVyZWQgdmlhIG1hbmlmZXN0Lmpzb24gZXhjbHVkZURhdGFBY3Rpb25zIC0gU2hvdyBvbiBNYXAsIFNlbGVjdCBMb2FkZWQsIGFuZCBDbGVhciBTZWxlY3Rpb24gYXJlIGV4Y2x1ZGVkLlxuICAgICAgICAgICAgICAgIEN1c3RvbSBcIkFkZCB0byBNYXBcIiBhY3Rpb24gaXMgcHJvdmlkZWQgdmlhIGV4dHJhQWN0aW9ucyBhbmQgdXNlcyBRdWVyeVNpbXBsZSdzIHNlbGVjdGlvbiBwcm9jZXNzLiAqL31cbiAgICAgICAgICAgIHtlbmFibGVEYXRhQWN0aW9uICYmIG91dHB1dERTICYmIChcbiAgICAgICAgICAgICAgPFJlYWN0LkZyYWdtZW50PlxuICAgICAgICAgICAgICAgIDxkaXYgY3NzPXtjc3Ngd2lkdGg6IDFweDsgaGVpZ2h0OiAxNnB4OyBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1zeXMtY29sb3ItZGl2aWRlci1pbnB1dCk7YH0+PC9kaXY+XG4gICAgICAgICAgICAgICAgPERhdGFBY3Rpb25MaXN0XG4gICAgICAgICAgICAgICAgICB3aWRnZXRJZD17d2lkZ2V0SWR9XG4gICAgICAgICAgICAgICAgICBkYXRhU2V0cz17YWN0aW9uRGF0YVNldHN9XG4gICAgICAgICAgICAgICAgICBsaXN0U3R5bGU9e0RhdGFBY3Rpb25MaXN0U3R5bGUuRHJvcGRvd259XG4gICAgICAgICAgICAgICAgICBidXR0b25TaXplPSdzbSdcbiAgICAgICAgICAgICAgICAgIGJ1dHRvblR5cGU9J3RlcnRpYXJ5J1xuICAgICAgICAgICAgICAgICAgZXh0cmFBY3Rpb25zPXtleHRyYUFjdGlvbnN9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9SZWFjdC5GcmFnbWVudD5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC9SZWFjdC5GcmFnbWVudD5cbiAgICAgICAgKX1cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzc05hbWU9J3F1ZXJ5LXJlc3VsdC1jb250YWluZXIgbXQtMSc+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSdxdWVyeS1yZXN1bHQtaW5mbyBtYi0yIHB4LTQgZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNvbnRlbnQtYmV0d2Vlbicgcm9sZT0nYWxlcnQnIGFyaWEtbGl2ZT0ncG9saXRlJz5cbiAgICAgICAgICA8c3Bhbj57Z2V0VGlwTWVzc2FnZSgpfTwvc3Bhbj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlcic+XG4gICAgICAgICAgICA8VG9vbHRpcCB0aXRsZT17ZXhwYW5kQWxsID8gZ2V0STE4bk1lc3NhZ2UoJ2NvbGxhcHNlQWxsJykgOiBnZXRJMThuTWVzc2FnZSgnZXhwYW5kQWxsJyl9IHBsYWNlbWVudD0ndG9wJz5cbiAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgIHNpemU9J3NtJ1xuICAgICAgICAgICAgICAgIHR5cGU9J3RlcnRpYXJ5J1xuICAgICAgICAgICAgICAgIGljb25cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXt0b2dnbGVFeHBhbmRBbGx9XG4gICAgICAgICAgICAgICAgYXJpYS1sYWJlbD17ZXhwYW5kQWxsID8gZ2V0STE4bk1lc3NhZ2UoJ2NvbGxhcHNlQWxsJykgOiBnZXRJMThuTWVzc2FnZSgnZXhwYW5kQWxsJyl9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICB7ZXhwYW5kQWxsID8gPENvbGxhcHNlQWxsT3V0bGluZWQgLz4gOiA8RXhwYW5kQWxsT3V0bGluZWQgLz59XG4gICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgPC9Ub29sdGlwPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgey8qIEZPUkNFRDogQWx3YXlzIFNpbXBsZUxpc3QgLSBMYXp5TG9hZCBhbmQgTXVsdGlQYWdlIHJlbW92ZWQgKi99XG4gICAgICAgIHtyZXN1bHRDb3VudCA+IDAgJiYgKFxuICAgICAgICAgIDxTaW1wbGVMaXN0XG4gICAgICAgICAgICBrZXk9J3NpbXBsZSdcbiAgICAgICAgICAgIHdpZGdldElkPXt3aWRnZXRJZH1cbiAgICAgICAgICAgIHF1ZXJ5SXRlbT17cXVlcnlJdGVtfVxuICAgICAgICAgICAgb3V0cHV0RFM9e291dHB1dERTIGFzIGFueX1cbiAgICAgICAgICAgIHJlY29yZHM9e2ZpbHRlcmVkUmVjb3Jkc0Zvckxpc3R9XG4gICAgICAgICAgICBkaXJlY3Rpb249e2RpcmVjdGlvbn1cbiAgICAgICAgICAgIG9uRXNjYXBlPXtoYW5kbGVFc2NhcGV9XG4gICAgICAgICAgICBvblNlbGVjdENoYW5nZT17dG9nZ2xlU2VsZWN0aW9ufVxuICAgICAgICAgICAgb25SZW1vdmU9e3JlbW92ZVJlY29yZH1cbiAgICAgICAgICAgIGV4cGFuZEJ5RGVmYXVsdD17ZXhwYW5kQWxsfVxuICAgICAgICAgICAgaXRlbUV4cGFuZFN0YXRlcz17aXRlbUV4cGFuZFN0YXRlc31cbiAgICAgICAgICAgIHJlbW92ZWRSZWNvcmRJZHM9e3JlbW92ZWRSZWNvcmRJZHN9XG4gICAgICAgICAgICBvblJlbmRlckRvbmU9e2hhbmRsZVJlbmRlckRvbmV9XG4gICAgICAgICAgLz5cbiAgICAgICAgKX1cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApXG59XG4iLCJpbXBvcnQgeyBSZWFjdCB9IGZyb20gJ2ppbXUtY29yZSdcblxuZXhwb3J0IGNvbnN0IFF1ZXJ5VGFza0NvbnRleHQgPSBSZWFjdC5jcmVhdGVDb250ZXh0PFF1ZXJ5VGFza0NvbnRleHRQcm9wcz4oe1xuICByZXNldFN5bWJvbDogbnVsbFxufSlcblxuZXhwb3J0IGludGVyZmFjZSBRdWVyeVRhc2tDb250ZXh0UHJvcHMge1xuICByZXNldFN5bWJvbD86IHN5bWJvbCAvLyB1c2VkIHRvIHRyaWdnZXIgcmVzZXQgb3BlcmF0aW9uXG59XG5cblxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQge1xuICBSZWFjdCxcbiAganN4LFxuICBjc3MsXG4gIGNsYXNzTmFtZXMsXG4gIHR5cGUgRGF0YVNvdXJjZSxcbiAgdHlwZSBJbW11dGFibGVPYmplY3QsXG4gIHR5cGUgSU1TdGF0ZSxcbiAgdHlwZSBJTVNxbEV4cHJlc3Npb24sXG4gIHR5cGUgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSxcbiAgUmVhY3RSZWR1eCxcbiAgaG9va3MsXG4gIERhdGFTb3VyY2VNYW5hZ2VyLFxuICB0eXBlIFNxbFF1ZXJ5UGFyYW1zLFxuICBJbW11dGFibGVcbn0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgQnV0dG9uLCBUb29sdGlwLCBDaGVja2JveCB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQgeyBsb2FkQXJjR0lTSlNBUElNb2R1bGVzIH0gZnJvbSAnamltdS1hcmNnaXMnXG5pbXBvcnQgeyBTcWxFeHByZXNzaW9uUnVudGltZSwgZ2V0U2hvd25DbGF1c2VOdW1iZXJCeUV4cHJlc3Npb24gfSBmcm9tICdqaW11LXVpL2Jhc2ljL3NxbC1leHByZXNzaW9uLXJ1bnRpbWUnXG5pbXBvcnQgeyB0eXBlIFF1ZXJ5SXRlbVR5cGUsIHR5cGUgU3BhdGlhbEZpbHRlck9iaiwgU3BhdGlhbFJlbGF0aW9uLCB0eXBlIFVuaXRUeXBlIH0gZnJvbSAnLi4vY29uZmlnJ1xuaW1wb3J0IHsgREVGQVVMVF9RVUVSWV9JVEVNIH0gZnJvbSAnLi4vZGVmYXVsdC1xdWVyeS1pdGVtJ1xuaW1wb3J0IGRlZmF1bHRNZXNzYWdlIGZyb20gJy4vdHJhbnNsYXRpb25zL2RlZmF1bHQnXG5pbXBvcnQgeyBRdWVyeVRhc2tTcGF0aWFsRm9ybSB9IGZyb20gJy4vcXVlcnktdGFzay1zcGF0aWFsLWZvcm0nXG5pbXBvcnQgeyB1c2VBdXRvSGVpZ2h0IH0gZnJvbSAnLi91c2VBdXRvSGVpZ2h0J1xuaW1wb3J0IHsgY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlciB9IGZyb20gJ3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uJ1xuXG5jb25zdCBkZWJ1Z0xvZ2dlciA9IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIoKVxuaW1wb3J0IHsgUXVlcnlUYXNrQ29udGV4dCB9IGZyb20gJy4vcXVlcnktdGFzay1jb250ZXh0J1xuaW1wb3J0IHsgSW5mb091dGxpbmVkIH0gZnJvbSAnamltdS1pY29ucy9vdXRsaW5lZC9zdWdnZXN0ZWQvaW5mbydcbmltcG9ydCB7IGNsZWFyU2VsZWN0aW9uSW5EYXRhU291cmNlcyB9IGZyb20gJy4vc2VsZWN0aW9uLXV0aWxzJ1xuXG5leHBvcnQgaW50ZXJmYWNlIFF1ZXJ5VGFza0l0ZW1Qcm9wcyB7XG4gIHdpZGdldElkOiBzdHJpbmdcbiAgY29uZmlnSWQ6IHN0cmluZ1xuICBzcGF0aWFsRmlsdGVyRW5hYmxlZDogYm9vbGVhblxuICBkYXRhc291cmNlUmVhZHk6IGJvb2xlYW5cbiAgb3V0cHV0RFM/OiBEYXRhU291cmNlXG4gIG9uRm9ybVN1Ym1pdDogKHNxbEV4cHJPYmo6IElNU3FsRXhwcmVzc2lvbiwgc3BhdGlhbEZpbHRlcjogU3BhdGlhbEZpbHRlck9iaiwgem9vbVRvU2VsZWN0ZWQ/OiBib29sZWFuKSA9PiB2b2lkXG4gIGRhdGFBY3Rpb25GaWx0ZXI/OiBTcWxRdWVyeVBhcmFtc1xuICBpbml0aWFsSW5wdXRWYWx1ZT86IHN0cmluZ1xuICBvbkhhc2hQYXJhbWV0ZXJVc2VkPzogKHNob3J0SWQ6IHN0cmluZykgPT4gdm9pZFxuICBxdWVyeUl0ZW1TaG9ydElkPzogc3RyaW5nXG59XG5cbmNvbnN0IGdldEZvcm1TdHlsZSA9IChpc0F1dG9IZWlnaHQ6IGJvb2xlYW4pID0+IHtcbiAgcmV0dXJuIGNzc2BcbiAgICBmbGV4OiAxIDEgYXV0bztcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgbWluLWhlaWdodDogMDtcbiAgICAuZm9ybS10aXRsZSB7XG4gICAgICBjb2xvcjogdmFyKC0tc3lzLWNvbG9yLXN1cmZhY2UtcGFwZXItdGV4dCk7XG4gICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgZm9udC1zaXplOiAwLjgxMjVyZW07XG4gICAgICBsaW5lLWhlaWdodDogMS41O1xuICAgICAgbWFyZ2luLXRvcDogMCAhaW1wb3J0YW50O1xuICAgIH1cbiAgICAucXVlcnktZm9ybV9fY29udGVudCB7XG4gICAgICBmbGV4OiAxIDEgJHtpc0F1dG9IZWlnaHQgPyAnYXV0bycgOiAnYXV0byd9O1xuICAgICAgbWF4LWhlaWdodDogJHtpc0F1dG9IZWlnaHQgPyAnNjEuOHZoJyA6ICdub25lJ307XG4gICAgICBvdmVyZmxvdzogYXV0bztcbiAgICAgIHBhZGRpbmctYm90dG9tOiAwO1xuICAgIH1cbiAgICAucXVlcnktZm9ybV9fYWN0aW9ucyB7XG4gICAgICBmbGV4LXNocmluazogMDtcbiAgICAgIG1hcmdpbi10b3A6IDA7XG4gICAgICBwYWRkaW5nLXRvcDogNHB4O1xuICAgIH1cbiAgYFxufVxuXG5leHBvcnQgZnVuY3Rpb24gUXVlcnlUYXNrRm9ybSAocHJvcHM6IFF1ZXJ5VGFza0l0ZW1Qcm9wcykge1xuICBjb25zdCB7IHdpZGdldElkLCBjb25maWdJZCwgb3V0cHV0RFMsIHNwYXRpYWxGaWx0ZXJFbmFibGVkLCBkYXRhc291cmNlUmVhZHksIG9uRm9ybVN1Ym1pdCwgZGF0YUFjdGlvbkZpbHRlciwgaW5pdGlhbElucHV0VmFsdWUsIG9uSGFzaFBhcmFtZXRlclVzZWQsIHF1ZXJ5SXRlbVNob3J0SWQgfSA9IHByb3BzXG4gIGNvbnN0IHByZURhdGFBY3Rpb25GaWx0ZXIgPSBob29rcy51c2VQcmV2aW91cyhkYXRhQWN0aW9uRmlsdGVyKVxuICBjb25zdCBxdWVyeUl0ZW06IEltbXV0YWJsZU9iamVjdDxRdWVyeUl0ZW1UeXBlPiA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XG4gICAgY29uc3Qgd2lkZ2V0SnNvbiA9IHN0YXRlLmFwcENvbmZpZy53aWRnZXRzW3dpZGdldElkXVxuICAgIHJldHVybiB3aWRnZXRKc29uLmNvbmZpZy5xdWVyeUl0ZW1zLmZpbmQoaXRlbSA9PiBpdGVtLmNvbmZpZ0lkID09PSBjb25maWdJZClcbiAgfSlcbiAgY29uc3QgY3VycmVudEl0ZW0gPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1FVRVJZX0lURU0sIHF1ZXJ5SXRlbSlcbiAgY29uc3QgZ2V0STE4bk1lc3NhZ2UgPSBob29rcy51c2VUcmFuc2xhdGlvbihkZWZhdWx0TWVzc2FnZSlcbiAgY29uc3QgW3Jlc2V0U3ltYm9sLCBzZXRSZXNldFN5bWJvbF0gPSBSZWFjdC51c2VTdGF0ZTxzeW1ib2w+KG51bGwpXG4gIC8vIFJ1bnRpbWUgem9vbSBwcmVmZXJlbmNlIC0gaW5pdGlhbGl6ZWQgd2l0aCBjb25maWcgdmFsdWUsIGNhbiBiZSBvdmVycmlkZGVuIGJ5IHVzZXJcbiAgY29uc3QgW3J1bnRpbWVab29tVG9TZWxlY3RlZCwgc2V0UnVudGltZVpvb21Ub1NlbGVjdGVkXSA9IFJlYWN0LnVzZVN0YXRlPGJvb2xlYW4+KFxuICAgIHF1ZXJ5SXRlbT8uem9vbVRvU2VsZWN0ZWQgPz8gdHJ1ZVxuICApXG5cbiAgLy8gU3luYyBydW50aW1lIHpvb20gcHJlZmVyZW5jZSB3aGVuIHF1ZXJ5IGl0ZW0gY2hhbmdlcyAoZS5nLiwgc3dpdGNoaW5nIGJldHdlZW4gcXVlcmllcylcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBzZXRSdW50aW1lWm9vbVRvU2VsZWN0ZWQocXVlcnlJdGVtPy56b29tVG9TZWxlY3RlZCA/PyB0cnVlKVxuICB9LCBbcXVlcnlJdGVtPy56b29tVG9TZWxlY3RlZCwgcXVlcnlJdGVtPy5jb25maWdJZF0pXG5cbiAgLy8gY29uc3QgW2RhdGFTb3VyY2UsIHNldERhdGFTb3VyY2VdID0gUmVhY3QudXNlU3RhdGU8RGF0YVNvdXJjZT4obnVsbClcbiAgY29uc3Qge1xuICAgIHVzZUF0dHJpYnV0ZUZpbHRlcixcbiAgICB1c2VTcGF0aWFsRmlsdGVyLFxuICAgIHNwYXRpYWxGaWx0ZXJUeXBlcyxcbiAgICBzcWxFeHByT2JqLFxuICAgIHNwYXRpYWxNYXBXaWRnZXRJZHMsXG4gICAgc3BhdGlhbEludGVyYWN0aXZlQ3JlYXRlVG9vbFR5cGVzLFxuICAgIHNwYXRpYWxSZWxhdGlvblVzZURhdGFTb3VyY2VzLFxuICAgIHNwYXRpYWxJbmNsdWRlUnVudGltZURhdGEsXG4gICAgc3BhdGlhbFJlbGF0aW9ucyxcbiAgICBzcGF0aWFsUmVsYXRpb25FbmFibGVCdWZmZXIsXG4gICAgc3BhdGlhbFJlbGF0aW9uQnVmZmVyRGlzdGFuY2UsXG4gICAgc3BhdGlhbFJlbGF0aW9uQnVmZmVyVW5pdCxcbiAgICBzcGF0aWFsSW50ZXJhY3RpdmVFbmFibGVCdWZmZXIsXG4gICAgc3BhdGlhbEludGVyYWN0aXZlQnVmZmVyRGlzdGFuY2UsXG4gICAgc3BhdGlhbEludGVyYWN0aXZlQnVmZmVyVW5pdCxcbiAgICBhdHRyaWJ1dGVGaWx0ZXJMYWJlbCA9IGdldEkxOG5NZXNzYWdlKCdhdHRyaWJ1dGVGaWx0ZXInKSxcbiAgICBzcGF0aWFsRmlsdGVyTGFiZWwgPSBnZXRJMThuTWVzc2FnZSgnc3BhdGlhbEZpbHRlcicpLFxuICAgIGF0dHJpYnV0ZUZpbHRlckRlc2MsXG4gICAgc3BhdGlhbEZpbHRlckRlc2NcbiAgfSA9IGN1cnJlbnRJdGVtXG4gIGNvbnN0IFthdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqLCBzZXRBdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqXSA9IFJlYWN0LnVzZVN0YXRlPElNU3FsRXhwcmVzc2lvbj4oc3FsRXhwck9iailcbiAgY29uc3Qgc3BhdGlhbEZpbHRlck9ialJlZiA9IFJlYWN0LnVzZVJlZjxTcGF0aWFsRmlsdGVyT2JqPihudWxsKVxuICBjb25zdCBzcGF0aWFsUmVsYXRpb25SZWYgPSBSZWFjdC51c2VSZWY8U3BhdGlhbFJlbGF0aW9uPihTcGF0aWFsUmVsYXRpb24uSW50ZXJzZWN0KVxuICBjb25zdCBidWZmZXJSZWYgPSBSZWFjdC51c2VSZWY8eyBkaXN0YW5jZTogbnVtYmVyLCB1bml0OiBVbml0VHlwZSB9PihudWxsKVxuICBjb25zdCBhcHBseUJ1dHRvblJlZiA9IFJlYWN0LnVzZVJlZjxIVE1MQnV0dG9uRWxlbWVudD4obnVsbClcbiAgY29uc3QgaXNBdXRvSGVpZ2h0ID0gdXNlQXV0b0hlaWdodCgpXG4gIGNvbnN0IHNob3dDbGF1c2VOdW1iZXIgPSBSZWFjdC51c2VSZWYoZ2V0U2hvd25DbGF1c2VOdW1iZXJCeUV4cHJlc3Npb24oc3FsRXhwck9iaikpXG4gIGNvbnN0IGluaXRpYWxWYWx1ZVNldFJlZiA9IFJlYWN0LnVzZVJlZjxzdHJpbmcgfCBudWxsPihudWxsKSAvLyBUcmFjayB3aGljaCBjb25maWdJZCB3ZSd2ZSBzZXQgdGhlIHZhbHVlIGZvclxuICBjb25zdCBsYXN0VmFsdWVTZXRSZWYgPSBSZWFjdC51c2VSZWY8c3RyaW5nIHwgbnVsbD4obnVsbCkgLy8gVHJhY2sgdGhlIGxhc3QgdmFsdWUgdGhhdCB3YXMgc2V0XG4gIGNvbnN0IGhhc2hUcmlnZ2VyZWRSZWYgPSBSZWFjdC51c2VSZWY8Ym9vbGVhbj4oZmFsc2UpIC8vIFRyYWNrIGlmIHF1ZXJ5IHdhcyB0cmlnZ2VyZWQgdmlhIGhhc2ggcGFyYW1ldGVyXG5cbiAgY29uc3Qgb3JpZ2luRFMgPSBvdXRwdXREUz8uZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKVswXVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBpbnB1dCB2YWx1ZSBmcm9tIFVSTCBoYXNoIHBhcmFtZXRlcnMgd2hlbjpcbiAgICogMS4gRGF0YXNvdXJjZSBpcyByZWFkeVxuICAgKiAyLiBXZSBoYXZlIGFuIGluaXRpYWxJbnB1dFZhbHVlIGZyb20gVVJMIGhhc2hcbiAgICogMy4gV2UgaGF2ZW4ndCBhbHJlYWR5IHNldCBpdCBmb3IgdGhpcyBjb25maWdJZCwgT1IgdGhlIHZhbHVlIGhhcyBjaGFuZ2VkXG4gICAqIFxuICAgKiBVc2VzIGJvdGggUmVhY3Qgc3RhdGUgdXBkYXRlcyBhbmQgRE9NIG1hbmlwdWxhdGlvbiB0byBlbnN1cmUgdGhlIHZhbHVlXG4gICAqIGlzIHByb3Blcmx5IHNldCBpbiBTcWxFeHByZXNzaW9uUnVudGltZSdzIGludGVybmFsIHN0YXRlLlxuICAgKi9cbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBSZXNldCBmbGFnIGlmIGNvbmZpZ0lkIGNoYW5nZWQgKHN3aXRjaGVkIHRvIGRpZmZlcmVudCBxdWVyeSlcbiAgICBpZiAoaW5pdGlhbFZhbHVlU2V0UmVmLmN1cnJlbnQgIT09IG51bGwgJiYgaW5pdGlhbFZhbHVlU2V0UmVmLmN1cnJlbnQgIT09IGNvbmZpZ0lkKSB7XG4gICAgICBpbml0aWFsVmFsdWVTZXRSZWYuY3VycmVudCA9IG51bGxcbiAgICAgIGxhc3RWYWx1ZVNldFJlZi5jdXJyZW50ID0gbnVsbFxuICAgICAgaGFzaFRyaWdnZXJlZFJlZi5jdXJyZW50ID0gZmFsc2UgLy8gUmVzZXQgaGFzaCB0cmlnZ2VyIGZsYWcgd2hlbiBzd2l0Y2hpbmcgcXVlcmllc1xuICAgIH1cbiAgICBcbiAgICAvLyBDaGVjayBpZiB2YWx1ZSBoYXMgY2hhbmdlZCBmb3IgdGhlIHNhbWUgY29uZmlnSWRcbiAgICBjb25zdCB2YWx1ZUNoYW5nZWQgPSBsYXN0VmFsdWVTZXRSZWYuY3VycmVudCAhPT0gbnVsbCAmJiBcbiAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0VmFsdWVTZXRSZWYuY3VycmVudCAhPT0gaW5pdGlhbElucHV0VmFsdWUgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICBpbml0aWFsVmFsdWVTZXRSZWYuY3VycmVudCA9PT0gY29uZmlnSWRcbiAgICBcbiAgICAvLyBTZXQgdGhlIHZhbHVlIGlmOlxuICAgIC8vIC0gV2UgaGF2ZW4ndCBzZXQgaXQgZm9yIHRoaXMgY29uZmlnSWQgeWV0LCBPUlxuICAgIC8vIC0gVGhlIHZhbHVlIGhhcyBjaGFuZ2VkIGZvciB0aGUgc2FtZSBjb25maWdJZCAoaGFzaCBwYXJhbWV0ZXIgdXBkYXRlZClcbiAgICBjb25zdCBzaG91bGRTZXRWYWx1ZSA9IGRhdGFzb3VyY2VSZWFkeSAmJiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaW5pdGlhbElucHV0VmFsdWUgJiYgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNxbEV4cHJPYmo/LnBhcnRzPy5sZW5ndGggPiAwICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgIChpbml0aWFsVmFsdWVTZXRSZWYuY3VycmVudCAhPT0gY29uZmlnSWQgfHwgdmFsdWVDaGFuZ2VkKVxuICAgIFxuICAgIGlmIChzaG91bGRTZXRWYWx1ZSkge1xuICAgICAgY29uc3QgZmlyc3RQYXJ0ID0gc3FsRXhwck9iai5wYXJ0c1swXVxuICAgICAgLy8gQ2hlY2sgaWYgdGhlIGZpcnN0IHBhcnQgaXMgYSBTSU5HTEUgY2xhdXNlIChub3QgYSBTcWxDbGF1c2VTZXQpXG4gICAgICBpZiAoZmlyc3RQYXJ0ICYmICd0eXBlJyBpbiBmaXJzdFBhcnQgJiYgZmlyc3RQYXJ0LnR5cGUgPT09ICdTSU5HTEUnICYmICd2YWx1ZU9wdGlvbnMnIGluIGZpcnN0UGFydCkge1xuICAgICAgICAvLyBVcGRhdGUgdGhlIGV4cHJlc3Npb24gb2JqZWN0IHdpdGggdGhlIGluaXRpYWwgdmFsdWVcbiAgICAgICAgY29uc3QgdXBkYXRlZCA9IHNxbEV4cHJPYmouc2V0SW4oWydwYXJ0cycsICcwJywgJ3ZhbHVlT3B0aW9ucycsICd2YWx1ZSddLCBpbml0aWFsSW5wdXRWYWx1ZSlcbiAgICAgICAgc2V0QXR0cmlidXRlRmlsdGVyU3FsRXhwck9iaih1cGRhdGVkKVxuICAgICAgICAvLyBVcGRhdGUgY2xhdXNlIG51bWJlciBmb3IgdGhlIHVwZGF0ZWQgZXhwcmVzc2lvblxuICAgICAgICBzaG93Q2xhdXNlTnVtYmVyLmN1cnJlbnQgPSBnZXRTaG93bkNsYXVzZU51bWJlckJ5RXhwcmVzc2lvbih1cGRhdGVkKVxuICAgICAgICBpbml0aWFsVmFsdWVTZXRSZWYuY3VycmVudCA9IGNvbmZpZ0lkXG4gICAgICAgIGxhc3RWYWx1ZVNldFJlZi5jdXJyZW50ID0gaW5pdGlhbElucHV0VmFsdWVcbiAgICAgICAgXG4gICAgICAgIC8vIEFsc28gc2V0IHRoZSB2YWx1ZSBkaXJlY3RseSBvbiB0aGUgaW5wdXQgZWxlbWVudCBhZnRlciBhIGRlbGF5IHRvIGVuc3VyZSBjb21wb25lbnQgaXMgcmVuZGVyZWRcbiAgICAgICAgLy8gVGhpcyBpcyBuZWNlc3NhcnkgYmVjYXVzZSBTcWxFeHByZXNzaW9uUnVudGltZSBtYXkgbm90IHN5bmMgZnJvbSB0aGUgZXhwcmVzc2lvbiBwcm9wIGFsb25lXG4gICAgICAgIGNvbnN0IHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIC8vIEZpbmQgdGhlIGlucHV0IGVsZW1lbnQgd2l0aGluIFNxbEV4cHJlc3Npb25SdW50aW1lXG4gICAgICAgICAgY29uc3QgZm9ybUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBbZGF0YS13aWRnZXQtaWQ9XCIke3dpZGdldElkfVwiXWApPy5jbG9zZXN0KCcucXVlcnktZm9ybScpIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucXVlcnktZm9ybScpXG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKGZvcm1FbGVtZW50KSB7XG4gICAgICAgICAgICAvLyBMb29rIGZvciB0ZXh0IGlucHV0IGVsZW1lbnRzXG4gICAgICAgICAgICBjb25zdCB0ZXh0SW5wdXRzID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT1cInRleHRcIl0nKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB0ZXh0SW5wdXRzLmZvckVhY2goKGlucHV0OiBIVE1MSW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgdmFsdWUgaWYgaW5wdXQgaXMgZW1wdHkgT1IgaWYgdGhlIHZhbHVlIGhhcyBjaGFuZ2VkIChoYXNoIHBhcmFtZXRlciB1cGRhdGVkKVxuICAgICAgICAgICAgICBjb25zdCBzaG91bGRVcGRhdGUgPSAhaW5wdXQudmFsdWUgfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQudmFsdWUudHJpbSgpID09PSAnJyB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dC52YWx1ZSAhPT0gaW5pdGlhbElucHV0VmFsdWVcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGlmIChzaG91bGRVcGRhdGUpIHtcbiAgICAgICAgICAgICAgICAvLyBGb2N1cyB0aGUgaW5wdXQgZmlyc3RcbiAgICAgICAgICAgICAgICBpbnB1dC5mb2N1cygpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gU2V0IHRoZSB2YWx1ZVxuICAgICAgICAgICAgICAgIGlucHV0LnZhbHVlID0gaW5pdGlhbElucHV0VmFsdWVcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBDcmVhdGUgYW5kIGRpc3BhdGNoIGlucHV0IGV2ZW50IHdpdGggcHJvcGVyIHByb3BlcnRpZXNcbiAgICAgICAgICAgICAgICBjb25zdCBpbnB1dEV2ZW50ID0gbmV3IEV2ZW50KCdpbnB1dCcsIHsgYnViYmxlczogdHJ1ZSwgY2FuY2VsYWJsZTogdHJ1ZSB9KVxuICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpbnB1dEV2ZW50LCAndGFyZ2V0JywgeyB2YWx1ZTogaW5wdXQsIGVudW1lcmFibGU6IHRydWUgfSlcbiAgICAgICAgICAgICAgICBpbnB1dC5kaXNwYXRjaEV2ZW50KGlucHV0RXZlbnQpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGFuZCBkaXNwYXRjaCBjaGFuZ2UgZXZlbnRcbiAgICAgICAgICAgICAgICBjb25zdCBjaGFuZ2VFdmVudCA9IG5ldyBFdmVudCgnY2hhbmdlJywgeyBidWJibGVzOiB0cnVlLCBjYW5jZWxhYmxlOiB0cnVlIH0pXG4gICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNoYW5nZUV2ZW50LCAndGFyZ2V0JywgeyB2YWx1ZTogaW5wdXQsIGVudW1lcmFibGU6IHRydWUgfSlcbiAgICAgICAgICAgICAgICBpbnB1dC5kaXNwYXRjaEV2ZW50KGNoYW5nZUV2ZW50KVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIEFsc28gdHJ5IFJlYWN0J3Mgc3ludGhldGljIGV2ZW50IGFwcHJvYWNoIHVzaW5nIG5hdGl2ZSB2YWx1ZSBzZXR0ZXJcbiAgICAgICAgICAgICAgICBjb25zdCBuYXRpdmVJbnB1dFZhbHVlU2V0dGVyID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih3aW5kb3cuSFRNTElucHV0RWxlbWVudC5wcm90b3R5cGUsICd2YWx1ZScpPy5zZXRcbiAgICAgICAgICAgICAgICBpZiAobmF0aXZlSW5wdXRWYWx1ZVNldHRlcikge1xuICAgICAgICAgICAgICAgICAgbmF0aXZlSW5wdXRWYWx1ZVNldHRlci5jYWxsKGlucHV0LCBpbml0aWFsSW5wdXRWYWx1ZSlcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHJlYWN0RXZlbnQgPSBuZXcgRXZlbnQoJ2lucHV0JywgeyBidWJibGVzOiB0cnVlIH0pXG4gICAgICAgICAgICAgICAgICBpbnB1dC5kaXNwYXRjaEV2ZW50KHJlYWN0RXZlbnQpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIEJsdXIgdG8gdHJpZ2dlciBhbnkgdmFsaWRhdGlvbiBvciBzdGF0ZSB1cGRhdGVzXG4gICAgICAgICAgICAgICAgaW5wdXQuYmx1cigpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEFmdGVyIHNldHRpbmcgdmFsdWVzIGFuZCBibHVycmluZywgdmVyaWZ5IGlucHV0IHZhbHVlIGlzIHNldCBiZWZvcmUgdHJpZ2dlcmluZyBBcHBseSBidXR0b25cbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICBpZiAoYXBwbHlCdXR0b25SZWYuY3VycmVudCAmJiAhYXBwbHlCdXR0b25SZWYuY3VycmVudC5kaXNhYmxlZCAmJiBkYXRhc291cmNlUmVhZHkpIHtcbiAgICAgICAgICAgICAgICAvLyBWRVJJRklDQVRJT046IEVuc3VyZSBpbnB1dCB2YWx1ZSBpcyBhY3R1YWxseSBzZXQgYmVmb3JlIGV4ZWN1dGluZyBxdWVyeVxuICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgZXNwZWNpYWxseSBpbXBvcnRhbnQgZm9yIGdyb3VwZWQgcXVlcmllcyB3aGVyZSBkcm9wZG93bnMgbmVlZCB0byBiZSBzeW5jaHJvbml6ZWQgZmlyc3RcbiAgICAgICAgICAgICAgICBjb25zdCBmb3JtRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLXdpZGdldC1pZD1cIiR7d2lkZ2V0SWR9XCJdYCk/LmNsb3Nlc3QoJy5xdWVyeS1mb3JtJykgfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5xdWVyeS1mb3JtJylcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAoZm9ybUVsZW1lbnQgJiYgaW5pdGlhbElucHV0VmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHRleHRJbnB1dHMgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPVwidGV4dFwiXScpXG4gICAgICAgICAgICAgICAgICBsZXQgaW5wdXRWYWx1ZVNldCA9IGZhbHNlXG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIHRleHRJbnB1dHMuZm9yRWFjaCgoaW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlucHV0LnZhbHVlID09PSBpbml0aWFsSW5wdXRWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgIGlucHV0VmFsdWVTZXQgPSB0cnVlXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIGlmICghaW5wdXRWYWx1ZVNldCkge1xuICAgICAgICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdpbnB1dC12YWx1ZS1ub3Qtc2V0LXJldHJ5aW5nJyxcbiAgICAgICAgICAgICAgICAgICAgICBleHBlY3RlZFZhbHVlOiBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICBxdWVyeUl0ZW1TaG9ydElkLFxuICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogJ3dpbGwtcmV0cnktYWZ0ZXItZGVsYXknLFxuICAgICAgICAgICAgICAgICAgICAgIG5vdGU6ICdJbnB1dCB2YWx1ZSBub3Qgc2V0LCByZXRyeWluZyB0byBlbnN1cmUgc3luY2hyb25pemF0aW9uJ1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAvLyBSZXRyeSBhZnRlciBhIHNob3J0IGRlbGF5IHRvIGFsbG93IHN0YXRlIHRvIHN5bmNcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgLy8gUmVjdXJzaXZlbHkgY2FsbCB2ZXJpZnlBbmRBcHBseSBpZiBuZWVkZWQsIGJ1dCBsaW1pdCByZXRyaWVzXG4gICAgICAgICAgICAgICAgICAgICAgLy8gRm9yIG5vdywganVzdCByZXRyeSBvbmNlIG1vcmVcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoYXBwbHlCdXR0b25SZWYuY3VycmVudCAmJiAhYXBwbHlCdXR0b25SZWYuY3VycmVudC5kaXNhYmxlZCAmJiBkYXRhc291cmNlUmVhZHkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNldCBoYXNoVHJpZ2dlcmVkUmVmIHRvIGZvcmNlIHpvb20gZm9yIGhhc2gtdHJpZ2dlcmVkIHF1ZXJpZXNcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc2hUcmlnZ2VyZWRSZWYuY3VycmVudCA9IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVtb3ZlIGhhc2ggcGFyYW1ldGVyIGZyb20gVVJMIGJlZm9yZSBBcHBseSBpcyB0cmlnZ2VyZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvbkhhc2hQYXJhbWV0ZXJVc2VkICYmIHF1ZXJ5SXRlbVNob3J0SWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25IYXNoUGFyYW1ldGVyVXNlZChxdWVyeUl0ZW1TaG9ydElkKVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBdXRvLXRyaWdnZXIgQXBwbHkgYnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICBhcHBseUJ1dHRvblJlZi5jdXJyZW50LmNsaWNrKClcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sIDMwMClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC8vIEV4aXQgZWFybHksIHdpbGwgcmV0cnlcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gSW5wdXQgdmFsdWUgaXMgc2V0IGNvcnJlY3RseSwgcHJvY2VlZCB3aXRoIGV4ZWN1dGlvblxuICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgICAgICAgICAgICAgIGV2ZW50OiAnaW5wdXQtdmFsdWUtdmVyaWZpZWQnLFxuICAgICAgICAgICAgICAgICAgZXhwZWN0ZWRWYWx1ZTogaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICAgICAgICAgICAgICBxdWVyeUl0ZW1TaG9ydElkLFxuICAgICAgICAgICAgICAgICAgbm90ZTogJ0lucHV0IHZhbHVlIHZlcmlmaWVkLCBwcm9jZWVkaW5nIHdpdGggcXVlcnkgZXhlY3V0aW9uJ1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gU2V0IGhhc2hUcmlnZ2VyZWRSZWYgdG8gZm9yY2Ugem9vbSBmb3IgaGFzaC10cmlnZ2VyZWQgcXVlcmllc1xuICAgICAgICAgICAgICAgIGhhc2hUcmlnZ2VyZWRSZWYuY3VycmVudCA9IHRydWVcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBSZW1vdmUgaGFzaCBwYXJhbWV0ZXIgZnJvbSBVUkwgYmVmb3JlIEFwcGx5IGlzIHRyaWdnZXJlZCB0byBwcmV2ZW50IHJlLWV4ZWN1dGlvblxuICAgICAgICAgICAgICAgIGlmIChvbkhhc2hQYXJhbWV0ZXJVc2VkICYmIHF1ZXJ5SXRlbVNob3J0SWQpIHtcbiAgICAgICAgICAgICAgICAgIG9uSGFzaFBhcmFtZXRlclVzZWQocXVlcnlJdGVtU2hvcnRJZClcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBBdXRvLXRyaWdnZXIgQXBwbHkgYnV0dG9uIHRvIGV4ZWN1dGUgdGhlIHF1ZXJ5IHdpdGggdGhlIHBvcHVsYXRlZCB2YWx1ZVxuICAgICAgICAgICAgICAgIGFwcGx5QnV0dG9uUmVmLmN1cnJlbnQuY2xpY2soKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCAyMDApIC8vIFNtYWxsIGRlbGF5IGFmdGVyIGJsdXIgdG8gZW5zdXJlIHN0YXRlIGlzIHN5bmNlZFxuICAgICAgICAgIH1cbiAgICAgICAgfSwgNTAwKSAvLyBMb25nZXIgZGVsYXkgdG8gZW5zdXJlIGNvbXBvbmVudCBpcyBmdWxseSByZW5kZXJlZFxuICAgICAgICBcbiAgICAgICAgcmV0dXJuICgpID0+IGNsZWFyVGltZW91dCh0aW1lb3V0SWQpXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIFRoZSBzcWxFeHByT2JqLnBhcnRzIG1heSBjaGFuZ2UgYnV0IHRoZSBkaXNwbGF5U1FMIGlzIHRoZSBzYW1lXG4gICAgaWYgKCFzcWxFeHByT2JqKSB7XG4gICAgICBzaG93Q2xhdXNlTnVtYmVyLmN1cnJlbnQgPSAwXG4gICAgICBzZXRBdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqKG51bGwpXG4gICAgfSBlbHNlIHtcbiAgICAgIHNob3dDbGF1c2VOdW1iZXIuY3VycmVudCA9IGdldFNob3duQ2xhdXNlTnVtYmVyQnlFeHByZXNzaW9uKHNxbEV4cHJPYmopXG4gICAgICAvLyBPbmx5IHVwZGF0ZSBpZiB3ZSBoYXZlbid0IHNldCB0aGUgaW5pdGlhbCB2YWx1ZSBmb3IgdGhpcyBjb25maWdJZCB5ZXQsIG9yIGlmIHdlIGRvbid0IGhhdmUgYW4gaW5pdGlhbCB2YWx1ZVxuICAgICAgaWYgKGluaXRpYWxWYWx1ZVNldFJlZi5jdXJyZW50ICE9PSBjb25maWdJZCB8fCAhaW5pdGlhbElucHV0VmFsdWUpIHtcbiAgICAgICAgc2V0QXR0cmlidXRlRmlsdGVyU3FsRXhwck9iaihzcWxFeHByT2JqKVxuICAgICAgfVxuICAgIH1cbiAgfSwgW3NxbEV4cHJPYmosIGluaXRpYWxJbnB1dFZhbHVlLCBkYXRhc291cmNlUmVhZHksIGNvbmZpZ0lkLCB3aWRnZXRJZCwgb25IYXNoUGFyYW1ldGVyVXNlZCwgcXVlcnlJdGVtU2hvcnRJZF0pXG5cbiAgY29uc3QgYXBwbHlRdWVyeSA9IFJlYWN0LnVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICAvLyBXaGVuIHRoZSAnYXBwbHknIGJ1dHRvbiBpcyBjbGlja2VkLCBpdCBzaG91bGQgY2xlYXIgdGhlIHNlbGVjdGlvbiBmcm9tIHRoZSBwcmV2aW91cyByZXN1bHQgbGlzdFxuICAgIGNsZWFyU2VsZWN0aW9uSW5EYXRhU291cmNlcyhvdXRwdXREUylcblxuICAgIGlmIChvdXRwdXREUykge1xuICAgICAgY29uc3Qgb3JpZ2luRHM6IEZlYXR1cmVMYXllckRhdGFTb3VyY2UgPSBvdXRwdXREUy5nZXRPcmlnaW5EYXRhU291cmNlcygpWzBdIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgICAgIGlmIChvcmlnaW5Ecykge1xuICAgICAgICBjb25zdCBkYXRhVmlld0NvbmZpZyA9IG9yaWdpbkRzLmdldERhdGFWaWV3Q29uZmlnKClcbiAgICAgICAgY29uc3QgbWF4aW11bSA9IGRhdGFWaWV3Q29uZmlnPy5tYXhpbXVtXG4gICAgICAgIGlmIChtYXhpbXVtICE9IG51bGwgJiYgbWF4aW11bSA+IDApIHtcbiAgICAgICAgICBEYXRhU291cmNlTWFuYWdlci5nZXRJbnN0YW5jZSgpLnVwZGF0ZURhdGFTb3VyY2VCeURhdGFTb3VyY2VKc29uKFxuICAgICAgICAgICAgb3V0cHV0RFMsXG4gICAgICAgICAgICBvdXRwdXREUy5nZXREYXRhU291cmNlSnNvbigpLnNldEluKFsncXVlcnknLCAnbWF4aW11bSddLCBtYXhpbXVtKVxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEZvcmNlIHpvb20gZm9yIGhhc2gtdHJpZ2dlcmVkIHF1ZXJpZXMsIG90aGVyd2lzZSB1c2UgcnVudGltZSBwcmVmZXJlbmNlXG4gICAgY29uc3Qgem9vbVRvVXNlID0gaGFzaFRyaWdnZXJlZFJlZi5jdXJyZW50ID8gdHJ1ZSA6IHJ1bnRpbWVab29tVG9TZWxlY3RlZFxuXG4gICAgbGV0IHJlbCA9IHNwYXRpYWxSZWxhdGlvblJlZi5jdXJyZW50XG4gICAgaWYgKHNwYXRpYWxGaWx0ZXJPYmpSZWYuY3VycmVudD8uZ2VvbWV0cnkgJiYgcmVsID09IG51bGwpIHtcbiAgICAgIHJlbCA9IFNwYXRpYWxSZWxhdGlvbi5JbnRlcnNlY3RcbiAgICB9XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoc3BhdGlhbEZpbHRlck9ialJlZi5jdXJyZW50Py5nZW9tZXRyeSkpIHtcbiAgICAgIGlmIChzcGF0aWFsRmlsdGVyT2JqUmVmLmN1cnJlbnQuZ2VvbWV0cnkubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIG9uRm9ybVN1Ym1pdChhdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqLCB7IC4uLnNwYXRpYWxGaWx0ZXJPYmpSZWYuY3VycmVudCwgZ2VvbWV0cnk6IHNwYXRpYWxGaWx0ZXJPYmpSZWYuY3VycmVudC5nZW9tZXRyeVswXSwgcmVsYXRpb246IHJlbCwgYnVmZmVyOiBidWZmZXJSZWYuY3VycmVudCB9LCB6b29tVG9Vc2UpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsb2FkQXJjR0lTSlNBUElNb2R1bGVzKFtcbiAgICAgICAgICAnZXNyaS9nZW9tZXRyeS9vcGVyYXRvcnMvdW5pb25PcGVyYXRvcidcbiAgICAgICAgXSkudGhlbihtb2R1bGVzID0+IHtcbiAgICAgICAgICBjb25zdCBvcGVyYXRvcjogKHR5cGVvZiBfX2VzcmkudW5pb25PcGVyYXRvcikgPSBtb2R1bGVzWzBdXG4gICAgICAgICAgY29uc3QgZ2VvbWV0cnkgPSBvcGVyYXRvci5leGVjdXRlTWFueShzcGF0aWFsRmlsdGVyT2JqUmVmLmN1cnJlbnQuZ2VvbWV0cnkpXG4gICAgICAgICAgb25Gb3JtU3VibWl0KGF0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmosIHsgLi4uc3BhdGlhbEZpbHRlck9ialJlZi5jdXJyZW50LCBnZW9tZXRyeSwgcmVsYXRpb246IHJlbCwgYnVmZmVyOiBidWZmZXJSZWYuY3VycmVudCB9LCB6b29tVG9Vc2UpXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIG9uRm9ybVN1Ym1pdChhdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqLCB7IC4uLnNwYXRpYWxGaWx0ZXJPYmpSZWYuY3VycmVudCwgcmVsYXRpb246IHJlbCwgYnVmZmVyOiBidWZmZXJSZWYuY3VycmVudCB9LCB6b29tVG9Vc2UpXG4gICAgfVxuICAgIFxuICAgIC8vIFJlc2V0IGhhc2hUcmlnZ2VyZWRSZWYgYWZ0ZXIgdXNlXG4gICAgaGFzaFRyaWdnZXJlZFJlZi5jdXJyZW50ID0gZmFsc2VcbiAgfSwgW29uRm9ybVN1Ym1pdCwgb3V0cHV0RFMsIGF0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmosIHJ1bnRpbWVab29tVG9TZWxlY3RlZF0pXG5cbiAgY29uc3QgaGFuZGxlS2V5RG93biA9IFJlYWN0LnVzZUNhbGxiYWNrKChldmVudDogUmVhY3QuS2V5Ym9hcmRFdmVudCkgPT4ge1xuICAgIGlmIChldmVudC5rZXkgPT09ICdFbnRlcicgJiYgZGF0YXNvdXJjZVJlYWR5KSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICBcbiAgICAgIC8vIEZpbmQgdGhlIGFjdGl2ZSBpbnB1dCBmaWVsZFxuICAgICAgY29uc3QgYWN0aXZlRWxlbWVudCA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgYXMgSFRNTElucHV0RWxlbWVudFxuICAgICAgaWYgKGFjdGl2ZUVsZW1lbnQgJiYgYWN0aXZlRWxlbWVudC50YWdOYW1lID09PSAnSU5QVVQnICYmIGFjdGl2ZUVsZW1lbnQudHlwZSA9PT0gJ3RleHQnKSB7XG4gICAgICAgIC8vIEZvcmNlIGJsdXIgdG8gdHJpZ2dlciBTcWxFeHByZXNzaW9uUnVudGltZSdzIGlucHV0IHByb2Nlc3NpbmdcbiAgICAgICAgYWN0aXZlRWxlbWVudC5ibHVyKClcbiAgICAgICAgXG4gICAgICAgIC8vIFdhaXQgZm9yIGJsdXIgcHJvY2Vzc2luZywgdGhlbiBjbGljayB0aGUgQXBwbHkgYnV0dG9uXG4gICAgICAgIC8vIFRoaXMgdXNlcyB0aGUgZXhhY3Qgc2FtZSBjb2RlIHBhdGggYXMgY2xpY2tpbmcgdGhlIGJ1dHRvbiBtYW51YWxseVxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICBpZiAoYXBwbHlCdXR0b25SZWYuY3VycmVudCAmJiAhYXBwbHlCdXR0b25SZWYuY3VycmVudC5kaXNhYmxlZCkge1xuICAgICAgICAgICAgYXBwbHlCdXR0b25SZWYuY3VycmVudC5jbGljaygpXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGFwcGx5UXVlcnkoKVxuICAgICAgICAgIH1cbiAgICAgICAgfSwgMjAwKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gTm90IGluIGFuIGlucHV0IGZpZWxkLCBzYWZlIHRvIGFwcGx5IGltbWVkaWF0ZWx5XG4gICAgICAgIGlmIChhcHBseUJ1dHRvblJlZi5jdXJyZW50ICYmICFhcHBseUJ1dHRvblJlZi5jdXJyZW50LmRpc2FibGVkKSB7XG4gICAgICAgICAgYXBwbHlCdXR0b25SZWYuY3VycmVudC5jbGljaygpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYXBwbHlRdWVyeSgpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sIFtkYXRhc291cmNlUmVhZHksIGFwcGx5UXVlcnldKVxuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFkYXRhQWN0aW9uRmlsdGVyKSByZXR1cm5cbiAgICBpZiAoZGF0YUFjdGlvbkZpbHRlci53aGVyZSAhPT0gcHJlRGF0YUFjdGlvbkZpbHRlcj8ud2hlcmUpIHtcbiAgICAgIGFwcGx5UXVlcnkoKVxuICAgIH1cbiAgfSwgW2RhdGFBY3Rpb25GaWx0ZXIsIHByZURhdGFBY3Rpb25GaWx0ZXI/LndoZXJlLCBhcHBseVF1ZXJ5XSlcblxuICBjb25zdCByZXNldFF1ZXJ5ID0gUmVhY3QudXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIC8vIDEuIHJlc2V0IGF0dHJpYnV0ZSBmaWx0ZXJcbiAgICBzaG93Q2xhdXNlTnVtYmVyLmN1cnJlbnQgPSBnZXRTaG93bkNsYXVzZU51bWJlckJ5RXhwcmVzc2lvbihzcWxFeHByT2JqKVxuICAgIHNldEF0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmooc3FsRXhwck9iailcbiAgICAvLyAyLiByZXNldCBzcGF0aWFsIGZpbHRlclxuICAgIHNldFJlc2V0U3ltYm9sKFN5bWJvbCgpKVxuICB9LCBbc3FsRXhwck9ial0pXG5cbiAgY29uc3QgaGFuZGxlU3FsRXhwck9iakNoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKChzcWxPYmo6IElNU3FsRXhwcmVzc2lvbikgPT4ge1xuICAgIHNob3dDbGF1c2VOdW1iZXIuY3VycmVudCA9IGdldFNob3duQ2xhdXNlTnVtYmVyQnlFeHByZXNzaW9uKHNxbE9iailcbiAgICBzZXRBdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqKHNxbE9iailcbiAgfSwgW10pXG5cbiAgY29uc3QgaGFuZGxlU3BhdGlhbEZpbHRlckNoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKChmaWx0ZXI6IFNwYXRpYWxGaWx0ZXJPYmopID0+IHtcbiAgICBzcGF0aWFsRmlsdGVyT2JqUmVmLmN1cnJlbnQgPSBmaWx0ZXJcbiAgfSwgW10pXG5cbiAgY29uc3QgaGFuZGxlUmVsYXRpb25DaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjaygocmVsOiBTcGF0aWFsUmVsYXRpb24pID0+IHtcbiAgICBzcGF0aWFsUmVsYXRpb25SZWYuY3VycmVudCA9IHJlbFxuICB9LCBbXSlcblxuICBjb25zdCBoYW5kbGVCdWZmZXJDaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjaygoZGlzdGFuY2U6IG51bWJlciwgdW5pdDogVW5pdFR5cGUpID0+IHtcbiAgICBidWZmZXJSZWYuY3VycmVudCA9IHsgZGlzdGFuY2UsIHVuaXQgfVxuICB9LCBbXSlcblxuICBjb25zdCBzaG93QXR0cmlidXRlRmlsdGVyID0gdXNlQXR0cmlidXRlRmlsdGVyICYmIHNxbEV4cHJPYmogIT0gbnVsbFxuICBjb25zdCBzaG93U3BhdGlhbEZpbHRlciA9IHNwYXRpYWxGaWx0ZXJFbmFibGVkICYmIHVzZVNwYXRpYWxGaWx0ZXIgJiYgKHNwYXRpYWxGaWx0ZXJUeXBlcy5sZW5ndGggPiAwIHx8IHNwYXRpYWxJbmNsdWRlUnVudGltZURhdGEgfHwgc3BhdGlhbFJlbGF0aW9uVXNlRGF0YVNvdXJjZXM/Lmxlbmd0aCA+IDApXG5cbiAgLy8gRGVidWcgbG9nZ2luZyBmb3IgZm9ybSByZW5kZXJpbmdcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICBldmVudDogJ2Zvcm0tcmVuZGVyLWNoZWNrJyxcbiAgICAgIGNvbmZpZ0lkLFxuICAgICAgZGF0YXNvdXJjZVJlYWR5LFxuICAgICAgdXNlQXR0cmlidXRlRmlsdGVyLFxuICAgICAgc3FsRXhwck9iajogc3FsRXhwck9iaiA/ICdleGlzdHMnIDogJ251bGwnLFxuICAgICAgc3FsRXhwck9ialBhcnRzOiBzcWxFeHByT2JqPy5wYXJ0cz8ubGVuZ3RoIHx8IDAsXG4gICAgICBzaG93QXR0cmlidXRlRmlsdGVyLFxuICAgICAgb3JpZ2luRFM6IG9yaWdpbkRTID8gJ2V4aXN0cycgOiAnbnVsbCcsXG4gICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUz8uaWQgfHwgJ25vbmUnLFxuICAgICAgc2hvd1NwYXRpYWxGaWx0ZXIsXG4gICAgICBpc0F1dG9IZWlnaHQsXG4gICAgICBvdXRwdXREUzogb3V0cHV0RFMgPyAnZXhpc3RzJyA6ICdudWxsJ1xuICAgIH0pXG4gIH0sIFtjb25maWdJZCwgZGF0YXNvdXJjZVJlYWR5LCB1c2VBdHRyaWJ1dGVGaWx0ZXIsIHNxbEV4cHJPYmosIHNob3dBdHRyaWJ1dGVGaWx0ZXIsIG9yaWdpbkRTLCBzaG93U3BhdGlhbEZpbHRlciwgaXNBdXRvSGVpZ2h0LCBvdXRwdXREU10pXG5cbiAgLy8gTG9nIHdoZW4gZm9ybSBjb250ZW50IHNob3VsZCByZW5kZXJcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoc2hvd0F0dHJpYnV0ZUZpbHRlciAmJiBvcmlnaW5EUykge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgICBldmVudDogJ2F0dHJpYnV0ZS1maWx0ZXItcmVhZHknLFxuICAgICAgICBjb25maWdJZCxcbiAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgIHNxbEV4cHJPYmpQYXJ0czogc3FsRXhwck9iaj8ucGFydHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICBhdHRyaWJ1dGVGaWx0ZXJMYWJlbCxcbiAgICAgICAgbm90ZTogJ0lucHV0IGZpZWxkIHNob3VsZCBiZSB2aXNpYmxlJ1xuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgICBldmVudDogJ2F0dHJpYnV0ZS1maWx0ZXItbm90LXJlYWR5JyxcbiAgICAgICAgY29uZmlnSWQsXG4gICAgICAgIHNob3dBdHRyaWJ1dGVGaWx0ZXIsXG4gICAgICAgIG9yaWdpbkRTOiBvcmlnaW5EUyA/ICdleGlzdHMnIDogJ251bGwnLFxuICAgICAgICB1c2VBdHRyaWJ1dGVGaWx0ZXIsXG4gICAgICAgIHNxbEV4cHJPYmo6IHNxbEV4cHJPYmogPyAnZXhpc3RzJyA6ICdudWxsJyxcbiAgICAgICAgcmVhc29uOiAhc2hvd0F0dHJpYnV0ZUZpbHRlciA/ICdzaG93QXR0cmlidXRlRmlsdGVyIGlzIGZhbHNlJyA6ICdvcmlnaW5EUyBpcyBudWxsJ1xuICAgICAgfSlcbiAgICB9XG4gIH0sIFtzaG93QXR0cmlidXRlRmlsdGVyLCBvcmlnaW5EUywgY29uZmlnSWQsIHNxbEV4cHJPYmosIHVzZUF0dHJpYnV0ZUZpbHRlciwgYXR0cmlidXRlRmlsdGVyTGFiZWxdKVxuXG4gIC8vIENoZWNrIERPTSB2aXNpYmlsaXR5IGFmdGVyIHJlbmRlclxuICBjb25zdCBmb3JtQ29udGVudFJlZiA9IFJlYWN0LnVzZVJlZjxIVE1MRGl2RWxlbWVudD4obnVsbClcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoZm9ybUNvbnRlbnRSZWYuY3VycmVudCkge1xuICAgICAgY29uc3QgY29tcHV0ZWRTdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGZvcm1Db250ZW50UmVmLmN1cnJlbnQpXG4gICAgICBjb25zdCByZWN0ID0gZm9ybUNvbnRlbnRSZWYuY3VycmVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICAgICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgICBldmVudDogJ2Zvcm0tY29udGVudC1kb20tY2hlY2snLFxuICAgICAgICBjb25maWdJZCxcbiAgICAgICAgZXhpc3RzOiAhIWZvcm1Db250ZW50UmVmLmN1cnJlbnQsXG4gICAgICAgIGRpc3BsYXk6IGNvbXB1dGVkU3R5bGUuZGlzcGxheSxcbiAgICAgICAgdmlzaWJpbGl0eTogY29tcHV0ZWRTdHlsZS52aXNpYmlsaXR5LFxuICAgICAgICBvcGFjaXR5OiBjb21wdXRlZFN0eWxlLm9wYWNpdHksXG4gICAgICAgIGhlaWdodDogY29tcHV0ZWRTdHlsZS5oZWlnaHQsXG4gICAgICAgIG1heEhlaWdodDogY29tcHV0ZWRTdHlsZS5tYXhIZWlnaHQsXG4gICAgICAgIGZsZXg6IGNvbXB1dGVkU3R5bGUuZmxleCxcbiAgICAgICAgZmxleEJhc2lzOiBjb21wdXRlZFN0eWxlLmZsZXhCYXNpcyxcbiAgICAgICAgcmVjdEhlaWdodDogcmVjdC5oZWlnaHQsXG4gICAgICAgIHJlY3RXaWR0aDogcmVjdC53aWR0aCxcbiAgICAgICAgaXNWaXNpYmxlOiByZWN0LmhlaWdodCA+IDAgJiYgcmVjdC53aWR0aCA+IDAsXG4gICAgICAgIHBhcmVudEhlaWdodDogZm9ybUNvbnRlbnRSZWYuY3VycmVudC5wYXJlbnRFbGVtZW50Py5jbGllbnRIZWlnaHQgfHwgMFxuICAgICAgfSlcbiAgICB9XG4gIH0sIFtjb25maWdJZCwgc2hvd0F0dHJpYnV0ZUZpbHRlciwgb3JpZ2luRFNdKVxuXG4gIHJldHVybiAoXG4gICAgPFF1ZXJ5VGFza0NvbnRleHQuUHJvdmlkZXIgdmFsdWU9e3sgcmVzZXRTeW1ib2wgfX0+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT0ncXVlcnktZm9ybScgY3NzPXtnZXRGb3JtU3R5bGUoaXNBdXRvSGVpZ2h0KX0+XG4gICAgICAgIDxkaXYgcmVmPXtmb3JtQ29udGVudFJlZn0gY2xhc3NOYW1lPSdxdWVyeS1mb3JtX19jb250ZW50JyBvbktleURvd249e2hhbmRsZUtleURvd259PlxuICAgICAgICAgIHtzaG93QXR0cmlidXRlRmlsdGVyICYmIChcbiAgICAgICAgICAgIDxkaXYgXG4gICAgICAgICAgICAgIHJvbGU9J2dyb3VwJyBcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPSdweC00JyBcbiAgICAgICAgICAgICAgY3NzPXtjc3NgcGFkZGluZy10b3A6IDJweDtgfVxuICAgICAgICAgICAgICBhcmlhLWxhYmVsPXthdHRyaWJ1dGVGaWx0ZXJMYWJlbH1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ2Zvcm0tdGl0bGUgZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlcicsIHsgJ2Qtbm9uZSc6ICFhdHRyaWJ1dGVGaWx0ZXJMYWJlbCAmJiAhYXR0cmlidXRlRmlsdGVyRGVzYyB9KX0gY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgbWFyZ2luLXRvcDogMDtcbiAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA0cHg7XG4gICAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICAgIHthdHRyaWJ1dGVGaWx0ZXJMYWJlbCAmJiA8ZGl2IGNsYXNzTmFtZT0nbXItMiB0aXRsZTInPnthdHRyaWJ1dGVGaWx0ZXJMYWJlbH08L2Rpdj59XG4gICAgICAgICAgICAgICAge2F0dHJpYnV0ZUZpbHRlckRlc2MgJiYgKFxuICAgICAgICAgICAgICAgICAgPFRvb2x0aXAgcGxhY2VtZW50PSdib3R0b20nIGNzcz17Y3NzYHdoaXRlLXNwYWNlOiBwcmUtbGluZTtgfSB0aXRsZT17YXR0cmlidXRlRmlsdGVyRGVzY30+XG4gICAgICAgICAgICAgICAgICAgIDxCdXR0b24gc2l6ZT0nc20nIGljb24gdHlwZT0ndGVydGlhcnknPjxJbmZvT3V0bGluZWQgY29sb3I9J3ZhcigtLXN5cy1jb2xvci1wcmltYXJ5LW1haW4pJyBzaXplPSdzJy8+PC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICA8L1Rvb2x0aXA+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIHtvcmlnaW5EUyAmJiAoXG4gICAgICAgICAgICAgICAgPGRpdiBjc3M9e2Nzc2BtYXJnaW46IC0xMHB4IDBweDtgfT5cbiAgICAgICAgICAgICAgICAgIDxTcWxFeHByZXNzaW9uUnVudGltZVxuICAgICAgICAgICAgICAgICAgICBrZXk9e2Ake2NvbmZpZ0lkfS0ke2luaXRpYWxJbnB1dFZhbHVlIHx8ICdub25lJ31gfVxuICAgICAgICAgICAgICAgICAgICB3aWRnZXRJZD17d2lkZ2V0SWR9XG4gICAgICAgICAgICAgICAgICAgIGRhdGFTb3VyY2U9e29yaWdpbkRTfVxuICAgICAgICAgICAgICAgICAgICBleHByZXNzaW9uPXthdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqfVxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17aGFuZGxlU3FsRXhwck9iakNoYW5nZX1cbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApfVxuICAgICAgICAgIHtzaG93QXR0cmlidXRlRmlsdGVyICYmIHNob3dTcGF0aWFsRmlsdGVyICYmIChcbiAgICAgICAgICAgIDxociBjbGFzc05hbWU9J20tNCcgY3NzPXtjc3NgYm9yZGVyOiBub25lOyBoZWlnaHQ6IDFweDsgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tc3lzLWNvbG9yLWRpdmlkZXItc2Vjb25kYXJ5KTtgfS8+XG4gICAgICAgICAgKX1cbiAgICAgICAgICB7c2hvd1NwYXRpYWxGaWx0ZXIgJiYgKFxuICAgICAgICAgICAgPFF1ZXJ5VGFza1NwYXRpYWxGb3JtXG4gICAgICAgICAgICAgIHdpZGdldElkPXt3aWRnZXRJZH1cbiAgICAgICAgICAgICAgbGFiZWw9e3NwYXRpYWxGaWx0ZXJMYWJlbH1cbiAgICAgICAgICAgICAgZGVzYz17c3BhdGlhbEZpbHRlckRlc2N9XG4gICAgICAgICAgICAgIGZpbHRlclR5cGVzPXtzcGF0aWFsRmlsdGVyVHlwZXN9XG4gICAgICAgICAgICAgIG1hcFdpZGdldElkcz17c3BhdGlhbE1hcFdpZGdldElkc31cbiAgICAgICAgICAgICAgY3JlYXRlVG9vbFR5cGVzPXtzcGF0aWFsSW50ZXJhY3RpdmVDcmVhdGVUb29sVHlwZXN9XG4gICAgICAgICAgICAgIG9uRmlsdGVyQ2hhbmdlPXtoYW5kbGVTcGF0aWFsRmlsdGVyQ2hhbmdlfVxuICAgICAgICAgICAgICBvblJlbGF0aW9uQ2hhbmdlPXtoYW5kbGVSZWxhdGlvbkNoYW5nZX1cbiAgICAgICAgICAgICAgb25CdWZmZXJDaGFuZ2U9e2hhbmRsZUJ1ZmZlckNoYW5nZX1cbiAgICAgICAgICAgICAgc3BhdGlhbFJlbGF0aW9ucz17c3BhdGlhbFJlbGF0aW9uc31cbiAgICAgICAgICAgICAgZHNFbmFibGVCdWZmZXI9e3NwYXRpYWxSZWxhdGlvbkVuYWJsZUJ1ZmZlcn1cbiAgICAgICAgICAgICAgZHNCdWZmZXJEaXN0YW5jZT17c3BhdGlhbFJlbGF0aW9uQnVmZmVyRGlzdGFuY2V9XG4gICAgICAgICAgICAgIGRzQnVmZmVyVW5pdD17c3BhdGlhbFJlbGF0aW9uQnVmZmVyVW5pdH1cbiAgICAgICAgICAgICAgZHJhd0VuYWJsZUJ1ZmZlcj17c3BhdGlhbEludGVyYWN0aXZlRW5hYmxlQnVmZmVyfVxuICAgICAgICAgICAgICBkcmF3QnVmZmVyRGlzdGFuY2U9e3NwYXRpYWxJbnRlcmFjdGl2ZUJ1ZmZlckRpc3RhbmNlfVxuICAgICAgICAgICAgICBkcmF3QnVmZmVyVW5pdD17c3BhdGlhbEludGVyYWN0aXZlQnVmZmVyVW5pdH1cbiAgICAgICAgICAgICAgdXNlRGF0YVNvdXJjZXM9e3NwYXRpYWxSZWxhdGlvblVzZURhdGFTb3VyY2VzfVxuICAgICAgICAgICAgICB1c2VSdW50aW1lRGF0YT17c3BhdGlhbEluY2x1ZGVSdW50aW1lRGF0YX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSdxdWVyeS1mb3JtX19hY3Rpb25zIHB4LTQgZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlcic+XG4gICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICBjaGVja2VkPXtydW50aW1lWm9vbVRvU2VsZWN0ZWR9XG4gICAgICAgICAgICBvbkNoYW5nZT17KF8sIGNoZWNrZWQpID0+IHNldFJ1bnRpbWVab29tVG9TZWxlY3RlZChjaGVja2VkKX1cbiAgICAgICAgICAgIGNsYXNzTmFtZT0nbXItMidcbiAgICAgICAgICAvPlxuICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0nbXItYXV0bycgY3NzPXtjc3NgZm9udC1zaXplOiAwLjg3NXJlbTsgY29sb3I6IHZhcigtLXN5cy1jb2xvci10ZXh0LXByaW1hcnkpO2B9PlxuICAgICAgICAgICAge2dldEkxOG5NZXNzYWdlKCd6b29tVG9TZWxlY3RlZCcpfVxuICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICA8QnV0dG9uIHJlZj17YXBwbHlCdXR0b25SZWZ9IGNvbG9yPSdwcmltYXJ5JyBjbGFzc05hbWU9J21sLWF1dG8nIGRpc2FibGVkPXshZGF0YXNvdXJjZVJlYWR5fSBvbkNsaWNrPXthcHBseVF1ZXJ5fT5cbiAgICAgICAgICAgIHtnZXRJMThuTWVzc2FnZSgnYXBwbHknKX1cbiAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICB7KHNob3dDbGF1c2VOdW1iZXIuY3VycmVudCA+IDAgfHwgc2hvd1NwYXRpYWxGaWx0ZXIpICYmIChcbiAgICAgICAgICAgIDxCdXR0b24gY2xhc3NOYW1lPSdtbC0yJyBvbkNsaWNrPXtyZXNldFF1ZXJ5fT57Z2V0STE4bk1lc3NhZ2UoJ3Jlc2V0Jyl9PC9CdXR0b24+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L1F1ZXJ5VGFza0NvbnRleHQuUHJvdmlkZXI+XG4gIClcbn1cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHsganN4LCBjc3MsIHR5cGUgSWNvblJlc3VsdCwgdHlwZSBJbW11dGFibGVPYmplY3QgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBJY29uIH0gZnJvbSAnamltdS11aSdcblxuaW50ZXJmYWNlIENvbnRlbnRQcm9wcyB7XG4gIGljb24/OiBJY29uUmVzdWx0IHwgSW1tdXRhYmxlT2JqZWN0PEljb25SZXN1bHQ+XG4gIG5hbWU6IHN0cmluZ1xufVxuXG5jb25zdCB0ZXh0U3R5bGUgPSBjc3NgXG4gIGZvbnQtd2VpZ2h0OiA1MDA7XG4gIGZvbnQtc2l6ZTogMC44NzVyZW07XG5gXG5cbmV4cG9ydCBmdW5jdGlvbiBRdWVyeVRhc2tMYWJlbCAocHJvcHM6IENvbnRlbnRQcm9wcykge1xuICBjb25zdCB7IGljb24sIG5hbWUgfSA9IHByb3BzXG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT0nZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlciB0ZXh0LXRydW5jYXRlJyBjc3M9e3RleHRTdHlsZX0+XG4gICAgICB7aWNvbiAmJiA8SWNvbiBjbGFzc05hbWU9J3F1ZXJ5LXRhc2staWNvbiBtci0yJyBpY29uPXtpY29uLnN2Z30gLz59XG4gICAgICA8ZGl2IGNsYXNzTmFtZT0ndGV4dC10cnVuY2F0ZScgdGl0bGU9e25hbWV9PlxuICAgICAgICB7bmFtZX1cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApXG59XG5cblxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQgeyBqc3gsIGNzcywgUmVhY3QsIHR5cGUgSW1tdXRhYmxlQXJyYXksIGNsYXNzTmFtZXMsIGxvZGFzaCwgaG9va3MgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgdHlwZSB7IFNpemUgfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHR5cGUgeyBRdWVyeUl0ZW1UeXBlIH0gZnJvbSAnLi4vY29uZmlnJ1xuaW1wb3J0IHsgUXVlcnlUYXNrIH0gZnJvbSAnLi9xdWVyeS10YXNrJ1xuaW1wb3J0IHsgUXVlcnlUYXNrTGlzdCB9IGZyb20gJy4vcXVlcnktdGFzay1saXN0J1xuaW1wb3J0IHsgVGFza0xpc3RQb3BwZXJXcmFwcGVyIH0gZnJvbSAnLi9xdWVyeS10YXNrLWxpc3QtcG9wcGVyLXdyYXBwZXInXG5pbXBvcnQgeyBnZXRXaWRnZXRSdW50aW1lRGF0YU1hcCB9IGZyb20gJy4vd2lkZ2V0LWNvbmZpZydcbmltcG9ydCB7IERFRkFVTFRfUVVFUllfSVRFTSB9IGZyb20gJy4uL2RlZmF1bHQtcXVlcnktaXRlbSdcblxuY29uc3QgeyBpY29uTWFwIH0gPSBnZXRXaWRnZXRSdW50aW1lRGF0YU1hcCgpXG5cbmV4cG9ydCBpbnRlcmZhY2UgUXVlcnlUYXNrTGlzdFByb3BzIHtcbiAgd2lkZ2V0SWQ6IHN0cmluZ1xuICB3aWRnZXRMYWJlbDogc3RyaW5nXG4gIHdyYXA6IGJvb2xlYW5cbiAgbWluU2l6ZTogU2l6ZVxuICBkZWZhdWx0U2l6ZTogU2l6ZVxuICBxdWVyeUl0ZW1zOiBJbW11dGFibGVBcnJheTxRdWVyeUl0ZW1UeXBlPlxuICBkZWZhdWx0UGFnZVNpemU/OiBudW1iZXJcbiAgaW5pdGlhbFF1ZXJ5VmFsdWU/OiB7IHNob3J0SWQ6IHN0cmluZywgdmFsdWU6IHN0cmluZyB9XG4gIG9uSGFzaFBhcmFtZXRlclVzZWQ/OiAoc2hvcnRJZDogc3RyaW5nKSA9PiB2b2lkXG59XG5cbmNvbnN0IFNQQUNFID0gOFxuXG5jb25zdCBzdHlsZSA9IGNzc2BcbiAgPiBkaXYge1xuICAgIG1hcmdpbi1yaWdodDogOHB4O1xuICB9XG5gXG5cbi8vIHNob3cgdGFzayBsYWJlbCBhbmQgYW4gYXJyb3cgdG8gdGhlIHRhc2sgY29udGVudFxuZXhwb3J0IGZ1bmN0aW9uIFRhc2tMaXN0SW5saW5lIChwcm9wczogUXVlcnlUYXNrTGlzdFByb3BzKSB7XG4gIGNvbnN0IHsgcXVlcnlJdGVtcywgd2lkZ2V0SWQsIG1pblNpemUsIGRlZmF1bHRTaXplLCBkZWZhdWx0UGFnZVNpemUsIHdpZGdldExhYmVsLCB3cmFwID0gZmFsc2UgfSA9IHByb3BzXG4gIGNvbnN0IGNvbnRhaW5lclJlZiA9IFJlYWN0LnVzZVJlZjxIVE1MRGl2RWxlbWVudD4odW5kZWZpbmVkKVxuICBjb25zdCBjb250YWluZXJXaWR0aFJlZiA9IFJlYWN0LnVzZVJlZjxudW1iZXI+KDApXG4gIGNvbnN0IGNvbnRlbnRXaWR0aFJlZiA9IFJlYWN0LnVzZVJlZjx7IFtrZXk6IHN0cmluZ106IG51bWJlciB9Pih7fSlcbiAgY29uc3QgW251bU9mRXhwYW5kZWQsIHNldE51bU9mRXhwYW5kZWRdID0gUmVhY3QudXNlU3RhdGUocXVlcnlJdGVtcy5sZW5ndGgpXG4gIGNvbnN0IFtvcGVuZWRQb3BwZXIsIHNldE9wZW5lZFBvcHBlcl0gPSBSZWFjdC51c2VTdGF0ZSgtMSlcbiAgY29uc3QgcmVzaXplT2JzZXJ2ZXJSZWYgPSBSZWFjdC51c2VSZWY8UmVzaXplT2JzZXJ2ZXI+KG51bGwpXG5cbiAgY29uc3QgYWRqdXN0Q29udGVudCA9IFJlYWN0LnVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBsZXQgdG90YWwgPSAwXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1PZkV4cGFuZGVkOyBpKyspIHtcbiAgICAgIGNvbnN0IGl0ZW0gPSBxdWVyeUl0ZW1zW2ldXG4gICAgICBjb25zdCBpdGVtV2lkdGggPSBjb250ZW50V2lkdGhSZWYuY3VycmVudFtpdGVtLmNvbmZpZ0lkXVxuICAgICAgaWYgKGl0ZW1XaWR0aCA+IDApIHtcbiAgICAgICAgdG90YWwgKz0gaXRlbVdpZHRoICsgU1BBQ0VcbiAgICAgICAgaWYgKHRvdGFsID49IGNvbnRhaW5lcldpZHRoUmVmLmN1cnJlbnQgJiYgbnVtT2ZFeHBhbmRlZCAhPT0gaSkge1xuICAgICAgICAgIHNldE51bU9mRXhwYW5kZWQoaSlcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIC8vIGNvbnRlbnQgd2lkdGggbm90IHJlYWR5XG4gICAgICB9XG4gICAgfVxuICAgIHNldE51bU9mRXhwYW5kZWQocXVlcnlJdGVtcy5sZW5ndGgpXG4gIH0sIFtudW1PZkV4cGFuZGVkLCBxdWVyeUl0ZW1zXSlcblxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChyZXNpemVPYnNlcnZlclJlZi5jdXJyZW50KSB7XG4gICAgICByZXNpemVPYnNlcnZlclJlZi5jdXJyZW50LmRpc2Nvbm5lY3QoKVxuICAgIH1cbiAgICAvLyBiaW5kIHdpdGggdGhlIG5ldyBldmVudCBoYW5kbGVyXG4gICAgcmVzaXplT2JzZXJ2ZXJSZWYuY3VycmVudCA9IG5ldyBSZXNpemVPYnNlcnZlcihsb2Rhc2gudGhyb3R0bGUoKGVudHJpZXMpID0+IHtcbiAgICAgIGNvbnN0IHdpZHRoID0gTWF0aC5yb3VuZChlbnRyaWVzWzBdLmNvbnRlbnRSZWN0LndpZHRoKVxuICAgICAgaWYgKGNvbnRhaW5lcldpZHRoUmVmLmN1cnJlbnQgIT09IHdpZHRoKSB7XG4gICAgICAgIGNvbnRhaW5lcldpZHRoUmVmLmN1cnJlbnQgPSB3aWR0aFxuICAgICAgICBhZGp1c3RDb250ZW50KClcbiAgICAgIH1cbiAgICB9LCAyMDApKVxuICAgIHJlc2l6ZU9ic2VydmVyUmVmLmN1cnJlbnQub2JzZXJ2ZShjb250YWluZXJSZWYuY3VycmVudClcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICByZXNpemVPYnNlcnZlclJlZi5jdXJyZW50LmRpc2Nvbm5lY3QoKVxuICAgIH1cbiAgfSwgW2FkanVzdENvbnRlbnRdKVxuXG4gIGhvb2tzLnVzZUVmZmVjdE9uY2UoKCkgPT4ge1xuICAgIGNvbnRhaW5lcldpZHRoUmVmLmN1cnJlbnQgPSBjb250YWluZXJSZWYuY3VycmVudD8uY2xpZW50V2lkdGhcbiAgICBhZGp1c3RDb250ZW50KClcbiAgfSlcblxuICBjb25zdCBoYW5kbGVJdGVtV2lkdGhDaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjaygoaW5kZXg6IG51bWJlciwgd2lkdGg6IG51bWJlcikgPT4ge1xuICAgIGNvbnN0IHF1ZXJ5SXRlbSA9IHF1ZXJ5SXRlbXNbaW5kZXhdXG4gICAgaWYgKGNvbnRlbnRXaWR0aFJlZi5jdXJyZW50W3F1ZXJ5SXRlbS5jb25maWdJZF0gIT09IHdpZHRoKSB7XG4gICAgICBjb250ZW50V2lkdGhSZWYuY3VycmVudFtxdWVyeUl0ZW0uY29uZmlnSWRdID0gd2lkdGhcbiAgICAgIGFkanVzdENvbnRlbnQoKVxuICAgIH1cbiAgfSwgW3F1ZXJ5SXRlbXMsIGFkanVzdENvbnRlbnRdKVxuXG4gIGNvbnN0IGhhbmRsZVBvcHBlck9wZW5lZENoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKChpbmRleDogbnVtYmVyLCBpc09wZW46IGJvb2xlYW4pID0+IHtcbiAgICBpZiAoaXNPcGVuKSB7XG4gICAgICBzZXRPcGVuZWRQb3BwZXIoaW5kZXgpXG4gICAgfSBlbHNlIGlmIChpbmRleCA9PT0gb3BlbmVkUG9wcGVyKSB7XG4gICAgICAvLyBjdXJyZW50IHBvcHBlciBpcyBjbG9zZWRcbiAgICAgIHNldE9wZW5lZFBvcHBlcigtMSlcbiAgICB9XG4gIH0sIFtvcGVuZWRQb3BwZXJdKVxuXG4gIGNvbnN0IFtleHBhbmRlZEFycmF5LCBub25FeHBhbmRlZEFycmF5XSA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgIGNvbnN0IGV4cGFuZGVkQXJyYXkgPSBbXVxuICAgIGNvbnN0IG5vbkV4cGFuZGVkQXJyYXkgPSBbXVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcXVlcnlJdGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGkgPCBudW1PZkV4cGFuZGVkKSB7XG4gICAgICAgIGV4cGFuZGVkQXJyYXkucHVzaChxdWVyeUl0ZW1zW2ldKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbm9uRXhwYW5kZWRBcnJheS5wdXNoKHF1ZXJ5SXRlbXNbaV0pXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBbZXhwYW5kZWRBcnJheSwgbm9uRXhwYW5kZWRBcnJheV1cbiAgfSwgW3F1ZXJ5SXRlbXMsIG51bU9mRXhwYW5kZWRdKVxuXG4gIHJldHVybiAoXG4gICAgPGRpdiByZWY9e2NvbnRhaW5lclJlZn0gY3NzPXtzdHlsZX0gY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdydW50aW1lLXF1ZXJ5X19xdWVyeS1saXN0IGgtMTAwIGQtZmxleCcsIHsgJ2ZsZXgtd3JhcCc6IHdyYXAsICdhbGlnbi1jb250ZW50LXN0YXJ0Jzogd3JhcCB9KX0+XG4gICAgICB7ZXhwYW5kZWRBcnJheS5tYXAoKHF1ZXJ5SXRlbSwgaW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgY3VycmVudEl0ZW0gPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1FVRVJZX0lURU0sIHF1ZXJ5SXRlbSlcbiAgICAgICAgcmV0dXJuIDxUYXNrTGlzdFBvcHBlcldyYXBwZXJcbiAgICAgICAgICBpZD17aW5kZXh9XG4gICAgICAgICAga2V5PXtjdXJyZW50SXRlbS5jb25maWdJZH1cbiAgICAgICAgICBpY29uPXtjdXJyZW50SXRlbS5pY29ufVxuICAgICAgICAgIGJ1dHRvblR5cGU9J2RlZmF1bHQnXG4gICAgICAgICAgbGFiZWw9e2N1cnJlbnRJdGVtLmRpc3BsYXlMYWJlbCA/IGN1cnJlbnRJdGVtLm5hbWUgOiB1bmRlZmluZWR9XG4gICAgICAgICAgcG9wcGVyVGl0bGU9e2N1cnJlbnRJdGVtLm5hbWV9XG4gICAgICAgICAgb25XaWR0aENoYW5nZT17aGFuZGxlSXRlbVdpZHRoQ2hhbmdlfVxuICAgICAgICAgIG1pblNpemU9e21pblNpemV9XG4gICAgICAgICAgZGVmYXVsdFNpemU9e2RlZmF1bHRTaXplfVxuICAgICAgICAgIG9uT3BlbmVkQ2hhbmdlPXtoYW5kbGVQb3BwZXJPcGVuZWRDaGFuZ2V9XG4gICAgICAgICAgZm9yY2VDbG9zZT17b3BlbmVkUG9wcGVyID49IDAgJiYgb3BlbmVkUG9wcGVyICE9PSBpbmRleH1cbiAgICAgICAgPlxuICAgICAgICAgIDxRdWVyeVRhc2tcbiAgICAgICAgICAgIHdpZGdldElkPXt3aWRnZXRJZH1cbiAgICAgICAgICAgIGluZGV4PXtpbmRleH1cbiAgICAgICAgICAgIHRvdGFsPXsxfVxuICAgICAgICAgICAgaXNJblBvcHBlclxuICAgICAgICAgICAgcXVlcnlJdGVtPXtjdXJyZW50SXRlbX1cbiAgICAgICAgICAgIHdyYXBwZWRJblBvcHBlcj17dHJ1ZX1cbiAgICAgICAgICAgIGNsYXNzTmFtZT0ncGItNCdcbiAgICAgICAgICAgIGRlZmF1bHRQYWdlU2l6ZT17ZGVmYXVsdFBhZ2VTaXplfVxuICAgICAgICAgICAgaW5pdGlhbElucHV0VmFsdWU9e2N1cnJlbnRJdGVtLnNob3J0SWQgPT09IHByb3BzLmluaXRpYWxRdWVyeVZhbHVlPy5zaG9ydElkID8gcHJvcHMuaW5pdGlhbFF1ZXJ5VmFsdWUudmFsdWUgOiB1bmRlZmluZWR9XG4gICAgICAgICAgICBvbkhhc2hQYXJhbWV0ZXJVc2VkPXtwcm9wcy5vbkhhc2hQYXJhbWV0ZXJVc2VkfVxuICAgICAgICAgICAgcXVlcnlJdGVtU2hvcnRJZD17Y3VycmVudEl0ZW0uc2hvcnRJZH1cbiAgICAgICAgICAvPlxuICAgICAgICA8L1Rhc2tMaXN0UG9wcGVyV3JhcHBlcj5cbiAgICAgIH0pfVxuXG4gICAgICB7bm9uRXhwYW5kZWRBcnJheS5sZW5ndGggPiAwICYmIChcbiAgICAgICAgPFRhc2tMaXN0UG9wcGVyV3JhcHBlclxuICAgICAgICAgIGlkPXtleHBhbmRlZEFycmF5Lmxlbmd0aCArIDF9XG4gICAgICAgICAgaWNvbj17aWNvbk1hcC5pY29uTW9yZX1cbiAgICAgICAgICBtaW5TaXplPXttaW5TaXplfVxuICAgICAgICAgIGJ1dHRvblR5cGU9J2RlZmF1bHQnXG4gICAgICAgICAgcG9wcGVyVGl0bGU9e3dpZGdldExhYmVsfVxuICAgICAgICAgIGRlZmF1bHRTaXplPXtkZWZhdWx0U2l6ZX1cbiAgICAgICAgICBvbk9wZW5lZENoYW5nZT17aGFuZGxlUG9wcGVyT3BlbmVkQ2hhbmdlfVxuICAgICAgICAgIGZvcmNlQ2xvc2U9e29wZW5lZFBvcHBlciA+PSAwICYmIG9wZW5lZFBvcHBlciAhPT0gZXhwYW5kZWRBcnJheS5sZW5ndGggKyAxfVxuICAgICAgICA+XG4gICAgICAgICAgPFF1ZXJ5VGFza0xpc3Qgd2lkZ2V0SWQ9e3dpZGdldElkfSBpc0luUG9wcGVyIGRlZmF1bHRQYWdlU2l6ZT17ZGVmYXVsdFBhZ2VTaXplfSBxdWVyeUl0ZW1zPXtub25FeHBhbmRlZEFycmF5IGFzIGFueX0gY2xhc3NOYW1lPSdwYi00JyBpbml0aWFsUXVlcnlWYWx1ZT17cHJvcHMuaW5pdGlhbFF1ZXJ5VmFsdWV9IG9uSGFzaFBhcmFtZXRlclVzZWQ9e3Byb3BzLm9uSGFzaFBhcmFtZXRlclVzZWR9IC8+XG4gICAgICAgIDwvVGFza0xpc3RQb3BwZXJXcmFwcGVyPlxuICAgICAgKX1cbiAgICA8L2Rpdj5cbiAgKVxufVxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQgeyBqc3gsIGNzcywgUmVhY3QsIHR5cGUgSWNvblJlc3VsdCwgdHlwZSBJbW11dGFibGVPYmplY3QsIGxvZGFzaCwgY2xhc3NOYW1lcywgaG9va3MsIGlzS2V5Ym9hcmRNb2RlLCBmb2N1c0VsZW1lbnRJbktleWJvYXJkTW9kZSB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IEJ1dHRvbiwgSWNvbiwgTW9iaWxlUGFuZWwsIHR5cGUgU2l6ZSwgdHlwZSBCdXR0b25UeXBlLCBGT0NVU0FCTEVfQ09OVEFJTkVSX0NMQVNTLCBGbG9hdGluZ1BhbmVsLCB0eXBlIFNoaWZ0T3B0aW9ucyB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQgeyBXSURHRVRfVkVSU0lPTiB9IGZyb20gJy4uL3ZlcnNpb24nXG5cbmV4cG9ydCBpbnRlcmZhY2UgVGFza0xpc3RQb3BwZXJXcmFwcGVyUHJvcHMge1xuICBpZDogbnVtYmVyXG4gIGljb24/OiBzdHJpbmcgfCBJbW11dGFibGVPYmplY3Q8SWNvblJlc3VsdD5cbiAgbGFiZWw/OiBzdHJpbmdcbiAgZm9yY2VDbG9zZT86IGJvb2xlYW5cbiAgcG9wcGVyVGl0bGU/OiBzdHJpbmdcbiAgYnV0dG9uVHlwZT86IEJ1dHRvblR5cGVcbiAgb25XaWR0aENoYW5nZT86IChpZDogbnVtYmVyLCB3aWR0aDogbnVtYmVyKSA9PiB2b2lkXG4gIG9uT3BlbmVkQ2hhbmdlPzogKGlkOiBudW1iZXIsIGlzT3BlbjogYm9vbGVhbikgPT4gdm9pZFxuICBtaW5TaXplOiBTaXplXG4gIGRlZmF1bHRTaXplOiBTaXplXG4gIGNoaWxkcmVuOiBSZWFjdC5SZWFjdEVsZW1lbnQ8YW55PlxufVxuXG5jb25zdCBzaGlmdE9wdGlvbnM6IFNoaWZ0T3B0aW9ucyA9IHsgcGFkZGluZzogMSB9XG5cbmV4cG9ydCBmdW5jdGlvbiBUYXNrTGlzdFBvcHBlcldyYXBwZXIgKHByb3BzOiBUYXNrTGlzdFBvcHBlcldyYXBwZXJQcm9wcykge1xuICBjb25zdCB7IGlkLCBpY29uLCBsYWJlbCwgZm9yY2VDbG9zZSwgb25PcGVuZWRDaGFuZ2UsIHBvcHBlclRpdGxlLCBtaW5TaXplLCBkZWZhdWx0U2l6ZSwgb25XaWR0aENoYW5nZSwgYnV0dG9uVHlwZSA9ICd0ZXJ0aWFyeScsIGNoaWxkcmVuIH0gPSBwcm9wc1xuICBjb25zdCBpY29uUmVmID0gUmVhY3QudXNlUmVmPEhUTUxCdXR0b25FbGVtZW50Pih1bmRlZmluZWQpXG4gIGNvbnN0IHdpZHRoUmVmID0gUmVhY3QudXNlUmVmKDApXG4gIGNvbnN0IFtpc09wZW4sIHNldElzT3Blbl0gPSBSZWFjdC51c2VTdGF0ZShmYWxzZSlcbiAgY29uc3QgW3BvcHBlclZlcnNpb24sIHNldFBvcHBlclZlcnNpb25dID0gUmVhY3QudXNlU3RhdGUoMClcbiAgY29uc3QgaXNNb2JpbGUgPSBob29rcy51c2VDaGVja1NtYWxsQnJvd3NlclNpemVNb2RlKClcblxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChmb3JjZUNsb3NlKSB7XG4gICAgICBzZXRJc09wZW4oZmFsc2UpXG4gICAgfVxuICB9LCBbZm9yY2VDbG9zZV0pXG5cbiAgaG9va3MudXNlRWZmZWN0T25jZSgoKSA9PiB7XG4gICAgaWYgKHR5cGVvZiBvbldpZHRoQ2hhbmdlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICB3aWR0aFJlZi5jdXJyZW50ID0gTWF0aC5yb3VuZChpY29uUmVmLmN1cnJlbnQuY2xpZW50V2lkdGgpXG4gICAgICBvbldpZHRoQ2hhbmdlKGlkLCB3aWR0aFJlZi5jdXJyZW50KVxuICAgICAgY29uc3QgcmVzaXplT2JzZXJ2ZXIgPSBuZXcgUmVzaXplT2JzZXJ2ZXIobG9kYXNoLnRocm90dGxlKChlbnRyaWVzKSA9PiB7XG4gICAgICAgIGNvbnN0IHdpZHRoID0gTWF0aC5yb3VuZChlbnRyaWVzWzBdLmNvbnRlbnRSZWN0LndpZHRoKVxuICAgICAgICBpZiAod2lkdGhSZWYuY3VycmVudCAhPT0gd2lkdGgpIHtcbiAgICAgICAgICB3aWR0aFJlZi5jdXJyZW50ID0gd2lkdGhcbiAgICAgICAgICBvbldpZHRoQ2hhbmdlKGlkLCB3aWR0aClcbiAgICAgICAgfVxuICAgICAgfSwgMjAwKSlcbiAgICAgIHJlc2l6ZU9ic2VydmVyLm9ic2VydmUoaWNvblJlZi5jdXJyZW50KVxuXG4gICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICByZXNpemVPYnNlcnZlci5kaXNjb25uZWN0KClcbiAgICAgIH1cbiAgICB9XG4gIH0pXG5cbiAgY29uc3QgdG9nZ2xlUG9wcGVyID0gUmVhY3QudXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGlmICh0eXBlb2Ygb25PcGVuZWRDaGFuZ2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIG9uT3BlbmVkQ2hhbmdlKGlkLCAhaXNPcGVuKVxuICAgIH1cbiAgICBzZXRJc09wZW4oIWlzT3BlbilcbiAgICBzZXRQb3BwZXJWZXJzaW9uKHBvcHBlclZlcnNpb24gKyAxKVxuICAgIGlmIChpc09wZW4pIHtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBpZiAoaXNLZXlib2FyZE1vZGUoKSkge1xuICAgICAgICAgIGZvY3VzRWxlbWVudEluS2V5Ym9hcmRNb2RlKGljb25SZWYuY3VycmVudClcbiAgICAgICAgfVxuICAgICAgfSwgMjAwKVxuICAgIH1cbiAgfSwgW2lkLCBpc09wZW4sIHBvcHBlclZlcnNpb24sIG9uT3BlbmVkQ2hhbmdlXSlcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPSdydW50aW1lLXF1ZXJ5X193aWRnZXQtcG9wcGVyJz5cbiAgICAgIDxCdXR0b25cbiAgICAgICAgdGl0bGU9e2xhYmVsfVxuICAgICAgICBhcmlhLWxhYmVsPXtsYWJlbH1cbiAgICAgICAgaWNvbiBzaXplPSdzbSdcbiAgICAgICAgdmFyaWFudD17YnV0dG9uVHlwZSA9PT0gJ3RlcnRpYXJ5JyA/ICd0ZXh0JyA6IHVuZGVmaW5lZH1cbiAgICAgICAgY29sb3I9e2J1dHRvblR5cGUgPT09ICd0ZXJ0aWFyeScgPyAnaW5oZXJpdCcgOiB1bmRlZmluZWR9XG4gICAgICAgIHR5cGU9e2J1dHRvblR5cGUgPT09ICd0ZXJ0aWFyeScgPyB1bmRlZmluZWQgOiBidXR0b25UeXBlfVxuICAgICAgICByZWY9e2ljb25SZWZ9XG4gICAgICAgIG9uQ2xpY2s9e3RvZ2dsZVBvcHBlcn1cbiAgICAgID5cbiAgICAgICAge2ljb24gJiYgPEljb25cbiAgICAgICAgICBzaXplPXsxNn1cbiAgICAgICAgICB7Li4uKHR5cGVvZiBpY29uID09PSAnc3RyaW5nJyA/IHsgaWNvbiB9IDogeyBpY29uOiBpY29uLnN2ZywgY29sb3I6IGJ1dHRvblR5cGUgPT09ICd0ZXJ0aWFyeScgPyB1bmRlZmluZWQgOiBpY29uLnByb3BlcnRpZXMuY29sb3IgfSl9XG4gICAgICAgIC8+fVxuICAgICAgICB7bGFiZWwgJiYgPGRpdlxuICAgICAgICAgIGNzcz17Y3NzYFxuICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuICAgICAgICAgICAgZGlzcGxheTogLXdlYmtpdC1ib3g7XG4gICAgICAgICAgICAtd2Via2l0LWxpbmUtY2xhbXA6IDI7XG4gICAgICAgICAgICAtd2Via2l0LWJveC1vcmllbnQ6IHZlcnRpY2FsO1xuICAgICAgICAgICAgd29yZC1icmVhazogYnJlYWstd29yZDtcbiAgICAgICAgICAgIHdvcmQtd3JhcDogYnJlYWstd29yZDtcbiAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxLjI7XG4gICAgICAgICAgYH1cbiAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZXMoeyAnbWwtMic6IGljb24gIT0gbnVsbCB9KX0+e2xhYmVsfTwvZGl2Pn1cbiAgICAgIDwvQnV0dG9uPlxuICAgICAge2lzTW9iaWxlXG4gICAgICAgID8gPE1vYmlsZVBhbmVsIG9wZW49e2lzT3Blbn0gdGl0bGU9e3BvcHBlclRpdGxlfSBvbkNsb3NlPXt0b2dnbGVQb3BwZXJ9PlxuICAgICAgICAgICAgPGRpdiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgIDxkaXYgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICAgICAgICBvdmVyZmxvdzogYXV0bztcbiAgICAgICAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogMXJlbTsgLyogU2NvcGVkIHBhZGRpbmcgdG8gc3BhY2UgY29udGVudCBmcm9tIGZvb3RlciAqL1xuICAgICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgICB7Y2hpbGRyZW59XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICB7LyogU3RhdGlvbmFyeSBmb290ZXIgKi99XG4gICAgICAgICAgICAgIDxkaXYgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgcGFkZGluZzogNHB4IDEycHg7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkIHZhcigtLXN5cy1jb2xvci1kaXZpZGVyLXNlY29uZGFyeSk7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tc3lzLWNvbG9yLXN1cmZhY2UtcGFwZXIpO1xuICAgICAgICAgICAgICAgIGZsZXgtc2hyaW5rOiAwO1xuICAgICAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAgPHNwYW4gY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICBmb250LXNpemU6IDAuNzVyZW07XG4gICAgICAgICAgICAgICAgICBjb2xvcjogdmFyKC0tc3lzLWNvbG9yLXRleHQtdGVydGlhcnkpO1xuICAgICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDQwMDtcbiAgICAgICAgICAgICAgICAgIGxldHRlci1zcGFjaW5nOiAwLjAyNWVtO1xuICAgICAgICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWZsZXg7XG4gICAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgICAgICAgICAgZ2FwOiA0cHg7XG4gICAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAgICB7LyogQ29kZS9PcGVuIFNvdXJjZSBTeW1ib2wgKi99XG4gICAgICAgICAgICAgICAgICA8c3ZnIFxuICAgICAgICAgICAgICAgICAgICB3aWR0aD1cIjE0XCIgXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodD1cIjE0XCIgXG4gICAgICAgICAgICAgICAgICAgIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBcbiAgICAgICAgICAgICAgICAgICAgZmlsbD1cIm5vbmVcIiBcbiAgICAgICAgICAgICAgICAgICAgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgXG4gICAgICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoPVwiMlwiXG4gICAgICAgICAgICAgICAgICAgIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgICAgICAgIGZsZXgtc2hyaW5rOiAwO1xuICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAuNjtcbiAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPHBvbHlsaW5lIHBvaW50cz1cIjE2IDE4IDIyIDEyIDE2IDZcIi8+XG4gICAgICAgICAgICAgICAgICAgIDxwb2x5bGluZSBwb2ludHM9XCI4IDYgMiAxMiA4IDE4XCIvPlxuICAgICAgICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICAgICAgICBRdWVyeVNpbXBsZSBieSBNYXBTaW1wbGVcbiAgICAgICAgICAgICAgICAgIDxzcGFuIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgICAgICBtYXJnaW4tbGVmdDogNnB4O1xuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjU7XG4gICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC43cmVtO1xuICAgICAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAgICAgIHZ7V0lER0VUX1ZFUlNJT059XG4gICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvTW9iaWxlUGFuZWw+XG4gICAgICAgIDogPEZsb2F0aW5nUGFuZWxcbiAgICAgICAgICAgIGNsYXNzTmFtZT0ndWktdW5pdC1wb3BwZXIgdWktdW5pdC1wb3BwZXJfay1hcnJhbmdlbWVudC1pY29uIGZsZXgtZ3Jvdy0xJ1xuICAgICAgICAgICAgaGVhZGVyQ2xhc3NOYW1lPXtGT0NVU0FCTEVfQ09OVEFJTkVSX0NMQVNTfVxuICAgICAgICAgICAgb3Blbj17aXNPcGVufVxuICAgICAgICAgICAgb25IZWFkZXJDbG9zZT17dG9nZ2xlUG9wcGVyfVxuICAgICAgICAgICAgdG9nZ2xlPXt0b2dnbGVQb3BwZXJ9XG4gICAgICAgICAgICBoZWFkZXJUaXRsZT17cG9wcGVyVGl0bGV9XG4gICAgICAgICAgICBtaW5TaXplPXttaW5TaXplfVxuICAgICAgICAgICAgZGVmYXVsdFNpemU9e2RlZmF1bHRTaXplfVxuICAgICAgICAgICAgZHJhZ0JvdW5kcz0nYm9keSdcbiAgICAgICAgICAgIHZlcnNpb249e3BvcHBlclZlcnNpb259XG4gICAgICAgICAgICByZWZlcmVuY2U9e2ljb25SZWZ9XG4gICAgICAgICAgICBwbGFjZW1lbnQ9J2JvdHRvbS1zdGFydCdcbiAgICAgICAgICAgIHNoaWZ0T3B0aW9ucz17c2hpZnRPcHRpb25zfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxkaXYgY3NzPXtjc3NgXG4gICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICA8ZGl2IGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgICAgICAgb3ZlcmZsb3c6IGF1dG87XG4gICAgICAgICAgICAgICAgcGFkZGluZy1ib3R0b206IDFyZW07IC8qIFNjb3BlZCBwYWRkaW5nIHRvIHNwYWNlIGNvbnRlbnQgZnJvbSBmb290ZXIgKi9cbiAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAge2NoaWxkcmVufVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgey8qIFN0YXRpb25hcnkgZm9vdGVyICovfVxuICAgICAgICAgICAgICA8ZGl2IGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDRweCAxMnB4O1xuICAgICAgICAgICAgICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCB2YXIoLS1zeXMtY29sb3ItZGl2aWRlci1zZWNvbmRhcnkpO1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXN5cy1jb2xvci1zdXJmYWNlLXBhcGVyKTtcbiAgICAgICAgICAgICAgICBmbGV4LXNocmluazogMDtcbiAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICAgIDxzcGFuIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjc1cmVtO1xuICAgICAgICAgICAgICAgICAgY29sb3I6IHZhcigtLXN5cy1jb2xvci10ZXh0LXRlcnRpYXJ5KTtcbiAgICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA0MDA7XG4gICAgICAgICAgICAgICAgICBsZXR0ZXItc3BhY2luZzogMC4wMjVlbTtcbiAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1mbGV4O1xuICAgICAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICAgICAgICAgIGdhcDogNHB4O1xuICAgICAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICAgICAgey8qIENvZGUvT3BlbiBTb3VyY2UgU3ltYm9sICovfVxuICAgICAgICAgICAgICAgICAgPHN2ZyBcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg9XCIxNFwiIFxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9XCIxNFwiIFxuICAgICAgICAgICAgICAgICAgICB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgXG4gICAgICAgICAgICAgICAgICAgIGZpbGw9XCJub25lXCIgXG4gICAgICAgICAgICAgICAgICAgIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIFxuICAgICAgICAgICAgICAgICAgICBzdHJva2VXaWR0aD1cIjJcIlxuICAgICAgICAgICAgICAgICAgICBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgICAgICBmbGV4LXNocmluazogMDtcbiAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjY7XG4gICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxwb2x5bGluZSBwb2ludHM9XCIxNiAxOCAyMiAxMiAxNiA2XCIvPlxuICAgICAgICAgICAgICAgICAgICA8cG9seWxpbmUgcG9pbnRzPVwiOCA2IDIgMTIgOCAxOFwiLz5cbiAgICAgICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgICAgICAgUXVlcnlTaW1wbGUgYnkgTWFwU2ltcGxlXG4gICAgICAgICAgICAgICAgICA8c3BhbiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IDZweDtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMC41O1xuICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDAuN3JlbTtcbiAgICAgICAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICAgICAgICB2e1dJREdFVF9WRVJTSU9OfVxuICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L0Zsb2F0aW5nUGFuZWw+XG4gICAgICB9XG4gICAgPC9kaXY+XG4gIClcbn1cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHsganN4LCBjc3MsIFJlYWN0LCB0eXBlIEltbXV0YWJsZUFycmF5LCBJbW11dGFibGUsIHR5cGUgSW1tdXRhYmxlT2JqZWN0LCBob29rcywgdHlwZSBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLCB0eXBlIEZlYXR1cmVEYXRhUmVjb3JkLCB0eXBlIERhdGFTb3VyY2UgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBTZWxlY3QgfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHR5cGUgeyBRdWVyeUl0ZW1UeXBlLCBTZWxlY3Rpb25UeXBlIH0gZnJvbSAnLi4vY29uZmlnJ1xuaW1wb3J0IHsgUXVlcnlUYXNrIH0gZnJvbSAnLi9xdWVyeS10YXNrJ1xuaW1wb3J0IHsgRk9DVVNBQkxFX0NPTlRBSU5FUl9DTEFTUyB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQgZGVmYXVsdE1lc3NhZ2VzIGZyb20gJy4vdHJhbnNsYXRpb25zL2RlZmF1bHQnXG5pbXBvcnQgeyBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyIH0gZnJvbSAnd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24nXG5cbmNvbnN0IGRlYnVnTG9nZ2VyID0gY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlcigpXG5cbmV4cG9ydCBpbnRlcmZhY2UgUXVlcnlUYXNrTGlzdFByb3BzIHtcbiAgd2lkZ2V0SWQ6IHN0cmluZ1xuICBxdWVyeUl0ZW1zOiBJbW11dGFibGVBcnJheTxRdWVyeUl0ZW1UeXBlPlxuICBpc0luUG9wcGVyPzogYm9vbGVhblxuICBkZWZhdWx0UGFnZVNpemU/OiBudW1iZXJcbiAgY2xhc3NOYW1lPzogc3RyaW5nXG4gIGluaXRpYWxRdWVyeVZhbHVlPzogeyBzaG9ydElkOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcgfVxuICBvbkhhc2hQYXJhbWV0ZXJVc2VkPzogKHNob3J0SWQ6IHN0cmluZykgPT4gdm9pZFxuICByZXN1bHRzTW9kZT86IFNlbGVjdGlvblR5cGVcbiAgb25SZXN1bHRzTW9kZUNoYW5nZT86IChtb2RlOiBTZWxlY3Rpb25UeXBlKSA9PiB2b2lkXG4gIGFjY3VtdWxhdGVkUmVjb3Jkcz86IEZlYXR1cmVEYXRhUmVjb3JkW11cbiAgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2U/OiAocmVjb3JkczogRmVhdHVyZURhdGFSZWNvcmRbXSkgPT4gdm9pZFxuICB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0PzogYm9vbGVhblxuICBncmFwaGljc0xheWVyPzogX19lc3JpLkdyYXBoaWNzTGF5ZXJcbiAgbWFwVmlldz86IF9fZXNyaS5NYXBWaWV3IHwgX19lc3JpLlNjZW5lVmlld1xuICBvbkluaXRpYWxpemVHcmFwaGljc0xheWVyPzogKG91dHB1dERTOiBEYXRhU291cmNlKSA9PiBQcm9taXNlPHZvaWQ+XG4gIG9uQ2xlYXJHcmFwaGljc0xheWVyPzogKCkgPT4gdm9pZFxuICBhY3RpdmVUYWI/OiAncXVlcnknIHwgJ3Jlc3VsdHMnXG4gIG9uVGFiQ2hhbmdlPzogKHRhYjogJ3F1ZXJ5JyB8ICdyZXN1bHRzJykgPT4gdm9pZFxufVxuXG5pbnRlcmZhY2UgR3JvdXBlZFF1ZXJpZXMge1xuICBncm91cHM6IHsgW2dyb3VwSWQ6IHN0cmluZ106IHsgaXRlbXM6IEltbXV0YWJsZUFycmF5PFF1ZXJ5SXRlbVR5cGU+LCBkaXNwbGF5TmFtZTogc3RyaW5nLCBpY29uPzogYW55IH0gfVxuICB1bmdyb3VwZWQ6IEFycmF5PHsgaXRlbTogSW1tdXRhYmxlT2JqZWN0PFF1ZXJ5SXRlbVR5cGU+LCBpbmRleDogbnVtYmVyIH0+XG4gIGdyb3VwT3JkZXI6IHN0cmluZ1tdXG59XG5cbi8vIEhlbHBlciBmdW5jdGlvbiB0byBzb3J0IHF1ZXJpZXMgYnkgZGlzcGxheSBvcmRlciAobG93ZXIgbnVtYmVycyBhcHBlYXIgZmlyc3QpXG4vLyBRdWVyaWVzIHdpdGhvdXQgb3JkZXIgbWFpbnRhaW4gdGhlaXIgb3JpZ2luYWwgcmVsYXRpdmUgcG9zaXRpb25zXG5mdW5jdGlvbiBzb3J0UXVlcnlJdGVtc0J5T3JkZXIocXVlcnlJdGVtczogSW1tdXRhYmxlQXJyYXk8UXVlcnlJdGVtVHlwZT4pOiBJbW11dGFibGVBcnJheTxRdWVyeUl0ZW1UeXBlPiB7XG4gIC8vIEhhbmRsZSBudWxsL3VuZGVmaW5lZC9lbXB0eSBjYXNlc1xuICBpZiAoIXF1ZXJ5SXRlbXMgfHwgcXVlcnlJdGVtcy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gcXVlcnlJdGVtcyB8fCBJbW11dGFibGUoW10pXG4gIH1cbiAgXG4gIC8vIFNhZmVseSBjb252ZXJ0IHRvIHJlZ3VsYXIgYXJyYXkgZm9yIHNvcnRpbmdcbiAgLy8gSGFuZGxlIGJvdGggSW1tdXRhYmxlQXJyYXkgKGhhcyB0b0FycmF5IG1ldGhvZCkgYW5kIHJlZ3VsYXIgYXJyYXlzXG4gIGNvbnN0IGl0ZW1zQXJyYXkgPSAocXVlcnlJdGVtcyAmJiB0eXBlb2YgcXVlcnlJdGVtcy50b0FycmF5ID09PSAnZnVuY3Rpb24nKSBcbiAgICA/IHF1ZXJ5SXRlbXMudG9BcnJheSgpIFxuICAgIDogKEFycmF5LmlzQXJyYXkocXVlcnlJdGVtcykgPyBxdWVyeUl0ZW1zIDogW10pXG4gIFxuICBjb25zdCBpdGVtc1dpdGhJbmRleCA9IGl0ZW1zQXJyYXkubWFwKChpdGVtLCBpbmRleCkgPT4gKHsgaXRlbSwgb3JpZ2luYWxJbmRleDogaW5kZXggfSkpXG4gIGl0ZW1zV2l0aEluZGV4LnNvcnQoKGEsIGIpID0+IHtcbiAgICBjb25zdCBvcmRlckEgPSBhLml0ZW0ub3JkZXIgPz8gSW5maW5pdHlcbiAgICBjb25zdCBvcmRlckIgPSBiLml0ZW0ub3JkZXIgPz8gSW5maW5pdHlcbiAgICBpZiAob3JkZXJBICE9PSBvcmRlckIpIHtcbiAgICAgIHJldHVybiBvcmRlckEgLSBvcmRlckJcbiAgICB9XG4gICAgLy8gSWYgb3JkZXIgaXMgZXF1YWwgKGJvdGggSW5maW5pdHkgb3Igc2FtZSBudW1iZXIpLCBtYWludGFpbiBvcmlnaW5hbCBpbmRleCBvcmRlclxuICAgIHJldHVybiBhLm9yaWdpbmFsSW5kZXggLSBiLm9yaWdpbmFsSW5kZXhcbiAgfSlcbiAgcmV0dXJuIEltbXV0YWJsZShpdGVtc1dpdGhJbmRleC5tYXAoKHsgaXRlbSB9KSA9PiBpdGVtKSlcbn1cblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGdyb3VwIHF1ZXJpZXMgYnkgZ3JvdXBJZFxuY29uc3QgZ3JvdXBRdWVyaWVzID0gKHF1ZXJ5SXRlbXM6IEltbXV0YWJsZUFycmF5PFF1ZXJ5SXRlbVR5cGU+KTogR3JvdXBlZFF1ZXJpZXMgPT4ge1xuICBjb25zdCBncm91cHM6IHsgW2dyb3VwSWQ6IHN0cmluZ106IHsgaXRlbXM6IEltbXV0YWJsZUFycmF5PFF1ZXJ5SXRlbVR5cGU+LCBkaXNwbGF5TmFtZTogc3RyaW5nLCBpY29uPzogYW55IH0gfSA9IHt9XG4gIGNvbnN0IHVuZ3JvdXBlZDogQXJyYXk8eyBpdGVtOiBJbW11dGFibGVPYmplY3Q8UXVlcnlJdGVtVHlwZT4sIGluZGV4OiBudW1iZXIgfT4gPSBbXVxuICBjb25zdCBncm91cE9yZGVyOiBzdHJpbmdbXSA9IFtdXG4gIGNvbnN0IGdyb3VwSW5kZXhNYXA6IHsgW2dyb3VwSWQ6IHN0cmluZ106IG51bWJlciB9ID0ge31cbiAgXG4gIC8vIEZpcnN0IHBhc3M6IGNvbGxlY3QgaXRlbXMgaW4gcmVndWxhciBhcnJheXNcbiAgY29uc3QgZ3JvdXBJdGVtc01hcDogeyBbZ3JvdXBJZDogc3RyaW5nXTogUXVlcnlJdGVtVHlwZVtdIH0gPSB7fVxuXG4gIHF1ZXJ5SXRlbXMuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHtcbiAgICBpZiAoaXRlbS5ncm91cElkKSB7XG4gICAgICBpZiAoIWdyb3VwSXRlbXNNYXBbaXRlbS5ncm91cElkXSkge1xuICAgICAgICBncm91cEl0ZW1zTWFwW2l0ZW0uZ3JvdXBJZF0gPSBbXVxuICAgICAgICBncm91cHNbaXRlbS5ncm91cElkXSA9IHtcbiAgICAgICAgICBpdGVtczogSW1tdXRhYmxlKFtdKSxcbiAgICAgICAgICBkaXNwbGF5TmFtZTogaXRlbS5ncm91cERpc3BsYXlOYW1lIHx8IGl0ZW0ubmFtZSB8fCBgR3JvdXAgJHtpdGVtLmdyb3VwSWR9YCxcbiAgICAgICAgICBpY29uOiBpdGVtLmljb25cbiAgICAgICAgfVxuICAgICAgICBncm91cEluZGV4TWFwW2l0ZW0uZ3JvdXBJZF0gPSBpbmRleFxuICAgICAgICBncm91cE9yZGVyLnB1c2goaXRlbS5ncm91cElkKVxuICAgICAgfVxuICAgICAgZ3JvdXBJdGVtc01hcFtpdGVtLmdyb3VwSWRdLnB1c2goaXRlbSlcbiAgICB9IGVsc2Uge1xuICAgICAgdW5ncm91cGVkLnB1c2goeyBpdGVtLCBpbmRleCB9KVxuICAgIH1cbiAgfSlcblxuICAvLyBTZWNvbmQgcGFzczogY29udmVydCByZWd1bGFyIGFycmF5cyB0byBJbW11dGFibGVBcnJheXNcbiAgT2JqZWN0LmtleXMoZ3JvdXBJdGVtc01hcCkuZm9yRWFjaChncm91cElkID0+IHtcbiAgICBncm91cHNbZ3JvdXBJZF0uaXRlbXMgPSBJbW11dGFibGUoZ3JvdXBJdGVtc01hcFtncm91cElkXSlcbiAgfSlcblxuICByZXR1cm4geyBncm91cHMsIHVuZ3JvdXBlZCwgZ3JvdXBPcmRlciB9XG59XG5cbi8vIEhlbHBlciBmdW5jdGlvbiB0byBnZXQgZGlzcGxheSBuYW1lIGZvciBxdWVyeSBpbiBkcm9wZG93blxuLy8gVXNlczogc2VhcmNoQWxpYXMgfHwgamltdUZpZWxkTmFtZSB8fCBpdGVtLm5hbWUgfHwgZmFsbGJhY2tcbmNvbnN0IGdldFF1ZXJ5RGlzcGxheU5hbWUgPSAoaXRlbTogSW1tdXRhYmxlT2JqZWN0PFF1ZXJ5SXRlbVR5cGU+KTogc3RyaW5nID0+IHtcbiAgLy8gRmlyc3QgcHJpb3JpdHk6IHNlYXJjaEFsaWFzIGlmIHNldFxuICBpZiAoaXRlbS5zZWFyY2hBbGlhcykge1xuICAgIHJldHVybiBpdGVtLnNlYXJjaEFsaWFzXG4gIH1cbiAgXG4gIC8vIFNlY29uZCBwcmlvcml0eTogZmllbGQgbmFtZSBmcm9tIFNRTCBleHByZXNzaW9uXG4gIGNvbnN0IGppbXVGaWVsZE5hbWUgPSBpdGVtLnNxbEV4cHJPYmo/LnBhcnRzPy5bMF0/LmppbXVGaWVsZE5hbWVcbiAgaWYgKGppbXVGaWVsZE5hbWUpIHtcbiAgICByZXR1cm4gamltdUZpZWxkTmFtZVxuICB9XG4gIFxuICAvLyBUaGlyZCBwcmlvcml0eTogaXRlbSBuYW1lXG4gIGlmIChpdGVtLm5hbWUpIHtcbiAgICByZXR1cm4gaXRlbS5uYW1lXG4gIH1cbiAgXG4gIC8vIEZhbGxiYWNrXG4gIHJldHVybiAnUXVlcnknXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBRdWVyeVRhc2tMaXN0IChwcm9wczogUXVlcnlUYXNrTGlzdFByb3BzKSB7XG4gIGNvbnN0IHsgcXVlcnlJdGVtcywgd2lkZ2V0SWQsIGRlZmF1bHRQYWdlU2l6ZSwgaXNJblBvcHBlciA9IGZhbHNlLCBjbGFzc05hbWUgPSAnJywgaW5pdGlhbFF1ZXJ5VmFsdWUsIG9uSGFzaFBhcmFtZXRlclVzZWQsIHJlc3VsdHNNb2RlLCBvblJlc3VsdHNNb2RlQ2hhbmdlLCBhY2N1bXVsYXRlZFJlY29yZHMsIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlLCB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0LCBncmFwaGljc0xheWVyLCBtYXBWaWV3LCBvbkluaXRpYWxpemVHcmFwaGljc0xheWVyLCBvbkNsZWFyR3JhcGhpY3NMYXllciwgYWN0aXZlVGFiLCBvblRhYkNoYW5nZSB9ID0gcHJvcHNcbiAgY29uc3QgZ2V0STE4bk1lc3NhZ2UgPSBob29rcy51c2VUcmFuc2xhdGlvbihkZWZhdWx0TWVzc2FnZXMpXG4gIFxuICAvLyBTb3J0IHF1ZXJpZXMgYnkgZGlzcGxheSBvcmRlciBiZWZvcmUgZ3JvdXBpbmdcbiAgLy8gSGFuZGxlIGNhc2Ugd2hlcmUgcXVlcnlJdGVtcyBtaWdodCBiZSB1bmRlZmluZWQvbnVsbCBvciBub3QgYW4gSW1tdXRhYmxlQXJyYXlcbiAgY29uc3Qgc29ydGVkUXVlcnlJdGVtcyA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgIGlmICghcXVlcnlJdGVtcykge1xuICAgICAgcmV0dXJuIEltbXV0YWJsZShbXSlcbiAgICB9XG4gICAgcmV0dXJuIHNvcnRRdWVyeUl0ZW1zQnlPcmRlcihxdWVyeUl0ZW1zKVxuICB9LCBbcXVlcnlJdGVtc10pXG4gIFxuICBjb25zdCB7IGdyb3VwcywgdW5ncm91cGVkLCBncm91cE9yZGVyIH0gPSBSZWFjdC51c2VNZW1vKCgpID0+IGdyb3VwUXVlcmllcyhzb3J0ZWRRdWVyeUl0ZW1zKSwgW3NvcnRlZFF1ZXJ5SXRlbXNdKVxuICBcbiAgLy8gU3RhdGUgdG8gdHJhY2sgdGhlIGN1cnJlbnQgVVJMIGhhc2ggYW5kIHF1ZXJ5IHN0cmluZ1xuICBjb25zdCBbdXJsUGFyYW1zLCBzZXRVcmxQYXJhbXNdID0gUmVhY3QudXNlU3RhdGUoKCkgPT4gKHtcbiAgICBoYXNoOiB3aW5kb3cubG9jYXRpb24uaGFzaC5zdWJzdHJpbmcoMSksXG4gICAgcXVlcnk6IHdpbmRvdy5sb2NhdGlvbi5zZWFyY2guc3Vic3RyaW5nKDEpXG4gIH0pKVxuXG4gIC8vIExpc3RlbiBmb3IgaGFzaGNoYW5nZSBldmVudHMgdG8gdXBkYXRlIG91ciBsb2NhbCBzdGF0ZVxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGhhbmRsZVVybENoYW5nZSA9ICgpID0+IHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSCcsIHtcbiAgICAgICAgZXZlbnQ6ICd1cmwtY2hhbmdlLWRldGVjdGVkLWluLXRhc2stbGlzdCcsXG4gICAgICAgIG5ld0hhc2g6IHdpbmRvdy5sb2NhdGlvbi5oYXNoLFxuICAgICAgICBuZXdRdWVyeTogd2luZG93LmxvY2F0aW9uLnNlYXJjaCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgc2V0VXJsUGFyYW1zKHtcbiAgICAgICAgaGFzaDogd2luZG93LmxvY2F0aW9uLmhhc2guc3Vic3RyaW5nKDEpLFxuICAgICAgICBxdWVyeTogd2luZG93LmxvY2F0aW9uLnNlYXJjaC5zdWJzdHJpbmcoMSlcbiAgICAgIH0pXG4gICAgfVxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdoYXNoY2hhbmdlJywgaGFuZGxlVXJsQ2hhbmdlKVxuICAgIC8vIEFsc28gbGlzdGVuIGZvciBwb3BzdGF0ZSBpbiBjYXNlIHF1ZXJ5IHBhcmFtZXRlcnMgY2hhbmdlIHdpdGhvdXQgaGFzaCBjaGFuZ2VcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncG9wc3RhdGUnLCBoYW5kbGVVcmxDaGFuZ2UpXG4gICAgXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdoYXNoY2hhbmdlJywgaGFuZGxlVXJsQ2hhbmdlKVxuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BvcHN0YXRlJywgaGFuZGxlVXJsQ2hhbmdlKVxuICAgIH1cbiAgfSwgW10pXG5cbiAgLy8gRGV0ZXJtaW5lIGlmIHdlIGhhdmUgYW4gaW5pdGlhbCBxdWVyeSB2YWx1ZSBmcm9tIHRoZSBVUkwgaGFzaCBvciBxdWVyeSBzdHJpbmdcbiAgY29uc3QgaW5pdGlhbFF1ZXJ5VmFsdWVGcm9tVXJsID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgY29uc3QgeyBoYXNoLCBxdWVyeSB9ID0gdXJsUGFyYW1zXG4gICAgXG4gICAgY29uc3QgaGFzaFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoaGFzaClcbiAgICBjb25zdCBxdWVyeVBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMocXVlcnkpXG4gICAgXG4gICAgY29uc3QgYWxsUXVlcnlJdGVtcyA9IFsuLi51bmdyb3VwZWQubWFwKHUgPT4gdS5pdGVtKSwgLi4uT2JqZWN0LnZhbHVlcyhncm91cHMpLmZsYXRNYXAoZyA9PiBnLml0ZW1zKV1cbiAgICBcbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgYWxsUXVlcnlJdGVtcykge1xuICAgICAgaWYgKGl0ZW0uc2hvcnRJZCkge1xuICAgICAgICBpZiAoaGFzaFBhcmFtcy5oYXMoaXRlbS5zaG9ydElkKSkge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzaG9ydElkOiBpdGVtLnNob3J0SWQsXG4gICAgICAgICAgICB2YWx1ZTogaGFzaFBhcmFtcy5nZXQoaXRlbS5zaG9ydElkKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAocXVlcnlQYXJhbXMuaGFzKGl0ZW0uc2hvcnRJZCkpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc2hvcnRJZDogaXRlbS5zaG9ydElkLFxuICAgICAgICAgICAgdmFsdWU6IHF1ZXJ5UGFyYW1zLmdldChpdGVtLnNob3J0SWQpXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH0sIFt1bmdyb3VwZWQsIGdyb3VwcywgdXJsUGFyYW1zXSlcblxuICAvLyBVc2UgdGhlIHByb3AgaW5pdGlhbFF1ZXJ5VmFsdWUgaWYgcHJvdmlkZWQsIG90aGVyd2lzZSBmYWxsYmFjayB0byBvdXIgb3duIFVSTCBwYXJzaW5nXG4gIGNvbnN0IGVmZmVjdGl2ZUluaXRpYWxRdWVyeVZhbHVlID0gaW5pdGlhbFF1ZXJ5VmFsdWUgfHwgaW5pdGlhbFF1ZXJ5VmFsdWVGcm9tVXJsXG5cbiAgLy8gRmluZCB0aGUgcXVlcnkgaXRlbSBtYXRjaGluZyB0aGUgc2hvcnRJZCBmcm9tIFVSTCBoYXNoXG4gIGNvbnN0IG1hdGNoaW5nUXVlcnlJbmRleCA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgIGNvbnN0IHNob3J0SWQgPSBlZmZlY3RpdmVJbml0aWFsUXVlcnlWYWx1ZT8uc2hvcnRJZFxuICAgIGlmICghc2hvcnRJZCkge1xuICAgICAgcmV0dXJuIC0xXG4gICAgfVxuICAgIHJldHVybiBzb3J0ZWRRdWVyeUl0ZW1zLmZpbmRJbmRleChpdGVtID0+IGl0ZW0uc2hvcnRJZCA9PT0gc2hvcnRJZClcbiAgfSwgW3NvcnRlZFF1ZXJ5SXRlbXMsIGVmZmVjdGl2ZUluaXRpYWxRdWVyeVZhbHVlXSlcbiAgXG4gIC8vIERldGVybWluZSB3aGljaCBncm91cC91bmdyb3VwZWQgaW5kZXggdGhlIG1hdGNoaW5nIHF1ZXJ5IGlzIGF0XG4gIGNvbnN0IGdldFF1ZXJ5U2VsZWN0aW9uID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgaWYgKG1hdGNoaW5nUXVlcnlJbmRleCA8IDApIHJldHVybiBudWxsXG4gICAgXG4gICAgY29uc3QgaXRlbSA9IHNvcnRlZFF1ZXJ5SXRlbXNbbWF0Y2hpbmdRdWVyeUluZGV4XVxuICAgIGlmIChpdGVtLmdyb3VwSWQpIHtcbiAgICAgIGNvbnN0IGdyb3VwSXRlbXMgPSBncm91cHNbaXRlbS5ncm91cElkXT8uaXRlbXMgfHwgSW1tdXRhYmxlKFtdKVxuICAgICAgY29uc3QgaW5kZXhJbkdyb3VwID0gZ3JvdXBJdGVtcy5maW5kSW5kZXgocSA9PiBxLmNvbmZpZ0lkID09PSBpdGVtLmNvbmZpZ0lkKVxuICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgZXZlbnQ6ICdoYXNoLXF1ZXJ5LWZvdW5kLWluLWdyb3VwJyxcbiAgICAgICAgZ3JvdXBJZDogaXRlbS5ncm91cElkLFxuICAgICAgICBpbmRleEluR3JvdXA6IGluZGV4SW5Hcm91cCA+PSAwID8gaW5kZXhJbkdyb3VwIDogMCxcbiAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IGl0ZW0uY29uZmlnSWQsXG4gICAgICAgIHF1ZXJ5SXRlbVNob3J0SWQ6IGl0ZW0uc2hvcnRJZFxuICAgICAgfSlcbiAgICAgIHJldHVybiB7IHR5cGU6ICdncm91cCcgYXMgY29uc3QsIGdyb3VwSWQ6IGl0ZW0uZ3JvdXBJZCwgaW5kZXg6IGluZGV4SW5Hcm91cCA+PSAwID8gaW5kZXhJbkdyb3VwIDogMCB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFVuZ3JvdXBlZCBxdWVyeVxuICAgICAgY29uc3QgaW5kZXhJblVuZ3JvdXBlZCA9IHVuZ3JvdXBlZC5maW5kSW5kZXgoKHsgaXRlbTogcSB9KSA9PiBxLmNvbmZpZ0lkID09PSBpdGVtLmNvbmZpZ0lkKVxuICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgZXZlbnQ6ICdoYXNoLXF1ZXJ5LWZvdW5kLXVuZ3JvdXBlZCcsXG4gICAgICAgIGluZGV4SW5Vbmdyb3VwZWQ6IGluZGV4SW5Vbmdyb3VwZWQgPj0gMCA/IGluZGV4SW5Vbmdyb3VwZWQgOiAwLFxuICAgICAgICBxdWVyeUl0ZW1Db25maWdJZDogaXRlbS5jb25maWdJZCxcbiAgICAgICAgcXVlcnlJdGVtU2hvcnRJZDogaXRlbS5zaG9ydElkXG4gICAgICB9KVxuICAgICAgcmV0dXJuIHsgdHlwZTogJ3VuZ3JvdXBlZCcgYXMgY29uc3QsIGluZGV4OiBpbmRleEluVW5ncm91cGVkID49IDAgPyBpbmRleEluVW5ncm91cGVkIDogMCB9XG4gICAgfVxuICB9LCBbbWF0Y2hpbmdRdWVyeUluZGV4LCBzb3J0ZWRRdWVyeUl0ZW1zLCBncm91cHMsIHVuZ3JvdXBlZF0pXG4gIFxuICAvLyBIZWxwZXIgdG8gZGV0ZXJtaW5lIGRlZmF1bHQgc2VsZWN0aW9uIGJhc2VkIG9uIGRpc3BsYXkgb3JkZXJcbiAgY29uc3QgZ2V0RGVmYXVsdFNlbGVjdGlvbiA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgIGlmIChnZXRRdWVyeVNlbGVjdGlvbikge1xuICAgICAgcmV0dXJuIGdldFF1ZXJ5U2VsZWN0aW9uXG4gICAgfVxuICAgIFxuICAgIC8vIE5vIGhhc2ggcGFyYW1ldGVyIC0gZGV0ZXJtaW5lIGRlZmF1bHQgYmFzZWQgb24gZGlzcGxheSBvcmRlclxuICAgIC8vIENvbXBhcmUgZmlyc3QgdW5ncm91cGVkIHF1ZXJ5IHZzIGZpcnN0IHF1ZXJ5IGluIGZpcnN0IGdyb3VwXG4gICAgY29uc3QgZmlyc3RVbmdyb3VwZWRPcmRlciA9IHVuZ3JvdXBlZC5sZW5ndGggPiAwID8gKHVuZ3JvdXBlZFswXS5pdGVtLm9yZGVyID8/IEluZmluaXR5KSA6IEluZmluaXR5XG4gICAgY29uc3QgZmlyc3RHcm91cE9yZGVyID0gZ3JvdXBPcmRlci5sZW5ndGggPiAwICYmIGdyb3Vwc1tncm91cE9yZGVyWzBdXT8uaXRlbXM/Lmxlbmd0aCA+IDBcbiAgICAgID8gKGdyb3Vwc1tncm91cE9yZGVyWzBdXS5pdGVtc1swXS5vcmRlciA/PyBJbmZpbml0eSlcbiAgICAgIDogSW5maW5pdHlcbiAgICBcbiAgICAvLyBTZWxlY3Qgd2hpY2hldmVyIGhhcyBsb3dlciBvcmRlciAob3IgZmlyc3QgaWYgZXF1YWwpXG4gICAgaWYgKGZpcnN0VW5ncm91cGVkT3JkZXIgPCBmaXJzdEdyb3VwT3JkZXIpIHtcbiAgICAgIHJldHVybiB7IHR5cGU6ICd1bmdyb3VwZWQnIGFzIGNvbnN0LCBpbmRleDogMCB9XG4gICAgfSBlbHNlIGlmIChmaXJzdEdyb3VwT3JkZXIgPCBJbmZpbml0eSB8fCBncm91cE9yZGVyLmxlbmd0aCA+IDApIHtcbiAgICAgIHJldHVybiB7IHR5cGU6ICdncm91cCcgYXMgY29uc3QsIGdyb3VwSWQ6IGdyb3VwT3JkZXJbMF0sIGluZGV4OiAwIH1cbiAgICB9IGVsc2UgaWYgKHVuZ3JvdXBlZC5sZW5ndGggPiAwKSB7XG4gICAgICByZXR1cm4geyB0eXBlOiAndW5ncm91cGVkJyBhcyBjb25zdCwgaW5kZXg6IDAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbFxuICB9LCBbZ2V0UXVlcnlTZWxlY3Rpb24sIHVuZ3JvdXBlZCwgZ3JvdXBzLCBncm91cE9yZGVyXSlcbiAgXG4gIC8vIFRyYWNrIHNlbGVjdGVkIHF1ZXJ5IC0gaW5pdGlhbGl6ZSB3aXRoIG1hdGNoaW5nIHF1ZXJ5IGlmIGZvdW5kIGZyb20gVVJMIGhhc2gsIG9yIGRlZmF1bHQgYmFzZWQgb24gZGlzcGxheSBvcmRlclxuICBjb25zdCBbc2VsZWN0ZWRHcm91cElkLCBzZXRTZWxlY3RlZEdyb3VwSWRdID0gUmVhY3QudXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4oKCkgPT4ge1xuICAgIGlmIChnZXREZWZhdWx0U2VsZWN0aW9uPy50eXBlID09PSAnZ3JvdXAnKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgICBldmVudDogJ2luaXRpYWwtZ3JvdXAtc2VsZWN0aW9uJyxcbiAgICAgICAgZ3JvdXBJZDogZ2V0RGVmYXVsdFNlbGVjdGlvbi5ncm91cElkLFxuICAgICAgICBub3RlOiBnZXRRdWVyeVNlbGVjdGlvbiA/ICdIYXNoLW1hdGNoZWQnIDogJ0RlZmF1bHQgYmFzZWQgb24gZGlzcGxheSBvcmRlcidcbiAgICAgIH0pXG4gICAgICByZXR1cm4gZ2V0RGVmYXVsdFNlbGVjdGlvbi5ncm91cElkXG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH0pXG4gIGNvbnN0IFtzZWxlY3RlZEdyb3VwUXVlcnlJbmRleCwgc2V0U2VsZWN0ZWRHcm91cFF1ZXJ5SW5kZXhdID0gUmVhY3QudXNlU3RhdGUoKCkgPT4ge1xuICAgIGlmIChnZXREZWZhdWx0U2VsZWN0aW9uPy50eXBlID09PSAnZ3JvdXAnKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgICBldmVudDogJ2luaXRpYWwtZ3JvdXAtcXVlcnktaW5kZXgnLFxuICAgICAgICBpbmRleDogZ2V0RGVmYXVsdFNlbGVjdGlvbi5pbmRleCxcbiAgICAgICAgbm90ZTogZ2V0UXVlcnlTZWxlY3Rpb24gPyAnSGFzaC1tYXRjaGVkJyA6ICdEZWZhdWx0IGJhc2VkIG9uIGRpc3BsYXkgb3JkZXInXG4gICAgICB9KVxuICAgICAgcmV0dXJuIGdldERlZmF1bHRTZWxlY3Rpb24uaW5kZXhcbiAgICB9XG4gICAgcmV0dXJuIDBcbiAgfSlcbiAgY29uc3QgW3NlbGVjdGVkVW5ncm91cGVkSW5kZXgsIHNldFNlbGVjdGVkVW5ncm91cGVkSW5kZXhdID0gUmVhY3QudXNlU3RhdGUoKCkgPT4ge1xuICAgIGlmIChnZXREZWZhdWx0U2VsZWN0aW9uPy50eXBlID09PSAndW5ncm91cGVkJykge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgZXZlbnQ6ICdpbml0aWFsLXVuZ3JvdXBlZC1pbmRleCcsXG4gICAgICAgIGluZGV4OiBnZXREZWZhdWx0U2VsZWN0aW9uLmluZGV4LFxuICAgICAgICBub3RlOiBnZXRRdWVyeVNlbGVjdGlvbiA/ICdIYXNoLW1hdGNoZWQnIDogJ0RlZmF1bHQgYmFzZWQgb24gZGlzcGxheSBvcmRlcidcbiAgICAgIH0pXG4gICAgICByZXR1cm4gZ2V0RGVmYXVsdFNlbGVjdGlvbi5pbmRleFxuICAgIH1cbiAgICByZXR1cm4gMFxuICB9KVxuICBcbiAgLy8gVXBkYXRlIHNlbGVjdGlvbiB3aGVuIGluaXRpYWxRdWVyeVZhbHVlIGNoYW5nZXMgKGUuZy4sIHdoZW4gVVJMIGhhc2ggaXMgZGV0ZWN0ZWQpXG4gIC8vIFdlIG9ubHkgd2FudCB0byB1cGRhdGUgYmFzZWQgb24gdGhlIGhhc2ggaWYgb25lIGlzIFBSRVNFTlQuXG4gIC8vIElmIHRoZSBoYXNoIGlzIHJlbW92ZWQgKGluaXRpYWxRdWVyeVZhbHVlIGJlY29tZXMgbnVsbCksIHdlIERPTidUIHdhbnQgdG8gcmVzZXQgdG8gZGVmYXVsdC5cbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoZ2V0UXVlcnlTZWxlY3Rpb24pIHtcbiAgICAgIC8vIEhhc2ggcGFyYW1ldGVyIG1hdGNoZWQgLSB1c2UgdGhhdCBzZWxlY3Rpb24gYW5kIFNUQVkgVEhFUkVcbiAgICAgIGlmIChnZXRRdWVyeVNlbGVjdGlvbi50eXBlID09PSAnZ3JvdXAnKSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgICAgZXZlbnQ6ICdzZWxlY3Rpb24tY2hhbmdlZC10by1ncm91cC1mcm9tLWhhc2gnLFxuICAgICAgICAgIGdyb3VwSWQ6IGdldFF1ZXJ5U2VsZWN0aW9uLmdyb3VwSWQsXG4gICAgICAgICAgaW5kZXg6IGdldFF1ZXJ5U2VsZWN0aW9uLmluZGV4LFxuICAgICAgICAgIG5vdGU6ICdTdGlja3kgc2VsZWN0aW9uIGZyb20gaGFzaCBwYXJhbWV0ZXInXG4gICAgICAgIH0pXG4gICAgICAgIHNldFNlbGVjdGVkR3JvdXBJZChnZXRRdWVyeVNlbGVjdGlvbi5ncm91cElkKVxuICAgICAgICBzZXRTZWxlY3RlZEdyb3VwUXVlcnlJbmRleChnZXRRdWVyeVNlbGVjdGlvbi5pbmRleClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgICAgZXZlbnQ6ICdzZWxlY3Rpb24tY2hhbmdlZC10by11bmdyb3VwZWQtZnJvbS1oYXNoJyxcbiAgICAgICAgICBpbmRleDogZ2V0UXVlcnlTZWxlY3Rpb24uaW5kZXgsXG4gICAgICAgICAgbm90ZTogJ1N0aWNreSBzZWxlY3Rpb24gZnJvbSBoYXNoIHBhcmFtZXRlcidcbiAgICAgICAgfSlcbiAgICAgICAgc2V0U2VsZWN0ZWRHcm91cElkKG51bGwpXG4gICAgICAgIHNldFNlbGVjdGVkVW5ncm91cGVkSW5kZXgoZ2V0UXVlcnlTZWxlY3Rpb24uaW5kZXgpXG4gICAgICB9XG4gICAgfVxuICB9LCBbZ2V0UXVlcnlTZWxlY3Rpb25dKVxuICBcbiAgLy8gR2V0IHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgcXVlcnkgaXRlbVxuICBjb25zdCBnZXRTZWxlY3RlZFF1ZXJ5SXRlbSA9ICgpOiBJbW11dGFibGVPYmplY3Q8UXVlcnlJdGVtVHlwZT4gPT4ge1xuICAgIC8vIFBSSU9SSVRZIDE6IFVzZSBjdXJyZW50IHN0YXRlIHNlbGVjdGlvblxuICAgIC8vIFRoZSBzdGF0ZSBpcyBpbml0aWFsaXplZCB3aXRoIHRoZSBoYXNoIG1hdGNoIChpZiBwcmVzZW50KSBvciBkZWZhdWx0IG9yZGVyLFxuICAgIC8vIGFuZCB1cGRhdGVkIHZpYSB1c2VFZmZlY3QgaWYgdGhlIGhhc2ggY2hhbmdlcyBsYXRlci5cbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgZXZlbnQ6ICdnZXRTZWxlY3RlZFF1ZXJ5SXRlbS1zdGF0ZS1zZWxlY3Rpb24nLFxuICAgICAgc2VsZWN0ZWRHcm91cElkLFxuICAgICAgaGFzU2VsZWN0ZWRHcm91cDogc2VsZWN0ZWRHcm91cElkICYmIGdyb3Vwc1tzZWxlY3RlZEdyb3VwSWRdLFxuICAgICAgc2VsZWN0ZWRHcm91cFF1ZXJ5SW5kZXgsXG4gICAgICBzZWxlY3RlZFVuZ3JvdXBlZEluZGV4LFxuICAgICAgdW5ncm91cGVkTGVuZ3RoOiB1bmdyb3VwZWQubGVuZ3RoLFxuICAgICAgZ3JvdXBPcmRlckxlbmd0aDogZ3JvdXBPcmRlci5sZW5ndGgsXG4gICAgICBub3RlOiAnVXNpbmcgc3RhdGUgc2VsZWN0aW9uIChoYXNoLWF3YXJlKSdcbiAgICB9KVxuICAgIFxuICAgIC8vIElmIGEgZ3JvdXAgaXMgc2VsZWN0ZWQsIGdldCBxdWVyeSBmcm9tIHRoYXQgZ3JvdXBcbiAgICBpZiAoc2VsZWN0ZWRHcm91cElkICYmIGdyb3Vwc1tzZWxlY3RlZEdyb3VwSWRdKSB7XG4gICAgICBjb25zdCBncm91cEl0ZW1zID0gZ3JvdXBzW3NlbGVjdGVkR3JvdXBJZF0uaXRlbXNcbiAgICAgIGlmIChncm91cEl0ZW1zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgaWR4ID0gc2VsZWN0ZWRHcm91cFF1ZXJ5SW5kZXggPCBncm91cEl0ZW1zLmxlbmd0aCA/IHNlbGVjdGVkR3JvdXBRdWVyeUluZGV4IDogMFxuICAgICAgICBjb25zdCBzZWxlY3RlZEl0ZW0gPSBncm91cEl0ZW1zW2lkeF1cbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgICBldmVudDogJ3NlbGVjdGVkLXF1ZXJ5LWZyb20tZ3JvdXAnLFxuICAgICAgICAgIGdyb3VwSWQ6IHNlbGVjdGVkR3JvdXBJZCxcbiAgICAgICAgICBncm91cFF1ZXJ5SW5kZXg6IGlkeCxcbiAgICAgICAgICBxdWVyeUl0ZW1Db25maWdJZDogc2VsZWN0ZWRJdGVtLmNvbmZpZ0lkLFxuICAgICAgICAgIHF1ZXJ5RGlzcGxheU5hbWU6IGdldFF1ZXJ5RGlzcGxheU5hbWUoc2VsZWN0ZWRJdGVtKVxuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gc2VsZWN0ZWRJdGVtXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIE90aGVyd2lzZSwgZ2V0IGZyb20gdW5ncm91cGVkIHF1ZXJpZXNcbiAgICBpZiAodW5ncm91cGVkLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IGlkeCA9IHNlbGVjdGVkVW5ncm91cGVkSW5kZXggPCB1bmdyb3VwZWQubGVuZ3RoID8gc2VsZWN0ZWRVbmdyb3VwZWRJbmRleCA6IDBcbiAgICAgIGNvbnN0IHNlbGVjdGVkSXRlbSA9IHVuZ3JvdXBlZFtpZHhdLml0ZW1cbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgIGV2ZW50OiAnc2VsZWN0ZWQtcXVlcnktZnJvbS11bmdyb3VwZWQnLFxuICAgICAgICB1bmdyb3VwZWRJbmRleDogaWR4LFxuICAgICAgICBxdWVyeUl0ZW1Db25maWdJZDogc2VsZWN0ZWRJdGVtLmNvbmZpZ0lkLFxuICAgICAgICBxdWVyeURpc3BsYXlOYW1lOiBnZXRRdWVyeURpc3BsYXlOYW1lKHNlbGVjdGVkSXRlbSlcbiAgICAgIH0pXG4gICAgICByZXR1cm4gc2VsZWN0ZWRJdGVtXG4gICAgfVxuICAgIFxuICAgIC8vIEZhbGxiYWNrIHRvIGZpcnN0IHF1ZXJ5IGl0ZW1cbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgZXZlbnQ6ICdzZWxlY3RlZC1xdWVyeS1mYWxsYmFjaycsXG4gICAgICBub3RlOiAnTm8gZ3JvdXBzIG9yIHVuZ3JvdXBlZCBxdWVyaWVzLCB1c2luZyBmaXJzdCBpdGVtJ1xuICAgIH0pXG4gICAgcmV0dXJuIHNvcnRlZFF1ZXJ5SXRlbXNbMF1cbiAgfVxuICBcbiAgY29uc3Qgc2VsZWN0ZWRRdWVyeUl0ZW0gPSBnZXRTZWxlY3RlZFF1ZXJ5SXRlbSgpXG4gIGNvbnN0IHNlbGVjdGVkUXVlcnlSZWFsSW5kZXggPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICByZXR1cm4gc29ydGVkUXVlcnlJdGVtcy5maW5kSW5kZXgocSA9PiBxLmNvbmZpZ0lkID09PSBzZWxlY3RlZFF1ZXJ5SXRlbS5jb25maWdJZClcbiAgfSwgW3NvcnRlZFF1ZXJ5SXRlbXMsIHNlbGVjdGVkUXVlcnlJdGVtXSlcbiAgXG4gIC8vIElmIG9ubHkgb25lIHF1ZXJ5IHRvdGFsLCBkb24ndCBzaG93IGRyb3Bkb3duXG4gIGNvbnN0IHNob3dEcm9wZG93biA9IHNvcnRlZFF1ZXJ5SXRlbXMubGVuZ3RoID4gMSB8fCBncm91cE9yZGVyLmxlbmd0aCA+IDBcbiAgXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9e2BydW50aW1lLXF1ZXJ5X19xdWVyeS1saXN0IGgtMTAwICR7Y2xhc3NOYW1lfWB9IGNzcz17Y3NzYFxuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAucXVlcnktc2VsZWN0b3Ige1xuICAgICAgICBwYWRkaW5nOiAxNnB4O1xuICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tc3lzLWNvbG9yLWRpdmlkZXItc2Vjb25kYXJ5KTtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgZ2FwOiA4cHg7XG4gICAgICB9XG4gICAgICAucXVlcnktc2VsZWN0b3ItbGFiZWwge1xuICAgICAgICBmb250LXNpemU6IDAuODc1cmVtO1xuICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgICBjb2xvcjogdmFyKC0tc3lzLWNvbG9yLXRleHQtcHJpbWFyeSk7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDRweDtcbiAgICAgIH1cbiAgICAgIC5xdWVyeS1zZWxlY3RvciBzZWxlY3Qge1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgIH1cbiAgICAgIC5xdWVyeS10YXNrLWNvbnRhaW5lciB7XG4gICAgICAgIGZsZXg6IDE7XG4gICAgICAgIG92ZXJmbG93OiBhdXRvO1xuICAgICAgfVxuICAgIGB9PlxuICAgICAgey8qIFNlYXJjaCBMYXllciBkcm9wZG93biBtb3ZlZCB0byBRdWVyeVRhc2sgUXVlcnkgdGFiIGNvbnRlbnQgKi99XG4gICAgICBcbiAgICAgIHsvKiBTaG93IHNlbGVjdGVkIHF1ZXJ5IGZvcm0gZGlyZWN0bHkgYmVsb3cgKi99XG4gICAgICB7c2VsZWN0ZWRRdWVyeUl0ZW0gJiYgKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YHF1ZXJ5LXRhc2stY29udGFpbmVyICR7aXNJblBvcHBlciA/IEZPQ1VTQUJMRV9DT05UQUlORVJfQ0xBU1MgOiAnJ31gfT5cbiAgICAgICAgICA8UXVlcnlUYXNrXG4gICAgICAgICAgICB3aWRnZXRJZD17d2lkZ2V0SWR9XG4gICAgICAgICAgICBpbmRleD17c2VsZWN0ZWRRdWVyeVJlYWxJbmRleCA+PSAwID8gc2VsZWN0ZWRRdWVyeVJlYWxJbmRleCA6IDB9XG4gICAgICAgICAgICB0b3RhbD17c29ydGVkUXVlcnlJdGVtcy5sZW5ndGh9XG4gICAgICAgICAgICBxdWVyeUl0ZW09e3NlbGVjdGVkUXVlcnlJdGVtfVxuICAgICAgICAgICAgaXNJblBvcHBlcj17aXNJblBvcHBlcn1cbiAgICAgICAgICAgIGluaXRpYWxJbnB1dFZhbHVlPXtzZWxlY3RlZFF1ZXJ5SXRlbS5zaG9ydElkID09PSBlZmZlY3RpdmVJbml0aWFsUXVlcnlWYWx1ZT8uc2hvcnRJZCA/IGVmZmVjdGl2ZUluaXRpYWxRdWVyeVZhbHVlPy52YWx1ZSA6IHVuZGVmaW5lZH1cbiAgICAgICAgICAgIG9uSGFzaFBhcmFtZXRlclVzZWQ9e29uSGFzaFBhcmFtZXRlclVzZWR9XG4gICAgICAgICAgICBxdWVyeUl0ZW1zPXtzb3J0ZWRRdWVyeUl0ZW1zfVxuICAgICAgICAgICAgc2VsZWN0ZWRRdWVyeUluZGV4PXtzZWxlY3RlZFVuZ3JvdXBlZEluZGV4fVxuICAgICAgICAgICAgb25RdWVyeUNoYW5nZT17KGluZGV4KSA9PiBzZXRTZWxlY3RlZFVuZ3JvdXBlZEluZGV4KGluZGV4KX1cbiAgICAgICAgICAgIC8vIEdyb3VwaW5nIHByb3BzXG4gICAgICAgICAgICBncm91cHM9e2dyb3Vwc31cbiAgICAgICAgICAgIHVuZ3JvdXBlZD17dW5ncm91cGVkfVxuICAgICAgICAgICAgLy8gR3JhcGhpY3MgbGF5ZXIgcHJvcHNcbiAgICAgICAgICAgIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQ9e3VzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHR9XG4gICAgICAgICAgICBncmFwaGljc0xheWVyPXtncmFwaGljc0xheWVyfVxuICAgICAgICAgICAgbWFwVmlldz17bWFwVmlld31cbiAgICAgICAgICAgIG9uSW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXI9e29uSW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXJ9XG4gICAgICAgICAgICBvbkNsZWFyR3JhcGhpY3NMYXllcj17b25DbGVhckdyYXBoaWNzTGF5ZXJ9XG4gICAgICAgICAgICBncm91cE9yZGVyPXtncm91cE9yZGVyfVxuICAgICAgICAgICAgc2VsZWN0ZWRHcm91cElkPXtzZWxlY3RlZEdyb3VwSWR9XG4gICAgICAgICAgICBzZWxlY3RlZEdyb3VwUXVlcnlJbmRleD17c2VsZWN0ZWRHcm91cFF1ZXJ5SW5kZXh9XG4gICAgICAgICAgICBvbkdyb3VwQ2hhbmdlPXsoZ3JvdXBJZCkgPT4gc2V0U2VsZWN0ZWRHcm91cElkKGdyb3VwSWQpfVxuICAgICAgICAgICAgb25Hcm91cFF1ZXJ5Q2hhbmdlPXsoaW5kZXgpID0+IHNldFNlbGVjdGVkR3JvdXBRdWVyeUluZGV4KGluZGV4KX1cbiAgICAgICAgICAgIG9uVW5ncm91cGVkQ2hhbmdlPXsoaW5kZXgpID0+IHNldFNlbGVjdGVkVW5ncm91cGVkSW5kZXgoaW5kZXgpfVxuICAgICAgICAgICAgcmVzdWx0c01vZGU9e3Jlc3VsdHNNb2RlfVxuICAgICAgICAgICAgb25SZXN1bHRzTW9kZUNoYW5nZT17b25SZXN1bHRzTW9kZUNoYW5nZX1cbiAgICAgICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkcz17YWNjdW11bGF0ZWRSZWNvcmRzfVxuICAgICAgICAgICAgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2U9e29uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlfVxuICAgICAgICAgICAgYWN0aXZlVGFiPXthY3RpdmVUYWJ9XG4gICAgICAgICAgICBvblRhYkNoYW5nZT17b25UYWJDaGFuZ2V9XG4gICAgICAgICAgICAvLyBObyBvbk5hdkJhY2sgLSBubyBuYXZpZ2F0aW9uIG5lZWRlZFxuICAgICAgICAgIC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cbiAgICA8L2Rpdj5cbiAgKVxufVxuXG5cblxuIiwiLyoqIEBqc3gganN4ICovXHJcbmltcG9ydCB7IFJlYWN0LCBSZWFjdFJlZHV4LCB0eXBlIElNU3RhdGUsIGpzeCwgY3NzLCBjbGFzc05hbWVzLCB0eXBlIEltbXV0YWJsZUFycmF5LCB0eXBlIFVzZURhdGFTb3VyY2UsIGhvb2tzIH0gZnJvbSAnamltdS1jb3JlJ1xyXG5pbXBvcnQgeyBTZWxlY3QsIFRvb2x0aXAsIEJ1dHRvbiB9IGZyb20gJ2ppbXUtdWknXHJcbmltcG9ydCB7IHR5cGUgQ3JlYXRlVG9vbFR5cGUsIFNwYXRpYWxGaWx0ZXJUeXBlLCB0eXBlIFNwYXRpYWxGaWx0ZXJPYmosIHR5cGUgU3BhdGlhbFJlbGF0aW9uLCBVbml0VHlwZSB9IGZyb20gJy4uL2NvbmZpZydcclxuaW1wb3J0IGRlZmF1bHRNZXNzYWdlIGZyb20gJy4vdHJhbnNsYXRpb25zL2RlZmF1bHQnXHJcbmltcG9ydCB7IEdlb21ldHJ5RnJvbURhdGFTb3VyY2UgfSBmcm9tICcuL2dlb21ldHJ5LWZyb20tZHMnXHJcbmltcG9ydCB7IEdlb21ldHJ5RnJvbU1hcCB9IGZyb20gJy4vZ2VvbWV0cnktZnJvbS1tYXAnXHJcbmltcG9ydCB7IEdlb21ldHJ5RnJvbURyYXcgfSBmcm9tICcuL2dlb21ldHJ5LWZyb20tZHJhdydcclxuaW1wb3J0IHsgSW5mb091dGxpbmVkIH0gZnJvbSAnamltdS1pY29ucy9vdXRsaW5lZC9zdWdnZXN0ZWQvaW5mbydcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUXVlcnlUYXNrSXRlbVByb3BzIHtcclxuICB3aWRnZXRJZDogc3RyaW5nXHJcbiAgbGFiZWw6IHN0cmluZ1xyXG4gIGRlc2M6IHN0cmluZ1xyXG4gIGRzRW5hYmxlQnVmZmVyOiBib29sZWFuXHJcbiAgZHNCdWZmZXJEaXN0YW5jZTogbnVtYmVyXHJcbiAgZHNCdWZmZXJVbml0OiBVbml0VHlwZVxyXG4gIGRyYXdFbmFibGVCdWZmZXI6IGJvb2xlYW5cclxuICBkcmF3QnVmZmVyRGlzdGFuY2U6IG51bWJlclxyXG4gIGRyYXdCdWZmZXJVbml0OiBVbml0VHlwZVxyXG4gIHNwYXRpYWxSZWxhdGlvbnM6IEltbXV0YWJsZUFycmF5PFNwYXRpYWxSZWxhdGlvbj5cclxuICB1c2VEYXRhU291cmNlczogSW1tdXRhYmxlQXJyYXk8VXNlRGF0YVNvdXJjZT5cclxuICB1c2VSdW50aW1lRGF0YTogYm9vbGVhblxyXG4gIGZpbHRlclR5cGVzOiBJbW11dGFibGVBcnJheTxTcGF0aWFsRmlsdGVyVHlwZT5cclxuICBtYXBXaWRnZXRJZHM6IEltbXV0YWJsZUFycmF5PHN0cmluZz5cclxuICBjcmVhdGVUb29sVHlwZXM6IEltbXV0YWJsZUFycmF5PENyZWF0ZVRvb2xUeXBlPlxyXG4gIG9uRmlsdGVyQ2hhbmdlOiAoZmlsdGVyOiBTcGF0aWFsRmlsdGVyT2JqKSA9PiB2b2lkXHJcbiAgb25SZWxhdGlvbkNoYW5nZTogKHJlbDogU3BhdGlhbFJlbGF0aW9uKSA9PiB2b2lkXHJcbiAgb25CdWZmZXJDaGFuZ2U6IChkaXN0YW5jZTogbnVtYmVyLCB1bml0OiBVbml0VHlwZSkgPT4gdm9pZFxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gUXVlcnlUYXNrU3BhdGlhbEZvcm0gKHByb3BzOiBRdWVyeVRhc2tJdGVtUHJvcHMpIHtcclxuICBjb25zdCB7XHJcbiAgICBsYWJlbCwgZGVzYywgZmlsdGVyVHlwZXMsIG1hcFdpZGdldElkcywgb25GaWx0ZXJDaGFuZ2UsIG9uUmVsYXRpb25DaGFuZ2UsIG9uQnVmZmVyQ2hhbmdlLCB1c2VEYXRhU291cmNlcywgc3BhdGlhbFJlbGF0aW9ucywgdXNlUnVudGltZURhdGEsXHJcbiAgICBkc0VuYWJsZUJ1ZmZlciwgZHNCdWZmZXJEaXN0YW5jZSwgZHNCdWZmZXJVbml0LCBkcmF3RW5hYmxlQnVmZmVyLCBkcmF3QnVmZmVyRGlzdGFuY2UsIGRyYXdCdWZmZXJVbml0LCBjcmVhdGVUb29sVHlwZXMsIHdpZGdldElkXHJcbiAgfSA9IHByb3BzXHJcbiAgY29uc3QgZ2V0STE4bk1lc3NhZ2UgPSBob29rcy51c2VUcmFuc2xhdGlvbihkZWZhdWx0TWVzc2FnZSlcclxuICAvLyB1c2VkIHRvIHN0b3JlIHRoZSBzZWxlY3Rpb24gb2YgdGhlIGRhdGEgc291cmNlIGluIG9yZGVyIHRvIHVwZGF0ZSB0aGUgZmlsdGVyIHdoZW4gb3B0aW9uIGNoYW5nZXNcclxuICBjb25zdCBzZWxlY3RlZEdlb21ldHJpZXNSZWYgPSBSZWFjdC51c2VSZWY8YW55PihudWxsKVxyXG4gIGNvbnN0IG1hcEV4aXN0cyA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XHJcbiAgICBpZiAobWFwV2lkZ2V0SWRzPy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGNvbnN0IG1hcFdpZGdldElkID0gbWFwV2lkZ2V0SWRzWzBdXHJcbiAgICAgIHJldHVybiBzdGF0ZS5hcHBDb25maWcud2lkZ2V0c1ttYXBXaWRnZXRJZF0gIT0gbnVsbFxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlXHJcbiAgfSlcclxuICBjb25zdCBjYW5Vc2VNYXBGaWx0ZXIgPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcclxuICAgIHJldHVybiBtYXBFeGlzdHMgJiYgKGZpbHRlclR5cGVzPy5pbmNsdWRlcyhTcGF0aWFsRmlsdGVyVHlwZS5DdXJyZW50TWFwRXh0ZW50KSB8fCBmaWx0ZXJUeXBlcz8uaW5jbHVkZXMoU3BhdGlhbEZpbHRlclR5cGUuSW50ZXJhY3RpdmVEcmF3TW9kZSkpXHJcbiAgfSwgW2ZpbHRlclR5cGVzLCBtYXBFeGlzdHNdKVxyXG4gIGNvbnN0IHN1cHBvcnRlZEZpbHRlclR5cGVzID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XHJcbiAgICBjb25zdCByZXN1bHQgPSBbXVxyXG4gICAgaWYgKHVzZURhdGFTb3VyY2VzPy5sZW5ndGggPiAwIHx8IHVzZVJ1bnRpbWVEYXRhKSB7XHJcbiAgICAgIHJlc3VsdC5wdXNoKHsgdmFsdWU6ICdkYXRhJywgbGFiZWw6IGdldEkxOG5NZXNzYWdlKCdmZWF0dXJlRnJvbURzJykgfSlcclxuICAgIH1cclxuICAgIGlmIChjYW5Vc2VNYXBGaWx0ZXIgJiYgZmlsdGVyVHlwZXM/LmluY2x1ZGVzKFNwYXRpYWxGaWx0ZXJUeXBlLkN1cnJlbnRNYXBFeHRlbnQpKSB7XHJcbiAgICAgIHJlc3VsdC5wdXNoKHsgdmFsdWU6ICdtYXAnLCBsYWJlbDogZ2V0STE4bk1lc3NhZ2UoYHNwYXRpYWxGaWx0ZXJUeXBlXyR7U3BhdGlhbEZpbHRlclR5cGUuQ3VycmVudE1hcEV4dGVudH1gKSB9KVxyXG4gICAgfVxyXG4gICAgaWYgKGNhblVzZU1hcEZpbHRlciAmJiBmaWx0ZXJUeXBlcz8uaW5jbHVkZXMoU3BhdGlhbEZpbHRlclR5cGUuSW50ZXJhY3RpdmVEcmF3TW9kZSkpIHtcclxuICAgICAgcmVzdWx0LnB1c2goeyB2YWx1ZTogJ2RyYXcnLCBsYWJlbDogZ2V0STE4bk1lc3NhZ2UoYHNwYXRpYWxGaWx0ZXJUeXBlXyR7U3BhdGlhbEZpbHRlclR5cGUuSW50ZXJhY3RpdmVEcmF3TW9kZX1gKSB9KVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlc3VsdFxyXG4gIH0sIFtjYW5Vc2VNYXBGaWx0ZXIsIHVzZURhdGFTb3VyY2VzLCB1c2VSdW50aW1lRGF0YSwgZ2V0STE4bk1lc3NhZ2UsIGZpbHRlclR5cGVzXSlcclxuXHJcbiAgY29uc3QgW2N1cnJlbnRGaWx0ZXJUeXBlLCBzZXRDdXJyZW50RmlsdGVyVHlwZV0gPSBSZWFjdC51c2VTdGF0ZShzdXBwb3J0ZWRGaWx0ZXJUeXBlcz8uWzBdPy52YWx1ZSlcclxuXHJcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcclxuICAgIC8vIGluIG9yZGVyIHRvIGF2b2lkIGludmFsaWQgb3B0aW9uIGJlaW5nIHNlbGVjdGVkXHJcbiAgICBpZiAoY3VycmVudEZpbHRlclR5cGUgIT09ICdub25lJyAmJiAhc3VwcG9ydGVkRmlsdGVyVHlwZXMuZmluZCgoaXRlbSkgPT4gaXRlbS52YWx1ZSA9PT0gY3VycmVudEZpbHRlclR5cGUpKSB7XHJcbiAgICAgIHNldEN1cnJlbnRGaWx0ZXJUeXBlKHN1cHBvcnRlZEZpbHRlclR5cGVzPy5bMF0/LnZhbHVlKVxyXG4gICAgfVxyXG4gIH0sIFtjdXJyZW50RmlsdGVyVHlwZSwgc3VwcG9ydGVkRmlsdGVyVHlwZXNdKVxyXG5cclxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgLy8gY2xlYXIgdGhlIHJlbGF0aW9uc2hpcCBhbmQgYnVmZmVyIGlmIGZpbHRlciB0eXBlIGlzIG5vdCAnZGF0YSdcclxuICAgIGlmIChjdXJyZW50RmlsdGVyVHlwZSA9PT0gJ21hcCcgfHwgY3VycmVudEZpbHRlclR5cGUgPT09ICdkcmF3JyB8fCBjdXJyZW50RmlsdGVyVHlwZSA9PT0gJ25vbmUnKSB7XHJcbiAgICAgIG9uUmVsYXRpb25DaGFuZ2UobnVsbClcclxuICAgICAgb25CdWZmZXJDaGFuZ2UoMCwgVW5pdFR5cGUuTWV0ZXJzKVxyXG4gICAgICBvbkZpbHRlckNoYW5nZSh7IGdlb21ldHJ5OiBudWxsIH0pXHJcbiAgICB9XHJcbiAgICAvLyBubyBuZWVkIHRvIHVwZGF0ZSB0aGUgZmlsdGVyIGlmIHRoZSBkYXRhIHNvdXJjZSBoYXMgc2VsZWN0aW9uIHNpbmNlIGl0IHdpbGwgYmUgdXBkYXRlZCBpbiB0aGUgaGFuZGxlU2VsZWN0aW9uQ2hhbmdlIG1ldGhvZFxyXG4gICAgaWYgKGN1cnJlbnRGaWx0ZXJUeXBlID09PSAnZGF0YScgJiYgc2VsZWN0ZWRHZW9tZXRyaWVzUmVmLmN1cnJlbnQgPT0gbnVsbCkge1xyXG4gICAgICBvbkZpbHRlckNoYW5nZSh7IGdlb21ldHJ5OiBudWxsIH0pXHJcbiAgICB9XHJcbiAgfSwgW2N1cnJlbnRGaWx0ZXJUeXBlLCBvblJlbGF0aW9uQ2hhbmdlLCBvbkJ1ZmZlckNoYW5nZSwgb25GaWx0ZXJDaGFuZ2VdKVxyXG5cclxuICBjb25zdCBoYW5kbGVGaWx0ZXJUeXBlQ2hhbmdlZCA9IFJlYWN0LnVzZUNhbGxiYWNrKChldnQpID0+IHsgc2V0Q3VycmVudEZpbHRlclR5cGUoZXZ0LnRhcmdldC52YWx1ZSkgfSwgW10pXHJcblxyXG4gIGNvbnN0IGhhbmRsZUdlb21ldHJ5Q2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soKGdlb21ldHJ5OiBfX2VzcmkuR2VvbWV0cnksIGxheWVyPzogX19lc3JpLkdyYXBoaWNzTGF5ZXIsIGdyYXBoaWM/OiBfX2VzcmkuR3JhcGhpYywgY2xlYXJBZnRlckFwcGx5PzogYm9vbGVhbikgPT4ge1xyXG4gICAgb25GaWx0ZXJDaGFuZ2UoeyBnZW9tZXRyeSwgZ3JhcGhpYywgbGF5ZXIsIGNsZWFyQWZ0ZXJBcHBseSB9KVxyXG4gIH0sIFtvbkZpbHRlckNoYW5nZV0pXHJcblxyXG4gIGNvbnN0IGhhbmRsZVNlbGVjdGlvbkNoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKChnZW9tZXRyaWVzKSA9PiB7XHJcbiAgICBzZWxlY3RlZEdlb21ldHJpZXNSZWYuY3VycmVudCA9IGdlb21ldHJpZXNcclxuICAgIG9uRmlsdGVyQ2hhbmdlKHsgZ2VvbWV0cnk6IGdlb21ldHJpZXMgfSlcclxuICB9LCBbb25GaWx0ZXJDaGFuZ2VdKVxyXG5cclxuICBpZiAoISh1c2VEYXRhU291cmNlcz8ubGVuZ3RoID4gMCB8fCB1c2VSdW50aW1lRGF0YSB8fCBjYW5Vc2VNYXBGaWx0ZXIpKSB7XHJcbiAgICByZXR1cm4gbnVsbFxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDxkaXYgcm9sZT0nZ3JvdXAnIGNsYXNzTmFtZT0ncHgtNCBwYi00JyBhcmlhLWxhYmVsPXtsYWJlbH0+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdmb3JtLXRpdGxlIG15LTIgZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlcicsIHsgJ2Qtbm9uZSc6ICFsYWJlbCAmJiAhZGVzYyB9KX0+XHJcbiAgICAgICAge2xhYmVsICYmIDxkaXYgY2xhc3NOYW1lPSdtci0yIHRpdGxlMic+e2xhYmVsfTwvZGl2Pn1cclxuICAgICAgICB7ZGVzYyAmJiAoXHJcbiAgICAgICAgICA8VG9vbHRpcCBwbGFjZW1lbnQ9J2JvdHRvbScgY3NzPXtjc3Ngd2hpdGUtc3BhY2U6IHByZS1saW5lO2B9IHRpdGxlPXtkZXNjfT5cclxuICAgICAgICAgICAgPEJ1dHRvbiBzaXplPSdzbScgaWNvbiB0eXBlPSd0ZXJ0aWFyeSc+XHJcbiAgICAgICAgICAgICAgPEluZm9PdXRsaW5lZCBjb2xvcj0ndmFyKC0tc3lzLWNvbG9yLXByaW1hcnktbWFpbiknIHNpemU9J3MnLz5cclxuICAgICAgICAgICAgPC9CdXR0b24+XHJcbiAgICAgICAgICA8L1Rvb2x0aXA+XHJcbiAgICAgICAgKX1cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIHtzdXBwb3J0ZWRGaWx0ZXJUeXBlcy5sZW5ndGggPiAwICYmIChcclxuICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3RpdGxlMyc+e2dldEkxOG5NZXNzYWdlKCdjaG9vc2VGaWx0ZXJUeXBlJyl9PC9kaXY+XHJcbiAgICAgICAgICA8U2VsZWN0XHJcbiAgICAgICAgICAgIGFyaWEtbGFiZWw9e2dldEkxOG5NZXNzYWdlKCdjaG9vc2VGaWx0ZXJUeXBlJyl9XHJcbiAgICAgICAgICAgIGNzcz17Y3NzYGhlaWdodDogMzJweDtgfVxyXG4gICAgICAgICAgICB2YWx1ZT17Y3VycmVudEZpbHRlclR5cGV9XHJcbiAgICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVGaWx0ZXJUeXBlQ2hhbmdlZH1cclxuICAgICAgICAgID5cclxuICAgICAgICAgICAgPG9wdGlvbiBrZXk9Jy0nIHZhbHVlPSdub25lJz4tPC9vcHRpb24+XHJcbiAgICAgICAgICAgIHtzdXBwb3J0ZWRGaWx0ZXJUeXBlcy5tYXAoaXRlbSA9PiA8b3B0aW9uIGtleT17aXRlbS52YWx1ZX0gdmFsdWU9e2l0ZW0udmFsdWV9PntpdGVtLmxhYmVsfTwvb3B0aW9uPil9XHJcbiAgICAgICAgICA8L1NlbGVjdD5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgKX1cclxuICAgICAge2N1cnJlbnRGaWx0ZXJUeXBlID09PSAnZGF0YScgJiYgKFxyXG4gICAgICAgIDxHZW9tZXRyeUZyb21EYXRhU291cmNlXHJcbiAgICAgICAgICBlbmFibGVCdWZmZXI9e2RzRW5hYmxlQnVmZmVyfVxyXG4gICAgICAgICAgYnVmZmVyRGlzdGFuY2U9e2RzQnVmZmVyRGlzdGFuY2V9XHJcbiAgICAgICAgICBidWZmZXJVbml0PXtkc0J1ZmZlclVuaXR9XHJcbiAgICAgICAgICBzcGF0aWFsUmVsYXRpb25zPXtzcGF0aWFsUmVsYXRpb25zfVxyXG4gICAgICAgICAgdXNlRGF0YVNvdXJjZXM9e3VzZURhdGFTb3VyY2VzfVxyXG4gICAgICAgICAgdXNlUnVudGltZURhdGE9e3VzZVJ1bnRpbWVEYXRhfVxyXG4gICAgICAgICAgb25TZWxlY3Rpb25DaGFuZ2U9e2hhbmRsZVNlbGVjdGlvbkNoYW5nZX1cclxuICAgICAgICAgIG9uUmVsYXRpb25DaGFuZ2U9e29uUmVsYXRpb25DaGFuZ2V9XHJcbiAgICAgICAgICBvbkJ1ZmZlckNoYW5nZT17b25CdWZmZXJDaGFuZ2V9XHJcbiAgICAgICAgLz5cclxuICAgICAgKX1cclxuICAgICAge2N1cnJlbnRGaWx0ZXJUeXBlID09PSAnbWFwJyAmJiAoXHJcbiAgICAgICAgPEdlb21ldHJ5RnJvbU1hcFxyXG4gICAgICAgICAgbWFwV2lkZ2V0SWRzPXttYXBXaWRnZXRJZHN9XHJcbiAgICAgICAgICBjcmVhdGVUb29sVHlwZXM9e2NyZWF0ZVRvb2xUeXBlc31cclxuICAgICAgICAgIG9uR2VvbWV0cnlDaGFuZ2U9e2hhbmRsZUdlb21ldHJ5Q2hhbmdlfVxyXG4gICAgICAgIC8+XHJcbiAgICAgICl9XHJcbiAgICAgIHtjdXJyZW50RmlsdGVyVHlwZSA9PT0gJ2RyYXcnICYmIChcclxuICAgICAgICA8R2VvbWV0cnlGcm9tRHJhd1xyXG4gICAgICAgICAgZW5hYmxlQnVmZmVyPXtkcmF3RW5hYmxlQnVmZmVyfVxyXG4gICAgICAgICAgYnVmZmVyRGlzdGFuY2U9e2RyYXdCdWZmZXJEaXN0YW5jZX1cclxuICAgICAgICAgIGJ1ZmZlclVuaXQ9e2RyYXdCdWZmZXJVbml0fVxyXG4gICAgICAgICAgbWFwV2lkZ2V0SWRzPXttYXBXaWRnZXRJZHN9XHJcbiAgICAgICAgICB3aWRnZXRJZD17d2lkZ2V0SWR9XHJcbiAgICAgICAgICBjcmVhdGVUb29sVHlwZXM9e2NyZWF0ZVRvb2xUeXBlc31cclxuICAgICAgICAgIG9uR2VvbWV0cnlDaGFuZ2U9e2hhbmRsZUdlb21ldHJ5Q2hhbmdlfVxyXG4gICAgICAgICAgb25CdWZmZXJDaGFuZ2U9e29uQnVmZmVyQ2hhbmdlfVxyXG4gICAgICAgIC8+XHJcbiAgICAgICl9XHJcbiAgICA8L2Rpdj5cclxuICApXHJcbn1cclxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQge1xuICBSZWFjdCxcbiAganN4LFxuICBjc3MsXG4gIHR5cGUgSW1tdXRhYmxlT2JqZWN0LFxuICB0eXBlIEltbXV0YWJsZUFycmF5LFxuICB0eXBlIElNU3FsRXhwcmVzc2lvbixcbiAgRGF0YVNvdXJjZUNvbXBvbmVudCxcbiAgdHlwZSBEYXRhU291cmNlLFxuICB0eXBlIFVzZURhdGFTb3VyY2UsXG4gIEltbXV0YWJsZSxcbiAgdHlwZSBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLFxuICBjbGFzc05hbWVzLFxuICBDT05TVEFOVFMsXG4gIHR5cGUgRGF0YVJlY29yZCxcbiAgdHlwZSBEYXRhUmVjb3JkU2V0LFxuICB0eXBlIFF1ZXJ5UGFyYW1zLFxuICBEYXRhU291cmNlU3RhdHVzLFxuICBEYXRhUmVjb3JkU2V0Q2hhbmdlTWVzc2FnZSxcbiAgRGF0YVJlY29yZHNTZWxlY3Rpb25DaGFuZ2VNZXNzYWdlLFxuICBSZWNvcmRTZXRDaGFuZ2VUeXBlLFxuICBNZXNzYWdlTWFuYWdlcixcbiAgTXV0YWJsZVN0b3JlTWFuYWdlcixcbiAgRGF0YUFjdGlvbk1hbmFnZXIsXG4gIERhdGFMZXZlbCxcbiAgdHlwZSBRdWVyaWFibGVEYXRhU291cmNlLFxuICB0eXBlIEZlYXR1cmVMYXllclF1ZXJ5UGFyYW1zLFxuICBob29rcyxcbiAgbG9kYXNoLFxuICBEYXRhU291cmNlTWFuYWdlcixcbiAgZm9jdXNFbGVtZW50SW5LZXlib2FyZE1vZGUsXG4gIFJlYWN0UmVkdXgsXG4gIHR5cGUgSU1TdGF0ZSxcbiAgdHlwZSBGZWF0dXJlRGF0YVJlY29yZFxufSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBCdXR0b24sIFRvb2x0aXAsIEZPQ1VTQUJMRV9DT05UQUlORVJfQ0xBU1MsIFRhYnMsIFRhYiwgU2VsZWN0IH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB7IEluZm9PdXRsaW5lZCB9IGZyb20gJ2ppbXUtaWNvbnMvb3V0bGluZWQvc3VnZ2VzdGVkL2luZm8nXG5pbXBvcnQgeyBUcmFzaE91dGxpbmVkIH0gZnJvbSAnamltdS1pY29ucy9vdXRsaW5lZC9lZGl0b3IvdHJhc2gnXG5pbXBvcnQgeyBQYWdpbmdUeXBlLCB0eXBlIFF1ZXJ5SXRlbVR5cGUsIHR5cGUgU3BhdGlhbEZpbHRlck9iaiwgU2VsZWN0aW9uVHlwZSB9IGZyb20gJy4uL2NvbmZpZydcbmltcG9ydCB7IFF1ZXJ5VGFza0Zvcm0gfSBmcm9tICcuL3F1ZXJ5LXRhc2stZm9ybSdcbmltcG9ydCB7IFF1ZXJ5VGFza1Jlc3VsdCB9IGZyb20gJy4vcXVlcnktcmVzdWx0J1xuaW1wb3J0IHsgRGF0YVNvdXJjZVRpcCwgdXNlRGF0YVNvdXJjZUV4aXN0cywgRXJyb3JNZXNzYWdlIH0gZnJvbSAnd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24nXG5pbXBvcnQgeyBRdWVyeVRhc2tMYWJlbCB9IGZyb20gJy4vcXVlcnktdGFzay1sYWJlbCdcbmltcG9ydCB7IERFRkFVTFRfUVVFUllfSVRFTSB9IGZyb20gJy4uL2RlZmF1bHQtcXVlcnktaXRlbSdcbmltcG9ydCB7IGdlbmVyYXRlUXVlcnlQYXJhbXMsIGV4ZWN1dGVRdWVyeSwgZXhlY3V0ZUNvdW50UXVlcnkgfSBmcm9tICcuL3F1ZXJ5LXV0aWxzJ1xuaW1wb3J0IHsgbWVyZ2VSZXN1bHRzSW50b0FjY3VtdWxhdGVkLCByZW1vdmVSZXN1bHRzRnJvbUFjY3VtdWxhdGVkLCByZW1vdmVSZWNvcmRzRnJvbU9yaWdpblNlbGVjdGlvbnMgfSBmcm9tICcuL3Jlc3VsdHMtbWFuYWdlbWVudC11dGlscydcbmltcG9ydCB7IE1lbnVPdXRsaW5lZCB9IGZyb20gJ2ppbXUtaWNvbnMvb3V0bGluZWQvZWRpdG9yL21lbnUnXG5pbXBvcnQgZGVmYXVsdE1lc3NhZ2UgZnJvbSAnLi90cmFuc2xhdGlvbnMvZGVmYXVsdCdcbmltcG9ydCB7IEFycm93TGVmdE91dGxpbmVkIH0gZnJvbSAnamltdS1pY29ucy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9hcnJvdy1sZWZ0J1xuaW1wb3J0IHsgTG9hZGluZ1Jlc3VsdCB9IGZyb20gJy4vbG9hZGluZy1yZXN1bHQnXG5pbXBvcnQgeyBjbGVhclNlbGVjdGlvbkluRGF0YVNvdXJjZXMsIHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoLCBmaW5kQ2xlYXJSZXN1bHRzQnV0dG9uLCBkaXNwYXRjaFNlbGVjdGlvbkV2ZW50IH0gZnJvbSAnLi9zZWxlY3Rpb24tdXRpbHMnXG5pbXBvcnQgeyBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyIH0gZnJvbSAnd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24nXG5cbmNvbnN0IGRlYnVnTG9nZ2VyID0gY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlcigpXG5cbmV4cG9ydCBpbnRlcmZhY2UgUXVlcnlUYXNrUHJvcHMge1xuICB3aWRnZXRJZDogc3RyaW5nXG4gIGluZGV4OiBudW1iZXJcbiAgdG90YWw6IG51bWJlclxuICBxdWVyeUl0ZW06IEltbXV0YWJsZU9iamVjdDxRdWVyeUl0ZW1UeXBlPlxuICB3cmFwcGVkSW5Qb3BwZXI/OiBib29sZWFuXG4gIGNsYXNzTmFtZT86IHN0cmluZ1xuICBpc0luUG9wcGVyPzogYm9vbGVhblxuICBvbk5hdkJhY2s/OiAoKSA9PiB2b2lkXG4gIGluaXRpYWxJbnB1dFZhbHVlPzogc3RyaW5nXG4gIG9uSGFzaFBhcmFtZXRlclVzZWQ/OiAoc2hvcnRJZDogc3RyaW5nKSA9PiB2b2lkXG4gIHF1ZXJ5SXRlbVNob3J0SWQ/OiBzdHJpbmdcbiAgLy8gUHJvcHMgZm9yIFNlYXJjaCBMYXllciBkcm9wZG93biAod2hlbiBtdWx0aXBsZSBxdWVyaWVzKVxuICBxdWVyeUl0ZW1zPzogSW1tdXRhYmxlQXJyYXk8UXVlcnlJdGVtVHlwZT5cbiAgc2VsZWN0ZWRRdWVyeUluZGV4PzogbnVtYmVyXG4gIG9uUXVlcnlDaGFuZ2U/OiAoaW5kZXg6IG51bWJlcikgPT4gdm9pZFxuICAvLyBHcm91cGluZyBwcm9wc1xuICBncm91cHM/OiB7IFtncm91cElkOiBzdHJpbmddOiB7IGl0ZW1zOiBJbW11dGFibGVBcnJheTxRdWVyeUl0ZW1UeXBlPiwgZGlzcGxheU5hbWU6IHN0cmluZywgaWNvbj86IGFueSB9IH1cbiAgdW5ncm91cGVkPzogQXJyYXk8eyBpdGVtOiBJbW11dGFibGVPYmplY3Q8UXVlcnlJdGVtVHlwZT4sIGluZGV4OiBudW1iZXIgfT5cbiAgZ3JvdXBPcmRlcj86IHN0cmluZ1tdXG4gIHNlbGVjdGVkR3JvdXBJZD86IHN0cmluZyB8IG51bGxcbiAgc2VsZWN0ZWRHcm91cFF1ZXJ5SW5kZXg/OiBudW1iZXJcbiAgb25Hcm91cENoYW5nZT86IChncm91cElkOiBzdHJpbmcgfCBudWxsKSA9PiB2b2lkXG4gIG9uR3JvdXBRdWVyeUNoYW5nZT86IChpbmRleDogbnVtYmVyKSA9PiB2b2lkXG4gIG9uVW5ncm91cGVkQ2hhbmdlPzogKGluZGV4OiBudW1iZXIpID0+IHZvaWRcbiAgLy8gUmVzdWx0cyBtb2RlIHByb3BzXG4gIHJlc3VsdHNNb2RlPzogU2VsZWN0aW9uVHlwZVxuICBvblJlc3VsdHNNb2RlQ2hhbmdlPzogKG1vZGU6IFNlbGVjdGlvblR5cGUpID0+IHZvaWRcbiAgYWNjdW11bGF0ZWRSZWNvcmRzPzogRmVhdHVyZURhdGFSZWNvcmRbXVxuICBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZT86IChyZWNvcmRzOiBGZWF0dXJlRGF0YVJlY29yZFtdKSA9PiB2b2lkXG4gIC8vIEdyYXBoaWNzIGxheWVyIHByb3BzXG4gIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQ/OiBib29sZWFuXG4gIGdyYXBoaWNzTGF5ZXI/OiBfX2VzcmkuR3JhcGhpY3NMYXllclxuICBtYXBWaWV3PzogX19lc3JpLk1hcFZpZXcgfCBfX2VzcmkuU2NlbmVWaWV3XG4gIG9uSW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXI/OiAob3V0cHV0RFM6IERhdGFTb3VyY2UpID0+IFByb21pc2U8dm9pZD5cbiAgb25DbGVhckdyYXBoaWNzTGF5ZXI/OiAoKSA9PiB2b2lkXG4gIGFjdGl2ZVRhYj86ICdxdWVyeScgfCAncmVzdWx0cydcbiAgb25UYWJDaGFuZ2U/OiAodGFiOiAncXVlcnknIHwgJ3Jlc3VsdHMnKSA9PiB2b2lkXG59XG5cbi8vIEhlbHBlciBmdW5jdGlvbiB0byBnZXQgZGlzcGxheSBuYW1lIGZvciBxdWVyeSBpbiBkcm9wZG93blxuLy8gVXNlczogc2VhcmNoQWxpYXMgfHwgamltdUZpZWxkTmFtZSB8fCBpdGVtLm5hbWUgfHwgZmFsbGJhY2tcbmNvbnN0IGdldFF1ZXJ5RGlzcGxheU5hbWUgPSAoaXRlbTogSW1tdXRhYmxlT2JqZWN0PFF1ZXJ5SXRlbVR5cGU+KTogc3RyaW5nID0+IHtcbiAgLy8gRmlyc3QgcHJpb3JpdHk6IHNlYXJjaEFsaWFzIGlmIHNldFxuICBpZiAoaXRlbS5zZWFyY2hBbGlhcykge1xuICAgIHJldHVybiBpdGVtLnNlYXJjaEFsaWFzXG4gIH1cbiAgXG4gIC8vIFNlY29uZCBwcmlvcml0eTogZmllbGQgbmFtZSBmcm9tIFNRTCBleHByZXNzaW9uXG4gIGNvbnN0IGppbXVGaWVsZE5hbWUgPSBpdGVtLnNxbEV4cHJPYmo/LnBhcnRzPy5bMF0/LmppbXVGaWVsZE5hbWVcbiAgaWYgKGppbXVGaWVsZE5hbWUpIHtcbiAgICByZXR1cm4gamltdUZpZWxkTmFtZVxuICB9XG4gIFxuICAvLyBUaGlyZCBwcmlvcml0eTogaXRlbSBuYW1lXG4gIGlmIChpdGVtLm5hbWUpIHtcbiAgICByZXR1cm4gaXRlbS5uYW1lXG4gIH1cbiAgXG4gIC8vIEZhbGxiYWNrXG4gIHJldHVybiAnUXVlcnknXG59XG5cbmNvbnN0IHN0eWxlID0gY3NzYFxuICAmLndyYXBwZWQgLnF1ZXJ5LWZvcm0ge1xuICAgIGhlaWdodDogMTAwJTtcbiAgfVxuICAucXVlcnktdGFza19fY29udGVudCB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIHBhZGRpbmctdG9wOiA4cHg7XG4gICAgJjpoYXMoPiAucXVlcnktZm9ybV9faGVhZGVyID4gZGl2Om5vdCguZC1ub25lKSksICY6aGFzKD4gLnF1ZXJ5LXJlc3VsdCkge1xuICAgICAgcGFkZGluZy10b3A6IDE2cHg7XG4gICAgfVxuICB9XG4gIC5xdWVyeS1mb3JtX19oZWFkZXIge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgJi5oYXMtY29udGVudCB7XG4gICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tc3lzLWNvbG9yLWRpdmlkZXItc2Vjb25kYXJ5KTtcbiAgICAgIG1hcmdpbi1ib3R0b206IDZweDtcbiAgICAgIHBhZGRpbmctYm90dG9tOiA4cHg7XG4gICAgfVxuICAgIC5uYXYtYWN0aW9uIHtcbiAgICAgIGZsZXg6IDEgMSAwO1xuICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAuamltdS1idG4ge1xuICAgICAgICBtaW4td2lkdGg6IDI2cHg7XG4gICAgICB9XG4gICAgfVxuICAgIC5yZXN1bHQtbWVudSB7XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgIH1cbiAgfVxuYFxuXG5leHBvcnQgZnVuY3Rpb24gUXVlcnlUYXNrIChwcm9wczogUXVlcnlUYXNrUHJvcHMpIHtcbiAgY29uc3QgeyBxdWVyeUl0ZW0sIG9uTmF2QmFjaywgdG90YWwsIGlzSW5Qb3BwZXIgPSBmYWxzZSwgd3JhcHBlZEluUG9wcGVyID0gZmFsc2UsIGNsYXNzTmFtZSA9ICcnLCBpbmRleCwgaW5pdGlhbElucHV0VmFsdWUsIG9uSGFzaFBhcmFtZXRlclVzZWQsIHF1ZXJ5SXRlbXMsIHNlbGVjdGVkUXVlcnlJbmRleCwgb25RdWVyeUNoYW5nZSwgZ3JvdXBzLCB1bmdyb3VwZWQsIGdyb3VwT3JkZXIsIHNlbGVjdGVkR3JvdXBJZCwgc2VsZWN0ZWRHcm91cFF1ZXJ5SW5kZXgsIG9uR3JvdXBDaGFuZ2UsIG9uR3JvdXBRdWVyeUNoYW5nZSwgb25Vbmdyb3VwZWRDaGFuZ2UsIHJlc3VsdHNNb2RlLCBvblJlc3VsdHNNb2RlQ2hhbmdlLCBhY2N1bXVsYXRlZFJlY29yZHMsIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlLCB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0LCBncmFwaGljc0xheWVyLCBtYXBWaWV3LCBvbkluaXRpYWxpemVHcmFwaGljc0xheWVyLCBvbkNsZWFyR3JhcGhpY3NMYXllciwgYWN0aXZlVGFiOiBwcm9wQWN0aXZlVGFiLCBvblRhYkNoYW5nZTogcHJvcE9uVGFiQ2hhbmdlLCAuLi5vdGhlclByb3BzIH0gPSBwcm9wc1xuICBjb25zdCBnZXRJMThuTWVzc2FnZSA9IGhvb2tzLnVzZVRyYW5zbGF0aW9uKGRlZmF1bHRNZXNzYWdlKVxuICBjb25zdCBbc3RhZ2UsIHNldFN0YWdlXSA9IFJlYWN0LnVzZVN0YXRlKDApIC8vIDAgPSBmb3JtLCAxID0gcmVzdWx0cywgMiA9IGxvYWRpbmdcbiAgY29uc3QgW2ludGVybmFsQWN0aXZlVGFiLCBzZXRJbnRlcm5hbEFjdGl2ZVRhYl0gPSBSZWFjdC51c2VTdGF0ZTwncXVlcnknIHwgJ3Jlc3VsdHMnPigncXVlcnknKVxuICBcbiAgLy8gQ29udHJvbGxlZCB0YWIgc3RhdGU6IHVzZSBwcm9wIGlmIHByb3ZpZGVkLCBvdGhlcndpc2UgaW50ZXJuYWwgc3RhdGVcbiAgY29uc3QgYWN0aXZlVGFiID0gcHJvcEFjdGl2ZVRhYiB8fCBpbnRlcm5hbEFjdGl2ZVRhYlxuICBjb25zdCBzZXRBY3RpdmVUYWIgPSBSZWFjdC51c2VDYWxsYmFjaygodGFiOiAncXVlcnknIHwgJ3Jlc3VsdHMnKSA9PiB7XG4gICAgaWYgKHByb3BPblRhYkNoYW5nZSkge1xuICAgICAgcHJvcE9uVGFiQ2hhbmdlKHRhYilcbiAgICB9IGVsc2Uge1xuICAgICAgc2V0SW50ZXJuYWxBY3RpdmVUYWIodGFiKVxuICAgIH1cbiAgfSwgW3Byb3BPblRhYkNoYW5nZV0pXG4gIGNvbnN0IFtlbmFibGVkLCBzZXRFbmFibGVkXSA9IFJlYWN0LnVzZVN0YXRlKHRydWUpXG4gIGNvbnN0IFtyZXN1bHRDb3VudCwgc2V0UmVzdWx0Q291bnRdID0gUmVhY3QudXNlU3RhdGUoMClcbiAgLy8gVHJhY2sgaWYgd2UndmUgYWxyZWFkeSBzZWxlY3RlZCByZWNvcmRzIGZvciB0aGUgY3VycmVudCBxdWVyeSByZXN1bHRzXG4gIGNvbnN0IGhhc1NlbGVjdGVkUmVjb3Jkc1JlZiA9IFJlYWN0LnVzZVJlZihmYWxzZSlcbiAgLy8gVHJhY2sgcXVlcnkgZXhlY3V0aW9uIGNvdW50IHRvIGZvcmNlIFF1ZXJ5VGFza1Jlc3VsdCByZW1vdW50IG9uIG5ldyBxdWVyaWVzXG4gIGNvbnN0IHF1ZXJ5RXhlY3V0aW9uS2V5UmVmID0gUmVhY3QudXNlUmVmKDApXG4gIGNvbnN0IHF1ZXJ5UGFyYW1SZWYgPSBSZWFjdC51c2VSZWY8UXVlcnlQYXJhbXM+KG51bGwpXG4gIGNvbnN0IHJlY29yZHNSZWYgPSBSZWFjdC51c2VSZWY8RGF0YVJlY29yZFtdPihudWxsKVxuICBjb25zdCBbb3V0cHV0RFMsIHNldE91dHB1dERTXSA9IFJlYWN0LnVzZVN0YXRlPERhdGFTb3VyY2U+KG51bGwpXG4gIGNvbnN0IFtkYXRhU291cmNlLCBzZXREYXRhU291cmNlXSA9IFJlYWN0LnVzZVN0YXRlPERhdGFTb3VyY2U+KG51bGwpXG4gIGNvbnN0IFtzcGF0aWFsRmlsdGVyRW5hYmxlZCwgc2V0U3BhdGlhbEZpbHRlckVuYWJsZWRdID0gUmVhY3QudXNlU3RhdGUodHJ1ZSlcbiAgY29uc3QgYXR0cmlidXRlRmlsdGVyU3FsRXhwck9iaiA9IFJlYWN0LnVzZVJlZjxJTVNxbEV4cHJlc3Npb24+KHF1ZXJ5SXRlbS5zcWxFeHByT2JqKVxuICBjb25zdCBzcGF0aWFsRmlsdGVyT2JqID0gUmVhY3QudXNlUmVmKG51bGwpXG4gIGNvbnN0IGJhY2tCdG5SZWYgPSBSZWFjdC51c2VSZWY8SFRNTEJ1dHRvbkVsZW1lbnQ+KHVuZGVmaW5lZClcbiAgY29uc3QgY2xlYXJSZXN1bHRCdG5SZWYgPSBSZWFjdC51c2VSZWY8SFRNTEJ1dHRvbkVsZW1lbnQ+KHVuZGVmaW5lZClcbiAgY29uc3QgW2RhdGFBY3Rpb25GaWx0ZXIsIHNldERhdGFBY3Rpb25GaWx0ZXJdID0gUmVhY3QudXNlU3RhdGUobnVsbClcbiAgY29uc3QgcHJldmlvdXNDb25maWdJZFJlZiA9IFJlYWN0LnVzZVJlZjxzdHJpbmc+KHF1ZXJ5SXRlbS5jb25maWdJZClcbiAgLy8gVHJhY2sgbWFudWFsIHRhYiBzd2l0Y2hlcyB0byBwcmV2ZW50IGF1dG8tc3dpdGNoIHVzZUVmZmVjdCBmcm9tIGludGVyZmVyaW5nXG4gIGNvbnN0IG1hbnVhbFRhYlN3aXRjaFJlZiA9IFJlYWN0LnVzZVJlZihmYWxzZSlcbiAgLy8gVHJhY2sgd2hlbiBhIHF1ZXJ5IHdhcyBqdXN0IGV4ZWN1dGVkIC0gb25seSBhdXRvLXN3aXRjaCBhZnRlciBxdWVyeSBleGVjdXRpb24gY29tcGxldGVzXG4gIGNvbnN0IHF1ZXJ5SnVzdEV4ZWN1dGVkUmVmID0gUmVhY3QudXNlUmVmKGZhbHNlKVxuICAvLyBTdG9yZSB0aGUgbGFzdCBydW50aW1lIHpvb20gb3ZlcnJpZGUgdmFsdWUgZnJvbSB0aGUgZm9ybSBmb3IgdXNlIGJ5IEFkZCB0byBNYXAgYWN0aW9uXG4gIGNvbnN0IGxhc3RSdW50aW1lWm9vbVRvU2VsZWN0ZWRSZWYgPSBSZWFjdC51c2VSZWY8Ym9vbGVhbiB8IHVuZGVmaW5lZD4odW5kZWZpbmVkKVxuICAvLyBFcnJvciBzdGF0ZXMgZm9yIHVzZXItZmFjaW5nIGVycm9yc1xuICBjb25zdCBbc2VsZWN0aW9uRXJyb3IsIHNldFNlbGVjdGlvbkVycm9yXSA9IFJlYWN0LnVzZVN0YXRlPHN0cmluZz4obnVsbClcbiAgY29uc3QgW3pvb21FcnJvciwgc2V0Wm9vbUVycm9yXSA9IFJlYWN0LnVzZVN0YXRlPHN0cmluZz4obnVsbClcblxuICBjb25zdCBjdXJyZW50SXRlbSA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfUVVFUllfSVRFTSwgcXVlcnlJdGVtKVxuICBjb25zdCB7IGljb24sIG5hbWUsIGRpc3BsYXlMYWJlbCB9ID0gY3VycmVudEl0ZW1cbiAgY29uc3QgZHNFeGlzdHM6IGJvb2xlYW4gPSB1c2VEYXRhU291cmNlRXhpc3RzKHsgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLCB1c2VEYXRhU291cmNlSWQ6IGN1cnJlbnRJdGVtLnVzZURhdGFTb3VyY2U/LmRhdGFTb3VyY2VJZCB9KVxuXG4gIC8vIERlYnVnIGxvZ2dpbmcgZm9yIHRhYiBjb250ZW50IHJlbmRlcmluZ1xuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgIGV2ZW50OiAncXVlcnktdGFiLWNvbnRlbnQtcmVuZGVyJyxcbiAgICAgIGFjdGl2ZVRhYixcbiAgICAgIGVuYWJsZWQsXG4gICAgICBkc0V4aXN0cyxcbiAgICAgIGRhdGFTb3VyY2U6IGRhdGFTb3VyY2UgPyAnZXhpc3RzJyA6ICdudWxsJyxcbiAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBxdWVyeUl0ZW0uY29uZmlnSWQsXG4gICAgICBub3RlOiAnUXVlcnkgdGFiIGNvbnRlbnQgc3RhdGUgY2hlY2snXG4gICAgfSlcbiAgfSwgW2FjdGl2ZVRhYiwgZW5hYmxlZCwgZHNFeGlzdHMsIGRhdGFTb3VyY2UsIHF1ZXJ5SXRlbS5jb25maWdJZF0pXG5cbiAgLy8gRGVidWcgbG9nZ2luZyBmb3IgVGFiIGNoaWxkcmVuIHJlbmRlcmluZ1xuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChhY3RpdmVUYWIgPT09ICdxdWVyeScpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgICAgZXZlbnQ6ICdxdWVyeS10YWItY2hpbGRyZW4tcmVuZGVyJyxcbiAgICAgICAgYWN0aXZlVGFiLFxuICAgICAgICBxdWVyeUl0ZW1Db25maWdJZDogcXVlcnlJdGVtLmNvbmZpZ0lkLFxuICAgICAgICBub3RlOiAnUXVlcnkgVGFiIGNoaWxkcmVuIHNob3VsZCBiZSByZW5kZXJpbmcnXG4gICAgICB9KVxuICAgIH1cbiAgfSwgW2FjdGl2ZVRhYiwgcXVlcnlJdGVtLmNvbmZpZ0lkXSlcblxuICBob29rcy51c2VFZmZlY3RPbmNlKCgpID0+IHtcbiAgICAvLyBmb2N1cyB0aGUgYmFjayBidXR0b24gd2hlbiBpdCBpcyByZW5kZXJlZFxuICAgIGZvY3VzRWxlbWVudEluS2V5Ym9hcmRNb2RlKGJhY2tCdG5SZWYuY3VycmVudClcbiAgfSlcblxuICAvLyBHZXQgdGhlIHBhZ2luYXRpb24gc3R5bGUgZnJvbSB3aWRnZXQgY29uZmlnIChNdWx0aVBhZ2Ugb3IgTGF6eUxvYWQvU2luZ2xlLXBhZ2UpXG4gIGNvbnN0IHBhZ2luZ1R5cGVJbkNvbmZpZyA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XG4gICAgY29uc3Qgd2lkZ2V0SnNvbiA9IHN0YXRlLmFwcENvbmZpZy53aWRnZXRzW3Byb3BzLndpZGdldElkXVxuICAgIHJldHVybiB3aWRnZXRKc29uLmNvbmZpZy5yZXN1bHRQYWdpbmdTdHlsZVxuICB9KVxuXG4gIC8vIEdldCB0aGUgaW5pdGlhbCBwYWdlIHNpemUgZm9yIHNpbmdsZS1wYWdlIChMYXp5TG9hZCkgcmVzdWx0c1xuICAvLyBUaGlzIGFsbG93cyB1c2VycyB0byBjb25maWd1cmUgaG93IG1hbnkgcmVjb3JkcyBhcmUgbG9hZGVkIGluaXRpYWxseSB3aGVuIHVzaW5nIHNpbmdsZS1wYWdlIG1vZGVcbiAgLy8gRGVmYXVsdHMgdG8gMTAwIGlmIG5vdCBjb25maWd1cmVkXG4gIGNvbnN0IGxhenlMb2FkSW5pdGlhbFBhZ2VTaXplID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcbiAgICBjb25zdCB3aWRnZXRKc29uID0gc3RhdGUuYXBwQ29uZmlnLndpZGdldHNbcHJvcHMud2lkZ2V0SWRdXG4gICAgcmV0dXJuIHdpZGdldEpzb24uY29uZmlnLmxhenlMb2FkSW5pdGlhbFBhZ2VTaXplXG4gIH0pXG5cblxuICAvLyBXYXRjaCBmb3Igd2hlbiByZXN1bHRzIGFyZSByZWFkeSBhbmQgc3dpdGNoIHRvIFJlc3VsdHMgdGFiXG4gIC8vIE9OTFkgYXV0by1zd2l0Y2ggd2hlbiBhIHF1ZXJ5IHdhcyBqdXN0IGV4ZWN1dGVkIGFuZCByZXN1bHRzIGFyZSBsb2FkZWRcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBEb24ndCBhdXRvLXN3aXRjaCBpZiB1c2VyIG1hbnVhbGx5IHN3aXRjaGVkIHRhYnNcbiAgICBpZiAobWFudWFsVGFiU3dpdGNoUmVmLmN1cnJlbnQpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgICAgZXZlbnQ6ICdhdXRvLXN3aXRjaC1za2lwcGVkJyxcbiAgICAgICAgcmVhc29uOiAnbWFudWFsLXRhYi1zd2l0Y2gtZmxhZy1zZXQnLFxuICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBxdWVyeUl0ZW0uY29uZmlnSWQsXG4gICAgICAgIGFjdGl2ZVRhYixcbiAgICAgICAgcmVzdWx0Q291bnQsXG4gICAgICAgIHF1ZXJ5SnVzdEV4ZWN1dGVkUmVmOiBxdWVyeUp1c3RFeGVjdXRlZFJlZi5jdXJyZW50LFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgLy8gRk9SQ0VEOiBBbHdheXMgdXNlIFNpbXBsZUxpc3QgLSB3ZSdyZSBkb25lIHdpdGggbGF6eSBsb2FkaW5nIGlzc3Vlc1xuICAgIC8vIFJlY29yZHMgYXJlIGF2YWlsYWJsZSBpbW1lZGlhdGVseSwgc28gd2UgY2FuIHN3aXRjaCBhcyBzb29uIGFzIHJlc3VsdENvdW50ID4gMFxuICAgIGNvbnN0IGlzU2ltcGxlTGlzdCA9IHRydWVcbiAgICBcbiAgICAvLyBPTkxZIGF1dG8tc3dpdGNoIHdoZW46XG4gICAgLy8gMS4gQSBxdWVyeSB3YXMganVzdCBleGVjdXRlZCAocXVlcnlKdXN0RXhlY3V0ZWRSZWYuY3VycmVudCA9PT0gdHJ1ZSlcbiAgICAvLyAyLiBXZSBoYXZlIHJlc3VsdHMgKHJlc3VsdENvdW50ID4gMClcbiAgICAvLyAzLiBSZWNvcmRzIGFyZSBhY3R1YWxseSBsb2FkZWQ6XG4gICAgLy8gICAgLSBGb3IgU2ltcGxlTGlzdDogcmVzdWx0Q291bnQgPiAwIGlzIHN1ZmZpY2llbnQgKHJlY29yZHMgYXZhaWxhYmxlIGltbWVkaWF0ZWx5KVxuICAgIC8vICAgIC0gRm9yIExhenlMb2FkOiByZWNvcmRzUmVmLmN1cnJlbnQgbXVzdCBoYXZlIGRhdGEgKHdhaXQgZm9yIGxhenkgbG9hZGluZylcbiAgICAvLyA0LiBXZSdyZSBjdXJyZW50bHkgb24gdGhlIHF1ZXJ5IHRhYiAoZG9uJ3Qgc3dpdGNoIGlmIGFscmVhZHkgb24gcmVzdWx0cylcbiAgICBjb25zdCBoYXNSZWNvcmRzID0gaXNTaW1wbGVMaXN0IFxuICAgICAgPyByZXN1bHRDb3VudCA+IDAgXG4gICAgICA6IChyZWNvcmRzUmVmLmN1cnJlbnQgJiYgcmVjb3Jkc1JlZi5jdXJyZW50Lmxlbmd0aCA+IDApXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgZXZlbnQ6ICdhdXRvLXN3aXRjaC1jaGVjaycsXG4gICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICBxdWVyeUl0ZW1Db25maWdJZDogcXVlcnlJdGVtLmNvbmZpZ0lkLFxuICAgICAgYWN0aXZlVGFiLFxuICAgICAgcmVzdWx0Q291bnQsXG4gICAgICBxdWVyeUp1c3RFeGVjdXRlZFJlZjogcXVlcnlKdXN0RXhlY3V0ZWRSZWYuY3VycmVudCxcbiAgICAgIGlzU2ltcGxlTGlzdCxcbiAgICAgIHBhZ2luZ1R5cGVJbkNvbmZpZyxcbiAgICAgIGhhc1JlY29yZHMsXG4gICAgICByZWNvcmRzUmVmTGVuZ3RoOiByZWNvcmRzUmVmLmN1cnJlbnQ/Lmxlbmd0aCB8fCAwLFxuICAgICAgbWFudWFsVGFiU3dpdGNoUmVmOiBtYW51YWxUYWJTd2l0Y2hSZWYuY3VycmVudCxcbiAgICAgIHdpbGxBdXRvU3dpdGNoOiBxdWVyeUp1c3RFeGVjdXRlZFJlZi5jdXJyZW50ICYmIHJlc3VsdENvdW50ID4gMCAmJiBoYXNSZWNvcmRzICYmIGFjdGl2ZVRhYiA9PT0gJ3F1ZXJ5JyxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgaWYgKHF1ZXJ5SnVzdEV4ZWN1dGVkUmVmLmN1cnJlbnQgJiYgXG4gICAgICAgIHJlc3VsdENvdW50ID4gMCAmJiBcbiAgICAgICAgaGFzUmVjb3JkcyAmJiBcbiAgICAgICAgYWN0aXZlVGFiID09PSAncXVlcnknKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICAgIGV2ZW50OiAnYXV0by1zd2l0Y2gtdHJpZ2dlcmVkJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICBxdWVyeUl0ZW1Db25maWdJZDogcXVlcnlJdGVtLmNvbmZpZ0lkLFxuICAgICAgICBmcm9tVGFiOiBhY3RpdmVUYWIsXG4gICAgICAgIHRvVGFiOiAncmVzdWx0cycsXG4gICAgICAgIHJlc3VsdENvdW50LFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICBzZXRBY3RpdmVUYWIoJ3Jlc3VsdHMnKVxuICAgICAgcXVlcnlKdXN0RXhlY3V0ZWRSZWYuY3VycmVudCA9IGZhbHNlIC8vIFJlc2V0IGFmdGVyIHN3aXRjaGluZ1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgICBldmVudDogJ2F1dG8tc3dpdGNoLWNvbXBsZXRlZCcsXG4gICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZCxcbiAgICAgICAgcXVlcnlKdXN0RXhlY3V0ZWRSZWZSZXNldDogcXVlcnlKdXN0RXhlY3V0ZWRSZWYuY3VycmVudCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgIH1cbiAgfSwgW3Jlc3VsdENvdW50LCBhY3RpdmVUYWIsIHBhZ2luZ1R5cGVJbkNvbmZpZ10pXG5cbiAgLy8gVmVyaWZ5IGRyb3Bkb3ducyBhcmUgc3luY2hyb25pemVkIHdpdGggaGFzaCBwYXJhbWV0ZXIgd2hlbiBwcmVzZW50XG4gIC8vIFRoaXMgaXMgZXNwZWNpYWxseSBpbXBvcnRhbnQgZm9yIGdyb3VwZWQgcXVlcmllcyB3aGVyZSBkcm9wZG93bnMgbmVlZCB0byBiZSBzeW5jaHJvbml6ZWRcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBPbmx5IHZlcmlmeSBpZiB3ZSBoYXZlIGEgaGFzaCBwYXJhbWV0ZXJcbiAgICBpZiAoIWluaXRpYWxJbnB1dFZhbHVlIHx8ICFxdWVyeUl0ZW0uc2hvcnRJZCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIC8vIFZlcmlmeSB0aGUgY3VycmVudCBxdWVyeUl0ZW0gbWF0Y2hlcyB3aGF0IHdlIGV4cGVjdCBmcm9tIGhhc2ggcGFyYW1ldGVyXG4gICAgY29uc3QgZXhwZWN0ZWRTaG9ydElkID0gcXVlcnlJdGVtLnNob3J0SWRcbiAgICBjb25zdCBpc0dyb3VwZWRRdWVyeSA9IHF1ZXJ5SXRlbS5ncm91cElkICE9PSBudWxsICYmIHF1ZXJ5SXRlbS5ncm91cElkICE9PSB1bmRlZmluZWRcbiAgICBcbiAgICAvLyBDaGVjayBpZiBkcm9wZG93bnMgYXJlIGNvcnJlY3RseSBzZXQgZm9yIGdyb3VwZWQgcXVlcmllc1xuICAgIGlmIChpc0dyb3VwZWRRdWVyeSkge1xuICAgICAgY29uc3QgZXhwZWN0ZWRHcm91cElkID0gcXVlcnlJdGVtLmdyb3VwSWRcbiAgICAgIGNvbnN0IGFjdHVhbEdyb3VwSWQgPSBzZWxlY3RlZEdyb3VwSWRcbiAgICAgIGNvbnN0IGV4cGVjdGVkUXVlcnlJbmRleCA9IHNlbGVjdGVkR3JvdXBRdWVyeUluZGV4XG4gICAgICBcbiAgICAgIGlmIChleHBlY3RlZEdyb3VwSWQgIT09IGFjdHVhbEdyb3VwSWQpIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgICBldmVudDogJ2Ryb3Bkb3duLWdyb3VwLW1pc21hdGNoJyxcbiAgICAgICAgICBleHBlY3RlZEdyb3VwSWQsXG4gICAgICAgICAgYWN0dWFsR3JvdXBJZCxcbiAgICAgICAgICBxdWVyeUl0ZW1TaG9ydElkOiBleHBlY3RlZFNob3J0SWQsXG4gICAgICAgICAgd2FybmluZzogJ0ZpcnN0IGRyb3Bkb3duIG1heSBub3QgYmUgc3luY2hyb25pemVkIHdpdGggaGFzaCBwYXJhbWV0ZXInXG4gICAgICAgIH0pXG4gICAgICB9IGVsc2UgaWYgKGV4cGVjdGVkUXVlcnlJbmRleCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIC8vIFZlcmlmeSB0aGUgcXVlcnkgaW5kZXggd2l0aGluIHRoZSBncm91cCBtYXRjaGVzXG4gICAgICAgIGNvbnN0IGdyb3VwSXRlbXMgPSBncm91cHM/LltleHBlY3RlZEdyb3VwSWRdPy5pdGVtc1xuICAgICAgICBpZiAoZ3JvdXBJdGVtcyAmJiBncm91cEl0ZW1zLmxlbmd0aCA+IGV4cGVjdGVkUXVlcnlJbmRleCkge1xuICAgICAgICAgIGNvbnN0IGV4cGVjdGVkUXVlcnlDb25maWdJZCA9IGdyb3VwSXRlbXNbZXhwZWN0ZWRRdWVyeUluZGV4XT8uY29uZmlnSWRcbiAgICAgICAgICBjb25zdCBhY3R1YWxRdWVyeUNvbmZpZ0lkID0gcXVlcnlJdGVtLmNvbmZpZ0lkXG4gICAgICAgICAgaWYgKGV4cGVjdGVkUXVlcnlDb25maWdJZCAhPT0gYWN0dWFsUXVlcnlDb25maWdJZCkge1xuICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgICAgICAgZXZlbnQ6ICdkcm9wZG93bi1xdWVyeS1pbmRleC1taXNtYXRjaCcsXG4gICAgICAgICAgICAgIGV4cGVjdGVkUXVlcnlDb25maWdJZCxcbiAgICAgICAgICAgICAgYWN0dWFsUXVlcnlDb25maWdJZCxcbiAgICAgICAgICAgICAgZXhwZWN0ZWRRdWVyeUluZGV4LFxuICAgICAgICAgICAgICBxdWVyeUl0ZW1TaG9ydElkOiBleHBlY3RlZFNob3J0SWQsXG4gICAgICAgICAgICAgIHdhcm5pbmc6ICdTZWNvbmQgZHJvcGRvd24gbWF5IG5vdCBiZSBzeW5jaHJvbml6ZWQgd2l0aCBoYXNoIHBhcmFtZXRlcidcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgICAgICAgIGV2ZW50OiAnZHJvcGRvd25zLXN5bmNocm9uaXplZCcsXG4gICAgICAgICAgICAgIHF1ZXJ5SXRlbVNob3J0SWQ6IGV4cGVjdGVkU2hvcnRJZCxcbiAgICAgICAgICAgICAgZ3JvdXBJZDogZXhwZWN0ZWRHcm91cElkLFxuICAgICAgICAgICAgICBzZWxlY3RlZEdyb3VwUXVlcnlJbmRleDogZXhwZWN0ZWRRdWVyeUluZGV4LFxuICAgICAgICAgICAgICBub3RlOiAnRHJvcGRvd25zIHN5bmNocm9uaXplZCB3aXRoIGhhc2ggcGFyYW1ldGVyJ1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVW5ncm91cGVkIHF1ZXJ5IC0gdmVyaWZ5IGl0J3Mgc2VsZWN0ZWRcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgIGV2ZW50OiAnZHJvcGRvd25zLXN5bmNocm9uaXplZC11bmdyb3VwZWQnLFxuICAgICAgICBxdWVyeUl0ZW1TaG9ydElkOiBleHBlY3RlZFNob3J0SWQsXG4gICAgICAgIG5vdGU6ICdVbmdyb3VwZWQgcXVlcnkgZHJvcGRvd24gc3luY2hyb25pemVkIHdpdGggaGFzaCBwYXJhbWV0ZXInXG4gICAgICB9KVxuICAgIH1cbiAgfSwgW2luaXRpYWxJbnB1dFZhbHVlLCBxdWVyeUl0ZW0uc2hvcnRJZCwgcXVlcnlJdGVtLmdyb3VwSWQsIHF1ZXJ5SXRlbS5jb25maWdJZCwgc2VsZWN0ZWRHcm91cElkLCBzZWxlY3RlZEdyb3VwUXVlcnlJbmRleCwgZ3JvdXBzXSlcblxuICBjb25zdCB1c2VPdXRwdXREczogSW1tdXRhYmxlT2JqZWN0PFVzZURhdGFTb3VyY2U+ID0gUmVhY3QudXNlTWVtbyhcbiAgICAoKSA9PlxuICAgICAgSW1tdXRhYmxlKHtcbiAgICAgICAgZGF0YVNvdXJjZUlkOiBxdWVyeUl0ZW0ub3V0cHV0RGF0YVNvdXJjZUlkLFxuICAgICAgICBtYWluRGF0YVNvdXJjZUlkOiBxdWVyeUl0ZW0ub3V0cHV0RGF0YVNvdXJjZUlkXG4gICAgICB9KSxcbiAgICBbcXVlcnlJdGVtLm91dHB1dERhdGFTb3VyY2VJZF1cbiAgKVxuXG4gIGNvbnN0IHVwZGF0ZURhdGFTb3VyY2UgPSBSZWFjdC51c2VDYWxsYmFjaygoZHM/OiBEYXRhU291cmNlKSA9PiB7XG4gICAgY29uc3QgY3VycmVudERzID0gZHMgPz8gZGF0YVNvdXJjZVxuICAgIC8vIHNob3VsZCBkaXNhYmxlIHNwYXRpYWwgZmlsdGVyIGlmIHRoZSBkYXRhU291cmNlIGlzIGFuIG91dHB1dCBkcyBhbmQgaXQgYWxyZWFkeSBoYXMgc3BhdGlhbCBmaWx0ZXJcbiAgICBpZiAoY3VycmVudERzPy5nZXREYXRhU291cmNlSnNvbigpPy5pc091dHB1dEZyb21XaWRnZXQpIHtcbiAgICAgIGNvbnN0IHFEczogUXVlcmlhYmxlRGF0YVNvdXJjZSA9IGN1cnJlbnREcyBhcyBRdWVyaWFibGVEYXRhU291cmNlXG4gICAgICBjb25zdCBxUGFyYW1zID0gcURzLmdldEN1cnJlbnRRdWVyeVBhcmFtcz8uKCkgYXMgRmVhdHVyZUxheWVyUXVlcnlQYXJhbXNcbiAgICAgIGlmIChxUGFyYW1zLmdlb21ldHJ5ICE9IG51bGwpIHtcbiAgICAgICAgc2V0U3BhdGlhbEZpbHRlckVuYWJsZWQoZmFsc2UpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZXRTcGF0aWFsRmlsdGVyRW5hYmxlZCh0cnVlKVxuICAgICAgfVxuICAgIH1cbiAgfSwgW2RhdGFTb3VyY2VdKVxuXG4gIGNvbnN0IGhhbmRsZVN0YXR1c0NoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKChlbmFibGVkOiBib29sZWFuKSA9PiB7XG4gICAgc2V0RW5hYmxlZChlbmFibGVkKVxuICAgIHVwZGF0ZURhdGFTb3VyY2UoKVxuICB9LCBbdXBkYXRlRGF0YVNvdXJjZV0pXG5cbiAgY29uc3QgaGFuZGxlT3V0cHV0RGF0YVNvdXJjZUluZm9DaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjaygoaW5mbywgcHJlSW5mbykgPT4ge1xuICAgIGNvbnN0IG91dHB1dElkID0gcXVlcnlJdGVtLm91dHB1dERhdGFTb3VyY2VJZFxuICAgIGNvbnN0IGZpbHRlciA9IGluZm8/LndpZGdldFF1ZXJpZXMgPyBpbmZvLndpZGdldFF1ZXJpZXNbYHNldEZpbHRlci0ke291dHB1dElkfWBdIDogbnVsbFxuICAgIGlmIChmaWx0ZXIgPT0gbnVsbCkgeyAvLyBmaWx0ZXIgaXMgbnVsbCBtZWFucyB0aGVyZSBhcmUgaW5jb21wbGV0ZSBxdWVyaWVzLCBpZ25vcmUgdGhpcyBjaGFuZ2VcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBjb25zdCBwcmVGaWx0ZXIgPSBwcmVJbmZvPy53aWRnZXRRdWVyaWVzID8gcHJlSW5mby53aWRnZXRRdWVyaWVzW2BzZXRGaWx0ZXItJHtvdXRwdXRJZH1gXSA6IG51bGxcbiAgICBpZiAoZmlsdGVyPy53aGVyZSAhPT0gcHJlRmlsdGVyPy53aGVyZSkge1xuICAgICAgc2V0RGF0YUFjdGlvbkZpbHRlcihmaWx0ZXIpXG4gICAgfVxuICB9LCBbcXVlcnlJdGVtLm91dHB1dERhdGFTb3VyY2VJZF0pXG5cbiAgY29uc3QgcHVibGlzaERhdGFDbGVhcmVkTXNnID0gUmVhY3QudXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgIGlmICghb3V0cHV0RFMpIHJldHVyblxuICAgIGNvbnN0IGRhdGFSZWNvcmRTZXRDaGFuZ2VNZXNzYWdlID0gbmV3IERhdGFSZWNvcmRTZXRDaGFuZ2VNZXNzYWdlKHByb3BzLndpZGdldElkLCBSZWNvcmRTZXRDaGFuZ2VUeXBlLlJlbW92ZSwgW291dHB1dERTLmlkXSlcbiAgICBNZXNzYWdlTWFuYWdlci5nZXRJbnN0YW5jZSgpLnB1Ymxpc2hNZXNzYWdlKGRhdGFSZWNvcmRTZXRDaGFuZ2VNZXNzYWdlKVxuICAgIGF3YWl0IE1lc3NhZ2VNYW5hZ2VyLmdldEluc3RhbmNlKCkucHVibGlzaE1lc3NhZ2UobmV3IERhdGFSZWNvcmRzU2VsZWN0aW9uQ2hhbmdlTWVzc2FnZShwcm9wcy53aWRnZXRJZCwgW10sIFtvdXRwdXREUy5pZF0pKVxuICB9LCBbcHJvcHMud2lkZ2V0SWQsIG91dHB1dERTXSlcblxuICAvKipcbiAgICogQ2xlYXJzIGFsbCBxdWVyeSByZXN1bHRzIGZyb20gdGhlIFVJIGFuZCBtYXAuXG4gICAqIFRoaXMgaXMgdGhlIHNpbmdsZSBzb3VyY2Ugb2YgdHJ1dGggZm9yIGNsZWFyaW5nIHJlc3VsdHMuXG4gICAqIEl0IGNsZWFycyB0aGUgcmVjb3JkcywgcmVzZXRzIHRoZSByZXN1bHQgY291bnQsIGNsZWFycyBzZWxlY3Rpb24gZnJvbSB0aGUgbWFwLFxuICAgKiBwdWJsaXNoZXMgYSBjbGVhcmVkIG1lc3NhZ2UgdG8gdGhlIG1hcCwgc3dpdGNoZXMgYmFjayB0byB0aGUgUXVlcnkgdGFiLFxuICAgKiBhbmQgaW5jcmVtZW50cyB0aGUgcXVlcnkgZXhlY3V0aW9uIGtleSB0byBmb3JjZSBRdWVyeVRhc2tSZXN1bHQgdG8gcmVtb3VudCB3aXRoIGZyZXNoIHN0YXRlLlxuICAgKi9cbiAgY29uc3QgY2xlYXJSZXN1bHQgPSBSZWFjdC51c2VDYWxsYmFjayhhc3luYyAocmVhc29uOiBzdHJpbmcgPSAndW5rbm93bicpID0+IHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICBldmVudDogJ2NsZWFyUmVzdWx0LWNhbGxlZCcsXG4gICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICBoYXNPdXRwdXREUzogISFvdXRwdXREUyxcbiAgICAgIHJlYXNvbixcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG5cbiAgICByZWNvcmRzUmVmLmN1cnJlbnQgPSBudWxsXG4gICAgb3V0cHV0RFM/LnNldFN0YXR1cyhEYXRhU291cmNlU3RhdHVzLk5vdFJlYWR5KVxuICAgIHNldFJlc3VsdENvdW50KDApXG4gICAgXG4gICAgLy8gTk9URTogR3JhcGhpY3MgbGF5ZXIgY2xlYXJpbmcgaXMgbm93IGhhbmRsZWQgaW5zaWRlIGNsZWFyU2VsZWN0aW9uSW5EYXRhU291cmNlc1xuICAgIC8vIGNhbGxlZCBiZWxvdy4gV2UgZW5zdXJlIHRoaXMgaXMgYXdhaXRlZCB0byBwcmV2ZW50IHJhY2UgY29uZGl0aW9ucy5cbiAgICBcbiAgICAvLyBDbGVhciBzZWxlY3Rpb24gZGlyZWN0bHkgZnJvbSBkYXRhIHNvdXJjZSB1c2luZyB1dGlsaXR5IGZ1bmN0aW9uXG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IGNsZWFyU2VsZWN0aW9uSW5EYXRhU291cmNlcyhwcm9wcy53aWRnZXRJZCwgb3V0cHV0RFMsIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQsIGdyYXBoaWNzTGF5ZXIpXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICAgIGV2ZW50OiAnY2xlYXJSZXN1bHQtc2VsZWN0aW9uLWNsZWFyZWQnLFxuICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgICBldmVudDogJ2NsZWFyUmVzdWx0LXNlbGVjdGlvbi1jbGVhci1mYWlsZWQnLFxuICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvciksXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICB9XG4gICAgXG4gICAgLy8gQ2xlYXIgd2lkZ2V0LWxldmVsIGFjY3VtdWxhdGVkIHJlY29yZHMgd2hlbiBjbGVhcmluZyByZXN1bHRzXG4gICAgaWYgKG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlKSB7XG4gICAgICBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZShbXSlcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ2FjY3VtdWxhdGVkLXJlY29yZHMtY2xlYXJlZC1vbi1jbGVhci1yZXN1bHRzJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkXG4gICAgICB9KVxuICAgIH1cbiAgICBcbiAgICBhd2FpdCBwdWJsaXNoRGF0YUNsZWFyZWRNc2coKVxuICAgIC8vIFN3aXRjaCBiYWNrIHRvIFF1ZXJ5IHRhYiB3aGVuIGNsZWFyaW5nIHJlc3VsdHNcbiAgICBzZXRBY3RpdmVUYWIoJ3F1ZXJ5JylcbiAgICBzZXRTdGFnZSgwKVxuICAgIGhhc1NlbGVjdGVkUmVjb3Jkc1JlZi5jdXJyZW50ID0gZmFsc2UgLy8gUmVzZXQgc2VsZWN0aW9uIGZsYWcgd2hlbiBjbGVhcmluZ1xuICAgIC8vIEluY3JlbWVudCBxdWVyeSBleGVjdXRpb24ga2V5IHRvIGZvcmNlIFF1ZXJ5VGFza1Jlc3VsdCByZW1vdW50IHdpdGggZnJlc2ggc3RhdGVcbiAgICBxdWVyeUV4ZWN1dGlvbktleVJlZi5jdXJyZW50ICs9IDFcbiAgICAvLyBDbGVhciBlcnJvciBzdGF0ZXMgd2hlbiBjbGVhcmluZyByZXN1bHRzXG4gICAgc2V0U2VsZWN0aW9uRXJyb3IobnVsbClcbiAgICBzZXRab29tRXJyb3IobnVsbClcblxuICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgIGV2ZW50OiAnY2xlYXJSZXN1bHQtY29tcGxldGUnLFxuICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgfSwgW291dHB1dERTLCBwdWJsaXNoRGF0YUNsZWFyZWRNc2csIHByb3BzLndpZGdldElkLCBxdWVyeUl0ZW0uY29uZmlnSWQsIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlLCB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0LCBncmFwaGljc0xheWVyXSlcblxuICAvKipcbiAgICogSGFuZGxlcyBkYXRhIHNvdXJjZSBjcmVhdGlvbiB3aGVuIHN3aXRjaGluZyBiZXR3ZWVuIHF1ZXJ5IGl0ZW1zLlxuICAgKiBXaGVuIGEgbmV3IHF1ZXJ5IGl0ZW0gaXMgc2VsZWN0ZWQgKGUuZy4sIHN3aXRjaGluZyBmcm9tIFBhcmNlbCB0byBNYWpvciksXG4gICAqIHRoaXMgY2xlYXJzIG9sZCByZXN1bHRzIHRvIGVuc3VyZSBhbGwgY2xlYW51cCBsb2dpYyBydW5zIHByb3Blcmx5LlxuICAgKiBcbiAgICogQHBhcmFtIGRzIC0gVGhlIG5ld2x5IGNyZWF0ZWQgZGF0YSBzb3VyY2UgZm9yIHRoZSBzZWxlY3RlZCBxdWVyeSBpdGVtXG4gICAqL1xuICBjb25zdCBoYW5kbGVEYXRhU291cmNlQ3JlYXRlZCA9IFJlYWN0LnVzZUNhbGxiYWNrKGFzeW5jIChkczogRGF0YVNvdXJjZSkgPT4ge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgIGV2ZW50OiAnaGFuZGxlRGF0YVNvdXJjZUNyZWF0ZWQtc3RhcnQnLFxuICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgcmVzdWx0c01vZGUsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuXG4gICAgLy8gSW4gXCJBZGQgdG9cIiBhbmQgXCJSZW1vdmUgZnJvbVwiIG1vZGVzLCBwcmVzZXJ2ZSBhY2N1bXVsYXRlZCByZWNvcmRzIGFuZCBzZWxlY3Rpb24gLSBkb24ndCBjbGVhclxuICAgIGlmICgocmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb24gfHwgcmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvbikgXG4gICAgICAgICYmIGFjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAncHJlc2VydmluZy1zZWxlY3Rpb24tb24tcXVlcnktc3dpdGNoLWhhbmRsZURhdGFTb3VyY2VDcmVhdGVkJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICByZXN1bHRzTW9kZSxcbiAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGhcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIHNldERhdGFTb3VyY2UoZHMpXG4gICAgICB1cGRhdGVEYXRhU291cmNlKGRzKVxuICAgICAgc2V0U3RhZ2UoMClcbiAgICAgIHNldEFjdGl2ZVRhYigncXVlcnknKVxuICAgICAgcmV0dXJuIC8vIFNraXAgY2xlYXJpbmcgLSBwcmVzZXJ2ZSBzZWxlY3Rpb25cbiAgICB9XG4gICAgXG4gICAgLy8gRm9yIFwiTmV3XCIgbW9kZSwgY2xlYXIgb2xkIHJlc3VsdHNcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICBldmVudDogJ2hhbmRsZURhdGFTb3VyY2VDcmVhdGVkLWNsZWFyaW5nLXJlc3VsdHMtZm9yLW5ldy1tb2RlJyxcbiAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgYXdhaXQgY2xlYXJSZXN1bHQoJ2hhbmRsZURhdGFTb3VyY2VDcmVhdGVkLW5ldy1tb2RlJylcblxuICAgIHNldERhdGFTb3VyY2UoZHMpXG4gICAgdXBkYXRlRGF0YVNvdXJjZShkcylcbiAgICBzZXRTdGFnZSgwKVxuICAgIHNldEFjdGl2ZVRhYigncXVlcnknKSAvLyBSZXR1cm4gdG8gUXVlcnkgdGFiIHdoZW4gc3dpdGNoaW5nIHF1ZXJpZXNcbiAgfSwgW3VwZGF0ZURhdGFTb3VyY2UsIGNsZWFyUmVzdWx0LCByZXN1bHRDb3VudCwgcmVzdWx0c01vZGUsIGFjY3VtdWxhdGVkUmVjb3JkcywgcHJvcHMud2lkZ2V0SWRdKVxuXG4gIGNvbnN0IGhhbmRsZU91dHB1dERhdGFTb3VyY2VDcmVhdGVkID0gUmVhY3QudXNlQ2FsbGJhY2soYXN5bmMgKGRzOiBEYXRhU291cmNlKSA9PiB7XG4gICAgc2V0T3V0cHV0RFMoZHMpXG4gICAgXG4gICAgLy8gQ0hFQ0sgcm9vdERhdGFTb3VyY2UubWFwIHRvIHNlZSBob3cgZnJhbWV3b3JrIGFjY2Vzc2VzIG1hcCB2aWV3XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IG9yaWdpbkRhdGFTb3VyY2VzID0gZHMuZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKVxuICAgICAgY29uc3Qgb3JpZ2luRFMgPSBvcmlnaW5EYXRhU291cmNlcz8uWzBdXG4gICAgICBpZiAob3JpZ2luRFMpIHtcbiAgICAgICAgY29uc3Qgcm9vdERTID0gb3JpZ2luRFMuZ2V0Um9vdERhdGFTb3VyY2UoKVxuICAgICAgICBpZiAocm9vdERTKSB7XG4gICAgICAgICAgLy8gRXhwb3NlIHJvb3REUyB0byB3aW5kb3cgZm9yIGNvbnNvbGUgaW5zcGVjdGlvblxuICAgICAgICAgIDsod2luZG93IGFzIGFueSkuX19xdWVyeVNpbXBsZVJvb3REUyA9IHJvb3REU1xuICAgICAgICAgIDsod2luZG93IGFzIGFueSkuX19xdWVyeVNpbXBsZVJvb3REU01hcCA9IChyb290RFMgYXMgYW55KS5tYXBcbiAgICAgICAgICA7KHdpbmRvdyBhcyBhbnkpLl9fcXVlcnlTaW1wbGVPcmlnaW5EUyA9IG9yaWdpbkRTXG4gICAgICAgICAgXG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgICAgICAgIGV2ZW50OiAnY2hlY2stcm9vdC1kYXRhc291cmNlLW1hcCcsXG4gICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICBvdXRwdXREU0lkOiBkcy5pZCxcbiAgICAgICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICAgICAgcm9vdERTSWQ6IHJvb3REUy5pZCxcbiAgICAgICAgICAgIHJvb3REU1R5cGU6IHJvb3REUy50eXBlLFxuICAgICAgICAgICAgaGFzUm9vdERTTWFwOiAhIShyb290RFMgYXMgYW55KS5tYXAsXG4gICAgICAgICAgICByb290RFNNYXBUeXBlOiAocm9vdERTIGFzIGFueSkubWFwID8gdHlwZW9mIChyb290RFMgYXMgYW55KS5tYXAgOiAnbm9uZScsXG4gICAgICAgICAgICByb290RFNNYXBJZDogKHJvb3REUyBhcyBhbnkpLm1hcD8uaWQgfHwgJ25vbmUnLFxuICAgICAgICAgICAgaGFzUm9vdERTTWFwVmlldzogISEocm9vdERTIGFzIGFueSkubWFwPy52aWV3LFxuICAgICAgICAgICAgaGFzUm9vdERTTWFwVmlld3M6ICEhKHJvb3REUyBhcyBhbnkpLm1hcD8udmlld3MsXG4gICAgICAgICAgICByb290RFNNYXBWaWV3c0xlbmd0aDogKHJvb3REUyBhcyBhbnkpLm1hcD8udmlld3M/Lmxlbmd0aCB8fCAwLFxuICAgICAgICAgICAgLy8gTG9nIHNvbWUgbWFwIHByb3BlcnRpZXMgaWYgaXQgZXhpc3RzXG4gICAgICAgICAgICByb290RFNNYXBLZXlzOiAocm9vdERTIGFzIGFueSkubWFwID8gT2JqZWN0LmtleXMoKHJvb3REUyBhcyBhbnkpLm1hcCkuZmlsdGVyKGtleSA9PiBcbiAgICAgICAgICAgICAgIWtleS5zdGFydHNXaXRoKCdfJykgJiYgXG4gICAgICAgICAgICAgIHR5cGVvZiAocm9vdERTIGFzIGFueSkubWFwW2tleV0gIT09ICdmdW5jdGlvbidcbiAgICAgICAgICAgICkuc2xpY2UoMCwgMjApIDogW10sXG4gICAgICAgICAgICAvLyBMb2cgdGhhdCBvYmplY3RzIGFyZSBhdmFpbGFibGUgb24gd2luZG93IGZvciBjb25zb2xlIGluc3BlY3Rpb25cbiAgICAgICAgICAgIGNvbnNvbGVJbnNwZWN0aW9uOiAnQ2hlY2sgd2luZG93Ll9fcXVlcnlTaW1wbGVSb290RFMsIHdpbmRvdy5fX3F1ZXJ5U2ltcGxlUm9vdERTTWFwLCB3aW5kb3cuX19xdWVyeVNpbXBsZU9yaWdpbkRTJyxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgIH0pXG4gICAgICAgICAgXG4gICAgICAgICAgLy8gSWYgbWFwIGV4aXN0cywgY2hlY2sgaXRzIHZpZXdcbiAgICAgICAgICBjb25zdCByb290TWFwID0gKHJvb3REUyBhcyBhbnkpLm1hcFxuICAgICAgICAgIGlmIChyb290TWFwKSB7XG4gICAgICAgICAgICBjb25zdCB2aWV3ID0gcm9vdE1hcC52aWV3IHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgIChyb290TWFwLnZpZXdzPy5nZXRJdGVtQXQ/LigwKSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAocm9vdE1hcC52aWV3cz8ubGVuZ3RoID4gMCA/IHJvb3RNYXAudmlld3NbMF0gOiBudWxsKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgICAgICAgICBldmVudDogJ2NoZWNrLXJvb3QtZGF0YXNvdXJjZS1tYXAtdmlldycsXG4gICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgaGFzVmlldzogISF2aWV3LFxuICAgICAgICAgICAgICB2aWV3VHlwZTogdmlldz8udHlwZSB8fCAnbm9uZScsXG4gICAgICAgICAgICAgIHZpZXdJZDogdmlldz8uaWQgfHwgJ25vbmUnLFxuICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICAgIGV2ZW50OiAnY2hlY2stcm9vdC1kYXRhc291cmNlLW1hcC1lcnJvcicsXG4gICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSxcbiAgICAgICAgZXJyb3JTdGFjazogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnN0YWNrIDogdW5kZWZpbmVkLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgfVxuICAgIFxuICAgIC8vIEluaXRpYWxpemUgZ3JhcGhpY3MgbGF5ZXIgbGF6aWx5IGlmIGVuYWJsZWQgYW5kIG5vdCBhbHJlYWR5IGluaXRpYWxpemVkXG4gICAgaWYgKHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQgJiYgb25Jbml0aWFsaXplR3JhcGhpY3NMYXllcikge1xuICAgICAgYXdhaXQgb25Jbml0aWFsaXplR3JhcGhpY3NMYXllcihkcylcbiAgICAgIC8vIEFmdGVyIGluaXRpYWxpemF0aW9uLCBncmFwaGljc0xheWVyIGFuZCBtYXBWaWV3IHByb3BzIHNob3VsZCBiZSB1cGRhdGVkXG4gICAgICAvLyBCdXQgc2luY2UgcHJvcHMgY29tZSBmcm9tIHJlZnMsIHdlIG5lZWQgdG8gd2FpdCBmb3Igd2lkZ2V0IHJlLXJlbmRlclxuICAgICAgLy8gRm9yIG5vdywgdXNlIHRoZSBwcm9wcyB0aGF0IHdpbGwgYmUgdXBkYXRlZCBvbiBuZXh0IHJlbmRlclxuICAgIH1cbiAgICBcbiAgICAvLyBJZiBpbiBcIkFkZCB0b1wiIG9yIFwiUmVtb3ZlIGZyb21cIiBtb2RlIGFuZCB3ZSBoYXZlIGFjY3VtdWxhdGVkIHJlY29yZHMsIHJlLXNlbGVjdCB0aGVtXG4gICAgLy8gVGhpcyB1c2VzIHRoZSBzYW1lIGxvZ2ljIGFzIGFmdGVyIHF1ZXJ5IGNvbXBsZXRpb24gLSBzZWxlY3RSZWNvcmRzQW5kUHVibGlzaFxuICAgIC8vIFRoaXMgZW5zdXJlcyByZWNvcmRzIGFyZSBzZWxlY3RlZCBib3RoIG9uIHRoZSBtYXAgYW5kIGluIHRoZSBSZXN1bHRzIHRhYlxuICAgIGlmICgocmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb24gfHwgcmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvbikgXG4gICAgICAgICYmIGFjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgLy8gVXNlIGEgZGVsYXkgdG8gZW5zdXJlIHRoZSBEUyBpcyBmdWxseSByZWFkeSBhbmQgZ3JhcGhpY3MgbGF5ZXIgcHJvcHMgYXJlIHVwZGF0ZWQgYWZ0ZXIgd2lkZ2V0IHJlLXJlbmRlclxuICAgICAgLy8gSWYgZ3JhcGhpY3MgbGF5ZXIgd2FzIGp1c3QgaW5pdGlhbGl6ZWQsIHdhaXQgYSBiaXQgbG9uZ2VyIGZvciBwcm9wcyB0byB1cGRhdGVcbiAgICAgIGNvbnN0IGRlbGF5ID0gKHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQgJiYgb25Jbml0aWFsaXplR3JhcGhpY3NMYXllcikgPyAyMDAgOiAxMDBcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBjb25zdCBmZWF0dXJlRFMgPSBkcyBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gICAgICAgIGlmIChmZWF0dXJlRFMgJiYgYWNjdW11bGF0ZWRSZWNvcmRzICYmIGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgY29uc3QgcmVjb3JkSWRzID0gYWNjdW11bGF0ZWRSZWNvcmRzLm1hcChyZWNvcmQgPT4gcmVjb3JkLmdldElkKCkpXG4gICAgICAgICAgLy8gVXNlIHRoZSBzYW1lIHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoIHRoYXQncyB1c2VkIGFmdGVyIHF1ZXJ5IGNvbXBsZXRpb25cbiAgICAgICAgICAvLyBUaGlzIHdpbGwgc2VsZWN0IHJlY29yZHMgb24gdGhlIG1hcCBhbmQgdHJpZ2dlciBoYW5kbGVEYXRhU291cmNlSW5mb0NoYW5nZVxuICAgICAgICAgIC8vIGluIHF1ZXJ5LXJlc3VsdC50c3ggdG8gdXBkYXRlIHNlbGVjdGVkUmVjb3JkcyBzdGF0ZSBmb3IgdGhlIFJlc3VsdHMgdGFiXG4gICAgICAgICAgLy8gVXNlIGdyYXBoaWNzIGxheWVyIGlmIGVuYWJsZWQgKHByb3BzIHNob3VsZCBiZSB1cGRhdGVkIGFmdGVyIHdpZGdldCByZS1yZW5kZXIpXG4gICAgICAgICAgOyhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoKFxuICAgICAgICAgICAgICAgICAgcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgICBmZWF0dXJlRFMsXG4gICAgICAgICAgICAgICAgICByZWNvcmRJZHMsXG4gICAgICAgICAgICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHMsXG4gICAgICAgICAgICAgICAgICBmYWxzZSxcbiAgICAgICAgICAgICAgICAgIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQsXG4gICAgICAgICAgICAgICAgICBncmFwaGljc0xheWVyLFxuICAgICAgICAgICAgICAgICAgbWFwVmlld1xuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIHJlY29yZHNSZWYgc28gcmVzdWx0cyB0YWIgc2hvd3MgYWNjdW11bGF0ZWQgcmVjb3Jkc1xuICAgICAgICAgICAgICAgIHJlY29yZHNSZWYuY3VycmVudCA9IGFjY3VtdWxhdGVkUmVjb3Jkc1xuICAgICAgICAgICAgICAgIHNldFJlc3VsdENvdW50KGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGgpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgICAgICBldmVudDogJ3JlLXNlbGVjdGVkLWFjY3VtdWxhdGVkLXJlY29yZHMtYWZ0ZXItcXVlcnktc3dpdGNoJyxcbiAgICAgICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgICAgIG91dHB1dERTSWQ6IGZlYXR1cmVEUy5pZCxcbiAgICAgICAgICAgICAgICAgIHJlY29yZHNDb3VudDogYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gVmVyaWZ5IHdoYXQncyBhY3R1YWxseSBzZWxlY3RlZCBpbiB0aGUgRFMgYWZ0ZXIgYSBkZWxheVxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgY29uc3QgZHMgPSBEYXRhU291cmNlTWFuYWdlci5nZXRJbnN0YW5jZSgpLmdldERhdGFTb3VyY2UoZmVhdHVyZURTLmlkKVxuICAgICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRJbkRTID0gZHM/LmdldFNlbGVjdGVkUmVjb3JkcygpXG4gICAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3RlZElkc0luRFMgPSBkcz8uZ2V0U2VsZWN0ZWRSZWNvcmRJZHMoKSA/PyBbXVxuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICd2ZXJpZnktcmVjb3Jkcy1hZnRlci1yZXNlbGVjdGlvbicsXG4gICAgICAgICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0RFNJZDogZmVhdHVyZURTLmlkLFxuICAgICAgICAgICAgICAgICAgICBleHBlY3RlZENvdW50OiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICBhY3R1YWxTZWxlY3RlZEluRFM6IHNlbGVjdGVkSW5EUz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkSWRzSW5EUzogc2VsZWN0ZWRJZHNJbkRTLmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgcmVjb3Jkc01hdGNoOiBzZWxlY3RlZEluRFM/Lmxlbmd0aCA9PT0gYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aFxuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9LCAyMDApXG4gICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgICAgICBldmVudDogJ3JlLXNlbGVjdGlvbi1mYWlsZWQtYWZ0ZXItc3dpdGNoJyxcbiAgICAgICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJyxcbiAgICAgICAgICAgICAgICAgIGVycm9yU3RhY2s6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pKClcbiAgICAgICAgfVxuICAgICAgfSwgMTAwKVxuICAgIH1cbiAgfSwgW3Jlc3VsdHNNb2RlLCBhY2N1bXVsYXRlZFJlY29yZHMsIHByb3BzLndpZGdldElkLCB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0LCBvbkluaXRpYWxpemVHcmFwaGljc0xheWVyXSlcblxuICAvLyBDbGVhciByZXN1bHRzIHdoZW4gcXVlcnkgaXRlbSBjaGFuZ2VzIChlLmcuLCB3aGVuIG5ldyBoYXNoIHBhcmFtZXRlciB0cmlnZ2VycyBkaWZmZXJlbnQgcXVlcnkpXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gT25seSBjbGVhciBpZiB3ZSdyZSBhY3R1YWxseSBzd2l0Y2hpbmcgdG8gYSBkaWZmZXJlbnQgcXVlcnkgKG5vdCBqdXN0IHJlLXJlbmRlcmluZylcbiAgICBjb25zdCBpc1N3aXRjaGluZ1F1ZXJpZXMgPSBwcmV2aW91c0NvbmZpZ0lkUmVmLmN1cnJlbnQgIT09IHF1ZXJ5SXRlbS5jb25maWdJZFxuICAgIFxuICAgIC8vIE9ubHkgY2xlYXIgcmVzdWx0cyB3aGVuIHN3aXRjaGluZyBxdWVyaWVzIGlmIHdlJ3JlIGluIFwiTmV3XCIgbW9kZVxuICAgIC8vIEluIFwiQWRkIHRvXCIgYW5kIFwiUmVtb3ZlIGZyb21cIiBtb2Rlcywgd2Ugd2FudCB0byBwcmVzZXJ2ZSBhY2N1bXVsYXRlZCByZWNvcmRzIGFjcm9zcyBxdWVyeSBzd2l0Y2hlc1xuICAgIGlmIChpc1N3aXRjaGluZ1F1ZXJpZXMgJiYgcmVzdWx0Q291bnQgPiAwICYmIHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvbikge1xuICAgICAgLy8gU3RvcmUgdGhlIG9sZCBjb25maWdJZCBiZWZvcmUgdXBkYXRpbmdcbiAgICAgIGNvbnN0IG9sZENvbmZpZ0lkID0gcHJldmlvdXNDb25maWdJZFJlZi5jdXJyZW50XG4gICAgICAvLyBVcGRhdGUgdGhlIHJlZiB0byB0cmFjayB0aGUgbmV3IHF1ZXJ5XG4gICAgICBwcmV2aW91c0NvbmZpZ0lkUmVmLmN1cnJlbnQgPSBxdWVyeUl0ZW0uY29uZmlnSWRcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAnY2xlYXJpbmctcmVzdWx0cy1vbi1xdWVyeS1zd2l0Y2gtbmV3LW1vZGUnLFxuICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgIG9sZENvbmZpZ0lkLFxuICAgICAgICBuZXdDb25maWdJZDogcXVlcnlJdGVtLmNvbmZpZ0lkLFxuICAgICAgICByZXN1bHRzTW9kZVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgLy8gQ2xlYXIgaW1tZWRpYXRlbHkgd2hlbiBzd2l0Y2hpbmcgcXVlcmllcywgYnV0IHdyYXAgaW4gdHJ5LWNhdGNoIHRvIGhhbmRsZVxuICAgICAgLy8gcmFjZSBjb25kaXRpb25zIHdpdGggZmVhdHVyZSBpbmZvIHdpbmRvd3MgdGhhdCBtaWdodCBiZSByZW5kZXJpbmdcbiAgICAgIHRyeSB7XG4gICAgICAgIGNsZWFyUmVzdWx0KCdxdWVyeS1pdGVtLXN3aXRjaC1uZXctbW9kZScpXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAvLyBMb2cgZm9yIGRlYnVnZ2luZyBidXQgZG9uJ3Qgc2hvdyB0byB1c2VyIChmcmFtZXdvcmsgcmFjZSBjb25kaXRpb24pXG4gICAgICAgIC8vIFRoZSBlcnJvciBpcyBpbiBmcmFtZXdvcmsgY29kZSAoZmVhdHVyZS1pbmZvLnRzeCksIG5vdCBvdXIgY29kZVxuICAgICAgICAvLyBUaGlzIGNhbiBoYXBwZW4gaWYgZmVhdHVyZS1pbmZvLnRzeCBpcyB0cnlpbmcgdG8gYXBwZW5kQ2hpbGQgdG8gYSBET00gZWxlbWVudFxuICAgICAgICAvLyB0aGF0IGdldHMgcmVtb3ZlZCB3aGVuIHdlIGNsZWFyIHNlbGVjdGlvblxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICAgICAgZXZlbnQ6ICdjbGVhci1yZXN1bHQtcmFjZS1jb25kaXRpb24nLFxuICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvciksXG4gICAgICAgICAgbm90ZTogJ0xpa2VseSByYWNlIGNvbmRpdGlvbiB3aXRoIGZlYXR1cmUtaW5mby50c3gnXG4gICAgICAgIH0pXG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xuICAgICAgICAgIGNvbnNvbGUud2FybignRXJyb3IgY2xlYXJpbmcgcmVzdWx0cyAobGlrZWx5IHJhY2UgY29uZGl0aW9uIHdpdGggZmVhdHVyZSBpbmZvKTonLCBlcnJvcilcbiAgICAgICAgfVxuICAgICAgICAvLyBEb24ndCBzZXQgZXJyb3Igc3RhdGUgLSB0aGlzIGlzIGV4cGVjdGVkIGluIHNvbWUgc2NlbmFyaW9zXG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChpc1N3aXRjaGluZ1F1ZXJpZXMpIHtcbiAgICAgIC8vIEp1c3QgdXBkYXRlIHRoZSByZWYgLSBkb24ndCBjbGVhciByZXN1bHRzIGlmIGluIFwiQWRkIHRvXCIgb3IgXCJSZW1vdmUgZnJvbVwiIG1vZGUgb3Igbm8gcmVzdWx0c1xuICAgICAgcHJldmlvdXNDb25maWdJZFJlZi5jdXJyZW50ID0gcXVlcnlJdGVtLmNvbmZpZ0lkXG4gICAgICBcbiAgICAgIGlmIChyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbiB8fCByZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uKSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgIGV2ZW50OiAncHJlc2VydmluZy1hY2N1bXVsYXRlZC1yZWNvcmRzLW9uLXF1ZXJ5LXN3aXRjaCcsXG4gICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgICAgIG9sZENvbmZpZ0lkOiBwcmV2aW91c0NvbmZpZ0lkUmVmLmN1cnJlbnQsXG4gICAgICAgICAgbmV3Q29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZCxcbiAgICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogYWNjdW11bGF0ZWRSZWNvcmRzPy5sZW5ndGggfHwgMFxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cbiAgfSwgW3F1ZXJ5SXRlbS5jb25maWdJZCwgY2xlYXJSZXN1bHQsIHJlc3VsdENvdW50LCByZXN1bHRzTW9kZSwgYWNjdW11bGF0ZWRSZWNvcmRzLCBwcm9wcy53aWRnZXRJZF0pXG5cbiAgY29uc3QgbmF2VG9Gb3JtID0gUmVhY3QudXNlQ2FsbGJhY2soYXN5bmMgKGNsZWFyUmVzdWx0cyA9IGZhbHNlKSA9PiB7XG4gICAgaWYgKGNsZWFyUmVzdWx0cykge1xuICAgICAgLy8gVXNlIHRoZSBjZW50cmFsaXplZCBjbGVhclJlc3VsdCBtZXRob2QgaW5zdGVhZCBvZiBkdXBsaWNhdGluZyBsb2dpY1xuICAgICAgYXdhaXQgY2xlYXJSZXN1bHQoJ25hdlRvRm9ybS1jbGVhclJlc3VsdHMnKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIC8vIFN3aXRjaCB0byBxdWVyeSB0YWIgYnV0IGRvbid0IGNsZWFyIHJlc3VsdHMgdW5sZXNzIGV4cGxpY2l0bHkgcmVxdWVzdGVkXG4gICAgLy8gTWFyayBhcyBtYW51YWwgc3dpdGNoIHRvIHByZXZlbnQgYXV0by1zd2l0Y2ggdXNlRWZmZWN0IGZyb20gaW50ZXJmZXJpbmdcbiAgICBtYW51YWxUYWJTd2l0Y2hSZWYuY3VycmVudCA9IHRydWVcbiAgICBzZXRBY3RpdmVUYWIoJ3F1ZXJ5JylcbiAgICAvLyBSZXNldCB0aGUgZmxhZyBhZnRlciBhIHNob3J0IGRlbGF5XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBtYW51YWxUYWJTd2l0Y2hSZWYuY3VycmVudCA9IGZhbHNlXG4gICAgfSwgMTAwKVxuICAgIC8vIE9ubHkgY2hhbmdlIHN0YWdlIGlmIHdlJ3JlIGNsZWFyaW5nIHJlc3VsdHNcbiAgICAvLyBPdGhlcndpc2UsIGtlZXAgc3RhZ2UgYXQgMSAocmVzdWx0cyBhdmFpbGFibGUpIHNvIHJlc3VsdHMgcGVyc2lzdFxuICAgIGlmICghY2xlYXJSZXN1bHRzICYmIHJlc3VsdENvdW50ID4gMCkge1xuICAgICAgc2V0U3RhZ2UoMSkgLy8gS2VlcCByZXN1bHRzIGF2YWlsYWJsZVxuICAgIH1cbiAgICBsb2Rhc2guZGVmZXIoKCkgPT4ge1xuICAgICAgZm9jdXNFbGVtZW50SW5LZXlib2FyZE1vZGUoYmFja0J0blJlZi5jdXJyZW50KVxuICAgIH0pXG4gIH0sIFtjbGVhclJlc3VsdCwgcmVzdWx0Q291bnRdKVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIHRhYiBzd2l0Y2hpbmcgYmV0d2VlbiBRdWVyeSBhbmQgUmVzdWx0cyB0YWJzLlxuICAgKiBUYWIgc3dpdGNoaW5nIHByZXNlcnZlcyByZXN1bHRzIHN0YXRlIC0gcmVzdWx0cyByZW1haW4gdmlzaWJsZSBhbmQgc2VsZWN0ZWRcbiAgICogd2hlbiBzd2l0Y2hpbmcgYmV0d2VlbiB0YWJzLiBSZXN1bHRzIGFyZSBvbmx5IGNsZWFyZWQgd2hlbiBleHBsaWNpdGx5XG4gICAqIGNsaWNraW5nIHRoZSB0cmFzaCBjYW4gYnV0dG9uIG9yIHdoZW4gc3RhcnRpbmcgYSBuZXcgcXVlcnkuXG4gICAqIFxuICAgKiBAcGFyYW0gdGFiIC0gVGhlIHRhYiB0byBzd2l0Y2ggdG8gKCdxdWVyeScgfCAncmVzdWx0cycpXG4gICAqIEBwYXJhbSBldmVudCAtIE9wdGlvbmFsIG1vdXNlIGV2ZW50IHRvIHByZXZlbnQgZGVmYXVsdCBiZWhhdmlvclxuICAgKi9cbiAgY29uc3QgaGFuZGxlVGFiQ2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soKHRhYjogJ3F1ZXJ5JyB8ICdyZXN1bHRzJywgZXZlbnQ/OiBSZWFjdC5Nb3VzZUV2ZW50KSA9PiB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgZXZlbnQ6ICd0YWItY2hhbmdlJyxcbiAgICAgIHRhYixcbiAgICAgIGN1cnJlbnRUYWI6IGFjdGl2ZVRhYixcbiAgICAgIHJlc3VsdENvdW50LFxuICAgICAgZXZlbnRUeXBlOiBldmVudD8udHlwZVxuICAgIH0pXG4gICAgXG4gICAgaWYgKGV2ZW50KSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuICAgIH1cbiAgICAvLyBEb24ndCBhbGxvdyBzd2l0Y2hpbmcgdG8gcmVzdWx0cyBpZiB0aGVyZSBhcmUgbm8gcmVzdWx0c1xuICAgIGlmICh0YWIgPT09ICdyZXN1bHRzJyAmJiByZXN1bHRDb3VudCA9PT0gMCkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgICBldmVudDogJ3RhYi1jaGFuZ2UtYmxvY2tlZCcsXG4gICAgICAgIHJlYXNvbjogJ25vLXJlc3VsdHMnLFxuICAgICAgICB0YWIsXG4gICAgICAgIHJlc3VsdENvdW50XG4gICAgICB9KVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIC8vIE1hcmsgdGhpcyBhcyBhIG1hbnVhbCBzd2l0Y2ggdG8gcHJldmVudCBhdXRvLXN3aXRjaCB1c2VFZmZlY3QgZnJvbSBpbnRlcmZlcmluZ1xuICAgIG1hbnVhbFRhYlN3aXRjaFJlZi5jdXJyZW50ID0gdHJ1ZVxuICAgIHNldEFjdGl2ZVRhYih0YWIpXG4gICAgXG4gICAgLy8gUmVzZXQgdGhlIGZsYWcgYWZ0ZXIgYSBzaG9ydCBkZWxheSB0byBhbGxvdyB0aGUgc3RhdGUgdXBkYXRlIHRvIGNvbXBsZXRlXG4gICAgLy8gVGhpcyBwcmV2ZW50cyB0aGUgYXV0by1zd2l0Y2ggdXNlRWZmZWN0IGZyb20gaW1tZWRpYXRlbHkgc3dpdGNoaW5nIGJhY2tcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIG1hbnVhbFRhYlN3aXRjaFJlZi5jdXJyZW50ID0gZmFsc2VcbiAgICB9LCAxMDApXG4gICAgXG4gICAgLy8gRG9uJ3QgY2hhbmdlIHN0YWdlIGhlcmUgLSBqdXN0IHN3aXRjaCB0aGUgdmlld1xuICAgIC8vIFN0YWdlIHNob3VsZCByZW1haW4gYXQgMSAocmVzdWx0cyBhdmFpbGFibGUpIHdoZW4gc3dpdGNoaW5nIGJldHdlZW4gdGFic1xuICB9LCBbcmVzdWx0Q291bnQsIGFjdGl2ZVRhYl0pXG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgZm9ybSBzdWJtaXNzaW9uIHdoZW4gdXNlciBjbGlja3MgXCJBcHBseVwiIGJ1dHRvbi5cbiAgICogQ2xlYXJzIG9sZCByZXN1bHRzIChpZiBhbnkpIGJ5IHByb2dyYW1tYXRpY2FsbHkgY2xpY2tpbmcgdGhlIHRyYXNoIGNhbiBidXR0b24sXG4gICAqIHRoZW4gZXhlY3V0ZXMgdGhlIHF1ZXJ5IHdpdGggdGhlIHByb3ZpZGVkIFNRTCBleHByZXNzaW9uIGFuZCBzcGF0aWFsIGZpbHRlci5cbiAgICogXG4gICAqIEBwYXJhbSBzcWxFeHByIC0gVGhlIFNRTCBleHByZXNzaW9uIGZvciBhdHRyaWJ1dGUgZmlsdGVyaW5nXG4gICAqIEBwYXJhbSBzcGF0aWFsRmlsdGVyIC0gVGhlIHNwYXRpYWwgZmlsdGVyIG9iamVjdFxuICAgKiBAcGFyYW0gcnVudGltZVpvb21Ub1NlbGVjdGVkIC0gT3B0aW9uYWwgcnVudGltZSBvdmVycmlkZSBmb3Igem9vbS10by1zZWxlY3RlZCBiZWhhdmlvclxuICAgKi9cbiAgY29uc3QgaGFuZGxlRm9ybVN1Ym1pdCA9IFJlYWN0LnVzZUNhbGxiYWNrKGFzeW5jIChzcWxFeHByOiBJTVNxbEV4cHJlc3Npb24sIHNwYXRpYWxGaWx0ZXI6IFNwYXRpYWxGaWx0ZXJPYmosIHJ1bnRpbWVab29tVG9TZWxlY3RlZD86IGJvb2xlYW4pID0+IHtcbiAgICAvLyBDbGVhciBwcmV2aW91cyBlcnJvcnMgd2hlbiBzdGFydGluZyBhIG5ldyBxdWVyeVxuICAgIHNldFNlbGVjdGlvbkVycm9yKG51bGwpXG4gICAgc2V0Wm9vbUVycm9yKG51bGwpXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgZXZlbnQ6ICdoYW5kbGVGb3JtU3VibWl0LXN0YXJ0JyxcbiAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcblxuICAgIC8vIFN0b3JlIHRoZSBydW50aW1lIHpvb20gb3ZlcnJpZGUgZm9yIHVzZSBieSBBZGQgdG8gTWFwIGFjdGlvblxuICAgIGxhc3RSdW50aW1lWm9vbVRvU2VsZWN0ZWRSZWYuY3VycmVudCA9IHJ1bnRpbWVab29tVG9TZWxlY3RlZFxuICAgIFxuICAgIGF0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmouY3VycmVudCA9IHNxbEV4cHJcbiAgICBzcGF0aWFsRmlsdGVyT2JqLmN1cnJlbnQgPSBzcGF0aWFsRmlsdGVyXG4gICAgLy8gTG9hZCB0aGUgZmlyc3QgcGFnZVxuICAgIGNvbnN0IGZlYXR1cmVEUyA9IG91dHB1dERTIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgICBcbiAgICAvLyBGb3IgXCJBZGQgdG9cIiBhbmQgXCJSZW1vdmUgZnJvbVwiIG1vZGVzLCB1c2Ugd2lkZ2V0LWxldmVsIGFjY3VtdWxhdGVkIHJlY29yZHNcbiAgICAvLyBUaGVzZSBwZXJzaXN0IGFjcm9zcyBxdWVyeSBzd2l0Y2hlcywgdW5saWtlIHF1ZXJ5LWl0ZW0tbGV2ZWwgcmVjb3Jkc1xuICAgIGxldCBleGlzdGluZ1JlY29yZHNGb3JNZXJnZTogRmVhdHVyZURhdGFSZWNvcmRbXSA9IFtdXG4gICAgaWYgKHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uIHx8IHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb24pIHtcbiAgICAgIC8vIFJvYnVzdCBjYXB0dXJlIHN0cmF0ZWd5OlxuICAgICAgLy8gMS4gVHJ5IHJlY29yZHMgZnJvbSBwcm9wcyAoYWxyZWFkeSBtZXJnZWQgYnkgcGFyZW50KVxuICAgICAgLy8gMi4gRmFsbGJhY2sgdG8gY3VycmVudGx5IHNlbGVjdGVkIHJlY29yZHMgaW4gRFMgKGNhcHR1cmVkIGR1cmluZyBtb2RlIHN3aXRjaClcbiAgICAgIGNvbnN0IGZyb21Qcm9wID0gYWNjdW11bGF0ZWRSZWNvcmRzIHx8IFtdXG4gICAgICBjb25zdCBmcm9tRFMgPSBvdXRwdXREUz8uZ2V0U2VsZWN0ZWRSZWNvcmRzKCkgYXMgRmVhdHVyZURhdGFSZWNvcmRbXSB8fCBbXVxuICAgICAgXG4gICAgICBleGlzdGluZ1JlY29yZHNGb3JNZXJnZSA9IGZyb21Qcm9wLmxlbmd0aCA+IDAgPyBmcm9tUHJvcCA6IGZyb21EU1xuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdjYXB0dXJlZC1leGlzdGluZy1yZWNvcmRzLWRpYWdub3N0aWMnLFxuICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgICBmcm9tUHJvcENvdW50OiBmcm9tUHJvcC5sZW5ndGgsXG4gICAgICAgIGZyb21EU0NvdW50OiBmcm9tRFMubGVuZ3RoLFxuICAgICAgICBmaW5hbENhcHR1cmVkQ291bnQ6IGV4aXN0aW5nUmVjb3Jkc0Zvck1lcmdlLmxlbmd0aCxcbiAgICAgICAgZmlyc3RSZWNvcmRJZDogZXhpc3RpbmdSZWNvcmRzRm9yTWVyZ2VbMF0/LmdldElkPy4oKSB8fCAnbm9uZScsXG4gICAgICAgIGFsbFJlY29yZElkczogZXhpc3RpbmdSZWNvcmRzRm9yTWVyZ2UubWFwKHIgPT4gci5nZXRJZD8uKCkpLnNsaWNlKDAsIDEwKSxcbiAgICAgICAgb3V0cHV0RFNJZDogb3V0cHV0RFMuaWQsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICB9XG4gICAgXG4gICAgLy8gRm9yIFwiTmV3XCIgbW9kZSwgY2xlYXIgb2xkIHJlc3VsdHMgYW5kIGdyYXBoaWNzIGxheWVyXG4gICAgLy8gV2UgY2FsbCBjbGVhclJlc3VsdCgpIGRpcmVjdGx5IGFuZCBBV0FJVCBpdCB0byBlbnN1cmUgaXQncyBmaW5pc2hlZCBiZWZvcmUgcXVlcnkgZXhlY3V0aW9uIHN0YXJ0c1xuICAgIGlmIChyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb24pIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgICAgZXZlbnQ6ICdoYW5kbGVGb3JtU3VibWl0LWNsZWFyaW5nLXJlc3VsdHMtZm9yLW5ldy1tb2RlJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICBhd2FpdCBjbGVhclJlc3VsdCgnaGFuZGxlRm9ybVN1Ym1pdC1uZXctbW9kZScpXG4gICAgfVxuICAgIFxuICAgIC8vIFNldCBsb2FkaW5nIHN0YWdlXG4gICAgc2V0U3RhZ2UoMilcbiAgICBcbiAgICAvLyBGT1JDRUQ6IEFsd2F5cyB1c2UgU2ltcGxlTGlzdCAtIGZldGNoIEFMTCByZWNvcmRzLCBub3QganVzdCBhIHBhZ2VcbiAgICAvLyBVc2UgZGF0YSBzb3VyY2UncyBtYXggcmVjb3JkIGNvdW50LCBvciBmYWxsIGJhY2sgdG8gYSBsYXJnZSBudW1iZXIgKDEwMDAwKVxuICAgIGNvbnN0IG1heFJlY29yZENvdW50ID0gKGZlYXR1cmVEUyBhcyBhbnkpLmdldE1heFJlY29yZENvdW50Py4oKSA/PyAxMDAwMFxuICAgIGxldCBwYWdlU2l6ZSA9IG1heFJlY29yZENvdW50XG4gICAgY29uc3QgcXVlcnlQYXJhbXMgPSBnZW5lcmF0ZVF1ZXJ5UGFyYW1zKGZlYXR1cmVEUywgc3FsRXhwciwgc3BhdGlhbEZpbHRlciwgY3VycmVudEl0ZW0sIDEsIHBhZ2VTaXplKVxuICAgIHF1ZXJ5UGFyYW1SZWYuY3VycmVudCA9IHF1ZXJ5UGFyYW1zXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgZXZlbnQ6ICdoYW5kbGVGb3JtU3VibWl0LWV4ZWN1dGluZy1xdWVyeScsXG4gICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICB3aGVyZTogcXVlcnlQYXJhbXMud2hlcmUsXG4gICAgICByZXN1bHRzTW9kZSxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgLy8gQ2hhbmdlIG91dHB1dCBkcyBzdGF0dXMgdG8gdW5sb2FkZWQgYmVmb3JlIHVzZSBpdCB0byBsb2FkIGNvdW50L3JlY29yZHMuXG4gICAgZmVhdHVyZURTLnNldFN0YXR1cyhEYXRhU291cmNlU3RhdHVzLlVubG9hZGVkKVxuICAgIGZlYXR1cmVEUy5zZXRDb3VudFN0YXR1cyhEYXRhU291cmNlU3RhdHVzLlVubG9hZGVkKVxuICAgIGxldCBxdWVyeVJlc3VsdENvdW50ID0gMCAvLyBDYXB0dXJlIGNvdW50IGZyb20gcmVjb3JkcyB0byB1c2UgaW4gZmluYWxseSBibG9ja1xuICAgIGNvbnN0IHN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgZXZlbnQ6ICdwZXJmLXF1ZXJ5LWNoYWluLXN0YXJ0JyxcbiAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgd2hlcmU6IHF1ZXJ5UGFyYW1zLndoZXJlLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcblxuICAgIC8vIFBFUkZPUk1BTkNFIE9QVElNSVpBVElPTjogUmVtb3ZlZCByZWR1bmRhbnQgZXhlY3V0ZUNvdW50UXVlcnkoKSByb3VuZC10cmlwLlxuICAgIC8vIFNpbmNlIHdlIGZldGNoIEFMTCByZWNvcmRzIChwYWdlU2l6ZSA9IG1heFJlY29yZENvdW50KSwgd2UgY2FuIGp1c3QgdXNlIHJlY29yZHMubGVuZ3RoLlxuICAgIGZlYXR1cmVEUy51cGRhdGVRdWVyeVBhcmFtcyhxdWVyeVBhcmFtUmVmLmN1cnJlbnQsIHByb3BzLndpZGdldElkKVxuICAgIFxuICAgIGNvbnN0IGZldGNoU3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KClcbiAgICBleGVjdXRlUXVlcnkocHJvcHMud2lkZ2V0SWQsIHF1ZXJ5SXRlbSwgZmVhdHVyZURTLCBxdWVyeVBhcmFtUmVmLmN1cnJlbnQpXG4gICAgICAudGhlbihhc3luYyAocmVzdWx0KSA9PiB7XG4gICAgICAgIGNvbnN0IGZldGNoRHVyYXRpb25NcyA9IE1hdGgucm91bmQocGVyZm9ybWFuY2Uubm93KCkgLSBmZXRjaFN0YXJ0VGltZSlcbiAgICAgICAgY29uc3QgcHJvY2Vzc2luZ1N0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpXG4gICAgICAgIFxuICAgICAgICBxdWVyeVJlc3VsdENvdW50ID0gcmVzdWx0LnJlY29yZHM/Lmxlbmd0aCB8fCAwXG4gICAgICAgIFxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICBldmVudDogJ3F1ZXJ5LWV4ZWN1dGlvbi1jb21wbGV0ZScsXG4gICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgICAgIHJlY29yZHNSZXR1cm5lZDogcXVlcnlSZXN1bHRDb3VudCxcbiAgICAgICAgICBmZXRjaER1cmF0aW9uTXMsXG4gICAgICAgICAgZXhpc3RpbmdDYXB0dXJlZENvdW50OiBleGlzdGluZ1JlY29yZHNGb3JNZXJnZS5sZW5ndGgsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH0pXG5cbiAgICAgICAgbGV0IHJlY29yZHNUb0Rpc3BsYXkgPSByZXN1bHQucmVjb3JkcyB8fCBbXVxuICAgICAgICBsZXQgZHNUb1VzZSA9IG91dHB1dERTXG4gICAgICAgIFxuICAgICAgICAvLyBIYW5kbGUgXCJBZGQgdG9cIiBtb2RlOiBtZXJnZSBuZXcgcmVzdWx0cyB3aXRoIHdpZGdldC1sZXZlbCBhY2N1bXVsYXRlZCByZWNvcmRzXG4gICAgICAgIGlmIChyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbiAmJiByZXN1bHQucmVjb3JkcyAmJiByZXN1bHQucmVjb3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICBldmVudDogJ2FkZC1tb2RlLXN0YXJ0aW5nLW1lcmdlLWRpYWdub3N0aWMnLFxuICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgIGV4aXN0aW5nQ291bnQ6IGV4aXN0aW5nUmVjb3Jkc0Zvck1lcmdlLmxlbmd0aCxcbiAgICAgICAgICAgICAgZXhpc3RpbmdJZHM6IGV4aXN0aW5nUmVjb3Jkc0Zvck1lcmdlLm1hcChyID0+IHIuZ2V0SWQ/LigpKS5zbGljZSgwLCA1KSxcbiAgICAgICAgICAgICAgbmV3Q291bnQ6IHJlc3VsdC5yZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgICAgICAgbmV3SWRzOiByZXN1bHQucmVjb3Jkcy5tYXAoKHI6IGFueSkgPT4gci5nZXRJZD8uKCkpLnNsaWNlKDAsIDUpLFxuICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAvLyBNZXJnZSBuZXcgcXVlcnkgcmVzdWx0cyB3aXRoIHdpZGdldC1sZXZlbCBhY2N1bXVsYXRlZCByZWNvcmRzXG4gICAgICAgICAgICBjb25zdCBtZXJnZWRSZWNvcmRzID0gbWVyZ2VSZXN1bHRzSW50b0FjY3VtdWxhdGVkKFxuICAgICAgICAgICAgICBvdXRwdXREUyBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLCAvLyBVc2Ugb3V0cHV0RFMgZm9yIGtleSBnZW5lcmF0aW9uXG4gICAgICAgICAgICAgIHJlc3VsdC5yZWNvcmRzIGFzIEZlYXR1cmVEYXRhUmVjb3JkW10sXG4gICAgICAgICAgICAgIGV4aXN0aW5nUmVjb3Jkc0Zvck1lcmdlIC8vIFVzZSBjb25zaXN0ZW50bHkgY2FwdHVyZWQgcmVjb3Jkc1xuICAgICAgICAgICAgKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICByZWNvcmRzVG9EaXNwbGF5ID0gbWVyZ2VkUmVjb3Jkc1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBVcGRhdGUgd2lkZ2V0LWxldmVsIGFjY3VtdWxhdGVkIHJlY29yZHMgc28gdGhleSBwZXJzaXN0IGFjcm9zcyBxdWVyeSBzd2l0Y2hlc1xuICAgICAgICAgICAgaWYgKG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlKSB7XG4gICAgICAgICAgICAgIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlKG1lcmdlZFJlY29yZHMpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICBldmVudDogJ2FkZC1tb2RlLW1lcmdlLWNvbXBsZXRlLWRpYWdub3N0aWMnLFxuICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgIG1lcmdlZFJlY29yZHNDb3VudDogbWVyZ2VkUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgICAgICAgIG1lcmdlZElkczogbWVyZ2VkUmVjb3Jkcy5tYXAociA9PiByLmdldElkPy4oKSkuc2xpY2UoMCwgMTApLFxuICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICBldmVudDogJ2FkZC1tb2RlLWVycm9yJyxcbiAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicsXG4gICAgICAgICAgICAgIGVycm9yU3RhY2s6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC8vIEZhbGwgYmFjayB0byBub3JtYWwgYmVoYXZpb3Igb24gZXJyb3JcbiAgICAgICAgICAgIHJlY29yZHNUb0Rpc3BsYXkgPSByZXN1bHQucmVjb3Jkc1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uKSB7XG4gICAgICAgICAgLy8gSGFuZGxlIFwiUmVtb3ZlIGZyb21cIiBtb2RlOiByZW1vdmUgbWF0Y2hpbmcgcmVjb3JkcyBmcm9tIHdpZGdldC1sZXZlbCBhY2N1bXVsYXRlZCByZWNvcmRzXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICBldmVudDogJ3JlbW92ZS1tb2RlLXN0YXJ0aW5nLW1lcmdlJyxcbiAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICBleGlzdGluZ0NvdW50OiBleGlzdGluZ1JlY29yZHNGb3JNZXJnZS5sZW5ndGgsXG4gICAgICAgICAgICAgIHJlbW92ZUNvdW50OiByZXN1bHQucmVjb3Jkcz8ubGVuZ3RoIHx8IDBcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAvLyBDaGVjayBpZiB3ZSBoYXZlIGFjY3VtdWxhdGVkIHJlY29yZHMgdG8gcmVtb3ZlIGZyb21cbiAgICAgICAgICAgIGlmIChleGlzdGluZ1JlY29yZHNGb3JNZXJnZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgICAgZXZlbnQ6ICdyZW1vdmUtbW9kZS1uby1hY2N1bXVsYXRlZC1yZWNvcmRzJyxcbiAgICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgcXVlcnlSZWNvcmRzQ291bnQ6IHJlc3VsdC5yZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgICAgICAgICBub3RlOiAnTm8gYWNjdW11bGF0ZWQgcmVjb3JkcyB0byByZW1vdmUgZnJvbSAtIG5vLW9wJ1xuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAvLyBObyBhY2N1bXVsYXRlZCByZWNvcmRzLCBzbyBub3RoaW5nIHRvIHJlbW92ZSAtIHNob3cgZW1wdHkgcmVzdWx0c1xuICAgICAgICAgICAgICByZWNvcmRzVG9EaXNwbGF5ID0gW11cbiAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzdWx0LnJlY29yZHMgJiYgcmVzdWx0LnJlY29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAvLyBSZW1vdmUgbWF0Y2hpbmcgcmVjb3JkcyBmcm9tIGFjY3VtdWxhdGVkIHJlY29yZHNcbiAgICAgICAgICAgICAgY29uc3QgcmVtYWluaW5nUmVjb3JkcyA9IHJlbW92ZVJlc3VsdHNGcm9tQWNjdW11bGF0ZWQoXG4gICAgICAgICAgICAgICAgb3V0cHV0RFMgYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSwgLy8gVXNlIG91dHB1dERTIGZvciBrZXkgZ2VuZXJhdGlvblxuICAgICAgICAgICAgICAgIHJlc3VsdC5yZWNvcmRzIGFzIEZlYXR1cmVEYXRhUmVjb3JkW10sXG4gICAgICAgICAgICAgICAgZXhpc3RpbmdSZWNvcmRzRm9yTWVyZ2UgLy8gVXNlIGNvbnNpc3RlbnRseSBjYXB0dXJlZCByZWNvcmRzXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIHJlY29yZHNUb0Rpc3BsYXkgPSByZW1haW5pbmdSZWNvcmRzXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBVcGRhdGUgd2lkZ2V0LWxldmVsIGFjY3VtdWxhdGVkIHJlY29yZHNcbiAgICAgICAgICAgICAgaWYgKG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UocmVtYWluaW5nUmVjb3JkcylcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gUmVtb3ZlIHJlY29yZHMgZnJvbSBvcmlnaW4gZGF0YSBzb3VyY2Ugc2VsZWN0aW9ucyAobWFwIGhpZ2hsaWdodGluZylcbiAgICAgICAgICAgICAgLy8gQWxzbyByZW1vdmVzIGdyYXBoaWNzIGZyb20gZ3JhcGhpY3MgbGF5ZXIgaWYgdXNpbmcgZ3JhcGhpY3MgbGF5ZXIgaGlnaGxpZ2h0aW5nXG4gICAgICAgICAgICAgIHJlbW92ZVJlY29yZHNGcm9tT3JpZ2luU2VsZWN0aW9ucyhcbiAgICAgICAgICAgICAgICBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgICByZXN1bHQucmVjb3JkcyBhcyBGZWF0dXJlRGF0YVJlY29yZFtdLFxuICAgICAgICAgICAgICAgIG91dHB1dERTIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2UsXG4gICAgICAgICAgICAgICAgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCxcbiAgICAgICAgICAgICAgICBncmFwaGljc0xheWVyXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICAgIGV2ZW50OiAncmVtb3ZlLW1vZGUtY29tcGxldGUnLFxuICAgICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgICBleGlzdGluZ0FjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiBleGlzdGluZ1JlY29yZHNGb3JNZXJnZS5sZW5ndGgsXG4gICAgICAgICAgICAgICAgcXVlcnlSZWNvcmRzQ291bnQ6IHJlc3VsdC5yZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgICAgICAgICByZW1haW5pbmdSZWNvcmRzQ291bnQ6IHJlbWFpbmluZ1JlY29yZHMubGVuZ3RoLFxuICAgICAgICAgICAgICAgIHJlY29yZHNSZW1vdmVkOiBleGlzdGluZ1JlY29yZHNGb3JNZXJnZS5sZW5ndGggLSByZW1haW5pbmdSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBvdXRwdXREU0lkOiBvdXRwdXREUy5pZCxcbiAgICAgICAgICAgICAgICB3aWRnZXRMZXZlbFJlY29yZHNVcGRhdGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgIG9yaWdpblNlbGVjdGlvbnNVcGRhdGVkOiB0cnVlXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBJZiBhbGwgcmVjb3JkcyByZW1vdmVkLCBhdXRvLWNsZWFyIChjb25zaXN0ZW50IHdpdGggdXNlciBleHBlY3RhdGlvbilcbiAgICAgICAgICAgICAgaWYgKHJlbWFpbmluZ1JlY29yZHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgICAgICBldmVudDogJ3JlbW92ZS1tb2RlLWFsbC1yZWNvcmRzLXJlbW92ZWQnLFxuICAgICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICAgICAgbm90ZTogJ0FsbCBhY2N1bXVsYXRlZCByZWNvcmRzIHJlbW92ZWQgLSBhdXRvLWNsZWFyaW5nJ1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLy8gQ2xlYXIgd2lkZ2V0LWxldmVsIGFjY3VtdWxhdGVkIHJlY29yZHNcbiAgICAgICAgICAgICAgICBpZiAob25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlKFtdKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgLy8gUXVlcnkgcmV0dXJuZWQgbm8gcmVzdWx0cyAtIG5vdGhpbmcgdG8gcmVtb3ZlXG4gICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICAgIGV2ZW50OiAncmVtb3ZlLW1vZGUtbm8tcXVlcnktcmVzdWx0cycsXG4gICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICAgIGV4aXN0aW5nQWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGV4aXN0aW5nUmVjb3Jkc0Zvck1lcmdlLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBub3RlOiAnUXVlcnkgcmV0dXJuZWQgbm8gcmVzdWx0cyAtIG5vIHJlY29yZHMgdG8gcmVtb3ZlJ1xuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAvLyBLZWVwIGV4aXN0aW5nIGFjY3VtdWxhdGVkIHJlY29yZHMgZGlzcGxheWVkXG4gICAgICAgICAgICAgIHJlY29yZHNUb0Rpc3BsYXkgPSBleGlzdGluZ1JlY29yZHNGb3JNZXJnZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgZXZlbnQ6ICdyZW1vdmUtbW9kZS1lcnJvcicsXG4gICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InLFxuICAgICAgICAgICAgICBlcnJvclN0YWNrOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWRcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAvLyBGYWxsIGJhY2sgdG8gc2hvd2luZyBxdWVyeSByZXN1bHRzIG9uIGVycm9yXG4gICAgICAgICAgICByZWNvcmRzVG9EaXNwbGF5ID0gcmVzdWx0LnJlY29yZHMgfHwgW11cbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAocmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uKSB7XG4gICAgICAgICAgLy8gRm9yIFwiTmV3XCIgbW9kZSwgY2xlYXIgd2lkZ2V0LWxldmVsIGFjY3VtdWxhdGVkIHJlY29yZHNcbiAgICAgICAgICBpZiAob25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UpIHtcbiAgICAgICAgICAgIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlKFtdKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmVjb3Jkc1JlZi5jdXJyZW50ID0gcmVjb3Jkc1RvRGlzcGxheVxuICAgICAgICAvLyBSZXNldCBzZWxlY3Rpb24gZmxhZyBmb3IgbmV3IHF1ZXJ5IHJlc3VsdHNcbiAgICAgICAgaGFzU2VsZWN0ZWRSZWNvcmRzUmVmLmN1cnJlbnQgPSBmYWxzZVxuICAgICAgICBcbiAgICAgICAgLy8gU2VsZWN0IHJlY29yZHMgaW4gdGhlIG91dHB1dCBEU1xuICAgICAgICAvLyBGb3IgXCJBZGQgdG9cIiBtb2RlLCBzZWxlY3QgbWVyZ2VkIHJlY29yZHNcbiAgICAgICAgLy8gRm9yIFwiUmVtb3ZlIGZyb21cIiBtb2RlLCBzZWxlY3QgcmVtYWluaW5nIHJlY29yZHMgKGFscmVhZHkgdXBkYXRlZCB2aWEgcmVtb3ZlUmVjb3Jkc0Zyb21PcmlnaW5TZWxlY3Rpb25zKVxuICAgICAgICAvLyBGb3IgXCJOZXdcIiBtb2RlLCBzZWxlY3QgcXVlcnkgcmVzdWx0c1xuICAgICAgICBpZiAocmVjb3Jkc1RvRGlzcGxheSAmJiByZWNvcmRzVG9EaXNwbGF5Lmxlbmd0aCA+IDAgJiYgZHNUb1VzZSkge1xuICAgICAgICAgIGNvbnN0IHJlY29yZElkc1RvU2VsZWN0ID0gcmVjb3Jkc1RvRGlzcGxheS5tYXAocmVjb3JkID0+IHJlY29yZC5nZXRJZCgpKVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIEZvciBcIlJlbW92ZSBmcm9tXCIgbW9kZSwgc2VsZWN0aW9uIHdhcyBhbHJlYWR5IHVwZGF0ZWQgdmlhIHJlbW92ZVJlY29yZHNGcm9tT3JpZ2luU2VsZWN0aW9uc1xuICAgICAgICAgIC8vIEJ1dCB3ZSBzdGlsbCBuZWVkIHRvIHNlbGVjdCBpbiB0aGUgb3V0cHV0RFMgZm9yIHdpZGdldCBzdGF0ZSBjb25zaXN0ZW5jeVxuICAgICAgICAgIGlmIChyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uKSB7XG4gICAgICAgICAgICAvLyBTZWxlY3Rpb24gd2FzIGFscmVhZHkgdXBkYXRlZCBpbiBvcmlnaW4gRFNzIHZpYSByZW1vdmVSZWNvcmRzRnJvbU9yaWdpblNlbGVjdGlvbnNcbiAgICAgICAgICAgIC8vIEp1c3QgdXBkYXRlIG91dHB1dERTIHNlbGVjdGlvbiBmb3Igd2lkZ2V0IHN0YXRlIGNvbnNpc3RlbmN5XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBpZiAodHlwZW9mIGRzVG9Vc2Uuc2VsZWN0UmVjb3Jkc0J5SWRzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgZHNUb1VzZS5zZWxlY3RSZWNvcmRzQnlJZHMocmVjb3JkSWRzVG9TZWxlY3QsIHJlY29yZHNUb0Rpc3BsYXkgYXMgRmVhdHVyZURhdGFSZWNvcmRbXSlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBoYXNTZWxlY3RlZFJlY29yZHNSZWYuY3VycmVudCA9IHRydWVcbiAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgICAgZXZlbnQ6ICdyZW1vdmUtbW9kZS1vdXRwdXQtZHMtc2VsZWN0aW9uLXVwZGF0ZWQnLFxuICAgICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgICByZWNvcmRDb3VudDogcmVjb3Jkc1RvRGlzcGxheS5sZW5ndGhcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICAgIGV2ZW50OiAncmVtb3ZlLW1vZGUtb3V0cHV0LWRzLXNlbGVjdGlvbi1lcnJvcicsXG4gICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ1xuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBGb3IgXCJBZGQgdG9cIiBhbmQgXCJOZXdcIiBtb2Rlcywgc2VsZWN0IHJlY29yZHMgbm9ybWFsbHlcbiAgICAgICAgICAgIHNldFNlbGVjdGlvbkVycm9yKG51bGwpIC8vIENsZWFyIHByZXZpb3VzIGVycm9yc1xuICAgICAgICAgICAgOyhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgc2VsZWN0UmVjb3Jkc0FuZFB1Ymxpc2goXG4gICAgICAgICAgICAgICAgICBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgICAgIGRzVG9Vc2UsXG4gICAgICAgICAgICAgICAgICByZWNvcmRJZHNUb1NlbGVjdCxcbiAgICAgICAgICAgICAgICAgIHJlY29yZHNUb0Rpc3BsYXkgYXMgRmVhdHVyZURhdGFSZWNvcmRbXSxcbiAgICAgICAgICAgICAgICAgIGZhbHNlLFxuICAgICAgICAgICAgICAgICAgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCxcbiAgICAgICAgICAgICAgICAgIGdyYXBoaWNzTGF5ZXIsXG4gICAgICAgICAgICAgICAgICBtYXBWaWV3XG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIGhhc1NlbGVjdGVkUmVjb3Jkc1JlZi5jdXJyZW50ID0gdHJ1ZSAvLyBNYXJrIGFzIHNlbGVjdGVkXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gRGlzcGF0Y2ggY3VzdG9tIHNlbGVjdGlvbiBldmVudCBzbyBXaWRnZXQgc3RhdGUgaXMgdXBkYXRlZCBpbW1lZGlhdGVseVxuICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgY3J1Y2lhbCBmb3IgaGFzaC1iYXNlZCBleGVjdXRpb24gd2hlcmUgUXVlcnlUYXNrIGhhbmRsZXMgc2VsZWN0aW9uXG4gICAgICAgICAgICAgICAgZGlzcGF0Y2hTZWxlY3Rpb25FdmVudChwcm9wcy53aWRnZXRJZCwgcmVjb3JkSWRzVG9TZWxlY3QsIGRzVG9Vc2UsIHF1ZXJ5SXRlbS5jb25maWdJZClcbiAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gc2VsZWN0IHF1ZXJ5IHJlc3VsdHMnXG4gICAgICAgICAgICAgICAgc2V0U2VsZWN0aW9uRXJyb3IoZXJyb3JNZXNzYWdlKVxuICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgICAgICAgICAgICAgIGV2ZW50OiAnc2VsZWN0aW9uLWZhaWxlZCcsXG4gICAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3JNZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgZXJyb3JTdGFjazogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnN0YWNrIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgcmVjb3JkQ291bnQ6IHJlY29yZElkc1RvU2VsZWN0Lmxlbmd0aFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pKClcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAocmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvbiAmJiByZWNvcmRzVG9EaXNwbGF5Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIC8vIEFsbCByZWNvcmRzIHJlbW92ZWQgLSBjbGVhciBzZWxlY3Rpb25cbiAgICAgICAgICA7KGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGF3YWl0IGNsZWFyU2VsZWN0aW9uSW5EYXRhU291cmNlcyhwcm9wcy53aWRnZXRJZCwgZHNUb1VzZSwgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCwgZ3JhcGhpY3NMYXllcilcbiAgICAgICAgICAgICAgaGFzU2VsZWN0ZWRSZWNvcmRzUmVmLmN1cnJlbnQgPSBmYWxzZVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gTm90aWZ5IFdpZGdldCB0aGF0IHNlbGVjdGlvbiBpcyBjbGVhcmVkXG4gICAgICAgICAgICAgIGRpc3BhdGNoU2VsZWN0aW9uRXZlbnQocHJvcHMud2lkZ2V0SWQsIFtdLCBkc1RvVXNlLCBxdWVyeUl0ZW0uY29uZmlnSWQpXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgICBldmVudDogJ3JlbW92ZS1tb2RlLWFsbC1yZWNvcmRzLXJlbW92ZWQtc2VsZWN0aW9uLWNsZWFyZWQnLFxuICAgICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZFxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgICAgZXZlbnQ6ICdyZW1vdmUtbW9kZS1jbGVhci1zZWxlY3Rpb24tZXJyb3InLFxuICAgICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcidcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KSgpXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIE1hcmsgdGhhdCBxdWVyeSBqdXN0IGV4ZWN1dGVkIEJFRk9SRSB1cGRhdGluZyByZXN1bHRDb3VudFxuICAgICAgICAvLyBUaGlzIGVuc3VyZXMgdGhlIGF1dG8tc3dpdGNoIHVzZUVmZmVjdCBzZWVzIHF1ZXJ5SnVzdEV4ZWN1dGVkUmVmLmN1cnJlbnQgPT09IHRydWVcbiAgICAgICAgcXVlcnlKdXN0RXhlY3V0ZWRSZWYuY3VycmVudCA9IHRydWVcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgICAgIGV2ZW50OiAncXVlcnktZXhlY3V0ZWQtZmxhZy1zZXQnLFxuICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICBxdWVyeUl0ZW1Db25maWdJZDogcXVlcnlJdGVtLmNvbmZpZ0lkLFxuICAgICAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgICAgIHJlY29yZHNUb0Rpc3BsYXlDb3VudDogcmVjb3Jkc1RvRGlzcGxheS5sZW5ndGgsXG4gICAgICAgICAgcXVlcnlSZXN1bHRDb3VudCxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfSlcbiAgICAgICAgXG4gICAgICAgIC8vIFVwZGF0ZSByZXN1bHQgY291bnRcbiAgICAgICAgLy8gRm9yIFwiQWRkIHRvXCIgYW5kIFwiUmVtb3ZlIGZyb21cIiBtb2RlcywgdXNlIGFjY3VtdWxhdGVkL3JlbWFpbmluZyBjb3VudFxuICAgICAgICAvLyBGb3IgXCJOZXdcIiBtb2RlLCB1c2UgcXVlcnkgY291bnRcbiAgICAgICAgY29uc3QgbmV3UmVzdWx0Q291bnQgPSByZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbiB8fCByZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uXG4gICAgICAgICAgPyByZWNvcmRzVG9EaXNwbGF5Lmxlbmd0aFxuICAgICAgICAgIDogcXVlcnlSZXN1bHRDb3VudFxuICAgICAgICBcbiAgICAgICAgc2V0UmVzdWx0Q291bnQobmV3UmVzdWx0Q291bnQpXG4gICAgICAgIFxuICAgICAgICAvLyBJTlNUQU5UIFVJIEZJWCAoVGhlIFwiU3Bpbm5lciBCeXBhc3NcIik6IFxuICAgICAgICAvLyBEZWNvdXBsZSB0aGUgXCJSZXRyaWV2aW5nIHJlc3VsdHMuLi5cIiBzcGlubmVyIGZyb20gYXN5bmNocm9ub3VzIGFjdGlvbnMgbGlrZSB6b29taW5nLiBcbiAgICAgICAgLy8gQnkgY2FsbGluZyBzZXRTdGFnZSgxKSBub3csIHRoZSB1c2VyIHNlZXMgdGhlIHJlc3VsdCBsaXN0IGltbWVkaWF0ZWx5IHdoaWxlIFxuICAgICAgICAvLyB0aGUgbWFwIGFuaW1hdGlvbiBjb250aW51ZXMgaW4gdGhlIGJhY2tncm91bmQuXG4gICAgICAgIHNldFN0YWdlKDEpIFxuICAgICAgICBcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgICAgIGV2ZW50OiAncGVyZi1wcm9jZXNzaW5nLWNvbXBsZXRlJyxcbiAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgcHJvY2Vzc2luZ0R1cmF0aW9uTXM6IE1hdGgucm91bmQocGVyZm9ybWFuY2Uubm93KCkgLSBwcm9jZXNzaW5nU3RhcnRUaW1lKSxcbiAgICAgICAgICB0b3RhbENoYWluRHVyYXRpb25NczogTWF0aC5yb3VuZChwZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0VGltZSksXG4gICAgICAgICAgbmV3UmVzdWx0Q291bnQsXG4gICAgICAgICAgcmVzdWx0c01vZGUsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH0pXG5cbiAgICAgICAgLy8gVHJpZ2dlciB0aGUgZXhpc3Rpbmcgem9vbVRvRmVhdHVyZSBkYXRhIGFjdGlvbiAoc2FtZSBhcyBjbGlja2luZyBcIlpvb20gVG9cIiBpbiB0aGUgbWVudSlcbiAgICAgICAgLy8gVXNlIHJ1bnRpbWUgcHJlZmVyZW5jZSBpZiBwcm92aWRlZCwgb3RoZXJ3aXNlIGZhbGwgYmFjayB0byBjb25maWcgc2V0dGluZyAoZGVmYXVsdHMgdG8gdHJ1ZSlcbiAgICAgICAgY29uc3Qgc2hvdWxkWm9vbSA9IHJ1bnRpbWVab29tVG9TZWxlY3RlZCAhPT0gdW5kZWZpbmVkIFxuICAgICAgICAgID8gcnVudGltZVpvb21Ub1NlbGVjdGVkIFxuICAgICAgICAgIDogKHF1ZXJ5SXRlbS56b29tVG9TZWxlY3RlZCAhPT0gZmFsc2UpXG4gICAgICAgIFxuICAgICAgICAvLyBVc2UgdGhlIG91dHB1dCBEUyBhbmQgbWVyZ2VkIHJlY29yZHNcbiAgICAgICAgY29uc3QgcmVjb3Jkc0Zvclpvb20gPSByZWNvcmRzVG9EaXNwbGF5IHx8IHJlc3VsdC5yZWNvcmRzXG4gICAgICAgIGNvbnN0IGRzRm9yWm9vbSA9IGRzVG9Vc2UgfHwgb3V0cHV0RFNcbiAgICAgICAgXG4gICAgICAgIGlmIChyZWNvcmRzRm9yWm9vbSAmJiByZWNvcmRzRm9yWm9vbS5sZW5ndGggPiAwICYmIGRzRm9yWm9vbSAmJiBzaG91bGRab29tKSB7XG4gICAgICAgICAgLy8gQ3JlYXRlIGEgZGF0YSBzZXQgZnJvbSB0aGUgYXBwcm9wcmlhdGUgZGF0YSBzb3VyY2UgYW5kIHJlY29yZHNcbiAgICAgICAgICBjb25zdCBkYXRhU2V0OiBEYXRhUmVjb3JkU2V0ID0ge1xuICAgICAgICAgICAgZGF0YVNvdXJjZTogZHNGb3Jab29tLFxuICAgICAgICAgICAgcmVjb3JkczogcmVjb3Jkc0Zvclpvb20sXG4gICAgICAgICAgICBuYW1lOiBkc0Zvclpvb20uZ2V0TGFiZWwoKVxuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIEdldCBhdmFpbGFibGUgZGF0YSBhY3Rpb25zIGFuZCBmaW5kIHRoZSB6b29tVG9GZWF0dXJlIGFjdGlvblxuICAgICAgICAgIHJldHVybiBEYXRhQWN0aW9uTWFuYWdlci5nZXRJbnN0YW5jZSgpLmdldFN1cHBvcnRlZEFjdGlvbnMocHJvcHMud2lkZ2V0SWQsIFtkYXRhU2V0XSwgRGF0YUxldmVsLlJlY29yZHMpXG4gICAgICAgICAgICAudGhlbihhY3Rpb25DYXRlZ29yaWVzID0+IHtcbiAgICAgICAgICAgICAgLy8gTG9vayBmb3Igem9vbVRvRmVhdHVyZSBhY3Rpb24gaW4gYW55IGNhdGVnb3J5XG4gICAgICAgICAgICAgIGxldCB6b29tQWN0aW9uOiBhbnkgPSBudWxsXG4gICAgICAgICAgICAgIGZvciAoY29uc3QgY2F0ZWdvcnkgaW4gYWN0aW9uQ2F0ZWdvcmllcykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGFjdGlvbnMgPSBhY3Rpb25DYXRlZ29yaWVzW2NhdGVnb3J5XVxuICAgICAgICAgICAgICAgIHpvb21BY3Rpb24gPSBhY3Rpb25zLmZpbmQoKGFjdGlvbjogYW55KSA9PiBhY3Rpb24ubmFtZSA9PT0gJ3pvb21Ub0ZlYXR1cmUnIHx8IGFjdGlvbi5pZCA9PT0gJ3pvb21Ub0ZlYXR1cmUnKVxuICAgICAgICAgICAgICAgIGlmICh6b29tQWN0aW9uKSBicmVha1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgaWYgKHpvb21BY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAvLyBFeGVjdXRlIHRoZSBzYW1lIHpvb20gYWN0aW9uIHRoYXQgd29ya3Mgd2hlbiBjbGlja2VkIG1hbnVhbGx5XG4gICAgICAgICAgICAgICAgcmV0dXJuIERhdGFBY3Rpb25NYW5hZ2VyLmdldEluc3RhbmNlKCkuZXhlY3V0ZURhdGFBY3Rpb24oem9vbUFjdGlvbiwgW2RhdGFTZXRdLCBEYXRhTGV2ZWwuUmVjb3JkcywgcHJvcHMud2lkZ2V0SWQpXG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShmYWxzZSlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0ZhaWxlZCB0byB6b29tIHRvIGZlYXR1cmVzJ1xuICAgICAgICAgICAgICBzZXRab29tRXJyb3IoZXJyb3JNZXNzYWdlKVxuICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1pPT00nLCB7XG4gICAgICAgICAgICAgICAgZXZlbnQ6ICd6b29tLWFjdGlvbi1mYWlsZWQnLFxuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvck1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgZXJyb3JTdGFjazogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnN0YWNrIDogdW5kZWZpbmVkXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGV4ZWN1dGluZyB6b29tVG9GZWF0dXJlIGRhdGEgYWN0aW9uJywgZXJyb3IpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShmYWxzZSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0cnVlKVxuICAgICAgfSlcbiAgICAgIC5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgICAgICBldmVudDogJ3F1ZXJ5LWNoYWluLWZhaWxlZC1kaWFnbm9zdGljJyxcbiAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSxcbiAgICAgICAgICBlcnJvclN0YWNrOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWQsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH0pXG4gICAgICAgIHNldFN0YWdlKDEpIC8vIFJldHVybiB0byByZXN1bHRzIG9yIGZvcm0gc3RhZ2UgZXZlbiBvbiBlcnJvclxuICAgICAgfSlcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgaWYgKHNwYXRpYWxGaWx0ZXI/LmxheWVyICYmIHNwYXRpYWxGaWx0ZXI/LmNsZWFyQWZ0ZXJBcHBseSkge1xuICAgICAgICAgIHNwYXRpYWxGaWx0ZXIubGF5ZXIucmVtb3ZlQWxsKClcbiAgICAgICAgfVxuICAgICAgICAvLyBzZXRTdGFnZSgxKSAvLyBSZW1vdmVkIGZyb20gaGVyZTsgbm93IGNhbGxlZCBpbiB0aGUgbWFpbiBjaGFpbiBiZWZvcmUgYmFja2dyb3VuZCBhY3Rpb25zXG4gICAgICB9KVxuICB9LCBbY3VycmVudEl0ZW0sIHF1ZXJ5SXRlbSwgcHJvcHMud2lkZ2V0SWQsIG91dHB1dERTLCBwdWJsaXNoRGF0YUNsZWFyZWRNc2csIGNsZWFyUmVzdWx0LCByZXN1bHRzTW9kZSwgYWNjdW11bGF0ZWRSZWNvcmRzLCBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZSwgb25DbGVhckdyYXBoaWNzTGF5ZXJdKVxuXG4gIGNvbnN0IHsgdXNlQXR0cmlidXRlRmlsdGVyLCBzcWxFeHByT2JqLCB1c2VTcGF0aWFsRmlsdGVyLCBzcGF0aWFsRmlsdGVyVHlwZXMsIHNwYXRpYWxJbmNsdWRlUnVudGltZURhdGEsIHNwYXRpYWxSZWxhdGlvblVzZURhdGFTb3VyY2VzfSA9IGN1cnJlbnRJdGVtXG4gIGNvbnN0IHNob3dBdHRyaWJ1dGVGaWx0ZXIgPSB1c2VBdHRyaWJ1dGVGaWx0ZXIgJiYgc3FsRXhwck9iaiAhPSBudWxsXG4gIGNvbnN0IHNob3dTcGF0aWFsRmlsdGVyID0gc3BhdGlhbEZpbHRlckVuYWJsZWQgJiYgdXNlU3BhdGlhbEZpbHRlciAmJiAoc3BhdGlhbEZpbHRlclR5cGVzLmxlbmd0aCA+IDAgfHwgc3BhdGlhbEluY2x1ZGVSdW50aW1lRGF0YSB8fCBzcGF0aWFsUmVsYXRpb25Vc2VEYXRhU291cmNlcz8ubGVuZ3RoID4gMClcblxuICAvLyBERVRFQ1QgU1dJVENIIElOIFJFTkRFUlxuICBjb25zdCBpc1N3aXRjaGluZ1F1ZXJpZXMgPSBwcmV2aW91c0NvbmZpZ0lkUmVmLmN1cnJlbnQgIT09IHF1ZXJ5SXRlbS5jb25maWdJZFxuICBjb25zdCBpc1ZpcnR1YWxDbGVhckFjdGl2ZSA9IGlzU3dpdGNoaW5nUXVlcmllcyAmJiByZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb25cbiAgXG4gIC8vIFVzZSB0aGVzZSBcImVmZmVjdGl2ZVwiIHZhbHVlcyBmb3IgdGhlIFVJXG4gIGNvbnN0IGVmZmVjdGl2ZVJlc3VsdENvdW50ID0gaXNWaXJ0dWFsQ2xlYXJBY3RpdmUgPyAwIDogcmVzdWx0Q291bnRcbiAgY29uc3QgZWZmZWN0aXZlUmVjb3JkcyA9IGlzVmlydHVhbENsZWFyQWN0aXZlID8gW10gOiAocmVjb3Jkc1JlZi5jdXJyZW50IHx8IFtdKVxuXG4gIC8vIENyZWF0ZSBhIHVuaXF1ZSBrZXkgZm9yIHRoZSBjdXJyZW50IHF1ZXJ5IHJlc3VsdCBzZXQgdG8gaGVscCBFMkUgdGVzdHMgZGV0ZWN0IGZyZXNoIGRhdGFcbiAgY29uc3QgcmVzdWx0UXVlcnlLZXkgPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICByZXR1cm4gYCR7cXVlcnlJdGVtLmNvbmZpZ0lkfV8ke0RhdGUubm93KCl9YFxuICB9LCBbcXVlcnlJdGVtLmNvbmZpZ0lkLCByZXN1bHRDb3VudF0pXG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT17Y2xhc3NOYW1lcygncXVlcnktdGFzayBoLTEwMCcsIGNsYXNzTmFtZSwgeyB3cmFwcGVkOiB3cmFwcGVkSW5Qb3BwZXIgfSl9IFxuICAgICAgZGF0YS1yZXN1bHQtcXVlcnkta2V5PXtyZXN1bHRRdWVyeUtleX1cbiAgICAgIGNzcz17Y3NzYFxuICAgICAgJHtzdHlsZX1cbiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICBgfT5cbiAgICAgIDxEYXRhU291cmNlQ29tcG9uZW50IHVzZURhdGFTb3VyY2U9e3VzZU91dHB1dERzfSBvbkRhdGFTb3VyY2VDcmVhdGVkPXtoYW5kbGVPdXRwdXREYXRhU291cmNlQ3JlYXRlZH0gb25EYXRhU291cmNlSW5mb0NoYW5nZT17aGFuZGxlT3V0cHV0RGF0YVNvdXJjZUluZm9DaGFuZ2V9Lz5cbiAgICAgIFxuICAgICAgey8qIFRhYiBOYXZpZ2F0aW9uIC0gTW92ZWQgdG8gdG9wICovfVxuICAgICAgPFRhYnNcbiAgICAgICAgdmFsdWU9e2FjdGl2ZVRhYn1cbiAgICAgICAgb25DaGFuZ2U9eyhpZCkgPT4gaGFuZGxlVGFiQ2hhbmdlKGlkIGFzICdxdWVyeScgfCAncmVzdWx0cycpfVxuICAgICAgICBmaWxsPXt0cnVlfVxuICAgICAgICB0eXBlPSd1bmRlcmxpbmUnXG4gICAgICAgIGtlZXBNb3VudD17dHJ1ZX1cbiAgICAgICAgY3NzPXtjc3NgXG4gICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgICBtaW4taGVpZ2h0OiAwO1xuICAgICAgICBgfVxuICAgICAgPlxuICAgICAgICA8VGFiXG4gICAgICAgICAgaWQ9J3F1ZXJ5J1xuICAgICAgICAgIHRpdGxlPXtnZXRJMThuTWVzc2FnZSgncXVlcnlUYWInKX1cbiAgICAgICAgPlxuICAgICAgICAgIDxkaXYgXG4gICAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ3F1ZXJ5LXRhc2tfX2NvbnRlbnQnLCB7XG4gICAgICAgICAgICAgIFtGT0NVU0FCTEVfQ09OVEFJTkVSX0NMQVNTXTogaXNJblBvcHBlciAmJiBhY3RpdmVUYWIgPT09ICdxdWVyeSdcbiAgICAgICAgICAgIH0pfSBcbiAgICAgICAgICAgIGNzcz17Y3NzYFxuICAgICAgICAgICAgICBmbGV4OiAxO1xuICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICAgICAgICBtaW4taGVpZ2h0OiAwO1xuICAgICAgICAgICAgICBwYWRkaW5nLXRvcDogMCAhaW1wb3J0YW50O1xuICAgICAgICAgICAgYH1cbiAgICAgICAgICA+XG4gICAgICAgICAgICB7LyogSGVhZGVyIHdpdGggYmFjayBidXR0b24gYW5kIHF1ZXJ5IGxhYmVsIC0gUXVlcnkgdGFiIG9ubHkgKi99XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17Y2xhc3NOYW1lcygncXVlcnktZm9ybV9faGVhZGVyIG14LTQgYWxpZ24taXRlbXMtY2VudGVyJywgeyAnaW4tcG9wcGVyJzogaXNJblBvcHBlciB9KX0gY3NzPXtjc3NgXG4gICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgIHBhZGRpbmc6IDZweCAwO1xuICAgICAgICAgICAgICBwYWRkaW5nLXRvcDogOHB4O1xuICAgICAgICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tc3lzLWNvbG9yLWRpdmlkZXItc2Vjb25kYXJ5KTtcbiAgICAgICAgICAgICAgZmxleC1zaHJpbms6IDA7XG4gICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ25hdi1hY3Rpb24gYWxpZ24taXRlbXMtY2VudGVyJywgeyAnZC1ub25lJzogd3JhcHBlZEluUG9wcGVyIH0pfSBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICBmbGV4OiAxIDEgMDtcbiAgICAgICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICAgICAgICBnYXA6IDRweDtcbiAgICAgICAgICAgICAgICAuamltdS1idG4ge1xuICAgICAgICAgICAgICAgICAgbWluLXdpZHRoOiAyNnB4O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdwLTAgbXItMicsIHsgJ2Qtbm9uZSc6IHRvdGFsID09PSAxIHx8ICFvbk5hdkJhY2sgfSl9XG4gICAgICAgICAgICAgICAgICBzaXplPSdzbSdcbiAgICAgICAgICAgICAgICAgIHR5cGU9J3RlcnRpYXJ5J1xuICAgICAgICAgICAgICAgICAgaWNvblxuICAgICAgICAgICAgICAgICAgb25DbGljaz17b25OYXZCYWNrfVxuICAgICAgICAgICAgICAgICAgYXJpYS1sYWJlbD17Z2V0STE4bk1lc3NhZ2UoJ2JhY2snKX1cbiAgICAgICAgICAgICAgICAgIHJlZj17YmFja0J0blJlZn1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICA8QXJyb3dMZWZ0T3V0bGluZWQgYXV0b0ZsaXAvPlxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgIDxRdWVyeVRhc2tMYWJlbCBpY29uPXtpY29ufSBuYW1lPXtkaXNwbGF5TGFiZWwgPyBuYW1lIDogJyd9IC8+XG4gICAgICAgICAgICAgICAgey8qIEhhc2ggcGFyYW1ldGVyIGluZm8gYnV0dG9uIC0gc2hvd3MgcXVlcmllcyBmcm9tIHNhbWUgbGF5ZXIgd2l0aCBzaG9ydElkcyAqL31cbiAgICAgICAgICAgICAgICB7KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgIGlmICghcXVlcnlJdGVtcyB8fCBxdWVyeUl0ZW1zLmxlbmd0aCA8PSAxKSByZXR1cm4gbnVsbFxuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAvLyBHZXQgY3VycmVudCBxdWVyeSdzIG9yaWdpbiBkYXRhIHNvdXJjZSBJRFxuICAgICAgICAgICAgICAgICAgY29uc3QgY3VycmVudE9yaWdpbkRTSWQgPSBxdWVyeUl0ZW0udXNlRGF0YVNvdXJjZT8uZGF0YVNvdXJjZUlkXG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIGlmICghY3VycmVudE9yaWdpbkRTSWQpIHJldHVybiBudWxsXG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIC8vIEZpbmQgYWxsIHF1ZXJpZXMgZnJvbSB0aGUgc2FtZSBvcmlnaW4gZGF0YSBzb3VyY2UgdGhhdCBoYXZlIHNob3J0SWRzXG4gICAgICAgICAgICAgICAgICBjb25zdCBzYW1lTGF5ZXJRdWVyaWVzID0gcXVlcnlJdGVtcy5maWx0ZXIoaXRlbSA9PiBcbiAgICAgICAgICAgICAgICAgICAgaXRlbS51c2VEYXRhU291cmNlPy5kYXRhU291cmNlSWQgPT09IGN1cnJlbnRPcmlnaW5EU0lkICYmIFxuICAgICAgICAgICAgICAgICAgICBpdGVtLnNob3J0SWQgJiYgXG4gICAgICAgICAgICAgICAgICAgIGl0ZW0uc2hvcnRJZC50cmltKCkgIT09ICcnXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIC8vIE9ubHkgc2hvdyBpbmZvIGJ1dHRvbiBpZiB0aGVyZSBhcmUgcXVlcmllcyB3aXRoIHNob3J0SWRzXG4gICAgICAgICAgICAgICAgICBpZiAoc2FtZUxheWVyUXVlcmllcy5sZW5ndGggPT09IDApIHJldHVybiBudWxsXG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIC8vIEJ1aWxkIHRvb2x0aXAgY29udGVudFxuICAgICAgICAgICAgICAgICAgY29uc3QgcXVlcnlMaW5lcyA9IHNhbWVMYXllclF1ZXJpZXMubWFwKGl0ZW0gPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBxdWVyeU5hbWUgPSBnZXRRdWVyeURpc3BsYXlOYW1lKGl0ZW0pXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBgJHtxdWVyeU5hbWV9OiAjJHtpdGVtLnNob3J0SWR9PXZhbHVlIG9yID8ke2l0ZW0uc2hvcnRJZH09dmFsdWVgXG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICBjb25zdCB0b29sdGlwVGl0bGUgPSBgVGhpcyBsYXllciBjYW4gYmUgc2VhcmNoZWQgdXNpbmcgdGhlIHNob3J0SWRzICR7c2FtZUxheWVyUXVlcmllcy5tYXAocSA9PiBxLnNob3J0SWQpLmpvaW4oJyBhbmQgJyl9IHVzaW5nICNzaG9ydElkPXZhbHVlIG9yID9zaG9ydElkPXZhbHVlIGluIHRoZSBVUkwuXFxuXFxuJHtxdWVyeUxpbmVzLmpvaW4oJ1xcbicpfWBcbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgPFRvb2x0aXAgXG4gICAgICAgICAgICAgICAgICAgICAgcGxhY2VtZW50PSdib3R0b20nIFxuICAgICAgICAgICAgICAgICAgICAgIGNzcz17Y3NzYHdoaXRlLXNwYWNlOiBwcmUtbGluZTtgfSBcbiAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17dG9vbHRpcFRpdGxlfVxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiBcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpemU9J3NtJyBcbiAgICAgICAgICAgICAgICAgICAgICAgIGljb24gXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlPSd0ZXJ0aWFyeScgXG4gICAgICAgICAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPSdIYXNoIHBhcmFtZXRlciBzZWFyY2ggaW5mb3JtYXRpb24nXG4gICAgICAgICAgICAgICAgICAgICAgICBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZmxleC1zaHJpbms6IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxJbmZvT3V0bGluZWQgY29sb3I9J3ZhcigtLXN5cy1jb2xvci1wcmltYXJ5LW1haW4pJyBzaXplPSdzJy8+XG4gICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICB9KSgpfVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAge2VmZmVjdGl2ZVJlc3VsdENvdW50ID4gMCAmJiAoXG4gICAgICAgICAgICAgICAgPFRvb2x0aXAgdGl0bGU9e2dldEkxOG5NZXNzYWdlKCdjbGVhclJlc3VsdCcpfSBwbGFjZW1lbnQ9J2JvdHRvbSc+XG4gICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIHJlZj17Y2xlYXJSZXN1bHRCdG5SZWZ9XG4gICAgICAgICAgICAgICAgICAgIHNpemU9J3NtJ1xuICAgICAgICAgICAgICAgICAgICB0eXBlPSd0ZXJ0aWFyeSdcbiAgICAgICAgICAgICAgICAgICAgYXJpYS1sYWJlbD17Z2V0STE4bk1lc3NhZ2UoJ2NsZWFyUmVzdWx0Jyl9XG4gICAgICAgICAgICAgICAgICAgIGljb25cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdtbC1hdXRvIHB5LTAnXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2NsZWFyUmVzdWx0fVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8VHJhc2hPdXRsaW5lZCAvPlxuICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgPC9Ub29sdGlwPlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICB7LyogU2VhcmNoIExheWVyIC8gR3JvdXAgZHJvcGRvd25zIC0gc2hvdyBiYXNlZCBvbiBncm91cGluZyAqL31cbiAgICAgICAgICAgIHsoKCkgPT4ge1xuICAgICAgICAgICAgICAvLyBPbmx5IHNob3cgZHJvcGRvd25zIGlmIG11bHRpcGxlIHF1ZXJpZXMgZXhpc3RcbiAgICAgICAgICAgICAgaWYgKCFxdWVyeUl0ZW1zIHx8IHF1ZXJ5SXRlbXMubGVuZ3RoIDw9IDEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBCdWlsZCBmbGF0IGxpc3Qgb2YgYWxsIHF1ZXJpZXMgd2l0aCB0aGVpciBkaXNwbGF5IGluZm9cbiAgICAgICAgICAgICAgLy8gRm9yIGdyb3VwZWQgcXVlcmllcywgdXNlIGdyb3VwIGRpc3BsYXkgbmFtZSAob25seSBzaG93IG9uY2UgcGVyIGdyb3VwKVxuICAgICAgICAgICAgICBjb25zdCBxdWVyeU9wdGlvbnM6IEFycmF5PHtcbiAgICAgICAgICAgICAgICBjb25maWdJZDogc3RyaW5nXG4gICAgICAgICAgICAgICAgZGlzcGxheU5hbWU6IHN0cmluZ1xuICAgICAgICAgICAgICAgIGdyb3VwSWQ6IHN0cmluZyB8IG51bGxcbiAgICAgICAgICAgICAgICBpbmRleDogbnVtYmVyXG4gICAgICAgICAgICAgIH0+ID0gW11cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIFRyYWNrIHdoaWNoIGdyb3VwcyB3ZSd2ZSBhbHJlYWR5IGFkZGVkIHRvIGF2b2lkIGR1cGxpY2F0ZXNcbiAgICAgICAgICAgICAgY29uc3QgYWRkZWRHcm91cHMgPSBuZXcgU2V0PHN0cmluZz4oKVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgcXVlcnlJdGVtcy5mb3JFYWNoKChpdGVtLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS5ncm91cElkKSB7XG4gICAgICAgICAgICAgICAgICAvLyBGb3IgZ3JvdXBlZCBxdWVyaWVzLCB1c2UgZ3JvdXAgZGlzcGxheSBuYW1lIChvbmx5IGFkZCBvbmNlIHBlciBncm91cClcbiAgICAgICAgICAgICAgICAgIGlmICghYWRkZWRHcm91cHMuaGFzKGl0ZW0uZ3JvdXBJZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgYWRkZWRHcm91cHMuYWRkKGl0ZW0uZ3JvdXBJZClcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZ3JvdXBEaXNwbGF5TmFtZSA9IGdyb3Vwcz8uW2l0ZW0uZ3JvdXBJZF0/LmRpc3BsYXlOYW1lIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyb3Vwcz8uW2l0ZW0uZ3JvdXBJZF0/Lml0ZW1zWzBdPy5uYW1lIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0ubmFtZSB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgR3JvdXAgJHtpdGVtLmdyb3VwSWR9YFxuICAgICAgICAgICAgICAgICAgICBxdWVyeU9wdGlvbnMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgY29uZmlnSWQ6IGl0ZW0uY29uZmlnSWQsXG4gICAgICAgICAgICAgICAgICAgICAgZGlzcGxheU5hbWU6IGdyb3VwRGlzcGxheU5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgZ3JvdXBJZDogaXRlbS5ncm91cElkLFxuICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiBpZHhcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgLy8gVW5ncm91cGVkIHF1ZXJ5IC0gdXNlIGl0ZW0ubmFtZSBmb3IgZmlyc3QgZHJvcGRvd24gKG5vdCBzZWFyY2hBbGlhcy9qaW11RmllbGROYW1lKVxuICAgICAgICAgICAgICAgICAgcXVlcnlPcHRpb25zLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBjb25maWdJZDogaXRlbS5jb25maWdJZCxcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheU5hbWU6IGl0ZW0ubmFtZSB8fCBnZXRRdWVyeURpc3BsYXlOYW1lKGl0ZW0pLFxuICAgICAgICAgICAgICAgICAgICBncm91cElkOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBpbmRleDogaWR4XG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIERldGVybWluZSBjdXJyZW50bHkgc2VsZWN0ZWQgcXVlcnlcbiAgICAgICAgICAgICAgY29uc3QgY3VycmVudFF1ZXJ5SXRlbSA9IHF1ZXJ5SXRlbVxuICAgICAgICAgICAgICBjb25zdCBjdXJyZW50UXVlcnlHcm91cElkID0gY3VycmVudFF1ZXJ5SXRlbS5ncm91cElkIHx8IG51bGxcbiAgICAgICAgICAgICAgY29uc3QgaXNHcm91cGVkUXVlcnkgPSBjdXJyZW50UXVlcnlHcm91cElkICE9PSBudWxsXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBGaW5kIHRoZSBvcHRpb24gaW5kZXggZm9yIHRoZSBjdXJyZW50IHF1ZXJ5XG4gICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRPcHRpb25JbmRleCA9IHF1ZXJ5T3B0aW9ucy5maW5kSW5kZXgob3B0ID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoaXNHcm91cGVkUXVlcnkpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBvcHQuZ3JvdXBJZCA9PT0gY3VycmVudFF1ZXJ5R3JvdXBJZFxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gb3B0LmNvbmZpZ0lkID09PSBjdXJyZW50UXVlcnlJdGVtLmNvbmZpZ0lkXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgICAgICAgICBldmVudDogJ3JlbmRlcmluZy1kcm9wZG93bnMnLFxuICAgICAgICAgICAgICAgIHRvdGFsUXVlcmllczogcXVlcnlJdGVtcy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgcXVlcnlPcHRpb25zQ291bnQ6IHF1ZXJ5T3B0aW9ucy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgY3VycmVudFF1ZXJ5R3JvdXBJZCxcbiAgICAgICAgICAgICAgICBpc0dyb3VwZWRRdWVyeSxcbiAgICAgICAgICAgICAgICBjdXJyZW50T3B0aW9uSW5kZXgsXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRHcm91cElkLFxuICAgICAgICAgICAgICAgIHNlbGVjdGVkR3JvdXBRdWVyeUluZGV4LFxuICAgICAgICAgICAgICAgIGN1cnJlbnRRdWVyeUNvbmZpZ0lkOiBjdXJyZW50UXVlcnlJdGVtLmNvbmZpZ0lkXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxSZWFjdC5GcmFnbWVudD5cbiAgICAgICAgICAgICAgICAgIHsvKiBGaXJzdCBEcm9wZG93bjogQWxsIHF1ZXJpZXMgKi99XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiA0cHggMTZweDtcbiAgICAgICAgICAgICAgICAgICAgZmxleC1zaHJpbms6IDA7XG4gICAgICAgICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC44NzVyZW07XG4gICAgICAgICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogdmFyKC0tc3lzLWNvbG9yLXRleHQtcHJpbWFyeSk7XG4gICAgICAgICAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogNHB4O1xuICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICAgICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgICAgICAgICB7Z2V0STE4bk1lc3NhZ2UoJ3NlYXJjaExheWVyJyl9XG4gICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgIDxTZWxlY3QgXG4gICAgICAgICAgICAgICAgICAgICAgc2l6ZT1cInNtXCJcbiAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17Y3VycmVudE9wdGlvbkluZGV4ID49IDAgPyBjdXJyZW50T3B0aW9uSW5kZXggOiAwfVxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXthc3luYyAoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3B0aW9uSW5kZXggPSBwYXJzZUludChlLnRhcmdldC52YWx1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkT3B0aW9uID0gcXVlcnlPcHRpb25zW29wdGlvbkluZGV4XVxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudDogJ3F1ZXJ5LW9wdGlvbi1zZWxlY3RlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbkluZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZE9wdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaXNHcm91cGVkOiBzZWxlY3RlZE9wdGlvbi5ncm91cElkICE9PSBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBTVEFSVCBDTEVBUklORyBJTU1FRElBVEVMWSBJRiBTV0lUQ0hJTkdcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgY2xlYXJSZXN1bHQoJ2Ryb3Bkb3duLWxheWVyLXN3aXRjaC1uZXctbW9kZScpXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZE9wdGlvbi5ncm91cElkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEdyb3VwZWQgcXVlcnkgc2VsZWN0ZWQgLSBzZXQgZ3JvdXAgYW5kIGZpcnN0IHF1ZXJ5IGluIGdyb3VwXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvbkdyb3VwQ2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Hcm91cENoYW5nZShzZWxlY3RlZE9wdGlvbi5ncm91cElkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvbkdyb3VwUXVlcnlDaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkdyb3VwUXVlcnlDaGFuZ2UoMClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVW5ncm91cGVkIHF1ZXJ5IHNlbGVjdGVkIC0gY2xlYXIgZ3JvdXAgc2VsZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvbkdyb3VwQ2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Hcm91cENoYW5nZShudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvblVuZ3JvdXBlZENoYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpbmQgdGhlIHVuZ3JvdXBlZCBpbmRleFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHVuZ3JvdXBlZEluZGV4ID0gdW5ncm91cGVkPy5maW5kSW5kZXgoKHsgaXRlbSB9KSA9PiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uY29uZmlnSWQgPT09IHNlbGVjdGVkT3B0aW9uLmNvbmZpZ0lkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA/PyAtMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1bmdyb3VwZWRJbmRleCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblVuZ3JvdXBlZENoYW5nZSh1bmdyb3VwZWRJbmRleClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmFsbGJhY2s6IHVzZSB0aGUgaW5kZXggZnJvbSBxdWVyeUl0ZW1zXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudDogJ3VuZ3JvdXBlZC1mYWxsYmFjay10by1pbmRleCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkT3B0aW9uSW5kZXg6IHNlbGVjdGVkT3B0aW9uLmluZGV4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9uUXVlcnlDaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25RdWVyeUNoYW5nZShzZWxlY3RlZE9wdGlvbi5pbmRleClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAge3F1ZXJ5T3B0aW9ucy5tYXAoKG9wdGlvbiwgaWR4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudDogJ3JlbmRlcmluZy1xdWVyeS1vcHRpb24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogaWR4LFxuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maWdJZDogb3B0aW9uLmNvbmZpZ0lkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5TmFtZTogb3B0aW9uLmRpc3BsYXlOYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cElkOiBvcHRpb24uZ3JvdXBJZFxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24ga2V5PXtvcHRpb24uY29uZmlnSWR9IHZhbHVlPXtpZHh9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtvcHRpb24uZGlzcGxheU5hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvb3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICB7LyogU2Vjb25kIERyb3Bkb3duOiBRdWVyaWVzIHdpdGhpbiBzZWxlY3RlZCBncm91cCAob25seSBpZiBncm91cGVkIHF1ZXJ5IHNlbGVjdGVkKSAqL31cbiAgICAgICAgICAgICAgICAgIHtpc0dyb3VwZWRRdWVyeSAmJiBjdXJyZW50UXVlcnlHcm91cElkICYmIGdyb3VwcyAmJiBncm91cHNbY3VycmVudFF1ZXJ5R3JvdXBJZF0gJiYgKFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDRweCAxNnB4O1xuICAgICAgICAgICAgICAgICAgICAgIGZsZXgtc2hyaW5rOiAwO1xuICAgICAgICAgICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDAuODc1cmVtO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS1zeXMtY29sb3ItdGV4dC1wcmltYXJ5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDRweDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICAgICAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICAgICAgICAgICAgU2VhcmNoIEFsaWFzXG4gICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0IFxuICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZT1cInNtXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtzZWxlY3RlZEdyb3VwUXVlcnlJbmRleCAhPT0gdW5kZWZpbmVkID8gc2VsZWN0ZWRHcm91cFF1ZXJ5SW5kZXggOiAwfVxuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e2FzeW5jIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0luZGV4ID0gcGFyc2VJbnQoZS50YXJnZXQudmFsdWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdncm91cC1xdWVyeS1zZWxlY3RlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBJZDogY3VycmVudFF1ZXJ5R3JvdXBJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cFF1ZXJ5SW5kZXg6IG5ld0luZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBncm91cHNbY3VycmVudFF1ZXJ5R3JvdXBJZF0uaXRlbXNbbmV3SW5kZXhdPy5jb25maWdJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWVyeURpc3BsYXlOYW1lOiBnZXRRdWVyeURpc3BsYXlOYW1lKGdyb3Vwc1tjdXJyZW50UXVlcnlHcm91cElkXS5pdGVtc1tuZXdJbmRleF0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU1RBUlQgQ0xFQVJJTkcgSU1NRURJQVRFTFkgSUYgU1dJVENISU5HXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBjbGVhclJlc3VsdCgnZHJvcGRvd24tYWxpYXMtc3dpdGNoLW5ldy1tb2RlJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvbkdyb3VwUXVlcnlDaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkdyb3VwUXVlcnlDaGFuZ2UobmV3SW5kZXgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAge2dyb3Vwc1tjdXJyZW50UXVlcnlHcm91cElkXS5pdGVtcy5tYXAoKGl0ZW0sIGlkeCkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIGtleT17aXRlbS5jb25maWdJZH0gdmFsdWU9e2lkeH0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2dldFF1ZXJ5RGlzcGxheU5hbWUoaXRlbSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvb3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICA8L1JlYWN0LkZyYWdtZW50PlxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9KSgpfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB7LyogUmVzdWx0cyBNb2RlIEJ1dHRvbiBHcm91cCAtIEFsd2F5cyBzaG93LCByZWdhcmRsZXNzIG9mIHF1ZXJ5IGNvdW50ICovfVxuICAgICAgICAgICAgPGRpdiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogOHB4IDE2cHg7XG4gICAgICAgICAgICAgICAgICAgIGZsZXgtc2hyaW5rOiAwO1xuICAgICAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlclwiIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgICAgICAgIGdhcDogMC41cmVtO1xuICAgICAgICAgICAgICAgICAgICAgIGZsZXgtd3JhcDogbm93cmFwO1xuICAgICAgICAgICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgICAgICAgICB7LyogUmVzdWx0cyBsYWJlbCBhbmQgaW5mbyBidXR0b24gKi99XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0aXRsZTJcIiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC44NzVyZW07XG4gICAgICAgICAgICAgICAgICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHZhcigtLXN5cy1jb2xvci10ZXh0LXByaW1hcnkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZsZXgtc2hyaW5rOiAwO1xuICAgICAgICAgICAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICAgICAgICAgICAge2dldEkxOG5NZXNzYWdlKCdyZXN1bHRzJyl9OlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIDxUb29sdGlwIHBsYWNlbWVudD0nYm90dG9tJyBjc3M9e2Nzc2B3aGl0ZS1zcGFjZTogcHJlLWxpbmU7YH0gdGl0bGU9e2dldEkxOG5NZXNzYWdlKCdyZXN1bHRzTW9kZURlc2MnKX0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIHNpemU9J3NtJyBpY29uIHR5cGU9J3RlcnRpYXJ5JyBhcmlhLWxhYmVsPXtnZXRJMThuTWVzc2FnZSgncmVzdWx0c01vZGVEZXNjJyl9IGNzcz17Y3NzYGZsZXgtc2hyaW5rOiAwO2B9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5mb091dGxpbmVkIGNvbG9yPSd2YXIoLS1zeXMtY29sb3ItcHJpbWFyeS1tYWluKScgc2l6ZT0ncycvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgPC9Ub29sdGlwPlxuICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgIHsvKiBNb2RlIGJ1dHRvbnMgKi99XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvbGU9XCJyYWRpb2dyb3VwXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9e2dldEkxOG5NZXNzYWdlKCdyZXN1bHRzTW9kZScpfVxuICAgICAgICAgICAgICAgICAgICAgICAgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGdhcDogNHB4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogc3RyZXRjaDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbWluLXdpZHRoOiAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZT1cInNtXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhbnQ9e3Jlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvbiA/ICdjb250YWluZWQnIDogJ291dGxpbmVkJ31cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yPXtyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb24gPyAncHJpbWFyeScgOiAnZGVmYXVsdCd9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld01vZGUgPSBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudDogJ2J1dHRvbi1tb2RlLWNoYW5nZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWVyeUl0ZW1Db25maWdJZDogcXVlcnlJdGVtLmNvbmZpZ0lkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzTW9kZTogcmVzdWx0c01vZGUgfHwgU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3TW9kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob25SZXN1bHRzTW9kZUNoYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uUmVzdWx0c01vZGVDaGFuZ2UobmV3TW9kZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGFyaWEtcHJlc3NlZD17cmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9ufVxuICAgICAgICAgICAgICAgICAgICAgICAgYXJpYS1sYWJlbD17YCR7Z2V0STE4bk1lc3NhZ2UoJ2NyZWF0ZU5ld1Jlc3VsdHMnKX06ICR7Z2V0STE4bk1lc3NhZ2UoJ3Jlc3VsdHNNb2RlRGVzYycpLnNwbGl0KCdcXG4nKVsxXT8udHJpbSgpIHx8ICcnfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17Z2V0STE4bk1lc3NhZ2UoJ2NyZWF0ZU5ld1Jlc3VsdHMnKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgICAgICAgICAgICBmbGV4OiAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDAuNzVyZW07XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDRweCA4cHg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDI4cHg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICB7Z2V0STE4bk1lc3NhZ2UoJ3Jlc3VsdHNNb2RlTmV3Jyl9XG4gICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZT1cInNtXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhbnQ9e3Jlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uID8gJ2NvbnRhaW5lZCcgOiAnb3V0bGluZWQnfVxuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I9e3Jlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uID8gJ3ByaW1hcnknIDogJ2RlZmF1bHQnfVxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdNb2RlID0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwcmV2aW91c01vZGUgPSByZXN1bHRzTW9kZSB8fCBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdidXR0b24tbW9kZS1jaGFuZ2VkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c01vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3TW9kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgc3dpdGNoaW5nIEZST00gXCJOZXdcIiBUTyBcIkFkZCB0b1wiIG1vZGUgYW5kIHdlIGhhdmUgY3VycmVudCByZXN1bHRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBtZXJnZSB0aGVtIHdpdGggZXhpc3RpbmcgYWNjdW11bGF0ZWQgcmVjb3JkcyBiZWZvcmUgY2hhbmdpbmcgbW9kZVxuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZWNvcmRzVG9DYXB0dXJlID0gKGVmZmVjdGl2ZVJlY29yZHMgJiYgZWZmZWN0aXZlUmVjb3Jkcy5sZW5ndGggPiAwKSBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IChlZmZlY3RpdmVSZWNvcmRzIGFzIEZlYXR1cmVEYXRhUmVjb3JkW10pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAob3V0cHV0RFM/LmdldFNlbGVjdGVkUmVjb3JkcygpIGFzIEZlYXR1cmVEYXRhUmVjb3JkW10gfHwgW10pXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByZXZpb3VzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb24gJiYgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWNvcmRzVG9DYXB0dXJlLmxlbmd0aCA+IDAgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dERTICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nQWNjdW11bGF0ZWQgPSBhY2N1bXVsYXRlZFJlY29yZHMgfHwgW11cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBNZXJnZSBjdXJyZW50IHJlc3VsdHMgd2l0aCBleGlzdGluZyBhY2N1bXVsYXRlZCByZWNvcmRzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWVyZ2VkUmVjb3JkcyA9IG1lcmdlUmVzdWx0c0ludG9BY2N1bXVsYXRlZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dERTIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWNvcmRzVG9DYXB0dXJlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmdBY2N1bXVsYXRlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50OiAnY2FwdHVyaW5nLWN1cnJlbnQtcmVzdWx0cy1vbi1tb2RlLXN3aXRjaCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c01vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdNb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FwdHVyZWRSZWNvcmRzQ291bnQ6IHJlY29yZHNUb0NhcHR1cmUubGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmdBY2N1bXVsYXRlZENvdW50OiBleGlzdGluZ0FjY3VtdWxhdGVkLmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lcmdlZFJlY29yZHNDb3VudDogbWVyZ2VkUmVjb3Jkcy5sZW5ndGhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlKG1lcmdlZFJlY29yZHMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvblJlc3VsdHNNb2RlQ2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25SZXN1bHRzTW9kZUNoYW5nZShuZXdNb2RlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgYXJpYS1wcmVzc2VkPXtyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9e2Ake2dldEkxOG5NZXNzYWdlKCdhZGRUb0N1cnJlbnRSZXN1bHRzJyl9OiAke2dldEkxOG5NZXNzYWdlKCdyZXN1bHRzTW9kZURlc2MnKS5zcGxpdCgnXFxuJylbMl0/LnRyaW0oKSB8fCAnJ31gfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e2dldEkxOG5NZXNzYWdlKCdhZGRUb0N1cnJlbnRSZXN1bHRzJyl9XG4gICAgICAgICAgICAgICAgICAgICAgICBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjc1cmVtO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiA0cHggOHB4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICBtaW4taGVpZ2h0OiAyOHB4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAge2dldEkxOG5NZXNzYWdlKCdyZXN1bHRzTW9kZUFkZCcpfVxuICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgIHNpemU9XCJzbVwiXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXJpYW50PXtyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uID8gJ2NvbnRhaW5lZCcgOiAnb3V0bGluZWQnfVxuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I9e3Jlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb24gPyAncHJpbWFyeScgOiAnZGVmYXVsdCd9XG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17IWFjY3VtdWxhdGVkUmVjb3JkcyB8fCBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID09PSAwfVxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdNb2RlID0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHByZXZpb3VzTW9kZSA9IHJlc3VsdHNNb2RlIHx8IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudDogJ2J1dHRvbi1tb2RlLWNoYW5nZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWVyeUl0ZW1Db25maWdJZDogcXVlcnlJdGVtLmNvbmZpZ0lkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzTW9kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdNb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiBhY2N1bXVsYXRlZFJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiBzd2l0Y2hpbmcgRlJPTSBcIk5ld1wiIFRPIFwiUmVtb3ZlIGZyb21cIiBtb2RlIGFuZCB3ZSBoYXZlIGN1cnJlbnQgcmVzdWx0cyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbWVyZ2UgdGhlbSB3aXRoIGV4aXN0aW5nIGFjY3VtdWxhdGVkIHJlY29yZHMgYmVmb3JlIGNoYW5naW5nIG1vZGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gKHNhbWUgcGF0dGVybiBhcyBcIkFkZCB0b1wiIG1vZGUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlY29yZHNUb0NhcHR1cmVGb3JSZW1vdmUgPSAoZWZmZWN0aXZlUmVjb3JkcyAmJiBlZmZlY3RpdmVSZWNvcmRzLmxlbmd0aCA+IDApIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gKGVmZmVjdGl2ZVJlY29yZHMgYXMgRmVhdHVyZURhdGFSZWNvcmRbXSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IChvdXRwdXREUz8uZ2V0U2VsZWN0ZWRSZWNvcmRzKCkgYXMgRmVhdHVyZURhdGFSZWNvcmRbXSB8fCBbXSlcblxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJldmlvdXNNb2RlID09PSBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvbiAmJiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvbiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjb3Jkc1RvQ2FwdHVyZUZvclJlbW92ZS5sZW5ndGggPiAwICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXREUyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBleGlzdGluZ0FjY3VtdWxhdGVkID0gYWNjdW11bGF0ZWRSZWNvcmRzIHx8IFtdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWVyZ2UgY3VycmVudCByZXN1bHRzIHdpdGggZXhpc3RpbmcgYWNjdW11bGF0ZWQgcmVjb3Jkc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lcmdlZFJlY29yZHMgPSBtZXJnZVJlc3VsdHNJbnRvQWNjdW11bGF0ZWQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXREUyBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjb3Jkc1RvQ2FwdHVyZUZvclJlbW92ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nQWNjdW11bGF0ZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudDogJ2NhcHR1cmluZy1jdXJyZW50LXJlc3VsdHMtb24tbW9kZS1zd2l0Y2gtdG8tcmVtb3ZlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzTW9kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld01vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXB0dXJlZFJlY29yZHNDb3VudDogcmVjb3Jkc1RvQ2FwdHVyZUZvclJlbW92ZS5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGlzdGluZ0FjY3VtdWxhdGVkQ291bnQ6IGV4aXN0aW5nQWNjdW11bGF0ZWQubGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVyZ2VkUmVjb3Jkc0NvdW50OiBtZXJnZWRSZWNvcmRzLmxlbmd0aFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UobWVyZ2VkUmVjb3JkcylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9uUmVzdWx0c01vZGVDaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblJlc3VsdHNNb2RlQ2hhbmdlKG5ld01vZGUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmlhLXByZXNzZWQ9e3Jlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb259XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPXtgJHtnZXRJMThuTWVzc2FnZSgncmVtb3ZlRnJvbUN1cnJlbnRSZXN1bHRzJyl9OiAke2dldEkxOG5NZXNzYWdlKCdyZXN1bHRzTW9kZURlc2MnKS5zcGxpdCgnXFxuJylbM10/LnRyaW0oKSB8fCAnJ31gfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9eyghYWNjdW11bGF0ZWRSZWNvcmRzIHx8IGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPT09IDApIFxuICAgICAgICAgICAgICAgICAgICAgICAgICA/IGdldEkxOG5NZXNzYWdlKCdyZXN1bHRzTW9kZURpc2FibGVkUmVtb3ZlJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgOiBnZXRJMThuTWVzc2FnZSgncmVtb3ZlRnJvbUN1cnJlbnRSZXN1bHRzJyl9XG4gICAgICAgICAgICAgICAgICAgICAgICBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjc1cmVtO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiA0cHggOHB4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICBtaW4taGVpZ2h0OiAyOHB4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAge2dldEkxOG5NZXNzYWdlKCdyZXN1bHRzTW9kZVJlbW92ZScpfVxuICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBcbiAgICAgICAgICAgICAgICAgICAgICBpZD17YHJlc3VsdHMtbW9kZS1kZXNjcmlwdGlvbi0ke3Byb3BzLndpZGdldElkfWB9XG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwic3Itb25seVwiXG4gICAgICAgICAgICAgICAgICAgICAgYXJpYS1saXZlPVwicG9saXRlXCJcbiAgICAgICAgICAgICAgICAgICAgICByb2xlPVwic3RhdHVzXCJcbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgIHtyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb24gXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGdldEkxOG5NZXNzYWdlKCdjcmVhdGVOZXdSZXN1bHRzJylcbiAgICAgICAgICAgICAgICAgICAgICAgIDogcmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgICAgID8gZ2V0STE4bk1lc3NhZ2UoJ2FkZFRvQ3VycmVudFJlc3VsdHMnKVxuICAgICAgICAgICAgICAgICAgICAgICAgOiBnZXRJMThuTWVzc2FnZSgncmVtb3ZlRnJvbUN1cnJlbnRSZXN1bHRzJylcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNzcz17Y3NzYFxuICAgICAgICAgICAgICBmbGV4OiAxO1xuICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICAgICAgICBtaW4taGVpZ2h0OiAwO1xuICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgIHtlbmFibGVkICYmIGRzRXhpc3RzICYmIChcbiAgICAgICAgICAgICAgICA8ZGl2IGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAgICAgICAgbWluLWhlaWdodDogMDtcbiAgICAgICAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAgICA8UXVlcnlUYXNrRm9ybVxuICAgICAgICAgICAgICAgICAgICB7Li4ub3RoZXJQcm9wc31cbiAgICAgICAgICAgICAgICAgICAgY29uZmlnSWQ9e3F1ZXJ5SXRlbS5jb25maWdJZH1cbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0RFM9e291dHB1dERTfVxuICAgICAgICAgICAgICAgICAgICBkYXRhc291cmNlUmVhZHk9e2RhdGFTb3VyY2UgIT0gbnVsbH1cbiAgICAgICAgICAgICAgICAgICAgc3BhdGlhbEZpbHRlckVuYWJsZWQ9e3NwYXRpYWxGaWx0ZXJFbmFibGVkfVxuICAgICAgICAgICAgICAgICAgICBkYXRhQWN0aW9uRmlsdGVyID0ge2RhdGFBY3Rpb25GaWx0ZXJ9XG4gICAgICAgICAgICAgICAgICAgIG9uRm9ybVN1Ym1pdD17aGFuZGxlRm9ybVN1Ym1pdH1cbiAgICAgICAgICAgICAgICAgICAgaW5pdGlhbElucHV0VmFsdWU9e2luaXRpYWxJbnB1dFZhbHVlfVxuICAgICAgICAgICAgICAgICAgICBvbkhhc2hQYXJhbWV0ZXJVc2VkPXtvbkhhc2hQYXJhbWV0ZXJVc2VkfVxuICAgICAgICAgICAgICAgICAgICBxdWVyeUl0ZW1TaG9ydElkPXtxdWVyeUl0ZW0uc2hvcnRJZH1cbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIDxEYXRhU291cmNlVGlwXG4gICAgICAgICAgICAgICAgd2lkZ2V0SWQ9e3Byb3BzLndpZGdldElkfVxuICAgICAgICAgICAgICAgIHVzZURhdGFTb3VyY2U9e3F1ZXJ5SXRlbS51c2VEYXRhU291cmNlfVxuICAgICAgICAgICAgICAgIHNob3dNZXNzYWdlPXt0cnVlfVxuICAgICAgICAgICAgICAgIG9uU3RhdHVzQ2hhbmdlPXtoYW5kbGVTdGF0dXNDaGFuZ2V9XG4gICAgICAgICAgICAgICAgb25EYXRhU291cmNlQ3JlYXRlZD17aGFuZGxlRGF0YVNvdXJjZUNyZWF0ZWR9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9UYWI+XG4gICAgICAgIDxUYWJcbiAgICAgICAgICBpZD0ncmVzdWx0cydcbiAgICAgICAgICB0aXRsZT17XG4gICAgICAgICAgICA8c3Bhbj5cbiAgICAgICAgICAgICAge2dldEkxOG5NZXNzYWdlKCdyZXN1bHRzVGFiJyl9XG4gICAgICAgICAgICAgIHtlZmZlY3RpdmVSZXN1bHRDb3VudCA+IDAgJiYgKFxuICAgICAgICAgICAgICAgIDxzcGFuIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IDZweDtcbiAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC43NXJlbTtcbiAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAuNztcbiAgICAgICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgICAgICh7ZWZmZWN0aXZlUmVzdWx0Q291bnR9KVxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICB9XG4gICAgICAgICAgZGlzYWJsZWQ9e2VmZmVjdGl2ZVJlc3VsdENvdW50ID09PSAwfVxuICAgICAgICA+XG4gICAgICAgICAge2VmZmVjdGl2ZVJlc3VsdENvdW50ID4gMCAmJiAoXG4gICAgICAgICAgICA8ZGl2IFxuICAgICAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ3F1ZXJ5LXRhc2tfX2NvbnRlbnQnLCB7XG4gICAgICAgICAgICAgICAgW0ZPQ1VTQUJMRV9DT05UQUlORVJfQ0xBU1NdOiBpc0luUG9wcGVyICYmIGFjdGl2ZVRhYiA9PT0gJ3Jlc3VsdHMnXG4gICAgICAgICAgICAgIH0pfSBcbiAgICAgICAgICAgICAgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgICAgICAgbWluLWhlaWdodDogMDtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgICAgICAgcGFkZGluZy10b3A6IDAgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgb25DbGljaz17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBQcmV2ZW50IGNsaWNrcyBmcm9tIGJ1YmJsaW5nIHVwIHdoZW4gUmVzdWx0cyB0YWIgaXMgYWN0aXZlXG4gICAgICAgICAgICAgICAgaWYgKGFjdGl2ZVRhYiA9PT0gJ3Jlc3VsdHMnKSB7XG4gICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8UXVlcnlUYXNrUmVzdWx0XG4gICAgICAgICAgICAgICAga2V5PXtgJHtxdWVyeUl0ZW0uY29uZmlnSWR9LSR7cXVlcnlFeGVjdXRpb25LZXlSZWYuY3VycmVudH1gfVxuICAgICAgICAgICAgICAgIHdpZGdldElkPXtwcm9wcy53aWRnZXRJZH1cbiAgICAgICAgICAgICAgICBxdWVyeUl0ZW09e3F1ZXJ5SXRlbX1cbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtcz17cXVlcnlQYXJhbVJlZi5jdXJyZW50fVxuICAgICAgICAgICAgICAgIHJlc3VsdENvdW50PXtlZmZlY3RpdmVSZXN1bHRDb3VudH1cbiAgICAgICAgICAgICAgICBtYXhQZXJQYWdlPXsoZGF0YVNvdXJjZSBhcyBRdWVyaWFibGVEYXRhU291cmNlKT8uZ2V0TWF4UmVjb3JkQ291bnQ/LigpfVxuICAgICAgICAgICAgICAgIHJlY29yZHM9e2VmZmVjdGl2ZVJlY29yZHN9XG4gICAgICAgICAgICAgICAgb3V0cHV0RFM9e291dHB1dERTfVxuICAgICAgICAgICAgICAgIHJ1bnRpbWVab29tVG9TZWxlY3RlZD17bGFzdFJ1bnRpbWVab29tVG9TZWxlY3RlZFJlZi5jdXJyZW50fVxuICAgICAgICAgICAgICAgIHJlc3VsdHNNb2RlPXtyZXN1bHRzTW9kZX1cbiAgICAgICAgICAgICAgICB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0PXt1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0fVxuICAgICAgICAgICAgICAgIGdyYXBoaWNzTGF5ZXI9e2dyYXBoaWNzTGF5ZXJ9XG4gICAgICAgICAgICAgICAgbWFwVmlldz17bWFwVmlld31cbiAgICAgICAgICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHM9e2FjY3VtdWxhdGVkUmVjb3Jkc31cbiAgICAgICAgICAgICAgICBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZT17b25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2V9XG4gICAgICAgICAgICAgICAgb25OYXZCYWNrPXthc3luYyAoY2xlYXJSZXN1bHRzID0gZmFsc2UpID0+IHtcbiAgICAgICAgICAgICAgICAgIC8vIEhhbmRsZSBuYXZpZ2F0aW9uIGZyb20gUXVlcnlUYXNrUmVzdWx0XG4gICAgICAgICAgICAgICAgICAvLyBJZiBjbGVhclJlc3VsdHMgaXMgdHJ1ZSwgY2xlYXIgZXZlcnl0aGluZyBhbmQgZ28gdG8gcXVlcnkgdGFiXG4gICAgICAgICAgICAgICAgICAvLyBJZiBmYWxzZSwganVzdCBzd2l0Y2ggdG8gcXVlcnkgdGFiIHdpdGhvdXQgY2xlYXJpbmdcbiAgICAgICAgICAgICAgICAgIGlmIChjbGVhclJlc3VsdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgaGFzU2VsZWN0ZWRSZWNvcmRzUmVmLmN1cnJlbnQgPSBmYWxzZSAvLyBSZXNldCBmbGFnIHdoZW4gY2xlYXJpbmdcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgbmF2VG9Gb3JtKHRydWUpXG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBKdXN0IHN3aXRjaCB0YWJzLCBkb24ndCBjbGVhciByZXN1bHRzXG4gICAgICAgICAgICAgICAgICAgIC8vIE1hcmsgYXMgbWFudWFsIHN3aXRjaCB0byBwcmV2ZW50IGF1dG8tc3dpdGNoIHVzZUVmZmVjdCBmcm9tIGludGVyZmVyaW5nXG4gICAgICAgICAgICAgICAgICAgIG1hbnVhbFRhYlN3aXRjaFJlZi5jdXJyZW50ID0gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICBzZXRBY3RpdmVUYWIoJ3F1ZXJ5JylcbiAgICAgICAgICAgICAgICAgICAgLy8gUmVzZXQgdGhlIGZsYWcgYWZ0ZXIgYSBzaG9ydCBkZWxheVxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBtYW51YWxUYWJTd2l0Y2hSZWYuY3VycmVudCA9IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgIH0sIDEwMClcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9UYWI+XG4gICAgICA8L1RhYnM+XG5cbiAgICAgIHsvKiBFcnJvciBNZXNzYWdlcyAqL31cbiAgICAgIHsoc2VsZWN0aW9uRXJyb3IgfHwgem9vbUVycm9yKSAmJiAoXG4gICAgICAgIDxkaXYgY3NzPXtjc3NgXG4gICAgICAgICAgcGFkZGluZzogMCAxNnB4O1xuICAgICAgICAgIG1hcmdpbi10b3A6IDhweDtcbiAgICAgICAgYH0+XG4gICAgICAgICAge3NlbGVjdGlvbkVycm9yICYmIChcbiAgICAgICAgICAgIDxFcnJvck1lc3NhZ2UgXG4gICAgICAgICAgICAgIGVycm9yPXtzZWxlY3Rpb25FcnJvcn0gXG4gICAgICAgICAgICAgIG9uRGlzbWlzcz17KCkgPT4gc2V0U2VsZWN0aW9uRXJyb3IobnVsbCl9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICl9XG4gICAgICAgICAge3pvb21FcnJvciAmJiAoXG4gICAgICAgICAgICA8RXJyb3JNZXNzYWdlIFxuICAgICAgICAgICAgICBlcnJvcj17em9vbUVycm9yfSBcbiAgICAgICAgICAgICAgb25EaXNtaXNzPXsoKSA9PiBzZXRab29tRXJyb3IobnVsbCl9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cblxuICAgICAgey8qIExvYWRpbmcgSW5kaWNhdG9yIC0gb3ZlcmxheXMgb24gdG9wIG9mIHRhYnMgKi99XG4gICAgICB7c3RhZ2UgPT09IDIgJiYgKFxuICAgICAgICA8ZGl2IGNzcz17Y3NzYFxuICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgICB0b3A6IDA7XG4gICAgICAgICAgbGVmdDogMDtcbiAgICAgICAgICByaWdodDogMDtcbiAgICAgICAgICBib3R0b206IDA7XG4gICAgICAgICAgei1pbmRleDogMTAwMDtcbiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuOCk7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgICBgfT5cbiAgICAgICAgICA8TG9hZGluZ1Jlc3VsdCAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG4gICAgPC9kaXY+XG4gIClcbn1cbiIsImltcG9ydCB7XG4gIHR5cGUgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSxcbiAgdHlwZSBJbW11dGFibGVPYmplY3QsXG4gIHR5cGUgSU1TcWxFeHByZXNzaW9uLFxuICB0eXBlIEZlYXR1cmVMYXllclF1ZXJ5UGFyYW1zLFxuICBNZXNzYWdlTWFuYWdlcixcbiAgdHlwZSBRdWVyeVBhcmFtcyxcbiAgdHlwZSBEYXRhUmVjb3JkLFxuICBEYXRhUmVjb3JkU2V0Q2hhbmdlTWVzc2FnZSxcbiAgUmVjb3JkU2V0Q2hhbmdlVHlwZSxcbiAgdHlwZSBJbW11dGFibGVBcnJheSxcbiAgZGF0YVNvdXJjZVV0aWxzXG59IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB0eXBlIHsgSUZpZWxkSW5mbyB9IGZyb20gJ0Blc3JpL2FyY2dpcy1yZXN0LWZlYXR1cmUtc2VydmljZSdcbmltcG9ydCB7IHR5cGUgUXVlcnlJdGVtVHlwZSwgU3BhdGlhbFJlbGF0aW9uLCB0eXBlIFNwYXRpYWxGaWx0ZXJPYmosIEZpZWxkc1R5cGUsIG1hcEpTQVBJVW5pdFRvRHNVbml0LCBtYXBKU0FQSVNwYXRpYWxSZWxUb0RzU3BhdGlhbFJlbCB9IGZyb20gJy4uL2NvbmZpZydcbmltcG9ydCB7IGdldEZpZWxkSW5mb3NJblBvcHVwQ29udGVudCB9IGZyb20gJ3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uJ1xuXG5leHBvcnQgZnVuY3Rpb24gY29tYmluZUZpZWxkcyAocmVzdWx0RGlzcGxheUZpZWxkczogSW1tdXRhYmxlQXJyYXk8c3RyaW5nPiwgcmVzdWx0VGl0bGVFeHByZXNzaW9uOiBzdHJpbmcsIGlkRmllbGQ/OiBzdHJpbmcpOiBzdHJpbmdbXSB7XG4gIGNvbnN0IGZpZWxkcyA9IG5ldyBTZXQ8c3RyaW5nPigpXG4gIHJlc3VsdERpc3BsYXlGaWVsZHM/LmZvckVhY2goaXRlbSA9PiBmaWVsZHMuYWRkKGl0ZW0pKVxuICBpZiAocmVzdWx0VGl0bGVFeHByZXNzaW9uKSB7XG4gICAgY29uc3QgdGVtcGxhdGVzID0gcmVzdWx0VGl0bGVFeHByZXNzaW9uLm1hdGNoKC9cXHtcXHcqXFx9L2cpXG4gICAgaWYgKHRlbXBsYXRlcz8ubGVuZ3RoID4gMCkge1xuICAgICAgdGVtcGxhdGVzLmZvckVhY2goaXRlbSA9PiBmaWVsZHMuYWRkKGl0ZW0uc3Vic3RyaW5nKDEsIGl0ZW0ubGVuZ3RoIC0gMSkpKVxuICAgIH1cbiAgfVxuICBpZiAoaWRGaWVsZCkge1xuICAgIGZpZWxkcy5hZGQoaWRGaWVsZClcbiAgfVxuICByZXR1cm4gQXJyYXkuZnJvbShmaWVsZHMpXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRQb3B1cFRlbXBsYXRlIChcbiAgb3V0cHV0RFM6IEZlYXR1cmVMYXllckRhdGFTb3VyY2UsXG4gIHF1ZXJ5SXRlbTogSW1tdXRhYmxlT2JqZWN0PFF1ZXJ5SXRlbVR5cGU+XG4pOiBQcm9taXNlPHsgcG9wdXBUZW1wbGF0ZT86IF9fZXNyaS5Qb3B1cFRlbXBsYXRlLCBkZWZhdWx0UG9wdXBUZW1wbGF0ZT86IF9fZXNyaS5Qb3B1cFRlbXBsYXRlIH0+IHtcbiAgY29uc3QgeyByZXN1bHRGaWVsZHNUeXBlLCByZXN1bHREaXNwbGF5RmllbGRzLCByZXN1bHRUaXRsZUV4cHJlc3Npb24gPSAnJyB9ID0gcXVlcnlJdGVtXG4gIGNvbnN0IGN1cnJlbnRPcmlnaW5EczogRmVhdHVyZUxheWVyRGF0YVNvdXJjZSA9IG91dHB1dERTLmdldE9yaWdpbkRhdGFTb3VyY2VzKClbMF0gYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICBjb25zdCBwb3B1cEluZm8gPSBjdXJyZW50T3JpZ2luRHMuZ2V0UG9wdXBJbmZvKClcblxuICBpZiAocmVzdWx0RmllbGRzVHlwZSA9PT0gRmllbGRzVHlwZS5TZWxlY3RBdHRyaWJ1dGVzKSB7XG4gICAgbGV0IGZpZWxkczogc3RyaW5nW11cbiAgICBpZiAocmVzdWx0RGlzcGxheUZpZWxkcyA9PSBudWxsKSB7XG4gICAgICBjb25zdCBmaWVsZHNJbkNvbnRlbnQgPSBnZXRGaWVsZEluZm9zSW5Qb3B1cENvbnRlbnQocG9wdXBJbmZvKVxuICAgICAgaWYgKGZpZWxkc0luQ29udGVudC5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IHVuaXF1ZUZpZWxkcyA9IG5ldyBTZXQoZmllbGRzSW5Db250ZW50Lm1hcChlbGUgPT4gZWxlLmZpZWxkTmFtZSkpXG4gICAgICAgIGZpZWxkcyA9IEFycmF5LmZyb20odW5pcXVlRmllbGRzKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gcmV0dXJuIGFsbCBmaWVsZHMgYnkgZGVmYXVsdFxuICAgICAgICBjb25zdCBhbGxGaWVsZHNTY2hlbWEgPSBvdXRwdXREUy5nZXRTY2hlbWEoKVxuICAgICAgICBmaWVsZHMgPSBhbGxGaWVsZHNTY2hlbWE/LmZpZWxkcyA/IE9iamVjdC52YWx1ZXMoYWxsRmllbGRzU2NoZW1hLmZpZWxkcykubWFwKGZpZWxkID0+IGZpZWxkLmppbXVOYW1lKSA6IFtdXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGZpZWxkcyA9IHJlc3VsdERpc3BsYXlGaWVsZHMuYXNNdXRhYmxlKHsgZGVlcDogdHJ1ZSB9KVxuICAgIH1cbiAgICBpZiAocG9wdXBJbmZvKSB7XG4gICAgICBjb25zdCBmaWVsZEluZm9zID0gW11cbiAgICAgIGZpZWxkcy5mb3JFYWNoKGZpZWxkID0+IHtcbiAgICAgICAgY29uc3QgZmllbGRJbmZvID0gcG9wdXBJbmZvLmZpZWxkSW5mb3MuZmluZChmaWVsZEluZm8gPT4gZmllbGRJbmZvLmZpZWxkTmFtZSA9PT0gZmllbGQpXG4gICAgICAgIGlmIChmaWVsZEluZm8pIHtcbiAgICAgICAgICBmaWVsZEluZm8udmlzaWJsZSA9IHRydWVcbiAgICAgICAgICBmaWVsZEluZm9zLnB1c2goZmllbGRJbmZvKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZpZWxkSW5mb3MucHVzaCh7XG4gICAgICAgICAgICBmaWVsZE5hbWU6IGZpZWxkLFxuICAgICAgICAgICAgbGFiZWw6IGZpZWxkXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHBvcHVwVGVtcGxhdGU6IHtcbiAgICAgICAgICBmaWVsZEluZm9zLFxuICAgICAgICAgIGNvbnRlbnQ6IFt7XG4gICAgICAgICAgICB0eXBlOiAnZmllbGRzJ1xuICAgICAgICAgIH1dLFxuICAgICAgICAgIHRpdGxlOiByZXN1bHRUaXRsZUV4cHJlc3Npb25cbiAgICAgICAgfVxuICAgICAgfSBhcyBhbnlcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIHBvcHVwVGVtcGxhdGU6IHtcbiAgICAgICAgZmllbGRJbmZvczogZmllbGRzLm1hcChmaWVsZCA9PiAoe1xuICAgICAgICAgIGZpZWxkTmFtZTogZmllbGQsXG4gICAgICAgICAgbGFiZWw6IGZpZWxkXG4gICAgICAgIH0pKSxcbiAgICAgICAgY29udGVudDogW3tcbiAgICAgICAgICB0eXBlOiAnZmllbGRzJ1xuICAgICAgICB9XSxcbiAgICAgICAgdGl0bGU6IHJlc3VsdFRpdGxlRXhwcmVzc2lvblxuICAgICAgfSBhcyBhbnlcbiAgICB9XG4gIH1cbiAgLy8gdGhlIHNvdXJjZSBsYXllciB3aWxsIHByb3ZpZGUgcG9wdXAgaW5mb1xuICBsZXQgbGF5ZXJPYmplY3RcbiAgaWYgKGN1cnJlbnRPcmlnaW5Ecy5sYXllcikge1xuICAgIGxheWVyT2JqZWN0ID0gY3VycmVudE9yaWdpbkRzLmxheWVyXG4gIH0gZWxzZSB7XG4gICAgbGF5ZXJPYmplY3QgPSBhd2FpdCBjdXJyZW50T3JpZ2luRHMuY3JlYXRlSlNBUElMYXllckJ5RGF0YVNvdXJjZSgpXG4gIH1cbiAgaWYgKGxheWVyT2JqZWN0KSB7XG4gICAgYXdhaXQgbGF5ZXJPYmplY3QubG9hZCgpXG4gIH1cbiAgcmV0dXJuIHsgZGVmYXVsdFBvcHVwVGVtcGxhdGU6IGxheWVyT2JqZWN0Py5hc3NvY2lhdGVkTGF5ZXI/LmRlZmF1bHRQb3B1cFRlbXBsYXRlIHx8IGxheWVyT2JqZWN0Py5kZWZhdWx0UG9wdXBUZW1wbGF0ZSB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZVF1ZXJ5UGFyYW1zIChcbiAgb3V0cHV0RFM6IEZlYXR1cmVMYXllckRhdGFTb3VyY2UsXG4gIHNxbEV4cHI6IElNU3FsRXhwcmVzc2lvbixcbiAgc3BhdGlhbEZpbHRlcjogU3BhdGlhbEZpbHRlck9iaixcbiAgcXVlcnlJdGVtOiBJbW11dGFibGVPYmplY3Q8UXVlcnlJdGVtVHlwZT4sXG4gIHBhZ2U6IG51bWJlcixcbiAgcGFnZVNpemU6IG51bWJlclxuKTogUXVlcnlQYXJhbXMge1xuICBjb25zdCBjdXJyZW50UXVlcnlEc0pzb24gPSBvdXRwdXREUy5nZXREYXRhU291cmNlSnNvbigpXG4gIGNvbnN0IGN1cnJlbnRPcmlnaW5EczogRmVhdHVyZUxheWVyRGF0YVNvdXJjZSA9IG91dHB1dERTLmdldE9yaWdpbkRhdGFTb3VyY2VzKClbMF0gYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICBjb25zdCBpc0xvY2FsRHMgPSBjdXJyZW50UXVlcnlEc0pzb24/LmlzRGF0YUluRGF0YVNvdXJjZUluc3RhbmNlXG4gIGlmIChpc0xvY2FsRHMpIHtcbiAgICBvdXRwdXREUy5zZXRTb3VyY2VSZWNvcmRzKGN1cnJlbnRPcmlnaW5Ecy5nZXRTb3VyY2VSZWNvcmRzKCkpXG4gIH1cblxuICBjb25zdCB7IHVzZUF0dHJpYnV0ZUZpbHRlciwgdXNlU3BhdGlhbEZpbHRlciwgc29ydE9wdGlvbnMsIHJlc3VsdEZpZWxkc1R5cGUsIHJlc3VsdERpc3BsYXlGaWVsZHMsIHJlc3VsdFRpdGxlRXhwcmVzc2lvbiB9ID0gcXVlcnlJdGVtXG4gIFxuICAvLyBERVRFUk1JTkUgTUlOSU1BTCBGSUVMRFMgKFRoZSBcIkZpZWxkIFNocmVkZGVyXCIgT3B0aW1pemF0aW9uKVxuICAvLyBUbyBhY2hpZXZlIHBlcmZvcm1hbmNlIHBhcml0eSB3aXRoIFdlYiBBcHBCdWlsZGVyLCB3ZSBtdXN0IGF2b2lkIGZldGNoaW5nIGV2ZXJ5IFxuICAvLyBjb2x1bW4gaW4gdGhlIGRhdGFiYXNlICgqIG9yIGFsbCkuIFdlIHN1cmdpY2FsbHkgcmVxdWVzdCBvbmx5IHRoZSBmaWVsZHMgXG4gIC8vIG5lZWRlZCBmb3IgdGhlIFRpdGxlLCB0aGUgQXR0cmlidXRlIExpc3QsIGFuZCB0aGUgSUQgZmllbGQuXG4gIGxldCBvdXRwdXRGaWVsZHM6IHN0cmluZ1tdID0gW11cbiAgaWYgKHJlc3VsdEZpZWxkc1R5cGUgPT09IEZpZWxkc1R5cGUuU2VsZWN0QXR0cmlidXRlcyAmJiByZXN1bHREaXNwbGF5RmllbGRzKSB7XG4gICAgb3V0cHV0RmllbGRzID0gY29tYmluZUZpZWxkcyhyZXN1bHREaXNwbGF5RmllbGRzIGFzIGFueSwgcmVzdWx0VGl0bGVFeHByZXNzaW9uIHx8ICcnLCBvdXRwdXREUy5nZXRJZEZpZWxkKCkpXG4gIH0gZWxzZSB7XG4gICAgLy8gUG9wdXAgbW9kZTogR2V0IG9ubHkgdmlzaWJsZSBmaWVsZHMgZnJvbSBwb3B1cCBpbmZvXG4gICAgY29uc3QgcG9wdXBJbmZvID0gY3VycmVudE9yaWdpbkRzLmdldFBvcHVwSW5mbygpXG4gICAgY29uc3QgZmllbGROYW1lcyA9IE9iamVjdC52YWx1ZXMoY3VycmVudE9yaWdpbkRzLmdldFNjaGVtYSgpLmZpZWxkcyA/PyB7fSkubWFwKGYgPT4gZi5uYW1lKVxuICAgIGNvbnN0IHZhbGlkRmllbGRJbmZvcyA9IHBvcHVwSW5mbz8uZmllbGRJbmZvcz8uZmlsdGVyKGZpZWxkSW5mbyA9PiBmaWVsZEluZm8udmlzaWJsZSAhPT0gZmFsc2UgJiYgZmllbGROYW1lcy5pbmNsdWRlcyhmaWVsZEluZm8uZmllbGROYW1lKSlcbiAgICBvdXRwdXRGaWVsZHMgPSB2YWxpZEZpZWxkSW5mb3M/Lm1hcChmaWVsZEluZm8gPT4gZmllbGRJbmZvLmZpZWxkTmFtZSkgfHwgW11cbiAgICBcbiAgICAvLyBBbHdheXMgZW5zdXJlIElEIGZpZWxkIGlzIGluY2x1ZGVkXG4gICAgY29uc3QgaWRGaWVsZCA9IG91dHB1dERTLmdldElkRmllbGQoKVxuICAgIGlmIChpZEZpZWxkICYmICFvdXRwdXRGaWVsZHMuaW5jbHVkZXMoaWRGaWVsZCkpIHtcbiAgICAgIG91dHB1dEZpZWxkcy5wdXNoKGlkRmllbGQpXG4gICAgfVxuICB9XG5cbiAgY29uc3QgbWVyZ2VkUXVlcnlQYXJhbXMgPSBvdXRwdXREUy5tZXJnZVF1ZXJ5UGFyYW1zKGN1cnJlbnRPcmlnaW5Ecy5nZXRDdXJyZW50UXVlcnlQYXJhbXMoKSA/PyB7fSwge1xuICAgIHdoZXJlOiAodXNlQXR0cmlidXRlRmlsdGVyICYmIHNxbEV4cHI/LnNxbCkgPyBkYXRhU291cmNlVXRpbHMuZ2V0QXJjR0lTU1FMKHNxbEV4cHIsIG91dHB1dERTKS5zcWwgOiAnMT0xJyxcbiAgICBzcWxFeHByZXNzaW9uOiAodXNlQXR0cmlidXRlRmlsdGVyICYmIHNxbEV4cHI/LnNxbCkgPyBzcWxFeHByIDogbnVsbCxcbiAgICAvLyBGT1JDRSBtaW5pbWFsIGZpZWxkcyBoZXJlIHRvIG92ZXJyaWRlIGFueSBmcmFtZXdvcmsgXCIqXCIgb3IgXCJhbGxcIlxuICAgIG91dEZpZWxkczogb3V0cHV0RmllbGRzXG4gIH0gYXMgYW55KVxuXG4gIC8vIFBFUkZPUk1BTkNFIE9QVElNSVpBVElPTjogVW5pdmVyc2FsIFNRTCBPcHRpbWl6ZXJcbiAgLy8gV2Ugbm9ybWFsaXplIHRoZSB1c2VyJ3MgaW5wdXQgdG8gVVBQRVJDQVNFIHRvIGVuc3VyZSBjYXNlLWluc2Vuc2l0aXZpdHkgd2hpbGUgXG4gIC8vIHVud3JhcHBpbmcgYW55IExPV0VSKCkgZnVuY3Rpb24gYXJvdW5kIHRoZSBmaWVsZCBuYW1lLiBUaGlzIGFsbG93cyB0aGUgZGF0YWJhc2UgXG4gIC8vIHRvIHVzZSBpdHMgYXR0cmlidXRlIGluZGV4ZXMgKFNBUkdhYmxlIHF1ZXJ5KS5cbiAgaWYgKG1lcmdlZFF1ZXJ5UGFyYW1zLndoZXJlICYmIG1lcmdlZFF1ZXJ5UGFyYW1zLndoZXJlLmluY2x1ZGVzKCdMT1dFUignKSkge1xuICAgIGNvbnN0IG9wdGltaXplZFdoZXJlID0gbWVyZ2VkUXVlcnlQYXJhbXMud2hlcmUucmVwbGFjZSgvTE9XRVJcXCgoW14pXSspXFwpXFxzKig9fExJS0UpXFxzKicoW14nXSopJy9naSwgKG1hdGNoLCBmaWVsZCwgb3BlcmF0b3IsIHZhbHVlKSA9PiB7XG4gICAgICAvLyBOb3JtYWxpemUgYm90aCBzaWRlcyB0byBVUFBFUkNBU0UuIFRoaXMgd29ya3MgZm9yIEFOWSBmaWVsZCBuYW1lLlxuICAgICAgLy8gV2Uga2VlcCB0aGUgZmllbGQgbmFtZSBcIm5ha2VkXCIgc28gdGhlIGluZGV4IGlzIHVzZWQuXG4gICAgICByZXR1cm4gYCR7ZmllbGR9ICR7b3BlcmF0b3J9ICcke3ZhbHVlLnRvVXBwZXJDYXNlKCl9J2BcbiAgICB9KVxuICAgIFxuICAgIGlmIChvcHRpbWl6ZWRXaGVyZSAhPT0gbWVyZ2VkUXVlcnlQYXJhbXMud2hlcmUpIHtcbiAgICAgIGNvbnNvbGUubG9nKGBbUVVFUllTSU1QTEUtUEVSRl0gVW5pdmVyc2FsIFNRTCBPcHRpbWl6YXRpb246ICR7bWVyZ2VkUXVlcnlQYXJhbXMud2hlcmV9IC0+ICR7b3B0aW1pemVkV2hlcmV9YClcbiAgICAgIG1lcmdlZFF1ZXJ5UGFyYW1zLndoZXJlID0gb3B0aW1pemVkV2hlcmVcbiAgICB9XG4gIH1cblxuICAvLyBjb21wb3NlIHF1ZXJ5IHBhcmFtcyBmb3IgcXVlcnlcbiAgY29uc3QgcXVlcnlQYXJhbXM6IEZlYXR1cmVMYXllclF1ZXJ5UGFyYW1zID0ge1xuICAgIC8vIHVybDogZHMudXJsLFxuICAgIHJldHVybkdlb21ldHJ5OiB0cnVlLFxuICAgIC8qKiBcbiAgICAgKiBQRVJGT1JNQU5DRSBPUFRJTUlaQVRJT046IEZvcmNlIGxvd2VyIHByZWNpc2lvbiBmb3IgYWxsIGRpc3BsYXkgcXVlcmllcy5cbiAgICAgKi9cbiAgICBtYXhBbGxvd2FibGVPZmZzZXQ6IDAuMSwgXG4gICAgcGFnZSxcbiAgICAvLyBMaW1pdCBwYWdlU2l6ZSB0byBhIHNhbmUgZGVmYXVsdCBpZiBub3QgcHJvdmlkZWQgb3IgdG9vIGxhcmdlXG4gICAgcGFnZVNpemU6IChwYWdlU2l6ZSAmJiBwYWdlU2l6ZSA8IDEwMDApID8gcGFnZVNpemUgOiAxMDAwLFxuICAgIC4uLm1lcmdlZFF1ZXJ5UGFyYW1zXG4gIH1cblxuICAvLyBGaW5hbCBvdmVycmlkZSB0byBlbnN1cmUgbm8gXCIqXCIgbGVha3MgdGhyb3VnaCBmcm9tIGFueSBtZXJnZSBvcGVyYXRpb25cbiAgaWYgKCFxdWVyeVBhcmFtcy5vdXRGaWVsZHMgfHwgcXVlcnlQYXJhbXMub3V0RmllbGRzLmluY2x1ZGVzKCcqJykpIHtcbiAgICBxdWVyeVBhcmFtcy5vdXRGaWVsZHMgPSBvdXRwdXRGaWVsZHNcbiAgfVxuXG4gIC8vIERpYWdub3N0aWMgbG9nOiBTaG93IGV4YWN0bHkgV0hJQ0ggZmllbGRzIGFyZSBiZWluZyBzZW50XG4gIGNvbnNvbGUubG9nKGBbUVVFUllTSU1QTEUtUEVSRl0gUmVxdWVzdGluZyBkYXRhOiBcbiAgICAtIEZpZWxkcyBDb3VudDogJHtxdWVyeVBhcmFtcy5vdXRGaWVsZHM/Lmxlbmd0aH0gXG4gICAgLSBGaWVsZHM6ICR7cXVlcnlQYXJhbXMub3V0RmllbGRzPy5qb2luKCcsICcpfVxuICAgIC0gUGFnZVNpemU6ICR7cXVlcnlQYXJhbXMucGFnZVNpemV9XG4gICAgLSBPZmZzZXQ6ICR7cXVlcnlQYXJhbXMubWF4QWxsb3dhYmxlT2Zmc2V0fWApXG5cbiAgaWYgKHVzZVNwYXRpYWxGaWx0ZXIgJiYgc3BhdGlhbEZpbHRlcj8uZ2VvbWV0cnkpIHtcbiAgICBjb25zdCB7IGdlb21ldHJ5LCByZWxhdGlvbiA9IFNwYXRpYWxSZWxhdGlvbi5JbnRlcnNlY3QsIGJ1ZmZlciB9ID0gc3BhdGlhbEZpbHRlclxuXG4gICAgY29uc3Qgc3BhdGlhbFF1ZXJ5UGFyYW1zOiBGZWF0dXJlTGF5ZXJRdWVyeVBhcmFtcyA9IHtcbiAgICAgIGdlb21ldHJ5VHlwZTogZGF0YVNvdXJjZVV0aWxzLmNoYW5nZUpTQVBJR2VvbWV0cnlUeXBlVG9SZXN0QVBJR2VvbWV0cnlUeXBlKGdlb21ldHJ5LnR5cGUpLFxuICAgICAgZ2VvbWV0cnk6IGdlb21ldHJ5LnRvSlNPTigpLFxuICAgICAgc3BhdGlhbFJlbDogbWFwSlNBUElTcGF0aWFsUmVsVG9Ec1NwYXRpYWxSZWxbcmVsYXRpb25dLFxuICAgICAgZGlzdGFuY2U6IGJ1ZmZlcj8uZGlzdGFuY2UsXG4gICAgICB1bml0czogYnVmZmVyPy51bml0ID8gbWFwSlNBUElVbml0VG9Ec1VuaXRbYnVmZmVyLnVuaXRdIDogdW5kZWZpbmVkXG4gICAgfVxuICAgIE9iamVjdC5hc3NpZ24ocXVlcnlQYXJhbXMsIHNwYXRpYWxRdWVyeVBhcmFtcylcbiAgfVxuXG4gIGlmIChzb3J0T3B0aW9ucz8ubGVuZ3RoID4gMCkge1xuICAgIE9iamVjdC5hc3NpZ24ocXVlcnlQYXJhbXMsIHtcbiAgICAgIG9yZGVyQnlGaWVsZHM6IHNvcnRPcHRpb25zLm1hcChpdGVtID0+IGAke2l0ZW0uamltdUZpZWxkTmFtZX0gJHtpdGVtLm9yZGVyfWApXG4gICAgfSlcbiAgfVxuXG4gIHJldHVybiBxdWVyeVBhcmFtc1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZXhlY3V0ZUNvdW50UXVlcnkgKFxuICB3aWRnZXRJZDogc3RyaW5nLFxuICBvdXRwdXREUzogRmVhdHVyZUxheWVyRGF0YVNvdXJjZSxcbiAgcXVlcnlQYXJhbXM6IFF1ZXJ5UGFyYW1zXG4pOiBQcm9taXNlPG51bWJlcj4ge1xuICBjb25zdCByZXN1bHQgPSBhd2FpdCBvdXRwdXREUy5sb2FkQ291bnQocXVlcnlQYXJhbXMsIHsgd2lkZ2V0SWQsIHJlZnJlc2g6IHRydWUgfSlcbiAgcmV0dXJuIHJlc3VsdCAhPSBudWxsID8gcmVzdWx0IDogMFxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZXhlY3V0ZVF1ZXJ5IChcbiAgd2lkZ2V0SWQ6IHN0cmluZyxcbiAgcXVlcnlJdGVtOiBJbW11dGFibGVPYmplY3Q8UXVlcnlJdGVtVHlwZT4sXG4gIG91dHB1dERTOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLFxuICBxdWVyeVBhcmFtczogUXVlcnlQYXJhbXNcbik6IFByb21pc2U8eyByZWNvcmRzPzogRGF0YVJlY29yZFtdLCBmaWVsZHM/OiBzdHJpbmdbXSB9PiB7XG4gIGNvbnN0IHBvcHVwSW5mbyA9IG91dHB1dERTLmdldFBvcHVwSW5mbygpXG5cbiAgY29uc3QgbGF5ZXJEZWZpbml0aW9uID0gb3V0cHV0RFMuZ2V0TGF5ZXJEZWZpbml0aW9uKClcbiAgY29uc3QgZ2V0RGVmYXVsdEZpZWxkSW5mb3MgPSAoKSA9PlxuICAgIFtcbiAgICAgIHsgZmllbGROYW1lOiBsYXllckRlZmluaXRpb24/Lm9iamVjdElkRmllbGQgPz8gJ29iamVjdGlkJywgbGFiZWw6ICdPQkpFQ1RJRCcsIHRvb2x0aXA6ICcnLCB2aXNpYmxlOiB0cnVlIH1cbiAgICBdIGFzIElGaWVsZEluZm9bXVxuICBjb25zdCBmaWVsZEluZm9zID0gKChmaWVsZEluZm9zKSA9PiAoZmllbGRJbmZvcy5sZW5ndGggPyBmaWVsZEluZm9zIDogZ2V0RGVmYXVsdEZpZWxkSW5mb3MoKSkpKFxuICAgIChwb3B1cEluZm8/LmZpZWxkSW5mb3MgfHwgW10pLmZpbHRlcigoaSkgPT4gaS52aXNpYmxlKVxuICApXG4gIC8vIGNvbnN0IGZpZWxkcyA9IG91dHB1dERTLmdldFNjaGVtYSgpPy5maWVsZHNcbiAgLy8gbGV0IHNlbGVjdGVkRmllbGROYW1lc1xuICAvLyBpZiAocXVlcnlJdGVtLnJlc3VsdEZpZWxkc1R5cGUgPT09IEZpZWxkc1R5cGUuU2VsZWN0QXR0cmlidXRlcykge1xuICAvLyAgIHNlbGVjdGVkRmllbGROYW1lcyA9IFtdLmNvbmNhdChxdWVyeUl0ZW0ucmVzdWx0RGlzcGxheUZpZWxkcywgcXVlcnlJdGVtLnJlc3VsdFRpdGxlRmllbGRzKVxuICAvLyB9IGVsc2Uge1xuICAvLyAgIHNlbGVjdGVkRmllbGROYW1lcyA9IGZpZWxkSW5mb3MubWFwKChmaWVsZEluZm8pID0+IGZpZWxkSW5mby5maWVsZE5hbWUpXG4gIC8vIH1cbiAgLy8gY29uc3Qgc2VsZWN0ZWRGaWVsZEppbXVOYW1lcyA9IGZpZWxkc1xuICAvLyAgID8gT2JqZWN0LmtleXMoZmllbGRzKS5maWx0ZXIoKGppbXVOYW1lKSA9PiBzZWxlY3RlZEZpZWxkTmFtZXMuaW5jbHVkZXMoZmllbGRzW2ppbXVOYW1lXS5uYW1lKSlcbiAgLy8gICA6IFtdXG4gIC8vIG91dHB1dERTLnNldFNlbGVjdGVkRmllbGRzKHNlbGVjdGVkRmllbGRKaW11TmFtZXMpXG4gIGNvbnN0IHN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpXG4gIGxldCByZWNvcmRzID0gYXdhaXQgb3V0cHV0RFMubG9hZChxdWVyeVBhcmFtcywgeyB3aWRnZXRJZCB9KVxuICBjb25zdCBmZXRjaFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0VGltZVxuICBcbiAgaWYgKHJlY29yZHMgPT0gbnVsbCkge1xuICAgIHJlY29yZHMgPSBbXVxuICB9XG4gIGNvbnN0IG9yaWdpbkRzOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlID0gb3V0cHV0RFMuZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKVswXSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gIFxuICBjb25zdCBsYXllclN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpXG4gIGNvbnN0IGxheWVyT2JqZWN0ID0gYXdhaXQgZ2V0TGF5ZXJPYmplY3Qob3JpZ2luRHMpXG4gIGNvbnN0IGxheWVyVGltZSA9IHBlcmZvcm1hbmNlLm5vdygpIC0gbGF5ZXJTdGFydFRpbWVcblxuICBjb25zb2xlLmxvZyhgW1FVRVJZU0lNUExFLVBFUkZdIGV4ZWN1dGVRdWVyeSBjb21wbGV0ZS4gRmV0Y2g6ICR7TWF0aC5yb3VuZChmZXRjaFRpbWUpfW1zLCBMYXllcjogJHtNYXRoLnJvdW5kKGxheWVyVGltZSl9bXMsIFRvdGFsOiAke01hdGgucm91bmQocGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydFRpbWUpfW1zLCBDb3VudDogJHtyZWNvcmRzLmxlbmd0aH1gKVxuICBcbiAgcmVjb3Jkcy5mb3JFYWNoKChyZWNvcmQpID0+IHtcbiAgICBjb25zdCBmZWF0dXJlID0gKHJlY29yZCBhcyBhbnkpLmZlYXR1cmVcbiAgICBpZiAobGF5ZXJPYmplY3QpIHtcbiAgICAgIGZlYXR1cmUuc291cmNlTGF5ZXIgPSAobGF5ZXJPYmplY3QgYXMgYW55KS5hc3NvY2lhdGVkTGF5ZXIgfHwgbGF5ZXJPYmplY3RcbiAgICB9XG4gICAgZmVhdHVyZS5sYXllciA9IGZlYXR1cmUuc291cmNlTGF5ZXJcbiAgfSlcbiAgY29uc3QgcXVlcnlSZXN1bHQgPSB7XG4gICAgcmVjb3JkcyxcbiAgICBmaWVsZHM6IGZpZWxkSW5mb3MubWFwKChmaWVsZEluZm8pID0+IGZpZWxkSW5mby5maWVsZE5hbWUpXG4gIH1cblxuICAvLyBwdWJsaXNoIG1lc3NhZ2VcbiAgY29uc3QgZGF0YVJlY29yZFNldENoYW5nZU1lc3NhZ2UgPSBuZXcgRGF0YVJlY29yZFNldENoYW5nZU1lc3NhZ2Uod2lkZ2V0SWQsIFJlY29yZFNldENoYW5nZVR5cGUuQ3JlYXRlVXBkYXRlLCBbe1xuICAgIHJlY29yZHM6IG91dHB1dERTLmdldEFsbExvYWRlZFJlY29yZHMoKSxcbiAgICBmaWVsZHM6IHF1ZXJ5UmVzdWx0LmZpZWxkcyxcbiAgICBkYXRhU291cmNlOiBvdXRwdXREUyxcbiAgICBuYW1lOiBvdXRwdXREUy5pZCxcbiAgICBsYWJlbDogb3V0cHV0RFMuZ2V0TGFiZWwoKVxuICB9XSlcbiAgTWVzc2FnZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5wdWJsaXNoTWVzc2FnZShkYXRhUmVjb3JkU2V0Q2hhbmdlTWVzc2FnZSlcblxuICByZXR1cm4gcXVlcnlSZXN1bHRcbn1cblxuYXN5bmMgZnVuY3Rpb24gZ2V0TGF5ZXJPYmplY3QgKGRhdGFTb3VyY2U6IEZlYXR1cmVMYXllckRhdGFTb3VyY2UpIHtcbiAgY29uc3QgbGF5ZXJPYmplY3QgPSBhd2FpdCBkYXRhU291cmNlLmNyZWF0ZUpTQVBJTGF5ZXJCeURhdGFTb3VyY2UoKSBhcyBfX2VzcmkuTGF5ZXJcbiAgLy8gbGF5ZXJPYmplY3QgbWF5IGJlIHVuZGVmaW5lZCBpZiB0aGUgZGF0YSBzb3VyY2UgaXMgYWRkZWQgYnkgVVJMXG4gIGlmIChsYXllck9iamVjdCkge1xuICAgIGF3YWl0IGxheWVyT2JqZWN0LmxvYWQoKVxuICB9XG4gIHJldHVybiBsYXllck9iamVjdFxufVxuXG5cbiIsIi8qKlxuICogVXRpbGl0eSBmdW5jdGlvbnMgZm9yIG1hbmFnaW5nIHJlc3VsdHMgYWNjdW11bGF0aW9uIGluIFF1ZXJ5U2ltcGxlIHdpZGdldC5cbiAqIEhhbmRsZXMgXCJBZGQgdG9cIiBhbmQgXCJSZW1vdmUgZnJvbVwiIG1vZGVzIGZvciBhY2N1bXVsYXRpbmcgcXVlcnkgcmVzdWx0cy5cbiAqL1xuXG5pbXBvcnQgdHlwZSB7IEZlYXR1cmVMYXllckRhdGFTb3VyY2UsIEZlYXR1cmVEYXRhUmVjb3JkLCBEYXRhUmVjb3JkIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgRGF0YVNvdXJjZU1hbmFnZXIsIERhdGFTb3VyY2VTdGF0dXMsIE1lc3NhZ2VNYW5hZ2VyLCBEYXRhUmVjb3JkU2V0Q2hhbmdlTWVzc2FnZSwgUmVjb3JkU2V0Q2hhbmdlVHlwZSwgRGF0YVJlY29yZHNTZWxlY3Rpb25DaGFuZ2VNZXNzYWdlIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlciB9IGZyb20gJ3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uJ1xuaW1wb3J0IHsgcmVtb3ZlSGlnaGxpZ2h0R3JhcGhpY3MgfSBmcm9tICcuL2dyYXBoaWNzLWxheWVyLXV0aWxzJ1xuXG5jb25zdCBkZWJ1Z0xvZ2dlciA9IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIoKVxuXG4vKipcbiAqIEdlbmVyYXRlcyBhIGNvbXBvc2l0ZSBrZXkgZm9yIGEgcmVjb3JkIHRoYXQgaW5jbHVkZXMgYm90aCBvcmlnaW4gZGF0YSBzb3VyY2UgSUQgYW5kIG9iamVjdElkLlxuICogVGhpcyBlbnN1cmVzIHVuaXF1ZW5lc3MgYWNyb3NzIGRpZmZlcmVudCBsYXllcnMgdGhhdCBtYXkgaGF2ZSB0aGUgc2FtZSBvYmplY3RJZC5cbiAqIFxuICogQHBhcmFtIHJlY29yZCAtIFRoZSBmZWF0dXJlIGRhdGEgcmVjb3JkXG4gKiBAcGFyYW0gb3V0cHV0RFMgLSBUaGUgb3V0cHV0IGRhdGEgc291cmNlIGNvbnRhaW5pbmcgdGhlIHJlY29yZFxuICogQHJldHVybnMgQ29tcG9zaXRlIGtleSBzdHJpbmc6IGAke29yaWdpbkRTSWR9XyR7b2JqZWN0SWR9YFxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0UmVjb3JkS2V5KFxuICByZWNvcmQ6IEZlYXR1cmVEYXRhUmVjb3JkLFxuICBvdXRwdXREUzogRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuKTogc3RyaW5nIHtcbiAgY29uc3Qgb3JpZ2luRFMgPSBvdXRwdXREUy5nZXRPcmlnaW5EYXRhU291cmNlcygpPy5bMF0gYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICBjb25zdCBvcmlnaW5EU0lkID0gb3JpZ2luRFM/LmlkIHx8IG91dHB1dERTLmlkIC8vIEZhbGxiYWNrIHRvIG91dHB1dERTIGlmIG5vIG9yaWdpblxuICBjb25zdCBvYmplY3RJZCA9IHJlY29yZC5nZXRJZCgpXG4gIGNvbnN0IGtleSA9IGAke29yaWdpbkRTSWR9XyR7b2JqZWN0SWR9YFxuICBcbiAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgZXZlbnQ6ICdyZWNvcmQta2V5LWdlbmVyYXRlZCcsXG4gICAgb3JpZ2luRFNJZCxcbiAgICBvYmplY3RJZCxcbiAgICBrZXksXG4gICAgaGFzT3JpZ2luRFM6ICEhb3JpZ2luRFNcbiAgfSlcbiAgXG4gIHJldHVybiBrZXlcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGFuIGFjY3VtdWxhdGVkIHJlc3VsdHMgZGF0YSBzb3VyY2UgZm9yIHN0b3JpbmcgbWVyZ2VkIHF1ZXJ5IHJlc3VsdHMuXG4gKiBUaGlzIGRhdGEgc291cmNlIGlzIHdpZGdldC1sZXZlbCBhbmQgcGVyc2lzdHMgYWNyb3NzIG11bHRpcGxlIHF1ZXJpZXMuXG4gKiBcbiAqIEBwYXJhbSB3aWRnZXRJZCAtIFRoZSB3aWRnZXQgSURcbiAqIEBwYXJhbSBvcmlnaW5EUyAtIFRoZSBvcmlnaW4gZGF0YSBzb3VyY2UgdG8gdXNlIGFzIHRoZSBiYXNlXG4gKiBAcmV0dXJucyBUaGUgY3JlYXRlZCBhY2N1bXVsYXRlZCByZXN1bHRzIGRhdGEgc291cmNlXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVBY2N1bXVsYXRlZFJlc3VsdHNEYXRhU291cmNlKFxuICB3aWRnZXRJZDogc3RyaW5nLFxuICBvcmlnaW5EUzogRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuKTogUHJvbWlzZTxGZWF0dXJlTGF5ZXJEYXRhU291cmNlPiB7XG4gIGNvbnN0IGFjY3VtdWxhdGVkRFNJZCA9IGAke3dpZGdldElkfV9hY2N1bXVsYXRlZF9yZXN1bHRzYFxuICBcbiAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgZXZlbnQ6ICdjcmVhdGluZy1hY2N1bXVsYXRlZC1kcycsXG4gICAgd2lkZ2V0SWQsXG4gICAgYWNjdW11bGF0ZWREU0lkLFxuICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkXG4gIH0pXG4gIFxuICAvLyBDaGVjayBpZiBkYXRhIHNvdXJjZSBhbHJlYWR5IGV4aXN0c1xuICBjb25zdCBkc01hbmFnZXIgPSBEYXRhU291cmNlTWFuYWdlci5nZXRJbnN0YW5jZSgpXG4gIGxldCBhY2N1bXVsYXRlZERTID0gZHNNYW5hZ2VyLmdldERhdGFTb3VyY2UoYWNjdW11bGF0ZWREU0lkKSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gIFxuICBpZiAoYWNjdW11bGF0ZWREUykge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgZXZlbnQ6ICdhY2N1bXVsYXRlZC1kcy1hbHJlYWR5LWV4aXN0cycsXG4gICAgICBhY2N1bXVsYXRlZERTSWRcbiAgICB9KVxuICAgIHJldHVybiBhY2N1bXVsYXRlZERTXG4gIH1cbiAgXG4gIC8vIEdldCBvcmlnaW4gZGF0YSBzb3VyY2UgSlNPTiB0byBjcmVhdGUgb3V0cHV0IGRhdGEgc291cmNlXG4gIGNvbnN0IG9yaWdpbkRhdGFTb3VyY2VKc29uID0gb3JpZ2luRFMuZ2V0RGF0YVNvdXJjZUpzb24oKVxuICBcbiAgLy8gQ3JlYXRlIG91dHB1dCBkYXRhIHNvdXJjZSBKU09OIHNpbWlsYXIgdG8gaG93IHF1ZXJ5IGl0ZW1zIGNyZWF0ZSBvdXRwdXQgRFNcbiAgY29uc3Qgb3V0cHV0RGF0YVNvdXJjZUpzb24gPSB7XG4gICAgaWQ6IGFjY3VtdWxhdGVkRFNJZCxcbiAgICBsYWJlbDogJ0FjY3VtdWxhdGVkIFJlc3VsdHMnLFxuICAgIHR5cGU6IG9yaWdpbkRhdGFTb3VyY2VKc29uPy50eXBlLFxuICAgIGdlb21ldHJ5VHlwZTogb3JpZ2luRGF0YVNvdXJjZUpzb24/Lmdlb21ldHJ5VHlwZSxcbiAgICB1cmw6IG9yaWdpbkRhdGFTb3VyY2VKc29uPy51cmwsXG4gICAgaXRlbUlkOiBvcmlnaW5EYXRhU291cmNlSnNvbj8uaXRlbUlkLFxuICAgIHBvcnRhbFVybDogb3JpZ2luRGF0YVNvdXJjZUpzb24/LnBvcnRhbFVybCxcbiAgICBvcmlnaW5EYXRhU291cmNlczogW3tcbiAgICAgIGRhdGFTb3VyY2VJZDogb3JpZ2luRFMuaWQsXG4gICAgICBtYWluRGF0YVNvdXJjZUlkOiBvcmlnaW5EUy5pZCxcbiAgICAgIHJvb3REYXRhU291cmNlSWQ6IG9yaWdpbkRTLmlkXG4gICAgfV0sXG4gICAgbGF5ZXJJZDogb3JpZ2luRGF0YVNvdXJjZUpzb24/LmxheWVySWQsXG4gICAgaXNEYXRhSW5EYXRhU291cmNlSW5zdGFuY2U6IG9yaWdpbkRhdGFTb3VyY2VKc29uPy5pc0RhdGFJbkRhdGFTb3VyY2VJbnN0YW5jZSxcbiAgICBpc091dHB1dEZyb21XaWRnZXQ6IHRydWVcbiAgfVxuICBcbiAgLy8gQ3JlYXRlIHRoZSBkYXRhIHNvdXJjZSB1c2luZyBEYXRhU291cmNlTWFuYWdlclxuICAvLyBOb3RlOiBUaGlzIGZvbGxvd3MgdGhlIHBhdHRlcm4gZnJvbSBzZXR0aW5nLnRzeCBmb3IgY3JlYXRpbmcgb3V0cHV0IGRhdGEgc291cmNlc1xuICBhY2N1bXVsYXRlZERTID0gZHNNYW5hZ2VyLmNyZWF0ZURhdGFTb3VyY2VCeURhdGFTb3VyY2VKc29uKG91dHB1dERhdGFTb3VyY2VKc29uKSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gIFxuICAvLyBTZXQgaW5pdGlhbCBzdGF0dXNcbiAgYWNjdW11bGF0ZWREUy5zZXRTdGF0dXMoRGF0YVNvdXJjZVN0YXR1cy5Ob3RSZWFkeSlcbiAgYWNjdW11bGF0ZWREUy5zZXRDb3VudFN0YXR1cyhEYXRhU291cmNlU3RhdHVzLk5vdFJlYWR5KVxuICBcbiAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgZXZlbnQ6ICdhY2N1bXVsYXRlZC1kcy1jcmVhdGVkJyxcbiAgICBhY2N1bXVsYXRlZERTSWQsXG4gICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgc3RhdHVzOiBhY2N1bXVsYXRlZERTLmdldFN0YXR1cygpXG4gIH0pXG4gIFxuICByZXR1cm4gYWNjdW11bGF0ZWREU1xufVxuXG4vKipcbiAqIE1lcmdlcyBuZXcgcXVlcnkgcmVzdWx0cyB3aXRoIGV4aXN0aW5nIHJlY29yZHMuXG4gKiBEZWR1cGxpY2F0ZXMgcmVjb3JkcyB1c2luZyBjb21wb3NpdGUga2V5cyAob3JpZ2luRFNJZF9vYmplY3RJZCkuXG4gKiBcbiAqIFRoaXMgZnVuY3Rpb24gbWVyZ2VzIG5ldyByZWNvcmRzIHdpdGggZXhpc3RpbmcgcmVjb3JkcyB0aGF0IHdlcmUgY2FwdHVyZWRcbiAqIGJlZm9yZSB0aGUgcXVlcnkgZXhlY3V0ZWQuIFRoZSBjYWxsZXIgaXMgcmVzcG9uc2libGUgZm9yIHN0b3JpbmcgdGhlIG1lcmdlZFxuICogcmVjb3JkcyAodHlwaWNhbGx5IGluIHJlY29yZHNSZWYgb3Igc3RhdGUpLlxuICogXG4gKiBAcGFyYW0gb3V0cHV0RFMgLSBUaGUgb3V0cHV0IGRhdGEgc291cmNlICh1c2VkIGZvciBrZXkgZ2VuZXJhdGlvbilcbiAqIEBwYXJhbSBuZXdSZWNvcmRzIC0gTmV3IHJlY29yZHMgdG8gbWVyZ2UgaW5cbiAqIEBwYXJhbSBleGlzdGluZ1JlY29yZHMgLSBFeGlzdGluZyByZWNvcmRzIGNhcHR1cmVkIGJlZm9yZSBxdWVyeSBleGVjdXRpb24gKG9wdGlvbmFsLCBkZWZhdWx0cyB0byBlbXB0eSBhcnJheSlcbiAqIEByZXR1cm5zIEFycmF5IG9mIGFsbCBtZXJnZWQgcmVjb3JkcyAoZXhpc3RpbmcgKyBuZXcgdW5pcXVlIHJlY29yZHMpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtZXJnZVJlc3VsdHNJbnRvQWNjdW11bGF0ZWQoXG4gIG91dHB1dERTOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLFxuICBuZXdSZWNvcmRzOiBGZWF0dXJlRGF0YVJlY29yZFtdLFxuICBleGlzdGluZ1JlY29yZHM6IEZlYXR1cmVEYXRhUmVjb3JkW10gPSBbXVxuKTogRmVhdHVyZURhdGFSZWNvcmRbXSB7XG4gIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgIGV2ZW50OiAnbWVyZ2luZy1yZXN1bHRzLXN0YXJ0JyxcbiAgICBvdXRwdXREU0lkOiBvdXRwdXREUy5pZCxcbiAgICBleGlzdGluZ1JlY29yZHNDb3VudDogZXhpc3RpbmdSZWNvcmRzLmxlbmd0aCxcbiAgICBuZXdSZWNvcmRzQ291bnQ6IG5ld1JlY29yZHMubGVuZ3RoXG4gIH0pXG4gIFxuICAvLyBCdWlsZCBTZXQgb2YgZXhpc3RpbmcgcmVjb3JkIGtleXMgZm9yIGZhc3QgbG9va3VwXG4gIGNvbnN0IGV4aXN0aW5nS2V5cyA9IG5ldyBTZXQoXG4gICAgZXhpc3RpbmdSZWNvcmRzLm1hcChyZWNvcmQgPT4gZ2V0UmVjb3JkS2V5KHJlY29yZCwgb3V0cHV0RFMpKVxuICApXG4gIFxuICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICBldmVudDogJ2V4aXN0aW5nLXJlY29yZHMtY2hlY2snLFxuICAgIGV4aXN0aW5nUmVjb3Jkc0NvdW50OiBleGlzdGluZ1JlY29yZHMubGVuZ3RoLFxuICAgIGV4aXN0aW5nS2V5c0NvdW50OiBleGlzdGluZ0tleXMuc2l6ZVxuICB9KVxuICBcbiAgLy8gRmlsdGVyIG5ldyByZWNvcmRzIHRvIG9ubHkgaW5jbHVkZSB0aG9zZSBub3QgYWxyZWFkeSBpbiBvdXRwdXQgRFNcbiAgY29uc3QgdW5pcXVlTmV3UmVjb3JkcyA9IG5ld1JlY29yZHMuZmlsdGVyKHJlY29yZCA9PiB7XG4gICAgY29uc3Qga2V5ID0gZ2V0UmVjb3JkS2V5KHJlY29yZCwgb3V0cHV0RFMpXG4gICAgY29uc3QgaXNEdXBsaWNhdGUgPSBleGlzdGluZ0tleXMuaGFzKGtleSlcbiAgICBcbiAgICBpZiAoaXNEdXBsaWNhdGUpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ2R1cGxpY2F0ZS1yZWNvcmQtc2tpcHBlZCcsXG4gICAgICAgIGtleSxcbiAgICAgICAgb2JqZWN0SWQ6IHJlY29yZC5nZXRJZCgpXG4gICAgICB9KVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gIWlzRHVwbGljYXRlXG4gIH0pXG4gIFxuICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICBldmVudDogJ2RlZHVwbGljYXRpb24tY29tcGxldGUnLFxuICAgIG5ld1JlY29yZHNDb3VudDogbmV3UmVjb3Jkcy5sZW5ndGgsXG4gICAgdW5pcXVlTmV3UmVjb3Jkc0NvdW50OiB1bmlxdWVOZXdSZWNvcmRzLmxlbmd0aCxcbiAgICBkdXBsaWNhdGVzU2tpcHBlZDogbmV3UmVjb3Jkcy5sZW5ndGggLSB1bmlxdWVOZXdSZWNvcmRzLmxlbmd0aFxuICB9KVxuICBcbiAgLy8gTWVyZ2UgcmVjb3Jkc1xuICBjb25zdCBtZXJnZWRSZWNvcmRzID0gWy4uLmV4aXN0aW5nUmVjb3JkcywgLi4udW5pcXVlTmV3UmVjb3Jkc11cbiAgXG4gIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgIGV2ZW50OiAnbWVyZ2UtY29tcGxldGUnLFxuICAgIHRvdGFsUmVjb3Jkc0FmdGVyTWVyZ2U6IG1lcmdlZFJlY29yZHMubGVuZ3RoLFxuICAgIGV4aXN0aW5nQ291bnQ6IGV4aXN0aW5nUmVjb3Jkcy5sZW5ndGgsXG4gICAgbmV3VW5pcXVlQ291bnQ6IHVuaXF1ZU5ld1JlY29yZHMubGVuZ3RoXG4gIH0pXG4gIFxuICByZXR1cm4gbWVyZ2VkUmVjb3Jkc1xufVxuXG4vKipcbiAqIFJlbW92ZXMgbWF0Y2hpbmcgcmVjb3JkcyBmcm9tIHdpZGdldC1sZXZlbCBhY2N1bXVsYXRlZCByZWNvcmRzLlxuICogTWF0Y2hlcyByZWNvcmRzIHVzaW5nIGNvbXBvc2l0ZSBrZXlzIChvcmlnaW5EU0lkX29iamVjdElkKS5cbiAqIFxuICogVGhpcyBmdW5jdGlvbiByZW1vdmVzIHJlY29yZHMgZnJvbSBleGlzdGluZyBhY2N1bXVsYXRlZCByZWNvcmRzIHRoYXQgd2VyZSBjYXB0dXJlZFxuICogYmVmb3JlIHRoZSBxdWVyeSBleGVjdXRlZC4gVGhlIGNhbGxlciBpcyByZXNwb25zaWJsZSBmb3Igc3RvcmluZyB0aGUgcmVtYWluaW5nXG4gKiByZWNvcmRzICh0eXBpY2FsbHkgaW4gcmVjb3Jkc1JlZiBvciBzdGF0ZSkuXG4gKiBcbiAqIEBwYXJhbSBvdXRwdXREUyAtIFRoZSBvdXRwdXQgZGF0YSBzb3VyY2UgKHVzZWQgZm9yIGtleSBnZW5lcmF0aW9uKVxuICogQHBhcmFtIHJlY29yZHNUb1JlbW92ZSAtIFJlY29yZHMgdG8gcmVtb3ZlIChmcm9tIHF1ZXJ5IHJlc3VsdHMpXG4gKiBAcGFyYW0gZXhpc3RpbmdBY2N1bXVsYXRlZFJlY29yZHMgLSBFeGlzdGluZyBhY2N1bXVsYXRlZCByZWNvcmRzIGNhcHR1cmVkIGJlZm9yZSBxdWVyeSBleGVjdXRpb24gKG9wdGlvbmFsLCBkZWZhdWx0cyB0byBlbXB0eSBhcnJheSlcbiAqIEByZXR1cm5zIEFycmF5IG9mIHJlbWFpbmluZyByZWNvcmRzIGFmdGVyIHJlbW92YWxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZVJlc3VsdHNGcm9tQWNjdW11bGF0ZWQoXG4gIG91dHB1dERTOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLFxuICByZWNvcmRzVG9SZW1vdmU6IEZlYXR1cmVEYXRhUmVjb3JkW10sXG4gIGV4aXN0aW5nQWNjdW11bGF0ZWRSZWNvcmRzOiBGZWF0dXJlRGF0YVJlY29yZFtdID0gW11cbik6IEZlYXR1cmVEYXRhUmVjb3JkW10ge1xuICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICBldmVudDogJ3JlbW92aW5nLXJlc3VsdHMtc3RhcnQnLFxuICAgIG91dHB1dERTSWQ6IG91dHB1dERTLmlkLFxuICAgIHJlY29yZHNUb1JlbW92ZUNvdW50OiByZWNvcmRzVG9SZW1vdmUubGVuZ3RoLFxuICAgIGV4aXN0aW5nQWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGV4aXN0aW5nQWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aFxuICB9KVxuICBcbiAgLy8gSWYgbm8gYWNjdW11bGF0ZWQgcmVjb3Jkcywgbm90aGluZyB0byByZW1vdmVcbiAgaWYgKGV4aXN0aW5nQWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA9PT0gMCkge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgZXZlbnQ6ICduby1hY2N1bXVsYXRlZC1yZWNvcmRzLXRvLXJlbW92ZScsXG4gICAgICBvdXRwdXREU0lkOiBvdXRwdXREUy5pZFxuICAgIH0pXG4gICAgcmV0dXJuIFtdXG4gIH1cbiAgXG4gIC8vIElmIG5vIHJlY29yZHMgdG8gcmVtb3ZlLCByZXR1cm4gZXhpc3RpbmcgcmVjb3JkcyB1bmNoYW5nZWRcbiAgaWYgKHJlY29yZHNUb1JlbW92ZS5sZW5ndGggPT09IDApIHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgIGV2ZW50OiAnbm8tcmVjb3Jkcy10by1yZW1vdmUnLFxuICAgICAgb3V0cHV0RFNJZDogb3V0cHV0RFMuaWQsXG4gICAgICBleGlzdGluZ0FjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiBleGlzdGluZ0FjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGhcbiAgICB9KVxuICAgIHJldHVybiBleGlzdGluZ0FjY3VtdWxhdGVkUmVjb3Jkc1xuICB9XG4gIFxuICAvLyBCdWlsZCBTZXQgb2Yga2V5cyB0byByZW1vdmUgZm9yIGZhc3QgbG9va3VwXG4gIGNvbnN0IHJlbW92ZUtleXMgPSBuZXcgU2V0KFxuICAgIHJlY29yZHNUb1JlbW92ZS5tYXAocmVjb3JkID0+IGdldFJlY29yZEtleShyZWNvcmQsIG91dHB1dERTKSlcbiAgKVxuICBcbiAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgZXZlbnQ6ICdyZW1vdmUta2V5cy1idWlsdCcsXG4gICAgZXhpc3RpbmdBY2N1bXVsYXRlZFJlY29yZHNDb3VudDogZXhpc3RpbmdBY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoLFxuICAgIHJlbW92ZUtleXNDb3VudDogcmVtb3ZlS2V5cy5zaXplXG4gIH0pXG4gIFxuICAvLyBGaWx0ZXIgb3V0IHJlY29yZHMgdGhhdCBtYXRjaCBrZXlzIHRvIHJlbW92ZVxuICBjb25zdCByZW1haW5pbmdSZWNvcmRzOiBGZWF0dXJlRGF0YVJlY29yZFtdID0gW11cbiAgY29uc3QgcmVtb3ZlZFJlY29yZHM6IEZlYXR1cmVEYXRhUmVjb3JkW10gPSBbXVxuICBcbiAgZXhpc3RpbmdBY2N1bXVsYXRlZFJlY29yZHMuZm9yRWFjaChyZWNvcmQgPT4ge1xuICAgIGNvbnN0IGtleSA9IGdldFJlY29yZEtleShyZWNvcmQsIG91dHB1dERTKVxuICAgIGNvbnN0IHNob3VsZFJlbW92ZSA9IHJlbW92ZUtleXMuaGFzKGtleSlcbiAgICBcbiAgICBpZiAoc2hvdWxkUmVtb3ZlKSB7XG4gICAgICByZW1vdmVkUmVjb3Jkcy5wdXNoKHJlY29yZClcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ3JlY29yZC1tYXJrZWQtZm9yLXJlbW92YWwnLFxuICAgICAgICBrZXksXG4gICAgICAgIG9iamVjdElkOiByZWNvcmQuZ2V0SWQoKSxcbiAgICAgICAgb3JpZ2luRFNJZDogKHJlY29yZC5nZXREYXRhU291cmNlPy4oKSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlKT8uZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKT8uWzBdPy5pZCB8fCAndW5rbm93bidcbiAgICAgIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIHJlbWFpbmluZ1JlY29yZHMucHVzaChyZWNvcmQpXG4gICAgfVxuICB9KVxuICBcbiAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgZXZlbnQ6ICdyZW1vdmFsLWNvbXBsZXRlJyxcbiAgICByZWNvcmRzUmVtb3ZlZDogcmVtb3ZlZFJlY29yZHMubGVuZ3RoLFxuICAgIHJlbWFpbmluZ1JlY29yZHNDb3VudDogcmVtYWluaW5nUmVjb3Jkcy5sZW5ndGgsXG4gICAgcmVjb3Jkc1RvUmVtb3ZlQ291bnQ6IHJlY29yZHNUb1JlbW92ZS5sZW5ndGgsXG4gICAgbWF0Y2hlZFJlY29yZHNDb3VudDogcmVtb3ZlZFJlY29yZHMubGVuZ3RoLFxuICAgIHVubWF0Y2hlZFJlY29yZHNDb3VudDogcmVjb3Jkc1RvUmVtb3ZlLmxlbmd0aCAtIHJlbW92ZWRSZWNvcmRzLmxlbmd0aFxuICB9KVxuICBcbiAgcmV0dXJuIHJlbWFpbmluZ1JlY29yZHNcbn1cblxuLyoqXG4gKiBSZW1vdmVzIHJlY29yZHMgZnJvbSBvcmlnaW4gZGF0YSBzb3VyY2Ugc2VsZWN0aW9ucy5cbiAqIEdyb3VwcyByZWNvcmRzIGJ5IHRoZWlyIG9yaWdpbiBkYXRhIHNvdXJjZSBhbmQgdXBkYXRlcyBlYWNoIG9yaWdpbiBEUydzIHNlbGVjdGlvbiBzZXBhcmF0ZWx5LlxuICogVGhpcyBlbnN1cmVzIG1hcCBzZWxlY3Rpb24gaXMgdXBkYXRlZCBjb3JyZWN0bHkgd2hlbiByZWNvcmRzIGNvbWUgZnJvbSBtdWx0aXBsZSBvcmlnaW4gbGF5ZXJzLlxuICogQWxzbyByZW1vdmVzIGdyYXBoaWNzIGZyb20gZ3JhcGhpY3MgbGF5ZXIgaWYgdXNpbmcgZ3JhcGhpY3MgbGF5ZXIgaGlnaGxpZ2h0aW5nLlxuICogXG4gKiBAcGFyYW0gd2lkZ2V0SWQgLSBUaGUgd2lkZ2V0IElEIGZvciBwdWJsaXNoaW5nIG1lc3NhZ2VzXG4gKiBAcGFyYW0gcmVjb3Jkc1RvUmVtb3ZlIC0gUmVjb3JkcyB0byByZW1vdmUgZnJvbSBzZWxlY3Rpb25cbiAqIEBwYXJhbSBvdXRwdXREUyAtIFRoZSBvdXRwdXQgZGF0YSBzb3VyY2UgKHVzZWQgZm9yIGtleSBnZW5lcmF0aW9uKVxuICogQHBhcmFtIHVzZUdyYXBoaWNzTGF5ZXIgLSBXaGV0aGVyIHRvIHJlbW92ZSBncmFwaGljcyBmcm9tIGdyYXBoaWNzIGxheWVyIChkZWZhdWx0OiBmYWxzZSlcbiAqIEBwYXJhbSBncmFwaGljc0xheWVyIC0gR3JhcGhpY3MgbGF5ZXIgaW5zdGFuY2UgKHJlcXVpcmVkIGlmIHVzZUdyYXBoaWNzTGF5ZXIgaXMgdHJ1ZSlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZVJlY29yZHNGcm9tT3JpZ2luU2VsZWN0aW9ucyhcbiAgd2lkZ2V0SWQ6IHN0cmluZyxcbiAgcmVjb3Jkc1RvUmVtb3ZlOiBGZWF0dXJlRGF0YVJlY29yZFtdLFxuICBvdXRwdXREUzogRmVhdHVyZUxheWVyRGF0YVNvdXJjZSxcbiAgdXNlR3JhcGhpY3NMYXllcj86IGJvb2xlYW4sXG4gIGdyYXBoaWNzTGF5ZXI/OiBfX2VzcmkuR3JhcGhpY3NMYXllclxuKTogdm9pZCB7XG4gIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgIGV2ZW50OiAncmVtb3ZpbmctcmVjb3Jkcy1mcm9tLW9yaWdpbi1zZWxlY3Rpb25zLXN0YXJ0JyxcbiAgICB3aWRnZXRJZCxcbiAgICByZWNvcmRzVG9SZW1vdmVDb3VudDogcmVjb3Jkc1RvUmVtb3ZlLmxlbmd0aCxcbiAgICBvdXRwdXREU0lkOiBvdXRwdXREUy5pZCxcbiAgICB1c2VHcmFwaGljc0xheWVyOiAhIXVzZUdyYXBoaWNzTGF5ZXIsXG4gICAgaGFzR3JhcGhpY3NMYXllcjogISFncmFwaGljc0xheWVyXG4gIH0pXG4gIFxuICBpZiAocmVjb3Jkc1RvUmVtb3ZlLmxlbmd0aCA9PT0gMCkge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgZXZlbnQ6ICduby1yZWNvcmRzLXRvLXJlbW92ZS1mcm9tLXNlbGVjdGlvbicsXG4gICAgICB3aWRnZXRJZFxuICAgIH0pXG4gICAgcmV0dXJuXG4gIH1cbiAgXG4gIC8vIFJlbW92ZSBmcm9tIGdyYXBoaWNzIGxheWVyIGlmIHVzaW5nIGdyYXBoaWNzIGxheWVyIGhpZ2hsaWdodGluZ1xuICBpZiAodXNlR3JhcGhpY3NMYXllciAmJiBncmFwaGljc0xheWVyKSB7XG4gICAgY29uc3QgcmVjb3JkSWRzVG9SZW1vdmUgPSByZWNvcmRzVG9SZW1vdmUubWFwKHJlY29yZCA9PiByZWNvcmQuZ2V0SWQoKSlcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgIGV2ZW50OiAncmVtb3ZpbmctZ3JhcGhpY3MtZnJvbS1sYXllcicsXG4gICAgICB3aWRnZXRJZCxcbiAgICAgIHJlY29yZElkc0NvdW50OiByZWNvcmRJZHNUb1JlbW92ZS5sZW5ndGgsXG4gICAgICBncmFwaGljc0xheWVySWQ6IGdyYXBoaWNzTGF5ZXIuaWRcbiAgICB9KVxuICAgIHJlbW92ZUhpZ2hsaWdodEdyYXBoaWNzKGdyYXBoaWNzTGF5ZXIsIHJlY29yZElkc1RvUmVtb3ZlKVxuICB9XG4gIFxuICAvLyBHcm91cCByZWNvcmRzIGJ5IHRoZWlyIG9yaWdpbiBkYXRhIHNvdXJjZVxuICBjb25zdCByZWNvcmRzQnlPcmlnaW5EUyA9IG5ldyBNYXA8RmVhdHVyZUxheWVyRGF0YVNvdXJjZSwgRmVhdHVyZURhdGFSZWNvcmRbXT4oKVxuICBcbiAgcmVjb3Jkc1RvUmVtb3ZlLmZvckVhY2gocmVjb3JkID0+IHtcbiAgICBjb25zdCByZWNvcmREUyA9IHJlY29yZC5nZXREYXRhU291cmNlPy4oKSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gICAgbGV0IG9yaWdpbkRTOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlIHwgbnVsbCA9IG51bGxcbiAgICBcbiAgICBpZiAocmVjb3JkRFMpIHtcbiAgICAgIG9yaWdpbkRTID0gcmVjb3JkRFMuZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKT8uWzBdIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2UgfHwgcmVjb3JkRFNcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gRmFsbGJhY2s6IHRyeSB0byBnZXQgb3JpZ2luIGZyb20gb3V0cHV0RFNcbiAgICAgIG9yaWdpbkRTID0gb3V0cHV0RFMuZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKT8uWzBdIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2UgfHwgbnVsbFxuICAgIH1cbiAgICBcbiAgICBpZiAob3JpZ2luRFMpIHtcbiAgICAgIGlmICghcmVjb3Jkc0J5T3JpZ2luRFMuaGFzKG9yaWdpbkRTKSkge1xuICAgICAgICByZWNvcmRzQnlPcmlnaW5EUy5zZXQob3JpZ2luRFMsIFtdKVxuICAgICAgfVxuICAgICAgcmVjb3Jkc0J5T3JpZ2luRFMuZ2V0KG9yaWdpbkRTKSEucHVzaChyZWNvcmQpXG4gICAgfVxuICB9KVxuICBcbiAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgZXZlbnQ6ICdyZWNvcmRzLWdyb3VwZWQtYnktb3JpZ2luJyxcbiAgICB3aWRnZXRJZCxcbiAgICBvcmlnaW5EU0NvdW50OiByZWNvcmRzQnlPcmlnaW5EUy5zaXplLFxuICAgIHJlY29yZHNCeU9yaWdpbkRTOiBBcnJheS5mcm9tKHJlY29yZHNCeU9yaWdpbkRTLmVudHJpZXMoKSkubWFwKChbZHMsIHJlY29yZHNdKSA9PiAoe1xuICAgICAgb3JpZ2luRFNJZDogZHMuaWQsXG4gICAgICByZWNvcmRDb3VudDogcmVjb3Jkcy5sZW5ndGhcbiAgICB9KSlcbiAgfSlcbiAgXG4gIC8vIEZvciBlYWNoIG9yaWdpbiBEUywgZ2V0IGN1cnJlbnQgc2VsZWN0aW9uIGFuZCByZW1vdmUgbWF0Y2hpbmcgcmVjb3Jkc1xuICByZWNvcmRzQnlPcmlnaW5EUy5mb3JFYWNoKChyZWNvcmRzVG9SZW1vdmVGb3JPcmlnaW4sIG9yaWdpbkRTKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIEdldCBjdXJyZW50IHNlbGVjdGVkIHJlY29yZHMgZnJvbSB0aGlzIG9yaWdpbiBEU1xuICAgICAgY29uc3QgY3VycmVudFNlbGVjdGVkUmVjb3JkcyA9IG9yaWdpbkRTLmdldFNlbGVjdGVkUmVjb3JkcygpIHx8IFtdXG4gICAgICBjb25zdCBjdXJyZW50U2VsZWN0ZWRJZHMgPSBvcmlnaW5EUy5nZXRTZWxlY3RlZFJlY29yZElkcygpIHx8IFtdXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ3Byb2Nlc3Npbmctb3JpZ2luLWRzLXJlbW92YWwnLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgIGN1cnJlbnRTZWxlY3RlZENvdW50OiBjdXJyZW50U2VsZWN0ZWRSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgcmVjb3Jkc1RvUmVtb3ZlQ291bnQ6IHJlY29yZHNUb1JlbW92ZUZvck9yaWdpbi5sZW5ndGhcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIC8vIEJ1aWxkIFNldCBvZiBJRHMgdG8gcmVtb3ZlIGZvciBmYXN0IGxvb2t1cFxuICAgICAgY29uc3QgaWRzVG9SZW1vdmUgPSBuZXcgU2V0KFxuICAgICAgICByZWNvcmRzVG9SZW1vdmVGb3JPcmlnaW4ubWFwKHJlY29yZCA9PiByZWNvcmQuZ2V0SWQoKSlcbiAgICAgIClcbiAgICAgIFxuICAgICAgLy8gRmlsdGVyIG91dCByZWNvcmRzIHRoYXQgbWF0Y2ggSURzIHRvIHJlbW92ZVxuICAgICAgY29uc3QgcmVtYWluaW5nUmVjb3JkcyA9IGN1cnJlbnRTZWxlY3RlZFJlY29yZHMuZmlsdGVyKHJlY29yZCA9PiB7XG4gICAgICAgIGNvbnN0IHJlY29yZElkID0gcmVjb3JkLmdldElkKClcbiAgICAgICAgcmV0dXJuICFpZHNUb1JlbW92ZS5oYXMocmVjb3JkSWQpXG4gICAgICB9KVxuICAgICAgXG4gICAgICBjb25zdCByZW1haW5pbmdJZHMgPSByZW1haW5pbmdSZWNvcmRzLm1hcChyZWNvcmQgPT4gcmVjb3JkLmdldElkKCkpXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ29yaWdpbi1kcy1yZW1vdmFsLWZpbHRlcmVkJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICByZW1vdmVkQ291bnQ6IGN1cnJlbnRTZWxlY3RlZFJlY29yZHMubGVuZ3RoIC0gcmVtYWluaW5nUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgIHJlbWFpbmluZ0NvdW50OiByZW1haW5pbmdSZWNvcmRzLmxlbmd0aFxuICAgICAgfSlcbiAgICAgIFxuICAgICAgLy8gVXBkYXRlIHNlbGVjdGlvbiBpbiBvcmlnaW4gRFNcbiAgICAgIGlmICh0eXBlb2Ygb3JpZ2luRFMuc2VsZWN0UmVjb3Jkc0J5SWRzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIG9yaWdpbkRTLnNlbGVjdFJlY29yZHNCeUlkcyhyZW1haW5pbmdJZHMsIHJlbWFpbmluZ1JlY29yZHMgYXMgRmVhdHVyZURhdGFSZWNvcmRbXSlcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gUHVibGlzaCBzZWxlY3Rpb24gY2hhbmdlIG1lc3NhZ2UgZm9yIHRoaXMgb3JpZ2luIERTXG4gICAgICBNZXNzYWdlTWFuYWdlci5nZXRJbnN0YW5jZSgpLnB1Ymxpc2hNZXNzYWdlKFxuICAgICAgICBuZXcgRGF0YVJlY29yZHNTZWxlY3Rpb25DaGFuZ2VNZXNzYWdlKHdpZGdldElkLCByZW1haW5pbmdSZWNvcmRzIGFzIEZlYXR1cmVEYXRhUmVjb3JkW10sIFtvcmlnaW5EUy5pZF0pXG4gICAgICApXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ29yaWdpbi1kcy1zZWxlY3Rpb24tdXBkYXRlZCcsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgcmVtYWluaW5nUmVjb3Jkc0NvdW50OiByZW1haW5pbmdSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgbWVzc2FnZVB1Ymxpc2hlZDogdHJ1ZVxuICAgICAgfSlcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAnb3JpZ2luLWRzLXJlbW92YWwtZXJyb3InLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJyxcbiAgICAgICAgZXJyb3JTdGFjazogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnN0YWNrIDogdW5kZWZpbmVkXG4gICAgICB9KVxuICAgIH1cbiAgfSlcbiAgXG4gIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgIGV2ZW50OiAncmVtb3ZpbmctcmVjb3Jkcy1mcm9tLW9yaWdpbi1zZWxlY3Rpb25zLWNvbXBsZXRlJyxcbiAgICB3aWRnZXRJZCxcbiAgICBvcmlnaW5EU0NvdW50OiByZWNvcmRzQnlPcmlnaW5EUy5zaXplLFxuICAgIHRvdGFsUmVjb3Jkc1JlbW92ZWQ6IHJlY29yZHNUb1JlbW92ZS5sZW5ndGhcbiAgfSlcbn1cblxuLyoqXG4gKiBDbGVhcnMgYWxsIHJlY29yZHMgZnJvbSB0aGUgYWNjdW11bGF0ZWQgcmVzdWx0cyBkYXRhIHNvdXJjZS5cbiAqIFxuICogQHBhcmFtIGFjY3VtdWxhdGVkRFMgLSBUaGUgYWNjdW11bGF0ZWQgcmVzdWx0cyBkYXRhIHNvdXJjZSB0byBjbGVhclxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xlYXJBY2N1bXVsYXRlZFJlc3VsdHMoXG4gIGFjY3VtdWxhdGVkRFM6IEZlYXR1cmVMYXllckRhdGFTb3VyY2Vcbik6IHZvaWQge1xuICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICBldmVudDogJ2NsZWFyaW5nLWFjY3VtdWxhdGVkLXJlc3VsdHMnLFxuICAgIGFjY3VtdWxhdGVkRFNJZDogYWNjdW11bGF0ZWREUy5pZFxuICB9KVxuICBcbiAgLy8gU2V0IHN0YXR1cyB0byBOb3RSZWFkeSB0byBjbGVhciByZWNvcmRzXG4gIGFjY3VtdWxhdGVkRFMuc2V0U3RhdHVzKERhdGFTb3VyY2VTdGF0dXMuTm90UmVhZHkpXG4gIGFjY3VtdWxhdGVkRFMuc2V0Q291bnRTdGF0dXMoRGF0YVNvdXJjZVN0YXR1cy5Ob3RSZWFkeSlcbiAgXG4gIC8vIENsZWFyIGFueSBsb2FkZWQgcmVjb3JkcyBpZiBwb3NzaWJsZVxuICAvLyBOb3RlOiBNYXkgbmVlZCB0byB1c2UgRGF0YVNvdXJjZU1hbmFnZXIgbWV0aG9kcyBkZXBlbmRpbmcgb24gRXhCIEFQSVxuICBcbiAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgZXZlbnQ6ICdhY2N1bXVsYXRlZC1yZXN1bHRzLWNsZWFyZWQnLFxuICAgIGFjY3VtdWxhdGVkRFNJZDogYWNjdW11bGF0ZWREUy5pZFxuICB9KVxufVxuXG4iLCIvKipcbiAqIFV0aWxpdHkgZnVuY3Rpb25zIGZvciBtYW5hZ2luZyBmZWF0dXJlIHNlbGVjdGlvbiBpbiBRdWVyeVNpbXBsZSB3aWRnZXQuXG4gKiBDb25zb2xpZGF0ZXMgcmVwZWF0ZWQgc2VsZWN0aW9uIGxvZ2ljIHRvIGZvbGxvdyBEUlkgcHJpbmNpcGxlcy5cbiAqL1xuXG5pbXBvcnQgdHlwZSB7IERhdGFTb3VyY2UsIEZlYXR1cmVMYXllckRhdGFTb3VyY2UsIEZlYXR1cmVEYXRhUmVjb3JkIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgTWVzc2FnZU1hbmFnZXIsIERhdGFSZWNvcmRzU2VsZWN0aW9uQ2hhbmdlTWVzc2FnZSB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IGFkZEhpZ2hsaWdodEdyYXBoaWNzIGFzIGFkZEdyYXBoaWNzTGF5ZXJHcmFwaGljcywgY2xlYXJHcmFwaGljc0xheWVyIH0gZnJvbSAnLi9ncmFwaGljcy1sYXllci11dGlscydcbmltcG9ydCB7IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIgfSBmcm9tICd3aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbidcblxuY29uc3QgZGVidWdMb2dnZXIgPSBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyKClcblxuLyoqXG4gKiBDdXN0b20gZXZlbnQgbmFtZSBmb3IgUXVlcnlTaW1wbGUgdG8gbm90aWZ5IFdpZGdldCBvZiBzZWxlY3Rpb24gY2hhbmdlcy5cbiAqL1xuZXhwb3J0IGNvbnN0IFFVRVJZU0lNUExFX1NFTEVDVElPTl9FVkVOVCA9ICdxdWVyeXNpbXBsZS1zZWxlY3Rpb24tY2hhbmdlZCdcblxuLyoqXG4gKiBEaXNwYXRjaGVzIGEgY3VzdG9tIHNlbGVjdGlvbiBldmVudCB0byB0aGUgd2luZG93IHNvIHRoZSBtYWluIFdpZGdldCBjYW4gdHJhY2sgc3RhdGUuXG4gKiBcbiAqIEBwYXJhbSB3aWRnZXRJZCAtIFRoZSB3aWRnZXQgSURcbiAqIEBwYXJhbSByZWNvcmRJZHMgLSBBcnJheSBvZiBzZWxlY3RlZCByZWNvcmQgSURzXG4gKiBAcGFyYW0gb3V0cHV0RFMgLSBUaGUgb3V0cHV0IGRhdGEgc291cmNlXG4gKiBAcGFyYW0gcXVlcnlJdGVtQ29uZmlnSWQgLSBUaGUgY29uZmlnIElEIG9mIHRoZSBxdWVyeSB0aGF0IHByb2R1Y2VkIHRoZXNlIHJlc3VsdHNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRpc3BhdGNoU2VsZWN0aW9uRXZlbnQoXG4gIHdpZGdldElkOiBzdHJpbmcsXG4gIHJlY29yZElkczogc3RyaW5nW10sXG4gIG91dHB1dERTOiBEYXRhU291cmNlLFxuICBxdWVyeUl0ZW1Db25maWdJZDogc3RyaW5nXG4pOiB2b2lkIHtcbiAgY29uc3Qgb3JpZ2luRFMgPSBnZXRPcmlnaW5EYXRhU291cmNlKG91dHB1dERTKVxuICBjb25zdCBkYXRhU291cmNlSWQgPSBvcmlnaW5EUz8uaWRcbiAgXG4gIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICBldmVudDogJ2Rpc3BhdGNoU2VsZWN0aW9uRXZlbnQnLFxuICAgIHdpZGdldElkLFxuICAgIHJlY29yZENvdW50OiByZWNvcmRJZHMubGVuZ3RoLFxuICAgIG91dHB1dERzSWQ6IG91dHB1dERTLmlkLFxuICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkXG4gIH0pXG5cbiAgY29uc3Qgc2VsZWN0aW9uRXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoUVVFUllTSU1QTEVfU0VMRUNUSU9OX0VWRU5ULCB7XG4gICAgZGV0YWlsOiB7XG4gICAgICB3aWRnZXRJZCxcbiAgICAgIHJlY29yZElkcyxcbiAgICAgIGRhdGFTb3VyY2VJZCxcbiAgICAgIG91dHB1dERzSWQ6IG91dHB1dERTLmlkLFxuICAgICAgcXVlcnlJdGVtQ29uZmlnSWRcbiAgICB9LFxuICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgY2FuY2VsYWJsZTogdHJ1ZVxuICB9KVxuICB3aW5kb3cuZGlzcGF0Y2hFdmVudChzZWxlY3Rpb25FdmVudClcbn1cblxuLyoqXG4gKiBHZXRzIHRoZSBvcmlnaW4gZGF0YSBzb3VyY2UgZnJvbSBhbiBvdXRwdXQgZGF0YSBzb3VyY2UuXG4gKiBAcGFyYW0gb3V0cHV0RFMgLSBUaGUgb3V0cHV0IGRhdGEgc291cmNlXG4gKiBAcmV0dXJucyBUaGUgb3JpZ2luIGRhdGEgc291cmNlLCBvciBudWxsIGlmIG5vdCBhdmFpbGFibGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldE9yaWdpbkRhdGFTb3VyY2UoXG4gIG91dHB1dERTOiBEYXRhU291cmNlIHwgbnVsbCB8IHVuZGVmaW5lZFxuKTogRmVhdHVyZUxheWVyRGF0YVNvdXJjZSB8IG51bGwge1xuICBpZiAoIW91dHB1dERTKSByZXR1cm4gbnVsbFxuICBcbiAgLy8gVHJ5IHRvIGdldCBvcmlnaW4gZGF0YSBzb3VyY2VzXG4gIGNvbnN0IG9yaWdpbkRhdGFTb3VyY2VzID0gdHlwZW9mIG91dHB1dERTLmdldE9yaWdpbkRhdGFTb3VyY2VzID09PSAnZnVuY3Rpb24nIFxuICAgID8gb3V0cHV0RFMuZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKSBcbiAgICA6IFtdXG4gICAgXG4gIGlmIChvcmlnaW5EYXRhU291cmNlcyAmJiBvcmlnaW5EYXRhU291cmNlcy5sZW5ndGggPiAwKSB7XG4gICAgcmV0dXJuIG9yaWdpbkRhdGFTb3VyY2VzWzBdIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgfVxuICBcbiAgLy8gSWYgaXQgZG9lc24ndCBoYXZlIG9yaWdpbiBkYXRhIHNvdXJjZXMsIGl0IG1pZ2h0IGFscmVhZHkgYmUgYW4gb3JpZ2luIGRhdGEgc291cmNlXG4gIC8vIEZlYXR1cmVMYXllckRhdGFTb3VyY2Ugc2hvdWxkIGhhdmUgYSAnbGF5ZXInIHByb3BlcnR5IG9yICdnZXRMYXllcicgbWV0aG9kXG4gIGlmICgob3V0cHV0RFMgYXMgYW55KS5sYXllciB8fCAob3V0cHV0RFMgYXMgYW55KS5nZXRMYXllciB8fCAob3V0cHV0RFMgYXMgYW55KS50eXBlID09PSAnRmVhdHVyZUxheWVyJykge1xuICAgIHJldHVybiBvdXRwdXREUyBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gIH1cbiAgXG4gIHJldHVybiBudWxsXG59XG5cbi8qKlxuICogU2VsZWN0cyByZWNvcmRzIGluIGJvdGggdGhlIG9yaWdpbiBkYXRhIHNvdXJjZSBhbmQgb3V0cHV0IGRhdGEgc291cmNlLlxuICogVGhpcyBpcyB0aGUgc3RhbmRhcmQgcGF0dGVybiB1c2VkIHRocm91Z2hvdXQgdGhlIHdpZGdldCBmb3Igc2VsZWN0aW9uLlxuICogT3B0aW9uYWxseSB1c2VzIGdyYXBoaWNzIGxheWVyIGZvciBoaWdobGlnaHRpbmcgKGluZGVwZW5kZW50IG9mIGxheWVyIHZpc2liaWxpdHkpLlxuICogXG4gKiBAcGFyYW0gb3V0cHV0RFMgLSBUaGUgb3V0cHV0IGRhdGEgc291cmNlXG4gKiBAcGFyYW0gcmVjb3JkSWRzIC0gQXJyYXkgb2YgcmVjb3JkIElEcyB0byBzZWxlY3RcbiAqIEBwYXJhbSByZWNvcmRzIC0gT3B0aW9uYWwgYXJyYXkgb2YgRmVhdHVyZURhdGFSZWNvcmQgb2JqZWN0cyBmb3IgcHJvcGVyIGhpZ2hsaWdodGluZ1xuICogQHBhcmFtIHVzZUdyYXBoaWNzTGF5ZXIgLSBXaGV0aGVyIHRvIHVzZSBncmFwaGljcyBsYXllciBmb3IgaGlnaGxpZ2h0aW5nIChkZWZhdWx0OiBmYWxzZSlcbiAqIEBwYXJhbSBncmFwaGljc0xheWVyIC0gR3JhcGhpY3MgbGF5ZXIgaW5zdGFuY2UgKHJlcXVpcmVkIGlmIHVzZUdyYXBoaWNzTGF5ZXIgaXMgdHJ1ZSlcbiAqIEBwYXJhbSBtYXBWaWV3IC0gTWFwIHZpZXcgaW5zdGFuY2UgKHJlcXVpcmVkIGlmIHVzZUdyYXBoaWNzTGF5ZXIgaXMgdHJ1ZSlcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlbGVjdFJlY29yZHNJbkRhdGFTb3VyY2VzKFxuICBvdXRwdXREUzogRGF0YVNvdXJjZSB8IG51bGwgfCB1bmRlZmluZWQsXG4gIHJlY29yZElkczogc3RyaW5nW10sXG4gIHJlY29yZHM/OiBGZWF0dXJlRGF0YVJlY29yZFtdLFxuICB1c2VHcmFwaGljc0xheWVyOiBib29sZWFuID0gZmFsc2UsXG4gIGdyYXBoaWNzTGF5ZXI/OiBfX2VzcmkuR3JhcGhpY3NMYXllcixcbiAgbWFwVmlldz86IF9fZXNyaS5NYXBWaWV3IHwgX19lc3JpLlNjZW5lVmlld1xuKTogUHJvbWlzZTx2b2lkPiB7XG4gIGlmICghb3V0cHV0RFMpIHJldHVyblxuICBcbiAgY29uc3Qgb3JpZ2luRFMgPSBnZXRPcmlnaW5EYXRhU291cmNlKG91dHB1dERTKVxuICBcbiAgLy8gSWYgdXNpbmcgZ3JhcGhpY3MgbGF5ZXIsIGFkZCBncmFwaGljcyBmb3IgaGlnaGxpZ2h0aW5nXG4gIGlmICh1c2VHcmFwaGljc0xheWVyICYmIGdyYXBoaWNzTGF5ZXIgJiYgbWFwVmlldyAmJiByZWNvcmRzICYmIHJlY29yZHMubGVuZ3RoID4gMCkge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICBldmVudDogJ3NlbGVjdFJlY29yZHNJbkRhdGFTb3VyY2VzLXVzaW5nLWdyYXBoaWNzLWxheWVyJyxcbiAgICAgIHJlY29yZElkc0NvdW50OiByZWNvcmRJZHMubGVuZ3RoLFxuICAgICAgcmVjb3Jkc0NvdW50OiByZWNvcmRzLmxlbmd0aCxcbiAgICAgIGdyYXBoaWNzTGF5ZXJJZDogZ3JhcGhpY3NMYXllci5pZCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgYXdhaXQgYWRkR3JhcGhpY3NMYXllckdyYXBoaWNzKGdyYXBoaWNzTGF5ZXIsIHJlY29yZHMsIG1hcFZpZXcpXG4gICAgXG4gICAgLy8gU3RpbGwgc2VsZWN0IGluIGRhdGEgc291cmNlIGZvciBzdGF0ZSBtYW5hZ2VtZW50IChidXQgbGF5ZXIgc2VsZWN0aW9uIHdvbid0IHNob3cgaWYgbGF5ZXIgaXMgb2ZmKVxuICAgIGlmIChvcmlnaW5EUyAmJiB0eXBlb2Ygb3JpZ2luRFMuc2VsZWN0UmVjb3Jkc0J5SWRzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBvcmlnaW5EUy5zZWxlY3RSZWNvcmRzQnlJZHMocmVjb3JkSWRzLCByZWNvcmRzKVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICAvLyBPcmlnaW5hbCBiZWhhdmlvcjogdXNlIGxheWVyIHNlbGVjdGlvblxuICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICBldmVudDogJ3NlbGVjdFJlY29yZHNJbkRhdGFTb3VyY2VzLXVzaW5nLWxheWVyLXNlbGVjdGlvbicsXG4gICAgICByZWNvcmRJZHNDb3VudDogcmVjb3JkSWRzLmxlbmd0aCxcbiAgICAgIHVzZUdyYXBoaWNzTGF5ZXIsXG4gICAgICBoYXNHcmFwaGljc0xheWVyOiAhIWdyYXBoaWNzTGF5ZXIsXG4gICAgICBoYXNNYXBWaWV3OiAhIW1hcFZpZXcsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIC8vIFNlbGVjdCBpbiBvcmlnaW4gZGF0YSBzb3VyY2UgKHRoZSBhY3R1YWwgbGF5ZXIpXG4gICAgaWYgKG9yaWdpbkRTICYmIHR5cGVvZiBvcmlnaW5EUy5zZWxlY3RSZWNvcmRzQnlJZHMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIC8vIExvZyBsYXllciBzdGF0ZSByaWdodCBiZWZvcmUgc2VsZWN0aW9uIHRvIHNlZSB3aGF0J3MgYXZhaWxhYmxlIHdoZW4gc2VsZWN0aW9uIHdvcmtzXG4gICAgICBjb25zdCBsYXllciA9IChvcmlnaW5EUyBhcyBhbnkpLmxheWVyIHx8IChvcmlnaW5EUyBhcyBhbnkpLmdldExheWVyPy4oKVxuICAgICAgaWYgKGxheWVyKSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICAgICAgZXZlbnQ6ICdzZWxlY3RSZWNvcmRzQnlJZHMtbGF5ZXItc3RhdGUnLFxuICAgICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICAgIGxheWVySWQ6IGxheWVyLmlkLFxuICAgICAgICAgIGhhc0xheWVyTWFwOiAhIShsYXllciBhcyBhbnkpLm1hcCxcbiAgICAgICAgICBoYXNMYXllclZpZXc6ICEhKGxheWVyIGFzIGFueSkudmlldyxcbiAgICAgICAgICBoYXNMYXllclBhcmVudDogISEobGF5ZXIgYXMgYW55KS5wYXJlbnQsXG4gICAgICAgICAgcGFyZW50VHlwZTogKGxheWVyIGFzIGFueSkucGFyZW50Py50eXBlIHx8ICdub25lJyxcbiAgICAgICAgICBwYXJlbnRIYXNNYXA6ICEhKGxheWVyIGFzIGFueSkucGFyZW50Py5tYXAsXG4gICAgICAgICAgcGFyZW50SGFzVmlldzogISEobGF5ZXIgYXMgYW55KS5wYXJlbnQ/LnZpZXcsXG4gICAgICAgICAgcGFyZW50SGFzVmlld3M6ICEhKGxheWVyIGFzIGFueSkucGFyZW50Py52aWV3cyxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICAgIFxuICAgICAgb3JpZ2luRFMuc2VsZWN0UmVjb3Jkc0J5SWRzKHJlY29yZElkcywgcmVjb3JkcylcbiAgICB9XG4gIH1cbiAgXG4gIC8vIEFsd2F5cyB1cGRhdGUgb3V0cHV0RFMgZm9yIHdpZGdldCdzIGludGVybmFsIHN0YXRlXG4gIGlmICh0eXBlb2Ygb3V0cHV0RFMuc2VsZWN0UmVjb3Jkc0J5SWRzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgb3V0cHV0RFMuc2VsZWN0UmVjb3Jkc0J5SWRzKHJlY29yZElkcywgcmVjb3JkcylcbiAgfVxufVxuXG4vKipcbiAqIENsZWFycyBzZWxlY3Rpb24gaW4gYm90aCB0aGUgb3JpZ2luIGRhdGEgc291cmNlIGFuZCBvdXRwdXQgZGF0YSBzb3VyY2UuXG4gKiBPcHRpb25hbGx5IGNsZWFycyBncmFwaGljcyBsYXllciBpZiB1c2luZyBncmFwaGljcyBsYXllciBtb2RlLlxuICogXG4gKiBAcGFyYW0gd2lkZ2V0SWQgLSBUaGUgd2lkZ2V0IElEIChuZWVkZWQgdG8gcHVibGlzaCBtZXNzYWdlKVxuICogQHBhcmFtIG91dHB1dERTIC0gVGhlIG91dHB1dCBkYXRhIHNvdXJjZVxuICogQHBhcmFtIHVzZUdyYXBoaWNzTGF5ZXIgLSBXaGV0aGVyIHRvIGNsZWFyIGdyYXBoaWNzIGxheWVyIChkZWZhdWx0OiBmYWxzZSlcbiAqIEBwYXJhbSBncmFwaGljc0xheWVyIC0gR3JhcGhpY3MgbGF5ZXIgaW5zdGFuY2UgKHJlcXVpcmVkIGlmIHVzZUdyYXBoaWNzTGF5ZXIgaXMgdHJ1ZSlcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNsZWFyU2VsZWN0aW9uSW5EYXRhU291cmNlcyAoXG4gIHdpZGdldElkOiBzdHJpbmcsXG4gIG91dHB1dERTOiBEYXRhU291cmNlIHwgbnVsbCB8IHVuZGVmaW5lZCxcbiAgdXNlR3JhcGhpY3NMYXllcjogYm9vbGVhbiA9IGZhbHNlLFxuICBncmFwaGljc0xheWVyPzogX19lc3JpLkdyYXBoaWNzTGF5ZXJcbik6IFByb21pc2U8dm9pZD4ge1xuICAvLyBDbGVhciBncmFwaGljcyBsYXllciBpZiB1c2luZyBncmFwaGljcyBsYXllciBtb2RlXG4gIGlmICh1c2VHcmFwaGljc0xheWVyICYmIGdyYXBoaWNzTGF5ZXIpIHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgZXZlbnQ6ICdjbGVhclNlbGVjdGlvbkluRGF0YVNvdXJjZXMtY2xlYXJpbmctZ3JhcGhpY3MtbGF5ZXInLFxuICAgICAgZ3JhcGhpY3NMYXllcklkOiBncmFwaGljc0xheWVyLmlkLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBjbGVhckdyYXBoaWNzTGF5ZXIoZ3JhcGhpY3NMYXllcilcbiAgfVxuXG4gIC8vIENsZWFyIGRhdGEgc291cmNlIHNlbGVjdGlvbiBmb3Igc3RhdGUgbWFuYWdlbWVudFxuICBhd2FpdCBzZWxlY3RSZWNvcmRzSW5EYXRhU291cmNlcyhvdXRwdXREUywgW10sIHVuZGVmaW5lZCwgZmFsc2UpXG5cbiAgLy8gUHVibGlzaCB0aGUgZW1wdHkgc2VsZWN0aW9uIG1lc3NhZ2Ugc28gdGhlIE1hcCBzZWxlY3Rpb24gKGJsdWUgYm94ZXMpIGNsZWFyc1xuICBpZiAob3V0cHV0RFMpIHtcbiAgICBwdWJsaXNoU2VsZWN0aW9uTWVzc2FnZSh3aWRnZXRJZCwgW10sIG91dHB1dERTLCB0cnVlKVxuICB9XG59XG5cbi8qKlxuICogUHVibGlzaGVzIGEgc2VsZWN0aW9uIGNoYW5nZSBtZXNzYWdlIGZvciB0aGUgZ2l2ZW4gcmVjb3JkcyBhbmQgZGF0YSBzb3VyY2VzLlxuICogXG4gKiBAcGFyYW0gd2lkZ2V0SWQgLSBUaGUgd2lkZ2V0IElEXG4gKiBAcGFyYW0gcmVjb3JkcyAtIEFycmF5IG9mIEZlYXR1cmVEYXRhUmVjb3JkIG9iamVjdHMgKGVtcHR5IGFycmF5IHRvIGNsZWFyKVxuICogQHBhcmFtIG91dHB1dERTIC0gVGhlIG91dHB1dCBkYXRhIHNvdXJjZVxuICogQHBhcmFtIGFsc29QdWJsaXNoVG9PdXRwdXREUyAtIFdoZXRoZXIgdG8gYWxzbyBwdWJsaXNoIGEgbWVzc2FnZSBmb3Igb3V0cHV0RFMgKGRlZmF1bHQ6IGZhbHNlKVxuICovXG5leHBvcnQgZnVuY3Rpb24gcHVibGlzaFNlbGVjdGlvbk1lc3NhZ2UoXG4gIHdpZGdldElkOiBzdHJpbmcsXG4gIHJlY29yZHM6IEZlYXR1cmVEYXRhUmVjb3JkW10sXG4gIG91dHB1dERTOiBEYXRhU291cmNlIHwgbnVsbCB8IHVuZGVmaW5lZCxcbiAgYWxzb1B1Ymxpc2hUb091dHB1dERTOiBib29sZWFuID0gZmFsc2Vcbik6IHZvaWQge1xuICBpZiAoIW91dHB1dERTKSByZXR1cm5cbiAgXG4gIGNvbnN0IG9yaWdpbkRTID0gZ2V0T3JpZ2luRGF0YVNvdXJjZShvdXRwdXREUylcbiAgXG4gIGlmIChvcmlnaW5EUykge1xuICAgIE1lc3NhZ2VNYW5hZ2VyLmdldEluc3RhbmNlKCkucHVibGlzaE1lc3NhZ2UoXG4gICAgICBuZXcgRGF0YVJlY29yZHNTZWxlY3Rpb25DaGFuZ2VNZXNzYWdlKHdpZGdldElkLCByZWNvcmRzLCBbb3JpZ2luRFMuaWRdKVxuICAgIClcbiAgfSBlbHNlIGlmIChhbHNvUHVibGlzaFRvT3V0cHV0RFMpIHtcbiAgICBNZXNzYWdlTWFuYWdlci5nZXRJbnN0YW5jZSgpLnB1Ymxpc2hNZXNzYWdlKFxuICAgICAgbmV3IERhdGFSZWNvcmRzU2VsZWN0aW9uQ2hhbmdlTWVzc2FnZSh3aWRnZXRJZCwgcmVjb3JkcywgW291dHB1dERTLmlkXSlcbiAgICApXG4gIH1cbiAgXG4gIC8vIE9wdGlvbmFsbHkgcHVibGlzaCB0byBvdXRwdXREUyBhcyB3ZWxsIChmb3Igc29tZSBlZGdlIGNhc2VzKVxuICBpZiAoYWxzb1B1Ymxpc2hUb091dHB1dERTICYmIG9yaWdpbkRTKSB7XG4gICAgTWVzc2FnZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5wdWJsaXNoTWVzc2FnZShcbiAgICAgIG5ldyBEYXRhUmVjb3Jkc1NlbGVjdGlvbkNoYW5nZU1lc3NhZ2Uod2lkZ2V0SWQsIHJlY29yZHMsIFtvdXRwdXREUy5pZF0pXG4gICAgKVxuICB9XG59XG5cbi8qKlxuICogU2VsZWN0cyByZWNvcmRzIGFuZCBwdWJsaXNoZXMgdGhlIHNlbGVjdGlvbiBtZXNzYWdlIGluIG9uZSBjYWxsLlxuICogVGhpcyBpcyB0aGUgbW9zdCBjb21tb24gcGF0dGVybiAtIHNlbGVjdGluZyByZWNvcmRzIGFuZCBub3RpZnlpbmcgdGhlIG1hcC5cbiAqIE9wdGlvbmFsbHkgdXNlcyBncmFwaGljcyBsYXllciBmb3IgaGlnaGxpZ2h0aW5nIChpbmRlcGVuZGVudCBvZiBsYXllciB2aXNpYmlsaXR5KS5cbiAqIFxuICogQHBhcmFtIHdpZGdldElkIC0gVGhlIHdpZGdldCBJRFxuICogQHBhcmFtIG91dHB1dERTIC0gVGhlIG91dHB1dCBkYXRhIHNvdXJjZVxuICogQHBhcmFtIHJlY29yZElkcyAtIEFycmF5IG9mIHJlY29yZCBJRHMgdG8gc2VsZWN0XG4gKiBAcGFyYW0gcmVjb3JkcyAtIEFycmF5IG9mIEZlYXR1cmVEYXRhUmVjb3JkIG9iamVjdHMgZm9yIHByb3BlciBoaWdobGlnaHRpbmdcbiAqIEBwYXJhbSBhbHNvUHVibGlzaFRvT3V0cHV0RFMgLSBXaGV0aGVyIHRvIGFsc28gcHVibGlzaCBhIG1lc3NhZ2UgZm9yIG91dHB1dERTIChkZWZhdWx0OiBmYWxzZSlcbiAqIEBwYXJhbSB1c2VHcmFwaGljc0xheWVyIC0gV2hldGhlciB0byB1c2UgZ3JhcGhpY3MgbGF5ZXIgZm9yIGhpZ2hsaWdodGluZyAoZGVmYXVsdDogZmFsc2UpXG4gKiBAcGFyYW0gZ3JhcGhpY3NMYXllciAtIEdyYXBoaWNzIGxheWVyIGluc3RhbmNlIChyZXF1aXJlZCBpZiB1c2VHcmFwaGljc0xheWVyIGlzIHRydWUpXG4gKiBAcGFyYW0gbWFwVmlldyAtIE1hcCB2aWV3IGluc3RhbmNlIChyZXF1aXJlZCBpZiB1c2VHcmFwaGljc0xheWVyIGlzIHRydWUpXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZWxlY3RSZWNvcmRzQW5kUHVibGlzaChcbiAgd2lkZ2V0SWQ6IHN0cmluZyxcbiAgb3V0cHV0RFM6IERhdGFTb3VyY2UgfCBudWxsIHwgdW5kZWZpbmVkLFxuICByZWNvcmRJZHM6IHN0cmluZ1tdLFxuICByZWNvcmRzOiBGZWF0dXJlRGF0YVJlY29yZFtdLFxuICBhbHNvUHVibGlzaFRvT3V0cHV0RFM6IGJvb2xlYW4gPSBmYWxzZSxcbiAgdXNlR3JhcGhpY3NMYXllcjogYm9vbGVhbiA9IGZhbHNlLFxuICBncmFwaGljc0xheWVyPzogX19lc3JpLkdyYXBoaWNzTGF5ZXIsXG4gIG1hcFZpZXc/OiBfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXdcbik6IFByb21pc2U8dm9pZD4ge1xuICBhd2FpdCBzZWxlY3RSZWNvcmRzSW5EYXRhU291cmNlcyhvdXRwdXREUywgcmVjb3JkSWRzLCByZWNvcmRzLCB1c2VHcmFwaGljc0xheWVyLCBncmFwaGljc0xheWVyLCBtYXBWaWV3KVxuICBwdWJsaXNoU2VsZWN0aW9uTWVzc2FnZSh3aWRnZXRJZCwgcmVjb3Jkcywgb3V0cHV0RFMsIGFsc29QdWJsaXNoVG9PdXRwdXREUylcbn1cblxuLyoqXG4gKiBGaW5kcyB0aGUgXCJDbGVhciByZXN1bHRzXCIgYnV0dG9uIGluIHRoZSBET00uXG4gKiBVc2VkIHdoZW4gcHJvZ3JhbW1hdGljYWxseSB0cmlnZ2VyaW5nIHRoZSBjbGVhciBhY3Rpb24uXG4gKiBcbiAqIEByZXR1cm5zIFRoZSBjbGVhciBidXR0b24gZWxlbWVudCwgb3IgbnVsbCBpZiBub3QgZm91bmRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZpbmRDbGVhclJlc3VsdHNCdXR0b24oKTogSFRNTEJ1dHRvbkVsZW1lbnQgfCBudWxsIHtcbiAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvblthcmlhLWxhYmVsPVwiQ2xlYXIgcmVzdWx0c1wiXScpIGFzIEhUTUxCdXR0b25FbGVtZW50IHwgbnVsbFxufVxuXG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7XG4gIFJlYWN0LFxuICBqc3gsXG4gIGNzcyxcbiAgY2xhc3NOYW1lcyxcbiAgdHlwZSBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLFxuICB0eXBlIEltbXV0YWJsZU9iamVjdCxcbiAgdHlwZSBEYXRhUmVjb3JkLFxuICB0eXBlIEZlYXR1cmVEYXRhUmVjb3JkXG59IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IHR5cGUgUXVlcnlJdGVtVHlwZSwgTGlzdERpcmVjdGlvbiB9IGZyb20gJy4uL2NvbmZpZydcbmltcG9ydCB7IFF1ZXJ5UmVzdWx0SXRlbSB9IGZyb20gJy4vcXVlcnktcmVzdWx0LWl0ZW0nXG5pbXBvcnQgeyBnZXRQb3B1cFRlbXBsYXRlIH0gZnJvbSAnLi9xdWVyeS11dGlscydcbmltcG9ydCB7IHVzZUF1dG9IZWlnaHQgfSBmcm9tICcuL3VzZUF1dG9IZWlnaHQnXG5pbXBvcnQgeyBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyIH0gZnJvbSAnd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24nXG5cbmNvbnN0IGRlYnVnTG9nZ2VyID0gY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlcigpXG5cbmV4cG9ydCBpbnRlcmZhY2UgU2ltcGxlTGlzdFByb3BzIHtcbiAgd2lkZ2V0SWQ6IHN0cmluZ1xuICBxdWVyeUl0ZW06IEltbXV0YWJsZU9iamVjdDxRdWVyeUl0ZW1UeXBlPlxuICBvdXRwdXREUzogRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICByZWNvcmRzOiBEYXRhUmVjb3JkW11cbiAgZGlyZWN0aW9uOiBMaXN0RGlyZWN0aW9uXG4gIG9uRXNjYXBlOiAoKSA9PiB2b2lkXG4gIG9uU2VsZWN0Q2hhbmdlOiAoZGF0YTogRmVhdHVyZURhdGFSZWNvcmQpID0+IHZvaWRcbiAgb25SZW1vdmU6IChkYXRhOiBGZWF0dXJlRGF0YVJlY29yZCkgPT4gdm9pZFxuICBleHBhbmRCeURlZmF1bHQ/OiBib29sZWFuXG4gIGl0ZW1FeHBhbmRTdGF0ZXM/OiBNYXA8c3RyaW5nLCBib29sZWFuPlxuICByZW1vdmVkUmVjb3JkSWRzPzogU2V0PHN0cmluZz5cbiAgb25SZW5kZXJEb25lPzogKG9wdGlvbnM6IHsgZGF0YUl0ZW1zOiBhbnlbXSB9KSA9PiB2b2lkXG59XG5cbmNvbnN0IGdldFN0eWxlID0gKGlzQXV0b0hlaWdodDogYm9vbGVhbikgPT4ge1xuICByZXR1cm4gY3NzYFxuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleDogMSAxICR7aXNBdXRvSGVpZ2h0ID8gJ2F1dG8nIDogMH07XG4gICAgb3ZlcmZsb3c6IGF1dG87XG4gICAgbWF4LWhlaWdodDogJHtpc0F1dG9IZWlnaHQgPyAnY2FsYyg2MS44dmggLSAxMDBweCknIDogJ25vbmUnfTtcblxuICAgIC5xdWVyeS1yZXN1bHQtaXRlbSArIC5xdWVyeS1yZXN1bHQtaXRlbSB7XG4gICAgICBtYXJnaW4tbGVmdDogMC41cmVtO1xuICAgICAgbWFyZ2luLXRvcDogMDtcbiAgICB9XG5cbiAgICAmLnZlcnRpY2FsIHtcbiAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAubGlzdC1pdGVtcyB7XG4gICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgIH1cblxuICAgICAgLmZlYXR1cmUtaW5mby1jb21wb25lbnQge1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgIH1cblxuICAgICAgLnF1ZXJ5LXJlc3VsdC1pdGVtICsgLnF1ZXJ5LXJlc3VsdC1pdGVtIHtcbiAgICAgICAgbWFyZ2luLWxlZnQ6IDA7XG4gICAgICAgIG1hcmdpbi10b3A6IDAuNXJlbTtcbiAgICAgIH1cbiAgICB9XG4gICAgLmxpc3QtaXRlbXMge1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICB9XG4gIGBcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIFNpbXBsZUxpc3QgKHByb3BzOiBTaW1wbGVMaXN0UHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIHdpZGdldElkLFxuICAgIG91dHB1dERTLFxuICAgIHF1ZXJ5SXRlbSxcbiAgICByZWNvcmRzLFxuICAgIGRpcmVjdGlvbixcbiAgICBvbkVzY2FwZSxcbiAgICBvblNlbGVjdENoYW5nZSxcbiAgICBvblJlbW92ZSxcbiAgICBleHBhbmRCeURlZmF1bHQsXG4gICAgaXRlbUV4cGFuZFN0YXRlcyxcbiAgICByZW1vdmVkUmVjb3JkSWRzLFxuICAgIG9uUmVuZGVyRG9uZVxuICB9ID0gcHJvcHNcbiAgXG4gIGNvbnN0IFtwb3B1cFRlbXBsYXRlLCBzZXRQb3B1cFRlbXBsYXRlXSA9IFJlYWN0LnVzZVN0YXRlPGFueT4oKVxuICBjb25zdCBbZGVmYXVsdFBvcHVwVGVtcGxhdGUsIHNldERlZmF1bHRQb3B1cFRlbXBsYXRlXSA9IFJlYWN0LnVzZVN0YXRlPGFueT4oKVxuICBjb25zdCBpc0F1dG9IZWlnaHQgPSB1c2VBdXRvSGVpZ2h0KClcbiAgY29uc3QgcmVzdWx0Q29udGFpbmVyUmVmID0gUmVhY3QudXNlUmVmPEhUTUxEaXZFbGVtZW50PihudWxsKVxuXG4gIC8vIEZpbHRlciBvdXQgcmVtb3ZlZCByZWNvcmRzXG4gIGNvbnN0IGZpbHRlcmVkUmVjb3JkcyA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgIHJldHVybiByZWNvcmRzPy5maWx0ZXIocmVjb3JkID0+ICFyZW1vdmVkUmVjb3JkSWRzPy5oYXMocmVjb3JkLmdldElkKCkpKSB8fCBbXVxuICB9LCBbcmVjb3JkcywgcmVtb3ZlZFJlY29yZElkc10pXG5cbiAgLy8gTm90aWZ5IHBhcmVudCB3aGVuIHJlY29yZHMgYXJlIHJlbmRlcmVkIChmb3IgYXV0by1zd2l0Y2ggbG9naWMpXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKG9uUmVuZGVyRG9uZSAmJiBmaWx0ZXJlZFJlY29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAnU2ltcGxlTGlzdC1vblJlbmRlckRvbmUtY2FsbGVkJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBxdWVyeUl0ZW0uY29uZmlnSWQsXG4gICAgICAgIGZpbHRlcmVkUmVjb3Jkc0NvdW50OiBmaWx0ZXJlZFJlY29yZHMubGVuZ3RoLFxuICAgICAgICB0b3RhbFJlY29yZHNDb3VudDogcmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgIHJlbW92ZWRSZWNvcmRJZHNDb3VudDogcmVtb3ZlZFJlY29yZElkcz8uc2l6ZSB8fCAwLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICBvblJlbmRlckRvbmUoeyBkYXRhSXRlbXM6IGZpbHRlcmVkUmVjb3JkcyB9KVxuICAgIH1cbiAgfSwgW2ZpbHRlcmVkUmVjb3Jkcywgb25SZW5kZXJEb25lLCB3aWRnZXRJZCwgcXVlcnlJdGVtLmNvbmZpZ0lkLCByZWNvcmRzLmxlbmd0aCwgcmVtb3ZlZFJlY29yZElkc10pXG5cbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBnZXRQb3B1cFRlbXBsYXRlKG91dHB1dERTLCBxdWVyeUl0ZW0pLnRoZW4ocnMgPT4ge1xuICAgICAgc2V0UG9wdXBUZW1wbGF0ZShycy5wb3B1cFRlbXBsYXRlKVxuICAgICAgc2V0RGVmYXVsdFBvcHVwVGVtcGxhdGUocnMuZGVmYXVsdFBvcHVwVGVtcGxhdGUpXG4gICAgfSlcbiAgfSwgW291dHB1dERTLCBxdWVyeUl0ZW1dKVxuXG4gIGNvbnN0IGhhbmRsZUtleVVwID0gUmVhY3QudXNlQ2FsbGJhY2soKGV2dCkgPT4ge1xuICAgIGlmIChldnQua2V5ID09PSAnRXNjYXBlJykge1xuICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpXG4gICAgICBvbkVzY2FwZSgpXG4gICAgfVxuICB9LCBbb25Fc2NhcGVdKVxuXG4gIGNvbnN0IGhhbmRsZUtleURvd24gPSBSZWFjdC51c2VDYWxsYmFjaygoZXZ0KSA9PiB7XG4gICAgaWYgKGV2dC5rZXkgPT09ICcgJykge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KClcbiAgICB9XG4gIH0sIFtdKVxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBcbiAgICAgIG9uS2V5VXA9e2hhbmRsZUtleVVwfSBcbiAgICAgIG9uS2V5RG93bj17aGFuZGxlS2V5RG93bn0gXG4gICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZXMoeyB2ZXJ0aWNhbDogZGlyZWN0aW9uID09PSBMaXN0RGlyZWN0aW9uLlZlcnRpY2FsIH0pfSBcbiAgICAgIGNzcz17Z2V0U3R5bGUoaXNBdXRvSGVpZ2h0KX1cbiAgICAgIHJlZj17cmVzdWx0Q29udGFpbmVyUmVmfVxuICAgID5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdsaXN0LWl0ZW1zIHB4LTQgcHktMScgcm9sZT0nbGlzdGJveCc+XG4gICAgICAgIHtmaWx0ZXJlZFJlY29yZHMubWFwKChkYXRhSXRlbSkgPT4ge1xuICAgICAgICAgIGNvbnN0IHJlY29yZElkID0gZGF0YUl0ZW0uZ2V0SWQoKVxuICAgICAgICAgIC8vIFVzZSBpbmRpdmlkdWFsIHN0YXRlIGZyb20gbWFwIGlmIGF2YWlsYWJsZSwgb3RoZXJ3aXNlIGZhbGwgYmFjayB0byBleHBhbmRCeURlZmF1bHRcbiAgICAgICAgICBjb25zdCBpbmRpdmlkdWFsRXhwYW5kU3RhdGUgPSBpdGVtRXhwYW5kU3RhdGVzPy5nZXQocmVjb3JkSWQpXG4gICAgICAgICAgY29uc3QgZXhwYW5kQnlEZWZhdWx0VmFsdWUgPSBpbmRpdmlkdWFsRXhwYW5kU3RhdGUgIT09IHVuZGVmaW5lZCA/IGluZGl2aWR1YWxFeHBhbmRTdGF0ZSA6IChleHBhbmRCeURlZmF1bHQgPz8gdHJ1ZSlcbiAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPFF1ZXJ5UmVzdWx0SXRlbVxuICAgICAgICAgICAgICBrZXk9e3JlY29yZElkfVxuICAgICAgICAgICAgICBkYXRhPXtkYXRhSXRlbSBhcyBGZWF0dXJlRGF0YVJlY29yZH1cbiAgICAgICAgICAgICAgZGF0YVNvdXJjZT17b3V0cHV0RFN9XG4gICAgICAgICAgICAgIHdpZGdldElkPXt3aWRnZXRJZH1cbiAgICAgICAgICAgICAgcG9wdXBUZW1wbGF0ZT17cG9wdXBUZW1wbGF0ZX1cbiAgICAgICAgICAgICAgZGVmYXVsdFBvcHVwVGVtcGxhdGU9e2RlZmF1bHRQb3B1cFRlbXBsYXRlfVxuICAgICAgICAgICAgICBleHBhbmRCeURlZmF1bHQ9e2V4cGFuZEJ5RGVmYXVsdFZhbHVlfVxuICAgICAgICAgICAgICBvbkNsaWNrPXtvblNlbGVjdENoYW5nZX1cbiAgICAgICAgICAgICAgb25SZW1vdmU9e29uUmVtb3ZlfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICApXG4gICAgICAgIH0pfVxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIClcbn1cblxuIiwiZXhwb3J0IGRlZmF1bHQge1xuICBfd2lkZ2V0TGFiZWw6ICdRdWVyeVNpbXBsZScsXG4gIHJlc2V0OiAnUmVzZXQnLFxuICBzZWFyY2hMYXllcjogJ1NlYXJjaCBMYXllcicsXG4gIGFwcGx5OiAnU2VhcmNoJyxcbiAgbm9EYXRhQXZhaWxhYmxlOiAnRXJyb3IgaW4gbG9hZGluZyBkYXRhJyxcbiAgbm9RdWVyeUl0ZW06ICdObyBxdWVyeScsXG4gIG5ld1F1ZXJ5SGludDogJ0FkZCBjb250ZW50IGJ5IGNsaWNraW5nIHRoZSBcIntsYWJlbH1cIiBidXR0b24gb24gdGhlIGNvbmZpZ3VyYXRpb24gcGFuZWwnLFxuICBhdHRyaWJ1dGVGaWx0ZXI6ICdBdHRyaWJ1dGUgZmlsdGVyJyxcbiAgc3BhdGlhbEZpbHRlcjogJ1NwYXRpYWwgZmlsdGVyJyxcbiAgc3BhdGlhbEZpbHRlclR5cGVfQ3VycmVudE1hcEV4dGVudDogJ0N1cnJlbnQgbWFwIGV4dGVudCcsXG4gIHNwYXRpYWxGaWx0ZXJUeXBlX0ludGVyYWN0aXZlRHJhd01vZGU6ICdEcmF3biBncmFwaGljJyxcbiAgcmVzdWx0czogJ1Jlc3VsdHMnLFxuICBmZWF0dXJlc0Rpc3BsYXllZDogJ0ZlYXR1cmVzIGRpc3BsYXllZCcsXG4gIGNsZWFyUmVzdWx0OiAnQ2xlYXIgcmVzdWx0cycsXG4gIGNoZWNrUmVzdWx0OiAnQ2hlY2sgcmVzdWx0cycsXG4gIG1hcE11c3RCZVZpc2libGU6ICdNYXAgbXVzdCBiZSB2aXNpYmxlJyxcbiAgY2hvb3NlRmlsdGVyVHlwZTogJ0Nob29zZSB0aGUgZmlsdGVyIHR5cGUnLFxuICBjaG9vc2VHZW9tZXRyeVR5cGU6ICdDaG9vc2UgdGhlIGdlb21ldHJ5IHR5cGUnLFxuICBjbGVhckRyYXdpbmc6ICdDbGVhciB0aGUgZ3JhcGhpYyB3aGVuIGFwcGx5aW5nJyxcbiAgZmVhdHVyZUZyb21EczogJ1NlbGVjdGluZyBmZWF0dXJlcyBmcm9tIGRhdGEgc291cmNlJyxcbiAgZmVhdHVyZUZyb21NYXA6ICdHZW9tZXRyaWVzIGZyb20gYSBtYXAnLFxuICBjaG9vc2VGaWx0ZXJMYXllcjogJ0Nob29zZSBhIGZpbHRlciBsYXllcicsXG4gIHNlbGVjdGVkUmVjb3JkczogJ3tudW19IHJlY29yZHMgYXJlIHNlbGVjdGVkIGZvciB0aGUgZmlsdGVyJyxcbiAgc3BhdGlhbE5vdEF2YWlsYWJsZTogJ1NwYXRpYWwgZmlsdGVyIGlzIG5vdCBhdmFpbGFibGUgaGVyZS4nLFxuICBzcGF0aWFsTm90QXZhaWxhYmxlRGVzYzogJ1NwYXRpYWwgZmlsdGVyIGlzIG5vdCBzdXBwb3J0ZWQgZm9yIGEgZGF0YSBzb3VyY2UgdGhhdCBhbHJlYWR5IGNvbnRhaW5zIGEgc3BhdGlhbCBxdWVyeS4nLFxuICBwcmVjb25maWd1cmVkOiAnUHJlY29uZmlndXJlZCcsXG4gIHJ1bnRpbWU6ICdSdW50aW1lJyxcbiAgc2VsZWN0TG9hZGVkOiAnU2VsZWN0IGxvYWRlZCcsXG4gIHJldHJpZXZpbmc6ICdSZXRyaWV2aW5nIHF1ZXJ5IHJlc3VsdHMuLi4nLFxuICB6b29tVG9TZWxlY3RlZDogJ1pvb20gdG8gc2VsZWN0ZWQnLFxuICBxdWVyeVRhYjogJ1F1ZXJ5JyxcbiAgcmVzdWx0c1RhYjogJ1Jlc3VsdHMnLFxuICBleHBhbmRBbGw6ICdFeHBhbmQgYWxsJyxcbiAgY29sbGFwc2VBbGw6ICdDb2xsYXBzZSBhbGwnLFxuICBhZGRUb01hcDogJ0FkZCB0byBtYXAnLFxuICByZXN1bHRzTW9kZTogJ1Jlc3VsdHMgbW9kZScsXG4gIGNyZWF0ZU5ld1Jlc3VsdHM6ICdDcmVhdGUgbmV3IHJlc3VsdHMnLFxuICBhZGRUb0N1cnJlbnRSZXN1bHRzOiAnQWRkIHRvIGN1cnJlbnQgcmVzdWx0cycsXG4gIHJlbW92ZUZyb21DdXJyZW50UmVzdWx0czogJ1JlbW92ZSBmcm9tIGN1cnJlbnQgcmVzdWx0cycsXG4gIHJlc3VsdHNNb2RlRGlzYWJsZWRSZW1vdmU6ICdSZW1vdmUgZnJvbSBjdXJyZW50IHJlc3VsdHMgKG5vIGFjY3VtdWxhdGVkIHJlc3VsdHMpJyxcbiAgcmVzdWx0c01vZGVEZXNjOiAnQ29udHJvbHMgaG93IHF1ZXJ5IHJlc3VsdHMgYXJlIGNvbWJpbmVkOlxcbuKAoiBOZXc6IEVhY2ggcXVlcnkgcmVwbGFjZXMgcHJldmlvdXMgcmVzdWx0c1xcbuKAoiBBZGQ6IE5ldyByZXN1bHRzIGFyZSBhZGRlZCB0byBleGlzdGluZyByZXN1bHRzXFxu4oCiIFJlbW92ZTogTWF0Y2hpbmcgcmVzdWx0cyBhcmUgcmVtb3ZlZCBmcm9tIGV4aXN0aW5nIHJlc3VsdHMnLFxuICByZXN1bHRzTW9kZU5ldzogJ05ldycsXG4gIHJlc3VsdHNNb2RlQWRkOiAnQWRkJyxcbiAgcmVzdWx0c01vZGVSZW1vdmU6ICdSZW1vdmUnXG59XG5cblxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQgeyBSZWFjdCwgUmVhY3RSZWR1eCwgdHlwZSBJTVN0YXRlIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgTGF5b3V0SXRlbVNpemVNb2RlcyB9IGZyb20gJ2ppbXUtbGF5b3V0cy9sYXlvdXQtcnVudGltZSdcbmltcG9ydCB7IFF1ZXJ5V2lkZ2V0Q29udGV4dCB9IGZyb20gJy4vd2lkZ2V0LWNvbnRleHQnXG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VBdXRvSGVpZ2h0ICgpIHtcbiAgY29uc3QgbGF5b3V0SW5mbyA9IFJlYWN0LnVzZUNvbnRleHQoUXVlcnlXaWRnZXRDb250ZXh0KVxuICBsZXQgbGF5b3V0SWRcbiAgbGV0IGxheW91dEl0ZW1JZFxuICBpZiAobGF5b3V0SW5mby5pbmNsdWRlcygnOicpKSB7XG4gICAgY29uc3QgciA9IGxheW91dEluZm8uc3BsaXQoJzonKVxuICAgIGxheW91dElkID0gclswXVxuICAgIGxheW91dEl0ZW1JZCA9IHJbMV1cbiAgfVxuICBjb25zdCBpc0F1dG8gPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xuICAgIGNvbnN0IGxheW91dEl0ZW0gPSBzdGF0ZS5hcHBDb25maWcubGF5b3V0c1tsYXlvdXRJZF0/LmNvbnRlbnQ/LltsYXlvdXRJdGVtSWRdXG4gICAgcmV0dXJuIGxheW91dEl0ZW0/LnNldHRpbmc/LmF1dG9Qcm9wcz8uaGVpZ2h0ID09PSBMYXlvdXRJdGVtU2l6ZU1vZGVzLkF1dG9cbiAgfSlcblxuICByZXR1cm4gaXNBdXRvXG59XG5cblxuIiwiaW1wb3J0IGljb25XYXJuaW5nIGZyb20gJ2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL3N1Z2dlc3RlZC93YXJuaW5nLnN2ZydcbmltcG9ydCBpY29uRXJyb3IgZnJvbSAnamltdS1pY29ucy9zdmcvb3V0bGluZWQvc3VnZ2VzdGVkL2Vycm9yLnN2ZydcbmltcG9ydCBhcnJvd05hdkJhY2sgZnJvbSAnamltdS1pY29ucy9zdmcvb3V0bGluZWQvZGlyZWN0aW9uYWwvYXJyb3ctbGVmdC5zdmcnXG5pbXBvcnQgYXJyb3dSaWdodCBmcm9tICdqaW11LWljb25zL3N2Zy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9yaWdodC5zdmcnXG5pbXBvcnQgdG9vbERlbGV0ZSBmcm9tICdqaW11LWljb25zL3N2Zy9vdXRsaW5lZC9lZGl0b3IvdHJhc2guc3ZnJ1xuaW1wb3J0IGljb25Nb3JlIGZyb20gJ2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2FwcGxpY2F0aW9uL21vcmUtaG9yaXpvbnRhbC5zdmcnXG5cbmV4cG9ydCBjb25zdCBnZXRXaWRnZXRSdW50aW1lRGF0YU1hcCA9ICgpID0+ICh7XG4gIGljb25NYXA6IHtcbiAgICBpY29uUXVlcnk6IHJlcXVpcmUoJy4uLy4uL2ljb24uc3ZnJyksXG4gICAgaWNvbldhcm5pbmcsXG4gICAgaWNvbkVycm9yLFxuICAgIGFycm93TmF2QmFjayxcbiAgICBhcnJvd1JpZ2h0LFxuICAgIHRvb2xEZWxldGUsXG4gICAgaWNvbk1vcmVcbiAgfVxufSlcblxuXG5cbiIsImltcG9ydCB7IFJlYWN0IH0gZnJvbSAnamltdS1jb3JlJ1xuXG5leHBvcnQgY29uc3QgUXVlcnlXaWRnZXRDb250ZXh0ID0gUmVhY3QuY3JlYXRlQ29udGV4dDxzdHJpbmc+KG51bGwpXG5cblxuIiwiaW1wb3J0IHsgQmFzZVZlcnNpb25NYW5hZ2VyIH0gZnJvbSAnamltdS1jb3JlJ1xuXG5jbGFzcyBWZXJzaW9uTWFuYWdlciBleHRlbmRzIEJhc2VWZXJzaW9uTWFuYWdlciB7XG4gIHZlcnNpb25zID0gW3tcbiAgICB2ZXJzaW9uOiAnMS4wLjAnLFxuICAgIGRlc2NyaXB0aW9uOiAnVGhlIGZpcnN0IHZlcnNpb24uJyxcbiAgICB1cGdyYWRlcjogKG9sZENvbmZpZykgPT4ge1xuICAgICAgcmV0dXJuIG9sZENvbmZpZ1xuICAgIH1cbiAgfV1cbn1cblxuZXhwb3J0IGNvbnN0IHZlcnNpb25NYW5hZ2VyID0gbmV3IFZlcnNpb25NYW5hZ2VyKClcblxuXG5cbiIsIi8qKlxuICogV2lkZ2V0IHZlcnNpb24gbnVtYmVyLlxuICogQmFzZSB2ZXJzaW9uIG1hdGNoZXMgRXhwZXJpZW5jZSBCdWlsZGVyIHZlcnNpb24gKDEuMTkuMCkuXG4gKiBSZWxlYXNlIG51bWJlciBpbmNyZW1lbnRzIG9uIG1ham9yIGNoYW5nZXMgKDAwMSwgMDAyLCAwMDMsIC4uLikuXG4gKiBNaW5vciB2ZXJzaW9uIGluY3JlbWVudHMgb24gc21hbGxlciBmaXhlcyBiZXR3ZWVuIG1ham9yIHJlbGVhc2VzIChyMDE1LjEsIHIwMTUuMiwgLi4uKS5cbiAqIFxuICogVG8gaW5jcmVtZW50OlxuICogLSBNYWpvciBjaGFuZ2U6IFVwZGF0ZSBSRUxFQVNFX05VTUJFUiAoZS5nLiwgMDE1IC0+IDAxNikgYW5kIHJlc2V0IE1JTk9SX1ZFUlNJT04gdG8gMFxuICogLSBNaW5vciBmaXg6IEluY3JlbWVudCBNSU5PUl9WRVJTSU9OIChlLmcuLCAxIC0+IDIpIHdoaWxlIGtlZXBpbmcgc2FtZSBSRUxFQVNFX05VTUJFUlxuICovXG5jb25zdCBCQVNFX1ZFUlNJT04gPSAnMS4xOS4wJ1xuY29uc3QgUkVMRUFTRV9OVU1CRVIgPSAnMDE3JyAvLyBJbmNyZW1lbnQgb24gbWFqb3IgY2hhbmdlcyAoMDAxLCAwMDIsIDAwMywgLi4uKVxuY29uc3QgTUlOT1JfVkVSU0lPTiA9ICc0MScgLy8gSW5jcmVtZW50IG9uIG1pbm9yIGZpeGVzIGJldHdlZW4gbWFqb3IgcmVsZWFzZXMgKDEsIDIsIDMsIC4uLilcblxuZXhwb3J0IGNvbnN0IFdJREdFVF9WRVJTSU9OID0gTUlOT1JfVkVSU0lPTiAmJiBNSU5PUl9WRVJTSU9OICE9PSAnMCdcbiAgPyBgJHtCQVNFX1ZFUlNJT059LXIke1JFTEVBU0VfTlVNQkVSfS4ke01JTk9SX1ZFUlNJT059YFxuICA6IGAke0JBU0VfVkVSU0lPTn0tciR7UkVMRUFTRV9OVU1CRVJ9YFxuXG4iLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfX2Vtb3Rpb25fcmVhY3RfanN4X3J1bnRpbWVfXzsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfamltdV9hcmNnaXNfXzsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfamltdV9jb3JlX187IiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX2ppbXVfbGF5b3V0c19sYXlvdXRfcnVudGltZV9fOyIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9qaW11X3RoZW1lX187IiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX2ppbXVfdWlfXzsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfamltdV91aV9iYXNpY19zcWxfZXhwcmVzc2lvbl9ydW50aW1lX187IiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX3dpZGdldHNfc2hhcmVkX2NvZGVfY29tbW9uX187IiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSAobW9kdWxlKSA9PiB7XG5cdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuXHRcdCgpID0+IChtb2R1bGVbJ2RlZmF1bHQnXSkgOlxuXHRcdCgpID0+IChtb2R1bGUpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCB7IGE6IGdldHRlciB9KTtcblx0cmV0dXJuIGdldHRlcjtcbn07IiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7IiwiLyoqXHJcbiAqIFdlYnBhY2sgd2lsbCByZXBsYWNlIF9fd2VicGFja19wdWJsaWNfcGF0aF9fIHdpdGggX193ZWJwYWNrX3JlcXVpcmVfXy5wIHRvIHNldCB0aGUgcHVibGljIHBhdGggZHluYW1pY2FsbHkuXHJcbiAqIFRoZSByZWFzb24gd2h5IHdlIGNhbid0IHNldCB0aGUgcHVibGljUGF0aCBpbiB3ZWJwYWNrIGNvbmZpZyBpczogd2UgY2hhbmdlIHRoZSBwdWJsaWNQYXRoIHdoZW4gZG93bmxvYWQuXHJcbiAqICovXHJcbl9fd2VicGFja19wdWJsaWNfcGF0aF9fID0gd2luZG93LmppbXVDb25maWcuYmFzZVVybFxyXG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7IFJlYWN0LCBqc3gsIGNzcywgdHlwZSBBbGxXaWRnZXRQcm9wcywgRGF0YVNvdXJjZU1hbmFnZXIsIHR5cGUgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSwgdHlwZSBGZWF0dXJlRGF0YVJlY29yZCwgTWVzc2FnZU1hbmFnZXIsIERhdGFSZWNvcmRzU2VsZWN0aW9uQ2hhbmdlTWVzc2FnZSwgdHlwZSBEYXRhU291cmNlIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgUGFwZXIsIFdpZGdldFBsYWNlaG9sZGVyIH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB7IHR5cGUgSU1Db25maWcsIFF1ZXJ5QXJyYW5nZVR5cGUsIFNlbGVjdGlvblR5cGUgfSBmcm9tICcuLi9jb25maWcnXG5pbXBvcnQgZGVmYXVsdE1lc3NhZ2VzIGZyb20gJy4vdHJhbnNsYXRpb25zL2RlZmF1bHQnXG5pbXBvcnQgeyBnZXRXaWRnZXRSdW50aW1lRGF0YU1hcCB9IGZyb20gJy4vd2lkZ2V0LWNvbmZpZydcbmltcG9ydCB7IEppbXVNYXBWaWV3Q29tcG9uZW50LCB0eXBlIEppbXVNYXBWaWV3IH0gZnJvbSAnamltdS1hcmNnaXMnXG5cbmltcG9ydCB7IHZlcnNpb25NYW5hZ2VyIH0gZnJvbSAnLi4vdmVyc2lvbi1tYW5hZ2VyJ1xuaW1wb3J0IHsgUXVlcnlUYXNrTGlzdCB9IGZyb20gJy4vcXVlcnktdGFzay1saXN0J1xuaW1wb3J0IHsgVGFza0xpc3RJbmxpbmUgfSBmcm9tICcuL3F1ZXJ5LXRhc2stbGlzdC1pbmxpbmUnXG5pbXBvcnQgeyBUYXNrTGlzdFBvcHBlcldyYXBwZXIgfSBmcm9tICcuL3F1ZXJ5LXRhc2stbGlzdC1wb3BwZXItd3JhcHBlcidcbmltcG9ydCB7IFF1ZXJ5V2lkZ2V0Q29udGV4dCB9IGZyb20gJy4vd2lkZ2V0LWNvbnRleHQnXG5pbXBvcnQgeyBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyIH0gZnJvbSAnd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24nXG5pbXBvcnQgeyBjcmVhdGVPckdldEdyYXBoaWNzTGF5ZXIsIGNsZWFudXBHcmFwaGljc0xheWVyIH0gZnJvbSAnLi9ncmFwaGljcy1sYXllci11dGlscydcbmltcG9ydCB7IFFVRVJZU0lNUExFX1NFTEVDVElPTl9FVkVOVCB9IGZyb20gJy4vc2VsZWN0aW9uLXV0aWxzJ1xuaW1wb3J0IHsgV0lER0VUX1ZFUlNJT04gfSBmcm9tICcuLi92ZXJzaW9uJ1xuXG5jb25zdCBkZWJ1Z0xvZ2dlciA9IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIoKVxuY29uc3QgeyBpY29uTWFwIH0gPSBnZXRXaWRnZXRSdW50aW1lRGF0YU1hcCgpXG5cbi8qKlxuICogQ3VzdG9tIGV2ZW50IG5hbWUgZm9yIFF1ZXJ5U2ltcGxlIHRvIG5vdGlmeSBIZWxwZXJTaW1wbGUgb2Ygd2lkZ2V0IG9wZW4vY2xvc2Ugc3RhdGUuXG4gKi9cbmNvbnN0IFFVRVJZU0lNUExFX1dJREdFVF9TVEFURV9FVkVOVCA9ICdxdWVyeXNpbXBsZS13aWRnZXQtc3RhdGUtY2hhbmdlZCdcblxuLyoqXG4gKiBDdXN0b20gZXZlbnQgbmFtZSBmb3IgcmVxdWVzdGluZyByZXN0b3JhdGlvbiB3aGVuIGlkZW50aWZ5IHBvcHVwIGNsb3Nlcy5cbiAqL1xuY29uc3QgUkVTVE9SRV9PTl9JREVOVElGWV9DTE9TRV9FVkVOVCA9ICdxdWVyeXNpbXBsZS1yZXN0b3JlLW9uLWlkZW50aWZ5LWNsb3NlJ1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBXaWRnZXQgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50PEFsbFdpZGdldFByb3BzPElNQ29uZmlnPiwgeyBcbiAgaW5pdGlhbFF1ZXJ5VmFsdWU/OiB7IHNob3J0SWQ6IHN0cmluZywgdmFsdWU6IHN0cmluZyB9LCBcbiAgaXNQYW5lbFZpc2libGU/OiBib29sZWFuLCBcbiAgaGFzU2VsZWN0aW9uPzogYm9vbGVhbiwgXG4gIHNlbGVjdGlvblJlY29yZENvdW50PzogbnVtYmVyLCBcbiAgbGFzdFNlbGVjdGlvbj86IHsgcmVjb3JkSWRzOiBzdHJpbmdbXSwgb3V0cHV0RHNJZDogc3RyaW5nLCBxdWVyeUl0ZW1Db25maWdJZDogc3RyaW5nIH0sIFxuICByZXN1bHRzTW9kZT86IFNlbGVjdGlvblR5cGUsIFxuICBhY2N1bXVsYXRlZFJlY29yZHM/OiBGZWF0dXJlRGF0YVJlY29yZFtdLCBcbiAgZ3JhcGhpY3NMYXllckluaXRpYWxpemVkPzogYm9vbGVhbiwgXG4gIGppbXVNYXBWaWV3PzogSmltdU1hcFZpZXcsXG4gIGFjdGl2ZVRhYj86ICdxdWVyeScgfCAncmVzdWx0cydcbn0+IHtcbiAgc3RhdGljIHZlcnNpb25NYW5hZ2VyID0gdmVyc2lvbk1hbmFnZXJcbiAgcHJpdmF0ZSBsYXN0UHJvY2Vzc2VkSGFzaDogc3RyaW5nID0gJydcblxuICBzdGF0ZTogeyBcbiAgICBpbml0aWFsUXVlcnlWYWx1ZT86IHsgc2hvcnRJZDogc3RyaW5nLCB2YWx1ZTogc3RyaW5nIH0sIFxuICAgIGlzUGFuZWxWaXNpYmxlPzogYm9vbGVhbiwgXG4gICAgaGFzU2VsZWN0aW9uPzogYm9vbGVhbiwgXG4gICAgc2VsZWN0aW9uUmVjb3JkQ291bnQ/OiBudW1iZXIsIFxuICAgIGxhc3RTZWxlY3Rpb24/OiB7IHJlY29yZElkczogc3RyaW5nW10sIG91dHB1dERzSWQ6IHN0cmluZywgcXVlcnlJdGVtQ29uZmlnSWQ6IHN0cmluZyB9LCBcbiAgICByZXN1bHRzTW9kZT86IFNlbGVjdGlvblR5cGUsIFxuICAgIGFjY3VtdWxhdGVkUmVjb3Jkcz86IEZlYXR1cmVEYXRhUmVjb3JkW10sIFxuICAgIGdyYXBoaWNzTGF5ZXJJbml0aWFsaXplZD86IGJvb2xlYW4sIFxuICAgIGppbXVNYXBWaWV3PzogSmltdU1hcFZpZXcsXG4gICAgYWN0aXZlVGFiPzogJ3F1ZXJ5JyB8ICdyZXN1bHRzJ1xuICB9ID0ge1xuICAgIHJlc3VsdHNNb2RlOiBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvbiwgLy8gRGVmYXVsdCBtb2RlXG4gICAgYWN0aXZlVGFiOiAncXVlcnknXG4gIH1cblxuICBoYW5kbGVUYWJDaGFuZ2UgPSAoYWN0aXZlVGFiOiAncXVlcnknIHwgJ3Jlc3VsdHMnKSA9PiB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7IGFjdGl2ZVRhYiB9KVxuICB9XG4gIHByaXZhdGUgd2lkZ2V0UmVmID0gUmVhY3QuY3JlYXRlUmVmPEhUTUxEaXZFbGVtZW50PigpXG4gIHByaXZhdGUgdmlzaWJpbGl0eU9ic2VydmVyOiBJbnRlcnNlY3Rpb25PYnNlcnZlciB8IG51bGwgPSBudWxsXG4gIHByaXZhdGUgdmlzaWJpbGl0eUNoZWNrSW50ZXJ2YWw6IG51bWJlciB8IG51bGwgPSBudWxsXG4gIHByaXZhdGUgZ3JhcGhpY3NMYXllclJlZiA9IFJlYWN0LmNyZWF0ZVJlZjxfX2VzcmkuR3JhcGhpY3NMYXllciB8IG51bGw+KClcbiAgcHJpdmF0ZSBtYXBWaWV3UmVmID0gUmVhY3QuY3JlYXRlUmVmPF9fZXNyaS5NYXBWaWV3IHwgX19lc3JpLlNjZW5lVmlldyB8IG51bGw+KClcblxuICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICB0aGlzLmNoZWNrUXVlcnlTdHJpbmdGb3JTaG9ydElkcygpXG4gICAgLy8gTGlzdGVuIGZvciBoYXNoIGNoYW5nZXMgdG8gZGV0ZWN0IHdoZW4gaGFzaCBwYXJhbWV0ZXJzIGFyZSB1cGRhdGVkXG4gICAgLy8gVGhpcyBpcyBuZWVkZWQgd2hlbiBIZWxwZXJTaW1wbGUgb3BlbnMgdGhlIHdpZGdldCB3aXRoIGEgaGFzaCBwYXJhbWV0ZXJcbiAgICAvLyBvciB3aGVuIGhhc2ggcGFyYW1ldGVycyBjaGFuZ2Ugd2hpbGUgdGhlIHdpZGdldCBpcyBhbHJlYWR5IG1vdW50ZWRcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignaGFzaGNoYW5nZScsIHRoaXMuY2hlY2tRdWVyeVN0cmluZ0ZvclNob3J0SWRzKVxuICAgIFxuICAgIC8vIFNldCB1cCB2aXNpYmlsaXR5IGRldGVjdGlvblxuICAgIHRoaXMuc2V0dXBWaXNpYmlsaXR5RGV0ZWN0aW9uKClcbiAgICBcbiAgICAvLyBMaXN0ZW4gZm9yIHNlbGVjdGlvbiBjaGFuZ2VzIGZyb20gcXVlcnktcmVzdWx0XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoUVVFUllTSU1QTEVfU0VMRUNUSU9OX0VWRU5ULCB0aGlzLmhhbmRsZVNlbGVjdGlvbkNoYW5nZSBhcyBFdmVudExpc3RlbmVyKVxuICAgIFxuICAgIC8vIExpc3RlbiBmb3IgcmVzdG9yZSByZXF1ZXN0cyB3aGVuIGlkZW50aWZ5IHBvcHVwIGNsb3Nlc1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFJFU1RPUkVfT05fSURFTlRJRllfQ0xPU0VfRVZFTlQsIHRoaXMuaGFuZGxlUmVzdG9yZU9uSWRlbnRpZnlDbG9zZSBhcyBFdmVudExpc3RlbmVyKVxuICAgIFxuICAgIC8vIE5vdGlmeSBIZWxwZXJTaW1wbGUgdGhhdCB0aGlzIHdpZGdldCBpcyBub3cgb3BlblxuICAgIGNvbnN0IG9wZW5FdmVudCA9IG5ldyBDdXN0b21FdmVudChRVUVSWVNJTVBMRV9XSURHRVRfU1RBVEVfRVZFTlQsIHtcbiAgICAgIGRldGFpbDoge1xuICAgICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgICAgaXNPcGVuOiB0cnVlXG4gICAgICB9LFxuICAgICAgYnViYmxlczogdHJ1ZSxcbiAgICAgIGNhbmNlbGFibGU6IHRydWVcbiAgICB9KVxuICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KG9wZW5FdmVudClcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1dJREdFVC1TVEFURScsIHtcbiAgICAgIGV2ZW50OiAnd2lkZ2V0LW9wZW5lZCcsXG4gICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgIGlzT3BlbjogdHJ1ZSxcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgfSlcbiAgICBcbiAgICAvLyBBbHNvIGNoZWNrIGFmdGVyIGEgc2hvcnQgZGVsYXkgdG8gY2F0Y2ggY2FzZXMgd2hlcmUgaGFzaCB3YXMgYWxyZWFkeSBwcmVzZW50XG4gICAgLy8gd2hlbiB3aWRnZXQgd2FzIG9wZW5lZCAoZS5nLiwgYnkgSGVscGVyU2ltcGxlIG9wZW5pbmcgdGhlIHdpZGdldClcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMuY2hlY2tRdWVyeVN0cmluZ0ZvclNob3J0SWRzKClcbiAgICB9LCAxMDApXG4gICAgXG4gICAgLy8gR3JhcGhpY3MgbGF5ZXIgd2lsbCBiZSBpbml0aWFsaXplZCB3aGVuIG1hcCB2aWV3IGJlY29tZXMgYXZhaWxhYmxlIHZpYSBKaW11TWFwVmlld0NvbXBvbmVudFxuICB9XG5cbiAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgLy8gQ2xlYW4gdXAgaGFzaGNoYW5nZSBsaXN0ZW5lclxuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdoYXNoY2hhbmdlJywgdGhpcy5jaGVja1F1ZXJ5U3RyaW5nRm9yU2hvcnRJZHMpXG4gICAgXG4gICAgLy8gQ2xlYW4gdXAgc2VsZWN0aW9uIGNoYW5nZSBsaXN0ZW5lclxuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFFVRVJZU0lNUExFX1NFTEVDVElPTl9FVkVOVCwgdGhpcy5oYW5kbGVTZWxlY3Rpb25DaGFuZ2UgYXMgRXZlbnRMaXN0ZW5lcilcbiAgICBcbiAgICAvLyBDbGVhbiB1cCByZXN0b3JlIG9uIGlkZW50aWZ5IGNsb3NlIGxpc3RlbmVyXG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoUkVTVE9SRV9PTl9JREVOVElGWV9DTE9TRV9FVkVOVCwgdGhpcy5oYW5kbGVSZXN0b3JlT25JZGVudGlmeUNsb3NlIGFzIEV2ZW50TGlzdGVuZXIpXG4gICAgXG4gICAgLy8gQ2xlYW4gdXAgdmlzaWJpbGl0eSBkZXRlY3Rpb25cbiAgICB0aGlzLmNsZWFudXBWaXNpYmlsaXR5RGV0ZWN0aW9uKClcbiAgICBcbiAgICAvLyBDbGVhbiB1cCBncmFwaGljcyBsYXllclxuICAgIHRoaXMuY2xlYW51cEdyYXBoaWNzTGF5ZXIoKVxuICAgIFxuICAgIC8vIE5vdGlmeSBIZWxwZXJTaW1wbGUgdGhhdCB0aGlzIHdpZGdldCBpcyBub3cgY2xvc2VkXG4gICAgY29uc3QgY2xvc2VFdmVudCA9IG5ldyBDdXN0b21FdmVudChRVUVSWVNJTVBMRV9XSURHRVRfU1RBVEVfRVZFTlQsIHtcbiAgICAgIGRldGFpbDoge1xuICAgICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgICAgaXNPcGVuOiBmYWxzZVxuICAgICAgfSxcbiAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICBjYW5jZWxhYmxlOiB0cnVlXG4gICAgfSlcbiAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChjbG9zZUV2ZW50KVxuICAgIGRlYnVnTG9nZ2VyLmxvZygnV0lER0VULVNUQVRFJywge1xuICAgICAgZXZlbnQ6ICd3aWRnZXQtY2xvc2VkJyxcbiAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgaXNPcGVuOiBmYWxzZSxcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgfSlcbiAgfVxuXG4gIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHM6IEFsbFdpZGdldFByb3BzPElNQ29uZmlnPikge1xuICAgIGlmIChwcmV2UHJvcHMuY29uZmlnLnF1ZXJ5SXRlbXMgIT09IHRoaXMucHJvcHMuY29uZmlnLnF1ZXJ5SXRlbXMpIHtcbiAgICAgIHRoaXMuY2hlY2tRdWVyeVN0cmluZ0ZvclNob3J0SWRzKClcbiAgICB9XG4gICAgXG4gICAgLy8gQ2xlYW4gdXAgZ3JhcGhpY3MgbGF5ZXIgaWYgY29uZmlnIGNoYW5nZWQgdG8gZGlzYWJsZWRcbiAgICBpZiAocHJldlByb3BzLmNvbmZpZy51c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0ICE9PSB0aGlzLnByb3BzLmNvbmZpZy51c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0KSB7XG4gICAgICBpZiAoIXRoaXMucHJvcHMuY29uZmlnLnVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQpIHtcbiAgICAgICAgdGhpcy5jbGVhbnVwR3JhcGhpY3NMYXllcigpXG4gICAgICB9XG4gICAgICAvLyBJZiBlbmFibGVkLCBpbml0aWFsaXphdGlvbiB3aWxsIGhhcHBlbiB3aGVuIG1hcCB2aWV3IGJlY29tZXMgYXZhaWxhYmxlIHZpYSBKaW11TWFwVmlld0NvbXBvbmVudFxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBOb3RpZmllcyBIZWxwZXJTaW1wbGUgb2Ygc2VsZWN0aW9uIGNoYW5nZXMuXG4gICAqIENhbGxlZCBieSBRdWVyeVRhc2tSZXN1bHQgd2hlbiBzZWxlY3Rpb24gaXMgbWFkZS5cbiAgICogXG4gICAqIEBwYXJhbSByZWNvcmRJZHMgLSBBcnJheSBvZiBzZWxlY3RlZCByZWNvcmQgSURzXG4gICAqIEBwYXJhbSBkYXRhU291cmNlSWQgLSBPcHRpb25hbCBkYXRhIHNvdXJjZSBJRFxuICAgKi9cbiAgbm90aWZ5SGVscGVyU2ltcGxlT2ZTZWxlY3Rpb24gPSAocmVjb3JkSWRzOiBzdHJpbmdbXSwgZGF0YVNvdXJjZUlkPzogc3RyaW5nKSA9PiB7XG4gICAgY29uc3QgeyBpZCB9ID0gdGhpcy5wcm9wc1xuICAgIFxuICAgIGNvbnN0IGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KFFVRVJZU0lNUExFX1NFTEVDVElPTl9FVkVOVCwge1xuICAgICAgZGV0YWlsOiB7XG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgcmVjb3JkSWRzLFxuICAgICAgICBkYXRhU291cmNlSWRcbiAgICAgIH0sXG4gICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgY2FuY2VsYWJsZTogdHJ1ZVxuICAgIH0pXG4gICAgd2luZG93LmRpc3BhdGNoRXZlbnQoZXZlbnQpXG4gIH1cblxuICAvKipcbiAgICogU2V0cyB1cCB2aXNpYmlsaXR5IGRldGVjdGlvbiB0byB0cmFjayB3aGVuIHRoZSB3aWRnZXQgcGFuZWwgaXMgb3Blbi9jbG9zZWQuXG4gICAqIFVzZXMgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIgaWYgYXZhaWxhYmxlLCBmYWxscyBiYWNrIHRvIHBlcmlvZGljIGNoZWNraW5nLlxuICAgKi9cbiAgc2V0dXBWaXNpYmlsaXR5RGV0ZWN0aW9uID0gKCkgPT4ge1xuICAgIC8vIFdhaXQgZm9yIG5leHQgdGljayB0byBlbnN1cmUgcmVmIGlzIHNldFxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgaWYgKCF0aGlzLndpZGdldFJlZi5jdXJyZW50KSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnV0lER0VULVNUQVRFJywge1xuICAgICAgICAgIGV2ZW50OiAndmlzaWJpbGl0eS1kZXRlY3Rpb24tc2V0dXAtZmFpbGVkJyxcbiAgICAgICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgICAgICByZWFzb246ICd3aWRnZXQtcmVmLW5vdC1hdmFpbGFibGUnXG4gICAgICAgIH0pXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBjb25zdCBlbGVtZW50ID0gdGhpcy53aWRnZXRSZWYuY3VycmVudFxuXG4gICAgICAvLyBNZXRob2QgMTogSW50ZXJzZWN0aW9uT2JzZXJ2ZXIgKG1vc3QgZWZmaWNpZW50KVxuICAgICAgaWYgKCdJbnRlcnNlY3Rpb25PYnNlcnZlcicgaW4gd2luZG93KSB7XG4gICAgICAgIHRoaXMudmlzaWJpbGl0eU9ic2VydmVyID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKFxuICAgICAgICAgIChlbnRyaWVzKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBlbnRyeSA9IGVudHJpZXNbMF1cbiAgICAgICAgICAgIGNvbnN0IGlzVmlzaWJsZSA9IGVudHJ5LmlzSW50ZXJzZWN0aW5nICYmIGVudHJ5LmludGVyc2VjdGlvblJhdGlvID4gMFxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBPbmx5IGxvZyBpZiBzdGF0ZSBjaGFuZ2VkXG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0ZS5pc1BhbmVsVmlzaWJsZSAhPT0gaXNWaXNpYmxlKSB7XG4gICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBpc1BhbmVsVmlzaWJsZTogaXNWaXNpYmxlIH0pXG4gICAgICAgICAgICAgIHRoaXMubG9nVmlzaWJpbGl0eUNoYW5nZShpc1Zpc2libGUsICdJbnRlcnNlY3Rpb25PYnNlcnZlcicpXG4gICAgICAgICAgICAgIHRoaXMubm90aWZ5SGVscGVyU2ltcGxlT2ZQYW5lbFN0YXRlKGlzVmlzaWJsZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHRocmVzaG9sZDogWzAsIDAuMSwgMS4wXSwgLy8gVHJpZ2dlciBhdCAwJSwgMTAlLCBhbmQgMTAwJSB2aXNpYmlsaXR5XG4gICAgICAgICAgICByb290TWFyZ2luOiAnMHB4J1xuICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgICBcbiAgICAgICAgdGhpcy52aXNpYmlsaXR5T2JzZXJ2ZXIub2JzZXJ2ZShlbGVtZW50KVxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1dJREdFVC1TVEFURScsIHtcbiAgICAgICAgICBldmVudDogJ3Zpc2liaWxpdHktZGV0ZWN0aW9uLXNldHVwJyxcbiAgICAgICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgICAgICBtZXRob2Q6ICdJbnRlcnNlY3Rpb25PYnNlcnZlcidcbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIE1ldGhvZCAyOiBGYWxsYmFjayB0byBwZXJpb2RpYyBjaGVja2luZ1xuICAgICAgICB0aGlzLnZpc2liaWxpdHlDaGVja0ludGVydmFsID0gd2luZG93LnNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgICBjb25zdCBpc1Zpc2libGUgPSB0aGlzLmNoZWNrVmlzaWJpbGl0eSgpXG4gICAgICAgICAgaWYgKHRoaXMuc3RhdGUuaXNQYW5lbFZpc2libGUgIT09IGlzVmlzaWJsZSkge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGlzUGFuZWxWaXNpYmxlOiBpc1Zpc2libGUgfSlcbiAgICAgICAgICAgIHRoaXMubG9nVmlzaWJpbGl0eUNoYW5nZShpc1Zpc2libGUsICdwZXJpb2RpYy1jaGVjaycpXG4gICAgICAgICAgICB0aGlzLm5vdGlmeUhlbHBlclNpbXBsZU9mUGFuZWxTdGF0ZShpc1Zpc2libGUpXG4gICAgICAgICAgfVxuICAgICAgICB9LCAyNTApIC8vIENoZWNrIGV2ZXJ5IDI1MG1zXG4gICAgICAgIFxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1dJREdFVC1TVEFURScsIHtcbiAgICAgICAgICBldmVudDogJ3Zpc2liaWxpdHktZGV0ZWN0aW9uLXNldHVwJyxcbiAgICAgICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgICAgICBtZXRob2Q6ICdwZXJpb2RpYy1jaGVjaydcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9LCAxMDApXG4gIH1cblxuICAvKipcbiAgICogQ2xlYW5zIHVwIHZpc2liaWxpdHkgZGV0ZWN0aW9uIG9ic2VydmVycy9pbnRlcnZhbHMuXG4gICAqL1xuICBjbGVhbnVwVmlzaWJpbGl0eURldGVjdGlvbiA9ICgpID0+IHtcbiAgICBpZiAodGhpcy52aXNpYmlsaXR5T2JzZXJ2ZXIpIHtcbiAgICAgIHRoaXMudmlzaWJpbGl0eU9ic2VydmVyLmRpc2Nvbm5lY3QoKVxuICAgICAgdGhpcy52aXNpYmlsaXR5T2JzZXJ2ZXIgPSBudWxsXG4gICAgfVxuICAgIFxuICAgIGlmICh0aGlzLnZpc2liaWxpdHlDaGVja0ludGVydmFsICE9PSBudWxsKSB7XG4gICAgICBjbGVhckludGVydmFsKHRoaXMudmlzaWJpbGl0eUNoZWNrSW50ZXJ2YWwpXG4gICAgICB0aGlzLnZpc2liaWxpdHlDaGVja0ludGVydmFsID0gbnVsbFxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIG1hcCB2aWV3IGNoYW5nZSBmcm9tIEppbXVNYXBWaWV3Q29tcG9uZW50LlxuICAgKiBXaGVuIG1hcCB2aWV3IGJlY29tZXMgYXZhaWxhYmxlLCBpbml0aWFsaXplIGdyYXBoaWNzIGxheWVyIGlmIGVuYWJsZWQuXG4gICAqL1xuICBwcml2YXRlIGhhbmRsZUppbXVNYXBWaWV3Q2hhbmdlZCA9IChqaW11TWFwVmlldzogSmltdU1hcFZpZXcgfCBudWxsKSA9PiB7XG4gICAgY29uc3QgeyBpZCwgY29uZmlnIH0gPSB0aGlzLnByb3BzXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgIGV2ZW50OiAnaGFuZGxlSmltdU1hcFZpZXdDaGFuZ2VkJyxcbiAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgIGhhc0ppbXVNYXBWaWV3OiAhIWppbXVNYXBWaWV3LFxuICAgICAgaGFzVmlldzogISEoamltdU1hcFZpZXc/LnZpZXcpLFxuICAgICAgdmlld1R5cGU6IGppbXVNYXBWaWV3Py52aWV3Py50eXBlIHx8ICdub25lJyxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgLy8gU3RvcmUgSmltdU1hcFZpZXcgaW4gc3RhdGVcbiAgICB0aGlzLnNldFN0YXRlKHsgamltdU1hcFZpZXc6IGppbXVNYXBWaWV3IHx8IHVuZGVmaW5lZCB9KVxuICAgIFxuICAgIC8vIElmIG1hcCB2aWV3IGlzIGF2YWlsYWJsZSBhbmQgZ3JhcGhpY3MgbGF5ZXIgaXMgZW5hYmxlZCwgaW5pdGlhbGl6ZSBpdFxuICAgIGlmIChqaW11TWFwVmlldz8udmlldyAmJiBjb25maWcudXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCAmJiAhdGhpcy5ncmFwaGljc0xheWVyUmVmLmN1cnJlbnQpIHtcbiAgICAgIHRoaXMuaW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXIoamltdU1hcFZpZXcudmlldylcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSW5pdGlhbGl6ZXMgdGhlIGdyYXBoaWNzIGxheWVyIHVzaW5nIHRoZSBwcm92aWRlZCBtYXAgdmlldy5cbiAgICovXG4gIHByaXZhdGUgaW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXIgPSBhc3luYyAobWFwVmlldzogX19lc3JpLk1hcFZpZXcgfCBfX2VzcmkuU2NlbmVWaWV3KSA9PiB7XG4gICAgY29uc3QgeyBpZCB9ID0gdGhpcy5wcm9wc1xuICAgIFxuICAgIHRyeSB7XG4gICAgICAvLyBDcmVhdGUgb3IgZ2V0IGdyYXBoaWNzIGxheWVyXG4gICAgICBjb25zdCBncmFwaGljc0xheWVyID0gYXdhaXQgY3JlYXRlT3JHZXRHcmFwaGljc0xheWVyKGlkLCBtYXBWaWV3KVxuICAgICAgaWYgKCFncmFwaGljc0xheWVyKSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICAgICAgZXZlbnQ6ICdpbml0aWFsaXplR3JhcGhpY3NMYXllci1mYWlsZWQnLFxuICAgICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgICByZWFzb246ICdncmFwaGljcy1sYXllci1jcmVhdGlvbi1mYWlsZWQnLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9KVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgLy8gU3RvcmUgcmVmZXJlbmNlc1xuICAgICAgdGhpcy5tYXBWaWV3UmVmLmN1cnJlbnQgPSBtYXBWaWV3XG4gICAgICB0aGlzLmdyYXBoaWNzTGF5ZXJSZWYuY3VycmVudCA9IGdyYXBoaWNzTGF5ZXJcblxuICAgICAgLy8gVXBkYXRlIHN0YXRlIHRvIGZvcmNlIHJlLXJlbmRlciBhbmQgdXBkYXRlIHByb3BzXG4gICAgICB0aGlzLnNldFN0YXRlKHsgZ3JhcGhpY3NMYXllckluaXRpYWxpemVkOiB0cnVlIH0pXG5cbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICAgIGV2ZW50OiAnaW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXItc3VjY2VzcycsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgZ3JhcGhpY3NMYXllcklkOiBncmFwaGljc0xheWVyLmlkLFxuICAgICAgICB2aWV3VHlwZTogbWFwVmlldy50eXBlIHx8ICd1bmtub3duJyxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgICBldmVudDogJ2luaXRpYWxpemVHcmFwaGljc0xheWVyLWVycm9yJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpLFxuICAgICAgICBlcnJvclN0YWNrOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWQsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSW5pdGlhbGl6ZXMgZ3JhcGhpY3MgbGF5ZXIgbGF6aWx5IHdoZW4gb3V0cHV0RFMgYmVjb21lcyBhdmFpbGFibGUuXG4gICAqIE5vdyB1c2VzIHRoZSBtYXAgdmlldyBmcm9tIEppbXVNYXBWaWV3Q29tcG9uZW50IGluc3RlYWQgb2YgdHJ5aW5nIHRvIGdldCBpdCBmcm9tIGRhdGEgc291cmNlLlxuICAgKi9cbiAgcHVibGljIGluaXRpYWxpemVHcmFwaGljc0xheWVyRnJvbU91dHB1dERTID0gYXN5bmMgKG91dHB1dERTOiBEYXRhU291cmNlKSA9PiB7XG4gICAgY29uc3QgeyBpZCwgY29uZmlnIH0gPSB0aGlzLnByb3BzXG4gICAgXG4gICAgLy8gT25seSBpbml0aWFsaXplIGlmIGVuYWJsZWQgYW5kIG5vdCBhbHJlYWR5IGluaXRpYWxpemVkXG4gICAgaWYgKCFjb25maWcudXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCB8fCB0aGlzLmdyYXBoaWNzTGF5ZXJSZWYuY3VycmVudCkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgICAgZXZlbnQ6ICdpbml0aWFsaXplR3JhcGhpY3NMYXllckZyb21PdXRwdXREUy1za2lwcGVkJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICByZWFzb246ICFjb25maWcudXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCA/ICdub3QtZW5hYmxlZCcgOiAnYWxyZWFkeS1pbml0aWFsaXplZCcsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIFVzZSBtYXAgdmlldyBmcm9tIEppbXVNYXBWaWV3Q29tcG9uZW50IGlmIGF2YWlsYWJsZVxuICAgIGNvbnN0IG1hcFZpZXcgPSB0aGlzLnN0YXRlLmppbXVNYXBWaWV3Py52aWV3IHx8IHRoaXMubWFwVmlld1JlZi5jdXJyZW50XG4gICAgaWYgKCFtYXBWaWV3KSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgICBldmVudDogJ2luaXRpYWxpemVHcmFwaGljc0xheWVyRnJvbU91dHB1dERTLXNraXBwZWQnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIHJlYXNvbjogJ21hcC12aWV3LW5vdC1hdmFpbGFibGUteWV0JyxcbiAgICAgICAgb3V0cHV0RFNJZDogb3V0cHV0RFMuaWQsXG4gICAgICAgIGhhc0ppbXVNYXBWaWV3OiAhIXRoaXMuc3RhdGUuamltdU1hcFZpZXcsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIEluaXRpYWxpemUgZ3JhcGhpY3MgbGF5ZXIgd2l0aCB0aGUgbWFwIHZpZXdcbiAgICBhd2FpdCB0aGlzLmluaXRpYWxpemVHcmFwaGljc0xheWVyKG1hcFZpZXcpXG4gIH1cblxuICAvKipcbiAgICogQ2xlYW5zIHVwIHRoZSBncmFwaGljcyBsYXllciB3aGVuIHdpZGdldCB1bm1vdW50cyBvciBjb25maWcgY2hhbmdlcy5cbiAgICovXG4gIHByaXZhdGUgY2xlYW51cEdyYXBoaWNzTGF5ZXIgPSAoKSA9PiB7XG4gICAgY29uc3QgeyBpZCB9ID0gdGhpcy5wcm9wc1xuICAgIGNvbnN0IG1hcFZpZXcgPSB0aGlzLm1hcFZpZXdSZWYuY3VycmVudFxuXG4gICAgaWYgKG1hcFZpZXcpIHtcbiAgICAgIGNsZWFudXBHcmFwaGljc0xheWVyKGlkLCBtYXBWaWV3KVxuICAgICAgdGhpcy5tYXBWaWV3UmVmLmN1cnJlbnQgPSBudWxsXG4gICAgICB0aGlzLmdyYXBoaWNzTGF5ZXJSZWYuY3VycmVudCA9IG51bGxcblxuICAgICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgICAgZXZlbnQ6ICdjbGVhbnVwR3JhcGhpY3NMYXllci1jb21wbGV0ZScsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhcnMgdGhlIGdyYXBoaWNzIGxheWVyIGlmIGl0IGV4aXN0cy5cbiAgICogVGhpcyBpcyBjYWxsZWQgd2hlbiBjbGVhcmluZyByZXN1bHRzIG9yIHN3aXRjaGluZyBxdWVyaWVzIGluIE5ldyBtb2RlIHRvIGVuc3VyZSBncmFwaGljcyBhcmUgcmVtb3ZlZC5cbiAgICovXG4gIHB1YmxpYyBjbGVhckdyYXBoaWNzTGF5ZXJJZkV4aXN0cyA9ICgpID0+IHtcbiAgICBjb25zdCB7IGNvbmZpZyB9ID0gdGhpcy5wcm9wc1xuICAgIGNvbnN0IGdyYXBoaWNzTGF5ZXIgPSB0aGlzLmdyYXBoaWNzTGF5ZXJSZWYuY3VycmVudFxuICAgIFxuICAgIGlmIChjb25maWcudXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCAmJiBncmFwaGljc0xheWVyKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgICBldmVudDogJ2NsZWFyR3JhcGhpY3NMYXllcklmRXhpc3RzLWNhbGxlZCcsXG4gICAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgICBncmFwaGljc0xheWVySWQ6IGdyYXBoaWNzTGF5ZXIuaWQsXG4gICAgICAgIGdyYXBoaWNzQ291bnQ6IGdyYXBoaWNzTGF5ZXIuZ3JhcGhpY3MubGVuZ3RoLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGNvbnN0IHsgY2xlYXJHcmFwaGljc0xheWVyIH0gPSByZXF1aXJlKCcuL2dyYXBoaWNzLWxheWVyLXV0aWxzJylcbiAgICAgIGNsZWFyR3JhcGhpY3NMYXllcihncmFwaGljc0xheWVyKVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgICBldmVudDogJ2NsZWFyR3JhcGhpY3NMYXllcklmRXhpc3RzLWNvbXBsZXRlJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICAgIGdyYXBoaWNzTGF5ZXJJZDogZ3JhcGhpY3NMYXllci5pZCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgICBldmVudDogJ2NsZWFyR3JhcGhpY3NMYXllcklmRXhpc3RzLXNraXBwZWQnLFxuICAgICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgICAgcmVhc29uOiAhY29uZmlnLnVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQgPyAnbm90LWVuYWJsZWQnIDogJ25vLWdyYXBoaWNzLWxheWVyJyxcbiAgICAgICAgaGFzR3JhcGhpY3NMYXllcjogISFncmFwaGljc0xheWVyLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrcyBpZiB0aGUgd2lkZ2V0IGVsZW1lbnQgaXMgY3VycmVudGx5IHZpc2libGUuXG4gICAqIEZhbGxiYWNrIG1ldGhvZCB3aGVuIEludGVyc2VjdGlvbk9ic2VydmVyIGlzIG5vdCBhdmFpbGFibGUuXG4gICAqL1xuICBjaGVja1Zpc2liaWxpdHkgPSAoKTogYm9vbGVhbiA9PiB7XG4gICAgaWYgKCF0aGlzLndpZGdldFJlZi5jdXJyZW50KSByZXR1cm4gZmFsc2VcbiAgICBcbiAgICBjb25zdCBlbGVtZW50ID0gdGhpcy53aWRnZXRSZWYuY3VycmVudFxuICAgIGNvbnN0IHN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWxlbWVudClcbiAgICBjb25zdCByZWN0ID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICAgIFxuICAgIGNvbnN0IGlzVmlzaWJsZSA9IChcbiAgICAgIHN0eWxlLmRpc3BsYXkgIT09ICdub25lJyAmJlxuICAgICAgc3R5bGUudmlzaWJpbGl0eSAhPT0gJ2hpZGRlbicgJiZcbiAgICAgIHN0eWxlLm9wYWNpdHkgIT09ICcwJyAmJlxuICAgICAgcmVjdC53aWR0aCA+IDAgJiZcbiAgICAgIHJlY3QuaGVpZ2h0ID4gMCAmJlxuICAgICAgcmVjdC50b3AgPCB3aW5kb3cuaW5uZXJIZWlnaHQgJiZcbiAgICAgIHJlY3QuYm90dG9tID4gMCAmJlxuICAgICAgcmVjdC5sZWZ0IDwgd2luZG93LmlubmVyV2lkdGggJiZcbiAgICAgIHJlY3QucmlnaHQgPiAwXG4gICAgKVxuICAgIFxuICAgIHJldHVybiBpc1Zpc2libGVcbiAgfVxuXG4gIC8qKlxuICAgKiBUcmFja3Mgc2VsZWN0aW9uIGNoYW5nZXMgZnJvbSBxdWVyeS1yZXN1bHQuXG4gICAqIEluIFwiQWRkIHRvXCIgb3IgXCJSZW1vdmUgZnJvbVwiIG1vZGVzLCB1c2VzIGFjY3VtdWxhdGVkIHJlY29yZHMgY291bnQgZm9yIHJlc3RvcmF0aW9uLlxuICAgKi9cbiAgaGFuZGxlU2VsZWN0aW9uQ2hhbmdlID0gKGV2ZW50OiBFdmVudCkgPT4ge1xuICAgIGNvbnN0IGN1c3RvbUV2ZW50ID0gZXZlbnQgYXMgQ3VzdG9tRXZlbnQ8eyB3aWRnZXRJZDogc3RyaW5nLCByZWNvcmRJZHM6IHN0cmluZ1tdLCBkYXRhU291cmNlSWQ/OiBzdHJpbmcsIG91dHB1dERzSWQ/OiBzdHJpbmcsIHF1ZXJ5SXRlbUNvbmZpZ0lkPzogc3RyaW5nIH0+XG4gICAgY29uc3QgeyBpZCB9ID0gdGhpcy5wcm9wc1xuICAgIFxuICAgIC8vIE9ubHkgdHJhY2sgaWYgdGhpcyBpcyBmb3Igb3VyIHdpZGdldFxuICAgIGlmIChjdXN0b21FdmVudC5kZXRhaWwud2lkZ2V0SWQgIT09IGlkKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgY29uc3QgaGFzU2VsZWN0aW9uID0gY3VzdG9tRXZlbnQuZGV0YWlsLnJlY29yZElkcyAmJiBjdXN0b21FdmVudC5kZXRhaWwucmVjb3JkSWRzLmxlbmd0aCA+IDBcbiAgICBcbiAgICAvLyBJZiB0aGUgcGFuZWwgaXMgTk9UIHZpc2libGUsIGFuZCB3ZSBhcmUgcmVjZWl2aW5nIGFuIEVNUFRZIHNlbGVjdGlvbixcbiAgICAvLyBpdCdzIGFsbW9zdCBjZXJ0YWlubHkgb3VyIG93biAnY2xlYXJTZWxlY3Rpb25Gcm9tTWFwJyBsb2dpYyBmaXJpbmcuXG4gICAgLy8gV2Ugc2hvdWxkIElHTk9SRSB0aGlzIHNvIHdlIGRvbid0IHdpcGUgb3V0IHRoZSBsYXN0U2VsZWN0aW9uIHN0YXRlLlxuICAgIGlmICghdGhpcy5zdGF0ZS5pc1BhbmVsVmlzaWJsZSAmJiAhaGFzU2VsZWN0aW9uKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAnaGFuZGxlU2VsZWN0aW9uQ2hhbmdlLWlnbm9yaW5nLWVtcHR5LXNlbGVjdGlvbi13aGlsZS1wYW5lbC1jbG9zZWQnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBcbiAgICAvLyBJbiBcIkFkZCB0b1wiIG9yIFwiUmVtb3ZlIGZyb21cIiBtb2RlLCB1c2UgYWNjdW11bGF0ZWQgcmVjb3JkcyBjb3VudCBmb3IgcmVzdG9yYXRpb25cbiAgICAvLyBUaGUgYWNjdW11bGF0ZWQgcmVjb3JkcyBhcmUgdGhlIHNvdXJjZSBvZiB0cnV0aCBmb3Igd2hhdCBzaG91bGQgYmUgcmVzdG9yZWRcbiAgICBjb25zdCBpc0FjY3VtdWxhdGlvbk1vZGUgPSB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUucmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvblxuICAgIGNvbnN0IGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50ID0gdGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHM/Lmxlbmd0aCB8fCAwXG4gICAgY29uc3Qgc2VsZWN0aW9uQ291bnQgPSBpc0FjY3VtdWxhdGlvbk1vZGUgJiYgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQgPiAwXG4gICAgICA/IGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50XG4gICAgICA6IChoYXNTZWxlY3Rpb24gPyBjdXN0b21FdmVudC5kZXRhaWwucmVjb3JkSWRzLmxlbmd0aCA6IDApXG4gICAgXG4gICAgLy8gSWYgc2VsZWN0aW9uIGlzIGNsZWFyZWQgYW5kIHdlJ3JlIGluIFJlbW92ZSBtb2RlLCByZXNldCB0byBOZXdTZWxlY3Rpb24gbW9kZVxuICAgIC8vIFJlbW92ZSBtb2RlIHJlcXVpcmVzIHNlbGVjdGlvbiB0byBmdW5jdGlvbiwgc28gaXQgc2hvdWxkIGJlIGRpc2FibGVkIHdoZW4gc2VsZWN0aW9uIGlzIGVtcHR5XG4gICAgY29uc3Qgc2hvdWxkUmVzZXRNb2RlID0gIWhhc1NlbGVjdGlvbiAmJiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3Rpb25Db3VudCA9PT0gMCAmJiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb25cbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICBldmVudDogJ2hhbmRsZVNlbGVjdGlvbkNoYW5nZS11cGRhdGluZy1zdGF0ZScsXG4gICAgICB3aWRnZXRJZDogaWQsXG4gICAgICByZXN1bHRzTW9kZTogdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSxcbiAgICAgIGlzQWNjdW11bGF0aW9uTW9kZSxcbiAgICAgIGV2ZW50UmVjb3JkSWRzQ291bnQ6IGN1c3RvbUV2ZW50LmRldGFpbC5yZWNvcmRJZHMubGVuZ3RoLFxuICAgICAgaGFzU2VsZWN0aW9uRnJvbUV2ZW50OiBoYXNTZWxlY3Rpb24sXG4gICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudEJlZm9yZTogYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQsXG4gICAgICBjYWxjdWxhdGVkU2VsZWN0aW9uQ291bnQ6IHNlbGVjdGlvbkNvdW50LFxuICAgICAgJ3dpbGwtc2V0LWhhc1NlbGVjdGlvbic6IHNlbGVjdGlvbkNvdW50ID4gMCxcbiAgICAgICd3aWxsLXNldC1sYXN0U2VsZWN0aW9uJzogaGFzU2VsZWN0aW9uICYmICEhY3VzdG9tRXZlbnQuZGV0YWlsLm91dHB1dERzSWQgJiYgISFjdXN0b21FdmVudC5kZXRhaWwucXVlcnlJdGVtQ29uZmlnSWQsXG4gICAgICAnd2lsbC1yZXNldC1tb2RlJzogc2hvdWxkUmVzZXRNb2RlLFxuICAgICAgZGVjaXNpb25Mb2dpYzoge1xuICAgICAgICAnaXNBY2N1bXVsYXRpb25Nb2RlJzogaXNBY2N1bXVsYXRpb25Nb2RlLFxuICAgICAgICAnYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQgPiAwJzogYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQgPiAwLFxuICAgICAgICAndXNlLWFjY3VtdWxhdGVkLWNvdW50JzogaXNBY2N1bXVsYXRpb25Nb2RlICYmIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50ID4gMCxcbiAgICAgICAgJ3VzZS1ldmVudC1jb3VudCc6ICEoaXNBY2N1bXVsYXRpb25Nb2RlICYmIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50ID4gMCksXG4gICAgICAgICdzaG91bGQtcmVzZXQtbW9kZSc6IHNob3VsZFJlc2V0TW9kZVxuICAgICAgfVxuICAgIH0pXG4gICAgXG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBoYXNTZWxlY3Rpb246IHNlbGVjdGlvbkNvdW50ID4gMCxcbiAgICAgIHNlbGVjdGlvblJlY29yZENvdW50OiBzZWxlY3Rpb25Db3VudCxcbiAgICAgIC8vIFN0b3JlIGxhc3RTZWxlY3Rpb24gZm9yIGNvbXBhdGliaWxpdHksIGJ1dCByZXN0b3JhdGlvbiB3aWxsIHVzZSBhY2N1bXVsYXRlZFJlY29yZHMgaW4gQWRkL1JlbW92ZSBtb2Rlc1xuICAgICAgbGFzdFNlbGVjdGlvbjogaGFzU2VsZWN0aW9uICYmIGN1c3RvbUV2ZW50LmRldGFpbC5vdXRwdXREc0lkICYmIGN1c3RvbUV2ZW50LmRldGFpbC5xdWVyeUl0ZW1Db25maWdJZFxuICAgICAgICA/IHtcbiAgICAgICAgICAgIHJlY29yZElkczogY3VzdG9tRXZlbnQuZGV0YWlsLnJlY29yZElkcyxcbiAgICAgICAgICAgIG91dHB1dERzSWQ6IGN1c3RvbUV2ZW50LmRldGFpbC5vdXRwdXREc0lkLFxuICAgICAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IGN1c3RvbUV2ZW50LmRldGFpbC5xdWVyeUl0ZW1Db25maWdJZFxuICAgICAgICAgIH1cbiAgICAgICAgOiB1bmRlZmluZWQsXG4gICAgICAvLyBSZXNldCBtb2RlIHRvIE5ld1NlbGVjdGlvbiBpZiBzZWxlY3Rpb24gaXMgY2xlYXJlZCBpbiBSZW1vdmUgbW9kZVxuICAgICAgLi4uKHNob3VsZFJlc2V0TW9kZSA/IHtcbiAgICAgICAgcmVzdWx0c01vZGU6IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uLFxuICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHM6IFtdIC8vIEFsc28gY2xlYXIgYWNjdW11bGF0ZWQgcmVjb3JkcyB3aGVuIHJlc2V0dGluZyBtb2RlXG4gICAgICB9IDoge30pXG4gICAgfSlcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICBldmVudDogJ2hhbmRsZVNlbGVjdGlvbkNoYW5nZS1zdGF0ZS11cGRhdGVkJyxcbiAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICduZXctaGFzU2VsZWN0aW9uJzogc2VsZWN0aW9uQ291bnQgPiAwLFxuICAgICAgJ25ldy1zZWxlY3Rpb25SZWNvcmRDb3VudCc6IHNlbGVjdGlvbkNvdW50LFxuICAgICAgJ25ldy1sYXN0U2VsZWN0aW9uLXJlY29yZElkcy1jb3VudCc6IGhhc1NlbGVjdGlvbiAmJiBjdXN0b21FdmVudC5kZXRhaWwub3V0cHV0RHNJZCAmJiBjdXN0b21FdmVudC5kZXRhaWwucXVlcnlJdGVtQ29uZmlnSWRcbiAgICAgICAgPyBjdXN0b21FdmVudC5kZXRhaWwucmVjb3JkSWRzLmxlbmd0aFxuICAgICAgICA6IDAsXG4gICAgICAnbW9kZS1yZXNldCc6IHNob3VsZFJlc2V0TW9kZSxcbiAgICAgICduZXctbW9kZSc6IHNob3VsZFJlc2V0TW9kZSA/IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uIDogdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSxcbiAgICAgICdub3RlJzogc2hvdWxkUmVzZXRNb2RlIFxuICAgICAgICA/ICdNb2RlIHJlc2V0IHRvIE5ld1NlbGVjdGlvbiBiZWNhdXNlIHNlbGVjdGlvbiB3YXMgY2xlYXJlZCBpbiBSZW1vdmUgbW9kZSdcbiAgICAgICAgOiAnbGFzdFNlbGVjdGlvbi1vbmx5LWNvbnRhaW5zLWN1cnJlbnQtcXVlcnktcmVjb3Jkcy1ub3QtYWxsLWFjY3VtdWxhdGVkLXJlY29yZHMnXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIHJlc3RvcmUgcmVxdWVzdCB3aGVuIGlkZW50aWZ5IHBvcHVwIGNsb3Nlcy5cbiAgICogT25seSByZXN0b3JlcyBpZiB3aWRnZXQgcGFuZWwgaXMgb3Blbi5cbiAgICogSW4gXCJBZGQgdG9cIiBvciBcIlJlbW92ZSBmcm9tXCIgbW9kZXMsIHJlc3RvcmVzIGFsbCBhY2N1bXVsYXRlZCByZWNvcmRzLlxuICAgKi9cbiAgcHJpdmF0ZSBoYW5kbGVSZXN0b3JlT25JZGVudGlmeUNsb3NlID0gKGV2ZW50OiBFdmVudCkgPT4ge1xuICAgIGNvbnN0IGN1c3RvbUV2ZW50ID0gZXZlbnQgYXMgQ3VzdG9tRXZlbnQ8eyBcbiAgICAgIHdpZGdldElkOiBzdHJpbmcsIFxuICAgICAgcmVjb3JkSWRzOiBzdHJpbmdbXSwgXG4gICAgICBvdXRwdXREc0lkOiBzdHJpbmcsXG4gICAgICBxdWVyeUl0ZW1Db25maWdJZDogc3RyaW5nXG4gICAgfT5cbiAgICBjb25zdCB7IGlkIH0gPSB0aGlzLnByb3BzXG4gICAgXG4gICAgLy8gT25seSBoYW5kbGUgaWYgdGhpcyBpcyBmb3Igb3VyIHdpZGdldFxuICAgIGlmIChjdXN0b21FdmVudC5kZXRhaWwud2lkZ2V0SWQgIT09IGlkKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgY29uc3QgaXNXaWRnZXRPcGVuID0gdGhpcy5zdGF0ZS5pc1BhbmVsVmlzaWJsZSA9PT0gdHJ1ZVxuICAgIGNvbnN0IGlzQWNjdW11bGF0aW9uTW9kZSA9IHRoaXMuc3RhdGUucmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb24gfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgZXZlbnQ6ICdpZGVudGlmeS1wb3B1cC1jbG9zZWQtcmVzdG9yZS1yZXF1ZXN0ZWQnLFxuICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgaXNXaWRnZXRPcGVuLFxuICAgICAgcmVzdWx0c01vZGU6IHRoaXMuc3RhdGUucmVzdWx0c01vZGUsXG4gICAgICBpc0FjY3VtdWxhdGlvbk1vZGUsXG4gICAgICBldmVudFJlY29yZElkc0NvdW50OiBjdXN0b21FdmVudC5kZXRhaWwucmVjb3JkSWRzLmxlbmd0aCxcbiAgICAgIGhhc1NlbGVjdGlvbjogdGhpcy5zdGF0ZS5oYXNTZWxlY3Rpb24gfHwgZmFsc2UsXG4gICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogdGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgaGFzTGFzdFNlbGVjdGlvbjogISF0aGlzLnN0YXRlLmxhc3RTZWxlY3Rpb24sXG4gICAgICBsYXN0U2VsZWN0aW9uUmVjb3JkQ291bnQ6IHRoaXMuc3RhdGUubGFzdFNlbGVjdGlvbj8ucmVjb3JkSWRzLmxlbmd0aCB8fCAwLFxuICAgICAgb3V0cHV0RHNJZDogY3VzdG9tRXZlbnQuZGV0YWlsLm91dHB1dERzSWQsXG4gICAgICBxdWVyeUl0ZW1Db25maWdJZDogY3VzdG9tRXZlbnQuZGV0YWlsLnF1ZXJ5SXRlbUNvbmZpZ0lkXG4gICAgfSlcbiAgICBcbiAgICAvLyBPbmx5IHJlc3RvcmUgaWYgd2lkZ2V0IGlzIG9wZW5cbiAgICBpZiAoIWlzV2lkZ2V0T3Blbikge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ2lkZW50aWZ5LXBvcHVwLWNsb3NlZC1yZXN0b3JlLXNraXBwZWQtd2lkZ2V0LWNsb3NlZCcsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgcmVjb3JkQ291bnQ6IGN1c3RvbUV2ZW50LmRldGFpbC5yZWNvcmRJZHMubGVuZ3RoXG4gICAgICB9KVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIC8vIEhZUE9USEVTSVM6IFNob3VsZCBhbHdheXMgY2hlY2sgYWNjdW11bGF0ZWRSZWNvcmRzIGZpcnN0LCByZWdhcmRsZXNzIG9mIG1vZGVcbiAgICBpZiAodGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHMgJiYgdGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ2lkZW50aWZ5LXBvcHVwLWNsb3NlZC1mb3VuZC1hY2N1bXVsYXRlZC1yZWNvcmRzJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICByZXN1bHRzTW9kZTogdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSxcbiAgICAgICAgaXNBY2N1bXVsYXRpb25Nb2RlLFxuICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogdGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoLFxuICAgICAgICAnc2hvdWxkLXVzZS1hY2N1bXVsYXRlZCc6IHRydWUsXG4gICAgICAgICdjdXJyZW50LWNvbmRpdGlvbi1jaGVjayc6IGlzQWNjdW11bGF0aW9uTW9kZSxcbiAgICAgICAgJ2NvbmRpdGlvbi1yZXN1bHQnOiBpc0FjY3VtdWxhdGlvbk1vZGVcbiAgICAgIH0pXG4gICAgfVxuICAgIFxuICAgIC8vIEluIEFkZC9SZW1vdmUgbW9kZXMsIGNoZWNrIGFjY3VtdWxhdGVkIHJlY29yZHMgaW5zdGVhZCBvZiBsYXN0U2VsZWN0aW9uXG4gICAgaWYgKGlzQWNjdW11bGF0aW9uTW9kZSkge1xuICAgICAgaWYgKCF0aGlzLnN0YXRlLmhhc1NlbGVjdGlvbiB8fCAhdGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHMgfHwgdGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgICBldmVudDogJ2lkZW50aWZ5LXBvcHVwLWNsb3NlZC1yZXN0b3JlLXNraXBwZWQtbm8tYWNjdW11bGF0ZWQtcmVjb3JkcycsXG4gICAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICAgIGhhc1NlbGVjdGlvbjogdGhpcy5zdGF0ZS5oYXNTZWxlY3Rpb24sXG4gICAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IHRoaXMuc3RhdGUuYWNjdW11bGF0ZWRSZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgICAnaHlwb3RoZXNpcyc6ICdoYXNTZWxlY3Rpb24taXMtZmFsc2Utb3Itbm8tYWNjdW11bGF0ZWQtcmVjb3JkcycsXG4gICAgICAgICAgJ21heWJlLWhhc1NlbGVjdGlvbi1zaG91bGQtYmUtYmFzZWQtb24tYWNjdW11bGF0ZWQtcmVjb3Jkcyc6IHRydWVcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFJlc3RvcmUgYWxsIGFjY3VtdWxhdGVkIHJlY29yZHMgKGdyb3VwZWQgYnkgb3JpZ2luIERTKVxuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ2lkZW50aWZ5LXBvcHVwLWNsb3NlZC1yZXN0b3JpbmctYWNjdW11bGF0ZWQtcmVjb3JkcycsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IHRoaXMuc3RhdGUuYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aFxuICAgICAgfSlcbiAgICAgIFxuICAgICAgdGhpcy5hZGRTZWxlY3Rpb25Ub01hcCgpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgLy8gSFlQT1RIRVNJUzogTWF5YmUgYWNjdW11bGF0ZWRSZWNvcmRzIGV4aXN0IGJ1dCB3ZSdyZSBub3QgaW4gYWNjdW11bGF0aW9uIG1vZGU/XG4gICAgaWYgKHRoaXMuc3RhdGUuYWNjdW11bGF0ZWRSZWNvcmRzICYmIHRoaXMuc3RhdGUuYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDAgJiYgIWlzQWNjdW11bGF0aW9uTW9kZSkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ2lkZW50aWZ5LXBvcHVwLWNsb3NlZC1hY2N1bXVsYXRlZC1yZWNvcmRzLWV4aXN0LWJ1dC1ub3QtYWNjdW11bGF0aW9uLW1vZGUnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIHJlc3VsdHNNb2RlOiB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlLFxuICAgICAgICBpc0FjY3VtdWxhdGlvbk1vZGUsXG4gICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiB0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgICdoeXBvdGhlc2lzJzogJ2FjY3VtdWxhdGVkLXJlY29yZHMtZXhpc3QtYnV0LW1vZGUtaXMtbm90LWFkZC1vci1yZW1vdmUnLFxuICAgICAgICAnc2hvdWxkLXdlLXN0aWxsLXVzZS10aGVtJzogJ05FRURTLUlOVkVTVElHQVRJT04nXG4gICAgICB9KVxuICAgIH1cbiAgICBcbiAgICAvLyBGb3IgXCJOZXdcIiBtb2RlLCB1c2Ugb3JpZ2luYWwgdmFsaWRhdGlvbiBsb2dpY1xuICAgIC8vIENoZWNrIGlmIHdlIGhhdmUgbWF0Y2hpbmcgc2VsZWN0aW9uIHN0YXRlXG4gICAgaWYgKCF0aGlzLnN0YXRlLmhhc1NlbGVjdGlvbiB8fCAhdGhpcy5zdGF0ZS5sYXN0U2VsZWN0aW9uKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAnaWRlbnRpZnktcG9wdXAtY2xvc2VkLXJlc3RvcmUtc2tpcHBlZC1uby1zZWxlY3Rpb24nLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIGhhc1NlbGVjdGlvbjogdGhpcy5zdGF0ZS5oYXNTZWxlY3Rpb24sXG4gICAgICAgIGhhc0xhc3RTZWxlY3Rpb246ICEhdGhpcy5zdGF0ZS5sYXN0U2VsZWN0aW9uXG4gICAgICB9KVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIC8vIFZlcmlmeSB0aGUgb3V0cHV0RHNJZCBtYXRjaGVzXG4gICAgaWYgKHRoaXMuc3RhdGUubGFzdFNlbGVjdGlvbi5vdXRwdXREc0lkICE9PSBjdXN0b21FdmVudC5kZXRhaWwub3V0cHV0RHNJZCkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ2lkZW50aWZ5LXBvcHVwLWNsb3NlZC1yZXN0b3JlLXNraXBwZWQtZHMtbWlzbWF0Y2gnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIG91ck91dHB1dERzSWQ6IHRoaXMuc3RhdGUubGFzdFNlbGVjdGlvbi5vdXRwdXREc0lkLFxuICAgICAgICByZXF1ZXN0ZWRPdXRwdXREc0lkOiBjdXN0b21FdmVudC5kZXRhaWwub3V0cHV0RHNJZFxuICAgICAgfSlcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBcbiAgICAvLyBWZXJpZnkgdGhlIHF1ZXJ5SXRlbUNvbmZpZ0lkIG1hdGNoZXMgKG9wdGlvbmFsIGJ1dCBnb29kIHRvIGNoZWNrKVxuICAgIGlmICh0aGlzLnN0YXRlLmxhc3RTZWxlY3Rpb24ucXVlcnlJdGVtQ29uZmlnSWQgIT09IGN1c3RvbUV2ZW50LmRldGFpbC5xdWVyeUl0ZW1Db25maWdJZCkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ2lkZW50aWZ5LXBvcHVwLWNsb3NlZC1yZXN0b3JlLXNraXBwZWQtcXVlcnktbWlzbWF0Y2gnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIG91clF1ZXJ5SXRlbUNvbmZpZ0lkOiB0aGlzLnN0YXRlLmxhc3RTZWxlY3Rpb24ucXVlcnlJdGVtQ29uZmlnSWQsXG4gICAgICAgIHJlcXVlc3RlZFF1ZXJ5SXRlbUNvbmZpZ0lkOiBjdXN0b21FdmVudC5kZXRhaWwucXVlcnlJdGVtQ29uZmlnSWRcbiAgICAgIH0pXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgLy8gUmVzdG9yZSBzZWxlY3Rpb24gdG8gbWFwIChyZXVzZSBleGlzdGluZyBtZXRob2QpXG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgZXZlbnQ6ICdpZGVudGlmeS1wb3B1cC1jbG9zZWQtcmVzdG9yaW5nLXNlbGVjdGlvbicsXG4gICAgICB3aWRnZXRJZDogaWQsXG4gICAgICByZWNvcmRDb3VudDogY3VzdG9tRXZlbnQuZGV0YWlsLnJlY29yZElkcy5sZW5ndGgsXG4gICAgICBvdXRwdXREc0lkOiBjdXN0b21FdmVudC5kZXRhaWwub3V0cHV0RHNJZFxuICAgIH0pXG4gICAgXG4gICAgdGhpcy5hZGRTZWxlY3Rpb25Ub01hcCgpXG4gIH1cblxuICAvKipcbiAgICogQWRkcyBzZWxlY3Rpb24gdG8gbWFwIHdoZW4gd2lkZ2V0IG9wZW5zIChyZXVzZXMgQWRkIHRvIE1hcCBsb2dpYykuXG4gICAqIEluIFwiQWRkIHRvXCIgb3IgXCJSZW1vdmUgZnJvbVwiIG1vZGVzLCByZXN0b3JlcyBhbGwgYWNjdW11bGF0ZWQgcmVjb3JkcyBncm91cGVkIGJ5IG9yaWdpbiBkYXRhIHNvdXJjZS5cbiAgICovXG4gIHByaXZhdGUgYWRkU2VsZWN0aW9uVG9NYXAgPSAoKSA9PiB7XG4gICAgY29uc3QgeyBsYXN0U2VsZWN0aW9uLCBhY2N1bXVsYXRlZFJlY29yZHMsIHJlc3VsdHNNb2RlIH0gPSB0aGlzLnN0YXRlXG4gICAgY29uc3QgeyBpZCB9ID0gdGhpcy5wcm9wc1xuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgIGV2ZW50OiAnYWRkU2VsZWN0aW9uVG9NYXAtY2FsbGVkJyxcbiAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgaGFzQWNjdW11bGF0ZWRSZWNvcmRzOiAhIShhY2N1bXVsYXRlZFJlY29yZHMgJiYgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDApLFxuICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGFjY3VtdWxhdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICBoYXNMYXN0U2VsZWN0aW9uOiAhIWxhc3RTZWxlY3Rpb24sXG4gICAgICBsYXN0U2VsZWN0aW9uUmVjb3JkQ291bnQ6IGxhc3RTZWxlY3Rpb24/LnJlY29yZElkcy5sZW5ndGggfHwgMCxcbiAgICAgIGxhc3RTZWxlY3Rpb25PdXRwdXREc0lkOiBsYXN0U2VsZWN0aW9uPy5vdXRwdXREc0lkXG4gICAgfSlcbiAgICBcbiAgICAvLyBJbiBBZGQvUmVtb3ZlIG1vZGVzLCB1c2UgYWNjdW11bGF0ZWQgcmVjb3JkcyBmb3IgcmVzdG9yYXRpb25cbiAgICBjb25zdCBpc0FjY3VtdWxhdGlvbk1vZGUgPSByZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbiB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb25cbiAgICBcbiAgICAvLyBIWVBPVEhFU0lTOiBTaG91bGQgYWx3YXlzIGNoZWNrIGFjY3VtdWxhdGVkUmVjb3JkcyBmaXJzdCwgcmVnYXJkbGVzcyBvZiBtb2RlXG4gICAgLy8gQWRkaW5nIGxvZyB0byBzZWUgaWYgYWNjdW11bGF0ZWRSZWNvcmRzIGV4aXN0IGJ1dCB3ZSdyZSBub3QgdXNpbmcgdGhlbVxuICAgIGlmIChhY2N1bXVsYXRlZFJlY29yZHMgJiYgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgZXZlbnQ6ICdhZGRTZWxlY3Rpb25Ub01hcC1mb3VuZC1hY2N1bXVsYXRlZC1yZWNvcmRzJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICByZXN1bHRzTW9kZSxcbiAgICAgICAgaXNBY2N1bXVsYXRpb25Nb2RlLFxuICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgJ3Nob3VsZC11c2UtYWNjdW11bGF0ZWQnOiB0cnVlLFxuICAgICAgICAnY3VycmVudC1jb25kaXRpb24tY2hlY2snOiBpc0FjY3VtdWxhdGlvbk1vZGUgJiYgYWNjdW11bGF0ZWRSZWNvcmRzICYmIGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwLFxuICAgICAgICAnY29uZGl0aW9uLXJlc3VsdCc6IGlzQWNjdW11bGF0aW9uTW9kZSAmJiBhY2N1bXVsYXRlZFJlY29yZHMgJiYgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDBcbiAgICAgIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgZXZlbnQ6ICdhZGRTZWxlY3Rpb25Ub01hcC1uby1hY2N1bXVsYXRlZC1yZWNvcmRzJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICByZXN1bHRzTW9kZSxcbiAgICAgICAgaXNBY2N1bXVsYXRpb25Nb2RlLFxuICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogMCxcbiAgICAgICAgJ3dpbGwtZmFsbGJhY2stdG8tbGFzdFNlbGVjdGlvbic6ICEhbGFzdFNlbGVjdGlvblxuICAgICAgfSlcbiAgICB9XG4gICAgXG4gICAgaWYgKGlzQWNjdW11bGF0aW9uTW9kZSAmJiBhY2N1bXVsYXRlZFJlY29yZHMgJiYgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgIC8vIEdyb3VwIGFjY3VtdWxhdGVkIHJlY29yZHMgYnkgb3JpZ2luIGRhdGEgc291cmNlXG4gICAgICBjb25zdCByZWNvcmRzQnlPcmlnaW5EUyA9IG5ldyBNYXA8RmVhdHVyZUxheWVyRGF0YVNvdXJjZSwgRmVhdHVyZURhdGFSZWNvcmRbXT4oKVxuICAgICAgY29uc3QgZHNNYW5hZ2VyID0gRGF0YVNvdXJjZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKVxuICAgICAgXG4gICAgICBhY2N1bXVsYXRlZFJlY29yZHMuZm9yRWFjaCgocmVjb3JkLCBpbmRleCkgPT4ge1xuICAgICAgICBjb25zdCByZWNvcmRJZCA9IHJlY29yZC5nZXRJZCgpXG4gICAgICAgIGxldCBvcmlnaW5EUzogRmVhdHVyZUxheWVyRGF0YVNvdXJjZSB8IG51bGwgPSBudWxsXG4gICAgICAgIFxuICAgICAgICAvLyBNZXRob2QgMTogVHJ5IHRvIGdldCBmcm9tIHJlY29yZC5nZXREYXRhU291cmNlKClcbiAgICAgICAgY29uc3QgcmVjb3JkRFMgPSByZWNvcmQuZ2V0RGF0YVNvdXJjZT8uKCkgYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICAgICAgICBpZiAocmVjb3JkRFMpIHtcbiAgICAgICAgICBvcmlnaW5EUyA9IHJlY29yZERTLmdldE9yaWdpbkRhdGFTb3VyY2VzKCk/LlswXSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlIHx8IHJlY29yZERTXG4gICAgICAgICAgXG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICAgICAgZXZlbnQ6ICdmb3VuZC1vcmlnaW4tZHMtZnJvbS1yZWNvcmQtZHMnLFxuICAgICAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICAgICAgcmVjb3JkSW5kZXg6IGluZGV4LFxuICAgICAgICAgICAgcmVjb3JkSWQsXG4gICAgICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUz8uaWQgfHwgJ251bGwnLFxuICAgICAgICAgICAgbWV0aG9kOiAncmVjb3JkLmdldERhdGFTb3VyY2UoKSdcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBNZXRob2QgMjogSWYgdGhhdCBmYWlsZWQsIHNlYXJjaCBhbGwgZGF0YSBzb3VyY2VzIGZvciBhIHJlY29yZCB3aXRoIG1hdGNoaW5nIElEXG4gICAgICAgIGlmICghb3JpZ2luRFMpIHtcbiAgICAgICAgICBjb25zdCBkc01hcCA9IGRzTWFuYWdlci5nZXREYXRhU291cmNlcygpXG4gICAgICAgICAgY29uc3QgYWxsRGF0YVNvdXJjZXMgPSBPYmplY3QudmFsdWVzKGRzTWFwKVxuICAgICAgICAgIFxuICAgICAgICAgIGZvciAoY29uc3QgZHMgb2YgYWxsRGF0YVNvdXJjZXMpIHtcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoaXMgaXMgYSBGZWF0dXJlTGF5ZXJEYXRhU291cmNlIGJ5IGNoZWNraW5nIGZvciBnZXRBbGxMb2FkZWRSZWNvcmRzIG1ldGhvZFxuICAgICAgICAgICAgaWYgKGRzICYmIHR5cGVvZiAoZHMgYXMgYW55KS5nZXRBbGxMb2FkZWRSZWNvcmRzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhpcyBEUyBoYXMgdGhlIHJlY29yZFxuICAgICAgICAgICAgICAgIGNvbnN0IGFsbFJlY29yZHMgPSAoZHMgYXMgYW55KS5nZXRBbGxMb2FkZWRSZWNvcmRzKCkgfHwgW11cbiAgICAgICAgICAgICAgICBjb25zdCBtYXRjaGluZ1JlY29yZCA9IGFsbFJlY29yZHMuZmluZCgocjogRmVhdHVyZURhdGFSZWNvcmQpID0+IHIuZ2V0SWQoKSA9PT0gcmVjb3JkSWQpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoaW5nUmVjb3JkKSB7XG4gICAgICAgICAgICAgICAgICAvLyBGb3VuZCB0aGUgcmVjb3JkIC0gZ2V0IG9yaWdpbiBEUyBmcm9tIHRoaXMgRFNcbiAgICAgICAgICAgICAgICAgIG9yaWdpbkRTID0gKGRzIGFzIGFueSkuZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKT8uWzBdIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2UgfHwgZHMgYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50OiAnZm91bmQtb3JpZ2luLWRzLXZpYS1zZWFyY2gnLFxuICAgICAgICAgICAgICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgICAgICAgICAgICAgIHJlY29yZEluZGV4OiBpbmRleCxcbiAgICAgICAgICAgICAgICAgICAgcmVjb3JkSWQsXG4gICAgICAgICAgICAgICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdzZWFyY2hlZC1hbGwtZGF0YS1zb3VyY2VzJyxcbiAgICAgICAgICAgICAgICAgICAgc2VhcmNoZWREU0lkOiBkcy5pZFxuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIC8vIENvbnRpbnVlIHNlYXJjaGluZ1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAob3JpZ2luRFMpIHtcbiAgICAgICAgICBpZiAoIXJlY29yZHNCeU9yaWdpbkRTLmhhcyhvcmlnaW5EUykpIHtcbiAgICAgICAgICAgIHJlY29yZHNCeU9yaWdpbkRTLnNldChvcmlnaW5EUywgW10pXG4gICAgICAgICAgfVxuICAgICAgICAgIHJlY29yZHNCeU9yaWdpbkRTLmdldChvcmlnaW5EUykhLnB1c2gocmVjb3JkKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgICAgIGV2ZW50OiAnY291bGQtbm90LWZpbmQtb3JpZ2luLWRzLWZvci1yZWNvcmQnLFxuICAgICAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICAgICAgcmVjb3JkSW5kZXg6IGluZGV4LFxuICAgICAgICAgICAgcmVjb3JkSWQsXG4gICAgICAgICAgICB3YXJuaW5nOiAncmVjb3JkLXdpbGwtYmUtc2tpcHBlZCdcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAncGFuZWwtb3BlbmVkLXJlc3RvcmluZy1hY2N1bXVsYXRlZC1yZWNvcmRzJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICByZXN1bHRzTW9kZSxcbiAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgIG9yaWdpbkRTQ291bnQ6IHJlY29yZHNCeU9yaWdpbkRTLnNpemVcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIC8vIFJlc3RvcmUgc2VsZWN0aW9uIGZvciBlYWNoIG9yaWdpbiBkYXRhIHNvdXJjZVxuICAgICAgY29uc3QgeyBzZWxlY3RSZWNvcmRzQW5kUHVibGlzaCB9ID0gcmVxdWlyZSgnLi9zZWxlY3Rpb24tdXRpbHMnKVxuICAgICAgY29uc3QgdXNlR3JhcGhpY3NMYXllciA9IHRoaXMucHJvcHMuY29uZmlnLnVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHRcbiAgICAgIGNvbnN0IGdyYXBoaWNzTGF5ZXIgPSB0aGlzLmdyYXBoaWNzTGF5ZXJSZWYuY3VycmVudCB8fCB1bmRlZmluZWRcbiAgICAgIGNvbnN0IG1hcFZpZXcgPSB0aGlzLm1hcFZpZXdSZWYuY3VycmVudCB8fCB1bmRlZmluZWRcbiAgICAgIFxuICAgICAgcmVjb3Jkc0J5T3JpZ2luRFMuZm9yRWFjaCgocmVjb3Jkcywgb3JpZ2luRFMpID0+IHtcbiAgICAgICAgY29uc3QgcmVjb3JkSWRzID0gcmVjb3Jkcy5tYXAociA9PiByLmdldElkKCkpXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8gVXNlIG9yaWdpbkRTIGRpcmVjdGx5IChub3Qgb3V0cHV0RFMpIHNpbmNlIHJlY29yZHMgYXJlIHNlbGVjdGVkIGluIG9yaWdpbiBsYXllcnNcbiAgICAgICAgICAvLyBVc2UgYXN5bmMgSUlGRSBzaW5jZSBmb3JFYWNoIGNhbGxiYWNrIGNhbid0IGJlIGFzeW5jXG4gICAgICAgICAgOyhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBhd2FpdCBzZWxlY3RSZWNvcmRzQW5kUHVibGlzaChpZCwgb3JpZ2luRFMsIHJlY29yZElkcywgcmVjb3JkcywgdHJ1ZSwgdXNlR3JhcGhpY3NMYXllciwgZ3JhcGhpY3NMYXllciwgbWFwVmlldylcbiAgICAgICAgICB9KSgpXG4gICAgICAgICAgXG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICAgICAgZXZlbnQ6ICdwYW5lbC1vcGVuZWQtcmVzdG9yZWQtb3JpZ2luLWRzJyxcbiAgICAgICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICAgICAgcmVjb3JkQ291bnQ6IHJlY29yZHMubGVuZ3RoLFxuICAgICAgICAgICAgem9vbUV4ZWN1dGVkOiBmYWxzZVxuICAgICAgICAgIH0pXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICAgICAgZXZlbnQ6ICdwYW5lbC1vcGVuZWQtcmVzdG9yZS1vcmlnaW4tZHMtZmFpbGVkJyxcbiAgICAgICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSxcbiAgICAgICAgICAgIGVycm9yU3RhY2s6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZFxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICBcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBcbiAgICAvLyBIWVBPVEhFU0lTOiBNYXliZSBhY2N1bXVsYXRlZFJlY29yZHMgZXhpc3QgYnV0IHdlJ3JlIG5vdCBpbiBhY2N1bXVsYXRpb24gbW9kZT9cbiAgICAvLyBPciBtYXliZSB3ZSBzaG91bGQgYWx3YXlzIGNoZWNrIGFjY3VtdWxhdGVkUmVjb3JkcyBmaXJzdD9cbiAgICBpZiAoYWNjdW11bGF0ZWRSZWNvcmRzICYmIGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwICYmICFpc0FjY3VtdWxhdGlvbk1vZGUpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgZXZlbnQ6ICdhZGRTZWxlY3Rpb25Ub01hcC1hY2N1bXVsYXRlZC1yZWNvcmRzLWV4aXN0LWJ1dC1ub3QtYWNjdW11bGF0aW9uLW1vZGUnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgICBpc0FjY3VtdWxhdGlvbk1vZGUsXG4gICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoLFxuICAgICAgICAnaHlwb3RoZXNpcyc6ICdhY2N1bXVsYXRlZC1yZWNvcmRzLWV4aXN0LWJ1dC1tb2RlLWlzLW5vdC1hZGQtb3ItcmVtb3ZlJyxcbiAgICAgICAgJ3Nob3VsZC13ZS1zdGlsbC11c2UtdGhlbSc6ICdORUVEUy1JTlZFU1RJR0FUSU9OJ1xuICAgICAgfSlcbiAgICB9XG4gICAgXG4gICAgLy8gRmFsbCBiYWNrIHRvIG9yaWdpbmFsIGxvZ2ljIGZvciBcIk5ld1wiIG1vZGVcbiAgICBpZiAoIWxhc3RTZWxlY3Rpb24pIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgZXZlbnQ6ICdhZGRTZWxlY3Rpb25Ub01hcC1uby1sYXN0U2VsZWN0aW9uLWV4aXRpbmcnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgICBoYXNBY2N1bXVsYXRlZFJlY29yZHM6ICEhKGFjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCksXG4gICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiBhY2N1bXVsYXRlZFJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICAnaHlwb3RoZXNpcyc6ICduby1sYXN0U2VsZWN0aW9uLXNvLWV4aXRpbmctZWFybHktbWF5YmUtc2hvdWxkLWNoZWNrLWFjY3VtdWxhdGVkLXJlY29yZHMtZmlyc3QnXG4gICAgICB9KVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc3QgZHNNYW5hZ2VyID0gRGF0YVNvdXJjZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKVxuICAgIGNvbnN0IG91dHB1dERTID0gZHNNYW5hZ2VyLmdldERhdGFTb3VyY2UobGFzdFNlbGVjdGlvbi5vdXRwdXREc0lkKSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gICAgXG4gICAgaWYgKCFvdXRwdXREUykge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ3BhbmVsLW9wZW5lZC1vdXRwdXQtZHMtbm90LWZvdW5kJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICBvdXRwdXREc0lkOiBsYXN0U2VsZWN0aW9uLm91dHB1dERzSWRcbiAgICAgIH0pXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyBHZXQgcmVjb3JkcyBmcm9tIG91dHB1dCBEUyAoc2FtZSBhcyBBZGQgdG8gTWFwKVxuICAgIGNvbnN0IGFsbFJlY29yZHMgPSBvdXRwdXREUy5nZXRBbGxMb2FkZWRSZWNvcmRzKCkgfHwgW11cbiAgICBjb25zdCByZWNvcmRzVG9TZWxlY3QgPSBhbGxSZWNvcmRzLmZpbHRlcihyZWNvcmQgPT4gXG4gICAgICBsYXN0U2VsZWN0aW9uLnJlY29yZElkcy5pbmNsdWRlcyhyZWNvcmQuZ2V0SWQoKSlcbiAgICApIGFzIEZlYXR1cmVEYXRhUmVjb3JkW11cbiAgICBcbiAgICBpZiAocmVjb3Jkc1RvU2VsZWN0Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ3BhbmVsLW9wZW5lZC1uby1tYXRjaGluZy1yZWNvcmRzJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICBvdXJSZWNvcmRDb3VudDogbGFzdFNlbGVjdGlvbi5yZWNvcmRJZHMubGVuZ3RoXG4gICAgICB9KVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gU2FtZSBsb2dpYyBhcyBBZGQgdG8gTWFwIGFjdGlvbiAtIHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoIGhhbmRsZXMgZHVwbGljYXRlIGNoZWNraW5nXG4gICAgLy8gRG9uJ3Qgem9vbSB3aGVuIHJlc3RvcmluZyBvbiB3aWRnZXQgb3BlbiAoQWRkIHRvIE1hcCBhY3Rpb24gaGFuZGxlcyB6b29tIGZvciBtYW51YWwgY2xpY2tzKVxuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoIH0gPSByZXF1aXJlKCcuL3NlbGVjdGlvbi11dGlscycpXG4gICAgICBjb25zdCB1c2VHcmFwaGljc0xheWVyID0gdGhpcy5wcm9wcy5jb25maWcudXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodFxuICAgICAgY29uc3QgZ3JhcGhpY3NMYXllciA9IHRoaXMuZ3JhcGhpY3NMYXllclJlZi5jdXJyZW50IHx8IHVuZGVmaW5lZFxuICAgICAgY29uc3QgbWFwVmlldyA9IHRoaXMubWFwVmlld1JlZi5jdXJyZW50IHx8IHVuZGVmaW5lZFxuICAgICAgOyhhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoKGlkLCBvdXRwdXREUywgbGFzdFNlbGVjdGlvbi5yZWNvcmRJZHMsIHJlY29yZHNUb1NlbGVjdCwgdHJ1ZSwgdXNlR3JhcGhpY3NMYXllciwgZ3JhcGhpY3NMYXllciwgbWFwVmlldylcbiAgICAgIH0pKClcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ3BhbmVsLW9wZW5lZC1zZWxlY3Rpb24tYWRkZWQtdG8tbWFwJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICByZWNvcmRDb3VudDogcmVjb3Jkc1RvU2VsZWN0Lmxlbmd0aCxcbiAgICAgICAgem9vbUV4ZWN1dGVkOiBmYWxzZVxuICAgICAgfSlcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ3BhbmVsLW9wZW5lZC1hZGQtdG8tbWFwLWZhaWxlZCcsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKVxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlcyByZXN1bHRzIG1vZGUgY2hhbmdlIGZyb20gZHJvcGRvd24uXG4gICAqIFVwZGF0ZXMgd2lkZ2V0IHN0YXRlIGFuZCBsb2dzIHRoZSBjaGFuZ2UgZm9yIGRlYnVnZ2luZy5cbiAgICovXG4gIHByaXZhdGUgaGFuZGxlUmVzdWx0c01vZGVDaGFuZ2UgPSAobW9kZTogU2VsZWN0aW9uVHlwZSkgPT4ge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgZXZlbnQ6ICdoYW5kbGVSZXN1bHRzTW9kZUNoYW5nZS10cmlnZ2VyZWQnLFxuICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICBwcmV2aW91c01vZGU6IHRoaXMuc3RhdGUucmVzdWx0c01vZGUsXG4gICAgICBuZXdNb2RlOiBtb2RlLFxuICAgICAgY3VycmVudEFjY3VtdWxhdGVkQ291bnQ6IHRoaXMuc3RhdGUuYWNjdW11bGF0ZWRSZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgLy8gQ29uc3VtZSBkZWVwIGxpbmsgd2hlbiBzd2l0Y2hpbmcgdG8gYWNjdW11bGF0aW9uIG1vZGVzXG4gICAgaWYgKG1vZGUgPT09IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb24gfHwgbW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uKSB7XG4gICAgICBpZiAodGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZT8uc2hvcnRJZCkge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gnLCB7XG4gICAgICAgICAgZXZlbnQ6ICdjb25zdW1pbmctaGFzaC1vbi1tb2RlLXN3aXRjaCcsXG4gICAgICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICAgICAgbW9kZSxcbiAgICAgICAgICBzaG9ydElkOiB0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlLnNob3J0SWRcbiAgICAgICAgfSlcbiAgICAgICAgdGhpcy5yZW1vdmVIYXNoUGFyYW1ldGVyKHRoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWUuc2hvcnRJZClcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBJZiBzd2l0Y2hpbmcgdG8gXCJOZXdcIiBtb2RlLCBjbGVhciBhY2N1bXVsYXRlZCByZWNvcmRzXG4gICAgaWYgKG1vZGUgPT09IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdjbGVhcmluZy1hY2N1bXVsYXRlZC1yZWNvcmRzLW9uLW1vZGUtc3dpdGNoJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICAgIHByZXZpb3VzTW9kZTogdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZVxuICAgICAgfSlcbiAgICAgIHRoaXMuc2V0U3RhdGUoeyByZXN1bHRzTW9kZTogbW9kZSwgYWNjdW11bGF0ZWRSZWNvcmRzOiBbXSB9KVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNldFN0YXRlKHsgcmVzdWx0c01vZGU6IG1vZGUgfSlcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHJlbW92ZUhhc2hQYXJhbWV0ZXIgPSAoc2hvcnRJZDogc3RyaW5nKSA9PiB7XG4gICAgaWYgKCFzaG9ydElkKSByZXR1cm5cbiAgICBcbiAgICBjb25zdCBoYXNoID0gd2luZG93LmxvY2F0aW9uLmhhc2guc3Vic3RyaW5nKDEpXG4gICAgY29uc3QgdXJsUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhoYXNoKVxuICAgIFxuICAgIGlmICh1cmxQYXJhbXMuaGFzKHNob3J0SWQpKSB7XG4gICAgICB1cmxQYXJhbXMuZGVsZXRlKHNob3J0SWQpXG4gICAgICBjb25zdCBuZXdIYXNoID0gdXJsUGFyYW1zLnRvU3RyaW5nKClcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNIJywge1xuICAgICAgICBldmVudDogJ3JlbW92ZUhhc2hQYXJhbWV0ZXInLFxuICAgICAgICBzaG9ydElkLFxuICAgICAgICBuZXdIYXNoOiBuZXdIYXNoID8gYCMke25ld0hhc2h9YCA6ICcoZW1wdHkpJyxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgXG4gICAgICAvLyBVcGRhdGUgdGhlIFVSTCB3aXRob3V0IHRyaWdnZXJpbmcgYSByZWxvYWRcbiAgICAgIHdpbmRvdy5oaXN0b3J5LnJlcGxhY2VTdGF0ZShudWxsLCAnJywgXG4gICAgICAgIG5ld0hhc2ggPyBgIyR7bmV3SGFzaH1gIDogd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lICsgd2luZG93LmxvY2F0aW9uLnNlYXJjaFxuICAgICAgKVxuICAgICAgXG4gICAgICAvLyBBbHNvIGNsZWFyIHRoZSBzdGF0ZSBzbyBpdCB3b24ndCB0cmlnZ2VyIGFnYWluXG4gICAgICBpZiAodGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZT8uc2hvcnRJZCA9PT0gc2hvcnRJZCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHsgaW5pdGlhbFF1ZXJ5VmFsdWU6IHVuZGVmaW5lZCB9KVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgaGFuZGxlQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlID0gKHJlY29yZHM6IEZlYXR1cmVEYXRhUmVjb3JkW10pID0+IHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgIGV2ZW50OiAnaGFuZGxlQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlLXRyaWdnZXJlZCcsXG4gICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgIHByZXZpb3VzQ291bnQ6IHRoaXMuc3RhdGUuYWNjdW11bGF0ZWRSZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgIG5ld0NvdW50OiByZWNvcmRzLmxlbmd0aCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgdGhpcy5zZXRTdGF0ZSh7IGFjY3VtdWxhdGVkUmVjb3JkczogcmVjb3JkcyB9KVxuICB9XG5cbiAgLyoqXG4gICAqIE5PVEU6IE5vIGxvbmdlciBuZWVkZWQgLSB3ZSB1c2UgZXhpc3Rpbmcgb3V0cHV0IERTIGluc3RlYWQgb2YgY3JlYXRpbmcgbmV3IG9uZS5cbiAgICogS2VwdCBmb3IgcmVmZXJlbmNlIGJ1dCBub3QgdXNlZC5cbiAgICovXG4gIHByaXZhdGUgZ2V0T3JDcmVhdGVBY2N1bXVsYXRlZFJlc3VsdHNEUyA9IGFzeW5jIChvcmlnaW5EUzogRmVhdHVyZUxheWVyRGF0YVNvdXJjZSk6IFByb21pc2U8RmVhdHVyZUxheWVyRGF0YVNvdXJjZT4gPT4ge1xuICAgIC8vIFRoaXMgaXMgbm8gbG9uZ2VyIHVzZWQgLSB3ZSBtZXJnZSByZWNvcmRzIGludG8gZXhpc3Rpbmcgb3V0cHV0IERTXG4gICAgdGhyb3cgbmV3IEVycm9yKCdUaGlzIG1ldGhvZCBpcyBkZXByZWNhdGVkIC0gdXNlIGV4aXN0aW5nIG91dHB1dCBEUyBpbnN0ZWFkJylcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhcnMgc2VsZWN0aW9uIGZyb20gbWFwIG9ubHkgKGtlZXBzIHNlbGVjdGlvbiBpbiB3aWRnZXQncyBpbnRlcm5hbCBzdGF0ZSkuXG4gICAqIENhbGxlZCB3aGVuIHdpZGdldCBwYW5lbCBjbG9zZXMgdG8gcmVtb3ZlIHNlbGVjdGlvbiBmcm9tIG1hcCB3aGlsZSBwcmVzZXJ2aW5nIHdpZGdldCBzdGF0ZS5cbiAgICogQWx3YXlzIGNsZWFycyBhY2N1bXVsYXRlZCByZWNvcmRzIGlmIHRoZXkgZXhpc3QsIHJlZ2FyZGxlc3Mgb2YgY3VycmVudCBtb2RlLlxuICAgKi9cbiAgcHJpdmF0ZSBjbGVhclNlbGVjdGlvbkZyb21NYXAgPSAoKSA9PiB7XG4gICAgY29uc3QgeyBsYXN0U2VsZWN0aW9uLCBhY2N1bXVsYXRlZFJlY29yZHMsIHJlc3VsdHNNb2RlIH0gPSB0aGlzLnN0YXRlXG4gICAgY29uc3QgeyBpZCB9ID0gdGhpcy5wcm9wc1xuICAgIFxuICAgIGNvbnN0IGlzQWNjdW11bGF0aW9uTW9kZSA9IHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb25cbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICBldmVudDogJ2NsZWFyU2VsZWN0aW9uRnJvbU1hcC1jYWxsZWQnLFxuICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgcmVzdWx0c01vZGUsXG4gICAgICBpc0FjY3VtdWxhdGlvbk1vZGUsXG4gICAgICBoYXNMYXN0U2VsZWN0aW9uOiAhIWxhc3RTZWxlY3Rpb24sXG4gICAgICBsYXN0U2VsZWN0aW9uUmVjb3JkQ291bnQ6IGxhc3RTZWxlY3Rpb24/LnJlY29yZElkcy5sZW5ndGggfHwgMCxcbiAgICAgIGhhc0FjY3VtdWxhdGVkUmVjb3JkczogISEoYWNjdW11bGF0ZWRSZWNvcmRzICYmIGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwKSxcbiAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiBhY2N1bXVsYXRlZFJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgc2VsZWN0aW9uUmVjb3JkQ291bnQ6IHRoaXMuc3RhdGUuc2VsZWN0aW9uUmVjb3JkQ291bnQgfHwgMFxuICAgIH0pXG4gICAgXG4gICAgLy8gQWx3YXlzIGNsZWFyIGFjY3VtdWxhdGVkIHJlY29yZHMgaWYgdGhleSBleGlzdCAocmVnYXJkbGVzcyBvZiBtb2RlKVxuICAgIC8vIFRoaXMgaGFuZGxlcyB0aGUgY2FzZSB3aGVyZSBtb2RlIG1pZ2h0IGhhdmUgY2hhbmdlZCBidXQgcmVjb3JkcyBzdGlsbCBleGlzdFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgIGV2ZW50OiAnY2xlYXJTZWxlY3Rpb25Gcm9tTWFwLWNoZWNraW5nLWFjY3VtdWxhdGVkLXJlY29yZHMnLFxuICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgJ2NvbmRpdGlvbic6ICdhY2N1bXVsYXRlZFJlY29yZHMgJiYgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDAnLFxuICAgICAgJ2NvbmRpdGlvbi1yZXN1bHQnOiAhIShhY2N1bXVsYXRlZFJlY29yZHMgJiYgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDApLFxuICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGFjY3VtdWxhdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDBcbiAgICB9KVxuICAgIFxuICAgIGlmIChhY2N1bXVsYXRlZFJlY29yZHMgJiYgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgIC8vIEdyb3VwIGFjY3VtdWxhdGVkIHJlY29yZHMgYnkgb3JpZ2luIGRhdGEgc291cmNlXG4gICAgICBjb25zdCByZWNvcmRzQnlPcmlnaW5EUyA9IG5ldyBNYXA8RmVhdHVyZUxheWVyRGF0YVNvdXJjZSwgRmVhdHVyZURhdGFSZWNvcmRbXT4oKVxuICAgICAgY29uc3QgZHNNYW5hZ2VyID0gRGF0YVNvdXJjZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKVxuICAgICAgXG4gICAgICBhY2N1bXVsYXRlZFJlY29yZHMuZm9yRWFjaCgocmVjb3JkLCBpbmRleCkgPT4ge1xuICAgICAgICBjb25zdCByZWNvcmRJZCA9IHJlY29yZC5nZXRJZCgpXG4gICAgICAgIGxldCBvcmlnaW5EUzogRmVhdHVyZUxheWVyRGF0YVNvdXJjZSB8IG51bGwgPSBudWxsXG4gICAgICAgIFxuICAgICAgICAvLyBNZXRob2QgMTogVHJ5IHRvIGdldCBmcm9tIHJlY29yZC5nZXREYXRhU291cmNlKClcbiAgICAgICAgY29uc3QgcmVjb3JkRFMgPSByZWNvcmQuZ2V0RGF0YVNvdXJjZT8uKCkgYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICAgICAgICBpZiAocmVjb3JkRFMpIHtcbiAgICAgICAgICBvcmlnaW5EUyA9IHJlY29yZERTLmdldE9yaWdpbkRhdGFTb3VyY2VzKCk/LlswXSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlIHx8IHJlY29yZERTXG4gICAgICAgICAgXG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICAgICAgZXZlbnQ6ICdjbGVhci1mb3VuZC1vcmlnaW4tZHMtZnJvbS1yZWNvcmQtZHMnLFxuICAgICAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICAgICAgcmVjb3JkSW5kZXg6IGluZGV4LFxuICAgICAgICAgICAgcmVjb3JkSWQsXG4gICAgICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUz8uaWQgfHwgJ251bGwnLFxuICAgICAgICAgICAgbWV0aG9kOiAncmVjb3JkLmdldERhdGFTb3VyY2UoKSdcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBNZXRob2QgMjogSWYgdGhhdCBmYWlsZWQsIHNlYXJjaCBhbGwgZGF0YSBzb3VyY2VzIGZvciBhIHJlY29yZCB3aXRoIG1hdGNoaW5nIElEXG4gICAgICAgIGlmICghb3JpZ2luRFMpIHtcbiAgICAgICAgICBjb25zdCBkc01hcCA9IGRzTWFuYWdlci5nZXREYXRhU291cmNlcygpXG4gICAgICAgICAgY29uc3QgYWxsRGF0YVNvdXJjZXMgPSBPYmplY3QudmFsdWVzKGRzTWFwKVxuICAgICAgICAgIFxuICAgICAgICAgIGZvciAoY29uc3QgZHMgb2YgYWxsRGF0YVNvdXJjZXMpIHtcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoaXMgaXMgYSBGZWF0dXJlTGF5ZXJEYXRhU291cmNlIGJ5IGNoZWNraW5nIGZvciBnZXRBbGxMb2FkZWRSZWNvcmRzIG1ldGhvZFxuICAgICAgICAgICAgaWYgKGRzICYmIHR5cGVvZiAoZHMgYXMgYW55KS5nZXRBbGxMb2FkZWRSZWNvcmRzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhpcyBEUyBoYXMgdGhlIHJlY29yZFxuICAgICAgICAgICAgICAgIGNvbnN0IGFsbFJlY29yZHMgPSAoZHMgYXMgYW55KS5nZXRBbGxMb2FkZWRSZWNvcmRzKCkgfHwgW11cbiAgICAgICAgICAgICAgICBjb25zdCBtYXRjaGluZ1JlY29yZCA9IGFsbFJlY29yZHMuZmluZCgocjogRmVhdHVyZURhdGFSZWNvcmQpID0+IHIuZ2V0SWQoKSA9PT0gcmVjb3JkSWQpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoaW5nUmVjb3JkKSB7XG4gICAgICAgICAgICAgICAgICAvLyBGb3VuZCB0aGUgcmVjb3JkIC0gZ2V0IG9yaWdpbiBEUyBmcm9tIHRoaXMgRFNcbiAgICAgICAgICAgICAgICAgIG9yaWdpbkRTID0gKGRzIGFzIGFueSkuZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKT8uWzBdIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2UgfHwgZHMgYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50OiAnY2xlYXItZm91bmQtb3JpZ2luLWRzLXZpYS1zZWFyY2gnLFxuICAgICAgICAgICAgICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgICAgICAgICAgICAgIHJlY29yZEluZGV4OiBpbmRleCxcbiAgICAgICAgICAgICAgICAgICAgcmVjb3JkSWQsXG4gICAgICAgICAgICAgICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdzZWFyY2hlZC1hbGwtZGF0YS1zb3VyY2VzJyxcbiAgICAgICAgICAgICAgICAgICAgc2VhcmNoZWREU0lkOiBkcy5pZFxuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIC8vIENvbnRpbnVlIHNlYXJjaGluZ1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAob3JpZ2luRFMpIHtcbiAgICAgICAgICBpZiAoIXJlY29yZHNCeU9yaWdpbkRTLmhhcyhvcmlnaW5EUykpIHtcbiAgICAgICAgICAgIHJlY29yZHNCeU9yaWdpbkRTLnNldChvcmlnaW5EUywgW10pXG4gICAgICAgICAgfVxuICAgICAgICAgIHJlY29yZHNCeU9yaWdpbkRTLmdldChvcmlnaW5EUykhLnB1c2gocmVjb3JkKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgICAgIGV2ZW50OiAnY2xlYXItY291bGQtbm90LWZpbmQtb3JpZ2luLWRzLWZvci1yZWNvcmQnLFxuICAgICAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICAgICAgcmVjb3JkSW5kZXg6IGluZGV4LFxuICAgICAgICAgICAgcmVjb3JkSWQsXG4gICAgICAgICAgICB3YXJuaW5nOiAncmVjb3JkLXdpbGwtYmUtc2tpcHBlZCdcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAncGFuZWwtY2xvc2VkLWNsZWFyaW5nLWFjY3VtdWxhdGVkLXJlY29yZHMtZnJvbS1tYXAnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoLFxuICAgICAgICBvcmlnaW5EU0NvdW50OiByZWNvcmRzQnlPcmlnaW5EUy5zaXplXG4gICAgICB9KVxuICAgICAgXG4gICAgICAvLyBDbGVhciBzZWxlY3Rpb24gZnJvbSBlYWNoIG9yaWdpbiBkYXRhIHNvdXJjZVxuICAgICAgY29uc3QgeyBjbGVhclNlbGVjdGlvbkluRGF0YVNvdXJjZXMgfSA9IHJlcXVpcmUoJy4vc2VsZWN0aW9uLXV0aWxzJylcbiAgICAgIGNvbnN0IHVzZUdyYXBoaWNzTGF5ZXIgPSB0aGlzLnByb3BzLmNvbmZpZy51c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0XG4gICAgICBjb25zdCBncmFwaGljc0xheWVyID0gdGhpcy5ncmFwaGljc0xheWVyUmVmLmN1cnJlbnQgfHwgdW5kZWZpbmVkXG4gICAgICBcbiAgICAgIHJlY29yZHNCeU9yaWdpbkRTLmZvckVhY2goKHJlY29yZHMsIG9yaWdpbkRTKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8gVXNlIGFzeW5jIElJRkUgc2luY2UgZm9yRWFjaCBjYWxsYmFjayBjYW4ndCBiZSBhc3luY1xuICAgICAgICAgIDsoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgYXdhaXQgY2xlYXJTZWxlY3Rpb25JbkRhdGFTb3VyY2VzKGlkLCBvcmlnaW5EUywgdXNlR3JhcGhpY3NMYXllciwgZ3JhcGhpY3NMYXllcilcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICAgICAgICBldmVudDogJ3BhbmVsLWNsb3NlZC1jbGVhcmVkLW9yaWdpbi1kcy1zZWxlY3Rpb24nLFxuICAgICAgICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICAgICAgICByZWNvcmRDb3VudDogcmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgICAgICAgIHVzZWRHcmFwaGljc0xheWVyOiB1c2VHcmFwaGljc0xheWVyXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0pKClcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgICAgICBldmVudDogJ3BhbmVsLWNsb3NlZC1jbGVhci1vcmlnaW4tZHMtZmFpbGVkJyxcbiAgICAgICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgZXZlbnQ6ICdjbGVhclNlbGVjdGlvbkZyb21NYXAtY2xlYXJlZC1hY2N1bXVsYXRlZC1yZWNvcmRzLXJldHVybmluZycsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgJ3dpbGwtbm90LWZhbGxiYWNrLXRvLWxhc3RTZWxlY3Rpb24nOiB0cnVlXG4gICAgICB9KVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIC8vIEhZUE9USEVTSVM6IE1heWJlIGFjY3VtdWxhdGVkUmVjb3JkcyBleGlzdCBidXQgd2UgZGlkbid0IGVudGVyIHRoZSBpZiBibG9jaz9cbiAgICAvLyBPciBtYXliZSB3ZSBzaG91bGQgYWx3YXlzIGNsZWFyIGFjY3VtdWxhdGVkIHJlY29yZHMgaWYgdGhleSBleGlzdD9cbiAgICBpZiAoYWNjdW11bGF0ZWRSZWNvcmRzICYmIGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAnY2xlYXJTZWxlY3Rpb25Gcm9tTWFwLWFjY3VtdWxhdGVkLXJlY29yZHMtZXhpc3QtYnV0LW5vdC1jbGVhcmluZycsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgcmVzdWx0c01vZGUsXG4gICAgICAgIGlzQWNjdW11bGF0aW9uTW9kZSxcbiAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgICdoeXBvdGhlc2lzJzogJ2FjY3VtdWxhdGVkLXJlY29yZHMtZXhpc3QtYnV0LWNvbmRpdGlvbi1mYWlsZWQtd2h5JyxcbiAgICAgICAgJ2NvbmRpdGlvbi13YXMnOiAnYWNjdW11bGF0ZWRSZWNvcmRzICYmIGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwJyxcbiAgICAgICAgJ2NvbmRpdGlvbi1yZXN1bHQnOiAhIShhY2N1bXVsYXRlZFJlY29yZHMgJiYgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDApXG4gICAgICB9KVxuICAgIH1cbiAgICBcbiAgICAvLyBGYWxsIGJhY2sgdG8gb3JpZ2luYWwgbG9naWMgZm9yIFwiTmV3XCIgbW9kZVxuICAgIGlmICghbGFzdFNlbGVjdGlvbikge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ2NsZWFyU2VsZWN0aW9uRnJvbU1hcC1uby1sYXN0U2VsZWN0aW9uLWV4aXRpbmcnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIGhhc0FjY3VtdWxhdGVkUmVjb3JkczogISEoYWNjdW11bGF0ZWRSZWNvcmRzICYmIGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwKSxcbiAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGFjY3VtdWxhdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgICdoeXBvdGhlc2lzJzogJ25vLWxhc3RTZWxlY3Rpb24tc28tZXhpdGluZy1tYXliZS1zaG91bGQtaGF2ZS1jbGVhcmVkLWFjY3VtdWxhdGVkLXJlY29yZHMtZmlyc3QnXG4gICAgICB9KVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc3QgZHNNYW5hZ2VyID0gRGF0YVNvdXJjZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKVxuICAgIGNvbnN0IG91dHB1dERTID0gZHNNYW5hZ2VyLmdldERhdGFTb3VyY2UobGFzdFNlbGVjdGlvbi5vdXRwdXREc0lkKSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gICAgXG4gICAgaWYgKCFvdXRwdXREUykge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ3BhbmVsLWNsb3NlZC1vdXRwdXQtZHMtbm90LWZvdW5kJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICBvdXRwdXREc0lkOiBsYXN0U2VsZWN0aW9uLm91dHB1dERzSWRcbiAgICAgIH0pXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgLy8gR2V0IG9yaWdpbiBEUyAodGhlIG1hcCBsYXllcilcbiAgICAgIGNvbnN0IG9yaWdpbkRTID0gb3V0cHV0RFMuZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKT8uWzBdIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgICAgIFxuICAgICAgaWYgKCFvcmlnaW5EUykge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgICAgZXZlbnQ6ICdwYW5lbC1jbG9zZWQtb3JpZ2luLWRzLW5vdC1mb3VuZCcsXG4gICAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICAgIG91dHB1dERzSWQ6IGxhc3RTZWxlY3Rpb24ub3V0cHV0RHNJZFxuICAgICAgICB9KVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgLy8gQ2hlY2sgY3VycmVudCBzZWxlY3Rpb24gc3RhdGUgYmVmb3JlIGNsZWFyaW5nXG4gICAgICBjb25zdCBjdXJyZW50U2VsZWN0ZWRJZHMgPSBvcmlnaW5EUy5nZXRTZWxlY3RlZFJlY29yZElkcygpIHx8IFtdXG4gICAgICBjb25zdCBvdXJSZWNvcmRJZHMgPSBsYXN0U2VsZWN0aW9uLnJlY29yZElkc1xuICAgICAgY29uc3QgbWF0Y2hlc091clNlbGVjdGlvbiA9IG91clJlY29yZElkcy5sZW5ndGggPT09IGN1cnJlbnRTZWxlY3RlZElkcy5sZW5ndGggJiZcbiAgICAgICAgb3VyUmVjb3JkSWRzLmV2ZXJ5KHJlY29yZElkID0+IGN1cnJlbnRTZWxlY3RlZElkcy5pbmNsdWRlcyhyZWNvcmRJZCkpXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgZXZlbnQ6ICdwYW5lbC1jbG9zZWQtY2hlY2tpbmctbWFwLXNlbGVjdGlvbicsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgb3VyUmVjb3JkQ291bnQ6IG91clJlY29yZElkcy5sZW5ndGgsXG4gICAgICAgIG1hcFNlbGVjdGVkQ291bnQ6IGN1cnJlbnRTZWxlY3RlZElkcy5sZW5ndGgsXG4gICAgICAgIG1hdGNoZXNPdXJTZWxlY3Rpb24sXG4gICAgICAgIG91clJlY29yZElkczogb3VyUmVjb3JkSWRzLnNsaWNlKDAsIDUpLFxuICAgICAgICBtYXBTZWxlY3RlZElkczogY3VycmVudFNlbGVjdGVkSWRzLnNsaWNlKDAsIDUpXG4gICAgICB9KVxuXG4gICAgICAvLyBVc2UgY2xlYXJTZWxlY3Rpb25JbkRhdGFTb3VyY2VzIHV0aWxpdHkgd2hpY2ggc3VwcG9ydHMgZ3JhcGhpY3MgbGF5ZXJcbiAgICAgIGNvbnN0IHsgY2xlYXJTZWxlY3Rpb25JbkRhdGFTb3VyY2VzIH0gPSByZXF1aXJlKCcuL3NlbGVjdGlvbi11dGlscycpXG4gICAgICBjb25zdCB1c2VHcmFwaGljc0xheWVyID0gdGhpcy5wcm9wcy5jb25maWcudXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodFxuICAgICAgY29uc3QgZ3JhcGhpY3NMYXllciA9IHRoaXMuZ3JhcGhpY3NMYXllclJlZi5jdXJyZW50IHx8IHVuZGVmaW5lZFxuICAgICAgXG4gICAgICA7KGFzeW5jICgpID0+IHtcbiAgICAgICAgYXdhaXQgY2xlYXJTZWxlY3Rpb25JbkRhdGFTb3VyY2VzKGlkLCBvcmlnaW5EUywgdXNlR3JhcGhpY3NMYXllciwgZ3JhcGhpY3NMYXllcilcbiAgICAgICAgXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgICBldmVudDogJ3BhbmVsLWNsb3NlZC1jbGVhcmVkLW9yaWdpbi1kcy1zZWxlY3Rpb24nLFxuICAgICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgICB1c2VkR3JhcGhpY3NMYXllcjogdXNlR3JhcGhpY3NMYXllclxuICAgICAgICB9KVxuICAgICAgICBcbiAgICAgICAgLy8gVmVyaWZ5IHNlbGVjdGlvbiB3YXMgY2xlYXJlZFxuICAgICAgICBjb25zdCBhZnRlckNsZWFySWRzID0gb3JpZ2luRFMuZ2V0U2VsZWN0ZWRSZWNvcmRJZHMoKSB8fCBbXVxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgICAgZXZlbnQ6ICdwYW5lbC1jbG9zZWQtc2VsZWN0aW9uLWNsZWFyZWQtZnJvbS1tYXAnLFxuICAgICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgICByZWNvcmRDb3VudDogbGFzdFNlbGVjdGlvbi5yZWNvcmRJZHMubGVuZ3RoLFxuICAgICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICAgIHNlbGVjdGlvbkFmdGVyQ2xlYXI6IGFmdGVyQ2xlYXJJZHMubGVuZ3RoLFxuICAgICAgICAgIHZlcmlmaWVkQ2xlYXJlZDogYWZ0ZXJDbGVhcklkcy5sZW5ndGggPT09IDBcbiAgICAgICAgfSlcbiAgICAgIH0pKClcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ3BhbmVsLWNsb3NlZC1jbGVhci1mcm9tLW1hcC1mYWlsZWQnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvciksXG4gICAgICAgIGVycm9yU3RhY2s6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZFxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogTG9ncyB2aXNpYmlsaXR5IHN0YXRlIGNoYW5nZXMuXG4gICAqL1xuICBsb2dWaXNpYmlsaXR5Q2hhbmdlID0gKGlzVmlzaWJsZTogYm9vbGVhbiwgbWV0aG9kOiBzdHJpbmcpID0+IHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1dJREdFVC1TVEFURScsIHtcbiAgICAgIGV2ZW50OiBpc1Zpc2libGUgPyAncGFuZWwtb3BlbmVkJyA6ICdwYW5lbC1jbG9zZWQnLFxuICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICBpc1Zpc2libGUsXG4gICAgICBtZXRob2QsXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgIH0pXG4gICAgXG4gICAgaWYgKGlzVmlzaWJsZSkge1xuICAgICAgLy8gV2hlbiBwYW5lbCBvcGVucywgY2hlY2sgaWYgd2UgaGF2ZSBzZWxlY3Rpb24gdG8gcmVzdG9yZVxuICAgICAgY29uc3QgaXNBY2N1bXVsYXRpb25Nb2RlID0gdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbiB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUucmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvblxuICAgICAgY29uc3QgaGFzQWNjdW11bGF0ZWRSZWNvcmRzID0gdGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHMgJiYgdGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMFxuICAgICAgY29uc3QgaGFzU2VsZWN0aW9uU3RhdGUgPSB0aGlzLnN0YXRlLmhhc1NlbGVjdGlvbiB8fCBmYWxzZVxuICAgICAgY29uc3QgaGFzU2VsZWN0aW9uVG9SZXN0b3JlID0gaXNBY2N1bXVsYXRpb25Nb2RlIFxuICAgICAgICA/IGhhc0FjY3VtdWxhdGVkUmVjb3JkcyBcbiAgICAgICAgOiBoYXNTZWxlY3Rpb25TdGF0ZVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAncGFuZWwtb3BlbmVkLWNoZWNraW5nLXNlbGVjdGlvbicsXG4gICAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgICByZXN1bHRzTW9kZTogdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSxcbiAgICAgICAgaXNBY2N1bXVsYXRpb25Nb2RlLFxuICAgICAgICBoYXNTZWxlY3Rpb246IGhhc1NlbGVjdGlvblN0YXRlLFxuICAgICAgICBoYXNBY2N1bXVsYXRlZFJlY29yZHMsXG4gICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiB0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgIHNlbGVjdGlvblJlY29yZENvdW50OiB0aGlzLnN0YXRlLnNlbGVjdGlvblJlY29yZENvdW50IHx8IDAsXG4gICAgICAgIGhhc0xhc3RTZWxlY3Rpb246ICEhdGhpcy5zdGF0ZS5sYXN0U2VsZWN0aW9uLFxuICAgICAgICBsYXN0U2VsZWN0aW9uUmVjb3JkQ291bnQ6IHRoaXMuc3RhdGUubGFzdFNlbGVjdGlvbj8ucmVjb3JkSWRzLmxlbmd0aCB8fCAwLFxuICAgICAgICBoYXNTZWxlY3Rpb25Ub1Jlc3RvcmUsXG4gICAgICAgIGRlY2lzaW9uTG9naWM6IHtcbiAgICAgICAgICAnaXNBY2N1bXVsYXRpb25Nb2RlJzogaXNBY2N1bXVsYXRpb25Nb2RlLFxuICAgICAgICAgICdoYXNBY2N1bXVsYXRlZFJlY29yZHMnOiBoYXNBY2N1bXVsYXRlZFJlY29yZHMsXG4gICAgICAgICAgJ2hhc1NlbGVjdGlvblN0YXRlJzogaGFzU2VsZWN0aW9uU3RhdGUsXG4gICAgICAgICAgJ2NhbGN1bGF0ZWQtaGFzU2VsZWN0aW9uVG9SZXN0b3JlJzogaGFzU2VsZWN0aW9uVG9SZXN0b3JlLFxuICAgICAgICAgICd3aWxsLWNhbGwtYWRkU2VsZWN0aW9uVG9NYXAnOiBoYXNTZWxlY3Rpb25Ub1Jlc3RvcmVcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgLy8gQWRkIHNlbGVjdGlvbiB0byBtYXAgaWYgd2UgaGF2ZSBvbmVcbiAgICAgIGlmIChoYXNTZWxlY3Rpb25Ub1Jlc3RvcmUpIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICAgIGV2ZW50OiAncGFuZWwtb3BlbmVkLWNhbGxpbmctYWRkU2VsZWN0aW9uVG9NYXAnLFxuICAgICAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgICAgIHJlYXNvbjogJ2hhc1NlbGVjdGlvblRvUmVzdG9yZS1pcy10cnVlJ1xuICAgICAgICB9KVxuICAgICAgICB0aGlzLmFkZFNlbGVjdGlvblRvTWFwKClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgICBldmVudDogJ3BhbmVsLW9wZW5lZC1za2lwcGluZy1hZGRTZWxlY3Rpb25Ub01hcCcsXG4gICAgICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICAgICAgcmVhc29uOiAnaGFzU2VsZWN0aW9uVG9SZXN0b3JlLWlzLWZhbHNlJyxcbiAgICAgICAgICB3aHk6IGlzQWNjdW11bGF0aW9uTW9kZSBcbiAgICAgICAgICAgID8gJ25vLWFjY3VtdWxhdGVkLXJlY29yZHMnIFxuICAgICAgICAgICAgOiAnbm8taGFzU2VsZWN0aW9uLXN0YXRlJ1xuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBXaGVuIHBhbmVsIGNsb3NlcywgY2xlYXIgc2VsZWN0aW9uIGZyb20gbWFwIG9ubHkgKGtlZXAgd2lkZ2V0IHN0YXRlKVxuICAgICAgY29uc3QgaXNBY2N1bXVsYXRpb25Nb2RlID0gdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbiB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUucmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvblxuICAgICAgY29uc3QgaGFzQWNjdW11bGF0ZWRSZWNvcmRzID0gdGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHMgJiYgdGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMFxuICAgICAgY29uc3QgaGFzU2VsZWN0aW9uU3RhdGUgPSB0aGlzLnN0YXRlLmhhc1NlbGVjdGlvbiB8fCBmYWxzZVxuICAgICAgY29uc3QgaGFzU2VsZWN0aW9uVG9DbGVhciA9IGlzQWNjdW11bGF0aW9uTW9kZSBcbiAgICAgICAgPyBoYXNBY2N1bXVsYXRlZFJlY29yZHMgXG4gICAgICAgIDogaGFzU2VsZWN0aW9uU3RhdGVcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ3BhbmVsLWNsb3NlZC1jaGVja2luZy1zZWxlY3Rpb24nLFxuICAgICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgICAgcmVzdWx0c01vZGU6IHRoaXMuc3RhdGUucmVzdWx0c01vZGUsXG4gICAgICAgIGlzQWNjdW11bGF0aW9uTW9kZSxcbiAgICAgICAgaGFzU2VsZWN0aW9uOiBoYXNTZWxlY3Rpb25TdGF0ZSxcbiAgICAgICAgaGFzQWNjdW11bGF0ZWRSZWNvcmRzLFxuICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogdGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICBzZWxlY3Rpb25SZWNvcmRDb3VudDogdGhpcy5zdGF0ZS5zZWxlY3Rpb25SZWNvcmRDb3VudCB8fCAwLFxuICAgICAgICBoYXNMYXN0U2VsZWN0aW9uOiAhIXRoaXMuc3RhdGUubGFzdFNlbGVjdGlvbixcbiAgICAgICAgbGFzdFNlbGVjdGlvblJlY29yZENvdW50OiB0aGlzLnN0YXRlLmxhc3RTZWxlY3Rpb24/LnJlY29yZElkcy5sZW5ndGggfHwgMCxcbiAgICAgICAgaGFzU2VsZWN0aW9uVG9DbGVhcixcbiAgICAgICAgZGVjaXNpb25Mb2dpYzoge1xuICAgICAgICAgICdpc0FjY3VtdWxhdGlvbk1vZGUnOiBpc0FjY3VtdWxhdGlvbk1vZGUsXG4gICAgICAgICAgJ2hhc0FjY3VtdWxhdGVkUmVjb3Jkcyc6IGhhc0FjY3VtdWxhdGVkUmVjb3JkcyxcbiAgICAgICAgICAnaGFzU2VsZWN0aW9uU3RhdGUnOiBoYXNTZWxlY3Rpb25TdGF0ZSxcbiAgICAgICAgICAnY2FsY3VsYXRlZC1oYXNTZWxlY3Rpb25Ub0NsZWFyJzogaGFzU2VsZWN0aW9uVG9DbGVhcixcbiAgICAgICAgICAnd2lsbC1jYWxsLWNsZWFyU2VsZWN0aW9uRnJvbU1hcCc6IGhhc1NlbGVjdGlvblRvQ2xlYXJcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgaWYgKGhhc1NlbGVjdGlvblRvQ2xlYXIpIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICAgIGV2ZW50OiAncGFuZWwtY2xvc2VkLWNhbGxpbmctY2xlYXJTZWxlY3Rpb25Gcm9tTWFwJyxcbiAgICAgICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgICAgICByZWFzb246ICdoYXNTZWxlY3Rpb25Ub0NsZWFyLWlzLXRydWUnXG4gICAgICAgIH0pXG4gICAgICAgIHRoaXMuY2xlYXJTZWxlY3Rpb25Gcm9tTWFwKClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgICBldmVudDogJ3BhbmVsLWNsb3NlZC1uby1zZWxlY3Rpb24tdG8tY2xlYXInLFxuICAgICAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgICAgIHJlYXNvbjogJ2hhc1NlbGVjdGlvblRvQ2xlYXItaXMtZmFsc2UnLFxuICAgICAgICAgIHdoeTogaXNBY2N1bXVsYXRpb25Nb2RlIFxuICAgICAgICAgICAgPyAnbm8tYWNjdW11bGF0ZWQtcmVjb3JkcycgXG4gICAgICAgICAgICA6ICduby1oYXNTZWxlY3Rpb24tc3RhdGUnXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIE5vdGlmaWVzIEhlbHBlclNpbXBsZSBvZiBwYW5lbCB2aXNpYmlsaXR5IHN0YXRlIGNoYW5nZXMuXG4gICAqL1xuICBub3RpZnlIZWxwZXJTaW1wbGVPZlBhbmVsU3RhdGUgPSAoaXNWaXNpYmxlOiBib29sZWFuKSA9PiB7XG4gICAgY29uc3QgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoUVVFUllTSU1QTEVfV0lER0VUX1NUQVRFX0VWRU5ULCB7XG4gICAgICBkZXRhaWw6IHtcbiAgICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICAgIGlzT3BlbjogaXNWaXNpYmxlXG4gICAgICB9LFxuICAgICAgYnViYmxlczogdHJ1ZSxcbiAgICAgIGNhbmNlbGFibGU6IHRydWVcbiAgICB9KVxuICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KGV2ZW50KVxuICB9XG5cbiAgLyoqXG4gICAqIE5PVElGWSB0aGF0IGEgaGFzaCBwYXJhbWV0ZXIgaGFzIGJlZW4gdXNlZC5cbiAgICogUHJldmlvdXNseSB0aGlzIHJlbW92ZWQgdGhlIGhhc2ggZnJvbSB0aGUgVVJMLCBidXQgcGVyIHVwZGF0ZWQgcmVxdWlyZW1lbnRzLFxuICAgKiB1c2VyLWVudGVyZWQgaGFzaGVzIHNob3VsZCByZW1haW4gaW4gdGhlIFVSTC5cbiAgICogXG4gICAqIEBwYXJhbSBzaG9ydElkIC0gVGhlIHNob3J0SWQgcGFyYW1ldGVyIHRoYXQgd2FzIHVzZWRcbiAgICovXG4gIGhhbmRsZUhhc2hQYXJhbWV0ZXJVc2VkID0gKHNob3J0SWQ6IHN0cmluZykgPT4ge1xuICAgIGNvbnN0IHsgaWQgfSA9IHRoaXMucHJvcHNcbiAgICBjb25zdCB7IGluaXRpYWxRdWVyeVZhbHVlIH0gPSB0aGlzLnN0YXRlXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdIQVNIJywge1xuICAgICAgZXZlbnQ6ICdoYW5kbGVIYXNoUGFyYW1ldGVyVXNlZC1ub3RpZmllZCcsXG4gICAgICB3aWRnZXRJZDogaWQsXG4gICAgICBzaG9ydElkOiBzaG9ydElkLFxuICAgICAgY3VycmVudEluaXRpYWxRdWVyeVZhbHVlOiBpbml0aWFsUXVlcnlWYWx1ZSxcbiAgICAgIG5vdGU6ICdIYXNoIHJlbWFpbnMgaW4gVVJMIHBlciB1c2VyIHJlcXVpcmVtZW50JyxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG5cbiAgICAvLyBDbGVhciB0aGUgc3RhdGUgc28gaXQgd29uJ3QgdHJpZ2dlciBhZ2FpbiB3aXRoaW4gdGhpcyBzZXNzaW9uL21vdW50XG4gICAgaWYgKHRoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWU/LnNob3J0SWQgPT09IHNob3J0SWQpIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoeyBpbml0aWFsUXVlcnlWYWx1ZTogdW5kZWZpbmVkIH0pXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrcyB0aGUgVVJMIGhhc2ggcGFyYW1ldGVycyBmb3IgYW55IHNob3J0SWRzIHRoYXQgbWF0Y2ggcXVlcnkgaXRlbXMuXG4gICAqIElmIGZvdW5kLCBzdG9yZXMgdGhlIHZhbHVlIHRvIGJlIHVzZWQgdG8gYXV0by1wb3B1bGF0ZSBhbmQgZXhlY3V0ZSB0aGUgcXVlcnkuXG4gICAqIEV4cGVyaWVuY2UgQnVpbGRlciB1c2VzIGhhc2gtYmFzZWQgVVJMIHBhcmFtZXRlcnMgKGUuZy4sICNwaW49MjIyMzA1OTAxMykuXG4gICAqIFxuICAgKiBUaGlzIG1ldGhvZCBwcmlvcml0aXplcyB0aGUgZmlyc3QgbWF0Y2hpbmcgc2hvcnRJZCBmb3VuZCBpbiB0aGUgcXVlcnkgaXRlbXMgb3JkZXIuXG4gICAqIElmIG11bHRpcGxlIGhhc2ggcGFyYW1ldGVycyBleGlzdCwgb25seSB0aGUgZmlyc3QgbWF0Y2ggaXMgdXNlZC5cbiAgICovXG4gIGNoZWNrUXVlcnlTdHJpbmdGb3JTaG9ydElkcyA9ICgpID0+IHtcbiAgICBjb25zdCB7IGNvbmZpZyB9ID0gdGhpcy5wcm9wc1xuICAgIGlmICghY29uZmlnLnF1ZXJ5SXRlbXM/Lmxlbmd0aCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gRXh0cmFjdCBhbGwgc2hvcnRJZHMgZnJvbSBxdWVyeSBpdGVtc1xuICAgIGNvbnN0IHNob3J0SWRzID0gY29uZmlnLnF1ZXJ5SXRlbXNcbiAgICAgIC5tYXAoaXRlbSA9PiBpdGVtLnNob3J0SWQpXG4gICAgICAuZmlsdGVyKHNob3J0SWQgPT4gc2hvcnRJZCAhPSBudWxsICYmIHNob3J0SWQudHJpbSgpICE9PSAnJylcblxuICAgIGlmIChzaG9ydElkcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIEdldCBVUkwgaGFzaCBmcmFnbWVudCBwYXJhbWV0ZXJzIChFeEIgdXNlcyAjIGZvciBwYXJhbXMpXG4gICAgY29uc3QgaGFzaCA9IHdpbmRvdy5sb2NhdGlvbi5oYXNoLnN1YnN0cmluZygxKSAvLyBSZW1vdmUgdGhlICNcbiAgICBjb25zdCB1cmxQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKGhhc2gpXG4gICAgXG4gICAgLy8gQ2hlY2sgaWYgd2UndmUgYWxyZWFkeSBwcm9jZXNzZWQgdGhpcyBzcGVjaWZpYyBoYXNoIHN0cmluZ1xuICAgIGlmICh0aGlzLmxhc3RQcm9jZXNzZWRIYXNoID09PSBoYXNoKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgLy8gVXBkYXRlIGltbWVkaWF0ZWx5IHRvIHByZXZlbnQgcmUtZW50cnkgcmFjZSBjb25kaXRpb25zXG4gICAgdGhpcy5sYXN0UHJvY2Vzc2VkSGFzaCA9IGhhc2hcblxuICAgIC8vIExvZyBhbGwgaGFzaCBwYXJhbXMgZm9yIGRlYnVnZ2luZ1xuICAgIGNvbnN0IGFsbEhhc2hQYXJhbXM6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH0gPSB7fVxuICAgIHVybFBhcmFtcy5mb3JFYWNoKCh2YWx1ZSwga2V5KSA9PiB7XG4gICAgICBhbGxIYXNoUGFyYW1zW2tleV0gPSB2YWx1ZVxuICAgIH0pXG5cbiAgICAvLyBMb2cgaGFzaCBjaGVjayBmb3IgZGVidWdnaW5nXG4gICAgZGVidWdMb2dnZXIubG9nKCdIQVNIJywge1xuICAgICAgZXZlbnQ6ICdoYXNoLWNoZWNrJyxcbiAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgaGFzaDogaGFzaCxcbiAgICAgIGFsbEhhc2hQYXJhbXM6IGFsbEhhc2hQYXJhbXMsXG4gICAgICBoYXNoUGFyYW1zQ291bnQ6IE9iamVjdC5rZXlzKGFsbEhhc2hQYXJhbXMpLmxlbmd0aCxcbiAgICAgIGF2YWlsYWJsZVNob3J0SWRzOiBzaG9ydElkcyxcbiAgICAgIGN1cnJlbnRTdGF0ZTogdGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZSxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG5cbiAgICAvLyBGaW5kIHRoZSBmaXJzdCBtYXRjaGluZyBzaG9ydElkIChwcmlvcml0aXplIGZpcnN0IG1hdGNoIGluIHF1ZXJ5IGl0ZW1zIG9yZGVyKVxuICAgIC8vIFRoaXMgZW5zdXJlcyB3ZSBvbmx5IHNldCBzdGF0ZSBvbmNlIHBlciBjaGVjayBhbmQgbWFpbnRhaW5zIGNvbnNpc3RlbnQgYmVoYXZpb3JcbiAgICBsZXQgZm91bmRNYXRjaCA9IGZhbHNlXG4gICAgZm9yIChjb25zdCBzaG9ydElkIG9mIHNob3J0SWRzKSB7XG4gICAgICBpZiAodXJsUGFyYW1zLmhhcyhzaG9ydElkKSkge1xuICAgICAgICBmb3VuZE1hdGNoID0gdHJ1ZVxuICAgICAgICBjb25zdCB2YWx1ZSA9IHVybFBhcmFtcy5nZXQoc2hvcnRJZClcbiAgICAgICAgLy8gT25seSB1cGRhdGUgaWYgdGhlIHZhbHVlIGhhcyBjaGFuZ2VkIHRvIGF2b2lkIHVubmVjZXNzYXJ5IHJlLXJlbmRlcnNcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWU/LnNob3J0SWQgIT09IHNob3J0SWQgfHwgdGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZT8udmFsdWUgIT09IHZhbHVlKSB7XG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNIJywge1xuICAgICAgICAgICAgZXZlbnQ6ICdoYXNoLWRldGVjdGVkJyxcbiAgICAgICAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgICAgICAgc2hvcnRJZDogc2hvcnRJZCxcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgIHByZXZpb3VzU2hvcnRJZDogdGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZT8uc2hvcnRJZCxcbiAgICAgICAgICAgIHByZXZpb3VzVmFsdWU6IHRoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWU/LnZhbHVlLFxuICAgICAgICAgICAgYWxsSGFzaFBhcmFtczogYWxsSGFzaFBhcmFtcyxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgIH0pXG4gICAgICAgICAgXG4gICAgICAgICAgLy8gUmVzZXQgdG8gTmV3IG1vZGUgd2hlbiBoYXNoIHBhcmFtZXRlciBpcyBkZXRlY3RlZCB0byBhdm9pZCBidWdzIHdpdGggYWNjdW11bGF0aW9uIG1vZGVzXG4gICAgICAgICAgY29uc3QgbmVlZHNNb2RlUmVzZXQgPSB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlICE9PSBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvblxuICAgICAgICAgIFxuICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSCcsIHtcbiAgICAgICAgICAgIGV2ZW50OiAnaGFzaC1kZXRlY3RlZC1zZXR0aW5nLXN0YXRlJyxcbiAgICAgICAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgICAgICAgc2hvcnRJZCxcbiAgICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgICAgbmVlZHNNb2RlUmVzZXQsXG4gICAgICAgICAgICBjdXJyZW50TW9kZTogdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgIH0pXG5cbiAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgXG4gICAgICAgICAgICBpbml0aWFsUXVlcnlWYWx1ZTogeyBzaG9ydElkLCB2YWx1ZSB9LFxuICAgICAgICAgICAgLy8gUmVzZXQgdG8gTmV3IG1vZGUgYW5kIGNsZWFyIGFjY3VtdWxhdGVkUmVjb3JkcyAoc2FtZSBhcyBoYW5kbGVSZXN1bHRzTW9kZUNoYW5nZSBkb2VzKVxuICAgICAgICAgICAgLi4uKG5lZWRzTW9kZVJlc2V0ID8geyBcbiAgICAgICAgICAgICAgcmVzdWx0c01vZGU6IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uLFxuICAgICAgICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHM6IFtdXG4gICAgICAgICAgICB9IDoge30pXG4gICAgICAgICAgfSlcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAobmVlZHNNb2RlUmVzZXQpIHtcbiAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSCcsIHtcbiAgICAgICAgICAgICAgZXZlbnQ6ICdoYXNoLXJlc2V0LW1vZGUtdG8tbmV3JyxcbiAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICAgICAgICAgIHByZXZpb3VzTW9kZTogdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSxcbiAgICAgICAgICAgICAgcmVhc29uOiAnaGFzaC1wYXJhbWV0ZXItZGV0ZWN0ZWQnXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gnLCB7XG4gICAgICAgICAgICBldmVudDogJ2hhc2gtc2tpcHBlZCcsXG4gICAgICAgICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgICAgICAgIHNob3J0SWQ6IHNob3J0SWQsXG4gICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgICByZWFzb246ICd2YWx1ZS11bmNoYW5nZWQnXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gLy8gRXhpdCBhZnRlciBmaXJzdCBtYXRjaFxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBJZiBubyBoYXNoIHBhcmFtZXRlcnMgbWF0Y2ggYW55IHNob3J0SWQsIGxvZyB3aGF0J3MgaW4gdGhlIGhhc2hcbiAgICBpZiAoIWZvdW5kTWF0Y2ggJiYgT2JqZWN0LmtleXMoYWxsSGFzaFBhcmFtcykubGVuZ3RoID4gMCkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNIJywge1xuICAgICAgICBldmVudDogJ2hhc2gtY2hlY2stbm8tbWF0Y2hpbmctc2hvcnRJZCcsXG4gICAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgICBoYXNoOiBoYXNoLFxuICAgICAgICBhbGxIYXNoUGFyYW1zOiBhbGxIYXNoUGFyYW1zLFxuICAgICAgICBhdmFpbGFibGVTaG9ydElkczogc2hvcnRJZHMsXG4gICAgICAgIG5vdGU6ICdIYXNoIGNvbnRhaW5zIHBhcmFtcyBidXQgbm9uZSBtYXRjaCBjb25maWd1cmVkIHNob3J0SWRzJyxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgIH1cblxuICAgIC8vIElmIG5vIGhhc2ggcGFyYW1ldGVycyBtYXRjaCBhbnkgc2hvcnRJZCwgY2xlYXIgdGhlIHN0YXRlXG4gICAgLy8gVGhpcyBoYW5kbGVzIGNhc2VzIHdoZXJlIGhhc2ggcGFyYW1ldGVycyB3ZXJlIHJlbW92ZWRcbiAgICBpZiAodGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZSkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNIJywge1xuICAgICAgICBldmVudDogJ2hhc2gtY2xlYXJlZCcsXG4gICAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgICBwcmV2aW91c1Nob3J0SWQ6IHRoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWUuc2hvcnRJZCxcbiAgICAgICAgcHJldmlvdXNWYWx1ZTogdGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZS52YWx1ZSxcbiAgICAgICAgcmVhc29uOiAnbm8tbWF0Y2hpbmctaGFzaC1wYXJhbXMnLFxuICAgICAgICBhbGxIYXNoUGFyYW1zOiBhbGxIYXNoUGFyYW1zLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICB0aGlzLnNldFN0YXRlKHsgXG4gICAgICAgIGluaXRpYWxRdWVyeVZhbHVlOiB1bmRlZmluZWRcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgcmVuZGVyICgpIHtcbiAgICBjb25zdCB7IGNvbmZpZywgaWQsIGljb24sIGxhYmVsLCBsYXlvdXRJZCwgbGF5b3V0SXRlbUlkLCBjb250cm9sbGVyV2lkZ2V0SWQgfSA9IHRoaXMucHJvcHNcbiAgICBjb25zdCB3aWRnZXRMYWJlbCA9IHRoaXMucHJvcHMuaW50bC5mb3JtYXRNZXNzYWdlKHtcbiAgICAgIGlkOiAnX3dpZGdldExhYmVsJyxcbiAgICAgIGRlZmF1bHRNZXNzYWdlOiBkZWZhdWx0TWVzc2FnZXMuX3dpZGdldExhYmVsXG4gICAgfSlcbiAgICBpZiAoIWNvbmZpZy5xdWVyeUl0ZW1zPy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiA8V2lkZ2V0UGxhY2Vob2xkZXIgaWNvbj17aWNvbk1hcC5pY29uUXVlcnl9IHdpZGdldElkPXt0aGlzLnByb3BzLmlkfSBuYW1lPXt3aWRnZXRMYWJlbH0gLz5cbiAgICB9XG5cbiAgICBpZiAoY29uZmlnLmFycmFuZ2VUeXBlID09PSBRdWVyeUFycmFuZ2VUeXBlLlBvcHBlciAmJiAhY29udHJvbGxlcldpZGdldElkKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8UXVlcnlXaWRnZXRDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXtgJHtsYXlvdXRJZH06JHtsYXlvdXRJdGVtSWR9YH0+XG4gICAgICAgICAgPFRhc2tMaXN0UG9wcGVyV3JhcHBlclxuICAgICAgICAgICAgaWQ9ezB9XG4gICAgICAgICAgICBpY29uPXtpY29ufVxuICAgICAgICAgICAgcG9wcGVyVGl0bGU9e2xhYmVsfVxuICAgICAgICAgICAgbWluU2l6ZT17Y29uZmlnLnNpemVNYXA/LmFycmFuZ2VtZW50SWNvblBvcHBlcj8ubWluU2l6ZX1cbiAgICAgICAgICAgIGRlZmF1bHRTaXplPXtjb25maWcuc2l6ZU1hcD8uYXJyYW5nZW1lbnRJY29uUG9wcGVyPy5kZWZhdWx0U2l6ZX1cbiAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxRdWVyeVRhc2tMaXN0IFxuICAgICAgICAgICAgICAgIHdpZGdldElkPXtpZH0gXG4gICAgICAgICAgICAgICAgaXNJblBvcHBlciBcbiAgICAgICAgICAgICAgICBxdWVyeUl0ZW1zPXtjb25maWcucXVlcnlJdGVtc30gXG4gICAgICAgICAgICAgICAgZGVmYXVsdFBhZ2VTaXplPXtjb25maWcuZGVmYXVsdFBhZ2VTaXplfSBcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9J3BiLTQnIFxuICAgICAgICAgICAgICAgIGluaXRpYWxRdWVyeVZhbHVlPXt0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlfSBcbiAgICAgICAgICAgICAgICBvbkhhc2hQYXJhbWV0ZXJVc2VkPXt0aGlzLmhhbmRsZUhhc2hQYXJhbWV0ZXJVc2VkfVxuICAgICAgICAgICAgICAgIHJlc3VsdHNNb2RlPXt0aGlzLnN0YXRlLnJlc3VsdHNNb2RlfVxuICAgICAgICAgICAgICAgIG9uUmVzdWx0c01vZGVDaGFuZ2U9e3RoaXMuaGFuZGxlUmVzdWx0c01vZGVDaGFuZ2V9XG4gICAgICAgICAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzPXt0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3Jkc31cbiAgICAgICAgICAgICAgICBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZT17dGhpcy5oYW5kbGVBY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2V9XG4gICAgICAgICAgICAgICAgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodD17Y29uZmlnLnVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHR9XG4gICAgICAgICAgICAgICAgZ3JhcGhpY3NMYXllcj17dGhpcy5ncmFwaGljc0xheWVyUmVmLmN1cnJlbnQgfHwgdW5kZWZpbmVkfVxuICAgICAgICAgICAgICAgIG1hcFZpZXc9e3RoaXMubWFwVmlld1JlZi5jdXJyZW50IHx8IHVuZGVmaW5lZH1cbiAgICAgICAgICAgICAgICBvbkluaXRpYWxpemVHcmFwaGljc0xheWVyPXt0aGlzLmluaXRpYWxpemVHcmFwaGljc0xheWVyRnJvbU91dHB1dERTfVxuICAgICAgICAgICAgICAgIG9uQ2xlYXJHcmFwaGljc0xheWVyPXt0aGlzLmNsZWFyR3JhcGhpY3NMYXllcklmRXhpc3RzfVxuICAgICAgICAgICAgICAgIGFjdGl2ZVRhYj17dGhpcy5zdGF0ZS5hY3RpdmVUYWJ9XG4gICAgICAgICAgICAgICAgb25UYWJDaGFuZ2U9e3RoaXMuaGFuZGxlVGFiQ2hhbmdlfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgIDwvVGFza0xpc3RQb3BwZXJXcmFwcGVyPlxuICAgICAgICA8L1F1ZXJ5V2lkZ2V0Q29udGV4dC5Qcm92aWRlcj5cbiAgICAgIClcbiAgICB9XG5cbiAgICBpZiAoY29uZmlnLmFycmFuZ2VUeXBlID09PSBRdWVyeUFycmFuZ2VUeXBlLklubGluZSAmJiAhY29udHJvbGxlcldpZGdldElkKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8UXVlcnlXaWRnZXRDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXtgJHtsYXlvdXRJZH06JHtsYXlvdXRJdGVtSWR9YH0+XG4gICAgICAgICAgPFRhc2tMaXN0SW5saW5lXG4gICAgICAgICAgICB3aWRnZXRJZD17aWR9XG4gICAgICAgICAgICB3aWRnZXRMYWJlbD17bGFiZWx9XG4gICAgICAgICAgICB3cmFwPXtjb25maWcuYXJyYW5nZVdyYXB9XG4gICAgICAgICAgICBxdWVyeUl0ZW1zPXtjb25maWcucXVlcnlJdGVtc31cbiAgICAgICAgICAgIG1pblNpemU9e2NvbmZpZy5zaXplTWFwPy5hcnJhbmdlbWVudEljb25Qb3BwZXI/Lm1pblNpemV9XG4gICAgICAgICAgICBkZWZhdWx0U2l6ZT17Y29uZmlnLnNpemVNYXA/LmFycmFuZ2VtZW50SWNvblBvcHBlcj8uZGVmYXVsdFNpemV9XG4gICAgICAgICAgICBkZWZhdWx0UGFnZVNpemU9e2NvbmZpZy5kZWZhdWx0UGFnZVNpemV9XG4gICAgICAgICAgICBpbml0aWFsUXVlcnlWYWx1ZT17dGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZX1cbiAgICAgICAgICAgIG9uSGFzaFBhcmFtZXRlclVzZWQ9e3RoaXMuaGFuZGxlSGFzaFBhcmFtZXRlclVzZWR9XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9RdWVyeVdpZGdldENvbnRleHQuUHJvdmlkZXI+XG4gICAgICApXG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgIDxQYXBlciByZWY9e3RoaXMud2lkZ2V0UmVmfSB2YXJpYW50PSdmbGF0JyBjbGFzc05hbWU9J2ppbXUtd2lkZ2V0IHJ1bnRpbWUtcXVlcnknIGRhdGEtd2lkZ2V0aWQ9e2lkfSBjc3M9e2Nzc2BcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgYH0+XG4gICAgICAgIHsvKiBIaWRkZW4gSmltdU1hcFZpZXdDb21wb25lbnQgdG8gZ2V0IG1hcCB2aWV3IGZvciBncmFwaGljcyBsYXllciAqL31cbiAgICAgICAgey8qIFVzZXMgZXhwbGljaXQgbWFwIHdpZGdldCBJRCBmcm9tIGNvbmZpZyAod2lkZ2V0LWxldmVsIGJpbmRpbmcpICovfVxuICAgICAgICB7Y29uZmlnLnVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQgJiYgY29uZmlnLmhpZ2hsaWdodE1hcFdpZGdldElkICYmIChcbiAgICAgICAgICA8SmltdU1hcFZpZXdDb21wb25lbnRcbiAgICAgICAgICAgIHVzZU1hcFdpZGdldElkPXtjb25maWcuaGlnaGxpZ2h0TWFwV2lkZ2V0SWR9XG4gICAgICAgICAgICBvbkFjdGl2ZVZpZXdDaGFuZ2U9e3RoaXMuaGFuZGxlSmltdU1hcFZpZXdDaGFuZ2VkfVxuICAgICAgICAgIC8+XG4gICAgICAgICl9XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwid2lkZ2V0LWhlYWRlclwiIGNzcz17Y3NzYFxuICAgICAgICAgIHBhZGRpbmc6IDZweCAxNnB4O1xuICAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1zeXMtY29sb3ItZGl2aWRlci1zZWNvbmRhcnkpO1xuICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXN5cy1jb2xvci1zdXJmYWNlKTtcbiAgICAgICAgYH0+XG4gICAgICAgICAgPGgzIGNsYXNzTmFtZT1cIndpZGdldC10aXRsZVwiIGNzcz17Y3NzYFxuICAgICAgICAgICAgbWFyZ2luOiAwO1xuICAgICAgICAgICAgZm9udC1zaXplOiAxcmVtO1xuICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgICAgICAgICAgIGNvbG9yOiB2YXIoLS1zeXMtY29sb3ItdGV4dC1wcmltYXJ5KTtcbiAgICAgICAgICBgfT5cbiAgICAgICAgICAgIHtsYWJlbCB8fCB3aWRnZXRMYWJlbH1cbiAgICAgICAgICA8L2gzPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjc3M9e2Nzc2BcbiAgICAgICAgICBmbGV4OiAxO1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICBgfT5cbiAgICAgICAgICA8ZGl2IGNzcz17Y3NzYFxuICAgICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICAgIG92ZXJmbG93OiBhdXRvO1xuICAgICAgICAgIGB9PlxuICAgICAgICAgICAgPFF1ZXJ5V2lkZ2V0Q29udGV4dC5Qcm92aWRlciB2YWx1ZT17YCR7bGF5b3V0SWR9OiR7bGF5b3V0SXRlbUlkfWB9PlxuICAgICAgICAgICAgICA8UXVlcnlUYXNrTGlzdCBcbiAgICAgICAgICAgICAgICB3aWRnZXRJZD17aWR9IFxuICAgICAgICAgICAgICAgIHF1ZXJ5SXRlbXM9e2NvbmZpZy5xdWVyeUl0ZW1zfSBcbiAgICAgICAgICAgICAgICBkZWZhdWx0UGFnZVNpemU9e2NvbmZpZy5kZWZhdWx0UGFnZVNpemV9IFxuICAgICAgICAgICAgICAgIGluaXRpYWxRdWVyeVZhbHVlPXt0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlfSBcbiAgICAgICAgICAgICAgICBvbkhhc2hQYXJhbWV0ZXJVc2VkPXt0aGlzLmhhbmRsZUhhc2hQYXJhbWV0ZXJVc2VkfVxuICAgICAgICAgICAgICAgIHJlc3VsdHNNb2RlPXt0aGlzLnN0YXRlLnJlc3VsdHNNb2RlfVxuICAgICAgICAgICAgICAgIG9uUmVzdWx0c01vZGVDaGFuZ2U9e3RoaXMuaGFuZGxlUmVzdWx0c01vZGVDaGFuZ2V9XG4gICAgICAgICAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzPXt0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3Jkc31cbiAgICAgICAgICAgICAgICBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZT17dGhpcy5oYW5kbGVBY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2V9XG4gICAgICAgICAgICAgICAgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodD17Y29uZmlnLnVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHR9XG4gICAgICAgICAgICAgICAgZ3JhcGhpY3NMYXllcj17dGhpcy5ncmFwaGljc0xheWVyUmVmLmN1cnJlbnQgfHwgdW5kZWZpbmVkfVxuICAgICAgICAgICAgICAgIG1hcFZpZXc9e3RoaXMubWFwVmlld1JlZi5jdXJyZW50IHx8IHVuZGVmaW5lZH1cbiAgICAgICAgICAgICAgICBvbkluaXRpYWxpemVHcmFwaGljc0xheWVyPXt0aGlzLmluaXRpYWxpemVHcmFwaGljc0xheWVyRnJvbU91dHB1dERTfVxuICAgICAgICAgICAgICAgIG9uQ2xlYXJHcmFwaGljc0xheWVyPXt0aGlzLmNsZWFyR3JhcGhpY3NMYXllcklmRXhpc3RzfVxuICAgICAgICAgICAgICAgIGFjdGl2ZVRhYj17dGhpcy5zdGF0ZS5hY3RpdmVUYWJ9XG4gICAgICAgICAgICAgICAgb25UYWJDaGFuZ2U9e3RoaXMuaGFuZGxlVGFiQ2hhbmdlfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9RdWVyeVdpZGdldENvbnRleHQuUHJvdmlkZXI+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgey8qIFN0YXRpb25hcnkgZm9vdGVyICovfVxuICAgICAgICAgIDxkaXYgY3NzPXtjc3NgXG4gICAgICAgICAgICBwYWRkaW5nOiA0cHggMTJweDtcbiAgICAgICAgICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCB2YXIoLS1zeXMtY29sb3ItZGl2aWRlci1zZWNvbmRhcnkpO1xuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tc3lzLWNvbG9yLXN1cmZhY2UtcGFwZXIpO1xuICAgICAgICAgICAgZmxleC1zaHJpbms6IDA7XG4gICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgICAgYH0+XG4gICAgICAgICAgICA8c3BhbiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjc1cmVtO1xuICAgICAgICAgICAgICBjb2xvcjogdmFyKC0tc3lzLWNvbG9yLXRleHQtdGVydGlhcnkpO1xuICAgICAgICAgICAgICBmb250LXdlaWdodDogNDAwO1xuICAgICAgICAgICAgICBsZXR0ZXItc3BhY2luZzogMC4wMjVlbTtcbiAgICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWZsZXg7XG4gICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgICAgIGdhcDogNHB4O1xuICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgIHsvKiBDb2RlL09wZW4gU291cmNlIFN5bWJvbCAqL31cbiAgICAgICAgICAgICAgPHN2ZyBcbiAgICAgICAgICAgICAgICB3aWR0aD1cIjE0XCIgXG4gICAgICAgICAgICAgICAgaGVpZ2h0PVwiMTRcIiBcbiAgICAgICAgICAgICAgICB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgXG4gICAgICAgICAgICAgICAgZmlsbD1cIm5vbmVcIiBcbiAgICAgICAgICAgICAgICBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBcbiAgICAgICAgICAgICAgICBzdHJva2VXaWR0aD1cIjJcIlxuICAgICAgICAgICAgICAgIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgICAgZmxleC1zaHJpbms6IDA7XG4gICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjY7XG4gICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxwb2x5bGluZSBwb2ludHM9XCIxNiAxOCAyMiAxMiAxNiA2XCIvPlxuICAgICAgICAgICAgICAgIDxwb2x5bGluZSBwb2ludHM9XCI4IDYgMiAxMiA4IDE4XCIvPlxuICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgICAgUXVlcnlTaW1wbGUgYnkgTWFwU2ltcGxlXG4gICAgICAgICAgICAgIDxzcGFuIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiA2cHg7XG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMC41O1xuICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC43cmVtO1xuICAgICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgICB2e1dJREdFVF9WRVJTSU9OfVxuICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9QYXBlcj5cbiAgICApXG4gIH1cbn1cblxuXG4gZXhwb3J0IGZ1bmN0aW9uIF9fc2V0X3dlYnBhY2tfcHVibGljX3BhdGhfXyh1cmwpIHsgX193ZWJwYWNrX3B1YmxpY19wYXRoX18gPSB1cmwgfSJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==