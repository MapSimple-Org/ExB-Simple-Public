System.register(["jimu-core/emotion","jimu-core","jimu-ui","jimu-arcgis","jimu-ui/basic/sql-expression-runtime","jimu-theme","widgets/shared-code/common","jimu-layouts/layout-runtime"], function(__WEBPACK_DYNAMIC_EXPORT__, __system_context__) {
	var __WEBPACK_EXTERNAL_MODULE__emotion_react_jsx_runtime__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_core__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_ui__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_arcgis__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_ui_basic_sql_expression_runtime__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_theme__ = {};
	var __WEBPACK_EXTERNAL_MODULE_widgets_shared_code_common__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_layouts_layout_runtime__ = {};
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE__emotion_react_jsx_runtime__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_core__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_ui__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_arcgis__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_ui_basic_sql_expression_runtime__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_theme__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_widgets_shared_code_common__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_layouts_layout_runtime__, "__esModule", { value: true });
	return {
		setters: [
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE__emotion_react_jsx_runtime__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_core__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_ui__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_arcgis__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_ui_basic_sql_expression_runtime__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_theme__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_widgets_shared_code_common__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_layouts_layout_runtime__[key] = module[key];
				});
			}
		],
		execute: function() {
			__WEBPACK_DYNAMIC_EXPORT__(
/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./jimu-icons/filled/directional/down.tsx":
/*!************************************************!*\
  !*** ./jimu-icons/filled/directional/down.tsx ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DownFilled: () => (/* binding */ DownFilled)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_filled_directional_down_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/filled/directional/down.svg */ "./jimu-icons/svg/filled/directional/down.svg");
/* harmony import */ var _svg_filled_directional_down_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_filled_directional_down_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const DownFilled = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_filled_directional_down_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/filled/directional/right.tsx":
/*!*************************************************!*\
  !*** ./jimu-icons/filled/directional/right.tsx ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   RightFilled: () => (/* binding */ RightFilled)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_filled_directional_right_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/filled/directional/right.svg */ "./jimu-icons/svg/filled/directional/right.svg");
/* harmony import */ var _svg_filled_directional_right_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_filled_directional_right_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const RightFilled = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_filled_directional_right_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/directional/arrow-left.tsx":
/*!********************************************************!*\
  !*** ./jimu-icons/outlined/directional/arrow-left.tsx ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ArrowLeftOutlined: () => (/* binding */ ArrowLeftOutlined)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/directional/arrow-left.svg */ "./jimu-icons/svg/outlined/directional/arrow-left.svg");
/* harmony import */ var _svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const ArrowLeftOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/directional/collapse-all.tsx":
/*!**********************************************************!*\
  !*** ./jimu-icons/outlined/directional/collapse-all.tsx ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CollapseAllOutlined: () => (/* binding */ CollapseAllOutlined)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_directional_collapse_all_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/directional/collapse-all.svg */ "./jimu-icons/svg/outlined/directional/collapse-all.svg");
/* harmony import */ var _svg_outlined_directional_collapse_all_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_directional_collapse_all_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const CollapseAllOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_outlined_directional_collapse_all_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/directional/expand-all.tsx":
/*!********************************************************!*\
  !*** ./jimu-icons/outlined/directional/expand-all.tsx ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ExpandAllOutlined: () => (/* binding */ ExpandAllOutlined)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_directional_expand_all_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/directional/expand-all.svg */ "./jimu-icons/svg/outlined/directional/expand-all.svg");
/* harmony import */ var _svg_outlined_directional_expand_all_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_directional_expand_all_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const ExpandAllOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_outlined_directional_expand_all_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/editor/trash.tsx":
/*!**********************************************!*\
  !*** ./jimu-icons/outlined/editor/trash.tsx ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TrashOutlined: () => (/* binding */ TrashOutlined)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/editor/trash.svg */ "./jimu-icons/svg/outlined/editor/trash.svg");
/* harmony import */ var _svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const TrashOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/suggested/info.tsx":
/*!************************************************!*\
  !*** ./jimu-icons/outlined/suggested/info.tsx ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   InfoOutlined: () => (/* binding */ InfoOutlined)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_suggested_info_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/suggested/info.svg */ "./jimu-icons/svg/outlined/suggested/info.svg");
/* harmony import */ var _svg_outlined_suggested_info_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_suggested_info_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const InfoOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_outlined_suggested_info_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/svg/filled/directional/down.svg":
/*!****************************************************!*\
  !*** ./jimu-icons/svg/filled/directional/down.svg ***!
  \****************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"m14 4-6 8-6-8z\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/filled/directional/right.svg":
/*!*****************************************************!*\
  !*** ./jimu-icons/svg/filled/directional/right.svg ***!
  \*****************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"m4 2 8 6-8 6z\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/application/more-horizontal.svg":
/*!*****************************************************************!*\
  !*** ./jimu-icons/svg/outlined/application/more-horizontal.svg ***!
  \*****************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M2 7a1 1 0 1 0 0 2 1 1 0 0 0 0-2m5 1a1 1 0 1 1 2 0 1 1 0 0 1-2 0m6 0a1 1 0 1 1 2 0 1 1 0 0 1-2 0\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/arrow-left.svg":
/*!************************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/arrow-left.svg ***!
  \************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M15 7.5a.52.52 0 0 1-.516.527H2.976L6.473 11.6a.535.535 0 0 1 0 .746.51.51 0 0 1-.73 0L1 7.5l4.743-4.846a.51.51 0 0 1 .73 0 .535.535 0 0 1 0 .746L2.976 6.973h11.508c.285 0 .516.236.516.527\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/collapse-all.svg":
/*!**************************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/collapse-all.svg ***!
  \**************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M1 3h14v1H1zM9 7h6v1H9zM5.036 6.146a.5.5 0 0 0-.708 0L1.146 9.328a.5.5 0 1 0 .708.708l2.328-2.329V14.5h1V7.707l2.328 2.329a.5.5 0 1 0 .708-.708z\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/expand-all.svg":
/*!************************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/expand-all.svg ***!
  \************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M1 3h14v1H1zM9 7h6v1H9zM4.328 14.354a.5.5 0 0 0 .708 0l3.182-3.182a.5.5 0 1 0-.708-.708l-2.328 2.329V6h-1v6.793l-2.328-2.328a.5.5 0 1 0-.708.707z\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/right.svg":
/*!*******************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/right.svg ***!
  \*******************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M4.653 13.854a.485.485 0 0 1 0-.708L10.24 8 4.653 2.854a.485.485 0 0 1 0-.708.54.54 0 0 1 .738 0l5.956 5.5a.485.485 0 0 1 0 .708l-5.956 5.5a.54.54 0 0 1-.738 0\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/editor/close.svg":
/*!**************************************************!*\
  !*** ./jimu-icons/svg/outlined/editor/close.svg ***!
  \**************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"m8.745 8 6.1 6.1a.527.527 0 1 1-.745.746L8 8.746l-6.1 6.1a.527.527 0 1 1-.746-.746l6.1-6.1-6.1-6.1a.527.527 0 0 1 .746-.746l6.1 6.1 6.1-6.1a.527.527 0 0 1 .746.746z\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/editor/trash.svg":
/*!**************************************************!*\
  !*** ./jimu-icons/svg/outlined/editor/trash.svg ***!
  \**************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M6 6.5a.5.5 0 0 1 1 0v6a.5.5 0 0 1-1 0zM9.5 6a.5.5 0 0 0-.5.5v6a.5.5 0 0 0 1 0v-6a.5.5 0 0 0-.5-.5\"></path><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M11 0H5a1 1 0 0 0-1 1v2H.5a.5.5 0 0 0 0 1h1.6l.81 11.1a1 1 0 0 0 .995.9h8.19a1 1 0 0 0 .995-.9L13.9 4h1.6a.5.5 0 0 0 0-1H12V1a1 1 0 0 0-1-1m0 3V1H5v2zm1.895 1h-9.79l.8 11h8.19z\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/suggested/error.svg":
/*!*****************************************************!*\
  !*** ./jimu-icons/svg/outlined/suggested/error.svg ***!
  \*****************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16m0-1A7 7 0 1 0 8 1a7 7 0 0 0 0 14M8 4a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 4m1 7a1 1 0 1 1-2 0 1 1 0 0 1 2 0\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/suggested/info.svg":
/*!****************************************************!*\
  !*** ./jimu-icons/svg/outlined/suggested/info.svg ***!
  \****************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M8 5.5a1 1 0 1 0 0-2 1 1 0 0 0 0 2M6.5 7.5A.5.5 0 0 1 7 7h1.5v4.5h1a.5.5 0 0 1 0 1h-3a.5.5 0 0 1 0-1h1V8H7a.5.5 0 0 1-.5-.5\"></path><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16m0-1A7 7 0 1 0 8 1a7 7 0 0 0 0 14\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/suggested/warning.svg":
/*!*******************************************************!*\
  !*** ./jimu-icons/svg/outlined/suggested/warning.svg ***!
  \*******************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M8 2.125 14.334 14H1.667zm-.882-.47a1 1 0 0 1 1.765 0l6.333 11.874A1 1 0 0 1 14.334 15H1.667a1 1 0 0 1-.882-1.47zM8 4.874a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0L8.9 5.87a.905.905 0 0 0-.9-.995m1 7a1 1 0 1 1-2 0 1 1 0 0 1 2 0\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./your-extensions/widgets/query-simple/icon.svg":
/*!*******************************************************!*\
  !*** ./your-extensions/widgets/query-simple/icon.svg ***!
  \*******************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 20 20\"><path fill=\"#000\" d=\"M8.5 3A5.5 5.5 0 0 1 14 8.5a5.5 5.5 0 0 1-1.273 3.527l4.053 4.054a.75.75 0 1 1-1.06 1.06l-4.054-4.053a5.5 5.5 0 0 1-3.527 1.273 5.5 5.5 0 1 1 0-11H8.5zm0 1.5h-.361a4 4 0 1 0 0 8 4 4 0 0 0 0-8z\"></path><rect width=\"19\" height=\"19\" x=\".5\" y=\".5\" stroke=\"#000\" rx=\"1.5\"></rect></svg>"

/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/config.ts":
/*!************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/config.ts ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CreateToolType: () => (/* binding */ CreateToolType),
/* harmony export */   FieldsType: () => (/* binding */ FieldsType),
/* harmony export */   ListDirection: () => (/* binding */ ListDirection),
/* harmony export */   PagingType: () => (/* binding */ PagingType),
/* harmony export */   QueryArrangeType: () => (/* binding */ QueryArrangeType),
/* harmony export */   ResultSelectMode: () => (/* binding */ ResultSelectMode),
/* harmony export */   SelectionType: () => (/* binding */ SelectionType),
/* harmony export */   SortDirection: () => (/* binding */ SortDirection),
/* harmony export */   SpatialFilterType: () => (/* binding */ SpatialFilterType),
/* harmony export */   SpatialRelation: () => (/* binding */ SpatialRelation),
/* harmony export */   SymbolType: () => (/* binding */ SymbolType),
/* harmony export */   UnitType: () => (/* binding */ UnitType),
/* harmony export */   mapJSAPISpatialRelToDsSpatialRel: () => (/* binding */ mapJSAPISpatialRelToDsSpatialRel),
/* harmony export */   mapJSAPIUnitToDsUnit: () => (/* binding */ mapJSAPIUnitToDsUnit)
/* harmony export */ });
var CreateToolType;
(function (CreateToolType) {
    CreateToolType["Point"] = "Point";
    CreateToolType["Polyline"] = "Polyline";
    CreateToolType["Polygon"] = "Polygon";
    CreateToolType["Rectangle"] = "Rectangle";
    CreateToolType["Circle"] = "Circle";
})(CreateToolType || (CreateToolType = {}));
var SelectionType;
(function (SelectionType) {
    SelectionType["NewSelection"] = "NEW_SELECTION";
    SelectionType["AddToSelection"] = "ADD_TO_CURRENT_SELECTION";
    SelectionType["RemoveFromSelection"] = "REMOVE_FROM_CURRENT_SELECTION";
    SelectionType["SubsetSelection"] = "SUBSET_FROM_CURRENT_SELECTION";
    SelectionType["SwitchSelection"] = "SWITCH_CURRENT_SELECTION";
})(SelectionType || (SelectionType = {}));
var QueryArrangeType;
(function (QueryArrangeType) {
    QueryArrangeType["Block"] = "BLOCK";
    QueryArrangeType["Inline"] = "INLINE";
    QueryArrangeType["Popper"] = "POPPER";
})(QueryArrangeType || (QueryArrangeType = {}));
var SpatialFilterType;
(function (SpatialFilterType) {
    SpatialFilterType["CurrentMapExtent"] = "CurrentMapExtent";
    SpatialFilterType["InteractiveDrawMode"] = "InteractiveDrawMode";
    SpatialFilterType["None"] = "";
})(SpatialFilterType || (SpatialFilterType = {}));
var SpatialRelation;
(function (SpatialRelation) {
    SpatialRelation["Intersect"] = "intersects";
    SpatialRelation["Contain"] = "contains";
    SpatialRelation["Cross"] = "crosses";
    SpatialRelation["EnvelopeIntersect"] = "envelope-intersects";
    SpatialRelation["IndexIntersect"] = "index-intersects";
    SpatialRelation["Overlap"] = "overlaps";
    SpatialRelation["Touch"] = "touches";
    SpatialRelation["Within"] = "within";
})(SpatialRelation || (SpatialRelation = {}));
const mapJSAPISpatialRelToDsSpatialRel = {
    [SpatialRelation.Intersect]: 'esriSpatialRelIntersects',
    [SpatialRelation.Contain]: 'esriSpatialRelContains',
    [SpatialRelation.Cross]: 'esriSpatialRelCrosses',
    [SpatialRelation.EnvelopeIntersect]: 'esriSpatialRelEnvelopeIntersects',
    [SpatialRelation.IndexIntersect]: 'esriSpatialRelIndexIntersects',
    [SpatialRelation.Overlap]: 'esriSpatialRelOverlaps',
    [SpatialRelation.Touch]: 'esriSpatialRelTouches',
    [SpatialRelation.Within]: 'esriSpatialRelWithin'
};
var UnitType;
(function (UnitType) {
    UnitType["Miles"] = "Miles";
    UnitType["Kilometers"] = "Kilometers";
    UnitType["Feet"] = "Feet";
    UnitType["Meters"] = "Meters";
    UnitType["NauticalMiles"] = "NauticalMiles";
})(UnitType || (UnitType = {}));
const mapJSAPIUnitToDsUnit = {
    [UnitType.Miles]: 'esriSRUnit_StatuteMile',
    [UnitType.Kilometers]: 'esriSRUnit_Kilometer',
    [UnitType.Feet]: 'esriSRUnit_Foot',
    [UnitType.Meters]: 'esriSRUnit_Meter',
    [UnitType.NauticalMiles]: 'esriSRUnit_NauticalMile'
};
var ListDirection;
(function (ListDirection) {
    ListDirection["Horizontal"] = "Horizontal";
    ListDirection["Vertical"] = "Vertical";
})(ListDirection || (ListDirection = {}));
var PagingType;
(function (PagingType) {
    PagingType["MultiPage"] = "MultiPage";
    PagingType["LazyLoad"] = "LazyLoad";
    PagingType["Simple"] = "Simple";
})(PagingType || (PagingType = {}));
var FieldsType;
(function (FieldsType) {
    FieldsType["PopupSetting"] = "PopupSetting";
    FieldsType["SelectAttributes"] = "SelectAttributes";
})(FieldsType || (FieldsType = {}));
var SortDirection;
(function (SortDirection) {
    SortDirection["Asc"] = "Asc";
    SortDirection["Desc"] = "Desc";
})(SortDirection || (SortDirection = {}));
var ResultSelectMode;
(function (ResultSelectMode) {
    ResultSelectMode["Single"] = "Single";
    ResultSelectMode["Multiple"] = "Multiple";
})(ResultSelectMode || (ResultSelectMode = {}));
var SymbolType;
(function (SymbolType) {
    SymbolType["DefaultSymbol"] = "DefaultSymbol";
    SymbolType["CustomSymbol"] = "CustomSymbol";
})(SymbolType || (SymbolType = {}));


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/data-actions/add-to-map-action.tsx":
/*!*************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/data-actions/add-to-map-action.tsx ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createAddToMapAction: () => (/* binding */ createAddToMapAction)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _runtime_selection_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../runtime/selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/**
 * Custom "Add to Map" data action for QuerySimple widget.
 *
 * This action replaces the framework's "Show on Map" action with a custom
 * implementation that uses QuerySimple's selection process (selectRecordsAndPublish).
 * This ensures consistent behavior with query results and proper integration
 * with the widget's "Clear results" functionality.
 */
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_2__.createQuerySimpleDebugLogger)();
/**
 * Creates a custom "Add to Map" data action that uses QuerySimple's selection process.
 *
 * This action replaces the framework's "Show on Map" action and ensures consistent
 * behavior with QuerySimple's query results by using the same selection mechanism.
 *
 * @param widgetId - The widget ID that provides this action
 * @param outputDS - The output data source (used for selection on the origin layer)
 * @param intl - The Intl object for internationalization
 * @param queryItem - Optional query item configuration (for zoomToSelected setting)
 * @param runtimeZoomToSelected - Optional runtime zoom override from the query form
 * @returns A DataAction object that can be used by DataActionList
 */
function createAddToMapAction(widgetId, outputDS, intl, queryItem, runtimeZoomToSelected) {
    return {
        id: `${widgetId}-addToMap`,
        name: 'addToMap',
        label: intl.formatMessage({ id: 'addToMap', defaultMessage: 'Add to map' }),
        // Icon matches the framework's "Show on Map" action for consistency
        icon: (__webpack_require__(/*! ../runtime/assets/icons/show-on-map.svg */ "./your-extensions/widgets/query-simple/src/runtime/assets/icons/show-on-map.svg")["default"]) || __webpack_require__(/*! ../runtime/assets/icons/show-on-map.svg */ "./your-extensions/widgets/query-simple/src/runtime/assets/icons/show-on-map.svg"),
        // Note: Index may not control position if extraActions are always appended after framework actions
        index: -100,
        widgetId,
        intl,
        supportProviderWidget: true,
        /**
         * Determines if this action can process the given data sets.
         * Supports Records level actions with feature data records.
         */
        isSupported: (dataSets, dataLevel, actionWidgetId) => __awaiter(this, void 0, void 0, function* () {
            debugLogger.log('DATA-ACTION', {
                action: 'addToMap-isSupported',
                widgetId,
                actionWidgetId,
                dataLevel,
                dataSetsCount: (dataSets === null || dataSets === void 0 ? void 0 : dataSets.length) || 0,
                hasOutputDS: !!outputDS
            });
            // Only support Records level actions
            if (dataLevel !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataLevel.Records) {
                debugLogger.log('DATA-ACTION', {
                    action: 'addToMap-isSupported',
                    result: false,
                    reason: 'Not Records level'
                });
                return false;
            }
            // Need at least one data set with records
            if (!dataSets || dataSets.length === 0) {
                debugLogger.log('DATA-ACTION', {
                    action: 'addToMap-isSupported',
                    result: false,
                    reason: 'No data sets'
                });
                return false;
            }
            // Check if we have records and output data source
            const hasRecords = dataSets.some(ds => ds.records && ds.records.length > 0);
            const supported = hasRecords && !!outputDS;
            debugLogger.log('DATA-ACTION', {
                action: 'addToMap-isSupported',
                result: supported,
                hasRecords,
                recordsCount: dataSets.reduce((sum, ds) => { var _a; return sum + (((_a = ds.records) === null || _a === void 0 ? void 0 : _a.length) || 0); }, 0)
            });
            return supported;
        }),
        /**
         * Executes the action by selecting records using QuerySimple's selection process.
         */
        onExecute: (dataSets, dataLevel, actionWidgetId) => __awaiter(this, void 0, void 0, function* () {
            debugLogger.log('DATA-ACTION', {
                action: 'addToMap-onExecute',
                widgetId,
                actionWidgetId,
                dataLevel,
                dataSetsCount: (dataSets === null || dataSets === void 0 ? void 0 : dataSets.length) || 0,
                hasOutputDS: !!outputDS
            });
            if (!outputDS || dataLevel !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataLevel.Records) {
                debugLogger.log('DATA-ACTION', {
                    action: 'addToMap-onExecute',
                    result: false,
                    reason: !outputDS ? 'No outputDS' : 'Not Records level'
                });
                return false;
            }
            // Collect all records from all data sets
            const allRecords = [];
            dataSets.forEach(dataSet => {
                if (dataSet.records && dataSet.records.length > 0) {
                    // Filter to only FeatureDataRecord types
                    const featureRecords = dataSet.records.filter((record) => {
                        return record && typeof record.getGeometry === 'function';
                    });
                    allRecords.push(...featureRecords);
                }
            });
            if (allRecords.length === 0) {
                debugLogger.log('DATA-ACTION', {
                    action: 'addToMap-onExecute',
                    result: false,
                    reason: 'No feature records found'
                });
                return false;
            }
            // Get record IDs
            const recordIds = allRecords.map(record => record.getId());
            debugLogger.log('DATA-ACTION', {
                action: 'addToMap-onExecute',
                recordsCount: allRecords.length,
                recordIds: recordIds.slice(0, 10), // Log first 10 IDs
                outputDSId: outputDS.id
            });
            // Use QuerySimple's selection process - selects on origin layer and publishes selection messages
            // This ensures consistent behavior with query results and proper integration with "Clear results"
            try {
                (0,_runtime_selection_utils__WEBPACK_IMPORTED_MODULE_1__.selectRecordsAndPublish)(widgetId, outputDS, recordIds, allRecords, true);
                // Determine zoom behavior: runtime override takes precedence, then queryItem config, defaults to true
                const shouldZoom = runtimeZoomToSelected !== undefined
                    ? runtimeZoomToSelected
                    : ((queryItem === null || queryItem === void 0 ? void 0 : queryItem.zoomToSelected) !== false);
                if (shouldZoom && allRecords.length > 0) {
                    const zoomDataSet = {
                        dataSource: outputDS,
                        records: allRecords,
                        name: outputDS.getLabel()
                    };
                    // Find and execute the zoomToFeature action from available framework actions
                    jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataActionManager.getInstance().getSupportedActions(widgetId, [zoomDataSet], jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataLevel.Records)
                        .then(actionCategories => {
                        // Search through all action categories to find zoomToFeature action
                        let zoomAction = null;
                        for (const category in actionCategories) {
                            const actions = actionCategories[category];
                            zoomAction = actions.find((action) => action.name === 'zoomToFeature' || action.id === 'zoomToFeature') || null;
                            if (zoomAction)
                                break;
                        }
                        if (zoomAction) {
                            return jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataActionManager.getInstance().executeDataAction(zoomAction, [zoomDataSet], jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataLevel.Records, widgetId);
                        }
                    })
                        .catch(error => {
                        debugLogger.log('DATA-ACTION', {
                            action: 'addToMap-onExecute-zoom',
                            error: error instanceof Error ? error.message : String(error)
                        });
                    });
                }
                debugLogger.log('DATA-ACTION', {
                    action: 'addToMap-onExecute',
                    result: true,
                    message: 'Successfully selected records and published selection message',
                    zoomExecuted: shouldZoom
                });
                return true;
            }
            catch (error) {
                debugLogger.log('DATA-ACTION', {
                    action: 'addToMap-onExecute',
                    result: false,
                    error: error instanceof Error ? error.message : String(error),
                    errorStack: error instanceof Error ? error.stack : undefined
                });
                return false;
            }
        }),
        /**
         * Cleanup method (required by DataAction interface)
         */
        destroy: () => {
            // No cleanup needed
        }
    };
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/data-actions/index.tsx":
/*!*************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/data-actions/index.tsx ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getExtraActions: () => (/* binding */ getExtraActions)
/* harmony export */ });
/* harmony import */ var _add_to_map_action__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./add-to-map-action */ "./your-extensions/widgets/query-simple/src/data-actions/add-to-map-action.tsx");

/**
 * QuerySimple Custom Data Actions
 *
 * Returns custom data actions for the widget.
 * Includes a custom "Add to Map" action that uses QuerySimple's selection process.
 *
 * @param widgetId - The widget ID
 * @param outputDS - The output data source (null/undefined if not available)
 * @param intl - The Intl object for internationalization
 * @param queryItem - Optional query item configuration
 * @param runtimeZoomToSelected - Optional runtime zoom override from the query form
 * @returns Array of custom DataAction objects (empty if conditions not met)
 */
function getExtraActions(widgetId, outputDS, intl, queryItem, runtimeZoomToSelected) {
    // Only create the action if we have both an output data source and intl object
    if (outputDS && intl) {
        return [(0,_add_to_map_action__WEBPACK_IMPORTED_MODULE_0__.createAddToMapAction)(widgetId, outputDS, intl, queryItem, runtimeZoomToSelected)];
    }
    return [];
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/default-query-item.ts":
/*!************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/default-query-item.ts ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DEFAULT_QUERY_ITEM: () => (/* binding */ DEFAULT_QUERY_ITEM)
/* harmony export */ });
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./config */ "./your-extensions/widgets/query-simple/src/config.ts");

const DEFAULT_QUERY_ITEM = {
    icon: null,
    displayLabel: true,
    sqlExprObj: null,
    useAttributeFilter: true,
    useSpatialFilter: true,
    spatialMapWidgetIds: [],
    spatialFilterTypes: [],
    spatialInteractiveCreateToolTypes: [
        _config__WEBPACK_IMPORTED_MODULE_0__.CreateToolType.Point,
        _config__WEBPACK_IMPORTED_MODULE_0__.CreateToolType.Polyline,
        _config__WEBPACK_IMPORTED_MODULE_0__.CreateToolType.Polygon,
        _config__WEBPACK_IMPORTED_MODULE_0__.CreateToolType.Rectangle,
        _config__WEBPACK_IMPORTED_MODULE_0__.CreateToolType.Circle
    ],
    spatialInteractiveEnableBuffer: false,
    spatialInteractiveBufferDistance: 0,
    spatialInteractiveBufferUnit: _config__WEBPACK_IMPORTED_MODULE_0__.UnitType.Meters,
    spatialRelations: [_config__WEBPACK_IMPORTED_MODULE_0__.SpatialRelation.Intersect],
    spatialRelationUseDataSources: [],
    spatialRelationEnableSelectTool: false,
    spatialRelationEnableBuffer: false,
    spatialRelationBufferDistance: 0,
    spatialRelationBufferUnit: _config__WEBPACK_IMPORTED_MODULE_0__.UnitType.Meters,
    resultListDirection: _config__WEBPACK_IMPORTED_MODULE_0__.ListDirection.Vertical,
    resultPagingStyle: _config__WEBPACK_IMPORTED_MODULE_0__.PagingType.MultiPage,
    resultFieldsType: _config__WEBPACK_IMPORTED_MODULE_0__.FieldsType.PopupSetting,
    resultSymbolType: _config__WEBPACK_IMPORTED_MODULE_0__.SymbolType.DefaultSymbol,
    resultCustomSymbol: {
        angle: 0,
        color: [255, 255, 255, 255],
        outline: {
            color: [255, 255, 255, 255],
            style: 'esriSLSSolid',
            type: 'esriSLS',
            width: 1
        },
        size: 6,
        style: 'esriSMSCircle',
        type: 'esriSMS',
        xoffset: 0,
        yoffset: 0
    },
    resultAllowChangeSymbol: false,
    allowExport: false,
    sortOptions: [],
    zoomToSelected: true,
    itemSizeMap: {
        arrangementHorizontalPopper: {
            minSize: { width: 300, height: 300 },
            defaultSize: { width: 360, height: 480 }
        }
    }
};


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/assets/icons/show-on-map.svg":
/*!***************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/assets/icons/show-on-map.svg ***!
  \***************************************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M1 1v14h14V1zm9.082 13c-.005-.037-.113-.274-.122-.309a1.5 1.5 0 0 0 .718-1.267 1.2 1.2 0 0 0-.053-.358c.152-.176.263-.383.326-.607q.046.003.093.003c.3.002.593-.091.836-.266q.06.066.126.124c.42.412.977.654 1.564.68H14v2h-3.918M14 11h-.43a1.46 1.46 0 0 1-.906-.433c-.264-.23-.258-.782-.617-.782-.482 0-.52.677-1.003.677-.219 0-.38-.177-.599-.177-.193 0-.445.102-.445.293v.502c0 .424-.506.508-.506.934 0 .171.184.236.184.41 0 .58-.893.502-.893 1.08 0 .191.215.305.215.486V14H6.375q.087-.243.09-.502c0-.547-1.043-.393-1.207-.72-.407-.813.693-1.022.693-1.673 0-.16-.082-.488-.334-.513-.351-.035-.443.154-.797.154a.406.406 0 0 1-.437-.36c0-.386.308-.566.308-.952 0-.25-.102-.393-.102-.643a.62.62 0 0 1 .59-.643c.323 0 .464.264.618.54a.64.64 0 0 0 .617.308c.49 0 .798-.61.798-.977a.47.47 0 0 1 .437-.488c.347 0 .476.36.824.36.57 0 .55-.756 1.053-1.03.618-.332.438-1.052.36-1.44-.032-.169.29-.5.464-.487.72.05.412-.54.412-.823q0-.073.022-.142c.111-.332.595-.438.595-.836 0-.281-.233-.41-.233-.693a.65.65 0 0 1 .22-.44H14zM2 14V2h8.278c-.013.077-.132.356-.132.44 0 .194.038.387.112.567a1.6 1.6 0 0 0-.422.643 1.4 1.4 0 0 0-.074.442 1.7 1.7 0 0 0-.536.43 1.32 1.32 0 0 0-.32 1.091q.046.205.066.414a2 2 0 0 0-.649.67 1.46 1.46 0 0 0-.674-.166 1.45 1.45 0 0 0-1.383 1.086 1.44 1.44 0 0 0-1.086-.469 1.62 1.62 0 0 0-1.591 1.643c0 .254.113.293.084.574s-.29.535-.29 1.022a1.37 1.37 0 0 0 .984 1.29 1.58 1.58 0 0 0-.003 1.549c.143.286.636.774.534.774z\"></path></svg>"

/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/buffer-input.tsx":
/*!***************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/buffer-input.tsx ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BufferInput: () => (/* binding */ BufferInput)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _query_task_context__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./query-task-context */ "./your-extensions/widgets/query-simple/src/runtime/query-task-context.tsx");

/** @jsx jsx */





function BufferInput(props) {
    const { distance = 0, unit = _config__WEBPACK_IMPORTED_MODULE_3__.UnitType.Meters, onBufferChange } = props;
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.defaultMessages, _translations_default__WEBPACK_IMPORTED_MODULE_4__["default"]);
    const [d, setD] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(distance);
    const [u, setU] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(unit);
    const queryTaskContext = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useContext(_query_task_context__WEBPACK_IMPORTED_MODULE_5__.QueryTaskContext);
    const resetSymbolRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(queryTaskContext.resetSymbol);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        let changed = false;
        if (distance !== d) {
            setD(distance);
            changed = true;
        }
        if (unit !== u) {
            setU(unit);
            changed = true;
        }
        if (changed) {
            onBufferChange(distance, unit);
        }
        // eslint-disable-next-line react-hooks/exhaustive-deps
    }, [distance, unit]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (queryTaskContext.resetSymbol && queryTaskContext.resetSymbol !== resetSymbolRef.current) {
            resetSymbolRef.current = queryTaskContext.resetSymbol;
            setD(distance);
            setU(unit);
            onBufferChange(distance, unit);
        }
    }, [queryTaskContext.resetSymbol, distance, unit, onBufferChange]);
    const handleDistanceChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((value) => {
        setD(value);
    }, []);
    const handleDistanceAccepted = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((value) => {
        setD(value);
        onBufferChange(value, u);
    }, [onBufferChange, u]);
    const handleBufferUnitChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((e) => {
        setU(e.target.value);
        onBufferChange(d, e.target.value);
    }, [onBufferChange, d]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.NumericInput, { "aria-label": getI18nMessage('theBufferDistance'), className: 'mr-1', value: d, onChange: handleDistanceChange, onAcceptValue: handleDistanceAccepted }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Select, { "aria-label": getI18nMessage('unit'), value: u, onChange: handleBufferUnitChange, children: Object.values(_config__WEBPACK_IMPORTED_MODULE_3__.UnitType).map((value) => ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: value, children: getI18nMessage(`unit_${value}`) }, value))) })] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/components/feature-info.tsx":
/*!**************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/components/feature-info.tsx ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   LoadStatus: () => (/* binding */ LoadStatus),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_icons_filled_directional_right__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-icons/filled/directional/right */ "./jimu-icons/filled/directional/right.tsx");
/* harmony import */ var jimu_icons_filled_directional_down__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jimu-icons/filled/directional/down */ "./jimu-icons/filled/directional/down.tsx");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");

/** @jsx jsx */
// This file is duplicated from '../../../../feature-info/src/runtime/components/feature-info'






const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_6__.createQuerySimpleDebugLogger)();
var LoadStatus;
(function (LoadStatus) {
    LoadStatus["Pending"] = "Pending";
    LoadStatus["Fulfilled"] = "Fulfilled";
    LoadStatus["Rejected"] = "Rejected";
})(LoadStatus || (LoadStatus = {}));
const style = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
  border: 1px solid var(--sys-color-divider-secondary);
  .esri-widget__heading {
    font-size: 0.875rem !important;
    font-weight: 500 !important;
    margin: 0;
    color: var(--sys-color-surface-paper-text);
  }

  .esri-feature__content-element {
    padding: 0;
  }

  .jimu-btn.expanded {
    align-self: flex-start;
  }
  
  // Larger expand/collapse button for better touch targets
  .jimu-btn[aria-label*="expand"],
  .jimu-btn[aria-label*="collapse"] {
    min-width: 32px;
    min-height: 32px;
    padding: 6px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .esri-feature.esri-widget {
    background-color: transparent;
  }
`;
class FeatureInfo extends jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.PureComponent {
    constructor(props) {
        var _a, _b, _c, _d;
        super(props);
        this.toggleExpanded = (e) => {
            e.stopPropagation();
            this.setState({ showContent: !this.state.showContent });
        };
        const { togglable = false, expandByDefault } = this.props;
        const recordId = ((_b = (_a = this.props.graphic) === null || _a === void 0 ? void 0 : _a.attributes) === null || _b === void 0 ? void 0 : _b.OBJECTID) || ((_d = (_c = this.props.graphic) === null || _c === void 0 ? void 0 : _c.attributes) === null || _d === void 0 ? void 0 : _d.objectid) || 'unknown';
        const initialShowContent = !togglable || expandByDefault;
        debugLogger.log('EXPAND-COLLAPSE', {
            event: 'FeatureInfo-constructor',
            recordId,
            togglable,
            expandByDefault,
            initialShowContent,
            timestamp: Date.now()
        });
        this.featureContainer = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.createRef();
        this.state = {
            showContent: initialShowContent,
            loadStatus: LoadStatus.Pending
        };
    }
    componentDidMount() {
        this.createFeature();
    }
    componentDidUpdate(prevProps) {
        var _a, _b, _c, _d, _e, _f, _g, _h;
        if (this.feature) {
            if (prevProps.popupTemplate !== this.props.popupTemplate ||
                prevProps.defaultPopupTemplate !== this.props.defaultPopupTemplate ||
                prevProps.graphic !== this.props.graphic) {
                this.destroyFeature();
                this.createFeature();
            }
            else {
                this.feature.visibleElements = this.getVisibleElements();
            }
        }
        // Sync expandByDefault prop changes (when user clicks Expand All/Collapse All)
        // This ensures all items respect the global expand/collapse state
        if (prevProps.expandByDefault !== this.props.expandByDefault) {
            const { togglable = false, expandByDefault } = this.props;
            const recordId = ((_b = (_a = this.props.graphic) === null || _a === void 0 ? void 0 : _a.attributes) === null || _b === void 0 ? void 0 : _b.OBJECTID) || ((_d = (_c = this.props.graphic) === null || _c === void 0 ? void 0 : _c.attributes) === null || _d === void 0 ? void 0 : _d.objectid) || 'unknown';
            debugLogger.log('EXPAND-COLLAPSE', {
                event: 'expandByDefault-prop-changed',
                recordId,
                prevExpandByDefault: prevProps.expandByDefault,
                newExpandByDefault: expandByDefault,
                togglable,
                currentShowContent: this.state.showContent,
                willUpdateState: togglable,
                timestamp: Date.now()
            });
            if (togglable) {
                this.setState({ showContent: expandByDefault }, () => {
                    debugLogger.log('EXPAND-COLLAPSE', {
                        event: 'FeatureInfo-state-updated',
                        recordId,
                        newShowContent: this.state.showContent,
                        timestamp: Date.now()
                    });
                });
            }
        }
        // Log all componentDidUpdate calls to track remounts
        const recordId = ((_f = (_e = this.props.graphic) === null || _e === void 0 ? void 0 : _e.attributes) === null || _f === void 0 ? void 0 : _f.OBJECTID) || ((_h = (_g = this.props.graphic) === null || _g === void 0 ? void 0 : _g.attributes) === null || _h === void 0 ? void 0 : _h.objectid) || 'unknown';
        if (prevProps.graphic !== this.props.graphic ||
            prevProps.popupTemplate !== this.props.popupTemplate ||
            prevProps.defaultPopupTemplate !== this.props.defaultPopupTemplate) {
            debugLogger.log('EXPAND-COLLAPSE', {
                event: 'FeatureInfo-props-changed-recreate',
                recordId,
                graphicChanged: prevProps.graphic !== this.props.graphic,
                popupTemplateChanged: prevProps.popupTemplate !== this.props.popupTemplate,
                defaultPopupTemplateChanged: prevProps.defaultPopupTemplate !== this.props.defaultPopupTemplate,
                expandByDefault: this.props.expandByDefault,
                currentShowContent: this.state.showContent,
                timestamp: Date.now()
            });
        }
    }
    destroyFeature() {
        this.feature && !this.feature.destroyed && this.feature.destroy();
    }
    getVisibleElements() {
        const { togglable = false } = this.props;
        const { showContent } = this.state;
        const expanded = togglable ? showContent : true;
        return {
            title: true,
            content: {
                fields: expanded,
                text: expanded,
                media: expanded,
                attachments: expanded
            },
            lastEditedInfo: false
        };
    }
    createFeature() {
        let featureModulePromise;
        if (this.Feature) {
            featureModulePromise = Promise.resolve();
        }
        else {
            featureModulePromise = (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.loadArcGISJSAPIModules)([
                'esri/widgets/Feature'
            ]).then(modules => {
                [
                    this.Feature
                ] = modules;
            });
        }
        return featureModulePromise.then(() => {
            var _a, _b, _c, _d;
            // Check if component is still mounted before trying to append
            // This prevents errors when component unmounts during async module loading
            if (!this.featureContainer.current) {
                // Component was unmounted, abort
                return;
            }
            const container = document && document.createElement('div');
            container.className = 'jimu-widget';
            this.featureContainer.current.appendChild(container);
            const originDS = this.props.dataSource.getOriginDataSources();
            const rootDataSource = (_a = originDS === null || originDS === void 0 ? void 0 : originDS[0]) === null || _a === void 0 ? void 0 : _a.getRootDataSource();
            this.destroyFeature();
            const layer = this.props.graphic.layer;
            if (this.props.popupTemplate) {
                this.props.graphic.popupTemplate = this.props.popupTemplate;
            }
            else if (layer) {
                // set popupTemplate with layer's popupTemplate or defaultPopupTemplate
                this.props.graphic.popupTemplate = (_b = layer.popupTemplate) !== null && _b !== void 0 ? _b : this.props.defaultPopupTemplate;
            }
            else {
                this.props.graphic.popupTemplate = this.props.defaultPopupTemplate;
            }
            if (layer && !layer.popupTemplate) {
                layer.popupTemplate = this.props.popupTemplate || this.props.defaultPopupTemplate;
            }
            this.feature = new this.Feature({
                container: container,
                defaultPopupTemplateEnabled: true,
                // @ts-expect-error
                spatialReference: ((_d = (_c = this.props.dataSource) === null || _c === void 0 ? void 0 : _c.layer) === null || _d === void 0 ? void 0 : _d.spatialReference) || null,
                // @ts-expect-error
                map: (rootDataSource === null || rootDataSource === void 0 ? void 0 : rootDataSource.map) || null,
                graphic: this.props.graphic,
                visibleElements: this.getVisibleElements()
            });
        }).then(() => {
            this.setState({ loadStatus: LoadStatus.Fulfilled });
        });
    }
    render() {
        const { togglable = false, intl } = this.props;
        const { showContent } = this.state;
        return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'feature-info-component d-flex align-items-center p-1', css: style, children: [togglable && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_3__.Button, { "aria-label": intl.formatMessage({ id: showContent ? 'collapse' : 'expand' }), className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-outline-inside flex-shrink-0', { expanded: showContent }), variant: 'text', color: 'inherit', icon: true, size: 'sm', onClick: this.toggleExpanded, css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              min-width: 32px;
              min-height: 32px;
              padding: 6px;
              display: flex;
              align-items: center;
              justify-content: center;
            `, children: showContent ? (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_filled_directional_down__WEBPACK_IMPORTED_MODULE_5__.DownFilled, { size: 'm' }) : (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_filled_directional_right__WEBPACK_IMPORTED_MODULE_4__.RightFilled, { size: 'm', autoFlip: true }) })), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'flex-grow-1', ref: this.featureContainer })] }));
    }
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.injectIntl)(FeatureInfo));


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/geometry-from-draw.tsx":
/*!*********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/geometry-from-draw.tsx ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GeometryFromDraw: () => (/* binding */ GeometryFromDraw)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _interactive_draw_tool__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./interactive-draw-tool */ "./your-extensions/widgets/query-simple/src/runtime/interactive-draw-tool.tsx");
/* harmony import */ var _buffer_input__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./buffer-input */ "./your-extensions/widgets/query-simple/src/runtime/buffer-input.tsx");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _query_task_context__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./query-task-context */ "./your-extensions/widgets/query-simple/src/runtime/query-task-context.tsx");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};

/** @jsx jsx */







function GeometryFromDraw(props) {
    const { onGeometryChange, createToolTypes, mapWidgetIds, enableBuffer, bufferDistance, bufferUnit, onBufferChange, widgetId } = props;
    const [jimuMapView, setJimuMapView] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(jimu_ui__WEBPACK_IMPORTED_MODULE_3__.defaultMessages, _translations_default__WEBPACK_IMPORTED_MODULE_6__["default"]);
    const queryTaskContext = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useContext(_query_task_context__WEBPACK_IMPORTED_MODULE_7__.QueryTaskContext);
    const resetSymbolRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(queryTaskContext.resetSymbol);
    const getLayerFunRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const bufferOperatorRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const geodesicBufferOperatorRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const geometryServiceRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const geometryRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const bufferDistanceRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(bufferDistance);
    const bufferUnitRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(bufferUnit);
    const bufferedGraphicRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        if (enableBuffer) {
            // Parent component query-task-spatial-form will reset buffer parameter when filter type changes,
            // so defer the init buffer option in order not to be override by its parent.
            jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.defer(() => {
                onBufferChange(bufferDistance, bufferUnit);
            });
        }
        (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.loadArcGISJSAPIModules)([
            'esri/Graphic'
        ]).then((modules) => {
            const Graphic = modules[0];
            bufferedGraphicRef.current = new Graphic({
                symbol: {
                    type: 'simple-fill',
                    color: [51, 51, 204, 0.5],
                    style: 'solid',
                    outline: {
                        color: [51, 51, 204, 0.8],
                        width: 1
                    }
                }
            });
        });
    });
    const applyBufferEffect = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => __awaiter(this, void 0, void 0, function* () {
        var _a, _b, _c, _d, _e, _f;
        if (!geometryRef.current || !enableBuffer || bufferDistanceRef.current === 0) {
            bufferedGraphicRef.current.geometry = null;
            return;
        }
        // If the end user uses a point or line query geometry, then the negative buffer will not work (same effect as there is no buffer)
        const isPointNegativeBuffer = (((_a = geometryRef.current) === null || _a === void 0 ? void 0 : _a.type) === 'point' || ((_b = geometryRef.current) === null || _b === void 0 ? void 0 : _b.type) === 'multipoint') && bufferDistanceRef.current < 0;
        const isLineNegativeBuffer = ((_c = geometryRef.current) === null || _c === void 0 ? void 0 : _c.type) === 'polyline' && bufferDistanceRef.current < 0;
        if (isPointNegativeBuffer || isLineNegativeBuffer) {
            bufferedGraphicRef.current.geometry = null;
            return;
        }
        const geometry = geometryRef.current;
        // https://developers.arcgis.com/javascript/latest/api-reference/esri-geometry-geometryEngine.html#buffer
        if (((_d = geometry.spatialReference) === null || _d === void 0 ? void 0 : _d.isGeographic) && !geometry.spatialReference.isWGS84) {
            const serviceUrl = jimu_core__WEBPACK_IMPORTED_MODULE_1__.utils.getGeometryService();
            if (!geometryServiceRef.current) {
                const modules = yield (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.loadArcGISJSAPIModules)([
                    'esri/rest/geometryService',
                    'esri/rest/support/BufferParameters'
                ]);
                geometryServiceRef.current = {
                    geometryService: modules[0],
                    bufferParameters: modules[1]
                };
            }
            const { geometryService, bufferParameters: BufferParameters } = geometryServiceRef.current;
            const polygons = yield geometryService.buffer(serviceUrl, new BufferParameters({
                distances: [bufferDistanceRef.current],
                unit: jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.kebabCase(bufferUnitRef.current),
                geodesic: true,
                bufferSpatialReference: geometry.spatialReference,
                outSpatialReference: geometry.spatialReference,
                geometries: [geometry]
            }));
            bufferedGraphicRef.current.geometry = polygons[0];
        }
        else {
            if (((_e = geometry.spatialReference) === null || _e === void 0 ? void 0 : _e.isWGS84) || ((_f = geometry.spatialReference) === null || _f === void 0 ? void 0 : _f.isWebMercator)) {
                if (!geodesicBufferOperatorRef.current) {
                    geodesicBufferOperatorRef.current = yield (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.loadArcGISJSAPIModule)('esri/geometry/operators/geodesicBufferOperator');
                }
                if (!geodesicBufferOperatorRef.current.isLoaded()) {
                    yield geodesicBufferOperatorRef.current.load();
                }
                bufferedGraphicRef.current.geometry = geodesicBufferOperatorRef.current.execute(geometry, bufferDistanceRef.current, {
                    unit: jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.kebabCase(bufferUnitRef.current)
                });
            }
            else {
                if (!bufferOperatorRef.current) {
                    bufferOperatorRef.current = yield (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.loadArcGISJSAPIModule)('esri/geometry/operators/bufferOperator');
                }
                bufferedGraphicRef.current.geometry = bufferOperatorRef.current.execute(geometry, bufferDistanceRef.current, {
                    unit: jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.kebabCase(bufferUnitRef.current)
                });
            }
        }
    }), [enableBuffer]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (queryTaskContext.resetSymbol && queryTaskContext.resetSymbol !== resetSymbolRef.current) {
            resetSymbolRef.current = queryTaskContext.resetSymbol;
            getLayerFunRef.current && getLayerFunRef.current().removeAll();
            onGeometryChange(null);
        }
    }, [queryTaskContext.resetSymbol, onGeometryChange]);
    const handleJimuMapViewChanged = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((jimuMapView) => {
        // clear drawing graphics before switching map view
        const layer = getLayerFunRef.current && getLayerFunRef.current();
        if (layer) {
            layer.removeAll();
            onGeometryChange(null);
        }
        setJimuMapView((jimuMapView === null || jimuMapView === void 0 ? void 0 : jimuMapView.view) != null ? jimuMapView : null);
    }, [onGeometryChange]);
    const handleBufferChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((distance, unit) => {
        bufferDistanceRef.current = distance;
        bufferUnitRef.current = unit;
        applyBufferEffect();
        onBufferChange(distance, unit);
    }, [onBufferChange, applyBufferEffect]);
    const handleDrawEnd = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((graphic, getLayerFun, clearAfterApply) => {
        getLayerFunRef.current = getLayerFun;
        const layer = getLayerFunRef.current && getLayerFunRef.current();
        // it's possible that the geometry is the same as the previous one, only the clearAfterApply is changed.
        if (geometryRef.current !== (graphic === null || graphic === void 0 ? void 0 : graphic.geometry)) {
            geometryRef.current = graphic === null || graphic === void 0 ? void 0 : graphic.geometry;
            applyBufferEffect().then(() => {
                if (bufferedGraphicRef.current.geometry) {
                    layer === null || layer === void 0 ? void 0 : layer.add(bufferedGraphicRef.current);
                }
            });
        }
        onGeometryChange(graphic === null || graphic === void 0 ? void 0 : graphic.geometry, layer, graphic, clearAfterApply);
    }, [onGeometryChange, applyBufferEffect]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [mapWidgetIds === null || mapWidgetIds === void 0 ? void 0 : mapWidgetIds.map((mapWidgetId, x) => ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.JimuMapViewComponent, { useMapWidgetId: mapWidgetId, onActiveViewChange: handleJimuMapViewChanged }, x))), (jimuMapView === null || jimuMapView === void 0 ? void 0 : jimuMapView.view) && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_interactive_draw_tool__WEBPACK_IMPORTED_MODULE_4__.InteractiveDraw, { jimuMapView: jimuMapView, widgetId: widgetId, toolTypes: createToolTypes, onDrawEnd: handleDrawEnd }), enableBuffer && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { role: 'group', className: 'title3', "aria-label": getI18nMessage('theBufferDistance'), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `margin-top: 0.75rem;`, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'text-truncate', children: getI18nMessage('theBufferDistance') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'd-flex mt-1', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_buffer_input__WEBPACK_IMPORTED_MODULE_5__.BufferInput, { distance: bufferDistance, unit: bufferUnit, onBufferChange: handleBufferChange }) })] }))] }))] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/geometry-from-ds.tsx":
/*!*******************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/geometry-from-ds.tsx ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GeometryFromDataSource: () => (/* binding */ GeometryFromDataSource)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _buffer_input__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./buffer-input */ "./your-extensions/widgets/query-simple/src/runtime/buffer-input.tsx");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _query_task_context__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./query-task-context */ "./your-extensions/widgets/query-simple/src/runtime/query-task-context.tsx");

/** @jsx jsx */






const marginStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `margin-top: 0.75rem;`;
function getRuntimeDataSource() {
    const result = {};
    let notEmpty = false;
    const dsMap = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().getDataSources();
    Object.keys(dsMap).forEach(dsId => {
        const ds = dsMap[dsId];
        // only include the ds that has geometry
        if (ds.getGeometryType() != null && !ds.isInAppConfig() && ds.getMainDataSource().id === dsId && !ds.getDataSourceJson().isOutputFromWidget) {
            result[dsId] = ds;
            notEmpty = true;
        }
    });
    return notEmpty ? result : null;
}
function GeometryFromDataSource(props) {
    var _a;
    const { onSelectionChange, useDataSources = [], useRuntimeData, spatialRelations, enableBuffer, bufferDistance, bufferUnit, onBufferChange, onRelationChange } = props;
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.defaultMessages, _translations_default__WEBPACK_IMPORTED_MODULE_5__["default"]);
    const [currentDataSource, setCurrentDataSource] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(useDataSources[0]);
    const [runtimeDataSource, setRuntimeDataSource] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState();
    const [count, setCount] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(0);
    const [currentRelation, setCurrentRelation] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(spatialRelations === null || spatialRelations === void 0 ? void 0 : spatialRelations[0]);
    const queryTaskContext = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useContext(_query_task_context__WEBPACK_IMPORTED_MODULE_6__.QueryTaskContext);
    const resetSymbolRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(queryTaskContext.resetSymbol);
    const translate = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation();
    const spatialRelationOptions = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return Object.entries(_config__WEBPACK_IMPORTED_MODULE_3__.SpatialRelation).map(([key, value]) => ({
            value,
            label: getI18nMessage(`spatialRelation_${key}`)
        }));
    }, [getI18nMessage]);
    const loadedUseDataSources = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const loaded = [];
        useDataSources.forEach((item) => {
            var _a, _b;
            if (((_b = (_a = state.dataSourcesInfo) === null || _a === void 0 ? void 0 : _a[item.mainDataSourceId]) === null || _b === void 0 ? void 0 : _b.instanceStatus) === jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.Created) {
                loaded.push(item.dataSourceId);
            }
        });
        if (loaded.length > 0) {
            return loaded.join(',');
        }
        return '';
    });
    const numOfDs = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        var _a;
        if (!useRuntimeData) {
            return 0;
        }
        return Object.keys((_a = state.dataSourcesInfo) !== null && _a !== void 0 ? _a : {}).filter(dsId => state.dataSourcesInfo[dsId].instanceStatus === jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.Created).length;
    });
    const runtimeDataSources = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        if (numOfDs > 0) {
            return getRuntimeDataSource();
        }
    }, [numOfDs]);
    const numOfRuntimeDs = Object.keys(runtimeDataSources !== null && runtimeDataSources !== void 0 ? runtimeDataSources : {}).length;
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        if ((spatialRelations === null || spatialRelations === void 0 ? void 0 : spatialRelations.length) > 0) {
            onRelationChange(spatialRelations[0]);
        }
        if (enableBuffer) {
            onBufferChange(bufferDistance, bufferUnit);
        }
    });
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (queryTaskContext.resetSymbol && queryTaskContext.resetSymbol !== resetSymbolRef.current) {
            resetSymbolRef.current = queryTaskContext.resetSymbol;
            setCurrentRelation(spatialRelations === null || spatialRelations === void 0 ? void 0 : spatialRelations[0]);
            onRelationChange(spatialRelations === null || spatialRelations === void 0 ? void 0 : spatialRelations[0]);
        }
    }, [queryTaskContext.resetSymbol, onRelationChange, spatialRelations]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (!spatialRelations) {
            setCurrentRelation(null);
        }
        else if (!spatialRelations.includes(currentRelation)) {
            setCurrentRelation(spatialRelations[0]);
            onRelationChange(spatialRelations[0]);
        }
    }, [spatialRelations, currentRelation, onRelationChange]);
    const handleDataSourceChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((dsId) => {
        const ds = useDataSources.find((item) => item.dataSourceId === dsId);
        setCurrentDataSource((0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)(ds));
        setRuntimeDataSource(null);
    }, [useDataSources]);
    const handleRuntimeDataSourceChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((dsId) => {
        const ds = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().getDataSource(dsId);
        setRuntimeDataSource(ds);
        setCurrentDataSource(null);
    }, []);
    const handleDataSourceInfoChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        var _a;
        const ds = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().getDataSource((_a = currentDataSource === null || currentDataSource === void 0 ? void 0 : currentDataSource.dataSourceId) !== null && _a !== void 0 ? _a : runtimeDataSource === null || runtimeDataSource === void 0 ? void 0 : runtimeDataSource.id);
        const records = ds === null || ds === void 0 ? void 0 : ds.getSelectedRecords();
        if ((records === null || records === void 0 ? void 0 : records.length) > 0) {
            const geometries = records.map((record) => record.getJSAPIGeometry());
            onSelectionChange(geometries);
            setCount(records.length);
        }
        else {
            onSelectionChange(null);
            setCount(0);
        }
    }, [currentDataSource === null || currentDataSource === void 0 ? void 0 : currentDataSource.dataSourceId, runtimeDataSource === null || runtimeDataSource === void 0 ? void 0 : runtimeDataSource.id, onSelectionChange]);
    const getLabelOfSpatialRelation = (relation) => {
        return spatialRelationOptions.find(item => item.value === relation).label;
    };
    const handleSpatialRelationChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(e => {
        setCurrentRelation(e.target.value);
        onRelationChange(e.target.value);
    }, [onRelationChange]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: marginStyle, className: 'title3', children: getI18nMessage('chooseFilterLayer') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Select, { "aria-label": getI18nMessage('chooseFilterLayer'), value: (_a = currentDataSource === null || currentDataSource === void 0 ? void 0 : currentDataSource.dataSourceId) !== null && _a !== void 0 ? _a : runtimeDataSource === null || runtimeDataSource === void 0 ? void 0 : runtimeDataSource.id, children: [numOfRuntimeDs > 0 && useDataSources.length > 0 && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Option, { header: true, children: getI18nMessage('preconfigured') }), useDataSources.map((item) => {
                        const ds = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().getDataSource(item.dataSourceId);
                        if (loadedUseDataSources.includes(item.dataSourceId) || (ds === null || ds === void 0 ? void 0 : ds.getLabel())) {
                            return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Option, { value: item.dataSourceId, onClick: () => { handleDataSourceChange(item.dataSourceId); }, children: ds === null || ds === void 0 ? void 0 : ds.getLabel() }, item.dataSourceId));
                        }
                        return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Option, { children: translate('loading') }, item.dataSourceId));
                    }), numOfRuntimeDs > 0 && useDataSources.length > 0 && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Option, { divider: true }), numOfRuntimeDs > 0 && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Option, { header: true, children: getI18nMessage('runtime') }), Object.keys(runtimeDataSources !== null && runtimeDataSources !== void 0 ? runtimeDataSources : {}).map(dsId => {
                        const ds = runtimeDataSources[dsId];
                        return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Option, { value: dsId, onClick: () => { handleRuntimeDataSourceChange(dsId); }, children: ds.getLabel() }, dsId));
                    })] }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'mt-1 font-italic', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `color: var(--sys-color-surface-paper-hint);`, children: getI18nMessage('selectedRecords', { num: count }) }), (spatialRelations === null || spatialRelations === void 0 ? void 0 : spatialRelations.length) > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: marginStyle, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'text-truncate title3 mb-0', children: getI18nMessage('relationship') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Select, { "aria-label": getI18nMessage('relationship'), value: currentRelation, onChange: handleSpatialRelationChange, children: spatialRelations.map((item) => {
                            return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: item, children: getLabelOfSpatialRelation(item) }, item));
                        }) })] })), enableBuffer && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { role: 'group', "aria-label": getI18nMessage('theBufferDistance'), css: marginStyle, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'title3 text-truncate', children: getI18nMessage('theBufferDistance') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'd-flex mt-1', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_buffer_input__WEBPACK_IMPORTED_MODULE_4__.BufferInput, { distance: bufferDistance, unit: bufferUnit, onBufferChange: onBufferChange }) })] })), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceComponent, { useDataSource: currentDataSource, dataSource: runtimeDataSource, onDataSourceInfoChange: handleDataSourceInfoChange }), useDataSources.map((item) => {
                // make sure the datasource is created
                return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceComponent, { useDataSource: item }, item.dataSourceId));
            })] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/geometry-from-map.tsx":
/*!********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/geometry-from-map.tsx ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GeometryFromMap: () => (/* binding */ GeometryFromMap)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");

/** @jsx jsx */


function GeometryFromMap(props) {
    const { onGeometryChange, mapWidgetIds } = props;
    const [jimuMapView, setJimuMapView] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const PolygonRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (jimuMapView === null || jimuMapView === void 0 ? void 0 : jimuMapView.view) {
            let handler;
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.loadArcGISJSAPIModule)('esri/core/reactiveUtils').then((reactiveUtils) => {
                handler = reactiveUtils.watch(() => jimuMapView.view.extent, (extent) => {
                    if (PolygonRef.current) {
                        onGeometryChange(PolygonRef.current.fromExtent(extent));
                    }
                    else {
                        (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.loadArcGISJSAPIModules)(['esri/geometry/Polygon']).then(modules => {
                            PolygonRef.current = modules[0];
                            onGeometryChange(PolygonRef.current.fromExtent(extent));
                        });
                    }
                });
                // set initial extent
                onGeometryChange(jimuMapView.view.extent);
            });
            return () => {
                if (handler) {
                    handler.remove();
                }
            };
        }
    }, [jimuMapView, onGeometryChange]);
    const handleJimuMapViewChanged = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((jimuMapView) => {
        setJimuMapView((jimuMapView === null || jimuMapView === void 0 ? void 0 : jimuMapView.view) != null ? jimuMapView : null);
    }, []);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: mapWidgetIds === null || mapWidgetIds === void 0 ? void 0 : mapWidgetIds.map((mapWidgetId, x) => ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.JimuMapViewComponent, { useMapWidgetId: mapWidgetId, onActiveViewChange: handleJimuMapViewChanged }, x))) }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/graphics-layer-utils.ts":
/*!**********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/graphics-layer-utils.ts ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   addHighlightGraphics: () => (/* binding */ addHighlightGraphics),
/* harmony export */   cleanupGraphicsLayer: () => (/* binding */ cleanupGraphicsLayer),
/* harmony export */   clearGraphicsLayer: () => (/* binding */ clearGraphicsLayer),
/* harmony export */   createOrGetGraphicsLayer: () => (/* binding */ createOrGetGraphicsLayer),
/* harmony export */   getMapViewFromDataSource: () => (/* binding */ getMapViewFromDataSource),
/* harmony export */   removeHighlightGraphics: () => (/* binding */ removeHighlightGraphics)
/* harmony export */ });
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/**
 * Utility functions for managing graphics layer highlighting in QuerySimple widget.
 * Provides highlighting that works independently of layer visibility.
 */
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};


const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__.createQuerySimpleDebugLogger)();
// Global sequence counter for graphics operations to track timing across calls
let operationSequence = 0;
/**
 * Gets the map view from a data source's origin layer.
 * Accesses the view through the FeatureLayer's view property.
 * @param outputDS - The output data source (or any data source)
 * @returns Promise resolving to MapView or SceneView, or null if not available
 */
function getMapViewFromDataSource(outputDS) {
    return __awaiter(this, void 0, void 0, function* () {
        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s;
        const seq = ++operationSequence;
        if (!outputDS) {
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'getMapViewFromDataSource-no-outputDS',
                seq,
                timestamp: Date.now()
            });
            return null;
        }
        try {
            // Get origin data source to access the layer
            const originDataSources = outputDS.getOriginDataSources();
            const originDS = originDataSources === null || originDataSources === void 0 ? void 0 : originDataSources[0];
            if (!originDS) {
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'getMapViewFromDataSource-no-originDS',
                    outputDSId: outputDS.id,
                    timestamp: Date.now()
                });
                return null;
            }
            // Access the FeatureLayer from the data source
            const layer = originDS.layer || ((_b = (_a = originDS).getLayer) === null || _b === void 0 ? void 0 : _b.call(_a));
            if (!layer) {
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'getMapViewFromDataSource-no-layer',
                    originDSId: originDS.id,
                    timestamp: Date.now()
                });
                return null;
            }
            // Log layer properties to understand structure
            const layerKeys = Object.keys(layer).filter(key => !key.startsWith('_') &&
                typeof layer[key] !== 'function').slice(0, 20); // Limit to first 20 properties
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'getMapViewFromDataSource-layer-inspection',
                originDSId: originDS.id,
                layerId: layer.id,
                layerType: layer.type || 'unknown',
                layerKeys: layerKeys,
                hasLayerMap: !!layer.map,
                hasLayerView: !!layer.view,
                hasLayerParent: !!layer.parent,
                layerMapType: layer.map ? typeof layer.map : 'none',
                timestamp: Date.now()
            });
            // Check layer.parent for map/view access (since hasLayerParent is true)
            const parent = layer.parent;
            if (parent) {
                // Log parent properties
                const parentKeys = Object.keys(parent).filter(key => !key.startsWith('_') &&
                    typeof parent[key] !== 'function').slice(0, 20);
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'getMapViewFromDataSource-layer-parent-inspection',
                    originDSId: originDS.id,
                    layerId: layer.id,
                    parentType: parent.type || 'unknown',
                    parentKeys: parentKeys,
                    hasParentMap: !!parent.map,
                    hasParentView: !!parent.view,
                    hasParentViews: !!parent.views,
                    parentViewsLength: ((_c = parent.views) === null || _c === void 0 ? void 0 : _c.length) || 0,
                    hasParentExtent: !!parent.extent,
                    timestamp: Date.now()
                });
                // Try to get view from parent
                if (parent.view) {
                    const view = parent.view;
                    debugLogger.log('GRAPHICS-LAYER', {
                        event: 'getMapViewFromDataSource-success-via-layer-parent-view',
                        originDSId: originDS.id,
                        layerId: layer.id,
                        viewType: view.type || 'unknown',
                        timestamp: Date.now()
                    });
                    return view;
                }
                // Try to get map from parent and then view
                const parentMap = parent.map;
                if (parentMap) {
                    const view = parentMap.view ||
                        ((_e = (_d = parentMap.views) === null || _d === void 0 ? void 0 : _d.getItemAt) === null || _e === void 0 ? void 0 : _e.call(_d, 0)) ||
                        (((_f = parentMap.views) === null || _f === void 0 ? void 0 : _f.length) > 0 ? parentMap.views[0] : null);
                    if (view) {
                        debugLogger.log('GRAPHICS-LAYER', {
                            event: 'getMapViewFromDataSource-success-via-layer-parent-map',
                            originDSId: originDS.id,
                            layerId: layer.id,
                            viewType: view.type || 'unknown',
                            timestamp: Date.now()
                        });
                        return view;
                    }
                }
                // Parent might BE the view (check if it has view-like properties)
                if (parent.type === 'map' || parent.type === 'scene' || parent.extent) {
                    debugLogger.log('GRAPHICS-LAYER', {
                        event: 'getMapViewFromDataSource-success-via-layer-parent-is-view',
                        originDSId: originDS.id,
                        layerId: layer.id,
                        viewType: parent.type || 'unknown',
                        timestamp: Date.now()
                    });
                    return parent;
                }
            }
            // Try multiple approaches to get the view:
            // 1. Layer might have a direct view property
            if (layer.view) {
                const view = layer.view;
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'getMapViewFromDataSource-success-via-layer-view',
                    originDSId: originDS.id,
                    layerId: layer.id,
                    viewType: view.type || 'unknown',
                    timestamp: Date.now()
                });
                return view;
            }
            // 2. Try to get map from layer and then view from map
            const map = layer.map ||
                ((_g = layer.parent) === null || _g === void 0 ? void 0 : _g.map) ||
                layer.__map ||
                layer._map;
            if (map) {
                // Log map properties
                const mapKeys = Object.keys(map).filter(key => !key.startsWith('_') &&
                    typeof map[key] !== 'function').slice(0, 20);
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'getMapViewFromDataSource-map-found',
                    originDSId: originDS.id,
                    layerId: layer.id,
                    mapId: map.id || 'unknown',
                    mapKeys: mapKeys,
                    hasMapView: !!map.view,
                    hasMapViews: !!(map.views),
                    mapViewsLength: ((_h = map.views) === null || _h === void 0 ? void 0 : _h.length) || 0,
                    timestamp: Date.now()
                });
                const view = map.view ||
                    ((_k = (_j = map.views) === null || _j === void 0 ? void 0 : _j.getItemAt) === null || _k === void 0 ? void 0 : _k.call(_j, 0)) ||
                    (((_l = map.views) === null || _l === void 0 ? void 0 : _l.length) > 0 ? map.views[0] : null) ||
                    (map.views && map.views.length > 0 ? map.views.getItemAt(0) : null);
                if (view) {
                    debugLogger.log('GRAPHICS-LAYER', {
                        event: 'getMapViewFromDataSource-success-via-layer-map',
                        originDSId: originDS.id,
                        layerId: layer.id,
                        viewType: view.type || 'unknown',
                        timestamp: Date.now()
                    });
                    return view;
                }
            }
            // 3. Try to get root data source and access map from there
            const rootDS = originDS.getRootDataSource();
            if (rootDS) {
                const rootMap = ((_o = (_m = rootDS).getMap) === null || _o === void 0 ? void 0 : _o.call(_m)) ||
                    rootDS.map ||
                    rootDS.__map ||
                    rootDS._map;
                if (rootMap) {
                    // Log root map properties
                    const rootMapKeys = Object.keys(rootMap).filter(key => !key.startsWith('_') &&
                        typeof rootMap[key] !== 'function').slice(0, 20);
                    debugLogger.log('GRAPHICS-LAYER', {
                        event: 'getMapViewFromDataSource-root-map-found',
                        originDSId: originDS.id,
                        rootDSId: rootDS.id,
                        rootDSType: rootDS.type,
                        rootMapId: rootMap.id || 'unknown',
                        rootMapKeys: rootMapKeys,
                        hasRootMapView: !!rootMap.view,
                        hasRootMapViews: !!(rootMap.views),
                        rootMapViewsLength: ((_p = rootMap.views) === null || _p === void 0 ? void 0 : _p.length) || 0,
                        timestamp: Date.now()
                    });
                    const view = rootMap.view ||
                        ((_r = (_q = rootMap.views) === null || _q === void 0 ? void 0 : _q.getItemAt) === null || _r === void 0 ? void 0 : _r.call(_q, 0)) ||
                        (((_s = rootMap.views) === null || _s === void 0 ? void 0 : _s.length) > 0 ? rootMap.views[0] : null) ||
                        (rootMap.views && rootMap.views.length > 0 ? rootMap.views.getItemAt(0) : null);
                    if (view) {
                        debugLogger.log('GRAPHICS-LAYER', {
                            event: 'getMapViewFromDataSource-success-via-rootDS',
                            originDSId: originDS.id,
                            rootDSId: rootDS.id,
                            viewType: view.type || 'unknown',
                            timestamp: Date.now()
                        });
                        return view;
                    }
                }
                else {
                    // Log root DS properties to see what's available
                    const rootDSKeys = Object.keys(rootDS).filter(key => !key.startsWith('_') &&
                        typeof rootDS[key] !== 'function').slice(0, 20);
                    debugLogger.log('GRAPHICS-LAYER', {
                        event: 'getMapViewFromDataSource-root-ds-inspection',
                        originDSId: originDS.id,
                        rootDSId: rootDS.id,
                        rootDSType: rootDS.type,
                        rootDSKeys: rootDSKeys,
                        hasGetMap: typeof rootDS.getMap === 'function',
                        hasMap: !!rootDS.map,
                        timestamp: Date.now()
                    });
                }
            }
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'getMapViewFromDataSource-no-view',
                originDSId: originDS.id,
                layerId: layer.id,
                hasLayerMap: !!map,
                hasRootDS: !!rootDS,
                timestamp: Date.now()
            });
            return null;
        }
        catch (error) {
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'getMapViewFromDataSource-error',
                error: error instanceof Error ? error.message : String(error),
                errorStack: error instanceof Error ? error.stack : undefined,
                timestamp: Date.now()
            });
            return null;
        }
    });
}
/**
 * Gets the default highlight symbol based on geometry type.
 * Uses the map's actual highlight color from highlightOptions to match standard selection appearance.
 */
function getDefaultHighlightSymbol(geometryType, mapView) {
    // Get default highlight color from view's highlightOptions
    const highlightOptions = (mapView.highlightOptions || {});
    // Extract color - could be array [R,G,B,A] or Color object
    let highlightColor = null;
    if (highlightOptions.color) {
        // If it's a Color object, convert to array
        if (typeof highlightOptions.color === 'object' && 'toRgba' in highlightOptions.color) {
            highlightColor = highlightOptions.color.toRgba();
        }
        // If it's already an array
        else if (Array.isArray(highlightOptions.color)) {
            highlightColor = highlightOptions.color;
        }
    }
    // If no color in highlightOptions, use the ArcGIS documented default: cyan [0, 255, 255]
    if (!highlightColor) {
        highlightColor = [0, 255, 255, 1.0]; // Full opacity default
    }
    // Ensure we have 4 elements [R, G, B, A]
    const baseColor = highlightColor.slice(0, 3);
    const baseAlpha = highlightColor.length >= 4 ? highlightColor[3] : 1.0;
    // Get fill opacity from highlightOptions or use default
    const fillOpacity = highlightOptions.fillOpacity !== undefined
        ? highlightOptions.fillOpacity
        : 0.25; // Default 25% opacity for fill
    const fillColor = [...baseColor, fillOpacity];
    // Get halo opacity or use default - for outlines and lines
    const haloOpacity = highlightOptions.haloOpacity !== undefined
        ? highlightOptions.haloOpacity
        : baseAlpha; // Use the color's alpha if available, otherwise 1.0
    const outlineColor = [...baseColor, haloOpacity];
    // For lines, use full opacity to ensure visibility
    const lineOpacity = highlightOptions.haloOpacity !== undefined
        ? Math.max(highlightOptions.haloOpacity, 0.8) // At least 80% opacity
        : baseAlpha; // Use the color's alpha, or default to 1.0
    const lineColor = [...baseColor, lineOpacity];
    switch (geometryType) {
        case 'point':
        case 'multipoint':
            return {
                type: 'simple-marker',
                color: outlineColor,
                outline: {
                    color: outlineColor,
                    width: 2
                },
                size: 12
            };
        case 'polyline':
            return {
                type: 'simple-line',
                color: lineColor, // Use lineColor with proper opacity
                width: 4 // Increased width for visibility
            };
        case 'polygon':
        case 'multipolygon':
            return {
                type: 'simple-fill',
                color: fillColor,
                outline: {
                    color: outlineColor,
                    width: 2
                }
            };
        default:
            // Fallback to polygon symbol
            return {
                type: 'simple-fill',
                color: fillColor,
                outline: {
                    color: outlineColor,
                    width: 2
                }
            };
    }
}
/**
 * Creates or gets an existing graphics layer for the widget.
 * Uses a unique ID based on widget ID to ensure one layer per widget.
 */
function createOrGetGraphicsLayer(widgetId, mapView) {
    return __awaiter(this, void 0, void 0, function* () {
        const seq = ++operationSequence;
        const layerId = `querysimple-highlight-${widgetId}`;
        try {
            // Check if layer already exists
            const existingLayer = mapView.map.layers.find(layer => layer.id === layerId);
            if (existingLayer) {
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'createOrGetGraphicsLayer-found-existing',
                    seq,
                    widgetId,
                    layerId,
                    timestamp: Date.now()
                });
                return existingLayer;
            }
            // Load GraphicsLayer module
            const [GraphicsLayer] = yield (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_0__.loadArcGISJSAPIModules)(['esri/layers/GraphicsLayer']);
            // Create new graphics layer
            const graphicsLayer = new GraphicsLayer({
                id: layerId,
                title: `QuerySimple Highlights (${widgetId})`,
                listMode: 'hide', // Hide from layer list
                visible: true
            });
            // Add to map
            mapView.map.add(graphicsLayer);
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'createOrGetGraphicsLayer-created',
                seq,
                widgetId,
                layerId,
                timestamp: Date.now()
            });
            return graphicsLayer;
        }
        catch (error) {
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'createOrGetGraphicsLayer-error',
                seq,
                widgetId,
                layerId,
                error: error instanceof Error ? error.message : String(error),
                errorStack: error instanceof Error ? error.stack : undefined,
                timestamp: Date.now()
            });
            return null;
        }
    });
}
/**
 * Adds highlight graphics to the graphics layer using default map highlight color.
 * Note: This function should be called after GraphicsLayer module is loaded.
 */
function addHighlightGraphics(graphicsLayer, records, mapView) {
    return __awaiter(this, void 0, void 0, function* () {
        const seq = ++operationSequence;
        if (!graphicsLayer || !records || records.length === 0) {
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'addHighlightGraphics-skipped',
                seq,
                reason: !graphicsLayer ? 'no-graphics-layer' : 'no-records',
                recordsCount: (records === null || records === void 0 ? void 0 : records.length) || 0,
                timestamp: Date.now()
            });
            return;
        }
        // Log existing state BEFORE adding - verify assumption about duplicates
        const existingGraphicsCount = graphicsLayer.graphics.length;
        const existingRecordIds = [];
        const existingRecordIdSet = new Set();
        graphicsLayer.graphics.forEach(graphic => {
            var _a;
            const recordId = (_a = graphic.attributes) === null || _a === void 0 ? void 0 : _a.recordId;
            if (recordId) {
                existingRecordIds.push(recordId);
                existingRecordIdSet.add(recordId);
            }
        });
        // Log what we're trying to add
        const incomingRecordIds = records.map(r => r.getId());
        debugLogger.log('GRAPHICS-LAYER', {
            event: 'addHighlightGraphics-before-add',
            seq,
            graphicsLayerId: graphicsLayer.id,
            existingGraphicsCount,
            existingRecordIds: existingRecordIds.slice(0, 20), // Limit to first 20 for readability
            existingRecordIdsCount: existingRecordIds.length,
            incomingRecordIds: incomingRecordIds.slice(0, 20), // Limit to first 20
            incomingRecordIdsCount: incomingRecordIds.length,
            duplicateRecordIds: incomingRecordIds.filter(id => existingRecordIdSet.has(id)).slice(0, 20),
            duplicateCount: incomingRecordIds.filter(id => existingRecordIdSet.has(id)).length,
            timestamp: Date.now()
        });
        // Load Graphic module
        const [Graphic] = yield (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_0__.loadArcGISJSAPIModules)(['esri/Graphic']);
        let addedCount = 0;
        let skippedCount = 0;
        let duplicateCount = 0;
        const addedRecordIds = [];
        const skippedRecordIds = [];
        const duplicateRecordIds = [];
        records.forEach(record => {
            try {
                const recordId = record.getId();
                // Check if this record ID already exists in graphics layer
                if (existingRecordIdSet.has(recordId)) {
                    duplicateCount++;
                    duplicateRecordIds.push(recordId);
                    debugLogger.log('GRAPHICS-LAYER', {
                        event: 'addHighlightGraphics-duplicate-detected',
                        seq,
                        recordId,
                        graphicsLayerId: graphicsLayer.id,
                        timestamp: Date.now()
                    });
                    return; // Skip adding duplicate
                }
                const graphic = record.feature;
                if (!graphic || !graphic.geometry) {
                    skippedCount++;
                    skippedRecordIds.push(recordId);
                    return;
                }
                // Get geometry type from graphic
                const geometryType = graphic.geometry.type;
                // Create symbol using default highlight color
                const symbol = getDefaultHighlightSymbol(geometryType, mapView);
                // Create new graphic with highlight symbol
                const highlightGraphic = new Graphic({
                    geometry: graphic.geometry,
                    symbol: symbol,
                    attributes: {
                        recordId: recordId,
                        source: 'querysimple-highlight',
                        widgetId: graphicsLayer.id.replace('querysimple-highlight-', '')
                    }
                });
                graphicsLayer.add(highlightGraphic);
                addedCount++;
                addedRecordIds.push(recordId);
                // Add to tracking set to prevent duplicates within this batch
                existingRecordIdSet.add(recordId);
            }
            catch (error) {
                skippedCount++;
                skippedRecordIds.push(record.getId());
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'addHighlightGraphics-record-error',
                    seq,
                    recordId: record.getId(),
                    error: error instanceof Error ? error.message : String(error),
                    timestamp: Date.now()
                });
            }
        });
        // Log final state AFTER adding
        const finalGraphicsCount = graphicsLayer.graphics.length;
        const finalRecordIds = [];
        graphicsLayer.graphics.forEach(graphic => {
            var _a;
            const recordId = (_a = graphic.attributes) === null || _a === void 0 ? void 0 : _a.recordId;
            if (recordId) {
                finalRecordIds.push(recordId);
            }
        });
        debugLogger.log('GRAPHICS-LAYER', {
            event: 'addHighlightGraphics-complete',
            seq,
            graphicsLayerId: graphicsLayer.id,
            recordsCount: records.length,
            addedCount,
            skippedCount,
            duplicateCount,
            addedRecordIds: addedRecordIds.slice(0, 20), // Limit to first 20
            skippedRecordIds: skippedRecordIds.slice(0, 20),
            duplicateRecordIds: duplicateRecordIds.slice(0, 20),
            existingGraphicsCount,
            finalGraphicsCount,
            expectedFinalCount: existingGraphicsCount + addedCount,
            finalRecordIds: finalRecordIds.slice(0, 20), // Limit to first 20
            finalRecordIdsCount: finalRecordIds.length,
            timestamp: Date.now()
        });
    });
}
/**
 * Removes highlight graphics from the graphics layer by record IDs.
 */
function removeHighlightGraphics(graphicsLayer, recordIds) {
    const seq = ++operationSequence;
    if (!graphicsLayer || !recordIds || recordIds.length === 0) {
        debugLogger.log('GRAPHICS-LAYER', {
            event: 'removeHighlightGraphics-skipped',
            seq,
            reason: !graphicsLayer ? 'no-graphics-layer' : 'no-record-ids',
            recordIdsCount: (recordIds === null || recordIds === void 0 ? void 0 : recordIds.length) || 0,
            timestamp: Date.now()
        });
        return;
    }
    const recordIdSet = new Set(recordIds);
    let removedCount = 0;
    // Find and remove graphics matching record IDs
    const graphicsToRemove = [];
    graphicsLayer.graphics.forEach(graphic => {
        var _a;
        const recordId = (_a = graphic.attributes) === null || _a === void 0 ? void 0 : _a.recordId;
        if (recordId && recordIdSet.has(recordId)) {
            graphicsToRemove.push(graphic);
        }
    });
    graphicsToRemove.forEach(graphic => {
        graphicsLayer.remove(graphic);
        removedCount++;
    });
    debugLogger.log('GRAPHICS-LAYER', {
        event: 'removeHighlightGraphics-complete',
        seq,
        graphicsLayerId: graphicsLayer.id,
        recordIdsCount: recordIds.length,
        removedCount,
        timestamp: Date.now()
    });
}
/**
 * Clears all highlight graphics from the graphics layer.
 */
function clearGraphicsLayer(graphicsLayer) {
    const seq = ++operationSequence;
    if (!graphicsLayer) {
        debugLogger.log('GRAPHICS-LAYER', {
            event: 'clearGraphicsLayer-skipped',
            seq,
            reason: 'no-graphics-layer',
            timestamp: Date.now()
        });
        return;
    }
    const graphicsCount = graphicsLayer.graphics.length;
    graphicsLayer.removeAll();
    debugLogger.log('GRAPHICS-LAYER', {
        event: 'clearGraphicsLayer-complete',
        seq,
        graphicsLayerId: graphicsLayer.id,
        graphicsRemoved: graphicsCount,
        timestamp: Date.now()
    });
}
/**
 * Removes the graphics layer from the map and cleans up references.
 */
function cleanupGraphicsLayer(widgetId, mapView) {
    const seq = ++operationSequence;
    const layerId = `querysimple-highlight-${widgetId}`;
    try {
        const graphicsLayer = mapView.map.layers.find(layer => layer.id === layerId);
        if (graphicsLayer) {
            // Clear all graphics first
            graphicsLayer.removeAll();
            // Remove layer from map
            mapView.map.remove(graphicsLayer);
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'cleanupGraphicsLayer-complete',
                seq,
                widgetId,
                layerId,
                timestamp: Date.now()
            });
        }
        else {
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'cleanupGraphicsLayer-not-found',
                seq,
                widgetId,
                layerId,
                timestamp: Date.now()
            });
        }
    }
    catch (error) {
        debugLogger.log('GRAPHICS-LAYER', {
            event: 'cleanupGraphicsLayer-error',
            seq,
            widgetId,
            layerId,
            error: error instanceof Error ? error.message : String(error),
            errorStack: error instanceof Error ? error.stack : undefined,
            timestamp: Date.now()
        });
    }
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/interactive-draw-tool.tsx":
/*!************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/interactive-draw-tool.tsx ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   InteractiveDraw: () => (/* binding */ InteractiveDraw)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");

/** @jsx jsx */





const sketchToolInfoMap = {
    [_config__WEBPACK_IMPORTED_MODULE_3__.CreateToolType.Point]: { drawToolName: 'point', esriClassName: 'esri-icon-point', toolIndex: 0 },
    [_config__WEBPACK_IMPORTED_MODULE_3__.CreateToolType.Polyline]: { drawToolName: 'polyline', esriClassName: 'esri-icon-polyline', toolIndex: 4 },
    [_config__WEBPACK_IMPORTED_MODULE_3__.CreateToolType.Polygon]: { drawToolName: 'polygon', esriClassName: 'esri-icon-polygon', toolIndex: 2 },
    [_config__WEBPACK_IMPORTED_MODULE_3__.CreateToolType.Rectangle]: {
        drawToolName: 'rectangle',
        esriClassName: 'esri-icon-checkbox-unchecked',
        toolIndex: 1
    },
    [_config__WEBPACK_IMPORTED_MODULE_3__.CreateToolType.Circle]: { drawToolName: 'circle', esriClassName: 'esri-icon-radio-unchecked', toolIndex: 3 }
};
function InteractiveDraw(props) {
    const { toolTypes = [], jimuMapView, onDrawEnd, widgetId } = props;
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_5__["default"]);
    const [mapModule, setMapModule] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const getLayerFunRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const graphicRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const [clearAfterApply, setClearAfterApply] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(false);
    const visibleElements = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return {
            createTools: Object.entries(sketchToolInfoMap).reduce((result, [key, value]) => (Object.assign(Object.assign({}, result), { [value.drawToolName]: toolTypes.includes(key) })), { point: false }),
            selectionTools: {
                'lasso-selection': false,
                'rectangle-selection': false
            },
            settingsMenu: false,
            undoRedoMenu: false,
            deleteButton: true
        };
    }, [toolTypes]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        jimu_core__WEBPACK_IMPORTED_MODULE_1__.moduleLoader.loadModule('jimu-ui/advanced/map').then((result) => {
            setMapModule(result);
        });
    });
    const handleDrawToolCreated = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((jimuDrawToolsRef) => {
        getLayerFunRef.current = jimuDrawToolsRef.getGraphicsLayer;
    }, []);
    const handleDrawStart = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        getLayerFunRef.current && (getLayerFunRef.current)().removeAll();
    }, []);
    const handleDrawEnd = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((graphic) => {
        graphicRef.current = graphic;
        onDrawEnd(graphic, getLayerFunRef.current, clearAfterApply);
    }, [onDrawEnd, clearAfterApply]);
    const handleCleared = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        graphicRef.current = null;
        onDrawEnd(null);
    }, [onDrawEnd]);
    const handleClearSettingChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((e) => {
        if (graphicRef.current) {
            onDrawEnd(graphicRef.current, getLayerFunRef.current, e.target.checked);
        }
        setClearAfterApply(e.target.checked);
    }, [onDrawEnd]);
    const JimuDraw = mapModule === null || mapModule === void 0 ? void 0 : mapModule.JimuDraw;
    if (!JimuDraw) {
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_4__.StatusIndicator, { statusType: widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_4__.EntityStatusType.Loading });
    }
    const isAvailable = Object.keys(visibleElements.createTools).some(toolName => visibleElements.createTools[toolName]);
    if (!isAvailable) {
        return null;
    }
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(JimuDraw, { jimuMapView: jimuMapView, operatorWidgetId: widgetId, disableSymbolSelector: true, drawingOptions: {
                    creationMode: mapModule.JimuDrawCreationMode.Single,
                    updateOnGraphicClick: false,
                    visibleElements: visibleElements
                }, uiOptions: {
                    isHideBorder: true
                }, onJimuDrawCreated: handleDrawToolCreated, onDrawingStarted: handleDrawStart, onDrawingFinished: handleDrawEnd, onDrawingCleared: handleCleared }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("label", { className: 'd-flex align-items-center', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Checkbox, { checked: clearAfterApply, onChange: handleClearSettingChange, className: 'mr-2' }), getI18nMessage('clearDrawing')] })] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/loading-result.tsx":
/*!*****************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/loading-result.tsx ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   LoadingResult: () => (/* binding */ LoadingResult)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_theme__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-theme */ "jimu-theme");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");





const Root = jimu_theme__WEBPACK_IMPORTED_MODULE_3__.styled.div `
  position: absolute;
  top: 0;
  bottom: 0;
  right: 0;
  left: 0;
  z-index: 2;

  .loading-content {
    .loading-tip {
      position: relative;
    }
  }
`;
function LoadingResult() {
    const translate = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_4__["default"]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Root, { children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'loading-content w-100 px-4 d-flex flex-column justify-content-center align-items-center', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { role: 'alert', "aria-live": 'assertive', className: 'text-paper', children: translate('retrieving') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Loading, { className: 'loading-tip mt-8', type: jimu_ui__WEBPACK_IMPORTED_MODULE_2__.LoadingType.Donut })] }) }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-result-item.tsx":
/*!********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-result-item.tsx ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryResultItem: () => (/* binding */ QueryResultItem)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_icons_outlined_editor_trash__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-icons/outlined/editor/trash */ "./jimu-icons/outlined/editor/trash.tsx");
/* harmony import */ var _components_feature_info__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./components/feature-info */ "./your-extensions/widgets/query-simple/src/runtime/components/feature-info.tsx");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");

/** @jsx jsx */






const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_6__.createQuerySimpleDebugLogger)();
const style = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
  overflow: auto;
  flex-flow: row;
  cursor: pointer;
  flex-shrink: 0;
  min-height: 2rem;
  position: relative;
  &.selected {
    outline: 2px solid var(--sys-color-primary-main);
  }
  
  .remove-button {
    position: absolute;
    top: 4px;
    right: 4px;
    z-index: 10;
    opacity: 0.7;
    transition: opacity 0.2s;
    
    &:hover {
      opacity: 1;
    }
    
    // Larger touch target for mobile/accessibility
    min-width: 32px;
    min-height: 32px;
  }
`;
/**
 * QueryResultItem component - displays a single query result record
 * Features:
 * - Clicking the item zooms to the feature on the map
 * - Remove button (trash icon) in upper-right corner to remove record from results
 * - Records are expanded by default to show full feature information
 */
const QueryResultItem = (props) => {
    const { widgetId, data, dataSource, popupTemplate, defaultPopupTemplate, onClick, onRemove, expandByDefault = false } = props;
    const recordId = data.getId();
    // Log when QueryResultItem renders
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        debugLogger.log('EXPAND-COLLAPSE', {
            event: 'QueryResultItem-render',
            recordId,
            expandByDefault,
            timestamp: Date.now()
        });
    }, [recordId, expandByDefault]);
    // Check if this record is currently selected
    const selected = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => { var _a, _b, _c; return (_c = (_b = (_a = state.dataSourcesInfo) === null || _a === void 0 ? void 0 : _a[dataSource.id]) === null || _b === void 0 ? void 0 : _b.selectedIds) === null || _c === void 0 ? void 0 : _c.includes(data.getId()); });
    // Determine if list is displayed vertically (affects FeatureInfo expandability)
    const isVerticalAlign = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const widgetJson = state.appConfig.widgets[widgetId];
        return widgetJson.config.resultListDirection !== _config__WEBPACK_IMPORTED_MODULE_5__.ListDirection.Horizontal;
    });
    // Handle clicking on the result item - zooms to feature on map
    const handleClickResultItem = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((e) => {
        // Don't trigger zoom if clicking the remove button
        if (e.target.closest('.remove-button')) {
            return;
        }
        onClick(data);
    }, [onClick, data]);
    // Handle clicking the remove button - removes record from results and selection
    const handleRemove = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((e) => {
        e.stopPropagation(); // Prevent triggering the item click handler
        e.preventDefault();
        onRemove(data);
    }, [onRemove, data]);
    const onKeyUp = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((evt) => {
        if (evt.key === 'Enter' || evt.key === ' ') {
            evt.preventDefault();
            evt.stopPropagation();
            handleClickResultItem(evt);
        }
    }, [handleClickResultItem]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('query-result-item', { selected }), onClick: handleClickResultItem, onKeyUp: onKeyUp, css: style, role: 'option', "aria-selected": selected, tabIndex: 0, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_feature_info__WEBPACK_IMPORTED_MODULE_4__["default"], { graphic: data.feature, popupTemplate: popupTemplate, defaultPopupTemplate: defaultPopupTemplate, togglable: isVerticalAlign, expandByDefault: expandByDefault, dataSource: dataSource }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { className: "remove-button", icon: true, size: "sm", variant: "text", color: "inherit", onClick: handleRemove, "aria-label": "Remove record", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
          padding: 6px;
          min-width: 32px;
          width: 32px;
          height: 32px;
          display: flex;
          align-items: center;
          justify-content: center;
        `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_editor_trash__WEBPACK_IMPORTED_MODULE_3__.TrashOutlined, { size: 18 }) })] }));
};


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-result.tsx":
/*!***************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-result.tsx ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTaskResult: () => (/* binding */ QueryTaskResult)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _widget_config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./widget-config */ "./your-extensions/widgets/query-simple/src/runtime/widget-config.ts");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _simple_list__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./simple-list */ "./your-extensions/widgets/query-simple/src/runtime/simple-list.tsx");
/* harmony import */ var _query_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./query-utils */ "./your-extensions/widgets/query-simple/src/runtime/query-utils.ts");
/* harmony import */ var _default_query_item__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../default-query-item */ "./your-extensions/widgets/query-simple/src/default-query-item.ts");
/* harmony import */ var jimu_icons_outlined_directional_arrow_left__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! jimu-icons/outlined/directional/arrow-left */ "./jimu-icons/outlined/directional/arrow-left.tsx");
/* harmony import */ var jimu_icons_outlined_directional_expand_all__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! jimu-icons/outlined/directional/expand-all */ "./jimu-icons/outlined/directional/expand-all.tsx");
/* harmony import */ var jimu_icons_outlined_directional_collapse_all__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! jimu-icons/outlined/directional/collapse-all */ "./jimu-icons/outlined/directional/collapse-all.tsx");
/* harmony import */ var _data_actions__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../data-actions */ "./your-extensions/widgets/query-simple/src/data-actions/index.tsx");
/* harmony import */ var _selection_utils__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");
/* harmony import */ var _results_management_utils__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./results-management-utils */ "./your-extensions/widgets/query-simple/src/runtime/results-management-utils.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};

/** @jsx jsx */





// FORCED: Always SimpleList - LazyList and PagingList removed










const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_15__.createQuerySimpleDebugLogger)();

const { iconMap } = (0,_widget_config__WEBPACK_IMPORTED_MODULE_3__.getWidgetRuntimeDataMap)();
/**
 * Custom event name for requesting restoration when identify popup closes.
 */
const RESTORE_ON_IDENTIFY_CLOSE_EVENT = 'querysimple-restore-on-identify-close';
/**
 * Detects if an identify popup is currently visible in the DOM.
 * Uses verified selectors based on Experience Builder's identify popup structure.
 *
 * @returns true if identify popup is detected and visible, false otherwise
 */
function isIdentifyPopupOpen() {
    // Primary selector: .esri-popup with role="dialog"
    const popup = document.querySelector('.esri-popup[role="dialog"]');
    if (!popup) {
        return false;
    }
    // Verify it's visible (not hidden)
    const ariaHidden = popup.getAttribute('aria-hidden');
    if (ariaHidden === 'true') {
        return false;
    }
    // Additional check: verify computed style shows it's visible
    const style = window.getComputedStyle(popup);
    if (style.display === 'none' || style.visibility === 'hidden' || style.opacity === '0') {
        return false;
    }
    // Verify it contains esri-features (identify popup structure)
    const hasFeatures = popup.querySelector('.esri-features');
    if (!hasFeatures) {
        return false;
    }
    return true;
}
const resultStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
  display: flex;
  flex-direction: column;

  .query-result__header {
    color: var(--sys-color-surface-paper-text);
    font-weight: 500;
    font-size: 0.875rem;
    line-height: 1.5;
    border-bottom: 1px solid var(--sys-color-divider-secondary);
    margin-bottom: 6px;
    padding-bottom: 8px;
  }

  .query-result-container {
    flex: 1 1 0;
    display: flex;
    flex-direction: column;
    overflow: auto;
    min-height: 0;
  }

  .query-result-info {
    height: 18px;
  }
`;
function QueryTaskResult(props) {
    var _a, _b;
    const { queryItem, queryParams, resultCount, maxPerPage, records, widgetId, outputDS, runtimeZoomToSelected, onNavBack, resultsMode, accumulatedRecords, onAccumulatedRecordsChange, useGraphicsLayerForHighlight, graphicsLayer, mapView } = props;
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_5__["default"]);
    const intl = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.useIntl)();
    const [queryData, setQueryData] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const [selectedRecords, setSelectedRecords] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState([]);
    const [removedRecordIds, setRemovedRecordIds] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(new Set());
    const currentItem = Object.assign({}, _default_query_item__WEBPACK_IMPORTED_MODULE_8__.DEFAULT_QUERY_ITEM, queryItem);
    const [expandAll, setExpandAll] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState((_a = currentItem.resultExpandByDefault) !== null && _a !== void 0 ? _a : false);
    // Track individual item expansion states to maintain state when items are removed
    const [itemExpandStates, setItemExpandStates] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(new Map());
    const backBtnRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(undefined);
    // Track expandAll changes for debugging
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        debugLogger.log('RESULTS-MODE', {
            event: 'expandAll-state-changed',
            widgetId,
            expandAll,
            queryItemConfigId: queryItem.configId,
            timestamp: Date.now()
        });
    }, [expandAll, widgetId, queryItem.configId]);
    // Track if we've already selected these records to prevent re-selection when switching tabs
    const hasSelectedRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(false);
    // Track the last records we selected to detect when new records come in
    const lastSelectedRecordsRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef([]);
    // Track the original query record IDs (not selected IDs) to detect when query results change
    const lastQueryRecordIdsRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef([]);
    // Track the last selected FeatureDataRecords for restoration (if needed)
    const lastSelectedFeatureRecordsRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef([]);
    // Ref to track removedRecordIds for use in callbacks (avoids stale closure issues)
    const removedRecordIdsRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(new Set());
    // Sync ref whenever removedRecordIds state changes
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        removedRecordIdsRef.current = removedRecordIds;
    }, [removedRecordIds]);
    // Error state for user-facing errors
    const [selectionError, setSelectionError] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const extraActions = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return (0,_data_actions__WEBPACK_IMPORTED_MODULE_12__.getExtraActions)(widgetId, outputDS, intl, queryItem, runtimeZoomToSelected);
    }, [widgetId, outputDS, intl, queryItem, runtimeZoomToSelected]);
    const enableDataAction = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        var _a;
        const widgetJson = state.appConfig.widgets[widgetId];
        return (_a = widgetJson.enableDataAction) !== null && _a !== void 0 ? _a : true;
    });
    const pagingTypeInConfig = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const widgetJson = state.appConfig.widgets[widgetId];
        return widgetJson.config.resultPagingStyle;
    });
    const directionTypeInConfig = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const widgetJson = state.appConfig.widgets[widgetId];
        return widgetJson.config.resultListDirection;
    });
    // FORCE SimpleList - ignore config, we're done with lazy loading issues
    const pagingType = _config__WEBPACK_IMPORTED_MODULE_4__.PagingType.Simple;
    const direction = directionTypeInConfig !== null && directionTypeInConfig !== void 0 ? directionTypeInConfig : _config__WEBPACK_IMPORTED_MODULE_4__.ListDirection.Vertical;
    // Group records by origin data source for DataActionList
    // This ensures DataActionList recognizes records even when they come from different queries/origins
    const actionDataSets = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        var _a, _b, _c, _d;
        // Debug: Log what records are available
        debugLogger.log('RESULTS-MODE', {
            event: 'actionDataSets-calculation-start',
            widgetId: widgetId,
            selectedRecordsCount: (selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) || 0,
            queryDataRecordsCount: ((_a = queryData === null || queryData === void 0 ? void 0 : queryData.records) === null || _a === void 0 ? void 0 : _a.length) || 0,
            recordsPropCount: (records === null || records === void 0 ? void 0 : records.length) || 0,
            outputDSId: outputDS === null || outputDS === void 0 ? void 0 : outputDS.id,
            hasSelectedRecords: (selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) > 0,
            hasQueryDataRecords: ((_b = queryData === null || queryData === void 0 ? void 0 : queryData.records) === null || _b === void 0 ? void 0 : _b.length) > 0,
            hasRecordsProp: (records === null || records === void 0 ? void 0 : records.length) > 0
        });
        const isAccumulationMode = resultsMode === _config__WEBPACK_IMPORTED_MODULE_4__.SelectionType.AddToSelection || resultsMode === _config__WEBPACK_IMPORTED_MODULE_4__.SelectionType.RemoveFromSelection;
        // In accumulation modes (Add/Remove), prefer the 'records' prop (the accumulated set)
        // because outputDS.getSelectedRecords() will only return records that match the current query's where clause.
        const recordsToUse = isAccumulationMode
            ? (records || [])
            : ((selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) > 0 ? selectedRecords : (((_c = queryData === null || queryData === void 0 ? void 0 : queryData.records) === null || _c === void 0 ? void 0 : _c.length) > 0 ? queryData.records : (records || [])));
        // If no records, return single DataRecordSet with empty records using outputDS
        if (!recordsToUse || recordsToUse.length === 0) {
            const emptyDataSet = {
                dataSource: outputDS,
                type: 'loaded',
                records: [],
                name: outputDS === null || outputDS === void 0 ? void 0 : outputDS.id,
                label: outputDS === null || outputDS === void 0 ? void 0 : outputDS.getLabel()
            };
            debugLogger.log('RESULTS-MODE', {
                event: 'actionDataSets-empty-records',
                widgetId: widgetId,
                dataSetDataSourceId: (_d = emptyDataSet.dataSource) === null || _d === void 0 ? void 0 : _d.id
            });
            return [emptyDataSet];
        }
        // Group records by their origin data source
        const recordsByOriginDS = new Map();
        recordsToUse.forEach(record => {
            var _a, _b, _c, _d;
            const recordDS = (_b = (_a = record).getDataSource) === null || _b === void 0 ? void 0 : _b.call(_a);
            let originDS = null;
            if (recordDS) {
                originDS = ((_c = recordDS.getOriginDataSources()) === null || _c === void 0 ? void 0 : _c[0]) || recordDS;
            }
            else if (outputDS) {
                // Fallback: use outputDS's origin if record doesn't have dataSource
                originDS = ((_d = outputDS.getOriginDataSources()) === null || _d === void 0 ? void 0 : _d[0]) || outputDS;
            }
            if (originDS) {
                if (!recordsByOriginDS.has(originDS)) {
                    recordsByOriginDS.set(originDS, []);
                }
                recordsByOriginDS.get(originDS).push(record);
            }
        });
        // Create a DataRecordSet for each origin data source
        const dataSets = Array.from(recordsByOriginDS.entries()).map(([originDS, originRecords]) => {
            const dataSet = {
                dataSource: originDS, // Use origin DS, not outputDS
                type: 'selected',
                records: originRecords,
                name: originDS.id,
                label: originDS.getLabel()
            };
            // Add fields if needed (use currentItem's field settings)
            if (currentItem.resultFieldsType === _config__WEBPACK_IMPORTED_MODULE_4__.FieldsType.SelectAttributes && currentItem.resultDisplayFields != null) {
                dataSet.fields = (0,_query_utils__WEBPACK_IMPORTED_MODULE_7__.combineFields)(currentItem.resultDisplayFields, currentItem.resultTitleExpression);
            }
            else if (originDS && 'getPopupInfo' in originDS) {
                // use fields in popup template from origin DS
                const popupInfo = originDS.getPopupInfo();
                if (popupInfo === null || popupInfo === void 0 ? void 0 : popupInfo.fieldInfos) {
                    dataSet.fields = popupInfo.fieldInfos.filter((fieldInfo) => fieldInfo.visible).map((fieldInfo) => fieldInfo.fieldName);
                }
            }
            return dataSet;
        });
        // Debug: Log what the final dataSets contain
        debugLogger.log('RESULTS-MODE', {
            event: 'actionDataSets-final',
            widgetId: widgetId,
            dataSetsCount: dataSets.length,
            totalRecordsCount: recordsToUse.length,
            dataSetsByOrigin: dataSets.map(ds => {
                var _a, _b;
                return ({
                    originDSId: (_a = ds.dataSource) === null || _a === void 0 ? void 0 : _a.id,
                    recordsCount: ((_b = ds.records) === null || _b === void 0 ? void 0 : _b.length) || 0,
                    type: ds.type
                });
            })
        });
        // If we couldn't group by origin (shouldn't happen), fallback to single DataRecordSet with outputDS
        if (dataSets.length === 0 && outputDS) {
            debugLogger.log('RESULTS-MODE', {
                event: 'actionDataSets-fallback-to-outputDS',
                widgetId: widgetId,
                reason: 'could-not-determine-origin-ds'
            });
            return [{
                    dataSource: outputDS,
                    type: recordsToUse.length > 0 ? 'selected' : 'loaded',
                    records: recordsToUse,
                    name: outputDS.id,
                    label: outputDS.getLabel()
                }];
        }
        return dataSets;
    }, [selectedRecords, outputDS, queryData, currentItem, records, widgetId]);
    // Memoize filtered records to prevent unnecessary re-renders that reset scroll position
    // This ensures the records prop only changes when the actual data changes, not just the array reference
    const filteredRecordsForList = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        var _a;
        return ((_a = queryData === null || queryData === void 0 ? void 0 : queryData.records) === null || _a === void 0 ? void 0 : _a.filter((record) => !removedRecordIds.has(record.getId()))) ||
            ((records === null || records === void 0 ? void 0 : records.filter(record => !removedRecordIds.has(record.getId()))) || []);
    }, [queryData === null || queryData === void 0 ? void 0 : queryData.records, records, removedRecordIds]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        // focus the back button when it is rendered
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.focusElementInKeyboardMode)(backBtnRef.current);
    });
    /**
     * Effect hook that runs when new query results arrive.
     * Resets removed records, expand state, and query data for the new results.
     * Also handles auto-selection of records when they first arrive.
     */
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        // Check if these are new records (different from what we last queried)
        // IMPORTANT: Compare against original query results, not selected results
        // This prevents removedRecordIds from being reset when records are removed
        const currentRecordIds = (records === null || records === void 0 ? void 0 : records.map(record => record.getId())) || [];
        const recordsChanged = currentRecordIds.length !== lastQueryRecordIdsRef.current.length ||
            currentRecordIds.some((id, index) => id !== lastQueryRecordIdsRef.current[index]);
        // Debug: Log when records prop changes
        debugLogger.log('RESULTS-MODE', {
            event: 'records-prop-changed',
            widgetId: widgetId,
            recordsCount: (records === null || records === void 0 ? void 0 : records.length) || 0,
            willSetQueryData: records && records.length > 0,
            removedRecordIdsCount: removedRecordIds.size,
            hasSelectedRef: hasSelectedRef.current,
            recordsChanged: recordsChanged,
            lastQueryRecordIdsCount: lastQueryRecordIdsRef.current.length,
            currentRecordIdsCount: currentRecordIds.length
        });
        // IMPORTANT: Only reset removed records if this is truly a NEW query with different records
        // Don't reset if records are the same (just a re-render or lazy load)
        if (recordsChanged) {
            debugLogger.log('RESULTS-MODE', {
                event: 'records-truly-changed-resetting-removed',
                widgetId: widgetId,
                oldRecordIdsCount: lastQueryRecordIdsRef.current.length,
                newRecordIdsCount: currentRecordIds.length
            });
            setRemovedRecordIds(new Set());
            // Update the original query record IDs ref
            lastQueryRecordIdsRef.current = currentRecordIds;
        }
        else {
            debugLogger.log('RESULTS-MODE', {
                event: 'records-not-changed-preserving-removed',
                widgetId: widgetId,
                recordIdsCount: currentRecordIds.length,
                removedRecordIdsCount: removedRecordIds.size
            });
        }
        // Reset expand all to queryItem's resultExpandByDefault setting
        setExpandAll((_a = currentItem.resultExpandByDefault) !== null && _a !== void 0 ? _a : false);
        setQueryData({
            records,
            page: 1
        });
        // Only auto-select records if:
        // 1. We have records and outputDS
        // 2. We haven't already selected these records (hasSelectedRef is false)
        // 3. OR the records have actually changed (new query results)
        // 4. AND we don't have any removed records (to prevent re-selecting removed ones)
        if (records && records.length > 0 && outputDS &&
            (!hasSelectedRef.current || recordsChanged) &&
            removedRecordIds.size === 0) {
            const recordIds = records.map(record => record.getId());
            const fdr = records;
            (() => __awaiter(this, void 0, void 0, function* () {
                try {
                    setSelectionError(null); // Clear previous errors
                    yield (0,_selection_utils__WEBPACK_IMPORTED_MODULE_13__.selectRecordsAndPublish)(widgetId, outputDS, recordIds, fdr, false, useGraphicsLayerForHighlight, graphicsLayer, mapView);
                    hasSelectedRef.current = true; // Mark as selected
                    lastSelectedRecordsRef.current = recordIds; // Store the IDs we selected
                    lastSelectedFeatureRecordsRef.current = fdr; // Store the full records for potential restoration
                    // Notify Widget and HelperSimple of selection change
                    (0,_selection_utils__WEBPACK_IMPORTED_MODULE_13__.dispatchSelectionEvent)(widgetId, recordIds, outputDS, queryItem.configId);
                }
                catch (error) {
                    const errorMessage = error instanceof Error ? error.message : 'Failed to select query results';
                    setSelectionError(errorMessage);
                    debugLogger.log('TASK', {
                        event: 'selection-failed-query-result',
                        error: errorMessage,
                        errorStack: error instanceof Error ? error.stack : undefined,
                        recordCount: recordIds.length
                    });
                }
            }))();
        }
        else if (recordsChanged && records && records.length === 0) {
            // If records were cleared, reset the selection flag
            hasSelectedRef.current = false;
            lastSelectedRecordsRef.current = [];
            setSelectionError(null); // Clear errors when clearing records
        }
        else if (removedRecordIds.size > 0) {
            debugLogger.log('RESULTS-MODE', {
                event: 'skipping-reselection-due-to-removed-records',
                widgetId: widgetId,
                removedRecordIdsCount: removedRecordIds.size,
                recordsCount: (records === null || records === void 0 ? void 0 : records.length) || 0,
                hasSelectedRef: hasSelectedRef.current,
                recordsChanged: recordsChanged
            });
        }
    }, [records, outputDS, widgetId, queryItem.configId, queryItem.resultExpandByDefault, removedRecordIds]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        // clear selection when resultSelectMode changed
        if (outputDS) {
            (0,_selection_utils__WEBPACK_IMPORTED_MODULE_13__.clearSelectionInDataSources)(outputDS, useGraphicsLayerForHighlight, graphicsLayer);
            (0,_selection_utils__WEBPACK_IMPORTED_MODULE_13__.publishSelectionMessage)(widgetId, [], outputDS, true);
        }
    }, [queryItem.resultSelectMode, outputDS, widgetId, useGraphicsLayerForHighlight, graphicsLayer]);
    // Update expandAll when queryItem changes (e.g., switching between queries)
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        const newExpandAll = (_a = queryItem.resultExpandByDefault) !== null && _a !== void 0 ? _a : false;
        debugLogger.log('RESULTS-MODE', {
            event: 'expandAll-reset-by-queryItem-change',
            widgetId,
            queryItemConfigId: queryItem.configId,
            resultExpandByDefault: queryItem.resultExpandByDefault,
            newExpandAll,
            timestamp: Date.now()
        });
        setExpandAll(newExpandAll);
        // Reset individual expansion states when query changes
        setItemExpandStates(new Map());
    }, [queryItem.configId]);
    /**
     * Monitor origin data source selection changes to detect when other widgets (like map identify)
     * clear our selections. Enhanced with identify popup detection for testing scenarios.
     * Watches the origin data source's selection state directly via polling.
     */
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        if (!outputDS)
            return;
        const originDS = (_a = outputDS.getOriginDataSources()) === null || _a === void 0 ? void 0 : _a[0];
        if (!originDS)
            return;
        const originDSId = originDS.id;
        let previousSelectedIds = [];
        let identifyPopupWasOpen = false;
        let lastLogTime = 0;
        const LOG_THROTTLE_MS = 1000; // Throttle logs to once per second
        // Initial check
        previousSelectedIds = originDS.getSelectedRecordIds() || [];
        identifyPopupWasOpen = isIdentifyPopupOpen();
        // Watch for selection changes on the origin data source
        const checkSelection = () => {
            const currentSelectedIds = originDS.getSelectedRecordIds() || [];
            const ourExpectedIds = lastSelectedRecordsRef.current;
            const hasOurSelection = ourExpectedIds.length > 0;
            const identifyPopupIsOpen = isIdentifyPopupOpen();
            // Detect if selection was cleared or changed externally
            const wasCleared = previousSelectedIds.length > 0 && currentSelectedIds.length === 0;
            const wasChanged = previousSelectedIds.length > 0 &&
                (currentSelectedIds.length !== previousSelectedIds.length ||
                    !currentSelectedIds.every(id => previousSelectedIds.includes(id)));
            // NEW: Detect if selection was added (went from empty to having records)
            const wasAdded = previousSelectedIds.length === 0 && currentSelectedIds.length > 0;
            // Track identify popup state changes
            const identifyPopupJustOpened = !identifyPopupWasOpen && identifyPopupIsOpen;
            const identifyPopupJustClosed = identifyPopupWasOpen && !identifyPopupIsOpen;
            const identifyPopupStillOpen = identifyPopupWasOpen && identifyPopupIsOpen;
            // Log identify popup state changes
            const now = Date.now();
            if (identifyPopupJustOpened || identifyPopupJustClosed) {
                debugLogger.log('SELECTION', {
                    event: identifyPopupJustOpened ? 'identify-popup-opened' : 'identify-popup-closed',
                    originDSId,
                    ourSelectionCount: ourExpectedIds.length,
                    currentSelectionCount: currentSelectedIds.length,
                    timestamp: new Date().toISOString()
                });
                // If identify popup just closed and selection was cleared, dispatch restore event
                if (identifyPopupJustClosed && wasCleared && hasOurSelection && ourExpectedIds.length > 0) {
                    const restoreEvent = new CustomEvent(RESTORE_ON_IDENTIFY_CLOSE_EVENT, {
                        detail: {
                            widgetId,
                            recordIds: ourExpectedIds,
                            outputDsId: outputDS.id,
                            queryItemConfigId: queryItem.configId
                        },
                        bubbles: true,
                        cancelable: true
                    });
                    window.dispatchEvent(restoreEvent);
                    debugLogger.log('SELECTION', {
                        event: 'identify-popup-closed-restore-requested',
                        widgetId,
                        recordCount: ourExpectedIds.length,
                        outputDsId: outputDS.id,
                        queryItemConfigId: queryItem.configId
                    });
                }
            }
            // Log ALL selection changes (not just when we have our own selection)
            if (wasCleared || wasChanged || wasAdded) {
                // Check if this matches our expected selection
                const matchesOurSelection = hasOurSelection &&
                    ourExpectedIds.length === currentSelectedIds.length &&
                    ourExpectedIds.every(id => currentSelectedIds.includes(id));
                // Determine what would happen (for testing/logging)
                const wouldRestore = wasCleared && identifyPopupIsOpen && hasOurSelection && ourExpectedIds.length > 0;
                // Determine scenario
                let scenario = 'Unknown';
                if (wasAdded && !hasOurSelection) {
                    scenario = 'TEST SCENARIO 4: Another widget selected records (we have no selection)';
                }
                else if (wasChanged && !matchesOurSelection && !hasOurSelection) {
                    scenario = 'TEST SCENARIO 5: Another widget changed selection (we have no selection)';
                }
                else if (wasChanged && !matchesOurSelection && hasOurSelection) {
                    scenario = identifyPopupIsOpen
                        ? 'TEST SCENARIO 2: Query  Identify (selection changed, not cleared)  Would NOT restore'
                        : 'TEST SCENARIO 3: Query  Another QuerySimple widget  Would NOT restore';
                }
                else if (wasCleared && hasOurSelection) {
                    scenario = identifyPopupIsOpen
                        ? 'TEST SCENARIO 1: Query  Identify  Would restore'
                        : 'TEST SCENARIO 3: Query  Another QuerySimple widget (cleared)  Would NOT restore';
                }
                else if (wasAdded && hasOurSelection) {
                    scenario = matchesOurSelection
                        ? 'Our widget selected records'
                        : 'Another widget selected different records';
                }
                // Log detection with identify popup state (throttled)
                if (now - lastLogTime > LOG_THROTTLE_MS) {
                    debugLogger.log('SELECTION', {
                        event: wasCleared ? 'selection-cleared' : wasChanged ? 'selection-changed' : 'selection-added',
                        originDSId,
                        ourExpectedCount: ourExpectedIds.length,
                        previousSelectedCount: previousSelectedIds.length,
                        currentSelectedCount: currentSelectedIds.length,
                        wasCleared,
                        wasChanged,
                        wasAdded,
                        hasOurSelection,
                        matchesOurSelection,
                        identifyPopupIsOpen,
                        identifyPopupJustOpened,
                        identifyPopupStillOpen,
                        identifyPopupJustClosed,
                        wouldRestore,
                        ourExpectedIds: ourExpectedIds.slice(0, 5),
                        previousSelectedIds: previousSelectedIds.slice(0, 5),
                        currentSelectedIds: currentSelectedIds.slice(0, 5),
                        timestamp: new Date().toISOString(),
                        note: wouldRestore
                            ? 'Would restore selection (cleared + identify popup open)'
                            : identifyPopupIsOpen && wasChanged
                                ? 'Identify popup open but selection changed (not cleared) - would not restore'
                                : wasCleared && !identifyPopupIsOpen
                                    ? 'Selection cleared, checking if identify popup opens...'
                                    : wasAdded
                                        ? hasOurSelection && matchesOurSelection
                                            ? 'Our widget selected records'
                                            : hasOurSelection && !matchesOurSelection
                                                ? 'Another widget selected different records'
                                                : 'Selection added (by another widget or external source)'
                                        : 'No identify popup detected - would not restore'
                    });
                    lastLogTime = now;
                }
            }
            previousSelectedIds = [...currentSelectedIds];
            identifyPopupWasOpen = identifyPopupIsOpen;
        };
        // Check periodically (every 500ms)
        const intervalId = setInterval(checkSelection, 500);
        return () => {
            clearInterval(intervalId);
        };
    }, [outputDS]);
    /**
     * Clears all results. Resets local state and delegates to parent's clearResult method.
     */
    const clearResults = () => __awaiter(this, void 0, void 0, function* () {
        // Log hash state before clearing
        const hashBefore = window.location.hash.substring(1);
        const urlParamsBefore = new URLSearchParams(hashBefore);
        const hashParamsBefore = {};
        urlParamsBefore.forEach((value, key) => {
            hashParamsBefore[key] = value;
        });
        debugLogger.log('HASH', {
            event: 'clearResults-called',
            widgetId,
            hashBefore: hashBefore,
            hashParamsBefore: hashParamsBefore,
            hashParamsCount: Object.keys(hashParamsBefore).length,
            timestamp: Date.now()
        });
        // Reset local selection flags
        hasSelectedRef.current = false;
        lastSelectedRecordsRef.current = [];
        // Reset local query data state
        setQueryData(null);
        setRemovedRecordIds(new Set());
        // Clear error state when clearing results
        setSelectionError(null);
        // Delegate to parent's clearResult method (via onNavBack) which handles
        // clearing selection from map, publishing messages, etc.
        yield onNavBack(true);
        // Log hash state after clearing (with delay to catch async updates)
        setTimeout(() => {
            const hashAfter = window.location.hash.substring(1);
            const urlParamsAfter = new URLSearchParams(hashAfter);
            const hashParamsAfter = {};
            urlParamsAfter.forEach((value, key) => {
                hashParamsAfter[key] = value;
            });
            debugLogger.log('HASH', {
                event: 'clearResults-completed',
                widgetId,
                hashBefore: hashBefore,
                hashAfter: hashAfter,
                hashParamsBefore: hashParamsBefore,
                hashParamsAfter: hashParamsAfter,
                hashParamsRemoved: Object.keys(hashParamsBefore).length - Object.keys(hashParamsAfter).length,
                hashParamsCountBefore: Object.keys(hashParamsBefore).length,
                hashParamsCountAfter: Object.keys(hashParamsAfter).length,
                stillHasHashParams: Object.keys(hashParamsAfter).length > 0,
                timestamp: Date.now()
            });
        }, 100);
    });
    const handleRenderDone = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(({ dataItems, pageSize, page }) => {
        debugLogger.log('RESULTS-MODE', {
            event: 'handleRenderDone-called',
            widgetId,
            queryItemConfigId: queryItem.configId,
            dataItemsCount: (dataItems === null || dataItems === void 0 ? void 0 : dataItems.length) || 0,
            pageSize,
            page,
            timestamp: Date.now()
        });
        // Use ref to get latest removedRecordIds (avoids stale closure issues with lazy loading)
        const currentRemovedIds = removedRecordIdsRef.current;
        // Filter out removed records FIRST - before any selection logic
        // This ensures removed records stay removed even during lazy loading
        const filteredItems = (dataItems === null || dataItems === void 0 ? void 0 : dataItems.filter(item => !currentRemovedIds.has(item.getId()))) || [];
        // Check if queryData has actually changed before updating state
        // This prevents unnecessary re-renders that reset scroll position
        const currentRecords = (queryData === null || queryData === void 0 ? void 0 : queryData.records) || [];
        const currentRecordIds = currentRecords.map(r => r.getId()).sort();
        const newRecordIds = filteredItems.map(r => r.getId()).sort();
        const dataChanged = currentRecordIds.length !== newRecordIds.length ||
            !currentRecordIds.every((id, idx) => id === newRecordIds[idx]) ||
            (queryData === null || queryData === void 0 ? void 0 : queryData.pageSize) !== pageSize ||
            (queryData === null || queryData === void 0 ? void 0 : queryData.page) !== page;
        // Only update state if data has actually changed
        if (dataChanged) {
            setQueryData({
                records: filteredItems,
                pageSize,
                page
            });
        }
        // Only select records that are NOT removed
        // IMPORTANT: Only re-select if the selection has actually changed to avoid resetting scroll position
        if (filteredItems && filteredItems.length > 0 && outputDS) {
            const recordIds = filteredItems.map(record => record.getId());
            const fdr = filteredItems;
            // Check what's currently selected to avoid unnecessary re-selection (which resets scroll)
            const currentlySelectedIds = outputDS.getSelectedRecordIds() || [];
            const selectionChanged = currentlySelectedIds.length !== recordIds.length ||
                !recordIds.every(id => currentlySelectedIds.includes(id));
            // Only select if the selection has actually changed
            if (selectionChanged) {
                try {
                    setSelectionError(null); // Clear previous errors
                    (0,_selection_utils__WEBPACK_IMPORTED_MODULE_13__.selectRecordsAndPublish)(widgetId, outputDS, recordIds, fdr);
                    debugLogger.log('RESULTS-MODE', {
                        event: 'handleRenderDone-selecting-filtered-records',
                        widgetId: widgetId,
                        dataItemsCount: (dataItems === null || dataItems === void 0 ? void 0 : dataItems.length) || 0,
                        filteredItemsCount: filteredItems.length,
                        removedRecordIdsCount: currentRemovedIds.size,
                        selectionChanged: true,
                        currentlySelectedCount: currentlySelectedIds.length,
                        newSelectionCount: recordIds.length
                    });
                }
                catch (error) {
                    const errorMessage = error instanceof Error ? error.message : 'Failed to select query results';
                    setSelectionError(errorMessage);
                    debugLogger.log('TASK', {
                        event: 'selection-failed-handleRenderDone',
                        error: errorMessage,
                        errorStack: error instanceof Error ? error.stack : undefined,
                        recordCount: recordIds.length
                    });
                }
            }
            else {
                debugLogger.log('RESULTS-MODE', {
                    event: 'handleRenderDone-skipping-reselection',
                    widgetId: widgetId,
                    dataItemsCount: (dataItems === null || dataItems === void 0 ? void 0 : dataItems.length) || 0,
                    filteredItemsCount: filteredItems.length,
                    removedRecordIdsCount: currentRemovedIds.size,
                    reason: 'selection-unchanged',
                    currentlySelectedCount: currentlySelectedIds.length
                });
            }
        }
    }, [outputDS, widgetId, queryData]);
    const handleDataSourceInfoChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        var _a, _b;
        const ds = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().getDataSource(outputDS === null || outputDS === void 0 ? void 0 : outputDS.id);
        const dsRecords = ds === null || ds === void 0 ? void 0 : ds.getSelectedRecords();
        const selectedIds = (_a = ds === null || ds === void 0 ? void 0 : ds.getSelectedRecordIds()) !== null && _a !== void 0 ? _a : [];
        // Capture records prop before using it (to avoid shadowing)
        const recordsProp = records;
        // Debug: Log what handleDataSourceInfoChange sees
        debugLogger.log('RESULTS-MODE', {
            event: 'handleDataSourceInfoChange-fired',
            widgetId: widgetId,
            outputDSId: outputDS === null || outputDS === void 0 ? void 0 : outputDS.id,
            dsId: ds === null || ds === void 0 ? void 0 : ds.id,
            selectedRecordsFromDS: (dsRecords === null || dsRecords === void 0 ? void 0 : dsRecords.length) || 0,
            selectedIdsFromDS: selectedIds.length,
            currentSelectedRecordsState: (selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) || 0,
            recordsPropCount: (recordsProp === null || recordsProp === void 0 ? void 0 : recordsProp.length) || 0,
            removedRecordIdsCount: removedRecordIds.size,
            timestamp: Date.now()
        });
        // If we have records in the prop (accumulated records) but DS shows 0 selected,
        // and we currently have selectedRecords, this is likely a query switch in "Add to" mode
        // where re-selection hasn't happened yet. Don't clear selectedRecords - wait for re-selection.
        if (recordsProp && recordsProp.length > 0 && selectedIds.length === 0 && selectedRecords && selectedRecords.length > 0) {
            debugLogger.log('RESULTS-MODE', {
                event: 'handleDataSourceInfoChange-skipping-clear-during-query-switch',
                widgetId: widgetId,
                reason: 'waiting-for-reselection',
                recordsPropCount: recordsProp.length,
                currentSelectedRecordsCount: selectedRecords.length
            });
            return; // Skip updating - re-selection is coming
        }
        // IMPORTANT: Filter out removed records from DS selection before comparing/syncing
        // This prevents removed records from being re-added when scrolling triggers this callback
        const filteredDsRecords = (_b = dsRecords === null || dsRecords === void 0 ? void 0 : dsRecords.filter((record) => !removedRecordIds.has(record.getId()))) !== null && _b !== void 0 ? _b : [];
        const filteredSelectedIds = selectedIds.filter(id => !removedRecordIds.has(id));
        // If DS has more selected than our state, but the difference is entirely removed records, don't sync
        if (filteredSelectedIds.length === ((selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) || 0) && selectedIds.length > filteredSelectedIds.length) {
            debugLogger.log('RESULTS-MODE', {
                event: 'handleDataSourceInfoChange-skipping-sync-due-to-removed-records',
                widgetId: widgetId,
                reason: 'ds-selection-includes-removed-records',
                dsSelectedCount: selectedIds.length,
                filteredCount: filteredSelectedIds.length,
                componentStateCount: (selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) || 0,
                removedRecordIdsCount: removedRecordIds.size
            });
            return; // Skip syncing - the mismatch is due to removed records
        }
        let shouldUpdate = false;
        if (filteredSelectedIds.length !== (selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length)) {
            shouldUpdate = true;
        }
        else { // equal length
            shouldUpdate = filteredSelectedIds.some(id => {
                const target = selectedRecords.find((item) => item.getId() === id);
                return target == null;
            });
        }
        if (shouldUpdate) {
            debugLogger.log('RESULTS-MODE', {
                event: 'handleDataSourceInfoChange-updating-selectedRecords',
                widgetId: widgetId,
                oldCount: (selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) || 0,
                newCount: filteredDsRecords.length,
                note: 'filtered-out-removed-records'
            });
            debugLogger.log('RESULTS-MODE', {
                event: 'handleDataSourceInfoChange-updating-selectedRecords',
                widgetId: widgetId,
                oldCount: (selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) || 0,
                newCount: filteredDsRecords.length,
                oldSelectedIds: (selectedRecords || []).map(r => r.getId()).slice(0, 5),
                newSelectedIds: filteredSelectedIds.slice(0, 5),
                note: 'filtered-out-removed-records',
                timestamp: Date.now()
            });
            setSelectedRecords(filteredDsRecords);
        }
        else {
            debugLogger.log('RESULTS-MODE', {
                event: 'handleDataSourceInfoChange-skipping-update',
                widgetId: widgetId,
                reason: 'no-change-detected',
                timestamp: Date.now()
            });
        }
    }, [outputDS === null || outputDS === void 0 ? void 0 : outputDS.id, selectedRecords, widgetId, records, removedRecordIds]);
    /**
     * Generates the tip message showing how many features are displayed.
     * Filters out removed records to show accurate counts.
     *
     * @returns Formatted string like "Features displayed: 118 / 121"
     */
    const getTipMessage = () => {
        if (queryData && queryData.records) {
            // Filter out removed records for display count
            const displayedRecords = queryData.records.filter((record) => !removedRecordIds.has(record.getId()));
            const displayedCount = displayedRecords.length;
            // FORCED: Always SimpleList, so always use simple display format
            return `${getI18nMessage('featuresDisplayed')}: ${displayedCount} / ${resultCount}`;
            // removed by dead control flow
{}
            // removed by dead control flow
{}
            // removed by dead control flow
{}
            // removed by dead control flow
{}
            // removed by dead control flow
{}
        }
        return '';
    };
    /**
     * Toggles expand/collapse state for all result items.
     * When toggled, all result items will be expanded or collapsed together.
     * Updates individual item expansion states in the map to maintain state when items are removed.
     */
    const toggleExpandAll = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        setExpandAll(prev => {
            const newValue = !prev;
            debugLogger.log('EXPAND-COLLAPSE', {
                event: 'toggleExpandAll-clicked',
                widgetId,
                previousValue: prev,
                newValue,
                timestamp: Date.now()
            });
            // Update all current items in the map with the new expansion state
            setItemExpandStates(prevMap => {
                const newMap = new Map(prevMap);
                // Get all current record IDs from filtered records
                const allRecordIds = filteredRecordsForList.map(r => r.getId());
                allRecordIds.forEach(id => {
                    newMap.set(id, newValue);
                });
                debugLogger.log('EXPAND-COLLAPSE', {
                    event: 'itemExpandStates-updated',
                    widgetId,
                    newValue,
                    updatedCount: allRecordIds.length,
                    recordIds: allRecordIds.slice(0, 10), // Log first 10 IDs
                    timestamp: Date.now()
                });
                return newMap;
            });
            return newValue;
        });
    }, [widgetId, filteredRecordsForList]);
    const resultUseOutputDataSource = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)({
            dataSourceId: queryItem.outputDataSourceId,
            mainDataSourceId: queryItem.outputDataSourceId
        });
    }, [queryItem === null || queryItem === void 0 ? void 0 : queryItem.outputDataSourceId]);
    const handleEscape = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.focusElementInKeyboardMode)(backBtnRef.current);
    }, []);
    // Keep records selected and zoom to clicked record
    // Records remain selected as long as they're in the results
    // Clicking a record always zooms to it on the map (this behavior is always enabled)
    const toggleSelection = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((data) => {
        var _a, _b;
        // Ensure the clicked record is selected (it should already be, but ensure it)
        const selectedDatas = (_a = outputDS.getSelectedRecords()) !== null && _a !== void 0 ? _a : [];
        const selectedIds = (_b = outputDS.getSelectedRecordIds()) !== null && _b !== void 0 ? _b : [];
        const dataId = data.getId();
        // If this record isn't already selected, add it to the selection
        if (!selectedIds.includes(dataId)) {
            const updatedSelectedDatas = [...selectedDatas, data];
            const recordIds = updatedSelectedDatas.map(record => record.getId());
            // Select records and publish selection message using utility function
            (0,_selection_utils__WEBPACK_IMPORTED_MODULE_13__.selectRecordsAndPublish)(widgetId, outputDS, recordIds, updatedSelectedDatas, true);
        }
        // Zoom to the clicked record using data actions (always enabled - user wants to keep this behavior)
        const dataSet = {
            dataSource: outputDS,
            records: [data],
            type: 'selected',
            name: outputDS.getLabel()
        };
        // Get available data actions and find the zoomToFeature action
        jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataActionManager.getInstance().getSupportedActions(widgetId, [dataSet], jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataLevel.Records)
            .then(actionCategories => {
            // Look for zoomToFeature action in any category
            let zoomAction = null;
            for (const category in actionCategories) {
                const actions = actionCategories[category];
                zoomAction = actions.find((action) => action.name === 'zoomToFeature' || action.id === 'zoomToFeature');
                if (zoomAction)
                    break;
            }
            if (zoomAction) {
                // Execute the zoom action
                return jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataActionManager.getInstance().executeDataAction(zoomAction, [dataSet], jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataLevel.Records, widgetId);
            }
        })
            .catch(error => {
            // Silently handle errors
        });
    }, [outputDS, widgetId]);
    /**
     * Removes a record from the results and selection.
     * If removing the last record, automatically clears all results
     * by calling the trash can logic (same as clicking Clear button).
     * This ensures the UI doesn't show "Features displayed: 0 / 1" when all results are removed.
     *
     * @param data - The feature data record to remove
     */
    const removeRecord = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((data) => {
        var _a, _b;
        const dataId = data.getId();
        const currentExpandAll = expandAll;
        // Log hash state when removing individual record
        const hash = window.location.hash.substring(1);
        const urlParams = new URLSearchParams(hash);
        const hashParams = {};
        urlParams.forEach((value, key) => {
            hashParams[key] = value;
        });
        debugLogger.log('EXPAND-COLLAPSE', {
            event: 'removeRecord-started',
            widgetId,
            removedRecordId: dataId,
            currentExpandAll,
            timestamp: Date.now()
        });
        debugLogger.log('HASH', {
            event: 'removeRecord-called',
            widgetId,
            removedRecordId: dataId,
            hash: hash,
            hashParams: hashParams,
            hashParamsCount: Object.keys(hashParams).length,
            timestamp: Date.now()
        });
        // Remove from expansion states map
        setItemExpandStates(prevMap => {
            const newMap = new Map(prevMap);
            newMap.delete(dataId);
            debugLogger.log('EXPAND-COLLAPSE', {
                event: 'itemExpandStates-cleaned-up',
                widgetId,
                removedRecordId: dataId,
                remainingCount: newMap.size,
                timestamp: Date.now()
            });
            return newMap;
        });
        // Add to removed records set
        setRemovedRecordIds(prev => {
            var _a, _b;
            const newSet = new Set(prev).add(dataId);
            // If all records are now removed, clear everything by calling trash can logic
            // IMPORTANT: Compare against actual displayed records count, not resultCount
            // resultCount only reflects the latest query, but in "Add to" mode we display accumulated records
            // Use queryData.records.length (before filtering) as the source of truth for displayed records
            // Fall back to accumulatedRecords.length if in accumulation mode, or resultCount as last resort
            let currentDisplayedCount = ((_a = queryData === null || queryData === void 0 ? void 0 : queryData.records) === null || _a === void 0 ? void 0 : _a.length) || 0;
            if (currentDisplayedCount === 0) {
                // If queryData doesn't have records yet, check if we're in accumulation mode
                const isAccumulationMode = resultsMode === _config__WEBPACK_IMPORTED_MODULE_4__.SelectionType.AddToSelection ||
                    resultsMode === _config__WEBPACK_IMPORTED_MODULE_4__.SelectionType.RemoveFromSelection;
                if (isAccumulationMode && accumulatedRecords && accumulatedRecords.length > 0) {
                    currentDisplayedCount = accumulatedRecords.length;
                }
                else {
                    // Last resort: use resultCount (but this might be incorrect in accumulation mode)
                    currentDisplayedCount = resultCount;
                }
            }
            debugLogger.log('RESULTS-MODE', {
                event: 'removeRecord-checking-all-removed',
                widgetId,
                removedRecordIdsSize: newSet.size,
                currentDisplayedCount,
                resultCount,
                queryDataRecordsCount: ((_b = queryData === null || queryData === void 0 ? void 0 : queryData.records) === null || _b === void 0 ? void 0 : _b.length) || 0,
                accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0,
                resultsMode,
                willNavigateBack: newSet.size === currentDisplayedCount && currentDisplayedCount > 0,
                timestamp: Date.now()
            });
            if (newSet.size === currentDisplayedCount && currentDisplayedCount > 0) {
                // All displayed records removed - clear everything (same as clicking trash can button)
                onNavBack(true);
                return newSet;
            }
            return newSet;
        });
        // Update queryData to filter out the removed record
        setQueryData(prevData => {
            if (!prevData)
                return prevData;
            const filteredRecords = prevData.records.filter((record) => record.getId() !== dataId);
            return Object.assign(Object.assign({}, prevData), { records: filteredRecords });
        });
        // ALWAYS remove from origin data source selections (same as Remove mode)
        // This properly removes records from the map selection, handling single or multiple origin sources
        // Also removes graphics from graphics layer if using graphics layer highlighting
        (0,_results_management_utils__WEBPACK_IMPORTED_MODULE_14__.removeRecordsFromOriginSelections)(widgetId, [data], outputDS, useGraphicsLayerForHighlight, graphicsLayer);
        // Update outputDS selection
        const selectedDatas = (_a = outputDS.getSelectedRecords()) !== null && _a !== void 0 ? _a : [];
        const updatedSelectedDatas = selectedDatas.filter(record => record.getId() !== dataId);
        const recordIds = updatedSelectedDatas.map(record => record.getId());
        // Update outputDS selection
        if (typeof outputDS.selectRecordsByIds === 'function') {
            outputDS.selectRecordsByIds(recordIds, updatedSelectedDatas);
        }
        // IMPORTANT: Publish custom event so widget can update lastSelection state
        // This ensures restoration restores the correct (updated) count
        const originDS = (_b = outputDS.getOriginDataSources()) === null || _b === void 0 ? void 0 : _b[0];
        const dataSourceId = originDS === null || originDS === void 0 ? void 0 : originDS.id;
        const selectionEvent = new CustomEvent('querysimple-selection-changed', {
            detail: {
                widgetId,
                recordIds, // Updated record IDs (with removed record excluded)
                dataSourceId,
                outputDsId: outputDS.id,
                queryItemConfigId: queryItem.configId
            },
            bubbles: true,
            cancelable: true
        });
        window.dispatchEvent(selectionEvent);
        // If in accumulation mode, also remove from accumulated records
        const isAccumulationMode = resultsMode === _config__WEBPACK_IMPORTED_MODULE_4__.SelectionType.AddToSelection ||
            resultsMode === _config__WEBPACK_IMPORTED_MODULE_4__.SelectionType.RemoveFromSelection;
        if (isAccumulationMode && onAccumulatedRecordsChange && accumulatedRecords && accumulatedRecords.length > 0) {
            const remainingRecords = (0,_results_management_utils__WEBPACK_IMPORTED_MODULE_14__.removeResultsFromAccumulated)(outputDS, [data], accumulatedRecords);
            debugLogger.log('RESULTS-MODE', {
                event: 'x-button-removed-from-accumulated',
                widgetId,
                removedRecordId: dataId,
                accumulatedRecordsCountBefore: accumulatedRecords.length,
                remainingRecordsCount: remainingRecords.length,
                wasRemoved: remainingRecords.length < accumulatedRecords.length
            });
            onAccumulatedRecordsChange(remainingRecords);
        }
        // Log after removeRecord completes to check if expandAll changed
        setTimeout(() => {
            debugLogger.log('RESULTS-MODE', {
                event: 'removeRecord-completed',
                widgetId,
                removedRecordId: dataId,
                expandAllBefore: currentExpandAll,
                expandAllAfter: expandAll,
                expandAllChanged: currentExpandAll !== expandAll,
                expandByDefaultProp: expandAll, // What will be passed to SimpleList
                timestamp: Date.now()
            });
        }, 0);
    }, [outputDS, widgetId, resultCount, onNavBack, resultsMode, accumulatedRecords, onAccumulatedRecordsChange, queryItem.configId, expandAll]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'query-result h-100', css: resultStyle, role: 'listbox', "aria-label": getI18nMessage('results'), children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceComponent, { useDataSource: resultUseOutputDataSource, onDataSourceInfoChange: handleDataSourceInfoChange }), selectionError && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `padding: 0 16px; margin-top: 8px;`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_15__.ErrorMessage, { error: selectionError, onDismiss: () => setSelectionError(null) }) })), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'query-result__header d-flex align-items-center mx-4', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { "aria-label": getI18nMessage('back'), ref: backBtnRef, className: 'p-0 mr-2', size: 'sm', variant: 'text', color: 'inherit', icon: true, onClick: () => { onNavBack(); }, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_directional_arrow_left__WEBPACK_IMPORTED_MODULE_9__.ArrowLeftOutlined, { autoFlip: true }) }), (_b = currentItem.resultsLabel) !== null && _b !== void 0 ? _b : getI18nMessage('results'), ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { title: getI18nMessage('clearResult'), placement: 'bottom', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { className: 'ml-auto', icon: true, size: 'sm', variant: 'text', color: 'inherit', onClick: clearResults, "aria-label": getI18nMessage('clearResult'), children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Icon, { icon: iconMap.toolDelete }) }) }), enableDataAction && outputDS && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `width: 1px; height: 16px; background-color: var(--sys-color-divider-input);` }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.DataActionList, { widgetId: widgetId, dataSets: actionDataSets, listStyle: jimu_ui__WEBPACK_IMPORTED_MODULE_2__.DataActionListStyle.Dropdown, buttonSize: 'sm', buttonType: 'tertiary', extraActions: extraActions })] }))] }))] }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'query-result-container mt-1', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'query-result-info mb-2 px-4 d-flex align-items-center justify-content-between', role: 'alert', "aria-live": 'polite', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { children: getTipMessage() }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'd-flex align-items-center', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { title: expandAll ? getI18nMessage('collapseAll') : getI18nMessage('expandAll'), placement: 'top', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: 'sm', type: 'tertiary', icon: true, onClick: toggleExpandAll, "aria-label": expandAll ? getI18nMessage('collapseAll') : getI18nMessage('expandAll'), children: expandAll ? (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_directional_collapse_all__WEBPACK_IMPORTED_MODULE_11__.CollapseAllOutlined, {}) : (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_directional_expand_all__WEBPACK_IMPORTED_MODULE_10__.ExpandAllOutlined, {}) }) }) })] }), resultCount > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_simple_list__WEBPACK_IMPORTED_MODULE_6__.SimpleList, { widgetId: widgetId, queryItem: queryItem, outputDS: outputDS, records: filteredRecordsForList, direction: direction, onEscape: handleEscape, onSelectChange: toggleSelection, onRemove: removeRecord, expandByDefault: expandAll, itemExpandStates: itemExpandStates, removedRecordIds: removedRecordIds, onRenderDone: handleRenderDone }, 'simple'))] })] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-context.tsx":
/*!*********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-context.tsx ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTaskContext: () => (/* binding */ QueryTaskContext)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");

const QueryTaskContext = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createContext({
    resetSymbol: null
});


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-form.tsx":
/*!******************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-form.tsx ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTaskForm: () => (/* binding */ QueryTaskForm)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");
/* harmony import */ var jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-ui/basic/sql-expression-runtime */ "jimu-ui/basic/sql-expression-runtime");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _default_query_item__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../default-query-item */ "./your-extensions/widgets/query-simple/src/default-query-item.ts");
/* harmony import */ var _query_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./query-utils */ "./your-extensions/widgets/query-simple/src/runtime/query-utils.ts");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _query_task_spatial_form__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./query-task-spatial-form */ "./your-extensions/widgets/query-simple/src/runtime/query-task-spatial-form.tsx");
/* harmony import */ var _useAutoHeight__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./useAutoHeight */ "./your-extensions/widgets/query-simple/src/runtime/useAutoHeight.tsx");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/* harmony import */ var _query_task_context__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./query-task-context */ "./your-extensions/widgets/query-simple/src/runtime/query-task-context.tsx");
/* harmony import */ var jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! jimu-icons/outlined/suggested/info */ "./jimu-icons/outlined/suggested/info.tsx");
/* harmony import */ var _selection_utils__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");

/** @jsx jsx */











const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_11__.createQuerySimpleDebugLogger)();



const getFormStyle = (isAutoHeight) => {
    return (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
    flex: 1 1 auto;
    display: flex;
    flex-direction: column;
    min-height: 0;
    .form-title {
      color: var(--sys-color-surface-paper-text);
      font-weight: 500;
      font-size: 0.8125rem;
      line-height: 1.5;
      margin-top: 0 !important;
    }
    .query-form__content {
      flex: 1 1 ${isAutoHeight ? 'auto' : 'auto'};
      max-height: ${isAutoHeight ? '61.8vh' : 'none'};
      overflow: auto;
      padding-bottom: 0;
    }
    .query-form__actions {
      flex-shrink: 0;
      margin-top: 0;
      padding-top: 4px;
    }
  `;
};
function QueryTaskForm(props) {
    var _a;
    const { widgetId, configId, outputDS, spatialFilterEnabled, datasourceReady, onFormSubmit, dataActionFilter, initialInputValue, onHashParameterUsed, queryItemShortId } = props;
    const preDataActionFilter = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.usePrevious(dataActionFilter);
    const queryItem = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const widgetJson = state.appConfig.widgets[widgetId];
        return widgetJson.config.queryItems.find(item => item.configId === configId);
    });
    const currentItem = Object.assign({}, _default_query_item__WEBPACK_IMPORTED_MODULE_6__.DEFAULT_QUERY_ITEM, queryItem);
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_8__["default"]);
    const [resetSymbol, setResetSymbol] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    // Runtime zoom preference - initialized with config value, can be overridden by user
    const [runtimeZoomToSelected, setRuntimeZoomToSelected] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState((_a = queryItem === null || queryItem === void 0 ? void 0 : queryItem.zoomToSelected) !== null && _a !== void 0 ? _a : true);
    // Sync runtime zoom preference when query item changes (e.g., switching between queries)
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        setRuntimeZoomToSelected((_a = queryItem === null || queryItem === void 0 ? void 0 : queryItem.zoomToSelected) !== null && _a !== void 0 ? _a : true);
    }, [queryItem === null || queryItem === void 0 ? void 0 : queryItem.zoomToSelected, queryItem === null || queryItem === void 0 ? void 0 : queryItem.configId]);
    // const [dataSource, setDataSource] = React.useState<DataSource>(null)
    const { useAttributeFilter, useSpatialFilter, spatialFilterTypes, sqlExprObj, spatialMapWidgetIds, spatialInteractiveCreateToolTypes, spatialRelationUseDataSources, spatialIncludeRuntimeData, spatialRelations, spatialRelationEnableBuffer, spatialRelationBufferDistance, spatialRelationBufferUnit, spatialInteractiveEnableBuffer, spatialInteractiveBufferDistance, spatialInteractiveBufferUnit, attributeFilterLabel = getI18nMessage('attributeFilter'), spatialFilterLabel = getI18nMessage('spatialFilter'), attributeFilterDesc, spatialFilterDesc } = currentItem;
    const [attributeFilterSqlExprObj, setAttributeFilterSqlExprObj] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(sqlExprObj);
    const spatialFilterObjRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const spatialRelationRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(_config__WEBPACK_IMPORTED_MODULE_5__.SpatialRelation.Intersect);
    const bufferRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const applyButtonRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const formContentRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const isAutoHeight = (0,_useAutoHeight__WEBPACK_IMPORTED_MODULE_10__.useAutoHeight)();
    const showClauseNumber = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef((0,jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__.getShownClauseNumberByExpression)(sqlExprObj));
    const initialValueSetRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null); // Track which configId we've set the value for
    const lastValueSetRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null); // Track the last value that was set
    const hashTriggeredRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(false); // Track if query was triggered via hash parameter
    const [isTypingValid, setIsTypingValid] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(false);
    // Monitor focus and input events within the query form
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        const handleFocus = (e) => {
            const target = e.target;
            if (target.tagName === 'INPUT') {
                const val = target.value;
                setIsTypingValid((0,_query_utils__WEBPACK_IMPORTED_MODULE_7__.isQueryInputValid)(val));
                debugLogger.log('FORM', {
                    event: 'input-focused',
                    configId,
                    tagName: target.tagName,
                    type: target.type,
                    value: val
                });
            }
        };
        const handleInput = (e) => {
            const target = e.target;
            if (target.tagName === 'INPUT') {
                const val = target.value;
                const isValid = (0,_query_utils__WEBPACK_IMPORTED_MODULE_7__.isQueryInputValid)(val);
                setIsTypingValid(isValid);
                debugLogger.log('FORM', {
                    event: 'input-typing',
                    configId,
                    value: val,
                    isTypingValid: isValid
                });
            }
        };
        const handleFocusOut = (e) => {
            // Small delay to allow state to catch up
            setTimeout(() => {
                setIsTypingValid(false);
            }, 50);
        };
        const container = formContentRef.current;
        if (container) {
            container.addEventListener('focusin', handleFocus);
            container.addEventListener('input', handleInput);
            container.addEventListener('focusout', handleFocusOut);
        }
        return () => {
            if (container) {
                container.removeEventListener('focusin', handleFocus);
                container.removeEventListener('input', handleInput);
                container.removeEventListener('focusout', handleFocusOut);
            }
        };
    }, [configId]);
    // Check if any attribute filter input is valid
    const isInputValid = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        // If the user is currently typing something valid, the form is valid
        if (isTypingValid) {
            debugLogger.log('FORM', {
                event: 'validation-check-instant',
                configId,
                isValid: true
            });
            return true;
        }
        if (!(attributeFilterSqlExprObj === null || attributeFilterSqlExprObj === void 0 ? void 0 : attributeFilterSqlExprObj.parts) || attributeFilterSqlExprObj.parts.length === 0) {
            return true; // If no parts, we assume it's valid (e.g. spatial-only query)
        }
        // Check if at least one SINGLE part has a valid value
        const hasValidValue = attributeFilterSqlExprObj.parts.some(part => {
            var _a, _b, _c, _d;
            // Accessing Immutable structures requires care. If dot notation fails, 
            // the framework components might be using .get() or other methods.
            // We'll be inclusive here: if it's not a SINGLE part, we treat it as valid.
            if (part.type === 'SINGLE') {
                const val = (_a = part.valueOptions) === null || _a === void 0 ? void 0 : _a.value;
                const source = (_b = part.valueOptions) === null || _b === void 0 ? void 0 : _b.source;
                // If the source is NOT 'USER_INPUT', it's likely a list/dropdown (UNIQUE_VALUES, FIELD_VALUE)
                // We also check for part.dataSource which is common for list-based selections
                // We treat these as "List" types which are exempted from the empty-string rule.
                const isList = (source && source !== 'USER_INPUT') || ((_c = part.dataSource) === null || _c === void 0 ? void 0 : _c.source);
                const isValid = (0,_query_utils__WEBPACK_IMPORTED_MODULE_7__.isQueryInputValid)(val, !!isList);
                debugLogger.log('FORM', {
                    event: 'validation-check-detail',
                    configId,
                    partType: part.type,
                    source,
                    hasDataSource: !!part.dataSource,
                    dataSourceSource: (_d = part.dataSource) === null || _d === void 0 ? void 0 : _d.source,
                    isList: !!isList,
                    value: val,
                    isValid
                });
                debugLogger.log('FORM', {
                    event: 'validation-check',
                    configId,
                    partType: part.type,
                    source,
                    isList,
                    value: val,
                    valueType: typeof val,
                    isValid
                });
                return isValid;
            }
            return true;
        });
        return hasValidValue;
    }, [attributeFilterSqlExprObj, configId, isTypingValid]);
    const originDS = outputDS === null || outputDS === void 0 ? void 0 : outputDS.getOriginDataSources()[0];
    /**
     * Sets the input value from URL hash parameters when:
     * 1. Datasource is ready
     * 2. We have an initialInputValue from URL hash
     * 3. We haven't already set it for this configId, OR the value has changed
     *
     * Uses both React state updates and DOM manipulation to ensure the value
     * is properly set in SqlExpressionRuntime's internal state.
     */
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        // Reset flag if configId changed (switched to different query)
        if (initialValueSetRef.current !== null && initialValueSetRef.current !== configId) {
            initialValueSetRef.current = null;
            lastValueSetRef.current = null;
            hashTriggeredRef.current = false; // Reset hash trigger flag when switching queries
            setIsTypingValid(false); // Reset typing validation
        }
        // Check if value has changed for the same configId
        const valueChanged = lastValueSetRef.current !== null &&
            lastValueSetRef.current !== initialInputValue &&
            initialValueSetRef.current === configId;
        // Set the value if:
        // - We haven't set it for this configId yet, OR
        // - The value has changed for the same configId (hash parameter updated)
        const shouldSetValue = datasourceReady &&
            initialInputValue &&
            ((_a = sqlExprObj === null || sqlExprObj === void 0 ? void 0 : sqlExprObj.parts) === null || _a === void 0 ? void 0 : _a.length) > 0 &&
            (initialValueSetRef.current !== configId || valueChanged);
        if (shouldSetValue) {
            const firstPart = sqlExprObj.parts[0];
            // Check if the first part is a SINGLE clause (not a SqlClauseSet)
            if (firstPart && 'type' in firstPart && firstPart.type === 'SINGLE' && 'valueOptions' in firstPart) {
                // Update the expression object with the initial value
                const updated = sqlExprObj.setIn(['parts', '0', 'valueOptions', 'value'], initialInputValue);
                setAttributeFilterSqlExprObj(updated);
                // Update clause number for the updated expression
                showClauseNumber.current = (0,jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__.getShownClauseNumberByExpression)(updated);
                initialValueSetRef.current = configId;
                lastValueSetRef.current = initialInputValue;
                // Also set the value directly on the input element after a delay to ensure component is rendered
                // This is necessary because SqlExpressionRuntime may not sync from the expression prop alone
                const timeoutId = setTimeout(() => {
                    var _a;
                    // Find the input element within SqlExpressionRuntime
                    // Use data-widgetid (standard ExB attribute) to isolate the correct widget instance
                    const formElement = ((_a = document.querySelector(`[data-widgetid="${widgetId}"]`)) === null || _a === void 0 ? void 0 : _a.querySelector('.query-form')) ||
                        document.querySelector(`.widget-runtime[data-widgetid="${widgetId}"]`) ||
                        document.querySelector('.query-form');
                    if (formElement) {
                        // Look for text input elements
                        const textInputs = formElement.querySelectorAll('input[type="text"]');
                        textInputs.forEach((input) => {
                            var _a;
                            // Update the value if input is empty OR if the value has changed (hash parameter updated)
                            const shouldUpdate = !input.value ||
                                input.value.trim() === '' ||
                                input.value !== initialInputValue;
                            if (shouldUpdate) {
                                // Focus the input first
                                input.focus();
                                // Set the value
                                input.value = initialInputValue;
                                // Create and dispatch input event with proper properties
                                const inputEvent = new Event('input', { bubbles: true, cancelable: true });
                                Object.defineProperty(inputEvent, 'target', { value: input, enumerable: true });
                                input.dispatchEvent(inputEvent);
                                // Create and dispatch change event
                                const changeEvent = new Event('change', { bubbles: true, cancelable: true });
                                Object.defineProperty(changeEvent, 'target', { value: input, enumerable: true });
                                input.dispatchEvent(changeEvent);
                                // Also try React's synthetic event approach using native value setter
                                const nativeInputValueSetter = (_a = Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype, 'value')) === null || _a === void 0 ? void 0 : _a.set;
                                if (nativeInputValueSetter) {
                                    nativeInputValueSetter.call(input, initialInputValue);
                                    const reactEvent = new Event('input', { bubbles: true });
                                    input.dispatchEvent(reactEvent);
                                }
                                // Blur to trigger any validation or state updates
                                input.blur();
                            }
                        });
                        // After setting values and blurring, verify input value is set before triggering Apply button
                        setTimeout(() => {
                            var _a;
                            if (applyButtonRef.current && !applyButtonRef.current.disabled && datasourceReady) {
                                // VERIFICATION: Ensure input value is actually set before executing query
                                // This is especially important for grouped queries where dropdowns need to be synchronized first
                                const formElement = ((_a = document.querySelector(`[data-widgetid="${widgetId}"]`)) === null || _a === void 0 ? void 0 : _a.querySelector('.query-form')) ||
                                    document.querySelector('.query-form');
                                if (formElement && initialInputValue) {
                                    const textInputs = formElement.querySelectorAll('input[type="text"]');
                                    let inputValueSet = false;
                                    textInputs.forEach((input) => {
                                        if (input.value === initialInputValue) {
                                            inputValueSet = true;
                                        }
                                    });
                                    if (!inputValueSet) {
                                        debugLogger.log('FORM', {
                                            event: 'input-value-not-set-retrying',
                                            expectedValue: initialInputValue,
                                            queryItemShortId,
                                            action: 'will-retry-after-delay',
                                            note: 'Input value not set, retrying to ensure synchronization'
                                        });
                                        // Retry after a short delay to allow state to sync
                                        setTimeout(() => {
                                            // Recursively call verifyAndApply if needed, but limit retries
                                            // For now, just retry once more
                                            if (applyButtonRef.current && !applyButtonRef.current.disabled && datasourceReady) {
                                                // Set hashTriggeredRef to force zoom for hash-triggered queries
                                                hashTriggeredRef.current = true;
                                                // Remove hash parameter from URL before Apply is triggered
                                                if (onHashParameterUsed && queryItemShortId) {
                                                    onHashParameterUsed(queryItemShortId);
                                                }
                                                // Auto-trigger Apply button
                                                applyButtonRef.current.click();
                                            }
                                        }, 300);
                                        return; // Exit early, will retry
                                    }
                                }
                                // Input value is set correctly, proceed with execution
                                debugLogger.log('FORM', {
                                    event: 'input-value-verified',
                                    expectedValue: initialInputValue,
                                    queryItemShortId,
                                    note: 'Input value verified, proceeding with query execution'
                                });
                                // Set hashTriggeredRef to force zoom for hash-triggered queries
                                hashTriggeredRef.current = true;
                                // Remove hash parameter from URL before Apply is triggered to prevent re-execution
                                if (onHashParameterUsed && queryItemShortId) {
                                    onHashParameterUsed(queryItemShortId);
                                }
                                // Auto-trigger Apply button to execute the query with the populated value
                                applyButtonRef.current.click();
                            }
                        }, 200); // Small delay after blur to ensure state is synced
                    }
                }, 500); // Longer delay to ensure component is fully rendered
                return () => clearTimeout(timeoutId);
            }
        }
        // The sqlExprObj.parts may change but the displaySQL is the same
        if (!sqlExprObj) {
            showClauseNumber.current = 0;
            setAttributeFilterSqlExprObj(null);
        }
        else {
            showClauseNumber.current = (0,jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__.getShownClauseNumberByExpression)(sqlExprObj);
            // Only update if we haven't set the initial value for this configId yet, or if we don't have an initial value
            if (initialValueSetRef.current !== configId || !initialInputValue) {
                setAttributeFilterSqlExprObj(sqlExprObj);
            }
        }
    }, [sqlExprObj, initialInputValue, datasourceReady, configId, widgetId, onHashParameterUsed, queryItemShortId]);
    const applyQuery = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        var _a, _b;
        // When the 'apply' button is clicked, it should clear the selection from the previous result list
        (0,_selection_utils__WEBPACK_IMPORTED_MODULE_14__.clearSelectionInDataSources)(outputDS);
        if (outputDS) {
            const originDs = outputDS.getOriginDataSources()[0];
            if (originDs) {
                const dataViewConfig = originDs.getDataViewConfig();
                const maximum = dataViewConfig === null || dataViewConfig === void 0 ? void 0 : dataViewConfig.maximum;
                if (maximum != null && maximum > 0) {
                    jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().updateDataSourceByDataSourceJson(outputDS, outputDS.getDataSourceJson().setIn(['query', 'maximum'], maximum));
                }
            }
        }
        // Force zoom for hash-triggered queries, otherwise use runtime preference
        const zoomToUse = hashTriggeredRef.current ? true : runtimeZoomToSelected;
        // Sanitize user input before submission
        const sanitizedSqlExprObj = (0,_query_utils__WEBPACK_IMPORTED_MODULE_7__.sanitizeSqlExpression)(attributeFilterSqlExprObj);
        let rel = spatialRelationRef.current;
        if (((_a = spatialFilterObjRef.current) === null || _a === void 0 ? void 0 : _a.geometry) && rel == null) {
            rel = _config__WEBPACK_IMPORTED_MODULE_5__.SpatialRelation.Intersect;
        }
        if (Array.isArray((_b = spatialFilterObjRef.current) === null || _b === void 0 ? void 0 : _b.geometry)) {
            if (spatialFilterObjRef.current.geometry.length === 1) {
                onFormSubmit(sanitizedSqlExprObj, Object.assign(Object.assign({}, spatialFilterObjRef.current), { geometry: spatialFilterObjRef.current.geometry[0], relation: rel, buffer: bufferRef.current }), zoomToUse);
            }
            else {
                (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_3__.loadArcGISJSAPIModules)([
                    'esri/geometry/operators/unionOperator'
                ]).then(modules => {
                    const operator = modules[0];
                    const geometry = operator.executeMany(spatialFilterObjRef.current.geometry);
                    onFormSubmit(sanitizedSqlExprObj, Object.assign(Object.assign({}, spatialFilterObjRef.current), { geometry, relation: rel, buffer: bufferRef.current }), zoomToUse);
                });
            }
        }
        else {
            onFormSubmit(sanitizedSqlExprObj, Object.assign(Object.assign({}, spatialFilterObjRef.current), { relation: rel, buffer: bufferRef.current }), zoomToUse);
        }
        // Reset hashTriggeredRef after use
        hashTriggeredRef.current = false;
    }, [onFormSubmit, outputDS, attributeFilterSqlExprObj, runtimeZoomToSelected]);
    const handleKeyDown = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((event) => {
        if (event.key === 'Enter' && datasourceReady && isInputValid) {
            event.preventDefault();
            // Find the active input field
            const activeElement = document.activeElement;
            if (activeElement && activeElement.tagName === 'INPUT' && activeElement.type === 'text') {
                // Force blur to trigger SqlExpressionRuntime's input processing
                activeElement.blur();
                // Wait for blur processing, then click the Apply button
                // This uses the exact same code path as clicking the button manually
                setTimeout(() => {
                    if (applyButtonRef.current && !applyButtonRef.current.disabled) {
                        applyButtonRef.current.click();
                    }
                    else {
                        applyQuery();
                    }
                }, 200);
            }
            else {
                // Not in an input field, safe to apply immediately
                if (applyButtonRef.current && !applyButtonRef.current.disabled) {
                    applyButtonRef.current.click();
                }
                else {
                    applyQuery();
                }
            }
        }
    }, [datasourceReady, applyQuery, isInputValid]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (!dataActionFilter)
            return;
        if (dataActionFilter.where !== (preDataActionFilter === null || preDataActionFilter === void 0 ? void 0 : preDataActionFilter.where)) {
            applyQuery();
        }
    }, [dataActionFilter, preDataActionFilter === null || preDataActionFilter === void 0 ? void 0 : preDataActionFilter.where, applyQuery]);
    const resetQuery = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        // 1. reset attribute filter
        showClauseNumber.current = (0,jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__.getShownClauseNumberByExpression)(sqlExprObj);
        setAttributeFilterSqlExprObj(sqlExprObj);
        // 2. reset spatial filter
        setResetSymbol(Symbol());
    }, [sqlExprObj]);
    const handleSqlExprObjChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((sqlObj) => {
        var _a, _b, _c, _d;
        debugLogger.log('FORM', {
            event: 'sql-expression-changed',
            configId,
            partsCount: ((_a = sqlObj === null || sqlObj === void 0 ? void 0 : sqlObj.parts) === null || _a === void 0 ? void 0 : _a.length) || 0,
            firstPartValue: ((_c = (_b = sqlObj === null || sqlObj === void 0 ? void 0 : sqlObj.parts) === null || _b === void 0 ? void 0 : _b[0]) === null || _c === void 0 ? void 0 : _c.type) === 'SINGLE' ? (_d = sqlObj.parts[0].valueOptions) === null || _d === void 0 ? void 0 : _d.value : 'not-single'
        });
        showClauseNumber.current = (0,jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__.getShownClauseNumberByExpression)(sqlObj);
        setAttributeFilterSqlExprObj(sqlObj);
    }, [configId]);
    const handleSpatialFilterChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((filter) => {
        spatialFilterObjRef.current = filter;
    }, []);
    const handleRelationChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((rel) => {
        spatialRelationRef.current = rel;
    }, []);
    const handleBufferChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((distance, unit) => {
        bufferRef.current = { distance, unit };
    }, []);
    const showAttributeFilter = useAttributeFilter && sqlExprObj != null;
    const showSpatialFilter = spatialFilterEnabled && useSpatialFilter && (spatialFilterTypes.length > 0 || spatialIncludeRuntimeData || (spatialRelationUseDataSources === null || spatialRelationUseDataSources === void 0 ? void 0 : spatialRelationUseDataSources.length) > 0);
    // Debug logging for form rendering
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        debugLogger.log('FORM', {
            event: 'form-render-check',
            configId,
            datasourceReady,
            useAttributeFilter,
            sqlExprObj: sqlExprObj ? 'exists' : 'null',
            sqlExprObjParts: ((_a = sqlExprObj === null || sqlExprObj === void 0 ? void 0 : sqlExprObj.parts) === null || _a === void 0 ? void 0 : _a.length) || 0,
            showAttributeFilter,
            originDS: originDS ? 'exists' : 'null',
            originDSId: (originDS === null || originDS === void 0 ? void 0 : originDS.id) || 'none',
            showSpatialFilter,
            isAutoHeight,
            outputDS: outputDS ? 'exists' : 'null'
        });
    }, [configId, datasourceReady, useAttributeFilter, sqlExprObj, showAttributeFilter, originDS, showSpatialFilter, isAutoHeight, outputDS]);
    // Log when form content should render
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        if (showAttributeFilter && originDS) {
            debugLogger.log('FORM', {
                event: 'attribute-filter-ready',
                configId,
                originDSId: originDS.id,
                sqlExprObjParts: ((_a = sqlExprObj === null || sqlExprObj === void 0 ? void 0 : sqlExprObj.parts) === null || _a === void 0 ? void 0 : _a.length) || 0,
                attributeFilterLabel,
                note: 'Input field should be visible'
            });
        }
        else {
            debugLogger.log('FORM', {
                event: 'attribute-filter-not-ready',
                configId,
                showAttributeFilter,
                originDS: originDS ? 'exists' : 'null',
                useAttributeFilter,
                sqlExprObj: sqlExprObj ? 'exists' : 'null',
                reason: !showAttributeFilter ? 'showAttributeFilter is false' : 'originDS is null'
            });
        }
    }, [showAttributeFilter, originDS, configId, sqlExprObj, useAttributeFilter, attributeFilterLabel]);
    // Check DOM visibility after render
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        if (formContentRef.current) {
            const computedStyle = window.getComputedStyle(formContentRef.current);
            const rect = formContentRef.current.getBoundingClientRect();
            debugLogger.log('FORM', {
                event: 'form-content-dom-check',
                configId,
                exists: !!formContentRef.current,
                display: computedStyle.display,
                visibility: computedStyle.visibility,
                opacity: computedStyle.opacity,
                height: computedStyle.height,
                maxHeight: computedStyle.maxHeight,
                flex: computedStyle.flex,
                flexBasis: computedStyle.flexBasis,
                rectHeight: rect.height,
                rectWidth: rect.width,
                isVisible: rect.height > 0 && rect.width > 0,
                parentHeight: ((_a = formContentRef.current.parentElement) === null || _a === void 0 ? void 0 : _a.clientHeight) || 0
            });
        }
    }, [configId, showAttributeFilter, originDS]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_context__WEBPACK_IMPORTED_MODULE_12__.QueryTaskContext.Provider, { value: { resetSymbol }, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'query-form', css: getFormStyle(isAutoHeight), children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { ref: formContentRef, className: 'query-form__content', onKeyDown: handleKeyDown, children: [showAttributeFilter && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { role: 'group', className: 'px-4', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `padding-top: 2px;`, "aria-label": attributeFilterLabel, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('form-title d-flex align-items-center', { 'd-none': !attributeFilterLabel && !attributeFilterDesc }), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                margin-top: 0;
                margin-bottom: 4px;
              `, children: [attributeFilterLabel && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'mr-2 title2', children: attributeFilterLabel }), attributeFilterDesc && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { placement: 'bottom', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `white-space: pre-line;`, title: attributeFilterDesc, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: 'sm', icon: true, type: 'tertiary', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_13__.InfoOutlined, { color: 'var(--sys-color-primary-main)', size: 's' }) }) }))] }), originDS && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `margin: -10px 0px;`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__.SqlExpressionRuntime, { widgetId: widgetId, dataSource: originDS, expression: attributeFilterSqlExprObj, onChange: handleSqlExprObjChange }, `${configId}-${initialInputValue || 'none'}`) }))] })), showAttributeFilter && showSpatialFilter && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("hr", { className: 'm-4', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `border: none; height: 1px; background-color: var(--sys-color-divider-secondary);` })), showSpatialFilter && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_spatial_form__WEBPACK_IMPORTED_MODULE_9__.QueryTaskSpatialForm, { widgetId: widgetId, label: spatialFilterLabel, desc: spatialFilterDesc, filterTypes: spatialFilterTypes, mapWidgetIds: spatialMapWidgetIds, createToolTypes: spatialInteractiveCreateToolTypes, onFilterChange: handleSpatialFilterChange, onRelationChange: handleRelationChange, onBufferChange: handleBufferChange, spatialRelations: spatialRelations, dsEnableBuffer: spatialRelationEnableBuffer, dsBufferDistance: spatialRelationBufferDistance, dsBufferUnit: spatialRelationBufferUnit, drawEnableBuffer: spatialInteractiveEnableBuffer, drawBufferDistance: spatialInteractiveBufferDistance, drawBufferUnit: spatialInteractiveBufferUnit, useDataSources: spatialRelationUseDataSources, useRuntimeData: spatialIncludeRuntimeData }))] }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'query-form__actions px-4 d-flex align-items-center', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Checkbox, { checked: runtimeZoomToSelected, onChange: (_, checked) => setRuntimeZoomToSelected(checked), className: 'mr-2' }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { className: 'mr-auto', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `font-size: 0.875rem; color: var(--sys-color-text-primary);`, children: getI18nMessage('zoomToSelected') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { ref: applyButtonRef, color: 'primary', className: 'ml-auto', disabled: !datasourceReady || !isInputValid, onClick: applyQuery, children: getI18nMessage('apply') }), (showClauseNumber.current > 0 || showSpatialFilter) && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { className: 'ml-2', onClick: resetQuery, children: getI18nMessage('reset') }))] })] }) }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-label.tsx":
/*!*******************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-label.tsx ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTaskLabel: () => (/* binding */ QueryTaskLabel)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");

/** @jsx jsx */


const textStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
  font-weight: 500;
  font-size: 0.875rem;
`;
function QueryTaskLabel(props) {
    const { icon, name } = props;
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'd-flex align-items-center text-truncate', css: textStyle, children: [icon && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Icon, { className: 'query-task-icon mr-2', icon: icon.svg }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'text-truncate', title: name, children: name })] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-list-inline.tsx":
/*!*************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-list-inline.tsx ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TaskListInline: () => (/* binding */ TaskListInline)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _query_task__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./query-task */ "./your-extensions/widgets/query-simple/src/runtime/query-task.tsx");
/* harmony import */ var _query_task_list__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./query-task-list */ "./your-extensions/widgets/query-simple/src/runtime/query-task-list.tsx");
/* harmony import */ var _query_task_list_popper_wrapper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./query-task-list-popper-wrapper */ "./your-extensions/widgets/query-simple/src/runtime/query-task-list-popper-wrapper.tsx");
/* harmony import */ var _widget_config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./widget-config */ "./your-extensions/widgets/query-simple/src/runtime/widget-config.ts");
/* harmony import */ var _default_query_item__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../default-query-item */ "./your-extensions/widgets/query-simple/src/default-query-item.ts");

/** @jsx jsx */






const { iconMap } = (0,_widget_config__WEBPACK_IMPORTED_MODULE_5__.getWidgetRuntimeDataMap)();
const SPACE = 8;
const style = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
  > div {
    margin-right: 8px;
  }
`;
// show task label and an arrow to the task content
function TaskListInline(props) {
    const { queryItems, widgetId, minSize, defaultSize, defaultPageSize, widgetLabel, wrap = false } = props;
    const containerRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(undefined);
    const containerWidthRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(0);
    const contentWidthRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef({});
    const [numOfExpanded, setNumOfExpanded] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(queryItems.length);
    const [openedPopper, setOpenedPopper] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(-1);
    const resizeObserverRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const adjustContent = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        let total = 0;
        for (let i = 0; i < numOfExpanded; i++) {
            const item = queryItems[i];
            const itemWidth = contentWidthRef.current[item.configId];
            if (itemWidth > 0) {
                total += itemWidth + SPACE;
                if (total >= containerWidthRef.current && numOfExpanded !== i) {
                    setNumOfExpanded(i);
                    return;
                }
            }
            else {
                return; // content width not ready
            }
        }
        setNumOfExpanded(queryItems.length);
    }, [numOfExpanded, queryItems]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (resizeObserverRef.current) {
            resizeObserverRef.current.disconnect();
        }
        // bind with the new event handler
        resizeObserverRef.current = new ResizeObserver(jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.throttle((entries) => {
            const width = Math.round(entries[0].contentRect.width);
            if (containerWidthRef.current !== width) {
                containerWidthRef.current = width;
                adjustContent();
            }
        }, 200));
        resizeObserverRef.current.observe(containerRef.current);
        return () => {
            resizeObserverRef.current.disconnect();
        };
    }, [adjustContent]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        var _a;
        containerWidthRef.current = (_a = containerRef.current) === null || _a === void 0 ? void 0 : _a.clientWidth;
        adjustContent();
    });
    const handleItemWidthChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((index, width) => {
        const queryItem = queryItems[index];
        if (contentWidthRef.current[queryItem.configId] !== width) {
            contentWidthRef.current[queryItem.configId] = width;
            adjustContent();
        }
    }, [queryItems, adjustContent]);
    const handlePopperOpenedChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((index, isOpen) => {
        if (isOpen) {
            setOpenedPopper(index);
        }
        else if (index === openedPopper) {
            // current popper is closed
            setOpenedPopper(-1);
        }
    }, [openedPopper]);
    const [expandedArray, nonExpandedArray] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        const expandedArray = [];
        const nonExpandedArray = [];
        for (let i = 0; i < queryItems.length; i++) {
            if (i < numOfExpanded) {
                expandedArray.push(queryItems[i]);
            }
            else {
                nonExpandedArray.push(queryItems[i]);
            }
        }
        return [expandedArray, nonExpandedArray];
    }, [queryItems, numOfExpanded]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { ref: containerRef, css: style, className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('runtime-query__query-list h-100 d-flex', { 'flex-wrap': wrap, 'align-content-start': wrap }), children: [expandedArray.map((queryItem, index) => {
                var _a;
                const currentItem = Object.assign({}, _default_query_item__WEBPACK_IMPORTED_MODULE_6__.DEFAULT_QUERY_ITEM, queryItem);
                return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list_popper_wrapper__WEBPACK_IMPORTED_MODULE_4__.TaskListPopperWrapper, { id: index, icon: currentItem.icon, buttonType: 'default', label: currentItem.displayLabel ? currentItem.name : undefined, popperTitle: currentItem.name, onWidthChange: handleItemWidthChange, minSize: minSize, defaultSize: defaultSize, onOpenedChange: handlePopperOpenedChange, forceClose: openedPopper >= 0 && openedPopper !== index, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task__WEBPACK_IMPORTED_MODULE_2__.QueryTask, { widgetId: widgetId, index: index, total: 1, isInPopper: true, queryItem: currentItem, wrappedInPopper: true, className: 'pb-4', defaultPageSize: defaultPageSize, initialInputValue: currentItem.shortId === ((_a = props.initialQueryValue) === null || _a === void 0 ? void 0 : _a.shortId) ? props.initialQueryValue.value : undefined, onHashParameterUsed: props.onHashParameterUsed, queryItemShortId: currentItem.shortId }) }, currentItem.configId);
            }), nonExpandedArray.length > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list_popper_wrapper__WEBPACK_IMPORTED_MODULE_4__.TaskListPopperWrapper, { id: expandedArray.length + 1, icon: iconMap.iconMore, minSize: minSize, buttonType: 'default', popperTitle: widgetLabel, defaultSize: defaultSize, onOpenedChange: handlePopperOpenedChange, forceClose: openedPopper >= 0 && openedPopper !== expandedArray.length + 1, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list__WEBPACK_IMPORTED_MODULE_3__.QueryTaskList, { widgetId: widgetId, isInPopper: true, defaultPageSize: defaultPageSize, queryItems: nonExpandedArray, className: 'pb-4', initialQueryValue: props.initialQueryValue, onHashParameterUsed: props.onHashParameterUsed }) }))] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-list-popper-wrapper.tsx":
/*!*********************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-list-popper-wrapper.tsx ***!
  \*********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TaskListPopperWrapper: () => (/* binding */ TaskListPopperWrapper)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _version__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../version */ "./your-extensions/widgets/query-simple/src/version.ts");

/** @jsx jsx */



const shiftOptions = { padding: 1 };
function TaskListPopperWrapper(props) {
    const { id, icon, label, forceClose, onOpenedChange, popperTitle, minSize, defaultSize, onWidthChange, buttonType = 'tertiary', children } = props;
    const iconRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(undefined);
    const widthRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(0);
    const [isOpen, setIsOpen] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(false);
    const [popperVersion, setPopperVersion] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(0);
    const isMobile = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useCheckSmallBrowserSizeMode();
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (forceClose) {
            setIsOpen(false);
        }
    }, [forceClose]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        if (typeof onWidthChange === 'function') {
            widthRef.current = Math.round(iconRef.current.clientWidth);
            onWidthChange(id, widthRef.current);
            const resizeObserver = new ResizeObserver(jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.throttle((entries) => {
                const width = Math.round(entries[0].contentRect.width);
                if (widthRef.current !== width) {
                    widthRef.current = width;
                    onWidthChange(id, width);
                }
            }, 200));
            resizeObserver.observe(iconRef.current);
            return () => {
                resizeObserver.disconnect();
            };
        }
    });
    const togglePopper = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        if (typeof onOpenedChange === 'function') {
            onOpenedChange(id, !isOpen);
        }
        setIsOpen(!isOpen);
        setPopperVersion(popperVersion + 1);
        if (isOpen) {
            setTimeout(() => {
                if ((0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.isKeyboardMode)()) {
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.focusElementInKeyboardMode)(iconRef.current);
                }
            }, 200);
        }
    }, [id, isOpen, popperVersion, onOpenedChange]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'runtime-query__widget-popper', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { title: label, "aria-label": label, icon: true, size: 'sm', variant: buttonType === 'tertiary' ? 'text' : undefined, color: buttonType === 'tertiary' ? 'inherit' : undefined, type: buttonType === 'tertiary' ? undefined : buttonType, ref: iconRef, onClick: togglePopper, children: [icon && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Icon, Object.assign({ size: 16 }, (typeof icon === 'string' ? { icon } : { icon: icon.svg, color: buttonType === 'tertiary' ? undefined : icon.properties.color }))), label && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            word-break: break-word;
            word-wrap: break-word;
            line-height: 1.2;
          `, className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)({ 'ml-2': icon != null }), children: label })] }), isMobile
                ? (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.MobilePanel, { open: isOpen, title: popperTitle, onClose: togglePopper, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              display: flex;
              flex-direction: column;
              height: 100%;
            `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                flex: 1;
                overflow: auto;
                padding-bottom: 1rem; /* Scoped padding to space content from footer */
              `, children: children }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                padding: 4px 12px;
                border-top: 1px solid var(--sys-color-divider-secondary);
                background-color: var(--sys-color-surface-paper);
                flex-shrink: 0;
                text-align: center;
              `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                  font-size: 0.75rem;
                  color: var(--sys-color-text-tertiary);
                  font-weight: 400;
                  letter-spacing: 0.025em;
                  display: inline-flex;
                  align-items: center;
                  gap: 4px;
                `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("svg", { width: "14", height: "14", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                      flex-shrink: 0;
                      opacity: 0.6;
                    `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("polyline", { points: "16 18 22 12 16 6" }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("polyline", { points: "8 6 2 12 8 18" })] }), "QuerySimple by MapSimple", (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                    margin-left: 6px;
                    opacity: 0.5;
                    font-size: 0.7rem;
                  `, children: ["v", _version__WEBPACK_IMPORTED_MODULE_3__.WIDGET_VERSION] })] }) })] }) })
                : (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.FloatingPanel, { className: 'ui-unit-popper ui-unit-popper_k-arrangement-icon flex-grow-1', headerClassName: jimu_ui__WEBPACK_IMPORTED_MODULE_2__.FOCUSABLE_CONTAINER_CLASS, open: isOpen, onHeaderClose: togglePopper, toggle: togglePopper, headerTitle: popperTitle, minSize: minSize, defaultSize: defaultSize, dragBounds: 'body', version: popperVersion, reference: iconRef, placement: 'bottom-start', shiftOptions: shiftOptions, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              display: flex;
              flex-direction: column;
              height: 100%;
            `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                flex: 1;
                overflow: auto;
                padding-bottom: 1rem; /* Scoped padding to space content from footer */
              `, children: children }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                padding: 4px 12px;
                border-top: 1px solid var(--sys-color-divider-secondary);
                background-color: var(--sys-color-surface-paper);
                flex-shrink: 0;
                text-align: center;
              `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                  font-size: 0.75rem;
                  color: var(--sys-color-text-tertiary);
                  font-weight: 400;
                  letter-spacing: 0.025em;
                  display: inline-flex;
                  align-items: center;
                  gap: 4px;
                `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("svg", { width: "14", height: "14", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                      flex-shrink: 0;
                      opacity: 0.6;
                    `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("polyline", { points: "16 18 22 12 16 6" }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("polyline", { points: "8 6 2 12 8 18" })] }), "QuerySimple by MapSimple", (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                    margin-left: 6px;
                    opacity: 0.5;
                    font-size: 0.7rem;
                  `, children: ["v", _version__WEBPACK_IMPORTED_MODULE_3__.WIDGET_VERSION] })] }) })] }) })] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-list.tsx":
/*!******************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-list.tsx ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTaskList: () => (/* binding */ QueryTaskList)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _query_task__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./query-task */ "./your-extensions/widgets/query-simple/src/runtime/query-task.tsx");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");

/** @jsx jsx */





const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_5__.createQuerySimpleDebugLogger)();
// Helper function to sort queries by display order (lower numbers appear first)
// Queries without order maintain their original relative positions
function sortQueryItemsByOrder(queryItems) {
    // Handle null/undefined/empty cases
    if (!queryItems || queryItems.length === 0) {
        return queryItems || (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)([]);
    }
    // Safely convert to regular array for sorting
    // Handle both ImmutableArray (has toArray method) and regular arrays
    const itemsArray = (queryItems && typeof queryItems.toArray === 'function')
        ? queryItems.toArray()
        : (Array.isArray(queryItems) ? queryItems : []);
    const itemsWithIndex = itemsArray.map((item, index) => ({ item, originalIndex: index }));
    itemsWithIndex.sort((a, b) => {
        var _a, _b;
        const orderA = (_a = a.item.order) !== null && _a !== void 0 ? _a : Infinity;
        const orderB = (_b = b.item.order) !== null && _b !== void 0 ? _b : Infinity;
        if (orderA !== orderB) {
            return orderA - orderB;
        }
        // If order is equal (both Infinity or same number), maintain original index order
        return a.originalIndex - b.originalIndex;
    });
    return (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)(itemsWithIndex.map(({ item }) => item));
}
// Helper function to group queries by groupId
const groupQueries = (queryItems) => {
    const groups = {};
    const ungrouped = [];
    const groupOrder = [];
    const groupIndexMap = {};
    // First pass: collect items in regular arrays
    const groupItemsMap = {};
    queryItems.forEach((item, index) => {
        if (item.groupId) {
            if (!groupItemsMap[item.groupId]) {
                groupItemsMap[item.groupId] = [];
                groups[item.groupId] = {
                    items: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)([]),
                    displayName: item.groupDisplayName || item.name || `Group ${item.groupId}`,
                    icon: item.icon
                };
                groupIndexMap[item.groupId] = index;
                groupOrder.push(item.groupId);
            }
            groupItemsMap[item.groupId].push(item);
        }
        else {
            ungrouped.push({ item, index });
        }
    });
    // Second pass: convert regular arrays to ImmutableArrays
    Object.keys(groupItemsMap).forEach(groupId => {
        groups[groupId].items = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)(groupItemsMap[groupId]);
    });
    return { groups, ungrouped, groupOrder };
};
// Helper function to get display name for query in dropdown
// Uses: searchAlias || jimuFieldName || item.name || fallback
const getQueryDisplayName = (item) => {
    var _a, _b, _c;
    // First priority: searchAlias if set
    if (item.searchAlias) {
        return item.searchAlias;
    }
    // Second priority: field name from SQL expression
    const jimuFieldName = (_c = (_b = (_a = item.sqlExprObj) === null || _a === void 0 ? void 0 : _a.parts) === null || _b === void 0 ? void 0 : _b[0]) === null || _c === void 0 ? void 0 : _c.jimuFieldName;
    if (jimuFieldName) {
        return jimuFieldName;
    }
    // Third priority: item name
    if (item.name) {
        return item.name;
    }
    // Fallback
    return 'Query';
};
function QueryTaskList(props) {
    const { queryItems, widgetId, defaultPageSize, isInPopper = false, className = '', initialQueryValue, onHashParameterUsed, resultsMode, onResultsModeChange, accumulatedRecords, onAccumulatedRecordsChange, useGraphicsLayerForHighlight, graphicsLayer, mapView, onInitializeGraphicsLayer, onClearGraphicsLayer, activeTab, onTabChange } = props;
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_4__["default"]);
    // Sort queries by display order before grouping
    // Handle case where queryItems might be undefined/null or not an ImmutableArray
    const sortedQueryItems = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        if (!queryItems) {
            return (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)([]);
        }
        return sortQueryItemsByOrder(queryItems);
    }, [queryItems]);
    const { groups, ungrouped, groupOrder } = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => groupQueries(sortedQueryItems), [sortedQueryItems]);
    // State to track the current URL hash and query string
    const [urlParams, setUrlParams] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(() => ({
        hash: window.location.hash.substring(1),
        query: window.location.search.substring(1)
    }));
    // Listen for hashchange events to update our local state
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        const handleUrlChange = () => {
            debugLogger.log('HASH', {
                event: 'url-change-detected-in-task-list',
                newHash: window.location.hash,
                newQuery: window.location.search,
                timestamp: Date.now()
            });
            setUrlParams({
                hash: window.location.hash.substring(1),
                query: window.location.search.substring(1)
            });
        };
        window.addEventListener('hashchange', handleUrlChange);
        // Also listen for popstate in case query parameters change without hash change
        window.addEventListener('popstate', handleUrlChange);
        return () => {
            window.removeEventListener('hashchange', handleUrlChange);
            window.removeEventListener('popstate', handleUrlChange);
        };
    }, []);
    // Determine if we have an initial query value from the URL hash or query string
    const initialQueryValueFromUrl = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        const { hash, query } = urlParams;
        const hashParams = new URLSearchParams(hash);
        const queryParams = new URLSearchParams(query);
        const allQueryItems = [...ungrouped.map(u => u.item), ...Object.values(groups).flatMap(g => g.items)];
        // PRIORITY 1: Check ALL shortIds in the HASH (hash always wins)
        for (const item of allQueryItems) {
            if (item.shortId && hashParams.has(item.shortId)) {
                return {
                    shortId: item.shortId,
                    value: hashParams.get(item.shortId)
                };
            }
        }
        // PRIORITY 2: Check ALL shortIds in the QUERY string
        for (const item of allQueryItems) {
            if (item.shortId && queryParams.has(item.shortId)) {
                return {
                    shortId: item.shortId,
                    value: queryParams.get(item.shortId)
                };
            }
        }
        return null;
    }, [ungrouped, groups, urlParams]);
    // Use the prop initialQueryValue if provided, otherwise fallback to our own URL parsing
    const effectiveInitialQueryValue = initialQueryValue || initialQueryValueFromUrl;
    // Find the query item matching the shortId from URL hash
    const matchingQueryIndex = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        const shortId = effectiveInitialQueryValue === null || effectiveInitialQueryValue === void 0 ? void 0 : effectiveInitialQueryValue.shortId;
        if (!shortId) {
            return -1;
        }
        return sortedQueryItems.findIndex(item => item.shortId === shortId);
    }, [sortedQueryItems, effectiveInitialQueryValue]);
    // Determine which group/ungrouped index the matching query is at
    const getQuerySelection = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        var _a;
        if (matchingQueryIndex < 0)
            return null;
        const item = sortedQueryItems[matchingQueryIndex];
        if (item.groupId) {
            const groupItems = ((_a = groups[item.groupId]) === null || _a === void 0 ? void 0 : _a.items) || (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)([]);
            const indexInGroup = groupItems.findIndex(q => q.configId === item.configId);
            debugLogger.log('GROUP', {
                event: 'hash-query-found-in-group',
                groupId: item.groupId,
                indexInGroup: indexInGroup >= 0 ? indexInGroup : 0,
                queryItemConfigId: item.configId,
                queryItemShortId: item.shortId
            });
            return { type: 'group', groupId: item.groupId, index: indexInGroup >= 0 ? indexInGroup : 0 };
        }
        else {
            // Ungrouped query
            const indexInUngrouped = ungrouped.findIndex(({ item: q }) => q.configId === item.configId);
            debugLogger.log('GROUP', {
                event: 'hash-query-found-ungrouped',
                indexInUngrouped: indexInUngrouped >= 0 ? indexInUngrouped : 0,
                queryItemConfigId: item.configId,
                queryItemShortId: item.shortId
            });
            return { type: 'ungrouped', index: indexInUngrouped >= 0 ? indexInUngrouped : 0 };
        }
    }, [matchingQueryIndex, sortedQueryItems, groups, ungrouped]);
    // Helper to determine default selection based on display order
    const getDefaultSelection = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        var _a, _b, _c, _d;
        if (getQuerySelection) {
            return getQuerySelection;
        }
        // No hash parameter - determine default based on display order
        // Compare first ungrouped query vs first query in first group
        const firstUngroupedOrder = ungrouped.length > 0 ? ((_a = ungrouped[0].item.order) !== null && _a !== void 0 ? _a : Infinity) : Infinity;
        const firstGroupOrder = groupOrder.length > 0 && ((_c = (_b = groups[groupOrder[0]]) === null || _b === void 0 ? void 0 : _b.items) === null || _c === void 0 ? void 0 : _c.length) > 0
            ? ((_d = groups[groupOrder[0]].items[0].order) !== null && _d !== void 0 ? _d : Infinity)
            : Infinity;
        // Select whichever has lower order (or first if equal)
        if (firstUngroupedOrder < firstGroupOrder) {
            return { type: 'ungrouped', index: 0 };
        }
        else if (firstGroupOrder < Infinity || groupOrder.length > 0) {
            return { type: 'group', groupId: groupOrder[0], index: 0 };
        }
        else if (ungrouped.length > 0) {
            return { type: 'ungrouped', index: 0 };
        }
        return null;
    }, [getQuerySelection, ungrouped, groups, groupOrder]);
    // Track selected query - initialize with matching query if found from URL hash, or default based on display order
    const [selectedGroupId, setSelectedGroupId] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(() => {
        if ((getDefaultSelection === null || getDefaultSelection === void 0 ? void 0 : getDefaultSelection.type) === 'group') {
            debugLogger.log('GROUP', {
                event: 'initial-group-selection',
                groupId: getDefaultSelection.groupId,
                note: getQuerySelection ? 'Hash-matched' : 'Default based on display order'
            });
            return getDefaultSelection.groupId;
        }
        return null;
    });
    const [selectedGroupQueryIndex, setSelectedGroupQueryIndex] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(() => {
        if ((getDefaultSelection === null || getDefaultSelection === void 0 ? void 0 : getDefaultSelection.type) === 'group') {
            debugLogger.log('GROUP', {
                event: 'initial-group-query-index',
                index: getDefaultSelection.index,
                note: getQuerySelection ? 'Hash-matched' : 'Default based on display order'
            });
            return getDefaultSelection.index;
        }
        return 0;
    });
    const [selectedUngroupedIndex, setSelectedUngroupedIndex] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(() => {
        if ((getDefaultSelection === null || getDefaultSelection === void 0 ? void 0 : getDefaultSelection.type) === 'ungrouped') {
            debugLogger.log('GROUP', {
                event: 'initial-ungrouped-index',
                index: getDefaultSelection.index,
                note: getQuerySelection ? 'Hash-matched' : 'Default based on display order'
            });
            return getDefaultSelection.index;
        }
        return 0;
    });
    // Update selection when initialQueryValue changes (e.g., when URL hash is detected)
    // We only want to update based on the hash if one is PRESENT.
    // If the hash is removed (initialQueryValue becomes null), we DON'T want to reset to default.
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (getQuerySelection) {
            // Hash parameter matched - use that selection and STAY THERE
            if (getQuerySelection.type === 'group') {
                debugLogger.log('GROUP', {
                    event: 'selection-changed-to-group-from-hash',
                    groupId: getQuerySelection.groupId,
                    index: getQuerySelection.index,
                    note: 'Sticky selection from hash parameter'
                });
                setSelectedGroupId(getQuerySelection.groupId);
                setSelectedGroupQueryIndex(getQuerySelection.index);
            }
            else {
                debugLogger.log('GROUP', {
                    event: 'selection-changed-to-ungrouped-from-hash',
                    index: getQuerySelection.index,
                    note: 'Sticky selection from hash parameter'
                });
                setSelectedGroupId(null);
                setSelectedUngroupedIndex(getQuerySelection.index);
            }
        }
    }, [getQuerySelection]);
    // Get the currently selected query item
    const getSelectedQueryItem = () => {
        // PRIORITY 1: Use current state selection
        // The state is initialized with the hash match (if present) or default order,
        // and updated via useEffect if the hash changes later.
        debugLogger.log('GROUP', {
            event: 'getSelectedQueryItem-state-selection',
            selectedGroupId,
            hasSelectedGroup: selectedGroupId && groups[selectedGroupId],
            selectedGroupQueryIndex,
            selectedUngroupedIndex,
            ungroupedLength: ungrouped.length,
            groupOrderLength: groupOrder.length,
            note: 'Using state selection (hash-aware)'
        });
        // If a group is selected, get query from that group
        if (selectedGroupId && groups[selectedGroupId]) {
            const groupItems = groups[selectedGroupId].items;
            if (groupItems.length > 0) {
                const idx = selectedGroupQueryIndex < groupItems.length ? selectedGroupQueryIndex : 0;
                const selectedItem = groupItems[idx];
                debugLogger.log('GROUP', {
                    event: 'selected-query-from-group',
                    groupId: selectedGroupId,
                    groupQueryIndex: idx,
                    queryItemConfigId: selectedItem.configId,
                    queryDisplayName: getQueryDisplayName(selectedItem)
                });
                return selectedItem;
            }
        }
        // Otherwise, get from ungrouped queries
        if (ungrouped.length > 0) {
            const idx = selectedUngroupedIndex < ungrouped.length ? selectedUngroupedIndex : 0;
            const selectedItem = ungrouped[idx].item;
            debugLogger.log('GROUP', {
                event: 'selected-query-from-ungrouped',
                ungroupedIndex: idx,
                queryItemConfigId: selectedItem.configId,
                queryDisplayName: getQueryDisplayName(selectedItem)
            });
            return selectedItem;
        }
        // Fallback to first query item
        debugLogger.log('GROUP', {
            event: 'selected-query-fallback',
            note: 'No groups or ungrouped queries, using first item'
        });
        return sortedQueryItems[0];
    };
    const selectedQueryItem = getSelectedQueryItem();
    const selectedQueryRealIndex = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return sortedQueryItems.findIndex(q => q.configId === selectedQueryItem.configId);
    }, [sortedQueryItems, selectedQueryItem]);
    // If only one query total, don't show dropdown
    const showDropdown = sortedQueryItems.length > 1 || groupOrder.length > 0;
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: `runtime-query__query-list h-100 ${className}`, css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
      display: flex;
      flex-direction: column;
      .query-selector {
        padding: 16px;
        border-bottom: 1px solid var(--sys-color-divider-secondary);
        display: flex;
        flex-direction: column;
        gap: 8px;
      }
      .query-selector-label {
        font-size: 0.875rem;
        font-weight: 500;
        color: var(--sys-color-text-primary);
        margin-bottom: 4px;
      }
      .query-selector select {
        width: 100%;
      }
      .query-task-container {
        flex: 1;
        overflow: auto;
      }
    `, children: selectedQueryItem && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: `query-task-container ${isInPopper ? jimu_ui__WEBPACK_IMPORTED_MODULE_3__.FOCUSABLE_CONTAINER_CLASS : ''}`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task__WEBPACK_IMPORTED_MODULE_2__.QueryTask, { widgetId: widgetId, index: selectedQueryRealIndex >= 0 ? selectedQueryRealIndex : 0, total: sortedQueryItems.length, queryItem: selectedQueryItem, isInPopper: isInPopper, initialInputValue: selectedQueryItem.shortId === (effectiveInitialQueryValue === null || effectiveInitialQueryValue === void 0 ? void 0 : effectiveInitialQueryValue.shortId) ? effectiveInitialQueryValue === null || effectiveInitialQueryValue === void 0 ? void 0 : effectiveInitialQueryValue.value : undefined, onHashParameterUsed: onHashParameterUsed, queryItems: sortedQueryItems, selectedQueryIndex: selectedUngroupedIndex, onQueryChange: (index) => setSelectedUngroupedIndex(index), 
                // Grouping props
                groups: groups, ungrouped: ungrouped, 
                // Graphics layer props
                useGraphicsLayerForHighlight: useGraphicsLayerForHighlight, graphicsLayer: graphicsLayer, mapView: mapView, onInitializeGraphicsLayer: onInitializeGraphicsLayer, onClearGraphicsLayer: onClearGraphicsLayer, groupOrder: groupOrder, selectedGroupId: selectedGroupId, selectedGroupQueryIndex: selectedGroupQueryIndex, onGroupChange: (groupId) => setSelectedGroupId(groupId), onGroupQueryChange: (index) => setSelectedGroupQueryIndex(index), onUngroupedChange: (index) => setSelectedUngroupedIndex(index), resultsMode: resultsMode, onResultsModeChange: onResultsModeChange, accumulatedRecords: accumulatedRecords, onAccumulatedRecordsChange: onAccumulatedRecordsChange, activeTab: activeTab, onTabChange: onTabChange }) })) }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-spatial-form.tsx":
/*!**************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-spatial-form.tsx ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTaskSpatialForm: () => (/* binding */ QueryTaskSpatialForm)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _geometry_from_ds__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./geometry-from-ds */ "./your-extensions/widgets/query-simple/src/runtime/geometry-from-ds.tsx");
/* harmony import */ var _geometry_from_map__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./geometry-from-map */ "./your-extensions/widgets/query-simple/src/runtime/geometry-from-map.tsx");
/* harmony import */ var _geometry_from_draw__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./geometry-from-draw */ "./your-extensions/widgets/query-simple/src/runtime/geometry-from-draw.tsx");
/* harmony import */ var jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! jimu-icons/outlined/suggested/info */ "./jimu-icons/outlined/suggested/info.tsx");

/** @jsx jsx */








function QueryTaskSpatialForm(props) {
    var _a;
    const { label, desc, filterTypes, mapWidgetIds, onFilterChange, onRelationChange, onBufferChange, useDataSources, spatialRelations, useRuntimeData, dsEnableBuffer, dsBufferDistance, dsBufferUnit, drawEnableBuffer, drawBufferDistance, drawBufferUnit, createToolTypes, widgetId } = props;
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_4__["default"]);
    // used to store the selection of the data source in order to update the filter when option changes
    const selectedGeometriesRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const mapExists = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        if ((mapWidgetIds === null || mapWidgetIds === void 0 ? void 0 : mapWidgetIds.length) > 0) {
            const mapWidgetId = mapWidgetIds[0];
            return state.appConfig.widgets[mapWidgetId] != null;
        }
        return false;
    });
    const canUseMapFilter = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return mapExists && ((filterTypes === null || filterTypes === void 0 ? void 0 : filterTypes.includes(_config__WEBPACK_IMPORTED_MODULE_3__.SpatialFilterType.CurrentMapExtent)) || (filterTypes === null || filterTypes === void 0 ? void 0 : filterTypes.includes(_config__WEBPACK_IMPORTED_MODULE_3__.SpatialFilterType.InteractiveDrawMode)));
    }, [filterTypes, mapExists]);
    const supportedFilterTypes = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        const result = [];
        if ((useDataSources === null || useDataSources === void 0 ? void 0 : useDataSources.length) > 0 || useRuntimeData) {
            result.push({ value: 'data', label: getI18nMessage('featureFromDs') });
        }
        if (canUseMapFilter && (filterTypes === null || filterTypes === void 0 ? void 0 : filterTypes.includes(_config__WEBPACK_IMPORTED_MODULE_3__.SpatialFilterType.CurrentMapExtent))) {
            result.push({ value: 'map', label: getI18nMessage(`spatialFilterType_${_config__WEBPACK_IMPORTED_MODULE_3__.SpatialFilterType.CurrentMapExtent}`) });
        }
        if (canUseMapFilter && (filterTypes === null || filterTypes === void 0 ? void 0 : filterTypes.includes(_config__WEBPACK_IMPORTED_MODULE_3__.SpatialFilterType.InteractiveDrawMode))) {
            result.push({ value: 'draw', label: getI18nMessage(`spatialFilterType_${_config__WEBPACK_IMPORTED_MODULE_3__.SpatialFilterType.InteractiveDrawMode}`) });
        }
        return result;
    }, [canUseMapFilter, useDataSources, useRuntimeData, getI18nMessage, filterTypes]);
    const [currentFilterType, setCurrentFilterType] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState((_a = supportedFilterTypes === null || supportedFilterTypes === void 0 ? void 0 : supportedFilterTypes[0]) === null || _a === void 0 ? void 0 : _a.value);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        // in order to avoid invalid option being selected
        if (currentFilterType !== 'none' && !supportedFilterTypes.find((item) => item.value === currentFilterType)) {
            setCurrentFilterType((_a = supportedFilterTypes === null || supportedFilterTypes === void 0 ? void 0 : supportedFilterTypes[0]) === null || _a === void 0 ? void 0 : _a.value);
        }
    }, [currentFilterType, supportedFilterTypes]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        // clear the relationship and buffer if filter type is not 'data'
        if (currentFilterType === 'map' || currentFilterType === 'draw' || currentFilterType === 'none') {
            onRelationChange(null);
            onBufferChange(0, _config__WEBPACK_IMPORTED_MODULE_3__.UnitType.Meters);
            onFilterChange({ geometry: null });
        }
        // no need to update the filter if the data source has selection since it will be updated in the handleSelectionChange method
        if (currentFilterType === 'data' && selectedGeometriesRef.current == null) {
            onFilterChange({ geometry: null });
        }
    }, [currentFilterType, onRelationChange, onBufferChange, onFilterChange]);
    const handleFilterTypeChanged = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((evt) => { setCurrentFilterType(evt.target.value); }, []);
    const handleGeometryChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((geometry, layer, graphic, clearAfterApply) => {
        onFilterChange({ geometry, graphic, layer, clearAfterApply });
    }, [onFilterChange]);
    const handleSelectionChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((geometries) => {
        selectedGeometriesRef.current = geometries;
        onFilterChange({ geometry: geometries });
    }, [onFilterChange]);
    if (!((useDataSources === null || useDataSources === void 0 ? void 0 : useDataSources.length) > 0 || useRuntimeData || canUseMapFilter)) {
        return null;
    }
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { role: 'group', className: 'px-4 pb-4', "aria-label": label, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('form-title my-2 d-flex align-items-center', { 'd-none': !label && !desc }), children: [label && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'mr-2 title2', children: label }), desc && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { placement: 'bottom', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `white-space: pre-line;`, title: desc, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: 'sm', icon: true, type: 'tertiary', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_8__.InfoOutlined, { color: 'var(--sys-color-primary-main)', size: 's' }) }) }))] }), supportedFilterTypes.length > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'title3', children: getI18nMessage('chooseFilterType') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Select, { "aria-label": getI18nMessage('chooseFilterType'), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `height: 32px;`, value: currentFilterType, onChange: handleFilterTypeChanged, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: 'none', children: "-" }, '-'), supportedFilterTypes.map(item => (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: item.value, children: item.label }, item.value))] })] })), currentFilterType === 'data' && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_geometry_from_ds__WEBPACK_IMPORTED_MODULE_5__.GeometryFromDataSource, { enableBuffer: dsEnableBuffer, bufferDistance: dsBufferDistance, bufferUnit: dsBufferUnit, spatialRelations: spatialRelations, useDataSources: useDataSources, useRuntimeData: useRuntimeData, onSelectionChange: handleSelectionChange, onRelationChange: onRelationChange, onBufferChange: onBufferChange })), currentFilterType === 'map' && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_geometry_from_map__WEBPACK_IMPORTED_MODULE_6__.GeometryFromMap, { mapWidgetIds: mapWidgetIds, createToolTypes: createToolTypes, onGeometryChange: handleGeometryChange })), currentFilterType === 'draw' && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_geometry_from_draw__WEBPACK_IMPORTED_MODULE_7__.GeometryFromDraw, { enableBuffer: drawEnableBuffer, bufferDistance: drawBufferDistance, bufferUnit: drawBufferUnit, mapWidgetIds: mapWidgetIds, widgetId: widgetId, createToolTypes: createToolTypes, onGeometryChange: handleGeometryChange, onBufferChange: onBufferChange }))] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task.tsx":
/*!*************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task.tsx ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTask: () => (/* binding */ QueryTask)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-icons/outlined/suggested/info */ "./jimu-icons/outlined/suggested/info.tsx");
/* harmony import */ var jimu_icons_outlined_editor_trash__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-icons/outlined/editor/trash */ "./jimu-icons/outlined/editor/trash.tsx");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _query_task_form__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./query-task-form */ "./your-extensions/widgets/query-simple/src/runtime/query-task-form.tsx");
/* harmony import */ var _query_result__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./query-result */ "./your-extensions/widgets/query-simple/src/runtime/query-result.tsx");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/* harmony import */ var _query_task_label__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./query-task-label */ "./your-extensions/widgets/query-simple/src/runtime/query-task-label.tsx");
/* harmony import */ var _default_query_item__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../default-query-item */ "./your-extensions/widgets/query-simple/src/default-query-item.ts");
/* harmony import */ var _query_utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./query-utils */ "./your-extensions/widgets/query-simple/src/runtime/query-utils.ts");
/* harmony import */ var _results_management_utils__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./results-management-utils */ "./your-extensions/widgets/query-simple/src/runtime/results-management-utils.ts");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var jimu_icons_outlined_directional_arrow_left__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! jimu-icons/outlined/directional/arrow-left */ "./jimu-icons/outlined/directional/arrow-left.tsx");
/* harmony import */ var _loading_result__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./loading-result */ "./your-extensions/widgets/query-simple/src/runtime/loading-result.tsx");
/* harmony import */ var _selection_utils__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};

/** @jsx jsx */

















const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_8__.createQuerySimpleDebugLogger)();
// Helper function to get display name for query in dropdown
// Uses: searchAlias || jimuFieldName || item.name || fallback
const getQueryDisplayName = (item) => {
    var _a, _b, _c;
    // First priority: searchAlias if set
    if (item.searchAlias) {
        return item.searchAlias;
    }
    // Second priority: field name from SQL expression
    const jimuFieldName = (_c = (_b = (_a = item.sqlExprObj) === null || _a === void 0 ? void 0 : _a.parts) === null || _b === void 0 ? void 0 : _b[0]) === null || _c === void 0 ? void 0 : _c.jimuFieldName;
    if (jimuFieldName) {
        return jimuFieldName;
    }
    // Third priority: item name
    if (item.name) {
        return item.name;
    }
    // Fallback
    return 'Query';
};
const style = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
  &.wrapped .query-form {
    height: 100%;
  }
  .query-task__content {
    display: flex;
    flex-direction: column;
    width: 100%;
    padding-top: 8px;
    &:has(> .query-form__header > div:not(.d-none)), &:has(> .query-result) {
      padding-top: 16px;
    }
  }
  .query-form__header {
    display: flex;
    &.has-content {
      border-bottom: 1px solid var(--sys-color-divider-secondary);
      margin-bottom: 6px;
      padding-bottom: 8px;
    }
    .nav-action {
      flex: 1 1 0;
      overflow: hidden;
      display: flex;
      .jimu-btn {
        min-width: 26px;
      }
    }
    .result-menu {
      display: flex;
    }
  }
`;
function QueryTask(props) {
    var _a, _b, _c, _d, _e;
    const { queryItem, onNavBack, total, isInPopper = false, wrappedInPopper = false, className = '', index, initialInputValue, onHashParameterUsed, queryItems, selectedQueryIndex, onQueryChange, groups, ungrouped, groupOrder, selectedGroupId, selectedGroupQueryIndex, onGroupChange, onGroupQueryChange, onUngroupedChange, resultsMode, onResultsModeChange, accumulatedRecords, onAccumulatedRecordsChange, useGraphicsLayerForHighlight, graphicsLayer, mapView, onInitializeGraphicsLayer, onClearGraphicsLayer, activeTab: propActiveTab, onTabChange: propOnTabChange } = props, otherProps = __rest(props, ["queryItem", "onNavBack", "total", "isInPopper", "wrappedInPopper", "className", "index", "initialInputValue", "onHashParameterUsed", "queryItems", "selectedQueryIndex", "onQueryChange", "groups", "ungrouped", "groupOrder", "selectedGroupId", "selectedGroupQueryIndex", "onGroupChange", "onGroupQueryChange", "onUngroupedChange", "resultsMode", "onResultsModeChange", "accumulatedRecords", "onAccumulatedRecordsChange", "useGraphicsLayerForHighlight", "graphicsLayer", "mapView", "onInitializeGraphicsLayer", "onClearGraphicsLayer", "activeTab", "onTabChange"]);
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_13__["default"]);
    const [stage, setStage] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(0); // 0 = form, 1 = results, 2 = loading
    const [internalActiveTab, setInternalActiveTab] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState('query');
    // Controlled tab state: use prop if provided, otherwise internal state
    const activeTab = propActiveTab || internalActiveTab;
    const setActiveTab = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((tab) => {
        if (propOnTabChange) {
            propOnTabChange(tab);
        }
        else {
            setInternalActiveTab(tab);
        }
    }, [propOnTabChange]);
    const [enabled, setEnabled] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(true);
    const [resultCount, setResultCount] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(0);
    // Track if we've already selected records for the current query results
    const hasSelectedRecordsRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(false);
    // Track query execution count to force QueryTaskResult remount on new queries
    const queryExecutionKeyRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(0);
    const queryParamRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const recordsRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const [outputDS, setOutputDS] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const [dataSource, setDataSource] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const [spatialFilterEnabled, setSpatialFilterEnabled] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(true);
    const attributeFilterSqlExprObj = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(queryItem.sqlExprObj);
    const spatialFilterObj = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const backBtnRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(undefined);
    const clearResultBtnRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(undefined);
    const [dataActionFilter, setDataActionFilter] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const previousConfigIdRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(queryItem.configId);
    // Track manual tab switches to prevent auto-switch useEffect from interfering
    const manualTabSwitchRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(false);
    // Track when a query was just executed - only auto-switch after query execution completes
    const queryJustExecutedRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(false);
    // Store the last runtime zoom override value from the form for use by Add to Map action
    const lastRuntimeZoomToSelectedRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(undefined);
    // Error states for user-facing errors
    const [selectionError, setSelectionError] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const [zoomError, setZoomError] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const currentItem = Object.assign({}, _default_query_item__WEBPACK_IMPORTED_MODULE_10__.DEFAULT_QUERY_ITEM, queryItem);
    const { icon, name, displayLabel } = currentItem;
    const dsExists = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_8__.useDataSourceExists)({ widgetId: props.widgetId, useDataSourceId: (_a = currentItem.useDataSource) === null || _a === void 0 ? void 0 : _a.dataSourceId });
    // Debug logging for tab content rendering
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        debugLogger.log('TASK', {
            event: 'query-tab-content-render',
            activeTab,
            enabled,
            dsExists,
            dataSource: dataSource ? 'exists' : 'null',
            queryItemConfigId: queryItem.configId,
            note: 'Query tab content state check'
        });
    }, [activeTab, enabled, dsExists, dataSource, queryItem.configId]);
    // Debug logging for Tab children rendering
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (activeTab === 'query') {
            debugLogger.log('TASK', {
                event: 'query-tab-children-render',
                activeTab,
                queryItemConfigId: queryItem.configId,
                note: 'Query Tab children should be rendering'
            });
        }
    }, [activeTab, queryItem.configId]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        // focus the back button when it is rendered
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.focusElementInKeyboardMode)(backBtnRef.current);
    });
    // Get the pagination style from widget config (MultiPage or LazyLoad/Single-page)
    const pagingTypeInConfig = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const widgetJson = state.appConfig.widgets[props.widgetId];
        return widgetJson.config.resultPagingStyle;
    });
    // Get the initial page size for single-page (LazyLoad) results
    // This allows users to configure how many records are loaded initially when using single-page mode
    // Defaults to 100 if not configured
    const lazyLoadInitialPageSize = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const widgetJson = state.appConfig.widgets[props.widgetId];
        return widgetJson.config.lazyLoadInitialPageSize;
    });
    // Watch for when results are ready and switch to Results tab
    // ONLY auto-switch when a query was just executed and results are loaded
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        // Don't auto-switch if user manually switched tabs
        if (manualTabSwitchRef.current) {
            debugLogger.log('TASK', {
                event: 'auto-switch-skipped',
                reason: 'manual-tab-switch-flag-set',
                widgetId: props.widgetId,
                queryItemConfigId: queryItem.configId,
                activeTab,
                resultCount,
                queryJustExecutedRef: queryJustExecutedRef.current,
                timestamp: Date.now()
            });
            return;
        }
        // FORCED: Always use SimpleList - we're done with lazy loading issues
        // Records are available immediately, so we can switch as soon as resultCount > 0
        const isSimpleList = true;
        // ONLY auto-switch when:
        // 1. A query was just executed (queryJustExecutedRef.current === true)
        // 2. We have results (resultCount > 0)
        // 3. Records are actually loaded:
        //    - For SimpleList: resultCount > 0 is sufficient (records available immediately)
        //    - For LazyLoad: recordsRef.current must have data (wait for lazy loading)
        // 4. We're currently on the query tab (don't switch if already on results)
        const hasRecords = isSimpleList
            ? resultCount > 0
            : (recordsRef.current && recordsRef.current.length > 0);
        debugLogger.log('TASK', {
            event: 'auto-switch-check',
            widgetId: props.widgetId,
            queryItemConfigId: queryItem.configId,
            activeTab,
            resultCount,
            queryJustExecutedRef: queryJustExecutedRef.current,
            isSimpleList,
            pagingTypeInConfig,
            hasRecords,
            recordsRefLength: ((_a = recordsRef.current) === null || _a === void 0 ? void 0 : _a.length) || 0,
            manualTabSwitchRef: manualTabSwitchRef.current,
            willAutoSwitch: queryJustExecutedRef.current && resultCount > 0 && hasRecords && activeTab === 'query',
            timestamp: Date.now()
        });
        if (queryJustExecutedRef.current &&
            resultCount > 0 &&
            hasRecords &&
            activeTab === 'query') {
            debugLogger.log('TASK', {
                event: 'auto-switch-triggered',
                widgetId: props.widgetId,
                queryItemConfigId: queryItem.configId,
                fromTab: activeTab,
                toTab: 'results',
                resultCount,
                timestamp: Date.now()
            });
            setActiveTab('results');
            queryJustExecutedRef.current = false; // Reset after switching
            debugLogger.log('TASK', {
                event: 'auto-switch-completed',
                widgetId: props.widgetId,
                queryItemConfigId: queryItem.configId,
                queryJustExecutedRefReset: queryJustExecutedRef.current,
                timestamp: Date.now()
            });
        }
    }, [resultCount, activeTab, pagingTypeInConfig]);
    // Verify dropdowns are synchronized with hash parameter when present
    // This is especially important for grouped queries where dropdowns need to be synchronized
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a, _b;
        // Only verify if we have a hash parameter
        if (!initialInputValue || !queryItem.shortId) {
            return;
        }
        // Verify the current queryItem matches what we expect from hash parameter
        const expectedShortId = queryItem.shortId;
        const isGroupedQuery = queryItem.groupId !== null && queryItem.groupId !== undefined;
        // Check if dropdowns are correctly set for grouped queries
        if (isGroupedQuery) {
            const expectedGroupId = queryItem.groupId;
            const actualGroupId = selectedGroupId;
            const expectedQueryIndex = selectedGroupQueryIndex;
            if (expectedGroupId !== actualGroupId) {
                debugLogger.log('GROUP', {
                    event: 'dropdown-group-mismatch',
                    expectedGroupId,
                    actualGroupId,
                    queryItemShortId: expectedShortId,
                    warning: 'First dropdown may not be synchronized with hash parameter'
                });
            }
            else if (expectedQueryIndex !== undefined) {
                // Verify the query index within the group matches
                const groupItems = (_a = groups === null || groups === void 0 ? void 0 : groups[expectedGroupId]) === null || _a === void 0 ? void 0 : _a.items;
                if (groupItems && groupItems.length > expectedQueryIndex) {
                    const expectedQueryConfigId = (_b = groupItems[expectedQueryIndex]) === null || _b === void 0 ? void 0 : _b.configId;
                    const actualQueryConfigId = queryItem.configId;
                    if (expectedQueryConfigId !== actualQueryConfigId) {
                        debugLogger.log('GROUP', {
                            event: 'dropdown-query-index-mismatch',
                            expectedQueryConfigId,
                            actualQueryConfigId,
                            expectedQueryIndex,
                            queryItemShortId: expectedShortId,
                            warning: 'Second dropdown may not be synchronized with hash parameter'
                        });
                    }
                    else {
                        debugLogger.log('GROUP', {
                            event: 'dropdowns-synchronized',
                            queryItemShortId: expectedShortId,
                            groupId: expectedGroupId,
                            selectedGroupQueryIndex: expectedQueryIndex,
                            note: 'Dropdowns synchronized with hash parameter'
                        });
                    }
                }
            }
        }
        else {
            // Ungrouped query - verify it's selected
            debugLogger.log('GROUP', {
                event: 'dropdowns-synchronized-ungrouped',
                queryItemShortId: expectedShortId,
                note: 'Ungrouped query dropdown synchronized with hash parameter'
            });
        }
    }, [initialInputValue, queryItem.shortId, queryItem.groupId, queryItem.configId, selectedGroupId, selectedGroupQueryIndex, groups]);
    const useOutputDs = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)({
        dataSourceId: queryItem.outputDataSourceId,
        mainDataSourceId: queryItem.outputDataSourceId
    }), [queryItem.outputDataSourceId]);
    const updateDataSource = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((ds) => {
        var _a, _b;
        const currentDs = ds !== null && ds !== void 0 ? ds : dataSource;
        // should disable spatial filter if the dataSource is an output ds and it already has spatial filter
        if ((_a = currentDs === null || currentDs === void 0 ? void 0 : currentDs.getDataSourceJson()) === null || _a === void 0 ? void 0 : _a.isOutputFromWidget) {
            const qDs = currentDs;
            const qParams = (_b = qDs.getCurrentQueryParams) === null || _b === void 0 ? void 0 : _b.call(qDs);
            if (qParams.geometry != null) {
                setSpatialFilterEnabled(false);
            }
            else {
                setSpatialFilterEnabled(true);
            }
        }
    }, [dataSource]);
    const handleStatusChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((enabled) => {
        setEnabled(enabled);
        updateDataSource();
    }, [updateDataSource]);
    const handleOutputDataSourceInfoChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((info, preInfo) => {
        const outputId = queryItem.outputDataSourceId;
        const filter = (info === null || info === void 0 ? void 0 : info.widgetQueries) ? info.widgetQueries[`setFilter-${outputId}`] : null;
        if (filter == null) { // filter is null means there are incomplete queries, ignore this change
            return;
        }
        const preFilter = (preInfo === null || preInfo === void 0 ? void 0 : preInfo.widgetQueries) ? preInfo.widgetQueries[`setFilter-${outputId}`] : null;
        if ((filter === null || filter === void 0 ? void 0 : filter.where) !== (preFilter === null || preFilter === void 0 ? void 0 : preFilter.where)) {
            setDataActionFilter(filter);
        }
    }, [queryItem.outputDataSourceId]);
    const publishDataClearedMsg = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => __awaiter(this, void 0, void 0, function* () {
        if (!outputDS)
            return;
        const dataRecordSetChangeMessage = new jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataRecordSetChangeMessage(props.widgetId, jimu_core__WEBPACK_IMPORTED_MODULE_1__.RecordSetChangeType.Remove, [outputDS.id]);
        jimu_core__WEBPACK_IMPORTED_MODULE_1__.MessageManager.getInstance().publishMessage(dataRecordSetChangeMessage);
        yield jimu_core__WEBPACK_IMPORTED_MODULE_1__.MessageManager.getInstance().publishMessage(new jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataRecordsSelectionChangeMessage(props.widgetId, [], [outputDS.id]));
    }), [props.widgetId, outputDS]);
    /**
     * Clears all query results from the UI and map.
     * This is the single source of truth for clearing results.
     * It clears the records, resets the result count, clears selection from the map,
     * publishes a cleared message to the map, switches back to the Query tab,
     * and increments the query execution key to force QueryTaskResult to remount with fresh state.
     */
    const clearResult = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((...args_1) => __awaiter(this, [...args_1], void 0, function* (reason = 'unknown') {
        debugLogger.log('TASK', {
            event: 'clearResult-called',
            widgetId: props.widgetId,
            hasOutputDS: !!outputDS,
            reason,
            timestamp: Date.now()
        });
        recordsRef.current = null;
        outputDS === null || outputDS === void 0 ? void 0 : outputDS.setStatus(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.NotReady);
        setResultCount(0);
        // NOTE: Graphics layer clearing is now handled inside clearSelectionInDataSources
        // called below. We ensure this is awaited to prevent race conditions.
        // Clear selection directly from data source using utility function
        try {
            yield (0,_selection_utils__WEBPACK_IMPORTED_MODULE_16__.clearSelectionInDataSources)(props.widgetId, outputDS, useGraphicsLayerForHighlight, graphicsLayer);
            debugLogger.log('TASK', {
                event: 'clearResult-selection-cleared',
                widgetId: props.widgetId,
                timestamp: Date.now()
            });
        }
        catch (error) {
            debugLogger.log('TASK', {
                event: 'clearResult-selection-clear-failed',
                widgetId: props.widgetId,
                error: error instanceof Error ? error.message : String(error),
                timestamp: Date.now()
            });
        }
        // Clear widget-level accumulated records when clearing results
        if (onAccumulatedRecordsChange) {
            onAccumulatedRecordsChange([]);
            debugLogger.log('RESULTS-MODE', {
                event: 'accumulated-records-cleared-on-clear-results',
                widgetId: props.widgetId
            });
        }
        yield publishDataClearedMsg();
        // Switch back to Query tab when clearing results
        setActiveTab('query');
        setStage(0);
        hasSelectedRecordsRef.current = false; // Reset selection flag when clearing
        // Increment query execution key to force QueryTaskResult remount with fresh state
        queryExecutionKeyRef.current += 1;
        // Clear error states when clearing results
        setSelectionError(null);
        setZoomError(null);
        debugLogger.log('TASK', {
            event: 'clearResult-complete',
            widgetId: props.widgetId,
            timestamp: Date.now()
        });
    }), [outputDS, publishDataClearedMsg, props.widgetId, queryItem.configId, onAccumulatedRecordsChange, useGraphicsLayerForHighlight, graphicsLayer]);
    /**
     * Handles data source creation when switching between query items.
     * When a new query item is selected (e.g., switching from Parcel to Major),
     * this clears old results to ensure all cleanup logic runs properly.
     *
     * @param ds - The newly created data source for the selected query item
     */
    const handleDataSourceCreated = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((ds) => __awaiter(this, void 0, void 0, function* () {
        debugLogger.log('TASK', {
            event: 'handleDataSourceCreated-start',
            widgetId: props.widgetId,
            resultsMode,
            timestamp: Date.now()
        });
        // In "Add to" and "Remove from" modes, preserve accumulated records and selection - don't clear
        if ((resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection || resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection)
            && accumulatedRecords && accumulatedRecords.length > 0) {
            debugLogger.log('RESULTS-MODE', {
                event: 'preserving-selection-on-query-switch-handleDataSourceCreated',
                widgetId: props.widgetId,
                resultsMode,
                accumulatedRecordsCount: accumulatedRecords.length
            });
            setDataSource(ds);
            updateDataSource(ds);
            setStage(0);
            setActiveTab('query');
            return; // Skip clearing - preserve selection
        }
        // For "New" mode, clear old results
        debugLogger.log('TASK', {
            event: 'handleDataSourceCreated-clearing-results-for-new-mode',
            widgetId: props.widgetId,
            timestamp: Date.now()
        });
        yield clearResult('handleDataSourceCreated-new-mode');
        setDataSource(ds);
        updateDataSource(ds);
        setStage(0);
        setActiveTab('query'); // Return to Query tab when switching queries
    }), [updateDataSource, clearResult, resultCount, resultsMode, accumulatedRecords, props.widgetId]);
    const handleOutputDataSourceCreated = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((ds) => __awaiter(this, void 0, void 0, function* () {
        var _a, _b, _c, _d, _e, _f, _g, _h;
        setOutputDS(ds);
        // CHECK rootDataSource.map to see how framework accesses map view
        try {
            const originDataSources = ds.getOriginDataSources();
            const originDS = originDataSources === null || originDataSources === void 0 ? void 0 : originDataSources[0];
            if (originDS) {
                const rootDS = originDS.getRootDataSource();
                if (rootDS) {
                    // Expose rootDS to window for console inspection
                    ;
                    window.__querySimpleRootDS = rootDS;
                    window.__querySimpleRootDSMap = rootDS.map;
                    window.__querySimpleOriginDS = originDS;
                    debugLogger.log('GRAPHICS-LAYER', {
                        event: 'check-root-datasource-map',
                        widgetId: props.widgetId,
                        outputDSId: ds.id,
                        originDSId: originDS.id,
                        rootDSId: rootDS.id,
                        rootDSType: rootDS.type,
                        hasRootDSMap: !!rootDS.map,
                        rootDSMapType: rootDS.map ? typeof rootDS.map : 'none',
                        rootDSMapId: ((_a = rootDS.map) === null || _a === void 0 ? void 0 : _a.id) || 'none',
                        hasRootDSMapView: !!((_b = rootDS.map) === null || _b === void 0 ? void 0 : _b.view),
                        hasRootDSMapViews: !!((_c = rootDS.map) === null || _c === void 0 ? void 0 : _c.views),
                        rootDSMapViewsLength: ((_e = (_d = rootDS.map) === null || _d === void 0 ? void 0 : _d.views) === null || _e === void 0 ? void 0 : _e.length) || 0,
                        // Log some map properties if it exists
                        rootDSMapKeys: rootDS.map ? Object.keys(rootDS.map).filter(key => !key.startsWith('_') &&
                            typeof rootDS.map[key] !== 'function').slice(0, 20) : [],
                        // Log that objects are available on window for console inspection
                        consoleInspection: 'Check window.__querySimpleRootDS, window.__querySimpleRootDSMap, window.__querySimpleOriginDS',
                        timestamp: Date.now()
                    });
                    // If map exists, check its view
                    const rootMap = rootDS.map;
                    if (rootMap) {
                        const view = rootMap.view ||
                            ((_g = (_f = rootMap.views) === null || _f === void 0 ? void 0 : _f.getItemAt) === null || _g === void 0 ? void 0 : _g.call(_f, 0)) ||
                            (((_h = rootMap.views) === null || _h === void 0 ? void 0 : _h.length) > 0 ? rootMap.views[0] : null);
                        debugLogger.log('GRAPHICS-LAYER', {
                            event: 'check-root-datasource-map-view',
                            widgetId: props.widgetId,
                            hasView: !!view,
                            viewType: (view === null || view === void 0 ? void 0 : view.type) || 'none',
                            viewId: (view === null || view === void 0 ? void 0 : view.id) || 'none',
                            timestamp: Date.now()
                        });
                    }
                }
            }
        }
        catch (error) {
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'check-root-datasource-map-error',
                widgetId: props.widgetId,
                error: error instanceof Error ? error.message : String(error),
                errorStack: error instanceof Error ? error.stack : undefined,
                timestamp: Date.now()
            });
        }
        // Initialize graphics layer lazily if enabled and not already initialized
        if (useGraphicsLayerForHighlight && onInitializeGraphicsLayer) {
            yield onInitializeGraphicsLayer(ds);
            // After initialization, graphicsLayer and mapView props should be updated
            // But since props come from refs, we need to wait for widget re-render
            // For now, use the props that will be updated on next render
        }
        // If in "Add to" or "Remove from" mode and we have accumulated records, re-select them
        // This uses the same logic as after query completion - selectRecordsAndPublish
        // This ensures records are selected both on the map and in the Results tab
        if ((resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection || resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection)
            && accumulatedRecords && accumulatedRecords.length > 0) {
            // Use a delay to ensure the DS is fully ready and graphics layer props are updated after widget re-render
            // If graphics layer was just initialized, wait a bit longer for props to update
            const delay = (useGraphicsLayerForHighlight && onInitializeGraphicsLayer) ? 200 : 100;
            setTimeout(() => {
                const featureDS = ds;
                if (featureDS && accumulatedRecords && accumulatedRecords.length > 0) {
                    const recordIds = accumulatedRecords.map(record => record.getId());
                    (() => __awaiter(this, void 0, void 0, function* () {
                        try {
                            yield (0,_selection_utils__WEBPACK_IMPORTED_MODULE_16__.selectRecordsAndPublish)(props.widgetId, featureDS, recordIds, accumulatedRecords, false, useGraphicsLayerForHighlight, graphicsLayer, mapView);
                            // Update recordsRef so results tab shows accumulated records
                            recordsRef.current = accumulatedRecords;
                            setResultCount(accumulatedRecords.length);
                            debugLogger.log('RESULTS-MODE', {
                                event: 're-selected-accumulated-records-after-query-switch',
                                widgetId: props.widgetId,
                                outputDSId: featureDS.id,
                                recordsCount: accumulatedRecords.length
                            });
                            // Verify what's actually selected in the DS after a delay
                            setTimeout(() => {
                                var _a;
                                const ds = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().getDataSource(featureDS.id);
                                const selectedInDS = ds === null || ds === void 0 ? void 0 : ds.getSelectedRecords();
                                const selectedIdsInDS = (_a = ds === null || ds === void 0 ? void 0 : ds.getSelectedRecordIds()) !== null && _a !== void 0 ? _a : [];
                                debugLogger.log('RESULTS-MODE', {
                                    event: 'verify-records-after-reselection',
                                    widgetId: props.widgetId,
                                    outputDSId: featureDS.id,
                                    expectedCount: accumulatedRecords.length,
                                    actualSelectedInDS: (selectedInDS === null || selectedInDS === void 0 ? void 0 : selectedInDS.length) || 0,
                                    selectedIdsInDS: selectedIdsInDS.length,
                                    recordsMatch: (selectedInDS === null || selectedInDS === void 0 ? void 0 : selectedInDS.length) === accumulatedRecords.length
                                });
                            }, 200);
                        }
                        catch (error) {
                            debugLogger.log('RESULTS-MODE', {
                                event: 're-selection-failed-after-switch',
                                widgetId: props.widgetId,
                                error: error instanceof Error ? error.message : 'Unknown error',
                                errorStack: error instanceof Error ? error.stack : undefined
                            });
                        }
                    }))();
                }
            }, 100);
        }
    }), [resultsMode, accumulatedRecords, props.widgetId, useGraphicsLayerForHighlight, onInitializeGraphicsLayer]);
    // Clear results when query item changes (e.g., when new hash parameter triggers different query)
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        // Only clear if we're actually switching to a different query (not just re-rendering)
        const isSwitchingQueries = previousConfigIdRef.current !== queryItem.configId;
        // Only clear results when switching queries if we're in "New" mode
        // In "Add to" and "Remove from" modes, we want to preserve accumulated records across query switches
        if (isSwitchingQueries && resultCount > 0 && resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection) {
            // Store the old configId before updating
            const oldConfigId = previousConfigIdRef.current;
            // Update the ref to track the new query
            previousConfigIdRef.current = queryItem.configId;
            debugLogger.log('RESULTS-MODE', {
                event: 'clearing-results-on-query-switch-new-mode',
                widgetId: props.widgetId,
                oldConfigId,
                newConfigId: queryItem.configId,
                resultsMode
            });
            // Clear immediately when switching queries, but wrap in try-catch to handle
            // race conditions with feature info windows that might be rendering
            try {
                clearResult('query-item-switch-new-mode');
            }
            catch (error) {
                // Log for debugging but don't show to user (framework race condition)
                // The error is in framework code (feature-info.tsx), not our code
                // This can happen if feature-info.tsx is trying to appendChild to a DOM element
                // that gets removed when we clear selection
                debugLogger.log('TASK', {
                    event: 'clear-result-race-condition',
                    error: error instanceof Error ? error.message : String(error),
                    note: 'Likely race condition with feature-info.tsx'
                });
                if (true) {
                    console.warn('Error clearing results (likely race condition with feature info):', error);
                }
                // Don't set error state - this is expected in some scenarios
            }
        }
        else if (isSwitchingQueries) {
            // Just update the ref - don't clear results if in "Add to" or "Remove from" mode or no results
            previousConfigIdRef.current = queryItem.configId;
            if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection || resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection) {
                debugLogger.log('RESULTS-MODE', {
                    event: 'preserving-accumulated-records-on-query-switch',
                    widgetId: props.widgetId,
                    resultsMode,
                    oldConfigId: previousConfigIdRef.current,
                    newConfigId: queryItem.configId,
                    accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0
                });
            }
        }
    }, [queryItem.configId, clearResult, resultCount, resultsMode, accumulatedRecords, props.widgetId]);
    const navToForm = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((...args_1) => __awaiter(this, [...args_1], void 0, function* (clearResults = false) {
        if (clearResults) {
            // Use the centralized clearResult method instead of duplicating logic
            yield clearResult('navToForm-clearResults');
            return;
        }
        // Switch to query tab but don't clear results unless explicitly requested
        // Mark as manual switch to prevent auto-switch useEffect from interfering
        manualTabSwitchRef.current = true;
        setActiveTab('query');
        // Reset the flag after a short delay
        setTimeout(() => {
            manualTabSwitchRef.current = false;
        }, 100);
        // Only change stage if we're clearing results
        // Otherwise, keep stage at 1 (results available) so results persist
        if (!clearResults && resultCount > 0) {
            setStage(1); // Keep results available
        }
        jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.defer(() => {
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.focusElementInKeyboardMode)(backBtnRef.current);
        });
    }), [clearResult, resultCount]);
    /**
     * Handles tab switching between Query and Results tabs.
     * Tab switching preserves results state - results remain visible and selected
     * when switching between tabs. Results are only cleared when explicitly
     * clicking the trash can button or when starting a new query.
     *
     * @param tab - The tab to switch to ('query' | 'results')
     * @param event - Optional mouse event to prevent default behavior
     */
    const handleTabChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((tab, event) => {
        debugLogger.log('TASK', {
            event: 'tab-change',
            tab,
            currentTab: activeTab,
            resultCount,
            eventType: event === null || event === void 0 ? void 0 : event.type
        });
        if (event) {
            event.preventDefault();
            event.stopPropagation();
        }
        // Don't allow switching to results if there are no results
        if (tab === 'results' && resultCount === 0) {
            debugLogger.log('TASK', {
                event: 'tab-change-blocked',
                reason: 'no-results',
                tab,
                resultCount
            });
            return;
        }
        // Mark this as a manual switch to prevent auto-switch useEffect from interfering
        manualTabSwitchRef.current = true;
        setActiveTab(tab);
        // Reset the flag after a short delay to allow the state update to complete
        // This prevents the auto-switch useEffect from immediately switching back
        setTimeout(() => {
            manualTabSwitchRef.current = false;
        }, 100);
        // Don't change stage here - just switch the view
        // Stage should remain at 1 (results available) when switching between tabs
    }, [resultCount, activeTab]);
    /**
     * Handles form submission when user clicks "Apply" button.
     * Clears old results (if any) by programmatically clicking the trash can button,
     * then executes the query with the provided SQL expression and spatial filter.
     *
     * @param sqlExpr - The SQL expression for attribute filtering
     * @param spatialFilter - The spatial filter object
     * @param runtimeZoomToSelected - Optional runtime override for zoom-to-selected behavior
     */
    const handleFormSubmit = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((sqlExpr, spatialFilter, runtimeZoomToSelected) => __awaiter(this, void 0, void 0, function* () {
        var _a, _b, _c, _d, _e;
        // Clear previous errors when starting a new query
        setSelectionError(null);
        setZoomError(null);
        debugLogger.log('TASK', {
            event: 'handleFormSubmit-start',
            widgetId: props.widgetId,
            resultsMode,
            timestamp: Date.now()
        });
        // Store the runtime zoom override for use by Add to Map action
        lastRuntimeZoomToSelectedRef.current = runtimeZoomToSelected;
        attributeFilterSqlExprObj.current = sqlExpr;
        spatialFilterObj.current = spatialFilter;
        // Load the first page
        const featureDS = outputDS;
        // For "Add to" and "Remove from" modes, use widget-level accumulated records
        // These persist across query switches, unlike query-item-level records
        let existingRecordsForMerge = [];
        if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection || resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection) {
            // Robust capture strategy:
            // 1. Try records from props (already merged by parent)
            // 2. Fallback to currently selected records in DS (captured during mode switch)
            const fromProp = accumulatedRecords || [];
            const fromDS = (outputDS === null || outputDS === void 0 ? void 0 : outputDS.getSelectedRecords()) || [];
            existingRecordsForMerge = fromProp.length > 0 ? fromProp : fromDS;
            debugLogger.log('RESULTS-MODE', {
                event: 'captured-existing-records-diagnostic',
                widgetId: props.widgetId,
                resultsMode,
                fromPropCount: fromProp.length,
                fromDSCount: fromDS.length,
                finalCapturedCount: existingRecordsForMerge.length,
                firstRecordId: ((_b = (_a = existingRecordsForMerge[0]) === null || _a === void 0 ? void 0 : _a.getId) === null || _b === void 0 ? void 0 : _b.call(_a)) || 'none',
                allRecordIds: existingRecordsForMerge.map(r => { var _a; return (_a = r.getId) === null || _a === void 0 ? void 0 : _a.call(r); }).slice(0, 10),
                outputDSId: outputDS.id,
                timestamp: Date.now()
            });
        }
        // For "New" mode, clear old results and graphics layer
        // We call clearResult() directly and AWAIT it to ensure it's finished before query execution starts
        if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection) {
            debugLogger.log('TASK', {
                event: 'handleFormSubmit-clearing-results-for-new-mode',
                widgetId: props.widgetId,
                timestamp: Date.now()
            });
            yield clearResult('handleFormSubmit-new-mode');
        }
        // Set loading stage
        setStage(2);
        // FORCED: Always use SimpleList - fetch ALL records, not just a page
        // Use data source's max record count, or fall back to a large number (10000)
        const maxRecordCount = (_e = (_d = (_c = featureDS).getMaxRecordCount) === null || _d === void 0 ? void 0 : _d.call(_c)) !== null && _e !== void 0 ? _e : 10000;
        let pageSize = maxRecordCount;
        const queryParams = (0,_query_utils__WEBPACK_IMPORTED_MODULE_11__.generateQueryParams)(featureDS, sqlExpr, spatialFilter, currentItem, 1, pageSize);
        queryParamRef.current = queryParams;
        debugLogger.log('TASK', {
            event: 'handleFormSubmit-executing-query',
            widgetId: props.widgetId,
            where: queryParams.where,
            resultsMode,
            timestamp: Date.now()
        });
        // Change output ds status to unloaded before use it to load count/records.
        featureDS.setStatus(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.Unloaded);
        featureDS.setCountStatus(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.Unloaded);
        let queryResultCount = 0; // Capture count from records to use in finally block
        const startTime = performance.now();
        debugLogger.log('TASK', {
            event: 'perf-query-chain-start',
            widgetId: props.widgetId,
            resultsMode,
            where: queryParams.where,
            timestamp: Date.now()
        });
        // PERFORMANCE OPTIMIZATION: Removed redundant executeCountQuery() round-trip.
        // Since we fetch ALL records (pageSize = maxRecordCount), we can just use records.length.
        featureDS.updateQueryParams(queryParamRef.current, props.widgetId);
        const fetchStartTime = performance.now();
        (0,_query_utils__WEBPACK_IMPORTED_MODULE_11__.executeQuery)(props.widgetId, queryItem, featureDS, queryParamRef.current)
            .then((result) => __awaiter(this, void 0, void 0, function* () {
            var _a, _b, _c;
            const fetchDurationMs = Math.round(performance.now() - fetchStartTime);
            const processingStartTime = performance.now();
            queryResultCount = ((_a = result.records) === null || _a === void 0 ? void 0 : _a.length) || 0;
            debugLogger.log('RESULTS-MODE', {
                event: 'query-execution-complete',
                widgetId: props.widgetId,
                resultsMode,
                recordsReturned: queryResultCount,
                fetchDurationMs,
                existingCapturedCount: existingRecordsForMerge.length,
                timestamp: Date.now()
            });
            let recordsToDisplay = result.records || [];
            let dsToUse = outputDS;
            // Handle "Add to" mode: merge new results with widget-level accumulated records
            if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection && result.records && result.records.length > 0) {
                try {
                    debugLogger.log('RESULTS-MODE', {
                        event: 'add-mode-starting-merge-diagnostic',
                        widgetId: props.widgetId,
                        existingCount: existingRecordsForMerge.length,
                        existingIds: existingRecordsForMerge.map(r => { var _a; return (_a = r.getId) === null || _a === void 0 ? void 0 : _a.call(r); }).slice(0, 5),
                        newCount: result.records.length,
                        newIds: result.records.map((r) => { var _a; return (_a = r.getId) === null || _a === void 0 ? void 0 : _a.call(r); }).slice(0, 5),
                        timestamp: Date.now()
                    });
                    // Merge new query results with widget-level accumulated records
                    const mergedRecords = (0,_results_management_utils__WEBPACK_IMPORTED_MODULE_12__.mergeResultsIntoAccumulated)(outputDS, // Use outputDS for key generation
                    result.records, existingRecordsForMerge // Use consistently captured records
                    );
                    recordsToDisplay = mergedRecords;
                    // Update widget-level accumulated records so they persist across query switches
                    if (onAccumulatedRecordsChange) {
                        onAccumulatedRecordsChange(mergedRecords);
                    }
                    debugLogger.log('RESULTS-MODE', {
                        event: 'add-mode-merge-complete-diagnostic',
                        widgetId: props.widgetId,
                        mergedRecordsCount: mergedRecords.length,
                        mergedIds: mergedRecords.map(r => { var _a; return (_a = r.getId) === null || _a === void 0 ? void 0 : _a.call(r); }).slice(0, 10),
                        timestamp: Date.now()
                    });
                }
                catch (error) {
                    debugLogger.log('RESULTS-MODE', {
                        event: 'add-mode-error',
                        widgetId: props.widgetId,
                        error: error instanceof Error ? error.message : 'Unknown error',
                        errorStack: error instanceof Error ? error.stack : undefined
                    });
                    // Fall back to normal behavior on error
                    recordsToDisplay = result.records;
                }
            }
            else if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection) {
                // Handle "Remove from" mode: remove matching records from widget-level accumulated records
                try {
                    debugLogger.log('RESULTS-MODE', {
                        event: 'remove-mode-starting-merge',
                        widgetId: props.widgetId,
                        existingCount: existingRecordsForMerge.length,
                        removeCount: ((_b = result.records) === null || _b === void 0 ? void 0 : _b.length) || 0
                    });
                    // Check if we have accumulated records to remove from
                    if (existingRecordsForMerge.length === 0) {
                        debugLogger.log('RESULTS-MODE', {
                            event: 'remove-mode-no-accumulated-records',
                            widgetId: props.widgetId,
                            queryRecordsCount: ((_c = result.records) === null || _c === void 0 ? void 0 : _c.length) || 0,
                            note: 'No accumulated records to remove from - no-op'
                        });
                        // No accumulated records, so nothing to remove - show empty results
                        recordsToDisplay = [];
                    }
                    else if (result.records && result.records.length > 0) {
                        // Remove matching records from accumulated records
                        const remainingRecords = (0,_results_management_utils__WEBPACK_IMPORTED_MODULE_12__.removeResultsFromAccumulated)(outputDS, // Use outputDS for key generation
                        result.records, existingRecordsForMerge // Use consistently captured records
                        );
                        recordsToDisplay = remainingRecords;
                        // Update widget-level accumulated records
                        if (onAccumulatedRecordsChange) {
                            onAccumulatedRecordsChange(remainingRecords);
                        }
                        // Remove records from origin data source selections (map highlighting)
                        // Also removes graphics from graphics layer if using graphics layer highlighting
                        (0,_results_management_utils__WEBPACK_IMPORTED_MODULE_12__.removeRecordsFromOriginSelections)(props.widgetId, result.records, outputDS, useGraphicsLayerForHighlight, graphicsLayer);
                        debugLogger.log('RESULTS-MODE', {
                            event: 'remove-mode-complete',
                            widgetId: props.widgetId,
                            existingAccumulatedRecordsCount: existingRecordsForMerge.length,
                            queryRecordsCount: result.records.length,
                            remainingRecordsCount: remainingRecords.length,
                            recordsRemoved: existingRecordsForMerge.length - remainingRecords.length,
                            outputDSId: outputDS.id,
                            widgetLevelRecordsUpdated: true,
                            originSelectionsUpdated: true
                        });
                        // If all records removed, auto-clear (consistent with user expectation)
                        if (remainingRecords.length === 0) {
                            debugLogger.log('RESULTS-MODE', {
                                event: 'remove-mode-all-records-removed',
                                widgetId: props.widgetId,
                                note: 'All accumulated records removed - auto-clearing'
                            });
                            // Clear widget-level accumulated records
                            if (onAccumulatedRecordsChange) {
                                onAccumulatedRecordsChange([]);
                            }
                        }
                    }
                    else {
                        // Query returned no results - nothing to remove
                        debugLogger.log('RESULTS-MODE', {
                            event: 'remove-mode-no-query-results',
                            widgetId: props.widgetId,
                            existingAccumulatedRecordsCount: existingRecordsForMerge.length,
                            note: 'Query returned no results - no records to remove'
                        });
                        // Keep existing accumulated records displayed
                        recordsToDisplay = existingRecordsForMerge;
                    }
                }
                catch (error) {
                    debugLogger.log('RESULTS-MODE', {
                        event: 'remove-mode-error',
                        widgetId: props.widgetId,
                        error: error instanceof Error ? error.message : 'Unknown error',
                        errorStack: error instanceof Error ? error.stack : undefined
                    });
                    // Fall back to showing query results on error
                    recordsToDisplay = result.records || [];
                }
            }
            else if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection) {
                // For "New" mode, clear widget-level accumulated records
                if (onAccumulatedRecordsChange) {
                    onAccumulatedRecordsChange([]);
                }
            }
            recordsRef.current = recordsToDisplay;
            // Reset selection flag for new query results
            hasSelectedRecordsRef.current = false;
            // Select records in the output DS
            // For "Add to" mode, select merged records
            // For "Remove from" mode, select remaining records (already updated via removeRecordsFromOriginSelections)
            // For "New" mode, select query results
            if (recordsToDisplay && recordsToDisplay.length > 0 && dsToUse) {
                const recordIdsToSelect = recordsToDisplay.map(record => record.getId());
                // For "Remove from" mode, selection was already updated via removeRecordsFromOriginSelections
                // But we still need to select in the outputDS for widget state consistency
                if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection) {
                    // Selection was already updated in origin DSs via removeRecordsFromOriginSelections
                    // Just update outputDS selection for widget state consistency
                    try {
                        if (typeof dsToUse.selectRecordsByIds === 'function') {
                            dsToUse.selectRecordsByIds(recordIdsToSelect, recordsToDisplay);
                        }
                        hasSelectedRecordsRef.current = true;
                        debugLogger.log('RESULTS-MODE', {
                            event: 'remove-mode-output-ds-selection-updated',
                            widgetId: props.widgetId,
                            recordCount: recordsToDisplay.length
                        });
                    }
                    catch (error) {
                        debugLogger.log('RESULTS-MODE', {
                            event: 'remove-mode-output-ds-selection-error',
                            widgetId: props.widgetId,
                            error: error instanceof Error ? error.message : 'Unknown error'
                        });
                    }
                }
                else {
                    // For "Add to" and "New" modes, select records normally
                    setSelectionError(null) // Clear previous errors
                    ;
                    (() => __awaiter(this, void 0, void 0, function* () {
                        try {
                            yield (0,_selection_utils__WEBPACK_IMPORTED_MODULE_16__.selectRecordsAndPublish)(props.widgetId, dsToUse, recordIdsToSelect, recordsToDisplay, false, useGraphicsLayerForHighlight, graphicsLayer, mapView);
                            hasSelectedRecordsRef.current = true; // Mark as selected
                            // Dispatch custom selection event so Widget state is updated immediately
                            // This is crucial for hash-based execution where QueryTask handles selection
                            (0,_selection_utils__WEBPACK_IMPORTED_MODULE_16__.dispatchSelectionEvent)(props.widgetId, recordIdsToSelect, dsToUse, queryItem.configId);
                        }
                        catch (error) {
                            const errorMessage = error instanceof Error ? error.message : 'Failed to select query results';
                            setSelectionError(errorMessage);
                            debugLogger.log('TASK', {
                                event: 'selection-failed',
                                error: errorMessage,
                                errorStack: error instanceof Error ? error.stack : undefined,
                                recordCount: recordIdsToSelect.length
                            });
                        }
                    }))();
                }
            }
            else if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection && recordsToDisplay.length === 0) {
                // All records removed - clear selection
                ;
                (() => __awaiter(this, void 0, void 0, function* () {
                    try {
                        yield (0,_selection_utils__WEBPACK_IMPORTED_MODULE_16__.clearSelectionInDataSources)(props.widgetId, dsToUse, useGraphicsLayerForHighlight, graphicsLayer);
                        hasSelectedRecordsRef.current = false;
                        // Notify Widget that selection is cleared
                        (0,_selection_utils__WEBPACK_IMPORTED_MODULE_16__.dispatchSelectionEvent)(props.widgetId, [], dsToUse, queryItem.configId);
                        debugLogger.log('RESULTS-MODE', {
                            event: 'remove-mode-all-records-removed-selection-cleared',
                            widgetId: props.widgetId
                        });
                    }
                    catch (error) {
                        debugLogger.log('RESULTS-MODE', {
                            event: 'remove-mode-clear-selection-error',
                            widgetId: props.widgetId,
                            error: error instanceof Error ? error.message : 'Unknown error'
                        });
                    }
                }))();
            }
            // Mark that query just executed BEFORE updating resultCount
            // This ensures the auto-switch useEffect sees queryJustExecutedRef.current === true
            queryJustExecutedRef.current = true;
            debugLogger.log('TASK', {
                event: 'query-executed-flag-set',
                widgetId: props.widgetId,
                queryItemConfigId: queryItem.configId,
                resultsMode,
                recordsToDisplayCount: recordsToDisplay.length,
                queryResultCount,
                timestamp: Date.now()
            });
            // Update result count
            // For "Add to" and "Remove from" modes, use accumulated/remaining count
            // For "New" mode, use query count
            const newResultCount = resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection || resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection
                ? recordsToDisplay.length
                : queryResultCount;
            setResultCount(newResultCount);
            // INSTANT UI FIX (The "Spinner Bypass"): 
            // Decouple the "Retrieving results..." spinner from asynchronous actions like zooming. 
            // By calling setStage(1) now, the user sees the result list immediately while 
            // the map animation continues in the background.
            setStage(1);
            debugLogger.log('TASK', {
                event: 'perf-processing-complete',
                widgetId: props.widgetId,
                processingDurationMs: Math.round(performance.now() - processingStartTime),
                totalChainDurationMs: Math.round(performance.now() - startTime),
                newResultCount,
                resultsMode,
                timestamp: Date.now()
            });
            // Trigger the existing zoomToFeature data action (same as clicking "Zoom To" in the menu)
            // Use runtime preference if provided, otherwise fall back to config setting (defaults to true)
            const shouldZoom = runtimeZoomToSelected !== undefined
                ? runtimeZoomToSelected
                : (queryItem.zoomToSelected !== false);
            // Use the output DS and merged records
            const recordsForZoom = recordsToDisplay || result.records;
            const dsForZoom = dsToUse || outputDS;
            if (recordsForZoom && recordsForZoom.length > 0 && dsForZoom && shouldZoom) {
                // Create a data set from the appropriate data source and records
                const dataSet = {
                    dataSource: dsForZoom,
                    records: recordsForZoom,
                    name: dsForZoom.getLabel()
                };
                // Get available data actions and find the zoomToFeature action
                return jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataActionManager.getInstance().getSupportedActions(props.widgetId, [dataSet], jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataLevel.Records)
                    .then(actionCategories => {
                    // Look for zoomToFeature action in any category
                    let zoomAction = null;
                    for (const category in actionCategories) {
                        const actions = actionCategories[category];
                        zoomAction = actions.find((action) => action.name === 'zoomToFeature' || action.id === 'zoomToFeature');
                        if (zoomAction)
                            break;
                    }
                    if (zoomAction) {
                        // Execute the same zoom action that works when clicked manually
                        return jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataActionManager.getInstance().executeDataAction(zoomAction, [dataSet], jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataLevel.Records, props.widgetId);
                    }
                    else {
                        return Promise.resolve(false);
                    }
                })
                    .catch(error => {
                    const errorMessage = error instanceof Error ? error.message : 'Failed to zoom to features';
                    setZoomError(errorMessage);
                    debugLogger.log('ZOOM', {
                        event: 'zoom-action-failed',
                        error: errorMessage,
                        errorStack: error instanceof Error ? error.stack : undefined
                    });
                    if (true) {
                        console.error('Error executing zoomToFeature data action', error);
                    }
                    return Promise.resolve(false);
                });
            }
            return Promise.resolve(true);
        }))
            .catch(error => {
            debugLogger.log('TASK', {
                event: 'query-chain-failed-diagnostic',
                widgetId: props.widgetId,
                error: error instanceof Error ? error.message : String(error),
                errorStack: error instanceof Error ? error.stack : undefined,
                timestamp: Date.now()
            });
            setStage(1); // Return to results or form stage even on error
        })
            .finally(() => {
            if ((spatialFilter === null || spatialFilter === void 0 ? void 0 : spatialFilter.layer) && (spatialFilter === null || spatialFilter === void 0 ? void 0 : spatialFilter.clearAfterApply)) {
                spatialFilter.layer.removeAll();
            }
            // setStage(1) // Removed from here; now called in the main chain before background actions
        });
    }), [currentItem, queryItem, props.widgetId, outputDS, publishDataClearedMsg, clearResult, resultsMode, accumulatedRecords, onAccumulatedRecordsChange, onClearGraphicsLayer]);
    const { useAttributeFilter, sqlExprObj, useSpatialFilter, spatialFilterTypes, spatialIncludeRuntimeData, spatialRelationUseDataSources } = currentItem;
    const showAttributeFilter = useAttributeFilter && sqlExprObj != null;
    const showSpatialFilter = spatialFilterEnabled && useSpatialFilter && (spatialFilterTypes.length > 0 || spatialIncludeRuntimeData || (spatialRelationUseDataSources === null || spatialRelationUseDataSources === void 0 ? void 0 : spatialRelationUseDataSources.length) > 0);
    // DETECT SWITCH IN RENDER
    const isSwitchingQueries = previousConfigIdRef.current !== queryItem.configId;
    const isVirtualClearActive = isSwitchingQueries && resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection;
    // Use these "effective" values for the UI
    const effectiveResultCount = isVirtualClearActive ? 0 : resultCount;
    const effectiveRecords = isVirtualClearActive ? [] : (recordsRef.current || []);
    // Create a unique key for the current query result set to help E2E tests detect fresh data
    const resultQueryKey = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return `${queryItem.configId}_${Date.now()}`;
    }, [queryItem.configId, resultCount]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('query-task h-100', className, { wrapped: wrappedInPopper }), "data-result-query-key": resultQueryKey, css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
      ${style}
      position: relative;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceComponent, { useDataSource: useOutputDs, onDataSourceCreated: handleOutputDataSourceCreated, onDataSourceInfoChange: handleOutputDataSourceInfoChange }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tabs, { value: activeTab, onChange: (id) => handleTabChange(id), fill: true, type: 'underline', keepMount: true, css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
          flex: 1;
          display: flex;
          flex-direction: column;
          overflow: hidden;
          min-height: 0;
        `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tab, { id: 'query', title: getI18nMessage('queryTab'), children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('query-task__content', {
                                [jimu_ui__WEBPACK_IMPORTED_MODULE_2__.FOCUSABLE_CONTAINER_CLASS]: isInPopper && activeTab === 'query'
                            }), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              flex: 1;
              display: flex;
              flex-direction: column;
              overflow: hidden;
              min-height: 0;
              padding-top: 0 !important;
            `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('query-form__header mx-4 align-items-center', { 'in-popper': isInPopper }), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              display: flex;
              padding: 6px 0;
              padding-top: 8px;
              border-bottom: 1px solid var(--sys-color-divider-secondary);
              flex-shrink: 0;
            `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('nav-action align-items-center', { 'd-none': wrappedInPopper }), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                flex: 1 1 0;
                overflow: hidden;
                display: flex;
                align-items: center;
                gap: 4px;
                .jimu-btn {
                  min-width: 26px;
                }
              `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('p-0 mr-2', { 'd-none': total === 1 || !onNavBack }), size: 'sm', type: 'tertiary', icon: true, onClick: onNavBack, "aria-label": getI18nMessage('back'), ref: backBtnRef, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_directional_arrow_left__WEBPACK_IMPORTED_MODULE_14__.ArrowLeftOutlined, { autoFlip: true }) }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_label__WEBPACK_IMPORTED_MODULE_9__.QueryTaskLabel, { icon: icon, name: displayLabel ? name : '' }), (() => {
                                                    var _a;
                                                    if (!queryItems || queryItems.length <= 1)
                                                        return null;
                                                    // Get current query's origin data source ID
                                                    const currentOriginDSId = (_a = queryItem.useDataSource) === null || _a === void 0 ? void 0 : _a.dataSourceId;
                                                    if (!currentOriginDSId)
                                                        return null;
                                                    // Find all queries from the same origin data source that have shortIds
                                                    const sameLayerQueries = queryItems.filter(item => {
                                                        var _a;
                                                        return ((_a = item.useDataSource) === null || _a === void 0 ? void 0 : _a.dataSourceId) === currentOriginDSId &&
                                                            item.shortId &&
                                                            item.shortId.trim() !== '';
                                                    });
                                                    // Only show info button if there are queries with shortIds
                                                    if (sameLayerQueries.length === 0)
                                                        return null;
                                                    // Build tooltip content
                                                    const queryLines = sameLayerQueries.map(item => {
                                                        const queryName = getQueryDisplayName(item);
                                                        return `${queryName}: #${item.shortId}=value or ?${item.shortId}=value`;
                                                    });
                                                    const tooltipTitle = `This layer can be searched using the shortIds ${sameLayerQueries.map(q => q.shortId).join(' and ')} using #shortId=value or ?shortId=value in the URL.\n\n${queryLines.join('\n')}`;
                                                    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { placement: 'bottom', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `white-space: pre-line;`, title: tooltipTitle, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: 'sm', icon: true, type: 'tertiary', "aria-label": 'Hash parameter search information', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                          flex-shrink: 0;
                        `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_3__.InfoOutlined, { color: 'var(--sys-color-primary-main)', size: 's' }) }) }));
                                                })()] }), effectiveResultCount > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { title: getI18nMessage('clearResult'), placement: 'bottom', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { ref: clearResultBtnRef, size: 'sm', type: 'tertiary', "aria-label": getI18nMessage('clearResult'), icon: true, className: 'ml-auto py-0', onClick: () => { clearResult('user-trash-click'); }, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_editor_trash__WEBPACK_IMPORTED_MODULE_4__.TrashOutlined, {}) }) }))] }), (() => {
                                    // Only show dropdowns if multiple queries exist
                                    if (!queryItems || queryItems.length <= 1) {
                                        return null;
                                    }
                                    // Build flat list of all queries with their display info
                                    // For grouped queries, use group display name (only show once per group)
                                    const queryOptions = [];
                                    // Track which groups we've already added to avoid duplicates
                                    const addedGroups = new Set();
                                    queryItems.forEach((item, idx) => {
                                        var _a, _b, _c;
                                        if (item.groupId) {
                                            // For grouped queries, use group display name (only add once per group)
                                            if (!addedGroups.has(item.groupId)) {
                                                addedGroups.add(item.groupId);
                                                const groupDisplayName = ((_a = groups === null || groups === void 0 ? void 0 : groups[item.groupId]) === null || _a === void 0 ? void 0 : _a.displayName) ||
                                                    ((_c = (_b = groups === null || groups === void 0 ? void 0 : groups[item.groupId]) === null || _b === void 0 ? void 0 : _b.items[0]) === null || _c === void 0 ? void 0 : _c.name) ||
                                                    item.name ||
                                                    `Group ${item.groupId}`;
                                                queryOptions.push({
                                                    configId: item.configId,
                                                    displayName: groupDisplayName,
                                                    groupId: item.groupId,
                                                    index: idx
                                                });
                                            }
                                        }
                                        else {
                                            // Ungrouped query - use item.name for first dropdown (not searchAlias/jimuFieldName)
                                            queryOptions.push({
                                                configId: item.configId,
                                                displayName: item.name || getQueryDisplayName(item),
                                                groupId: null,
                                                index: idx
                                            });
                                        }
                                    });
                                    // Determine currently selected query
                                    const currentQueryItem = queryItem;
                                    const currentQueryGroupId = currentQueryItem.groupId || null;
                                    const isGroupedQuery = currentQueryGroupId !== null;
                                    // Find the option index for the current query
                                    const currentOptionIndex = queryOptions.findIndex(opt => {
                                        if (isGroupedQuery) {
                                            return opt.groupId === currentQueryGroupId;
                                        }
                                        else {
                                            return opt.configId === currentQueryItem.configId;
                                        }
                                    });
                                    debugLogger.log('GROUP', {
                                        event: 'rendering-dropdowns',
                                        totalQueries: queryItems.length,
                                        queryOptionsCount: queryOptions.length,
                                        currentQueryGroupId,
                                        isGroupedQuery,
                                        currentOptionIndex,
                                        selectedGroupId,
                                        selectedGroupQueryIndex,
                                        currentQueryConfigId: currentQueryItem.configId
                                    });
                                    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                    padding: 4px 16px;
                    flex-shrink: 0;
                  `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("label", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                      font-size: 0.875rem;
                      font-weight: 500;
                      color: var(--sys-color-text-primary);
                      margin-bottom: 4px;
                      display: block;
                    `, children: getI18nMessage('searchLayer') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Select, { size: "sm", value: currentOptionIndex >= 0 ? currentOptionIndex : 0, onChange: (e) => __awaiter(this, void 0, void 0, function* () {
                                                            var _a;
                                                            const optionIndex = parseInt(e.target.value);
                                                            const selectedOption = queryOptions[optionIndex];
                                                            debugLogger.log('GROUP', {
                                                                event: 'query-option-selected',
                                                                optionIndex,
                                                                selectedOption,
                                                                isGrouped: selectedOption.groupId !== null
                                                            });
                                                            // START CLEARING IMMEDIATELY IF SWITCHING
                                                            if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection) {
                                                                yield clearResult('dropdown-layer-switch-new-mode');
                                                            }
                                                            if (selectedOption.groupId) {
                                                                // Grouped query selected - set group and first query in group
                                                                if (onGroupChange) {
                                                                    onGroupChange(selectedOption.groupId);
                                                                }
                                                                if (onGroupQueryChange) {
                                                                    onGroupQueryChange(0);
                                                                }
                                                            }
                                                            else {
                                                                // Ungrouped query selected - clear group selection
                                                                if (onGroupChange) {
                                                                    onGroupChange(null);
                                                                }
                                                                if (onUngroupedChange) {
                                                                    // Find the ungrouped index
                                                                    const ungroupedIndex = (_a = ungrouped === null || ungrouped === void 0 ? void 0 : ungrouped.findIndex(({ item }) => item.configId === selectedOption.configId)) !== null && _a !== void 0 ? _a : -1;
                                                                    if (ungroupedIndex >= 0) {
                                                                        onUngroupedChange(ungroupedIndex);
                                                                    }
                                                                    else {
                                                                        // Fallback: use the index from queryItems
                                                                        debugLogger.log('GROUP', {
                                                                            event: 'ungrouped-fallback-to-index',
                                                                            selectedOptionIndex: selectedOption.index
                                                                        });
                                                                        if (onQueryChange) {
                                                                            onQueryChange(selectedOption.index);
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }), children: queryOptions.map((option, idx) => {
                                                            debugLogger.log('GROUP', {
                                                                event: 'rendering-query-option',
                                                                index: idx,
                                                                configId: option.configId,
                                                                displayName: option.displayName,
                                                                groupId: option.groupId
                                                            });
                                                            return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: idx, children: option.displayName }, option.configId));
                                                        }) })] }), isGroupedQuery && currentQueryGroupId && groups && groups[currentQueryGroupId] && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                      padding: 4px 16px;
                      flex-shrink: 0;
                    `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("label", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                        font-size: 0.875rem;
                        font-weight: 500;
                        color: var(--sys-color-text-primary);
                        margin-bottom: 4px;
                        display: block;
                      `, children: "Search Alias" }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Select, { size: "sm", value: selectedGroupQueryIndex !== undefined ? selectedGroupQueryIndex : 0, onChange: (e) => __awaiter(this, void 0, void 0, function* () {
                                                            var _a;
                                                            const newIndex = parseInt(e.target.value);
                                                            debugLogger.log('GROUP', {
                                                                event: 'group-query-selected',
                                                                groupId: currentQueryGroupId,
                                                                groupQueryIndex: newIndex,
                                                                queryItemConfigId: (_a = groups[currentQueryGroupId].items[newIndex]) === null || _a === void 0 ? void 0 : _a.configId,
                                                                queryDisplayName: getQueryDisplayName(groups[currentQueryGroupId].items[newIndex])
                                                            });
                                                            // START CLEARING IMMEDIATELY IF SWITCHING
                                                            if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection) {
                                                                yield clearResult('dropdown-alias-switch-new-mode');
                                                            }
                                                            if (onGroupQueryChange) {
                                                                onGroupQueryChange(newIndex);
                                                            }
                                                        }), children: groups[currentQueryGroupId].items.map((item, idx) => ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: idx, children: getQueryDisplayName(item) }, item.configId))) })] }))] }));
                                })(), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                    padding: 8px 16px;
                    flex-shrink: 0;
                  `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "d-flex align-items-center", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                      gap: 0.5rem;
                      flex-wrap: nowrap;
                    `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "title2", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                        font-size: 0.875rem;
                        font-weight: 500;
                        color: var(--sys-color-text-primary);
                        white-space: nowrap;
                        flex-shrink: 0;
                      `, children: [getI18nMessage('results'), ":"] }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { placement: 'bottom', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `white-space: pre-line;`, title: getI18nMessage('resultsModeDesc'), children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: 'sm', icon: true, type: 'tertiary', "aria-label": getI18nMessage('resultsModeDesc'), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `flex-shrink: 0;`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_3__.InfoOutlined, { color: 'var(--sys-color-primary-main)', size: 's' }) }) }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { role: "radiogroup", "aria-label": getI18nMessage('resultsMode'), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                          display: flex;
                          gap: 4px;
                          align-items: stretch;
                          flex: 1;
                          min-width: 0;
                        `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: "sm", variant: resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection ? 'contained' : 'outlined', color: resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection ? 'primary' : 'default', onClick: () => {
                                                                const newMode = _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection;
                                                                debugLogger.log('RESULTS-MODE', {
                                                                    event: 'button-mode-changed',
                                                                    widgetId: props.widgetId,
                                                                    queryItemConfigId: queryItem.configId,
                                                                    previousMode: resultsMode || _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection,
                                                                    newMode,
                                                                    timestamp: new Date().toISOString()
                                                                });
                                                                if (onResultsModeChange) {
                                                                    onResultsModeChange(newMode);
                                                                }
                                                            }, "aria-pressed": resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection, "aria-label": `${getI18nMessage('createNewResults')}: ${((_b = getI18nMessage('resultsModeDesc').split('\n')[1]) === null || _b === void 0 ? void 0 : _b.trim()) || ''}`, title: getI18nMessage('createNewResults'), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                          flex: 1;
                          font-size: 0.75rem;
                          padding: 4px 8px;
                          min-height: 28px;
                          white-space: nowrap;
                          text-overflow: ellipsis;
                          overflow: hidden;
                        `, children: getI18nMessage('resultsModeNew') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: "sm", variant: resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection ? 'contained' : 'outlined', color: resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection ? 'primary' : 'default', onClick: () => {
                                                                const newMode = _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection;
                                                                const previousMode = resultsMode || _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection;
                                                                debugLogger.log('RESULTS-MODE', {
                                                                    event: 'button-mode-changed',
                                                                    widgetId: props.widgetId,
                                                                    queryItemConfigId: queryItem.configId,
                                                                    previousMode,
                                                                    newMode,
                                                                    timestamp: new Date().toISOString()
                                                                });
                                                                // If switching FROM "New" TO "Add to" mode and we have current results,
                                                                // merge them with existing accumulated records before changing mode
                                                                const recordsToCapture = (effectiveRecords && effectiveRecords.length > 0)
                                                                    ? effectiveRecords
                                                                    : ((outputDS === null || outputDS === void 0 ? void 0 : outputDS.getSelectedRecords()) || []);
                                                                if (previousMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection &&
                                                                    newMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection &&
                                                                    recordsToCapture.length > 0 &&
                                                                    outputDS &&
                                                                    onAccumulatedRecordsChange) {
                                                                    const existingAccumulated = accumulatedRecords || [];
                                                                    // Merge current results with existing accumulated records
                                                                    const mergedRecords = (0,_results_management_utils__WEBPACK_IMPORTED_MODULE_12__.mergeResultsIntoAccumulated)(outputDS, recordsToCapture, existingAccumulated);
                                                                    debugLogger.log('RESULTS-MODE', {
                                                                        event: 'capturing-current-results-on-mode-switch',
                                                                        widgetId: props.widgetId,
                                                                        previousMode,
                                                                        newMode,
                                                                        capturedRecordsCount: recordsToCapture.length,
                                                                        existingAccumulatedCount: existingAccumulated.length,
                                                                        mergedRecordsCount: mergedRecords.length
                                                                    });
                                                                    onAccumulatedRecordsChange(mergedRecords);
                                                                }
                                                                if (onResultsModeChange) {
                                                                    onResultsModeChange(newMode);
                                                                }
                                                            }, "aria-pressed": resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection, "aria-label": `${getI18nMessage('addToCurrentResults')}: ${((_c = getI18nMessage('resultsModeDesc').split('\n')[2]) === null || _c === void 0 ? void 0 : _c.trim()) || ''}`, title: getI18nMessage('addToCurrentResults'), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                          flex: 1;
                          font-size: 0.75rem;
                          padding: 4px 8px;
                          min-height: 28px;
                          white-space: nowrap;
                          text-overflow: ellipsis;
                          overflow: hidden;
                        `, children: getI18nMessage('resultsModeAdd') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: "sm", variant: resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection ? 'contained' : 'outlined', color: resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection ? 'primary' : 'default', disabled: !accumulatedRecords || accumulatedRecords.length === 0, onClick: () => {
                                                                const newMode = _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection;
                                                                const previousMode = resultsMode || _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection;
                                                                debugLogger.log('RESULTS-MODE', {
                                                                    event: 'button-mode-changed',
                                                                    widgetId: props.widgetId,
                                                                    queryItemConfigId: queryItem.configId,
                                                                    previousMode,
                                                                    newMode,
                                                                    accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0,
                                                                    timestamp: new Date().toISOString()
                                                                });
                                                                // If switching FROM "New" TO "Remove from" mode and we have current results,
                                                                // merge them with existing accumulated records before changing mode
                                                                // (same pattern as "Add to" mode)
                                                                const recordsToCaptureForRemove = (effectiveRecords && effectiveRecords.length > 0)
                                                                    ? effectiveRecords
                                                                    : ((outputDS === null || outputDS === void 0 ? void 0 : outputDS.getSelectedRecords()) || []);
                                                                if (previousMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection &&
                                                                    newMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection &&
                                                                    recordsToCaptureForRemove.length > 0 &&
                                                                    outputDS &&
                                                                    onAccumulatedRecordsChange) {
                                                                    const existingAccumulated = accumulatedRecords || [];
                                                                    // Merge current results with existing accumulated records
                                                                    const mergedRecords = (0,_results_management_utils__WEBPACK_IMPORTED_MODULE_12__.mergeResultsIntoAccumulated)(outputDS, recordsToCaptureForRemove, existingAccumulated);
                                                                    debugLogger.log('RESULTS-MODE', {
                                                                        event: 'capturing-current-results-on-mode-switch-to-remove',
                                                                        widgetId: props.widgetId,
                                                                        previousMode,
                                                                        newMode,
                                                                        capturedRecordsCount: recordsToCaptureForRemove.length,
                                                                        existingAccumulatedCount: existingAccumulated.length,
                                                                        mergedRecordsCount: mergedRecords.length
                                                                    });
                                                                    onAccumulatedRecordsChange(mergedRecords);
                                                                }
                                                                if (onResultsModeChange) {
                                                                    onResultsModeChange(newMode);
                                                                }
                                                            }, "aria-pressed": resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection, "aria-label": `${getI18nMessage('removeFromCurrentResults')}: ${((_d = getI18nMessage('resultsModeDesc').split('\n')[3]) === null || _d === void 0 ? void 0 : _d.trim()) || ''}`, title: (!accumulatedRecords || accumulatedRecords.length === 0)
                                                                ? getI18nMessage('resultsModeDisabledRemove')
                                                                : getI18nMessage('removeFromCurrentResults'), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                          flex: 1;
                          font-size: 0.75rem;
                          padding: 4px 8px;
                          min-height: 28px;
                          white-space: nowrap;
                          text-overflow: ellipsis;
                          overflow: hidden;
                        `, children: getI18nMessage('resultsModeRemove') })] })] }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { id: `results-mode-description-${props.widgetId}`, className: "sr-only", "aria-live": "polite", role: "status", children: resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection
                                                ? getI18nMessage('createNewResults')
                                                : resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection
                                                    ? getI18nMessage('addToCurrentResults')
                                                    : getI18nMessage('removeFromCurrentResults') })] }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              flex: 1;
              display: flex;
              flex-direction: column;
              overflow: hidden;
              min-height: 0;
            `, children: [enabled && dsExists && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                  flex: 1;
                  display: flex;
                  flex-direction: column;
                  min-height: 0;
                  overflow: hidden;
                `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_form__WEBPACK_IMPORTED_MODULE_6__.QueryTaskForm, Object.assign({}, otherProps, { configId: queryItem.configId, outputDS: outputDS, datasourceReady: dataSource != null, spatialFilterEnabled: spatialFilterEnabled, dataActionFilter: dataActionFilter, onFormSubmit: handleFormSubmit, initialInputValue: initialInputValue, onHashParameterUsed: onHashParameterUsed, queryItemShortId: queryItem.shortId }), queryItem.configId) })), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_8__.DataSourceTip, { widgetId: props.widgetId, useDataSource: queryItem.useDataSource, showMessage: true, onStatusChange: handleStatusChange, onDataSourceCreated: handleDataSourceCreated })] })] }) }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tab, { id: 'results', title: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { children: [getI18nMessage('resultsTab'), effectiveResultCount > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                  margin-left: 6px;
                  font-size: 0.75rem;
                  opacity: 0.7;
                `, children: ["(", effectiveResultCount, ")"] }))] }), disabled: effectiveResultCount === 0, children: effectiveResultCount > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('query-task__content', {
                                [jimu_ui__WEBPACK_IMPORTED_MODULE_2__.FOCUSABLE_CONTAINER_CLASS]: isInPopper && activeTab === 'results'
                            }), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                flex: 1;
                display: flex;
                flex-direction: column;
                min-height: 0;
                height: 100%;
                padding-top: 0 !important;
              `, onClick: (e) => {
                                // Prevent clicks from bubbling up when Results tab is active
                                if (activeTab === 'results') {
                                    e.stopPropagation();
                                }
                            }, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_result__WEBPACK_IMPORTED_MODULE_7__.QueryTaskResult, { widgetId: props.widgetId, queryItem: queryItem, queryParams: queryParamRef.current, resultCount: effectiveResultCount, maxPerPage: (_e = dataSource === null || dataSource === void 0 ? void 0 : dataSource.getMaxRecordCount) === null || _e === void 0 ? void 0 : _e.call(dataSource), records: effectiveRecords, outputDS: outputDS, runtimeZoomToSelected: lastRuntimeZoomToSelectedRef.current, resultsMode: resultsMode, useGraphicsLayerForHighlight: useGraphicsLayerForHighlight, graphicsLayer: graphicsLayer, mapView: mapView, accumulatedRecords: accumulatedRecords, onAccumulatedRecordsChange: onAccumulatedRecordsChange, onNavBack: (...args_1) => __awaiter(this, [...args_1], void 0, function* (clearResults = false) {
                                    // Handle navigation from QueryTaskResult
                                    // If clearResults is true, clear everything and go to query tab
                                    // If false, just switch to query tab without clearing
                                    if (clearResults) {
                                        hasSelectedRecordsRef.current = false; // Reset flag when clearing
                                        yield navToForm(true);
                                    }
                                    else {
                                        // Just switch tabs, don't clear results
                                        // Mark as manual switch to prevent auto-switch useEffect from interfering
                                        manualTabSwitchRef.current = true;
                                        setActiveTab('query');
                                        // Reset the flag after a short delay
                                        setTimeout(() => {
                                            manualTabSwitchRef.current = false;
                                        }, 100);
                                    }
                                }) }, `${queryItem.configId}-${queryExecutionKeyRef.current}`) })) })] }), (selectionError || zoomError) && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
          padding: 0 16px;
          margin-top: 8px;
        `, children: [selectionError && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_8__.ErrorMessage, { error: selectionError, onDismiss: () => setSelectionError(null) })), zoomError && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_8__.ErrorMessage, { error: zoomError, onDismiss: () => setZoomError(null) }))] })), stage === 2 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          z-index: 1000;
          background-color: rgba(255, 255, 255, 0.8);
          display: flex;
          align-items: center;
          justify-content: center;
        `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_loading_result__WEBPACK_IMPORTED_MODULE_15__.LoadingResult, {}) }))] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-utils.ts":
/*!*************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-utils.ts ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   combineFields: () => (/* binding */ combineFields),
/* harmony export */   executeCountQuery: () => (/* binding */ executeCountQuery),
/* harmony export */   executeQuery: () => (/* binding */ executeQuery),
/* harmony export */   generateQueryParams: () => (/* binding */ generateQueryParams),
/* harmony export */   getPopupTemplate: () => (/* binding */ getPopupTemplate),
/* harmony export */   isQueryInputValid: () => (/* binding */ isQueryInputValid),
/* harmony export */   sanitizeQueryInput: () => (/* binding */ sanitizeQueryInput),
/* harmony export */   sanitizeSqlExpression: () => (/* binding */ sanitizeSqlExpression)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _shared_code_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../shared-code/common */ "./your-extensions/widgets/shared-code/common.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



const debugLogger = (0,_shared_code_common__WEBPACK_IMPORTED_MODULE_2__.createQuerySimpleDebugLogger)();
function combineFields(resultDisplayFields, resultTitleExpression, idField) {
    const fields = new Set();
    resultDisplayFields === null || resultDisplayFields === void 0 ? void 0 : resultDisplayFields.forEach(item => fields.add(item));
    if (resultTitleExpression) {
        const templates = resultTitleExpression.match(/\{\w*\}/g);
        if ((templates === null || templates === void 0 ? void 0 : templates.length) > 0) {
            templates.forEach(item => fields.add(item.substring(1, item.length - 1)));
        }
    }
    if (idField) {
        fields.add(idField);
    }
    return Array.from(fields);
}
/**
 * Validates user input before query execution.
 * @param input - The raw user input (string, number, etc.)
 * @param isList - Optional flag indicating if the input is from a list/selector (lenient validation)
 * @returns boolean - true if input is valid, false otherwise
 */
function isQueryInputValid(input, isList = false) {
    // If it's a list-based selection (Unique Values, Field Values), 
    // we allow empty/null as it might represent "no filter" or the user 
    // intends to interact with the list.
    if (isList) {
        return true;
    }
    if (input === null || input === undefined) {
        return false;
    }
    // If it's a string, ensure it's not empty or just whitespace
    if (typeof input === 'string') {
        return input.trim() !== '';
    }
    // If it's an array (often used in unique values or multiple selection)
    if (Array.isArray(input)) {
        if (input.length === 0)
            return false;
        // Check if the first item is valid (usually {value: '...', label: '...'})
        const firstItem = input[0];
        if (firstItem && typeof firstItem === 'object' && 'value' in firstItem) {
            return isQueryInputValid(firstItem.value);
        }
        return true;
    }
    // If it's a jimu-core Immutable array
    if (input.asMutable && typeof input.toArray === 'function') {
        const arr = input.toArray();
        if (arr.length === 0)
            return false;
        const firstItem = arr[0];
        if (firstItem && typeof firstItem === 'object' && 'value' in firstItem) {
            return isQueryInputValid(firstItem.value);
        }
        return true;
    }
    // For other types (numbers, dates), if it exists, we count it as valid
    return true;
}
/**
 * Sanitizes user input for query tasks.
 * 1. Strips leading and trailing whitespace.
 * 2. Prevents basic SQL injection by escaping single quotes.
 * 3. Handles empty or whitespace-only strings.
 *
 * @param input - The raw user input string
 * @returns Sanitized string or null if input is empty
 */
function sanitizeQueryInput(input) {
    if (!input || typeof input !== 'string') {
        return null;
    }
    const trimmed = input.trim();
    if (trimmed === '') {
        return null;
    }
    // Basic SQL escaping: replace single quotes with double single quotes
    return trimmed.replace(/'/g, "''");
}
/**
 * Sanitizes all values within an IMSqlExpression object.
 *
 * @param sqlExpr - The raw SQL expression object
 * @returns A new sanitized IMSqlExpression object
 */
function sanitizeSqlExpression(sqlExpr) {
    if (!sqlExpr || !sqlExpr.parts) {
        return sqlExpr;
    }
    let sanitizedExpr = sqlExpr;
    sqlExpr.parts.forEach((part, index) => {
        var _a;
        if (part.type === 'SINGLE' && ((_a = part.valueOptions) === null || _a === void 0 ? void 0 : _a.value) !== undefined) {
            const rawValue = part.valueOptions.value;
            // CASE 1: Simple String
            if (typeof rawValue === 'string') {
                const sanitizedValue = sanitizeQueryInput(rawValue);
                if (sanitizedValue !== rawValue) {
                    sanitizedExpr = sanitizedExpr.setIn(['parts', index, 'valueOptions', 'value'], sanitizedValue);
                }
            }
            // CASE 2: Array of objects (Unique Values / Dropdowns)
            // We must preserve the Immutable structure to avoid "asMutable" errors
            else if (Array.isArray(rawValue) || (rawValue && typeof rawValue.toArray === 'function')) {
                const isImmutable = typeof rawValue.toArray === 'function';
                const arr = isImmutable ? rawValue.toArray() : rawValue;
                let changed = false;
                const sanitizedArr = arr.map(item => {
                    if (item && typeof item === 'object' && 'value' in item && typeof item.value === 'string') {
                        const sanitizedVal = sanitizeQueryInput(item.value);
                        if (sanitizedVal !== item.value) {
                            changed = true;
                            return Object.assign(Object.assign({}, item), { value: sanitizedVal });
                        }
                    }
                    return item;
                });
                if (changed) {
                    // If it was Immutable, we should ideally use Immutable methods to update,
                    // but setIn on the top-level expression with a plain array/object 
                    // usually triggers the framework's auto-conversion.
                    sanitizedExpr = sanitizedExpr.setIn(['parts', index, 'valueOptions', 'value'], sanitizedArr);
                }
            }
        }
    });
    return sanitizedExpr;
}
function getPopupTemplate(outputDS, queryItem) {
    return __awaiter(this, void 0, void 0, function* () {
        var _a;
        const { resultFieldsType, resultDisplayFields, resultTitleExpression = '' } = queryItem;
        const currentOriginDs = outputDS.getOriginDataSources()[0];
        const popupInfo = currentOriginDs.getPopupInfo();
        if (resultFieldsType === _config__WEBPACK_IMPORTED_MODULE_1__.FieldsType.SelectAttributes) {
            let fields;
            if (resultDisplayFields == null) {
                const fieldsInContent = (0,_shared_code_common__WEBPACK_IMPORTED_MODULE_2__.getFieldInfosInPopupContent)(popupInfo);
                if (fieldsInContent.length > 0) {
                    const uniqueFields = new Set(fieldsInContent.map(ele => ele.fieldName));
                    fields = Array.from(uniqueFields);
                }
                else {
                    // return all fields by default
                    const allFieldsSchema = outputDS.getSchema();
                    fields = (allFieldsSchema === null || allFieldsSchema === void 0 ? void 0 : allFieldsSchema.fields) ? Object.values(allFieldsSchema.fields).map(field => field.jimuName) : [];
                }
            }
            else {
                fields = resultDisplayFields.asMutable({ deep: true });
            }
            if (popupInfo) {
                const fieldInfos = [];
                fields.forEach(field => {
                    const fieldInfo = popupInfo.fieldInfos.find(fieldInfo => fieldInfo.fieldName === field);
                    if (fieldInfo) {
                        fieldInfo.visible = true;
                        fieldInfos.push(fieldInfo);
                    }
                    else {
                        fieldInfos.push({
                            fieldName: field,
                            label: field
                        });
                    }
                });
                return {
                    popupTemplate: {
                        fieldInfos,
                        content: [{
                                type: 'fields'
                            }],
                        title: resultTitleExpression
                    }
                };
            }
            return {
                popupTemplate: {
                    fieldInfos: fields.map(field => ({
                        fieldName: field,
                        label: field
                    })),
                    content: [{
                            type: 'fields'
                        }],
                    title: resultTitleExpression
                }
            };
        }
        // the source layer will provide popup info
        let layerObject;
        if (currentOriginDs.layer) {
            layerObject = currentOriginDs.layer;
        }
        else {
            layerObject = yield currentOriginDs.createJSAPILayerByDataSource();
        }
        if (layerObject) {
            yield layerObject.load();
        }
        return { defaultPopupTemplate: ((_a = layerObject === null || layerObject === void 0 ? void 0 : layerObject.associatedLayer) === null || _a === void 0 ? void 0 : _a.defaultPopupTemplate) || (layerObject === null || layerObject === void 0 ? void 0 : layerObject.defaultPopupTemplate) };
    });
}
function generateQueryParams(outputDS, sqlExpr, spatialFilter, queryItem, page, pageSize) {
    var _a, _b, _c, _d, _e;
    const currentQueryDsJson = outputDS.getDataSourceJson();
    const currentOriginDs = outputDS.getOriginDataSources()[0];
    const isLocalDs = currentQueryDsJson === null || currentQueryDsJson === void 0 ? void 0 : currentQueryDsJson.isDataInDataSourceInstance;
    if (isLocalDs) {
        outputDS.setSourceRecords(currentOriginDs.getSourceRecords());
    }
    const { useAttributeFilter, useSpatialFilter, sortOptions, resultFieldsType, resultDisplayFields, resultTitleExpression } = queryItem;
    // DETERMINE MINIMAL FIELDS (The "Field Shredder" Optimization)
    // To achieve performance parity with Web AppBuilder, we must avoid fetching every 
    // column in the database (* or all). We surgically request only the fields 
    // needed for the Title, the Attribute List, and the ID field.
    let outputFields = [];
    if (resultFieldsType === _config__WEBPACK_IMPORTED_MODULE_1__.FieldsType.SelectAttributes && resultDisplayFields) {
        outputFields = combineFields(resultDisplayFields, resultTitleExpression || '', outputDS.getIdField());
    }
    else {
        // Popup mode: Get only visible fields from popup info
        const popupInfo = currentOriginDs.getPopupInfo();
        const fieldNames = Object.values((_a = currentOriginDs.getSchema().fields) !== null && _a !== void 0 ? _a : {}).map(f => f.name);
        const validFieldInfos = (_b = popupInfo === null || popupInfo === void 0 ? void 0 : popupInfo.fieldInfos) === null || _b === void 0 ? void 0 : _b.filter(fieldInfo => fieldInfo.visible !== false && fieldNames.includes(fieldInfo.fieldName));
        outputFields = (validFieldInfos === null || validFieldInfos === void 0 ? void 0 : validFieldInfos.map(fieldInfo => fieldInfo.fieldName)) || [];
        // Always ensure ID field is included
        const idField = outputDS.getIdField();
        if (idField && !outputFields.includes(idField)) {
            outputFields.push(idField);
        }
    }
    const mergedQueryParams = outputDS.mergeQueryParams((_c = currentOriginDs.getCurrentQueryParams()) !== null && _c !== void 0 ? _c : {}, {
        where: (useAttributeFilter && (sqlExpr === null || sqlExpr === void 0 ? void 0 : sqlExpr.sql)) ? jimu_core__WEBPACK_IMPORTED_MODULE_0__.dataSourceUtils.getArcGISSQL(sqlExpr, outputDS).sql : '1=1',
        sqlExpression: (useAttributeFilter && (sqlExpr === null || sqlExpr === void 0 ? void 0 : sqlExpr.sql)) ? sqlExpr : null,
        // FORCE minimal fields here to override any framework "*" or "all"
        outFields: outputFields
    });
    // PERFORMANCE OPTIMIZATION: Universal SQL Optimizer
    // We normalize the user's input to UPPERCASE to ensure case-insensitivity while 
    // unwrapping any LOWER() function around the field name. This allows the database 
    // to use its attribute indexes (SARGable query).
    if (mergedQueryParams.where && mergedQueryParams.where.includes('LOWER(')) {
        const optimizedWhere = mergedQueryParams.where.replace(/LOWER\(([^)]+)\)\s*(=|LIKE)\s*'([^']*)'/gi, (match, field, operator, value) => {
            // Normalize both sides to UPPERCASE. This works for ANY field name.
            // We keep the field name "naked" so the index is used.
            return `${field} ${operator} '${value.toUpperCase()}'`;
        });
        if (optimizedWhere !== mergedQueryParams.where) {
            debugLogger.log('TASK', {
                event: 'sql-optimized',
                original: mergedQueryParams.where,
                optimized: optimizedWhere
            });
            mergedQueryParams.where = optimizedWhere;
        }
    }
    // compose query params for query
    const queryParams = Object.assign({ 
        // url: ds.url,
        returnGeometry: true, 
        /**
         * PERFORMANCE OPTIMIZATION: Force lower precision for all display queries.
         */
        maxAllowableOffset: 0.1, page, 
        // Limit pageSize to a sane default if not provided or too large
        pageSize: (pageSize && pageSize < 1000) ? pageSize : 1000 }, mergedQueryParams);
    // Final override to ensure no "*" leaks through from any merge operation
    if (!queryParams.outFields || queryParams.outFields.includes('*')) {
        queryParams.outFields = outputFields;
    }
    // Diagnostic log: Show exactly WHICH fields are being sent
    debugLogger.log('TASK', {
        event: 'requesting-data',
        fieldsCount: (_d = queryParams.outFields) === null || _d === void 0 ? void 0 : _d.length,
        fields: (_e = queryParams.outFields) === null || _e === void 0 ? void 0 : _e.join(', '),
        pageSize: queryParams.pageSize,
        offset: queryParams.maxAllowableOffset
    });
    if (useSpatialFilter && (spatialFilter === null || spatialFilter === void 0 ? void 0 : spatialFilter.geometry)) {
        const { geometry, relation = _config__WEBPACK_IMPORTED_MODULE_1__.SpatialRelation.Intersect, buffer } = spatialFilter;
        const spatialQueryParams = {
            geometryType: jimu_core__WEBPACK_IMPORTED_MODULE_0__.dataSourceUtils.changeJSAPIGeometryTypeToRestAPIGeometryType(geometry.type),
            geometry: geometry.toJSON(),
            spatialRel: _config__WEBPACK_IMPORTED_MODULE_1__.mapJSAPISpatialRelToDsSpatialRel[relation],
            distance: buffer === null || buffer === void 0 ? void 0 : buffer.distance,
            units: (buffer === null || buffer === void 0 ? void 0 : buffer.unit) ? _config__WEBPACK_IMPORTED_MODULE_1__.mapJSAPIUnitToDsUnit[buffer.unit] : undefined
        };
        Object.assign(queryParams, spatialQueryParams);
    }
    if ((sortOptions === null || sortOptions === void 0 ? void 0 : sortOptions.length) > 0) {
        Object.assign(queryParams, {
            orderByFields: sortOptions.map(item => `${item.jimuFieldName} ${item.order}`)
        });
    }
    return queryParams;
}
function executeCountQuery(widgetId, outputDS, queryParams) {
    return __awaiter(this, void 0, void 0, function* () {
        const result = yield outputDS.loadCount(queryParams, { widgetId, refresh: true });
        return result != null ? result : 0;
    });
}
function executeQuery(widgetId, queryItem, outputDS, queryParams) {
    return __awaiter(this, void 0, void 0, function* () {
        const popupInfo = outputDS.getPopupInfo();
        const layerDefinition = outputDS.getLayerDefinition();
        const getDefaultFieldInfos = () => {
            var _a;
            return [
                { fieldName: (_a = layerDefinition === null || layerDefinition === void 0 ? void 0 : layerDefinition.objectIdField) !== null && _a !== void 0 ? _a : 'objectid', label: 'OBJECTID', tooltip: '', visible: true }
            ];
        };
        const fieldInfos = ((fieldInfos) => (fieldInfos.length ? fieldInfos : getDefaultFieldInfos()))(((popupInfo === null || popupInfo === void 0 ? void 0 : popupInfo.fieldInfos) || []).filter((i) => i.visible));
        // const fields = outputDS.getSchema()?.fields
        // let selectedFieldNames
        // if (queryItem.resultFieldsType === FieldsType.SelectAttributes) {
        //   selectedFieldNames = [].concat(queryItem.resultDisplayFields, queryItem.resultTitleFields)
        // } else {
        //   selectedFieldNames = fieldInfos.map((fieldInfo) => fieldInfo.fieldName)
        // }
        // const selectedFieldJimuNames = fields
        //   ? Object.keys(fields).filter((jimuName) => selectedFieldNames.includes(fields[jimuName].name))
        //   : []
        // outputDS.setSelectedFields(selectedFieldJimuNames)
        const startTime = performance.now();
        let records = yield outputDS.load(queryParams, { widgetId });
        const fetchTime = performance.now() - startTime;
        if (records == null) {
            records = [];
        }
        const originDs = outputDS.getOriginDataSources()[0];
        const layerStartTime = performance.now();
        const layerObject = yield getLayerObject(originDs);
        const layerTime = performance.now() - layerStartTime;
        debugLogger.log('TASK', {
            event: 'query-complete',
            fetchTime: Math.round(fetchTime),
            layerTime: Math.round(layerTime),
            totalTime: Math.round(performance.now() - startTime),
            recordCount: records.length
        });
        records.forEach((record) => {
            const feature = record.feature;
            if (layerObject) {
                feature.sourceLayer = layerObject.associatedLayer || layerObject;
            }
            feature.layer = feature.sourceLayer;
        });
        const queryResult = {
            records,
            fields: fieldInfos.map((fieldInfo) => fieldInfo.fieldName)
        };
        // publish message
        const dataRecordSetChangeMessage = new jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataRecordSetChangeMessage(widgetId, jimu_core__WEBPACK_IMPORTED_MODULE_0__.RecordSetChangeType.CreateUpdate, [{
                records: outputDS.getAllLoadedRecords(),
                fields: queryResult.fields,
                dataSource: outputDS,
                name: outputDS.id,
                label: outputDS.getLabel()
            }]);
        jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageManager.getInstance().publishMessage(dataRecordSetChangeMessage);
        return queryResult;
    });
}
function getLayerObject(dataSource) {
    return __awaiter(this, void 0, void 0, function* () {
        const layerObject = yield dataSource.createJSAPILayerByDataSource();
        // layerObject may be undefined if the data source is added by URL
        if (layerObject) {
            yield layerObject.load();
        }
        return layerObject;
    });
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/results-management-utils.ts":
/*!**************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/results-management-utils.ts ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   clearAccumulatedResults: () => (/* binding */ clearAccumulatedResults),
/* harmony export */   createAccumulatedResultsDataSource: () => (/* binding */ createAccumulatedResultsDataSource),
/* harmony export */   getRecordKey: () => (/* binding */ getRecordKey),
/* harmony export */   mergeResultsIntoAccumulated: () => (/* binding */ mergeResultsIntoAccumulated),
/* harmony export */   removeRecordsFromOriginSelections: () => (/* binding */ removeRecordsFromOriginSelections),
/* harmony export */   removeResultsFromAccumulated: () => (/* binding */ removeResultsFromAccumulated)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/* harmony import */ var _graphics_layer_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./graphics-layer-utils */ "./your-extensions/widgets/query-simple/src/runtime/graphics-layer-utils.ts");
/**
 * Utility functions for managing results accumulation in QuerySimple widget.
 * Handles "Add to" and "Remove from" modes for accumulating query results.
 */
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__.createQuerySimpleDebugLogger)();
/**
 * Generates a composite key for a record that includes both origin data source ID and objectId.
 * This ensures uniqueness across different layers that may have the same objectId.
 *
 * @param record - The feature data record
 * @param outputDS - The output data source containing the record
 * @returns Composite key string: `${originDSId}_${objectId}`
 */
function getRecordKey(record, outputDS) {
    var _a;
    const originDS = (_a = outputDS.getOriginDataSources()) === null || _a === void 0 ? void 0 : _a[0];
    const originDSId = (originDS === null || originDS === void 0 ? void 0 : originDS.id) || outputDS.id; // Fallback to outputDS if no origin
    const objectId = record.getId();
    const key = `${originDSId}_${objectId}`;
    debugLogger.log('RESULTS-MODE', {
        event: 'record-key-generated',
        originDSId,
        objectId,
        key,
        hasOriginDS: !!originDS
    });
    return key;
}
/**
 * Creates an accumulated results data source for storing merged query results.
 * This data source is widget-level and persists across multiple queries.
 *
 * @param widgetId - The widget ID
 * @param originDS - The origin data source to use as the base
 * @returns The created accumulated results data source
 */
function createAccumulatedResultsDataSource(widgetId, originDS) {
    return __awaiter(this, void 0, void 0, function* () {
        const accumulatedDSId = `${widgetId}_accumulated_results`;
        debugLogger.log('RESULTS-MODE', {
            event: 'creating-accumulated-ds',
            widgetId,
            accumulatedDSId,
            originDSId: originDS.id
        });
        // Check if data source already exists
        const dsManager = jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceManager.getInstance();
        let accumulatedDS = dsManager.getDataSource(accumulatedDSId);
        if (accumulatedDS) {
            debugLogger.log('RESULTS-MODE', {
                event: 'accumulated-ds-already-exists',
                accumulatedDSId
            });
            return accumulatedDS;
        }
        // Get origin data source JSON to create output data source
        const originDataSourceJson = originDS.getDataSourceJson();
        // Create output data source JSON similar to how query items create output DS
        const outputDataSourceJson = {
            id: accumulatedDSId,
            label: 'Accumulated Results',
            type: originDataSourceJson === null || originDataSourceJson === void 0 ? void 0 : originDataSourceJson.type,
            geometryType: originDataSourceJson === null || originDataSourceJson === void 0 ? void 0 : originDataSourceJson.geometryType,
            url: originDataSourceJson === null || originDataSourceJson === void 0 ? void 0 : originDataSourceJson.url,
            itemId: originDataSourceJson === null || originDataSourceJson === void 0 ? void 0 : originDataSourceJson.itemId,
            portalUrl: originDataSourceJson === null || originDataSourceJson === void 0 ? void 0 : originDataSourceJson.portalUrl,
            originDataSources: [{
                    dataSourceId: originDS.id,
                    mainDataSourceId: originDS.id,
                    rootDataSourceId: originDS.id
                }],
            layerId: originDataSourceJson === null || originDataSourceJson === void 0 ? void 0 : originDataSourceJson.layerId,
            isDataInDataSourceInstance: originDataSourceJson === null || originDataSourceJson === void 0 ? void 0 : originDataSourceJson.isDataInDataSourceInstance,
            isOutputFromWidget: true
        };
        // Create the data source using DataSourceManager
        // Note: This follows the pattern from setting.tsx for creating output data sources
        accumulatedDS = dsManager.createDataSourceByDataSourceJson(outputDataSourceJson);
        // Set initial status
        accumulatedDS.setStatus(jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceStatus.NotReady);
        accumulatedDS.setCountStatus(jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceStatus.NotReady);
        debugLogger.log('RESULTS-MODE', {
            event: 'accumulated-ds-created',
            accumulatedDSId,
            originDSId: originDS.id,
            status: accumulatedDS.getStatus()
        });
        return accumulatedDS;
    });
}
/**
 * Merges new query results with existing records.
 * Deduplicates records using composite keys (originDSId_objectId).
 *
 * This function merges new records with existing records that were captured
 * before the query executed. The caller is responsible for storing the merged
 * records (typically in recordsRef or state).
 *
 * @param outputDS - The output data source (used for key generation)
 * @param newRecords - New records to merge in
 * @param existingRecords - Existing records captured before query execution (optional, defaults to empty array)
 * @returns Array of all merged records (existing + new unique records)
 */
function mergeResultsIntoAccumulated(outputDS, newRecords, existingRecords = []) {
    debugLogger.log('RESULTS-MODE', {
        event: 'merging-results-start',
        outputDSId: outputDS.id,
        existingRecordsCount: existingRecords.length,
        newRecordsCount: newRecords.length
    });
    // Build Set of existing record keys for fast lookup
    const existingKeys = new Set(existingRecords.map(record => getRecordKey(record, outputDS)));
    debugLogger.log('RESULTS-MODE', {
        event: 'existing-records-check',
        existingRecordsCount: existingRecords.length,
        existingKeysCount: existingKeys.size
    });
    // Filter new records to only include those not already in output DS
    const uniqueNewRecords = newRecords.filter(record => {
        const key = getRecordKey(record, outputDS);
        const isDuplicate = existingKeys.has(key);
        if (isDuplicate) {
            debugLogger.log('RESULTS-MODE', {
                event: 'duplicate-record-skipped',
                key,
                objectId: record.getId()
            });
        }
        return !isDuplicate;
    });
    debugLogger.log('RESULTS-MODE', {
        event: 'deduplication-complete',
        newRecordsCount: newRecords.length,
        uniqueNewRecordsCount: uniqueNewRecords.length,
        duplicatesSkipped: newRecords.length - uniqueNewRecords.length
    });
    // Merge records
    const mergedRecords = [...existingRecords, ...uniqueNewRecords];
    debugLogger.log('RESULTS-MODE', {
        event: 'merge-complete',
        totalRecordsAfterMerge: mergedRecords.length,
        existingCount: existingRecords.length,
        newUniqueCount: uniqueNewRecords.length
    });
    return mergedRecords;
}
/**
 * Removes matching records from widget-level accumulated records.
 * Matches records using composite keys (originDSId_objectId).
 *
 * This function removes records from existing accumulated records that were captured
 * before the query executed. The caller is responsible for storing the remaining
 * records (typically in recordsRef or state).
 *
 * @param outputDS - The output data source (used for key generation)
 * @param recordsToRemove - Records to remove (from query results)
 * @param existingAccumulatedRecords - Existing accumulated records captured before query execution (optional, defaults to empty array)
 * @returns Array of remaining records after removal
 */
function removeResultsFromAccumulated(outputDS, recordsToRemove, existingAccumulatedRecords = []) {
    debugLogger.log('RESULTS-MODE', {
        event: 'removing-results-start',
        outputDSId: outputDS.id,
        recordsToRemoveCount: recordsToRemove.length,
        existingAccumulatedRecordsCount: existingAccumulatedRecords.length
    });
    // If no accumulated records, nothing to remove
    if (existingAccumulatedRecords.length === 0) {
        debugLogger.log('RESULTS-MODE', {
            event: 'no-accumulated-records-to-remove',
            outputDSId: outputDS.id
        });
        return [];
    }
    // If no records to remove, return existing records unchanged
    if (recordsToRemove.length === 0) {
        debugLogger.log('RESULTS-MODE', {
            event: 'no-records-to-remove',
            outputDSId: outputDS.id,
            existingAccumulatedRecordsCount: existingAccumulatedRecords.length
        });
        return existingAccumulatedRecords;
    }
    // Build Set of keys to remove for fast lookup
    const removeKeys = new Set(recordsToRemove.map(record => getRecordKey(record, outputDS)));
    debugLogger.log('RESULTS-MODE', {
        event: 'remove-keys-built',
        existingAccumulatedRecordsCount: existingAccumulatedRecords.length,
        removeKeysCount: removeKeys.size
    });
    // Filter out records that match keys to remove
    const remainingRecords = [];
    const removedRecords = [];
    existingAccumulatedRecords.forEach(record => {
        var _a, _b, _c, _d;
        const key = getRecordKey(record, outputDS);
        const shouldRemove = removeKeys.has(key);
        if (shouldRemove) {
            removedRecords.push(record);
            debugLogger.log('RESULTS-MODE', {
                event: 'record-marked-for-removal',
                key,
                objectId: record.getId(),
                originDSId: ((_d = (_c = (_b = (_a = record.getDataSource) === null || _a === void 0 ? void 0 : _a.call(record)) === null || _b === void 0 ? void 0 : _b.getOriginDataSources()) === null || _c === void 0 ? void 0 : _c[0]) === null || _d === void 0 ? void 0 : _d.id) || 'unknown'
            });
        }
        else {
            remainingRecords.push(record);
        }
    });
    debugLogger.log('RESULTS-MODE', {
        event: 'removal-complete',
        recordsRemoved: removedRecords.length,
        remainingRecordsCount: remainingRecords.length,
        recordsToRemoveCount: recordsToRemove.length,
        matchedRecordsCount: removedRecords.length,
        unmatchedRecordsCount: recordsToRemove.length - removedRecords.length
    });
    return remainingRecords;
}
/**
 * Removes records from origin data source selections.
 * Groups records by their origin data source and updates each origin DS's selection separately.
 * This ensures map selection is updated correctly when records come from multiple origin layers.
 * Also removes graphics from graphics layer if using graphics layer highlighting.
 *
 * @param widgetId - The widget ID for publishing messages
 * @param recordsToRemove - Records to remove from selection
 * @param outputDS - The output data source (used for key generation)
 * @param useGraphicsLayer - Whether to remove graphics from graphics layer (default: false)
 * @param graphicsLayer - Graphics layer instance (required if useGraphicsLayer is true)
 */
function removeRecordsFromOriginSelections(widgetId, recordsToRemove, outputDS, useGraphicsLayer, graphicsLayer) {
    debugLogger.log('RESULTS-MODE', {
        event: 'removing-records-from-origin-selections-start',
        widgetId,
        recordsToRemoveCount: recordsToRemove.length,
        outputDSId: outputDS.id,
        useGraphicsLayer: !!useGraphicsLayer,
        hasGraphicsLayer: !!graphicsLayer
    });
    if (recordsToRemove.length === 0) {
        debugLogger.log('RESULTS-MODE', {
            event: 'no-records-to-remove-from-selection',
            widgetId
        });
        return;
    }
    // Remove from graphics layer if using graphics layer highlighting
    if (useGraphicsLayer && graphicsLayer) {
        const recordIdsToRemove = recordsToRemove.map(record => record.getId());
        debugLogger.log('RESULTS-MODE', {
            event: 'removing-graphics-from-layer',
            widgetId,
            recordIdsCount: recordIdsToRemove.length,
            graphicsLayerId: graphicsLayer.id
        });
        (0,_graphics_layer_utils__WEBPACK_IMPORTED_MODULE_2__.removeHighlightGraphics)(graphicsLayer, recordIdsToRemove);
    }
    // Group records by their origin data source
    const recordsByOriginDS = new Map();
    recordsToRemove.forEach(record => {
        var _a, _b, _c;
        const recordDS = (_a = record.getDataSource) === null || _a === void 0 ? void 0 : _a.call(record);
        let originDS = null;
        if (recordDS) {
            originDS = ((_b = recordDS.getOriginDataSources()) === null || _b === void 0 ? void 0 : _b[0]) || recordDS;
        }
        else {
            // Fallback: try to get origin from outputDS
            originDS = ((_c = outputDS.getOriginDataSources()) === null || _c === void 0 ? void 0 : _c[0]) || null;
        }
        if (originDS) {
            if (!recordsByOriginDS.has(originDS)) {
                recordsByOriginDS.set(originDS, []);
            }
            recordsByOriginDS.get(originDS).push(record);
        }
    });
    debugLogger.log('RESULTS-MODE', {
        event: 'records-grouped-by-origin',
        widgetId,
        originDSCount: recordsByOriginDS.size,
        recordsByOriginDS: Array.from(recordsByOriginDS.entries()).map(([ds, records]) => ({
            originDSId: ds.id,
            recordCount: records.length
        }))
    });
    // For each origin DS, get current selection and remove matching records
    recordsByOriginDS.forEach((recordsToRemoveForOrigin, originDS) => {
        try {
            // Get current selected records from this origin DS
            const currentSelectedRecords = originDS.getSelectedRecords() || [];
            const currentSelectedIds = originDS.getSelectedRecordIds() || [];
            debugLogger.log('RESULTS-MODE', {
                event: 'processing-origin-ds-removal',
                widgetId,
                originDSId: originDS.id,
                currentSelectedCount: currentSelectedRecords.length,
                recordsToRemoveCount: recordsToRemoveForOrigin.length
            });
            // Build Set of IDs to remove for fast lookup
            const idsToRemove = new Set(recordsToRemoveForOrigin.map(record => record.getId()));
            // Filter out records that match IDs to remove
            const remainingRecords = currentSelectedRecords.filter(record => {
                const recordId = record.getId();
                return !idsToRemove.has(recordId);
            });
            const remainingIds = remainingRecords.map(record => record.getId());
            debugLogger.log('RESULTS-MODE', {
                event: 'origin-ds-removal-filtered',
                widgetId,
                originDSId: originDS.id,
                removedCount: currentSelectedRecords.length - remainingRecords.length,
                remainingCount: remainingRecords.length
            });
            // Update selection in origin DS
            if (typeof originDS.selectRecordsByIds === 'function') {
                originDS.selectRecordsByIds(remainingIds, remainingRecords);
            }
            // Publish selection change message for this origin DS
            jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageManager.getInstance().publishMessage(new jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataRecordsSelectionChangeMessage(widgetId, remainingRecords, [originDS.id]));
            debugLogger.log('RESULTS-MODE', {
                event: 'origin-ds-selection-updated',
                widgetId,
                originDSId: originDS.id,
                remainingRecordsCount: remainingRecords.length,
                messagePublished: true
            });
        }
        catch (error) {
            debugLogger.log('RESULTS-MODE', {
                event: 'origin-ds-removal-error',
                widgetId,
                originDSId: originDS.id,
                error: error instanceof Error ? error.message : 'Unknown error',
                errorStack: error instanceof Error ? error.stack : undefined
            });
        }
    });
    debugLogger.log('RESULTS-MODE', {
        event: 'removing-records-from-origin-selections-complete',
        widgetId,
        originDSCount: recordsByOriginDS.size,
        totalRecordsRemoved: recordsToRemove.length
    });
}
/**
 * Clears all records from the accumulated results data source.
 *
 * @param accumulatedDS - The accumulated results data source to clear
 */
function clearAccumulatedResults(accumulatedDS) {
    debugLogger.log('RESULTS-MODE', {
        event: 'clearing-accumulated-results',
        accumulatedDSId: accumulatedDS.id
    });
    // Set status to NotReady to clear records
    accumulatedDS.setStatus(jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceStatus.NotReady);
    accumulatedDS.setCountStatus(jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceStatus.NotReady);
    // Clear any loaded records if possible
    // Note: May need to use DataSourceManager methods depending on ExB API
    debugLogger.log('RESULTS-MODE', {
        event: 'accumulated-results-cleared',
        accumulatedDSId: accumulatedDS.id
    });
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts":
/*!*****************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QUERYSIMPLE_SELECTION_EVENT: () => (/* binding */ QUERYSIMPLE_SELECTION_EVENT),
/* harmony export */   clearSelectionInDataSources: () => (/* binding */ clearSelectionInDataSources),
/* harmony export */   dispatchSelectionEvent: () => (/* binding */ dispatchSelectionEvent),
/* harmony export */   findClearResultsButton: () => (/* binding */ findClearResultsButton),
/* harmony export */   getOriginDataSource: () => (/* binding */ getOriginDataSource),
/* harmony export */   publishSelectionMessage: () => (/* binding */ publishSelectionMessage),
/* harmony export */   selectRecordsAndPublish: () => (/* binding */ selectRecordsAndPublish),
/* harmony export */   selectRecordsInDataSources: () => (/* binding */ selectRecordsInDataSources)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _graphics_layer_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./graphics-layer-utils */ "./your-extensions/widgets/query-simple/src/runtime/graphics-layer-utils.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/**
 * Utility functions for managing feature selection in QuerySimple widget.
 * Consolidates repeated selection logic to follow DRY principles.
 */
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_2__.createQuerySimpleDebugLogger)();
/**
 * Custom event name for QuerySimple to notify Widget of selection changes.
 */
const QUERYSIMPLE_SELECTION_EVENT = 'querysimple-selection-changed';
/**
 * Dispatches a custom selection event to the window so the main Widget can track state.
 *
 * @param widgetId - The widget ID
 * @param recordIds - Array of selected record IDs
 * @param outputDS - The output data source
 * @param queryItemConfigId - The config ID of the query that produced these results
 */
function dispatchSelectionEvent(widgetId, recordIds, outputDS, queryItemConfigId) {
    const originDS = getOriginDataSource(outputDS);
    const dataSourceId = originDS === null || originDS === void 0 ? void 0 : originDS.id;
    debugLogger.log('TASK', {
        event: 'dispatchSelectionEvent',
        widgetId,
        recordCount: recordIds.length,
        outputDsId: outputDS.id,
        queryItemConfigId
    });
    const selectionEvent = new CustomEvent(QUERYSIMPLE_SELECTION_EVENT, {
        detail: {
            widgetId,
            recordIds,
            dataSourceId,
            outputDsId: outputDS.id,
            queryItemConfigId
        },
        bubbles: true,
        cancelable: true
    });
    window.dispatchEvent(selectionEvent);
}
/**
 * Gets the origin data source from an output data source.
 * @param outputDS - The output data source
 * @returns The origin data source, or null if not available
 */
function getOriginDataSource(outputDS) {
    if (!outputDS)
        return null;
    // Try to get origin data sources
    const originDataSources = typeof outputDS.getOriginDataSources === 'function'
        ? outputDS.getOriginDataSources()
        : [];
    if (originDataSources && originDataSources.length > 0) {
        return originDataSources[0];
    }
    // If it doesn't have origin data sources, it might already be an origin data source
    // FeatureLayerDataSource should have a 'layer' property or 'getLayer' method
    if (outputDS.layer || outputDS.getLayer || outputDS.type === 'FeatureLayer') {
        return outputDS;
    }
    return null;
}
/**
 * Selects records in both the origin data source and output data source.
 * This is the standard pattern used throughout the widget for selection.
 * Optionally uses graphics layer for highlighting (independent of layer visibility).
 *
 * @param outputDS - The output data source
 * @param recordIds - Array of record IDs to select
 * @param records - Optional array of FeatureDataRecord objects for proper highlighting
 * @param useGraphicsLayer - Whether to use graphics layer for highlighting (default: false)
 * @param graphicsLayer - Graphics layer instance (required if useGraphicsLayer is true)
 * @param mapView - Map view instance (required if useGraphicsLayer is true)
 */
function selectRecordsInDataSources(outputDS_1, recordIds_1, records_1) {
    return __awaiter(this, arguments, void 0, function* (outputDS, recordIds, records, useGraphicsLayer = false, graphicsLayer, mapView) {
        var _a, _b, _c, _d, _e, _f;
        if (!outputDS)
            return;
        const originDS = getOriginDataSource(outputDS);
        // If using graphics layer, add graphics for highlighting
        if (useGraphicsLayer && graphicsLayer && mapView && records && records.length > 0) {
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'selectRecordsInDataSources-using-graphics-layer',
                recordIdsCount: recordIds.length,
                recordsCount: records.length,
                graphicsLayerId: graphicsLayer.id,
                timestamp: Date.now()
            });
            yield (0,_graphics_layer_utils__WEBPACK_IMPORTED_MODULE_1__.addHighlightGraphics)(graphicsLayer, records, mapView);
            // Still select in data source for state management (but layer selection won't show if layer is off)
            if (originDS && typeof originDS.selectRecordsByIds === 'function') {
                originDS.selectRecordsByIds(recordIds, records);
            }
        }
        else {
            // Original behavior: use layer selection
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'selectRecordsInDataSources-using-layer-selection',
                recordIdsCount: recordIds.length,
                useGraphicsLayer,
                hasGraphicsLayer: !!graphicsLayer,
                hasMapView: !!mapView,
                timestamp: Date.now()
            });
            // Select in origin data source (the actual layer)
            if (originDS && typeof originDS.selectRecordsByIds === 'function') {
                // Log layer state right before selection to see what's available when selection works
                const layer = originDS.layer || ((_b = (_a = originDS).getLayer) === null || _b === void 0 ? void 0 : _b.call(_a));
                if (layer) {
                    debugLogger.log('GRAPHICS-LAYER', {
                        event: 'selectRecordsByIds-layer-state',
                        originDSId: originDS.id,
                        layerId: layer.id,
                        hasLayerMap: !!layer.map,
                        hasLayerView: !!layer.view,
                        hasLayerParent: !!layer.parent,
                        parentType: ((_c = layer.parent) === null || _c === void 0 ? void 0 : _c.type) || 'none',
                        parentHasMap: !!((_d = layer.parent) === null || _d === void 0 ? void 0 : _d.map),
                        parentHasView: !!((_e = layer.parent) === null || _e === void 0 ? void 0 : _e.view),
                        parentHasViews: !!((_f = layer.parent) === null || _f === void 0 ? void 0 : _f.views),
                        timestamp: Date.now()
                    });
                }
                originDS.selectRecordsByIds(recordIds, records);
            }
        }
        // Always update outputDS for widget's internal state
        if (typeof outputDS.selectRecordsByIds === 'function') {
            outputDS.selectRecordsByIds(recordIds, records);
        }
    });
}
/**
 * Clears selection in both the origin data source and output data source.
 * Optionally clears graphics layer if using graphics layer mode.
 *
 * @param widgetId - The widget ID (needed to publish message)
 * @param outputDS - The output data source
 * @param useGraphicsLayer - Whether to clear graphics layer (default: false)
 * @param graphicsLayer - Graphics layer instance (required if useGraphicsLayer is true)
 */
function clearSelectionInDataSources(widgetId_1, outputDS_1) {
    return __awaiter(this, arguments, void 0, function* (widgetId, outputDS, useGraphicsLayer = false, graphicsLayer) {
        // Clear graphics layer if using graphics layer mode
        if (useGraphicsLayer && graphicsLayer) {
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'clearSelectionInDataSources-clearing-graphics-layer',
                graphicsLayerId: graphicsLayer.id,
                timestamp: Date.now()
            });
            (0,_graphics_layer_utils__WEBPACK_IMPORTED_MODULE_1__.clearGraphicsLayer)(graphicsLayer);
        }
        // Clear data source selection for state management
        yield selectRecordsInDataSources(outputDS, [], undefined, false);
        // Publish the empty selection message so the Map selection (blue boxes) clears
        if (outputDS) {
            publishSelectionMessage(widgetId, [], outputDS, true);
        }
    });
}
/**
 * Publishes a selection change message for the given records and data sources.
 *
 * @param widgetId - The widget ID
 * @param records - Array of FeatureDataRecord objects (empty array to clear)
 * @param outputDS - The output data source
 * @param alsoPublishToOutputDS - Whether to also publish a message for outputDS (default: false)
 */
function publishSelectionMessage(widgetId, records, outputDS, alsoPublishToOutputDS = false) {
    if (!outputDS)
        return;
    const originDS = getOriginDataSource(outputDS);
    if (originDS) {
        jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageManager.getInstance().publishMessage(new jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataRecordsSelectionChangeMessage(widgetId, records, [originDS.id]));
    }
    else if (alsoPublishToOutputDS) {
        jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageManager.getInstance().publishMessage(new jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataRecordsSelectionChangeMessage(widgetId, records, [outputDS.id]));
    }
    // Optionally publish to outputDS as well (for some edge cases)
    if (alsoPublishToOutputDS && originDS) {
        jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageManager.getInstance().publishMessage(new jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataRecordsSelectionChangeMessage(widgetId, records, [outputDS.id]));
    }
}
/**
 * Selects records and publishes the selection message in one call.
 * This is the most common pattern - selecting records and notifying the map.
 * Optionally uses graphics layer for highlighting (independent of layer visibility).
 *
 * @param widgetId - The widget ID
 * @param outputDS - The output data source
 * @param recordIds - Array of record IDs to select
 * @param records - Array of FeatureDataRecord objects for proper highlighting
 * @param alsoPublishToOutputDS - Whether to also publish a message for outputDS (default: false)
 * @param useGraphicsLayer - Whether to use graphics layer for highlighting (default: false)
 * @param graphicsLayer - Graphics layer instance (required if useGraphicsLayer is true)
 * @param mapView - Map view instance (required if useGraphicsLayer is true)
 */
function selectRecordsAndPublish(widgetId_1, outputDS_1, recordIds_1, records_1) {
    return __awaiter(this, arguments, void 0, function* (widgetId, outputDS, recordIds, records, alsoPublishToOutputDS = false, useGraphicsLayer = false, graphicsLayer, mapView) {
        yield selectRecordsInDataSources(outputDS, recordIds, records, useGraphicsLayer, graphicsLayer, mapView);
        publishSelectionMessage(widgetId, records, outputDS, alsoPublishToOutputDS);
    });
}
/**
 * Finds the "Clear results" button in the DOM.
 * Used when programmatically triggering the clear action.
 *
 * @returns The clear button element, or null if not found
 */
function findClearResultsButton() {
    // Hardened: Prioritize the one in the results header, fallback to any
    return (document.querySelector('.query-result__header button[aria-label="Clear results"]') ||
        document.querySelector('button[aria-label="Clear results"]'));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/simple-list.tsx":
/*!**************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/simple-list.tsx ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SimpleList: () => (/* binding */ SimpleList)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _query_result_item__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./query-result-item */ "./your-extensions/widgets/query-simple/src/runtime/query-result-item.tsx");
/* harmony import */ var _query_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./query-utils */ "./your-extensions/widgets/query-simple/src/runtime/query-utils.ts");
/* harmony import */ var _useAutoHeight__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./useAutoHeight */ "./your-extensions/widgets/query-simple/src/runtime/useAutoHeight.tsx");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");

/** @jsx jsx */






const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_6__.createQuerySimpleDebugLogger)();
const getStyle = (isAutoHeight) => {
    return (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
    display: flex;
    flex: 1 1 ${isAutoHeight ? 'auto' : 0};
    overflow: auto;
    max-height: ${isAutoHeight ? 'calc(61.8vh - 100px)' : 'none'};

    .query-result-item + .query-result-item {
      margin-left: 0.5rem;
      margin-top: 0;
    }

    &.vertical {
      flex-direction: column;
      .list-items {
        position: relative;
        flex-direction: column;
      }

      .feature-info-component {
        width: 100%;
      }

      .query-result-item + .query-result-item {
        margin-left: 0;
        margin-top: 0.5rem;
      }
    }
    .list-items {
      display: flex;
    }
  `;
};
function SimpleList(props) {
    const { widgetId, outputDS, queryItem, records, direction, onEscape, onSelectChange, onRemove, expandByDefault, itemExpandStates, removedRecordIds, onRenderDone } = props;
    const [popupTemplate, setPopupTemplate] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState();
    const [defaultPopupTemplate, setDefaultPopupTemplate] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState();
    const isAutoHeight = (0,_useAutoHeight__WEBPACK_IMPORTED_MODULE_5__.useAutoHeight)();
    const resultContainerRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    // Filter out removed records
    const filteredRecords = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return (records === null || records === void 0 ? void 0 : records.filter(record => !(removedRecordIds === null || removedRecordIds === void 0 ? void 0 : removedRecordIds.has(record.getId())))) || [];
    }, [records, removedRecordIds]);
    // Notify parent when records are rendered (for auto-switch logic)
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (onRenderDone && filteredRecords.length > 0) {
            debugLogger.log('RESULTS-MODE', {
                event: 'SimpleList-onRenderDone-called',
                widgetId,
                queryItemConfigId: queryItem.configId,
                filteredRecordsCount: filteredRecords.length,
                totalRecordsCount: records.length,
                removedRecordIdsCount: (removedRecordIds === null || removedRecordIds === void 0 ? void 0 : removedRecordIds.size) || 0,
                timestamp: Date.now()
            });
            onRenderDone({ dataItems: filteredRecords });
        }
    }, [filteredRecords, onRenderDone, widgetId, queryItem.configId, records.length, removedRecordIds]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        (0,_query_utils__WEBPACK_IMPORTED_MODULE_4__.getPopupTemplate)(outputDS, queryItem).then(rs => {
            setPopupTemplate(rs.popupTemplate);
            setDefaultPopupTemplate(rs.defaultPopupTemplate);
        });
    }, [outputDS, queryItem]);
    const handleKeyUp = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((evt) => {
        if (evt.key === 'Escape') {
            evt.stopPropagation();
            onEscape();
        }
    }, [onEscape]);
    const handleKeyDown = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((evt) => {
        if (evt.key === ' ') {
            evt.preventDefault();
        }
    }, []);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { onKeyUp: handleKeyUp, onKeyDown: handleKeyDown, className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)({ vertical: direction === _config__WEBPACK_IMPORTED_MODULE_2__.ListDirection.Vertical }), css: getStyle(isAutoHeight), ref: resultContainerRef, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'list-items px-4 py-1', role: 'listbox', children: filteredRecords.map((dataItem) => {
                const recordId = dataItem.getId();
                // Use individual state from map if available, otherwise fall back to expandByDefault
                const individualExpandState = itemExpandStates === null || itemExpandStates === void 0 ? void 0 : itemExpandStates.get(recordId);
                const expandByDefaultValue = individualExpandState !== undefined ? individualExpandState : (expandByDefault !== null && expandByDefault !== void 0 ? expandByDefault : true);
                return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_result_item__WEBPACK_IMPORTED_MODULE_3__.QueryResultItem, { data: dataItem, dataSource: outputDS, widgetId: widgetId, popupTemplate: popupTemplate, defaultPopupTemplate: defaultPopupTemplate, expandByDefault: expandByDefaultValue, onClick: onSelectChange, onRemove: onRemove }, recordId));
            }) }) }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts":
/*!**********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/translations/default.ts ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
    _widgetLabel: 'QuerySimple',
    reset: 'Reset',
    searchLayer: 'Search Layer',
    apply: 'Search',
    noDataAvailable: 'Error in loading data',
    noQueryItem: 'No query',
    newQueryHint: 'Add content by clicking the "{label}" button on the configuration panel',
    attributeFilter: 'Attribute filter',
    spatialFilter: 'Spatial filter',
    spatialFilterType_CurrentMapExtent: 'Current map extent',
    spatialFilterType_InteractiveDrawMode: 'Drawn graphic',
    results: 'Results',
    featuresDisplayed: 'Features displayed',
    clearResult: 'Clear results',
    checkResult: 'Check results',
    mapMustBeVisible: 'Map must be visible',
    chooseFilterType: 'Choose the filter type',
    chooseGeometryType: 'Choose the geometry type',
    clearDrawing: 'Clear the graphic when applying',
    featureFromDs: 'Selecting features from data source',
    featureFromMap: 'Geometries from a map',
    chooseFilterLayer: 'Choose a filter layer',
    selectedRecords: '{num} records are selected for the filter',
    spatialNotAvailable: 'Spatial filter is not available here.',
    spatialNotAvailableDesc: 'Spatial filter is not supported for a data source that already contains a spatial query.',
    preconfigured: 'Preconfigured',
    runtime: 'Runtime',
    selectLoaded: 'Select loaded',
    retrieving: 'Retrieving query results...',
    zoomToSelected: 'Zoom to selected',
    queryTab: 'Query',
    resultsTab: 'Results',
    expandAll: 'Expand all',
    collapseAll: 'Collapse all',
    addToMap: 'Add to map',
    resultsMode: 'Results mode',
    createNewResults: 'Create new results',
    addToCurrentResults: 'Add to current results',
    removeFromCurrentResults: 'Remove from current results',
    resultsModeDisabledRemove: 'Remove from current results (no accumulated results)',
    resultsModeDesc: 'Controls how query results are combined:\n New: Each query replaces previous results\n Add: New results are added to existing results\n Remove: Matching results are removed from existing results',
    resultsModeNew: 'New',
    resultsModeAdd: 'Add',
    resultsModeRemove: 'Remove'
});


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/useAutoHeight.tsx":
/*!****************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/useAutoHeight.tsx ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   useAutoHeight: () => (/* binding */ useAutoHeight)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var _widget_context__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./widget-context */ "./your-extensions/widgets/query-simple/src/runtime/widget-context.tsx");
/** @jsx jsx */



function useAutoHeight() {
    const layoutInfo = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useContext(_widget_context__WEBPACK_IMPORTED_MODULE_2__.QueryWidgetContext);
    let layoutId;
    let layoutItemId;
    if (layoutInfo.includes(':')) {
        const r = layoutInfo.split(':');
        layoutId = r[0];
        layoutItemId = r[1];
    }
    const isAuto = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        var _a, _b, _c, _d;
        const layoutItem = (_b = (_a = state.appConfig.layouts[layoutId]) === null || _a === void 0 ? void 0 : _a.content) === null || _b === void 0 ? void 0 : _b[layoutItemId];
        return ((_d = (_c = layoutItem === null || layoutItem === void 0 ? void 0 : layoutItem.setting) === null || _c === void 0 ? void 0 : _c.autoProps) === null || _d === void 0 ? void 0 : _d.height) === jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.LayoutItemSizeModes.Auto;
    });
    return isAuto;
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/widget-config.ts":
/*!***************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/widget-config.ts ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getWidgetRuntimeDataMap: () => (/* binding */ getWidgetRuntimeDataMap)
/* harmony export */ });
/* harmony import */ var jimu_icons_svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-icons/svg/outlined/suggested/warning.svg */ "./jimu-icons/svg/outlined/suggested/warning.svg");
/* harmony import */ var jimu_icons_svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-icons/svg/outlined/suggested/error.svg */ "./jimu-icons/svg/outlined/suggested/error.svg");
/* harmony import */ var jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var jimu_icons_svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-icons/svg/outlined/directional/arrow-left.svg */ "./jimu-icons/svg/outlined/directional/arrow-left.svg");
/* harmony import */ var jimu_icons_svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var jimu_icons_svg_outlined_directional_right_svg__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-icons/svg/outlined/directional/right.svg */ "./jimu-icons/svg/outlined/directional/right.svg");
/* harmony import */ var jimu_icons_svg_outlined_directional_right_svg__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_directional_right_svg__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var jimu_icons_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-icons/svg/outlined/editor/trash.svg */ "./jimu-icons/svg/outlined/editor/trash.svg");
/* harmony import */ var jimu_icons_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var jimu_icons_svg_outlined_application_more_horizontal_svg__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jimu-icons/svg/outlined/application/more-horizontal.svg */ "./jimu-icons/svg/outlined/application/more-horizontal.svg");
/* harmony import */ var jimu_icons_svg_outlined_application_more_horizontal_svg__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_application_more_horizontal_svg__WEBPACK_IMPORTED_MODULE_5__);






const getWidgetRuntimeDataMap = () => ({
    iconMap: {
        iconQuery: __webpack_require__(/*! ../../icon.svg */ "./your-extensions/widgets/query-simple/icon.svg"),
        iconWarning: (jimu_icons_svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_0___default()),
        iconError: (jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_1___default()),
        arrowNavBack: (jimu_icons_svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2___default()),
        arrowRight: (jimu_icons_svg_outlined_directional_right_svg__WEBPACK_IMPORTED_MODULE_3___default()),
        toolDelete: (jimu_icons_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_4___default()),
        iconMore: (jimu_icons_svg_outlined_application_more_horizontal_svg__WEBPACK_IMPORTED_MODULE_5___default())
    }
});


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/widget-context.tsx":
/*!*****************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/widget-context.tsx ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryWidgetContext: () => (/* binding */ QueryWidgetContext)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");

const QueryWidgetContext = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createContext(null);


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/version-manager.ts":
/*!*********************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/version-manager.ts ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   versionManager: () => (/* binding */ versionManager)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");

class VersionManager extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.BaseVersionManager {
    constructor() {
        super(...arguments);
        this.versions = [{
                version: '1.0.0',
                description: 'The first version.',
                upgrader: (oldConfig) => {
                    return oldConfig;
                }
            }];
    }
}
const versionManager = new VersionManager();


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/version.ts":
/*!*************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/version.ts ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   WIDGET_VERSION: () => (/* binding */ WIDGET_VERSION)
/* harmony export */ });
/**
 * Widget version number.
 * Base version matches Experience Builder version (1.19.0).
 * Release number increments on major changes (001, 002, 003, ...).
 * Minor version increments on smaller fixes between major releases (r015.1, r015.2, ...).
 *
 * To increment:
 * - Major change: Update RELEASE_NUMBER (e.g., 015 -> 016) and reset MINOR_VERSION to 0
 * - Minor fix: Increment MINOR_VERSION (e.g., 1 -> 2) while keeping same RELEASE_NUMBER
 */
const BASE_VERSION = '1.19.0';
const RELEASE_NUMBER = '017'; // Increment on major changes (001, 002, 003, ...)
const MINOR_VERSION = '48'; // Increment on minor fixes between major releases (1, 2, 3, ...)
const WIDGET_VERSION = MINOR_VERSION && MINOR_VERSION !== '0'
    ? `${BASE_VERSION}-r${RELEASE_NUMBER}.${MINOR_VERSION}`
    : `${BASE_VERSION}-r${RELEASE_NUMBER}`;


/***/ }),

/***/ "./your-extensions/widgets/shared-code/common.ts":
/*!*******************************************************!*\
  !*** ./your-extensions/widgets/shared-code/common.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DataSourceTip: () => (/* reexport safe */ _common_data_source_tip__WEBPACK_IMPORTED_MODULE_3__.DataSourceTip),
/* harmony export */   DialogPanel: () => (/* reexport safe */ _common_common_components__WEBPACK_IMPORTED_MODULE_0__.DialogPanel),
/* harmony export */   EntityStatusType: () => (/* reexport safe */ _common_common_components__WEBPACK_IMPORTED_MODULE_0__.EntityStatusType),
/* harmony export */   ErrorMessage: () => (/* reexport safe */ _common_common_components__WEBPACK_IMPORTED_MODULE_0__.ErrorMessage),
/* harmony export */   StateHolder: () => (/* reexport safe */ _common_common_components__WEBPACK_IMPORTED_MODULE_0__.StateHolder),
/* harmony export */   StatusIndicator: () => (/* reexport safe */ _common_common_components__WEBPACK_IMPORTED_MODULE_0__.StatusIndicator),
/* harmony export */   createGetI18nMessage: () => (/* reexport safe */ _common_utils__WEBPACK_IMPORTED_MODULE_1__.createGetI18nMessage),
/* harmony export */   createHelperSimpleDebugLogger: () => (/* reexport safe */ _common_debug_logger__WEBPACK_IMPORTED_MODULE_4__.createHelperSimpleDebugLogger),
/* harmony export */   createQuerySimpleDebugLogger: () => (/* reexport safe */ _common_debug_logger__WEBPACK_IMPORTED_MODULE_4__.createQuerySimpleDebugLogger),
/* harmony export */   getFieldInfosInPopupContent: () => (/* reexport safe */ _common_utils__WEBPACK_IMPORTED_MODULE_1__.getFieldInfosInPopupContent),
/* harmony export */   toggleItemInArray: () => (/* reexport safe */ _common_utils__WEBPACK_IMPORTED_MODULE_1__.toggleItemInArray),
/* harmony export */   useDataSourceExists: () => (/* reexport safe */ _common_use_ds_exists__WEBPACK_IMPORTED_MODULE_2__.useDataSourceExists)
/* harmony export */ });
/* harmony import */ var _common_common_components__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./common/common-components */ "./your-extensions/widgets/shared-code/common/common-components.tsx");
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./common/utils */ "./your-extensions/widgets/shared-code/common/utils.tsx");
/* harmony import */ var _common_use_ds_exists__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./common/use-ds-exists */ "./your-extensions/widgets/shared-code/common/use-ds-exists.tsx");
/* harmony import */ var _common_data_source_tip__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./common/data-source-tip */ "./your-extensions/widgets/shared-code/common/data-source-tip.tsx");
/* harmony import */ var _common_debug_logger__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./common/debug-logger */ "./your-extensions/widgets/shared-code/common/debug-logger.ts");
/**
 * Shared common utilities and components for Experience Builder widgets
 *
 * This module exports common functionality that can be shared between
 * query-simple, helper-simple, and other custom widgets.
 *
 * This is the entry point for 'widgets/shared-code/common'
 */







/***/ }),

/***/ "./your-extensions/widgets/shared-code/common/common-components.tsx":
/*!**************************************************************************!*\
  !*** ./your-extensions/widgets/shared-code/common/common-components.tsx ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DialogPanel: () => (/* binding */ DialogPanel),
/* harmony export */   EntityStatusType: () => (/* binding */ EntityStatusType),
/* harmony export */   ErrorMessage: () => (/* binding */ ErrorMessage),
/* harmony export */   StateHolder: () => (/* binding */ StateHolder),
/* harmony export */   StatusIndicator: () => (/* binding */ StatusIndicator)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_theme__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-theme */ "jimu-theme");
/* harmony import */ var jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-icons/svg/outlined/suggested/error.svg */ "./jimu-icons/svg/outlined/suggested/error.svg");
/* harmony import */ var jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_4__);

/** @jsx jsx */




const { useState } = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React;
/**
 * A simple Functional Component storing some States that are commonly used
 */
const StateHolder = (props) => {
    const { initState = {}, children } = props;
    const defaultStateMap = {
        visible: true,
        refContainer: null
    };
    const useStateMap = {
        visible: useState('visible' in initState ? initState.visible : defaultStateMap.visible),
        refContainer: useState('refContainer' in initState ? initState.refContainer : defaultStateMap.refContainer),
        customData: useState(Object.assign({}, initState.customData))
    };
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: children(useStateMap) });
};
/**
 * A dialog popup
 */
const DialogPanel = (0,jimu_theme__WEBPACK_IMPORTED_MODULE_3__.withTheme)((props) => {
    const { theme, panelVisible, setPanelVisible, getI18nMessage, isModal = true, title = getI18nMessage('queryMessage'), bodyContent = '', hasHeader = true, hasFooter = true } = props;
    const toggle = () => { setPanelVisible(false); };
    const getContent = () => (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [hasHeader &&
                (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.PanelHeader, { className: 'py-2', title: title, onClose: toggle }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.ModalBody, { children: bodyContent }), hasFooter &&
                (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.ModalFooter, { children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { onClick: toggle, children: getI18nMessage('ok') }) })] });
    const generalClassName = 'ui-unit-dialog-panel';
    const renderModalContent = () => {
        return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Modal, { className: generalClassName, isOpen: panelVisible, toggle: toggle, backdrop: 'static', children: getContent() }));
    };
    const renderNonModalContent = () => {
        const getStyle = () => (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
      &.ui-unit-dialog-panel.modal-dialog {
        margin: 0;
        width: 100%;
        .modal-content {
          background-color: ${theme.ref.palette.neutral[600]};
          color: ${theme.ref.palette.black};
          font-size: .75rem;
          font-weight: 400;
          border: none;
          .panel-header {
            font-size: .8125rem;
            padding: .625rem;
          }
          .modal-body {
            padding: 0 .625rem .75rem;
            white-space: normal;
          }
        }
      }
    `;
        return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: `${generalClassName} modal-dialog ${panelVisible ? '' : 'collapse'}`, css: getStyle(), children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'modal-content', children: getContent() }) }));
    };
    return isModal ? renderModalContent() : renderNonModalContent();
});
var EntityStatusType;
(function (EntityStatusType) {
    EntityStatusType["None"] = "";
    EntityStatusType["Init"] = "init";
    EntityStatusType["Loading"] = "loading";
    EntityStatusType["Loaded"] = "loaded";
    EntityStatusType["Warning"] = "warning";
    EntityStatusType["Error"] = "error";
})(EntityStatusType || (EntityStatusType = {}));
/**
 * An animatable icon representing status
 */
const StatusIndicator = (0,jimu_theme__WEBPACK_IMPORTED_MODULE_3__.withTheme)((props) => {
    const { theme, className, title, statusType } = props;
    const getStyle = () => {
        var _a, _b, _c, _d;
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
    &.ui-unit-status-indicator {
      display: flex;
      &.ui-unit-status-indicator_status-type-loading {
        &:before {
          @keyframes loading {
            0% {transform: rotate(0deg); };
            100% {transform: rotate(360deg)};
          }
          content: '';
          width: 1rem;
          height: 1rem;
          display: block;
          border: 1px solid ${(_b = (_a = theme === null || theme === void 0 ? void 0 : theme.ref.palette) === null || _a === void 0 ? void 0 : _a.neutral) === null || _b === void 0 ? void 0 : _b[500]};
          border-radius: 50%;
          border-top: 1px solid ${(_d = (_c = theme === null || theme === void 0 ? void 0 : theme.sys.color) === null || _c === void 0 ? void 0 : _c.primary) === null || _d === void 0 ? void 0 : _d.main};
          box-sizing: border-box;
          animation: loading 2s infinite linear;
          margin-right: .25rem;
        }
      }
    }
  `;
    };
    return (statusType &&
        (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: `${className !== null && className !== void 0 ? className : ''} ui-unit-status-indicator ui-unit-status-indicator_status-type-${statusType}`, title: title, css: getStyle() }));
});
/**
 * Simple error message component for displaying user-facing errors.
 * Use DataSourceTip for data source-related errors.
 */
const ErrorMessage = (props) => {
    const { error, className = '', onDismiss } = props;
    if (!error) {
        return null;
    }
    const errorStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
    display: flex;
    align-items: center;
    padding: 0.5rem;
    margin: 0.5rem 0;
    background-color: var(--sys-color-error-light);
    color: var(--sys-color-error-dark);
    border-radius: 4px;
    font-size: 0.875rem;
    gap: 0.5rem;
    
    .error-icon {
      flex-shrink: 0;
    }
    
    .error-text {
      flex: 1;
    }
    
    .error-dismiss {
      flex-shrink: 0;
      cursor: pointer;
      padding: 0.25rem;
      &:hover {
        opacity: 0.7;
      }
    }
  `;
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: `error-message ${className}`, css: errorStyle, role: "alert", children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Icon, { icon: (jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_4___default()), className: "error-icon", size: "sm" }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { className: "error-text", children: error }), onDismiss && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: "sm", type: "tertiary", icon: true, onClick: onDismiss, className: "error-dismiss", "aria-label": "Dismiss error", children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Icon, { icon: (__webpack_require__(/*! jimu-icons/svg/outlined/editor/close.svg */ "./jimu-icons/svg/outlined/editor/close.svg")["default"]), size: "sm" }) }))] }));
};


/***/ }),

/***/ "./your-extensions/widgets/shared-code/common/data-source-tip.tsx":
/*!************************************************************************!*\
  !*** ./your-extensions/widgets/shared-code/common/data-source-tip.tsx ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DataSourceTip: () => (/* binding */ DataSourceTip)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _common_components__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./common-components */ "./your-extensions/widgets/shared-code/common/common-components.tsx");
/* harmony import */ var jimu_icons_svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-icons/svg/outlined/suggested/warning.svg */ "./jimu-icons/svg/outlined/suggested/warning.svg");
/* harmony import */ var jimu_icons_svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jimu-icons/svg/outlined/suggested/error.svg */ "./jimu-icons/svg/outlined/suggested/error.svg");
/* harmony import */ var jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _use_ds_exists__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./use-ds-exists */ "./your-extensions/widgets/shared-code/common/use-ds-exists.tsx");

/** @jsx jsx */






/**
 * Show icon and message if the data source doesn't work.
 * @param props
 * @returns
 */
function DataSourceTip(props) {
    var _a, _b, _c;
    const { widgetId, useDataSource, onStatusChange, onDataSourceCreated, showMessage = false } = props;
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.defaultMessages);
    const dsExists = (0,_use_ds_exists__WEBPACK_IMPORTED_MODULE_6__.useDataSourceExists)({ widgetId, useDataSourceId: useDataSource.dataSourceId });
    const [dsStatus, setDsStatus] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const [dataSource, setDataSource] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const handleDsInfoChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((info) => {
        if (info) {
            const { status, instanceStatus } = info;
            if (instanceStatus === jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.NotCreated) {
                setDsStatus('creating');
                onStatusChange === null || onStatusChange === void 0 ? void 0 : onStatusChange(false);
            }
            else if (instanceStatus === jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.CreateError || status === jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.LoadError) {
                setDsStatus('error');
                onStatusChange === null || onStatusChange === void 0 ? void 0 : onStatusChange(false);
            }
            else if (status === jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.NotReady) {
                setDsStatus('warning');
                onStatusChange === null || onStatusChange === void 0 ? void 0 : onStatusChange(false);
            }
            else {
                setDsStatus(null);
                onStatusChange === null || onStatusChange === void 0 ? void 0 : onStatusChange(true);
            }
        }
    }, [onStatusChange]);
    const handleDsCreated = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((ds) => {
        setDataSource(ds);
        onDataSourceCreated === null || onDataSourceCreated === void 0 ? void 0 : onDataSourceCreated(ds);
    }, [onDataSourceCreated]);
    const handleDsCreateFailed = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        setDataSource(null);
        setDsStatus('error');
        onStatusChange === null || onStatusChange === void 0 ? void 0 : onStatusChange(false);
    }, [onStatusChange]);
    let statusIcon;
    let statusMsg;
    let color;
    if (dsStatus === 'creating') {
        statusIcon = (jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_5___default());
        statusMsg = getI18nMessage('loading');
    }
    else if (!dsExists || dsStatus === 'error') {
        statusIcon = (jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_5___default());
        statusMsg = getI18nMessage('dataSourceCreateError');
        color = 'var(--sys-color-error-main)';
    }
    else if (dsStatus === 'warning') {
        let label = '';
        const originDs = (_a = dataSource === null || dataSource === void 0 ? void 0 : dataSource.getOriginDataSources()) === null || _a === void 0 ? void 0 : _a[0];
        if (originDs) {
            label = originDs.getLabel() || originDs.getDataSourceJson().sourceLabel;
        }
        else if (dataSource) {
            label = dataSource.getLabel() || dataSource.getDataSourceJson().label;
        }
        const widgetId = jimu_core__WEBPACK_IMPORTED_MODULE_1__.appConfigUtils.getWidgetIdByOutputDataSource(useDataSource);
        const appState = ((_b = window === null || window === void 0 ? void 0 : window.jimuConfig) === null || _b === void 0 ? void 0 : _b.isBuilder)
            ? (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.getAppStore)().getState().appStateInBuilder
            : (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.getAppStore)().getState();
        const widgetLabel = (_c = appState.appConfig.widgets[widgetId]) === null || _c === void 0 ? void 0 : _c.label;
        color = 'var(--sys-color-warning-dark)';
        statusIcon = (jimu_icons_svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_4___default());
        statusMsg = getI18nMessage('outputDataIsNotGenerated', {
            outputDsLabel: label !== null && label !== void 0 ? label : '',
            sourceWidgetName: widgetLabel !== null && widgetLabel !== void 0 ? widgetLabel : ''
        });
    }
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [dsExists && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceComponent, { useDataSource: useDataSource, onDataSourceInfoChange: handleDsInfoChange, onDataSourceCreated: handleDsCreated, onCreateDataSourceFailed: handleDsCreateFailed })), dsStatus === 'creating' && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_common_components__WEBPACK_IMPORTED_MODULE_3__.StatusIndicator, { statusType: _common_components__WEBPACK_IMPORTED_MODULE_3__.EntityStatusType.Loading, title: statusMsg }), (!dsExists || dsStatus === 'error' || dsStatus === 'warning') && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'd-flex align-items-center', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { title: statusMsg, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: 'sm', type: 'tertiary', icon: true, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Icon, { icon: statusIcon, color: color }) }) }), showMessage && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'status-message', children: statusMsg })] }))] }));
}


/***/ }),

/***/ "./your-extensions/widgets/shared-code/common/debug-logger.ts":
/*!********************************************************************!*\
  !*** ./your-extensions/widgets/shared-code/common/debug-logger.ts ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createHelperSimpleDebugLogger: () => (/* binding */ createHelperSimpleDebugLogger),
/* harmony export */   createQuerySimpleDebugLogger: () => (/* binding */ createQuerySimpleDebugLogger)
/* harmony export */ });
/**
 * Configurable debug logging utility for Experience Builder widgets
 *
 * Usage:
 * - Add ?debug=all to URL to see all debug logs
 * - Add ?debug=HASH,FORM to see specific feature logs
 * - Add ?debug=false to disable all debug logs
 *
 * Features (QuerySimple):
 * - HASH: Hash parameter processing
 * - FORM: Query form interactions
 * - TASK: Query task management
 * - ZOOM: Zoom behavior
 * - MAP-EXTENT: Map extent changes
 * - DATA-ACTION: Data action execution (Add to Map, etc.)
 * - GROUP: Query grouping and dropdown selection
 * - SELECTION: Selection detection and identify popup tracking
 * - WIDGET-STATE: Widget lifecycle events (open/close handshake)
 * - RESTORE: Selection restoration when widget opens
 * - RESULTS-MODE: Results management mode selection (Create new, Add to, Remove from)
 * - EXPAND-COLLAPSE: Expand/collapse state management for result items
 * - GRAPHICS-LAYER: Graphics layer highlighting (independent of layer visibility)
 *
 * Features (HelperSimple):
 * - HASH: Hash parameter monitoring and widget opening
 * - SELECTION: Selection tracking from QuerySimple
 * - WIDGET-STATE: Widget state handshake (open/close events)
 * - RESTORE: Selection restoration attempts and results
 */
class DebugLogger {
    constructor(options) {
        this.enabledFeatures = new Set();
        this.initialized = false;
        this.widgetName = options.widgetName;
        this.features = options.features;
    }
    initialize() {
        if (this.initialized)
            return;
        // Check URL parameters (both current window and parent for iframes)
        let urlParams = new URLSearchParams(window.location.search);
        let debugValue = urlParams.get('debug');
        // If not found in current window, check parent (needed for ExB iframes)
        if (debugValue === null && window.parent !== window) {
            try {
                urlParams = new URLSearchParams(window.parent.location.search);
                debugValue = urlParams.get('debug');
            }
            catch (e) {
                // Cross-origin restriction might prevent access to parent location
            }
        }
        if (debugValue === 'false') {
            // Explicitly disabled
            this.initialized = true;
            return;
        }
        if (debugValue === 'all') {
            // Enable all features only if explicitly set to 'all'
            this.features.forEach(feature => {
                if (feature !== 'all' && feature !== 'false') {
                    this.enabledFeatures.add(feature);
                }
            });
            console.log(`[${this.widgetName}-DEBUG] Enabled ALL features:`, Array.from(this.enabledFeatures));
        }
        else if (debugValue !== null) {
            // Parse comma-separated feature list
            const requestedFeatures = debugValue.split(',').map(f => f.trim().toUpperCase());
            requestedFeatures.forEach(feature => {
                if (feature.toUpperCase() === 'ALL') {
                    // Enable all features for this widget
                    this.features.forEach(f => {
                        if (f !== 'all' && f !== 'false') {
                            this.enabledFeatures.add(f);
                        }
                    });
                }
                else if (this.features.includes(feature)) {
                    this.enabledFeatures.add(feature);
                }
            });
        }
        this.initialized = true;
    }
    isEnabled(feature) {
        this.initialize();
        if (this.enabledFeatures.has('all')) {
            return true;
        }
        return this.enabledFeatures.has(feature);
    }
    log(feature, data) {
        if (!this.isEnabled(feature)) {
            return;
        }
        const logData = Object.assign({ feature, timestamp: new Date().toISOString() }, data);
        console.log(`[${this.widgetName.toUpperCase()}-${feature}]`, JSON.stringify(logData, null, 2));
    }
    getConfig() {
        this.initialize();
        const urlParams = new URLSearchParams(window.location.search);
        const debugValue = urlParams.get('debug');
        return {
            enabledFeatures: Array.from(this.enabledFeatures),
            debugValue
        };
    }
}
/**
 * Creates a debug logger instance for QuerySimple widget
 */
function createQuerySimpleDebugLogger() {
    return new DebugLogger({
        widgetName: 'QUERYSIMPLE',
        features: ['HASH', 'FORM', 'TASK', 'ZOOM', 'MAP-EXTENT', 'DATA-ACTION', 'GROUP', 'SELECTION', 'WIDGET-STATE', 'RESTORE', 'RESULTS-MODE', 'EXPAND-COLLAPSE', 'GRAPHICS-LAYER']
    });
}
/**
 * Creates a debug logger instance for HelperSimple widget
 */
function createHelperSimpleDebugLogger() {
    return new DebugLogger({
        widgetName: 'HELPERSIMPLE',
        features: ['HASH', 'SELECTION', 'WIDGET-STATE', 'RESTORE']
    });
}


/***/ }),

/***/ "./your-extensions/widgets/shared-code/common/use-ds-exists.tsx":
/*!**********************************************************************!*\
  !*** ./your-extensions/widgets/shared-code/common/use-ds-exists.tsx ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   useDataSourceExists: () => (/* binding */ useDataSourceExists)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");

function useDataSourceExists(props) {
    const { widgetId, useDataSourceId } = props;
    const exists = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        var _a;
        let appConfig;
        if (window.jimuConfig.isBuilder) {
            appConfig = state.appStateInBuilder.appConfig;
        }
        else {
            appConfig = state.appConfig;
        }
        const useDataSources = (_a = appConfig.widgets[widgetId].useDataSources) !== null && _a !== void 0 ? _a : [];
        return useDataSources.some(useDs => useDs.dataSourceId === useDataSourceId);
    });
    return exists;
}


/***/ }),

/***/ "./your-extensions/widgets/shared-code/common/utils.tsx":
/*!**************************************************************!*\
  !*** ./your-extensions/widgets/shared-code/common/utils.tsx ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createGetI18nMessage: () => (/* binding */ createGetI18nMessage),
/* harmony export */   getFieldInfosInPopupContent: () => (/* binding */ getFieldInfosInPopupContent),
/* harmony export */   toggleItemInArray: () => (/* binding */ toggleItemInArray)
/* harmony export */ });
/**
 * Toggle items in an array
 */
const toggleItemInArray = (item, items = []) => items.includes(item) ? items.filter(i => i !== item) : [...items, item];
/**
 * A factory to create a function of getting i18n message
 */
function createGetI18nMessage(options) {
    const { intl, defaultMessages = {} } = options || {};
    const getI18nMessage = (id, options) => {
        const { messages, values } = options || {};
        return intl.formatMessage({ id, defaultMessage: (messages || defaultMessages)[id] }, values);
    };
    return getI18nMessage;
}
function getFieldInfosInPopupContent(popupInfo) {
    var _a;
    const result = [];
    if (((_a = popupInfo === null || popupInfo === void 0 ? void 0 : popupInfo.popupElements) === null || _a === void 0 ? void 0 : _a.length) > 0) {
        popupInfo.popupElements.forEach(element => {
            var _a;
            if (element.type === 'fields' && ((_a = element.fieldInfos) === null || _a === void 0 ? void 0 : _a.length) > 0) {
                result.push(...element.fieldInfos);
            }
        });
    }
    return result;
}


/***/ }),

/***/ "@emotion/react/jsx-runtime":
/*!************************************!*\
  !*** external "jimu-core/emotion" ***!
  \************************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE__emotion_react_jsx_runtime__;

/***/ }),

/***/ "jimu-arcgis":
/*!******************************!*\
  !*** external "jimu-arcgis" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_arcgis__;

/***/ }),

/***/ "jimu-core":
/*!****************************!*\
  !*** external "jimu-core" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_core__;

/***/ }),

/***/ "jimu-layouts/layout-runtime":
/*!**********************************************!*\
  !*** external "jimu-layouts/layout-runtime" ***!
  \**********************************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_layouts_layout_runtime__;

/***/ }),

/***/ "jimu-theme":
/*!*****************************!*\
  !*** external "jimu-theme" ***!
  \*****************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_theme__;

/***/ }),

/***/ "jimu-ui":
/*!**************************!*\
  !*** external "jimu-ui" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_ui__;

/***/ }),

/***/ "jimu-ui/basic/sql-expression-runtime":
/*!*******************************************************!*\
  !*** external "jimu-ui/basic/sql-expression-runtime" ***!
  \*******************************************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_ui_basic_sql_expression_runtime__;

/***/ }),

/***/ "widgets/shared-code/common":
/*!*********************************************!*\
  !*** external "widgets/shared-code/common" ***!
  \*********************************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_widgets_shared_code_common__;

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/publicPath */
/******/ 	(() => {
/******/ 		__webpack_require__.p = "";
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry needs to be wrapped in an IIFE because it needs to be isolated against other entry modules.
(() => {
/*!******************************************!*\
  !*** ./jimu-core/lib/set-public-path.ts ***!
  \******************************************/
/**
 * Webpack will replace __webpack_public_path__ with __webpack_require__.p to set the public path dynamically.
 * The reason why we can't set the publicPath in webpack config is: we change the publicPath when download.
 * */
__webpack_require__.p = window.jimuConfig.baseUrl;

})();

// This entry needs to be wrapped in an IIFE because it needs to be in strict mode.
(() => {
"use strict";
/*!*********************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/widget.tsx ***!
  \*********************************************************************/
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   __set_webpack_public_path__: () => (/* binding */ __set_webpack_public_path__),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _widget_config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./widget-config */ "./your-extensions/widgets/query-simple/src/runtime/widget-config.ts");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");
/* harmony import */ var _version_manager__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../version-manager */ "./your-extensions/widgets/query-simple/src/version-manager.ts");
/* harmony import */ var _query_task_list__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./query-task-list */ "./your-extensions/widgets/query-simple/src/runtime/query-task-list.tsx");
/* harmony import */ var _query_task_list_inline__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./query-task-list-inline */ "./your-extensions/widgets/query-simple/src/runtime/query-task-list-inline.tsx");
/* harmony import */ var _query_task_list_popper_wrapper__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./query-task-list-popper-wrapper */ "./your-extensions/widgets/query-simple/src/runtime/query-task-list-popper-wrapper.tsx");
/* harmony import */ var _widget_context__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./widget-context */ "./your-extensions/widgets/query-simple/src/runtime/widget-context.tsx");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/* harmony import */ var _graphics_layer_utils__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./graphics-layer-utils */ "./your-extensions/widgets/query-simple/src/runtime/graphics-layer-utils.ts");
/* harmony import */ var _selection_utils__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");
/* harmony import */ var _version__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../version */ "./your-extensions/widgets/query-simple/src/version.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};

/** @jsx jsx */















const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_12__.createQuerySimpleDebugLogger)();
const { iconMap } = (0,_widget_config__WEBPACK_IMPORTED_MODULE_5__.getWidgetRuntimeDataMap)();
/**
 * Custom event name for QuerySimple to notify HelperSimple of widget open/close state.
 */
const QUERYSIMPLE_WIDGET_STATE_EVENT = 'querysimple-widget-state-changed';
/**
 * Custom event name for requesting restoration when identify popup closes.
 */
const RESTORE_ON_IDENTIFY_CLOSE_EVENT = 'querysimple-restore-on-identify-close';
class Widget extends jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.PureComponent {
    constructor() {
        super(...arguments);
        this.lastProcessedHash = '';
        this.state = {
            resultsMode: _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.NewSelection, // Default mode
            activeTab: 'query'
        };
        this.handleTabChange = (activeTab) => {
            this.setState({ activeTab });
        };
        this.widgetRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.createRef();
        this.visibilityObserver = null;
        this.visibilityCheckInterval = null;
        this.graphicsLayerRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.createRef();
        this.mapViewRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.createRef();
        /**
         * Notifies HelperSimple of selection changes.
         * Called by QueryTaskResult when selection is made.
         *
         * @param recordIds - Array of selected record IDs
         * @param dataSourceId - Optional data source ID
         */
        this.notifyHelperSimpleOfSelection = (recordIds, dataSourceId) => {
            const { id } = this.props;
            const event = new CustomEvent(_selection_utils__WEBPACK_IMPORTED_MODULE_14__.QUERYSIMPLE_SELECTION_EVENT, {
                detail: {
                    widgetId: id,
                    recordIds,
                    dataSourceId
                },
                bubbles: true,
                cancelable: true
            });
            window.dispatchEvent(event);
        };
        /**
         * Sets up visibility detection to track when the widget panel is open/closed.
         * Uses IntersectionObserver if available, falls back to periodic checking.
         */
        this.setupVisibilityDetection = () => {
            // Wait for next tick to ensure ref is set
            setTimeout(() => {
                if (!this.widgetRef.current) {
                    debugLogger.log('WIDGET-STATE', {
                        event: 'visibility-detection-setup-failed',
                        widgetId: this.props.id,
                        reason: 'widget-ref-not-available'
                    });
                    return;
                }
                const element = this.widgetRef.current;
                // Method 1: IntersectionObserver (most efficient)
                if ('IntersectionObserver' in window) {
                    this.visibilityObserver = new IntersectionObserver((entries) => {
                        const entry = entries[0];
                        const isVisible = entry.isIntersecting && entry.intersectionRatio > 0;
                        // Only log if state changed
                        if (this.state.isPanelVisible !== isVisible) {
                            this.setState({ isPanelVisible: isVisible });
                            this.logVisibilityChange(isVisible, 'IntersectionObserver');
                            this.notifyHelperSimpleOfPanelState(isVisible);
                        }
                    }, {
                        threshold: [0, 0.1, 1.0], // Trigger at 0%, 10%, and 100% visibility
                        rootMargin: '0px'
                    });
                    this.visibilityObserver.observe(element);
                    debugLogger.log('WIDGET-STATE', {
                        event: 'visibility-detection-setup',
                        widgetId: this.props.id,
                        method: 'IntersectionObserver'
                    });
                }
                else {
                    // Method 2: Fallback to periodic checking
                    this.visibilityCheckInterval = window.setInterval(() => {
                        const isVisible = this.checkVisibility();
                        if (this.state.isPanelVisible !== isVisible) {
                            this.setState({ isPanelVisible: isVisible });
                            this.logVisibilityChange(isVisible, 'periodic-check');
                            this.notifyHelperSimpleOfPanelState(isVisible);
                        }
                    }, 250); // Check every 250ms
                    debugLogger.log('WIDGET-STATE', {
                        event: 'visibility-detection-setup',
                        widgetId: this.props.id,
                        method: 'periodic-check'
                    });
                }
            }, 100);
        };
        /**
         * Cleans up visibility detection observers/intervals.
         */
        this.cleanupVisibilityDetection = () => {
            if (this.visibilityObserver) {
                this.visibilityObserver.disconnect();
                this.visibilityObserver = null;
            }
            if (this.visibilityCheckInterval !== null) {
                clearInterval(this.visibilityCheckInterval);
                this.visibilityCheckInterval = null;
            }
        };
        /**
         * Handles map view change from JimuMapViewComponent.
         * When map view becomes available, initialize graphics layer if enabled.
         */
        this.handleJimuMapViewChanged = (jimuMapView) => {
            var _a;
            const { id, config } = this.props;
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'handleJimuMapViewChanged',
                widgetId: id,
                hasJimuMapView: !!jimuMapView,
                hasView: !!(jimuMapView === null || jimuMapView === void 0 ? void 0 : jimuMapView.view),
                viewType: ((_a = jimuMapView === null || jimuMapView === void 0 ? void 0 : jimuMapView.view) === null || _a === void 0 ? void 0 : _a.type) || 'none',
                timestamp: Date.now()
            });
            // Store JimuMapView in state
            this.setState({ jimuMapView: jimuMapView || undefined });
            // If map view is available and graphics layer is enabled, initialize it
            if ((jimuMapView === null || jimuMapView === void 0 ? void 0 : jimuMapView.view) && config.useGraphicsLayerForHighlight && !this.graphicsLayerRef.current) {
                this.initializeGraphicsLayer(jimuMapView.view);
            }
        };
        /**
         * Initializes the graphics layer using the provided map view.
         */
        this.initializeGraphicsLayer = (mapView) => __awaiter(this, void 0, void 0, function* () {
            const { id } = this.props;
            try {
                // Create or get graphics layer
                const graphicsLayer = yield (0,_graphics_layer_utils__WEBPACK_IMPORTED_MODULE_13__.createOrGetGraphicsLayer)(id, mapView);
                if (!graphicsLayer) {
                    debugLogger.log('GRAPHICS-LAYER', {
                        event: 'initializeGraphicsLayer-failed',
                        widgetId: id,
                        reason: 'graphics-layer-creation-failed',
                        timestamp: Date.now()
                    });
                    return;
                }
                // Store references
                this.mapViewRef.current = mapView;
                this.graphicsLayerRef.current = graphicsLayer;
                // Update state to force re-render and update props
                this.setState({ graphicsLayerInitialized: true });
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'initializeGraphicsLayer-success',
                    widgetId: id,
                    graphicsLayerId: graphicsLayer.id,
                    viewType: mapView.type || 'unknown',
                    timestamp: Date.now()
                });
            }
            catch (error) {
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'initializeGraphicsLayer-error',
                    widgetId: id,
                    error: error instanceof Error ? error.message : String(error),
                    errorStack: error instanceof Error ? error.stack : undefined,
                    timestamp: Date.now()
                });
            }
        });
        /**
         * Initializes graphics layer lazily when outputDS becomes available.
         * Now uses the map view from JimuMapViewComponent instead of trying to get it from data source.
         */
        this.initializeGraphicsLayerFromOutputDS = (outputDS) => __awaiter(this, void 0, void 0, function* () {
            var _a;
            const { id, config } = this.props;
            // Only initialize if enabled and not already initialized
            if (!config.useGraphicsLayerForHighlight || this.graphicsLayerRef.current) {
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'initializeGraphicsLayerFromOutputDS-skipped',
                    widgetId: id,
                    reason: !config.useGraphicsLayerForHighlight ? 'not-enabled' : 'already-initialized',
                    timestamp: Date.now()
                });
                return;
            }
            // Use map view from JimuMapViewComponent if available
            const mapView = ((_a = this.state.jimuMapView) === null || _a === void 0 ? void 0 : _a.view) || this.mapViewRef.current;
            if (!mapView) {
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'initializeGraphicsLayerFromOutputDS-skipped',
                    widgetId: id,
                    reason: 'map-view-not-available-yet',
                    outputDSId: outputDS.id,
                    hasJimuMapView: !!this.state.jimuMapView,
                    timestamp: Date.now()
                });
                return;
            }
            // Initialize graphics layer with the map view
            yield this.initializeGraphicsLayer(mapView);
        });
        /**
         * Cleans up the graphics layer when widget unmounts or config changes.
         */
        this.cleanupGraphicsLayer = () => {
            const { id } = this.props;
            const mapView = this.mapViewRef.current;
            if (mapView) {
                (0,_graphics_layer_utils__WEBPACK_IMPORTED_MODULE_13__.cleanupGraphicsLayer)(id, mapView);
                this.mapViewRef.current = null;
                this.graphicsLayerRef.current = null;
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'cleanupGraphicsLayer-complete',
                    widgetId: id,
                    timestamp: Date.now()
                });
            }
        };
        /**
         * Clears the graphics layer if it exists.
         * This is called when clearing results or switching queries in New mode to ensure graphics are removed.
         */
        this.clearGraphicsLayerIfExists = () => {
            const { config } = this.props;
            const graphicsLayer = this.graphicsLayerRef.current;
            if (config.useGraphicsLayerForHighlight && graphicsLayer) {
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'clearGraphicsLayerIfExists-called',
                    widgetId: this.props.id,
                    graphicsLayerId: graphicsLayer.id,
                    graphicsCount: graphicsLayer.graphics.length,
                    timestamp: Date.now()
                });
                const { clearGraphicsLayer } = __webpack_require__(/*! ./graphics-layer-utils */ "./your-extensions/widgets/query-simple/src/runtime/graphics-layer-utils.ts");
                clearGraphicsLayer(graphicsLayer);
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'clearGraphicsLayerIfExists-complete',
                    widgetId: this.props.id,
                    graphicsLayerId: graphicsLayer.id,
                    timestamp: Date.now()
                });
            }
            else {
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'clearGraphicsLayerIfExists-skipped',
                    widgetId: this.props.id,
                    reason: !config.useGraphicsLayerForHighlight ? 'not-enabled' : 'no-graphics-layer',
                    hasGraphicsLayer: !!graphicsLayer,
                    timestamp: Date.now()
                });
            }
        };
        /**
         * Checks if the widget element is currently visible.
         * Fallback method when IntersectionObserver is not available.
         */
        this.checkVisibility = () => {
            if (!this.widgetRef.current)
                return false;
            const element = this.widgetRef.current;
            const style = window.getComputedStyle(element);
            const rect = element.getBoundingClientRect();
            const isVisible = (style.display !== 'none' &&
                style.visibility !== 'hidden' &&
                style.opacity !== '0' &&
                rect.width > 0 &&
                rect.height > 0 &&
                rect.top < window.innerHeight &&
                rect.bottom > 0 &&
                rect.left < window.innerWidth &&
                rect.right > 0);
            return isVisible;
        };
        /**
         * Tracks selection changes from query-result.
         * In "Add to" or "Remove from" modes, uses accumulated records count for restoration.
         */
        this.handleSelectionChange = (event) => {
            var _a;
            const customEvent = event;
            const { id } = this.props;
            // Only track if this is for our widget
            if (customEvent.detail.widgetId !== id) {
                return;
            }
            const hasSelection = customEvent.detail.recordIds && customEvent.detail.recordIds.length > 0;
            // If the panel is NOT visible, and we are receiving an EMPTY selection,
            // it's almost certainly our own 'clearSelectionFromMap' logic firing.
            // We should IGNORE this so we don't wipe out the lastSelection state.
            if (!this.state.isPanelVisible && !hasSelection) {
                debugLogger.log('RESTORE', {
                    event: 'handleSelectionChange-ignoring-empty-selection-while-panel-closed',
                    widgetId: id,
                    timestamp: Date.now()
                });
                return;
            }
            // In "Add to" or "Remove from" mode, use accumulated records count for restoration
            // The accumulated records are the source of truth for what should be restored
            const isAccumulationMode = this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.AddToSelection ||
                this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection;
            const accumulatedRecordsCount = ((_a = this.state.accumulatedRecords) === null || _a === void 0 ? void 0 : _a.length) || 0;
            const selectionCount = isAccumulationMode && accumulatedRecordsCount > 0
                ? accumulatedRecordsCount
                : (hasSelection ? customEvent.detail.recordIds.length : 0);
            // If selection is cleared and we're in Remove mode, reset to NewSelection mode
            // Remove mode requires selection to function, so it should be disabled when selection is empty
            const shouldResetMode = !hasSelection &&
                selectionCount === 0 &&
                this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection;
            debugLogger.log('RESTORE', {
                event: 'handleSelectionChange-updating-state',
                widgetId: id,
                resultsMode: this.state.resultsMode,
                isAccumulationMode,
                eventRecordIdsCount: customEvent.detail.recordIds.length,
                hasSelectionFromEvent: hasSelection,
                accumulatedRecordsCountBefore: accumulatedRecordsCount,
                calculatedSelectionCount: selectionCount,
                'will-set-hasSelection': selectionCount > 0,
                'will-set-lastSelection': hasSelection && !!customEvent.detail.outputDsId && !!customEvent.detail.queryItemConfigId,
                'will-reset-mode': shouldResetMode,
                decisionLogic: {
                    'isAccumulationMode': isAccumulationMode,
                    'accumulatedRecordsCount > 0': accumulatedRecordsCount > 0,
                    'use-accumulated-count': isAccumulationMode && accumulatedRecordsCount > 0,
                    'use-event-count': !(isAccumulationMode && accumulatedRecordsCount > 0),
                    'should-reset-mode': shouldResetMode
                }
            });
            this.setState(Object.assign({ hasSelection: selectionCount > 0, selectionRecordCount: selectionCount, 
                // Store lastSelection for compatibility, but restoration will use accumulatedRecords in Add/Remove modes
                lastSelection: hasSelection && customEvent.detail.outputDsId && customEvent.detail.queryItemConfigId
                    ? {
                        recordIds: customEvent.detail.recordIds,
                        outputDsId: customEvent.detail.outputDsId,
                        queryItemConfigId: customEvent.detail.queryItemConfigId
                    }
                    : undefined }, (shouldResetMode ? {
                resultsMode: _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.NewSelection,
                accumulatedRecords: [] // Also clear accumulated records when resetting mode
            } : {})));
            debugLogger.log('RESTORE', {
                event: 'handleSelectionChange-state-updated',
                widgetId: id,
                'new-hasSelection': selectionCount > 0,
                'new-selectionRecordCount': selectionCount,
                'new-lastSelection-recordIds-count': hasSelection && customEvent.detail.outputDsId && customEvent.detail.queryItemConfigId
                    ? customEvent.detail.recordIds.length
                    : 0,
                'mode-reset': shouldResetMode,
                'new-mode': shouldResetMode ? _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.NewSelection : this.state.resultsMode,
                'note': shouldResetMode
                    ? 'Mode reset to NewSelection because selection was cleared in Remove mode'
                    : 'lastSelection-only-contains-current-query-records-not-all-accumulated-records'
            });
        };
        /**
         * Handles restore request when identify popup closes.
         * Only restores if widget panel is open.
         * In "Add to" or "Remove from" modes, restores all accumulated records.
         */
        this.handleRestoreOnIdentifyClose = (event) => {
            var _a, _b, _c;
            const customEvent = event;
            const { id } = this.props;
            // Only handle if this is for our widget
            if (customEvent.detail.widgetId !== id) {
                return;
            }
            const isWidgetOpen = this.state.isPanelVisible === true;
            const isAccumulationMode = this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.AddToSelection ||
                this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection;
            debugLogger.log('RESTORE', {
                event: 'identify-popup-closed-restore-requested',
                widgetId: id,
                isWidgetOpen,
                resultsMode: this.state.resultsMode,
                isAccumulationMode,
                eventRecordIdsCount: customEvent.detail.recordIds.length,
                hasSelection: this.state.hasSelection || false,
                accumulatedRecordsCount: ((_a = this.state.accumulatedRecords) === null || _a === void 0 ? void 0 : _a.length) || 0,
                hasLastSelection: !!this.state.lastSelection,
                lastSelectionRecordCount: ((_b = this.state.lastSelection) === null || _b === void 0 ? void 0 : _b.recordIds.length) || 0,
                outputDsId: customEvent.detail.outputDsId,
                queryItemConfigId: customEvent.detail.queryItemConfigId
            });
            // Only restore if widget is open
            if (!isWidgetOpen) {
                debugLogger.log('RESTORE', {
                    event: 'identify-popup-closed-restore-skipped-widget-closed',
                    widgetId: id,
                    recordCount: customEvent.detail.recordIds.length
                });
                return;
            }
            // HYPOTHESIS: Should always check accumulatedRecords first, regardless of mode
            if (this.state.accumulatedRecords && this.state.accumulatedRecords.length > 0) {
                debugLogger.log('RESTORE', {
                    event: 'identify-popup-closed-found-accumulated-records',
                    widgetId: id,
                    resultsMode: this.state.resultsMode,
                    isAccumulationMode,
                    accumulatedRecordsCount: this.state.accumulatedRecords.length,
                    'should-use-accumulated': true,
                    'current-condition-check': isAccumulationMode,
                    'condition-result': isAccumulationMode
                });
            }
            // In Add/Remove modes, check accumulated records instead of lastSelection
            if (isAccumulationMode) {
                if (!this.state.hasSelection || !this.state.accumulatedRecords || this.state.accumulatedRecords.length === 0) {
                    debugLogger.log('RESTORE', {
                        event: 'identify-popup-closed-restore-skipped-no-accumulated-records',
                        widgetId: id,
                        hasSelection: this.state.hasSelection,
                        accumulatedRecordsCount: ((_c = this.state.accumulatedRecords) === null || _c === void 0 ? void 0 : _c.length) || 0,
                        'hypothesis': 'hasSelection-is-false-or-no-accumulated-records',
                        'maybe-hasSelection-should-be-based-on-accumulated-records': true
                    });
                    return;
                }
                // Restore all accumulated records (grouped by origin DS)
                debugLogger.log('RESTORE', {
                    event: 'identify-popup-closed-restoring-accumulated-records',
                    widgetId: id,
                    accumulatedRecordsCount: this.state.accumulatedRecords.length
                });
                this.addSelectionToMap();
                return;
            }
            // HYPOTHESIS: Maybe accumulatedRecords exist but we're not in accumulation mode?
            if (this.state.accumulatedRecords && this.state.accumulatedRecords.length > 0 && !isAccumulationMode) {
                debugLogger.log('RESTORE', {
                    event: 'identify-popup-closed-accumulated-records-exist-but-not-accumulation-mode',
                    widgetId: id,
                    resultsMode: this.state.resultsMode,
                    isAccumulationMode,
                    accumulatedRecordsCount: this.state.accumulatedRecords.length,
                    'hypothesis': 'accumulated-records-exist-but-mode-is-not-add-or-remove',
                    'should-we-still-use-them': 'NEEDS-INVESTIGATION'
                });
            }
            // For "New" mode, use original validation logic
            // Check if we have matching selection state
            if (!this.state.hasSelection || !this.state.lastSelection) {
                debugLogger.log('RESTORE', {
                    event: 'identify-popup-closed-restore-skipped-no-selection',
                    widgetId: id,
                    hasSelection: this.state.hasSelection,
                    hasLastSelection: !!this.state.lastSelection
                });
                return;
            }
            // Verify the outputDsId matches
            if (this.state.lastSelection.outputDsId !== customEvent.detail.outputDsId) {
                debugLogger.log('RESTORE', {
                    event: 'identify-popup-closed-restore-skipped-ds-mismatch',
                    widgetId: id,
                    ourOutputDsId: this.state.lastSelection.outputDsId,
                    requestedOutputDsId: customEvent.detail.outputDsId
                });
                return;
            }
            // Verify the queryItemConfigId matches (optional but good to check)
            if (this.state.lastSelection.queryItemConfigId !== customEvent.detail.queryItemConfigId) {
                debugLogger.log('RESTORE', {
                    event: 'identify-popup-closed-restore-skipped-query-mismatch',
                    widgetId: id,
                    ourQueryItemConfigId: this.state.lastSelection.queryItemConfigId,
                    requestedQueryItemConfigId: customEvent.detail.queryItemConfigId
                });
                return;
            }
            // Restore selection to map (reuse existing method)
            debugLogger.log('RESTORE', {
                event: 'identify-popup-closed-restoring-selection',
                widgetId: id,
                recordCount: customEvent.detail.recordIds.length,
                outputDsId: customEvent.detail.outputDsId
            });
            this.addSelectionToMap();
        };
        /**
         * Adds selection to map when widget opens (reuses Add to Map logic).
         * In "Add to" or "Remove from" modes, restores all accumulated records grouped by origin data source.
         */
        this.addSelectionToMap = () => {
            const { lastSelection, accumulatedRecords, resultsMode } = this.state;
            const { id } = this.props;
            debugLogger.log('RESTORE', {
                event: 'addSelectionToMap-called',
                widgetId: id,
                resultsMode,
                hasAccumulatedRecords: !!(accumulatedRecords && accumulatedRecords.length > 0),
                accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0,
                hasLastSelection: !!lastSelection,
                lastSelectionRecordCount: (lastSelection === null || lastSelection === void 0 ? void 0 : lastSelection.recordIds.length) || 0,
                lastSelectionOutputDsId: lastSelection === null || lastSelection === void 0 ? void 0 : lastSelection.outputDsId
            });
            // In Add/Remove modes, use accumulated records for restoration
            const isAccumulationMode = resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.AddToSelection ||
                resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection;
            // HYPOTHESIS: Should always check accumulatedRecords first, regardless of mode
            // Adding log to see if accumulatedRecords exist but we're not using them
            if (accumulatedRecords && accumulatedRecords.length > 0) {
                debugLogger.log('RESTORE', {
                    event: 'addSelectionToMap-found-accumulated-records',
                    widgetId: id,
                    resultsMode,
                    isAccumulationMode,
                    accumulatedRecordsCount: accumulatedRecords.length,
                    'should-use-accumulated': true,
                    'current-condition-check': isAccumulationMode && accumulatedRecords && accumulatedRecords.length > 0,
                    'condition-result': isAccumulationMode && accumulatedRecords && accumulatedRecords.length > 0
                });
            }
            else {
                debugLogger.log('RESTORE', {
                    event: 'addSelectionToMap-no-accumulated-records',
                    widgetId: id,
                    resultsMode,
                    isAccumulationMode,
                    accumulatedRecordsCount: 0,
                    'will-fallback-to-lastSelection': !!lastSelection
                });
            }
            if (isAccumulationMode && accumulatedRecords && accumulatedRecords.length > 0) {
                // Group accumulated records by origin data source
                const recordsByOriginDS = new Map();
                const dsManager = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance();
                accumulatedRecords.forEach((record, index) => {
                    var _a, _b, _c;
                    const recordId = record.getId();
                    let originDS = null;
                    // Method 1: Try to get from record.getDataSource()
                    const recordDS = (_a = record.getDataSource) === null || _a === void 0 ? void 0 : _a.call(record);
                    if (recordDS) {
                        originDS = ((_b = recordDS.getOriginDataSources()) === null || _b === void 0 ? void 0 : _b[0]) || recordDS;
                        debugLogger.log('RESTORE', {
                            event: 'found-origin-ds-from-record-ds',
                            widgetId: id,
                            recordIndex: index,
                            recordId,
                            originDSId: (originDS === null || originDS === void 0 ? void 0 : originDS.id) || 'null',
                            method: 'record.getDataSource()'
                        });
                    }
                    // Method 2: If that failed, search all data sources for a record with matching ID
                    if (!originDS) {
                        const dsMap = dsManager.getDataSources();
                        const allDataSources = Object.values(dsMap);
                        for (const ds of allDataSources) {
                            // Check if this is a FeatureLayerDataSource by checking for getAllLoadedRecords method
                            if (ds && typeof ds.getAllLoadedRecords === 'function') {
                                try {
                                    // Check if this DS has the record
                                    const allRecords = ds.getAllLoadedRecords() || [];
                                    const matchingRecord = allRecords.find((r) => r.getId() === recordId);
                                    if (matchingRecord) {
                                        // Found the record - get origin DS from this DS
                                        originDS = ((_c = ds.getOriginDataSources()) === null || _c === void 0 ? void 0 : _c[0]) || ds;
                                        debugLogger.log('RESTORE', {
                                            event: 'found-origin-ds-via-search',
                                            widgetId: id,
                                            recordIndex: index,
                                            recordId,
                                            originDSId: originDS.id,
                                            method: 'searched-all-data-sources',
                                            searchedDSId: ds.id
                                        });
                                        break;
                                    }
                                }
                                catch (error) {
                                    // Continue searching
                                }
                            }
                        }
                    }
                    if (originDS) {
                        if (!recordsByOriginDS.has(originDS)) {
                            recordsByOriginDS.set(originDS, []);
                        }
                        recordsByOriginDS.get(originDS).push(record);
                    }
                    else {
                        debugLogger.log('RESTORE', {
                            event: 'could-not-find-origin-ds-for-record',
                            widgetId: id,
                            recordIndex: index,
                            recordId,
                            warning: 'record-will-be-skipped'
                        });
                    }
                });
                debugLogger.log('RESTORE', {
                    event: 'panel-opened-restoring-accumulated-records',
                    widgetId: id,
                    resultsMode,
                    accumulatedRecordsCount: accumulatedRecords.length,
                    originDSCount: recordsByOriginDS.size
                });
                // Restore selection for each origin data source
                const { selectRecordsAndPublish } = __webpack_require__(/*! ./selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");
                const useGraphicsLayer = this.props.config.useGraphicsLayerForHighlight;
                const graphicsLayer = this.graphicsLayerRef.current || undefined;
                const mapView = this.mapViewRef.current || undefined;
                recordsByOriginDS.forEach((records, originDS) => {
                    const recordIds = records.map(r => r.getId());
                    try {
                        // Use originDS directly (not outputDS) since records are selected in origin layers
                        // Use async IIFE since forEach callback can't be async
                        ;
                        (() => __awaiter(this, void 0, void 0, function* () {
                            yield selectRecordsAndPublish(id, originDS, recordIds, records, true, useGraphicsLayer, graphicsLayer, mapView);
                        }))();
                        debugLogger.log('RESTORE', {
                            event: 'panel-opened-restored-origin-ds',
                            widgetId: id,
                            originDSId: originDS.id,
                            recordCount: records.length,
                            zoomExecuted: false
                        });
                    }
                    catch (error) {
                        debugLogger.log('RESTORE', {
                            event: 'panel-opened-restore-origin-ds-failed',
                            widgetId: id,
                            originDSId: originDS.id,
                            error: error instanceof Error ? error.message : String(error),
                            errorStack: error instanceof Error ? error.stack : undefined
                        });
                    }
                });
                return;
            }
            // HYPOTHESIS: Maybe accumulatedRecords exist but we're not in accumulation mode?
            // Or maybe we should always check accumulatedRecords first?
            if (accumulatedRecords && accumulatedRecords.length > 0 && !isAccumulationMode) {
                debugLogger.log('RESTORE', {
                    event: 'addSelectionToMap-accumulated-records-exist-but-not-accumulation-mode',
                    widgetId: id,
                    resultsMode,
                    isAccumulationMode,
                    accumulatedRecordsCount: accumulatedRecords.length,
                    'hypothesis': 'accumulated-records-exist-but-mode-is-not-add-or-remove',
                    'should-we-still-use-them': 'NEEDS-INVESTIGATION'
                });
            }
            // Fall back to original logic for "New" mode
            if (!lastSelection) {
                debugLogger.log('RESTORE', {
                    event: 'addSelectionToMap-no-lastSelection-exiting',
                    widgetId: id,
                    resultsMode,
                    hasAccumulatedRecords: !!(accumulatedRecords && accumulatedRecords.length > 0),
                    accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0,
                    'hypothesis': 'no-lastSelection-so-exiting-early-maybe-should-check-accumulated-records-first'
                });
                return;
            }
            const dsManager = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance();
            const outputDS = dsManager.getDataSource(lastSelection.outputDsId);
            if (!outputDS) {
                debugLogger.log('RESTORE', {
                    event: 'panel-opened-output-ds-not-found',
                    widgetId: id,
                    outputDsId: lastSelection.outputDsId
                });
                return;
            }
            // Get records from output DS (same as Add to Map)
            const allRecords = outputDS.getAllLoadedRecords() || [];
            const recordsToSelect = allRecords.filter(record => lastSelection.recordIds.includes(record.getId()));
            if (recordsToSelect.length === 0) {
                debugLogger.log('RESTORE', {
                    event: 'panel-opened-no-matching-records',
                    widgetId: id,
                    ourRecordCount: lastSelection.recordIds.length
                });
                return;
            }
            // Same logic as Add to Map action - selectRecordsAndPublish handles duplicate checking
            // Don't zoom when restoring on widget open (Add to Map action handles zoom for manual clicks)
            try {
                const { selectRecordsAndPublish } = __webpack_require__(/*! ./selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");
                const useGraphicsLayer = this.props.config.useGraphicsLayerForHighlight;
                const graphicsLayer = this.graphicsLayerRef.current || undefined;
                const mapView = this.mapViewRef.current || undefined;
                (() => __awaiter(this, void 0, void 0, function* () {
                    yield selectRecordsAndPublish(id, outputDS, lastSelection.recordIds, recordsToSelect, true, useGraphicsLayer, graphicsLayer, mapView);
                }))();
                debugLogger.log('RESTORE', {
                    event: 'panel-opened-selection-added-to-map',
                    widgetId: id,
                    recordCount: recordsToSelect.length,
                    zoomExecuted: false
                });
            }
            catch (error) {
                debugLogger.log('RESTORE', {
                    event: 'panel-opened-add-to-map-failed',
                    widgetId: id,
                    error: error instanceof Error ? error.message : String(error)
                });
            }
        };
        /**
         * Handles results mode change from dropdown.
         * Updates widget state and logs the change for debugging.
         */
        this.handleResultsModeChange = (mode) => {
            var _a, _b;
            debugLogger.log('RESULTS-MODE', {
                event: 'handleResultsModeChange-triggered',
                widgetId: this.props.id,
                previousMode: this.state.resultsMode,
                newMode: mode,
                currentAccumulatedCount: ((_a = this.state.accumulatedRecords) === null || _a === void 0 ? void 0 : _a.length) || 0,
                timestamp: Date.now()
            });
            // Consume deep link when switching to accumulation modes
            if (mode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.AddToSelection || mode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection) {
                if ((_b = this.state.initialQueryValue) === null || _b === void 0 ? void 0 : _b.shortId) {
                    debugLogger.log('HASH', {
                        event: 'consuming-hash-on-mode-switch',
                        widgetId: this.props.id,
                        mode,
                        shortId: this.state.initialQueryValue.shortId
                    });
                    this.removeHashParameter(this.state.initialQueryValue.shortId);
                }
            }
            // If switching to "New" mode, clear accumulated records
            if (mode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.NewSelection) {
                debugLogger.log('RESULTS-MODE', {
                    event: 'clearing-accumulated-records-on-mode-switch',
                    widgetId: this.props.id,
                    previousMode: this.state.resultsMode
                });
                this.setState({ resultsMode: mode, accumulatedRecords: [] });
            }
            else {
                this.setState({ resultsMode: mode });
            }
        };
        this.removeHashParameter = (shortId) => {
            var _a;
            if (!shortId)
                return;
            const hash = window.location.hash.substring(1);
            const urlParams = new URLSearchParams(hash);
            if (urlParams.has(shortId)) {
                urlParams.delete(shortId);
                const newHash = urlParams.toString();
                debugLogger.log('HASH', {
                    event: 'removeHashParameter',
                    shortId,
                    newHash: newHash ? `#${newHash}` : '(empty)',
                    timestamp: Date.now()
                });
                // Update the URL without triggering a reload
                window.history.replaceState(null, '', newHash ? `#${newHash}` : window.location.pathname + window.location.search);
                // Also clear the state so it won't trigger again
                if (((_a = this.state.initialQueryValue) === null || _a === void 0 ? void 0 : _a.shortId) === shortId) {
                    this.setState({ initialQueryValue: undefined });
                }
            }
        };
        this.handleAccumulatedRecordsChange = (records) => {
            var _a;
            debugLogger.log('RESULTS-MODE', {
                event: 'handleAccumulatedRecordsChange-triggered',
                widgetId: this.props.id,
                previousCount: ((_a = this.state.accumulatedRecords) === null || _a === void 0 ? void 0 : _a.length) || 0,
                newCount: records.length,
                timestamp: Date.now()
            });
            this.setState({ accumulatedRecords: records });
        };
        /**
         * NOTE: No longer needed - we use existing output DS instead of creating new one.
         * Kept for reference but not used.
         */
        this.getOrCreateAccumulatedResultsDS = (originDS) => __awaiter(this, void 0, void 0, function* () {
            // This is no longer used - we merge records into existing output DS
            throw new Error('This method is deprecated - use existing output DS instead');
        });
        /**
         * Clears selection from map only (keeps selection in widget's internal state).
         * Called when widget panel closes to remove selection from map while preserving widget state.
         * Always clears accumulated records if they exist, regardless of current mode.
         */
        this.clearSelectionFromMap = () => {
            var _a;
            const { lastSelection, accumulatedRecords, resultsMode } = this.state;
            const { id } = this.props;
            const isAccumulationMode = resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.AddToSelection ||
                resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection;
            debugLogger.log('RESTORE', {
                event: 'clearSelectionFromMap-called',
                widgetId: id,
                resultsMode,
                isAccumulationMode,
                hasLastSelection: !!lastSelection,
                lastSelectionRecordCount: (lastSelection === null || lastSelection === void 0 ? void 0 : lastSelection.recordIds.length) || 0,
                hasAccumulatedRecords: !!(accumulatedRecords && accumulatedRecords.length > 0),
                accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0,
                selectionRecordCount: this.state.selectionRecordCount || 0
            });
            // Always clear accumulated records if they exist (regardless of mode)
            // This handles the case where mode might have changed but records still exist
            debugLogger.log('RESTORE', {
                event: 'clearSelectionFromMap-checking-accumulated-records',
                widgetId: id,
                'condition': 'accumulatedRecords && accumulatedRecords.length > 0',
                'condition-result': !!(accumulatedRecords && accumulatedRecords.length > 0),
                accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0
            });
            if (accumulatedRecords && accumulatedRecords.length > 0) {
                // Group accumulated records by origin data source
                const recordsByOriginDS = new Map();
                const dsManager = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance();
                accumulatedRecords.forEach((record, index) => {
                    var _a, _b, _c;
                    const recordId = record.getId();
                    let originDS = null;
                    // Method 1: Try to get from record.getDataSource()
                    const recordDS = (_a = record.getDataSource) === null || _a === void 0 ? void 0 : _a.call(record);
                    if (recordDS) {
                        originDS = ((_b = recordDS.getOriginDataSources()) === null || _b === void 0 ? void 0 : _b[0]) || recordDS;
                        debugLogger.log('RESTORE', {
                            event: 'clear-found-origin-ds-from-record-ds',
                            widgetId: id,
                            recordIndex: index,
                            recordId,
                            originDSId: (originDS === null || originDS === void 0 ? void 0 : originDS.id) || 'null',
                            method: 'record.getDataSource()'
                        });
                    }
                    // Method 2: If that failed, search all data sources for a record with matching ID
                    if (!originDS) {
                        const dsMap = dsManager.getDataSources();
                        const allDataSources = Object.values(dsMap);
                        for (const ds of allDataSources) {
                            // Check if this is a FeatureLayerDataSource by checking for getAllLoadedRecords method
                            if (ds && typeof ds.getAllLoadedRecords === 'function') {
                                try {
                                    // Check if this DS has the record
                                    const allRecords = ds.getAllLoadedRecords() || [];
                                    const matchingRecord = allRecords.find((r) => r.getId() === recordId);
                                    if (matchingRecord) {
                                        // Found the record - get origin DS from this DS
                                        originDS = ((_c = ds.getOriginDataSources()) === null || _c === void 0 ? void 0 : _c[0]) || ds;
                                        debugLogger.log('RESTORE', {
                                            event: 'clear-found-origin-ds-via-search',
                                            widgetId: id,
                                            recordIndex: index,
                                            recordId,
                                            originDSId: originDS.id,
                                            method: 'searched-all-data-sources',
                                            searchedDSId: ds.id
                                        });
                                        break;
                                    }
                                }
                                catch (error) {
                                    // Continue searching
                                }
                            }
                        }
                    }
                    if (originDS) {
                        if (!recordsByOriginDS.has(originDS)) {
                            recordsByOriginDS.set(originDS, []);
                        }
                        recordsByOriginDS.get(originDS).push(record);
                    }
                    else {
                        debugLogger.log('RESTORE', {
                            event: 'clear-could-not-find-origin-ds-for-record',
                            widgetId: id,
                            recordIndex: index,
                            recordId,
                            warning: 'record-will-be-skipped'
                        });
                    }
                });
                debugLogger.log('RESTORE', {
                    event: 'panel-closed-clearing-accumulated-records-from-map',
                    widgetId: id,
                    accumulatedRecordsCount: accumulatedRecords.length,
                    originDSCount: recordsByOriginDS.size
                });
                // Clear selection from each origin data source
                const { clearSelectionInDataSources } = __webpack_require__(/*! ./selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");
                const useGraphicsLayer = this.props.config.useGraphicsLayerForHighlight;
                const graphicsLayer = this.graphicsLayerRef.current || undefined;
                recordsByOriginDS.forEach((records, originDS) => {
                    try {
                        // Use async IIFE since forEach callback can't be async
                        ;
                        (() => __awaiter(this, void 0, void 0, function* () {
                            yield clearSelectionInDataSources(id, originDS, useGraphicsLayer, graphicsLayer);
                            debugLogger.log('RESTORE', {
                                event: 'panel-closed-cleared-origin-ds-selection',
                                widgetId: id,
                                originDSId: originDS.id,
                                recordCount: records.length,
                                usedGraphicsLayer: useGraphicsLayer
                            });
                        }))();
                    }
                    catch (error) {
                        debugLogger.log('RESTORE', {
                            event: 'panel-closed-clear-origin-ds-failed',
                            widgetId: id,
                            originDSId: originDS.id,
                            error: error instanceof Error ? error.message : String(error)
                        });
                    }
                });
                debugLogger.log('RESTORE', {
                    event: 'clearSelectionFromMap-cleared-accumulated-records-returning',
                    widgetId: id,
                    'will-not-fallback-to-lastSelection': true
                });
                return;
            }
            // HYPOTHESIS: Maybe accumulatedRecords exist but we didn't enter the if block?
            // Or maybe we should always clear accumulated records if they exist?
            if (accumulatedRecords && accumulatedRecords.length > 0) {
                debugLogger.log('RESTORE', {
                    event: 'clearSelectionFromMap-accumulated-records-exist-but-not-clearing',
                    widgetId: id,
                    resultsMode,
                    isAccumulationMode,
                    accumulatedRecordsCount: accumulatedRecords.length,
                    'hypothesis': 'accumulated-records-exist-but-condition-failed-why',
                    'condition-was': 'accumulatedRecords && accumulatedRecords.length > 0',
                    'condition-result': !!(accumulatedRecords && accumulatedRecords.length > 0)
                });
            }
            // Fall back to original logic for "New" mode
            if (!lastSelection) {
                debugLogger.log('RESTORE', {
                    event: 'clearSelectionFromMap-no-lastSelection-exiting',
                    widgetId: id,
                    hasAccumulatedRecords: !!(accumulatedRecords && accumulatedRecords.length > 0),
                    accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0,
                    'hypothesis': 'no-lastSelection-so-exiting-maybe-should-have-cleared-accumulated-records-first'
                });
                return;
            }
            const dsManager = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance();
            const outputDS = dsManager.getDataSource(lastSelection.outputDsId);
            if (!outputDS) {
                debugLogger.log('RESTORE', {
                    event: 'panel-closed-output-ds-not-found',
                    widgetId: id,
                    outputDsId: lastSelection.outputDsId
                });
                return;
            }
            try {
                // Get origin DS (the map layer)
                const originDS = (_a = outputDS.getOriginDataSources()) === null || _a === void 0 ? void 0 : _a[0];
                if (!originDS) {
                    debugLogger.log('RESTORE', {
                        event: 'panel-closed-origin-ds-not-found',
                        widgetId: id,
                        outputDsId: lastSelection.outputDsId
                    });
                    return;
                }
                // Check current selection state before clearing
                const currentSelectedIds = originDS.getSelectedRecordIds() || [];
                const ourRecordIds = lastSelection.recordIds;
                const matchesOurSelection = ourRecordIds.length === currentSelectedIds.length &&
                    ourRecordIds.every(recordId => currentSelectedIds.includes(recordId));
                debugLogger.log('RESTORE', {
                    event: 'panel-closed-checking-map-selection',
                    widgetId: id,
                    ourRecordCount: ourRecordIds.length,
                    mapSelectedCount: currentSelectedIds.length,
                    matchesOurSelection,
                    ourRecordIds: ourRecordIds.slice(0, 5),
                    mapSelectedIds: currentSelectedIds.slice(0, 5)
                });
                // Use clearSelectionInDataSources utility which supports graphics layer
                const { clearSelectionInDataSources } = __webpack_require__(/*! ./selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");
                const useGraphicsLayer = this.props.config.useGraphicsLayerForHighlight;
                const graphicsLayer = this.graphicsLayerRef.current || undefined;
                (() => __awaiter(this, void 0, void 0, function* () {
                    yield clearSelectionInDataSources(id, originDS, useGraphicsLayer, graphicsLayer);
                    debugLogger.log('RESTORE', {
                        event: 'panel-closed-cleared-origin-ds-selection',
                        widgetId: id,
                        originDSId: originDS.id,
                        usedGraphicsLayer: useGraphicsLayer
                    });
                    // Verify selection was cleared
                    const afterClearIds = originDS.getSelectedRecordIds() || [];
                    debugLogger.log('RESTORE', {
                        event: 'panel-closed-selection-cleared-from-map',
                        widgetId: id,
                        recordCount: lastSelection.recordIds.length,
                        originDSId: originDS.id,
                        selectionAfterClear: afterClearIds.length,
                        verifiedCleared: afterClearIds.length === 0
                    });
                }))();
            }
            catch (error) {
                debugLogger.log('RESTORE', {
                    event: 'panel-closed-clear-from-map-failed',
                    widgetId: id,
                    error: error instanceof Error ? error.message : String(error),
                    errorStack: error instanceof Error ? error.stack : undefined
                });
            }
        };
        /**
         * Logs visibility state changes.
         */
        this.logVisibilityChange = (isVisible, method) => {
            var _a, _b, _c, _d;
            debugLogger.log('WIDGET-STATE', {
                event: isVisible ? 'panel-opened' : 'panel-closed',
                widgetId: this.props.id,
                isVisible,
                method,
                timestamp: new Date().toISOString()
            });
            if (isVisible) {
                // When panel opens, check if we have selection to restore
                const isAccumulationMode = this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.AddToSelection ||
                    this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection;
                const hasAccumulatedRecords = this.state.accumulatedRecords && this.state.accumulatedRecords.length > 0;
                const hasSelectionState = this.state.hasSelection || false;
                const hasSelectionToRestore = isAccumulationMode
                    ? hasAccumulatedRecords
                    : hasSelectionState;
                debugLogger.log('RESTORE', {
                    event: 'panel-opened-checking-selection',
                    widgetId: this.props.id,
                    resultsMode: this.state.resultsMode,
                    isAccumulationMode,
                    hasSelection: hasSelectionState,
                    hasAccumulatedRecords,
                    accumulatedRecordsCount: ((_a = this.state.accumulatedRecords) === null || _a === void 0 ? void 0 : _a.length) || 0,
                    selectionRecordCount: this.state.selectionRecordCount || 0,
                    hasLastSelection: !!this.state.lastSelection,
                    lastSelectionRecordCount: ((_b = this.state.lastSelection) === null || _b === void 0 ? void 0 : _b.recordIds.length) || 0,
                    hasSelectionToRestore,
                    decisionLogic: {
                        'isAccumulationMode': isAccumulationMode,
                        'hasAccumulatedRecords': hasAccumulatedRecords,
                        'hasSelectionState': hasSelectionState,
                        'calculated-hasSelectionToRestore': hasSelectionToRestore,
                        'will-call-addSelectionToMap': hasSelectionToRestore
                    }
                });
                // Add selection to map if we have one
                if (hasSelectionToRestore) {
                    debugLogger.log('RESTORE', {
                        event: 'panel-opened-calling-addSelectionToMap',
                        widgetId: this.props.id,
                        reason: 'hasSelectionToRestore-is-true'
                    });
                    this.addSelectionToMap();
                }
                else {
                    debugLogger.log('RESTORE', {
                        event: 'panel-opened-skipping-addSelectionToMap',
                        widgetId: this.props.id,
                        reason: 'hasSelectionToRestore-is-false',
                        why: isAccumulationMode
                            ? 'no-accumulated-records'
                            : 'no-hasSelection-state'
                    });
                }
            }
            else {
                // When panel closes, clear selection from map only (keep widget state)
                const isAccumulationMode = this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.AddToSelection ||
                    this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection;
                const hasAccumulatedRecords = this.state.accumulatedRecords && this.state.accumulatedRecords.length > 0;
                const hasSelectionState = this.state.hasSelection || false;
                const hasSelectionToClear = isAccumulationMode
                    ? hasAccumulatedRecords
                    : hasSelectionState;
                debugLogger.log('RESTORE', {
                    event: 'panel-closed-checking-selection',
                    widgetId: this.props.id,
                    resultsMode: this.state.resultsMode,
                    isAccumulationMode,
                    hasSelection: hasSelectionState,
                    hasAccumulatedRecords,
                    accumulatedRecordsCount: ((_c = this.state.accumulatedRecords) === null || _c === void 0 ? void 0 : _c.length) || 0,
                    selectionRecordCount: this.state.selectionRecordCount || 0,
                    hasLastSelection: !!this.state.lastSelection,
                    lastSelectionRecordCount: ((_d = this.state.lastSelection) === null || _d === void 0 ? void 0 : _d.recordIds.length) || 0,
                    hasSelectionToClear,
                    decisionLogic: {
                        'isAccumulationMode': isAccumulationMode,
                        'hasAccumulatedRecords': hasAccumulatedRecords,
                        'hasSelectionState': hasSelectionState,
                        'calculated-hasSelectionToClear': hasSelectionToClear,
                        'will-call-clearSelectionFromMap': hasSelectionToClear
                    }
                });
                if (hasSelectionToClear) {
                    debugLogger.log('RESTORE', {
                        event: 'panel-closed-calling-clearSelectionFromMap',
                        widgetId: this.props.id,
                        reason: 'hasSelectionToClear-is-true'
                    });
                    this.clearSelectionFromMap();
                }
                else {
                    debugLogger.log('RESTORE', {
                        event: 'panel-closed-no-selection-to-clear',
                        widgetId: this.props.id,
                        reason: 'hasSelectionToClear-is-false',
                        why: isAccumulationMode
                            ? 'no-accumulated-records'
                            : 'no-hasSelection-state'
                    });
                }
            }
        };
        /**
         * Notifies HelperSimple of panel visibility state changes.
         */
        this.notifyHelperSimpleOfPanelState = (isVisible) => {
            const event = new CustomEvent(QUERYSIMPLE_WIDGET_STATE_EVENT, {
                detail: {
                    widgetId: this.props.id,
                    isOpen: isVisible
                },
                bubbles: true,
                cancelable: true
            });
            window.dispatchEvent(event);
        };
        /**
         * NOTIFY that a hash parameter has been used.
         * Previously this removed the hash from the URL, but per updated requirements,
         * user-entered hashes should remain in the URL.
         *
         * @param shortId - The shortId parameter that was used
         */
        this.handleHashParameterUsed = (shortId) => {
            var _a;
            const { id } = this.props;
            const { initialQueryValue } = this.state;
            debugLogger.log('HASH', {
                event: 'handleHashParameterUsed-notified',
                widgetId: id,
                shortId: shortId,
                currentInitialQueryValue: initialQueryValue,
                note: 'Hash remains in URL per user requirement',
                timestamp: Date.now()
            });
            // Clear the state so it won't trigger again within this session/mount
            if (((_a = this.state.initialQueryValue) === null || _a === void 0 ? void 0 : _a.shortId) === shortId) {
                this.setState({ initialQueryValue: undefined });
            }
        };
        /**
         * Checks the URL hash parameters for any shortIds that match query items.
         * If found, stores the value to be used to auto-populate and execute the query.
         * Experience Builder uses hash-based URL parameters (e.g., #pin=2223059013).
         *
         * This method prioritizes the first matching shortId found in the query items order.
         * If multiple hash parameters exist, only the first match is used.
         */
        this.checkQueryStringForShortIds = () => {
            var _a, _b, _c, _d, _e;
            const { config } = this.props;
            if (!((_a = config.queryItems) === null || _a === void 0 ? void 0 : _a.length)) {
                return;
            }
            // Extract all shortIds from query items
            const shortIds = config.queryItems
                .map(item => item.shortId)
                .filter(shortId => shortId != null && shortId.trim() !== '');
            if (shortIds.length === 0) {
                return;
            }
            // Get URL hash fragment parameters (ExB uses # for params)
            // Also check query string for shortIds to handle both formats
            const hash = window.location.hash.substring(1); // Remove the #
            const query = window.location.search.substring(1); // Remove the ?
            const hashParams = new URLSearchParams(hash);
            const queryParams = new URLSearchParams(query);
            // Check if we've already processed this specific hash string
            // We only track hash because query params are usually static or managed by ExB
            if (this.lastProcessedHash === hash) {
                return;
            }
            // Update immediately to prevent re-entry race conditions
            this.lastProcessedHash = hash;
            // Log all params for debugging
            const allHashParams = {};
            hashParams.forEach((value, key) => { allHashParams[key] = value; });
            const allQueryParams = {};
            queryParams.forEach((value, key) => { allQueryParams[key] = value; });
            // Log check for debugging
            debugLogger.log('HASH', {
                event: 'url-param-check',
                widgetId: this.props.id,
                hash: hash,
                query: query,
                allHashParams,
                allQueryParams,
                availableShortIds: shortIds,
                currentState: this.state.initialQueryValue,
                timestamp: Date.now()
            });
            // Find the first matching shortId
            // PRIORITY:
            // 1. Any shortId found in the HASH (hash always wins)
            // 2. Any shortId found in the QUERY string (if no hash match)
            let foundShortId = null;
            let foundValue = null;
            let foundIn = null;
            // FIRST PASS: Check ALL shortIds in the HASH
            for (const shortId of shortIds) {
                if (hashParams.has(shortId)) {
                    foundShortId = shortId;
                    foundValue = hashParams.get(shortId);
                    foundIn = 'hash';
                    break;
                }
            }
            // SECOND PASS: If no hash match, check ALL shortIds in the QUERY string
            if (!foundShortId) {
                for (const shortId of shortIds) {
                    if (queryParams.has(shortId)) {
                        foundShortId = shortId;
                        foundValue = queryParams.get(shortId);
                        foundIn = 'query';
                        break;
                    }
                }
            }
            if (foundShortId && foundValue !== null) {
                // Only update if the value or shortId has changed to avoid unnecessary re-renders
                if (((_b = this.state.initialQueryValue) === null || _b === void 0 ? void 0 : _b.shortId) !== foundShortId || ((_c = this.state.initialQueryValue) === null || _c === void 0 ? void 0 : _c.value) !== foundValue) {
                    debugLogger.log('HASH', {
                        event: 'url-param-detected',
                        widgetId: this.props.id,
                        shortId: foundShortId,
                        value: foundValue,
                        foundIn,
                        previousShortId: (_d = this.state.initialQueryValue) === null || _d === void 0 ? void 0 : _d.shortId,
                        previousValue: (_e = this.state.initialQueryValue) === null || _e === void 0 ? void 0 : _e.value,
                        timestamp: Date.now()
                    });
                    // Reset to New mode when hash parameter is detected to avoid bugs with accumulation modes
                    const needsModeReset = this.state.resultsMode !== _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.NewSelection;
                    this.setState(Object.assign({ initialQueryValue: { shortId: foundShortId, value: foundValue } }, (needsModeReset ? {
                        resultsMode: _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.NewSelection,
                        accumulatedRecords: []
                    } : {})));
                }
                return; // Exit after finding first match
            }
            // If no hash parameters match any shortId, log what's in the hash
            if (!foundMatch && Object.keys(allHashParams).length > 0) {
                debugLogger.log('HASH', {
                    event: 'hash-check-no-matching-shortId',
                    widgetId: this.props.id,
                    hash: hash,
                    allHashParams: allHashParams,
                    availableShortIds: shortIds,
                    note: 'Hash contains params but none match configured shortIds',
                    timestamp: Date.now()
                });
            }
            // If no hash parameters match any shortId, clear the state
            // This handles cases where hash parameters were removed
            if (this.state.initialQueryValue) {
                debugLogger.log('HASH', {
                    event: 'hash-cleared',
                    widgetId: this.props.id,
                    previousShortId: this.state.initialQueryValue.shortId,
                    previousValue: this.state.initialQueryValue.value,
                    reason: 'no-matching-hash-params',
                    allHashParams: allHashParams,
                    timestamp: Date.now()
                });
                this.setState({
                    initialQueryValue: undefined
                });
            }
        };
    }
    componentDidMount() {
        this.checkQueryStringForShortIds();
        // Listen for hash changes to detect when hash parameters are updated
        // This is needed when HelperSimple opens the widget with a hash parameter
        // or when hash parameters change while the widget is already mounted
        window.addEventListener('hashchange', this.checkQueryStringForShortIds);
        // Set up visibility detection
        this.setupVisibilityDetection();
        // Listen for selection changes from query-result
        window.addEventListener(_selection_utils__WEBPACK_IMPORTED_MODULE_14__.QUERYSIMPLE_SELECTION_EVENT, this.handleSelectionChange);
        // Listen for restore requests when identify popup closes
        window.addEventListener(RESTORE_ON_IDENTIFY_CLOSE_EVENT, this.handleRestoreOnIdentifyClose);
        // Notify HelperSimple that this widget is now open
        const openEvent = new CustomEvent(QUERYSIMPLE_WIDGET_STATE_EVENT, {
            detail: {
                widgetId: this.props.id,
                isOpen: true
            },
            bubbles: true,
            cancelable: true
        });
        window.dispatchEvent(openEvent);
        debugLogger.log('WIDGET-STATE', {
            event: 'widget-opened',
            widgetId: this.props.id,
            isOpen: true,
            timestamp: new Date().toISOString()
        });
        // Also check after a short delay to catch cases where hash was already present
        // when widget was opened (e.g., by HelperSimple opening the widget)
        setTimeout(() => {
            this.checkQueryStringForShortIds();
        }, 100);
        // Graphics layer will be initialized when map view becomes available via JimuMapViewComponent
    }
    componentWillUnmount() {
        // Clean up hashchange listener
        window.removeEventListener('hashchange', this.checkQueryStringForShortIds);
        // Clean up selection change listener
        window.removeEventListener(_selection_utils__WEBPACK_IMPORTED_MODULE_14__.QUERYSIMPLE_SELECTION_EVENT, this.handleSelectionChange);
        // Clean up restore on identify close listener
        window.removeEventListener(RESTORE_ON_IDENTIFY_CLOSE_EVENT, this.handleRestoreOnIdentifyClose);
        // Clean up visibility detection
        this.cleanupVisibilityDetection();
        // Clean up graphics layer
        this.cleanupGraphicsLayer();
        // Notify HelperSimple that this widget is now closed
        const closeEvent = new CustomEvent(QUERYSIMPLE_WIDGET_STATE_EVENT, {
            detail: {
                widgetId: this.props.id,
                isOpen: false
            },
            bubbles: true,
            cancelable: true
        });
        window.dispatchEvent(closeEvent);
        debugLogger.log('WIDGET-STATE', {
            event: 'widget-closed',
            widgetId: this.props.id,
            isOpen: false,
            timestamp: new Date().toISOString()
        });
    }
    componentDidUpdate(prevProps) {
        if (prevProps.config.queryItems !== this.props.config.queryItems) {
            this.checkQueryStringForShortIds();
        }
        // Clean up graphics layer if config changed to disabled
        if (prevProps.config.useGraphicsLayerForHighlight !== this.props.config.useGraphicsLayerForHighlight) {
            if (!this.props.config.useGraphicsLayerForHighlight) {
                this.cleanupGraphicsLayer();
            }
            // If enabled, initialization will happen when map view becomes available via JimuMapViewComponent
        }
    }
    render() {
        var _a, _b, _c, _d, _e, _f, _g, _h, _j;
        const { config, id, icon, label, layoutId, layoutItemId, controllerWidgetId } = this.props;
        const widgetLabel = this.props.intl.formatMessage({
            id: '_widgetLabel',
            defaultMessage: _translations_default__WEBPACK_IMPORTED_MODULE_4__["default"]._widgetLabel
        });
        if (!((_a = config.queryItems) === null || _a === void 0 ? void 0 : _a.length)) {
            return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.WidgetPlaceholder, { icon: iconMap.iconQuery, widgetId: this.props.id, name: widgetLabel });
        }
        if (config.arrangeType === _config__WEBPACK_IMPORTED_MODULE_3__.QueryArrangeType.Popper && !controllerWidgetId) {
            return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_widget_context__WEBPACK_IMPORTED_MODULE_11__.QueryWidgetContext.Provider, { value: `${layoutId}:${layoutItemId}`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list_popper_wrapper__WEBPACK_IMPORTED_MODULE_10__.TaskListPopperWrapper, { id: 0, icon: icon, popperTitle: label, minSize: (_c = (_b = config.sizeMap) === null || _b === void 0 ? void 0 : _b.arrangementIconPopper) === null || _c === void 0 ? void 0 : _c.minSize, defaultSize: (_e = (_d = config.sizeMap) === null || _d === void 0 ? void 0 : _d.arrangementIconPopper) === null || _e === void 0 ? void 0 : _e.defaultSize, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list__WEBPACK_IMPORTED_MODULE_8__.QueryTaskList, { widgetId: id, isInPopper: true, queryItems: config.queryItems, defaultPageSize: config.defaultPageSize, className: 'pb-4', initialQueryValue: this.state.initialQueryValue, onHashParameterUsed: this.handleHashParameterUsed, resultsMode: this.state.resultsMode, onResultsModeChange: this.handleResultsModeChange, accumulatedRecords: this.state.accumulatedRecords, onAccumulatedRecordsChange: this.handleAccumulatedRecordsChange, useGraphicsLayerForHighlight: config.useGraphicsLayerForHighlight, graphicsLayer: this.graphicsLayerRef.current || undefined, mapView: this.mapViewRef.current || undefined, onInitializeGraphicsLayer: this.initializeGraphicsLayerFromOutputDS, onClearGraphicsLayer: this.clearGraphicsLayerIfExists, activeTab: this.state.activeTab, onTabChange: this.handleTabChange }) }) }));
        }
        if (config.arrangeType === _config__WEBPACK_IMPORTED_MODULE_3__.QueryArrangeType.Inline && !controllerWidgetId) {
            return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_widget_context__WEBPACK_IMPORTED_MODULE_11__.QueryWidgetContext.Provider, { value: `${layoutId}:${layoutItemId}`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list_inline__WEBPACK_IMPORTED_MODULE_9__.TaskListInline, { widgetId: id, widgetLabel: label, wrap: config.arrangeWrap, queryItems: config.queryItems, minSize: (_g = (_f = config.sizeMap) === null || _f === void 0 ? void 0 : _f.arrangementIconPopper) === null || _g === void 0 ? void 0 : _g.minSize, defaultSize: (_j = (_h = config.sizeMap) === null || _h === void 0 ? void 0 : _h.arrangementIconPopper) === null || _j === void 0 ? void 0 : _j.defaultSize, defaultPageSize: config.defaultPageSize, initialQueryValue: this.state.initialQueryValue, onHashParameterUsed: this.handleHashParameterUsed }) }));
        }
        return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Paper, { ref: this.widgetRef, variant: 'flat', className: 'jimu-widget runtime-query', "data-widgetid": id, css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
        display: flex;
        flex-direction: column;
        height: 100%;
      `, children: [config.useGraphicsLayerForHighlight && config.highlightMapWidgetId && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_arcgis__WEBPACK_IMPORTED_MODULE_6__.JimuMapViewComponent, { useMapWidgetId: config.highlightMapWidgetId, onActiveViewChange: this.handleJimuMapViewChanged })), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "widget-header", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
          padding: 6px 16px;
          border-bottom: 1px solid var(--sys-color-divider-secondary);
          background-color: var(--sys-color-surface);
        `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h3", { className: "widget-title", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
            margin: 0;
            font-size: 1rem;
            font-weight: 600;
            color: var(--sys-color-text-primary);
          `, children: label || widgetLabel }) }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
          flex: 1;
          display: flex;
          flex-direction: column;
          overflow: hidden;
        `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
            flex: 1;
            overflow: auto;
          `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_widget_context__WEBPACK_IMPORTED_MODULE_11__.QueryWidgetContext.Provider, { value: `${layoutId}:${layoutItemId}`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list__WEBPACK_IMPORTED_MODULE_8__.QueryTaskList, { widgetId: id, queryItems: config.queryItems, defaultPageSize: config.defaultPageSize, initialQueryValue: this.state.initialQueryValue, onHashParameterUsed: this.handleHashParameterUsed, resultsMode: this.state.resultsMode, onResultsModeChange: this.handleResultsModeChange, accumulatedRecords: this.state.accumulatedRecords, onAccumulatedRecordsChange: this.handleAccumulatedRecordsChange, useGraphicsLayerForHighlight: config.useGraphicsLayerForHighlight, graphicsLayer: this.graphicsLayerRef.current || undefined, mapView: this.mapViewRef.current || undefined, onInitializeGraphicsLayer: this.initializeGraphicsLayerFromOutputDS, onClearGraphicsLayer: this.clearGraphicsLayerIfExists, activeTab: this.state.activeTab, onTabChange: this.handleTabChange }) }) }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
            padding: 4px 12px;
            border-top: 1px solid var(--sys-color-divider-secondary);
            background-color: var(--sys-color-surface-paper);
            flex-shrink: 0;
            text-align: center;
          `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              font-size: 0.75rem;
              color: var(--sys-color-text-tertiary);
              font-weight: 400;
              letter-spacing: 0.025em;
              display: inline-flex;
              align-items: center;
              gap: 4px;
            `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("svg", { width: "14", height: "14", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                  flex-shrink: 0;
                  opacity: 0.6;
                `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("polyline", { points: "16 18 22 12 16 6" }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("polyline", { points: "8 6 2 12 8 18" })] }), "QuerySimple by MapSimple", (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                margin-left: 6px;
                opacity: 0.5;
                font-size: 0.7rem;
              `, children: ["v", _version__WEBPACK_IMPORTED_MODULE_15__.WIDGET_VERSION] })] }) })] })] }));
    }
}
Widget.versionManager = _version_manager__WEBPACK_IMPORTED_MODULE_7__.versionManager;
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Widget);
function __set_webpack_public_path__(url) { __webpack_require__.p = url; }

})();

/******/ 	return __webpack_exports__;
/******/ })()

			);
		}
	};
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9xdWVyeS1zaW1wbGUvZGlzdC9ydW50aW1lL3dpZGdldC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUE2QztBQUVVO0FBRWhELE1BQU0sVUFBVSxHQUFHLENBQUMsS0FBd0IsRUFBRSxFQUFFO0lBQ3JELE1BQU0sR0FBRyxHQUFHLE1BQU0sQ0FBQyxHQUFHO0lBQ3RCLE1BQU0sRUFBRSxTQUFTLEtBQWdCLEtBQUssRUFBaEIsTUFBTSxVQUFLLEtBQUssRUFBaEMsYUFBd0IsQ0FBUTtJQUV0QyxNQUFNLE9BQU8sR0FBRyxxREFBVSxDQUFDLCtCQUErQixFQUFFLFNBQVMsQ0FBQztJQUN0RSxJQUFJLENBQUMsR0FBRztRQUFFLE9BQU8sdUZBQUssU0FBUyxFQUFFLE9BQU8sSUFBTSxNQUFhLEVBQUk7SUFDL0QsT0FBTyxnRUFBQyxHQUFHLGtCQUFDLFNBQVMsRUFBRSxPQUFPLEVBQUUsR0FBRyxFQUFFLHlFQUFHLElBQU0sTUFBTSxFQUFJO0FBQzFELENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDWDRDO0FBRVc7QUFFakQsTUFBTSxXQUFXLEdBQUcsQ0FBQyxLQUF3QixFQUFFLEVBQUU7SUFDdEQsTUFBTSxHQUFHLEdBQUcsTUFBTSxDQUFDLEdBQUc7SUFDdEIsTUFBTSxFQUFFLFNBQVMsS0FBZ0IsS0FBSyxFQUFoQixNQUFNLFVBQUssS0FBSyxFQUFoQyxhQUF3QixDQUFRO0lBRXRDLE1BQU0sT0FBTyxHQUFHLHFEQUFVLENBQUMsK0JBQStCLEVBQUUsU0FBUyxDQUFDO0lBQ3RFLElBQUksQ0FBQyxHQUFHO1FBQUUsT0FBTyx1RkFBSyxTQUFTLEVBQUUsT0FBTyxJQUFNLE1BQWEsRUFBSTtJQUMvRCxPQUFPLGdFQUFDLEdBQUcsa0JBQUMsU0FBUyxFQUFFLE9BQU8sRUFBRSxHQUFHLEVBQUUsMEVBQUcsSUFBTSxNQUFNLEVBQUk7QUFDMUQsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNYNEM7QUFFa0I7QUFFeEQsTUFBTSxpQkFBaUIsR0FBRyxDQUFDLEtBQXdCLEVBQUUsRUFBRTtJQUM1RCxNQUFNLEdBQUcsR0FBRyxNQUFNLENBQUMsR0FBRztJQUN0QixNQUFNLEVBQUUsU0FBUyxLQUFnQixLQUFLLEVBQWhCLE1BQU0sVUFBSyxLQUFLLEVBQWhDLGFBQXdCLENBQVE7SUFFdEMsTUFBTSxPQUFPLEdBQUcscURBQVUsQ0FBQywrQkFBK0IsRUFBRSxTQUFTLENBQUM7SUFDdEUsSUFBSSxDQUFDLEdBQUc7UUFBRSxPQUFPLHVGQUFLLFNBQVMsRUFBRSxPQUFPLElBQU0sTUFBYSxFQUFJO0lBQy9ELE9BQU8sZ0VBQUMsR0FBRyxrQkFBQyxTQUFTLEVBQUUsT0FBTyxFQUFFLEdBQUcsRUFBRSxpRkFBRyxJQUFNLE1BQU0sRUFBSTtBQUMxRCxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ1g0QztBQUVvQjtBQUUxRCxNQUFNLG1CQUFtQixHQUFHLENBQUMsS0FBd0IsRUFBRSxFQUFFO0lBQzlELE1BQU0sR0FBRyxHQUFHLE1BQU0sQ0FBQyxHQUFHO0lBQ3RCLE1BQU0sRUFBRSxTQUFTLEtBQWdCLEtBQUssRUFBaEIsTUFBTSxVQUFLLEtBQUssRUFBaEMsYUFBd0IsQ0FBUTtJQUV0QyxNQUFNLE9BQU8sR0FBRyxxREFBVSxDQUFDLCtCQUErQixFQUFFLFNBQVMsQ0FBQztJQUN0RSxJQUFJLENBQUMsR0FBRztRQUFFLE9BQU8sdUZBQUssU0FBUyxFQUFFLE9BQU8sSUFBTSxNQUFhLEVBQUk7SUFDL0QsT0FBTyxnRUFBQyxHQUFHLGtCQUFDLFNBQVMsRUFBRSxPQUFPLEVBQUUsR0FBRyxFQUFFLG1GQUFHLElBQU0sTUFBTSxFQUFJO0FBQzFELENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDWDRDO0FBRWtCO0FBRXhELE1BQU0saUJBQWlCLEdBQUcsQ0FBQyxLQUF3QixFQUFFLEVBQUU7SUFDNUQsTUFBTSxHQUFHLEdBQUcsTUFBTSxDQUFDLEdBQUc7SUFDdEIsTUFBTSxFQUFFLFNBQVMsS0FBZ0IsS0FBSyxFQUFoQixNQUFNLFVBQUssS0FBSyxFQUFoQyxhQUF3QixDQUFRO0lBRXRDLE1BQU0sT0FBTyxHQUFHLHFEQUFVLENBQUMsK0JBQStCLEVBQUUsU0FBUyxDQUFDO0lBQ3RFLElBQUksQ0FBQyxHQUFHO1FBQUUsT0FBTyx1RkFBSyxTQUFTLEVBQUUsT0FBTyxJQUFNLE1BQWEsRUFBSTtJQUMvRCxPQUFPLGdFQUFDLEdBQUcsa0JBQUMsU0FBUyxFQUFFLE9BQU8sRUFBRSxHQUFHLEVBQUUsaUZBQUcsSUFBTSxNQUFNLEVBQUk7QUFDMUQsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNYNEM7QUFFUTtBQUU5QyxNQUFNLGFBQWEsR0FBRyxDQUFDLEtBQXdCLEVBQUUsRUFBRTtJQUN4RCxNQUFNLEdBQUcsR0FBRyxNQUFNLENBQUMsR0FBRztJQUN0QixNQUFNLEVBQUUsU0FBUyxLQUFnQixLQUFLLEVBQWhCLE1BQU0sVUFBSyxLQUFLLEVBQWhDLGFBQXdCLENBQVE7SUFFdEMsTUFBTSxPQUFPLEdBQUcscURBQVUsQ0FBQywrQkFBK0IsRUFBRSxTQUFTLENBQUM7SUFDdEUsSUFBSSxDQUFDLEdBQUc7UUFBRSxPQUFPLHVGQUFLLFNBQVMsRUFBRSxPQUFPLElBQU0sTUFBYSxFQUFJO0lBQy9ELE9BQU8sZ0VBQUMsR0FBRyxrQkFBQyxTQUFTLEVBQUUsT0FBTyxFQUFFLEdBQUcsRUFBRSx1RUFBRyxJQUFNLE1BQU0sRUFBSTtBQUMxRCxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ1g0QztBQUVVO0FBRWhELE1BQU0sWUFBWSxHQUFHLENBQUMsS0FBd0IsRUFBRSxFQUFFO0lBQ3ZELE1BQU0sR0FBRyxHQUFHLE1BQU0sQ0FBQyxHQUFHO0lBQ3RCLE1BQU0sRUFBRSxTQUFTLEtBQWdCLEtBQUssRUFBaEIsTUFBTSxVQUFLLEtBQUssRUFBaEMsYUFBd0IsQ0FBUTtJQUV0QyxNQUFNLE9BQU8sR0FBRyxxREFBVSxDQUFDLCtCQUErQixFQUFFLFNBQVMsQ0FBQztJQUN0RSxJQUFJLENBQUMsR0FBRztRQUFFLE9BQU8sdUZBQUssU0FBUyxFQUFFLE9BQU8sSUFBTSxNQUFhLEVBQUk7SUFDL0QsT0FBTyxnRUFBQyxHQUFHLGtCQUFDLFNBQVMsRUFBRSxPQUFPLEVBQUUsR0FBRyxFQUFFLHlFQUFHLElBQU0sTUFBTSxFQUFJO0FBQzFELENBQUM7Ozs7Ozs7Ozs7O0FDWEQsdUo7Ozs7Ozs7Ozs7QUNBQSxzSjs7Ozs7Ozs7OztBQ0FBLHFSOzs7Ozs7Ozs7O0FDQUEscVU7Ozs7Ozs7Ozs7QUNBQSx5Ujs7Ozs7Ozs7OztBQ0FBLDBSOzs7Ozs7Ozs7O0FDQUEsb1Y7Ozs7Ozs7Ozs7QUNBQSw2Uzs7Ozs7Ozs7OztBQ0FBLHllOzs7Ozs7Ozs7O0FDQUEsOFc7Ozs7Ozs7Ozs7QUNBQSxxWjs7Ozs7Ozs7OztBQ0FBLG1hOzs7Ozs7Ozs7O0FDQUEsOFo7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNJQSxJQUFZLGNBTVg7QUFORCxXQUFZLGNBQWM7SUFDeEIsaUNBQWU7SUFDZix1Q0FBcUI7SUFDckIscUNBQW1CO0lBQ25CLHlDQUF1QjtJQUN2QixtQ0FBaUI7QUFDbkIsQ0FBQyxFQU5XLGNBQWMsS0FBZCxjQUFjLFFBTXpCO0FBRUQsSUFBWSxhQU1YO0FBTkQsV0FBWSxhQUFhO0lBQ3ZCLCtDQUE4QjtJQUM5Qiw0REFBMkM7SUFDM0Msc0VBQXFEO0lBQ3JELGtFQUFpRDtJQUNqRCw2REFBNEM7QUFDOUMsQ0FBQyxFQU5XLGFBQWEsS0FBYixhQUFhLFFBTXhCO0FBUUQsSUFBWSxnQkFJWDtBQUpELFdBQVksZ0JBQWdCO0lBQzFCLG1DQUFlO0lBQ2YscUNBQWlCO0lBQ2pCLHFDQUFpQjtBQUNuQixDQUFDLEVBSlcsZ0JBQWdCLEtBQWhCLGdCQUFnQixRQUkzQjtBQUVELElBQVksaUJBSVg7QUFKRCxXQUFZLGlCQUFpQjtJQUMzQiwwREFBcUM7SUFDckMsZ0VBQTJDO0lBQzNDLDhCQUFTO0FBQ1gsQ0FBQyxFQUpXLGlCQUFpQixLQUFqQixpQkFBaUIsUUFJNUI7QUFFRCxJQUFZLGVBU1g7QUFURCxXQUFZLGVBQWU7SUFDekIsMkNBQXdCO0lBQ3hCLHVDQUFvQjtJQUNwQixvQ0FBaUI7SUFDakIsNERBQXlDO0lBQ3pDLHNEQUFtQztJQUNuQyx1Q0FBb0I7SUFDcEIsb0NBQWlCO0lBQ2pCLG9DQUFpQjtBQUNuQixDQUFDLEVBVFcsZUFBZSxLQUFmLGVBQWUsUUFTMUI7QUFXTSxNQUFNLGdDQUFnQyxHQUEyQztJQUN0RixDQUFDLGVBQWUsQ0FBQyxTQUFTLENBQUMsRUFBRSwwQkFBMEI7SUFDdkQsQ0FBQyxlQUFlLENBQUMsT0FBTyxDQUFDLEVBQUUsd0JBQXdCO0lBQ25ELENBQUMsZUFBZSxDQUFDLEtBQUssQ0FBQyxFQUFFLHVCQUF1QjtJQUNoRCxDQUFDLGVBQWUsQ0FBQyxpQkFBaUIsQ0FBQyxFQUFFLGtDQUFrQztJQUN2RSxDQUFDLGVBQWUsQ0FBQyxjQUFjLENBQUMsRUFBRSwrQkFBK0I7SUFDakUsQ0FBQyxlQUFlLENBQUMsT0FBTyxDQUFDLEVBQUUsd0JBQXdCO0lBQ25ELENBQUMsZUFBZSxDQUFDLEtBQUssQ0FBQyxFQUFFLHVCQUF1QjtJQUNoRCxDQUFDLGVBQWUsQ0FBQyxNQUFNLENBQUMsRUFBRSxzQkFBc0I7Q0FDakQ7QUFFRCxJQUFZLFFBTVg7QUFORCxXQUFZLFFBQVE7SUFDbEIsMkJBQWU7SUFDZixxQ0FBeUI7SUFDekIseUJBQWE7SUFDYiw2QkFBaUI7SUFDakIsMkNBQStCO0FBQ2pDLENBQUMsRUFOVyxRQUFRLEtBQVIsUUFBUSxRQU1uQjtBQUVNLE1BQU0sb0JBQW9CLEdBQTZCO0lBQzVELENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxFQUFFLHdCQUF3QjtJQUMxQyxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsRUFBRSxzQkFBc0I7SUFDN0MsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEVBQUUsaUJBQWlCO0lBQ2xDLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxFQUFFLGtCQUFrQjtJQUNyQyxDQUFDLFFBQVEsQ0FBQyxhQUFhLENBQUMsRUFBRSx5QkFBeUI7Q0FDcEQ7QUFFRCxJQUFZLGFBR1g7QUFIRCxXQUFZLGFBQWE7SUFDdkIsMENBQXlCO0lBQ3pCLHNDQUFxQjtBQUN2QixDQUFDLEVBSFcsYUFBYSxLQUFiLGFBQWEsUUFHeEI7QUFFRCxJQUFZLFVBSVg7QUFKRCxXQUFZLFVBQVU7SUFDcEIscUNBQXVCO0lBQ3ZCLG1DQUFxQjtJQUNyQiwrQkFBaUI7QUFDbkIsQ0FBQyxFQUpXLFVBQVUsS0FBVixVQUFVLFFBSXJCO0FBRUQsSUFBWSxVQUdYO0FBSEQsV0FBWSxVQUFVO0lBQ3BCLDJDQUE2QjtJQUM3QixtREFBcUM7QUFDdkMsQ0FBQyxFQUhXLFVBQVUsS0FBVixVQUFVLFFBR3JCO0FBRUQsSUFBWSxhQUdYO0FBSEQsV0FBWSxhQUFhO0lBQ3ZCLDRCQUFXO0lBQ1gsOEJBQWE7QUFDZixDQUFDLEVBSFcsYUFBYSxLQUFiLGFBQWEsUUFHeEI7QUFFRCxJQUFZLGdCQUdYO0FBSEQsV0FBWSxnQkFBZ0I7SUFDMUIscUNBQWlCO0lBQ2pCLHlDQUFxQjtBQUN2QixDQUFDLEVBSFcsZ0JBQWdCLEtBQWhCLGdCQUFnQixRQUczQjtBQU9ELElBQVksVUFHWDtBQUhELFdBQVksVUFBVTtJQUNwQiw2Q0FBK0I7SUFDL0IsMkNBQTZCO0FBQy9CLENBQUMsRUFIVyxVQUFVLEtBQVYsVUFBVSxRQUdyQjs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3ZIRDs7Ozs7OztHQU9HOzs7Ozs7Ozs7O0FBRTJIO0FBQzFEO0FBQ0s7QUFFekUsTUFBTSxXQUFXLEdBQUcsd0ZBQTRCLEVBQUU7QUFJbEQ7Ozs7Ozs7Ozs7OztHQVlHO0FBQ0ksU0FBUyxvQkFBb0IsQ0FDbEMsUUFBZ0IsRUFDaEIsUUFBb0IsRUFDcEIsSUFBZSxFQUNmLFNBQXlCLEVBQ3pCLHFCQUErQjtJQUUvQixPQUFPO1FBQ0wsRUFBRSxFQUFFLEdBQUcsUUFBUSxXQUFXO1FBQzFCLElBQUksRUFBRSxVQUFVO1FBQ2hCLEtBQUssRUFBRSxJQUFJLENBQUMsYUFBYSxDQUFDLEVBQUUsRUFBRSxFQUFFLFVBQVUsRUFBRSxjQUFjLEVBQUUsWUFBWSxFQUFFLENBQUM7UUFDM0Usb0VBQW9FO1FBQ3BFLElBQUksRUFBRSxrS0FBMEQsSUFBSSxtQkFBTyxDQUFDLGdJQUF5QyxDQUFDO1FBQ3RILG1HQUFtRztRQUNuRyxLQUFLLEVBQUUsQ0FBQyxHQUFHO1FBQ1gsUUFBUTtRQUNSLElBQUk7UUFDSixxQkFBcUIsRUFBRSxJQUFJO1FBRTNCOzs7V0FHRztRQUNILFdBQVcsRUFBRSxDQUFPLFFBQXlCLEVBQUUsU0FBb0IsRUFBRSxjQUFzQixFQUFvQixFQUFFO1lBQy9HLFdBQVcsQ0FBQyxHQUFHLENBQUMsYUFBYSxFQUFFO2dCQUM3QixNQUFNLEVBQUUsc0JBQXNCO2dCQUM5QixRQUFRO2dCQUNSLGNBQWM7Z0JBQ2QsU0FBUztnQkFDVCxhQUFhLEVBQUUsU0FBUSxhQUFSLFFBQVEsdUJBQVIsUUFBUSxDQUFFLE1BQU0sS0FBSSxDQUFDO2dCQUNwQyxXQUFXLEVBQUUsQ0FBQyxDQUFDLFFBQVE7YUFDeEIsQ0FBQztZQUVGLHFDQUFxQztZQUNyQyxJQUFJLFNBQVMsS0FBSyxnREFBUyxDQUFDLE9BQU8sRUFBRSxDQUFDO2dCQUNwQyxXQUFXLENBQUMsR0FBRyxDQUFDLGFBQWEsRUFBRTtvQkFDN0IsTUFBTSxFQUFFLHNCQUFzQjtvQkFDOUIsTUFBTSxFQUFFLEtBQUs7b0JBQ2IsTUFBTSxFQUFFLG1CQUFtQjtpQkFDNUIsQ0FBQztnQkFDRixPQUFPLEtBQUs7WUFDZCxDQUFDO1lBRUQsMENBQTBDO1lBQzFDLElBQUksQ0FBQyxRQUFRLElBQUksUUFBUSxDQUFDLE1BQU0sS0FBSyxDQUFDLEVBQUUsQ0FBQztnQkFDdkMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxhQUFhLEVBQUU7b0JBQzdCLE1BQU0sRUFBRSxzQkFBc0I7b0JBQzlCLE1BQU0sRUFBRSxLQUFLO29CQUNiLE1BQU0sRUFBRSxjQUFjO2lCQUN2QixDQUFDO2dCQUNGLE9BQU8sS0FBSztZQUNkLENBQUM7WUFFRCxrREFBa0Q7WUFDbEQsTUFBTSxVQUFVLEdBQUcsUUFBUSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxPQUFPLElBQUksRUFBRSxDQUFDLE9BQU8sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO1lBQzNFLE1BQU0sU0FBUyxHQUFHLFVBQVUsSUFBSSxDQUFDLENBQUMsUUFBUTtZQUUxQyxXQUFXLENBQUMsR0FBRyxDQUFDLGFBQWEsRUFBRTtnQkFDN0IsTUFBTSxFQUFFLHNCQUFzQjtnQkFDOUIsTUFBTSxFQUFFLFNBQVM7Z0JBQ2pCLFVBQVU7Z0JBQ1YsWUFBWSxFQUFFLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLEVBQUUsRUFBRSxFQUFFLEVBQUUsV0FBQyxVQUFHLEdBQUcsQ0FBQyxTQUFFLENBQUMsT0FBTywwQ0FBRSxNQUFNLEtBQUksQ0FBQyxDQUFDLEtBQUUsQ0FBQyxDQUFDO2FBQy9FLENBQUM7WUFFRixPQUFPLFNBQVM7UUFDbEIsQ0FBQztRQUVEOztXQUVHO1FBQ0gsU0FBUyxFQUFFLENBQU8sUUFBeUIsRUFBRSxTQUFvQixFQUFFLGNBQXNCLEVBQW9CLEVBQUU7WUFDN0csV0FBVyxDQUFDLEdBQUcsQ0FBQyxhQUFhLEVBQUU7Z0JBQzdCLE1BQU0sRUFBRSxvQkFBb0I7Z0JBQzVCLFFBQVE7Z0JBQ1IsY0FBYztnQkFDZCxTQUFTO2dCQUNULGFBQWEsRUFBRSxTQUFRLGFBQVIsUUFBUSx1QkFBUixRQUFRLENBQUUsTUFBTSxLQUFJLENBQUM7Z0JBQ3BDLFdBQVcsRUFBRSxDQUFDLENBQUMsUUFBUTthQUN4QixDQUFDO1lBRUYsSUFBSSxDQUFDLFFBQVEsSUFBSSxTQUFTLEtBQUssZ0RBQVMsQ0FBQyxPQUFPLEVBQUUsQ0FBQztnQkFDakQsV0FBVyxDQUFDLEdBQUcsQ0FBQyxhQUFhLEVBQUU7b0JBQzdCLE1BQU0sRUFBRSxvQkFBb0I7b0JBQzVCLE1BQU0sRUFBRSxLQUFLO29CQUNiLE1BQU0sRUFBRSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxtQkFBbUI7aUJBQ3hELENBQUM7Z0JBQ0YsT0FBTyxLQUFLO1lBQ2QsQ0FBQztZQUVELHlDQUF5QztZQUN6QyxNQUFNLFVBQVUsR0FBd0IsRUFBRTtZQUMxQyxRQUFRLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxFQUFFO2dCQUN6QixJQUFJLE9BQU8sQ0FBQyxPQUFPLElBQUksT0FBTyxDQUFDLE9BQU8sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUM7b0JBQ2xELHlDQUF5QztvQkFDekMsTUFBTSxjQUFjLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQzNDLENBQUMsTUFBTSxFQUErQixFQUFFO3dCQUN0QyxPQUFPLE1BQU0sSUFBSSxPQUFRLE1BQTRCLENBQUMsV0FBVyxLQUFLLFVBQVU7b0JBQ2xGLENBQUMsQ0FDRjtvQkFDRCxVQUFVLENBQUMsSUFBSSxDQUFDLEdBQUcsY0FBYyxDQUFDO2dCQUNwQyxDQUFDO1lBQ0gsQ0FBQyxDQUFDO1lBRUYsSUFBSSxVQUFVLENBQUMsTUFBTSxLQUFLLENBQUMsRUFBRSxDQUFDO2dCQUM1QixXQUFXLENBQUMsR0FBRyxDQUFDLGFBQWEsRUFBRTtvQkFDN0IsTUFBTSxFQUFFLG9CQUFvQjtvQkFDNUIsTUFBTSxFQUFFLEtBQUs7b0JBQ2IsTUFBTSxFQUFFLDBCQUEwQjtpQkFDbkMsQ0FBQztnQkFDRixPQUFPLEtBQUs7WUFDZCxDQUFDO1lBRUQsaUJBQWlCO1lBQ2pCLE1BQU0sU0FBUyxHQUFHLFVBQVUsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsS0FBSyxFQUFFLENBQUM7WUFFMUQsV0FBVyxDQUFDLEdBQUcsQ0FBQyxhQUFhLEVBQUU7Z0JBQzdCLE1BQU0sRUFBRSxvQkFBb0I7Z0JBQzVCLFlBQVksRUFBRSxVQUFVLENBQUMsTUFBTTtnQkFDL0IsU0FBUyxFQUFFLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLG1CQUFtQjtnQkFDdEQsVUFBVSxFQUFFLFFBQVEsQ0FBQyxFQUFFO2FBQ3hCLENBQUM7WUFFRixpR0FBaUc7WUFDakcsa0dBQWtHO1lBQ2xHLElBQUksQ0FBQztnQkFDSCxpRkFBdUIsQ0FBQyxRQUFRLEVBQUUsUUFBUSxFQUFFLFNBQVMsRUFBRSxVQUFVLEVBQUUsSUFBSSxDQUFDO2dCQUV4RSxzR0FBc0c7Z0JBQ3RHLE1BQU0sVUFBVSxHQUFHLHFCQUFxQixLQUFLLFNBQVM7b0JBQ3BELENBQUMsQ0FBQyxxQkFBcUI7b0JBQ3ZCLENBQUMsQ0FBQyxDQUFDLFVBQVMsYUFBVCxTQUFTLHVCQUFULFNBQVMsQ0FBRSxjQUFjLE1BQUssS0FBSyxDQUFDO2dCQUV6QyxJQUFJLFVBQVUsSUFBSSxVQUFVLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRSxDQUFDO29CQUN4QyxNQUFNLFdBQVcsR0FBa0I7d0JBQ2pDLFVBQVUsRUFBRSxRQUFRO3dCQUNwQixPQUFPLEVBQUUsVUFBVTt3QkFDbkIsSUFBSSxFQUFFLFFBQVEsQ0FBQyxRQUFRLEVBQUU7cUJBQzFCO29CQUVELDZFQUE2RTtvQkFDN0Usd0RBQWlCLENBQUMsV0FBVyxFQUFFLENBQUMsbUJBQW1CLENBQUMsUUFBUSxFQUFFLENBQUMsV0FBVyxDQUFDLEVBQUUsZ0RBQVMsQ0FBQyxPQUFPLENBQUM7eUJBQzVGLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxFQUFFO3dCQUN2QixvRUFBb0U7d0JBQ3BFLElBQUksVUFBVSxHQUFzQixJQUFJO3dCQUN4QyxLQUFLLE1BQU0sUUFBUSxJQUFJLGdCQUFnQixFQUFFLENBQUM7NEJBQ3hDLE1BQU0sT0FBTyxHQUFHLGdCQUFnQixDQUFDLFFBQVEsQ0FBQzs0QkFDMUMsVUFBVSxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxNQUFrQixFQUFFLEVBQUUsQ0FDL0MsTUFBTSxDQUFDLElBQUksS0FBSyxlQUFlLElBQUksTUFBTSxDQUFDLEVBQUUsS0FBSyxlQUFlLENBQ2pFLElBQUksSUFBSTs0QkFDVCxJQUFJLFVBQVU7Z0NBQUUsTUFBSzt3QkFDdkIsQ0FBQzt3QkFFRCxJQUFJLFVBQVUsRUFBRSxDQUFDOzRCQUNmLE9BQU8sd0RBQWlCLENBQUMsV0FBVyxFQUFFLENBQUMsaUJBQWlCLENBQUMsVUFBVSxFQUFFLENBQUMsV0FBVyxDQUFDLEVBQUUsZ0RBQVMsQ0FBQyxPQUFPLEVBQUUsUUFBUSxDQUFDO3dCQUNsSCxDQUFDO29CQUNILENBQUMsQ0FBQzt5QkFDRCxLQUFLLENBQUMsS0FBSyxDQUFDLEVBQUU7d0JBQ2IsV0FBVyxDQUFDLEdBQUcsQ0FBQyxhQUFhLEVBQUU7NEJBQzdCLE1BQU0sRUFBRSx5QkFBeUI7NEJBQ2pDLEtBQUssRUFBRSxLQUFLLFlBQVksS0FBSyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDO3lCQUM5RCxDQUFDO29CQUNKLENBQUMsQ0FBQztnQkFDTixDQUFDO2dCQUVELFdBQVcsQ0FBQyxHQUFHLENBQUMsYUFBYSxFQUFFO29CQUM3QixNQUFNLEVBQUUsb0JBQW9CO29CQUM1QixNQUFNLEVBQUUsSUFBSTtvQkFDWixPQUFPLEVBQUUsK0RBQStEO29CQUN4RSxZQUFZLEVBQUUsVUFBVTtpQkFDekIsQ0FBQztnQkFFRixPQUFPLElBQUk7WUFDYixDQUFDO1lBQUMsT0FBTyxLQUFLLEVBQUUsQ0FBQztnQkFDZixXQUFXLENBQUMsR0FBRyxDQUFDLGFBQWEsRUFBRTtvQkFDN0IsTUFBTSxFQUFFLG9CQUFvQjtvQkFDNUIsTUFBTSxFQUFFLEtBQUs7b0JBQ2IsS0FBSyxFQUFFLEtBQUssWUFBWSxLQUFLLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUM7b0JBQzdELFVBQVUsRUFBRSxLQUFLLFlBQVksS0FBSyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxTQUFTO2lCQUM3RCxDQUFDO2dCQUNGLE9BQU8sS0FBSztZQUNkLENBQUM7UUFDSCxDQUFDO1FBRUQ7O1dBRUc7UUFDSCxPQUFPLEVBQUUsR0FBUyxFQUFFO1lBQ2xCLG9CQUFvQjtRQUN0QixDQUFDO0tBQ0Y7QUFDSCxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7OztBQzNOeUQ7QUFHMUQ7Ozs7Ozs7Ozs7OztHQVlHO0FBQ0ksU0FBUyxlQUFlLENBQzdCLFFBQWdCLEVBQ2hCLFFBQXVDLEVBQ3ZDLElBQWUsRUFDZixTQUF5QixFQUN6QixxQkFBK0I7SUFFL0IsK0VBQStFO0lBQy9FLElBQUksUUFBUSxJQUFJLElBQUksRUFBRSxDQUFDO1FBQ3JCLE9BQU8sQ0FBQyx3RUFBb0IsQ0FBQyxRQUFRLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxTQUFTLEVBQUUscUJBQXFCLENBQUMsQ0FBQztJQUMzRixDQUFDO0lBRUQsT0FBTyxFQUFFO0FBQ1gsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNyQmdCO0FBRVYsTUFBTSxrQkFBa0IsR0FBMkI7SUFDeEQsSUFBSSxFQUFFLElBQUk7SUFDVixZQUFZLEVBQUUsSUFBSTtJQUNsQixVQUFVLEVBQUUsSUFBSTtJQUNoQixrQkFBa0IsRUFBRSxJQUFJO0lBQ3hCLGdCQUFnQixFQUFFLElBQUk7SUFDdEIsbUJBQW1CLEVBQUUsRUFBRTtJQUN2QixrQkFBa0IsRUFBRSxFQUFFO0lBQ3RCLGlDQUFpQyxFQUFFO1FBQ2pDLG1EQUFjLENBQUMsS0FBSztRQUNwQixtREFBYyxDQUFDLFFBQVE7UUFDdkIsbURBQWMsQ0FBQyxPQUFPO1FBQ3RCLG1EQUFjLENBQUMsU0FBUztRQUN4QixtREFBYyxDQUFDLE1BQU07S0FDdEI7SUFDRCw4QkFBOEIsRUFBRSxLQUFLO0lBQ3JDLGdDQUFnQyxFQUFFLENBQUM7SUFDbkMsNEJBQTRCLEVBQUUsNkNBQVEsQ0FBQyxNQUFNO0lBQzdDLGdCQUFnQixFQUFFLENBQUMsb0RBQWUsQ0FBQyxTQUFTLENBQUM7SUFDN0MsNkJBQTZCLEVBQUUsRUFBRTtJQUNqQywrQkFBK0IsRUFBRSxLQUFLO0lBQ3RDLDJCQUEyQixFQUFFLEtBQUs7SUFDbEMsNkJBQTZCLEVBQUUsQ0FBQztJQUNoQyx5QkFBeUIsRUFBRSw2Q0FBUSxDQUFDLE1BQU07SUFDMUMsbUJBQW1CLEVBQUUsa0RBQWEsQ0FBQyxRQUFRO0lBQzNDLGlCQUFpQixFQUFFLCtDQUFVLENBQUMsU0FBUztJQUN2QyxnQkFBZ0IsRUFBRSwrQ0FBVSxDQUFDLFlBQVk7SUFDekMsZ0JBQWdCLEVBQUUsK0NBQVUsQ0FBQyxhQUFhO0lBQzFDLGtCQUFrQixFQUFFO1FBQ2xCLEtBQUssRUFBRSxDQUFDO1FBQ1IsS0FBSyxFQUFFLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxDQUFDO1FBQzNCLE9BQU8sRUFBRTtZQUNQLEtBQUssRUFBRSxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQztZQUMzQixLQUFLLEVBQUUsY0FBYztZQUNyQixJQUFJLEVBQUUsU0FBUztZQUNmLEtBQUssRUFBRSxDQUFDO1NBQ1Q7UUFDRCxJQUFJLEVBQUUsQ0FBQztRQUNQLEtBQUssRUFBRSxlQUFlO1FBQ3RCLElBQUksRUFBRSxTQUFTO1FBQ2YsT0FBTyxFQUFFLENBQUM7UUFDVixPQUFPLEVBQUUsQ0FBQztLQUNYO0lBQ0QsdUJBQXVCLEVBQUUsS0FBSztJQUM5QixXQUFXLEVBQUUsS0FBSztJQUNsQixXQUFXLEVBQUUsRUFBRTtJQUNmLGNBQWMsRUFBRSxJQUFJO0lBQ3BCLFdBQVcsRUFBRTtRQUNYLDJCQUEyQixFQUFFO1lBQzNCLE9BQU8sRUFBRSxFQUFFLEtBQUssRUFBRSxHQUFHLEVBQUUsTUFBTSxFQUFFLEdBQUcsRUFBRTtZQUNwQyxXQUFXLEVBQUUsRUFBRSxLQUFLLEVBQUUsR0FBRyxFQUFFLE1BQU0sRUFBRSxHQUFHLEVBQUU7U0FDekM7S0FDRjtDQUNGOzs7Ozs7Ozs7OztBQ2hFRCxvaUQ7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNBQSxlQUFlO0FBS0c7QUFDK0Q7QUFDN0M7QUFDZTtBQUNJO0FBUWhELFNBQVMsV0FBVyxDQUFFLEtBQVk7SUFDdkMsTUFBTSxFQUFFLFFBQVEsR0FBRyxDQUFDLEVBQUUsSUFBSSxHQUFHLDZDQUFRLENBQUMsTUFBTSxFQUFFLGNBQWMsRUFBRSxHQUFHLEtBQUs7SUFDdEUsTUFBTSxjQUFjLEdBQUcsNENBQUssQ0FBQyxjQUFjLENBQUMsb0RBQWMsRUFBRSw2REFBYyxDQUFDO0lBQzNFLE1BQU0sQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLEdBQUcsNENBQUssQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDO0lBQzFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLEdBQUcsNENBQUssQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDO0lBQ3RDLE1BQU0sZ0JBQWdCLEdBQUcsNENBQUssQ0FBQyxVQUFVLENBQUMsaUVBQWdCLENBQUM7SUFDM0QsTUFBTSxjQUFjLEdBQUcsNENBQUssQ0FBQyxNQUFNLENBQUMsZ0JBQWdCLENBQUMsV0FBVyxDQUFDO0lBRWpFLDRDQUFLLENBQUMsU0FBUyxDQUFDLEdBQUcsRUFBRTtRQUNuQixJQUFJLE9BQU8sR0FBRyxLQUFLO1FBQ25CLElBQUksUUFBUSxLQUFLLENBQUMsRUFBRSxDQUFDO1lBQ25CLElBQUksQ0FBQyxRQUFRLENBQUM7WUFDZCxPQUFPLEdBQUcsSUFBSTtRQUNoQixDQUFDO1FBQ0QsSUFBSSxJQUFJLEtBQUssQ0FBQyxFQUFFLENBQUM7WUFDZixJQUFJLENBQUMsSUFBSSxDQUFDO1lBQ1YsT0FBTyxHQUFHLElBQUk7UUFDaEIsQ0FBQztRQUNELElBQUksT0FBTyxFQUFFLENBQUM7WUFDWixjQUFjLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQztRQUNoQyxDQUFDO1FBQ0gsdURBQXVEO0lBQ3ZELENBQUMsRUFBRSxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMsQ0FBQztJQUVwQiw0Q0FBSyxDQUFDLFNBQVMsQ0FBQyxHQUFHLEVBQUU7UUFDbkIsSUFBSSxnQkFBZ0IsQ0FBQyxXQUFXLElBQUksZ0JBQWdCLENBQUMsV0FBVyxLQUFLLGNBQWMsQ0FBQyxPQUFPLEVBQUUsQ0FBQztZQUM1RixjQUFjLENBQUMsT0FBTyxHQUFHLGdCQUFnQixDQUFDLFdBQVc7WUFDckQsSUFBSSxDQUFDLFFBQVEsQ0FBQztZQUNkLElBQUksQ0FBQyxJQUFJLENBQUM7WUFDVixjQUFjLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQztRQUNoQyxDQUFDO0lBQ0gsQ0FBQyxFQUFFLENBQUMsZ0JBQWdCLENBQUMsV0FBVyxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsY0FBYyxDQUFDLENBQUM7SUFFbEUsTUFBTSxvQkFBb0IsR0FBRyw0Q0FBSyxDQUFDLFdBQVcsQ0FBQyxDQUFDLEtBQUssRUFBRSxFQUFFO1FBQ3ZELElBQUksQ0FBQyxLQUFLLENBQUM7SUFDYixDQUFDLEVBQUUsRUFBRSxDQUFDO0lBRU4sTUFBTSxzQkFBc0IsR0FBRyw0Q0FBSyxDQUFDLFdBQVcsQ0FBQyxDQUFDLEtBQUssRUFBRSxFQUFFO1FBQ3pELElBQUksQ0FBQyxLQUFLLENBQUM7UUFDWCxjQUFjLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQztJQUMxQixDQUFDLEVBQUUsQ0FBQyxjQUFjLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFFdkIsTUFBTSxzQkFBc0IsR0FBRyw0Q0FBSyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFO1FBQ3JELElBQUksQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQztRQUNwQixjQUFjLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDO0lBQ25DLENBQUMsRUFBRSxDQUFDLGNBQWMsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUV2QixPQUFPLENBQ0wsaUVBQUMsNENBQUssQ0FBQyxRQUFRLGVBQ2IsZ0VBQUMsaURBQVksa0JBQ0MsY0FBYyxDQUFDLG1CQUFtQixDQUFDLEVBQy9DLFNBQVMsRUFBQyxNQUFNLEVBQ2hCLEtBQUssRUFBRSxDQUFDLEVBQ1IsUUFBUSxFQUFFLG9CQUFvQixFQUM5QixhQUFhLEVBQUUsc0JBQXNCLEdBQ3JDLEVBQ0YsZ0VBQUMsMkNBQU0sa0JBQ08sY0FBYyxDQUFDLE1BQU0sQ0FBQyxFQUNsQyxLQUFLLEVBQUUsQ0FBQyxFQUNSLFFBQVEsRUFBRSxzQkFBc0IsWUFFL0IsTUFBTSxDQUFDLE1BQU0sQ0FBQyw2Q0FBUSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxDQUN0Qyw0RUFBb0IsS0FBSyxFQUFFLEtBQUssWUFDN0IsY0FBYyxDQUFDLFFBQVEsS0FBSyxFQUFFLENBQUMsSUFEckIsS0FBSyxDQUVULENBQ1YsQ0FBQyxHQUNLLElBQ00sQ0FDbEI7QUFDSCxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDdEZELGVBQWU7QUFDZiw4RkFBOEY7QUFDTTtBQUNoRDtBQUNwQjtBQUNpQztBQUNGO0FBQ1U7QUFFekUsTUFBTSxXQUFXLEdBQUcsd0ZBQTRCLEVBQUU7QUFFbEQsSUFBWSxVQUlYO0FBSkQsV0FBWSxVQUFVO0lBQ3BCLGlDQUFtQjtJQUNuQixxQ0FBdUI7SUFDdkIsbUNBQXFCO0FBQ3ZCLENBQUMsRUFKVyxVQUFVLEtBQVYsVUFBVSxRQUlyQjtBQWdCRCxNQUFNLEtBQUssR0FBRyw4Q0FBRzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztDQStCaEI7QUFNRCxNQUFNLFdBQVksU0FBUSw0Q0FBSyxDQUFDLGFBQXdDO0lBS3RFLFlBQWEsS0FBSzs7UUFDaEIsS0FBSyxDQUFDLEtBQUssQ0FBQztRQWdLZCxtQkFBYyxHQUFHLENBQUMsQ0FBQyxFQUFFLEVBQUU7WUFDckIsQ0FBQyxDQUFDLGVBQWUsRUFBRTtZQUNuQixJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUUsV0FBVyxFQUFFLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxXQUFXLEVBQUUsQ0FBQztRQUN6RCxDQUFDO1FBbEtDLE1BQU0sRUFBRSxTQUFTLEdBQUcsS0FBSyxFQUFFLGVBQWUsRUFBRSxHQUFHLElBQUksQ0FBQyxLQUFLO1FBQ3pELE1BQU0sUUFBUSxHQUFHLGlCQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sMENBQUUsVUFBVSwwQ0FBRSxRQUFRLE1BQUksZ0JBQUksQ0FBQyxLQUFLLENBQUMsT0FBTywwQ0FBRSxVQUFVLDBDQUFFLFFBQVEsS0FBSSxTQUFTO1FBQ2xILE1BQU0sa0JBQWtCLEdBQUcsQ0FBQyxTQUFTLElBQUksZUFBZTtRQUV4RCxXQUFXLENBQUMsR0FBRyxDQUFDLGlCQUFpQixFQUFFO1lBQ2pDLEtBQUssRUFBRSx5QkFBeUI7WUFDaEMsUUFBUTtZQUNSLFNBQVM7WUFDVCxlQUFlO1lBQ2Ysa0JBQWtCO1lBQ2xCLFNBQVMsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFO1NBQ3RCLENBQUM7UUFFRixJQUFJLENBQUMsZ0JBQWdCLEdBQUcsNENBQUssQ0FBQyxTQUFTLEVBQUU7UUFDekMsSUFBSSxDQUFDLEtBQUssR0FBRztZQUNYLFdBQVcsRUFBRSxrQkFBa0I7WUFDL0IsVUFBVSxFQUFFLFVBQVUsQ0FBQyxPQUFPO1NBQy9CO0lBQ0gsQ0FBQztJQUVELGlCQUFpQjtRQUNmLElBQUksQ0FBQyxhQUFhLEVBQUU7SUFDdEIsQ0FBQztJQUVELGtCQUFrQixDQUFFLFNBQWdCOztRQUNsQyxJQUFJLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQztZQUNqQixJQUFJLFNBQVMsQ0FBQyxhQUFhLEtBQUssSUFBSSxDQUFDLEtBQUssQ0FBQyxhQUFhO2dCQUN0RCxTQUFTLENBQUMsb0JBQW9CLEtBQUssSUFBSSxDQUFDLEtBQUssQ0FBQyxvQkFBb0I7Z0JBQ2xFLFNBQVMsQ0FBQyxPQUFPLEtBQUssSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUUsQ0FBQztnQkFDM0MsSUFBSSxDQUFDLGNBQWMsRUFBRTtnQkFDckIsSUFBSSxDQUFDLGFBQWEsRUFBRTtZQUN0QixDQUFDO2lCQUFNLENBQUM7Z0JBQ04sSUFBSSxDQUFDLE9BQU8sQ0FBQyxlQUFlLEdBQUcsSUFBSSxDQUFDLGtCQUFrQixFQUFFO1lBQzFELENBQUM7UUFDSCxDQUFDO1FBRUQsK0VBQStFO1FBQy9FLGtFQUFrRTtRQUNsRSxJQUFJLFNBQVMsQ0FBQyxlQUFlLEtBQUssSUFBSSxDQUFDLEtBQUssQ0FBQyxlQUFlLEVBQUUsQ0FBQztZQUM3RCxNQUFNLEVBQUUsU0FBUyxHQUFHLEtBQUssRUFBRSxlQUFlLEVBQUUsR0FBRyxJQUFJLENBQUMsS0FBSztZQUN6RCxNQUFNLFFBQVEsR0FBRyxpQkFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLDBDQUFFLFVBQVUsMENBQUUsUUFBUSxNQUFJLGdCQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sMENBQUUsVUFBVSwwQ0FBRSxRQUFRLEtBQUksU0FBUztZQUVsSCxXQUFXLENBQUMsR0FBRyxDQUFDLGlCQUFpQixFQUFFO2dCQUNqQyxLQUFLLEVBQUUsOEJBQThCO2dCQUNyQyxRQUFRO2dCQUNSLG1CQUFtQixFQUFFLFNBQVMsQ0FBQyxlQUFlO2dCQUM5QyxrQkFBa0IsRUFBRSxlQUFlO2dCQUNuQyxTQUFTO2dCQUNULGtCQUFrQixFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsV0FBVztnQkFDMUMsZUFBZSxFQUFFLFNBQVM7Z0JBQzFCLFNBQVMsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFO2FBQ3RCLENBQUM7WUFFRixJQUFJLFNBQVMsRUFBRSxDQUFDO2dCQUNkLElBQUksQ0FBQyxRQUFRLENBQUMsRUFBRSxXQUFXLEVBQUUsZUFBZSxFQUFFLEVBQUUsR0FBRyxFQUFFO29CQUNuRCxXQUFXLENBQUMsR0FBRyxDQUFDLGlCQUFpQixFQUFFO3dCQUNqQyxLQUFLLEVBQUUsMkJBQTJCO3dCQUNsQyxRQUFRO3dCQUNSLGNBQWMsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLFdBQVc7d0JBQ3RDLFNBQVMsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFO3FCQUN0QixDQUFDO2dCQUNKLENBQUMsQ0FBQztZQUNKLENBQUM7UUFDSCxDQUFDO1FBRUQscURBQXFEO1FBQ3JELE1BQU0sUUFBUSxHQUFHLGlCQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sMENBQUUsVUFBVSwwQ0FBRSxRQUFRLE1BQUksZ0JBQUksQ0FBQyxLQUFLLENBQUMsT0FBTywwQ0FBRSxVQUFVLDBDQUFFLFFBQVEsS0FBSSxTQUFTO1FBQ2xILElBQUksU0FBUyxDQUFDLE9BQU8sS0FBSyxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU87WUFDeEMsU0FBUyxDQUFDLGFBQWEsS0FBSyxJQUFJLENBQUMsS0FBSyxDQUFDLGFBQWE7WUFDcEQsU0FBUyxDQUFDLG9CQUFvQixLQUFLLElBQUksQ0FBQyxLQUFLLENBQUMsb0JBQW9CLEVBQUUsQ0FBQztZQUN2RSxXQUFXLENBQUMsR0FBRyxDQUFDLGlCQUFpQixFQUFFO2dCQUNqQyxLQUFLLEVBQUUsb0NBQW9DO2dCQUMzQyxRQUFRO2dCQUNSLGNBQWMsRUFBRSxTQUFTLENBQUMsT0FBTyxLQUFLLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTztnQkFDeEQsb0JBQW9CLEVBQUUsU0FBUyxDQUFDLGFBQWEsS0FBSyxJQUFJLENBQUMsS0FBSyxDQUFDLGFBQWE7Z0JBQzFFLDJCQUEyQixFQUFFLFNBQVMsQ0FBQyxvQkFBb0IsS0FBSyxJQUFJLENBQUMsS0FBSyxDQUFDLG9CQUFvQjtnQkFDL0YsZUFBZSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsZUFBZTtnQkFDM0Msa0JBQWtCLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxXQUFXO2dCQUMxQyxTQUFTLEVBQUUsSUFBSSxDQUFDLEdBQUcsRUFBRTthQUN0QixDQUFDO1FBQ0osQ0FBQztJQUNILENBQUM7SUFFRCxjQUFjO1FBQ1osSUFBSSxDQUFDLE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsU0FBUyxJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxFQUFFO0lBQ25FLENBQUM7SUFFRCxrQkFBa0I7UUFDaEIsTUFBTSxFQUFFLFNBQVMsR0FBRyxLQUFLLEVBQUUsR0FBRyxJQUFJLENBQUMsS0FBSztRQUN4QyxNQUFNLEVBQUUsV0FBVyxFQUFFLEdBQUcsSUFBSSxDQUFDLEtBQUs7UUFDbEMsTUFBTSxRQUFRLEdBQUcsU0FBUyxDQUFDLENBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLElBQUk7UUFDL0MsT0FBTztZQUNMLEtBQUssRUFBRSxJQUFJO1lBQ1gsT0FBTyxFQUFFO2dCQUNQLE1BQU0sRUFBRSxRQUFRO2dCQUNoQixJQUFJLEVBQUUsUUFBUTtnQkFDZCxLQUFLLEVBQUUsUUFBUTtnQkFDZixXQUFXLEVBQUUsUUFBUTthQUN0QjtZQUNELGNBQWMsRUFBRSxLQUFLO1NBQ3RCO0lBQ0gsQ0FBQztJQUVELGFBQWE7UUFDWCxJQUFJLG9CQUFvQjtRQUN4QixJQUFJLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQztZQUNqQixvQkFBb0IsR0FBRyxPQUFPLENBQUMsT0FBTyxFQUFFO1FBQzFDLENBQUM7YUFBTSxDQUFDO1lBQ04sb0JBQW9CLEdBQUcsbUVBQXNCLENBQUM7Z0JBQzVDLHNCQUFzQjthQUN2QixDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFO2dCQUNoQjtvQkFDRSxJQUFJLENBQUMsT0FBTztpQkFDYixHQUFHLE9BQU87WUFDYixDQUFDLENBQUM7UUFDSixDQUFDO1FBQ0QsT0FBTyxvQkFBb0IsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFOztZQUNwQyw4REFBOEQ7WUFDOUQsMkVBQTJFO1lBQzNFLElBQUksQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLENBQUM7Z0JBQ25DLGlDQUFpQztnQkFDakMsT0FBTTtZQUNSLENBQUM7WUFFRCxNQUFNLFNBQVMsR0FBRyxRQUFRLElBQUksUUFBUSxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUM7WUFDM0QsU0FBUyxDQUFDLFNBQVMsR0FBRyxhQUFhO1lBQ25DLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLFNBQVMsQ0FBQztZQUVwRCxNQUFNLFFBQVEsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxvQkFBb0IsRUFBRTtZQUM3RCxNQUFNLGNBQWMsR0FBRyxjQUFRLGFBQVIsUUFBUSx1QkFBUixRQUFRLENBQUcsQ0FBQyxDQUFDLDBDQUFFLGlCQUFpQixFQUFFO1lBRXpELElBQUksQ0FBQyxjQUFjLEVBQUU7WUFDckIsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsS0FBNEI7WUFDN0QsSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLGFBQWEsRUFBRSxDQUFDO2dCQUM3QixJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxhQUFhLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxhQUFhO1lBQzdELENBQUM7aUJBQU0sSUFBSSxLQUFLLEVBQUUsQ0FBQztnQkFDakIsdUVBQXVFO2dCQUN2RSxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxhQUFhLEdBQUcsV0FBSyxDQUFDLGFBQWEsbUNBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxvQkFBb0I7WUFDM0YsQ0FBQztpQkFBTSxDQUFDO2dCQUNOLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLGFBQWEsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLG9CQUFvQjtZQUNwRSxDQUFDO1lBQ0QsSUFBSSxLQUFLLElBQUksQ0FBQyxLQUFLLENBQUMsYUFBYSxFQUFFLENBQUM7Z0JBQ2xDLEtBQUssQ0FBQyxhQUFhLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxhQUFhLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxvQkFBb0I7WUFDbkYsQ0FBQztZQUNELElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDO2dCQUM5QixTQUFTLEVBQUUsU0FBUztnQkFDcEIsMkJBQTJCLEVBQUUsSUFBSTtnQkFDakMsbUJBQW1CO2dCQUNuQixnQkFBZ0IsRUFBRSxpQkFBSSxDQUFDLEtBQUssQ0FBQyxVQUFVLDBDQUFFLEtBQUssMENBQUUsZ0JBQWdCLEtBQUksSUFBSTtnQkFDeEUsbUJBQW1CO2dCQUNuQixHQUFHLEVBQUUsZUFBYyxhQUFkLGNBQWMsdUJBQWQsY0FBYyxDQUFFLEdBQUcsS0FBSSxJQUFJO2dCQUNoQyxPQUFPLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPO2dCQUMzQixlQUFlLEVBQUUsSUFBSSxDQUFDLGtCQUFrQixFQUFFO2FBQzNDLENBQUM7UUFDSixDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFO1lBQ1gsSUFBSSxDQUFDLFFBQVEsQ0FBQyxFQUFFLFVBQVUsRUFBRSxVQUFVLENBQUMsU0FBUyxFQUFFLENBQUM7UUFDckQsQ0FBQyxDQUFDO0lBQ0osQ0FBQztJQU9ELE1BQU07UUFDSixNQUFNLEVBQUUsU0FBUyxHQUFHLEtBQUssRUFBRSxJQUFJLEVBQUUsR0FBRyxJQUFJLENBQUMsS0FBSztRQUM5QyxNQUFNLEVBQUUsV0FBVyxFQUFFLEdBQUcsSUFBSSxDQUFDLEtBQUs7UUFDbEMsT0FBTyxDQUNMLDBFQUFLLFNBQVMsRUFBQyxzREFBc0QsRUFBQyxHQUFHLEVBQUUsS0FBSyxhQUM3RSxTQUFTLElBQUksQ0FDWixnRUFBQywyQ0FBTSxrQkFDTyxJQUFJLENBQUMsYUFBYSxDQUFDLEVBQUUsRUFBRSxFQUFFLFdBQVcsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxFQUMzRSxTQUFTLEVBQUUscURBQVUsQ0FBQyxtQ0FBbUMsRUFBRSxFQUFFLFFBQVEsRUFBRSxXQUFXLEVBQUUsQ0FBQyxFQUNyRixPQUFPLEVBQUMsTUFBTSxFQUNkLEtBQUssRUFBQyxTQUFTLEVBQ2YsSUFBSSxRQUNKLElBQUksRUFBQyxJQUFJLEVBQ1QsT0FBTyxFQUFFLElBQUksQ0FBQyxjQUFjLEVBQzVCLEdBQUcsRUFBRSw4Q0FBRzs7Ozs7OzthQU9QLFlBRUEsV0FBVyxDQUFDLENBQUMsQ0FBQyxnRUFBQywwRUFBVSxJQUFDLElBQUksRUFBQyxHQUFHLEdBQUUsQ0FBQyxDQUFDLENBQUMsZ0VBQUMsNEVBQVcsSUFBQyxJQUFJLEVBQUMsR0FBRyxFQUFDLFFBQVEsU0FBRSxHQUNqRSxDQUNWLEVBQ0QseUVBQUssU0FBUyxFQUFDLGFBQWEsRUFBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLGdCQUFnQixHQUFJLElBQ3ZELENBQ1A7SUFDSCxDQUFDO0NBQ0Y7QUFFRCxpRUFBZSxxREFBVSxDQUFDLFdBQVcsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQy9RdEMsZUFBZTtBQUM4RjtBQUNqQjtBQUNqQztBQUVGO0FBQ2I7QUFDTztBQUNJO0FBYWhELFNBQVMsZ0JBQWdCLENBQUUsS0FBWTtJQUM1QyxNQUFNLEVBQUUsZ0JBQWdCLEVBQUUsZUFBZSxFQUFFLFlBQVksRUFBRSxZQUFZLEVBQUUsY0FBYyxFQUFFLFVBQVUsRUFBRSxjQUFjLEVBQUUsUUFBUSxFQUFFLEdBQUcsS0FBSztJQUNySSxNQUFNLENBQUMsV0FBVyxFQUFFLGNBQWMsQ0FBQyxHQUFHLDRDQUFLLENBQUMsUUFBUSxDQUFjLElBQUksQ0FBQztJQUN2RSxNQUFNLGNBQWMsR0FBRyw0Q0FBSyxDQUFDLGNBQWMsQ0FBQyxvREFBYyxFQUFFLDZEQUFjLENBQUM7SUFDM0UsTUFBTSxnQkFBZ0IsR0FBRyw0Q0FBSyxDQUFDLFVBQVUsQ0FBQyxpRUFBZ0IsQ0FBQztJQUMzRCxNQUFNLGNBQWMsR0FBRyw0Q0FBSyxDQUFDLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxXQUFXLENBQUM7SUFDakUsTUFBTSxjQUFjLEdBQUcsNENBQUssQ0FBQyxNQUFNLENBQTZCLElBQUksQ0FBQztJQUNyRSxNQUFNLGlCQUFpQixHQUFHLDRDQUFLLENBQUMsTUFBTSxDQUF3QixJQUFJLENBQUM7SUFDbkUsTUFBTSx5QkFBeUIsR0FBRyw0Q0FBSyxDQUFDLE1BQU0sQ0FBZ0MsSUFBSSxDQUFDO0lBQ25GLE1BQU0sa0JBQWtCLEdBQUcsNENBQUssQ0FBQyxNQUFNLENBQWdHLElBQUksQ0FBQztJQUM1SSxNQUFNLFdBQVcsR0FBRyw0Q0FBSyxDQUFDLE1BQU0sQ0FBa0IsSUFBSSxDQUFDO0lBQ3ZELE1BQU0saUJBQWlCLEdBQUcsNENBQUssQ0FBQyxNQUFNLENBQUMsY0FBYyxDQUFDO0lBQ3RELE1BQU0sYUFBYSxHQUFHLDRDQUFLLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQztJQUM5QyxNQUFNLGtCQUFrQixHQUFHLDRDQUFLLENBQUMsTUFBTSxDQUFpQixJQUFJLENBQUM7SUFFN0QsNENBQUssQ0FBQyxhQUFhLENBQUMsR0FBRyxFQUFFO1FBQ3ZCLElBQUksWUFBWSxFQUFFLENBQUM7WUFDakIsaUdBQWlHO1lBQ2pHLDZFQUE2RTtZQUM3RSw2Q0FBTSxDQUFDLEtBQUssQ0FBQyxHQUFHLEVBQUU7Z0JBQ2hCLGNBQWMsQ0FBQyxjQUFjLEVBQUUsVUFBVSxDQUFDO1lBQzVDLENBQUMsQ0FBQztRQUNKLENBQUM7UUFDRCxtRUFBc0IsQ0FBQztZQUNyQixjQUFjO1NBQ2YsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sRUFBRSxFQUFFO1lBQ2xCLE1BQU0sT0FBTyxHQUFHLE9BQU8sQ0FBQyxDQUFDLENBQUM7WUFDMUIsa0JBQWtCLENBQUMsT0FBTyxHQUFHLElBQUksT0FBTyxDQUFDO2dCQUN2QyxNQUFNLEVBQUU7b0JBQ04sSUFBSSxFQUFFLGFBQWE7b0JBQ25CLEtBQUssRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQztvQkFDekIsS0FBSyxFQUFFLE9BQU87b0JBQ2QsT0FBTyxFQUFFO3dCQUNQLEtBQUssRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQzt3QkFDekIsS0FBSyxFQUFFLENBQUM7cUJBQ1Q7aUJBQ0Y7YUFDRixDQUFDO1FBQ0osQ0FBQyxDQUFDO0lBQ0osQ0FBQyxDQUFDO0lBRUYsTUFBTSxpQkFBaUIsR0FBRyw0Q0FBSyxDQUFDLFdBQVcsQ0FBQyxHQUFTLEVBQUU7O1FBQ3JELElBQUksQ0FBQyxXQUFXLENBQUMsT0FBTyxJQUFJLENBQUMsWUFBWSxJQUFJLGlCQUFpQixDQUFDLE9BQU8sS0FBSyxDQUFDLEVBQUUsQ0FBQztZQUM3RSxrQkFBa0IsQ0FBQyxPQUFPLENBQUMsUUFBUSxHQUFHLElBQUk7WUFDMUMsT0FBTTtRQUNSLENBQUM7UUFFRCxrSUFBa0k7UUFDbEksTUFBTSxxQkFBcUIsR0FBRyxDQUFDLGtCQUFXLENBQUMsT0FBTywwQ0FBRSxJQUFJLE1BQUssT0FBTyxJQUFJLGtCQUFXLENBQUMsT0FBTywwQ0FBRSxJQUFJLE1BQUssWUFBWSxDQUFDLElBQUksaUJBQWlCLENBQUMsT0FBTyxHQUFHLENBQUM7UUFDcEosTUFBTSxvQkFBb0IsR0FBRyxrQkFBVyxDQUFDLE9BQU8sMENBQUUsSUFBSSxNQUFLLFVBQVUsSUFBSSxpQkFBaUIsQ0FBQyxPQUFPLEdBQUcsQ0FBQztRQUN0RyxJQUFJLHFCQUFxQixJQUFJLG9CQUFvQixFQUFFLENBQUM7WUFDbEQsa0JBQWtCLENBQUMsT0FBTyxDQUFDLFFBQVEsR0FBRyxJQUFJO1lBQzFDLE9BQU07UUFDUixDQUFDO1FBRUQsTUFBTSxRQUFRLEdBQUcsV0FBVyxDQUFDLE9BQU87UUFDcEMseUdBQXlHO1FBQ3pHLElBQUksZUFBUSxDQUFDLGdCQUFnQiwwQ0FBRSxZQUFZLEtBQUksQ0FBQyxRQUFRLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLENBQUM7WUFDbEYsTUFBTSxVQUFVLEdBQUcsNENBQUssQ0FBQyxrQkFBa0IsRUFBRTtZQUM3QyxJQUFJLENBQUMsa0JBQWtCLENBQUMsT0FBTyxFQUFFLENBQUM7Z0JBQ2hDLE1BQU0sT0FBTyxHQUFHLE1BQU0sbUVBQXNCLENBQUM7b0JBQzNDLDJCQUEyQjtvQkFDM0Isb0NBQW9DO2lCQUNyQyxDQUFDO2dCQUNGLGtCQUFrQixDQUFDLE9BQU8sR0FBRztvQkFDM0IsZUFBZSxFQUFFLE9BQU8sQ0FBQyxDQUFDLENBQUM7b0JBQzNCLGdCQUFnQixFQUFFLE9BQU8sQ0FBQyxDQUFDLENBQUM7aUJBQzdCO1lBQ0gsQ0FBQztZQUNELE1BQU0sRUFBRSxlQUFlLEVBQUUsZ0JBQWdCLEVBQUUsZ0JBQWdCLEVBQUUsR0FBRyxrQkFBa0IsQ0FBQyxPQUFPO1lBQzFGLE1BQU0sUUFBUSxHQUFHLE1BQU0sZUFBZSxDQUFDLE1BQU0sQ0FBQyxVQUFVLEVBQUUsSUFBSSxnQkFBZ0IsQ0FBQztnQkFDN0UsU0FBUyxFQUFFLENBQUMsaUJBQWlCLENBQUMsT0FBTyxDQUFDO2dCQUN0QyxJQUFJLEVBQUUsNkNBQU0sQ0FBQyxTQUFTLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBUTtnQkFDcEQsUUFBUSxFQUFFLElBQUk7Z0JBQ2Qsc0JBQXNCLEVBQUUsUUFBUSxDQUFDLGdCQUFnQjtnQkFDakQsbUJBQW1CLEVBQUUsUUFBUSxDQUFDLGdCQUFnQjtnQkFDOUMsVUFBVSxFQUFFLENBQUMsUUFBUSxDQUFDO2FBQ3ZCLENBQUMsQ0FBQztZQUNILGtCQUFrQixDQUFDLE9BQU8sQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFDLENBQUMsQ0FBQztRQUNuRCxDQUFDO2FBQU0sQ0FBQztZQUNOLElBQUksZUFBUSxDQUFDLGdCQUFnQiwwQ0FBRSxPQUFPLE1BQUksY0FBUSxDQUFDLGdCQUFnQiwwQ0FBRSxhQUFhLEdBQUUsQ0FBQztnQkFDbkYsSUFBSSxDQUFDLHlCQUF5QixDQUFDLE9BQU8sRUFBRSxDQUFDO29CQUN2Qyx5QkFBeUIsQ0FBQyxPQUFPLEdBQUcsTUFBTSxnRUFBcUIsQ0FBQyxnREFBZ0QsQ0FBQztnQkFDbkgsQ0FBQztnQkFDRCxJQUFJLENBQUMseUJBQXlCLENBQUMsT0FBTyxDQUFDLFFBQVEsRUFBRSxFQUFFLENBQUM7b0JBQ2xELE1BQU0seUJBQXlCLENBQUMsT0FBTyxDQUFDLElBQUksRUFBRTtnQkFDaEQsQ0FBQztnQkFDRCxrQkFBa0IsQ0FBQyxPQUFPLENBQUMsUUFBUSxHQUFHLHlCQUF5QixDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQzdFLFFBQWdDLEVBQ2hDLGlCQUFpQixDQUFDLE9BQU8sRUFDekI7b0JBQ0UsSUFBSSxFQUFFLDZDQUFNLENBQUMsU0FBUyxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQVE7aUJBQ3JELENBQ0Y7WUFDSCxDQUFDO2lCQUFNLENBQUM7Z0JBQ04sSUFBSSxDQUFDLGlCQUFpQixDQUFDLE9BQU8sRUFBRSxDQUFDO29CQUMvQixpQkFBaUIsQ0FBQyxPQUFPLEdBQUcsTUFBTSxnRUFBcUIsQ0FBQyx3Q0FBd0MsQ0FBQztnQkFDbkcsQ0FBQztnQkFDRCxrQkFBa0IsQ0FBQyxPQUFPLENBQUMsUUFBUSxHQUFHLGlCQUFpQixDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQ3JFLFFBQWdDLEVBQ2hDLGlCQUFpQixDQUFDLE9BQU8sRUFDekI7b0JBQ0UsSUFBSSxFQUFFLDZDQUFNLENBQUMsU0FBUyxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQVE7aUJBQ3JELENBQ0Y7WUFDSCxDQUFDO1FBQ0gsQ0FBQztJQUNILENBQUMsR0FBRSxDQUFDLFlBQVksQ0FBQyxDQUFDO0lBRWxCLDRDQUFLLENBQUMsU0FBUyxDQUFDLEdBQUcsRUFBRTtRQUNuQixJQUFJLGdCQUFnQixDQUFDLFdBQVcsSUFBSSxnQkFBZ0IsQ0FBQyxXQUFXLEtBQUssY0FBYyxDQUFDLE9BQU8sRUFBRSxDQUFDO1lBQzVGLGNBQWMsQ0FBQyxPQUFPLEdBQUcsZ0JBQWdCLENBQUMsV0FBVztZQUNyRCxjQUFjLENBQUMsT0FBTyxJQUFJLGNBQWMsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxTQUFTLEVBQUU7WUFDOUQsZ0JBQWdCLENBQUMsSUFBSSxDQUFDO1FBQ3hCLENBQUM7SUFDSCxDQUFDLEVBQUUsQ0FBQyxnQkFBZ0IsQ0FBQyxXQUFXLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQztJQUVwRCxNQUFNLHdCQUF3QixHQUFHLDRDQUFLLENBQUMsV0FBVyxDQUFDLENBQUMsV0FBd0IsRUFBRSxFQUFFO1FBQzlFLG1EQUFtRDtRQUNuRCxNQUFNLEtBQUssR0FBRyxjQUFjLENBQUMsT0FBTyxJQUFJLGNBQWMsQ0FBQyxPQUFPLEVBQUU7UUFDaEUsSUFBSSxLQUFLLEVBQUUsQ0FBQztZQUNWLEtBQUssQ0FBQyxTQUFTLEVBQUU7WUFDakIsZ0JBQWdCLENBQUMsSUFBSSxDQUFDO1FBQ3hCLENBQUM7UUFDRCxjQUFjLENBQUMsWUFBVyxhQUFYLFdBQVcsdUJBQVgsV0FBVyxDQUFFLElBQUksS0FBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDO0lBQ2hFLENBQUMsRUFBRSxDQUFDLGdCQUFnQixDQUFDLENBQUM7SUFFdEIsTUFBTSxrQkFBa0IsR0FBRyw0Q0FBSyxDQUFDLFdBQVcsQ0FBQyxDQUFDLFFBQVEsRUFBRSxJQUFJLEVBQUUsRUFBRTtRQUM5RCxpQkFBaUIsQ0FBQyxPQUFPLEdBQUcsUUFBUTtRQUNwQyxhQUFhLENBQUMsT0FBTyxHQUFHLElBQUk7UUFDNUIsaUJBQWlCLEVBQUU7UUFDbkIsY0FBYyxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUM7SUFDaEMsQ0FBQyxFQUFFLENBQUMsY0FBYyxFQUFFLGlCQUFpQixDQUFDLENBQUM7SUFFdkMsTUFBTSxhQUFhLEdBQUcsNENBQUssQ0FBQyxXQUFXLENBQUMsQ0FBQyxPQUFPLEVBQUUsV0FBVyxFQUFFLGVBQWUsRUFBRSxFQUFFO1FBQ2hGLGNBQWMsQ0FBQyxPQUFPLEdBQUcsV0FBVztRQUNwQyxNQUFNLEtBQUssR0FBRyxjQUFjLENBQUMsT0FBTyxJQUFJLGNBQWMsQ0FBQyxPQUFPLEVBQUU7UUFDaEUsd0dBQXdHO1FBQ3hHLElBQUksV0FBVyxDQUFDLE9BQU8sTUFBSyxPQUFPLGFBQVAsT0FBTyx1QkFBUCxPQUFPLENBQUUsUUFBUSxHQUFFLENBQUM7WUFDOUMsV0FBVyxDQUFDLE9BQU8sR0FBRyxPQUFPLGFBQVAsT0FBTyx1QkFBUCxPQUFPLENBQUUsUUFBUTtZQUN2QyxpQkFBaUIsRUFBRSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUU7Z0JBQzVCLElBQUksa0JBQWtCLENBQUMsT0FBTyxDQUFDLFFBQVEsRUFBRSxDQUFDO29CQUN4QyxLQUFLLGFBQUwsS0FBSyx1QkFBTCxLQUFLLENBQUUsR0FBRyxDQUFDLGtCQUFrQixDQUFDLE9BQU8sQ0FBQztnQkFDeEMsQ0FBQztZQUNILENBQUMsQ0FBQztRQUNKLENBQUM7UUFDRCxnQkFBZ0IsQ0FBQyxPQUFPLGFBQVAsT0FBTyx1QkFBUCxPQUFPLENBQUUsUUFBUSxFQUFFLEtBQUssRUFBRSxPQUFPLEVBQUUsZUFBZSxDQUFDO0lBQ3RFLENBQUMsRUFBRSxDQUFDLGdCQUFnQixFQUFFLGlCQUFpQixDQUFDLENBQUM7SUFFekMsT0FBTyxDQUNMLGlFQUFDLDRDQUFLLENBQUMsUUFBUSxlQUVYLFlBQVksYUFBWixZQUFZLHVCQUFaLFlBQVksQ0FBRSxHQUFHLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUNwQyxnRUFBQyw2REFBb0IsSUFDWCxjQUFjLEVBQUUsV0FBVyxFQUFFLGtCQUFrQixFQUFFLHdCQUF3QixJQUE1RSxDQUFDLENBQ04sQ0FDSCxDQUFDLEVBRUgsWUFBVyxhQUFYLFdBQVcsdUJBQVgsV0FBVyxDQUFFLElBQUksS0FBSSxDQUNwQixpRUFBQyw0Q0FBSyxDQUFDLFFBQVEsZUFDYixnRUFBQyxtRUFBZSxJQUNkLFdBQVcsRUFBRSxXQUFXLEVBQ3hCLFFBQVEsRUFBRSxRQUFRLEVBQ2xCLFNBQVMsRUFBRSxlQUFlLEVBQzFCLFNBQVMsRUFBRSxhQUFhLEdBQ3hCLEVBQ0QsWUFBWSxJQUFJLENBQ2YsMEVBQUssSUFBSSxFQUFDLE9BQU8sRUFBQyxTQUFTLEVBQUMsUUFBUSxnQkFBYSxjQUFjLENBQUMsbUJBQW1CLENBQUMsRUFBRSxHQUFHLEVBQUUsOENBQUcsdUJBQXNCLGFBQ2xILHlFQUFLLFNBQVMsRUFBQyxlQUFlLFlBQUUsY0FBYyxDQUFDLG1CQUFtQixDQUFDLEdBQU8sRUFDMUUseUVBQUssU0FBUyxFQUFDLGFBQWEsWUFDMUIsZ0VBQUMsc0RBQVcsSUFBQyxRQUFRLEVBQUUsY0FBYyxFQUFFLElBQUksRUFBRSxVQUFVLEVBQUUsY0FBYyxFQUFFLGtCQUFrQixHQUFHLEdBQzFGLElBQ0YsQ0FDUCxJQUNjLENBQ2xCLElBQ2MsQ0FDbEI7QUFDSCxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUN2TUQsZUFBZTtBQWdCRztBQUN5RDtBQUNqQjtBQUNkO0FBQ087QUFDSTtBQUV2RCxNQUFNLFdBQVcsR0FBRyw4Q0FBRyx1QkFBc0I7QUFhN0MsU0FBUyxvQkFBb0I7SUFDM0IsTUFBTSxNQUFNLEdBQUcsRUFBRTtJQUNqQixJQUFJLFFBQVEsR0FBRyxLQUFLO0lBQ3BCLE1BQU0sS0FBSyxHQUFHLHdEQUFpQixDQUFDLFdBQVcsRUFBRSxDQUFDLGNBQWMsRUFBRTtJQUM5RCxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsRUFBRTtRQUNoQyxNQUFNLEVBQUUsR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDO1FBQ3RCLHdDQUF3QztRQUN4QyxJQUFJLEVBQUUsQ0FBQyxlQUFlLEVBQUUsSUFBSSxJQUFJLElBQUksQ0FBQyxFQUFFLENBQUMsYUFBYSxFQUFFLElBQUksRUFBRSxDQUFDLGlCQUFpQixFQUFFLENBQUMsRUFBRSxLQUFLLElBQUksSUFBSSxDQUFDLEVBQUUsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLGtCQUFrQixFQUFFLENBQUM7WUFDNUksTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUU7WUFDakIsUUFBUSxHQUFHLElBQUk7UUFDakIsQ0FBQztJQUNILENBQUMsQ0FBQztJQUVGLE9BQU8sUUFBUSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUk7QUFDakMsQ0FBQztBQUVNLFNBQVMsc0JBQXNCLENBQUUsS0FBWTs7SUFDbEQsTUFBTSxFQUFFLGlCQUFpQixFQUFFLGNBQWMsR0FBRyxFQUFFLEVBQUUsY0FBYyxFQUFFLGdCQUFnQixFQUFFLFlBQVksRUFBRSxjQUFjLEVBQUUsVUFBVSxFQUFFLGNBQWMsRUFBRSxnQkFBZ0IsRUFBRSxHQUFHLEtBQUs7SUFDdEssTUFBTSxjQUFjLEdBQUcsNENBQUssQ0FBQyxjQUFjLENBQUMsb0RBQWMsRUFBRSw2REFBYyxDQUFDO0lBQzNFLE1BQU0sQ0FBQyxpQkFBaUIsRUFBRSxvQkFBb0IsQ0FBQyxHQUFHLDRDQUFLLENBQUMsUUFBUSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNuRixNQUFNLENBQUMsaUJBQWlCLEVBQUUsb0JBQW9CLENBQUMsR0FBRyw0Q0FBSyxDQUFDLFFBQVEsRUFBYztJQUM5RSxNQUFNLENBQUMsS0FBSyxFQUFFLFFBQVEsQ0FBQyxHQUFHLDRDQUFLLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztJQUMzQyxNQUFNLENBQUMsZUFBZSxFQUFFLGtCQUFrQixDQUFDLEdBQUcsNENBQUssQ0FBQyxRQUFRLENBQUMsZ0JBQWdCLGFBQWhCLGdCQUFnQix1QkFBaEIsZ0JBQWdCLENBQUcsQ0FBQyxDQUFDLENBQUM7SUFDbkYsTUFBTSxnQkFBZ0IsR0FBRyw0Q0FBSyxDQUFDLFVBQVUsQ0FBQyxpRUFBZ0IsQ0FBQztJQUMzRCxNQUFNLGNBQWMsR0FBRyw0Q0FBSyxDQUFDLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxXQUFXLENBQUM7SUFDakUsTUFBTSxTQUFTLEdBQUcsNENBQUssQ0FBQyxjQUFjLEVBQUU7SUFFeEMsTUFBTSxzQkFBc0IsR0FBNEMsNENBQUssQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFO1FBQ3pGLE9BQU8sTUFBTSxDQUFDLE9BQU8sQ0FBQyxvREFBZSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsS0FBSyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7WUFDNUQsS0FBSztZQUNMLEtBQUssRUFBRSxjQUFjLENBQUMsbUJBQW1CLEdBQUcsRUFBRSxDQUFDO1NBQ2hELENBQUMsQ0FBQztJQUNMLENBQUMsRUFBRSxDQUFDLGNBQWMsQ0FBQyxDQUFDO0lBRXBCLE1BQU0sb0JBQW9CLEdBQUcsaURBQVUsQ0FBQyxXQUFXLENBQUMsQ0FBQyxLQUFjLEVBQUUsRUFBRTtRQUNyRSxNQUFNLE1BQU0sR0FBRyxFQUFFO1FBQ2pCLGNBQWMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLEVBQUUsRUFBRTs7WUFDOUIsSUFBSSxrQkFBSyxDQUFDLGVBQWUsMENBQUcsSUFBSSxDQUFDLGdCQUFnQixDQUFDLDBDQUFFLGNBQWMsTUFBSyx1REFBZ0IsQ0FBQyxPQUFPLEVBQUUsQ0FBQztnQkFDaEcsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDO1lBQ2hDLENBQUM7UUFDSCxDQUFDLENBQUM7UUFDRixJQUFJLE1BQU0sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUM7WUFDdEIsT0FBTyxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQztRQUN6QixDQUFDO1FBQ0QsT0FBTyxFQUFFO0lBQ1gsQ0FBQyxDQUFDO0lBRUYsTUFBTSxPQUFPLEdBQUcsaURBQVUsQ0FBQyxXQUFXLENBQUMsQ0FBQyxLQUFjLEVBQUUsRUFBRTs7UUFDeEQsSUFBSSxDQUFDLGNBQWMsRUFBRSxDQUFDO1lBQ3BCLE9BQU8sQ0FBQztRQUNWLENBQUM7UUFDRCxPQUFPLE1BQU0sQ0FBQyxJQUFJLENBQUMsV0FBSyxDQUFDLGVBQWUsbUNBQUksRUFBRSxDQUFDLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxjQUFjLEtBQUssdURBQWdCLENBQUMsT0FBTyxDQUFDLENBQUMsTUFBTTtJQUNoSixDQUFDLENBQUM7SUFFRixNQUFNLGtCQUFrQixHQUFHLDRDQUFLLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRTtRQUM1QyxJQUFJLE9BQU8sR0FBRyxDQUFDLEVBQUUsQ0FBQztZQUNoQixPQUFPLG9CQUFvQixFQUFFO1FBQy9CLENBQUM7SUFDSCxDQUFDLEVBQUUsQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUViLE1BQU0sY0FBYyxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsa0JBQWtCLGFBQWxCLGtCQUFrQixjQUFsQixrQkFBa0IsR0FBSSxFQUFFLENBQUMsQ0FBQyxNQUFNO0lBRW5FLDRDQUFLLENBQUMsYUFBYSxDQUFDLEdBQUcsRUFBRTtRQUN2QixJQUFJLGlCQUFnQixhQUFoQixnQkFBZ0IsdUJBQWhCLGdCQUFnQixDQUFFLE1BQU0sSUFBRyxDQUFDLEVBQUUsQ0FBQztZQUNqQyxnQkFBZ0IsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN2QyxDQUFDO1FBQ0QsSUFBSSxZQUFZLEVBQUUsQ0FBQztZQUNqQixjQUFjLENBQUMsY0FBYyxFQUFFLFVBQVUsQ0FBQztRQUM1QyxDQUFDO0lBQ0gsQ0FBQyxDQUFDO0lBRUYsNENBQUssQ0FBQyxTQUFTLENBQUMsR0FBRyxFQUFFO1FBQ25CLElBQUksZ0JBQWdCLENBQUMsV0FBVyxJQUFJLGdCQUFnQixDQUFDLFdBQVcsS0FBSyxjQUFjLENBQUMsT0FBTyxFQUFFLENBQUM7WUFDNUYsY0FBYyxDQUFDLE9BQU8sR0FBRyxnQkFBZ0IsQ0FBQyxXQUFXO1lBQ3JELGtCQUFrQixDQUFDLGdCQUFnQixhQUFoQixnQkFBZ0IsdUJBQWhCLGdCQUFnQixDQUFHLENBQUMsQ0FBQyxDQUFDO1lBQ3pDLGdCQUFnQixDQUFDLGdCQUFnQixhQUFoQixnQkFBZ0IsdUJBQWhCLGdCQUFnQixDQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3pDLENBQUM7SUFDSCxDQUFDLEVBQUUsQ0FBQyxnQkFBZ0IsQ0FBQyxXQUFXLEVBQUUsZ0JBQWdCLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQztJQUV0RSw0Q0FBSyxDQUFDLFNBQVMsQ0FBQyxHQUFHLEVBQUU7UUFDbkIsSUFBSSxDQUFDLGdCQUFnQixFQUFFLENBQUM7WUFDdEIsa0JBQWtCLENBQUMsSUFBSSxDQUFDO1FBQzFCLENBQUM7YUFBTSxJQUFJLENBQUMsZ0JBQWdCLENBQUMsUUFBUSxDQUFDLGVBQWUsQ0FBQyxFQUFFLENBQUM7WUFDdkQsa0JBQWtCLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDdkMsZ0JBQWdCLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDdkMsQ0FBQztJQUNILENBQUMsRUFBRSxDQUFDLGdCQUFnQixFQUFFLGVBQWUsRUFBRSxnQkFBZ0IsQ0FBQyxDQUFDO0lBRXpELE1BQU0sc0JBQXNCLEdBQUcsNENBQUssQ0FBQyxXQUFXLENBQzlDLENBQUMsSUFBWSxFQUFFLEVBQUU7UUFDZixNQUFNLEVBQUUsR0FBRyxjQUFjLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUMsWUFBWSxLQUFLLElBQUksQ0FBQztRQUNwRSxvQkFBb0IsQ0FBQyxvREFBUyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQ25DLG9CQUFvQixDQUFDLElBQUksQ0FBQztJQUM1QixDQUFDLEVBQ0QsQ0FBQyxjQUFjLENBQUMsQ0FDakI7SUFFRCxNQUFNLDZCQUE2QixHQUFHLDRDQUFLLENBQUMsV0FBVyxDQUNyRCxDQUFDLElBQVksRUFBRSxFQUFFO1FBQ2YsTUFBTSxFQUFFLEdBQUcsd0RBQWlCLENBQUMsV0FBVyxFQUFFLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQztRQUM5RCxvQkFBb0IsQ0FBQyxFQUFFLENBQUM7UUFDeEIsb0JBQW9CLENBQUMsSUFBSSxDQUFDO0lBQzVCLENBQUMsRUFDRCxFQUFFLENBQ0g7SUFFRCxNQUFNLDBCQUEwQixHQUFHLDRDQUFLLENBQUMsV0FBVyxDQUFDLEdBQUcsRUFBRTs7UUFDeEQsTUFBTSxFQUFFLEdBQUcsd0RBQWlCLENBQUMsV0FBVyxFQUFFLENBQUMsYUFBYSxDQUFDLHVCQUFpQixhQUFqQixpQkFBaUIsdUJBQWpCLGlCQUFpQixDQUFFLFlBQVksbUNBQUksaUJBQWlCLGFBQWpCLGlCQUFpQix1QkFBakIsaUJBQWlCLENBQUUsRUFBRSxDQUFDO1FBQ2xILE1BQU0sT0FBTyxHQUFHLEVBQUUsYUFBRixFQUFFLHVCQUFGLEVBQUUsQ0FBRSxrQkFBa0IsRUFBeUI7UUFDL0QsSUFBSSxRQUFPLGFBQVAsT0FBTyx1QkFBUCxPQUFPLENBQUUsTUFBTSxJQUFHLENBQUMsRUFBRSxDQUFDO1lBQ3hCLE1BQU0sVUFBVSxHQUFHLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNLEVBQUUsRUFBRSxDQUFDLE1BQU0sQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO1lBQ3JFLGlCQUFpQixDQUFDLFVBQVUsQ0FBQztZQUM3QixRQUFRLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQztRQUMxQixDQUFDO2FBQU0sQ0FBQztZQUNOLGlCQUFpQixDQUFDLElBQUksQ0FBQztZQUN2QixRQUFRLENBQUMsQ0FBQyxDQUFDO1FBQ2IsQ0FBQztJQUNILENBQUMsRUFBRSxDQUFDLGlCQUFpQixhQUFqQixpQkFBaUIsdUJBQWpCLGlCQUFpQixDQUFFLFlBQVksRUFBRSxpQkFBaUIsYUFBakIsaUJBQWlCLHVCQUFqQixpQkFBaUIsQ0FBRSxFQUFFLEVBQUUsaUJBQWlCLENBQUMsQ0FBQztJQUUvRSxNQUFNLHlCQUF5QixHQUFHLENBQUMsUUFBZ0IsRUFBVSxFQUFFO1FBQzdELE9BQU8sc0JBQXNCLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLEtBQUssS0FBSyxRQUFRLENBQUMsQ0FBQyxLQUFLO0lBQzNFLENBQUM7SUFFRCxNQUFNLDJCQUEyQixHQUFHLDRDQUFLLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxFQUFFO1FBQ3hELGtCQUFrQixDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDO1FBQ2xDLGdCQUFnQixDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDO0lBQ2xDLENBQUMsRUFBRSxDQUFDLGdCQUFnQixDQUFDLENBQUM7SUFFdEIsT0FBTyxDQUNMLHFGQUNFLHlFQUFLLEdBQUcsRUFBRSxXQUFXLEVBQUUsU0FBUyxFQUFDLFFBQVEsWUFBRSxjQUFjLENBQUMsbUJBQW1CLENBQUMsR0FBTyxFQUNyRixpRUFBQywyQ0FBTSxrQkFDTyxjQUFjLENBQUMsbUJBQW1CLENBQUMsRUFDL0MsS0FBSyxFQUFFLHVCQUFpQixhQUFqQixpQkFBaUIsdUJBQWpCLGlCQUFpQixDQUFFLFlBQVksbUNBQUksaUJBQWlCLGFBQWpCLGlCQUFpQix1QkFBakIsaUJBQWlCLENBQUUsRUFBRSxhQUU5RCxjQUFjLEdBQUcsQ0FBQyxJQUFJLGNBQWMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxJQUFJLGdFQUFDLDJDQUFNLElBQUMsTUFBTSxrQkFBRSxjQUFjLENBQUMsZUFBZSxDQUFDLEdBQVUsRUFDNUcsY0FBYyxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksRUFBRSxFQUFFO3dCQUMzQixNQUFNLEVBQUUsR0FBRyx3REFBaUIsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQzt3QkFDM0UsSUFBSSxvQkFBb0IsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxLQUFJLEVBQUUsYUFBRixFQUFFLHVCQUFGLEVBQUUsQ0FBRSxRQUFRLEVBQUUsR0FBRSxDQUFDOzRCQUN2RSxPQUFPLENBQ0wsZ0VBQUMsMkNBQU0sSUFBeUIsS0FBSyxFQUFFLElBQUksQ0FBQyxZQUFZLEVBQUUsT0FBTyxFQUFFLEdBQUcsRUFBRSxHQUFHLHNCQUFzQixDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsRUFBQyxDQUFDLFlBQ3JILEVBQUUsYUFBRixFQUFFLHVCQUFGLEVBQUUsQ0FBRSxRQUFRLEVBQUUsSUFERixJQUFJLENBQUMsWUFBWSxDQUVyQixDQUNWO3dCQUNILENBQUM7d0JBQ0QsT0FBTyxDQUNMLGdFQUFDLDJDQUFNLGNBQ0osU0FBUyxDQUFDLFNBQVMsQ0FBQyxJQURWLElBQUksQ0FBQyxZQUFZLENBRXJCLENBQ1Y7b0JBQ0gsQ0FBQyxDQUFDLEVBQ0QsY0FBYyxHQUFHLENBQUMsSUFBSSxjQUFjLENBQUMsTUFBTSxHQUFHLENBQUMsSUFBSSxnRUFBQywyQ0FBTSxJQUFDLE9BQU8sU0FBRSxFQUNwRSxjQUFjLEdBQUcsQ0FBQyxJQUFJLGdFQUFDLDJDQUFNLElBQUMsTUFBTSxrQkFBRSxjQUFjLENBQUMsU0FBUyxDQUFDLEdBQVUsRUFDekUsTUFBTSxDQUFDLElBQUksQ0FBQyxrQkFBa0IsYUFBbEIsa0JBQWtCLGNBQWxCLGtCQUFrQixHQUFJLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBRTt3QkFDaEQsTUFBTSxFQUFFLEdBQUcsa0JBQWtCLENBQUMsSUFBSSxDQUFDO3dCQUNuQyxPQUFPLENBQ0wsZ0VBQUMsMkNBQU0sSUFBWSxLQUFLLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxHQUFHLEVBQUUsR0FBRyw2QkFBNkIsQ0FBQyxJQUFJLENBQUMsRUFBQyxDQUFDLFlBQ25GLEVBQUUsQ0FBQyxRQUFRLEVBQUUsSUFESCxJQUFJLENBRVIsQ0FDVjtvQkFDSCxDQUFDLENBQUMsSUFDSyxFQUNULHlFQUFLLFNBQVMsRUFBQyxrQkFBa0IsRUFBQyxHQUFHLEVBQUUsOENBQUcsOENBQTZDLFlBQUcsY0FBYyxDQUFDLGlCQUFpQixFQUFFLEVBQUUsR0FBRyxFQUFFLEtBQUssRUFBRSxDQUFDLEdBQU8sRUFDakosaUJBQWdCLGFBQWhCLGdCQUFnQix1QkFBaEIsZ0JBQWdCLENBQUUsTUFBTSxJQUFHLENBQUMsSUFBSSxDQUMvQiwwRUFBSyxHQUFHLEVBQUUsV0FBVyxhQUNuQix5RUFBSyxTQUFTLEVBQUMsMkJBQTJCLFlBQUUsY0FBYyxDQUFDLGNBQWMsQ0FBQyxHQUFPLEVBQ2pGLGdFQUFDLDJDQUFNLGtCQUNPLGNBQWMsQ0FBQyxjQUFjLENBQUMsRUFDMUMsS0FBSyxFQUFFLGVBQWUsRUFDdEIsUUFBUSxFQUFFLDJCQUEyQixZQUVwQyxnQkFBZ0IsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLEVBQUUsRUFBRTs0QkFDN0IsT0FBTyxDQUNMLDRFQUFtQixLQUFLLEVBQUUsSUFBSSxZQUFHLHlCQUF5QixDQUFDLElBQUksQ0FBQyxJQUFuRCxJQUFJLENBQXlELENBQzNFO3dCQUNILENBQUMsQ0FBQyxHQUNLLElBQ0wsQ0FDUCxFQUNBLFlBQVksSUFBSSxDQUNmLDBFQUFLLElBQUksRUFBQyxPQUFPLGdCQUFhLGNBQWMsQ0FBQyxtQkFBbUIsQ0FBQyxFQUFFLEdBQUcsRUFBRSxXQUFXLGFBQ2pGLHlFQUFLLFNBQVMsRUFBQyxzQkFBc0IsWUFBRSxjQUFjLENBQUMsbUJBQW1CLENBQUMsR0FBTyxFQUNqRix5RUFBSyxTQUFTLEVBQUMsYUFBYSxZQUMxQixnRUFBQyxzREFBVyxJQUFDLFFBQVEsRUFBRSxjQUFjLEVBQUUsSUFBSSxFQUFFLFVBQVUsRUFBRSxjQUFjLEVBQUUsY0FBYyxHQUFHLEdBQ3RGLElBQ0YsQ0FDUCxFQUNELGdFQUFDLDBEQUFtQixJQUFDLGFBQWEsRUFBRSxpQkFBaUIsRUFBRSxVQUFVLEVBQUUsaUJBQWlCLEVBQUUsc0JBQXNCLEVBQUUsMEJBQTBCLEdBQUksRUFDM0ksY0FBYyxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksRUFBRSxFQUFFO2dCQUMzQixzQ0FBc0M7Z0JBQ3RDLE9BQU8sQ0FDTCxnRUFBQywwREFBbUIsSUFBeUIsYUFBYSxFQUFFLElBQUksSUFBdEMsSUFBSSxDQUFDLFlBQVksQ0FBd0IsQ0FDcEU7WUFDSCxDQUFDLENBQUMsSUFDRSxDQUNQO0FBQ0gsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUN4T0QsZUFBZTtBQUNtRTtBQUNVO0FBU3JGLFNBQVMsZUFBZSxDQUFFLEtBQVk7SUFDM0MsTUFBTSxFQUFFLGdCQUFnQixFQUFFLFlBQVksRUFBRSxHQUFHLEtBQUs7SUFDaEQsTUFBTSxDQUFDLFdBQVcsRUFBRSxjQUFjLENBQUMsR0FBRyw0Q0FBSyxDQUFDLFFBQVEsQ0FBYyxJQUFJLENBQUM7SUFDdkUsTUFBTSxVQUFVLEdBQUcsNENBQUssQ0FBQyxNQUFNLENBQXdCLElBQUksQ0FBQztJQUU1RCw0Q0FBSyxDQUFDLFNBQVMsQ0FBQyxHQUFHLEVBQUU7UUFDbkIsSUFBSSxXQUFXLGFBQVgsV0FBVyx1QkFBWCxXQUFXLENBQUUsSUFBSSxFQUFFLENBQUM7WUFDdEIsSUFBSSxPQUFnQjtZQUNwQixnRUFBcUIsQ0FBQyx5QkFBeUIsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLGFBQW1DLEVBQUUsRUFBRTtnQkFDNUYsT0FBTyxHQUFHLGFBQWEsQ0FBQyxLQUFLLENBQUMsR0FBRyxFQUFFLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQyxNQUFxQixFQUFFLEVBQUU7b0JBQ3JGLElBQUksVUFBVSxDQUFDLE9BQU8sRUFBRSxDQUFDO3dCQUN2QixnQkFBZ0IsQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsQ0FBQztvQkFDekQsQ0FBQzt5QkFBTSxDQUFDO3dCQUNOLG1FQUFzQixDQUFDLENBQUMsdUJBQXVCLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsRUFBRTs0QkFDL0QsVUFBVSxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUMsQ0FBQyxDQUFDOzRCQUMvQixnQkFBZ0IsQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsQ0FBQzt3QkFDekQsQ0FBQyxDQUFDO29CQUNKLENBQUM7Z0JBQ0gsQ0FBQyxDQUFDO2dCQUNGLHFCQUFxQjtnQkFDckIsZ0JBQWdCLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUM7WUFDM0MsQ0FBQyxDQUFDO1lBQ0YsT0FBTyxHQUFHLEVBQUU7Z0JBQ1YsSUFBSSxPQUFPLEVBQUUsQ0FBQztvQkFDWixPQUFPLENBQUMsTUFBTSxFQUFFO2dCQUNsQixDQUFDO1lBQ0gsQ0FBQztRQUNILENBQUM7SUFDSCxDQUFDLEVBQUUsQ0FBQyxXQUFXLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQztJQUVuQyxNQUFNLHdCQUF3QixHQUFHLDRDQUFLLENBQUMsV0FBVyxDQUFDLENBQUMsV0FBd0IsRUFBRSxFQUFFO1FBQzlFLGNBQWMsQ0FBQyxZQUFXLGFBQVgsV0FBVyx1QkFBWCxXQUFXLENBQUUsSUFBSSxLQUFJLElBQUksQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUM7SUFDaEUsQ0FBQyxFQUFFLEVBQUUsQ0FBQztJQUVOLE9BQU8sQ0FDTCxnRUFBQyw0Q0FBSyxDQUFDLFFBQVEsY0FFWCxZQUFZLGFBQVosWUFBWSx1QkFBWixZQUFZLENBQUUsR0FBRyxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FDcEMsZ0VBQUMsNkRBQW9CLElBQ1gsY0FBYyxFQUFFLFdBQVcsRUFBRSxrQkFBa0IsRUFBRSx3QkFBd0IsSUFBNUUsQ0FBQyxDQUNOLENBQ0gsQ0FBQyxHQUVXLENBQ2xCO0FBQ0gsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUN4REQ7OztHQUdHOzs7Ozs7Ozs7O0FBSWlEO0FBQ3FCO0FBRXpFLE1BQU0sV0FBVyxHQUFHLHdGQUE0QixFQUFFO0FBRWxELCtFQUErRTtBQUMvRSxJQUFJLGlCQUFpQixHQUFHLENBQUM7QUFFekI7Ozs7O0dBS0c7QUFDSSxTQUFlLHdCQUF3QixDQUM1QyxRQUF1Qzs7O1FBRXZDLE1BQU0sR0FBRyxHQUFHLEVBQUUsaUJBQWlCO1FBQy9CLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQztZQUNkLFdBQVcsQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLEVBQUU7Z0JBQ2hDLEtBQUssRUFBRSxzQ0FBc0M7Z0JBQzdDLEdBQUc7Z0JBQ0gsU0FBUyxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUU7YUFDdEIsQ0FBQztZQUNGLE9BQU8sSUFBSTtRQUNiLENBQUM7UUFFRCxJQUFJLENBQUM7WUFDSCw2Q0FBNkM7WUFDN0MsTUFBTSxpQkFBaUIsR0FBRyxRQUFRLENBQUMsb0JBQW9CLEVBQUU7WUFDekQsTUFBTSxRQUFRLEdBQUcsaUJBQWlCLGFBQWpCLGlCQUFpQix1QkFBakIsaUJBQWlCLENBQUcsQ0FBQyxDQUEyQjtZQUVqRSxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUM7Z0JBQ2QsV0FBVyxDQUFDLEdBQUcsQ0FBQyxnQkFBZ0IsRUFBRTtvQkFDaEMsS0FBSyxFQUFFLHNDQUFzQztvQkFDN0MsVUFBVSxFQUFFLFFBQVEsQ0FBQyxFQUFFO29CQUN2QixTQUFTLEVBQUUsSUFBSSxDQUFDLEdBQUcsRUFBRTtpQkFDdEIsQ0FBQztnQkFDRixPQUFPLElBQUk7WUFDYixDQUFDO1lBRUQsK0NBQStDO1lBQy9DLE1BQU0sS0FBSyxHQUFJLFFBQWdCLENBQUMsS0FBSyxLQUFJLFlBQUMsUUFBZ0IsRUFBQyxRQUFRLGtEQUFJO1lBQ3ZFLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQztnQkFDWCxXQUFXLENBQUMsR0FBRyxDQUFDLGdCQUFnQixFQUFFO29CQUNoQyxLQUFLLEVBQUUsbUNBQW1DO29CQUMxQyxVQUFVLEVBQUUsUUFBUSxDQUFDLEVBQUU7b0JBQ3ZCLFNBQVMsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFO2lCQUN0QixDQUFDO2dCQUNGLE9BQU8sSUFBSTtZQUNiLENBQUM7WUFFRCwrQ0FBK0M7WUFDL0MsTUFBTSxTQUFTLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FDaEQsQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQztnQkFDcEIsT0FBUSxLQUFhLENBQUMsR0FBRyxDQUFDLEtBQUssVUFBVSxDQUMxQyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUMsK0JBQStCO1lBRTlDLFdBQVcsQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLEVBQUU7Z0JBQ2hDLEtBQUssRUFBRSwyQ0FBMkM7Z0JBQ2xELFVBQVUsRUFBRSxRQUFRLENBQUMsRUFBRTtnQkFDdkIsT0FBTyxFQUFFLEtBQUssQ0FBQyxFQUFFO2dCQUNqQixTQUFTLEVBQUUsS0FBSyxDQUFDLElBQUksSUFBSSxTQUFTO2dCQUNsQyxTQUFTLEVBQUUsU0FBUztnQkFDcEIsV0FBVyxFQUFFLENBQUMsQ0FBRSxLQUFhLENBQUMsR0FBRztnQkFDakMsWUFBWSxFQUFFLENBQUMsQ0FBRSxLQUFhLENBQUMsSUFBSTtnQkFDbkMsY0FBYyxFQUFFLENBQUMsQ0FBRSxLQUFhLENBQUMsTUFBTTtnQkFDdkMsWUFBWSxFQUFHLEtBQWEsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLE9BQVEsS0FBYSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsTUFBTTtnQkFDckUsU0FBUyxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUU7YUFDdEIsQ0FBQztZQUVGLHdFQUF3RTtZQUN4RSxNQUFNLE1BQU0sR0FBSSxLQUFhLENBQUMsTUFBTTtZQUNwQyxJQUFJLE1BQU0sRUFBRSxDQUFDO2dCQUNYLHdCQUF3QjtnQkFDeEIsTUFBTSxVQUFVLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FDbEQsQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQztvQkFDcEIsT0FBUSxNQUFjLENBQUMsR0FBRyxDQUFDLEtBQUssVUFBVSxDQUMzQyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDO2dCQUVkLFdBQVcsQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLEVBQUU7b0JBQ2hDLEtBQUssRUFBRSxrREFBa0Q7b0JBQ3pELFVBQVUsRUFBRSxRQUFRLENBQUMsRUFBRTtvQkFDdkIsT0FBTyxFQUFFLEtBQUssQ0FBQyxFQUFFO29CQUNqQixVQUFVLEVBQUUsTUFBTSxDQUFDLElBQUksSUFBSSxTQUFTO29CQUNwQyxVQUFVLEVBQUUsVUFBVTtvQkFDdEIsWUFBWSxFQUFFLENBQUMsQ0FBRSxNQUFjLENBQUMsR0FBRztvQkFDbkMsYUFBYSxFQUFFLENBQUMsQ0FBRSxNQUFjLENBQUMsSUFBSTtvQkFDckMsY0FBYyxFQUFFLENBQUMsQ0FBRSxNQUFjLENBQUMsS0FBSztvQkFDdkMsaUJBQWlCLEVBQUUsT0FBQyxNQUFjLENBQUMsS0FBSywwQ0FBRSxNQUFNLEtBQUksQ0FBQztvQkFDckQsZUFBZSxFQUFFLENBQUMsQ0FBRSxNQUFjLENBQUMsTUFBTTtvQkFDekMsU0FBUyxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUU7aUJBQ3RCLENBQUM7Z0JBRUYsOEJBQThCO2dCQUM5QixJQUFLLE1BQWMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztvQkFDekIsTUFBTSxJQUFJLEdBQUksTUFBYyxDQUFDLElBQXlDO29CQUN0RSxXQUFXLENBQUMsR0FBRyxDQUFDLGdCQUFnQixFQUFFO3dCQUNoQyxLQUFLLEVBQUUsd0RBQXdEO3dCQUMvRCxVQUFVLEVBQUUsUUFBUSxDQUFDLEVBQUU7d0JBQ3ZCLE9BQU8sRUFBRSxLQUFLLENBQUMsRUFBRTt3QkFDakIsUUFBUSxFQUFFLElBQUksQ0FBQyxJQUFJLElBQUksU0FBUzt3QkFDaEMsU0FBUyxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUU7cUJBQ3RCLENBQUM7b0JBQ0YsT0FBTyxJQUFJO2dCQUNiLENBQUM7Z0JBRUQsMkNBQTJDO2dCQUMzQyxNQUFNLFNBQVMsR0FBSSxNQUFjLENBQUMsR0FBRztnQkFDckMsSUFBSSxTQUFTLEVBQUUsQ0FBQztvQkFDZCxNQUFNLElBQUksR0FBRyxTQUFTLENBQUMsSUFBSTt3QkFDZCxDQUFDLHFCQUFTLENBQUMsS0FBSywwQ0FBRSxTQUFTLG1EQUFHLENBQUMsQ0FBQyxDQUFDO3dCQUNqQyxDQUFDLGdCQUFTLENBQUMsS0FBSywwQ0FBRSxNQUFNLElBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUM7b0JBQ3RFLElBQUksSUFBSSxFQUFFLENBQUM7d0JBQ1QsV0FBVyxDQUFDLEdBQUcsQ0FBQyxnQkFBZ0IsRUFBRTs0QkFDaEMsS0FBSyxFQUFFLHVEQUF1RDs0QkFDOUQsVUFBVSxFQUFFLFFBQVEsQ0FBQyxFQUFFOzRCQUN2QixPQUFPLEVBQUUsS0FBSyxDQUFDLEVBQUU7NEJBQ2pCLFFBQVEsRUFBRSxJQUFJLENBQUMsSUFBSSxJQUFJLFNBQVM7NEJBQ2hDLFNBQVMsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFO3lCQUN0QixDQUFDO3dCQUNGLE9BQU8sSUFBeUM7b0JBQ2xELENBQUM7Z0JBQ0gsQ0FBQztnQkFFRCxrRUFBa0U7Z0JBQ2xFLElBQUksTUFBTSxDQUFDLElBQUksS0FBSyxLQUFLLElBQUksTUFBTSxDQUFDLElBQUksS0FBSyxPQUFPLElBQUssTUFBYyxDQUFDLE1BQU0sRUFBRSxDQUFDO29CQUMvRSxXQUFXLENBQUMsR0FBRyxDQUFDLGdCQUFnQixFQUFFO3dCQUNoQyxLQUFLLEVBQUUsMkRBQTJEO3dCQUNsRSxVQUFVLEVBQUUsUUFBUSxDQUFDLEVBQUU7d0JBQ3ZCLE9BQU8sRUFBRSxLQUFLLENBQUMsRUFBRTt3QkFDakIsUUFBUSxFQUFFLE1BQU0sQ0FBQyxJQUFJLElBQUksU0FBUzt3QkFDbEMsU0FBUyxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUU7cUJBQ3RCLENBQUM7b0JBQ0YsT0FBTyxNQUEyQztnQkFDcEQsQ0FBQztZQUNILENBQUM7WUFFRCwyQ0FBMkM7WUFDM0MsNkNBQTZDO1lBQzdDLElBQUssS0FBYSxDQUFDLElBQUksRUFBRSxDQUFDO2dCQUN4QixNQUFNLElBQUksR0FBSSxLQUFhLENBQUMsSUFBeUM7Z0JBQ3JFLFdBQVcsQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLEVBQUU7b0JBQ2hDLEtBQUssRUFBRSxpREFBaUQ7b0JBQ3hELFVBQVUsRUFBRSxRQUFRLENBQUMsRUFBRTtvQkFDdkIsT0FBTyxFQUFFLEtBQUssQ0FBQyxFQUFFO29CQUNqQixRQUFRLEVBQUUsSUFBSSxDQUFDLElBQUksSUFBSSxTQUFTO29CQUNoQyxTQUFTLEVBQUUsSUFBSSxDQUFDLEdBQUcsRUFBRTtpQkFDdEIsQ0FBQztnQkFDRixPQUFPLElBQUk7WUFDYixDQUFDO1lBRUQsc0RBQXNEO1lBQ3RELE1BQU0sR0FBRyxHQUFJLEtBQWEsQ0FBQyxHQUFHO2lCQUNsQixNQUFDLEtBQWEsQ0FBQyxNQUFNLDBDQUFFLEdBQUc7Z0JBQ3pCLEtBQWEsQ0FBQyxLQUFLO2dCQUNuQixLQUFhLENBQUMsSUFBSTtZQUUvQixJQUFJLEdBQUcsRUFBRSxDQUFDO2dCQUNSLHFCQUFxQjtnQkFDckIsTUFBTSxPQUFPLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FDNUMsQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQztvQkFDcEIsT0FBUSxHQUFXLENBQUMsR0FBRyxDQUFDLEtBQUssVUFBVSxDQUN4QyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDO2dCQUVkLFdBQVcsQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLEVBQUU7b0JBQ2hDLEtBQUssRUFBRSxvQ0FBb0M7b0JBQzNDLFVBQVUsRUFBRSxRQUFRLENBQUMsRUFBRTtvQkFDdkIsT0FBTyxFQUFFLEtBQUssQ0FBQyxFQUFFO29CQUNqQixLQUFLLEVBQUUsR0FBRyxDQUFDLEVBQUUsSUFBSSxTQUFTO29CQUMxQixPQUFPLEVBQUUsT0FBTztvQkFDaEIsVUFBVSxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSTtvQkFDdEIsV0FBVyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUM7b0JBQzFCLGNBQWMsRUFBRSxVQUFHLENBQUMsS0FBSywwQ0FBRSxNQUFNLEtBQUksQ0FBQztvQkFDdEMsU0FBUyxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUU7aUJBQ3RCLENBQUM7Z0JBRUYsTUFBTSxJQUFJLEdBQUcsR0FBRyxDQUFDLElBQUk7b0JBQ1IsQ0FBQyxlQUFHLENBQUMsS0FBSywwQ0FBRSxTQUFTLG1EQUFHLENBQUMsQ0FBQyxDQUFDO29CQUMzQixDQUFDLFVBQUcsQ0FBQyxLQUFLLDBDQUFFLE1BQU0sSUFBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQztvQkFDN0MsQ0FBQyxHQUFHLENBQUMsS0FBSyxJQUFJLEdBQUcsQ0FBQyxLQUFLLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQztnQkFFaEYsSUFBSSxJQUFJLEVBQUUsQ0FBQztvQkFDVCxXQUFXLENBQUMsR0FBRyxDQUFDLGdCQUFnQixFQUFFO3dCQUNoQyxLQUFLLEVBQUUsZ0RBQWdEO3dCQUN2RCxVQUFVLEVBQUUsUUFBUSxDQUFDLEVBQUU7d0JBQ3ZCLE9BQU8sRUFBRSxLQUFLLENBQUMsRUFBRTt3QkFDakIsUUFBUSxFQUFFLElBQUksQ0FBQyxJQUFJLElBQUksU0FBUzt3QkFDaEMsU0FBUyxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUU7cUJBQ3RCLENBQUM7b0JBQ0YsT0FBTyxJQUF5QztnQkFDbEQsQ0FBQztZQUNILENBQUM7WUFFRCwyREFBMkQ7WUFDM0QsTUFBTSxNQUFNLEdBQUcsUUFBUSxDQUFDLGlCQUFpQixFQUFFO1lBQzNDLElBQUksTUFBTSxFQUFFLENBQUM7Z0JBQ1gsTUFBTSxPQUFPLEdBQUcsYUFBQyxNQUFjLEVBQUMsTUFBTSxrREFBSTtvQkFDekIsTUFBYyxDQUFDLEdBQUc7b0JBQ2xCLE1BQWMsQ0FBQyxLQUFLO29CQUNwQixNQUFjLENBQUMsSUFBSTtnQkFFcEMsSUFBSSxPQUFPLEVBQUUsQ0FBQztvQkFDWiwwQkFBMEI7b0JBQzFCLE1BQU0sV0FBVyxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQ3BELENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUM7d0JBQ3BCLE9BQVEsT0FBZSxDQUFDLEdBQUcsQ0FBQyxLQUFLLFVBQVUsQ0FDNUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQztvQkFFZCxXQUFXLENBQUMsR0FBRyxDQUFDLGdCQUFnQixFQUFFO3dCQUNoQyxLQUFLLEVBQUUseUNBQXlDO3dCQUNoRCxVQUFVLEVBQUUsUUFBUSxDQUFDLEVBQUU7d0JBQ3ZCLFFBQVEsRUFBRSxNQUFNLENBQUMsRUFBRTt3QkFDbkIsVUFBVSxFQUFFLE1BQU0sQ0FBQyxJQUFJO3dCQUN2QixTQUFTLEVBQUUsT0FBTyxDQUFDLEVBQUUsSUFBSSxTQUFTO3dCQUNsQyxXQUFXLEVBQUUsV0FBVzt3QkFDeEIsY0FBYyxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsSUFBSTt3QkFDOUIsZUFBZSxFQUFFLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUM7d0JBQ2xDLGtCQUFrQixFQUFFLGNBQU8sQ0FBQyxLQUFLLDBDQUFFLE1BQU0sS0FBSSxDQUFDO3dCQUM5QyxTQUFTLEVBQUUsSUFBSSxDQUFDLEdBQUcsRUFBRTtxQkFDdEIsQ0FBQztvQkFFRixNQUFNLElBQUksR0FBRyxPQUFPLENBQUMsSUFBSTt3QkFDWixDQUFDLG1CQUFPLENBQUMsS0FBSywwQ0FBRSxTQUFTLG1EQUFHLENBQUMsQ0FBQyxDQUFDO3dCQUMvQixDQUFDLGNBQU8sQ0FBQyxLQUFLLDBDQUFFLE1BQU0sSUFBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQzt3QkFDckQsQ0FBQyxPQUFPLENBQUMsS0FBSyxJQUFJLE9BQU8sQ0FBQyxLQUFLLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQztvQkFFNUYsSUFBSSxJQUFJLEVBQUUsQ0FBQzt3QkFDVCxXQUFXLENBQUMsR0FBRyxDQUFDLGdCQUFnQixFQUFFOzRCQUNoQyxLQUFLLEVBQUUsNkNBQTZDOzRCQUNwRCxVQUFVLEVBQUUsUUFBUSxDQUFDLEVBQUU7NEJBQ3ZCLFFBQVEsRUFBRSxNQUFNLENBQUMsRUFBRTs0QkFDbkIsUUFBUSxFQUFFLElBQUksQ0FBQyxJQUFJLElBQUksU0FBUzs0QkFDaEMsU0FBUyxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUU7eUJBQ3RCLENBQUM7d0JBQ0YsT0FBTyxJQUF5QztvQkFDbEQsQ0FBQztnQkFDSCxDQUFDO3FCQUFNLENBQUM7b0JBQ04saURBQWlEO29CQUNqRCxNQUFNLFVBQVUsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUNsRCxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDO3dCQUNwQixPQUFRLE1BQWMsQ0FBQyxHQUFHLENBQUMsS0FBSyxVQUFVLENBQzNDLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUM7b0JBRWQsV0FBVyxDQUFDLEdBQUcsQ0FBQyxnQkFBZ0IsRUFBRTt3QkFDaEMsS0FBSyxFQUFFLDZDQUE2Qzt3QkFDcEQsVUFBVSxFQUFFLFFBQVEsQ0FBQyxFQUFFO3dCQUN2QixRQUFRLEVBQUUsTUFBTSxDQUFDLEVBQUU7d0JBQ25CLFVBQVUsRUFBRSxNQUFNLENBQUMsSUFBSTt3QkFDdkIsVUFBVSxFQUFFLFVBQVU7d0JBQ3RCLFNBQVMsRUFBRSxPQUFRLE1BQWMsQ0FBQyxNQUFNLEtBQUssVUFBVTt3QkFDdkQsTUFBTSxFQUFFLENBQUMsQ0FBRSxNQUFjLENBQUMsR0FBRzt3QkFDN0IsU0FBUyxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUU7cUJBQ3RCLENBQUM7Z0JBQ0osQ0FBQztZQUNILENBQUM7WUFFRCxXQUFXLENBQUMsR0FBRyxDQUFDLGdCQUFnQixFQUFFO2dCQUNoQyxLQUFLLEVBQUUsa0NBQWtDO2dCQUN6QyxVQUFVLEVBQUUsUUFBUSxDQUFDLEVBQUU7Z0JBQ3ZCLE9BQU8sRUFBRSxLQUFLLENBQUMsRUFBRTtnQkFDakIsV0FBVyxFQUFFLENBQUMsQ0FBQyxHQUFHO2dCQUNsQixTQUFTLEVBQUUsQ0FBQyxDQUFDLE1BQU07Z0JBQ25CLFNBQVMsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFO2FBQ3RCLENBQUM7WUFDRixPQUFPLElBQUk7UUFDYixDQUFDO1FBQUMsT0FBTyxLQUFLLEVBQUUsQ0FBQztZQUNmLFdBQVcsQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLEVBQUU7Z0JBQ2hDLEtBQUssRUFBRSxnQ0FBZ0M7Z0JBQ3ZDLEtBQUssRUFBRSxLQUFLLFlBQVksS0FBSyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDO2dCQUM3RCxVQUFVLEVBQUUsS0FBSyxZQUFZLEtBQUssQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsU0FBUztnQkFDNUQsU0FBUyxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUU7YUFDdEIsQ0FBQztZQUNGLE9BQU8sSUFBSTtRQUNiLENBQUM7SUFDSCxDQUFDO0NBQUE7QUFFRDs7O0dBR0c7QUFDSCxTQUFTLHlCQUF5QixDQUNoQyxZQUFvQixFQUNwQixPQUEwQztJQUUxQywyREFBMkQ7SUFDM0QsTUFBTSxnQkFBZ0IsR0FBRyxDQUFDLE9BQU8sQ0FBQyxnQkFBZ0IsSUFBSSxFQUFFLENBQTRCO0lBRXBGLDJEQUEyRDtJQUMzRCxJQUFJLGNBQWMsR0FBb0IsSUFBSTtJQUUxQyxJQUFJLGdCQUFnQixDQUFDLEtBQUssRUFBRSxDQUFDO1FBQzNCLDJDQUEyQztRQUMzQyxJQUFJLE9BQU8sZ0JBQWdCLENBQUMsS0FBSyxLQUFLLFFBQVEsSUFBSSxRQUFRLElBQUksZ0JBQWdCLENBQUMsS0FBSyxFQUFFLENBQUM7WUFDckYsY0FBYyxHQUFJLGdCQUFnQixDQUFDLEtBQWEsQ0FBQyxNQUFNLEVBQUU7UUFDM0QsQ0FBQztRQUNELDJCQUEyQjthQUN0QixJQUFJLEtBQUssQ0FBQyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQztZQUMvQyxjQUFjLEdBQUcsZ0JBQWdCLENBQUMsS0FBSztRQUN6QyxDQUFDO0lBQ0gsQ0FBQztJQUVELHlGQUF5RjtJQUN6RixJQUFJLENBQUMsY0FBYyxFQUFFLENBQUM7UUFDcEIsY0FBYyxHQUFHLENBQUMsQ0FBQyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxDQUFDLEVBQUMsdUJBQXVCO0lBQzdELENBQUM7SUFFRCx5Q0FBeUM7SUFDekMsTUFBTSxTQUFTLEdBQUcsY0FBYyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQzVDLE1BQU0sU0FBUyxHQUFHLGNBQWMsQ0FBQyxNQUFNLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUc7SUFFdEUsd0RBQXdEO0lBQ3hELE1BQU0sV0FBVyxHQUFHLGdCQUFnQixDQUFDLFdBQVcsS0FBSyxTQUFTO1FBQzVELENBQUMsQ0FBQyxnQkFBZ0IsQ0FBQyxXQUFXO1FBQzlCLENBQUMsQ0FBQyxJQUFJLEVBQUMsK0JBQStCO0lBQ3hDLE1BQU0sU0FBUyxHQUFHLENBQUMsR0FBRyxTQUFTLEVBQUUsV0FBVyxDQUFDO0lBRTdDLDJEQUEyRDtJQUMzRCxNQUFNLFdBQVcsR0FBRyxnQkFBZ0IsQ0FBQyxXQUFXLEtBQUssU0FBUztRQUM1RCxDQUFDLENBQUMsZ0JBQWdCLENBQUMsV0FBVztRQUM5QixDQUFDLENBQUMsU0FBUyxFQUFDLG9EQUFvRDtJQUNsRSxNQUFNLFlBQVksR0FBRyxDQUFDLEdBQUcsU0FBUyxFQUFFLFdBQVcsQ0FBQztJQUVoRCxtREFBbUQ7SUFDbkQsTUFBTSxXQUFXLEdBQUcsZ0JBQWdCLENBQUMsV0FBVyxLQUFLLFNBQVM7UUFDNUQsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLENBQUMsV0FBVyxFQUFFLEdBQUcsQ0FBQyxDQUFDLHVCQUF1QjtRQUNyRSxDQUFDLENBQUMsU0FBUyxFQUFDLDJDQUEyQztJQUN6RCxNQUFNLFNBQVMsR0FBRyxDQUFDLEdBQUcsU0FBUyxFQUFFLFdBQVcsQ0FBQztJQUU3QyxRQUFRLFlBQVksRUFBRSxDQUFDO1FBQ3JCLEtBQUssT0FBTyxDQUFDO1FBQ2IsS0FBSyxZQUFZO1lBQ2YsT0FBTztnQkFDTCxJQUFJLEVBQUUsZUFBZTtnQkFDckIsS0FBSyxFQUFFLFlBQVk7Z0JBQ25CLE9BQU8sRUFBRTtvQkFDUCxLQUFLLEVBQUUsWUFBWTtvQkFDbkIsS0FBSyxFQUFFLENBQUM7aUJBQ1Q7Z0JBQ0QsSUFBSSxFQUFFLEVBQUU7YUFDK0I7UUFFM0MsS0FBSyxVQUFVO1lBQ2IsT0FBTztnQkFDTCxJQUFJLEVBQUUsYUFBYTtnQkFDbkIsS0FBSyxFQUFFLFNBQVMsRUFBRSxvQ0FBb0M7Z0JBQ3RELEtBQUssRUFBRSxDQUFDLENBQUMsaUNBQWlDO2FBQ0w7UUFFekMsS0FBSyxTQUFTLENBQUM7UUFDZixLQUFLLGNBQWM7WUFDakIsT0FBTztnQkFDTCxJQUFJLEVBQUUsYUFBYTtnQkFDbkIsS0FBSyxFQUFFLFNBQVM7Z0JBQ2hCLE9BQU8sRUFBRTtvQkFDUCxLQUFLLEVBQUUsWUFBWTtvQkFDbkIsS0FBSyxFQUFFLENBQUM7aUJBQ1Q7YUFDb0M7UUFFekM7WUFDRSw2QkFBNkI7WUFDN0IsT0FBTztnQkFDTCxJQUFJLEVBQUUsYUFBYTtnQkFDbkIsS0FBSyxFQUFFLFNBQVM7Z0JBQ2hCLE9BQU8sRUFBRTtvQkFDUCxLQUFLLEVBQUUsWUFBWTtvQkFDbkIsS0FBSyxFQUFFLENBQUM7aUJBQ1Q7YUFDb0M7SUFDM0MsQ0FBQztBQUNILENBQUM7QUFFRDs7O0dBR0c7QUFDSSxTQUFlLHdCQUF3QixDQUM1QyxRQUFnQixFQUNoQixPQUEwQzs7UUFFMUMsTUFBTSxHQUFHLEdBQUcsRUFBRSxpQkFBaUI7UUFDL0IsTUFBTSxPQUFPLEdBQUcseUJBQXlCLFFBQVEsRUFBRTtRQUVuRCxJQUFJLENBQUM7WUFDSCxnQ0FBZ0M7WUFDaEMsTUFBTSxhQUFhLEdBQUcsT0FBTyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLEVBQUUsS0FBSyxPQUFPLENBQXlCO1lBQ3BHLElBQUksYUFBYSxFQUFFLENBQUM7Z0JBQ2xCLFdBQVcsQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLEVBQUU7b0JBQ2hDLEtBQUssRUFBRSx5Q0FBeUM7b0JBQ2hELEdBQUc7b0JBQ0gsUUFBUTtvQkFDUixPQUFPO29CQUNQLFNBQVMsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFO2lCQUN0QixDQUFDO2dCQUNGLE9BQU8sYUFBYTtZQUN0QixDQUFDO1lBRUQsNEJBQTRCO1lBQzVCLE1BQU0sQ0FBQyxhQUFhLENBQUMsR0FBRyxNQUFNLG1FQUFzQixDQUFDLENBQUMsMkJBQTJCLENBQUMsQ0FBQztZQUVuRiw0QkFBNEI7WUFDNUIsTUFBTSxhQUFhLEdBQUcsSUFBSSxhQUFhLENBQUM7Z0JBQ3RDLEVBQUUsRUFBRSxPQUFPO2dCQUNYLEtBQUssRUFBRSwyQkFBMkIsUUFBUSxHQUFHO2dCQUM3QyxRQUFRLEVBQUUsTUFBTSxFQUFFLHVCQUF1QjtnQkFDekMsT0FBTyxFQUFFLElBQUk7YUFDZCxDQUFDO1lBRUYsYUFBYTtZQUNiLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLGFBQWEsQ0FBQztZQUU5QixXQUFXLENBQUMsR0FBRyxDQUFDLGdCQUFnQixFQUFFO2dCQUNoQyxLQUFLLEVBQUUsa0NBQWtDO2dCQUN6QyxHQUFHO2dCQUNILFFBQVE7Z0JBQ1IsT0FBTztnQkFDUCxTQUFTLEVBQUUsSUFBSSxDQUFDLEdBQUcsRUFBRTthQUN0QixDQUFDO1lBRUYsT0FBTyxhQUFhO1FBQ3RCLENBQUM7UUFBQyxPQUFPLEtBQUssRUFBRSxDQUFDO1lBQ2YsV0FBVyxDQUFDLEdBQUcsQ0FBQyxnQkFBZ0IsRUFBRTtnQkFDaEMsS0FBSyxFQUFFLGdDQUFnQztnQkFDdkMsR0FBRztnQkFDSCxRQUFRO2dCQUNSLE9BQU87Z0JBQ1AsS0FBSyxFQUFFLEtBQUssWUFBWSxLQUFLLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUM7Z0JBQzdELFVBQVUsRUFBRSxLQUFLLFlBQVksS0FBSyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxTQUFTO2dCQUM1RCxTQUFTLEVBQUUsSUFBSSxDQUFDLEdBQUcsRUFBRTthQUN0QixDQUFDO1lBQ0YsT0FBTyxJQUFJO1FBQ2IsQ0FBQztJQUNILENBQUM7Q0FBQTtBQUVEOzs7R0FHRztBQUNJLFNBQWUsb0JBQW9CLENBQ3hDLGFBQW1DLEVBQ25DLE9BQTRCLEVBQzVCLE9BQTBDOztRQUUxQyxNQUFNLEdBQUcsR0FBRyxFQUFFLGlCQUFpQjtRQUMvQixJQUFJLENBQUMsYUFBYSxJQUFJLENBQUMsT0FBTyxJQUFJLE9BQU8sQ0FBQyxNQUFNLEtBQUssQ0FBQyxFQUFFLENBQUM7WUFDdkQsV0FBVyxDQUFDLEdBQUcsQ0FBQyxnQkFBZ0IsRUFBRTtnQkFDaEMsS0FBSyxFQUFFLDhCQUE4QjtnQkFDckMsR0FBRztnQkFDSCxNQUFNLEVBQUUsQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLG1CQUFtQixDQUFDLENBQUMsQ0FBQyxZQUFZO2dCQUMzRCxZQUFZLEVBQUUsUUFBTyxhQUFQLE9BQU8sdUJBQVAsT0FBTyxDQUFFLE1BQU0sS0FBSSxDQUFDO2dCQUNsQyxTQUFTLEVBQUUsSUFBSSxDQUFDLEdBQUcsRUFBRTthQUN0QixDQUFDO1lBQ0YsT0FBTTtRQUNSLENBQUM7UUFFRCx3RUFBd0U7UUFDeEUsTUFBTSxxQkFBcUIsR0FBRyxhQUFhLENBQUMsUUFBUSxDQUFDLE1BQU07UUFDM0QsTUFBTSxpQkFBaUIsR0FBYSxFQUFFO1FBQ3RDLE1BQU0sbUJBQW1CLEdBQUcsSUFBSSxHQUFHLEVBQVU7UUFFN0MsYUFBYSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLEVBQUU7O1lBQ3ZDLE1BQU0sUUFBUSxHQUFHLGFBQU8sQ0FBQyxVQUFVLDBDQUFFLFFBQVE7WUFDN0MsSUFBSSxRQUFRLEVBQUUsQ0FBQztnQkFDYixpQkFBaUIsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDO2dCQUNoQyxtQkFBbUIsQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDO1lBQ25DLENBQUM7UUFDSCxDQUFDLENBQUM7UUFFRiwrQkFBK0I7UUFDL0IsTUFBTSxpQkFBaUIsR0FBRyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDO1FBRXJELFdBQVcsQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLEVBQUU7WUFDaEMsS0FBSyxFQUFFLGlDQUFpQztZQUN4QyxHQUFHO1lBQ0gsZUFBZSxFQUFFLGFBQWEsQ0FBQyxFQUFFO1lBQ2pDLHFCQUFxQjtZQUNyQixpQkFBaUIsRUFBRSxpQkFBaUIsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLG9DQUFvQztZQUN2RixzQkFBc0IsRUFBRSxpQkFBaUIsQ0FBQyxNQUFNO1lBQ2hELGlCQUFpQixFQUFFLGlCQUFpQixDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsb0JBQW9CO1lBQ3ZFLHNCQUFzQixFQUFFLGlCQUFpQixDQUFDLE1BQU07WUFDaEQsa0JBQWtCLEVBQUUsaUJBQWlCLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsbUJBQW1CLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUM7WUFDNUYsY0FBYyxFQUFFLGlCQUFpQixDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLG1CQUFtQixDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLE1BQU07WUFDbEYsU0FBUyxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUU7U0FDdEIsQ0FBQztRQUVGLHNCQUFzQjtRQUN0QixNQUFNLENBQUMsT0FBTyxDQUFDLEdBQUcsTUFBTSxtRUFBc0IsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxDQUFDO1FBRWhFLElBQUksVUFBVSxHQUFHLENBQUM7UUFDbEIsSUFBSSxZQUFZLEdBQUcsQ0FBQztRQUNwQixJQUFJLGNBQWMsR0FBRyxDQUFDO1FBQ3RCLE1BQU0sY0FBYyxHQUFhLEVBQUU7UUFDbkMsTUFBTSxnQkFBZ0IsR0FBYSxFQUFFO1FBQ3JDLE1BQU0sa0JBQWtCLEdBQWEsRUFBRTtRQUV2QyxPQUFPLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxFQUFFO1lBQ3ZCLElBQUksQ0FBQztnQkFDSCxNQUFNLFFBQVEsR0FBRyxNQUFNLENBQUMsS0FBSyxFQUFFO2dCQUUvQiwyREFBMkQ7Z0JBQzNELElBQUksbUJBQW1CLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUM7b0JBQ3RDLGNBQWMsRUFBRTtvQkFDaEIsa0JBQWtCLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQztvQkFDakMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxnQkFBZ0IsRUFBRTt3QkFDaEMsS0FBSyxFQUFFLHlDQUF5Qzt3QkFDaEQsR0FBRzt3QkFDSCxRQUFRO3dCQUNSLGVBQWUsRUFBRSxhQUFhLENBQUMsRUFBRTt3QkFDakMsU0FBUyxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUU7cUJBQ3RCLENBQUM7b0JBQ0YsT0FBTSxDQUFDLHdCQUF3QjtnQkFDakMsQ0FBQztnQkFFRCxNQUFNLE9BQU8sR0FBRyxNQUFNLENBQUMsT0FBeUI7Z0JBQ2hELElBQUksQ0FBQyxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxFQUFFLENBQUM7b0JBQ2xDLFlBQVksRUFBRTtvQkFDZCxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDO29CQUMvQixPQUFNO2dCQUNSLENBQUM7Z0JBRUQsaUNBQWlDO2dCQUNqQyxNQUFNLFlBQVksR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLElBQUk7Z0JBRTFDLDhDQUE4QztnQkFDOUMsTUFBTSxNQUFNLEdBQUcseUJBQXlCLENBQUMsWUFBWSxFQUFFLE9BQU8sQ0FBQztnQkFFL0QsMkNBQTJDO2dCQUMzQyxNQUFNLGdCQUFnQixHQUFHLElBQUksT0FBTyxDQUFDO29CQUNuQyxRQUFRLEVBQUUsT0FBTyxDQUFDLFFBQVE7b0JBQzFCLE1BQU0sRUFBRSxNQUFNO29CQUNkLFVBQVUsRUFBRTt3QkFDVixRQUFRLEVBQUUsUUFBUTt3QkFDbEIsTUFBTSxFQUFFLHVCQUF1Qjt3QkFDL0IsUUFBUSxFQUFFLGFBQWEsQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDLHdCQUF3QixFQUFFLEVBQUUsQ0FBQztxQkFDakU7aUJBQ0YsQ0FBQztnQkFFRixhQUFhLENBQUMsR0FBRyxDQUFDLGdCQUFnQixDQUFDO2dCQUNuQyxVQUFVLEVBQUU7Z0JBQ1osY0FBYyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUM7Z0JBRTdCLDhEQUE4RDtnQkFDOUQsbUJBQW1CLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQztZQUNuQyxDQUFDO1lBQUMsT0FBTyxLQUFLLEVBQUUsQ0FBQztnQkFDZixZQUFZLEVBQUU7Z0JBQ2QsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsQ0FBQztnQkFDckMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxnQkFBZ0IsRUFBRTtvQkFDaEMsS0FBSyxFQUFFLG1DQUFtQztvQkFDMUMsR0FBRztvQkFDSCxRQUFRLEVBQUUsTUFBTSxDQUFDLEtBQUssRUFBRTtvQkFDeEIsS0FBSyxFQUFFLEtBQUssWUFBWSxLQUFLLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUM7b0JBQzdELFNBQVMsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFO2lCQUN0QixDQUFDO1lBQ0osQ0FBQztRQUNILENBQUMsQ0FBQztRQUVGLCtCQUErQjtRQUMvQixNQUFNLGtCQUFrQixHQUFHLGFBQWEsQ0FBQyxRQUFRLENBQUMsTUFBTTtRQUN4RCxNQUFNLGNBQWMsR0FBYSxFQUFFO1FBQ25DLGFBQWEsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxFQUFFOztZQUN2QyxNQUFNLFFBQVEsR0FBRyxhQUFPLENBQUMsVUFBVSwwQ0FBRSxRQUFRO1lBQzdDLElBQUksUUFBUSxFQUFFLENBQUM7Z0JBQ2IsY0FBYyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUM7WUFDL0IsQ0FBQztRQUNILENBQUMsQ0FBQztRQUVGLFdBQVcsQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLEVBQUU7WUFDaEMsS0FBSyxFQUFFLCtCQUErQjtZQUN0QyxHQUFHO1lBQ0gsZUFBZSxFQUFFLGFBQWEsQ0FBQyxFQUFFO1lBQ2pDLFlBQVksRUFBRSxPQUFPLENBQUMsTUFBTTtZQUM1QixVQUFVO1lBQ1YsWUFBWTtZQUNaLGNBQWM7WUFDZCxjQUFjLEVBQUUsY0FBYyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsb0JBQW9CO1lBQ2pFLGdCQUFnQixFQUFFLGdCQUFnQixDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDO1lBQy9DLGtCQUFrQixFQUFFLGtCQUFrQixDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDO1lBQ25ELHFCQUFxQjtZQUNyQixrQkFBa0I7WUFDbEIsa0JBQWtCLEVBQUUscUJBQXFCLEdBQUcsVUFBVTtZQUN0RCxjQUFjLEVBQUUsY0FBYyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsb0JBQW9CO1lBQ2pFLG1CQUFtQixFQUFFLGNBQWMsQ0FBQyxNQUFNO1lBQzFDLFNBQVMsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFO1NBQ3RCLENBQUM7SUFDSixDQUFDO0NBQUE7QUFFRDs7R0FFRztBQUNJLFNBQVMsdUJBQXVCLENBQ3JDLGFBQW1DLEVBQ25DLFNBQW1CO0lBRW5CLE1BQU0sR0FBRyxHQUFHLEVBQUUsaUJBQWlCO0lBQy9CLElBQUksQ0FBQyxhQUFhLElBQUksQ0FBQyxTQUFTLElBQUksU0FBUyxDQUFDLE1BQU0sS0FBSyxDQUFDLEVBQUUsQ0FBQztRQUMzRCxXQUFXLENBQUMsR0FBRyxDQUFDLGdCQUFnQixFQUFFO1lBQ2hDLEtBQUssRUFBRSxpQ0FBaUM7WUFDeEMsR0FBRztZQUNILE1BQU0sRUFBRSxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsbUJBQW1CLENBQUMsQ0FBQyxDQUFDLGVBQWU7WUFDOUQsY0FBYyxFQUFFLFVBQVMsYUFBVCxTQUFTLHVCQUFULFNBQVMsQ0FBRSxNQUFNLEtBQUksQ0FBQztZQUN0QyxTQUFTLEVBQUUsSUFBSSxDQUFDLEdBQUcsRUFBRTtTQUN0QixDQUFDO1FBQ0YsT0FBTTtJQUNSLENBQUM7SUFFRCxNQUFNLFdBQVcsR0FBRyxJQUFJLEdBQUcsQ0FBQyxTQUFTLENBQUM7SUFDdEMsSUFBSSxZQUFZLEdBQUcsQ0FBQztJQUVwQiwrQ0FBK0M7SUFDL0MsTUFBTSxnQkFBZ0IsR0FBcUIsRUFBRTtJQUM3QyxhQUFhLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsRUFBRTs7UUFDdkMsTUFBTSxRQUFRLEdBQUcsYUFBTyxDQUFDLFVBQVUsMENBQUUsUUFBUTtRQUM3QyxJQUFJLFFBQVEsSUFBSSxXQUFXLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUM7WUFDMUMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQztRQUNoQyxDQUFDO0lBQ0gsQ0FBQyxDQUFDO0lBRUYsZ0JBQWdCLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxFQUFFO1FBQ2pDLGFBQWEsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDO1FBQzdCLFlBQVksRUFBRTtJQUNoQixDQUFDLENBQUM7SUFFRixXQUFXLENBQUMsR0FBRyxDQUFDLGdCQUFnQixFQUFFO1FBQ2hDLEtBQUssRUFBRSxrQ0FBa0M7UUFDekMsR0FBRztRQUNILGVBQWUsRUFBRSxhQUFhLENBQUMsRUFBRTtRQUNqQyxjQUFjLEVBQUUsU0FBUyxDQUFDLE1BQU07UUFDaEMsWUFBWTtRQUNaLFNBQVMsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFO0tBQ3RCLENBQUM7QUFDSixDQUFDO0FBRUQ7O0dBRUc7QUFDSSxTQUFTLGtCQUFrQixDQUFDLGFBQW1DO0lBQ3BFLE1BQU0sR0FBRyxHQUFHLEVBQUUsaUJBQWlCO0lBQy9CLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztRQUNuQixXQUFXLENBQUMsR0FBRyxDQUFDLGdCQUFnQixFQUFFO1lBQ2hDLEtBQUssRUFBRSw0QkFBNEI7WUFDbkMsR0FBRztZQUNILE1BQU0sRUFBRSxtQkFBbUI7WUFDM0IsU0FBUyxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUU7U0FDdEIsQ0FBQztRQUNGLE9BQU07SUFDUixDQUFDO0lBRUQsTUFBTSxhQUFhLEdBQUcsYUFBYSxDQUFDLFFBQVEsQ0FBQyxNQUFNO0lBQ25ELGFBQWEsQ0FBQyxTQUFTLEVBQUU7SUFFekIsV0FBVyxDQUFDLEdBQUcsQ0FBQyxnQkFBZ0IsRUFBRTtRQUNoQyxLQUFLLEVBQUUsNkJBQTZCO1FBQ3BDLEdBQUc7UUFDSCxlQUFlLEVBQUUsYUFBYSxDQUFDLEVBQUU7UUFDakMsZUFBZSxFQUFFLGFBQWE7UUFDOUIsU0FBUyxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUU7S0FDdEIsQ0FBQztBQUNKLENBQUM7QUFFRDs7R0FFRztBQUNJLFNBQVMsb0JBQW9CLENBQ2xDLFFBQWdCLEVBQ2hCLE9BQTBDO0lBRTFDLE1BQU0sR0FBRyxHQUFHLEVBQUUsaUJBQWlCO0lBQy9CLE1BQU0sT0FBTyxHQUFHLHlCQUF5QixRQUFRLEVBQUU7SUFFbkQsSUFBSSxDQUFDO1FBQ0gsTUFBTSxhQUFhLEdBQUcsT0FBTyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLEVBQUUsS0FBSyxPQUFPLENBQXlCO1FBQ3BHLElBQUksYUFBYSxFQUFFLENBQUM7WUFDbEIsMkJBQTJCO1lBQzNCLGFBQWEsQ0FBQyxTQUFTLEVBQUU7WUFFekIsd0JBQXdCO1lBQ3hCLE9BQU8sQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLGFBQWEsQ0FBQztZQUVqQyxXQUFXLENBQUMsR0FBRyxDQUFDLGdCQUFnQixFQUFFO2dCQUNoQyxLQUFLLEVBQUUsK0JBQStCO2dCQUN0QyxHQUFHO2dCQUNILFFBQVE7Z0JBQ1IsT0FBTztnQkFDUCxTQUFTLEVBQUUsSUFBSSxDQUFDLEdBQUcsRUFBRTthQUN0QixDQUFDO1FBQ0osQ0FBQzthQUFNLENBQUM7WUFDTixXQUFXLENBQUMsR0FBRyxDQUFDLGdCQUFnQixFQUFFO2dCQUNoQyxLQUFLLEVBQUUsZ0NBQWdDO2dCQUN2QyxHQUFHO2dCQUNILFFBQVE7Z0JBQ1IsT0FBTztnQkFDUCxTQUFTLEVBQUUsSUFBSSxDQUFDLEdBQUcsRUFBRTthQUN0QixDQUFDO1FBQ0osQ0FBQztJQUNILENBQUM7SUFBQyxPQUFPLEtBQUssRUFBRSxDQUFDO1FBQ2YsV0FBVyxDQUFDLEdBQUcsQ0FBQyxnQkFBZ0IsRUFBRTtZQUNoQyxLQUFLLEVBQUUsNEJBQTRCO1lBQ25DLEdBQUc7WUFDSCxRQUFRO1lBQ1IsT0FBTztZQUNQLEtBQUssRUFBRSxLQUFLLFlBQVksS0FBSyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDO1lBQzdELFVBQVUsRUFBRSxLQUFLLFlBQVksS0FBSyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxTQUFTO1lBQzVELFNBQVMsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFO1NBQ3RCLENBQUM7SUFDSixDQUFDO0FBQ0gsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUN6c0JELGVBQWU7QUFDaUU7QUFDOUM7QUFHUTtBQUNvQztBQUMzQjtBQVFuRCxNQUFNLGlCQUFpQixHQUFHO0lBQ3hCLENBQUMsbURBQWMsQ0FBQyxLQUFLLENBQUMsRUFBRSxFQUFFLFlBQVksRUFBRSxPQUFPLEVBQUUsYUFBYSxFQUFFLGlCQUFpQixFQUFFLFNBQVMsRUFBRSxDQUFDLEVBQUU7SUFDakcsQ0FBQyxtREFBYyxDQUFDLFFBQVEsQ0FBQyxFQUFFLEVBQUUsWUFBWSxFQUFFLFVBQVUsRUFBRSxhQUFhLEVBQUUsb0JBQW9CLEVBQUUsU0FBUyxFQUFFLENBQUMsRUFBRTtJQUMxRyxDQUFDLG1EQUFjLENBQUMsT0FBTyxDQUFDLEVBQUUsRUFBRSxZQUFZLEVBQUUsU0FBUyxFQUFFLGFBQWEsRUFBRSxtQkFBbUIsRUFBRSxTQUFTLEVBQUUsQ0FBQyxFQUFFO0lBQ3ZHLENBQUMsbURBQWMsQ0FBQyxTQUFTLENBQUMsRUFBRTtRQUMxQixZQUFZLEVBQUUsV0FBVztRQUN6QixhQUFhLEVBQUUsOEJBQThCO1FBQzdDLFNBQVMsRUFBRSxDQUFDO0tBQ2I7SUFDRCxDQUFDLG1EQUFjLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxZQUFZLEVBQUUsUUFBUSxFQUFFLGFBQWEsRUFBRSwyQkFBMkIsRUFBRSxTQUFTLEVBQUUsQ0FBQyxFQUFFO0NBQzlHO0FBRU0sU0FBUyxlQUFlLENBQUUsS0FBMkI7SUFDMUQsTUFBTSxFQUFFLFNBQVMsR0FBRyxFQUFFLEVBQUUsV0FBVyxFQUFFLFNBQVMsRUFBRSxRQUFRLEVBQUUsR0FBRyxLQUFLO0lBQ2xFLE1BQU0sY0FBYyxHQUFHLDRDQUFLLENBQUMsY0FBYyxDQUFDLDZEQUFjLENBQUM7SUFDM0QsTUFBTSxDQUFDLFNBQVMsRUFBRSxZQUFZLENBQUMsR0FBRyw0Q0FBSyxDQUFDLFFBQVEsQ0FBaUIsSUFBSSxDQUFDO0lBQ3RFLE1BQU0sY0FBYyxHQUFHLDRDQUFLLENBQUMsTUFBTSxDQUFvRCxJQUFJLENBQUM7SUFDNUYsTUFBTSxVQUFVLEdBQUcsNENBQUssQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDO0lBQ3JDLE1BQU0sQ0FBQyxlQUFlLEVBQUUsa0JBQWtCLENBQUMsR0FBRyw0Q0FBSyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUM7SUFFbkUsTUFBTSxlQUFlLEdBQUcsNENBQUssQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFO1FBQ3pDLE9BQU87WUFDTCxXQUFXLEVBQUUsTUFBTSxDQUFDLE9BQU8sQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLE1BQU0sQ0FDbkQsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxHQUFHLEVBQUUsS0FBSyxDQUFDLEVBQUUsRUFBRSxDQUFDLGlDQUFNLE1BQU0sS0FBRSxDQUFDLEtBQUssQ0FBQyxZQUFZLENBQUMsRUFBRSxTQUFTLENBQUMsUUFBUSxDQUFDLEdBQXFCLENBQUMsSUFBRyxFQUMxRyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsQ0FDVjtZQUNSLGNBQWMsRUFBRTtnQkFDZCxpQkFBaUIsRUFBRSxLQUFLO2dCQUN4QixxQkFBcUIsRUFBRSxLQUFLO2FBQzdCO1lBQ0QsWUFBWSxFQUFFLEtBQUs7WUFDbkIsWUFBWSxFQUFFLEtBQUs7WUFDbkIsWUFBWSxFQUFFLElBQUk7U0FDbkI7SUFDSCxDQUFDLEVBQUUsQ0FBQyxTQUFTLENBQUMsQ0FBQztJQUVmLDRDQUFLLENBQUMsYUFBYSxDQUFDLEdBQUcsRUFBRTtRQUN2QixtREFBWSxDQUFDLFVBQVUsQ0FBaUIsc0JBQXNCLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxNQUFNLEVBQUUsRUFBRTtZQUM5RSxZQUFZLENBQUMsTUFBTSxDQUFDO1FBQ3RCLENBQUMsQ0FBQztJQUNKLENBQUMsQ0FBQztJQUVGLE1BQU0scUJBQXFCLEdBQUcsNENBQUssQ0FBQyxXQUFXLENBQUMsQ0FBQyxnQkFBbUQsRUFBRSxFQUFFO1FBQ3RHLGNBQWMsQ0FBQyxPQUFPLEdBQUcsZ0JBQWdCLENBQUMsZ0JBQWdCO0lBQzVELENBQUMsRUFBRSxFQUFFLENBQUM7SUFFTixNQUFNLGVBQWUsR0FBRyw0Q0FBSyxDQUFDLFdBQVcsQ0FBQyxHQUFHLEVBQUU7UUFDN0MsY0FBYyxDQUFDLE9BQU8sSUFBSyxDQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUMsRUFBMkIsQ0FBQyxTQUFTLEVBQUU7SUFDNUYsQ0FBQyxFQUFFLEVBQUUsQ0FBQztJQUVOLE1BQU0sYUFBYSxHQUFHLDRDQUFLLENBQUMsV0FBVyxDQUNyQyxDQUFDLE9BQU8sRUFBRSxFQUFFO1FBQ1YsVUFBVSxDQUFDLE9BQU8sR0FBRyxPQUFPO1FBQzVCLFNBQVMsQ0FBQyxPQUFPLEVBQUUsY0FBYyxDQUFDLE9BQU8sRUFBRSxlQUFlLENBQUM7SUFDN0QsQ0FBQyxFQUNELENBQUMsU0FBUyxFQUFFLGVBQWUsQ0FBQyxDQUM3QjtJQUVELE1BQU0sYUFBYSxHQUFHLDRDQUFLLENBQUMsV0FBVyxDQUFDLEdBQUcsRUFBRTtRQUMzQyxVQUFVLENBQUMsT0FBTyxHQUFHLElBQUk7UUFDekIsU0FBUyxDQUFDLElBQUksQ0FBQztJQUNqQixDQUFDLEVBQUUsQ0FBQyxTQUFTLENBQUMsQ0FBQztJQUVmLE1BQU0sd0JBQXdCLEdBQUcsNENBQUssQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRTtRQUN2RCxJQUFJLFVBQVUsQ0FBQyxPQUFPLEVBQUUsQ0FBQztZQUN2QixTQUFTLENBQUMsVUFBVSxDQUFDLE9BQU8sRUFBRSxjQUFjLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDO1FBQ3pFLENBQUM7UUFDRCxrQkFBa0IsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQztJQUN0QyxDQUFDLEVBQUUsQ0FBQyxTQUFTLENBQUMsQ0FBQztJQUVmLE1BQU0sUUFBUSxHQUFHLFNBQVMsYUFBVCxTQUFTLHVCQUFULFNBQVMsQ0FBRSxRQUFRO0lBQ3BDLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQztRQUNkLE9BQU8sZ0VBQUMsdUVBQWUsSUFBQyxVQUFVLEVBQUUsd0VBQWdCLENBQUMsT0FBTyxHQUFJO0lBQ2xFLENBQUM7SUFDRCxNQUFNLFdBQVcsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxXQUFXLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxlQUFlLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQ3BILElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztRQUNqQixPQUFPLElBQUk7SUFDYixDQUFDO0lBQ0QsT0FBTyxDQUNMLHFGQUNFLGdFQUFDLFFBQVEsSUFDUCxXQUFXLEVBQUUsV0FBVyxFQUN4QixnQkFBZ0IsRUFBRSxRQUFRLEVBQzFCLHFCQUFxQixRQUNyQixjQUFjLEVBQUU7b0JBQ2QsWUFBWSxFQUFFLFNBQVMsQ0FBQyxvQkFBb0IsQ0FBQyxNQUFNO29CQUNuRCxvQkFBb0IsRUFBRSxLQUFLO29CQUMzQixlQUFlLEVBQUUsZUFBZTtpQkFDakMsRUFDRCxTQUFTLEVBQUU7b0JBQ1QsWUFBWSxFQUFFLElBQUk7aUJBQ25CLEVBQ0QsaUJBQWlCLEVBQUUscUJBQXFCLEVBQ3hDLGdCQUFnQixFQUFFLGVBQWUsRUFDakMsaUJBQWlCLEVBQUUsYUFBYSxFQUNoQyxnQkFBZ0IsRUFBRSxhQUFhLEdBQy9CLEVBQ0YsNEVBQU8sU0FBUyxFQUFDLDJCQUEyQixhQUMxQyxnRUFBQyw2Q0FBUSxJQUFDLE9BQU8sRUFBRSxlQUFlLEVBQUUsUUFBUSxFQUFFLHdCQUF3QixFQUFFLFNBQVMsRUFBQyxNQUFNLEdBQUcsRUFDMUYsY0FBYyxDQUFDLGNBQWMsQ0FBQyxJQUN6QixJQUNKLENBQ1A7QUFDSCxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDdEh1QztBQUNNO0FBQ1g7QUFDZ0I7QUFFbkQsTUFBTSxJQUFJLEdBQUcsOENBQU0sQ0FBQyxHQUFHOzs7Ozs7Ozs7Ozs7O0NBYXRCO0FBQ00sU0FBUyxhQUFhO0lBQzNCLE1BQU0sU0FBUyxHQUFHLDRDQUFLLENBQUMsY0FBYyxDQUFDLDZEQUFjLENBQUM7SUFDdEQsT0FBTyxDQUNMLGdFQUFDLElBQUksY0FDSCwwRUFBSyxTQUFTLEVBQUMseUZBQXlGLGFBQ3RHLHlFQUFLLElBQUksRUFBQyxPQUFPLGVBQVcsV0FBVyxFQUFDLFNBQVMsRUFBQyxZQUFZLFlBQzNELFNBQVMsQ0FBQyxZQUFZLENBQUMsR0FDcEIsRUFDTixnRUFBQyw0Q0FBTyxJQUFDLFNBQVMsRUFBQyxrQkFBa0IsRUFBQyxJQUFJLEVBQUUsZ0RBQVcsQ0FBQyxLQUFLLEdBQUcsSUFDNUQsR0FDRCxDQUNSO0FBQ0gsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDL0JELGVBQWU7QUFVRztBQUNjO0FBQ2dDO0FBQ2I7QUFDVjtBQUNnQztBQUV6RSxNQUFNLFdBQVcsR0FBRyx3RkFBNEIsRUFBRTtBQWFsRCxNQUFNLEtBQUssR0FBRyw4Q0FBRzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0NBMkJoQjtBQUVEOzs7Ozs7R0FNRztBQUNJLE1BQU0sZUFBZSxHQUFHLENBQUMsS0FBc0IsRUFBRSxFQUFFO0lBQ3hELE1BQU0sRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLFVBQVUsRUFBRSxhQUFhLEVBQUUsb0JBQW9CLEVBQUUsT0FBTyxFQUFFLFFBQVEsRUFBRSxlQUFlLEdBQUcsS0FBSyxFQUFFLEdBQUcsS0FBSztJQUU3SCxNQUFNLFFBQVEsR0FBRyxJQUFJLENBQUMsS0FBSyxFQUFFO0lBRTdCLG1DQUFtQztJQUNuQyw0Q0FBSyxDQUFDLFNBQVMsQ0FBQyxHQUFHLEVBQUU7UUFDbkIsV0FBVyxDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsRUFBRTtZQUNqQyxLQUFLLEVBQUUsd0JBQXdCO1lBQy9CLFFBQVE7WUFDUixlQUFlO1lBQ2YsU0FBUyxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUU7U0FDdEIsQ0FBQztJQUNKLENBQUMsRUFBRSxDQUFDLFFBQVEsRUFBRSxlQUFlLENBQUMsQ0FBQztJQUUvQiw2Q0FBNkM7SUFDN0MsTUFBTSxRQUFRLEdBQUcsaURBQVUsQ0FBQyxXQUFXLENBQUMsQ0FBQyxLQUFjLEVBQUUsRUFBRSxtQkFDekQsOEJBQUssQ0FBQyxlQUFlLDBDQUFHLFVBQVUsQ0FBQyxFQUFFLENBQUMsMENBQUUsV0FBVywwQ0FBRSxRQUFRLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDLElBQzVFO0lBRUQsZ0ZBQWdGO0lBQ2hGLE1BQU0sZUFBZSxHQUFHLGlEQUFVLENBQUMsV0FBVyxDQUFDLENBQUMsS0FBYyxFQUFFLEVBQUU7UUFDaEUsTUFBTSxVQUFVLEdBQUcsS0FBSyxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDO1FBQ3BELE9BQU8sVUFBVSxDQUFDLE1BQU0sQ0FBQyxtQkFBbUIsS0FBSyxrREFBYSxDQUFDLFVBQVU7SUFDM0UsQ0FBQyxDQUFDO0lBRUYsK0RBQStEO0lBQy9ELE1BQU0scUJBQXFCLEdBQUcsNENBQUssQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFtQixFQUFFLEVBQUU7UUFDdEUsbURBQW1EO1FBQ25ELElBQUssQ0FBQyxDQUFDLE1BQXNCLENBQUMsT0FBTyxDQUFDLGdCQUFnQixDQUFDLEVBQUUsQ0FBQztZQUN4RCxPQUFNO1FBQ1IsQ0FBQztRQUNELE9BQU8sQ0FBQyxJQUFJLENBQUM7SUFDZixDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFFbkIsZ0ZBQWdGO0lBQ2hGLE1BQU0sWUFBWSxHQUFHLDRDQUFLLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBbUIsRUFBRSxFQUFFO1FBQzdELENBQUMsQ0FBQyxlQUFlLEVBQUUsRUFBQyw0Q0FBNEM7UUFDaEUsQ0FBQyxDQUFDLGNBQWMsRUFBRTtRQUNsQixRQUFRLENBQUMsSUFBSSxDQUFDO0lBQ2hCLENBQUMsRUFBRSxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMsQ0FBQztJQUVwQixNQUFNLE9BQU8sR0FBRyw0Q0FBSyxDQUFDLFdBQVcsQ0FBQyxDQUFDLEdBQUcsRUFBRSxFQUFFO1FBQ3hDLElBQUksR0FBRyxDQUFDLEdBQUcsS0FBSyxPQUFPLElBQUksR0FBRyxDQUFDLEdBQUcsS0FBSyxHQUFHLEVBQUUsQ0FBQztZQUMzQyxHQUFHLENBQUMsY0FBYyxFQUFFO1lBQ3BCLEdBQUcsQ0FBQyxlQUFlLEVBQUU7WUFDckIscUJBQXFCLENBQUMsR0FBVSxDQUFDO1FBQ25DLENBQUM7SUFDSCxDQUFDLEVBQUUsQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDO0lBRTNCLE9BQU8sQ0FDTCwwRUFDRSxTQUFTLEVBQUUscURBQVUsQ0FBQyxtQkFBbUIsRUFBRSxFQUFFLFFBQVEsRUFBRSxDQUFDLEVBQ3hELE9BQU8sRUFBRSxxQkFBcUIsRUFDOUIsT0FBTyxFQUFFLE9BQU8sRUFDaEIsR0FBRyxFQUFFLEtBQUssRUFDVixJQUFJLEVBQUMsUUFBUSxtQkFDRSxRQUFRLEVBQ3ZCLFFBQVEsRUFBRSxDQUFDLGFBRVgsZ0VBQUMsZ0VBQVcsSUFDVixPQUFPLEVBQUUsSUFBSSxDQUFDLE9BQXlCLEVBQ3ZDLGFBQWEsRUFBRSxhQUFhLEVBQzVCLG9CQUFvQixFQUFFLG9CQUFvQixFQUMxQyxTQUFTLEVBQUUsZUFBZSxFQUMxQixlQUFlLEVBQUUsZUFBZSxFQUNoQyxVQUFVLEVBQUUsVUFBVSxHQUN0QixFQUNGLGdFQUFDLDJDQUFNLElBQ0wsU0FBUyxFQUFDLGVBQWUsRUFDekIsSUFBSSxRQUNKLElBQUksRUFBQyxJQUFJLEVBQ1QsT0FBTyxFQUFDLE1BQU0sRUFDZCxLQUFLLEVBQUMsU0FBUyxFQUNmLE9BQU8sRUFBRSxZQUFZLGdCQUNWLGVBQWUsRUFDMUIsR0FBRyxFQUFFLDhDQUFHOzs7Ozs7OztTQVFQLFlBRUQsZ0VBQUMsMkVBQWEsSUFBQyxJQUFJLEVBQUUsRUFBRSxHQUFJLEdBQ3BCLElBQ0wsQ0FDUDtBQUNILENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQzVKRCxlQUFlO0FBd0JHO0FBQ2tFO0FBQzNCO0FBQzZEO0FBQ25FO0FBQ25ELDhEQUE4RDtBQUNwQjtBQUNHO0FBQ2E7QUFDb0I7QUFDQTtBQUNJO0FBQ2pDO0FBT3ZCO0FBQ2tGO0FBQ25DO0FBRXpFLE1BQU0sV0FBVyxHQUFHLHlGQUE0QixFQUFFO0FBQ087QUFDekQsTUFBTSxFQUFFLE9BQU8sRUFBRSxHQUFHLHVFQUF1QixFQUFFO0FBRTdDOztHQUVHO0FBQ0gsTUFBTSwrQkFBK0IsR0FBRyx1Q0FBdUM7QUFFL0U7Ozs7O0dBS0c7QUFDSCxTQUFTLG1CQUFtQjtJQUMxQixtREFBbUQ7SUFDbkQsTUFBTSxLQUFLLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyw0QkFBNEIsQ0FBQztJQUVsRSxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUM7UUFDWCxPQUFPLEtBQUs7SUFDZCxDQUFDO0lBRUQsbUNBQW1DO0lBQ25DLE1BQU0sVUFBVSxHQUFHLEtBQUssQ0FBQyxZQUFZLENBQUMsYUFBYSxDQUFDO0lBQ3BELElBQUksVUFBVSxLQUFLLE1BQU0sRUFBRSxDQUFDO1FBQzFCLE9BQU8sS0FBSztJQUNkLENBQUM7SUFFRCw2REFBNkQ7SUFDN0QsTUFBTSxLQUFLLEdBQUcsTUFBTSxDQUFDLGdCQUFnQixDQUFDLEtBQUssQ0FBQztJQUM1QyxJQUFJLEtBQUssQ0FBQyxPQUFPLEtBQUssTUFBTSxJQUFJLEtBQUssQ0FBQyxVQUFVLEtBQUssUUFBUSxJQUFJLEtBQUssQ0FBQyxPQUFPLEtBQUssR0FBRyxFQUFFLENBQUM7UUFDdkYsT0FBTyxLQUFLO0lBQ2QsQ0FBQztJQUVELDhEQUE4RDtJQUM5RCxNQUFNLFdBQVcsR0FBRyxLQUFLLENBQUMsYUFBYSxDQUFDLGdCQUFnQixDQUFDO0lBQ3pELElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztRQUNqQixPQUFPLEtBQUs7SUFDZCxDQUFDO0lBRUQsT0FBTyxJQUFJO0FBQ2IsQ0FBQztBQW9CRCxNQUFNLFdBQVcsR0FBRyw4Q0FBRzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztDQXlCdEI7QUFFTSxTQUFTLGVBQWUsQ0FBRSxLQUEyQjs7SUFDMUQsTUFBTSxFQUFFLFNBQVMsRUFBRSxXQUFXLEVBQUUsV0FBVyxFQUFFLFVBQVUsRUFBRSxPQUFPLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxxQkFBcUIsRUFBRSxTQUFTLEVBQUUsV0FBVyxFQUFFLGtCQUFrQixFQUFFLDBCQUEwQixFQUFFLDRCQUE0QixFQUFFLGFBQWEsRUFBRSxPQUFPLEVBQUUsR0FBRyxLQUFLO0lBQ25QLE1BQU0sY0FBYyxHQUFHLDRDQUFLLENBQUMsY0FBYyxDQUFDLDZEQUFjLENBQUM7SUFDM0QsTUFBTSxJQUFJLEdBQUcsa0RBQU8sRUFBRTtJQUN0QixNQUFNLENBQUMsU0FBUyxFQUFFLFlBQVksQ0FBQyxHQUFHLDRDQUFLLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQztJQUN0RCxNQUFNLENBQUMsZUFBZSxFQUFFLGtCQUFrQixDQUFDLEdBQUcsNENBQUssQ0FBQyxRQUFRLENBQWUsRUFBRSxDQUFDO0lBQzlFLE1BQU0sQ0FBQyxnQkFBZ0IsRUFBRSxtQkFBbUIsQ0FBQyxHQUFHLDRDQUFLLENBQUMsUUFBUSxDQUFjLElBQUksR0FBRyxFQUFFLENBQUM7SUFFdEYsTUFBTSxXQUFXLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUUsbUVBQWtCLEVBQUUsU0FBUyxDQUFDO0lBQ3BFLE1BQU0sQ0FBQyxTQUFTLEVBQUUsWUFBWSxDQUFDLEdBQUcsNENBQUssQ0FBQyxRQUFRLENBQUMsaUJBQVcsQ0FBQyxxQkFBcUIsbUNBQUksS0FBSyxDQUFDO0lBQzVGLGtGQUFrRjtJQUNsRixNQUFNLENBQUMsZ0JBQWdCLEVBQUUsbUJBQW1CLENBQUMsR0FBRyw0Q0FBSyxDQUFDLFFBQVEsQ0FBdUIsSUFBSSxHQUFHLEVBQUUsQ0FBQztJQUMvRixNQUFNLFVBQVUsR0FBRyw0Q0FBSyxDQUFDLE1BQU0sQ0FBb0IsU0FBUyxDQUFDO0lBRTdELHdDQUF3QztJQUN4Qyw0Q0FBSyxDQUFDLFNBQVMsQ0FBQyxHQUFHLEVBQUU7UUFDbkIsV0FBVyxDQUFDLEdBQUcsQ0FBQyxjQUFjLEVBQUU7WUFDOUIsS0FBSyxFQUFFLHlCQUF5QjtZQUNoQyxRQUFRO1lBQ1IsU0FBUztZQUNULGlCQUFpQixFQUFFLFNBQVMsQ0FBQyxRQUFRO1lBQ3JDLFNBQVMsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFO1NBQ3RCLENBQUM7SUFDSixDQUFDLEVBQUUsQ0FBQyxTQUFTLEVBQUUsUUFBUSxFQUFFLFNBQVMsQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUM3Qyw0RkFBNEY7SUFDNUYsTUFBTSxjQUFjLEdBQUcsNENBQUssQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDO0lBQzFDLHdFQUF3RTtJQUN4RSxNQUFNLHNCQUFzQixHQUFHLDRDQUFLLENBQUMsTUFBTSxDQUFXLEVBQUUsQ0FBQztJQUN6RCw2RkFBNkY7SUFDN0YsTUFBTSxxQkFBcUIsR0FBRyw0Q0FBSyxDQUFDLE1BQU0sQ0FBVyxFQUFFLENBQUM7SUFDeEQseUVBQXlFO0lBQ3pFLE1BQU0sNkJBQTZCLEdBQUcsNENBQUssQ0FBQyxNQUFNLENBQXNCLEVBQUUsQ0FBQztJQUMzRSxtRkFBbUY7SUFDbkYsTUFBTSxtQkFBbUIsR0FBRyw0Q0FBSyxDQUFDLE1BQU0sQ0FBYyxJQUFJLEdBQUcsRUFBRSxDQUFDO0lBRWhFLG1EQUFtRDtJQUNuRCw0Q0FBSyxDQUFDLFNBQVMsQ0FBQyxHQUFHLEVBQUU7UUFDbkIsbUJBQW1CLENBQUMsT0FBTyxHQUFHLGdCQUFnQjtJQUNoRCxDQUFDLEVBQUUsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO0lBQ3RCLHFDQUFxQztJQUNyQyxNQUFNLENBQUMsY0FBYyxFQUFFLGlCQUFpQixDQUFDLEdBQUcsNENBQUssQ0FBQyxRQUFRLENBQVMsSUFBSSxDQUFDO0lBRXhFLE1BQU0sWUFBWSxHQUFHLDRDQUFLLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRTtRQUN0QyxPQUFPLCtEQUFlLENBQUMsUUFBUSxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsU0FBUyxFQUFFLHFCQUFxQixDQUFDO0lBQ3BGLENBQUMsRUFBRSxDQUFDLFFBQVEsRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLFNBQVMsRUFBRSxxQkFBcUIsQ0FBQyxDQUFDO0lBRWhFLE1BQU0sZ0JBQWdCLEdBQUcsaURBQVUsQ0FBQyxXQUFXLENBQUMsQ0FBQyxLQUFjLEVBQUUsRUFBRTs7UUFDakUsTUFBTSxVQUFVLEdBQUcsS0FBSyxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDO1FBQ3BELE9BQU8sZ0JBQVUsQ0FBQyxnQkFBZ0IsbUNBQUksSUFBSTtJQUM1QyxDQUFDLENBQUM7SUFFRixNQUFNLGtCQUFrQixHQUFHLGlEQUFVLENBQUMsV0FBVyxDQUFDLENBQUMsS0FBYyxFQUFFLEVBQUU7UUFDbkUsTUFBTSxVQUFVLEdBQUcsS0FBSyxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDO1FBQ3BELE9BQU8sVUFBVSxDQUFDLE1BQU0sQ0FBQyxpQkFBaUI7SUFDNUMsQ0FBQyxDQUFDO0lBQ0YsTUFBTSxxQkFBcUIsR0FBRyxpREFBVSxDQUFDLFdBQVcsQ0FBQyxDQUFDLEtBQWMsRUFBRSxFQUFFO1FBQ3RFLE1BQU0sVUFBVSxHQUFHLEtBQUssQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQztRQUNwRCxPQUFPLFVBQVUsQ0FBQyxNQUFNLENBQUMsbUJBQW1CO0lBQzlDLENBQUMsQ0FBQztJQUNGLHdFQUF3RTtJQUN4RSxNQUFNLFVBQVUsR0FBRywrQ0FBVSxDQUFDLE1BQU07SUFDcEMsTUFBTSxTQUFTLEdBQUcscUJBQXFCLGFBQXJCLHFCQUFxQixjQUFyQixxQkFBcUIsR0FBSSxrREFBYSxDQUFDLFFBQVE7SUFFakUseURBQXlEO0lBQ3pELG9HQUFvRztJQUNwRyxNQUFNLGNBQWMsR0FBb0IsNENBQUssQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFOztRQUN6RCx3Q0FBd0M7UUFDeEMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxjQUFjLEVBQUU7WUFDOUIsS0FBSyxFQUFFLGtDQUFrQztZQUN6QyxRQUFRLEVBQUUsUUFBUTtZQUNsQixvQkFBb0IsRUFBRSxnQkFBZSxhQUFmLGVBQWUsdUJBQWYsZUFBZSxDQUFFLE1BQU0sS0FBSSxDQUFDO1lBQ2xELHFCQUFxQixFQUFFLGdCQUFTLGFBQVQsU0FBUyx1QkFBVCxTQUFTLENBQUUsT0FBTywwQ0FBRSxNQUFNLEtBQUksQ0FBQztZQUN0RCxnQkFBZ0IsRUFBRSxRQUFPLGFBQVAsT0FBTyx1QkFBUCxPQUFPLENBQUUsTUFBTSxLQUFJLENBQUM7WUFDdEMsVUFBVSxFQUFFLFFBQVEsYUFBUixRQUFRLHVCQUFSLFFBQVEsQ0FBRSxFQUFFO1lBQ3hCLGtCQUFrQixFQUFFLGdCQUFlLGFBQWYsZUFBZSx1QkFBZixlQUFlLENBQUUsTUFBTSxJQUFHLENBQUM7WUFDL0MsbUJBQW1CLEVBQUUsZ0JBQVMsYUFBVCxTQUFTLHVCQUFULFNBQVMsQ0FBRSxPQUFPLDBDQUFFLE1BQU0sSUFBRyxDQUFDO1lBQ25ELGNBQWMsRUFBRSxRQUFPLGFBQVAsT0FBTyx1QkFBUCxPQUFPLENBQUUsTUFBTSxJQUFHLENBQUM7U0FDcEMsQ0FBQztRQUVGLE1BQU0sa0JBQWtCLEdBQUcsV0FBVyxLQUFLLGtEQUFhLENBQUMsY0FBYyxJQUFJLFdBQVcsS0FBSyxrREFBYSxDQUFDLG1CQUFtQjtRQUU1SCxzRkFBc0Y7UUFDdEYsOEdBQThHO1FBQzlHLE1BQU0sWUFBWSxHQUFHLGtCQUFrQjtZQUNyQyxDQUFDLENBQUMsQ0FBQyxPQUFPLElBQUksRUFBRSxDQUFDO1lBQ2pCLENBQUMsQ0FBQyxDQUFDLGdCQUFlLGFBQWYsZUFBZSx1QkFBZixlQUFlLENBQUUsTUFBTSxJQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxDQUFDLGdCQUFTLGFBQVQsU0FBUyx1QkFBVCxTQUFTLENBQUUsT0FBTywwQ0FBRSxNQUFNLElBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBRTVILCtFQUErRTtRQUMvRSxJQUFJLENBQUMsWUFBWSxJQUFJLFlBQVksQ0FBQyxNQUFNLEtBQUssQ0FBQyxFQUFFLENBQUM7WUFDL0MsTUFBTSxZQUFZLEdBQWtCO2dCQUNsQyxVQUFVLEVBQUUsUUFBUTtnQkFDcEIsSUFBSSxFQUFFLFFBQVE7Z0JBQ2QsT0FBTyxFQUFFLEVBQUU7Z0JBQ1gsSUFBSSxFQUFFLFFBQVEsYUFBUixRQUFRLHVCQUFSLFFBQVEsQ0FBRSxFQUFFO2dCQUNsQixLQUFLLEVBQUUsUUFBUSxhQUFSLFFBQVEsdUJBQVIsUUFBUSxDQUFFLFFBQVEsRUFBRTthQUM1QjtZQUNELFdBQVcsQ0FBQyxHQUFHLENBQUMsY0FBYyxFQUFFO2dCQUM5QixLQUFLLEVBQUUsOEJBQThCO2dCQUNyQyxRQUFRLEVBQUUsUUFBUTtnQkFDbEIsbUJBQW1CLEVBQUUsa0JBQVksQ0FBQyxVQUFVLDBDQUFFLEVBQUU7YUFDakQsQ0FBQztZQUNGLE9BQU8sQ0FBQyxZQUFZLENBQUM7UUFDdkIsQ0FBQztRQUVELDRDQUE0QztRQUM1QyxNQUFNLGlCQUFpQixHQUFHLElBQUksR0FBRyxFQUErQztRQUVoRixZQUFZLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxFQUFFOztZQUM1QixNQUFNLFFBQVEsR0FBRyxZQUFDLE1BQTRCLEVBQUMsYUFBYSxrREFBOEI7WUFDMUYsSUFBSSxRQUFRLEdBQWtDLElBQUk7WUFFbEQsSUFBSSxRQUFRLEVBQUUsQ0FBQztnQkFDYixRQUFRLEdBQUcsZUFBUSxDQUFDLG9CQUFvQixFQUFFLDBDQUFHLENBQUMsQ0FBMkIsS0FBSSxRQUFRO1lBQ3ZGLENBQUM7aUJBQU0sSUFBSSxRQUFRLEVBQUUsQ0FBQztnQkFDcEIsb0VBQW9FO2dCQUNwRSxRQUFRLEdBQUcsZUFBUSxDQUFDLG9CQUFvQixFQUFFLDBDQUFHLENBQUMsQ0FBMkIsS0FBSSxRQUFrQztZQUNqSCxDQUFDO1lBRUQsSUFBSSxRQUFRLEVBQUUsQ0FBQztnQkFDYixJQUFJLENBQUMsaUJBQWlCLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUM7b0JBQ3JDLGlCQUFpQixDQUFDLEdBQUcsQ0FBQyxRQUFRLEVBQUUsRUFBRSxDQUFDO2dCQUNyQyxDQUFDO2dCQUNELGlCQUFpQixDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBMkIsQ0FBQztZQUNuRSxDQUFDO1FBQ0gsQ0FBQyxDQUFDO1FBRUYscURBQXFEO1FBQ3JELE1BQU0sUUFBUSxHQUFvQixLQUFLLENBQUMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxRQUFRLEVBQUUsYUFBYSxDQUFDLEVBQUUsRUFBRTtZQUMxRyxNQUFNLE9BQU8sR0FBa0I7Z0JBQzdCLFVBQVUsRUFBRSxRQUFRLEVBQUUsOEJBQThCO2dCQUNwRCxJQUFJLEVBQUUsVUFBVTtnQkFDaEIsT0FBTyxFQUFFLGFBQWE7Z0JBQ3RCLElBQUksRUFBRSxRQUFRLENBQUMsRUFBRTtnQkFDakIsS0FBSyxFQUFFLFFBQVEsQ0FBQyxRQUFRLEVBQUU7YUFDM0I7WUFFRCwwREFBMEQ7WUFDMUQsSUFBSSxXQUFXLENBQUMsZ0JBQWdCLEtBQUssK0NBQVUsQ0FBQyxnQkFBZ0IsSUFBSSxXQUFXLENBQUMsbUJBQW1CLElBQUksSUFBSSxFQUFFLENBQUM7Z0JBQzVHLE9BQU8sQ0FBQyxNQUFNLEdBQUcsMkRBQWEsQ0FBQyxXQUFXLENBQUMsbUJBQW1CLEVBQUUsV0FBVyxDQUFDLHFCQUFxQixDQUFDO1lBQ3BHLENBQUM7aUJBQU0sSUFBSSxRQUFRLElBQUksY0FBYyxJQUFJLFFBQVEsRUFBRSxDQUFDO2dCQUNsRCw4Q0FBOEM7Z0JBQzlDLE1BQU0sU0FBUyxHQUFHLFFBQVEsQ0FBQyxZQUFZLEVBQUU7Z0JBQ3pDLElBQUksU0FBUyxhQUFULFNBQVMsdUJBQVQsU0FBUyxDQUFFLFVBQVUsRUFBRSxDQUFDO29CQUMxQixPQUFPLENBQUMsTUFBTSxHQUFHLFNBQVMsQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLENBQUMsU0FBUyxFQUFFLEVBQUUsQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsU0FBUyxFQUFFLEVBQUUsQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDO2dCQUN4SCxDQUFDO1lBQ0gsQ0FBQztZQUVELE9BQU8sT0FBTztRQUNoQixDQUFDLENBQUM7UUFFRiw2Q0FBNkM7UUFDN0MsV0FBVyxDQUFDLEdBQUcsQ0FBQyxjQUFjLEVBQUU7WUFDOUIsS0FBSyxFQUFFLHNCQUFzQjtZQUM3QixRQUFRLEVBQUUsUUFBUTtZQUNsQixhQUFhLEVBQUUsUUFBUSxDQUFDLE1BQU07WUFDOUIsaUJBQWlCLEVBQUUsWUFBWSxDQUFDLE1BQU07WUFDdEMsZ0JBQWdCLEVBQUUsUUFBUSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRTs7Z0JBQUMsUUFBQztvQkFDcEMsVUFBVSxFQUFFLFFBQUUsQ0FBQyxVQUFVLDBDQUFFLEVBQUU7b0JBQzdCLFlBQVksRUFBRSxTQUFFLENBQUMsT0FBTywwQ0FBRSxNQUFNLEtBQUksQ0FBQztvQkFDckMsSUFBSSxFQUFFLEVBQUUsQ0FBQyxJQUFJO2lCQUNkLENBQUM7YUFBQSxDQUFDO1NBQ0osQ0FBQztRQUVGLG9HQUFvRztRQUNwRyxJQUFJLFFBQVEsQ0FBQyxNQUFNLEtBQUssQ0FBQyxJQUFJLFFBQVEsRUFBRSxDQUFDO1lBQ3RDLFdBQVcsQ0FBQyxHQUFHLENBQUMsY0FBYyxFQUFFO2dCQUM5QixLQUFLLEVBQUUscUNBQXFDO2dCQUM1QyxRQUFRLEVBQUUsUUFBUTtnQkFDbEIsTUFBTSxFQUFFLCtCQUErQjthQUN4QyxDQUFDO1lBQ0YsT0FBTyxDQUFDO29CQUNOLFVBQVUsRUFBRSxRQUFRO29CQUNwQixJQUFJLEVBQUUsWUFBWSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsUUFBUTtvQkFDckQsT0FBTyxFQUFFLFlBQVk7b0JBQ3JCLElBQUksRUFBRSxRQUFRLENBQUMsRUFBRTtvQkFDakIsS0FBSyxFQUFFLFFBQVEsQ0FBQyxRQUFRLEVBQUU7aUJBQzNCLENBQUM7UUFDSixDQUFDO1FBRUQsT0FBTyxRQUFRO0lBQ2pCLENBQUMsRUFBRSxDQUFDLGVBQWUsRUFBRSxRQUFRLEVBQUUsU0FBUyxFQUFFLFdBQVcsRUFBRSxPQUFPLEVBQUUsUUFBUSxDQUFDLENBQUM7SUFFMUUsd0ZBQXdGO0lBQ3hGLHdHQUF3RztJQUN4RyxNQUFNLHNCQUFzQixHQUFHLDRDQUFLLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRTs7UUFDaEQsT0FBTyxnQkFBUyxhQUFULFNBQVMsdUJBQVQsU0FBUyxDQUFFLE9BQU8sMENBQUUsTUFBTSxDQUFDLENBQUMsTUFBa0IsRUFBRSxFQUFFLENBQUMsQ0FBQyxnQkFBZ0IsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUM7WUFDekYsQ0FBQyxRQUFPLGFBQVAsT0FBTyx1QkFBUCxPQUFPLENBQUUsTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsQ0FBQyxnQkFBZ0IsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsS0FBSSxFQUFFLENBQUM7SUFDakYsQ0FBQyxFQUFFLENBQUMsU0FBUyxhQUFULFNBQVMsdUJBQVQsU0FBUyxDQUFFLE9BQU8sRUFBRSxPQUFPLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQztJQUVuRCw0Q0FBSyxDQUFDLGFBQWEsQ0FBQyxHQUFHLEVBQUU7UUFDdkIsNENBQTRDO1FBQzVDLHFFQUEwQixDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUM7SUFDaEQsQ0FBQyxDQUFDO0lBRUY7Ozs7T0FJRztJQUNILDRDQUFLLENBQUMsU0FBUyxDQUFDLEdBQUcsRUFBRTs7UUFDbkIsdUVBQXVFO1FBQ3ZFLDBFQUEwRTtRQUMxRSwyRUFBMkU7UUFDM0UsTUFBTSxnQkFBZ0IsR0FBRyxRQUFPLGFBQVAsT0FBTyx1QkFBUCxPQUFPLENBQUUsR0FBRyxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxDQUFDLEtBQUssRUFBRSxDQUFDLEtBQUksRUFBRTtRQUNyRSxNQUFNLGNBQWMsR0FBRyxnQkFBZ0IsQ0FBQyxNQUFNLEtBQUsscUJBQXFCLENBQUMsT0FBTyxDQUFDLE1BQU07WUFDckYsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxFQUFFLEtBQUssRUFBRSxFQUFFLENBQUMsRUFBRSxLQUFLLHFCQUFxQixDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUVuRix1Q0FBdUM7UUFDdkMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxjQUFjLEVBQUU7WUFDOUIsS0FBSyxFQUFFLHNCQUFzQjtZQUM3QixRQUFRLEVBQUUsUUFBUTtZQUNsQixZQUFZLEVBQUUsUUFBTyxhQUFQLE9BQU8sdUJBQVAsT0FBTyxDQUFFLE1BQU0sS0FBSSxDQUFDO1lBQ2xDLGdCQUFnQixFQUFFLE9BQU8sSUFBSSxPQUFPLENBQUMsTUFBTSxHQUFHLENBQUM7WUFDL0MscUJBQXFCLEVBQUUsZ0JBQWdCLENBQUMsSUFBSTtZQUM1QyxjQUFjLEVBQUUsY0FBYyxDQUFDLE9BQU87WUFDdEMsY0FBYyxFQUFFLGNBQWM7WUFDOUIsdUJBQXVCLEVBQUUscUJBQXFCLENBQUMsT0FBTyxDQUFDLE1BQU07WUFDN0QscUJBQXFCLEVBQUUsZ0JBQWdCLENBQUMsTUFBTTtTQUMvQyxDQUFDO1FBRUYsNEZBQTRGO1FBQzVGLHNFQUFzRTtRQUN0RSxJQUFJLGNBQWMsRUFBRSxDQUFDO1lBQ25CLFdBQVcsQ0FBQyxHQUFHLENBQUMsY0FBYyxFQUFFO2dCQUM5QixLQUFLLEVBQUUseUNBQXlDO2dCQUNoRCxRQUFRLEVBQUUsUUFBUTtnQkFDbEIsaUJBQWlCLEVBQUUscUJBQXFCLENBQUMsT0FBTyxDQUFDLE1BQU07Z0JBQ3ZELGlCQUFpQixFQUFFLGdCQUFnQixDQUFDLE1BQU07YUFDM0MsQ0FBQztZQUNGLG1CQUFtQixDQUFDLElBQUksR0FBRyxFQUFFLENBQUM7WUFDOUIsMkNBQTJDO1lBQzNDLHFCQUFxQixDQUFDLE9BQU8sR0FBRyxnQkFBZ0I7UUFDbEQsQ0FBQzthQUFNLENBQUM7WUFDTixXQUFXLENBQUMsR0FBRyxDQUFDLGNBQWMsRUFBRTtnQkFDOUIsS0FBSyxFQUFFLHdDQUF3QztnQkFDL0MsUUFBUSxFQUFFLFFBQVE7Z0JBQ2xCLGNBQWMsRUFBRSxnQkFBZ0IsQ0FBQyxNQUFNO2dCQUN2QyxxQkFBcUIsRUFBRSxnQkFBZ0IsQ0FBQyxJQUFJO2FBQzdDLENBQUM7UUFDSixDQUFDO1FBRUQsZ0VBQWdFO1FBQ2hFLFlBQVksQ0FBQyxpQkFBVyxDQUFDLHFCQUFxQixtQ0FBSSxLQUFLLENBQUM7UUFDeEQsWUFBWSxDQUFDO1lBQ1gsT0FBTztZQUNQLElBQUksRUFBRSxDQUFDO1NBQ1IsQ0FBQztRQUVGLCtCQUErQjtRQUMvQixrQ0FBa0M7UUFDbEMseUVBQXlFO1FBQ3pFLDhEQUE4RDtRQUM5RCxrRkFBa0Y7UUFDbEYsSUFBSSxPQUFPLElBQUksT0FBTyxDQUFDLE1BQU0sR0FBRyxDQUFDLElBQUksUUFBUTtZQUN6QyxDQUFDLENBQUMsY0FBYyxDQUFDLE9BQU8sSUFBSSxjQUFjLENBQUM7WUFDM0MsZ0JBQWdCLENBQUMsSUFBSSxLQUFLLENBQUMsRUFBRSxDQUFDO1lBQ2hDLE1BQU0sU0FBUyxHQUFHLE9BQU8sQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsS0FBSyxFQUFFLENBQUM7WUFDdkQsTUFBTSxHQUFHLEdBQUcsT0FBOEIsQ0FJekM7WUFBQSxDQUFDLEdBQVMsRUFBRTtnQkFDWCxJQUFJLENBQUM7b0JBQ0gsaUJBQWlCLENBQUMsSUFBSSxDQUFDLEVBQUMsd0JBQXdCO29CQUNoRCxNQUFNLDBFQUF1QixDQUMzQixRQUFRLEVBQ1IsUUFBUSxFQUNSLFNBQVMsRUFDVCxHQUFHLEVBQ0gsS0FBSyxFQUNMLDRCQUE0QixFQUM1QixhQUFhLEVBQ2IsT0FBTyxDQUNSO29CQUNELGNBQWMsQ0FBQyxPQUFPLEdBQUcsSUFBSSxFQUFDLG1CQUFtQjtvQkFDakQsc0JBQXNCLENBQUMsT0FBTyxHQUFHLFNBQVMsRUFBQyw0QkFBNEI7b0JBQ3ZFLDZCQUE2QixDQUFDLE9BQU8sR0FBRyxHQUFHLEVBQUMsbURBQW1EO29CQUUvRixxREFBcUQ7b0JBQ3JELHlFQUFzQixDQUFDLFFBQVEsRUFBRSxTQUFTLEVBQUUsUUFBUSxFQUFFLFNBQVMsQ0FBQyxRQUFRLENBQUM7Z0JBQzNFLENBQUM7Z0JBQUMsT0FBTyxLQUFLLEVBQUUsQ0FBQztvQkFDZixNQUFNLFlBQVksR0FBRyxLQUFLLFlBQVksS0FBSyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxnQ0FBZ0M7b0JBQzlGLGlCQUFpQixDQUFDLFlBQVksQ0FBQztvQkFDL0IsV0FBVyxDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUU7d0JBQ3RCLEtBQUssRUFBRSwrQkFBK0I7d0JBQ3RDLEtBQUssRUFBRSxZQUFZO3dCQUNuQixVQUFVLEVBQUUsS0FBSyxZQUFZLEtBQUssQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsU0FBUzt3QkFDNUQsV0FBVyxFQUFFLFNBQVMsQ0FBQyxNQUFNO3FCQUM5QixDQUFDO2dCQUNKLENBQUM7WUFDSCxDQUFDLEVBQUMsRUFBRTtRQUNOLENBQUM7YUFBTSxJQUFJLGNBQWMsSUFBSSxPQUFPLElBQUksT0FBTyxDQUFDLE1BQU0sS0FBSyxDQUFDLEVBQUUsQ0FBQztZQUM3RCxvREFBb0Q7WUFDcEQsY0FBYyxDQUFDLE9BQU8sR0FBRyxLQUFLO1lBQzlCLHNCQUFzQixDQUFDLE9BQU8sR0FBRyxFQUFFO1lBQ25DLGlCQUFpQixDQUFDLElBQUksQ0FBQyxFQUFDLHFDQUFxQztRQUMvRCxDQUFDO2FBQU0sSUFBSSxnQkFBZ0IsQ0FBQyxJQUFJLEdBQUcsQ0FBQyxFQUFFLENBQUM7WUFDckMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxjQUFjLEVBQUU7Z0JBQzlCLEtBQUssRUFBRSw2Q0FBNkM7Z0JBQ3BELFFBQVEsRUFBRSxRQUFRO2dCQUNsQixxQkFBcUIsRUFBRSxnQkFBZ0IsQ0FBQyxJQUFJO2dCQUM1QyxZQUFZLEVBQUUsUUFBTyxhQUFQLE9BQU8sdUJBQVAsT0FBTyxDQUFFLE1BQU0sS0FBSSxDQUFDO2dCQUNsQyxjQUFjLEVBQUUsY0FBYyxDQUFDLE9BQU87Z0JBQ3RDLGNBQWMsRUFBRSxjQUFjO2FBQy9CLENBQUM7UUFDSixDQUFDO0lBQ0gsQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLFFBQVEsRUFBRSxRQUFRLEVBQUUsU0FBUyxDQUFDLFFBQVEsRUFBRSxTQUFTLENBQUMscUJBQXFCLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQztJQUV4Ryw0Q0FBSyxDQUFDLFNBQVMsQ0FBQyxHQUFHLEVBQUU7UUFDbkIsZ0RBQWdEO1FBQ2hELElBQUksUUFBUSxFQUFFLENBQUM7WUFDYiw4RUFBMkIsQ0FBQyxRQUFRLEVBQUUsNEJBQTRCLEVBQUUsYUFBYSxDQUFDO1lBQ2xGLDBFQUF1QixDQUFDLFFBQVEsRUFBRSxFQUFFLEVBQUUsUUFBUSxFQUFFLElBQUksQ0FBQztRQUN2RCxDQUFDO0lBQ0gsQ0FBQyxFQUFFLENBQUMsU0FBUyxDQUFDLGdCQUFnQixFQUFFLFFBQVEsRUFBRSxRQUFRLEVBQUUsNEJBQTRCLEVBQUUsYUFBYSxDQUFDLENBQUM7SUFFakcsNEVBQTRFO0lBQzVFLDRDQUFLLENBQUMsU0FBUyxDQUFDLEdBQUcsRUFBRTs7UUFDbkIsTUFBTSxZQUFZLEdBQUcsZUFBUyxDQUFDLHFCQUFxQixtQ0FBSSxLQUFLO1FBQzdELFdBQVcsQ0FBQyxHQUFHLENBQUMsY0FBYyxFQUFFO1lBQzlCLEtBQUssRUFBRSxxQ0FBcUM7WUFDNUMsUUFBUTtZQUNSLGlCQUFpQixFQUFFLFNBQVMsQ0FBQyxRQUFRO1lBQ3JDLHFCQUFxQixFQUFFLFNBQVMsQ0FBQyxxQkFBcUI7WUFDdEQsWUFBWTtZQUNaLFNBQVMsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFO1NBQ3RCLENBQUM7UUFDRixZQUFZLENBQUMsWUFBWSxDQUFDO1FBQzFCLHVEQUF1RDtRQUN2RCxtQkFBbUIsQ0FBQyxJQUFJLEdBQUcsRUFBRSxDQUFDO0lBQ2hDLENBQUMsRUFBRSxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUV4Qjs7OztPQUlHO0lBQ0gsNENBQUssQ0FBQyxTQUFTLENBQUMsR0FBRyxFQUFFOztRQUNuQixJQUFJLENBQUMsUUFBUTtZQUFFLE9BQU07UUFFckIsTUFBTSxRQUFRLEdBQUcsY0FBUSxDQUFDLG9CQUFvQixFQUFFLDBDQUFHLENBQUMsQ0FBMkI7UUFDL0UsSUFBSSxDQUFDLFFBQVE7WUFBRSxPQUFNO1FBRXJCLE1BQU0sVUFBVSxHQUFHLFFBQVEsQ0FBQyxFQUFFO1FBQzlCLElBQUksbUJBQW1CLEdBQWEsRUFBRTtRQUN0QyxJQUFJLG9CQUFvQixHQUFHLEtBQUs7UUFDaEMsSUFBSSxXQUFXLEdBQUcsQ0FBQztRQUNuQixNQUFNLGVBQWUsR0FBRyxJQUFJLEVBQUMsbUNBQW1DO1FBRWhFLGdCQUFnQjtRQUNoQixtQkFBbUIsR0FBRyxRQUFRLENBQUMsb0JBQW9CLEVBQUUsSUFBSSxFQUFFO1FBQzNELG9CQUFvQixHQUFHLG1CQUFtQixFQUFFO1FBRTVDLHdEQUF3RDtRQUN4RCxNQUFNLGNBQWMsR0FBRyxHQUFHLEVBQUU7WUFDMUIsTUFBTSxrQkFBa0IsR0FBRyxRQUFRLENBQUMsb0JBQW9CLEVBQUUsSUFBSSxFQUFFO1lBQ2hFLE1BQU0sY0FBYyxHQUFHLHNCQUFzQixDQUFDLE9BQU87WUFDckQsTUFBTSxlQUFlLEdBQUcsY0FBYyxDQUFDLE1BQU0sR0FBRyxDQUFDO1lBQ2pELE1BQU0sbUJBQW1CLEdBQUcsbUJBQW1CLEVBQUU7WUFFakQsd0RBQXdEO1lBQ3hELE1BQU0sVUFBVSxHQUFHLG1CQUFtQixDQUFDLE1BQU0sR0FBRyxDQUFDLElBQUksa0JBQWtCLENBQUMsTUFBTSxLQUFLLENBQUM7WUFDcEYsTUFBTSxVQUFVLEdBQUcsbUJBQW1CLENBQUMsTUFBTSxHQUFHLENBQUM7Z0JBQy9DLENBQUMsa0JBQWtCLENBQUMsTUFBTSxLQUFLLG1CQUFtQixDQUFDLE1BQU07b0JBQ3hELENBQUMsa0JBQWtCLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsbUJBQW1CLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFFckUseUVBQXlFO1lBQ3pFLE1BQU0sUUFBUSxHQUFHLG1CQUFtQixDQUFDLE1BQU0sS0FBSyxDQUFDLElBQUksa0JBQWtCLENBQUMsTUFBTSxHQUFHLENBQUM7WUFFbEYscUNBQXFDO1lBQ3JDLE1BQU0sdUJBQXVCLEdBQUcsQ0FBQyxvQkFBb0IsSUFBSSxtQkFBbUI7WUFDNUUsTUFBTSx1QkFBdUIsR0FBRyxvQkFBb0IsSUFBSSxDQUFDLG1CQUFtQjtZQUM1RSxNQUFNLHNCQUFzQixHQUFHLG9CQUFvQixJQUFJLG1CQUFtQjtZQUUxRSxtQ0FBbUM7WUFDbkMsTUFBTSxHQUFHLEdBQUcsSUFBSSxDQUFDLEdBQUcsRUFBRTtZQUN0QixJQUFJLHVCQUF1QixJQUFJLHVCQUF1QixFQUFFLENBQUM7Z0JBQ3ZELFdBQVcsQ0FBQyxHQUFHLENBQUMsV0FBVyxFQUFFO29CQUMzQixLQUFLLEVBQUUsdUJBQXVCLENBQUMsQ0FBQyxDQUFDLHVCQUF1QixDQUFDLENBQUMsQ0FBQyx1QkFBdUI7b0JBQ2xGLFVBQVU7b0JBQ1YsaUJBQWlCLEVBQUUsY0FBYyxDQUFDLE1BQU07b0JBQ3hDLHFCQUFxQixFQUFFLGtCQUFrQixDQUFDLE1BQU07b0JBQ2hELFNBQVMsRUFBRSxJQUFJLElBQUksRUFBRSxDQUFDLFdBQVcsRUFBRTtpQkFDcEMsQ0FBQztnQkFFRixrRkFBa0Y7Z0JBQ2xGLElBQUksdUJBQXVCLElBQUksVUFBVSxJQUFJLGVBQWUsSUFBSSxjQUFjLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRSxDQUFDO29CQUMxRixNQUFNLFlBQVksR0FBRyxJQUFJLFdBQVcsQ0FBQywrQkFBK0IsRUFBRTt3QkFDcEUsTUFBTSxFQUFFOzRCQUNOLFFBQVE7NEJBQ1IsU0FBUyxFQUFFLGNBQWM7NEJBQ3pCLFVBQVUsRUFBRSxRQUFRLENBQUMsRUFBRTs0QkFDdkIsaUJBQWlCLEVBQUUsU0FBUyxDQUFDLFFBQVE7eUJBQ3RDO3dCQUNELE9BQU8sRUFBRSxJQUFJO3dCQUNiLFVBQVUsRUFBRSxJQUFJO3FCQUNqQixDQUFDO29CQUNGLE1BQU0sQ0FBQyxhQUFhLENBQUMsWUFBWSxDQUFDO29CQUVsQyxXQUFXLENBQUMsR0FBRyxDQUFDLFdBQVcsRUFBRTt3QkFDM0IsS0FBSyxFQUFFLHlDQUF5Qzt3QkFDaEQsUUFBUTt3QkFDUixXQUFXLEVBQUUsY0FBYyxDQUFDLE1BQU07d0JBQ2xDLFVBQVUsRUFBRSxRQUFRLENBQUMsRUFBRTt3QkFDdkIsaUJBQWlCLEVBQUUsU0FBUyxDQUFDLFFBQVE7cUJBQ3RDLENBQUM7Z0JBQ0osQ0FBQztZQUNILENBQUM7WUFFRCxzRUFBc0U7WUFDdEUsSUFBSSxVQUFVLElBQUksVUFBVSxJQUFJLFFBQVEsRUFBRSxDQUFDO2dCQUN6QywrQ0FBK0M7Z0JBQy9DLE1BQU0sbUJBQW1CLEdBQUcsZUFBZTtvQkFDekMsY0FBYyxDQUFDLE1BQU0sS0FBSyxrQkFBa0IsQ0FBQyxNQUFNO29CQUNuRCxjQUFjLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsa0JBQWtCLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDO2dCQUU3RCxvREFBb0Q7Z0JBQ3BELE1BQU0sWUFBWSxHQUFHLFVBQVUsSUFBSSxtQkFBbUIsSUFBSSxlQUFlLElBQUksY0FBYyxDQUFDLE1BQU0sR0FBRyxDQUFDO2dCQUV0RyxxQkFBcUI7Z0JBQ3JCLElBQUksUUFBUSxHQUFHLFNBQVM7Z0JBQ3hCLElBQUksUUFBUSxJQUFJLENBQUMsZUFBZSxFQUFFLENBQUM7b0JBQ2pDLFFBQVEsR0FBRyx5RUFBeUU7Z0JBQ3RGLENBQUM7cUJBQU0sSUFBSSxVQUFVLElBQUksQ0FBQyxtQkFBbUIsSUFBSSxDQUFDLGVBQWUsRUFBRSxDQUFDO29CQUNsRSxRQUFRLEdBQUcsMEVBQTBFO2dCQUN2RixDQUFDO3FCQUFNLElBQUksVUFBVSxJQUFJLENBQUMsbUJBQW1CLElBQUksZUFBZSxFQUFFLENBQUM7b0JBQ2pFLFFBQVEsR0FBRyxtQkFBbUI7d0JBQzVCLENBQUMsQ0FBQyx3RkFBd0Y7d0JBQzFGLENBQUMsQ0FBQyx5RUFBeUU7Z0JBQy9FLENBQUM7cUJBQU0sSUFBSSxVQUFVLElBQUksZUFBZSxFQUFFLENBQUM7b0JBQ3pDLFFBQVEsR0FBRyxtQkFBbUI7d0JBQzVCLENBQUMsQ0FBQyxtREFBbUQ7d0JBQ3JELENBQUMsQ0FBQyxtRkFBbUY7Z0JBQ3pGLENBQUM7cUJBQU0sSUFBSSxRQUFRLElBQUksZUFBZSxFQUFFLENBQUM7b0JBQ3ZDLFFBQVEsR0FBRyxtQkFBbUI7d0JBQzVCLENBQUMsQ0FBQyw2QkFBNkI7d0JBQy9CLENBQUMsQ0FBQywyQ0FBMkM7Z0JBQ2pELENBQUM7Z0JBRUQsc0RBQXNEO2dCQUN0RCxJQUFJLEdBQUcsR0FBRyxXQUFXLEdBQUcsZUFBZSxFQUFFLENBQUM7b0JBQ3hDLFdBQVcsQ0FBQyxHQUFHLENBQUMsV0FBVyxFQUFFO3dCQUMzQixLQUFLLEVBQUUsVUFBVSxDQUFDLENBQUMsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDLENBQUMsaUJBQWlCO3dCQUM5RixVQUFVO3dCQUNWLGdCQUFnQixFQUFFLGNBQWMsQ0FBQyxNQUFNO3dCQUN2QyxxQkFBcUIsRUFBRSxtQkFBbUIsQ0FBQyxNQUFNO3dCQUNqRCxvQkFBb0IsRUFBRSxrQkFBa0IsQ0FBQyxNQUFNO3dCQUMvQyxVQUFVO3dCQUNWLFVBQVU7d0JBQ1YsUUFBUTt3QkFDUixlQUFlO3dCQUNmLG1CQUFtQjt3QkFDbkIsbUJBQW1CO3dCQUNuQix1QkFBdUI7d0JBQ3ZCLHNCQUFzQjt3QkFDdEIsdUJBQXVCO3dCQUN2QixZQUFZO3dCQUNaLGNBQWMsRUFBRSxjQUFjLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7d0JBQzFDLG1CQUFtQixFQUFFLG1CQUFtQixDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO3dCQUNwRCxrQkFBa0IsRUFBRSxrQkFBa0IsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQzt3QkFDbEQsU0FBUyxFQUFFLElBQUksSUFBSSxFQUFFLENBQUMsV0FBVyxFQUFFO3dCQUNuQyxJQUFJLEVBQUUsWUFBWTs0QkFDaEIsQ0FBQyxDQUFDLHlEQUF5RDs0QkFDM0QsQ0FBQyxDQUFDLG1CQUFtQixJQUFJLFVBQVU7Z0NBQ2pDLENBQUMsQ0FBQyw2RUFBNkU7Z0NBQy9FLENBQUMsQ0FBQyxVQUFVLElBQUksQ0FBQyxtQkFBbUI7b0NBQ2xDLENBQUMsQ0FBQyx3REFBd0Q7b0NBQzFELENBQUMsQ0FBQyxRQUFRO3dDQUNSLENBQUMsQ0FBQyxlQUFlLElBQUksbUJBQW1COzRDQUN0QyxDQUFDLENBQUMsNkJBQTZCOzRDQUMvQixDQUFDLENBQUMsZUFBZSxJQUFJLENBQUMsbUJBQW1CO2dEQUN2QyxDQUFDLENBQUMsMkNBQTJDO2dEQUM3QyxDQUFDLENBQUMsd0RBQXdEO3dDQUM5RCxDQUFDLENBQUMsZ0RBQWdEO3FCQUMzRCxDQUFDO29CQUVGLFdBQVcsR0FBRyxHQUFHO2dCQUNuQixDQUFDO1lBQ0gsQ0FBQztZQUVELG1CQUFtQixHQUFHLENBQUMsR0FBRyxrQkFBa0IsQ0FBQztZQUM3QyxvQkFBb0IsR0FBRyxtQkFBbUI7UUFDNUMsQ0FBQztRQUVELG1DQUFtQztRQUNuQyxNQUFNLFVBQVUsR0FBRyxXQUFXLENBQUMsY0FBYyxFQUFFLEdBQUcsQ0FBQztRQUVuRCxPQUFPLEdBQUcsRUFBRTtZQUNWLGFBQWEsQ0FBQyxVQUFVLENBQUM7UUFDM0IsQ0FBQztJQUNILENBQUMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBRWQ7O09BRUc7SUFDSCxNQUFNLFlBQVksR0FBRyxHQUFTLEVBQUU7UUFDOUIsaUNBQWlDO1FBQ2pDLE1BQU0sVUFBVSxHQUFHLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7UUFDcEQsTUFBTSxlQUFlLEdBQUcsSUFBSSxlQUFlLENBQUMsVUFBVSxDQUFDO1FBQ3ZELE1BQU0sZ0JBQWdCLEdBQThCLEVBQUU7UUFDdEQsZUFBZSxDQUFDLE9BQU8sQ0FBQyxDQUFDLEtBQUssRUFBRSxHQUFHLEVBQUUsRUFBRTtZQUNyQyxnQkFBZ0IsQ0FBQyxHQUFHLENBQUMsR0FBRyxLQUFLO1FBQy9CLENBQUMsQ0FBQztRQUVGLFdBQVcsQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFO1lBQ3RCLEtBQUssRUFBRSxxQkFBcUI7WUFDNUIsUUFBUTtZQUNSLFVBQVUsRUFBRSxVQUFVO1lBQ3RCLGdCQUFnQixFQUFFLGdCQUFnQjtZQUNsQyxlQUFlLEVBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLE1BQU07WUFDckQsU0FBUyxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUU7U0FDdEIsQ0FBQztRQUVGLDhCQUE4QjtRQUM5QixjQUFjLENBQUMsT0FBTyxHQUFHLEtBQUs7UUFDOUIsc0JBQXNCLENBQUMsT0FBTyxHQUFHLEVBQUU7UUFDbkMsK0JBQStCO1FBQy9CLFlBQVksQ0FBQyxJQUFJLENBQUM7UUFDbEIsbUJBQW1CLENBQUMsSUFBSSxHQUFHLEVBQUUsQ0FBQztRQUM5QiwwQ0FBMEM7UUFDMUMsaUJBQWlCLENBQUMsSUFBSSxDQUFDO1FBQ3ZCLHdFQUF3RTtRQUN4RSx5REFBeUQ7UUFDekQsTUFBTSxTQUFTLENBQUMsSUFBSSxDQUFDO1FBRXJCLG9FQUFvRTtRQUNwRSxVQUFVLENBQUMsR0FBRyxFQUFFO1lBQ2QsTUFBTSxTQUFTLEdBQUcsTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQztZQUNuRCxNQUFNLGNBQWMsR0FBRyxJQUFJLGVBQWUsQ0FBQyxTQUFTLENBQUM7WUFDckQsTUFBTSxlQUFlLEdBQThCLEVBQUU7WUFDckQsY0FBYyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEtBQUssRUFBRSxHQUFHLEVBQUUsRUFBRTtnQkFDcEMsZUFBZSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEtBQUs7WUFDOUIsQ0FBQyxDQUFDO1lBRUYsV0FBVyxDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUU7Z0JBQ3RCLEtBQUssRUFBRSx3QkFBd0I7Z0JBQy9CLFFBQVE7Z0JBQ1IsVUFBVSxFQUFFLFVBQVU7Z0JBQ3RCLFNBQVMsRUFBRSxTQUFTO2dCQUNwQixnQkFBZ0IsRUFBRSxnQkFBZ0I7Z0JBQ2xDLGVBQWUsRUFBRSxlQUFlO2dCQUNoQyxpQkFBaUIsRUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUMsTUFBTTtnQkFDN0YscUJBQXFCLEVBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLE1BQU07Z0JBQzNELG9CQUFvQixFQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUMsTUFBTTtnQkFDekQsa0JBQWtCLEVBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQyxNQUFNLEdBQUcsQ0FBQztnQkFDM0QsU0FBUyxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUU7YUFDdEIsQ0FBQztRQUNKLENBQUMsRUFBRSxHQUFHLENBQUM7SUFDVCxDQUFDO0lBRUQsTUFBTSxnQkFBZ0IsR0FBRyw0Q0FBSyxDQUFDLFdBQVcsQ0FBQyxDQUFDLEVBQUUsU0FBUyxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFFO1FBQzNFLFdBQVcsQ0FBQyxHQUFHLENBQUMsY0FBYyxFQUFFO1lBQzlCLEtBQUssRUFBRSx5QkFBeUI7WUFDaEMsUUFBUTtZQUNSLGlCQUFpQixFQUFFLFNBQVMsQ0FBQyxRQUFRO1lBQ3JDLGNBQWMsRUFBRSxVQUFTLGFBQVQsU0FBUyx1QkFBVCxTQUFTLENBQUUsTUFBTSxLQUFJLENBQUM7WUFDdEMsUUFBUTtZQUNSLElBQUk7WUFDSixTQUFTLEVBQUUsSUFBSSxDQUFDLEdBQUcsRUFBRTtTQUN0QixDQUFDO1FBRUYseUZBQXlGO1FBQ3pGLE1BQU0saUJBQWlCLEdBQUcsbUJBQW1CLENBQUMsT0FBTztRQUVyRCxnRUFBZ0U7UUFDaEUscUVBQXFFO1FBQ3JFLE1BQU0sYUFBYSxHQUFHLFVBQVMsYUFBVCxTQUFTLHVCQUFULFNBQVMsQ0FBRSxNQUFNLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLGlCQUFpQixDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxLQUFJLEVBQUU7UUFFM0YsZ0VBQWdFO1FBQ2hFLGtFQUFrRTtRQUNsRSxNQUFNLGNBQWMsR0FBRyxVQUFTLGFBQVQsU0FBUyx1QkFBVCxTQUFTLENBQUUsT0FBTyxLQUFJLEVBQUU7UUFDL0MsTUFBTSxnQkFBZ0IsR0FBRyxjQUFjLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsSUFBSSxFQUFFO1FBQ2xFLE1BQU0sWUFBWSxHQUFHLGFBQWEsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxJQUFJLEVBQUU7UUFDN0QsTUFBTSxXQUFXLEdBQUcsZ0JBQWdCLENBQUMsTUFBTSxLQUFLLFlBQVksQ0FBQyxNQUFNO1lBQ2pFLENBQUMsZ0JBQWdCLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxFQUFFLEdBQUcsRUFBRSxFQUFFLENBQUMsRUFBRSxLQUFLLFlBQVksQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUM5RCxVQUFTLGFBQVQsU0FBUyx1QkFBVCxTQUFTLENBQUUsUUFBUSxNQUFLLFFBQVE7WUFDaEMsVUFBUyxhQUFULFNBQVMsdUJBQVQsU0FBUyxDQUFFLElBQUksTUFBSyxJQUFJO1FBRTFCLGlEQUFpRDtRQUNqRCxJQUFJLFdBQVcsRUFBRSxDQUFDO1lBQ2hCLFlBQVksQ0FBQztnQkFDWCxPQUFPLEVBQUUsYUFBYTtnQkFDdEIsUUFBUTtnQkFDUixJQUFJO2FBQ0wsQ0FBQztRQUNKLENBQUM7UUFFRCwyQ0FBMkM7UUFDM0MscUdBQXFHO1FBQ3JHLElBQUksYUFBYSxJQUFJLGFBQWEsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxJQUFJLFFBQVEsRUFBRSxDQUFDO1lBQzFELE1BQU0sU0FBUyxHQUFHLGFBQWEsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsS0FBSyxFQUFFLENBQUM7WUFDN0QsTUFBTSxHQUFHLEdBQUcsYUFBb0M7WUFFaEQsMEZBQTBGO1lBQzFGLE1BQU0sb0JBQW9CLEdBQUcsUUFBUSxDQUFDLG9CQUFvQixFQUFFLElBQUksRUFBRTtZQUNsRSxNQUFNLGdCQUFnQixHQUFHLG9CQUFvQixDQUFDLE1BQU0sS0FBSyxTQUFTLENBQUMsTUFBTTtnQkFDdkUsQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsb0JBQW9CLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBRTNELG9EQUFvRDtZQUNwRCxJQUFJLGdCQUFnQixFQUFFLENBQUM7Z0JBQ3JCLElBQUksQ0FBQztvQkFDSCxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsRUFBQyx3QkFBd0I7b0JBQ2hELDBFQUF1QixDQUFDLFFBQVEsRUFBRSxRQUFRLEVBQUUsU0FBUyxFQUFFLEdBQUcsQ0FBQztvQkFFM0QsV0FBVyxDQUFDLEdBQUcsQ0FBQyxjQUFjLEVBQUU7d0JBQzlCLEtBQUssRUFBRSw2Q0FBNkM7d0JBQ3BELFFBQVEsRUFBRSxRQUFRO3dCQUNsQixjQUFjLEVBQUUsVUFBUyxhQUFULFNBQVMsdUJBQVQsU0FBUyxDQUFFLE1BQU0sS0FBSSxDQUFDO3dCQUN0QyxrQkFBa0IsRUFBRSxhQUFhLENBQUMsTUFBTTt3QkFDeEMscUJBQXFCLEVBQUUsaUJBQWlCLENBQUMsSUFBSTt3QkFDN0MsZ0JBQWdCLEVBQUUsSUFBSTt3QkFDdEIsc0JBQXNCLEVBQUUsb0JBQW9CLENBQUMsTUFBTTt3QkFDbkQsaUJBQWlCLEVBQUUsU0FBUyxDQUFDLE1BQU07cUJBQ3BDLENBQUM7Z0JBQ0osQ0FBQztnQkFBQyxPQUFPLEtBQUssRUFBRSxDQUFDO29CQUNmLE1BQU0sWUFBWSxHQUFHLEtBQUssWUFBWSxLQUFLLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLGdDQUFnQztvQkFDOUYsaUJBQWlCLENBQUMsWUFBWSxDQUFDO29CQUMvQixXQUFXLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBRTt3QkFDdEIsS0FBSyxFQUFFLG1DQUFtQzt3QkFDMUMsS0FBSyxFQUFFLFlBQVk7d0JBQ25CLFVBQVUsRUFBRSxLQUFLLFlBQVksS0FBSyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxTQUFTO3dCQUM1RCxXQUFXLEVBQUUsU0FBUyxDQUFDLE1BQU07cUJBQzlCLENBQUM7Z0JBQ0osQ0FBQztZQUNILENBQUM7aUJBQU0sQ0FBQztnQkFDTixXQUFXLENBQUMsR0FBRyxDQUFDLGNBQWMsRUFBRTtvQkFDOUIsS0FBSyxFQUFFLHVDQUF1QztvQkFDOUMsUUFBUSxFQUFFLFFBQVE7b0JBQ2xCLGNBQWMsRUFBRSxVQUFTLGFBQVQsU0FBUyx1QkFBVCxTQUFTLENBQUUsTUFBTSxLQUFJLENBQUM7b0JBQ3RDLGtCQUFrQixFQUFFLGFBQWEsQ0FBQyxNQUFNO29CQUN4QyxxQkFBcUIsRUFBRSxpQkFBaUIsQ0FBQyxJQUFJO29CQUM3QyxNQUFNLEVBQUUscUJBQXFCO29CQUM3QixzQkFBc0IsRUFBRSxvQkFBb0IsQ0FBQyxNQUFNO2lCQUNwRCxDQUFDO1lBQ0osQ0FBQztRQUNILENBQUM7SUFDSCxDQUFDLEVBQUUsQ0FBQyxRQUFRLEVBQUUsUUFBUSxFQUFFLFNBQVMsQ0FBQyxDQUFDO0lBRW5DLE1BQU0sMEJBQTBCLEdBQUcsNENBQUssQ0FBQyxXQUFXLENBQUMsR0FBRyxFQUFFOztRQUN4RCxNQUFNLEVBQUUsR0FBRyx3REFBaUIsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxhQUFhLENBQUMsUUFBUSxhQUFSLFFBQVEsdUJBQVIsUUFBUSxDQUFFLEVBQUUsQ0FBQztRQUN0RSxNQUFNLFNBQVMsR0FBRyxFQUFFLGFBQUYsRUFBRSx1QkFBRixFQUFFLENBQUUsa0JBQWtCLEVBQUU7UUFDMUMsTUFBTSxXQUFXLEdBQUcsUUFBRSxhQUFGLEVBQUUsdUJBQUYsRUFBRSxDQUFFLG9CQUFvQixFQUFFLG1DQUFJLEVBQUU7UUFFcEQsNERBQTREO1FBQzVELE1BQU0sV0FBVyxHQUFHLE9BQU87UUFFM0Isa0RBQWtEO1FBQ2xELFdBQVcsQ0FBQyxHQUFHLENBQUMsY0FBYyxFQUFFO1lBQzlCLEtBQUssRUFBRSxrQ0FBa0M7WUFDekMsUUFBUSxFQUFFLFFBQVE7WUFDbEIsVUFBVSxFQUFFLFFBQVEsYUFBUixRQUFRLHVCQUFSLFFBQVEsQ0FBRSxFQUFFO1lBQ3hCLElBQUksRUFBRSxFQUFFLGFBQUYsRUFBRSx1QkFBRixFQUFFLENBQUUsRUFBRTtZQUNaLHFCQUFxQixFQUFFLFVBQVMsYUFBVCxTQUFTLHVCQUFULFNBQVMsQ0FBRSxNQUFNLEtBQUksQ0FBQztZQUM3QyxpQkFBaUIsRUFBRSxXQUFXLENBQUMsTUFBTTtZQUNyQywyQkFBMkIsRUFBRSxnQkFBZSxhQUFmLGVBQWUsdUJBQWYsZUFBZSxDQUFFLE1BQU0sS0FBSSxDQUFDO1lBQ3pELGdCQUFnQixFQUFFLFlBQVcsYUFBWCxXQUFXLHVCQUFYLFdBQVcsQ0FBRSxNQUFNLEtBQUksQ0FBQztZQUMxQyxxQkFBcUIsRUFBRSxnQkFBZ0IsQ0FBQyxJQUFJO1lBQzVDLFNBQVMsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFO1NBQ3RCLENBQUM7UUFFRixnRkFBZ0Y7UUFDaEYsd0ZBQXdGO1FBQ3hGLCtGQUErRjtRQUMvRixJQUFJLFdBQVcsSUFBSSxXQUFXLENBQUMsTUFBTSxHQUFHLENBQUMsSUFBSSxXQUFXLENBQUMsTUFBTSxLQUFLLENBQUMsSUFBSSxlQUFlLElBQUksZUFBZSxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUUsQ0FBQztZQUN2SCxXQUFXLENBQUMsR0FBRyxDQUFDLGNBQWMsRUFBRTtnQkFDOUIsS0FBSyxFQUFFLCtEQUErRDtnQkFDdEUsUUFBUSxFQUFFLFFBQVE7Z0JBQ2xCLE1BQU0sRUFBRSx5QkFBeUI7Z0JBQ2pDLGdCQUFnQixFQUFFLFdBQVcsQ0FBQyxNQUFNO2dCQUNwQywyQkFBMkIsRUFBRSxlQUFlLENBQUMsTUFBTTthQUNwRCxDQUFDO1lBQ0YsT0FBTSxDQUFDLHlDQUF5QztRQUNsRCxDQUFDO1FBRUQsbUZBQW1GO1FBQ25GLDBGQUEwRjtRQUMxRixNQUFNLGlCQUFpQixHQUFHLGVBQVMsYUFBVCxTQUFTLHVCQUFULFNBQVMsQ0FBRSxNQUFNLENBQUMsQ0FBQyxNQUFrQixFQUFFLEVBQUUsQ0FBQyxDQUFDLGdCQUFnQixDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxtQ0FBSSxFQUFFO1FBQ2hILE1BQU0sbUJBQW1CLEdBQUcsV0FBVyxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsZ0JBQWdCLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBRS9FLHFHQUFxRztRQUNyRyxJQUFJLG1CQUFtQixDQUFDLE1BQU0sS0FBSyxDQUFDLGdCQUFlLGFBQWYsZUFBZSx1QkFBZixlQUFlLENBQUUsTUFBTSxLQUFJLENBQUMsQ0FBQyxJQUFJLFdBQVcsQ0FBQyxNQUFNLEdBQUcsbUJBQW1CLENBQUMsTUFBTSxFQUFFLENBQUM7WUFDckgsV0FBVyxDQUFDLEdBQUcsQ0FBQyxjQUFjLEVBQUU7Z0JBQzlCLEtBQUssRUFBRSxpRUFBaUU7Z0JBQ3hFLFFBQVEsRUFBRSxRQUFRO2dCQUNsQixNQUFNLEVBQUUsdUNBQXVDO2dCQUMvQyxlQUFlLEVBQUUsV0FBVyxDQUFDLE1BQU07Z0JBQ25DLGFBQWEsRUFBRSxtQkFBbUIsQ0FBQyxNQUFNO2dCQUN6QyxtQkFBbUIsRUFBRSxnQkFBZSxhQUFmLGVBQWUsdUJBQWYsZUFBZSxDQUFFLE1BQU0sS0FBSSxDQUFDO2dCQUNqRCxxQkFBcUIsRUFBRSxnQkFBZ0IsQ0FBQyxJQUFJO2FBQzdDLENBQUM7WUFDRixPQUFNLENBQUMsd0RBQXdEO1FBQ2pFLENBQUM7UUFFRCxJQUFJLFlBQVksR0FBRyxLQUFLO1FBQ3hCLElBQUksbUJBQW1CLENBQUMsTUFBTSxNQUFLLGVBQWUsYUFBZixlQUFlLHVCQUFmLGVBQWUsQ0FBRSxNQUFNLEdBQUUsQ0FBQztZQUMzRCxZQUFZLEdBQUcsSUFBSTtRQUNyQixDQUFDO2FBQU0sQ0FBQyxDQUFDLGVBQWU7WUFDdEIsWUFBWSxHQUFHLG1CQUFtQixDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsRUFBRTtnQkFDM0MsTUFBTSxNQUFNLEdBQUcsZUFBZSxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxLQUFLLEVBQUUsQ0FBQztnQkFDbEUsT0FBTyxNQUFNLElBQUksSUFBSTtZQUN2QixDQUFDLENBQUM7UUFDSixDQUFDO1FBQ0QsSUFBSSxZQUFZLEVBQUUsQ0FBQztZQUNqQixXQUFXLENBQUMsR0FBRyxDQUFDLGNBQWMsRUFBRTtnQkFDOUIsS0FBSyxFQUFFLHFEQUFxRDtnQkFDNUQsUUFBUSxFQUFFLFFBQVE7Z0JBQ2xCLFFBQVEsRUFBRSxnQkFBZSxhQUFmLGVBQWUsdUJBQWYsZUFBZSxDQUFFLE1BQU0sS0FBSSxDQUFDO2dCQUN0QyxRQUFRLEVBQUUsaUJBQWlCLENBQUMsTUFBTTtnQkFDbEMsSUFBSSxFQUFFLDhCQUE4QjthQUNyQyxDQUFDO1lBQ0YsV0FBVyxDQUFDLEdBQUcsQ0FBQyxjQUFjLEVBQUU7Z0JBQzlCLEtBQUssRUFBRSxxREFBcUQ7Z0JBQzVELFFBQVEsRUFBRSxRQUFRO2dCQUNsQixRQUFRLEVBQUUsZ0JBQWUsYUFBZixlQUFlLHVCQUFmLGVBQWUsQ0FBRSxNQUFNLEtBQUksQ0FBQztnQkFDdEMsUUFBUSxFQUFFLGlCQUFpQixDQUFDLE1BQU07Z0JBQ2xDLGNBQWMsRUFBRSxDQUFDLGVBQWUsSUFBSSxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztnQkFDdkUsY0FBYyxFQUFFLG1CQUFtQixDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO2dCQUMvQyxJQUFJLEVBQUUsOEJBQThCO2dCQUNwQyxTQUFTLEVBQUUsSUFBSSxDQUFDLEdBQUcsRUFBRTthQUN0QixDQUFDO1lBQ0Ysa0JBQWtCLENBQUMsaUJBQWlCLENBQUM7UUFDdkMsQ0FBQzthQUFNLENBQUM7WUFDTixXQUFXLENBQUMsR0FBRyxDQUFDLGNBQWMsRUFBRTtnQkFDOUIsS0FBSyxFQUFFLDRDQUE0QztnQkFDbkQsUUFBUSxFQUFFLFFBQVE7Z0JBQ2xCLE1BQU0sRUFBRSxvQkFBb0I7Z0JBQzVCLFNBQVMsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFO2FBQ3RCLENBQUM7UUFDSixDQUFDO0lBQ0gsQ0FBQyxFQUFFLENBQUMsUUFBUSxhQUFSLFFBQVEsdUJBQVIsUUFBUSxDQUFFLEVBQUUsRUFBRSxlQUFlLEVBQUUsUUFBUSxFQUFFLE9BQU8sRUFBRSxnQkFBZ0IsQ0FBQyxDQUFDO0lBRXhFOzs7OztPQUtHO0lBQ0gsTUFBTSxhQUFhLEdBQUcsR0FBRyxFQUFFO1FBQ3pCLElBQUksU0FBUyxJQUFJLFNBQVMsQ0FBQyxPQUFPLEVBQUUsQ0FBQztZQUNuQywrQ0FBK0M7WUFDL0MsTUFBTSxnQkFBZ0IsR0FBRyxTQUFTLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLE1BQWtCLEVBQUUsRUFBRSxDQUFDLENBQUMsZ0JBQWdCLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDO1lBQ2hILE1BQU0sY0FBYyxHQUFHLGdCQUFnQixDQUFDLE1BQU07WUFFOUMsaUVBQWlFO1lBQ2pFLE9BQU8sR0FBRyxjQUFjLENBQUMsbUJBQW1CLENBQUMsS0FBSyxjQUFjLE1BQU0sV0FBVyxFQUFFO1lBQ25GO0FBQUEsRUFBMEQ7WUFDMUQ7QUFBQSxFQUFzQztZQUN0QztBQUFBLEVBQThCO1lBQzlCO0FBQUEsRUFFQztZQUNEO0FBQUEsRUFBMEQ7UUFDNUQsQ0FBQztRQUNELE9BQU8sRUFBRTtJQUNYLENBQUM7SUFFRDs7OztPQUlHO0lBQ0gsTUFBTSxlQUFlLEdBQUcsNENBQUssQ0FBQyxXQUFXLENBQUMsR0FBRyxFQUFFO1FBQzdDLFlBQVksQ0FBQyxJQUFJLENBQUMsRUFBRTtZQUNsQixNQUFNLFFBQVEsR0FBRyxDQUFDLElBQUk7WUFDdEIsV0FBVyxDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsRUFBRTtnQkFDakMsS0FBSyxFQUFFLHlCQUF5QjtnQkFDaEMsUUFBUTtnQkFDUixhQUFhLEVBQUUsSUFBSTtnQkFDbkIsUUFBUTtnQkFDUixTQUFTLEVBQUUsSUFBSSxDQUFDLEdBQUcsRUFBRTthQUN0QixDQUFDO1lBRUYsbUVBQW1FO1lBQ25FLG1CQUFtQixDQUFDLE9BQU8sQ0FBQyxFQUFFO2dCQUM1QixNQUFNLE1BQU0sR0FBRyxJQUFJLEdBQUcsQ0FBQyxPQUFPLENBQUM7Z0JBQy9CLG1EQUFtRDtnQkFDbkQsTUFBTSxZQUFZLEdBQUcsc0JBQXNCLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDO2dCQUMvRCxZQUFZLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxFQUFFO29CQUN4QixNQUFNLENBQUMsR0FBRyxDQUFDLEVBQUUsRUFBRSxRQUFRLENBQUM7Z0JBQzFCLENBQUMsQ0FBQztnQkFDRixXQUFXLENBQUMsR0FBRyxDQUFDLGlCQUFpQixFQUFFO29CQUNqQyxLQUFLLEVBQUUsMEJBQTBCO29CQUNqQyxRQUFRO29CQUNSLFFBQVE7b0JBQ1IsWUFBWSxFQUFFLFlBQVksQ0FBQyxNQUFNO29CQUNqQyxTQUFTLEVBQUUsWUFBWSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsbUJBQW1CO29CQUN6RCxTQUFTLEVBQUUsSUFBSSxDQUFDLEdBQUcsRUFBRTtpQkFDdEIsQ0FBQztnQkFDRixPQUFPLE1BQU07WUFDZixDQUFDLENBQUM7WUFFRixPQUFPLFFBQVE7UUFDakIsQ0FBQyxDQUFDO0lBQ0osQ0FBQyxFQUFFLENBQUMsUUFBUSxFQUFFLHNCQUFzQixDQUFDLENBQUM7SUFFdEMsTUFBTSx5QkFBeUIsR0FBRyw0Q0FBSyxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUU7UUFDbkQsT0FBTyxvREFBUyxDQUFDO1lBQ2YsWUFBWSxFQUFFLFNBQVMsQ0FBQyxrQkFBa0I7WUFDMUMsZ0JBQWdCLEVBQUUsU0FBUyxDQUFDLGtCQUFrQjtTQUMvQyxDQUFDO0lBQ0osQ0FBQyxFQUFFLENBQUMsU0FBUyxhQUFULFNBQVMsdUJBQVQsU0FBUyxDQUFFLGtCQUFrQixDQUFDLENBQUM7SUFFbkMsTUFBTSxZQUFZLEdBQUcsNENBQUssQ0FBQyxXQUFXLENBQUMsR0FBRyxFQUFFO1FBQzFDLHFFQUEwQixDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUM7SUFDaEQsQ0FBQyxFQUFFLEVBQUUsQ0FBQztJQUVOLG1EQUFtRDtJQUNuRCw0REFBNEQ7SUFDNUQsb0ZBQW9GO0lBQ3BGLE1BQU0sZUFBZSxHQUFHLDRDQUFLLENBQUMsV0FBVyxDQUFDLENBQUMsSUFBdUIsRUFBRSxFQUFFOztRQUNwRSw4RUFBOEU7UUFDOUUsTUFBTSxhQUFhLEdBQUcsY0FBUSxDQUFDLGtCQUFrQixFQUFFLG1DQUFJLEVBQUU7UUFDekQsTUFBTSxXQUFXLEdBQUcsY0FBUSxDQUFDLG9CQUFvQixFQUFFLG1DQUFJLEVBQUU7UUFDekQsTUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLEtBQUssRUFBRTtRQUUzQixpRUFBaUU7UUFDakUsSUFBSSxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQztZQUNsQyxNQUFNLG9CQUFvQixHQUFHLENBQUMsR0FBRyxhQUFhLEVBQUUsSUFBSSxDQUFDO1lBQ3JELE1BQU0sU0FBUyxHQUFHLG9CQUFvQixDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsQ0FBQztZQUVwRSxzRUFBc0U7WUFDdEUsMEVBQXVCLENBQUMsUUFBUSxFQUFFLFFBQVEsRUFBRSxTQUFTLEVBQUUsb0JBQTJDLEVBQUUsSUFBSSxDQUFDO1FBQzNHLENBQUM7UUFFRCxvR0FBb0c7UUFDcEcsTUFBTSxPQUFPLEdBQWtCO1lBQzdCLFVBQVUsRUFBRSxRQUFRO1lBQ3BCLE9BQU8sRUFBRSxDQUFDLElBQUksQ0FBQztZQUNmLElBQUksRUFBRSxVQUFVO1lBQ2hCLElBQUksRUFBRSxRQUFRLENBQUMsUUFBUSxFQUFFO1NBQzFCO1FBRUQsK0RBQStEO1FBQy9ELHdEQUFpQixDQUFDLFdBQVcsRUFBRSxDQUFDLG1CQUFtQixDQUFDLFFBQVEsRUFBRSxDQUFDLE9BQU8sQ0FBQyxFQUFFLGdEQUFTLENBQUMsT0FBTyxDQUFDO2FBQ3hGLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxFQUFFO1lBQ3ZCLGdEQUFnRDtZQUNoRCxJQUFJLFVBQVUsR0FBUSxJQUFJO1lBQzFCLEtBQUssTUFBTSxRQUFRLElBQUksZ0JBQWdCLEVBQUUsQ0FBQztnQkFDeEMsTUFBTSxPQUFPLEdBQUcsZ0JBQWdCLENBQUMsUUFBUSxDQUFDO2dCQUMxQyxVQUFVLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLE1BQVcsRUFBRSxFQUFFLENBQUMsTUFBTSxDQUFDLElBQUksS0FBSyxlQUFlLElBQUksTUFBTSxDQUFDLEVBQUUsS0FBSyxlQUFlLENBQUM7Z0JBQzVHLElBQUksVUFBVTtvQkFBRSxNQUFLO1lBQ3ZCLENBQUM7WUFFRCxJQUFJLFVBQVUsRUFBRSxDQUFDO2dCQUNmLDBCQUEwQjtnQkFDMUIsT0FBTyx3REFBaUIsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxpQkFBaUIsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxPQUFPLENBQUMsRUFBRSxnREFBUyxDQUFDLE9BQU8sRUFBRSxRQUFRLENBQUM7WUFDOUcsQ0FBQztRQUNILENBQUMsQ0FBQzthQUNELEtBQUssQ0FBQyxLQUFLLENBQUMsRUFBRTtZQUNiLHlCQUF5QjtRQUMzQixDQUFDLENBQUM7SUFDTixDQUFDLEVBQUUsQ0FBQyxRQUFRLEVBQUUsUUFBUSxDQUFDLENBQUM7SUFFeEI7Ozs7Ozs7T0FPRztJQUNILE1BQU0sWUFBWSxHQUFHLDRDQUFLLENBQUMsV0FBVyxDQUFDLENBQUMsSUFBdUIsRUFBRSxFQUFFOztRQUNqRSxNQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsS0FBSyxFQUFFO1FBQzNCLE1BQU0sZ0JBQWdCLEdBQUcsU0FBUztRQUVsQyxpREFBaUQ7UUFDakQsTUFBTSxJQUFJLEdBQUcsTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQztRQUM5QyxNQUFNLFNBQVMsR0FBRyxJQUFJLGVBQWUsQ0FBQyxJQUFJLENBQUM7UUFDM0MsTUFBTSxVQUFVLEdBQThCLEVBQUU7UUFDaEQsU0FBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEtBQUssRUFBRSxHQUFHLEVBQUUsRUFBRTtZQUMvQixVQUFVLENBQUMsR0FBRyxDQUFDLEdBQUcsS0FBSztRQUN6QixDQUFDLENBQUM7UUFFRixXQUFXLENBQUMsR0FBRyxDQUFDLGlCQUFpQixFQUFFO1lBQ2pDLEtBQUssRUFBRSxzQkFBc0I7WUFDN0IsUUFBUTtZQUNSLGVBQWUsRUFBRSxNQUFNO1lBQ3ZCLGdCQUFnQjtZQUNoQixTQUFTLEVBQUUsSUFBSSxDQUFDLEdBQUcsRUFBRTtTQUN0QixDQUFDO1FBRUYsV0FBVyxDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUU7WUFDdEIsS0FBSyxFQUFFLHFCQUFxQjtZQUM1QixRQUFRO1lBQ1IsZUFBZSxFQUFFLE1BQU07WUFDdkIsSUFBSSxFQUFFLElBQUk7WUFDVixVQUFVLEVBQUUsVUFBVTtZQUN0QixlQUFlLEVBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxNQUFNO1lBQy9DLFNBQVMsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFO1NBQ3RCLENBQUM7UUFFRixtQ0FBbUM7UUFDbkMsbUJBQW1CLENBQUMsT0FBTyxDQUFDLEVBQUU7WUFDNUIsTUFBTSxNQUFNLEdBQUcsSUFBSSxHQUFHLENBQUMsT0FBTyxDQUFDO1lBQy9CLE1BQU0sQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDO1lBQ3JCLFdBQVcsQ0FBQyxHQUFHLENBQUMsaUJBQWlCLEVBQUU7Z0JBQ2pDLEtBQUssRUFBRSw2QkFBNkI7Z0JBQ3BDLFFBQVE7Z0JBQ1IsZUFBZSxFQUFFLE1BQU07Z0JBQ3ZCLGNBQWMsRUFBRSxNQUFNLENBQUMsSUFBSTtnQkFDM0IsU0FBUyxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUU7YUFDdEIsQ0FBQztZQUNGLE9BQU8sTUFBTTtRQUNmLENBQUMsQ0FBQztRQUVGLDZCQUE2QjtRQUM3QixtQkFBbUIsQ0FBQyxJQUFJLENBQUMsRUFBRTs7WUFDekIsTUFBTSxNQUFNLEdBQUcsSUFBSSxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQztZQUV4Qyw4RUFBOEU7WUFDOUUsNkVBQTZFO1lBQzdFLGtHQUFrRztZQUNsRywrRkFBK0Y7WUFDL0YsZ0dBQWdHO1lBQ2hHLElBQUkscUJBQXFCLEdBQUcsZ0JBQVMsYUFBVCxTQUFTLHVCQUFULFNBQVMsQ0FBRSxPQUFPLDBDQUFFLE1BQU0sS0FBSSxDQUFDO1lBQzNELElBQUkscUJBQXFCLEtBQUssQ0FBQyxFQUFFLENBQUM7Z0JBQ2hDLDZFQUE2RTtnQkFDN0UsTUFBTSxrQkFBa0IsR0FBRyxXQUFXLEtBQUssa0RBQWEsQ0FBQyxjQUFjO29CQUM1QyxXQUFXLEtBQUssa0RBQWEsQ0FBQyxtQkFBbUI7Z0JBQzVFLElBQUksa0JBQWtCLElBQUksa0JBQWtCLElBQUksa0JBQWtCLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRSxDQUFDO29CQUM5RSxxQkFBcUIsR0FBRyxrQkFBa0IsQ0FBQyxNQUFNO2dCQUNuRCxDQUFDO3FCQUFNLENBQUM7b0JBQ04sa0ZBQWtGO29CQUNsRixxQkFBcUIsR0FBRyxXQUFXO2dCQUNyQyxDQUFDO1lBQ0gsQ0FBQztZQUVELFdBQVcsQ0FBQyxHQUFHLENBQUMsY0FBYyxFQUFFO2dCQUM5QixLQUFLLEVBQUUsbUNBQW1DO2dCQUMxQyxRQUFRO2dCQUNSLG9CQUFvQixFQUFFLE1BQU0sQ0FBQyxJQUFJO2dCQUNqQyxxQkFBcUI7Z0JBQ3JCLFdBQVc7Z0JBQ1gscUJBQXFCLEVBQUUsZ0JBQVMsYUFBVCxTQUFTLHVCQUFULFNBQVMsQ0FBRSxPQUFPLDBDQUFFLE1BQU0sS0FBSSxDQUFDO2dCQUN0RCx1QkFBdUIsRUFBRSxtQkFBa0IsYUFBbEIsa0JBQWtCLHVCQUFsQixrQkFBa0IsQ0FBRSxNQUFNLEtBQUksQ0FBQztnQkFDeEQsV0FBVztnQkFDWCxnQkFBZ0IsRUFBRSxNQUFNLENBQUMsSUFBSSxLQUFLLHFCQUFxQixJQUFJLHFCQUFxQixHQUFHLENBQUM7Z0JBQ3BGLFNBQVMsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFO2FBQ3RCLENBQUM7WUFFRixJQUFJLE1BQU0sQ0FBQyxJQUFJLEtBQUsscUJBQXFCLElBQUkscUJBQXFCLEdBQUcsQ0FBQyxFQUFFLENBQUM7Z0JBQ3ZFLHVGQUF1RjtnQkFDdkYsU0FBUyxDQUFDLElBQUksQ0FBQztnQkFDZixPQUFPLE1BQU07WUFDZixDQUFDO1lBRUQsT0FBTyxNQUFNO1FBQ2YsQ0FBQyxDQUFDO1FBRUYsb0RBQW9EO1FBQ3BELFlBQVksQ0FBQyxRQUFRLENBQUMsRUFBRTtZQUN0QixJQUFJLENBQUMsUUFBUTtnQkFBRSxPQUFPLFFBQVE7WUFDOUIsTUFBTSxlQUFlLEdBQUcsUUFBUSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQyxNQUFrQixFQUFFLEVBQUUsQ0FBQyxNQUFNLENBQUMsS0FBSyxFQUFFLEtBQUssTUFBTSxDQUFDO1lBQ2xHLHVDQUNLLFFBQVEsS0FDWCxPQUFPLEVBQUUsZUFBZSxJQUN6QjtRQUNILENBQUMsQ0FBQztRQUVGLHlFQUF5RTtRQUN6RSxtR0FBbUc7UUFDbkcsaUZBQWlGO1FBQ2pGLDZGQUFpQyxDQUMvQixRQUFRLEVBQ1IsQ0FBQyxJQUFJLENBQUMsRUFDTixRQUFrQyxFQUNsQyw0QkFBNEIsRUFDNUIsYUFBYSxDQUNkO1FBRUQsNEJBQTRCO1FBQzVCLE1BQU0sYUFBYSxHQUFHLGNBQVEsQ0FBQyxrQkFBa0IsRUFBRSxtQ0FBSSxFQUFFO1FBQ3pELE1BQU0sb0JBQW9CLEdBQUcsYUFBYSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsS0FBSyxNQUFNLENBQUM7UUFDdEYsTUFBTSxTQUFTLEdBQUcsb0JBQW9CLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxDQUFDLEtBQUssRUFBRSxDQUFDO1FBRXBFLDRCQUE0QjtRQUM1QixJQUFJLE9BQU8sUUFBUSxDQUFDLGtCQUFrQixLQUFLLFVBQVUsRUFBRSxDQUFDO1lBQ3RELFFBQVEsQ0FBQyxrQkFBa0IsQ0FBQyxTQUFTLEVBQUUsb0JBQTJDLENBQUM7UUFDckYsQ0FBQztRQUVELDJFQUEyRTtRQUMzRSxnRUFBZ0U7UUFDaEUsTUFBTSxRQUFRLEdBQUcsTUFBQyxRQUFtQyxDQUFDLG9CQUFvQixFQUFFLDBDQUFHLENBQUMsQ0FBMkI7UUFDM0csTUFBTSxZQUFZLEdBQUcsUUFBUSxhQUFSLFFBQVEsdUJBQVIsUUFBUSxDQUFFLEVBQUU7UUFDakMsTUFBTSxjQUFjLEdBQUcsSUFBSSxXQUFXLENBQUMsK0JBQStCLEVBQUU7WUFDdEUsTUFBTSxFQUFFO2dCQUNOLFFBQVE7Z0JBQ1IsU0FBUyxFQUFFLG9EQUFvRDtnQkFDL0QsWUFBWTtnQkFDWixVQUFVLEVBQUUsUUFBUSxDQUFDLEVBQUU7Z0JBQ3ZCLGlCQUFpQixFQUFFLFNBQVMsQ0FBQyxRQUFRO2FBQ3RDO1lBQ0QsT0FBTyxFQUFFLElBQUk7WUFDYixVQUFVLEVBQUUsSUFBSTtTQUNqQixDQUFDO1FBQ0YsTUFBTSxDQUFDLGFBQWEsQ0FBQyxjQUFjLENBQUM7UUFFcEMsZ0VBQWdFO1FBQ2hFLE1BQU0sa0JBQWtCLEdBQUcsV0FBVyxLQUFLLGtEQUFhLENBQUMsY0FBYztZQUM1QyxXQUFXLEtBQUssa0RBQWEsQ0FBQyxtQkFBbUI7UUFDNUUsSUFBSSxrQkFBa0IsSUFBSSwwQkFBMEIsSUFBSSxrQkFBa0IsSUFBSSxrQkFBa0IsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUM7WUFDNUcsTUFBTSxnQkFBZ0IsR0FBRyx3RkFBNEIsQ0FDbkQsUUFBa0MsRUFDbEMsQ0FBQyxJQUFJLENBQUMsRUFDTixrQkFBa0IsQ0FDbkI7WUFFRCxXQUFXLENBQUMsR0FBRyxDQUFDLGNBQWMsRUFBRTtnQkFDOUIsS0FBSyxFQUFFLG1DQUFtQztnQkFDMUMsUUFBUTtnQkFDUixlQUFlLEVBQUUsTUFBTTtnQkFDdkIsNkJBQTZCLEVBQUUsa0JBQWtCLENBQUMsTUFBTTtnQkFDeEQscUJBQXFCLEVBQUUsZ0JBQWdCLENBQUMsTUFBTTtnQkFDOUMsVUFBVSxFQUFFLGdCQUFnQixDQUFDLE1BQU0sR0FBRyxrQkFBa0IsQ0FBQyxNQUFNO2FBQ2hFLENBQUM7WUFFRiwwQkFBMEIsQ0FBQyxnQkFBZ0IsQ0FBQztRQUM5QyxDQUFDO1FBRUQsaUVBQWlFO1FBQ2pFLFVBQVUsQ0FBQyxHQUFHLEVBQUU7WUFDZCxXQUFXLENBQUMsR0FBRyxDQUFDLGNBQWMsRUFBRTtnQkFDOUIsS0FBSyxFQUFFLHdCQUF3QjtnQkFDL0IsUUFBUTtnQkFDUixlQUFlLEVBQUUsTUFBTTtnQkFDdkIsZUFBZSxFQUFFLGdCQUFnQjtnQkFDakMsY0FBYyxFQUFFLFNBQVM7Z0JBQ3pCLGdCQUFnQixFQUFFLGdCQUFnQixLQUFLLFNBQVM7Z0JBQ2hELG1CQUFtQixFQUFFLFNBQVMsRUFBRSxvQ0FBb0M7Z0JBQ3BFLFNBQVMsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFO2FBQ3RCLENBQUM7UUFDSixDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQ1AsQ0FBQyxFQUFFLENBQUMsUUFBUSxFQUFFLFFBQVEsRUFBRSxXQUFXLEVBQUUsU0FBUyxFQUFFLFdBQVcsRUFBRSxrQkFBa0IsRUFBRSwwQkFBMEIsRUFBRSxTQUFTLENBQUMsUUFBUSxFQUFFLFNBQVMsQ0FBQyxDQUFDO0lBRTVJLE9BQU8sQ0FDTCwwRUFBSyxTQUFTLEVBQUMsb0JBQW9CLEVBQUMsR0FBRyxFQUFFLFdBQVcsRUFBRSxJQUFJLEVBQUMsU0FBUyxnQkFBYSxjQUFjLENBQUMsU0FBUyxDQUFDLGFBQ3hHLGdFQUFDLDBEQUFtQixJQUFDLGFBQWEsRUFBRSx5QkFBeUIsRUFBRSxzQkFBc0IsRUFBRSwwQkFBMEIsR0FBSSxFQUdwSCxjQUFjLElBQUksQ0FDakIseUVBQUssR0FBRyxFQUFFLDhDQUFHLG9DQUFtQyxZQUM5QyxnRUFBQyxxRUFBWSxJQUNYLEtBQUssRUFBRSxjQUFjLEVBQ3JCLFNBQVMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsR0FDeEMsR0FDRSxDQUNQLEVBRUQsMEVBQUssU0FBUyxFQUFDLHFEQUFxRCxhQUNsRSxnRUFBQywyQ0FBTSxrQkFBYSxjQUFjLENBQUMsTUFBTSxDQUFDLEVBQUUsR0FBRyxFQUFFLFVBQVUsRUFBRSxTQUFTLEVBQUMsVUFBVSxFQUFDLElBQUksRUFBQyxJQUFJLEVBQUMsT0FBTyxFQUFDLE1BQU0sRUFBQyxLQUFLLEVBQUMsU0FBUyxFQUFDLElBQUksUUFBQyxPQUFPLEVBQUUsR0FBRyxFQUFFLEdBQUcsU0FBUyxFQUFFLEVBQUMsQ0FBQyxZQUM1SixnRUFBQyx5RkFBaUIsSUFBQyxRQUFRLFNBQUUsR0FDdEIsRUFDUixpQkFBVyxDQUFDLFlBQVksbUNBQUksY0FBYyxDQUFDLFNBQVMsQ0FBQyxFQUNyRCxDQUNDLGlFQUFDLDRDQUFLLENBQUMsUUFBUSxlQUNiLGdFQUFDLDRDQUFPLElBQUMsS0FBSyxFQUFFLGNBQWMsQ0FBQyxhQUFhLENBQUMsRUFBRSxTQUFTLEVBQUMsUUFBUSxZQUMvRCxnRUFBQywyQ0FBTSxJQUFDLFNBQVMsRUFBQyxTQUFTLEVBQUMsSUFBSSxRQUFDLElBQUksRUFBQyxJQUFJLEVBQUMsT0FBTyxFQUFDLE1BQU0sRUFBQyxLQUFLLEVBQUMsU0FBUyxFQUFDLE9BQU8sRUFBRSxZQUFZLGdCQUFjLGNBQWMsQ0FBQyxhQUFhLENBQUMsWUFDeEksZ0VBQUMseUNBQUksSUFBQyxJQUFJLEVBQUUsT0FBTyxDQUFDLFVBQVUsR0FBSSxHQUMzQixHQUNELEVBR1QsZ0JBQWdCLElBQUksUUFBUSxJQUFJLENBQy9CLGlFQUFDLDRDQUFLLENBQUMsUUFBUSxlQUNiLHlFQUFLLEdBQUcsRUFBRSw4Q0FBRyw4RUFBNkUsR0FBUSxFQUNsRyxnRUFBQyxtREFBYyxJQUNiLFFBQVEsRUFBRSxRQUFRLEVBQ2xCLFFBQVEsRUFBRSxjQUFjLEVBQ3hCLFNBQVMsRUFBRSx3REFBbUIsQ0FBQyxRQUFRLEVBQ3ZDLFVBQVUsRUFBQyxJQUFJLEVBQ2YsVUFBVSxFQUFDLFVBQVUsRUFDckIsWUFBWSxFQUFFLFlBQVksR0FDMUIsSUFDYSxDQUNsQixJQUNjLENBQ2xCLElBQ0csRUFDTiwwRUFBSyxTQUFTLEVBQUMsNkJBQTZCLGFBQzFDLDBFQUFLLFNBQVMsRUFBQywrRUFBK0UsRUFBQyxJQUFJLEVBQUMsT0FBTyxlQUFXLFFBQVEsYUFDNUgsb0ZBQU8sYUFBYSxFQUFFLEdBQVEsRUFDOUIseUVBQUssU0FBUyxFQUFDLDJCQUEyQixZQUN4QyxnRUFBQyw0Q0FBTyxJQUFDLEtBQUssRUFBRSxTQUFTLENBQUMsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLENBQUMsY0FBYyxDQUFDLFdBQVcsQ0FBQyxFQUFFLFNBQVMsRUFBQyxLQUFLLFlBQ3RHLGdFQUFDLDJDQUFNLElBQ0wsSUFBSSxFQUFDLElBQUksRUFDVCxJQUFJLEVBQUMsVUFBVSxFQUNmLElBQUksUUFDSixPQUFPLEVBQUUsZUFBZSxnQkFDWixTQUFTLENBQUMsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLENBQUMsY0FBYyxDQUFDLFdBQVcsQ0FBQyxZQUVsRixTQUFTLENBQUMsQ0FBQyxDQUFDLGdFQUFDLDhGQUFtQixLQUFHLENBQUMsQ0FBQyxDQUFDLGdFQUFDLDBGQUFpQixLQUFHLEdBQ3JELEdBQ0QsR0FDTixJQUNGLEVBRUwsV0FBVyxHQUFHLENBQUMsSUFBSSxDQUNsQixnRUFBQyxvREFBVSxJQUVULFFBQVEsRUFBRSxRQUFRLEVBQ2xCLFNBQVMsRUFBRSxTQUFTLEVBQ3BCLFFBQVEsRUFBRSxRQUFlLEVBQ3pCLE9BQU8sRUFBRSxzQkFBc0IsRUFDL0IsU0FBUyxFQUFFLFNBQVMsRUFDcEIsUUFBUSxFQUFFLFlBQVksRUFDdEIsY0FBYyxFQUFFLGVBQWUsRUFDL0IsUUFBUSxFQUFFLFlBQVksRUFDdEIsZUFBZSxFQUFFLFNBQVMsRUFDMUIsZ0JBQWdCLEVBQUUsZ0JBQWdCLEVBQ2xDLGdCQUFnQixFQUFFLGdCQUFnQixFQUNsQyxZQUFZLEVBQUUsZ0JBQWdCLElBWjFCLFFBQVEsQ0FhWixDQUNILElBQ0csSUFDRixDQUNQO0FBQ0gsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNwdUNnQztBQUUxQixNQUFNLGdCQUFnQixHQUFHLDRDQUFLLENBQUMsYUFBYSxDQUF3QjtJQUN6RSxXQUFXLEVBQUUsSUFBSTtDQUNsQixDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0pGLGVBQWU7QUFnQkc7QUFDaUM7QUFDQztBQUN5RDtBQUNSO0FBQzNDO0FBQ2M7QUFDckI7QUFDYTtBQUNqQjtBQUMwQjtBQUV6RSxNQUFNLFdBQVcsR0FBRyx5RkFBNEIsRUFBRTtBQUNLO0FBQ1U7QUFDRjtBQWUvRCxNQUFNLFlBQVksR0FBRyxDQUFDLFlBQXFCLEVBQUUsRUFBRTtJQUM3QyxPQUFPLDhDQUFHOzs7Ozs7Ozs7Ozs7O2tCQWFNLFlBQVksQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxNQUFNO29CQUM1QixZQUFZLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsTUFBTTs7Ozs7Ozs7O0dBU2pEO0FBQ0gsQ0FBQztBQUVNLFNBQVMsYUFBYSxDQUFFLEtBQXlCOztJQUN0RCxNQUFNLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxRQUFRLEVBQUUsb0JBQW9CLEVBQUUsZUFBZSxFQUFFLFlBQVksRUFBRSxnQkFBZ0IsRUFBRSxpQkFBaUIsRUFBRSxtQkFBbUIsRUFBRSxnQkFBZ0IsRUFBRSxHQUFHLEtBQUs7SUFDL0ssTUFBTSxtQkFBbUIsR0FBRyw0Q0FBSyxDQUFDLFdBQVcsQ0FBQyxnQkFBZ0IsQ0FBQztJQUMvRCxNQUFNLFNBQVMsR0FBbUMsaURBQVUsQ0FBQyxXQUFXLENBQUMsQ0FBQyxLQUFjLEVBQUUsRUFBRTtRQUMxRixNQUFNLFVBQVUsR0FBRyxLQUFLLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUM7UUFDcEQsT0FBTyxVQUFVLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsUUFBUSxLQUFLLFFBQVEsQ0FBQztJQUM5RSxDQUFDLENBQUM7SUFDRixNQUFNLFdBQVcsR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxtRUFBa0IsRUFBRSxTQUFTLENBQUM7SUFDcEUsTUFBTSxjQUFjLEdBQUcsNENBQUssQ0FBQyxjQUFjLENBQUMsNkRBQWMsQ0FBQztJQUMzRCxNQUFNLENBQUMsV0FBVyxFQUFFLGNBQWMsQ0FBQyxHQUFHLDRDQUFLLENBQUMsUUFBUSxDQUFTLElBQUksQ0FBQztJQUNsRSxxRkFBcUY7SUFDckYsTUFBTSxDQUFDLHFCQUFxQixFQUFFLHdCQUF3QixDQUFDLEdBQUcsNENBQUssQ0FBQyxRQUFRLENBQ3RFLGVBQVMsYUFBVCxTQUFTLHVCQUFULFNBQVMsQ0FBRSxjQUFjLG1DQUFJLElBQUksQ0FDbEM7SUFFRCx5RkFBeUY7SUFDekYsNENBQUssQ0FBQyxTQUFTLENBQUMsR0FBRyxFQUFFOztRQUNuQix3QkFBd0IsQ0FBQyxlQUFTLGFBQVQsU0FBUyx1QkFBVCxTQUFTLENBQUUsY0FBYyxtQ0FBSSxJQUFJLENBQUM7SUFDN0QsQ0FBQyxFQUFFLENBQUMsU0FBUyxhQUFULFNBQVMsdUJBQVQsU0FBUyxDQUFFLGNBQWMsRUFBRSxTQUFTLGFBQVQsU0FBUyx1QkFBVCxTQUFTLENBQUUsUUFBUSxDQUFDLENBQUM7SUFFcEQsdUVBQXVFO0lBQ3ZFLE1BQU0sRUFDSixrQkFBa0IsRUFDbEIsZ0JBQWdCLEVBQ2hCLGtCQUFrQixFQUNsQixVQUFVLEVBQ1YsbUJBQW1CLEVBQ25CLGlDQUFpQyxFQUNqQyw2QkFBNkIsRUFDN0IseUJBQXlCLEVBQ3pCLGdCQUFnQixFQUNoQiwyQkFBMkIsRUFDM0IsNkJBQTZCLEVBQzdCLHlCQUF5QixFQUN6Qiw4QkFBOEIsRUFDOUIsZ0NBQWdDLEVBQ2hDLDRCQUE0QixFQUM1QixvQkFBb0IsR0FBRyxjQUFjLENBQUMsaUJBQWlCLENBQUMsRUFDeEQsa0JBQWtCLEdBQUcsY0FBYyxDQUFDLGVBQWUsQ0FBQyxFQUNwRCxtQkFBbUIsRUFDbkIsaUJBQWlCLEVBQ2xCLEdBQUcsV0FBVztJQUNmLE1BQU0sQ0FBQyx5QkFBeUIsRUFBRSw0QkFBNEIsQ0FBQyxHQUFHLDRDQUFLLENBQUMsUUFBUSxDQUFrQixVQUFVLENBQUM7SUFDN0csTUFBTSxtQkFBbUIsR0FBRyw0Q0FBSyxDQUFDLE1BQU0sQ0FBbUIsSUFBSSxDQUFDO0lBQ2hFLE1BQU0sa0JBQWtCLEdBQUcsNENBQUssQ0FBQyxNQUFNLENBQWtCLG9EQUFlLENBQUMsU0FBUyxDQUFDO0lBQ25GLE1BQU0sU0FBUyxHQUFHLDRDQUFLLENBQUMsTUFBTSxDQUF1QyxJQUFJLENBQUM7SUFDMUUsTUFBTSxjQUFjLEdBQUcsNENBQUssQ0FBQyxNQUFNLENBQW9CLElBQUksQ0FBQztJQUM1RCxNQUFNLGNBQWMsR0FBRyw0Q0FBSyxDQUFDLE1BQU0sQ0FBaUIsSUFBSSxDQUFDO0lBQ3pELE1BQU0sWUFBWSxHQUFHLDhEQUFhLEVBQUU7SUFDcEMsTUFBTSxnQkFBZ0IsR0FBRyw0Q0FBSyxDQUFDLE1BQU0sQ0FBQyxzR0FBZ0MsQ0FBQyxVQUFVLENBQUMsQ0FBQztJQUNuRixNQUFNLGtCQUFrQixHQUFHLDRDQUFLLENBQUMsTUFBTSxDQUFnQixJQUFJLENBQUMsRUFBQywrQ0FBK0M7SUFDNUcsTUFBTSxlQUFlLEdBQUcsNENBQUssQ0FBQyxNQUFNLENBQWdCLElBQUksQ0FBQyxFQUFDLG9DQUFvQztJQUM5RixNQUFNLGdCQUFnQixHQUFHLDRDQUFLLENBQUMsTUFBTSxDQUFVLEtBQUssQ0FBQyxFQUFDLGtEQUFrRDtJQUN4RyxNQUFNLENBQUMsYUFBYSxFQUFFLGdCQUFnQixDQUFDLEdBQUcsNENBQUssQ0FBQyxRQUFRLENBQVUsS0FBSyxDQUFDO0lBRXhFLHVEQUF1RDtJQUN2RCw0Q0FBSyxDQUFDLFNBQVMsQ0FBQyxHQUFHLEVBQUU7UUFDbkIsTUFBTSxXQUFXLEdBQUcsQ0FBQyxDQUFhLEVBQUUsRUFBRTtZQUNwQyxNQUFNLE1BQU0sR0FBRyxDQUFDLENBQUMsTUFBcUI7WUFDdEMsSUFBSSxNQUFNLENBQUMsT0FBTyxLQUFLLE9BQU8sRUFBRSxDQUFDO2dCQUMvQixNQUFNLEdBQUcsR0FBSSxNQUEyQixDQUFDLEtBQUs7Z0JBQzlDLGdCQUFnQixDQUFDLCtEQUFpQixDQUFDLEdBQUcsQ0FBQyxDQUFDO2dCQUN4QyxXQUFXLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBRTtvQkFDdEIsS0FBSyxFQUFFLGVBQWU7b0JBQ3RCLFFBQVE7b0JBQ1IsT0FBTyxFQUFFLE1BQU0sQ0FBQyxPQUFPO29CQUN2QixJQUFJLEVBQUcsTUFBMkIsQ0FBQyxJQUFJO29CQUN2QyxLQUFLLEVBQUUsR0FBRztpQkFDWCxDQUFDO1lBQ0osQ0FBQztRQUNILENBQUM7UUFFRCxNQUFNLFdBQVcsR0FBRyxDQUFDLENBQVEsRUFBRSxFQUFFO1lBQy9CLE1BQU0sTUFBTSxHQUFHLENBQUMsQ0FBQyxNQUFxQjtZQUN0QyxJQUFJLE1BQU0sQ0FBQyxPQUFPLEtBQUssT0FBTyxFQUFFLENBQUM7Z0JBQy9CLE1BQU0sR0FBRyxHQUFJLE1BQTJCLENBQUMsS0FBSztnQkFDOUMsTUFBTSxPQUFPLEdBQUcsK0RBQWlCLENBQUMsR0FBRyxDQUFDO2dCQUN0QyxnQkFBZ0IsQ0FBQyxPQUFPLENBQUM7Z0JBQ3pCLFdBQVcsQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFO29CQUN0QixLQUFLLEVBQUUsY0FBYztvQkFDckIsUUFBUTtvQkFDUixLQUFLLEVBQUUsR0FBRztvQkFDVixhQUFhLEVBQUUsT0FBTztpQkFDdkIsQ0FBQztZQUNKLENBQUM7UUFDSCxDQUFDO1FBRUQsTUFBTSxjQUFjLEdBQUcsQ0FBQyxDQUFhLEVBQUUsRUFBRTtZQUN2Qyx5Q0FBeUM7WUFDekMsVUFBVSxDQUFDLEdBQUcsRUFBRTtnQkFDZCxnQkFBZ0IsQ0FBQyxLQUFLLENBQUM7WUFDekIsQ0FBQyxFQUFFLEVBQUUsQ0FBQztRQUNSLENBQUM7UUFFRCxNQUFNLFNBQVMsR0FBRyxjQUFjLENBQUMsT0FBTztRQUN4QyxJQUFJLFNBQVMsRUFBRSxDQUFDO1lBQ2QsU0FBUyxDQUFDLGdCQUFnQixDQUFDLFNBQVMsRUFBRSxXQUFXLENBQUM7WUFDbEQsU0FBUyxDQUFDLGdCQUFnQixDQUFDLE9BQU8sRUFBRSxXQUFXLENBQUM7WUFDaEQsU0FBUyxDQUFDLGdCQUFnQixDQUFDLFVBQVUsRUFBRSxjQUFjLENBQUM7UUFDeEQsQ0FBQztRQUVELE9BQU8sR0FBRyxFQUFFO1lBQ1YsSUFBSSxTQUFTLEVBQUUsQ0FBQztnQkFDZCxTQUFTLENBQUMsbUJBQW1CLENBQUMsU0FBUyxFQUFFLFdBQVcsQ0FBQztnQkFDckQsU0FBUyxDQUFDLG1CQUFtQixDQUFDLE9BQU8sRUFBRSxXQUFXLENBQUM7Z0JBQ25ELFNBQVMsQ0FBQyxtQkFBbUIsQ0FBQyxVQUFVLEVBQUUsY0FBYyxDQUFDO1lBQzNELENBQUM7UUFDSCxDQUFDO0lBQ0gsQ0FBQyxFQUFFLENBQUMsUUFBUSxDQUFDLENBQUM7SUFFZCwrQ0FBK0M7SUFDL0MsTUFBTSxZQUFZLEdBQUcsNENBQUssQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFO1FBQ3RDLHFFQUFxRTtRQUNyRSxJQUFJLGFBQWEsRUFBRSxDQUFDO1lBQ2xCLFdBQVcsQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFO2dCQUN0QixLQUFLLEVBQUUsMEJBQTBCO2dCQUNqQyxRQUFRO2dCQUNSLE9BQU8sRUFBRSxJQUFJO2FBQ2QsQ0FBQztZQUNGLE9BQU8sSUFBSTtRQUNiLENBQUM7UUFFRCxJQUFJLENBQUMsMEJBQXlCLGFBQXpCLHlCQUF5Qix1QkFBekIseUJBQXlCLENBQUUsS0FBSyxLQUFJLHlCQUF5QixDQUFDLEtBQUssQ0FBQyxNQUFNLEtBQUssQ0FBQyxFQUFFLENBQUM7WUFDdEYsT0FBTyxJQUFJLEVBQUMsOERBQThEO1FBQzVFLENBQUM7UUFFRCxzREFBc0Q7UUFDdEQsTUFBTSxhQUFhLEdBQUcseUJBQXlCLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRTs7WUFDaEUsd0VBQXdFO1lBQ3hFLG1FQUFtRTtZQUNuRSw0RUFBNEU7WUFDNUUsSUFBSSxJQUFJLENBQUMsSUFBSSxLQUFLLFFBQVEsRUFBRSxDQUFDO2dCQUMzQixNQUFNLEdBQUcsR0FBRyxVQUFJLENBQUMsWUFBWSwwQ0FBRSxLQUFLO2dCQUNwQyxNQUFNLE1BQU0sR0FBRyxVQUFJLENBQUMsWUFBWSwwQ0FBRSxNQUFNO2dCQUV4Qyw4RkFBOEY7Z0JBQzlGLDhFQUE4RTtnQkFDOUUsZ0ZBQWdGO2dCQUNoRixNQUFNLE1BQU0sR0FBRyxDQUFDLE1BQU0sSUFBSSxNQUFNLEtBQUssWUFBWSxDQUFDLElBQUksQ0FBQyxVQUFJLENBQUMsVUFBVSwwQ0FBRSxNQUFNLENBQUM7Z0JBRS9FLE1BQU0sT0FBTyxHQUFHLCtEQUFpQixDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsTUFBTSxDQUFDO2dCQUVoRCxXQUFXLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBRTtvQkFDdEIsS0FBSyxFQUFFLHlCQUF5QjtvQkFDaEMsUUFBUTtvQkFDUixRQUFRLEVBQUUsSUFBSSxDQUFDLElBQUk7b0JBQ25CLE1BQU07b0JBQ04sYUFBYSxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVTtvQkFDaEMsZ0JBQWdCLEVBQUUsVUFBSSxDQUFDLFVBQVUsMENBQUUsTUFBTTtvQkFDekMsTUFBTSxFQUFFLENBQUMsQ0FBQyxNQUFNO29CQUNoQixLQUFLLEVBQUUsR0FBRztvQkFDVixPQUFPO2lCQUNSLENBQUM7Z0JBRUYsV0FBVyxDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUU7b0JBQ3RCLEtBQUssRUFBRSxrQkFBa0I7b0JBQ3pCLFFBQVE7b0JBQ1IsUUFBUSxFQUFFLElBQUksQ0FBQyxJQUFJO29CQUNuQixNQUFNO29CQUNOLE1BQU07b0JBQ04sS0FBSyxFQUFFLEdBQUc7b0JBQ1YsU0FBUyxFQUFFLE9BQU8sR0FBRztvQkFDckIsT0FBTztpQkFDUixDQUFDO2dCQUVGLE9BQU8sT0FBTztZQUNoQixDQUFDO1lBQ0QsT0FBTyxJQUFJO1FBQ2IsQ0FBQyxDQUFDO1FBRUYsT0FBTyxhQUFhO0lBQ3RCLENBQUMsRUFBRSxDQUFDLHlCQUF5QixFQUFFLFFBQVEsRUFBRSxhQUFhLENBQUMsQ0FBQztJQUV4RCxNQUFNLFFBQVEsR0FBRyxRQUFRLGFBQVIsUUFBUSx1QkFBUixRQUFRLENBQUUsb0JBQW9CLEdBQUcsQ0FBQyxDQUFDO0lBRXBEOzs7Ozs7OztPQVFHO0lBQ0gsNENBQUssQ0FBQyxTQUFTLENBQUMsR0FBRyxFQUFFOztRQUNuQiwrREFBK0Q7UUFDL0QsSUFBSSxrQkFBa0IsQ0FBQyxPQUFPLEtBQUssSUFBSSxJQUFJLGtCQUFrQixDQUFDLE9BQU8sS0FBSyxRQUFRLEVBQUUsQ0FBQztZQUNuRixrQkFBa0IsQ0FBQyxPQUFPLEdBQUcsSUFBSTtZQUNqQyxlQUFlLENBQUMsT0FBTyxHQUFHLElBQUk7WUFDOUIsZ0JBQWdCLENBQUMsT0FBTyxHQUFHLEtBQUssRUFBQyxpREFBaUQ7WUFDbEYsZ0JBQWdCLENBQUMsS0FBSyxDQUFDLEVBQUMsMEJBQTBCO1FBQ3BELENBQUM7UUFFRCxtREFBbUQ7UUFDbkQsTUFBTSxZQUFZLEdBQUcsZUFBZSxDQUFDLE9BQU8sS0FBSyxJQUFJO1lBQ2hDLGVBQWUsQ0FBQyxPQUFPLEtBQUssaUJBQWlCO1lBQzdDLGtCQUFrQixDQUFDLE9BQU8sS0FBSyxRQUFRO1FBRTVELG9CQUFvQjtRQUNwQixnREFBZ0Q7UUFDaEQseUVBQXlFO1FBQ3pFLE1BQU0sY0FBYyxHQUFHLGVBQWU7WUFDaEIsaUJBQWlCO1lBQ2pCLGlCQUFVLGFBQVYsVUFBVSx1QkFBVixVQUFVLENBQUUsS0FBSywwQ0FBRSxNQUFNLElBQUcsQ0FBQztZQUM3QixDQUFDLGtCQUFrQixDQUFDLE9BQU8sS0FBSyxRQUFRLElBQUksWUFBWSxDQUFDO1FBRS9FLElBQUksY0FBYyxFQUFFLENBQUM7WUFDbkIsTUFBTSxTQUFTLEdBQUcsVUFBVSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7WUFDckMsa0VBQWtFO1lBQ2xFLElBQUksU0FBUyxJQUFJLE1BQU0sSUFBSSxTQUFTLElBQUksU0FBUyxDQUFDLElBQUksS0FBSyxRQUFRLElBQUksY0FBYyxJQUFJLFNBQVMsRUFBRSxDQUFDO2dCQUNuRyxzREFBc0Q7Z0JBQ3RELE1BQU0sT0FBTyxHQUFHLFVBQVUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxPQUFPLEVBQUUsR0FBRyxFQUFFLGNBQWMsRUFBRSxPQUFPLENBQUMsRUFBRSxpQkFBaUIsQ0FBQztnQkFDNUYsNEJBQTRCLENBQUMsT0FBTyxDQUFDO2dCQUNyQyxrREFBa0Q7Z0JBQ2xELGdCQUFnQixDQUFDLE9BQU8sR0FBRyxzR0FBZ0MsQ0FBQyxPQUFPLENBQUM7Z0JBQ3BFLGtCQUFrQixDQUFDLE9BQU8sR0FBRyxRQUFRO2dCQUNyQyxlQUFlLENBQUMsT0FBTyxHQUFHLGlCQUFpQjtnQkFFM0MsaUdBQWlHO2dCQUNqRyw2RkFBNkY7Z0JBQzdGLE1BQU0sU0FBUyxHQUFHLFVBQVUsQ0FBQyxHQUFHLEVBQUU7O29CQUNoQyxxREFBcUQ7b0JBQ3JELG9GQUFvRjtvQkFDcEYsTUFBTSxXQUFXLEdBQUcsZUFBUSxDQUFDLGFBQWEsQ0FBQyxtQkFBbUIsUUFBUSxJQUFJLENBQUMsMENBQUUsYUFBYSxDQUFDLGFBQWEsQ0FBQzt3QkFDdEYsUUFBUSxDQUFDLGFBQWEsQ0FBQyxrQ0FBa0MsUUFBUSxJQUFJLENBQUM7d0JBQ3RFLFFBQVEsQ0FBQyxhQUFhLENBQUMsYUFBYSxDQUFDO29CQUV4RCxJQUFJLFdBQVcsRUFBRSxDQUFDO3dCQUNoQiwrQkFBK0I7d0JBQy9CLE1BQU0sVUFBVSxHQUFHLFdBQVcsQ0FBQyxnQkFBZ0IsQ0FBQyxvQkFBb0IsQ0FBQzt3QkFFckUsVUFBVSxDQUFDLE9BQU8sQ0FBQyxDQUFDLEtBQXVCLEVBQUUsRUFBRTs7NEJBQzdDLDBGQUEwRjs0QkFDMUYsTUFBTSxZQUFZLEdBQUcsQ0FBQyxLQUFLLENBQUMsS0FBSztnQ0FDYixLQUFLLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxLQUFLLEVBQUU7Z0NBQ3pCLEtBQUssQ0FBQyxLQUFLLEtBQUssaUJBQWlCOzRCQUVyRCxJQUFJLFlBQVksRUFBRSxDQUFDO2dDQUNqQix3QkFBd0I7Z0NBQ3hCLEtBQUssQ0FBQyxLQUFLLEVBQUU7Z0NBRWIsZ0JBQWdCO2dDQUNoQixLQUFLLENBQUMsS0FBSyxHQUFHLGlCQUFpQjtnQ0FFL0IseURBQXlEO2dDQUN6RCxNQUFNLFVBQVUsR0FBRyxJQUFJLEtBQUssQ0FBQyxPQUFPLEVBQUUsRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLFVBQVUsRUFBRSxJQUFJLEVBQUUsQ0FBQztnQ0FDMUUsTUFBTSxDQUFDLGNBQWMsQ0FBQyxVQUFVLEVBQUUsUUFBUSxFQUFFLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxVQUFVLEVBQUUsSUFBSSxFQUFFLENBQUM7Z0NBQy9FLEtBQUssQ0FBQyxhQUFhLENBQUMsVUFBVSxDQUFDO2dDQUUvQixtQ0FBbUM7Z0NBQ25DLE1BQU0sV0FBVyxHQUFHLElBQUksS0FBSyxDQUFDLFFBQVEsRUFBRSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsVUFBVSxFQUFFLElBQUksRUFBRSxDQUFDO2dDQUM1RSxNQUFNLENBQUMsY0FBYyxDQUFDLFdBQVcsRUFBRSxRQUFRLEVBQUUsRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLFVBQVUsRUFBRSxJQUFJLEVBQUUsQ0FBQztnQ0FDaEYsS0FBSyxDQUFDLGFBQWEsQ0FBQyxXQUFXLENBQUM7Z0NBRWhDLHNFQUFzRTtnQ0FDdEUsTUFBTSxzQkFBc0IsR0FBRyxZQUFNLENBQUMsd0JBQXdCLENBQUMsTUFBTSxDQUFDLGdCQUFnQixDQUFDLFNBQVMsRUFBRSxPQUFPLENBQUMsMENBQUUsR0FBRztnQ0FDL0csSUFBSSxzQkFBc0IsRUFBRSxDQUFDO29DQUMzQixzQkFBc0IsQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLGlCQUFpQixDQUFDO29DQUNyRCxNQUFNLFVBQVUsR0FBRyxJQUFJLEtBQUssQ0FBQyxPQUFPLEVBQUUsRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLENBQUM7b0NBQ3hELEtBQUssQ0FBQyxhQUFhLENBQUMsVUFBVSxDQUFDO2dDQUNqQyxDQUFDO2dDQUVELGtEQUFrRDtnQ0FDbEQsS0FBSyxDQUFDLElBQUksRUFBRTs0QkFDZCxDQUFDO3dCQUNILENBQUMsQ0FBQzt3QkFFRiw4RkFBOEY7d0JBQzlGLFVBQVUsQ0FBQyxHQUFHLEVBQUU7OzRCQUNkLElBQUksY0FBYyxDQUFDLE9BQU8sSUFBSSxDQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUMsUUFBUSxJQUFJLGVBQWUsRUFBRSxDQUFDO2dDQUNsRiwwRUFBMEU7Z0NBQzFFLGlHQUFpRztnQ0FDakcsTUFBTSxXQUFXLEdBQUcsZUFBUSxDQUFDLGFBQWEsQ0FBQyxtQkFBbUIsUUFBUSxJQUFJLENBQUMsMENBQUUsYUFBYSxDQUFDLGFBQWEsQ0FBQztvQ0FDdEYsUUFBUSxDQUFDLGFBQWEsQ0FBQyxhQUFhLENBQUM7Z0NBRXhELElBQUksV0FBVyxJQUFJLGlCQUFpQixFQUFFLENBQUM7b0NBQ3JDLE1BQU0sVUFBVSxHQUFHLFdBQVcsQ0FBQyxnQkFBZ0IsQ0FBQyxvQkFBb0IsQ0FBQztvQ0FDckUsSUFBSSxhQUFhLEdBQUcsS0FBSztvQ0FFekIsVUFBVSxDQUFDLE9BQU8sQ0FBQyxDQUFDLEtBQXVCLEVBQUUsRUFBRTt3Q0FDN0MsSUFBSSxLQUFLLENBQUMsS0FBSyxLQUFLLGlCQUFpQixFQUFFLENBQUM7NENBQ3RDLGFBQWEsR0FBRyxJQUFJO3dDQUN0QixDQUFDO29DQUNILENBQUMsQ0FBQztvQ0FFRixJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7d0NBQ25CLFdBQVcsQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFOzRDQUN0QixLQUFLLEVBQUUsOEJBQThCOzRDQUNyQyxhQUFhLEVBQUUsaUJBQWlCOzRDQUNoQyxnQkFBZ0I7NENBQ2hCLE1BQU0sRUFBRSx3QkFBd0I7NENBQ2hDLElBQUksRUFBRSx5REFBeUQ7eUNBQ2hFLENBQUM7d0NBQ0YsbURBQW1EO3dDQUNuRCxVQUFVLENBQUMsR0FBRyxFQUFFOzRDQUNkLCtEQUErRDs0Q0FDL0QsZ0NBQWdDOzRDQUNoQyxJQUFJLGNBQWMsQ0FBQyxPQUFPLElBQUksQ0FBQyxjQUFjLENBQUMsT0FBTyxDQUFDLFFBQVEsSUFBSSxlQUFlLEVBQUUsQ0FBQztnREFDbEYsZ0VBQWdFO2dEQUNoRSxnQkFBZ0IsQ0FBQyxPQUFPLEdBQUcsSUFBSTtnREFFL0IsMkRBQTJEO2dEQUMzRCxJQUFJLG1CQUFtQixJQUFJLGdCQUFnQixFQUFFLENBQUM7b0RBQzVDLG1CQUFtQixDQUFDLGdCQUFnQixDQUFDO2dEQUN2QyxDQUFDO2dEQUVELDRCQUE0QjtnREFDNUIsY0FBYyxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUU7NENBQ2hDLENBQUM7d0NBQ0gsQ0FBQyxFQUFFLEdBQUcsQ0FBQzt3Q0FDUCxPQUFNLENBQUMseUJBQXlCO29DQUNsQyxDQUFDO2dDQUNILENBQUM7Z0NBRUQsdURBQXVEO2dDQUN2RCxXQUFXLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBRTtvQ0FDdEIsS0FBSyxFQUFFLHNCQUFzQjtvQ0FDN0IsYUFBYSxFQUFFLGlCQUFpQjtvQ0FDaEMsZ0JBQWdCO29DQUNoQixJQUFJLEVBQUUsdURBQXVEO2lDQUM5RCxDQUFDO2dDQUVGLGdFQUFnRTtnQ0FDaEUsZ0JBQWdCLENBQUMsT0FBTyxHQUFHLElBQUk7Z0NBRS9CLG1GQUFtRjtnQ0FDbkYsSUFBSSxtQkFBbUIsSUFBSSxnQkFBZ0IsRUFBRSxDQUFDO29DQUM1QyxtQkFBbUIsQ0FBQyxnQkFBZ0IsQ0FBQztnQ0FDdkMsQ0FBQztnQ0FFRCwwRUFBMEU7Z0NBQzFFLGNBQWMsQ0FBQyxPQUFPLENBQUMsS0FBSyxFQUFFOzRCQUNoQyxDQUFDO3dCQUNILENBQUMsRUFBRSxHQUFHLENBQUMsRUFBQyxtREFBbUQ7b0JBQzdELENBQUM7Z0JBQ0gsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxFQUFDLHFEQUFxRDtnQkFFN0QsT0FBTyxHQUFHLEVBQUUsQ0FBQyxZQUFZLENBQUMsU0FBUyxDQUFDO1lBQ3RDLENBQUM7UUFDSCxDQUFDO1FBRUQsaUVBQWlFO1FBQ2pFLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQztZQUNoQixnQkFBZ0IsQ0FBQyxPQUFPLEdBQUcsQ0FBQztZQUM1Qiw0QkFBNEIsQ0FBQyxJQUFJLENBQUM7UUFDcEMsQ0FBQzthQUFNLENBQUM7WUFDTixnQkFBZ0IsQ0FBQyxPQUFPLEdBQUcsc0dBQWdDLENBQUMsVUFBVSxDQUFDO1lBQ3ZFLDhHQUE4RztZQUM5RyxJQUFJLGtCQUFrQixDQUFDLE9BQU8sS0FBSyxRQUFRLElBQUksQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO2dCQUNsRSw0QkFBNEIsQ0FBQyxVQUFVLENBQUM7WUFDMUMsQ0FBQztRQUNILENBQUM7SUFDSCxDQUFDLEVBQUUsQ0FBQyxVQUFVLEVBQUUsaUJBQWlCLEVBQUUsZUFBZSxFQUFFLFFBQVEsRUFBRSxRQUFRLEVBQUUsbUJBQW1CLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQztJQUUvRyxNQUFNLFVBQVUsR0FBRyw0Q0FBSyxDQUFDLFdBQVcsQ0FBQyxHQUFHLEVBQUU7O1FBQ3hDLGtHQUFrRztRQUNsRyw4RUFBMkIsQ0FBQyxRQUFRLENBQUM7UUFFckMsSUFBSSxRQUFRLEVBQUUsQ0FBQztZQUNiLE1BQU0sUUFBUSxHQUEyQixRQUFRLENBQUMsb0JBQW9CLEVBQUUsQ0FBQyxDQUFDLENBQTJCO1lBQ3JHLElBQUksUUFBUSxFQUFFLENBQUM7Z0JBQ2IsTUFBTSxjQUFjLEdBQUcsUUFBUSxDQUFDLGlCQUFpQixFQUFFO2dCQUNuRCxNQUFNLE9BQU8sR0FBRyxjQUFjLGFBQWQsY0FBYyx1QkFBZCxjQUFjLENBQUUsT0FBTztnQkFDdkMsSUFBSSxPQUFPLElBQUksSUFBSSxJQUFJLE9BQU8sR0FBRyxDQUFDLEVBQUUsQ0FBQztvQkFDbkMsd0RBQWlCLENBQUMsV0FBVyxFQUFFLENBQUMsZ0NBQWdDLENBQzlELFFBQVEsRUFDUixRQUFRLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxPQUFPLEVBQUUsU0FBUyxDQUFDLEVBQUUsT0FBTyxDQUFDLENBQ2xFO2dCQUNILENBQUM7WUFDSCxDQUFDO1FBQ0gsQ0FBQztRQUVELDBFQUEwRTtRQUMxRSxNQUFNLFNBQVMsR0FBRyxnQkFBZ0IsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMscUJBQXFCO1FBRXpFLHdDQUF3QztRQUN4QyxNQUFNLG1CQUFtQixHQUFHLG1FQUFxQixDQUFDLHlCQUF5QixDQUFDO1FBRTVFLElBQUksR0FBRyxHQUFHLGtCQUFrQixDQUFDLE9BQU87UUFDcEMsSUFBSSwwQkFBbUIsQ0FBQyxPQUFPLDBDQUFFLFFBQVEsS0FBSSxHQUFHLElBQUksSUFBSSxFQUFFLENBQUM7WUFDekQsR0FBRyxHQUFHLG9EQUFlLENBQUMsU0FBUztRQUNqQyxDQUFDO1FBQ0QsSUFBSSxLQUFLLENBQUMsT0FBTyxDQUFDLHlCQUFtQixDQUFDLE9BQU8sMENBQUUsUUFBUSxDQUFDLEVBQUUsQ0FBQztZQUN6RCxJQUFJLG1CQUFtQixDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsTUFBTSxLQUFLLENBQUMsRUFBRSxDQUFDO2dCQUN0RCxZQUFZLENBQUMsbUJBQW1CLGtDQUFPLG1CQUFtQixDQUFDLE9BQU8sS0FBRSxRQUFRLEVBQUUsbUJBQW1CLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsRUFBRSxRQUFRLEVBQUUsR0FBRyxFQUFFLE1BQU0sRUFBRSxTQUFTLENBQUMsT0FBTyxLQUFJLFNBQVMsQ0FBQztZQUMvSyxDQUFDO2lCQUFNLENBQUM7Z0JBQ04sbUVBQXNCLENBQUM7b0JBQ3JCLHVDQUF1QztpQkFDeEMsQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsRUFBRTtvQkFDaEIsTUFBTSxRQUFRLEdBQWtDLE9BQU8sQ0FBQyxDQUFDLENBQUM7b0JBQzFELE1BQU0sUUFBUSxHQUFHLFFBQVEsQ0FBQyxXQUFXLENBQUMsbUJBQW1CLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQztvQkFDM0UsWUFBWSxDQUFDLG1CQUFtQixrQ0FBTyxtQkFBbUIsQ0FBQyxPQUFPLEtBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxHQUFHLEVBQUUsTUFBTSxFQUFFLFNBQVMsQ0FBQyxPQUFPLEtBQUksU0FBUyxDQUFDO2dCQUN0SSxDQUFDLENBQUM7WUFDSixDQUFDO1FBQ0gsQ0FBQzthQUFNLENBQUM7WUFDTixZQUFZLENBQUMsbUJBQW1CLGtDQUFPLG1CQUFtQixDQUFDLE9BQU8sS0FBRSxRQUFRLEVBQUUsR0FBRyxFQUFFLE1BQU0sRUFBRSxTQUFTLENBQUMsT0FBTyxLQUFJLFNBQVMsQ0FBQztRQUM1SCxDQUFDO1FBRUQsbUNBQW1DO1FBQ25DLGdCQUFnQixDQUFDLE9BQU8sR0FBRyxLQUFLO0lBQ2xDLENBQUMsRUFBRSxDQUFDLFlBQVksRUFBRSxRQUFRLEVBQUUseUJBQXlCLEVBQUUscUJBQXFCLENBQUMsQ0FBQztJQUU5RSxNQUFNLGFBQWEsR0FBRyw0Q0FBSyxDQUFDLFdBQVcsQ0FBQyxDQUFDLEtBQTBCLEVBQUUsRUFBRTtRQUNyRSxJQUFJLEtBQUssQ0FBQyxHQUFHLEtBQUssT0FBTyxJQUFJLGVBQWUsSUFBSSxZQUFZLEVBQUUsQ0FBQztZQUM3RCxLQUFLLENBQUMsY0FBYyxFQUFFO1lBRXRCLDhCQUE4QjtZQUM5QixNQUFNLGFBQWEsR0FBRyxRQUFRLENBQUMsYUFBaUM7WUFDaEUsSUFBSSxhQUFhLElBQUksYUFBYSxDQUFDLE9BQU8sS0FBSyxPQUFPLElBQUksYUFBYSxDQUFDLElBQUksS0FBSyxNQUFNLEVBQUUsQ0FBQztnQkFDeEYsZ0VBQWdFO2dCQUNoRSxhQUFhLENBQUMsSUFBSSxFQUFFO2dCQUVwQix3REFBd0Q7Z0JBQ3hELHFFQUFxRTtnQkFDckUsVUFBVSxDQUFDLEdBQUcsRUFBRTtvQkFDZCxJQUFJLGNBQWMsQ0FBQyxPQUFPLElBQUksQ0FBQyxjQUFjLENBQUMsT0FBTyxDQUFDLFFBQVEsRUFBRSxDQUFDO3dCQUMvRCxjQUFjLENBQUMsT0FBTyxDQUFDLEtBQUssRUFBRTtvQkFDaEMsQ0FBQzt5QkFBTSxDQUFDO3dCQUNOLFVBQVUsRUFBRTtvQkFDZCxDQUFDO2dCQUNILENBQUMsRUFBRSxHQUFHLENBQUM7WUFDVCxDQUFDO2lCQUFNLENBQUM7Z0JBQ04sbURBQW1EO2dCQUNuRCxJQUFJLGNBQWMsQ0FBQyxPQUFPLElBQUksQ0FBQyxjQUFjLENBQUMsT0FBTyxDQUFDLFFBQVEsRUFBRSxDQUFDO29CQUMvRCxjQUFjLENBQUMsT0FBTyxDQUFDLEtBQUssRUFBRTtnQkFDaEMsQ0FBQztxQkFBTSxDQUFDO29CQUNOLFVBQVUsRUFBRTtnQkFDZCxDQUFDO1lBQ0gsQ0FBQztRQUNILENBQUM7SUFDSCxDQUFDLEVBQUUsQ0FBQyxlQUFlLEVBQUUsVUFBVSxFQUFFLFlBQVksQ0FBQyxDQUFDO0lBRS9DLDRDQUFLLENBQUMsU0FBUyxDQUFDLEdBQUcsRUFBRTtRQUNuQixJQUFJLENBQUMsZ0JBQWdCO1lBQUUsT0FBTTtRQUM3QixJQUFJLGdCQUFnQixDQUFDLEtBQUssTUFBSyxtQkFBbUIsYUFBbkIsbUJBQW1CLHVCQUFuQixtQkFBbUIsQ0FBRSxLQUFLLEdBQUUsQ0FBQztZQUMxRCxVQUFVLEVBQUU7UUFDZCxDQUFDO0lBQ0gsQ0FBQyxFQUFFLENBQUMsZ0JBQWdCLEVBQUUsbUJBQW1CLGFBQW5CLG1CQUFtQix1QkFBbkIsbUJBQW1CLENBQUUsS0FBSyxFQUFFLFVBQVUsQ0FBQyxDQUFDO0lBRTlELE1BQU0sVUFBVSxHQUFHLDRDQUFLLENBQUMsV0FBVyxDQUFDLEdBQUcsRUFBRTtRQUN4Qyw0QkFBNEI7UUFDNUIsZ0JBQWdCLENBQUMsT0FBTyxHQUFHLHNHQUFnQyxDQUFDLFVBQVUsQ0FBQztRQUN2RSw0QkFBNEIsQ0FBQyxVQUFVLENBQUM7UUFDeEMsMEJBQTBCO1FBQzFCLGNBQWMsQ0FBQyxNQUFNLEVBQUUsQ0FBQztJQUMxQixDQUFDLEVBQUUsQ0FBQyxVQUFVLENBQUMsQ0FBQztJQUVoQixNQUFNLHNCQUFzQixHQUFHLDRDQUFLLENBQUMsV0FBVyxDQUFDLENBQUMsTUFBdUIsRUFBRSxFQUFFOztRQUMzRSxXQUFXLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBRTtZQUN0QixLQUFLLEVBQUUsd0JBQXdCO1lBQy9CLFFBQVE7WUFDUixVQUFVLEVBQUUsYUFBTSxhQUFOLE1BQU0sdUJBQU4sTUFBTSxDQUFFLEtBQUssMENBQUUsTUFBTSxLQUFJLENBQUM7WUFDdEMsY0FBYyxFQUFFLG1CQUFNLGFBQU4sTUFBTSx1QkFBTixNQUFNLENBQUUsS0FBSywwQ0FBRyxDQUFDLENBQUMsMENBQUUsSUFBSSxNQUFLLFFBQVEsQ0FBQyxDQUFDLENBQUMsTUFBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBUyxDQUFDLFlBQVksMENBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQyxZQUFZO1NBQ3BILENBQUM7UUFDRixnQkFBZ0IsQ0FBQyxPQUFPLEdBQUcsc0dBQWdDLENBQUMsTUFBTSxDQUFDO1FBQ25FLDRCQUE0QixDQUFDLE1BQU0sQ0FBQztJQUN0QyxDQUFDLEVBQUUsQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUVkLE1BQU0seUJBQXlCLEdBQUcsNENBQUssQ0FBQyxXQUFXLENBQUMsQ0FBQyxNQUF3QixFQUFFLEVBQUU7UUFDL0UsbUJBQW1CLENBQUMsT0FBTyxHQUFHLE1BQU07SUFDdEMsQ0FBQyxFQUFFLEVBQUUsQ0FBQztJQUVOLE1BQU0sb0JBQW9CLEdBQUcsNENBQUssQ0FBQyxXQUFXLENBQUMsQ0FBQyxHQUFvQixFQUFFLEVBQUU7UUFDdEUsa0JBQWtCLENBQUMsT0FBTyxHQUFHLEdBQUc7SUFDbEMsQ0FBQyxFQUFFLEVBQUUsQ0FBQztJQUVOLE1BQU0sa0JBQWtCLEdBQUcsNENBQUssQ0FBQyxXQUFXLENBQUMsQ0FBQyxRQUFnQixFQUFFLElBQWMsRUFBRSxFQUFFO1FBQ2hGLFNBQVMsQ0FBQyxPQUFPLEdBQUcsRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFO0lBQ3hDLENBQUMsRUFBRSxFQUFFLENBQUM7SUFFTixNQUFNLG1CQUFtQixHQUFHLGtCQUFrQixJQUFJLFVBQVUsSUFBSSxJQUFJO0lBQ3BFLE1BQU0saUJBQWlCLEdBQUcsb0JBQW9CLElBQUksZ0JBQWdCLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxJQUFJLHlCQUF5QixJQUFJLDhCQUE2QixhQUE3Qiw2QkFBNkIsdUJBQTdCLDZCQUE2QixDQUFFLE1BQU0sSUFBRyxDQUFDLENBQUM7SUFFL0ssbUNBQW1DO0lBQ25DLDRDQUFLLENBQUMsU0FBUyxDQUFDLEdBQUcsRUFBRTs7UUFDbkIsV0FBVyxDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUU7WUFDdEIsS0FBSyxFQUFFLG1CQUFtQjtZQUMxQixRQUFRO1lBQ1IsZUFBZTtZQUNmLGtCQUFrQjtZQUNsQixVQUFVLEVBQUUsVUFBVSxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLE1BQU07WUFDMUMsZUFBZSxFQUFFLGlCQUFVLGFBQVYsVUFBVSx1QkFBVixVQUFVLENBQUUsS0FBSywwQ0FBRSxNQUFNLEtBQUksQ0FBQztZQUMvQyxtQkFBbUI7WUFDbkIsUUFBUSxFQUFFLFFBQVEsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxNQUFNO1lBQ3RDLFVBQVUsRUFBRSxTQUFRLGFBQVIsUUFBUSx1QkFBUixRQUFRLENBQUUsRUFBRSxLQUFJLE1BQU07WUFDbEMsaUJBQWlCO1lBQ2pCLFlBQVk7WUFDWixRQUFRLEVBQUUsUUFBUSxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLE1BQU07U0FDdkMsQ0FBQztJQUNKLENBQUMsRUFBRSxDQUFDLFFBQVEsRUFBRSxlQUFlLEVBQUUsa0JBQWtCLEVBQUUsVUFBVSxFQUFFLG1CQUFtQixFQUFFLFFBQVEsRUFBRSxpQkFBaUIsRUFBRSxZQUFZLEVBQUUsUUFBUSxDQUFDLENBQUM7SUFFekksc0NBQXNDO0lBQ3RDLDRDQUFLLENBQUMsU0FBUyxDQUFDLEdBQUcsRUFBRTs7UUFDbkIsSUFBSSxtQkFBbUIsSUFBSSxRQUFRLEVBQUUsQ0FBQztZQUNwQyxXQUFXLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBRTtnQkFDdEIsS0FBSyxFQUFFLHdCQUF3QjtnQkFDL0IsUUFBUTtnQkFDUixVQUFVLEVBQUUsUUFBUSxDQUFDLEVBQUU7Z0JBQ3ZCLGVBQWUsRUFBRSxpQkFBVSxhQUFWLFVBQVUsdUJBQVYsVUFBVSxDQUFFLEtBQUssMENBQUUsTUFBTSxLQUFJLENBQUM7Z0JBQy9DLG9CQUFvQjtnQkFDcEIsSUFBSSxFQUFFLCtCQUErQjthQUN0QyxDQUFDO1FBQ0osQ0FBQzthQUFNLENBQUM7WUFDTixXQUFXLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBRTtnQkFDdEIsS0FBSyxFQUFFLDRCQUE0QjtnQkFDbkMsUUFBUTtnQkFDUixtQkFBbUI7Z0JBQ25CLFFBQVEsRUFBRSxRQUFRLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsTUFBTTtnQkFDdEMsa0JBQWtCO2dCQUNsQixVQUFVLEVBQUUsVUFBVSxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLE1BQU07Z0JBQzFDLE1BQU0sRUFBRSxDQUFDLG1CQUFtQixDQUFDLENBQUMsQ0FBQyw4QkFBOEIsQ0FBQyxDQUFDLENBQUMsa0JBQWtCO2FBQ25GLENBQUM7UUFDSixDQUFDO0lBQ0gsQ0FBQyxFQUFFLENBQUMsbUJBQW1CLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxVQUFVLEVBQUUsa0JBQWtCLEVBQUUsb0JBQW9CLENBQUMsQ0FBQztJQUVuRyxvQ0FBb0M7SUFDcEMsNENBQUssQ0FBQyxTQUFTLENBQUMsR0FBRyxFQUFFOztRQUNuQixJQUFJLGNBQWMsQ0FBQyxPQUFPLEVBQUUsQ0FBQztZQUMzQixNQUFNLGFBQWEsR0FBRyxNQUFNLENBQUMsZ0JBQWdCLENBQUMsY0FBYyxDQUFDLE9BQU8sQ0FBQztZQUNyRSxNQUFNLElBQUksR0FBRyxjQUFjLENBQUMsT0FBTyxDQUFDLHFCQUFxQixFQUFFO1lBQzNELFdBQVcsQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFO2dCQUN0QixLQUFLLEVBQUUsd0JBQXdCO2dCQUMvQixRQUFRO2dCQUNSLE1BQU0sRUFBRSxDQUFDLENBQUMsY0FBYyxDQUFDLE9BQU87Z0JBQ2hDLE9BQU8sRUFBRSxhQUFhLENBQUMsT0FBTztnQkFDOUIsVUFBVSxFQUFFLGFBQWEsQ0FBQyxVQUFVO2dCQUNwQyxPQUFPLEVBQUUsYUFBYSxDQUFDLE9BQU87Z0JBQzlCLE1BQU0sRUFBRSxhQUFhLENBQUMsTUFBTTtnQkFDNUIsU0FBUyxFQUFFLGFBQWEsQ0FBQyxTQUFTO2dCQUNsQyxJQUFJLEVBQUUsYUFBYSxDQUFDLElBQUk7Z0JBQ3hCLFNBQVMsRUFBRSxhQUFhLENBQUMsU0FBUztnQkFDbEMsVUFBVSxFQUFFLElBQUksQ0FBQyxNQUFNO2dCQUN2QixTQUFTLEVBQUUsSUFBSSxDQUFDLEtBQUs7Z0JBQ3JCLFNBQVMsRUFBRSxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsSUFBSSxJQUFJLENBQUMsS0FBSyxHQUFHLENBQUM7Z0JBQzVDLFlBQVksRUFBRSxxQkFBYyxDQUFDLE9BQU8sQ0FBQyxhQUFhLDBDQUFFLFlBQVksS0FBSSxDQUFDO2FBQ3RFLENBQUM7UUFDSixDQUFDO0lBQ0gsQ0FBQyxFQUFFLENBQUMsUUFBUSxFQUFFLG1CQUFtQixFQUFFLFFBQVEsQ0FBQyxDQUFDO0lBRTdDLE9BQU8sQ0FDTCxnRUFBQyxrRUFBZ0IsQ0FBQyxRQUFRLElBQUMsS0FBSyxFQUFFLEVBQUUsV0FBVyxFQUFFLFlBQy9DLDBFQUFLLFNBQVMsRUFBQyxZQUFZLEVBQUMsR0FBRyxFQUFFLFlBQVksQ0FBQyxZQUFZLENBQUMsYUFDekQsMEVBQUssR0FBRyxFQUFFLGNBQWMsRUFBRSxTQUFTLEVBQUMscUJBQXFCLEVBQUMsU0FBUyxFQUFFLGFBQWEsYUFDL0UsbUJBQW1CLElBQUksQ0FDdEIsMEVBQ0UsSUFBSSxFQUFDLE9BQU8sRUFDWixTQUFTLEVBQUMsTUFBTSxFQUNoQixHQUFHLEVBQUUsOENBQUcsb0JBQW1CLGdCQUNmLG9CQUFvQixhQUVoQywwRUFBSyxTQUFTLEVBQUUscURBQVUsQ0FBQyxzQ0FBc0MsRUFBRSxFQUFFLFFBQVEsRUFBRSxDQUFDLG9CQUFvQixJQUFJLENBQUMsbUJBQW1CLEVBQUUsQ0FBQyxFQUFFLEdBQUcsRUFBRSw4Q0FBRzs7O2VBR3hJLGFBQ0Usb0JBQW9CLElBQUkseUVBQUssU0FBUyxFQUFDLGFBQWEsWUFBRSxvQkFBb0IsR0FBTyxFQUNqRixtQkFBbUIsSUFBSSxDQUN0QixnRUFBQyw0Q0FBTyxJQUFDLFNBQVMsRUFBQyxRQUFRLEVBQUMsR0FBRyxFQUFFLDhDQUFHLHlCQUF3QixFQUFFLEtBQUssRUFBRSxtQkFBbUIsWUFDdEYsZ0VBQUMsMkNBQU0sSUFBQyxJQUFJLEVBQUMsSUFBSSxFQUFDLElBQUksUUFBQyxJQUFJLEVBQUMsVUFBVSxZQUFDLGdFQUFDLDZFQUFZLElBQUMsS0FBSyxFQUFDLCtCQUErQixFQUFDLElBQUksRUFBQyxHQUFHLEdBQUUsR0FBUyxHQUN0RyxDQUNYLElBQ0csRUFDTCxRQUFRLElBQUksQ0FDWCx5RUFBSyxHQUFHLEVBQUUsOENBQUcscUJBQW9CLFlBQy9CLGdFQUFDLHNGQUFvQixJQUVuQixRQUFRLEVBQUUsUUFBUSxFQUNsQixVQUFVLEVBQUUsUUFBUSxFQUNwQixVQUFVLEVBQUUseUJBQXlCLEVBQ3JDLFFBQVEsRUFBRSxzQkFBc0IsSUFKM0IsR0FBRyxRQUFRLElBQUksaUJBQWlCLElBQUksTUFBTSxFQUFFLENBS2pELEdBQ0UsQ0FDUCxJQUNHLENBQ1AsRUFDQSxtQkFBbUIsSUFBSSxpQkFBaUIsSUFBSSxDQUMzQyx3RUFBSSxTQUFTLEVBQUMsS0FBSyxFQUFDLEdBQUcsRUFBRSw4Q0FBRyxtRkFBa0YsR0FBRyxDQUNsSCxFQUNBLGlCQUFpQixJQUFJLENBQ3BCLGdFQUFDLDBFQUFvQixJQUNuQixRQUFRLEVBQUUsUUFBUSxFQUNsQixLQUFLLEVBQUUsa0JBQWtCLEVBQ3pCLElBQUksRUFBRSxpQkFBaUIsRUFDdkIsV0FBVyxFQUFFLGtCQUFrQixFQUMvQixZQUFZLEVBQUUsbUJBQW1CLEVBQ2pDLGVBQWUsRUFBRSxpQ0FBaUMsRUFDbEQsY0FBYyxFQUFFLHlCQUF5QixFQUN6QyxnQkFBZ0IsRUFBRSxvQkFBb0IsRUFDdEMsY0FBYyxFQUFFLGtCQUFrQixFQUNsQyxnQkFBZ0IsRUFBRSxnQkFBZ0IsRUFDbEMsY0FBYyxFQUFFLDJCQUEyQixFQUMzQyxnQkFBZ0IsRUFBRSw2QkFBNkIsRUFDL0MsWUFBWSxFQUFFLHlCQUF5QixFQUN2QyxnQkFBZ0IsRUFBRSw4QkFBOEIsRUFDaEQsa0JBQWtCLEVBQUUsZ0NBQWdDLEVBQ3BELGNBQWMsRUFBRSw0QkFBNEIsRUFDNUMsY0FBYyxFQUFFLDZCQUE2QixFQUM3QyxjQUFjLEVBQUUseUJBQXlCLEdBQ3pDLENBQ0gsSUFDRyxFQUNOLDBFQUFLLFNBQVMsRUFBQyxvREFBb0QsYUFDakUsZ0VBQUMsNkNBQVEsSUFDUCxPQUFPLEVBQUUscUJBQXFCLEVBQzlCLFFBQVEsRUFBRSxDQUFDLENBQUMsRUFBRSxPQUFPLEVBQUUsRUFBRSxDQUFDLHdCQUF3QixDQUFDLE9BQU8sQ0FBQyxFQUMzRCxTQUFTLEVBQUMsTUFBTSxHQUNoQixFQUNGLDBFQUFNLFNBQVMsRUFBQyxTQUFTLEVBQUMsR0FBRyxFQUFFLDhDQUFHLDZEQUE0RCxZQUMzRixjQUFjLENBQUMsZ0JBQWdCLENBQUMsR0FDNUIsRUFDUCxnRUFBQywyQ0FBTSxJQUFDLEdBQUcsRUFBRSxjQUFjLEVBQUUsS0FBSyxFQUFDLFNBQVMsRUFBQyxTQUFTLEVBQUMsU0FBUyxFQUFDLFFBQVEsRUFBRSxDQUFDLGVBQWUsSUFBSSxDQUFDLFlBQVksRUFBRSxPQUFPLEVBQUUsVUFBVSxZQUM5SCxjQUFjLENBQUMsT0FBTyxDQUFDLEdBQ2pCLEVBQ1IsQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEdBQUcsQ0FBQyxJQUFJLGlCQUFpQixDQUFDLElBQUksQ0FDdEQsZ0VBQUMsMkNBQU0sSUFBQyxTQUFTLEVBQUMsTUFBTSxFQUFDLE9BQU8sRUFBRSxVQUFVLFlBQUcsY0FBYyxDQUFDLE9BQU8sQ0FBQyxHQUFVLENBQ2pGLElBQ0csSUFDRixHQUNvQixDQUM3QjtBQUNILENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDcHJCRCxlQUFlO0FBQzREO0FBQzdDO0FBTzlCLE1BQU0sU0FBUyxHQUFHLDhDQUFHOzs7Q0FHcEI7QUFFTSxTQUFTLGNBQWMsQ0FBRSxLQUFtQjtJQUNqRCxNQUFNLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxHQUFHLEtBQUs7SUFFNUIsT0FBTyxDQUNMLDBFQUFLLFNBQVMsRUFBQyx5Q0FBeUMsRUFBQyxHQUFHLEVBQUUsU0FBUyxhQUNwRSxJQUFJLElBQUksZ0VBQUMseUNBQUksSUFBQyxTQUFTLEVBQUMsc0JBQXNCLEVBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxHQUFHLEdBQUksRUFDbEUseUVBQUssU0FBUyxFQUFDLGVBQWUsRUFBQyxLQUFLLEVBQUUsSUFBSSxZQUN2QyxJQUFJLEdBQ0QsSUFDRixDQUNQO0FBQ0gsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDekJELGVBQWU7QUFDNEU7QUFHbkQ7QUFDUztBQUN1QjtBQUNmO0FBQ0M7QUFFMUQsTUFBTSxFQUFFLE9BQU8sRUFBRSxHQUFHLHVFQUF1QixFQUFFO0FBYzdDLE1BQU0sS0FBSyxHQUFHLENBQUM7QUFFZixNQUFNLEtBQUssR0FBRyw4Q0FBRzs7OztDQUloQjtBQUVELG1EQUFtRDtBQUM1QyxTQUFTLGNBQWMsQ0FBRSxLQUF5QjtJQUN2RCxNQUFNLEVBQUUsVUFBVSxFQUFFLFFBQVEsRUFBRSxPQUFPLEVBQUUsV0FBVyxFQUFFLGVBQWUsRUFBRSxXQUFXLEVBQUUsSUFBSSxHQUFHLEtBQUssRUFBRSxHQUFHLEtBQUs7SUFDeEcsTUFBTSxZQUFZLEdBQUcsNENBQUssQ0FBQyxNQUFNLENBQWlCLFNBQVMsQ0FBQztJQUM1RCxNQUFNLGlCQUFpQixHQUFHLDRDQUFLLENBQUMsTUFBTSxDQUFTLENBQUMsQ0FBQztJQUNqRCxNQUFNLGVBQWUsR0FBRyw0Q0FBSyxDQUFDLE1BQU0sQ0FBNEIsRUFBRSxDQUFDO0lBQ25FLE1BQU0sQ0FBQyxhQUFhLEVBQUUsZ0JBQWdCLENBQUMsR0FBRyw0Q0FBSyxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDO0lBQzNFLE1BQU0sQ0FBQyxZQUFZLEVBQUUsZUFBZSxDQUFDLEdBQUcsNENBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDMUQsTUFBTSxpQkFBaUIsR0FBRyw0Q0FBSyxDQUFDLE1BQU0sQ0FBaUIsSUFBSSxDQUFDO0lBRTVELE1BQU0sYUFBYSxHQUFHLDRDQUFLLENBQUMsV0FBVyxDQUFDLEdBQUcsRUFBRTtRQUMzQyxJQUFJLEtBQUssR0FBRyxDQUFDO1FBQ2IsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLGFBQWEsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDO1lBQ3ZDLE1BQU0sSUFBSSxHQUFHLFVBQVUsQ0FBQyxDQUFDLENBQUM7WUFDMUIsTUFBTSxTQUFTLEdBQUcsZUFBZSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDO1lBQ3hELElBQUksU0FBUyxHQUFHLENBQUMsRUFBRSxDQUFDO2dCQUNsQixLQUFLLElBQUksU0FBUyxHQUFHLEtBQUs7Z0JBQzFCLElBQUksS0FBSyxJQUFJLGlCQUFpQixDQUFDLE9BQU8sSUFBSSxhQUFhLEtBQUssQ0FBQyxFQUFFLENBQUM7b0JBQzlELGdCQUFnQixDQUFDLENBQUMsQ0FBQztvQkFDbkIsT0FBTTtnQkFDUixDQUFDO1lBQ0gsQ0FBQztpQkFBTSxDQUFDO2dCQUNOLE9BQU0sQ0FBQywwQkFBMEI7WUFDbkMsQ0FBQztRQUNILENBQUM7UUFDRCxnQkFBZ0IsQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDO0lBQ3JDLENBQUMsRUFBRSxDQUFDLGFBQWEsRUFBRSxVQUFVLENBQUMsQ0FBQztJQUUvQiw0Q0FBSyxDQUFDLFNBQVMsQ0FBQyxHQUFHLEVBQUU7UUFDbkIsSUFBSSxpQkFBaUIsQ0FBQyxPQUFPLEVBQUUsQ0FBQztZQUM5QixpQkFBaUIsQ0FBQyxPQUFPLENBQUMsVUFBVSxFQUFFO1FBQ3hDLENBQUM7UUFDRCxrQ0FBa0M7UUFDbEMsaUJBQWlCLENBQUMsT0FBTyxHQUFHLElBQUksY0FBYyxDQUFDLDZDQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsT0FBTyxFQUFFLEVBQUU7WUFDekUsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQztZQUN0RCxJQUFJLGlCQUFpQixDQUFDLE9BQU8sS0FBSyxLQUFLLEVBQUUsQ0FBQztnQkFDeEMsaUJBQWlCLENBQUMsT0FBTyxHQUFHLEtBQUs7Z0JBQ2pDLGFBQWEsRUFBRTtZQUNqQixDQUFDO1FBQ0gsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQ1IsaUJBQWlCLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsT0FBTyxDQUFDO1FBRXZELE9BQU8sR0FBRyxFQUFFO1lBQ1YsaUJBQWlCLENBQUMsT0FBTyxDQUFDLFVBQVUsRUFBRTtRQUN4QyxDQUFDO0lBQ0gsQ0FBQyxFQUFFLENBQUMsYUFBYSxDQUFDLENBQUM7SUFFbkIsNENBQUssQ0FBQyxhQUFhLENBQUMsR0FBRyxFQUFFOztRQUN2QixpQkFBaUIsQ0FBQyxPQUFPLEdBQUcsa0JBQVksQ0FBQyxPQUFPLDBDQUFFLFdBQVc7UUFDN0QsYUFBYSxFQUFFO0lBQ2pCLENBQUMsQ0FBQztJQUVGLE1BQU0scUJBQXFCLEdBQUcsNENBQUssQ0FBQyxXQUFXLENBQUMsQ0FBQyxLQUFhLEVBQUUsS0FBYSxFQUFFLEVBQUU7UUFDL0UsTUFBTSxTQUFTLEdBQUcsVUFBVSxDQUFDLEtBQUssQ0FBQztRQUNuQyxJQUFJLGVBQWUsQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxLQUFLLEtBQUssRUFBRSxDQUFDO1lBQzFELGVBQWUsQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxHQUFHLEtBQUs7WUFDbkQsYUFBYSxFQUFFO1FBQ2pCLENBQUM7SUFDSCxDQUFDLEVBQUUsQ0FBQyxVQUFVLEVBQUUsYUFBYSxDQUFDLENBQUM7SUFFL0IsTUFBTSx3QkFBd0IsR0FBRyw0Q0FBSyxDQUFDLFdBQVcsQ0FBQyxDQUFDLEtBQWEsRUFBRSxNQUFlLEVBQUUsRUFBRTtRQUNwRixJQUFJLE1BQU0sRUFBRSxDQUFDO1lBQ1gsZUFBZSxDQUFDLEtBQUssQ0FBQztRQUN4QixDQUFDO2FBQU0sSUFBSSxLQUFLLEtBQUssWUFBWSxFQUFFLENBQUM7WUFDbEMsMkJBQTJCO1lBQzNCLGVBQWUsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNyQixDQUFDO0lBQ0gsQ0FBQyxFQUFFLENBQUMsWUFBWSxDQUFDLENBQUM7SUFFbEIsTUFBTSxDQUFDLGFBQWEsRUFBRSxnQkFBZ0IsQ0FBQyxHQUFHLDRDQUFLLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRTtRQUMzRCxNQUFNLGFBQWEsR0FBRyxFQUFFO1FBQ3hCLE1BQU0sZ0JBQWdCLEdBQUcsRUFBRTtRQUMzQixLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsVUFBVSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDO1lBQzNDLElBQUksQ0FBQyxHQUFHLGFBQWEsRUFBRSxDQUFDO2dCQUN0QixhQUFhLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNuQyxDQUFDO2lCQUFNLENBQUM7Z0JBQ04sZ0JBQWdCLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUN0QyxDQUFDO1FBQ0gsQ0FBQztRQUNELE9BQU8sQ0FBQyxhQUFhLEVBQUUsZ0JBQWdCLENBQUM7SUFDMUMsQ0FBQyxFQUFFLENBQUMsVUFBVSxFQUFFLGFBQWEsQ0FBQyxDQUFDO0lBRS9CLE9BQU8sQ0FDTCwwRUFBSyxHQUFHLEVBQUUsWUFBWSxFQUFFLEdBQUcsRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFLHFEQUFVLENBQUMsd0NBQXdDLEVBQUUsRUFBRSxXQUFXLEVBQUUsSUFBSSxFQUFFLHFCQUFxQixFQUFFLElBQUksRUFBRSxDQUFDLGFBQ3BKLGFBQWEsQ0FBQyxHQUFHLENBQUMsQ0FBQyxTQUFTLEVBQUUsS0FBSyxFQUFFLEVBQUU7O2dCQUN0QyxNQUFNLFdBQVcsR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxtRUFBa0IsRUFBRSxTQUFTLENBQUM7Z0JBQ3BFLE9BQU8sZ0VBQUMsa0ZBQXFCLElBQzNCLEVBQUUsRUFBRSxLQUFLLEVBRVQsSUFBSSxFQUFFLFdBQVcsQ0FBQyxJQUFJLEVBQ3RCLFVBQVUsRUFBQyxTQUFTLEVBQ3BCLEtBQUssRUFBRSxXQUFXLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxTQUFTLEVBQzlELFdBQVcsRUFBRSxXQUFXLENBQUMsSUFBSSxFQUM3QixhQUFhLEVBQUUscUJBQXFCLEVBQ3BDLE9BQU8sRUFBRSxPQUFPLEVBQ2hCLFdBQVcsRUFBRSxXQUFXLEVBQ3hCLGNBQWMsRUFBRSx3QkFBd0IsRUFDeEMsVUFBVSxFQUFFLFlBQVksSUFBSSxDQUFDLElBQUksWUFBWSxLQUFLLEtBQUssWUFFdkQsZ0VBQUMsa0RBQVMsSUFDUixRQUFRLEVBQUUsUUFBUSxFQUNsQixLQUFLLEVBQUUsS0FBSyxFQUNaLEtBQUssRUFBRSxDQUFDLEVBQ1IsVUFBVSxRQUNWLFNBQVMsRUFBRSxXQUFXLEVBQ3RCLGVBQWUsRUFBRSxJQUFJLEVBQ3JCLFNBQVMsRUFBQyxNQUFNLEVBQ2hCLGVBQWUsRUFBRSxlQUFlLEVBQ2hDLGlCQUFpQixFQUFFLFdBQVcsQ0FBQyxPQUFPLE1BQUssV0FBSyxDQUFDLGlCQUFpQiwwQ0FBRSxPQUFPLEVBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxpQkFBaUIsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLFNBQVMsRUFDdkgsbUJBQW1CLEVBQUUsS0FBSyxDQUFDLG1CQUFtQixFQUM5QyxnQkFBZ0IsRUFBRSxXQUFXLENBQUMsT0FBTyxHQUNyQyxJQXZCRyxXQUFXLENBQUMsUUFBUSxDQXdCSDtZQUMxQixDQUFDLENBQUMsRUFFRCxnQkFBZ0IsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxJQUFJLENBQzlCLGdFQUFDLGtGQUFxQixJQUNwQixFQUFFLEVBQUUsYUFBYSxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQzVCLElBQUksRUFBRSxPQUFPLENBQUMsUUFBUSxFQUN0QixPQUFPLEVBQUUsT0FBTyxFQUNoQixVQUFVLEVBQUMsU0FBUyxFQUNwQixXQUFXLEVBQUUsV0FBVyxFQUN4QixXQUFXLEVBQUUsV0FBVyxFQUN4QixjQUFjLEVBQUUsd0JBQXdCLEVBQ3hDLFVBQVUsRUFBRSxZQUFZLElBQUksQ0FBQyxJQUFJLFlBQVksS0FBSyxhQUFhLENBQUMsTUFBTSxHQUFHLENBQUMsWUFFMUUsZ0VBQUMsMkRBQWEsSUFBQyxRQUFRLEVBQUUsUUFBUSxFQUFFLFVBQVUsUUFBQyxlQUFlLEVBQUUsZUFBZSxFQUFFLFVBQVUsRUFBRSxnQkFBdUIsRUFBRSxTQUFTLEVBQUMsTUFBTSxFQUFDLGlCQUFpQixFQUFFLEtBQUssQ0FBQyxpQkFBaUIsRUFBRSxtQkFBbUIsRUFBRSxLQUFLLENBQUMsbUJBQW1CLEdBQUksR0FDOU0sQ0FDekIsSUFDRyxDQUNQO0FBQ0gsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDbktELGVBQWU7QUFDMEk7QUFDYjtBQUNqRztBQWdCM0MsTUFBTSxZQUFZLEdBQWlCLEVBQUUsT0FBTyxFQUFFLENBQUMsRUFBRTtBQUUxQyxTQUFTLHFCQUFxQixDQUFFLEtBQWlDO0lBQ3RFLE1BQU0sRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxVQUFVLEVBQUUsY0FBYyxFQUFFLFdBQVcsRUFBRSxPQUFPLEVBQUUsV0FBVyxFQUFFLGFBQWEsRUFBRSxVQUFVLEdBQUcsVUFBVSxFQUFFLFFBQVEsRUFBRSxHQUFHLEtBQUs7SUFDbEosTUFBTSxPQUFPLEdBQUcsNENBQUssQ0FBQyxNQUFNLENBQW9CLFNBQVMsQ0FBQztJQUMxRCxNQUFNLFFBQVEsR0FBRyw0Q0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7SUFDaEMsTUFBTSxDQUFDLE1BQU0sRUFBRSxTQUFTLENBQUMsR0FBRyw0Q0FBSyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUM7SUFDakQsTUFBTSxDQUFDLGFBQWEsRUFBRSxnQkFBZ0IsQ0FBQyxHQUFHLDRDQUFLLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztJQUMzRCxNQUFNLFFBQVEsR0FBRyw0Q0FBSyxDQUFDLDRCQUE0QixFQUFFO0lBRXJELDRDQUFLLENBQUMsU0FBUyxDQUFDLEdBQUcsRUFBRTtRQUNuQixJQUFJLFVBQVUsRUFBRSxDQUFDO1lBQ2YsU0FBUyxDQUFDLEtBQUssQ0FBQztRQUNsQixDQUFDO0lBQ0gsQ0FBQyxFQUFFLENBQUMsVUFBVSxDQUFDLENBQUM7SUFFaEIsNENBQUssQ0FBQyxhQUFhLENBQUMsR0FBRyxFQUFFO1FBQ3ZCLElBQUksT0FBTyxhQUFhLEtBQUssVUFBVSxFQUFFLENBQUM7WUFDeEMsUUFBUSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDO1lBQzFELGFBQWEsQ0FBQyxFQUFFLEVBQUUsUUFBUSxDQUFDLE9BQU8sQ0FBQztZQUNuQyxNQUFNLGNBQWMsR0FBRyxJQUFJLGNBQWMsQ0FBQyw2Q0FBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLE9BQU8sRUFBRSxFQUFFO2dCQUNwRSxNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDO2dCQUN0RCxJQUFJLFFBQVEsQ0FBQyxPQUFPLEtBQUssS0FBSyxFQUFFLENBQUM7b0JBQy9CLFFBQVEsQ0FBQyxPQUFPLEdBQUcsS0FBSztvQkFDeEIsYUFBYSxDQUFDLEVBQUUsRUFBRSxLQUFLLENBQUM7Z0JBQzFCLENBQUM7WUFDSCxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUM7WUFDUixjQUFjLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUM7WUFFdkMsT0FBTyxHQUFHLEVBQUU7Z0JBQ1YsY0FBYyxDQUFDLFVBQVUsRUFBRTtZQUM3QixDQUFDO1FBQ0gsQ0FBQztJQUNILENBQUMsQ0FBQztJQUVGLE1BQU0sWUFBWSxHQUFHLDRDQUFLLENBQUMsV0FBVyxDQUFDLEdBQUcsRUFBRTtRQUMxQyxJQUFJLE9BQU8sY0FBYyxLQUFLLFVBQVUsRUFBRSxDQUFDO1lBQ3pDLGNBQWMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxNQUFNLENBQUM7UUFDN0IsQ0FBQztRQUNELFNBQVMsQ0FBQyxDQUFDLE1BQU0sQ0FBQztRQUNsQixnQkFBZ0IsQ0FBQyxhQUFhLEdBQUcsQ0FBQyxDQUFDO1FBQ25DLElBQUksTUFBTSxFQUFFLENBQUM7WUFDWCxVQUFVLENBQUMsR0FBRyxFQUFFO2dCQUNkLElBQUkseURBQWMsRUFBRSxFQUFFLENBQUM7b0JBQ3JCLHFFQUEwQixDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUM7Z0JBQzdDLENBQUM7WUFDSCxDQUFDLEVBQUUsR0FBRyxDQUFDO1FBQ1QsQ0FBQztJQUNILENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxNQUFNLEVBQUUsYUFBYSxFQUFFLGNBQWMsQ0FBQyxDQUFDO0lBRS9DLE9BQU8sQ0FDTCwwRUFBSyxTQUFTLEVBQUMsOEJBQThCLGFBQzNDLGlFQUFDLDJDQUFNLElBQ0wsS0FBSyxFQUFFLEtBQUssZ0JBQ0EsS0FBSyxFQUNqQixJQUFJLFFBQUMsSUFBSSxFQUFDLElBQUksRUFDZCxPQUFPLEVBQUUsVUFBVSxLQUFLLFVBQVUsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxTQUFTLEVBQ3ZELEtBQUssRUFBRSxVQUFVLEtBQUssVUFBVSxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLFNBQVMsRUFDeEQsSUFBSSxFQUFFLFVBQVUsS0FBSyxVQUFVLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsVUFBVSxFQUN4RCxHQUFHLEVBQUUsT0FBTyxFQUNaLE9BQU8sRUFBRSxZQUFZLGFBRXBCLElBQUksSUFBSSxnRUFBQyx5Q0FBSSxrQkFDWixJQUFJLEVBQUUsRUFBRSxJQUNKLENBQUMsT0FBTyxJQUFJLEtBQUssUUFBUSxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFLEtBQUssRUFBRSxVQUFVLEtBQUssVUFBVSxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsS0FBSyxFQUFFLENBQUMsRUFDcEksRUFDRCxLQUFLLElBQUkseUVBQ1IsR0FBRyxFQUFFLDhDQUFHOzs7Ozs7Ozs7V0FTUCxFQUNELFNBQVMsRUFBRSxxREFBVSxDQUFDLEVBQUUsTUFBTSxFQUFFLElBQUksSUFBSSxJQUFJLEVBQUUsQ0FBQyxZQUFHLEtBQUssR0FBTyxJQUN6RCxFQUNSLFFBQVE7Z0JBQ1AsQ0FBQyxDQUFDLGdFQUFDLGdEQUFXLElBQUMsSUFBSSxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsV0FBVyxFQUFFLE9BQU8sRUFBRSxZQUFZLFlBQ2xFLDBFQUFLLEdBQUcsRUFBRSw4Q0FBRzs7OzthQUlaLGFBQ0MseUVBQUssR0FBRyxFQUFFLDhDQUFHOzs7O2VBSVosWUFDRSxRQUFRLEdBQ0wsRUFFTix5RUFBSyxHQUFHLEVBQUUsOENBQUc7Ozs7OztlQU1aLFlBQ0MsMkVBQU0sR0FBRyxFQUFFLDhDQUFHOzs7Ozs7OztpQkFRYixhQUVDLDBFQUNFLEtBQUssRUFBQyxJQUFJLEVBQ1YsTUFBTSxFQUFDLElBQUksRUFDWCxPQUFPLEVBQUMsV0FBVyxFQUNuQixJQUFJLEVBQUMsTUFBTSxFQUNYLE1BQU0sRUFBQyxjQUFjLEVBQ3JCLFdBQVcsRUFBQyxHQUFHLEVBQ2YsR0FBRyxFQUFFLDhDQUFHOzs7cUJBR1AsYUFFRCw4RUFBVSxNQUFNLEVBQUMsa0JBQWtCLEdBQUUsRUFDckMsOEVBQVUsTUFBTSxFQUFDLGVBQWUsR0FBRSxJQUM5Qiw4QkFFTiwyRUFBTSxHQUFHLEVBQUUsOENBQUc7Ozs7bUJBSWIsa0JBQ0csb0RBQWMsSUFDWCxJQUNGLEdBQ0gsSUFDRixHQUNNO2dCQUNoQixDQUFDLENBQUMsZ0VBQUMsa0RBQWEsSUFDWixTQUFTLEVBQUMsOERBQThELEVBQ3hFLGVBQWUsRUFBRSw4REFBeUIsRUFDMUMsSUFBSSxFQUFFLE1BQU0sRUFDWixhQUFhLEVBQUUsWUFBWSxFQUMzQixNQUFNLEVBQUUsWUFBWSxFQUNwQixXQUFXLEVBQUUsV0FBVyxFQUN4QixPQUFPLEVBQUUsT0FBTyxFQUNoQixXQUFXLEVBQUUsV0FBVyxFQUN4QixVQUFVLEVBQUMsTUFBTSxFQUNqQixPQUFPLEVBQUUsYUFBYSxFQUN0QixTQUFTLEVBQUUsT0FBTyxFQUNsQixTQUFTLEVBQUMsY0FBYyxFQUN4QixZQUFZLEVBQUUsWUFBWSxZQUUxQiwwRUFBSyxHQUFHLEVBQUUsOENBQUc7Ozs7YUFJWixhQUNDLHlFQUFLLEdBQUcsRUFBRSw4Q0FBRzs7OztlQUlaLFlBQ0UsUUFBUSxHQUNMLEVBRU4seUVBQUssR0FBRyxFQUFFLDhDQUFHOzs7Ozs7ZUFNWixZQUNDLDJFQUFNLEdBQUcsRUFBRSw4Q0FBRzs7Ozs7Ozs7aUJBUWIsYUFFQywwRUFDRSxLQUFLLEVBQUMsSUFBSSxFQUNWLE1BQU0sRUFBQyxJQUFJLEVBQ1gsT0FBTyxFQUFDLFdBQVcsRUFDbkIsSUFBSSxFQUFDLE1BQU0sRUFDWCxNQUFNLEVBQUMsY0FBYyxFQUNyQixXQUFXLEVBQUMsR0FBRyxFQUNmLEdBQUcsRUFBRSw4Q0FBRzs7O3FCQUdQLGFBRUQsOEVBQVUsTUFBTSxFQUFDLGtCQUFrQixHQUFFLEVBQ3JDLDhFQUFVLE1BQU0sRUFBQyxlQUFlLEdBQUUsSUFDOUIsOEJBRU4sMkVBQU0sR0FBRyxFQUFFLDhDQUFHOzs7O21CQUliLGtCQUNHLG9EQUFjLElBQ1gsSUFDRixHQUNILElBQ0YsR0FDUSxJQUVoQixDQUNQO0FBQ0gsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUN4T0QsZUFBZTtBQUMrSjtBQUd0STtBQUNXO0FBQ0M7QUFDcUI7QUFFekUsTUFBTSxXQUFXLEdBQUcsd0ZBQTRCLEVBQUU7QUE2QmxELGdGQUFnRjtBQUNoRixtRUFBbUU7QUFDbkUsU0FBUyxxQkFBcUIsQ0FBQyxVQUF5QztJQUN0RSxvQ0FBb0M7SUFDcEMsSUFBSSxDQUFDLFVBQVUsSUFBSSxVQUFVLENBQUMsTUFBTSxLQUFLLENBQUMsRUFBRSxDQUFDO1FBQzNDLE9BQU8sVUFBVSxJQUFJLG9EQUFTLENBQUMsRUFBRSxDQUFDO0lBQ3BDLENBQUM7SUFFRCw4Q0FBOEM7SUFDOUMscUVBQXFFO0lBQ3JFLE1BQU0sVUFBVSxHQUFHLENBQUMsVUFBVSxJQUFJLE9BQU8sVUFBVSxDQUFDLE9BQU8sS0FBSyxVQUFVLENBQUM7UUFDekUsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxPQUFPLEVBQUU7UUFDdEIsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7SUFFakQsTUFBTSxjQUFjLEdBQUcsVUFBVSxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksRUFBRSxLQUFLLEVBQUUsRUFBRSxDQUFDLENBQUMsRUFBRSxJQUFJLEVBQUUsYUFBYSxFQUFFLEtBQUssRUFBRSxDQUFDLENBQUM7SUFDeEYsY0FBYyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRTs7UUFDM0IsTUFBTSxNQUFNLEdBQUcsT0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLG1DQUFJLFFBQVE7UUFDdkMsTUFBTSxNQUFNLEdBQUcsT0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLG1DQUFJLFFBQVE7UUFDdkMsSUFBSSxNQUFNLEtBQUssTUFBTSxFQUFFLENBQUM7WUFDdEIsT0FBTyxNQUFNLEdBQUcsTUFBTTtRQUN4QixDQUFDO1FBQ0Qsa0ZBQWtGO1FBQ2xGLE9BQU8sQ0FBQyxDQUFDLGFBQWEsR0FBRyxDQUFDLENBQUMsYUFBYTtJQUMxQyxDQUFDLENBQUM7SUFDRixPQUFPLG9EQUFTLENBQUMsY0FBYyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQzFELENBQUM7QUFFRCw4Q0FBOEM7QUFDOUMsTUFBTSxZQUFZLEdBQUcsQ0FBQyxVQUF5QyxFQUFrQixFQUFFO0lBQ2pGLE1BQU0sTUFBTSxHQUFxRyxFQUFFO0lBQ25ILE1BQU0sU0FBUyxHQUFtRSxFQUFFO0lBQ3BGLE1BQU0sVUFBVSxHQUFhLEVBQUU7SUFDL0IsTUFBTSxhQUFhLEdBQWtDLEVBQUU7SUFFdkQsOENBQThDO0lBQzlDLE1BQU0sYUFBYSxHQUEyQyxFQUFFO0lBRWhFLFVBQVUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLEVBQUUsS0FBSyxFQUFFLEVBQUU7UUFDakMsSUFBSSxJQUFJLENBQUMsT0FBTyxFQUFFLENBQUM7WUFDakIsSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQztnQkFDakMsYUFBYSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFO2dCQUNoQyxNQUFNLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHO29CQUNyQixLQUFLLEVBQUUsb0RBQVMsQ0FBQyxFQUFFLENBQUM7b0JBQ3BCLFdBQVcsRUFBRSxJQUFJLENBQUMsZ0JBQWdCLElBQUksSUFBSSxDQUFDLElBQUksSUFBSSxTQUFTLElBQUksQ0FBQyxPQUFPLEVBQUU7b0JBQzFFLElBQUksRUFBRSxJQUFJLENBQUMsSUFBSTtpQkFDaEI7Z0JBQ0QsYUFBYSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxLQUFLO2dCQUNuQyxVQUFVLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUM7WUFDL0IsQ0FBQztZQUNELGFBQWEsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQztRQUN4QyxDQUFDO2FBQU0sQ0FBQztZQUNOLFNBQVMsQ0FBQyxJQUFJLENBQUMsRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLENBQUM7UUFDakMsQ0FBQztJQUNILENBQUMsQ0FBQztJQUVGLHlEQUF5RDtJQUN6RCxNQUFNLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsRUFBRTtRQUMzQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsS0FBSyxHQUFHLG9EQUFTLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQzNELENBQUMsQ0FBQztJQUVGLE9BQU8sRUFBRSxNQUFNLEVBQUUsU0FBUyxFQUFFLFVBQVUsRUFBRTtBQUMxQyxDQUFDO0FBRUQsNERBQTREO0FBQzVELDhEQUE4RDtBQUM5RCxNQUFNLG1CQUFtQixHQUFHLENBQUMsSUFBb0MsRUFBVSxFQUFFOztJQUMzRSxxQ0FBcUM7SUFDckMsSUFBSSxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDckIsT0FBTyxJQUFJLENBQUMsV0FBVztJQUN6QixDQUFDO0lBRUQsa0RBQWtEO0lBQ2xELE1BQU0sYUFBYSxHQUFHLHNCQUFJLENBQUMsVUFBVSwwQ0FBRSxLQUFLLDBDQUFHLENBQUMsQ0FBQywwQ0FBRSxhQUFhO0lBQ2hFLElBQUksYUFBYSxFQUFFLENBQUM7UUFDbEIsT0FBTyxhQUFhO0lBQ3RCLENBQUM7SUFFRCw0QkFBNEI7SUFDNUIsSUFBSSxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7UUFDZCxPQUFPLElBQUksQ0FBQyxJQUFJO0lBQ2xCLENBQUM7SUFFRCxXQUFXO0lBQ1gsT0FBTyxPQUFPO0FBQ2hCLENBQUM7QUFFTSxTQUFTLGFBQWEsQ0FBRSxLQUF5QjtJQUN0RCxNQUFNLEVBQUUsVUFBVSxFQUFFLFFBQVEsRUFBRSxlQUFlLEVBQUUsVUFBVSxHQUFHLEtBQUssRUFBRSxTQUFTLEdBQUcsRUFBRSxFQUFFLGlCQUFpQixFQUFFLG1CQUFtQixFQUFFLFdBQVcsRUFBRSxtQkFBbUIsRUFBRSxrQkFBa0IsRUFBRSwwQkFBMEIsRUFBRSw0QkFBNEIsRUFBRSxhQUFhLEVBQUUsT0FBTyxFQUFFLHlCQUF5QixFQUFFLG9CQUFvQixFQUFFLFNBQVMsRUFBRSxXQUFXLEVBQUUsR0FBRyxLQUFLO0lBQ3BWLE1BQU0sY0FBYyxHQUFHLDRDQUFLLENBQUMsY0FBYyxDQUFDLDZEQUFlLENBQUM7SUFFNUQsZ0RBQWdEO0lBQ2hELGdGQUFnRjtJQUNoRixNQUFNLGdCQUFnQixHQUFHLDRDQUFLLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRTtRQUMxQyxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUM7WUFDaEIsT0FBTyxvREFBUyxDQUFDLEVBQUUsQ0FBQztRQUN0QixDQUFDO1FBQ0QsT0FBTyxxQkFBcUIsQ0FBQyxVQUFVLENBQUM7SUFDMUMsQ0FBQyxFQUFFLENBQUMsVUFBVSxDQUFDLENBQUM7SUFFaEIsTUFBTSxFQUFFLE1BQU0sRUFBRSxTQUFTLEVBQUUsVUFBVSxFQUFFLEdBQUcsNENBQUssQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLENBQUMsWUFBWSxDQUFDLGdCQUFnQixDQUFDLEVBQUUsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO0lBRWpILHVEQUF1RDtJQUN2RCxNQUFNLENBQUMsU0FBUyxFQUFFLFlBQVksQ0FBQyxHQUFHLDRDQUFLLENBQUMsUUFBUSxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUM7UUFDdEQsSUFBSSxFQUFFLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7UUFDdkMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7S0FDM0MsQ0FBQyxDQUFDO0lBRUgseURBQXlEO0lBQ3pELDRDQUFLLENBQUMsU0FBUyxDQUFDLEdBQUcsRUFBRTtRQUNuQixNQUFNLGVBQWUsR0FBRyxHQUFHLEVBQUU7WUFDM0IsV0FBVyxDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUU7Z0JBQ3RCLEtBQUssRUFBRSxrQ0FBa0M7Z0JBQ3pDLE9BQU8sRUFBRSxNQUFNLENBQUMsUUFBUSxDQUFDLElBQUk7Z0JBQzdCLFFBQVEsRUFBRSxNQUFNLENBQUMsUUFBUSxDQUFDLE1BQU07Z0JBQ2hDLFNBQVMsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFO2FBQ3RCLENBQUM7WUFDRixZQUFZLENBQUM7Z0JBQ1gsSUFBSSxFQUFFLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7Z0JBQ3ZDLEtBQUssRUFBRSxNQUFNLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDO2FBQzNDLENBQUM7UUFDSixDQUFDO1FBQ0QsTUFBTSxDQUFDLGdCQUFnQixDQUFDLFlBQVksRUFBRSxlQUFlLENBQUM7UUFDdEQsK0VBQStFO1FBQy9FLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxVQUFVLEVBQUUsZUFBZSxDQUFDO1FBRXBELE9BQU8sR0FBRyxFQUFFO1lBQ1YsTUFBTSxDQUFDLG1CQUFtQixDQUFDLFlBQVksRUFBRSxlQUFlLENBQUM7WUFDekQsTUFBTSxDQUFDLG1CQUFtQixDQUFDLFVBQVUsRUFBRSxlQUFlLENBQUM7UUFDekQsQ0FBQztJQUNILENBQUMsRUFBRSxFQUFFLENBQUM7SUFFTixnRkFBZ0Y7SUFDaEYsTUFBTSx3QkFBd0IsR0FBRyw0Q0FBSyxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUU7UUFDbEQsTUFBTSxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsR0FBRyxTQUFTO1FBRWpDLE1BQU0sVUFBVSxHQUFHLElBQUksZUFBZSxDQUFDLElBQUksQ0FBQztRQUM1QyxNQUFNLFdBQVcsR0FBRyxJQUFJLGVBQWUsQ0FBQyxLQUFLLENBQUM7UUFFOUMsTUFBTSxhQUFhLEdBQUcsQ0FBQyxHQUFHLFNBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUVyRyxnRUFBZ0U7UUFDaEUsS0FBSyxNQUFNLElBQUksSUFBSSxhQUFhLEVBQUUsQ0FBQztZQUNqQyxJQUFJLElBQUksQ0FBQyxPQUFPLElBQUksVUFBVSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQztnQkFDakQsT0FBTztvQkFDTCxPQUFPLEVBQUUsSUFBSSxDQUFDLE9BQU87b0JBQ3JCLEtBQUssRUFBRSxVQUFVLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUM7aUJBQ3BDO1lBQ0gsQ0FBQztRQUNILENBQUM7UUFFRCxxREFBcUQ7UUFDckQsS0FBSyxNQUFNLElBQUksSUFBSSxhQUFhLEVBQUUsQ0FBQztZQUNqQyxJQUFJLElBQUksQ0FBQyxPQUFPLElBQUksV0FBVyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQztnQkFDbEQsT0FBTztvQkFDTCxPQUFPLEVBQUUsSUFBSSxDQUFDLE9BQU87b0JBQ3JCLEtBQUssRUFBRSxXQUFXLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUM7aUJBQ3JDO1lBQ0gsQ0FBQztRQUNILENBQUM7UUFDRCxPQUFPLElBQUk7SUFDYixDQUFDLEVBQUUsQ0FBQyxTQUFTLEVBQUUsTUFBTSxFQUFFLFNBQVMsQ0FBQyxDQUFDO0lBRWxDLHdGQUF3RjtJQUN4RixNQUFNLDBCQUEwQixHQUFHLGlCQUFpQixJQUFJLHdCQUF3QjtJQUVoRix5REFBeUQ7SUFDekQsTUFBTSxrQkFBa0IsR0FBRyw0Q0FBSyxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUU7UUFDNUMsTUFBTSxPQUFPLEdBQUcsMEJBQTBCLGFBQTFCLDBCQUEwQix1QkFBMUIsMEJBQTBCLENBQUUsT0FBTztRQUNuRCxJQUFJLENBQUMsT0FBTyxFQUFFLENBQUM7WUFDYixPQUFPLENBQUMsQ0FBQztRQUNYLENBQUM7UUFDRCxPQUFPLGdCQUFnQixDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxPQUFPLEtBQUssT0FBTyxDQUFDO0lBQ3JFLENBQUMsRUFBRSxDQUFDLGdCQUFnQixFQUFFLDBCQUEwQixDQUFDLENBQUM7SUFFbEQsaUVBQWlFO0lBQ2pFLE1BQU0saUJBQWlCLEdBQUcsNENBQUssQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFOztRQUMzQyxJQUFJLGtCQUFrQixHQUFHLENBQUM7WUFBRSxPQUFPLElBQUk7UUFFdkMsTUFBTSxJQUFJLEdBQUcsZ0JBQWdCLENBQUMsa0JBQWtCLENBQUM7UUFDakQsSUFBSSxJQUFJLENBQUMsT0FBTyxFQUFFLENBQUM7WUFDakIsTUFBTSxVQUFVLEdBQUcsYUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsMENBQUUsS0FBSyxLQUFJLG9EQUFTLENBQUMsRUFBRSxDQUFDO1lBQy9ELE1BQU0sWUFBWSxHQUFHLFVBQVUsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsUUFBUSxLQUFLLElBQUksQ0FBQyxRQUFRLENBQUM7WUFDNUUsV0FBVyxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUU7Z0JBQ3ZCLEtBQUssRUFBRSwyQkFBMkI7Z0JBQ2xDLE9BQU8sRUFBRSxJQUFJLENBQUMsT0FBTztnQkFDckIsWUFBWSxFQUFFLFlBQVksSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDbEQsaUJBQWlCLEVBQUUsSUFBSSxDQUFDLFFBQVE7Z0JBQ2hDLGdCQUFnQixFQUFFLElBQUksQ0FBQyxPQUFPO2FBQy9CLENBQUM7WUFDRixPQUFPLEVBQUUsSUFBSSxFQUFFLE9BQWdCLEVBQUUsT0FBTyxFQUFFLElBQUksQ0FBQyxPQUFPLEVBQUUsS0FBSyxFQUFFLFlBQVksSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFO1FBQ3ZHLENBQUM7YUFBTSxDQUFDO1lBQ04sa0JBQWtCO1lBQ2xCLE1BQU0sZ0JBQWdCLEdBQUcsU0FBUyxDQUFDLFNBQVMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsUUFBUSxLQUFLLElBQUksQ0FBQyxRQUFRLENBQUM7WUFDM0YsV0FBVyxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUU7Z0JBQ3ZCLEtBQUssRUFBRSw0QkFBNEI7Z0JBQ25DLGdCQUFnQixFQUFFLGdCQUFnQixJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQzlELGlCQUFpQixFQUFFLElBQUksQ0FBQyxRQUFRO2dCQUNoQyxnQkFBZ0IsRUFBRSxJQUFJLENBQUMsT0FBTzthQUMvQixDQUFDO1lBQ0YsT0FBTyxFQUFFLElBQUksRUFBRSxXQUFvQixFQUFFLEtBQUssRUFBRSxnQkFBZ0IsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLGdCQUFnQixDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUU7UUFDNUYsQ0FBQztJQUNILENBQUMsRUFBRSxDQUFDLGtCQUFrQixFQUFFLGdCQUFnQixFQUFFLE1BQU0sRUFBRSxTQUFTLENBQUMsQ0FBQztJQUU3RCwrREFBK0Q7SUFDL0QsTUFBTSxtQkFBbUIsR0FBRyw0Q0FBSyxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUU7O1FBQzdDLElBQUksaUJBQWlCLEVBQUUsQ0FBQztZQUN0QixPQUFPLGlCQUFpQjtRQUMxQixDQUFDO1FBRUQsK0RBQStEO1FBQy9ELDhEQUE4RDtRQUM5RCxNQUFNLG1CQUFtQixHQUFHLFNBQVMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLGVBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxtQ0FBSSxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUTtRQUNuRyxNQUFNLGVBQWUsR0FBRyxVQUFVLENBQUMsTUFBTSxHQUFHLENBQUMsSUFBSSxtQkFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQywwQ0FBRSxLQUFLLDBDQUFFLE1BQU0sSUFBRyxDQUFDO1lBQ3ZGLENBQUMsQ0FBQyxDQUFDLFlBQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxtQ0FBSSxRQUFRLENBQUM7WUFDcEQsQ0FBQyxDQUFDLFFBQVE7UUFFWix1REFBdUQ7UUFDdkQsSUFBSSxtQkFBbUIsR0FBRyxlQUFlLEVBQUUsQ0FBQztZQUMxQyxPQUFPLEVBQUUsSUFBSSxFQUFFLFdBQW9CLEVBQUUsS0FBSyxFQUFFLENBQUMsRUFBRTtRQUNqRCxDQUFDO2FBQU0sSUFBSSxlQUFlLEdBQUcsUUFBUSxJQUFJLFVBQVUsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUM7WUFDL0QsT0FBTyxFQUFFLElBQUksRUFBRSxPQUFnQixFQUFFLE9BQU8sRUFBRSxVQUFVLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxFQUFFLENBQUMsRUFBRTtRQUNyRSxDQUFDO2FBQU0sSUFBSSxTQUFTLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRSxDQUFDO1lBQ2hDLE9BQU8sRUFBRSxJQUFJLEVBQUUsV0FBb0IsRUFBRSxLQUFLLEVBQUUsQ0FBQyxFQUFFO1FBQ2pELENBQUM7UUFDRCxPQUFPLElBQUk7SUFDYixDQUFDLEVBQUUsQ0FBQyxpQkFBaUIsRUFBRSxTQUFTLEVBQUUsTUFBTSxFQUFFLFVBQVUsQ0FBQyxDQUFDO0lBRXRELGtIQUFrSDtJQUNsSCxNQUFNLENBQUMsZUFBZSxFQUFFLGtCQUFrQixDQUFDLEdBQUcsNENBQUssQ0FBQyxRQUFRLENBQWdCLEdBQUcsRUFBRTtRQUMvRSxJQUFJLG9CQUFtQixhQUFuQixtQkFBbUIsdUJBQW5CLG1CQUFtQixDQUFFLElBQUksTUFBSyxPQUFPLEVBQUUsQ0FBQztZQUMxQyxXQUFXLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRTtnQkFDdkIsS0FBSyxFQUFFLHlCQUF5QjtnQkFDaEMsT0FBTyxFQUFFLG1CQUFtQixDQUFDLE9BQU87Z0JBQ3BDLElBQUksRUFBRSxpQkFBaUIsQ0FBQyxDQUFDLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxnQ0FBZ0M7YUFDNUUsQ0FBQztZQUNGLE9BQU8sbUJBQW1CLENBQUMsT0FBTztRQUNwQyxDQUFDO1FBQ0QsT0FBTyxJQUFJO0lBQ2IsQ0FBQyxDQUFDO0lBQ0YsTUFBTSxDQUFDLHVCQUF1QixFQUFFLDBCQUEwQixDQUFDLEdBQUcsNENBQUssQ0FBQyxRQUFRLENBQUMsR0FBRyxFQUFFO1FBQ2hGLElBQUksb0JBQW1CLGFBQW5CLG1CQUFtQix1QkFBbkIsbUJBQW1CLENBQUUsSUFBSSxNQUFLLE9BQU8sRUFBRSxDQUFDO1lBQzFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFO2dCQUN2QixLQUFLLEVBQUUsMkJBQTJCO2dCQUNsQyxLQUFLLEVBQUUsbUJBQW1CLENBQUMsS0FBSztnQkFDaEMsSUFBSSxFQUFFLGlCQUFpQixDQUFDLENBQUMsQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLGdDQUFnQzthQUM1RSxDQUFDO1lBQ0YsT0FBTyxtQkFBbUIsQ0FBQyxLQUFLO1FBQ2xDLENBQUM7UUFDRCxPQUFPLENBQUM7SUFDVixDQUFDLENBQUM7SUFDRixNQUFNLENBQUMsc0JBQXNCLEVBQUUseUJBQXlCLENBQUMsR0FBRyw0Q0FBSyxDQUFDLFFBQVEsQ0FBQyxHQUFHLEVBQUU7UUFDOUUsSUFBSSxvQkFBbUIsYUFBbkIsbUJBQW1CLHVCQUFuQixtQkFBbUIsQ0FBRSxJQUFJLE1BQUssV0FBVyxFQUFFLENBQUM7WUFDOUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUU7Z0JBQ3ZCLEtBQUssRUFBRSx5QkFBeUI7Z0JBQ2hDLEtBQUssRUFBRSxtQkFBbUIsQ0FBQyxLQUFLO2dCQUNoQyxJQUFJLEVBQUUsaUJBQWlCLENBQUMsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsZ0NBQWdDO2FBQzVFLENBQUM7WUFDRixPQUFPLG1CQUFtQixDQUFDLEtBQUs7UUFDbEMsQ0FBQztRQUNELE9BQU8sQ0FBQztJQUNWLENBQUMsQ0FBQztJQUVGLG9GQUFvRjtJQUNwRiw4REFBOEQ7SUFDOUQsOEZBQThGO0lBQzlGLDRDQUFLLENBQUMsU0FBUyxDQUFDLEdBQUcsRUFBRTtRQUNuQixJQUFJLGlCQUFpQixFQUFFLENBQUM7WUFDdEIsNkRBQTZEO1lBQzdELElBQUksaUJBQWlCLENBQUMsSUFBSSxLQUFLLE9BQU8sRUFBRSxDQUFDO2dCQUN2QyxXQUFXLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRTtvQkFDdkIsS0FBSyxFQUFFLHNDQUFzQztvQkFDN0MsT0FBTyxFQUFFLGlCQUFpQixDQUFDLE9BQU87b0JBQ2xDLEtBQUssRUFBRSxpQkFBaUIsQ0FBQyxLQUFLO29CQUM5QixJQUFJLEVBQUUsc0NBQXNDO2lCQUM3QyxDQUFDO2dCQUNGLGtCQUFrQixDQUFDLGlCQUFpQixDQUFDLE9BQU8sQ0FBQztnQkFDN0MsMEJBQTBCLENBQUMsaUJBQWlCLENBQUMsS0FBSyxDQUFDO1lBQ3JELENBQUM7aUJBQU0sQ0FBQztnQkFDTixXQUFXLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRTtvQkFDdkIsS0FBSyxFQUFFLDBDQUEwQztvQkFDakQsS0FBSyxFQUFFLGlCQUFpQixDQUFDLEtBQUs7b0JBQzlCLElBQUksRUFBRSxzQ0FBc0M7aUJBQzdDLENBQUM7Z0JBQ0Ysa0JBQWtCLENBQUMsSUFBSSxDQUFDO2dCQUN4Qix5QkFBeUIsQ0FBQyxpQkFBaUIsQ0FBQyxLQUFLLENBQUM7WUFDcEQsQ0FBQztRQUNILENBQUM7SUFDSCxDQUFDLEVBQUUsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO0lBRXZCLHdDQUF3QztJQUN4QyxNQUFNLG9CQUFvQixHQUFHLEdBQW1DLEVBQUU7UUFDaEUsMENBQTBDO1FBQzFDLDhFQUE4RTtRQUM5RSx1REFBdUQ7UUFDdkQsV0FBVyxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUU7WUFDdkIsS0FBSyxFQUFFLHNDQUFzQztZQUM3QyxlQUFlO1lBQ2YsZ0JBQWdCLEVBQUUsZUFBZSxJQUFJLE1BQU0sQ0FBQyxlQUFlLENBQUM7WUFDNUQsdUJBQXVCO1lBQ3ZCLHNCQUFzQjtZQUN0QixlQUFlLEVBQUUsU0FBUyxDQUFDLE1BQU07WUFDakMsZ0JBQWdCLEVBQUUsVUFBVSxDQUFDLE1BQU07WUFDbkMsSUFBSSxFQUFFLG9DQUFvQztTQUMzQyxDQUFDO1FBRUYsb0RBQW9EO1FBQ3BELElBQUksZUFBZSxJQUFJLE1BQU0sQ0FBQyxlQUFlLENBQUMsRUFBRSxDQUFDO1lBQy9DLE1BQU0sVUFBVSxHQUFHLE1BQU0sQ0FBQyxlQUFlLENBQUMsQ0FBQyxLQUFLO1lBQ2hELElBQUksVUFBVSxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUUsQ0FBQztnQkFDMUIsTUFBTSxHQUFHLEdBQUcsdUJBQXVCLEdBQUcsVUFBVSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsdUJBQXVCLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQ3JGLE1BQU0sWUFBWSxHQUFHLFVBQVUsQ0FBQyxHQUFHLENBQUM7Z0JBQ3BDLFdBQVcsQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFO29CQUN2QixLQUFLLEVBQUUsMkJBQTJCO29CQUNsQyxPQUFPLEVBQUUsZUFBZTtvQkFDeEIsZUFBZSxFQUFFLEdBQUc7b0JBQ3BCLGlCQUFpQixFQUFFLFlBQVksQ0FBQyxRQUFRO29CQUN4QyxnQkFBZ0IsRUFBRSxtQkFBbUIsQ0FBQyxZQUFZLENBQUM7aUJBQ3BELENBQUM7Z0JBQ0YsT0FBTyxZQUFZO1lBQ3JCLENBQUM7UUFDSCxDQUFDO1FBRUQsd0NBQXdDO1FBQ3hDLElBQUksU0FBUyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUUsQ0FBQztZQUN6QixNQUFNLEdBQUcsR0FBRyxzQkFBc0IsR0FBRyxTQUFTLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNsRixNQUFNLFlBQVksR0FBRyxTQUFTLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSTtZQUN4QyxXQUFXLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRTtnQkFDdkIsS0FBSyxFQUFFLCtCQUErQjtnQkFDdEMsY0FBYyxFQUFFLEdBQUc7Z0JBQ25CLGlCQUFpQixFQUFFLFlBQVksQ0FBQyxRQUFRO2dCQUN4QyxnQkFBZ0IsRUFBRSxtQkFBbUIsQ0FBQyxZQUFZLENBQUM7YUFDcEQsQ0FBQztZQUNGLE9BQU8sWUFBWTtRQUNyQixDQUFDO1FBRUQsK0JBQStCO1FBQy9CLFdBQVcsQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFO1lBQ3ZCLEtBQUssRUFBRSx5QkFBeUI7WUFDaEMsSUFBSSxFQUFFLGtEQUFrRDtTQUN6RCxDQUFDO1FBQ0YsT0FBTyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUM7SUFDNUIsQ0FBQztJQUVELE1BQU0saUJBQWlCLEdBQUcsb0JBQW9CLEVBQUU7SUFDaEQsTUFBTSxzQkFBc0IsR0FBRyw0Q0FBSyxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUU7UUFDaEQsT0FBTyxnQkFBZ0IsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsUUFBUSxLQUFLLGlCQUFpQixDQUFDLFFBQVEsQ0FBQztJQUNuRixDQUFDLEVBQUUsQ0FBQyxnQkFBZ0IsRUFBRSxpQkFBaUIsQ0FBQyxDQUFDO0lBRXpDLCtDQUErQztJQUMvQyxNQUFNLFlBQVksR0FBRyxnQkFBZ0IsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxJQUFJLFVBQVUsQ0FBQyxNQUFNLEdBQUcsQ0FBQztJQUV6RSxPQUFPLENBQ0wseUVBQUssU0FBUyxFQUFFLG1DQUFtQyxTQUFTLEVBQUUsRUFBRSxHQUFHLEVBQUUsOENBQUc7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0tBdUJ2RSxZQUlFLGlCQUFpQixJQUFJLENBQ3BCLHlFQUFLLFNBQVMsRUFBRSx3QkFBd0IsVUFBVSxDQUFDLENBQUMsQ0FBQyw4REFBeUIsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLFlBQ25GLGdFQUFDLGtEQUFTLElBQ1IsUUFBUSxFQUFFLFFBQVEsRUFDbEIsS0FBSyxFQUFFLHNCQUFzQixJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsc0JBQXNCLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFDL0QsS0FBSyxFQUFFLGdCQUFnQixDQUFDLE1BQU0sRUFDOUIsU0FBUyxFQUFFLGlCQUFpQixFQUM1QixVQUFVLEVBQUUsVUFBVSxFQUN0QixpQkFBaUIsRUFBRSxpQkFBaUIsQ0FBQyxPQUFPLE1BQUssMEJBQTBCLGFBQTFCLDBCQUEwQix1QkFBMUIsMEJBQTBCLENBQUUsT0FBTyxFQUFDLENBQUMsQ0FBQywwQkFBMEIsYUFBMUIsMEJBQTBCLHVCQUExQiwwQkFBMEIsQ0FBRSxLQUFLLENBQUMsQ0FBQyxDQUFDLFNBQVMsRUFDcEksbUJBQW1CLEVBQUUsbUJBQW1CLEVBQ3hDLFVBQVUsRUFBRSxnQkFBZ0IsRUFDNUIsa0JBQWtCLEVBQUUsc0JBQXNCLEVBQzFDLGFBQWEsRUFBRSxDQUFDLEtBQUssRUFBRSxFQUFFLENBQUMseUJBQXlCLENBQUMsS0FBSyxDQUFDO2dCQUMxRCxpQkFBaUI7Z0JBQ2pCLE1BQU0sRUFBRSxNQUFNLEVBQ2QsU0FBUyxFQUFFLFNBQVM7Z0JBQ3BCLHVCQUF1QjtnQkFDdkIsNEJBQTRCLEVBQUUsNEJBQTRCLEVBQzFELGFBQWEsRUFBRSxhQUFhLEVBQzVCLE9BQU8sRUFBRSxPQUFPLEVBQ2hCLHlCQUF5QixFQUFFLHlCQUF5QixFQUNwRCxvQkFBb0IsRUFBRSxvQkFBb0IsRUFDMUMsVUFBVSxFQUFFLFVBQVUsRUFDdEIsZUFBZSxFQUFFLGVBQWUsRUFDaEMsdUJBQXVCLEVBQUUsdUJBQXVCLEVBQ2hELGFBQWEsRUFBRSxDQUFDLE9BQU8sRUFBRSxFQUFFLENBQUMsa0JBQWtCLENBQUMsT0FBTyxDQUFDLEVBQ3ZELGtCQUFrQixFQUFFLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQywwQkFBMEIsQ0FBQyxLQUFLLENBQUMsRUFDaEUsaUJBQWlCLEVBQUUsQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLHlCQUF5QixDQUFDLEtBQUssQ0FBQyxFQUM5RCxXQUFXLEVBQUUsV0FBVyxFQUN4QixtQkFBbUIsRUFBRSxtQkFBbUIsRUFDeEMsa0JBQWtCLEVBQUUsa0JBQWtCLEVBQ3RDLDBCQUEwQixFQUFFLDBCQUEwQixFQUN0RCxTQUFTLEVBQUUsU0FBUyxFQUNwQixXQUFXLEVBQUUsV0FBVyxHQUV4QixHQUNFLENBQ1AsR0FDRyxDQUNQO0FBQ0gsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUN6Y0QsZUFBZTtBQUNrSDtBQUNoRjtBQUN3RTtBQUN0RTtBQUNRO0FBQ047QUFDRTtBQUNVO0FBdUIxRCxTQUFTLG9CQUFvQixDQUFFLEtBQXlCOztJQUM3RCxNQUFNLEVBQ0osS0FBSyxFQUFFLElBQUksRUFBRSxXQUFXLEVBQUUsWUFBWSxFQUFFLGNBQWMsRUFBRSxnQkFBZ0IsRUFBRSxjQUFjLEVBQUUsY0FBYyxFQUFFLGdCQUFnQixFQUFFLGNBQWMsRUFDMUksY0FBYyxFQUFFLGdCQUFnQixFQUFFLFlBQVksRUFBRSxnQkFBZ0IsRUFBRSxrQkFBa0IsRUFBRSxjQUFjLEVBQUUsZUFBZSxFQUFFLFFBQVEsRUFDaEksR0FBRyxLQUFLO0lBQ1QsTUFBTSxjQUFjLEdBQUcsNENBQUssQ0FBQyxjQUFjLENBQUMsNkRBQWMsQ0FBQztJQUMzRCxtR0FBbUc7SUFDbkcsTUFBTSxxQkFBcUIsR0FBRyw0Q0FBSyxDQUFDLE1BQU0sQ0FBTSxJQUFJLENBQUM7SUFDckQsTUFBTSxTQUFTLEdBQUcsaURBQVUsQ0FBQyxXQUFXLENBQUMsQ0FBQyxLQUFjLEVBQUUsRUFBRTtRQUMxRCxJQUFJLGFBQVksYUFBWixZQUFZLHVCQUFaLFlBQVksQ0FBRSxNQUFNLElBQUcsQ0FBQyxFQUFFLENBQUM7WUFDN0IsTUFBTSxXQUFXLEdBQUcsWUFBWSxDQUFDLENBQUMsQ0FBQztZQUNuQyxPQUFPLEtBQUssQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxJQUFJLElBQUk7UUFDckQsQ0FBQztRQUNELE9BQU8sS0FBSztJQUNkLENBQUMsQ0FBQztJQUNGLE1BQU0sZUFBZSxHQUFHLDRDQUFLLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRTtRQUN6QyxPQUFPLFNBQVMsSUFBSSxDQUFDLFlBQVcsYUFBWCxXQUFXLHVCQUFYLFdBQVcsQ0FBRSxRQUFRLENBQUMsc0RBQWlCLENBQUMsZ0JBQWdCLENBQUMsTUFBSSxXQUFXLGFBQVgsV0FBVyx1QkFBWCxXQUFXLENBQUUsUUFBUSxDQUFDLHNEQUFpQixDQUFDLG1CQUFtQixDQUFDLEVBQUM7SUFDakosQ0FBQyxFQUFFLENBQUMsV0FBVyxFQUFFLFNBQVMsQ0FBQyxDQUFDO0lBQzVCLE1BQU0sb0JBQW9CLEdBQUcsNENBQUssQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFO1FBQzlDLE1BQU0sTUFBTSxHQUFHLEVBQUU7UUFDakIsSUFBSSxlQUFjLGFBQWQsY0FBYyx1QkFBZCxjQUFjLENBQUUsTUFBTSxJQUFHLENBQUMsSUFBSSxjQUFjLEVBQUUsQ0FBQztZQUNqRCxNQUFNLENBQUMsSUFBSSxDQUFDLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsY0FBYyxDQUFDLGVBQWUsQ0FBQyxFQUFFLENBQUM7UUFDeEUsQ0FBQztRQUNELElBQUksZUFBZSxLQUFJLFdBQVcsYUFBWCxXQUFXLHVCQUFYLFdBQVcsQ0FBRSxRQUFRLENBQUMsc0RBQWlCLENBQUMsZ0JBQWdCLENBQUMsR0FBRSxDQUFDO1lBQ2pGLE1BQU0sQ0FBQyxJQUFJLENBQUMsRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxjQUFjLENBQUMscUJBQXFCLHNEQUFpQixDQUFDLGdCQUFnQixFQUFFLENBQUMsRUFBRSxDQUFDO1FBQ2pILENBQUM7UUFDRCxJQUFJLGVBQWUsS0FBSSxXQUFXLGFBQVgsV0FBVyx1QkFBWCxXQUFXLENBQUUsUUFBUSxDQUFDLHNEQUFpQixDQUFDLG1CQUFtQixDQUFDLEdBQUUsQ0FBQztZQUNwRixNQUFNLENBQUMsSUFBSSxDQUFDLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsY0FBYyxDQUFDLHFCQUFxQixzREFBaUIsQ0FBQyxtQkFBbUIsRUFBRSxDQUFDLEVBQUUsQ0FBQztRQUNySCxDQUFDO1FBQ0QsT0FBTyxNQUFNO0lBQ2YsQ0FBQyxFQUFFLENBQUMsZUFBZSxFQUFFLGNBQWMsRUFBRSxjQUFjLEVBQUUsY0FBYyxFQUFFLFdBQVcsQ0FBQyxDQUFDO0lBRWxGLE1BQU0sQ0FBQyxpQkFBaUIsRUFBRSxvQkFBb0IsQ0FBQyxHQUFHLDRDQUFLLENBQUMsUUFBUSxDQUFDLDBCQUFvQixhQUFwQixvQkFBb0IsdUJBQXBCLG9CQUFvQixDQUFHLENBQUMsQ0FBQywwQ0FBRSxLQUFLLENBQUM7SUFFbEcsNENBQUssQ0FBQyxTQUFTLENBQUMsR0FBRyxFQUFFOztRQUNuQixrREFBa0Q7UUFDbEQsSUFBSSxpQkFBaUIsS0FBSyxNQUFNLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxLQUFLLEtBQUssaUJBQWlCLENBQUMsRUFBRSxDQUFDO1lBQzNHLG9CQUFvQixDQUFDLDBCQUFvQixhQUFwQixvQkFBb0IsdUJBQXBCLG9CQUFvQixDQUFHLENBQUMsQ0FBQywwQ0FBRSxLQUFLLENBQUM7UUFDeEQsQ0FBQztJQUNILENBQUMsRUFBRSxDQUFDLGlCQUFpQixFQUFFLG9CQUFvQixDQUFDLENBQUM7SUFFN0MsNENBQUssQ0FBQyxTQUFTLENBQUMsR0FBRyxFQUFFO1FBQ25CLGlFQUFpRTtRQUNqRSxJQUFJLGlCQUFpQixLQUFLLEtBQUssSUFBSSxpQkFBaUIsS0FBSyxNQUFNLElBQUksaUJBQWlCLEtBQUssTUFBTSxFQUFFLENBQUM7WUFDaEcsZ0JBQWdCLENBQUMsSUFBSSxDQUFDO1lBQ3RCLGNBQWMsQ0FBQyxDQUFDLEVBQUUsNkNBQVEsQ0FBQyxNQUFNLENBQUM7WUFDbEMsY0FBYyxDQUFDLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxDQUFDO1FBQ3BDLENBQUM7UUFDRCw2SEFBNkg7UUFDN0gsSUFBSSxpQkFBaUIsS0FBSyxNQUFNLElBQUkscUJBQXFCLENBQUMsT0FBTyxJQUFJLElBQUksRUFBRSxDQUFDO1lBQzFFLGNBQWMsQ0FBQyxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsQ0FBQztRQUNwQyxDQUFDO0lBQ0gsQ0FBQyxFQUFFLENBQUMsaUJBQWlCLEVBQUUsZ0JBQWdCLEVBQUUsY0FBYyxFQUFFLGNBQWMsQ0FBQyxDQUFDO0lBRXpFLE1BQU0sdUJBQXVCLEdBQUcsNENBQUssQ0FBQyxXQUFXLENBQUMsQ0FBQyxHQUFHLEVBQUUsRUFBRSxHQUFHLG9CQUFvQixDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLEVBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQztJQUUxRyxNQUFNLG9CQUFvQixHQUFHLDRDQUFLLENBQUMsV0FBVyxDQUFDLENBQUMsUUFBeUIsRUFBRSxLQUE0QixFQUFFLE9BQXdCLEVBQUUsZUFBeUIsRUFBRSxFQUFFO1FBQzlKLGNBQWMsQ0FBQyxFQUFFLFFBQVEsRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFFLGVBQWUsRUFBRSxDQUFDO0lBQy9ELENBQUMsRUFBRSxDQUFDLGNBQWMsQ0FBQyxDQUFDO0lBRXBCLE1BQU0scUJBQXFCLEdBQUcsNENBQUssQ0FBQyxXQUFXLENBQUMsQ0FBQyxVQUFVLEVBQUUsRUFBRTtRQUM3RCxxQkFBcUIsQ0FBQyxPQUFPLEdBQUcsVUFBVTtRQUMxQyxjQUFjLENBQUMsRUFBRSxRQUFRLEVBQUUsVUFBVSxFQUFFLENBQUM7SUFDMUMsQ0FBQyxFQUFFLENBQUMsY0FBYyxDQUFDLENBQUM7SUFFcEIsSUFBSSxDQUFDLENBQUMsZUFBYyxhQUFkLGNBQWMsdUJBQWQsY0FBYyxDQUFFLE1BQU0sSUFBRyxDQUFDLElBQUksY0FBYyxJQUFJLGVBQWUsQ0FBQyxFQUFFLENBQUM7UUFDdkUsT0FBTyxJQUFJO0lBQ2IsQ0FBQztJQUVELE9BQU8sQ0FDTCwwRUFBSyxJQUFJLEVBQUMsT0FBTyxFQUFDLFNBQVMsRUFBQyxXQUFXLGdCQUFhLEtBQUssYUFDdkQsMEVBQUssU0FBUyxFQUFFLHFEQUFVLENBQUMsMkNBQTJDLEVBQUUsRUFBRSxRQUFRLEVBQUUsQ0FBQyxLQUFLLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxhQUNuRyxLQUFLLElBQUkseUVBQUssU0FBUyxFQUFDLGFBQWEsWUFBRSxLQUFLLEdBQU8sRUFDbkQsSUFBSSxJQUFJLENBQ1AsZ0VBQUMsNENBQU8sSUFBQyxTQUFTLEVBQUMsUUFBUSxFQUFDLEdBQUcsRUFBRSw4Q0FBRyx5QkFBd0IsRUFBRSxLQUFLLEVBQUUsSUFBSSxZQUN2RSxnRUFBQywyQ0FBTSxJQUFDLElBQUksRUFBQyxJQUFJLEVBQUMsSUFBSSxRQUFDLElBQUksRUFBQyxVQUFVLFlBQ3BDLGdFQUFDLDRFQUFZLElBQUMsS0FBSyxFQUFDLCtCQUErQixFQUFDLElBQUksRUFBQyxHQUFHLEdBQUUsR0FDdkQsR0FDRCxDQUNYLElBQ0csRUFDTCxvQkFBb0IsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxJQUFJLENBQ2xDLHFGQUNFLHlFQUFLLFNBQVMsRUFBQyxRQUFRLFlBQUUsY0FBYyxDQUFDLGtCQUFrQixDQUFDLEdBQU8sRUFDbEUsaUVBQUMsMkNBQU0sa0JBQ08sY0FBYyxDQUFDLGtCQUFrQixDQUFDLEVBQzlDLEdBQUcsRUFBRSw4Q0FBRyxnQkFBZSxFQUN2QixLQUFLLEVBQUUsaUJBQWlCLEVBQ3hCLFFBQVEsRUFBRSx1QkFBdUIsYUFFakMsNEVBQWdCLEtBQUssRUFBQyxNQUFNLG1CQUFoQixHQUFHLENBQXdCLEVBQ3RDLG9CQUFvQixDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLDRFQUF5QixLQUFLLEVBQUUsSUFBSSxDQUFDLEtBQUssWUFBRyxJQUFJLENBQUMsS0FBSyxJQUExQyxJQUFJLENBQUMsS0FBSyxDQUEwQyxDQUFDLElBQzdGLElBQ0wsQ0FDUCxFQUNBLGlCQUFpQixLQUFLLE1BQU0sSUFBSSxDQUMvQixnRUFBQyxxRUFBc0IsSUFDckIsWUFBWSxFQUFFLGNBQWMsRUFDNUIsY0FBYyxFQUFFLGdCQUFnQixFQUNoQyxVQUFVLEVBQUUsWUFBWSxFQUN4QixnQkFBZ0IsRUFBRSxnQkFBZ0IsRUFDbEMsY0FBYyxFQUFFLGNBQWMsRUFDOUIsY0FBYyxFQUFFLGNBQWMsRUFDOUIsaUJBQWlCLEVBQUUscUJBQXFCLEVBQ3hDLGdCQUFnQixFQUFFLGdCQUFnQixFQUNsQyxjQUFjLEVBQUUsY0FBYyxHQUM5QixDQUNILEVBQ0EsaUJBQWlCLEtBQUssS0FBSyxJQUFJLENBQzlCLGdFQUFDLCtEQUFlLElBQ2QsWUFBWSxFQUFFLFlBQVksRUFDMUIsZUFBZSxFQUFFLGVBQWUsRUFDaEMsZ0JBQWdCLEVBQUUsb0JBQW9CLEdBQ3RDLENBQ0gsRUFDQSxpQkFBaUIsS0FBSyxNQUFNLElBQUksQ0FDL0IsZ0VBQUMsaUVBQWdCLElBQ2YsWUFBWSxFQUFFLGdCQUFnQixFQUM5QixjQUFjLEVBQUUsa0JBQWtCLEVBQ2xDLFVBQVUsRUFBRSxjQUFjLEVBQzFCLFlBQVksRUFBRSxZQUFZLEVBQzFCLFFBQVEsRUFBRSxRQUFRLEVBQ2xCLGVBQWUsRUFBRSxlQUFlLEVBQ2hDLGdCQUFnQixFQUFFLG9CQUFvQixFQUN0QyxjQUFjLEVBQUUsY0FBYyxHQUM5QixDQUNILElBQ0csQ0FDUDtBQUNILENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ2hLRCxlQUFlO0FBbUNHO0FBQ3FFO0FBQ3RCO0FBQ0Q7QUFDZ0M7QUFDL0M7QUFDRDtBQUM2QztBQUMxQztBQUNPO0FBQzBCO0FBQ3FEO0FBRXRGO0FBQzJCO0FBQzlCO0FBQ3dGO0FBQy9EO0FBRXpFLE1BQU0sV0FBVyxHQUFHLHdGQUE0QixFQUFFO0FBMENsRCw0REFBNEQ7QUFDNUQsOERBQThEO0FBQzlELE1BQU0sbUJBQW1CLEdBQUcsQ0FBQyxJQUFvQyxFQUFVLEVBQUU7O0lBQzNFLHFDQUFxQztJQUNyQyxJQUFJLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztRQUNyQixPQUFPLElBQUksQ0FBQyxXQUFXO0lBQ3pCLENBQUM7SUFFRCxrREFBa0Q7SUFDbEQsTUFBTSxhQUFhLEdBQUcsc0JBQUksQ0FBQyxVQUFVLDBDQUFFLEtBQUssMENBQUcsQ0FBQyxDQUFDLDBDQUFFLGFBQWE7SUFDaEUsSUFBSSxhQUFhLEVBQUUsQ0FBQztRQUNsQixPQUFPLGFBQWE7SUFDdEIsQ0FBQztJQUVELDRCQUE0QjtJQUM1QixJQUFJLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUNkLE9BQU8sSUFBSSxDQUFDLElBQUk7SUFDbEIsQ0FBQztJQUVELFdBQVc7SUFDWCxPQUFPLE9BQU87QUFDaEIsQ0FBQztBQUVELE1BQU0sS0FBSyxHQUFHLDhDQUFHOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztDQWdDaEI7QUFFTSxTQUFTLFNBQVMsQ0FBRSxLQUFxQjs7SUFDOUMsTUFBTSxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUFFLFVBQVUsR0FBRyxLQUFLLEVBQUUsZUFBZSxHQUFHLEtBQUssRUFBRSxTQUFTLEdBQUcsRUFBRSxFQUFFLEtBQUssRUFBRSxpQkFBaUIsRUFBRSxtQkFBbUIsRUFBRSxVQUFVLEVBQUUsa0JBQWtCLEVBQUUsYUFBYSxFQUFFLE1BQU0sRUFBRSxTQUFTLEVBQUUsVUFBVSxFQUFFLGVBQWUsRUFBRSx1QkFBdUIsRUFBRSxhQUFhLEVBQUUsa0JBQWtCLEVBQUUsaUJBQWlCLEVBQUUsV0FBVyxFQUFFLG1CQUFtQixFQUFFLGtCQUFrQixFQUFFLDBCQUEwQixFQUFFLDRCQUE0QixFQUFFLGFBQWEsRUFBRSxPQUFPLEVBQUUseUJBQXlCLEVBQUUsb0JBQW9CLEVBQUUsU0FBUyxFQUFFLGFBQWEsRUFBRSxXQUFXLEVBQUUsZUFBZSxLQUFvQixLQUFLLEVBQXBCLFVBQVUsVUFBSyxLQUFLLEVBQWprQixpakJBQXlqQixDQUFRO0lBQ3ZrQixNQUFNLGNBQWMsR0FBRyw0Q0FBSyxDQUFDLGNBQWMsQ0FBQyw4REFBYyxDQUFDO0lBQzNELE1BQU0sQ0FBQyxLQUFLLEVBQUUsUUFBUSxDQUFDLEdBQUcsNENBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLEVBQUMscUNBQXFDO0lBQ2pGLE1BQU0sQ0FBQyxpQkFBaUIsRUFBRSxvQkFBb0IsQ0FBQyxHQUFHLDRDQUFLLENBQUMsUUFBUSxDQUFzQixPQUFPLENBQUM7SUFFOUYsdUVBQXVFO0lBQ3ZFLE1BQU0sU0FBUyxHQUFHLGFBQWEsSUFBSSxpQkFBaUI7SUFDcEQsTUFBTSxZQUFZLEdBQUcsNENBQUssQ0FBQyxXQUFXLENBQUMsQ0FBQyxHQUF3QixFQUFFLEVBQUU7UUFDbEUsSUFBSSxlQUFlLEVBQUUsQ0FBQztZQUNwQixlQUFlLENBQUMsR0FBRyxDQUFDO1FBQ3RCLENBQUM7YUFBTSxDQUFDO1lBQ04sb0JBQW9CLENBQUMsR0FBRyxDQUFDO1FBQzNCLENBQUM7SUFDSCxDQUFDLEVBQUUsQ0FBQyxlQUFlLENBQUMsQ0FBQztJQUNyQixNQUFNLENBQUMsT0FBTyxFQUFFLFVBQVUsQ0FBQyxHQUFHLDRDQUFLLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQztJQUNsRCxNQUFNLENBQUMsV0FBVyxFQUFFLGNBQWMsQ0FBQyxHQUFHLDRDQUFLLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztJQUN2RCx3RUFBd0U7SUFDeEUsTUFBTSxxQkFBcUIsR0FBRyw0Q0FBSyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUM7SUFDakQsOEVBQThFO0lBQzlFLE1BQU0sb0JBQW9CLEdBQUcsNENBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO0lBQzVDLE1BQU0sYUFBYSxHQUFHLDRDQUFLLENBQUMsTUFBTSxDQUFjLElBQUksQ0FBQztJQUNyRCxNQUFNLFVBQVUsR0FBRyw0Q0FBSyxDQUFDLE1BQU0sQ0FBZSxJQUFJLENBQUM7SUFDbkQsTUFBTSxDQUFDLFFBQVEsRUFBRSxXQUFXLENBQUMsR0FBRyw0Q0FBSyxDQUFDLFFBQVEsQ0FBYSxJQUFJLENBQUM7SUFDaEUsTUFBTSxDQUFDLFVBQVUsRUFBRSxhQUFhLENBQUMsR0FBRyw0Q0FBSyxDQUFDLFFBQVEsQ0FBYSxJQUFJLENBQUM7SUFDcEUsTUFBTSxDQUFDLG9CQUFvQixFQUFFLHVCQUF1QixDQUFDLEdBQUcsNENBQUssQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDO0lBQzVFLE1BQU0seUJBQXlCLEdBQUcsNENBQUssQ0FBQyxNQUFNLENBQWtCLFNBQVMsQ0FBQyxVQUFVLENBQUM7SUFDckYsTUFBTSxnQkFBZ0IsR0FBRyw0Q0FBSyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUM7SUFDM0MsTUFBTSxVQUFVLEdBQUcsNENBQUssQ0FBQyxNQUFNLENBQW9CLFNBQVMsQ0FBQztJQUM3RCxNQUFNLGlCQUFpQixHQUFHLDRDQUFLLENBQUMsTUFBTSxDQUFvQixTQUFTLENBQUM7SUFDcEUsTUFBTSxDQUFDLGdCQUFnQixFQUFFLG1CQUFtQixDQUFDLEdBQUcsNENBQUssQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDO0lBQ3BFLE1BQU0sbUJBQW1CLEdBQUcsNENBQUssQ0FBQyxNQUFNLENBQVMsU0FBUyxDQUFDLFFBQVEsQ0FBQztJQUNwRSw4RUFBOEU7SUFDOUUsTUFBTSxrQkFBa0IsR0FBRyw0Q0FBSyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUM7SUFDOUMsMEZBQTBGO0lBQzFGLE1BQU0sb0JBQW9CLEdBQUcsNENBQUssQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDO0lBQ2hELHdGQUF3RjtJQUN4RixNQUFNLDRCQUE0QixHQUFHLDRDQUFLLENBQUMsTUFBTSxDQUFzQixTQUFTLENBQUM7SUFDakYsc0NBQXNDO0lBQ3RDLE1BQU0sQ0FBQyxjQUFjLEVBQUUsaUJBQWlCLENBQUMsR0FBRyw0Q0FBSyxDQUFDLFFBQVEsQ0FBUyxJQUFJLENBQUM7SUFDeEUsTUFBTSxDQUFDLFNBQVMsRUFBRSxZQUFZLENBQUMsR0FBRyw0Q0FBSyxDQUFDLFFBQVEsQ0FBUyxJQUFJLENBQUM7SUFFOUQsTUFBTSxXQUFXLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUUsb0VBQWtCLEVBQUUsU0FBUyxDQUFDO0lBQ3BFLE1BQU0sRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLFlBQVksRUFBRSxHQUFHLFdBQVc7SUFDaEQsTUFBTSxRQUFRLEdBQVksK0VBQW1CLENBQUMsRUFBRSxRQUFRLEVBQUUsS0FBSyxDQUFDLFFBQVEsRUFBRSxlQUFlLEVBQUUsaUJBQVcsQ0FBQyxhQUFhLDBDQUFFLFlBQVksRUFBRSxDQUFDO0lBRXJJLDBDQUEwQztJQUMxQyw0Q0FBSyxDQUFDLFNBQVMsQ0FBQyxHQUFHLEVBQUU7UUFDbkIsV0FBVyxDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUU7WUFDdEIsS0FBSyxFQUFFLDBCQUEwQjtZQUNqQyxTQUFTO1lBQ1QsT0FBTztZQUNQLFFBQVE7WUFDUixVQUFVLEVBQUUsVUFBVSxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLE1BQU07WUFDMUMsaUJBQWlCLEVBQUUsU0FBUyxDQUFDLFFBQVE7WUFDckMsSUFBSSxFQUFFLCtCQUErQjtTQUN0QyxDQUFDO0lBQ0osQ0FBQyxFQUFFLENBQUMsU0FBUyxFQUFFLE9BQU8sRUFBRSxRQUFRLEVBQUUsVUFBVSxFQUFFLFNBQVMsQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUVsRSwyQ0FBMkM7SUFDM0MsNENBQUssQ0FBQyxTQUFTLENBQUMsR0FBRyxFQUFFO1FBQ25CLElBQUksU0FBUyxLQUFLLE9BQU8sRUFBRSxDQUFDO1lBQzFCLFdBQVcsQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFO2dCQUN0QixLQUFLLEVBQUUsMkJBQTJCO2dCQUNsQyxTQUFTO2dCQUNULGlCQUFpQixFQUFFLFNBQVMsQ0FBQyxRQUFRO2dCQUNyQyxJQUFJLEVBQUUsd0NBQXdDO2FBQy9DLENBQUM7UUFDSixDQUFDO0lBQ0gsQ0FBQyxFQUFFLENBQUMsU0FBUyxFQUFFLFNBQVMsQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUVuQyw0Q0FBSyxDQUFDLGFBQWEsQ0FBQyxHQUFHLEVBQUU7UUFDdkIsNENBQTRDO1FBQzVDLHFFQUEwQixDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUM7SUFDaEQsQ0FBQyxDQUFDO0lBRUYsa0ZBQWtGO0lBQ2xGLE1BQU0sa0JBQWtCLEdBQUcsaURBQVUsQ0FBQyxXQUFXLENBQUMsQ0FBQyxLQUFjLEVBQUUsRUFBRTtRQUNuRSxNQUFNLFVBQVUsR0FBRyxLQUFLLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDO1FBQzFELE9BQU8sVUFBVSxDQUFDLE1BQU0sQ0FBQyxpQkFBaUI7SUFDNUMsQ0FBQyxDQUFDO0lBRUYsK0RBQStEO0lBQy9ELG1HQUFtRztJQUNuRyxvQ0FBb0M7SUFDcEMsTUFBTSx1QkFBdUIsR0FBRyxpREFBVSxDQUFDLFdBQVcsQ0FBQyxDQUFDLEtBQWMsRUFBRSxFQUFFO1FBQ3hFLE1BQU0sVUFBVSxHQUFHLEtBQUssQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUM7UUFDMUQsT0FBTyxVQUFVLENBQUMsTUFBTSxDQUFDLHVCQUF1QjtJQUNsRCxDQUFDLENBQUM7SUFHRiw2REFBNkQ7SUFDN0QseUVBQXlFO0lBQ3pFLDRDQUFLLENBQUMsU0FBUyxDQUFDLEdBQUcsRUFBRTs7UUFDbkIsbURBQW1EO1FBQ25ELElBQUksa0JBQWtCLENBQUMsT0FBTyxFQUFFLENBQUM7WUFDL0IsV0FBVyxDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUU7Z0JBQ3RCLEtBQUssRUFBRSxxQkFBcUI7Z0JBQzVCLE1BQU0sRUFBRSw0QkFBNEI7Z0JBQ3BDLFFBQVEsRUFBRSxLQUFLLENBQUMsUUFBUTtnQkFDeEIsaUJBQWlCLEVBQUUsU0FBUyxDQUFDLFFBQVE7Z0JBQ3JDLFNBQVM7Z0JBQ1QsV0FBVztnQkFDWCxvQkFBb0IsRUFBRSxvQkFBb0IsQ0FBQyxPQUFPO2dCQUNsRCxTQUFTLEVBQUUsSUFBSSxDQUFDLEdBQUcsRUFBRTthQUN0QixDQUFDO1lBQ0YsT0FBTTtRQUNSLENBQUM7UUFFRCxzRUFBc0U7UUFDdEUsaUZBQWlGO1FBQ2pGLE1BQU0sWUFBWSxHQUFHLElBQUk7UUFFekIseUJBQXlCO1FBQ3pCLHVFQUF1RTtRQUN2RSx1Q0FBdUM7UUFDdkMsa0NBQWtDO1FBQ2xDLHFGQUFxRjtRQUNyRiwrRUFBK0U7UUFDL0UsMkVBQTJFO1FBQzNFLE1BQU0sVUFBVSxHQUFHLFlBQVk7WUFDN0IsQ0FBQyxDQUFDLFdBQVcsR0FBRyxDQUFDO1lBQ2pCLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxPQUFPLElBQUksVUFBVSxDQUFDLE9BQU8sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO1FBRXpELFdBQVcsQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFO1lBQ3RCLEtBQUssRUFBRSxtQkFBbUI7WUFDMUIsUUFBUSxFQUFFLEtBQUssQ0FBQyxRQUFRO1lBQ3hCLGlCQUFpQixFQUFFLFNBQVMsQ0FBQyxRQUFRO1lBQ3JDLFNBQVM7WUFDVCxXQUFXO1lBQ1gsb0JBQW9CLEVBQUUsb0JBQW9CLENBQUMsT0FBTztZQUNsRCxZQUFZO1lBQ1osa0JBQWtCO1lBQ2xCLFVBQVU7WUFDVixnQkFBZ0IsRUFBRSxpQkFBVSxDQUFDLE9BQU8sMENBQUUsTUFBTSxLQUFJLENBQUM7WUFDakQsa0JBQWtCLEVBQUUsa0JBQWtCLENBQUMsT0FBTztZQUM5QyxjQUFjLEVBQUUsb0JBQW9CLENBQUMsT0FBTyxJQUFJLFdBQVcsR0FBRyxDQUFDLElBQUksVUFBVSxJQUFJLFNBQVMsS0FBSyxPQUFPO1lBQ3RHLFNBQVMsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFO1NBQ3RCLENBQUM7UUFFRixJQUFJLG9CQUFvQixDQUFDLE9BQU87WUFDNUIsV0FBVyxHQUFHLENBQUM7WUFDZixVQUFVO1lBQ1YsU0FBUyxLQUFLLE9BQU8sRUFBRSxDQUFDO1lBQzFCLFdBQVcsQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFO2dCQUN0QixLQUFLLEVBQUUsdUJBQXVCO2dCQUM5QixRQUFRLEVBQUUsS0FBSyxDQUFDLFFBQVE7Z0JBQ3hCLGlCQUFpQixFQUFFLFNBQVMsQ0FBQyxRQUFRO2dCQUNyQyxPQUFPLEVBQUUsU0FBUztnQkFDbEIsS0FBSyxFQUFFLFNBQVM7Z0JBQ2hCLFdBQVc7Z0JBQ1gsU0FBUyxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUU7YUFDdEIsQ0FBQztZQUNGLFlBQVksQ0FBQyxTQUFTLENBQUM7WUFDdkIsb0JBQW9CLENBQUMsT0FBTyxHQUFHLEtBQUssRUFBQyx3QkFBd0I7WUFDN0QsV0FBVyxDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUU7Z0JBQ3RCLEtBQUssRUFBRSx1QkFBdUI7Z0JBQzlCLFFBQVEsRUFBRSxLQUFLLENBQUMsUUFBUTtnQkFDeEIsaUJBQWlCLEVBQUUsU0FBUyxDQUFDLFFBQVE7Z0JBQ3JDLHlCQUF5QixFQUFFLG9CQUFvQixDQUFDLE9BQU87Z0JBQ3ZELFNBQVMsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFO2FBQ3RCLENBQUM7UUFDSixDQUFDO0lBQ0gsQ0FBQyxFQUFFLENBQUMsV0FBVyxFQUFFLFNBQVMsRUFBRSxrQkFBa0IsQ0FBQyxDQUFDO0lBRWhELHFFQUFxRTtJQUNyRSwyRkFBMkY7SUFDM0YsNENBQUssQ0FBQyxTQUFTLENBQUMsR0FBRyxFQUFFOztRQUNuQiwwQ0FBMEM7UUFDMUMsSUFBSSxDQUFDLGlCQUFpQixJQUFJLENBQUMsU0FBUyxDQUFDLE9BQU8sRUFBRSxDQUFDO1lBQzdDLE9BQU07UUFDUixDQUFDO1FBRUQsMEVBQTBFO1FBQzFFLE1BQU0sZUFBZSxHQUFHLFNBQVMsQ0FBQyxPQUFPO1FBQ3pDLE1BQU0sY0FBYyxHQUFHLFNBQVMsQ0FBQyxPQUFPLEtBQUssSUFBSSxJQUFJLFNBQVMsQ0FBQyxPQUFPLEtBQUssU0FBUztRQUVwRiwyREFBMkQ7UUFDM0QsSUFBSSxjQUFjLEVBQUUsQ0FBQztZQUNuQixNQUFNLGVBQWUsR0FBRyxTQUFTLENBQUMsT0FBTztZQUN6QyxNQUFNLGFBQWEsR0FBRyxlQUFlO1lBQ3JDLE1BQU0sa0JBQWtCLEdBQUcsdUJBQXVCO1lBRWxELElBQUksZUFBZSxLQUFLLGFBQWEsRUFBRSxDQUFDO2dCQUN0QyxXQUFXLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRTtvQkFDdkIsS0FBSyxFQUFFLHlCQUF5QjtvQkFDaEMsZUFBZTtvQkFDZixhQUFhO29CQUNiLGdCQUFnQixFQUFFLGVBQWU7b0JBQ2pDLE9BQU8sRUFBRSw0REFBNEQ7aUJBQ3RFLENBQUM7WUFDSixDQUFDO2lCQUFNLElBQUksa0JBQWtCLEtBQUssU0FBUyxFQUFFLENBQUM7Z0JBQzVDLGtEQUFrRDtnQkFDbEQsTUFBTSxVQUFVLEdBQUcsWUFBTSxhQUFOLE1BQU0sdUJBQU4sTUFBTSxDQUFHLGVBQWUsQ0FBQywwQ0FBRSxLQUFLO2dCQUNuRCxJQUFJLFVBQVUsSUFBSSxVQUFVLENBQUMsTUFBTSxHQUFHLGtCQUFrQixFQUFFLENBQUM7b0JBQ3pELE1BQU0scUJBQXFCLEdBQUcsZ0JBQVUsQ0FBQyxrQkFBa0IsQ0FBQywwQ0FBRSxRQUFRO29CQUN0RSxNQUFNLG1CQUFtQixHQUFHLFNBQVMsQ0FBQyxRQUFRO29CQUM5QyxJQUFJLHFCQUFxQixLQUFLLG1CQUFtQixFQUFFLENBQUM7d0JBQ2xELFdBQVcsQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFOzRCQUN2QixLQUFLLEVBQUUsK0JBQStCOzRCQUN0QyxxQkFBcUI7NEJBQ3JCLG1CQUFtQjs0QkFDbkIsa0JBQWtCOzRCQUNsQixnQkFBZ0IsRUFBRSxlQUFlOzRCQUNqQyxPQUFPLEVBQUUsNkRBQTZEO3lCQUN2RSxDQUFDO29CQUNKLENBQUM7eUJBQU0sQ0FBQzt3QkFDTixXQUFXLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRTs0QkFDdkIsS0FBSyxFQUFFLHdCQUF3Qjs0QkFDL0IsZ0JBQWdCLEVBQUUsZUFBZTs0QkFDakMsT0FBTyxFQUFFLGVBQWU7NEJBQ3hCLHVCQUF1QixFQUFFLGtCQUFrQjs0QkFDM0MsSUFBSSxFQUFFLDRDQUE0Qzt5QkFDbkQsQ0FBQztvQkFDSixDQUFDO2dCQUNILENBQUM7WUFDSCxDQUFDO1FBQ0gsQ0FBQzthQUFNLENBQUM7WUFDTix5Q0FBeUM7WUFDekMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUU7Z0JBQ3ZCLEtBQUssRUFBRSxrQ0FBa0M7Z0JBQ3pDLGdCQUFnQixFQUFFLGVBQWU7Z0JBQ2pDLElBQUksRUFBRSwyREFBMkQ7YUFDbEUsQ0FBQztRQUNKLENBQUM7SUFDSCxDQUFDLEVBQUUsQ0FBQyxpQkFBaUIsRUFBRSxTQUFTLENBQUMsT0FBTyxFQUFFLFNBQVMsQ0FBQyxPQUFPLEVBQUUsU0FBUyxDQUFDLFFBQVEsRUFBRSxlQUFlLEVBQUUsdUJBQXVCLEVBQUUsTUFBTSxDQUFDLENBQUM7SUFFbkksTUFBTSxXQUFXLEdBQW1DLDRDQUFLLENBQUMsT0FBTyxDQUMvRCxHQUFHLEVBQUUsQ0FDSCxvREFBUyxDQUFDO1FBQ1IsWUFBWSxFQUFFLFNBQVMsQ0FBQyxrQkFBa0I7UUFDMUMsZ0JBQWdCLEVBQUUsU0FBUyxDQUFDLGtCQUFrQjtLQUMvQyxDQUFDLEVBQ0osQ0FBQyxTQUFTLENBQUMsa0JBQWtCLENBQUMsQ0FDL0I7SUFFRCxNQUFNLGdCQUFnQixHQUFHLDRDQUFLLENBQUMsV0FBVyxDQUFDLENBQUMsRUFBZSxFQUFFLEVBQUU7O1FBQzdELE1BQU0sU0FBUyxHQUFHLEVBQUUsYUFBRixFQUFFLGNBQUYsRUFBRSxHQUFJLFVBQVU7UUFDbEMsb0dBQW9HO1FBQ3BHLElBQUksZUFBUyxhQUFULFNBQVMsdUJBQVQsU0FBUyxDQUFFLGlCQUFpQixFQUFFLDBDQUFFLGtCQUFrQixFQUFFLENBQUM7WUFDdkQsTUFBTSxHQUFHLEdBQXdCLFNBQWdDO1lBQ2pFLE1BQU0sT0FBTyxHQUFHLFNBQUcsQ0FBQyxxQkFBcUIsbURBQStCO1lBQ3hFLElBQUksT0FBTyxDQUFDLFFBQVEsSUFBSSxJQUFJLEVBQUUsQ0FBQztnQkFDN0IsdUJBQXVCLENBQUMsS0FBSyxDQUFDO1lBQ2hDLENBQUM7aUJBQU0sQ0FBQztnQkFDTix1QkFBdUIsQ0FBQyxJQUFJLENBQUM7WUFDL0IsQ0FBQztRQUNILENBQUM7SUFDSCxDQUFDLEVBQUUsQ0FBQyxVQUFVLENBQUMsQ0FBQztJQUVoQixNQUFNLGtCQUFrQixHQUFHLDRDQUFLLENBQUMsV0FBVyxDQUFDLENBQUMsT0FBZ0IsRUFBRSxFQUFFO1FBQ2hFLFVBQVUsQ0FBQyxPQUFPLENBQUM7UUFDbkIsZ0JBQWdCLEVBQUU7SUFDcEIsQ0FBQyxFQUFFLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztJQUV0QixNQUFNLGdDQUFnQyxHQUFHLDRDQUFLLENBQUMsV0FBVyxDQUFDLENBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxFQUFFO1FBQzNFLE1BQU0sUUFBUSxHQUFHLFNBQVMsQ0FBQyxrQkFBa0I7UUFDN0MsTUFBTSxNQUFNLEdBQUcsS0FBSSxhQUFKLElBQUksdUJBQUosSUFBSSxDQUFFLGFBQWEsRUFBQyxDQUFDLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxhQUFhLFFBQVEsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUk7UUFDdkYsSUFBSSxNQUFNLElBQUksSUFBSSxFQUFFLENBQUMsQ0FBQyx3RUFBd0U7WUFDNUYsT0FBTTtRQUNSLENBQUM7UUFDRCxNQUFNLFNBQVMsR0FBRyxRQUFPLGFBQVAsT0FBTyx1QkFBUCxPQUFPLENBQUUsYUFBYSxFQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLGFBQWEsUUFBUSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSTtRQUNoRyxJQUFJLE9BQU0sYUFBTixNQUFNLHVCQUFOLE1BQU0sQ0FBRSxLQUFLLE9BQUssU0FBUyxhQUFULFNBQVMsdUJBQVQsU0FBUyxDQUFFLEtBQUssR0FBRSxDQUFDO1lBQ3ZDLG1CQUFtQixDQUFDLE1BQU0sQ0FBQztRQUM3QixDQUFDO0lBQ0gsQ0FBQyxFQUFFLENBQUMsU0FBUyxDQUFDLGtCQUFrQixDQUFDLENBQUM7SUFFbEMsTUFBTSxxQkFBcUIsR0FBRyw0Q0FBSyxDQUFDLFdBQVcsQ0FBQyxHQUFTLEVBQUU7UUFDekQsSUFBSSxDQUFDLFFBQVE7WUFBRSxPQUFNO1FBQ3JCLE1BQU0sMEJBQTBCLEdBQUcsSUFBSSxpRUFBMEIsQ0FBQyxLQUFLLENBQUMsUUFBUSxFQUFFLDBEQUFtQixDQUFDLE1BQU0sRUFBRSxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUM1SCxxREFBYyxDQUFDLFdBQVcsRUFBRSxDQUFDLGNBQWMsQ0FBQywwQkFBMEIsQ0FBQztRQUN2RSxNQUFNLHFEQUFjLENBQUMsV0FBVyxFQUFFLENBQUMsY0FBYyxDQUFDLElBQUksd0VBQWlDLENBQUMsS0FBSyxDQUFDLFFBQVEsRUFBRSxFQUFFLEVBQUUsQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUM3SCxDQUFDLEdBQUUsQ0FBQyxLQUFLLENBQUMsUUFBUSxFQUFFLFFBQVEsQ0FBQyxDQUFDO0lBRTlCOzs7Ozs7T0FNRztJQUNILE1BQU0sV0FBVyxHQUFHLDRDQUFLLENBQUMsV0FBVyxDQUFDLFlBQW1DLEVBQUUsaURBQTlCLFNBQWlCLFNBQVM7UUFDckUsV0FBVyxDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUU7WUFDdEIsS0FBSyxFQUFFLG9CQUFvQjtZQUMzQixRQUFRLEVBQUUsS0FBSyxDQUFDLFFBQVE7WUFDeEIsV0FBVyxFQUFFLENBQUMsQ0FBQyxRQUFRO1lBQ3ZCLE1BQU07WUFDTixTQUFTLEVBQUUsSUFBSSxDQUFDLEdBQUcsRUFBRTtTQUN0QixDQUFDO1FBRUYsVUFBVSxDQUFDLE9BQU8sR0FBRyxJQUFJO1FBQ3pCLFFBQVEsYUFBUixRQUFRLHVCQUFSLFFBQVEsQ0FBRSxTQUFTLENBQUMsdURBQWdCLENBQUMsUUFBUSxDQUFDO1FBQzlDLGNBQWMsQ0FBQyxDQUFDLENBQUM7UUFFakIsa0ZBQWtGO1FBQ2xGLHNFQUFzRTtRQUV0RSxtRUFBbUU7UUFDbkUsSUFBSSxDQUFDO1lBQ0gsTUFBTSw4RUFBMkIsQ0FBQyxLQUFLLENBQUMsUUFBUSxFQUFFLFFBQVEsRUFBRSw0QkFBNEIsRUFBRSxhQUFhLENBQUM7WUFDeEcsV0FBVyxDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUU7Z0JBQ3RCLEtBQUssRUFBRSwrQkFBK0I7Z0JBQ3RDLFFBQVEsRUFBRSxLQUFLLENBQUMsUUFBUTtnQkFDeEIsU0FBUyxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUU7YUFDdEIsQ0FBQztRQUNKLENBQUM7UUFBQyxPQUFPLEtBQUssRUFBRSxDQUFDO1lBQ2YsV0FBVyxDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUU7Z0JBQ3RCLEtBQUssRUFBRSxvQ0FBb0M7Z0JBQzNDLFFBQVEsRUFBRSxLQUFLLENBQUMsUUFBUTtnQkFDeEIsS0FBSyxFQUFFLEtBQUssWUFBWSxLQUFLLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUM7Z0JBQzdELFNBQVMsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFO2FBQ3RCLENBQUM7UUFDSixDQUFDO1FBRUQsK0RBQStEO1FBQy9ELElBQUksMEJBQTBCLEVBQUUsQ0FBQztZQUMvQiwwQkFBMEIsQ0FBQyxFQUFFLENBQUM7WUFDOUIsV0FBVyxDQUFDLEdBQUcsQ0FBQyxjQUFjLEVBQUU7Z0JBQzlCLEtBQUssRUFBRSw4Q0FBOEM7Z0JBQ3JELFFBQVEsRUFBRSxLQUFLLENBQUMsUUFBUTthQUN6QixDQUFDO1FBQ0osQ0FBQztRQUVELE1BQU0scUJBQXFCLEVBQUU7UUFDN0IsaURBQWlEO1FBQ2pELFlBQVksQ0FBQyxPQUFPLENBQUM7UUFDckIsUUFBUSxDQUFDLENBQUMsQ0FBQztRQUNYLHFCQUFxQixDQUFDLE9BQU8sR0FBRyxLQUFLLEVBQUMscUNBQXFDO1FBQzNFLGtGQUFrRjtRQUNsRixvQkFBb0IsQ0FBQyxPQUFPLElBQUksQ0FBQztRQUNqQywyQ0FBMkM7UUFDM0MsaUJBQWlCLENBQUMsSUFBSSxDQUFDO1FBQ3ZCLFlBQVksQ0FBQyxJQUFJLENBQUM7UUFFbEIsV0FBVyxDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUU7WUFDdEIsS0FBSyxFQUFFLHNCQUFzQjtZQUM3QixRQUFRLEVBQUUsS0FBSyxDQUFDLFFBQVE7WUFDeEIsU0FBUyxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUU7U0FDdEIsQ0FBQztJQUNKLENBQUMsR0FBRSxDQUFDLFFBQVEsRUFBRSxxQkFBcUIsRUFBRSxLQUFLLENBQUMsUUFBUSxFQUFFLFNBQVMsQ0FBQyxRQUFRLEVBQUUsMEJBQTBCLEVBQUUsNEJBQTRCLEVBQUUsYUFBYSxDQUFDLENBQUM7SUFFbEo7Ozs7OztPQU1HO0lBQ0gsTUFBTSx1QkFBdUIsR0FBRyw0Q0FBSyxDQUFDLFdBQVcsQ0FBQyxDQUFPLEVBQWMsRUFBRSxFQUFFO1FBQ3pFLFdBQVcsQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFO1lBQ3RCLEtBQUssRUFBRSwrQkFBK0I7WUFDdEMsUUFBUSxFQUFFLEtBQUssQ0FBQyxRQUFRO1lBQ3hCLFdBQVc7WUFDWCxTQUFTLEVBQUUsSUFBSSxDQUFDLEdBQUcsRUFBRTtTQUN0QixDQUFDO1FBRUYsZ0dBQWdHO1FBQ2hHLElBQUksQ0FBQyxXQUFXLEtBQUssa0RBQWEsQ0FBQyxjQUFjLElBQUksV0FBVyxLQUFLLGtEQUFhLENBQUMsbUJBQW1CLENBQUM7ZUFDaEcsa0JBQWtCLElBQUksa0JBQWtCLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRSxDQUFDO1lBQzNELFdBQVcsQ0FBQyxHQUFHLENBQUMsY0FBYyxFQUFFO2dCQUM5QixLQUFLLEVBQUUsOERBQThEO2dCQUNyRSxRQUFRLEVBQUUsS0FBSyxDQUFDLFFBQVE7Z0JBQ3hCLFdBQVc7Z0JBQ1gsdUJBQXVCLEVBQUUsa0JBQWtCLENBQUMsTUFBTTthQUNuRCxDQUFDO1lBRUYsYUFBYSxDQUFDLEVBQUUsQ0FBQztZQUNqQixnQkFBZ0IsQ0FBQyxFQUFFLENBQUM7WUFDcEIsUUFBUSxDQUFDLENBQUMsQ0FBQztZQUNYLFlBQVksQ0FBQyxPQUFPLENBQUM7WUFDckIsT0FBTSxDQUFDLHFDQUFxQztRQUM5QyxDQUFDO1FBRUQsb0NBQW9DO1FBQ3BDLFdBQVcsQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFO1lBQ3RCLEtBQUssRUFBRSx1REFBdUQ7WUFDOUQsUUFBUSxFQUFFLEtBQUssQ0FBQyxRQUFRO1lBQ3hCLFNBQVMsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFO1NBQ3RCLENBQUM7UUFDRixNQUFNLFdBQVcsQ0FBQyxrQ0FBa0MsQ0FBQztRQUVyRCxhQUFhLENBQUMsRUFBRSxDQUFDO1FBQ2pCLGdCQUFnQixDQUFDLEVBQUUsQ0FBQztRQUNwQixRQUFRLENBQUMsQ0FBQyxDQUFDO1FBQ1gsWUFBWSxDQUFDLE9BQU8sQ0FBQyxFQUFDLDZDQUE2QztJQUNyRSxDQUFDLEdBQUUsQ0FBQyxnQkFBZ0IsRUFBRSxXQUFXLEVBQUUsV0FBVyxFQUFFLFdBQVcsRUFBRSxrQkFBa0IsRUFBRSxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUM7SUFFakcsTUFBTSw2QkFBNkIsR0FBRyw0Q0FBSyxDQUFDLFdBQVcsQ0FBQyxDQUFPLEVBQWMsRUFBRSxFQUFFOztRQUMvRSxXQUFXLENBQUMsRUFBRSxDQUFDO1FBRWYsa0VBQWtFO1FBQ2xFLElBQUksQ0FBQztZQUNILE1BQU0saUJBQWlCLEdBQUcsRUFBRSxDQUFDLG9CQUFvQixFQUFFO1lBQ25ELE1BQU0sUUFBUSxHQUFHLGlCQUFpQixhQUFqQixpQkFBaUIsdUJBQWpCLGlCQUFpQixDQUFHLENBQUMsQ0FBQztZQUN2QyxJQUFJLFFBQVEsRUFBRSxDQUFDO2dCQUNiLE1BQU0sTUFBTSxHQUFHLFFBQVEsQ0FBQyxpQkFBaUIsRUFBRTtnQkFDM0MsSUFBSSxNQUFNLEVBQUUsQ0FBQztvQkFDWCxpREFBaUQ7b0JBQ2pELENBQUM7b0JBQUMsTUFBYyxDQUFDLG1CQUFtQixHQUFHLE1BQU0sQ0FDNUM7b0JBQUMsTUFBYyxDQUFDLHNCQUFzQixHQUFJLE1BQWMsQ0FBQyxHQUFHLENBQzVEO29CQUFDLE1BQWMsQ0FBQyxxQkFBcUIsR0FBRyxRQUFRO29CQUVqRCxXQUFXLENBQUMsR0FBRyxDQUFDLGdCQUFnQixFQUFFO3dCQUNoQyxLQUFLLEVBQUUsMkJBQTJCO3dCQUNsQyxRQUFRLEVBQUUsS0FBSyxDQUFDLFFBQVE7d0JBQ3hCLFVBQVUsRUFBRSxFQUFFLENBQUMsRUFBRTt3QkFDakIsVUFBVSxFQUFFLFFBQVEsQ0FBQyxFQUFFO3dCQUN2QixRQUFRLEVBQUUsTUFBTSxDQUFDLEVBQUU7d0JBQ25CLFVBQVUsRUFBRSxNQUFNLENBQUMsSUFBSTt3QkFDdkIsWUFBWSxFQUFFLENBQUMsQ0FBRSxNQUFjLENBQUMsR0FBRzt3QkFDbkMsYUFBYSxFQUFHLE1BQWMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLE9BQVEsTUFBYyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsTUFBTTt3QkFDeEUsV0FBVyxFQUFFLE9BQUMsTUFBYyxDQUFDLEdBQUcsMENBQUUsRUFBRSxLQUFJLE1BQU07d0JBQzlDLGdCQUFnQixFQUFFLENBQUMsQ0FBQyxPQUFDLE1BQWMsQ0FBQyxHQUFHLDBDQUFFLElBQUk7d0JBQzdDLGlCQUFpQixFQUFFLENBQUMsQ0FBQyxPQUFDLE1BQWMsQ0FBQyxHQUFHLDBDQUFFLEtBQUs7d0JBQy9DLG9CQUFvQixFQUFFLGFBQUMsTUFBYyxDQUFDLEdBQUcsMENBQUUsS0FBSywwQ0FBRSxNQUFNLEtBQUksQ0FBQzt3QkFDN0QsdUNBQXVDO3dCQUN2QyxhQUFhLEVBQUcsTUFBYyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBRSxNQUFjLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQ2pGLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUM7NEJBQ3BCLE9BQVEsTUFBYyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsS0FBSyxVQUFVLENBQy9DLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRTt3QkFDbkIsa0VBQWtFO3dCQUNsRSxpQkFBaUIsRUFBRSwrRkFBK0Y7d0JBQ2xILFNBQVMsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFO3FCQUN0QixDQUFDO29CQUVGLGdDQUFnQztvQkFDaEMsTUFBTSxPQUFPLEdBQUksTUFBYyxDQUFDLEdBQUc7b0JBQ25DLElBQUksT0FBTyxFQUFFLENBQUM7d0JBQ1osTUFBTSxJQUFJLEdBQUcsT0FBTyxDQUFDLElBQUk7NEJBQ1osQ0FBQyxtQkFBTyxDQUFDLEtBQUssMENBQUUsU0FBUyxtREFBRyxDQUFDLENBQUMsQ0FBQzs0QkFDL0IsQ0FBQyxjQUFPLENBQUMsS0FBSywwQ0FBRSxNQUFNLElBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUM7d0JBRWxFLFdBQVcsQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLEVBQUU7NEJBQ2hDLEtBQUssRUFBRSxnQ0FBZ0M7NEJBQ3ZDLFFBQVEsRUFBRSxLQUFLLENBQUMsUUFBUTs0QkFDeEIsT0FBTyxFQUFFLENBQUMsQ0FBQyxJQUFJOzRCQUNmLFFBQVEsRUFBRSxLQUFJLGFBQUosSUFBSSx1QkFBSixJQUFJLENBQUUsSUFBSSxLQUFJLE1BQU07NEJBQzlCLE1BQU0sRUFBRSxLQUFJLGFBQUosSUFBSSx1QkFBSixJQUFJLENBQUUsRUFBRSxLQUFJLE1BQU07NEJBQzFCLFNBQVMsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFO3lCQUN0QixDQUFDO29CQUNKLENBQUM7Z0JBQ0gsQ0FBQztZQUNILENBQUM7UUFDSCxDQUFDO1FBQUMsT0FBTyxLQUFLLEVBQUUsQ0FBQztZQUNmLFdBQVcsQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLEVBQUU7Z0JBQ2hDLEtBQUssRUFBRSxpQ0FBaUM7Z0JBQ3hDLFFBQVEsRUFBRSxLQUFLLENBQUMsUUFBUTtnQkFDeEIsS0FBSyxFQUFFLEtBQUssWUFBWSxLQUFLLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUM7Z0JBQzdELFVBQVUsRUFBRSxLQUFLLFlBQVksS0FBSyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxTQUFTO2dCQUM1RCxTQUFTLEVBQUUsSUFBSSxDQUFDLEdBQUcsRUFBRTthQUN0QixDQUFDO1FBQ0osQ0FBQztRQUVELDBFQUEwRTtRQUMxRSxJQUFJLDRCQUE0QixJQUFJLHlCQUF5QixFQUFFLENBQUM7WUFDOUQsTUFBTSx5QkFBeUIsQ0FBQyxFQUFFLENBQUM7WUFDbkMsMEVBQTBFO1lBQzFFLHVFQUF1RTtZQUN2RSw2REFBNkQ7UUFDL0QsQ0FBQztRQUVELHVGQUF1RjtRQUN2RiwrRUFBK0U7UUFDL0UsMkVBQTJFO1FBQzNFLElBQUksQ0FBQyxXQUFXLEtBQUssa0RBQWEsQ0FBQyxjQUFjLElBQUksV0FBVyxLQUFLLGtEQUFhLENBQUMsbUJBQW1CLENBQUM7ZUFDaEcsa0JBQWtCLElBQUksa0JBQWtCLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRSxDQUFDO1lBQzNELDBHQUEwRztZQUMxRyxnRkFBZ0Y7WUFDaEYsTUFBTSxLQUFLLEdBQUcsQ0FBQyw0QkFBNEIsSUFBSSx5QkFBeUIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUc7WUFDckYsVUFBVSxDQUFDLEdBQUcsRUFBRTtnQkFDZCxNQUFNLFNBQVMsR0FBRyxFQUE0QjtnQkFDOUMsSUFBSSxTQUFTLElBQUksa0JBQWtCLElBQUksa0JBQWtCLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRSxDQUFDO29CQUNyRSxNQUFNLFNBQVMsR0FBRyxrQkFBa0IsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FLakU7b0JBQUEsQ0FBQyxHQUFTLEVBQUU7d0JBQ1gsSUFBSSxDQUFDOzRCQUNELE1BQU0sMEVBQXVCLENBQzNCLEtBQUssQ0FBQyxRQUFRLEVBQ2QsU0FBUyxFQUNULFNBQVMsRUFDVCxrQkFBa0IsRUFDbEIsS0FBSyxFQUNMLDRCQUE0QixFQUM1QixhQUFhLEVBQ2IsT0FBTyxDQUNSOzRCQUVELDZEQUE2RDs0QkFDN0QsVUFBVSxDQUFDLE9BQU8sR0FBRyxrQkFBa0I7NEJBQ3ZDLGNBQWMsQ0FBQyxrQkFBa0IsQ0FBQyxNQUFNLENBQUM7NEJBRXpDLFdBQVcsQ0FBQyxHQUFHLENBQUMsY0FBYyxFQUFFO2dDQUM5QixLQUFLLEVBQUUsb0RBQW9EO2dDQUMzRCxRQUFRLEVBQUUsS0FBSyxDQUFDLFFBQVE7Z0NBQ3hCLFVBQVUsRUFBRSxTQUFTLENBQUMsRUFBRTtnQ0FDeEIsWUFBWSxFQUFFLGtCQUFrQixDQUFDLE1BQU07NkJBQ3hDLENBQUM7NEJBRUYsMERBQTBEOzRCQUMxRCxVQUFVLENBQUMsR0FBRyxFQUFFOztnQ0FDZCxNQUFNLEVBQUUsR0FBRyx3REFBaUIsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxhQUFhLENBQUMsU0FBUyxDQUFDLEVBQUUsQ0FBQztnQ0FDdEUsTUFBTSxZQUFZLEdBQUcsRUFBRSxhQUFGLEVBQUUsdUJBQUYsRUFBRSxDQUFFLGtCQUFrQixFQUFFO2dDQUM3QyxNQUFNLGVBQWUsR0FBRyxRQUFFLGFBQUYsRUFBRSx1QkFBRixFQUFFLENBQUUsb0JBQW9CLEVBQUUsbUNBQUksRUFBRTtnQ0FFeEQsV0FBVyxDQUFDLEdBQUcsQ0FBQyxjQUFjLEVBQUU7b0NBQzlCLEtBQUssRUFBRSxrQ0FBa0M7b0NBQ3pDLFFBQVEsRUFBRSxLQUFLLENBQUMsUUFBUTtvQ0FDeEIsVUFBVSxFQUFFLFNBQVMsQ0FBQyxFQUFFO29DQUN4QixhQUFhLEVBQUUsa0JBQWtCLENBQUMsTUFBTTtvQ0FDeEMsa0JBQWtCLEVBQUUsYUFBWSxhQUFaLFlBQVksdUJBQVosWUFBWSxDQUFFLE1BQU0sS0FBSSxDQUFDO29DQUM3QyxlQUFlLEVBQUUsZUFBZSxDQUFDLE1BQU07b0NBQ3ZDLFlBQVksRUFBRSxhQUFZLGFBQVosWUFBWSx1QkFBWixZQUFZLENBQUUsTUFBTSxNQUFLLGtCQUFrQixDQUFDLE1BQU07aUNBQ2pFLENBQUM7NEJBQ0osQ0FBQyxFQUFFLEdBQUcsQ0FBQzt3QkFDVCxDQUFDO3dCQUFDLE9BQU8sS0FBSyxFQUFFLENBQUM7NEJBQ2YsV0FBVyxDQUFDLEdBQUcsQ0FBQyxjQUFjLEVBQUU7Z0NBQzlCLEtBQUssRUFBRSxrQ0FBa0M7Z0NBQ3pDLFFBQVEsRUFBRSxLQUFLLENBQUMsUUFBUTtnQ0FDeEIsS0FBSyxFQUFFLEtBQUssWUFBWSxLQUFLLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLGVBQWU7Z0NBQy9ELFVBQVUsRUFBRSxLQUFLLFlBQVksS0FBSyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxTQUFTOzZCQUM3RCxDQUFDO3dCQUNKLENBQUM7b0JBQ0gsQ0FBQyxFQUFDLEVBQUU7Z0JBQ1IsQ0FBQztZQUNILENBQUMsRUFBRSxHQUFHLENBQUM7UUFDVCxDQUFDO0lBQ0gsQ0FBQyxHQUFFLENBQUMsV0FBVyxFQUFFLGtCQUFrQixFQUFFLEtBQUssQ0FBQyxRQUFRLEVBQUUsNEJBQTRCLEVBQUUseUJBQXlCLENBQUMsQ0FBQztJQUU5RyxpR0FBaUc7SUFDakcsNENBQUssQ0FBQyxTQUFTLENBQUMsR0FBRyxFQUFFO1FBQ25CLHNGQUFzRjtRQUN0RixNQUFNLGtCQUFrQixHQUFHLG1CQUFtQixDQUFDLE9BQU8sS0FBSyxTQUFTLENBQUMsUUFBUTtRQUU3RSxtRUFBbUU7UUFDbkUscUdBQXFHO1FBQ3JHLElBQUksa0JBQWtCLElBQUksV0FBVyxHQUFHLENBQUMsSUFBSSxXQUFXLEtBQUssa0RBQWEsQ0FBQyxZQUFZLEVBQUUsQ0FBQztZQUN4Rix5Q0FBeUM7WUFDekMsTUFBTSxXQUFXLEdBQUcsbUJBQW1CLENBQUMsT0FBTztZQUMvQyx3Q0FBd0M7WUFDeEMsbUJBQW1CLENBQUMsT0FBTyxHQUFHLFNBQVMsQ0FBQyxRQUFRO1lBRWhELFdBQVcsQ0FBQyxHQUFHLENBQUMsY0FBYyxFQUFFO2dCQUM5QixLQUFLLEVBQUUsMkNBQTJDO2dCQUNsRCxRQUFRLEVBQUUsS0FBSyxDQUFDLFFBQVE7Z0JBQ3hCLFdBQVc7Z0JBQ1gsV0FBVyxFQUFFLFNBQVMsQ0FBQyxRQUFRO2dCQUMvQixXQUFXO2FBQ1osQ0FBQztZQUVGLDRFQUE0RTtZQUM1RSxvRUFBb0U7WUFDcEUsSUFBSSxDQUFDO2dCQUNILFdBQVcsQ0FBQyw0QkFBNEIsQ0FBQztZQUMzQyxDQUFDO1lBQUMsT0FBTyxLQUFLLEVBQUUsQ0FBQztnQkFDZixzRUFBc0U7Z0JBQ3RFLGtFQUFrRTtnQkFDbEUsZ0ZBQWdGO2dCQUNoRiw0Q0FBNEM7Z0JBQzVDLFdBQVcsQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFO29CQUN0QixLQUFLLEVBQUUsNkJBQTZCO29CQUNwQyxLQUFLLEVBQUUsS0FBSyxZQUFZLEtBQUssQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQztvQkFDN0QsSUFBSSxFQUFFLDZDQUE2QztpQkFDcEQsQ0FBQztnQkFDRixJQUFJLElBQXNDLEVBQUUsQ0FBQztvQkFDM0MsT0FBTyxDQUFDLElBQUksQ0FBQyxtRUFBbUUsRUFBRSxLQUFLLENBQUM7Z0JBQzFGLENBQUM7Z0JBQ0QsNkRBQTZEO1lBQy9ELENBQUM7UUFDSCxDQUFDO2FBQU0sSUFBSSxrQkFBa0IsRUFBRSxDQUFDO1lBQzlCLCtGQUErRjtZQUMvRixtQkFBbUIsQ0FBQyxPQUFPLEdBQUcsU0FBUyxDQUFDLFFBQVE7WUFFaEQsSUFBSSxXQUFXLEtBQUssa0RBQWEsQ0FBQyxjQUFjLElBQUksV0FBVyxLQUFLLGtEQUFhLENBQUMsbUJBQW1CLEVBQUUsQ0FBQztnQkFDdEcsV0FBVyxDQUFDLEdBQUcsQ0FBQyxjQUFjLEVBQUU7b0JBQzlCLEtBQUssRUFBRSxnREFBZ0Q7b0JBQ3ZELFFBQVEsRUFBRSxLQUFLLENBQUMsUUFBUTtvQkFDeEIsV0FBVztvQkFDWCxXQUFXLEVBQUUsbUJBQW1CLENBQUMsT0FBTztvQkFDeEMsV0FBVyxFQUFFLFNBQVMsQ0FBQyxRQUFRO29CQUMvQix1QkFBdUIsRUFBRSxtQkFBa0IsYUFBbEIsa0JBQWtCLHVCQUFsQixrQkFBa0IsQ0FBRSxNQUFNLEtBQUksQ0FBQztpQkFDekQsQ0FBQztZQUNKLENBQUM7UUFDSCxDQUFDO0lBQ0gsQ0FBQyxFQUFFLENBQUMsU0FBUyxDQUFDLFFBQVEsRUFBRSxXQUFXLEVBQUUsV0FBVyxFQUFFLFdBQVcsRUFBRSxrQkFBa0IsRUFBRSxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUM7SUFFbkcsTUFBTSxTQUFTLEdBQUcsNENBQUssQ0FBQyxXQUFXLENBQUMsWUFBNkIsRUFBRSxpREFBeEIsWUFBWSxHQUFHLEtBQUs7UUFDN0QsSUFBSSxZQUFZLEVBQUUsQ0FBQztZQUNqQixzRUFBc0U7WUFDdEUsTUFBTSxXQUFXLENBQUMsd0JBQXdCLENBQUM7WUFDM0MsT0FBTTtRQUNSLENBQUM7UUFDRCwwRUFBMEU7UUFDMUUsMEVBQTBFO1FBQzFFLGtCQUFrQixDQUFDLE9BQU8sR0FBRyxJQUFJO1FBQ2pDLFlBQVksQ0FBQyxPQUFPLENBQUM7UUFDckIscUNBQXFDO1FBQ3JDLFVBQVUsQ0FBQyxHQUFHLEVBQUU7WUFDZCxrQkFBa0IsQ0FBQyxPQUFPLEdBQUcsS0FBSztRQUNwQyxDQUFDLEVBQUUsR0FBRyxDQUFDO1FBQ1AsOENBQThDO1FBQzlDLG9FQUFvRTtRQUNwRSxJQUFJLENBQUMsWUFBWSxJQUFJLFdBQVcsR0FBRyxDQUFDLEVBQUUsQ0FBQztZQUNyQyxRQUFRLENBQUMsQ0FBQyxDQUFDLEVBQUMseUJBQXlCO1FBQ3ZDLENBQUM7UUFDRCw2Q0FBTSxDQUFDLEtBQUssQ0FBQyxHQUFHLEVBQUU7WUFDaEIscUVBQTBCLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQztRQUNoRCxDQUFDLENBQUM7SUFDSixDQUFDLEdBQUUsQ0FBQyxXQUFXLEVBQUUsV0FBVyxDQUFDLENBQUM7SUFFOUI7Ozs7Ozs7O09BUUc7SUFDSCxNQUFNLGVBQWUsR0FBRyw0Q0FBSyxDQUFDLFdBQVcsQ0FBQyxDQUFDLEdBQXdCLEVBQUUsS0FBd0IsRUFBRSxFQUFFO1FBQy9GLFdBQVcsQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFO1lBQ3RCLEtBQUssRUFBRSxZQUFZO1lBQ25CLEdBQUc7WUFDSCxVQUFVLEVBQUUsU0FBUztZQUNyQixXQUFXO1lBQ1gsU0FBUyxFQUFFLEtBQUssYUFBTCxLQUFLLHVCQUFMLEtBQUssQ0FBRSxJQUFJO1NBQ3ZCLENBQUM7UUFFRixJQUFJLEtBQUssRUFBRSxDQUFDO1lBQ1YsS0FBSyxDQUFDLGNBQWMsRUFBRTtZQUN0QixLQUFLLENBQUMsZUFBZSxFQUFFO1FBQ3pCLENBQUM7UUFDRCwyREFBMkQ7UUFDM0QsSUFBSSxHQUFHLEtBQUssU0FBUyxJQUFJLFdBQVcsS0FBSyxDQUFDLEVBQUUsQ0FBQztZQUMzQyxXQUFXLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBRTtnQkFDdEIsS0FBSyxFQUFFLG9CQUFvQjtnQkFDM0IsTUFBTSxFQUFFLFlBQVk7Z0JBQ3BCLEdBQUc7Z0JBQ0gsV0FBVzthQUNaLENBQUM7WUFDRixPQUFNO1FBQ1IsQ0FBQztRQUVELGlGQUFpRjtRQUNqRixrQkFBa0IsQ0FBQyxPQUFPLEdBQUcsSUFBSTtRQUNqQyxZQUFZLENBQUMsR0FBRyxDQUFDO1FBRWpCLDJFQUEyRTtRQUMzRSwwRUFBMEU7UUFDMUUsVUFBVSxDQUFDLEdBQUcsRUFBRTtZQUNkLGtCQUFrQixDQUFDLE9BQU8sR0FBRyxLQUFLO1FBQ3BDLENBQUMsRUFBRSxHQUFHLENBQUM7UUFFUCxpREFBaUQ7UUFDakQsMkVBQTJFO0lBQzdFLENBQUMsRUFBRSxDQUFDLFdBQVcsRUFBRSxTQUFTLENBQUMsQ0FBQztJQUU1Qjs7Ozs7Ozs7T0FRRztJQUNILE1BQU0sZ0JBQWdCLEdBQUcsNENBQUssQ0FBQyxXQUFXLENBQUMsQ0FBTyxPQUF3QixFQUFFLGFBQStCLEVBQUUscUJBQStCLEVBQUUsRUFBRTs7UUFDOUksa0RBQWtEO1FBQ2xELGlCQUFpQixDQUFDLElBQUksQ0FBQztRQUN2QixZQUFZLENBQUMsSUFBSSxDQUFDO1FBRWxCLFdBQVcsQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFO1lBQ3RCLEtBQUssRUFBRSx3QkFBd0I7WUFDL0IsUUFBUSxFQUFFLEtBQUssQ0FBQyxRQUFRO1lBQ3hCLFdBQVc7WUFDWCxTQUFTLEVBQUUsSUFBSSxDQUFDLEdBQUcsRUFBRTtTQUN0QixDQUFDO1FBRUYsK0RBQStEO1FBQy9ELDRCQUE0QixDQUFDLE9BQU8sR0FBRyxxQkFBcUI7UUFFNUQseUJBQXlCLENBQUMsT0FBTyxHQUFHLE9BQU87UUFDM0MsZ0JBQWdCLENBQUMsT0FBTyxHQUFHLGFBQWE7UUFDeEMsc0JBQXNCO1FBQ3RCLE1BQU0sU0FBUyxHQUFHLFFBQWtDO1FBRXBELDZFQUE2RTtRQUM3RSx1RUFBdUU7UUFDdkUsSUFBSSx1QkFBdUIsR0FBd0IsRUFBRTtRQUNyRCxJQUFJLFdBQVcsS0FBSyxrREFBYSxDQUFDLGNBQWMsSUFBSSxXQUFXLEtBQUssa0RBQWEsQ0FBQyxtQkFBbUIsRUFBRSxDQUFDO1lBQ3RHLDJCQUEyQjtZQUMzQix1REFBdUQ7WUFDdkQsZ0ZBQWdGO1lBQ2hGLE1BQU0sUUFBUSxHQUFHLGtCQUFrQixJQUFJLEVBQUU7WUFDekMsTUFBTSxNQUFNLEdBQUcsU0FBUSxhQUFSLFFBQVEsdUJBQVIsUUFBUSxDQUFFLGtCQUFrQixFQUF5QixLQUFJLEVBQUU7WUFFMUUsdUJBQXVCLEdBQUcsUUFBUSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsTUFBTTtZQUVqRSxXQUFXLENBQUMsR0FBRyxDQUFDLGNBQWMsRUFBRTtnQkFDOUIsS0FBSyxFQUFFLHNDQUFzQztnQkFDN0MsUUFBUSxFQUFFLEtBQUssQ0FBQyxRQUFRO2dCQUN4QixXQUFXO2dCQUNYLGFBQWEsRUFBRSxRQUFRLENBQUMsTUFBTTtnQkFDOUIsV0FBVyxFQUFFLE1BQU0sQ0FBQyxNQUFNO2dCQUMxQixrQkFBa0IsRUFBRSx1QkFBdUIsQ0FBQyxNQUFNO2dCQUNsRCxhQUFhLEVBQUUsb0NBQXVCLENBQUMsQ0FBQyxDQUFDLDBDQUFFLEtBQUssa0RBQUksS0FBSSxNQUFNO2dCQUM5RCxZQUFZLEVBQUUsdUJBQXVCLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLFdBQUMsY0FBQyxDQUFDLEtBQUssaURBQUksSUFBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDO2dCQUN4RSxVQUFVLEVBQUUsUUFBUSxDQUFDLEVBQUU7Z0JBQ3ZCLFNBQVMsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFO2FBQ3RCLENBQUM7UUFDSixDQUFDO1FBRUQsdURBQXVEO1FBQ3ZELG9HQUFvRztRQUNwRyxJQUFJLFdBQVcsS0FBSyxrREFBYSxDQUFDLFlBQVksRUFBRSxDQUFDO1lBQy9DLFdBQVcsQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFO2dCQUN0QixLQUFLLEVBQUUsZ0RBQWdEO2dCQUN2RCxRQUFRLEVBQUUsS0FBSyxDQUFDLFFBQVE7Z0JBQ3hCLFNBQVMsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFO2FBQ3RCLENBQUM7WUFDRixNQUFNLFdBQVcsQ0FBQywyQkFBMkIsQ0FBQztRQUNoRCxDQUFDO1FBRUQsb0JBQW9CO1FBQ3BCLFFBQVEsQ0FBQyxDQUFDLENBQUM7UUFFWCxxRUFBcUU7UUFDckUsNkVBQTZFO1FBQzdFLE1BQU0sY0FBYyxHQUFHLGtCQUFDLFNBQWlCLEVBQUMsaUJBQWlCLGtEQUFJLG1DQUFJLEtBQUs7UUFDeEUsSUFBSSxRQUFRLEdBQUcsY0FBYztRQUM3QixNQUFNLFdBQVcsR0FBRyxrRUFBbUIsQ0FBQyxTQUFTLEVBQUUsT0FBTyxFQUFFLGFBQWEsRUFBRSxXQUFXLEVBQUUsQ0FBQyxFQUFFLFFBQVEsQ0FBQztRQUNwRyxhQUFhLENBQUMsT0FBTyxHQUFHLFdBQVc7UUFFbkMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUU7WUFDdEIsS0FBSyxFQUFFLGtDQUFrQztZQUN6QyxRQUFRLEVBQUUsS0FBSyxDQUFDLFFBQVE7WUFDeEIsS0FBSyxFQUFFLFdBQVcsQ0FBQyxLQUFLO1lBQ3hCLFdBQVc7WUFDWCxTQUFTLEVBQUUsSUFBSSxDQUFDLEdBQUcsRUFBRTtTQUN0QixDQUFDO1FBQ0YsMkVBQTJFO1FBQzNFLFNBQVMsQ0FBQyxTQUFTLENBQUMsdURBQWdCLENBQUMsUUFBUSxDQUFDO1FBQzlDLFNBQVMsQ0FBQyxjQUFjLENBQUMsdURBQWdCLENBQUMsUUFBUSxDQUFDO1FBQ25ELElBQUksZ0JBQWdCLEdBQUcsQ0FBQyxFQUFDLHFEQUFxRDtRQUM5RSxNQUFNLFNBQVMsR0FBRyxXQUFXLENBQUMsR0FBRyxFQUFFO1FBRW5DLFdBQVcsQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFO1lBQ3RCLEtBQUssRUFBRSx3QkFBd0I7WUFDL0IsUUFBUSxFQUFFLEtBQUssQ0FBQyxRQUFRO1lBQ3hCLFdBQVc7WUFDWCxLQUFLLEVBQUUsV0FBVyxDQUFDLEtBQUs7WUFDeEIsU0FBUyxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUU7U0FDdEIsQ0FBQztRQUVGLDhFQUE4RTtRQUM5RSwwRkFBMEY7UUFDMUYsU0FBUyxDQUFDLGlCQUFpQixDQUFDLGFBQWEsQ0FBQyxPQUFPLEVBQUUsS0FBSyxDQUFDLFFBQVEsQ0FBQztRQUVsRSxNQUFNLGNBQWMsR0FBRyxXQUFXLENBQUMsR0FBRyxFQUFFO1FBQ3hDLDJEQUFZLENBQUMsS0FBSyxDQUFDLFFBQVEsRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLGFBQWEsQ0FBQyxPQUFPLENBQUM7YUFDdEUsSUFBSSxDQUFDLENBQU8sTUFBTSxFQUFFLEVBQUU7O1lBQ3JCLE1BQU0sZUFBZSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLEdBQUcsRUFBRSxHQUFHLGNBQWMsQ0FBQztZQUN0RSxNQUFNLG1CQUFtQixHQUFHLFdBQVcsQ0FBQyxHQUFHLEVBQUU7WUFFN0MsZ0JBQWdCLEdBQUcsYUFBTSxDQUFDLE9BQU8sMENBQUUsTUFBTSxLQUFJLENBQUM7WUFFOUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxjQUFjLEVBQUU7Z0JBQzlCLEtBQUssRUFBRSwwQkFBMEI7Z0JBQ2pDLFFBQVEsRUFBRSxLQUFLLENBQUMsUUFBUTtnQkFDeEIsV0FBVztnQkFDWCxlQUFlLEVBQUUsZ0JBQWdCO2dCQUNqQyxlQUFlO2dCQUNmLHFCQUFxQixFQUFFLHVCQUF1QixDQUFDLE1BQU07Z0JBQ3JELFNBQVMsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFO2FBQ3RCLENBQUM7WUFFRixJQUFJLGdCQUFnQixHQUFHLE1BQU0sQ0FBQyxPQUFPLElBQUksRUFBRTtZQUMzQyxJQUFJLE9BQU8sR0FBRyxRQUFRO1lBRXRCLGdGQUFnRjtZQUNoRixJQUFJLFdBQVcsS0FBSyxrREFBYSxDQUFDLGNBQWMsSUFBSSxNQUFNLENBQUMsT0FBTyxJQUFJLE1BQU0sQ0FBQyxPQUFPLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRSxDQUFDO2dCQUNoRyxJQUFJLENBQUM7b0JBQ0gsV0FBVyxDQUFDLEdBQUcsQ0FBQyxjQUFjLEVBQUU7d0JBQzlCLEtBQUssRUFBRSxvQ0FBb0M7d0JBQzNDLFFBQVEsRUFBRSxLQUFLLENBQUMsUUFBUTt3QkFDeEIsYUFBYSxFQUFFLHVCQUF1QixDQUFDLE1BQU07d0JBQzdDLFdBQVcsRUFBRSx1QkFBdUIsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsV0FBQyxjQUFDLENBQUMsS0FBSyxpREFBSSxJQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7d0JBQ3RFLFFBQVEsRUFBRSxNQUFNLENBQUMsT0FBTyxDQUFDLE1BQU07d0JBQy9CLE1BQU0sRUFBRSxNQUFNLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQU0sRUFBRSxFQUFFLFdBQUMsY0FBQyxDQUFDLEtBQUssaURBQUksSUFBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO3dCQUMvRCxTQUFTLEVBQUUsSUFBSSxDQUFDLEdBQUcsRUFBRTtxQkFDdEIsQ0FBQztvQkFDRixnRUFBZ0U7b0JBQ2hFLE1BQU0sYUFBYSxHQUFHLHVGQUEyQixDQUMvQyxRQUFrQyxFQUFFLGtDQUFrQztvQkFDdEUsTUFBTSxDQUFDLE9BQThCLEVBQ3JDLHVCQUF1QixDQUFDLG9DQUFvQztxQkFDN0Q7b0JBRUQsZ0JBQWdCLEdBQUcsYUFBYTtvQkFFaEMsZ0ZBQWdGO29CQUNoRixJQUFJLDBCQUEwQixFQUFFLENBQUM7d0JBQy9CLDBCQUEwQixDQUFDLGFBQWEsQ0FBQztvQkFDM0MsQ0FBQztvQkFFRCxXQUFXLENBQUMsR0FBRyxDQUFDLGNBQWMsRUFBRTt3QkFDOUIsS0FBSyxFQUFFLG9DQUFvQzt3QkFDM0MsUUFBUSxFQUFFLEtBQUssQ0FBQyxRQUFRO3dCQUN4QixrQkFBa0IsRUFBRSxhQUFhLENBQUMsTUFBTTt3QkFDeEMsU0FBUyxFQUFFLGFBQWEsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsV0FBQyxjQUFDLENBQUMsS0FBSyxpREFBSSxJQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUM7d0JBQzNELFNBQVMsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFO3FCQUN0QixDQUFDO2dCQUNKLENBQUM7Z0JBQUMsT0FBTyxLQUFLLEVBQUUsQ0FBQztvQkFDZixXQUFXLENBQUMsR0FBRyxDQUFDLGNBQWMsRUFBRTt3QkFDOUIsS0FBSyxFQUFFLGdCQUFnQjt3QkFDdkIsUUFBUSxFQUFFLEtBQUssQ0FBQyxRQUFRO3dCQUN4QixLQUFLLEVBQUUsS0FBSyxZQUFZLEtBQUssQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsZUFBZTt3QkFDL0QsVUFBVSxFQUFFLEtBQUssWUFBWSxLQUFLLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLFNBQVM7cUJBQzdELENBQUM7b0JBQ0Ysd0NBQXdDO29CQUN4QyxnQkFBZ0IsR0FBRyxNQUFNLENBQUMsT0FBTztnQkFDbkMsQ0FBQztZQUNILENBQUM7aUJBQU0sSUFBSSxXQUFXLEtBQUssa0RBQWEsQ0FBQyxtQkFBbUIsRUFBRSxDQUFDO2dCQUM3RCwyRkFBMkY7Z0JBQzNGLElBQUksQ0FBQztvQkFDSCxXQUFXLENBQUMsR0FBRyxDQUFDLGNBQWMsRUFBRTt3QkFDOUIsS0FBSyxFQUFFLDRCQUE0Qjt3QkFDbkMsUUFBUSxFQUFFLEtBQUssQ0FBQyxRQUFRO3dCQUN4QixhQUFhLEVBQUUsdUJBQXVCLENBQUMsTUFBTTt3QkFDN0MsV0FBVyxFQUFFLGFBQU0sQ0FBQyxPQUFPLDBDQUFFLE1BQU0sS0FBSSxDQUFDO3FCQUN6QyxDQUFDO29CQUNGLHNEQUFzRDtvQkFDdEQsSUFBSSx1QkFBdUIsQ0FBQyxNQUFNLEtBQUssQ0FBQyxFQUFFLENBQUM7d0JBQ3pDLFdBQVcsQ0FBQyxHQUFHLENBQUMsY0FBYyxFQUFFOzRCQUM5QixLQUFLLEVBQUUsb0NBQW9DOzRCQUMzQyxRQUFRLEVBQUUsS0FBSyxDQUFDLFFBQVE7NEJBQ3hCLGlCQUFpQixFQUFFLGFBQU0sQ0FBQyxPQUFPLDBDQUFFLE1BQU0sS0FBSSxDQUFDOzRCQUM5QyxJQUFJLEVBQUUsK0NBQStDO3lCQUN0RCxDQUFDO3dCQUNGLG9FQUFvRTt3QkFDcEUsZ0JBQWdCLEdBQUcsRUFBRTtvQkFDdkIsQ0FBQzt5QkFBTSxJQUFJLE1BQU0sQ0FBQyxPQUFPLElBQUksTUFBTSxDQUFDLE9BQU8sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUM7d0JBQ3ZELG1EQUFtRDt3QkFDbkQsTUFBTSxnQkFBZ0IsR0FBRyx3RkFBNEIsQ0FDbkQsUUFBa0MsRUFBRSxrQ0FBa0M7d0JBQ3RFLE1BQU0sQ0FBQyxPQUE4QixFQUNyQyx1QkFBdUIsQ0FBQyxvQ0FBb0M7eUJBQzdEO3dCQUVELGdCQUFnQixHQUFHLGdCQUFnQjt3QkFFbkMsMENBQTBDO3dCQUMxQyxJQUFJLDBCQUEwQixFQUFFLENBQUM7NEJBQy9CLDBCQUEwQixDQUFDLGdCQUFnQixDQUFDO3dCQUM5QyxDQUFDO3dCQUVELHVFQUF1RTt3QkFDdkUsaUZBQWlGO3dCQUNqRiw2RkFBaUMsQ0FDL0IsS0FBSyxDQUFDLFFBQVEsRUFDZCxNQUFNLENBQUMsT0FBOEIsRUFDckMsUUFBa0MsRUFDbEMsNEJBQTRCLEVBQzVCLGFBQWEsQ0FDZDt3QkFFRCxXQUFXLENBQUMsR0FBRyxDQUFDLGNBQWMsRUFBRTs0QkFDOUIsS0FBSyxFQUFFLHNCQUFzQjs0QkFDN0IsUUFBUSxFQUFFLEtBQUssQ0FBQyxRQUFROzRCQUN4QiwrQkFBK0IsRUFBRSx1QkFBdUIsQ0FBQyxNQUFNOzRCQUMvRCxpQkFBaUIsRUFBRSxNQUFNLENBQUMsT0FBTyxDQUFDLE1BQU07NEJBQ3hDLHFCQUFxQixFQUFFLGdCQUFnQixDQUFDLE1BQU07NEJBQzlDLGNBQWMsRUFBRSx1QkFBdUIsQ0FBQyxNQUFNLEdBQUcsZ0JBQWdCLENBQUMsTUFBTTs0QkFDeEUsVUFBVSxFQUFFLFFBQVEsQ0FBQyxFQUFFOzRCQUN2Qix5QkFBeUIsRUFBRSxJQUFJOzRCQUMvQix1QkFBdUIsRUFBRSxJQUFJO3lCQUM5QixDQUFDO3dCQUVGLHdFQUF3RTt3QkFDeEUsSUFBSSxnQkFBZ0IsQ0FBQyxNQUFNLEtBQUssQ0FBQyxFQUFFLENBQUM7NEJBQ2xDLFdBQVcsQ0FBQyxHQUFHLENBQUMsY0FBYyxFQUFFO2dDQUM5QixLQUFLLEVBQUUsaUNBQWlDO2dDQUN4QyxRQUFRLEVBQUUsS0FBSyxDQUFDLFFBQVE7Z0NBQ3hCLElBQUksRUFBRSxpREFBaUQ7NkJBQ3hELENBQUM7NEJBQ0YseUNBQXlDOzRCQUN6QyxJQUFJLDBCQUEwQixFQUFFLENBQUM7Z0NBQy9CLDBCQUEwQixDQUFDLEVBQUUsQ0FBQzs0QkFDaEMsQ0FBQzt3QkFDSCxDQUFDO29CQUNILENBQUM7eUJBQU0sQ0FBQzt3QkFDTixnREFBZ0Q7d0JBQ2hELFdBQVcsQ0FBQyxHQUFHLENBQUMsY0FBYyxFQUFFOzRCQUM5QixLQUFLLEVBQUUsOEJBQThCOzRCQUNyQyxRQUFRLEVBQUUsS0FBSyxDQUFDLFFBQVE7NEJBQ3hCLCtCQUErQixFQUFFLHVCQUF1QixDQUFDLE1BQU07NEJBQy9ELElBQUksRUFBRSxrREFBa0Q7eUJBQ3pELENBQUM7d0JBQ0YsOENBQThDO3dCQUM5QyxnQkFBZ0IsR0FBRyx1QkFBdUI7b0JBQzVDLENBQUM7Z0JBQ0gsQ0FBQztnQkFBQyxPQUFPLEtBQUssRUFBRSxDQUFDO29CQUNmLFdBQVcsQ0FBQyxHQUFHLENBQUMsY0FBYyxFQUFFO3dCQUM5QixLQUFLLEVBQUUsbUJBQW1CO3dCQUMxQixRQUFRLEVBQUUsS0FBSyxDQUFDLFFBQVE7d0JBQ3hCLEtBQUssRUFBRSxLQUFLLFlBQVksS0FBSyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxlQUFlO3dCQUMvRCxVQUFVLEVBQUUsS0FBSyxZQUFZLEtBQUssQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsU0FBUztxQkFDN0QsQ0FBQztvQkFDRiw4Q0FBOEM7b0JBQzlDLGdCQUFnQixHQUFHLE1BQU0sQ0FBQyxPQUFPLElBQUksRUFBRTtnQkFDekMsQ0FBQztZQUNILENBQUM7aUJBQU0sSUFBSSxXQUFXLEtBQUssa0RBQWEsQ0FBQyxZQUFZLEVBQUUsQ0FBQztnQkFDdEQseURBQXlEO2dCQUN6RCxJQUFJLDBCQUEwQixFQUFFLENBQUM7b0JBQy9CLDBCQUEwQixDQUFDLEVBQUUsQ0FBQztnQkFDaEMsQ0FBQztZQUNILENBQUM7WUFFRCxVQUFVLENBQUMsT0FBTyxHQUFHLGdCQUFnQjtZQUNyQyw2Q0FBNkM7WUFDN0MscUJBQXFCLENBQUMsT0FBTyxHQUFHLEtBQUs7WUFFckMsa0NBQWtDO1lBQ2xDLDJDQUEyQztZQUMzQywyR0FBMkc7WUFDM0csdUNBQXVDO1lBQ3ZDLElBQUksZ0JBQWdCLElBQUksZ0JBQWdCLENBQUMsTUFBTSxHQUFHLENBQUMsSUFBSSxPQUFPLEVBQUUsQ0FBQztnQkFDL0QsTUFBTSxpQkFBaUIsR0FBRyxnQkFBZ0IsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsS0FBSyxFQUFFLENBQUM7Z0JBRXhFLDhGQUE4RjtnQkFDOUYsMkVBQTJFO2dCQUMzRSxJQUFJLFdBQVcsS0FBSyxrREFBYSxDQUFDLG1CQUFtQixFQUFFLENBQUM7b0JBQ3RELG9GQUFvRjtvQkFDcEYsOERBQThEO29CQUM5RCxJQUFJLENBQUM7d0JBQ0gsSUFBSSxPQUFPLE9BQU8sQ0FBQyxrQkFBa0IsS0FBSyxVQUFVLEVBQUUsQ0FBQzs0QkFDckQsT0FBTyxDQUFDLGtCQUFrQixDQUFDLGlCQUFpQixFQUFFLGdCQUF1QyxDQUFDO3dCQUN4RixDQUFDO3dCQUNELHFCQUFxQixDQUFDLE9BQU8sR0FBRyxJQUFJO3dCQUNwQyxXQUFXLENBQUMsR0FBRyxDQUFDLGNBQWMsRUFBRTs0QkFDOUIsS0FBSyxFQUFFLHlDQUF5Qzs0QkFDaEQsUUFBUSxFQUFFLEtBQUssQ0FBQyxRQUFROzRCQUN4QixXQUFXLEVBQUUsZ0JBQWdCLENBQUMsTUFBTTt5QkFDckMsQ0FBQztvQkFDSixDQUFDO29CQUFDLE9BQU8sS0FBSyxFQUFFLENBQUM7d0JBQ2YsV0FBVyxDQUFDLEdBQUcsQ0FBQyxjQUFjLEVBQUU7NEJBQzlCLEtBQUssRUFBRSx1Q0FBdUM7NEJBQzlDLFFBQVEsRUFBRSxLQUFLLENBQUMsUUFBUTs0QkFDeEIsS0FBSyxFQUFFLEtBQUssWUFBWSxLQUFLLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLGVBQWU7eUJBQ2hFLENBQUM7b0JBQ0osQ0FBQztnQkFDSCxDQUFDO3FCQUFNLENBQUM7b0JBQ04sd0RBQXdEO29CQUN4RCxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsQ0FBQyx3QkFBd0I7cUJBQy9DO29CQUFBLENBQUMsR0FBUyxFQUFFO3dCQUNYLElBQUksQ0FBQzs0QkFDSCxNQUFNLDBFQUF1QixDQUMzQixLQUFLLENBQUMsUUFBUSxFQUNkLE9BQU8sRUFDUCxpQkFBaUIsRUFDakIsZ0JBQXVDLEVBQ3ZDLEtBQUssRUFDTCw0QkFBNEIsRUFDNUIsYUFBYSxFQUNiLE9BQU8sQ0FDUjs0QkFDRCxxQkFBcUIsQ0FBQyxPQUFPLEdBQUcsSUFBSSxFQUFDLG1CQUFtQjs0QkFFeEQseUVBQXlFOzRCQUN6RSw2RUFBNkU7NEJBQzdFLHlFQUFzQixDQUFDLEtBQUssQ0FBQyxRQUFRLEVBQUUsaUJBQWlCLEVBQUUsT0FBTyxFQUFFLFNBQVMsQ0FBQyxRQUFRLENBQUM7d0JBQ3hGLENBQUM7d0JBQUMsT0FBTyxLQUFLLEVBQUUsQ0FBQzs0QkFDZixNQUFNLFlBQVksR0FBRyxLQUFLLFlBQVksS0FBSyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxnQ0FBZ0M7NEJBQzlGLGlCQUFpQixDQUFDLFlBQVksQ0FBQzs0QkFDL0IsV0FBVyxDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUU7Z0NBQ3RCLEtBQUssRUFBRSxrQkFBa0I7Z0NBQ3pCLEtBQUssRUFBRSxZQUFZO2dDQUNuQixVQUFVLEVBQUUsS0FBSyxZQUFZLEtBQUssQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsU0FBUztnQ0FDNUQsV0FBVyxFQUFFLGlCQUFpQixDQUFDLE1BQU07NkJBQ3RDLENBQUM7d0JBQ0osQ0FBQztvQkFDSCxDQUFDLEVBQUMsRUFBRTtnQkFDTixDQUFDO1lBQ0gsQ0FBQztpQkFBTSxJQUFJLFdBQVcsS0FBSyxrREFBYSxDQUFDLG1CQUFtQixJQUFJLGdCQUFnQixDQUFDLE1BQU0sS0FBSyxDQUFDLEVBQUUsQ0FBQztnQkFDOUYsd0NBQXdDO2dCQUN4QyxDQUFDO2dCQUFBLENBQUMsR0FBUyxFQUFFO29CQUNYLElBQUksQ0FBQzt3QkFDSCxNQUFNLDhFQUEyQixDQUFDLEtBQUssQ0FBQyxRQUFRLEVBQUUsT0FBTyxFQUFFLDRCQUE0QixFQUFFLGFBQWEsQ0FBQzt3QkFDdkcscUJBQXFCLENBQUMsT0FBTyxHQUFHLEtBQUs7d0JBRXJDLDBDQUEwQzt3QkFDMUMseUVBQXNCLENBQUMsS0FBSyxDQUFDLFFBQVEsRUFBRSxFQUFFLEVBQUUsT0FBTyxFQUFFLFNBQVMsQ0FBQyxRQUFRLENBQUM7d0JBRXZFLFdBQVcsQ0FBQyxHQUFHLENBQUMsY0FBYyxFQUFFOzRCQUM5QixLQUFLLEVBQUUsbURBQW1EOzRCQUMxRCxRQUFRLEVBQUUsS0FBSyxDQUFDLFFBQVE7eUJBQ3pCLENBQUM7b0JBQ0osQ0FBQztvQkFBQyxPQUFPLEtBQUssRUFBRSxDQUFDO3dCQUNmLFdBQVcsQ0FBQyxHQUFHLENBQUMsY0FBYyxFQUFFOzRCQUM5QixLQUFLLEVBQUUsbUNBQW1DOzRCQUMxQyxRQUFRLEVBQUUsS0FBSyxDQUFDLFFBQVE7NEJBQ3hCLEtBQUssRUFBRSxLQUFLLFlBQVksS0FBSyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxlQUFlO3lCQUNoRSxDQUFDO29CQUNKLENBQUM7Z0JBQ0gsQ0FBQyxFQUFDLEVBQUU7WUFDTixDQUFDO1lBRUQsNERBQTREO1lBQzVELG9GQUFvRjtZQUNwRixvQkFBb0IsQ0FBQyxPQUFPLEdBQUcsSUFBSTtZQUNuQyxXQUFXLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBRTtnQkFDdEIsS0FBSyxFQUFFLHlCQUF5QjtnQkFDaEMsUUFBUSxFQUFFLEtBQUssQ0FBQyxRQUFRO2dCQUN4QixpQkFBaUIsRUFBRSxTQUFTLENBQUMsUUFBUTtnQkFDckMsV0FBVztnQkFDWCxxQkFBcUIsRUFBRSxnQkFBZ0IsQ0FBQyxNQUFNO2dCQUM5QyxnQkFBZ0I7Z0JBQ2hCLFNBQVMsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFO2FBQ3RCLENBQUM7WUFFRixzQkFBc0I7WUFDdEIsd0VBQXdFO1lBQ3hFLGtDQUFrQztZQUNsQyxNQUFNLGNBQWMsR0FBRyxXQUFXLEtBQUssa0RBQWEsQ0FBQyxjQUFjLElBQUksV0FBVyxLQUFLLGtEQUFhLENBQUMsbUJBQW1CO2dCQUN0SCxDQUFDLENBQUMsZ0JBQWdCLENBQUMsTUFBTTtnQkFDekIsQ0FBQyxDQUFDLGdCQUFnQjtZQUVwQixjQUFjLENBQUMsY0FBYyxDQUFDO1lBRTlCLDBDQUEwQztZQUMxQyx3RkFBd0Y7WUFDeEYsK0VBQStFO1lBQy9FLGlEQUFpRDtZQUNqRCxRQUFRLENBQUMsQ0FBQyxDQUFDO1lBRVgsV0FBVyxDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUU7Z0JBQ3RCLEtBQUssRUFBRSwwQkFBMEI7Z0JBQ2pDLFFBQVEsRUFBRSxLQUFLLENBQUMsUUFBUTtnQkFDeEIsb0JBQW9CLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsR0FBRyxFQUFFLEdBQUcsbUJBQW1CLENBQUM7Z0JBQ3pFLG9CQUFvQixFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLEdBQUcsRUFBRSxHQUFHLFNBQVMsQ0FBQztnQkFDL0QsY0FBYztnQkFDZCxXQUFXO2dCQUNYLFNBQVMsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFO2FBQ3RCLENBQUM7WUFFRiwwRkFBMEY7WUFDMUYsK0ZBQStGO1lBQy9GLE1BQU0sVUFBVSxHQUFHLHFCQUFxQixLQUFLLFNBQVM7Z0JBQ3BELENBQUMsQ0FBQyxxQkFBcUI7Z0JBQ3ZCLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxjQUFjLEtBQUssS0FBSyxDQUFDO1lBRXhDLHVDQUF1QztZQUN2QyxNQUFNLGNBQWMsR0FBRyxnQkFBZ0IsSUFBSSxNQUFNLENBQUMsT0FBTztZQUN6RCxNQUFNLFNBQVMsR0FBRyxPQUFPLElBQUksUUFBUTtZQUVyQyxJQUFJLGNBQWMsSUFBSSxjQUFjLENBQUMsTUFBTSxHQUFHLENBQUMsSUFBSSxTQUFTLElBQUksVUFBVSxFQUFFLENBQUM7Z0JBQzNFLGlFQUFpRTtnQkFDakUsTUFBTSxPQUFPLEdBQWtCO29CQUM3QixVQUFVLEVBQUUsU0FBUztvQkFDckIsT0FBTyxFQUFFLGNBQWM7b0JBQ3ZCLElBQUksRUFBRSxTQUFTLENBQUMsUUFBUSxFQUFFO2lCQUMzQjtnQkFFRCwrREFBK0Q7Z0JBQy9ELE9BQU8sd0RBQWlCLENBQUMsV0FBVyxFQUFFLENBQUMsbUJBQW1CLENBQUMsS0FBSyxDQUFDLFFBQVEsRUFBRSxDQUFDLE9BQU8sQ0FBQyxFQUFFLGdEQUFTLENBQUMsT0FBTyxDQUFDO3FCQUNyRyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsRUFBRTtvQkFDdkIsZ0RBQWdEO29CQUNoRCxJQUFJLFVBQVUsR0FBUSxJQUFJO29CQUMxQixLQUFLLE1BQU0sUUFBUSxJQUFJLGdCQUFnQixFQUFFLENBQUM7d0JBQ3hDLE1BQU0sT0FBTyxHQUFHLGdCQUFnQixDQUFDLFFBQVEsQ0FBQzt3QkFDMUMsVUFBVSxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxNQUFXLEVBQUUsRUFBRSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEtBQUssZUFBZSxJQUFJLE1BQU0sQ0FBQyxFQUFFLEtBQUssZUFBZSxDQUFDO3dCQUM1RyxJQUFJLFVBQVU7NEJBQUUsTUFBSztvQkFDdkIsQ0FBQztvQkFFRCxJQUFJLFVBQVUsRUFBRSxDQUFDO3dCQUNmLGdFQUFnRTt3QkFDaEUsT0FBTyx3REFBaUIsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxpQkFBaUIsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxPQUFPLENBQUMsRUFBRSxnREFBUyxDQUFDLE9BQU8sRUFBRSxLQUFLLENBQUMsUUFBUSxDQUFDO29CQUNwSCxDQUFDO3lCQUFNLENBQUM7d0JBQ04sT0FBTyxPQUFPLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQztvQkFDL0IsQ0FBQztnQkFDSCxDQUFDLENBQUM7cUJBQ0QsS0FBSyxDQUFDLEtBQUssQ0FBQyxFQUFFO29CQUNiLE1BQU0sWUFBWSxHQUFHLEtBQUssWUFBWSxLQUFLLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLDRCQUE0QjtvQkFDMUYsWUFBWSxDQUFDLFlBQVksQ0FBQztvQkFDMUIsV0FBVyxDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUU7d0JBQ3RCLEtBQUssRUFBRSxvQkFBb0I7d0JBQzNCLEtBQUssRUFBRSxZQUFZO3dCQUNuQixVQUFVLEVBQUUsS0FBSyxZQUFZLEtBQUssQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsU0FBUztxQkFDN0QsQ0FBQztvQkFDRixJQUFJLElBQXNDLEVBQUUsQ0FBQzt3QkFDM0MsT0FBTyxDQUFDLEtBQUssQ0FBQywyQ0FBMkMsRUFBRSxLQUFLLENBQUM7b0JBQ25FLENBQUM7b0JBQ0QsT0FBTyxPQUFPLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQztnQkFDL0IsQ0FBQyxDQUFDO1lBQ04sQ0FBQztZQUNELE9BQU8sT0FBTyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUM7UUFDOUIsQ0FBQyxFQUFDO2FBQ0QsS0FBSyxDQUFDLEtBQUssQ0FBQyxFQUFFO1lBQ2IsV0FBVyxDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUU7Z0JBQ3RCLEtBQUssRUFBRSwrQkFBK0I7Z0JBQ3RDLFFBQVEsRUFBRSxLQUFLLENBQUMsUUFBUTtnQkFDeEIsS0FBSyxFQUFFLEtBQUssWUFBWSxLQUFLLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUM7Z0JBQzdELFVBQVUsRUFBRSxLQUFLLFlBQVksS0FBSyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxTQUFTO2dCQUM1RCxTQUFTLEVBQUUsSUFBSSxDQUFDLEdBQUcsRUFBRTthQUN0QixDQUFDO1lBQ0YsUUFBUSxDQUFDLENBQUMsQ0FBQyxFQUFDLGdEQUFnRDtRQUM5RCxDQUFDLENBQUM7YUFDRCxPQUFPLENBQUMsR0FBRyxFQUFFO1lBQ1osSUFBSSxjQUFhLGFBQWIsYUFBYSx1QkFBYixhQUFhLENBQUUsS0FBSyxNQUFJLGFBQWEsYUFBYixhQUFhLHVCQUFiLGFBQWEsQ0FBRSxlQUFlLEdBQUUsQ0FBQztnQkFDM0QsYUFBYSxDQUFDLEtBQUssQ0FBQyxTQUFTLEVBQUU7WUFDakMsQ0FBQztZQUNELDJGQUEyRjtRQUM3RixDQUFDLENBQUM7SUFDTixDQUFDLEdBQUUsQ0FBQyxXQUFXLEVBQUUsU0FBUyxFQUFFLEtBQUssQ0FBQyxRQUFRLEVBQUUsUUFBUSxFQUFFLHFCQUFxQixFQUFFLFdBQVcsRUFBRSxXQUFXLEVBQUUsa0JBQWtCLEVBQUUsMEJBQTBCLEVBQUUsb0JBQW9CLENBQUMsQ0FBQztJQUU3SyxNQUFNLEVBQUUsa0JBQWtCLEVBQUUsVUFBVSxFQUFFLGdCQUFnQixFQUFFLGtCQUFrQixFQUFFLHlCQUF5QixFQUFFLDZCQUE2QixFQUFDLEdBQUcsV0FBVztJQUNySixNQUFNLG1CQUFtQixHQUFHLGtCQUFrQixJQUFJLFVBQVUsSUFBSSxJQUFJO0lBQ3BFLE1BQU0saUJBQWlCLEdBQUcsb0JBQW9CLElBQUksZ0JBQWdCLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxJQUFJLHlCQUF5QixJQUFJLDhCQUE2QixhQUE3Qiw2QkFBNkIsdUJBQTdCLDZCQUE2QixDQUFFLE1BQU0sSUFBRyxDQUFDLENBQUM7SUFFL0ssMEJBQTBCO0lBQzFCLE1BQU0sa0JBQWtCLEdBQUcsbUJBQW1CLENBQUMsT0FBTyxLQUFLLFNBQVMsQ0FBQyxRQUFRO0lBQzdFLE1BQU0sb0JBQW9CLEdBQUcsa0JBQWtCLElBQUksV0FBVyxLQUFLLGtEQUFhLENBQUMsWUFBWTtJQUU3RiwwQ0FBMEM7SUFDMUMsTUFBTSxvQkFBb0IsR0FBRyxvQkFBb0IsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxXQUFXO0lBQ25FLE1BQU0sZ0JBQWdCLEdBQUcsb0JBQW9CLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsT0FBTyxJQUFJLEVBQUUsQ0FBQztJQUUvRSwyRkFBMkY7SUFDM0YsTUFBTSxjQUFjLEdBQUcsNENBQUssQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFO1FBQ3hDLE9BQU8sR0FBRyxTQUFTLENBQUMsUUFBUSxJQUFJLElBQUksQ0FBQyxHQUFHLEVBQUUsRUFBRTtJQUM5QyxDQUFDLEVBQUUsQ0FBQyxTQUFTLENBQUMsUUFBUSxFQUFFLFdBQVcsQ0FBQyxDQUFDO0lBRXJDLE9BQU8sQ0FDTCwwRUFBSyxTQUFTLEVBQUUscURBQVUsQ0FBQyxrQkFBa0IsRUFBRSxTQUFTLEVBQUUsRUFBRSxPQUFPLEVBQUUsZUFBZSxFQUFFLENBQUMsMkJBQzlELGNBQWMsRUFDckMsR0FBRyxFQUFFLDhDQUFHO1FBQ04sS0FBSzs7Ozs7S0FLUixhQUNDLGdFQUFDLDBEQUFtQixJQUFDLGFBQWEsRUFBRSxXQUFXLEVBQUUsbUJBQW1CLEVBQUUsNkJBQTZCLEVBQUUsc0JBQXNCLEVBQUUsZ0NBQWdDLEdBQUcsRUFHaEssaUVBQUMseUNBQUksSUFDSCxLQUFLLEVBQUUsU0FBUyxFQUNoQixRQUFRLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLGVBQWUsQ0FBQyxFQUF5QixDQUFDLEVBQzVELElBQUksRUFBRSxJQUFJLEVBQ1YsSUFBSSxFQUFDLFdBQVcsRUFDaEIsU0FBUyxFQUFFLElBQUksRUFDZixHQUFHLEVBQUUsOENBQUc7Ozs7OztTQU1QLGFBRUQsZ0VBQUMsd0NBQUcsSUFDRixFQUFFLEVBQUMsT0FBTyxFQUNWLEtBQUssRUFBRSxjQUFjLENBQUMsVUFBVSxDQUFDLFlBRWpDLDBFQUNFLFNBQVMsRUFBRSxxREFBVSxDQUFDLHFCQUFxQixFQUFFO2dDQUMzQyxDQUFDLDhEQUF5QixDQUFDLEVBQUUsVUFBVSxJQUFJLFNBQVMsS0FBSyxPQUFPOzZCQUNqRSxDQUFDLEVBQ0YsR0FBRyxFQUFFLDhDQUFHOzs7Ozs7O2FBT1AsYUFHRCwwRUFBSyxTQUFTLEVBQUUscURBQVUsQ0FBQyw0Q0FBNEMsRUFBRSxFQUFFLFdBQVcsRUFBRSxVQUFVLEVBQUUsQ0FBQyxFQUFFLEdBQUcsRUFBRSw4Q0FBRzs7Ozs7O2FBTTlHLGFBQ0MsMEVBQUssU0FBUyxFQUFFLHFEQUFVLENBQUMsK0JBQStCLEVBQUUsRUFBRSxRQUFRLEVBQUUsZUFBZSxFQUFFLENBQUMsRUFBRSxHQUFHLEVBQUUsOENBQUc7Ozs7Ozs7OztlQVNuRyxhQUNDLGdFQUFDLDJDQUFNLElBQ0wsU0FBUyxFQUFFLHFEQUFVLENBQUMsVUFBVSxFQUFFLEVBQUUsUUFBUSxFQUFFLEtBQUssS0FBSyxDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUUsQ0FBQyxFQUMxRSxJQUFJLEVBQUMsSUFBSSxFQUNULElBQUksRUFBQyxVQUFVLEVBQ2YsSUFBSSxRQUNKLE9BQU8sRUFBRSxTQUFTLGdCQUNOLGNBQWMsQ0FBQyxNQUFNLENBQUMsRUFDbEMsR0FBRyxFQUFFLFVBQVUsWUFFZixnRUFBQywwRkFBaUIsSUFBQyxRQUFRLFNBQUUsR0FDdEIsRUFDVCxnRUFBQyw2REFBYyxJQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLFlBQVksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLEdBQUksRUFFN0QsQ0FBQyxHQUFHLEVBQUU7O29EQUNMLElBQUksQ0FBQyxVQUFVLElBQUksVUFBVSxDQUFDLE1BQU0sSUFBSSxDQUFDO3dEQUFFLE9BQU8sSUFBSTtvREFFdEQsNENBQTRDO29EQUM1QyxNQUFNLGlCQUFpQixHQUFHLGVBQVMsQ0FBQyxhQUFhLDBDQUFFLFlBQVk7b0RBRS9ELElBQUksQ0FBQyxpQkFBaUI7d0RBQUUsT0FBTyxJQUFJO29EQUVuQyx1RUFBdUU7b0RBQ3ZFLE1BQU0sZ0JBQWdCLEdBQUcsVUFBVSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsRUFBRTs7d0RBQ2hELGtCQUFJLENBQUMsYUFBYSwwQ0FBRSxZQUFZLE1BQUssaUJBQWlCOzREQUN0RCxJQUFJLENBQUMsT0FBTzs0REFDWixJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksRUFBRSxLQUFLLEVBQUU7cURBQUEsQ0FDM0I7b0RBRUQsMkRBQTJEO29EQUMzRCxJQUFJLGdCQUFnQixDQUFDLE1BQU0sS0FBSyxDQUFDO3dEQUFFLE9BQU8sSUFBSTtvREFFOUMsd0JBQXdCO29EQUN4QixNQUFNLFVBQVUsR0FBRyxnQkFBZ0IsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUU7d0RBQzdDLE1BQU0sU0FBUyxHQUFHLG1CQUFtQixDQUFDLElBQUksQ0FBQzt3REFDM0MsT0FBTyxHQUFHLFNBQVMsTUFBTSxJQUFJLENBQUMsT0FBTyxjQUFjLElBQUksQ0FBQyxPQUFPLFFBQVE7b0RBQ3pFLENBQUMsQ0FBQztvREFFRixNQUFNLFlBQVksR0FBRyxpREFBaUQsZ0JBQWdCLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsMERBQTBELFVBQVUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUU7b0RBRXpNLE9BQU8sQ0FDTCxnRUFBQyw0Q0FBTyxJQUNOLFNBQVMsRUFBQyxRQUFRLEVBQ2xCLEdBQUcsRUFBRSw4Q0FBRyx5QkFBd0IsRUFDaEMsS0FBSyxFQUFFLFlBQVksWUFFbkIsZ0VBQUMsMkNBQU0sSUFDTCxJQUFJLEVBQUMsSUFBSSxFQUNULElBQUksUUFDSixJQUFJLEVBQUMsVUFBVSxnQkFDSixtQ0FBbUMsRUFDOUMsR0FBRyxFQUFFLDhDQUFHOzt5QkFFUCxZQUVELGdFQUFDLDRFQUFZLElBQUMsS0FBSyxFQUFDLCtCQUErQixFQUFDLElBQUksRUFBQyxHQUFHLEdBQUUsR0FDdkQsR0FDRCxDQUNYO2dEQUNILENBQUMsQ0FBQyxFQUFFLElBQ0EsRUFDTCxvQkFBb0IsR0FBRyxDQUFDLElBQUksQ0FDM0IsZ0VBQUMsNENBQU8sSUFBQyxLQUFLLEVBQUUsY0FBYyxDQUFDLGFBQWEsQ0FBQyxFQUFFLFNBQVMsRUFBQyxRQUFRLFlBQy9ELGdFQUFDLDJDQUFNLElBQ0wsR0FBRyxFQUFFLGlCQUFpQixFQUN0QixJQUFJLEVBQUMsSUFBSSxFQUNULElBQUksRUFBQyxVQUFVLGdCQUNILGNBQWMsQ0FBQyxhQUFhLENBQUMsRUFDekMsSUFBSSxRQUNKLFNBQVMsRUFBQyxjQUFjLEVBQ3hCLE9BQU8sRUFBRSxHQUFHLEVBQUUsR0FBRyxXQUFXLENBQUMsa0JBQWtCLENBQUMsRUFBQyxDQUFDLFlBRWxELGdFQUFDLDJFQUFhLEtBQUcsR0FDVixHQUNELENBQ1gsSUFDRyxFQUVMLENBQUMsR0FBRyxFQUFFO29DQUNMLGdEQUFnRDtvQ0FDaEQsSUFBSSxDQUFDLFVBQVUsSUFBSSxVQUFVLENBQUMsTUFBTSxJQUFJLENBQUMsRUFBRSxDQUFDO3dDQUMxQyxPQUFPLElBQUk7b0NBQ2IsQ0FBQztvQ0FFRCx5REFBeUQ7b0NBQ3pELHlFQUF5RTtvQ0FDekUsTUFBTSxZQUFZLEdBS2IsRUFBRTtvQ0FFUCw2REFBNkQ7b0NBQzdELE1BQU0sV0FBVyxHQUFHLElBQUksR0FBRyxFQUFVO29DQUVyQyxVQUFVLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBRSxFQUFFOzt3Q0FDL0IsSUFBSSxJQUFJLENBQUMsT0FBTyxFQUFFLENBQUM7NENBQ2pCLHdFQUF3RTs0Q0FDeEUsSUFBSSxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUM7Z0RBQ25DLFdBQVcsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQztnREFDN0IsTUFBTSxnQkFBZ0IsR0FBRyxhQUFNLGFBQU4sTUFBTSx1QkFBTixNQUFNLENBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQywwQ0FBRSxXQUFXO3FEQUNyQyxrQkFBTSxhQUFOLE1BQU0sdUJBQU4sTUFBTSxDQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsMENBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQywwQ0FBRSxJQUFJO29EQUN0QyxJQUFJLENBQUMsSUFBSTtvREFDVCxTQUFTLElBQUksQ0FBQyxPQUFPLEVBQUU7Z0RBQzlDLFlBQVksQ0FBQyxJQUFJLENBQUM7b0RBQ2hCLFFBQVEsRUFBRSxJQUFJLENBQUMsUUFBUTtvREFDdkIsV0FBVyxFQUFFLGdCQUFnQjtvREFDN0IsT0FBTyxFQUFFLElBQUksQ0FBQyxPQUFPO29EQUNyQixLQUFLLEVBQUUsR0FBRztpREFDWCxDQUFDOzRDQUNKLENBQUM7d0NBQ0gsQ0FBQzs2Q0FBTSxDQUFDOzRDQUNOLHFGQUFxRjs0Q0FDckYsWUFBWSxDQUFDLElBQUksQ0FBQztnREFDaEIsUUFBUSxFQUFFLElBQUksQ0FBQyxRQUFRO2dEQUN2QixXQUFXLEVBQUUsSUFBSSxDQUFDLElBQUksSUFBSSxtQkFBbUIsQ0FBQyxJQUFJLENBQUM7Z0RBQ25ELE9BQU8sRUFBRSxJQUFJO2dEQUNiLEtBQUssRUFBRSxHQUFHOzZDQUNYLENBQUM7d0NBQ0osQ0FBQztvQ0FDSCxDQUFDLENBQUM7b0NBRUYscUNBQXFDO29DQUNyQyxNQUFNLGdCQUFnQixHQUFHLFNBQVM7b0NBQ2xDLE1BQU0sbUJBQW1CLEdBQUcsZ0JBQWdCLENBQUMsT0FBTyxJQUFJLElBQUk7b0NBQzVELE1BQU0sY0FBYyxHQUFHLG1CQUFtQixLQUFLLElBQUk7b0NBRW5ELDhDQUE4QztvQ0FDOUMsTUFBTSxrQkFBa0IsR0FBRyxZQUFZLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxFQUFFO3dDQUN0RCxJQUFJLGNBQWMsRUFBRSxDQUFDOzRDQUNuQixPQUFPLEdBQUcsQ0FBQyxPQUFPLEtBQUssbUJBQW1CO3dDQUM1QyxDQUFDOzZDQUFNLENBQUM7NENBQ04sT0FBTyxHQUFHLENBQUMsUUFBUSxLQUFLLGdCQUFnQixDQUFDLFFBQVE7d0NBQ25ELENBQUM7b0NBQ0gsQ0FBQyxDQUFDO29DQUVGLFdBQVcsQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFO3dDQUN2QixLQUFLLEVBQUUscUJBQXFCO3dDQUM1QixZQUFZLEVBQUUsVUFBVSxDQUFDLE1BQU07d0NBQy9CLGlCQUFpQixFQUFFLFlBQVksQ0FBQyxNQUFNO3dDQUN0QyxtQkFBbUI7d0NBQ25CLGNBQWM7d0NBQ2Qsa0JBQWtCO3dDQUNsQixlQUFlO3dDQUNmLHVCQUF1Qjt3Q0FDdkIsb0JBQW9CLEVBQUUsZ0JBQWdCLENBQUMsUUFBUTtxQ0FDaEQsQ0FBQztvQ0FFRixPQUFPLENBQ0wsaUVBQUMsNENBQUssQ0FBQyxRQUFRLGVBRWIsMEVBQUssR0FBRyxFQUFFLDhDQUFHOzs7bUJBR1osYUFDQywyRUFBTyxHQUFHLEVBQUUsOENBQUc7Ozs7OztxQkFNZCxZQUNFLGNBQWMsQ0FBQyxhQUFhLENBQUMsR0FDeEIsRUFDUixnRUFBQywyQ0FBTSxJQUNMLElBQUksRUFBQyxJQUFJLEVBQ1QsS0FBSyxFQUFFLGtCQUFrQixJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFDdkQsUUFBUSxFQUFFLENBQU8sQ0FBQyxFQUFFLEVBQUU7OzREQUNwQixNQUFNLFdBQVcsR0FBRyxRQUFRLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUM7NERBQzVDLE1BQU0sY0FBYyxHQUFHLFlBQVksQ0FBQyxXQUFXLENBQUM7NERBRWhELFdBQVcsQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFO2dFQUN2QixLQUFLLEVBQUUsdUJBQXVCO2dFQUM5QixXQUFXO2dFQUNYLGNBQWM7Z0VBQ2QsU0FBUyxFQUFFLGNBQWMsQ0FBQyxPQUFPLEtBQUssSUFBSTs2REFDM0MsQ0FBQzs0REFFRiwwQ0FBMEM7NERBQzFDLElBQUksV0FBVyxLQUFLLGtEQUFhLENBQUMsWUFBWSxFQUFFLENBQUM7Z0VBQy9DLE1BQU0sV0FBVyxDQUFDLGdDQUFnQyxDQUFDOzREQUNyRCxDQUFDOzREQUVELElBQUksY0FBYyxDQUFDLE9BQU8sRUFBRSxDQUFDO2dFQUMzQiw4REFBOEQ7Z0VBQzlELElBQUksYUFBYSxFQUFFLENBQUM7b0VBQ2xCLGFBQWEsQ0FBQyxjQUFjLENBQUMsT0FBTyxDQUFDO2dFQUN2QyxDQUFDO2dFQUNELElBQUksa0JBQWtCLEVBQUUsQ0FBQztvRUFDdkIsa0JBQWtCLENBQUMsQ0FBQyxDQUFDO2dFQUN2QixDQUFDOzREQUNILENBQUM7aUVBQU0sQ0FBQztnRUFDTixtREFBbUQ7Z0VBQ25ELElBQUksYUFBYSxFQUFFLENBQUM7b0VBQ2xCLGFBQWEsQ0FBQyxJQUFJLENBQUM7Z0VBQ3JCLENBQUM7Z0VBQ0QsSUFBSSxpQkFBaUIsRUFBRSxDQUFDO29FQUN0QiwyQkFBMkI7b0VBQzNCLE1BQU0sY0FBYyxHQUFHLGVBQVMsYUFBVCxTQUFTLHVCQUFULFNBQVMsQ0FBRSxTQUFTLENBQUMsQ0FBQyxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsQ0FDdkQsSUFBSSxDQUFDLFFBQVEsS0FBSyxjQUFjLENBQUMsUUFBUSxDQUMxQyxtQ0FBSSxDQUFDLENBQUM7b0VBQ1AsSUFBSSxjQUFjLElBQUksQ0FBQyxFQUFFLENBQUM7d0VBQ3hCLGlCQUFpQixDQUFDLGNBQWMsQ0FBQztvRUFDbkMsQ0FBQzt5RUFBTSxDQUFDO3dFQUNOLDBDQUEwQzt3RUFDMUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUU7NEVBQ3ZCLEtBQUssRUFBRSw2QkFBNkI7NEVBQ3BDLG1CQUFtQixFQUFFLGNBQWMsQ0FBQyxLQUFLO3lFQUMxQyxDQUFDO3dFQUNGLElBQUksYUFBYSxFQUFFLENBQUM7NEVBQ2xCLGFBQWEsQ0FBQyxjQUFjLENBQUMsS0FBSyxDQUFDO3dFQUNyQyxDQUFDO29FQUNILENBQUM7Z0VBQ0gsQ0FBQzs0REFDSCxDQUFDO3dEQUNILENBQUMsYUFFQSxZQUFZLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTSxFQUFFLEdBQUcsRUFBRSxFQUFFOzREQUNoQyxXQUFXLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRTtnRUFDdkIsS0FBSyxFQUFFLHdCQUF3QjtnRUFDL0IsS0FBSyxFQUFFLEdBQUc7Z0VBQ1YsUUFBUSxFQUFFLE1BQU0sQ0FBQyxRQUFRO2dFQUN6QixXQUFXLEVBQUUsTUFBTSxDQUFDLFdBQVc7Z0VBQy9CLE9BQU8sRUFBRSxNQUFNLENBQUMsT0FBTzs2REFDeEIsQ0FBQzs0REFDRixPQUFPLENBQ0wsNEVBQThCLEtBQUssRUFBRSxHQUFHLFlBQ3JDLE1BQU0sQ0FBQyxXQUFXLElBRFIsTUFBTSxDQUFDLFFBQVEsQ0FFbkIsQ0FDVjt3REFDSCxDQUFDLENBQUMsR0FDSyxJQUNMLEVBR0wsY0FBYyxJQUFJLG1CQUFtQixJQUFJLE1BQU0sSUFBSSxNQUFNLENBQUMsbUJBQW1CLENBQUMsSUFBSSxDQUNqRiwwRUFBSyxHQUFHLEVBQUUsOENBQUc7OztxQkFHWixhQUNDLDJFQUFPLEdBQUcsRUFBRSw4Q0FBRzs7Ozs7O3VCQU1kLDZCQUVPLEVBQ1IsZ0VBQUMsMkNBQU0sSUFDTCxJQUFJLEVBQUMsSUFBSSxFQUNULEtBQUssRUFBRSx1QkFBdUIsS0FBSyxTQUFTLENBQUMsQ0FBQyxDQUFDLHVCQUF1QixDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQzFFLFFBQVEsRUFBRSxDQUFPLENBQUMsRUFBRSxFQUFFOzs0REFDcEIsTUFBTSxRQUFRLEdBQUcsUUFBUSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDOzREQUN6QyxXQUFXLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRTtnRUFDdkIsS0FBSyxFQUFFLHNCQUFzQjtnRUFDN0IsT0FBTyxFQUFFLG1CQUFtQjtnRUFDNUIsZUFBZSxFQUFFLFFBQVE7Z0VBQ3pCLGlCQUFpQixFQUFFLFlBQU0sQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsMENBQUUsUUFBUTtnRUFDeEUsZ0JBQWdCLEVBQUUsbUJBQW1CLENBQUMsTUFBTSxDQUFDLG1CQUFtQixDQUFDLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDOzZEQUNuRixDQUFDOzREQUVGLDBDQUEwQzs0REFDMUMsSUFBSSxXQUFXLEtBQUssa0RBQWEsQ0FBQyxZQUFZLEVBQUUsQ0FBQztnRUFDL0MsTUFBTSxXQUFXLENBQUMsZ0NBQWdDLENBQUM7NERBQ3JELENBQUM7NERBRUQsSUFBSSxrQkFBa0IsRUFBRSxDQUFDO2dFQUN2QixrQkFBa0IsQ0FBQyxRQUFRLENBQUM7NERBQzlCLENBQUM7d0RBQ0gsQ0FBQyxhQUVBLE1BQU0sQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFFLEVBQUUsQ0FBQyxDQUNwRCw0RUFBNEIsS0FBSyxFQUFFLEdBQUcsWUFDbkMsbUJBQW1CLENBQUMsSUFBSSxDQUFDLElBRGYsSUFBSSxDQUFDLFFBQVEsQ0FFakIsQ0FDVixDQUFDLEdBQ0ssSUFDTCxDQUNQLElBQ2MsQ0FDbEI7Z0NBQ0gsQ0FBQyxDQUFDLEVBQUUsRUFHSiwwRUFBSyxHQUFHLEVBQUUsOENBQUc7OzttQkFHTixhQUNDLDBFQUFLLFNBQVMsRUFBQywyQkFBMkIsRUFBQyxHQUFHLEVBQUUsOENBQUc7OztxQkFHbEQsYUFFQywwRUFBSyxTQUFTLEVBQUMsUUFBUSxFQUFDLEdBQUcsRUFBRSw4Q0FBRzs7Ozs7O3VCQU0vQixhQUNFLGNBQWMsQ0FBQyxTQUFTLENBQUMsU0FDdEIsRUFDTixnRUFBQyw0Q0FBTyxJQUFDLFNBQVMsRUFBQyxRQUFRLEVBQUMsR0FBRyxFQUFFLDhDQUFHLHlCQUF3QixFQUFFLEtBQUssRUFBRSxjQUFjLENBQUMsaUJBQWlCLENBQUMsWUFDcEcsZ0VBQUMsMkNBQU0sSUFBQyxJQUFJLEVBQUMsSUFBSSxFQUFDLElBQUksUUFBQyxJQUFJLEVBQUMsVUFBVSxnQkFBYSxjQUFjLENBQUMsaUJBQWlCLENBQUMsRUFBRSxHQUFHLEVBQUUsOENBQUcsa0JBQWlCLFlBQzdHLGdFQUFDLDRFQUFZLElBQUMsS0FBSyxFQUFDLCtCQUErQixFQUFDLElBQUksRUFBQyxHQUFHLEdBQUUsR0FDdkQsR0FDRCxFQUdWLDBFQUNFLElBQUksRUFBQyxZQUFZLGdCQUNMLGNBQWMsQ0FBQyxhQUFhLENBQUMsRUFDekMsR0FBRyxFQUFFLDhDQUFHOzs7Ozs7eUJBTVAsYUFFSCxnRUFBQywyQ0FBTSxJQUNMLElBQUksRUFBQyxJQUFJLEVBQ1QsT0FBTyxFQUFFLFdBQVcsS0FBSyxrREFBYSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxVQUFVLEVBQzlFLEtBQUssRUFBRSxXQUFXLEtBQUssa0RBQWEsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsU0FBUyxFQUN6RSxPQUFPLEVBQUUsR0FBRyxFQUFFO2dFQUNaLE1BQU0sT0FBTyxHQUFHLGtEQUFhLENBQUMsWUFBWTtnRUFDMUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxjQUFjLEVBQUU7b0VBQzlCLEtBQUssRUFBRSxxQkFBcUI7b0VBQzVCLFFBQVEsRUFBRSxLQUFLLENBQUMsUUFBUTtvRUFDeEIsaUJBQWlCLEVBQUUsU0FBUyxDQUFDLFFBQVE7b0VBQ3JDLFlBQVksRUFBRSxXQUFXLElBQUksa0RBQWEsQ0FBQyxZQUFZO29FQUN2RCxPQUFPO29FQUNQLFNBQVMsRUFBRSxJQUFJLElBQUksRUFBRSxDQUFDLFdBQVcsRUFBRTtpRUFDcEMsQ0FBQztnRUFDRixJQUFJLG1CQUFtQixFQUFFLENBQUM7b0VBQ3hCLG1CQUFtQixDQUFDLE9BQU8sQ0FBQztnRUFDOUIsQ0FBQzs0REFDSCxDQUFDLGtCQUNhLFdBQVcsS0FBSyxrREFBYSxDQUFDLFlBQVksZ0JBQzVDLEdBQUcsY0FBYyxDQUFDLGtCQUFrQixDQUFDLEtBQUsscUJBQWMsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsMENBQUUsSUFBSSxFQUFFLEtBQUksRUFBRSxFQUFFLEVBQ3RILEtBQUssRUFBRSxjQUFjLENBQUMsa0JBQWtCLENBQUMsRUFDekMsR0FBRyxFQUFFLDhDQUFHOzs7Ozs7Ozt5QkFRUCxZQUVBLGNBQWMsQ0FBQyxnQkFBZ0IsQ0FBQyxHQUMxQixFQUNULGdFQUFDLDJDQUFNLElBQ0wsSUFBSSxFQUFDLElBQUksRUFDVCxPQUFPLEVBQUUsV0FBVyxLQUFLLGtEQUFhLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLFVBQVUsRUFDaEYsS0FBSyxFQUFFLFdBQVcsS0FBSyxrREFBYSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxTQUFTLEVBQzNFLE9BQU8sRUFBRSxHQUFHLEVBQUU7Z0VBQ1osTUFBTSxPQUFPLEdBQUcsa0RBQWEsQ0FBQyxjQUFjO2dFQUM1QyxNQUFNLFlBQVksR0FBRyxXQUFXLElBQUksa0RBQWEsQ0FBQyxZQUFZO2dFQUU5RCxXQUFXLENBQUMsR0FBRyxDQUFDLGNBQWMsRUFBRTtvRUFDOUIsS0FBSyxFQUFFLHFCQUFxQjtvRUFDNUIsUUFBUSxFQUFFLEtBQUssQ0FBQyxRQUFRO29FQUN4QixpQkFBaUIsRUFBRSxTQUFTLENBQUMsUUFBUTtvRUFDckMsWUFBWTtvRUFDWixPQUFPO29FQUNQLFNBQVMsRUFBRSxJQUFJLElBQUksRUFBRSxDQUFDLFdBQVcsRUFBRTtpRUFDcEMsQ0FBQztnRUFFRix3RUFBd0U7Z0VBQ3hFLG9FQUFvRTtnRUFDcEUsTUFBTSxnQkFBZ0IsR0FBRyxDQUFDLGdCQUFnQixJQUFJLGdCQUFnQixDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7b0VBQ3hFLENBQUMsQ0FBRSxnQkFBd0M7b0VBQzNDLENBQUMsQ0FBQyxDQUFDLFNBQVEsYUFBUixRQUFRLHVCQUFSLFFBQVEsQ0FBRSxrQkFBa0IsRUFBeUIsS0FBSSxFQUFFLENBQUM7Z0VBRWpFLElBQUksWUFBWSxLQUFLLGtEQUFhLENBQUMsWUFBWTtvRUFDM0MsT0FBTyxLQUFLLGtEQUFhLENBQUMsY0FBYztvRUFDeEMsZ0JBQWdCLENBQUMsTUFBTSxHQUFHLENBQUM7b0VBQzNCLFFBQVE7b0VBQ1IsMEJBQTBCLEVBQUUsQ0FBQztvRUFDL0IsTUFBTSxtQkFBbUIsR0FBRyxrQkFBa0IsSUFBSSxFQUFFO29FQUVwRCwwREFBMEQ7b0VBQzFELE1BQU0sYUFBYSxHQUFHLHVGQUEyQixDQUMvQyxRQUFrQyxFQUNsQyxnQkFBZ0IsRUFDaEIsbUJBQW1CLENBQ3BCO29FQUVELFdBQVcsQ0FBQyxHQUFHLENBQUMsY0FBYyxFQUFFO3dFQUM5QixLQUFLLEVBQUUsMENBQTBDO3dFQUNqRCxRQUFRLEVBQUUsS0FBSyxDQUFDLFFBQVE7d0VBQ3hCLFlBQVk7d0VBQ1osT0FBTzt3RUFDUCxvQkFBb0IsRUFBRSxnQkFBZ0IsQ0FBQyxNQUFNO3dFQUM3Qyx3QkFBd0IsRUFBRSxtQkFBbUIsQ0FBQyxNQUFNO3dFQUNwRCxrQkFBa0IsRUFBRSxhQUFhLENBQUMsTUFBTTtxRUFDekMsQ0FBQztvRUFFRiwwQkFBMEIsQ0FBQyxhQUFhLENBQUM7Z0VBQzNDLENBQUM7Z0VBRUQsSUFBSSxtQkFBbUIsRUFBRSxDQUFDO29FQUN4QixtQkFBbUIsQ0FBQyxPQUFPLENBQUM7Z0VBQzlCLENBQUM7NERBQ0gsQ0FBQyxrQkFDYSxXQUFXLEtBQUssa0RBQWEsQ0FBQyxjQUFjLGdCQUM5QyxHQUFHLGNBQWMsQ0FBQyxxQkFBcUIsQ0FBQyxLQUFLLHFCQUFjLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLDBDQUFFLElBQUksRUFBRSxLQUFJLEVBQUUsRUFBRSxFQUN6SCxLQUFLLEVBQUUsY0FBYyxDQUFDLHFCQUFxQixDQUFDLEVBQzVDLEdBQUcsRUFBRSw4Q0FBRzs7Ozs7Ozs7eUJBUVAsWUFFQSxjQUFjLENBQUMsZ0JBQWdCLENBQUMsR0FDMUIsRUFDVCxnRUFBQywyQ0FBTSxJQUNMLElBQUksRUFBQyxJQUFJLEVBQ1QsT0FBTyxFQUFFLFdBQVcsS0FBSyxrREFBYSxDQUFDLG1CQUFtQixDQUFDLENBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLFVBQVUsRUFDckYsS0FBSyxFQUFFLFdBQVcsS0FBSyxrREFBYSxDQUFDLG1CQUFtQixDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLFNBQVMsRUFDaEYsUUFBUSxFQUFFLENBQUMsa0JBQWtCLElBQUksa0JBQWtCLENBQUMsTUFBTSxLQUFLLENBQUMsRUFDaEUsT0FBTyxFQUFFLEdBQUcsRUFBRTtnRUFDWixNQUFNLE9BQU8sR0FBRyxrREFBYSxDQUFDLG1CQUFtQjtnRUFDakQsTUFBTSxZQUFZLEdBQUcsV0FBVyxJQUFJLGtEQUFhLENBQUMsWUFBWTtnRUFFOUQsV0FBVyxDQUFDLEdBQUcsQ0FBQyxjQUFjLEVBQUU7b0VBQzlCLEtBQUssRUFBRSxxQkFBcUI7b0VBQzVCLFFBQVEsRUFBRSxLQUFLLENBQUMsUUFBUTtvRUFDeEIsaUJBQWlCLEVBQUUsU0FBUyxDQUFDLFFBQVE7b0VBQ3JDLFlBQVk7b0VBQ1osT0FBTztvRUFDUCx1QkFBdUIsRUFBRSxtQkFBa0IsYUFBbEIsa0JBQWtCLHVCQUFsQixrQkFBa0IsQ0FBRSxNQUFNLEtBQUksQ0FBQztvRUFDeEQsU0FBUyxFQUFFLElBQUksSUFBSSxFQUFFLENBQUMsV0FBVyxFQUFFO2lFQUNwQyxDQUFDO2dFQUVGLDZFQUE2RTtnRUFDN0Usb0VBQW9FO2dFQUNwRSxrQ0FBa0M7Z0VBQ2xDLE1BQU0seUJBQXlCLEdBQUcsQ0FBQyxnQkFBZ0IsSUFBSSxnQkFBZ0IsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO29FQUNqRixDQUFDLENBQUUsZ0JBQXdDO29FQUMzQyxDQUFDLENBQUMsQ0FBQyxTQUFRLGFBQVIsUUFBUSx1QkFBUixRQUFRLENBQUUsa0JBQWtCLEVBQXlCLEtBQUksRUFBRSxDQUFDO2dFQUVqRSxJQUFJLFlBQVksS0FBSyxrREFBYSxDQUFDLFlBQVk7b0VBQzNDLE9BQU8sS0FBSyxrREFBYSxDQUFDLG1CQUFtQjtvRUFDN0MseUJBQXlCLENBQUMsTUFBTSxHQUFHLENBQUM7b0VBQ3BDLFFBQVE7b0VBQ1IsMEJBQTBCLEVBQUUsQ0FBQztvRUFDL0IsTUFBTSxtQkFBbUIsR0FBRyxrQkFBa0IsSUFBSSxFQUFFO29FQUVwRCwwREFBMEQ7b0VBQzFELE1BQU0sYUFBYSxHQUFHLHVGQUEyQixDQUMvQyxRQUFrQyxFQUNsQyx5QkFBeUIsRUFDekIsbUJBQW1CLENBQ3BCO29FQUVELFdBQVcsQ0FBQyxHQUFHLENBQUMsY0FBYyxFQUFFO3dFQUM5QixLQUFLLEVBQUUsb0RBQW9EO3dFQUMzRCxRQUFRLEVBQUUsS0FBSyxDQUFDLFFBQVE7d0VBQ3hCLFlBQVk7d0VBQ1osT0FBTzt3RUFDUCxvQkFBb0IsRUFBRSx5QkFBeUIsQ0FBQyxNQUFNO3dFQUN0RCx3QkFBd0IsRUFBRSxtQkFBbUIsQ0FBQyxNQUFNO3dFQUNwRCxrQkFBa0IsRUFBRSxhQUFhLENBQUMsTUFBTTtxRUFDekMsQ0FBQztvRUFFRiwwQkFBMEIsQ0FBQyxhQUFhLENBQUM7Z0VBQzNDLENBQUM7Z0VBRUQsSUFBSSxtQkFBbUIsRUFBRSxDQUFDO29FQUN4QixtQkFBbUIsQ0FBQyxPQUFPLENBQUM7Z0VBQzlCLENBQUM7NERBQ0gsQ0FBQyxrQkFDYSxXQUFXLEtBQUssa0RBQWEsQ0FBQyxtQkFBbUIsZ0JBQ25ELEdBQUcsY0FBYyxDQUFDLDBCQUEwQixDQUFDLEtBQUsscUJBQWMsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsMENBQUUsSUFBSSxFQUFFLEtBQUksRUFBRSxFQUFFLEVBQzlILEtBQUssRUFBRSxDQUFDLENBQUMsa0JBQWtCLElBQUksa0JBQWtCLENBQUMsTUFBTSxLQUFLLENBQUMsQ0FBQztnRUFDN0QsQ0FBQyxDQUFDLGNBQWMsQ0FBQywyQkFBMkIsQ0FBQztnRUFDN0MsQ0FBQyxDQUFDLGNBQWMsQ0FBQywwQkFBMEIsQ0FBQyxFQUM5QyxHQUFHLEVBQUUsOENBQUc7Ozs7Ozs7O3lCQVFQLFlBRUEsY0FBYyxDQUFDLG1CQUFtQixDQUFDLEdBQzdCLElBQ0gsSUFDRixFQUNOLHlFQUNFLEVBQUUsRUFBRSw0QkFBNEIsS0FBSyxDQUFDLFFBQVEsRUFBRSxFQUNoRCxTQUFTLEVBQUMsU0FBUyxlQUNULFFBQVEsRUFDbEIsSUFBSSxFQUFDLFFBQVEsWUFFWixXQUFXLEtBQUssa0RBQWEsQ0FBQyxZQUFZO2dEQUN6QyxDQUFDLENBQUMsY0FBYyxDQUFDLGtCQUFrQixDQUFDO2dEQUNwQyxDQUFDLENBQUMsV0FBVyxLQUFLLGtEQUFhLENBQUMsY0FBYztvREFDOUMsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxxQkFBcUIsQ0FBQztvREFDdkMsQ0FBQyxDQUFDLGNBQWMsQ0FBQywwQkFBMEIsQ0FBQyxHQUUxQyxJQUNGLEVBQ1osMEVBQUssR0FBRyxFQUFFLDhDQUFHOzs7Ozs7YUFNWixhQUNFLE9BQU8sSUFBSSxRQUFRLElBQUksQ0FDdEIseUVBQUssR0FBRyxFQUFFLDhDQUFHOzs7Ozs7aUJBTVosWUFDQyxnRUFBQywyREFBYSxvQkFFUixVQUFVLElBQ2QsUUFBUSxFQUFFLFNBQVMsQ0FBQyxRQUFRLEVBQzVCLFFBQVEsRUFBRSxRQUFRLEVBQ2xCLGVBQWUsRUFBRSxVQUFVLElBQUksSUFBSSxFQUNuQyxvQkFBb0IsRUFBRSxvQkFBb0IsRUFDMUMsZ0JBQWdCLEVBQUksZ0JBQWdCLEVBQ3BDLFlBQVksRUFBRSxnQkFBZ0IsRUFDOUIsaUJBQWlCLEVBQUUsaUJBQWlCLEVBQ3BDLG1CQUFtQixFQUFFLG1CQUFtQixFQUN4QyxnQkFBZ0IsRUFBRSxTQUFTLENBQUMsT0FBTyxLQVY5QixTQUFTLENBQUMsUUFBUSxDQVd2QixHQUNFLENBQ1AsRUFDRCxnRUFBQyxxRUFBYSxJQUNaLFFBQVEsRUFBRSxLQUFLLENBQUMsUUFBUSxFQUN4QixhQUFhLEVBQUUsU0FBUyxDQUFDLGFBQWEsRUFDdEMsV0FBVyxFQUFFLElBQUksRUFDakIsY0FBYyxFQUFFLGtCQUFrQixFQUNsQyxtQkFBbUIsRUFBRSx1QkFBdUIsR0FDNUMsSUFDRSxJQUNGLEdBQ0YsRUFDTixnRUFBQyx3Q0FBRyxJQUNGLEVBQUUsRUFBQyxTQUFTLEVBQ1osS0FBSyxFQUNILHNGQUNHLGNBQWMsQ0FBQyxZQUFZLENBQUMsRUFDNUIsb0JBQW9CLEdBQUcsQ0FBQyxJQUFJLENBQzNCLDJFQUFNLEdBQUcsRUFBRSw4Q0FBRzs7OztpQkFJYixrQkFDRyxvQkFBb0IsU0FDakIsQ0FDUixJQUNJLEVBRVQsUUFBUSxFQUFFLG9CQUFvQixLQUFLLENBQUMsWUFFbkMsb0JBQW9CLEdBQUcsQ0FBQyxJQUFJLENBQzNCLHlFQUNFLFNBQVMsRUFBRSxxREFBVSxDQUFDLHFCQUFxQixFQUFFO2dDQUMzQyxDQUFDLDhEQUF5QixDQUFDLEVBQUUsVUFBVSxJQUFJLFNBQVMsS0FBSyxTQUFTOzZCQUNuRSxDQUFDLEVBQ0YsR0FBRyxFQUFFLDhDQUFHOzs7Ozs7O2VBT1AsRUFDRCxPQUFPLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRTtnQ0FDYiw2REFBNkQ7Z0NBQzdELElBQUksU0FBUyxLQUFLLFNBQVMsRUFBRSxDQUFDO29DQUM1QixDQUFDLENBQUMsZUFBZSxFQUFFO2dDQUNyQixDQUFDOzRCQUNILENBQUMsWUFFRCxnRUFBQywwREFBZSxJQUVkLFFBQVEsRUFBRSxLQUFLLENBQUMsUUFBUSxFQUN4QixTQUFTLEVBQUUsU0FBUyxFQUNwQixXQUFXLEVBQUUsYUFBYSxDQUFDLE9BQU8sRUFDbEMsV0FBVyxFQUFFLG9CQUFvQixFQUNqQyxVQUFVLEVBQUUsTUFBQyxVQUFrQyxhQUFsQyxVQUFVLHVCQUFWLFVBQVUsQ0FBMEIsaUJBQWlCLDBEQUFJLEVBQ3RFLE9BQU8sRUFBRSxnQkFBZ0IsRUFDekIsUUFBUSxFQUFFLFFBQVEsRUFDbEIscUJBQXFCLEVBQUUsNEJBQTRCLENBQUMsT0FBTyxFQUMzRCxXQUFXLEVBQUUsV0FBVyxFQUN4Qiw0QkFBNEIsRUFBRSw0QkFBNEIsRUFDMUQsYUFBYSxFQUFFLGFBQWEsRUFDNUIsT0FBTyxFQUFFLE9BQU8sRUFDaEIsa0JBQWtCLEVBQUUsa0JBQWtCLEVBQ3RDLDBCQUEwQixFQUFFLDBCQUEwQixFQUN0RCxTQUFTLEVBQUUsWUFBNkIsRUFBRSxpREFBeEIsWUFBWSxHQUFHLEtBQUs7b0NBQ3BDLHlDQUF5QztvQ0FDekMsZ0VBQWdFO29DQUNoRSxzREFBc0Q7b0NBQ3RELElBQUksWUFBWSxFQUFFLENBQUM7d0NBQ2pCLHFCQUFxQixDQUFDLE9BQU8sR0FBRyxLQUFLLEVBQUMsMkJBQTJCO3dDQUNqRSxNQUFNLFNBQVMsQ0FBQyxJQUFJLENBQUM7b0NBQ3ZCLENBQUM7eUNBQU0sQ0FBQzt3Q0FDTix3Q0FBd0M7d0NBQ3hDLDBFQUEwRTt3Q0FDMUUsa0JBQWtCLENBQUMsT0FBTyxHQUFHLElBQUk7d0NBQ2pDLFlBQVksQ0FBQyxPQUFPLENBQUM7d0NBQ3JCLHFDQUFxQzt3Q0FDckMsVUFBVSxDQUFDLEdBQUcsRUFBRTs0Q0FDZCxrQkFBa0IsQ0FBQyxPQUFPLEdBQUcsS0FBSzt3Q0FDcEMsQ0FBQyxFQUFFLEdBQUcsQ0FBQztvQ0FDVCxDQUFDO2dDQUNILENBQUMsS0FoQ0ksR0FBRyxTQUFTLENBQUMsUUFBUSxJQUFJLG9CQUFvQixDQUFDLE9BQU8sRUFBRSxDQWlDNUQsR0FDRSxDQUNQLEdBQ0csSUFDRCxFQUdOLENBQUMsY0FBYyxJQUFJLFNBQVMsQ0FBQyxJQUFJLENBQ2hDLDBFQUFLLEdBQUcsRUFBRSw4Q0FBRzs7O1NBR1osYUFDRSxjQUFjLElBQUksQ0FDakIsZ0VBQUMsb0VBQVksSUFDWCxLQUFLLEVBQUUsY0FBYyxFQUNyQixTQUFTLEVBQUUsR0FBRyxFQUFFLENBQUMsaUJBQWlCLENBQUMsSUFBSSxDQUFDLEdBQ3hDLENBQ0gsRUFDQSxTQUFTLElBQUksQ0FDWixnRUFBQyxvRUFBWSxJQUNYLEtBQUssRUFBRSxTQUFTLEVBQ2hCLFNBQVMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLEdBQ25DLENBQ0gsSUFDRyxDQUNQLEVBR0EsS0FBSyxLQUFLLENBQUMsSUFBSSxDQUNkLHlFQUFLLEdBQUcsRUFBRSw4Q0FBRzs7Ozs7Ozs7Ozs7U0FXWixZQUNDLGdFQUFDLDJEQUFhLEtBQUcsR0FDYixDQUNQLElBQ0csQ0FDUDtBQUNILENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDeDlEaUI7QUFFd0k7QUFDbkQ7QUFFdkcsTUFBTSxXQUFXLEdBQUcsaUZBQTRCLEVBQUU7QUFFM0MsU0FBUyxhQUFhLENBQUUsbUJBQTJDLEVBQUUscUJBQTZCLEVBQUUsT0FBZ0I7SUFDekgsTUFBTSxNQUFNLEdBQUcsSUFBSSxHQUFHLEVBQVU7SUFDaEMsbUJBQW1CLGFBQW5CLG1CQUFtQix1QkFBbkIsbUJBQW1CLENBQUUsT0FBTyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUN0RCxJQUFJLHFCQUFxQixFQUFFLENBQUM7UUFDMUIsTUFBTSxTQUFTLEdBQUcscUJBQXFCLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQztRQUN6RCxJQUFJLFVBQVMsYUFBVCxTQUFTLHVCQUFULFNBQVMsQ0FBRSxNQUFNLElBQUcsQ0FBQyxFQUFFLENBQUM7WUFDMUIsU0FBUyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzNFLENBQUM7SUFDSCxDQUFDO0lBQ0QsSUFBSSxPQUFPLEVBQUUsQ0FBQztRQUNaLE1BQU0sQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDO0lBQ3JCLENBQUM7SUFDRCxPQUFPLEtBQUssQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDO0FBQzNCLENBQUM7QUFFRDs7Ozs7R0FLRztBQUNJLFNBQVMsaUJBQWlCLENBQUUsS0FBVSxFQUFFLFNBQWtCLEtBQUs7SUFDcEUsaUVBQWlFO0lBQ2pFLHFFQUFxRTtJQUNyRSxxQ0FBcUM7SUFDckMsSUFBSSxNQUFNLEVBQUUsQ0FBQztRQUNYLE9BQU8sSUFBSTtJQUNiLENBQUM7SUFFRCxJQUFJLEtBQUssS0FBSyxJQUFJLElBQUksS0FBSyxLQUFLLFNBQVMsRUFBRSxDQUFDO1FBQzFDLE9BQU8sS0FBSztJQUNkLENBQUM7SUFFRCw2REFBNkQ7SUFDN0QsSUFBSSxPQUFPLEtBQUssS0FBSyxRQUFRLEVBQUUsQ0FBQztRQUM5QixPQUFPLEtBQUssQ0FBQyxJQUFJLEVBQUUsS0FBSyxFQUFFO0lBQzVCLENBQUM7SUFFRCx1RUFBdUU7SUFDdkUsSUFBSSxLQUFLLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUM7UUFDekIsSUFBSSxLQUFLLENBQUMsTUFBTSxLQUFLLENBQUM7WUFBRSxPQUFPLEtBQUs7UUFDcEMsMEVBQTBFO1FBQzFFLE1BQU0sU0FBUyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUM7UUFDMUIsSUFBSSxTQUFTLElBQUksT0FBTyxTQUFTLEtBQUssUUFBUSxJQUFJLE9BQU8sSUFBSSxTQUFTLEVBQUUsQ0FBQztZQUN2RSxPQUFPLGlCQUFpQixDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUM7UUFDM0MsQ0FBQztRQUNELE9BQU8sSUFBSTtJQUNiLENBQUM7SUFFRCxzQ0FBc0M7SUFDdEMsSUFBSSxLQUFLLENBQUMsU0FBUyxJQUFJLE9BQU8sS0FBSyxDQUFDLE9BQU8sS0FBSyxVQUFVLEVBQUUsQ0FBQztRQUMzRCxNQUFNLEdBQUcsR0FBRyxLQUFLLENBQUMsT0FBTyxFQUFFO1FBQzNCLElBQUksR0FBRyxDQUFDLE1BQU0sS0FBSyxDQUFDO1lBQUUsT0FBTyxLQUFLO1FBQ2xDLE1BQU0sU0FBUyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDeEIsSUFBSSxTQUFTLElBQUksT0FBTyxTQUFTLEtBQUssUUFBUSxJQUFJLE9BQU8sSUFBSSxTQUFTLEVBQUUsQ0FBQztZQUN2RSxPQUFPLGlCQUFpQixDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUM7UUFDM0MsQ0FBQztRQUNELE9BQU8sSUFBSTtJQUNiLENBQUM7SUFFRCx1RUFBdUU7SUFDdkUsT0FBTyxJQUFJO0FBQ2IsQ0FBQztBQUVEOzs7Ozs7OztHQVFHO0FBQ0ksU0FBUyxrQkFBa0IsQ0FBRSxLQUFnQztJQUNsRSxJQUFJLENBQUMsS0FBSyxJQUFJLE9BQU8sS0FBSyxLQUFLLFFBQVEsRUFBRSxDQUFDO1FBQ3hDLE9BQU8sSUFBSTtJQUNiLENBQUM7SUFFRCxNQUFNLE9BQU8sR0FBRyxLQUFLLENBQUMsSUFBSSxFQUFFO0lBQzVCLElBQUksT0FBTyxLQUFLLEVBQUUsRUFBRSxDQUFDO1FBQ25CLE9BQU8sSUFBSTtJQUNiLENBQUM7SUFFRCxzRUFBc0U7SUFDdEUsT0FBTyxPQUFPLENBQUMsT0FBTyxDQUFDLElBQUksRUFBRSxJQUFJLENBQUM7QUFDcEMsQ0FBQztBQUVEOzs7OztHQUtHO0FBQ0ksU0FBUyxxQkFBcUIsQ0FBRSxPQUF3QjtJQUM3RCxJQUFJLENBQUMsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssRUFBRSxDQUFDO1FBQy9CLE9BQU8sT0FBTztJQUNoQixDQUFDO0lBRUQsSUFBSSxhQUFhLEdBQUcsT0FBTztJQUMzQixPQUFPLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksRUFBRSxLQUFLLEVBQUUsRUFBRTs7UUFDcEMsSUFBSSxJQUFJLENBQUMsSUFBSSxLQUFLLFFBQVEsSUFBSSxXQUFJLENBQUMsWUFBWSwwQ0FBRSxLQUFLLE1BQUssU0FBUyxFQUFFLENBQUM7WUFDckUsTUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxLQUFLO1lBRXhDLHdCQUF3QjtZQUN4QixJQUFJLE9BQU8sUUFBUSxLQUFLLFFBQVEsRUFBRSxDQUFDO2dCQUNqQyxNQUFNLGNBQWMsR0FBRyxrQkFBa0IsQ0FBQyxRQUFRLENBQUM7Z0JBQ25ELElBQUksY0FBYyxLQUFLLFFBQVEsRUFBRSxDQUFDO29CQUNoQyxhQUFhLEdBQUcsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDLE9BQU8sRUFBRSxLQUFLLEVBQUUsY0FBYyxFQUFFLE9BQU8sQ0FBQyxFQUFFLGNBQWMsQ0FBQztnQkFDaEcsQ0FBQztZQUNILENBQUM7WUFDRCx1REFBdUQ7WUFDdkQsdUVBQXVFO2lCQUNsRSxJQUFJLEtBQUssQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxRQUFRLElBQUksT0FBUSxRQUFnQixDQUFDLE9BQU8sS0FBSyxVQUFVLENBQUMsRUFBRSxDQUFDO2dCQUNsRyxNQUFNLFdBQVcsR0FBRyxPQUFRLFFBQWdCLENBQUMsT0FBTyxLQUFLLFVBQVU7Z0JBQ25FLE1BQU0sR0FBRyxHQUFHLFdBQVcsQ0FBQyxDQUFDLENBQUUsUUFBZ0IsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLENBQUUsUUFBa0I7Z0JBRTNFLElBQUksT0FBTyxHQUFHLEtBQUs7Z0JBQ25CLE1BQU0sWUFBWSxHQUFHLEdBQUcsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUU7b0JBQ2xDLElBQUksSUFBSSxJQUFJLE9BQU8sSUFBSSxLQUFLLFFBQVEsSUFBSSxPQUFPLElBQUksSUFBSSxJQUFJLE9BQU8sSUFBSSxDQUFDLEtBQUssS0FBSyxRQUFRLEVBQUUsQ0FBQzt3QkFDMUYsTUFBTSxZQUFZLEdBQUcsa0JBQWtCLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQzt3QkFDbkQsSUFBSSxZQUFZLEtBQUssSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDOzRCQUNoQyxPQUFPLEdBQUcsSUFBSTs0QkFDZCx1Q0FBWSxJQUFJLEtBQUUsS0FBSyxFQUFFLFlBQVksSUFBRTt3QkFDekMsQ0FBQztvQkFDSCxDQUFDO29CQUNELE9BQU8sSUFBSTtnQkFDYixDQUFDLENBQUM7Z0JBRUYsSUFBSSxPQUFPLEVBQUUsQ0FBQztvQkFDWiwwRUFBMEU7b0JBQzFFLG1FQUFtRTtvQkFDbkUsb0RBQW9EO29CQUNwRCxhQUFhLEdBQUcsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDLE9BQU8sRUFBRSxLQUFLLEVBQUUsY0FBYyxFQUFFLE9BQU8sQ0FBQyxFQUFFLFlBQVksQ0FBQztnQkFDOUYsQ0FBQztZQUNILENBQUM7UUFDSCxDQUFDO0lBQ0gsQ0FBQyxDQUFDO0lBRUYsT0FBTyxhQUFhO0FBQ3RCLENBQUM7QUFFTSxTQUFlLGdCQUFnQixDQUNwQyxRQUFnQyxFQUNoQyxTQUF5Qzs7O1FBRXpDLE1BQU0sRUFBRSxnQkFBZ0IsRUFBRSxtQkFBbUIsRUFBRSxxQkFBcUIsR0FBRyxFQUFFLEVBQUUsR0FBRyxTQUFTO1FBQ3ZGLE1BQU0sZUFBZSxHQUEyQixRQUFRLENBQUMsb0JBQW9CLEVBQUUsQ0FBQyxDQUFDLENBQTJCO1FBQzVHLE1BQU0sU0FBUyxHQUFHLGVBQWUsQ0FBQyxZQUFZLEVBQUU7UUFFaEQsSUFBSSxnQkFBZ0IsS0FBSywrQ0FBVSxDQUFDLGdCQUFnQixFQUFFLENBQUM7WUFDckQsSUFBSSxNQUFnQjtZQUNwQixJQUFJLG1CQUFtQixJQUFJLElBQUksRUFBRSxDQUFDO2dCQUNoQyxNQUFNLGVBQWUsR0FBRyxnRkFBMkIsQ0FBQyxTQUFTLENBQUM7Z0JBQzlELElBQUksZUFBZSxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUUsQ0FBQztvQkFDL0IsTUFBTSxZQUFZLEdBQUcsSUFBSSxHQUFHLENBQUMsZUFBZSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsQ0FBQztvQkFDdkUsTUFBTSxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDO2dCQUNuQyxDQUFDO3FCQUFNLENBQUM7b0JBQ04sK0JBQStCO29CQUMvQixNQUFNLGVBQWUsR0FBRyxRQUFRLENBQUMsU0FBUyxFQUFFO29CQUM1QyxNQUFNLEdBQUcsZ0JBQWUsYUFBZixlQUFlLHVCQUFmLGVBQWUsQ0FBRSxNQUFNLEVBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsZUFBZSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRTtnQkFDNUcsQ0FBQztZQUNILENBQUM7aUJBQU0sQ0FBQztnQkFDTixNQUFNLEdBQUcsbUJBQW1CLENBQUMsU0FBUyxDQUFDLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxDQUFDO1lBQ3hELENBQUM7WUFDRCxJQUFJLFNBQVMsRUFBRSxDQUFDO2dCQUNkLE1BQU0sVUFBVSxHQUFHLEVBQUU7Z0JBQ3JCLE1BQU0sQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLEVBQUU7b0JBQ3JCLE1BQU0sU0FBUyxHQUFHLFNBQVMsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUMsU0FBUyxDQUFDLFNBQVMsS0FBSyxLQUFLLENBQUM7b0JBQ3ZGLElBQUksU0FBUyxFQUFFLENBQUM7d0JBQ2QsU0FBUyxDQUFDLE9BQU8sR0FBRyxJQUFJO3dCQUN4QixVQUFVLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQztvQkFDNUIsQ0FBQzt5QkFBTSxDQUFDO3dCQUNOLFVBQVUsQ0FBQyxJQUFJLENBQUM7NEJBQ2QsU0FBUyxFQUFFLEtBQUs7NEJBQ2hCLEtBQUssRUFBRSxLQUFLO3lCQUNiLENBQUM7b0JBQ0osQ0FBQztnQkFDSCxDQUFDLENBQUM7Z0JBQ0YsT0FBTztvQkFDTCxhQUFhLEVBQUU7d0JBQ2IsVUFBVTt3QkFDVixPQUFPLEVBQUUsQ0FBQztnQ0FDUixJQUFJLEVBQUUsUUFBUTs2QkFDZixDQUFDO3dCQUNGLEtBQUssRUFBRSxxQkFBcUI7cUJBQzdCO2lCQUNLO1lBQ1YsQ0FBQztZQUNELE9BQU87Z0JBQ0wsYUFBYSxFQUFFO29CQUNiLFVBQVUsRUFBRSxNQUFNLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQzt3QkFDL0IsU0FBUyxFQUFFLEtBQUs7d0JBQ2hCLEtBQUssRUFBRSxLQUFLO3FCQUNiLENBQUMsQ0FBQztvQkFDSCxPQUFPLEVBQUUsQ0FBQzs0QkFDUixJQUFJLEVBQUUsUUFBUTt5QkFDZixDQUFDO29CQUNGLEtBQUssRUFBRSxxQkFBcUI7aUJBQ3RCO2FBQ1Q7UUFDSCxDQUFDO1FBQ0QsMkNBQTJDO1FBQzNDLElBQUksV0FBVztRQUNmLElBQUksZUFBZSxDQUFDLEtBQUssRUFBRSxDQUFDO1lBQzFCLFdBQVcsR0FBRyxlQUFlLENBQUMsS0FBSztRQUNyQyxDQUFDO2FBQU0sQ0FBQztZQUNOLFdBQVcsR0FBRyxNQUFNLGVBQWUsQ0FBQyw0QkFBNEIsRUFBRTtRQUNwRSxDQUFDO1FBQ0QsSUFBSSxXQUFXLEVBQUUsQ0FBQztZQUNoQixNQUFNLFdBQVcsQ0FBQyxJQUFJLEVBQUU7UUFDMUIsQ0FBQztRQUNELE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxrQkFBVyxhQUFYLFdBQVcsdUJBQVgsV0FBVyxDQUFFLGVBQWUsMENBQUUsb0JBQW9CLE1BQUksV0FBVyxhQUFYLFdBQVcsdUJBQVgsV0FBVyxDQUFFLG9CQUFvQixHQUFFO0lBQzFILENBQUM7Q0FBQTtBQUVNLFNBQVMsbUJBQW1CLENBQ2pDLFFBQWdDLEVBQ2hDLE9BQXdCLEVBQ3hCLGFBQStCLEVBQy9CLFNBQXlDLEVBQ3pDLElBQVksRUFDWixRQUFnQjs7SUFFaEIsTUFBTSxrQkFBa0IsR0FBRyxRQUFRLENBQUMsaUJBQWlCLEVBQUU7SUFDdkQsTUFBTSxlQUFlLEdBQTJCLFFBQVEsQ0FBQyxvQkFBb0IsRUFBRSxDQUFDLENBQUMsQ0FBMkI7SUFDNUcsTUFBTSxTQUFTLEdBQUcsa0JBQWtCLGFBQWxCLGtCQUFrQix1QkFBbEIsa0JBQWtCLENBQUUsMEJBQTBCO0lBQ2hFLElBQUksU0FBUyxFQUFFLENBQUM7UUFDZCxRQUFRLENBQUMsZ0JBQWdCLENBQUMsZUFBZSxDQUFDLGdCQUFnQixFQUFFLENBQUM7SUFDL0QsQ0FBQztJQUVELE1BQU0sRUFBRSxrQkFBa0IsRUFBRSxnQkFBZ0IsRUFBRSxXQUFXLEVBQUUsZ0JBQWdCLEVBQUUsbUJBQW1CLEVBQUUscUJBQXFCLEVBQUUsR0FBRyxTQUFTO0lBRXJJLCtEQUErRDtJQUMvRCxtRkFBbUY7SUFDbkYsNEVBQTRFO0lBQzVFLDhEQUE4RDtJQUM5RCxJQUFJLFlBQVksR0FBYSxFQUFFO0lBQy9CLElBQUksZ0JBQWdCLEtBQUssK0NBQVUsQ0FBQyxnQkFBZ0IsSUFBSSxtQkFBbUIsRUFBRSxDQUFDO1FBQzVFLFlBQVksR0FBRyxhQUFhLENBQUMsbUJBQTBCLEVBQUUscUJBQXFCLElBQUksRUFBRSxFQUFFLFFBQVEsQ0FBQyxVQUFVLEVBQUUsQ0FBQztJQUM5RyxDQUFDO1NBQU0sQ0FBQztRQUNOLHNEQUFzRDtRQUN0RCxNQUFNLFNBQVMsR0FBRyxlQUFlLENBQUMsWUFBWSxFQUFFO1FBQ2hELE1BQU0sVUFBVSxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMscUJBQWUsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxNQUFNLG1DQUFJLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUM7UUFDM0YsTUFBTSxlQUFlLEdBQUcsZUFBUyxhQUFULFNBQVMsdUJBQVQsU0FBUyxDQUFFLFVBQVUsMENBQUUsTUFBTSxDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUMsU0FBUyxDQUFDLE9BQU8sS0FBSyxLQUFLLElBQUksVUFBVSxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDM0ksWUFBWSxHQUFHLGdCQUFlLGFBQWYsZUFBZSx1QkFBZixlQUFlLENBQUUsR0FBRyxDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxLQUFJLEVBQUU7UUFFM0UscUNBQXFDO1FBQ3JDLE1BQU0sT0FBTyxHQUFHLFFBQVEsQ0FBQyxVQUFVLEVBQUU7UUFDckMsSUFBSSxPQUFPLElBQUksQ0FBQyxZQUFZLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUM7WUFDL0MsWUFBWSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUM7UUFDNUIsQ0FBQztJQUNILENBQUM7SUFFRCxNQUFNLGlCQUFpQixHQUFHLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxxQkFBZSxDQUFDLHFCQUFxQixFQUFFLG1DQUFJLEVBQUUsRUFBRTtRQUNqRyxLQUFLLEVBQUUsQ0FBQyxrQkFBa0IsS0FBSSxPQUFPLGFBQVAsT0FBTyx1QkFBUCxPQUFPLENBQUUsR0FBRyxFQUFDLENBQUMsQ0FBQyxDQUFDLHNEQUFlLENBQUMsWUFBWSxDQUFDLE9BQU8sRUFBRSxRQUFRLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEtBQUs7UUFDekcsYUFBYSxFQUFFLENBQUMsa0JBQWtCLEtBQUksT0FBTyxhQUFQLE9BQU8sdUJBQVAsT0FBTyxDQUFFLEdBQUcsRUFBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLElBQUk7UUFDcEUsbUVBQW1FO1FBQ25FLFNBQVMsRUFBRSxZQUFZO0tBQ2pCLENBQUM7SUFFVCxvREFBb0Q7SUFDcEQsaUZBQWlGO0lBQ2pGLG1GQUFtRjtJQUNuRixpREFBaUQ7SUFDakQsSUFBSSxpQkFBaUIsQ0FBQyxLQUFLLElBQUksaUJBQWlCLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDO1FBQzFFLE1BQU0sY0FBYyxHQUFHLGlCQUFpQixDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsMkNBQTJDLEVBQUUsQ0FBQyxLQUFLLEVBQUUsS0FBSyxFQUFFLFFBQVEsRUFBRSxLQUFLLEVBQUUsRUFBRTtZQUNwSSxvRUFBb0U7WUFDcEUsdURBQXVEO1lBQ3ZELE9BQU8sR0FBRyxLQUFLLElBQUksUUFBUSxLQUFLLEtBQUssQ0FBQyxXQUFXLEVBQUUsR0FBRztRQUN4RCxDQUFDLENBQUM7UUFFRixJQUFJLGNBQWMsS0FBSyxpQkFBaUIsQ0FBQyxLQUFLLEVBQUUsQ0FBQztZQUMvQyxXQUFXLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBRTtnQkFDdEIsS0FBSyxFQUFFLGVBQWU7Z0JBQ3RCLFFBQVEsRUFBRSxpQkFBaUIsQ0FBQyxLQUFLO2dCQUNqQyxTQUFTLEVBQUUsY0FBYzthQUMxQixDQUFDO1lBQ0YsaUJBQWlCLENBQUMsS0FBSyxHQUFHLGNBQWM7UUFDMUMsQ0FBQztJQUNILENBQUM7SUFFRCxpQ0FBaUM7SUFDakMsTUFBTSxXQUFXO1FBQ2YsZUFBZTtRQUNmLGNBQWMsRUFBRSxJQUFJO1FBQ3BCOztXQUVHO1FBQ0gsa0JBQWtCLEVBQUUsR0FBRyxFQUN2QixJQUFJO1FBQ0osZ0VBQWdFO1FBQ2hFLFFBQVEsRUFBRSxDQUFDLFFBQVEsSUFBSSxRQUFRLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsSUFBSSxJQUN0RCxpQkFBaUIsQ0FDckI7SUFFRCx5RUFBeUU7SUFDekUsSUFBSSxDQUFDLFdBQVcsQ0FBQyxTQUFTLElBQUksV0FBVyxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQztRQUNsRSxXQUFXLENBQUMsU0FBUyxHQUFHLFlBQVk7SUFDdEMsQ0FBQztJQUVELDJEQUEyRDtJQUMzRCxXQUFXLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBRTtRQUN0QixLQUFLLEVBQUUsaUJBQWlCO1FBQ3hCLFdBQVcsRUFBRSxpQkFBVyxDQUFDLFNBQVMsMENBQUUsTUFBTTtRQUMxQyxNQUFNLEVBQUUsaUJBQVcsQ0FBQyxTQUFTLDBDQUFFLElBQUksQ0FBQyxJQUFJLENBQUM7UUFDekMsUUFBUSxFQUFFLFdBQVcsQ0FBQyxRQUFRO1FBQzlCLE1BQU0sRUFBRSxXQUFXLENBQUMsa0JBQWtCO0tBQ3ZDLENBQUM7SUFFRixJQUFJLGdCQUFnQixLQUFJLGFBQWEsYUFBYixhQUFhLHVCQUFiLGFBQWEsQ0FBRSxRQUFRLEdBQUUsQ0FBQztRQUNoRCxNQUFNLEVBQUUsUUFBUSxFQUFFLFFBQVEsR0FBRyxvREFBZSxDQUFDLFNBQVMsRUFBRSxNQUFNLEVBQUUsR0FBRyxhQUFhO1FBRWhGLE1BQU0sa0JBQWtCLEdBQTRCO1lBQ2xELFlBQVksRUFBRSxzREFBZSxDQUFDLDRDQUE0QyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUM7WUFDekYsUUFBUSxFQUFFLFFBQVEsQ0FBQyxNQUFNLEVBQUU7WUFDM0IsVUFBVSxFQUFFLHFFQUFnQyxDQUFDLFFBQVEsQ0FBQztZQUN0RCxRQUFRLEVBQUUsTUFBTSxhQUFOLE1BQU0sdUJBQU4sTUFBTSxDQUFFLFFBQVE7WUFDMUIsS0FBSyxFQUFFLE9BQU0sYUFBTixNQUFNLHVCQUFOLE1BQU0sQ0FBRSxJQUFJLEVBQUMsQ0FBQyxDQUFDLHlEQUFvQixDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUztTQUNwRTtRQUNELE1BQU0sQ0FBQyxNQUFNLENBQUMsV0FBVyxFQUFFLGtCQUFrQixDQUFDO0lBQ2hELENBQUM7SUFFRCxJQUFJLFlBQVcsYUFBWCxXQUFXLHVCQUFYLFdBQVcsQ0FBRSxNQUFNLElBQUcsQ0FBQyxFQUFFLENBQUM7UUFDNUIsTUFBTSxDQUFDLE1BQU0sQ0FBQyxXQUFXLEVBQUU7WUFDekIsYUFBYSxFQUFFLFdBQVcsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxhQUFhLElBQUksSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDO1NBQzlFLENBQUM7SUFDSixDQUFDO0lBRUQsT0FBTyxXQUFXO0FBQ3BCLENBQUM7QUFFTSxTQUFlLGlCQUFpQixDQUNyQyxRQUFnQixFQUNoQixRQUFnQyxFQUNoQyxXQUF3Qjs7UUFFeEIsTUFBTSxNQUFNLEdBQUcsTUFBTSxRQUFRLENBQUMsU0FBUyxDQUFDLFdBQVcsRUFBRSxFQUFFLFFBQVEsRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLENBQUM7UUFDakYsT0FBTyxNQUFNLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDcEMsQ0FBQztDQUFBO0FBRU0sU0FBZSxZQUFZLENBQ2hDLFFBQWdCLEVBQ2hCLFNBQXlDLEVBQ3pDLFFBQWdDLEVBQ2hDLFdBQXdCOztRQUV4QixNQUFNLFNBQVMsR0FBRyxRQUFRLENBQUMsWUFBWSxFQUFFO1FBRXpDLE1BQU0sZUFBZSxHQUFHLFFBQVEsQ0FBQyxrQkFBa0IsRUFBRTtRQUNyRCxNQUFNLG9CQUFvQixHQUFHLEdBQUcsRUFBRTs7WUFDaEM7Z0JBQ0UsRUFBRSxTQUFTLEVBQUUscUJBQWUsYUFBZixlQUFlLHVCQUFmLGVBQWUsQ0FBRSxhQUFhLG1DQUFJLFVBQVUsRUFBRSxLQUFLLEVBQUUsVUFBVSxFQUFFLE9BQU8sRUFBRSxFQUFFLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRTthQUMzRjtTQUFBO1FBQ25CLE1BQU0sVUFBVSxHQUFHLENBQUMsQ0FBQyxVQUFVLEVBQUUsRUFBRSxDQUFDLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxvQkFBb0IsRUFBRSxDQUFDLENBQUMsQ0FDNUYsQ0FBQyxVQUFTLGFBQVQsU0FBUyx1QkFBVCxTQUFTLENBQUUsVUFBVSxLQUFJLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUN2RDtRQUNELDhDQUE4QztRQUM5Qyx5QkFBeUI7UUFDekIsb0VBQW9FO1FBQ3BFLCtGQUErRjtRQUMvRixXQUFXO1FBQ1gsNEVBQTRFO1FBQzVFLElBQUk7UUFDSix3Q0FBd0M7UUFDeEMsbUdBQW1HO1FBQ25HLFNBQVM7UUFDVCxxREFBcUQ7UUFDckQsTUFBTSxTQUFTLEdBQUcsV0FBVyxDQUFDLEdBQUcsRUFBRTtRQUNuQyxJQUFJLE9BQU8sR0FBRyxNQUFNLFFBQVEsQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLEVBQUUsUUFBUSxFQUFFLENBQUM7UUFDNUQsTUFBTSxTQUFTLEdBQUcsV0FBVyxDQUFDLEdBQUcsRUFBRSxHQUFHLFNBQVM7UUFFL0MsSUFBSSxPQUFPLElBQUksSUFBSSxFQUFFLENBQUM7WUFDcEIsT0FBTyxHQUFHLEVBQUU7UUFDZCxDQUFDO1FBQ0QsTUFBTSxRQUFRLEdBQTJCLFFBQVEsQ0FBQyxvQkFBb0IsRUFBRSxDQUFDLENBQUMsQ0FBMkI7UUFFckcsTUFBTSxjQUFjLEdBQUcsV0FBVyxDQUFDLEdBQUcsRUFBRTtRQUN4QyxNQUFNLFdBQVcsR0FBRyxNQUFNLGNBQWMsQ0FBQyxRQUFRLENBQUM7UUFDbEQsTUFBTSxTQUFTLEdBQUcsV0FBVyxDQUFDLEdBQUcsRUFBRSxHQUFHLGNBQWM7UUFFcEQsV0FBVyxDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUU7WUFDdEIsS0FBSyxFQUFFLGdCQUFnQjtZQUN2QixTQUFTLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUM7WUFDaEMsU0FBUyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDO1lBQ2hDLFNBQVMsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxHQUFHLEVBQUUsR0FBRyxTQUFTLENBQUM7WUFDcEQsV0FBVyxFQUFFLE9BQU8sQ0FBQyxNQUFNO1NBQzVCLENBQUM7UUFFRixPQUFPLENBQUMsT0FBTyxDQUFDLENBQUMsTUFBTSxFQUFFLEVBQUU7WUFDekIsTUFBTSxPQUFPLEdBQUksTUFBYyxDQUFDLE9BQU87WUFDdkMsSUFBSSxXQUFXLEVBQUUsQ0FBQztnQkFDaEIsT0FBTyxDQUFDLFdBQVcsR0FBSSxXQUFtQixDQUFDLGVBQWUsSUFBSSxXQUFXO1lBQzNFLENBQUM7WUFDRCxPQUFPLENBQUMsS0FBSyxHQUFHLE9BQU8sQ0FBQyxXQUFXO1FBQ3JDLENBQUMsQ0FBQztRQUNGLE1BQU0sV0FBVyxHQUFHO1lBQ2xCLE9BQU87WUFDUCxNQUFNLEVBQUUsVUFBVSxDQUFDLEdBQUcsQ0FBQyxDQUFDLFNBQVMsRUFBRSxFQUFFLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQztTQUMzRDtRQUVELGtCQUFrQjtRQUNsQixNQUFNLDBCQUEwQixHQUFHLElBQUksaUVBQTBCLENBQUMsUUFBUSxFQUFFLDBEQUFtQixDQUFDLFlBQVksRUFBRSxDQUFDO2dCQUM3RyxPQUFPLEVBQUUsUUFBUSxDQUFDLG1CQUFtQixFQUFFO2dCQUN2QyxNQUFNLEVBQUUsV0FBVyxDQUFDLE1BQU07Z0JBQzFCLFVBQVUsRUFBRSxRQUFRO2dCQUNwQixJQUFJLEVBQUUsUUFBUSxDQUFDLEVBQUU7Z0JBQ2pCLEtBQUssRUFBRSxRQUFRLENBQUMsUUFBUSxFQUFFO2FBQzNCLENBQUMsQ0FBQztRQUNILHFEQUFjLENBQUMsV0FBVyxFQUFFLENBQUMsY0FBYyxDQUFDLDBCQUEwQixDQUFDO1FBRXZFLE9BQU8sV0FBVztJQUNwQixDQUFDO0NBQUE7QUFFRCxTQUFlLGNBQWMsQ0FBRSxVQUFrQzs7UUFDL0QsTUFBTSxXQUFXLEdBQUcsTUFBTSxVQUFVLENBQUMsNEJBQTRCLEVBQWtCO1FBQ25GLGtFQUFrRTtRQUNsRSxJQUFJLFdBQVcsRUFBRSxDQUFDO1lBQ2hCLE1BQU0sV0FBVyxDQUFDLElBQUksRUFBRTtRQUMxQixDQUFDO1FBQ0QsT0FBTyxXQUFXO0lBQ3BCLENBQUM7Q0FBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDdGJEOzs7R0FHRzs7Ozs7Ozs7OztBQUdnSztBQUMxRjtBQUNUO0FBRWhFLE1BQU0sV0FBVyxHQUFHLHdGQUE0QixFQUFFO0FBRWxEOzs7Ozs7O0dBT0c7QUFDSSxTQUFTLFlBQVksQ0FDMUIsTUFBeUIsRUFDekIsUUFBZ0M7O0lBRWhDLE1BQU0sUUFBUSxHQUFHLGNBQVEsQ0FBQyxvQkFBb0IsRUFBRSwwQ0FBRyxDQUFDLENBQTJCO0lBQy9FLE1BQU0sVUFBVSxHQUFHLFNBQVEsYUFBUixRQUFRLHVCQUFSLFFBQVEsQ0FBRSxFQUFFLEtBQUksUUFBUSxDQUFDLEVBQUUsRUFBQyxvQ0FBb0M7SUFDbkYsTUFBTSxRQUFRLEdBQUcsTUFBTSxDQUFDLEtBQUssRUFBRTtJQUMvQixNQUFNLEdBQUcsR0FBRyxHQUFHLFVBQVUsSUFBSSxRQUFRLEVBQUU7SUFFdkMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxjQUFjLEVBQUU7UUFDOUIsS0FBSyxFQUFFLHNCQUFzQjtRQUM3QixVQUFVO1FBQ1YsUUFBUTtRQUNSLEdBQUc7UUFDSCxXQUFXLEVBQUUsQ0FBQyxDQUFDLFFBQVE7S0FDeEIsQ0FBQztJQUVGLE9BQU8sR0FBRztBQUNaLENBQUM7QUFFRDs7Ozs7OztHQU9HO0FBQ0ksU0FBZSxrQ0FBa0MsQ0FDdEQsUUFBZ0IsRUFDaEIsUUFBZ0M7O1FBRWhDLE1BQU0sZUFBZSxHQUFHLEdBQUcsUUFBUSxzQkFBc0I7UUFFekQsV0FBVyxDQUFDLEdBQUcsQ0FBQyxjQUFjLEVBQUU7WUFDOUIsS0FBSyxFQUFFLHlCQUF5QjtZQUNoQyxRQUFRO1lBQ1IsZUFBZTtZQUNmLFVBQVUsRUFBRSxRQUFRLENBQUMsRUFBRTtTQUN4QixDQUFDO1FBRUYsc0NBQXNDO1FBQ3RDLE1BQU0sU0FBUyxHQUFHLHdEQUFpQixDQUFDLFdBQVcsRUFBRTtRQUNqRCxJQUFJLGFBQWEsR0FBRyxTQUFTLENBQUMsYUFBYSxDQUFDLGVBQWUsQ0FBMkI7UUFFdEYsSUFBSSxhQUFhLEVBQUUsQ0FBQztZQUNsQixXQUFXLENBQUMsR0FBRyxDQUFDLGNBQWMsRUFBRTtnQkFDOUIsS0FBSyxFQUFFLCtCQUErQjtnQkFDdEMsZUFBZTthQUNoQixDQUFDO1lBQ0YsT0FBTyxhQUFhO1FBQ3RCLENBQUM7UUFFRCwyREFBMkQ7UUFDM0QsTUFBTSxvQkFBb0IsR0FBRyxRQUFRLENBQUMsaUJBQWlCLEVBQUU7UUFFekQsNkVBQTZFO1FBQzdFLE1BQU0sb0JBQW9CLEdBQUc7WUFDM0IsRUFBRSxFQUFFLGVBQWU7WUFDbkIsS0FBSyxFQUFFLHFCQUFxQjtZQUM1QixJQUFJLEVBQUUsb0JBQW9CLGFBQXBCLG9CQUFvQix1QkFBcEIsb0JBQW9CLENBQUUsSUFBSTtZQUNoQyxZQUFZLEVBQUUsb0JBQW9CLGFBQXBCLG9CQUFvQix1QkFBcEIsb0JBQW9CLENBQUUsWUFBWTtZQUNoRCxHQUFHLEVBQUUsb0JBQW9CLGFBQXBCLG9CQUFvQix1QkFBcEIsb0JBQW9CLENBQUUsR0FBRztZQUM5QixNQUFNLEVBQUUsb0JBQW9CLGFBQXBCLG9CQUFvQix1QkFBcEIsb0JBQW9CLENBQUUsTUFBTTtZQUNwQyxTQUFTLEVBQUUsb0JBQW9CLGFBQXBCLG9CQUFvQix1QkFBcEIsb0JBQW9CLENBQUUsU0FBUztZQUMxQyxpQkFBaUIsRUFBRSxDQUFDO29CQUNsQixZQUFZLEVBQUUsUUFBUSxDQUFDLEVBQUU7b0JBQ3pCLGdCQUFnQixFQUFFLFFBQVEsQ0FBQyxFQUFFO29CQUM3QixnQkFBZ0IsRUFBRSxRQUFRLENBQUMsRUFBRTtpQkFDOUIsQ0FBQztZQUNGLE9BQU8sRUFBRSxvQkFBb0IsYUFBcEIsb0JBQW9CLHVCQUFwQixvQkFBb0IsQ0FBRSxPQUFPO1lBQ3RDLDBCQUEwQixFQUFFLG9CQUFvQixhQUFwQixvQkFBb0IsdUJBQXBCLG9CQUFvQixDQUFFLDBCQUEwQjtZQUM1RSxrQkFBa0IsRUFBRSxJQUFJO1NBQ3pCO1FBRUQsaURBQWlEO1FBQ2pELG1GQUFtRjtRQUNuRixhQUFhLEdBQUcsU0FBUyxDQUFDLGdDQUFnQyxDQUFDLG9CQUFvQixDQUEyQjtRQUUxRyxxQkFBcUI7UUFDckIsYUFBYSxDQUFDLFNBQVMsQ0FBQyx1REFBZ0IsQ0FBQyxRQUFRLENBQUM7UUFDbEQsYUFBYSxDQUFDLGNBQWMsQ0FBQyx1REFBZ0IsQ0FBQyxRQUFRLENBQUM7UUFFdkQsV0FBVyxDQUFDLEdBQUcsQ0FBQyxjQUFjLEVBQUU7WUFDOUIsS0FBSyxFQUFFLHdCQUF3QjtZQUMvQixlQUFlO1lBQ2YsVUFBVSxFQUFFLFFBQVEsQ0FBQyxFQUFFO1lBQ3ZCLE1BQU0sRUFBRSxhQUFhLENBQUMsU0FBUyxFQUFFO1NBQ2xDLENBQUM7UUFFRixPQUFPLGFBQWE7SUFDdEIsQ0FBQztDQUFBO0FBRUQ7Ozs7Ozs7Ozs7OztHQVlHO0FBQ0ksU0FBUywyQkFBMkIsQ0FDekMsUUFBZ0MsRUFDaEMsVUFBK0IsRUFDL0Isa0JBQXVDLEVBQUU7SUFFekMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxjQUFjLEVBQUU7UUFDOUIsS0FBSyxFQUFFLHVCQUF1QjtRQUM5QixVQUFVLEVBQUUsUUFBUSxDQUFDLEVBQUU7UUFDdkIsb0JBQW9CLEVBQUUsZUFBZSxDQUFDLE1BQU07UUFDNUMsZUFBZSxFQUFFLFVBQVUsQ0FBQyxNQUFNO0tBQ25DLENBQUM7SUFFRixvREFBb0Q7SUFDcEQsTUFBTSxZQUFZLEdBQUcsSUFBSSxHQUFHLENBQzFCLGVBQWUsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxZQUFZLENBQUMsTUFBTSxFQUFFLFFBQVEsQ0FBQyxDQUFDLENBQzlEO0lBRUQsV0FBVyxDQUFDLEdBQUcsQ0FBQyxjQUFjLEVBQUU7UUFDOUIsS0FBSyxFQUFFLHdCQUF3QjtRQUMvQixvQkFBb0IsRUFBRSxlQUFlLENBQUMsTUFBTTtRQUM1QyxpQkFBaUIsRUFBRSxZQUFZLENBQUMsSUFBSTtLQUNyQyxDQUFDO0lBRUYsb0VBQW9FO0lBQ3BFLE1BQU0sZ0JBQWdCLEdBQUcsVUFBVSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRTtRQUNsRCxNQUFNLEdBQUcsR0FBRyxZQUFZLENBQUMsTUFBTSxFQUFFLFFBQVEsQ0FBQztRQUMxQyxNQUFNLFdBQVcsR0FBRyxZQUFZLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQztRQUV6QyxJQUFJLFdBQVcsRUFBRSxDQUFDO1lBQ2hCLFdBQVcsQ0FBQyxHQUFHLENBQUMsY0FBYyxFQUFFO2dCQUM5QixLQUFLLEVBQUUsMEJBQTBCO2dCQUNqQyxHQUFHO2dCQUNILFFBQVEsRUFBRSxNQUFNLENBQUMsS0FBSyxFQUFFO2FBQ3pCLENBQUM7UUFDSixDQUFDO1FBRUQsT0FBTyxDQUFDLFdBQVc7SUFDckIsQ0FBQyxDQUFDO0lBRUYsV0FBVyxDQUFDLEdBQUcsQ0FBQyxjQUFjLEVBQUU7UUFDOUIsS0FBSyxFQUFFLHdCQUF3QjtRQUMvQixlQUFlLEVBQUUsVUFBVSxDQUFDLE1BQU07UUFDbEMscUJBQXFCLEVBQUUsZ0JBQWdCLENBQUMsTUFBTTtRQUM5QyxpQkFBaUIsRUFBRSxVQUFVLENBQUMsTUFBTSxHQUFHLGdCQUFnQixDQUFDLE1BQU07S0FDL0QsQ0FBQztJQUVGLGdCQUFnQjtJQUNoQixNQUFNLGFBQWEsR0FBRyxDQUFDLEdBQUcsZUFBZSxFQUFFLEdBQUcsZ0JBQWdCLENBQUM7SUFFL0QsV0FBVyxDQUFDLEdBQUcsQ0FBQyxjQUFjLEVBQUU7UUFDOUIsS0FBSyxFQUFFLGdCQUFnQjtRQUN2QixzQkFBc0IsRUFBRSxhQUFhLENBQUMsTUFBTTtRQUM1QyxhQUFhLEVBQUUsZUFBZSxDQUFDLE1BQU07UUFDckMsY0FBYyxFQUFFLGdCQUFnQixDQUFDLE1BQU07S0FDeEMsQ0FBQztJQUVGLE9BQU8sYUFBYTtBQUN0QixDQUFDO0FBRUQ7Ozs7Ozs7Ozs7OztHQVlHO0FBQ0ksU0FBUyw0QkFBNEIsQ0FDMUMsUUFBZ0MsRUFDaEMsZUFBb0MsRUFDcEMsNkJBQWtELEVBQUU7SUFFcEQsV0FBVyxDQUFDLEdBQUcsQ0FBQyxjQUFjLEVBQUU7UUFDOUIsS0FBSyxFQUFFLHdCQUF3QjtRQUMvQixVQUFVLEVBQUUsUUFBUSxDQUFDLEVBQUU7UUFDdkIsb0JBQW9CLEVBQUUsZUFBZSxDQUFDLE1BQU07UUFDNUMsK0JBQStCLEVBQUUsMEJBQTBCLENBQUMsTUFBTTtLQUNuRSxDQUFDO0lBRUYsK0NBQStDO0lBQy9DLElBQUksMEJBQTBCLENBQUMsTUFBTSxLQUFLLENBQUMsRUFBRSxDQUFDO1FBQzVDLFdBQVcsQ0FBQyxHQUFHLENBQUMsY0FBYyxFQUFFO1lBQzlCLEtBQUssRUFBRSxrQ0FBa0M7WUFDekMsVUFBVSxFQUFFLFFBQVEsQ0FBQyxFQUFFO1NBQ3hCLENBQUM7UUFDRixPQUFPLEVBQUU7SUFDWCxDQUFDO0lBRUQsNkRBQTZEO0lBQzdELElBQUksZUFBZSxDQUFDLE1BQU0sS0FBSyxDQUFDLEVBQUUsQ0FBQztRQUNqQyxXQUFXLENBQUMsR0FBRyxDQUFDLGNBQWMsRUFBRTtZQUM5QixLQUFLLEVBQUUsc0JBQXNCO1lBQzdCLFVBQVUsRUFBRSxRQUFRLENBQUMsRUFBRTtZQUN2QiwrQkFBK0IsRUFBRSwwQkFBMEIsQ0FBQyxNQUFNO1NBQ25FLENBQUM7UUFDRixPQUFPLDBCQUEwQjtJQUNuQyxDQUFDO0lBRUQsOENBQThDO0lBQzlDLE1BQU0sVUFBVSxHQUFHLElBQUksR0FBRyxDQUN4QixlQUFlLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsWUFBWSxDQUFDLE1BQU0sRUFBRSxRQUFRLENBQUMsQ0FBQyxDQUM5RDtJQUVELFdBQVcsQ0FBQyxHQUFHLENBQUMsY0FBYyxFQUFFO1FBQzlCLEtBQUssRUFBRSxtQkFBbUI7UUFDMUIsK0JBQStCLEVBQUUsMEJBQTBCLENBQUMsTUFBTTtRQUNsRSxlQUFlLEVBQUUsVUFBVSxDQUFDLElBQUk7S0FDakMsQ0FBQztJQUVGLCtDQUErQztJQUMvQyxNQUFNLGdCQUFnQixHQUF3QixFQUFFO0lBQ2hELE1BQU0sY0FBYyxHQUF3QixFQUFFO0lBRTlDLDBCQUEwQixDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsRUFBRTs7UUFDMUMsTUFBTSxHQUFHLEdBQUcsWUFBWSxDQUFDLE1BQU0sRUFBRSxRQUFRLENBQUM7UUFDMUMsTUFBTSxZQUFZLEdBQUcsVUFBVSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUM7UUFFeEMsSUFBSSxZQUFZLEVBQUUsQ0FBQztZQUNqQixjQUFjLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQztZQUMzQixXQUFXLENBQUMsR0FBRyxDQUFDLGNBQWMsRUFBRTtnQkFDOUIsS0FBSyxFQUFFLDJCQUEyQjtnQkFDbEMsR0FBRztnQkFDSCxRQUFRLEVBQUUsTUFBTSxDQUFDLEtBQUssRUFBRTtnQkFDeEIsVUFBVSxFQUFFLG1CQUFDLFlBQU0sQ0FBQyxhQUFhLHNEQUErQiwwQ0FBRSxvQkFBb0IsRUFBRSwwQ0FBRyxDQUFDLENBQUMsMENBQUUsRUFBRSxLQUFJLFNBQVM7YUFDL0csQ0FBQztRQUNKLENBQUM7YUFBTSxDQUFDO1lBQ04sZ0JBQWdCLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQztRQUMvQixDQUFDO0lBQ0gsQ0FBQyxDQUFDO0lBRUYsV0FBVyxDQUFDLEdBQUcsQ0FBQyxjQUFjLEVBQUU7UUFDOUIsS0FBSyxFQUFFLGtCQUFrQjtRQUN6QixjQUFjLEVBQUUsY0FBYyxDQUFDLE1BQU07UUFDckMscUJBQXFCLEVBQUUsZ0JBQWdCLENBQUMsTUFBTTtRQUM5QyxvQkFBb0IsRUFBRSxlQUFlLENBQUMsTUFBTTtRQUM1QyxtQkFBbUIsRUFBRSxjQUFjLENBQUMsTUFBTTtRQUMxQyxxQkFBcUIsRUFBRSxlQUFlLENBQUMsTUFBTSxHQUFHLGNBQWMsQ0FBQyxNQUFNO0tBQ3RFLENBQUM7SUFFRixPQUFPLGdCQUFnQjtBQUN6QixDQUFDO0FBRUQ7Ozs7Ozs7Ozs7O0dBV0c7QUFDSSxTQUFTLGlDQUFpQyxDQUMvQyxRQUFnQixFQUNoQixlQUFvQyxFQUNwQyxRQUFnQyxFQUNoQyxnQkFBMEIsRUFDMUIsYUFBb0M7SUFFcEMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxjQUFjLEVBQUU7UUFDOUIsS0FBSyxFQUFFLCtDQUErQztRQUN0RCxRQUFRO1FBQ1Isb0JBQW9CLEVBQUUsZUFBZSxDQUFDLE1BQU07UUFDNUMsVUFBVSxFQUFFLFFBQVEsQ0FBQyxFQUFFO1FBQ3ZCLGdCQUFnQixFQUFFLENBQUMsQ0FBQyxnQkFBZ0I7UUFDcEMsZ0JBQWdCLEVBQUUsQ0FBQyxDQUFDLGFBQWE7S0FDbEMsQ0FBQztJQUVGLElBQUksZUFBZSxDQUFDLE1BQU0sS0FBSyxDQUFDLEVBQUUsQ0FBQztRQUNqQyxXQUFXLENBQUMsR0FBRyxDQUFDLGNBQWMsRUFBRTtZQUM5QixLQUFLLEVBQUUscUNBQXFDO1lBQzVDLFFBQVE7U0FDVCxDQUFDO1FBQ0YsT0FBTTtJQUNSLENBQUM7SUFFRCxrRUFBa0U7SUFDbEUsSUFBSSxnQkFBZ0IsSUFBSSxhQUFhLEVBQUUsQ0FBQztRQUN0QyxNQUFNLGlCQUFpQixHQUFHLGVBQWUsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsS0FBSyxFQUFFLENBQUM7UUFDdkUsV0FBVyxDQUFDLEdBQUcsQ0FBQyxjQUFjLEVBQUU7WUFDOUIsS0FBSyxFQUFFLDhCQUE4QjtZQUNyQyxRQUFRO1lBQ1IsY0FBYyxFQUFFLGlCQUFpQixDQUFDLE1BQU07WUFDeEMsZUFBZSxFQUFFLGFBQWEsQ0FBQyxFQUFFO1NBQ2xDLENBQUM7UUFDRiw4RUFBdUIsQ0FBQyxhQUFhLEVBQUUsaUJBQWlCLENBQUM7SUFDM0QsQ0FBQztJQUVELDRDQUE0QztJQUM1QyxNQUFNLGlCQUFpQixHQUFHLElBQUksR0FBRyxFQUErQztJQUVoRixlQUFlLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxFQUFFOztRQUMvQixNQUFNLFFBQVEsR0FBRyxZQUFNLENBQUMsYUFBYSxzREFBOEI7UUFDbkUsSUFBSSxRQUFRLEdBQWtDLElBQUk7UUFFbEQsSUFBSSxRQUFRLEVBQUUsQ0FBQztZQUNiLFFBQVEsR0FBRyxlQUFRLENBQUMsb0JBQW9CLEVBQUUsMENBQUcsQ0FBQyxDQUEyQixLQUFJLFFBQVE7UUFDdkYsQ0FBQzthQUFNLENBQUM7WUFDTiw0Q0FBNEM7WUFDNUMsUUFBUSxHQUFHLGVBQVEsQ0FBQyxvQkFBb0IsRUFBRSwwQ0FBRyxDQUFDLENBQTJCLEtBQUksSUFBSTtRQUNuRixDQUFDO1FBRUQsSUFBSSxRQUFRLEVBQUUsQ0FBQztZQUNiLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQztnQkFDckMsaUJBQWlCLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBRSxFQUFFLENBQUM7WUFDckMsQ0FBQztZQUNELGlCQUFpQixDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUUsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDO1FBQy9DLENBQUM7SUFDSCxDQUFDLENBQUM7SUFFRixXQUFXLENBQUMsR0FBRyxDQUFDLGNBQWMsRUFBRTtRQUM5QixLQUFLLEVBQUUsMkJBQTJCO1FBQ2xDLFFBQVE7UUFDUixhQUFhLEVBQUUsaUJBQWlCLENBQUMsSUFBSTtRQUNyQyxpQkFBaUIsRUFBRSxLQUFLLENBQUMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsT0FBTyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7WUFDakYsVUFBVSxFQUFFLEVBQUUsQ0FBQyxFQUFFO1lBQ2pCLFdBQVcsRUFBRSxPQUFPLENBQUMsTUFBTTtTQUM1QixDQUFDLENBQUM7S0FDSixDQUFDO0lBRUYsd0VBQXdFO0lBQ3hFLGlCQUFpQixDQUFDLE9BQU8sQ0FBQyxDQUFDLHdCQUF3QixFQUFFLFFBQVEsRUFBRSxFQUFFO1FBQy9ELElBQUksQ0FBQztZQUNILG1EQUFtRDtZQUNuRCxNQUFNLHNCQUFzQixHQUFHLFFBQVEsQ0FBQyxrQkFBa0IsRUFBRSxJQUFJLEVBQUU7WUFDbEUsTUFBTSxrQkFBa0IsR0FBRyxRQUFRLENBQUMsb0JBQW9CLEVBQUUsSUFBSSxFQUFFO1lBRWhFLFdBQVcsQ0FBQyxHQUFHLENBQUMsY0FBYyxFQUFFO2dCQUM5QixLQUFLLEVBQUUsOEJBQThCO2dCQUNyQyxRQUFRO2dCQUNSLFVBQVUsRUFBRSxRQUFRLENBQUMsRUFBRTtnQkFDdkIsb0JBQW9CLEVBQUUsc0JBQXNCLENBQUMsTUFBTTtnQkFDbkQsb0JBQW9CLEVBQUUsd0JBQXdCLENBQUMsTUFBTTthQUN0RCxDQUFDO1lBRUYsNkNBQTZDO1lBQzdDLE1BQU0sV0FBVyxHQUFHLElBQUksR0FBRyxDQUN6Qix3QkFBd0IsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FDdkQ7WUFFRCw4Q0FBOEM7WUFDOUMsTUFBTSxnQkFBZ0IsR0FBRyxzQkFBc0IsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUU7Z0JBQzlELE1BQU0sUUFBUSxHQUFHLE1BQU0sQ0FBQyxLQUFLLEVBQUU7Z0JBQy9CLE9BQU8sQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQztZQUNuQyxDQUFDLENBQUM7WUFFRixNQUFNLFlBQVksR0FBRyxnQkFBZ0IsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsS0FBSyxFQUFFLENBQUM7WUFFbkUsV0FBVyxDQUFDLEdBQUcsQ0FBQyxjQUFjLEVBQUU7Z0JBQzlCLEtBQUssRUFBRSw0QkFBNEI7Z0JBQ25DLFFBQVE7Z0JBQ1IsVUFBVSxFQUFFLFFBQVEsQ0FBQyxFQUFFO2dCQUN2QixZQUFZLEVBQUUsc0JBQXNCLENBQUMsTUFBTSxHQUFHLGdCQUFnQixDQUFDLE1BQU07Z0JBQ3JFLGNBQWMsRUFBRSxnQkFBZ0IsQ0FBQyxNQUFNO2FBQ3hDLENBQUM7WUFFRixnQ0FBZ0M7WUFDaEMsSUFBSSxPQUFPLFFBQVEsQ0FBQyxrQkFBa0IsS0FBSyxVQUFVLEVBQUUsQ0FBQztnQkFDdEQsUUFBUSxDQUFDLGtCQUFrQixDQUFDLFlBQVksRUFBRSxnQkFBdUMsQ0FBQztZQUNwRixDQUFDO1lBRUQsc0RBQXNEO1lBQ3RELHFEQUFjLENBQUMsV0FBVyxFQUFFLENBQUMsY0FBYyxDQUN6QyxJQUFJLHdFQUFpQyxDQUFDLFFBQVEsRUFBRSxnQkFBdUMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUN4RztZQUVELFdBQVcsQ0FBQyxHQUFHLENBQUMsY0FBYyxFQUFFO2dCQUM5QixLQUFLLEVBQUUsNkJBQTZCO2dCQUNwQyxRQUFRO2dCQUNSLFVBQVUsRUFBRSxRQUFRLENBQUMsRUFBRTtnQkFDdkIscUJBQXFCLEVBQUUsZ0JBQWdCLENBQUMsTUFBTTtnQkFDOUMsZ0JBQWdCLEVBQUUsSUFBSTthQUN2QixDQUFDO1FBQ0osQ0FBQztRQUFDLE9BQU8sS0FBSyxFQUFFLENBQUM7WUFDZixXQUFXLENBQUMsR0FBRyxDQUFDLGNBQWMsRUFBRTtnQkFDOUIsS0FBSyxFQUFFLHlCQUF5QjtnQkFDaEMsUUFBUTtnQkFDUixVQUFVLEVBQUUsUUFBUSxDQUFDLEVBQUU7Z0JBQ3ZCLEtBQUssRUFBRSxLQUFLLFlBQVksS0FBSyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxlQUFlO2dCQUMvRCxVQUFVLEVBQUUsS0FBSyxZQUFZLEtBQUssQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsU0FBUzthQUM3RCxDQUFDO1FBQ0osQ0FBQztJQUNILENBQUMsQ0FBQztJQUVGLFdBQVcsQ0FBQyxHQUFHLENBQUMsY0FBYyxFQUFFO1FBQzlCLEtBQUssRUFBRSxrREFBa0Q7UUFDekQsUUFBUTtRQUNSLGFBQWEsRUFBRSxpQkFBaUIsQ0FBQyxJQUFJO1FBQ3JDLG1CQUFtQixFQUFFLGVBQWUsQ0FBQyxNQUFNO0tBQzVDLENBQUM7QUFDSixDQUFDO0FBRUQ7Ozs7R0FJRztBQUNJLFNBQVMsdUJBQXVCLENBQ3JDLGFBQXFDO0lBRXJDLFdBQVcsQ0FBQyxHQUFHLENBQUMsY0FBYyxFQUFFO1FBQzlCLEtBQUssRUFBRSw4QkFBOEI7UUFDckMsZUFBZSxFQUFFLGFBQWEsQ0FBQyxFQUFFO0tBQ2xDLENBQUM7SUFFRiwwQ0FBMEM7SUFDMUMsYUFBYSxDQUFDLFNBQVMsQ0FBQyx1REFBZ0IsQ0FBQyxRQUFRLENBQUM7SUFDbEQsYUFBYSxDQUFDLGNBQWMsQ0FBQyx1REFBZ0IsQ0FBQyxRQUFRLENBQUM7SUFFdkQsdUNBQXVDO0lBQ3ZDLHVFQUF1RTtJQUV2RSxXQUFXLENBQUMsR0FBRyxDQUFDLGNBQWMsRUFBRTtRQUM5QixLQUFLLEVBQUUsNkJBQTZCO1FBQ3BDLGVBQWUsRUFBRSxhQUFhLENBQUMsRUFBRTtLQUNsQyxDQUFDO0FBQ0osQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNqY0Q7OztHQUdHOzs7Ozs7Ozs7O0FBRzBFO0FBQ2dDO0FBQ3BDO0FBRXpFLE1BQU0sV0FBVyxHQUFHLHdGQUE0QixFQUFFO0FBRWxEOztHQUVHO0FBQ0ksTUFBTSwyQkFBMkIsR0FBRywrQkFBK0I7QUFFMUU7Ozs7Ozs7R0FPRztBQUNJLFNBQVMsc0JBQXNCLENBQ3BDLFFBQWdCLEVBQ2hCLFNBQW1CLEVBQ25CLFFBQW9CLEVBQ3BCLGlCQUF5QjtJQUV6QixNQUFNLFFBQVEsR0FBRyxtQkFBbUIsQ0FBQyxRQUFRLENBQUM7SUFDOUMsTUFBTSxZQUFZLEdBQUcsUUFBUSxhQUFSLFFBQVEsdUJBQVIsUUFBUSxDQUFFLEVBQUU7SUFFakMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUU7UUFDdEIsS0FBSyxFQUFFLHdCQUF3QjtRQUMvQixRQUFRO1FBQ1IsV0FBVyxFQUFFLFNBQVMsQ0FBQyxNQUFNO1FBQzdCLFVBQVUsRUFBRSxRQUFRLENBQUMsRUFBRTtRQUN2QixpQkFBaUI7S0FDbEIsQ0FBQztJQUVGLE1BQU0sY0FBYyxHQUFHLElBQUksV0FBVyxDQUFDLDJCQUEyQixFQUFFO1FBQ2xFLE1BQU0sRUFBRTtZQUNOLFFBQVE7WUFDUixTQUFTO1lBQ1QsWUFBWTtZQUNaLFVBQVUsRUFBRSxRQUFRLENBQUMsRUFBRTtZQUN2QixpQkFBaUI7U0FDbEI7UUFDRCxPQUFPLEVBQUUsSUFBSTtRQUNiLFVBQVUsRUFBRSxJQUFJO0tBQ2pCLENBQUM7SUFDRixNQUFNLENBQUMsYUFBYSxDQUFDLGNBQWMsQ0FBQztBQUN0QyxDQUFDO0FBRUQ7Ozs7R0FJRztBQUNJLFNBQVMsbUJBQW1CLENBQ2pDLFFBQXVDO0lBRXZDLElBQUksQ0FBQyxRQUFRO1FBQUUsT0FBTyxJQUFJO0lBRTFCLGlDQUFpQztJQUNqQyxNQUFNLGlCQUFpQixHQUFHLE9BQU8sUUFBUSxDQUFDLG9CQUFvQixLQUFLLFVBQVU7UUFDM0UsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxvQkFBb0IsRUFBRTtRQUNqQyxDQUFDLENBQUMsRUFBRTtJQUVOLElBQUksaUJBQWlCLElBQUksaUJBQWlCLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRSxDQUFDO1FBQ3RELE9BQU8saUJBQWlCLENBQUMsQ0FBQyxDQUEyQjtJQUN2RCxDQUFDO0lBRUQsb0ZBQW9GO0lBQ3BGLDZFQUE2RTtJQUM3RSxJQUFLLFFBQWdCLENBQUMsS0FBSyxJQUFLLFFBQWdCLENBQUMsUUFBUSxJQUFLLFFBQWdCLENBQUMsSUFBSSxLQUFLLGNBQWMsRUFBRSxDQUFDO1FBQ3ZHLE9BQU8sUUFBa0M7SUFDM0MsQ0FBQztJQUVELE9BQU8sSUFBSTtBQUNiLENBQUM7QUFFRDs7Ozs7Ozs7Ozs7R0FXRztBQUNJLFNBQWUsMEJBQTBCO3lEQUM5QyxRQUF1QyxFQUN2QyxTQUFtQixFQUNuQixPQUE2QixFQUM3QixtQkFBNEIsS0FBSyxFQUNqQyxhQUFvQyxFQUNwQyxPQUEyQzs7UUFFM0MsSUFBSSxDQUFDLFFBQVE7WUFBRSxPQUFNO1FBRXJCLE1BQU0sUUFBUSxHQUFHLG1CQUFtQixDQUFDLFFBQVEsQ0FBQztRQUU5Qyx5REFBeUQ7UUFDekQsSUFBSSxnQkFBZ0IsSUFBSSxhQUFhLElBQUksT0FBTyxJQUFJLE9BQU8sSUFBSSxPQUFPLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRSxDQUFDO1lBQ2xGLFdBQVcsQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLEVBQUU7Z0JBQ2hDLEtBQUssRUFBRSxpREFBaUQ7Z0JBQ3hELGNBQWMsRUFBRSxTQUFTLENBQUMsTUFBTTtnQkFDaEMsWUFBWSxFQUFFLE9BQU8sQ0FBQyxNQUFNO2dCQUM1QixlQUFlLEVBQUUsYUFBYSxDQUFDLEVBQUU7Z0JBQ2pDLFNBQVMsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFO2FBQ3RCLENBQUM7WUFFRixNQUFNLDJFQUF3QixDQUFDLGFBQWEsRUFBRSxPQUFPLEVBQUUsT0FBTyxDQUFDO1lBRS9ELG9HQUFvRztZQUNwRyxJQUFJLFFBQVEsSUFBSSxPQUFPLFFBQVEsQ0FBQyxrQkFBa0IsS0FBSyxVQUFVLEVBQUUsQ0FBQztnQkFDbEUsUUFBUSxDQUFDLGtCQUFrQixDQUFDLFNBQVMsRUFBRSxPQUFPLENBQUM7WUFDakQsQ0FBQztRQUNILENBQUM7YUFBTSxDQUFDO1lBQ04seUNBQXlDO1lBQ3pDLFdBQVcsQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLEVBQUU7Z0JBQ2hDLEtBQUssRUFBRSxrREFBa0Q7Z0JBQ3pELGNBQWMsRUFBRSxTQUFTLENBQUMsTUFBTTtnQkFDaEMsZ0JBQWdCO2dCQUNoQixnQkFBZ0IsRUFBRSxDQUFDLENBQUMsYUFBYTtnQkFDakMsVUFBVSxFQUFFLENBQUMsQ0FBQyxPQUFPO2dCQUNyQixTQUFTLEVBQUUsSUFBSSxDQUFDLEdBQUcsRUFBRTthQUN0QixDQUFDO1lBRUYsa0RBQWtEO1lBQ2xELElBQUksUUFBUSxJQUFJLE9BQU8sUUFBUSxDQUFDLGtCQUFrQixLQUFLLFVBQVUsRUFBRSxDQUFDO2dCQUNsRSxzRkFBc0Y7Z0JBQ3RGLE1BQU0sS0FBSyxHQUFJLFFBQWdCLENBQUMsS0FBSyxLQUFJLFlBQUMsUUFBZ0IsRUFBQyxRQUFRLGtEQUFJO2dCQUN2RSxJQUFJLEtBQUssRUFBRSxDQUFDO29CQUNWLFdBQVcsQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLEVBQUU7d0JBQ2hDLEtBQUssRUFBRSxnQ0FBZ0M7d0JBQ3ZDLFVBQVUsRUFBRSxRQUFRLENBQUMsRUFBRTt3QkFDdkIsT0FBTyxFQUFFLEtBQUssQ0FBQyxFQUFFO3dCQUNqQixXQUFXLEVBQUUsQ0FBQyxDQUFFLEtBQWEsQ0FBQyxHQUFHO3dCQUNqQyxZQUFZLEVBQUUsQ0FBQyxDQUFFLEtBQWEsQ0FBQyxJQUFJO3dCQUNuQyxjQUFjLEVBQUUsQ0FBQyxDQUFFLEtBQWEsQ0FBQyxNQUFNO3dCQUN2QyxVQUFVLEVBQUUsT0FBQyxLQUFhLENBQUMsTUFBTSwwQ0FBRSxJQUFJLEtBQUksTUFBTTt3QkFDakQsWUFBWSxFQUFFLENBQUMsQ0FBQyxPQUFDLEtBQWEsQ0FBQyxNQUFNLDBDQUFFLEdBQUc7d0JBQzFDLGFBQWEsRUFBRSxDQUFDLENBQUMsT0FBQyxLQUFhLENBQUMsTUFBTSwwQ0FBRSxJQUFJO3dCQUM1QyxjQUFjLEVBQUUsQ0FBQyxDQUFDLE9BQUMsS0FBYSxDQUFDLE1BQU0sMENBQUUsS0FBSzt3QkFDOUMsU0FBUyxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUU7cUJBQ3RCLENBQUM7Z0JBQ0osQ0FBQztnQkFFRCxRQUFRLENBQUMsa0JBQWtCLENBQUMsU0FBUyxFQUFFLE9BQU8sQ0FBQztZQUNqRCxDQUFDO1FBQ0gsQ0FBQztRQUVELHFEQUFxRDtRQUNyRCxJQUFJLE9BQU8sUUFBUSxDQUFDLGtCQUFrQixLQUFLLFVBQVUsRUFBRSxDQUFDO1lBQ3RELFFBQVEsQ0FBQyxrQkFBa0IsQ0FBQyxTQUFTLEVBQUUsT0FBTyxDQUFDO1FBQ2pELENBQUM7SUFDSCxDQUFDO0NBQUE7QUFFRDs7Ozs7Ozs7R0FRRztBQUNJLFNBQWUsMkJBQTJCO3lEQUMvQyxRQUFnQixFQUNoQixRQUF1QyxFQUN2QyxtQkFBNEIsS0FBSyxFQUNqQyxhQUFvQztRQUVwQyxvREFBb0Q7UUFDcEQsSUFBSSxnQkFBZ0IsSUFBSSxhQUFhLEVBQUUsQ0FBQztZQUN0QyxXQUFXLENBQUMsR0FBRyxDQUFDLGdCQUFnQixFQUFFO2dCQUNoQyxLQUFLLEVBQUUscURBQXFEO2dCQUM1RCxlQUFlLEVBQUUsYUFBYSxDQUFDLEVBQUU7Z0JBQ2pDLFNBQVMsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFO2FBQ3RCLENBQUM7WUFDRix5RUFBa0IsQ0FBQyxhQUFhLENBQUM7UUFDbkMsQ0FBQztRQUVELG1EQUFtRDtRQUNuRCxNQUFNLDBCQUEwQixDQUFDLFFBQVEsRUFBRSxFQUFFLEVBQUUsU0FBUyxFQUFFLEtBQUssQ0FBQztRQUVoRSwrRUFBK0U7UUFDL0UsSUFBSSxRQUFRLEVBQUUsQ0FBQztZQUNiLHVCQUF1QixDQUFDLFFBQVEsRUFBRSxFQUFFLEVBQUUsUUFBUSxFQUFFLElBQUksQ0FBQztRQUN2RCxDQUFDO0lBQ0gsQ0FBQztDQUFBO0FBRUQ7Ozs7Ozs7R0FPRztBQUNJLFNBQVMsdUJBQXVCLENBQ3JDLFFBQWdCLEVBQ2hCLE9BQTRCLEVBQzVCLFFBQXVDLEVBQ3ZDLHdCQUFpQyxLQUFLO0lBRXRDLElBQUksQ0FBQyxRQUFRO1FBQUUsT0FBTTtJQUVyQixNQUFNLFFBQVEsR0FBRyxtQkFBbUIsQ0FBQyxRQUFRLENBQUM7SUFFOUMsSUFBSSxRQUFRLEVBQUUsQ0FBQztRQUNiLHFEQUFjLENBQUMsV0FBVyxFQUFFLENBQUMsY0FBYyxDQUN6QyxJQUFJLHdFQUFpQyxDQUFDLFFBQVEsRUFBRSxPQUFPLEVBQUUsQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FDeEU7SUFDSCxDQUFDO1NBQU0sSUFBSSxxQkFBcUIsRUFBRSxDQUFDO1FBQ2pDLHFEQUFjLENBQUMsV0FBVyxFQUFFLENBQUMsY0FBYyxDQUN6QyxJQUFJLHdFQUFpQyxDQUFDLFFBQVEsRUFBRSxPQUFPLEVBQUUsQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FDeEU7SUFDSCxDQUFDO0lBRUQsK0RBQStEO0lBQy9ELElBQUkscUJBQXFCLElBQUksUUFBUSxFQUFFLENBQUM7UUFDdEMscURBQWMsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxjQUFjLENBQ3pDLElBQUksd0VBQWlDLENBQUMsUUFBUSxFQUFFLE9BQU8sRUFBRSxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUN4RTtJQUNILENBQUM7QUFDSCxDQUFDO0FBRUQ7Ozs7Ozs7Ozs7Ozs7R0FhRztBQUNJLFNBQWUsdUJBQXVCO3lEQUMzQyxRQUFnQixFQUNoQixRQUF1QyxFQUN2QyxTQUFtQixFQUNuQixPQUE0QixFQUM1Qix3QkFBaUMsS0FBSyxFQUN0QyxtQkFBNEIsS0FBSyxFQUNqQyxhQUFvQyxFQUNwQyxPQUEyQztRQUUzQyxNQUFNLDBCQUEwQixDQUFDLFFBQVEsRUFBRSxTQUFTLEVBQUUsT0FBTyxFQUFFLGdCQUFnQixFQUFFLGFBQWEsRUFBRSxPQUFPLENBQUM7UUFDeEcsdUJBQXVCLENBQUMsUUFBUSxFQUFFLE9BQU8sRUFBRSxRQUFRLEVBQUUscUJBQXFCLENBQUM7SUFDN0UsQ0FBQztDQUFBO0FBRUQ7Ozs7O0dBS0c7QUFDSSxTQUFTLHNCQUFzQjtJQUNwQyxzRUFBc0U7SUFDdEUsT0FBTyxDQUFDLFFBQVEsQ0FBQyxhQUFhLENBQUMsMERBQTBELENBQUM7UUFDbEYsUUFBUSxDQUFDLGFBQWEsQ0FBQyxvQ0FBb0MsQ0FBQyxDQUE2QjtBQUNuRyxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNqUkQsZUFBZTtBQVVHO0FBQzJDO0FBQ1I7QUFDTDtBQUNEO0FBQzBCO0FBRXpFLE1BQU0sV0FBVyxHQUFHLHdGQUE0QixFQUFFO0FBaUJsRCxNQUFNLFFBQVEsR0FBRyxDQUFDLFlBQXFCLEVBQUUsRUFBRTtJQUN6QyxPQUFPLDhDQUFHOztnQkFFSSxZQUFZLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQzs7a0JBRXZCLFlBQVksQ0FBQyxDQUFDLENBQUMsc0JBQXNCLENBQUMsQ0FBQyxDQUFDLE1BQU07Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0dBMEI3RDtBQUNILENBQUM7QUFFTSxTQUFTLFVBQVUsQ0FBRSxLQUFzQjtJQUNoRCxNQUFNLEVBQ0osUUFBUSxFQUNSLFFBQVEsRUFDUixTQUFTLEVBQ1QsT0FBTyxFQUNQLFNBQVMsRUFDVCxRQUFRLEVBQ1IsY0FBYyxFQUNkLFFBQVEsRUFDUixlQUFlLEVBQ2YsZ0JBQWdCLEVBQ2hCLGdCQUFnQixFQUNoQixZQUFZLEVBQ2IsR0FBRyxLQUFLO0lBRVQsTUFBTSxDQUFDLGFBQWEsRUFBRSxnQkFBZ0IsQ0FBQyxHQUFHLDRDQUFLLENBQUMsUUFBUSxFQUFPO0lBQy9ELE1BQU0sQ0FBQyxvQkFBb0IsRUFBRSx1QkFBdUIsQ0FBQyxHQUFHLDRDQUFLLENBQUMsUUFBUSxFQUFPO0lBQzdFLE1BQU0sWUFBWSxHQUFHLDZEQUFhLEVBQUU7SUFDcEMsTUFBTSxrQkFBa0IsR0FBRyw0Q0FBSyxDQUFDLE1BQU0sQ0FBaUIsSUFBSSxDQUFDO0lBRTdELDZCQUE2QjtJQUM3QixNQUFNLGVBQWUsR0FBRyw0Q0FBSyxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUU7UUFDekMsT0FBTyxRQUFPLGFBQVAsT0FBTyx1QkFBUCxPQUFPLENBQUUsTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsQ0FBQyxpQkFBZ0IsYUFBaEIsZ0JBQWdCLHVCQUFoQixnQkFBZ0IsQ0FBRSxHQUFHLENBQUMsTUFBTSxDQUFDLEtBQUssRUFBRSxDQUFDLEVBQUMsS0FBSSxFQUFFO0lBQ2hGLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxnQkFBZ0IsQ0FBQyxDQUFDO0lBRS9CLGtFQUFrRTtJQUNsRSw0Q0FBSyxDQUFDLFNBQVMsQ0FBQyxHQUFHLEVBQUU7UUFDbkIsSUFBSSxZQUFZLElBQUksZUFBZSxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUUsQ0FBQztZQUMvQyxXQUFXLENBQUMsR0FBRyxDQUFDLGNBQWMsRUFBRTtnQkFDOUIsS0FBSyxFQUFFLGdDQUFnQztnQkFDdkMsUUFBUTtnQkFDUixpQkFBaUIsRUFBRSxTQUFTLENBQUMsUUFBUTtnQkFDckMsb0JBQW9CLEVBQUUsZUFBZSxDQUFDLE1BQU07Z0JBQzVDLGlCQUFpQixFQUFFLE9BQU8sQ0FBQyxNQUFNO2dCQUNqQyxxQkFBcUIsRUFBRSxpQkFBZ0IsYUFBaEIsZ0JBQWdCLHVCQUFoQixnQkFBZ0IsQ0FBRSxJQUFJLEtBQUksQ0FBQztnQkFDbEQsU0FBUyxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUU7YUFDdEIsQ0FBQztZQUNGLFlBQVksQ0FBQyxFQUFFLFNBQVMsRUFBRSxlQUFlLEVBQUUsQ0FBQztRQUM5QyxDQUFDO0lBQ0gsQ0FBQyxFQUFFLENBQUMsZUFBZSxFQUFFLFlBQVksRUFBRSxRQUFRLEVBQUUsU0FBUyxDQUFDLFFBQVEsRUFBRSxPQUFPLENBQUMsTUFBTSxFQUFFLGdCQUFnQixDQUFDLENBQUM7SUFFbkcsNENBQUssQ0FBQyxTQUFTLENBQUMsR0FBRyxFQUFFO1FBQ25CLDhEQUFnQixDQUFDLFFBQVEsRUFBRSxTQUFTLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLEVBQUU7WUFDOUMsZ0JBQWdCLENBQUMsRUFBRSxDQUFDLGFBQWEsQ0FBQztZQUNsQyx1QkFBdUIsQ0FBQyxFQUFFLENBQUMsb0JBQW9CLENBQUM7UUFDbEQsQ0FBQyxDQUFDO0lBQ0osQ0FBQyxFQUFFLENBQUMsUUFBUSxFQUFFLFNBQVMsQ0FBQyxDQUFDO0lBRXpCLE1BQU0sV0FBVyxHQUFHLDRDQUFLLENBQUMsV0FBVyxDQUFDLENBQUMsR0FBRyxFQUFFLEVBQUU7UUFDNUMsSUFBSSxHQUFHLENBQUMsR0FBRyxLQUFLLFFBQVEsRUFBRSxDQUFDO1lBQ3pCLEdBQUcsQ0FBQyxlQUFlLEVBQUU7WUFDckIsUUFBUSxFQUFFO1FBQ1osQ0FBQztJQUNILENBQUMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBRWQsTUFBTSxhQUFhLEdBQUcsNENBQUssQ0FBQyxXQUFXLENBQUMsQ0FBQyxHQUFHLEVBQUUsRUFBRTtRQUM5QyxJQUFJLEdBQUcsQ0FBQyxHQUFHLEtBQUssR0FBRyxFQUFFLENBQUM7WUFDcEIsR0FBRyxDQUFDLGNBQWMsRUFBRTtRQUN0QixDQUFDO0lBQ0gsQ0FBQyxFQUFFLEVBQUUsQ0FBQztJQUVOLE9BQU8sQ0FDTCx5RUFDRSxPQUFPLEVBQUUsV0FBVyxFQUNwQixTQUFTLEVBQUUsYUFBYSxFQUN4QixTQUFTLEVBQUUscURBQVUsQ0FBQyxFQUFFLFFBQVEsRUFBRSxTQUFTLEtBQUssa0RBQWEsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxFQUN6RSxHQUFHLEVBQUUsUUFBUSxDQUFDLFlBQVksQ0FBQyxFQUMzQixHQUFHLEVBQUUsa0JBQWtCLFlBRXZCLHlFQUFLLFNBQVMsRUFBQyxzQkFBc0IsRUFBQyxJQUFJLEVBQUMsU0FBUyxZQUNqRCxlQUFlLENBQUMsR0FBRyxDQUFDLENBQUMsUUFBUSxFQUFFLEVBQUU7Z0JBQ2hDLE1BQU0sUUFBUSxHQUFHLFFBQVEsQ0FBQyxLQUFLLEVBQUU7Z0JBQ2pDLHFGQUFxRjtnQkFDckYsTUFBTSxxQkFBcUIsR0FBRyxnQkFBZ0IsYUFBaEIsZ0JBQWdCLHVCQUFoQixnQkFBZ0IsQ0FBRSxHQUFHLENBQUMsUUFBUSxDQUFDO2dCQUM3RCxNQUFNLG9CQUFvQixHQUFHLHFCQUFxQixLQUFLLFNBQVMsQ0FBQyxDQUFDLENBQUMscUJBQXFCLENBQUMsQ0FBQyxDQUFDLENBQUMsZUFBZSxhQUFmLGVBQWUsY0FBZixlQUFlLEdBQUksSUFBSSxDQUFDO2dCQUNwSCxPQUFPLENBQ0wsZ0VBQUMsK0RBQWUsSUFFZCxJQUFJLEVBQUUsUUFBNkIsRUFDbkMsVUFBVSxFQUFFLFFBQVEsRUFDcEIsUUFBUSxFQUFFLFFBQVEsRUFDbEIsYUFBYSxFQUFFLGFBQWEsRUFDNUIsb0JBQW9CLEVBQUUsb0JBQW9CLEVBQzFDLGVBQWUsRUFBRSxvQkFBb0IsRUFDckMsT0FBTyxFQUFFLGNBQWMsRUFDdkIsUUFBUSxFQUFFLFFBQVEsSUFSYixRQUFRLENBU2IsQ0FDSDtZQUNILENBQUMsQ0FBQyxHQUNFLEdBQ0YsQ0FDUDtBQUNILENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7QUNqS0QsaUVBQWU7SUFDYixZQUFZLEVBQUUsYUFBYTtJQUMzQixLQUFLLEVBQUUsT0FBTztJQUNkLFdBQVcsRUFBRSxjQUFjO0lBQzNCLEtBQUssRUFBRSxRQUFRO0lBQ2YsZUFBZSxFQUFFLHVCQUF1QjtJQUN4QyxXQUFXLEVBQUUsVUFBVTtJQUN2QixZQUFZLEVBQUUseUVBQXlFO0lBQ3ZGLGVBQWUsRUFBRSxrQkFBa0I7SUFDbkMsYUFBYSxFQUFFLGdCQUFnQjtJQUMvQixrQ0FBa0MsRUFBRSxvQkFBb0I7SUFDeEQscUNBQXFDLEVBQUUsZUFBZTtJQUN0RCxPQUFPLEVBQUUsU0FBUztJQUNsQixpQkFBaUIsRUFBRSxvQkFBb0I7SUFDdkMsV0FBVyxFQUFFLGVBQWU7SUFDNUIsV0FBVyxFQUFFLGVBQWU7SUFDNUIsZ0JBQWdCLEVBQUUscUJBQXFCO0lBQ3ZDLGdCQUFnQixFQUFFLHdCQUF3QjtJQUMxQyxrQkFBa0IsRUFBRSwwQkFBMEI7SUFDOUMsWUFBWSxFQUFFLGlDQUFpQztJQUMvQyxhQUFhLEVBQUUscUNBQXFDO0lBQ3BELGNBQWMsRUFBRSx1QkFBdUI7SUFDdkMsaUJBQWlCLEVBQUUsdUJBQXVCO0lBQzFDLGVBQWUsRUFBRSwyQ0FBMkM7SUFDNUQsbUJBQW1CLEVBQUUsdUNBQXVDO0lBQzVELHVCQUF1QixFQUFFLDBGQUEwRjtJQUNuSCxhQUFhLEVBQUUsZUFBZTtJQUM5QixPQUFPLEVBQUUsU0FBUztJQUNsQixZQUFZLEVBQUUsZUFBZTtJQUM3QixVQUFVLEVBQUUsNkJBQTZCO0lBQ3pDLGNBQWMsRUFBRSxrQkFBa0I7SUFDbEMsUUFBUSxFQUFFLE9BQU87SUFDakIsVUFBVSxFQUFFLFNBQVM7SUFDckIsU0FBUyxFQUFFLFlBQVk7SUFDdkIsV0FBVyxFQUFFLGNBQWM7SUFDM0IsUUFBUSxFQUFFLFlBQVk7SUFDdEIsV0FBVyxFQUFFLGNBQWM7SUFDM0IsZ0JBQWdCLEVBQUUsb0JBQW9CO0lBQ3RDLG1CQUFtQixFQUFFLHdCQUF3QjtJQUM3Qyx3QkFBd0IsRUFBRSw2QkFBNkI7SUFDdkQseUJBQXlCLEVBQUUsc0RBQXNEO0lBQ2pGLGVBQWUsRUFBRSx1TUFBdU07SUFDeE4sY0FBYyxFQUFFLEtBQUs7SUFDckIsY0FBYyxFQUFFLEtBQUs7SUFDckIsaUJBQWlCLEVBQUUsUUFBUTtDQUM1Qjs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQzdDRCxlQUFlO0FBQzRDO0FBQ007QUFDWjtBQUU5QyxTQUFTLGFBQWE7SUFDM0IsTUFBTSxVQUFVLEdBQUcsNENBQUssQ0FBQyxVQUFVLENBQUMsK0RBQWtCLENBQUM7SUFDdkQsSUFBSSxRQUFRO0lBQ1osSUFBSSxZQUFZO0lBQ2hCLElBQUksVUFBVSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDO1FBQzdCLE1BQU0sQ0FBQyxHQUFHLFVBQVUsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDO1FBQy9CLFFBQVEsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2YsWUFBWSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDckIsQ0FBQztJQUNELE1BQU0sTUFBTSxHQUFHLGlEQUFVLENBQUMsV0FBVyxDQUFDLENBQUMsS0FBYyxFQUFFLEVBQUU7O1FBQ3ZELE1BQU0sVUFBVSxHQUFHLGlCQUFLLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsMENBQUUsT0FBTywwQ0FBRyxZQUFZLENBQUM7UUFDN0UsT0FBTyx1QkFBVSxhQUFWLFVBQVUsdUJBQVYsVUFBVSxDQUFFLE9BQU8sMENBQUUsU0FBUywwQ0FBRSxNQUFNLE1BQUssNEVBQW1CLENBQUMsSUFBSTtJQUM1RSxDQUFDLENBQUM7SUFFRixPQUFPLE1BQU07QUFDZixDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDcEJzRTtBQUNKO0FBQ1U7QUFDUDtBQUNMO0FBQ2E7QUFFdkUsTUFBTSx1QkFBdUIsR0FBRyxHQUFHLEVBQUUsQ0FBQyxDQUFDO0lBQzVDLE9BQU8sRUFBRTtRQUNQLFNBQVMsRUFBRSxtQkFBTyxDQUFDLHVFQUFnQixDQUFDO1FBQ3BDLFdBQVc7UUFDWCxTQUFTO1FBQ1QsWUFBWTtRQUNaLFVBQVU7UUFDVixVQUFVO1FBQ1YsUUFBUTtLQUNUO0NBQ0YsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNqQitCO0FBRTFCLE1BQU0sa0JBQWtCLEdBQUcsNENBQUssQ0FBQyxhQUFhLENBQVMsSUFBSSxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7OztBQ0ZyQjtBQUU5QyxNQUFNLGNBQWUsU0FBUSx5REFBa0I7SUFBL0M7O1FBQ0UsYUFBUSxHQUFHLENBQUM7Z0JBQ1YsT0FBTyxFQUFFLE9BQU87Z0JBQ2hCLFdBQVcsRUFBRSxvQkFBb0I7Z0JBQ2pDLFFBQVEsRUFBRSxDQUFDLFNBQVMsRUFBRSxFQUFFO29CQUN0QixPQUFPLFNBQVM7Z0JBQ2xCLENBQUM7YUFDRixDQUFDO0lBQ0osQ0FBQztDQUFBO0FBRU0sTUFBTSxjQUFjLEdBQUcsSUFBSSxjQUFjLEVBQUU7Ozs7Ozs7Ozs7Ozs7Ozs7QUNabEQ7Ozs7Ozs7OztHQVNHO0FBQ0gsTUFBTSxZQUFZLEdBQUcsUUFBUTtBQUM3QixNQUFNLGNBQWMsR0FBRyxLQUFLLEVBQUMsa0RBQWtEO0FBQy9FLE1BQU0sYUFBYSxHQUFHLElBQUksRUFBQyxpRUFBaUU7QUFFckYsTUFBTSxjQUFjLEdBQUcsYUFBYSxJQUFJLGFBQWEsS0FBSyxHQUFHO0lBQ2xFLENBQUMsQ0FBQyxHQUFHLFlBQVksS0FBSyxjQUFjLElBQUksYUFBYSxFQUFFO0lBQ3ZELENBQUMsQ0FBQyxHQUFHLFlBQVksS0FBSyxjQUFjLEVBQUU7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDaEJ4Qzs7Ozs7OztHQU9HO0FBRXVDO0FBQ1o7QUFDUTtBQUNFO0FBQ0g7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ2JyQyxlQUFlO0FBQzRCO0FBQ3dEO0FBQzdEO0FBQzZCO0FBQ25FLE1BQU0sRUFBRSxRQUFRLEVBQUUsR0FBRyw0Q0FBSztBQUUxQjs7R0FFRztBQUNJLE1BQU0sV0FBVyxHQUFHLENBQUMsS0FBSyxFQUFFLEVBQUU7SUFDbkMsTUFBTSxFQUFFLFNBQVMsR0FBRyxFQUFFLEVBQUUsUUFBUSxFQUFFLEdBQUcsS0FBSztJQUMxQyxNQUFNLGVBQWUsR0FBRztRQUN0QixPQUFPLEVBQUUsSUFBSTtRQUNiLFlBQVksRUFBRSxJQUFJO0tBQ25CO0lBQ0QsTUFBTSxXQUFXLEdBQUc7UUFDbEIsT0FBTyxFQUFFLFFBQVEsQ0FBQyxTQUFTLElBQUksU0FBUyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxlQUFlLENBQUMsT0FBTyxDQUFDO1FBQ3ZGLFlBQVksRUFBRSxRQUFRLENBQUMsY0FBYyxJQUFJLFNBQVMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsZUFBZSxDQUFDLFlBQVksQ0FBQztRQUMzRyxVQUFVLEVBQUUsUUFBUSxtQkFBTSxTQUFTLENBQUMsVUFBVSxFQUFHO0tBQ2xEO0lBQ0QsT0FBTyxnRUFBQyw0Q0FBSyxDQUFDLFFBQVEsY0FBRSxRQUFRLENBQUMsV0FBVyxDQUFDLEdBQWtCO0FBQ2pFLENBQUM7QUFhRDs7R0FFRztBQUNJLE1BQU0sV0FBVyxHQUFHLHFEQUFTLENBQUMsQ0FBQyxLQUFvQyxFQUFFLEVBQUU7SUFDNUUsTUFBTSxFQUFFLEtBQUssRUFBRSxZQUFZLEVBQUUsZUFBZSxFQUFFLGNBQWMsRUFBRSxPQUFPLEdBQUcsSUFBSSxFQUFFLEtBQUssR0FBRyxjQUFjLENBQUMsY0FBYyxDQUFDLEVBQUUsV0FBVyxHQUFHLEVBQUUsRUFBRSxTQUFTLEdBQUcsSUFBSSxFQUFFLFNBQVMsR0FBRyxJQUFJLEVBQUUsR0FBRyxLQUFLO0lBQ3BMLE1BQU0sTUFBTSxHQUFHLEdBQUcsRUFBRSxHQUFHLGVBQWUsQ0FBQyxLQUFLLENBQUMsRUFBQyxDQUFDO0lBQy9DLE1BQU0sVUFBVSxHQUFHLEdBQUcsRUFBRSxDQUFDLGlFQUFDLDRDQUFLLENBQUMsUUFBUSxlQUVwQyxTQUFTO2dCQUNQLGdFQUFDLGdEQUFXLElBQUMsU0FBUyxFQUFDLE1BQU0sRUFBQyxLQUFLLEVBQUUsS0FBSyxFQUFFLE9BQU8sRUFBRSxNQUFNLEdBQUksRUFFbkUsZ0VBQUMsOENBQVMsY0FBRSxXQUFXLEdBQWEsRUFFbEMsU0FBUztnQkFDUCxnRUFBQyxnREFBVyxjQUNWLGdFQUFDLDJDQUFNLElBQUMsT0FBTyxFQUFFLE1BQU0sWUFBRyxjQUFjLENBQUMsSUFBSSxDQUFDLEdBQVUsR0FDNUMsSUFFSDtJQUNqQixNQUFNLGdCQUFnQixHQUFHLHNCQUFzQjtJQUMvQyxNQUFNLGtCQUFrQixHQUFHLEdBQUcsRUFBRTtRQUM5QixPQUFPLENBQ0wsZ0VBQUMsMENBQUssSUFBQyxTQUFTLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxFQUFFLFlBQVksRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLFFBQVEsRUFBQyxRQUFRLFlBQ3hGLFVBQVUsRUFBRSxHQUNQLENBQ1Q7SUFDSCxDQUFDO0lBQ0QsTUFBTSxxQkFBcUIsR0FBRyxHQUFHLEVBQUU7UUFDakMsTUFBTSxRQUFRLEdBQUcsR0FBRyxFQUFFLENBQUMsOENBQUc7Ozs7OzhCQUtBLEtBQUssQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUM7bUJBQ3pDLEtBQUssQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLEtBQUs7Ozs7Ozs7Ozs7Ozs7O0tBY3JDO1FBQ0QsT0FBTyxDQUNMLHlFQUFLLFNBQVMsRUFBRSxHQUFHLGdCQUFnQixpQkFBaUIsWUFBWSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLFVBQVUsRUFBRSxFQUFFLEdBQUcsRUFBRSxRQUFRLEVBQUUsWUFDbkcseUVBQUssU0FBUyxFQUFDLGVBQWUsWUFDM0IsVUFBVSxFQUFFLEdBQ1QsR0FDRixDQUNQO0lBQ0gsQ0FBQztJQUNELE9BQU8sT0FBTyxDQUFDLENBQUMsQ0FBQyxrQkFBa0IsRUFBRSxDQUFDLENBQUMsQ0FBQyxxQkFBcUIsRUFBRTtBQUNqRSxDQUFDLENBQUM7QUFFRixJQUFZLGdCQU9YO0FBUEQsV0FBWSxnQkFBZ0I7SUFDMUIsNkJBQVM7SUFDVCxpQ0FBYTtJQUNiLHVDQUFtQjtJQUNuQixxQ0FBaUI7SUFDakIsdUNBQW1CO0lBQ25CLG1DQUFlO0FBQ2pCLENBQUMsRUFQVyxnQkFBZ0IsS0FBaEIsZ0JBQWdCLFFBTzNCO0FBUUQ7O0dBRUc7QUFDSSxNQUFNLGVBQWUsR0FBRyxxREFBUyxDQUFDLENBQUMsS0FBd0MsRUFBRSxFQUFFO0lBQ3BGLE1BQU0sRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBRSxVQUFVLEVBQUUsR0FBRyxLQUFLO0lBQ3JELE1BQU0sUUFBUSxHQUFHLEdBQUcsRUFBRTs7UUFBQyxxREFBRzs7Ozs7Ozs7Ozs7Ozs4QkFhRSxpQkFBSyxhQUFMLEtBQUssdUJBQUwsS0FBSyxDQUFFLEdBQUcsQ0FBQyxPQUFPLDBDQUFFLE9BQU8sMENBQUcsR0FBRyxDQUFDOztrQ0FFOUIsaUJBQUssYUFBTCxLQUFLLHVCQUFMLEtBQUssQ0FBRSxHQUFHLENBQUMsS0FBSywwQ0FBRSxPQUFPLDBDQUFFLElBQUk7Ozs7Ozs7R0FPOUQ7S0FBQTtJQUNELE9BQU8sQ0FDTCxVQUFVO1FBQ1IseUVBQUssU0FBUyxFQUFFLEdBQUcsU0FBUyxhQUFULFNBQVMsY0FBVCxTQUFTLEdBQUksRUFBRSxrRUFBa0UsVUFBVSxFQUFFLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxHQUFHLEVBQUUsUUFBUSxFQUFFLEdBQUksQ0FDdEo7QUFDSCxDQUFDLENBQUM7QUFRRjs7O0dBR0c7QUFDSSxNQUFNLFlBQVksR0FBRyxDQUFDLEtBQXdCLEVBQUUsRUFBRTtJQUN2RCxNQUFNLEVBQUUsS0FBSyxFQUFFLFNBQVMsR0FBRyxFQUFFLEVBQUUsU0FBUyxFQUFFLEdBQUcsS0FBSztJQUVsRCxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUM7UUFDWCxPQUFPLElBQUk7SUFDYixDQUFDO0lBRUQsTUFBTSxVQUFVLEdBQUcsOENBQUc7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztHQTJCckI7SUFFRCxPQUFPLENBQ0wsMEVBQUssU0FBUyxFQUFFLGlCQUFpQixTQUFTLEVBQUUsRUFBRSxHQUFHLEVBQUUsVUFBVSxFQUFFLElBQUksRUFBQyxPQUFPLGFBQ3pFLGdFQUFDLHlDQUFJLElBQUMsSUFBSSxFQUFFLG9GQUFTLEVBQUUsU0FBUyxFQUFDLFlBQVksRUFBQyxJQUFJLEVBQUMsSUFBSSxHQUFHLEVBQzFELDBFQUFNLFNBQVMsRUFBQyxZQUFZLFlBQUUsS0FBSyxHQUFRLEVBQzFDLFNBQVMsSUFBSSxDQUNaLGdFQUFDLDJDQUFNLElBQ0wsSUFBSSxFQUFDLElBQUksRUFDVCxJQUFJLEVBQUMsVUFBVSxFQUNmLElBQUksUUFDSixPQUFPLEVBQUUsU0FBUyxFQUNsQixTQUFTLEVBQUMsZUFBZSxnQkFDZCxlQUFlLFlBRTFCLGdFQUFDLHlDQUFJLElBQUMsSUFBSSxFQUFFLDhIQUEyRCxFQUFFLElBQUksRUFBQyxJQUFJLEdBQUcsR0FDOUUsQ0FDVixJQUNHLENBQ1A7QUFDSCxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ2hORCxlQUFlO0FBYUc7QUFDOEM7QUFDTztBQUNBO0FBQ0o7QUFDZDtBQVVyRDs7OztHQUlHO0FBQ0ksU0FBUyxhQUFhLENBQUUsS0FBbUI7O0lBQ2hELE1BQU0sRUFBRSxRQUFRLEVBQUUsYUFBYSxFQUFFLGNBQWMsRUFBRSxtQkFBbUIsRUFBRSxXQUFXLEdBQUcsS0FBSyxFQUFFLEdBQUcsS0FBSztJQUNuRyxNQUFNLGNBQWMsR0FBRyw0Q0FBSyxDQUFDLGNBQWMsQ0FBQyxvREFBZSxDQUFDO0lBQzVELE1BQU0sUUFBUSxHQUFZLG1FQUFtQixDQUFDLEVBQUUsUUFBUSxFQUFFLGVBQWUsRUFBRSxhQUFhLENBQUMsWUFBWSxFQUFFLENBQUM7SUFDeEcsTUFBTSxDQUFDLFFBQVEsRUFBRSxXQUFXLENBQUMsR0FBRyw0Q0FBSyxDQUFDLFFBQVEsQ0FBbUMsSUFBSSxDQUFDO0lBQ3RGLE1BQU0sQ0FBQyxVQUFVLEVBQUUsYUFBYSxDQUFDLEdBQUcsNENBQUssQ0FBQyxRQUFRLENBQWEsSUFBSSxDQUFDO0lBRXBFLE1BQU0sa0JBQWtCLEdBQUcsNENBQUssQ0FBQyxXQUFXLENBQUMsQ0FBQyxJQUFzQixFQUFFLEVBQUU7UUFDdEUsSUFBSSxJQUFJLEVBQUUsQ0FBQztZQUNULE1BQU0sRUFBRSxNQUFNLEVBQUUsY0FBYyxFQUFFLEdBQUcsSUFBSTtZQUN2QyxJQUFJLGNBQWMsS0FBSyx1REFBZ0IsQ0FBQyxVQUFVLEVBQUUsQ0FBQztnQkFDbkQsV0FBVyxDQUFDLFVBQVUsQ0FBQztnQkFDdkIsY0FBYyxhQUFkLGNBQWMsdUJBQWQsY0FBYyxDQUFHLEtBQUssQ0FBQztZQUN6QixDQUFDO2lCQUFNLElBQUksY0FBYyxLQUFLLHVEQUFnQixDQUFDLFdBQVcsSUFBSSxNQUFNLEtBQUssdURBQWdCLENBQUMsU0FBUyxFQUFFLENBQUM7Z0JBQ3BHLFdBQVcsQ0FBQyxPQUFPLENBQUM7Z0JBQ3BCLGNBQWMsYUFBZCxjQUFjLHVCQUFkLGNBQWMsQ0FBRyxLQUFLLENBQUM7WUFDekIsQ0FBQztpQkFBTSxJQUFJLE1BQU0sS0FBSyx1REFBZ0IsQ0FBQyxRQUFRLEVBQUUsQ0FBQztnQkFDaEQsV0FBVyxDQUFDLFNBQVMsQ0FBQztnQkFDdEIsY0FBYyxhQUFkLGNBQWMsdUJBQWQsY0FBYyxDQUFHLEtBQUssQ0FBQztZQUN6QixDQUFDO2lCQUFNLENBQUM7Z0JBQ04sV0FBVyxDQUFDLElBQUksQ0FBQztnQkFDakIsY0FBYyxhQUFkLGNBQWMsdUJBQWQsY0FBYyxDQUFHLElBQUksQ0FBQztZQUN4QixDQUFDO1FBQ0gsQ0FBQztJQUNILENBQUMsRUFBRSxDQUFDLGNBQWMsQ0FBQyxDQUFDO0lBRXBCLE1BQU0sZUFBZSxHQUFHLDRDQUFLLENBQUMsV0FBVyxDQUFDLENBQUMsRUFBYyxFQUFFLEVBQUU7UUFDM0QsYUFBYSxDQUFDLEVBQUUsQ0FBQztRQUNqQixtQkFBbUIsYUFBbkIsbUJBQW1CLHVCQUFuQixtQkFBbUIsQ0FBRyxFQUFFLENBQUM7SUFDM0IsQ0FBQyxFQUFFLENBQUMsbUJBQW1CLENBQUMsQ0FBQztJQUV6QixNQUFNLG9CQUFvQixHQUFHLDRDQUFLLENBQUMsV0FBVyxDQUFDLEdBQUcsRUFBRTtRQUNsRCxhQUFhLENBQUMsSUFBSSxDQUFDO1FBQ25CLFdBQVcsQ0FBQyxPQUFPLENBQUM7UUFDcEIsY0FBYyxhQUFkLGNBQWMsdUJBQWQsY0FBYyxDQUFHLEtBQUssQ0FBQztJQUN6QixDQUFDLEVBQUUsQ0FBQyxjQUFjLENBQUMsQ0FBQztJQUVwQixJQUFJLFVBQVU7SUFDZCxJQUFJLFNBQVM7SUFDYixJQUFJLEtBQUs7SUFDVCxJQUFJLFFBQVEsS0FBSyxVQUFVLEVBQUUsQ0FBQztRQUM1QixVQUFVLEdBQUcsb0ZBQVM7UUFDdEIsU0FBUyxHQUFHLGNBQWMsQ0FBQyxTQUFTLENBQUM7SUFDdkMsQ0FBQztTQUFNLElBQUksQ0FBQyxRQUFRLElBQUksUUFBUSxLQUFLLE9BQU8sRUFBRSxDQUFDO1FBQzdDLFVBQVUsR0FBRyxvRkFBUztRQUN0QixTQUFTLEdBQUcsY0FBYyxDQUFDLHVCQUF1QixDQUFDO1FBQ25ELEtBQUssR0FBRyw2QkFBNkI7SUFDdkMsQ0FBQztTQUFNLElBQUksUUFBUSxLQUFLLFNBQVMsRUFBRSxDQUFDO1FBQ2xDLElBQUksS0FBSyxHQUFHLEVBQUU7UUFDZCxNQUFNLFFBQVEsR0FBRyxnQkFBVSxhQUFWLFVBQVUsdUJBQVYsVUFBVSxDQUFFLG9CQUFvQixFQUFFLDBDQUFHLENBQUMsQ0FBQztRQUN4RCxJQUFJLFFBQVEsRUFBRSxDQUFDO1lBQ2IsS0FBSyxHQUFHLFFBQVEsQ0FBQyxRQUFRLEVBQUUsSUFBSSxRQUFRLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxXQUFXO1FBQ3pFLENBQUM7YUFBTSxJQUFJLFVBQVUsRUFBRSxDQUFDO1lBQ3RCLEtBQUssR0FBRyxVQUFVLENBQUMsUUFBUSxFQUFFLElBQUksVUFBVSxDQUFDLGlCQUFpQixFQUFFLENBQUMsS0FBSztRQUN2RSxDQUFDO1FBRUQsTUFBTSxRQUFRLEdBQUcscURBQWMsQ0FBQyw2QkFBNkIsQ0FBQyxhQUFhLENBQUM7UUFDNUUsTUFBTSxRQUFRLEdBQUcsYUFBTSxhQUFOLE1BQU0sdUJBQU4sTUFBTSxDQUFFLFVBQVUsMENBQUUsU0FBUztZQUM1QyxDQUFDLENBQUMsc0RBQVcsRUFBRSxDQUFDLFFBQVEsRUFBRSxDQUFDLGlCQUFpQjtZQUM1QyxDQUFDLENBQUMsc0RBQVcsRUFBRSxDQUFDLFFBQVEsRUFBRTtRQUM1QixNQUFNLFdBQVcsR0FBRyxjQUFRLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsMENBQUUsS0FBSztRQUUvRCxLQUFLLEdBQUcsK0JBQStCO1FBQ3ZDLFVBQVUsR0FBRyxzRkFBVztRQUN4QixTQUFTLEdBQUcsY0FBYyxDQUFDLDBCQUEwQixFQUFFO1lBQ3JELGFBQWEsRUFBRSxLQUFLLGFBQUwsS0FBSyxjQUFMLEtBQUssR0FBSSxFQUFFO1lBQzFCLGdCQUFnQixFQUFFLFdBQVcsYUFBWCxXQUFXLGNBQVgsV0FBVyxHQUFJLEVBQUU7U0FDcEMsQ0FBQztJQUNKLENBQUM7SUFDRCxPQUFPLENBQ0wsaUVBQUMsNENBQUssQ0FBQyxRQUFRLGVBQ1osUUFBUSxJQUFJLENBQ1gsZ0VBQUMsMERBQW1CLElBQ2xCLGFBQWEsRUFBRSxhQUFhLEVBQzVCLHNCQUFzQixFQUFFLGtCQUFrQixFQUMxQyxtQkFBbUIsRUFBRSxlQUFlLEVBQ3BDLHdCQUF3QixFQUFFLG9CQUFvQixHQUM5QyxDQUNILEVBQ0EsUUFBUSxLQUFLLFVBQVUsSUFBSSxnRUFBQywrREFBZSxJQUFDLFVBQVUsRUFBRSxnRUFBZ0IsQ0FBQyxPQUFPLEVBQUUsS0FBSyxFQUFFLFNBQVMsR0FBSSxFQUN0RyxDQUFDLENBQUMsUUFBUSxJQUFJLFFBQVEsS0FBSyxPQUFPLElBQUksUUFBUSxLQUFLLFNBQVMsQ0FBQyxJQUFJLENBQ2hFLDBFQUFLLFNBQVMsRUFBQywyQkFBMkIsYUFDeEMsZ0VBQUMsNENBQU8sSUFBQyxLQUFLLEVBQUUsU0FBUyxZQUN2QixnRUFBQywyQ0FBTSxJQUFDLElBQUksRUFBQyxJQUFJLEVBQUMsSUFBSSxFQUFDLFVBQVUsRUFBQyxJQUFJLGtCQUFDLGdFQUFDLHlDQUFJLElBQUMsSUFBSSxFQUFFLFVBQVUsRUFBRSxLQUFLLEVBQUUsS0FBSyxHQUFJLEdBQVMsR0FDaEYsRUFDVCxXQUFXLElBQUkseUVBQUssU0FBUyxFQUFDLGdCQUFnQixZQUFFLFNBQVMsR0FBTyxJQUM3RCxDQUNQLElBQ2MsQ0FDbEI7QUFDSCxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7OztBQzNIRDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztHQTRCRztBQVNILE1BQU0sV0FBVztJQU1mLFlBQVksT0FBMkI7UUFML0Isb0JBQWUsR0FBc0IsSUFBSSxHQUFHLEVBQUU7UUFDOUMsZ0JBQVcsR0FBRyxLQUFLO1FBS3pCLElBQUksQ0FBQyxVQUFVLEdBQUcsT0FBTyxDQUFDLFVBQVU7UUFDcEMsSUFBSSxDQUFDLFFBQVEsR0FBRyxPQUFPLENBQUMsUUFBUTtJQUNsQyxDQUFDO0lBRU8sVUFBVTtRQUNoQixJQUFJLElBQUksQ0FBQyxXQUFXO1lBQUUsT0FBTTtRQUU1QixvRUFBb0U7UUFDcEUsSUFBSSxTQUFTLEdBQUcsSUFBSSxlQUFlLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUM7UUFDM0QsSUFBSSxVQUFVLEdBQUcsU0FBUyxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUM7UUFFdkMsd0VBQXdFO1FBQ3hFLElBQUksVUFBVSxLQUFLLElBQUksSUFBSSxNQUFNLENBQUMsTUFBTSxLQUFLLE1BQU0sRUFBRSxDQUFDO1lBQ3BELElBQUksQ0FBQztnQkFDSCxTQUFTLEdBQUcsSUFBSSxlQUFlLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDO2dCQUM5RCxVQUFVLEdBQUcsU0FBUyxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUM7WUFDckMsQ0FBQztZQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUM7Z0JBQ1gsbUVBQW1FO1lBQ3JFLENBQUM7UUFDSCxDQUFDO1FBRUQsSUFBSSxVQUFVLEtBQUssT0FBTyxFQUFFLENBQUM7WUFDM0Isc0JBQXNCO1lBQ3RCLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSTtZQUN2QixPQUFNO1FBQ1IsQ0FBQztRQUVELElBQUksVUFBVSxLQUFLLEtBQUssRUFBRSxDQUFDO1lBQ3pCLHNEQUFzRDtZQUN0RCxJQUFJLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsRUFBRTtnQkFDOUIsSUFBSSxPQUFPLEtBQUssS0FBSyxJQUFJLE9BQU8sS0FBSyxPQUFPLEVBQUUsQ0FBQztvQkFDN0MsSUFBSSxDQUFDLGVBQWUsQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDO2dCQUNuQyxDQUFDO1lBQ0gsQ0FBQyxDQUFDO1lBQ0YsT0FBTyxDQUFDLEdBQUcsQ0FBQyxJQUFJLElBQUksQ0FBQyxVQUFVLCtCQUErQixFQUFFLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDO1FBQ25HLENBQUM7YUFBTSxJQUFJLFVBQVUsS0FBSyxJQUFJLEVBQUUsQ0FBQztZQUMvQixxQ0FBcUM7WUFDckMsTUFBTSxpQkFBaUIsR0FBRyxVQUFVLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxXQUFXLEVBQWtCLENBQUM7WUFDaEcsaUJBQWlCLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxFQUFFO2dCQUNsQyxJQUFJLE9BQU8sQ0FBQyxXQUFXLEVBQUUsS0FBSyxLQUFLLEVBQUUsQ0FBQztvQkFDcEMsc0NBQXNDO29CQUN0QyxJQUFJLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRTt3QkFDeEIsSUFBSSxDQUFDLEtBQUssS0FBSyxJQUFJLENBQUMsS0FBSyxPQUFPLEVBQUUsQ0FBQzs0QkFDakMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO3dCQUM3QixDQUFDO29CQUNILENBQUMsQ0FBQztnQkFDSixDQUFDO3FCQUFNLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQztvQkFDM0MsSUFBSSxDQUFDLGVBQWUsQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDO2dCQUNuQyxDQUFDO1lBQ0gsQ0FBQyxDQUFDO1FBQ0osQ0FBQztRQUVELElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSTtJQUN6QixDQUFDO0lBRU8sU0FBUyxDQUFDLE9BQXFCO1FBQ3JDLElBQUksQ0FBQyxVQUFVLEVBQUU7UUFFakIsSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDO1lBQ3BDLE9BQU8sSUFBSTtRQUNiLENBQUM7UUFFRCxPQUFPLElBQUksQ0FBQyxlQUFlLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQztJQUMxQyxDQUFDO0lBRUQsR0FBRyxDQUFDLE9BQXFCLEVBQUUsSUFBUztRQUNsQyxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDO1lBQzdCLE9BQU07UUFDUixDQUFDO1FBRUQsTUFBTSxPQUFPLG1CQUNYLE9BQU8sRUFDUCxTQUFTLEVBQUUsSUFBSSxJQUFJLEVBQUUsQ0FBQyxXQUFXLEVBQUUsSUFDaEMsSUFBSSxDQUNSO1FBRUQsT0FBTyxDQUFDLEdBQUcsQ0FBQyxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsV0FBVyxFQUFFLElBQUksT0FBTyxHQUFHLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxPQUFPLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQ2hHLENBQUM7SUFFRCxTQUFTO1FBQ1AsSUFBSSxDQUFDLFVBQVUsRUFBRTtRQUVqQixNQUFNLFNBQVMsR0FBRyxJQUFJLGVBQWUsQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQztRQUM3RCxNQUFNLFVBQVUsR0FBRyxTQUFTLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQztRQUV6QyxPQUFPO1lBQ0wsZUFBZSxFQUFFLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQztZQUNqRCxVQUFVO1NBQ1g7SUFDSCxDQUFDO0NBQ0Y7QUFFRDs7R0FFRztBQUNJLFNBQVMsNEJBQTRCO0lBQzFDLE9BQU8sSUFBSSxXQUFXLENBQUM7UUFDckIsVUFBVSxFQUFFLGFBQWE7UUFDekIsUUFBUSxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLFlBQVksRUFBRSxhQUFhLEVBQUUsT0FBTyxFQUFFLFdBQVcsRUFBRSxjQUFjLEVBQUUsU0FBUyxFQUFFLGNBQWMsRUFBRSxpQkFBaUIsRUFBRSxnQkFBZ0IsQ0FBQztLQUM5SyxDQUFDO0FBQ0osQ0FBQztBQUVEOztHQUVHO0FBQ0ksU0FBUyw2QkFBNkI7SUFDM0MsT0FBTyxJQUFJLFdBQVcsQ0FBQztRQUNyQixVQUFVLEVBQUUsY0FBYztRQUMxQixRQUFRLEVBQUUsQ0FBQyxNQUFNLEVBQUUsV0FBVyxFQUFFLGNBQWMsRUFBRSxTQUFTLENBQUM7S0FDM0QsQ0FBQztBQUNKLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDdEppQjtBQU1YLFNBQVMsbUJBQW1CLENBQUUsS0FBWTtJQUMvQyxNQUFNLEVBQUUsUUFBUSxFQUFFLGVBQWUsRUFBRSxHQUFHLEtBQUs7SUFFM0MsTUFBTSxNQUFNLEdBQVksaURBQVUsQ0FBQyxXQUFXLENBQUMsQ0FBQyxLQUFjLEVBQUUsRUFBRTs7UUFDaEUsSUFBSSxTQUFzQjtRQUMxQixJQUFJLE1BQU0sQ0FBQyxVQUFVLENBQUMsU0FBUyxFQUFFLENBQUM7WUFDaEMsU0FBUyxHQUFHLEtBQUssQ0FBQyxpQkFBaUIsQ0FBQyxTQUFTO1FBQy9DLENBQUM7YUFBTSxDQUFDO1lBQ04sU0FBUyxHQUFHLEtBQUssQ0FBQyxTQUFTO1FBQzdCLENBQUM7UUFDRCxNQUFNLGNBQWMsR0FBRyxlQUFTLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDLGNBQWMsbUNBQUksRUFBRTtRQUN2RSxPQUFPLGNBQWMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsWUFBWSxLQUFLLGVBQWUsQ0FBQztJQUM3RSxDQUFDLENBQUM7SUFFRixPQUFPLE1BQU07QUFDZixDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUN0QkQ7O0dBRUc7QUFDSSxNQUFNLGlCQUFpQixHQUFHLENBQUMsSUFBSSxFQUFFLEtBQUssR0FBRyxFQUFFLEVBQUUsRUFBRSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEtBQUssSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLEVBQUUsSUFBSSxDQUFDO0FBTzlIOztHQUVHO0FBQ0ksU0FBUyxvQkFBb0IsQ0FBRSxPQUFtRDtJQUN2RixNQUFNLEVBQUUsSUFBSSxFQUFFLGVBQWUsR0FBRyxFQUFFLEVBQUUsR0FBRyxPQUFPLElBQUksRUFBRTtJQUNwRCxNQUFNLGNBQWMsR0FBdUIsQ0FBQyxFQUFFLEVBQUUsT0FBTyxFQUFFLEVBQUU7UUFDekQsTUFBTSxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsR0FBRyxPQUFPLElBQUksRUFBRTtRQUMxQyxPQUFPLElBQUksQ0FBQyxhQUFhLENBQUMsRUFBRSxFQUFFLEVBQUUsY0FBYyxFQUFFLENBQUMsUUFBUSxJQUFJLGVBQWUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsTUFBTSxDQUFDO0lBQzlGLENBQUM7SUFDRCxPQUFPLGNBQWM7QUFDdkIsQ0FBQztBQUVNLFNBQVMsMkJBQTJCLENBQUUsU0FBcUI7O0lBQ2hFLE1BQU0sTUFBTSxHQUFHLEVBQUU7SUFDakIsSUFBSSxnQkFBUyxhQUFULFNBQVMsdUJBQVQsU0FBUyxDQUFFLGFBQWEsMENBQUUsTUFBTSxJQUFHLENBQUMsRUFBRSxDQUFDO1FBQ3pDLFNBQVMsQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxFQUFFOztZQUN4QyxJQUFJLE9BQU8sQ0FBQyxJQUFJLEtBQUssUUFBUSxJQUFJLGNBQU8sQ0FBQyxVQUFVLDBDQUFFLE1BQU0sSUFBRyxDQUFDLEVBQUUsQ0FBQztnQkFDaEUsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLE9BQU8sQ0FBQyxVQUFVLENBQUM7WUFDcEMsQ0FBQztRQUNILENBQUMsQ0FBQztJQUNKLENBQUM7SUFDRCxPQUFPLE1BQU07QUFDZixDQUFDOzs7Ozs7Ozs7Ozs7QUNuQ0Qsd0U7Ozs7Ozs7Ozs7O0FDQUEseUQ7Ozs7Ozs7Ozs7O0FDQUEsdUQ7Ozs7Ozs7Ozs7O0FDQUEseUU7Ozs7Ozs7Ozs7O0FDQUEsd0Q7Ozs7Ozs7Ozs7O0FDQUEscUQ7Ozs7Ozs7Ozs7O0FDQUEsa0Y7Ozs7Ozs7Ozs7O0FDQUEsd0U7Ozs7OztVQ0FBO1VBQ0E7O1VBRUE7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7O1VBRUE7VUFDQTs7VUFFQTtVQUNBO1VBQ0E7Ozs7O1dDdEJBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQSxpQ0FBaUMsV0FBVztXQUM1QztXQUNBLEU7Ozs7O1dDUEE7V0FDQTtXQUNBO1dBQ0E7V0FDQSx5Q0FBeUMsd0NBQXdDO1dBQ2pGO1dBQ0E7V0FDQSxFOzs7OztXQ1BBLHdGOzs7OztXQ0FBO1dBQ0E7V0FDQTtXQUNBLHVEQUF1RCxpQkFBaUI7V0FDeEU7V0FDQSxnREFBZ0QsYUFBYTtXQUM3RCxFOzs7OztXQ05BLDJCOzs7Ozs7Ozs7O0FDQUE7OztLQUdLO0FBQ0wscUJBQXVCLEdBQUcsTUFBTSxDQUFDLFVBQVUsQ0FBQyxPQUFPOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0puRCxlQUFlO0FBQzZMO0FBQzFKO0FBQ3dCO0FBQ3RCO0FBQ0s7QUFDVztBQUVqQjtBQUNGO0FBQ1E7QUFDZTtBQUNuQjtBQUNvQjtBQUNjO0FBQ3hCO0FBQ3BCO0FBRTNDLE1BQU0sV0FBVyxHQUFHLHlGQUE0QixFQUFFO0FBQ2xELE1BQU0sRUFBRSxPQUFPLEVBQUUsR0FBRyx1RUFBdUIsRUFBRTtBQUU3Qzs7R0FFRztBQUNILE1BQU0sOEJBQThCLEdBQUcsa0NBQWtDO0FBRXpFOztHQUVHO0FBQ0gsTUFBTSwrQkFBK0IsR0FBRyx1Q0FBdUM7QUFFL0UsTUFBcUIsTUFBTyxTQUFRLDRDQUFLLENBQUMsYUFXeEM7SUFYRjs7UUFhVSxzQkFBaUIsR0FBVyxFQUFFO1FBRXRDLFVBQUssR0FXRDtZQUNGLFdBQVcsRUFBRSxrREFBYSxDQUFDLFlBQVksRUFBRSxlQUFlO1lBQ3hELFNBQVMsRUFBRSxPQUFPO1NBQ25CO1FBRUQsb0JBQWUsR0FBRyxDQUFDLFNBQThCLEVBQUUsRUFBRTtZQUNuRCxJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUUsU0FBUyxFQUFFLENBQUM7UUFDOUIsQ0FBQztRQUNPLGNBQVMsR0FBRyw0Q0FBSyxDQUFDLFNBQVMsRUFBa0I7UUFDN0MsdUJBQWtCLEdBQWdDLElBQUk7UUFDdEQsNEJBQXVCLEdBQWtCLElBQUk7UUFDN0MscUJBQWdCLEdBQUcsNENBQUssQ0FBQyxTQUFTLEVBQStCO1FBQ2pFLGVBQVUsR0FBRyw0Q0FBSyxDQUFDLFNBQVMsRUFBNEM7UUE0RmhGOzs7Ozs7V0FNRztRQUNILGtDQUE2QixHQUFHLENBQUMsU0FBbUIsRUFBRSxZQUFxQixFQUFFLEVBQUU7WUFDN0UsTUFBTSxFQUFFLEVBQUUsRUFBRSxHQUFHLElBQUksQ0FBQyxLQUFLO1lBRXpCLE1BQU0sS0FBSyxHQUFHLElBQUksV0FBVyxDQUFDLDBFQUEyQixFQUFFO2dCQUN6RCxNQUFNLEVBQUU7b0JBQ04sUUFBUSxFQUFFLEVBQUU7b0JBQ1osU0FBUztvQkFDVCxZQUFZO2lCQUNiO2dCQUNELE9BQU8sRUFBRSxJQUFJO2dCQUNiLFVBQVUsRUFBRSxJQUFJO2FBQ2pCLENBQUM7WUFDRixNQUFNLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQztRQUM3QixDQUFDO1FBRUQ7OztXQUdHO1FBQ0gsNkJBQXdCLEdBQUcsR0FBRyxFQUFFO1lBQzlCLDBDQUEwQztZQUMxQyxVQUFVLENBQUMsR0FBRyxFQUFFO2dCQUNkLElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLE9BQU8sRUFBRSxDQUFDO29CQUM1QixXQUFXLENBQUMsR0FBRyxDQUFDLGNBQWMsRUFBRTt3QkFDOUIsS0FBSyxFQUFFLG1DQUFtQzt3QkFDMUMsUUFBUSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRTt3QkFDdkIsTUFBTSxFQUFFLDBCQUEwQjtxQkFDbkMsQ0FBQztvQkFDRixPQUFNO2dCQUNSLENBQUM7Z0JBRUQsTUFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxPQUFPO2dCQUV0QyxrREFBa0Q7Z0JBQ2xELElBQUksc0JBQXNCLElBQUksTUFBTSxFQUFFLENBQUM7b0JBQ3JDLElBQUksQ0FBQyxrQkFBa0IsR0FBRyxJQUFJLG9CQUFvQixDQUNoRCxDQUFDLE9BQU8sRUFBRSxFQUFFO3dCQUNWLE1BQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQyxDQUFDLENBQUM7d0JBQ3hCLE1BQU0sU0FBUyxHQUFHLEtBQUssQ0FBQyxjQUFjLElBQUksS0FBSyxDQUFDLGlCQUFpQixHQUFHLENBQUM7d0JBRXJFLDRCQUE0Qjt3QkFDNUIsSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLGNBQWMsS0FBSyxTQUFTLEVBQUUsQ0FBQzs0QkFDNUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxFQUFFLGNBQWMsRUFBRSxTQUFTLEVBQUUsQ0FBQzs0QkFDNUMsSUFBSSxDQUFDLG1CQUFtQixDQUFDLFNBQVMsRUFBRSxzQkFBc0IsQ0FBQzs0QkFDM0QsSUFBSSxDQUFDLDhCQUE4QixDQUFDLFNBQVMsQ0FBQzt3QkFDaEQsQ0FBQztvQkFDSCxDQUFDLEVBQ0Q7d0JBQ0UsU0FBUyxFQUFFLENBQUMsQ0FBQyxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUMsRUFBRSwwQ0FBMEM7d0JBQ3BFLFVBQVUsRUFBRSxLQUFLO3FCQUNsQixDQUNGO29CQUVELElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDO29CQUN4QyxXQUFXLENBQUMsR0FBRyxDQUFDLGNBQWMsRUFBRTt3QkFDOUIsS0FBSyxFQUFFLDRCQUE0Qjt3QkFDbkMsUUFBUSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRTt3QkFDdkIsTUFBTSxFQUFFLHNCQUFzQjtxQkFDL0IsQ0FBQztnQkFDSixDQUFDO3FCQUFNLENBQUM7b0JBQ04sMENBQTBDO29CQUMxQyxJQUFJLENBQUMsdUJBQXVCLEdBQUcsTUFBTSxDQUFDLFdBQVcsQ0FBQyxHQUFHLEVBQUU7d0JBQ3JELE1BQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxlQUFlLEVBQUU7d0JBQ3hDLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxjQUFjLEtBQUssU0FBUyxFQUFFLENBQUM7NEJBQzVDLElBQUksQ0FBQyxRQUFRLENBQUMsRUFBRSxjQUFjLEVBQUUsU0FBUyxFQUFFLENBQUM7NEJBQzVDLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxTQUFTLEVBQUUsZ0JBQWdCLENBQUM7NEJBQ3JELElBQUksQ0FBQyw4QkFBOEIsQ0FBQyxTQUFTLENBQUM7d0JBQ2hELENBQUM7b0JBQ0gsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxFQUFDLG9CQUFvQjtvQkFFNUIsV0FBVyxDQUFDLEdBQUcsQ0FBQyxjQUFjLEVBQUU7d0JBQzlCLEtBQUssRUFBRSw0QkFBNEI7d0JBQ25DLFFBQVEsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUU7d0JBQ3ZCLE1BQU0sRUFBRSxnQkFBZ0I7cUJBQ3pCLENBQUM7Z0JBQ0osQ0FBQztZQUNILENBQUMsRUFBRSxHQUFHLENBQUM7UUFDVCxDQUFDO1FBRUQ7O1dBRUc7UUFDSCwrQkFBMEIsR0FBRyxHQUFHLEVBQUU7WUFDaEMsSUFBSSxJQUFJLENBQUMsa0JBQWtCLEVBQUUsQ0FBQztnQkFDNUIsSUFBSSxDQUFDLGtCQUFrQixDQUFDLFVBQVUsRUFBRTtnQkFDcEMsSUFBSSxDQUFDLGtCQUFrQixHQUFHLElBQUk7WUFDaEMsQ0FBQztZQUVELElBQUksSUFBSSxDQUFDLHVCQUF1QixLQUFLLElBQUksRUFBRSxDQUFDO2dCQUMxQyxhQUFhLENBQUMsSUFBSSxDQUFDLHVCQUF1QixDQUFDO2dCQUMzQyxJQUFJLENBQUMsdUJBQXVCLEdBQUcsSUFBSTtZQUNyQyxDQUFDO1FBQ0gsQ0FBQztRQUVEOzs7V0FHRztRQUNLLDZCQUF3QixHQUFHLENBQUMsV0FBK0IsRUFBRSxFQUFFOztZQUNyRSxNQUFNLEVBQUUsRUFBRSxFQUFFLE1BQU0sRUFBRSxHQUFHLElBQUksQ0FBQyxLQUFLO1lBRWpDLFdBQVcsQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLEVBQUU7Z0JBQ2hDLEtBQUssRUFBRSwwQkFBMEI7Z0JBQ2pDLFFBQVEsRUFBRSxFQUFFO2dCQUNaLGNBQWMsRUFBRSxDQUFDLENBQUMsV0FBVztnQkFDN0IsT0FBTyxFQUFFLENBQUMsQ0FBQyxDQUFDLFdBQVcsYUFBWCxXQUFXLHVCQUFYLFdBQVcsQ0FBRSxJQUFJLENBQUM7Z0JBQzlCLFFBQVEsRUFBRSxrQkFBVyxhQUFYLFdBQVcsdUJBQVgsV0FBVyxDQUFFLElBQUksMENBQUUsSUFBSSxLQUFJLE1BQU07Z0JBQzNDLFNBQVMsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFO2FBQ3RCLENBQUM7WUFFRiw2QkFBNkI7WUFDN0IsSUFBSSxDQUFDLFFBQVEsQ0FBQyxFQUFFLFdBQVcsRUFBRSxXQUFXLElBQUksU0FBUyxFQUFFLENBQUM7WUFFeEQsd0VBQXdFO1lBQ3hFLElBQUksWUFBVyxhQUFYLFdBQVcsdUJBQVgsV0FBVyxDQUFFLElBQUksS0FBSSxNQUFNLENBQUMsNEJBQTRCLElBQUksQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLENBQUM7Z0JBQy9GLElBQUksQ0FBQyx1QkFBdUIsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDO1lBQ2hELENBQUM7UUFDSCxDQUFDO1FBRUQ7O1dBRUc7UUFDSyw0QkFBdUIsR0FBRyxDQUFPLE9BQTBDLEVBQUUsRUFBRTtZQUNyRixNQUFNLEVBQUUsRUFBRSxFQUFFLEdBQUcsSUFBSSxDQUFDLEtBQUs7WUFFekIsSUFBSSxDQUFDO2dCQUNILCtCQUErQjtnQkFDL0IsTUFBTSxhQUFhLEdBQUcsTUFBTSxnRkFBd0IsQ0FBQyxFQUFFLEVBQUUsT0FBTyxDQUFDO2dCQUNqRSxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7b0JBQ25CLFdBQVcsQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLEVBQUU7d0JBQ2hDLEtBQUssRUFBRSxnQ0FBZ0M7d0JBQ3ZDLFFBQVEsRUFBRSxFQUFFO3dCQUNaLE1BQU0sRUFBRSxnQ0FBZ0M7d0JBQ3hDLFNBQVMsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFO3FCQUN0QixDQUFDO29CQUNGLE9BQU07Z0JBQ1IsQ0FBQztnQkFFRCxtQkFBbUI7Z0JBQ25CLElBQUksQ0FBQyxVQUFVLENBQUMsT0FBTyxHQUFHLE9BQU87Z0JBQ2pDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEdBQUcsYUFBYTtnQkFFN0MsbURBQW1EO2dCQUNuRCxJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUUsd0JBQXdCLEVBQUUsSUFBSSxFQUFFLENBQUM7Z0JBRWpELFdBQVcsQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLEVBQUU7b0JBQ2hDLEtBQUssRUFBRSxpQ0FBaUM7b0JBQ3hDLFFBQVEsRUFBRSxFQUFFO29CQUNaLGVBQWUsRUFBRSxhQUFhLENBQUMsRUFBRTtvQkFDakMsUUFBUSxFQUFFLE9BQU8sQ0FBQyxJQUFJLElBQUksU0FBUztvQkFDbkMsU0FBUyxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUU7aUJBQ3RCLENBQUM7WUFDSixDQUFDO1lBQUMsT0FBTyxLQUFLLEVBQUUsQ0FBQztnQkFDZixXQUFXLENBQUMsR0FBRyxDQUFDLGdCQUFnQixFQUFFO29CQUNoQyxLQUFLLEVBQUUsK0JBQStCO29CQUN0QyxRQUFRLEVBQUUsRUFBRTtvQkFDWixLQUFLLEVBQUUsS0FBSyxZQUFZLEtBQUssQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQztvQkFDN0QsVUFBVSxFQUFFLEtBQUssWUFBWSxLQUFLLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLFNBQVM7b0JBQzVELFNBQVMsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFO2lCQUN0QixDQUFDO1lBQ0osQ0FBQztRQUNILENBQUM7UUFFRDs7O1dBR0c7UUFDSSx3Q0FBbUMsR0FBRyxDQUFPLFFBQW9CLEVBQUUsRUFBRTs7WUFDMUUsTUFBTSxFQUFFLEVBQUUsRUFBRSxNQUFNLEVBQUUsR0FBRyxJQUFJLENBQUMsS0FBSztZQUVqQyx5REFBeUQ7WUFDekQsSUFBSSxDQUFDLE1BQU0sQ0FBQyw0QkFBNEIsSUFBSSxJQUFJLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLENBQUM7Z0JBQzFFLFdBQVcsQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLEVBQUU7b0JBQ2hDLEtBQUssRUFBRSw2Q0FBNkM7b0JBQ3BELFFBQVEsRUFBRSxFQUFFO29CQUNaLE1BQU0sRUFBRSxDQUFDLE1BQU0sQ0FBQyw0QkFBNEIsQ0FBQyxDQUFDLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxxQkFBcUI7b0JBQ3BGLFNBQVMsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFO2lCQUN0QixDQUFDO2dCQUNGLE9BQU07WUFDUixDQUFDO1lBRUQsc0RBQXNEO1lBQ3RELE1BQU0sT0FBTyxHQUFHLFdBQUksQ0FBQyxLQUFLLENBQUMsV0FBVywwQ0FBRSxJQUFJLEtBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxPQUFPO1lBQ3ZFLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQztnQkFDYixXQUFXLENBQUMsR0FBRyxDQUFDLGdCQUFnQixFQUFFO29CQUNoQyxLQUFLLEVBQUUsNkNBQTZDO29CQUNwRCxRQUFRLEVBQUUsRUFBRTtvQkFDWixNQUFNLEVBQUUsNEJBQTRCO29CQUNwQyxVQUFVLEVBQUUsUUFBUSxDQUFDLEVBQUU7b0JBQ3ZCLGNBQWMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxXQUFXO29CQUN4QyxTQUFTLEVBQUUsSUFBSSxDQUFDLEdBQUcsRUFBRTtpQkFDdEIsQ0FBQztnQkFDRixPQUFNO1lBQ1IsQ0FBQztZQUVELDhDQUE4QztZQUM5QyxNQUFNLElBQUksQ0FBQyx1QkFBdUIsQ0FBQyxPQUFPLENBQUM7UUFDN0MsQ0FBQztRQUVEOztXQUVHO1FBQ0sseUJBQW9CLEdBQUcsR0FBRyxFQUFFO1lBQ2xDLE1BQU0sRUFBRSxFQUFFLEVBQUUsR0FBRyxJQUFJLENBQUMsS0FBSztZQUN6QixNQUFNLE9BQU8sR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLE9BQU87WUFFdkMsSUFBSSxPQUFPLEVBQUUsQ0FBQztnQkFDWiw0RUFBb0IsQ0FBQyxFQUFFLEVBQUUsT0FBTyxDQUFDO2dCQUNqQyxJQUFJLENBQUMsVUFBVSxDQUFDLE9BQU8sR0FBRyxJQUFJO2dCQUM5QixJQUFJLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxHQUFHLElBQUk7Z0JBRXBDLFdBQVcsQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLEVBQUU7b0JBQ2hDLEtBQUssRUFBRSwrQkFBK0I7b0JBQ3RDLFFBQVEsRUFBRSxFQUFFO29CQUNaLFNBQVMsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFO2lCQUN0QixDQUFDO1lBQ0osQ0FBQztRQUNILENBQUM7UUFFRDs7O1dBR0c7UUFDSSwrQkFBMEIsR0FBRyxHQUFHLEVBQUU7WUFDdkMsTUFBTSxFQUFFLE1BQU0sRUFBRSxHQUFHLElBQUksQ0FBQyxLQUFLO1lBQzdCLE1BQU0sYUFBYSxHQUFHLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPO1lBRW5ELElBQUksTUFBTSxDQUFDLDRCQUE0QixJQUFJLGFBQWEsRUFBRSxDQUFDO2dCQUN6RCxXQUFXLENBQUMsR0FBRyxDQUFDLGdCQUFnQixFQUFFO29CQUNoQyxLQUFLLEVBQUUsbUNBQW1DO29CQUMxQyxRQUFRLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFO29CQUN2QixlQUFlLEVBQUUsYUFBYSxDQUFDLEVBQUU7b0JBQ2pDLGFBQWEsRUFBRSxhQUFhLENBQUMsUUFBUSxDQUFDLE1BQU07b0JBQzVDLFNBQVMsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFO2lCQUN0QixDQUFDO2dCQUVGLE1BQU0sRUFBRSxrQkFBa0IsRUFBRSxHQUFHLG1CQUFPLENBQUMsMEdBQXdCLENBQUM7Z0JBQ2hFLGtCQUFrQixDQUFDLGFBQWEsQ0FBQztnQkFFakMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxnQkFBZ0IsRUFBRTtvQkFDaEMsS0FBSyxFQUFFLHFDQUFxQztvQkFDNUMsUUFBUSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRTtvQkFDdkIsZUFBZSxFQUFFLGFBQWEsQ0FBQyxFQUFFO29CQUNqQyxTQUFTLEVBQUUsSUFBSSxDQUFDLEdBQUcsRUFBRTtpQkFDdEIsQ0FBQztZQUNKLENBQUM7aUJBQU0sQ0FBQztnQkFDTixXQUFXLENBQUMsR0FBRyxDQUFDLGdCQUFnQixFQUFFO29CQUNoQyxLQUFLLEVBQUUsb0NBQW9DO29CQUMzQyxRQUFRLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFO29CQUN2QixNQUFNLEVBQUUsQ0FBQyxNQUFNLENBQUMsNEJBQTRCLENBQUMsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsbUJBQW1CO29CQUNsRixnQkFBZ0IsRUFBRSxDQUFDLENBQUMsYUFBYTtvQkFDakMsU0FBUyxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUU7aUJBQ3RCLENBQUM7WUFDSixDQUFDO1FBQ0gsQ0FBQztRQUVEOzs7V0FHRztRQUNILG9CQUFlLEdBQUcsR0FBWSxFQUFFO1lBQzlCLElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLE9BQU87Z0JBQUUsT0FBTyxLQUFLO1lBRXpDLE1BQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsT0FBTztZQUN0QyxNQUFNLEtBQUssR0FBRyxNQUFNLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxDQUFDO1lBQzlDLE1BQU0sSUFBSSxHQUFHLE9BQU8sQ0FBQyxxQkFBcUIsRUFBRTtZQUU1QyxNQUFNLFNBQVMsR0FBRyxDQUNoQixLQUFLLENBQUMsT0FBTyxLQUFLLE1BQU07Z0JBQ3hCLEtBQUssQ0FBQyxVQUFVLEtBQUssUUFBUTtnQkFDN0IsS0FBSyxDQUFDLE9BQU8sS0FBSyxHQUFHO2dCQUNyQixJQUFJLENBQUMsS0FBSyxHQUFHLENBQUM7Z0JBQ2QsSUFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDO2dCQUNmLElBQUksQ0FBQyxHQUFHLEdBQUcsTUFBTSxDQUFDLFdBQVc7Z0JBQzdCLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQztnQkFDZixJQUFJLENBQUMsSUFBSSxHQUFHLE1BQU0sQ0FBQyxVQUFVO2dCQUM3QixJQUFJLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FDZjtZQUVELE9BQU8sU0FBUztRQUNsQixDQUFDO1FBRUQ7OztXQUdHO1FBQ0gsMEJBQXFCLEdBQUcsQ0FBQyxLQUFZLEVBQUUsRUFBRTs7WUFDdkMsTUFBTSxXQUFXLEdBQUcsS0FBdUk7WUFDM0osTUFBTSxFQUFFLEVBQUUsRUFBRSxHQUFHLElBQUksQ0FBQyxLQUFLO1lBRXpCLHVDQUF1QztZQUN2QyxJQUFJLFdBQVcsQ0FBQyxNQUFNLENBQUMsUUFBUSxLQUFLLEVBQUUsRUFBRSxDQUFDO2dCQUN2QyxPQUFNO1lBQ1IsQ0FBQztZQUVELE1BQU0sWUFBWSxHQUFHLFdBQVcsQ0FBQyxNQUFNLENBQUMsU0FBUyxJQUFJLFdBQVcsQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLE1BQU0sR0FBRyxDQUFDO1lBRTVGLHdFQUF3RTtZQUN4RSxzRUFBc0U7WUFDdEUsc0VBQXNFO1lBQ3RFLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLGNBQWMsSUFBSSxDQUFDLFlBQVksRUFBRSxDQUFDO2dCQUNoRCxXQUFXLENBQUMsR0FBRyxDQUFDLFNBQVMsRUFBRTtvQkFDekIsS0FBSyxFQUFFLG1FQUFtRTtvQkFDMUUsUUFBUSxFQUFFLEVBQUU7b0JBQ1osU0FBUyxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUU7aUJBQ3RCLENBQUM7Z0JBQ0YsT0FBTTtZQUNSLENBQUM7WUFFRCxtRkFBbUY7WUFDbkYsOEVBQThFO1lBQzlFLE1BQU0sa0JBQWtCLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxXQUFXLEtBQUssa0RBQWEsQ0FBQyxjQUFjO2dCQUN2RCxJQUFJLENBQUMsS0FBSyxDQUFDLFdBQVcsS0FBSyxrREFBYSxDQUFDLG1CQUFtQjtZQUN2RixNQUFNLHVCQUF1QixHQUFHLFdBQUksQ0FBQyxLQUFLLENBQUMsa0JBQWtCLDBDQUFFLE1BQU0sS0FBSSxDQUFDO1lBQzFFLE1BQU0sY0FBYyxHQUFHLGtCQUFrQixJQUFJLHVCQUF1QixHQUFHLENBQUM7Z0JBQ3RFLENBQUMsQ0FBQyx1QkFBdUI7Z0JBQ3pCLENBQUMsQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFFNUQsK0VBQStFO1lBQy9FLCtGQUErRjtZQUMvRixNQUFNLGVBQWUsR0FBRyxDQUFDLFlBQVk7Z0JBQ2IsY0FBYyxLQUFLLENBQUM7Z0JBQ3BCLElBQUksQ0FBQyxLQUFLLENBQUMsV0FBVyxLQUFLLGtEQUFhLENBQUMsbUJBQW1CO1lBRXBGLFdBQVcsQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFO2dCQUN6QixLQUFLLEVBQUUsc0NBQXNDO2dCQUM3QyxRQUFRLEVBQUUsRUFBRTtnQkFDWixXQUFXLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxXQUFXO2dCQUNuQyxrQkFBa0I7Z0JBQ2xCLG1CQUFtQixFQUFFLFdBQVcsQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLE1BQU07Z0JBQ3hELHFCQUFxQixFQUFFLFlBQVk7Z0JBQ25DLDZCQUE2QixFQUFFLHVCQUF1QjtnQkFDdEQsd0JBQXdCLEVBQUUsY0FBYztnQkFDeEMsdUJBQXVCLEVBQUUsY0FBYyxHQUFHLENBQUM7Z0JBQzNDLHdCQUF3QixFQUFFLFlBQVksSUFBSSxDQUFDLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxVQUFVLElBQUksQ0FBQyxDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsaUJBQWlCO2dCQUNuSCxpQkFBaUIsRUFBRSxlQUFlO2dCQUNsQyxhQUFhLEVBQUU7b0JBQ2Isb0JBQW9CLEVBQUUsa0JBQWtCO29CQUN4Qyw2QkFBNkIsRUFBRSx1QkFBdUIsR0FBRyxDQUFDO29CQUMxRCx1QkFBdUIsRUFBRSxrQkFBa0IsSUFBSSx1QkFBdUIsR0FBRyxDQUFDO29CQUMxRSxpQkFBaUIsRUFBRSxDQUFDLENBQUMsa0JBQWtCLElBQUksdUJBQXVCLEdBQUcsQ0FBQyxDQUFDO29CQUN2RSxtQkFBbUIsRUFBRSxlQUFlO2lCQUNyQzthQUNGLENBQUM7WUFFRixJQUFJLENBQUMsUUFBUSxpQkFDWCxZQUFZLEVBQUUsY0FBYyxHQUFHLENBQUMsRUFDaEMsb0JBQW9CLEVBQUUsY0FBYztnQkFDcEMseUdBQXlHO2dCQUN6RyxhQUFhLEVBQUUsWUFBWSxJQUFJLFdBQVcsQ0FBQyxNQUFNLENBQUMsVUFBVSxJQUFJLFdBQVcsQ0FBQyxNQUFNLENBQUMsaUJBQWlCO29CQUNsRyxDQUFDLENBQUM7d0JBQ0UsU0FBUyxFQUFFLFdBQVcsQ0FBQyxNQUFNLENBQUMsU0FBUzt3QkFDdkMsVUFBVSxFQUFFLFdBQVcsQ0FBQyxNQUFNLENBQUMsVUFBVTt3QkFDekMsaUJBQWlCLEVBQUUsV0FBVyxDQUFDLE1BQU0sQ0FBQyxpQkFBaUI7cUJBQ3hEO29CQUNILENBQUMsQ0FBQyxTQUFTLElBRVYsQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDO2dCQUNwQixXQUFXLEVBQUUsa0RBQWEsQ0FBQyxZQUFZO2dCQUN2QyxrQkFBa0IsRUFBRSxFQUFFLENBQUMscURBQXFEO2FBQzdFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUNQO1lBRUYsV0FBVyxDQUFDLEdBQUcsQ0FBQyxTQUFTLEVBQUU7Z0JBQ3pCLEtBQUssRUFBRSxxQ0FBcUM7Z0JBQzVDLFFBQVEsRUFBRSxFQUFFO2dCQUNaLGtCQUFrQixFQUFFLGNBQWMsR0FBRyxDQUFDO2dCQUN0QywwQkFBMEIsRUFBRSxjQUFjO2dCQUMxQyxtQ0FBbUMsRUFBRSxZQUFZLElBQUksV0FBVyxDQUFDLE1BQU0sQ0FBQyxVQUFVLElBQUksV0FBVyxDQUFDLE1BQU0sQ0FBQyxpQkFBaUI7b0JBQ3hILENBQUMsQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxNQUFNO29CQUNyQyxDQUFDLENBQUMsQ0FBQztnQkFDTCxZQUFZLEVBQUUsZUFBZTtnQkFDN0IsVUFBVSxFQUFFLGVBQWUsQ0FBQyxDQUFDLENBQUMsa0RBQWEsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsV0FBVztnQkFDakYsTUFBTSxFQUFFLGVBQWU7b0JBQ3JCLENBQUMsQ0FBQyx5RUFBeUU7b0JBQzNFLENBQUMsQ0FBQywrRUFBK0U7YUFDcEYsQ0FBQztRQUNKLENBQUM7UUFFRDs7OztXQUlHO1FBQ0ssaUNBQTRCLEdBQUcsQ0FBQyxLQUFZLEVBQUUsRUFBRTs7WUFDdEQsTUFBTSxXQUFXLEdBQUcsS0FLbEI7WUFDRixNQUFNLEVBQUUsRUFBRSxFQUFFLEdBQUcsSUFBSSxDQUFDLEtBQUs7WUFFekIsd0NBQXdDO1lBQ3hDLElBQUksV0FBVyxDQUFDLE1BQU0sQ0FBQyxRQUFRLEtBQUssRUFBRSxFQUFFLENBQUM7Z0JBQ3ZDLE9BQU07WUFDUixDQUFDO1lBRUQsTUFBTSxZQUFZLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxjQUFjLEtBQUssSUFBSTtZQUN2RCxNQUFNLGtCQUFrQixHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsV0FBVyxLQUFLLGtEQUFhLENBQUMsY0FBYztnQkFDdkQsSUFBSSxDQUFDLEtBQUssQ0FBQyxXQUFXLEtBQUssa0RBQWEsQ0FBQyxtQkFBbUI7WUFFdkYsV0FBVyxDQUFDLEdBQUcsQ0FBQyxTQUFTLEVBQUU7Z0JBQ3pCLEtBQUssRUFBRSx5Q0FBeUM7Z0JBQ2hELFFBQVEsRUFBRSxFQUFFO2dCQUNaLFlBQVk7Z0JBQ1osV0FBVyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsV0FBVztnQkFDbkMsa0JBQWtCO2dCQUNsQixtQkFBbUIsRUFBRSxXQUFXLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxNQUFNO2dCQUN4RCxZQUFZLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxZQUFZLElBQUksS0FBSztnQkFDOUMsdUJBQXVCLEVBQUUsV0FBSSxDQUFDLEtBQUssQ0FBQyxrQkFBa0IsMENBQUUsTUFBTSxLQUFJLENBQUM7Z0JBQ25FLGdCQUFnQixFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLGFBQWE7Z0JBQzVDLHdCQUF3QixFQUFFLFdBQUksQ0FBQyxLQUFLLENBQUMsYUFBYSwwQ0FBRSxTQUFTLENBQUMsTUFBTSxLQUFJLENBQUM7Z0JBQ3pFLFVBQVUsRUFBRSxXQUFXLENBQUMsTUFBTSxDQUFDLFVBQVU7Z0JBQ3pDLGlCQUFpQixFQUFFLFdBQVcsQ0FBQyxNQUFNLENBQUMsaUJBQWlCO2FBQ3hELENBQUM7WUFFRixpQ0FBaUM7WUFDakMsSUFBSSxDQUFDLFlBQVksRUFBRSxDQUFDO2dCQUNsQixXQUFXLENBQUMsR0FBRyxDQUFDLFNBQVMsRUFBRTtvQkFDekIsS0FBSyxFQUFFLHFEQUFxRDtvQkFDNUQsUUFBUSxFQUFFLEVBQUU7b0JBQ1osV0FBVyxFQUFFLFdBQVcsQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLE1BQU07aUJBQ2pELENBQUM7Z0JBQ0YsT0FBTTtZQUNSLENBQUM7WUFFRCwrRUFBK0U7WUFDL0UsSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLGtCQUFrQixJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsa0JBQWtCLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRSxDQUFDO2dCQUM5RSxXQUFXLENBQUMsR0FBRyxDQUFDLFNBQVMsRUFBRTtvQkFDekIsS0FBSyxFQUFFLGlEQUFpRDtvQkFDeEQsUUFBUSxFQUFFLEVBQUU7b0JBQ1osV0FBVyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsV0FBVztvQkFDbkMsa0JBQWtCO29CQUNsQix1QkFBdUIsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLGtCQUFrQixDQUFDLE1BQU07b0JBQzdELHdCQUF3QixFQUFFLElBQUk7b0JBQzlCLHlCQUF5QixFQUFFLGtCQUFrQjtvQkFDN0Msa0JBQWtCLEVBQUUsa0JBQWtCO2lCQUN2QyxDQUFDO1lBQ0osQ0FBQztZQUVELDBFQUEwRTtZQUMxRSxJQUFJLGtCQUFrQixFQUFFLENBQUM7Z0JBQ3ZCLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLFlBQVksSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsa0JBQWtCLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxrQkFBa0IsQ0FBQyxNQUFNLEtBQUssQ0FBQyxFQUFFLENBQUM7b0JBQzdHLFdBQVcsQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFO3dCQUN6QixLQUFLLEVBQUUsOERBQThEO3dCQUNyRSxRQUFRLEVBQUUsRUFBRTt3QkFDWixZQUFZLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxZQUFZO3dCQUNyQyx1QkFBdUIsRUFBRSxXQUFJLENBQUMsS0FBSyxDQUFDLGtCQUFrQiwwQ0FBRSxNQUFNLEtBQUksQ0FBQzt3QkFDbkUsWUFBWSxFQUFFLGlEQUFpRDt3QkFDL0QsMkRBQTJELEVBQUUsSUFBSTtxQkFDbEUsQ0FBQztvQkFDRixPQUFNO2dCQUNSLENBQUM7Z0JBRUQseURBQXlEO2dCQUN6RCxXQUFXLENBQUMsR0FBRyxDQUFDLFNBQVMsRUFBRTtvQkFDekIsS0FBSyxFQUFFLHFEQUFxRDtvQkFDNUQsUUFBUSxFQUFFLEVBQUU7b0JBQ1osdUJBQXVCLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxrQkFBa0IsQ0FBQyxNQUFNO2lCQUM5RCxDQUFDO2dCQUVGLElBQUksQ0FBQyxpQkFBaUIsRUFBRTtnQkFDeEIsT0FBTTtZQUNSLENBQUM7WUFFRCxpRkFBaUY7WUFDakYsSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLGtCQUFrQixJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsa0JBQWtCLENBQUMsTUFBTSxHQUFHLENBQUMsSUFBSSxDQUFDLGtCQUFrQixFQUFFLENBQUM7Z0JBQ3JHLFdBQVcsQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFO29CQUN6QixLQUFLLEVBQUUsMkVBQTJFO29CQUNsRixRQUFRLEVBQUUsRUFBRTtvQkFDWixXQUFXLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxXQUFXO29CQUNuQyxrQkFBa0I7b0JBQ2xCLHVCQUF1QixFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsa0JBQWtCLENBQUMsTUFBTTtvQkFDN0QsWUFBWSxFQUFFLHlEQUF5RDtvQkFDdkUsMEJBQTBCLEVBQUUscUJBQXFCO2lCQUNsRCxDQUFDO1lBQ0osQ0FBQztZQUVELGdEQUFnRDtZQUNoRCw0Q0FBNEM7WUFDNUMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsWUFBWSxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxhQUFhLEVBQUUsQ0FBQztnQkFDMUQsV0FBVyxDQUFDLEdBQUcsQ0FBQyxTQUFTLEVBQUU7b0JBQ3pCLEtBQUssRUFBRSxvREFBb0Q7b0JBQzNELFFBQVEsRUFBRSxFQUFFO29CQUNaLFlBQVksRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLFlBQVk7b0JBQ3JDLGdCQUFnQixFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLGFBQWE7aUJBQzdDLENBQUM7Z0JBQ0YsT0FBTTtZQUNSLENBQUM7WUFFRCxnQ0FBZ0M7WUFDaEMsSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLGFBQWEsQ0FBQyxVQUFVLEtBQUssV0FBVyxDQUFDLE1BQU0sQ0FBQyxVQUFVLEVBQUUsQ0FBQztnQkFDMUUsV0FBVyxDQUFDLEdBQUcsQ0FBQyxTQUFTLEVBQUU7b0JBQ3pCLEtBQUssRUFBRSxtREFBbUQ7b0JBQzFELFFBQVEsRUFBRSxFQUFFO29CQUNaLGFBQWEsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLGFBQWEsQ0FBQyxVQUFVO29CQUNsRCxtQkFBbUIsRUFBRSxXQUFXLENBQUMsTUFBTSxDQUFDLFVBQVU7aUJBQ25ELENBQUM7Z0JBQ0YsT0FBTTtZQUNSLENBQUM7WUFFRCxvRUFBb0U7WUFDcEUsSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLGFBQWEsQ0FBQyxpQkFBaUIsS0FBSyxXQUFXLENBQUMsTUFBTSxDQUFDLGlCQUFpQixFQUFFLENBQUM7Z0JBQ3hGLFdBQVcsQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFO29CQUN6QixLQUFLLEVBQUUsc0RBQXNEO29CQUM3RCxRQUFRLEVBQUUsRUFBRTtvQkFDWixvQkFBb0IsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLGFBQWEsQ0FBQyxpQkFBaUI7b0JBQ2hFLDBCQUEwQixFQUFFLFdBQVcsQ0FBQyxNQUFNLENBQUMsaUJBQWlCO2lCQUNqRSxDQUFDO2dCQUNGLE9BQU07WUFDUixDQUFDO1lBRUQsbURBQW1EO1lBQ25ELFdBQVcsQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFO2dCQUN6QixLQUFLLEVBQUUsMkNBQTJDO2dCQUNsRCxRQUFRLEVBQUUsRUFBRTtnQkFDWixXQUFXLEVBQUUsV0FBVyxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsTUFBTTtnQkFDaEQsVUFBVSxFQUFFLFdBQVcsQ0FBQyxNQUFNLENBQUMsVUFBVTthQUMxQyxDQUFDO1lBRUYsSUFBSSxDQUFDLGlCQUFpQixFQUFFO1FBQzFCLENBQUM7UUFFRDs7O1dBR0c7UUFDSyxzQkFBaUIsR0FBRyxHQUFHLEVBQUU7WUFDL0IsTUFBTSxFQUFFLGFBQWEsRUFBRSxrQkFBa0IsRUFBRSxXQUFXLEVBQUUsR0FBRyxJQUFJLENBQUMsS0FBSztZQUNyRSxNQUFNLEVBQUUsRUFBRSxFQUFFLEdBQUcsSUFBSSxDQUFDLEtBQUs7WUFFekIsV0FBVyxDQUFDLEdBQUcsQ0FBQyxTQUFTLEVBQUU7Z0JBQ3pCLEtBQUssRUFBRSwwQkFBMEI7Z0JBQ2pDLFFBQVEsRUFBRSxFQUFFO2dCQUNaLFdBQVc7Z0JBQ1gscUJBQXFCLEVBQUUsQ0FBQyxDQUFDLENBQUMsa0JBQWtCLElBQUksa0JBQWtCLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztnQkFDOUUsdUJBQXVCLEVBQUUsbUJBQWtCLGFBQWxCLGtCQUFrQix1QkFBbEIsa0JBQWtCLENBQUUsTUFBTSxLQUFJLENBQUM7Z0JBQ3hELGdCQUFnQixFQUFFLENBQUMsQ0FBQyxhQUFhO2dCQUNqQyx3QkFBd0IsRUFBRSxjQUFhLGFBQWIsYUFBYSx1QkFBYixhQUFhLENBQUUsU0FBUyxDQUFDLE1BQU0sS0FBSSxDQUFDO2dCQUM5RCx1QkFBdUIsRUFBRSxhQUFhLGFBQWIsYUFBYSx1QkFBYixhQUFhLENBQUUsVUFBVTthQUNuRCxDQUFDO1lBRUYsK0RBQStEO1lBQy9ELE1BQU0sa0JBQWtCLEdBQUcsV0FBVyxLQUFLLGtEQUFhLENBQUMsY0FBYztnQkFDN0MsV0FBVyxLQUFLLGtEQUFhLENBQUMsbUJBQW1CO1lBRTNFLCtFQUErRTtZQUMvRSx5RUFBeUU7WUFDekUsSUFBSSxrQkFBa0IsSUFBSSxrQkFBa0IsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUM7Z0JBQ3hELFdBQVcsQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFO29CQUN6QixLQUFLLEVBQUUsNkNBQTZDO29CQUNwRCxRQUFRLEVBQUUsRUFBRTtvQkFDWixXQUFXO29CQUNYLGtCQUFrQjtvQkFDbEIsdUJBQXVCLEVBQUUsa0JBQWtCLENBQUMsTUFBTTtvQkFDbEQsd0JBQXdCLEVBQUUsSUFBSTtvQkFDOUIseUJBQXlCLEVBQUUsa0JBQWtCLElBQUksa0JBQWtCLElBQUksa0JBQWtCLENBQUMsTUFBTSxHQUFHLENBQUM7b0JBQ3BHLGtCQUFrQixFQUFFLGtCQUFrQixJQUFJLGtCQUFrQixJQUFJLGtCQUFrQixDQUFDLE1BQU0sR0FBRyxDQUFDO2lCQUM5RixDQUFDO1lBQ0osQ0FBQztpQkFBTSxDQUFDO2dCQUNOLFdBQVcsQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFO29CQUN6QixLQUFLLEVBQUUsMENBQTBDO29CQUNqRCxRQUFRLEVBQUUsRUFBRTtvQkFDWixXQUFXO29CQUNYLGtCQUFrQjtvQkFDbEIsdUJBQXVCLEVBQUUsQ0FBQztvQkFDMUIsZ0NBQWdDLEVBQUUsQ0FBQyxDQUFDLGFBQWE7aUJBQ2xELENBQUM7WUFDSixDQUFDO1lBRUQsSUFBSSxrQkFBa0IsSUFBSSxrQkFBa0IsSUFBSSxrQkFBa0IsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUM7Z0JBQzlFLGtEQUFrRDtnQkFDbEQsTUFBTSxpQkFBaUIsR0FBRyxJQUFJLEdBQUcsRUFBK0M7Z0JBQ2hGLE1BQU0sU0FBUyxHQUFHLHdEQUFpQixDQUFDLFdBQVcsRUFBRTtnQkFFakQsa0JBQWtCLENBQUMsT0FBTyxDQUFDLENBQUMsTUFBTSxFQUFFLEtBQUssRUFBRSxFQUFFOztvQkFDM0MsTUFBTSxRQUFRLEdBQUcsTUFBTSxDQUFDLEtBQUssRUFBRTtvQkFDL0IsSUFBSSxRQUFRLEdBQWtDLElBQUk7b0JBRWxELG1EQUFtRDtvQkFDbkQsTUFBTSxRQUFRLEdBQUcsWUFBTSxDQUFDLGFBQWEsc0RBQThCO29CQUNuRSxJQUFJLFFBQVEsRUFBRSxDQUFDO3dCQUNiLFFBQVEsR0FBRyxlQUFRLENBQUMsb0JBQW9CLEVBQUUsMENBQUcsQ0FBQyxDQUEyQixLQUFJLFFBQVE7d0JBRXJGLFdBQVcsQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFOzRCQUN6QixLQUFLLEVBQUUsZ0NBQWdDOzRCQUN2QyxRQUFRLEVBQUUsRUFBRTs0QkFDWixXQUFXLEVBQUUsS0FBSzs0QkFDbEIsUUFBUTs0QkFDUixVQUFVLEVBQUUsU0FBUSxhQUFSLFFBQVEsdUJBQVIsUUFBUSxDQUFFLEVBQUUsS0FBSSxNQUFNOzRCQUNsQyxNQUFNLEVBQUUsd0JBQXdCO3lCQUNqQyxDQUFDO29CQUNKLENBQUM7b0JBRUQsa0ZBQWtGO29CQUNsRixJQUFJLENBQUMsUUFBUSxFQUFFLENBQUM7d0JBQ2QsTUFBTSxLQUFLLEdBQUcsU0FBUyxDQUFDLGNBQWMsRUFBRTt3QkFDeEMsTUFBTSxjQUFjLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUM7d0JBRTNDLEtBQUssTUFBTSxFQUFFLElBQUksY0FBYyxFQUFFLENBQUM7NEJBQ2hDLHVGQUF1Rjs0QkFDdkYsSUFBSSxFQUFFLElBQUksT0FBUSxFQUFVLENBQUMsbUJBQW1CLEtBQUssVUFBVSxFQUFFLENBQUM7Z0NBQ2hFLElBQUksQ0FBQztvQ0FDSCxrQ0FBa0M7b0NBQ2xDLE1BQU0sVUFBVSxHQUFJLEVBQVUsQ0FBQyxtQkFBbUIsRUFBRSxJQUFJLEVBQUU7b0NBQzFELE1BQU0sY0FBYyxHQUFHLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFvQixFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxFQUFFLEtBQUssUUFBUSxDQUFDO29DQUV4RixJQUFJLGNBQWMsRUFBRSxDQUFDO3dDQUNuQixnREFBZ0Q7d0NBQ2hELFFBQVEsR0FBRyxPQUFDLEVBQVUsQ0FBQyxvQkFBb0IsRUFBRSwwQ0FBRyxDQUFDLENBQTJCLEtBQUksRUFBNEI7d0NBRTVHLFdBQVcsQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFOzRDQUN6QixLQUFLLEVBQUUsNEJBQTRCOzRDQUNuQyxRQUFRLEVBQUUsRUFBRTs0Q0FDWixXQUFXLEVBQUUsS0FBSzs0Q0FDbEIsUUFBUTs0Q0FDUixVQUFVLEVBQUUsUUFBUSxDQUFDLEVBQUU7NENBQ3ZCLE1BQU0sRUFBRSwyQkFBMkI7NENBQ25DLFlBQVksRUFBRSxFQUFFLENBQUMsRUFBRTt5Q0FDcEIsQ0FBQzt3Q0FDRixNQUFLO29DQUNQLENBQUM7Z0NBQ0gsQ0FBQztnQ0FBQyxPQUFPLEtBQUssRUFBRSxDQUFDO29DQUNmLHFCQUFxQjtnQ0FDdkIsQ0FBQzs0QkFDSCxDQUFDO3dCQUNILENBQUM7b0JBQ0gsQ0FBQztvQkFFRCxJQUFJLFFBQVEsRUFBRSxDQUFDO3dCQUNiLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQzs0QkFDckMsaUJBQWlCLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBRSxFQUFFLENBQUM7d0JBQ3JDLENBQUM7d0JBQ0QsaUJBQWlCLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBRSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUM7b0JBQy9DLENBQUM7eUJBQU0sQ0FBQzt3QkFDTixXQUFXLENBQUMsR0FBRyxDQUFDLFNBQVMsRUFBRTs0QkFDekIsS0FBSyxFQUFFLHFDQUFxQzs0QkFDNUMsUUFBUSxFQUFFLEVBQUU7NEJBQ1osV0FBVyxFQUFFLEtBQUs7NEJBQ2xCLFFBQVE7NEJBQ1IsT0FBTyxFQUFFLHdCQUF3Qjt5QkFDbEMsQ0FBQztvQkFDSixDQUFDO2dCQUNILENBQUMsQ0FBQztnQkFFRixXQUFXLENBQUMsR0FBRyxDQUFDLFNBQVMsRUFBRTtvQkFDekIsS0FBSyxFQUFFLDRDQUE0QztvQkFDbkQsUUFBUSxFQUFFLEVBQUU7b0JBQ1osV0FBVztvQkFDWCx1QkFBdUIsRUFBRSxrQkFBa0IsQ0FBQyxNQUFNO29CQUNsRCxhQUFhLEVBQUUsaUJBQWlCLENBQUMsSUFBSTtpQkFDdEMsQ0FBQztnQkFFRixnREFBZ0Q7Z0JBQ2hELE1BQU0sRUFBRSx1QkFBdUIsRUFBRSxHQUFHLG1CQUFPLENBQUMsZ0dBQW1CLENBQUM7Z0JBQ2hFLE1BQU0sZ0JBQWdCLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsNEJBQTRCO2dCQUN2RSxNQUFNLGFBQWEsR0FBRyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxJQUFJLFNBQVM7Z0JBQ2hFLE1BQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsT0FBTyxJQUFJLFNBQVM7Z0JBRXBELGlCQUFpQixDQUFDLE9BQU8sQ0FBQyxDQUFDLE9BQU8sRUFBRSxRQUFRLEVBQUUsRUFBRTtvQkFDOUMsTUFBTSxTQUFTLEdBQUcsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxLQUFLLEVBQUUsQ0FBQztvQkFDN0MsSUFBSSxDQUFDO3dCQUNILG1GQUFtRjt3QkFDbkYsdURBQXVEO3dCQUN2RCxDQUFDO3dCQUFBLENBQUMsR0FBUyxFQUFFOzRCQUNYLE1BQU0sdUJBQXVCLENBQUMsRUFBRSxFQUFFLFFBQVEsRUFBRSxTQUFTLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxnQkFBZ0IsRUFBRSxhQUFhLEVBQUUsT0FBTyxDQUFDO3dCQUNqSCxDQUFDLEVBQUMsRUFBRTt3QkFFSixXQUFXLENBQUMsR0FBRyxDQUFDLFNBQVMsRUFBRTs0QkFDekIsS0FBSyxFQUFFLGlDQUFpQzs0QkFDeEMsUUFBUSxFQUFFLEVBQUU7NEJBQ1osVUFBVSxFQUFFLFFBQVEsQ0FBQyxFQUFFOzRCQUN2QixXQUFXLEVBQUUsT0FBTyxDQUFDLE1BQU07NEJBQzNCLFlBQVksRUFBRSxLQUFLO3lCQUNwQixDQUFDO29CQUNKLENBQUM7b0JBQUMsT0FBTyxLQUFLLEVBQUUsQ0FBQzt3QkFDZixXQUFXLENBQUMsR0FBRyxDQUFDLFNBQVMsRUFBRTs0QkFDekIsS0FBSyxFQUFFLHVDQUF1Qzs0QkFDOUMsUUFBUSxFQUFFLEVBQUU7NEJBQ1osVUFBVSxFQUFFLFFBQVEsQ0FBQyxFQUFFOzRCQUN2QixLQUFLLEVBQUUsS0FBSyxZQUFZLEtBQUssQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQzs0QkFDN0QsVUFBVSxFQUFFLEtBQUssWUFBWSxLQUFLLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLFNBQVM7eUJBQzdELENBQUM7b0JBQ0osQ0FBQztnQkFDSCxDQUFDLENBQUM7Z0JBRUYsT0FBTTtZQUNSLENBQUM7WUFFRCxpRkFBaUY7WUFDakYsNERBQTREO1lBQzVELElBQUksa0JBQWtCLElBQUksa0JBQWtCLENBQUMsTUFBTSxHQUFHLENBQUMsSUFBSSxDQUFDLGtCQUFrQixFQUFFLENBQUM7Z0JBQy9FLFdBQVcsQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFO29CQUN6QixLQUFLLEVBQUUsdUVBQXVFO29CQUM5RSxRQUFRLEVBQUUsRUFBRTtvQkFDWixXQUFXO29CQUNYLGtCQUFrQjtvQkFDbEIsdUJBQXVCLEVBQUUsa0JBQWtCLENBQUMsTUFBTTtvQkFDbEQsWUFBWSxFQUFFLHlEQUF5RDtvQkFDdkUsMEJBQTBCLEVBQUUscUJBQXFCO2lCQUNsRCxDQUFDO1lBQ0osQ0FBQztZQUVELDZDQUE2QztZQUM3QyxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7Z0JBQ25CLFdBQVcsQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFO29CQUN6QixLQUFLLEVBQUUsNENBQTRDO29CQUNuRCxRQUFRLEVBQUUsRUFBRTtvQkFDWixXQUFXO29CQUNYLHFCQUFxQixFQUFFLENBQUMsQ0FBQyxDQUFDLGtCQUFrQixJQUFJLGtCQUFrQixDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7b0JBQzlFLHVCQUF1QixFQUFFLG1CQUFrQixhQUFsQixrQkFBa0IsdUJBQWxCLGtCQUFrQixDQUFFLE1BQU0sS0FBSSxDQUFDO29CQUN4RCxZQUFZLEVBQUUsZ0ZBQWdGO2lCQUMvRixDQUFDO2dCQUNGLE9BQU07WUFDUixDQUFDO1lBRUQsTUFBTSxTQUFTLEdBQUcsd0RBQWlCLENBQUMsV0FBVyxFQUFFO1lBQ2pELE1BQU0sUUFBUSxHQUFHLFNBQVMsQ0FBQyxhQUFhLENBQUMsYUFBYSxDQUFDLFVBQVUsQ0FBMkI7WUFFNUYsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDO2dCQUNkLFdBQVcsQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFO29CQUN6QixLQUFLLEVBQUUsa0NBQWtDO29CQUN6QyxRQUFRLEVBQUUsRUFBRTtvQkFDWixVQUFVLEVBQUUsYUFBYSxDQUFDLFVBQVU7aUJBQ3JDLENBQUM7Z0JBQ0YsT0FBTTtZQUNSLENBQUM7WUFFRCxrREFBa0Q7WUFDbEQsTUFBTSxVQUFVLEdBQUcsUUFBUSxDQUFDLG1CQUFtQixFQUFFLElBQUksRUFBRTtZQUN2RCxNQUFNLGVBQWUsR0FBRyxVQUFVLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQ2pELGFBQWEsQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUMxQjtZQUV4QixJQUFJLGVBQWUsQ0FBQyxNQUFNLEtBQUssQ0FBQyxFQUFFLENBQUM7Z0JBQ2pDLFdBQVcsQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFO29CQUN6QixLQUFLLEVBQUUsa0NBQWtDO29CQUN6QyxRQUFRLEVBQUUsRUFBRTtvQkFDWixjQUFjLEVBQUUsYUFBYSxDQUFDLFNBQVMsQ0FBQyxNQUFNO2lCQUMvQyxDQUFDO2dCQUNGLE9BQU07WUFDUixDQUFDO1lBRUQsdUZBQXVGO1lBQ3ZGLDhGQUE4RjtZQUM5RixJQUFJLENBQUM7Z0JBQ0gsTUFBTSxFQUFFLHVCQUF1QixFQUFFLEdBQUcsbUJBQU8sQ0FBQyxnR0FBbUIsQ0FBQztnQkFDaEUsTUFBTSxnQkFBZ0IsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyw0QkFBNEI7Z0JBQ3ZFLE1BQU0sYUFBYSxHQUFHLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLElBQUksU0FBUztnQkFDaEUsTUFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxPQUFPLElBQUksU0FBUyxDQUNuRDtnQkFBQSxDQUFDLEdBQVMsRUFBRTtvQkFDWCxNQUFNLHVCQUF1QixDQUFDLEVBQUUsRUFBRSxRQUFRLEVBQUUsYUFBYSxDQUFDLFNBQVMsRUFBRSxlQUFlLEVBQUUsSUFBSSxFQUFFLGdCQUFnQixFQUFFLGFBQWEsRUFBRSxPQUFPLENBQUM7Z0JBQ3ZJLENBQUMsRUFBQyxFQUFFO2dCQUVKLFdBQVcsQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFO29CQUN6QixLQUFLLEVBQUUscUNBQXFDO29CQUM1QyxRQUFRLEVBQUUsRUFBRTtvQkFDWixXQUFXLEVBQUUsZUFBZSxDQUFDLE1BQU07b0JBQ25DLFlBQVksRUFBRSxLQUFLO2lCQUNwQixDQUFDO1lBQ0osQ0FBQztZQUFDLE9BQU8sS0FBSyxFQUFFLENBQUM7Z0JBQ2YsV0FBVyxDQUFDLEdBQUcsQ0FBQyxTQUFTLEVBQUU7b0JBQ3pCLEtBQUssRUFBRSxnQ0FBZ0M7b0JBQ3ZDLFFBQVEsRUFBRSxFQUFFO29CQUNaLEtBQUssRUFBRSxLQUFLLFlBQVksS0FBSyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDO2lCQUM5RCxDQUFDO1lBQ0osQ0FBQztRQUNILENBQUM7UUFFRDs7O1dBR0c7UUFDSyw0QkFBdUIsR0FBRyxDQUFDLElBQW1CLEVBQUUsRUFBRTs7WUFDeEQsV0FBVyxDQUFDLEdBQUcsQ0FBQyxjQUFjLEVBQUU7Z0JBQzlCLEtBQUssRUFBRSxtQ0FBbUM7Z0JBQzFDLFFBQVEsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUU7Z0JBQ3ZCLFlBQVksRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLFdBQVc7Z0JBQ3BDLE9BQU8sRUFBRSxJQUFJO2dCQUNiLHVCQUF1QixFQUFFLFdBQUksQ0FBQyxLQUFLLENBQUMsa0JBQWtCLDBDQUFFLE1BQU0sS0FBSSxDQUFDO2dCQUNuRSxTQUFTLEVBQUUsSUFBSSxDQUFDLEdBQUcsRUFBRTthQUN0QixDQUFDO1lBRUYseURBQXlEO1lBQ3pELElBQUksSUFBSSxLQUFLLGtEQUFhLENBQUMsY0FBYyxJQUFJLElBQUksS0FBSyxrREFBYSxDQUFDLG1CQUFtQixFQUFFLENBQUM7Z0JBQ3hGLElBQUksVUFBSSxDQUFDLEtBQUssQ0FBQyxpQkFBaUIsMENBQUUsT0FBTyxFQUFFLENBQUM7b0JBQzFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFO3dCQUN0QixLQUFLLEVBQUUsK0JBQStCO3dCQUN0QyxRQUFRLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFO3dCQUN2QixJQUFJO3dCQUNKLE9BQU8sRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLGlCQUFpQixDQUFDLE9BQU87cUJBQzlDLENBQUM7b0JBQ0YsSUFBSSxDQUFDLG1CQUFtQixDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsaUJBQWlCLENBQUMsT0FBTyxDQUFDO2dCQUNoRSxDQUFDO1lBQ0gsQ0FBQztZQUVELHdEQUF3RDtZQUN4RCxJQUFJLElBQUksS0FBSyxrREFBYSxDQUFDLFlBQVksRUFBRSxDQUFDO2dCQUN4QyxXQUFXLENBQUMsR0FBRyxDQUFDLGNBQWMsRUFBRTtvQkFDOUIsS0FBSyxFQUFFLDZDQUE2QztvQkFDcEQsUUFBUSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRTtvQkFDdkIsWUFBWSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsV0FBVztpQkFDckMsQ0FBQztnQkFDRixJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUUsV0FBVyxFQUFFLElBQUksRUFBRSxrQkFBa0IsRUFBRSxFQUFFLEVBQUUsQ0FBQztZQUM5RCxDQUFDO2lCQUFNLENBQUM7Z0JBQ04sSUFBSSxDQUFDLFFBQVEsQ0FBQyxFQUFFLFdBQVcsRUFBRSxJQUFJLEVBQUUsQ0FBQztZQUN0QyxDQUFDO1FBQ0gsQ0FBQztRQUVPLHdCQUFtQixHQUFHLENBQUMsT0FBZSxFQUFFLEVBQUU7O1lBQ2hELElBQUksQ0FBQyxPQUFPO2dCQUFFLE9BQU07WUFFcEIsTUFBTSxJQUFJLEdBQUcsTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQztZQUM5QyxNQUFNLFNBQVMsR0FBRyxJQUFJLGVBQWUsQ0FBQyxJQUFJLENBQUM7WUFFM0MsSUFBSSxTQUFTLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUM7Z0JBQzNCLFNBQVMsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDO2dCQUN6QixNQUFNLE9BQU8sR0FBRyxTQUFTLENBQUMsUUFBUSxFQUFFO2dCQUVwQyxXQUFXLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBRTtvQkFDdEIsS0FBSyxFQUFFLHFCQUFxQjtvQkFDNUIsT0FBTztvQkFDUCxPQUFPLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQyxJQUFJLE9BQU8sRUFBRSxDQUFDLENBQUMsQ0FBQyxTQUFTO29CQUM1QyxTQUFTLEVBQUUsSUFBSSxDQUFDLEdBQUcsRUFBRTtpQkFDdEIsQ0FBQztnQkFFRiw2Q0FBNkM7Z0JBQzdDLE1BQU0sQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDLElBQUksRUFBRSxFQUFFLEVBQ2xDLE9BQU8sQ0FBQyxDQUFDLENBQUMsSUFBSSxPQUFPLEVBQUUsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxRQUFRLEdBQUcsTUFBTSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQzVFO2dCQUVELGlEQUFpRDtnQkFDakQsSUFBSSxXQUFJLENBQUMsS0FBSyxDQUFDLGlCQUFpQiwwQ0FBRSxPQUFPLE1BQUssT0FBTyxFQUFFLENBQUM7b0JBQ3RELElBQUksQ0FBQyxRQUFRLENBQUMsRUFBRSxpQkFBaUIsRUFBRSxTQUFTLEVBQUUsQ0FBQztnQkFDakQsQ0FBQztZQUNILENBQUM7UUFDSCxDQUFDO1FBRU8sbUNBQThCLEdBQUcsQ0FBQyxPQUE0QixFQUFFLEVBQUU7O1lBQ3hFLFdBQVcsQ0FBQyxHQUFHLENBQUMsY0FBYyxFQUFFO2dCQUM5QixLQUFLLEVBQUUsMENBQTBDO2dCQUNqRCxRQUFRLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFO2dCQUN2QixhQUFhLEVBQUUsV0FBSSxDQUFDLEtBQUssQ0FBQyxrQkFBa0IsMENBQUUsTUFBTSxLQUFJLENBQUM7Z0JBQ3pELFFBQVEsRUFBRSxPQUFPLENBQUMsTUFBTTtnQkFDeEIsU0FBUyxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUU7YUFDdEIsQ0FBQztZQUNGLElBQUksQ0FBQyxRQUFRLENBQUMsRUFBRSxrQkFBa0IsRUFBRSxPQUFPLEVBQUUsQ0FBQztRQUNoRCxDQUFDO1FBRUQ7OztXQUdHO1FBQ0ssb0NBQStCLEdBQUcsQ0FBTyxRQUFnQyxFQUFtQyxFQUFFO1lBQ3BILG9FQUFvRTtZQUNwRSxNQUFNLElBQUksS0FBSyxDQUFDLDREQUE0RCxDQUFDO1FBQy9FLENBQUM7UUFFRDs7OztXQUlHO1FBQ0ssMEJBQXFCLEdBQUcsR0FBRyxFQUFFOztZQUNuQyxNQUFNLEVBQUUsYUFBYSxFQUFFLGtCQUFrQixFQUFFLFdBQVcsRUFBRSxHQUFHLElBQUksQ0FBQyxLQUFLO1lBQ3JFLE1BQU0sRUFBRSxFQUFFLEVBQUUsR0FBRyxJQUFJLENBQUMsS0FBSztZQUV6QixNQUFNLGtCQUFrQixHQUFHLFdBQVcsS0FBSyxrREFBYSxDQUFDLGNBQWM7Z0JBQzVDLFdBQVcsS0FBSyxrREFBYSxDQUFDLG1CQUFtQjtZQUU1RSxXQUFXLENBQUMsR0FBRyxDQUFDLFNBQVMsRUFBRTtnQkFDekIsS0FBSyxFQUFFLDhCQUE4QjtnQkFDckMsUUFBUSxFQUFFLEVBQUU7Z0JBQ1osV0FBVztnQkFDWCxrQkFBa0I7Z0JBQ2xCLGdCQUFnQixFQUFFLENBQUMsQ0FBQyxhQUFhO2dCQUNqQyx3QkFBd0IsRUFBRSxjQUFhLGFBQWIsYUFBYSx1QkFBYixhQUFhLENBQUUsU0FBUyxDQUFDLE1BQU0sS0FBSSxDQUFDO2dCQUM5RCxxQkFBcUIsRUFBRSxDQUFDLENBQUMsQ0FBQyxrQkFBa0IsSUFBSSxrQkFBa0IsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO2dCQUM5RSx1QkFBdUIsRUFBRSxtQkFBa0IsYUFBbEIsa0JBQWtCLHVCQUFsQixrQkFBa0IsQ0FBRSxNQUFNLEtBQUksQ0FBQztnQkFDeEQsb0JBQW9CLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxvQkFBb0IsSUFBSSxDQUFDO2FBQzNELENBQUM7WUFFRixzRUFBc0U7WUFDdEUsOEVBQThFO1lBQzlFLFdBQVcsQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFO2dCQUN6QixLQUFLLEVBQUUsb0RBQW9EO2dCQUMzRCxRQUFRLEVBQUUsRUFBRTtnQkFDWixXQUFXLEVBQUUscURBQXFEO2dCQUNsRSxrQkFBa0IsRUFBRSxDQUFDLENBQUMsQ0FBQyxrQkFBa0IsSUFBSSxrQkFBa0IsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO2dCQUMzRSx1QkFBdUIsRUFBRSxtQkFBa0IsYUFBbEIsa0JBQWtCLHVCQUFsQixrQkFBa0IsQ0FBRSxNQUFNLEtBQUksQ0FBQzthQUN6RCxDQUFDO1lBRUYsSUFBSSxrQkFBa0IsSUFBSSxrQkFBa0IsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUM7Z0JBQ3hELGtEQUFrRDtnQkFDbEQsTUFBTSxpQkFBaUIsR0FBRyxJQUFJLEdBQUcsRUFBK0M7Z0JBQ2hGLE1BQU0sU0FBUyxHQUFHLHdEQUFpQixDQUFDLFdBQVcsRUFBRTtnQkFFakQsa0JBQWtCLENBQUMsT0FBTyxDQUFDLENBQUMsTUFBTSxFQUFFLEtBQUssRUFBRSxFQUFFOztvQkFDM0MsTUFBTSxRQUFRLEdBQUcsTUFBTSxDQUFDLEtBQUssRUFBRTtvQkFDL0IsSUFBSSxRQUFRLEdBQWtDLElBQUk7b0JBRWxELG1EQUFtRDtvQkFDbkQsTUFBTSxRQUFRLEdBQUcsWUFBTSxDQUFDLGFBQWEsc0RBQThCO29CQUNuRSxJQUFJLFFBQVEsRUFBRSxDQUFDO3dCQUNiLFFBQVEsR0FBRyxlQUFRLENBQUMsb0JBQW9CLEVBQUUsMENBQUcsQ0FBQyxDQUEyQixLQUFJLFFBQVE7d0JBRXJGLFdBQVcsQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFOzRCQUN6QixLQUFLLEVBQUUsc0NBQXNDOzRCQUM3QyxRQUFRLEVBQUUsRUFBRTs0QkFDWixXQUFXLEVBQUUsS0FBSzs0QkFDbEIsUUFBUTs0QkFDUixVQUFVLEVBQUUsU0FBUSxhQUFSLFFBQVEsdUJBQVIsUUFBUSxDQUFFLEVBQUUsS0FBSSxNQUFNOzRCQUNsQyxNQUFNLEVBQUUsd0JBQXdCO3lCQUNqQyxDQUFDO29CQUNKLENBQUM7b0JBRUQsa0ZBQWtGO29CQUNsRixJQUFJLENBQUMsUUFBUSxFQUFFLENBQUM7d0JBQ2QsTUFBTSxLQUFLLEdBQUcsU0FBUyxDQUFDLGNBQWMsRUFBRTt3QkFDeEMsTUFBTSxjQUFjLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUM7d0JBRTNDLEtBQUssTUFBTSxFQUFFLElBQUksY0FBYyxFQUFFLENBQUM7NEJBQ2hDLHVGQUF1Rjs0QkFDdkYsSUFBSSxFQUFFLElBQUksT0FBUSxFQUFVLENBQUMsbUJBQW1CLEtBQUssVUFBVSxFQUFFLENBQUM7Z0NBQ2hFLElBQUksQ0FBQztvQ0FDSCxrQ0FBa0M7b0NBQ2xDLE1BQU0sVUFBVSxHQUFJLEVBQVUsQ0FBQyxtQkFBbUIsRUFBRSxJQUFJLEVBQUU7b0NBQzFELE1BQU0sY0FBYyxHQUFHLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFvQixFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxFQUFFLEtBQUssUUFBUSxDQUFDO29DQUV4RixJQUFJLGNBQWMsRUFBRSxDQUFDO3dDQUNuQixnREFBZ0Q7d0NBQ2hELFFBQVEsR0FBRyxPQUFDLEVBQVUsQ0FBQyxvQkFBb0IsRUFBRSwwQ0FBRyxDQUFDLENBQTJCLEtBQUksRUFBNEI7d0NBRTVHLFdBQVcsQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFOzRDQUN6QixLQUFLLEVBQUUsa0NBQWtDOzRDQUN6QyxRQUFRLEVBQUUsRUFBRTs0Q0FDWixXQUFXLEVBQUUsS0FBSzs0Q0FDbEIsUUFBUTs0Q0FDUixVQUFVLEVBQUUsUUFBUSxDQUFDLEVBQUU7NENBQ3ZCLE1BQU0sRUFBRSwyQkFBMkI7NENBQ25DLFlBQVksRUFBRSxFQUFFLENBQUMsRUFBRTt5Q0FDcEIsQ0FBQzt3Q0FDRixNQUFLO29DQUNQLENBQUM7Z0NBQ0gsQ0FBQztnQ0FBQyxPQUFPLEtBQUssRUFBRSxDQUFDO29DQUNmLHFCQUFxQjtnQ0FDdkIsQ0FBQzs0QkFDSCxDQUFDO3dCQUNILENBQUM7b0JBQ0gsQ0FBQztvQkFFRCxJQUFJLFFBQVEsRUFBRSxDQUFDO3dCQUNiLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQzs0QkFDckMsaUJBQWlCLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBRSxFQUFFLENBQUM7d0JBQ3JDLENBQUM7d0JBQ0QsaUJBQWlCLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBRSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUM7b0JBQy9DLENBQUM7eUJBQU0sQ0FBQzt3QkFDTixXQUFXLENBQUMsR0FBRyxDQUFDLFNBQVMsRUFBRTs0QkFDekIsS0FBSyxFQUFFLDJDQUEyQzs0QkFDbEQsUUFBUSxFQUFFLEVBQUU7NEJBQ1osV0FBVyxFQUFFLEtBQUs7NEJBQ2xCLFFBQVE7NEJBQ1IsT0FBTyxFQUFFLHdCQUF3Qjt5QkFDbEMsQ0FBQztvQkFDSixDQUFDO2dCQUNILENBQUMsQ0FBQztnQkFFRixXQUFXLENBQUMsR0FBRyxDQUFDLFNBQVMsRUFBRTtvQkFDekIsS0FBSyxFQUFFLG9EQUFvRDtvQkFDM0QsUUFBUSxFQUFFLEVBQUU7b0JBQ1osdUJBQXVCLEVBQUUsa0JBQWtCLENBQUMsTUFBTTtvQkFDbEQsYUFBYSxFQUFFLGlCQUFpQixDQUFDLElBQUk7aUJBQ3RDLENBQUM7Z0JBRUYsK0NBQStDO2dCQUMvQyxNQUFNLEVBQUUsMkJBQTJCLEVBQUUsR0FBRyxtQkFBTyxDQUFDLGdHQUFtQixDQUFDO2dCQUNwRSxNQUFNLGdCQUFnQixHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLDRCQUE0QjtnQkFDdkUsTUFBTSxhQUFhLEdBQUcsSUFBSSxDQUFDLGdCQUFnQixDQUFDLE9BQU8sSUFBSSxTQUFTO2dCQUVoRSxpQkFBaUIsQ0FBQyxPQUFPLENBQUMsQ0FBQyxPQUFPLEVBQUUsUUFBUSxFQUFFLEVBQUU7b0JBQzlDLElBQUksQ0FBQzt3QkFDSCx1REFBdUQ7d0JBQ3ZELENBQUM7d0JBQUEsQ0FBQyxHQUFTLEVBQUU7NEJBQ1gsTUFBTSwyQkFBMkIsQ0FBQyxFQUFFLEVBQUUsUUFBUSxFQUFFLGdCQUFnQixFQUFFLGFBQWEsQ0FBQzs0QkFFaEYsV0FBVyxDQUFDLEdBQUcsQ0FBQyxTQUFTLEVBQUU7Z0NBQ3pCLEtBQUssRUFBRSwwQ0FBMEM7Z0NBQ2pELFFBQVEsRUFBRSxFQUFFO2dDQUNaLFVBQVUsRUFBRSxRQUFRLENBQUMsRUFBRTtnQ0FDdkIsV0FBVyxFQUFFLE9BQU8sQ0FBQyxNQUFNO2dDQUMzQixpQkFBaUIsRUFBRSxnQkFBZ0I7NkJBQ3BDLENBQUM7d0JBQ0osQ0FBQyxFQUFDLEVBQUU7b0JBQ04sQ0FBQztvQkFBQyxPQUFPLEtBQUssRUFBRSxDQUFDO3dCQUNmLFdBQVcsQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFOzRCQUN6QixLQUFLLEVBQUUscUNBQXFDOzRCQUM1QyxRQUFRLEVBQUUsRUFBRTs0QkFDWixVQUFVLEVBQUUsUUFBUSxDQUFDLEVBQUU7NEJBQ3ZCLEtBQUssRUFBRSxLQUFLLFlBQVksS0FBSyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDO3lCQUM5RCxDQUFDO29CQUNKLENBQUM7Z0JBQ0gsQ0FBQyxDQUFDO2dCQUVGLFdBQVcsQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFO29CQUN6QixLQUFLLEVBQUUsNkRBQTZEO29CQUNwRSxRQUFRLEVBQUUsRUFBRTtvQkFDWixvQ0FBb0MsRUFBRSxJQUFJO2lCQUMzQyxDQUFDO2dCQUNGLE9BQU07WUFDUixDQUFDO1lBRUQsK0VBQStFO1lBQy9FLHFFQUFxRTtZQUNyRSxJQUFJLGtCQUFrQixJQUFJLGtCQUFrQixDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUUsQ0FBQztnQkFDeEQsV0FBVyxDQUFDLEdBQUcsQ0FBQyxTQUFTLEVBQUU7b0JBQ3pCLEtBQUssRUFBRSxrRUFBa0U7b0JBQ3pFLFFBQVEsRUFBRSxFQUFFO29CQUNaLFdBQVc7b0JBQ1gsa0JBQWtCO29CQUNsQix1QkFBdUIsRUFBRSxrQkFBa0IsQ0FBQyxNQUFNO29CQUNsRCxZQUFZLEVBQUUsb0RBQW9EO29CQUNsRSxlQUFlLEVBQUUscURBQXFEO29CQUN0RSxrQkFBa0IsRUFBRSxDQUFDLENBQUMsQ0FBQyxrQkFBa0IsSUFBSSxrQkFBa0IsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO2lCQUM1RSxDQUFDO1lBQ0osQ0FBQztZQUVELDZDQUE2QztZQUM3QyxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7Z0JBQ25CLFdBQVcsQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFO29CQUN6QixLQUFLLEVBQUUsZ0RBQWdEO29CQUN2RCxRQUFRLEVBQUUsRUFBRTtvQkFDWixxQkFBcUIsRUFBRSxDQUFDLENBQUMsQ0FBQyxrQkFBa0IsSUFBSSxrQkFBa0IsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO29CQUM5RSx1QkFBdUIsRUFBRSxtQkFBa0IsYUFBbEIsa0JBQWtCLHVCQUFsQixrQkFBa0IsQ0FBRSxNQUFNLEtBQUksQ0FBQztvQkFDeEQsWUFBWSxFQUFFLGlGQUFpRjtpQkFDaEcsQ0FBQztnQkFDRixPQUFNO1lBQ1IsQ0FBQztZQUVELE1BQU0sU0FBUyxHQUFHLHdEQUFpQixDQUFDLFdBQVcsRUFBRTtZQUNqRCxNQUFNLFFBQVEsR0FBRyxTQUFTLENBQUMsYUFBYSxDQUFDLGFBQWEsQ0FBQyxVQUFVLENBQTJCO1lBRTVGLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQztnQkFDZCxXQUFXLENBQUMsR0FBRyxDQUFDLFNBQVMsRUFBRTtvQkFDekIsS0FBSyxFQUFFLGtDQUFrQztvQkFDekMsUUFBUSxFQUFFLEVBQUU7b0JBQ1osVUFBVSxFQUFFLGFBQWEsQ0FBQyxVQUFVO2lCQUNyQyxDQUFDO2dCQUNGLE9BQU07WUFDUixDQUFDO1lBRUQsSUFBSSxDQUFDO2dCQUNILGdDQUFnQztnQkFDaEMsTUFBTSxRQUFRLEdBQUcsY0FBUSxDQUFDLG9CQUFvQixFQUFFLDBDQUFHLENBQUMsQ0FBMkI7Z0JBRS9FLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQztvQkFDZCxXQUFXLENBQUMsR0FBRyxDQUFDLFNBQVMsRUFBRTt3QkFDekIsS0FBSyxFQUFFLGtDQUFrQzt3QkFDekMsUUFBUSxFQUFFLEVBQUU7d0JBQ1osVUFBVSxFQUFFLGFBQWEsQ0FBQyxVQUFVO3FCQUNyQyxDQUFDO29CQUNGLE9BQU07Z0JBQ1IsQ0FBQztnQkFFRCxnREFBZ0Q7Z0JBQ2hELE1BQU0sa0JBQWtCLEdBQUcsUUFBUSxDQUFDLG9CQUFvQixFQUFFLElBQUksRUFBRTtnQkFDaEUsTUFBTSxZQUFZLEdBQUcsYUFBYSxDQUFDLFNBQVM7Z0JBQzVDLE1BQU0sbUJBQW1CLEdBQUcsWUFBWSxDQUFDLE1BQU0sS0FBSyxrQkFBa0IsQ0FBQyxNQUFNO29CQUMzRSxZQUFZLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsa0JBQWtCLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxDQUFDO2dCQUV2RSxXQUFXLENBQUMsR0FBRyxDQUFDLFNBQVMsRUFBRTtvQkFDekIsS0FBSyxFQUFFLHFDQUFxQztvQkFDNUMsUUFBUSxFQUFFLEVBQUU7b0JBQ1osY0FBYyxFQUFFLFlBQVksQ0FBQyxNQUFNO29CQUNuQyxnQkFBZ0IsRUFBRSxrQkFBa0IsQ0FBQyxNQUFNO29CQUMzQyxtQkFBbUI7b0JBQ25CLFlBQVksRUFBRSxZQUFZLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7b0JBQ3RDLGNBQWMsRUFBRSxrQkFBa0IsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztpQkFDL0MsQ0FBQztnQkFFRix3RUFBd0U7Z0JBQ3hFLE1BQU0sRUFBRSwyQkFBMkIsRUFBRSxHQUFHLG1CQUFPLENBQUMsZ0dBQW1CLENBQUM7Z0JBQ3BFLE1BQU0sZ0JBQWdCLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsNEJBQTRCO2dCQUN2RSxNQUFNLGFBQWEsR0FBRyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxJQUFJLFNBQVMsQ0FFL0Q7Z0JBQUEsQ0FBQyxHQUFTLEVBQUU7b0JBQ1gsTUFBTSwyQkFBMkIsQ0FBQyxFQUFFLEVBQUUsUUFBUSxFQUFFLGdCQUFnQixFQUFFLGFBQWEsQ0FBQztvQkFFaEYsV0FBVyxDQUFDLEdBQUcsQ0FBQyxTQUFTLEVBQUU7d0JBQ3pCLEtBQUssRUFBRSwwQ0FBMEM7d0JBQ2pELFFBQVEsRUFBRSxFQUFFO3dCQUNaLFVBQVUsRUFBRSxRQUFRLENBQUMsRUFBRTt3QkFDdkIsaUJBQWlCLEVBQUUsZ0JBQWdCO3FCQUNwQyxDQUFDO29CQUVGLCtCQUErQjtvQkFDL0IsTUFBTSxhQUFhLEdBQUcsUUFBUSxDQUFDLG9CQUFvQixFQUFFLElBQUksRUFBRTtvQkFDM0QsV0FBVyxDQUFDLEdBQUcsQ0FBQyxTQUFTLEVBQUU7d0JBQ3pCLEtBQUssRUFBRSx5Q0FBeUM7d0JBQ2hELFFBQVEsRUFBRSxFQUFFO3dCQUNaLFdBQVcsRUFBRSxhQUFhLENBQUMsU0FBUyxDQUFDLE1BQU07d0JBQzNDLFVBQVUsRUFBRSxRQUFRLENBQUMsRUFBRTt3QkFDdkIsbUJBQW1CLEVBQUUsYUFBYSxDQUFDLE1BQU07d0JBQ3pDLGVBQWUsRUFBRSxhQUFhLENBQUMsTUFBTSxLQUFLLENBQUM7cUJBQzVDLENBQUM7Z0JBQ0osQ0FBQyxFQUFDLEVBQUU7WUFDTixDQUFDO1lBQUMsT0FBTyxLQUFLLEVBQUUsQ0FBQztnQkFDZixXQUFXLENBQUMsR0FBRyxDQUFDLFNBQVMsRUFBRTtvQkFDekIsS0FBSyxFQUFFLG9DQUFvQztvQkFDM0MsUUFBUSxFQUFFLEVBQUU7b0JBQ1osS0FBSyxFQUFFLEtBQUssWUFBWSxLQUFLLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUM7b0JBQzdELFVBQVUsRUFBRSxLQUFLLFlBQVksS0FBSyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxTQUFTO2lCQUM3RCxDQUFDO1lBQ0osQ0FBQztRQUNILENBQUM7UUFFRDs7V0FFRztRQUNILHdCQUFtQixHQUFHLENBQUMsU0FBa0IsRUFBRSxNQUFjLEVBQUUsRUFBRTs7WUFDM0QsV0FBVyxDQUFDLEdBQUcsQ0FBQyxjQUFjLEVBQUU7Z0JBQzlCLEtBQUssRUFBRSxTQUFTLENBQUMsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsY0FBYztnQkFDbEQsUUFBUSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRTtnQkFDdkIsU0FBUztnQkFDVCxNQUFNO2dCQUNOLFNBQVMsRUFBRSxJQUFJLElBQUksRUFBRSxDQUFDLFdBQVcsRUFBRTthQUNwQyxDQUFDO1lBRUYsSUFBSSxTQUFTLEVBQUUsQ0FBQztnQkFDZCwwREFBMEQ7Z0JBQzFELE1BQU0sa0JBQWtCLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxXQUFXLEtBQUssa0RBQWEsQ0FBQyxjQUFjO29CQUN2RCxJQUFJLENBQUMsS0FBSyxDQUFDLFdBQVcsS0FBSyxrREFBYSxDQUFDLG1CQUFtQjtnQkFDdkYsTUFBTSxxQkFBcUIsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLGtCQUFrQixJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsa0JBQWtCLENBQUMsTUFBTSxHQUFHLENBQUM7Z0JBQ3ZHLE1BQU0saUJBQWlCLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxZQUFZLElBQUksS0FBSztnQkFDMUQsTUFBTSxxQkFBcUIsR0FBRyxrQkFBa0I7b0JBQzlDLENBQUMsQ0FBQyxxQkFBcUI7b0JBQ3ZCLENBQUMsQ0FBQyxpQkFBaUI7Z0JBRXJCLFdBQVcsQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFO29CQUN6QixLQUFLLEVBQUUsaUNBQWlDO29CQUN4QyxRQUFRLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFO29CQUN2QixXQUFXLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxXQUFXO29CQUNuQyxrQkFBa0I7b0JBQ2xCLFlBQVksRUFBRSxpQkFBaUI7b0JBQy9CLHFCQUFxQjtvQkFDckIsdUJBQXVCLEVBQUUsV0FBSSxDQUFDLEtBQUssQ0FBQyxrQkFBa0IsMENBQUUsTUFBTSxLQUFJLENBQUM7b0JBQ25FLG9CQUFvQixFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsb0JBQW9CLElBQUksQ0FBQztvQkFDMUQsZ0JBQWdCLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsYUFBYTtvQkFDNUMsd0JBQXdCLEVBQUUsV0FBSSxDQUFDLEtBQUssQ0FBQyxhQUFhLDBDQUFFLFNBQVMsQ0FBQyxNQUFNLEtBQUksQ0FBQztvQkFDekUscUJBQXFCO29CQUNyQixhQUFhLEVBQUU7d0JBQ2Isb0JBQW9CLEVBQUUsa0JBQWtCO3dCQUN4Qyx1QkFBdUIsRUFBRSxxQkFBcUI7d0JBQzlDLG1CQUFtQixFQUFFLGlCQUFpQjt3QkFDdEMsa0NBQWtDLEVBQUUscUJBQXFCO3dCQUN6RCw2QkFBNkIsRUFBRSxxQkFBcUI7cUJBQ3JEO2lCQUNGLENBQUM7Z0JBRUYsc0NBQXNDO2dCQUN0QyxJQUFJLHFCQUFxQixFQUFFLENBQUM7b0JBQzFCLFdBQVcsQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFO3dCQUN6QixLQUFLLEVBQUUsd0NBQXdDO3dCQUMvQyxRQUFRLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFO3dCQUN2QixNQUFNLEVBQUUsK0JBQStCO3FCQUN4QyxDQUFDO29CQUNGLElBQUksQ0FBQyxpQkFBaUIsRUFBRTtnQkFDMUIsQ0FBQztxQkFBTSxDQUFDO29CQUNOLFdBQVcsQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFO3dCQUN6QixLQUFLLEVBQUUseUNBQXlDO3dCQUNoRCxRQUFRLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFO3dCQUN2QixNQUFNLEVBQUUsZ0NBQWdDO3dCQUN4QyxHQUFHLEVBQUUsa0JBQWtCOzRCQUNyQixDQUFDLENBQUMsd0JBQXdCOzRCQUMxQixDQUFDLENBQUMsdUJBQXVCO3FCQUM1QixDQUFDO2dCQUNKLENBQUM7WUFDSCxDQUFDO2lCQUFNLENBQUM7Z0JBQ04sdUVBQXVFO2dCQUN2RSxNQUFNLGtCQUFrQixHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsV0FBVyxLQUFLLGtEQUFhLENBQUMsY0FBYztvQkFDdkQsSUFBSSxDQUFDLEtBQUssQ0FBQyxXQUFXLEtBQUssa0RBQWEsQ0FBQyxtQkFBbUI7Z0JBQ3ZGLE1BQU0scUJBQXFCLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxrQkFBa0IsSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLGtCQUFrQixDQUFDLE1BQU0sR0FBRyxDQUFDO2dCQUN2RyxNQUFNLGlCQUFpQixHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsWUFBWSxJQUFJLEtBQUs7Z0JBQzFELE1BQU0sbUJBQW1CLEdBQUcsa0JBQWtCO29CQUM1QyxDQUFDLENBQUMscUJBQXFCO29CQUN2QixDQUFDLENBQUMsaUJBQWlCO2dCQUVyQixXQUFXLENBQUMsR0FBRyxDQUFDLFNBQVMsRUFBRTtvQkFDekIsS0FBSyxFQUFFLGlDQUFpQztvQkFDeEMsUUFBUSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRTtvQkFDdkIsV0FBVyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsV0FBVztvQkFDbkMsa0JBQWtCO29CQUNsQixZQUFZLEVBQUUsaUJBQWlCO29CQUMvQixxQkFBcUI7b0JBQ3JCLHVCQUF1QixFQUFFLFdBQUksQ0FBQyxLQUFLLENBQUMsa0JBQWtCLDBDQUFFLE1BQU0sS0FBSSxDQUFDO29CQUNuRSxvQkFBb0IsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLG9CQUFvQixJQUFJLENBQUM7b0JBQzFELGdCQUFnQixFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLGFBQWE7b0JBQzVDLHdCQUF3QixFQUFFLFdBQUksQ0FBQyxLQUFLLENBQUMsYUFBYSwwQ0FBRSxTQUFTLENBQUMsTUFBTSxLQUFJLENBQUM7b0JBQ3pFLG1CQUFtQjtvQkFDbkIsYUFBYSxFQUFFO3dCQUNiLG9CQUFvQixFQUFFLGtCQUFrQjt3QkFDeEMsdUJBQXVCLEVBQUUscUJBQXFCO3dCQUM5QyxtQkFBbUIsRUFBRSxpQkFBaUI7d0JBQ3RDLGdDQUFnQyxFQUFFLG1CQUFtQjt3QkFDckQsaUNBQWlDLEVBQUUsbUJBQW1CO3FCQUN2RDtpQkFDRixDQUFDO2dCQUVGLElBQUksbUJBQW1CLEVBQUUsQ0FBQztvQkFDeEIsV0FBVyxDQUFDLEdBQUcsQ0FBQyxTQUFTLEVBQUU7d0JBQ3pCLEtBQUssRUFBRSw0Q0FBNEM7d0JBQ25ELFFBQVEsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUU7d0JBQ3ZCLE1BQU0sRUFBRSw2QkFBNkI7cUJBQ3RDLENBQUM7b0JBQ0YsSUFBSSxDQUFDLHFCQUFxQixFQUFFO2dCQUM5QixDQUFDO3FCQUFNLENBQUM7b0JBQ04sV0FBVyxDQUFDLEdBQUcsQ0FBQyxTQUFTLEVBQUU7d0JBQ3pCLEtBQUssRUFBRSxvQ0FBb0M7d0JBQzNDLFFBQVEsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUU7d0JBQ3ZCLE1BQU0sRUFBRSw4QkFBOEI7d0JBQ3RDLEdBQUcsRUFBRSxrQkFBa0I7NEJBQ3JCLENBQUMsQ0FBQyx3QkFBd0I7NEJBQzFCLENBQUMsQ0FBQyx1QkFBdUI7cUJBQzVCLENBQUM7Z0JBQ0osQ0FBQztZQUNILENBQUM7UUFDSCxDQUFDO1FBRUQ7O1dBRUc7UUFDSCxtQ0FBOEIsR0FBRyxDQUFDLFNBQWtCLEVBQUUsRUFBRTtZQUN0RCxNQUFNLEtBQUssR0FBRyxJQUFJLFdBQVcsQ0FBQyw4QkFBOEIsRUFBRTtnQkFDNUQsTUFBTSxFQUFFO29CQUNOLFFBQVEsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUU7b0JBQ3ZCLE1BQU0sRUFBRSxTQUFTO2lCQUNsQjtnQkFDRCxPQUFPLEVBQUUsSUFBSTtnQkFDYixVQUFVLEVBQUUsSUFBSTthQUNqQixDQUFDO1lBQ0YsTUFBTSxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUM7UUFDN0IsQ0FBQztRQUVEOzs7Ozs7V0FNRztRQUNILDRCQUF1QixHQUFHLENBQUMsT0FBZSxFQUFFLEVBQUU7O1lBQzVDLE1BQU0sRUFBRSxFQUFFLEVBQUUsR0FBRyxJQUFJLENBQUMsS0FBSztZQUN6QixNQUFNLEVBQUUsaUJBQWlCLEVBQUUsR0FBRyxJQUFJLENBQUMsS0FBSztZQUV4QyxXQUFXLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBRTtnQkFDdEIsS0FBSyxFQUFFLGtDQUFrQztnQkFDekMsUUFBUSxFQUFFLEVBQUU7Z0JBQ1osT0FBTyxFQUFFLE9BQU87Z0JBQ2hCLHdCQUF3QixFQUFFLGlCQUFpQjtnQkFDM0MsSUFBSSxFQUFFLDBDQUEwQztnQkFDaEQsU0FBUyxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUU7YUFDdEIsQ0FBQztZQUVGLHNFQUFzRTtZQUN0RSxJQUFJLFdBQUksQ0FBQyxLQUFLLENBQUMsaUJBQWlCLDBDQUFFLE9BQU8sTUFBSyxPQUFPLEVBQUUsQ0FBQztnQkFDdEQsSUFBSSxDQUFDLFFBQVEsQ0FBQyxFQUFFLGlCQUFpQixFQUFFLFNBQVMsRUFBRSxDQUFDO1lBQ2pELENBQUM7UUFDSCxDQUFDO1FBRUQ7Ozs7Ozs7V0FPRztRQUNILGdDQUEyQixHQUFHLEdBQUcsRUFBRTs7WUFDakMsTUFBTSxFQUFFLE1BQU0sRUFBRSxHQUFHLElBQUksQ0FBQyxLQUFLO1lBQzdCLElBQUksQ0FBQyxhQUFNLENBQUMsVUFBVSwwQ0FBRSxNQUFNLEdBQUUsQ0FBQztnQkFDL0IsT0FBTTtZQUNSLENBQUM7WUFFRCx3Q0FBd0M7WUFDeEMsTUFBTSxRQUFRLEdBQUcsTUFBTSxDQUFDLFVBQVU7aUJBQy9CLEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUM7aUJBQ3pCLE1BQU0sQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLE9BQU8sSUFBSSxJQUFJLElBQUksT0FBTyxDQUFDLElBQUksRUFBRSxLQUFLLEVBQUUsQ0FBQztZQUU5RCxJQUFJLFFBQVEsQ0FBQyxNQUFNLEtBQUssQ0FBQyxFQUFFLENBQUM7Z0JBQzFCLE9BQU07WUFDUixDQUFDO1lBRUQsMkRBQTJEO1lBQzNELDhEQUE4RDtZQUM5RCxNQUFNLElBQUksR0FBRyxNQUFNLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLEVBQUMsZUFBZTtZQUM5RCxNQUFNLEtBQUssR0FBRyxNQUFNLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLEVBQUMsZUFBZTtZQUNqRSxNQUFNLFVBQVUsR0FBRyxJQUFJLGVBQWUsQ0FBQyxJQUFJLENBQUM7WUFDNUMsTUFBTSxXQUFXLEdBQUcsSUFBSSxlQUFlLENBQUMsS0FBSyxDQUFDO1lBRTlDLDZEQUE2RDtZQUM3RCwrRUFBK0U7WUFDL0UsSUFBSSxJQUFJLENBQUMsaUJBQWlCLEtBQUssSUFBSSxFQUFFLENBQUM7Z0JBQ3BDLE9BQU07WUFDUixDQUFDO1lBRUQseURBQXlEO1lBQ3pELElBQUksQ0FBQyxpQkFBaUIsR0FBRyxJQUFJO1lBRTdCLCtCQUErQjtZQUMvQixNQUFNLGFBQWEsR0FBOEIsRUFBRTtZQUNuRCxVQUFVLENBQUMsT0FBTyxDQUFDLENBQUMsS0FBSyxFQUFFLEdBQUcsRUFBRSxFQUFFLEdBQUcsYUFBYSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEtBQUssRUFBQyxDQUFDLENBQUM7WUFDbEUsTUFBTSxjQUFjLEdBQThCLEVBQUU7WUFDcEQsV0FBVyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEtBQUssRUFBRSxHQUFHLEVBQUUsRUFBRSxHQUFHLGNBQWMsQ0FBQyxHQUFHLENBQUMsR0FBRyxLQUFLLEVBQUMsQ0FBQyxDQUFDO1lBRXBFLDBCQUEwQjtZQUMxQixXQUFXLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBRTtnQkFDdEIsS0FBSyxFQUFFLGlCQUFpQjtnQkFDeEIsUUFBUSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRTtnQkFDdkIsSUFBSSxFQUFFLElBQUk7Z0JBQ1YsS0FBSyxFQUFFLEtBQUs7Z0JBQ1osYUFBYTtnQkFDYixjQUFjO2dCQUNkLGlCQUFpQixFQUFFLFFBQVE7Z0JBQzNCLFlBQVksRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLGlCQUFpQjtnQkFDMUMsU0FBUyxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUU7YUFDdEIsQ0FBQztZQUVGLGtDQUFrQztZQUNsQyxZQUFZO1lBQ1osc0RBQXNEO1lBQ3RELDhEQUE4RDtZQUU5RCxJQUFJLFlBQVksR0FBa0IsSUFBSTtZQUN0QyxJQUFJLFVBQVUsR0FBa0IsSUFBSTtZQUNwQyxJQUFJLE9BQU8sR0FBNEIsSUFBSTtZQUUzQyw2Q0FBNkM7WUFDN0MsS0FBSyxNQUFNLE9BQU8sSUFBSSxRQUFRLEVBQUUsQ0FBQztnQkFDL0IsSUFBSSxVQUFVLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUM7b0JBQzVCLFlBQVksR0FBRyxPQUFPO29CQUN0QixVQUFVLEdBQUcsVUFBVSxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUM7b0JBQ3BDLE9BQU8sR0FBRyxNQUFNO29CQUNoQixNQUFLO2dCQUNQLENBQUM7WUFDSCxDQUFDO1lBRUQsd0VBQXdFO1lBQ3hFLElBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQztnQkFDbEIsS0FBSyxNQUFNLE9BQU8sSUFBSSxRQUFRLEVBQUUsQ0FBQztvQkFDL0IsSUFBSSxXQUFXLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUM7d0JBQzdCLFlBQVksR0FBRyxPQUFPO3dCQUN0QixVQUFVLEdBQUcsV0FBVyxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUM7d0JBQ3JDLE9BQU8sR0FBRyxPQUFPO3dCQUNqQixNQUFLO29CQUNQLENBQUM7Z0JBQ0gsQ0FBQztZQUNILENBQUM7WUFFRCxJQUFJLFlBQVksSUFBSSxVQUFVLEtBQUssSUFBSSxFQUFFLENBQUM7Z0JBQ3hDLGtGQUFrRjtnQkFDbEYsSUFBSSxXQUFJLENBQUMsS0FBSyxDQUFDLGlCQUFpQiwwQ0FBRSxPQUFPLE1BQUssWUFBWSxJQUFJLFdBQUksQ0FBQyxLQUFLLENBQUMsaUJBQWlCLDBDQUFFLEtBQUssTUFBSyxVQUFVLEVBQUUsQ0FBQztvQkFDakgsV0FBVyxDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUU7d0JBQ3RCLEtBQUssRUFBRSxvQkFBb0I7d0JBQzNCLFFBQVEsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUU7d0JBQ3ZCLE9BQU8sRUFBRSxZQUFZO3dCQUNyQixLQUFLLEVBQUUsVUFBVTt3QkFDakIsT0FBTzt3QkFDUCxlQUFlLEVBQUUsVUFBSSxDQUFDLEtBQUssQ0FBQyxpQkFBaUIsMENBQUUsT0FBTzt3QkFDdEQsYUFBYSxFQUFFLFVBQUksQ0FBQyxLQUFLLENBQUMsaUJBQWlCLDBDQUFFLEtBQUs7d0JBQ2xELFNBQVMsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFO3FCQUN0QixDQUFDO29CQUVGLDBGQUEwRjtvQkFDMUYsTUFBTSxjQUFjLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxXQUFXLEtBQUssa0RBQWEsQ0FBQyxZQUFZO29CQUU1RSxJQUFJLENBQUMsUUFBUSxpQkFDWCxpQkFBaUIsRUFBRSxFQUFFLE9BQU8sRUFBRSxZQUFZLEVBQUUsS0FBSyxFQUFFLFVBQVUsRUFBRSxJQUU1RCxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUM7d0JBQ25CLFdBQVcsRUFBRSxrREFBYSxDQUFDLFlBQVk7d0JBQ3ZDLGtCQUFrQixFQUFFLEVBQUU7cUJBQ3ZCLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUNQO2dCQUNKLENBQUM7Z0JBQ0QsT0FBTSxDQUFDLGlDQUFpQztZQUMxQyxDQUFDO1lBRUQsa0VBQWtFO1lBQ2xFLElBQUksQ0FBQyxVQUFVLElBQUksTUFBTSxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUM7Z0JBQ3pELFdBQVcsQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFO29CQUN0QixLQUFLLEVBQUUsZ0NBQWdDO29CQUN2QyxRQUFRLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFO29CQUN2QixJQUFJLEVBQUUsSUFBSTtvQkFDVixhQUFhLEVBQUUsYUFBYTtvQkFDNUIsaUJBQWlCLEVBQUUsUUFBUTtvQkFDM0IsSUFBSSxFQUFFLHlEQUF5RDtvQkFDL0QsU0FBUyxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUU7aUJBQ3RCLENBQUM7WUFDSixDQUFDO1lBRUQsMkRBQTJEO1lBQzNELHdEQUF3RDtZQUN4RCxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztnQkFDakMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUU7b0JBQ3RCLEtBQUssRUFBRSxjQUFjO29CQUNyQixRQUFRLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFO29CQUN2QixlQUFlLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxpQkFBaUIsQ0FBQyxPQUFPO29CQUNyRCxhQUFhLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxpQkFBaUIsQ0FBQyxLQUFLO29CQUNqRCxNQUFNLEVBQUUseUJBQXlCO29CQUNqQyxhQUFhLEVBQUUsYUFBYTtvQkFDNUIsU0FBUyxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUU7aUJBQ3RCLENBQUM7Z0JBQ0YsSUFBSSxDQUFDLFFBQVEsQ0FBQztvQkFDWixpQkFBaUIsRUFBRSxTQUFTO2lCQUM3QixDQUFDO1lBQ0osQ0FBQztRQUNILENBQUM7SUEyS0gsQ0FBQztJQXBwREMsaUJBQWlCO1FBQ2YsSUFBSSxDQUFDLDJCQUEyQixFQUFFO1FBQ2xDLHFFQUFxRTtRQUNyRSwwRUFBMEU7UUFDMUUscUVBQXFFO1FBQ3JFLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxZQUFZLEVBQUUsSUFBSSxDQUFDLDJCQUEyQixDQUFDO1FBRXZFLDhCQUE4QjtRQUM5QixJQUFJLENBQUMsd0JBQXdCLEVBQUU7UUFFL0IsaURBQWlEO1FBQ2pELE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQywwRUFBMkIsRUFBRSxJQUFJLENBQUMscUJBQXNDLENBQUM7UUFFakcseURBQXlEO1FBQ3pELE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQywrQkFBK0IsRUFBRSxJQUFJLENBQUMsNEJBQTZDLENBQUM7UUFFNUcsbURBQW1EO1FBQ25ELE1BQU0sU0FBUyxHQUFHLElBQUksV0FBVyxDQUFDLDhCQUE4QixFQUFFO1lBQ2hFLE1BQU0sRUFBRTtnQkFDTixRQUFRLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFO2dCQUN2QixNQUFNLEVBQUUsSUFBSTthQUNiO1lBQ0QsT0FBTyxFQUFFLElBQUk7WUFDYixVQUFVLEVBQUUsSUFBSTtTQUNqQixDQUFDO1FBQ0YsTUFBTSxDQUFDLGFBQWEsQ0FBQyxTQUFTLENBQUM7UUFDL0IsV0FBVyxDQUFDLEdBQUcsQ0FBQyxjQUFjLEVBQUU7WUFDOUIsS0FBSyxFQUFFLGVBQWU7WUFDdEIsUUFBUSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRTtZQUN2QixNQUFNLEVBQUUsSUFBSTtZQUNaLFNBQVMsRUFBRSxJQUFJLElBQUksRUFBRSxDQUFDLFdBQVcsRUFBRTtTQUNwQyxDQUFDO1FBRUYsK0VBQStFO1FBQy9FLG9FQUFvRTtRQUNwRSxVQUFVLENBQUMsR0FBRyxFQUFFO1lBQ2QsSUFBSSxDQUFDLDJCQUEyQixFQUFFO1FBQ3BDLENBQUMsRUFBRSxHQUFHLENBQUM7UUFFUCw4RkFBOEY7SUFDaEcsQ0FBQztJQUVELG9CQUFvQjtRQUNsQiwrQkFBK0I7UUFDL0IsTUFBTSxDQUFDLG1CQUFtQixDQUFDLFlBQVksRUFBRSxJQUFJLENBQUMsMkJBQTJCLENBQUM7UUFFMUUscUNBQXFDO1FBQ3JDLE1BQU0sQ0FBQyxtQkFBbUIsQ0FBQywwRUFBMkIsRUFBRSxJQUFJLENBQUMscUJBQXNDLENBQUM7UUFFcEcsOENBQThDO1FBQzlDLE1BQU0sQ0FBQyxtQkFBbUIsQ0FBQywrQkFBK0IsRUFBRSxJQUFJLENBQUMsNEJBQTZDLENBQUM7UUFFL0csZ0NBQWdDO1FBQ2hDLElBQUksQ0FBQywwQkFBMEIsRUFBRTtRQUVqQywwQkFBMEI7UUFDMUIsSUFBSSxDQUFDLG9CQUFvQixFQUFFO1FBRTNCLHFEQUFxRDtRQUNyRCxNQUFNLFVBQVUsR0FBRyxJQUFJLFdBQVcsQ0FBQyw4QkFBOEIsRUFBRTtZQUNqRSxNQUFNLEVBQUU7Z0JBQ04sUUFBUSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRTtnQkFDdkIsTUFBTSxFQUFFLEtBQUs7YUFDZDtZQUNELE9BQU8sRUFBRSxJQUFJO1lBQ2IsVUFBVSxFQUFFLElBQUk7U0FDakIsQ0FBQztRQUNGLE1BQU0sQ0FBQyxhQUFhLENBQUMsVUFBVSxDQUFDO1FBQ2hDLFdBQVcsQ0FBQyxHQUFHLENBQUMsY0FBYyxFQUFFO1lBQzlCLEtBQUssRUFBRSxlQUFlO1lBQ3RCLFFBQVEsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUU7WUFDdkIsTUFBTSxFQUFFLEtBQUs7WUFDYixTQUFTLEVBQUUsSUFBSSxJQUFJLEVBQUUsQ0FBQyxXQUFXLEVBQUU7U0FDcEMsQ0FBQztJQUNKLENBQUM7SUFFRCxrQkFBa0IsQ0FBQyxTQUFtQztRQUNwRCxJQUFJLFNBQVMsQ0FBQyxNQUFNLENBQUMsVUFBVSxLQUFLLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLFVBQVUsRUFBRSxDQUFDO1lBQ2pFLElBQUksQ0FBQywyQkFBMkIsRUFBRTtRQUNwQyxDQUFDO1FBRUQsd0RBQXdEO1FBQ3hELElBQUksU0FBUyxDQUFDLE1BQU0sQ0FBQyw0QkFBNEIsS0FBSyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyw0QkFBNEIsRUFBRSxDQUFDO1lBQ3JHLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyw0QkFBNEIsRUFBRSxDQUFDO2dCQUNwRCxJQUFJLENBQUMsb0JBQW9CLEVBQUU7WUFDN0IsQ0FBQztZQUNELGtHQUFrRztRQUNwRyxDQUFDO0lBQ0gsQ0FBQztJQW01Q0QsTUFBTTs7UUFDSixNQUFNLEVBQUUsTUFBTSxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLFFBQVEsRUFBRSxZQUFZLEVBQUUsa0JBQWtCLEVBQUUsR0FBRyxJQUFJLENBQUMsS0FBSztRQUMxRixNQUFNLFdBQVcsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUM7WUFDaEQsRUFBRSxFQUFFLGNBQWM7WUFDbEIsY0FBYyxFQUFFLDZEQUFlLENBQUMsWUFBWTtTQUM3QyxDQUFDO1FBQ0YsSUFBSSxDQUFDLGFBQU0sQ0FBQyxVQUFVLDBDQUFFLE1BQU0sR0FBRSxDQUFDO1lBQy9CLE9BQU8sZ0VBQUMsc0RBQWlCLElBQUMsSUFBSSxFQUFFLE9BQU8sQ0FBQyxTQUFTLEVBQUUsUUFBUSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRSxFQUFFLElBQUksRUFBRSxXQUFXLEdBQUk7UUFDbkcsQ0FBQztRQUVELElBQUksTUFBTSxDQUFDLFdBQVcsS0FBSyxxREFBZ0IsQ0FBQyxNQUFNLElBQUksQ0FBQyxrQkFBa0IsRUFBRSxDQUFDO1lBQzFFLE9BQU8sQ0FDTCxnRUFBQyxnRUFBa0IsQ0FBQyxRQUFRLElBQUMsS0FBSyxFQUFFLEdBQUcsUUFBUSxJQUFJLFlBQVksRUFBRSxZQUMvRCxnRUFBQyxtRkFBcUIsSUFDcEIsRUFBRSxFQUFFLENBQUMsRUFDTCxJQUFJLEVBQUUsSUFBSSxFQUNWLFdBQVcsRUFBRSxLQUFLLEVBQ2xCLE9BQU8sRUFBRSxrQkFBTSxDQUFDLE9BQU8sMENBQUUscUJBQXFCLDBDQUFFLE9BQU8sRUFDdkQsV0FBVyxFQUFFLGtCQUFNLENBQUMsT0FBTywwQ0FBRSxxQkFBcUIsMENBQUUsV0FBVyxZQUU3RCxnRUFBQywyREFBYSxJQUNaLFFBQVEsRUFBRSxFQUFFLEVBQ1osVUFBVSxRQUNWLFVBQVUsRUFBRSxNQUFNLENBQUMsVUFBVSxFQUM3QixlQUFlLEVBQUUsTUFBTSxDQUFDLGVBQWUsRUFDdkMsU0FBUyxFQUFDLE1BQU0sRUFDaEIsaUJBQWlCLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxpQkFBaUIsRUFDL0MsbUJBQW1CLEVBQUUsSUFBSSxDQUFDLHVCQUF1QixFQUNqRCxXQUFXLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxXQUFXLEVBQ25DLG1CQUFtQixFQUFFLElBQUksQ0FBQyx1QkFBdUIsRUFDakQsa0JBQWtCLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxrQkFBa0IsRUFDakQsMEJBQTBCLEVBQUUsSUFBSSxDQUFDLDhCQUE4QixFQUMvRCw0QkFBNEIsRUFBRSxNQUFNLENBQUMsNEJBQTRCLEVBQ2pFLGFBQWEsRUFBRSxJQUFJLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxJQUFJLFNBQVMsRUFDekQsT0FBTyxFQUFFLElBQUksQ0FBQyxVQUFVLENBQUMsT0FBTyxJQUFJLFNBQVMsRUFDN0MseUJBQXlCLEVBQUUsSUFBSSxDQUFDLG1DQUFtQyxFQUNuRSxvQkFBb0IsRUFBRSxJQUFJLENBQUMsMEJBQTBCLEVBQ3JELFNBQVMsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsRUFDL0IsV0FBVyxFQUFFLElBQUksQ0FBQyxlQUFlLEdBQ2pDLEdBQ2tCLEdBQ0ksQ0FDL0I7UUFDSCxDQUFDO1FBRUQsSUFBSSxNQUFNLENBQUMsV0FBVyxLQUFLLHFEQUFnQixDQUFDLE1BQU0sSUFBSSxDQUFDLGtCQUFrQixFQUFFLENBQUM7WUFDMUUsT0FBTyxDQUNMLGdFQUFDLGdFQUFrQixDQUFDLFFBQVEsSUFBQyxLQUFLLEVBQUUsR0FBRyxRQUFRLElBQUksWUFBWSxFQUFFLFlBQy9ELGdFQUFDLG1FQUFjLElBQ2IsUUFBUSxFQUFFLEVBQUUsRUFDWixXQUFXLEVBQUUsS0FBSyxFQUNsQixJQUFJLEVBQUUsTUFBTSxDQUFDLFdBQVcsRUFDeEIsVUFBVSxFQUFFLE1BQU0sQ0FBQyxVQUFVLEVBQzdCLE9BQU8sRUFBRSxrQkFBTSxDQUFDLE9BQU8sMENBQUUscUJBQXFCLDBDQUFFLE9BQU8sRUFDdkQsV0FBVyxFQUFFLGtCQUFNLENBQUMsT0FBTywwQ0FBRSxxQkFBcUIsMENBQUUsV0FBVyxFQUMvRCxlQUFlLEVBQUUsTUFBTSxDQUFDLGVBQWUsRUFDdkMsaUJBQWlCLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxpQkFBaUIsRUFDL0MsbUJBQW1CLEVBQUUsSUFBSSxDQUFDLHVCQUF1QixHQUNqRCxHQUMwQixDQUMvQjtRQUNILENBQUM7UUFFRCxPQUFPLENBQ0wsaUVBQUMsMENBQUssSUFBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLFNBQVMsRUFBRSxPQUFPLEVBQUMsTUFBTSxFQUFDLFNBQVMsRUFBQywyQkFBMkIsbUJBQWdCLEVBQUUsRUFBRSxHQUFHLEVBQUUsOENBQUc7Ozs7T0FJM0csYUFHRSxNQUFNLENBQUMsNEJBQTRCLElBQUksTUFBTSxDQUFDLG9CQUFvQixJQUFJLENBQ3JFLGdFQUFDLDZEQUFvQixJQUNuQixjQUFjLEVBQUUsTUFBTSxDQUFDLG9CQUFvQixFQUMzQyxrQkFBa0IsRUFBRSxJQUFJLENBQUMsd0JBQXdCLEdBQ2pELENBQ0gsRUFDRCx5RUFBSyxTQUFTLEVBQUMsZUFBZSxFQUFDLEdBQUcsRUFBRSw4Q0FBRzs7OztTQUl0QyxZQUNDLHdFQUFJLFNBQVMsRUFBQyxjQUFjLEVBQUMsR0FBRyxFQUFFLDhDQUFHOzs7OztXQUtwQyxZQUNFLEtBQUssSUFBSSxXQUFXLEdBQ2xCLEdBQ0QsRUFDTiwwRUFBSyxHQUFHLEVBQUUsOENBQUc7Ozs7O1NBS1osYUFDQyx5RUFBSyxHQUFHLEVBQUUsOENBQUc7OztXQUdaLFlBQ0MsZ0VBQUMsZ0VBQWtCLENBQUMsUUFBUSxJQUFDLEtBQUssRUFBRSxHQUFHLFFBQVEsSUFBSSxZQUFZLEVBQUUsWUFDL0QsZ0VBQUMsMkRBQWEsSUFDWixRQUFRLEVBQUUsRUFBRSxFQUNaLFVBQVUsRUFBRSxNQUFNLENBQUMsVUFBVSxFQUM3QixlQUFlLEVBQUUsTUFBTSxDQUFDLGVBQWUsRUFDdkMsaUJBQWlCLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxpQkFBaUIsRUFDL0MsbUJBQW1CLEVBQUUsSUFBSSxDQUFDLHVCQUF1QixFQUNqRCxXQUFXLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxXQUFXLEVBQ25DLG1CQUFtQixFQUFFLElBQUksQ0FBQyx1QkFBdUIsRUFDakQsa0JBQWtCLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxrQkFBa0IsRUFDakQsMEJBQTBCLEVBQUUsSUFBSSxDQUFDLDhCQUE4QixFQUMvRCw0QkFBNEIsRUFBRSxNQUFNLENBQUMsNEJBQTRCLEVBQ2pFLGFBQWEsRUFBRSxJQUFJLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxJQUFJLFNBQVMsRUFDekQsT0FBTyxFQUFFLElBQUksQ0FBQyxVQUFVLENBQUMsT0FBTyxJQUFJLFNBQVMsRUFDN0MseUJBQXlCLEVBQUUsSUFBSSxDQUFDLG1DQUFtQyxFQUNuRSxvQkFBb0IsRUFBRSxJQUFJLENBQUMsMEJBQTBCLEVBQ3JELFNBQVMsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsRUFDL0IsV0FBVyxFQUFFLElBQUksQ0FBQyxlQUFlLEdBQ2pDLEdBQzBCLEdBQzFCLEVBRU4seUVBQUssR0FBRyxFQUFFLDhDQUFHOzs7Ozs7V0FNWixZQUNDLDJFQUFNLEdBQUcsRUFBRSw4Q0FBRzs7Ozs7Ozs7YUFRYixhQUVDLDBFQUNFLEtBQUssRUFBQyxJQUFJLEVBQ1YsTUFBTSxFQUFDLElBQUksRUFDWCxPQUFPLEVBQUMsV0FBVyxFQUNuQixJQUFJLEVBQUMsTUFBTSxFQUNYLE1BQU0sRUFBQyxjQUFjLEVBQ3JCLFdBQVcsRUFBQyxHQUFHLEVBQ2YsR0FBRyxFQUFFLDhDQUFHOzs7aUJBR1AsYUFFRCw4RUFBVSxNQUFNLEVBQUMsa0JBQWtCLEdBQUUsRUFDckMsOEVBQVUsTUFBTSxFQUFDLGVBQWUsR0FBRSxJQUM5Qiw4QkFFTiwyRUFBTSxHQUFHLEVBQUUsOENBQUc7Ozs7ZUFJYixrQkFDRyxxREFBYyxJQUNYLElBQ0YsR0FDSCxJQUNGLElBQ0EsQ0FDVDtJQUNILENBQUM7O0FBL3FETSxxQkFBYyxHQUFHLDREQUFjO2lFQVpuQixNQUFNO0FBK3JEbkIsU0FBUywyQkFBMkIsQ0FBQyxHQUFHLElBQUkscUJBQXVCLEdBQUcsR0FBRyxFQUFDLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9maWxsZWQvZGlyZWN0aW9uYWwvZG93bi50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvZmlsbGVkL2RpcmVjdGlvbmFsL3JpZ2h0LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9hcnJvdy1sZWZ0LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9jb2xsYXBzZS1hbGwudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL291dGxpbmVkL2RpcmVjdGlvbmFsL2V4cGFuZC1hbGwudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL291dGxpbmVkL2VkaXRvci90cmFzaC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvb3V0bGluZWQvc3VnZ2VzdGVkL2luZm8udHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9maWxsZWQvZGlyZWN0aW9uYWwvZG93bi5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvc3ZnL2ZpbGxlZC9kaXJlY3Rpb25hbC9yaWdodC5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2FwcGxpY2F0aW9uL21vcmUtaG9yaXpvbnRhbC5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2RpcmVjdGlvbmFsL2Fycm93LWxlZnQuc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9jb2xsYXBzZS1hbGwuc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9leHBhbmQtYWxsLnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9zdmcvb3V0bGluZWQvZGlyZWN0aW9uYWwvcmlnaHQuc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9vdXRsaW5lZC9lZGl0b3IvY2xvc2Uuc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9vdXRsaW5lZC9lZGl0b3IvdHJhc2guc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9vdXRsaW5lZC9zdWdnZXN0ZWQvZXJyb3Iuc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9vdXRsaW5lZC9zdWdnZXN0ZWQvaW5mby5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL3N1Z2dlc3RlZC93YXJuaW5nLnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL2ljb24uc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL2NvbmZpZy50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9kYXRhLWFjdGlvbnMvYWRkLXRvLW1hcC1hY3Rpb24udHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL2RhdGEtYWN0aW9ucy9pbmRleC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvZGVmYXVsdC1xdWVyeS1pdGVtLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvYXNzZXRzL2ljb25zL3Nob3ctb24tbWFwLnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL2J1ZmZlci1pbnB1dC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9jb21wb25lbnRzL2ZlYXR1cmUtaW5mby50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9nZW9tZXRyeS1mcm9tLWRyYXcudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvZ2VvbWV0cnktZnJvbS1kcy50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9nZW9tZXRyeS1mcm9tLW1hcC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9ncmFwaGljcy1sYXllci11dGlscy50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL2ludGVyYWN0aXZlLWRyYXctdG9vbC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9sb2FkaW5nLXJlc3VsdC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9xdWVyeS1yZXN1bHQtaXRlbS50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9xdWVyeS1yZXN1bHQudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvcXVlcnktdGFzay1jb250ZXh0LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL3F1ZXJ5LXRhc2stZm9ybS50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9xdWVyeS10YXNrLWxhYmVsLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL3F1ZXJ5LXRhc2stbGlzdC1pbmxpbmUudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvcXVlcnktdGFzay1saXN0LXBvcHBlci13cmFwcGVyLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL3F1ZXJ5LXRhc2stbGlzdC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9xdWVyeS10YXNrLXNwYXRpYWwtZm9ybS50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9xdWVyeS10YXNrLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL3F1ZXJ5LXV0aWxzLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvcmVzdWx0cy1tYW5hZ2VtZW50LXV0aWxzLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvc2VsZWN0aW9uLXV0aWxzLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvc2ltcGxlLWxpc3QudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvdHJhbnNsYXRpb25zL2RlZmF1bHQudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS91c2VBdXRvSGVpZ2h0LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL3dpZGdldC1jb25maWcudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS93aWRnZXQtY29udGV4dC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvdmVyc2lvbi1tYW5hZ2VyLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3ZlcnNpb24udHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbi50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uL2NvbW1vbi1jb21wb25lbnRzLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uL2RhdGEtc291cmNlLXRpcC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbi9kZWJ1Zy1sb2dnZXIudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbi91c2UtZHMtZXhpc3RzLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uL3V0aWxzLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50L2V4dGVybmFsIHN5c3RlbSBcImppbXUtY29yZS9lbW90aW9uXCIiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC9leHRlcm5hbCBzeXN0ZW0gXCJqaW11LWFyY2dpc1wiIiwid2VicGFjazovL2V4Yi1jbGllbnQvZXh0ZXJuYWwgc3lzdGVtIFwiamltdS1jb3JlXCIiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC9leHRlcm5hbCBzeXN0ZW0gXCJqaW11LWxheW91dHMvbGF5b3V0LXJ1bnRpbWVcIiIsIndlYnBhY2s6Ly9leGItY2xpZW50L2V4dGVybmFsIHN5c3RlbSBcImppbXUtdGhlbWVcIiIsIndlYnBhY2s6Ly9leGItY2xpZW50L2V4dGVybmFsIHN5c3RlbSBcImppbXUtdWlcIiIsIndlYnBhY2s6Ly9leGItY2xpZW50L2V4dGVybmFsIHN5c3RlbSBcImppbXUtdWkvYmFzaWMvc3FsLWV4cHJlc3Npb24tcnVudGltZVwiIiwid2VicGFjazovL2V4Yi1jbGllbnQvZXh0ZXJuYWwgc3lzdGVtIFwid2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb25cIiIsIndlYnBhY2s6Ly9leGItY2xpZW50L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2V4Yi1jbGllbnQvd2VicGFjay9ydW50aW1lL2NvbXBhdCBnZXQgZGVmYXVsdCBleHBvcnQiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL2V4Yi1jbGllbnQvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly9leGItY2xpZW50L3dlYnBhY2svcnVudGltZS9wdWJsaWNQYXRoIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWNvcmUvbGliL3NldC1wdWJsaWMtcGF0aC50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL3dpZGdldC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUmVhY3QsIGNsYXNzTmFtZXMgfSBmcm9tICdqaW11LWNvcmUnXHJcbmltcG9ydCB0eXBlIHsgU1ZHQ29tcG9uZW50UHJvcHMgfSBmcm9tICdqaW11LXVpJ1xyXG5pbXBvcnQgc3JjIGZyb20gJy4uLy4uL3N2Zy9maWxsZWQvZGlyZWN0aW9uYWwvZG93bi5zdmcnXHJcblxyXG5leHBvcnQgY29uc3QgRG93bkZpbGxlZCA9IChwcm9wczogU1ZHQ29tcG9uZW50UHJvcHMpID0+IHtcclxuICBjb25zdCBTVkcgPSB3aW5kb3cuU1ZHXHJcbiAgY29uc3QgeyBjbGFzc05hbWUsIC4uLm90aGVycyB9ID0gcHJvcHNcclxuXHJcbiAgY29uc3QgY2xhc3NlcyA9IGNsYXNzTmFtZXMoJ2ppbXUtaWNvbiBqaW11LWljb24tY29tcG9uZW50JywgY2xhc3NOYW1lKVxyXG4gIGlmICghU1ZHKSByZXR1cm4gPHN2ZyBjbGFzc05hbWU9e2NsYXNzZXN9IHsuLi5vdGhlcnMgYXMgYW55fSAvPlxyXG4gIHJldHVybiA8U1ZHIGNsYXNzTmFtZT17Y2xhc3Nlc30gc3JjPXtzcmN9IHsuLi5vdGhlcnN9IC8+XHJcbn1cclxuIiwiaW1wb3J0IHsgUmVhY3QsIGNsYXNzTmFtZXMgfSBmcm9tICdqaW11LWNvcmUnXHJcbmltcG9ydCB0eXBlIHsgU1ZHQ29tcG9uZW50UHJvcHMgfSBmcm9tICdqaW11LXVpJ1xyXG5pbXBvcnQgc3JjIGZyb20gJy4uLy4uL3N2Zy9maWxsZWQvZGlyZWN0aW9uYWwvcmlnaHQuc3ZnJ1xyXG5cclxuZXhwb3J0IGNvbnN0IFJpZ2h0RmlsbGVkID0gKHByb3BzOiBTVkdDb21wb25lbnRQcm9wcykgPT4ge1xyXG4gIGNvbnN0IFNWRyA9IHdpbmRvdy5TVkdcclxuICBjb25zdCB7IGNsYXNzTmFtZSwgLi4ub3RoZXJzIH0gPSBwcm9wc1xyXG5cclxuICBjb25zdCBjbGFzc2VzID0gY2xhc3NOYW1lcygnamltdS1pY29uIGppbXUtaWNvbi1jb21wb25lbnQnLCBjbGFzc05hbWUpXHJcbiAgaWYgKCFTVkcpIHJldHVybiA8c3ZnIGNsYXNzTmFtZT17Y2xhc3Nlc30gey4uLm90aGVycyBhcyBhbnl9IC8+XHJcbiAgcmV0dXJuIDxTVkcgY2xhc3NOYW1lPXtjbGFzc2VzfSBzcmM9e3NyY30gey4uLm90aGVyc30gLz5cclxufVxyXG4iLCJpbXBvcnQgeyBSZWFjdCwgY2xhc3NOYW1lcyB9IGZyb20gJ2ppbXUtY29yZSdcclxuaW1wb3J0IHR5cGUgeyBTVkdDb21wb25lbnRQcm9wcyB9IGZyb20gJ2ppbXUtdWknXHJcbmltcG9ydCBzcmMgZnJvbSAnLi4vLi4vc3ZnL291dGxpbmVkL2RpcmVjdGlvbmFsL2Fycm93LWxlZnQuc3ZnJ1xyXG5cclxuZXhwb3J0IGNvbnN0IEFycm93TGVmdE91dGxpbmVkID0gKHByb3BzOiBTVkdDb21wb25lbnRQcm9wcykgPT4ge1xyXG4gIGNvbnN0IFNWRyA9IHdpbmRvdy5TVkdcclxuICBjb25zdCB7IGNsYXNzTmFtZSwgLi4ub3RoZXJzIH0gPSBwcm9wc1xyXG5cclxuICBjb25zdCBjbGFzc2VzID0gY2xhc3NOYW1lcygnamltdS1pY29uIGppbXUtaWNvbi1jb21wb25lbnQnLCBjbGFzc05hbWUpXHJcbiAgaWYgKCFTVkcpIHJldHVybiA8c3ZnIGNsYXNzTmFtZT17Y2xhc3Nlc30gey4uLm90aGVycyBhcyBhbnl9IC8+XHJcbiAgcmV0dXJuIDxTVkcgY2xhc3NOYW1lPXtjbGFzc2VzfSBzcmM9e3NyY30gey4uLm90aGVyc30gLz5cclxufVxyXG4iLCJpbXBvcnQgeyBSZWFjdCwgY2xhc3NOYW1lcyB9IGZyb20gJ2ppbXUtY29yZSdcclxuaW1wb3J0IHR5cGUgeyBTVkdDb21wb25lbnRQcm9wcyB9IGZyb20gJ2ppbXUtdWknXHJcbmltcG9ydCBzcmMgZnJvbSAnLi4vLi4vc3ZnL291dGxpbmVkL2RpcmVjdGlvbmFsL2NvbGxhcHNlLWFsbC5zdmcnXHJcblxyXG5leHBvcnQgY29uc3QgQ29sbGFwc2VBbGxPdXRsaW5lZCA9IChwcm9wczogU1ZHQ29tcG9uZW50UHJvcHMpID0+IHtcclxuICBjb25zdCBTVkcgPSB3aW5kb3cuU1ZHXHJcbiAgY29uc3QgeyBjbGFzc05hbWUsIC4uLm90aGVycyB9ID0gcHJvcHNcclxuXHJcbiAgY29uc3QgY2xhc3NlcyA9IGNsYXNzTmFtZXMoJ2ppbXUtaWNvbiBqaW11LWljb24tY29tcG9uZW50JywgY2xhc3NOYW1lKVxyXG4gIGlmICghU1ZHKSByZXR1cm4gPHN2ZyBjbGFzc05hbWU9e2NsYXNzZXN9IHsuLi5vdGhlcnMgYXMgYW55fSAvPlxyXG4gIHJldHVybiA8U1ZHIGNsYXNzTmFtZT17Y2xhc3Nlc30gc3JjPXtzcmN9IHsuLi5vdGhlcnN9IC8+XHJcbn1cclxuIiwiaW1wb3J0IHsgUmVhY3QsIGNsYXNzTmFtZXMgfSBmcm9tICdqaW11LWNvcmUnXHJcbmltcG9ydCB0eXBlIHsgU1ZHQ29tcG9uZW50UHJvcHMgfSBmcm9tICdqaW11LXVpJ1xyXG5pbXBvcnQgc3JjIGZyb20gJy4uLy4uL3N2Zy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9leHBhbmQtYWxsLnN2ZydcclxuXHJcbmV4cG9ydCBjb25zdCBFeHBhbmRBbGxPdXRsaW5lZCA9IChwcm9wczogU1ZHQ29tcG9uZW50UHJvcHMpID0+IHtcclxuICBjb25zdCBTVkcgPSB3aW5kb3cuU1ZHXHJcbiAgY29uc3QgeyBjbGFzc05hbWUsIC4uLm90aGVycyB9ID0gcHJvcHNcclxuXHJcbiAgY29uc3QgY2xhc3NlcyA9IGNsYXNzTmFtZXMoJ2ppbXUtaWNvbiBqaW11LWljb24tY29tcG9uZW50JywgY2xhc3NOYW1lKVxyXG4gIGlmICghU1ZHKSByZXR1cm4gPHN2ZyBjbGFzc05hbWU9e2NsYXNzZXN9IHsuLi5vdGhlcnMgYXMgYW55fSAvPlxyXG4gIHJldHVybiA8U1ZHIGNsYXNzTmFtZT17Y2xhc3Nlc30gc3JjPXtzcmN9IHsuLi5vdGhlcnN9IC8+XHJcbn1cclxuIiwiaW1wb3J0IHsgUmVhY3QsIGNsYXNzTmFtZXMgfSBmcm9tICdqaW11LWNvcmUnXHJcbmltcG9ydCB0eXBlIHsgU1ZHQ29tcG9uZW50UHJvcHMgfSBmcm9tICdqaW11LXVpJ1xyXG5pbXBvcnQgc3JjIGZyb20gJy4uLy4uL3N2Zy9vdXRsaW5lZC9lZGl0b3IvdHJhc2guc3ZnJ1xyXG5cclxuZXhwb3J0IGNvbnN0IFRyYXNoT3V0bGluZWQgPSAocHJvcHM6IFNWR0NvbXBvbmVudFByb3BzKSA9PiB7XHJcbiAgY29uc3QgU1ZHID0gd2luZG93LlNWR1xyXG4gIGNvbnN0IHsgY2xhc3NOYW1lLCAuLi5vdGhlcnMgfSA9IHByb3BzXHJcblxyXG4gIGNvbnN0IGNsYXNzZXMgPSBjbGFzc05hbWVzKCdqaW11LWljb24gamltdS1pY29uLWNvbXBvbmVudCcsIGNsYXNzTmFtZSlcclxuICBpZiAoIVNWRykgcmV0dXJuIDxzdmcgY2xhc3NOYW1lPXtjbGFzc2VzfSB7Li4ub3RoZXJzIGFzIGFueX0gLz5cclxuICByZXR1cm4gPFNWRyBjbGFzc05hbWU9e2NsYXNzZXN9IHNyYz17c3JjfSB7Li4ub3RoZXJzfSAvPlxyXG59XHJcbiIsImltcG9ydCB7IFJlYWN0LCBjbGFzc05hbWVzIH0gZnJvbSAnamltdS1jb3JlJ1xyXG5pbXBvcnQgdHlwZSB7IFNWR0NvbXBvbmVudFByb3BzIH0gZnJvbSAnamltdS11aSdcclxuaW1wb3J0IHNyYyBmcm9tICcuLi8uLi9zdmcvb3V0bGluZWQvc3VnZ2VzdGVkL2luZm8uc3ZnJ1xyXG5cclxuZXhwb3J0IGNvbnN0IEluZm9PdXRsaW5lZCA9IChwcm9wczogU1ZHQ29tcG9uZW50UHJvcHMpID0+IHtcclxuICBjb25zdCBTVkcgPSB3aW5kb3cuU1ZHXHJcbiAgY29uc3QgeyBjbGFzc05hbWUsIC4uLm90aGVycyB9ID0gcHJvcHNcclxuXHJcbiAgY29uc3QgY2xhc3NlcyA9IGNsYXNzTmFtZXMoJ2ppbXUtaWNvbiBqaW11LWljb24tY29tcG9uZW50JywgY2xhc3NOYW1lKVxyXG4gIGlmICghU1ZHKSByZXR1cm4gPHN2ZyBjbGFzc05hbWU9e2NsYXNzZXN9IHsuLi5vdGhlcnMgYXMgYW55fSAvPlxyXG4gIHJldHVybiA8U1ZHIGNsYXNzTmFtZT17Y2xhc3Nlc30gc3JjPXtzcmN9IHsuLi5vdGhlcnN9IC8+XHJcbn1cclxuIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGQ9XFxcIm0xNCA0LTYgOC02LTh6XFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHZpZXdCb3g9XFxcIjAgMCAxNiAxNlxcXCI+PHBhdGggZmlsbD1cXFwiIzAwMFxcXCIgZD1cXFwibTQgMiA4IDYtOCA2elxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGZpbGwtcnVsZT1cXFwiZXZlbm9kZFxcXCIgZD1cXFwiTTIgN2ExIDEgMCAxIDAgMCAyIDEgMSAwIDAgMCAwLTJtNSAxYTEgMSAwIDEgMSAyIDAgMSAxIDAgMCAxLTIgMG02IDBhMSAxIDAgMSAxIDIgMCAxIDEgMCAwIDEtMiAwXFxcIiBjbGlwLXJ1bGU9XFxcImV2ZW5vZGRcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBkPVxcXCJNMTUgNy41YS41Mi41MiAwIDAgMS0uNTE2LjUyN0gyLjk3Nkw2LjQ3MyAxMS42YS41MzUuNTM1IDAgMCAxIDAgLjc0Ni41MS41MSAwIDAgMS0uNzMgMEwxIDcuNWw0Ljc0My00Ljg0NmEuNTEuNTEgMCAwIDEgLjczIDAgLjUzNS41MzUgMCAwIDEgMCAuNzQ2TDIuOTc2IDYuOTczaDExLjUwOGMuMjg1IDAgLjUxNi4yMzYuNTE2LjUyN1xcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGQ9XFxcIk0xIDNoMTR2MUgxek05IDdoNnYxSDl6TTUuMDM2IDYuMTQ2YS41LjUgMCAwIDAtLjcwOCAwTDEuMTQ2IDkuMzI4YS41LjUgMCAxIDAgLjcwOC43MDhsMi4zMjgtMi4zMjlWMTQuNWgxVjcuNzA3bDIuMzI4IDIuMzI5YS41LjUgMCAxIDAgLjcwOC0uNzA4elxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGQ9XFxcIk0xIDNoMTR2MUgxek05IDdoNnYxSDl6TTQuMzI4IDE0LjM1NGEuNS41IDAgMCAwIC43MDggMGwzLjE4Mi0zLjE4MmEuNS41IDAgMSAwLS43MDgtLjcwOGwtMi4zMjggMi4zMjlWNmgtMXY2Ljc5M2wtMi4zMjgtMi4zMjhhLjUuNSAwIDEgMC0uNzA4LjcwN3pcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBmaWxsLXJ1bGU9XFxcImV2ZW5vZGRcXFwiIGQ9XFxcIk00LjY1MyAxMy44NTRhLjQ4NS40ODUgMCAwIDEgMC0uNzA4TDEwLjI0IDggNC42NTMgMi44NTRhLjQ4NS40ODUgMCAwIDEgMC0uNzA4LjU0LjU0IDAgMCAxIC43MzggMGw1Ljk1NiA1LjVhLjQ4NS40ODUgMCAwIDEgMCAuNzA4bC01Ljk1NiA1LjVhLjU0LjU0IDAgMCAxLS43MzggMFxcXCIgY2xpcC1ydWxlPVxcXCJldmVub2RkXFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHZpZXdCb3g9XFxcIjAgMCAxNiAxNlxcXCI+PHBhdGggZmlsbD1cXFwiIzAwMFxcXCIgZD1cXFwibTguNzQ1IDggNi4xIDYuMWEuNTI3LjUyNyAwIDEgMS0uNzQ1Ljc0Nkw4IDguNzQ2bC02LjEgNi4xYS41MjcuNTI3IDAgMSAxLS43NDYtLjc0Nmw2LjEtNi4xLTYuMS02LjFhLjUyNy41MjcgMCAwIDEgLjc0Ni0uNzQ2bDYuMSA2LjEgNi4xLTYuMWEuNTI3LjUyNyAwIDAgMSAuNzQ2Ljc0NnpcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBkPVxcXCJNNiA2LjVhLjUuNSAwIDAgMSAxIDB2NmEuNS41IDAgMCAxLTEgMHpNOS41IDZhLjUuNSAwIDAgMC0uNS41djZhLjUuNSAwIDAgMCAxIDB2LTZhLjUuNSAwIDAgMC0uNS0uNVxcXCI+PC9wYXRoPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGZpbGwtcnVsZT1cXFwiZXZlbm9kZFxcXCIgZD1cXFwiTTExIDBINWExIDEgMCAwIDAtMSAxdjJILjVhLjUuNSAwIDAgMCAwIDFoMS42bC44MSAxMS4xYTEgMSAwIDAgMCAuOTk1LjloOC4xOWExIDEgMCAwIDAgLjk5NS0uOUwxMy45IDRoMS42YS41LjUgMCAwIDAgMC0xSDEyVjFhMSAxIDAgMCAwLTEtMW0wIDNWMUg1djJ6bTEuODk1IDFoLTkuNzlsLjggMTFoOC4xOXpcXFwiIGNsaXAtcnVsZT1cXFwiZXZlbm9kZFxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGZpbGwtcnVsZT1cXFwiZXZlbm9kZFxcXCIgZD1cXFwiTTggMTZBOCA4IDAgMSAxIDggMGE4IDggMCAwIDEgMCAxNm0wLTFBNyA3IDAgMSAwIDggMWE3IDcgMCAwIDAgMCAxNE04IDRhLjkwNS45MDUgMCAwIDAtLjkuOTk1bC4zNSAzLjUwN2EuNTUyLjU1MiAwIDAgMCAxLjEgMGwuMzUtMy41MDdBLjkwNS45MDUgMCAwIDAgOCA0bTEgN2ExIDEgMCAxIDEtMiAwIDEgMSAwIDAgMSAyIDBcXFwiIGNsaXAtcnVsZT1cXFwiZXZlbm9kZFxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGQ9XFxcIk04IDUuNWExIDEgMCAxIDAgMC0yIDEgMSAwIDAgMCAwIDJNNi41IDcuNUEuNS41IDAgMCAxIDcgN2gxLjV2NC41aDFhLjUuNSAwIDAgMSAwIDFoLTNhLjUuNSAwIDAgMSAwLTFoMVY4SDdhLjUuNSAwIDAgMS0uNS0uNVxcXCI+PC9wYXRoPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGZpbGwtcnVsZT1cXFwiZXZlbm9kZFxcXCIgZD1cXFwiTTggMTZBOCA4IDAgMSAxIDggMGE4IDggMCAwIDEgMCAxNm0wLTFBNyA3IDAgMSAwIDggMWE3IDcgMCAwIDAgMCAxNFxcXCIgY2xpcC1ydWxlPVxcXCJldmVub2RkXFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHZpZXdCb3g9XFxcIjAgMCAxNiAxNlxcXCI+PHBhdGggZmlsbD1cXFwiIzAwMFxcXCIgZmlsbC1ydWxlPVxcXCJldmVub2RkXFxcIiBkPVxcXCJNOCAyLjEyNSAxNC4zMzQgMTRIMS42Njd6bS0uODgyLS40N2ExIDEgMCAwIDEgMS43NjUgMGw2LjMzMyAxMS44NzRBMSAxIDAgMCAxIDE0LjMzNCAxNUgxLjY2N2ExIDEgMCAwIDEtLjg4Mi0xLjQ3ek04IDQuODc0YS45MDUuOTA1IDAgMCAwLS45Ljk5NWwuMzUgMy41MDdhLjU1Mi41NTIgMCAwIDAgMS4xIDBMOC45IDUuODdhLjkwNS45MDUgMCAwIDAtLjktLjk5NW0xIDdhMSAxIDAgMSAxLTIgMCAxIDEgMCAwIDEgMiAwXFxcIiBjbGlwLXJ1bGU9XFxcImV2ZW5vZGRcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDIwIDIwXFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBkPVxcXCJNOC41IDNBNS41IDUuNSAwIDAgMSAxNCA4LjVhNS41IDUuNSAwIDAgMS0xLjI3MyAzLjUyN2w0LjA1MyA0LjA1NGEuNzUuNzUgMCAxIDEtMS4wNiAxLjA2bC00LjA1NC00LjA1M2E1LjUgNS41IDAgMCAxLTMuNTI3IDEuMjczIDUuNSA1LjUgMCAxIDEgMC0xMUg4LjV6bTAgMS41aC0uMzYxYTQgNCAwIDEgMCAwIDggNCA0IDAgMCAwIDAtOHpcXFwiPjwvcGF0aD48cmVjdCB3aWR0aD1cXFwiMTlcXFwiIGhlaWdodD1cXFwiMTlcXFwiIHg9XFxcIi41XFxcIiB5PVxcXCIuNVxcXCIgc3Ryb2tlPVxcXCIjMDAwXFxcIiByeD1cXFwiMS41XFxcIj48L3JlY3Q+PC9zdmc+XCIiLCJpbXBvcnQgdHlwZSB7IFNwYXRpYWxSZWxhdGlvbnNoaXAsIFVuaXRzIH0gZnJvbSAnQGVzcmkvYXJjZ2lzLXJlc3QtZmVhdHVyZS1zZXJ2aWNlJ1xuaW1wb3J0IHR5cGUgeyBJbW11dGFibGVPYmplY3QsIEltbXV0YWJsZUFycmF5LCBTcWxFeHByZXNzaW9uLCBVc2VEYXRhU291cmNlLCBJY29uUmVzdWx0LCBPcmRlckJ5T3B0aW9uIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHR5cGUgeyBTaXplIH0gZnJvbSAnamltdS11aSdcblxuZXhwb3J0IGVudW0gQ3JlYXRlVG9vbFR5cGUge1xuICBQb2ludCA9ICdQb2ludCcsXG4gIFBvbHlsaW5lID0gJ1BvbHlsaW5lJyxcbiAgUG9seWdvbiA9ICdQb2x5Z29uJyxcbiAgUmVjdGFuZ2xlID0gJ1JlY3RhbmdsZScsXG4gIENpcmNsZSA9ICdDaXJjbGUnXG59XG5cbmV4cG9ydCBlbnVtIFNlbGVjdGlvblR5cGUge1xuICBOZXdTZWxlY3Rpb24gPSAnTkVXX1NFTEVDVElPTicsXG4gIEFkZFRvU2VsZWN0aW9uID0gJ0FERF9UT19DVVJSRU5UX1NFTEVDVElPTicsXG4gIFJlbW92ZUZyb21TZWxlY3Rpb24gPSAnUkVNT1ZFX0ZST01fQ1VSUkVOVF9TRUxFQ1RJT04nLFxuICBTdWJzZXRTZWxlY3Rpb24gPSAnU1VCU0VUX0ZST01fQ1VSUkVOVF9TRUxFQ1RJT04nLFxuICBTd2l0Y2hTZWxlY3Rpb24gPSAnU1dJVENIX0NVUlJFTlRfU0VMRUNUSU9OJyxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBGaWVsZCB7XG4gIG5hbWU6IHN0cmluZ1xuICBhbGlhcz86IHN0cmluZ1xuICBsYWJlbD86IHN0cmluZ1xufVxuXG5leHBvcnQgZW51bSBRdWVyeUFycmFuZ2VUeXBlIHtcbiAgQmxvY2sgPSAnQkxPQ0snLFxuICBJbmxpbmUgPSAnSU5MSU5FJyxcbiAgUG9wcGVyID0gJ1BPUFBFUicsXG59XG5cbmV4cG9ydCBlbnVtIFNwYXRpYWxGaWx0ZXJUeXBlIHtcbiAgQ3VycmVudE1hcEV4dGVudCA9ICdDdXJyZW50TWFwRXh0ZW50JyxcbiAgSW50ZXJhY3RpdmVEcmF3TW9kZSA9ICdJbnRlcmFjdGl2ZURyYXdNb2RlJyxcbiAgTm9uZSA9ICcnXG59XG5cbmV4cG9ydCBlbnVtIFNwYXRpYWxSZWxhdGlvbiB7XG4gIEludGVyc2VjdCA9ICdpbnRlcnNlY3RzJyxcbiAgQ29udGFpbiA9ICdjb250YWlucycsXG4gIENyb3NzID0gJ2Nyb3NzZXMnLFxuICBFbnZlbG9wZUludGVyc2VjdCA9ICdlbnZlbG9wZS1pbnRlcnNlY3RzJyxcbiAgSW5kZXhJbnRlcnNlY3QgPSAnaW5kZXgtaW50ZXJzZWN0cycsXG4gIE92ZXJsYXAgPSAnb3ZlcmxhcHMnLFxuICBUb3VjaCA9ICd0b3VjaGVzJyxcbiAgV2l0aGluID0gJ3dpdGhpbicsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3BhdGlhbEZpbHRlck9iaiB7XG4gIGdlb21ldHJ5OiBhbnlcbiAgZ3JhcGhpYz86IF9fZXNyaS5HcmFwaGljXG4gIGxheWVyPzogX19lc3JpLkdyYXBoaWNzTGF5ZXJcbiAgY2xlYXJBZnRlckFwcGx5PzogYm9vbGVhblxuICByZWxhdGlvbj86IFNwYXRpYWxSZWxhdGlvblxuICBidWZmZXI/OiB7IGRpc3RhbmNlOiBudW1iZXIsIHVuaXQ6IFVuaXRUeXBlIH1cbn1cblxuZXhwb3J0IGNvbnN0IG1hcEpTQVBJU3BhdGlhbFJlbFRvRHNTcGF0aWFsUmVsOiB7IFtrZXk6IHN0cmluZ106IFNwYXRpYWxSZWxhdGlvbnNoaXAgfSA9IHtcbiAgW1NwYXRpYWxSZWxhdGlvbi5JbnRlcnNlY3RdOiAnZXNyaVNwYXRpYWxSZWxJbnRlcnNlY3RzJyxcbiAgW1NwYXRpYWxSZWxhdGlvbi5Db250YWluXTogJ2VzcmlTcGF0aWFsUmVsQ29udGFpbnMnLFxuICBbU3BhdGlhbFJlbGF0aW9uLkNyb3NzXTogJ2VzcmlTcGF0aWFsUmVsQ3Jvc3NlcycsXG4gIFtTcGF0aWFsUmVsYXRpb24uRW52ZWxvcGVJbnRlcnNlY3RdOiAnZXNyaVNwYXRpYWxSZWxFbnZlbG9wZUludGVyc2VjdHMnLFxuICBbU3BhdGlhbFJlbGF0aW9uLkluZGV4SW50ZXJzZWN0XTogJ2VzcmlTcGF0aWFsUmVsSW5kZXhJbnRlcnNlY3RzJyxcbiAgW1NwYXRpYWxSZWxhdGlvbi5PdmVybGFwXTogJ2VzcmlTcGF0aWFsUmVsT3ZlcmxhcHMnLFxuICBbU3BhdGlhbFJlbGF0aW9uLlRvdWNoXTogJ2VzcmlTcGF0aWFsUmVsVG91Y2hlcycsXG4gIFtTcGF0aWFsUmVsYXRpb24uV2l0aGluXTogJ2VzcmlTcGF0aWFsUmVsV2l0aGluJ1xufVxuXG5leHBvcnQgZW51bSBVbml0VHlwZSB7XG4gIE1pbGVzID0gJ01pbGVzJyxcbiAgS2lsb21ldGVycyA9ICdLaWxvbWV0ZXJzJyxcbiAgRmVldCA9ICdGZWV0JyxcbiAgTWV0ZXJzID0gJ01ldGVycycsXG4gIE5hdXRpY2FsTWlsZXMgPSAnTmF1dGljYWxNaWxlcycsXG59XG5cbmV4cG9ydCBjb25zdCBtYXBKU0FQSVVuaXRUb0RzVW5pdDogeyBba2V5OiBzdHJpbmddOiBVbml0cyB9ID0ge1xuICBbVW5pdFR5cGUuTWlsZXNdOiAnZXNyaVNSVW5pdF9TdGF0dXRlTWlsZScsXG4gIFtVbml0VHlwZS5LaWxvbWV0ZXJzXTogJ2VzcmlTUlVuaXRfS2lsb21ldGVyJyxcbiAgW1VuaXRUeXBlLkZlZXRdOiAnZXNyaVNSVW5pdF9Gb290JyxcbiAgW1VuaXRUeXBlLk1ldGVyc106ICdlc3JpU1JVbml0X01ldGVyJyxcbiAgW1VuaXRUeXBlLk5hdXRpY2FsTWlsZXNdOiAnZXNyaVNSVW5pdF9OYXV0aWNhbE1pbGUnXG59XG5cbmV4cG9ydCBlbnVtIExpc3REaXJlY3Rpb24ge1xuICBIb3Jpem9udGFsID0gJ0hvcml6b250YWwnLFxuICBWZXJ0aWNhbCA9ICdWZXJ0aWNhbCcsXG59XG5cbmV4cG9ydCBlbnVtIFBhZ2luZ1R5cGUge1xuICBNdWx0aVBhZ2UgPSAnTXVsdGlQYWdlJyxcbiAgTGF6eUxvYWQgPSAnTGF6eUxvYWQnLFxuICBTaW1wbGUgPSAnU2ltcGxlJywgLy8gUmVuZGVyIGFsbCByZWNvcmRzIGF0IG9uY2UsIG5vIGxhenkgbG9hZGluZyBvciBwYWdpbmF0aW9uXG59XG5cbmV4cG9ydCBlbnVtIEZpZWxkc1R5cGUge1xuICBQb3B1cFNldHRpbmcgPSAnUG9wdXBTZXR0aW5nJyxcbiAgU2VsZWN0QXR0cmlidXRlcyA9ICdTZWxlY3RBdHRyaWJ1dGVzJyxcbn1cblxuZXhwb3J0IGVudW0gU29ydERpcmVjdGlvbiB7XG4gIEFzYyA9ICdBc2MnLFxuICBEZXNjID0gJ0Rlc2MnLFxufVxuXG5leHBvcnQgZW51bSBSZXN1bHRTZWxlY3RNb2RlIHtcbiAgU2luZ2xlID0gJ1NpbmdsZScsXG4gIE11bHRpcGxlID0gJ011bHRpcGxlJyxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTb3J0T3B0aW9uIHtcbiAgbmFtZTogc3RyaW5nXG4gIGRpcmVjdGlvbjogU29ydERpcmVjdGlvblxufVxuXG5leHBvcnQgZW51bSBTeW1ib2xUeXBlIHtcbiAgRGVmYXVsdFN5bWJvbCA9ICdEZWZhdWx0U3ltYm9sJyxcbiAgQ3VzdG9tU3ltYm9sID0gJ0N1c3RvbVN5bWJvbCcsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUXVlcnlJdGVtVHlwZSB7XG4gIGNvbmZpZ0lkOiBzdHJpbmdcbiAgaWNvbj86IEljb25SZXN1bHRcbiAgbmFtZT86IHN0cmluZ1xuICBkaXNwbGF5TGFiZWw/OiBib29sZWFuXG4gIHVzZURhdGFTb3VyY2U/OiBVc2VEYXRhU291cmNlXG4gIG91dHB1dERhdGFTb3VyY2VJZD86IHN0cmluZ1xuICB1c2VBdHRyaWJ1dGVGaWx0ZXI/OiBib29sZWFuXG4gIHVzZVNwYXRpYWxGaWx0ZXI/OiBib29sZWFuXG4gIGF0dHJpYnV0ZUZpbHRlckxhYmVsPzogc3RyaW5nXG4gIHNwYXRpYWxGaWx0ZXJMYWJlbD86IHN0cmluZ1xuICBhdHRyaWJ1dGVGaWx0ZXJEZXNjPzogc3RyaW5nXG4gIHNwYXRpYWxGaWx0ZXJEZXNjPzogc3RyaW5nXG4gIHJlc3VsdHNMYWJlbD86IHN0cmluZ1xuICBzcWxFeHByT2JqPzogU3FsRXhwcmVzc2lvblxuICBzcGF0aWFsTWFwV2lkZ2V0SWRzPzogc3RyaW5nW11cbiAgc3BhdGlhbEZpbHRlclR5cGVzPzogU3BhdGlhbEZpbHRlclR5cGVbXVxuICBzcGF0aWFsSW50ZXJhY3RpdmVDcmVhdGVUb29sVHlwZXM/OiBDcmVhdGVUb29sVHlwZVtdXG4gIHNwYXRpYWxJbnRlcmFjdGl2ZUVuYWJsZUJ1ZmZlcj86IGJvb2xlYW5cbiAgc3BhdGlhbEludGVyYWN0aXZlQnVmZmVyRGlzdGFuY2U/OiBudW1iZXJcbiAgc3BhdGlhbEludGVyYWN0aXZlQnVmZmVyVW5pdD86IFVuaXRUeXBlXG4gIHNwYXRpYWxSZWxhdGlvbnM/OiBTcGF0aWFsUmVsYXRpb25bXVxuICBzcGF0aWFsUmVsYXRpb25Vc2VEYXRhU291cmNlcz86IFVzZURhdGFTb3VyY2VbXVxuICBzcGF0aWFsUmVsYXRpb25FbmFibGVTZWxlY3RUb29sPzogYm9vbGVhblxuICBzcGF0aWFsUmVsYXRpb25FbmFibGVCdWZmZXI/OiBib29sZWFuXG4gIHNwYXRpYWxSZWxhdGlvbkJ1ZmZlckRpc3RhbmNlPzogbnVtYmVyXG4gIHNwYXRpYWxSZWxhdGlvbkJ1ZmZlclVuaXQ/OiBVbml0VHlwZVxuICBzcGF0aWFsSW5jbHVkZVJ1bnRpbWVEYXRhPzogYm9vbGVhblxuICByZXN1bHRMaXN0RGlyZWN0aW9uPzogTGlzdERpcmVjdGlvblxuICByZXN1bHRQYWdpbmdTdHlsZT86IFBhZ2luZ1R5cGVcbiAgcmVzdWx0RmllbGRzVHlwZT86IEZpZWxkc1R5cGVcbiAgcmVzdWx0VGl0bGVGaWVsZHM/OiBzdHJpbmdbXVxuICByZXN1bHRUaXRsZUV4cHJlc3Npb24/OiBzdHJpbmdcbiAgcmVzdWx0RGlzcGxheUZpZWxkcz86IHN0cmluZ1tdXG4gIHJlc3VsdFN5bWJvbFR5cGU/OiBTeW1ib2xUeXBlXG4gIHJlc3VsdEN1c3RvbVN5bWJvbD86IGFueVxuICByZXN1bHRBbGxvd0NoYW5nZVN5bWJvbD86IGJvb2xlYW5cbiAgcmVzdWx0RXhwYW5kQnlEZWZhdWx0PzogYm9vbGVhblxuICByZXN1bHRTZWxlY3RNb2RlPzogUmVzdWx0U2VsZWN0TW9kZVxuICBhbGxvd0V4cG9ydD86IGJvb2xlYW5cbiAgc29ydE9wdGlvbnM/OiBPcmRlckJ5T3B0aW9uW11cbiAgaXRlbVNpemVNYXA/OiB7XG4gICAgYXJyYW5nZW1lbnRIb3Jpem9udGFsUG9wcGVyPzogU2l6ZU1hcFxuICB9XG4gIC8vIEdyb3VwaW5nIGZpZWxkc1xuICBncm91cElkPzogc3RyaW5nXG4gIGdyb3VwRGlzcGxheU5hbWU/OiBzdHJpbmdcbiAgc2VhcmNoQWxpYXM/OiBzdHJpbmdcbiAgc2hvcnRJZD86IHN0cmluZ1xuICB6b29tVG9TZWxlY3RlZD86IGJvb2xlYW5cbiAgLy8gRGlzcGxheSBvcmRlciAobG93ZXIgbnVtYmVycyBhcHBlYXIgZmlyc3QsIG9wdGlvbmFsKVxuICBvcmRlcj86IG51bWJlclxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFNpemVNYXAge1xuICBtaW5TaXplPzogU2l6ZVxuICBkZWZhdWx0U2l6ZT86IFNpemVcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTZXR0aW5nQ29uZmlnIHtcbiAgcXVlcnlJdGVtcz86IEltbXV0YWJsZUFycmF5PFF1ZXJ5SXRlbVR5cGU+XG4gIGFycmFuZ2VUeXBlOiBRdWVyeUFycmFuZ2VUeXBlXG4gIGFycmFuZ2VXcmFwPzogYm9vbGVhblxuICByZXN1bHRMaXN0RGlyZWN0aW9uPzogTGlzdERpcmVjdGlvblxuICByZXN1bHRQYWdpbmdTdHlsZT86IFBhZ2luZ1R5cGVcbiAgbGF6eUxvYWRJbml0aWFsUGFnZVNpemU/OiBudW1iZXJcbiAgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodD86IGJvb2xlYW4gLy8gVXNlIGdyYXBoaWNzIGxheWVyIGZvciBoaWdobGlnaHRpbmcgKGluZGVwZW5kZW50IG9mIGxheWVyIHZpc2liaWxpdHkpXG4gIGhpZ2hsaWdodE1hcFdpZGdldElkPzogc3RyaW5nIC8vIE1hcCB3aWRnZXQgSUQgdG8gdXNlIGZvciBncmFwaGljcyBsYXllciBoaWdobGlnaHRpbmdcbiAgc2l6ZU1hcD86IHtcbiAgICBhcnJhbmdlbWVudEljb25Qb3BwZXI/OiBTaXplTWFwXG4gIH1cbn1cblxuZXhwb3J0IHR5cGUgSU1Db25maWcgPSBJbW11dGFibGVPYmplY3Q8U2V0dGluZ0NvbmZpZz5cblxuXG4iLCIvKipcbiAqIEN1c3RvbSBcIkFkZCB0byBNYXBcIiBkYXRhIGFjdGlvbiBmb3IgUXVlcnlTaW1wbGUgd2lkZ2V0LlxuICogXG4gKiBUaGlzIGFjdGlvbiByZXBsYWNlcyB0aGUgZnJhbWV3b3JrJ3MgXCJTaG93IG9uIE1hcFwiIGFjdGlvbiB3aXRoIGEgY3VzdG9tXG4gKiBpbXBsZW1lbnRhdGlvbiB0aGF0IHVzZXMgUXVlcnlTaW1wbGUncyBzZWxlY3Rpb24gcHJvY2VzcyAoc2VsZWN0UmVjb3Jkc0FuZFB1Ymxpc2gpLlxuICogVGhpcyBlbnN1cmVzIGNvbnNpc3RlbnQgYmVoYXZpb3Igd2l0aCBxdWVyeSByZXN1bHRzIGFuZCBwcm9wZXIgaW50ZWdyYXRpb25cbiAqIHdpdGggdGhlIHdpZGdldCdzIFwiQ2xlYXIgcmVzdWx0c1wiIGZ1bmN0aW9uYWxpdHkuXG4gKi9cblxuaW1wb3J0IHsgdHlwZSBEYXRhUmVjb3JkU2V0LCB0eXBlIERhdGFBY3Rpb24sIERhdGFMZXZlbCwgdHlwZSBJbnRsU2hhcGUsIERhdGFBY3Rpb25NYW5hZ2VyLCB0eXBlIERhdGFTb3VyY2UgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBzZWxlY3RSZWNvcmRzQW5kUHVibGlzaCB9IGZyb20gJy4uL3J1bnRpbWUvc2VsZWN0aW9uLXV0aWxzJ1xuaW1wb3J0IHsgY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlciB9IGZyb20gJ3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uJ1xuXG5jb25zdCBkZWJ1Z0xvZ2dlciA9IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIoKVxuaW1wb3J0IHR5cGUgeyBGZWF0dXJlRGF0YVJlY29yZCB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB0eXBlIHsgUXVlcnlJdGVtVHlwZSB9IGZyb20gJy4uL2NvbmZpZydcblxuLyoqXG4gKiBDcmVhdGVzIGEgY3VzdG9tIFwiQWRkIHRvIE1hcFwiIGRhdGEgYWN0aW9uIHRoYXQgdXNlcyBRdWVyeVNpbXBsZSdzIHNlbGVjdGlvbiBwcm9jZXNzLlxuICogXG4gKiBUaGlzIGFjdGlvbiByZXBsYWNlcyB0aGUgZnJhbWV3b3JrJ3MgXCJTaG93IG9uIE1hcFwiIGFjdGlvbiBhbmQgZW5zdXJlcyBjb25zaXN0ZW50XG4gKiBiZWhhdmlvciB3aXRoIFF1ZXJ5U2ltcGxlJ3MgcXVlcnkgcmVzdWx0cyBieSB1c2luZyB0aGUgc2FtZSBzZWxlY3Rpb24gbWVjaGFuaXNtLlxuICogXG4gKiBAcGFyYW0gd2lkZ2V0SWQgLSBUaGUgd2lkZ2V0IElEIHRoYXQgcHJvdmlkZXMgdGhpcyBhY3Rpb25cbiAqIEBwYXJhbSBvdXRwdXREUyAtIFRoZSBvdXRwdXQgZGF0YSBzb3VyY2UgKHVzZWQgZm9yIHNlbGVjdGlvbiBvbiB0aGUgb3JpZ2luIGxheWVyKVxuICogQHBhcmFtIGludGwgLSBUaGUgSW50bCBvYmplY3QgZm9yIGludGVybmF0aW9uYWxpemF0aW9uXG4gKiBAcGFyYW0gcXVlcnlJdGVtIC0gT3B0aW9uYWwgcXVlcnkgaXRlbSBjb25maWd1cmF0aW9uIChmb3Igem9vbVRvU2VsZWN0ZWQgc2V0dGluZylcbiAqIEBwYXJhbSBydW50aW1lWm9vbVRvU2VsZWN0ZWQgLSBPcHRpb25hbCBydW50aW1lIHpvb20gb3ZlcnJpZGUgZnJvbSB0aGUgcXVlcnkgZm9ybVxuICogQHJldHVybnMgQSBEYXRhQWN0aW9uIG9iamVjdCB0aGF0IGNhbiBiZSB1c2VkIGJ5IERhdGFBY3Rpb25MaXN0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVBZGRUb01hcEFjdGlvbihcbiAgd2lkZ2V0SWQ6IHN0cmluZyxcbiAgb3V0cHV0RFM6IERhdGFTb3VyY2UsXG4gIGludGw6IEludGxTaGFwZSxcbiAgcXVlcnlJdGVtPzogUXVlcnlJdGVtVHlwZSxcbiAgcnVudGltZVpvb21Ub1NlbGVjdGVkPzogYm9vbGVhblxuKTogRGF0YUFjdGlvbiB7XG4gIHJldHVybiB7XG4gICAgaWQ6IGAke3dpZGdldElkfS1hZGRUb01hcGAsXG4gICAgbmFtZTogJ2FkZFRvTWFwJyxcbiAgICBsYWJlbDogaW50bC5mb3JtYXRNZXNzYWdlKHsgaWQ6ICdhZGRUb01hcCcsIGRlZmF1bHRNZXNzYWdlOiAnQWRkIHRvIG1hcCcgfSksXG4gICAgLy8gSWNvbiBtYXRjaGVzIHRoZSBmcmFtZXdvcmsncyBcIlNob3cgb24gTWFwXCIgYWN0aW9uIGZvciBjb25zaXN0ZW5jeVxuICAgIGljb246IHJlcXVpcmUoJy4uL3J1bnRpbWUvYXNzZXRzL2ljb25zL3Nob3ctb24tbWFwLnN2ZycpLmRlZmF1bHQgfHwgcmVxdWlyZSgnLi4vcnVudGltZS9hc3NldHMvaWNvbnMvc2hvdy1vbi1tYXAuc3ZnJyksXG4gICAgLy8gTm90ZTogSW5kZXggbWF5IG5vdCBjb250cm9sIHBvc2l0aW9uIGlmIGV4dHJhQWN0aW9ucyBhcmUgYWx3YXlzIGFwcGVuZGVkIGFmdGVyIGZyYW1ld29yayBhY3Rpb25zXG4gICAgaW5kZXg6IC0xMDAsXG4gICAgd2lkZ2V0SWQsXG4gICAgaW50bCxcbiAgICBzdXBwb3J0UHJvdmlkZXJXaWRnZXQ6IHRydWUsXG4gICAgXG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lcyBpZiB0aGlzIGFjdGlvbiBjYW4gcHJvY2VzcyB0aGUgZ2l2ZW4gZGF0YSBzZXRzLlxuICAgICAqIFN1cHBvcnRzIFJlY29yZHMgbGV2ZWwgYWN0aW9ucyB3aXRoIGZlYXR1cmUgZGF0YSByZWNvcmRzLlxuICAgICAqL1xuICAgIGlzU3VwcG9ydGVkOiBhc3luYyAoZGF0YVNldHM6IERhdGFSZWNvcmRTZXRbXSwgZGF0YUxldmVsOiBEYXRhTGV2ZWwsIGFjdGlvbldpZGdldElkOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+ID0+IHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnREFUQS1BQ1RJT04nLCB7XG4gICAgICAgIGFjdGlvbjogJ2FkZFRvTWFwLWlzU3VwcG9ydGVkJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIGFjdGlvbldpZGdldElkLFxuICAgICAgICBkYXRhTGV2ZWwsXG4gICAgICAgIGRhdGFTZXRzQ291bnQ6IGRhdGFTZXRzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgaGFzT3V0cHV0RFM6ICEhb3V0cHV0RFNcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIC8vIE9ubHkgc3VwcG9ydCBSZWNvcmRzIGxldmVsIGFjdGlvbnNcbiAgICAgIGlmIChkYXRhTGV2ZWwgIT09IERhdGFMZXZlbC5SZWNvcmRzKSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnREFUQS1BQ1RJT04nLCB7XG4gICAgICAgICAgYWN0aW9uOiAnYWRkVG9NYXAtaXNTdXBwb3J0ZWQnLFxuICAgICAgICAgIHJlc3VsdDogZmFsc2UsXG4gICAgICAgICAgcmVhc29uOiAnTm90IFJlY29yZHMgbGV2ZWwnXG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBOZWVkIGF0IGxlYXN0IG9uZSBkYXRhIHNldCB3aXRoIHJlY29yZHNcbiAgICAgIGlmICghZGF0YVNldHMgfHwgZGF0YVNldHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnREFUQS1BQ1RJT04nLCB7XG4gICAgICAgICAgYWN0aW9uOiAnYWRkVG9NYXAtaXNTdXBwb3J0ZWQnLFxuICAgICAgICAgIHJlc3VsdDogZmFsc2UsXG4gICAgICAgICAgcmVhc29uOiAnTm8gZGF0YSBzZXRzJ1xuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgaWYgd2UgaGF2ZSByZWNvcmRzIGFuZCBvdXRwdXQgZGF0YSBzb3VyY2VcbiAgICAgIGNvbnN0IGhhc1JlY29yZHMgPSBkYXRhU2V0cy5zb21lKGRzID0+IGRzLnJlY29yZHMgJiYgZHMucmVjb3Jkcy5sZW5ndGggPiAwKVxuICAgICAgY29uc3Qgc3VwcG9ydGVkID0gaGFzUmVjb3JkcyAmJiAhIW91dHB1dERTXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnREFUQS1BQ1RJT04nLCB7XG4gICAgICAgIGFjdGlvbjogJ2FkZFRvTWFwLWlzU3VwcG9ydGVkJyxcbiAgICAgICAgcmVzdWx0OiBzdXBwb3J0ZWQsXG4gICAgICAgIGhhc1JlY29yZHMsXG4gICAgICAgIHJlY29yZHNDb3VudDogZGF0YVNldHMucmVkdWNlKChzdW0sIGRzKSA9PiBzdW0gKyAoZHMucmVjb3Jkcz8ubGVuZ3RoIHx8IDApLCAwKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgcmV0dXJuIHN1cHBvcnRlZFxuICAgIH0sXG4gICAgXG4gICAgLyoqXG4gICAgICogRXhlY3V0ZXMgdGhlIGFjdGlvbiBieSBzZWxlY3RpbmcgcmVjb3JkcyB1c2luZyBRdWVyeVNpbXBsZSdzIHNlbGVjdGlvbiBwcm9jZXNzLlxuICAgICAqL1xuICAgIG9uRXhlY3V0ZTogYXN5bmMgKGRhdGFTZXRzOiBEYXRhUmVjb3JkU2V0W10sIGRhdGFMZXZlbDogRGF0YUxldmVsLCBhY3Rpb25XaWRnZXRJZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiA9PiB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0RBVEEtQUNUSU9OJywge1xuICAgICAgICBhY3Rpb246ICdhZGRUb01hcC1vbkV4ZWN1dGUnLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgYWN0aW9uV2lkZ2V0SWQsXG4gICAgICAgIGRhdGFMZXZlbCxcbiAgICAgICAgZGF0YVNldHNDb3VudDogZGF0YVNldHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICBoYXNPdXRwdXREUzogISFvdXRwdXREU1xuICAgICAgfSlcbiAgICAgIFxuICAgICAgaWYgKCFvdXRwdXREUyB8fCBkYXRhTGV2ZWwgIT09IERhdGFMZXZlbC5SZWNvcmRzKSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnREFUQS1BQ1RJT04nLCB7XG4gICAgICAgICAgYWN0aW9uOiAnYWRkVG9NYXAtb25FeGVjdXRlJyxcbiAgICAgICAgICByZXN1bHQ6IGZhbHNlLFxuICAgICAgICAgIHJlYXNvbjogIW91dHB1dERTID8gJ05vIG91dHB1dERTJyA6ICdOb3QgUmVjb3JkcyBsZXZlbCdcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIENvbGxlY3QgYWxsIHJlY29yZHMgZnJvbSBhbGwgZGF0YSBzZXRzXG4gICAgICBjb25zdCBhbGxSZWNvcmRzOiBGZWF0dXJlRGF0YVJlY29yZFtdID0gW11cbiAgICAgIGRhdGFTZXRzLmZvckVhY2goZGF0YVNldCA9PiB7XG4gICAgICAgIGlmIChkYXRhU2V0LnJlY29yZHMgJiYgZGF0YVNldC5yZWNvcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAvLyBGaWx0ZXIgdG8gb25seSBGZWF0dXJlRGF0YVJlY29yZCB0eXBlc1xuICAgICAgICAgIGNvbnN0IGZlYXR1cmVSZWNvcmRzID0gZGF0YVNldC5yZWNvcmRzLmZpbHRlcihcbiAgICAgICAgICAgIChyZWNvcmQpOiByZWNvcmQgaXMgRmVhdHVyZURhdGFSZWNvcmQgPT4ge1xuICAgICAgICAgICAgICByZXR1cm4gcmVjb3JkICYmIHR5cGVvZiAocmVjb3JkIGFzIEZlYXR1cmVEYXRhUmVjb3JkKS5nZXRHZW9tZXRyeSA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICAgICAgfVxuICAgICAgICAgIClcbiAgICAgICAgICBhbGxSZWNvcmRzLnB1c2goLi4uZmVhdHVyZVJlY29yZHMpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGlmIChhbGxSZWNvcmRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0RBVEEtQUNUSU9OJywge1xuICAgICAgICAgIGFjdGlvbjogJ2FkZFRvTWFwLW9uRXhlY3V0ZScsXG4gICAgICAgICAgcmVzdWx0OiBmYWxzZSxcbiAgICAgICAgICByZWFzb246ICdObyBmZWF0dXJlIHJlY29yZHMgZm91bmQnXG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBHZXQgcmVjb3JkIElEc1xuICAgICAgY29uc3QgcmVjb3JkSWRzID0gYWxsUmVjb3Jkcy5tYXAocmVjb3JkID0+IHJlY29yZC5nZXRJZCgpKVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0RBVEEtQUNUSU9OJywge1xuICAgICAgICBhY3Rpb246ICdhZGRUb01hcC1vbkV4ZWN1dGUnLFxuICAgICAgICByZWNvcmRzQ291bnQ6IGFsbFJlY29yZHMubGVuZ3RoLFxuICAgICAgICByZWNvcmRJZHM6IHJlY29yZElkcy5zbGljZSgwLCAxMCksIC8vIExvZyBmaXJzdCAxMCBJRHNcbiAgICAgICAgb3V0cHV0RFNJZDogb3V0cHV0RFMuaWRcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIC8vIFVzZSBRdWVyeVNpbXBsZSdzIHNlbGVjdGlvbiBwcm9jZXNzIC0gc2VsZWN0cyBvbiBvcmlnaW4gbGF5ZXIgYW5kIHB1Ymxpc2hlcyBzZWxlY3Rpb24gbWVzc2FnZXNcbiAgICAgIC8vIFRoaXMgZW5zdXJlcyBjb25zaXN0ZW50IGJlaGF2aW9yIHdpdGggcXVlcnkgcmVzdWx0cyBhbmQgcHJvcGVyIGludGVncmF0aW9uIHdpdGggXCJDbGVhciByZXN1bHRzXCJcbiAgICAgIHRyeSB7XG4gICAgICAgIHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoKHdpZGdldElkLCBvdXRwdXREUywgcmVjb3JkSWRzLCBhbGxSZWNvcmRzLCB0cnVlKVxuICAgICAgICBcbiAgICAgICAgLy8gRGV0ZXJtaW5lIHpvb20gYmVoYXZpb3I6IHJ1bnRpbWUgb3ZlcnJpZGUgdGFrZXMgcHJlY2VkZW5jZSwgdGhlbiBxdWVyeUl0ZW0gY29uZmlnLCBkZWZhdWx0cyB0byB0cnVlXG4gICAgICAgIGNvbnN0IHNob3VsZFpvb20gPSBydW50aW1lWm9vbVRvU2VsZWN0ZWQgIT09IHVuZGVmaW5lZCBcbiAgICAgICAgICA/IHJ1bnRpbWVab29tVG9TZWxlY3RlZCBcbiAgICAgICAgICA6IChxdWVyeUl0ZW0/Lnpvb21Ub1NlbGVjdGVkICE9PSBmYWxzZSlcbiAgICAgICAgXG4gICAgICAgIGlmIChzaG91bGRab29tICYmIGFsbFJlY29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGNvbnN0IHpvb21EYXRhU2V0OiBEYXRhUmVjb3JkU2V0ID0ge1xuICAgICAgICAgICAgZGF0YVNvdXJjZTogb3V0cHV0RFMsXG4gICAgICAgICAgICByZWNvcmRzOiBhbGxSZWNvcmRzLFxuICAgICAgICAgICAgbmFtZTogb3V0cHV0RFMuZ2V0TGFiZWwoKVxuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAvLyBGaW5kIGFuZCBleGVjdXRlIHRoZSB6b29tVG9GZWF0dXJlIGFjdGlvbiBmcm9tIGF2YWlsYWJsZSBmcmFtZXdvcmsgYWN0aW9uc1xuICAgICAgICAgIERhdGFBY3Rpb25NYW5hZ2VyLmdldEluc3RhbmNlKCkuZ2V0U3VwcG9ydGVkQWN0aW9ucyh3aWRnZXRJZCwgW3pvb21EYXRhU2V0XSwgRGF0YUxldmVsLlJlY29yZHMpXG4gICAgICAgICAgICAudGhlbihhY3Rpb25DYXRlZ29yaWVzID0+IHtcbiAgICAgICAgICAgICAgLy8gU2VhcmNoIHRocm91Z2ggYWxsIGFjdGlvbiBjYXRlZ29yaWVzIHRvIGZpbmQgem9vbVRvRmVhdHVyZSBhY3Rpb25cbiAgICAgICAgICAgICAgbGV0IHpvb21BY3Rpb246IERhdGFBY3Rpb24gfCBudWxsID0gbnVsbFxuICAgICAgICAgICAgICBmb3IgKGNvbnN0IGNhdGVnb3J5IGluIGFjdGlvbkNhdGVnb3JpZXMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhY3Rpb25zID0gYWN0aW9uQ2F0ZWdvcmllc1tjYXRlZ29yeV1cbiAgICAgICAgICAgICAgICB6b29tQWN0aW9uID0gYWN0aW9ucy5maW5kKChhY3Rpb246IERhdGFBY3Rpb24pID0+IFxuICAgICAgICAgICAgICAgICAgYWN0aW9uLm5hbWUgPT09ICd6b29tVG9GZWF0dXJlJyB8fCBhY3Rpb24uaWQgPT09ICd6b29tVG9GZWF0dXJlJ1xuICAgICAgICAgICAgICAgICkgfHwgbnVsbFxuICAgICAgICAgICAgICAgIGlmICh6b29tQWN0aW9uKSBicmVha1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICBpZiAoem9vbUFjdGlvbikge1xuICAgICAgICAgICAgICAgIHJldHVybiBEYXRhQWN0aW9uTWFuYWdlci5nZXRJbnN0YW5jZSgpLmV4ZWN1dGVEYXRhQWN0aW9uKHpvb21BY3Rpb24sIFt6b29tRGF0YVNldF0sIERhdGFMZXZlbC5SZWNvcmRzLCB3aWRnZXRJZClcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnREFUQS1BQ1RJT04nLCB7XG4gICAgICAgICAgICAgICAgYWN0aW9uOiAnYWRkVG9NYXAtb25FeGVjdXRlLXpvb20nLFxuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcilcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnREFUQS1BQ1RJT04nLCB7XG4gICAgICAgICAgYWN0aW9uOiAnYWRkVG9NYXAtb25FeGVjdXRlJyxcbiAgICAgICAgICByZXN1bHQ6IHRydWUsXG4gICAgICAgICAgbWVzc2FnZTogJ1N1Y2Nlc3NmdWxseSBzZWxlY3RlZCByZWNvcmRzIGFuZCBwdWJsaXNoZWQgc2VsZWN0aW9uIG1lc3NhZ2UnLFxuICAgICAgICAgIHpvb21FeGVjdXRlZDogc2hvdWxkWm9vbVxuICAgICAgICB9KVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnREFUQS1BQ1RJT04nLCB7XG4gICAgICAgICAgYWN0aW9uOiAnYWRkVG9NYXAtb25FeGVjdXRlJyxcbiAgICAgICAgICByZXN1bHQ6IGZhbHNlLFxuICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvciksXG4gICAgICAgICAgZXJyb3JTdGFjazogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnN0YWNrIDogdW5kZWZpbmVkXG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgIH0sXG4gICAgXG4gICAgLyoqXG4gICAgICogQ2xlYW51cCBtZXRob2QgKHJlcXVpcmVkIGJ5IERhdGFBY3Rpb24gaW50ZXJmYWNlKVxuICAgICAqL1xuICAgIGRlc3Ryb3k6ICgpOiB2b2lkID0+IHtcbiAgICAgIC8vIE5vIGNsZWFudXAgbmVlZGVkXG4gICAgfVxuICB9XG59XG5cbiIsImltcG9ydCB7IHR5cGUgRGF0YVJlY29yZFNldCwgdHlwZSBEYXRhQWN0aW9uLCBEYXRhTGV2ZWwsIHR5cGUgRGF0YVNvdXJjZSwgdHlwZSBJbnRsU2hhcGUgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBjcmVhdGVBZGRUb01hcEFjdGlvbiB9IGZyb20gJy4vYWRkLXRvLW1hcC1hY3Rpb24nXG5pbXBvcnQgdHlwZSB7IFF1ZXJ5SXRlbVR5cGUgfSBmcm9tICcuLi9jb25maWcnXG5cbi8qKlxuICogUXVlcnlTaW1wbGUgQ3VzdG9tIERhdGEgQWN0aW9uc1xuICogXG4gKiBSZXR1cm5zIGN1c3RvbSBkYXRhIGFjdGlvbnMgZm9yIHRoZSB3aWRnZXQuXG4gKiBJbmNsdWRlcyBhIGN1c3RvbSBcIkFkZCB0byBNYXBcIiBhY3Rpb24gdGhhdCB1c2VzIFF1ZXJ5U2ltcGxlJ3Mgc2VsZWN0aW9uIHByb2Nlc3MuXG4gKiBcbiAqIEBwYXJhbSB3aWRnZXRJZCAtIFRoZSB3aWRnZXQgSURcbiAqIEBwYXJhbSBvdXRwdXREUyAtIFRoZSBvdXRwdXQgZGF0YSBzb3VyY2UgKG51bGwvdW5kZWZpbmVkIGlmIG5vdCBhdmFpbGFibGUpXG4gKiBAcGFyYW0gaW50bCAtIFRoZSBJbnRsIG9iamVjdCBmb3IgaW50ZXJuYXRpb25hbGl6YXRpb25cbiAqIEBwYXJhbSBxdWVyeUl0ZW0gLSBPcHRpb25hbCBxdWVyeSBpdGVtIGNvbmZpZ3VyYXRpb25cbiAqIEBwYXJhbSBydW50aW1lWm9vbVRvU2VsZWN0ZWQgLSBPcHRpb25hbCBydW50aW1lIHpvb20gb3ZlcnJpZGUgZnJvbSB0aGUgcXVlcnkgZm9ybVxuICogQHJldHVybnMgQXJyYXkgb2YgY3VzdG9tIERhdGFBY3Rpb24gb2JqZWN0cyAoZW1wdHkgaWYgY29uZGl0aW9ucyBub3QgbWV0KVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RXh0cmFBY3Rpb25zIChcbiAgd2lkZ2V0SWQ6IHN0cmluZyxcbiAgb3V0cHV0RFM6IERhdGFTb3VyY2UgfCBudWxsIHwgdW5kZWZpbmVkLFxuICBpbnRsOiBJbnRsU2hhcGUsXG4gIHF1ZXJ5SXRlbT86IFF1ZXJ5SXRlbVR5cGUsXG4gIHJ1bnRpbWVab29tVG9TZWxlY3RlZD86IGJvb2xlYW5cbik6IERhdGFBY3Rpb25bXSB7XG4gIC8vIE9ubHkgY3JlYXRlIHRoZSBhY3Rpb24gaWYgd2UgaGF2ZSBib3RoIGFuIG91dHB1dCBkYXRhIHNvdXJjZSBhbmQgaW50bCBvYmplY3RcbiAgaWYgKG91dHB1dERTICYmIGludGwpIHtcbiAgICByZXR1cm4gW2NyZWF0ZUFkZFRvTWFwQWN0aW9uKHdpZGdldElkLCBvdXRwdXREUywgaW50bCwgcXVlcnlJdGVtLCBydW50aW1lWm9vbVRvU2VsZWN0ZWQpXVxuICB9XG4gIFxuICByZXR1cm4gW11cbn1cblxuIiwiaW1wb3J0IHtcbiAgdHlwZSBRdWVyeUl0ZW1UeXBlLFxuICBDcmVhdGVUb29sVHlwZSxcbiAgVW5pdFR5cGUsXG4gIFNwYXRpYWxSZWxhdGlvbixcbiAgTGlzdERpcmVjdGlvbixcbiAgUGFnaW5nVHlwZSxcbiAgRmllbGRzVHlwZSxcbiAgU3ltYm9sVHlwZVxufSBmcm9tICcuL2NvbmZpZydcblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfUVVFUllfSVRFTTogUGFydGlhbDxRdWVyeUl0ZW1UeXBlPiA9IHtcbiAgaWNvbjogbnVsbCxcbiAgZGlzcGxheUxhYmVsOiB0cnVlLFxuICBzcWxFeHByT2JqOiBudWxsLFxuICB1c2VBdHRyaWJ1dGVGaWx0ZXI6IHRydWUsXG4gIHVzZVNwYXRpYWxGaWx0ZXI6IHRydWUsXG4gIHNwYXRpYWxNYXBXaWRnZXRJZHM6IFtdLFxuICBzcGF0aWFsRmlsdGVyVHlwZXM6IFtdLFxuICBzcGF0aWFsSW50ZXJhY3RpdmVDcmVhdGVUb29sVHlwZXM6IFtcbiAgICBDcmVhdGVUb29sVHlwZS5Qb2ludCxcbiAgICBDcmVhdGVUb29sVHlwZS5Qb2x5bGluZSxcbiAgICBDcmVhdGVUb29sVHlwZS5Qb2x5Z29uLFxuICAgIENyZWF0ZVRvb2xUeXBlLlJlY3RhbmdsZSxcbiAgICBDcmVhdGVUb29sVHlwZS5DaXJjbGVcbiAgXSxcbiAgc3BhdGlhbEludGVyYWN0aXZlRW5hYmxlQnVmZmVyOiBmYWxzZSxcbiAgc3BhdGlhbEludGVyYWN0aXZlQnVmZmVyRGlzdGFuY2U6IDAsXG4gIHNwYXRpYWxJbnRlcmFjdGl2ZUJ1ZmZlclVuaXQ6IFVuaXRUeXBlLk1ldGVycyxcbiAgc3BhdGlhbFJlbGF0aW9uczogW1NwYXRpYWxSZWxhdGlvbi5JbnRlcnNlY3RdLFxuICBzcGF0aWFsUmVsYXRpb25Vc2VEYXRhU291cmNlczogW10sXG4gIHNwYXRpYWxSZWxhdGlvbkVuYWJsZVNlbGVjdFRvb2w6IGZhbHNlLFxuICBzcGF0aWFsUmVsYXRpb25FbmFibGVCdWZmZXI6IGZhbHNlLFxuICBzcGF0aWFsUmVsYXRpb25CdWZmZXJEaXN0YW5jZTogMCxcbiAgc3BhdGlhbFJlbGF0aW9uQnVmZmVyVW5pdDogVW5pdFR5cGUuTWV0ZXJzLFxuICByZXN1bHRMaXN0RGlyZWN0aW9uOiBMaXN0RGlyZWN0aW9uLlZlcnRpY2FsLFxuICByZXN1bHRQYWdpbmdTdHlsZTogUGFnaW5nVHlwZS5NdWx0aVBhZ2UsXG4gIHJlc3VsdEZpZWxkc1R5cGU6IEZpZWxkc1R5cGUuUG9wdXBTZXR0aW5nLFxuICByZXN1bHRTeW1ib2xUeXBlOiBTeW1ib2xUeXBlLkRlZmF1bHRTeW1ib2wsXG4gIHJlc3VsdEN1c3RvbVN5bWJvbDoge1xuICAgIGFuZ2xlOiAwLFxuICAgIGNvbG9yOiBbMjU1LCAyNTUsIDI1NSwgMjU1XSxcbiAgICBvdXRsaW5lOiB7XG4gICAgICBjb2xvcjogWzI1NSwgMjU1LCAyNTUsIDI1NV0sXG4gICAgICBzdHlsZTogJ2VzcmlTTFNTb2xpZCcsXG4gICAgICB0eXBlOiAnZXNyaVNMUycsXG4gICAgICB3aWR0aDogMVxuICAgIH0sXG4gICAgc2l6ZTogNixcbiAgICBzdHlsZTogJ2VzcmlTTVNDaXJjbGUnLFxuICAgIHR5cGU6ICdlc3JpU01TJyxcbiAgICB4b2Zmc2V0OiAwLFxuICAgIHlvZmZzZXQ6IDBcbiAgfSxcbiAgcmVzdWx0QWxsb3dDaGFuZ2VTeW1ib2w6IGZhbHNlLFxuICBhbGxvd0V4cG9ydDogZmFsc2UsXG4gIHNvcnRPcHRpb25zOiBbXSxcbiAgem9vbVRvU2VsZWN0ZWQ6IHRydWUsXG4gIGl0ZW1TaXplTWFwOiB7XG4gICAgYXJyYW5nZW1lbnRIb3Jpem9udGFsUG9wcGVyOiB7XG4gICAgICBtaW5TaXplOiB7IHdpZHRoOiAzMDAsIGhlaWdodDogMzAwIH0sXG4gICAgICBkZWZhdWx0U2l6ZTogeyB3aWR0aDogMzYwLCBoZWlnaHQ6IDQ4MCB9XG4gICAgfVxuICB9XG59XG5cblxuIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGQ9XFxcIk0xIDF2MTRoMTRWMXptOS4wODIgMTNjLS4wMDUtLjAzNy0uMTEzLS4yNzQtLjEyMi0uMzA5YTEuNSAxLjUgMCAwIDAgLjcxOC0xLjI2NyAxLjIgMS4yIDAgMCAwLS4wNTMtLjM1OGMuMTUyLS4xNzYuMjYzLS4zODMuMzI2LS42MDdxLjA0Ni4wMDMuMDkzLjAwM2MuMy4wMDIuNTkzLS4wOTEuODM2LS4yNjZxLjA2LjA2Ni4xMjYuMTI0Yy40Mi40MTIuOTc3LjY1NCAxLjU2NC42OEgxNHYyaC0zLjkxOE0xNCAxMWgtLjQzYTEuNDYgMS40NiAwIDAgMS0uOTA2LS40MzNjLS4yNjQtLjIzLS4yNTgtLjc4Mi0uNjE3LS43ODItLjQ4MiAwLS41Mi42NzctMS4wMDMuNjc3LS4yMTkgMC0uMzgtLjE3Ny0uNTk5LS4xNzctLjE5MyAwLS40NDUuMTAyLS40NDUuMjkzdi41MDJjMCAuNDI0LS41MDYuNTA4LS41MDYuOTM0IDAgLjE3MS4xODQuMjM2LjE4NC40MSAwIC41OC0uODkzLjUwMi0uODkzIDEuMDggMCAuMTkxLjIxNS4zMDUuMjE1LjQ4NlYxNEg2LjM3NXEuMDg3LS4yNDMuMDktLjUwMmMwLS41NDctMS4wNDMtLjM5My0xLjIwNy0uNzItLjQwNy0uODEzLjY5My0xLjAyMi42OTMtMS42NzMgMC0uMTYtLjA4Mi0uNDg4LS4zMzQtLjUxMy0uMzUxLS4wMzUtLjQ0My4xNTQtLjc5Ny4xNTRhLjQwNi40MDYgMCAwIDEtLjQzNy0uMzZjMC0uMzg2LjMwOC0uNTY2LjMwOC0uOTUyIDAtLjI1LS4xMDItLjM5My0uMTAyLS42NDNhLjYyLjYyIDAgMCAxIC41OS0uNjQzYy4zMjMgMCAuNDY0LjI2NC42MTguNTRhLjY0LjY0IDAgMCAwIC42MTcuMzA4Yy40OSAwIC43OTgtLjYxLjc5OC0uOTc3YS40Ny40NyAwIDAgMSAuNDM3LS40ODhjLjM0NyAwIC40NzYuMzYuODI0LjM2LjU3IDAgLjU1LS43NTYgMS4wNTMtMS4wMy42MTgtLjMzMi40MzgtMS4wNTIuMzYtMS40NC0uMDMyLS4xNjkuMjktLjUuNDY0LS40ODcuNzIuMDUuNDEyLS41NC40MTItLjgyM3EwLS4wNzMuMDIyLS4xNDJjLjExMS0uMzMyLjU5NS0uNDM4LjU5NS0uODM2IDAtLjI4MS0uMjMzLS40MS0uMjMzLS42OTNhLjY1LjY1IDAgMCAxIC4yMi0uNDRIMTR6TTIgMTRWMmg4LjI3OGMtLjAxMy4wNzctLjEzMi4zNTYtLjEzMi40NCAwIC4xOTQuMDM4LjM4Ny4xMTIuNTY3YTEuNiAxLjYgMCAwIDAtLjQyMi42NDMgMS40IDEuNCAwIDAgMC0uMDc0LjQ0MiAxLjcgMS43IDAgMCAwLS41MzYuNDMgMS4zMiAxLjMyIDAgMCAwLS4zMiAxLjA5MXEuMDQ2LjIwNS4wNjYuNDE0YTIgMiAwIDAgMC0uNjQ5LjY3IDEuNDYgMS40NiAwIDAgMC0uNjc0LS4xNjYgMS40NSAxLjQ1IDAgMCAwLTEuMzgzIDEuMDg2IDEuNDQgMS40NCAwIDAgMC0xLjA4Ni0uNDY5IDEuNjIgMS42MiAwIDAgMC0xLjU5MSAxLjY0M2MwIC4yNTQuMTEzLjI5My4wODQuNTc0cy0uMjkuNTM1LS4yOSAxLjAyMmExLjM3IDEuMzcgMCAwIDAgLjk4NCAxLjI5IDEuNTggMS41OCAwIDAgMC0uMDAzIDEuNTQ5Yy4xNDMuMjg2LjYzNi43NzQuNTM0Ljc3NHpcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIi8qKiBAanN4IGpzeCAqL1xyXG5pbXBvcnQge1xyXG4gIFJlYWN0LFxyXG4gIGpzeCxcclxuICBob29rc1xyXG59IGZyb20gJ2ppbXUtY29yZSdcclxuaW1wb3J0IHsgU2VsZWN0LCBOdW1lcmljSW5wdXQsIGRlZmF1bHRNZXNzYWdlcyBhcyBqaW11VUlNZXNzYWdlcyB9IGZyb20gJ2ppbXUtdWknXHJcbmltcG9ydCB7IFVuaXRUeXBlIH0gZnJvbSAnLi4vY29uZmlnJ1xyXG5pbXBvcnQgZGVmYXVsdE1lc3NhZ2UgZnJvbSAnLi90cmFuc2xhdGlvbnMvZGVmYXVsdCdcclxuaW1wb3J0IHsgUXVlcnlUYXNrQ29udGV4dCB9IGZyb20gJy4vcXVlcnktdGFzay1jb250ZXh0J1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBQcm9wcyB7XHJcbiAgZGlzdGFuY2U6IG51bWJlclxyXG4gIHVuaXQ6IFVuaXRUeXBlXHJcbiAgb25CdWZmZXJDaGFuZ2U6IChkaXN0YW5jZTogbnVtYmVyLCB1bml0OiBVbml0VHlwZSkgPT4gdm9pZFxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gQnVmZmVySW5wdXQgKHByb3BzOiBQcm9wcykge1xyXG4gIGNvbnN0IHsgZGlzdGFuY2UgPSAwLCB1bml0ID0gVW5pdFR5cGUuTWV0ZXJzLCBvbkJ1ZmZlckNoYW5nZSB9ID0gcHJvcHNcclxuICBjb25zdCBnZXRJMThuTWVzc2FnZSA9IGhvb2tzLnVzZVRyYW5zbGF0aW9uKGppbXVVSU1lc3NhZ2VzLCBkZWZhdWx0TWVzc2FnZSlcclxuICBjb25zdCBbZCwgc2V0RF0gPSBSZWFjdC51c2VTdGF0ZShkaXN0YW5jZSlcclxuICBjb25zdCBbdSwgc2V0VV0gPSBSZWFjdC51c2VTdGF0ZSh1bml0KVxyXG4gIGNvbnN0IHF1ZXJ5VGFza0NvbnRleHQgPSBSZWFjdC51c2VDb250ZXh0KFF1ZXJ5VGFza0NvbnRleHQpXHJcbiAgY29uc3QgcmVzZXRTeW1ib2xSZWYgPSBSZWFjdC51c2VSZWYocXVlcnlUYXNrQ29udGV4dC5yZXNldFN5bWJvbClcclxuXHJcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGxldCBjaGFuZ2VkID0gZmFsc2VcclxuICAgIGlmIChkaXN0YW5jZSAhPT0gZCkge1xyXG4gICAgICBzZXREKGRpc3RhbmNlKVxyXG4gICAgICBjaGFuZ2VkID0gdHJ1ZVxyXG4gICAgfVxyXG4gICAgaWYgKHVuaXQgIT09IHUpIHtcclxuICAgICAgc2V0VSh1bml0KVxyXG4gICAgICBjaGFuZ2VkID0gdHJ1ZVxyXG4gICAgfVxyXG4gICAgaWYgKGNoYW5nZWQpIHtcclxuICAgICAgb25CdWZmZXJDaGFuZ2UoZGlzdGFuY2UsIHVuaXQpXHJcbiAgICB9XHJcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0LWhvb2tzL2V4aGF1c3RpdmUtZGVwc1xyXG4gIH0sIFtkaXN0YW5jZSwgdW5pdF0pXHJcblxyXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpZiAocXVlcnlUYXNrQ29udGV4dC5yZXNldFN5bWJvbCAmJiBxdWVyeVRhc2tDb250ZXh0LnJlc2V0U3ltYm9sICE9PSByZXNldFN5bWJvbFJlZi5jdXJyZW50KSB7XHJcbiAgICAgIHJlc2V0U3ltYm9sUmVmLmN1cnJlbnQgPSBxdWVyeVRhc2tDb250ZXh0LnJlc2V0U3ltYm9sXHJcbiAgICAgIHNldEQoZGlzdGFuY2UpXHJcbiAgICAgIHNldFUodW5pdClcclxuICAgICAgb25CdWZmZXJDaGFuZ2UoZGlzdGFuY2UsIHVuaXQpXHJcbiAgICB9XHJcbiAgfSwgW3F1ZXJ5VGFza0NvbnRleHQucmVzZXRTeW1ib2wsIGRpc3RhbmNlLCB1bml0LCBvbkJ1ZmZlckNoYW5nZV0pXHJcblxyXG4gIGNvbnN0IGhhbmRsZURpc3RhbmNlQ2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soKHZhbHVlKSA9PiB7XHJcbiAgICBzZXREKHZhbHVlKVxyXG4gIH0sIFtdKVxyXG5cclxuICBjb25zdCBoYW5kbGVEaXN0YW5jZUFjY2VwdGVkID0gUmVhY3QudXNlQ2FsbGJhY2soKHZhbHVlKSA9PiB7XHJcbiAgICBzZXREKHZhbHVlKVxyXG4gICAgb25CdWZmZXJDaGFuZ2UodmFsdWUsIHUpXHJcbiAgfSwgW29uQnVmZmVyQ2hhbmdlLCB1XSlcclxuXHJcbiAgY29uc3QgaGFuZGxlQnVmZmVyVW5pdENoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKChlKSA9PiB7XHJcbiAgICBzZXRVKGUudGFyZ2V0LnZhbHVlKVxyXG4gICAgb25CdWZmZXJDaGFuZ2UoZCwgZS50YXJnZXQudmFsdWUpXHJcbiAgfSwgW29uQnVmZmVyQ2hhbmdlLCBkXSlcclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDxSZWFjdC5GcmFnbWVudD5cclxuICAgICAgPE51bWVyaWNJbnB1dFxyXG4gICAgICAgIGFyaWEtbGFiZWw9e2dldEkxOG5NZXNzYWdlKCd0aGVCdWZmZXJEaXN0YW5jZScpfVxyXG4gICAgICAgIGNsYXNzTmFtZT0nbXItMSdcclxuICAgICAgICB2YWx1ZT17ZH1cclxuICAgICAgICBvbkNoYW5nZT17aGFuZGxlRGlzdGFuY2VDaGFuZ2V9XHJcbiAgICAgICAgb25BY2NlcHRWYWx1ZT17aGFuZGxlRGlzdGFuY2VBY2NlcHRlZH1cclxuICAgICAgLz5cclxuICAgICAgPFNlbGVjdFxyXG4gICAgICAgIGFyaWEtbGFiZWw9e2dldEkxOG5NZXNzYWdlKCd1bml0Jyl9XHJcbiAgICAgICAgdmFsdWU9e3V9XHJcbiAgICAgICAgb25DaGFuZ2U9e2hhbmRsZUJ1ZmZlclVuaXRDaGFuZ2V9XHJcbiAgICAgID5cclxuICAgICAgICB7T2JqZWN0LnZhbHVlcyhVbml0VHlwZSkubWFwKCh2YWx1ZSkgPT4gKFxyXG4gICAgICAgICAgPG9wdGlvbiBrZXk9e3ZhbHVlfSB2YWx1ZT17dmFsdWV9PlxyXG4gICAgICAgICAgICB7Z2V0STE4bk1lc3NhZ2UoYHVuaXRfJHt2YWx1ZX1gKX1cclxuICAgICAgICAgIDwvb3B0aW9uPlxyXG4gICAgICAgICkpfVxyXG4gICAgICA8L1NlbGVjdD5cclxuICAgIDwvUmVhY3QuRnJhZ21lbnQ+XHJcbiAgKVxyXG59XHJcbiIsIi8qKiBAanN4IGpzeCAqL1xuLy8gVGhpcyBmaWxlIGlzIGR1cGxpY2F0ZWQgZnJvbSAnLi4vLi4vLi4vLi4vZmVhdHVyZS1pbmZvL3NyYy9ydW50aW1lL2NvbXBvbmVudHMvZmVhdHVyZS1pbmZvJ1xuaW1wb3J0IHsgUmVhY3QsIGNzcywganN4LCB0eXBlIERhdGFTb3VyY2UsIGluamVjdEludGwsIHR5cGUgSW50bFNoYXBlLCBjbGFzc05hbWVzIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgbG9hZEFyY0dJU0pTQVBJTW9kdWxlcyB9IGZyb20gJ2ppbXUtYXJjZ2lzJ1xuaW1wb3J0IHsgQnV0dG9uIH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB7IFJpZ2h0RmlsbGVkIH0gZnJvbSAnamltdS1pY29ucy9maWxsZWQvZGlyZWN0aW9uYWwvcmlnaHQnXG5pbXBvcnQgeyBEb3duRmlsbGVkIH0gZnJvbSAnamltdS1pY29ucy9maWxsZWQvZGlyZWN0aW9uYWwvZG93bidcbmltcG9ydCB7IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIgfSBmcm9tICd3aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbidcblxuY29uc3QgZGVidWdMb2dnZXIgPSBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyKClcblxuZXhwb3J0IGVudW0gTG9hZFN0YXR1cyB7XG4gIFBlbmRpbmcgPSAnUGVuZGluZycsXG4gIEZ1bGZpbGxlZCA9ICdGdWxmaWxsZWQnLFxuICBSZWplY3RlZCA9ICdSZWplY3RlZCdcbn1cblxuaW50ZXJmYWNlIFByb3BzIHtcbiAgZGF0YVNvdXJjZTogRGF0YVNvdXJjZVxuICBncmFwaGljOiBfX2VzcmkuR3JhcGhpY1xuICBwb3B1cFRlbXBsYXRlOiBfX2VzcmkuUG9wdXBUZW1wbGF0ZVxuICBkZWZhdWx0UG9wdXBUZW1wbGF0ZTogX19lc3JpLlBvcHVwVGVtcGxhdGVcbiAgdG9nZ2xhYmxlPzogYm9vbGVhblxuICBleHBhbmRCeURlZmF1bHQ/OiBib29sZWFuXG59XG5cbmludGVyZmFjZSBTdGF0ZSB7XG4gIGxvYWRTdGF0dXM6IExvYWRTdGF0dXNcbiAgc2hvd0NvbnRlbnQ6IGJvb2xlYW5cbn1cblxuY29uc3Qgc3R5bGUgPSBjc3NgXG4gIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLXN5cy1jb2xvci1kaXZpZGVyLXNlY29uZGFyeSk7XG4gIC5lc3JpLXdpZGdldF9faGVhZGluZyB7XG4gICAgZm9udC1zaXplOiAwLjg3NXJlbSAhaW1wb3J0YW50O1xuICAgIGZvbnQtd2VpZ2h0OiA1MDAgIWltcG9ydGFudDtcbiAgICBtYXJnaW46IDA7XG4gICAgY29sb3I6IHZhcigtLXN5cy1jb2xvci1zdXJmYWNlLXBhcGVyLXRleHQpO1xuICB9XG5cbiAgLmVzcmktZmVhdHVyZV9fY29udGVudC1lbGVtZW50IHtcbiAgICBwYWRkaW5nOiAwO1xuICB9XG5cbiAgLmppbXUtYnRuLmV4cGFuZGVkIHtcbiAgICBhbGlnbi1zZWxmOiBmbGV4LXN0YXJ0O1xuICB9XG4gIFxuICAvLyBMYXJnZXIgZXhwYW5kL2NvbGxhcHNlIGJ1dHRvbiBmb3IgYmV0dGVyIHRvdWNoIHRhcmdldHNcbiAgLmppbXUtYnRuW2FyaWEtbGFiZWwqPVwiZXhwYW5kXCJdLFxuICAuamltdS1idG5bYXJpYS1sYWJlbCo9XCJjb2xsYXBzZVwiXSB7XG4gICAgbWluLXdpZHRoOiAzMnB4O1xuICAgIG1pbi1oZWlnaHQ6IDMycHg7XG4gICAgcGFkZGluZzogNnB4O1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgfVxuXG4gIC5lc3JpLWZlYXR1cmUuZXNyaS13aWRnZXQge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50O1xuICB9XG5gXG5cbmludGVyZmFjZSBFeHRyYVByb3BzIHtcbiAgaW50bDogSW50bFNoYXBlXG59XG5cbmNsYXNzIEZlYXR1cmVJbmZvIGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudDxQcm9wcyAmIEV4dHJhUHJvcHMsIFN0YXRlPiB7XG4gIHByaXZhdGUgRmVhdHVyZTogdHlwZW9mIF9fZXNyaS5GZWF0dXJlXG4gIHByaXZhdGUgZmVhdHVyZTogX19lc3JpLkZlYXR1cmVcbiAgcHJpdmF0ZSByZWFkb25seSBmZWF0dXJlQ29udGFpbmVyOiBSZWFjdC5SZWZPYmplY3Q8SFRNTElucHV0RWxlbWVudCB8IG51bGw+XG5cbiAgY29uc3RydWN0b3IgKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpXG4gICAgY29uc3QgeyB0b2dnbGFibGUgPSBmYWxzZSwgZXhwYW5kQnlEZWZhdWx0IH0gPSB0aGlzLnByb3BzXG4gICAgY29uc3QgcmVjb3JkSWQgPSB0aGlzLnByb3BzLmdyYXBoaWM/LmF0dHJpYnV0ZXM/Lk9CSkVDVElEIHx8IHRoaXMucHJvcHMuZ3JhcGhpYz8uYXR0cmlidXRlcz8ub2JqZWN0aWQgfHwgJ3Vua25vd24nXG4gICAgY29uc3QgaW5pdGlhbFNob3dDb250ZW50ID0gIXRvZ2dsYWJsZSB8fCBleHBhbmRCeURlZmF1bHRcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0VYUEFORC1DT0xMQVBTRScsIHtcbiAgICAgIGV2ZW50OiAnRmVhdHVyZUluZm8tY29uc3RydWN0b3InLFxuICAgICAgcmVjb3JkSWQsXG4gICAgICB0b2dnbGFibGUsXG4gICAgICBleHBhbmRCeURlZmF1bHQsXG4gICAgICBpbml0aWFsU2hvd0NvbnRlbnQsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIHRoaXMuZmVhdHVyZUNvbnRhaW5lciA9IFJlYWN0LmNyZWF0ZVJlZigpXG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIHNob3dDb250ZW50OiBpbml0aWFsU2hvd0NvbnRlbnQsXG4gICAgICBsb2FkU3RhdHVzOiBMb2FkU3RhdHVzLlBlbmRpbmdcbiAgICB9XG4gIH1cblxuICBjb21wb25lbnREaWRNb3VudCAoKSB7XG4gICAgdGhpcy5jcmVhdGVGZWF0dXJlKClcbiAgfVxuXG4gIGNvbXBvbmVudERpZFVwZGF0ZSAocHJldlByb3BzOiBQcm9wcykge1xuICAgIGlmICh0aGlzLmZlYXR1cmUpIHtcbiAgICAgIGlmIChwcmV2UHJvcHMucG9wdXBUZW1wbGF0ZSAhPT0gdGhpcy5wcm9wcy5wb3B1cFRlbXBsYXRlIHx8XG4gICAgICAgIHByZXZQcm9wcy5kZWZhdWx0UG9wdXBUZW1wbGF0ZSAhPT0gdGhpcy5wcm9wcy5kZWZhdWx0UG9wdXBUZW1wbGF0ZSB8fFxuICAgICAgICBwcmV2UHJvcHMuZ3JhcGhpYyAhPT0gdGhpcy5wcm9wcy5ncmFwaGljKSB7XG4gICAgICAgIHRoaXMuZGVzdHJveUZlYXR1cmUoKVxuICAgICAgICB0aGlzLmNyZWF0ZUZlYXR1cmUoKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5mZWF0dXJlLnZpc2libGVFbGVtZW50cyA9IHRoaXMuZ2V0VmlzaWJsZUVsZW1lbnRzKClcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gU3luYyBleHBhbmRCeURlZmF1bHQgcHJvcCBjaGFuZ2VzICh3aGVuIHVzZXIgY2xpY2tzIEV4cGFuZCBBbGwvQ29sbGFwc2UgQWxsKVxuICAgIC8vIFRoaXMgZW5zdXJlcyBhbGwgaXRlbXMgcmVzcGVjdCB0aGUgZ2xvYmFsIGV4cGFuZC9jb2xsYXBzZSBzdGF0ZVxuICAgIGlmIChwcmV2UHJvcHMuZXhwYW5kQnlEZWZhdWx0ICE9PSB0aGlzLnByb3BzLmV4cGFuZEJ5RGVmYXVsdCkge1xuICAgICAgY29uc3QgeyB0b2dnbGFibGUgPSBmYWxzZSwgZXhwYW5kQnlEZWZhdWx0IH0gPSB0aGlzLnByb3BzXG4gICAgICBjb25zdCByZWNvcmRJZCA9IHRoaXMucHJvcHMuZ3JhcGhpYz8uYXR0cmlidXRlcz8uT0JKRUNUSUQgfHwgdGhpcy5wcm9wcy5ncmFwaGljPy5hdHRyaWJ1dGVzPy5vYmplY3RpZCB8fCAndW5rbm93bidcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdFWFBBTkQtQ09MTEFQU0UnLCB7XG4gICAgICAgIGV2ZW50OiAnZXhwYW5kQnlEZWZhdWx0LXByb3AtY2hhbmdlZCcsXG4gICAgICAgIHJlY29yZElkLFxuICAgICAgICBwcmV2RXhwYW5kQnlEZWZhdWx0OiBwcmV2UHJvcHMuZXhwYW5kQnlEZWZhdWx0LFxuICAgICAgICBuZXdFeHBhbmRCeURlZmF1bHQ6IGV4cGFuZEJ5RGVmYXVsdCxcbiAgICAgICAgdG9nZ2xhYmxlLFxuICAgICAgICBjdXJyZW50U2hvd0NvbnRlbnQ6IHRoaXMuc3RhdGUuc2hvd0NvbnRlbnQsXG4gICAgICAgIHdpbGxVcGRhdGVTdGF0ZTogdG9nZ2xhYmxlLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGlmICh0b2dnbGFibGUpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IHNob3dDb250ZW50OiBleHBhbmRCeURlZmF1bHQgfSwgKCkgPT4ge1xuICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRVhQQU5ELUNPTExBUFNFJywge1xuICAgICAgICAgICAgZXZlbnQ6ICdGZWF0dXJlSW5mby1zdGF0ZS11cGRhdGVkJyxcbiAgICAgICAgICAgIHJlY29yZElkLFxuICAgICAgICAgICAgbmV3U2hvd0NvbnRlbnQ6IHRoaXMuc3RhdGUuc2hvd0NvbnRlbnQsXG4gICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBMb2cgYWxsIGNvbXBvbmVudERpZFVwZGF0ZSBjYWxscyB0byB0cmFjayByZW1vdW50c1xuICAgIGNvbnN0IHJlY29yZElkID0gdGhpcy5wcm9wcy5ncmFwaGljPy5hdHRyaWJ1dGVzPy5PQkpFQ1RJRCB8fCB0aGlzLnByb3BzLmdyYXBoaWM/LmF0dHJpYnV0ZXM/Lm9iamVjdGlkIHx8ICd1bmtub3duJ1xuICAgIGlmIChwcmV2UHJvcHMuZ3JhcGhpYyAhPT0gdGhpcy5wcm9wcy5ncmFwaGljIHx8IFxuICAgICAgICBwcmV2UHJvcHMucG9wdXBUZW1wbGF0ZSAhPT0gdGhpcy5wcm9wcy5wb3B1cFRlbXBsYXRlIHx8XG4gICAgICAgIHByZXZQcm9wcy5kZWZhdWx0UG9wdXBUZW1wbGF0ZSAhPT0gdGhpcy5wcm9wcy5kZWZhdWx0UG9wdXBUZW1wbGF0ZSkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdFWFBBTkQtQ09MTEFQU0UnLCB7XG4gICAgICAgIGV2ZW50OiAnRmVhdHVyZUluZm8tcHJvcHMtY2hhbmdlZC1yZWNyZWF0ZScsXG4gICAgICAgIHJlY29yZElkLFxuICAgICAgICBncmFwaGljQ2hhbmdlZDogcHJldlByb3BzLmdyYXBoaWMgIT09IHRoaXMucHJvcHMuZ3JhcGhpYyxcbiAgICAgICAgcG9wdXBUZW1wbGF0ZUNoYW5nZWQ6IHByZXZQcm9wcy5wb3B1cFRlbXBsYXRlICE9PSB0aGlzLnByb3BzLnBvcHVwVGVtcGxhdGUsXG4gICAgICAgIGRlZmF1bHRQb3B1cFRlbXBsYXRlQ2hhbmdlZDogcHJldlByb3BzLmRlZmF1bHRQb3B1cFRlbXBsYXRlICE9PSB0aGlzLnByb3BzLmRlZmF1bHRQb3B1cFRlbXBsYXRlLFxuICAgICAgICBleHBhbmRCeURlZmF1bHQ6IHRoaXMucHJvcHMuZXhwYW5kQnlEZWZhdWx0LFxuICAgICAgICBjdXJyZW50U2hvd0NvbnRlbnQ6IHRoaXMuc3RhdGUuc2hvd0NvbnRlbnQsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICBkZXN0cm95RmVhdHVyZSAoKSB7XG4gICAgdGhpcy5mZWF0dXJlICYmICF0aGlzLmZlYXR1cmUuZGVzdHJveWVkICYmIHRoaXMuZmVhdHVyZS5kZXN0cm95KClcbiAgfVxuXG4gIGdldFZpc2libGVFbGVtZW50cyAoKSB7XG4gICAgY29uc3QgeyB0b2dnbGFibGUgPSBmYWxzZSB9ID0gdGhpcy5wcm9wc1xuICAgIGNvbnN0IHsgc2hvd0NvbnRlbnQgfSA9IHRoaXMuc3RhdGVcbiAgICBjb25zdCBleHBhbmRlZCA9IHRvZ2dsYWJsZSA/IHNob3dDb250ZW50IDogdHJ1ZVxuICAgIHJldHVybiB7XG4gICAgICB0aXRsZTogdHJ1ZSxcbiAgICAgIGNvbnRlbnQ6IHtcbiAgICAgICAgZmllbGRzOiBleHBhbmRlZCxcbiAgICAgICAgdGV4dDogZXhwYW5kZWQsXG4gICAgICAgIG1lZGlhOiBleHBhbmRlZCxcbiAgICAgICAgYXR0YWNobWVudHM6IGV4cGFuZGVkXG4gICAgICB9LFxuICAgICAgbGFzdEVkaXRlZEluZm86IGZhbHNlXG4gICAgfVxuICB9XG5cbiAgY3JlYXRlRmVhdHVyZSAoKSB7XG4gICAgbGV0IGZlYXR1cmVNb2R1bGVQcm9taXNlXG4gICAgaWYgKHRoaXMuRmVhdHVyZSkge1xuICAgICAgZmVhdHVyZU1vZHVsZVByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoKVxuICAgIH0gZWxzZSB7XG4gICAgICBmZWF0dXJlTW9kdWxlUHJvbWlzZSA9IGxvYWRBcmNHSVNKU0FQSU1vZHVsZXMoW1xuICAgICAgICAnZXNyaS93aWRnZXRzL0ZlYXR1cmUnXG4gICAgICBdKS50aGVuKG1vZHVsZXMgPT4ge1xuICAgICAgICBbXG4gICAgICAgICAgdGhpcy5GZWF0dXJlXG4gICAgICAgIF0gPSBtb2R1bGVzXG4gICAgICB9KVxuICAgIH1cbiAgICByZXR1cm4gZmVhdHVyZU1vZHVsZVByb21pc2UudGhlbigoKSA9PiB7XG4gICAgICAvLyBDaGVjayBpZiBjb21wb25lbnQgaXMgc3RpbGwgbW91bnRlZCBiZWZvcmUgdHJ5aW5nIHRvIGFwcGVuZFxuICAgICAgLy8gVGhpcyBwcmV2ZW50cyBlcnJvcnMgd2hlbiBjb21wb25lbnQgdW5tb3VudHMgZHVyaW5nIGFzeW5jIG1vZHVsZSBsb2FkaW5nXG4gICAgICBpZiAoIXRoaXMuZmVhdHVyZUNvbnRhaW5lci5jdXJyZW50KSB7XG4gICAgICAgIC8vIENvbXBvbmVudCB3YXMgdW5tb3VudGVkLCBhYm9ydFxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQgJiYgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICAgIGNvbnRhaW5lci5jbGFzc05hbWUgPSAnamltdS13aWRnZXQnXG4gICAgICB0aGlzLmZlYXR1cmVDb250YWluZXIuY3VycmVudC5hcHBlbmRDaGlsZChjb250YWluZXIpXG5cbiAgICAgIGNvbnN0IG9yaWdpbkRTID0gdGhpcy5wcm9wcy5kYXRhU291cmNlLmdldE9yaWdpbkRhdGFTb3VyY2VzKClcbiAgICAgIGNvbnN0IHJvb3REYXRhU291cmNlID0gb3JpZ2luRFM/LlswXT8uZ2V0Um9vdERhdGFTb3VyY2UoKVxuXG4gICAgICB0aGlzLmRlc3Ryb3lGZWF0dXJlKClcbiAgICAgIGNvbnN0IGxheWVyID0gdGhpcy5wcm9wcy5ncmFwaGljLmxheWVyIGFzIF9fZXNyaS5GZWF0dXJlTGF5ZXJcbiAgICAgIGlmICh0aGlzLnByb3BzLnBvcHVwVGVtcGxhdGUpIHtcbiAgICAgICAgdGhpcy5wcm9wcy5ncmFwaGljLnBvcHVwVGVtcGxhdGUgPSB0aGlzLnByb3BzLnBvcHVwVGVtcGxhdGVcbiAgICAgIH0gZWxzZSBpZiAobGF5ZXIpIHtcbiAgICAgICAgLy8gc2V0IHBvcHVwVGVtcGxhdGUgd2l0aCBsYXllcidzIHBvcHVwVGVtcGxhdGUgb3IgZGVmYXVsdFBvcHVwVGVtcGxhdGVcbiAgICAgICAgdGhpcy5wcm9wcy5ncmFwaGljLnBvcHVwVGVtcGxhdGUgPSBsYXllci5wb3B1cFRlbXBsYXRlID8/IHRoaXMucHJvcHMuZGVmYXVsdFBvcHVwVGVtcGxhdGVcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucHJvcHMuZ3JhcGhpYy5wb3B1cFRlbXBsYXRlID0gdGhpcy5wcm9wcy5kZWZhdWx0UG9wdXBUZW1wbGF0ZVxuICAgICAgfVxuICAgICAgaWYgKGxheWVyICYmICFsYXllci5wb3B1cFRlbXBsYXRlKSB7XG4gICAgICAgIGxheWVyLnBvcHVwVGVtcGxhdGUgPSB0aGlzLnByb3BzLnBvcHVwVGVtcGxhdGUgfHwgdGhpcy5wcm9wcy5kZWZhdWx0UG9wdXBUZW1wbGF0ZVxuICAgICAgfVxuICAgICAgdGhpcy5mZWF0dXJlID0gbmV3IHRoaXMuRmVhdHVyZSh7XG4gICAgICAgIGNvbnRhaW5lcjogY29udGFpbmVyLFxuICAgICAgICBkZWZhdWx0UG9wdXBUZW1wbGF0ZUVuYWJsZWQ6IHRydWUsXG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3JcbiAgICAgICAgc3BhdGlhbFJlZmVyZW5jZTogdGhpcy5wcm9wcy5kYXRhU291cmNlPy5sYXllcj8uc3BhdGlhbFJlZmVyZW5jZSB8fCBudWxsLFxuICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yXG4gICAgICAgIG1hcDogcm9vdERhdGFTb3VyY2U/Lm1hcCB8fCBudWxsLFxuICAgICAgICBncmFwaGljOiB0aGlzLnByb3BzLmdyYXBoaWMsXG4gICAgICAgIHZpc2libGVFbGVtZW50czogdGhpcy5nZXRWaXNpYmxlRWxlbWVudHMoKVxuICAgICAgfSlcbiAgICB9KS50aGVuKCgpID0+IHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoeyBsb2FkU3RhdHVzOiBMb2FkU3RhdHVzLkZ1bGZpbGxlZCB9KVxuICAgIH0pXG4gIH1cblxuICB0b2dnbGVFeHBhbmRlZCA9IChlKSA9PiB7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKVxuICAgIHRoaXMuc2V0U3RhdGUoeyBzaG93Q29udGVudDogIXRoaXMuc3RhdGUuc2hvd0NvbnRlbnQgfSlcbiAgfVxuXG4gIHJlbmRlciAoKSB7XG4gICAgY29uc3QgeyB0b2dnbGFibGUgPSBmYWxzZSwgaW50bCB9ID0gdGhpcy5wcm9wc1xuICAgIGNvbnN0IHsgc2hvd0NvbnRlbnQgfSA9IHRoaXMuc3RhdGVcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9J2ZlYXR1cmUtaW5mby1jb21wb25lbnQgZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlciBwLTEnIGNzcz17c3R5bGV9PlxuICAgICAgICB7dG9nZ2xhYmxlICYmIChcbiAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICBhcmlhLWxhYmVsPXtpbnRsLmZvcm1hdE1lc3NhZ2UoeyBpZDogc2hvd0NvbnRlbnQgPyAnY29sbGFwc2UnIDogJ2V4cGFuZCcgfSl9XG4gICAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ2ppbXUtb3V0bGluZS1pbnNpZGUgZmxleC1zaHJpbmstMCcsIHsgZXhwYW5kZWQ6IHNob3dDb250ZW50IH0pfVxuICAgICAgICAgICAgdmFyaWFudD0ndGV4dCdcbiAgICAgICAgICAgIGNvbG9yPSdpbmhlcml0J1xuICAgICAgICAgICAgaWNvblxuICAgICAgICAgICAgc2l6ZT0nc20nXG4gICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnRvZ2dsZUV4cGFuZGVkfVxuICAgICAgICAgICAgY3NzPXtjc3NgXG4gICAgICAgICAgICAgIG1pbi13aWR0aDogMzJweDtcbiAgICAgICAgICAgICAgbWluLWhlaWdodDogMzJweDtcbiAgICAgICAgICAgICAgcGFkZGluZzogNnB4O1xuICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgICAgIGB9XG4gICAgICAgICAgPlxuICAgICAgICAgICAge3Nob3dDb250ZW50ID8gPERvd25GaWxsZWQgc2l6ZT0nbScvPiA6IDxSaWdodEZpbGxlZCBzaXplPSdtJyBhdXRvRmxpcC8+fVxuICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICApfVxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZmxleC1ncm93LTEnIHJlZj17dGhpcy5mZWF0dXJlQ29udGFpbmVyfSAvPlxuICAgICAgPC9kaXY+XG4gICAgKVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGluamVjdEludGwoRmVhdHVyZUluZm8pXG5cblxuIiwiLyoqIEBqc3gganN4ICovXHJcbmltcG9ydCB7IFJlYWN0LCBqc3gsIGNzcywgdHlwZSBJbW11dGFibGVBcnJheSwgbG9kYXNoLCBsb2FkQXJjR0lTSlNBUElNb2R1bGUsIHV0aWxzLCBob29rcyB9IGZyb20gJ2ppbXUtY29yZSdcclxuaW1wb3J0IHsgSmltdU1hcFZpZXdDb21wb25lbnQsIHR5cGUgSmltdU1hcFZpZXcsIGxvYWRBcmNHSVNKU0FQSU1vZHVsZXMgfSBmcm9tICdqaW11LWFyY2dpcydcclxuaW1wb3J0IHsgZGVmYXVsdE1lc3NhZ2VzIGFzIGppbXVVSU1lc3NhZ2VzIH0gZnJvbSAnamltdS11aSdcclxuaW1wb3J0IHR5cGUgeyBDcmVhdGVUb29sVHlwZSwgVW5pdFR5cGUgfSBmcm9tICcuLi9jb25maWcnXHJcbmltcG9ydCB7IEludGVyYWN0aXZlRHJhdyB9IGZyb20gJy4vaW50ZXJhY3RpdmUtZHJhdy10b29sJ1xyXG5pbXBvcnQgeyBCdWZmZXJJbnB1dCB9IGZyb20gJy4vYnVmZmVyLWlucHV0J1xyXG5pbXBvcnQgZGVmYXVsdE1lc3NhZ2UgZnJvbSAnLi90cmFuc2xhdGlvbnMvZGVmYXVsdCdcclxuaW1wb3J0IHsgUXVlcnlUYXNrQ29udGV4dCB9IGZyb20gJy4vcXVlcnktdGFzay1jb250ZXh0J1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBQcm9wcyB7XHJcbiAgbWFwV2lkZ2V0SWRzOiBJbW11dGFibGVBcnJheTxzdHJpbmc+XHJcbiAgd2lkZ2V0SWQ6IHN0cmluZ1xyXG4gIGNyZWF0ZVRvb2xUeXBlczogSW1tdXRhYmxlQXJyYXk8Q3JlYXRlVG9vbFR5cGU+XHJcbiAgZW5hYmxlQnVmZmVyOiBib29sZWFuXHJcbiAgYnVmZmVyRGlzdGFuY2U6IG51bWJlclxyXG4gIGJ1ZmZlclVuaXQ6IFVuaXRUeXBlXHJcbiAgb25CdWZmZXJDaGFuZ2U6IChkaXN0YW5jZTogbnVtYmVyLCB1bml0OiBVbml0VHlwZSkgPT4gdm9pZFxyXG4gIG9uR2VvbWV0cnlDaGFuZ2U6IChnZW9tOiBfX2VzcmkuR2VvbWV0cnksIGxheWVyPzogX19lc3JpLkdyYXBoaWNzTGF5ZXIsIGdyYXBoaWM/OiBfX2VzcmkuR3JhcGhpYywgY2xlYXJBZnRlckFwcGx5PzogYm9vbGVhbikgPT4gdm9pZFxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gR2VvbWV0cnlGcm9tRHJhdyAocHJvcHM6IFByb3BzKSB7XHJcbiAgY29uc3QgeyBvbkdlb21ldHJ5Q2hhbmdlLCBjcmVhdGVUb29sVHlwZXMsIG1hcFdpZGdldElkcywgZW5hYmxlQnVmZmVyLCBidWZmZXJEaXN0YW5jZSwgYnVmZmVyVW5pdCwgb25CdWZmZXJDaGFuZ2UsIHdpZGdldElkIH0gPSBwcm9wc1xyXG4gIGNvbnN0IFtqaW11TWFwVmlldywgc2V0SmltdU1hcFZpZXddID0gUmVhY3QudXNlU3RhdGU8SmltdU1hcFZpZXc+KG51bGwpXHJcbiAgY29uc3QgZ2V0STE4bk1lc3NhZ2UgPSBob29rcy51c2VUcmFuc2xhdGlvbihqaW11VUlNZXNzYWdlcywgZGVmYXVsdE1lc3NhZ2UpXHJcbiAgY29uc3QgcXVlcnlUYXNrQ29udGV4dCA9IFJlYWN0LnVzZUNvbnRleHQoUXVlcnlUYXNrQ29udGV4dClcclxuICBjb25zdCByZXNldFN5bWJvbFJlZiA9IFJlYWN0LnVzZVJlZihxdWVyeVRhc2tDb250ZXh0LnJlc2V0U3ltYm9sKVxyXG4gIGNvbnN0IGdldExheWVyRnVuUmVmID0gUmVhY3QudXNlUmVmPCgpID0+IF9fZXNyaS5HcmFwaGljc0xheWVyPihudWxsKVxyXG4gIGNvbnN0IGJ1ZmZlck9wZXJhdG9yUmVmID0gUmVhY3QudXNlUmVmPF9fZXNyaS5idWZmZXJPcGVyYXRvcj4obnVsbClcclxuICBjb25zdCBnZW9kZXNpY0J1ZmZlck9wZXJhdG9yUmVmID0gUmVhY3QudXNlUmVmPF9fZXNyaS5nZW9kZXNpY0J1ZmZlck9wZXJhdG9yPihudWxsKVxyXG4gIGNvbnN0IGdlb21ldHJ5U2VydmljZVJlZiA9IFJlYWN0LnVzZVJlZjx7IGdlb21ldHJ5U2VydmljZTogX19lc3JpLmdlb21ldHJ5U2VydmljZSwgYnVmZmVyUGFyYW1ldGVyczogdHlwZW9mIF9fZXNyaS5CdWZmZXJQYXJhbWV0ZXJzIH0+KG51bGwpXHJcbiAgY29uc3QgZ2VvbWV0cnlSZWYgPSBSZWFjdC51c2VSZWY8X19lc3JpLkdlb21ldHJ5PihudWxsKVxyXG4gIGNvbnN0IGJ1ZmZlckRpc3RhbmNlUmVmID0gUmVhY3QudXNlUmVmKGJ1ZmZlckRpc3RhbmNlKVxyXG4gIGNvbnN0IGJ1ZmZlclVuaXRSZWYgPSBSZWFjdC51c2VSZWYoYnVmZmVyVW5pdClcclxuICBjb25zdCBidWZmZXJlZEdyYXBoaWNSZWYgPSBSZWFjdC51c2VSZWY8X19lc3JpLkdyYXBoaWM+KG51bGwpXHJcblxyXG4gIGhvb2tzLnVzZUVmZmVjdE9uY2UoKCkgPT4ge1xyXG4gICAgaWYgKGVuYWJsZUJ1ZmZlcikge1xyXG4gICAgICAvLyBQYXJlbnQgY29tcG9uZW50IHF1ZXJ5LXRhc2stc3BhdGlhbC1mb3JtIHdpbGwgcmVzZXQgYnVmZmVyIHBhcmFtZXRlciB3aGVuIGZpbHRlciB0eXBlIGNoYW5nZXMsXHJcbiAgICAgIC8vIHNvIGRlZmVyIHRoZSBpbml0IGJ1ZmZlciBvcHRpb24gaW4gb3JkZXIgbm90IHRvIGJlIG92ZXJyaWRlIGJ5IGl0cyBwYXJlbnQuXHJcbiAgICAgIGxvZGFzaC5kZWZlcigoKSA9PiB7XHJcbiAgICAgICAgb25CdWZmZXJDaGFuZ2UoYnVmZmVyRGlzdGFuY2UsIGJ1ZmZlclVuaXQpXHJcbiAgICAgIH0pXHJcbiAgICB9XHJcbiAgICBsb2FkQXJjR0lTSlNBUElNb2R1bGVzKFtcclxuICAgICAgJ2VzcmkvR3JhcGhpYydcclxuICAgIF0pLnRoZW4oKG1vZHVsZXMpID0+IHtcclxuICAgICAgY29uc3QgR3JhcGhpYyA9IG1vZHVsZXNbMF1cclxuICAgICAgYnVmZmVyZWRHcmFwaGljUmVmLmN1cnJlbnQgPSBuZXcgR3JhcGhpYyh7XHJcbiAgICAgICAgc3ltYm9sOiB7XHJcbiAgICAgICAgICB0eXBlOiAnc2ltcGxlLWZpbGwnLFxyXG4gICAgICAgICAgY29sb3I6IFs1MSwgNTEsIDIwNCwgMC41XSxcclxuICAgICAgICAgIHN0eWxlOiAnc29saWQnLFxyXG4gICAgICAgICAgb3V0bGluZToge1xyXG4gICAgICAgICAgICBjb2xvcjogWzUxLCA1MSwgMjA0LCAwLjhdLFxyXG4gICAgICAgICAgICB3aWR0aDogMVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgIH0pXHJcbiAgfSlcclxuXHJcbiAgY29uc3QgYXBwbHlCdWZmZXJFZmZlY3QgPSBSZWFjdC51c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XHJcbiAgICBpZiAoIWdlb21ldHJ5UmVmLmN1cnJlbnQgfHwgIWVuYWJsZUJ1ZmZlciB8fCBidWZmZXJEaXN0YW5jZVJlZi5jdXJyZW50ID09PSAwKSB7XHJcbiAgICAgIGJ1ZmZlcmVkR3JhcGhpY1JlZi5jdXJyZW50Lmdlb21ldHJ5ID0gbnVsbFxyXG4gICAgICByZXR1cm5cclxuICAgIH1cclxuXHJcbiAgICAvLyBJZiB0aGUgZW5kIHVzZXIgdXNlcyBhIHBvaW50IG9yIGxpbmUgcXVlcnkgZ2VvbWV0cnksIHRoZW4gdGhlIG5lZ2F0aXZlIGJ1ZmZlciB3aWxsIG5vdCB3b3JrIChzYW1lIGVmZmVjdCBhcyB0aGVyZSBpcyBubyBidWZmZXIpXHJcbiAgICBjb25zdCBpc1BvaW50TmVnYXRpdmVCdWZmZXIgPSAoZ2VvbWV0cnlSZWYuY3VycmVudD8udHlwZSA9PT0gJ3BvaW50JyB8fCBnZW9tZXRyeVJlZi5jdXJyZW50Py50eXBlID09PSAnbXVsdGlwb2ludCcpICYmIGJ1ZmZlckRpc3RhbmNlUmVmLmN1cnJlbnQgPCAwXHJcbiAgICBjb25zdCBpc0xpbmVOZWdhdGl2ZUJ1ZmZlciA9IGdlb21ldHJ5UmVmLmN1cnJlbnQ/LnR5cGUgPT09ICdwb2x5bGluZScgJiYgYnVmZmVyRGlzdGFuY2VSZWYuY3VycmVudCA8IDBcclxuICAgIGlmIChpc1BvaW50TmVnYXRpdmVCdWZmZXIgfHwgaXNMaW5lTmVnYXRpdmVCdWZmZXIpIHtcclxuICAgICAgYnVmZmVyZWRHcmFwaGljUmVmLmN1cnJlbnQuZ2VvbWV0cnkgPSBudWxsXHJcbiAgICAgIHJldHVyblxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGdlb21ldHJ5ID0gZ2VvbWV0cnlSZWYuY3VycmVudFxyXG4gICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXJzLmFyY2dpcy5jb20vamF2YXNjcmlwdC9sYXRlc3QvYXBpLXJlZmVyZW5jZS9lc3JpLWdlb21ldHJ5LWdlb21ldHJ5RW5naW5lLmh0bWwjYnVmZmVyXHJcbiAgICBpZiAoZ2VvbWV0cnkuc3BhdGlhbFJlZmVyZW5jZT8uaXNHZW9ncmFwaGljICYmICFnZW9tZXRyeS5zcGF0aWFsUmVmZXJlbmNlLmlzV0dTODQpIHtcclxuICAgICAgY29uc3Qgc2VydmljZVVybCA9IHV0aWxzLmdldEdlb21ldHJ5U2VydmljZSgpXHJcbiAgICAgIGlmICghZ2VvbWV0cnlTZXJ2aWNlUmVmLmN1cnJlbnQpIHtcclxuICAgICAgICBjb25zdCBtb2R1bGVzID0gYXdhaXQgbG9hZEFyY0dJU0pTQVBJTW9kdWxlcyhbXHJcbiAgICAgICAgICAnZXNyaS9yZXN0L2dlb21ldHJ5U2VydmljZScsXHJcbiAgICAgICAgICAnZXNyaS9yZXN0L3N1cHBvcnQvQnVmZmVyUGFyYW1ldGVycydcclxuICAgICAgICBdKVxyXG4gICAgICAgIGdlb21ldHJ5U2VydmljZVJlZi5jdXJyZW50ID0ge1xyXG4gICAgICAgICAgZ2VvbWV0cnlTZXJ2aWNlOiBtb2R1bGVzWzBdLFxyXG4gICAgICAgICAgYnVmZmVyUGFyYW1ldGVyczogbW9kdWxlc1sxXVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBjb25zdCB7IGdlb21ldHJ5U2VydmljZSwgYnVmZmVyUGFyYW1ldGVyczogQnVmZmVyUGFyYW1ldGVycyB9ID0gZ2VvbWV0cnlTZXJ2aWNlUmVmLmN1cnJlbnRcclxuICAgICAgY29uc3QgcG9seWdvbnMgPSBhd2FpdCBnZW9tZXRyeVNlcnZpY2UuYnVmZmVyKHNlcnZpY2VVcmwsIG5ldyBCdWZmZXJQYXJhbWV0ZXJzKHtcclxuICAgICAgICBkaXN0YW5jZXM6IFtidWZmZXJEaXN0YW5jZVJlZi5jdXJyZW50XSxcclxuICAgICAgICB1bml0OiBsb2Rhc2gua2ViYWJDYXNlKGJ1ZmZlclVuaXRSZWYuY3VycmVudCkgYXMgYW55LFxyXG4gICAgICAgIGdlb2Rlc2ljOiB0cnVlLFxyXG4gICAgICAgIGJ1ZmZlclNwYXRpYWxSZWZlcmVuY2U6IGdlb21ldHJ5LnNwYXRpYWxSZWZlcmVuY2UsXHJcbiAgICAgICAgb3V0U3BhdGlhbFJlZmVyZW5jZTogZ2VvbWV0cnkuc3BhdGlhbFJlZmVyZW5jZSxcclxuICAgICAgICBnZW9tZXRyaWVzOiBbZ2VvbWV0cnldXHJcbiAgICAgIH0pKVxyXG4gICAgICBidWZmZXJlZEdyYXBoaWNSZWYuY3VycmVudC5nZW9tZXRyeSA9IHBvbHlnb25zWzBdXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpZiAoZ2VvbWV0cnkuc3BhdGlhbFJlZmVyZW5jZT8uaXNXR1M4NCB8fCBnZW9tZXRyeS5zcGF0aWFsUmVmZXJlbmNlPy5pc1dlYk1lcmNhdG9yKSB7XHJcbiAgICAgICAgaWYgKCFnZW9kZXNpY0J1ZmZlck9wZXJhdG9yUmVmLmN1cnJlbnQpIHtcclxuICAgICAgICAgIGdlb2Rlc2ljQnVmZmVyT3BlcmF0b3JSZWYuY3VycmVudCA9IGF3YWl0IGxvYWRBcmNHSVNKU0FQSU1vZHVsZSgnZXNyaS9nZW9tZXRyeS9vcGVyYXRvcnMvZ2VvZGVzaWNCdWZmZXJPcGVyYXRvcicpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghZ2VvZGVzaWNCdWZmZXJPcGVyYXRvclJlZi5jdXJyZW50LmlzTG9hZGVkKCkpIHtcclxuICAgICAgICAgIGF3YWl0IGdlb2Rlc2ljQnVmZmVyT3BlcmF0b3JSZWYuY3VycmVudC5sb2FkKClcclxuICAgICAgICB9XHJcbiAgICAgICAgYnVmZmVyZWRHcmFwaGljUmVmLmN1cnJlbnQuZ2VvbWV0cnkgPSBnZW9kZXNpY0J1ZmZlck9wZXJhdG9yUmVmLmN1cnJlbnQuZXhlY3V0ZShcclxuICAgICAgICAgIGdlb21ldHJ5IGFzIF9fZXNyaS5HZW9tZXRyeVVuaW9uLFxyXG4gICAgICAgICAgYnVmZmVyRGlzdGFuY2VSZWYuY3VycmVudCxcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgdW5pdDogbG9kYXNoLmtlYmFiQ2FzZShidWZmZXJVbml0UmVmLmN1cnJlbnQpIGFzIGFueVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIClcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAoIWJ1ZmZlck9wZXJhdG9yUmVmLmN1cnJlbnQpIHtcclxuICAgICAgICAgIGJ1ZmZlck9wZXJhdG9yUmVmLmN1cnJlbnQgPSBhd2FpdCBsb2FkQXJjR0lTSlNBUElNb2R1bGUoJ2VzcmkvZ2VvbWV0cnkvb3BlcmF0b3JzL2J1ZmZlck9wZXJhdG9yJylcclxuICAgICAgICB9XHJcbiAgICAgICAgYnVmZmVyZWRHcmFwaGljUmVmLmN1cnJlbnQuZ2VvbWV0cnkgPSBidWZmZXJPcGVyYXRvclJlZi5jdXJyZW50LmV4ZWN1dGUoXHJcbiAgICAgICAgICBnZW9tZXRyeSBhcyBfX2VzcmkuR2VvbWV0cnlVbmlvbixcclxuICAgICAgICAgIGJ1ZmZlckRpc3RhbmNlUmVmLmN1cnJlbnQsXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIHVuaXQ6IGxvZGFzaC5rZWJhYkNhc2UoYnVmZmVyVW5pdFJlZi5jdXJyZW50KSBhcyBhbnlcclxuICAgICAgICAgIH1cclxuICAgICAgICApXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9LCBbZW5hYmxlQnVmZmVyXSlcclxuXHJcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGlmIChxdWVyeVRhc2tDb250ZXh0LnJlc2V0U3ltYm9sICYmIHF1ZXJ5VGFza0NvbnRleHQucmVzZXRTeW1ib2wgIT09IHJlc2V0U3ltYm9sUmVmLmN1cnJlbnQpIHtcclxuICAgICAgcmVzZXRTeW1ib2xSZWYuY3VycmVudCA9IHF1ZXJ5VGFza0NvbnRleHQucmVzZXRTeW1ib2xcclxuICAgICAgZ2V0TGF5ZXJGdW5SZWYuY3VycmVudCAmJiBnZXRMYXllckZ1blJlZi5jdXJyZW50KCkucmVtb3ZlQWxsKClcclxuICAgICAgb25HZW9tZXRyeUNoYW5nZShudWxsKVxyXG4gICAgfVxyXG4gIH0sIFtxdWVyeVRhc2tDb250ZXh0LnJlc2V0U3ltYm9sLCBvbkdlb21ldHJ5Q2hhbmdlXSlcclxuXHJcbiAgY29uc3QgaGFuZGxlSmltdU1hcFZpZXdDaGFuZ2VkID0gUmVhY3QudXNlQ2FsbGJhY2soKGppbXVNYXBWaWV3OiBKaW11TWFwVmlldykgPT4ge1xyXG4gICAgLy8gY2xlYXIgZHJhd2luZyBncmFwaGljcyBiZWZvcmUgc3dpdGNoaW5nIG1hcCB2aWV3XHJcbiAgICBjb25zdCBsYXllciA9IGdldExheWVyRnVuUmVmLmN1cnJlbnQgJiYgZ2V0TGF5ZXJGdW5SZWYuY3VycmVudCgpXHJcbiAgICBpZiAobGF5ZXIpIHtcclxuICAgICAgbGF5ZXIucmVtb3ZlQWxsKClcclxuICAgICAgb25HZW9tZXRyeUNoYW5nZShudWxsKVxyXG4gICAgfVxyXG4gICAgc2V0SmltdU1hcFZpZXcoamltdU1hcFZpZXc/LnZpZXcgIT0gbnVsbCA/IGppbXVNYXBWaWV3IDogbnVsbClcclxuICB9LCBbb25HZW9tZXRyeUNoYW5nZV0pXHJcblxyXG4gIGNvbnN0IGhhbmRsZUJ1ZmZlckNoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKChkaXN0YW5jZSwgdW5pdCkgPT4ge1xyXG4gICAgYnVmZmVyRGlzdGFuY2VSZWYuY3VycmVudCA9IGRpc3RhbmNlXHJcbiAgICBidWZmZXJVbml0UmVmLmN1cnJlbnQgPSB1bml0XHJcbiAgICBhcHBseUJ1ZmZlckVmZmVjdCgpXHJcbiAgICBvbkJ1ZmZlckNoYW5nZShkaXN0YW5jZSwgdW5pdClcclxuICB9LCBbb25CdWZmZXJDaGFuZ2UsIGFwcGx5QnVmZmVyRWZmZWN0XSlcclxuXHJcbiAgY29uc3QgaGFuZGxlRHJhd0VuZCA9IFJlYWN0LnVzZUNhbGxiYWNrKChncmFwaGljLCBnZXRMYXllckZ1biwgY2xlYXJBZnRlckFwcGx5KSA9PiB7XHJcbiAgICBnZXRMYXllckZ1blJlZi5jdXJyZW50ID0gZ2V0TGF5ZXJGdW5cclxuICAgIGNvbnN0IGxheWVyID0gZ2V0TGF5ZXJGdW5SZWYuY3VycmVudCAmJiBnZXRMYXllckZ1blJlZi5jdXJyZW50KClcclxuICAgIC8vIGl0J3MgcG9zc2libGUgdGhhdCB0aGUgZ2VvbWV0cnkgaXMgdGhlIHNhbWUgYXMgdGhlIHByZXZpb3VzIG9uZSwgb25seSB0aGUgY2xlYXJBZnRlckFwcGx5IGlzIGNoYW5nZWQuXHJcbiAgICBpZiAoZ2VvbWV0cnlSZWYuY3VycmVudCAhPT0gZ3JhcGhpYz8uZ2VvbWV0cnkpIHtcclxuICAgICAgZ2VvbWV0cnlSZWYuY3VycmVudCA9IGdyYXBoaWM/Lmdlb21ldHJ5XHJcbiAgICAgIGFwcGx5QnVmZmVyRWZmZWN0KCkudGhlbigoKSA9PiB7XHJcbiAgICAgICAgaWYgKGJ1ZmZlcmVkR3JhcGhpY1JlZi5jdXJyZW50Lmdlb21ldHJ5KSB7XHJcbiAgICAgICAgICBsYXllcj8uYWRkKGJ1ZmZlcmVkR3JhcGhpY1JlZi5jdXJyZW50KVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgIH1cclxuICAgIG9uR2VvbWV0cnlDaGFuZ2UoZ3JhcGhpYz8uZ2VvbWV0cnksIGxheWVyLCBncmFwaGljLCBjbGVhckFmdGVyQXBwbHkpXHJcbiAgfSwgW29uR2VvbWV0cnlDaGFuZ2UsIGFwcGx5QnVmZmVyRWZmZWN0XSlcclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDxSZWFjdC5GcmFnbWVudD5cclxuICAgICAge1xyXG4gICAgICAgIG1hcFdpZGdldElkcz8ubWFwKChtYXBXaWRnZXRJZCwgeCkgPT4gKFxyXG4gICAgICAgICAgPEppbXVNYXBWaWV3Q29tcG9uZW50XHJcbiAgICAgICAgICAgIGtleT17eH0gdXNlTWFwV2lkZ2V0SWQ9e21hcFdpZGdldElkfSBvbkFjdGl2ZVZpZXdDaGFuZ2U9e2hhbmRsZUppbXVNYXBWaWV3Q2hhbmdlZH1cclxuICAgICAgICAgIC8+XHJcbiAgICAgICAgKSlcclxuICAgICAgfVxyXG4gICAgICB7amltdU1hcFZpZXc/LnZpZXcgJiYgKFxyXG4gICAgICAgIDxSZWFjdC5GcmFnbWVudD5cclxuICAgICAgICAgIDxJbnRlcmFjdGl2ZURyYXdcclxuICAgICAgICAgICAgamltdU1hcFZpZXc9e2ppbXVNYXBWaWV3fVxyXG4gICAgICAgICAgICB3aWRnZXRJZD17d2lkZ2V0SWR9XHJcbiAgICAgICAgICAgIHRvb2xUeXBlcz17Y3JlYXRlVG9vbFR5cGVzfVxyXG4gICAgICAgICAgICBvbkRyYXdFbmQ9e2hhbmRsZURyYXdFbmR9XHJcbiAgICAgICAgICAvPlxyXG4gICAgICAgICAge2VuYWJsZUJ1ZmZlciAmJiAoXHJcbiAgICAgICAgICAgIDxkaXYgcm9sZT0nZ3JvdXAnIGNsYXNzTmFtZT0ndGl0bGUzJyBhcmlhLWxhYmVsPXtnZXRJMThuTWVzc2FnZSgndGhlQnVmZmVyRGlzdGFuY2UnKX0gY3NzPXtjc3NgbWFyZ2luLXRvcDogMC43NXJlbTtgfT5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndGV4dC10cnVuY2F0ZSc+e2dldEkxOG5NZXNzYWdlKCd0aGVCdWZmZXJEaXN0YW5jZScpfTwvZGl2PlxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdkLWZsZXggbXQtMSc+XHJcbiAgICAgICAgICAgICAgICA8QnVmZmVySW5wdXQgZGlzdGFuY2U9e2J1ZmZlckRpc3RhbmNlfSB1bml0PXtidWZmZXJVbml0fSBvbkJ1ZmZlckNoYW5nZT17aGFuZGxlQnVmZmVyQ2hhbmdlfS8+XHJcbiAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgKX1cclxuICAgICAgICA8L1JlYWN0LkZyYWdtZW50PlxyXG4gICAgICApfVxyXG4gICAgPC9SZWFjdC5GcmFnbWVudD5cclxuICApXHJcbn1cclxuIiwiLyoqIEBqc3gganN4ICovXHJcbmltcG9ydCB7XHJcbiAgUmVhY3QsXHJcbiAgUmVhY3RSZWR1eCxcclxuICBqc3gsXHJcbiAgY3NzLFxyXG4gIEltbXV0YWJsZSxcclxuICB0eXBlIEltbXV0YWJsZUFycmF5LFxyXG4gIHR5cGUgVXNlRGF0YVNvdXJjZSxcclxuICB0eXBlIEZlYXR1cmVEYXRhUmVjb3JkLFxyXG4gIERhdGFTb3VyY2VNYW5hZ2VyLFxyXG4gIERhdGFTb3VyY2VDb21wb25lbnQsXHJcbiAgaG9va3MsXHJcbiAgdHlwZSBEYXRhU291cmNlLFxyXG4gIHR5cGUgSU1TdGF0ZSxcclxuICBEYXRhU291cmNlU3RhdHVzXHJcbn0gZnJvbSAnamltdS1jb3JlJ1xyXG5pbXBvcnQgeyBTZWxlY3QsIE9wdGlvbiwgZGVmYXVsdE1lc3NhZ2VzIGFzIGppbXVVSU1lc3NhZ2VzIH0gZnJvbSAnamltdS11aSdcclxuaW1wb3J0IHsgU3BhdGlhbFJlbGF0aW9uLCB0eXBlIFVuaXRUeXBlIH0gZnJvbSAnLi4vY29uZmlnJ1xyXG5pbXBvcnQgeyBCdWZmZXJJbnB1dCB9IGZyb20gJy4vYnVmZmVyLWlucHV0J1xyXG5pbXBvcnQgZGVmYXVsdE1lc3NhZ2UgZnJvbSAnLi90cmFuc2xhdGlvbnMvZGVmYXVsdCdcclxuaW1wb3J0IHsgUXVlcnlUYXNrQ29udGV4dCB9IGZyb20gJy4vcXVlcnktdGFzay1jb250ZXh0J1xyXG5cclxuY29uc3QgbWFyZ2luU3R5bGUgPSBjc3NgbWFyZ2luLXRvcDogMC43NXJlbTtgXHJcbmV4cG9ydCBpbnRlcmZhY2UgUHJvcHMge1xyXG4gIHNwYXRpYWxSZWxhdGlvbnM6IEltbXV0YWJsZUFycmF5PFNwYXRpYWxSZWxhdGlvbj5cclxuICB1c2VEYXRhU291cmNlczogSW1tdXRhYmxlQXJyYXk8VXNlRGF0YVNvdXJjZT5cclxuICB1c2VSdW50aW1lRGF0YTogYm9vbGVhblxyXG4gIGVuYWJsZUJ1ZmZlcjogYm9vbGVhblxyXG4gIGJ1ZmZlckRpc3RhbmNlOiBudW1iZXJcclxuICBidWZmZXJVbml0OiBVbml0VHlwZVxyXG4gIG9uU2VsZWN0aW9uQ2hhbmdlOiAoZ2VvbXM6IF9fZXNyaS5HZW9tZXRyeVtdKSA9PiB2b2lkXHJcbiAgb25SZWxhdGlvbkNoYW5nZTogKHJlbDogU3BhdGlhbFJlbGF0aW9uKSA9PiB2b2lkXHJcbiAgb25CdWZmZXJDaGFuZ2U6IChkaXN0YW5jZTogbnVtYmVyLCB1bml0OiBVbml0VHlwZSkgPT4gdm9pZFxyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRSdW50aW1lRGF0YVNvdXJjZSAoKTogeyBbZHNJZDogc3RyaW5nXTogRGF0YVNvdXJjZSB9IHtcclxuICBjb25zdCByZXN1bHQgPSB7fVxyXG4gIGxldCBub3RFbXB0eSA9IGZhbHNlXHJcbiAgY29uc3QgZHNNYXAgPSBEYXRhU291cmNlTWFuYWdlci5nZXRJbnN0YW5jZSgpLmdldERhdGFTb3VyY2VzKClcclxuICBPYmplY3Qua2V5cyhkc01hcCkuZm9yRWFjaChkc0lkID0+IHtcclxuICAgIGNvbnN0IGRzID0gZHNNYXBbZHNJZF1cclxuICAgIC8vIG9ubHkgaW5jbHVkZSB0aGUgZHMgdGhhdCBoYXMgZ2VvbWV0cnlcclxuICAgIGlmIChkcy5nZXRHZW9tZXRyeVR5cGUoKSAhPSBudWxsICYmICFkcy5pc0luQXBwQ29uZmlnKCkgJiYgZHMuZ2V0TWFpbkRhdGFTb3VyY2UoKS5pZCA9PT0gZHNJZCAmJiAhZHMuZ2V0RGF0YVNvdXJjZUpzb24oKS5pc091dHB1dEZyb21XaWRnZXQpIHtcclxuICAgICAgcmVzdWx0W2RzSWRdID0gZHNcclxuICAgICAgbm90RW1wdHkgPSB0cnVlXHJcbiAgICB9XHJcbiAgfSlcclxuXHJcbiAgcmV0dXJuIG5vdEVtcHR5ID8gcmVzdWx0IDogbnVsbFxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gR2VvbWV0cnlGcm9tRGF0YVNvdXJjZSAocHJvcHM6IFByb3BzKSB7XHJcbiAgY29uc3QgeyBvblNlbGVjdGlvbkNoYW5nZSwgdXNlRGF0YVNvdXJjZXMgPSBbXSwgdXNlUnVudGltZURhdGEsIHNwYXRpYWxSZWxhdGlvbnMsIGVuYWJsZUJ1ZmZlciwgYnVmZmVyRGlzdGFuY2UsIGJ1ZmZlclVuaXQsIG9uQnVmZmVyQ2hhbmdlLCBvblJlbGF0aW9uQ2hhbmdlIH0gPSBwcm9wc1xyXG4gIGNvbnN0IGdldEkxOG5NZXNzYWdlID0gaG9va3MudXNlVHJhbnNsYXRpb24oamltdVVJTWVzc2FnZXMsIGRlZmF1bHRNZXNzYWdlKVxyXG4gIGNvbnN0IFtjdXJyZW50RGF0YVNvdXJjZSwgc2V0Q3VycmVudERhdGFTb3VyY2VdID0gUmVhY3QudXNlU3RhdGUodXNlRGF0YVNvdXJjZXNbMF0pXHJcbiAgY29uc3QgW3J1bnRpbWVEYXRhU291cmNlLCBzZXRSdW50aW1lRGF0YVNvdXJjZV0gPSBSZWFjdC51c2VTdGF0ZTxEYXRhU291cmNlPigpXHJcbiAgY29uc3QgW2NvdW50LCBzZXRDb3VudF0gPSBSZWFjdC51c2VTdGF0ZSgwKVxyXG4gIGNvbnN0IFtjdXJyZW50UmVsYXRpb24sIHNldEN1cnJlbnRSZWxhdGlvbl0gPSBSZWFjdC51c2VTdGF0ZShzcGF0aWFsUmVsYXRpb25zPy5bMF0pXHJcbiAgY29uc3QgcXVlcnlUYXNrQ29udGV4dCA9IFJlYWN0LnVzZUNvbnRleHQoUXVlcnlUYXNrQ29udGV4dClcclxuICBjb25zdCByZXNldFN5bWJvbFJlZiA9IFJlYWN0LnVzZVJlZihxdWVyeVRhc2tDb250ZXh0LnJlc2V0U3ltYm9sKVxyXG4gIGNvbnN0IHRyYW5zbGF0ZSA9IGhvb2tzLnVzZVRyYW5zbGF0aW9uKClcclxuXHJcbiAgY29uc3Qgc3BhdGlhbFJlbGF0aW9uT3B0aW9uczogQXJyYXk8eyB2YWx1ZTogc3RyaW5nLCBsYWJlbDogc3RyaW5nIH0+ID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XHJcbiAgICByZXR1cm4gT2JqZWN0LmVudHJpZXMoU3BhdGlhbFJlbGF0aW9uKS5tYXAoKFtrZXksIHZhbHVlXSkgPT4gKHtcclxuICAgICAgdmFsdWUsXHJcbiAgICAgIGxhYmVsOiBnZXRJMThuTWVzc2FnZShgc3BhdGlhbFJlbGF0aW9uXyR7a2V5fWApXHJcbiAgICB9KSlcclxuICB9LCBbZ2V0STE4bk1lc3NhZ2VdKVxyXG5cclxuICBjb25zdCBsb2FkZWRVc2VEYXRhU291cmNlcyA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XHJcbiAgICBjb25zdCBsb2FkZWQgPSBbXVxyXG4gICAgdXNlRGF0YVNvdXJjZXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICBpZiAoc3RhdGUuZGF0YVNvdXJjZXNJbmZvPy5baXRlbS5tYWluRGF0YVNvdXJjZUlkXT8uaW5zdGFuY2VTdGF0dXMgPT09IERhdGFTb3VyY2VTdGF0dXMuQ3JlYXRlZCkge1xyXG4gICAgICAgIGxvYWRlZC5wdXNoKGl0ZW0uZGF0YVNvdXJjZUlkKVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gICAgaWYgKGxvYWRlZC5sZW5ndGggPiAwKSB7XHJcbiAgICAgIHJldHVybiBsb2FkZWQuam9pbignLCcpXHJcbiAgICB9XHJcbiAgICByZXR1cm4gJydcclxuICB9KVxyXG5cclxuICBjb25zdCBudW1PZkRzID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcclxuICAgIGlmICghdXNlUnVudGltZURhdGEpIHtcclxuICAgICAgcmV0dXJuIDBcclxuICAgIH1cclxuICAgIHJldHVybiBPYmplY3Qua2V5cyhzdGF0ZS5kYXRhU291cmNlc0luZm8gPz8ge30pLmZpbHRlcihkc0lkID0+IHN0YXRlLmRhdGFTb3VyY2VzSW5mb1tkc0lkXS5pbnN0YW5jZVN0YXR1cyA9PT0gRGF0YVNvdXJjZVN0YXR1cy5DcmVhdGVkKS5sZW5ndGhcclxuICB9KVxyXG5cclxuICBjb25zdCBydW50aW1lRGF0YVNvdXJjZXMgPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcclxuICAgIGlmIChudW1PZkRzID4gMCkge1xyXG4gICAgICByZXR1cm4gZ2V0UnVudGltZURhdGFTb3VyY2UoKVxyXG4gICAgfVxyXG4gIH0sIFtudW1PZkRzXSlcclxuXHJcbiAgY29uc3QgbnVtT2ZSdW50aW1lRHMgPSBPYmplY3Qua2V5cyhydW50aW1lRGF0YVNvdXJjZXMgPz8ge30pLmxlbmd0aFxyXG5cclxuICBob29rcy51c2VFZmZlY3RPbmNlKCgpID0+IHtcclxuICAgIGlmIChzcGF0aWFsUmVsYXRpb25zPy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIG9uUmVsYXRpb25DaGFuZ2Uoc3BhdGlhbFJlbGF0aW9uc1swXSlcclxuICAgIH1cclxuICAgIGlmIChlbmFibGVCdWZmZXIpIHtcclxuICAgICAgb25CdWZmZXJDaGFuZ2UoYnVmZmVyRGlzdGFuY2UsIGJ1ZmZlclVuaXQpXHJcbiAgICB9XHJcbiAgfSlcclxuXHJcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGlmIChxdWVyeVRhc2tDb250ZXh0LnJlc2V0U3ltYm9sICYmIHF1ZXJ5VGFza0NvbnRleHQucmVzZXRTeW1ib2wgIT09IHJlc2V0U3ltYm9sUmVmLmN1cnJlbnQpIHtcclxuICAgICAgcmVzZXRTeW1ib2xSZWYuY3VycmVudCA9IHF1ZXJ5VGFza0NvbnRleHQucmVzZXRTeW1ib2xcclxuICAgICAgc2V0Q3VycmVudFJlbGF0aW9uKHNwYXRpYWxSZWxhdGlvbnM/LlswXSlcclxuICAgICAgb25SZWxhdGlvbkNoYW5nZShzcGF0aWFsUmVsYXRpb25zPy5bMF0pXHJcbiAgICB9XHJcbiAgfSwgW3F1ZXJ5VGFza0NvbnRleHQucmVzZXRTeW1ib2wsIG9uUmVsYXRpb25DaGFuZ2UsIHNwYXRpYWxSZWxhdGlvbnNdKVxyXG5cclxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgaWYgKCFzcGF0aWFsUmVsYXRpb25zKSB7XHJcbiAgICAgIHNldEN1cnJlbnRSZWxhdGlvbihudWxsKVxyXG4gICAgfSBlbHNlIGlmICghc3BhdGlhbFJlbGF0aW9ucy5pbmNsdWRlcyhjdXJyZW50UmVsYXRpb24pKSB7XHJcbiAgICAgIHNldEN1cnJlbnRSZWxhdGlvbihzcGF0aWFsUmVsYXRpb25zWzBdKVxyXG4gICAgICBvblJlbGF0aW9uQ2hhbmdlKHNwYXRpYWxSZWxhdGlvbnNbMF0pXHJcbiAgICB9XHJcbiAgfSwgW3NwYXRpYWxSZWxhdGlvbnMsIGN1cnJlbnRSZWxhdGlvbiwgb25SZWxhdGlvbkNoYW5nZV0pXHJcblxyXG4gIGNvbnN0IGhhbmRsZURhdGFTb3VyY2VDaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjayhcclxuICAgIChkc0lkOiBzdHJpbmcpID0+IHtcclxuICAgICAgY29uc3QgZHMgPSB1c2VEYXRhU291cmNlcy5maW5kKChpdGVtKSA9PiBpdGVtLmRhdGFTb3VyY2VJZCA9PT0gZHNJZClcclxuICAgICAgc2V0Q3VycmVudERhdGFTb3VyY2UoSW1tdXRhYmxlKGRzKSlcclxuICAgICAgc2V0UnVudGltZURhdGFTb3VyY2UobnVsbClcclxuICAgIH0sXHJcbiAgICBbdXNlRGF0YVNvdXJjZXNdXHJcbiAgKVxyXG5cclxuICBjb25zdCBoYW5kbGVSdW50aW1lRGF0YVNvdXJjZUNoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKFxyXG4gICAgKGRzSWQ6IHN0cmluZykgPT4ge1xyXG4gICAgICBjb25zdCBkcyA9IERhdGFTb3VyY2VNYW5hZ2VyLmdldEluc3RhbmNlKCkuZ2V0RGF0YVNvdXJjZShkc0lkKVxyXG4gICAgICBzZXRSdW50aW1lRGF0YVNvdXJjZShkcylcclxuICAgICAgc2V0Q3VycmVudERhdGFTb3VyY2UobnVsbClcclxuICAgIH0sXHJcbiAgICBbXVxyXG4gIClcclxuXHJcbiAgY29uc3QgaGFuZGxlRGF0YVNvdXJjZUluZm9DaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjaygoKSA9PiB7XHJcbiAgICBjb25zdCBkcyA9IERhdGFTb3VyY2VNYW5hZ2VyLmdldEluc3RhbmNlKCkuZ2V0RGF0YVNvdXJjZShjdXJyZW50RGF0YVNvdXJjZT8uZGF0YVNvdXJjZUlkID8/IHJ1bnRpbWVEYXRhU291cmNlPy5pZClcclxuICAgIGNvbnN0IHJlY29yZHMgPSBkcz8uZ2V0U2VsZWN0ZWRSZWNvcmRzKCkgYXMgRmVhdHVyZURhdGFSZWNvcmRbXVxyXG4gICAgaWYgKHJlY29yZHM/Lmxlbmd0aCA+IDApIHtcclxuICAgICAgY29uc3QgZ2VvbWV0cmllcyA9IHJlY29yZHMubWFwKChyZWNvcmQpID0+IHJlY29yZC5nZXRKU0FQSUdlb21ldHJ5KCkpXHJcbiAgICAgIG9uU2VsZWN0aW9uQ2hhbmdlKGdlb21ldHJpZXMpXHJcbiAgICAgIHNldENvdW50KHJlY29yZHMubGVuZ3RoKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgb25TZWxlY3Rpb25DaGFuZ2UobnVsbClcclxuICAgICAgc2V0Q291bnQoMClcclxuICAgIH1cclxuICB9LCBbY3VycmVudERhdGFTb3VyY2U/LmRhdGFTb3VyY2VJZCwgcnVudGltZURhdGFTb3VyY2U/LmlkLCBvblNlbGVjdGlvbkNoYW5nZV0pXHJcblxyXG4gIGNvbnN0IGdldExhYmVsT2ZTcGF0aWFsUmVsYXRpb24gPSAocmVsYXRpb246IHN0cmluZyk6IHN0cmluZyA9PiB7XHJcbiAgICByZXR1cm4gc3BhdGlhbFJlbGF0aW9uT3B0aW9ucy5maW5kKGl0ZW0gPT4gaXRlbS52YWx1ZSA9PT0gcmVsYXRpb24pLmxhYmVsXHJcbiAgfVxyXG5cclxuICBjb25zdCBoYW5kbGVTcGF0aWFsUmVsYXRpb25DaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjayhlID0+IHtcclxuICAgIHNldEN1cnJlbnRSZWxhdGlvbihlLnRhcmdldC52YWx1ZSlcclxuICAgIG9uUmVsYXRpb25DaGFuZ2UoZS50YXJnZXQudmFsdWUpXHJcbiAgfSwgW29uUmVsYXRpb25DaGFuZ2VdKVxyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPGRpdj5cclxuICAgICAgPGRpdiBjc3M9e21hcmdpblN0eWxlfSBjbGFzc05hbWU9J3RpdGxlMyc+e2dldEkxOG5NZXNzYWdlKCdjaG9vc2VGaWx0ZXJMYXllcicpfTwvZGl2PlxyXG4gICAgICA8U2VsZWN0XHJcbiAgICAgICAgYXJpYS1sYWJlbD17Z2V0STE4bk1lc3NhZ2UoJ2Nob29zZUZpbHRlckxheWVyJyl9XHJcbiAgICAgICAgdmFsdWU9e2N1cnJlbnREYXRhU291cmNlPy5kYXRhU291cmNlSWQgPz8gcnVudGltZURhdGFTb3VyY2U/LmlkfVxyXG4gICAgICA+XHJcbiAgICAgICAge251bU9mUnVudGltZURzID4gMCAmJiB1c2VEYXRhU291cmNlcy5sZW5ndGggPiAwICYmIDxPcHRpb24gaGVhZGVyPntnZXRJMThuTWVzc2FnZSgncHJlY29uZmlndXJlZCcpfTwvT3B0aW9uPn1cclxuICAgICAgICB7dXNlRGF0YVNvdXJjZXMubWFwKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICBjb25zdCBkcyA9IERhdGFTb3VyY2VNYW5hZ2VyLmdldEluc3RhbmNlKCkuZ2V0RGF0YVNvdXJjZShpdGVtLmRhdGFTb3VyY2VJZClcclxuICAgICAgICAgIGlmIChsb2FkZWRVc2VEYXRhU291cmNlcy5pbmNsdWRlcyhpdGVtLmRhdGFTb3VyY2VJZCkgfHwgZHM/LmdldExhYmVsKCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICA8T3B0aW9uIGtleT17aXRlbS5kYXRhU291cmNlSWR9IHZhbHVlPXtpdGVtLmRhdGFTb3VyY2VJZH0gb25DbGljaz17KCkgPT4geyBoYW5kbGVEYXRhU291cmNlQ2hhbmdlKGl0ZW0uZGF0YVNvdXJjZUlkKSB9fT5cclxuICAgICAgICAgICAgICB7ZHM/LmdldExhYmVsKCl9XHJcbiAgICAgICAgICAgICAgPC9PcHRpb24+XHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxPcHRpb24ga2V5PXtpdGVtLmRhdGFTb3VyY2VJZH0+XHJcbiAgICAgICAgICAgICAge3RyYW5zbGF0ZSgnbG9hZGluZycpfVxyXG4gICAgICAgICAgICA8L09wdGlvbj5cclxuICAgICAgICAgIClcclxuICAgICAgICB9KX1cclxuICAgICAgICB7bnVtT2ZSdW50aW1lRHMgPiAwICYmIHVzZURhdGFTb3VyY2VzLmxlbmd0aCA+IDAgJiYgPE9wdGlvbiBkaXZpZGVyLz59XHJcbiAgICAgICAge251bU9mUnVudGltZURzID4gMCAmJiA8T3B0aW9uIGhlYWRlcj57Z2V0STE4bk1lc3NhZ2UoJ3J1bnRpbWUnKX08L09wdGlvbj59XHJcbiAgICAgICAge09iamVjdC5rZXlzKHJ1bnRpbWVEYXRhU291cmNlcyA/PyB7fSkubWFwKGRzSWQgPT4ge1xyXG4gICAgICAgICAgY29uc3QgZHMgPSBydW50aW1lRGF0YVNvdXJjZXNbZHNJZF1cclxuICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxPcHRpb24ga2V5PXtkc0lkfSB2YWx1ZT17ZHNJZH0gb25DbGljaz17KCkgPT4geyBoYW5kbGVSdW50aW1lRGF0YVNvdXJjZUNoYW5nZShkc0lkKSB9fT5cclxuICAgICAgICAgICAgICB7ZHMuZ2V0TGFiZWwoKX1cclxuICAgICAgICAgICAgPC9PcHRpb24+XHJcbiAgICAgICAgICApXHJcbiAgICAgICAgfSl9XHJcbiAgICAgIDwvU2VsZWN0PlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT0nbXQtMSBmb250LWl0YWxpYycgY3NzPXtjc3NgY29sb3I6IHZhcigtLXN5cy1jb2xvci1zdXJmYWNlLXBhcGVyLWhpbnQpO2B9PntnZXRJMThuTWVzc2FnZSgnc2VsZWN0ZWRSZWNvcmRzJywgeyBudW06IGNvdW50IH0pfTwvZGl2PlxyXG4gICAgICB7c3BhdGlhbFJlbGF0aW9ucz8ubGVuZ3RoID4gMCAmJiAoXHJcbiAgICAgICAgPGRpdiBjc3M9e21hcmdpblN0eWxlfT5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd0ZXh0LXRydW5jYXRlIHRpdGxlMyBtYi0wJz57Z2V0STE4bk1lc3NhZ2UoJ3JlbGF0aW9uc2hpcCcpfTwvZGl2PlxyXG4gICAgICAgICAgPFNlbGVjdFxyXG4gICAgICAgICAgICBhcmlhLWxhYmVsPXtnZXRJMThuTWVzc2FnZSgncmVsYXRpb25zaGlwJyl9XHJcbiAgICAgICAgICAgIHZhbHVlPXtjdXJyZW50UmVsYXRpb259XHJcbiAgICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVTcGF0aWFsUmVsYXRpb25DaGFuZ2V9XHJcbiAgICAgICAgICA+XHJcbiAgICAgICAgICAgIHtzcGF0aWFsUmVsYXRpb25zLm1hcCgoaXRlbSkgPT4ge1xyXG4gICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICA8b3B0aW9uIGtleT17aXRlbX0gdmFsdWU9e2l0ZW19PntnZXRMYWJlbE9mU3BhdGlhbFJlbGF0aW9uKGl0ZW0pfTwvb3B0aW9uPlxyXG4gICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgfSl9XHJcbiAgICAgICAgICA8L1NlbGVjdD5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgKX1cclxuICAgICAge2VuYWJsZUJ1ZmZlciAmJiAoXHJcbiAgICAgICAgPGRpdiByb2xlPSdncm91cCcgYXJpYS1sYWJlbD17Z2V0STE4bk1lc3NhZ2UoJ3RoZUJ1ZmZlckRpc3RhbmNlJyl9IGNzcz17bWFyZ2luU3R5bGV9PlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3RpdGxlMyB0ZXh0LXRydW5jYXRlJz57Z2V0STE4bk1lc3NhZ2UoJ3RoZUJ1ZmZlckRpc3RhbmNlJyl9PC9kaXY+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZC1mbGV4IG10LTEnPlxyXG4gICAgICAgICAgICA8QnVmZmVySW5wdXQgZGlzdGFuY2U9e2J1ZmZlckRpc3RhbmNlfSB1bml0PXtidWZmZXJVbml0fSBvbkJ1ZmZlckNoYW5nZT17b25CdWZmZXJDaGFuZ2V9Lz5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICApfVxyXG4gICAgICA8RGF0YVNvdXJjZUNvbXBvbmVudCB1c2VEYXRhU291cmNlPXtjdXJyZW50RGF0YVNvdXJjZX0gZGF0YVNvdXJjZT17cnVudGltZURhdGFTb3VyY2V9IG9uRGF0YVNvdXJjZUluZm9DaGFuZ2U9e2hhbmRsZURhdGFTb3VyY2VJbmZvQ2hhbmdlfSAvPlxyXG4gICAgICB7dXNlRGF0YVNvdXJjZXMubWFwKChpdGVtKSA9PiB7XHJcbiAgICAgICAgLy8gbWFrZSBzdXJlIHRoZSBkYXRhc291cmNlIGlzIGNyZWF0ZWRcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgPERhdGFTb3VyY2VDb21wb25lbnQga2V5PXtpdGVtLmRhdGFTb3VyY2VJZH0gdXNlRGF0YVNvdXJjZT17aXRlbX0vPlxyXG4gICAgICAgIClcclxuICAgICAgfSl9XHJcbiAgICA8L2Rpdj5cclxuICApXHJcbn1cclxuIiwiLyoqIEBqc3gganN4ICovXHJcbmltcG9ydCB7IFJlYWN0LCBqc3gsIGxvYWRBcmNHSVNKU0FQSU1vZHVsZSwgdHlwZSBJbW11dGFibGVBcnJheSB9IGZyb20gJ2ppbXUtY29yZSdcclxuaW1wb3J0IHsgSmltdU1hcFZpZXdDb21wb25lbnQsIHR5cGUgSmltdU1hcFZpZXcsIGxvYWRBcmNHSVNKU0FQSU1vZHVsZXMgfSBmcm9tICdqaW11LWFyY2dpcydcclxuaW1wb3J0IHR5cGUgeyBDcmVhdGVUb29sVHlwZSB9IGZyb20gJy4uL2NvbmZpZydcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUHJvcHMge1xyXG4gIG1hcFdpZGdldElkczogSW1tdXRhYmxlQXJyYXk8c3RyaW5nPlxyXG4gIGNyZWF0ZVRvb2xUeXBlczogSW1tdXRhYmxlQXJyYXk8Q3JlYXRlVG9vbFR5cGU+XHJcbiAgb25HZW9tZXRyeUNoYW5nZTogKGdlb206IF9fZXNyaS5HZW9tZXRyeSwgbGF5ZXI/OiBfX2VzcmkuR3JhcGhpY3NMYXllciwgZ3JhcGhpYz86IF9fZXNyaS5HcmFwaGljLCBjbGVhckFmdGVyQXBwbHk/OiBib29sZWFuKSA9PiB2b2lkXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBHZW9tZXRyeUZyb21NYXAgKHByb3BzOiBQcm9wcykge1xyXG4gIGNvbnN0IHsgb25HZW9tZXRyeUNoYW5nZSwgbWFwV2lkZ2V0SWRzIH0gPSBwcm9wc1xyXG4gIGNvbnN0IFtqaW11TWFwVmlldywgc2V0SmltdU1hcFZpZXddID0gUmVhY3QudXNlU3RhdGU8SmltdU1hcFZpZXc+KG51bGwpXHJcbiAgY29uc3QgUG9seWdvblJlZiA9IFJlYWN0LnVzZVJlZjx0eXBlb2YgX19lc3JpLlBvbHlnb24+KG51bGwpXHJcblxyXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpZiAoamltdU1hcFZpZXc/LnZpZXcpIHtcclxuICAgICAgbGV0IGhhbmRsZXI6IElIYW5kbGVcclxuICAgICAgbG9hZEFyY0dJU0pTQVBJTW9kdWxlKCdlc3JpL2NvcmUvcmVhY3RpdmVVdGlscycpLnRoZW4oKHJlYWN0aXZlVXRpbHM6IF9fZXNyaS5yZWFjdGl2ZVV0aWxzKSA9PiB7XHJcbiAgICAgICAgaGFuZGxlciA9IHJlYWN0aXZlVXRpbHMud2F0Y2goKCkgPT4gamltdU1hcFZpZXcudmlldy5leHRlbnQsIChleHRlbnQ6IF9fZXNyaS5FeHRlbnQpID0+IHtcclxuICAgICAgICAgIGlmIChQb2x5Z29uUmVmLmN1cnJlbnQpIHtcclxuICAgICAgICAgICAgb25HZW9tZXRyeUNoYW5nZShQb2x5Z29uUmVmLmN1cnJlbnQuZnJvbUV4dGVudChleHRlbnQpKVxyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbG9hZEFyY0dJU0pTQVBJTW9kdWxlcyhbJ2VzcmkvZ2VvbWV0cnkvUG9seWdvbiddKS50aGVuKG1vZHVsZXMgPT4ge1xyXG4gICAgICAgICAgICAgIFBvbHlnb25SZWYuY3VycmVudCA9IG1vZHVsZXNbMF1cclxuICAgICAgICAgICAgICBvbkdlb21ldHJ5Q2hhbmdlKFBvbHlnb25SZWYuY3VycmVudC5mcm9tRXh0ZW50KGV4dGVudCkpXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICAvLyBzZXQgaW5pdGlhbCBleHRlbnRcclxuICAgICAgICBvbkdlb21ldHJ5Q2hhbmdlKGppbXVNYXBWaWV3LnZpZXcuZXh0ZW50KVxyXG4gICAgICB9KVxyXG4gICAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICAgIGlmIChoYW5kbGVyKSB7XHJcbiAgICAgICAgICBoYW5kbGVyLnJlbW92ZSgpXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSwgW2ppbXVNYXBWaWV3LCBvbkdlb21ldHJ5Q2hhbmdlXSlcclxuXHJcbiAgY29uc3QgaGFuZGxlSmltdU1hcFZpZXdDaGFuZ2VkID0gUmVhY3QudXNlQ2FsbGJhY2soKGppbXVNYXBWaWV3OiBKaW11TWFwVmlldykgPT4ge1xyXG4gICAgc2V0SmltdU1hcFZpZXcoamltdU1hcFZpZXc/LnZpZXcgIT0gbnVsbCA/IGppbXVNYXBWaWV3IDogbnVsbClcclxuICB9LCBbXSlcclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDxSZWFjdC5GcmFnbWVudD5cclxuICAgICAge1xyXG4gICAgICAgIG1hcFdpZGdldElkcz8ubWFwKChtYXBXaWRnZXRJZCwgeCkgPT4gKFxyXG4gICAgICAgICAgPEppbXVNYXBWaWV3Q29tcG9uZW50XHJcbiAgICAgICAgICAgIGtleT17eH0gdXNlTWFwV2lkZ2V0SWQ9e21hcFdpZGdldElkfSBvbkFjdGl2ZVZpZXdDaGFuZ2U9e2hhbmRsZUppbXVNYXBWaWV3Q2hhbmdlZH1cclxuICAgICAgICAgIC8+XHJcbiAgICAgICAgKSlcclxuICAgICAgfVxyXG4gICAgPC9SZWFjdC5GcmFnbWVudD5cclxuICApXHJcbn1cclxuIiwiLyoqXG4gKiBVdGlsaXR5IGZ1bmN0aW9ucyBmb3IgbWFuYWdpbmcgZ3JhcGhpY3MgbGF5ZXIgaGlnaGxpZ2h0aW5nIGluIFF1ZXJ5U2ltcGxlIHdpZGdldC5cbiAqIFByb3ZpZGVzIGhpZ2hsaWdodGluZyB0aGF0IHdvcmtzIGluZGVwZW5kZW50bHkgb2YgbGF5ZXIgdmlzaWJpbGl0eS5cbiAqL1xuXG5pbXBvcnQgdHlwZSB7IERhdGFTb3VyY2UsIEZlYXR1cmVMYXllckRhdGFTb3VyY2UsIEZlYXR1cmVEYXRhUmVjb3JkIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgRGF0YVNvdXJjZU1hbmFnZXIgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBsb2FkQXJjR0lTSlNBUElNb2R1bGVzIH0gZnJvbSAnamltdS1hcmNnaXMnXG5pbXBvcnQgeyBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyIH0gZnJvbSAnd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24nXG5cbmNvbnN0IGRlYnVnTG9nZ2VyID0gY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlcigpXG5cbi8vIEdsb2JhbCBzZXF1ZW5jZSBjb3VudGVyIGZvciBncmFwaGljcyBvcGVyYXRpb25zIHRvIHRyYWNrIHRpbWluZyBhY3Jvc3MgY2FsbHNcbmxldCBvcGVyYXRpb25TZXF1ZW5jZSA9IDBcblxuLyoqXG4gKiBHZXRzIHRoZSBtYXAgdmlldyBmcm9tIGEgZGF0YSBzb3VyY2UncyBvcmlnaW4gbGF5ZXIuXG4gKiBBY2Nlc3NlcyB0aGUgdmlldyB0aHJvdWdoIHRoZSBGZWF0dXJlTGF5ZXIncyB2aWV3IHByb3BlcnR5LlxuICogQHBhcmFtIG91dHB1dERTIC0gVGhlIG91dHB1dCBkYXRhIHNvdXJjZSAob3IgYW55IGRhdGEgc291cmNlKVxuICogQHJldHVybnMgUHJvbWlzZSByZXNvbHZpbmcgdG8gTWFwVmlldyBvciBTY2VuZVZpZXcsIG9yIG51bGwgaWYgbm90IGF2YWlsYWJsZVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0TWFwVmlld0Zyb21EYXRhU291cmNlKFxuICBvdXRwdXREUzogRGF0YVNvdXJjZSB8IG51bGwgfCB1bmRlZmluZWRcbik6IFByb21pc2U8X19lc3JpLk1hcFZpZXcgfCBfX2VzcmkuU2NlbmVWaWV3IHwgbnVsbD4ge1xuICBjb25zdCBzZXEgPSArK29wZXJhdGlvblNlcXVlbmNlXG4gIGlmICghb3V0cHV0RFMpIHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgZXZlbnQ6ICdnZXRNYXBWaWV3RnJvbURhdGFTb3VyY2Utbm8tb3V0cHV0RFMnLFxuICAgICAgc2VxLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgdHJ5IHtcbiAgICAvLyBHZXQgb3JpZ2luIGRhdGEgc291cmNlIHRvIGFjY2VzcyB0aGUgbGF5ZXJcbiAgICBjb25zdCBvcmlnaW5EYXRhU291cmNlcyA9IG91dHB1dERTLmdldE9yaWdpbkRhdGFTb3VyY2VzKClcbiAgICBjb25zdCBvcmlnaW5EUyA9IG9yaWdpbkRhdGFTb3VyY2VzPy5bMF0gYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICAgIFxuICAgIGlmICghb3JpZ2luRFMpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICAgIGV2ZW50OiAnZ2V0TWFwVmlld0Zyb21EYXRhU291cmNlLW5vLW9yaWdpbkRTJyxcbiAgICAgICAgb3V0cHV0RFNJZDogb3V0cHV0RFMuaWQsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuXG4gICAgLy8gQWNjZXNzIHRoZSBGZWF0dXJlTGF5ZXIgZnJvbSB0aGUgZGF0YSBzb3VyY2VcbiAgICBjb25zdCBsYXllciA9IChvcmlnaW5EUyBhcyBhbnkpLmxheWVyIHx8IChvcmlnaW5EUyBhcyBhbnkpLmdldExheWVyPy4oKVxuICAgIGlmICghbGF5ZXIpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICAgIGV2ZW50OiAnZ2V0TWFwVmlld0Zyb21EYXRhU291cmNlLW5vLWxheWVyJyxcbiAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuXG4gICAgLy8gTG9nIGxheWVyIHByb3BlcnRpZXMgdG8gdW5kZXJzdGFuZCBzdHJ1Y3R1cmVcbiAgICBjb25zdCBsYXllcktleXMgPSBPYmplY3Qua2V5cyhsYXllcikuZmlsdGVyKGtleSA9PiBcbiAgICAgICFrZXkuc3RhcnRzV2l0aCgnXycpICYmIFxuICAgICAgdHlwZW9mIChsYXllciBhcyBhbnkpW2tleV0gIT09ICdmdW5jdGlvbidcbiAgICApLnNsaWNlKDAsIDIwKSAvLyBMaW1pdCB0byBmaXJzdCAyMCBwcm9wZXJ0aWVzXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgIGV2ZW50OiAnZ2V0TWFwVmlld0Zyb21EYXRhU291cmNlLWxheWVyLWluc3BlY3Rpb24nLFxuICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICBsYXllcklkOiBsYXllci5pZCxcbiAgICAgIGxheWVyVHlwZTogbGF5ZXIudHlwZSB8fCAndW5rbm93bicsXG4gICAgICBsYXllcktleXM6IGxheWVyS2V5cyxcbiAgICAgIGhhc0xheWVyTWFwOiAhIShsYXllciBhcyBhbnkpLm1hcCxcbiAgICAgIGhhc0xheWVyVmlldzogISEobGF5ZXIgYXMgYW55KS52aWV3LFxuICAgICAgaGFzTGF5ZXJQYXJlbnQ6ICEhKGxheWVyIGFzIGFueSkucGFyZW50LFxuICAgICAgbGF5ZXJNYXBUeXBlOiAobGF5ZXIgYXMgYW55KS5tYXAgPyB0eXBlb2YgKGxheWVyIGFzIGFueSkubWFwIDogJ25vbmUnLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcblxuICAgIC8vIENoZWNrIGxheWVyLnBhcmVudCBmb3IgbWFwL3ZpZXcgYWNjZXNzIChzaW5jZSBoYXNMYXllclBhcmVudCBpcyB0cnVlKVxuICAgIGNvbnN0IHBhcmVudCA9IChsYXllciBhcyBhbnkpLnBhcmVudFxuICAgIGlmIChwYXJlbnQpIHtcbiAgICAgIC8vIExvZyBwYXJlbnQgcHJvcGVydGllc1xuICAgICAgY29uc3QgcGFyZW50S2V5cyA9IE9iamVjdC5rZXlzKHBhcmVudCkuZmlsdGVyKGtleSA9PiBcbiAgICAgICAgIWtleS5zdGFydHNXaXRoKCdfJykgJiYgXG4gICAgICAgIHR5cGVvZiAocGFyZW50IGFzIGFueSlba2V5XSAhPT0gJ2Z1bmN0aW9uJ1xuICAgICAgKS5zbGljZSgwLCAyMClcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgICAgZXZlbnQ6ICdnZXRNYXBWaWV3RnJvbURhdGFTb3VyY2UtbGF5ZXItcGFyZW50LWluc3BlY3Rpb24nLFxuICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgbGF5ZXJJZDogbGF5ZXIuaWQsXG4gICAgICAgIHBhcmVudFR5cGU6IHBhcmVudC50eXBlIHx8ICd1bmtub3duJyxcbiAgICAgICAgcGFyZW50S2V5czogcGFyZW50S2V5cyxcbiAgICAgICAgaGFzUGFyZW50TWFwOiAhIShwYXJlbnQgYXMgYW55KS5tYXAsXG4gICAgICAgIGhhc1BhcmVudFZpZXc6ICEhKHBhcmVudCBhcyBhbnkpLnZpZXcsXG4gICAgICAgIGhhc1BhcmVudFZpZXdzOiAhIShwYXJlbnQgYXMgYW55KS52aWV3cyxcbiAgICAgICAgcGFyZW50Vmlld3NMZW5ndGg6IChwYXJlbnQgYXMgYW55KS52aWV3cz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgIGhhc1BhcmVudEV4dGVudDogISEocGFyZW50IGFzIGFueSkuZXh0ZW50LFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIC8vIFRyeSB0byBnZXQgdmlldyBmcm9tIHBhcmVudFxuICAgICAgaWYgKChwYXJlbnQgYXMgYW55KS52aWV3KSB7XG4gICAgICAgIGNvbnN0IHZpZXcgPSAocGFyZW50IGFzIGFueSkudmlldyBhcyBfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXdcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgICAgICBldmVudDogJ2dldE1hcFZpZXdGcm9tRGF0YVNvdXJjZS1zdWNjZXNzLXZpYS1sYXllci1wYXJlbnQtdmlldycsXG4gICAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgICAgbGF5ZXJJZDogbGF5ZXIuaWQsXG4gICAgICAgICAgdmlld1R5cGU6IHZpZXcudHlwZSB8fCAndW5rbm93bicsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiB2aWV3XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFRyeSB0byBnZXQgbWFwIGZyb20gcGFyZW50IGFuZCB0aGVuIHZpZXdcbiAgICAgIGNvbnN0IHBhcmVudE1hcCA9IChwYXJlbnQgYXMgYW55KS5tYXBcbiAgICAgIGlmIChwYXJlbnRNYXApIHtcbiAgICAgICAgY29uc3QgdmlldyA9IHBhcmVudE1hcC52aWV3IHx8IFxuICAgICAgICAgICAgICAgICAgICAgKHBhcmVudE1hcC52aWV3cz8uZ2V0SXRlbUF0Py4oMCkpIHx8XG4gICAgICAgICAgICAgICAgICAgICAocGFyZW50TWFwLnZpZXdzPy5sZW5ndGggPiAwID8gcGFyZW50TWFwLnZpZXdzWzBdIDogbnVsbClcbiAgICAgICAgaWYgKHZpZXcpIHtcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgICAgICAgZXZlbnQ6ICdnZXRNYXBWaWV3RnJvbURhdGFTb3VyY2Utc3VjY2Vzcy12aWEtbGF5ZXItcGFyZW50LW1hcCcsXG4gICAgICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgICAgIGxheWVySWQ6IGxheWVyLmlkLFxuICAgICAgICAgICAgdmlld1R5cGU6IHZpZXcudHlwZSB8fCAndW5rbm93bicsXG4gICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICB9KVxuICAgICAgICAgIHJldHVybiB2aWV3IGFzIF9fZXNyaS5NYXBWaWV3IHwgX19lc3JpLlNjZW5lVmlld1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFBhcmVudCBtaWdodCBCRSB0aGUgdmlldyAoY2hlY2sgaWYgaXQgaGFzIHZpZXctbGlrZSBwcm9wZXJ0aWVzKVxuICAgICAgaWYgKHBhcmVudC50eXBlID09PSAnbWFwJyB8fCBwYXJlbnQudHlwZSA9PT0gJ3NjZW5lJyB8fCAocGFyZW50IGFzIGFueSkuZXh0ZW50KSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICAgICAgZXZlbnQ6ICdnZXRNYXBWaWV3RnJvbURhdGFTb3VyY2Utc3VjY2Vzcy12aWEtbGF5ZXItcGFyZW50LWlzLXZpZXcnLFxuICAgICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICAgIGxheWVySWQ6IGxheWVyLmlkLFxuICAgICAgICAgIHZpZXdUeXBlOiBwYXJlbnQudHlwZSB8fCAndW5rbm93bicsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiBwYXJlbnQgYXMgX19lc3JpLk1hcFZpZXcgfCBfX2VzcmkuU2NlbmVWaWV3XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gVHJ5IG11bHRpcGxlIGFwcHJvYWNoZXMgdG8gZ2V0IHRoZSB2aWV3OlxuICAgIC8vIDEuIExheWVyIG1pZ2h0IGhhdmUgYSBkaXJlY3QgdmlldyBwcm9wZXJ0eVxuICAgIGlmICgobGF5ZXIgYXMgYW55KS52aWV3KSB7XG4gICAgICBjb25zdCB2aWV3ID0gKGxheWVyIGFzIGFueSkudmlldyBhcyBfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXdcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICAgIGV2ZW50OiAnZ2V0TWFwVmlld0Zyb21EYXRhU291cmNlLXN1Y2Nlc3MtdmlhLWxheWVyLXZpZXcnLFxuICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgbGF5ZXJJZDogbGF5ZXIuaWQsXG4gICAgICAgIHZpZXdUeXBlOiB2aWV3LnR5cGUgfHwgJ3Vua25vd24nLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICByZXR1cm4gdmlld1xuICAgIH1cblxuICAgIC8vIDIuIFRyeSB0byBnZXQgbWFwIGZyb20gbGF5ZXIgYW5kIHRoZW4gdmlldyBmcm9tIG1hcFxuICAgIGNvbnN0IG1hcCA9IChsYXllciBhcyBhbnkpLm1hcCB8fCBcbiAgICAgICAgICAgICAgICAobGF5ZXIgYXMgYW55KS5wYXJlbnQ/Lm1hcCB8fFxuICAgICAgICAgICAgICAgIChsYXllciBhcyBhbnkpLl9fbWFwIHx8XG4gICAgICAgICAgICAgICAgKGxheWVyIGFzIGFueSkuX21hcFxuICAgIFxuICAgIGlmIChtYXApIHtcbiAgICAgIC8vIExvZyBtYXAgcHJvcGVydGllc1xuICAgICAgY29uc3QgbWFwS2V5cyA9IE9iamVjdC5rZXlzKG1hcCkuZmlsdGVyKGtleSA9PiBcbiAgICAgICAgIWtleS5zdGFydHNXaXRoKCdfJykgJiYgXG4gICAgICAgIHR5cGVvZiAobWFwIGFzIGFueSlba2V5XSAhPT0gJ2Z1bmN0aW9uJ1xuICAgICAgKS5zbGljZSgwLCAyMClcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgICAgZXZlbnQ6ICdnZXRNYXBWaWV3RnJvbURhdGFTb3VyY2UtbWFwLWZvdW5kJyxcbiAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgIGxheWVySWQ6IGxheWVyLmlkLFxuICAgICAgICBtYXBJZDogbWFwLmlkIHx8ICd1bmtub3duJyxcbiAgICAgICAgbWFwS2V5czogbWFwS2V5cyxcbiAgICAgICAgaGFzTWFwVmlldzogISFtYXAudmlldyxcbiAgICAgICAgaGFzTWFwVmlld3M6ICEhKG1hcC52aWV3cyksXG4gICAgICAgIG1hcFZpZXdzTGVuZ3RoOiBtYXAudmlld3M/Lmxlbmd0aCB8fCAwLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGNvbnN0IHZpZXcgPSBtYXAudmlldyB8fCBcbiAgICAgICAgICAgICAgICAgICAobWFwLnZpZXdzPy5nZXRJdGVtQXQ/LigwKSkgfHxcbiAgICAgICAgICAgICAgICAgICAobWFwLnZpZXdzPy5sZW5ndGggPiAwID8gbWFwLnZpZXdzWzBdIDogbnVsbCkgfHxcbiAgICAgICAgICAgICAgICAgICAobWFwLnZpZXdzICYmIG1hcC52aWV3cy5sZW5ndGggPiAwID8gbWFwLnZpZXdzLmdldEl0ZW1BdCgwKSA6IG51bGwpXG4gICAgICBcbiAgICAgIGlmICh2aWV3KSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICAgICAgZXZlbnQ6ICdnZXRNYXBWaWV3RnJvbURhdGFTb3VyY2Utc3VjY2Vzcy12aWEtbGF5ZXItbWFwJyxcbiAgICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgICBsYXllcklkOiBsYXllci5pZCxcbiAgICAgICAgICB2aWV3VHlwZTogdmlldy50eXBlIHx8ICd1bmtub3duJyxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIHZpZXcgYXMgX19lc3JpLk1hcFZpZXcgfCBfX2VzcmkuU2NlbmVWaWV3XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gMy4gVHJ5IHRvIGdldCByb290IGRhdGEgc291cmNlIGFuZCBhY2Nlc3MgbWFwIGZyb20gdGhlcmVcbiAgICBjb25zdCByb290RFMgPSBvcmlnaW5EUy5nZXRSb290RGF0YVNvdXJjZSgpXG4gICAgaWYgKHJvb3REUykge1xuICAgICAgY29uc3Qgcm9vdE1hcCA9IChyb290RFMgYXMgYW55KS5nZXRNYXA/LigpIHx8IFxuICAgICAgICAgICAgICAgICAgICAgIChyb290RFMgYXMgYW55KS5tYXAgfHxcbiAgICAgICAgICAgICAgICAgICAgICAocm9vdERTIGFzIGFueSkuX19tYXAgfHxcbiAgICAgICAgICAgICAgICAgICAgICAocm9vdERTIGFzIGFueSkuX21hcFxuICAgICAgXG4gICAgICBpZiAocm9vdE1hcCkge1xuICAgICAgICAvLyBMb2cgcm9vdCBtYXAgcHJvcGVydGllc1xuICAgICAgICBjb25zdCByb290TWFwS2V5cyA9IE9iamVjdC5rZXlzKHJvb3RNYXApLmZpbHRlcihrZXkgPT4gXG4gICAgICAgICAgIWtleS5zdGFydHNXaXRoKCdfJykgJiYgXG4gICAgICAgICAgdHlwZW9mIChyb290TWFwIGFzIGFueSlba2V5XSAhPT0gJ2Z1bmN0aW9uJ1xuICAgICAgICApLnNsaWNlKDAsIDIwKVxuICAgICAgICBcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgICAgICBldmVudDogJ2dldE1hcFZpZXdGcm9tRGF0YVNvdXJjZS1yb290LW1hcC1mb3VuZCcsXG4gICAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgICAgcm9vdERTSWQ6IHJvb3REUy5pZCxcbiAgICAgICAgICByb290RFNUeXBlOiByb290RFMudHlwZSxcbiAgICAgICAgICByb290TWFwSWQ6IHJvb3RNYXAuaWQgfHwgJ3Vua25vd24nLFxuICAgICAgICAgIHJvb3RNYXBLZXlzOiByb290TWFwS2V5cyxcbiAgICAgICAgICBoYXNSb290TWFwVmlldzogISFyb290TWFwLnZpZXcsXG4gICAgICAgICAgaGFzUm9vdE1hcFZpZXdzOiAhIShyb290TWFwLnZpZXdzKSxcbiAgICAgICAgICByb290TWFwVmlld3NMZW5ndGg6IHJvb3RNYXAudmlld3M/Lmxlbmd0aCB8fCAwLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9KVxuICAgICAgICBcbiAgICAgICAgY29uc3QgdmlldyA9IHJvb3RNYXAudmlldyB8fCBcbiAgICAgICAgICAgICAgICAgICAgIChyb290TWFwLnZpZXdzPy5nZXRJdGVtQXQ/LigwKSkgfHxcbiAgICAgICAgICAgICAgICAgICAgIChyb290TWFwLnZpZXdzPy5sZW5ndGggPiAwID8gcm9vdE1hcC52aWV3c1swXSA6IG51bGwpIHx8XG4gICAgICAgICAgICAgICAgICAgICAocm9vdE1hcC52aWV3cyAmJiByb290TWFwLnZpZXdzLmxlbmd0aCA+IDAgPyByb290TWFwLnZpZXdzLmdldEl0ZW1BdCgwKSA6IG51bGwpXG4gICAgICAgIFxuICAgICAgICBpZiAodmlldykge1xuICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICAgICAgICBldmVudDogJ2dldE1hcFZpZXdGcm9tRGF0YVNvdXJjZS1zdWNjZXNzLXZpYS1yb290RFMnLFxuICAgICAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgICAgICByb290RFNJZDogcm9vdERTLmlkLFxuICAgICAgICAgICAgdmlld1R5cGU6IHZpZXcudHlwZSB8fCAndW5rbm93bicsXG4gICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICB9KVxuICAgICAgICAgIHJldHVybiB2aWV3IGFzIF9fZXNyaS5NYXBWaWV3IHwgX19lc3JpLlNjZW5lVmlld1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBMb2cgcm9vdCBEUyBwcm9wZXJ0aWVzIHRvIHNlZSB3aGF0J3MgYXZhaWxhYmxlXG4gICAgICAgIGNvbnN0IHJvb3REU0tleXMgPSBPYmplY3Qua2V5cyhyb290RFMpLmZpbHRlcihrZXkgPT4gXG4gICAgICAgICAgIWtleS5zdGFydHNXaXRoKCdfJykgJiYgXG4gICAgICAgICAgdHlwZW9mIChyb290RFMgYXMgYW55KVtrZXldICE9PSAnZnVuY3Rpb24nXG4gICAgICAgICkuc2xpY2UoMCwgMjApXG4gICAgICAgIFxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgICAgIGV2ZW50OiAnZ2V0TWFwVmlld0Zyb21EYXRhU291cmNlLXJvb3QtZHMtaW5zcGVjdGlvbicsXG4gICAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgICAgcm9vdERTSWQ6IHJvb3REUy5pZCxcbiAgICAgICAgICByb290RFNUeXBlOiByb290RFMudHlwZSxcbiAgICAgICAgICByb290RFNLZXlzOiByb290RFNLZXlzLFxuICAgICAgICAgIGhhc0dldE1hcDogdHlwZW9mIChyb290RFMgYXMgYW55KS5nZXRNYXAgPT09ICdmdW5jdGlvbicsXG4gICAgICAgICAgaGFzTWFwOiAhIShyb290RFMgYXMgYW55KS5tYXAsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuXG4gICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgIGV2ZW50OiAnZ2V0TWFwVmlld0Zyb21EYXRhU291cmNlLW5vLXZpZXcnLFxuICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICBsYXllcklkOiBsYXllci5pZCxcbiAgICAgIGhhc0xheWVyTWFwOiAhIW1hcCxcbiAgICAgIGhhc1Jvb3REUzogISFyb290RFMsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIHJldHVybiBudWxsXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgIGV2ZW50OiAnZ2V0TWFwVmlld0Zyb21EYXRhU291cmNlLWVycm9yJyxcbiAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvciksXG4gICAgICBlcnJvclN0YWNrOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWQsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIHJldHVybiBudWxsXG4gIH1cbn1cblxuLyoqXG4gKiBHZXRzIHRoZSBkZWZhdWx0IGhpZ2hsaWdodCBzeW1ib2wgYmFzZWQgb24gZ2VvbWV0cnkgdHlwZS5cbiAqIFVzZXMgdGhlIG1hcCdzIGFjdHVhbCBoaWdobGlnaHQgY29sb3IgZnJvbSBoaWdobGlnaHRPcHRpb25zIHRvIG1hdGNoIHN0YW5kYXJkIHNlbGVjdGlvbiBhcHBlYXJhbmNlLlxuICovXG5mdW5jdGlvbiBnZXREZWZhdWx0SGlnaGxpZ2h0U3ltYm9sKFxuICBnZW9tZXRyeVR5cGU6IHN0cmluZyxcbiAgbWFwVmlldzogX19lc3JpLk1hcFZpZXcgfCBfX2VzcmkuU2NlbmVWaWV3XG4pOiBfX2VzcmkuU3ltYm9sIHtcbiAgLy8gR2V0IGRlZmF1bHQgaGlnaGxpZ2h0IGNvbG9yIGZyb20gdmlldydzIGhpZ2hsaWdodE9wdGlvbnNcbiAgY29uc3QgaGlnaGxpZ2h0T3B0aW9ucyA9IChtYXBWaWV3LmhpZ2hsaWdodE9wdGlvbnMgfHwge30pIGFzIF9fZXNyaS5IaWdobGlnaHRPcHRpb25zXG4gIFxuICAvLyBFeHRyYWN0IGNvbG9yIC0gY291bGQgYmUgYXJyYXkgW1IsRyxCLEFdIG9yIENvbG9yIG9iamVjdFxuICBsZXQgaGlnaGxpZ2h0Q29sb3I6IG51bWJlcltdIHwgbnVsbCA9IG51bGxcbiAgXG4gIGlmIChoaWdobGlnaHRPcHRpb25zLmNvbG9yKSB7XG4gICAgLy8gSWYgaXQncyBhIENvbG9yIG9iamVjdCwgY29udmVydCB0byBhcnJheVxuICAgIGlmICh0eXBlb2YgaGlnaGxpZ2h0T3B0aW9ucy5jb2xvciA9PT0gJ29iamVjdCcgJiYgJ3RvUmdiYScgaW4gaGlnaGxpZ2h0T3B0aW9ucy5jb2xvcikge1xuICAgICAgaGlnaGxpZ2h0Q29sb3IgPSAoaGlnaGxpZ2h0T3B0aW9ucy5jb2xvciBhcyBhbnkpLnRvUmdiYSgpXG4gICAgfSBcbiAgICAvLyBJZiBpdCdzIGFscmVhZHkgYW4gYXJyYXlcbiAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KGhpZ2hsaWdodE9wdGlvbnMuY29sb3IpKSB7XG4gICAgICBoaWdobGlnaHRDb2xvciA9IGhpZ2hsaWdodE9wdGlvbnMuY29sb3JcbiAgICB9XG4gIH1cbiAgXG4gIC8vIElmIG5vIGNvbG9yIGluIGhpZ2hsaWdodE9wdGlvbnMsIHVzZSB0aGUgQXJjR0lTIGRvY3VtZW50ZWQgZGVmYXVsdDogY3lhbiBbMCwgMjU1LCAyNTVdXG4gIGlmICghaGlnaGxpZ2h0Q29sb3IpIHtcbiAgICBoaWdobGlnaHRDb2xvciA9IFswLCAyNTUsIDI1NSwgMS4wXSAvLyBGdWxsIG9wYWNpdHkgZGVmYXVsdFxuICB9XG4gIFxuICAvLyBFbnN1cmUgd2UgaGF2ZSA0IGVsZW1lbnRzIFtSLCBHLCBCLCBBXVxuICBjb25zdCBiYXNlQ29sb3IgPSBoaWdobGlnaHRDb2xvci5zbGljZSgwLCAzKVxuICBjb25zdCBiYXNlQWxwaGEgPSBoaWdobGlnaHRDb2xvci5sZW5ndGggPj0gNCA/IGhpZ2hsaWdodENvbG9yWzNdIDogMS4wXG4gIFxuICAvLyBHZXQgZmlsbCBvcGFjaXR5IGZyb20gaGlnaGxpZ2h0T3B0aW9ucyBvciB1c2UgZGVmYXVsdFxuICBjb25zdCBmaWxsT3BhY2l0eSA9IGhpZ2hsaWdodE9wdGlvbnMuZmlsbE9wYWNpdHkgIT09IHVuZGVmaW5lZCBcbiAgICA/IGhpZ2hsaWdodE9wdGlvbnMuZmlsbE9wYWNpdHkgXG4gICAgOiAwLjI1IC8vIERlZmF1bHQgMjUlIG9wYWNpdHkgZm9yIGZpbGxcbiAgY29uc3QgZmlsbENvbG9yID0gWy4uLmJhc2VDb2xvciwgZmlsbE9wYWNpdHldXG4gIFxuICAvLyBHZXQgaGFsbyBvcGFjaXR5IG9yIHVzZSBkZWZhdWx0IC0gZm9yIG91dGxpbmVzIGFuZCBsaW5lc1xuICBjb25zdCBoYWxvT3BhY2l0eSA9IGhpZ2hsaWdodE9wdGlvbnMuaGFsb09wYWNpdHkgIT09IHVuZGVmaW5lZFxuICAgID8gaGlnaGxpZ2h0T3B0aW9ucy5oYWxvT3BhY2l0eVxuICAgIDogYmFzZUFscGhhIC8vIFVzZSB0aGUgY29sb3IncyBhbHBoYSBpZiBhdmFpbGFibGUsIG90aGVyd2lzZSAxLjBcbiAgY29uc3Qgb3V0bGluZUNvbG9yID0gWy4uLmJhc2VDb2xvciwgaGFsb09wYWNpdHldXG4gIFxuICAvLyBGb3IgbGluZXMsIHVzZSBmdWxsIG9wYWNpdHkgdG8gZW5zdXJlIHZpc2liaWxpdHlcbiAgY29uc3QgbGluZU9wYWNpdHkgPSBoaWdobGlnaHRPcHRpb25zLmhhbG9PcGFjaXR5ICE9PSB1bmRlZmluZWRcbiAgICA/IE1hdGgubWF4KGhpZ2hsaWdodE9wdGlvbnMuaGFsb09wYWNpdHksIDAuOCkgLy8gQXQgbGVhc3QgODAlIG9wYWNpdHlcbiAgICA6IGJhc2VBbHBoYSAvLyBVc2UgdGhlIGNvbG9yJ3MgYWxwaGEsIG9yIGRlZmF1bHQgdG8gMS4wXG4gIGNvbnN0IGxpbmVDb2xvciA9IFsuLi5iYXNlQ29sb3IsIGxpbmVPcGFjaXR5XVxuICBcbiAgc3dpdGNoIChnZW9tZXRyeVR5cGUpIHtcbiAgICBjYXNlICdwb2ludCc6XG4gICAgY2FzZSAnbXVsdGlwb2ludCc6XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnc2ltcGxlLW1hcmtlcicsXG4gICAgICAgIGNvbG9yOiBvdXRsaW5lQ29sb3IsXG4gICAgICAgIG91dGxpbmU6IHtcbiAgICAgICAgICBjb2xvcjogb3V0bGluZUNvbG9yLFxuICAgICAgICAgIHdpZHRoOiAyXG4gICAgICAgIH0sXG4gICAgICAgIHNpemU6IDEyXG4gICAgICB9IGFzIHVua25vd24gYXMgX19lc3JpLlNpbXBsZU1hcmtlclN5bWJvbFxuICAgICAgXG4gICAgY2FzZSAncG9seWxpbmUnOlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ3NpbXBsZS1saW5lJyxcbiAgICAgICAgY29sb3I6IGxpbmVDb2xvciwgLy8gVXNlIGxpbmVDb2xvciB3aXRoIHByb3BlciBvcGFjaXR5XG4gICAgICAgIHdpZHRoOiA0IC8vIEluY3JlYXNlZCB3aWR0aCBmb3IgdmlzaWJpbGl0eVxuICAgICAgfSBhcyB1bmtub3duIGFzIF9fZXNyaS5TaW1wbGVMaW5lU3ltYm9sXG4gICAgICBcbiAgICBjYXNlICdwb2x5Z29uJzpcbiAgICBjYXNlICdtdWx0aXBvbHlnb24nOlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ3NpbXBsZS1maWxsJyxcbiAgICAgICAgY29sb3I6IGZpbGxDb2xvcixcbiAgICAgICAgb3V0bGluZToge1xuICAgICAgICAgIGNvbG9yOiBvdXRsaW5lQ29sb3IsXG4gICAgICAgICAgd2lkdGg6IDJcbiAgICAgICAgfVxuICAgICAgfSBhcyB1bmtub3duIGFzIF9fZXNyaS5TaW1wbGVGaWxsU3ltYm9sXG4gICAgICBcbiAgICBkZWZhdWx0OlxuICAgICAgLy8gRmFsbGJhY2sgdG8gcG9seWdvbiBzeW1ib2xcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdzaW1wbGUtZmlsbCcsXG4gICAgICAgIGNvbG9yOiBmaWxsQ29sb3IsXG4gICAgICAgIG91dGxpbmU6IHtcbiAgICAgICAgICBjb2xvcjogb3V0bGluZUNvbG9yLFxuICAgICAgICAgIHdpZHRoOiAyXG4gICAgICAgIH1cbiAgICAgIH0gYXMgdW5rbm93biBhcyBfX2VzcmkuU2ltcGxlRmlsbFN5bWJvbFxuICB9XG59XG5cbi8qKlxuICogQ3JlYXRlcyBvciBnZXRzIGFuIGV4aXN0aW5nIGdyYXBoaWNzIGxheWVyIGZvciB0aGUgd2lkZ2V0LlxuICogVXNlcyBhIHVuaXF1ZSBJRCBiYXNlZCBvbiB3aWRnZXQgSUQgdG8gZW5zdXJlIG9uZSBsYXllciBwZXIgd2lkZ2V0LlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlT3JHZXRHcmFwaGljc0xheWVyKFxuICB3aWRnZXRJZDogc3RyaW5nLFxuICBtYXBWaWV3OiBfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXdcbik6IFByb21pc2U8X19lc3JpLkdyYXBoaWNzTGF5ZXIgfCBudWxsPiB7XG4gIGNvbnN0IHNlcSA9ICsrb3BlcmF0aW9uU2VxdWVuY2VcbiAgY29uc3QgbGF5ZXJJZCA9IGBxdWVyeXNpbXBsZS1oaWdobGlnaHQtJHt3aWRnZXRJZH1gXG4gIFxuICB0cnkge1xuICAgIC8vIENoZWNrIGlmIGxheWVyIGFscmVhZHkgZXhpc3RzXG4gICAgY29uc3QgZXhpc3RpbmdMYXllciA9IG1hcFZpZXcubWFwLmxheWVycy5maW5kKGxheWVyID0+IGxheWVyLmlkID09PSBsYXllcklkKSBhcyBfX2VzcmkuR3JhcGhpY3NMYXllclxuICAgIGlmIChleGlzdGluZ0xheWVyKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgICBldmVudDogJ2NyZWF0ZU9yR2V0R3JhcGhpY3NMYXllci1mb3VuZC1leGlzdGluZycsXG4gICAgICAgIHNlcSxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIGxheWVySWQsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIHJldHVybiBleGlzdGluZ0xheWVyXG4gICAgfVxuXG4gICAgLy8gTG9hZCBHcmFwaGljc0xheWVyIG1vZHVsZVxuICAgIGNvbnN0IFtHcmFwaGljc0xheWVyXSA9IGF3YWl0IGxvYWRBcmNHSVNKU0FQSU1vZHVsZXMoWydlc3JpL2xheWVycy9HcmFwaGljc0xheWVyJ10pXG4gICAgXG4gICAgLy8gQ3JlYXRlIG5ldyBncmFwaGljcyBsYXllclxuICAgIGNvbnN0IGdyYXBoaWNzTGF5ZXIgPSBuZXcgR3JhcGhpY3NMYXllcih7XG4gICAgICBpZDogbGF5ZXJJZCxcbiAgICAgIHRpdGxlOiBgUXVlcnlTaW1wbGUgSGlnaGxpZ2h0cyAoJHt3aWRnZXRJZH0pYCxcbiAgICAgIGxpc3RNb2RlOiAnaGlkZScsIC8vIEhpZGUgZnJvbSBsYXllciBsaXN0XG4gICAgICB2aXNpYmxlOiB0cnVlXG4gICAgfSlcbiAgICBcbiAgICAvLyBBZGQgdG8gbWFwXG4gICAgbWFwVmlldy5tYXAuYWRkKGdyYXBoaWNzTGF5ZXIpXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgIGV2ZW50OiAnY3JlYXRlT3JHZXRHcmFwaGljc0xheWVyLWNyZWF0ZWQnLFxuICAgICAgc2VxLFxuICAgICAgd2lkZ2V0SWQsXG4gICAgICBsYXllcklkLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICByZXR1cm4gZ3JhcGhpY3NMYXllclxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICBldmVudDogJ2NyZWF0ZU9yR2V0R3JhcGhpY3NMYXllci1lcnJvcicsXG4gICAgICBzZXEsXG4gICAgICB3aWRnZXRJZCxcbiAgICAgIGxheWVySWQsXG4gICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpLFxuICAgICAgZXJyb3JTdGFjazogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnN0YWNrIDogdW5kZWZpbmVkLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICByZXR1cm4gbnVsbFxuICB9XG59XG5cbi8qKlxuICogQWRkcyBoaWdobGlnaHQgZ3JhcGhpY3MgdG8gdGhlIGdyYXBoaWNzIGxheWVyIHVzaW5nIGRlZmF1bHQgbWFwIGhpZ2hsaWdodCBjb2xvci5cbiAqIE5vdGU6IFRoaXMgZnVuY3Rpb24gc2hvdWxkIGJlIGNhbGxlZCBhZnRlciBHcmFwaGljc0xheWVyIG1vZHVsZSBpcyBsb2FkZWQuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhZGRIaWdobGlnaHRHcmFwaGljcyhcbiAgZ3JhcGhpY3NMYXllcjogX19lc3JpLkdyYXBoaWNzTGF5ZXIsXG4gIHJlY29yZHM6IEZlYXR1cmVEYXRhUmVjb3JkW10sXG4gIG1hcFZpZXc6IF9fZXNyaS5NYXBWaWV3IHwgX19lc3JpLlNjZW5lVmlld1xuKTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnN0IHNlcSA9ICsrb3BlcmF0aW9uU2VxdWVuY2VcbiAgaWYgKCFncmFwaGljc0xheWVyIHx8ICFyZWNvcmRzIHx8IHJlY29yZHMubGVuZ3RoID09PSAwKSB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgIGV2ZW50OiAnYWRkSGlnaGxpZ2h0R3JhcGhpY3Mtc2tpcHBlZCcsXG4gICAgICBzZXEsXG4gICAgICByZWFzb246ICFncmFwaGljc0xheWVyID8gJ25vLWdyYXBoaWNzLWxheWVyJyA6ICduby1yZWNvcmRzJyxcbiAgICAgIHJlY29yZHNDb3VudDogcmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIHJldHVyblxuICB9XG5cbiAgLy8gTG9nIGV4aXN0aW5nIHN0YXRlIEJFRk9SRSBhZGRpbmcgLSB2ZXJpZnkgYXNzdW1wdGlvbiBhYm91dCBkdXBsaWNhdGVzXG4gIGNvbnN0IGV4aXN0aW5nR3JhcGhpY3NDb3VudCA9IGdyYXBoaWNzTGF5ZXIuZ3JhcGhpY3MubGVuZ3RoXG4gIGNvbnN0IGV4aXN0aW5nUmVjb3JkSWRzOiBzdHJpbmdbXSA9IFtdXG4gIGNvbnN0IGV4aXN0aW5nUmVjb3JkSWRTZXQgPSBuZXcgU2V0PHN0cmluZz4oKVxuICBcbiAgZ3JhcGhpY3NMYXllci5ncmFwaGljcy5mb3JFYWNoKGdyYXBoaWMgPT4ge1xuICAgIGNvbnN0IHJlY29yZElkID0gZ3JhcGhpYy5hdHRyaWJ1dGVzPy5yZWNvcmRJZFxuICAgIGlmIChyZWNvcmRJZCkge1xuICAgICAgZXhpc3RpbmdSZWNvcmRJZHMucHVzaChyZWNvcmRJZClcbiAgICAgIGV4aXN0aW5nUmVjb3JkSWRTZXQuYWRkKHJlY29yZElkKVxuICAgIH1cbiAgfSlcblxuICAvLyBMb2cgd2hhdCB3ZSdyZSB0cnlpbmcgdG8gYWRkXG4gIGNvbnN0IGluY29taW5nUmVjb3JkSWRzID0gcmVjb3Jkcy5tYXAociA9PiByLmdldElkKCkpXG5cbiAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICBldmVudDogJ2FkZEhpZ2hsaWdodEdyYXBoaWNzLWJlZm9yZS1hZGQnLFxuICAgIHNlcSxcbiAgICBncmFwaGljc0xheWVySWQ6IGdyYXBoaWNzTGF5ZXIuaWQsXG4gICAgZXhpc3RpbmdHcmFwaGljc0NvdW50LFxuICAgIGV4aXN0aW5nUmVjb3JkSWRzOiBleGlzdGluZ1JlY29yZElkcy5zbGljZSgwLCAyMCksIC8vIExpbWl0IHRvIGZpcnN0IDIwIGZvciByZWFkYWJpbGl0eVxuICAgIGV4aXN0aW5nUmVjb3JkSWRzQ291bnQ6IGV4aXN0aW5nUmVjb3JkSWRzLmxlbmd0aCxcbiAgICBpbmNvbWluZ1JlY29yZElkczogaW5jb21pbmdSZWNvcmRJZHMuc2xpY2UoMCwgMjApLCAvLyBMaW1pdCB0byBmaXJzdCAyMFxuICAgIGluY29taW5nUmVjb3JkSWRzQ291bnQ6IGluY29taW5nUmVjb3JkSWRzLmxlbmd0aCxcbiAgICBkdXBsaWNhdGVSZWNvcmRJZHM6IGluY29taW5nUmVjb3JkSWRzLmZpbHRlcihpZCA9PiBleGlzdGluZ1JlY29yZElkU2V0LmhhcyhpZCkpLnNsaWNlKDAsIDIwKSxcbiAgICBkdXBsaWNhdGVDb3VudDogaW5jb21pbmdSZWNvcmRJZHMuZmlsdGVyKGlkID0+IGV4aXN0aW5nUmVjb3JkSWRTZXQuaGFzKGlkKSkubGVuZ3RoLFxuICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICB9KVxuXG4gIC8vIExvYWQgR3JhcGhpYyBtb2R1bGVcbiAgY29uc3QgW0dyYXBoaWNdID0gYXdhaXQgbG9hZEFyY0dJU0pTQVBJTW9kdWxlcyhbJ2VzcmkvR3JhcGhpYyddKVxuXG4gIGxldCBhZGRlZENvdW50ID0gMFxuICBsZXQgc2tpcHBlZENvdW50ID0gMFxuICBsZXQgZHVwbGljYXRlQ291bnQgPSAwXG4gIGNvbnN0IGFkZGVkUmVjb3JkSWRzOiBzdHJpbmdbXSA9IFtdXG4gIGNvbnN0IHNraXBwZWRSZWNvcmRJZHM6IHN0cmluZ1tdID0gW11cbiAgY29uc3QgZHVwbGljYXRlUmVjb3JkSWRzOiBzdHJpbmdbXSA9IFtdXG5cbiAgcmVjb3Jkcy5mb3JFYWNoKHJlY29yZCA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlY29yZElkID0gcmVjb3JkLmdldElkKClcbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgaWYgdGhpcyByZWNvcmQgSUQgYWxyZWFkeSBleGlzdHMgaW4gZ3JhcGhpY3MgbGF5ZXJcbiAgICAgIGlmIChleGlzdGluZ1JlY29yZElkU2V0LmhhcyhyZWNvcmRJZCkpIHtcbiAgICAgICAgZHVwbGljYXRlQ291bnQrK1xuICAgICAgICBkdXBsaWNhdGVSZWNvcmRJZHMucHVzaChyZWNvcmRJZClcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgICAgICBldmVudDogJ2FkZEhpZ2hsaWdodEdyYXBoaWNzLWR1cGxpY2F0ZS1kZXRlY3RlZCcsXG4gICAgICAgICAgc2VxLFxuICAgICAgICAgIHJlY29yZElkLFxuICAgICAgICAgIGdyYXBoaWNzTGF5ZXJJZDogZ3JhcGhpY3NMYXllci5pZCxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIC8vIFNraXAgYWRkaW5nIGR1cGxpY2F0ZVxuICAgICAgfVxuXG4gICAgICBjb25zdCBncmFwaGljID0gcmVjb3JkLmZlYXR1cmUgYXMgX19lc3JpLkdyYXBoaWNcbiAgICAgIGlmICghZ3JhcGhpYyB8fCAhZ3JhcGhpYy5nZW9tZXRyeSkge1xuICAgICAgICBza2lwcGVkQ291bnQrK1xuICAgICAgICBza2lwcGVkUmVjb3JkSWRzLnB1c2gocmVjb3JkSWQpXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICAvLyBHZXQgZ2VvbWV0cnkgdHlwZSBmcm9tIGdyYXBoaWNcbiAgICAgIGNvbnN0IGdlb21ldHJ5VHlwZSA9IGdyYXBoaWMuZ2VvbWV0cnkudHlwZVxuXG4gICAgICAvLyBDcmVhdGUgc3ltYm9sIHVzaW5nIGRlZmF1bHQgaGlnaGxpZ2h0IGNvbG9yXG4gICAgICBjb25zdCBzeW1ib2wgPSBnZXREZWZhdWx0SGlnaGxpZ2h0U3ltYm9sKGdlb21ldHJ5VHlwZSwgbWFwVmlldylcblxuICAgICAgLy8gQ3JlYXRlIG5ldyBncmFwaGljIHdpdGggaGlnaGxpZ2h0IHN5bWJvbFxuICAgICAgY29uc3QgaGlnaGxpZ2h0R3JhcGhpYyA9IG5ldyBHcmFwaGljKHtcbiAgICAgICAgZ2VvbWV0cnk6IGdyYXBoaWMuZ2VvbWV0cnksXG4gICAgICAgIHN5bWJvbDogc3ltYm9sLFxuICAgICAgICBhdHRyaWJ1dGVzOiB7XG4gICAgICAgICAgcmVjb3JkSWQ6IHJlY29yZElkLFxuICAgICAgICAgIHNvdXJjZTogJ3F1ZXJ5c2ltcGxlLWhpZ2hsaWdodCcsXG4gICAgICAgICAgd2lkZ2V0SWQ6IGdyYXBoaWNzTGF5ZXIuaWQucmVwbGFjZSgncXVlcnlzaW1wbGUtaGlnaGxpZ2h0LScsICcnKVxuICAgICAgICB9XG4gICAgICB9KVxuXG4gICAgICBncmFwaGljc0xheWVyLmFkZChoaWdobGlnaHRHcmFwaGljKVxuICAgICAgYWRkZWRDb3VudCsrXG4gICAgICBhZGRlZFJlY29yZElkcy5wdXNoKHJlY29yZElkKVxuICAgICAgXG4gICAgICAvLyBBZGQgdG8gdHJhY2tpbmcgc2V0IHRvIHByZXZlbnQgZHVwbGljYXRlcyB3aXRoaW4gdGhpcyBiYXRjaFxuICAgICAgZXhpc3RpbmdSZWNvcmRJZFNldC5hZGQocmVjb3JkSWQpXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHNraXBwZWRDb3VudCsrXG4gICAgICBza2lwcGVkUmVjb3JkSWRzLnB1c2gocmVjb3JkLmdldElkKCkpXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgICBldmVudDogJ2FkZEhpZ2hsaWdodEdyYXBoaWNzLXJlY29yZC1lcnJvcicsXG4gICAgICAgIHNlcSxcbiAgICAgICAgcmVjb3JkSWQ6IHJlY29yZC5nZXRJZCgpLFxuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgfVxuICB9KVxuXG4gIC8vIExvZyBmaW5hbCBzdGF0ZSBBRlRFUiBhZGRpbmdcbiAgY29uc3QgZmluYWxHcmFwaGljc0NvdW50ID0gZ3JhcGhpY3NMYXllci5ncmFwaGljcy5sZW5ndGhcbiAgY29uc3QgZmluYWxSZWNvcmRJZHM6IHN0cmluZ1tdID0gW11cbiAgZ3JhcGhpY3NMYXllci5ncmFwaGljcy5mb3JFYWNoKGdyYXBoaWMgPT4ge1xuICAgIGNvbnN0IHJlY29yZElkID0gZ3JhcGhpYy5hdHRyaWJ1dGVzPy5yZWNvcmRJZFxuICAgIGlmIChyZWNvcmRJZCkge1xuICAgICAgZmluYWxSZWNvcmRJZHMucHVzaChyZWNvcmRJZClcbiAgICB9XG4gIH0pXG5cbiAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICBldmVudDogJ2FkZEhpZ2hsaWdodEdyYXBoaWNzLWNvbXBsZXRlJyxcbiAgICBzZXEsXG4gICAgZ3JhcGhpY3NMYXllcklkOiBncmFwaGljc0xheWVyLmlkLFxuICAgIHJlY29yZHNDb3VudDogcmVjb3Jkcy5sZW5ndGgsXG4gICAgYWRkZWRDb3VudCxcbiAgICBza2lwcGVkQ291bnQsXG4gICAgZHVwbGljYXRlQ291bnQsXG4gICAgYWRkZWRSZWNvcmRJZHM6IGFkZGVkUmVjb3JkSWRzLnNsaWNlKDAsIDIwKSwgLy8gTGltaXQgdG8gZmlyc3QgMjBcbiAgICBza2lwcGVkUmVjb3JkSWRzOiBza2lwcGVkUmVjb3JkSWRzLnNsaWNlKDAsIDIwKSxcbiAgICBkdXBsaWNhdGVSZWNvcmRJZHM6IGR1cGxpY2F0ZVJlY29yZElkcy5zbGljZSgwLCAyMCksXG4gICAgZXhpc3RpbmdHcmFwaGljc0NvdW50LFxuICAgIGZpbmFsR3JhcGhpY3NDb3VudCxcbiAgICBleHBlY3RlZEZpbmFsQ291bnQ6IGV4aXN0aW5nR3JhcGhpY3NDb3VudCArIGFkZGVkQ291bnQsXG4gICAgZmluYWxSZWNvcmRJZHM6IGZpbmFsUmVjb3JkSWRzLnNsaWNlKDAsIDIwKSwgLy8gTGltaXQgdG8gZmlyc3QgMjBcbiAgICBmaW5hbFJlY29yZElkc0NvdW50OiBmaW5hbFJlY29yZElkcy5sZW5ndGgsXG4gICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gIH0pXG59XG5cbi8qKlxuICogUmVtb3ZlcyBoaWdobGlnaHQgZ3JhcGhpY3MgZnJvbSB0aGUgZ3JhcGhpY3MgbGF5ZXIgYnkgcmVjb3JkIElEcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUhpZ2hsaWdodEdyYXBoaWNzKFxuICBncmFwaGljc0xheWVyOiBfX2VzcmkuR3JhcGhpY3NMYXllcixcbiAgcmVjb3JkSWRzOiBzdHJpbmdbXVxuKTogdm9pZCB7XG4gIGNvbnN0IHNlcSA9ICsrb3BlcmF0aW9uU2VxdWVuY2VcbiAgaWYgKCFncmFwaGljc0xheWVyIHx8ICFyZWNvcmRJZHMgfHwgcmVjb3JkSWRzLmxlbmd0aCA9PT0gMCkge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICBldmVudDogJ3JlbW92ZUhpZ2hsaWdodEdyYXBoaWNzLXNraXBwZWQnLFxuICAgICAgc2VxLFxuICAgICAgcmVhc29uOiAhZ3JhcGhpY3NMYXllciA/ICduby1ncmFwaGljcy1sYXllcicgOiAnbm8tcmVjb3JkLWlkcycsXG4gICAgICByZWNvcmRJZHNDb3VudDogcmVjb3JkSWRzPy5sZW5ndGggfHwgMCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgcmV0dXJuXG4gIH1cblxuICBjb25zdCByZWNvcmRJZFNldCA9IG5ldyBTZXQocmVjb3JkSWRzKVxuICBsZXQgcmVtb3ZlZENvdW50ID0gMFxuXG4gIC8vIEZpbmQgYW5kIHJlbW92ZSBncmFwaGljcyBtYXRjaGluZyByZWNvcmQgSURzXG4gIGNvbnN0IGdyYXBoaWNzVG9SZW1vdmU6IF9fZXNyaS5HcmFwaGljW10gPSBbXVxuICBncmFwaGljc0xheWVyLmdyYXBoaWNzLmZvckVhY2goZ3JhcGhpYyA9PiB7XG4gICAgY29uc3QgcmVjb3JkSWQgPSBncmFwaGljLmF0dHJpYnV0ZXM/LnJlY29yZElkXG4gICAgaWYgKHJlY29yZElkICYmIHJlY29yZElkU2V0LmhhcyhyZWNvcmRJZCkpIHtcbiAgICAgIGdyYXBoaWNzVG9SZW1vdmUucHVzaChncmFwaGljKVxuICAgIH1cbiAgfSlcblxuICBncmFwaGljc1RvUmVtb3ZlLmZvckVhY2goZ3JhcGhpYyA9PiB7XG4gICAgZ3JhcGhpY3NMYXllci5yZW1vdmUoZ3JhcGhpYylcbiAgICByZW1vdmVkQ291bnQrK1xuICB9KVxuXG4gIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgZXZlbnQ6ICdyZW1vdmVIaWdobGlnaHRHcmFwaGljcy1jb21wbGV0ZScsXG4gICAgc2VxLFxuICAgIGdyYXBoaWNzTGF5ZXJJZDogZ3JhcGhpY3NMYXllci5pZCxcbiAgICByZWNvcmRJZHNDb3VudDogcmVjb3JkSWRzLmxlbmd0aCxcbiAgICByZW1vdmVkQ291bnQsXG4gICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gIH0pXG59XG5cbi8qKlxuICogQ2xlYXJzIGFsbCBoaWdobGlnaHQgZ3JhcGhpY3MgZnJvbSB0aGUgZ3JhcGhpY3MgbGF5ZXIuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbGVhckdyYXBoaWNzTGF5ZXIoZ3JhcGhpY3NMYXllcjogX19lc3JpLkdyYXBoaWNzTGF5ZXIpOiB2b2lkIHtcbiAgY29uc3Qgc2VxID0gKytvcGVyYXRpb25TZXF1ZW5jZVxuICBpZiAoIWdyYXBoaWNzTGF5ZXIpIHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgZXZlbnQ6ICdjbGVhckdyYXBoaWNzTGF5ZXItc2tpcHBlZCcsXG4gICAgICBzZXEsXG4gICAgICByZWFzb246ICduby1ncmFwaGljcy1sYXllcicsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIHJldHVyblxuICB9XG5cbiAgY29uc3QgZ3JhcGhpY3NDb3VudCA9IGdyYXBoaWNzTGF5ZXIuZ3JhcGhpY3MubGVuZ3RoXG4gIGdyYXBoaWNzTGF5ZXIucmVtb3ZlQWxsKClcblxuICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgIGV2ZW50OiAnY2xlYXJHcmFwaGljc0xheWVyLWNvbXBsZXRlJyxcbiAgICBzZXEsXG4gICAgZ3JhcGhpY3NMYXllcklkOiBncmFwaGljc0xheWVyLmlkLFxuICAgIGdyYXBoaWNzUmVtb3ZlZDogZ3JhcGhpY3NDb3VudCxcbiAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgfSlcbn1cblxuLyoqXG4gKiBSZW1vdmVzIHRoZSBncmFwaGljcyBsYXllciBmcm9tIHRoZSBtYXAgYW5kIGNsZWFucyB1cCByZWZlcmVuY2VzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xlYW51cEdyYXBoaWNzTGF5ZXIoXG4gIHdpZGdldElkOiBzdHJpbmcsXG4gIG1hcFZpZXc6IF9fZXNyaS5NYXBWaWV3IHwgX19lc3JpLlNjZW5lVmlld1xuKTogdm9pZCB7XG4gIGNvbnN0IHNlcSA9ICsrb3BlcmF0aW9uU2VxdWVuY2VcbiAgY29uc3QgbGF5ZXJJZCA9IGBxdWVyeXNpbXBsZS1oaWdobGlnaHQtJHt3aWRnZXRJZH1gXG4gIFxuICB0cnkge1xuICAgIGNvbnN0IGdyYXBoaWNzTGF5ZXIgPSBtYXBWaWV3Lm1hcC5sYXllcnMuZmluZChsYXllciA9PiBsYXllci5pZCA9PT0gbGF5ZXJJZCkgYXMgX19lc3JpLkdyYXBoaWNzTGF5ZXJcbiAgICBpZiAoZ3JhcGhpY3NMYXllcikge1xuICAgICAgLy8gQ2xlYXIgYWxsIGdyYXBoaWNzIGZpcnN0XG4gICAgICBncmFwaGljc0xheWVyLnJlbW92ZUFsbCgpXG4gICAgICBcbiAgICAgIC8vIFJlbW92ZSBsYXllciBmcm9tIG1hcFxuICAgICAgbWFwVmlldy5tYXAucmVtb3ZlKGdyYXBoaWNzTGF5ZXIpXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICAgIGV2ZW50OiAnY2xlYW51cEdyYXBoaWNzTGF5ZXItY29tcGxldGUnLFxuICAgICAgICBzZXEsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICBsYXllcklkLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICAgIGV2ZW50OiAnY2xlYW51cEdyYXBoaWNzTGF5ZXItbm90LWZvdW5kJyxcbiAgICAgICAgc2VxLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgbGF5ZXJJZCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgZXZlbnQ6ICdjbGVhbnVwR3JhcGhpY3NMYXllci1lcnJvcicsXG4gICAgICBzZXEsXG4gICAgICB3aWRnZXRJZCxcbiAgICAgIGxheWVySWQsXG4gICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpLFxuICAgICAgZXJyb3JTdGFjazogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnN0YWNrIDogdW5kZWZpbmVkLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgfVxufVxuXG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7IFJlYWN0LCBqc3gsIHR5cGUgSW1tdXRhYmxlQXJyYXksIG1vZHVsZUxvYWRlciwgaG9va3MgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBDaGVja2JveCB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQgdHlwZSB7IEppbXVNYXBWaWV3IH0gZnJvbSAnamltdS1hcmNnaXMnXG5pbXBvcnQgdHlwZSAqIGFzIGppbXVNYXAgZnJvbSAnamltdS11aS9hZHZhbmNlZC9tYXAnXG5pbXBvcnQgeyBDcmVhdGVUb29sVHlwZSB9IGZyb20gJy4uL2NvbmZpZydcbmltcG9ydCB7IEVudGl0eVN0YXR1c1R5cGUsIFN0YXR1c0luZGljYXRvciB9IGZyb20gJ3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uJ1xuaW1wb3J0IGRlZmF1bHRNZXNzYWdlIGZyb20gJy4vdHJhbnNsYXRpb25zL2RlZmF1bHQnXG5leHBvcnQgaW50ZXJmYWNlIEludGVyYWN0aXZlRHJhd1Byb3BzIHtcbiAgamltdU1hcFZpZXc6IEppbXVNYXBWaWV3XG4gIHdpZGdldElkOiBzdHJpbmdcbiAgdG9vbFR5cGVzOiBJbW11dGFibGVBcnJheTxDcmVhdGVUb29sVHlwZT5cbiAgb25EcmF3RW5kOiAoZ3JhcGhpYzogX19lc3JpLkdyYXBoaWMsIGdldExheWVyRnVuPywgY2xlYXJBZnRlckFwcGx5PzogYm9vbGVhbikgPT4gdm9pZFxufVxuXG5jb25zdCBza2V0Y2hUb29sSW5mb01hcCA9IHtcbiAgW0NyZWF0ZVRvb2xUeXBlLlBvaW50XTogeyBkcmF3VG9vbE5hbWU6ICdwb2ludCcsIGVzcmlDbGFzc05hbWU6ICdlc3JpLWljb24tcG9pbnQnLCB0b29sSW5kZXg6IDAgfSxcbiAgW0NyZWF0ZVRvb2xUeXBlLlBvbHlsaW5lXTogeyBkcmF3VG9vbE5hbWU6ICdwb2x5bGluZScsIGVzcmlDbGFzc05hbWU6ICdlc3JpLWljb24tcG9seWxpbmUnLCB0b29sSW5kZXg6IDQgfSxcbiAgW0NyZWF0ZVRvb2xUeXBlLlBvbHlnb25dOiB7IGRyYXdUb29sTmFtZTogJ3BvbHlnb24nLCBlc3JpQ2xhc3NOYW1lOiAnZXNyaS1pY29uLXBvbHlnb24nLCB0b29sSW5kZXg6IDIgfSxcbiAgW0NyZWF0ZVRvb2xUeXBlLlJlY3RhbmdsZV06IHtcbiAgICBkcmF3VG9vbE5hbWU6ICdyZWN0YW5nbGUnLFxuICAgIGVzcmlDbGFzc05hbWU6ICdlc3JpLWljb24tY2hlY2tib3gtdW5jaGVja2VkJyxcbiAgICB0b29sSW5kZXg6IDFcbiAgfSxcbiAgW0NyZWF0ZVRvb2xUeXBlLkNpcmNsZV06IHsgZHJhd1Rvb2xOYW1lOiAnY2lyY2xlJywgZXNyaUNsYXNzTmFtZTogJ2VzcmktaWNvbi1yYWRpby11bmNoZWNrZWQnLCB0b29sSW5kZXg6IDMgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gSW50ZXJhY3RpdmVEcmF3IChwcm9wczogSW50ZXJhY3RpdmVEcmF3UHJvcHMpIHtcbiAgY29uc3QgeyB0b29sVHlwZXMgPSBbXSwgamltdU1hcFZpZXcsIG9uRHJhd0VuZCwgd2lkZ2V0SWQgfSA9IHByb3BzXG4gIGNvbnN0IGdldEkxOG5NZXNzYWdlID0gaG9va3MudXNlVHJhbnNsYXRpb24oZGVmYXVsdE1lc3NhZ2UpXG4gIGNvbnN0IFttYXBNb2R1bGUsIHNldE1hcE1vZHVsZV0gPSBSZWFjdC51c2VTdGF0ZTx0eXBlb2YgamltdU1hcD4obnVsbClcbiAgY29uc3QgZ2V0TGF5ZXJGdW5SZWYgPSBSZWFjdC51c2VSZWY8KCkgPT4gX19lc3JpLkdyYXBoaWNzTGF5ZXIgfCBfX2VzcmkuTWFwTm90ZXNMYXllcj4obnVsbClcbiAgY29uc3QgZ3JhcGhpY1JlZiA9IFJlYWN0LnVzZVJlZihudWxsKVxuICBjb25zdCBbY2xlYXJBZnRlckFwcGx5LCBzZXRDbGVhckFmdGVyQXBwbHldID0gUmVhY3QudXNlU3RhdGUoZmFsc2UpXG5cbiAgY29uc3QgdmlzaWJsZUVsZW1lbnRzID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNyZWF0ZVRvb2xzOiBPYmplY3QuZW50cmllcyhza2V0Y2hUb29sSW5mb01hcCkucmVkdWNlKFxuICAgICAgICAocmVzdWx0LCBba2V5LCB2YWx1ZV0pID0+ICh7IC4uLnJlc3VsdCwgW3ZhbHVlLmRyYXdUb29sTmFtZV06IHRvb2xUeXBlcy5pbmNsdWRlcyhrZXkgYXMgQ3JlYXRlVG9vbFR5cGUpIH0pLFxuICAgICAgICB7IHBvaW50OiBmYWxzZSB9XG4gICAgICApIGFzIGFueSxcbiAgICAgIHNlbGVjdGlvblRvb2xzOiB7XG4gICAgICAgICdsYXNzby1zZWxlY3Rpb24nOiBmYWxzZSxcbiAgICAgICAgJ3JlY3RhbmdsZS1zZWxlY3Rpb24nOiBmYWxzZVxuICAgICAgfSxcbiAgICAgIHNldHRpbmdzTWVudTogZmFsc2UsXG4gICAgICB1bmRvUmVkb01lbnU6IGZhbHNlLFxuICAgICAgZGVsZXRlQnV0dG9uOiB0cnVlXG4gICAgfVxuICB9LCBbdG9vbFR5cGVzXSlcblxuICBob29rcy51c2VFZmZlY3RPbmNlKCgpID0+IHtcbiAgICBtb2R1bGVMb2FkZXIubG9hZE1vZHVsZTx0eXBlb2YgamltdU1hcD4oJ2ppbXUtdWkvYWR2YW5jZWQvbWFwJykudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICBzZXRNYXBNb2R1bGUocmVzdWx0KVxuICAgIH0pXG4gIH0pXG5cbiAgY29uc3QgaGFuZGxlRHJhd1Rvb2xDcmVhdGVkID0gUmVhY3QudXNlQ2FsbGJhY2soKGppbXVEcmF3VG9vbHNSZWY6IGppbXVNYXAuSmltdURyYXdDcmVhdGVkRGVzY3JpcHRvcikgPT4ge1xuICAgIGdldExheWVyRnVuUmVmLmN1cnJlbnQgPSBqaW11RHJhd1Rvb2xzUmVmLmdldEdyYXBoaWNzTGF5ZXJcbiAgfSwgW10pXG5cbiAgY29uc3QgaGFuZGxlRHJhd1N0YXJ0ID0gUmVhY3QudXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGdldExheWVyRnVuUmVmLmN1cnJlbnQgJiYgKChnZXRMYXllckZ1blJlZi5jdXJyZW50KSgpIGFzIF9fZXNyaS5HcmFwaGljc0xheWVyKS5yZW1vdmVBbGwoKVxuICB9LCBbXSlcblxuICBjb25zdCBoYW5kbGVEcmF3RW5kID0gUmVhY3QudXNlQ2FsbGJhY2soXG4gICAgKGdyYXBoaWMpID0+IHtcbiAgICAgIGdyYXBoaWNSZWYuY3VycmVudCA9IGdyYXBoaWNcbiAgICAgIG9uRHJhd0VuZChncmFwaGljLCBnZXRMYXllckZ1blJlZi5jdXJyZW50LCBjbGVhckFmdGVyQXBwbHkpXG4gICAgfSxcbiAgICBbb25EcmF3RW5kLCBjbGVhckFmdGVyQXBwbHldXG4gIClcblxuICBjb25zdCBoYW5kbGVDbGVhcmVkID0gUmVhY3QudXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGdyYXBoaWNSZWYuY3VycmVudCA9IG51bGxcbiAgICBvbkRyYXdFbmQobnVsbClcbiAgfSwgW29uRHJhd0VuZF0pXG5cbiAgY29uc3QgaGFuZGxlQ2xlYXJTZXR0aW5nQ2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soKGUpID0+IHtcbiAgICBpZiAoZ3JhcGhpY1JlZi5jdXJyZW50KSB7XG4gICAgICBvbkRyYXdFbmQoZ3JhcGhpY1JlZi5jdXJyZW50LCBnZXRMYXllckZ1blJlZi5jdXJyZW50LCBlLnRhcmdldC5jaGVja2VkKVxuICAgIH1cbiAgICBzZXRDbGVhckFmdGVyQXBwbHkoZS50YXJnZXQuY2hlY2tlZClcbiAgfSwgW29uRHJhd0VuZF0pXG5cbiAgY29uc3QgSmltdURyYXcgPSBtYXBNb2R1bGU/LkppbXVEcmF3XG4gIGlmICghSmltdURyYXcpIHtcbiAgICByZXR1cm4gPFN0YXR1c0luZGljYXRvciBzdGF0dXNUeXBlPXtFbnRpdHlTdGF0dXNUeXBlLkxvYWRpbmd9IC8+XG4gIH1cbiAgY29uc3QgaXNBdmFpbGFibGUgPSBPYmplY3Qua2V5cyh2aXNpYmxlRWxlbWVudHMuY3JlYXRlVG9vbHMpLnNvbWUodG9vbE5hbWUgPT4gdmlzaWJsZUVsZW1lbnRzLmNyZWF0ZVRvb2xzW3Rvb2xOYW1lXSlcbiAgaWYgKCFpc0F2YWlsYWJsZSkge1xuICAgIHJldHVybiBudWxsXG4gIH1cbiAgcmV0dXJuIChcbiAgICA8ZGl2PlxuICAgICAgPEppbXVEcmF3XG4gICAgICAgIGppbXVNYXBWaWV3PXtqaW11TWFwVmlld31cbiAgICAgICAgb3BlcmF0b3JXaWRnZXRJZD17d2lkZ2V0SWR9XG4gICAgICAgIGRpc2FibGVTeW1ib2xTZWxlY3RvclxuICAgICAgICBkcmF3aW5nT3B0aW9ucz17e1xuICAgICAgICAgIGNyZWF0aW9uTW9kZTogbWFwTW9kdWxlLkppbXVEcmF3Q3JlYXRpb25Nb2RlLlNpbmdsZSxcbiAgICAgICAgICB1cGRhdGVPbkdyYXBoaWNDbGljazogZmFsc2UsXG4gICAgICAgICAgdmlzaWJsZUVsZW1lbnRzOiB2aXNpYmxlRWxlbWVudHNcbiAgICAgICAgfX1cbiAgICAgICAgdWlPcHRpb25zPXt7XG4gICAgICAgICAgaXNIaWRlQm9yZGVyOiB0cnVlXG4gICAgICAgIH19XG4gICAgICAgIG9uSmltdURyYXdDcmVhdGVkPXtoYW5kbGVEcmF3VG9vbENyZWF0ZWR9XG4gICAgICAgIG9uRHJhd2luZ1N0YXJ0ZWQ9e2hhbmRsZURyYXdTdGFydH1cbiAgICAgICAgb25EcmF3aW5nRmluaXNoZWQ9e2hhbmRsZURyYXdFbmR9XG4gICAgICAgIG9uRHJhd2luZ0NsZWFyZWQ9e2hhbmRsZUNsZWFyZWR9XG4gICAgICAvPlxuICAgICAgPGxhYmVsIGNsYXNzTmFtZT0nZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlcic+XG4gICAgICAgIDxDaGVja2JveCBjaGVja2VkPXtjbGVhckFmdGVyQXBwbHl9IG9uQ2hhbmdlPXtoYW5kbGVDbGVhclNldHRpbmdDaGFuZ2V9IGNsYXNzTmFtZT0nbXItMicgLz5cbiAgICAgICAge2dldEkxOG5NZXNzYWdlKCdjbGVhckRyYXdpbmcnKX1cbiAgICAgIDwvbGFiZWw+XG4gICAgPC9kaXY+XG4gIClcbn1cbiIsImltcG9ydCB7IFJlYWN0LCBob29rcyB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IExvYWRpbmcsIExvYWRpbmdUeXBlIH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB7IHN0eWxlZCB9IGZyb20gJ2ppbXUtdGhlbWUnXG5pbXBvcnQgZGVmYXVsdE1lc3NhZ2UgZnJvbSAnLi90cmFuc2xhdGlvbnMvZGVmYXVsdCdcblxuY29uc3QgUm9vdCA9IHN0eWxlZC5kaXZgXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgdG9wOiAwO1xuICBib3R0b206IDA7XG4gIHJpZ2h0OiAwO1xuICBsZWZ0OiAwO1xuICB6LWluZGV4OiAyO1xuXG4gIC5sb2FkaW5nLWNvbnRlbnQge1xuICAgIC5sb2FkaW5nLXRpcCB7XG4gICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgfVxuICB9XG5gXG5leHBvcnQgZnVuY3Rpb24gTG9hZGluZ1Jlc3VsdCAoKSB7XG4gIGNvbnN0IHRyYW5zbGF0ZSA9IGhvb2tzLnVzZVRyYW5zbGF0aW9uKGRlZmF1bHRNZXNzYWdlKVxuICByZXR1cm4gKFxuICAgIDxSb290PlxuICAgICAgPGRpdiBjbGFzc05hbWU9J2xvYWRpbmctY29udGVudCB3LTEwMCBweC00IGQtZmxleCBmbGV4LWNvbHVtbiBqdXN0aWZ5LWNvbnRlbnQtY2VudGVyIGFsaWduLWl0ZW1zLWNlbnRlcic+XG4gICAgICAgIDxkaXYgcm9sZT0nYWxlcnQnIGFyaWEtbGl2ZT0nYXNzZXJ0aXZlJyBjbGFzc05hbWU9J3RleHQtcGFwZXInPlxuICAgICAgICAgIHt0cmFuc2xhdGUoJ3JldHJpZXZpbmcnKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxMb2FkaW5nIGNsYXNzTmFtZT0nbG9hZGluZy10aXAgbXQtOCcgdHlwZT17TG9hZGluZ1R5cGUuRG9udXR9Lz5cbiAgICAgIDwvZGl2PlxuICAgIDwvUm9vdD5cbiAgKVxufVxuXG5cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHtcbiAgUmVhY3QsXG4gIFJlYWN0UmVkdXgsXG4gIGpzeCxcbiAgY3NzLFxuICB0eXBlIERhdGFTb3VyY2UsXG4gIHR5cGUgRmVhdHVyZURhdGFSZWNvcmQsXG4gIHR5cGUgSU1TdGF0ZSxcbiAgY2xhc3NOYW1lc1xufSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBCdXR0b24gfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHsgVHJhc2hPdXRsaW5lZCB9IGZyb20gJ2ppbXUtaWNvbnMvb3V0bGluZWQvZWRpdG9yL3RyYXNoJ1xuaW1wb3J0IEZlYXR1cmVJbmZvIGZyb20gJy4vY29tcG9uZW50cy9mZWF0dXJlLWluZm8nXG5pbXBvcnQgeyBMaXN0RGlyZWN0aW9uIH0gZnJvbSAnLi4vY29uZmlnJ1xuaW1wb3J0IHsgY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlciB9IGZyb20gJ3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uJ1xuXG5jb25zdCBkZWJ1Z0xvZ2dlciA9IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIoKVxuXG5leHBvcnQgaW50ZXJmYWNlIFJlc3VsdEl0ZW1Qcm9wcyB7XG4gIHdpZGdldElkOiBzdHJpbmdcbiAgcG9wdXBUZW1wbGF0ZTogYW55XG4gIGRlZmF1bHRQb3B1cFRlbXBsYXRlOiBhbnlcbiAgZGF0YTogRmVhdHVyZURhdGFSZWNvcmRcbiAgZGF0YVNvdXJjZTogRGF0YVNvdXJjZVxuICBleHBhbmRCeURlZmF1bHQ6IGJvb2xlYW5cbiAgb25DbGljazogKHJlY29yZDogRmVhdHVyZURhdGFSZWNvcmQpID0+IHZvaWRcbiAgb25SZW1vdmU6IChyZWNvcmQ6IEZlYXR1cmVEYXRhUmVjb3JkKSA9PiB2b2lkXG59XG5cbmNvbnN0IHN0eWxlID0gY3NzYFxuICBvdmVyZmxvdzogYXV0bztcbiAgZmxleC1mbG93OiByb3c7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgZmxleC1zaHJpbms6IDA7XG4gIG1pbi1oZWlnaHQ6IDJyZW07XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgJi5zZWxlY3RlZCB7XG4gICAgb3V0bGluZTogMnB4IHNvbGlkIHZhcigtLXN5cy1jb2xvci1wcmltYXJ5LW1haW4pO1xuICB9XG4gIFxuICAucmVtb3ZlLWJ1dHRvbiB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHRvcDogNHB4O1xuICAgIHJpZ2h0OiA0cHg7XG4gICAgei1pbmRleDogMTA7XG4gICAgb3BhY2l0eTogMC43O1xuICAgIHRyYW5zaXRpb246IG9wYWNpdHkgMC4ycztcbiAgICBcbiAgICAmOmhvdmVyIHtcbiAgICAgIG9wYWNpdHk6IDE7XG4gICAgfVxuICAgIFxuICAgIC8vIExhcmdlciB0b3VjaCB0YXJnZXQgZm9yIG1vYmlsZS9hY2Nlc3NpYmlsaXR5XG4gICAgbWluLXdpZHRoOiAzMnB4O1xuICAgIG1pbi1oZWlnaHQ6IDMycHg7XG4gIH1cbmBcblxuLyoqXG4gKiBRdWVyeVJlc3VsdEl0ZW0gY29tcG9uZW50IC0gZGlzcGxheXMgYSBzaW5nbGUgcXVlcnkgcmVzdWx0IHJlY29yZFxuICogRmVhdHVyZXM6XG4gKiAtIENsaWNraW5nIHRoZSBpdGVtIHpvb21zIHRvIHRoZSBmZWF0dXJlIG9uIHRoZSBtYXBcbiAqIC0gUmVtb3ZlIGJ1dHRvbiAodHJhc2ggaWNvbikgaW4gdXBwZXItcmlnaHQgY29ybmVyIHRvIHJlbW92ZSByZWNvcmQgZnJvbSByZXN1bHRzXG4gKiAtIFJlY29yZHMgYXJlIGV4cGFuZGVkIGJ5IGRlZmF1bHQgdG8gc2hvdyBmdWxsIGZlYXR1cmUgaW5mb3JtYXRpb25cbiAqL1xuZXhwb3J0IGNvbnN0IFF1ZXJ5UmVzdWx0SXRlbSA9IChwcm9wczogUmVzdWx0SXRlbVByb3BzKSA9PiB7XG4gIGNvbnN0IHsgd2lkZ2V0SWQsIGRhdGEsIGRhdGFTb3VyY2UsIHBvcHVwVGVtcGxhdGUsIGRlZmF1bHRQb3B1cFRlbXBsYXRlLCBvbkNsaWNrLCBvblJlbW92ZSwgZXhwYW5kQnlEZWZhdWx0ID0gZmFsc2UgfSA9IHByb3BzXG4gIFxuICBjb25zdCByZWNvcmRJZCA9IGRhdGEuZ2V0SWQoKVxuICBcbiAgLy8gTG9nIHdoZW4gUXVlcnlSZXN1bHRJdGVtIHJlbmRlcnNcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0VYUEFORC1DT0xMQVBTRScsIHtcbiAgICAgIGV2ZW50OiAnUXVlcnlSZXN1bHRJdGVtLXJlbmRlcicsXG4gICAgICByZWNvcmRJZCxcbiAgICAgIGV4cGFuZEJ5RGVmYXVsdCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gIH0sIFtyZWNvcmRJZCwgZXhwYW5kQnlEZWZhdWx0XSlcbiAgXG4gIC8vIENoZWNrIGlmIHRoaXMgcmVjb3JkIGlzIGN1cnJlbnRseSBzZWxlY3RlZFxuICBjb25zdCBzZWxlY3RlZCA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PlxuICAgIHN0YXRlLmRhdGFTb3VyY2VzSW5mbz8uW2RhdGFTb3VyY2UuaWRdPy5zZWxlY3RlZElkcz8uaW5jbHVkZXMoZGF0YS5nZXRJZCgpKVxuICApXG4gIFxuICAvLyBEZXRlcm1pbmUgaWYgbGlzdCBpcyBkaXNwbGF5ZWQgdmVydGljYWxseSAoYWZmZWN0cyBGZWF0dXJlSW5mbyBleHBhbmRhYmlsaXR5KVxuICBjb25zdCBpc1ZlcnRpY2FsQWxpZ24gPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xuICAgIGNvbnN0IHdpZGdldEpzb24gPSBzdGF0ZS5hcHBDb25maWcud2lkZ2V0c1t3aWRnZXRJZF1cbiAgICByZXR1cm4gd2lkZ2V0SnNvbi5jb25maWcucmVzdWx0TGlzdERpcmVjdGlvbiAhPT0gTGlzdERpcmVjdGlvbi5Ib3Jpem9udGFsXG4gIH0pXG5cbiAgLy8gSGFuZGxlIGNsaWNraW5nIG9uIHRoZSByZXN1bHQgaXRlbSAtIHpvb21zIHRvIGZlYXR1cmUgb24gbWFwXG4gIGNvbnN0IGhhbmRsZUNsaWNrUmVzdWx0SXRlbSA9IFJlYWN0LnVzZUNhbGxiYWNrKChlOiBSZWFjdC5Nb3VzZUV2ZW50KSA9PiB7XG4gICAgLy8gRG9uJ3QgdHJpZ2dlciB6b29tIGlmIGNsaWNraW5nIHRoZSByZW1vdmUgYnV0dG9uXG4gICAgaWYgKChlLnRhcmdldCBhcyBIVE1MRWxlbWVudCkuY2xvc2VzdCgnLnJlbW92ZS1idXR0b24nKSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIG9uQ2xpY2soZGF0YSlcbiAgfSwgW29uQ2xpY2ssIGRhdGFdKVxuXG4gIC8vIEhhbmRsZSBjbGlja2luZyB0aGUgcmVtb3ZlIGJ1dHRvbiAtIHJlbW92ZXMgcmVjb3JkIGZyb20gcmVzdWx0cyBhbmQgc2VsZWN0aW9uXG4gIGNvbnN0IGhhbmRsZVJlbW92ZSA9IFJlYWN0LnVzZUNhbGxiYWNrKChlOiBSZWFjdC5Nb3VzZUV2ZW50KSA9PiB7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKSAvLyBQcmV2ZW50IHRyaWdnZXJpbmcgdGhlIGl0ZW0gY2xpY2sgaGFuZGxlclxuICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIG9uUmVtb3ZlKGRhdGEpXG4gIH0sIFtvblJlbW92ZSwgZGF0YV0pXG5cbiAgY29uc3Qgb25LZXlVcCA9IFJlYWN0LnVzZUNhbGxiYWNrKChldnQpID0+IHtcbiAgICBpZiAoZXZ0LmtleSA9PT0gJ0VudGVyJyB8fCBldnQua2V5ID09PSAnICcpIHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICBldnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgICAgIGhhbmRsZUNsaWNrUmVzdWx0SXRlbShldnQgYXMgYW55KVxuICAgIH1cbiAgfSwgW2hhbmRsZUNsaWNrUmVzdWx0SXRlbV0pXG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2XG4gICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ3F1ZXJ5LXJlc3VsdC1pdGVtJywgeyBzZWxlY3RlZCB9KX1cbiAgICAgIG9uQ2xpY2s9e2hhbmRsZUNsaWNrUmVzdWx0SXRlbX1cbiAgICAgIG9uS2V5VXA9e29uS2V5VXB9XG4gICAgICBjc3M9e3N0eWxlfVxuICAgICAgcm9sZT0nb3B0aW9uJ1xuICAgICAgYXJpYS1zZWxlY3RlZD17c2VsZWN0ZWR9XG4gICAgICB0YWJJbmRleD17MH1cbiAgICA+XG4gICAgICA8RmVhdHVyZUluZm9cbiAgICAgICAgZ3JhcGhpYz17ZGF0YS5mZWF0dXJlIGFzIF9fZXNyaS5HcmFwaGljfVxuICAgICAgICBwb3B1cFRlbXBsYXRlPXtwb3B1cFRlbXBsYXRlfVxuICAgICAgICBkZWZhdWx0UG9wdXBUZW1wbGF0ZT17ZGVmYXVsdFBvcHVwVGVtcGxhdGV9XG4gICAgICAgIHRvZ2dsYWJsZT17aXNWZXJ0aWNhbEFsaWdufVxuICAgICAgICBleHBhbmRCeURlZmF1bHQ9e2V4cGFuZEJ5RGVmYXVsdH1cbiAgICAgICAgZGF0YVNvdXJjZT17ZGF0YVNvdXJjZX1cbiAgICAgIC8+XG4gICAgICA8QnV0dG9uXG4gICAgICAgIGNsYXNzTmFtZT1cInJlbW92ZS1idXR0b25cIlxuICAgICAgICBpY29uXG4gICAgICAgIHNpemU9XCJzbVwiXG4gICAgICAgIHZhcmlhbnQ9XCJ0ZXh0XCJcbiAgICAgICAgY29sb3I9XCJpbmhlcml0XCJcbiAgICAgICAgb25DbGljaz17aGFuZGxlUmVtb3ZlfVxuICAgICAgICBhcmlhLWxhYmVsPVwiUmVtb3ZlIHJlY29yZFwiXG4gICAgICAgIGNzcz17Y3NzYFxuICAgICAgICAgIHBhZGRpbmc6IDZweDtcbiAgICAgICAgICBtaW4td2lkdGg6IDMycHg7XG4gICAgICAgICAgd2lkdGg6IDMycHg7XG4gICAgICAgICAgaGVpZ2h0OiAzMnB4O1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgYH1cbiAgICAgID5cbiAgICAgICAgPFRyYXNoT3V0bGluZWQgc2l6ZT17MTh9IC8+XG4gICAgICA8L0J1dHRvbj5cbiAgICA8L2Rpdj5cbiAgKVxufVxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQge1xuICBSZWFjdCxcbiAganN4LFxuICBjc3MsXG4gIFJlYWN0UmVkdXgsXG4gIHR5cGUgSU1TdGF0ZSxcbiAgdHlwZSBEYXRhU291cmNlLFxuICB0eXBlIEltbXV0YWJsZU9iamVjdCxcbiAgdHlwZSBEYXRhUmVjb3JkLFxuICB0eXBlIFF1ZXJ5UGFyYW1zLFxuICBEYXRhU291cmNlQ29tcG9uZW50LFxuICBEYXRhU291cmNlTWFuYWdlcixcbiAgSW1tdXRhYmxlLFxuICBob29rcyxcbiAgTWVzc2FnZU1hbmFnZXIsXG4gIERhdGFSZWNvcmRzU2VsZWN0aW9uQ2hhbmdlTWVzc2FnZSxcbiAgdHlwZSBGZWF0dXJlRGF0YVJlY29yZCxcbiAgdHlwZSBEYXRhUmVjb3JkU2V0LFxuICB0eXBlIEZlYXR1cmVMYXllckRhdGFTb3VyY2UsXG4gIGZvY3VzRWxlbWVudEluS2V5Ym9hcmRNb2RlLFxuICBEYXRhQWN0aW9uTWFuYWdlcixcbiAgRGF0YUxldmVsLFxuICB1c2VJbnRsXG59IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IEJ1dHRvbiwgSWNvbiwgVG9vbHRpcCwgRGF0YUFjdGlvbkxpc3QsIERhdGFBY3Rpb25MaXN0U3R5bGUgfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHsgZ2V0V2lkZ2V0UnVudGltZURhdGFNYXAgfSBmcm9tICcuL3dpZGdldC1jb25maWcnXG5pbXBvcnQgeyB0eXBlIFF1ZXJ5SXRlbVR5cGUsIEZpZWxkc1R5cGUsIFBhZ2luZ1R5cGUsIExpc3REaXJlY3Rpb24sIFJlc3VsdFNlbGVjdE1vZGUsIFNlbGVjdGlvblR5cGUgfSBmcm9tICcuLi9jb25maWcnXG5pbXBvcnQgZGVmYXVsdE1lc3NhZ2UgZnJvbSAnLi90cmFuc2xhdGlvbnMvZGVmYXVsdCdcbi8vIEZPUkNFRDogQWx3YXlzIFNpbXBsZUxpc3QgLSBMYXp5TGlzdCBhbmQgUGFnaW5nTGlzdCByZW1vdmVkXG5pbXBvcnQgeyBTaW1wbGVMaXN0IH0gZnJvbSAnLi9zaW1wbGUtbGlzdCdcbmltcG9ydCB7IGNvbWJpbmVGaWVsZHMgfSBmcm9tICcuL3F1ZXJ5LXV0aWxzJ1xuaW1wb3J0IHsgREVGQVVMVF9RVUVSWV9JVEVNIH0gZnJvbSAnLi4vZGVmYXVsdC1xdWVyeS1pdGVtJ1xuaW1wb3J0IHsgQXJyb3dMZWZ0T3V0bGluZWQgfSBmcm9tICdqaW11LWljb25zL291dGxpbmVkL2RpcmVjdGlvbmFsL2Fycm93LWxlZnQnXG5pbXBvcnQgeyBFeHBhbmRBbGxPdXRsaW5lZCB9IGZyb20gJ2ppbXUtaWNvbnMvb3V0bGluZWQvZGlyZWN0aW9uYWwvZXhwYW5kLWFsbCdcbmltcG9ydCB7IENvbGxhcHNlQWxsT3V0bGluZWQgfSBmcm9tICdqaW11LWljb25zL291dGxpbmVkL2RpcmVjdGlvbmFsL2NvbGxhcHNlLWFsbCdcbmltcG9ydCB7IGdldEV4dHJhQWN0aW9ucyB9IGZyb20gJy4uL2RhdGEtYWN0aW9ucydcbmltcG9ydCB7IFxuICBzZWxlY3RSZWNvcmRzSW5EYXRhU291cmNlcywgXG4gIGNsZWFyU2VsZWN0aW9uSW5EYXRhU291cmNlcywgXG4gIHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoLFxuICBwdWJsaXNoU2VsZWN0aW9uTWVzc2FnZSxcbiAgZGlzcGF0Y2hTZWxlY3Rpb25FdmVudCBcbn0gZnJvbSAnLi9zZWxlY3Rpb24tdXRpbHMnXG5pbXBvcnQgeyByZW1vdmVSZXN1bHRzRnJvbUFjY3VtdWxhdGVkLCByZW1vdmVSZWNvcmRzRnJvbU9yaWdpblNlbGVjdGlvbnMgfSBmcm9tICcuL3Jlc3VsdHMtbWFuYWdlbWVudC11dGlscydcbmltcG9ydCB7IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIgfSBmcm9tICd3aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbidcblxuY29uc3QgZGVidWdMb2dnZXIgPSBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyKClcbmltcG9ydCB7IEVycm9yTWVzc2FnZSB9IGZyb20gJ3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uJ1xuY29uc3QgeyBpY29uTWFwIH0gPSBnZXRXaWRnZXRSdW50aW1lRGF0YU1hcCgpXG5cbi8qKlxuICogQ3VzdG9tIGV2ZW50IG5hbWUgZm9yIHJlcXVlc3RpbmcgcmVzdG9yYXRpb24gd2hlbiBpZGVudGlmeSBwb3B1cCBjbG9zZXMuXG4gKi9cbmNvbnN0IFJFU1RPUkVfT05fSURFTlRJRllfQ0xPU0VfRVZFTlQgPSAncXVlcnlzaW1wbGUtcmVzdG9yZS1vbi1pZGVudGlmeS1jbG9zZSdcblxuLyoqXG4gKiBEZXRlY3RzIGlmIGFuIGlkZW50aWZ5IHBvcHVwIGlzIGN1cnJlbnRseSB2aXNpYmxlIGluIHRoZSBET00uXG4gKiBVc2VzIHZlcmlmaWVkIHNlbGVjdG9ycyBiYXNlZCBvbiBFeHBlcmllbmNlIEJ1aWxkZXIncyBpZGVudGlmeSBwb3B1cCBzdHJ1Y3R1cmUuXG4gKiBcbiAqIEByZXR1cm5zIHRydWUgaWYgaWRlbnRpZnkgcG9wdXAgaXMgZGV0ZWN0ZWQgYW5kIHZpc2libGUsIGZhbHNlIG90aGVyd2lzZVxuICovXG5mdW5jdGlvbiBpc0lkZW50aWZ5UG9wdXBPcGVuKCk6IGJvb2xlYW4ge1xuICAvLyBQcmltYXJ5IHNlbGVjdG9yOiAuZXNyaS1wb3B1cCB3aXRoIHJvbGU9XCJkaWFsb2dcIlxuICBjb25zdCBwb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lc3JpLXBvcHVwW3JvbGU9XCJkaWFsb2dcIl0nKVxuICBcbiAgaWYgKCFwb3B1cCkge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG4gIFxuICAvLyBWZXJpZnkgaXQncyB2aXNpYmxlIChub3QgaGlkZGVuKVxuICBjb25zdCBhcmlhSGlkZGVuID0gcG9wdXAuZ2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicpXG4gIGlmIChhcmlhSGlkZGVuID09PSAndHJ1ZScpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuICBcbiAgLy8gQWRkaXRpb25hbCBjaGVjazogdmVyaWZ5IGNvbXB1dGVkIHN0eWxlIHNob3dzIGl0J3MgdmlzaWJsZVxuICBjb25zdCBzdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHBvcHVwKVxuICBpZiAoc3R5bGUuZGlzcGxheSA9PT0gJ25vbmUnIHx8IHN0eWxlLnZpc2liaWxpdHkgPT09ICdoaWRkZW4nIHx8IHN0eWxlLm9wYWNpdHkgPT09ICcwJykge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG4gIFxuICAvLyBWZXJpZnkgaXQgY29udGFpbnMgZXNyaS1mZWF0dXJlcyAoaWRlbnRpZnkgcG9wdXAgc3RydWN0dXJlKVxuICBjb25zdCBoYXNGZWF0dXJlcyA9IHBvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5lc3JpLWZlYXR1cmVzJylcbiAgaWYgKCFoYXNGZWF0dXJlcykge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG4gIFxuICByZXR1cm4gdHJ1ZVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFF1ZXJ5VGFza1Jlc3VsdFByb3BzIHtcbiAgd2lkZ2V0SWQ6IHN0cmluZ1xuICByZXN1bHRDb3VudDogbnVtYmVyXG4gIG1heFBlclBhZ2U6IG51bWJlclxuICBxdWVyeVBhcmFtczogUXVlcnlQYXJhbXNcbiAgb3V0cHV0RFM6IERhdGFTb3VyY2VcbiAgcXVlcnlJdGVtOiBJbW11dGFibGVPYmplY3Q8UXVlcnlJdGVtVHlwZT5cbiAgcmVjb3JkczogRGF0YVJlY29yZFtdXG4gIHJ1bnRpbWVab29tVG9TZWxlY3RlZD86IGJvb2xlYW5cbiAgb25OYXZCYWNrOiAoY2xlYXJSZXN1bHRzPzogYm9vbGVhbikgPT4gUHJvbWlzZTx2b2lkPiB8IHZvaWRcbiAgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodD86IGJvb2xlYW5cbiAgZ3JhcGhpY3NMYXllcj86IF9fZXNyaS5HcmFwaGljc0xheWVyXG4gIG1hcFZpZXc/OiBfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXdcbiAgcmVzdWx0c01vZGU/OiBTZWxlY3Rpb25UeXBlXG4gIGFjY3VtdWxhdGVkUmVjb3Jkcz86IEZlYXR1cmVEYXRhUmVjb3JkW11cbiAgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2U/OiAocmVjb3JkczogRmVhdHVyZURhdGFSZWNvcmRbXSkgPT4gdm9pZFxufVxuXG5jb25zdCByZXN1bHRTdHlsZSA9IGNzc2BcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcblxuICAucXVlcnktcmVzdWx0X19oZWFkZXIge1xuICAgIGNvbG9yOiB2YXIoLS1zeXMtY29sb3Itc3VyZmFjZS1wYXBlci10ZXh0KTtcbiAgICBmb250LXdlaWdodDogNTAwO1xuICAgIGZvbnQtc2l6ZTogMC44NzVyZW07XG4gICAgbGluZS1oZWlnaHQ6IDEuNTtcbiAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tc3lzLWNvbG9yLWRpdmlkZXItc2Vjb25kYXJ5KTtcbiAgICBtYXJnaW4tYm90dG9tOiA2cHg7XG4gICAgcGFkZGluZy1ib3R0b206IDhweDtcbiAgfVxuXG4gIC5xdWVyeS1yZXN1bHQtY29udGFpbmVyIHtcbiAgICBmbGV4OiAxIDEgMDtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgb3ZlcmZsb3c6IGF1dG87XG4gICAgbWluLWhlaWdodDogMDtcbiAgfVxuXG4gIC5xdWVyeS1yZXN1bHQtaW5mbyB7XG4gICAgaGVpZ2h0OiAxOHB4O1xuICB9XG5gXG5cbmV4cG9ydCBmdW5jdGlvbiBRdWVyeVRhc2tSZXN1bHQgKHByb3BzOiBRdWVyeVRhc2tSZXN1bHRQcm9wcykge1xuICBjb25zdCB7IHF1ZXJ5SXRlbSwgcXVlcnlQYXJhbXMsIHJlc3VsdENvdW50LCBtYXhQZXJQYWdlLCByZWNvcmRzLCB3aWRnZXRJZCwgb3V0cHV0RFMsIHJ1bnRpbWVab29tVG9TZWxlY3RlZCwgb25OYXZCYWNrLCByZXN1bHRzTW9kZSwgYWNjdW11bGF0ZWRSZWNvcmRzLCBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZSwgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCwgZ3JhcGhpY3NMYXllciwgbWFwVmlldyB9ID0gcHJvcHNcbiAgY29uc3QgZ2V0STE4bk1lc3NhZ2UgPSBob29rcy51c2VUcmFuc2xhdGlvbihkZWZhdWx0TWVzc2FnZSlcbiAgY29uc3QgaW50bCA9IHVzZUludGwoKVxuICBjb25zdCBbcXVlcnlEYXRhLCBzZXRRdWVyeURhdGFdID0gUmVhY3QudXNlU3RhdGUobnVsbClcbiAgY29uc3QgW3NlbGVjdGVkUmVjb3Jkcywgc2V0U2VsZWN0ZWRSZWNvcmRzXSA9IFJlYWN0LnVzZVN0YXRlPERhdGFSZWNvcmRbXT4oW10pXG4gIGNvbnN0IFtyZW1vdmVkUmVjb3JkSWRzLCBzZXRSZW1vdmVkUmVjb3JkSWRzXSA9IFJlYWN0LnVzZVN0YXRlPFNldDxzdHJpbmc+PihuZXcgU2V0KCkpXG4gIFxuICBjb25zdCBjdXJyZW50SXRlbSA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfUVVFUllfSVRFTSwgcXVlcnlJdGVtKVxuICBjb25zdCBbZXhwYW5kQWxsLCBzZXRFeHBhbmRBbGxdID0gUmVhY3QudXNlU3RhdGUoY3VycmVudEl0ZW0ucmVzdWx0RXhwYW5kQnlEZWZhdWx0ID8/IGZhbHNlKVxuICAvLyBUcmFjayBpbmRpdmlkdWFsIGl0ZW0gZXhwYW5zaW9uIHN0YXRlcyB0byBtYWludGFpbiBzdGF0ZSB3aGVuIGl0ZW1zIGFyZSByZW1vdmVkXG4gIGNvbnN0IFtpdGVtRXhwYW5kU3RhdGVzLCBzZXRJdGVtRXhwYW5kU3RhdGVzXSA9IFJlYWN0LnVzZVN0YXRlPE1hcDxzdHJpbmcsIGJvb2xlYW4+PihuZXcgTWFwKCkpXG4gIGNvbnN0IGJhY2tCdG5SZWYgPSBSZWFjdC51c2VSZWY8SFRNTEJ1dHRvbkVsZW1lbnQ+KHVuZGVmaW5lZClcbiAgXG4gIC8vIFRyYWNrIGV4cGFuZEFsbCBjaGFuZ2VzIGZvciBkZWJ1Z2dpbmdcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgIGV2ZW50OiAnZXhwYW5kQWxsLXN0YXRlLWNoYW5nZWQnLFxuICAgICAgd2lkZ2V0SWQsXG4gICAgICBleHBhbmRBbGwsXG4gICAgICBxdWVyeUl0ZW1Db25maWdJZDogcXVlcnlJdGVtLmNvbmZpZ0lkLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgfSwgW2V4cGFuZEFsbCwgd2lkZ2V0SWQsIHF1ZXJ5SXRlbS5jb25maWdJZF0pXG4gIC8vIFRyYWNrIGlmIHdlJ3ZlIGFscmVhZHkgc2VsZWN0ZWQgdGhlc2UgcmVjb3JkcyB0byBwcmV2ZW50IHJlLXNlbGVjdGlvbiB3aGVuIHN3aXRjaGluZyB0YWJzXG4gIGNvbnN0IGhhc1NlbGVjdGVkUmVmID0gUmVhY3QudXNlUmVmKGZhbHNlKVxuICAvLyBUcmFjayB0aGUgbGFzdCByZWNvcmRzIHdlIHNlbGVjdGVkIHRvIGRldGVjdCB3aGVuIG5ldyByZWNvcmRzIGNvbWUgaW5cbiAgY29uc3QgbGFzdFNlbGVjdGVkUmVjb3Jkc1JlZiA9IFJlYWN0LnVzZVJlZjxzdHJpbmdbXT4oW10pXG4gIC8vIFRyYWNrIHRoZSBvcmlnaW5hbCBxdWVyeSByZWNvcmQgSURzIChub3Qgc2VsZWN0ZWQgSURzKSB0byBkZXRlY3Qgd2hlbiBxdWVyeSByZXN1bHRzIGNoYW5nZVxuICBjb25zdCBsYXN0UXVlcnlSZWNvcmRJZHNSZWYgPSBSZWFjdC51c2VSZWY8c3RyaW5nW10+KFtdKVxuICAvLyBUcmFjayB0aGUgbGFzdCBzZWxlY3RlZCBGZWF0dXJlRGF0YVJlY29yZHMgZm9yIHJlc3RvcmF0aW9uIChpZiBuZWVkZWQpXG4gIGNvbnN0IGxhc3RTZWxlY3RlZEZlYXR1cmVSZWNvcmRzUmVmID0gUmVhY3QudXNlUmVmPEZlYXR1cmVEYXRhUmVjb3JkW10+KFtdKVxuICAvLyBSZWYgdG8gdHJhY2sgcmVtb3ZlZFJlY29yZElkcyBmb3IgdXNlIGluIGNhbGxiYWNrcyAoYXZvaWRzIHN0YWxlIGNsb3N1cmUgaXNzdWVzKVxuICBjb25zdCByZW1vdmVkUmVjb3JkSWRzUmVmID0gUmVhY3QudXNlUmVmPFNldDxzdHJpbmc+PihuZXcgU2V0KCkpXG4gIFxuICAvLyBTeW5jIHJlZiB3aGVuZXZlciByZW1vdmVkUmVjb3JkSWRzIHN0YXRlIGNoYW5nZXNcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICByZW1vdmVkUmVjb3JkSWRzUmVmLmN1cnJlbnQgPSByZW1vdmVkUmVjb3JkSWRzXG4gIH0sIFtyZW1vdmVkUmVjb3JkSWRzXSlcbiAgLy8gRXJyb3Igc3RhdGUgZm9yIHVzZXItZmFjaW5nIGVycm9yc1xuICBjb25zdCBbc2VsZWN0aW9uRXJyb3IsIHNldFNlbGVjdGlvbkVycm9yXSA9IFJlYWN0LnVzZVN0YXRlPHN0cmluZz4obnVsbClcblxuICBjb25zdCBleHRyYUFjdGlvbnMgPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICByZXR1cm4gZ2V0RXh0cmFBY3Rpb25zKHdpZGdldElkLCBvdXRwdXREUywgaW50bCwgcXVlcnlJdGVtLCBydW50aW1lWm9vbVRvU2VsZWN0ZWQpXG4gIH0sIFt3aWRnZXRJZCwgb3V0cHV0RFMsIGludGwsIHF1ZXJ5SXRlbSwgcnVudGltZVpvb21Ub1NlbGVjdGVkXSlcblxuICBjb25zdCBlbmFibGVEYXRhQWN0aW9uID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcbiAgICBjb25zdCB3aWRnZXRKc29uID0gc3RhdGUuYXBwQ29uZmlnLndpZGdldHNbd2lkZ2V0SWRdXG4gICAgcmV0dXJuIHdpZGdldEpzb24uZW5hYmxlRGF0YUFjdGlvbiA/PyB0cnVlXG4gIH0pXG5cbiAgY29uc3QgcGFnaW5nVHlwZUluQ29uZmlnID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcbiAgICBjb25zdCB3aWRnZXRKc29uID0gc3RhdGUuYXBwQ29uZmlnLndpZGdldHNbd2lkZ2V0SWRdXG4gICAgcmV0dXJuIHdpZGdldEpzb24uY29uZmlnLnJlc3VsdFBhZ2luZ1N0eWxlXG4gIH0pXG4gIGNvbnN0IGRpcmVjdGlvblR5cGVJbkNvbmZpZyA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XG4gICAgY29uc3Qgd2lkZ2V0SnNvbiA9IHN0YXRlLmFwcENvbmZpZy53aWRnZXRzW3dpZGdldElkXVxuICAgIHJldHVybiB3aWRnZXRKc29uLmNvbmZpZy5yZXN1bHRMaXN0RGlyZWN0aW9uXG4gIH0pXG4gIC8vIEZPUkNFIFNpbXBsZUxpc3QgLSBpZ25vcmUgY29uZmlnLCB3ZSdyZSBkb25lIHdpdGggbGF6eSBsb2FkaW5nIGlzc3Vlc1xuICBjb25zdCBwYWdpbmdUeXBlID0gUGFnaW5nVHlwZS5TaW1wbGVcbiAgY29uc3QgZGlyZWN0aW9uID0gZGlyZWN0aW9uVHlwZUluQ29uZmlnID8/IExpc3REaXJlY3Rpb24uVmVydGljYWxcblxuICAvLyBHcm91cCByZWNvcmRzIGJ5IG9yaWdpbiBkYXRhIHNvdXJjZSBmb3IgRGF0YUFjdGlvbkxpc3RcbiAgLy8gVGhpcyBlbnN1cmVzIERhdGFBY3Rpb25MaXN0IHJlY29nbml6ZXMgcmVjb3JkcyBldmVuIHdoZW4gdGhleSBjb21lIGZyb20gZGlmZmVyZW50IHF1ZXJpZXMvb3JpZ2luc1xuICBjb25zdCBhY3Rpb25EYXRhU2V0czogRGF0YVJlY29yZFNldFtdID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgLy8gRGVidWc6IExvZyB3aGF0IHJlY29yZHMgYXJlIGF2YWlsYWJsZVxuICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgZXZlbnQ6ICdhY3Rpb25EYXRhU2V0cy1jYWxjdWxhdGlvbi1zdGFydCcsXG4gICAgICB3aWRnZXRJZDogd2lkZ2V0SWQsXG4gICAgICBzZWxlY3RlZFJlY29yZHNDb3VudDogc2VsZWN0ZWRSZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgIHF1ZXJ5RGF0YVJlY29yZHNDb3VudDogcXVlcnlEYXRhPy5yZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgIHJlY29yZHNQcm9wQ291bnQ6IHJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgb3V0cHV0RFNJZDogb3V0cHV0RFM/LmlkLFxuICAgICAgaGFzU2VsZWN0ZWRSZWNvcmRzOiBzZWxlY3RlZFJlY29yZHM/Lmxlbmd0aCA+IDAsXG4gICAgICBoYXNRdWVyeURhdGFSZWNvcmRzOiBxdWVyeURhdGE/LnJlY29yZHM/Lmxlbmd0aCA+IDAsXG4gICAgICBoYXNSZWNvcmRzUHJvcDogcmVjb3Jkcz8ubGVuZ3RoID4gMFxuICAgIH0pXG4gICAgXG4gICAgY29uc3QgaXNBY2N1bXVsYXRpb25Nb2RlID0gcmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb24gfHwgcmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvblxuICAgIFxuICAgIC8vIEluIGFjY3VtdWxhdGlvbiBtb2RlcyAoQWRkL1JlbW92ZSksIHByZWZlciB0aGUgJ3JlY29yZHMnIHByb3AgKHRoZSBhY2N1bXVsYXRlZCBzZXQpXG4gICAgLy8gYmVjYXVzZSBvdXRwdXREUy5nZXRTZWxlY3RlZFJlY29yZHMoKSB3aWxsIG9ubHkgcmV0dXJuIHJlY29yZHMgdGhhdCBtYXRjaCB0aGUgY3VycmVudCBxdWVyeSdzIHdoZXJlIGNsYXVzZS5cbiAgICBjb25zdCByZWNvcmRzVG9Vc2UgPSBpc0FjY3VtdWxhdGlvbk1vZGVcbiAgICAgID8gKHJlY29yZHMgfHwgW10pXG4gICAgICA6IChzZWxlY3RlZFJlY29yZHM/Lmxlbmd0aCA+IDAgPyBzZWxlY3RlZFJlY29yZHMgOiAocXVlcnlEYXRhPy5yZWNvcmRzPy5sZW5ndGggPiAwID8gcXVlcnlEYXRhLnJlY29yZHMgOiAocmVjb3JkcyB8fCBbXSkpKVxuICAgIFxuICAgIC8vIElmIG5vIHJlY29yZHMsIHJldHVybiBzaW5nbGUgRGF0YVJlY29yZFNldCB3aXRoIGVtcHR5IHJlY29yZHMgdXNpbmcgb3V0cHV0RFNcbiAgICBpZiAoIXJlY29yZHNUb1VzZSB8fCByZWNvcmRzVG9Vc2UubGVuZ3RoID09PSAwKSB7XG4gICAgICBjb25zdCBlbXB0eURhdGFTZXQ6IERhdGFSZWNvcmRTZXQgPSB7XG4gICAgICAgIGRhdGFTb3VyY2U6IG91dHB1dERTLFxuICAgICAgICB0eXBlOiAnbG9hZGVkJyxcbiAgICAgICAgcmVjb3JkczogW10sXG4gICAgICAgIG5hbWU6IG91dHB1dERTPy5pZCxcbiAgICAgICAgbGFiZWw6IG91dHB1dERTPy5nZXRMYWJlbCgpXG4gICAgICB9XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdhY3Rpb25EYXRhU2V0cy1lbXB0eS1yZWNvcmRzJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHdpZGdldElkLFxuICAgICAgICBkYXRhU2V0RGF0YVNvdXJjZUlkOiBlbXB0eURhdGFTZXQuZGF0YVNvdXJjZT8uaWRcbiAgICAgIH0pXG4gICAgICByZXR1cm4gW2VtcHR5RGF0YVNldF1cbiAgICB9XG4gICAgXG4gICAgLy8gR3JvdXAgcmVjb3JkcyBieSB0aGVpciBvcmlnaW4gZGF0YSBzb3VyY2VcbiAgICBjb25zdCByZWNvcmRzQnlPcmlnaW5EUyA9IG5ldyBNYXA8RmVhdHVyZUxheWVyRGF0YVNvdXJjZSwgRmVhdHVyZURhdGFSZWNvcmRbXT4oKVxuICAgIFxuICAgIHJlY29yZHNUb1VzZS5mb3JFYWNoKHJlY29yZCA9PiB7XG4gICAgICBjb25zdCByZWNvcmREUyA9IChyZWNvcmQgYXMgRmVhdHVyZURhdGFSZWNvcmQpLmdldERhdGFTb3VyY2U/LigpIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgICAgIGxldCBvcmlnaW5EUzogRmVhdHVyZUxheWVyRGF0YVNvdXJjZSB8IG51bGwgPSBudWxsXG4gICAgICBcbiAgICAgIGlmIChyZWNvcmREUykge1xuICAgICAgICBvcmlnaW5EUyA9IHJlY29yZERTLmdldE9yaWdpbkRhdGFTb3VyY2VzKCk/LlswXSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlIHx8IHJlY29yZERTXG4gICAgICB9IGVsc2UgaWYgKG91dHB1dERTKSB7XG4gICAgICAgIC8vIEZhbGxiYWNrOiB1c2Ugb3V0cHV0RFMncyBvcmlnaW4gaWYgcmVjb3JkIGRvZXNuJ3QgaGF2ZSBkYXRhU291cmNlXG4gICAgICAgIG9yaWdpbkRTID0gb3V0cHV0RFMuZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKT8uWzBdIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2UgfHwgb3V0cHV0RFMgYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAob3JpZ2luRFMpIHtcbiAgICAgICAgaWYgKCFyZWNvcmRzQnlPcmlnaW5EUy5oYXMob3JpZ2luRFMpKSB7XG4gICAgICAgICAgcmVjb3Jkc0J5T3JpZ2luRFMuc2V0KG9yaWdpbkRTLCBbXSlcbiAgICAgICAgfVxuICAgICAgICByZWNvcmRzQnlPcmlnaW5EUy5nZXQob3JpZ2luRFMpLnB1c2gocmVjb3JkIGFzIEZlYXR1cmVEYXRhUmVjb3JkKVxuICAgICAgfVxuICAgIH0pXG4gICAgXG4gICAgLy8gQ3JlYXRlIGEgRGF0YVJlY29yZFNldCBmb3IgZWFjaCBvcmlnaW4gZGF0YSBzb3VyY2VcbiAgICBjb25zdCBkYXRhU2V0czogRGF0YVJlY29yZFNldFtdID0gQXJyYXkuZnJvbShyZWNvcmRzQnlPcmlnaW5EUy5lbnRyaWVzKCkpLm1hcCgoW29yaWdpbkRTLCBvcmlnaW5SZWNvcmRzXSkgPT4ge1xuICAgICAgY29uc3QgZGF0YVNldDogRGF0YVJlY29yZFNldCA9IHtcbiAgICAgICAgZGF0YVNvdXJjZTogb3JpZ2luRFMsIC8vIFVzZSBvcmlnaW4gRFMsIG5vdCBvdXRwdXREU1xuICAgICAgICB0eXBlOiAnc2VsZWN0ZWQnLFxuICAgICAgICByZWNvcmRzOiBvcmlnaW5SZWNvcmRzLFxuICAgICAgICBuYW1lOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgbGFiZWw6IG9yaWdpbkRTLmdldExhYmVsKClcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQWRkIGZpZWxkcyBpZiBuZWVkZWQgKHVzZSBjdXJyZW50SXRlbSdzIGZpZWxkIHNldHRpbmdzKVxuICAgICAgaWYgKGN1cnJlbnRJdGVtLnJlc3VsdEZpZWxkc1R5cGUgPT09IEZpZWxkc1R5cGUuU2VsZWN0QXR0cmlidXRlcyAmJiBjdXJyZW50SXRlbS5yZXN1bHREaXNwbGF5RmllbGRzICE9IG51bGwpIHtcbiAgICAgICAgZGF0YVNldC5maWVsZHMgPSBjb21iaW5lRmllbGRzKGN1cnJlbnRJdGVtLnJlc3VsdERpc3BsYXlGaWVsZHMsIGN1cnJlbnRJdGVtLnJlc3VsdFRpdGxlRXhwcmVzc2lvbilcbiAgICAgIH0gZWxzZSBpZiAob3JpZ2luRFMgJiYgJ2dldFBvcHVwSW5mbycgaW4gb3JpZ2luRFMpIHtcbiAgICAgICAgLy8gdXNlIGZpZWxkcyBpbiBwb3B1cCB0ZW1wbGF0ZSBmcm9tIG9yaWdpbiBEU1xuICAgICAgICBjb25zdCBwb3B1cEluZm8gPSBvcmlnaW5EUy5nZXRQb3B1cEluZm8oKVxuICAgICAgICBpZiAocG9wdXBJbmZvPy5maWVsZEluZm9zKSB7XG4gICAgICAgICAgZGF0YVNldC5maWVsZHMgPSBwb3B1cEluZm8uZmllbGRJbmZvcy5maWx0ZXIoKGZpZWxkSW5mbykgPT4gZmllbGRJbmZvLnZpc2libGUpLm1hcCgoZmllbGRJbmZvKSA9PiBmaWVsZEluZm8uZmllbGROYW1lKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiBkYXRhU2V0XG4gICAgfSlcbiAgICBcbiAgICAvLyBEZWJ1ZzogTG9nIHdoYXQgdGhlIGZpbmFsIGRhdGFTZXRzIGNvbnRhaW5cbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgIGV2ZW50OiAnYWN0aW9uRGF0YVNldHMtZmluYWwnLFxuICAgICAgd2lkZ2V0SWQ6IHdpZGdldElkLFxuICAgICAgZGF0YVNldHNDb3VudDogZGF0YVNldHMubGVuZ3RoLFxuICAgICAgdG90YWxSZWNvcmRzQ291bnQ6IHJlY29yZHNUb1VzZS5sZW5ndGgsXG4gICAgICBkYXRhU2V0c0J5T3JpZ2luOiBkYXRhU2V0cy5tYXAoZHMgPT4gKHtcbiAgICAgICAgb3JpZ2luRFNJZDogZHMuZGF0YVNvdXJjZT8uaWQsXG4gICAgICAgIHJlY29yZHNDb3VudDogZHMucmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgIHR5cGU6IGRzLnR5cGVcbiAgICAgIH0pKVxuICAgIH0pXG4gICAgXG4gICAgLy8gSWYgd2UgY291bGRuJ3QgZ3JvdXAgYnkgb3JpZ2luIChzaG91bGRuJ3QgaGFwcGVuKSwgZmFsbGJhY2sgdG8gc2luZ2xlIERhdGFSZWNvcmRTZXQgd2l0aCBvdXRwdXREU1xuICAgIGlmIChkYXRhU2V0cy5sZW5ndGggPT09IDAgJiYgb3V0cHV0RFMpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ2FjdGlvbkRhdGFTZXRzLWZhbGxiYWNrLXRvLW91dHB1dERTJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHdpZGdldElkLFxuICAgICAgICByZWFzb246ICdjb3VsZC1ub3QtZGV0ZXJtaW5lLW9yaWdpbi1kcydcbiAgICAgIH0pXG4gICAgICByZXR1cm4gW3tcbiAgICAgICAgZGF0YVNvdXJjZTogb3V0cHV0RFMsXG4gICAgICAgIHR5cGU6IHJlY29yZHNUb1VzZS5sZW5ndGggPiAwID8gJ3NlbGVjdGVkJyA6ICdsb2FkZWQnLFxuICAgICAgICByZWNvcmRzOiByZWNvcmRzVG9Vc2UsXG4gICAgICAgIG5hbWU6IG91dHB1dERTLmlkLFxuICAgICAgICBsYWJlbDogb3V0cHV0RFMuZ2V0TGFiZWwoKVxuICAgICAgfV1cbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGRhdGFTZXRzXG4gIH0sIFtzZWxlY3RlZFJlY29yZHMsIG91dHB1dERTLCBxdWVyeURhdGEsIGN1cnJlbnRJdGVtLCByZWNvcmRzLCB3aWRnZXRJZF0pXG5cbiAgLy8gTWVtb2l6ZSBmaWx0ZXJlZCByZWNvcmRzIHRvIHByZXZlbnQgdW5uZWNlc3NhcnkgcmUtcmVuZGVycyB0aGF0IHJlc2V0IHNjcm9sbCBwb3NpdGlvblxuICAvLyBUaGlzIGVuc3VyZXMgdGhlIHJlY29yZHMgcHJvcCBvbmx5IGNoYW5nZXMgd2hlbiB0aGUgYWN0dWFsIGRhdGEgY2hhbmdlcywgbm90IGp1c3QgdGhlIGFycmF5IHJlZmVyZW5jZVxuICBjb25zdCBmaWx0ZXJlZFJlY29yZHNGb3JMaXN0ID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIHF1ZXJ5RGF0YT8ucmVjb3Jkcz8uZmlsdGVyKChyZWNvcmQ6IERhdGFSZWNvcmQpID0+ICFyZW1vdmVkUmVjb3JkSWRzLmhhcyhyZWNvcmQuZ2V0SWQoKSkpIHx8IFxuICAgICAgICAgICAocmVjb3Jkcz8uZmlsdGVyKHJlY29yZCA9PiAhcmVtb3ZlZFJlY29yZElkcy5oYXMocmVjb3JkLmdldElkKCkpKSB8fCBbXSlcbiAgfSwgW3F1ZXJ5RGF0YT8ucmVjb3JkcywgcmVjb3JkcywgcmVtb3ZlZFJlY29yZElkc10pXG5cbiAgaG9va3MudXNlRWZmZWN0T25jZSgoKSA9PiB7XG4gICAgLy8gZm9jdXMgdGhlIGJhY2sgYnV0dG9uIHdoZW4gaXQgaXMgcmVuZGVyZWRcbiAgICBmb2N1c0VsZW1lbnRJbktleWJvYXJkTW9kZShiYWNrQnRuUmVmLmN1cnJlbnQpXG4gIH0pXG5cbiAgLyoqXG4gICAqIEVmZmVjdCBob29rIHRoYXQgcnVucyB3aGVuIG5ldyBxdWVyeSByZXN1bHRzIGFycml2ZS5cbiAgICogUmVzZXRzIHJlbW92ZWQgcmVjb3JkcywgZXhwYW5kIHN0YXRlLCBhbmQgcXVlcnkgZGF0YSBmb3IgdGhlIG5ldyByZXN1bHRzLlxuICAgKiBBbHNvIGhhbmRsZXMgYXV0by1zZWxlY3Rpb24gb2YgcmVjb3JkcyB3aGVuIHRoZXkgZmlyc3QgYXJyaXZlLlxuICAgKi9cbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBDaGVjayBpZiB0aGVzZSBhcmUgbmV3IHJlY29yZHMgKGRpZmZlcmVudCBmcm9tIHdoYXQgd2UgbGFzdCBxdWVyaWVkKVxuICAgIC8vIElNUE9SVEFOVDogQ29tcGFyZSBhZ2FpbnN0IG9yaWdpbmFsIHF1ZXJ5IHJlc3VsdHMsIG5vdCBzZWxlY3RlZCByZXN1bHRzXG4gICAgLy8gVGhpcyBwcmV2ZW50cyByZW1vdmVkUmVjb3JkSWRzIGZyb20gYmVpbmcgcmVzZXQgd2hlbiByZWNvcmRzIGFyZSByZW1vdmVkXG4gICAgY29uc3QgY3VycmVudFJlY29yZElkcyA9IHJlY29yZHM/Lm1hcChyZWNvcmQgPT4gcmVjb3JkLmdldElkKCkpIHx8IFtdXG4gICAgY29uc3QgcmVjb3Jkc0NoYW5nZWQgPSBjdXJyZW50UmVjb3JkSWRzLmxlbmd0aCAhPT0gbGFzdFF1ZXJ5UmVjb3JkSWRzUmVmLmN1cnJlbnQubGVuZ3RoIHx8XG4gICAgICBjdXJyZW50UmVjb3JkSWRzLnNvbWUoKGlkLCBpbmRleCkgPT4gaWQgIT09IGxhc3RRdWVyeVJlY29yZElkc1JlZi5jdXJyZW50W2luZGV4XSlcbiAgICBcbiAgICAvLyBEZWJ1ZzogTG9nIHdoZW4gcmVjb3JkcyBwcm9wIGNoYW5nZXNcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgIGV2ZW50OiAncmVjb3Jkcy1wcm9wLWNoYW5nZWQnLFxuICAgICAgd2lkZ2V0SWQ6IHdpZGdldElkLFxuICAgICAgcmVjb3Jkc0NvdW50OiByZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgIHdpbGxTZXRRdWVyeURhdGE6IHJlY29yZHMgJiYgcmVjb3Jkcy5sZW5ndGggPiAwLFxuICAgICAgcmVtb3ZlZFJlY29yZElkc0NvdW50OiByZW1vdmVkUmVjb3JkSWRzLnNpemUsXG4gICAgICBoYXNTZWxlY3RlZFJlZjogaGFzU2VsZWN0ZWRSZWYuY3VycmVudCxcbiAgICAgIHJlY29yZHNDaGFuZ2VkOiByZWNvcmRzQ2hhbmdlZCxcbiAgICAgIGxhc3RRdWVyeVJlY29yZElkc0NvdW50OiBsYXN0UXVlcnlSZWNvcmRJZHNSZWYuY3VycmVudC5sZW5ndGgsXG4gICAgICBjdXJyZW50UmVjb3JkSWRzQ291bnQ6IGN1cnJlbnRSZWNvcmRJZHMubGVuZ3RoXG4gICAgfSlcbiAgICBcbiAgICAvLyBJTVBPUlRBTlQ6IE9ubHkgcmVzZXQgcmVtb3ZlZCByZWNvcmRzIGlmIHRoaXMgaXMgdHJ1bHkgYSBORVcgcXVlcnkgd2l0aCBkaWZmZXJlbnQgcmVjb3Jkc1xuICAgIC8vIERvbid0IHJlc2V0IGlmIHJlY29yZHMgYXJlIHRoZSBzYW1lIChqdXN0IGEgcmUtcmVuZGVyIG9yIGxhenkgbG9hZClcbiAgICBpZiAocmVjb3Jkc0NoYW5nZWQpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ3JlY29yZHMtdHJ1bHktY2hhbmdlZC1yZXNldHRpbmctcmVtb3ZlZCcsXG4gICAgICAgIHdpZGdldElkOiB3aWRnZXRJZCxcbiAgICAgICAgb2xkUmVjb3JkSWRzQ291bnQ6IGxhc3RRdWVyeVJlY29yZElkc1JlZi5jdXJyZW50Lmxlbmd0aCxcbiAgICAgICAgbmV3UmVjb3JkSWRzQ291bnQ6IGN1cnJlbnRSZWNvcmRJZHMubGVuZ3RoXG4gICAgICB9KVxuICAgICAgc2V0UmVtb3ZlZFJlY29yZElkcyhuZXcgU2V0KCkpXG4gICAgICAvLyBVcGRhdGUgdGhlIG9yaWdpbmFsIHF1ZXJ5IHJlY29yZCBJRHMgcmVmXG4gICAgICBsYXN0UXVlcnlSZWNvcmRJZHNSZWYuY3VycmVudCA9IGN1cnJlbnRSZWNvcmRJZHNcbiAgICB9IGVsc2Uge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAncmVjb3Jkcy1ub3QtY2hhbmdlZC1wcmVzZXJ2aW5nLXJlbW92ZWQnLFxuICAgICAgICB3aWRnZXRJZDogd2lkZ2V0SWQsXG4gICAgICAgIHJlY29yZElkc0NvdW50OiBjdXJyZW50UmVjb3JkSWRzLmxlbmd0aCxcbiAgICAgICAgcmVtb3ZlZFJlY29yZElkc0NvdW50OiByZW1vdmVkUmVjb3JkSWRzLnNpemVcbiAgICAgIH0pXG4gICAgfVxuICAgIFxuICAgIC8vIFJlc2V0IGV4cGFuZCBhbGwgdG8gcXVlcnlJdGVtJ3MgcmVzdWx0RXhwYW5kQnlEZWZhdWx0IHNldHRpbmdcbiAgICBzZXRFeHBhbmRBbGwoY3VycmVudEl0ZW0ucmVzdWx0RXhwYW5kQnlEZWZhdWx0ID8/IGZhbHNlKVxuICAgIHNldFF1ZXJ5RGF0YSh7XG4gICAgICByZWNvcmRzLFxuICAgICAgcGFnZTogMVxuICAgIH0pXG4gICAgXG4gICAgLy8gT25seSBhdXRvLXNlbGVjdCByZWNvcmRzIGlmOlxuICAgIC8vIDEuIFdlIGhhdmUgcmVjb3JkcyBhbmQgb3V0cHV0RFNcbiAgICAvLyAyLiBXZSBoYXZlbid0IGFscmVhZHkgc2VsZWN0ZWQgdGhlc2UgcmVjb3JkcyAoaGFzU2VsZWN0ZWRSZWYgaXMgZmFsc2UpXG4gICAgLy8gMy4gT1IgdGhlIHJlY29yZHMgaGF2ZSBhY3R1YWxseSBjaGFuZ2VkIChuZXcgcXVlcnkgcmVzdWx0cylcbiAgICAvLyA0LiBBTkQgd2UgZG9uJ3QgaGF2ZSBhbnkgcmVtb3ZlZCByZWNvcmRzICh0byBwcmV2ZW50IHJlLXNlbGVjdGluZyByZW1vdmVkIG9uZXMpXG4gICAgaWYgKHJlY29yZHMgJiYgcmVjb3Jkcy5sZW5ndGggPiAwICYmIG91dHB1dERTICYmIFxuICAgICAgICAoIWhhc1NlbGVjdGVkUmVmLmN1cnJlbnQgfHwgcmVjb3Jkc0NoYW5nZWQpICYmIFxuICAgICAgICByZW1vdmVkUmVjb3JkSWRzLnNpemUgPT09IDApIHtcbiAgICAgIGNvbnN0IHJlY29yZElkcyA9IHJlY29yZHMubWFwKHJlY29yZCA9PiByZWNvcmQuZ2V0SWQoKSlcbiAgICAgIGNvbnN0IGZkciA9IHJlY29yZHMgYXMgRmVhdHVyZURhdGFSZWNvcmRbXVxuICAgICAgXG4gICAgICAvLyBTZWxlY3QgcmVjb3JkcyBhbmQgcHVibGlzaCBzZWxlY3Rpb24gbWVzc2FnZSB1c2luZyB1dGlsaXR5IGZ1bmN0aW9uXG4gICAgICAvLyBVc2UgYXN5bmMgSUlGRSBzaW5jZSB1c2VFZmZlY3QgY2FuJ3QgYmUgYXN5bmNcbiAgICAgIDsoYXN5bmMgKCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHNldFNlbGVjdGlvbkVycm9yKG51bGwpIC8vIENsZWFyIHByZXZpb3VzIGVycm9yc1xuICAgICAgICAgIGF3YWl0IHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoKFxuICAgICAgICAgICAgd2lkZ2V0SWQsIFxuICAgICAgICAgICAgb3V0cHV0RFMsIFxuICAgICAgICAgICAgcmVjb3JkSWRzLCBcbiAgICAgICAgICAgIGZkciwgXG4gICAgICAgICAgICBmYWxzZSwgXG4gICAgICAgICAgICB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0LCBcbiAgICAgICAgICAgIGdyYXBoaWNzTGF5ZXIsIFxuICAgICAgICAgICAgbWFwVmlld1xuICAgICAgICAgIClcbiAgICAgICAgICBoYXNTZWxlY3RlZFJlZi5jdXJyZW50ID0gdHJ1ZSAvLyBNYXJrIGFzIHNlbGVjdGVkXG4gICAgICAgICAgbGFzdFNlbGVjdGVkUmVjb3Jkc1JlZi5jdXJyZW50ID0gcmVjb3JkSWRzIC8vIFN0b3JlIHRoZSBJRHMgd2Ugc2VsZWN0ZWRcbiAgICAgICAgICBsYXN0U2VsZWN0ZWRGZWF0dXJlUmVjb3Jkc1JlZi5jdXJyZW50ID0gZmRyIC8vIFN0b3JlIHRoZSBmdWxsIHJlY29yZHMgZm9yIHBvdGVudGlhbCByZXN0b3JhdGlvblxuICAgICAgICAgIFxuICAgICAgICAgIC8vIE5vdGlmeSBXaWRnZXQgYW5kIEhlbHBlclNpbXBsZSBvZiBzZWxlY3Rpb24gY2hhbmdlXG4gICAgICAgICAgZGlzcGF0Y2hTZWxlY3Rpb25FdmVudCh3aWRnZXRJZCwgcmVjb3JkSWRzLCBvdXRwdXREUywgcXVlcnlJdGVtLmNvbmZpZ0lkKVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0ZhaWxlZCB0byBzZWxlY3QgcXVlcnkgcmVzdWx0cydcbiAgICAgICAgICBzZXRTZWxlY3Rpb25FcnJvcihlcnJvck1lc3NhZ2UpXG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgICAgICAgZXZlbnQ6ICdzZWxlY3Rpb24tZmFpbGVkLXF1ZXJ5LXJlc3VsdCcsXG4gICAgICAgICAgICBlcnJvcjogZXJyb3JNZXNzYWdlLFxuICAgICAgICAgICAgZXJyb3JTdGFjazogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnN0YWNrIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgcmVjb3JkQ291bnQ6IHJlY29yZElkcy5sZW5ndGhcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9KSgpXG4gICAgfSBlbHNlIGlmIChyZWNvcmRzQ2hhbmdlZCAmJiByZWNvcmRzICYmIHJlY29yZHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAvLyBJZiByZWNvcmRzIHdlcmUgY2xlYXJlZCwgcmVzZXQgdGhlIHNlbGVjdGlvbiBmbGFnXG4gICAgICBoYXNTZWxlY3RlZFJlZi5jdXJyZW50ID0gZmFsc2VcbiAgICAgIGxhc3RTZWxlY3RlZFJlY29yZHNSZWYuY3VycmVudCA9IFtdXG4gICAgICBzZXRTZWxlY3Rpb25FcnJvcihudWxsKSAvLyBDbGVhciBlcnJvcnMgd2hlbiBjbGVhcmluZyByZWNvcmRzXG4gICAgfSBlbHNlIGlmIChyZW1vdmVkUmVjb3JkSWRzLnNpemUgPiAwKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdza2lwcGluZy1yZXNlbGVjdGlvbi1kdWUtdG8tcmVtb3ZlZC1yZWNvcmRzJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHdpZGdldElkLFxuICAgICAgICByZW1vdmVkUmVjb3JkSWRzQ291bnQ6IHJlbW92ZWRSZWNvcmRJZHMuc2l6ZSxcbiAgICAgICAgcmVjb3Jkc0NvdW50OiByZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgaGFzU2VsZWN0ZWRSZWY6IGhhc1NlbGVjdGVkUmVmLmN1cnJlbnQsXG4gICAgICAgIHJlY29yZHNDaGFuZ2VkOiByZWNvcmRzQ2hhbmdlZFxuICAgICAgfSlcbiAgICB9XG4gIH0sIFtyZWNvcmRzLCBvdXRwdXREUywgd2lkZ2V0SWQsIHF1ZXJ5SXRlbS5jb25maWdJZCwgcXVlcnlJdGVtLnJlc3VsdEV4cGFuZEJ5RGVmYXVsdCwgcmVtb3ZlZFJlY29yZElkc10pXG5cbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBjbGVhciBzZWxlY3Rpb24gd2hlbiByZXN1bHRTZWxlY3RNb2RlIGNoYW5nZWRcbiAgICBpZiAob3V0cHV0RFMpIHtcbiAgICAgIGNsZWFyU2VsZWN0aW9uSW5EYXRhU291cmNlcyhvdXRwdXREUywgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCwgZ3JhcGhpY3NMYXllcilcbiAgICAgIHB1Ymxpc2hTZWxlY3Rpb25NZXNzYWdlKHdpZGdldElkLCBbXSwgb3V0cHV0RFMsIHRydWUpXG4gICAgfVxuICB9LCBbcXVlcnlJdGVtLnJlc3VsdFNlbGVjdE1vZGUsIG91dHB1dERTLCB3aWRnZXRJZCwgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCwgZ3JhcGhpY3NMYXllcl0pXG5cbiAgLy8gVXBkYXRlIGV4cGFuZEFsbCB3aGVuIHF1ZXJ5SXRlbSBjaGFuZ2VzIChlLmcuLCBzd2l0Y2hpbmcgYmV0d2VlbiBxdWVyaWVzKVxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IG5ld0V4cGFuZEFsbCA9IHF1ZXJ5SXRlbS5yZXN1bHRFeHBhbmRCeURlZmF1bHQgPz8gZmFsc2VcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgIGV2ZW50OiAnZXhwYW5kQWxsLXJlc2V0LWJ5LXF1ZXJ5SXRlbS1jaGFuZ2UnLFxuICAgICAgd2lkZ2V0SWQsXG4gICAgICBxdWVyeUl0ZW1Db25maWdJZDogcXVlcnlJdGVtLmNvbmZpZ0lkLFxuICAgICAgcmVzdWx0RXhwYW5kQnlEZWZhdWx0OiBxdWVyeUl0ZW0ucmVzdWx0RXhwYW5kQnlEZWZhdWx0LFxuICAgICAgbmV3RXhwYW5kQWxsLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBzZXRFeHBhbmRBbGwobmV3RXhwYW5kQWxsKVxuICAgIC8vIFJlc2V0IGluZGl2aWR1YWwgZXhwYW5zaW9uIHN0YXRlcyB3aGVuIHF1ZXJ5IGNoYW5nZXNcbiAgICBzZXRJdGVtRXhwYW5kU3RhdGVzKG5ldyBNYXAoKSlcbiAgfSwgW3F1ZXJ5SXRlbS5jb25maWdJZF0pXG5cbiAgLyoqXG4gICAqIE1vbml0b3Igb3JpZ2luIGRhdGEgc291cmNlIHNlbGVjdGlvbiBjaGFuZ2VzIHRvIGRldGVjdCB3aGVuIG90aGVyIHdpZGdldHMgKGxpa2UgbWFwIGlkZW50aWZ5KVxuICAgKiBjbGVhciBvdXIgc2VsZWN0aW9ucy4gRW5oYW5jZWQgd2l0aCBpZGVudGlmeSBwb3B1cCBkZXRlY3Rpb24gZm9yIHRlc3Rpbmcgc2NlbmFyaW9zLlxuICAgKiBXYXRjaGVzIHRoZSBvcmlnaW4gZGF0YSBzb3VyY2UncyBzZWxlY3Rpb24gc3RhdGUgZGlyZWN0bHkgdmlhIHBvbGxpbmcuXG4gICAqL1xuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghb3V0cHV0RFMpIHJldHVyblxuXG4gICAgY29uc3Qgb3JpZ2luRFMgPSBvdXRwdXREUy5nZXRPcmlnaW5EYXRhU291cmNlcygpPy5bMF0gYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICAgIGlmICghb3JpZ2luRFMpIHJldHVyblxuXG4gICAgY29uc3Qgb3JpZ2luRFNJZCA9IG9yaWdpbkRTLmlkXG4gICAgbGV0IHByZXZpb3VzU2VsZWN0ZWRJZHM6IHN0cmluZ1tdID0gW11cbiAgICBsZXQgaWRlbnRpZnlQb3B1cFdhc09wZW4gPSBmYWxzZVxuICAgIGxldCBsYXN0TG9nVGltZSA9IDBcbiAgICBjb25zdCBMT0dfVEhST1RUTEVfTVMgPSAxMDAwIC8vIFRocm90dGxlIGxvZ3MgdG8gb25jZSBwZXIgc2Vjb25kXG4gICAgXG4gICAgLy8gSW5pdGlhbCBjaGVja1xuICAgIHByZXZpb3VzU2VsZWN0ZWRJZHMgPSBvcmlnaW5EUy5nZXRTZWxlY3RlZFJlY29yZElkcygpIHx8IFtdXG4gICAgaWRlbnRpZnlQb3B1cFdhc09wZW4gPSBpc0lkZW50aWZ5UG9wdXBPcGVuKClcblxuICAgIC8vIFdhdGNoIGZvciBzZWxlY3Rpb24gY2hhbmdlcyBvbiB0aGUgb3JpZ2luIGRhdGEgc291cmNlXG4gICAgY29uc3QgY2hlY2tTZWxlY3Rpb24gPSAoKSA9PiB7XG4gICAgICBjb25zdCBjdXJyZW50U2VsZWN0ZWRJZHMgPSBvcmlnaW5EUy5nZXRTZWxlY3RlZFJlY29yZElkcygpIHx8IFtdXG4gICAgICBjb25zdCBvdXJFeHBlY3RlZElkcyA9IGxhc3RTZWxlY3RlZFJlY29yZHNSZWYuY3VycmVudFxuICAgICAgY29uc3QgaGFzT3VyU2VsZWN0aW9uID0gb3VyRXhwZWN0ZWRJZHMubGVuZ3RoID4gMFxuICAgICAgY29uc3QgaWRlbnRpZnlQb3B1cElzT3BlbiA9IGlzSWRlbnRpZnlQb3B1cE9wZW4oKVxuICAgICAgXG4gICAgICAvLyBEZXRlY3QgaWYgc2VsZWN0aW9uIHdhcyBjbGVhcmVkIG9yIGNoYW5nZWQgZXh0ZXJuYWxseVxuICAgICAgY29uc3Qgd2FzQ2xlYXJlZCA9IHByZXZpb3VzU2VsZWN0ZWRJZHMubGVuZ3RoID4gMCAmJiBjdXJyZW50U2VsZWN0ZWRJZHMubGVuZ3RoID09PSAwXG4gICAgICBjb25zdCB3YXNDaGFuZ2VkID0gcHJldmlvdXNTZWxlY3RlZElkcy5sZW5ndGggPiAwICYmIFxuICAgICAgICAoY3VycmVudFNlbGVjdGVkSWRzLmxlbmd0aCAhPT0gcHJldmlvdXNTZWxlY3RlZElkcy5sZW5ndGggfHxcbiAgICAgICAgICFjdXJyZW50U2VsZWN0ZWRJZHMuZXZlcnkoaWQgPT4gcHJldmlvdXNTZWxlY3RlZElkcy5pbmNsdWRlcyhpZCkpKVxuICAgICAgXG4gICAgICAvLyBORVc6IERldGVjdCBpZiBzZWxlY3Rpb24gd2FzIGFkZGVkICh3ZW50IGZyb20gZW1wdHkgdG8gaGF2aW5nIHJlY29yZHMpXG4gICAgICBjb25zdCB3YXNBZGRlZCA9IHByZXZpb3VzU2VsZWN0ZWRJZHMubGVuZ3RoID09PSAwICYmIGN1cnJlbnRTZWxlY3RlZElkcy5sZW5ndGggPiAwXG4gICAgICBcbiAgICAgIC8vIFRyYWNrIGlkZW50aWZ5IHBvcHVwIHN0YXRlIGNoYW5nZXNcbiAgICAgIGNvbnN0IGlkZW50aWZ5UG9wdXBKdXN0T3BlbmVkID0gIWlkZW50aWZ5UG9wdXBXYXNPcGVuICYmIGlkZW50aWZ5UG9wdXBJc09wZW5cbiAgICAgIGNvbnN0IGlkZW50aWZ5UG9wdXBKdXN0Q2xvc2VkID0gaWRlbnRpZnlQb3B1cFdhc09wZW4gJiYgIWlkZW50aWZ5UG9wdXBJc09wZW5cbiAgICAgIGNvbnN0IGlkZW50aWZ5UG9wdXBTdGlsbE9wZW4gPSBpZGVudGlmeVBvcHVwV2FzT3BlbiAmJiBpZGVudGlmeVBvcHVwSXNPcGVuXG4gICAgICBcbiAgICAgIC8vIExvZyBpZGVudGlmeSBwb3B1cCBzdGF0ZSBjaGFuZ2VzXG4gICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpXG4gICAgICBpZiAoaWRlbnRpZnlQb3B1cEp1c3RPcGVuZWQgfHwgaWRlbnRpZnlQb3B1cEp1c3RDbG9zZWQpIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdTRUxFQ1RJT04nLCB7XG4gICAgICAgICAgZXZlbnQ6IGlkZW50aWZ5UG9wdXBKdXN0T3BlbmVkID8gJ2lkZW50aWZ5LXBvcHVwLW9wZW5lZCcgOiAnaWRlbnRpZnktcG9wdXAtY2xvc2VkJyxcbiAgICAgICAgICBvcmlnaW5EU0lkLFxuICAgICAgICAgIG91clNlbGVjdGlvbkNvdW50OiBvdXJFeHBlY3RlZElkcy5sZW5ndGgsXG4gICAgICAgICAgY3VycmVudFNlbGVjdGlvbkNvdW50OiBjdXJyZW50U2VsZWN0ZWRJZHMubGVuZ3RoLFxuICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgICAgICAvLyBJZiBpZGVudGlmeSBwb3B1cCBqdXN0IGNsb3NlZCBhbmQgc2VsZWN0aW9uIHdhcyBjbGVhcmVkLCBkaXNwYXRjaCByZXN0b3JlIGV2ZW50XG4gICAgICAgIGlmIChpZGVudGlmeVBvcHVwSnVzdENsb3NlZCAmJiB3YXNDbGVhcmVkICYmIGhhc091clNlbGVjdGlvbiAmJiBvdXJFeHBlY3RlZElkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgY29uc3QgcmVzdG9yZUV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KFJFU1RPUkVfT05fSURFTlRJRllfQ0xPU0VfRVZFTlQsIHtcbiAgICAgICAgICAgIGRldGFpbDoge1xuICAgICAgICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgICAgICAgcmVjb3JkSWRzOiBvdXJFeHBlY3RlZElkcyxcbiAgICAgICAgICAgICAgb3V0cHV0RHNJZDogb3V0cHV0RFMuaWQsXG4gICAgICAgICAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBxdWVyeUl0ZW0uY29uZmlnSWRcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgICAgICAgY2FuY2VsYWJsZTogdHJ1ZVxuICAgICAgICAgIH0pXG4gICAgICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQocmVzdG9yZUV2ZW50KVxuICAgICAgICAgIFxuICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnU0VMRUNUSU9OJywge1xuICAgICAgICAgICAgZXZlbnQ6ICdpZGVudGlmeS1wb3B1cC1jbG9zZWQtcmVzdG9yZS1yZXF1ZXN0ZWQnLFxuICAgICAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgICAgICByZWNvcmRDb3VudDogb3VyRXhwZWN0ZWRJZHMubGVuZ3RoLFxuICAgICAgICAgICAgb3V0cHV0RHNJZDogb3V0cHV0RFMuaWQsXG4gICAgICAgICAgICBxdWVyeUl0ZW1Db25maWdJZDogcXVlcnlJdGVtLmNvbmZpZ0lkXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBMb2cgQUxMIHNlbGVjdGlvbiBjaGFuZ2VzIChub3QganVzdCB3aGVuIHdlIGhhdmUgb3VyIG93biBzZWxlY3Rpb24pXG4gICAgICBpZiAod2FzQ2xlYXJlZCB8fCB3YXNDaGFuZ2VkIHx8IHdhc0FkZGVkKSB7XG4gICAgICAgIC8vIENoZWNrIGlmIHRoaXMgbWF0Y2hlcyBvdXIgZXhwZWN0ZWQgc2VsZWN0aW9uXG4gICAgICAgIGNvbnN0IG1hdGNoZXNPdXJTZWxlY3Rpb24gPSBoYXNPdXJTZWxlY3Rpb24gJiYgXG4gICAgICAgICAgb3VyRXhwZWN0ZWRJZHMubGVuZ3RoID09PSBjdXJyZW50U2VsZWN0ZWRJZHMubGVuZ3RoICYmXG4gICAgICAgICAgb3VyRXhwZWN0ZWRJZHMuZXZlcnkoaWQgPT4gY3VycmVudFNlbGVjdGVkSWRzLmluY2x1ZGVzKGlkKSlcbiAgICAgICAgXG4gICAgICAgIC8vIERldGVybWluZSB3aGF0IHdvdWxkIGhhcHBlbiAoZm9yIHRlc3RpbmcvbG9nZ2luZylcbiAgICAgICAgY29uc3Qgd291bGRSZXN0b3JlID0gd2FzQ2xlYXJlZCAmJiBpZGVudGlmeVBvcHVwSXNPcGVuICYmIGhhc091clNlbGVjdGlvbiAmJiBvdXJFeHBlY3RlZElkcy5sZW5ndGggPiAwXG4gICAgICAgIFxuICAgICAgICAvLyBEZXRlcm1pbmUgc2NlbmFyaW9cbiAgICAgICAgbGV0IHNjZW5hcmlvID0gJ1Vua25vd24nXG4gICAgICAgIGlmICh3YXNBZGRlZCAmJiAhaGFzT3VyU2VsZWN0aW9uKSB7XG4gICAgICAgICAgc2NlbmFyaW8gPSAnVEVTVCBTQ0VOQVJJTyA0OiBBbm90aGVyIHdpZGdldCBzZWxlY3RlZCByZWNvcmRzICh3ZSBoYXZlIG5vIHNlbGVjdGlvbiknXG4gICAgICAgIH0gZWxzZSBpZiAod2FzQ2hhbmdlZCAmJiAhbWF0Y2hlc091clNlbGVjdGlvbiAmJiAhaGFzT3VyU2VsZWN0aW9uKSB7XG4gICAgICAgICAgc2NlbmFyaW8gPSAnVEVTVCBTQ0VOQVJJTyA1OiBBbm90aGVyIHdpZGdldCBjaGFuZ2VkIHNlbGVjdGlvbiAod2UgaGF2ZSBubyBzZWxlY3Rpb24pJ1xuICAgICAgICB9IGVsc2UgaWYgKHdhc0NoYW5nZWQgJiYgIW1hdGNoZXNPdXJTZWxlY3Rpb24gJiYgaGFzT3VyU2VsZWN0aW9uKSB7XG4gICAgICAgICAgc2NlbmFyaW8gPSBpZGVudGlmeVBvcHVwSXNPcGVuXG4gICAgICAgICAgICA/ICdURVNUIFNDRU5BUklPIDI6IFF1ZXJ5IOKGkiBJZGVudGlmeSAoc2VsZWN0aW9uIGNoYW5nZWQsIG5vdCBjbGVhcmVkKSDihpIgV291bGQgTk9UIHJlc3RvcmUnXG4gICAgICAgICAgICA6ICdURVNUIFNDRU5BUklPIDM6IFF1ZXJ5IOKGkiBBbm90aGVyIFF1ZXJ5U2ltcGxlIHdpZGdldCDihpIgV291bGQgTk9UIHJlc3RvcmUnXG4gICAgICAgIH0gZWxzZSBpZiAod2FzQ2xlYXJlZCAmJiBoYXNPdXJTZWxlY3Rpb24pIHtcbiAgICAgICAgICBzY2VuYXJpbyA9IGlkZW50aWZ5UG9wdXBJc09wZW5cbiAgICAgICAgICAgID8gJ1RFU1QgU0NFTkFSSU8gMTogUXVlcnkg4oaSIElkZW50aWZ5IOKGkiBXb3VsZCByZXN0b3JlJ1xuICAgICAgICAgICAgOiAnVEVTVCBTQ0VOQVJJTyAzOiBRdWVyeSDihpIgQW5vdGhlciBRdWVyeVNpbXBsZSB3aWRnZXQgKGNsZWFyZWQpIOKGkiBXb3VsZCBOT1QgcmVzdG9yZSdcbiAgICAgICAgfSBlbHNlIGlmICh3YXNBZGRlZCAmJiBoYXNPdXJTZWxlY3Rpb24pIHtcbiAgICAgICAgICBzY2VuYXJpbyA9IG1hdGNoZXNPdXJTZWxlY3Rpb25cbiAgICAgICAgICAgID8gJ091ciB3aWRnZXQgc2VsZWN0ZWQgcmVjb3JkcydcbiAgICAgICAgICAgIDogJ0Fub3RoZXIgd2lkZ2V0IHNlbGVjdGVkIGRpZmZlcmVudCByZWNvcmRzJ1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBMb2cgZGV0ZWN0aW9uIHdpdGggaWRlbnRpZnkgcG9wdXAgc3RhdGUgKHRocm90dGxlZClcbiAgICAgICAgaWYgKG5vdyAtIGxhc3RMb2dUaW1lID4gTE9HX1RIUk9UVExFX01TKSB7XG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdTRUxFQ1RJT04nLCB7XG4gICAgICAgICAgICBldmVudDogd2FzQ2xlYXJlZCA/ICdzZWxlY3Rpb24tY2xlYXJlZCcgOiB3YXNDaGFuZ2VkID8gJ3NlbGVjdGlvbi1jaGFuZ2VkJyA6ICdzZWxlY3Rpb24tYWRkZWQnLFxuICAgICAgICAgICAgb3JpZ2luRFNJZCxcbiAgICAgICAgICAgIG91ckV4cGVjdGVkQ291bnQ6IG91ckV4cGVjdGVkSWRzLmxlbmd0aCxcbiAgICAgICAgICAgIHByZXZpb3VzU2VsZWN0ZWRDb3VudDogcHJldmlvdXNTZWxlY3RlZElkcy5sZW5ndGgsXG4gICAgICAgICAgICBjdXJyZW50U2VsZWN0ZWRDb3VudDogY3VycmVudFNlbGVjdGVkSWRzLmxlbmd0aCxcbiAgICAgICAgICAgIHdhc0NsZWFyZWQsXG4gICAgICAgICAgICB3YXNDaGFuZ2VkLFxuICAgICAgICAgICAgd2FzQWRkZWQsXG4gICAgICAgICAgICBoYXNPdXJTZWxlY3Rpb24sXG4gICAgICAgICAgICBtYXRjaGVzT3VyU2VsZWN0aW9uLFxuICAgICAgICAgICAgaWRlbnRpZnlQb3B1cElzT3BlbixcbiAgICAgICAgICAgIGlkZW50aWZ5UG9wdXBKdXN0T3BlbmVkLFxuICAgICAgICAgICAgaWRlbnRpZnlQb3B1cFN0aWxsT3BlbixcbiAgICAgICAgICAgIGlkZW50aWZ5UG9wdXBKdXN0Q2xvc2VkLFxuICAgICAgICAgICAgd291bGRSZXN0b3JlLFxuICAgICAgICAgICAgb3VyRXhwZWN0ZWRJZHM6IG91ckV4cGVjdGVkSWRzLnNsaWNlKDAsIDUpLFxuICAgICAgICAgICAgcHJldmlvdXNTZWxlY3RlZElkczogcHJldmlvdXNTZWxlY3RlZElkcy5zbGljZSgwLCA1KSxcbiAgICAgICAgICAgIGN1cnJlbnRTZWxlY3RlZElkczogY3VycmVudFNlbGVjdGVkSWRzLnNsaWNlKDAsIDUpLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICBub3RlOiB3b3VsZFJlc3RvcmUgXG4gICAgICAgICAgICAgID8gJ1dvdWxkIHJlc3RvcmUgc2VsZWN0aW9uIChjbGVhcmVkICsgaWRlbnRpZnkgcG9wdXAgb3BlbiknXG4gICAgICAgICAgICAgIDogaWRlbnRpZnlQb3B1cElzT3BlbiAmJiB3YXNDaGFuZ2VkXG4gICAgICAgICAgICAgICAgPyAnSWRlbnRpZnkgcG9wdXAgb3BlbiBidXQgc2VsZWN0aW9uIGNoYW5nZWQgKG5vdCBjbGVhcmVkKSAtIHdvdWxkIG5vdCByZXN0b3JlJ1xuICAgICAgICAgICAgICAgIDogd2FzQ2xlYXJlZCAmJiAhaWRlbnRpZnlQb3B1cElzT3BlblxuICAgICAgICAgICAgICAgICAgPyAnU2VsZWN0aW9uIGNsZWFyZWQsIGNoZWNraW5nIGlmIGlkZW50aWZ5IHBvcHVwIG9wZW5zLi4uJ1xuICAgICAgICAgICAgICAgICAgOiB3YXNBZGRlZFxuICAgICAgICAgICAgICAgICAgICA/IGhhc091clNlbGVjdGlvbiAmJiBtYXRjaGVzT3VyU2VsZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgPyAnT3VyIHdpZGdldCBzZWxlY3RlZCByZWNvcmRzJ1xuICAgICAgICAgICAgICAgICAgICAgIDogaGFzT3VyU2VsZWN0aW9uICYmICFtYXRjaGVzT3VyU2VsZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICA/ICdBbm90aGVyIHdpZGdldCBzZWxlY3RlZCBkaWZmZXJlbnQgcmVjb3JkcydcbiAgICAgICAgICAgICAgICAgICAgICAgIDogJ1NlbGVjdGlvbiBhZGRlZCAoYnkgYW5vdGhlciB3aWRnZXQgb3IgZXh0ZXJuYWwgc291cmNlKSdcbiAgICAgICAgICAgICAgICAgICAgOiAnTm8gaWRlbnRpZnkgcG9wdXAgZGV0ZWN0ZWQgLSB3b3VsZCBub3QgcmVzdG9yZSdcbiAgICAgICAgICB9KVxuICAgICAgICAgIFxuICAgICAgICAgIGxhc3RMb2dUaW1lID0gbm93XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgcHJldmlvdXNTZWxlY3RlZElkcyA9IFsuLi5jdXJyZW50U2VsZWN0ZWRJZHNdXG4gICAgICBpZGVudGlmeVBvcHVwV2FzT3BlbiA9IGlkZW50aWZ5UG9wdXBJc09wZW5cbiAgICB9XG5cbiAgICAvLyBDaGVjayBwZXJpb2RpY2FsbHkgKGV2ZXJ5IDUwMG1zKVxuICAgIGNvbnN0IGludGVydmFsSWQgPSBzZXRJbnRlcnZhbChjaGVja1NlbGVjdGlvbiwgNTAwKVxuICAgIFxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBjbGVhckludGVydmFsKGludGVydmFsSWQpXG4gICAgfVxuICB9LCBbb3V0cHV0RFNdKVxuXG4gIC8qKlxuICAgKiBDbGVhcnMgYWxsIHJlc3VsdHMuIFJlc2V0cyBsb2NhbCBzdGF0ZSBhbmQgZGVsZWdhdGVzIHRvIHBhcmVudCdzIGNsZWFyUmVzdWx0IG1ldGhvZC5cbiAgICovXG4gIGNvbnN0IGNsZWFyUmVzdWx0cyA9IGFzeW5jICgpID0+IHtcbiAgICAvLyBMb2cgaGFzaCBzdGF0ZSBiZWZvcmUgY2xlYXJpbmdcbiAgICBjb25zdCBoYXNoQmVmb3JlID0gd2luZG93LmxvY2F0aW9uLmhhc2guc3Vic3RyaW5nKDEpXG4gICAgY29uc3QgdXJsUGFyYW1zQmVmb3JlID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhoYXNoQmVmb3JlKVxuICAgIGNvbnN0IGhhc2hQYXJhbXNCZWZvcmU6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH0gPSB7fVxuICAgIHVybFBhcmFtc0JlZm9yZS5mb3JFYWNoKCh2YWx1ZSwga2V5KSA9PiB7XG4gICAgICBoYXNoUGFyYW1zQmVmb3JlW2tleV0gPSB2YWx1ZVxuICAgIH0pXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdIQVNIJywge1xuICAgICAgZXZlbnQ6ICdjbGVhclJlc3VsdHMtY2FsbGVkJyxcbiAgICAgIHdpZGdldElkLFxuICAgICAgaGFzaEJlZm9yZTogaGFzaEJlZm9yZSxcbiAgICAgIGhhc2hQYXJhbXNCZWZvcmU6IGhhc2hQYXJhbXNCZWZvcmUsXG4gICAgICBoYXNoUGFyYW1zQ291bnQ6IE9iamVjdC5rZXlzKGhhc2hQYXJhbXNCZWZvcmUpLmxlbmd0aCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgLy8gUmVzZXQgbG9jYWwgc2VsZWN0aW9uIGZsYWdzXG4gICAgaGFzU2VsZWN0ZWRSZWYuY3VycmVudCA9IGZhbHNlXG4gICAgbGFzdFNlbGVjdGVkUmVjb3Jkc1JlZi5jdXJyZW50ID0gW11cbiAgICAvLyBSZXNldCBsb2NhbCBxdWVyeSBkYXRhIHN0YXRlXG4gICAgc2V0UXVlcnlEYXRhKG51bGwpXG4gICAgc2V0UmVtb3ZlZFJlY29yZElkcyhuZXcgU2V0KCkpXG4gICAgLy8gQ2xlYXIgZXJyb3Igc3RhdGUgd2hlbiBjbGVhcmluZyByZXN1bHRzXG4gICAgc2V0U2VsZWN0aW9uRXJyb3IobnVsbClcbiAgICAvLyBEZWxlZ2F0ZSB0byBwYXJlbnQncyBjbGVhclJlc3VsdCBtZXRob2QgKHZpYSBvbk5hdkJhY2spIHdoaWNoIGhhbmRsZXNcbiAgICAvLyBjbGVhcmluZyBzZWxlY3Rpb24gZnJvbSBtYXAsIHB1Ymxpc2hpbmcgbWVzc2FnZXMsIGV0Yy5cbiAgICBhd2FpdCBvbk5hdkJhY2sodHJ1ZSlcbiAgICBcbiAgICAvLyBMb2cgaGFzaCBzdGF0ZSBhZnRlciBjbGVhcmluZyAod2l0aCBkZWxheSB0byBjYXRjaCBhc3luYyB1cGRhdGVzKVxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgY29uc3QgaGFzaEFmdGVyID0gd2luZG93LmxvY2F0aW9uLmhhc2guc3Vic3RyaW5nKDEpXG4gICAgICBjb25zdCB1cmxQYXJhbXNBZnRlciA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoaGFzaEFmdGVyKVxuICAgICAgY29uc3QgaGFzaFBhcmFtc0FmdGVyOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9ID0ge31cbiAgICAgIHVybFBhcmFtc0FmdGVyLmZvckVhY2goKHZhbHVlLCBrZXkpID0+IHtcbiAgICAgICAgaGFzaFBhcmFtc0FmdGVyW2tleV0gPSB2YWx1ZVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNIJywge1xuICAgICAgICBldmVudDogJ2NsZWFyUmVzdWx0cy1jb21wbGV0ZWQnLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgaGFzaEJlZm9yZTogaGFzaEJlZm9yZSxcbiAgICAgICAgaGFzaEFmdGVyOiBoYXNoQWZ0ZXIsXG4gICAgICAgIGhhc2hQYXJhbXNCZWZvcmU6IGhhc2hQYXJhbXNCZWZvcmUsXG4gICAgICAgIGhhc2hQYXJhbXNBZnRlcjogaGFzaFBhcmFtc0FmdGVyLFxuICAgICAgICBoYXNoUGFyYW1zUmVtb3ZlZDogT2JqZWN0LmtleXMoaGFzaFBhcmFtc0JlZm9yZSkubGVuZ3RoIC0gT2JqZWN0LmtleXMoaGFzaFBhcmFtc0FmdGVyKS5sZW5ndGgsXG4gICAgICAgIGhhc2hQYXJhbXNDb3VudEJlZm9yZTogT2JqZWN0LmtleXMoaGFzaFBhcmFtc0JlZm9yZSkubGVuZ3RoLFxuICAgICAgICBoYXNoUGFyYW1zQ291bnRBZnRlcjogT2JqZWN0LmtleXMoaGFzaFBhcmFtc0FmdGVyKS5sZW5ndGgsXG4gICAgICAgIHN0aWxsSGFzSGFzaFBhcmFtczogT2JqZWN0LmtleXMoaGFzaFBhcmFtc0FmdGVyKS5sZW5ndGggPiAwLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgfSwgMTAwKVxuICB9XG5cbiAgY29uc3QgaGFuZGxlUmVuZGVyRG9uZSA9IFJlYWN0LnVzZUNhbGxiYWNrKCh7IGRhdGFJdGVtcywgcGFnZVNpemUsIHBhZ2UgfSkgPT4ge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgZXZlbnQ6ICdoYW5kbGVSZW5kZXJEb25lLWNhbGxlZCcsXG4gICAgICB3aWRnZXRJZCxcbiAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBxdWVyeUl0ZW0uY29uZmlnSWQsXG4gICAgICBkYXRhSXRlbXNDb3VudDogZGF0YUl0ZW1zPy5sZW5ndGggfHwgMCxcbiAgICAgIHBhZ2VTaXplLFxuICAgICAgcGFnZSxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgLy8gVXNlIHJlZiB0byBnZXQgbGF0ZXN0IHJlbW92ZWRSZWNvcmRJZHMgKGF2b2lkcyBzdGFsZSBjbG9zdXJlIGlzc3VlcyB3aXRoIGxhenkgbG9hZGluZylcbiAgICBjb25zdCBjdXJyZW50UmVtb3ZlZElkcyA9IHJlbW92ZWRSZWNvcmRJZHNSZWYuY3VycmVudFxuICAgIFxuICAgIC8vIEZpbHRlciBvdXQgcmVtb3ZlZCByZWNvcmRzIEZJUlNUIC0gYmVmb3JlIGFueSBzZWxlY3Rpb24gbG9naWNcbiAgICAvLyBUaGlzIGVuc3VyZXMgcmVtb3ZlZCByZWNvcmRzIHN0YXkgcmVtb3ZlZCBldmVuIGR1cmluZyBsYXp5IGxvYWRpbmdcbiAgICBjb25zdCBmaWx0ZXJlZEl0ZW1zID0gZGF0YUl0ZW1zPy5maWx0ZXIoaXRlbSA9PiAhY3VycmVudFJlbW92ZWRJZHMuaGFzKGl0ZW0uZ2V0SWQoKSkpIHx8IFtdXG4gICAgXG4gICAgLy8gQ2hlY2sgaWYgcXVlcnlEYXRhIGhhcyBhY3R1YWxseSBjaGFuZ2VkIGJlZm9yZSB1cGRhdGluZyBzdGF0ZVxuICAgIC8vIFRoaXMgcHJldmVudHMgdW5uZWNlc3NhcnkgcmUtcmVuZGVycyB0aGF0IHJlc2V0IHNjcm9sbCBwb3NpdGlvblxuICAgIGNvbnN0IGN1cnJlbnRSZWNvcmRzID0gcXVlcnlEYXRhPy5yZWNvcmRzIHx8IFtdXG4gICAgY29uc3QgY3VycmVudFJlY29yZElkcyA9IGN1cnJlbnRSZWNvcmRzLm1hcChyID0+IHIuZ2V0SWQoKSkuc29ydCgpXG4gICAgY29uc3QgbmV3UmVjb3JkSWRzID0gZmlsdGVyZWRJdGVtcy5tYXAociA9PiByLmdldElkKCkpLnNvcnQoKVxuICAgIGNvbnN0IGRhdGFDaGFuZ2VkID0gY3VycmVudFJlY29yZElkcy5sZW5ndGggIT09IG5ld1JlY29yZElkcy5sZW5ndGggfHxcbiAgICAgICFjdXJyZW50UmVjb3JkSWRzLmV2ZXJ5KChpZCwgaWR4KSA9PiBpZCA9PT0gbmV3UmVjb3JkSWRzW2lkeF0pIHx8XG4gICAgICBxdWVyeURhdGE/LnBhZ2VTaXplICE9PSBwYWdlU2l6ZSB8fFxuICAgICAgcXVlcnlEYXRhPy5wYWdlICE9PSBwYWdlXG4gICAgXG4gICAgLy8gT25seSB1cGRhdGUgc3RhdGUgaWYgZGF0YSBoYXMgYWN0dWFsbHkgY2hhbmdlZFxuICAgIGlmIChkYXRhQ2hhbmdlZCkge1xuICAgICAgc2V0UXVlcnlEYXRhKHtcbiAgICAgICAgcmVjb3JkczogZmlsdGVyZWRJdGVtcyxcbiAgICAgICAgcGFnZVNpemUsXG4gICAgICAgIHBhZ2VcbiAgICAgIH0pXG4gICAgfVxuICAgIFxuICAgIC8vIE9ubHkgc2VsZWN0IHJlY29yZHMgdGhhdCBhcmUgTk9UIHJlbW92ZWRcbiAgICAvLyBJTVBPUlRBTlQ6IE9ubHkgcmUtc2VsZWN0IGlmIHRoZSBzZWxlY3Rpb24gaGFzIGFjdHVhbGx5IGNoYW5nZWQgdG8gYXZvaWQgcmVzZXR0aW5nIHNjcm9sbCBwb3NpdGlvblxuICAgIGlmIChmaWx0ZXJlZEl0ZW1zICYmIGZpbHRlcmVkSXRlbXMubGVuZ3RoID4gMCAmJiBvdXRwdXREUykge1xuICAgICAgY29uc3QgcmVjb3JkSWRzID0gZmlsdGVyZWRJdGVtcy5tYXAocmVjb3JkID0+IHJlY29yZC5nZXRJZCgpKVxuICAgICAgY29uc3QgZmRyID0gZmlsdGVyZWRJdGVtcyBhcyBGZWF0dXJlRGF0YVJlY29yZFtdXG4gICAgICBcbiAgICAgIC8vIENoZWNrIHdoYXQncyBjdXJyZW50bHkgc2VsZWN0ZWQgdG8gYXZvaWQgdW5uZWNlc3NhcnkgcmUtc2VsZWN0aW9uICh3aGljaCByZXNldHMgc2Nyb2xsKVxuICAgICAgY29uc3QgY3VycmVudGx5U2VsZWN0ZWRJZHMgPSBvdXRwdXREUy5nZXRTZWxlY3RlZFJlY29yZElkcygpIHx8IFtdXG4gICAgICBjb25zdCBzZWxlY3Rpb25DaGFuZ2VkID0gY3VycmVudGx5U2VsZWN0ZWRJZHMubGVuZ3RoICE9PSByZWNvcmRJZHMubGVuZ3RoIHx8XG4gICAgICAgICFyZWNvcmRJZHMuZXZlcnkoaWQgPT4gY3VycmVudGx5U2VsZWN0ZWRJZHMuaW5jbHVkZXMoaWQpKVxuICAgICAgXG4gICAgICAvLyBPbmx5IHNlbGVjdCBpZiB0aGUgc2VsZWN0aW9uIGhhcyBhY3R1YWxseSBjaGFuZ2VkXG4gICAgICBpZiAoc2VsZWN0aW9uQ2hhbmdlZCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHNldFNlbGVjdGlvbkVycm9yKG51bGwpIC8vIENsZWFyIHByZXZpb3VzIGVycm9yc1xuICAgICAgICAgIHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoKHdpZGdldElkLCBvdXRwdXREUywgcmVjb3JkSWRzLCBmZHIpXG4gICAgICAgICAgXG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICBldmVudDogJ2hhbmRsZVJlbmRlckRvbmUtc2VsZWN0aW5nLWZpbHRlcmVkLXJlY29yZHMnLFxuICAgICAgICAgICAgd2lkZ2V0SWQ6IHdpZGdldElkLFxuICAgICAgICAgICAgZGF0YUl0ZW1zQ291bnQ6IGRhdGFJdGVtcz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgICAgICBmaWx0ZXJlZEl0ZW1zQ291bnQ6IGZpbHRlcmVkSXRlbXMubGVuZ3RoLFxuICAgICAgICAgICAgcmVtb3ZlZFJlY29yZElkc0NvdW50OiBjdXJyZW50UmVtb3ZlZElkcy5zaXplLFxuICAgICAgICAgICAgc2VsZWN0aW9uQ2hhbmdlZDogdHJ1ZSxcbiAgICAgICAgICAgIGN1cnJlbnRseVNlbGVjdGVkQ291bnQ6IGN1cnJlbnRseVNlbGVjdGVkSWRzLmxlbmd0aCxcbiAgICAgICAgICAgIG5ld1NlbGVjdGlvbkNvdW50OiByZWNvcmRJZHMubGVuZ3RoXG4gICAgICAgICAgfSlcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gc2VsZWN0IHF1ZXJ5IHJlc3VsdHMnXG4gICAgICAgICAgc2V0U2VsZWN0aW9uRXJyb3IoZXJyb3JNZXNzYWdlKVxuICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgICAgICAgIGV2ZW50OiAnc2VsZWN0aW9uLWZhaWxlZC1oYW5kbGVSZW5kZXJEb25lJyxcbiAgICAgICAgICAgIGVycm9yOiBlcnJvck1lc3NhZ2UsXG4gICAgICAgICAgICBlcnJvclN0YWNrOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICByZWNvcmRDb3VudDogcmVjb3JkSWRzLmxlbmd0aFxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgIGV2ZW50OiAnaGFuZGxlUmVuZGVyRG9uZS1za2lwcGluZy1yZXNlbGVjdGlvbicsXG4gICAgICAgICAgd2lkZ2V0SWQ6IHdpZGdldElkLFxuICAgICAgICAgIGRhdGFJdGVtc0NvdW50OiBkYXRhSXRlbXM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICAgIGZpbHRlcmVkSXRlbXNDb3VudDogZmlsdGVyZWRJdGVtcy5sZW5ndGgsXG4gICAgICAgICAgcmVtb3ZlZFJlY29yZElkc0NvdW50OiBjdXJyZW50UmVtb3ZlZElkcy5zaXplLFxuICAgICAgICAgIHJlYXNvbjogJ3NlbGVjdGlvbi11bmNoYW5nZWQnLFxuICAgICAgICAgIGN1cnJlbnRseVNlbGVjdGVkQ291bnQ6IGN1cnJlbnRseVNlbGVjdGVkSWRzLmxlbmd0aFxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cbiAgfSwgW291dHB1dERTLCB3aWRnZXRJZCwgcXVlcnlEYXRhXSlcblxuICBjb25zdCBoYW5kbGVEYXRhU291cmNlSW5mb0NoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBjb25zdCBkcyA9IERhdGFTb3VyY2VNYW5hZ2VyLmdldEluc3RhbmNlKCkuZ2V0RGF0YVNvdXJjZShvdXRwdXREUz8uaWQpXG4gICAgY29uc3QgZHNSZWNvcmRzID0gZHM/LmdldFNlbGVjdGVkUmVjb3JkcygpXG4gICAgY29uc3Qgc2VsZWN0ZWRJZHMgPSBkcz8uZ2V0U2VsZWN0ZWRSZWNvcmRJZHMoKSA/PyBbXVxuICAgIFxuICAgIC8vIENhcHR1cmUgcmVjb3JkcyBwcm9wIGJlZm9yZSB1c2luZyBpdCAodG8gYXZvaWQgc2hhZG93aW5nKVxuICAgIGNvbnN0IHJlY29yZHNQcm9wID0gcmVjb3Jkc1xuICAgIFxuICAgIC8vIERlYnVnOiBMb2cgd2hhdCBoYW5kbGVEYXRhU291cmNlSW5mb0NoYW5nZSBzZWVzXG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICBldmVudDogJ2hhbmRsZURhdGFTb3VyY2VJbmZvQ2hhbmdlLWZpcmVkJyxcbiAgICAgIHdpZGdldElkOiB3aWRnZXRJZCxcbiAgICAgIG91dHB1dERTSWQ6IG91dHB1dERTPy5pZCxcbiAgICAgIGRzSWQ6IGRzPy5pZCxcbiAgICAgIHNlbGVjdGVkUmVjb3Jkc0Zyb21EUzogZHNSZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgIHNlbGVjdGVkSWRzRnJvbURTOiBzZWxlY3RlZElkcy5sZW5ndGgsXG4gICAgICBjdXJyZW50U2VsZWN0ZWRSZWNvcmRzU3RhdGU6IHNlbGVjdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICByZWNvcmRzUHJvcENvdW50OiByZWNvcmRzUHJvcD8ubGVuZ3RoIHx8IDAsXG4gICAgICByZW1vdmVkUmVjb3JkSWRzQ291bnQ6IHJlbW92ZWRSZWNvcmRJZHMuc2l6ZSxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgLy8gSWYgd2UgaGF2ZSByZWNvcmRzIGluIHRoZSBwcm9wIChhY2N1bXVsYXRlZCByZWNvcmRzKSBidXQgRFMgc2hvd3MgMCBzZWxlY3RlZCxcbiAgICAvLyBhbmQgd2UgY3VycmVudGx5IGhhdmUgc2VsZWN0ZWRSZWNvcmRzLCB0aGlzIGlzIGxpa2VseSBhIHF1ZXJ5IHN3aXRjaCBpbiBcIkFkZCB0b1wiIG1vZGVcbiAgICAvLyB3aGVyZSByZS1zZWxlY3Rpb24gaGFzbid0IGhhcHBlbmVkIHlldC4gRG9uJ3QgY2xlYXIgc2VsZWN0ZWRSZWNvcmRzIC0gd2FpdCBmb3IgcmUtc2VsZWN0aW9uLlxuICAgIGlmIChyZWNvcmRzUHJvcCAmJiByZWNvcmRzUHJvcC5sZW5ndGggPiAwICYmIHNlbGVjdGVkSWRzLmxlbmd0aCA9PT0gMCAmJiBzZWxlY3RlZFJlY29yZHMgJiYgc2VsZWN0ZWRSZWNvcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ2hhbmRsZURhdGFTb3VyY2VJbmZvQ2hhbmdlLXNraXBwaW5nLWNsZWFyLWR1cmluZy1xdWVyeS1zd2l0Y2gnLFxuICAgICAgICB3aWRnZXRJZDogd2lkZ2V0SWQsXG4gICAgICAgIHJlYXNvbjogJ3dhaXRpbmctZm9yLXJlc2VsZWN0aW9uJyxcbiAgICAgICAgcmVjb3Jkc1Byb3BDb3VudDogcmVjb3Jkc1Byb3AubGVuZ3RoLFxuICAgICAgICBjdXJyZW50U2VsZWN0ZWRSZWNvcmRzQ291bnQ6IHNlbGVjdGVkUmVjb3Jkcy5sZW5ndGhcbiAgICAgIH0pXG4gICAgICByZXR1cm4gLy8gU2tpcCB1cGRhdGluZyAtIHJlLXNlbGVjdGlvbiBpcyBjb21pbmdcbiAgICB9XG4gICAgXG4gICAgLy8gSU1QT1JUQU5UOiBGaWx0ZXIgb3V0IHJlbW92ZWQgcmVjb3JkcyBmcm9tIERTIHNlbGVjdGlvbiBiZWZvcmUgY29tcGFyaW5nL3N5bmNpbmdcbiAgICAvLyBUaGlzIHByZXZlbnRzIHJlbW92ZWQgcmVjb3JkcyBmcm9tIGJlaW5nIHJlLWFkZGVkIHdoZW4gc2Nyb2xsaW5nIHRyaWdnZXJzIHRoaXMgY2FsbGJhY2tcbiAgICBjb25zdCBmaWx0ZXJlZERzUmVjb3JkcyA9IGRzUmVjb3Jkcz8uZmlsdGVyKChyZWNvcmQ6IERhdGFSZWNvcmQpID0+ICFyZW1vdmVkUmVjb3JkSWRzLmhhcyhyZWNvcmQuZ2V0SWQoKSkpID8/IFtdXG4gICAgY29uc3QgZmlsdGVyZWRTZWxlY3RlZElkcyA9IHNlbGVjdGVkSWRzLmZpbHRlcihpZCA9PiAhcmVtb3ZlZFJlY29yZElkcy5oYXMoaWQpKVxuICAgIFxuICAgIC8vIElmIERTIGhhcyBtb3JlIHNlbGVjdGVkIHRoYW4gb3VyIHN0YXRlLCBidXQgdGhlIGRpZmZlcmVuY2UgaXMgZW50aXJlbHkgcmVtb3ZlZCByZWNvcmRzLCBkb24ndCBzeW5jXG4gICAgaWYgKGZpbHRlcmVkU2VsZWN0ZWRJZHMubGVuZ3RoID09PSAoc2VsZWN0ZWRSZWNvcmRzPy5sZW5ndGggfHwgMCkgJiYgc2VsZWN0ZWRJZHMubGVuZ3RoID4gZmlsdGVyZWRTZWxlY3RlZElkcy5sZW5ndGgpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ2hhbmRsZURhdGFTb3VyY2VJbmZvQ2hhbmdlLXNraXBwaW5nLXN5bmMtZHVlLXRvLXJlbW92ZWQtcmVjb3JkcycsXG4gICAgICAgIHdpZGdldElkOiB3aWRnZXRJZCxcbiAgICAgICAgcmVhc29uOiAnZHMtc2VsZWN0aW9uLWluY2x1ZGVzLXJlbW92ZWQtcmVjb3JkcycsXG4gICAgICAgIGRzU2VsZWN0ZWRDb3VudDogc2VsZWN0ZWRJZHMubGVuZ3RoLFxuICAgICAgICBmaWx0ZXJlZENvdW50OiBmaWx0ZXJlZFNlbGVjdGVkSWRzLmxlbmd0aCxcbiAgICAgICAgY29tcG9uZW50U3RhdGVDb3VudDogc2VsZWN0ZWRSZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgcmVtb3ZlZFJlY29yZElkc0NvdW50OiByZW1vdmVkUmVjb3JkSWRzLnNpemVcbiAgICAgIH0pXG4gICAgICByZXR1cm4gLy8gU2tpcCBzeW5jaW5nIC0gdGhlIG1pc21hdGNoIGlzIGR1ZSB0byByZW1vdmVkIHJlY29yZHNcbiAgICB9XG4gICAgXG4gICAgbGV0IHNob3VsZFVwZGF0ZSA9IGZhbHNlXG4gICAgaWYgKGZpbHRlcmVkU2VsZWN0ZWRJZHMubGVuZ3RoICE9PSBzZWxlY3RlZFJlY29yZHM/Lmxlbmd0aCkge1xuICAgICAgc2hvdWxkVXBkYXRlID0gdHJ1ZVxuICAgIH0gZWxzZSB7IC8vIGVxdWFsIGxlbmd0aFxuICAgICAgc2hvdWxkVXBkYXRlID0gZmlsdGVyZWRTZWxlY3RlZElkcy5zb21lKGlkID0+IHtcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gc2VsZWN0ZWRSZWNvcmRzLmZpbmQoKGl0ZW0pID0+IGl0ZW0uZ2V0SWQoKSA9PT0gaWQpXG4gICAgICAgIHJldHVybiB0YXJnZXQgPT0gbnVsbFxuICAgICAgfSlcbiAgICB9XG4gICAgaWYgKHNob3VsZFVwZGF0ZSkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAnaGFuZGxlRGF0YVNvdXJjZUluZm9DaGFuZ2UtdXBkYXRpbmctc2VsZWN0ZWRSZWNvcmRzJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHdpZGdldElkLFxuICAgICAgICBvbGRDb3VudDogc2VsZWN0ZWRSZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgbmV3Q291bnQ6IGZpbHRlcmVkRHNSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgbm90ZTogJ2ZpbHRlcmVkLW91dC1yZW1vdmVkLXJlY29yZHMnXG4gICAgICB9KVxuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAnaGFuZGxlRGF0YVNvdXJjZUluZm9DaGFuZ2UtdXBkYXRpbmctc2VsZWN0ZWRSZWNvcmRzJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHdpZGdldElkLFxuICAgICAgICBvbGRDb3VudDogc2VsZWN0ZWRSZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgbmV3Q291bnQ6IGZpbHRlcmVkRHNSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgb2xkU2VsZWN0ZWRJZHM6IChzZWxlY3RlZFJlY29yZHMgfHwgW10pLm1hcChyID0+IHIuZ2V0SWQoKSkuc2xpY2UoMCwgNSksXG4gICAgICAgIG5ld1NlbGVjdGVkSWRzOiBmaWx0ZXJlZFNlbGVjdGVkSWRzLnNsaWNlKDAsIDUpLFxuICAgICAgICBub3RlOiAnZmlsdGVyZWQtb3V0LXJlbW92ZWQtcmVjb3JkcycsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIHNldFNlbGVjdGVkUmVjb3JkcyhmaWx0ZXJlZERzUmVjb3JkcylcbiAgICB9IGVsc2Uge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAnaGFuZGxlRGF0YVNvdXJjZUluZm9DaGFuZ2Utc2tpcHBpbmctdXBkYXRlJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHdpZGdldElkLFxuICAgICAgICByZWFzb246ICduby1jaGFuZ2UtZGV0ZWN0ZWQnLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgfVxuICB9LCBbb3V0cHV0RFM/LmlkLCBzZWxlY3RlZFJlY29yZHMsIHdpZGdldElkLCByZWNvcmRzLCByZW1vdmVkUmVjb3JkSWRzXSlcblxuICAvKipcbiAgICogR2VuZXJhdGVzIHRoZSB0aXAgbWVzc2FnZSBzaG93aW5nIGhvdyBtYW55IGZlYXR1cmVzIGFyZSBkaXNwbGF5ZWQuXG4gICAqIEZpbHRlcnMgb3V0IHJlbW92ZWQgcmVjb3JkcyB0byBzaG93IGFjY3VyYXRlIGNvdW50cy5cbiAgICogXG4gICAqIEByZXR1cm5zIEZvcm1hdHRlZCBzdHJpbmcgbGlrZSBcIkZlYXR1cmVzIGRpc3BsYXllZDogMTE4IC8gMTIxXCJcbiAgICovXG4gIGNvbnN0IGdldFRpcE1lc3NhZ2UgPSAoKSA9PiB7XG4gICAgaWYgKHF1ZXJ5RGF0YSAmJiBxdWVyeURhdGEucmVjb3Jkcykge1xuICAgICAgLy8gRmlsdGVyIG91dCByZW1vdmVkIHJlY29yZHMgZm9yIGRpc3BsYXkgY291bnRcbiAgICAgIGNvbnN0IGRpc3BsYXllZFJlY29yZHMgPSBxdWVyeURhdGEucmVjb3Jkcy5maWx0ZXIoKHJlY29yZDogRGF0YVJlY29yZCkgPT4gIXJlbW92ZWRSZWNvcmRJZHMuaGFzKHJlY29yZC5nZXRJZCgpKSlcbiAgICAgIGNvbnN0IGRpc3BsYXllZENvdW50ID0gZGlzcGxheWVkUmVjb3Jkcy5sZW5ndGhcbiAgICAgIFxuICAgICAgLy8gRk9SQ0VEOiBBbHdheXMgU2ltcGxlTGlzdCwgc28gYWx3YXlzIHVzZSBzaW1wbGUgZGlzcGxheSBmb3JtYXRcbiAgICAgIHJldHVybiBgJHtnZXRJMThuTWVzc2FnZSgnZmVhdHVyZXNEaXNwbGF5ZWQnKX06ICR7ZGlzcGxheWVkQ291bnR9IC8gJHtyZXN1bHRDb3VudH1gXG4gICAgICBjb25zdCB7IHBhZ2UgPSAxLCBwYWdlU2l6ZSA9IGRlZmF1bHRQYWdlU2l6ZSB9ID0gcXVlcnlEYXRhXG4gICAgICBjb25zdCBmcm9tID0gKHBhZ2UgLSAxKSAqIHBhZ2VTaXplICsgMVxuICAgICAgY29uc3QgdG8gPSBmcm9tICsgcGFnZVNpemUgLSAxXG4gICAgICBpZiAocmVzdWx0Q291bnQgPiAwKSB7XG4gICAgICAgIHJldHVybiBgJHtnZXRJMThuTWVzc2FnZSgnZmVhdHVyZXNEaXNwbGF5ZWQnKX06ICR7ZnJvbX0gLSAke01hdGgubWluKHRvLCBkaXNwbGF5ZWRDb3VudCl9IC8gJHtyZXN1bHRDb3VudH1gXG4gICAgICB9XG4gICAgICByZXR1cm4gYCR7Z2V0STE4bk1lc3NhZ2UoJ2ZlYXR1cmVzRGlzcGxheWVkJyl9OiAwIC0gMCAvIDBgXG4gICAgfVxuICAgIHJldHVybiAnJ1xuICB9XG5cbiAgLyoqXG4gICAqIFRvZ2dsZXMgZXhwYW5kL2NvbGxhcHNlIHN0YXRlIGZvciBhbGwgcmVzdWx0IGl0ZW1zLlxuICAgKiBXaGVuIHRvZ2dsZWQsIGFsbCByZXN1bHQgaXRlbXMgd2lsbCBiZSBleHBhbmRlZCBvciBjb2xsYXBzZWQgdG9nZXRoZXIuXG4gICAqIFVwZGF0ZXMgaW5kaXZpZHVhbCBpdGVtIGV4cGFuc2lvbiBzdGF0ZXMgaW4gdGhlIG1hcCB0byBtYWludGFpbiBzdGF0ZSB3aGVuIGl0ZW1zIGFyZSByZW1vdmVkLlxuICAgKi9cbiAgY29uc3QgdG9nZ2xlRXhwYW5kQWxsID0gUmVhY3QudXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHNldEV4cGFuZEFsbChwcmV2ID0+IHtcbiAgICAgIGNvbnN0IG5ld1ZhbHVlID0gIXByZXZcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRVhQQU5ELUNPTExBUFNFJywge1xuICAgICAgICBldmVudDogJ3RvZ2dsZUV4cGFuZEFsbC1jbGlja2VkJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIHByZXZpb3VzVmFsdWU6IHByZXYsXG4gICAgICAgIG5ld1ZhbHVlLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIC8vIFVwZGF0ZSBhbGwgY3VycmVudCBpdGVtcyBpbiB0aGUgbWFwIHdpdGggdGhlIG5ldyBleHBhbnNpb24gc3RhdGVcbiAgICAgIHNldEl0ZW1FeHBhbmRTdGF0ZXMocHJldk1hcCA9PiB7XG4gICAgICAgIGNvbnN0IG5ld01hcCA9IG5ldyBNYXAocHJldk1hcClcbiAgICAgICAgLy8gR2V0IGFsbCBjdXJyZW50IHJlY29yZCBJRHMgZnJvbSBmaWx0ZXJlZCByZWNvcmRzXG4gICAgICAgIGNvbnN0IGFsbFJlY29yZElkcyA9IGZpbHRlcmVkUmVjb3Jkc0Zvckxpc3QubWFwKHIgPT4gci5nZXRJZCgpKVxuICAgICAgICBhbGxSZWNvcmRJZHMuZm9yRWFjaChpZCA9PiB7XG4gICAgICAgICAgbmV3TWFwLnNldChpZCwgbmV3VmFsdWUpXG4gICAgICAgIH0pXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRVhQQU5ELUNPTExBUFNFJywge1xuICAgICAgICAgIGV2ZW50OiAnaXRlbUV4cGFuZFN0YXRlcy11cGRhdGVkJyxcbiAgICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgICBuZXdWYWx1ZSxcbiAgICAgICAgICB1cGRhdGVkQ291bnQ6IGFsbFJlY29yZElkcy5sZW5ndGgsXG4gICAgICAgICAgcmVjb3JkSWRzOiBhbGxSZWNvcmRJZHMuc2xpY2UoMCwgMTApLCAvLyBMb2cgZmlyc3QgMTAgSURzXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiBuZXdNYXBcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIHJldHVybiBuZXdWYWx1ZVxuICAgIH0pXG4gIH0sIFt3aWRnZXRJZCwgZmlsdGVyZWRSZWNvcmRzRm9yTGlzdF0pXG5cbiAgY29uc3QgcmVzdWx0VXNlT3V0cHV0RGF0YVNvdXJjZSA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgIHJldHVybiBJbW11dGFibGUoe1xuICAgICAgZGF0YVNvdXJjZUlkOiBxdWVyeUl0ZW0ub3V0cHV0RGF0YVNvdXJjZUlkLFxuICAgICAgbWFpbkRhdGFTb3VyY2VJZDogcXVlcnlJdGVtLm91dHB1dERhdGFTb3VyY2VJZFxuICAgIH0pXG4gIH0sIFtxdWVyeUl0ZW0/Lm91dHB1dERhdGFTb3VyY2VJZF0pXG5cbiAgY29uc3QgaGFuZGxlRXNjYXBlID0gUmVhY3QudXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGZvY3VzRWxlbWVudEluS2V5Ym9hcmRNb2RlKGJhY2tCdG5SZWYuY3VycmVudClcbiAgfSwgW10pXG5cbiAgLy8gS2VlcCByZWNvcmRzIHNlbGVjdGVkIGFuZCB6b29tIHRvIGNsaWNrZWQgcmVjb3JkXG4gIC8vIFJlY29yZHMgcmVtYWluIHNlbGVjdGVkIGFzIGxvbmcgYXMgdGhleSdyZSBpbiB0aGUgcmVzdWx0c1xuICAvLyBDbGlja2luZyBhIHJlY29yZCBhbHdheXMgem9vbXMgdG8gaXQgb24gdGhlIG1hcCAodGhpcyBiZWhhdmlvciBpcyBhbHdheXMgZW5hYmxlZClcbiAgY29uc3QgdG9nZ2xlU2VsZWN0aW9uID0gUmVhY3QudXNlQ2FsbGJhY2soKGRhdGE6IEZlYXR1cmVEYXRhUmVjb3JkKSA9PiB7XG4gICAgLy8gRW5zdXJlIHRoZSBjbGlja2VkIHJlY29yZCBpcyBzZWxlY3RlZCAoaXQgc2hvdWxkIGFscmVhZHkgYmUsIGJ1dCBlbnN1cmUgaXQpXG4gICAgY29uc3Qgc2VsZWN0ZWREYXRhcyA9IG91dHB1dERTLmdldFNlbGVjdGVkUmVjb3JkcygpID8/IFtdXG4gICAgY29uc3Qgc2VsZWN0ZWRJZHMgPSBvdXRwdXREUy5nZXRTZWxlY3RlZFJlY29yZElkcygpID8/IFtdXG4gICAgY29uc3QgZGF0YUlkID0gZGF0YS5nZXRJZCgpXG4gICAgXG4gICAgLy8gSWYgdGhpcyByZWNvcmQgaXNuJ3QgYWxyZWFkeSBzZWxlY3RlZCwgYWRkIGl0IHRvIHRoZSBzZWxlY3Rpb25cbiAgICBpZiAoIXNlbGVjdGVkSWRzLmluY2x1ZGVzKGRhdGFJZCkpIHtcbiAgICAgIGNvbnN0IHVwZGF0ZWRTZWxlY3RlZERhdGFzID0gWy4uLnNlbGVjdGVkRGF0YXMsIGRhdGFdXG4gICAgICBjb25zdCByZWNvcmRJZHMgPSB1cGRhdGVkU2VsZWN0ZWREYXRhcy5tYXAocmVjb3JkID0+IHJlY29yZC5nZXRJZCgpKVxuICAgICAgXG4gICAgICAvLyBTZWxlY3QgcmVjb3JkcyBhbmQgcHVibGlzaCBzZWxlY3Rpb24gbWVzc2FnZSB1c2luZyB1dGlsaXR5IGZ1bmN0aW9uXG4gICAgICBzZWxlY3RSZWNvcmRzQW5kUHVibGlzaCh3aWRnZXRJZCwgb3V0cHV0RFMsIHJlY29yZElkcywgdXBkYXRlZFNlbGVjdGVkRGF0YXMgYXMgRmVhdHVyZURhdGFSZWNvcmRbXSwgdHJ1ZSlcbiAgICB9XG4gICAgXG4gICAgLy8gWm9vbSB0byB0aGUgY2xpY2tlZCByZWNvcmQgdXNpbmcgZGF0YSBhY3Rpb25zIChhbHdheXMgZW5hYmxlZCAtIHVzZXIgd2FudHMgdG8ga2VlcCB0aGlzIGJlaGF2aW9yKVxuICAgIGNvbnN0IGRhdGFTZXQ6IERhdGFSZWNvcmRTZXQgPSB7XG4gICAgICBkYXRhU291cmNlOiBvdXRwdXREUyxcbiAgICAgIHJlY29yZHM6IFtkYXRhXSxcbiAgICAgIHR5cGU6ICdzZWxlY3RlZCcsXG4gICAgICBuYW1lOiBvdXRwdXREUy5nZXRMYWJlbCgpXG4gICAgfVxuICAgIFxuICAgIC8vIEdldCBhdmFpbGFibGUgZGF0YSBhY3Rpb25zIGFuZCBmaW5kIHRoZSB6b29tVG9GZWF0dXJlIGFjdGlvblxuICAgIERhdGFBY3Rpb25NYW5hZ2VyLmdldEluc3RhbmNlKCkuZ2V0U3VwcG9ydGVkQWN0aW9ucyh3aWRnZXRJZCwgW2RhdGFTZXRdLCBEYXRhTGV2ZWwuUmVjb3JkcylcbiAgICAgIC50aGVuKGFjdGlvbkNhdGVnb3JpZXMgPT4ge1xuICAgICAgICAvLyBMb29rIGZvciB6b29tVG9GZWF0dXJlIGFjdGlvbiBpbiBhbnkgY2F0ZWdvcnlcbiAgICAgICAgbGV0IHpvb21BY3Rpb246IGFueSA9IG51bGxcbiAgICAgICAgZm9yIChjb25zdCBjYXRlZ29yeSBpbiBhY3Rpb25DYXRlZ29yaWVzKSB7XG4gICAgICAgICAgY29uc3QgYWN0aW9ucyA9IGFjdGlvbkNhdGVnb3JpZXNbY2F0ZWdvcnldXG4gICAgICAgICAgem9vbUFjdGlvbiA9IGFjdGlvbnMuZmluZCgoYWN0aW9uOiBhbnkpID0+IGFjdGlvbi5uYW1lID09PSAnem9vbVRvRmVhdHVyZScgfHwgYWN0aW9uLmlkID09PSAnem9vbVRvRmVhdHVyZScpXG4gICAgICAgICAgaWYgKHpvb21BY3Rpb24pIGJyZWFrXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoem9vbUFjdGlvbikge1xuICAgICAgICAgIC8vIEV4ZWN1dGUgdGhlIHpvb20gYWN0aW9uXG4gICAgICAgICAgcmV0dXJuIERhdGFBY3Rpb25NYW5hZ2VyLmdldEluc3RhbmNlKCkuZXhlY3V0ZURhdGFBY3Rpb24oem9vbUFjdGlvbiwgW2RhdGFTZXRdLCBEYXRhTGV2ZWwuUmVjb3Jkcywgd2lkZ2V0SWQpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICAvLyBTaWxlbnRseSBoYW5kbGUgZXJyb3JzXG4gICAgICB9KVxuICB9LCBbb3V0cHV0RFMsIHdpZGdldElkXSlcblxuICAvKipcbiAgICogUmVtb3ZlcyBhIHJlY29yZCBmcm9tIHRoZSByZXN1bHRzIGFuZCBzZWxlY3Rpb24uXG4gICAqIElmIHJlbW92aW5nIHRoZSBsYXN0IHJlY29yZCwgYXV0b21hdGljYWxseSBjbGVhcnMgYWxsIHJlc3VsdHNcbiAgICogYnkgY2FsbGluZyB0aGUgdHJhc2ggY2FuIGxvZ2ljIChzYW1lIGFzIGNsaWNraW5nIENsZWFyIGJ1dHRvbikuXG4gICAqIFRoaXMgZW5zdXJlcyB0aGUgVUkgZG9lc24ndCBzaG93IFwiRmVhdHVyZXMgZGlzcGxheWVkOiAwIC8gMVwiIHdoZW4gYWxsIHJlc3VsdHMgYXJlIHJlbW92ZWQuXG4gICAqIFxuICAgKiBAcGFyYW0gZGF0YSAtIFRoZSBmZWF0dXJlIGRhdGEgcmVjb3JkIHRvIHJlbW92ZVxuICAgKi9cbiAgY29uc3QgcmVtb3ZlUmVjb3JkID0gUmVhY3QudXNlQ2FsbGJhY2soKGRhdGE6IEZlYXR1cmVEYXRhUmVjb3JkKSA9PiB7XG4gICAgY29uc3QgZGF0YUlkID0gZGF0YS5nZXRJZCgpXG4gICAgY29uc3QgY3VycmVudEV4cGFuZEFsbCA9IGV4cGFuZEFsbFxuICAgIFxuICAgIC8vIExvZyBoYXNoIHN0YXRlIHdoZW4gcmVtb3ZpbmcgaW5kaXZpZHVhbCByZWNvcmRcbiAgICBjb25zdCBoYXNoID0gd2luZG93LmxvY2F0aW9uLmhhc2guc3Vic3RyaW5nKDEpXG4gICAgY29uc3QgdXJsUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhoYXNoKVxuICAgIGNvbnN0IGhhc2hQYXJhbXM6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH0gPSB7fVxuICAgIHVybFBhcmFtcy5mb3JFYWNoKCh2YWx1ZSwga2V5KSA9PiB7XG4gICAgICBoYXNoUGFyYW1zW2tleV0gPSB2YWx1ZVxuICAgIH0pXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdFWFBBTkQtQ09MTEFQU0UnLCB7XG4gICAgICBldmVudDogJ3JlbW92ZVJlY29yZC1zdGFydGVkJyxcbiAgICAgIHdpZGdldElkLFxuICAgICAgcmVtb3ZlZFJlY29yZElkOiBkYXRhSWQsXG4gICAgICBjdXJyZW50RXhwYW5kQWxsLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gnLCB7XG4gICAgICBldmVudDogJ3JlbW92ZVJlY29yZC1jYWxsZWQnLFxuICAgICAgd2lkZ2V0SWQsXG4gICAgICByZW1vdmVkUmVjb3JkSWQ6IGRhdGFJZCxcbiAgICAgIGhhc2g6IGhhc2gsXG4gICAgICBoYXNoUGFyYW1zOiBoYXNoUGFyYW1zLFxuICAgICAgaGFzaFBhcmFtc0NvdW50OiBPYmplY3Qua2V5cyhoYXNoUGFyYW1zKS5sZW5ndGgsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIC8vIFJlbW92ZSBmcm9tIGV4cGFuc2lvbiBzdGF0ZXMgbWFwXG4gICAgc2V0SXRlbUV4cGFuZFN0YXRlcyhwcmV2TWFwID0+IHtcbiAgICAgIGNvbnN0IG5ld01hcCA9IG5ldyBNYXAocHJldk1hcClcbiAgICAgIG5ld01hcC5kZWxldGUoZGF0YUlkKVxuICAgICAgZGVidWdMb2dnZXIubG9nKCdFWFBBTkQtQ09MTEFQU0UnLCB7XG4gICAgICAgIGV2ZW50OiAnaXRlbUV4cGFuZFN0YXRlcy1jbGVhbmVkLXVwJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIHJlbW92ZWRSZWNvcmRJZDogZGF0YUlkLFxuICAgICAgICByZW1haW5pbmdDb3VudDogbmV3TWFwLnNpemUsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIHJldHVybiBuZXdNYXBcbiAgICB9KVxuICAgIFxuICAgIC8vIEFkZCB0byByZW1vdmVkIHJlY29yZHMgc2V0XG4gICAgc2V0UmVtb3ZlZFJlY29yZElkcyhwcmV2ID0+IHtcbiAgICAgIGNvbnN0IG5ld1NldCA9IG5ldyBTZXQocHJldikuYWRkKGRhdGFJZClcbiAgICAgIFxuICAgICAgLy8gSWYgYWxsIHJlY29yZHMgYXJlIG5vdyByZW1vdmVkLCBjbGVhciBldmVyeXRoaW5nIGJ5IGNhbGxpbmcgdHJhc2ggY2FuIGxvZ2ljXG4gICAgICAvLyBJTVBPUlRBTlQ6IENvbXBhcmUgYWdhaW5zdCBhY3R1YWwgZGlzcGxheWVkIHJlY29yZHMgY291bnQsIG5vdCByZXN1bHRDb3VudFxuICAgICAgLy8gcmVzdWx0Q291bnQgb25seSByZWZsZWN0cyB0aGUgbGF0ZXN0IHF1ZXJ5LCBidXQgaW4gXCJBZGQgdG9cIiBtb2RlIHdlIGRpc3BsYXkgYWNjdW11bGF0ZWQgcmVjb3Jkc1xuICAgICAgLy8gVXNlIHF1ZXJ5RGF0YS5yZWNvcmRzLmxlbmd0aCAoYmVmb3JlIGZpbHRlcmluZykgYXMgdGhlIHNvdXJjZSBvZiB0cnV0aCBmb3IgZGlzcGxheWVkIHJlY29yZHNcbiAgICAgIC8vIEZhbGwgYmFjayB0byBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoIGlmIGluIGFjY3VtdWxhdGlvbiBtb2RlLCBvciByZXN1bHRDb3VudCBhcyBsYXN0IHJlc29ydFxuICAgICAgbGV0IGN1cnJlbnREaXNwbGF5ZWRDb3VudCA9IHF1ZXJ5RGF0YT8ucmVjb3Jkcz8ubGVuZ3RoIHx8IDBcbiAgICAgIGlmIChjdXJyZW50RGlzcGxheWVkQ291bnQgPT09IDApIHtcbiAgICAgICAgLy8gSWYgcXVlcnlEYXRhIGRvZXNuJ3QgaGF2ZSByZWNvcmRzIHlldCwgY2hlY2sgaWYgd2UncmUgaW4gYWNjdW11bGF0aW9uIG1vZGVcbiAgICAgICAgY29uc3QgaXNBY2N1bXVsYXRpb25Nb2RlID0gcmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb24gfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb25cbiAgICAgICAgaWYgKGlzQWNjdW11bGF0aW9uTW9kZSAmJiBhY2N1bXVsYXRlZFJlY29yZHMgJiYgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBjdXJyZW50RGlzcGxheWVkQ291bnQgPSBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gTGFzdCByZXNvcnQ6IHVzZSByZXN1bHRDb3VudCAoYnV0IHRoaXMgbWlnaHQgYmUgaW5jb3JyZWN0IGluIGFjY3VtdWxhdGlvbiBtb2RlKVxuICAgICAgICAgIGN1cnJlbnREaXNwbGF5ZWRDb3VudCA9IHJlc3VsdENvdW50XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAncmVtb3ZlUmVjb3JkLWNoZWNraW5nLWFsbC1yZW1vdmVkJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIHJlbW92ZWRSZWNvcmRJZHNTaXplOiBuZXdTZXQuc2l6ZSxcbiAgICAgICAgY3VycmVudERpc3BsYXllZENvdW50LFxuICAgICAgICByZXN1bHRDb3VudCxcbiAgICAgICAgcXVlcnlEYXRhUmVjb3Jkc0NvdW50OiBxdWVyeURhdGE/LnJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogYWNjdW11bGF0ZWRSZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgcmVzdWx0c01vZGUsXG4gICAgICAgIHdpbGxOYXZpZ2F0ZUJhY2s6IG5ld1NldC5zaXplID09PSBjdXJyZW50RGlzcGxheWVkQ291bnQgJiYgY3VycmVudERpc3BsYXllZENvdW50ID4gMCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgXG4gICAgICBpZiAobmV3U2V0LnNpemUgPT09IGN1cnJlbnREaXNwbGF5ZWRDb3VudCAmJiBjdXJyZW50RGlzcGxheWVkQ291bnQgPiAwKSB7XG4gICAgICAgIC8vIEFsbCBkaXNwbGF5ZWQgcmVjb3JkcyByZW1vdmVkIC0gY2xlYXIgZXZlcnl0aGluZyAoc2FtZSBhcyBjbGlja2luZyB0cmFzaCBjYW4gYnV0dG9uKVxuICAgICAgICBvbk5hdkJhY2sodHJ1ZSlcbiAgICAgICAgcmV0dXJuIG5ld1NldFxuICAgICAgfVxuICAgICAgXG4gICAgICByZXR1cm4gbmV3U2V0XG4gICAgfSlcbiAgICBcbiAgICAvLyBVcGRhdGUgcXVlcnlEYXRhIHRvIGZpbHRlciBvdXQgdGhlIHJlbW92ZWQgcmVjb3JkXG4gICAgc2V0UXVlcnlEYXRhKHByZXZEYXRhID0+IHtcbiAgICAgIGlmICghcHJldkRhdGEpIHJldHVybiBwcmV2RGF0YVxuICAgICAgY29uc3QgZmlsdGVyZWRSZWNvcmRzID0gcHJldkRhdGEucmVjb3Jkcy5maWx0ZXIoKHJlY29yZDogRGF0YVJlY29yZCkgPT4gcmVjb3JkLmdldElkKCkgIT09IGRhdGFJZClcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLnByZXZEYXRhLFxuICAgICAgICByZWNvcmRzOiBmaWx0ZXJlZFJlY29yZHNcbiAgICAgIH1cbiAgICB9KVxuICAgIFxuICAgIC8vIEFMV0FZUyByZW1vdmUgZnJvbSBvcmlnaW4gZGF0YSBzb3VyY2Ugc2VsZWN0aW9ucyAoc2FtZSBhcyBSZW1vdmUgbW9kZSlcbiAgICAvLyBUaGlzIHByb3Blcmx5IHJlbW92ZXMgcmVjb3JkcyBmcm9tIHRoZSBtYXAgc2VsZWN0aW9uLCBoYW5kbGluZyBzaW5nbGUgb3IgbXVsdGlwbGUgb3JpZ2luIHNvdXJjZXNcbiAgICAvLyBBbHNvIHJlbW92ZXMgZ3JhcGhpY3MgZnJvbSBncmFwaGljcyBsYXllciBpZiB1c2luZyBncmFwaGljcyBsYXllciBoaWdobGlnaHRpbmdcbiAgICByZW1vdmVSZWNvcmRzRnJvbU9yaWdpblNlbGVjdGlvbnMoXG4gICAgICB3aWRnZXRJZCwgXG4gICAgICBbZGF0YV0sIFxuICAgICAgb3V0cHV0RFMgYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSxcbiAgICAgIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQsXG4gICAgICBncmFwaGljc0xheWVyXG4gICAgKVxuICAgIFxuICAgIC8vIFVwZGF0ZSBvdXRwdXREUyBzZWxlY3Rpb25cbiAgICBjb25zdCBzZWxlY3RlZERhdGFzID0gb3V0cHV0RFMuZ2V0U2VsZWN0ZWRSZWNvcmRzKCkgPz8gW11cbiAgICBjb25zdCB1cGRhdGVkU2VsZWN0ZWREYXRhcyA9IHNlbGVjdGVkRGF0YXMuZmlsdGVyKHJlY29yZCA9PiByZWNvcmQuZ2V0SWQoKSAhPT0gZGF0YUlkKVxuICAgIGNvbnN0IHJlY29yZElkcyA9IHVwZGF0ZWRTZWxlY3RlZERhdGFzLm1hcChyZWNvcmQgPT4gcmVjb3JkLmdldElkKCkpXG4gICAgXG4gICAgLy8gVXBkYXRlIG91dHB1dERTIHNlbGVjdGlvblxuICAgIGlmICh0eXBlb2Ygb3V0cHV0RFMuc2VsZWN0UmVjb3Jkc0J5SWRzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBvdXRwdXREUy5zZWxlY3RSZWNvcmRzQnlJZHMocmVjb3JkSWRzLCB1cGRhdGVkU2VsZWN0ZWREYXRhcyBhcyBGZWF0dXJlRGF0YVJlY29yZFtdKVxuICAgIH1cbiAgICBcbiAgICAvLyBJTVBPUlRBTlQ6IFB1Ymxpc2ggY3VzdG9tIGV2ZW50IHNvIHdpZGdldCBjYW4gdXBkYXRlIGxhc3RTZWxlY3Rpb24gc3RhdGVcbiAgICAvLyBUaGlzIGVuc3VyZXMgcmVzdG9yYXRpb24gcmVzdG9yZXMgdGhlIGNvcnJlY3QgKHVwZGF0ZWQpIGNvdW50XG4gICAgY29uc3Qgb3JpZ2luRFMgPSAob3V0cHV0RFMgYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSkuZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKT8uWzBdIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgICBjb25zdCBkYXRhU291cmNlSWQgPSBvcmlnaW5EUz8uaWRcbiAgICBjb25zdCBzZWxlY3Rpb25FdmVudCA9IG5ldyBDdXN0b21FdmVudCgncXVlcnlzaW1wbGUtc2VsZWN0aW9uLWNoYW5nZWQnLCB7XG4gICAgICBkZXRhaWw6IHtcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIHJlY29yZElkcywgLy8gVXBkYXRlZCByZWNvcmQgSURzICh3aXRoIHJlbW92ZWQgcmVjb3JkIGV4Y2x1ZGVkKVxuICAgICAgICBkYXRhU291cmNlSWQsXG4gICAgICAgIG91dHB1dERzSWQ6IG91dHB1dERTLmlkLFxuICAgICAgICBxdWVyeUl0ZW1Db25maWdJZDogcXVlcnlJdGVtLmNvbmZpZ0lkXG4gICAgICB9LFxuICAgICAgYnViYmxlczogdHJ1ZSxcbiAgICAgIGNhbmNlbGFibGU6IHRydWVcbiAgICB9KVxuICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KHNlbGVjdGlvbkV2ZW50KVxuICAgIFxuICAgIC8vIElmIGluIGFjY3VtdWxhdGlvbiBtb2RlLCBhbHNvIHJlbW92ZSBmcm9tIGFjY3VtdWxhdGVkIHJlY29yZHNcbiAgICBjb25zdCBpc0FjY3VtdWxhdGlvbk1vZGUgPSByZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbiB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uXG4gICAgaWYgKGlzQWNjdW11bGF0aW9uTW9kZSAmJiBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZSAmJiBhY2N1bXVsYXRlZFJlY29yZHMgJiYgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IHJlbWFpbmluZ1JlY29yZHMgPSByZW1vdmVSZXN1bHRzRnJvbUFjY3VtdWxhdGVkKFxuICAgICAgICBvdXRwdXREUyBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLFxuICAgICAgICBbZGF0YV0sXG4gICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc1xuICAgICAgKVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICd4LWJ1dHRvbi1yZW1vdmVkLWZyb20tYWNjdW11bGF0ZWQnLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgcmVtb3ZlZFJlY29yZElkOiBkYXRhSWQsXG4gICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50QmVmb3JlOiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoLFxuICAgICAgICByZW1haW5pbmdSZWNvcmRzQ291bnQ6IHJlbWFpbmluZ1JlY29yZHMubGVuZ3RoLFxuICAgICAgICB3YXNSZW1vdmVkOiByZW1haW5pbmdSZWNvcmRzLmxlbmd0aCA8IGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGhcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlKHJlbWFpbmluZ1JlY29yZHMpXG4gICAgfVxuICAgIFxuICAgIC8vIExvZyBhZnRlciByZW1vdmVSZWNvcmQgY29tcGxldGVzIHRvIGNoZWNrIGlmIGV4cGFuZEFsbCBjaGFuZ2VkXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdyZW1vdmVSZWNvcmQtY29tcGxldGVkJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIHJlbW92ZWRSZWNvcmRJZDogZGF0YUlkLFxuICAgICAgICBleHBhbmRBbGxCZWZvcmU6IGN1cnJlbnRFeHBhbmRBbGwsXG4gICAgICAgIGV4cGFuZEFsbEFmdGVyOiBleHBhbmRBbGwsXG4gICAgICAgIGV4cGFuZEFsbENoYW5nZWQ6IGN1cnJlbnRFeHBhbmRBbGwgIT09IGV4cGFuZEFsbCxcbiAgICAgICAgZXhwYW5kQnlEZWZhdWx0UHJvcDogZXhwYW5kQWxsLCAvLyBXaGF0IHdpbGwgYmUgcGFzc2VkIHRvIFNpbXBsZUxpc3RcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgIH0sIDApXG4gIH0sIFtvdXRwdXREUywgd2lkZ2V0SWQsIHJlc3VsdENvdW50LCBvbk5hdkJhY2ssIHJlc3VsdHNNb2RlLCBhY2N1bXVsYXRlZFJlY29yZHMsIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlLCBxdWVyeUl0ZW0uY29uZmlnSWQsIGV4cGFuZEFsbF0pXG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT0ncXVlcnktcmVzdWx0IGgtMTAwJyBjc3M9e3Jlc3VsdFN0eWxlfSByb2xlPSdsaXN0Ym94JyBhcmlhLWxhYmVsPXtnZXRJMThuTWVzc2FnZSgncmVzdWx0cycpfT5cbiAgICAgIDxEYXRhU291cmNlQ29tcG9uZW50IHVzZURhdGFTb3VyY2U9e3Jlc3VsdFVzZU91dHB1dERhdGFTb3VyY2V9IG9uRGF0YVNvdXJjZUluZm9DaGFuZ2U9e2hhbmRsZURhdGFTb3VyY2VJbmZvQ2hhbmdlfSAvPlxuICAgICAgXG4gICAgICB7LyogRXJyb3IgTWVzc2FnZSAqL31cbiAgICAgIHtzZWxlY3Rpb25FcnJvciAmJiAoXG4gICAgICAgIDxkaXYgY3NzPXtjc3NgcGFkZGluZzogMCAxNnB4OyBtYXJnaW4tdG9wOiA4cHg7YH0+XG4gICAgICAgICAgPEVycm9yTWVzc2FnZSBcbiAgICAgICAgICAgIGVycm9yPXtzZWxlY3Rpb25FcnJvcn0gXG4gICAgICAgICAgICBvbkRpc21pc3M9eygpID0+IHNldFNlbGVjdGlvbkVycm9yKG51bGwpfVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cbiAgICAgIFxuICAgICAgPGRpdiBjbGFzc05hbWU9J3F1ZXJ5LXJlc3VsdF9faGVhZGVyIGQtZmxleCBhbGlnbi1pdGVtcy1jZW50ZXIgbXgtNCc+XG4gICAgICAgIDxCdXR0b24gYXJpYS1sYWJlbD17Z2V0STE4bk1lc3NhZ2UoJ2JhY2snKX0gcmVmPXtiYWNrQnRuUmVmfSBjbGFzc05hbWU9J3AtMCBtci0yJyBzaXplPSdzbScgdmFyaWFudD0ndGV4dCcgY29sb3I9J2luaGVyaXQnIGljb24gb25DbGljaz17KCkgPT4geyBvbk5hdkJhY2soKSB9fT5cbiAgICAgICAgICA8QXJyb3dMZWZ0T3V0bGluZWQgYXV0b0ZsaXAvPlxuICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAge2N1cnJlbnRJdGVtLnJlc3VsdHNMYWJlbCA/PyBnZXRJMThuTWVzc2FnZSgncmVzdWx0cycpfVxuICAgICAgICB7KFxuICAgICAgICAgIDxSZWFjdC5GcmFnbWVudD5cbiAgICAgICAgICAgIDxUb29sdGlwIHRpdGxlPXtnZXRJMThuTWVzc2FnZSgnY2xlYXJSZXN1bHQnKX0gcGxhY2VtZW50PSdib3R0b20nPlxuICAgICAgICAgICAgICA8QnV0dG9uIGNsYXNzTmFtZT0nbWwtYXV0bycgaWNvbiBzaXplPSdzbScgdmFyaWFudD0ndGV4dCcgY29sb3I9J2luaGVyaXQnIG9uQ2xpY2s9e2NsZWFyUmVzdWx0c30gYXJpYS1sYWJlbD17Z2V0STE4bk1lc3NhZ2UoJ2NsZWFyUmVzdWx0Jyl9PlxuICAgICAgICAgICAgICAgIDxJY29uIGljb249e2ljb25NYXAudG9vbERlbGV0ZX0gLz5cbiAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICA8L1Rvb2x0aXA+XG4gICAgICAgICAgICB7LyogRGF0YSBhY3Rpb25zIGZpbHRlcmVkIHZpYSBtYW5pZmVzdC5qc29uIGV4Y2x1ZGVEYXRhQWN0aW9ucyAtIFNob3cgb24gTWFwLCBTZWxlY3QgTG9hZGVkLCBhbmQgQ2xlYXIgU2VsZWN0aW9uIGFyZSBleGNsdWRlZC5cbiAgICAgICAgICAgICAgICBDdXN0b20gXCJBZGQgdG8gTWFwXCIgYWN0aW9uIGlzIHByb3ZpZGVkIHZpYSBleHRyYUFjdGlvbnMgYW5kIHVzZXMgUXVlcnlTaW1wbGUncyBzZWxlY3Rpb24gcHJvY2Vzcy4gKi99XG4gICAgICAgICAgICB7ZW5hYmxlRGF0YUFjdGlvbiAmJiBvdXRwdXREUyAmJiAoXG4gICAgICAgICAgICAgIDxSZWFjdC5GcmFnbWVudD5cbiAgICAgICAgICAgICAgICA8ZGl2IGNzcz17Y3NzYHdpZHRoOiAxcHg7IGhlaWdodDogMTZweDsgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tc3lzLWNvbG9yLWRpdmlkZXItaW5wdXQpO2B9PjwvZGl2PlxuICAgICAgICAgICAgICAgIDxEYXRhQWN0aW9uTGlzdFxuICAgICAgICAgICAgICAgICAgd2lkZ2V0SWQ9e3dpZGdldElkfVxuICAgICAgICAgICAgICAgICAgZGF0YVNldHM9e2FjdGlvbkRhdGFTZXRzfVxuICAgICAgICAgICAgICAgICAgbGlzdFN0eWxlPXtEYXRhQWN0aW9uTGlzdFN0eWxlLkRyb3Bkb3dufVxuICAgICAgICAgICAgICAgICAgYnV0dG9uU2l6ZT0nc20nXG4gICAgICAgICAgICAgICAgICBidXR0b25UeXBlPSd0ZXJ0aWFyeSdcbiAgICAgICAgICAgICAgICAgIGV4dHJhQWN0aW9ucz17ZXh0cmFBY3Rpb25zfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvUmVhY3QuRnJhZ21lbnQ+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIDwvUmVhY3QuRnJhZ21lbnQ+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdxdWVyeS1yZXN1bHQtY29udGFpbmVyIG10LTEnPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncXVlcnktcmVzdWx0LWluZm8gbWItMiBweC00IGQtZmxleCBhbGlnbi1pdGVtcy1jZW50ZXIganVzdGlmeS1jb250ZW50LWJldHdlZW4nIHJvbGU9J2FsZXJ0JyBhcmlhLWxpdmU9J3BvbGl0ZSc+XG4gICAgICAgICAgPHNwYW4+e2dldFRpcE1lc3NhZ2UoKX08L3NwYW4+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2QtZmxleCBhbGlnbi1pdGVtcy1jZW50ZXInPlxuICAgICAgICAgICAgPFRvb2x0aXAgdGl0bGU9e2V4cGFuZEFsbCA/IGdldEkxOG5NZXNzYWdlKCdjb2xsYXBzZUFsbCcpIDogZ2V0STE4bk1lc3NhZ2UoJ2V4cGFuZEFsbCcpfSBwbGFjZW1lbnQ9J3RvcCc+XG4gICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICBzaXplPSdzbSdcbiAgICAgICAgICAgICAgICB0eXBlPSd0ZXJ0aWFyeSdcbiAgICAgICAgICAgICAgICBpY29uXG4gICAgICAgICAgICAgICAgb25DbGljaz17dG9nZ2xlRXhwYW5kQWxsfVxuICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9e2V4cGFuZEFsbCA/IGdldEkxOG5NZXNzYWdlKCdjb2xsYXBzZUFsbCcpIDogZ2V0STE4bk1lc3NhZ2UoJ2V4cGFuZEFsbCcpfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAge2V4cGFuZEFsbCA/IDxDb2xsYXBzZUFsbE91dGxpbmVkIC8+IDogPEV4cGFuZEFsbE91dGxpbmVkIC8+fVxuICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIHsvKiBGT1JDRUQ6IEFsd2F5cyBTaW1wbGVMaXN0IC0gTGF6eUxvYWQgYW5kIE11bHRpUGFnZSByZW1vdmVkICovfVxuICAgICAgICB7cmVzdWx0Q291bnQgPiAwICYmIChcbiAgICAgICAgICA8U2ltcGxlTGlzdFxuICAgICAgICAgICAga2V5PSdzaW1wbGUnXG4gICAgICAgICAgICB3aWRnZXRJZD17d2lkZ2V0SWR9XG4gICAgICAgICAgICBxdWVyeUl0ZW09e3F1ZXJ5SXRlbX1cbiAgICAgICAgICAgIG91dHB1dERTPXtvdXRwdXREUyBhcyBhbnl9XG4gICAgICAgICAgICByZWNvcmRzPXtmaWx0ZXJlZFJlY29yZHNGb3JMaXN0fVxuICAgICAgICAgICAgZGlyZWN0aW9uPXtkaXJlY3Rpb259XG4gICAgICAgICAgICBvbkVzY2FwZT17aGFuZGxlRXNjYXBlfVxuICAgICAgICAgICAgb25TZWxlY3RDaGFuZ2U9e3RvZ2dsZVNlbGVjdGlvbn1cbiAgICAgICAgICAgIG9uUmVtb3ZlPXtyZW1vdmVSZWNvcmR9XG4gICAgICAgICAgICBleHBhbmRCeURlZmF1bHQ9e2V4cGFuZEFsbH1cbiAgICAgICAgICAgIGl0ZW1FeHBhbmRTdGF0ZXM9e2l0ZW1FeHBhbmRTdGF0ZXN9XG4gICAgICAgICAgICByZW1vdmVkUmVjb3JkSWRzPXtyZW1vdmVkUmVjb3JkSWRzfVxuICAgICAgICAgICAgb25SZW5kZXJEb25lPXtoYW5kbGVSZW5kZXJEb25lfVxuICAgICAgICAgIC8+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKVxufVxuIiwiaW1wb3J0IHsgUmVhY3QgfSBmcm9tICdqaW11LWNvcmUnXG5cbmV4cG9ydCBjb25zdCBRdWVyeVRhc2tDb250ZXh0ID0gUmVhY3QuY3JlYXRlQ29udGV4dDxRdWVyeVRhc2tDb250ZXh0UHJvcHM+KHtcbiAgcmVzZXRTeW1ib2w6IG51bGxcbn0pXG5cbmV4cG9ydCBpbnRlcmZhY2UgUXVlcnlUYXNrQ29udGV4dFByb3BzIHtcbiAgcmVzZXRTeW1ib2w/OiBzeW1ib2wgLy8gdXNlZCB0byB0cmlnZ2VyIHJlc2V0IG9wZXJhdGlvblxufVxuXG5cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHtcbiAgUmVhY3QsXG4gIGpzeCxcbiAgY3NzLFxuICBjbGFzc05hbWVzLFxuICB0eXBlIERhdGFTb3VyY2UsXG4gIHR5cGUgSW1tdXRhYmxlT2JqZWN0LFxuICB0eXBlIElNU3RhdGUsXG4gIHR5cGUgSU1TcWxFeHByZXNzaW9uLFxuICB0eXBlIEZlYXR1cmVMYXllckRhdGFTb3VyY2UsXG4gIFJlYWN0UmVkdXgsXG4gIGhvb2tzLFxuICBEYXRhU291cmNlTWFuYWdlcixcbiAgdHlwZSBTcWxRdWVyeVBhcmFtcyxcbiAgSW1tdXRhYmxlXG59IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IEJ1dHRvbiwgVG9vbHRpcCwgQ2hlY2tib3ggfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHsgbG9hZEFyY0dJU0pTQVBJTW9kdWxlcyB9IGZyb20gJ2ppbXUtYXJjZ2lzJ1xuaW1wb3J0IHsgU3FsRXhwcmVzc2lvblJ1bnRpbWUsIGdldFNob3duQ2xhdXNlTnVtYmVyQnlFeHByZXNzaW9uIH0gZnJvbSAnamltdS11aS9iYXNpYy9zcWwtZXhwcmVzc2lvbi1ydW50aW1lJ1xuaW1wb3J0IHsgdHlwZSBRdWVyeUl0ZW1UeXBlLCB0eXBlIFNwYXRpYWxGaWx0ZXJPYmosIFNwYXRpYWxSZWxhdGlvbiwgdHlwZSBVbml0VHlwZSB9IGZyb20gJy4uL2NvbmZpZydcbmltcG9ydCB7IERFRkFVTFRfUVVFUllfSVRFTSB9IGZyb20gJy4uL2RlZmF1bHQtcXVlcnktaXRlbSdcbmltcG9ydCB7IHNhbml0aXplU3FsRXhwcmVzc2lvbiwgaXNRdWVyeUlucHV0VmFsaWQgfSBmcm9tICcuL3F1ZXJ5LXV0aWxzJ1xuaW1wb3J0IGRlZmF1bHRNZXNzYWdlIGZyb20gJy4vdHJhbnNsYXRpb25zL2RlZmF1bHQnXG5pbXBvcnQgeyBRdWVyeVRhc2tTcGF0aWFsRm9ybSB9IGZyb20gJy4vcXVlcnktdGFzay1zcGF0aWFsLWZvcm0nXG5pbXBvcnQgeyB1c2VBdXRvSGVpZ2h0IH0gZnJvbSAnLi91c2VBdXRvSGVpZ2h0J1xuaW1wb3J0IHsgY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlciB9IGZyb20gJ3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uJ1xuXG5jb25zdCBkZWJ1Z0xvZ2dlciA9IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIoKVxuaW1wb3J0IHsgUXVlcnlUYXNrQ29udGV4dCB9IGZyb20gJy4vcXVlcnktdGFzay1jb250ZXh0J1xuaW1wb3J0IHsgSW5mb091dGxpbmVkIH0gZnJvbSAnamltdS1pY29ucy9vdXRsaW5lZC9zdWdnZXN0ZWQvaW5mbydcbmltcG9ydCB7IGNsZWFyU2VsZWN0aW9uSW5EYXRhU291cmNlcyB9IGZyb20gJy4vc2VsZWN0aW9uLXV0aWxzJ1xuXG5leHBvcnQgaW50ZXJmYWNlIFF1ZXJ5VGFza0l0ZW1Qcm9wcyB7XG4gIHdpZGdldElkOiBzdHJpbmdcbiAgY29uZmlnSWQ6IHN0cmluZ1xuICBzcGF0aWFsRmlsdGVyRW5hYmxlZDogYm9vbGVhblxuICBkYXRhc291cmNlUmVhZHk6IGJvb2xlYW5cbiAgb3V0cHV0RFM/OiBEYXRhU291cmNlXG4gIG9uRm9ybVN1Ym1pdDogKHNxbEV4cHJPYmo6IElNU3FsRXhwcmVzc2lvbiwgc3BhdGlhbEZpbHRlcjogU3BhdGlhbEZpbHRlck9iaiwgem9vbVRvU2VsZWN0ZWQ/OiBib29sZWFuKSA9PiB2b2lkXG4gIGRhdGFBY3Rpb25GaWx0ZXI/OiBTcWxRdWVyeVBhcmFtc1xuICBpbml0aWFsSW5wdXRWYWx1ZT86IHN0cmluZ1xuICBvbkhhc2hQYXJhbWV0ZXJVc2VkPzogKHNob3J0SWQ6IHN0cmluZykgPT4gdm9pZFxuICBxdWVyeUl0ZW1TaG9ydElkPzogc3RyaW5nXG59XG5cbmNvbnN0IGdldEZvcm1TdHlsZSA9IChpc0F1dG9IZWlnaHQ6IGJvb2xlYW4pID0+IHtcbiAgcmV0dXJuIGNzc2BcbiAgICBmbGV4OiAxIDEgYXV0bztcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgbWluLWhlaWdodDogMDtcbiAgICAuZm9ybS10aXRsZSB7XG4gICAgICBjb2xvcjogdmFyKC0tc3lzLWNvbG9yLXN1cmZhY2UtcGFwZXItdGV4dCk7XG4gICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgZm9udC1zaXplOiAwLjgxMjVyZW07XG4gICAgICBsaW5lLWhlaWdodDogMS41O1xuICAgICAgbWFyZ2luLXRvcDogMCAhaW1wb3J0YW50O1xuICAgIH1cbiAgICAucXVlcnktZm9ybV9fY29udGVudCB7XG4gICAgICBmbGV4OiAxIDEgJHtpc0F1dG9IZWlnaHQgPyAnYXV0bycgOiAnYXV0byd9O1xuICAgICAgbWF4LWhlaWdodDogJHtpc0F1dG9IZWlnaHQgPyAnNjEuOHZoJyA6ICdub25lJ307XG4gICAgICBvdmVyZmxvdzogYXV0bztcbiAgICAgIHBhZGRpbmctYm90dG9tOiAwO1xuICAgIH1cbiAgICAucXVlcnktZm9ybV9fYWN0aW9ucyB7XG4gICAgICBmbGV4LXNocmluazogMDtcbiAgICAgIG1hcmdpbi10b3A6IDA7XG4gICAgICBwYWRkaW5nLXRvcDogNHB4O1xuICAgIH1cbiAgYFxufVxuXG5leHBvcnQgZnVuY3Rpb24gUXVlcnlUYXNrRm9ybSAocHJvcHM6IFF1ZXJ5VGFza0l0ZW1Qcm9wcykge1xuICBjb25zdCB7IHdpZGdldElkLCBjb25maWdJZCwgb3V0cHV0RFMsIHNwYXRpYWxGaWx0ZXJFbmFibGVkLCBkYXRhc291cmNlUmVhZHksIG9uRm9ybVN1Ym1pdCwgZGF0YUFjdGlvbkZpbHRlciwgaW5pdGlhbElucHV0VmFsdWUsIG9uSGFzaFBhcmFtZXRlclVzZWQsIHF1ZXJ5SXRlbVNob3J0SWQgfSA9IHByb3BzXG4gIGNvbnN0IHByZURhdGFBY3Rpb25GaWx0ZXIgPSBob29rcy51c2VQcmV2aW91cyhkYXRhQWN0aW9uRmlsdGVyKVxuICBjb25zdCBxdWVyeUl0ZW06IEltbXV0YWJsZU9iamVjdDxRdWVyeUl0ZW1UeXBlPiA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XG4gICAgY29uc3Qgd2lkZ2V0SnNvbiA9IHN0YXRlLmFwcENvbmZpZy53aWRnZXRzW3dpZGdldElkXVxuICAgIHJldHVybiB3aWRnZXRKc29uLmNvbmZpZy5xdWVyeUl0ZW1zLmZpbmQoaXRlbSA9PiBpdGVtLmNvbmZpZ0lkID09PSBjb25maWdJZClcbiAgfSlcbiAgY29uc3QgY3VycmVudEl0ZW0gPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1FVRVJZX0lURU0sIHF1ZXJ5SXRlbSlcbiAgY29uc3QgZ2V0STE4bk1lc3NhZ2UgPSBob29rcy51c2VUcmFuc2xhdGlvbihkZWZhdWx0TWVzc2FnZSlcbiAgY29uc3QgW3Jlc2V0U3ltYm9sLCBzZXRSZXNldFN5bWJvbF0gPSBSZWFjdC51c2VTdGF0ZTxzeW1ib2w+KG51bGwpXG4gIC8vIFJ1bnRpbWUgem9vbSBwcmVmZXJlbmNlIC0gaW5pdGlhbGl6ZWQgd2l0aCBjb25maWcgdmFsdWUsIGNhbiBiZSBvdmVycmlkZGVuIGJ5IHVzZXJcbiAgY29uc3QgW3J1bnRpbWVab29tVG9TZWxlY3RlZCwgc2V0UnVudGltZVpvb21Ub1NlbGVjdGVkXSA9IFJlYWN0LnVzZVN0YXRlPGJvb2xlYW4+KFxuICAgIHF1ZXJ5SXRlbT8uem9vbVRvU2VsZWN0ZWQgPz8gdHJ1ZVxuICApXG5cbiAgLy8gU3luYyBydW50aW1lIHpvb20gcHJlZmVyZW5jZSB3aGVuIHF1ZXJ5IGl0ZW0gY2hhbmdlcyAoZS5nLiwgc3dpdGNoaW5nIGJldHdlZW4gcXVlcmllcylcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBzZXRSdW50aW1lWm9vbVRvU2VsZWN0ZWQocXVlcnlJdGVtPy56b29tVG9TZWxlY3RlZCA/PyB0cnVlKVxuICB9LCBbcXVlcnlJdGVtPy56b29tVG9TZWxlY3RlZCwgcXVlcnlJdGVtPy5jb25maWdJZF0pXG5cbiAgLy8gY29uc3QgW2RhdGFTb3VyY2UsIHNldERhdGFTb3VyY2VdID0gUmVhY3QudXNlU3RhdGU8RGF0YVNvdXJjZT4obnVsbClcbiAgY29uc3Qge1xuICAgIHVzZUF0dHJpYnV0ZUZpbHRlcixcbiAgICB1c2VTcGF0aWFsRmlsdGVyLFxuICAgIHNwYXRpYWxGaWx0ZXJUeXBlcyxcbiAgICBzcWxFeHByT2JqLFxuICAgIHNwYXRpYWxNYXBXaWRnZXRJZHMsXG4gICAgc3BhdGlhbEludGVyYWN0aXZlQ3JlYXRlVG9vbFR5cGVzLFxuICAgIHNwYXRpYWxSZWxhdGlvblVzZURhdGFTb3VyY2VzLFxuICAgIHNwYXRpYWxJbmNsdWRlUnVudGltZURhdGEsXG4gICAgc3BhdGlhbFJlbGF0aW9ucyxcbiAgICBzcGF0aWFsUmVsYXRpb25FbmFibGVCdWZmZXIsXG4gICAgc3BhdGlhbFJlbGF0aW9uQnVmZmVyRGlzdGFuY2UsXG4gICAgc3BhdGlhbFJlbGF0aW9uQnVmZmVyVW5pdCxcbiAgICBzcGF0aWFsSW50ZXJhY3RpdmVFbmFibGVCdWZmZXIsXG4gICAgc3BhdGlhbEludGVyYWN0aXZlQnVmZmVyRGlzdGFuY2UsXG4gICAgc3BhdGlhbEludGVyYWN0aXZlQnVmZmVyVW5pdCxcbiAgICBhdHRyaWJ1dGVGaWx0ZXJMYWJlbCA9IGdldEkxOG5NZXNzYWdlKCdhdHRyaWJ1dGVGaWx0ZXInKSxcbiAgICBzcGF0aWFsRmlsdGVyTGFiZWwgPSBnZXRJMThuTWVzc2FnZSgnc3BhdGlhbEZpbHRlcicpLFxuICAgIGF0dHJpYnV0ZUZpbHRlckRlc2MsXG4gICAgc3BhdGlhbEZpbHRlckRlc2NcbiAgfSA9IGN1cnJlbnRJdGVtXG4gIGNvbnN0IFthdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqLCBzZXRBdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqXSA9IFJlYWN0LnVzZVN0YXRlPElNU3FsRXhwcmVzc2lvbj4oc3FsRXhwck9iailcbiAgY29uc3Qgc3BhdGlhbEZpbHRlck9ialJlZiA9IFJlYWN0LnVzZVJlZjxTcGF0aWFsRmlsdGVyT2JqPihudWxsKVxuICBjb25zdCBzcGF0aWFsUmVsYXRpb25SZWYgPSBSZWFjdC51c2VSZWY8U3BhdGlhbFJlbGF0aW9uPihTcGF0aWFsUmVsYXRpb24uSW50ZXJzZWN0KVxuICBjb25zdCBidWZmZXJSZWYgPSBSZWFjdC51c2VSZWY8eyBkaXN0YW5jZTogbnVtYmVyLCB1bml0OiBVbml0VHlwZSB9PihudWxsKVxuICBjb25zdCBhcHBseUJ1dHRvblJlZiA9IFJlYWN0LnVzZVJlZjxIVE1MQnV0dG9uRWxlbWVudD4obnVsbClcbiAgY29uc3QgZm9ybUNvbnRlbnRSZWYgPSBSZWFjdC51c2VSZWY8SFRNTERpdkVsZW1lbnQ+KG51bGwpXG4gIGNvbnN0IGlzQXV0b0hlaWdodCA9IHVzZUF1dG9IZWlnaHQoKVxuICBjb25zdCBzaG93Q2xhdXNlTnVtYmVyID0gUmVhY3QudXNlUmVmKGdldFNob3duQ2xhdXNlTnVtYmVyQnlFeHByZXNzaW9uKHNxbEV4cHJPYmopKVxuICBjb25zdCBpbml0aWFsVmFsdWVTZXRSZWYgPSBSZWFjdC51c2VSZWY8c3RyaW5nIHwgbnVsbD4obnVsbCkgLy8gVHJhY2sgd2hpY2ggY29uZmlnSWQgd2UndmUgc2V0IHRoZSB2YWx1ZSBmb3JcbiAgY29uc3QgbGFzdFZhbHVlU2V0UmVmID0gUmVhY3QudXNlUmVmPHN0cmluZyB8IG51bGw+KG51bGwpIC8vIFRyYWNrIHRoZSBsYXN0IHZhbHVlIHRoYXQgd2FzIHNldFxuICBjb25zdCBoYXNoVHJpZ2dlcmVkUmVmID0gUmVhY3QudXNlUmVmPGJvb2xlYW4+KGZhbHNlKSAvLyBUcmFjayBpZiBxdWVyeSB3YXMgdHJpZ2dlcmVkIHZpYSBoYXNoIHBhcmFtZXRlclxuICBjb25zdCBbaXNUeXBpbmdWYWxpZCwgc2V0SXNUeXBpbmdWYWxpZF0gPSBSZWFjdC51c2VTdGF0ZTxib29sZWFuPihmYWxzZSlcblxuICAvLyBNb25pdG9yIGZvY3VzIGFuZCBpbnB1dCBldmVudHMgd2l0aGluIHRoZSBxdWVyeSBmb3JtXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgaGFuZGxlRm9jdXMgPSAoZTogRm9jdXNFdmVudCkgPT4ge1xuICAgICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICAgIGlmICh0YXJnZXQudGFnTmFtZSA9PT0gJ0lOUFVUJykge1xuICAgICAgICBjb25zdCB2YWwgPSAodGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlXG4gICAgICAgIHNldElzVHlwaW5nVmFsaWQoaXNRdWVyeUlucHV0VmFsaWQodmFsKSlcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgICAgIGV2ZW50OiAnaW5wdXQtZm9jdXNlZCcsXG4gICAgICAgICAgY29uZmlnSWQsXG4gICAgICAgICAgdGFnTmFtZTogdGFyZ2V0LnRhZ05hbWUsXG4gICAgICAgICAgdHlwZTogKHRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS50eXBlLFxuICAgICAgICAgIHZhbHVlOiB2YWxcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBoYW5kbGVJbnB1dCA9IChlOiBFdmVudCkgPT4ge1xuICAgICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICAgIGlmICh0YXJnZXQudGFnTmFtZSA9PT0gJ0lOUFVUJykge1xuICAgICAgICBjb25zdCB2YWwgPSAodGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlXG4gICAgICAgIGNvbnN0IGlzVmFsaWQgPSBpc1F1ZXJ5SW5wdXRWYWxpZCh2YWwpXG4gICAgICAgIHNldElzVHlwaW5nVmFsaWQoaXNWYWxpZClcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgICAgIGV2ZW50OiAnaW5wdXQtdHlwaW5nJyxcbiAgICAgICAgICBjb25maWdJZCxcbiAgICAgICAgICB2YWx1ZTogdmFsLFxuICAgICAgICAgIGlzVHlwaW5nVmFsaWQ6IGlzVmFsaWRcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBoYW5kbGVGb2N1c091dCA9IChlOiBGb2N1c0V2ZW50KSA9PiB7XG4gICAgICAvLyBTbWFsbCBkZWxheSB0byBhbGxvdyBzdGF0ZSB0byBjYXRjaCB1cFxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHNldElzVHlwaW5nVmFsaWQoZmFsc2UpXG4gICAgICB9LCA1MClcbiAgICB9XG5cbiAgICBjb25zdCBjb250YWluZXIgPSBmb3JtQ29udGVudFJlZi5jdXJyZW50XG4gICAgaWYgKGNvbnRhaW5lcikge1xuICAgICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzaW4nLCBoYW5kbGVGb2N1cylcbiAgICAgIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGhhbmRsZUlucHV0KVxuICAgICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3Vzb3V0JywgaGFuZGxlRm9jdXNPdXQpXG4gICAgfVxuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGlmIChjb250YWluZXIpIHtcbiAgICAgICAgY29udGFpbmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2ZvY3VzaW4nLCBoYW5kbGVGb2N1cylcbiAgICAgICAgY29udGFpbmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2lucHV0JywgaGFuZGxlSW5wdXQpXG4gICAgICAgIGNvbnRhaW5lci5yZW1vdmVFdmVudExpc3RlbmVyKCdmb2N1c291dCcsIGhhbmRsZUZvY3VzT3V0KVxuICAgICAgfVxuICAgIH1cbiAgfSwgW2NvbmZpZ0lkXSlcblxuICAvLyBDaGVjayBpZiBhbnkgYXR0cmlidXRlIGZpbHRlciBpbnB1dCBpcyB2YWxpZFxuICBjb25zdCBpc0lucHV0VmFsaWQgPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICAvLyBJZiB0aGUgdXNlciBpcyBjdXJyZW50bHkgdHlwaW5nIHNvbWV0aGluZyB2YWxpZCwgdGhlIGZvcm0gaXMgdmFsaWRcbiAgICBpZiAoaXNUeXBpbmdWYWxpZCkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgICBldmVudDogJ3ZhbGlkYXRpb24tY2hlY2staW5zdGFudCcsXG4gICAgICAgIGNvbmZpZ0lkLFxuICAgICAgICBpc1ZhbGlkOiB0cnVlXG4gICAgICB9KVxuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG5cbiAgICBpZiAoIWF0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmo/LnBhcnRzIHx8IGF0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmoucGFydHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gdHJ1ZSAvLyBJZiBubyBwYXJ0cywgd2UgYXNzdW1lIGl0J3MgdmFsaWQgKGUuZy4gc3BhdGlhbC1vbmx5IHF1ZXJ5KVxuICAgIH1cbiAgICBcbiAgICAvLyBDaGVjayBpZiBhdCBsZWFzdCBvbmUgU0lOR0xFIHBhcnQgaGFzIGEgdmFsaWQgdmFsdWVcbiAgICBjb25zdCBoYXNWYWxpZFZhbHVlID0gYXR0cmlidXRlRmlsdGVyU3FsRXhwck9iai5wYXJ0cy5zb21lKHBhcnQgPT4ge1xuICAgICAgLy8gQWNjZXNzaW5nIEltbXV0YWJsZSBzdHJ1Y3R1cmVzIHJlcXVpcmVzIGNhcmUuIElmIGRvdCBub3RhdGlvbiBmYWlscywgXG4gICAgICAvLyB0aGUgZnJhbWV3b3JrIGNvbXBvbmVudHMgbWlnaHQgYmUgdXNpbmcgLmdldCgpIG9yIG90aGVyIG1ldGhvZHMuXG4gICAgICAvLyBXZSdsbCBiZSBpbmNsdXNpdmUgaGVyZTogaWYgaXQncyBub3QgYSBTSU5HTEUgcGFydCwgd2UgdHJlYXQgaXQgYXMgdmFsaWQuXG4gICAgICBpZiAocGFydC50eXBlID09PSAnU0lOR0xFJykge1xuICAgICAgICBjb25zdCB2YWwgPSBwYXJ0LnZhbHVlT3B0aW9ucz8udmFsdWVcbiAgICAgICAgY29uc3Qgc291cmNlID0gcGFydC52YWx1ZU9wdGlvbnM/LnNvdXJjZVxuICAgICAgICBcbiAgICAgICAgLy8gSWYgdGhlIHNvdXJjZSBpcyBOT1QgJ1VTRVJfSU5QVVQnLCBpdCdzIGxpa2VseSBhIGxpc3QvZHJvcGRvd24gKFVOSVFVRV9WQUxVRVMsIEZJRUxEX1ZBTFVFKVxuICAgICAgICAvLyBXZSBhbHNvIGNoZWNrIGZvciBwYXJ0LmRhdGFTb3VyY2Ugd2hpY2ggaXMgY29tbW9uIGZvciBsaXN0LWJhc2VkIHNlbGVjdGlvbnNcbiAgICAgICAgLy8gV2UgdHJlYXQgdGhlc2UgYXMgXCJMaXN0XCIgdHlwZXMgd2hpY2ggYXJlIGV4ZW1wdGVkIGZyb20gdGhlIGVtcHR5LXN0cmluZyBydWxlLlxuICAgICAgICBjb25zdCBpc0xpc3QgPSAoc291cmNlICYmIHNvdXJjZSAhPT0gJ1VTRVJfSU5QVVQnKSB8fCAocGFydC5kYXRhU291cmNlPy5zb3VyY2UpXG4gICAgICAgIFxuICAgICAgICBjb25zdCBpc1ZhbGlkID0gaXNRdWVyeUlucHV0VmFsaWQodmFsLCAhIWlzTGlzdClcbiAgICAgICAgXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgICAgICBldmVudDogJ3ZhbGlkYXRpb24tY2hlY2stZGV0YWlsJyxcbiAgICAgICAgICBjb25maWdJZCxcbiAgICAgICAgICBwYXJ0VHlwZTogcGFydC50eXBlLFxuICAgICAgICAgIHNvdXJjZSxcbiAgICAgICAgICBoYXNEYXRhU291cmNlOiAhIXBhcnQuZGF0YVNvdXJjZSxcbiAgICAgICAgICBkYXRhU291cmNlU291cmNlOiBwYXJ0LmRhdGFTb3VyY2U/LnNvdXJjZSxcbiAgICAgICAgICBpc0xpc3Q6ICEhaXNMaXN0LFxuICAgICAgICAgIHZhbHVlOiB2YWwsXG4gICAgICAgICAgaXNWYWxpZFxuICAgICAgICB9KVxuICAgICAgICBcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgICAgIGV2ZW50OiAndmFsaWRhdGlvbi1jaGVjaycsXG4gICAgICAgICAgY29uZmlnSWQsXG4gICAgICAgICAgcGFydFR5cGU6IHBhcnQudHlwZSxcbiAgICAgICAgICBzb3VyY2UsXG4gICAgICAgICAgaXNMaXN0LFxuICAgICAgICAgIHZhbHVlOiB2YWwsXG4gICAgICAgICAgdmFsdWVUeXBlOiB0eXBlb2YgdmFsLFxuICAgICAgICAgIGlzVmFsaWRcbiAgICAgICAgfSlcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBpc1ZhbGlkXG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZSBcbiAgICB9KVxuXG4gICAgcmV0dXJuIGhhc1ZhbGlkVmFsdWVcbiAgfSwgW2F0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmosIGNvbmZpZ0lkLCBpc1R5cGluZ1ZhbGlkXSlcblxuICBjb25zdCBvcmlnaW5EUyA9IG91dHB1dERTPy5nZXRPcmlnaW5EYXRhU291cmNlcygpWzBdXG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIGlucHV0IHZhbHVlIGZyb20gVVJMIGhhc2ggcGFyYW1ldGVycyB3aGVuOlxuICAgKiAxLiBEYXRhc291cmNlIGlzIHJlYWR5XG4gICAqIDIuIFdlIGhhdmUgYW4gaW5pdGlhbElucHV0VmFsdWUgZnJvbSBVUkwgaGFzaFxuICAgKiAzLiBXZSBoYXZlbid0IGFscmVhZHkgc2V0IGl0IGZvciB0aGlzIGNvbmZpZ0lkLCBPUiB0aGUgdmFsdWUgaGFzIGNoYW5nZWRcbiAgICogXG4gICAqIFVzZXMgYm90aCBSZWFjdCBzdGF0ZSB1cGRhdGVzIGFuZCBET00gbWFuaXB1bGF0aW9uIHRvIGVuc3VyZSB0aGUgdmFsdWVcbiAgICogaXMgcHJvcGVybHkgc2V0IGluIFNxbEV4cHJlc3Npb25SdW50aW1lJ3MgaW50ZXJuYWwgc3RhdGUuXG4gICAqL1xuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIFJlc2V0IGZsYWcgaWYgY29uZmlnSWQgY2hhbmdlZCAoc3dpdGNoZWQgdG8gZGlmZmVyZW50IHF1ZXJ5KVxuICAgIGlmIChpbml0aWFsVmFsdWVTZXRSZWYuY3VycmVudCAhPT0gbnVsbCAmJiBpbml0aWFsVmFsdWVTZXRSZWYuY3VycmVudCAhPT0gY29uZmlnSWQpIHtcbiAgICAgIGluaXRpYWxWYWx1ZVNldFJlZi5jdXJyZW50ID0gbnVsbFxuICAgICAgbGFzdFZhbHVlU2V0UmVmLmN1cnJlbnQgPSBudWxsXG4gICAgICBoYXNoVHJpZ2dlcmVkUmVmLmN1cnJlbnQgPSBmYWxzZSAvLyBSZXNldCBoYXNoIHRyaWdnZXIgZmxhZyB3aGVuIHN3aXRjaGluZyBxdWVyaWVzXG4gICAgICBzZXRJc1R5cGluZ1ZhbGlkKGZhbHNlKSAvLyBSZXNldCB0eXBpbmcgdmFsaWRhdGlvblxuICAgIH1cbiAgICBcbiAgICAvLyBDaGVjayBpZiB2YWx1ZSBoYXMgY2hhbmdlZCBmb3IgdGhlIHNhbWUgY29uZmlnSWRcbiAgICBjb25zdCB2YWx1ZUNoYW5nZWQgPSBsYXN0VmFsdWVTZXRSZWYuY3VycmVudCAhPT0gbnVsbCAmJiBcbiAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0VmFsdWVTZXRSZWYuY3VycmVudCAhPT0gaW5pdGlhbElucHV0VmFsdWUgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICBpbml0aWFsVmFsdWVTZXRSZWYuY3VycmVudCA9PT0gY29uZmlnSWRcbiAgICBcbiAgICAvLyBTZXQgdGhlIHZhbHVlIGlmOlxuICAgIC8vIC0gV2UgaGF2ZW4ndCBzZXQgaXQgZm9yIHRoaXMgY29uZmlnSWQgeWV0LCBPUlxuICAgIC8vIC0gVGhlIHZhbHVlIGhhcyBjaGFuZ2VkIGZvciB0aGUgc2FtZSBjb25maWdJZCAoaGFzaCBwYXJhbWV0ZXIgdXBkYXRlZClcbiAgICBjb25zdCBzaG91bGRTZXRWYWx1ZSA9IGRhdGFzb3VyY2VSZWFkeSAmJiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaW5pdGlhbElucHV0VmFsdWUgJiYgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNxbEV4cHJPYmo/LnBhcnRzPy5sZW5ndGggPiAwICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgIChpbml0aWFsVmFsdWVTZXRSZWYuY3VycmVudCAhPT0gY29uZmlnSWQgfHwgdmFsdWVDaGFuZ2VkKVxuICAgIFxuICAgIGlmIChzaG91bGRTZXRWYWx1ZSkge1xuICAgICAgY29uc3QgZmlyc3RQYXJ0ID0gc3FsRXhwck9iai5wYXJ0c1swXVxuICAgICAgLy8gQ2hlY2sgaWYgdGhlIGZpcnN0IHBhcnQgaXMgYSBTSU5HTEUgY2xhdXNlIChub3QgYSBTcWxDbGF1c2VTZXQpXG4gICAgICBpZiAoZmlyc3RQYXJ0ICYmICd0eXBlJyBpbiBmaXJzdFBhcnQgJiYgZmlyc3RQYXJ0LnR5cGUgPT09ICdTSU5HTEUnICYmICd2YWx1ZU9wdGlvbnMnIGluIGZpcnN0UGFydCkge1xuICAgICAgICAvLyBVcGRhdGUgdGhlIGV4cHJlc3Npb24gb2JqZWN0IHdpdGggdGhlIGluaXRpYWwgdmFsdWVcbiAgICAgICAgY29uc3QgdXBkYXRlZCA9IHNxbEV4cHJPYmouc2V0SW4oWydwYXJ0cycsICcwJywgJ3ZhbHVlT3B0aW9ucycsICd2YWx1ZSddLCBpbml0aWFsSW5wdXRWYWx1ZSlcbiAgICAgICAgc2V0QXR0cmlidXRlRmlsdGVyU3FsRXhwck9iaih1cGRhdGVkKVxuICAgICAgICAvLyBVcGRhdGUgY2xhdXNlIG51bWJlciBmb3IgdGhlIHVwZGF0ZWQgZXhwcmVzc2lvblxuICAgICAgICBzaG93Q2xhdXNlTnVtYmVyLmN1cnJlbnQgPSBnZXRTaG93bkNsYXVzZU51bWJlckJ5RXhwcmVzc2lvbih1cGRhdGVkKVxuICAgICAgICBpbml0aWFsVmFsdWVTZXRSZWYuY3VycmVudCA9IGNvbmZpZ0lkXG4gICAgICAgIGxhc3RWYWx1ZVNldFJlZi5jdXJyZW50ID0gaW5pdGlhbElucHV0VmFsdWVcbiAgICAgICAgXG4gICAgICAgIC8vIEFsc28gc2V0IHRoZSB2YWx1ZSBkaXJlY3RseSBvbiB0aGUgaW5wdXQgZWxlbWVudCBhZnRlciBhIGRlbGF5IHRvIGVuc3VyZSBjb21wb25lbnQgaXMgcmVuZGVyZWRcbiAgICAgICAgLy8gVGhpcyBpcyBuZWNlc3NhcnkgYmVjYXVzZSBTcWxFeHByZXNzaW9uUnVudGltZSBtYXkgbm90IHN5bmMgZnJvbSB0aGUgZXhwcmVzc2lvbiBwcm9wIGFsb25lXG4gICAgICAgIGNvbnN0IHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIC8vIEZpbmQgdGhlIGlucHV0IGVsZW1lbnQgd2l0aGluIFNxbEV4cHJlc3Npb25SdW50aW1lXG4gICAgICAgICAgLy8gVXNlIGRhdGEtd2lkZ2V0aWQgKHN0YW5kYXJkIEV4QiBhdHRyaWJ1dGUpIHRvIGlzb2xhdGUgdGhlIGNvcnJlY3Qgd2lkZ2V0IGluc3RhbmNlXG4gICAgICAgICAgY29uc3QgZm9ybUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBbZGF0YS13aWRnZXRpZD1cIiR7d2lkZ2V0SWR9XCJdYCk/LnF1ZXJ5U2VsZWN0b3IoJy5xdWVyeS1mb3JtJykgfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC53aWRnZXQtcnVudGltZVtkYXRhLXdpZGdldGlkPVwiJHt3aWRnZXRJZH1cIl1gKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucXVlcnktZm9ybScpXG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKGZvcm1FbGVtZW50KSB7XG4gICAgICAgICAgICAvLyBMb29rIGZvciB0ZXh0IGlucHV0IGVsZW1lbnRzXG4gICAgICAgICAgICBjb25zdCB0ZXh0SW5wdXRzID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT1cInRleHRcIl0nKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB0ZXh0SW5wdXRzLmZvckVhY2goKGlucHV0OiBIVE1MSW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgdmFsdWUgaWYgaW5wdXQgaXMgZW1wdHkgT1IgaWYgdGhlIHZhbHVlIGhhcyBjaGFuZ2VkIChoYXNoIHBhcmFtZXRlciB1cGRhdGVkKVxuICAgICAgICAgICAgICBjb25zdCBzaG91bGRVcGRhdGUgPSAhaW5wdXQudmFsdWUgfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQudmFsdWUudHJpbSgpID09PSAnJyB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dC52YWx1ZSAhPT0gaW5pdGlhbElucHV0VmFsdWVcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGlmIChzaG91bGRVcGRhdGUpIHtcbiAgICAgICAgICAgICAgICAvLyBGb2N1cyB0aGUgaW5wdXQgZmlyc3RcbiAgICAgICAgICAgICAgICBpbnB1dC5mb2N1cygpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gU2V0IHRoZSB2YWx1ZVxuICAgICAgICAgICAgICAgIGlucHV0LnZhbHVlID0gaW5pdGlhbElucHV0VmFsdWVcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBDcmVhdGUgYW5kIGRpc3BhdGNoIGlucHV0IGV2ZW50IHdpdGggcHJvcGVyIHByb3BlcnRpZXNcbiAgICAgICAgICAgICAgICBjb25zdCBpbnB1dEV2ZW50ID0gbmV3IEV2ZW50KCdpbnB1dCcsIHsgYnViYmxlczogdHJ1ZSwgY2FuY2VsYWJsZTogdHJ1ZSB9KVxuICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpbnB1dEV2ZW50LCAndGFyZ2V0JywgeyB2YWx1ZTogaW5wdXQsIGVudW1lcmFibGU6IHRydWUgfSlcbiAgICAgICAgICAgICAgICBpbnB1dC5kaXNwYXRjaEV2ZW50KGlucHV0RXZlbnQpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGFuZCBkaXNwYXRjaCBjaGFuZ2UgZXZlbnRcbiAgICAgICAgICAgICAgICBjb25zdCBjaGFuZ2VFdmVudCA9IG5ldyBFdmVudCgnY2hhbmdlJywgeyBidWJibGVzOiB0cnVlLCBjYW5jZWxhYmxlOiB0cnVlIH0pXG4gICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNoYW5nZUV2ZW50LCAndGFyZ2V0JywgeyB2YWx1ZTogaW5wdXQsIGVudW1lcmFibGU6IHRydWUgfSlcbiAgICAgICAgICAgICAgICBpbnB1dC5kaXNwYXRjaEV2ZW50KGNoYW5nZUV2ZW50KVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIEFsc28gdHJ5IFJlYWN0J3Mgc3ludGhldGljIGV2ZW50IGFwcHJvYWNoIHVzaW5nIG5hdGl2ZSB2YWx1ZSBzZXR0ZXJcbiAgICAgICAgICAgICAgICBjb25zdCBuYXRpdmVJbnB1dFZhbHVlU2V0dGVyID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih3aW5kb3cuSFRNTElucHV0RWxlbWVudC5wcm90b3R5cGUsICd2YWx1ZScpPy5zZXRcbiAgICAgICAgICAgICAgICBpZiAobmF0aXZlSW5wdXRWYWx1ZVNldHRlcikge1xuICAgICAgICAgICAgICAgICAgbmF0aXZlSW5wdXRWYWx1ZVNldHRlci5jYWxsKGlucHV0LCBpbml0aWFsSW5wdXRWYWx1ZSlcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHJlYWN0RXZlbnQgPSBuZXcgRXZlbnQoJ2lucHV0JywgeyBidWJibGVzOiB0cnVlIH0pXG4gICAgICAgICAgICAgICAgICBpbnB1dC5kaXNwYXRjaEV2ZW50KHJlYWN0RXZlbnQpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIEJsdXIgdG8gdHJpZ2dlciBhbnkgdmFsaWRhdGlvbiBvciBzdGF0ZSB1cGRhdGVzXG4gICAgICAgICAgICAgICAgaW5wdXQuYmx1cigpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEFmdGVyIHNldHRpbmcgdmFsdWVzIGFuZCBibHVycmluZywgdmVyaWZ5IGlucHV0IHZhbHVlIGlzIHNldCBiZWZvcmUgdHJpZ2dlcmluZyBBcHBseSBidXR0b25cbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICBpZiAoYXBwbHlCdXR0b25SZWYuY3VycmVudCAmJiAhYXBwbHlCdXR0b25SZWYuY3VycmVudC5kaXNhYmxlZCAmJiBkYXRhc291cmNlUmVhZHkpIHtcbiAgICAgICAgICAgICAgICAvLyBWRVJJRklDQVRJT046IEVuc3VyZSBpbnB1dCB2YWx1ZSBpcyBhY3R1YWxseSBzZXQgYmVmb3JlIGV4ZWN1dGluZyBxdWVyeVxuICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgZXNwZWNpYWxseSBpbXBvcnRhbnQgZm9yIGdyb3VwZWQgcXVlcmllcyB3aGVyZSBkcm9wZG93bnMgbmVlZCB0byBiZSBzeW5jaHJvbml6ZWQgZmlyc3RcbiAgICAgICAgICAgICAgICBjb25zdCBmb3JtRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLXdpZGdldGlkPVwiJHt3aWRnZXRJZH1cIl1gKT8ucXVlcnlTZWxlY3RvcignLnF1ZXJ5LWZvcm0nKSB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnF1ZXJ5LWZvcm0nKVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChmb3JtRWxlbWVudCAmJiBpbml0aWFsSW5wdXRWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgY29uc3QgdGV4dElucHV0cyA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W3R5cGU9XCJ0ZXh0XCJdJylcbiAgICAgICAgICAgICAgICAgIGxldCBpbnB1dFZhbHVlU2V0ID0gZmFsc2VcbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgdGV4dElucHV0cy5mb3JFYWNoKChpbnB1dDogSFRNTElucHV0RWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5wdXQudmFsdWUgPT09IGluaXRpYWxJbnB1dFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgaW5wdXRWYWx1ZVNldCA9IHRydWVcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgaWYgKCFpbnB1dFZhbHVlU2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgICAgICAgICAgICAgICAgICBldmVudDogJ2lucHV0LXZhbHVlLW5vdC1zZXQtcmV0cnlpbmcnLFxuICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdGVkVmFsdWU6IGluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5SXRlbVNob3J0SWQsXG4gICAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiAnd2lsbC1yZXRyeS1hZnRlci1kZWxheScsXG4gICAgICAgICAgICAgICAgICAgICAgbm90ZTogJ0lucHV0IHZhbHVlIG5vdCBzZXQsIHJldHJ5aW5nIHRvIGVuc3VyZSBzeW5jaHJvbml6YXRpb24nXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC8vIFJldHJ5IGFmdGVyIGEgc2hvcnQgZGVsYXkgdG8gYWxsb3cgc3RhdGUgdG8gc3luY1xuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAvLyBSZWN1cnNpdmVseSBjYWxsIHZlcmlmeUFuZEFwcGx5IGlmIG5lZWRlZCwgYnV0IGxpbWl0IHJldHJpZXNcbiAgICAgICAgICAgICAgICAgICAgICAvLyBGb3Igbm93LCBqdXN0IHJldHJ5IG9uY2UgbW9yZVxuICAgICAgICAgICAgICAgICAgICAgIGlmIChhcHBseUJ1dHRvblJlZi5jdXJyZW50ICYmICFhcHBseUJ1dHRvblJlZi5jdXJyZW50LmRpc2FibGVkICYmIGRhdGFzb3VyY2VSZWFkeSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2V0IGhhc2hUcmlnZ2VyZWRSZWYgdG8gZm9yY2Ugem9vbSBmb3IgaGFzaC10cmlnZ2VyZWQgcXVlcmllc1xuICAgICAgICAgICAgICAgICAgICAgICAgaGFzaFRyaWdnZXJlZFJlZi5jdXJyZW50ID0gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZW1vdmUgaGFzaCBwYXJhbWV0ZXIgZnJvbSBVUkwgYmVmb3JlIEFwcGx5IGlzIHRyaWdnZXJlZFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9uSGFzaFBhcmFtZXRlclVzZWQgJiYgcXVlcnlJdGVtU2hvcnRJZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkhhc2hQYXJhbWV0ZXJVc2VkKHF1ZXJ5SXRlbVNob3J0SWQpXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEF1dG8tdHJpZ2dlciBBcHBseSBidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgIGFwcGx5QnV0dG9uUmVmLmN1cnJlbnQuY2xpY2soKVxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSwgMzAwKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gLy8gRXhpdCBlYXJseSwgd2lsbCByZXRyeVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBJbnB1dCB2YWx1ZSBpcyBzZXQgY29ycmVjdGx5LCBwcm9jZWVkIHdpdGggZXhlY3V0aW9uXG4gICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdpbnB1dC12YWx1ZS12ZXJpZmllZCcsXG4gICAgICAgICAgICAgICAgICBleHBlY3RlZFZhbHVlOiBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgICAgICAgICAgICAgIHF1ZXJ5SXRlbVNob3J0SWQsXG4gICAgICAgICAgICAgICAgICBub3RlOiAnSW5wdXQgdmFsdWUgdmVyaWZpZWQsIHByb2NlZWRpbmcgd2l0aCBxdWVyeSBleGVjdXRpb24nXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBTZXQgaGFzaFRyaWdnZXJlZFJlZiB0byBmb3JjZSB6b29tIGZvciBoYXNoLXRyaWdnZXJlZCBxdWVyaWVzXG4gICAgICAgICAgICAgICAgaGFzaFRyaWdnZXJlZFJlZi5jdXJyZW50ID0gdHJ1ZVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBoYXNoIHBhcmFtZXRlciBmcm9tIFVSTCBiZWZvcmUgQXBwbHkgaXMgdHJpZ2dlcmVkIHRvIHByZXZlbnQgcmUtZXhlY3V0aW9uXG4gICAgICAgICAgICAgICAgaWYgKG9uSGFzaFBhcmFtZXRlclVzZWQgJiYgcXVlcnlJdGVtU2hvcnRJZCkge1xuICAgICAgICAgICAgICAgICAgb25IYXNoUGFyYW1ldGVyVXNlZChxdWVyeUl0ZW1TaG9ydElkKVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIEF1dG8tdHJpZ2dlciBBcHBseSBidXR0b24gdG8gZXhlY3V0ZSB0aGUgcXVlcnkgd2l0aCB0aGUgcG9wdWxhdGVkIHZhbHVlXG4gICAgICAgICAgICAgICAgYXBwbHlCdXR0b25SZWYuY3VycmVudC5jbGljaygpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIDIwMCkgLy8gU21hbGwgZGVsYXkgYWZ0ZXIgYmx1ciB0byBlbnN1cmUgc3RhdGUgaXMgc3luY2VkXG4gICAgICAgICAgfVxuICAgICAgICB9LCA1MDApIC8vIExvbmdlciBkZWxheSB0byBlbnN1cmUgY29tcG9uZW50IGlzIGZ1bGx5IHJlbmRlcmVkXG4gICAgICAgIFxuICAgICAgICByZXR1cm4gKCkgPT4gY2xlYXJUaW1lb3V0KHRpbWVvdXRJZClcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gVGhlIHNxbEV4cHJPYmoucGFydHMgbWF5IGNoYW5nZSBidXQgdGhlIGRpc3BsYXlTUUwgaXMgdGhlIHNhbWVcbiAgICBpZiAoIXNxbEV4cHJPYmopIHtcbiAgICAgIHNob3dDbGF1c2VOdW1iZXIuY3VycmVudCA9IDBcbiAgICAgIHNldEF0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmoobnVsbClcbiAgICB9IGVsc2Uge1xuICAgICAgc2hvd0NsYXVzZU51bWJlci5jdXJyZW50ID0gZ2V0U2hvd25DbGF1c2VOdW1iZXJCeUV4cHJlc3Npb24oc3FsRXhwck9iailcbiAgICAgIC8vIE9ubHkgdXBkYXRlIGlmIHdlIGhhdmVuJ3Qgc2V0IHRoZSBpbml0aWFsIHZhbHVlIGZvciB0aGlzIGNvbmZpZ0lkIHlldCwgb3IgaWYgd2UgZG9uJ3QgaGF2ZSBhbiBpbml0aWFsIHZhbHVlXG4gICAgICBpZiAoaW5pdGlhbFZhbHVlU2V0UmVmLmN1cnJlbnQgIT09IGNvbmZpZ0lkIHx8ICFpbml0aWFsSW5wdXRWYWx1ZSkge1xuICAgICAgICBzZXRBdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqKHNxbEV4cHJPYmopXG4gICAgICB9XG4gICAgfVxuICB9LCBbc3FsRXhwck9iaiwgaW5pdGlhbElucHV0VmFsdWUsIGRhdGFzb3VyY2VSZWFkeSwgY29uZmlnSWQsIHdpZGdldElkLCBvbkhhc2hQYXJhbWV0ZXJVc2VkLCBxdWVyeUl0ZW1TaG9ydElkXSlcblxuICBjb25zdCBhcHBseVF1ZXJ5ID0gUmVhY3QudXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIC8vIFdoZW4gdGhlICdhcHBseScgYnV0dG9uIGlzIGNsaWNrZWQsIGl0IHNob3VsZCBjbGVhciB0aGUgc2VsZWN0aW9uIGZyb20gdGhlIHByZXZpb3VzIHJlc3VsdCBsaXN0XG4gICAgY2xlYXJTZWxlY3Rpb25JbkRhdGFTb3VyY2VzKG91dHB1dERTKVxuXG4gICAgaWYgKG91dHB1dERTKSB7XG4gICAgICBjb25zdCBvcmlnaW5EczogRmVhdHVyZUxheWVyRGF0YVNvdXJjZSA9IG91dHB1dERTLmdldE9yaWdpbkRhdGFTb3VyY2VzKClbMF0gYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICAgICAgaWYgKG9yaWdpbkRzKSB7XG4gICAgICAgIGNvbnN0IGRhdGFWaWV3Q29uZmlnID0gb3JpZ2luRHMuZ2V0RGF0YVZpZXdDb25maWcoKVxuICAgICAgICBjb25zdCBtYXhpbXVtID0gZGF0YVZpZXdDb25maWc/Lm1heGltdW1cbiAgICAgICAgaWYgKG1heGltdW0gIT0gbnVsbCAmJiBtYXhpbXVtID4gMCkge1xuICAgICAgICAgIERhdGFTb3VyY2VNYW5hZ2VyLmdldEluc3RhbmNlKCkudXBkYXRlRGF0YVNvdXJjZUJ5RGF0YVNvdXJjZUpzb24oXG4gICAgICAgICAgICBvdXRwdXREUyxcbiAgICAgICAgICAgIG91dHB1dERTLmdldERhdGFTb3VyY2VKc29uKCkuc2V0SW4oWydxdWVyeScsICdtYXhpbXVtJ10sIG1heGltdW0pXG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gRm9yY2Ugem9vbSBmb3IgaGFzaC10cmlnZ2VyZWQgcXVlcmllcywgb3RoZXJ3aXNlIHVzZSBydW50aW1lIHByZWZlcmVuY2VcbiAgICBjb25zdCB6b29tVG9Vc2UgPSBoYXNoVHJpZ2dlcmVkUmVmLmN1cnJlbnQgPyB0cnVlIDogcnVudGltZVpvb21Ub1NlbGVjdGVkXG5cbiAgICAvLyBTYW5pdGl6ZSB1c2VyIGlucHV0IGJlZm9yZSBzdWJtaXNzaW9uXG4gICAgY29uc3Qgc2FuaXRpemVkU3FsRXhwck9iaiA9IHNhbml0aXplU3FsRXhwcmVzc2lvbihhdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqKVxuXG4gICAgbGV0IHJlbCA9IHNwYXRpYWxSZWxhdGlvblJlZi5jdXJyZW50XG4gICAgaWYgKHNwYXRpYWxGaWx0ZXJPYmpSZWYuY3VycmVudD8uZ2VvbWV0cnkgJiYgcmVsID09IG51bGwpIHtcbiAgICAgIHJlbCA9IFNwYXRpYWxSZWxhdGlvbi5JbnRlcnNlY3RcbiAgICB9XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoc3BhdGlhbEZpbHRlck9ialJlZi5jdXJyZW50Py5nZW9tZXRyeSkpIHtcbiAgICAgIGlmIChzcGF0aWFsRmlsdGVyT2JqUmVmLmN1cnJlbnQuZ2VvbWV0cnkubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIG9uRm9ybVN1Ym1pdChzYW5pdGl6ZWRTcWxFeHByT2JqLCB7IC4uLnNwYXRpYWxGaWx0ZXJPYmpSZWYuY3VycmVudCwgZ2VvbWV0cnk6IHNwYXRpYWxGaWx0ZXJPYmpSZWYuY3VycmVudC5nZW9tZXRyeVswXSwgcmVsYXRpb246IHJlbCwgYnVmZmVyOiBidWZmZXJSZWYuY3VycmVudCB9LCB6b29tVG9Vc2UpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsb2FkQXJjR0lTSlNBUElNb2R1bGVzKFtcbiAgICAgICAgICAnZXNyaS9nZW9tZXRyeS9vcGVyYXRvcnMvdW5pb25PcGVyYXRvcidcbiAgICAgICAgXSkudGhlbihtb2R1bGVzID0+IHtcbiAgICAgICAgICBjb25zdCBvcGVyYXRvcjogKHR5cGVvZiBfX2VzcmkudW5pb25PcGVyYXRvcikgPSBtb2R1bGVzWzBdXG4gICAgICAgICAgY29uc3QgZ2VvbWV0cnkgPSBvcGVyYXRvci5leGVjdXRlTWFueShzcGF0aWFsRmlsdGVyT2JqUmVmLmN1cnJlbnQuZ2VvbWV0cnkpXG4gICAgICAgICAgb25Gb3JtU3VibWl0KHNhbml0aXplZFNxbEV4cHJPYmosIHsgLi4uc3BhdGlhbEZpbHRlck9ialJlZi5jdXJyZW50LCBnZW9tZXRyeSwgcmVsYXRpb246IHJlbCwgYnVmZmVyOiBidWZmZXJSZWYuY3VycmVudCB9LCB6b29tVG9Vc2UpXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIG9uRm9ybVN1Ym1pdChzYW5pdGl6ZWRTcWxFeHByT2JqLCB7IC4uLnNwYXRpYWxGaWx0ZXJPYmpSZWYuY3VycmVudCwgcmVsYXRpb246IHJlbCwgYnVmZmVyOiBidWZmZXJSZWYuY3VycmVudCB9LCB6b29tVG9Vc2UpXG4gICAgfVxuICAgIFxuICAgIC8vIFJlc2V0IGhhc2hUcmlnZ2VyZWRSZWYgYWZ0ZXIgdXNlXG4gICAgaGFzaFRyaWdnZXJlZFJlZi5jdXJyZW50ID0gZmFsc2VcbiAgfSwgW29uRm9ybVN1Ym1pdCwgb3V0cHV0RFMsIGF0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmosIHJ1bnRpbWVab29tVG9TZWxlY3RlZF0pXG5cbiAgY29uc3QgaGFuZGxlS2V5RG93biA9IFJlYWN0LnVzZUNhbGxiYWNrKChldmVudDogUmVhY3QuS2V5Ym9hcmRFdmVudCkgPT4ge1xuICAgIGlmIChldmVudC5rZXkgPT09ICdFbnRlcicgJiYgZGF0YXNvdXJjZVJlYWR5ICYmIGlzSW5wdXRWYWxpZCkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgICAgXG4gICAgICAvLyBGaW5kIHRoZSBhY3RpdmUgaW5wdXQgZmllbGRcbiAgICAgIGNvbnN0IGFjdGl2ZUVsZW1lbnQgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50IGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICAgIGlmIChhY3RpdmVFbGVtZW50ICYmIGFjdGl2ZUVsZW1lbnQudGFnTmFtZSA9PT0gJ0lOUFVUJyAmJiBhY3RpdmVFbGVtZW50LnR5cGUgPT09ICd0ZXh0Jykge1xuICAgICAgICAvLyBGb3JjZSBibHVyIHRvIHRyaWdnZXIgU3FsRXhwcmVzc2lvblJ1bnRpbWUncyBpbnB1dCBwcm9jZXNzaW5nXG4gICAgICAgIGFjdGl2ZUVsZW1lbnQuYmx1cigpXG4gICAgICAgIFxuICAgICAgICAvLyBXYWl0IGZvciBibHVyIHByb2Nlc3NpbmcsIHRoZW4gY2xpY2sgdGhlIEFwcGx5IGJ1dHRvblxuICAgICAgICAvLyBUaGlzIHVzZXMgdGhlIGV4YWN0IHNhbWUgY29kZSBwYXRoIGFzIGNsaWNraW5nIHRoZSBidXR0b24gbWFudWFsbHlcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgaWYgKGFwcGx5QnV0dG9uUmVmLmN1cnJlbnQgJiYgIWFwcGx5QnV0dG9uUmVmLmN1cnJlbnQuZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIGFwcGx5QnV0dG9uUmVmLmN1cnJlbnQuY2xpY2soKVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhcHBseVF1ZXJ5KClcbiAgICAgICAgICB9XG4gICAgICAgIH0sIDIwMClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIE5vdCBpbiBhbiBpbnB1dCBmaWVsZCwgc2FmZSB0byBhcHBseSBpbW1lZGlhdGVseVxuICAgICAgICBpZiAoYXBwbHlCdXR0b25SZWYuY3VycmVudCAmJiAhYXBwbHlCdXR0b25SZWYuY3VycmVudC5kaXNhYmxlZCkge1xuICAgICAgICAgIGFwcGx5QnV0dG9uUmVmLmN1cnJlbnQuY2xpY2soKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGFwcGx5UXVlcnkoKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LCBbZGF0YXNvdXJjZVJlYWR5LCBhcHBseVF1ZXJ5LCBpc0lucHV0VmFsaWRdKVxuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFkYXRhQWN0aW9uRmlsdGVyKSByZXR1cm5cbiAgICBpZiAoZGF0YUFjdGlvbkZpbHRlci53aGVyZSAhPT0gcHJlRGF0YUFjdGlvbkZpbHRlcj8ud2hlcmUpIHtcbiAgICAgIGFwcGx5UXVlcnkoKVxuICAgIH1cbiAgfSwgW2RhdGFBY3Rpb25GaWx0ZXIsIHByZURhdGFBY3Rpb25GaWx0ZXI/LndoZXJlLCBhcHBseVF1ZXJ5XSlcblxuICBjb25zdCByZXNldFF1ZXJ5ID0gUmVhY3QudXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIC8vIDEuIHJlc2V0IGF0dHJpYnV0ZSBmaWx0ZXJcbiAgICBzaG93Q2xhdXNlTnVtYmVyLmN1cnJlbnQgPSBnZXRTaG93bkNsYXVzZU51bWJlckJ5RXhwcmVzc2lvbihzcWxFeHByT2JqKVxuICAgIHNldEF0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmooc3FsRXhwck9iailcbiAgICAvLyAyLiByZXNldCBzcGF0aWFsIGZpbHRlclxuICAgIHNldFJlc2V0U3ltYm9sKFN5bWJvbCgpKVxuICB9LCBbc3FsRXhwck9ial0pXG5cbiAgY29uc3QgaGFuZGxlU3FsRXhwck9iakNoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKChzcWxPYmo6IElNU3FsRXhwcmVzc2lvbikgPT4ge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgIGV2ZW50OiAnc3FsLWV4cHJlc3Npb24tY2hhbmdlZCcsXG4gICAgICBjb25maWdJZCxcbiAgICAgIHBhcnRzQ291bnQ6IHNxbE9iaj8ucGFydHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgZmlyc3RQYXJ0VmFsdWU6IHNxbE9iaj8ucGFydHM/LlswXT8udHlwZSA9PT0gJ1NJTkdMRScgPyAoc3FsT2JqLnBhcnRzWzBdIGFzIGFueSkudmFsdWVPcHRpb25zPy52YWx1ZSA6ICdub3Qtc2luZ2xlJ1xuICAgIH0pXG4gICAgc2hvd0NsYXVzZU51bWJlci5jdXJyZW50ID0gZ2V0U2hvd25DbGF1c2VOdW1iZXJCeUV4cHJlc3Npb24oc3FsT2JqKVxuICAgIHNldEF0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmooc3FsT2JqKVxuICB9LCBbY29uZmlnSWRdKVxuXG4gIGNvbnN0IGhhbmRsZVNwYXRpYWxGaWx0ZXJDaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjaygoZmlsdGVyOiBTcGF0aWFsRmlsdGVyT2JqKSA9PiB7XG4gICAgc3BhdGlhbEZpbHRlck9ialJlZi5jdXJyZW50ID0gZmlsdGVyXG4gIH0sIFtdKVxuXG4gIGNvbnN0IGhhbmRsZVJlbGF0aW9uQ2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soKHJlbDogU3BhdGlhbFJlbGF0aW9uKSA9PiB7XG4gICAgc3BhdGlhbFJlbGF0aW9uUmVmLmN1cnJlbnQgPSByZWxcbiAgfSwgW10pXG5cbiAgY29uc3QgaGFuZGxlQnVmZmVyQ2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soKGRpc3RhbmNlOiBudW1iZXIsIHVuaXQ6IFVuaXRUeXBlKSA9PiB7XG4gICAgYnVmZmVyUmVmLmN1cnJlbnQgPSB7IGRpc3RhbmNlLCB1bml0IH1cbiAgfSwgW10pXG5cbiAgY29uc3Qgc2hvd0F0dHJpYnV0ZUZpbHRlciA9IHVzZUF0dHJpYnV0ZUZpbHRlciAmJiBzcWxFeHByT2JqICE9IG51bGxcbiAgY29uc3Qgc2hvd1NwYXRpYWxGaWx0ZXIgPSBzcGF0aWFsRmlsdGVyRW5hYmxlZCAmJiB1c2VTcGF0aWFsRmlsdGVyICYmIChzcGF0aWFsRmlsdGVyVHlwZXMubGVuZ3RoID4gMCB8fCBzcGF0aWFsSW5jbHVkZVJ1bnRpbWVEYXRhIHx8IHNwYXRpYWxSZWxhdGlvblVzZURhdGFTb3VyY2VzPy5sZW5ndGggPiAwKVxuXG4gIC8vIERlYnVnIGxvZ2dpbmcgZm9yIGZvcm0gcmVuZGVyaW5nXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgZXZlbnQ6ICdmb3JtLXJlbmRlci1jaGVjaycsXG4gICAgICBjb25maWdJZCxcbiAgICAgIGRhdGFzb3VyY2VSZWFkeSxcbiAgICAgIHVzZUF0dHJpYnV0ZUZpbHRlcixcbiAgICAgIHNxbEV4cHJPYmo6IHNxbEV4cHJPYmogPyAnZXhpc3RzJyA6ICdudWxsJyxcbiAgICAgIHNxbEV4cHJPYmpQYXJ0czogc3FsRXhwck9iaj8ucGFydHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgc2hvd0F0dHJpYnV0ZUZpbHRlcixcbiAgICAgIG9yaWdpbkRTOiBvcmlnaW5EUyA/ICdleGlzdHMnIDogJ251bGwnLFxuICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFM/LmlkIHx8ICdub25lJyxcbiAgICAgIHNob3dTcGF0aWFsRmlsdGVyLFxuICAgICAgaXNBdXRvSGVpZ2h0LFxuICAgICAgb3V0cHV0RFM6IG91dHB1dERTID8gJ2V4aXN0cycgOiAnbnVsbCdcbiAgICB9KVxuICB9LCBbY29uZmlnSWQsIGRhdGFzb3VyY2VSZWFkeSwgdXNlQXR0cmlidXRlRmlsdGVyLCBzcWxFeHByT2JqLCBzaG93QXR0cmlidXRlRmlsdGVyLCBvcmlnaW5EUywgc2hvd1NwYXRpYWxGaWx0ZXIsIGlzQXV0b0hlaWdodCwgb3V0cHV0RFNdKVxuXG4gIC8vIExvZyB3aGVuIGZvcm0gY29udGVudCBzaG91bGQgcmVuZGVyXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHNob3dBdHRyaWJ1dGVGaWx0ZXIgJiYgb3JpZ2luRFMpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgICAgZXZlbnQ6ICdhdHRyaWJ1dGUtZmlsdGVyLXJlYWR5JyxcbiAgICAgICAgY29uZmlnSWQsXG4gICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICBzcWxFeHByT2JqUGFydHM6IHNxbEV4cHJPYmo/LnBhcnRzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgYXR0cmlidXRlRmlsdGVyTGFiZWwsXG4gICAgICAgIG5vdGU6ICdJbnB1dCBmaWVsZCBzaG91bGQgYmUgdmlzaWJsZSdcbiAgICAgIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgICAgZXZlbnQ6ICdhdHRyaWJ1dGUtZmlsdGVyLW5vdC1yZWFkeScsXG4gICAgICAgIGNvbmZpZ0lkLFxuICAgICAgICBzaG93QXR0cmlidXRlRmlsdGVyLFxuICAgICAgICBvcmlnaW5EUzogb3JpZ2luRFMgPyAnZXhpc3RzJyA6ICdudWxsJyxcbiAgICAgICAgdXNlQXR0cmlidXRlRmlsdGVyLFxuICAgICAgICBzcWxFeHByT2JqOiBzcWxFeHByT2JqID8gJ2V4aXN0cycgOiAnbnVsbCcsXG4gICAgICAgIHJlYXNvbjogIXNob3dBdHRyaWJ1dGVGaWx0ZXIgPyAnc2hvd0F0dHJpYnV0ZUZpbHRlciBpcyBmYWxzZScgOiAnb3JpZ2luRFMgaXMgbnVsbCdcbiAgICAgIH0pXG4gICAgfVxuICB9LCBbc2hvd0F0dHJpYnV0ZUZpbHRlciwgb3JpZ2luRFMsIGNvbmZpZ0lkLCBzcWxFeHByT2JqLCB1c2VBdHRyaWJ1dGVGaWx0ZXIsIGF0dHJpYnV0ZUZpbHRlckxhYmVsXSlcblxuICAvLyBDaGVjayBET00gdmlzaWJpbGl0eSBhZnRlciByZW5kZXJcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoZm9ybUNvbnRlbnRSZWYuY3VycmVudCkge1xuICAgICAgY29uc3QgY29tcHV0ZWRTdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGZvcm1Db250ZW50UmVmLmN1cnJlbnQpXG4gICAgICBjb25zdCByZWN0ID0gZm9ybUNvbnRlbnRSZWYuY3VycmVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICAgICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgICBldmVudDogJ2Zvcm0tY29udGVudC1kb20tY2hlY2snLFxuICAgICAgICBjb25maWdJZCxcbiAgICAgICAgZXhpc3RzOiAhIWZvcm1Db250ZW50UmVmLmN1cnJlbnQsXG4gICAgICAgIGRpc3BsYXk6IGNvbXB1dGVkU3R5bGUuZGlzcGxheSxcbiAgICAgICAgdmlzaWJpbGl0eTogY29tcHV0ZWRTdHlsZS52aXNpYmlsaXR5LFxuICAgICAgICBvcGFjaXR5OiBjb21wdXRlZFN0eWxlLm9wYWNpdHksXG4gICAgICAgIGhlaWdodDogY29tcHV0ZWRTdHlsZS5oZWlnaHQsXG4gICAgICAgIG1heEhlaWdodDogY29tcHV0ZWRTdHlsZS5tYXhIZWlnaHQsXG4gICAgICAgIGZsZXg6IGNvbXB1dGVkU3R5bGUuZmxleCxcbiAgICAgICAgZmxleEJhc2lzOiBjb21wdXRlZFN0eWxlLmZsZXhCYXNpcyxcbiAgICAgICAgcmVjdEhlaWdodDogcmVjdC5oZWlnaHQsXG4gICAgICAgIHJlY3RXaWR0aDogcmVjdC53aWR0aCxcbiAgICAgICAgaXNWaXNpYmxlOiByZWN0LmhlaWdodCA+IDAgJiYgcmVjdC53aWR0aCA+IDAsXG4gICAgICAgIHBhcmVudEhlaWdodDogZm9ybUNvbnRlbnRSZWYuY3VycmVudC5wYXJlbnRFbGVtZW50Py5jbGllbnRIZWlnaHQgfHwgMFxuICAgICAgfSlcbiAgICB9XG4gIH0sIFtjb25maWdJZCwgc2hvd0F0dHJpYnV0ZUZpbHRlciwgb3JpZ2luRFNdKVxuXG4gIHJldHVybiAoXG4gICAgPFF1ZXJ5VGFza0NvbnRleHQuUHJvdmlkZXIgdmFsdWU9e3sgcmVzZXRTeW1ib2wgfX0+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT0ncXVlcnktZm9ybScgY3NzPXtnZXRGb3JtU3R5bGUoaXNBdXRvSGVpZ2h0KX0+XG4gICAgICAgIDxkaXYgcmVmPXtmb3JtQ29udGVudFJlZn0gY2xhc3NOYW1lPSdxdWVyeS1mb3JtX19jb250ZW50JyBvbktleURvd249e2hhbmRsZUtleURvd259PlxuICAgICAgICAgIHtzaG93QXR0cmlidXRlRmlsdGVyICYmIChcbiAgICAgICAgICAgIDxkaXYgXG4gICAgICAgICAgICAgIHJvbGU9J2dyb3VwJyBcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPSdweC00JyBcbiAgICAgICAgICAgICAgY3NzPXtjc3NgcGFkZGluZy10b3A6IDJweDtgfVxuICAgICAgICAgICAgICBhcmlhLWxhYmVsPXthdHRyaWJ1dGVGaWx0ZXJMYWJlbH1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ2Zvcm0tdGl0bGUgZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlcicsIHsgJ2Qtbm9uZSc6ICFhdHRyaWJ1dGVGaWx0ZXJMYWJlbCAmJiAhYXR0cmlidXRlRmlsdGVyRGVzYyB9KX0gY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgbWFyZ2luLXRvcDogMDtcbiAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA0cHg7XG4gICAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICAgIHthdHRyaWJ1dGVGaWx0ZXJMYWJlbCAmJiA8ZGl2IGNsYXNzTmFtZT0nbXItMiB0aXRsZTInPnthdHRyaWJ1dGVGaWx0ZXJMYWJlbH08L2Rpdj59XG4gICAgICAgICAgICAgICAge2F0dHJpYnV0ZUZpbHRlckRlc2MgJiYgKFxuICAgICAgICAgICAgICAgICAgPFRvb2x0aXAgcGxhY2VtZW50PSdib3R0b20nIGNzcz17Y3NzYHdoaXRlLXNwYWNlOiBwcmUtbGluZTtgfSB0aXRsZT17YXR0cmlidXRlRmlsdGVyRGVzY30+XG4gICAgICAgICAgICAgICAgICAgIDxCdXR0b24gc2l6ZT0nc20nIGljb24gdHlwZT0ndGVydGlhcnknPjxJbmZvT3V0bGluZWQgY29sb3I9J3ZhcigtLXN5cy1jb2xvci1wcmltYXJ5LW1haW4pJyBzaXplPSdzJy8+PC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICA8L1Rvb2x0aXA+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIHtvcmlnaW5EUyAmJiAoXG4gICAgICAgICAgICAgICAgPGRpdiBjc3M9e2Nzc2BtYXJnaW46IC0xMHB4IDBweDtgfT5cbiAgICAgICAgICAgICAgICAgIDxTcWxFeHByZXNzaW9uUnVudGltZVxuICAgICAgICAgICAgICAgICAgICBrZXk9e2Ake2NvbmZpZ0lkfS0ke2luaXRpYWxJbnB1dFZhbHVlIHx8ICdub25lJ31gfVxuICAgICAgICAgICAgICAgICAgICB3aWRnZXRJZD17d2lkZ2V0SWR9XG4gICAgICAgICAgICAgICAgICAgIGRhdGFTb3VyY2U9e29yaWdpbkRTfVxuICAgICAgICAgICAgICAgICAgICBleHByZXNzaW9uPXthdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqfVxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17aGFuZGxlU3FsRXhwck9iakNoYW5nZX1cbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApfVxuICAgICAgICAgIHtzaG93QXR0cmlidXRlRmlsdGVyICYmIHNob3dTcGF0aWFsRmlsdGVyICYmIChcbiAgICAgICAgICAgIDxociBjbGFzc05hbWU9J20tNCcgY3NzPXtjc3NgYm9yZGVyOiBub25lOyBoZWlnaHQ6IDFweDsgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tc3lzLWNvbG9yLWRpdmlkZXItc2Vjb25kYXJ5KTtgfS8+XG4gICAgICAgICAgKX1cbiAgICAgICAgICB7c2hvd1NwYXRpYWxGaWx0ZXIgJiYgKFxuICAgICAgICAgICAgPFF1ZXJ5VGFza1NwYXRpYWxGb3JtXG4gICAgICAgICAgICAgIHdpZGdldElkPXt3aWRnZXRJZH1cbiAgICAgICAgICAgICAgbGFiZWw9e3NwYXRpYWxGaWx0ZXJMYWJlbH1cbiAgICAgICAgICAgICAgZGVzYz17c3BhdGlhbEZpbHRlckRlc2N9XG4gICAgICAgICAgICAgIGZpbHRlclR5cGVzPXtzcGF0aWFsRmlsdGVyVHlwZXN9XG4gICAgICAgICAgICAgIG1hcFdpZGdldElkcz17c3BhdGlhbE1hcFdpZGdldElkc31cbiAgICAgICAgICAgICAgY3JlYXRlVG9vbFR5cGVzPXtzcGF0aWFsSW50ZXJhY3RpdmVDcmVhdGVUb29sVHlwZXN9XG4gICAgICAgICAgICAgIG9uRmlsdGVyQ2hhbmdlPXtoYW5kbGVTcGF0aWFsRmlsdGVyQ2hhbmdlfVxuICAgICAgICAgICAgICBvblJlbGF0aW9uQ2hhbmdlPXtoYW5kbGVSZWxhdGlvbkNoYW5nZX1cbiAgICAgICAgICAgICAgb25CdWZmZXJDaGFuZ2U9e2hhbmRsZUJ1ZmZlckNoYW5nZX1cbiAgICAgICAgICAgICAgc3BhdGlhbFJlbGF0aW9ucz17c3BhdGlhbFJlbGF0aW9uc31cbiAgICAgICAgICAgICAgZHNFbmFibGVCdWZmZXI9e3NwYXRpYWxSZWxhdGlvbkVuYWJsZUJ1ZmZlcn1cbiAgICAgICAgICAgICAgZHNCdWZmZXJEaXN0YW5jZT17c3BhdGlhbFJlbGF0aW9uQnVmZmVyRGlzdGFuY2V9XG4gICAgICAgICAgICAgIGRzQnVmZmVyVW5pdD17c3BhdGlhbFJlbGF0aW9uQnVmZmVyVW5pdH1cbiAgICAgICAgICAgICAgZHJhd0VuYWJsZUJ1ZmZlcj17c3BhdGlhbEludGVyYWN0aXZlRW5hYmxlQnVmZmVyfVxuICAgICAgICAgICAgICBkcmF3QnVmZmVyRGlzdGFuY2U9e3NwYXRpYWxJbnRlcmFjdGl2ZUJ1ZmZlckRpc3RhbmNlfVxuICAgICAgICAgICAgICBkcmF3QnVmZmVyVW5pdD17c3BhdGlhbEludGVyYWN0aXZlQnVmZmVyVW5pdH1cbiAgICAgICAgICAgICAgdXNlRGF0YVNvdXJjZXM9e3NwYXRpYWxSZWxhdGlvblVzZURhdGFTb3VyY2VzfVxuICAgICAgICAgICAgICB1c2VSdW50aW1lRGF0YT17c3BhdGlhbEluY2x1ZGVSdW50aW1lRGF0YX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSdxdWVyeS1mb3JtX19hY3Rpb25zIHB4LTQgZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlcic+XG4gICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICBjaGVja2VkPXtydW50aW1lWm9vbVRvU2VsZWN0ZWR9XG4gICAgICAgICAgICBvbkNoYW5nZT17KF8sIGNoZWNrZWQpID0+IHNldFJ1bnRpbWVab29tVG9TZWxlY3RlZChjaGVja2VkKX1cbiAgICAgICAgICAgIGNsYXNzTmFtZT0nbXItMidcbiAgICAgICAgICAvPlxuICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0nbXItYXV0bycgY3NzPXtjc3NgZm9udC1zaXplOiAwLjg3NXJlbTsgY29sb3I6IHZhcigtLXN5cy1jb2xvci10ZXh0LXByaW1hcnkpO2B9PlxuICAgICAgICAgICAge2dldEkxOG5NZXNzYWdlKCd6b29tVG9TZWxlY3RlZCcpfVxuICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICA8QnV0dG9uIHJlZj17YXBwbHlCdXR0b25SZWZ9IGNvbG9yPSdwcmltYXJ5JyBjbGFzc05hbWU9J21sLWF1dG8nIGRpc2FibGVkPXshZGF0YXNvdXJjZVJlYWR5IHx8ICFpc0lucHV0VmFsaWR9IG9uQ2xpY2s9e2FwcGx5UXVlcnl9PlxuICAgICAgICAgICAge2dldEkxOG5NZXNzYWdlKCdhcHBseScpfVxuICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgIHsoc2hvd0NsYXVzZU51bWJlci5jdXJyZW50ID4gMCB8fCBzaG93U3BhdGlhbEZpbHRlcikgJiYgKFxuICAgICAgICAgICAgPEJ1dHRvbiBjbGFzc05hbWU9J21sLTInIG9uQ2xpY2s9e3Jlc2V0UXVlcnl9PntnZXRJMThuTWVzc2FnZSgncmVzZXQnKX08L0J1dHRvbj5cbiAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvUXVlcnlUYXNrQ29udGV4dC5Qcm92aWRlcj5cbiAgKVxufVxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQgeyBqc3gsIGNzcywgdHlwZSBJY29uUmVzdWx0LCB0eXBlIEltbXV0YWJsZU9iamVjdCB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IEljb24gfSBmcm9tICdqaW11LXVpJ1xuXG5pbnRlcmZhY2UgQ29udGVudFByb3BzIHtcbiAgaWNvbj86IEljb25SZXN1bHQgfCBJbW11dGFibGVPYmplY3Q8SWNvblJlc3VsdD5cbiAgbmFtZTogc3RyaW5nXG59XG5cbmNvbnN0IHRleHRTdHlsZSA9IGNzc2BcbiAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgZm9udC1zaXplOiAwLjg3NXJlbTtcbmBcblxuZXhwb3J0IGZ1bmN0aW9uIFF1ZXJ5VGFza0xhYmVsIChwcm9wczogQ29udGVudFByb3BzKSB7XG4gIGNvbnN0IHsgaWNvbiwgbmFtZSB9ID0gcHJvcHNcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPSdkLWZsZXggYWxpZ24taXRlbXMtY2VudGVyIHRleHQtdHJ1bmNhdGUnIGNzcz17dGV4dFN0eWxlfT5cbiAgICAgIHtpY29uICYmIDxJY29uIGNsYXNzTmFtZT0ncXVlcnktdGFzay1pY29uIG1yLTInIGljb249e2ljb24uc3ZnfSAvPn1cbiAgICAgIDxkaXYgY2xhc3NOYW1lPSd0ZXh0LXRydW5jYXRlJyB0aXRsZT17bmFtZX0+XG4gICAgICAgIHtuYW1lfVxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIClcbn1cblxuXG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7IGpzeCwgY3NzLCBSZWFjdCwgdHlwZSBJbW11dGFibGVBcnJheSwgY2xhc3NOYW1lcywgbG9kYXNoLCBob29rcyB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB0eXBlIHsgU2l6ZSB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQgdHlwZSB7IFF1ZXJ5SXRlbVR5cGUgfSBmcm9tICcuLi9jb25maWcnXG5pbXBvcnQgeyBRdWVyeVRhc2sgfSBmcm9tICcuL3F1ZXJ5LXRhc2snXG5pbXBvcnQgeyBRdWVyeVRhc2tMaXN0IH0gZnJvbSAnLi9xdWVyeS10YXNrLWxpc3QnXG5pbXBvcnQgeyBUYXNrTGlzdFBvcHBlcldyYXBwZXIgfSBmcm9tICcuL3F1ZXJ5LXRhc2stbGlzdC1wb3BwZXItd3JhcHBlcidcbmltcG9ydCB7IGdldFdpZGdldFJ1bnRpbWVEYXRhTWFwIH0gZnJvbSAnLi93aWRnZXQtY29uZmlnJ1xuaW1wb3J0IHsgREVGQVVMVF9RVUVSWV9JVEVNIH0gZnJvbSAnLi4vZGVmYXVsdC1xdWVyeS1pdGVtJ1xuXG5jb25zdCB7IGljb25NYXAgfSA9IGdldFdpZGdldFJ1bnRpbWVEYXRhTWFwKClcblxuZXhwb3J0IGludGVyZmFjZSBRdWVyeVRhc2tMaXN0UHJvcHMge1xuICB3aWRnZXRJZDogc3RyaW5nXG4gIHdpZGdldExhYmVsOiBzdHJpbmdcbiAgd3JhcDogYm9vbGVhblxuICBtaW5TaXplOiBTaXplXG4gIGRlZmF1bHRTaXplOiBTaXplXG4gIHF1ZXJ5SXRlbXM6IEltbXV0YWJsZUFycmF5PFF1ZXJ5SXRlbVR5cGU+XG4gIGRlZmF1bHRQYWdlU2l6ZT86IG51bWJlclxuICBpbml0aWFsUXVlcnlWYWx1ZT86IHsgc2hvcnRJZDogc3RyaW5nLCB2YWx1ZTogc3RyaW5nIH1cbiAgb25IYXNoUGFyYW1ldGVyVXNlZD86IChzaG9ydElkOiBzdHJpbmcpID0+IHZvaWRcbn1cblxuY29uc3QgU1BBQ0UgPSA4XG5cbmNvbnN0IHN0eWxlID0gY3NzYFxuICA+IGRpdiB7XG4gICAgbWFyZ2luLXJpZ2h0OiA4cHg7XG4gIH1cbmBcblxuLy8gc2hvdyB0YXNrIGxhYmVsIGFuZCBhbiBhcnJvdyB0byB0aGUgdGFzayBjb250ZW50XG5leHBvcnQgZnVuY3Rpb24gVGFza0xpc3RJbmxpbmUgKHByb3BzOiBRdWVyeVRhc2tMaXN0UHJvcHMpIHtcbiAgY29uc3QgeyBxdWVyeUl0ZW1zLCB3aWRnZXRJZCwgbWluU2l6ZSwgZGVmYXVsdFNpemUsIGRlZmF1bHRQYWdlU2l6ZSwgd2lkZ2V0TGFiZWwsIHdyYXAgPSBmYWxzZSB9ID0gcHJvcHNcbiAgY29uc3QgY29udGFpbmVyUmVmID0gUmVhY3QudXNlUmVmPEhUTUxEaXZFbGVtZW50Pih1bmRlZmluZWQpXG4gIGNvbnN0IGNvbnRhaW5lcldpZHRoUmVmID0gUmVhY3QudXNlUmVmPG51bWJlcj4oMClcbiAgY29uc3QgY29udGVudFdpZHRoUmVmID0gUmVhY3QudXNlUmVmPHsgW2tleTogc3RyaW5nXTogbnVtYmVyIH0+KHt9KVxuICBjb25zdCBbbnVtT2ZFeHBhbmRlZCwgc2V0TnVtT2ZFeHBhbmRlZF0gPSBSZWFjdC51c2VTdGF0ZShxdWVyeUl0ZW1zLmxlbmd0aClcbiAgY29uc3QgW29wZW5lZFBvcHBlciwgc2V0T3BlbmVkUG9wcGVyXSA9IFJlYWN0LnVzZVN0YXRlKC0xKVxuICBjb25zdCByZXNpemVPYnNlcnZlclJlZiA9IFJlYWN0LnVzZVJlZjxSZXNpemVPYnNlcnZlcj4obnVsbClcblxuICBjb25zdCBhZGp1c3RDb250ZW50ID0gUmVhY3QudXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGxldCB0b3RhbCA9IDBcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bU9mRXhwYW5kZWQ7IGkrKykge1xuICAgICAgY29uc3QgaXRlbSA9IHF1ZXJ5SXRlbXNbaV1cbiAgICAgIGNvbnN0IGl0ZW1XaWR0aCA9IGNvbnRlbnRXaWR0aFJlZi5jdXJyZW50W2l0ZW0uY29uZmlnSWRdXG4gICAgICBpZiAoaXRlbVdpZHRoID4gMCkge1xuICAgICAgICB0b3RhbCArPSBpdGVtV2lkdGggKyBTUEFDRVxuICAgICAgICBpZiAodG90YWwgPj0gY29udGFpbmVyV2lkdGhSZWYuY3VycmVudCAmJiBudW1PZkV4cGFuZGVkICE9PSBpKSB7XG4gICAgICAgICAgc2V0TnVtT2ZFeHBhbmRlZChpKVxuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gLy8gY29udGVudCB3aWR0aCBub3QgcmVhZHlcbiAgICAgIH1cbiAgICB9XG4gICAgc2V0TnVtT2ZFeHBhbmRlZChxdWVyeUl0ZW1zLmxlbmd0aClcbiAgfSwgW251bU9mRXhwYW5kZWQsIHF1ZXJ5SXRlbXNdKVxuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHJlc2l6ZU9ic2VydmVyUmVmLmN1cnJlbnQpIHtcbiAgICAgIHJlc2l6ZU9ic2VydmVyUmVmLmN1cnJlbnQuZGlzY29ubmVjdCgpXG4gICAgfVxuICAgIC8vIGJpbmQgd2l0aCB0aGUgbmV3IGV2ZW50IGhhbmRsZXJcbiAgICByZXNpemVPYnNlcnZlclJlZi5jdXJyZW50ID0gbmV3IFJlc2l6ZU9ic2VydmVyKGxvZGFzaC50aHJvdHRsZSgoZW50cmllcykgPT4ge1xuICAgICAgY29uc3Qgd2lkdGggPSBNYXRoLnJvdW5kKGVudHJpZXNbMF0uY29udGVudFJlY3Qud2lkdGgpXG4gICAgICBpZiAoY29udGFpbmVyV2lkdGhSZWYuY3VycmVudCAhPT0gd2lkdGgpIHtcbiAgICAgICAgY29udGFpbmVyV2lkdGhSZWYuY3VycmVudCA9IHdpZHRoXG4gICAgICAgIGFkanVzdENvbnRlbnQoKVxuICAgICAgfVxuICAgIH0sIDIwMCkpXG4gICAgcmVzaXplT2JzZXJ2ZXJSZWYuY3VycmVudC5vYnNlcnZlKGNvbnRhaW5lclJlZi5jdXJyZW50KVxuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHJlc2l6ZU9ic2VydmVyUmVmLmN1cnJlbnQuZGlzY29ubmVjdCgpXG4gICAgfVxuICB9LCBbYWRqdXN0Q29udGVudF0pXG5cbiAgaG9va3MudXNlRWZmZWN0T25jZSgoKSA9PiB7XG4gICAgY29udGFpbmVyV2lkdGhSZWYuY3VycmVudCA9IGNvbnRhaW5lclJlZi5jdXJyZW50Py5jbGllbnRXaWR0aFxuICAgIGFkanVzdENvbnRlbnQoKVxuICB9KVxuXG4gIGNvbnN0IGhhbmRsZUl0ZW1XaWR0aENoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKChpbmRleDogbnVtYmVyLCB3aWR0aDogbnVtYmVyKSA9PiB7XG4gICAgY29uc3QgcXVlcnlJdGVtID0gcXVlcnlJdGVtc1tpbmRleF1cbiAgICBpZiAoY29udGVudFdpZHRoUmVmLmN1cnJlbnRbcXVlcnlJdGVtLmNvbmZpZ0lkXSAhPT0gd2lkdGgpIHtcbiAgICAgIGNvbnRlbnRXaWR0aFJlZi5jdXJyZW50W3F1ZXJ5SXRlbS5jb25maWdJZF0gPSB3aWR0aFxuICAgICAgYWRqdXN0Q29udGVudCgpXG4gICAgfVxuICB9LCBbcXVlcnlJdGVtcywgYWRqdXN0Q29udGVudF0pXG5cbiAgY29uc3QgaGFuZGxlUG9wcGVyT3BlbmVkQ2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soKGluZGV4OiBudW1iZXIsIGlzT3BlbjogYm9vbGVhbikgPT4ge1xuICAgIGlmIChpc09wZW4pIHtcbiAgICAgIHNldE9wZW5lZFBvcHBlcihpbmRleClcbiAgICB9IGVsc2UgaWYgKGluZGV4ID09PSBvcGVuZWRQb3BwZXIpIHtcbiAgICAgIC8vIGN1cnJlbnQgcG9wcGVyIGlzIGNsb3NlZFxuICAgICAgc2V0T3BlbmVkUG9wcGVyKC0xKVxuICAgIH1cbiAgfSwgW29wZW5lZFBvcHBlcl0pXG5cbiAgY29uc3QgW2V4cGFuZGVkQXJyYXksIG5vbkV4cGFuZGVkQXJyYXldID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgY29uc3QgZXhwYW5kZWRBcnJheSA9IFtdXG4gICAgY29uc3Qgbm9uRXhwYW5kZWRBcnJheSA9IFtdXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBxdWVyeUl0ZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoaSA8IG51bU9mRXhwYW5kZWQpIHtcbiAgICAgICAgZXhwYW5kZWRBcnJheS5wdXNoKHF1ZXJ5SXRlbXNbaV0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBub25FeHBhbmRlZEFycmF5LnB1c2gocXVlcnlJdGVtc1tpXSlcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIFtleHBhbmRlZEFycmF5LCBub25FeHBhbmRlZEFycmF5XVxuICB9LCBbcXVlcnlJdGVtcywgbnVtT2ZFeHBhbmRlZF0pXG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IHJlZj17Y29udGFpbmVyUmVmfSBjc3M9e3N0eWxlfSBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ3J1bnRpbWUtcXVlcnlfX3F1ZXJ5LWxpc3QgaC0xMDAgZC1mbGV4JywgeyAnZmxleC13cmFwJzogd3JhcCwgJ2FsaWduLWNvbnRlbnQtc3RhcnQnOiB3cmFwIH0pfT5cbiAgICAgIHtleHBhbmRlZEFycmF5Lm1hcCgocXVlcnlJdGVtLCBpbmRleCkgPT4ge1xuICAgICAgICBjb25zdCBjdXJyZW50SXRlbSA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfUVVFUllfSVRFTSwgcXVlcnlJdGVtKVxuICAgICAgICByZXR1cm4gPFRhc2tMaXN0UG9wcGVyV3JhcHBlclxuICAgICAgICAgIGlkPXtpbmRleH1cbiAgICAgICAgICBrZXk9e2N1cnJlbnRJdGVtLmNvbmZpZ0lkfVxuICAgICAgICAgIGljb249e2N1cnJlbnRJdGVtLmljb259XG4gICAgICAgICAgYnV0dG9uVHlwZT0nZGVmYXVsdCdcbiAgICAgICAgICBsYWJlbD17Y3VycmVudEl0ZW0uZGlzcGxheUxhYmVsID8gY3VycmVudEl0ZW0ubmFtZSA6IHVuZGVmaW5lZH1cbiAgICAgICAgICBwb3BwZXJUaXRsZT17Y3VycmVudEl0ZW0ubmFtZX1cbiAgICAgICAgICBvbldpZHRoQ2hhbmdlPXtoYW5kbGVJdGVtV2lkdGhDaGFuZ2V9XG4gICAgICAgICAgbWluU2l6ZT17bWluU2l6ZX1cbiAgICAgICAgICBkZWZhdWx0U2l6ZT17ZGVmYXVsdFNpemV9XG4gICAgICAgICAgb25PcGVuZWRDaGFuZ2U9e2hhbmRsZVBvcHBlck9wZW5lZENoYW5nZX1cbiAgICAgICAgICBmb3JjZUNsb3NlPXtvcGVuZWRQb3BwZXIgPj0gMCAmJiBvcGVuZWRQb3BwZXIgIT09IGluZGV4fVxuICAgICAgICA+XG4gICAgICAgICAgPFF1ZXJ5VGFza1xuICAgICAgICAgICAgd2lkZ2V0SWQ9e3dpZGdldElkfVxuICAgICAgICAgICAgaW5kZXg9e2luZGV4fVxuICAgICAgICAgICAgdG90YWw9ezF9XG4gICAgICAgICAgICBpc0luUG9wcGVyXG4gICAgICAgICAgICBxdWVyeUl0ZW09e2N1cnJlbnRJdGVtfVxuICAgICAgICAgICAgd3JhcHBlZEluUG9wcGVyPXt0cnVlfVxuICAgICAgICAgICAgY2xhc3NOYW1lPSdwYi00J1xuICAgICAgICAgICAgZGVmYXVsdFBhZ2VTaXplPXtkZWZhdWx0UGFnZVNpemV9XG4gICAgICAgICAgICBpbml0aWFsSW5wdXRWYWx1ZT17Y3VycmVudEl0ZW0uc2hvcnRJZCA9PT0gcHJvcHMuaW5pdGlhbFF1ZXJ5VmFsdWU/LnNob3J0SWQgPyBwcm9wcy5pbml0aWFsUXVlcnlWYWx1ZS52YWx1ZSA6IHVuZGVmaW5lZH1cbiAgICAgICAgICAgIG9uSGFzaFBhcmFtZXRlclVzZWQ9e3Byb3BzLm9uSGFzaFBhcmFtZXRlclVzZWR9XG4gICAgICAgICAgICBxdWVyeUl0ZW1TaG9ydElkPXtjdXJyZW50SXRlbS5zaG9ydElkfVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvVGFza0xpc3RQb3BwZXJXcmFwcGVyPlxuICAgICAgfSl9XG5cbiAgICAgIHtub25FeHBhbmRlZEFycmF5Lmxlbmd0aCA+IDAgJiYgKFxuICAgICAgICA8VGFza0xpc3RQb3BwZXJXcmFwcGVyXG4gICAgICAgICAgaWQ9e2V4cGFuZGVkQXJyYXkubGVuZ3RoICsgMX1cbiAgICAgICAgICBpY29uPXtpY29uTWFwLmljb25Nb3JlfVxuICAgICAgICAgIG1pblNpemU9e21pblNpemV9XG4gICAgICAgICAgYnV0dG9uVHlwZT0nZGVmYXVsdCdcbiAgICAgICAgICBwb3BwZXJUaXRsZT17d2lkZ2V0TGFiZWx9XG4gICAgICAgICAgZGVmYXVsdFNpemU9e2RlZmF1bHRTaXplfVxuICAgICAgICAgIG9uT3BlbmVkQ2hhbmdlPXtoYW5kbGVQb3BwZXJPcGVuZWRDaGFuZ2V9XG4gICAgICAgICAgZm9yY2VDbG9zZT17b3BlbmVkUG9wcGVyID49IDAgJiYgb3BlbmVkUG9wcGVyICE9PSBleHBhbmRlZEFycmF5Lmxlbmd0aCArIDF9XG4gICAgICAgID5cbiAgICAgICAgICA8UXVlcnlUYXNrTGlzdCB3aWRnZXRJZD17d2lkZ2V0SWR9IGlzSW5Qb3BwZXIgZGVmYXVsdFBhZ2VTaXplPXtkZWZhdWx0UGFnZVNpemV9IHF1ZXJ5SXRlbXM9e25vbkV4cGFuZGVkQXJyYXkgYXMgYW55fSBjbGFzc05hbWU9J3BiLTQnIGluaXRpYWxRdWVyeVZhbHVlPXtwcm9wcy5pbml0aWFsUXVlcnlWYWx1ZX0gb25IYXNoUGFyYW1ldGVyVXNlZD17cHJvcHMub25IYXNoUGFyYW1ldGVyVXNlZH0gLz5cbiAgICAgICAgPC9UYXNrTGlzdFBvcHBlcldyYXBwZXI+XG4gICAgICApfVxuICAgIDwvZGl2PlxuICApXG59XG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7IGpzeCwgY3NzLCBSZWFjdCwgdHlwZSBJY29uUmVzdWx0LCB0eXBlIEltbXV0YWJsZU9iamVjdCwgbG9kYXNoLCBjbGFzc05hbWVzLCBob29rcywgaXNLZXlib2FyZE1vZGUsIGZvY3VzRWxlbWVudEluS2V5Ym9hcmRNb2RlIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgQnV0dG9uLCBJY29uLCBNb2JpbGVQYW5lbCwgdHlwZSBTaXplLCB0eXBlIEJ1dHRvblR5cGUsIEZPQ1VTQUJMRV9DT05UQUlORVJfQ0xBU1MsIEZsb2F0aW5nUGFuZWwsIHR5cGUgU2hpZnRPcHRpb25zIH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB7IFdJREdFVF9WRVJTSU9OIH0gZnJvbSAnLi4vdmVyc2lvbidcblxuZXhwb3J0IGludGVyZmFjZSBUYXNrTGlzdFBvcHBlcldyYXBwZXJQcm9wcyB7XG4gIGlkOiBudW1iZXJcbiAgaWNvbj86IHN0cmluZyB8IEltbXV0YWJsZU9iamVjdDxJY29uUmVzdWx0PlxuICBsYWJlbD86IHN0cmluZ1xuICBmb3JjZUNsb3NlPzogYm9vbGVhblxuICBwb3BwZXJUaXRsZT86IHN0cmluZ1xuICBidXR0b25UeXBlPzogQnV0dG9uVHlwZVxuICBvbldpZHRoQ2hhbmdlPzogKGlkOiBudW1iZXIsIHdpZHRoOiBudW1iZXIpID0+IHZvaWRcbiAgb25PcGVuZWRDaGFuZ2U/OiAoaWQ6IG51bWJlciwgaXNPcGVuOiBib29sZWFuKSA9PiB2b2lkXG4gIG1pblNpemU6IFNpemVcbiAgZGVmYXVsdFNpemU6IFNpemVcbiAgY2hpbGRyZW46IFJlYWN0LlJlYWN0RWxlbWVudDxhbnk+XG59XG5cbmNvbnN0IHNoaWZ0T3B0aW9uczogU2hpZnRPcHRpb25zID0geyBwYWRkaW5nOiAxIH1cblxuZXhwb3J0IGZ1bmN0aW9uIFRhc2tMaXN0UG9wcGVyV3JhcHBlciAocHJvcHM6IFRhc2tMaXN0UG9wcGVyV3JhcHBlclByb3BzKSB7XG4gIGNvbnN0IHsgaWQsIGljb24sIGxhYmVsLCBmb3JjZUNsb3NlLCBvbk9wZW5lZENoYW5nZSwgcG9wcGVyVGl0bGUsIG1pblNpemUsIGRlZmF1bHRTaXplLCBvbldpZHRoQ2hhbmdlLCBidXR0b25UeXBlID0gJ3RlcnRpYXJ5JywgY2hpbGRyZW4gfSA9IHByb3BzXG4gIGNvbnN0IGljb25SZWYgPSBSZWFjdC51c2VSZWY8SFRNTEJ1dHRvbkVsZW1lbnQ+KHVuZGVmaW5lZClcbiAgY29uc3Qgd2lkdGhSZWYgPSBSZWFjdC51c2VSZWYoMClcbiAgY29uc3QgW2lzT3Blbiwgc2V0SXNPcGVuXSA9IFJlYWN0LnVzZVN0YXRlKGZhbHNlKVxuICBjb25zdCBbcG9wcGVyVmVyc2lvbiwgc2V0UG9wcGVyVmVyc2lvbl0gPSBSZWFjdC51c2VTdGF0ZSgwKVxuICBjb25zdCBpc01vYmlsZSA9IGhvb2tzLnVzZUNoZWNrU21hbGxCcm93c2VyU2l6ZU1vZGUoKVxuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGZvcmNlQ2xvc2UpIHtcbiAgICAgIHNldElzT3BlbihmYWxzZSlcbiAgICB9XG4gIH0sIFtmb3JjZUNsb3NlXSlcblxuICBob29rcy51c2VFZmZlY3RPbmNlKCgpID0+IHtcbiAgICBpZiAodHlwZW9mIG9uV2lkdGhDaGFuZ2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHdpZHRoUmVmLmN1cnJlbnQgPSBNYXRoLnJvdW5kKGljb25SZWYuY3VycmVudC5jbGllbnRXaWR0aClcbiAgICAgIG9uV2lkdGhDaGFuZ2UoaWQsIHdpZHRoUmVmLmN1cnJlbnQpXG4gICAgICBjb25zdCByZXNpemVPYnNlcnZlciA9IG5ldyBSZXNpemVPYnNlcnZlcihsb2Rhc2gudGhyb3R0bGUoKGVudHJpZXMpID0+IHtcbiAgICAgICAgY29uc3Qgd2lkdGggPSBNYXRoLnJvdW5kKGVudHJpZXNbMF0uY29udGVudFJlY3Qud2lkdGgpXG4gICAgICAgIGlmICh3aWR0aFJlZi5jdXJyZW50ICE9PSB3aWR0aCkge1xuICAgICAgICAgIHdpZHRoUmVmLmN1cnJlbnQgPSB3aWR0aFxuICAgICAgICAgIG9uV2lkdGhDaGFuZ2UoaWQsIHdpZHRoKVxuICAgICAgICB9XG4gICAgICB9LCAyMDApKVxuICAgICAgcmVzaXplT2JzZXJ2ZXIub2JzZXJ2ZShpY29uUmVmLmN1cnJlbnQpXG5cbiAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgIHJlc2l6ZU9ic2VydmVyLmRpc2Nvbm5lY3QoKVxuICAgICAgfVxuICAgIH1cbiAgfSlcblxuICBjb25zdCB0b2dnbGVQb3BwZXIgPSBSZWFjdC51c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgaWYgKHR5cGVvZiBvbk9wZW5lZENoYW5nZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgb25PcGVuZWRDaGFuZ2UoaWQsICFpc09wZW4pXG4gICAgfVxuICAgIHNldElzT3BlbighaXNPcGVuKVxuICAgIHNldFBvcHBlclZlcnNpb24ocG9wcGVyVmVyc2lvbiArIDEpXG4gICAgaWYgKGlzT3Blbikge1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGlmIChpc0tleWJvYXJkTW9kZSgpKSB7XG4gICAgICAgICAgZm9jdXNFbGVtZW50SW5LZXlib2FyZE1vZGUoaWNvblJlZi5jdXJyZW50KVxuICAgICAgICB9XG4gICAgICB9LCAyMDApXG4gICAgfVxuICB9LCBbaWQsIGlzT3BlbiwgcG9wcGVyVmVyc2lvbiwgb25PcGVuZWRDaGFuZ2VdKVxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9J3J1bnRpbWUtcXVlcnlfX3dpZGdldC1wb3BwZXInPlxuICAgICAgPEJ1dHRvblxuICAgICAgICB0aXRsZT17bGFiZWx9XG4gICAgICAgIGFyaWEtbGFiZWw9e2xhYmVsfVxuICAgICAgICBpY29uIHNpemU9J3NtJ1xuICAgICAgICB2YXJpYW50PXtidXR0b25UeXBlID09PSAndGVydGlhcnknID8gJ3RleHQnIDogdW5kZWZpbmVkfVxuICAgICAgICBjb2xvcj17YnV0dG9uVHlwZSA9PT0gJ3RlcnRpYXJ5JyA/ICdpbmhlcml0JyA6IHVuZGVmaW5lZH1cbiAgICAgICAgdHlwZT17YnV0dG9uVHlwZSA9PT0gJ3RlcnRpYXJ5JyA/IHVuZGVmaW5lZCA6IGJ1dHRvblR5cGV9XG4gICAgICAgIHJlZj17aWNvblJlZn1cbiAgICAgICAgb25DbGljaz17dG9nZ2xlUG9wcGVyfVxuICAgICAgPlxuICAgICAgICB7aWNvbiAmJiA8SWNvblxuICAgICAgICAgIHNpemU9ezE2fVxuICAgICAgICAgIHsuLi4odHlwZW9mIGljb24gPT09ICdzdHJpbmcnID8geyBpY29uIH0gOiB7IGljb246IGljb24uc3ZnLCBjb2xvcjogYnV0dG9uVHlwZSA9PT0gJ3RlcnRpYXJ5JyA/IHVuZGVmaW5lZCA6IGljb24ucHJvcGVydGllcy5jb2xvciB9KX1cbiAgICAgICAgLz59XG4gICAgICAgIHtsYWJlbCAmJiA8ZGl2XG4gICAgICAgICAgY3NzPXtjc3NgXG4gICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICAgICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gICAgICAgICAgICBkaXNwbGF5OiAtd2Via2l0LWJveDtcbiAgICAgICAgICAgIC13ZWJraXQtbGluZS1jbGFtcDogMjtcbiAgICAgICAgICAgIC13ZWJraXQtYm94LW9yaWVudDogdmVydGljYWw7XG4gICAgICAgICAgICB3b3JkLWJyZWFrOiBicmVhay13b3JkO1xuICAgICAgICAgICAgd29yZC13cmFwOiBicmVhay13b3JkO1xuICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEuMjtcbiAgICAgICAgICBgfVxuICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcyh7ICdtbC0yJzogaWNvbiAhPSBudWxsIH0pfT57bGFiZWx9PC9kaXY+fVxuICAgICAgPC9CdXR0b24+XG4gICAgICB7aXNNb2JpbGVcbiAgICAgICAgPyA8TW9iaWxlUGFuZWwgb3Blbj17aXNPcGVufSB0aXRsZT17cG9wcGVyVGl0bGV9IG9uQ2xvc2U9e3RvZ2dsZVBvcHBlcn0+XG4gICAgICAgICAgICA8ZGl2IGNzcz17Y3NzYFxuICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgPGRpdiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICBmbGV4OiAxO1xuICAgICAgICAgICAgICAgIG92ZXJmbG93OiBhdXRvO1xuICAgICAgICAgICAgICAgIHBhZGRpbmctYm90dG9tOiAxcmVtOyAvKiBTY29wZWQgcGFkZGluZyB0byBzcGFjZSBjb250ZW50IGZyb20gZm9vdGVyICovXG4gICAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICAgIHtjaGlsZHJlbn1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIHsvKiBTdGF0aW9uYXJ5IGZvb3RlciAqL31cbiAgICAgICAgICAgICAgPGRpdiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiA0cHggMTJweDtcbiAgICAgICAgICAgICAgICBib3JkZXItdG9wOiAxcHggc29saWQgdmFyKC0tc3lzLWNvbG9yLWRpdmlkZXItc2Vjb25kYXJ5KTtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1zeXMtY29sb3Itc3VyZmFjZS1wYXBlcik7XG4gICAgICAgICAgICAgICAgZmxleC1zaHJpbms6IDA7XG4gICAgICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgICA8c3BhbiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC43NXJlbTtcbiAgICAgICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS1zeXMtY29sb3ItdGV4dC10ZXJ0aWFyeSk7XG4gICAgICAgICAgICAgICAgICBmb250LXdlaWdodDogNDAwO1xuICAgICAgICAgICAgICAgICAgbGV0dGVyLXNwYWNpbmc6IDAuMDI1ZW07XG4gICAgICAgICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtZmxleDtcbiAgICAgICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgICAgICAgICBnYXA6IDRweDtcbiAgICAgICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgICAgIHsvKiBDb2RlL09wZW4gU291cmNlIFN5bWJvbCAqL31cbiAgICAgICAgICAgICAgICAgIDxzdmcgXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoPVwiMTRcIiBcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0PVwiMTRcIiBcbiAgICAgICAgICAgICAgICAgICAgdmlld0JveD1cIjAgMCAyNCAyNFwiIFxuICAgICAgICAgICAgICAgICAgICBmaWxsPVwibm9uZVwiIFxuICAgICAgICAgICAgICAgICAgICBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBcbiAgICAgICAgICAgICAgICAgICAgc3Ryb2tlV2lkdGg9XCIyXCJcbiAgICAgICAgICAgICAgICAgICAgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICAgICAgZmxleC1zaHJpbms6IDA7XG4gICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMC42O1xuICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8cG9seWxpbmUgcG9pbnRzPVwiMTYgMTggMjIgMTIgMTYgNlwiLz5cbiAgICAgICAgICAgICAgICAgICAgPHBvbHlsaW5lIHBvaW50cz1cIjggNiAyIDEyIDggMThcIi8+XG4gICAgICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgICAgICAgIFF1ZXJ5U2ltcGxlIGJ5IE1hcFNpbXBsZVxuICAgICAgICAgICAgICAgICAgPHNwYW4gY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiA2cHg7XG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAuNTtcbiAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjdyZW07XG4gICAgICAgICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgICAgICAgdntXSURHRVRfVkVSU0lPTn1cbiAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9Nb2JpbGVQYW5lbD5cbiAgICAgICAgOiA8RmxvYXRpbmdQYW5lbFxuICAgICAgICAgICAgY2xhc3NOYW1lPSd1aS11bml0LXBvcHBlciB1aS11bml0LXBvcHBlcl9rLWFycmFuZ2VtZW50LWljb24gZmxleC1ncm93LTEnXG4gICAgICAgICAgICBoZWFkZXJDbGFzc05hbWU9e0ZPQ1VTQUJMRV9DT05UQUlORVJfQ0xBU1N9XG4gICAgICAgICAgICBvcGVuPXtpc09wZW59XG4gICAgICAgICAgICBvbkhlYWRlckNsb3NlPXt0b2dnbGVQb3BwZXJ9XG4gICAgICAgICAgICB0b2dnbGU9e3RvZ2dsZVBvcHBlcn1cbiAgICAgICAgICAgIGhlYWRlclRpdGxlPXtwb3BwZXJUaXRsZX1cbiAgICAgICAgICAgIG1pblNpemU9e21pblNpemV9XG4gICAgICAgICAgICBkZWZhdWx0U2l6ZT17ZGVmYXVsdFNpemV9XG4gICAgICAgICAgICBkcmFnQm91bmRzPSdib2R5J1xuICAgICAgICAgICAgdmVyc2lvbj17cG9wcGVyVmVyc2lvbn1cbiAgICAgICAgICAgIHJlZmVyZW5jZT17aWNvblJlZn1cbiAgICAgICAgICAgIHBsYWNlbWVudD0nYm90dG9tLXN0YXJ0J1xuICAgICAgICAgICAgc2hpZnRPcHRpb25zPXtzaGlmdE9wdGlvbnN9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgPGRpdiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgIDxkaXYgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICAgICAgICBvdmVyZmxvdzogYXV0bztcbiAgICAgICAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogMXJlbTsgLyogU2NvcGVkIHBhZGRpbmcgdG8gc3BhY2UgY29udGVudCBmcm9tIGZvb3RlciAqL1xuICAgICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgICB7Y2hpbGRyZW59XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICB7LyogU3RhdGlvbmFyeSBmb290ZXIgKi99XG4gICAgICAgICAgICAgIDxkaXYgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgcGFkZGluZzogNHB4IDEycHg7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkIHZhcigtLXN5cy1jb2xvci1kaXZpZGVyLXNlY29uZGFyeSk7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tc3lzLWNvbG9yLXN1cmZhY2UtcGFwZXIpO1xuICAgICAgICAgICAgICAgIGZsZXgtc2hyaW5rOiAwO1xuICAgICAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAgPHNwYW4gY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICBmb250LXNpemU6IDAuNzVyZW07XG4gICAgICAgICAgICAgICAgICBjb2xvcjogdmFyKC0tc3lzLWNvbG9yLXRleHQtdGVydGlhcnkpO1xuICAgICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDQwMDtcbiAgICAgICAgICAgICAgICAgIGxldHRlci1zcGFjaW5nOiAwLjAyNWVtO1xuICAgICAgICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWZsZXg7XG4gICAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgICAgICAgICAgZ2FwOiA0cHg7XG4gICAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAgICB7LyogQ29kZS9PcGVuIFNvdXJjZSBTeW1ib2wgKi99XG4gICAgICAgICAgICAgICAgICA8c3ZnIFxuICAgICAgICAgICAgICAgICAgICB3aWR0aD1cIjE0XCIgXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodD1cIjE0XCIgXG4gICAgICAgICAgICAgICAgICAgIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBcbiAgICAgICAgICAgICAgICAgICAgZmlsbD1cIm5vbmVcIiBcbiAgICAgICAgICAgICAgICAgICAgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgXG4gICAgICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoPVwiMlwiXG4gICAgICAgICAgICAgICAgICAgIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgICAgICAgIGZsZXgtc2hyaW5rOiAwO1xuICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAuNjtcbiAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPHBvbHlsaW5lIHBvaW50cz1cIjE2IDE4IDIyIDEyIDE2IDZcIi8+XG4gICAgICAgICAgICAgICAgICAgIDxwb2x5bGluZSBwb2ludHM9XCI4IDYgMiAxMiA4IDE4XCIvPlxuICAgICAgICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICAgICAgICBRdWVyeVNpbXBsZSBieSBNYXBTaW1wbGVcbiAgICAgICAgICAgICAgICAgIDxzcGFuIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgICAgICBtYXJnaW4tbGVmdDogNnB4O1xuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjU7XG4gICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC43cmVtO1xuICAgICAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAgICAgIHZ7V0lER0VUX1ZFUlNJT059XG4gICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvRmxvYXRpbmdQYW5lbD5cbiAgICAgIH1cbiAgICA8L2Rpdj5cbiAgKVxufVxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQgeyBqc3gsIGNzcywgUmVhY3QsIHR5cGUgSW1tdXRhYmxlQXJyYXksIEltbXV0YWJsZSwgdHlwZSBJbW11dGFibGVPYmplY3QsIGhvb2tzLCB0eXBlIEZlYXR1cmVMYXllckRhdGFTb3VyY2UsIHR5cGUgRmVhdHVyZURhdGFSZWNvcmQsIHR5cGUgRGF0YVNvdXJjZSB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IFNlbGVjdCB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQgdHlwZSB7IFF1ZXJ5SXRlbVR5cGUsIFNlbGVjdGlvblR5cGUgfSBmcm9tICcuLi9jb25maWcnXG5pbXBvcnQgeyBRdWVyeVRhc2sgfSBmcm9tICcuL3F1ZXJ5LXRhc2snXG5pbXBvcnQgeyBGT0NVU0FCTEVfQ09OVEFJTkVSX0NMQVNTIH0gZnJvbSAnamltdS11aSdcbmltcG9ydCBkZWZhdWx0TWVzc2FnZXMgZnJvbSAnLi90cmFuc2xhdGlvbnMvZGVmYXVsdCdcbmltcG9ydCB7IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIgfSBmcm9tICd3aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbidcblxuY29uc3QgZGVidWdMb2dnZXIgPSBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyKClcblxuZXhwb3J0IGludGVyZmFjZSBRdWVyeVRhc2tMaXN0UHJvcHMge1xuICB3aWRnZXRJZDogc3RyaW5nXG4gIHF1ZXJ5SXRlbXM6IEltbXV0YWJsZUFycmF5PFF1ZXJ5SXRlbVR5cGU+XG4gIGlzSW5Qb3BwZXI/OiBib29sZWFuXG4gIGRlZmF1bHRQYWdlU2l6ZT86IG51bWJlclxuICBjbGFzc05hbWU/OiBzdHJpbmdcbiAgaW5pdGlhbFF1ZXJ5VmFsdWU/OiB7IHNob3J0SWQ6IHN0cmluZywgdmFsdWU6IHN0cmluZyB9XG4gIG9uSGFzaFBhcmFtZXRlclVzZWQ/OiAoc2hvcnRJZDogc3RyaW5nKSA9PiB2b2lkXG4gIHJlc3VsdHNNb2RlPzogU2VsZWN0aW9uVHlwZVxuICBvblJlc3VsdHNNb2RlQ2hhbmdlPzogKG1vZGU6IFNlbGVjdGlvblR5cGUpID0+IHZvaWRcbiAgYWNjdW11bGF0ZWRSZWNvcmRzPzogRmVhdHVyZURhdGFSZWNvcmRbXVxuICBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZT86IChyZWNvcmRzOiBGZWF0dXJlRGF0YVJlY29yZFtdKSA9PiB2b2lkXG4gIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQ/OiBib29sZWFuXG4gIGdyYXBoaWNzTGF5ZXI/OiBfX2VzcmkuR3JhcGhpY3NMYXllclxuICBtYXBWaWV3PzogX19lc3JpLk1hcFZpZXcgfCBfX2VzcmkuU2NlbmVWaWV3XG4gIG9uSW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXI/OiAob3V0cHV0RFM6IERhdGFTb3VyY2UpID0+IFByb21pc2U8dm9pZD5cbiAgb25DbGVhckdyYXBoaWNzTGF5ZXI/OiAoKSA9PiB2b2lkXG4gIGFjdGl2ZVRhYj86ICdxdWVyeScgfCAncmVzdWx0cydcbiAgb25UYWJDaGFuZ2U/OiAodGFiOiAncXVlcnknIHwgJ3Jlc3VsdHMnKSA9PiB2b2lkXG59XG5cbmludGVyZmFjZSBHcm91cGVkUXVlcmllcyB7XG4gIGdyb3VwczogeyBbZ3JvdXBJZDogc3RyaW5nXTogeyBpdGVtczogSW1tdXRhYmxlQXJyYXk8UXVlcnlJdGVtVHlwZT4sIGRpc3BsYXlOYW1lOiBzdHJpbmcsIGljb24/OiBhbnkgfSB9XG4gIHVuZ3JvdXBlZDogQXJyYXk8eyBpdGVtOiBJbW11dGFibGVPYmplY3Q8UXVlcnlJdGVtVHlwZT4sIGluZGV4OiBudW1iZXIgfT5cbiAgZ3JvdXBPcmRlcjogc3RyaW5nW11cbn1cblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIHNvcnQgcXVlcmllcyBieSBkaXNwbGF5IG9yZGVyIChsb3dlciBudW1iZXJzIGFwcGVhciBmaXJzdClcbi8vIFF1ZXJpZXMgd2l0aG91dCBvcmRlciBtYWludGFpbiB0aGVpciBvcmlnaW5hbCByZWxhdGl2ZSBwb3NpdGlvbnNcbmZ1bmN0aW9uIHNvcnRRdWVyeUl0ZW1zQnlPcmRlcihxdWVyeUl0ZW1zOiBJbW11dGFibGVBcnJheTxRdWVyeUl0ZW1UeXBlPik6IEltbXV0YWJsZUFycmF5PFF1ZXJ5SXRlbVR5cGU+IHtcbiAgLy8gSGFuZGxlIG51bGwvdW5kZWZpbmVkL2VtcHR5IGNhc2VzXG4gIGlmICghcXVlcnlJdGVtcyB8fCBxdWVyeUl0ZW1zLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBxdWVyeUl0ZW1zIHx8IEltbXV0YWJsZShbXSlcbiAgfVxuICBcbiAgLy8gU2FmZWx5IGNvbnZlcnQgdG8gcmVndWxhciBhcnJheSBmb3Igc29ydGluZ1xuICAvLyBIYW5kbGUgYm90aCBJbW11dGFibGVBcnJheSAoaGFzIHRvQXJyYXkgbWV0aG9kKSBhbmQgcmVndWxhciBhcnJheXNcbiAgY29uc3QgaXRlbXNBcnJheSA9IChxdWVyeUl0ZW1zICYmIHR5cGVvZiBxdWVyeUl0ZW1zLnRvQXJyYXkgPT09ICdmdW5jdGlvbicpIFxuICAgID8gcXVlcnlJdGVtcy50b0FycmF5KCkgXG4gICAgOiAoQXJyYXkuaXNBcnJheShxdWVyeUl0ZW1zKSA/IHF1ZXJ5SXRlbXMgOiBbXSlcbiAgXG4gIGNvbnN0IGl0ZW1zV2l0aEluZGV4ID0gaXRlbXNBcnJheS5tYXAoKGl0ZW0sIGluZGV4KSA9PiAoeyBpdGVtLCBvcmlnaW5hbEluZGV4OiBpbmRleCB9KSlcbiAgaXRlbXNXaXRoSW5kZXguc29ydCgoYSwgYikgPT4ge1xuICAgIGNvbnN0IG9yZGVyQSA9IGEuaXRlbS5vcmRlciA/PyBJbmZpbml0eVxuICAgIGNvbnN0IG9yZGVyQiA9IGIuaXRlbS5vcmRlciA/PyBJbmZpbml0eVxuICAgIGlmIChvcmRlckEgIT09IG9yZGVyQikge1xuICAgICAgcmV0dXJuIG9yZGVyQSAtIG9yZGVyQlxuICAgIH1cbiAgICAvLyBJZiBvcmRlciBpcyBlcXVhbCAoYm90aCBJbmZpbml0eSBvciBzYW1lIG51bWJlciksIG1haW50YWluIG9yaWdpbmFsIGluZGV4IG9yZGVyXG4gICAgcmV0dXJuIGEub3JpZ2luYWxJbmRleCAtIGIub3JpZ2luYWxJbmRleFxuICB9KVxuICByZXR1cm4gSW1tdXRhYmxlKGl0ZW1zV2l0aEluZGV4Lm1hcCgoeyBpdGVtIH0pID0+IGl0ZW0pKVxufVxuXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gZ3JvdXAgcXVlcmllcyBieSBncm91cElkXG5jb25zdCBncm91cFF1ZXJpZXMgPSAocXVlcnlJdGVtczogSW1tdXRhYmxlQXJyYXk8UXVlcnlJdGVtVHlwZT4pOiBHcm91cGVkUXVlcmllcyA9PiB7XG4gIGNvbnN0IGdyb3VwczogeyBbZ3JvdXBJZDogc3RyaW5nXTogeyBpdGVtczogSW1tdXRhYmxlQXJyYXk8UXVlcnlJdGVtVHlwZT4sIGRpc3BsYXlOYW1lOiBzdHJpbmcsIGljb24/OiBhbnkgfSB9ID0ge31cbiAgY29uc3QgdW5ncm91cGVkOiBBcnJheTx7IGl0ZW06IEltbXV0YWJsZU9iamVjdDxRdWVyeUl0ZW1UeXBlPiwgaW5kZXg6IG51bWJlciB9PiA9IFtdXG4gIGNvbnN0IGdyb3VwT3JkZXI6IHN0cmluZ1tdID0gW11cbiAgY29uc3QgZ3JvdXBJbmRleE1hcDogeyBbZ3JvdXBJZDogc3RyaW5nXTogbnVtYmVyIH0gPSB7fVxuICBcbiAgLy8gRmlyc3QgcGFzczogY29sbGVjdCBpdGVtcyBpbiByZWd1bGFyIGFycmF5c1xuICBjb25zdCBncm91cEl0ZW1zTWFwOiB7IFtncm91cElkOiBzdHJpbmddOiBRdWVyeUl0ZW1UeXBlW10gfSA9IHt9XG5cbiAgcXVlcnlJdGVtcy5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4ge1xuICAgIGlmIChpdGVtLmdyb3VwSWQpIHtcbiAgICAgIGlmICghZ3JvdXBJdGVtc01hcFtpdGVtLmdyb3VwSWRdKSB7XG4gICAgICAgIGdyb3VwSXRlbXNNYXBbaXRlbS5ncm91cElkXSA9IFtdXG4gICAgICAgIGdyb3Vwc1tpdGVtLmdyb3VwSWRdID0ge1xuICAgICAgICAgIGl0ZW1zOiBJbW11dGFibGUoW10pLFxuICAgICAgICAgIGRpc3BsYXlOYW1lOiBpdGVtLmdyb3VwRGlzcGxheU5hbWUgfHwgaXRlbS5uYW1lIHx8IGBHcm91cCAke2l0ZW0uZ3JvdXBJZH1gLFxuICAgICAgICAgIGljb246IGl0ZW0uaWNvblxuICAgICAgICB9XG4gICAgICAgIGdyb3VwSW5kZXhNYXBbaXRlbS5ncm91cElkXSA9IGluZGV4XG4gICAgICAgIGdyb3VwT3JkZXIucHVzaChpdGVtLmdyb3VwSWQpXG4gICAgICB9XG4gICAgICBncm91cEl0ZW1zTWFwW2l0ZW0uZ3JvdXBJZF0ucHVzaChpdGVtKVxuICAgIH0gZWxzZSB7XG4gICAgICB1bmdyb3VwZWQucHVzaCh7IGl0ZW0sIGluZGV4IH0pXG4gICAgfVxuICB9KVxuXG4gIC8vIFNlY29uZCBwYXNzOiBjb252ZXJ0IHJlZ3VsYXIgYXJyYXlzIHRvIEltbXV0YWJsZUFycmF5c1xuICBPYmplY3Qua2V5cyhncm91cEl0ZW1zTWFwKS5mb3JFYWNoKGdyb3VwSWQgPT4ge1xuICAgIGdyb3Vwc1tncm91cElkXS5pdGVtcyA9IEltbXV0YWJsZShncm91cEl0ZW1zTWFwW2dyb3VwSWRdKVxuICB9KVxuXG4gIHJldHVybiB7IGdyb3VwcywgdW5ncm91cGVkLCBncm91cE9yZGVyIH1cbn1cblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGdldCBkaXNwbGF5IG5hbWUgZm9yIHF1ZXJ5IGluIGRyb3Bkb3duXG4vLyBVc2VzOiBzZWFyY2hBbGlhcyB8fCBqaW11RmllbGROYW1lIHx8IGl0ZW0ubmFtZSB8fCBmYWxsYmFja1xuY29uc3QgZ2V0UXVlcnlEaXNwbGF5TmFtZSA9IChpdGVtOiBJbW11dGFibGVPYmplY3Q8UXVlcnlJdGVtVHlwZT4pOiBzdHJpbmcgPT4ge1xuICAvLyBGaXJzdCBwcmlvcml0eTogc2VhcmNoQWxpYXMgaWYgc2V0XG4gIGlmIChpdGVtLnNlYXJjaEFsaWFzKSB7XG4gICAgcmV0dXJuIGl0ZW0uc2VhcmNoQWxpYXNcbiAgfVxuICBcbiAgLy8gU2Vjb25kIHByaW9yaXR5OiBmaWVsZCBuYW1lIGZyb20gU1FMIGV4cHJlc3Npb25cbiAgY29uc3QgamltdUZpZWxkTmFtZSA9IGl0ZW0uc3FsRXhwck9iaj8ucGFydHM/LlswXT8uamltdUZpZWxkTmFtZVxuICBpZiAoamltdUZpZWxkTmFtZSkge1xuICAgIHJldHVybiBqaW11RmllbGROYW1lXG4gIH1cbiAgXG4gIC8vIFRoaXJkIHByaW9yaXR5OiBpdGVtIG5hbWVcbiAgaWYgKGl0ZW0ubmFtZSkge1xuICAgIHJldHVybiBpdGVtLm5hbWVcbiAgfVxuICBcbiAgLy8gRmFsbGJhY2tcbiAgcmV0dXJuICdRdWVyeSdcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIFF1ZXJ5VGFza0xpc3QgKHByb3BzOiBRdWVyeVRhc2tMaXN0UHJvcHMpIHtcbiAgY29uc3QgeyBxdWVyeUl0ZW1zLCB3aWRnZXRJZCwgZGVmYXVsdFBhZ2VTaXplLCBpc0luUG9wcGVyID0gZmFsc2UsIGNsYXNzTmFtZSA9ICcnLCBpbml0aWFsUXVlcnlWYWx1ZSwgb25IYXNoUGFyYW1ldGVyVXNlZCwgcmVzdWx0c01vZGUsIG9uUmVzdWx0c01vZGVDaGFuZ2UsIGFjY3VtdWxhdGVkUmVjb3Jkcywgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UsIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQsIGdyYXBoaWNzTGF5ZXIsIG1hcFZpZXcsIG9uSW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXIsIG9uQ2xlYXJHcmFwaGljc0xheWVyLCBhY3RpdmVUYWIsIG9uVGFiQ2hhbmdlIH0gPSBwcm9wc1xuICBjb25zdCBnZXRJMThuTWVzc2FnZSA9IGhvb2tzLnVzZVRyYW5zbGF0aW9uKGRlZmF1bHRNZXNzYWdlcylcbiAgXG4gIC8vIFNvcnQgcXVlcmllcyBieSBkaXNwbGF5IG9yZGVyIGJlZm9yZSBncm91cGluZ1xuICAvLyBIYW5kbGUgY2FzZSB3aGVyZSBxdWVyeUl0ZW1zIG1pZ2h0IGJlIHVuZGVmaW5lZC9udWxsIG9yIG5vdCBhbiBJbW11dGFibGVBcnJheVxuICBjb25zdCBzb3J0ZWRRdWVyeUl0ZW1zID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgaWYgKCFxdWVyeUl0ZW1zKSB7XG4gICAgICByZXR1cm4gSW1tdXRhYmxlKFtdKVxuICAgIH1cbiAgICByZXR1cm4gc29ydFF1ZXJ5SXRlbXNCeU9yZGVyKHF1ZXJ5SXRlbXMpXG4gIH0sIFtxdWVyeUl0ZW1zXSlcbiAgXG4gIGNvbnN0IHsgZ3JvdXBzLCB1bmdyb3VwZWQsIGdyb3VwT3JkZXIgfSA9IFJlYWN0LnVzZU1lbW8oKCkgPT4gZ3JvdXBRdWVyaWVzKHNvcnRlZFF1ZXJ5SXRlbXMpLCBbc29ydGVkUXVlcnlJdGVtc10pXG4gIFxuICAvLyBTdGF0ZSB0byB0cmFjayB0aGUgY3VycmVudCBVUkwgaGFzaCBhbmQgcXVlcnkgc3RyaW5nXG4gIGNvbnN0IFt1cmxQYXJhbXMsIHNldFVybFBhcmFtc10gPSBSZWFjdC51c2VTdGF0ZSgoKSA9PiAoe1xuICAgIGhhc2g6IHdpbmRvdy5sb2NhdGlvbi5oYXNoLnN1YnN0cmluZygxKSxcbiAgICBxdWVyeTogd2luZG93LmxvY2F0aW9uLnNlYXJjaC5zdWJzdHJpbmcoMSlcbiAgfSkpXG5cbiAgLy8gTGlzdGVuIGZvciBoYXNoY2hhbmdlIGV2ZW50cyB0byB1cGRhdGUgb3VyIGxvY2FsIHN0YXRlXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgaGFuZGxlVXJsQ2hhbmdlID0gKCkgPT4ge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNIJywge1xuICAgICAgICBldmVudDogJ3VybC1jaGFuZ2UtZGV0ZWN0ZWQtaW4tdGFzay1saXN0JyxcbiAgICAgICAgbmV3SGFzaDogd2luZG93LmxvY2F0aW9uLmhhc2gsXG4gICAgICAgIG5ld1F1ZXJ5OiB3aW5kb3cubG9jYXRpb24uc2VhcmNoLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICBzZXRVcmxQYXJhbXMoe1xuICAgICAgICBoYXNoOiB3aW5kb3cubG9jYXRpb24uaGFzaC5zdWJzdHJpbmcoMSksXG4gICAgICAgIHF1ZXJ5OiB3aW5kb3cubG9jYXRpb24uc2VhcmNoLnN1YnN0cmluZygxKVxuICAgICAgfSlcbiAgICB9XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2hhc2hjaGFuZ2UnLCBoYW5kbGVVcmxDaGFuZ2UpXG4gICAgLy8gQWxzbyBsaXN0ZW4gZm9yIHBvcHN0YXRlIGluIGNhc2UgcXVlcnkgcGFyYW1ldGVycyBjaGFuZ2Ugd2l0aG91dCBoYXNoIGNoYW5nZVxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdwb3BzdGF0ZScsIGhhbmRsZVVybENoYW5nZSlcbiAgICBcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2hhc2hjaGFuZ2UnLCBoYW5kbGVVcmxDaGFuZ2UpXG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9wc3RhdGUnLCBoYW5kbGVVcmxDaGFuZ2UpXG4gICAgfVxuICB9LCBbXSlcblxuICAvLyBEZXRlcm1pbmUgaWYgd2UgaGF2ZSBhbiBpbml0aWFsIHF1ZXJ5IHZhbHVlIGZyb20gdGhlIFVSTCBoYXNoIG9yIHF1ZXJ5IHN0cmluZ1xuICBjb25zdCBpbml0aWFsUXVlcnlWYWx1ZUZyb21VcmwgPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICBjb25zdCB7IGhhc2gsIHF1ZXJ5IH0gPSB1cmxQYXJhbXNcbiAgICBcbiAgICBjb25zdCBoYXNoUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhoYXNoKVxuICAgIGNvbnN0IHF1ZXJ5UGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhxdWVyeSlcbiAgICBcbiAgICBjb25zdCBhbGxRdWVyeUl0ZW1zID0gWy4uLnVuZ3JvdXBlZC5tYXAodSA9PiB1Lml0ZW0pLCAuLi5PYmplY3QudmFsdWVzKGdyb3VwcykuZmxhdE1hcChnID0+IGcuaXRlbXMpXVxuICAgIFxuICAgIC8vIFBSSU9SSVRZIDE6IENoZWNrIEFMTCBzaG9ydElkcyBpbiB0aGUgSEFTSCAoaGFzaCBhbHdheXMgd2lucylcbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgYWxsUXVlcnlJdGVtcykge1xuICAgICAgaWYgKGl0ZW0uc2hvcnRJZCAmJiBoYXNoUGFyYW1zLmhhcyhpdGVtLnNob3J0SWQpKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc2hvcnRJZDogaXRlbS5zaG9ydElkLFxuICAgICAgICAgIHZhbHVlOiBoYXNoUGFyYW1zLmdldChpdGVtLnNob3J0SWQpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBQUklPUklUWSAyOiBDaGVjayBBTEwgc2hvcnRJZHMgaW4gdGhlIFFVRVJZIHN0cmluZ1xuICAgIGZvciAoY29uc3QgaXRlbSBvZiBhbGxRdWVyeUl0ZW1zKSB7XG4gICAgICBpZiAoaXRlbS5zaG9ydElkICYmIHF1ZXJ5UGFyYW1zLmhhcyhpdGVtLnNob3J0SWQpKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc2hvcnRJZDogaXRlbS5zaG9ydElkLFxuICAgICAgICAgIHZhbHVlOiBxdWVyeVBhcmFtcy5nZXQoaXRlbS5zaG9ydElkKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH0sIFt1bmdyb3VwZWQsIGdyb3VwcywgdXJsUGFyYW1zXSlcblxuICAvLyBVc2UgdGhlIHByb3AgaW5pdGlhbFF1ZXJ5VmFsdWUgaWYgcHJvdmlkZWQsIG90aGVyd2lzZSBmYWxsYmFjayB0byBvdXIgb3duIFVSTCBwYXJzaW5nXG4gIGNvbnN0IGVmZmVjdGl2ZUluaXRpYWxRdWVyeVZhbHVlID0gaW5pdGlhbFF1ZXJ5VmFsdWUgfHwgaW5pdGlhbFF1ZXJ5VmFsdWVGcm9tVXJsXG5cbiAgLy8gRmluZCB0aGUgcXVlcnkgaXRlbSBtYXRjaGluZyB0aGUgc2hvcnRJZCBmcm9tIFVSTCBoYXNoXG4gIGNvbnN0IG1hdGNoaW5nUXVlcnlJbmRleCA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgIGNvbnN0IHNob3J0SWQgPSBlZmZlY3RpdmVJbml0aWFsUXVlcnlWYWx1ZT8uc2hvcnRJZFxuICAgIGlmICghc2hvcnRJZCkge1xuICAgICAgcmV0dXJuIC0xXG4gICAgfVxuICAgIHJldHVybiBzb3J0ZWRRdWVyeUl0ZW1zLmZpbmRJbmRleChpdGVtID0+IGl0ZW0uc2hvcnRJZCA9PT0gc2hvcnRJZClcbiAgfSwgW3NvcnRlZFF1ZXJ5SXRlbXMsIGVmZmVjdGl2ZUluaXRpYWxRdWVyeVZhbHVlXSlcbiAgXG4gIC8vIERldGVybWluZSB3aGljaCBncm91cC91bmdyb3VwZWQgaW5kZXggdGhlIG1hdGNoaW5nIHF1ZXJ5IGlzIGF0XG4gIGNvbnN0IGdldFF1ZXJ5U2VsZWN0aW9uID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgaWYgKG1hdGNoaW5nUXVlcnlJbmRleCA8IDApIHJldHVybiBudWxsXG4gICAgXG4gICAgY29uc3QgaXRlbSA9IHNvcnRlZFF1ZXJ5SXRlbXNbbWF0Y2hpbmdRdWVyeUluZGV4XVxuICAgIGlmIChpdGVtLmdyb3VwSWQpIHtcbiAgICAgIGNvbnN0IGdyb3VwSXRlbXMgPSBncm91cHNbaXRlbS5ncm91cElkXT8uaXRlbXMgfHwgSW1tdXRhYmxlKFtdKVxuICAgICAgY29uc3QgaW5kZXhJbkdyb3VwID0gZ3JvdXBJdGVtcy5maW5kSW5kZXgocSA9PiBxLmNvbmZpZ0lkID09PSBpdGVtLmNvbmZpZ0lkKVxuICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgZXZlbnQ6ICdoYXNoLXF1ZXJ5LWZvdW5kLWluLWdyb3VwJyxcbiAgICAgICAgZ3JvdXBJZDogaXRlbS5ncm91cElkLFxuICAgICAgICBpbmRleEluR3JvdXA6IGluZGV4SW5Hcm91cCA+PSAwID8gaW5kZXhJbkdyb3VwIDogMCxcbiAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IGl0ZW0uY29uZmlnSWQsXG4gICAgICAgIHF1ZXJ5SXRlbVNob3J0SWQ6IGl0ZW0uc2hvcnRJZFxuICAgICAgfSlcbiAgICAgIHJldHVybiB7IHR5cGU6ICdncm91cCcgYXMgY29uc3QsIGdyb3VwSWQ6IGl0ZW0uZ3JvdXBJZCwgaW5kZXg6IGluZGV4SW5Hcm91cCA+PSAwID8gaW5kZXhJbkdyb3VwIDogMCB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFVuZ3JvdXBlZCBxdWVyeVxuICAgICAgY29uc3QgaW5kZXhJblVuZ3JvdXBlZCA9IHVuZ3JvdXBlZC5maW5kSW5kZXgoKHsgaXRlbTogcSB9KSA9PiBxLmNvbmZpZ0lkID09PSBpdGVtLmNvbmZpZ0lkKVxuICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgZXZlbnQ6ICdoYXNoLXF1ZXJ5LWZvdW5kLXVuZ3JvdXBlZCcsXG4gICAgICAgIGluZGV4SW5Vbmdyb3VwZWQ6IGluZGV4SW5Vbmdyb3VwZWQgPj0gMCA/IGluZGV4SW5Vbmdyb3VwZWQgOiAwLFxuICAgICAgICBxdWVyeUl0ZW1Db25maWdJZDogaXRlbS5jb25maWdJZCxcbiAgICAgICAgcXVlcnlJdGVtU2hvcnRJZDogaXRlbS5zaG9ydElkXG4gICAgICB9KVxuICAgICAgcmV0dXJuIHsgdHlwZTogJ3VuZ3JvdXBlZCcgYXMgY29uc3QsIGluZGV4OiBpbmRleEluVW5ncm91cGVkID49IDAgPyBpbmRleEluVW5ncm91cGVkIDogMCB9XG4gICAgfVxuICB9LCBbbWF0Y2hpbmdRdWVyeUluZGV4LCBzb3J0ZWRRdWVyeUl0ZW1zLCBncm91cHMsIHVuZ3JvdXBlZF0pXG4gIFxuICAvLyBIZWxwZXIgdG8gZGV0ZXJtaW5lIGRlZmF1bHQgc2VsZWN0aW9uIGJhc2VkIG9uIGRpc3BsYXkgb3JkZXJcbiAgY29uc3QgZ2V0RGVmYXVsdFNlbGVjdGlvbiA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgIGlmIChnZXRRdWVyeVNlbGVjdGlvbikge1xuICAgICAgcmV0dXJuIGdldFF1ZXJ5U2VsZWN0aW9uXG4gICAgfVxuICAgIFxuICAgIC8vIE5vIGhhc2ggcGFyYW1ldGVyIC0gZGV0ZXJtaW5lIGRlZmF1bHQgYmFzZWQgb24gZGlzcGxheSBvcmRlclxuICAgIC8vIENvbXBhcmUgZmlyc3QgdW5ncm91cGVkIHF1ZXJ5IHZzIGZpcnN0IHF1ZXJ5IGluIGZpcnN0IGdyb3VwXG4gICAgY29uc3QgZmlyc3RVbmdyb3VwZWRPcmRlciA9IHVuZ3JvdXBlZC5sZW5ndGggPiAwID8gKHVuZ3JvdXBlZFswXS5pdGVtLm9yZGVyID8/IEluZmluaXR5KSA6IEluZmluaXR5XG4gICAgY29uc3QgZmlyc3RHcm91cE9yZGVyID0gZ3JvdXBPcmRlci5sZW5ndGggPiAwICYmIGdyb3Vwc1tncm91cE9yZGVyWzBdXT8uaXRlbXM/Lmxlbmd0aCA+IDBcbiAgICAgID8gKGdyb3Vwc1tncm91cE9yZGVyWzBdXS5pdGVtc1swXS5vcmRlciA/PyBJbmZpbml0eSlcbiAgICAgIDogSW5maW5pdHlcbiAgICBcbiAgICAvLyBTZWxlY3Qgd2hpY2hldmVyIGhhcyBsb3dlciBvcmRlciAob3IgZmlyc3QgaWYgZXF1YWwpXG4gICAgaWYgKGZpcnN0VW5ncm91cGVkT3JkZXIgPCBmaXJzdEdyb3VwT3JkZXIpIHtcbiAgICAgIHJldHVybiB7IHR5cGU6ICd1bmdyb3VwZWQnIGFzIGNvbnN0LCBpbmRleDogMCB9XG4gICAgfSBlbHNlIGlmIChmaXJzdEdyb3VwT3JkZXIgPCBJbmZpbml0eSB8fCBncm91cE9yZGVyLmxlbmd0aCA+IDApIHtcbiAgICAgIHJldHVybiB7IHR5cGU6ICdncm91cCcgYXMgY29uc3QsIGdyb3VwSWQ6IGdyb3VwT3JkZXJbMF0sIGluZGV4OiAwIH1cbiAgICB9IGVsc2UgaWYgKHVuZ3JvdXBlZC5sZW5ndGggPiAwKSB7XG4gICAgICByZXR1cm4geyB0eXBlOiAndW5ncm91cGVkJyBhcyBjb25zdCwgaW5kZXg6IDAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbFxuICB9LCBbZ2V0UXVlcnlTZWxlY3Rpb24sIHVuZ3JvdXBlZCwgZ3JvdXBzLCBncm91cE9yZGVyXSlcbiAgXG4gIC8vIFRyYWNrIHNlbGVjdGVkIHF1ZXJ5IC0gaW5pdGlhbGl6ZSB3aXRoIG1hdGNoaW5nIHF1ZXJ5IGlmIGZvdW5kIGZyb20gVVJMIGhhc2gsIG9yIGRlZmF1bHQgYmFzZWQgb24gZGlzcGxheSBvcmRlclxuICBjb25zdCBbc2VsZWN0ZWRHcm91cElkLCBzZXRTZWxlY3RlZEdyb3VwSWRdID0gUmVhY3QudXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4oKCkgPT4ge1xuICAgIGlmIChnZXREZWZhdWx0U2VsZWN0aW9uPy50eXBlID09PSAnZ3JvdXAnKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgICBldmVudDogJ2luaXRpYWwtZ3JvdXAtc2VsZWN0aW9uJyxcbiAgICAgICAgZ3JvdXBJZDogZ2V0RGVmYXVsdFNlbGVjdGlvbi5ncm91cElkLFxuICAgICAgICBub3RlOiBnZXRRdWVyeVNlbGVjdGlvbiA/ICdIYXNoLW1hdGNoZWQnIDogJ0RlZmF1bHQgYmFzZWQgb24gZGlzcGxheSBvcmRlcidcbiAgICAgIH0pXG4gICAgICByZXR1cm4gZ2V0RGVmYXVsdFNlbGVjdGlvbi5ncm91cElkXG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH0pXG4gIGNvbnN0IFtzZWxlY3RlZEdyb3VwUXVlcnlJbmRleCwgc2V0U2VsZWN0ZWRHcm91cFF1ZXJ5SW5kZXhdID0gUmVhY3QudXNlU3RhdGUoKCkgPT4ge1xuICAgIGlmIChnZXREZWZhdWx0U2VsZWN0aW9uPy50eXBlID09PSAnZ3JvdXAnKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgICBldmVudDogJ2luaXRpYWwtZ3JvdXAtcXVlcnktaW5kZXgnLFxuICAgICAgICBpbmRleDogZ2V0RGVmYXVsdFNlbGVjdGlvbi5pbmRleCxcbiAgICAgICAgbm90ZTogZ2V0UXVlcnlTZWxlY3Rpb24gPyAnSGFzaC1tYXRjaGVkJyA6ICdEZWZhdWx0IGJhc2VkIG9uIGRpc3BsYXkgb3JkZXInXG4gICAgICB9KVxuICAgICAgcmV0dXJuIGdldERlZmF1bHRTZWxlY3Rpb24uaW5kZXhcbiAgICB9XG4gICAgcmV0dXJuIDBcbiAgfSlcbiAgY29uc3QgW3NlbGVjdGVkVW5ncm91cGVkSW5kZXgsIHNldFNlbGVjdGVkVW5ncm91cGVkSW5kZXhdID0gUmVhY3QudXNlU3RhdGUoKCkgPT4ge1xuICAgIGlmIChnZXREZWZhdWx0U2VsZWN0aW9uPy50eXBlID09PSAndW5ncm91cGVkJykge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgZXZlbnQ6ICdpbml0aWFsLXVuZ3JvdXBlZC1pbmRleCcsXG4gICAgICAgIGluZGV4OiBnZXREZWZhdWx0U2VsZWN0aW9uLmluZGV4LFxuICAgICAgICBub3RlOiBnZXRRdWVyeVNlbGVjdGlvbiA/ICdIYXNoLW1hdGNoZWQnIDogJ0RlZmF1bHQgYmFzZWQgb24gZGlzcGxheSBvcmRlcidcbiAgICAgIH0pXG4gICAgICByZXR1cm4gZ2V0RGVmYXVsdFNlbGVjdGlvbi5pbmRleFxuICAgIH1cbiAgICByZXR1cm4gMFxuICB9KVxuICBcbiAgLy8gVXBkYXRlIHNlbGVjdGlvbiB3aGVuIGluaXRpYWxRdWVyeVZhbHVlIGNoYW5nZXMgKGUuZy4sIHdoZW4gVVJMIGhhc2ggaXMgZGV0ZWN0ZWQpXG4gIC8vIFdlIG9ubHkgd2FudCB0byB1cGRhdGUgYmFzZWQgb24gdGhlIGhhc2ggaWYgb25lIGlzIFBSRVNFTlQuXG4gIC8vIElmIHRoZSBoYXNoIGlzIHJlbW92ZWQgKGluaXRpYWxRdWVyeVZhbHVlIGJlY29tZXMgbnVsbCksIHdlIERPTidUIHdhbnQgdG8gcmVzZXQgdG8gZGVmYXVsdC5cbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoZ2V0UXVlcnlTZWxlY3Rpb24pIHtcbiAgICAgIC8vIEhhc2ggcGFyYW1ldGVyIG1hdGNoZWQgLSB1c2UgdGhhdCBzZWxlY3Rpb24gYW5kIFNUQVkgVEhFUkVcbiAgICAgIGlmIChnZXRRdWVyeVNlbGVjdGlvbi50eXBlID09PSAnZ3JvdXAnKSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgICAgZXZlbnQ6ICdzZWxlY3Rpb24tY2hhbmdlZC10by1ncm91cC1mcm9tLWhhc2gnLFxuICAgICAgICAgIGdyb3VwSWQ6IGdldFF1ZXJ5U2VsZWN0aW9uLmdyb3VwSWQsXG4gICAgICAgICAgaW5kZXg6IGdldFF1ZXJ5U2VsZWN0aW9uLmluZGV4LFxuICAgICAgICAgIG5vdGU6ICdTdGlja3kgc2VsZWN0aW9uIGZyb20gaGFzaCBwYXJhbWV0ZXInXG4gICAgICAgIH0pXG4gICAgICAgIHNldFNlbGVjdGVkR3JvdXBJZChnZXRRdWVyeVNlbGVjdGlvbi5ncm91cElkKVxuICAgICAgICBzZXRTZWxlY3RlZEdyb3VwUXVlcnlJbmRleChnZXRRdWVyeVNlbGVjdGlvbi5pbmRleClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgICAgZXZlbnQ6ICdzZWxlY3Rpb24tY2hhbmdlZC10by11bmdyb3VwZWQtZnJvbS1oYXNoJyxcbiAgICAgICAgICBpbmRleDogZ2V0UXVlcnlTZWxlY3Rpb24uaW5kZXgsXG4gICAgICAgICAgbm90ZTogJ1N0aWNreSBzZWxlY3Rpb24gZnJvbSBoYXNoIHBhcmFtZXRlcidcbiAgICAgICAgfSlcbiAgICAgICAgc2V0U2VsZWN0ZWRHcm91cElkKG51bGwpXG4gICAgICAgIHNldFNlbGVjdGVkVW5ncm91cGVkSW5kZXgoZ2V0UXVlcnlTZWxlY3Rpb24uaW5kZXgpXG4gICAgICB9XG4gICAgfVxuICB9LCBbZ2V0UXVlcnlTZWxlY3Rpb25dKVxuICBcbiAgLy8gR2V0IHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgcXVlcnkgaXRlbVxuICBjb25zdCBnZXRTZWxlY3RlZFF1ZXJ5SXRlbSA9ICgpOiBJbW11dGFibGVPYmplY3Q8UXVlcnlJdGVtVHlwZT4gPT4ge1xuICAgIC8vIFBSSU9SSVRZIDE6IFVzZSBjdXJyZW50IHN0YXRlIHNlbGVjdGlvblxuICAgIC8vIFRoZSBzdGF0ZSBpcyBpbml0aWFsaXplZCB3aXRoIHRoZSBoYXNoIG1hdGNoIChpZiBwcmVzZW50KSBvciBkZWZhdWx0IG9yZGVyLFxuICAgIC8vIGFuZCB1cGRhdGVkIHZpYSB1c2VFZmZlY3QgaWYgdGhlIGhhc2ggY2hhbmdlcyBsYXRlci5cbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgZXZlbnQ6ICdnZXRTZWxlY3RlZFF1ZXJ5SXRlbS1zdGF0ZS1zZWxlY3Rpb24nLFxuICAgICAgc2VsZWN0ZWRHcm91cElkLFxuICAgICAgaGFzU2VsZWN0ZWRHcm91cDogc2VsZWN0ZWRHcm91cElkICYmIGdyb3Vwc1tzZWxlY3RlZEdyb3VwSWRdLFxuICAgICAgc2VsZWN0ZWRHcm91cFF1ZXJ5SW5kZXgsXG4gICAgICBzZWxlY3RlZFVuZ3JvdXBlZEluZGV4LFxuICAgICAgdW5ncm91cGVkTGVuZ3RoOiB1bmdyb3VwZWQubGVuZ3RoLFxuICAgICAgZ3JvdXBPcmRlckxlbmd0aDogZ3JvdXBPcmRlci5sZW5ndGgsXG4gICAgICBub3RlOiAnVXNpbmcgc3RhdGUgc2VsZWN0aW9uIChoYXNoLWF3YXJlKSdcbiAgICB9KVxuICAgIFxuICAgIC8vIElmIGEgZ3JvdXAgaXMgc2VsZWN0ZWQsIGdldCBxdWVyeSBmcm9tIHRoYXQgZ3JvdXBcbiAgICBpZiAoc2VsZWN0ZWRHcm91cElkICYmIGdyb3Vwc1tzZWxlY3RlZEdyb3VwSWRdKSB7XG4gICAgICBjb25zdCBncm91cEl0ZW1zID0gZ3JvdXBzW3NlbGVjdGVkR3JvdXBJZF0uaXRlbXNcbiAgICAgIGlmIChncm91cEl0ZW1zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgaWR4ID0gc2VsZWN0ZWRHcm91cFF1ZXJ5SW5kZXggPCBncm91cEl0ZW1zLmxlbmd0aCA/IHNlbGVjdGVkR3JvdXBRdWVyeUluZGV4IDogMFxuICAgICAgICBjb25zdCBzZWxlY3RlZEl0ZW0gPSBncm91cEl0ZW1zW2lkeF1cbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgICBldmVudDogJ3NlbGVjdGVkLXF1ZXJ5LWZyb20tZ3JvdXAnLFxuICAgICAgICAgIGdyb3VwSWQ6IHNlbGVjdGVkR3JvdXBJZCxcbiAgICAgICAgICBncm91cFF1ZXJ5SW5kZXg6IGlkeCxcbiAgICAgICAgICBxdWVyeUl0ZW1Db25maWdJZDogc2VsZWN0ZWRJdGVtLmNvbmZpZ0lkLFxuICAgICAgICAgIHF1ZXJ5RGlzcGxheU5hbWU6IGdldFF1ZXJ5RGlzcGxheU5hbWUoc2VsZWN0ZWRJdGVtKVxuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gc2VsZWN0ZWRJdGVtXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIE90aGVyd2lzZSwgZ2V0IGZyb20gdW5ncm91cGVkIHF1ZXJpZXNcbiAgICBpZiAodW5ncm91cGVkLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IGlkeCA9IHNlbGVjdGVkVW5ncm91cGVkSW5kZXggPCB1bmdyb3VwZWQubGVuZ3RoID8gc2VsZWN0ZWRVbmdyb3VwZWRJbmRleCA6IDBcbiAgICAgIGNvbnN0IHNlbGVjdGVkSXRlbSA9IHVuZ3JvdXBlZFtpZHhdLml0ZW1cbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgIGV2ZW50OiAnc2VsZWN0ZWQtcXVlcnktZnJvbS11bmdyb3VwZWQnLFxuICAgICAgICB1bmdyb3VwZWRJbmRleDogaWR4LFxuICAgICAgICBxdWVyeUl0ZW1Db25maWdJZDogc2VsZWN0ZWRJdGVtLmNvbmZpZ0lkLFxuICAgICAgICBxdWVyeURpc3BsYXlOYW1lOiBnZXRRdWVyeURpc3BsYXlOYW1lKHNlbGVjdGVkSXRlbSlcbiAgICAgIH0pXG4gICAgICByZXR1cm4gc2VsZWN0ZWRJdGVtXG4gICAgfVxuICAgIFxuICAgIC8vIEZhbGxiYWNrIHRvIGZpcnN0IHF1ZXJ5IGl0ZW1cbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgZXZlbnQ6ICdzZWxlY3RlZC1xdWVyeS1mYWxsYmFjaycsXG4gICAgICBub3RlOiAnTm8gZ3JvdXBzIG9yIHVuZ3JvdXBlZCBxdWVyaWVzLCB1c2luZyBmaXJzdCBpdGVtJ1xuICAgIH0pXG4gICAgcmV0dXJuIHNvcnRlZFF1ZXJ5SXRlbXNbMF1cbiAgfVxuICBcbiAgY29uc3Qgc2VsZWN0ZWRRdWVyeUl0ZW0gPSBnZXRTZWxlY3RlZFF1ZXJ5SXRlbSgpXG4gIGNvbnN0IHNlbGVjdGVkUXVlcnlSZWFsSW5kZXggPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICByZXR1cm4gc29ydGVkUXVlcnlJdGVtcy5maW5kSW5kZXgocSA9PiBxLmNvbmZpZ0lkID09PSBzZWxlY3RlZFF1ZXJ5SXRlbS5jb25maWdJZClcbiAgfSwgW3NvcnRlZFF1ZXJ5SXRlbXMsIHNlbGVjdGVkUXVlcnlJdGVtXSlcbiAgXG4gIC8vIElmIG9ubHkgb25lIHF1ZXJ5IHRvdGFsLCBkb24ndCBzaG93IGRyb3Bkb3duXG4gIGNvbnN0IHNob3dEcm9wZG93biA9IHNvcnRlZFF1ZXJ5SXRlbXMubGVuZ3RoID4gMSB8fCBncm91cE9yZGVyLmxlbmd0aCA+IDBcbiAgXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9e2BydW50aW1lLXF1ZXJ5X19xdWVyeS1saXN0IGgtMTAwICR7Y2xhc3NOYW1lfWB9IGNzcz17Y3NzYFxuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAucXVlcnktc2VsZWN0b3Ige1xuICAgICAgICBwYWRkaW5nOiAxNnB4O1xuICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tc3lzLWNvbG9yLWRpdmlkZXItc2Vjb25kYXJ5KTtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgZ2FwOiA4cHg7XG4gICAgICB9XG4gICAgICAucXVlcnktc2VsZWN0b3ItbGFiZWwge1xuICAgICAgICBmb250LXNpemU6IDAuODc1cmVtO1xuICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgICBjb2xvcjogdmFyKC0tc3lzLWNvbG9yLXRleHQtcHJpbWFyeSk7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDRweDtcbiAgICAgIH1cbiAgICAgIC5xdWVyeS1zZWxlY3RvciBzZWxlY3Qge1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgIH1cbiAgICAgIC5xdWVyeS10YXNrLWNvbnRhaW5lciB7XG4gICAgICAgIGZsZXg6IDE7XG4gICAgICAgIG92ZXJmbG93OiBhdXRvO1xuICAgICAgfVxuICAgIGB9PlxuICAgICAgey8qIFNlYXJjaCBMYXllciBkcm9wZG93biBtb3ZlZCB0byBRdWVyeVRhc2sgUXVlcnkgdGFiIGNvbnRlbnQgKi99XG4gICAgICBcbiAgICAgIHsvKiBTaG93IHNlbGVjdGVkIHF1ZXJ5IGZvcm0gZGlyZWN0bHkgYmVsb3cgKi99XG4gICAgICB7c2VsZWN0ZWRRdWVyeUl0ZW0gJiYgKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YHF1ZXJ5LXRhc2stY29udGFpbmVyICR7aXNJblBvcHBlciA/IEZPQ1VTQUJMRV9DT05UQUlORVJfQ0xBU1MgOiAnJ31gfT5cbiAgICAgICAgICA8UXVlcnlUYXNrXG4gICAgICAgICAgICB3aWRnZXRJZD17d2lkZ2V0SWR9XG4gICAgICAgICAgICBpbmRleD17c2VsZWN0ZWRRdWVyeVJlYWxJbmRleCA+PSAwID8gc2VsZWN0ZWRRdWVyeVJlYWxJbmRleCA6IDB9XG4gICAgICAgICAgICB0b3RhbD17c29ydGVkUXVlcnlJdGVtcy5sZW5ndGh9XG4gICAgICAgICAgICBxdWVyeUl0ZW09e3NlbGVjdGVkUXVlcnlJdGVtfVxuICAgICAgICAgICAgaXNJblBvcHBlcj17aXNJblBvcHBlcn1cbiAgICAgICAgICAgIGluaXRpYWxJbnB1dFZhbHVlPXtzZWxlY3RlZFF1ZXJ5SXRlbS5zaG9ydElkID09PSBlZmZlY3RpdmVJbml0aWFsUXVlcnlWYWx1ZT8uc2hvcnRJZCA/IGVmZmVjdGl2ZUluaXRpYWxRdWVyeVZhbHVlPy52YWx1ZSA6IHVuZGVmaW5lZH1cbiAgICAgICAgICAgIG9uSGFzaFBhcmFtZXRlclVzZWQ9e29uSGFzaFBhcmFtZXRlclVzZWR9XG4gICAgICAgICAgICBxdWVyeUl0ZW1zPXtzb3J0ZWRRdWVyeUl0ZW1zfVxuICAgICAgICAgICAgc2VsZWN0ZWRRdWVyeUluZGV4PXtzZWxlY3RlZFVuZ3JvdXBlZEluZGV4fVxuICAgICAgICAgICAgb25RdWVyeUNoYW5nZT17KGluZGV4KSA9PiBzZXRTZWxlY3RlZFVuZ3JvdXBlZEluZGV4KGluZGV4KX1cbiAgICAgICAgICAgIC8vIEdyb3VwaW5nIHByb3BzXG4gICAgICAgICAgICBncm91cHM9e2dyb3Vwc31cbiAgICAgICAgICAgIHVuZ3JvdXBlZD17dW5ncm91cGVkfVxuICAgICAgICAgICAgLy8gR3JhcGhpY3MgbGF5ZXIgcHJvcHNcbiAgICAgICAgICAgIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQ9e3VzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHR9XG4gICAgICAgICAgICBncmFwaGljc0xheWVyPXtncmFwaGljc0xheWVyfVxuICAgICAgICAgICAgbWFwVmlldz17bWFwVmlld31cbiAgICAgICAgICAgIG9uSW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXI9e29uSW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXJ9XG4gICAgICAgICAgICBvbkNsZWFyR3JhcGhpY3NMYXllcj17b25DbGVhckdyYXBoaWNzTGF5ZXJ9XG4gICAgICAgICAgICBncm91cE9yZGVyPXtncm91cE9yZGVyfVxuICAgICAgICAgICAgc2VsZWN0ZWRHcm91cElkPXtzZWxlY3RlZEdyb3VwSWR9XG4gICAgICAgICAgICBzZWxlY3RlZEdyb3VwUXVlcnlJbmRleD17c2VsZWN0ZWRHcm91cFF1ZXJ5SW5kZXh9XG4gICAgICAgICAgICBvbkdyb3VwQ2hhbmdlPXsoZ3JvdXBJZCkgPT4gc2V0U2VsZWN0ZWRHcm91cElkKGdyb3VwSWQpfVxuICAgICAgICAgICAgb25Hcm91cFF1ZXJ5Q2hhbmdlPXsoaW5kZXgpID0+IHNldFNlbGVjdGVkR3JvdXBRdWVyeUluZGV4KGluZGV4KX1cbiAgICAgICAgICAgIG9uVW5ncm91cGVkQ2hhbmdlPXsoaW5kZXgpID0+IHNldFNlbGVjdGVkVW5ncm91cGVkSW5kZXgoaW5kZXgpfVxuICAgICAgICAgICAgcmVzdWx0c01vZGU9e3Jlc3VsdHNNb2RlfVxuICAgICAgICAgICAgb25SZXN1bHRzTW9kZUNoYW5nZT17b25SZXN1bHRzTW9kZUNoYW5nZX1cbiAgICAgICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkcz17YWNjdW11bGF0ZWRSZWNvcmRzfVxuICAgICAgICAgICAgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2U9e29uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlfVxuICAgICAgICAgICAgYWN0aXZlVGFiPXthY3RpdmVUYWJ9XG4gICAgICAgICAgICBvblRhYkNoYW5nZT17b25UYWJDaGFuZ2V9XG4gICAgICAgICAgICAvLyBObyBvbk5hdkJhY2sgLSBubyBuYXZpZ2F0aW9uIG5lZWRlZFxuICAgICAgICAgIC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cbiAgICA8L2Rpdj5cbiAgKVxufVxuXG5cblxuIiwiLyoqIEBqc3gganN4ICovXHJcbmltcG9ydCB7IFJlYWN0LCBSZWFjdFJlZHV4LCB0eXBlIElNU3RhdGUsIGpzeCwgY3NzLCBjbGFzc05hbWVzLCB0eXBlIEltbXV0YWJsZUFycmF5LCB0eXBlIFVzZURhdGFTb3VyY2UsIGhvb2tzIH0gZnJvbSAnamltdS1jb3JlJ1xyXG5pbXBvcnQgeyBTZWxlY3QsIFRvb2x0aXAsIEJ1dHRvbiB9IGZyb20gJ2ppbXUtdWknXHJcbmltcG9ydCB7IHR5cGUgQ3JlYXRlVG9vbFR5cGUsIFNwYXRpYWxGaWx0ZXJUeXBlLCB0eXBlIFNwYXRpYWxGaWx0ZXJPYmosIHR5cGUgU3BhdGlhbFJlbGF0aW9uLCBVbml0VHlwZSB9IGZyb20gJy4uL2NvbmZpZydcclxuaW1wb3J0IGRlZmF1bHRNZXNzYWdlIGZyb20gJy4vdHJhbnNsYXRpb25zL2RlZmF1bHQnXHJcbmltcG9ydCB7IEdlb21ldHJ5RnJvbURhdGFTb3VyY2UgfSBmcm9tICcuL2dlb21ldHJ5LWZyb20tZHMnXHJcbmltcG9ydCB7IEdlb21ldHJ5RnJvbU1hcCB9IGZyb20gJy4vZ2VvbWV0cnktZnJvbS1tYXAnXHJcbmltcG9ydCB7IEdlb21ldHJ5RnJvbURyYXcgfSBmcm9tICcuL2dlb21ldHJ5LWZyb20tZHJhdydcclxuaW1wb3J0IHsgSW5mb091dGxpbmVkIH0gZnJvbSAnamltdS1pY29ucy9vdXRsaW5lZC9zdWdnZXN0ZWQvaW5mbydcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUXVlcnlUYXNrSXRlbVByb3BzIHtcclxuICB3aWRnZXRJZDogc3RyaW5nXHJcbiAgbGFiZWw6IHN0cmluZ1xyXG4gIGRlc2M6IHN0cmluZ1xyXG4gIGRzRW5hYmxlQnVmZmVyOiBib29sZWFuXHJcbiAgZHNCdWZmZXJEaXN0YW5jZTogbnVtYmVyXHJcbiAgZHNCdWZmZXJVbml0OiBVbml0VHlwZVxyXG4gIGRyYXdFbmFibGVCdWZmZXI6IGJvb2xlYW5cclxuICBkcmF3QnVmZmVyRGlzdGFuY2U6IG51bWJlclxyXG4gIGRyYXdCdWZmZXJVbml0OiBVbml0VHlwZVxyXG4gIHNwYXRpYWxSZWxhdGlvbnM6IEltbXV0YWJsZUFycmF5PFNwYXRpYWxSZWxhdGlvbj5cclxuICB1c2VEYXRhU291cmNlczogSW1tdXRhYmxlQXJyYXk8VXNlRGF0YVNvdXJjZT5cclxuICB1c2VSdW50aW1lRGF0YTogYm9vbGVhblxyXG4gIGZpbHRlclR5cGVzOiBJbW11dGFibGVBcnJheTxTcGF0aWFsRmlsdGVyVHlwZT5cclxuICBtYXBXaWRnZXRJZHM6IEltbXV0YWJsZUFycmF5PHN0cmluZz5cclxuICBjcmVhdGVUb29sVHlwZXM6IEltbXV0YWJsZUFycmF5PENyZWF0ZVRvb2xUeXBlPlxyXG4gIG9uRmlsdGVyQ2hhbmdlOiAoZmlsdGVyOiBTcGF0aWFsRmlsdGVyT2JqKSA9PiB2b2lkXHJcbiAgb25SZWxhdGlvbkNoYW5nZTogKHJlbDogU3BhdGlhbFJlbGF0aW9uKSA9PiB2b2lkXHJcbiAgb25CdWZmZXJDaGFuZ2U6IChkaXN0YW5jZTogbnVtYmVyLCB1bml0OiBVbml0VHlwZSkgPT4gdm9pZFxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gUXVlcnlUYXNrU3BhdGlhbEZvcm0gKHByb3BzOiBRdWVyeVRhc2tJdGVtUHJvcHMpIHtcclxuICBjb25zdCB7XHJcbiAgICBsYWJlbCwgZGVzYywgZmlsdGVyVHlwZXMsIG1hcFdpZGdldElkcywgb25GaWx0ZXJDaGFuZ2UsIG9uUmVsYXRpb25DaGFuZ2UsIG9uQnVmZmVyQ2hhbmdlLCB1c2VEYXRhU291cmNlcywgc3BhdGlhbFJlbGF0aW9ucywgdXNlUnVudGltZURhdGEsXHJcbiAgICBkc0VuYWJsZUJ1ZmZlciwgZHNCdWZmZXJEaXN0YW5jZSwgZHNCdWZmZXJVbml0LCBkcmF3RW5hYmxlQnVmZmVyLCBkcmF3QnVmZmVyRGlzdGFuY2UsIGRyYXdCdWZmZXJVbml0LCBjcmVhdGVUb29sVHlwZXMsIHdpZGdldElkXHJcbiAgfSA9IHByb3BzXHJcbiAgY29uc3QgZ2V0STE4bk1lc3NhZ2UgPSBob29rcy51c2VUcmFuc2xhdGlvbihkZWZhdWx0TWVzc2FnZSlcclxuICAvLyB1c2VkIHRvIHN0b3JlIHRoZSBzZWxlY3Rpb24gb2YgdGhlIGRhdGEgc291cmNlIGluIG9yZGVyIHRvIHVwZGF0ZSB0aGUgZmlsdGVyIHdoZW4gb3B0aW9uIGNoYW5nZXNcclxuICBjb25zdCBzZWxlY3RlZEdlb21ldHJpZXNSZWYgPSBSZWFjdC51c2VSZWY8YW55PihudWxsKVxyXG4gIGNvbnN0IG1hcEV4aXN0cyA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XHJcbiAgICBpZiAobWFwV2lkZ2V0SWRzPy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGNvbnN0IG1hcFdpZGdldElkID0gbWFwV2lkZ2V0SWRzWzBdXHJcbiAgICAgIHJldHVybiBzdGF0ZS5hcHBDb25maWcud2lkZ2V0c1ttYXBXaWRnZXRJZF0gIT0gbnVsbFxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlXHJcbiAgfSlcclxuICBjb25zdCBjYW5Vc2VNYXBGaWx0ZXIgPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcclxuICAgIHJldHVybiBtYXBFeGlzdHMgJiYgKGZpbHRlclR5cGVzPy5pbmNsdWRlcyhTcGF0aWFsRmlsdGVyVHlwZS5DdXJyZW50TWFwRXh0ZW50KSB8fCBmaWx0ZXJUeXBlcz8uaW5jbHVkZXMoU3BhdGlhbEZpbHRlclR5cGUuSW50ZXJhY3RpdmVEcmF3TW9kZSkpXHJcbiAgfSwgW2ZpbHRlclR5cGVzLCBtYXBFeGlzdHNdKVxyXG4gIGNvbnN0IHN1cHBvcnRlZEZpbHRlclR5cGVzID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XHJcbiAgICBjb25zdCByZXN1bHQgPSBbXVxyXG4gICAgaWYgKHVzZURhdGFTb3VyY2VzPy5sZW5ndGggPiAwIHx8IHVzZVJ1bnRpbWVEYXRhKSB7XHJcbiAgICAgIHJlc3VsdC5wdXNoKHsgdmFsdWU6ICdkYXRhJywgbGFiZWw6IGdldEkxOG5NZXNzYWdlKCdmZWF0dXJlRnJvbURzJykgfSlcclxuICAgIH1cclxuICAgIGlmIChjYW5Vc2VNYXBGaWx0ZXIgJiYgZmlsdGVyVHlwZXM/LmluY2x1ZGVzKFNwYXRpYWxGaWx0ZXJUeXBlLkN1cnJlbnRNYXBFeHRlbnQpKSB7XHJcbiAgICAgIHJlc3VsdC5wdXNoKHsgdmFsdWU6ICdtYXAnLCBsYWJlbDogZ2V0STE4bk1lc3NhZ2UoYHNwYXRpYWxGaWx0ZXJUeXBlXyR7U3BhdGlhbEZpbHRlclR5cGUuQ3VycmVudE1hcEV4dGVudH1gKSB9KVxyXG4gICAgfVxyXG4gICAgaWYgKGNhblVzZU1hcEZpbHRlciAmJiBmaWx0ZXJUeXBlcz8uaW5jbHVkZXMoU3BhdGlhbEZpbHRlclR5cGUuSW50ZXJhY3RpdmVEcmF3TW9kZSkpIHtcclxuICAgICAgcmVzdWx0LnB1c2goeyB2YWx1ZTogJ2RyYXcnLCBsYWJlbDogZ2V0STE4bk1lc3NhZ2UoYHNwYXRpYWxGaWx0ZXJUeXBlXyR7U3BhdGlhbEZpbHRlclR5cGUuSW50ZXJhY3RpdmVEcmF3TW9kZX1gKSB9KVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlc3VsdFxyXG4gIH0sIFtjYW5Vc2VNYXBGaWx0ZXIsIHVzZURhdGFTb3VyY2VzLCB1c2VSdW50aW1lRGF0YSwgZ2V0STE4bk1lc3NhZ2UsIGZpbHRlclR5cGVzXSlcclxuXHJcbiAgY29uc3QgW2N1cnJlbnRGaWx0ZXJUeXBlLCBzZXRDdXJyZW50RmlsdGVyVHlwZV0gPSBSZWFjdC51c2VTdGF0ZShzdXBwb3J0ZWRGaWx0ZXJUeXBlcz8uWzBdPy52YWx1ZSlcclxuXHJcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcclxuICAgIC8vIGluIG9yZGVyIHRvIGF2b2lkIGludmFsaWQgb3B0aW9uIGJlaW5nIHNlbGVjdGVkXHJcbiAgICBpZiAoY3VycmVudEZpbHRlclR5cGUgIT09ICdub25lJyAmJiAhc3VwcG9ydGVkRmlsdGVyVHlwZXMuZmluZCgoaXRlbSkgPT4gaXRlbS52YWx1ZSA9PT0gY3VycmVudEZpbHRlclR5cGUpKSB7XHJcbiAgICAgIHNldEN1cnJlbnRGaWx0ZXJUeXBlKHN1cHBvcnRlZEZpbHRlclR5cGVzPy5bMF0/LnZhbHVlKVxyXG4gICAgfVxyXG4gIH0sIFtjdXJyZW50RmlsdGVyVHlwZSwgc3VwcG9ydGVkRmlsdGVyVHlwZXNdKVxyXG5cclxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgLy8gY2xlYXIgdGhlIHJlbGF0aW9uc2hpcCBhbmQgYnVmZmVyIGlmIGZpbHRlciB0eXBlIGlzIG5vdCAnZGF0YSdcclxuICAgIGlmIChjdXJyZW50RmlsdGVyVHlwZSA9PT0gJ21hcCcgfHwgY3VycmVudEZpbHRlclR5cGUgPT09ICdkcmF3JyB8fCBjdXJyZW50RmlsdGVyVHlwZSA9PT0gJ25vbmUnKSB7XHJcbiAgICAgIG9uUmVsYXRpb25DaGFuZ2UobnVsbClcclxuICAgICAgb25CdWZmZXJDaGFuZ2UoMCwgVW5pdFR5cGUuTWV0ZXJzKVxyXG4gICAgICBvbkZpbHRlckNoYW5nZSh7IGdlb21ldHJ5OiBudWxsIH0pXHJcbiAgICB9XHJcbiAgICAvLyBubyBuZWVkIHRvIHVwZGF0ZSB0aGUgZmlsdGVyIGlmIHRoZSBkYXRhIHNvdXJjZSBoYXMgc2VsZWN0aW9uIHNpbmNlIGl0IHdpbGwgYmUgdXBkYXRlZCBpbiB0aGUgaGFuZGxlU2VsZWN0aW9uQ2hhbmdlIG1ldGhvZFxyXG4gICAgaWYgKGN1cnJlbnRGaWx0ZXJUeXBlID09PSAnZGF0YScgJiYgc2VsZWN0ZWRHZW9tZXRyaWVzUmVmLmN1cnJlbnQgPT0gbnVsbCkge1xyXG4gICAgICBvbkZpbHRlckNoYW5nZSh7IGdlb21ldHJ5OiBudWxsIH0pXHJcbiAgICB9XHJcbiAgfSwgW2N1cnJlbnRGaWx0ZXJUeXBlLCBvblJlbGF0aW9uQ2hhbmdlLCBvbkJ1ZmZlckNoYW5nZSwgb25GaWx0ZXJDaGFuZ2VdKVxyXG5cclxuICBjb25zdCBoYW5kbGVGaWx0ZXJUeXBlQ2hhbmdlZCA9IFJlYWN0LnVzZUNhbGxiYWNrKChldnQpID0+IHsgc2V0Q3VycmVudEZpbHRlclR5cGUoZXZ0LnRhcmdldC52YWx1ZSkgfSwgW10pXHJcblxyXG4gIGNvbnN0IGhhbmRsZUdlb21ldHJ5Q2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soKGdlb21ldHJ5OiBfX2VzcmkuR2VvbWV0cnksIGxheWVyPzogX19lc3JpLkdyYXBoaWNzTGF5ZXIsIGdyYXBoaWM/OiBfX2VzcmkuR3JhcGhpYywgY2xlYXJBZnRlckFwcGx5PzogYm9vbGVhbikgPT4ge1xyXG4gICAgb25GaWx0ZXJDaGFuZ2UoeyBnZW9tZXRyeSwgZ3JhcGhpYywgbGF5ZXIsIGNsZWFyQWZ0ZXJBcHBseSB9KVxyXG4gIH0sIFtvbkZpbHRlckNoYW5nZV0pXHJcblxyXG4gIGNvbnN0IGhhbmRsZVNlbGVjdGlvbkNoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKChnZW9tZXRyaWVzKSA9PiB7XHJcbiAgICBzZWxlY3RlZEdlb21ldHJpZXNSZWYuY3VycmVudCA9IGdlb21ldHJpZXNcclxuICAgIG9uRmlsdGVyQ2hhbmdlKHsgZ2VvbWV0cnk6IGdlb21ldHJpZXMgfSlcclxuICB9LCBbb25GaWx0ZXJDaGFuZ2VdKVxyXG5cclxuICBpZiAoISh1c2VEYXRhU291cmNlcz8ubGVuZ3RoID4gMCB8fCB1c2VSdW50aW1lRGF0YSB8fCBjYW5Vc2VNYXBGaWx0ZXIpKSB7XHJcbiAgICByZXR1cm4gbnVsbFxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDxkaXYgcm9sZT0nZ3JvdXAnIGNsYXNzTmFtZT0ncHgtNCBwYi00JyBhcmlhLWxhYmVsPXtsYWJlbH0+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdmb3JtLXRpdGxlIG15LTIgZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlcicsIHsgJ2Qtbm9uZSc6ICFsYWJlbCAmJiAhZGVzYyB9KX0+XHJcbiAgICAgICAge2xhYmVsICYmIDxkaXYgY2xhc3NOYW1lPSdtci0yIHRpdGxlMic+e2xhYmVsfTwvZGl2Pn1cclxuICAgICAgICB7ZGVzYyAmJiAoXHJcbiAgICAgICAgICA8VG9vbHRpcCBwbGFjZW1lbnQ9J2JvdHRvbScgY3NzPXtjc3Ngd2hpdGUtc3BhY2U6IHByZS1saW5lO2B9IHRpdGxlPXtkZXNjfT5cclxuICAgICAgICAgICAgPEJ1dHRvbiBzaXplPSdzbScgaWNvbiB0eXBlPSd0ZXJ0aWFyeSc+XHJcbiAgICAgICAgICAgICAgPEluZm9PdXRsaW5lZCBjb2xvcj0ndmFyKC0tc3lzLWNvbG9yLXByaW1hcnktbWFpbiknIHNpemU9J3MnLz5cclxuICAgICAgICAgICAgPC9CdXR0b24+XHJcbiAgICAgICAgICA8L1Rvb2x0aXA+XHJcbiAgICAgICAgKX1cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIHtzdXBwb3J0ZWRGaWx0ZXJUeXBlcy5sZW5ndGggPiAwICYmIChcclxuICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3RpdGxlMyc+e2dldEkxOG5NZXNzYWdlKCdjaG9vc2VGaWx0ZXJUeXBlJyl9PC9kaXY+XHJcbiAgICAgICAgICA8U2VsZWN0XHJcbiAgICAgICAgICAgIGFyaWEtbGFiZWw9e2dldEkxOG5NZXNzYWdlKCdjaG9vc2VGaWx0ZXJUeXBlJyl9XHJcbiAgICAgICAgICAgIGNzcz17Y3NzYGhlaWdodDogMzJweDtgfVxyXG4gICAgICAgICAgICB2YWx1ZT17Y3VycmVudEZpbHRlclR5cGV9XHJcbiAgICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVGaWx0ZXJUeXBlQ2hhbmdlZH1cclxuICAgICAgICAgID5cclxuICAgICAgICAgICAgPG9wdGlvbiBrZXk9Jy0nIHZhbHVlPSdub25lJz4tPC9vcHRpb24+XHJcbiAgICAgICAgICAgIHtzdXBwb3J0ZWRGaWx0ZXJUeXBlcy5tYXAoaXRlbSA9PiA8b3B0aW9uIGtleT17aXRlbS52YWx1ZX0gdmFsdWU9e2l0ZW0udmFsdWV9PntpdGVtLmxhYmVsfTwvb3B0aW9uPil9XHJcbiAgICAgICAgICA8L1NlbGVjdD5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgKX1cclxuICAgICAge2N1cnJlbnRGaWx0ZXJUeXBlID09PSAnZGF0YScgJiYgKFxyXG4gICAgICAgIDxHZW9tZXRyeUZyb21EYXRhU291cmNlXHJcbiAgICAgICAgICBlbmFibGVCdWZmZXI9e2RzRW5hYmxlQnVmZmVyfVxyXG4gICAgICAgICAgYnVmZmVyRGlzdGFuY2U9e2RzQnVmZmVyRGlzdGFuY2V9XHJcbiAgICAgICAgICBidWZmZXJVbml0PXtkc0J1ZmZlclVuaXR9XHJcbiAgICAgICAgICBzcGF0aWFsUmVsYXRpb25zPXtzcGF0aWFsUmVsYXRpb25zfVxyXG4gICAgICAgICAgdXNlRGF0YVNvdXJjZXM9e3VzZURhdGFTb3VyY2VzfVxyXG4gICAgICAgICAgdXNlUnVudGltZURhdGE9e3VzZVJ1bnRpbWVEYXRhfVxyXG4gICAgICAgICAgb25TZWxlY3Rpb25DaGFuZ2U9e2hhbmRsZVNlbGVjdGlvbkNoYW5nZX1cclxuICAgICAgICAgIG9uUmVsYXRpb25DaGFuZ2U9e29uUmVsYXRpb25DaGFuZ2V9XHJcbiAgICAgICAgICBvbkJ1ZmZlckNoYW5nZT17b25CdWZmZXJDaGFuZ2V9XHJcbiAgICAgICAgLz5cclxuICAgICAgKX1cclxuICAgICAge2N1cnJlbnRGaWx0ZXJUeXBlID09PSAnbWFwJyAmJiAoXHJcbiAgICAgICAgPEdlb21ldHJ5RnJvbU1hcFxyXG4gICAgICAgICAgbWFwV2lkZ2V0SWRzPXttYXBXaWRnZXRJZHN9XHJcbiAgICAgICAgICBjcmVhdGVUb29sVHlwZXM9e2NyZWF0ZVRvb2xUeXBlc31cclxuICAgICAgICAgIG9uR2VvbWV0cnlDaGFuZ2U9e2hhbmRsZUdlb21ldHJ5Q2hhbmdlfVxyXG4gICAgICAgIC8+XHJcbiAgICAgICl9XHJcbiAgICAgIHtjdXJyZW50RmlsdGVyVHlwZSA9PT0gJ2RyYXcnICYmIChcclxuICAgICAgICA8R2VvbWV0cnlGcm9tRHJhd1xyXG4gICAgICAgICAgZW5hYmxlQnVmZmVyPXtkcmF3RW5hYmxlQnVmZmVyfVxyXG4gICAgICAgICAgYnVmZmVyRGlzdGFuY2U9e2RyYXdCdWZmZXJEaXN0YW5jZX1cclxuICAgICAgICAgIGJ1ZmZlclVuaXQ9e2RyYXdCdWZmZXJVbml0fVxyXG4gICAgICAgICAgbWFwV2lkZ2V0SWRzPXttYXBXaWRnZXRJZHN9XHJcbiAgICAgICAgICB3aWRnZXRJZD17d2lkZ2V0SWR9XHJcbiAgICAgICAgICBjcmVhdGVUb29sVHlwZXM9e2NyZWF0ZVRvb2xUeXBlc31cclxuICAgICAgICAgIG9uR2VvbWV0cnlDaGFuZ2U9e2hhbmRsZUdlb21ldHJ5Q2hhbmdlfVxyXG4gICAgICAgICAgb25CdWZmZXJDaGFuZ2U9e29uQnVmZmVyQ2hhbmdlfVxyXG4gICAgICAgIC8+XHJcbiAgICAgICl9XHJcbiAgICA8L2Rpdj5cclxuICApXHJcbn1cclxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQge1xuICBSZWFjdCxcbiAganN4LFxuICBjc3MsXG4gIHR5cGUgSW1tdXRhYmxlT2JqZWN0LFxuICB0eXBlIEltbXV0YWJsZUFycmF5LFxuICB0eXBlIElNU3FsRXhwcmVzc2lvbixcbiAgRGF0YVNvdXJjZUNvbXBvbmVudCxcbiAgdHlwZSBEYXRhU291cmNlLFxuICB0eXBlIFVzZURhdGFTb3VyY2UsXG4gIEltbXV0YWJsZSxcbiAgdHlwZSBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLFxuICBjbGFzc05hbWVzLFxuICBDT05TVEFOVFMsXG4gIHR5cGUgRGF0YVJlY29yZCxcbiAgdHlwZSBEYXRhUmVjb3JkU2V0LFxuICB0eXBlIFF1ZXJ5UGFyYW1zLFxuICBEYXRhU291cmNlU3RhdHVzLFxuICBEYXRhUmVjb3JkU2V0Q2hhbmdlTWVzc2FnZSxcbiAgRGF0YVJlY29yZHNTZWxlY3Rpb25DaGFuZ2VNZXNzYWdlLFxuICBSZWNvcmRTZXRDaGFuZ2VUeXBlLFxuICBNZXNzYWdlTWFuYWdlcixcbiAgTXV0YWJsZVN0b3JlTWFuYWdlcixcbiAgRGF0YUFjdGlvbk1hbmFnZXIsXG4gIERhdGFMZXZlbCxcbiAgdHlwZSBRdWVyaWFibGVEYXRhU291cmNlLFxuICB0eXBlIEZlYXR1cmVMYXllclF1ZXJ5UGFyYW1zLFxuICBob29rcyxcbiAgbG9kYXNoLFxuICBEYXRhU291cmNlTWFuYWdlcixcbiAgZm9jdXNFbGVtZW50SW5LZXlib2FyZE1vZGUsXG4gIFJlYWN0UmVkdXgsXG4gIHR5cGUgSU1TdGF0ZSxcbiAgdHlwZSBGZWF0dXJlRGF0YVJlY29yZFxufSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBCdXR0b24sIFRvb2x0aXAsIEZPQ1VTQUJMRV9DT05UQUlORVJfQ0xBU1MsIFRhYnMsIFRhYiwgU2VsZWN0IH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB7IEluZm9PdXRsaW5lZCB9IGZyb20gJ2ppbXUtaWNvbnMvb3V0bGluZWQvc3VnZ2VzdGVkL2luZm8nXG5pbXBvcnQgeyBUcmFzaE91dGxpbmVkIH0gZnJvbSAnamltdS1pY29ucy9vdXRsaW5lZC9lZGl0b3IvdHJhc2gnXG5pbXBvcnQgeyBQYWdpbmdUeXBlLCB0eXBlIFF1ZXJ5SXRlbVR5cGUsIHR5cGUgU3BhdGlhbEZpbHRlck9iaiwgU2VsZWN0aW9uVHlwZSB9IGZyb20gJy4uL2NvbmZpZydcbmltcG9ydCB7IFF1ZXJ5VGFza0Zvcm0gfSBmcm9tICcuL3F1ZXJ5LXRhc2stZm9ybSdcbmltcG9ydCB7IFF1ZXJ5VGFza1Jlc3VsdCB9IGZyb20gJy4vcXVlcnktcmVzdWx0J1xuaW1wb3J0IHsgRGF0YVNvdXJjZVRpcCwgdXNlRGF0YVNvdXJjZUV4aXN0cywgRXJyb3JNZXNzYWdlIH0gZnJvbSAnd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24nXG5pbXBvcnQgeyBRdWVyeVRhc2tMYWJlbCB9IGZyb20gJy4vcXVlcnktdGFzay1sYWJlbCdcbmltcG9ydCB7IERFRkFVTFRfUVVFUllfSVRFTSB9IGZyb20gJy4uL2RlZmF1bHQtcXVlcnktaXRlbSdcbmltcG9ydCB7IGdlbmVyYXRlUXVlcnlQYXJhbXMsIGV4ZWN1dGVRdWVyeSwgZXhlY3V0ZUNvdW50UXVlcnkgfSBmcm9tICcuL3F1ZXJ5LXV0aWxzJ1xuaW1wb3J0IHsgbWVyZ2VSZXN1bHRzSW50b0FjY3VtdWxhdGVkLCByZW1vdmVSZXN1bHRzRnJvbUFjY3VtdWxhdGVkLCByZW1vdmVSZWNvcmRzRnJvbU9yaWdpblNlbGVjdGlvbnMgfSBmcm9tICcuL3Jlc3VsdHMtbWFuYWdlbWVudC11dGlscydcbmltcG9ydCB7IE1lbnVPdXRsaW5lZCB9IGZyb20gJ2ppbXUtaWNvbnMvb3V0bGluZWQvZWRpdG9yL21lbnUnXG5pbXBvcnQgZGVmYXVsdE1lc3NhZ2UgZnJvbSAnLi90cmFuc2xhdGlvbnMvZGVmYXVsdCdcbmltcG9ydCB7IEFycm93TGVmdE91dGxpbmVkIH0gZnJvbSAnamltdS1pY29ucy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9hcnJvdy1sZWZ0J1xuaW1wb3J0IHsgTG9hZGluZ1Jlc3VsdCB9IGZyb20gJy4vbG9hZGluZy1yZXN1bHQnXG5pbXBvcnQgeyBjbGVhclNlbGVjdGlvbkluRGF0YVNvdXJjZXMsIHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoLCBmaW5kQ2xlYXJSZXN1bHRzQnV0dG9uLCBkaXNwYXRjaFNlbGVjdGlvbkV2ZW50IH0gZnJvbSAnLi9zZWxlY3Rpb24tdXRpbHMnXG5pbXBvcnQgeyBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyIH0gZnJvbSAnd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24nXG5cbmNvbnN0IGRlYnVnTG9nZ2VyID0gY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlcigpXG5cbmV4cG9ydCBpbnRlcmZhY2UgUXVlcnlUYXNrUHJvcHMge1xuICB3aWRnZXRJZDogc3RyaW5nXG4gIGluZGV4OiBudW1iZXJcbiAgdG90YWw6IG51bWJlclxuICBxdWVyeUl0ZW06IEltbXV0YWJsZU9iamVjdDxRdWVyeUl0ZW1UeXBlPlxuICB3cmFwcGVkSW5Qb3BwZXI/OiBib29sZWFuXG4gIGNsYXNzTmFtZT86IHN0cmluZ1xuICBpc0luUG9wcGVyPzogYm9vbGVhblxuICBvbk5hdkJhY2s/OiAoKSA9PiB2b2lkXG4gIGluaXRpYWxJbnB1dFZhbHVlPzogc3RyaW5nXG4gIG9uSGFzaFBhcmFtZXRlclVzZWQ/OiAoc2hvcnRJZDogc3RyaW5nKSA9PiB2b2lkXG4gIHF1ZXJ5SXRlbVNob3J0SWQ/OiBzdHJpbmdcbiAgLy8gUHJvcHMgZm9yIFNlYXJjaCBMYXllciBkcm9wZG93biAod2hlbiBtdWx0aXBsZSBxdWVyaWVzKVxuICBxdWVyeUl0ZW1zPzogSW1tdXRhYmxlQXJyYXk8UXVlcnlJdGVtVHlwZT5cbiAgc2VsZWN0ZWRRdWVyeUluZGV4PzogbnVtYmVyXG4gIG9uUXVlcnlDaGFuZ2U/OiAoaW5kZXg6IG51bWJlcikgPT4gdm9pZFxuICAvLyBHcm91cGluZyBwcm9wc1xuICBncm91cHM/OiB7IFtncm91cElkOiBzdHJpbmddOiB7IGl0ZW1zOiBJbW11dGFibGVBcnJheTxRdWVyeUl0ZW1UeXBlPiwgZGlzcGxheU5hbWU6IHN0cmluZywgaWNvbj86IGFueSB9IH1cbiAgdW5ncm91cGVkPzogQXJyYXk8eyBpdGVtOiBJbW11dGFibGVPYmplY3Q8UXVlcnlJdGVtVHlwZT4sIGluZGV4OiBudW1iZXIgfT5cbiAgZ3JvdXBPcmRlcj86IHN0cmluZ1tdXG4gIHNlbGVjdGVkR3JvdXBJZD86IHN0cmluZyB8IG51bGxcbiAgc2VsZWN0ZWRHcm91cFF1ZXJ5SW5kZXg/OiBudW1iZXJcbiAgb25Hcm91cENoYW5nZT86IChncm91cElkOiBzdHJpbmcgfCBudWxsKSA9PiB2b2lkXG4gIG9uR3JvdXBRdWVyeUNoYW5nZT86IChpbmRleDogbnVtYmVyKSA9PiB2b2lkXG4gIG9uVW5ncm91cGVkQ2hhbmdlPzogKGluZGV4OiBudW1iZXIpID0+IHZvaWRcbiAgLy8gUmVzdWx0cyBtb2RlIHByb3BzXG4gIHJlc3VsdHNNb2RlPzogU2VsZWN0aW9uVHlwZVxuICBvblJlc3VsdHNNb2RlQ2hhbmdlPzogKG1vZGU6IFNlbGVjdGlvblR5cGUpID0+IHZvaWRcbiAgYWNjdW11bGF0ZWRSZWNvcmRzPzogRmVhdHVyZURhdGFSZWNvcmRbXVxuICBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZT86IChyZWNvcmRzOiBGZWF0dXJlRGF0YVJlY29yZFtdKSA9PiB2b2lkXG4gIC8vIEdyYXBoaWNzIGxheWVyIHByb3BzXG4gIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQ/OiBib29sZWFuXG4gIGdyYXBoaWNzTGF5ZXI/OiBfX2VzcmkuR3JhcGhpY3NMYXllclxuICBtYXBWaWV3PzogX19lc3JpLk1hcFZpZXcgfCBfX2VzcmkuU2NlbmVWaWV3XG4gIG9uSW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXI/OiAob3V0cHV0RFM6IERhdGFTb3VyY2UpID0+IFByb21pc2U8dm9pZD5cbiAgb25DbGVhckdyYXBoaWNzTGF5ZXI/OiAoKSA9PiB2b2lkXG4gIGFjdGl2ZVRhYj86ICdxdWVyeScgfCAncmVzdWx0cydcbiAgb25UYWJDaGFuZ2U/OiAodGFiOiAncXVlcnknIHwgJ3Jlc3VsdHMnKSA9PiB2b2lkXG59XG5cbi8vIEhlbHBlciBmdW5jdGlvbiB0byBnZXQgZGlzcGxheSBuYW1lIGZvciBxdWVyeSBpbiBkcm9wZG93blxuLy8gVXNlczogc2VhcmNoQWxpYXMgfHwgamltdUZpZWxkTmFtZSB8fCBpdGVtLm5hbWUgfHwgZmFsbGJhY2tcbmNvbnN0IGdldFF1ZXJ5RGlzcGxheU5hbWUgPSAoaXRlbTogSW1tdXRhYmxlT2JqZWN0PFF1ZXJ5SXRlbVR5cGU+KTogc3RyaW5nID0+IHtcbiAgLy8gRmlyc3QgcHJpb3JpdHk6IHNlYXJjaEFsaWFzIGlmIHNldFxuICBpZiAoaXRlbS5zZWFyY2hBbGlhcykge1xuICAgIHJldHVybiBpdGVtLnNlYXJjaEFsaWFzXG4gIH1cbiAgXG4gIC8vIFNlY29uZCBwcmlvcml0eTogZmllbGQgbmFtZSBmcm9tIFNRTCBleHByZXNzaW9uXG4gIGNvbnN0IGppbXVGaWVsZE5hbWUgPSBpdGVtLnNxbEV4cHJPYmo/LnBhcnRzPy5bMF0/LmppbXVGaWVsZE5hbWVcbiAgaWYgKGppbXVGaWVsZE5hbWUpIHtcbiAgICByZXR1cm4gamltdUZpZWxkTmFtZVxuICB9XG4gIFxuICAvLyBUaGlyZCBwcmlvcml0eTogaXRlbSBuYW1lXG4gIGlmIChpdGVtLm5hbWUpIHtcbiAgICByZXR1cm4gaXRlbS5uYW1lXG4gIH1cbiAgXG4gIC8vIEZhbGxiYWNrXG4gIHJldHVybiAnUXVlcnknXG59XG5cbmNvbnN0IHN0eWxlID0gY3NzYFxuICAmLndyYXBwZWQgLnF1ZXJ5LWZvcm0ge1xuICAgIGhlaWdodDogMTAwJTtcbiAgfVxuICAucXVlcnktdGFza19fY29udGVudCB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIHBhZGRpbmctdG9wOiA4cHg7XG4gICAgJjpoYXMoPiAucXVlcnktZm9ybV9faGVhZGVyID4gZGl2Om5vdCguZC1ub25lKSksICY6aGFzKD4gLnF1ZXJ5LXJlc3VsdCkge1xuICAgICAgcGFkZGluZy10b3A6IDE2cHg7XG4gICAgfVxuICB9XG4gIC5xdWVyeS1mb3JtX19oZWFkZXIge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgJi5oYXMtY29udGVudCB7XG4gICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tc3lzLWNvbG9yLWRpdmlkZXItc2Vjb25kYXJ5KTtcbiAgICAgIG1hcmdpbi1ib3R0b206IDZweDtcbiAgICAgIHBhZGRpbmctYm90dG9tOiA4cHg7XG4gICAgfVxuICAgIC5uYXYtYWN0aW9uIHtcbiAgICAgIGZsZXg6IDEgMSAwO1xuICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAuamltdS1idG4ge1xuICAgICAgICBtaW4td2lkdGg6IDI2cHg7XG4gICAgICB9XG4gICAgfVxuICAgIC5yZXN1bHQtbWVudSB7XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgIH1cbiAgfVxuYFxuXG5leHBvcnQgZnVuY3Rpb24gUXVlcnlUYXNrIChwcm9wczogUXVlcnlUYXNrUHJvcHMpIHtcbiAgY29uc3QgeyBxdWVyeUl0ZW0sIG9uTmF2QmFjaywgdG90YWwsIGlzSW5Qb3BwZXIgPSBmYWxzZSwgd3JhcHBlZEluUG9wcGVyID0gZmFsc2UsIGNsYXNzTmFtZSA9ICcnLCBpbmRleCwgaW5pdGlhbElucHV0VmFsdWUsIG9uSGFzaFBhcmFtZXRlclVzZWQsIHF1ZXJ5SXRlbXMsIHNlbGVjdGVkUXVlcnlJbmRleCwgb25RdWVyeUNoYW5nZSwgZ3JvdXBzLCB1bmdyb3VwZWQsIGdyb3VwT3JkZXIsIHNlbGVjdGVkR3JvdXBJZCwgc2VsZWN0ZWRHcm91cFF1ZXJ5SW5kZXgsIG9uR3JvdXBDaGFuZ2UsIG9uR3JvdXBRdWVyeUNoYW5nZSwgb25Vbmdyb3VwZWRDaGFuZ2UsIHJlc3VsdHNNb2RlLCBvblJlc3VsdHNNb2RlQ2hhbmdlLCBhY2N1bXVsYXRlZFJlY29yZHMsIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlLCB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0LCBncmFwaGljc0xheWVyLCBtYXBWaWV3LCBvbkluaXRpYWxpemVHcmFwaGljc0xheWVyLCBvbkNsZWFyR3JhcGhpY3NMYXllciwgYWN0aXZlVGFiOiBwcm9wQWN0aXZlVGFiLCBvblRhYkNoYW5nZTogcHJvcE9uVGFiQ2hhbmdlLCAuLi5vdGhlclByb3BzIH0gPSBwcm9wc1xuICBjb25zdCBnZXRJMThuTWVzc2FnZSA9IGhvb2tzLnVzZVRyYW5zbGF0aW9uKGRlZmF1bHRNZXNzYWdlKVxuICBjb25zdCBbc3RhZ2UsIHNldFN0YWdlXSA9IFJlYWN0LnVzZVN0YXRlKDApIC8vIDAgPSBmb3JtLCAxID0gcmVzdWx0cywgMiA9IGxvYWRpbmdcbiAgY29uc3QgW2ludGVybmFsQWN0aXZlVGFiLCBzZXRJbnRlcm5hbEFjdGl2ZVRhYl0gPSBSZWFjdC51c2VTdGF0ZTwncXVlcnknIHwgJ3Jlc3VsdHMnPigncXVlcnknKVxuICBcbiAgLy8gQ29udHJvbGxlZCB0YWIgc3RhdGU6IHVzZSBwcm9wIGlmIHByb3ZpZGVkLCBvdGhlcndpc2UgaW50ZXJuYWwgc3RhdGVcbiAgY29uc3QgYWN0aXZlVGFiID0gcHJvcEFjdGl2ZVRhYiB8fCBpbnRlcm5hbEFjdGl2ZVRhYlxuICBjb25zdCBzZXRBY3RpdmVUYWIgPSBSZWFjdC51c2VDYWxsYmFjaygodGFiOiAncXVlcnknIHwgJ3Jlc3VsdHMnKSA9PiB7XG4gICAgaWYgKHByb3BPblRhYkNoYW5nZSkge1xuICAgICAgcHJvcE9uVGFiQ2hhbmdlKHRhYilcbiAgICB9IGVsc2Uge1xuICAgICAgc2V0SW50ZXJuYWxBY3RpdmVUYWIodGFiKVxuICAgIH1cbiAgfSwgW3Byb3BPblRhYkNoYW5nZV0pXG4gIGNvbnN0IFtlbmFibGVkLCBzZXRFbmFibGVkXSA9IFJlYWN0LnVzZVN0YXRlKHRydWUpXG4gIGNvbnN0IFtyZXN1bHRDb3VudCwgc2V0UmVzdWx0Q291bnRdID0gUmVhY3QudXNlU3RhdGUoMClcbiAgLy8gVHJhY2sgaWYgd2UndmUgYWxyZWFkeSBzZWxlY3RlZCByZWNvcmRzIGZvciB0aGUgY3VycmVudCBxdWVyeSByZXN1bHRzXG4gIGNvbnN0IGhhc1NlbGVjdGVkUmVjb3Jkc1JlZiA9IFJlYWN0LnVzZVJlZihmYWxzZSlcbiAgLy8gVHJhY2sgcXVlcnkgZXhlY3V0aW9uIGNvdW50IHRvIGZvcmNlIFF1ZXJ5VGFza1Jlc3VsdCByZW1vdW50IG9uIG5ldyBxdWVyaWVzXG4gIGNvbnN0IHF1ZXJ5RXhlY3V0aW9uS2V5UmVmID0gUmVhY3QudXNlUmVmKDApXG4gIGNvbnN0IHF1ZXJ5UGFyYW1SZWYgPSBSZWFjdC51c2VSZWY8UXVlcnlQYXJhbXM+KG51bGwpXG4gIGNvbnN0IHJlY29yZHNSZWYgPSBSZWFjdC51c2VSZWY8RGF0YVJlY29yZFtdPihudWxsKVxuICBjb25zdCBbb3V0cHV0RFMsIHNldE91dHB1dERTXSA9IFJlYWN0LnVzZVN0YXRlPERhdGFTb3VyY2U+KG51bGwpXG4gIGNvbnN0IFtkYXRhU291cmNlLCBzZXREYXRhU291cmNlXSA9IFJlYWN0LnVzZVN0YXRlPERhdGFTb3VyY2U+KG51bGwpXG4gIGNvbnN0IFtzcGF0aWFsRmlsdGVyRW5hYmxlZCwgc2V0U3BhdGlhbEZpbHRlckVuYWJsZWRdID0gUmVhY3QudXNlU3RhdGUodHJ1ZSlcbiAgY29uc3QgYXR0cmlidXRlRmlsdGVyU3FsRXhwck9iaiA9IFJlYWN0LnVzZVJlZjxJTVNxbEV4cHJlc3Npb24+KHF1ZXJ5SXRlbS5zcWxFeHByT2JqKVxuICBjb25zdCBzcGF0aWFsRmlsdGVyT2JqID0gUmVhY3QudXNlUmVmKG51bGwpXG4gIGNvbnN0IGJhY2tCdG5SZWYgPSBSZWFjdC51c2VSZWY8SFRNTEJ1dHRvbkVsZW1lbnQ+KHVuZGVmaW5lZClcbiAgY29uc3QgY2xlYXJSZXN1bHRCdG5SZWYgPSBSZWFjdC51c2VSZWY8SFRNTEJ1dHRvbkVsZW1lbnQ+KHVuZGVmaW5lZClcbiAgY29uc3QgW2RhdGFBY3Rpb25GaWx0ZXIsIHNldERhdGFBY3Rpb25GaWx0ZXJdID0gUmVhY3QudXNlU3RhdGUobnVsbClcbiAgY29uc3QgcHJldmlvdXNDb25maWdJZFJlZiA9IFJlYWN0LnVzZVJlZjxzdHJpbmc+KHF1ZXJ5SXRlbS5jb25maWdJZClcbiAgLy8gVHJhY2sgbWFudWFsIHRhYiBzd2l0Y2hlcyB0byBwcmV2ZW50IGF1dG8tc3dpdGNoIHVzZUVmZmVjdCBmcm9tIGludGVyZmVyaW5nXG4gIGNvbnN0IG1hbnVhbFRhYlN3aXRjaFJlZiA9IFJlYWN0LnVzZVJlZihmYWxzZSlcbiAgLy8gVHJhY2sgd2hlbiBhIHF1ZXJ5IHdhcyBqdXN0IGV4ZWN1dGVkIC0gb25seSBhdXRvLXN3aXRjaCBhZnRlciBxdWVyeSBleGVjdXRpb24gY29tcGxldGVzXG4gIGNvbnN0IHF1ZXJ5SnVzdEV4ZWN1dGVkUmVmID0gUmVhY3QudXNlUmVmKGZhbHNlKVxuICAvLyBTdG9yZSB0aGUgbGFzdCBydW50aW1lIHpvb20gb3ZlcnJpZGUgdmFsdWUgZnJvbSB0aGUgZm9ybSBmb3IgdXNlIGJ5IEFkZCB0byBNYXAgYWN0aW9uXG4gIGNvbnN0IGxhc3RSdW50aW1lWm9vbVRvU2VsZWN0ZWRSZWYgPSBSZWFjdC51c2VSZWY8Ym9vbGVhbiB8IHVuZGVmaW5lZD4odW5kZWZpbmVkKVxuICAvLyBFcnJvciBzdGF0ZXMgZm9yIHVzZXItZmFjaW5nIGVycm9yc1xuICBjb25zdCBbc2VsZWN0aW9uRXJyb3IsIHNldFNlbGVjdGlvbkVycm9yXSA9IFJlYWN0LnVzZVN0YXRlPHN0cmluZz4obnVsbClcbiAgY29uc3QgW3pvb21FcnJvciwgc2V0Wm9vbUVycm9yXSA9IFJlYWN0LnVzZVN0YXRlPHN0cmluZz4obnVsbClcblxuICBjb25zdCBjdXJyZW50SXRlbSA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfUVVFUllfSVRFTSwgcXVlcnlJdGVtKVxuICBjb25zdCB7IGljb24sIG5hbWUsIGRpc3BsYXlMYWJlbCB9ID0gY3VycmVudEl0ZW1cbiAgY29uc3QgZHNFeGlzdHM6IGJvb2xlYW4gPSB1c2VEYXRhU291cmNlRXhpc3RzKHsgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLCB1c2VEYXRhU291cmNlSWQ6IGN1cnJlbnRJdGVtLnVzZURhdGFTb3VyY2U/LmRhdGFTb3VyY2VJZCB9KVxuXG4gIC8vIERlYnVnIGxvZ2dpbmcgZm9yIHRhYiBjb250ZW50IHJlbmRlcmluZ1xuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgIGV2ZW50OiAncXVlcnktdGFiLWNvbnRlbnQtcmVuZGVyJyxcbiAgICAgIGFjdGl2ZVRhYixcbiAgICAgIGVuYWJsZWQsXG4gICAgICBkc0V4aXN0cyxcbiAgICAgIGRhdGFTb3VyY2U6IGRhdGFTb3VyY2UgPyAnZXhpc3RzJyA6ICdudWxsJyxcbiAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBxdWVyeUl0ZW0uY29uZmlnSWQsXG4gICAgICBub3RlOiAnUXVlcnkgdGFiIGNvbnRlbnQgc3RhdGUgY2hlY2snXG4gICAgfSlcbiAgfSwgW2FjdGl2ZVRhYiwgZW5hYmxlZCwgZHNFeGlzdHMsIGRhdGFTb3VyY2UsIHF1ZXJ5SXRlbS5jb25maWdJZF0pXG5cbiAgLy8gRGVidWcgbG9nZ2luZyBmb3IgVGFiIGNoaWxkcmVuIHJlbmRlcmluZ1xuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChhY3RpdmVUYWIgPT09ICdxdWVyeScpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgICAgZXZlbnQ6ICdxdWVyeS10YWItY2hpbGRyZW4tcmVuZGVyJyxcbiAgICAgICAgYWN0aXZlVGFiLFxuICAgICAgICBxdWVyeUl0ZW1Db25maWdJZDogcXVlcnlJdGVtLmNvbmZpZ0lkLFxuICAgICAgICBub3RlOiAnUXVlcnkgVGFiIGNoaWxkcmVuIHNob3VsZCBiZSByZW5kZXJpbmcnXG4gICAgICB9KVxuICAgIH1cbiAgfSwgW2FjdGl2ZVRhYiwgcXVlcnlJdGVtLmNvbmZpZ0lkXSlcblxuICBob29rcy51c2VFZmZlY3RPbmNlKCgpID0+IHtcbiAgICAvLyBmb2N1cyB0aGUgYmFjayBidXR0b24gd2hlbiBpdCBpcyByZW5kZXJlZFxuICAgIGZvY3VzRWxlbWVudEluS2V5Ym9hcmRNb2RlKGJhY2tCdG5SZWYuY3VycmVudClcbiAgfSlcblxuICAvLyBHZXQgdGhlIHBhZ2luYXRpb24gc3R5bGUgZnJvbSB3aWRnZXQgY29uZmlnIChNdWx0aVBhZ2Ugb3IgTGF6eUxvYWQvU2luZ2xlLXBhZ2UpXG4gIGNvbnN0IHBhZ2luZ1R5cGVJbkNvbmZpZyA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XG4gICAgY29uc3Qgd2lkZ2V0SnNvbiA9IHN0YXRlLmFwcENvbmZpZy53aWRnZXRzW3Byb3BzLndpZGdldElkXVxuICAgIHJldHVybiB3aWRnZXRKc29uLmNvbmZpZy5yZXN1bHRQYWdpbmdTdHlsZVxuICB9KVxuXG4gIC8vIEdldCB0aGUgaW5pdGlhbCBwYWdlIHNpemUgZm9yIHNpbmdsZS1wYWdlIChMYXp5TG9hZCkgcmVzdWx0c1xuICAvLyBUaGlzIGFsbG93cyB1c2VycyB0byBjb25maWd1cmUgaG93IG1hbnkgcmVjb3JkcyBhcmUgbG9hZGVkIGluaXRpYWxseSB3aGVuIHVzaW5nIHNpbmdsZS1wYWdlIG1vZGVcbiAgLy8gRGVmYXVsdHMgdG8gMTAwIGlmIG5vdCBjb25maWd1cmVkXG4gIGNvbnN0IGxhenlMb2FkSW5pdGlhbFBhZ2VTaXplID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcbiAgICBjb25zdCB3aWRnZXRKc29uID0gc3RhdGUuYXBwQ29uZmlnLndpZGdldHNbcHJvcHMud2lkZ2V0SWRdXG4gICAgcmV0dXJuIHdpZGdldEpzb24uY29uZmlnLmxhenlMb2FkSW5pdGlhbFBhZ2VTaXplXG4gIH0pXG5cblxuICAvLyBXYXRjaCBmb3Igd2hlbiByZXN1bHRzIGFyZSByZWFkeSBhbmQgc3dpdGNoIHRvIFJlc3VsdHMgdGFiXG4gIC8vIE9OTFkgYXV0by1zd2l0Y2ggd2hlbiBhIHF1ZXJ5IHdhcyBqdXN0IGV4ZWN1dGVkIGFuZCByZXN1bHRzIGFyZSBsb2FkZWRcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBEb24ndCBhdXRvLXN3aXRjaCBpZiB1c2VyIG1hbnVhbGx5IHN3aXRjaGVkIHRhYnNcbiAgICBpZiAobWFudWFsVGFiU3dpdGNoUmVmLmN1cnJlbnQpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgICAgZXZlbnQ6ICdhdXRvLXN3aXRjaC1za2lwcGVkJyxcbiAgICAgICAgcmVhc29uOiAnbWFudWFsLXRhYi1zd2l0Y2gtZmxhZy1zZXQnLFxuICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBxdWVyeUl0ZW0uY29uZmlnSWQsXG4gICAgICAgIGFjdGl2ZVRhYixcbiAgICAgICAgcmVzdWx0Q291bnQsXG4gICAgICAgIHF1ZXJ5SnVzdEV4ZWN1dGVkUmVmOiBxdWVyeUp1c3RFeGVjdXRlZFJlZi5jdXJyZW50LFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgLy8gRk9SQ0VEOiBBbHdheXMgdXNlIFNpbXBsZUxpc3QgLSB3ZSdyZSBkb25lIHdpdGggbGF6eSBsb2FkaW5nIGlzc3Vlc1xuICAgIC8vIFJlY29yZHMgYXJlIGF2YWlsYWJsZSBpbW1lZGlhdGVseSwgc28gd2UgY2FuIHN3aXRjaCBhcyBzb29uIGFzIHJlc3VsdENvdW50ID4gMFxuICAgIGNvbnN0IGlzU2ltcGxlTGlzdCA9IHRydWVcbiAgICBcbiAgICAvLyBPTkxZIGF1dG8tc3dpdGNoIHdoZW46XG4gICAgLy8gMS4gQSBxdWVyeSB3YXMganVzdCBleGVjdXRlZCAocXVlcnlKdXN0RXhlY3V0ZWRSZWYuY3VycmVudCA9PT0gdHJ1ZSlcbiAgICAvLyAyLiBXZSBoYXZlIHJlc3VsdHMgKHJlc3VsdENvdW50ID4gMClcbiAgICAvLyAzLiBSZWNvcmRzIGFyZSBhY3R1YWxseSBsb2FkZWQ6XG4gICAgLy8gICAgLSBGb3IgU2ltcGxlTGlzdDogcmVzdWx0Q291bnQgPiAwIGlzIHN1ZmZpY2llbnQgKHJlY29yZHMgYXZhaWxhYmxlIGltbWVkaWF0ZWx5KVxuICAgIC8vICAgIC0gRm9yIExhenlMb2FkOiByZWNvcmRzUmVmLmN1cnJlbnQgbXVzdCBoYXZlIGRhdGEgKHdhaXQgZm9yIGxhenkgbG9hZGluZylcbiAgICAvLyA0LiBXZSdyZSBjdXJyZW50bHkgb24gdGhlIHF1ZXJ5IHRhYiAoZG9uJ3Qgc3dpdGNoIGlmIGFscmVhZHkgb24gcmVzdWx0cylcbiAgICBjb25zdCBoYXNSZWNvcmRzID0gaXNTaW1wbGVMaXN0IFxuICAgICAgPyByZXN1bHRDb3VudCA+IDAgXG4gICAgICA6IChyZWNvcmRzUmVmLmN1cnJlbnQgJiYgcmVjb3Jkc1JlZi5jdXJyZW50Lmxlbmd0aCA+IDApXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgZXZlbnQ6ICdhdXRvLXN3aXRjaC1jaGVjaycsXG4gICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICBxdWVyeUl0ZW1Db25maWdJZDogcXVlcnlJdGVtLmNvbmZpZ0lkLFxuICAgICAgYWN0aXZlVGFiLFxuICAgICAgcmVzdWx0Q291bnQsXG4gICAgICBxdWVyeUp1c3RFeGVjdXRlZFJlZjogcXVlcnlKdXN0RXhlY3V0ZWRSZWYuY3VycmVudCxcbiAgICAgIGlzU2ltcGxlTGlzdCxcbiAgICAgIHBhZ2luZ1R5cGVJbkNvbmZpZyxcbiAgICAgIGhhc1JlY29yZHMsXG4gICAgICByZWNvcmRzUmVmTGVuZ3RoOiByZWNvcmRzUmVmLmN1cnJlbnQ/Lmxlbmd0aCB8fCAwLFxuICAgICAgbWFudWFsVGFiU3dpdGNoUmVmOiBtYW51YWxUYWJTd2l0Y2hSZWYuY3VycmVudCxcbiAgICAgIHdpbGxBdXRvU3dpdGNoOiBxdWVyeUp1c3RFeGVjdXRlZFJlZi5jdXJyZW50ICYmIHJlc3VsdENvdW50ID4gMCAmJiBoYXNSZWNvcmRzICYmIGFjdGl2ZVRhYiA9PT0gJ3F1ZXJ5JyxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgaWYgKHF1ZXJ5SnVzdEV4ZWN1dGVkUmVmLmN1cnJlbnQgJiYgXG4gICAgICAgIHJlc3VsdENvdW50ID4gMCAmJiBcbiAgICAgICAgaGFzUmVjb3JkcyAmJiBcbiAgICAgICAgYWN0aXZlVGFiID09PSAncXVlcnknKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICAgIGV2ZW50OiAnYXV0by1zd2l0Y2gtdHJpZ2dlcmVkJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICBxdWVyeUl0ZW1Db25maWdJZDogcXVlcnlJdGVtLmNvbmZpZ0lkLFxuICAgICAgICBmcm9tVGFiOiBhY3RpdmVUYWIsXG4gICAgICAgIHRvVGFiOiAncmVzdWx0cycsXG4gICAgICAgIHJlc3VsdENvdW50LFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICBzZXRBY3RpdmVUYWIoJ3Jlc3VsdHMnKVxuICAgICAgcXVlcnlKdXN0RXhlY3V0ZWRSZWYuY3VycmVudCA9IGZhbHNlIC8vIFJlc2V0IGFmdGVyIHN3aXRjaGluZ1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgICBldmVudDogJ2F1dG8tc3dpdGNoLWNvbXBsZXRlZCcsXG4gICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZCxcbiAgICAgICAgcXVlcnlKdXN0RXhlY3V0ZWRSZWZSZXNldDogcXVlcnlKdXN0RXhlY3V0ZWRSZWYuY3VycmVudCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgIH1cbiAgfSwgW3Jlc3VsdENvdW50LCBhY3RpdmVUYWIsIHBhZ2luZ1R5cGVJbkNvbmZpZ10pXG5cbiAgLy8gVmVyaWZ5IGRyb3Bkb3ducyBhcmUgc3luY2hyb25pemVkIHdpdGggaGFzaCBwYXJhbWV0ZXIgd2hlbiBwcmVzZW50XG4gIC8vIFRoaXMgaXMgZXNwZWNpYWxseSBpbXBvcnRhbnQgZm9yIGdyb3VwZWQgcXVlcmllcyB3aGVyZSBkcm9wZG93bnMgbmVlZCB0byBiZSBzeW5jaHJvbml6ZWRcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBPbmx5IHZlcmlmeSBpZiB3ZSBoYXZlIGEgaGFzaCBwYXJhbWV0ZXJcbiAgICBpZiAoIWluaXRpYWxJbnB1dFZhbHVlIHx8ICFxdWVyeUl0ZW0uc2hvcnRJZCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIC8vIFZlcmlmeSB0aGUgY3VycmVudCBxdWVyeUl0ZW0gbWF0Y2hlcyB3aGF0IHdlIGV4cGVjdCBmcm9tIGhhc2ggcGFyYW1ldGVyXG4gICAgY29uc3QgZXhwZWN0ZWRTaG9ydElkID0gcXVlcnlJdGVtLnNob3J0SWRcbiAgICBjb25zdCBpc0dyb3VwZWRRdWVyeSA9IHF1ZXJ5SXRlbS5ncm91cElkICE9PSBudWxsICYmIHF1ZXJ5SXRlbS5ncm91cElkICE9PSB1bmRlZmluZWRcbiAgICBcbiAgICAvLyBDaGVjayBpZiBkcm9wZG93bnMgYXJlIGNvcnJlY3RseSBzZXQgZm9yIGdyb3VwZWQgcXVlcmllc1xuICAgIGlmIChpc0dyb3VwZWRRdWVyeSkge1xuICAgICAgY29uc3QgZXhwZWN0ZWRHcm91cElkID0gcXVlcnlJdGVtLmdyb3VwSWRcbiAgICAgIGNvbnN0IGFjdHVhbEdyb3VwSWQgPSBzZWxlY3RlZEdyb3VwSWRcbiAgICAgIGNvbnN0IGV4cGVjdGVkUXVlcnlJbmRleCA9IHNlbGVjdGVkR3JvdXBRdWVyeUluZGV4XG4gICAgICBcbiAgICAgIGlmIChleHBlY3RlZEdyb3VwSWQgIT09IGFjdHVhbEdyb3VwSWQpIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgICBldmVudDogJ2Ryb3Bkb3duLWdyb3VwLW1pc21hdGNoJyxcbiAgICAgICAgICBleHBlY3RlZEdyb3VwSWQsXG4gICAgICAgICAgYWN0dWFsR3JvdXBJZCxcbiAgICAgICAgICBxdWVyeUl0ZW1TaG9ydElkOiBleHBlY3RlZFNob3J0SWQsXG4gICAgICAgICAgd2FybmluZzogJ0ZpcnN0IGRyb3Bkb3duIG1heSBub3QgYmUgc3luY2hyb25pemVkIHdpdGggaGFzaCBwYXJhbWV0ZXInXG4gICAgICAgIH0pXG4gICAgICB9IGVsc2UgaWYgKGV4cGVjdGVkUXVlcnlJbmRleCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIC8vIFZlcmlmeSB0aGUgcXVlcnkgaW5kZXggd2l0aGluIHRoZSBncm91cCBtYXRjaGVzXG4gICAgICAgIGNvbnN0IGdyb3VwSXRlbXMgPSBncm91cHM/LltleHBlY3RlZEdyb3VwSWRdPy5pdGVtc1xuICAgICAgICBpZiAoZ3JvdXBJdGVtcyAmJiBncm91cEl0ZW1zLmxlbmd0aCA+IGV4cGVjdGVkUXVlcnlJbmRleCkge1xuICAgICAgICAgIGNvbnN0IGV4cGVjdGVkUXVlcnlDb25maWdJZCA9IGdyb3VwSXRlbXNbZXhwZWN0ZWRRdWVyeUluZGV4XT8uY29uZmlnSWRcbiAgICAgICAgICBjb25zdCBhY3R1YWxRdWVyeUNvbmZpZ0lkID0gcXVlcnlJdGVtLmNvbmZpZ0lkXG4gICAgICAgICAgaWYgKGV4cGVjdGVkUXVlcnlDb25maWdJZCAhPT0gYWN0dWFsUXVlcnlDb25maWdJZCkge1xuICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgICAgICAgZXZlbnQ6ICdkcm9wZG93bi1xdWVyeS1pbmRleC1taXNtYXRjaCcsXG4gICAgICAgICAgICAgIGV4cGVjdGVkUXVlcnlDb25maWdJZCxcbiAgICAgICAgICAgICAgYWN0dWFsUXVlcnlDb25maWdJZCxcbiAgICAgICAgICAgICAgZXhwZWN0ZWRRdWVyeUluZGV4LFxuICAgICAgICAgICAgICBxdWVyeUl0ZW1TaG9ydElkOiBleHBlY3RlZFNob3J0SWQsXG4gICAgICAgICAgICAgIHdhcm5pbmc6ICdTZWNvbmQgZHJvcGRvd24gbWF5IG5vdCBiZSBzeW5jaHJvbml6ZWQgd2l0aCBoYXNoIHBhcmFtZXRlcidcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgICAgICAgIGV2ZW50OiAnZHJvcGRvd25zLXN5bmNocm9uaXplZCcsXG4gICAgICAgICAgICAgIHF1ZXJ5SXRlbVNob3J0SWQ6IGV4cGVjdGVkU2hvcnRJZCxcbiAgICAgICAgICAgICAgZ3JvdXBJZDogZXhwZWN0ZWRHcm91cElkLFxuICAgICAgICAgICAgICBzZWxlY3RlZEdyb3VwUXVlcnlJbmRleDogZXhwZWN0ZWRRdWVyeUluZGV4LFxuICAgICAgICAgICAgICBub3RlOiAnRHJvcGRvd25zIHN5bmNocm9uaXplZCB3aXRoIGhhc2ggcGFyYW1ldGVyJ1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVW5ncm91cGVkIHF1ZXJ5IC0gdmVyaWZ5IGl0J3Mgc2VsZWN0ZWRcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgIGV2ZW50OiAnZHJvcGRvd25zLXN5bmNocm9uaXplZC11bmdyb3VwZWQnLFxuICAgICAgICBxdWVyeUl0ZW1TaG9ydElkOiBleHBlY3RlZFNob3J0SWQsXG4gICAgICAgIG5vdGU6ICdVbmdyb3VwZWQgcXVlcnkgZHJvcGRvd24gc3luY2hyb25pemVkIHdpdGggaGFzaCBwYXJhbWV0ZXInXG4gICAgICB9KVxuICAgIH1cbiAgfSwgW2luaXRpYWxJbnB1dFZhbHVlLCBxdWVyeUl0ZW0uc2hvcnRJZCwgcXVlcnlJdGVtLmdyb3VwSWQsIHF1ZXJ5SXRlbS5jb25maWdJZCwgc2VsZWN0ZWRHcm91cElkLCBzZWxlY3RlZEdyb3VwUXVlcnlJbmRleCwgZ3JvdXBzXSlcblxuICBjb25zdCB1c2VPdXRwdXREczogSW1tdXRhYmxlT2JqZWN0PFVzZURhdGFTb3VyY2U+ID0gUmVhY3QudXNlTWVtbyhcbiAgICAoKSA9PlxuICAgICAgSW1tdXRhYmxlKHtcbiAgICAgICAgZGF0YVNvdXJjZUlkOiBxdWVyeUl0ZW0ub3V0cHV0RGF0YVNvdXJjZUlkLFxuICAgICAgICBtYWluRGF0YVNvdXJjZUlkOiBxdWVyeUl0ZW0ub3V0cHV0RGF0YVNvdXJjZUlkXG4gICAgICB9KSxcbiAgICBbcXVlcnlJdGVtLm91dHB1dERhdGFTb3VyY2VJZF1cbiAgKVxuXG4gIGNvbnN0IHVwZGF0ZURhdGFTb3VyY2UgPSBSZWFjdC51c2VDYWxsYmFjaygoZHM/OiBEYXRhU291cmNlKSA9PiB7XG4gICAgY29uc3QgY3VycmVudERzID0gZHMgPz8gZGF0YVNvdXJjZVxuICAgIC8vIHNob3VsZCBkaXNhYmxlIHNwYXRpYWwgZmlsdGVyIGlmIHRoZSBkYXRhU291cmNlIGlzIGFuIG91dHB1dCBkcyBhbmQgaXQgYWxyZWFkeSBoYXMgc3BhdGlhbCBmaWx0ZXJcbiAgICBpZiAoY3VycmVudERzPy5nZXREYXRhU291cmNlSnNvbigpPy5pc091dHB1dEZyb21XaWRnZXQpIHtcbiAgICAgIGNvbnN0IHFEczogUXVlcmlhYmxlRGF0YVNvdXJjZSA9IGN1cnJlbnREcyBhcyBRdWVyaWFibGVEYXRhU291cmNlXG4gICAgICBjb25zdCBxUGFyYW1zID0gcURzLmdldEN1cnJlbnRRdWVyeVBhcmFtcz8uKCkgYXMgRmVhdHVyZUxheWVyUXVlcnlQYXJhbXNcbiAgICAgIGlmIChxUGFyYW1zLmdlb21ldHJ5ICE9IG51bGwpIHtcbiAgICAgICAgc2V0U3BhdGlhbEZpbHRlckVuYWJsZWQoZmFsc2UpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZXRTcGF0aWFsRmlsdGVyRW5hYmxlZCh0cnVlKVxuICAgICAgfVxuICAgIH1cbiAgfSwgW2RhdGFTb3VyY2VdKVxuXG4gIGNvbnN0IGhhbmRsZVN0YXR1c0NoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKChlbmFibGVkOiBib29sZWFuKSA9PiB7XG4gICAgc2V0RW5hYmxlZChlbmFibGVkKVxuICAgIHVwZGF0ZURhdGFTb3VyY2UoKVxuICB9LCBbdXBkYXRlRGF0YVNvdXJjZV0pXG5cbiAgY29uc3QgaGFuZGxlT3V0cHV0RGF0YVNvdXJjZUluZm9DaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjaygoaW5mbywgcHJlSW5mbykgPT4ge1xuICAgIGNvbnN0IG91dHB1dElkID0gcXVlcnlJdGVtLm91dHB1dERhdGFTb3VyY2VJZFxuICAgIGNvbnN0IGZpbHRlciA9IGluZm8/LndpZGdldFF1ZXJpZXMgPyBpbmZvLndpZGdldFF1ZXJpZXNbYHNldEZpbHRlci0ke291dHB1dElkfWBdIDogbnVsbFxuICAgIGlmIChmaWx0ZXIgPT0gbnVsbCkgeyAvLyBmaWx0ZXIgaXMgbnVsbCBtZWFucyB0aGVyZSBhcmUgaW5jb21wbGV0ZSBxdWVyaWVzLCBpZ25vcmUgdGhpcyBjaGFuZ2VcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBjb25zdCBwcmVGaWx0ZXIgPSBwcmVJbmZvPy53aWRnZXRRdWVyaWVzID8gcHJlSW5mby53aWRnZXRRdWVyaWVzW2BzZXRGaWx0ZXItJHtvdXRwdXRJZH1gXSA6IG51bGxcbiAgICBpZiAoZmlsdGVyPy53aGVyZSAhPT0gcHJlRmlsdGVyPy53aGVyZSkge1xuICAgICAgc2V0RGF0YUFjdGlvbkZpbHRlcihmaWx0ZXIpXG4gICAgfVxuICB9LCBbcXVlcnlJdGVtLm91dHB1dERhdGFTb3VyY2VJZF0pXG5cbiAgY29uc3QgcHVibGlzaERhdGFDbGVhcmVkTXNnID0gUmVhY3QudXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgIGlmICghb3V0cHV0RFMpIHJldHVyblxuICAgIGNvbnN0IGRhdGFSZWNvcmRTZXRDaGFuZ2VNZXNzYWdlID0gbmV3IERhdGFSZWNvcmRTZXRDaGFuZ2VNZXNzYWdlKHByb3BzLndpZGdldElkLCBSZWNvcmRTZXRDaGFuZ2VUeXBlLlJlbW92ZSwgW291dHB1dERTLmlkXSlcbiAgICBNZXNzYWdlTWFuYWdlci5nZXRJbnN0YW5jZSgpLnB1Ymxpc2hNZXNzYWdlKGRhdGFSZWNvcmRTZXRDaGFuZ2VNZXNzYWdlKVxuICAgIGF3YWl0IE1lc3NhZ2VNYW5hZ2VyLmdldEluc3RhbmNlKCkucHVibGlzaE1lc3NhZ2UobmV3IERhdGFSZWNvcmRzU2VsZWN0aW9uQ2hhbmdlTWVzc2FnZShwcm9wcy53aWRnZXRJZCwgW10sIFtvdXRwdXREUy5pZF0pKVxuICB9LCBbcHJvcHMud2lkZ2V0SWQsIG91dHB1dERTXSlcblxuICAvKipcbiAgICogQ2xlYXJzIGFsbCBxdWVyeSByZXN1bHRzIGZyb20gdGhlIFVJIGFuZCBtYXAuXG4gICAqIFRoaXMgaXMgdGhlIHNpbmdsZSBzb3VyY2Ugb2YgdHJ1dGggZm9yIGNsZWFyaW5nIHJlc3VsdHMuXG4gICAqIEl0IGNsZWFycyB0aGUgcmVjb3JkcywgcmVzZXRzIHRoZSByZXN1bHQgY291bnQsIGNsZWFycyBzZWxlY3Rpb24gZnJvbSB0aGUgbWFwLFxuICAgKiBwdWJsaXNoZXMgYSBjbGVhcmVkIG1lc3NhZ2UgdG8gdGhlIG1hcCwgc3dpdGNoZXMgYmFjayB0byB0aGUgUXVlcnkgdGFiLFxuICAgKiBhbmQgaW5jcmVtZW50cyB0aGUgcXVlcnkgZXhlY3V0aW9uIGtleSB0byBmb3JjZSBRdWVyeVRhc2tSZXN1bHQgdG8gcmVtb3VudCB3aXRoIGZyZXNoIHN0YXRlLlxuICAgKi9cbiAgY29uc3QgY2xlYXJSZXN1bHQgPSBSZWFjdC51c2VDYWxsYmFjayhhc3luYyAocmVhc29uOiBzdHJpbmcgPSAndW5rbm93bicpID0+IHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICBldmVudDogJ2NsZWFyUmVzdWx0LWNhbGxlZCcsXG4gICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICBoYXNPdXRwdXREUzogISFvdXRwdXREUyxcbiAgICAgIHJlYXNvbixcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG5cbiAgICByZWNvcmRzUmVmLmN1cnJlbnQgPSBudWxsXG4gICAgb3V0cHV0RFM/LnNldFN0YXR1cyhEYXRhU291cmNlU3RhdHVzLk5vdFJlYWR5KVxuICAgIHNldFJlc3VsdENvdW50KDApXG4gICAgXG4gICAgLy8gTk9URTogR3JhcGhpY3MgbGF5ZXIgY2xlYXJpbmcgaXMgbm93IGhhbmRsZWQgaW5zaWRlIGNsZWFyU2VsZWN0aW9uSW5EYXRhU291cmNlc1xuICAgIC8vIGNhbGxlZCBiZWxvdy4gV2UgZW5zdXJlIHRoaXMgaXMgYXdhaXRlZCB0byBwcmV2ZW50IHJhY2UgY29uZGl0aW9ucy5cbiAgICBcbiAgICAvLyBDbGVhciBzZWxlY3Rpb24gZGlyZWN0bHkgZnJvbSBkYXRhIHNvdXJjZSB1c2luZyB1dGlsaXR5IGZ1bmN0aW9uXG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IGNsZWFyU2VsZWN0aW9uSW5EYXRhU291cmNlcyhwcm9wcy53aWRnZXRJZCwgb3V0cHV0RFMsIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQsIGdyYXBoaWNzTGF5ZXIpXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICAgIGV2ZW50OiAnY2xlYXJSZXN1bHQtc2VsZWN0aW9uLWNsZWFyZWQnLFxuICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgICBldmVudDogJ2NsZWFyUmVzdWx0LXNlbGVjdGlvbi1jbGVhci1mYWlsZWQnLFxuICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvciksXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICB9XG4gICAgXG4gICAgLy8gQ2xlYXIgd2lkZ2V0LWxldmVsIGFjY3VtdWxhdGVkIHJlY29yZHMgd2hlbiBjbGVhcmluZyByZXN1bHRzXG4gICAgaWYgKG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlKSB7XG4gICAgICBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZShbXSlcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ2FjY3VtdWxhdGVkLXJlY29yZHMtY2xlYXJlZC1vbi1jbGVhci1yZXN1bHRzJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkXG4gICAgICB9KVxuICAgIH1cbiAgICBcbiAgICBhd2FpdCBwdWJsaXNoRGF0YUNsZWFyZWRNc2coKVxuICAgIC8vIFN3aXRjaCBiYWNrIHRvIFF1ZXJ5IHRhYiB3aGVuIGNsZWFyaW5nIHJlc3VsdHNcbiAgICBzZXRBY3RpdmVUYWIoJ3F1ZXJ5JylcbiAgICBzZXRTdGFnZSgwKVxuICAgIGhhc1NlbGVjdGVkUmVjb3Jkc1JlZi5jdXJyZW50ID0gZmFsc2UgLy8gUmVzZXQgc2VsZWN0aW9uIGZsYWcgd2hlbiBjbGVhcmluZ1xuICAgIC8vIEluY3JlbWVudCBxdWVyeSBleGVjdXRpb24ga2V5IHRvIGZvcmNlIFF1ZXJ5VGFza1Jlc3VsdCByZW1vdW50IHdpdGggZnJlc2ggc3RhdGVcbiAgICBxdWVyeUV4ZWN1dGlvbktleVJlZi5jdXJyZW50ICs9IDFcbiAgICAvLyBDbGVhciBlcnJvciBzdGF0ZXMgd2hlbiBjbGVhcmluZyByZXN1bHRzXG4gICAgc2V0U2VsZWN0aW9uRXJyb3IobnVsbClcbiAgICBzZXRab29tRXJyb3IobnVsbClcblxuICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgIGV2ZW50OiAnY2xlYXJSZXN1bHQtY29tcGxldGUnLFxuICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgfSwgW291dHB1dERTLCBwdWJsaXNoRGF0YUNsZWFyZWRNc2csIHByb3BzLndpZGdldElkLCBxdWVyeUl0ZW0uY29uZmlnSWQsIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlLCB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0LCBncmFwaGljc0xheWVyXSlcblxuICAvKipcbiAgICogSGFuZGxlcyBkYXRhIHNvdXJjZSBjcmVhdGlvbiB3aGVuIHN3aXRjaGluZyBiZXR3ZWVuIHF1ZXJ5IGl0ZW1zLlxuICAgKiBXaGVuIGEgbmV3IHF1ZXJ5IGl0ZW0gaXMgc2VsZWN0ZWQgKGUuZy4sIHN3aXRjaGluZyBmcm9tIFBhcmNlbCB0byBNYWpvciksXG4gICAqIHRoaXMgY2xlYXJzIG9sZCByZXN1bHRzIHRvIGVuc3VyZSBhbGwgY2xlYW51cCBsb2dpYyBydW5zIHByb3Blcmx5LlxuICAgKiBcbiAgICogQHBhcmFtIGRzIC0gVGhlIG5ld2x5IGNyZWF0ZWQgZGF0YSBzb3VyY2UgZm9yIHRoZSBzZWxlY3RlZCBxdWVyeSBpdGVtXG4gICAqL1xuICBjb25zdCBoYW5kbGVEYXRhU291cmNlQ3JlYXRlZCA9IFJlYWN0LnVzZUNhbGxiYWNrKGFzeW5jIChkczogRGF0YVNvdXJjZSkgPT4ge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgIGV2ZW50OiAnaGFuZGxlRGF0YVNvdXJjZUNyZWF0ZWQtc3RhcnQnLFxuICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgcmVzdWx0c01vZGUsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuXG4gICAgLy8gSW4gXCJBZGQgdG9cIiBhbmQgXCJSZW1vdmUgZnJvbVwiIG1vZGVzLCBwcmVzZXJ2ZSBhY2N1bXVsYXRlZCByZWNvcmRzIGFuZCBzZWxlY3Rpb24gLSBkb24ndCBjbGVhclxuICAgIGlmICgocmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb24gfHwgcmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvbikgXG4gICAgICAgICYmIGFjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAncHJlc2VydmluZy1zZWxlY3Rpb24tb24tcXVlcnktc3dpdGNoLWhhbmRsZURhdGFTb3VyY2VDcmVhdGVkJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICByZXN1bHRzTW9kZSxcbiAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGhcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIHNldERhdGFTb3VyY2UoZHMpXG4gICAgICB1cGRhdGVEYXRhU291cmNlKGRzKVxuICAgICAgc2V0U3RhZ2UoMClcbiAgICAgIHNldEFjdGl2ZVRhYigncXVlcnknKVxuICAgICAgcmV0dXJuIC8vIFNraXAgY2xlYXJpbmcgLSBwcmVzZXJ2ZSBzZWxlY3Rpb25cbiAgICB9XG4gICAgXG4gICAgLy8gRm9yIFwiTmV3XCIgbW9kZSwgY2xlYXIgb2xkIHJlc3VsdHNcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICBldmVudDogJ2hhbmRsZURhdGFTb3VyY2VDcmVhdGVkLWNsZWFyaW5nLXJlc3VsdHMtZm9yLW5ldy1tb2RlJyxcbiAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgYXdhaXQgY2xlYXJSZXN1bHQoJ2hhbmRsZURhdGFTb3VyY2VDcmVhdGVkLW5ldy1tb2RlJylcblxuICAgIHNldERhdGFTb3VyY2UoZHMpXG4gICAgdXBkYXRlRGF0YVNvdXJjZShkcylcbiAgICBzZXRTdGFnZSgwKVxuICAgIHNldEFjdGl2ZVRhYigncXVlcnknKSAvLyBSZXR1cm4gdG8gUXVlcnkgdGFiIHdoZW4gc3dpdGNoaW5nIHF1ZXJpZXNcbiAgfSwgW3VwZGF0ZURhdGFTb3VyY2UsIGNsZWFyUmVzdWx0LCByZXN1bHRDb3VudCwgcmVzdWx0c01vZGUsIGFjY3VtdWxhdGVkUmVjb3JkcywgcHJvcHMud2lkZ2V0SWRdKVxuXG4gIGNvbnN0IGhhbmRsZU91dHB1dERhdGFTb3VyY2VDcmVhdGVkID0gUmVhY3QudXNlQ2FsbGJhY2soYXN5bmMgKGRzOiBEYXRhU291cmNlKSA9PiB7XG4gICAgc2V0T3V0cHV0RFMoZHMpXG4gICAgXG4gICAgLy8gQ0hFQ0sgcm9vdERhdGFTb3VyY2UubWFwIHRvIHNlZSBob3cgZnJhbWV3b3JrIGFjY2Vzc2VzIG1hcCB2aWV3XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IG9yaWdpbkRhdGFTb3VyY2VzID0gZHMuZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKVxuICAgICAgY29uc3Qgb3JpZ2luRFMgPSBvcmlnaW5EYXRhU291cmNlcz8uWzBdXG4gICAgICBpZiAob3JpZ2luRFMpIHtcbiAgICAgICAgY29uc3Qgcm9vdERTID0gb3JpZ2luRFMuZ2V0Um9vdERhdGFTb3VyY2UoKVxuICAgICAgICBpZiAocm9vdERTKSB7XG4gICAgICAgICAgLy8gRXhwb3NlIHJvb3REUyB0byB3aW5kb3cgZm9yIGNvbnNvbGUgaW5zcGVjdGlvblxuICAgICAgICAgIDsod2luZG93IGFzIGFueSkuX19xdWVyeVNpbXBsZVJvb3REUyA9IHJvb3REU1xuICAgICAgICAgIDsod2luZG93IGFzIGFueSkuX19xdWVyeVNpbXBsZVJvb3REU01hcCA9IChyb290RFMgYXMgYW55KS5tYXBcbiAgICAgICAgICA7KHdpbmRvdyBhcyBhbnkpLl9fcXVlcnlTaW1wbGVPcmlnaW5EUyA9IG9yaWdpbkRTXG4gICAgICAgICAgXG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgICAgICAgIGV2ZW50OiAnY2hlY2stcm9vdC1kYXRhc291cmNlLW1hcCcsXG4gICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICBvdXRwdXREU0lkOiBkcy5pZCxcbiAgICAgICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICAgICAgcm9vdERTSWQ6IHJvb3REUy5pZCxcbiAgICAgICAgICAgIHJvb3REU1R5cGU6IHJvb3REUy50eXBlLFxuICAgICAgICAgICAgaGFzUm9vdERTTWFwOiAhIShyb290RFMgYXMgYW55KS5tYXAsXG4gICAgICAgICAgICByb290RFNNYXBUeXBlOiAocm9vdERTIGFzIGFueSkubWFwID8gdHlwZW9mIChyb290RFMgYXMgYW55KS5tYXAgOiAnbm9uZScsXG4gICAgICAgICAgICByb290RFNNYXBJZDogKHJvb3REUyBhcyBhbnkpLm1hcD8uaWQgfHwgJ25vbmUnLFxuICAgICAgICAgICAgaGFzUm9vdERTTWFwVmlldzogISEocm9vdERTIGFzIGFueSkubWFwPy52aWV3LFxuICAgICAgICAgICAgaGFzUm9vdERTTWFwVmlld3M6ICEhKHJvb3REUyBhcyBhbnkpLm1hcD8udmlld3MsXG4gICAgICAgICAgICByb290RFNNYXBWaWV3c0xlbmd0aDogKHJvb3REUyBhcyBhbnkpLm1hcD8udmlld3M/Lmxlbmd0aCB8fCAwLFxuICAgICAgICAgICAgLy8gTG9nIHNvbWUgbWFwIHByb3BlcnRpZXMgaWYgaXQgZXhpc3RzXG4gICAgICAgICAgICByb290RFNNYXBLZXlzOiAocm9vdERTIGFzIGFueSkubWFwID8gT2JqZWN0LmtleXMoKHJvb3REUyBhcyBhbnkpLm1hcCkuZmlsdGVyKGtleSA9PiBcbiAgICAgICAgICAgICAgIWtleS5zdGFydHNXaXRoKCdfJykgJiYgXG4gICAgICAgICAgICAgIHR5cGVvZiAocm9vdERTIGFzIGFueSkubWFwW2tleV0gIT09ICdmdW5jdGlvbidcbiAgICAgICAgICAgICkuc2xpY2UoMCwgMjApIDogW10sXG4gICAgICAgICAgICAvLyBMb2cgdGhhdCBvYmplY3RzIGFyZSBhdmFpbGFibGUgb24gd2luZG93IGZvciBjb25zb2xlIGluc3BlY3Rpb25cbiAgICAgICAgICAgIGNvbnNvbGVJbnNwZWN0aW9uOiAnQ2hlY2sgd2luZG93Ll9fcXVlcnlTaW1wbGVSb290RFMsIHdpbmRvdy5fX3F1ZXJ5U2ltcGxlUm9vdERTTWFwLCB3aW5kb3cuX19xdWVyeVNpbXBsZU9yaWdpbkRTJyxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgIH0pXG4gICAgICAgICAgXG4gICAgICAgICAgLy8gSWYgbWFwIGV4aXN0cywgY2hlY2sgaXRzIHZpZXdcbiAgICAgICAgICBjb25zdCByb290TWFwID0gKHJvb3REUyBhcyBhbnkpLm1hcFxuICAgICAgICAgIGlmIChyb290TWFwKSB7XG4gICAgICAgICAgICBjb25zdCB2aWV3ID0gcm9vdE1hcC52aWV3IHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgIChyb290TWFwLnZpZXdzPy5nZXRJdGVtQXQ/LigwKSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAocm9vdE1hcC52aWV3cz8ubGVuZ3RoID4gMCA/IHJvb3RNYXAudmlld3NbMF0gOiBudWxsKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgICAgICAgICBldmVudDogJ2NoZWNrLXJvb3QtZGF0YXNvdXJjZS1tYXAtdmlldycsXG4gICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgaGFzVmlldzogISF2aWV3LFxuICAgICAgICAgICAgICB2aWV3VHlwZTogdmlldz8udHlwZSB8fCAnbm9uZScsXG4gICAgICAgICAgICAgIHZpZXdJZDogdmlldz8uaWQgfHwgJ25vbmUnLFxuICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICAgIGV2ZW50OiAnY2hlY2stcm9vdC1kYXRhc291cmNlLW1hcC1lcnJvcicsXG4gICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSxcbiAgICAgICAgZXJyb3JTdGFjazogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnN0YWNrIDogdW5kZWZpbmVkLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgfVxuICAgIFxuICAgIC8vIEluaXRpYWxpemUgZ3JhcGhpY3MgbGF5ZXIgbGF6aWx5IGlmIGVuYWJsZWQgYW5kIG5vdCBhbHJlYWR5IGluaXRpYWxpemVkXG4gICAgaWYgKHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQgJiYgb25Jbml0aWFsaXplR3JhcGhpY3NMYXllcikge1xuICAgICAgYXdhaXQgb25Jbml0aWFsaXplR3JhcGhpY3NMYXllcihkcylcbiAgICAgIC8vIEFmdGVyIGluaXRpYWxpemF0aW9uLCBncmFwaGljc0xheWVyIGFuZCBtYXBWaWV3IHByb3BzIHNob3VsZCBiZSB1cGRhdGVkXG4gICAgICAvLyBCdXQgc2luY2UgcHJvcHMgY29tZSBmcm9tIHJlZnMsIHdlIG5lZWQgdG8gd2FpdCBmb3Igd2lkZ2V0IHJlLXJlbmRlclxuICAgICAgLy8gRm9yIG5vdywgdXNlIHRoZSBwcm9wcyB0aGF0IHdpbGwgYmUgdXBkYXRlZCBvbiBuZXh0IHJlbmRlclxuICAgIH1cbiAgICBcbiAgICAvLyBJZiBpbiBcIkFkZCB0b1wiIG9yIFwiUmVtb3ZlIGZyb21cIiBtb2RlIGFuZCB3ZSBoYXZlIGFjY3VtdWxhdGVkIHJlY29yZHMsIHJlLXNlbGVjdCB0aGVtXG4gICAgLy8gVGhpcyB1c2VzIHRoZSBzYW1lIGxvZ2ljIGFzIGFmdGVyIHF1ZXJ5IGNvbXBsZXRpb24gLSBzZWxlY3RSZWNvcmRzQW5kUHVibGlzaFxuICAgIC8vIFRoaXMgZW5zdXJlcyByZWNvcmRzIGFyZSBzZWxlY3RlZCBib3RoIG9uIHRoZSBtYXAgYW5kIGluIHRoZSBSZXN1bHRzIHRhYlxuICAgIGlmICgocmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb24gfHwgcmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvbikgXG4gICAgICAgICYmIGFjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgLy8gVXNlIGEgZGVsYXkgdG8gZW5zdXJlIHRoZSBEUyBpcyBmdWxseSByZWFkeSBhbmQgZ3JhcGhpY3MgbGF5ZXIgcHJvcHMgYXJlIHVwZGF0ZWQgYWZ0ZXIgd2lkZ2V0IHJlLXJlbmRlclxuICAgICAgLy8gSWYgZ3JhcGhpY3MgbGF5ZXIgd2FzIGp1c3QgaW5pdGlhbGl6ZWQsIHdhaXQgYSBiaXQgbG9uZ2VyIGZvciBwcm9wcyB0byB1cGRhdGVcbiAgICAgIGNvbnN0IGRlbGF5ID0gKHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQgJiYgb25Jbml0aWFsaXplR3JhcGhpY3NMYXllcikgPyAyMDAgOiAxMDBcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBjb25zdCBmZWF0dXJlRFMgPSBkcyBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gICAgICAgIGlmIChmZWF0dXJlRFMgJiYgYWNjdW11bGF0ZWRSZWNvcmRzICYmIGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgY29uc3QgcmVjb3JkSWRzID0gYWNjdW11bGF0ZWRSZWNvcmRzLm1hcChyZWNvcmQgPT4gcmVjb3JkLmdldElkKCkpXG4gICAgICAgICAgLy8gVXNlIHRoZSBzYW1lIHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoIHRoYXQncyB1c2VkIGFmdGVyIHF1ZXJ5IGNvbXBsZXRpb25cbiAgICAgICAgICAvLyBUaGlzIHdpbGwgc2VsZWN0IHJlY29yZHMgb24gdGhlIG1hcCBhbmQgdHJpZ2dlciBoYW5kbGVEYXRhU291cmNlSW5mb0NoYW5nZVxuICAgICAgICAgIC8vIGluIHF1ZXJ5LXJlc3VsdC50c3ggdG8gdXBkYXRlIHNlbGVjdGVkUmVjb3JkcyBzdGF0ZSBmb3IgdGhlIFJlc3VsdHMgdGFiXG4gICAgICAgICAgLy8gVXNlIGdyYXBoaWNzIGxheWVyIGlmIGVuYWJsZWQgKHByb3BzIHNob3VsZCBiZSB1cGRhdGVkIGFmdGVyIHdpZGdldCByZS1yZW5kZXIpXG4gICAgICAgICAgOyhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoKFxuICAgICAgICAgICAgICAgICAgcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgICBmZWF0dXJlRFMsXG4gICAgICAgICAgICAgICAgICByZWNvcmRJZHMsXG4gICAgICAgICAgICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHMsXG4gICAgICAgICAgICAgICAgICBmYWxzZSxcbiAgICAgICAgICAgICAgICAgIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQsXG4gICAgICAgICAgICAgICAgICBncmFwaGljc0xheWVyLFxuICAgICAgICAgICAgICAgICAgbWFwVmlld1xuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIHJlY29yZHNSZWYgc28gcmVzdWx0cyB0YWIgc2hvd3MgYWNjdW11bGF0ZWQgcmVjb3Jkc1xuICAgICAgICAgICAgICAgIHJlY29yZHNSZWYuY3VycmVudCA9IGFjY3VtdWxhdGVkUmVjb3Jkc1xuICAgICAgICAgICAgICAgIHNldFJlc3VsdENvdW50KGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGgpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgICAgICBldmVudDogJ3JlLXNlbGVjdGVkLWFjY3VtdWxhdGVkLXJlY29yZHMtYWZ0ZXItcXVlcnktc3dpdGNoJyxcbiAgICAgICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgICAgIG91dHB1dERTSWQ6IGZlYXR1cmVEUy5pZCxcbiAgICAgICAgICAgICAgICAgIHJlY29yZHNDb3VudDogYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gVmVyaWZ5IHdoYXQncyBhY3R1YWxseSBzZWxlY3RlZCBpbiB0aGUgRFMgYWZ0ZXIgYSBkZWxheVxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgY29uc3QgZHMgPSBEYXRhU291cmNlTWFuYWdlci5nZXRJbnN0YW5jZSgpLmdldERhdGFTb3VyY2UoZmVhdHVyZURTLmlkKVxuICAgICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRJbkRTID0gZHM/LmdldFNlbGVjdGVkUmVjb3JkcygpXG4gICAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3RlZElkc0luRFMgPSBkcz8uZ2V0U2VsZWN0ZWRSZWNvcmRJZHMoKSA/PyBbXVxuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICd2ZXJpZnktcmVjb3Jkcy1hZnRlci1yZXNlbGVjdGlvbicsXG4gICAgICAgICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0RFNJZDogZmVhdHVyZURTLmlkLFxuICAgICAgICAgICAgICAgICAgICBleHBlY3RlZENvdW50OiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICBhY3R1YWxTZWxlY3RlZEluRFM6IHNlbGVjdGVkSW5EUz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkSWRzSW5EUzogc2VsZWN0ZWRJZHNJbkRTLmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgcmVjb3Jkc01hdGNoOiBzZWxlY3RlZEluRFM/Lmxlbmd0aCA9PT0gYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aFxuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9LCAyMDApXG4gICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgICAgICBldmVudDogJ3JlLXNlbGVjdGlvbi1mYWlsZWQtYWZ0ZXItc3dpdGNoJyxcbiAgICAgICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJyxcbiAgICAgICAgICAgICAgICAgIGVycm9yU3RhY2s6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pKClcbiAgICAgICAgfVxuICAgICAgfSwgMTAwKVxuICAgIH1cbiAgfSwgW3Jlc3VsdHNNb2RlLCBhY2N1bXVsYXRlZFJlY29yZHMsIHByb3BzLndpZGdldElkLCB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0LCBvbkluaXRpYWxpemVHcmFwaGljc0xheWVyXSlcblxuICAvLyBDbGVhciByZXN1bHRzIHdoZW4gcXVlcnkgaXRlbSBjaGFuZ2VzIChlLmcuLCB3aGVuIG5ldyBoYXNoIHBhcmFtZXRlciB0cmlnZ2VycyBkaWZmZXJlbnQgcXVlcnkpXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gT25seSBjbGVhciBpZiB3ZSdyZSBhY3R1YWxseSBzd2l0Y2hpbmcgdG8gYSBkaWZmZXJlbnQgcXVlcnkgKG5vdCBqdXN0IHJlLXJlbmRlcmluZylcbiAgICBjb25zdCBpc1N3aXRjaGluZ1F1ZXJpZXMgPSBwcmV2aW91c0NvbmZpZ0lkUmVmLmN1cnJlbnQgIT09IHF1ZXJ5SXRlbS5jb25maWdJZFxuICAgIFxuICAgIC8vIE9ubHkgY2xlYXIgcmVzdWx0cyB3aGVuIHN3aXRjaGluZyBxdWVyaWVzIGlmIHdlJ3JlIGluIFwiTmV3XCIgbW9kZVxuICAgIC8vIEluIFwiQWRkIHRvXCIgYW5kIFwiUmVtb3ZlIGZyb21cIiBtb2Rlcywgd2Ugd2FudCB0byBwcmVzZXJ2ZSBhY2N1bXVsYXRlZCByZWNvcmRzIGFjcm9zcyBxdWVyeSBzd2l0Y2hlc1xuICAgIGlmIChpc1N3aXRjaGluZ1F1ZXJpZXMgJiYgcmVzdWx0Q291bnQgPiAwICYmIHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvbikge1xuICAgICAgLy8gU3RvcmUgdGhlIG9sZCBjb25maWdJZCBiZWZvcmUgdXBkYXRpbmdcbiAgICAgIGNvbnN0IG9sZENvbmZpZ0lkID0gcHJldmlvdXNDb25maWdJZFJlZi5jdXJyZW50XG4gICAgICAvLyBVcGRhdGUgdGhlIHJlZiB0byB0cmFjayB0aGUgbmV3IHF1ZXJ5XG4gICAgICBwcmV2aW91c0NvbmZpZ0lkUmVmLmN1cnJlbnQgPSBxdWVyeUl0ZW0uY29uZmlnSWRcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAnY2xlYXJpbmctcmVzdWx0cy1vbi1xdWVyeS1zd2l0Y2gtbmV3LW1vZGUnLFxuICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgIG9sZENvbmZpZ0lkLFxuICAgICAgICBuZXdDb25maWdJZDogcXVlcnlJdGVtLmNvbmZpZ0lkLFxuICAgICAgICByZXN1bHRzTW9kZVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgLy8gQ2xlYXIgaW1tZWRpYXRlbHkgd2hlbiBzd2l0Y2hpbmcgcXVlcmllcywgYnV0IHdyYXAgaW4gdHJ5LWNhdGNoIHRvIGhhbmRsZVxuICAgICAgLy8gcmFjZSBjb25kaXRpb25zIHdpdGggZmVhdHVyZSBpbmZvIHdpbmRvd3MgdGhhdCBtaWdodCBiZSByZW5kZXJpbmdcbiAgICAgIHRyeSB7XG4gICAgICAgIGNsZWFyUmVzdWx0KCdxdWVyeS1pdGVtLXN3aXRjaC1uZXctbW9kZScpXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAvLyBMb2cgZm9yIGRlYnVnZ2luZyBidXQgZG9uJ3Qgc2hvdyB0byB1c2VyIChmcmFtZXdvcmsgcmFjZSBjb25kaXRpb24pXG4gICAgICAgIC8vIFRoZSBlcnJvciBpcyBpbiBmcmFtZXdvcmsgY29kZSAoZmVhdHVyZS1pbmZvLnRzeCksIG5vdCBvdXIgY29kZVxuICAgICAgICAvLyBUaGlzIGNhbiBoYXBwZW4gaWYgZmVhdHVyZS1pbmZvLnRzeCBpcyB0cnlpbmcgdG8gYXBwZW5kQ2hpbGQgdG8gYSBET00gZWxlbWVudFxuICAgICAgICAvLyB0aGF0IGdldHMgcmVtb3ZlZCB3aGVuIHdlIGNsZWFyIHNlbGVjdGlvblxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICAgICAgZXZlbnQ6ICdjbGVhci1yZXN1bHQtcmFjZS1jb25kaXRpb24nLFxuICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvciksXG4gICAgICAgICAgbm90ZTogJ0xpa2VseSByYWNlIGNvbmRpdGlvbiB3aXRoIGZlYXR1cmUtaW5mby50c3gnXG4gICAgICAgIH0pXG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xuICAgICAgICAgIGNvbnNvbGUud2FybignRXJyb3IgY2xlYXJpbmcgcmVzdWx0cyAobGlrZWx5IHJhY2UgY29uZGl0aW9uIHdpdGggZmVhdHVyZSBpbmZvKTonLCBlcnJvcilcbiAgICAgICAgfVxuICAgICAgICAvLyBEb24ndCBzZXQgZXJyb3Igc3RhdGUgLSB0aGlzIGlzIGV4cGVjdGVkIGluIHNvbWUgc2NlbmFyaW9zXG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChpc1N3aXRjaGluZ1F1ZXJpZXMpIHtcbiAgICAgIC8vIEp1c3QgdXBkYXRlIHRoZSByZWYgLSBkb24ndCBjbGVhciByZXN1bHRzIGlmIGluIFwiQWRkIHRvXCIgb3IgXCJSZW1vdmUgZnJvbVwiIG1vZGUgb3Igbm8gcmVzdWx0c1xuICAgICAgcHJldmlvdXNDb25maWdJZFJlZi5jdXJyZW50ID0gcXVlcnlJdGVtLmNvbmZpZ0lkXG4gICAgICBcbiAgICAgIGlmIChyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbiB8fCByZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uKSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgIGV2ZW50OiAncHJlc2VydmluZy1hY2N1bXVsYXRlZC1yZWNvcmRzLW9uLXF1ZXJ5LXN3aXRjaCcsXG4gICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgICAgIG9sZENvbmZpZ0lkOiBwcmV2aW91c0NvbmZpZ0lkUmVmLmN1cnJlbnQsXG4gICAgICAgICAgbmV3Q29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZCxcbiAgICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogYWNjdW11bGF0ZWRSZWNvcmRzPy5sZW5ndGggfHwgMFxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cbiAgfSwgW3F1ZXJ5SXRlbS5jb25maWdJZCwgY2xlYXJSZXN1bHQsIHJlc3VsdENvdW50LCByZXN1bHRzTW9kZSwgYWNjdW11bGF0ZWRSZWNvcmRzLCBwcm9wcy53aWRnZXRJZF0pXG5cbiAgY29uc3QgbmF2VG9Gb3JtID0gUmVhY3QudXNlQ2FsbGJhY2soYXN5bmMgKGNsZWFyUmVzdWx0cyA9IGZhbHNlKSA9PiB7XG4gICAgaWYgKGNsZWFyUmVzdWx0cykge1xuICAgICAgLy8gVXNlIHRoZSBjZW50cmFsaXplZCBjbGVhclJlc3VsdCBtZXRob2QgaW5zdGVhZCBvZiBkdXBsaWNhdGluZyBsb2dpY1xuICAgICAgYXdhaXQgY2xlYXJSZXN1bHQoJ25hdlRvRm9ybS1jbGVhclJlc3VsdHMnKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIC8vIFN3aXRjaCB0byBxdWVyeSB0YWIgYnV0IGRvbid0IGNsZWFyIHJlc3VsdHMgdW5sZXNzIGV4cGxpY2l0bHkgcmVxdWVzdGVkXG4gICAgLy8gTWFyayBhcyBtYW51YWwgc3dpdGNoIHRvIHByZXZlbnQgYXV0by1zd2l0Y2ggdXNlRWZmZWN0IGZyb20gaW50ZXJmZXJpbmdcbiAgICBtYW51YWxUYWJTd2l0Y2hSZWYuY3VycmVudCA9IHRydWVcbiAgICBzZXRBY3RpdmVUYWIoJ3F1ZXJ5JylcbiAgICAvLyBSZXNldCB0aGUgZmxhZyBhZnRlciBhIHNob3J0IGRlbGF5XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBtYW51YWxUYWJTd2l0Y2hSZWYuY3VycmVudCA9IGZhbHNlXG4gICAgfSwgMTAwKVxuICAgIC8vIE9ubHkgY2hhbmdlIHN0YWdlIGlmIHdlJ3JlIGNsZWFyaW5nIHJlc3VsdHNcbiAgICAvLyBPdGhlcndpc2UsIGtlZXAgc3RhZ2UgYXQgMSAocmVzdWx0cyBhdmFpbGFibGUpIHNvIHJlc3VsdHMgcGVyc2lzdFxuICAgIGlmICghY2xlYXJSZXN1bHRzICYmIHJlc3VsdENvdW50ID4gMCkge1xuICAgICAgc2V0U3RhZ2UoMSkgLy8gS2VlcCByZXN1bHRzIGF2YWlsYWJsZVxuICAgIH1cbiAgICBsb2Rhc2guZGVmZXIoKCkgPT4ge1xuICAgICAgZm9jdXNFbGVtZW50SW5LZXlib2FyZE1vZGUoYmFja0J0blJlZi5jdXJyZW50KVxuICAgIH0pXG4gIH0sIFtjbGVhclJlc3VsdCwgcmVzdWx0Q291bnRdKVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIHRhYiBzd2l0Y2hpbmcgYmV0d2VlbiBRdWVyeSBhbmQgUmVzdWx0cyB0YWJzLlxuICAgKiBUYWIgc3dpdGNoaW5nIHByZXNlcnZlcyByZXN1bHRzIHN0YXRlIC0gcmVzdWx0cyByZW1haW4gdmlzaWJsZSBhbmQgc2VsZWN0ZWRcbiAgICogd2hlbiBzd2l0Y2hpbmcgYmV0d2VlbiB0YWJzLiBSZXN1bHRzIGFyZSBvbmx5IGNsZWFyZWQgd2hlbiBleHBsaWNpdGx5XG4gICAqIGNsaWNraW5nIHRoZSB0cmFzaCBjYW4gYnV0dG9uIG9yIHdoZW4gc3RhcnRpbmcgYSBuZXcgcXVlcnkuXG4gICAqIFxuICAgKiBAcGFyYW0gdGFiIC0gVGhlIHRhYiB0byBzd2l0Y2ggdG8gKCdxdWVyeScgfCAncmVzdWx0cycpXG4gICAqIEBwYXJhbSBldmVudCAtIE9wdGlvbmFsIG1vdXNlIGV2ZW50IHRvIHByZXZlbnQgZGVmYXVsdCBiZWhhdmlvclxuICAgKi9cbiAgY29uc3QgaGFuZGxlVGFiQ2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soKHRhYjogJ3F1ZXJ5JyB8ICdyZXN1bHRzJywgZXZlbnQ/OiBSZWFjdC5Nb3VzZUV2ZW50KSA9PiB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgZXZlbnQ6ICd0YWItY2hhbmdlJyxcbiAgICAgIHRhYixcbiAgICAgIGN1cnJlbnRUYWI6IGFjdGl2ZVRhYixcbiAgICAgIHJlc3VsdENvdW50LFxuICAgICAgZXZlbnRUeXBlOiBldmVudD8udHlwZVxuICAgIH0pXG4gICAgXG4gICAgaWYgKGV2ZW50KSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuICAgIH1cbiAgICAvLyBEb24ndCBhbGxvdyBzd2l0Y2hpbmcgdG8gcmVzdWx0cyBpZiB0aGVyZSBhcmUgbm8gcmVzdWx0c1xuICAgIGlmICh0YWIgPT09ICdyZXN1bHRzJyAmJiByZXN1bHRDb3VudCA9PT0gMCkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgICBldmVudDogJ3RhYi1jaGFuZ2UtYmxvY2tlZCcsXG4gICAgICAgIHJlYXNvbjogJ25vLXJlc3VsdHMnLFxuICAgICAgICB0YWIsXG4gICAgICAgIHJlc3VsdENvdW50XG4gICAgICB9KVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIC8vIE1hcmsgdGhpcyBhcyBhIG1hbnVhbCBzd2l0Y2ggdG8gcHJldmVudCBhdXRvLXN3aXRjaCB1c2VFZmZlY3QgZnJvbSBpbnRlcmZlcmluZ1xuICAgIG1hbnVhbFRhYlN3aXRjaFJlZi5jdXJyZW50ID0gdHJ1ZVxuICAgIHNldEFjdGl2ZVRhYih0YWIpXG4gICAgXG4gICAgLy8gUmVzZXQgdGhlIGZsYWcgYWZ0ZXIgYSBzaG9ydCBkZWxheSB0byBhbGxvdyB0aGUgc3RhdGUgdXBkYXRlIHRvIGNvbXBsZXRlXG4gICAgLy8gVGhpcyBwcmV2ZW50cyB0aGUgYXV0by1zd2l0Y2ggdXNlRWZmZWN0IGZyb20gaW1tZWRpYXRlbHkgc3dpdGNoaW5nIGJhY2tcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIG1hbnVhbFRhYlN3aXRjaFJlZi5jdXJyZW50ID0gZmFsc2VcbiAgICB9LCAxMDApXG4gICAgXG4gICAgLy8gRG9uJ3QgY2hhbmdlIHN0YWdlIGhlcmUgLSBqdXN0IHN3aXRjaCB0aGUgdmlld1xuICAgIC8vIFN0YWdlIHNob3VsZCByZW1haW4gYXQgMSAocmVzdWx0cyBhdmFpbGFibGUpIHdoZW4gc3dpdGNoaW5nIGJldHdlZW4gdGFic1xuICB9LCBbcmVzdWx0Q291bnQsIGFjdGl2ZVRhYl0pXG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgZm9ybSBzdWJtaXNzaW9uIHdoZW4gdXNlciBjbGlja3MgXCJBcHBseVwiIGJ1dHRvbi5cbiAgICogQ2xlYXJzIG9sZCByZXN1bHRzIChpZiBhbnkpIGJ5IHByb2dyYW1tYXRpY2FsbHkgY2xpY2tpbmcgdGhlIHRyYXNoIGNhbiBidXR0b24sXG4gICAqIHRoZW4gZXhlY3V0ZXMgdGhlIHF1ZXJ5IHdpdGggdGhlIHByb3ZpZGVkIFNRTCBleHByZXNzaW9uIGFuZCBzcGF0aWFsIGZpbHRlci5cbiAgICogXG4gICAqIEBwYXJhbSBzcWxFeHByIC0gVGhlIFNRTCBleHByZXNzaW9uIGZvciBhdHRyaWJ1dGUgZmlsdGVyaW5nXG4gICAqIEBwYXJhbSBzcGF0aWFsRmlsdGVyIC0gVGhlIHNwYXRpYWwgZmlsdGVyIG9iamVjdFxuICAgKiBAcGFyYW0gcnVudGltZVpvb21Ub1NlbGVjdGVkIC0gT3B0aW9uYWwgcnVudGltZSBvdmVycmlkZSBmb3Igem9vbS10by1zZWxlY3RlZCBiZWhhdmlvclxuICAgKi9cbiAgY29uc3QgaGFuZGxlRm9ybVN1Ym1pdCA9IFJlYWN0LnVzZUNhbGxiYWNrKGFzeW5jIChzcWxFeHByOiBJTVNxbEV4cHJlc3Npb24sIHNwYXRpYWxGaWx0ZXI6IFNwYXRpYWxGaWx0ZXJPYmosIHJ1bnRpbWVab29tVG9TZWxlY3RlZD86IGJvb2xlYW4pID0+IHtcbiAgICAvLyBDbGVhciBwcmV2aW91cyBlcnJvcnMgd2hlbiBzdGFydGluZyBhIG5ldyBxdWVyeVxuICAgIHNldFNlbGVjdGlvbkVycm9yKG51bGwpXG4gICAgc2V0Wm9vbUVycm9yKG51bGwpXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgZXZlbnQ6ICdoYW5kbGVGb3JtU3VibWl0LXN0YXJ0JyxcbiAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcblxuICAgIC8vIFN0b3JlIHRoZSBydW50aW1lIHpvb20gb3ZlcnJpZGUgZm9yIHVzZSBieSBBZGQgdG8gTWFwIGFjdGlvblxuICAgIGxhc3RSdW50aW1lWm9vbVRvU2VsZWN0ZWRSZWYuY3VycmVudCA9IHJ1bnRpbWVab29tVG9TZWxlY3RlZFxuICAgIFxuICAgIGF0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmouY3VycmVudCA9IHNxbEV4cHJcbiAgICBzcGF0aWFsRmlsdGVyT2JqLmN1cnJlbnQgPSBzcGF0aWFsRmlsdGVyXG4gICAgLy8gTG9hZCB0aGUgZmlyc3QgcGFnZVxuICAgIGNvbnN0IGZlYXR1cmVEUyA9IG91dHB1dERTIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgICBcbiAgICAvLyBGb3IgXCJBZGQgdG9cIiBhbmQgXCJSZW1vdmUgZnJvbVwiIG1vZGVzLCB1c2Ugd2lkZ2V0LWxldmVsIGFjY3VtdWxhdGVkIHJlY29yZHNcbiAgICAvLyBUaGVzZSBwZXJzaXN0IGFjcm9zcyBxdWVyeSBzd2l0Y2hlcywgdW5saWtlIHF1ZXJ5LWl0ZW0tbGV2ZWwgcmVjb3Jkc1xuICAgIGxldCBleGlzdGluZ1JlY29yZHNGb3JNZXJnZTogRmVhdHVyZURhdGFSZWNvcmRbXSA9IFtdXG4gICAgaWYgKHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uIHx8IHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb24pIHtcbiAgICAgIC8vIFJvYnVzdCBjYXB0dXJlIHN0cmF0ZWd5OlxuICAgICAgLy8gMS4gVHJ5IHJlY29yZHMgZnJvbSBwcm9wcyAoYWxyZWFkeSBtZXJnZWQgYnkgcGFyZW50KVxuICAgICAgLy8gMi4gRmFsbGJhY2sgdG8gY3VycmVudGx5IHNlbGVjdGVkIHJlY29yZHMgaW4gRFMgKGNhcHR1cmVkIGR1cmluZyBtb2RlIHN3aXRjaClcbiAgICAgIGNvbnN0IGZyb21Qcm9wID0gYWNjdW11bGF0ZWRSZWNvcmRzIHx8IFtdXG4gICAgICBjb25zdCBmcm9tRFMgPSBvdXRwdXREUz8uZ2V0U2VsZWN0ZWRSZWNvcmRzKCkgYXMgRmVhdHVyZURhdGFSZWNvcmRbXSB8fCBbXVxuICAgICAgXG4gICAgICBleGlzdGluZ1JlY29yZHNGb3JNZXJnZSA9IGZyb21Qcm9wLmxlbmd0aCA+IDAgPyBmcm9tUHJvcCA6IGZyb21EU1xuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdjYXB0dXJlZC1leGlzdGluZy1yZWNvcmRzLWRpYWdub3N0aWMnLFxuICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgICBmcm9tUHJvcENvdW50OiBmcm9tUHJvcC5sZW5ndGgsXG4gICAgICAgIGZyb21EU0NvdW50OiBmcm9tRFMubGVuZ3RoLFxuICAgICAgICBmaW5hbENhcHR1cmVkQ291bnQ6IGV4aXN0aW5nUmVjb3Jkc0Zvck1lcmdlLmxlbmd0aCxcbiAgICAgICAgZmlyc3RSZWNvcmRJZDogZXhpc3RpbmdSZWNvcmRzRm9yTWVyZ2VbMF0/LmdldElkPy4oKSB8fCAnbm9uZScsXG4gICAgICAgIGFsbFJlY29yZElkczogZXhpc3RpbmdSZWNvcmRzRm9yTWVyZ2UubWFwKHIgPT4gci5nZXRJZD8uKCkpLnNsaWNlKDAsIDEwKSxcbiAgICAgICAgb3V0cHV0RFNJZDogb3V0cHV0RFMuaWQsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICB9XG4gICAgXG4gICAgLy8gRm9yIFwiTmV3XCIgbW9kZSwgY2xlYXIgb2xkIHJlc3VsdHMgYW5kIGdyYXBoaWNzIGxheWVyXG4gICAgLy8gV2UgY2FsbCBjbGVhclJlc3VsdCgpIGRpcmVjdGx5IGFuZCBBV0FJVCBpdCB0byBlbnN1cmUgaXQncyBmaW5pc2hlZCBiZWZvcmUgcXVlcnkgZXhlY3V0aW9uIHN0YXJ0c1xuICAgIGlmIChyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb24pIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgICAgZXZlbnQ6ICdoYW5kbGVGb3JtU3VibWl0LWNsZWFyaW5nLXJlc3VsdHMtZm9yLW5ldy1tb2RlJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICBhd2FpdCBjbGVhclJlc3VsdCgnaGFuZGxlRm9ybVN1Ym1pdC1uZXctbW9kZScpXG4gICAgfVxuICAgIFxuICAgIC8vIFNldCBsb2FkaW5nIHN0YWdlXG4gICAgc2V0U3RhZ2UoMilcbiAgICBcbiAgICAvLyBGT1JDRUQ6IEFsd2F5cyB1c2UgU2ltcGxlTGlzdCAtIGZldGNoIEFMTCByZWNvcmRzLCBub3QganVzdCBhIHBhZ2VcbiAgICAvLyBVc2UgZGF0YSBzb3VyY2UncyBtYXggcmVjb3JkIGNvdW50LCBvciBmYWxsIGJhY2sgdG8gYSBsYXJnZSBudW1iZXIgKDEwMDAwKVxuICAgIGNvbnN0IG1heFJlY29yZENvdW50ID0gKGZlYXR1cmVEUyBhcyBhbnkpLmdldE1heFJlY29yZENvdW50Py4oKSA/PyAxMDAwMFxuICAgIGxldCBwYWdlU2l6ZSA9IG1heFJlY29yZENvdW50XG4gICAgY29uc3QgcXVlcnlQYXJhbXMgPSBnZW5lcmF0ZVF1ZXJ5UGFyYW1zKGZlYXR1cmVEUywgc3FsRXhwciwgc3BhdGlhbEZpbHRlciwgY3VycmVudEl0ZW0sIDEsIHBhZ2VTaXplKVxuICAgIHF1ZXJ5UGFyYW1SZWYuY3VycmVudCA9IHF1ZXJ5UGFyYW1zXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgZXZlbnQ6ICdoYW5kbGVGb3JtU3VibWl0LWV4ZWN1dGluZy1xdWVyeScsXG4gICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICB3aGVyZTogcXVlcnlQYXJhbXMud2hlcmUsXG4gICAgICByZXN1bHRzTW9kZSxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgLy8gQ2hhbmdlIG91dHB1dCBkcyBzdGF0dXMgdG8gdW5sb2FkZWQgYmVmb3JlIHVzZSBpdCB0byBsb2FkIGNvdW50L3JlY29yZHMuXG4gICAgZmVhdHVyZURTLnNldFN0YXR1cyhEYXRhU291cmNlU3RhdHVzLlVubG9hZGVkKVxuICAgIGZlYXR1cmVEUy5zZXRDb3VudFN0YXR1cyhEYXRhU291cmNlU3RhdHVzLlVubG9hZGVkKVxuICAgIGxldCBxdWVyeVJlc3VsdENvdW50ID0gMCAvLyBDYXB0dXJlIGNvdW50IGZyb20gcmVjb3JkcyB0byB1c2UgaW4gZmluYWxseSBibG9ja1xuICAgIGNvbnN0IHN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgZXZlbnQ6ICdwZXJmLXF1ZXJ5LWNoYWluLXN0YXJ0JyxcbiAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgd2hlcmU6IHF1ZXJ5UGFyYW1zLndoZXJlLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcblxuICAgIC8vIFBFUkZPUk1BTkNFIE9QVElNSVpBVElPTjogUmVtb3ZlZCByZWR1bmRhbnQgZXhlY3V0ZUNvdW50UXVlcnkoKSByb3VuZC10cmlwLlxuICAgIC8vIFNpbmNlIHdlIGZldGNoIEFMTCByZWNvcmRzIChwYWdlU2l6ZSA9IG1heFJlY29yZENvdW50KSwgd2UgY2FuIGp1c3QgdXNlIHJlY29yZHMubGVuZ3RoLlxuICAgIGZlYXR1cmVEUy51cGRhdGVRdWVyeVBhcmFtcyhxdWVyeVBhcmFtUmVmLmN1cnJlbnQsIHByb3BzLndpZGdldElkKVxuICAgIFxuICAgIGNvbnN0IGZldGNoU3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KClcbiAgICBleGVjdXRlUXVlcnkocHJvcHMud2lkZ2V0SWQsIHF1ZXJ5SXRlbSwgZmVhdHVyZURTLCBxdWVyeVBhcmFtUmVmLmN1cnJlbnQpXG4gICAgICAudGhlbihhc3luYyAocmVzdWx0KSA9PiB7XG4gICAgICAgIGNvbnN0IGZldGNoRHVyYXRpb25NcyA9IE1hdGgucm91bmQocGVyZm9ybWFuY2Uubm93KCkgLSBmZXRjaFN0YXJ0VGltZSlcbiAgICAgICAgY29uc3QgcHJvY2Vzc2luZ1N0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpXG4gICAgICAgIFxuICAgICAgICBxdWVyeVJlc3VsdENvdW50ID0gcmVzdWx0LnJlY29yZHM/Lmxlbmd0aCB8fCAwXG4gICAgICAgIFxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICBldmVudDogJ3F1ZXJ5LWV4ZWN1dGlvbi1jb21wbGV0ZScsXG4gICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgICAgIHJlY29yZHNSZXR1cm5lZDogcXVlcnlSZXN1bHRDb3VudCxcbiAgICAgICAgICBmZXRjaER1cmF0aW9uTXMsXG4gICAgICAgICAgZXhpc3RpbmdDYXB0dXJlZENvdW50OiBleGlzdGluZ1JlY29yZHNGb3JNZXJnZS5sZW5ndGgsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH0pXG5cbiAgICAgICAgbGV0IHJlY29yZHNUb0Rpc3BsYXkgPSByZXN1bHQucmVjb3JkcyB8fCBbXVxuICAgICAgICBsZXQgZHNUb1VzZSA9IG91dHB1dERTXG4gICAgICAgIFxuICAgICAgICAvLyBIYW5kbGUgXCJBZGQgdG9cIiBtb2RlOiBtZXJnZSBuZXcgcmVzdWx0cyB3aXRoIHdpZGdldC1sZXZlbCBhY2N1bXVsYXRlZCByZWNvcmRzXG4gICAgICAgIGlmIChyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbiAmJiByZXN1bHQucmVjb3JkcyAmJiByZXN1bHQucmVjb3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICBldmVudDogJ2FkZC1tb2RlLXN0YXJ0aW5nLW1lcmdlLWRpYWdub3N0aWMnLFxuICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgIGV4aXN0aW5nQ291bnQ6IGV4aXN0aW5nUmVjb3Jkc0Zvck1lcmdlLmxlbmd0aCxcbiAgICAgICAgICAgICAgZXhpc3RpbmdJZHM6IGV4aXN0aW5nUmVjb3Jkc0Zvck1lcmdlLm1hcChyID0+IHIuZ2V0SWQ/LigpKS5zbGljZSgwLCA1KSxcbiAgICAgICAgICAgICAgbmV3Q291bnQ6IHJlc3VsdC5yZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgICAgICAgbmV3SWRzOiByZXN1bHQucmVjb3Jkcy5tYXAoKHI6IGFueSkgPT4gci5nZXRJZD8uKCkpLnNsaWNlKDAsIDUpLFxuICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAvLyBNZXJnZSBuZXcgcXVlcnkgcmVzdWx0cyB3aXRoIHdpZGdldC1sZXZlbCBhY2N1bXVsYXRlZCByZWNvcmRzXG4gICAgICAgICAgICBjb25zdCBtZXJnZWRSZWNvcmRzID0gbWVyZ2VSZXN1bHRzSW50b0FjY3VtdWxhdGVkKFxuICAgICAgICAgICAgICBvdXRwdXREUyBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLCAvLyBVc2Ugb3V0cHV0RFMgZm9yIGtleSBnZW5lcmF0aW9uXG4gICAgICAgICAgICAgIHJlc3VsdC5yZWNvcmRzIGFzIEZlYXR1cmVEYXRhUmVjb3JkW10sXG4gICAgICAgICAgICAgIGV4aXN0aW5nUmVjb3Jkc0Zvck1lcmdlIC8vIFVzZSBjb25zaXN0ZW50bHkgY2FwdHVyZWQgcmVjb3Jkc1xuICAgICAgICAgICAgKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICByZWNvcmRzVG9EaXNwbGF5ID0gbWVyZ2VkUmVjb3Jkc1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBVcGRhdGUgd2lkZ2V0LWxldmVsIGFjY3VtdWxhdGVkIHJlY29yZHMgc28gdGhleSBwZXJzaXN0IGFjcm9zcyBxdWVyeSBzd2l0Y2hlc1xuICAgICAgICAgICAgaWYgKG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlKSB7XG4gICAgICAgICAgICAgIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlKG1lcmdlZFJlY29yZHMpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICBldmVudDogJ2FkZC1tb2RlLW1lcmdlLWNvbXBsZXRlLWRpYWdub3N0aWMnLFxuICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgIG1lcmdlZFJlY29yZHNDb3VudDogbWVyZ2VkUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgICAgICAgIG1lcmdlZElkczogbWVyZ2VkUmVjb3Jkcy5tYXAociA9PiByLmdldElkPy4oKSkuc2xpY2UoMCwgMTApLFxuICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICBldmVudDogJ2FkZC1tb2RlLWVycm9yJyxcbiAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicsXG4gICAgICAgICAgICAgIGVycm9yU3RhY2s6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC8vIEZhbGwgYmFjayB0byBub3JtYWwgYmVoYXZpb3Igb24gZXJyb3JcbiAgICAgICAgICAgIHJlY29yZHNUb0Rpc3BsYXkgPSByZXN1bHQucmVjb3Jkc1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uKSB7XG4gICAgICAgICAgLy8gSGFuZGxlIFwiUmVtb3ZlIGZyb21cIiBtb2RlOiByZW1vdmUgbWF0Y2hpbmcgcmVjb3JkcyBmcm9tIHdpZGdldC1sZXZlbCBhY2N1bXVsYXRlZCByZWNvcmRzXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICBldmVudDogJ3JlbW92ZS1tb2RlLXN0YXJ0aW5nLW1lcmdlJyxcbiAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICBleGlzdGluZ0NvdW50OiBleGlzdGluZ1JlY29yZHNGb3JNZXJnZS5sZW5ndGgsXG4gICAgICAgICAgICAgIHJlbW92ZUNvdW50OiByZXN1bHQucmVjb3Jkcz8ubGVuZ3RoIHx8IDBcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAvLyBDaGVjayBpZiB3ZSBoYXZlIGFjY3VtdWxhdGVkIHJlY29yZHMgdG8gcmVtb3ZlIGZyb21cbiAgICAgICAgICAgIGlmIChleGlzdGluZ1JlY29yZHNGb3JNZXJnZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgICAgZXZlbnQ6ICdyZW1vdmUtbW9kZS1uby1hY2N1bXVsYXRlZC1yZWNvcmRzJyxcbiAgICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgcXVlcnlSZWNvcmRzQ291bnQ6IHJlc3VsdC5yZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgICAgICAgICBub3RlOiAnTm8gYWNjdW11bGF0ZWQgcmVjb3JkcyB0byByZW1vdmUgZnJvbSAtIG5vLW9wJ1xuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAvLyBObyBhY2N1bXVsYXRlZCByZWNvcmRzLCBzbyBub3RoaW5nIHRvIHJlbW92ZSAtIHNob3cgZW1wdHkgcmVzdWx0c1xuICAgICAgICAgICAgICByZWNvcmRzVG9EaXNwbGF5ID0gW11cbiAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzdWx0LnJlY29yZHMgJiYgcmVzdWx0LnJlY29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAvLyBSZW1vdmUgbWF0Y2hpbmcgcmVjb3JkcyBmcm9tIGFjY3VtdWxhdGVkIHJlY29yZHNcbiAgICAgICAgICAgICAgY29uc3QgcmVtYWluaW5nUmVjb3JkcyA9IHJlbW92ZVJlc3VsdHNGcm9tQWNjdW11bGF0ZWQoXG4gICAgICAgICAgICAgICAgb3V0cHV0RFMgYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSwgLy8gVXNlIG91dHB1dERTIGZvciBrZXkgZ2VuZXJhdGlvblxuICAgICAgICAgICAgICAgIHJlc3VsdC5yZWNvcmRzIGFzIEZlYXR1cmVEYXRhUmVjb3JkW10sXG4gICAgICAgICAgICAgICAgZXhpc3RpbmdSZWNvcmRzRm9yTWVyZ2UgLy8gVXNlIGNvbnNpc3RlbnRseSBjYXB0dXJlZCByZWNvcmRzXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIHJlY29yZHNUb0Rpc3BsYXkgPSByZW1haW5pbmdSZWNvcmRzXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBVcGRhdGUgd2lkZ2V0LWxldmVsIGFjY3VtdWxhdGVkIHJlY29yZHNcbiAgICAgICAgICAgICAgaWYgKG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UocmVtYWluaW5nUmVjb3JkcylcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gUmVtb3ZlIHJlY29yZHMgZnJvbSBvcmlnaW4gZGF0YSBzb3VyY2Ugc2VsZWN0aW9ucyAobWFwIGhpZ2hsaWdodGluZylcbiAgICAgICAgICAgICAgLy8gQWxzbyByZW1vdmVzIGdyYXBoaWNzIGZyb20gZ3JhcGhpY3MgbGF5ZXIgaWYgdXNpbmcgZ3JhcGhpY3MgbGF5ZXIgaGlnaGxpZ2h0aW5nXG4gICAgICAgICAgICAgIHJlbW92ZVJlY29yZHNGcm9tT3JpZ2luU2VsZWN0aW9ucyhcbiAgICAgICAgICAgICAgICBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgICByZXN1bHQucmVjb3JkcyBhcyBGZWF0dXJlRGF0YVJlY29yZFtdLFxuICAgICAgICAgICAgICAgIG91dHB1dERTIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2UsXG4gICAgICAgICAgICAgICAgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCxcbiAgICAgICAgICAgICAgICBncmFwaGljc0xheWVyXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICAgIGV2ZW50OiAncmVtb3ZlLW1vZGUtY29tcGxldGUnLFxuICAgICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgICBleGlzdGluZ0FjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiBleGlzdGluZ1JlY29yZHNGb3JNZXJnZS5sZW5ndGgsXG4gICAgICAgICAgICAgICAgcXVlcnlSZWNvcmRzQ291bnQ6IHJlc3VsdC5yZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgICAgICAgICByZW1haW5pbmdSZWNvcmRzQ291bnQ6IHJlbWFpbmluZ1JlY29yZHMubGVuZ3RoLFxuICAgICAgICAgICAgICAgIHJlY29yZHNSZW1vdmVkOiBleGlzdGluZ1JlY29yZHNGb3JNZXJnZS5sZW5ndGggLSByZW1haW5pbmdSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBvdXRwdXREU0lkOiBvdXRwdXREUy5pZCxcbiAgICAgICAgICAgICAgICB3aWRnZXRMZXZlbFJlY29yZHNVcGRhdGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgIG9yaWdpblNlbGVjdGlvbnNVcGRhdGVkOiB0cnVlXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBJZiBhbGwgcmVjb3JkcyByZW1vdmVkLCBhdXRvLWNsZWFyIChjb25zaXN0ZW50IHdpdGggdXNlciBleHBlY3RhdGlvbilcbiAgICAgICAgICAgICAgaWYgKHJlbWFpbmluZ1JlY29yZHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgICAgICBldmVudDogJ3JlbW92ZS1tb2RlLWFsbC1yZWNvcmRzLXJlbW92ZWQnLFxuICAgICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICAgICAgbm90ZTogJ0FsbCBhY2N1bXVsYXRlZCByZWNvcmRzIHJlbW92ZWQgLSBhdXRvLWNsZWFyaW5nJ1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLy8gQ2xlYXIgd2lkZ2V0LWxldmVsIGFjY3VtdWxhdGVkIHJlY29yZHNcbiAgICAgICAgICAgICAgICBpZiAob25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlKFtdKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgLy8gUXVlcnkgcmV0dXJuZWQgbm8gcmVzdWx0cyAtIG5vdGhpbmcgdG8gcmVtb3ZlXG4gICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICAgIGV2ZW50OiAncmVtb3ZlLW1vZGUtbm8tcXVlcnktcmVzdWx0cycsXG4gICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICAgIGV4aXN0aW5nQWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGV4aXN0aW5nUmVjb3Jkc0Zvck1lcmdlLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBub3RlOiAnUXVlcnkgcmV0dXJuZWQgbm8gcmVzdWx0cyAtIG5vIHJlY29yZHMgdG8gcmVtb3ZlJ1xuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAvLyBLZWVwIGV4aXN0aW5nIGFjY3VtdWxhdGVkIHJlY29yZHMgZGlzcGxheWVkXG4gICAgICAgICAgICAgIHJlY29yZHNUb0Rpc3BsYXkgPSBleGlzdGluZ1JlY29yZHNGb3JNZXJnZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgZXZlbnQ6ICdyZW1vdmUtbW9kZS1lcnJvcicsXG4gICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InLFxuICAgICAgICAgICAgICBlcnJvclN0YWNrOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWRcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAvLyBGYWxsIGJhY2sgdG8gc2hvd2luZyBxdWVyeSByZXN1bHRzIG9uIGVycm9yXG4gICAgICAgICAgICByZWNvcmRzVG9EaXNwbGF5ID0gcmVzdWx0LnJlY29yZHMgfHwgW11cbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAocmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uKSB7XG4gICAgICAgICAgLy8gRm9yIFwiTmV3XCIgbW9kZSwgY2xlYXIgd2lkZ2V0LWxldmVsIGFjY3VtdWxhdGVkIHJlY29yZHNcbiAgICAgICAgICBpZiAob25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UpIHtcbiAgICAgICAgICAgIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlKFtdKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmVjb3Jkc1JlZi5jdXJyZW50ID0gcmVjb3Jkc1RvRGlzcGxheVxuICAgICAgICAvLyBSZXNldCBzZWxlY3Rpb24gZmxhZyBmb3IgbmV3IHF1ZXJ5IHJlc3VsdHNcbiAgICAgICAgaGFzU2VsZWN0ZWRSZWNvcmRzUmVmLmN1cnJlbnQgPSBmYWxzZVxuICAgICAgICBcbiAgICAgICAgLy8gU2VsZWN0IHJlY29yZHMgaW4gdGhlIG91dHB1dCBEU1xuICAgICAgICAvLyBGb3IgXCJBZGQgdG9cIiBtb2RlLCBzZWxlY3QgbWVyZ2VkIHJlY29yZHNcbiAgICAgICAgLy8gRm9yIFwiUmVtb3ZlIGZyb21cIiBtb2RlLCBzZWxlY3QgcmVtYWluaW5nIHJlY29yZHMgKGFscmVhZHkgdXBkYXRlZCB2aWEgcmVtb3ZlUmVjb3Jkc0Zyb21PcmlnaW5TZWxlY3Rpb25zKVxuICAgICAgICAvLyBGb3IgXCJOZXdcIiBtb2RlLCBzZWxlY3QgcXVlcnkgcmVzdWx0c1xuICAgICAgICBpZiAocmVjb3Jkc1RvRGlzcGxheSAmJiByZWNvcmRzVG9EaXNwbGF5Lmxlbmd0aCA+IDAgJiYgZHNUb1VzZSkge1xuICAgICAgICAgIGNvbnN0IHJlY29yZElkc1RvU2VsZWN0ID0gcmVjb3Jkc1RvRGlzcGxheS5tYXAocmVjb3JkID0+IHJlY29yZC5nZXRJZCgpKVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIEZvciBcIlJlbW92ZSBmcm9tXCIgbW9kZSwgc2VsZWN0aW9uIHdhcyBhbHJlYWR5IHVwZGF0ZWQgdmlhIHJlbW92ZVJlY29yZHNGcm9tT3JpZ2luU2VsZWN0aW9uc1xuICAgICAgICAgIC8vIEJ1dCB3ZSBzdGlsbCBuZWVkIHRvIHNlbGVjdCBpbiB0aGUgb3V0cHV0RFMgZm9yIHdpZGdldCBzdGF0ZSBjb25zaXN0ZW5jeVxuICAgICAgICAgIGlmIChyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uKSB7XG4gICAgICAgICAgICAvLyBTZWxlY3Rpb24gd2FzIGFscmVhZHkgdXBkYXRlZCBpbiBvcmlnaW4gRFNzIHZpYSByZW1vdmVSZWNvcmRzRnJvbU9yaWdpblNlbGVjdGlvbnNcbiAgICAgICAgICAgIC8vIEp1c3QgdXBkYXRlIG91dHB1dERTIHNlbGVjdGlvbiBmb3Igd2lkZ2V0IHN0YXRlIGNvbnNpc3RlbmN5XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBpZiAodHlwZW9mIGRzVG9Vc2Uuc2VsZWN0UmVjb3Jkc0J5SWRzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgZHNUb1VzZS5zZWxlY3RSZWNvcmRzQnlJZHMocmVjb3JkSWRzVG9TZWxlY3QsIHJlY29yZHNUb0Rpc3BsYXkgYXMgRmVhdHVyZURhdGFSZWNvcmRbXSlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBoYXNTZWxlY3RlZFJlY29yZHNSZWYuY3VycmVudCA9IHRydWVcbiAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgICAgZXZlbnQ6ICdyZW1vdmUtbW9kZS1vdXRwdXQtZHMtc2VsZWN0aW9uLXVwZGF0ZWQnLFxuICAgICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgICByZWNvcmRDb3VudDogcmVjb3Jkc1RvRGlzcGxheS5sZW5ndGhcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICAgIGV2ZW50OiAncmVtb3ZlLW1vZGUtb3V0cHV0LWRzLXNlbGVjdGlvbi1lcnJvcicsXG4gICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ1xuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBGb3IgXCJBZGQgdG9cIiBhbmQgXCJOZXdcIiBtb2Rlcywgc2VsZWN0IHJlY29yZHMgbm9ybWFsbHlcbiAgICAgICAgICAgIHNldFNlbGVjdGlvbkVycm9yKG51bGwpIC8vIENsZWFyIHByZXZpb3VzIGVycm9yc1xuICAgICAgICAgICAgOyhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgc2VsZWN0UmVjb3Jkc0FuZFB1Ymxpc2goXG4gICAgICAgICAgICAgICAgICBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgICAgIGRzVG9Vc2UsXG4gICAgICAgICAgICAgICAgICByZWNvcmRJZHNUb1NlbGVjdCxcbiAgICAgICAgICAgICAgICAgIHJlY29yZHNUb0Rpc3BsYXkgYXMgRmVhdHVyZURhdGFSZWNvcmRbXSxcbiAgICAgICAgICAgICAgICAgIGZhbHNlLFxuICAgICAgICAgICAgICAgICAgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCxcbiAgICAgICAgICAgICAgICAgIGdyYXBoaWNzTGF5ZXIsXG4gICAgICAgICAgICAgICAgICBtYXBWaWV3XG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIGhhc1NlbGVjdGVkUmVjb3Jkc1JlZi5jdXJyZW50ID0gdHJ1ZSAvLyBNYXJrIGFzIHNlbGVjdGVkXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gRGlzcGF0Y2ggY3VzdG9tIHNlbGVjdGlvbiBldmVudCBzbyBXaWRnZXQgc3RhdGUgaXMgdXBkYXRlZCBpbW1lZGlhdGVseVxuICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgY3J1Y2lhbCBmb3IgaGFzaC1iYXNlZCBleGVjdXRpb24gd2hlcmUgUXVlcnlUYXNrIGhhbmRsZXMgc2VsZWN0aW9uXG4gICAgICAgICAgICAgICAgZGlzcGF0Y2hTZWxlY3Rpb25FdmVudChwcm9wcy53aWRnZXRJZCwgcmVjb3JkSWRzVG9TZWxlY3QsIGRzVG9Vc2UsIHF1ZXJ5SXRlbS5jb25maWdJZClcbiAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gc2VsZWN0IHF1ZXJ5IHJlc3VsdHMnXG4gICAgICAgICAgICAgICAgc2V0U2VsZWN0aW9uRXJyb3IoZXJyb3JNZXNzYWdlKVxuICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgICAgICAgICAgICAgIGV2ZW50OiAnc2VsZWN0aW9uLWZhaWxlZCcsXG4gICAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3JNZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgZXJyb3JTdGFjazogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnN0YWNrIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgcmVjb3JkQ291bnQ6IHJlY29yZElkc1RvU2VsZWN0Lmxlbmd0aFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pKClcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAocmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvbiAmJiByZWNvcmRzVG9EaXNwbGF5Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIC8vIEFsbCByZWNvcmRzIHJlbW92ZWQgLSBjbGVhciBzZWxlY3Rpb25cbiAgICAgICAgICA7KGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGF3YWl0IGNsZWFyU2VsZWN0aW9uSW5EYXRhU291cmNlcyhwcm9wcy53aWRnZXRJZCwgZHNUb1VzZSwgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCwgZ3JhcGhpY3NMYXllcilcbiAgICAgICAgICAgICAgaGFzU2VsZWN0ZWRSZWNvcmRzUmVmLmN1cnJlbnQgPSBmYWxzZVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gTm90aWZ5IFdpZGdldCB0aGF0IHNlbGVjdGlvbiBpcyBjbGVhcmVkXG4gICAgICAgICAgICAgIGRpc3BhdGNoU2VsZWN0aW9uRXZlbnQocHJvcHMud2lkZ2V0SWQsIFtdLCBkc1RvVXNlLCBxdWVyeUl0ZW0uY29uZmlnSWQpXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgICBldmVudDogJ3JlbW92ZS1tb2RlLWFsbC1yZWNvcmRzLXJlbW92ZWQtc2VsZWN0aW9uLWNsZWFyZWQnLFxuICAgICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZFxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgICAgZXZlbnQ6ICdyZW1vdmUtbW9kZS1jbGVhci1zZWxlY3Rpb24tZXJyb3InLFxuICAgICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcidcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KSgpXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIE1hcmsgdGhhdCBxdWVyeSBqdXN0IGV4ZWN1dGVkIEJFRk9SRSB1cGRhdGluZyByZXN1bHRDb3VudFxuICAgICAgICAvLyBUaGlzIGVuc3VyZXMgdGhlIGF1dG8tc3dpdGNoIHVzZUVmZmVjdCBzZWVzIHF1ZXJ5SnVzdEV4ZWN1dGVkUmVmLmN1cnJlbnQgPT09IHRydWVcbiAgICAgICAgcXVlcnlKdXN0RXhlY3V0ZWRSZWYuY3VycmVudCA9IHRydWVcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgICAgIGV2ZW50OiAncXVlcnktZXhlY3V0ZWQtZmxhZy1zZXQnLFxuICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICBxdWVyeUl0ZW1Db25maWdJZDogcXVlcnlJdGVtLmNvbmZpZ0lkLFxuICAgICAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgICAgIHJlY29yZHNUb0Rpc3BsYXlDb3VudDogcmVjb3Jkc1RvRGlzcGxheS5sZW5ndGgsXG4gICAgICAgICAgcXVlcnlSZXN1bHRDb3VudCxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfSlcbiAgICAgICAgXG4gICAgICAgIC8vIFVwZGF0ZSByZXN1bHQgY291bnRcbiAgICAgICAgLy8gRm9yIFwiQWRkIHRvXCIgYW5kIFwiUmVtb3ZlIGZyb21cIiBtb2RlcywgdXNlIGFjY3VtdWxhdGVkL3JlbWFpbmluZyBjb3VudFxuICAgICAgICAvLyBGb3IgXCJOZXdcIiBtb2RlLCB1c2UgcXVlcnkgY291bnRcbiAgICAgICAgY29uc3QgbmV3UmVzdWx0Q291bnQgPSByZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbiB8fCByZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uXG4gICAgICAgICAgPyByZWNvcmRzVG9EaXNwbGF5Lmxlbmd0aFxuICAgICAgICAgIDogcXVlcnlSZXN1bHRDb3VudFxuICAgICAgICBcbiAgICAgICAgc2V0UmVzdWx0Q291bnQobmV3UmVzdWx0Q291bnQpXG4gICAgICAgIFxuICAgICAgICAvLyBJTlNUQU5UIFVJIEZJWCAoVGhlIFwiU3Bpbm5lciBCeXBhc3NcIik6IFxuICAgICAgICAvLyBEZWNvdXBsZSB0aGUgXCJSZXRyaWV2aW5nIHJlc3VsdHMuLi5cIiBzcGlubmVyIGZyb20gYXN5bmNocm9ub3VzIGFjdGlvbnMgbGlrZSB6b29taW5nLiBcbiAgICAgICAgLy8gQnkgY2FsbGluZyBzZXRTdGFnZSgxKSBub3csIHRoZSB1c2VyIHNlZXMgdGhlIHJlc3VsdCBsaXN0IGltbWVkaWF0ZWx5IHdoaWxlIFxuICAgICAgICAvLyB0aGUgbWFwIGFuaW1hdGlvbiBjb250aW51ZXMgaW4gdGhlIGJhY2tncm91bmQuXG4gICAgICAgIHNldFN0YWdlKDEpIFxuICAgICAgICBcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgICAgIGV2ZW50OiAncGVyZi1wcm9jZXNzaW5nLWNvbXBsZXRlJyxcbiAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgcHJvY2Vzc2luZ0R1cmF0aW9uTXM6IE1hdGgucm91bmQocGVyZm9ybWFuY2Uubm93KCkgLSBwcm9jZXNzaW5nU3RhcnRUaW1lKSxcbiAgICAgICAgICB0b3RhbENoYWluRHVyYXRpb25NczogTWF0aC5yb3VuZChwZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0VGltZSksXG4gICAgICAgICAgbmV3UmVzdWx0Q291bnQsXG4gICAgICAgICAgcmVzdWx0c01vZGUsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH0pXG5cbiAgICAgICAgLy8gVHJpZ2dlciB0aGUgZXhpc3Rpbmcgem9vbVRvRmVhdHVyZSBkYXRhIGFjdGlvbiAoc2FtZSBhcyBjbGlja2luZyBcIlpvb20gVG9cIiBpbiB0aGUgbWVudSlcbiAgICAgICAgLy8gVXNlIHJ1bnRpbWUgcHJlZmVyZW5jZSBpZiBwcm92aWRlZCwgb3RoZXJ3aXNlIGZhbGwgYmFjayB0byBjb25maWcgc2V0dGluZyAoZGVmYXVsdHMgdG8gdHJ1ZSlcbiAgICAgICAgY29uc3Qgc2hvdWxkWm9vbSA9IHJ1bnRpbWVab29tVG9TZWxlY3RlZCAhPT0gdW5kZWZpbmVkIFxuICAgICAgICAgID8gcnVudGltZVpvb21Ub1NlbGVjdGVkIFxuICAgICAgICAgIDogKHF1ZXJ5SXRlbS56b29tVG9TZWxlY3RlZCAhPT0gZmFsc2UpXG4gICAgICAgIFxuICAgICAgICAvLyBVc2UgdGhlIG91dHB1dCBEUyBhbmQgbWVyZ2VkIHJlY29yZHNcbiAgICAgICAgY29uc3QgcmVjb3Jkc0Zvclpvb20gPSByZWNvcmRzVG9EaXNwbGF5IHx8IHJlc3VsdC5yZWNvcmRzXG4gICAgICAgIGNvbnN0IGRzRm9yWm9vbSA9IGRzVG9Vc2UgfHwgb3V0cHV0RFNcbiAgICAgICAgXG4gICAgICAgIGlmIChyZWNvcmRzRm9yWm9vbSAmJiByZWNvcmRzRm9yWm9vbS5sZW5ndGggPiAwICYmIGRzRm9yWm9vbSAmJiBzaG91bGRab29tKSB7XG4gICAgICAgICAgLy8gQ3JlYXRlIGEgZGF0YSBzZXQgZnJvbSB0aGUgYXBwcm9wcmlhdGUgZGF0YSBzb3VyY2UgYW5kIHJlY29yZHNcbiAgICAgICAgICBjb25zdCBkYXRhU2V0OiBEYXRhUmVjb3JkU2V0ID0ge1xuICAgICAgICAgICAgZGF0YVNvdXJjZTogZHNGb3Jab29tLFxuICAgICAgICAgICAgcmVjb3JkczogcmVjb3Jkc0Zvclpvb20sXG4gICAgICAgICAgICBuYW1lOiBkc0Zvclpvb20uZ2V0TGFiZWwoKVxuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIEdldCBhdmFpbGFibGUgZGF0YSBhY3Rpb25zIGFuZCBmaW5kIHRoZSB6b29tVG9GZWF0dXJlIGFjdGlvblxuICAgICAgICAgIHJldHVybiBEYXRhQWN0aW9uTWFuYWdlci5nZXRJbnN0YW5jZSgpLmdldFN1cHBvcnRlZEFjdGlvbnMocHJvcHMud2lkZ2V0SWQsIFtkYXRhU2V0XSwgRGF0YUxldmVsLlJlY29yZHMpXG4gICAgICAgICAgICAudGhlbihhY3Rpb25DYXRlZ29yaWVzID0+IHtcbiAgICAgICAgICAgICAgLy8gTG9vayBmb3Igem9vbVRvRmVhdHVyZSBhY3Rpb24gaW4gYW55IGNhdGVnb3J5XG4gICAgICAgICAgICAgIGxldCB6b29tQWN0aW9uOiBhbnkgPSBudWxsXG4gICAgICAgICAgICAgIGZvciAoY29uc3QgY2F0ZWdvcnkgaW4gYWN0aW9uQ2F0ZWdvcmllcykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGFjdGlvbnMgPSBhY3Rpb25DYXRlZ29yaWVzW2NhdGVnb3J5XVxuICAgICAgICAgICAgICAgIHpvb21BY3Rpb24gPSBhY3Rpb25zLmZpbmQoKGFjdGlvbjogYW55KSA9PiBhY3Rpb24ubmFtZSA9PT0gJ3pvb21Ub0ZlYXR1cmUnIHx8IGFjdGlvbi5pZCA9PT0gJ3pvb21Ub0ZlYXR1cmUnKVxuICAgICAgICAgICAgICAgIGlmICh6b29tQWN0aW9uKSBicmVha1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgaWYgKHpvb21BY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAvLyBFeGVjdXRlIHRoZSBzYW1lIHpvb20gYWN0aW9uIHRoYXQgd29ya3Mgd2hlbiBjbGlja2VkIG1hbnVhbGx5XG4gICAgICAgICAgICAgICAgcmV0dXJuIERhdGFBY3Rpb25NYW5hZ2VyLmdldEluc3RhbmNlKCkuZXhlY3V0ZURhdGFBY3Rpb24oem9vbUFjdGlvbiwgW2RhdGFTZXRdLCBEYXRhTGV2ZWwuUmVjb3JkcywgcHJvcHMud2lkZ2V0SWQpXG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShmYWxzZSlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0ZhaWxlZCB0byB6b29tIHRvIGZlYXR1cmVzJ1xuICAgICAgICAgICAgICBzZXRab29tRXJyb3IoZXJyb3JNZXNzYWdlKVxuICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1pPT00nLCB7XG4gICAgICAgICAgICAgICAgZXZlbnQ6ICd6b29tLWFjdGlvbi1mYWlsZWQnLFxuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvck1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgZXJyb3JTdGFjazogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnN0YWNrIDogdW5kZWZpbmVkXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGV4ZWN1dGluZyB6b29tVG9GZWF0dXJlIGRhdGEgYWN0aW9uJywgZXJyb3IpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShmYWxzZSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0cnVlKVxuICAgICAgfSlcbiAgICAgIC5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgICAgICBldmVudDogJ3F1ZXJ5LWNoYWluLWZhaWxlZC1kaWFnbm9zdGljJyxcbiAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSxcbiAgICAgICAgICBlcnJvclN0YWNrOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWQsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH0pXG4gICAgICAgIHNldFN0YWdlKDEpIC8vIFJldHVybiB0byByZXN1bHRzIG9yIGZvcm0gc3RhZ2UgZXZlbiBvbiBlcnJvclxuICAgICAgfSlcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgaWYgKHNwYXRpYWxGaWx0ZXI/LmxheWVyICYmIHNwYXRpYWxGaWx0ZXI/LmNsZWFyQWZ0ZXJBcHBseSkge1xuICAgICAgICAgIHNwYXRpYWxGaWx0ZXIubGF5ZXIucmVtb3ZlQWxsKClcbiAgICAgICAgfVxuICAgICAgICAvLyBzZXRTdGFnZSgxKSAvLyBSZW1vdmVkIGZyb20gaGVyZTsgbm93IGNhbGxlZCBpbiB0aGUgbWFpbiBjaGFpbiBiZWZvcmUgYmFja2dyb3VuZCBhY3Rpb25zXG4gICAgICB9KVxuICB9LCBbY3VycmVudEl0ZW0sIHF1ZXJ5SXRlbSwgcHJvcHMud2lkZ2V0SWQsIG91dHB1dERTLCBwdWJsaXNoRGF0YUNsZWFyZWRNc2csIGNsZWFyUmVzdWx0LCByZXN1bHRzTW9kZSwgYWNjdW11bGF0ZWRSZWNvcmRzLCBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZSwgb25DbGVhckdyYXBoaWNzTGF5ZXJdKVxuXG4gIGNvbnN0IHsgdXNlQXR0cmlidXRlRmlsdGVyLCBzcWxFeHByT2JqLCB1c2VTcGF0aWFsRmlsdGVyLCBzcGF0aWFsRmlsdGVyVHlwZXMsIHNwYXRpYWxJbmNsdWRlUnVudGltZURhdGEsIHNwYXRpYWxSZWxhdGlvblVzZURhdGFTb3VyY2VzfSA9IGN1cnJlbnRJdGVtXG4gIGNvbnN0IHNob3dBdHRyaWJ1dGVGaWx0ZXIgPSB1c2VBdHRyaWJ1dGVGaWx0ZXIgJiYgc3FsRXhwck9iaiAhPSBudWxsXG4gIGNvbnN0IHNob3dTcGF0aWFsRmlsdGVyID0gc3BhdGlhbEZpbHRlckVuYWJsZWQgJiYgdXNlU3BhdGlhbEZpbHRlciAmJiAoc3BhdGlhbEZpbHRlclR5cGVzLmxlbmd0aCA+IDAgfHwgc3BhdGlhbEluY2x1ZGVSdW50aW1lRGF0YSB8fCBzcGF0aWFsUmVsYXRpb25Vc2VEYXRhU291cmNlcz8ubGVuZ3RoID4gMClcblxuICAvLyBERVRFQ1QgU1dJVENIIElOIFJFTkRFUlxuICBjb25zdCBpc1N3aXRjaGluZ1F1ZXJpZXMgPSBwcmV2aW91c0NvbmZpZ0lkUmVmLmN1cnJlbnQgIT09IHF1ZXJ5SXRlbS5jb25maWdJZFxuICBjb25zdCBpc1ZpcnR1YWxDbGVhckFjdGl2ZSA9IGlzU3dpdGNoaW5nUXVlcmllcyAmJiByZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb25cbiAgXG4gIC8vIFVzZSB0aGVzZSBcImVmZmVjdGl2ZVwiIHZhbHVlcyBmb3IgdGhlIFVJXG4gIGNvbnN0IGVmZmVjdGl2ZVJlc3VsdENvdW50ID0gaXNWaXJ0dWFsQ2xlYXJBY3RpdmUgPyAwIDogcmVzdWx0Q291bnRcbiAgY29uc3QgZWZmZWN0aXZlUmVjb3JkcyA9IGlzVmlydHVhbENsZWFyQWN0aXZlID8gW10gOiAocmVjb3Jkc1JlZi5jdXJyZW50IHx8IFtdKVxuXG4gIC8vIENyZWF0ZSBhIHVuaXF1ZSBrZXkgZm9yIHRoZSBjdXJyZW50IHF1ZXJ5IHJlc3VsdCBzZXQgdG8gaGVscCBFMkUgdGVzdHMgZGV0ZWN0IGZyZXNoIGRhdGFcbiAgY29uc3QgcmVzdWx0UXVlcnlLZXkgPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICByZXR1cm4gYCR7cXVlcnlJdGVtLmNvbmZpZ0lkfV8ke0RhdGUubm93KCl9YFxuICB9LCBbcXVlcnlJdGVtLmNvbmZpZ0lkLCByZXN1bHRDb3VudF0pXG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT17Y2xhc3NOYW1lcygncXVlcnktdGFzayBoLTEwMCcsIGNsYXNzTmFtZSwgeyB3cmFwcGVkOiB3cmFwcGVkSW5Qb3BwZXIgfSl9IFxuICAgICAgZGF0YS1yZXN1bHQtcXVlcnkta2V5PXtyZXN1bHRRdWVyeUtleX1cbiAgICAgIGNzcz17Y3NzYFxuICAgICAgJHtzdHlsZX1cbiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICBgfT5cbiAgICAgIDxEYXRhU291cmNlQ29tcG9uZW50IHVzZURhdGFTb3VyY2U9e3VzZU91dHB1dERzfSBvbkRhdGFTb3VyY2VDcmVhdGVkPXtoYW5kbGVPdXRwdXREYXRhU291cmNlQ3JlYXRlZH0gb25EYXRhU291cmNlSW5mb0NoYW5nZT17aGFuZGxlT3V0cHV0RGF0YVNvdXJjZUluZm9DaGFuZ2V9Lz5cbiAgICAgIFxuICAgICAgey8qIFRhYiBOYXZpZ2F0aW9uIC0gTW92ZWQgdG8gdG9wICovfVxuICAgICAgPFRhYnNcbiAgICAgICAgdmFsdWU9e2FjdGl2ZVRhYn1cbiAgICAgICAgb25DaGFuZ2U9eyhpZCkgPT4gaGFuZGxlVGFiQ2hhbmdlKGlkIGFzICdxdWVyeScgfCAncmVzdWx0cycpfVxuICAgICAgICBmaWxsPXt0cnVlfVxuICAgICAgICB0eXBlPSd1bmRlcmxpbmUnXG4gICAgICAgIGtlZXBNb3VudD17dHJ1ZX1cbiAgICAgICAgY3NzPXtjc3NgXG4gICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgICBtaW4taGVpZ2h0OiAwO1xuICAgICAgICBgfVxuICAgICAgPlxuICAgICAgICA8VGFiXG4gICAgICAgICAgaWQ9J3F1ZXJ5J1xuICAgICAgICAgIHRpdGxlPXtnZXRJMThuTWVzc2FnZSgncXVlcnlUYWInKX1cbiAgICAgICAgPlxuICAgICAgICAgIDxkaXYgXG4gICAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ3F1ZXJ5LXRhc2tfX2NvbnRlbnQnLCB7XG4gICAgICAgICAgICAgIFtGT0NVU0FCTEVfQ09OVEFJTkVSX0NMQVNTXTogaXNJblBvcHBlciAmJiBhY3RpdmVUYWIgPT09ICdxdWVyeSdcbiAgICAgICAgICAgIH0pfSBcbiAgICAgICAgICAgIGNzcz17Y3NzYFxuICAgICAgICAgICAgICBmbGV4OiAxO1xuICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICAgICAgICBtaW4taGVpZ2h0OiAwO1xuICAgICAgICAgICAgICBwYWRkaW5nLXRvcDogMCAhaW1wb3J0YW50O1xuICAgICAgICAgICAgYH1cbiAgICAgICAgICA+XG4gICAgICAgICAgICB7LyogSGVhZGVyIHdpdGggYmFjayBidXR0b24gYW5kIHF1ZXJ5IGxhYmVsIC0gUXVlcnkgdGFiIG9ubHkgKi99XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17Y2xhc3NOYW1lcygncXVlcnktZm9ybV9faGVhZGVyIG14LTQgYWxpZ24taXRlbXMtY2VudGVyJywgeyAnaW4tcG9wcGVyJzogaXNJblBvcHBlciB9KX0gY3NzPXtjc3NgXG4gICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgIHBhZGRpbmc6IDZweCAwO1xuICAgICAgICAgICAgICBwYWRkaW5nLXRvcDogOHB4O1xuICAgICAgICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tc3lzLWNvbG9yLWRpdmlkZXItc2Vjb25kYXJ5KTtcbiAgICAgICAgICAgICAgZmxleC1zaHJpbms6IDA7XG4gICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ25hdi1hY3Rpb24gYWxpZ24taXRlbXMtY2VudGVyJywgeyAnZC1ub25lJzogd3JhcHBlZEluUG9wcGVyIH0pfSBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICBmbGV4OiAxIDEgMDtcbiAgICAgICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICAgICAgICBnYXA6IDRweDtcbiAgICAgICAgICAgICAgICAuamltdS1idG4ge1xuICAgICAgICAgICAgICAgICAgbWluLXdpZHRoOiAyNnB4O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdwLTAgbXItMicsIHsgJ2Qtbm9uZSc6IHRvdGFsID09PSAxIHx8ICFvbk5hdkJhY2sgfSl9XG4gICAgICAgICAgICAgICAgICBzaXplPSdzbSdcbiAgICAgICAgICAgICAgICAgIHR5cGU9J3RlcnRpYXJ5J1xuICAgICAgICAgICAgICAgICAgaWNvblxuICAgICAgICAgICAgICAgICAgb25DbGljaz17b25OYXZCYWNrfVxuICAgICAgICAgICAgICAgICAgYXJpYS1sYWJlbD17Z2V0STE4bk1lc3NhZ2UoJ2JhY2snKX1cbiAgICAgICAgICAgICAgICAgIHJlZj17YmFja0J0blJlZn1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICA8QXJyb3dMZWZ0T3V0bGluZWQgYXV0b0ZsaXAvPlxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgIDxRdWVyeVRhc2tMYWJlbCBpY29uPXtpY29ufSBuYW1lPXtkaXNwbGF5TGFiZWwgPyBuYW1lIDogJyd9IC8+XG4gICAgICAgICAgICAgICAgey8qIEhhc2ggcGFyYW1ldGVyIGluZm8gYnV0dG9uIC0gc2hvd3MgcXVlcmllcyBmcm9tIHNhbWUgbGF5ZXIgd2l0aCBzaG9ydElkcyAqL31cbiAgICAgICAgICAgICAgICB7KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgIGlmICghcXVlcnlJdGVtcyB8fCBxdWVyeUl0ZW1zLmxlbmd0aCA8PSAxKSByZXR1cm4gbnVsbFxuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAvLyBHZXQgY3VycmVudCBxdWVyeSdzIG9yaWdpbiBkYXRhIHNvdXJjZSBJRFxuICAgICAgICAgICAgICAgICAgY29uc3QgY3VycmVudE9yaWdpbkRTSWQgPSBxdWVyeUl0ZW0udXNlRGF0YVNvdXJjZT8uZGF0YVNvdXJjZUlkXG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIGlmICghY3VycmVudE9yaWdpbkRTSWQpIHJldHVybiBudWxsXG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIC8vIEZpbmQgYWxsIHF1ZXJpZXMgZnJvbSB0aGUgc2FtZSBvcmlnaW4gZGF0YSBzb3VyY2UgdGhhdCBoYXZlIHNob3J0SWRzXG4gICAgICAgICAgICAgICAgICBjb25zdCBzYW1lTGF5ZXJRdWVyaWVzID0gcXVlcnlJdGVtcy5maWx0ZXIoaXRlbSA9PiBcbiAgICAgICAgICAgICAgICAgICAgaXRlbS51c2VEYXRhU291cmNlPy5kYXRhU291cmNlSWQgPT09IGN1cnJlbnRPcmlnaW5EU0lkICYmIFxuICAgICAgICAgICAgICAgICAgICBpdGVtLnNob3J0SWQgJiYgXG4gICAgICAgICAgICAgICAgICAgIGl0ZW0uc2hvcnRJZC50cmltKCkgIT09ICcnXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIC8vIE9ubHkgc2hvdyBpbmZvIGJ1dHRvbiBpZiB0aGVyZSBhcmUgcXVlcmllcyB3aXRoIHNob3J0SWRzXG4gICAgICAgICAgICAgICAgICBpZiAoc2FtZUxheWVyUXVlcmllcy5sZW5ndGggPT09IDApIHJldHVybiBudWxsXG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIC8vIEJ1aWxkIHRvb2x0aXAgY29udGVudFxuICAgICAgICAgICAgICAgICAgY29uc3QgcXVlcnlMaW5lcyA9IHNhbWVMYXllclF1ZXJpZXMubWFwKGl0ZW0gPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBxdWVyeU5hbWUgPSBnZXRRdWVyeURpc3BsYXlOYW1lKGl0ZW0pXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBgJHtxdWVyeU5hbWV9OiAjJHtpdGVtLnNob3J0SWR9PXZhbHVlIG9yID8ke2l0ZW0uc2hvcnRJZH09dmFsdWVgXG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICBjb25zdCB0b29sdGlwVGl0bGUgPSBgVGhpcyBsYXllciBjYW4gYmUgc2VhcmNoZWQgdXNpbmcgdGhlIHNob3J0SWRzICR7c2FtZUxheWVyUXVlcmllcy5tYXAocSA9PiBxLnNob3J0SWQpLmpvaW4oJyBhbmQgJyl9IHVzaW5nICNzaG9ydElkPXZhbHVlIG9yID9zaG9ydElkPXZhbHVlIGluIHRoZSBVUkwuXFxuXFxuJHtxdWVyeUxpbmVzLmpvaW4oJ1xcbicpfWBcbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgPFRvb2x0aXAgXG4gICAgICAgICAgICAgICAgICAgICAgcGxhY2VtZW50PSdib3R0b20nIFxuICAgICAgICAgICAgICAgICAgICAgIGNzcz17Y3NzYHdoaXRlLXNwYWNlOiBwcmUtbGluZTtgfSBcbiAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17dG9vbHRpcFRpdGxlfVxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiBcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpemU9J3NtJyBcbiAgICAgICAgICAgICAgICAgICAgICAgIGljb24gXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlPSd0ZXJ0aWFyeScgXG4gICAgICAgICAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPSdIYXNoIHBhcmFtZXRlciBzZWFyY2ggaW5mb3JtYXRpb24nXG4gICAgICAgICAgICAgICAgICAgICAgICBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZmxleC1zaHJpbms6IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxJbmZvT3V0bGluZWQgY29sb3I9J3ZhcigtLXN5cy1jb2xvci1wcmltYXJ5LW1haW4pJyBzaXplPSdzJy8+XG4gICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICB9KSgpfVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAge2VmZmVjdGl2ZVJlc3VsdENvdW50ID4gMCAmJiAoXG4gICAgICAgICAgICAgICAgPFRvb2x0aXAgdGl0bGU9e2dldEkxOG5NZXNzYWdlKCdjbGVhclJlc3VsdCcpfSBwbGFjZW1lbnQ9J2JvdHRvbSc+XG4gICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIHJlZj17Y2xlYXJSZXN1bHRCdG5SZWZ9XG4gICAgICAgICAgICAgICAgICAgIHNpemU9J3NtJ1xuICAgICAgICAgICAgICAgICAgICB0eXBlPSd0ZXJ0aWFyeSdcbiAgICAgICAgICAgICAgICAgICAgYXJpYS1sYWJlbD17Z2V0STE4bk1lc3NhZ2UoJ2NsZWFyUmVzdWx0Jyl9XG4gICAgICAgICAgICAgICAgICAgIGljb25cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdtbC1hdXRvIHB5LTAnXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHsgY2xlYXJSZXN1bHQoJ3VzZXItdHJhc2gtY2xpY2snKSB9fVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8VHJhc2hPdXRsaW5lZCAvPlxuICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgPC9Ub29sdGlwPlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICB7LyogU2VhcmNoIExheWVyIC8gR3JvdXAgZHJvcGRvd25zIC0gc2hvdyBiYXNlZCBvbiBncm91cGluZyAqL31cbiAgICAgICAgICAgIHsoKCkgPT4ge1xuICAgICAgICAgICAgICAvLyBPbmx5IHNob3cgZHJvcGRvd25zIGlmIG11bHRpcGxlIHF1ZXJpZXMgZXhpc3RcbiAgICAgICAgICAgICAgaWYgKCFxdWVyeUl0ZW1zIHx8IHF1ZXJ5SXRlbXMubGVuZ3RoIDw9IDEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBCdWlsZCBmbGF0IGxpc3Qgb2YgYWxsIHF1ZXJpZXMgd2l0aCB0aGVpciBkaXNwbGF5IGluZm9cbiAgICAgICAgICAgICAgLy8gRm9yIGdyb3VwZWQgcXVlcmllcywgdXNlIGdyb3VwIGRpc3BsYXkgbmFtZSAob25seSBzaG93IG9uY2UgcGVyIGdyb3VwKVxuICAgICAgICAgICAgICBjb25zdCBxdWVyeU9wdGlvbnM6IEFycmF5PHtcbiAgICAgICAgICAgICAgICBjb25maWdJZDogc3RyaW5nXG4gICAgICAgICAgICAgICAgZGlzcGxheU5hbWU6IHN0cmluZ1xuICAgICAgICAgICAgICAgIGdyb3VwSWQ6IHN0cmluZyB8IG51bGxcbiAgICAgICAgICAgICAgICBpbmRleDogbnVtYmVyXG4gICAgICAgICAgICAgIH0+ID0gW11cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIFRyYWNrIHdoaWNoIGdyb3VwcyB3ZSd2ZSBhbHJlYWR5IGFkZGVkIHRvIGF2b2lkIGR1cGxpY2F0ZXNcbiAgICAgICAgICAgICAgY29uc3QgYWRkZWRHcm91cHMgPSBuZXcgU2V0PHN0cmluZz4oKVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgcXVlcnlJdGVtcy5mb3JFYWNoKChpdGVtLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS5ncm91cElkKSB7XG4gICAgICAgICAgICAgICAgICAvLyBGb3IgZ3JvdXBlZCBxdWVyaWVzLCB1c2UgZ3JvdXAgZGlzcGxheSBuYW1lIChvbmx5IGFkZCBvbmNlIHBlciBncm91cClcbiAgICAgICAgICAgICAgICAgIGlmICghYWRkZWRHcm91cHMuaGFzKGl0ZW0uZ3JvdXBJZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgYWRkZWRHcm91cHMuYWRkKGl0ZW0uZ3JvdXBJZClcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZ3JvdXBEaXNwbGF5TmFtZSA9IGdyb3Vwcz8uW2l0ZW0uZ3JvdXBJZF0/LmRpc3BsYXlOYW1lIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyb3Vwcz8uW2l0ZW0uZ3JvdXBJZF0/Lml0ZW1zWzBdPy5uYW1lIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0ubmFtZSB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgR3JvdXAgJHtpdGVtLmdyb3VwSWR9YFxuICAgICAgICAgICAgICAgICAgICBxdWVyeU9wdGlvbnMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgY29uZmlnSWQ6IGl0ZW0uY29uZmlnSWQsXG4gICAgICAgICAgICAgICAgICAgICAgZGlzcGxheU5hbWU6IGdyb3VwRGlzcGxheU5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgZ3JvdXBJZDogaXRlbS5ncm91cElkLFxuICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiBpZHhcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgLy8gVW5ncm91cGVkIHF1ZXJ5IC0gdXNlIGl0ZW0ubmFtZSBmb3IgZmlyc3QgZHJvcGRvd24gKG5vdCBzZWFyY2hBbGlhcy9qaW11RmllbGROYW1lKVxuICAgICAgICAgICAgICAgICAgcXVlcnlPcHRpb25zLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBjb25maWdJZDogaXRlbS5jb25maWdJZCxcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheU5hbWU6IGl0ZW0ubmFtZSB8fCBnZXRRdWVyeURpc3BsYXlOYW1lKGl0ZW0pLFxuICAgICAgICAgICAgICAgICAgICBncm91cElkOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBpbmRleDogaWR4XG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIERldGVybWluZSBjdXJyZW50bHkgc2VsZWN0ZWQgcXVlcnlcbiAgICAgICAgICAgICAgY29uc3QgY3VycmVudFF1ZXJ5SXRlbSA9IHF1ZXJ5SXRlbVxuICAgICAgICAgICAgICBjb25zdCBjdXJyZW50UXVlcnlHcm91cElkID0gY3VycmVudFF1ZXJ5SXRlbS5ncm91cElkIHx8IG51bGxcbiAgICAgICAgICAgICAgY29uc3QgaXNHcm91cGVkUXVlcnkgPSBjdXJyZW50UXVlcnlHcm91cElkICE9PSBudWxsXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBGaW5kIHRoZSBvcHRpb24gaW5kZXggZm9yIHRoZSBjdXJyZW50IHF1ZXJ5XG4gICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRPcHRpb25JbmRleCA9IHF1ZXJ5T3B0aW9ucy5maW5kSW5kZXgob3B0ID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoaXNHcm91cGVkUXVlcnkpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBvcHQuZ3JvdXBJZCA9PT0gY3VycmVudFF1ZXJ5R3JvdXBJZFxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gb3B0LmNvbmZpZ0lkID09PSBjdXJyZW50UXVlcnlJdGVtLmNvbmZpZ0lkXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgICAgICAgICBldmVudDogJ3JlbmRlcmluZy1kcm9wZG93bnMnLFxuICAgICAgICAgICAgICAgIHRvdGFsUXVlcmllczogcXVlcnlJdGVtcy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgcXVlcnlPcHRpb25zQ291bnQ6IHF1ZXJ5T3B0aW9ucy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgY3VycmVudFF1ZXJ5R3JvdXBJZCxcbiAgICAgICAgICAgICAgICBpc0dyb3VwZWRRdWVyeSxcbiAgICAgICAgICAgICAgICBjdXJyZW50T3B0aW9uSW5kZXgsXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRHcm91cElkLFxuICAgICAgICAgICAgICAgIHNlbGVjdGVkR3JvdXBRdWVyeUluZGV4LFxuICAgICAgICAgICAgICAgIGN1cnJlbnRRdWVyeUNvbmZpZ0lkOiBjdXJyZW50UXVlcnlJdGVtLmNvbmZpZ0lkXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxSZWFjdC5GcmFnbWVudD5cbiAgICAgICAgICAgICAgICAgIHsvKiBGaXJzdCBEcm9wZG93bjogQWxsIHF1ZXJpZXMgKi99XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiA0cHggMTZweDtcbiAgICAgICAgICAgICAgICAgICAgZmxleC1zaHJpbms6IDA7XG4gICAgICAgICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC44NzVyZW07XG4gICAgICAgICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogdmFyKC0tc3lzLWNvbG9yLXRleHQtcHJpbWFyeSk7XG4gICAgICAgICAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogNHB4O1xuICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICAgICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgICAgICAgICB7Z2V0STE4bk1lc3NhZ2UoJ3NlYXJjaExheWVyJyl9XG4gICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgIDxTZWxlY3QgXG4gICAgICAgICAgICAgICAgICAgICAgc2l6ZT1cInNtXCJcbiAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17Y3VycmVudE9wdGlvbkluZGV4ID49IDAgPyBjdXJyZW50T3B0aW9uSW5kZXggOiAwfVxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXthc3luYyAoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3B0aW9uSW5kZXggPSBwYXJzZUludChlLnRhcmdldC52YWx1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkT3B0aW9uID0gcXVlcnlPcHRpb25zW29wdGlvbkluZGV4XVxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudDogJ3F1ZXJ5LW9wdGlvbi1zZWxlY3RlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbkluZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZE9wdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaXNHcm91cGVkOiBzZWxlY3RlZE9wdGlvbi5ncm91cElkICE9PSBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBTVEFSVCBDTEVBUklORyBJTU1FRElBVEVMWSBJRiBTV0lUQ0hJTkdcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgY2xlYXJSZXN1bHQoJ2Ryb3Bkb3duLWxheWVyLXN3aXRjaC1uZXctbW9kZScpXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZE9wdGlvbi5ncm91cElkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEdyb3VwZWQgcXVlcnkgc2VsZWN0ZWQgLSBzZXQgZ3JvdXAgYW5kIGZpcnN0IHF1ZXJ5IGluIGdyb3VwXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvbkdyb3VwQ2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Hcm91cENoYW5nZShzZWxlY3RlZE9wdGlvbi5ncm91cElkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvbkdyb3VwUXVlcnlDaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkdyb3VwUXVlcnlDaGFuZ2UoMClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVW5ncm91cGVkIHF1ZXJ5IHNlbGVjdGVkIC0gY2xlYXIgZ3JvdXAgc2VsZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvbkdyb3VwQ2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Hcm91cENoYW5nZShudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvblVuZ3JvdXBlZENoYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpbmQgdGhlIHVuZ3JvdXBlZCBpbmRleFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHVuZ3JvdXBlZEluZGV4ID0gdW5ncm91cGVkPy5maW5kSW5kZXgoKHsgaXRlbSB9KSA9PiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uY29uZmlnSWQgPT09IHNlbGVjdGVkT3B0aW9uLmNvbmZpZ0lkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA/PyAtMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1bmdyb3VwZWRJbmRleCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblVuZ3JvdXBlZENoYW5nZSh1bmdyb3VwZWRJbmRleClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmFsbGJhY2s6IHVzZSB0aGUgaW5kZXggZnJvbSBxdWVyeUl0ZW1zXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudDogJ3VuZ3JvdXBlZC1mYWxsYmFjay10by1pbmRleCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkT3B0aW9uSW5kZXg6IHNlbGVjdGVkT3B0aW9uLmluZGV4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9uUXVlcnlDaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25RdWVyeUNoYW5nZShzZWxlY3RlZE9wdGlvbi5pbmRleClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAge3F1ZXJ5T3B0aW9ucy5tYXAoKG9wdGlvbiwgaWR4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudDogJ3JlbmRlcmluZy1xdWVyeS1vcHRpb24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogaWR4LFxuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maWdJZDogb3B0aW9uLmNvbmZpZ0lkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5TmFtZTogb3B0aW9uLmRpc3BsYXlOYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cElkOiBvcHRpb24uZ3JvdXBJZFxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24ga2V5PXtvcHRpb24uY29uZmlnSWR9IHZhbHVlPXtpZHh9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtvcHRpb24uZGlzcGxheU5hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvb3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICB7LyogU2Vjb25kIERyb3Bkb3duOiBRdWVyaWVzIHdpdGhpbiBzZWxlY3RlZCBncm91cCAob25seSBpZiBncm91cGVkIHF1ZXJ5IHNlbGVjdGVkKSAqL31cbiAgICAgICAgICAgICAgICAgIHtpc0dyb3VwZWRRdWVyeSAmJiBjdXJyZW50UXVlcnlHcm91cElkICYmIGdyb3VwcyAmJiBncm91cHNbY3VycmVudFF1ZXJ5R3JvdXBJZF0gJiYgKFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDRweCAxNnB4O1xuICAgICAgICAgICAgICAgICAgICAgIGZsZXgtc2hyaW5rOiAwO1xuICAgICAgICAgICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDAuODc1cmVtO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS1zeXMtY29sb3ItdGV4dC1wcmltYXJ5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDRweDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICAgICAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICAgICAgICAgICAgU2VhcmNoIEFsaWFzXG4gICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0IFxuICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZT1cInNtXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtzZWxlY3RlZEdyb3VwUXVlcnlJbmRleCAhPT0gdW5kZWZpbmVkID8gc2VsZWN0ZWRHcm91cFF1ZXJ5SW5kZXggOiAwfVxuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e2FzeW5jIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0luZGV4ID0gcGFyc2VJbnQoZS50YXJnZXQudmFsdWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdncm91cC1xdWVyeS1zZWxlY3RlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBJZDogY3VycmVudFF1ZXJ5R3JvdXBJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cFF1ZXJ5SW5kZXg6IG5ld0luZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBncm91cHNbY3VycmVudFF1ZXJ5R3JvdXBJZF0uaXRlbXNbbmV3SW5kZXhdPy5jb25maWdJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWVyeURpc3BsYXlOYW1lOiBnZXRRdWVyeURpc3BsYXlOYW1lKGdyb3Vwc1tjdXJyZW50UXVlcnlHcm91cElkXS5pdGVtc1tuZXdJbmRleF0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU1RBUlQgQ0xFQVJJTkcgSU1NRURJQVRFTFkgSUYgU1dJVENISU5HXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBjbGVhclJlc3VsdCgnZHJvcGRvd24tYWxpYXMtc3dpdGNoLW5ldy1tb2RlJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvbkdyb3VwUXVlcnlDaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkdyb3VwUXVlcnlDaGFuZ2UobmV3SW5kZXgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAge2dyb3Vwc1tjdXJyZW50UXVlcnlHcm91cElkXS5pdGVtcy5tYXAoKGl0ZW0sIGlkeCkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIGtleT17aXRlbS5jb25maWdJZH0gdmFsdWU9e2lkeH0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2dldFF1ZXJ5RGlzcGxheU5hbWUoaXRlbSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvb3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICA8L1JlYWN0LkZyYWdtZW50PlxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9KSgpfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB7LyogUmVzdWx0cyBNb2RlIEJ1dHRvbiBHcm91cCAtIEFsd2F5cyBzaG93LCByZWdhcmRsZXNzIG9mIHF1ZXJ5IGNvdW50ICovfVxuICAgICAgICAgICAgPGRpdiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogOHB4IDE2cHg7XG4gICAgICAgICAgICAgICAgICAgIGZsZXgtc2hyaW5rOiAwO1xuICAgICAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlclwiIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgICAgICAgIGdhcDogMC41cmVtO1xuICAgICAgICAgICAgICAgICAgICAgIGZsZXgtd3JhcDogbm93cmFwO1xuICAgICAgICAgICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgICAgICAgICB7LyogUmVzdWx0cyBsYWJlbCBhbmQgaW5mbyBidXR0b24gKi99XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0aXRsZTJcIiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC44NzVyZW07XG4gICAgICAgICAgICAgICAgICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHZhcigtLXN5cy1jb2xvci10ZXh0LXByaW1hcnkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZsZXgtc2hyaW5rOiAwO1xuICAgICAgICAgICAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICAgICAgICAgICAge2dldEkxOG5NZXNzYWdlKCdyZXN1bHRzJyl9OlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIDxUb29sdGlwIHBsYWNlbWVudD0nYm90dG9tJyBjc3M9e2Nzc2B3aGl0ZS1zcGFjZTogcHJlLWxpbmU7YH0gdGl0bGU9e2dldEkxOG5NZXNzYWdlKCdyZXN1bHRzTW9kZURlc2MnKX0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIHNpemU9J3NtJyBpY29uIHR5cGU9J3RlcnRpYXJ5JyBhcmlhLWxhYmVsPXtnZXRJMThuTWVzc2FnZSgncmVzdWx0c01vZGVEZXNjJyl9IGNzcz17Y3NzYGZsZXgtc2hyaW5rOiAwO2B9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5mb091dGxpbmVkIGNvbG9yPSd2YXIoLS1zeXMtY29sb3ItcHJpbWFyeS1tYWluKScgc2l6ZT0ncycvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgPC9Ub29sdGlwPlxuICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgIHsvKiBNb2RlIGJ1dHRvbnMgKi99XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvbGU9XCJyYWRpb2dyb3VwXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9e2dldEkxOG5NZXNzYWdlKCdyZXN1bHRzTW9kZScpfVxuICAgICAgICAgICAgICAgICAgICAgICAgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGdhcDogNHB4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogc3RyZXRjaDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbWluLXdpZHRoOiAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZT1cInNtXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhbnQ9e3Jlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvbiA/ICdjb250YWluZWQnIDogJ291dGxpbmVkJ31cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yPXtyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb24gPyAncHJpbWFyeScgOiAnZGVmYXVsdCd9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld01vZGUgPSBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudDogJ2J1dHRvbi1tb2RlLWNoYW5nZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWVyeUl0ZW1Db25maWdJZDogcXVlcnlJdGVtLmNvbmZpZ0lkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzTW9kZTogcmVzdWx0c01vZGUgfHwgU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3TW9kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob25SZXN1bHRzTW9kZUNoYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uUmVzdWx0c01vZGVDaGFuZ2UobmV3TW9kZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGFyaWEtcHJlc3NlZD17cmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9ufVxuICAgICAgICAgICAgICAgICAgICAgICAgYXJpYS1sYWJlbD17YCR7Z2V0STE4bk1lc3NhZ2UoJ2NyZWF0ZU5ld1Jlc3VsdHMnKX06ICR7Z2V0STE4bk1lc3NhZ2UoJ3Jlc3VsdHNNb2RlRGVzYycpLnNwbGl0KCdcXG4nKVsxXT8udHJpbSgpIHx8ICcnfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17Z2V0STE4bk1lc3NhZ2UoJ2NyZWF0ZU5ld1Jlc3VsdHMnKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgICAgICAgICAgICBmbGV4OiAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDAuNzVyZW07XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDRweCA4cHg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDI4cHg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICB7Z2V0STE4bk1lc3NhZ2UoJ3Jlc3VsdHNNb2RlTmV3Jyl9XG4gICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZT1cInNtXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhbnQ9e3Jlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uID8gJ2NvbnRhaW5lZCcgOiAnb3V0bGluZWQnfVxuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I9e3Jlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uID8gJ3ByaW1hcnknIDogJ2RlZmF1bHQnfVxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdNb2RlID0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwcmV2aW91c01vZGUgPSByZXN1bHRzTW9kZSB8fCBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdidXR0b24tbW9kZS1jaGFuZ2VkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c01vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3TW9kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgc3dpdGNoaW5nIEZST00gXCJOZXdcIiBUTyBcIkFkZCB0b1wiIG1vZGUgYW5kIHdlIGhhdmUgY3VycmVudCByZXN1bHRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBtZXJnZSB0aGVtIHdpdGggZXhpc3RpbmcgYWNjdW11bGF0ZWQgcmVjb3JkcyBiZWZvcmUgY2hhbmdpbmcgbW9kZVxuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZWNvcmRzVG9DYXB0dXJlID0gKGVmZmVjdGl2ZVJlY29yZHMgJiYgZWZmZWN0aXZlUmVjb3Jkcy5sZW5ndGggPiAwKSBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IChlZmZlY3RpdmVSZWNvcmRzIGFzIEZlYXR1cmVEYXRhUmVjb3JkW10pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAob3V0cHV0RFM/LmdldFNlbGVjdGVkUmVjb3JkcygpIGFzIEZlYXR1cmVEYXRhUmVjb3JkW10gfHwgW10pXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByZXZpb3VzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb24gJiYgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWNvcmRzVG9DYXB0dXJlLmxlbmd0aCA+IDAgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dERTICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nQWNjdW11bGF0ZWQgPSBhY2N1bXVsYXRlZFJlY29yZHMgfHwgW11cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBNZXJnZSBjdXJyZW50IHJlc3VsdHMgd2l0aCBleGlzdGluZyBhY2N1bXVsYXRlZCByZWNvcmRzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWVyZ2VkUmVjb3JkcyA9IG1lcmdlUmVzdWx0c0ludG9BY2N1bXVsYXRlZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dERTIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWNvcmRzVG9DYXB0dXJlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmdBY2N1bXVsYXRlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50OiAnY2FwdHVyaW5nLWN1cnJlbnQtcmVzdWx0cy1vbi1tb2RlLXN3aXRjaCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c01vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdNb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FwdHVyZWRSZWNvcmRzQ291bnQ6IHJlY29yZHNUb0NhcHR1cmUubGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmdBY2N1bXVsYXRlZENvdW50OiBleGlzdGluZ0FjY3VtdWxhdGVkLmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lcmdlZFJlY29yZHNDb3VudDogbWVyZ2VkUmVjb3Jkcy5sZW5ndGhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlKG1lcmdlZFJlY29yZHMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvblJlc3VsdHNNb2RlQ2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25SZXN1bHRzTW9kZUNoYW5nZShuZXdNb2RlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgYXJpYS1wcmVzc2VkPXtyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9e2Ake2dldEkxOG5NZXNzYWdlKCdhZGRUb0N1cnJlbnRSZXN1bHRzJyl9OiAke2dldEkxOG5NZXNzYWdlKCdyZXN1bHRzTW9kZURlc2MnKS5zcGxpdCgnXFxuJylbMl0/LnRyaW0oKSB8fCAnJ31gfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e2dldEkxOG5NZXNzYWdlKCdhZGRUb0N1cnJlbnRSZXN1bHRzJyl9XG4gICAgICAgICAgICAgICAgICAgICAgICBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjc1cmVtO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiA0cHggOHB4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICBtaW4taGVpZ2h0OiAyOHB4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAge2dldEkxOG5NZXNzYWdlKCdyZXN1bHRzTW9kZUFkZCcpfVxuICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgIHNpemU9XCJzbVwiXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXJpYW50PXtyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uID8gJ2NvbnRhaW5lZCcgOiAnb3V0bGluZWQnfVxuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I9e3Jlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb24gPyAncHJpbWFyeScgOiAnZGVmYXVsdCd9XG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17IWFjY3VtdWxhdGVkUmVjb3JkcyB8fCBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID09PSAwfVxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdNb2RlID0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHByZXZpb3VzTW9kZSA9IHJlc3VsdHNNb2RlIHx8IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudDogJ2J1dHRvbi1tb2RlLWNoYW5nZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWVyeUl0ZW1Db25maWdJZDogcXVlcnlJdGVtLmNvbmZpZ0lkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzTW9kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdNb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiBhY2N1bXVsYXRlZFJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiBzd2l0Y2hpbmcgRlJPTSBcIk5ld1wiIFRPIFwiUmVtb3ZlIGZyb21cIiBtb2RlIGFuZCB3ZSBoYXZlIGN1cnJlbnQgcmVzdWx0cyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbWVyZ2UgdGhlbSB3aXRoIGV4aXN0aW5nIGFjY3VtdWxhdGVkIHJlY29yZHMgYmVmb3JlIGNoYW5naW5nIG1vZGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gKHNhbWUgcGF0dGVybiBhcyBcIkFkZCB0b1wiIG1vZGUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlY29yZHNUb0NhcHR1cmVGb3JSZW1vdmUgPSAoZWZmZWN0aXZlUmVjb3JkcyAmJiBlZmZlY3RpdmVSZWNvcmRzLmxlbmd0aCA+IDApIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gKGVmZmVjdGl2ZVJlY29yZHMgYXMgRmVhdHVyZURhdGFSZWNvcmRbXSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IChvdXRwdXREUz8uZ2V0U2VsZWN0ZWRSZWNvcmRzKCkgYXMgRmVhdHVyZURhdGFSZWNvcmRbXSB8fCBbXSlcblxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJldmlvdXNNb2RlID09PSBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvbiAmJiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvbiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjb3Jkc1RvQ2FwdHVyZUZvclJlbW92ZS5sZW5ndGggPiAwICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXREUyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBleGlzdGluZ0FjY3VtdWxhdGVkID0gYWNjdW11bGF0ZWRSZWNvcmRzIHx8IFtdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWVyZ2UgY3VycmVudCByZXN1bHRzIHdpdGggZXhpc3RpbmcgYWNjdW11bGF0ZWQgcmVjb3Jkc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lcmdlZFJlY29yZHMgPSBtZXJnZVJlc3VsdHNJbnRvQWNjdW11bGF0ZWQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXREUyBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjb3Jkc1RvQ2FwdHVyZUZvclJlbW92ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nQWNjdW11bGF0ZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudDogJ2NhcHR1cmluZy1jdXJyZW50LXJlc3VsdHMtb24tbW9kZS1zd2l0Y2gtdG8tcmVtb3ZlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzTW9kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld01vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXB0dXJlZFJlY29yZHNDb3VudDogcmVjb3Jkc1RvQ2FwdHVyZUZvclJlbW92ZS5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGlzdGluZ0FjY3VtdWxhdGVkQ291bnQ6IGV4aXN0aW5nQWNjdW11bGF0ZWQubGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVyZ2VkUmVjb3Jkc0NvdW50OiBtZXJnZWRSZWNvcmRzLmxlbmd0aFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UobWVyZ2VkUmVjb3JkcylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9uUmVzdWx0c01vZGVDaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblJlc3VsdHNNb2RlQ2hhbmdlKG5ld01vZGUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmlhLXByZXNzZWQ9e3Jlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb259XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPXtgJHtnZXRJMThuTWVzc2FnZSgncmVtb3ZlRnJvbUN1cnJlbnRSZXN1bHRzJyl9OiAke2dldEkxOG5NZXNzYWdlKCdyZXN1bHRzTW9kZURlc2MnKS5zcGxpdCgnXFxuJylbM10/LnRyaW0oKSB8fCAnJ31gfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9eyghYWNjdW11bGF0ZWRSZWNvcmRzIHx8IGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPT09IDApIFxuICAgICAgICAgICAgICAgICAgICAgICAgICA/IGdldEkxOG5NZXNzYWdlKCdyZXN1bHRzTW9kZURpc2FibGVkUmVtb3ZlJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgOiBnZXRJMThuTWVzc2FnZSgncmVtb3ZlRnJvbUN1cnJlbnRSZXN1bHRzJyl9XG4gICAgICAgICAgICAgICAgICAgICAgICBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjc1cmVtO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiA0cHggOHB4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICBtaW4taGVpZ2h0OiAyOHB4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAge2dldEkxOG5NZXNzYWdlKCdyZXN1bHRzTW9kZVJlbW92ZScpfVxuICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBcbiAgICAgICAgICAgICAgICAgICAgICBpZD17YHJlc3VsdHMtbW9kZS1kZXNjcmlwdGlvbi0ke3Byb3BzLndpZGdldElkfWB9XG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwic3Itb25seVwiXG4gICAgICAgICAgICAgICAgICAgICAgYXJpYS1saXZlPVwicG9saXRlXCJcbiAgICAgICAgICAgICAgICAgICAgICByb2xlPVwic3RhdHVzXCJcbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgIHtyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb24gXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGdldEkxOG5NZXNzYWdlKCdjcmVhdGVOZXdSZXN1bHRzJylcbiAgICAgICAgICAgICAgICAgICAgICAgIDogcmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgICAgID8gZ2V0STE4bk1lc3NhZ2UoJ2FkZFRvQ3VycmVudFJlc3VsdHMnKVxuICAgICAgICAgICAgICAgICAgICAgICAgOiBnZXRJMThuTWVzc2FnZSgncmVtb3ZlRnJvbUN1cnJlbnRSZXN1bHRzJylcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNzcz17Y3NzYFxuICAgICAgICAgICAgICBmbGV4OiAxO1xuICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICAgICAgICBtaW4taGVpZ2h0OiAwO1xuICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgIHtlbmFibGVkICYmIGRzRXhpc3RzICYmIChcbiAgICAgICAgICAgICAgICA8ZGl2IGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAgICAgICAgbWluLWhlaWdodDogMDtcbiAgICAgICAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAgICA8UXVlcnlUYXNrRm9ybVxuICAgICAgICAgICAgICAgICAgICBrZXk9e3F1ZXJ5SXRlbS5jb25maWdJZH1cbiAgICAgICAgICAgICAgICAgICAgey4uLm90aGVyUHJvcHN9XG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ0lkPXtxdWVyeUl0ZW0uY29uZmlnSWR9XG4gICAgICAgICAgICAgICAgICAgIG91dHB1dERTPXtvdXRwdXREU31cbiAgICAgICAgICAgICAgICAgICAgZGF0YXNvdXJjZVJlYWR5PXtkYXRhU291cmNlICE9IG51bGx9XG4gICAgICAgICAgICAgICAgICAgIHNwYXRpYWxGaWx0ZXJFbmFibGVkPXtzcGF0aWFsRmlsdGVyRW5hYmxlZH1cbiAgICAgICAgICAgICAgICAgICAgZGF0YUFjdGlvbkZpbHRlciA9IHtkYXRhQWN0aW9uRmlsdGVyfVxuICAgICAgICAgICAgICAgICAgICBvbkZvcm1TdWJtaXQ9e2hhbmRsZUZvcm1TdWJtaXR9XG4gICAgICAgICAgICAgICAgICAgIGluaXRpYWxJbnB1dFZhbHVlPXtpbml0aWFsSW5wdXRWYWx1ZX1cbiAgICAgICAgICAgICAgICAgICAgb25IYXNoUGFyYW1ldGVyVXNlZD17b25IYXNoUGFyYW1ldGVyVXNlZH1cbiAgICAgICAgICAgICAgICAgICAgcXVlcnlJdGVtU2hvcnRJZD17cXVlcnlJdGVtLnNob3J0SWR9XG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICA8RGF0YVNvdXJjZVRpcFxuICAgICAgICAgICAgICAgIHdpZGdldElkPXtwcm9wcy53aWRnZXRJZH1cbiAgICAgICAgICAgICAgICB1c2VEYXRhU291cmNlPXtxdWVyeUl0ZW0udXNlRGF0YVNvdXJjZX1cbiAgICAgICAgICAgICAgICBzaG93TWVzc2FnZT17dHJ1ZX1cbiAgICAgICAgICAgICAgICBvblN0YXR1c0NoYW5nZT17aGFuZGxlU3RhdHVzQ2hhbmdlfVxuICAgICAgICAgICAgICAgIG9uRGF0YVNvdXJjZUNyZWF0ZWQ9e2hhbmRsZURhdGFTb3VyY2VDcmVhdGVkfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvVGFiPlxuICAgICAgICA8VGFiXG4gICAgICAgICAgaWQ9J3Jlc3VsdHMnXG4gICAgICAgICAgdGl0bGU9e1xuICAgICAgICAgICAgPHNwYW4+XG4gICAgICAgICAgICAgIHtnZXRJMThuTWVzc2FnZSgncmVzdWx0c1RhYicpfVxuICAgICAgICAgICAgICB7ZWZmZWN0aXZlUmVzdWx0Q291bnQgPiAwICYmIChcbiAgICAgICAgICAgICAgICA8c3BhbiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiA2cHg7XG4gICAgICAgICAgICAgICAgICBmb250LXNpemU6IDAuNzVyZW07XG4gICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjc7XG4gICAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAgICAoe2VmZmVjdGl2ZVJlc3VsdENvdW50fSlcbiAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgfVxuICAgICAgICAgIGRpc2FibGVkPXtlZmZlY3RpdmVSZXN1bHRDb3VudCA9PT0gMH1cbiAgICAgICAgPlxuICAgICAgICAgIHtlZmZlY3RpdmVSZXN1bHRDb3VudCA+IDAgJiYgKFxuICAgICAgICAgICAgPGRpdiBcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdxdWVyeS10YXNrX19jb250ZW50Jywge1xuICAgICAgICAgICAgICAgIFtGT0NVU0FCTEVfQ09OVEFJTkVSX0NMQVNTXTogaXNJblBvcHBlciAmJiBhY3RpdmVUYWIgPT09ICdyZXN1bHRzJ1xuICAgICAgICAgICAgICB9KX0gXG4gICAgICAgICAgICAgIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDA7XG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICAgICAgICAgIHBhZGRpbmctdG9wOiAwICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgIG9uQ2xpY2s9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gUHJldmVudCBjbGlja3MgZnJvbSBidWJibGluZyB1cCB3aGVuIFJlc3VsdHMgdGFiIGlzIGFjdGl2ZVxuICAgICAgICAgICAgICAgIGlmIChhY3RpdmVUYWIgPT09ICdyZXN1bHRzJykge1xuICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPFF1ZXJ5VGFza1Jlc3VsdFxuICAgICAgICAgICAgICAgIGtleT17YCR7cXVlcnlJdGVtLmNvbmZpZ0lkfS0ke3F1ZXJ5RXhlY3V0aW9uS2V5UmVmLmN1cnJlbnR9YH1cbiAgICAgICAgICAgICAgICB3aWRnZXRJZD17cHJvcHMud2lkZ2V0SWR9XG4gICAgICAgICAgICAgICAgcXVlcnlJdGVtPXtxdWVyeUl0ZW19XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbXM9e3F1ZXJ5UGFyYW1SZWYuY3VycmVudH1cbiAgICAgICAgICAgICAgICByZXN1bHRDb3VudD17ZWZmZWN0aXZlUmVzdWx0Q291bnR9XG4gICAgICAgICAgICAgICAgbWF4UGVyUGFnZT17KGRhdGFTb3VyY2UgYXMgUXVlcmlhYmxlRGF0YVNvdXJjZSk/LmdldE1heFJlY29yZENvdW50Py4oKX1cbiAgICAgICAgICAgICAgICByZWNvcmRzPXtlZmZlY3RpdmVSZWNvcmRzfVxuICAgICAgICAgICAgICAgIG91dHB1dERTPXtvdXRwdXREU31cbiAgICAgICAgICAgICAgICBydW50aW1lWm9vbVRvU2VsZWN0ZWQ9e2xhc3RSdW50aW1lWm9vbVRvU2VsZWN0ZWRSZWYuY3VycmVudH1cbiAgICAgICAgICAgICAgICByZXN1bHRzTW9kZT17cmVzdWx0c01vZGV9XG4gICAgICAgICAgICAgICAgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodD17dXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodH1cbiAgICAgICAgICAgICAgICBncmFwaGljc0xheWVyPXtncmFwaGljc0xheWVyfVxuICAgICAgICAgICAgICAgIG1hcFZpZXc9e21hcFZpZXd9XG4gICAgICAgICAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzPXthY2N1bXVsYXRlZFJlY29yZHN9XG4gICAgICAgICAgICAgICAgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2U9e29uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlfVxuICAgICAgICAgICAgICAgIG9uTmF2QmFjaz17YXN5bmMgKGNsZWFyUmVzdWx0cyA9IGZhbHNlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAvLyBIYW5kbGUgbmF2aWdhdGlvbiBmcm9tIFF1ZXJ5VGFza1Jlc3VsdFxuICAgICAgICAgICAgICAgICAgLy8gSWYgY2xlYXJSZXN1bHRzIGlzIHRydWUsIGNsZWFyIGV2ZXJ5dGhpbmcgYW5kIGdvIHRvIHF1ZXJ5IHRhYlxuICAgICAgICAgICAgICAgICAgLy8gSWYgZmFsc2UsIGp1c3Qgc3dpdGNoIHRvIHF1ZXJ5IHRhYiB3aXRob3V0IGNsZWFyaW5nXG4gICAgICAgICAgICAgICAgICBpZiAoY2xlYXJSZXN1bHRzKSB7XG4gICAgICAgICAgICAgICAgICAgIGhhc1NlbGVjdGVkUmVjb3Jkc1JlZi5jdXJyZW50ID0gZmFsc2UgLy8gUmVzZXQgZmxhZyB3aGVuIGNsZWFyaW5nXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IG5hdlRvRm9ybSh0cnVlKVxuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSnVzdCBzd2l0Y2ggdGFicywgZG9uJ3QgY2xlYXIgcmVzdWx0c1xuICAgICAgICAgICAgICAgICAgICAvLyBNYXJrIGFzIG1hbnVhbCBzd2l0Y2ggdG8gcHJldmVudCBhdXRvLXN3aXRjaCB1c2VFZmZlY3QgZnJvbSBpbnRlcmZlcmluZ1xuICAgICAgICAgICAgICAgICAgICBtYW51YWxUYWJTd2l0Y2hSZWYuY3VycmVudCA9IHRydWVcbiAgICAgICAgICAgICAgICAgICAgc2V0QWN0aXZlVGFiKCdxdWVyeScpXG4gICAgICAgICAgICAgICAgICAgIC8vIFJlc2V0IHRoZSBmbGFnIGFmdGVyIGEgc2hvcnQgZGVsYXlcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgbWFudWFsVGFiU3dpdGNoUmVmLmN1cnJlbnQgPSBmYWxzZVxuICAgICAgICAgICAgICAgICAgICB9LCAxMDApXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICl9XG4gICAgICAgIDwvVGFiPlxuICAgICAgPC9UYWJzPlxuXG4gICAgICB7LyogRXJyb3IgTWVzc2FnZXMgKi99XG4gICAgICB7KHNlbGVjdGlvbkVycm9yIHx8IHpvb21FcnJvcikgJiYgKFxuICAgICAgICA8ZGl2IGNzcz17Y3NzYFxuICAgICAgICAgIHBhZGRpbmc6IDAgMTZweDtcbiAgICAgICAgICBtYXJnaW4tdG9wOiA4cHg7XG4gICAgICAgIGB9PlxuICAgICAgICAgIHtzZWxlY3Rpb25FcnJvciAmJiAoXG4gICAgICAgICAgICA8RXJyb3JNZXNzYWdlIFxuICAgICAgICAgICAgICBlcnJvcj17c2VsZWN0aW9uRXJyb3J9IFxuICAgICAgICAgICAgICBvbkRpc21pc3M9eygpID0+IHNldFNlbGVjdGlvbkVycm9yKG51bGwpfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICApfVxuICAgICAgICAgIHt6b29tRXJyb3IgJiYgKFxuICAgICAgICAgICAgPEVycm9yTWVzc2FnZSBcbiAgICAgICAgICAgICAgZXJyb3I9e3pvb21FcnJvcn0gXG4gICAgICAgICAgICAgIG9uRGlzbWlzcz17KCkgPT4gc2V0Wm9vbUVycm9yKG51bGwpfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG5cbiAgICAgIHsvKiBMb2FkaW5nIEluZGljYXRvciAtIG92ZXJsYXlzIG9uIHRvcCBvZiB0YWJzICovfVxuICAgICAge3N0YWdlID09PSAyICYmIChcbiAgICAgICAgPGRpdiBjc3M9e2Nzc2BcbiAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgdG9wOiAwO1xuICAgICAgICAgIGxlZnQ6IDA7XG4gICAgICAgICAgcmlnaHQ6IDA7XG4gICAgICAgICAgYm90dG9tOiAwO1xuICAgICAgICAgIHotaW5kZXg6IDEwMDA7XG4gICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjgpO1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgYH0+XG4gICAgICAgICAgPExvYWRpbmdSZXN1bHQgLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICApfVxuICAgIDwvZGl2PlxuICApXG59XG4iLCJpbXBvcnQge1xuICB0eXBlIEZlYXR1cmVMYXllckRhdGFTb3VyY2UsXG4gIHR5cGUgSW1tdXRhYmxlT2JqZWN0LFxuICB0eXBlIElNU3FsRXhwcmVzc2lvbixcbiAgdHlwZSBGZWF0dXJlTGF5ZXJRdWVyeVBhcmFtcyxcbiAgTWVzc2FnZU1hbmFnZXIsXG4gIHR5cGUgUXVlcnlQYXJhbXMsXG4gIHR5cGUgRGF0YVJlY29yZCxcbiAgRGF0YVJlY29yZFNldENoYW5nZU1lc3NhZ2UsXG4gIFJlY29yZFNldENoYW5nZVR5cGUsXG4gIHR5cGUgSW1tdXRhYmxlQXJyYXksXG4gIGRhdGFTb3VyY2VVdGlsc1xufSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgdHlwZSB7IElGaWVsZEluZm8gfSBmcm9tICdAZXNyaS9hcmNnaXMtcmVzdC1mZWF0dXJlLXNlcnZpY2UnXG5pbXBvcnQgeyB0eXBlIFF1ZXJ5SXRlbVR5cGUsIFNwYXRpYWxSZWxhdGlvbiwgdHlwZSBTcGF0aWFsRmlsdGVyT2JqLCBGaWVsZHNUeXBlLCBtYXBKU0FQSVVuaXRUb0RzVW5pdCwgbWFwSlNBUElTcGF0aWFsUmVsVG9Ec1NwYXRpYWxSZWwgfSBmcm9tICcuLi9jb25maWcnXG5pbXBvcnQgeyBnZXRGaWVsZEluZm9zSW5Qb3B1cENvbnRlbnQsIGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIgfSBmcm9tICcuLi8uLi8uLi9zaGFyZWQtY29kZS9jb21tb24nXG5cbmNvbnN0IGRlYnVnTG9nZ2VyID0gY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlcigpXG5cbmV4cG9ydCBmdW5jdGlvbiBjb21iaW5lRmllbGRzIChyZXN1bHREaXNwbGF5RmllbGRzOiBJbW11dGFibGVBcnJheTxzdHJpbmc+LCByZXN1bHRUaXRsZUV4cHJlc3Npb246IHN0cmluZywgaWRGaWVsZD86IHN0cmluZyk6IHN0cmluZ1tdIHtcbiAgY29uc3QgZmllbGRzID0gbmV3IFNldDxzdHJpbmc+KClcbiAgcmVzdWx0RGlzcGxheUZpZWxkcz8uZm9yRWFjaChpdGVtID0+IGZpZWxkcy5hZGQoaXRlbSkpXG4gIGlmIChyZXN1bHRUaXRsZUV4cHJlc3Npb24pIHtcbiAgICBjb25zdCB0ZW1wbGF0ZXMgPSByZXN1bHRUaXRsZUV4cHJlc3Npb24ubWF0Y2goL1xce1xcdypcXH0vZylcbiAgICBpZiAodGVtcGxhdGVzPy5sZW5ndGggPiAwKSB7XG4gICAgICB0ZW1wbGF0ZXMuZm9yRWFjaChpdGVtID0+IGZpZWxkcy5hZGQoaXRlbS5zdWJzdHJpbmcoMSwgaXRlbS5sZW5ndGggLSAxKSkpXG4gICAgfVxuICB9XG4gIGlmIChpZEZpZWxkKSB7XG4gICAgZmllbGRzLmFkZChpZEZpZWxkKVxuICB9XG4gIHJldHVybiBBcnJheS5mcm9tKGZpZWxkcylcbn1cblxuLyoqXG4gKiBWYWxpZGF0ZXMgdXNlciBpbnB1dCBiZWZvcmUgcXVlcnkgZXhlY3V0aW9uLlxuICogQHBhcmFtIGlucHV0IC0gVGhlIHJhdyB1c2VyIGlucHV0IChzdHJpbmcsIG51bWJlciwgZXRjLilcbiAqIEBwYXJhbSBpc0xpc3QgLSBPcHRpb25hbCBmbGFnIGluZGljYXRpbmcgaWYgdGhlIGlucHV0IGlzIGZyb20gYSBsaXN0L3NlbGVjdG9yIChsZW5pZW50IHZhbGlkYXRpb24pXG4gKiBAcmV0dXJucyBib29sZWFuIC0gdHJ1ZSBpZiBpbnB1dCBpcyB2YWxpZCwgZmFsc2Ugb3RoZXJ3aXNlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1F1ZXJ5SW5wdXRWYWxpZCAoaW5wdXQ6IGFueSwgaXNMaXN0OiBib29sZWFuID0gZmFsc2UpOiBib29sZWFuIHtcbiAgLy8gSWYgaXQncyBhIGxpc3QtYmFzZWQgc2VsZWN0aW9uIChVbmlxdWUgVmFsdWVzLCBGaWVsZCBWYWx1ZXMpLCBcbiAgLy8gd2UgYWxsb3cgZW1wdHkvbnVsbCBhcyBpdCBtaWdodCByZXByZXNlbnQgXCJubyBmaWx0ZXJcIiBvciB0aGUgdXNlciBcbiAgLy8gaW50ZW5kcyB0byBpbnRlcmFjdCB3aXRoIHRoZSBsaXN0LlxuICBpZiAoaXNMaXN0KSB7XG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIGlmIChpbnB1dCA9PT0gbnVsbCB8fCBpbnB1dCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cbiAgXG4gIC8vIElmIGl0J3MgYSBzdHJpbmcsIGVuc3VyZSBpdCdzIG5vdCBlbXB0eSBvciBqdXN0IHdoaXRlc3BhY2VcbiAgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gaW5wdXQudHJpbSgpICE9PSAnJ1xuICB9XG5cbiAgLy8gSWYgaXQncyBhbiBhcnJheSAob2Z0ZW4gdXNlZCBpbiB1bmlxdWUgdmFsdWVzIG9yIG11bHRpcGxlIHNlbGVjdGlvbilcbiAgaWYgKEFycmF5LmlzQXJyYXkoaW5wdXQpKSB7XG4gICAgaWYgKGlucHV0Lmxlbmd0aCA9PT0gMCkgcmV0dXJuIGZhbHNlXG4gICAgLy8gQ2hlY2sgaWYgdGhlIGZpcnN0IGl0ZW0gaXMgdmFsaWQgKHVzdWFsbHkge3ZhbHVlOiAnLi4uJywgbGFiZWw6ICcuLi4nfSlcbiAgICBjb25zdCBmaXJzdEl0ZW0gPSBpbnB1dFswXVxuICAgIGlmIChmaXJzdEl0ZW0gJiYgdHlwZW9mIGZpcnN0SXRlbSA9PT0gJ29iamVjdCcgJiYgJ3ZhbHVlJyBpbiBmaXJzdEl0ZW0pIHtcbiAgICAgIHJldHVybiBpc1F1ZXJ5SW5wdXRWYWxpZChmaXJzdEl0ZW0udmFsdWUpXG4gICAgfVxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICAvLyBJZiBpdCdzIGEgamltdS1jb3JlIEltbXV0YWJsZSBhcnJheVxuICBpZiAoaW5wdXQuYXNNdXRhYmxlICYmIHR5cGVvZiBpbnB1dC50b0FycmF5ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgY29uc3QgYXJyID0gaW5wdXQudG9BcnJheSgpXG4gICAgaWYgKGFyci5sZW5ndGggPT09IDApIHJldHVybiBmYWxzZVxuICAgIGNvbnN0IGZpcnN0SXRlbSA9IGFyclswXVxuICAgIGlmIChmaXJzdEl0ZW0gJiYgdHlwZW9mIGZpcnN0SXRlbSA9PT0gJ29iamVjdCcgJiYgJ3ZhbHVlJyBpbiBmaXJzdEl0ZW0pIHtcbiAgICAgIHJldHVybiBpc1F1ZXJ5SW5wdXRWYWxpZChmaXJzdEl0ZW0udmFsdWUpXG4gICAgfVxuICAgIHJldHVybiB0cnVlXG4gIH1cbiAgXG4gIC8vIEZvciBvdGhlciB0eXBlcyAobnVtYmVycywgZGF0ZXMpLCBpZiBpdCBleGlzdHMsIHdlIGNvdW50IGl0IGFzIHZhbGlkXG4gIHJldHVybiB0cnVlXG59XG5cbi8qKlxuICogU2FuaXRpemVzIHVzZXIgaW5wdXQgZm9yIHF1ZXJ5IHRhc2tzLlxuICogMS4gU3RyaXBzIGxlYWRpbmcgYW5kIHRyYWlsaW5nIHdoaXRlc3BhY2UuXG4gKiAyLiBQcmV2ZW50cyBiYXNpYyBTUUwgaW5qZWN0aW9uIGJ5IGVzY2FwaW5nIHNpbmdsZSBxdW90ZXMuXG4gKiAzLiBIYW5kbGVzIGVtcHR5IG9yIHdoaXRlc3BhY2Utb25seSBzdHJpbmdzLlxuICogXG4gKiBAcGFyYW0gaW5wdXQgLSBUaGUgcmF3IHVzZXIgaW5wdXQgc3RyaW5nXG4gKiBAcmV0dXJucyBTYW5pdGl6ZWQgc3RyaW5nIG9yIG51bGwgaWYgaW5wdXQgaXMgZW1wdHlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNhbml0aXplUXVlcnlJbnB1dCAoaW5wdXQ6IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQpOiBzdHJpbmcgfCBudWxsIHtcbiAgaWYgKCFpbnB1dCB8fCB0eXBlb2YgaW5wdXQgIT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuICBcbiAgY29uc3QgdHJpbW1lZCA9IGlucHV0LnRyaW0oKVxuICBpZiAodHJpbW1lZCA9PT0gJycpIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG4gIFxuICAvLyBCYXNpYyBTUUwgZXNjYXBpbmc6IHJlcGxhY2Ugc2luZ2xlIHF1b3RlcyB3aXRoIGRvdWJsZSBzaW5nbGUgcXVvdGVzXG4gIHJldHVybiB0cmltbWVkLnJlcGxhY2UoLycvZywgXCInJ1wiKVxufVxuXG4vKipcbiAqIFNhbml0aXplcyBhbGwgdmFsdWVzIHdpdGhpbiBhbiBJTVNxbEV4cHJlc3Npb24gb2JqZWN0LlxuICogXG4gKiBAcGFyYW0gc3FsRXhwciAtIFRoZSByYXcgU1FMIGV4cHJlc3Npb24gb2JqZWN0XG4gKiBAcmV0dXJucyBBIG5ldyBzYW5pdGl6ZWQgSU1TcWxFeHByZXNzaW9uIG9iamVjdFxuICovXG5leHBvcnQgZnVuY3Rpb24gc2FuaXRpemVTcWxFeHByZXNzaW9uIChzcWxFeHByOiBJTVNxbEV4cHJlc3Npb24pOiBJTVNxbEV4cHJlc3Npb24ge1xuICBpZiAoIXNxbEV4cHIgfHwgIXNxbEV4cHIucGFydHMpIHtcbiAgICByZXR1cm4gc3FsRXhwclxuICB9XG5cbiAgbGV0IHNhbml0aXplZEV4cHIgPSBzcWxFeHByXG4gIHNxbEV4cHIucGFydHMuZm9yRWFjaCgocGFydCwgaW5kZXgpID0+IHtcbiAgICBpZiAocGFydC50eXBlID09PSAnU0lOR0xFJyAmJiBwYXJ0LnZhbHVlT3B0aW9ucz8udmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgY29uc3QgcmF3VmFsdWUgPSBwYXJ0LnZhbHVlT3B0aW9ucy52YWx1ZVxuICAgICAgXG4gICAgICAvLyBDQVNFIDE6IFNpbXBsZSBTdHJpbmdcbiAgICAgIGlmICh0eXBlb2YgcmF3VmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGNvbnN0IHNhbml0aXplZFZhbHVlID0gc2FuaXRpemVRdWVyeUlucHV0KHJhd1ZhbHVlKVxuICAgICAgICBpZiAoc2FuaXRpemVkVmFsdWUgIT09IHJhd1ZhbHVlKSB7XG4gICAgICAgICAgc2FuaXRpemVkRXhwciA9IHNhbml0aXplZEV4cHIuc2V0SW4oWydwYXJ0cycsIGluZGV4LCAndmFsdWVPcHRpb25zJywgJ3ZhbHVlJ10sIHNhbml0aXplZFZhbHVlKVxuICAgICAgICB9XG4gICAgICB9IFxuICAgICAgLy8gQ0FTRSAyOiBBcnJheSBvZiBvYmplY3RzIChVbmlxdWUgVmFsdWVzIC8gRHJvcGRvd25zKVxuICAgICAgLy8gV2UgbXVzdCBwcmVzZXJ2ZSB0aGUgSW1tdXRhYmxlIHN0cnVjdHVyZSB0byBhdm9pZCBcImFzTXV0YWJsZVwiIGVycm9yc1xuICAgICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheShyYXdWYWx1ZSkgfHwgKHJhd1ZhbHVlICYmIHR5cGVvZiAocmF3VmFsdWUgYXMgYW55KS50b0FycmF5ID09PSAnZnVuY3Rpb24nKSkge1xuICAgICAgICBjb25zdCBpc0ltbXV0YWJsZSA9IHR5cGVvZiAocmF3VmFsdWUgYXMgYW55KS50b0FycmF5ID09PSAnZnVuY3Rpb24nXG4gICAgICAgIGNvbnN0IGFyciA9IGlzSW1tdXRhYmxlID8gKHJhd1ZhbHVlIGFzIGFueSkudG9BcnJheSgpIDogKHJhd1ZhbHVlIGFzIGFueVtdKVxuICAgICAgICBcbiAgICAgICAgbGV0IGNoYW5nZWQgPSBmYWxzZVxuICAgICAgICBjb25zdCBzYW5pdGl6ZWRBcnIgPSBhcnIubWFwKGl0ZW0gPT4ge1xuICAgICAgICAgIGlmIChpdGVtICYmIHR5cGVvZiBpdGVtID09PSAnb2JqZWN0JyAmJiAndmFsdWUnIGluIGl0ZW0gJiYgdHlwZW9mIGl0ZW0udmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBjb25zdCBzYW5pdGl6ZWRWYWwgPSBzYW5pdGl6ZVF1ZXJ5SW5wdXQoaXRlbS52YWx1ZSlcbiAgICAgICAgICAgIGlmIChzYW5pdGl6ZWRWYWwgIT09IGl0ZW0udmFsdWUpIHtcbiAgICAgICAgICAgICAgY2hhbmdlZCA9IHRydWVcbiAgICAgICAgICAgICAgcmV0dXJuIHsgLi4uaXRlbSwgdmFsdWU6IHNhbml0aXplZFZhbCB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBpdGVtXG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgICAgICBpZiAoY2hhbmdlZCkge1xuICAgICAgICAgIC8vIElmIGl0IHdhcyBJbW11dGFibGUsIHdlIHNob3VsZCBpZGVhbGx5IHVzZSBJbW11dGFibGUgbWV0aG9kcyB0byB1cGRhdGUsXG4gICAgICAgICAgLy8gYnV0IHNldEluIG9uIHRoZSB0b3AtbGV2ZWwgZXhwcmVzc2lvbiB3aXRoIGEgcGxhaW4gYXJyYXkvb2JqZWN0IFxuICAgICAgICAgIC8vIHVzdWFsbHkgdHJpZ2dlcnMgdGhlIGZyYW1ld29yaydzIGF1dG8tY29udmVyc2lvbi5cbiAgICAgICAgICBzYW5pdGl6ZWRFeHByID0gc2FuaXRpemVkRXhwci5zZXRJbihbJ3BhcnRzJywgaW5kZXgsICd2YWx1ZU9wdGlvbnMnLCAndmFsdWUnXSwgc2FuaXRpemVkQXJyKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9KVxuXG4gIHJldHVybiBzYW5pdGl6ZWRFeHByXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRQb3B1cFRlbXBsYXRlIChcbiAgb3V0cHV0RFM6IEZlYXR1cmVMYXllckRhdGFTb3VyY2UsXG4gIHF1ZXJ5SXRlbTogSW1tdXRhYmxlT2JqZWN0PFF1ZXJ5SXRlbVR5cGU+XG4pOiBQcm9taXNlPHsgcG9wdXBUZW1wbGF0ZT86IF9fZXNyaS5Qb3B1cFRlbXBsYXRlLCBkZWZhdWx0UG9wdXBUZW1wbGF0ZT86IF9fZXNyaS5Qb3B1cFRlbXBsYXRlIH0+IHtcbiAgY29uc3QgeyByZXN1bHRGaWVsZHNUeXBlLCByZXN1bHREaXNwbGF5RmllbGRzLCByZXN1bHRUaXRsZUV4cHJlc3Npb24gPSAnJyB9ID0gcXVlcnlJdGVtXG4gIGNvbnN0IGN1cnJlbnRPcmlnaW5EczogRmVhdHVyZUxheWVyRGF0YVNvdXJjZSA9IG91dHB1dERTLmdldE9yaWdpbkRhdGFTb3VyY2VzKClbMF0gYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICBjb25zdCBwb3B1cEluZm8gPSBjdXJyZW50T3JpZ2luRHMuZ2V0UG9wdXBJbmZvKClcblxuICBpZiAocmVzdWx0RmllbGRzVHlwZSA9PT0gRmllbGRzVHlwZS5TZWxlY3RBdHRyaWJ1dGVzKSB7XG4gICAgbGV0IGZpZWxkczogc3RyaW5nW11cbiAgICBpZiAocmVzdWx0RGlzcGxheUZpZWxkcyA9PSBudWxsKSB7XG4gICAgICBjb25zdCBmaWVsZHNJbkNvbnRlbnQgPSBnZXRGaWVsZEluZm9zSW5Qb3B1cENvbnRlbnQocG9wdXBJbmZvKVxuICAgICAgaWYgKGZpZWxkc0luQ29udGVudC5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IHVuaXF1ZUZpZWxkcyA9IG5ldyBTZXQoZmllbGRzSW5Db250ZW50Lm1hcChlbGUgPT4gZWxlLmZpZWxkTmFtZSkpXG4gICAgICAgIGZpZWxkcyA9IEFycmF5LmZyb20odW5pcXVlRmllbGRzKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gcmV0dXJuIGFsbCBmaWVsZHMgYnkgZGVmYXVsdFxuICAgICAgICBjb25zdCBhbGxGaWVsZHNTY2hlbWEgPSBvdXRwdXREUy5nZXRTY2hlbWEoKVxuICAgICAgICBmaWVsZHMgPSBhbGxGaWVsZHNTY2hlbWE/LmZpZWxkcyA/IE9iamVjdC52YWx1ZXMoYWxsRmllbGRzU2NoZW1hLmZpZWxkcykubWFwKGZpZWxkID0+IGZpZWxkLmppbXVOYW1lKSA6IFtdXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGZpZWxkcyA9IHJlc3VsdERpc3BsYXlGaWVsZHMuYXNNdXRhYmxlKHsgZGVlcDogdHJ1ZSB9KVxuICAgIH1cbiAgICBpZiAocG9wdXBJbmZvKSB7XG4gICAgICBjb25zdCBmaWVsZEluZm9zID0gW11cbiAgICAgIGZpZWxkcy5mb3JFYWNoKGZpZWxkID0+IHtcbiAgICAgICAgY29uc3QgZmllbGRJbmZvID0gcG9wdXBJbmZvLmZpZWxkSW5mb3MuZmluZChmaWVsZEluZm8gPT4gZmllbGRJbmZvLmZpZWxkTmFtZSA9PT0gZmllbGQpXG4gICAgICAgIGlmIChmaWVsZEluZm8pIHtcbiAgICAgICAgICBmaWVsZEluZm8udmlzaWJsZSA9IHRydWVcbiAgICAgICAgICBmaWVsZEluZm9zLnB1c2goZmllbGRJbmZvKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZpZWxkSW5mb3MucHVzaCh7XG4gICAgICAgICAgICBmaWVsZE5hbWU6IGZpZWxkLFxuICAgICAgICAgICAgbGFiZWw6IGZpZWxkXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHBvcHVwVGVtcGxhdGU6IHtcbiAgICAgICAgICBmaWVsZEluZm9zLFxuICAgICAgICAgIGNvbnRlbnQ6IFt7XG4gICAgICAgICAgICB0eXBlOiAnZmllbGRzJ1xuICAgICAgICAgIH1dLFxuICAgICAgICAgIHRpdGxlOiByZXN1bHRUaXRsZUV4cHJlc3Npb25cbiAgICAgICAgfVxuICAgICAgfSBhcyBhbnlcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIHBvcHVwVGVtcGxhdGU6IHtcbiAgICAgICAgZmllbGRJbmZvczogZmllbGRzLm1hcChmaWVsZCA9PiAoe1xuICAgICAgICAgIGZpZWxkTmFtZTogZmllbGQsXG4gICAgICAgICAgbGFiZWw6IGZpZWxkXG4gICAgICAgIH0pKSxcbiAgICAgICAgY29udGVudDogW3tcbiAgICAgICAgICB0eXBlOiAnZmllbGRzJ1xuICAgICAgICB9XSxcbiAgICAgICAgdGl0bGU6IHJlc3VsdFRpdGxlRXhwcmVzc2lvblxuICAgICAgfSBhcyBhbnlcbiAgICB9XG4gIH1cbiAgLy8gdGhlIHNvdXJjZSBsYXllciB3aWxsIHByb3ZpZGUgcG9wdXAgaW5mb1xuICBsZXQgbGF5ZXJPYmplY3RcbiAgaWYgKGN1cnJlbnRPcmlnaW5Ecy5sYXllcikge1xuICAgIGxheWVyT2JqZWN0ID0gY3VycmVudE9yaWdpbkRzLmxheWVyXG4gIH0gZWxzZSB7XG4gICAgbGF5ZXJPYmplY3QgPSBhd2FpdCBjdXJyZW50T3JpZ2luRHMuY3JlYXRlSlNBUElMYXllckJ5RGF0YVNvdXJjZSgpXG4gIH1cbiAgaWYgKGxheWVyT2JqZWN0KSB7XG4gICAgYXdhaXQgbGF5ZXJPYmplY3QubG9hZCgpXG4gIH1cbiAgcmV0dXJuIHsgZGVmYXVsdFBvcHVwVGVtcGxhdGU6IGxheWVyT2JqZWN0Py5hc3NvY2lhdGVkTGF5ZXI/LmRlZmF1bHRQb3B1cFRlbXBsYXRlIHx8IGxheWVyT2JqZWN0Py5kZWZhdWx0UG9wdXBUZW1wbGF0ZSB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZVF1ZXJ5UGFyYW1zIChcbiAgb3V0cHV0RFM6IEZlYXR1cmVMYXllckRhdGFTb3VyY2UsXG4gIHNxbEV4cHI6IElNU3FsRXhwcmVzc2lvbixcbiAgc3BhdGlhbEZpbHRlcjogU3BhdGlhbEZpbHRlck9iaixcbiAgcXVlcnlJdGVtOiBJbW11dGFibGVPYmplY3Q8UXVlcnlJdGVtVHlwZT4sXG4gIHBhZ2U6IG51bWJlcixcbiAgcGFnZVNpemU6IG51bWJlclxuKTogUXVlcnlQYXJhbXMge1xuICBjb25zdCBjdXJyZW50UXVlcnlEc0pzb24gPSBvdXRwdXREUy5nZXREYXRhU291cmNlSnNvbigpXG4gIGNvbnN0IGN1cnJlbnRPcmlnaW5EczogRmVhdHVyZUxheWVyRGF0YVNvdXJjZSA9IG91dHB1dERTLmdldE9yaWdpbkRhdGFTb3VyY2VzKClbMF0gYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICBjb25zdCBpc0xvY2FsRHMgPSBjdXJyZW50UXVlcnlEc0pzb24/LmlzRGF0YUluRGF0YVNvdXJjZUluc3RhbmNlXG4gIGlmIChpc0xvY2FsRHMpIHtcbiAgICBvdXRwdXREUy5zZXRTb3VyY2VSZWNvcmRzKGN1cnJlbnRPcmlnaW5Ecy5nZXRTb3VyY2VSZWNvcmRzKCkpXG4gIH1cblxuICBjb25zdCB7IHVzZUF0dHJpYnV0ZUZpbHRlciwgdXNlU3BhdGlhbEZpbHRlciwgc29ydE9wdGlvbnMsIHJlc3VsdEZpZWxkc1R5cGUsIHJlc3VsdERpc3BsYXlGaWVsZHMsIHJlc3VsdFRpdGxlRXhwcmVzc2lvbiB9ID0gcXVlcnlJdGVtXG4gIFxuICAvLyBERVRFUk1JTkUgTUlOSU1BTCBGSUVMRFMgKFRoZSBcIkZpZWxkIFNocmVkZGVyXCIgT3B0aW1pemF0aW9uKVxuICAvLyBUbyBhY2hpZXZlIHBlcmZvcm1hbmNlIHBhcml0eSB3aXRoIFdlYiBBcHBCdWlsZGVyLCB3ZSBtdXN0IGF2b2lkIGZldGNoaW5nIGV2ZXJ5IFxuICAvLyBjb2x1bW4gaW4gdGhlIGRhdGFiYXNlICgqIG9yIGFsbCkuIFdlIHN1cmdpY2FsbHkgcmVxdWVzdCBvbmx5IHRoZSBmaWVsZHMgXG4gIC8vIG5lZWRlZCBmb3IgdGhlIFRpdGxlLCB0aGUgQXR0cmlidXRlIExpc3QsIGFuZCB0aGUgSUQgZmllbGQuXG4gIGxldCBvdXRwdXRGaWVsZHM6IHN0cmluZ1tdID0gW11cbiAgaWYgKHJlc3VsdEZpZWxkc1R5cGUgPT09IEZpZWxkc1R5cGUuU2VsZWN0QXR0cmlidXRlcyAmJiByZXN1bHREaXNwbGF5RmllbGRzKSB7XG4gICAgb3V0cHV0RmllbGRzID0gY29tYmluZUZpZWxkcyhyZXN1bHREaXNwbGF5RmllbGRzIGFzIGFueSwgcmVzdWx0VGl0bGVFeHByZXNzaW9uIHx8ICcnLCBvdXRwdXREUy5nZXRJZEZpZWxkKCkpXG4gIH0gZWxzZSB7XG4gICAgLy8gUG9wdXAgbW9kZTogR2V0IG9ubHkgdmlzaWJsZSBmaWVsZHMgZnJvbSBwb3B1cCBpbmZvXG4gICAgY29uc3QgcG9wdXBJbmZvID0gY3VycmVudE9yaWdpbkRzLmdldFBvcHVwSW5mbygpXG4gICAgY29uc3QgZmllbGROYW1lcyA9IE9iamVjdC52YWx1ZXMoY3VycmVudE9yaWdpbkRzLmdldFNjaGVtYSgpLmZpZWxkcyA/PyB7fSkubWFwKGYgPT4gZi5uYW1lKVxuICAgIGNvbnN0IHZhbGlkRmllbGRJbmZvcyA9IHBvcHVwSW5mbz8uZmllbGRJbmZvcz8uZmlsdGVyKGZpZWxkSW5mbyA9PiBmaWVsZEluZm8udmlzaWJsZSAhPT0gZmFsc2UgJiYgZmllbGROYW1lcy5pbmNsdWRlcyhmaWVsZEluZm8uZmllbGROYW1lKSlcbiAgICBvdXRwdXRGaWVsZHMgPSB2YWxpZEZpZWxkSW5mb3M/Lm1hcChmaWVsZEluZm8gPT4gZmllbGRJbmZvLmZpZWxkTmFtZSkgfHwgW11cbiAgICBcbiAgICAvLyBBbHdheXMgZW5zdXJlIElEIGZpZWxkIGlzIGluY2x1ZGVkXG4gICAgY29uc3QgaWRGaWVsZCA9IG91dHB1dERTLmdldElkRmllbGQoKVxuICAgIGlmIChpZEZpZWxkICYmICFvdXRwdXRGaWVsZHMuaW5jbHVkZXMoaWRGaWVsZCkpIHtcbiAgICAgIG91dHB1dEZpZWxkcy5wdXNoKGlkRmllbGQpXG4gICAgfVxuICB9XG5cbiAgY29uc3QgbWVyZ2VkUXVlcnlQYXJhbXMgPSBvdXRwdXREUy5tZXJnZVF1ZXJ5UGFyYW1zKGN1cnJlbnRPcmlnaW5Ecy5nZXRDdXJyZW50UXVlcnlQYXJhbXMoKSA/PyB7fSwge1xuICAgIHdoZXJlOiAodXNlQXR0cmlidXRlRmlsdGVyICYmIHNxbEV4cHI/LnNxbCkgPyBkYXRhU291cmNlVXRpbHMuZ2V0QXJjR0lTU1FMKHNxbEV4cHIsIG91dHB1dERTKS5zcWwgOiAnMT0xJyxcbiAgICBzcWxFeHByZXNzaW9uOiAodXNlQXR0cmlidXRlRmlsdGVyICYmIHNxbEV4cHI/LnNxbCkgPyBzcWxFeHByIDogbnVsbCxcbiAgICAvLyBGT1JDRSBtaW5pbWFsIGZpZWxkcyBoZXJlIHRvIG92ZXJyaWRlIGFueSBmcmFtZXdvcmsgXCIqXCIgb3IgXCJhbGxcIlxuICAgIG91dEZpZWxkczogb3V0cHV0RmllbGRzXG4gIH0gYXMgYW55KVxuXG4gIC8vIFBFUkZPUk1BTkNFIE9QVElNSVpBVElPTjogVW5pdmVyc2FsIFNRTCBPcHRpbWl6ZXJcbiAgLy8gV2Ugbm9ybWFsaXplIHRoZSB1c2VyJ3MgaW5wdXQgdG8gVVBQRVJDQVNFIHRvIGVuc3VyZSBjYXNlLWluc2Vuc2l0aXZpdHkgd2hpbGUgXG4gIC8vIHVud3JhcHBpbmcgYW55IExPV0VSKCkgZnVuY3Rpb24gYXJvdW5kIHRoZSBmaWVsZCBuYW1lLiBUaGlzIGFsbG93cyB0aGUgZGF0YWJhc2UgXG4gIC8vIHRvIHVzZSBpdHMgYXR0cmlidXRlIGluZGV4ZXMgKFNBUkdhYmxlIHF1ZXJ5KS5cbiAgaWYgKG1lcmdlZFF1ZXJ5UGFyYW1zLndoZXJlICYmIG1lcmdlZFF1ZXJ5UGFyYW1zLndoZXJlLmluY2x1ZGVzKCdMT1dFUignKSkge1xuICAgIGNvbnN0IG9wdGltaXplZFdoZXJlID0gbWVyZ2VkUXVlcnlQYXJhbXMud2hlcmUucmVwbGFjZSgvTE9XRVJcXCgoW14pXSspXFwpXFxzKig9fExJS0UpXFxzKicoW14nXSopJy9naSwgKG1hdGNoLCBmaWVsZCwgb3BlcmF0b3IsIHZhbHVlKSA9PiB7XG4gICAgICAvLyBOb3JtYWxpemUgYm90aCBzaWRlcyB0byBVUFBFUkNBU0UuIFRoaXMgd29ya3MgZm9yIEFOWSBmaWVsZCBuYW1lLlxuICAgICAgLy8gV2Uga2VlcCB0aGUgZmllbGQgbmFtZSBcIm5ha2VkXCIgc28gdGhlIGluZGV4IGlzIHVzZWQuXG4gICAgICByZXR1cm4gYCR7ZmllbGR9ICR7b3BlcmF0b3J9ICcke3ZhbHVlLnRvVXBwZXJDYXNlKCl9J2BcbiAgICB9KVxuICAgIFxuICAgIGlmIChvcHRpbWl6ZWRXaGVyZSAhPT0gbWVyZ2VkUXVlcnlQYXJhbXMud2hlcmUpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgICAgZXZlbnQ6ICdzcWwtb3B0aW1pemVkJyxcbiAgICAgICAgb3JpZ2luYWw6IG1lcmdlZFF1ZXJ5UGFyYW1zLndoZXJlLFxuICAgICAgICBvcHRpbWl6ZWQ6IG9wdGltaXplZFdoZXJlXG4gICAgICB9KVxuICAgICAgbWVyZ2VkUXVlcnlQYXJhbXMud2hlcmUgPSBvcHRpbWl6ZWRXaGVyZVxuICAgIH1cbiAgfVxuXG4gIC8vIGNvbXBvc2UgcXVlcnkgcGFyYW1zIGZvciBxdWVyeVxuICBjb25zdCBxdWVyeVBhcmFtczogRmVhdHVyZUxheWVyUXVlcnlQYXJhbXMgPSB7XG4gICAgLy8gdXJsOiBkcy51cmwsXG4gICAgcmV0dXJuR2VvbWV0cnk6IHRydWUsXG4gICAgLyoqIFxuICAgICAqIFBFUkZPUk1BTkNFIE9QVElNSVpBVElPTjogRm9yY2UgbG93ZXIgcHJlY2lzaW9uIGZvciBhbGwgZGlzcGxheSBxdWVyaWVzLlxuICAgICAqL1xuICAgIG1heEFsbG93YWJsZU9mZnNldDogMC4xLCBcbiAgICBwYWdlLFxuICAgIC8vIExpbWl0IHBhZ2VTaXplIHRvIGEgc2FuZSBkZWZhdWx0IGlmIG5vdCBwcm92aWRlZCBvciB0b28gbGFyZ2VcbiAgICBwYWdlU2l6ZTogKHBhZ2VTaXplICYmIHBhZ2VTaXplIDwgMTAwMCkgPyBwYWdlU2l6ZSA6IDEwMDAsXG4gICAgLi4ubWVyZ2VkUXVlcnlQYXJhbXNcbiAgfVxuXG4gIC8vIEZpbmFsIG92ZXJyaWRlIHRvIGVuc3VyZSBubyBcIipcIiBsZWFrcyB0aHJvdWdoIGZyb20gYW55IG1lcmdlIG9wZXJhdGlvblxuICBpZiAoIXF1ZXJ5UGFyYW1zLm91dEZpZWxkcyB8fCBxdWVyeVBhcmFtcy5vdXRGaWVsZHMuaW5jbHVkZXMoJyonKSkge1xuICAgIHF1ZXJ5UGFyYW1zLm91dEZpZWxkcyA9IG91dHB1dEZpZWxkc1xuICB9XG5cbiAgLy8gRGlhZ25vc3RpYyBsb2c6IFNob3cgZXhhY3RseSBXSElDSCBmaWVsZHMgYXJlIGJlaW5nIHNlbnRcbiAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgIGV2ZW50OiAncmVxdWVzdGluZy1kYXRhJyxcbiAgICBmaWVsZHNDb3VudDogcXVlcnlQYXJhbXMub3V0RmllbGRzPy5sZW5ndGgsXG4gICAgZmllbGRzOiBxdWVyeVBhcmFtcy5vdXRGaWVsZHM/LmpvaW4oJywgJyksXG4gICAgcGFnZVNpemU6IHF1ZXJ5UGFyYW1zLnBhZ2VTaXplLFxuICAgIG9mZnNldDogcXVlcnlQYXJhbXMubWF4QWxsb3dhYmxlT2Zmc2V0XG4gIH0pXG5cbiAgaWYgKHVzZVNwYXRpYWxGaWx0ZXIgJiYgc3BhdGlhbEZpbHRlcj8uZ2VvbWV0cnkpIHtcbiAgICBjb25zdCB7IGdlb21ldHJ5LCByZWxhdGlvbiA9IFNwYXRpYWxSZWxhdGlvbi5JbnRlcnNlY3QsIGJ1ZmZlciB9ID0gc3BhdGlhbEZpbHRlclxuXG4gICAgY29uc3Qgc3BhdGlhbFF1ZXJ5UGFyYW1zOiBGZWF0dXJlTGF5ZXJRdWVyeVBhcmFtcyA9IHtcbiAgICAgIGdlb21ldHJ5VHlwZTogZGF0YVNvdXJjZVV0aWxzLmNoYW5nZUpTQVBJR2VvbWV0cnlUeXBlVG9SZXN0QVBJR2VvbWV0cnlUeXBlKGdlb21ldHJ5LnR5cGUpLFxuICAgICAgZ2VvbWV0cnk6IGdlb21ldHJ5LnRvSlNPTigpLFxuICAgICAgc3BhdGlhbFJlbDogbWFwSlNBUElTcGF0aWFsUmVsVG9Ec1NwYXRpYWxSZWxbcmVsYXRpb25dLFxuICAgICAgZGlzdGFuY2U6IGJ1ZmZlcj8uZGlzdGFuY2UsXG4gICAgICB1bml0czogYnVmZmVyPy51bml0ID8gbWFwSlNBUElVbml0VG9Ec1VuaXRbYnVmZmVyLnVuaXRdIDogdW5kZWZpbmVkXG4gICAgfVxuICAgIE9iamVjdC5hc3NpZ24ocXVlcnlQYXJhbXMsIHNwYXRpYWxRdWVyeVBhcmFtcylcbiAgfVxuXG4gIGlmIChzb3J0T3B0aW9ucz8ubGVuZ3RoID4gMCkge1xuICAgIE9iamVjdC5hc3NpZ24ocXVlcnlQYXJhbXMsIHtcbiAgICAgIG9yZGVyQnlGaWVsZHM6IHNvcnRPcHRpb25zLm1hcChpdGVtID0+IGAke2l0ZW0uamltdUZpZWxkTmFtZX0gJHtpdGVtLm9yZGVyfWApXG4gICAgfSlcbiAgfVxuXG4gIHJldHVybiBxdWVyeVBhcmFtc1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZXhlY3V0ZUNvdW50UXVlcnkgKFxuICB3aWRnZXRJZDogc3RyaW5nLFxuICBvdXRwdXREUzogRmVhdHVyZUxheWVyRGF0YVNvdXJjZSxcbiAgcXVlcnlQYXJhbXM6IFF1ZXJ5UGFyYW1zXG4pOiBQcm9taXNlPG51bWJlcj4ge1xuICBjb25zdCByZXN1bHQgPSBhd2FpdCBvdXRwdXREUy5sb2FkQ291bnQocXVlcnlQYXJhbXMsIHsgd2lkZ2V0SWQsIHJlZnJlc2g6IHRydWUgfSlcbiAgcmV0dXJuIHJlc3VsdCAhPSBudWxsID8gcmVzdWx0IDogMFxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZXhlY3V0ZVF1ZXJ5IChcbiAgd2lkZ2V0SWQ6IHN0cmluZyxcbiAgcXVlcnlJdGVtOiBJbW11dGFibGVPYmplY3Q8UXVlcnlJdGVtVHlwZT4sXG4gIG91dHB1dERTOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLFxuICBxdWVyeVBhcmFtczogUXVlcnlQYXJhbXNcbik6IFByb21pc2U8eyByZWNvcmRzPzogRGF0YVJlY29yZFtdLCBmaWVsZHM/OiBzdHJpbmdbXSB9PiB7XG4gIGNvbnN0IHBvcHVwSW5mbyA9IG91dHB1dERTLmdldFBvcHVwSW5mbygpXG5cbiAgY29uc3QgbGF5ZXJEZWZpbml0aW9uID0gb3V0cHV0RFMuZ2V0TGF5ZXJEZWZpbml0aW9uKClcbiAgY29uc3QgZ2V0RGVmYXVsdEZpZWxkSW5mb3MgPSAoKSA9PlxuICAgIFtcbiAgICAgIHsgZmllbGROYW1lOiBsYXllckRlZmluaXRpb24/Lm9iamVjdElkRmllbGQgPz8gJ29iamVjdGlkJywgbGFiZWw6ICdPQkpFQ1RJRCcsIHRvb2x0aXA6ICcnLCB2aXNpYmxlOiB0cnVlIH1cbiAgICBdIGFzIElGaWVsZEluZm9bXVxuICBjb25zdCBmaWVsZEluZm9zID0gKChmaWVsZEluZm9zKSA9PiAoZmllbGRJbmZvcy5sZW5ndGggPyBmaWVsZEluZm9zIDogZ2V0RGVmYXVsdEZpZWxkSW5mb3MoKSkpKFxuICAgIChwb3B1cEluZm8/LmZpZWxkSW5mb3MgfHwgW10pLmZpbHRlcigoaSkgPT4gaS52aXNpYmxlKVxuICApXG4gIC8vIGNvbnN0IGZpZWxkcyA9IG91dHB1dERTLmdldFNjaGVtYSgpPy5maWVsZHNcbiAgLy8gbGV0IHNlbGVjdGVkRmllbGROYW1lc1xuICAvLyBpZiAocXVlcnlJdGVtLnJlc3VsdEZpZWxkc1R5cGUgPT09IEZpZWxkc1R5cGUuU2VsZWN0QXR0cmlidXRlcykge1xuICAvLyAgIHNlbGVjdGVkRmllbGROYW1lcyA9IFtdLmNvbmNhdChxdWVyeUl0ZW0ucmVzdWx0RGlzcGxheUZpZWxkcywgcXVlcnlJdGVtLnJlc3VsdFRpdGxlRmllbGRzKVxuICAvLyB9IGVsc2Uge1xuICAvLyAgIHNlbGVjdGVkRmllbGROYW1lcyA9IGZpZWxkSW5mb3MubWFwKChmaWVsZEluZm8pID0+IGZpZWxkSW5mby5maWVsZE5hbWUpXG4gIC8vIH1cbiAgLy8gY29uc3Qgc2VsZWN0ZWRGaWVsZEppbXVOYW1lcyA9IGZpZWxkc1xuICAvLyAgID8gT2JqZWN0LmtleXMoZmllbGRzKS5maWx0ZXIoKGppbXVOYW1lKSA9PiBzZWxlY3RlZEZpZWxkTmFtZXMuaW5jbHVkZXMoZmllbGRzW2ppbXVOYW1lXS5uYW1lKSlcbiAgLy8gICA6IFtdXG4gIC8vIG91dHB1dERTLnNldFNlbGVjdGVkRmllbGRzKHNlbGVjdGVkRmllbGRKaW11TmFtZXMpXG4gIGNvbnN0IHN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpXG4gIGxldCByZWNvcmRzID0gYXdhaXQgb3V0cHV0RFMubG9hZChxdWVyeVBhcmFtcywgeyB3aWRnZXRJZCB9KVxuICBjb25zdCBmZXRjaFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0VGltZVxuICBcbiAgaWYgKHJlY29yZHMgPT0gbnVsbCkge1xuICAgIHJlY29yZHMgPSBbXVxuICB9XG4gIGNvbnN0IG9yaWdpbkRzOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlID0gb3V0cHV0RFMuZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKVswXSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gIFxuICBjb25zdCBsYXllclN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpXG4gIGNvbnN0IGxheWVyT2JqZWN0ID0gYXdhaXQgZ2V0TGF5ZXJPYmplY3Qob3JpZ2luRHMpXG4gIGNvbnN0IGxheWVyVGltZSA9IHBlcmZvcm1hbmNlLm5vdygpIC0gbGF5ZXJTdGFydFRpbWVcblxuICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgZXZlbnQ6ICdxdWVyeS1jb21wbGV0ZScsXG4gICAgZmV0Y2hUaW1lOiBNYXRoLnJvdW5kKGZldGNoVGltZSksXG4gICAgbGF5ZXJUaW1lOiBNYXRoLnJvdW5kKGxheWVyVGltZSksXG4gICAgdG90YWxUaW1lOiBNYXRoLnJvdW5kKHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnRUaW1lKSxcbiAgICByZWNvcmRDb3VudDogcmVjb3Jkcy5sZW5ndGhcbiAgfSlcbiAgXG4gIHJlY29yZHMuZm9yRWFjaCgocmVjb3JkKSA9PiB7XG4gICAgY29uc3QgZmVhdHVyZSA9IChyZWNvcmQgYXMgYW55KS5mZWF0dXJlXG4gICAgaWYgKGxheWVyT2JqZWN0KSB7XG4gICAgICBmZWF0dXJlLnNvdXJjZUxheWVyID0gKGxheWVyT2JqZWN0IGFzIGFueSkuYXNzb2NpYXRlZExheWVyIHx8IGxheWVyT2JqZWN0XG4gICAgfVxuICAgIGZlYXR1cmUubGF5ZXIgPSBmZWF0dXJlLnNvdXJjZUxheWVyXG4gIH0pXG4gIGNvbnN0IHF1ZXJ5UmVzdWx0ID0ge1xuICAgIHJlY29yZHMsXG4gICAgZmllbGRzOiBmaWVsZEluZm9zLm1hcCgoZmllbGRJbmZvKSA9PiBmaWVsZEluZm8uZmllbGROYW1lKVxuICB9XG5cbiAgLy8gcHVibGlzaCBtZXNzYWdlXG4gIGNvbnN0IGRhdGFSZWNvcmRTZXRDaGFuZ2VNZXNzYWdlID0gbmV3IERhdGFSZWNvcmRTZXRDaGFuZ2VNZXNzYWdlKHdpZGdldElkLCBSZWNvcmRTZXRDaGFuZ2VUeXBlLkNyZWF0ZVVwZGF0ZSwgW3tcbiAgICByZWNvcmRzOiBvdXRwdXREUy5nZXRBbGxMb2FkZWRSZWNvcmRzKCksXG4gICAgZmllbGRzOiBxdWVyeVJlc3VsdC5maWVsZHMsXG4gICAgZGF0YVNvdXJjZTogb3V0cHV0RFMsXG4gICAgbmFtZTogb3V0cHV0RFMuaWQsXG4gICAgbGFiZWw6IG91dHB1dERTLmdldExhYmVsKClcbiAgfV0pXG4gIE1lc3NhZ2VNYW5hZ2VyLmdldEluc3RhbmNlKCkucHVibGlzaE1lc3NhZ2UoZGF0YVJlY29yZFNldENoYW5nZU1lc3NhZ2UpXG5cbiAgcmV0dXJuIHF1ZXJ5UmVzdWx0XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdldExheWVyT2JqZWN0IChkYXRhU291cmNlOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlKSB7XG4gIGNvbnN0IGxheWVyT2JqZWN0ID0gYXdhaXQgZGF0YVNvdXJjZS5jcmVhdGVKU0FQSUxheWVyQnlEYXRhU291cmNlKCkgYXMgX19lc3JpLkxheWVyXG4gIC8vIGxheWVyT2JqZWN0IG1heSBiZSB1bmRlZmluZWQgaWYgdGhlIGRhdGEgc291cmNlIGlzIGFkZGVkIGJ5IFVSTFxuICBpZiAobGF5ZXJPYmplY3QpIHtcbiAgICBhd2FpdCBsYXllck9iamVjdC5sb2FkKClcbiAgfVxuICByZXR1cm4gbGF5ZXJPYmplY3Rcbn1cblxuXG4iLCIvKipcbiAqIFV0aWxpdHkgZnVuY3Rpb25zIGZvciBtYW5hZ2luZyByZXN1bHRzIGFjY3VtdWxhdGlvbiBpbiBRdWVyeVNpbXBsZSB3aWRnZXQuXG4gKiBIYW5kbGVzIFwiQWRkIHRvXCIgYW5kIFwiUmVtb3ZlIGZyb21cIiBtb2RlcyBmb3IgYWNjdW11bGF0aW5nIHF1ZXJ5IHJlc3VsdHMuXG4gKi9cblxuaW1wb3J0IHR5cGUgeyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLCBGZWF0dXJlRGF0YVJlY29yZCwgRGF0YVJlY29yZCB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IERhdGFTb3VyY2VNYW5hZ2VyLCBEYXRhU291cmNlU3RhdHVzLCBNZXNzYWdlTWFuYWdlciwgRGF0YVJlY29yZFNldENoYW5nZU1lc3NhZ2UsIFJlY29yZFNldENoYW5nZVR5cGUsIERhdGFSZWNvcmRzU2VsZWN0aW9uQ2hhbmdlTWVzc2FnZSB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIgfSBmcm9tICd3aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbidcbmltcG9ydCB7IHJlbW92ZUhpZ2hsaWdodEdyYXBoaWNzIH0gZnJvbSAnLi9ncmFwaGljcy1sYXllci11dGlscydcblxuY29uc3QgZGVidWdMb2dnZXIgPSBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyKClcblxuLyoqXG4gKiBHZW5lcmF0ZXMgYSBjb21wb3NpdGUga2V5IGZvciBhIHJlY29yZCB0aGF0IGluY2x1ZGVzIGJvdGggb3JpZ2luIGRhdGEgc291cmNlIElEIGFuZCBvYmplY3RJZC5cbiAqIFRoaXMgZW5zdXJlcyB1bmlxdWVuZXNzIGFjcm9zcyBkaWZmZXJlbnQgbGF5ZXJzIHRoYXQgbWF5IGhhdmUgdGhlIHNhbWUgb2JqZWN0SWQuXG4gKiBcbiAqIEBwYXJhbSByZWNvcmQgLSBUaGUgZmVhdHVyZSBkYXRhIHJlY29yZFxuICogQHBhcmFtIG91dHB1dERTIC0gVGhlIG91dHB1dCBkYXRhIHNvdXJjZSBjb250YWluaW5nIHRoZSByZWNvcmRcbiAqIEByZXR1cm5zIENvbXBvc2l0ZSBrZXkgc3RyaW5nOiBgJHtvcmlnaW5EU0lkfV8ke29iamVjdElkfWBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFJlY29yZEtleShcbiAgcmVjb3JkOiBGZWF0dXJlRGF0YVJlY29yZCxcbiAgb3V0cHV0RFM6IEZlYXR1cmVMYXllckRhdGFTb3VyY2Vcbik6IHN0cmluZyB7XG4gIGNvbnN0IG9yaWdpbkRTID0gb3V0cHV0RFMuZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKT8uWzBdIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgY29uc3Qgb3JpZ2luRFNJZCA9IG9yaWdpbkRTPy5pZCB8fCBvdXRwdXREUy5pZCAvLyBGYWxsYmFjayB0byBvdXRwdXREUyBpZiBubyBvcmlnaW5cbiAgY29uc3Qgb2JqZWN0SWQgPSByZWNvcmQuZ2V0SWQoKVxuICBjb25zdCBrZXkgPSBgJHtvcmlnaW5EU0lkfV8ke29iamVjdElkfWBcbiAgXG4gIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgIGV2ZW50OiAncmVjb3JkLWtleS1nZW5lcmF0ZWQnLFxuICAgIG9yaWdpbkRTSWQsXG4gICAgb2JqZWN0SWQsXG4gICAga2V5LFxuICAgIGhhc09yaWdpbkRTOiAhIW9yaWdpbkRTXG4gIH0pXG4gIFxuICByZXR1cm4ga2V5XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBhY2N1bXVsYXRlZCByZXN1bHRzIGRhdGEgc291cmNlIGZvciBzdG9yaW5nIG1lcmdlZCBxdWVyeSByZXN1bHRzLlxuICogVGhpcyBkYXRhIHNvdXJjZSBpcyB3aWRnZXQtbGV2ZWwgYW5kIHBlcnNpc3RzIGFjcm9zcyBtdWx0aXBsZSBxdWVyaWVzLlxuICogXG4gKiBAcGFyYW0gd2lkZ2V0SWQgLSBUaGUgd2lkZ2V0IElEXG4gKiBAcGFyYW0gb3JpZ2luRFMgLSBUaGUgb3JpZ2luIGRhdGEgc291cmNlIHRvIHVzZSBhcyB0aGUgYmFzZVxuICogQHJldHVybnMgVGhlIGNyZWF0ZWQgYWNjdW11bGF0ZWQgcmVzdWx0cyBkYXRhIHNvdXJjZVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlQWNjdW11bGF0ZWRSZXN1bHRzRGF0YVNvdXJjZShcbiAgd2lkZ2V0SWQ6IHN0cmluZyxcbiAgb3JpZ2luRFM6IEZlYXR1cmVMYXllckRhdGFTb3VyY2Vcbik6IFByb21pc2U8RmVhdHVyZUxheWVyRGF0YVNvdXJjZT4ge1xuICBjb25zdCBhY2N1bXVsYXRlZERTSWQgPSBgJHt3aWRnZXRJZH1fYWNjdW11bGF0ZWRfcmVzdWx0c2BcbiAgXG4gIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgIGV2ZW50OiAnY3JlYXRpbmctYWNjdW11bGF0ZWQtZHMnLFxuICAgIHdpZGdldElkLFxuICAgIGFjY3VtdWxhdGVkRFNJZCxcbiAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZFxuICB9KVxuICBcbiAgLy8gQ2hlY2sgaWYgZGF0YSBzb3VyY2UgYWxyZWFkeSBleGlzdHNcbiAgY29uc3QgZHNNYW5hZ2VyID0gRGF0YVNvdXJjZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKVxuICBsZXQgYWNjdW11bGF0ZWREUyA9IGRzTWFuYWdlci5nZXREYXRhU291cmNlKGFjY3VtdWxhdGVkRFNJZCkgYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICBcbiAgaWYgKGFjY3VtdWxhdGVkRFMpIHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgIGV2ZW50OiAnYWNjdW11bGF0ZWQtZHMtYWxyZWFkeS1leGlzdHMnLFxuICAgICAgYWNjdW11bGF0ZWREU0lkXG4gICAgfSlcbiAgICByZXR1cm4gYWNjdW11bGF0ZWREU1xuICB9XG4gIFxuICAvLyBHZXQgb3JpZ2luIGRhdGEgc291cmNlIEpTT04gdG8gY3JlYXRlIG91dHB1dCBkYXRhIHNvdXJjZVxuICBjb25zdCBvcmlnaW5EYXRhU291cmNlSnNvbiA9IG9yaWdpbkRTLmdldERhdGFTb3VyY2VKc29uKClcbiAgXG4gIC8vIENyZWF0ZSBvdXRwdXQgZGF0YSBzb3VyY2UgSlNPTiBzaW1pbGFyIHRvIGhvdyBxdWVyeSBpdGVtcyBjcmVhdGUgb3V0cHV0IERTXG4gIGNvbnN0IG91dHB1dERhdGFTb3VyY2VKc29uID0ge1xuICAgIGlkOiBhY2N1bXVsYXRlZERTSWQsXG4gICAgbGFiZWw6ICdBY2N1bXVsYXRlZCBSZXN1bHRzJyxcbiAgICB0eXBlOiBvcmlnaW5EYXRhU291cmNlSnNvbj8udHlwZSxcbiAgICBnZW9tZXRyeVR5cGU6IG9yaWdpbkRhdGFTb3VyY2VKc29uPy5nZW9tZXRyeVR5cGUsXG4gICAgdXJsOiBvcmlnaW5EYXRhU291cmNlSnNvbj8udXJsLFxuICAgIGl0ZW1JZDogb3JpZ2luRGF0YVNvdXJjZUpzb24/Lml0ZW1JZCxcbiAgICBwb3J0YWxVcmw6IG9yaWdpbkRhdGFTb3VyY2VKc29uPy5wb3J0YWxVcmwsXG4gICAgb3JpZ2luRGF0YVNvdXJjZXM6IFt7XG4gICAgICBkYXRhU291cmNlSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgbWFpbkRhdGFTb3VyY2VJZDogb3JpZ2luRFMuaWQsXG4gICAgICByb290RGF0YVNvdXJjZUlkOiBvcmlnaW5EUy5pZFxuICAgIH1dLFxuICAgIGxheWVySWQ6IG9yaWdpbkRhdGFTb3VyY2VKc29uPy5sYXllcklkLFxuICAgIGlzRGF0YUluRGF0YVNvdXJjZUluc3RhbmNlOiBvcmlnaW5EYXRhU291cmNlSnNvbj8uaXNEYXRhSW5EYXRhU291cmNlSW5zdGFuY2UsXG4gICAgaXNPdXRwdXRGcm9tV2lkZ2V0OiB0cnVlXG4gIH1cbiAgXG4gIC8vIENyZWF0ZSB0aGUgZGF0YSBzb3VyY2UgdXNpbmcgRGF0YVNvdXJjZU1hbmFnZXJcbiAgLy8gTm90ZTogVGhpcyBmb2xsb3dzIHRoZSBwYXR0ZXJuIGZyb20gc2V0dGluZy50c3ggZm9yIGNyZWF0aW5nIG91dHB1dCBkYXRhIHNvdXJjZXNcbiAgYWNjdW11bGF0ZWREUyA9IGRzTWFuYWdlci5jcmVhdGVEYXRhU291cmNlQnlEYXRhU291cmNlSnNvbihvdXRwdXREYXRhU291cmNlSnNvbikgYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICBcbiAgLy8gU2V0IGluaXRpYWwgc3RhdHVzXG4gIGFjY3VtdWxhdGVkRFMuc2V0U3RhdHVzKERhdGFTb3VyY2VTdGF0dXMuTm90UmVhZHkpXG4gIGFjY3VtdWxhdGVkRFMuc2V0Q291bnRTdGF0dXMoRGF0YVNvdXJjZVN0YXR1cy5Ob3RSZWFkeSlcbiAgXG4gIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgIGV2ZW50OiAnYWNjdW11bGF0ZWQtZHMtY3JlYXRlZCcsXG4gICAgYWNjdW11bGF0ZWREU0lkLFxuICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgIHN0YXR1czogYWNjdW11bGF0ZWREUy5nZXRTdGF0dXMoKVxuICB9KVxuICBcbiAgcmV0dXJuIGFjY3VtdWxhdGVkRFNcbn1cblxuLyoqXG4gKiBNZXJnZXMgbmV3IHF1ZXJ5IHJlc3VsdHMgd2l0aCBleGlzdGluZyByZWNvcmRzLlxuICogRGVkdXBsaWNhdGVzIHJlY29yZHMgdXNpbmcgY29tcG9zaXRlIGtleXMgKG9yaWdpbkRTSWRfb2JqZWN0SWQpLlxuICogXG4gKiBUaGlzIGZ1bmN0aW9uIG1lcmdlcyBuZXcgcmVjb3JkcyB3aXRoIGV4aXN0aW5nIHJlY29yZHMgdGhhdCB3ZXJlIGNhcHR1cmVkXG4gKiBiZWZvcmUgdGhlIHF1ZXJ5IGV4ZWN1dGVkLiBUaGUgY2FsbGVyIGlzIHJlc3BvbnNpYmxlIGZvciBzdG9yaW5nIHRoZSBtZXJnZWRcbiAqIHJlY29yZHMgKHR5cGljYWxseSBpbiByZWNvcmRzUmVmIG9yIHN0YXRlKS5cbiAqIFxuICogQHBhcmFtIG91dHB1dERTIC0gVGhlIG91dHB1dCBkYXRhIHNvdXJjZSAodXNlZCBmb3Iga2V5IGdlbmVyYXRpb24pXG4gKiBAcGFyYW0gbmV3UmVjb3JkcyAtIE5ldyByZWNvcmRzIHRvIG1lcmdlIGluXG4gKiBAcGFyYW0gZXhpc3RpbmdSZWNvcmRzIC0gRXhpc3RpbmcgcmVjb3JkcyBjYXB0dXJlZCBiZWZvcmUgcXVlcnkgZXhlY3V0aW9uIChvcHRpb25hbCwgZGVmYXVsdHMgdG8gZW1wdHkgYXJyYXkpXG4gKiBAcmV0dXJucyBBcnJheSBvZiBhbGwgbWVyZ2VkIHJlY29yZHMgKGV4aXN0aW5nICsgbmV3IHVuaXF1ZSByZWNvcmRzKVxuICovXG5leHBvcnQgZnVuY3Rpb24gbWVyZ2VSZXN1bHRzSW50b0FjY3VtdWxhdGVkKFxuICBvdXRwdXREUzogRmVhdHVyZUxheWVyRGF0YVNvdXJjZSxcbiAgbmV3UmVjb3JkczogRmVhdHVyZURhdGFSZWNvcmRbXSxcbiAgZXhpc3RpbmdSZWNvcmRzOiBGZWF0dXJlRGF0YVJlY29yZFtdID0gW11cbik6IEZlYXR1cmVEYXRhUmVjb3JkW10ge1xuICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICBldmVudDogJ21lcmdpbmctcmVzdWx0cy1zdGFydCcsXG4gICAgb3V0cHV0RFNJZDogb3V0cHV0RFMuaWQsXG4gICAgZXhpc3RpbmdSZWNvcmRzQ291bnQ6IGV4aXN0aW5nUmVjb3Jkcy5sZW5ndGgsXG4gICAgbmV3UmVjb3Jkc0NvdW50OiBuZXdSZWNvcmRzLmxlbmd0aFxuICB9KVxuICBcbiAgLy8gQnVpbGQgU2V0IG9mIGV4aXN0aW5nIHJlY29yZCBrZXlzIGZvciBmYXN0IGxvb2t1cFxuICBjb25zdCBleGlzdGluZ0tleXMgPSBuZXcgU2V0KFxuICAgIGV4aXN0aW5nUmVjb3Jkcy5tYXAocmVjb3JkID0+IGdldFJlY29yZEtleShyZWNvcmQsIG91dHB1dERTKSlcbiAgKVxuICBcbiAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgZXZlbnQ6ICdleGlzdGluZy1yZWNvcmRzLWNoZWNrJyxcbiAgICBleGlzdGluZ1JlY29yZHNDb3VudDogZXhpc3RpbmdSZWNvcmRzLmxlbmd0aCxcbiAgICBleGlzdGluZ0tleXNDb3VudDogZXhpc3RpbmdLZXlzLnNpemVcbiAgfSlcbiAgXG4gIC8vIEZpbHRlciBuZXcgcmVjb3JkcyB0byBvbmx5IGluY2x1ZGUgdGhvc2Ugbm90IGFscmVhZHkgaW4gb3V0cHV0IERTXG4gIGNvbnN0IHVuaXF1ZU5ld1JlY29yZHMgPSBuZXdSZWNvcmRzLmZpbHRlcihyZWNvcmQgPT4ge1xuICAgIGNvbnN0IGtleSA9IGdldFJlY29yZEtleShyZWNvcmQsIG91dHB1dERTKVxuICAgIGNvbnN0IGlzRHVwbGljYXRlID0gZXhpc3RpbmdLZXlzLmhhcyhrZXkpXG4gICAgXG4gICAgaWYgKGlzRHVwbGljYXRlKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdkdXBsaWNhdGUtcmVjb3JkLXNraXBwZWQnLFxuICAgICAgICBrZXksXG4gICAgICAgIG9iamVjdElkOiByZWNvcmQuZ2V0SWQoKVxuICAgICAgfSlcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuICFpc0R1cGxpY2F0ZVxuICB9KVxuICBcbiAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgZXZlbnQ6ICdkZWR1cGxpY2F0aW9uLWNvbXBsZXRlJyxcbiAgICBuZXdSZWNvcmRzQ291bnQ6IG5ld1JlY29yZHMubGVuZ3RoLFxuICAgIHVuaXF1ZU5ld1JlY29yZHNDb3VudDogdW5pcXVlTmV3UmVjb3Jkcy5sZW5ndGgsXG4gICAgZHVwbGljYXRlc1NraXBwZWQ6IG5ld1JlY29yZHMubGVuZ3RoIC0gdW5pcXVlTmV3UmVjb3Jkcy5sZW5ndGhcbiAgfSlcbiAgXG4gIC8vIE1lcmdlIHJlY29yZHNcbiAgY29uc3QgbWVyZ2VkUmVjb3JkcyA9IFsuLi5leGlzdGluZ1JlY29yZHMsIC4uLnVuaXF1ZU5ld1JlY29yZHNdXG4gIFxuICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICBldmVudDogJ21lcmdlLWNvbXBsZXRlJyxcbiAgICB0b3RhbFJlY29yZHNBZnRlck1lcmdlOiBtZXJnZWRSZWNvcmRzLmxlbmd0aCxcbiAgICBleGlzdGluZ0NvdW50OiBleGlzdGluZ1JlY29yZHMubGVuZ3RoLFxuICAgIG5ld1VuaXF1ZUNvdW50OiB1bmlxdWVOZXdSZWNvcmRzLmxlbmd0aFxuICB9KVxuICBcbiAgcmV0dXJuIG1lcmdlZFJlY29yZHNcbn1cblxuLyoqXG4gKiBSZW1vdmVzIG1hdGNoaW5nIHJlY29yZHMgZnJvbSB3aWRnZXQtbGV2ZWwgYWNjdW11bGF0ZWQgcmVjb3Jkcy5cbiAqIE1hdGNoZXMgcmVjb3JkcyB1c2luZyBjb21wb3NpdGUga2V5cyAob3JpZ2luRFNJZF9vYmplY3RJZCkuXG4gKiBcbiAqIFRoaXMgZnVuY3Rpb24gcmVtb3ZlcyByZWNvcmRzIGZyb20gZXhpc3RpbmcgYWNjdW11bGF0ZWQgcmVjb3JkcyB0aGF0IHdlcmUgY2FwdHVyZWRcbiAqIGJlZm9yZSB0aGUgcXVlcnkgZXhlY3V0ZWQuIFRoZSBjYWxsZXIgaXMgcmVzcG9uc2libGUgZm9yIHN0b3JpbmcgdGhlIHJlbWFpbmluZ1xuICogcmVjb3JkcyAodHlwaWNhbGx5IGluIHJlY29yZHNSZWYgb3Igc3RhdGUpLlxuICogXG4gKiBAcGFyYW0gb3V0cHV0RFMgLSBUaGUgb3V0cHV0IGRhdGEgc291cmNlICh1c2VkIGZvciBrZXkgZ2VuZXJhdGlvbilcbiAqIEBwYXJhbSByZWNvcmRzVG9SZW1vdmUgLSBSZWNvcmRzIHRvIHJlbW92ZSAoZnJvbSBxdWVyeSByZXN1bHRzKVxuICogQHBhcmFtIGV4aXN0aW5nQWNjdW11bGF0ZWRSZWNvcmRzIC0gRXhpc3RpbmcgYWNjdW11bGF0ZWQgcmVjb3JkcyBjYXB0dXJlZCBiZWZvcmUgcXVlcnkgZXhlY3V0aW9uIChvcHRpb25hbCwgZGVmYXVsdHMgdG8gZW1wdHkgYXJyYXkpXG4gKiBAcmV0dXJucyBBcnJheSBvZiByZW1haW5pbmcgcmVjb3JkcyBhZnRlciByZW1vdmFsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVSZXN1bHRzRnJvbUFjY3VtdWxhdGVkKFxuICBvdXRwdXREUzogRmVhdHVyZUxheWVyRGF0YVNvdXJjZSxcbiAgcmVjb3Jkc1RvUmVtb3ZlOiBGZWF0dXJlRGF0YVJlY29yZFtdLFxuICBleGlzdGluZ0FjY3VtdWxhdGVkUmVjb3JkczogRmVhdHVyZURhdGFSZWNvcmRbXSA9IFtdXG4pOiBGZWF0dXJlRGF0YVJlY29yZFtdIHtcbiAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgZXZlbnQ6ICdyZW1vdmluZy1yZXN1bHRzLXN0YXJ0JyxcbiAgICBvdXRwdXREU0lkOiBvdXRwdXREUy5pZCxcbiAgICByZWNvcmRzVG9SZW1vdmVDb3VudDogcmVjb3Jkc1RvUmVtb3ZlLmxlbmd0aCxcbiAgICBleGlzdGluZ0FjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiBleGlzdGluZ0FjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGhcbiAgfSlcbiAgXG4gIC8vIElmIG5vIGFjY3VtdWxhdGVkIHJlY29yZHMsIG5vdGhpbmcgdG8gcmVtb3ZlXG4gIGlmIChleGlzdGluZ0FjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPT09IDApIHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgIGV2ZW50OiAnbm8tYWNjdW11bGF0ZWQtcmVjb3Jkcy10by1yZW1vdmUnLFxuICAgICAgb3V0cHV0RFNJZDogb3V0cHV0RFMuaWRcbiAgICB9KVxuICAgIHJldHVybiBbXVxuICB9XG4gIFxuICAvLyBJZiBubyByZWNvcmRzIHRvIHJlbW92ZSwgcmV0dXJuIGV4aXN0aW5nIHJlY29yZHMgdW5jaGFuZ2VkXG4gIGlmIChyZWNvcmRzVG9SZW1vdmUubGVuZ3RoID09PSAwKSB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICBldmVudDogJ25vLXJlY29yZHMtdG8tcmVtb3ZlJyxcbiAgICAgIG91dHB1dERTSWQ6IG91dHB1dERTLmlkLFxuICAgICAgZXhpc3RpbmdBY2N1bXVsYXRlZFJlY29yZHNDb3VudDogZXhpc3RpbmdBY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoXG4gICAgfSlcbiAgICByZXR1cm4gZXhpc3RpbmdBY2N1bXVsYXRlZFJlY29yZHNcbiAgfVxuICBcbiAgLy8gQnVpbGQgU2V0IG9mIGtleXMgdG8gcmVtb3ZlIGZvciBmYXN0IGxvb2t1cFxuICBjb25zdCByZW1vdmVLZXlzID0gbmV3IFNldChcbiAgICByZWNvcmRzVG9SZW1vdmUubWFwKHJlY29yZCA9PiBnZXRSZWNvcmRLZXkocmVjb3JkLCBvdXRwdXREUykpXG4gIClcbiAgXG4gIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgIGV2ZW50OiAncmVtb3ZlLWtleXMtYnVpbHQnLFxuICAgIGV4aXN0aW5nQWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGV4aXN0aW5nQWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCxcbiAgICByZW1vdmVLZXlzQ291bnQ6IHJlbW92ZUtleXMuc2l6ZVxuICB9KVxuICBcbiAgLy8gRmlsdGVyIG91dCByZWNvcmRzIHRoYXQgbWF0Y2gga2V5cyB0byByZW1vdmVcbiAgY29uc3QgcmVtYWluaW5nUmVjb3JkczogRmVhdHVyZURhdGFSZWNvcmRbXSA9IFtdXG4gIGNvbnN0IHJlbW92ZWRSZWNvcmRzOiBGZWF0dXJlRGF0YVJlY29yZFtdID0gW11cbiAgXG4gIGV4aXN0aW5nQWNjdW11bGF0ZWRSZWNvcmRzLmZvckVhY2gocmVjb3JkID0+IHtcbiAgICBjb25zdCBrZXkgPSBnZXRSZWNvcmRLZXkocmVjb3JkLCBvdXRwdXREUylcbiAgICBjb25zdCBzaG91bGRSZW1vdmUgPSByZW1vdmVLZXlzLmhhcyhrZXkpXG4gICAgXG4gICAgaWYgKHNob3VsZFJlbW92ZSkge1xuICAgICAgcmVtb3ZlZFJlY29yZHMucHVzaChyZWNvcmQpXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdyZWNvcmQtbWFya2VkLWZvci1yZW1vdmFsJyxcbiAgICAgICAga2V5LFxuICAgICAgICBvYmplY3RJZDogcmVjb3JkLmdldElkKCksXG4gICAgICAgIG9yaWdpbkRTSWQ6IChyZWNvcmQuZ2V0RGF0YVNvdXJjZT8uKCkgYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSk/LmdldE9yaWdpbkRhdGFTb3VyY2VzKCk/LlswXT8uaWQgfHwgJ3Vua25vd24nXG4gICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICByZW1haW5pbmdSZWNvcmRzLnB1c2gocmVjb3JkKVxuICAgIH1cbiAgfSlcbiAgXG4gIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgIGV2ZW50OiAncmVtb3ZhbC1jb21wbGV0ZScsXG4gICAgcmVjb3Jkc1JlbW92ZWQ6IHJlbW92ZWRSZWNvcmRzLmxlbmd0aCxcbiAgICByZW1haW5pbmdSZWNvcmRzQ291bnQ6IHJlbWFpbmluZ1JlY29yZHMubGVuZ3RoLFxuICAgIHJlY29yZHNUb1JlbW92ZUNvdW50OiByZWNvcmRzVG9SZW1vdmUubGVuZ3RoLFxuICAgIG1hdGNoZWRSZWNvcmRzQ291bnQ6IHJlbW92ZWRSZWNvcmRzLmxlbmd0aCxcbiAgICB1bm1hdGNoZWRSZWNvcmRzQ291bnQ6IHJlY29yZHNUb1JlbW92ZS5sZW5ndGggLSByZW1vdmVkUmVjb3Jkcy5sZW5ndGhcbiAgfSlcbiAgXG4gIHJldHVybiByZW1haW5pbmdSZWNvcmRzXG59XG5cbi8qKlxuICogUmVtb3ZlcyByZWNvcmRzIGZyb20gb3JpZ2luIGRhdGEgc291cmNlIHNlbGVjdGlvbnMuXG4gKiBHcm91cHMgcmVjb3JkcyBieSB0aGVpciBvcmlnaW4gZGF0YSBzb3VyY2UgYW5kIHVwZGF0ZXMgZWFjaCBvcmlnaW4gRFMncyBzZWxlY3Rpb24gc2VwYXJhdGVseS5cbiAqIFRoaXMgZW5zdXJlcyBtYXAgc2VsZWN0aW9uIGlzIHVwZGF0ZWQgY29ycmVjdGx5IHdoZW4gcmVjb3JkcyBjb21lIGZyb20gbXVsdGlwbGUgb3JpZ2luIGxheWVycy5cbiAqIEFsc28gcmVtb3ZlcyBncmFwaGljcyBmcm9tIGdyYXBoaWNzIGxheWVyIGlmIHVzaW5nIGdyYXBoaWNzIGxheWVyIGhpZ2hsaWdodGluZy5cbiAqIFxuICogQHBhcmFtIHdpZGdldElkIC0gVGhlIHdpZGdldCBJRCBmb3IgcHVibGlzaGluZyBtZXNzYWdlc1xuICogQHBhcmFtIHJlY29yZHNUb1JlbW92ZSAtIFJlY29yZHMgdG8gcmVtb3ZlIGZyb20gc2VsZWN0aW9uXG4gKiBAcGFyYW0gb3V0cHV0RFMgLSBUaGUgb3V0cHV0IGRhdGEgc291cmNlICh1c2VkIGZvciBrZXkgZ2VuZXJhdGlvbilcbiAqIEBwYXJhbSB1c2VHcmFwaGljc0xheWVyIC0gV2hldGhlciB0byByZW1vdmUgZ3JhcGhpY3MgZnJvbSBncmFwaGljcyBsYXllciAoZGVmYXVsdDogZmFsc2UpXG4gKiBAcGFyYW0gZ3JhcGhpY3NMYXllciAtIEdyYXBoaWNzIGxheWVyIGluc3RhbmNlIChyZXF1aXJlZCBpZiB1c2VHcmFwaGljc0xheWVyIGlzIHRydWUpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVSZWNvcmRzRnJvbU9yaWdpblNlbGVjdGlvbnMoXG4gIHdpZGdldElkOiBzdHJpbmcsXG4gIHJlY29yZHNUb1JlbW92ZTogRmVhdHVyZURhdGFSZWNvcmRbXSxcbiAgb3V0cHV0RFM6IEZlYXR1cmVMYXllckRhdGFTb3VyY2UsXG4gIHVzZUdyYXBoaWNzTGF5ZXI/OiBib29sZWFuLFxuICBncmFwaGljc0xheWVyPzogX19lc3JpLkdyYXBoaWNzTGF5ZXJcbik6IHZvaWQge1xuICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICBldmVudDogJ3JlbW92aW5nLXJlY29yZHMtZnJvbS1vcmlnaW4tc2VsZWN0aW9ucy1zdGFydCcsXG4gICAgd2lkZ2V0SWQsXG4gICAgcmVjb3Jkc1RvUmVtb3ZlQ291bnQ6IHJlY29yZHNUb1JlbW92ZS5sZW5ndGgsXG4gICAgb3V0cHV0RFNJZDogb3V0cHV0RFMuaWQsXG4gICAgdXNlR3JhcGhpY3NMYXllcjogISF1c2VHcmFwaGljc0xheWVyLFxuICAgIGhhc0dyYXBoaWNzTGF5ZXI6ICEhZ3JhcGhpY3NMYXllclxuICB9KVxuICBcbiAgaWYgKHJlY29yZHNUb1JlbW92ZS5sZW5ndGggPT09IDApIHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgIGV2ZW50OiAnbm8tcmVjb3Jkcy10by1yZW1vdmUtZnJvbS1zZWxlY3Rpb24nLFxuICAgICAgd2lkZ2V0SWRcbiAgICB9KVxuICAgIHJldHVyblxuICB9XG4gIFxuICAvLyBSZW1vdmUgZnJvbSBncmFwaGljcyBsYXllciBpZiB1c2luZyBncmFwaGljcyBsYXllciBoaWdobGlnaHRpbmdcbiAgaWYgKHVzZUdyYXBoaWNzTGF5ZXIgJiYgZ3JhcGhpY3NMYXllcikge1xuICAgIGNvbnN0IHJlY29yZElkc1RvUmVtb3ZlID0gcmVjb3Jkc1RvUmVtb3ZlLm1hcChyZWNvcmQgPT4gcmVjb3JkLmdldElkKCkpXG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICBldmVudDogJ3JlbW92aW5nLWdyYXBoaWNzLWZyb20tbGF5ZXInLFxuICAgICAgd2lkZ2V0SWQsXG4gICAgICByZWNvcmRJZHNDb3VudDogcmVjb3JkSWRzVG9SZW1vdmUubGVuZ3RoLFxuICAgICAgZ3JhcGhpY3NMYXllcklkOiBncmFwaGljc0xheWVyLmlkXG4gICAgfSlcbiAgICByZW1vdmVIaWdobGlnaHRHcmFwaGljcyhncmFwaGljc0xheWVyLCByZWNvcmRJZHNUb1JlbW92ZSlcbiAgfVxuICBcbiAgLy8gR3JvdXAgcmVjb3JkcyBieSB0aGVpciBvcmlnaW4gZGF0YSBzb3VyY2VcbiAgY29uc3QgcmVjb3Jkc0J5T3JpZ2luRFMgPSBuZXcgTWFwPEZlYXR1cmVMYXllckRhdGFTb3VyY2UsIEZlYXR1cmVEYXRhUmVjb3JkW10+KClcbiAgXG4gIHJlY29yZHNUb1JlbW92ZS5mb3JFYWNoKHJlY29yZCA9PiB7XG4gICAgY29uc3QgcmVjb3JkRFMgPSByZWNvcmQuZ2V0RGF0YVNvdXJjZT8uKCkgYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICAgIGxldCBvcmlnaW5EUzogRmVhdHVyZUxheWVyRGF0YVNvdXJjZSB8IG51bGwgPSBudWxsXG4gICAgXG4gICAgaWYgKHJlY29yZERTKSB7XG4gICAgICBvcmlnaW5EUyA9IHJlY29yZERTLmdldE9yaWdpbkRhdGFTb3VyY2VzKCk/LlswXSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlIHx8IHJlY29yZERTXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEZhbGxiYWNrOiB0cnkgdG8gZ2V0IG9yaWdpbiBmcm9tIG91dHB1dERTXG4gICAgICBvcmlnaW5EUyA9IG91dHB1dERTLmdldE9yaWdpbkRhdGFTb3VyY2VzKCk/LlswXSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlIHx8IG51bGxcbiAgICB9XG4gICAgXG4gICAgaWYgKG9yaWdpbkRTKSB7XG4gICAgICBpZiAoIXJlY29yZHNCeU9yaWdpbkRTLmhhcyhvcmlnaW5EUykpIHtcbiAgICAgICAgcmVjb3Jkc0J5T3JpZ2luRFMuc2V0KG9yaWdpbkRTLCBbXSlcbiAgICAgIH1cbiAgICAgIHJlY29yZHNCeU9yaWdpbkRTLmdldChvcmlnaW5EUykhLnB1c2gocmVjb3JkKVxuICAgIH1cbiAgfSlcbiAgXG4gIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgIGV2ZW50OiAncmVjb3Jkcy1ncm91cGVkLWJ5LW9yaWdpbicsXG4gICAgd2lkZ2V0SWQsXG4gICAgb3JpZ2luRFNDb3VudDogcmVjb3Jkc0J5T3JpZ2luRFMuc2l6ZSxcbiAgICByZWNvcmRzQnlPcmlnaW5EUzogQXJyYXkuZnJvbShyZWNvcmRzQnlPcmlnaW5EUy5lbnRyaWVzKCkpLm1hcCgoW2RzLCByZWNvcmRzXSkgPT4gKHtcbiAgICAgIG9yaWdpbkRTSWQ6IGRzLmlkLFxuICAgICAgcmVjb3JkQ291bnQ6IHJlY29yZHMubGVuZ3RoXG4gICAgfSkpXG4gIH0pXG4gIFxuICAvLyBGb3IgZWFjaCBvcmlnaW4gRFMsIGdldCBjdXJyZW50IHNlbGVjdGlvbiBhbmQgcmVtb3ZlIG1hdGNoaW5nIHJlY29yZHNcbiAgcmVjb3Jkc0J5T3JpZ2luRFMuZm9yRWFjaCgocmVjb3Jkc1RvUmVtb3ZlRm9yT3JpZ2luLCBvcmlnaW5EUykgPT4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBHZXQgY3VycmVudCBzZWxlY3RlZCByZWNvcmRzIGZyb20gdGhpcyBvcmlnaW4gRFNcbiAgICAgIGNvbnN0IGN1cnJlbnRTZWxlY3RlZFJlY29yZHMgPSBvcmlnaW5EUy5nZXRTZWxlY3RlZFJlY29yZHMoKSB8fCBbXVxuICAgICAgY29uc3QgY3VycmVudFNlbGVjdGVkSWRzID0gb3JpZ2luRFMuZ2V0U2VsZWN0ZWRSZWNvcmRJZHMoKSB8fCBbXVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdwcm9jZXNzaW5nLW9yaWdpbi1kcy1yZW1vdmFsJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICBjdXJyZW50U2VsZWN0ZWRDb3VudDogY3VycmVudFNlbGVjdGVkUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgIHJlY29yZHNUb1JlbW92ZUNvdW50OiByZWNvcmRzVG9SZW1vdmVGb3JPcmlnaW4ubGVuZ3RoXG4gICAgICB9KVxuICAgICAgXG4gICAgICAvLyBCdWlsZCBTZXQgb2YgSURzIHRvIHJlbW92ZSBmb3IgZmFzdCBsb29rdXBcbiAgICAgIGNvbnN0IGlkc1RvUmVtb3ZlID0gbmV3IFNldChcbiAgICAgICAgcmVjb3Jkc1RvUmVtb3ZlRm9yT3JpZ2luLm1hcChyZWNvcmQgPT4gcmVjb3JkLmdldElkKCkpXG4gICAgICApXG4gICAgICBcbiAgICAgIC8vIEZpbHRlciBvdXQgcmVjb3JkcyB0aGF0IG1hdGNoIElEcyB0byByZW1vdmVcbiAgICAgIGNvbnN0IHJlbWFpbmluZ1JlY29yZHMgPSBjdXJyZW50U2VsZWN0ZWRSZWNvcmRzLmZpbHRlcihyZWNvcmQgPT4ge1xuICAgICAgICBjb25zdCByZWNvcmRJZCA9IHJlY29yZC5nZXRJZCgpXG4gICAgICAgIHJldHVybiAhaWRzVG9SZW1vdmUuaGFzKHJlY29yZElkKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgY29uc3QgcmVtYWluaW5nSWRzID0gcmVtYWluaW5nUmVjb3Jkcy5tYXAocmVjb3JkID0+IHJlY29yZC5nZXRJZCgpKVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdvcmlnaW4tZHMtcmVtb3ZhbC1maWx0ZXJlZCcsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgcmVtb3ZlZENvdW50OiBjdXJyZW50U2VsZWN0ZWRSZWNvcmRzLmxlbmd0aCAtIHJlbWFpbmluZ1JlY29yZHMubGVuZ3RoLFxuICAgICAgICByZW1haW5pbmdDb3VudDogcmVtYWluaW5nUmVjb3Jkcy5sZW5ndGhcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIC8vIFVwZGF0ZSBzZWxlY3Rpb24gaW4gb3JpZ2luIERTXG4gICAgICBpZiAodHlwZW9mIG9yaWdpbkRTLnNlbGVjdFJlY29yZHNCeUlkcyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBvcmlnaW5EUy5zZWxlY3RSZWNvcmRzQnlJZHMocmVtYWluaW5nSWRzLCByZW1haW5pbmdSZWNvcmRzIGFzIEZlYXR1cmVEYXRhUmVjb3JkW10pXG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFB1Ymxpc2ggc2VsZWN0aW9uIGNoYW5nZSBtZXNzYWdlIGZvciB0aGlzIG9yaWdpbiBEU1xuICAgICAgTWVzc2FnZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5wdWJsaXNoTWVzc2FnZShcbiAgICAgICAgbmV3IERhdGFSZWNvcmRzU2VsZWN0aW9uQ2hhbmdlTWVzc2FnZSh3aWRnZXRJZCwgcmVtYWluaW5nUmVjb3JkcyBhcyBGZWF0dXJlRGF0YVJlY29yZFtdLCBbb3JpZ2luRFMuaWRdKVxuICAgICAgKVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdvcmlnaW4tZHMtc2VsZWN0aW9uLXVwZGF0ZWQnLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgIHJlbWFpbmluZ1JlY29yZHNDb3VudDogcmVtYWluaW5nUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgIG1lc3NhZ2VQdWJsaXNoZWQ6IHRydWVcbiAgICAgIH0pXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ29yaWdpbi1kcy1yZW1vdmFsLWVycm9yJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicsXG4gICAgICAgIGVycm9yU3RhY2s6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZFxuICAgICAgfSlcbiAgICB9XG4gIH0pXG4gIFxuICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICBldmVudDogJ3JlbW92aW5nLXJlY29yZHMtZnJvbS1vcmlnaW4tc2VsZWN0aW9ucy1jb21wbGV0ZScsXG4gICAgd2lkZ2V0SWQsXG4gICAgb3JpZ2luRFNDb3VudDogcmVjb3Jkc0J5T3JpZ2luRFMuc2l6ZSxcbiAgICB0b3RhbFJlY29yZHNSZW1vdmVkOiByZWNvcmRzVG9SZW1vdmUubGVuZ3RoXG4gIH0pXG59XG5cbi8qKlxuICogQ2xlYXJzIGFsbCByZWNvcmRzIGZyb20gdGhlIGFjY3VtdWxhdGVkIHJlc3VsdHMgZGF0YSBzb3VyY2UuXG4gKiBcbiAqIEBwYXJhbSBhY2N1bXVsYXRlZERTIC0gVGhlIGFjY3VtdWxhdGVkIHJlc3VsdHMgZGF0YSBzb3VyY2UgdG8gY2xlYXJcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyQWNjdW11bGF0ZWRSZXN1bHRzKFxuICBhY2N1bXVsYXRlZERTOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4pOiB2b2lkIHtcbiAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgZXZlbnQ6ICdjbGVhcmluZy1hY2N1bXVsYXRlZC1yZXN1bHRzJyxcbiAgICBhY2N1bXVsYXRlZERTSWQ6IGFjY3VtdWxhdGVkRFMuaWRcbiAgfSlcbiAgXG4gIC8vIFNldCBzdGF0dXMgdG8gTm90UmVhZHkgdG8gY2xlYXIgcmVjb3Jkc1xuICBhY2N1bXVsYXRlZERTLnNldFN0YXR1cyhEYXRhU291cmNlU3RhdHVzLk5vdFJlYWR5KVxuICBhY2N1bXVsYXRlZERTLnNldENvdW50U3RhdHVzKERhdGFTb3VyY2VTdGF0dXMuTm90UmVhZHkpXG4gIFxuICAvLyBDbGVhciBhbnkgbG9hZGVkIHJlY29yZHMgaWYgcG9zc2libGVcbiAgLy8gTm90ZTogTWF5IG5lZWQgdG8gdXNlIERhdGFTb3VyY2VNYW5hZ2VyIG1ldGhvZHMgZGVwZW5kaW5nIG9uIEV4QiBBUElcbiAgXG4gIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgIGV2ZW50OiAnYWNjdW11bGF0ZWQtcmVzdWx0cy1jbGVhcmVkJyxcbiAgICBhY2N1bXVsYXRlZERTSWQ6IGFjY3VtdWxhdGVkRFMuaWRcbiAgfSlcbn1cblxuIiwiLyoqXG4gKiBVdGlsaXR5IGZ1bmN0aW9ucyBmb3IgbWFuYWdpbmcgZmVhdHVyZSBzZWxlY3Rpb24gaW4gUXVlcnlTaW1wbGUgd2lkZ2V0LlxuICogQ29uc29saWRhdGVzIHJlcGVhdGVkIHNlbGVjdGlvbiBsb2dpYyB0byBmb2xsb3cgRFJZIHByaW5jaXBsZXMuXG4gKi9cblxuaW1wb3J0IHR5cGUgeyBEYXRhU291cmNlLCBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLCBGZWF0dXJlRGF0YVJlY29yZCB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IE1lc3NhZ2VNYW5hZ2VyLCBEYXRhUmVjb3Jkc1NlbGVjdGlvbkNoYW5nZU1lc3NhZ2UgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBhZGRIaWdobGlnaHRHcmFwaGljcyBhcyBhZGRHcmFwaGljc0xheWVyR3JhcGhpY3MsIGNsZWFyR3JhcGhpY3NMYXllciB9IGZyb20gJy4vZ3JhcGhpY3MtbGF5ZXItdXRpbHMnXG5pbXBvcnQgeyBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyIH0gZnJvbSAnd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24nXG5cbmNvbnN0IGRlYnVnTG9nZ2VyID0gY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlcigpXG5cbi8qKlxuICogQ3VzdG9tIGV2ZW50IG5hbWUgZm9yIFF1ZXJ5U2ltcGxlIHRvIG5vdGlmeSBXaWRnZXQgb2Ygc2VsZWN0aW9uIGNoYW5nZXMuXG4gKi9cbmV4cG9ydCBjb25zdCBRVUVSWVNJTVBMRV9TRUxFQ1RJT05fRVZFTlQgPSAncXVlcnlzaW1wbGUtc2VsZWN0aW9uLWNoYW5nZWQnXG5cbi8qKlxuICogRGlzcGF0Y2hlcyBhIGN1c3RvbSBzZWxlY3Rpb24gZXZlbnQgdG8gdGhlIHdpbmRvdyBzbyB0aGUgbWFpbiBXaWRnZXQgY2FuIHRyYWNrIHN0YXRlLlxuICogXG4gKiBAcGFyYW0gd2lkZ2V0SWQgLSBUaGUgd2lkZ2V0IElEXG4gKiBAcGFyYW0gcmVjb3JkSWRzIC0gQXJyYXkgb2Ygc2VsZWN0ZWQgcmVjb3JkIElEc1xuICogQHBhcmFtIG91dHB1dERTIC0gVGhlIG91dHB1dCBkYXRhIHNvdXJjZVxuICogQHBhcmFtIHF1ZXJ5SXRlbUNvbmZpZ0lkIC0gVGhlIGNvbmZpZyBJRCBvZiB0aGUgcXVlcnkgdGhhdCBwcm9kdWNlZCB0aGVzZSByZXN1bHRzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkaXNwYXRjaFNlbGVjdGlvbkV2ZW50KFxuICB3aWRnZXRJZDogc3RyaW5nLFxuICByZWNvcmRJZHM6IHN0cmluZ1tdLFxuICBvdXRwdXREUzogRGF0YVNvdXJjZSxcbiAgcXVlcnlJdGVtQ29uZmlnSWQ6IHN0cmluZ1xuKTogdm9pZCB7XG4gIGNvbnN0IG9yaWdpbkRTID0gZ2V0T3JpZ2luRGF0YVNvdXJjZShvdXRwdXREUylcbiAgY29uc3QgZGF0YVNvdXJjZUlkID0gb3JpZ2luRFM/LmlkXG4gIFxuICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgZXZlbnQ6ICdkaXNwYXRjaFNlbGVjdGlvbkV2ZW50JyxcbiAgICB3aWRnZXRJZCxcbiAgICByZWNvcmRDb3VudDogcmVjb3JkSWRzLmxlbmd0aCxcbiAgICBvdXRwdXREc0lkOiBvdXRwdXREUy5pZCxcbiAgICBxdWVyeUl0ZW1Db25maWdJZFxuICB9KVxuXG4gIGNvbnN0IHNlbGVjdGlvbkV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KFFVRVJZU0lNUExFX1NFTEVDVElPTl9FVkVOVCwge1xuICAgIGRldGFpbDoge1xuICAgICAgd2lkZ2V0SWQsXG4gICAgICByZWNvcmRJZHMsXG4gICAgICBkYXRhU291cmNlSWQsXG4gICAgICBvdXRwdXREc0lkOiBvdXRwdXREUy5pZCxcbiAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkXG4gICAgfSxcbiAgICBidWJibGVzOiB0cnVlLFxuICAgIGNhbmNlbGFibGU6IHRydWVcbiAgfSlcbiAgd2luZG93LmRpc3BhdGNoRXZlbnQoc2VsZWN0aW9uRXZlbnQpXG59XG5cbi8qKlxuICogR2V0cyB0aGUgb3JpZ2luIGRhdGEgc291cmNlIGZyb20gYW4gb3V0cHV0IGRhdGEgc291cmNlLlxuICogQHBhcmFtIG91dHB1dERTIC0gVGhlIG91dHB1dCBkYXRhIHNvdXJjZVxuICogQHJldHVybnMgVGhlIG9yaWdpbiBkYXRhIHNvdXJjZSwgb3IgbnVsbCBpZiBub3QgYXZhaWxhYmxlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRPcmlnaW5EYXRhU291cmNlKFxuICBvdXRwdXREUzogRGF0YVNvdXJjZSB8IG51bGwgfCB1bmRlZmluZWRcbik6IEZlYXR1cmVMYXllckRhdGFTb3VyY2UgfCBudWxsIHtcbiAgaWYgKCFvdXRwdXREUykgcmV0dXJuIG51bGxcbiAgXG4gIC8vIFRyeSB0byBnZXQgb3JpZ2luIGRhdGEgc291cmNlc1xuICBjb25zdCBvcmlnaW5EYXRhU291cmNlcyA9IHR5cGVvZiBvdXRwdXREUy5nZXRPcmlnaW5EYXRhU291cmNlcyA9PT0gJ2Z1bmN0aW9uJyBcbiAgICA/IG91dHB1dERTLmdldE9yaWdpbkRhdGFTb3VyY2VzKCkgXG4gICAgOiBbXVxuICAgIFxuICBpZiAob3JpZ2luRGF0YVNvdXJjZXMgJiYgb3JpZ2luRGF0YVNvdXJjZXMubGVuZ3RoID4gMCkge1xuICAgIHJldHVybiBvcmlnaW5EYXRhU291cmNlc1swXSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gIH1cbiAgXG4gIC8vIElmIGl0IGRvZXNuJ3QgaGF2ZSBvcmlnaW4gZGF0YSBzb3VyY2VzLCBpdCBtaWdodCBhbHJlYWR5IGJlIGFuIG9yaWdpbiBkYXRhIHNvdXJjZVxuICAvLyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlIHNob3VsZCBoYXZlIGEgJ2xheWVyJyBwcm9wZXJ0eSBvciAnZ2V0TGF5ZXInIG1ldGhvZFxuICBpZiAoKG91dHB1dERTIGFzIGFueSkubGF5ZXIgfHwgKG91dHB1dERTIGFzIGFueSkuZ2V0TGF5ZXIgfHwgKG91dHB1dERTIGFzIGFueSkudHlwZSA9PT0gJ0ZlYXR1cmVMYXllcicpIHtcbiAgICByZXR1cm4gb3V0cHV0RFMgYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICB9XG4gIFxuICByZXR1cm4gbnVsbFxufVxuXG4vKipcbiAqIFNlbGVjdHMgcmVjb3JkcyBpbiBib3RoIHRoZSBvcmlnaW4gZGF0YSBzb3VyY2UgYW5kIG91dHB1dCBkYXRhIHNvdXJjZS5cbiAqIFRoaXMgaXMgdGhlIHN0YW5kYXJkIHBhdHRlcm4gdXNlZCB0aHJvdWdob3V0IHRoZSB3aWRnZXQgZm9yIHNlbGVjdGlvbi5cbiAqIE9wdGlvbmFsbHkgdXNlcyBncmFwaGljcyBsYXllciBmb3IgaGlnaGxpZ2h0aW5nIChpbmRlcGVuZGVudCBvZiBsYXllciB2aXNpYmlsaXR5KS5cbiAqIFxuICogQHBhcmFtIG91dHB1dERTIC0gVGhlIG91dHB1dCBkYXRhIHNvdXJjZVxuICogQHBhcmFtIHJlY29yZElkcyAtIEFycmF5IG9mIHJlY29yZCBJRHMgdG8gc2VsZWN0XG4gKiBAcGFyYW0gcmVjb3JkcyAtIE9wdGlvbmFsIGFycmF5IG9mIEZlYXR1cmVEYXRhUmVjb3JkIG9iamVjdHMgZm9yIHByb3BlciBoaWdobGlnaHRpbmdcbiAqIEBwYXJhbSB1c2VHcmFwaGljc0xheWVyIC0gV2hldGhlciB0byB1c2UgZ3JhcGhpY3MgbGF5ZXIgZm9yIGhpZ2hsaWdodGluZyAoZGVmYXVsdDogZmFsc2UpXG4gKiBAcGFyYW0gZ3JhcGhpY3NMYXllciAtIEdyYXBoaWNzIGxheWVyIGluc3RhbmNlIChyZXF1aXJlZCBpZiB1c2VHcmFwaGljc0xheWVyIGlzIHRydWUpXG4gKiBAcGFyYW0gbWFwVmlldyAtIE1hcCB2aWV3IGluc3RhbmNlIChyZXF1aXJlZCBpZiB1c2VHcmFwaGljc0xheWVyIGlzIHRydWUpXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZWxlY3RSZWNvcmRzSW5EYXRhU291cmNlcyhcbiAgb3V0cHV0RFM6IERhdGFTb3VyY2UgfCBudWxsIHwgdW5kZWZpbmVkLFxuICByZWNvcmRJZHM6IHN0cmluZ1tdLFxuICByZWNvcmRzPzogRmVhdHVyZURhdGFSZWNvcmRbXSxcbiAgdXNlR3JhcGhpY3NMYXllcjogYm9vbGVhbiA9IGZhbHNlLFxuICBncmFwaGljc0xheWVyPzogX19lc3JpLkdyYXBoaWNzTGF5ZXIsXG4gIG1hcFZpZXc/OiBfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXdcbik6IFByb21pc2U8dm9pZD4ge1xuICBpZiAoIW91dHB1dERTKSByZXR1cm5cbiAgXG4gIGNvbnN0IG9yaWdpbkRTID0gZ2V0T3JpZ2luRGF0YVNvdXJjZShvdXRwdXREUylcbiAgXG4gIC8vIElmIHVzaW5nIGdyYXBoaWNzIGxheWVyLCBhZGQgZ3JhcGhpY3MgZm9yIGhpZ2hsaWdodGluZ1xuICBpZiAodXNlR3JhcGhpY3NMYXllciAmJiBncmFwaGljc0xheWVyICYmIG1hcFZpZXcgJiYgcmVjb3JkcyAmJiByZWNvcmRzLmxlbmd0aCA+IDApIHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgZXZlbnQ6ICdzZWxlY3RSZWNvcmRzSW5EYXRhU291cmNlcy11c2luZy1ncmFwaGljcy1sYXllcicsXG4gICAgICByZWNvcmRJZHNDb3VudDogcmVjb3JkSWRzLmxlbmd0aCxcbiAgICAgIHJlY29yZHNDb3VudDogcmVjb3Jkcy5sZW5ndGgsXG4gICAgICBncmFwaGljc0xheWVySWQ6IGdyYXBoaWNzTGF5ZXIuaWQsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIGF3YWl0IGFkZEdyYXBoaWNzTGF5ZXJHcmFwaGljcyhncmFwaGljc0xheWVyLCByZWNvcmRzLCBtYXBWaWV3KVxuICAgIFxuICAgIC8vIFN0aWxsIHNlbGVjdCBpbiBkYXRhIHNvdXJjZSBmb3Igc3RhdGUgbWFuYWdlbWVudCAoYnV0IGxheWVyIHNlbGVjdGlvbiB3b24ndCBzaG93IGlmIGxheWVyIGlzIG9mZilcbiAgICBpZiAob3JpZ2luRFMgJiYgdHlwZW9mIG9yaWdpbkRTLnNlbGVjdFJlY29yZHNCeUlkcyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgb3JpZ2luRFMuc2VsZWN0UmVjb3Jkc0J5SWRzKHJlY29yZElkcywgcmVjb3JkcylcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgLy8gT3JpZ2luYWwgYmVoYXZpb3I6IHVzZSBsYXllciBzZWxlY3Rpb25cbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgZXZlbnQ6ICdzZWxlY3RSZWNvcmRzSW5EYXRhU291cmNlcy11c2luZy1sYXllci1zZWxlY3Rpb24nLFxuICAgICAgcmVjb3JkSWRzQ291bnQ6IHJlY29yZElkcy5sZW5ndGgsXG4gICAgICB1c2VHcmFwaGljc0xheWVyLFxuICAgICAgaGFzR3JhcGhpY3NMYXllcjogISFncmFwaGljc0xheWVyLFxuICAgICAgaGFzTWFwVmlldzogISFtYXBWaWV3LFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICAvLyBTZWxlY3QgaW4gb3JpZ2luIGRhdGEgc291cmNlICh0aGUgYWN0dWFsIGxheWVyKVxuICAgIGlmIChvcmlnaW5EUyAmJiB0eXBlb2Ygb3JpZ2luRFMuc2VsZWN0UmVjb3Jkc0J5SWRzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAvLyBMb2cgbGF5ZXIgc3RhdGUgcmlnaHQgYmVmb3JlIHNlbGVjdGlvbiB0byBzZWUgd2hhdCdzIGF2YWlsYWJsZSB3aGVuIHNlbGVjdGlvbiB3b3Jrc1xuICAgICAgY29uc3QgbGF5ZXIgPSAob3JpZ2luRFMgYXMgYW55KS5sYXllciB8fCAob3JpZ2luRFMgYXMgYW55KS5nZXRMYXllcj8uKClcbiAgICAgIGlmIChsYXllcikge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgICAgIGV2ZW50OiAnc2VsZWN0UmVjb3Jkc0J5SWRzLWxheWVyLXN0YXRlJyxcbiAgICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgICBsYXllcklkOiBsYXllci5pZCxcbiAgICAgICAgICBoYXNMYXllck1hcDogISEobGF5ZXIgYXMgYW55KS5tYXAsXG4gICAgICAgICAgaGFzTGF5ZXJWaWV3OiAhIShsYXllciBhcyBhbnkpLnZpZXcsXG4gICAgICAgICAgaGFzTGF5ZXJQYXJlbnQ6ICEhKGxheWVyIGFzIGFueSkucGFyZW50LFxuICAgICAgICAgIHBhcmVudFR5cGU6IChsYXllciBhcyBhbnkpLnBhcmVudD8udHlwZSB8fCAnbm9uZScsXG4gICAgICAgICAgcGFyZW50SGFzTWFwOiAhIShsYXllciBhcyBhbnkpLnBhcmVudD8ubWFwLFxuICAgICAgICAgIHBhcmVudEhhc1ZpZXc6ICEhKGxheWVyIGFzIGFueSkucGFyZW50Py52aWV3LFxuICAgICAgICAgIHBhcmVudEhhc1ZpZXdzOiAhIShsYXllciBhcyBhbnkpLnBhcmVudD8udmlld3MsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgICBcbiAgICAgIG9yaWdpbkRTLnNlbGVjdFJlY29yZHNCeUlkcyhyZWNvcmRJZHMsIHJlY29yZHMpXG4gICAgfVxuICB9XG4gIFxuICAvLyBBbHdheXMgdXBkYXRlIG91dHB1dERTIGZvciB3aWRnZXQncyBpbnRlcm5hbCBzdGF0ZVxuICBpZiAodHlwZW9mIG91dHB1dERTLnNlbGVjdFJlY29yZHNCeUlkcyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIG91dHB1dERTLnNlbGVjdFJlY29yZHNCeUlkcyhyZWNvcmRJZHMsIHJlY29yZHMpXG4gIH1cbn1cblxuLyoqXG4gKiBDbGVhcnMgc2VsZWN0aW9uIGluIGJvdGggdGhlIG9yaWdpbiBkYXRhIHNvdXJjZSBhbmQgb3V0cHV0IGRhdGEgc291cmNlLlxuICogT3B0aW9uYWxseSBjbGVhcnMgZ3JhcGhpY3MgbGF5ZXIgaWYgdXNpbmcgZ3JhcGhpY3MgbGF5ZXIgbW9kZS5cbiAqIFxuICogQHBhcmFtIHdpZGdldElkIC0gVGhlIHdpZGdldCBJRCAobmVlZGVkIHRvIHB1Ymxpc2ggbWVzc2FnZSlcbiAqIEBwYXJhbSBvdXRwdXREUyAtIFRoZSBvdXRwdXQgZGF0YSBzb3VyY2VcbiAqIEBwYXJhbSB1c2VHcmFwaGljc0xheWVyIC0gV2hldGhlciB0byBjbGVhciBncmFwaGljcyBsYXllciAoZGVmYXVsdDogZmFsc2UpXG4gKiBAcGFyYW0gZ3JhcGhpY3NMYXllciAtIEdyYXBoaWNzIGxheWVyIGluc3RhbmNlIChyZXF1aXJlZCBpZiB1c2VHcmFwaGljc0xheWVyIGlzIHRydWUpXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjbGVhclNlbGVjdGlvbkluRGF0YVNvdXJjZXMgKFxuICB3aWRnZXRJZDogc3RyaW5nLFxuICBvdXRwdXREUzogRGF0YVNvdXJjZSB8IG51bGwgfCB1bmRlZmluZWQsXG4gIHVzZUdyYXBoaWNzTGF5ZXI6IGJvb2xlYW4gPSBmYWxzZSxcbiAgZ3JhcGhpY3NMYXllcj86IF9fZXNyaS5HcmFwaGljc0xheWVyXG4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgLy8gQ2xlYXIgZ3JhcGhpY3MgbGF5ZXIgaWYgdXNpbmcgZ3JhcGhpY3MgbGF5ZXIgbW9kZVxuICBpZiAodXNlR3JhcGhpY3NMYXllciAmJiBncmFwaGljc0xheWVyKSB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgIGV2ZW50OiAnY2xlYXJTZWxlY3Rpb25JbkRhdGFTb3VyY2VzLWNsZWFyaW5nLWdyYXBoaWNzLWxheWVyJyxcbiAgICAgIGdyYXBoaWNzTGF5ZXJJZDogZ3JhcGhpY3NMYXllci5pZCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgY2xlYXJHcmFwaGljc0xheWVyKGdyYXBoaWNzTGF5ZXIpXG4gIH1cblxuICAvLyBDbGVhciBkYXRhIHNvdXJjZSBzZWxlY3Rpb24gZm9yIHN0YXRlIG1hbmFnZW1lbnRcbiAgYXdhaXQgc2VsZWN0UmVjb3Jkc0luRGF0YVNvdXJjZXMob3V0cHV0RFMsIFtdLCB1bmRlZmluZWQsIGZhbHNlKVxuXG4gIC8vIFB1Ymxpc2ggdGhlIGVtcHR5IHNlbGVjdGlvbiBtZXNzYWdlIHNvIHRoZSBNYXAgc2VsZWN0aW9uIChibHVlIGJveGVzKSBjbGVhcnNcbiAgaWYgKG91dHB1dERTKSB7XG4gICAgcHVibGlzaFNlbGVjdGlvbk1lc3NhZ2Uod2lkZ2V0SWQsIFtdLCBvdXRwdXREUywgdHJ1ZSlcbiAgfVxufVxuXG4vKipcbiAqIFB1Ymxpc2hlcyBhIHNlbGVjdGlvbiBjaGFuZ2UgbWVzc2FnZSBmb3IgdGhlIGdpdmVuIHJlY29yZHMgYW5kIGRhdGEgc291cmNlcy5cbiAqIFxuICogQHBhcmFtIHdpZGdldElkIC0gVGhlIHdpZGdldCBJRFxuICogQHBhcmFtIHJlY29yZHMgLSBBcnJheSBvZiBGZWF0dXJlRGF0YVJlY29yZCBvYmplY3RzIChlbXB0eSBhcnJheSB0byBjbGVhcilcbiAqIEBwYXJhbSBvdXRwdXREUyAtIFRoZSBvdXRwdXQgZGF0YSBzb3VyY2VcbiAqIEBwYXJhbSBhbHNvUHVibGlzaFRvT3V0cHV0RFMgLSBXaGV0aGVyIHRvIGFsc28gcHVibGlzaCBhIG1lc3NhZ2UgZm9yIG91dHB1dERTIChkZWZhdWx0OiBmYWxzZSlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHB1Ymxpc2hTZWxlY3Rpb25NZXNzYWdlKFxuICB3aWRnZXRJZDogc3RyaW5nLFxuICByZWNvcmRzOiBGZWF0dXJlRGF0YVJlY29yZFtdLFxuICBvdXRwdXREUzogRGF0YVNvdXJjZSB8IG51bGwgfCB1bmRlZmluZWQsXG4gIGFsc29QdWJsaXNoVG9PdXRwdXREUzogYm9vbGVhbiA9IGZhbHNlXG4pOiB2b2lkIHtcbiAgaWYgKCFvdXRwdXREUykgcmV0dXJuXG4gIFxuICBjb25zdCBvcmlnaW5EUyA9IGdldE9yaWdpbkRhdGFTb3VyY2Uob3V0cHV0RFMpXG4gIFxuICBpZiAob3JpZ2luRFMpIHtcbiAgICBNZXNzYWdlTWFuYWdlci5nZXRJbnN0YW5jZSgpLnB1Ymxpc2hNZXNzYWdlKFxuICAgICAgbmV3IERhdGFSZWNvcmRzU2VsZWN0aW9uQ2hhbmdlTWVzc2FnZSh3aWRnZXRJZCwgcmVjb3JkcywgW29yaWdpbkRTLmlkXSlcbiAgICApXG4gIH0gZWxzZSBpZiAoYWxzb1B1Ymxpc2hUb091dHB1dERTKSB7XG4gICAgTWVzc2FnZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5wdWJsaXNoTWVzc2FnZShcbiAgICAgIG5ldyBEYXRhUmVjb3Jkc1NlbGVjdGlvbkNoYW5nZU1lc3NhZ2Uod2lkZ2V0SWQsIHJlY29yZHMsIFtvdXRwdXREUy5pZF0pXG4gICAgKVxuICB9XG4gIFxuICAvLyBPcHRpb25hbGx5IHB1Ymxpc2ggdG8gb3V0cHV0RFMgYXMgd2VsbCAoZm9yIHNvbWUgZWRnZSBjYXNlcylcbiAgaWYgKGFsc29QdWJsaXNoVG9PdXRwdXREUyAmJiBvcmlnaW5EUykge1xuICAgIE1lc3NhZ2VNYW5hZ2VyLmdldEluc3RhbmNlKCkucHVibGlzaE1lc3NhZ2UoXG4gICAgICBuZXcgRGF0YVJlY29yZHNTZWxlY3Rpb25DaGFuZ2VNZXNzYWdlKHdpZGdldElkLCByZWNvcmRzLCBbb3V0cHV0RFMuaWRdKVxuICAgIClcbiAgfVxufVxuXG4vKipcbiAqIFNlbGVjdHMgcmVjb3JkcyBhbmQgcHVibGlzaGVzIHRoZSBzZWxlY3Rpb24gbWVzc2FnZSBpbiBvbmUgY2FsbC5cbiAqIFRoaXMgaXMgdGhlIG1vc3QgY29tbW9uIHBhdHRlcm4gLSBzZWxlY3RpbmcgcmVjb3JkcyBhbmQgbm90aWZ5aW5nIHRoZSBtYXAuXG4gKiBPcHRpb25hbGx5IHVzZXMgZ3JhcGhpY3MgbGF5ZXIgZm9yIGhpZ2hsaWdodGluZyAoaW5kZXBlbmRlbnQgb2YgbGF5ZXIgdmlzaWJpbGl0eSkuXG4gKiBcbiAqIEBwYXJhbSB3aWRnZXRJZCAtIFRoZSB3aWRnZXQgSURcbiAqIEBwYXJhbSBvdXRwdXREUyAtIFRoZSBvdXRwdXQgZGF0YSBzb3VyY2VcbiAqIEBwYXJhbSByZWNvcmRJZHMgLSBBcnJheSBvZiByZWNvcmQgSURzIHRvIHNlbGVjdFxuICogQHBhcmFtIHJlY29yZHMgLSBBcnJheSBvZiBGZWF0dXJlRGF0YVJlY29yZCBvYmplY3RzIGZvciBwcm9wZXIgaGlnaGxpZ2h0aW5nXG4gKiBAcGFyYW0gYWxzb1B1Ymxpc2hUb091dHB1dERTIC0gV2hldGhlciB0byBhbHNvIHB1Ymxpc2ggYSBtZXNzYWdlIGZvciBvdXRwdXREUyAoZGVmYXVsdDogZmFsc2UpXG4gKiBAcGFyYW0gdXNlR3JhcGhpY3NMYXllciAtIFdoZXRoZXIgdG8gdXNlIGdyYXBoaWNzIGxheWVyIGZvciBoaWdobGlnaHRpbmcgKGRlZmF1bHQ6IGZhbHNlKVxuICogQHBhcmFtIGdyYXBoaWNzTGF5ZXIgLSBHcmFwaGljcyBsYXllciBpbnN0YW5jZSAocmVxdWlyZWQgaWYgdXNlR3JhcGhpY3NMYXllciBpcyB0cnVlKVxuICogQHBhcmFtIG1hcFZpZXcgLSBNYXAgdmlldyBpbnN0YW5jZSAocmVxdWlyZWQgaWYgdXNlR3JhcGhpY3NMYXllciBpcyB0cnVlKVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2VsZWN0UmVjb3Jkc0FuZFB1Ymxpc2goXG4gIHdpZGdldElkOiBzdHJpbmcsXG4gIG91dHB1dERTOiBEYXRhU291cmNlIHwgbnVsbCB8IHVuZGVmaW5lZCxcbiAgcmVjb3JkSWRzOiBzdHJpbmdbXSxcbiAgcmVjb3JkczogRmVhdHVyZURhdGFSZWNvcmRbXSxcbiAgYWxzb1B1Ymxpc2hUb091dHB1dERTOiBib29sZWFuID0gZmFsc2UsXG4gIHVzZUdyYXBoaWNzTGF5ZXI6IGJvb2xlYW4gPSBmYWxzZSxcbiAgZ3JhcGhpY3NMYXllcj86IF9fZXNyaS5HcmFwaGljc0xheWVyLFxuICBtYXBWaWV3PzogX19lc3JpLk1hcFZpZXcgfCBfX2VzcmkuU2NlbmVWaWV3XG4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgYXdhaXQgc2VsZWN0UmVjb3Jkc0luRGF0YVNvdXJjZXMob3V0cHV0RFMsIHJlY29yZElkcywgcmVjb3JkcywgdXNlR3JhcGhpY3NMYXllciwgZ3JhcGhpY3NMYXllciwgbWFwVmlldylcbiAgcHVibGlzaFNlbGVjdGlvbk1lc3NhZ2Uod2lkZ2V0SWQsIHJlY29yZHMsIG91dHB1dERTLCBhbHNvUHVibGlzaFRvT3V0cHV0RFMpXG59XG5cbi8qKlxuICogRmluZHMgdGhlIFwiQ2xlYXIgcmVzdWx0c1wiIGJ1dHRvbiBpbiB0aGUgRE9NLlxuICogVXNlZCB3aGVuIHByb2dyYW1tYXRpY2FsbHkgdHJpZ2dlcmluZyB0aGUgY2xlYXIgYWN0aW9uLlxuICogXG4gKiBAcmV0dXJucyBUaGUgY2xlYXIgYnV0dG9uIGVsZW1lbnQsIG9yIG51bGwgaWYgbm90IGZvdW5kXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmaW5kQ2xlYXJSZXN1bHRzQnV0dG9uKCk6IEhUTUxCdXR0b25FbGVtZW50IHwgbnVsbCB7XG4gIC8vIEhhcmRlbmVkOiBQcmlvcml0aXplIHRoZSBvbmUgaW4gdGhlIHJlc3VsdHMgaGVhZGVyLCBmYWxsYmFjayB0byBhbnlcbiAgcmV0dXJuIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucXVlcnktcmVzdWx0X19oZWFkZXIgYnV0dG9uW2FyaWEtbGFiZWw9XCJDbGVhciByZXN1bHRzXCJdJykgfHwgXG4gICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYnV0dG9uW2FyaWEtbGFiZWw9XCJDbGVhciByZXN1bHRzXCJdJykpIGFzIEhUTUxCdXR0b25FbGVtZW50IHwgbnVsbFxufVxuXG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7XG4gIFJlYWN0LFxuICBqc3gsXG4gIGNzcyxcbiAgY2xhc3NOYW1lcyxcbiAgdHlwZSBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLFxuICB0eXBlIEltbXV0YWJsZU9iamVjdCxcbiAgdHlwZSBEYXRhUmVjb3JkLFxuICB0eXBlIEZlYXR1cmVEYXRhUmVjb3JkXG59IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IHR5cGUgUXVlcnlJdGVtVHlwZSwgTGlzdERpcmVjdGlvbiB9IGZyb20gJy4uL2NvbmZpZydcbmltcG9ydCB7IFF1ZXJ5UmVzdWx0SXRlbSB9IGZyb20gJy4vcXVlcnktcmVzdWx0LWl0ZW0nXG5pbXBvcnQgeyBnZXRQb3B1cFRlbXBsYXRlIH0gZnJvbSAnLi9xdWVyeS11dGlscydcbmltcG9ydCB7IHVzZUF1dG9IZWlnaHQgfSBmcm9tICcuL3VzZUF1dG9IZWlnaHQnXG5pbXBvcnQgeyBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyIH0gZnJvbSAnd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24nXG5cbmNvbnN0IGRlYnVnTG9nZ2VyID0gY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlcigpXG5cbmV4cG9ydCBpbnRlcmZhY2UgU2ltcGxlTGlzdFByb3BzIHtcbiAgd2lkZ2V0SWQ6IHN0cmluZ1xuICBxdWVyeUl0ZW06IEltbXV0YWJsZU9iamVjdDxRdWVyeUl0ZW1UeXBlPlxuICBvdXRwdXREUzogRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICByZWNvcmRzOiBEYXRhUmVjb3JkW11cbiAgZGlyZWN0aW9uOiBMaXN0RGlyZWN0aW9uXG4gIG9uRXNjYXBlOiAoKSA9PiB2b2lkXG4gIG9uU2VsZWN0Q2hhbmdlOiAoZGF0YTogRmVhdHVyZURhdGFSZWNvcmQpID0+IHZvaWRcbiAgb25SZW1vdmU6IChkYXRhOiBGZWF0dXJlRGF0YVJlY29yZCkgPT4gdm9pZFxuICBleHBhbmRCeURlZmF1bHQ/OiBib29sZWFuXG4gIGl0ZW1FeHBhbmRTdGF0ZXM/OiBNYXA8c3RyaW5nLCBib29sZWFuPlxuICByZW1vdmVkUmVjb3JkSWRzPzogU2V0PHN0cmluZz5cbiAgb25SZW5kZXJEb25lPzogKG9wdGlvbnM6IHsgZGF0YUl0ZW1zOiBhbnlbXSB9KSA9PiB2b2lkXG59XG5cbmNvbnN0IGdldFN0eWxlID0gKGlzQXV0b0hlaWdodDogYm9vbGVhbikgPT4ge1xuICByZXR1cm4gY3NzYFxuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleDogMSAxICR7aXNBdXRvSGVpZ2h0ID8gJ2F1dG8nIDogMH07XG4gICAgb3ZlcmZsb3c6IGF1dG87XG4gICAgbWF4LWhlaWdodDogJHtpc0F1dG9IZWlnaHQgPyAnY2FsYyg2MS44dmggLSAxMDBweCknIDogJ25vbmUnfTtcblxuICAgIC5xdWVyeS1yZXN1bHQtaXRlbSArIC5xdWVyeS1yZXN1bHQtaXRlbSB7XG4gICAgICBtYXJnaW4tbGVmdDogMC41cmVtO1xuICAgICAgbWFyZ2luLXRvcDogMDtcbiAgICB9XG5cbiAgICAmLnZlcnRpY2FsIHtcbiAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAubGlzdC1pdGVtcyB7XG4gICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgIH1cblxuICAgICAgLmZlYXR1cmUtaW5mby1jb21wb25lbnQge1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgIH1cblxuICAgICAgLnF1ZXJ5LXJlc3VsdC1pdGVtICsgLnF1ZXJ5LXJlc3VsdC1pdGVtIHtcbiAgICAgICAgbWFyZ2luLWxlZnQ6IDA7XG4gICAgICAgIG1hcmdpbi10b3A6IDAuNXJlbTtcbiAgICAgIH1cbiAgICB9XG4gICAgLmxpc3QtaXRlbXMge1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICB9XG4gIGBcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIFNpbXBsZUxpc3QgKHByb3BzOiBTaW1wbGVMaXN0UHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIHdpZGdldElkLFxuICAgIG91dHB1dERTLFxuICAgIHF1ZXJ5SXRlbSxcbiAgICByZWNvcmRzLFxuICAgIGRpcmVjdGlvbixcbiAgICBvbkVzY2FwZSxcbiAgICBvblNlbGVjdENoYW5nZSxcbiAgICBvblJlbW92ZSxcbiAgICBleHBhbmRCeURlZmF1bHQsXG4gICAgaXRlbUV4cGFuZFN0YXRlcyxcbiAgICByZW1vdmVkUmVjb3JkSWRzLFxuICAgIG9uUmVuZGVyRG9uZVxuICB9ID0gcHJvcHNcbiAgXG4gIGNvbnN0IFtwb3B1cFRlbXBsYXRlLCBzZXRQb3B1cFRlbXBsYXRlXSA9IFJlYWN0LnVzZVN0YXRlPGFueT4oKVxuICBjb25zdCBbZGVmYXVsdFBvcHVwVGVtcGxhdGUsIHNldERlZmF1bHRQb3B1cFRlbXBsYXRlXSA9IFJlYWN0LnVzZVN0YXRlPGFueT4oKVxuICBjb25zdCBpc0F1dG9IZWlnaHQgPSB1c2VBdXRvSGVpZ2h0KClcbiAgY29uc3QgcmVzdWx0Q29udGFpbmVyUmVmID0gUmVhY3QudXNlUmVmPEhUTUxEaXZFbGVtZW50PihudWxsKVxuXG4gIC8vIEZpbHRlciBvdXQgcmVtb3ZlZCByZWNvcmRzXG4gIGNvbnN0IGZpbHRlcmVkUmVjb3JkcyA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgIHJldHVybiByZWNvcmRzPy5maWx0ZXIocmVjb3JkID0+ICFyZW1vdmVkUmVjb3JkSWRzPy5oYXMocmVjb3JkLmdldElkKCkpKSB8fCBbXVxuICB9LCBbcmVjb3JkcywgcmVtb3ZlZFJlY29yZElkc10pXG5cbiAgLy8gTm90aWZ5IHBhcmVudCB3aGVuIHJlY29yZHMgYXJlIHJlbmRlcmVkIChmb3IgYXV0by1zd2l0Y2ggbG9naWMpXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKG9uUmVuZGVyRG9uZSAmJiBmaWx0ZXJlZFJlY29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAnU2ltcGxlTGlzdC1vblJlbmRlckRvbmUtY2FsbGVkJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBxdWVyeUl0ZW0uY29uZmlnSWQsXG4gICAgICAgIGZpbHRlcmVkUmVjb3Jkc0NvdW50OiBmaWx0ZXJlZFJlY29yZHMubGVuZ3RoLFxuICAgICAgICB0b3RhbFJlY29yZHNDb3VudDogcmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgIHJlbW92ZWRSZWNvcmRJZHNDb3VudDogcmVtb3ZlZFJlY29yZElkcz8uc2l6ZSB8fCAwLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICBvblJlbmRlckRvbmUoeyBkYXRhSXRlbXM6IGZpbHRlcmVkUmVjb3JkcyB9KVxuICAgIH1cbiAgfSwgW2ZpbHRlcmVkUmVjb3Jkcywgb25SZW5kZXJEb25lLCB3aWRnZXRJZCwgcXVlcnlJdGVtLmNvbmZpZ0lkLCByZWNvcmRzLmxlbmd0aCwgcmVtb3ZlZFJlY29yZElkc10pXG5cbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBnZXRQb3B1cFRlbXBsYXRlKG91dHB1dERTLCBxdWVyeUl0ZW0pLnRoZW4ocnMgPT4ge1xuICAgICAgc2V0UG9wdXBUZW1wbGF0ZShycy5wb3B1cFRlbXBsYXRlKVxuICAgICAgc2V0RGVmYXVsdFBvcHVwVGVtcGxhdGUocnMuZGVmYXVsdFBvcHVwVGVtcGxhdGUpXG4gICAgfSlcbiAgfSwgW291dHB1dERTLCBxdWVyeUl0ZW1dKVxuXG4gIGNvbnN0IGhhbmRsZUtleVVwID0gUmVhY3QudXNlQ2FsbGJhY2soKGV2dCkgPT4ge1xuICAgIGlmIChldnQua2V5ID09PSAnRXNjYXBlJykge1xuICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpXG4gICAgICBvbkVzY2FwZSgpXG4gICAgfVxuICB9LCBbb25Fc2NhcGVdKVxuXG4gIGNvbnN0IGhhbmRsZUtleURvd24gPSBSZWFjdC51c2VDYWxsYmFjaygoZXZ0KSA9PiB7XG4gICAgaWYgKGV2dC5rZXkgPT09ICcgJykge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KClcbiAgICB9XG4gIH0sIFtdKVxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBcbiAgICAgIG9uS2V5VXA9e2hhbmRsZUtleVVwfSBcbiAgICAgIG9uS2V5RG93bj17aGFuZGxlS2V5RG93bn0gXG4gICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZXMoeyB2ZXJ0aWNhbDogZGlyZWN0aW9uID09PSBMaXN0RGlyZWN0aW9uLlZlcnRpY2FsIH0pfSBcbiAgICAgIGNzcz17Z2V0U3R5bGUoaXNBdXRvSGVpZ2h0KX1cbiAgICAgIHJlZj17cmVzdWx0Q29udGFpbmVyUmVmfVxuICAgID5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdsaXN0LWl0ZW1zIHB4LTQgcHktMScgcm9sZT0nbGlzdGJveCc+XG4gICAgICAgIHtmaWx0ZXJlZFJlY29yZHMubWFwKChkYXRhSXRlbSkgPT4ge1xuICAgICAgICAgIGNvbnN0IHJlY29yZElkID0gZGF0YUl0ZW0uZ2V0SWQoKVxuICAgICAgICAgIC8vIFVzZSBpbmRpdmlkdWFsIHN0YXRlIGZyb20gbWFwIGlmIGF2YWlsYWJsZSwgb3RoZXJ3aXNlIGZhbGwgYmFjayB0byBleHBhbmRCeURlZmF1bHRcbiAgICAgICAgICBjb25zdCBpbmRpdmlkdWFsRXhwYW5kU3RhdGUgPSBpdGVtRXhwYW5kU3RhdGVzPy5nZXQocmVjb3JkSWQpXG4gICAgICAgICAgY29uc3QgZXhwYW5kQnlEZWZhdWx0VmFsdWUgPSBpbmRpdmlkdWFsRXhwYW5kU3RhdGUgIT09IHVuZGVmaW5lZCA/IGluZGl2aWR1YWxFeHBhbmRTdGF0ZSA6IChleHBhbmRCeURlZmF1bHQgPz8gdHJ1ZSlcbiAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPFF1ZXJ5UmVzdWx0SXRlbVxuICAgICAgICAgICAgICBrZXk9e3JlY29yZElkfVxuICAgICAgICAgICAgICBkYXRhPXtkYXRhSXRlbSBhcyBGZWF0dXJlRGF0YVJlY29yZH1cbiAgICAgICAgICAgICAgZGF0YVNvdXJjZT17b3V0cHV0RFN9XG4gICAgICAgICAgICAgIHdpZGdldElkPXt3aWRnZXRJZH1cbiAgICAgICAgICAgICAgcG9wdXBUZW1wbGF0ZT17cG9wdXBUZW1wbGF0ZX1cbiAgICAgICAgICAgICAgZGVmYXVsdFBvcHVwVGVtcGxhdGU9e2RlZmF1bHRQb3B1cFRlbXBsYXRlfVxuICAgICAgICAgICAgICBleHBhbmRCeURlZmF1bHQ9e2V4cGFuZEJ5RGVmYXVsdFZhbHVlfVxuICAgICAgICAgICAgICBvbkNsaWNrPXtvblNlbGVjdENoYW5nZX1cbiAgICAgICAgICAgICAgb25SZW1vdmU9e29uUmVtb3ZlfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICApXG4gICAgICAgIH0pfVxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIClcbn1cblxuIiwiZXhwb3J0IGRlZmF1bHQge1xuICBfd2lkZ2V0TGFiZWw6ICdRdWVyeVNpbXBsZScsXG4gIHJlc2V0OiAnUmVzZXQnLFxuICBzZWFyY2hMYXllcjogJ1NlYXJjaCBMYXllcicsXG4gIGFwcGx5OiAnU2VhcmNoJyxcbiAgbm9EYXRhQXZhaWxhYmxlOiAnRXJyb3IgaW4gbG9hZGluZyBkYXRhJyxcbiAgbm9RdWVyeUl0ZW06ICdObyBxdWVyeScsXG4gIG5ld1F1ZXJ5SGludDogJ0FkZCBjb250ZW50IGJ5IGNsaWNraW5nIHRoZSBcIntsYWJlbH1cIiBidXR0b24gb24gdGhlIGNvbmZpZ3VyYXRpb24gcGFuZWwnLFxuICBhdHRyaWJ1dGVGaWx0ZXI6ICdBdHRyaWJ1dGUgZmlsdGVyJyxcbiAgc3BhdGlhbEZpbHRlcjogJ1NwYXRpYWwgZmlsdGVyJyxcbiAgc3BhdGlhbEZpbHRlclR5cGVfQ3VycmVudE1hcEV4dGVudDogJ0N1cnJlbnQgbWFwIGV4dGVudCcsXG4gIHNwYXRpYWxGaWx0ZXJUeXBlX0ludGVyYWN0aXZlRHJhd01vZGU6ICdEcmF3biBncmFwaGljJyxcbiAgcmVzdWx0czogJ1Jlc3VsdHMnLFxuICBmZWF0dXJlc0Rpc3BsYXllZDogJ0ZlYXR1cmVzIGRpc3BsYXllZCcsXG4gIGNsZWFyUmVzdWx0OiAnQ2xlYXIgcmVzdWx0cycsXG4gIGNoZWNrUmVzdWx0OiAnQ2hlY2sgcmVzdWx0cycsXG4gIG1hcE11c3RCZVZpc2libGU6ICdNYXAgbXVzdCBiZSB2aXNpYmxlJyxcbiAgY2hvb3NlRmlsdGVyVHlwZTogJ0Nob29zZSB0aGUgZmlsdGVyIHR5cGUnLFxuICBjaG9vc2VHZW9tZXRyeVR5cGU6ICdDaG9vc2UgdGhlIGdlb21ldHJ5IHR5cGUnLFxuICBjbGVhckRyYXdpbmc6ICdDbGVhciB0aGUgZ3JhcGhpYyB3aGVuIGFwcGx5aW5nJyxcbiAgZmVhdHVyZUZyb21EczogJ1NlbGVjdGluZyBmZWF0dXJlcyBmcm9tIGRhdGEgc291cmNlJyxcbiAgZmVhdHVyZUZyb21NYXA6ICdHZW9tZXRyaWVzIGZyb20gYSBtYXAnLFxuICBjaG9vc2VGaWx0ZXJMYXllcjogJ0Nob29zZSBhIGZpbHRlciBsYXllcicsXG4gIHNlbGVjdGVkUmVjb3JkczogJ3tudW19IHJlY29yZHMgYXJlIHNlbGVjdGVkIGZvciB0aGUgZmlsdGVyJyxcbiAgc3BhdGlhbE5vdEF2YWlsYWJsZTogJ1NwYXRpYWwgZmlsdGVyIGlzIG5vdCBhdmFpbGFibGUgaGVyZS4nLFxuICBzcGF0aWFsTm90QXZhaWxhYmxlRGVzYzogJ1NwYXRpYWwgZmlsdGVyIGlzIG5vdCBzdXBwb3J0ZWQgZm9yIGEgZGF0YSBzb3VyY2UgdGhhdCBhbHJlYWR5IGNvbnRhaW5zIGEgc3BhdGlhbCBxdWVyeS4nLFxuICBwcmVjb25maWd1cmVkOiAnUHJlY29uZmlndXJlZCcsXG4gIHJ1bnRpbWU6ICdSdW50aW1lJyxcbiAgc2VsZWN0TG9hZGVkOiAnU2VsZWN0IGxvYWRlZCcsXG4gIHJldHJpZXZpbmc6ICdSZXRyaWV2aW5nIHF1ZXJ5IHJlc3VsdHMuLi4nLFxuICB6b29tVG9TZWxlY3RlZDogJ1pvb20gdG8gc2VsZWN0ZWQnLFxuICBxdWVyeVRhYjogJ1F1ZXJ5JyxcbiAgcmVzdWx0c1RhYjogJ1Jlc3VsdHMnLFxuICBleHBhbmRBbGw6ICdFeHBhbmQgYWxsJyxcbiAgY29sbGFwc2VBbGw6ICdDb2xsYXBzZSBhbGwnLFxuICBhZGRUb01hcDogJ0FkZCB0byBtYXAnLFxuICByZXN1bHRzTW9kZTogJ1Jlc3VsdHMgbW9kZScsXG4gIGNyZWF0ZU5ld1Jlc3VsdHM6ICdDcmVhdGUgbmV3IHJlc3VsdHMnLFxuICBhZGRUb0N1cnJlbnRSZXN1bHRzOiAnQWRkIHRvIGN1cnJlbnQgcmVzdWx0cycsXG4gIHJlbW92ZUZyb21DdXJyZW50UmVzdWx0czogJ1JlbW92ZSBmcm9tIGN1cnJlbnQgcmVzdWx0cycsXG4gIHJlc3VsdHNNb2RlRGlzYWJsZWRSZW1vdmU6ICdSZW1vdmUgZnJvbSBjdXJyZW50IHJlc3VsdHMgKG5vIGFjY3VtdWxhdGVkIHJlc3VsdHMpJyxcbiAgcmVzdWx0c01vZGVEZXNjOiAnQ29udHJvbHMgaG93IHF1ZXJ5IHJlc3VsdHMgYXJlIGNvbWJpbmVkOlxcbuKAoiBOZXc6IEVhY2ggcXVlcnkgcmVwbGFjZXMgcHJldmlvdXMgcmVzdWx0c1xcbuKAoiBBZGQ6IE5ldyByZXN1bHRzIGFyZSBhZGRlZCB0byBleGlzdGluZyByZXN1bHRzXFxu4oCiIFJlbW92ZTogTWF0Y2hpbmcgcmVzdWx0cyBhcmUgcmVtb3ZlZCBmcm9tIGV4aXN0aW5nIHJlc3VsdHMnLFxuICByZXN1bHRzTW9kZU5ldzogJ05ldycsXG4gIHJlc3VsdHNNb2RlQWRkOiAnQWRkJyxcbiAgcmVzdWx0c01vZGVSZW1vdmU6ICdSZW1vdmUnXG59XG5cblxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQgeyBSZWFjdCwgUmVhY3RSZWR1eCwgdHlwZSBJTVN0YXRlIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgTGF5b3V0SXRlbVNpemVNb2RlcyB9IGZyb20gJ2ppbXUtbGF5b3V0cy9sYXlvdXQtcnVudGltZSdcbmltcG9ydCB7IFF1ZXJ5V2lkZ2V0Q29udGV4dCB9IGZyb20gJy4vd2lkZ2V0LWNvbnRleHQnXG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VBdXRvSGVpZ2h0ICgpIHtcbiAgY29uc3QgbGF5b3V0SW5mbyA9IFJlYWN0LnVzZUNvbnRleHQoUXVlcnlXaWRnZXRDb250ZXh0KVxuICBsZXQgbGF5b3V0SWRcbiAgbGV0IGxheW91dEl0ZW1JZFxuICBpZiAobGF5b3V0SW5mby5pbmNsdWRlcygnOicpKSB7XG4gICAgY29uc3QgciA9IGxheW91dEluZm8uc3BsaXQoJzonKVxuICAgIGxheW91dElkID0gclswXVxuICAgIGxheW91dEl0ZW1JZCA9IHJbMV1cbiAgfVxuICBjb25zdCBpc0F1dG8gPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xuICAgIGNvbnN0IGxheW91dEl0ZW0gPSBzdGF0ZS5hcHBDb25maWcubGF5b3V0c1tsYXlvdXRJZF0/LmNvbnRlbnQ/LltsYXlvdXRJdGVtSWRdXG4gICAgcmV0dXJuIGxheW91dEl0ZW0/LnNldHRpbmc/LmF1dG9Qcm9wcz8uaGVpZ2h0ID09PSBMYXlvdXRJdGVtU2l6ZU1vZGVzLkF1dG9cbiAgfSlcblxuICByZXR1cm4gaXNBdXRvXG59XG5cblxuIiwiaW1wb3J0IGljb25XYXJuaW5nIGZyb20gJ2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL3N1Z2dlc3RlZC93YXJuaW5nLnN2ZydcbmltcG9ydCBpY29uRXJyb3IgZnJvbSAnamltdS1pY29ucy9zdmcvb3V0bGluZWQvc3VnZ2VzdGVkL2Vycm9yLnN2ZydcbmltcG9ydCBhcnJvd05hdkJhY2sgZnJvbSAnamltdS1pY29ucy9zdmcvb3V0bGluZWQvZGlyZWN0aW9uYWwvYXJyb3ctbGVmdC5zdmcnXG5pbXBvcnQgYXJyb3dSaWdodCBmcm9tICdqaW11LWljb25zL3N2Zy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9yaWdodC5zdmcnXG5pbXBvcnQgdG9vbERlbGV0ZSBmcm9tICdqaW11LWljb25zL3N2Zy9vdXRsaW5lZC9lZGl0b3IvdHJhc2guc3ZnJ1xuaW1wb3J0IGljb25Nb3JlIGZyb20gJ2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2FwcGxpY2F0aW9uL21vcmUtaG9yaXpvbnRhbC5zdmcnXG5cbmV4cG9ydCBjb25zdCBnZXRXaWRnZXRSdW50aW1lRGF0YU1hcCA9ICgpID0+ICh7XG4gIGljb25NYXA6IHtcbiAgICBpY29uUXVlcnk6IHJlcXVpcmUoJy4uLy4uL2ljb24uc3ZnJyksXG4gICAgaWNvbldhcm5pbmcsXG4gICAgaWNvbkVycm9yLFxuICAgIGFycm93TmF2QmFjayxcbiAgICBhcnJvd1JpZ2h0LFxuICAgIHRvb2xEZWxldGUsXG4gICAgaWNvbk1vcmVcbiAgfVxufSlcblxuXG5cbiIsImltcG9ydCB7IFJlYWN0IH0gZnJvbSAnamltdS1jb3JlJ1xuXG5leHBvcnQgY29uc3QgUXVlcnlXaWRnZXRDb250ZXh0ID0gUmVhY3QuY3JlYXRlQ29udGV4dDxzdHJpbmc+KG51bGwpXG5cblxuIiwiaW1wb3J0IHsgQmFzZVZlcnNpb25NYW5hZ2VyIH0gZnJvbSAnamltdS1jb3JlJ1xuXG5jbGFzcyBWZXJzaW9uTWFuYWdlciBleHRlbmRzIEJhc2VWZXJzaW9uTWFuYWdlciB7XG4gIHZlcnNpb25zID0gW3tcbiAgICB2ZXJzaW9uOiAnMS4wLjAnLFxuICAgIGRlc2NyaXB0aW9uOiAnVGhlIGZpcnN0IHZlcnNpb24uJyxcbiAgICB1cGdyYWRlcjogKG9sZENvbmZpZykgPT4ge1xuICAgICAgcmV0dXJuIG9sZENvbmZpZ1xuICAgIH1cbiAgfV1cbn1cblxuZXhwb3J0IGNvbnN0IHZlcnNpb25NYW5hZ2VyID0gbmV3IFZlcnNpb25NYW5hZ2VyKClcblxuXG5cbiIsIi8qKlxuICogV2lkZ2V0IHZlcnNpb24gbnVtYmVyLlxuICogQmFzZSB2ZXJzaW9uIG1hdGNoZXMgRXhwZXJpZW5jZSBCdWlsZGVyIHZlcnNpb24gKDEuMTkuMCkuXG4gKiBSZWxlYXNlIG51bWJlciBpbmNyZW1lbnRzIG9uIG1ham9yIGNoYW5nZXMgKDAwMSwgMDAyLCAwMDMsIC4uLikuXG4gKiBNaW5vciB2ZXJzaW9uIGluY3JlbWVudHMgb24gc21hbGxlciBmaXhlcyBiZXR3ZWVuIG1ham9yIHJlbGVhc2VzIChyMDE1LjEsIHIwMTUuMiwgLi4uKS5cbiAqIFxuICogVG8gaW5jcmVtZW50OlxuICogLSBNYWpvciBjaGFuZ2U6IFVwZGF0ZSBSRUxFQVNFX05VTUJFUiAoZS5nLiwgMDE1IC0+IDAxNikgYW5kIHJlc2V0IE1JTk9SX1ZFUlNJT04gdG8gMFxuICogLSBNaW5vciBmaXg6IEluY3JlbWVudCBNSU5PUl9WRVJTSU9OIChlLmcuLCAxIC0+IDIpIHdoaWxlIGtlZXBpbmcgc2FtZSBSRUxFQVNFX05VTUJFUlxuICovXG5jb25zdCBCQVNFX1ZFUlNJT04gPSAnMS4xOS4wJ1xuY29uc3QgUkVMRUFTRV9OVU1CRVIgPSAnMDE3JyAvLyBJbmNyZW1lbnQgb24gbWFqb3IgY2hhbmdlcyAoMDAxLCAwMDIsIDAwMywgLi4uKVxuY29uc3QgTUlOT1JfVkVSU0lPTiA9ICc0OCcgLy8gSW5jcmVtZW50IG9uIG1pbm9yIGZpeGVzIGJldHdlZW4gbWFqb3IgcmVsZWFzZXMgKDEsIDIsIDMsIC4uLilcblxuZXhwb3J0IGNvbnN0IFdJREdFVF9WRVJTSU9OID0gTUlOT1JfVkVSU0lPTiAmJiBNSU5PUl9WRVJTSU9OICE9PSAnMCdcbiAgPyBgJHtCQVNFX1ZFUlNJT059LXIke1JFTEVBU0VfTlVNQkVSfS4ke01JTk9SX1ZFUlNJT059YFxuICA6IGAke0JBU0VfVkVSU0lPTn0tciR7UkVMRUFTRV9OVU1CRVJ9YFxuXG4iLCIvKipcbiAqIFNoYXJlZCBjb21tb24gdXRpbGl0aWVzIGFuZCBjb21wb25lbnRzIGZvciBFeHBlcmllbmNlIEJ1aWxkZXIgd2lkZ2V0c1xuICogXG4gKiBUaGlzIG1vZHVsZSBleHBvcnRzIGNvbW1vbiBmdW5jdGlvbmFsaXR5IHRoYXQgY2FuIGJlIHNoYXJlZCBiZXR3ZWVuXG4gKiBxdWVyeS1zaW1wbGUsIGhlbHBlci1zaW1wbGUsIGFuZCBvdGhlciBjdXN0b20gd2lkZ2V0cy5cbiAqIFxuICogVGhpcyBpcyB0aGUgZW50cnkgcG9pbnQgZm9yICd3aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbidcbiAqL1xuXG5leHBvcnQgKiBmcm9tICcuL2NvbW1vbi9jb21tb24tY29tcG9uZW50cydcbmV4cG9ydCAqIGZyb20gJy4vY29tbW9uL3V0aWxzJ1xuZXhwb3J0ICogZnJvbSAnLi9jb21tb24vdXNlLWRzLWV4aXN0cydcbmV4cG9ydCAqIGZyb20gJy4vY29tbW9uL2RhdGEtc291cmNlLXRpcCdcbmV4cG9ydCAqIGZyb20gJy4vY29tbW9uL2RlYnVnLWxvZ2dlcidcblxuXG5cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHsgUmVhY3QsIGpzeCwgY3NzIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgQnV0dG9uLCBNb2RhbCwgTW9kYWxCb2R5LCBNb2RhbEZvb3RlciwgUGFuZWxIZWFkZXIsIEljb24sIHR5cGUgVGhlbWVQcm9wcyB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQgeyB3aXRoVGhlbWUgfSBmcm9tICdqaW11LXRoZW1lJ1xuaW1wb3J0IGljb25FcnJvciBmcm9tICdqaW11LWljb25zL3N2Zy9vdXRsaW5lZC9zdWdnZXN0ZWQvZXJyb3Iuc3ZnJ1xuY29uc3QgeyB1c2VTdGF0ZSB9ID0gUmVhY3RcblxuLyoqXG4gKiBBIHNpbXBsZSBGdW5jdGlvbmFsIENvbXBvbmVudCBzdG9yaW5nIHNvbWUgU3RhdGVzIHRoYXQgYXJlIGNvbW1vbmx5IHVzZWRcbiAqL1xuZXhwb3J0IGNvbnN0IFN0YXRlSG9sZGVyID0gKHByb3BzKSA9PiB7XG4gIGNvbnN0IHsgaW5pdFN0YXRlID0ge30sIGNoaWxkcmVuIH0gPSBwcm9wc1xuICBjb25zdCBkZWZhdWx0U3RhdGVNYXAgPSB7XG4gICAgdmlzaWJsZTogdHJ1ZSxcbiAgICByZWZDb250YWluZXI6IG51bGxcbiAgfVxuICBjb25zdCB1c2VTdGF0ZU1hcCA9IHtcbiAgICB2aXNpYmxlOiB1c2VTdGF0ZSgndmlzaWJsZScgaW4gaW5pdFN0YXRlID8gaW5pdFN0YXRlLnZpc2libGUgOiBkZWZhdWx0U3RhdGVNYXAudmlzaWJsZSksXG4gICAgcmVmQ29udGFpbmVyOiB1c2VTdGF0ZSgncmVmQ29udGFpbmVyJyBpbiBpbml0U3RhdGUgPyBpbml0U3RhdGUucmVmQ29udGFpbmVyIDogZGVmYXVsdFN0YXRlTWFwLnJlZkNvbnRhaW5lciksXG4gICAgY3VzdG9tRGF0YTogdXNlU3RhdGUoeyAuLi5pbml0U3RhdGUuY3VzdG9tRGF0YSB9KVxuICB9XG4gIHJldHVybiA8UmVhY3QuRnJhZ21lbnQ+e2NoaWxkcmVuKHVzZVN0YXRlTWFwKX08L1JlYWN0LkZyYWdtZW50PlxufVxuXG5leHBvcnQgaW50ZXJmYWNlIERpYWxvZ1BhbmVsUHJvcHMge1xuICBwYW5lbFZpc2libGU6IGJvb2xlYW5cbiAgc2V0UGFuZWxWaXNpYmxlOiAodmlzaWJsZTogYm9vbGVhbikgPT4gdm9pZFxuICBnZXRJMThuTWVzc2FnZTogKGlkOiBzdHJpbmcpID0+IGFueVxuICBpc01vZGFsPzogYm9vbGVhblxuICB0aXRsZT86IGFueVxuICBib2R5Q29udGVudD86IGFueVxuICBoYXNIZWFkZXI/OiBib29sZWFuXG4gIGhhc0Zvb3Rlcj86IGJvb2xlYW5cbn1cblxuLyoqXG4gKiBBIGRpYWxvZyBwb3B1cFxuICovXG5leHBvcnQgY29uc3QgRGlhbG9nUGFuZWwgPSB3aXRoVGhlbWUoKHByb3BzOiBEaWFsb2dQYW5lbFByb3BzICYgVGhlbWVQcm9wcykgPT4ge1xuICBjb25zdCB7IHRoZW1lLCBwYW5lbFZpc2libGUsIHNldFBhbmVsVmlzaWJsZSwgZ2V0STE4bk1lc3NhZ2UsIGlzTW9kYWwgPSB0cnVlLCB0aXRsZSA9IGdldEkxOG5NZXNzYWdlKCdxdWVyeU1lc3NhZ2UnKSwgYm9keUNvbnRlbnQgPSAnJywgaGFzSGVhZGVyID0gdHJ1ZSwgaGFzRm9vdGVyID0gdHJ1ZSB9ID0gcHJvcHNcbiAgY29uc3QgdG9nZ2xlID0gKCkgPT4geyBzZXRQYW5lbFZpc2libGUoZmFsc2UpIH1cbiAgY29uc3QgZ2V0Q29udGVudCA9ICgpID0+IDxSZWFjdC5GcmFnbWVudD5cbiAgICB7XG4gICAgICBoYXNIZWFkZXIgJiZcbiAgICAgICAgPFBhbmVsSGVhZGVyIGNsYXNzTmFtZT0ncHktMicgdGl0bGU9e3RpdGxlfSBvbkNsb3NlPXt0b2dnbGV9IC8+XG4gICAgfVxuICAgIDxNb2RhbEJvZHk+e2JvZHlDb250ZW50fTwvTW9kYWxCb2R5PlxuICAgIHtcbiAgICAgIGhhc0Zvb3RlciAmJlxuICAgICAgICA8TW9kYWxGb290ZXI+XG4gICAgICAgICAgPEJ1dHRvbiBvbkNsaWNrPXt0b2dnbGV9PntnZXRJMThuTWVzc2FnZSgnb2snKX08L0J1dHRvbj5cbiAgICAgICAgPC9Nb2RhbEZvb3Rlcj5cbiAgICB9XG4gIDwvUmVhY3QuRnJhZ21lbnQ+XG4gIGNvbnN0IGdlbmVyYWxDbGFzc05hbWUgPSAndWktdW5pdC1kaWFsb2ctcGFuZWwnXG4gIGNvbnN0IHJlbmRlck1vZGFsQ29udGVudCA9ICgpID0+IHtcbiAgICByZXR1cm4gKFxuICAgICAgPE1vZGFsIGNsYXNzTmFtZT17Z2VuZXJhbENsYXNzTmFtZX0gaXNPcGVuPXtwYW5lbFZpc2libGV9IHRvZ2dsZT17dG9nZ2xlfSBiYWNrZHJvcD0nc3RhdGljJz5cbiAgICAgICAge2dldENvbnRlbnQoKX1cbiAgICAgIDwvTW9kYWw+XG4gICAgKVxuICB9XG4gIGNvbnN0IHJlbmRlck5vbk1vZGFsQ29udGVudCA9ICgpID0+IHtcbiAgICBjb25zdCBnZXRTdHlsZSA9ICgpID0+IGNzc2BcbiAgICAgICYudWktdW5pdC1kaWFsb2ctcGFuZWwubW9kYWwtZGlhbG9nIHtcbiAgICAgICAgbWFyZ2luOiAwO1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgLm1vZGFsLWNvbnRlbnQge1xuICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICR7dGhlbWUucmVmLnBhbGV0dGUubmV1dHJhbFs2MDBdfTtcbiAgICAgICAgICBjb2xvcjogJHt0aGVtZS5yZWYucGFsZXR0ZS5ibGFja307XG4gICAgICAgICAgZm9udC1zaXplOiAuNzVyZW07XG4gICAgICAgICAgZm9udC13ZWlnaHQ6IDQwMDtcbiAgICAgICAgICBib3JkZXI6IG5vbmU7XG4gICAgICAgICAgLnBhbmVsLWhlYWRlciB7XG4gICAgICAgICAgICBmb250LXNpemU6IC44MTI1cmVtO1xuICAgICAgICAgICAgcGFkZGluZzogLjYyNXJlbTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLm1vZGFsLWJvZHkge1xuICAgICAgICAgICAgcGFkZGluZzogMCAuNjI1cmVtIC43NXJlbTtcbiAgICAgICAgICAgIHdoaXRlLXNwYWNlOiBub3JtYWw7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgYFxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT17YCR7Z2VuZXJhbENsYXNzTmFtZX0gbW9kYWwtZGlhbG9nICR7cGFuZWxWaXNpYmxlID8gJycgOiAnY29sbGFwc2UnfWB9IGNzcz17Z2V0U3R5bGUoKX0+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSdtb2RhbC1jb250ZW50Jz5cbiAgICAgICAgICB7Z2V0Q29udGVudCgpfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIClcbiAgfVxuICByZXR1cm4gaXNNb2RhbCA/IHJlbmRlck1vZGFsQ29udGVudCgpIDogcmVuZGVyTm9uTW9kYWxDb250ZW50KClcbn0pXG5cbmV4cG9ydCBlbnVtIEVudGl0eVN0YXR1c1R5cGUge1xuICBOb25lID0gJycsXG4gIEluaXQgPSAnaW5pdCcsXG4gIExvYWRpbmcgPSAnbG9hZGluZycsXG4gIExvYWRlZCA9ICdsb2FkZWQnLFxuICBXYXJuaW5nID0gJ3dhcm5pbmcnLFxuICBFcnJvciA9ICdlcnJvcicsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RhdHVzSW5kaWNhdG9yUHJvcHMge1xuICBjbGFzc05hbWU/OiBzdHJpbmdcbiAgc3RhdHVzVHlwZT86IEVudGl0eVN0YXR1c1R5cGVcbiAgdGl0bGU/OiBzdHJpbmdcbn1cblxuLyoqXG4gKiBBbiBhbmltYXRhYmxlIGljb24gcmVwcmVzZW50aW5nIHN0YXR1c1xuICovXG5leHBvcnQgY29uc3QgU3RhdHVzSW5kaWNhdG9yID0gd2l0aFRoZW1lKChwcm9wczogU3RhdHVzSW5kaWNhdG9yUHJvcHMgJiBUaGVtZVByb3BzKSA9PiB7XG4gIGNvbnN0IHsgdGhlbWUsIGNsYXNzTmFtZSwgdGl0bGUsIHN0YXR1c1R5cGUgfSA9IHByb3BzXG4gIGNvbnN0IGdldFN0eWxlID0gKCkgPT4gY3NzYFxuICAgICYudWktdW5pdC1zdGF0dXMtaW5kaWNhdG9yIHtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAmLnVpLXVuaXQtc3RhdHVzLWluZGljYXRvcl9zdGF0dXMtdHlwZS1sb2FkaW5nIHtcbiAgICAgICAgJjpiZWZvcmUge1xuICAgICAgICAgIEBrZXlmcmFtZXMgbG9hZGluZyB7XG4gICAgICAgICAgICAwJSB7dHJhbnNmb3JtOiByb3RhdGUoMGRlZyk7IH07XG4gICAgICAgICAgICAxMDAlIHt0cmFuc2Zvcm06IHJvdGF0ZSgzNjBkZWcpfTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29udGVudDogJyc7XG4gICAgICAgICAgd2lkdGg6IDFyZW07XG4gICAgICAgICAgaGVpZ2h0OiAxcmVtO1xuICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICR7dGhlbWU/LnJlZi5wYWxldHRlPy5uZXV0cmFsPy5bNTAwXX07XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlO1xuICAgICAgICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCAke3RoZW1lPy5zeXMuY29sb3I/LnByaW1hcnk/Lm1haW59O1xuICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gICAgICAgICAgYW5pbWF0aW9uOiBsb2FkaW5nIDJzIGluZmluaXRlIGxpbmVhcjtcbiAgICAgICAgICBtYXJnaW4tcmlnaHQ6IC4yNXJlbTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgYFxuICByZXR1cm4gKFxuICAgIHN0YXR1c1R5cGUgJiZcbiAgICAgIDxkaXYgY2xhc3NOYW1lPXtgJHtjbGFzc05hbWUgPz8gJyd9IHVpLXVuaXQtc3RhdHVzLWluZGljYXRvciB1aS11bml0LXN0YXR1cy1pbmRpY2F0b3Jfc3RhdHVzLXR5cGUtJHtzdGF0dXNUeXBlfWB9IHRpdGxlPXt0aXRsZX0gY3NzPXtnZXRTdHlsZSgpfSAvPlxuICApXG59KVxuXG5leHBvcnQgaW50ZXJmYWNlIEVycm9yTWVzc2FnZVByb3BzIHtcbiAgZXJyb3I6IHN0cmluZyB8IG51bGxcbiAgY2xhc3NOYW1lPzogc3RyaW5nXG4gIG9uRGlzbWlzcz86ICgpID0+IHZvaWRcbn1cblxuLyoqXG4gKiBTaW1wbGUgZXJyb3IgbWVzc2FnZSBjb21wb25lbnQgZm9yIGRpc3BsYXlpbmcgdXNlci1mYWNpbmcgZXJyb3JzLlxuICogVXNlIERhdGFTb3VyY2VUaXAgZm9yIGRhdGEgc291cmNlLXJlbGF0ZWQgZXJyb3JzLlxuICovXG5leHBvcnQgY29uc3QgRXJyb3JNZXNzYWdlID0gKHByb3BzOiBFcnJvck1lc3NhZ2VQcm9wcykgPT4ge1xuICBjb25zdCB7IGVycm9yLCBjbGFzc05hbWUgPSAnJywgb25EaXNtaXNzIH0gPSBwcm9wc1xuICBcbiAgaWYgKCFlcnJvcikge1xuICAgIHJldHVybiBudWxsXG4gIH1cbiAgXG4gIGNvbnN0IGVycm9yU3R5bGUgPSBjc3NgXG4gICAgZGlzcGxheTogZmxleDtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIHBhZGRpbmc6IDAuNXJlbTtcbiAgICBtYXJnaW46IDAuNXJlbSAwO1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXN5cy1jb2xvci1lcnJvci1saWdodCk7XG4gICAgY29sb3I6IHZhcigtLXN5cy1jb2xvci1lcnJvci1kYXJrKTtcbiAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgZm9udC1zaXplOiAwLjg3NXJlbTtcbiAgICBnYXA6IDAuNXJlbTtcbiAgICBcbiAgICAuZXJyb3ItaWNvbiB7XG4gICAgICBmbGV4LXNocmluazogMDtcbiAgICB9XG4gICAgXG4gICAgLmVycm9yLXRleHQge1xuICAgICAgZmxleDogMTtcbiAgICB9XG4gICAgXG4gICAgLmVycm9yLWRpc21pc3Mge1xuICAgICAgZmxleC1zaHJpbms6IDA7XG4gICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICBwYWRkaW5nOiAwLjI1cmVtO1xuICAgICAgJjpob3ZlciB7XG4gICAgICAgIG9wYWNpdHk6IDAuNztcbiAgICAgIH1cbiAgICB9XG4gIGBcbiAgXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9e2BlcnJvci1tZXNzYWdlICR7Y2xhc3NOYW1lfWB9IGNzcz17ZXJyb3JTdHlsZX0gcm9sZT1cImFsZXJ0XCI+XG4gICAgICA8SWNvbiBpY29uPXtpY29uRXJyb3J9IGNsYXNzTmFtZT1cImVycm9yLWljb25cIiBzaXplPVwic21cIiAvPlxuICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZXJyb3ItdGV4dFwiPntlcnJvcn08L3NwYW4+XG4gICAgICB7b25EaXNtaXNzICYmIChcbiAgICAgICAgPEJ1dHRvbiBcbiAgICAgICAgICBzaXplPVwic21cIiBcbiAgICAgICAgICB0eXBlPVwidGVydGlhcnlcIiBcbiAgICAgICAgICBpY29uIFxuICAgICAgICAgIG9uQ2xpY2s9e29uRGlzbWlzc31cbiAgICAgICAgICBjbGFzc05hbWU9XCJlcnJvci1kaXNtaXNzXCJcbiAgICAgICAgICBhcmlhLWxhYmVsPVwiRGlzbWlzcyBlcnJvclwiXG4gICAgICAgID5cbiAgICAgICAgICA8SWNvbiBpY29uPXtyZXF1aXJlKCdqaW11LWljb25zL3N2Zy9vdXRsaW5lZC9lZGl0b3IvY2xvc2Uuc3ZnJykuZGVmYXVsdH0gc2l6ZT1cInNtXCIgLz5cbiAgICAgICAgPC9CdXR0b24+XG4gICAgICApfVxuICAgIDwvZGl2PlxuICApXG59XG5cblxuXG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7XG4gIFJlYWN0LFxuICBqc3gsXG4gIGdldEFwcFN0b3JlLFxuICBEYXRhU291cmNlQ29tcG9uZW50LFxuICB0eXBlIERhdGFTb3VyY2UsXG4gIHR5cGUgVXNlRGF0YVNvdXJjZSxcbiAgYXBwQ29uZmlnVXRpbHMsXG4gIHR5cGUgSU1EYXRhU291cmNlSW5mbyxcbiAgRGF0YVNvdXJjZVN0YXR1cyxcbiAgdHlwZSBJbW11dGFibGVPYmplY3QsXG4gIGhvb2tzXG59IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IEljb24sIFRvb2x0aXAsIEJ1dHRvbiwgZGVmYXVsdE1lc3NhZ2VzIH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB7IEVudGl0eVN0YXR1c1R5cGUsIFN0YXR1c0luZGljYXRvciB9IGZyb20gJy4vY29tbW9uLWNvbXBvbmVudHMnXG5pbXBvcnQgaWNvbldhcm5pbmcgZnJvbSAnamltdS1pY29ucy9zdmcvb3V0bGluZWQvc3VnZ2VzdGVkL3dhcm5pbmcuc3ZnJ1xuaW1wb3J0IGljb25FcnJvciBmcm9tICdqaW11LWljb25zL3N2Zy9vdXRsaW5lZC9zdWdnZXN0ZWQvZXJyb3Iuc3ZnJ1xuaW1wb3J0IHsgdXNlRGF0YVNvdXJjZUV4aXN0cyB9IGZyb20gJy4vdXNlLWRzLWV4aXN0cydcblxuaW50ZXJmYWNlIENvbnRlbnRQcm9wcyB7XG4gIHdpZGdldElkOiBzdHJpbmdcbiAgdXNlRGF0YVNvdXJjZTogSW1tdXRhYmxlT2JqZWN0PFVzZURhdGFTb3VyY2U+XG4gIG9uU3RhdHVzQ2hhbmdlPzogKGVuYWJsZWQ6IGJvb2xlYW4pID0+IHZvaWRcbiAgb25EYXRhU291cmNlQ3JlYXRlZD86IChkczogRGF0YVNvdXJjZSkgPT4gdm9pZFxuICBzaG93TWVzc2FnZT86IGJvb2xlYW5cbn1cblxuLyoqXG4gKiBTaG93IGljb24gYW5kIG1lc3NhZ2UgaWYgdGhlIGRhdGEgc291cmNlIGRvZXNuJ3Qgd29yay5cbiAqIEBwYXJhbSBwcm9wc1xuICogQHJldHVybnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIERhdGFTb3VyY2VUaXAgKHByb3BzOiBDb250ZW50UHJvcHMpIHtcbiAgY29uc3QgeyB3aWRnZXRJZCwgdXNlRGF0YVNvdXJjZSwgb25TdGF0dXNDaGFuZ2UsIG9uRGF0YVNvdXJjZUNyZWF0ZWQsIHNob3dNZXNzYWdlID0gZmFsc2UgfSA9IHByb3BzXG4gIGNvbnN0IGdldEkxOG5NZXNzYWdlID0gaG9va3MudXNlVHJhbnNsYXRpb24oZGVmYXVsdE1lc3NhZ2VzKVxuICBjb25zdCBkc0V4aXN0czogYm9vbGVhbiA9IHVzZURhdGFTb3VyY2VFeGlzdHMoeyB3aWRnZXRJZCwgdXNlRGF0YVNvdXJjZUlkOiB1c2VEYXRhU291cmNlLmRhdGFTb3VyY2VJZCB9KVxuICBjb25zdCBbZHNTdGF0dXMsIHNldERzU3RhdHVzXSA9IFJlYWN0LnVzZVN0YXRlPCdlcnJvcicgfCAnd2FybmluZycgfCAnY3JlYXRpbmcnPihudWxsKVxuICBjb25zdCBbZGF0YVNvdXJjZSwgc2V0RGF0YVNvdXJjZV0gPSBSZWFjdC51c2VTdGF0ZTxEYXRhU291cmNlPihudWxsKVxuXG4gIGNvbnN0IGhhbmRsZURzSW5mb0NoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKChpbmZvOiBJTURhdGFTb3VyY2VJbmZvKSA9PiB7XG4gICAgaWYgKGluZm8pIHtcbiAgICAgIGNvbnN0IHsgc3RhdHVzLCBpbnN0YW5jZVN0YXR1cyB9ID0gaW5mb1xuICAgICAgaWYgKGluc3RhbmNlU3RhdHVzID09PSBEYXRhU291cmNlU3RhdHVzLk5vdENyZWF0ZWQpIHtcbiAgICAgICAgc2V0RHNTdGF0dXMoJ2NyZWF0aW5nJylcbiAgICAgICAgb25TdGF0dXNDaGFuZ2U/LihmYWxzZSlcbiAgICAgIH0gZWxzZSBpZiAoaW5zdGFuY2VTdGF0dXMgPT09IERhdGFTb3VyY2VTdGF0dXMuQ3JlYXRlRXJyb3IgfHwgc3RhdHVzID09PSBEYXRhU291cmNlU3RhdHVzLkxvYWRFcnJvcikge1xuICAgICAgICBzZXREc1N0YXR1cygnZXJyb3InKVxuICAgICAgICBvblN0YXR1c0NoYW5nZT8uKGZhbHNlKVxuICAgICAgfSBlbHNlIGlmIChzdGF0dXMgPT09IERhdGFTb3VyY2VTdGF0dXMuTm90UmVhZHkpIHtcbiAgICAgICAgc2V0RHNTdGF0dXMoJ3dhcm5pbmcnKVxuICAgICAgICBvblN0YXR1c0NoYW5nZT8uKGZhbHNlKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2V0RHNTdGF0dXMobnVsbClcbiAgICAgICAgb25TdGF0dXNDaGFuZ2U/Lih0cnVlKVxuICAgICAgfVxuICAgIH1cbiAgfSwgW29uU3RhdHVzQ2hhbmdlXSlcblxuICBjb25zdCBoYW5kbGVEc0NyZWF0ZWQgPSBSZWFjdC51c2VDYWxsYmFjaygoZHM6IERhdGFTb3VyY2UpID0+IHtcbiAgICBzZXREYXRhU291cmNlKGRzKVxuICAgIG9uRGF0YVNvdXJjZUNyZWF0ZWQ/LihkcylcbiAgfSwgW29uRGF0YVNvdXJjZUNyZWF0ZWRdKVxuXG4gIGNvbnN0IGhhbmRsZURzQ3JlYXRlRmFpbGVkID0gUmVhY3QudXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHNldERhdGFTb3VyY2UobnVsbClcbiAgICBzZXREc1N0YXR1cygnZXJyb3InKVxuICAgIG9uU3RhdHVzQ2hhbmdlPy4oZmFsc2UpXG4gIH0sIFtvblN0YXR1c0NoYW5nZV0pXG5cbiAgbGV0IHN0YXR1c0ljb25cbiAgbGV0IHN0YXR1c01zZ1xuICBsZXQgY29sb3JcbiAgaWYgKGRzU3RhdHVzID09PSAnY3JlYXRpbmcnKSB7XG4gICAgc3RhdHVzSWNvbiA9IGljb25FcnJvclxuICAgIHN0YXR1c01zZyA9IGdldEkxOG5NZXNzYWdlKCdsb2FkaW5nJylcbiAgfSBlbHNlIGlmICghZHNFeGlzdHMgfHwgZHNTdGF0dXMgPT09ICdlcnJvcicpIHtcbiAgICBzdGF0dXNJY29uID0gaWNvbkVycm9yXG4gICAgc3RhdHVzTXNnID0gZ2V0STE4bk1lc3NhZ2UoJ2RhdGFTb3VyY2VDcmVhdGVFcnJvcicpXG4gICAgY29sb3IgPSAndmFyKC0tc3lzLWNvbG9yLWVycm9yLW1haW4pJ1xuICB9IGVsc2UgaWYgKGRzU3RhdHVzID09PSAnd2FybmluZycpIHtcbiAgICBsZXQgbGFiZWwgPSAnJ1xuICAgIGNvbnN0IG9yaWdpbkRzID0gZGF0YVNvdXJjZT8uZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKT8uWzBdXG4gICAgaWYgKG9yaWdpbkRzKSB7XG4gICAgICBsYWJlbCA9IG9yaWdpbkRzLmdldExhYmVsKCkgfHwgb3JpZ2luRHMuZ2V0RGF0YVNvdXJjZUpzb24oKS5zb3VyY2VMYWJlbFxuICAgIH0gZWxzZSBpZiAoZGF0YVNvdXJjZSkge1xuICAgICAgbGFiZWwgPSBkYXRhU291cmNlLmdldExhYmVsKCkgfHwgZGF0YVNvdXJjZS5nZXREYXRhU291cmNlSnNvbigpLmxhYmVsXG4gICAgfVxuXG4gICAgY29uc3Qgd2lkZ2V0SWQgPSBhcHBDb25maWdVdGlscy5nZXRXaWRnZXRJZEJ5T3V0cHV0RGF0YVNvdXJjZSh1c2VEYXRhU291cmNlKVxuICAgIGNvbnN0IGFwcFN0YXRlID0gd2luZG93Py5qaW11Q29uZmlnPy5pc0J1aWxkZXJcbiAgICAgID8gZ2V0QXBwU3RvcmUoKS5nZXRTdGF0ZSgpLmFwcFN0YXRlSW5CdWlsZGVyXG4gICAgICA6IGdldEFwcFN0b3JlKCkuZ2V0U3RhdGUoKVxuICAgIGNvbnN0IHdpZGdldExhYmVsID0gYXBwU3RhdGUuYXBwQ29uZmlnLndpZGdldHNbd2lkZ2V0SWRdPy5sYWJlbFxuXG4gICAgY29sb3IgPSAndmFyKC0tc3lzLWNvbG9yLXdhcm5pbmctZGFyayknXG4gICAgc3RhdHVzSWNvbiA9IGljb25XYXJuaW5nXG4gICAgc3RhdHVzTXNnID0gZ2V0STE4bk1lc3NhZ2UoJ291dHB1dERhdGFJc05vdEdlbmVyYXRlZCcsIHtcbiAgICAgIG91dHB1dERzTGFiZWw6IGxhYmVsID8/ICcnLFxuICAgICAgc291cmNlV2lkZ2V0TmFtZTogd2lkZ2V0TGFiZWwgPz8gJydcbiAgICB9KVxuICB9XG4gIHJldHVybiAoXG4gICAgPFJlYWN0LkZyYWdtZW50PlxuICAgICAge2RzRXhpc3RzICYmIChcbiAgICAgICAgPERhdGFTb3VyY2VDb21wb25lbnRcbiAgICAgICAgICB1c2VEYXRhU291cmNlPXt1c2VEYXRhU291cmNlfVxuICAgICAgICAgIG9uRGF0YVNvdXJjZUluZm9DaGFuZ2U9e2hhbmRsZURzSW5mb0NoYW5nZX1cbiAgICAgICAgICBvbkRhdGFTb3VyY2VDcmVhdGVkPXtoYW5kbGVEc0NyZWF0ZWR9XG4gICAgICAgICAgb25DcmVhdGVEYXRhU291cmNlRmFpbGVkPXtoYW5kbGVEc0NyZWF0ZUZhaWxlZH1cbiAgICAgICAgLz5cbiAgICAgICl9XG4gICAgICB7ZHNTdGF0dXMgPT09ICdjcmVhdGluZycgJiYgPFN0YXR1c0luZGljYXRvciBzdGF0dXNUeXBlPXtFbnRpdHlTdGF0dXNUeXBlLkxvYWRpbmd9IHRpdGxlPXtzdGF0dXNNc2d9IC8+fVxuICAgICAgeyghZHNFeGlzdHMgfHwgZHNTdGF0dXMgPT09ICdlcnJvcicgfHwgZHNTdGF0dXMgPT09ICd3YXJuaW5nJykgJiYgKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlcic+XG4gICAgICAgICAgPFRvb2x0aXAgdGl0bGU9e3N0YXR1c01zZ30+XG4gICAgICAgICAgICA8QnV0dG9uIHNpemU9J3NtJyB0eXBlPSd0ZXJ0aWFyeScgaWNvbj48SWNvbiBpY29uPXtzdGF0dXNJY29ufSBjb2xvcj17Y29sb3J9IC8+PC9CdXR0b24+XG4gICAgICAgICAgPC9Ub29sdGlwPlxuICAgICAgICAgIHtzaG93TWVzc2FnZSAmJiA8ZGl2IGNsYXNzTmFtZT0nc3RhdHVzLW1lc3NhZ2UnPntzdGF0dXNNc2d9PC9kaXY+fVxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG4gICAgPC9SZWFjdC5GcmFnbWVudD5cbiAgKVxufVxuXG5cblxuIiwiLyoqXG4gKiBDb25maWd1cmFibGUgZGVidWcgbG9nZ2luZyB1dGlsaXR5IGZvciBFeHBlcmllbmNlIEJ1aWxkZXIgd2lkZ2V0c1xuICogXG4gKiBVc2FnZTpcbiAqIC0gQWRkID9kZWJ1Zz1hbGwgdG8gVVJMIHRvIHNlZSBhbGwgZGVidWcgbG9nc1xuICogLSBBZGQgP2RlYnVnPUhBU0gsRk9STSB0byBzZWUgc3BlY2lmaWMgZmVhdHVyZSBsb2dzXG4gKiAtIEFkZCA/ZGVidWc9ZmFsc2UgdG8gZGlzYWJsZSBhbGwgZGVidWcgbG9nc1xuICogXG4gKiBGZWF0dXJlcyAoUXVlcnlTaW1wbGUpOlxuICogLSBIQVNIOiBIYXNoIHBhcmFtZXRlciBwcm9jZXNzaW5nXG4gKiAtIEZPUk06IFF1ZXJ5IGZvcm0gaW50ZXJhY3Rpb25zXG4gKiAtIFRBU0s6IFF1ZXJ5IHRhc2sgbWFuYWdlbWVudFxuICogLSBaT09NOiBab29tIGJlaGF2aW9yXG4gKiAtIE1BUC1FWFRFTlQ6IE1hcCBleHRlbnQgY2hhbmdlc1xuICogLSBEQVRBLUFDVElPTjogRGF0YSBhY3Rpb24gZXhlY3V0aW9uIChBZGQgdG8gTWFwLCBldGMuKVxuICogLSBHUk9VUDogUXVlcnkgZ3JvdXBpbmcgYW5kIGRyb3Bkb3duIHNlbGVjdGlvblxuICogLSBTRUxFQ1RJT046IFNlbGVjdGlvbiBkZXRlY3Rpb24gYW5kIGlkZW50aWZ5IHBvcHVwIHRyYWNraW5nXG4gKiAtIFdJREdFVC1TVEFURTogV2lkZ2V0IGxpZmVjeWNsZSBldmVudHMgKG9wZW4vY2xvc2UgaGFuZHNoYWtlKVxuICogLSBSRVNUT1JFOiBTZWxlY3Rpb24gcmVzdG9yYXRpb24gd2hlbiB3aWRnZXQgb3BlbnNcbiAqIC0gUkVTVUxUUy1NT0RFOiBSZXN1bHRzIG1hbmFnZW1lbnQgbW9kZSBzZWxlY3Rpb24gKENyZWF0ZSBuZXcsIEFkZCB0bywgUmVtb3ZlIGZyb20pXG4gKiAtIEVYUEFORC1DT0xMQVBTRTogRXhwYW5kL2NvbGxhcHNlIHN0YXRlIG1hbmFnZW1lbnQgZm9yIHJlc3VsdCBpdGVtc1xuICogLSBHUkFQSElDUy1MQVlFUjogR3JhcGhpY3MgbGF5ZXIgaGlnaGxpZ2h0aW5nIChpbmRlcGVuZGVudCBvZiBsYXllciB2aXNpYmlsaXR5KVxuICogXG4gKiBGZWF0dXJlcyAoSGVscGVyU2ltcGxlKTpcbiAqIC0gSEFTSDogSGFzaCBwYXJhbWV0ZXIgbW9uaXRvcmluZyBhbmQgd2lkZ2V0IG9wZW5pbmdcbiAqIC0gU0VMRUNUSU9OOiBTZWxlY3Rpb24gdHJhY2tpbmcgZnJvbSBRdWVyeVNpbXBsZVxuICogLSBXSURHRVQtU1RBVEU6IFdpZGdldCBzdGF0ZSBoYW5kc2hha2UgKG9wZW4vY2xvc2UgZXZlbnRzKVxuICogLSBSRVNUT1JFOiBTZWxlY3Rpb24gcmVzdG9yYXRpb24gYXR0ZW1wdHMgYW5kIHJlc3VsdHNcbiAqL1xuXG50eXBlIERlYnVnRmVhdHVyZSA9ICdIQVNIJyB8ICdGT1JNJyB8ICdUQVNLJyB8ICdaT09NJyB8ICdNQVAtRVhURU5UJyB8ICdEQVRBLUFDVElPTicgfCAnR1JPVVAnIHwgJ1NFTEVDVElPTicgfCAnV0lER0VULVNUQVRFJyB8ICdSRVNUT1JFJyB8ICdSRVNVTFRTLU1PREUnIHwgJ0VYUEFORC1DT0xMQVBTRScgfCAnR1JBUEhJQ1MtTEFZRVInIHwgJ2FsbCcgfCAnZmFsc2UnXG5cbmludGVyZmFjZSBEZWJ1Z0xvZ2dlck9wdGlvbnMge1xuICB3aWRnZXROYW1lOiBzdHJpbmdcbiAgZmVhdHVyZXM6IERlYnVnRmVhdHVyZVtdXG59XG5cbmNsYXNzIERlYnVnTG9nZ2VyIHtcbiAgcHJpdmF0ZSBlbmFibGVkRmVhdHVyZXM6IFNldDxEZWJ1Z0ZlYXR1cmU+ID0gbmV3IFNldCgpXG4gIHByaXZhdGUgaW5pdGlhbGl6ZWQgPSBmYWxzZVxuICBwcml2YXRlIHdpZGdldE5hbWU6IHN0cmluZ1xuICBwcml2YXRlIGZlYXR1cmVzOiBEZWJ1Z0ZlYXR1cmVbXVxuXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnM6IERlYnVnTG9nZ2VyT3B0aW9ucykge1xuICAgIHRoaXMud2lkZ2V0TmFtZSA9IG9wdGlvbnMud2lkZ2V0TmFtZVxuICAgIHRoaXMuZmVhdHVyZXMgPSBvcHRpb25zLmZlYXR1cmVzXG4gIH1cblxuICBwcml2YXRlIGluaXRpYWxpemUoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuaW5pdGlhbGl6ZWQpIHJldHVyblxuXG4gICAgLy8gQ2hlY2sgVVJMIHBhcmFtZXRlcnMgKGJvdGggY3VycmVudCB3aW5kb3cgYW5kIHBhcmVudCBmb3IgaWZyYW1lcylcbiAgICBsZXQgdXJsUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh3aW5kb3cubG9jYXRpb24uc2VhcmNoKVxuICAgIGxldCBkZWJ1Z1ZhbHVlID0gdXJsUGFyYW1zLmdldCgnZGVidWcnKVxuXG4gICAgLy8gSWYgbm90IGZvdW5kIGluIGN1cnJlbnQgd2luZG93LCBjaGVjayBwYXJlbnQgKG5lZWRlZCBmb3IgRXhCIGlmcmFtZXMpXG4gICAgaWYgKGRlYnVnVmFsdWUgPT09IG51bGwgJiYgd2luZG93LnBhcmVudCAhPT0gd2luZG93KSB7XG4gICAgICB0cnkge1xuICAgICAgICB1cmxQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5wYXJlbnQubG9jYXRpb24uc2VhcmNoKVxuICAgICAgICBkZWJ1Z1ZhbHVlID0gdXJsUGFyYW1zLmdldCgnZGVidWcnKVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyBDcm9zcy1vcmlnaW4gcmVzdHJpY3Rpb24gbWlnaHQgcHJldmVudCBhY2Nlc3MgdG8gcGFyZW50IGxvY2F0aW9uXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGRlYnVnVmFsdWUgPT09ICdmYWxzZScpIHtcbiAgICAgIC8vIEV4cGxpY2l0bHkgZGlzYWJsZWRcbiAgICAgIHRoaXMuaW5pdGlhbGl6ZWQgPSB0cnVlXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAoZGVidWdWYWx1ZSA9PT0gJ2FsbCcpIHtcbiAgICAgIC8vIEVuYWJsZSBhbGwgZmVhdHVyZXMgb25seSBpZiBleHBsaWNpdGx5IHNldCB0byAnYWxsJ1xuICAgICAgdGhpcy5mZWF0dXJlcy5mb3JFYWNoKGZlYXR1cmUgPT4ge1xuICAgICAgICBpZiAoZmVhdHVyZSAhPT0gJ2FsbCcgJiYgZmVhdHVyZSAhPT0gJ2ZhbHNlJykge1xuICAgICAgICAgIHRoaXMuZW5hYmxlZEZlYXR1cmVzLmFkZChmZWF0dXJlKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgY29uc29sZS5sb2coYFske3RoaXMud2lkZ2V0TmFtZX0tREVCVUddIEVuYWJsZWQgQUxMIGZlYXR1cmVzOmAsIEFycmF5LmZyb20odGhpcy5lbmFibGVkRmVhdHVyZXMpKVxuICAgIH0gZWxzZSBpZiAoZGVidWdWYWx1ZSAhPT0gbnVsbCkge1xuICAgICAgLy8gUGFyc2UgY29tbWEtc2VwYXJhdGVkIGZlYXR1cmUgbGlzdFxuICAgICAgY29uc3QgcmVxdWVzdGVkRmVhdHVyZXMgPSBkZWJ1Z1ZhbHVlLnNwbGl0KCcsJykubWFwKGYgPT4gZi50cmltKCkudG9VcHBlckNhc2UoKSBhcyBEZWJ1Z0ZlYXR1cmUpXG4gICAgICByZXF1ZXN0ZWRGZWF0dXJlcy5mb3JFYWNoKGZlYXR1cmUgPT4ge1xuICAgICAgICBpZiAoZmVhdHVyZS50b1VwcGVyQ2FzZSgpID09PSAnQUxMJykge1xuICAgICAgICAgIC8vIEVuYWJsZSBhbGwgZmVhdHVyZXMgZm9yIHRoaXMgd2lkZ2V0XG4gICAgICAgICAgdGhpcy5mZWF0dXJlcy5mb3JFYWNoKGYgPT4ge1xuICAgICAgICAgICAgaWYgKGYgIT09ICdhbGwnICYmIGYgIT09ICdmYWxzZScpIHtcbiAgICAgICAgICAgICAgdGhpcy5lbmFibGVkRmVhdHVyZXMuYWRkKGYpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmZlYXR1cmVzLmluY2x1ZGVzKGZlYXR1cmUpKSB7XG4gICAgICAgICAgdGhpcy5lbmFibGVkRmVhdHVyZXMuYWRkKGZlYXR1cmUpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuXG4gICAgdGhpcy5pbml0aWFsaXplZCA9IHRydWVcbiAgfVxuXG4gIHByaXZhdGUgaXNFbmFibGVkKGZlYXR1cmU6IERlYnVnRmVhdHVyZSk6IGJvb2xlYW4ge1xuICAgIHRoaXMuaW5pdGlhbGl6ZSgpXG4gICAgXG4gICAgaWYgKHRoaXMuZW5hYmxlZEZlYXR1cmVzLmhhcygnYWxsJykpIHtcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICAgIFxuICAgIHJldHVybiB0aGlzLmVuYWJsZWRGZWF0dXJlcy5oYXMoZmVhdHVyZSlcbiAgfVxuXG4gIGxvZyhmZWF0dXJlOiBEZWJ1Z0ZlYXR1cmUsIGRhdGE6IGFueSk6IHZvaWQge1xuICAgIGlmICghdGhpcy5pc0VuYWJsZWQoZmVhdHVyZSkpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0IGxvZ0RhdGEgPSB7XG4gICAgICBmZWF0dXJlLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAuLi5kYXRhXG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coYFske3RoaXMud2lkZ2V0TmFtZS50b1VwcGVyQ2FzZSgpfS0ke2ZlYXR1cmV9XWAsIEpTT04uc3RyaW5naWZ5KGxvZ0RhdGEsIG51bGwsIDIpKVxuICB9XG5cbiAgZ2V0Q29uZmlnKCk6IHsgZW5hYmxlZEZlYXR1cmVzOiBzdHJpbmdbXSwgZGVidWdWYWx1ZTogc3RyaW5nIHwgbnVsbCB9IHtcbiAgICB0aGlzLmluaXRpYWxpemUoKVxuICAgIFxuICAgIGNvbnN0IHVybFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaClcbiAgICBjb25zdCBkZWJ1Z1ZhbHVlID0gdXJsUGFyYW1zLmdldCgnZGVidWcnKVxuICAgIFxuICAgIHJldHVybiB7XG4gICAgICBlbmFibGVkRmVhdHVyZXM6IEFycmF5LmZyb20odGhpcy5lbmFibGVkRmVhdHVyZXMpLFxuICAgICAgZGVidWdWYWx1ZVxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBkZWJ1ZyBsb2dnZXIgaW5zdGFuY2UgZm9yIFF1ZXJ5U2ltcGxlIHdpZGdldFxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlcigpIHtcbiAgcmV0dXJuIG5ldyBEZWJ1Z0xvZ2dlcih7XG4gICAgd2lkZ2V0TmFtZTogJ1FVRVJZU0lNUExFJyxcbiAgICBmZWF0dXJlczogWydIQVNIJywgJ0ZPUk0nLCAnVEFTSycsICdaT09NJywgJ01BUC1FWFRFTlQnLCAnREFUQS1BQ1RJT04nLCAnR1JPVVAnLCAnU0VMRUNUSU9OJywgJ1dJREdFVC1TVEFURScsICdSRVNUT1JFJywgJ1JFU1VMVFMtTU9ERScsICdFWFBBTkQtQ09MTEFQU0UnLCAnR1JBUEhJQ1MtTEFZRVInXVxuICB9KVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBkZWJ1ZyBsb2dnZXIgaW5zdGFuY2UgZm9yIEhlbHBlclNpbXBsZSB3aWRnZXRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUhlbHBlclNpbXBsZURlYnVnTG9nZ2VyKCkge1xuICByZXR1cm4gbmV3IERlYnVnTG9nZ2VyKHtcbiAgICB3aWRnZXROYW1lOiAnSEVMUEVSU0lNUExFJyxcbiAgICBmZWF0dXJlczogWydIQVNIJywgJ1NFTEVDVElPTicsICdXSURHRVQtU1RBVEUnLCAnUkVTVE9SRSddXG4gIH0pXG59XG5cbiIsImltcG9ydCB7XG4gIFJlYWN0UmVkdXgsXG4gIHR5cGUgSU1TdGF0ZSxcbiAgdHlwZSBJTUFwcENvbmZpZ1xufSBmcm9tICdqaW11LWNvcmUnXG5pbnRlcmZhY2UgUHJvcHMge1xuICB3aWRnZXRJZDogc3RyaW5nXG4gIHVzZURhdGFTb3VyY2VJZDogc3RyaW5nXG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VEYXRhU291cmNlRXhpc3RzIChwcm9wczogUHJvcHMpIHtcbiAgY29uc3QgeyB3aWRnZXRJZCwgdXNlRGF0YVNvdXJjZUlkIH0gPSBwcm9wc1xuXG4gIGNvbnN0IGV4aXN0czogYm9vbGVhbiA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XG4gICAgbGV0IGFwcENvbmZpZzogSU1BcHBDb25maWdcbiAgICBpZiAod2luZG93LmppbXVDb25maWcuaXNCdWlsZGVyKSB7XG4gICAgICBhcHBDb25maWcgPSBzdGF0ZS5hcHBTdGF0ZUluQnVpbGRlci5hcHBDb25maWdcbiAgICB9IGVsc2Uge1xuICAgICAgYXBwQ29uZmlnID0gc3RhdGUuYXBwQ29uZmlnXG4gICAgfVxuICAgIGNvbnN0IHVzZURhdGFTb3VyY2VzID0gYXBwQ29uZmlnLndpZGdldHNbd2lkZ2V0SWRdLnVzZURhdGFTb3VyY2VzID8/IFtdXG4gICAgcmV0dXJuIHVzZURhdGFTb3VyY2VzLnNvbWUodXNlRHMgPT4gdXNlRHMuZGF0YVNvdXJjZUlkID09PSB1c2VEYXRhU291cmNlSWQpXG4gIH0pXG5cbiAgcmV0dXJuIGV4aXN0c1xufVxuXG5cblxuIiwiaW1wb3J0IHR5cGUgeyBJUG9wdXBJbmZvIH0gZnJvbSAnQGVzcmkvYXJjZ2lzLXJlc3QtZmVhdHVyZS1zZXJ2aWNlJ1xuaW1wb3J0IHR5cGUgeyBJbnRsU2hhcGUsIERhdGFTb3VyY2UgfSBmcm9tICdqaW11LWNvcmUnXG5cbi8qKlxuICogVG9nZ2xlIGl0ZW1zIGluIGFuIGFycmF5XG4gKi9cbmV4cG9ydCBjb25zdCB0b2dnbGVJdGVtSW5BcnJheSA9IChpdGVtLCBpdGVtcyA9IFtdKSA9PiBpdGVtcy5pbmNsdWRlcyhpdGVtKSA/IGl0ZW1zLmZpbHRlcihpID0+IGkgIT09IGl0ZW0pIDogWy4uLml0ZW1zLCBpdGVtXVxuXG5leHBvcnQgaW50ZXJmYWNlIERhdGFTb3VyY2VNYXAge1xuICBbZGF0YVNvdXJjZUlkOiBzdHJpbmddOiBEYXRhU291cmNlXG59XG5cbmV4cG9ydCB0eXBlIEdldEkxOG5NZXNzYWdlVHlwZSA9IChpZDogc3RyaW5nLCBvcHRpb25zPzogeyBtZXNzYWdlcz86IGFueSwgdmFsdWVzPzogYW55IH0pID0+IHN0cmluZ1xuLyoqXG4gKiBBIGZhY3RvcnkgdG8gY3JlYXRlIGEgZnVuY3Rpb24gb2YgZ2V0dGluZyBpMThuIG1lc3NhZ2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUdldEkxOG5NZXNzYWdlIChvcHRpb25zOiB7IGludGw6IEludGxTaGFwZSwgZGVmYXVsdE1lc3NhZ2VzPzogYW55IH0pIHtcbiAgY29uc3QgeyBpbnRsLCBkZWZhdWx0TWVzc2FnZXMgPSB7fSB9ID0gb3B0aW9ucyB8fCB7fVxuICBjb25zdCBnZXRJMThuTWVzc2FnZTogR2V0STE4bk1lc3NhZ2VUeXBlID0gKGlkLCBvcHRpb25zKSA9PiB7XG4gICAgY29uc3QgeyBtZXNzYWdlcywgdmFsdWVzIH0gPSBvcHRpb25zIHx8IHt9XG4gICAgcmV0dXJuIGludGwuZm9ybWF0TWVzc2FnZSh7IGlkLCBkZWZhdWx0TWVzc2FnZTogKG1lc3NhZ2VzIHx8IGRlZmF1bHRNZXNzYWdlcylbaWRdIH0sIHZhbHVlcylcbiAgfVxuICByZXR1cm4gZ2V0STE4bk1lc3NhZ2Vcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEZpZWxkSW5mb3NJblBvcHVwQ29udGVudCAocG9wdXBJbmZvOiBJUG9wdXBJbmZvKSB7XG4gIGNvbnN0IHJlc3VsdCA9IFtdXG4gIGlmIChwb3B1cEluZm8/LnBvcHVwRWxlbWVudHM/Lmxlbmd0aCA+IDApIHtcbiAgICBwb3B1cEluZm8ucG9wdXBFbGVtZW50cy5mb3JFYWNoKGVsZW1lbnQgPT4ge1xuICAgICAgaWYgKGVsZW1lbnQudHlwZSA9PT0gJ2ZpZWxkcycgJiYgZWxlbWVudC5maWVsZEluZm9zPy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHJlc3VsdC5wdXNoKC4uLmVsZW1lbnQuZmllbGRJbmZvcylcbiAgICAgIH1cbiAgICB9KVxuICB9XG4gIHJldHVybiByZXN1bHRcbn1cblxuXG5cbiIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fZW1vdGlvbl9yZWFjdF9qc3hfcnVudGltZV9fOyIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9qaW11X2FyY2dpc19fOyIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9qaW11X2NvcmVfXzsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfamltdV9sYXlvdXRzX2xheW91dF9ydW50aW1lX187IiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX2ppbXVfdGhlbWVfXzsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfamltdV91aV9fOyIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9qaW11X3VpX2Jhc2ljX3NxbF9leHByZXNzaW9uX3J1bnRpbWVfXzsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfd2lkZ2V0c19zaGFyZWRfY29kZV9jb21tb25fXzsiLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbl9fd2VicGFja19yZXF1aXJlX18ubiA9IChtb2R1bGUpID0+IHtcblx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG5cdFx0KCkgPT4gKG1vZHVsZVsnZGVmYXVsdCddKSA6XG5cdFx0KCkgPT4gKG1vZHVsZSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsIHsgYTogZ2V0dGVyIH0pO1xuXHRyZXR1cm4gZ2V0dGVyO1xufTsiLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjsiLCIvKipcclxuICogV2VicGFjayB3aWxsIHJlcGxhY2UgX193ZWJwYWNrX3B1YmxpY19wYXRoX18gd2l0aCBfX3dlYnBhY2tfcmVxdWlyZV9fLnAgdG8gc2V0IHRoZSBwdWJsaWMgcGF0aCBkeW5hbWljYWxseS5cclxuICogVGhlIHJlYXNvbiB3aHkgd2UgY2FuJ3Qgc2V0IHRoZSBwdWJsaWNQYXRoIGluIHdlYnBhY2sgY29uZmlnIGlzOiB3ZSBjaGFuZ2UgdGhlIHB1YmxpY1BhdGggd2hlbiBkb3dubG9hZC5cclxuICogKi9cclxuX193ZWJwYWNrX3B1YmxpY19wYXRoX18gPSB3aW5kb3cuamltdUNvbmZpZy5iYXNlVXJsXHJcbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHsgUmVhY3QsIGpzeCwgY3NzLCB0eXBlIEFsbFdpZGdldFByb3BzLCBEYXRhU291cmNlTWFuYWdlciwgdHlwZSBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLCB0eXBlIEZlYXR1cmVEYXRhUmVjb3JkLCBNZXNzYWdlTWFuYWdlciwgRGF0YVJlY29yZHNTZWxlY3Rpb25DaGFuZ2VNZXNzYWdlLCB0eXBlIERhdGFTb3VyY2UgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBQYXBlciwgV2lkZ2V0UGxhY2Vob2xkZXIgfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHsgdHlwZSBJTUNvbmZpZywgUXVlcnlBcnJhbmdlVHlwZSwgU2VsZWN0aW9uVHlwZSB9IGZyb20gJy4uL2NvbmZpZydcbmltcG9ydCBkZWZhdWx0TWVzc2FnZXMgZnJvbSAnLi90cmFuc2xhdGlvbnMvZGVmYXVsdCdcbmltcG9ydCB7IGdldFdpZGdldFJ1bnRpbWVEYXRhTWFwIH0gZnJvbSAnLi93aWRnZXQtY29uZmlnJ1xuaW1wb3J0IHsgSmltdU1hcFZpZXdDb21wb25lbnQsIHR5cGUgSmltdU1hcFZpZXcgfSBmcm9tICdqaW11LWFyY2dpcydcblxuaW1wb3J0IHsgdmVyc2lvbk1hbmFnZXIgfSBmcm9tICcuLi92ZXJzaW9uLW1hbmFnZXInXG5pbXBvcnQgeyBRdWVyeVRhc2tMaXN0IH0gZnJvbSAnLi9xdWVyeS10YXNrLWxpc3QnXG5pbXBvcnQgeyBUYXNrTGlzdElubGluZSB9IGZyb20gJy4vcXVlcnktdGFzay1saXN0LWlubGluZSdcbmltcG9ydCB7IFRhc2tMaXN0UG9wcGVyV3JhcHBlciB9IGZyb20gJy4vcXVlcnktdGFzay1saXN0LXBvcHBlci13cmFwcGVyJ1xuaW1wb3J0IHsgUXVlcnlXaWRnZXRDb250ZXh0IH0gZnJvbSAnLi93aWRnZXQtY29udGV4dCdcbmltcG9ydCB7IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIgfSBmcm9tICd3aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbidcbmltcG9ydCB7IGNyZWF0ZU9yR2V0R3JhcGhpY3NMYXllciwgY2xlYW51cEdyYXBoaWNzTGF5ZXIgfSBmcm9tICcuL2dyYXBoaWNzLWxheWVyLXV0aWxzJ1xuaW1wb3J0IHsgUVVFUllTSU1QTEVfU0VMRUNUSU9OX0VWRU5UIH0gZnJvbSAnLi9zZWxlY3Rpb24tdXRpbHMnXG5pbXBvcnQgeyBXSURHRVRfVkVSU0lPTiB9IGZyb20gJy4uL3ZlcnNpb24nXG5cbmNvbnN0IGRlYnVnTG9nZ2VyID0gY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlcigpXG5jb25zdCB7IGljb25NYXAgfSA9IGdldFdpZGdldFJ1bnRpbWVEYXRhTWFwKClcblxuLyoqXG4gKiBDdXN0b20gZXZlbnQgbmFtZSBmb3IgUXVlcnlTaW1wbGUgdG8gbm90aWZ5IEhlbHBlclNpbXBsZSBvZiB3aWRnZXQgb3Blbi9jbG9zZSBzdGF0ZS5cbiAqL1xuY29uc3QgUVVFUllTSU1QTEVfV0lER0VUX1NUQVRFX0VWRU5UID0gJ3F1ZXJ5c2ltcGxlLXdpZGdldC1zdGF0ZS1jaGFuZ2VkJ1xuXG4vKipcbiAqIEN1c3RvbSBldmVudCBuYW1lIGZvciByZXF1ZXN0aW5nIHJlc3RvcmF0aW9uIHdoZW4gaWRlbnRpZnkgcG9wdXAgY2xvc2VzLlxuICovXG5jb25zdCBSRVNUT1JFX09OX0lERU5USUZZX0NMT1NFX0VWRU5UID0gJ3F1ZXJ5c2ltcGxlLXJlc3RvcmUtb24taWRlbnRpZnktY2xvc2UnXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFdpZGdldCBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQ8QWxsV2lkZ2V0UHJvcHM8SU1Db25maWc+LCB7IFxuICBpbml0aWFsUXVlcnlWYWx1ZT86IHsgc2hvcnRJZDogc3RyaW5nLCB2YWx1ZTogc3RyaW5nIH0sIFxuICBpc1BhbmVsVmlzaWJsZT86IGJvb2xlYW4sIFxuICBoYXNTZWxlY3Rpb24/OiBib29sZWFuLCBcbiAgc2VsZWN0aW9uUmVjb3JkQ291bnQ/OiBudW1iZXIsIFxuICBsYXN0U2VsZWN0aW9uPzogeyByZWNvcmRJZHM6IHN0cmluZ1tdLCBvdXRwdXREc0lkOiBzdHJpbmcsIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBzdHJpbmcgfSwgXG4gIHJlc3VsdHNNb2RlPzogU2VsZWN0aW9uVHlwZSwgXG4gIGFjY3VtdWxhdGVkUmVjb3Jkcz86IEZlYXR1cmVEYXRhUmVjb3JkW10sIFxuICBncmFwaGljc0xheWVySW5pdGlhbGl6ZWQ/OiBib29sZWFuLCBcbiAgamltdU1hcFZpZXc/OiBKaW11TWFwVmlldyxcbiAgYWN0aXZlVGFiPzogJ3F1ZXJ5JyB8ICdyZXN1bHRzJ1xufT4ge1xuICBzdGF0aWMgdmVyc2lvbk1hbmFnZXIgPSB2ZXJzaW9uTWFuYWdlclxuICBwcml2YXRlIGxhc3RQcm9jZXNzZWRIYXNoOiBzdHJpbmcgPSAnJ1xuXG4gIHN0YXRlOiB7IFxuICAgIGluaXRpYWxRdWVyeVZhbHVlPzogeyBzaG9ydElkOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcgfSwgXG4gICAgaXNQYW5lbFZpc2libGU/OiBib29sZWFuLCBcbiAgICBoYXNTZWxlY3Rpb24/OiBib29sZWFuLCBcbiAgICBzZWxlY3Rpb25SZWNvcmRDb3VudD86IG51bWJlciwgXG4gICAgbGFzdFNlbGVjdGlvbj86IHsgcmVjb3JkSWRzOiBzdHJpbmdbXSwgb3V0cHV0RHNJZDogc3RyaW5nLCBxdWVyeUl0ZW1Db25maWdJZDogc3RyaW5nIH0sIFxuICAgIHJlc3VsdHNNb2RlPzogU2VsZWN0aW9uVHlwZSwgXG4gICAgYWNjdW11bGF0ZWRSZWNvcmRzPzogRmVhdHVyZURhdGFSZWNvcmRbXSwgXG4gICAgZ3JhcGhpY3NMYXllckluaXRpYWxpemVkPzogYm9vbGVhbiwgXG4gICAgamltdU1hcFZpZXc/OiBKaW11TWFwVmlldyxcbiAgICBhY3RpdmVUYWI/OiAncXVlcnknIHwgJ3Jlc3VsdHMnXG4gIH0gPSB7XG4gICAgcmVzdWx0c01vZGU6IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uLCAvLyBEZWZhdWx0IG1vZGVcbiAgICBhY3RpdmVUYWI6ICdxdWVyeSdcbiAgfVxuXG4gIGhhbmRsZVRhYkNoYW5nZSA9IChhY3RpdmVUYWI6ICdxdWVyeScgfCAncmVzdWx0cycpID0+IHtcbiAgICB0aGlzLnNldFN0YXRlKHsgYWN0aXZlVGFiIH0pXG4gIH1cbiAgcHJpdmF0ZSB3aWRnZXRSZWYgPSBSZWFjdC5jcmVhdGVSZWY8SFRNTERpdkVsZW1lbnQ+KClcbiAgcHJpdmF0ZSB2aXNpYmlsaXR5T2JzZXJ2ZXI6IEludGVyc2VjdGlvbk9ic2VydmVyIHwgbnVsbCA9IG51bGxcbiAgcHJpdmF0ZSB2aXNpYmlsaXR5Q2hlY2tJbnRlcnZhbDogbnVtYmVyIHwgbnVsbCA9IG51bGxcbiAgcHJpdmF0ZSBncmFwaGljc0xheWVyUmVmID0gUmVhY3QuY3JlYXRlUmVmPF9fZXNyaS5HcmFwaGljc0xheWVyIHwgbnVsbD4oKVxuICBwcml2YXRlIG1hcFZpZXdSZWYgPSBSZWFjdC5jcmVhdGVSZWY8X19lc3JpLk1hcFZpZXcgfCBfX2VzcmkuU2NlbmVWaWV3IHwgbnVsbD4oKVxuXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIHRoaXMuY2hlY2tRdWVyeVN0cmluZ0ZvclNob3J0SWRzKClcbiAgICAvLyBMaXN0ZW4gZm9yIGhhc2ggY2hhbmdlcyB0byBkZXRlY3Qgd2hlbiBoYXNoIHBhcmFtZXRlcnMgYXJlIHVwZGF0ZWRcbiAgICAvLyBUaGlzIGlzIG5lZWRlZCB3aGVuIEhlbHBlclNpbXBsZSBvcGVucyB0aGUgd2lkZ2V0IHdpdGggYSBoYXNoIHBhcmFtZXRlclxuICAgIC8vIG9yIHdoZW4gaGFzaCBwYXJhbWV0ZXJzIGNoYW5nZSB3aGlsZSB0aGUgd2lkZ2V0IGlzIGFscmVhZHkgbW91bnRlZFxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdoYXNoY2hhbmdlJywgdGhpcy5jaGVja1F1ZXJ5U3RyaW5nRm9yU2hvcnRJZHMpXG4gICAgXG4gICAgLy8gU2V0IHVwIHZpc2liaWxpdHkgZGV0ZWN0aW9uXG4gICAgdGhpcy5zZXR1cFZpc2liaWxpdHlEZXRlY3Rpb24oKVxuICAgIFxuICAgIC8vIExpc3RlbiBmb3Igc2VsZWN0aW9uIGNoYW5nZXMgZnJvbSBxdWVyeS1yZXN1bHRcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihRVUVSWVNJTVBMRV9TRUxFQ1RJT05fRVZFTlQsIHRoaXMuaGFuZGxlU2VsZWN0aW9uQ2hhbmdlIGFzIEV2ZW50TGlzdGVuZXIpXG4gICAgXG4gICAgLy8gTGlzdGVuIGZvciByZXN0b3JlIHJlcXVlc3RzIHdoZW4gaWRlbnRpZnkgcG9wdXAgY2xvc2VzXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoUkVTVE9SRV9PTl9JREVOVElGWV9DTE9TRV9FVkVOVCwgdGhpcy5oYW5kbGVSZXN0b3JlT25JZGVudGlmeUNsb3NlIGFzIEV2ZW50TGlzdGVuZXIpXG4gICAgXG4gICAgLy8gTm90aWZ5IEhlbHBlclNpbXBsZSB0aGF0IHRoaXMgd2lkZ2V0IGlzIG5vdyBvcGVuXG4gICAgY29uc3Qgb3BlbkV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KFFVRVJZU0lNUExFX1dJREdFVF9TVEFURV9FVkVOVCwge1xuICAgICAgZGV0YWlsOiB7XG4gICAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgICBpc09wZW46IHRydWVcbiAgICAgIH0sXG4gICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgY2FuY2VsYWJsZTogdHJ1ZVxuICAgIH0pXG4gICAgd2luZG93LmRpc3BhdGNoRXZlbnQob3BlbkV2ZW50KVxuICAgIGRlYnVnTG9nZ2VyLmxvZygnV0lER0VULVNUQVRFJywge1xuICAgICAgZXZlbnQ6ICd3aWRnZXQtb3BlbmVkJyxcbiAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgaXNPcGVuOiB0cnVlLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICB9KVxuICAgIFxuICAgIC8vIEFsc28gY2hlY2sgYWZ0ZXIgYSBzaG9ydCBkZWxheSB0byBjYXRjaCBjYXNlcyB3aGVyZSBoYXNoIHdhcyBhbHJlYWR5IHByZXNlbnRcbiAgICAvLyB3aGVuIHdpZGdldCB3YXMgb3BlbmVkIChlLmcuLCBieSBIZWxwZXJTaW1wbGUgb3BlbmluZyB0aGUgd2lkZ2V0KVxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5jaGVja1F1ZXJ5U3RyaW5nRm9yU2hvcnRJZHMoKVxuICAgIH0sIDEwMClcbiAgICBcbiAgICAvLyBHcmFwaGljcyBsYXllciB3aWxsIGJlIGluaXRpYWxpemVkIHdoZW4gbWFwIHZpZXcgYmVjb21lcyBhdmFpbGFibGUgdmlhIEppbXVNYXBWaWV3Q29tcG9uZW50XG4gIH1cblxuICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAvLyBDbGVhbiB1cCBoYXNoY2hhbmdlIGxpc3RlbmVyXG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2hhc2hjaGFuZ2UnLCB0aGlzLmNoZWNrUXVlcnlTdHJpbmdGb3JTaG9ydElkcylcbiAgICBcbiAgICAvLyBDbGVhbiB1cCBzZWxlY3Rpb24gY2hhbmdlIGxpc3RlbmVyXG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoUVVFUllTSU1QTEVfU0VMRUNUSU9OX0VWRU5ULCB0aGlzLmhhbmRsZVNlbGVjdGlvbkNoYW5nZSBhcyBFdmVudExpc3RlbmVyKVxuICAgIFxuICAgIC8vIENsZWFuIHVwIHJlc3RvcmUgb24gaWRlbnRpZnkgY2xvc2UgbGlzdGVuZXJcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihSRVNUT1JFX09OX0lERU5USUZZX0NMT1NFX0VWRU5ULCB0aGlzLmhhbmRsZVJlc3RvcmVPbklkZW50aWZ5Q2xvc2UgYXMgRXZlbnRMaXN0ZW5lcilcbiAgICBcbiAgICAvLyBDbGVhbiB1cCB2aXNpYmlsaXR5IGRldGVjdGlvblxuICAgIHRoaXMuY2xlYW51cFZpc2liaWxpdHlEZXRlY3Rpb24oKVxuICAgIFxuICAgIC8vIENsZWFuIHVwIGdyYXBoaWNzIGxheWVyXG4gICAgdGhpcy5jbGVhbnVwR3JhcGhpY3NMYXllcigpXG4gICAgXG4gICAgLy8gTm90aWZ5IEhlbHBlclNpbXBsZSB0aGF0IHRoaXMgd2lkZ2V0IGlzIG5vdyBjbG9zZWRcbiAgICBjb25zdCBjbG9zZUV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KFFVRVJZU0lNUExFX1dJREdFVF9TVEFURV9FVkVOVCwge1xuICAgICAgZGV0YWlsOiB7XG4gICAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgICBpc09wZW46IGZhbHNlXG4gICAgICB9LFxuICAgICAgYnViYmxlczogdHJ1ZSxcbiAgICAgIGNhbmNlbGFibGU6IHRydWVcbiAgICB9KVxuICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KGNsb3NlRXZlbnQpXG4gICAgZGVidWdMb2dnZXIubG9nKCdXSURHRVQtU1RBVEUnLCB7XG4gICAgICBldmVudDogJ3dpZGdldC1jbG9zZWQnLFxuICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICBpc09wZW46IGZhbHNlLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICB9KVxuICB9XG5cbiAgY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wczogQWxsV2lkZ2V0UHJvcHM8SU1Db25maWc+KSB7XG4gICAgaWYgKHByZXZQcm9wcy5jb25maWcucXVlcnlJdGVtcyAhPT0gdGhpcy5wcm9wcy5jb25maWcucXVlcnlJdGVtcykge1xuICAgICAgdGhpcy5jaGVja1F1ZXJ5U3RyaW5nRm9yU2hvcnRJZHMoKVxuICAgIH1cbiAgICBcbiAgICAvLyBDbGVhbiB1cCBncmFwaGljcyBsYXllciBpZiBjb25maWcgY2hhbmdlZCB0byBkaXNhYmxlZFxuICAgIGlmIChwcmV2UHJvcHMuY29uZmlnLnVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQgIT09IHRoaXMucHJvcHMuY29uZmlnLnVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQpIHtcbiAgICAgIGlmICghdGhpcy5wcm9wcy5jb25maWcudXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCkge1xuICAgICAgICB0aGlzLmNsZWFudXBHcmFwaGljc0xheWVyKClcbiAgICAgIH1cbiAgICAgIC8vIElmIGVuYWJsZWQsIGluaXRpYWxpemF0aW9uIHdpbGwgaGFwcGVuIHdoZW4gbWFwIHZpZXcgYmVjb21lcyBhdmFpbGFibGUgdmlhIEppbXVNYXBWaWV3Q29tcG9uZW50XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIE5vdGlmaWVzIEhlbHBlclNpbXBsZSBvZiBzZWxlY3Rpb24gY2hhbmdlcy5cbiAgICogQ2FsbGVkIGJ5IFF1ZXJ5VGFza1Jlc3VsdCB3aGVuIHNlbGVjdGlvbiBpcyBtYWRlLlxuICAgKiBcbiAgICogQHBhcmFtIHJlY29yZElkcyAtIEFycmF5IG9mIHNlbGVjdGVkIHJlY29yZCBJRHNcbiAgICogQHBhcmFtIGRhdGFTb3VyY2VJZCAtIE9wdGlvbmFsIGRhdGEgc291cmNlIElEXG4gICAqL1xuICBub3RpZnlIZWxwZXJTaW1wbGVPZlNlbGVjdGlvbiA9IChyZWNvcmRJZHM6IHN0cmluZ1tdLCBkYXRhU291cmNlSWQ/OiBzdHJpbmcpID0+IHtcbiAgICBjb25zdCB7IGlkIH0gPSB0aGlzLnByb3BzXG4gICAgXG4gICAgY29uc3QgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoUVVFUllTSU1QTEVfU0VMRUNUSU9OX0VWRU5ULCB7XG4gICAgICBkZXRhaWw6IHtcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICByZWNvcmRJZHMsXG4gICAgICAgIGRhdGFTb3VyY2VJZFxuICAgICAgfSxcbiAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICBjYW5jZWxhYmxlOiB0cnVlXG4gICAgfSlcbiAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChldmVudClcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHVwIHZpc2liaWxpdHkgZGV0ZWN0aW9uIHRvIHRyYWNrIHdoZW4gdGhlIHdpZGdldCBwYW5lbCBpcyBvcGVuL2Nsb3NlZC5cbiAgICogVXNlcyBJbnRlcnNlY3Rpb25PYnNlcnZlciBpZiBhdmFpbGFibGUsIGZhbGxzIGJhY2sgdG8gcGVyaW9kaWMgY2hlY2tpbmcuXG4gICAqL1xuICBzZXR1cFZpc2liaWxpdHlEZXRlY3Rpb24gPSAoKSA9PiB7XG4gICAgLy8gV2FpdCBmb3IgbmV4dCB0aWNrIHRvIGVuc3VyZSByZWYgaXMgc2V0XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBpZiAoIXRoaXMud2lkZ2V0UmVmLmN1cnJlbnQpIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdXSURHRVQtU1RBVEUnLCB7XG4gICAgICAgICAgZXZlbnQ6ICd2aXNpYmlsaXR5LWRldGVjdGlvbi1zZXR1cC1mYWlsZWQnLFxuICAgICAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgICAgIHJlYXNvbjogJ3dpZGdldC1yZWYtbm90LWF2YWlsYWJsZSdcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLndpZGdldFJlZi5jdXJyZW50XG5cbiAgICAgIC8vIE1ldGhvZCAxOiBJbnRlcnNlY3Rpb25PYnNlcnZlciAobW9zdCBlZmZpY2llbnQpXG4gICAgICBpZiAoJ0ludGVyc2VjdGlvbk9ic2VydmVyJyBpbiB3aW5kb3cpIHtcbiAgICAgICAgdGhpcy52aXNpYmlsaXR5T2JzZXJ2ZXIgPSBuZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoXG4gICAgICAgICAgKGVudHJpZXMpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGVudHJ5ID0gZW50cmllc1swXVxuICAgICAgICAgICAgY29uc3QgaXNWaXNpYmxlID0gZW50cnkuaXNJbnRlcnNlY3RpbmcgJiYgZW50cnkuaW50ZXJzZWN0aW9uUmF0aW8gPiAwXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIE9ubHkgbG9nIGlmIHN0YXRlIGNoYW5nZWRcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlLmlzUGFuZWxWaXNpYmxlICE9PSBpc1Zpc2libGUpIHtcbiAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGlzUGFuZWxWaXNpYmxlOiBpc1Zpc2libGUgfSlcbiAgICAgICAgICAgICAgdGhpcy5sb2dWaXNpYmlsaXR5Q2hhbmdlKGlzVmlzaWJsZSwgJ0ludGVyc2VjdGlvbk9ic2VydmVyJylcbiAgICAgICAgICAgICAgdGhpcy5ub3RpZnlIZWxwZXJTaW1wbGVPZlBhbmVsU3RhdGUoaXNWaXNpYmxlKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgdGhyZXNob2xkOiBbMCwgMC4xLCAxLjBdLCAvLyBUcmlnZ2VyIGF0IDAlLCAxMCUsIGFuZCAxMDAlIHZpc2liaWxpdHlcbiAgICAgICAgICAgIHJvb3RNYXJnaW46ICcwcHgnXG4gICAgICAgICAgfVxuICAgICAgICApXG4gICAgICAgIFxuICAgICAgICB0aGlzLnZpc2liaWxpdHlPYnNlcnZlci5vYnNlcnZlKGVsZW1lbnQpXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnV0lER0VULVNUQVRFJywge1xuICAgICAgICAgIGV2ZW50OiAndmlzaWJpbGl0eS1kZXRlY3Rpb24tc2V0dXAnLFxuICAgICAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgICAgIG1ldGhvZDogJ0ludGVyc2VjdGlvbk9ic2VydmVyJ1xuICAgICAgICB9KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gTWV0aG9kIDI6IEZhbGxiYWNrIHRvIHBlcmlvZGljIGNoZWNraW5nXG4gICAgICAgIHRoaXMudmlzaWJpbGl0eUNoZWNrSW50ZXJ2YWwgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IGlzVmlzaWJsZSA9IHRoaXMuY2hlY2tWaXNpYmlsaXR5KClcbiAgICAgICAgICBpZiAodGhpcy5zdGF0ZS5pc1BhbmVsVmlzaWJsZSAhPT0gaXNWaXNpYmxlKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgaXNQYW5lbFZpc2libGU6IGlzVmlzaWJsZSB9KVxuICAgICAgICAgICAgdGhpcy5sb2dWaXNpYmlsaXR5Q2hhbmdlKGlzVmlzaWJsZSwgJ3BlcmlvZGljLWNoZWNrJylcbiAgICAgICAgICAgIHRoaXMubm90aWZ5SGVscGVyU2ltcGxlT2ZQYW5lbFN0YXRlKGlzVmlzaWJsZSlcbiAgICAgICAgICB9XG4gICAgICAgIH0sIDI1MCkgLy8gQ2hlY2sgZXZlcnkgMjUwbXNcbiAgICAgICAgXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnV0lER0VULVNUQVRFJywge1xuICAgICAgICAgIGV2ZW50OiAndmlzaWJpbGl0eS1kZXRlY3Rpb24tc2V0dXAnLFxuICAgICAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgICAgIG1ldGhvZDogJ3BlcmlvZGljLWNoZWNrJ1xuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0sIDEwMClcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhbnMgdXAgdmlzaWJpbGl0eSBkZXRlY3Rpb24gb2JzZXJ2ZXJzL2ludGVydmFscy5cbiAgICovXG4gIGNsZWFudXBWaXNpYmlsaXR5RGV0ZWN0aW9uID0gKCkgPT4ge1xuICAgIGlmICh0aGlzLnZpc2liaWxpdHlPYnNlcnZlcikge1xuICAgICAgdGhpcy52aXNpYmlsaXR5T2JzZXJ2ZXIuZGlzY29ubmVjdCgpXG4gICAgICB0aGlzLnZpc2liaWxpdHlPYnNlcnZlciA9IG51bGxcbiAgICB9XG4gICAgXG4gICAgaWYgKHRoaXMudmlzaWJpbGl0eUNoZWNrSW50ZXJ2YWwgIT09IG51bGwpIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy52aXNpYmlsaXR5Q2hlY2tJbnRlcnZhbClcbiAgICAgIHRoaXMudmlzaWJpbGl0eUNoZWNrSW50ZXJ2YWwgPSBudWxsXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgbWFwIHZpZXcgY2hhbmdlIGZyb20gSmltdU1hcFZpZXdDb21wb25lbnQuXG4gICAqIFdoZW4gbWFwIHZpZXcgYmVjb21lcyBhdmFpbGFibGUsIGluaXRpYWxpemUgZ3JhcGhpY3MgbGF5ZXIgaWYgZW5hYmxlZC5cbiAgICovXG4gIHByaXZhdGUgaGFuZGxlSmltdU1hcFZpZXdDaGFuZ2VkID0gKGppbXVNYXBWaWV3OiBKaW11TWFwVmlldyB8IG51bGwpID0+IHtcbiAgICBjb25zdCB7IGlkLCBjb25maWcgfSA9IHRoaXMucHJvcHNcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgZXZlbnQ6ICdoYW5kbGVKaW11TWFwVmlld0NoYW5nZWQnLFxuICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgaGFzSmltdU1hcFZpZXc6ICEhamltdU1hcFZpZXcsXG4gICAgICBoYXNWaWV3OiAhIShqaW11TWFwVmlldz8udmlldyksXG4gICAgICB2aWV3VHlwZTogamltdU1hcFZpZXc/LnZpZXc/LnR5cGUgfHwgJ25vbmUnLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICAvLyBTdG9yZSBKaW11TWFwVmlldyBpbiBzdGF0ZVxuICAgIHRoaXMuc2V0U3RhdGUoeyBqaW11TWFwVmlldzogamltdU1hcFZpZXcgfHwgdW5kZWZpbmVkIH0pXG4gICAgXG4gICAgLy8gSWYgbWFwIHZpZXcgaXMgYXZhaWxhYmxlIGFuZCBncmFwaGljcyBsYXllciBpcyBlbmFibGVkLCBpbml0aWFsaXplIGl0XG4gICAgaWYgKGppbXVNYXBWaWV3Py52aWV3ICYmIGNvbmZpZy51c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0ICYmICF0aGlzLmdyYXBoaWNzTGF5ZXJSZWYuY3VycmVudCkge1xuICAgICAgdGhpcy5pbml0aWFsaXplR3JhcGhpY3NMYXllcihqaW11TWFwVmlldy52aWV3KVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplcyB0aGUgZ3JhcGhpY3MgbGF5ZXIgdXNpbmcgdGhlIHByb3ZpZGVkIG1hcCB2aWV3LlxuICAgKi9cbiAgcHJpdmF0ZSBpbml0aWFsaXplR3JhcGhpY3NMYXllciA9IGFzeW5jIChtYXBWaWV3OiBfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXcpID0+IHtcbiAgICBjb25zdCB7IGlkIH0gPSB0aGlzLnByb3BzXG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIC8vIENyZWF0ZSBvciBnZXQgZ3JhcGhpY3MgbGF5ZXJcbiAgICAgIGNvbnN0IGdyYXBoaWNzTGF5ZXIgPSBhd2FpdCBjcmVhdGVPckdldEdyYXBoaWNzTGF5ZXIoaWQsIG1hcFZpZXcpXG4gICAgICBpZiAoIWdyYXBoaWNzTGF5ZXIpIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgICAgICBldmVudDogJ2luaXRpYWxpemVHcmFwaGljc0xheWVyLWZhaWxlZCcsXG4gICAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICAgIHJlYXNvbjogJ2dyYXBoaWNzLWxheWVyLWNyZWF0aW9uLWZhaWxlZCcsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH0pXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICAvLyBTdG9yZSByZWZlcmVuY2VzXG4gICAgICB0aGlzLm1hcFZpZXdSZWYuY3VycmVudCA9IG1hcFZpZXdcbiAgICAgIHRoaXMuZ3JhcGhpY3NMYXllclJlZi5jdXJyZW50ID0gZ3JhcGhpY3NMYXllclxuXG4gICAgICAvLyBVcGRhdGUgc3RhdGUgdG8gZm9yY2UgcmUtcmVuZGVyIGFuZCB1cGRhdGUgcHJvcHNcbiAgICAgIHRoaXMuc2V0U3RhdGUoeyBncmFwaGljc0xheWVySW5pdGlhbGl6ZWQ6IHRydWUgfSlcblxuICAgICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgICAgZXZlbnQ6ICdpbml0aWFsaXplR3JhcGhpY3NMYXllci1zdWNjZXNzJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICBncmFwaGljc0xheWVySWQ6IGdyYXBoaWNzTGF5ZXIuaWQsXG4gICAgICAgIHZpZXdUeXBlOiBtYXBWaWV3LnR5cGUgfHwgJ3Vua25vd24nLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICAgIGV2ZW50OiAnaW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXItZXJyb3InLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvciksXG4gICAgICAgIGVycm9yU3RhY2s6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplcyBncmFwaGljcyBsYXllciBsYXppbHkgd2hlbiBvdXRwdXREUyBiZWNvbWVzIGF2YWlsYWJsZS5cbiAgICogTm93IHVzZXMgdGhlIG1hcCB2aWV3IGZyb20gSmltdU1hcFZpZXdDb21wb25lbnQgaW5zdGVhZCBvZiB0cnlpbmcgdG8gZ2V0IGl0IGZyb20gZGF0YSBzb3VyY2UuXG4gICAqL1xuICBwdWJsaWMgaW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXJGcm9tT3V0cHV0RFMgPSBhc3luYyAob3V0cHV0RFM6IERhdGFTb3VyY2UpID0+IHtcbiAgICBjb25zdCB7IGlkLCBjb25maWcgfSA9IHRoaXMucHJvcHNcbiAgICBcbiAgICAvLyBPbmx5IGluaXRpYWxpemUgaWYgZW5hYmxlZCBhbmQgbm90IGFscmVhZHkgaW5pdGlhbGl6ZWRcbiAgICBpZiAoIWNvbmZpZy51c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0IHx8IHRoaXMuZ3JhcGhpY3NMYXllclJlZi5jdXJyZW50KSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgICBldmVudDogJ2luaXRpYWxpemVHcmFwaGljc0xheWVyRnJvbU91dHB1dERTLXNraXBwZWQnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIHJlYXNvbjogIWNvbmZpZy51c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0ID8gJ25vdC1lbmFibGVkJyA6ICdhbHJlYWR5LWluaXRpYWxpemVkJyxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gVXNlIG1hcCB2aWV3IGZyb20gSmltdU1hcFZpZXdDb21wb25lbnQgaWYgYXZhaWxhYmxlXG4gICAgY29uc3QgbWFwVmlldyA9IHRoaXMuc3RhdGUuamltdU1hcFZpZXc/LnZpZXcgfHwgdGhpcy5tYXBWaWV3UmVmLmN1cnJlbnRcbiAgICBpZiAoIW1hcFZpZXcpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICAgIGV2ZW50OiAnaW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXJGcm9tT3V0cHV0RFMtc2tpcHBlZCcsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgcmVhc29uOiAnbWFwLXZpZXctbm90LWF2YWlsYWJsZS15ZXQnLFxuICAgICAgICBvdXRwdXREU0lkOiBvdXRwdXREUy5pZCxcbiAgICAgICAgaGFzSmltdU1hcFZpZXc6ICEhdGhpcy5zdGF0ZS5qaW11TWFwVmlldyxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gSW5pdGlhbGl6ZSBncmFwaGljcyBsYXllciB3aXRoIHRoZSBtYXAgdmlld1xuICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXIobWFwVmlldylcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhbnMgdXAgdGhlIGdyYXBoaWNzIGxheWVyIHdoZW4gd2lkZ2V0IHVubW91bnRzIG9yIGNvbmZpZyBjaGFuZ2VzLlxuICAgKi9cbiAgcHJpdmF0ZSBjbGVhbnVwR3JhcGhpY3NMYXllciA9ICgpID0+IHtcbiAgICBjb25zdCB7IGlkIH0gPSB0aGlzLnByb3BzXG4gICAgY29uc3QgbWFwVmlldyA9IHRoaXMubWFwVmlld1JlZi5jdXJyZW50XG5cbiAgICBpZiAobWFwVmlldykge1xuICAgICAgY2xlYW51cEdyYXBoaWNzTGF5ZXIoaWQsIG1hcFZpZXcpXG4gICAgICB0aGlzLm1hcFZpZXdSZWYuY3VycmVudCA9IG51bGxcbiAgICAgIHRoaXMuZ3JhcGhpY3NMYXllclJlZi5jdXJyZW50ID0gbnVsbFxuXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgICBldmVudDogJ2NsZWFudXBHcmFwaGljc0xheWVyLWNvbXBsZXRlJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENsZWFycyB0aGUgZ3JhcGhpY3MgbGF5ZXIgaWYgaXQgZXhpc3RzLlxuICAgKiBUaGlzIGlzIGNhbGxlZCB3aGVuIGNsZWFyaW5nIHJlc3VsdHMgb3Igc3dpdGNoaW5nIHF1ZXJpZXMgaW4gTmV3IG1vZGUgdG8gZW5zdXJlIGdyYXBoaWNzIGFyZSByZW1vdmVkLlxuICAgKi9cbiAgcHVibGljIGNsZWFyR3JhcGhpY3NMYXllcklmRXhpc3RzID0gKCkgPT4ge1xuICAgIGNvbnN0IHsgY29uZmlnIH0gPSB0aGlzLnByb3BzXG4gICAgY29uc3QgZ3JhcGhpY3NMYXllciA9IHRoaXMuZ3JhcGhpY3NMYXllclJlZi5jdXJyZW50XG4gICAgXG4gICAgaWYgKGNvbmZpZy51c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0ICYmIGdyYXBoaWNzTGF5ZXIpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICAgIGV2ZW50OiAnY2xlYXJHcmFwaGljc0xheWVySWZFeGlzdHMtY2FsbGVkJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICAgIGdyYXBoaWNzTGF5ZXJJZDogZ3JhcGhpY3NMYXllci5pZCxcbiAgICAgICAgZ3JhcGhpY3NDb3VudDogZ3JhcGhpY3NMYXllci5ncmFwaGljcy5sZW5ndGgsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgY29uc3QgeyBjbGVhckdyYXBoaWNzTGF5ZXIgfSA9IHJlcXVpcmUoJy4vZ3JhcGhpY3MtbGF5ZXItdXRpbHMnKVxuICAgICAgY2xlYXJHcmFwaGljc0xheWVyKGdyYXBoaWNzTGF5ZXIpXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICAgIGV2ZW50OiAnY2xlYXJHcmFwaGljc0xheWVySWZFeGlzdHMtY29tcGxldGUnLFxuICAgICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgICAgZ3JhcGhpY3NMYXllcklkOiBncmFwaGljc0xheWVyLmlkLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICAgIGV2ZW50OiAnY2xlYXJHcmFwaGljc0xheWVySWZFeGlzdHMtc2tpcHBlZCcsXG4gICAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgICByZWFzb246ICFjb25maWcudXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCA/ICdub3QtZW5hYmxlZCcgOiAnbm8tZ3JhcGhpY3MtbGF5ZXInLFxuICAgICAgICBoYXNHcmFwaGljc0xheWVyOiAhIWdyYXBoaWNzTGF5ZXIsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2tzIGlmIHRoZSB3aWRnZXQgZWxlbWVudCBpcyBjdXJyZW50bHkgdmlzaWJsZS5cbiAgICogRmFsbGJhY2sgbWV0aG9kIHdoZW4gSW50ZXJzZWN0aW9uT2JzZXJ2ZXIgaXMgbm90IGF2YWlsYWJsZS5cbiAgICovXG4gIGNoZWNrVmlzaWJpbGl0eSA9ICgpOiBib29sZWFuID0+IHtcbiAgICBpZiAoIXRoaXMud2lkZ2V0UmVmLmN1cnJlbnQpIHJldHVybiBmYWxzZVxuICAgIFxuICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLndpZGdldFJlZi5jdXJyZW50XG4gICAgY29uc3Qgc3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KVxuICAgIGNvbnN0IHJlY3QgPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG4gICAgXG4gICAgY29uc3QgaXNWaXNpYmxlID0gKFxuICAgICAgc3R5bGUuZGlzcGxheSAhPT0gJ25vbmUnICYmXG4gICAgICBzdHlsZS52aXNpYmlsaXR5ICE9PSAnaGlkZGVuJyAmJlxuICAgICAgc3R5bGUub3BhY2l0eSAhPT0gJzAnICYmXG4gICAgICByZWN0LndpZHRoID4gMCAmJlxuICAgICAgcmVjdC5oZWlnaHQgPiAwICYmXG4gICAgICByZWN0LnRvcCA8IHdpbmRvdy5pbm5lckhlaWdodCAmJlxuICAgICAgcmVjdC5ib3R0b20gPiAwICYmXG4gICAgICByZWN0LmxlZnQgPCB3aW5kb3cuaW5uZXJXaWR0aCAmJlxuICAgICAgcmVjdC5yaWdodCA+IDBcbiAgICApXG4gICAgXG4gICAgcmV0dXJuIGlzVmlzaWJsZVxuICB9XG5cbiAgLyoqXG4gICAqIFRyYWNrcyBzZWxlY3Rpb24gY2hhbmdlcyBmcm9tIHF1ZXJ5LXJlc3VsdC5cbiAgICogSW4gXCJBZGQgdG9cIiBvciBcIlJlbW92ZSBmcm9tXCIgbW9kZXMsIHVzZXMgYWNjdW11bGF0ZWQgcmVjb3JkcyBjb3VudCBmb3IgcmVzdG9yYXRpb24uXG4gICAqL1xuICBoYW5kbGVTZWxlY3Rpb25DaGFuZ2UgPSAoZXZlbnQ6IEV2ZW50KSA9PiB7XG4gICAgY29uc3QgY3VzdG9tRXZlbnQgPSBldmVudCBhcyBDdXN0b21FdmVudDx7IHdpZGdldElkOiBzdHJpbmcsIHJlY29yZElkczogc3RyaW5nW10sIGRhdGFTb3VyY2VJZD86IHN0cmluZywgb3V0cHV0RHNJZD86IHN0cmluZywgcXVlcnlJdGVtQ29uZmlnSWQ/OiBzdHJpbmcgfT5cbiAgICBjb25zdCB7IGlkIH0gPSB0aGlzLnByb3BzXG4gICAgXG4gICAgLy8gT25seSB0cmFjayBpZiB0aGlzIGlzIGZvciBvdXIgd2lkZ2V0XG4gICAgaWYgKGN1c3RvbUV2ZW50LmRldGFpbC53aWRnZXRJZCAhPT0gaWQpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBcbiAgICBjb25zdCBoYXNTZWxlY3Rpb24gPSBjdXN0b21FdmVudC5kZXRhaWwucmVjb3JkSWRzICYmIGN1c3RvbUV2ZW50LmRldGFpbC5yZWNvcmRJZHMubGVuZ3RoID4gMFxuICAgIFxuICAgIC8vIElmIHRoZSBwYW5lbCBpcyBOT1QgdmlzaWJsZSwgYW5kIHdlIGFyZSByZWNlaXZpbmcgYW4gRU1QVFkgc2VsZWN0aW9uLFxuICAgIC8vIGl0J3MgYWxtb3N0IGNlcnRhaW5seSBvdXIgb3duICdjbGVhclNlbGVjdGlvbkZyb21NYXAnIGxvZ2ljIGZpcmluZy5cbiAgICAvLyBXZSBzaG91bGQgSUdOT1JFIHRoaXMgc28gd2UgZG9uJ3Qgd2lwZSBvdXQgdGhlIGxhc3RTZWxlY3Rpb24gc3RhdGUuXG4gICAgaWYgKCF0aGlzLnN0YXRlLmlzUGFuZWxWaXNpYmxlICYmICFoYXNTZWxlY3Rpb24pIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgZXZlbnQ6ICdoYW5kbGVTZWxlY3Rpb25DaGFuZ2UtaWdub3JpbmctZW1wdHktc2VsZWN0aW9uLXdoaWxlLXBhbmVsLWNsb3NlZCcsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIC8vIEluIFwiQWRkIHRvXCIgb3IgXCJSZW1vdmUgZnJvbVwiIG1vZGUsIHVzZSBhY2N1bXVsYXRlZCByZWNvcmRzIGNvdW50IGZvciByZXN0b3JhdGlvblxuICAgIC8vIFRoZSBhY2N1bXVsYXRlZCByZWNvcmRzIGFyZSB0aGUgc291cmNlIG9mIHRydXRoIGZvciB3aGF0IHNob3VsZCBiZSByZXN0b3JlZFxuICAgIGNvbnN0IGlzQWNjdW11bGF0aW9uTW9kZSA9IHRoaXMuc3RhdGUucmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb24gfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uXG4gICAgY29uc3QgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQgPSB0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDBcbiAgICBjb25zdCBzZWxlY3Rpb25Db3VudCA9IGlzQWNjdW11bGF0aW9uTW9kZSAmJiBhY2N1bXVsYXRlZFJlY29yZHNDb3VudCA+IDBcbiAgICAgID8gYWNjdW11bGF0ZWRSZWNvcmRzQ291bnRcbiAgICAgIDogKGhhc1NlbGVjdGlvbiA/IGN1c3RvbUV2ZW50LmRldGFpbC5yZWNvcmRJZHMubGVuZ3RoIDogMClcbiAgICBcbiAgICAvLyBJZiBzZWxlY3Rpb24gaXMgY2xlYXJlZCBhbmQgd2UncmUgaW4gUmVtb3ZlIG1vZGUsIHJlc2V0IHRvIE5ld1NlbGVjdGlvbiBtb2RlXG4gICAgLy8gUmVtb3ZlIG1vZGUgcmVxdWlyZXMgc2VsZWN0aW9uIHRvIGZ1bmN0aW9uLCBzbyBpdCBzaG91bGQgYmUgZGlzYWJsZWQgd2hlbiBzZWxlY3Rpb24gaXMgZW1wdHlcbiAgICBjb25zdCBzaG91bGRSZXNldE1vZGUgPSAhaGFzU2VsZWN0aW9uICYmIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGlvbkNvdW50ID09PSAwICYmIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUucmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvblxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgIGV2ZW50OiAnaGFuZGxlU2VsZWN0aW9uQ2hhbmdlLXVwZGF0aW5nLXN0YXRlJyxcbiAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgIHJlc3VsdHNNb2RlOiB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlLFxuICAgICAgaXNBY2N1bXVsYXRpb25Nb2RlLFxuICAgICAgZXZlbnRSZWNvcmRJZHNDb3VudDogY3VzdG9tRXZlbnQuZGV0YWlsLnJlY29yZElkcy5sZW5ndGgsXG4gICAgICBoYXNTZWxlY3Rpb25Gcm9tRXZlbnQ6IGhhc1NlbGVjdGlvbixcbiAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50QmVmb3JlOiBhY2N1bXVsYXRlZFJlY29yZHNDb3VudCxcbiAgICAgIGNhbGN1bGF0ZWRTZWxlY3Rpb25Db3VudDogc2VsZWN0aW9uQ291bnQsXG4gICAgICAnd2lsbC1zZXQtaGFzU2VsZWN0aW9uJzogc2VsZWN0aW9uQ291bnQgPiAwLFxuICAgICAgJ3dpbGwtc2V0LWxhc3RTZWxlY3Rpb24nOiBoYXNTZWxlY3Rpb24gJiYgISFjdXN0b21FdmVudC5kZXRhaWwub3V0cHV0RHNJZCAmJiAhIWN1c3RvbUV2ZW50LmRldGFpbC5xdWVyeUl0ZW1Db25maWdJZCxcbiAgICAgICd3aWxsLXJlc2V0LW1vZGUnOiBzaG91bGRSZXNldE1vZGUsXG4gICAgICBkZWNpc2lvbkxvZ2ljOiB7XG4gICAgICAgICdpc0FjY3VtdWxhdGlvbk1vZGUnOiBpc0FjY3VtdWxhdGlvbk1vZGUsXG4gICAgICAgICdhY2N1bXVsYXRlZFJlY29yZHNDb3VudCA+IDAnOiBhY2N1bXVsYXRlZFJlY29yZHNDb3VudCA+IDAsXG4gICAgICAgICd1c2UtYWNjdW11bGF0ZWQtY291bnQnOiBpc0FjY3VtdWxhdGlvbk1vZGUgJiYgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQgPiAwLFxuICAgICAgICAndXNlLWV2ZW50LWNvdW50JzogIShpc0FjY3VtdWxhdGlvbk1vZGUgJiYgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQgPiAwKSxcbiAgICAgICAgJ3Nob3VsZC1yZXNldC1tb2RlJzogc2hvdWxkUmVzZXRNb2RlXG4gICAgICB9XG4gICAgfSlcbiAgICBcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIGhhc1NlbGVjdGlvbjogc2VsZWN0aW9uQ291bnQgPiAwLFxuICAgICAgc2VsZWN0aW9uUmVjb3JkQ291bnQ6IHNlbGVjdGlvbkNvdW50LFxuICAgICAgLy8gU3RvcmUgbGFzdFNlbGVjdGlvbiBmb3IgY29tcGF0aWJpbGl0eSwgYnV0IHJlc3RvcmF0aW9uIHdpbGwgdXNlIGFjY3VtdWxhdGVkUmVjb3JkcyBpbiBBZGQvUmVtb3ZlIG1vZGVzXG4gICAgICBsYXN0U2VsZWN0aW9uOiBoYXNTZWxlY3Rpb24gJiYgY3VzdG9tRXZlbnQuZGV0YWlsLm91dHB1dERzSWQgJiYgY3VzdG9tRXZlbnQuZGV0YWlsLnF1ZXJ5SXRlbUNvbmZpZ0lkXG4gICAgICAgID8ge1xuICAgICAgICAgICAgcmVjb3JkSWRzOiBjdXN0b21FdmVudC5kZXRhaWwucmVjb3JkSWRzLFxuICAgICAgICAgICAgb3V0cHV0RHNJZDogY3VzdG9tRXZlbnQuZGV0YWlsLm91dHB1dERzSWQsXG4gICAgICAgICAgICBxdWVyeUl0ZW1Db25maWdJZDogY3VzdG9tRXZlbnQuZGV0YWlsLnF1ZXJ5SXRlbUNvbmZpZ0lkXG4gICAgICAgICAgfVxuICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgIC8vIFJlc2V0IG1vZGUgdG8gTmV3U2VsZWN0aW9uIGlmIHNlbGVjdGlvbiBpcyBjbGVhcmVkIGluIFJlbW92ZSBtb2RlXG4gICAgICAuLi4oc2hvdWxkUmVzZXRNb2RlID8ge1xuICAgICAgICByZXN1bHRzTW9kZTogU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb24sXG4gICAgICAgIGFjY3VtdWxhdGVkUmVjb3JkczogW10gLy8gQWxzbyBjbGVhciBhY2N1bXVsYXRlZCByZWNvcmRzIHdoZW4gcmVzZXR0aW5nIG1vZGVcbiAgICAgIH0gOiB7fSlcbiAgICB9KVxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgIGV2ZW50OiAnaGFuZGxlU2VsZWN0aW9uQ2hhbmdlLXN0YXRlLXVwZGF0ZWQnLFxuICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgJ25ldy1oYXNTZWxlY3Rpb24nOiBzZWxlY3Rpb25Db3VudCA+IDAsXG4gICAgICAnbmV3LXNlbGVjdGlvblJlY29yZENvdW50Jzogc2VsZWN0aW9uQ291bnQsXG4gICAgICAnbmV3LWxhc3RTZWxlY3Rpb24tcmVjb3JkSWRzLWNvdW50JzogaGFzU2VsZWN0aW9uICYmIGN1c3RvbUV2ZW50LmRldGFpbC5vdXRwdXREc0lkICYmIGN1c3RvbUV2ZW50LmRldGFpbC5xdWVyeUl0ZW1Db25maWdJZFxuICAgICAgICA/IGN1c3RvbUV2ZW50LmRldGFpbC5yZWNvcmRJZHMubGVuZ3RoXG4gICAgICAgIDogMCxcbiAgICAgICdtb2RlLXJlc2V0Jzogc2hvdWxkUmVzZXRNb2RlLFxuICAgICAgJ25ldy1tb2RlJzogc2hvdWxkUmVzZXRNb2RlID8gU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb24gOiB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlLFxuICAgICAgJ25vdGUnOiBzaG91bGRSZXNldE1vZGUgXG4gICAgICAgID8gJ01vZGUgcmVzZXQgdG8gTmV3U2VsZWN0aW9uIGJlY2F1c2Ugc2VsZWN0aW9uIHdhcyBjbGVhcmVkIGluIFJlbW92ZSBtb2RlJ1xuICAgICAgICA6ICdsYXN0U2VsZWN0aW9uLW9ubHktY29udGFpbnMtY3VycmVudC1xdWVyeS1yZWNvcmRzLW5vdC1hbGwtYWNjdW11bGF0ZWQtcmVjb3JkcydcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgcmVzdG9yZSByZXF1ZXN0IHdoZW4gaWRlbnRpZnkgcG9wdXAgY2xvc2VzLlxuICAgKiBPbmx5IHJlc3RvcmVzIGlmIHdpZGdldCBwYW5lbCBpcyBvcGVuLlxuICAgKiBJbiBcIkFkZCB0b1wiIG9yIFwiUmVtb3ZlIGZyb21cIiBtb2RlcywgcmVzdG9yZXMgYWxsIGFjY3VtdWxhdGVkIHJlY29yZHMuXG4gICAqL1xuICBwcml2YXRlIGhhbmRsZVJlc3RvcmVPbklkZW50aWZ5Q2xvc2UgPSAoZXZlbnQ6IEV2ZW50KSA9PiB7XG4gICAgY29uc3QgY3VzdG9tRXZlbnQgPSBldmVudCBhcyBDdXN0b21FdmVudDx7IFxuICAgICAgd2lkZ2V0SWQ6IHN0cmluZywgXG4gICAgICByZWNvcmRJZHM6IHN0cmluZ1tdLCBcbiAgICAgIG91dHB1dERzSWQ6IHN0cmluZyxcbiAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBzdHJpbmdcbiAgICB9PlxuICAgIGNvbnN0IHsgaWQgfSA9IHRoaXMucHJvcHNcbiAgICBcbiAgICAvLyBPbmx5IGhhbmRsZSBpZiB0aGlzIGlzIGZvciBvdXIgd2lkZ2V0XG4gICAgaWYgKGN1c3RvbUV2ZW50LmRldGFpbC53aWRnZXRJZCAhPT0gaWQpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBcbiAgICBjb25zdCBpc1dpZGdldE9wZW4gPSB0aGlzLnN0YXRlLmlzUGFuZWxWaXNpYmxlID09PSB0cnVlXG4gICAgY29uc3QgaXNBY2N1bXVsYXRpb25Nb2RlID0gdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbiB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb25cbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICBldmVudDogJ2lkZW50aWZ5LXBvcHVwLWNsb3NlZC1yZXN0b3JlLXJlcXVlc3RlZCcsXG4gICAgICB3aWRnZXRJZDogaWQsXG4gICAgICBpc1dpZGdldE9wZW4sXG4gICAgICByZXN1bHRzTW9kZTogdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSxcbiAgICAgIGlzQWNjdW11bGF0aW9uTW9kZSxcbiAgICAgIGV2ZW50UmVjb3JkSWRzQ291bnQ6IGN1c3RvbUV2ZW50LmRldGFpbC5yZWNvcmRJZHMubGVuZ3RoLFxuICAgICAgaGFzU2VsZWN0aW9uOiB0aGlzLnN0YXRlLmhhc1NlbGVjdGlvbiB8fCBmYWxzZSxcbiAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiB0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICBoYXNMYXN0U2VsZWN0aW9uOiAhIXRoaXMuc3RhdGUubGFzdFNlbGVjdGlvbixcbiAgICAgIGxhc3RTZWxlY3Rpb25SZWNvcmRDb3VudDogdGhpcy5zdGF0ZS5sYXN0U2VsZWN0aW9uPy5yZWNvcmRJZHMubGVuZ3RoIHx8IDAsXG4gICAgICBvdXRwdXREc0lkOiBjdXN0b21FdmVudC5kZXRhaWwub3V0cHV0RHNJZCxcbiAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBjdXN0b21FdmVudC5kZXRhaWwucXVlcnlJdGVtQ29uZmlnSWRcbiAgICB9KVxuICAgIFxuICAgIC8vIE9ubHkgcmVzdG9yZSBpZiB3aWRnZXQgaXMgb3BlblxuICAgIGlmICghaXNXaWRnZXRPcGVuKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAnaWRlbnRpZnktcG9wdXAtY2xvc2VkLXJlc3RvcmUtc2tpcHBlZC13aWRnZXQtY2xvc2VkJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICByZWNvcmRDb3VudDogY3VzdG9tRXZlbnQuZGV0YWlsLnJlY29yZElkcy5sZW5ndGhcbiAgICAgIH0pXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgLy8gSFlQT1RIRVNJUzogU2hvdWxkIGFsd2F5cyBjaGVjayBhY2N1bXVsYXRlZFJlY29yZHMgZmlyc3QsIHJlZ2FyZGxlc3Mgb2YgbW9kZVxuICAgIGlmICh0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3JkcyAmJiB0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAnaWRlbnRpZnktcG9wdXAtY2xvc2VkLWZvdW5kLWFjY3VtdWxhdGVkLXJlY29yZHMnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIHJlc3VsdHNNb2RlOiB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlLFxuICAgICAgICBpc0FjY3VtdWxhdGlvbk1vZGUsXG4gICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiB0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgICdzaG91bGQtdXNlLWFjY3VtdWxhdGVkJzogdHJ1ZSxcbiAgICAgICAgJ2N1cnJlbnQtY29uZGl0aW9uLWNoZWNrJzogaXNBY2N1bXVsYXRpb25Nb2RlLFxuICAgICAgICAnY29uZGl0aW9uLXJlc3VsdCc6IGlzQWNjdW11bGF0aW9uTW9kZVxuICAgICAgfSlcbiAgICB9XG4gICAgXG4gICAgLy8gSW4gQWRkL1JlbW92ZSBtb2RlcywgY2hlY2sgYWNjdW11bGF0ZWQgcmVjb3JkcyBpbnN0ZWFkIG9mIGxhc3RTZWxlY3Rpb25cbiAgICBpZiAoaXNBY2N1bXVsYXRpb25Nb2RlKSB7XG4gICAgICBpZiAoIXRoaXMuc3RhdGUuaGFzU2VsZWN0aW9uIHx8ICF0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3JkcyB8fCB0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICAgIGV2ZW50OiAnaWRlbnRpZnktcG9wdXAtY2xvc2VkLXJlc3RvcmUtc2tpcHBlZC1uby1hY2N1bXVsYXRlZC1yZWNvcmRzJyxcbiAgICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgICAgaGFzU2VsZWN0aW9uOiB0aGlzLnN0YXRlLmhhc1NlbGVjdGlvbixcbiAgICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogdGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICAgICdoeXBvdGhlc2lzJzogJ2hhc1NlbGVjdGlvbi1pcy1mYWxzZS1vci1uby1hY2N1bXVsYXRlZC1yZWNvcmRzJyxcbiAgICAgICAgICAnbWF5YmUtaGFzU2VsZWN0aW9uLXNob3VsZC1iZS1iYXNlZC1vbi1hY2N1bXVsYXRlZC1yZWNvcmRzJzogdHJ1ZVxuICAgICAgICB9KVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gUmVzdG9yZSBhbGwgYWNjdW11bGF0ZWQgcmVjb3JkcyAoZ3JvdXBlZCBieSBvcmlnaW4gRFMpXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAnaWRlbnRpZnktcG9wdXAtY2xvc2VkLXJlc3RvcmluZy1hY2N1bXVsYXRlZC1yZWNvcmRzJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogdGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoXG4gICAgICB9KVxuICAgICAgXG4gICAgICB0aGlzLmFkZFNlbGVjdGlvblRvTWFwKClcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBcbiAgICAvLyBIWVBPVEhFU0lTOiBNYXliZSBhY2N1bXVsYXRlZFJlY29yZHMgZXhpc3QgYnV0IHdlJ3JlIG5vdCBpbiBhY2N1bXVsYXRpb24gbW9kZT9cbiAgICBpZiAodGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHMgJiYgdGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCAmJiAhaXNBY2N1bXVsYXRpb25Nb2RlKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAnaWRlbnRpZnktcG9wdXAtY2xvc2VkLWFjY3VtdWxhdGVkLXJlY29yZHMtZXhpc3QtYnV0LW5vdC1hY2N1bXVsYXRpb24tbW9kZScsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgcmVzdWx0c01vZGU6IHRoaXMuc3RhdGUucmVzdWx0c01vZGUsXG4gICAgICAgIGlzQWNjdW11bGF0aW9uTW9kZSxcbiAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IHRoaXMuc3RhdGUuYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgJ2h5cG90aGVzaXMnOiAnYWNjdW11bGF0ZWQtcmVjb3Jkcy1leGlzdC1idXQtbW9kZS1pcy1ub3QtYWRkLW9yLXJlbW92ZScsXG4gICAgICAgICdzaG91bGQtd2Utc3RpbGwtdXNlLXRoZW0nOiAnTkVFRFMtSU5WRVNUSUdBVElPTidcbiAgICAgIH0pXG4gICAgfVxuICAgIFxuICAgIC8vIEZvciBcIk5ld1wiIG1vZGUsIHVzZSBvcmlnaW5hbCB2YWxpZGF0aW9uIGxvZ2ljXG4gICAgLy8gQ2hlY2sgaWYgd2UgaGF2ZSBtYXRjaGluZyBzZWxlY3Rpb24gc3RhdGVcbiAgICBpZiAoIXRoaXMuc3RhdGUuaGFzU2VsZWN0aW9uIHx8ICF0aGlzLnN0YXRlLmxhc3RTZWxlY3Rpb24pIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgZXZlbnQ6ICdpZGVudGlmeS1wb3B1cC1jbG9zZWQtcmVzdG9yZS1za2lwcGVkLW5vLXNlbGVjdGlvbicsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgaGFzU2VsZWN0aW9uOiB0aGlzLnN0YXRlLmhhc1NlbGVjdGlvbixcbiAgICAgICAgaGFzTGFzdFNlbGVjdGlvbjogISF0aGlzLnN0YXRlLmxhc3RTZWxlY3Rpb25cbiAgICAgIH0pXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgLy8gVmVyaWZ5IHRoZSBvdXRwdXREc0lkIG1hdGNoZXNcbiAgICBpZiAodGhpcy5zdGF0ZS5sYXN0U2VsZWN0aW9uLm91dHB1dERzSWQgIT09IGN1c3RvbUV2ZW50LmRldGFpbC5vdXRwdXREc0lkKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAnaWRlbnRpZnktcG9wdXAtY2xvc2VkLXJlc3RvcmUtc2tpcHBlZC1kcy1taXNtYXRjaCcsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgb3VyT3V0cHV0RHNJZDogdGhpcy5zdGF0ZS5sYXN0U2VsZWN0aW9uLm91dHB1dERzSWQsXG4gICAgICAgIHJlcXVlc3RlZE91dHB1dERzSWQ6IGN1c3RvbUV2ZW50LmRldGFpbC5vdXRwdXREc0lkXG4gICAgICB9KVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIC8vIFZlcmlmeSB0aGUgcXVlcnlJdGVtQ29uZmlnSWQgbWF0Y2hlcyAob3B0aW9uYWwgYnV0IGdvb2QgdG8gY2hlY2spXG4gICAgaWYgKHRoaXMuc3RhdGUubGFzdFNlbGVjdGlvbi5xdWVyeUl0ZW1Db25maWdJZCAhPT0gY3VzdG9tRXZlbnQuZGV0YWlsLnF1ZXJ5SXRlbUNvbmZpZ0lkKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAnaWRlbnRpZnktcG9wdXAtY2xvc2VkLXJlc3RvcmUtc2tpcHBlZC1xdWVyeS1taXNtYXRjaCcsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgb3VyUXVlcnlJdGVtQ29uZmlnSWQ6IHRoaXMuc3RhdGUubGFzdFNlbGVjdGlvbi5xdWVyeUl0ZW1Db25maWdJZCxcbiAgICAgICAgcmVxdWVzdGVkUXVlcnlJdGVtQ29uZmlnSWQ6IGN1c3RvbUV2ZW50LmRldGFpbC5xdWVyeUl0ZW1Db25maWdJZFxuICAgICAgfSlcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBcbiAgICAvLyBSZXN0b3JlIHNlbGVjdGlvbiB0byBtYXAgKHJldXNlIGV4aXN0aW5nIG1ldGhvZClcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICBldmVudDogJ2lkZW50aWZ5LXBvcHVwLWNsb3NlZC1yZXN0b3Jpbmctc2VsZWN0aW9uJyxcbiAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgIHJlY29yZENvdW50OiBjdXN0b21FdmVudC5kZXRhaWwucmVjb3JkSWRzLmxlbmd0aCxcbiAgICAgIG91dHB1dERzSWQ6IGN1c3RvbUV2ZW50LmRldGFpbC5vdXRwdXREc0lkXG4gICAgfSlcbiAgICBcbiAgICB0aGlzLmFkZFNlbGVjdGlvblRvTWFwKClcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIHNlbGVjdGlvbiB0byBtYXAgd2hlbiB3aWRnZXQgb3BlbnMgKHJldXNlcyBBZGQgdG8gTWFwIGxvZ2ljKS5cbiAgICogSW4gXCJBZGQgdG9cIiBvciBcIlJlbW92ZSBmcm9tXCIgbW9kZXMsIHJlc3RvcmVzIGFsbCBhY2N1bXVsYXRlZCByZWNvcmRzIGdyb3VwZWQgYnkgb3JpZ2luIGRhdGEgc291cmNlLlxuICAgKi9cbiAgcHJpdmF0ZSBhZGRTZWxlY3Rpb25Ub01hcCA9ICgpID0+IHtcbiAgICBjb25zdCB7IGxhc3RTZWxlY3Rpb24sIGFjY3VtdWxhdGVkUmVjb3JkcywgcmVzdWx0c01vZGUgfSA9IHRoaXMuc3RhdGVcbiAgICBjb25zdCB7IGlkIH0gPSB0aGlzLnByb3BzXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgZXZlbnQ6ICdhZGRTZWxlY3Rpb25Ub01hcC1jYWxsZWQnLFxuICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgcmVzdWx0c01vZGUsXG4gICAgICBoYXNBY2N1bXVsYXRlZFJlY29yZHM6ICEhKGFjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCksXG4gICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogYWNjdW11bGF0ZWRSZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgIGhhc0xhc3RTZWxlY3Rpb246ICEhbGFzdFNlbGVjdGlvbixcbiAgICAgIGxhc3RTZWxlY3Rpb25SZWNvcmRDb3VudDogbGFzdFNlbGVjdGlvbj8ucmVjb3JkSWRzLmxlbmd0aCB8fCAwLFxuICAgICAgbGFzdFNlbGVjdGlvbk91dHB1dERzSWQ6IGxhc3RTZWxlY3Rpb24/Lm91dHB1dERzSWRcbiAgICB9KVxuICAgIFxuICAgIC8vIEluIEFkZC9SZW1vdmUgbW9kZXMsIHVzZSBhY2N1bXVsYXRlZCByZWNvcmRzIGZvciByZXN0b3JhdGlvblxuICAgIGNvbnN0IGlzQWNjdW11bGF0aW9uTW9kZSA9IHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvblxuICAgIFxuICAgIC8vIEhZUE9USEVTSVM6IFNob3VsZCBhbHdheXMgY2hlY2sgYWNjdW11bGF0ZWRSZWNvcmRzIGZpcnN0LCByZWdhcmRsZXNzIG9mIG1vZGVcbiAgICAvLyBBZGRpbmcgbG9nIHRvIHNlZSBpZiBhY2N1bXVsYXRlZFJlY29yZHMgZXhpc3QgYnV0IHdlJ3JlIG5vdCB1c2luZyB0aGVtXG4gICAgaWYgKGFjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ2FkZFNlbGVjdGlvblRvTWFwLWZvdW5kLWFjY3VtdWxhdGVkLXJlY29yZHMnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgICBpc0FjY3VtdWxhdGlvbk1vZGUsXG4gICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoLFxuICAgICAgICAnc2hvdWxkLXVzZS1hY2N1bXVsYXRlZCc6IHRydWUsXG4gICAgICAgICdjdXJyZW50LWNvbmRpdGlvbi1jaGVjayc6IGlzQWNjdW11bGF0aW9uTW9kZSAmJiBhY2N1bXVsYXRlZFJlY29yZHMgJiYgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDAsXG4gICAgICAgICdjb25kaXRpb24tcmVzdWx0JzogaXNBY2N1bXVsYXRpb25Nb2RlICYmIGFjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMFxuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ2FkZFNlbGVjdGlvblRvTWFwLW5vLWFjY3VtdWxhdGVkLXJlY29yZHMnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgICBpc0FjY3VtdWxhdGlvbk1vZGUsXG4gICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiAwLFxuICAgICAgICAnd2lsbC1mYWxsYmFjay10by1sYXN0U2VsZWN0aW9uJzogISFsYXN0U2VsZWN0aW9uXG4gICAgICB9KVxuICAgIH1cbiAgICBcbiAgICBpZiAoaXNBY2N1bXVsYXRpb25Nb2RlICYmIGFjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgLy8gR3JvdXAgYWNjdW11bGF0ZWQgcmVjb3JkcyBieSBvcmlnaW4gZGF0YSBzb3VyY2VcbiAgICAgIGNvbnN0IHJlY29yZHNCeU9yaWdpbkRTID0gbmV3IE1hcDxGZWF0dXJlTGF5ZXJEYXRhU291cmNlLCBGZWF0dXJlRGF0YVJlY29yZFtdPigpXG4gICAgICBjb25zdCBkc01hbmFnZXIgPSBEYXRhU291cmNlTWFuYWdlci5nZXRJbnN0YW5jZSgpXG4gICAgICBcbiAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkcy5mb3JFYWNoKChyZWNvcmQsIGluZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IHJlY29yZElkID0gcmVjb3JkLmdldElkKClcbiAgICAgICAgbGV0IG9yaWdpbkRTOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlIHwgbnVsbCA9IG51bGxcbiAgICAgICAgXG4gICAgICAgIC8vIE1ldGhvZCAxOiBUcnkgdG8gZ2V0IGZyb20gcmVjb3JkLmdldERhdGFTb3VyY2UoKVxuICAgICAgICBjb25zdCByZWNvcmREUyA9IHJlY29yZC5nZXREYXRhU291cmNlPy4oKSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gICAgICAgIGlmIChyZWNvcmREUykge1xuICAgICAgICAgIG9yaWdpbkRTID0gcmVjb3JkRFMuZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKT8uWzBdIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2UgfHwgcmVjb3JkRFNcbiAgICAgICAgICBcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgICAgICBldmVudDogJ2ZvdW5kLW9yaWdpbi1kcy1mcm9tLXJlY29yZC1kcycsXG4gICAgICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgICAgICByZWNvcmRJbmRleDogaW5kZXgsXG4gICAgICAgICAgICByZWNvcmRJZCxcbiAgICAgICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTPy5pZCB8fCAnbnVsbCcsXG4gICAgICAgICAgICBtZXRob2Q6ICdyZWNvcmQuZ2V0RGF0YVNvdXJjZSgpJ1xuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIE1ldGhvZCAyOiBJZiB0aGF0IGZhaWxlZCwgc2VhcmNoIGFsbCBkYXRhIHNvdXJjZXMgZm9yIGEgcmVjb3JkIHdpdGggbWF0Y2hpbmcgSURcbiAgICAgICAgaWYgKCFvcmlnaW5EUykge1xuICAgICAgICAgIGNvbnN0IGRzTWFwID0gZHNNYW5hZ2VyLmdldERhdGFTb3VyY2VzKClcbiAgICAgICAgICBjb25zdCBhbGxEYXRhU291cmNlcyA9IE9iamVjdC52YWx1ZXMoZHNNYXApXG4gICAgICAgICAgXG4gICAgICAgICAgZm9yIChjb25zdCBkcyBvZiBhbGxEYXRhU291cmNlcykge1xuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhpcyBpcyBhIEZlYXR1cmVMYXllckRhdGFTb3VyY2UgYnkgY2hlY2tpbmcgZm9yIGdldEFsbExvYWRlZFJlY29yZHMgbWV0aG9kXG4gICAgICAgICAgICBpZiAoZHMgJiYgdHlwZW9mIChkcyBhcyBhbnkpLmdldEFsbExvYWRlZFJlY29yZHMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB0aGlzIERTIGhhcyB0aGUgcmVjb3JkXG4gICAgICAgICAgICAgICAgY29uc3QgYWxsUmVjb3JkcyA9IChkcyBhcyBhbnkpLmdldEFsbExvYWRlZFJlY29yZHMoKSB8fCBbXVxuICAgICAgICAgICAgICAgIGNvbnN0IG1hdGNoaW5nUmVjb3JkID0gYWxsUmVjb3Jkcy5maW5kKChyOiBGZWF0dXJlRGF0YVJlY29yZCkgPT4gci5nZXRJZCgpID09PSByZWNvcmRJZClcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2hpbmdSZWNvcmQpIHtcbiAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIHRoZSByZWNvcmQgLSBnZXQgb3JpZ2luIERTIGZyb20gdGhpcyBEU1xuICAgICAgICAgICAgICAgICAgb3JpZ2luRFMgPSAoZHMgYXMgYW55KS5nZXRPcmlnaW5EYXRhU291cmNlcygpPy5bMF0gYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSB8fCBkcyBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdmb3VuZC1vcmlnaW4tZHMtdmlhLXNlYXJjaCcsXG4gICAgICAgICAgICAgICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgICAgICAgICAgICAgcmVjb3JkSW5kZXg6IGluZGV4LFxuICAgICAgICAgICAgICAgICAgICByZWNvcmRJZCxcbiAgICAgICAgICAgICAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ3NlYXJjaGVkLWFsbC1kYXRhLXNvdXJjZXMnLFxuICAgICAgICAgICAgICAgICAgICBzZWFyY2hlZERTSWQ6IGRzLmlkXG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgLy8gQ29udGludWUgc2VhcmNoaW5nXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmIChvcmlnaW5EUykge1xuICAgICAgICAgIGlmICghcmVjb3Jkc0J5T3JpZ2luRFMuaGFzKG9yaWdpbkRTKSkge1xuICAgICAgICAgICAgcmVjb3Jkc0J5T3JpZ2luRFMuc2V0KG9yaWdpbkRTLCBbXSlcbiAgICAgICAgICB9XG4gICAgICAgICAgcmVjb3Jkc0J5T3JpZ2luRFMuZ2V0KG9yaWdpbkRTKSEucHVzaChyZWNvcmQpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICAgICAgZXZlbnQ6ICdjb3VsZC1ub3QtZmluZC1vcmlnaW4tZHMtZm9yLXJlY29yZCcsXG4gICAgICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgICAgICByZWNvcmRJbmRleDogaW5kZXgsXG4gICAgICAgICAgICByZWNvcmRJZCxcbiAgICAgICAgICAgIHdhcm5pbmc6ICdyZWNvcmQtd2lsbC1iZS1za2lwcGVkJ1xuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgZXZlbnQ6ICdwYW5lbC1vcGVuZWQtcmVzdG9yaW5nLWFjY3VtdWxhdGVkLXJlY29yZHMnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgb3JpZ2luRFNDb3VudDogcmVjb3Jkc0J5T3JpZ2luRFMuc2l6ZVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgLy8gUmVzdG9yZSBzZWxlY3Rpb24gZm9yIGVhY2ggb3JpZ2luIGRhdGEgc291cmNlXG4gICAgICBjb25zdCB7IHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoIH0gPSByZXF1aXJlKCcuL3NlbGVjdGlvbi11dGlscycpXG4gICAgICBjb25zdCB1c2VHcmFwaGljc0xheWVyID0gdGhpcy5wcm9wcy5jb25maWcudXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodFxuICAgICAgY29uc3QgZ3JhcGhpY3NMYXllciA9IHRoaXMuZ3JhcGhpY3NMYXllclJlZi5jdXJyZW50IHx8IHVuZGVmaW5lZFxuICAgICAgY29uc3QgbWFwVmlldyA9IHRoaXMubWFwVmlld1JlZi5jdXJyZW50IHx8IHVuZGVmaW5lZFxuICAgICAgXG4gICAgICByZWNvcmRzQnlPcmlnaW5EUy5mb3JFYWNoKChyZWNvcmRzLCBvcmlnaW5EUykgPT4ge1xuICAgICAgICBjb25zdCByZWNvcmRJZHMgPSByZWNvcmRzLm1hcChyID0+IHIuZ2V0SWQoKSlcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAvLyBVc2Ugb3JpZ2luRFMgZGlyZWN0bHkgKG5vdCBvdXRwdXREUykgc2luY2UgcmVjb3JkcyBhcmUgc2VsZWN0ZWQgaW4gb3JpZ2luIGxheWVyc1xuICAgICAgICAgIC8vIFVzZSBhc3luYyBJSUZFIHNpbmNlIGZvckVhY2ggY2FsbGJhY2sgY2FuJ3QgYmUgYXN5bmNcbiAgICAgICAgICA7KGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGF3YWl0IHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoKGlkLCBvcmlnaW5EUywgcmVjb3JkSWRzLCByZWNvcmRzLCB0cnVlLCB1c2VHcmFwaGljc0xheWVyLCBncmFwaGljc0xheWVyLCBtYXBWaWV3KVxuICAgICAgICAgIH0pKClcbiAgICAgICAgICBcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgICAgICBldmVudDogJ3BhbmVsLW9wZW5lZC1yZXN0b3JlZC1vcmlnaW4tZHMnLFxuICAgICAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgICAgICByZWNvcmRDb3VudDogcmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgICAgICB6b29tRXhlY3V0ZWQ6IGZhbHNlXG4gICAgICAgICAgfSlcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgICAgICBldmVudDogJ3BhbmVsLW9wZW5lZC1yZXN0b3JlLW9yaWdpbi1kcy1mYWlsZWQnLFxuICAgICAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpLFxuICAgICAgICAgICAgZXJyb3JTdGFjazogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnN0YWNrIDogdW5kZWZpbmVkXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIC8vIEhZUE9USEVTSVM6IE1heWJlIGFjY3VtdWxhdGVkUmVjb3JkcyBleGlzdCBidXQgd2UncmUgbm90IGluIGFjY3VtdWxhdGlvbiBtb2RlP1xuICAgIC8vIE9yIG1heWJlIHdlIHNob3VsZCBhbHdheXMgY2hlY2sgYWNjdW11bGF0ZWRSZWNvcmRzIGZpcnN0P1xuICAgIGlmIChhY2N1bXVsYXRlZFJlY29yZHMgJiYgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDAgJiYgIWlzQWNjdW11bGF0aW9uTW9kZSkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ2FkZFNlbGVjdGlvblRvTWFwLWFjY3VtdWxhdGVkLXJlY29yZHMtZXhpc3QtYnV0LW5vdC1hY2N1bXVsYXRpb24tbW9kZScsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgcmVzdWx0c01vZGUsXG4gICAgICAgIGlzQWNjdW11bGF0aW9uTW9kZSxcbiAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgICdoeXBvdGhlc2lzJzogJ2FjY3VtdWxhdGVkLXJlY29yZHMtZXhpc3QtYnV0LW1vZGUtaXMtbm90LWFkZC1vci1yZW1vdmUnLFxuICAgICAgICAnc2hvdWxkLXdlLXN0aWxsLXVzZS10aGVtJzogJ05FRURTLUlOVkVTVElHQVRJT04nXG4gICAgICB9KVxuICAgIH1cbiAgICBcbiAgICAvLyBGYWxsIGJhY2sgdG8gb3JpZ2luYWwgbG9naWMgZm9yIFwiTmV3XCIgbW9kZVxuICAgIGlmICghbGFzdFNlbGVjdGlvbikge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ2FkZFNlbGVjdGlvblRvTWFwLW5vLWxhc3RTZWxlY3Rpb24tZXhpdGluZycsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgcmVzdWx0c01vZGUsXG4gICAgICAgIGhhc0FjY3VtdWxhdGVkUmVjb3JkczogISEoYWNjdW11bGF0ZWRSZWNvcmRzICYmIGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwKSxcbiAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGFjY3VtdWxhdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgICdoeXBvdGhlc2lzJzogJ25vLWxhc3RTZWxlY3Rpb24tc28tZXhpdGluZy1lYXJseS1tYXliZS1zaG91bGQtY2hlY2stYWNjdW11bGF0ZWQtcmVjb3Jkcy1maXJzdCdcbiAgICAgIH0pXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCBkc01hbmFnZXIgPSBEYXRhU291cmNlTWFuYWdlci5nZXRJbnN0YW5jZSgpXG4gICAgY29uc3Qgb3V0cHV0RFMgPSBkc01hbmFnZXIuZ2V0RGF0YVNvdXJjZShsYXN0U2VsZWN0aW9uLm91dHB1dERzSWQpIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgICBcbiAgICBpZiAoIW91dHB1dERTKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAncGFuZWwtb3BlbmVkLW91dHB1dC1kcy1ub3QtZm91bmQnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIG91dHB1dERzSWQ6IGxhc3RTZWxlY3Rpb24ub3V0cHV0RHNJZFxuICAgICAgfSlcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIEdldCByZWNvcmRzIGZyb20gb3V0cHV0IERTIChzYW1lIGFzIEFkZCB0byBNYXApXG4gICAgY29uc3QgYWxsUmVjb3JkcyA9IG91dHB1dERTLmdldEFsbExvYWRlZFJlY29yZHMoKSB8fCBbXVxuICAgIGNvbnN0IHJlY29yZHNUb1NlbGVjdCA9IGFsbFJlY29yZHMuZmlsdGVyKHJlY29yZCA9PiBcbiAgICAgIGxhc3RTZWxlY3Rpb24ucmVjb3JkSWRzLmluY2x1ZGVzKHJlY29yZC5nZXRJZCgpKVxuICAgICkgYXMgRmVhdHVyZURhdGFSZWNvcmRbXVxuICAgIFxuICAgIGlmIChyZWNvcmRzVG9TZWxlY3QubGVuZ3RoID09PSAwKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAncGFuZWwtb3BlbmVkLW5vLW1hdGNoaW5nLXJlY29yZHMnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIG91clJlY29yZENvdW50OiBsYXN0U2VsZWN0aW9uLnJlY29yZElkcy5sZW5ndGhcbiAgICAgIH0pXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyBTYW1lIGxvZ2ljIGFzIEFkZCB0byBNYXAgYWN0aW9uIC0gc2VsZWN0UmVjb3Jkc0FuZFB1Ymxpc2ggaGFuZGxlcyBkdXBsaWNhdGUgY2hlY2tpbmdcbiAgICAvLyBEb24ndCB6b29tIHdoZW4gcmVzdG9yaW5nIG9uIHdpZGdldCBvcGVuIChBZGQgdG8gTWFwIGFjdGlvbiBoYW5kbGVzIHpvb20gZm9yIG1hbnVhbCBjbGlja3MpXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgc2VsZWN0UmVjb3Jkc0FuZFB1Ymxpc2ggfSA9IHJlcXVpcmUoJy4vc2VsZWN0aW9uLXV0aWxzJylcbiAgICAgIGNvbnN0IHVzZUdyYXBoaWNzTGF5ZXIgPSB0aGlzLnByb3BzLmNvbmZpZy51c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0XG4gICAgICBjb25zdCBncmFwaGljc0xheWVyID0gdGhpcy5ncmFwaGljc0xheWVyUmVmLmN1cnJlbnQgfHwgdW5kZWZpbmVkXG4gICAgICBjb25zdCBtYXBWaWV3ID0gdGhpcy5tYXBWaWV3UmVmLmN1cnJlbnQgfHwgdW5kZWZpbmVkXG4gICAgICA7KGFzeW5jICgpID0+IHtcbiAgICAgICAgYXdhaXQgc2VsZWN0UmVjb3Jkc0FuZFB1Ymxpc2goaWQsIG91dHB1dERTLCBsYXN0U2VsZWN0aW9uLnJlY29yZElkcywgcmVjb3Jkc1RvU2VsZWN0LCB0cnVlLCB1c2VHcmFwaGljc0xheWVyLCBncmFwaGljc0xheWVyLCBtYXBWaWV3KVxuICAgICAgfSkoKVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAncGFuZWwtb3BlbmVkLXNlbGVjdGlvbi1hZGRlZC10by1tYXAnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIHJlY29yZENvdW50OiByZWNvcmRzVG9TZWxlY3QubGVuZ3RoLFxuICAgICAgICB6b29tRXhlY3V0ZWQ6IGZhbHNlXG4gICAgICB9KVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAncGFuZWwtb3BlbmVkLWFkZC10by1tYXAtZmFpbGVkJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIHJlc3VsdHMgbW9kZSBjaGFuZ2UgZnJvbSBkcm9wZG93bi5cbiAgICogVXBkYXRlcyB3aWRnZXQgc3RhdGUgYW5kIGxvZ3MgdGhlIGNoYW5nZSBmb3IgZGVidWdnaW5nLlxuICAgKi9cbiAgcHJpdmF0ZSBoYW5kbGVSZXN1bHRzTW9kZUNoYW5nZSA9IChtb2RlOiBTZWxlY3Rpb25UeXBlKSA9PiB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICBldmVudDogJ2hhbmRsZVJlc3VsdHNNb2RlQ2hhbmdlLXRyaWdnZXJlZCcsXG4gICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgIHByZXZpb3VzTW9kZTogdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSxcbiAgICAgIG5ld01vZGU6IG1vZGUsXG4gICAgICBjdXJyZW50QWNjdW11bGF0ZWRDb3VudDogdGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICAvLyBDb25zdW1lIGRlZXAgbGluayB3aGVuIHN3aXRjaGluZyB0byBhY2N1bXVsYXRpb24gbW9kZXNcbiAgICBpZiAobW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbiB8fCBtb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb24pIHtcbiAgICAgIGlmICh0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlPy5zaG9ydElkKSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSCcsIHtcbiAgICAgICAgICBldmVudDogJ2NvbnN1bWluZy1oYXNoLW9uLW1vZGUtc3dpdGNoJyxcbiAgICAgICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgICAgICBtb2RlLFxuICAgICAgICAgIHNob3J0SWQ6IHRoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWUuc2hvcnRJZFxuICAgICAgICB9KVxuICAgICAgICB0aGlzLnJlbW92ZUhhc2hQYXJhbWV0ZXIodGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZS5zaG9ydElkKVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIElmIHN3aXRjaGluZyB0byBcIk5ld1wiIG1vZGUsIGNsZWFyIGFjY3VtdWxhdGVkIHJlY29yZHNcbiAgICBpZiAobW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb24pIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ2NsZWFyaW5nLWFjY3VtdWxhdGVkLXJlY29yZHMtb24tbW9kZS1zd2l0Y2gnLFxuICAgICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgICAgcHJldmlvdXNNb2RlOiB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlXG4gICAgICB9KVxuICAgICAgdGhpcy5zZXRTdGF0ZSh7IHJlc3VsdHNNb2RlOiBtb2RlLCBhY2N1bXVsYXRlZFJlY29yZHM6IFtdIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoeyByZXN1bHRzTW9kZTogbW9kZSB9KVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcmVtb3ZlSGFzaFBhcmFtZXRlciA9IChzaG9ydElkOiBzdHJpbmcpID0+IHtcbiAgICBpZiAoIXNob3J0SWQpIHJldHVyblxuICAgIFxuICAgIGNvbnN0IGhhc2ggPSB3aW5kb3cubG9jYXRpb24uaGFzaC5zdWJzdHJpbmcoMSlcbiAgICBjb25zdCB1cmxQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKGhhc2gpXG4gICAgXG4gICAgaWYgKHVybFBhcmFtcy5oYXMoc2hvcnRJZCkpIHtcbiAgICAgIHVybFBhcmFtcy5kZWxldGUoc2hvcnRJZClcbiAgICAgIGNvbnN0IG5ld0hhc2ggPSB1cmxQYXJhbXMudG9TdHJpbmcoKVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gnLCB7XG4gICAgICAgIGV2ZW50OiAncmVtb3ZlSGFzaFBhcmFtZXRlcicsXG4gICAgICAgIHNob3J0SWQsXG4gICAgICAgIG5ld0hhc2g6IG5ld0hhc2ggPyBgIyR7bmV3SGFzaH1gIDogJyhlbXB0eSknLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIC8vIFVwZGF0ZSB0aGUgVVJMIHdpdGhvdXQgdHJpZ2dlcmluZyBhIHJlbG9hZFxuICAgICAgd2luZG93Lmhpc3RvcnkucmVwbGFjZVN0YXRlKG51bGwsICcnLCBcbiAgICAgICAgbmV3SGFzaCA/IGAjJHtuZXdIYXNofWAgOiB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgKyB3aW5kb3cubG9jYXRpb24uc2VhcmNoXG4gICAgICApXG4gICAgICBcbiAgICAgIC8vIEFsc28gY2xlYXIgdGhlIHN0YXRlIHNvIGl0IHdvbid0IHRyaWdnZXIgYWdhaW5cbiAgICAgIGlmICh0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlPy5zaG9ydElkID09PSBzaG9ydElkKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBpbml0aWFsUXVlcnlWYWx1ZTogdW5kZWZpbmVkIH0pXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVBY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UgPSAocmVjb3JkczogRmVhdHVyZURhdGFSZWNvcmRbXSkgPT4ge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgZXZlbnQ6ICdoYW5kbGVBY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UtdHJpZ2dlcmVkJyxcbiAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgcHJldmlvdXNDb3VudDogdGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgbmV3Q291bnQ6IHJlY29yZHMubGVuZ3RoLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICB0aGlzLnNldFN0YXRlKHsgYWNjdW11bGF0ZWRSZWNvcmRzOiByZWNvcmRzIH0pXG4gIH1cblxuICAvKipcbiAgICogTk9URTogTm8gbG9uZ2VyIG5lZWRlZCAtIHdlIHVzZSBleGlzdGluZyBvdXRwdXQgRFMgaW5zdGVhZCBvZiBjcmVhdGluZyBuZXcgb25lLlxuICAgKiBLZXB0IGZvciByZWZlcmVuY2UgYnV0IG5vdCB1c2VkLlxuICAgKi9cbiAgcHJpdmF0ZSBnZXRPckNyZWF0ZUFjY3VtdWxhdGVkUmVzdWx0c0RTID0gYXN5bmMgKG9yaWdpbkRTOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlKTogUHJvbWlzZTxGZWF0dXJlTGF5ZXJEYXRhU291cmNlPiA9PiB7XG4gICAgLy8gVGhpcyBpcyBubyBsb25nZXIgdXNlZCAtIHdlIG1lcmdlIHJlY29yZHMgaW50byBleGlzdGluZyBvdXRwdXQgRFNcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoaXMgbWV0aG9kIGlzIGRlcHJlY2F0ZWQgLSB1c2UgZXhpc3Rpbmcgb3V0cHV0IERTIGluc3RlYWQnKVxuICB9XG5cbiAgLyoqXG4gICAqIENsZWFycyBzZWxlY3Rpb24gZnJvbSBtYXAgb25seSAoa2VlcHMgc2VsZWN0aW9uIGluIHdpZGdldCdzIGludGVybmFsIHN0YXRlKS5cbiAgICogQ2FsbGVkIHdoZW4gd2lkZ2V0IHBhbmVsIGNsb3NlcyB0byByZW1vdmUgc2VsZWN0aW9uIGZyb20gbWFwIHdoaWxlIHByZXNlcnZpbmcgd2lkZ2V0IHN0YXRlLlxuICAgKiBBbHdheXMgY2xlYXJzIGFjY3VtdWxhdGVkIHJlY29yZHMgaWYgdGhleSBleGlzdCwgcmVnYXJkbGVzcyBvZiBjdXJyZW50IG1vZGUuXG4gICAqL1xuICBwcml2YXRlIGNsZWFyU2VsZWN0aW9uRnJvbU1hcCA9ICgpID0+IHtcbiAgICBjb25zdCB7IGxhc3RTZWxlY3Rpb24sIGFjY3VtdWxhdGVkUmVjb3JkcywgcmVzdWx0c01vZGUgfSA9IHRoaXMuc3RhdGVcbiAgICBjb25zdCB7IGlkIH0gPSB0aGlzLnByb3BzXG4gICAgXG4gICAgY29uc3QgaXNBY2N1bXVsYXRpb25Nb2RlID0gcmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb24gfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvblxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgIGV2ZW50OiAnY2xlYXJTZWxlY3Rpb25Gcm9tTWFwLWNhbGxlZCcsXG4gICAgICB3aWRnZXRJZDogaWQsXG4gICAgICByZXN1bHRzTW9kZSxcbiAgICAgIGlzQWNjdW11bGF0aW9uTW9kZSxcbiAgICAgIGhhc0xhc3RTZWxlY3Rpb246ICEhbGFzdFNlbGVjdGlvbixcbiAgICAgIGxhc3RTZWxlY3Rpb25SZWNvcmRDb3VudDogbGFzdFNlbGVjdGlvbj8ucmVjb3JkSWRzLmxlbmd0aCB8fCAwLFxuICAgICAgaGFzQWNjdW11bGF0ZWRSZWNvcmRzOiAhIShhY2N1bXVsYXRlZFJlY29yZHMgJiYgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDApLFxuICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGFjY3VtdWxhdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICBzZWxlY3Rpb25SZWNvcmRDb3VudDogdGhpcy5zdGF0ZS5zZWxlY3Rpb25SZWNvcmRDb3VudCB8fCAwXG4gICAgfSlcbiAgICBcbiAgICAvLyBBbHdheXMgY2xlYXIgYWNjdW11bGF0ZWQgcmVjb3JkcyBpZiB0aGV5IGV4aXN0IChyZWdhcmRsZXNzIG9mIG1vZGUpXG4gICAgLy8gVGhpcyBoYW5kbGVzIHRoZSBjYXNlIHdoZXJlIG1vZGUgbWlnaHQgaGF2ZSBjaGFuZ2VkIGJ1dCByZWNvcmRzIHN0aWxsIGV4aXN0XG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgZXZlbnQ6ICdjbGVhclNlbGVjdGlvbkZyb21NYXAtY2hlY2tpbmctYWNjdW11bGF0ZWQtcmVjb3JkcycsXG4gICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAnY29uZGl0aW9uJzogJ2FjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCcsXG4gICAgICAnY29uZGl0aW9uLXJlc3VsdCc6ICEhKGFjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCksXG4gICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogYWNjdW11bGF0ZWRSZWNvcmRzPy5sZW5ndGggfHwgMFxuICAgIH0pXG4gICAgXG4gICAgaWYgKGFjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgLy8gR3JvdXAgYWNjdW11bGF0ZWQgcmVjb3JkcyBieSBvcmlnaW4gZGF0YSBzb3VyY2VcbiAgICAgIGNvbnN0IHJlY29yZHNCeU9yaWdpbkRTID0gbmV3IE1hcDxGZWF0dXJlTGF5ZXJEYXRhU291cmNlLCBGZWF0dXJlRGF0YVJlY29yZFtdPigpXG4gICAgICBjb25zdCBkc01hbmFnZXIgPSBEYXRhU291cmNlTWFuYWdlci5nZXRJbnN0YW5jZSgpXG4gICAgICBcbiAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkcy5mb3JFYWNoKChyZWNvcmQsIGluZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IHJlY29yZElkID0gcmVjb3JkLmdldElkKClcbiAgICAgICAgbGV0IG9yaWdpbkRTOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlIHwgbnVsbCA9IG51bGxcbiAgICAgICAgXG4gICAgICAgIC8vIE1ldGhvZCAxOiBUcnkgdG8gZ2V0IGZyb20gcmVjb3JkLmdldERhdGFTb3VyY2UoKVxuICAgICAgICBjb25zdCByZWNvcmREUyA9IHJlY29yZC5nZXREYXRhU291cmNlPy4oKSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gICAgICAgIGlmIChyZWNvcmREUykge1xuICAgICAgICAgIG9yaWdpbkRTID0gcmVjb3JkRFMuZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKT8uWzBdIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2UgfHwgcmVjb3JkRFNcbiAgICAgICAgICBcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgICAgICBldmVudDogJ2NsZWFyLWZvdW5kLW9yaWdpbi1kcy1mcm9tLXJlY29yZC1kcycsXG4gICAgICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgICAgICByZWNvcmRJbmRleDogaW5kZXgsXG4gICAgICAgICAgICByZWNvcmRJZCxcbiAgICAgICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTPy5pZCB8fCAnbnVsbCcsXG4gICAgICAgICAgICBtZXRob2Q6ICdyZWNvcmQuZ2V0RGF0YVNvdXJjZSgpJ1xuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIE1ldGhvZCAyOiBJZiB0aGF0IGZhaWxlZCwgc2VhcmNoIGFsbCBkYXRhIHNvdXJjZXMgZm9yIGEgcmVjb3JkIHdpdGggbWF0Y2hpbmcgSURcbiAgICAgICAgaWYgKCFvcmlnaW5EUykge1xuICAgICAgICAgIGNvbnN0IGRzTWFwID0gZHNNYW5hZ2VyLmdldERhdGFTb3VyY2VzKClcbiAgICAgICAgICBjb25zdCBhbGxEYXRhU291cmNlcyA9IE9iamVjdC52YWx1ZXMoZHNNYXApXG4gICAgICAgICAgXG4gICAgICAgICAgZm9yIChjb25zdCBkcyBvZiBhbGxEYXRhU291cmNlcykge1xuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhpcyBpcyBhIEZlYXR1cmVMYXllckRhdGFTb3VyY2UgYnkgY2hlY2tpbmcgZm9yIGdldEFsbExvYWRlZFJlY29yZHMgbWV0aG9kXG4gICAgICAgICAgICBpZiAoZHMgJiYgdHlwZW9mIChkcyBhcyBhbnkpLmdldEFsbExvYWRlZFJlY29yZHMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB0aGlzIERTIGhhcyB0aGUgcmVjb3JkXG4gICAgICAgICAgICAgICAgY29uc3QgYWxsUmVjb3JkcyA9IChkcyBhcyBhbnkpLmdldEFsbExvYWRlZFJlY29yZHMoKSB8fCBbXVxuICAgICAgICAgICAgICAgIGNvbnN0IG1hdGNoaW5nUmVjb3JkID0gYWxsUmVjb3Jkcy5maW5kKChyOiBGZWF0dXJlRGF0YVJlY29yZCkgPT4gci5nZXRJZCgpID09PSByZWNvcmRJZClcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2hpbmdSZWNvcmQpIHtcbiAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIHRoZSByZWNvcmQgLSBnZXQgb3JpZ2luIERTIGZyb20gdGhpcyBEU1xuICAgICAgICAgICAgICAgICAgb3JpZ2luRFMgPSAoZHMgYXMgYW55KS5nZXRPcmlnaW5EYXRhU291cmNlcygpPy5bMF0gYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSB8fCBkcyBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdjbGVhci1mb3VuZC1vcmlnaW4tZHMtdmlhLXNlYXJjaCcsXG4gICAgICAgICAgICAgICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgICAgICAgICAgICAgcmVjb3JkSW5kZXg6IGluZGV4LFxuICAgICAgICAgICAgICAgICAgICByZWNvcmRJZCxcbiAgICAgICAgICAgICAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ3NlYXJjaGVkLWFsbC1kYXRhLXNvdXJjZXMnLFxuICAgICAgICAgICAgICAgICAgICBzZWFyY2hlZERTSWQ6IGRzLmlkXG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgLy8gQ29udGludWUgc2VhcmNoaW5nXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmIChvcmlnaW5EUykge1xuICAgICAgICAgIGlmICghcmVjb3Jkc0J5T3JpZ2luRFMuaGFzKG9yaWdpbkRTKSkge1xuICAgICAgICAgICAgcmVjb3Jkc0J5T3JpZ2luRFMuc2V0KG9yaWdpbkRTLCBbXSlcbiAgICAgICAgICB9XG4gICAgICAgICAgcmVjb3Jkc0J5T3JpZ2luRFMuZ2V0KG9yaWdpbkRTKSEucHVzaChyZWNvcmQpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICAgICAgZXZlbnQ6ICdjbGVhci1jb3VsZC1ub3QtZmluZC1vcmlnaW4tZHMtZm9yLXJlY29yZCcsXG4gICAgICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgICAgICByZWNvcmRJbmRleDogaW5kZXgsXG4gICAgICAgICAgICByZWNvcmRJZCxcbiAgICAgICAgICAgIHdhcm5pbmc6ICdyZWNvcmQtd2lsbC1iZS1za2lwcGVkJ1xuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgZXZlbnQ6ICdwYW5lbC1jbG9zZWQtY2xlYXJpbmctYWNjdW11bGF0ZWQtcmVjb3Jkcy1mcm9tLW1hcCcsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgIG9yaWdpbkRTQ291bnQ6IHJlY29yZHNCeU9yaWdpbkRTLnNpemVcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIC8vIENsZWFyIHNlbGVjdGlvbiBmcm9tIGVhY2ggb3JpZ2luIGRhdGEgc291cmNlXG4gICAgICBjb25zdCB7IGNsZWFyU2VsZWN0aW9uSW5EYXRhU291cmNlcyB9ID0gcmVxdWlyZSgnLi9zZWxlY3Rpb24tdXRpbHMnKVxuICAgICAgY29uc3QgdXNlR3JhcGhpY3NMYXllciA9IHRoaXMucHJvcHMuY29uZmlnLnVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHRcbiAgICAgIGNvbnN0IGdyYXBoaWNzTGF5ZXIgPSB0aGlzLmdyYXBoaWNzTGF5ZXJSZWYuY3VycmVudCB8fCB1bmRlZmluZWRcbiAgICAgIFxuICAgICAgcmVjb3Jkc0J5T3JpZ2luRFMuZm9yRWFjaCgocmVjb3Jkcywgb3JpZ2luRFMpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAvLyBVc2UgYXN5bmMgSUlGRSBzaW5jZSBmb3JFYWNoIGNhbGxiYWNrIGNhbid0IGJlIGFzeW5jXG4gICAgICAgICAgOyhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBhd2FpdCBjbGVhclNlbGVjdGlvbkluRGF0YVNvdXJjZXMoaWQsIG9yaWdpbkRTLCB1c2VHcmFwaGljc0xheWVyLCBncmFwaGljc0xheWVyKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgICAgICAgIGV2ZW50OiAncGFuZWwtY2xvc2VkLWNsZWFyZWQtb3JpZ2luLWRzLXNlbGVjdGlvbicsXG4gICAgICAgICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgICAgICAgIHJlY29yZENvdW50OiByZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgICAgICAgdXNlZEdyYXBoaWNzTGF5ZXI6IHVzZUdyYXBoaWNzTGF5ZXJcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSkoKVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgICAgIGV2ZW50OiAncGFuZWwtY2xvc2VkLWNsZWFyLW9yaWdpbi1kcy1mYWlsZWQnLFxuICAgICAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ2NsZWFyU2VsZWN0aW9uRnJvbU1hcC1jbGVhcmVkLWFjY3VtdWxhdGVkLXJlY29yZHMtcmV0dXJuaW5nJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICAnd2lsbC1ub3QtZmFsbGJhY2stdG8tbGFzdFNlbGVjdGlvbic6IHRydWVcbiAgICAgIH0pXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgLy8gSFlQT1RIRVNJUzogTWF5YmUgYWNjdW11bGF0ZWRSZWNvcmRzIGV4aXN0IGJ1dCB3ZSBkaWRuJ3QgZW50ZXIgdGhlIGlmIGJsb2NrP1xuICAgIC8vIE9yIG1heWJlIHdlIHNob3VsZCBhbHdheXMgY2xlYXIgYWNjdW11bGF0ZWQgcmVjb3JkcyBpZiB0aGV5IGV4aXN0P1xuICAgIGlmIChhY2N1bXVsYXRlZFJlY29yZHMgJiYgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgZXZlbnQ6ICdjbGVhclNlbGVjdGlvbkZyb21NYXAtYWNjdW11bGF0ZWQtcmVjb3Jkcy1leGlzdC1idXQtbm90LWNsZWFyaW5nJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICByZXN1bHRzTW9kZSxcbiAgICAgICAgaXNBY2N1bXVsYXRpb25Nb2RlLFxuICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgJ2h5cG90aGVzaXMnOiAnYWNjdW11bGF0ZWQtcmVjb3Jkcy1leGlzdC1idXQtY29uZGl0aW9uLWZhaWxlZC13aHknLFxuICAgICAgICAnY29uZGl0aW9uLXdhcyc6ICdhY2N1bXVsYXRlZFJlY29yZHMgJiYgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDAnLFxuICAgICAgICAnY29uZGl0aW9uLXJlc3VsdCc6ICEhKGFjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMClcbiAgICAgIH0pXG4gICAgfVxuICAgIFxuICAgIC8vIEZhbGwgYmFjayB0byBvcmlnaW5hbCBsb2dpYyBmb3IgXCJOZXdcIiBtb2RlXG4gICAgaWYgKCFsYXN0U2VsZWN0aW9uKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAnY2xlYXJTZWxlY3Rpb25Gcm9tTWFwLW5vLWxhc3RTZWxlY3Rpb24tZXhpdGluZycsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgaGFzQWNjdW11bGF0ZWRSZWNvcmRzOiAhIShhY2N1bXVsYXRlZFJlY29yZHMgJiYgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDApLFxuICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogYWNjdW11bGF0ZWRSZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgJ2h5cG90aGVzaXMnOiAnbm8tbGFzdFNlbGVjdGlvbi1zby1leGl0aW5nLW1heWJlLXNob3VsZC1oYXZlLWNsZWFyZWQtYWNjdW11bGF0ZWQtcmVjb3Jkcy1maXJzdCdcbiAgICAgIH0pXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCBkc01hbmFnZXIgPSBEYXRhU291cmNlTWFuYWdlci5nZXRJbnN0YW5jZSgpXG4gICAgY29uc3Qgb3V0cHV0RFMgPSBkc01hbmFnZXIuZ2V0RGF0YVNvdXJjZShsYXN0U2VsZWN0aW9uLm91dHB1dERzSWQpIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgICBcbiAgICBpZiAoIW91dHB1dERTKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAncGFuZWwtY2xvc2VkLW91dHB1dC1kcy1ub3QtZm91bmQnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIG91dHB1dERzSWQ6IGxhc3RTZWxlY3Rpb24ub3V0cHV0RHNJZFxuICAgICAgfSlcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICAvLyBHZXQgb3JpZ2luIERTICh0aGUgbWFwIGxheWVyKVxuICAgICAgY29uc3Qgb3JpZ2luRFMgPSBvdXRwdXREUy5nZXRPcmlnaW5EYXRhU291cmNlcygpPy5bMF0gYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICAgICAgXG4gICAgICBpZiAoIW9yaWdpbkRTKSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgICBldmVudDogJ3BhbmVsLWNsb3NlZC1vcmlnaW4tZHMtbm90LWZvdW5kJyxcbiAgICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgICAgb3V0cHV0RHNJZDogbGFzdFNlbGVjdGlvbi5vdXRwdXREc0lkXG4gICAgICAgIH0pXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICAvLyBDaGVjayBjdXJyZW50IHNlbGVjdGlvbiBzdGF0ZSBiZWZvcmUgY2xlYXJpbmdcbiAgICAgIGNvbnN0IGN1cnJlbnRTZWxlY3RlZElkcyA9IG9yaWdpbkRTLmdldFNlbGVjdGVkUmVjb3JkSWRzKCkgfHwgW11cbiAgICAgIGNvbnN0IG91clJlY29yZElkcyA9IGxhc3RTZWxlY3Rpb24ucmVjb3JkSWRzXG4gICAgICBjb25zdCBtYXRjaGVzT3VyU2VsZWN0aW9uID0gb3VyUmVjb3JkSWRzLmxlbmd0aCA9PT0gY3VycmVudFNlbGVjdGVkSWRzLmxlbmd0aCAmJlxuICAgICAgICBvdXJSZWNvcmRJZHMuZXZlcnkocmVjb3JkSWQgPT4gY3VycmVudFNlbGVjdGVkSWRzLmluY2x1ZGVzKHJlY29yZElkKSlcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ3BhbmVsLWNsb3NlZC1jaGVja2luZy1tYXAtc2VsZWN0aW9uJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICBvdXJSZWNvcmRDb3VudDogb3VyUmVjb3JkSWRzLmxlbmd0aCxcbiAgICAgICAgbWFwU2VsZWN0ZWRDb3VudDogY3VycmVudFNlbGVjdGVkSWRzLmxlbmd0aCxcbiAgICAgICAgbWF0Y2hlc091clNlbGVjdGlvbixcbiAgICAgICAgb3VyUmVjb3JkSWRzOiBvdXJSZWNvcmRJZHMuc2xpY2UoMCwgNSksXG4gICAgICAgIG1hcFNlbGVjdGVkSWRzOiBjdXJyZW50U2VsZWN0ZWRJZHMuc2xpY2UoMCwgNSlcbiAgICAgIH0pXG5cbiAgICAgIC8vIFVzZSBjbGVhclNlbGVjdGlvbkluRGF0YVNvdXJjZXMgdXRpbGl0eSB3aGljaCBzdXBwb3J0cyBncmFwaGljcyBsYXllclxuICAgICAgY29uc3QgeyBjbGVhclNlbGVjdGlvbkluRGF0YVNvdXJjZXMgfSA9IHJlcXVpcmUoJy4vc2VsZWN0aW9uLXV0aWxzJylcbiAgICAgIGNvbnN0IHVzZUdyYXBoaWNzTGF5ZXIgPSB0aGlzLnByb3BzLmNvbmZpZy51c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0XG4gICAgICBjb25zdCBncmFwaGljc0xheWVyID0gdGhpcy5ncmFwaGljc0xheWVyUmVmLmN1cnJlbnQgfHwgdW5kZWZpbmVkXG4gICAgICBcbiAgICAgIDsoYXN5bmMgKCkgPT4ge1xuICAgICAgICBhd2FpdCBjbGVhclNlbGVjdGlvbkluRGF0YVNvdXJjZXMoaWQsIG9yaWdpbkRTLCB1c2VHcmFwaGljc0xheWVyLCBncmFwaGljc0xheWVyKVxuICAgICAgICBcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICAgIGV2ZW50OiAncGFuZWwtY2xvc2VkLWNsZWFyZWQtb3JpZ2luLWRzLXNlbGVjdGlvbicsXG4gICAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICAgIHVzZWRHcmFwaGljc0xheWVyOiB1c2VHcmFwaGljc0xheWVyXG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgICAgICAvLyBWZXJpZnkgc2VsZWN0aW9uIHdhcyBjbGVhcmVkXG4gICAgICAgIGNvbnN0IGFmdGVyQ2xlYXJJZHMgPSBvcmlnaW5EUy5nZXRTZWxlY3RlZFJlY29yZElkcygpIHx8IFtdXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgICBldmVudDogJ3BhbmVsLWNsb3NlZC1zZWxlY3Rpb24tY2xlYXJlZC1mcm9tLW1hcCcsXG4gICAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICAgIHJlY29yZENvdW50OiBsYXN0U2VsZWN0aW9uLnJlY29yZElkcy5sZW5ndGgsXG4gICAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgICAgc2VsZWN0aW9uQWZ0ZXJDbGVhcjogYWZ0ZXJDbGVhcklkcy5sZW5ndGgsXG4gICAgICAgICAgdmVyaWZpZWRDbGVhcmVkOiBhZnRlckNsZWFySWRzLmxlbmd0aCA9PT0gMFxuICAgICAgICB9KVxuICAgICAgfSkoKVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAncGFuZWwtY2xvc2VkLWNsZWFyLWZyb20tbWFwLWZhaWxlZCcsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSxcbiAgICAgICAgZXJyb3JTdGFjazogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnN0YWNrIDogdW5kZWZpbmVkXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBMb2dzIHZpc2liaWxpdHkgc3RhdGUgY2hhbmdlcy5cbiAgICovXG4gIGxvZ1Zpc2liaWxpdHlDaGFuZ2UgPSAoaXNWaXNpYmxlOiBib29sZWFuLCBtZXRob2Q6IHN0cmluZykgPT4ge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnV0lER0VULVNUQVRFJywge1xuICAgICAgZXZlbnQ6IGlzVmlzaWJsZSA/ICdwYW5lbC1vcGVuZWQnIDogJ3BhbmVsLWNsb3NlZCcsXG4gICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgIGlzVmlzaWJsZSxcbiAgICAgIG1ldGhvZCxcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgfSlcbiAgICBcbiAgICBpZiAoaXNWaXNpYmxlKSB7XG4gICAgICAvLyBXaGVuIHBhbmVsIG9wZW5zLCBjaGVjayBpZiB3ZSBoYXZlIHNlbGVjdGlvbiB0byByZXN0b3JlXG4gICAgICBjb25zdCBpc0FjY3VtdWxhdGlvbk1vZGUgPSB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uXG4gICAgICBjb25zdCBoYXNBY2N1bXVsYXRlZFJlY29yZHMgPSB0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3JkcyAmJiB0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwXG4gICAgICBjb25zdCBoYXNTZWxlY3Rpb25TdGF0ZSA9IHRoaXMuc3RhdGUuaGFzU2VsZWN0aW9uIHx8IGZhbHNlXG4gICAgICBjb25zdCBoYXNTZWxlY3Rpb25Ub1Jlc3RvcmUgPSBpc0FjY3VtdWxhdGlvbk1vZGUgXG4gICAgICAgID8gaGFzQWNjdW11bGF0ZWRSZWNvcmRzIFxuICAgICAgICA6IGhhc1NlbGVjdGlvblN0YXRlXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgZXZlbnQ6ICdwYW5lbC1vcGVuZWQtY2hlY2tpbmctc2VsZWN0aW9uJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICAgIHJlc3VsdHNNb2RlOiB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlLFxuICAgICAgICBpc0FjY3VtdWxhdGlvbk1vZGUsXG4gICAgICAgIGhhc1NlbGVjdGlvbjogaGFzU2VsZWN0aW9uU3RhdGUsXG4gICAgICAgIGhhc0FjY3VtdWxhdGVkUmVjb3JkcyxcbiAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IHRoaXMuc3RhdGUuYWNjdW11bGF0ZWRSZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgc2VsZWN0aW9uUmVjb3JkQ291bnQ6IHRoaXMuc3RhdGUuc2VsZWN0aW9uUmVjb3JkQ291bnQgfHwgMCxcbiAgICAgICAgaGFzTGFzdFNlbGVjdGlvbjogISF0aGlzLnN0YXRlLmxhc3RTZWxlY3Rpb24sXG4gICAgICAgIGxhc3RTZWxlY3Rpb25SZWNvcmRDb3VudDogdGhpcy5zdGF0ZS5sYXN0U2VsZWN0aW9uPy5yZWNvcmRJZHMubGVuZ3RoIHx8IDAsXG4gICAgICAgIGhhc1NlbGVjdGlvblRvUmVzdG9yZSxcbiAgICAgICAgZGVjaXNpb25Mb2dpYzoge1xuICAgICAgICAgICdpc0FjY3VtdWxhdGlvbk1vZGUnOiBpc0FjY3VtdWxhdGlvbk1vZGUsXG4gICAgICAgICAgJ2hhc0FjY3VtdWxhdGVkUmVjb3Jkcyc6IGhhc0FjY3VtdWxhdGVkUmVjb3JkcyxcbiAgICAgICAgICAnaGFzU2VsZWN0aW9uU3RhdGUnOiBoYXNTZWxlY3Rpb25TdGF0ZSxcbiAgICAgICAgICAnY2FsY3VsYXRlZC1oYXNTZWxlY3Rpb25Ub1Jlc3RvcmUnOiBoYXNTZWxlY3Rpb25Ub1Jlc3RvcmUsXG4gICAgICAgICAgJ3dpbGwtY2FsbC1hZGRTZWxlY3Rpb25Ub01hcCc6IGhhc1NlbGVjdGlvblRvUmVzdG9yZVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgXG4gICAgICAvLyBBZGQgc2VsZWN0aW9uIHRvIG1hcCBpZiB3ZSBoYXZlIG9uZVxuICAgICAgaWYgKGhhc1NlbGVjdGlvblRvUmVzdG9yZSkge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgICAgZXZlbnQ6ICdwYW5lbC1vcGVuZWQtY2FsbGluZy1hZGRTZWxlY3Rpb25Ub01hcCcsXG4gICAgICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICAgICAgcmVhc29uOiAnaGFzU2VsZWN0aW9uVG9SZXN0b3JlLWlzLXRydWUnXG4gICAgICAgIH0pXG4gICAgICAgIHRoaXMuYWRkU2VsZWN0aW9uVG9NYXAoKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICAgIGV2ZW50OiAncGFuZWwtb3BlbmVkLXNraXBwaW5nLWFkZFNlbGVjdGlvblRvTWFwJyxcbiAgICAgICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgICAgICByZWFzb246ICdoYXNTZWxlY3Rpb25Ub1Jlc3RvcmUtaXMtZmFsc2UnLFxuICAgICAgICAgIHdoeTogaXNBY2N1bXVsYXRpb25Nb2RlIFxuICAgICAgICAgICAgPyAnbm8tYWNjdW11bGF0ZWQtcmVjb3JkcycgXG4gICAgICAgICAgICA6ICduby1oYXNTZWxlY3Rpb24tc3RhdGUnXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFdoZW4gcGFuZWwgY2xvc2VzLCBjbGVhciBzZWxlY3Rpb24gZnJvbSBtYXAgb25seSAoa2VlcCB3aWRnZXQgc3RhdGUpXG4gICAgICBjb25zdCBpc0FjY3VtdWxhdGlvbk1vZGUgPSB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uXG4gICAgICBjb25zdCBoYXNBY2N1bXVsYXRlZFJlY29yZHMgPSB0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3JkcyAmJiB0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwXG4gICAgICBjb25zdCBoYXNTZWxlY3Rpb25TdGF0ZSA9IHRoaXMuc3RhdGUuaGFzU2VsZWN0aW9uIHx8IGZhbHNlXG4gICAgICBjb25zdCBoYXNTZWxlY3Rpb25Ub0NsZWFyID0gaXNBY2N1bXVsYXRpb25Nb2RlIFxuICAgICAgICA/IGhhc0FjY3VtdWxhdGVkUmVjb3JkcyBcbiAgICAgICAgOiBoYXNTZWxlY3Rpb25TdGF0ZVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAncGFuZWwtY2xvc2VkLWNoZWNraW5nLXNlbGVjdGlvbicsXG4gICAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgICByZXN1bHRzTW9kZTogdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSxcbiAgICAgICAgaXNBY2N1bXVsYXRpb25Nb2RlLFxuICAgICAgICBoYXNTZWxlY3Rpb246IGhhc1NlbGVjdGlvblN0YXRlLFxuICAgICAgICBoYXNBY2N1bXVsYXRlZFJlY29yZHMsXG4gICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiB0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgIHNlbGVjdGlvblJlY29yZENvdW50OiB0aGlzLnN0YXRlLnNlbGVjdGlvblJlY29yZENvdW50IHx8IDAsXG4gICAgICAgIGhhc0xhc3RTZWxlY3Rpb246ICEhdGhpcy5zdGF0ZS5sYXN0U2VsZWN0aW9uLFxuICAgICAgICBsYXN0U2VsZWN0aW9uUmVjb3JkQ291bnQ6IHRoaXMuc3RhdGUubGFzdFNlbGVjdGlvbj8ucmVjb3JkSWRzLmxlbmd0aCB8fCAwLFxuICAgICAgICBoYXNTZWxlY3Rpb25Ub0NsZWFyLFxuICAgICAgICBkZWNpc2lvbkxvZ2ljOiB7XG4gICAgICAgICAgJ2lzQWNjdW11bGF0aW9uTW9kZSc6IGlzQWNjdW11bGF0aW9uTW9kZSxcbiAgICAgICAgICAnaGFzQWNjdW11bGF0ZWRSZWNvcmRzJzogaGFzQWNjdW11bGF0ZWRSZWNvcmRzLFxuICAgICAgICAgICdoYXNTZWxlY3Rpb25TdGF0ZSc6IGhhc1NlbGVjdGlvblN0YXRlLFxuICAgICAgICAgICdjYWxjdWxhdGVkLWhhc1NlbGVjdGlvblRvQ2xlYXInOiBoYXNTZWxlY3Rpb25Ub0NsZWFyLFxuICAgICAgICAgICd3aWxsLWNhbGwtY2xlYXJTZWxlY3Rpb25Gcm9tTWFwJzogaGFzU2VsZWN0aW9uVG9DbGVhclxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgXG4gICAgICBpZiAoaGFzU2VsZWN0aW9uVG9DbGVhcikge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgICAgZXZlbnQ6ICdwYW5lbC1jbG9zZWQtY2FsbGluZy1jbGVhclNlbGVjdGlvbkZyb21NYXAnLFxuICAgICAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgICAgIHJlYXNvbjogJ2hhc1NlbGVjdGlvblRvQ2xlYXItaXMtdHJ1ZSdcbiAgICAgICAgfSlcbiAgICAgICAgdGhpcy5jbGVhclNlbGVjdGlvbkZyb21NYXAoKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICAgIGV2ZW50OiAncGFuZWwtY2xvc2VkLW5vLXNlbGVjdGlvbi10by1jbGVhcicsXG4gICAgICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICAgICAgcmVhc29uOiAnaGFzU2VsZWN0aW9uVG9DbGVhci1pcy1mYWxzZScsXG4gICAgICAgICAgd2h5OiBpc0FjY3VtdWxhdGlvbk1vZGUgXG4gICAgICAgICAgICA/ICduby1hY2N1bXVsYXRlZC1yZWNvcmRzJyBcbiAgICAgICAgICAgIDogJ25vLWhhc1NlbGVjdGlvbi1zdGF0ZSdcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogTm90aWZpZXMgSGVscGVyU2ltcGxlIG9mIHBhbmVsIHZpc2liaWxpdHkgc3RhdGUgY2hhbmdlcy5cbiAgICovXG4gIG5vdGlmeUhlbHBlclNpbXBsZU9mUGFuZWxTdGF0ZSA9IChpc1Zpc2libGU6IGJvb2xlYW4pID0+IHtcbiAgICBjb25zdCBldmVudCA9IG5ldyBDdXN0b21FdmVudChRVUVSWVNJTVBMRV9XSURHRVRfU1RBVEVfRVZFTlQsIHtcbiAgICAgIGRldGFpbDoge1xuICAgICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgICAgaXNPcGVuOiBpc1Zpc2libGVcbiAgICAgIH0sXG4gICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgY2FuY2VsYWJsZTogdHJ1ZVxuICAgIH0pXG4gICAgd2luZG93LmRpc3BhdGNoRXZlbnQoZXZlbnQpXG4gIH1cblxuICAvKipcbiAgICogTk9USUZZIHRoYXQgYSBoYXNoIHBhcmFtZXRlciBoYXMgYmVlbiB1c2VkLlxuICAgKiBQcmV2aW91c2x5IHRoaXMgcmVtb3ZlZCB0aGUgaGFzaCBmcm9tIHRoZSBVUkwsIGJ1dCBwZXIgdXBkYXRlZCByZXF1aXJlbWVudHMsXG4gICAqIHVzZXItZW50ZXJlZCBoYXNoZXMgc2hvdWxkIHJlbWFpbiBpbiB0aGUgVVJMLlxuICAgKiBcbiAgICogQHBhcmFtIHNob3J0SWQgLSBUaGUgc2hvcnRJZCBwYXJhbWV0ZXIgdGhhdCB3YXMgdXNlZFxuICAgKi9cbiAgaGFuZGxlSGFzaFBhcmFtZXRlclVzZWQgPSAoc2hvcnRJZDogc3RyaW5nKSA9PiB7XG4gICAgY29uc3QgeyBpZCB9ID0gdGhpcy5wcm9wc1xuICAgIGNvbnN0IHsgaW5pdGlhbFF1ZXJ5VmFsdWUgfSA9IHRoaXMuc3RhdGVcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gnLCB7XG4gICAgICBldmVudDogJ2hhbmRsZUhhc2hQYXJhbWV0ZXJVc2VkLW5vdGlmaWVkJyxcbiAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgIHNob3J0SWQ6IHNob3J0SWQsXG4gICAgICBjdXJyZW50SW5pdGlhbFF1ZXJ5VmFsdWU6IGluaXRpYWxRdWVyeVZhbHVlLFxuICAgICAgbm90ZTogJ0hhc2ggcmVtYWlucyBpbiBVUkwgcGVyIHVzZXIgcmVxdWlyZW1lbnQnLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcblxuICAgIC8vIENsZWFyIHRoZSBzdGF0ZSBzbyBpdCB3b24ndCB0cmlnZ2VyIGFnYWluIHdpdGhpbiB0aGlzIHNlc3Npb24vbW91bnRcbiAgICBpZiAodGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZT8uc2hvcnRJZCA9PT0gc2hvcnRJZCkge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7IGluaXRpYWxRdWVyeVZhbHVlOiB1bmRlZmluZWQgfSlcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2tzIHRoZSBVUkwgaGFzaCBwYXJhbWV0ZXJzIGZvciBhbnkgc2hvcnRJZHMgdGhhdCBtYXRjaCBxdWVyeSBpdGVtcy5cbiAgICogSWYgZm91bmQsIHN0b3JlcyB0aGUgdmFsdWUgdG8gYmUgdXNlZCB0byBhdXRvLXBvcHVsYXRlIGFuZCBleGVjdXRlIHRoZSBxdWVyeS5cbiAgICogRXhwZXJpZW5jZSBCdWlsZGVyIHVzZXMgaGFzaC1iYXNlZCBVUkwgcGFyYW1ldGVycyAoZS5nLiwgI3Bpbj0yMjIzMDU5MDEzKS5cbiAgICogXG4gICAqIFRoaXMgbWV0aG9kIHByaW9yaXRpemVzIHRoZSBmaXJzdCBtYXRjaGluZyBzaG9ydElkIGZvdW5kIGluIHRoZSBxdWVyeSBpdGVtcyBvcmRlci5cbiAgICogSWYgbXVsdGlwbGUgaGFzaCBwYXJhbWV0ZXJzIGV4aXN0LCBvbmx5IHRoZSBmaXJzdCBtYXRjaCBpcyB1c2VkLlxuICAgKi9cbiAgY2hlY2tRdWVyeVN0cmluZ0ZvclNob3J0SWRzID0gKCkgPT4ge1xuICAgIGNvbnN0IHsgY29uZmlnIH0gPSB0aGlzLnByb3BzXG4gICAgaWYgKCFjb25maWcucXVlcnlJdGVtcz8ubGVuZ3RoKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyBFeHRyYWN0IGFsbCBzaG9ydElkcyBmcm9tIHF1ZXJ5IGl0ZW1zXG4gICAgY29uc3Qgc2hvcnRJZHMgPSBjb25maWcucXVlcnlJdGVtc1xuICAgICAgLm1hcChpdGVtID0+IGl0ZW0uc2hvcnRJZClcbiAgICAgIC5maWx0ZXIoc2hvcnRJZCA9PiBzaG9ydElkICE9IG51bGwgJiYgc2hvcnRJZC50cmltKCkgIT09ICcnKVxuXG4gICAgaWYgKHNob3J0SWRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gR2V0IFVSTCBoYXNoIGZyYWdtZW50IHBhcmFtZXRlcnMgKEV4QiB1c2VzICMgZm9yIHBhcmFtcylcbiAgICAvLyBBbHNvIGNoZWNrIHF1ZXJ5IHN0cmluZyBmb3Igc2hvcnRJZHMgdG8gaGFuZGxlIGJvdGggZm9ybWF0c1xuICAgIGNvbnN0IGhhc2ggPSB3aW5kb3cubG9jYXRpb24uaGFzaC5zdWJzdHJpbmcoMSkgLy8gUmVtb3ZlIHRoZSAjXG4gICAgY29uc3QgcXVlcnkgPSB3aW5kb3cubG9jYXRpb24uc2VhcmNoLnN1YnN0cmluZygxKSAvLyBSZW1vdmUgdGhlID9cbiAgICBjb25zdCBoYXNoUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhoYXNoKVxuICAgIGNvbnN0IHF1ZXJ5UGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhxdWVyeSlcbiAgICBcbiAgICAvLyBDaGVjayBpZiB3ZSd2ZSBhbHJlYWR5IHByb2Nlc3NlZCB0aGlzIHNwZWNpZmljIGhhc2ggc3RyaW5nXG4gICAgLy8gV2Ugb25seSB0cmFjayBoYXNoIGJlY2F1c2UgcXVlcnkgcGFyYW1zIGFyZSB1c3VhbGx5IHN0YXRpYyBvciBtYW5hZ2VkIGJ5IEV4QlxuICAgIGlmICh0aGlzLmxhc3RQcm9jZXNzZWRIYXNoID09PSBoYXNoKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgLy8gVXBkYXRlIGltbWVkaWF0ZWx5IHRvIHByZXZlbnQgcmUtZW50cnkgcmFjZSBjb25kaXRpb25zXG4gICAgdGhpcy5sYXN0UHJvY2Vzc2VkSGFzaCA9IGhhc2hcblxuICAgIC8vIExvZyBhbGwgcGFyYW1zIGZvciBkZWJ1Z2dpbmdcbiAgICBjb25zdCBhbGxIYXNoUGFyYW1zOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9ID0ge31cbiAgICBoYXNoUGFyYW1zLmZvckVhY2goKHZhbHVlLCBrZXkpID0+IHsgYWxsSGFzaFBhcmFtc1trZXldID0gdmFsdWUgfSlcbiAgICBjb25zdCBhbGxRdWVyeVBhcmFtczogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfSA9IHt9XG4gICAgcXVlcnlQYXJhbXMuZm9yRWFjaCgodmFsdWUsIGtleSkgPT4geyBhbGxRdWVyeVBhcmFtc1trZXldID0gdmFsdWUgfSlcblxuICAgIC8vIExvZyBjaGVjayBmb3IgZGVidWdnaW5nXG4gICAgZGVidWdMb2dnZXIubG9nKCdIQVNIJywge1xuICAgICAgZXZlbnQ6ICd1cmwtcGFyYW0tY2hlY2snLFxuICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICBoYXNoOiBoYXNoLFxuICAgICAgcXVlcnk6IHF1ZXJ5LFxuICAgICAgYWxsSGFzaFBhcmFtcyxcbiAgICAgIGFsbFF1ZXJ5UGFyYW1zLFxuICAgICAgYXZhaWxhYmxlU2hvcnRJZHM6IHNob3J0SWRzLFxuICAgICAgY3VycmVudFN0YXRlOiB0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcblxuICAgIC8vIEZpbmQgdGhlIGZpcnN0IG1hdGNoaW5nIHNob3J0SWRcbiAgICAvLyBQUklPUklUWTpcbiAgICAvLyAxLiBBbnkgc2hvcnRJZCBmb3VuZCBpbiB0aGUgSEFTSCAoaGFzaCBhbHdheXMgd2lucylcbiAgICAvLyAyLiBBbnkgc2hvcnRJZCBmb3VuZCBpbiB0aGUgUVVFUlkgc3RyaW5nIChpZiBubyBoYXNoIG1hdGNoKVxuICAgIFxuICAgIGxldCBmb3VuZFNob3J0SWQ6IHN0cmluZyB8IG51bGwgPSBudWxsXG4gICAgbGV0IGZvdW5kVmFsdWU6IHN0cmluZyB8IG51bGwgPSBudWxsXG4gICAgbGV0IGZvdW5kSW46ICdoYXNoJyB8ICdxdWVyeScgfCBudWxsID0gbnVsbFxuXG4gICAgLy8gRklSU1QgUEFTUzogQ2hlY2sgQUxMIHNob3J0SWRzIGluIHRoZSBIQVNIXG4gICAgZm9yIChjb25zdCBzaG9ydElkIG9mIHNob3J0SWRzKSB7XG4gICAgICBpZiAoaGFzaFBhcmFtcy5oYXMoc2hvcnRJZCkpIHtcbiAgICAgICAgZm91bmRTaG9ydElkID0gc2hvcnRJZFxuICAgICAgICBmb3VuZFZhbHVlID0gaGFzaFBhcmFtcy5nZXQoc2hvcnRJZClcbiAgICAgICAgZm91bmRJbiA9ICdoYXNoJ1xuICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFNFQ09ORCBQQVNTOiBJZiBubyBoYXNoIG1hdGNoLCBjaGVjayBBTEwgc2hvcnRJZHMgaW4gdGhlIFFVRVJZIHN0cmluZ1xuICAgIGlmICghZm91bmRTaG9ydElkKSB7XG4gICAgICBmb3IgKGNvbnN0IHNob3J0SWQgb2Ygc2hvcnRJZHMpIHtcbiAgICAgICAgaWYgKHF1ZXJ5UGFyYW1zLmhhcyhzaG9ydElkKSkge1xuICAgICAgICAgIGZvdW5kU2hvcnRJZCA9IHNob3J0SWRcbiAgICAgICAgICBmb3VuZFZhbHVlID0gcXVlcnlQYXJhbXMuZ2V0KHNob3J0SWQpXG4gICAgICAgICAgZm91bmRJbiA9ICdxdWVyeSdcbiAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGZvdW5kU2hvcnRJZCAmJiBmb3VuZFZhbHVlICE9PSBudWxsKSB7XG4gICAgICAvLyBPbmx5IHVwZGF0ZSBpZiB0aGUgdmFsdWUgb3Igc2hvcnRJZCBoYXMgY2hhbmdlZCB0byBhdm9pZCB1bm5lY2Vzc2FyeSByZS1yZW5kZXJzXG4gICAgICBpZiAodGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZT8uc2hvcnRJZCAhPT0gZm91bmRTaG9ydElkIHx8IHRoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWU/LnZhbHVlICE9PSBmb3VuZFZhbHVlKSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSCcsIHtcbiAgICAgICAgICBldmVudDogJ3VybC1wYXJhbS1kZXRlY3RlZCcsXG4gICAgICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICAgICAgc2hvcnRJZDogZm91bmRTaG9ydElkLFxuICAgICAgICAgIHZhbHVlOiBmb3VuZFZhbHVlLFxuICAgICAgICAgIGZvdW5kSW4sXG4gICAgICAgICAgcHJldmlvdXNTaG9ydElkOiB0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlPy5zaG9ydElkLFxuICAgICAgICAgIHByZXZpb3VzVmFsdWU6IHRoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWU/LnZhbHVlLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9KVxuICAgICAgICBcbiAgICAgICAgLy8gUmVzZXQgdG8gTmV3IG1vZGUgd2hlbiBoYXNoIHBhcmFtZXRlciBpcyBkZXRlY3RlZCB0byBhdm9pZCBidWdzIHdpdGggYWNjdW11bGF0aW9uIG1vZGVzXG4gICAgICAgIGNvbnN0IG5lZWRzTW9kZVJlc2V0ID0gdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSAhPT0gU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb25cbiAgICAgICAgXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBcbiAgICAgICAgICBpbml0aWFsUXVlcnlWYWx1ZTogeyBzaG9ydElkOiBmb3VuZFNob3J0SWQsIHZhbHVlOiBmb3VuZFZhbHVlIH0sXG4gICAgICAgICAgLy8gUmVzZXQgdG8gTmV3IG1vZGUgYW5kIGNsZWFyIGFjY3VtdWxhdGVkUmVjb3Jkc1xuICAgICAgICAgIC4uLihuZWVkc01vZGVSZXNldCA/IHsgXG4gICAgICAgICAgICByZXN1bHRzTW9kZTogU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb24sXG4gICAgICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHM6IFtdXG4gICAgICAgICAgfSA6IHt9KVxuICAgICAgICB9KVxuICAgICAgfVxuICAgICAgcmV0dXJuIC8vIEV4aXQgYWZ0ZXIgZmluZGluZyBmaXJzdCBtYXRjaFxuICAgIH1cbiAgICBcbiAgICAvLyBJZiBubyBoYXNoIHBhcmFtZXRlcnMgbWF0Y2ggYW55IHNob3J0SWQsIGxvZyB3aGF0J3MgaW4gdGhlIGhhc2hcbiAgICBpZiAoIWZvdW5kTWF0Y2ggJiYgT2JqZWN0LmtleXMoYWxsSGFzaFBhcmFtcykubGVuZ3RoID4gMCkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNIJywge1xuICAgICAgICBldmVudDogJ2hhc2gtY2hlY2stbm8tbWF0Y2hpbmctc2hvcnRJZCcsXG4gICAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgICBoYXNoOiBoYXNoLFxuICAgICAgICBhbGxIYXNoUGFyYW1zOiBhbGxIYXNoUGFyYW1zLFxuICAgICAgICBhdmFpbGFibGVTaG9ydElkczogc2hvcnRJZHMsXG4gICAgICAgIG5vdGU6ICdIYXNoIGNvbnRhaW5zIHBhcmFtcyBidXQgbm9uZSBtYXRjaCBjb25maWd1cmVkIHNob3J0SWRzJyxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgIH1cblxuICAgIC8vIElmIG5vIGhhc2ggcGFyYW1ldGVycyBtYXRjaCBhbnkgc2hvcnRJZCwgY2xlYXIgdGhlIHN0YXRlXG4gICAgLy8gVGhpcyBoYW5kbGVzIGNhc2VzIHdoZXJlIGhhc2ggcGFyYW1ldGVycyB3ZXJlIHJlbW92ZWRcbiAgICBpZiAodGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZSkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNIJywge1xuICAgICAgICBldmVudDogJ2hhc2gtY2xlYXJlZCcsXG4gICAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgICBwcmV2aW91c1Nob3J0SWQ6IHRoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWUuc2hvcnRJZCxcbiAgICAgICAgcHJldmlvdXNWYWx1ZTogdGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZS52YWx1ZSxcbiAgICAgICAgcmVhc29uOiAnbm8tbWF0Y2hpbmctaGFzaC1wYXJhbXMnLFxuICAgICAgICBhbGxIYXNoUGFyYW1zOiBhbGxIYXNoUGFyYW1zLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICB0aGlzLnNldFN0YXRlKHsgXG4gICAgICAgIGluaXRpYWxRdWVyeVZhbHVlOiB1bmRlZmluZWRcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgcmVuZGVyICgpIHtcbiAgICBjb25zdCB7IGNvbmZpZywgaWQsIGljb24sIGxhYmVsLCBsYXlvdXRJZCwgbGF5b3V0SXRlbUlkLCBjb250cm9sbGVyV2lkZ2V0SWQgfSA9IHRoaXMucHJvcHNcbiAgICBjb25zdCB3aWRnZXRMYWJlbCA9IHRoaXMucHJvcHMuaW50bC5mb3JtYXRNZXNzYWdlKHtcbiAgICAgIGlkOiAnX3dpZGdldExhYmVsJyxcbiAgICAgIGRlZmF1bHRNZXNzYWdlOiBkZWZhdWx0TWVzc2FnZXMuX3dpZGdldExhYmVsXG4gICAgfSlcbiAgICBpZiAoIWNvbmZpZy5xdWVyeUl0ZW1zPy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiA8V2lkZ2V0UGxhY2Vob2xkZXIgaWNvbj17aWNvbk1hcC5pY29uUXVlcnl9IHdpZGdldElkPXt0aGlzLnByb3BzLmlkfSBuYW1lPXt3aWRnZXRMYWJlbH0gLz5cbiAgICB9XG5cbiAgICBpZiAoY29uZmlnLmFycmFuZ2VUeXBlID09PSBRdWVyeUFycmFuZ2VUeXBlLlBvcHBlciAmJiAhY29udHJvbGxlcldpZGdldElkKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8UXVlcnlXaWRnZXRDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXtgJHtsYXlvdXRJZH06JHtsYXlvdXRJdGVtSWR9YH0+XG4gICAgICAgICAgPFRhc2tMaXN0UG9wcGVyV3JhcHBlclxuICAgICAgICAgICAgaWQ9ezB9XG4gICAgICAgICAgICBpY29uPXtpY29ufVxuICAgICAgICAgICAgcG9wcGVyVGl0bGU9e2xhYmVsfVxuICAgICAgICAgICAgbWluU2l6ZT17Y29uZmlnLnNpemVNYXA/LmFycmFuZ2VtZW50SWNvblBvcHBlcj8ubWluU2l6ZX1cbiAgICAgICAgICAgIGRlZmF1bHRTaXplPXtjb25maWcuc2l6ZU1hcD8uYXJyYW5nZW1lbnRJY29uUG9wcGVyPy5kZWZhdWx0U2l6ZX1cbiAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxRdWVyeVRhc2tMaXN0IFxuICAgICAgICAgICAgICAgIHdpZGdldElkPXtpZH0gXG4gICAgICAgICAgICAgICAgaXNJblBvcHBlciBcbiAgICAgICAgICAgICAgICBxdWVyeUl0ZW1zPXtjb25maWcucXVlcnlJdGVtc30gXG4gICAgICAgICAgICAgICAgZGVmYXVsdFBhZ2VTaXplPXtjb25maWcuZGVmYXVsdFBhZ2VTaXplfSBcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9J3BiLTQnIFxuICAgICAgICAgICAgICAgIGluaXRpYWxRdWVyeVZhbHVlPXt0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlfSBcbiAgICAgICAgICAgICAgICBvbkhhc2hQYXJhbWV0ZXJVc2VkPXt0aGlzLmhhbmRsZUhhc2hQYXJhbWV0ZXJVc2VkfVxuICAgICAgICAgICAgICAgIHJlc3VsdHNNb2RlPXt0aGlzLnN0YXRlLnJlc3VsdHNNb2RlfVxuICAgICAgICAgICAgICAgIG9uUmVzdWx0c01vZGVDaGFuZ2U9e3RoaXMuaGFuZGxlUmVzdWx0c01vZGVDaGFuZ2V9XG4gICAgICAgICAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzPXt0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3Jkc31cbiAgICAgICAgICAgICAgICBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZT17dGhpcy5oYW5kbGVBY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2V9XG4gICAgICAgICAgICAgICAgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodD17Y29uZmlnLnVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHR9XG4gICAgICAgICAgICAgICAgZ3JhcGhpY3NMYXllcj17dGhpcy5ncmFwaGljc0xheWVyUmVmLmN1cnJlbnQgfHwgdW5kZWZpbmVkfVxuICAgICAgICAgICAgICAgIG1hcFZpZXc9e3RoaXMubWFwVmlld1JlZi5jdXJyZW50IHx8IHVuZGVmaW5lZH1cbiAgICAgICAgICAgICAgICBvbkluaXRpYWxpemVHcmFwaGljc0xheWVyPXt0aGlzLmluaXRpYWxpemVHcmFwaGljc0xheWVyRnJvbU91dHB1dERTfVxuICAgICAgICAgICAgICAgIG9uQ2xlYXJHcmFwaGljc0xheWVyPXt0aGlzLmNsZWFyR3JhcGhpY3NMYXllcklmRXhpc3RzfVxuICAgICAgICAgICAgICAgIGFjdGl2ZVRhYj17dGhpcy5zdGF0ZS5hY3RpdmVUYWJ9XG4gICAgICAgICAgICAgICAgb25UYWJDaGFuZ2U9e3RoaXMuaGFuZGxlVGFiQ2hhbmdlfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgIDwvVGFza0xpc3RQb3BwZXJXcmFwcGVyPlxuICAgICAgICA8L1F1ZXJ5V2lkZ2V0Q29udGV4dC5Qcm92aWRlcj5cbiAgICAgIClcbiAgICB9XG5cbiAgICBpZiAoY29uZmlnLmFycmFuZ2VUeXBlID09PSBRdWVyeUFycmFuZ2VUeXBlLklubGluZSAmJiAhY29udHJvbGxlcldpZGdldElkKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8UXVlcnlXaWRnZXRDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXtgJHtsYXlvdXRJZH06JHtsYXlvdXRJdGVtSWR9YH0+XG4gICAgICAgICAgPFRhc2tMaXN0SW5saW5lXG4gICAgICAgICAgICB3aWRnZXRJZD17aWR9XG4gICAgICAgICAgICB3aWRnZXRMYWJlbD17bGFiZWx9XG4gICAgICAgICAgICB3cmFwPXtjb25maWcuYXJyYW5nZVdyYXB9XG4gICAgICAgICAgICBxdWVyeUl0ZW1zPXtjb25maWcucXVlcnlJdGVtc31cbiAgICAgICAgICAgIG1pblNpemU9e2NvbmZpZy5zaXplTWFwPy5hcnJhbmdlbWVudEljb25Qb3BwZXI/Lm1pblNpemV9XG4gICAgICAgICAgICBkZWZhdWx0U2l6ZT17Y29uZmlnLnNpemVNYXA/LmFycmFuZ2VtZW50SWNvblBvcHBlcj8uZGVmYXVsdFNpemV9XG4gICAgICAgICAgICBkZWZhdWx0UGFnZVNpemU9e2NvbmZpZy5kZWZhdWx0UGFnZVNpemV9XG4gICAgICAgICAgICBpbml0aWFsUXVlcnlWYWx1ZT17dGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZX1cbiAgICAgICAgICAgIG9uSGFzaFBhcmFtZXRlclVzZWQ9e3RoaXMuaGFuZGxlSGFzaFBhcmFtZXRlclVzZWR9XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9RdWVyeVdpZGdldENvbnRleHQuUHJvdmlkZXI+XG4gICAgICApXG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgIDxQYXBlciByZWY9e3RoaXMud2lkZ2V0UmVmfSB2YXJpYW50PSdmbGF0JyBjbGFzc05hbWU9J2ppbXUtd2lkZ2V0IHJ1bnRpbWUtcXVlcnknIGRhdGEtd2lkZ2V0aWQ9e2lkfSBjc3M9e2Nzc2BcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgYH0+XG4gICAgICAgIHsvKiBIaWRkZW4gSmltdU1hcFZpZXdDb21wb25lbnQgdG8gZ2V0IG1hcCB2aWV3IGZvciBncmFwaGljcyBsYXllciAqL31cbiAgICAgICAgey8qIFVzZXMgZXhwbGljaXQgbWFwIHdpZGdldCBJRCBmcm9tIGNvbmZpZyAod2lkZ2V0LWxldmVsIGJpbmRpbmcpICovfVxuICAgICAgICB7Y29uZmlnLnVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQgJiYgY29uZmlnLmhpZ2hsaWdodE1hcFdpZGdldElkICYmIChcbiAgICAgICAgICA8SmltdU1hcFZpZXdDb21wb25lbnRcbiAgICAgICAgICAgIHVzZU1hcFdpZGdldElkPXtjb25maWcuaGlnaGxpZ2h0TWFwV2lkZ2V0SWR9XG4gICAgICAgICAgICBvbkFjdGl2ZVZpZXdDaGFuZ2U9e3RoaXMuaGFuZGxlSmltdU1hcFZpZXdDaGFuZ2VkfVxuICAgICAgICAgIC8+XG4gICAgICAgICl9XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwid2lkZ2V0LWhlYWRlclwiIGNzcz17Y3NzYFxuICAgICAgICAgIHBhZGRpbmc6IDZweCAxNnB4O1xuICAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1zeXMtY29sb3ItZGl2aWRlci1zZWNvbmRhcnkpO1xuICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXN5cy1jb2xvci1zdXJmYWNlKTtcbiAgICAgICAgYH0+XG4gICAgICAgICAgPGgzIGNsYXNzTmFtZT1cIndpZGdldC10aXRsZVwiIGNzcz17Y3NzYFxuICAgICAgICAgICAgbWFyZ2luOiAwO1xuICAgICAgICAgICAgZm9udC1zaXplOiAxcmVtO1xuICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgICAgICAgICAgIGNvbG9yOiB2YXIoLS1zeXMtY29sb3ItdGV4dC1wcmltYXJ5KTtcbiAgICAgICAgICBgfT5cbiAgICAgICAgICAgIHtsYWJlbCB8fCB3aWRnZXRMYWJlbH1cbiAgICAgICAgICA8L2gzPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjc3M9e2Nzc2BcbiAgICAgICAgICBmbGV4OiAxO1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICBgfT5cbiAgICAgICAgICA8ZGl2IGNzcz17Y3NzYFxuICAgICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICAgIG92ZXJmbG93OiBhdXRvO1xuICAgICAgICAgIGB9PlxuICAgICAgICAgICAgPFF1ZXJ5V2lkZ2V0Q29udGV4dC5Qcm92aWRlciB2YWx1ZT17YCR7bGF5b3V0SWR9OiR7bGF5b3V0SXRlbUlkfWB9PlxuICAgICAgICAgICAgICA8UXVlcnlUYXNrTGlzdCBcbiAgICAgICAgICAgICAgICB3aWRnZXRJZD17aWR9IFxuICAgICAgICAgICAgICAgIHF1ZXJ5SXRlbXM9e2NvbmZpZy5xdWVyeUl0ZW1zfSBcbiAgICAgICAgICAgICAgICBkZWZhdWx0UGFnZVNpemU9e2NvbmZpZy5kZWZhdWx0UGFnZVNpemV9IFxuICAgICAgICAgICAgICAgIGluaXRpYWxRdWVyeVZhbHVlPXt0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlfSBcbiAgICAgICAgICAgICAgICBvbkhhc2hQYXJhbWV0ZXJVc2VkPXt0aGlzLmhhbmRsZUhhc2hQYXJhbWV0ZXJVc2VkfVxuICAgICAgICAgICAgICAgIHJlc3VsdHNNb2RlPXt0aGlzLnN0YXRlLnJlc3VsdHNNb2RlfVxuICAgICAgICAgICAgICAgIG9uUmVzdWx0c01vZGVDaGFuZ2U9e3RoaXMuaGFuZGxlUmVzdWx0c01vZGVDaGFuZ2V9XG4gICAgICAgICAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzPXt0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3Jkc31cbiAgICAgICAgICAgICAgICBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZT17dGhpcy5oYW5kbGVBY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2V9XG4gICAgICAgICAgICAgICAgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodD17Y29uZmlnLnVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHR9XG4gICAgICAgICAgICAgICAgZ3JhcGhpY3NMYXllcj17dGhpcy5ncmFwaGljc0xheWVyUmVmLmN1cnJlbnQgfHwgdW5kZWZpbmVkfVxuICAgICAgICAgICAgICAgIG1hcFZpZXc9e3RoaXMubWFwVmlld1JlZi5jdXJyZW50IHx8IHVuZGVmaW5lZH1cbiAgICAgICAgICAgICAgICBvbkluaXRpYWxpemVHcmFwaGljc0xheWVyPXt0aGlzLmluaXRpYWxpemVHcmFwaGljc0xheWVyRnJvbU91dHB1dERTfVxuICAgICAgICAgICAgICAgIG9uQ2xlYXJHcmFwaGljc0xheWVyPXt0aGlzLmNsZWFyR3JhcGhpY3NMYXllcklmRXhpc3RzfVxuICAgICAgICAgICAgICAgIGFjdGl2ZVRhYj17dGhpcy5zdGF0ZS5hY3RpdmVUYWJ9XG4gICAgICAgICAgICAgICAgb25UYWJDaGFuZ2U9e3RoaXMuaGFuZGxlVGFiQ2hhbmdlfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9RdWVyeVdpZGdldENvbnRleHQuUHJvdmlkZXI+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgey8qIFN0YXRpb25hcnkgZm9vdGVyICovfVxuICAgICAgICAgIDxkaXYgY3NzPXtjc3NgXG4gICAgICAgICAgICBwYWRkaW5nOiA0cHggMTJweDtcbiAgICAgICAgICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCB2YXIoLS1zeXMtY29sb3ItZGl2aWRlci1zZWNvbmRhcnkpO1xuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tc3lzLWNvbG9yLXN1cmZhY2UtcGFwZXIpO1xuICAgICAgICAgICAgZmxleC1zaHJpbms6IDA7XG4gICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgICAgYH0+XG4gICAgICAgICAgICA8c3BhbiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjc1cmVtO1xuICAgICAgICAgICAgICBjb2xvcjogdmFyKC0tc3lzLWNvbG9yLXRleHQtdGVydGlhcnkpO1xuICAgICAgICAgICAgICBmb250LXdlaWdodDogNDAwO1xuICAgICAgICAgICAgICBsZXR0ZXItc3BhY2luZzogMC4wMjVlbTtcbiAgICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWZsZXg7XG4gICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgICAgIGdhcDogNHB4O1xuICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgIHsvKiBDb2RlL09wZW4gU291cmNlIFN5bWJvbCAqL31cbiAgICAgICAgICAgICAgPHN2ZyBcbiAgICAgICAgICAgICAgICB3aWR0aD1cIjE0XCIgXG4gICAgICAgICAgICAgICAgaGVpZ2h0PVwiMTRcIiBcbiAgICAgICAgICAgICAgICB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgXG4gICAgICAgICAgICAgICAgZmlsbD1cIm5vbmVcIiBcbiAgICAgICAgICAgICAgICBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBcbiAgICAgICAgICAgICAgICBzdHJva2VXaWR0aD1cIjJcIlxuICAgICAgICAgICAgICAgIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgICAgZmxleC1zaHJpbms6IDA7XG4gICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjY7XG4gICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxwb2x5bGluZSBwb2ludHM9XCIxNiAxOCAyMiAxMiAxNiA2XCIvPlxuICAgICAgICAgICAgICAgIDxwb2x5bGluZSBwb2ludHM9XCI4IDYgMiAxMiA4IDE4XCIvPlxuICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgICAgUXVlcnlTaW1wbGUgYnkgTWFwU2ltcGxlXG4gICAgICAgICAgICAgIDxzcGFuIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiA2cHg7XG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMC41O1xuICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC43cmVtO1xuICAgICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgICB2e1dJREdFVF9WRVJTSU9OfVxuICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9QYXBlcj5cbiAgICApXG4gIH1cbn1cblxuXG4gZXhwb3J0IGZ1bmN0aW9uIF9fc2V0X3dlYnBhY2tfcHVibGljX3BhdGhfXyh1cmwpIHsgX193ZWJwYWNrX3B1YmxpY19wYXRoX18gPSB1cmwgfSJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==